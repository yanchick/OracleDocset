<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-87761"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Online%20Database%20Relocation"></a><title>Online Database Relocation</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-10T13:15:22Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide"/>
<meta name="dcterms.identifier" content="E48838-12"/>
<meta name="dcterms.isVersionOf" content="RACAD"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-B31232F8-2F73-4F9F-B222-F83E2AB4FD98.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48838-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-CE73D14C-B50A-4A98-A820-7A15D66B46F6"></a> <span id="PAGE" style="display:none;">84/567</span> <!-- End Header -->
<a id="RACAD7899"></a>
<h1 id="RACAD-GUID-CE73D14C-B50A-4A98-A820-7A15D66B46F6" class="sect1">Online Database Relocation</h1>
<div>
<p>You can relocate an Oracle RAC One Node database to another node while still maintaining service availability using the <a id="d22233e131" class="indexterm-anchor"></a><a id="d22233e135" class="indexterm-anchor"></a><a id="d22233e139" class="indexterm-anchor"></a>online database relocation feature. Only during a planned online database relocation is a second instance of an Oracle RAC One Node database created, so that any database sessions can continue while the database is relocated to a new node. You can only use online database relocation with Oracle RAC One Node databases but you cannot use online database relocation with Oracle RAC databases regardless of their management style (either administrator or policy managed).</p>
<p>You can use the <code class="codeph"><a href="GUID-AA0CB87B-7A76-4049-8560-4F39B2B9BF26.htm#GUID-AA0CB87B-7A76-4049-8560-4F39B2B9BF26">srvctl relocate database</a></code> command configure the amount of time after the relocated database starts and services are migrated, before the former instance of the database stops. This configured amount of time is not an upper bound on the amount of time taken by the entire operation, but only controls how long the relocated database waits for connections to migrate from the former instance to the new instance, before stopping the former instance.</p>
<p>Online database relocation occurs, as follows:</p>
<ol>
<li>
<p>Start a new database instance in a different location.</p>
</li>
<li>
<p>Move all the services to the relocated instance.</p>
</li>
<li>
<p>Wait for all the connections to migrate to the relocated instance.</p>
</li>
<li>
<p>Shut down the former database instance, forcing any remaining connections to move to the relocated instance.</p>
</li>
</ol>
<p>The online relocation timeout is the amount of time you configure to complete step 3.</p>
<p>If your Oracle RAC One Node database is administrator managed, then the target node to which you want to relocate the database instance must be part of the Free server pool at the moment you initiate the relocation. If you have a spare target node in the Free server pool, then this node is added to the candidate list for the Oracle RAC One Node database.</p>
<div class="infobox-note" id="GUID-CE73D14C-B50A-4A98-A820-7A15D66B46F6__GUID-33D85196-F726-42B2-A58C-D267B3A40543">
<p class="notep1">Note:</p>
<ul style="list-style-type: disc;">
<li>
<p>When you relocate a database instance to a target node that is not currently in the candidate server list for the database, you must copy the password file, if configured, to the target node, unless you use shared password files stored in Oracle ASM.</p>
<p>When you use <a id="d22233e178" class="indexterm-anchor"></a>password file-based authentication for remote management of Oracle RAC One Node databases without any shared password file, you must have two password files on each node where the database can run: one named <span class="italic"><code class="codeph">SID_prefix</code></span><code class="codeph">_1</code> and the other named <span class="italic"><code class="codeph">SID_prefix</code></span><code class="codeph">_2</code>. You must recopy both of these files to all candidate nodes every time you update the password file. This is true for both policy-managed and administrator-managed databases.</p>
<p>Oracle recommends using Oracle Clusterware to start and stop the database, and defining users in the data dictionary for other management.</p>
</li>
<li>
<p>Before you relocate a database instance, you must ensure that the database service user is added to the wallet. Run <code class="codeph">crsctl query wallet -type OSUSER -all</code> to check whether the database service user is in the wallet. If not, then run <code class="codeph">crsctl add wallet -type OSUSER -user</code> <span class="italic"><code class="codeph">user_name</code></span> <code class="codeph">-passwd</code> to add the database service user to the wallet.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso" id="GUID-CE73D14C-B50A-4A98-A820-7A15D66B46F6__GUID-81785FC9-897F-4B11-ADE6-AE3D02F25E80">
<p class="notep1">See Also:</p>
</div>
<p>Use the <code class="codeph">srvctl relocate database</code> command to initiate relocation of an Oracle RAC One Node database. For example:</p>
<pre dir="ltr">srvctl relocate database -d rac1 -n node7
</pre>
<div class="infoboxnotealso" id="GUID-CE73D14C-B50A-4A98-A820-7A15D66B46F6__GUID-AC117DC7-1E10-49E3-AABA-C3A9AE771A16">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink ADMIN10241" target="_blank" href="../ADMIN/dba.htm#ADMIN10241"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information about creating shared password files in Oracle ASM</p>
</li>
<li>
<p><code class="codeph"><span class="q">&#34;<a href="GUID-AA0CB87B-7A76-4049-8560-4F39B2B9BF26.htm#GUID-AA0CB87B-7A76-4049-8560-4F39B2B9BF26">srvctl relocate database</a>&#34;</span></code> for more information about this command</p>
</li>
</ul>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2593">
<tr>
<td class="cellalignment2600">
<table class="cellalignment2598">
<tr>
<td class="cellalignment2597"><a href="GUID-B31232F8-2F73-4F9F-B222-F83E2AB4FD98.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2597"><a href="GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2602">
<table class="cellalignment2596">
<tr>
<td class="cellalignment2597"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2597"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2597"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2597"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2597"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2597"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>