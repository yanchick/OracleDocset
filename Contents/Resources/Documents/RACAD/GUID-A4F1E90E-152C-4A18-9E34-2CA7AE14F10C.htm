<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-87667"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Manual%20Conversion%20Procedure"></a><title>Manual Conversion Procedure</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-10T13:15:22Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide"/>
<meta name="dcterms.identifier" content="E48838-12"/>
<meta name="dcterms.isVersionOf" content="RACAD"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-811A4A82-4B4F-4C79-8A8C-78110D30C149.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-0B53B175-4EF8-4634-8A80-A4307F12DF0C.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48838-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-A4F1E90E-152C-4A18-9E34-2CA7AE14F10C"></a> <span id="PAGE" style="display:none;">301/567</span> <!-- End Header -->
<a id="RACAD8864"></a>
<h1 id="RACAD-GUID-A4F1E90E-152C-4A18-9E34-2CA7AE14F10C" class="sect1">Manual Conversion Procedure</h1>
<div>
<p>If you did not use DBCA to create a preconfigured image of your single-instance database as described in <span class="q">&#34;<a href="GUID-B2E3B500-D57D-40D4-A33F-1D0B6890DFA1.htm">Use DBCA to Create an Image of the Single-Instance Database</a>&#34;</span>, then perform the following steps to complete the conversion:</p>
<ol>
<li>
<p>Create the Optimal Flexible Architecture directory structure on each of the nodes that you have added.</p>
</li>
<li>
<p>Re-create the control files by running the <code class="codeph">CREATE CONTROLFILE</code> SQL statement with the <code class="codeph">REUSE</code> keyword and specify <code class="codeph">MAXINSTANCES</code> and <code class="codeph">MAXLOGFILES</code>, and so on, as needed for your Oracle RAC configuration. The <code class="codeph">MAXINSTANCES</code> recommended default is 32.</p>
</li>
<li>
<p>Shut down the database instance.</p>
</li>
<li id="GUID-A4F1E90E-152C-4A18-9E34-2CA7AE14F10C__BABIHFFH">
<p>If your single-instance database was using an SPFILE, then create a temporary parameter file (PFILE) from the SPFILE using the following SQL statement:</p>
<pre dir="ltr">CREATE PFILE=&#39;<span class="italic">pfile_name</span>&#39; from spfile=&#39;<span class="italic">spfile_name</span>&#39;
</pre></li>
<li>
<p>Set the <code class="codeph">CLUSTER_DATABASE</code> parameter to <code class="codeph">TRUE</code>, and set the <code class="codeph">INSTANCE_NUMBER</code> parameter to a unique value for each instance, using the <span class="italic"><code class="codeph">sid</code></span><code class="codeph">.</code><span class="italic"><code class="codeph">parameter</code></span><code class="codeph">=</code><span class="italic"><code class="codeph">value</code></span> syntax.</p>
<p>If you optimized memory usage on your single-instance database, then adjust the size of the system global area (SGA) to avoid swapping and paging when you convert to Oracle RAC. You should make this adjustment because Oracle RAC requires about 350 bytes for each buffer to accommodate the Global Cache Service (GCS). For example, if you have 10,000 buffers, then Oracle RAC requires approximately 350 multiplied by 10,000 bytes more memory. Therefore, adjust the size of the SGA by changing the <code class="codeph">DB_CACHE_SIZE</code> and <code class="codeph">DB_nK_CACHE_SIZE</code> parameters accordingly.</p>
</li>
<li>
<p>Start the database instance using the PFILE created in Step <a href="GUID-A4F1E90E-152C-4A18-9E34-2CA7AE14F10C.htm#GUID-A4F1E90E-152C-4A18-9E34-2CA7AE14F10C__BABIHFFH">4</a>.</p>
</li>
<li>
<p>If your single-instance database was using automatic undo management, then create an undo tablespace for each additional instance using the <code class="codeph">CREATE UNDO TABLESPACE</code> SQL statement.</p>
</li>
<li>
<p>Create redo threads that have at least two redo logs for each additional instance. Enable the new redo threads by using an <code class="codeph">ALTER DATABASE</code> SQL statement. Then, shut down the database instance.</p>
</li>
<li>
<p>Copy the Oracle password file from the initial node, or from the node on which you are working, to the corresponding location on the additional nodes on which the cluster database will have an instance. Replace the <code class="codeph">ORACLE_SID</code> name in each password file appropriately for each additional instance.</p>
</li>
<li>
<p>Set the <code class="codeph">REMOTE_LISTENER</code> parameter to the single client access name (SCAN) and port.</p>
</li>
<li>
<p>Configure the net service entries for the database and instances, and address entries for the <code class="codeph">LOCAL_LISTENER</code> for each instance and for the <code class="codeph">REMOTE_LISTENER</code> in the <code class="codeph">tnsnames.ora</code> file, and copy the <code class="codeph">tnsnames.ora</code> file to all nodes.</p>
</li>
<li>
<p>Create the SPFILE from the PFILE.</p>
<div class="infoboxnotealso" id="GUID-A4F1E90E-152C-4A18-9E34-2CA7AE14F10C__GUID-523CECE9-D3EC-46B7-A0D1-F12D1B4F74C1">
<p class="notep1">See Also:</p>
<p><a class="olink RIGEN" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=RIGEN"><span class="italic">Oracle Real Application Clusters Installation Guide</span></a> for your platform for information about migrating to the SPFILE</p>
</div>
</li>
<li>
<p>Create the <code class="codeph">$ORACLE_HOME/dbs/init</code><span class="italic"><code class="codeph">sid</code></span><code class="codeph">.ora</code> file that contains the following entry, where <span class="italic"><code class="codeph">spfile_path_name</code></span> is the complete path name of the SPFILE:</p>
<pre dir="ltr">spfile=<span class="italic">&#39;spfile_path_name</span>&#39;
</pre></li>
<li>
<p>On the local node, use SQL*Plus to run <code class="codeph">catclust.sql</code>. This script creates the dictionary views needed for Oracle RAC databases. For example:</p>
<pre dir="ltr">SQL&gt; start ?/rdbms/admin/catclust.sql
</pre></li>
<li>
<p>Add the configuration for the Oracle RAC or Oracle RAC One Node database and its instance-to-node mapping using SRVCTL.</p>
<ol>
<li>
<p>To add the configuration of an Oracle RAC database, use the following commands:</p>
<pre dir="ltr">srvctl add database -d <span class="italic">db_name</span> -o <span class="italic">Oracle_home</span> -p <span class="italic">spfile_path_name</span>
srvctl add instance -d <span class="italic">db_name</span> -i <span class="italic">inst1_name</span> -n <span class="italic">node1_name</span>
srvctl add instance -d <span class="italic">db_name</span> -i <span class="italic">inst2_name</span> -n <span class="italic">node2_name</span>
...
</pre></li>
<li>
<p>To add the configuration of an Oracle RAC One Node database, use the following command:</p>
<pre dir="ltr">srvctl add database -d <span class="italic">db_name</span> -c RACONENODE -o <span class="italic">Oracle_home</span>
-p <span class="italic">spfile_path_name</span>
</pre></li>
</ol>
</li>
<li>
<p>Start the Oracle RAC or Oracle RAC One Node database using SRVCTL:</p>
<pre dir="ltr">srvctl start database -d <span class="italic">db_name</span>
</pre></li>
</ol>
<p>After starting the database with SRVCTL, your conversion process is complete. You can run the following SQL statement to see the status of all the instances in your Oracle RAC database:</p>
<pre dir="ltr">SQL&gt; SELECT * FROM v$active_instances;
</pre></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2593">
<tr>
<td class="cellalignment2600">
<table class="cellalignment2598">
<tr>
<td class="cellalignment2597"><a href="GUID-811A4A82-4B4F-4C79-8A8C-78110D30C149.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2597"><a href="GUID-0B53B175-4EF8-4634-8A80-A4307F12DF0C.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2602">
<table class="cellalignment2596">
<tr>
<td class="cellalignment2597"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2597"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2597"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2597"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2597"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2597"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>