<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-87610"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Creating%20Services%20for%20Application%20Continuity%20and%20Transaction%20Guard"></a><title>Creating Services for Application Continuity and Transaction Guard</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-10T13:15:22Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide"/>
<meta name="dcterms.identifier" content="E48838-12"/>
<meta name="dcterms.isVersionOf" content="RACAD"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-FD53AE5D-7D2A-4AFC-8363-A2E0DD77863D.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-35D1F2C6-7A21-4B63-8ED9-69FCAECBA16C.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48838-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-87EDF90F-1776-474A-AD9C-93F9CBE6CB31"></a> <span id="PAGE" style="display:none;">152/567</span> <!-- End Header -->
<a id="RACAD8437"></a><a id="RACAD8438"></a><a id="RACAD8436"></a>
<h1 id="RACAD-GUID-87EDF90F-1776-474A-AD9C-93F9CBE6CB31" class="sect1">Creating Services for Application Continuity and Transaction Guard</h1>
<div>
<p>When using Application Continuity and Transaction Guard with your applications, you must configure a service. This section describes how to configure these application services depending on the functionality you plan to implement.</p>
<div class="section">
<p class="subhead1">Creating Services for Application Continuity</p>
</div>
<!-- class="section" -->
<p><a id="d32733e137" class="indexterm-anchor"></a>To configure services for Application Continuity, when you create a service using SRVCTL, set the <code class="codeph">-failovertype</code> parameter to <code class="codeph">TRANSACTION</code> and <code class="codeph">-commit_outcome</code> to <code class="codeph">TRUE</code>. Additionally, you can set values for these other service parameters for Application Continuity and load balancing:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">-replay_init_time</code>: Specifies how long, in seconds, you allow replay to start. Oracle recommends that you choose a value based on how long you will allow replay to be initiated. The default value is 300 seconds.</p>
</li>
<li>
<p><code class="codeph">-retention</code>: Specifies the time (in seconds) that the commit outcome information is stored in the database. The default value is 86400 (1 day).</p>
</li>
<li>
<p><code class="codeph">-session_state</code>: After a COMMIT has executed, if the state was changed in that transaction, then it is not possible to replay the transaction to reestablish that state if the <a id="d32733e170" class="indexterm-anchor"></a>session is lost. When configuring Application Continuity, the applications are categorized depending on whether the session state after the initial setup is dynamic or static, and then whether it is correct to continue past a COMMIT operation within a request.</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Dynamic</span>: (default) A session has a dynamic state if the session state changes are not fully encapsulated by the initialization, and cannot be fully captured in a callback at failover. Once the first transaction in a request commits, failover is internally disabled until the next request begins. This is the default mode that almost <span class="italic">all</span> applications should use for requests.</p>
</li>
<li>
<p><span class="bold">Static</span>: (special&mdash;on request) A session has a static state if all session state changes, such as NLS settings and PL/SQL package state, can be repeated in an initialization callback. This setting is used only for database diagnostic applications that do not change session state. Do not specify <code class="codeph">STATIC</code> if there are any non-transactional state changes in the request that cannot be reestablished by a callback. If you are unsure what state to specify, use <code class="codeph">DYNAMIC</code>.</p>
</li>
</ul>
</li>
<li>
<p><code class="codeph">-failoverretry</code>: Number of connection retries for each connection attempt; recommended value is 30.</p>
</li>
<li>
<p><code class="codeph">-failoverdelay</code>: Delay in seconds between each connection attempt; recommended value is 10.</p>
</li>
<li>
<p><code class="codeph">-notification</code>: FAN is highly recommended&mdash;set this value to <code class="codeph">TRUE</code> to enable FAN for OCI and ODP.Net clients.</p>
</li>
<li>
<p><code class="codeph">-clbgoal</code>: For connection load balancing, use <code class="codeph">SHORT</code> when using run-time load balancing.</p>
</li>
<li>
<p><code class="codeph">-rlbgoal</code>: For run-time load balancing, set to <code class="codeph">SERVICE_TIME</code>.</p>
</li>
</ul>
<p>To create a service for Application Continuity for a policy-managed Oracle RAC database, use a command similar to the following, where <code class="codeph">racdb</code> is the name of your Oracle RAC database, <code class="codeph">app2</code> is the name of the service you are modifying, and <code class="codeph">Svrpool1</code> is the name of the server pool in which the service is offered:</p>
<pre dir="ltr">$ srvctl add service -db racdb -service app2 -serverpool Srvpool1
    -failovertype TRANSACTION -commit_outcome TRUE -replay_init_time 1800
    -retention 86400 -notification TRUE -rlbgoal SERVICE_TIME -clbgoal SHORT
    -failoverretry 30 -failoverdelay 10
</pre>
<p>You can use SRVCTL to modify an existing service for Application Continuity, similar to the following command, where <code class="codeph">racdb</code> is the name of your Oracle RAC database, and <code class="codeph">app1</code> is the name of the service you are modifying:</p>
<pre dir="ltr">$ srvctl modify service -db racdb -service app1 -clbgoal SHORT
    -rlbgoal SERVICE_TIME -failoverretry 30 -failoverdelay 10
    -failovertype TRANSACTION -commit_outcome TRUE -replay_init_time 1800
    -retention 86400 -notification TRUE
</pre>
<div class="section">
<p class="subhead1">Creating Services for Transaction Guard</p>
</div>
<!-- class="section" -->
<p>To <a id="d32733e254" class="indexterm-anchor"></a>enable Transaction Guard, but not Application Continuity, create the service using SRVCTL and set only <code class="codeph">-commit_outcome TRUE</code>.</p>
<p>You can use SRVCTL to modify an existing service to enable Transaction Guard, similar to the following command, where <code class="codeph">racdb</code> is the name of your Oracle RAC database, and <code class="codeph">app2</code> is the name of the service you are modifying:</p>
<pre dir="ltr">$ srvctl modify service -db racdb -service app2 -commit_outcome TRUE
    -retention 86400 -notification TRUE
</pre>
<p>In the preceding example, the <code class="codeph">-retention</code> parameter specifies how long, in seconds, to maintain the history. Additionally the <code class="codeph">&ndash;notification</code> parameter is set to <code class="codeph">TRUE</code>, enabling FAN events.</p>
<p>To use Transaction Guard, a DBA must grant permission, as follows:</p>
<pre dir="ltr">GRANT EXECUTE ON DBMS_APP_CONT;
</pre>
<div class="infoboxnotealso" id="GUID-87EDF90F-1776-474A-AD9C-93F9CBE6CB31__GUID-327C63BE-BF87-41BA-A327-E2043CC56B76">
<p class="notep1">See Also:</p>
<p><a class="olink ADFNS8000" target="_blank" href="../ADFNS/adfns_trans_idemp_guard.htm#ADFNS8000"><span class="italic">Oracle Database Development Guide</span></a> for more information about using Transaction Guard with applications</p>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2593">
<tr>
<td class="cellalignment2600">
<table class="cellalignment2598">
<tr>
<td class="cellalignment2597"><a href="GUID-FD53AE5D-7D2A-4AFC-8363-A2E0DD77863D.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2597"><a href="GUID-35D1F2C6-7A21-4B63-8ED9-69FCAECBA16C.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2602">
<table class="cellalignment2596">
<tr>
<td class="cellalignment2597"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2597"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2597"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2597"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2597"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2597"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>