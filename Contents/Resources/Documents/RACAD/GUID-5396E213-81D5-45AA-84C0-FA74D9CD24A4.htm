<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-87495"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Configuring%20FCF%20for%20JDBC%2FOCI%20and%20JDBC-Thin%20Driver%20Clients"></a><title>Configuring FCF for JDBC/OCI and JDBC-Thin Driver Clients</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-10T13:15:22Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide"/>
<meta name="dcterms.identifier" content="E48838-12"/>
<meta name="dcterms.isVersionOf" content="RACAD"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-E242A789-7118-45CD-82C8-2CB52248C47F.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-C3061DB8-C974-4734-98EB-EDED23B79423.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48838-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-5396E213-81D5-45AA-84C0-FA74D9CD24A4"></a> <span id="PAGE" style="display:none;">126/567</span> <!-- End Header -->
<a id="RACAD7306"></a>
<h1 id="RACAD-GUID-5396E213-81D5-45AA-84C0-FA74D9CD24A4" class="sect1">Configuring FCF for JDBC/OCI and JDBC-Thin Driver Clients</h1>
<div>
<p>You can enable FCF for Universal Connection Pool or Implicit Connection Cache. Oracle recommends using the Universal Connection Pool for Java because the Implicit Connection Cache is deprecated. You can also use Oracle WebLogic Server Active GridLink for Oracle RAC.</p>
<p><a id="d29491e132" class="indexterm-anchor"></a><a id="d29491e134" class="indexterm-anchor"></a><a id="d29491e138" class="indexterm-anchor"></a>This procedure explains how to enable <a id="d29491e143" class="indexterm-anchor"></a><a id="d29491e149" class="indexterm-anchor"></a><a id="d29491e153" class="indexterm-anchor"></a>FCF for JDBC. For JDBC/OCI clients, if you enable FCF, then do not use the method used with Oracle Database 11<span class="italic">g</span> release 2 (11.2) of enabling FAN for OCI clients (setting <code class="codeph">notification</code> to TRUE on the service), and do not configure TAF, either on the client or for the service. You can also configure Application Continuity and Transaction Guard.</p>
<p>To enable FCF, you must first enable the Universal Connection Pool, as described in the following procedure:</p>
<ol>
<li>
<p>Create the connection pool and set <code class="codeph">setFastConnectionFailoverEnabled(true)</code>.</p>
<p>The following example creates a connection pool and enables FCF. The <code class="codeph">ucp.jar</code> library must be included in the classpath of an application to use this example.</p>
<pre dir="ltr">PoolDataSource pds = PoolDataSourceFactory.getPoolDataSource();
pds.setFastConnectionFailoverEnabled(true);
</pre></li>
<li>
<p>Determine the ports to use for Oracle Notification Service remote subscriptions.</p>
<p>Use the following command to view the Oracle Notification Service configuration on each node that is running Oracle Clusterware as in the following example:</p>
<pre dir="ltr">srvctl config nodeapps -onsonly
</pre>
<p>The output of this command lists the local and remote ports configured for Oracle Notification Service.</p>
<div class="infobox-note" id="GUID-5396E213-81D5-45AA-84C0-FA74D9CD24A4__GUID-821ABBEB-2C02-47FF-95CC-46C1B94BE1D7">
<p class="notep1">Note:</p>
<p>Oracle Notification Service configuration should have been automatically completed during the Oracle Clusterware installation.</p>
</div>
</li>
<li>
<p>Configure the remote Oracle Notification Service subscription.</p>
<p>When using the Universal Connection Pool, an application calls <code class="codeph">setONSConfiguration</code> for an <code class="codeph">OracleDataSource</code> instance and specifies the nodes and port numbers to use. The port numbers used for each node are the same as the remote port displayed for each node in Step 2, as shown in the following example. The <code class="codeph">ons.jar</code> library must be included in the classpath of an application to use this example.</p>
<pre dir="ltr">pds.setONSConfiguration(&#34;nodes=racnode1:6200,racnode2:6200&#34;);
</pre>
<p>Applications that use remote Oracle Notification Service configuration must set the <code class="codeph">oracle.ons.oraclehome</code> system property to the location of <code class="codeph">ORACLE_HOME</code> before starting the application, for example:</p>
<pre dir="ltr">java -Doracle.ons.oraclehome=$ORACLE_HOME ...
</pre></li>
<li>
<p>Configure the connection URL.</p>
<p>A connection factory&#39;s connection URL must use the service name syntax when using FCF. The service name is used to map the connection pool to the service. The following example demonstrates configuring the connection URL:</p>
<pre dir="ltr">pds.setConnectionFactoryClassName(&#34;oracle.jdbc.pool.OracleDataSource&#34;);
pds.setURL(&#34;jdbc:oracle:thin@//<span class="italic">SCAN_name</span>:<span class="italic">service_name</span>&#34;);...
</pre></li>
</ol>
<div class="infoboxnotealso" id="GUID-5396E213-81D5-45AA-84C0-FA74D9CD24A4__GUID-09D6B3C9-EE08-45A9-9BFC-6702B32D74B6">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink JJDBC28025" target="_blank" href="../JJDBC/overvw.htm#JJDBC28025"><span class="italic">Oracle Database JDBC Developer&#39;s Guide</span></a> for more information about JDBC</p>
</li>
<li>
<p><a class="olink JJUCP08100" target="_blank" href="../JJUCP/rac.htm#JJUCP08100"><span class="italic">Oracle Universal Connection Pool for JDBC Developer&#39;s Guide</span></a> for more information about configuring FCF</p>
</li>
</ul>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2593">
<tr>
<td class="cellalignment2600">
<table class="cellalignment2598">
<tr>
<td class="cellalignment2597"><a href="GUID-E242A789-7118-45CD-82C8-2CB52248C47F.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2597"><a href="GUID-C3061DB8-C974-4734-98EB-EDED23B79423.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2602">
<table class="cellalignment2596">
<tr>
<td class="cellalignment2597"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2597"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2597"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2597"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2597"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2597"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>