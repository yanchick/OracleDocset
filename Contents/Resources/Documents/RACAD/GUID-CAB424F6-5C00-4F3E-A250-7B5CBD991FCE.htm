<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-87748"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Adding%20Oracle%20RAC%20to%20Nodes%20with%20Oracle%20Clusterware%20Installed"></a><title>Adding Oracle RAC to Nodes with Oracle Clusterware Installed</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-10T13:15:22Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide"/>
<meta name="dcterms.identifier" content="E48838-12"/>
<meta name="dcterms.isVersionOf" content="RACAD"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-75C6891F-ECDC-4D78-9176-EB7E7080FBCB.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-53F37237-C0D8-4EEF-B845-EDFD56B9715A.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48838-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-CAB424F6-5C00-4F3E-A250-7B5CBD991FCE"></a> <span id="PAGE" style="display:none;">226/567</span> <!-- End Header -->
<a id="RACAD8196"></a>
<h1 id="RACAD-GUID-CAB424F6-5C00-4F3E-A250-7B5CBD991FCE" class="sect1">Adding Oracle RAC to Nodes with Oracle Clusterware Installed</h1>
<div>
<p>Before beginning this procedure, ensure that your existing nodes have the correct path to the <span class="italic"><code class="codeph">Grid_home</code></span> and that the <span class="italic"><code class="codeph">Oracle_home</code></span> environment variables are set correctly.</p>
<div class="infoboxnotealso" id="GUID-CAB424F6-5C00-4F3E-A250-7B5CBD991FCE__GUID-236DB60E-D370-4E9E-A109-01E1F6010AB7">
<p class="notep1">See Also:</p>
<p><a class="olink CWADD1167" target="_blank" href="../CWADD/GUID-929C0CD9-9B67-45D6-B864-5ED3B47FE458.htm#CWADD1167"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about adding nodes to a cluster</p>
</div>
<p>To <a id="d44729e148" class="indexterm-anchor"></a><a id="d44729e152" class="indexterm-anchor"></a>add Oracle RAC database instances to nodes that already have Oracle Clusterware installed, you must extend the Oracle RAC home that is on an existing node (<code class="codeph">node1</code> in this procedure) of the cluster to the target nodes.</p>
<ol>
<li>
<p>Navigate to the <span class="italic"><code class="codeph">Oracle_home</code></span><code class="codeph">\addnode</code> directory on <code class="codeph">node1</code> and run the <code class="codeph">addnode.bat</code> script using the following syntax, where <code class="codeph">node2</code> is the name of the node you are adding:</p>
<pre dir="ltr">addnode.bat &#34;CLUSTER_NEW_NODES={node2}&#34;
</pre>
<p>To run this command in silent mode:</p>
<pre dir="ltr">addNode.bat -silent &#34;CLUSTER_NEW_NODES={node2}&#34;
</pre>
<p>For the Oracle home directory you use, if an Oracle home user was specified when the Oracle Database software was installed, then OUI requires the password for the Oracle home user. OUI checks the wallet (stored in the OCR) for the user and extracts the password from there. If the user information is not contained in the wallet, then the <code class="codeph">addnode.bat</code> script generates an error unless you specify the <code class="codeph">-promptPasswd</code> flag on the command line.</p>
</li>
<li>
<p><a id="d44729e193" class="indexterm-anchor"></a><a id="d44729e197" class="indexterm-anchor"></a>If you store your policy-managed database on Oracle Automatic Storage Management (Oracle ASM), <a href="GUID-C68EE4B9-60C8-4EEE-B7D0-4708526B128E.htm#GUID-58E0F312-5CEC-4A57-AD7B-1058EFC3B213"><span class="xrefglossterm">Oracle Managed Files</span></a> is enabled, and if there is space in a server pool for <code class="codeph">node2</code>, then <code class="codeph">crsd</code> adds the Oracle RAC database instance to <code class="codeph">node2</code> and no further action is necessary. If Oracle Managed Files is not enabled, then you must manually add undo and redo logs.</p>
<p>If there is no space in a server pool, then <code class="codeph">node2</code> moves into the Free server pool. Use the <code class="codeph">srvctl modify srvpool</code> command to increase the cardinality of the server pool to accommodate <code class="codeph">node2</code>, after which time <code class="codeph">node2</code> moves out of the Free server pool and into the modified server pool, and <code class="codeph">crsd</code> adds the Oracle RAC database instance to <code class="codeph">node2</code>.</p>
</li>
<li>
<p>If you have an administrator-managed database, then add a new instance on <code class="codeph">node2</code> as described in <span class="q">&#34;<a href="GUID-53F37237-C0D8-4EEF-B845-EDFD56B9715A.htm">Adding Administrator-Managed Oracle RAC Database Instances to Target Nodes</a>&#34;</span>.</p>
</li>
</ol>
<p><a id="d44729e248" class="indexterm-anchor"></a>If you have a shared Oracle home that is shared using Oracle Automatic Storage Management Cluster File System (Oracle ACFS), then do the following to extend the Oracle database home to <code class="codeph">node2</code>:</p>
<ol>
<li>
<p>Start the Oracle ACFS resource on the new node by running the following command as <code class="codeph">root</code> from the <span class="italic"><code class="codeph">Grid_home</code></span><code class="codeph">\bin</code> directory:</p>
<pre dir="ltr">srvctl start filesystem -d <span class="italic">volume_device_name</span> [-n <span class="italic">node_name</span>]
</pre>
<div class="infobox-note" id="GUID-CAB424F6-5C00-4F3E-A250-7B5CBD991FCE__GUID-C1C5E1B8-0C7A-480C-9387-76C85AB5CBDD">
<p class="notep1">Note:</p>
<p>Make sure the Oracle ACFS resources, including Oracle ACFS registry resource and Oracle ACFS file system resource where the Oracle home is located, are online on the newly added node.</p>
</div>
</li>
<li>
<p>Run the following command as the user that installed Oracle RAC from the <span class="italic"><code class="codeph">Oracle_home</code></span><code class="codeph">\oui\bin</code> directory on the node you are adding to add the Oracle RAC database home:</p>
<pre dir="ltr">setup.exe -attachHome ORACLE_HOME=&#34;ORACLE_HOME&#34; LOCAL_NODE=&#34;node2&#34;
ORACLE_HOME_NAME=&#34;<span class="italic">home_name</span>&#34; -cfs
</pre></li>
<li>
<p>Navigate to the <span class="italic"><code class="codeph">Oracle_home</code></span><code class="codeph">\addnode</code> directory on <code class="codeph">node1</code> and run the <code class="codeph">addnode.bat</code> script as the user that installed Oracle RAC using the following syntax:</p>
<pre dir="ltr">addnode.bat -noCopy &#34;CLUSTER_NEW_NODES={node2}&#34;
</pre>
<div class="infobox-note" id="GUID-CAB424F6-5C00-4F3E-A250-7B5CBD991FCE__GUID-667CB644-9F0F-43E6-8816-6DCADFB417A0">
<p class="notep1">Note:</p>
<p>Use the <code class="codeph">-noCopy</code> option because the Oracle home on the destination node is already fully populated with software.</p>
</div>
</li>
</ol>
<p><a id="d44729e320" class="indexterm-anchor"></a>If you have a shared Oracle home on a shared file system that <span class="italic">is not</span> Oracle ACFS, then you must first create a mount point for the Oracle RAC database home on the target node, mount and attach the Oracle RAC database home, and update the Oracle Inventory, as follows:</p>
<ol>
<li>
<p>Run the <code class="codeph">srvctl config database -db</code> <span class="italic"><code class="codeph">db_name</code></span> command on an existing node in the cluster to obtain the mount point information.</p>
</li>
<li>
<p>Mount the file system that hosts the Oracle RAC database home.</p>
</li>
<li>
<p>Run the following command as the user that installed Oracle RAC from the <span class="italic"><code class="codeph">Oracle_home</code></span><code class="codeph">\oui\bin</code> directory on the node you are adding to add the Oracle RAC database home:</p>
<pre dir="ltr">setup.exe -attachHome ORACLE_HOME=&#34;ORACLE_HOME&#34; &#34;CLUSTER
_NODES={<span class="italic">local_node_name</span>}&#34; LOCAL_NODE=&#34;<span class="italic">node_name</span>&#34; ORACLE_HOME_NAME=&#34;<span class="italic">home_name</span>&#34;
</pre></li>
<li>
<p>Update the Oracle Inventory as the user that installed Oracle RAC, as follows:</p>
<pre dir="ltr">setup.exe -updateNodeList ORACLE_HOME=<span class="italic">mount_point_path</span> &#34;CLUSTER_NODES={<span class="italic">node_list</span>}&#34;
</pre>
<p>In the preceding command, <span class="italic"><code class="codeph">node_list</code></span> refers to a list of all nodes where the Oracle RAC database home is installed, including the node you are adding.</p>
</li>
</ol>
<div class="infobox-note" id="GUID-CAB424F6-5C00-4F3E-A250-7B5CBD991FCE__GUID-6BEE8574-C7E7-418A-9315-4CFADE640AAE">
<p class="notep1">Note:</p>
<p>Oracle recommends that you back up your voting disk and Oracle Cluster Registry (OCR) files after you complete the node addition process.</p>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2593">
<tr>
<td class="cellalignment2600">
<table class="cellalignment2598">
<tr>
<td class="cellalignment2597"><a href="GUID-75C6891F-ECDC-4D78-9176-EB7E7080FBCB.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2597"><a href="GUID-53F37237-C0D8-4EEF-B845-EDFD56B9715A.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2602">
<table class="cellalignment2596">
<tr>
<td class="cellalignment2597"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2597"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2597"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2597"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2597"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2597"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>