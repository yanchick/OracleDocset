<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-87745"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Enabling%20OCI%20Clients%20for%20Fast%20Connection%20Failover"></a><title>Enabling OCI Clients for Fast Connection Failover</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-10T13:15:22Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide"/>
<meta name="dcterms.identifier" content="E48838-12"/>
<meta name="dcterms.isVersionOf" content="RACAD"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-F94A5DDE-4E87-4C6B-9DBB-1702E706B2D9.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-AEEE07D0-057A-4617-A716-9957D98B593D.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48838-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-C9BDC6E3-16A6-4175-8B0B-E15DFD07466E"></a> <span id="PAGE" style="display:none;">130/567</span> <!-- End Header -->
<a id="RACAD8285"></a><a id="RACAD7307"></a>
<h1 id="RACAD-GUID-C9BDC6E3-16A6-4175-8B0B-E15DFD07466E" class="sect1">Enabling OCI Clients for Fast Connection Failover</h1>
<div>
<p><a id="d30136e131" class="indexterm-anchor"></a> OCI clients can enable FCF by registering to receive notifications for Oracle RAC high availability FAN events and responding when events occur. Using FCF improves the session failover response time in OCI applications and also removes connections to nonfunctioning instances from connection and session pools. FCF can be used in OCI applications that also use TAF, OCI drivers (including your own connection pools), OCI connection pool, and OCI session pools. FAN is posted over the Oracle Notification Service for both high availability and load balancing events.</p>
<p>To use FCF, you must use a service with FAN enabled. FAN is published over Oracle Notification Service. Client applications can also register callbacks that are used whenever an event occurs. This reduces the time that it takes to detect a connection failure.</p>
<p>During <code class="codeph">DOWN</code> event processing, OCI:</p>
<ul style="list-style-type: disc;">
<li>
<p>Terminates affected connections at the client and returns an error</p>
</li>
<li>
<p>Removes connections from the OCI connection pool and the OCI session pool&mdash;the session pool maps each session to a physical connection in the connection pool, and there can be multiple sessions for each connection</p>
</li>
<li>
<p>Fails over the connection if you have configured TAF. If TAF is not configured, then the client only receives an error if the instance it is connected to fails.</p>
</li>
</ul>
<p>If your application is using TAF, then you must enable the TAF properties for the service using SRVCTL or Oracle Enterprise Manager. Configure your OCI client applications to connect to an Oracle RAC database using the configured service.</p>
<div class="infobox-note" id="GUID-C9BDC6E3-16A6-4175-8B0B-E15DFD07466E__GUID-6B4A007E-FDF1-4DCC-8912-8E083A22E1E0">
<p class="notep1">Note:</p>
<p>OCI does not manage <code class="codeph">UP</code> events.</p>
</div>
<div class="infoboxnotealso" id="GUID-C9BDC6E3-16A6-4175-8B0B-E15DFD07466E__GUID-C02CCA11-02AA-4CE1-B1FD-31A5EE32C29D">
<p class="notep1">See Also:</p>
<p><a class="olink NETAG455" target="_blank" href="../NETAG/advcfg.htm#NETAG455"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for more information about configuring TAF</p>
</div>
<div class="section">
<p class="subhead1">Configuring FCF for OCI Clients</p>
</div>
<!-- class="section" -->
<p>OCI applications must connect to an Oracle RAC instance to enable HA event notification. Furthermore, these applications must perform the following steps to configure FCF for an OCI client:</p>
<ol>
<li>
<p>Configure the service for your OCI connection pool to enable FAN, connection load balancing, and run-time connection load balancing, as shown in the following example:</p>
<pre dir="ltr">$ srvctl modify service -db crm -service ociapp.example.com -notification TRUE
</pre></li>
<li>
<p>Link the application with a thread library.</p>
</li>
<li>
<p>After linking with the thread library, the applications can register a callback that is invoked whenever a FAN event occurs.</p>
</li>
</ol>
<div class="infoboxnotealso" id="GUID-C9BDC6E3-16A6-4175-8B0B-E15DFD07466E__GUID-71FD31CE-F321-4705-978D-13F4A49F1880">
<p class="notep1">See Also:</p>
<p><a class="olink LNOCI010" target="_blank" href="../LNOCI/oci01int.htm#LNOCI010"><span class="italic">Oracle Call Interface Programmer&#39;s Guide</span></a> for more information about OCI</p>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2593">
<tr>
<td class="cellalignment2600">
<table class="cellalignment2598">
<tr>
<td class="cellalignment2597"><a href="GUID-F94A5DDE-4E87-4C6B-9DBB-1702E706B2D9.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2597"><a href="GUID-AEEE07D0-057A-4617-A716-9957D98B593D.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2602">
<table class="cellalignment2596">
<tr>
<td class="cellalignment2597"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2597"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2597"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2597"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2597"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2597"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>