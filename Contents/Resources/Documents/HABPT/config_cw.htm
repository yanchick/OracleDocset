<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-46429"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Configuring%20Oracle%20Database%20with%20Oracle%20Clusterware"></a><title>Configuring Oracle Database with Oracle Clusterware</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1060"/>
<meta name="dcterms.created" content="2015-07-15T12:40:31Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database High Availability Best Practices"/>
<meta name="dcterms.identifier" content="E40019-02"/>
<meta name="dcterms.isVersionOf" content="HABPT"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2005, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="config_db.htm" title="Previous" type="text/html"/>
<link rel="Next" href="config_rac.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E40019-02.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">10/20</span> <!-- End Header -->
<div id="HABPT4849" class="chapter"><a id="CEGJIACG"></a>
<h1 class="chapter"><span class="secnum">5</span> Configuring Oracle Database with Oracle Clusterware</h1>
<p>Oracle Clusterware enables servers to communicate with each other, so that they appear to function as a collective unit. Oracle Clusterware provides the infrastructure necessary to run Oracle Real Application Clusters (Oracle RAC) and Oracle RAC One Node. The Grid Infrastructure is the software that provides the infrastructure for an enterprise grid architecture. In a cluster, this software includes Oracle Clusterware and Oracle ASM. For a standalone server, the Grid Infrastructure includes Oracle Restart and Oracle ASM. Oracle Database 12<span class="italic">c</span> combines these infrastructure products into one software installation called the Grid Infrastructure home. Oracle Restart provides managed startup and restart of a single-instance (non-clustered) Oracle Database, Oracle ASM instance, service, listener, and any other process running on the server. If an interruption of a service occurs after a hardware or software failure, Oracle Restart automatically takes the necessary steps to restart the component.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CEGIDFJD">About Oracle Clusterware Best Practices</a></p>
</li>
<li>
<p><a href="#CEGHCAEE">Oracle Clusterware Configuration Best Practices</a></p>
</li>
<li>
<p><a href="#CEGBHEDJ">Oracle Clusterware Operational Best Practices</a></p>
</li>
</ul>
<a id="CEGIDFJD"></a>
<div id="HABPT5272" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">5.1</span> About Oracle Clusterware Best Practices</h2>
<p>Oracle Clusterware, as part of Oracle Grid Infrastructure, is software that manages the availability of user applications and Oracle databases. Oracle Clusterware is the only clusterware needed for most platforms on which Oracle RAC operates. You can also use clusterware from other vendors in addition to Oracle Clusterware on the same system, if needed. However, adding unnecessary layers of software for functionality that is provided by Oracle Clusterware adds complexity and cost and can reduce system availability, especially for planned maintenance.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Before installing Oracle RAC or Oracle RAC One Node, you must first install Oracle Grid Infrastructure, which consists of Oracle Clusterware and Oracle Automatic Storage Management (ASM). After Oracle Clusterware and Oracle ASM are operational, you can use Oracle Universal Installer to install the Oracle Database software with the Oracle RAC components.</div>
<p>Oracle Clusterware includes a high availability framework that provides an infrastructure to manage any application. Oracle Clusterware ensures that the applications it manages start when the system starts and monitors the applications to ensure that they are always available. If a process fails then Oracle Clusterware attempts to restart the process using agent programs (agents). Oracle clusterware provides built-in agents so that you can use shell or batch scripts to protect and manage an application. Oracle Clusterware also provides preconfigured agents for some applications (for example for Oracle TimesTen In-Memory Database). If a node in the cluster fails, then you can program processes that normally run on the failed node to restart on another node. The monitoring frequency, starting, and stopping of the applications and the application dependencies are configurable.</p>
<p>Oracle RAC One Node is a single instance of an Oracle RAC database that runs on one node in a cluster. For information about working with Oracle RAC One Node, see <a href="config_rac.htm#BHCJFIDC">Section 6.2, &#34;Configuring Oracle Database with Oracle RAC One Node&#34;</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CWADD91277" href="../CWADD/GUID-13400D83-3FF4-482E-B7A7-41C864A491DC.htm#CWADD91277"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about Making Applications Highly Available Using Oracle Clusterware</p>
</li>
<li>
<p><a class="olink TDPRC162" href="../TDPRC/install_rac.htm#TDPRC162"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> for more information about installing Oracle Grid Infrastructure for a cluster</p>
</li>
</ul>
</div>
<a id="CEGIDECG"></a>
<div id="HABPT4855" class="sect2">
<h3 class="sect2"><span class="secnum">5.1.1</span> Client Configuration and Migration<a id="sthref278"></a><a id="sthref279"></a> Concepts</h3>
<p>Oracle provides the following features to enable you to migrate client connections between nodes. These features minimize the impact of a node failure from the client perspective:</p>
<ul>
<li>
<p>Client-side load balancing and connection load balancing. For more information see <a href="#CEGJGEIB">Section 5.2.6, &#34;Use Client-Side and Server-Side Load Balancing.&#34;</a></p>
</li>
<li>
<p><a href="#CEGEBCEC">Single Client Access Name (SCAN)</a></p>
</li>
<li>
<p><a href="#CEGHAGGC">Fast Application Notification (FAN)</a></p>
</li>
<li>
<p>Fast Connection Failover (FCF) (ideally used by FAN-enabled clients)</p>
</li>
<li>
<p><a href="#CHDCJHAC">Application Continuity and Transaction Guard</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
For more information about using and configuring Fast Connection Failover (FCF), see <a href="config_fcf.htm#BDCFJEHD">Chapter 10, &#34;Client Failover Best Practices for Highly Available Oracle Databases.&#34;</a></div>
<div id="HABPT5273" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref280"></a>
<h4 class="sect3"><span class="secnum">5.1.1.1</span> Services</h4>
<p><a id="sthref281"></a><a id="sthref282"></a>Services de-couple any hardwired mapping between a connection request and an Oracle RAC instance. Services are an entity defined for an Oracle RAC database that allows the workload for an Oracle RAC database to be managed. Services divide the entire workload executing in the Oracle Database into mutually disjoint classes. Each service represents a workload with common attributes, service level thresholds, and priorities. The grouping is based on attributes of the work that might include the application being invoked, the application function to be invoked, the priority of execution for the application function, the job class to be managed, or the data range used in the application function or job class.</p>
<p>To manage workloads or a group of applications, you can define services that you assign to a particular application or to a subset of an application&#39;s operations. You can also group work by type under services. For example, online users can use one service, while batch processing can use another and reporting can use yet another service to connect to the database.</p>
<p>Oracle recommends that all users who share a service have the same service level requirements. You can define specific characteristics for services and each service can represent a separate unit of work. There are many options that you can take advantage of when using services. Although you do not have to implement these options, using them helps optimize application performance.</p>
</div>
<!-- class="sect3" -->
<a id="CEGHAGGC"></a>
<div id="HABPT5274" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">5.1.1.2</span> Fast Application Notification (FAN)</h4>
<p><a id="sthref283"></a><a id="sthref284"></a>Fast Application Notification (FAN) is a notification mechanism that is integrated into Oracle Clusterware to notify registered clients about configuration and service level information that includes service status changes, such as UP or DOWN events. Applications can respond to FAN events and take immediate action. FAN UP and DOWN events can apply to instances, services, and nodes.</p>
<p>The use of Fast Application Notification (FAN) requires the use of Services.</p>
<p>For cluster configuration changes, the Oracle RAC high availability framework publishes a FAN event immediately when a state change occurs in the cluster. Instead of waiting for the application to poll the database and detect a problem, applications can receive FAN events and react immediately. With FAN, in-flight transactions can be immediately terminated and the client notified when the instance fails.</p>
<p>FAN also publishes load balancing advisory events. Applications can take advantage of the load balancing advisory FAN events to direct work requests to the instance in the cluster that is currently providing the best service quality.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN13179" href="../ADMIN/restart.htm#ADMIN13179"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information about Overview of Fast Application Notification</div>
</div>
<!-- class="sect3" -->
<a id="CEGEBCEC"></a>
<div id="HABPT5275" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">5.1.1.3</span> Single Client Access Name (SCAN)</h4>
<p>Single Client Access Name (SCAN) was introduced with Oracle Real Application Clusters (Oracle RAC) 11<span class="italic">g</span> Release 2 and provides a single name for clients to access an Oracle Database running in a cluster. The benefit is clients using SCAN do not need to change their connect string if you add or remove nodes in the cluster. Having a single name to access the cluster allows clients to use the EZConnect client and the simple JDBC thin URL to access any database running in the clusters independently of which server(s) in the cluster the database is active. SCAN provides load balancing and failover of client connections to the database. The SCAN is a virtual IP name, similar to the names used for virtual IP addresses, such as <code dir="ltr">node1-vip</code>. However, unlike a virtual IP, the SCAN is associated with the entire cluster, rather than an individual node, and associated with multiple IP addresses, not just one address. In Oracle Real Application Clusters 12<span class="italic">c</span> SCAN supports multiple subnets in the cluster (one SCAN per subnet).</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CWADD92091" href="../CWADD/GUID-E4A38AA8-0D49-434F-91CB-F99F347BE378.htm#CWADD92091"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about Single Client Access Name (SCAN)</p>
</li>
<li>
<p><a class="olink NETAG1125" href="../NETAG/naming.htm#NETAG1125"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for more information about EZConnect</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDCJHAC"></a>
<div id="HABPT5362" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">5.1.1.4</span> Application Continuity and Transaction Guard</h4>
<p>Application Continuity (AC) is a new technology that protects applications from instance and session failures by re-playing affected &rdquo;in-flight&rdquo; transactions on another database instance in the cluster.</p>
<p>It enables the replay, in a non-disruptive and rapid manner, of a request against the database after a recoverable error that makes the database session unavailable. The request can contain transactional and non-transactional calls to the database. After a successful replay, the application can continue where the database session left off.</p>
<p>Users are not left in doubt whether their transactions have gone through successfully</p>
<p>Transaction Guard is a reliable protocol and tool that returns the outcome of the last in-flight transaction after an outage that makes the database session unavailable. Without Transaction Guard, applications and users who attempt to retry operations following an outage can cause logical corruption by committing duplicate transactions or committing transactions out of order.</p>
<p>Use UCP version 12.1.0.2 or later for Application Continuity and Transaction Guard.</p>
<div class="infoboxnotealso">
<p class="notep1">See also:</p>
<a class="olink ADFNS915" href="../ADFNS/adfns_avail.htm#ADFNS915"><span class="italic">Oracle Database Development Guide</span></a> for information about Application Continuity and Transaction Guard</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGHCAEE"></a>
<div id="HABPT4850" class="sect1">
<h2 class="sect1"><span class="secnum">5.2</span> Oracle Clusterware Configuration Best Practices</h2>
<p><a id="sthref285"></a>Use the following Oracle Clusterware configuration best practices:</p>
<ul>
<li>
<p><a href="#CEGCJHIC">Use the Cluster Verification Utility (CVU)</a></p>
</li>
<li>
<p><a href="#CEGBJEGG">Use a Local Home for Oracle Database and Oracle Clusterware with Oracle ASM</a></p>
</li>
<li>
<p><a href="#CEGCAGHG">Ensure Services are Highly Available</a></p>
</li>
<li>
<p><a href="#CEGHFBIC">Client Configuration and FAN Best Practices</a></p>
</li>
<li>
<p><a href="#CEGGDIHA">Connect to Database Using Services and Single Client Access Name (SCAN)</a></p>
</li>
<li>
<p><a href="#CEGJGEIB">Use Client-Side and Server-Side Load Balancing</a></p>
</li>
<li>
<p><a href="#CEGJFFDG">Mirror Oracle Cluster Registry (OCR) and Configure Multiple Voting Disks with Oracle ASM</a></p>
</li>
<li>
<p><a href="#CEGHJBDJ">Use Company Wide Cluster Time Management</a></p>
</li>
<li>
<p><a href="#CEGFJBDI">Verify That Oracle Clusterware, Oracle RAC, and Oracle ASM Use the Same Interconnect Network</a></p>
</li>
<li>
<p><a href="#CEGIHIJC">Use Redundant Interconnect with Highly Available IP (HAIP)</a></p>
</li>
<li>
<p><a href="#CEGGAFEG">Configure Failure Isolation with Intelligent Management Platform Interface (IPMI)</a></p>
</li>
<li>
<p><a href="#CHDGHJFE">Use Jumbo Frames for Cluster Interconnect Network</a></p>
</li>
</ul>
<a id="CEGCJHIC"></a>
<div id="HABPT5276" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">5.2.1</span> Use the Cluster Verification Utility (CVU)</h3>
<p>Cluster Verification Utility (CVU) can verify the primary cluster components during installation and you can use the utility to verify configuration and components. A component can be basic, such as free disk space, or it can be complex, such as checking Oracle Clusterware integrity. For example, CVU can verify multiple Oracle Clusterware subcomponents across Oracle Clusterware layers. Additionally, CVU can check disk space, memory, processes, and other important cluster components.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD1100" href="../CWADD/GUID-B445A858-9F00-4423-990E-109545AC11C3.htm#CWADD1100"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about the Cluster Verification Utility</div>
</div>
<!-- class="sect2" -->
<a id="CEGBJEGG"></a>
<div id="HABPT4853" class="sect2">
<h3 class="sect2"><span class="secnum">5.2.2</span> Use a Local Home for Oracle Database and Oracle Clusterware<a id="sthref286"></a><a id="sthref287"></a><a id="sthref288"></a> with Oracle ASM</h3>
<p>All rolling patch features require that the software home being patched is local, not shared. The software must be physically present in a local file system on each node in the cluster and it is not on a shared cluster file system.</p>
<p>The reason for this requirement is that if a shared <a id="sthref289"></a><a id="sthref290"></a>cluster file system is used, patching the software on one node affects all of the nodes, and would require that you shut down all components using the software on all nodes. Using a local file system allows software to be patched on one node without affecting the software on any other nodes.</p>
<p>Note the following when you install Oracle Grid Infrastructure and configure Oracle Clusterware:</p>
<ul>
<li>
<p>Oracle RAC databases require shared storage for the database files.</p>
</li>
<li>
<p>Configure Oracle Cluster Registry (OCR) and voting files to use Oracle ASM. For more information, see <a href="#CEGJFFDG">Section 5.2.7, &#34;Mirror Oracle Cluster Registry (OCR) and Configure Multiple Voting Disks with Oracle ASM&#34;</a></p>
</li>
<li>
<p>Oracle recommends that you install Oracle Database on local homes, rather than using a shared home on shared storage. It is recommended to <span class="italic">not</span> use a shared file system for the Oracle Database Home (using a shared home prevents you from doing rolling upgrades, as all software running from that shared location must be stopped before it can be patched).</p>
</li>
<li>
<p>Oracle Clusterware and Oracle ASM are both installed in one home on a non shared file system called the Grid Infrastructure home (<code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code>).</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink TDPRC162" href="../TDPRC/install_rac.htm#TDPRC162"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> for more information about installing Oracle ASM</div>
</div>
<!-- class="sect2" -->
<a id="CEGCAGHG"></a>
<div id="HABPT4858" class="sect2">
<h3 class="sect2"><span class="secnum">5.2.3</span> Ensure Services are Highly Available<a id="sthref291"></a></h3>
<p>For cases where a service only has one preferred instance, ensure that the service is started immediately on an available instance after it is brought down on its preferred instance. Starting the service immediately ensures that affected clients can instantaneously reconnect and continue working. Oracle Clusterware handles this responsibility and it is of utmost importance during unplanned outages.</p>
<p>Even though you can rely on Oracle Clusterware to start the service during planned maintenance as well, it is safer to ensure that the service is available on an alternate instance by manually starting an alternate preferred instance ahead of time. Manually starting an alternate instance eliminates the single point of failure with a single preferred instance and you have the luxury to do this because it is a planned activity. Add at least a second preferred instance to the service definition and start the service before the planned maintenance. You can then stop the service on the instance where maintenance is being performed with the assurance that another service member is available. Adding one or more preferred instances does not have to be a permanent change. You can revert it back to the original service definition after performing the planned maintenance.</p>
<p>Manually relocating a service rather than changing the service profile is advantageous in cases such as the following:</p>
<ul>
<li>
<p>If you are using Oracle XA, then use of manual service relocation is advantageous because, although the XA specification allows for a transaction branch to be suspended and resumed by the TM, if connection load balancing is utilized then any resumed connection could land on an alternate Oracle instance to the one that the transaction branch started on and there is a performance implication if a single distributed transaction spans multiple database instances.</p>
</li>
<li>
<p>If an application is not designed to work properly with multiple service members, then application errors or performance issues can arise.</p>
</li>
</ul>
<p>As with all configuration changes, you should test the effect of a service with multiple members to assess its viability and impact in a test environment before implementing the change in your production environment.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The Technical Article, &#34;XA and Oracle controlled Distributed Transactions&#34; on the Oracle Real Application Clusters website at <code dir="ltr"><a href="http://www.oracle.com/technetwork/database/clustering/overview/index.html">http://www.oracle.com/technetwork/database/clustering/overview/index.html</a></code></div>
</div>
<!-- class="sect2" -->
<a id="CEGHFBIC"></a>
<div id="HABPT5277" class="sect2">
<h3 class="sect2"><span class="secnum">5.2.4</span> Client Configuration and FAN Best Practices</h3>
<p>The ability to migrate client connections to and from the nodes on which you are working is a critical aspect of planned maintenance. Migrating client connections should always be the first step in any planned maintenance activity requiring software shutdown (for example, when performing a rolling upgrade). The potential for problems increases if there are still active database connections when the service switchover commences.</p>
<p>An example of a best-practice process for client redirection during planned maintenance could involve the following steps:</p>
<ol>
<li>
<p>Client is configured to receive FAN notifications and is properly configured for run time connection load balancing and Fast Connection Failover.</p>
</li>
<li>
<p>Oracle Clusterware stops services on the instance to be brought down or relocates services to an alternate instance.</p>
</li>
<li>
<p>Oracle Clusterware returns a <code dir="ltr">Service-Member-Down</code> event.</p>
</li>
<li>
<p>Client that is configured to receive FAN notifications receives a notification for a <code dir="ltr">Service-Member-Down</code> event and moves connections to other instances offering the service.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink RACAD076" href="../RACAD/GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5.htm#RACAD076"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for an Introduction to Automatic Workload Management.</p>
</li>
<li>
<p>Detailed information about client failover best practices in an Oracle RAC environment are available in the &#34;Automatic Workload Management with Oracle Real Application Clusters 11<span class="italic">g</span>&#34; Technical Article on the Oracle Technology Network at</p>
<p><code dir="ltr"><a href="http://www.oracle.com/technetwork/database/clustering/overview/index.html">http://www.oracle.com/technetwork/database/clustering/overview/index.html</a></code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CEGGDIHA"></a>
<div id="HABPT4859" class="sect2">
<h3 class="sect2"><span class="secnum">5.2.5</span> Connect to Database Using Services and Single Client Access Name (SCAN)</h3>
<p><a id="sthref292"></a><a id="sthref293"></a><a id="sthref294"></a>With Oracle Database 12<span class="italic">c</span>, application workloads can be defined as services so that they can be automatically or manually managed and controlled. For manually managed services, DBAs control which processing resources are allocated to each service during both normal operations and in response to failures. Performance metrics are tracked by service and thresholds set to automatically generate alerts should these thresholds be crossed. CPU resource allocations and resource consumption controls are managed for services using Database Resource Manager. Oracle tools and facilities such as Job Scheduler, Parallel Query, and Oracle Streams Advanced Queuing also use services to manage their workloads.</p>
<p>With Oracle Database 12<span class="italic">c</span>, you can define rules to automatically allocate processing resources to services. Oracle RAC in Oracle Database 12<span class="italic">c</span> instances can be allocated to process individual services or multiple services, as needed. These allocation rules can be modified dynamically to meet changing business needs. For example, you could modify these rules at quarter end to ensure that there are enough processing resources to complete critical financial functions on time. You can also define rules so that when instances running critical services fail, the workload is automatically shifted to instances running less critical workloads. <a id="sthref295"></a>You can create and administer services with the SRVCTL utility or with Oracle Enterprise Manager.</p>
<p>You should make application connections to the database by using a VIP address (preferably SCAN) in combination with a service to achieve the greatest degree of availability and manageability.</p>
<p>A <a id="sthref296"></a>VIP address is an alternate public address that client connections use instead of the standard public IP address. If a node fails, then the node&#39;s VIP address fails over to another node but there is no listener listening on that VIP, so a client that attempts to connect to the VIP address receives a connection refused error (<code dir="ltr">ORA-12541</code>) instead of waiting for long TCP connect timeout messages. This error causes the client to quickly move on to the next address in the address list and establish a valid database connection. New client connections can initially try to connect to a failed-over-VIP, but when there is no listener running on that VIP the &#34;no listener&#34; error message is returned to the clients. The clients traverse to the next address in the address list that has a non-failed-over VIP with a listener running on it.</p>
<p>The Single Client Access Name (SCAN) is a fully qualified name (hostname+domain) that is configured to resolve to all three of the VIP addresses allocated for the SCAN. The addresses resolve using Round Robin DNS either on the DNS server, or within the cluster in a GNS configuration. SCAN listeners can run on any node in the cluster, multiple SCAN listeners can run on one node.</p>
<p>In Oracle Database 12<span class="italic">c</span> and later, by default, instances register with SCAN listeners as remote listeners.</p>
<p>SCANs are cluster resources. SCAN vips and SCAN listeners run on random cluster nodes. SCANs provide location independence for the databases, so that client configuration does not have to depend on which nodes are running a particular database. For example, if you configure policy managed server pools in a cluster, then the SCAN enables connections to databases in these server pools regardless of which nodes are allocated to the server pool.</p>
<p>SCAN names functions like a virtual cluster address. SCANs are resolved to three SCAN VIPs that may run on any node in the cluster. So unlike a VIP address per node as entry point, clients connecting to the SCAN no longer require any updates on how they connect when a virtual IP addresses is added, changed, or removed from the cluster. The SCAN addresses resolve to the cluster, rather than to a specific node address.</p>
<p>During Oracle Grid Infrastructure installation, SCAN listeners are created for as many IP addresses as there are addresses assigned to resolve to the SCAN. Oracle recommends that the SCAN resolves to three addresses, to provide high availability and scalability. If the SCAN resolves to three addresses, then there are three SCAN listeners created.</p>
<p>Oracle RAC provides failover with the node VIP addresses by configuring multiple listeners on multiple nodes to manage client connection requests for the same database service. If a node fails, then the service connecting to the VIP is relocated transparently to a surviving node. If the client or service are configured with transparent application failover options, then the client is reconnected to a surviving node. When a SCAN Listener receives a connection request, the SCAN Listener checks for the least loaded instance providing the requested service. It then re-directs the connection request to the local listener on the node where the least loaded instance is running. Subsequently, the client is given the address of the local listener. The local listener finally creates the connection to the database instance.</p>
<p>Clients configured to use IP addresses for Oracle Database releases before Oracle Database 11<span class="italic">g</span> Release 2 can continue to use their existing connection addresses; using SCANs is not required: in this case, the pre-Database 11<span class="italic">g</span> Release 2 client would use a TNS connect descriptor that resolves to the node-VIPs of the cluster. When an earlier version of Oracle Database is upgraded, it registers with the SCAN listeners, and clients can start using the SCAN to connect to that database. The database registers with the SCAN listener through the remote listener parameter in the init.ora file. The <code dir="ltr"><a id="sthref297"></a>REMOTE_LISTENER</code> parameter must be set to SCAN:PORT. Do not set it to a TNSNAMES alias with a single address with the SCAN as HOST=SCAN. Having a single name to access the cluster allows clients to use the EZConnect client and the simple JDBC thin URL to access any database running in the cluster, independently of which server(s) in the cluster the database is active. For example:</p>
<pre dir="ltr">sqlplus system@sales1-scan:1521/oltp
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink RACAD076" href="../RACAD/GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5.htm#RACAD076"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about automatic workload management</p>
</li>
<li>
<p><a class="olink RACAD7273" href="../RACAD/GUID-504A615B-C63C-43C4-A481-520DEC015EF1.htm#RACAD7273"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for an Overview of Connecting to Oracle Database Using Services and VIP Addresses</p>
</li>
<li>
<p><a class="olink CWADD91886" href="../CWADD/GUID-1138BEFD-B0B8-47E3-A78C-B28BDD08003B.htm#CWADD91886"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about Oracle Clusterware Network Configuration Concepts</p>
</li>
<li>
<p><a class="olink NETAG1125" href="../NETAG/naming.htm#NETAG1125"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for more information about EZConnect</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CEGJGEIB"></a>
<div id="HABPT4860" class="sect2">
<h3 class="sect2"><span class="secnum">5.2.6</span> Use Client-Side and Server-Side Load Balancing<a id="sthref298"></a><a id="sthref299"></a><a id="sthref300"></a><a id="sthref301"></a></h3>
<p><span class="bolditalic">Client-side load balancing</span> is defined in your client connection definition (tnsnames.ora file, for example) by setting the <code dir="ltr"><a id="sthref302"></a>LOAD_BALANCE</code> parameter to <code dir="ltr">LOAD_BALANCE=ON</code>. When you set this parameter to <code dir="ltr">ON</code>, Oracle Database randomly selects an address in the address list, and connects to that node&#39;s listener. This balances client connections across the available SCAN listeners in the cluster.</p>
<p>The SCAN listener redirects the connection request to the local listener of the instance that is least loaded and provides the requested service. When the listener receives the connection request, the listener connects the user to an instance that the listener knows provides the requested service. To see what services a listener supports, run the <code dir="ltr">lsnrctl</code> services command.</p>
<p>When clients connect using SCAN, Oracle Net automatically load balances client connection requests across the three IP addresses you defined for the SCAN, unless you are using EZConnect.</p>
<p><span class="bolditalic">Server-side load balancing</span> When you create an Oracle RAC database with <a id="sthref303"></a>DBCA, it automatically:</p>
<ul>
<li>
<p>Configures and enables server-side load balancing</p>
</li>
<li>
<p>Sets the remote listener parameter to the SCAN listener (Note: If you do not use DBCA, you should set the <code dir="ltr"><a id="sthref304"></a>REMOTE_LISTENER</code> database parameter to scan_name:scan_port.)</p>
</li>
<li>
<p>Creates a sample client-side load balancing connection definition in the tnsnames.ora file on the server</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
The following features do not work with the default database service. You must create cluster managed services to take advantage of these features. You can only manage the services that you create. Any service created automatically by the database server is managed by the database server.</div>
<p>To further enhance connection load balancing, use the Load Balancing Advisory and define the connection load balancing for each service. Load Balancing Advisory provides information to applications about the current service levels that the database and its instances are providing. The load balancing advisory makes recommendations to applications about where to direct application requests to obtain the best service based on the policy that you have defined for that service. Load balancing advisory events are published through ONS. There are two types of service-level goals for run-time connection load balancing:</p>
<p><code dir="ltr"><a id="sthref305"></a>SERVICE_TIME</code>: Attempts to direct work requests to instances according to response time. Load balancing advisory data is based on elapsed time for work done in the service plus available bandwidth to the service. An example for the use of <code dir="ltr">SERVICE_TIME</code> is for workloads such as internet shopping where the rate of demand changes. The following example shows how to set the goal to <code dir="ltr">SERVICE_TIME</code> for connections using the online service:</p>
<pre dir="ltr">srvctl modify service -d <span class="codeinlineitalic">db_unique_name</span> -s online -B SERVICE_TIME -j SHORT
</pre>
<p><code dir="ltr"><a id="sthref306"></a>THROUGHPUT</code>: Attempts to direct work requests according to throughput. The load balancing advisory is based on the rate that work is completed in the service plus available bandwidth to the service. An example for the use of <code dir="ltr">THROUGHPUT</code> is for workloads such as batch processes, where the next job starts when the last job completes. The following example shows how to set the goal to <code dir="ltr">THROUGHPUT</code> for connections using the <code dir="ltr">sjob</code> service:</p>
<pre dir="ltr">srvctl modify service -d <span class="codeinlineitalic">db_unique_name</span> -s sjob -B THROUGHPUT -j LONG
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink RACAD7122" href="../RACAD/GUID-095B67FB-3E3A-44BE-84A4-321174015A08.htm#RACAD7122"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about Connection Load Balancing and Load Balancing Advisory</p>
</li>
<li>
<p><a class="olink RACAD7302" href="../RACAD/GUID-26E66434-7A68-4B63-B759-3E0A8CA14A8B.htm#RACAD7302"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for information about Configuring Your Environment to Use the Load Balancing Advisory</p>
</li>
<li>
<p><a class="olink NETAG010" href="../NETAG/listenercfg.htm#NETAG010"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for more information about configuring listeners</p>
</li>
<li>
<p><a class="olink REFRN10082" href="../REFRN/GUID-70F5D04D-02A3-4E89-8A3F-9410B6861BC4.htm#REFRN10082"><span class="italic">Oracle Database Reference</span></a> for more information about the <a class="olink REFRN10082" href="../REFRN/GUID-70F5D04D-02A3-4E89-8A3F-9410B6861BC4.htm#REFRN10082"><code dir="ltr">LOCAL_LISTENER</code></a> and <a class="olink REFRN10183" href="../REFRN/GUID-FEE2E8B5-CE02-4158-A6B4-030E59316756.htm#REFRN10183"><code dir="ltr">REMOTE_LISTENER</code></a> parameters</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CEGJFFDG"></a>
<div id="HABPT4861" class="sect2">
<h3 class="sect2"><span class="secnum">5.2.7</span> Mirror Oracle Cluster Registry (OCR) and Configure Multiple Voting Disks with Oracle ASM</h3>
<p>Configure Oracle Cluster Registry (OCR) and voting files to use Oracle ASM. It is recommended to mirror OCR and configure multiple voting disks using an Oracle ASM high redundancy disk group when available.</p>
<p>The Oracle Cluster Registry (OCR) contains important configuration data about cluster resources. Always protect the OCR by using Oracle ASM redundant disk groups for example. Oracle Clusterware uses the Oracle Cluster Registry (OCR) to store and manage information about the components that Oracle Clusterware controls, such as Oracle RAC databases, listeners, virtual IP addresses (VIPs), and services and any applications. To ensure cluster high availability when using a shared cluster file system, as opposed to when using Oracle ASM, Oracle recommends that you define multiple OCR locations.</p>
<p>In addition:</p>
<ul>
<li>
<p>You can have up to five OCR locations</p>
</li>
<li>
<p>Each OCR location must reside on shared storage that is accessible by all of the nodes in the cluster</p>
</li>
<li>
<p>You can replace a failed OCR location online if it is not the only OCR location</p>
</li>
<li>
<p>You must update OCR through supported utilities such as Oracle Enterprise Manager, the Server Control Utility (SRVCTL), the OCR configuration utility (OCRCONFIG), or the Database Configuration Assistant (DBCA)</p>
</li>
</ul>
<p><a id="sthref307"></a><a id="sthref308"></a>Each OCR location must reside on shared storage that is accessible by all of the nodes in the cluster and the voting disk also must reside on shared storage. For high availability, Oracle recommends that you have multiple voting disks on multiple storage devices across different controllers, where possible. Oracle Clusterware enables multiple voting disks, but you must have an odd number of voting disks, such as three, five, and so on. If you define a single voting disk, then you should use external redundant storage to provide redundancy.</p>
<p>Extended Oracle RAC requires a quorum (voting) disk that should be on an arbiter site at a location different from the main sites (data centers). For more information, see <a href="config_rac.htm#BHCFDJCG">Section 6.3.2, &#34;Add a Third Voting Disk to Host the Quorum Disk&#34;</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CWADD90964" href="../CWADD/GUID-BFBBF4EC-5227-4413-98E0-93B62AA44034.htm#CWADD90964"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about Adding, Replacing, Repairing, and Removing Oracle Cluster Registry Locations</p>
</li>
<li>
<p><a class="olink TDPRC221" href="../TDPRC/adminoc.htm#TDPRC221"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> for more information about managing OCR and voting disks</p>
</li>
<li>
<p><a class="olink CWADD90952" href="../CWADD/GUID-46D25024-1CEF-45CC-9C5F-04B0D9416C40.htm#CWADD90952"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about voting disks and oracle cluster registry requirements</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CEGHJBDJ"></a>
<div id="HABPT5278" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">5.2.8</span> Use Company Wide Cluster Time Management</h3>
<p><a id="sthref309"></a><a id="sthref310"></a><a id="sthref311"></a><a id="sthref312"></a><a id="sthref313"></a>The Cluster Time Synchronization Service (CTSS) is installed as part of Oracle Clusterware. By default the CTSS runs in observer mode if it detects a time synchronization service or a time synchronization service configuration, valid or broken, on the system. If CTSS detects that there is no time synchronization service or time synchronization service configuration on any node in the cluster, then CTSS goes into active mode and takes over time management for the cluster.</p>
<p>The Network Time Protocol (NTP) is a protocol that client and server applications use to maintain correct time settings on client machines. Each database server running Oracle Clusterware is an NPT client and must have NTP client software installed and configured to synchronize its clock to the network time server. The Windows Time service is not an exact implementation of the NTP, but it is based on the NTP specifications.</p>
<p>As a best practice use company-wide NTP.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink TDPRC140" href="../TDPRC/preparing.htm#TDPRC140"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> for information About Setting the Time on All Nodes</p>
</li>
<li>
<p><a class="olink CWADD91999" href="../CWADD/GUID-D0A855FE-875C-4599-B81D-DC32CA1FC8E9.htm#CWADD91999"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about Cluster Time Synchronization Service (CTSS) and Cluster Time Management</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CEGFJBDI"></a>
<div id="HABPT4863" class="sect2">
<h3 class="sect2"><span class="secnum">5.2.9</span> Verify That Oracle Clusterware, Oracle RAC, and Oracle ASM Use the Same Interconnect Network</h3>
<p><a id="sthref314"></a><a id="sthref315"></a>For <a id="sthref316"></a><a id="sthref317"></a><a id="sthref318"></a><a id="sthref319"></a>efficient network detection and failover and optimal performance, Oracle Clusterware, Oracle RAC, and Oracle ASM should use the same dedicated interconnect subnet so that they share the same view of connections and accessibility.</p>
<p>Perform the following steps to verify the interconnect settings:</p>
<ol>
<li>
<p>To verify the interconnect settings for an Oracle RAC or Oracle ASM instance, do either of the following:</p>
<ul>
<li>
<p>Issue the command:</p>
<pre dir="ltr">SQL&gt; select * from v$cluster_interconnects;
 
NAME   IP_ADDRESS      IS_PUBLIC    SOURCE
-----  ----------      ---------    -------
bond0  192.168.32.87   NO           cluster_interconnects parameter

</pre></li>
<li>
<p>Consult the alert log to verify the interconnect settings for the instance.</p>
</li>
</ul>
</li>
<li>
<p>To verify the interconnect subnet used by the clusterware:</p>
<pre dir="ltr">prompt&gt; $GI_HOME/bin/oifcfg getif | grep cluster_interconnect

bond0 192.168.32.0 global cluster_interconnect
</pre></li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
Multiple interconnects can be specified for one instance. It is a best practice to use network bonding for redundancy to ensure high availability.</div>
<div class="infoboxnotealso">
<p class="notep1">See:</p>
<a class="olink ADMIN11267" href="../ADMIN/diag.htm#ADMIN11267"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for information about Viewing the Alert Log</div>
</div>
<!-- class="sect2" -->
<a id="CEGIHIJC"></a>
<div id="HABPT5279" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">5.2.10</span> Use Redundant Interconnect with Highly Available IP (HAIP)</h3>
<p>You can define multiple interfaces for Redundant Interconnect usage by classifying the interfaces as private either during installation or after installation using the <code dir="ltr">oifcfg</code> <code dir="ltr">setif</code> command. When you do, Oracle Clusterware creates from one to four (depending on the number of interfaces you define) highly available IP (HAIP) addresses, which Oracle Database and Oracle ASM instances use to ensure highly available and load balanced communications. With HAIP, by default, interconnect traffic is load balanced across all active interconnect interfaces, and corresponding HAIP address are failed over transparently to other adapters if one fails or becomes non-communicative. Oracle Clusterware automatically picks free link local addresses from reserved 169.254.*.* subnet for HAIP.</p>
<p>The Oracle software (including Oracle RAC, Oracle ASM, and Oracle ACFS, all Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.2), or later), by default, uses these HAIP addresses for all of its traffic allowing for load balancing across the provided set of cluster interconnect interfaces. If a defined cluster interconnect interface fails or becomes non-communicative, then Oracle Clusterware transparently moves the corresponding HAIP address to a remaining functional interface.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle Databases releases before Oracle Database 11<span class="italic">g</span> release 2 cannot use the Redundant Interconnect Usage feature and must use Operating System based interface bonding technologies instead.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CWADD92358" href="../CWADD/GUID-478452E9-5A0B-4B36-BF82-CDF585007D14.htm#CWADD92358"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about Redundant Interconnect Usage with HAIP</p>
</li>
<li>
<p><a class="olink CWGEN" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=CWGEN"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for your platform for information about defining interfaces</p>
</li>
<li>
<p>For more information, see &#34;Grid Infrastructure Redundant Interconnect and ora.cluster_interconnect.haip&#34; in My Oracle Support Note 1210883.1 at</p>
<p><code dir="ltr"><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1210883.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1210883.1</a></code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CEGGAFEG"></a>
<div id="HABPT5280" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">5.2.11</span> Configure Failure Isolation with Intelligent Management Platform Interface (IPMI)</h3>
<p>Failure isolation is a process by which a failed node is isolated from the rest of the cluster to prevent the failed node from corrupting data. The ideal fencing involves an external mechanism capable of taking a node out of the cluster without cooperation either from Oracle Clusterware or from the operating system running on that node. To provide this capability, Oracle Clusterware 11<span class="italic">g</span> Release 2 (11.2) and later supports the Intelligent Management Platform Interface specification (IPMI), an industry-standard management protocol.</p>
<p>Typically, you configure failure isolation using IPMI during Grid Infrastructure installation, when you are provided with the option of configuring IPMI from the Failure Isolation Support screen. If you do not configure IPMI during installation, then you can configure it after installation using the Oracle Clusterware Control utility (<code dir="ltr">CRSCTL</code>).</p>
<div class="infoboxnotealso">
<p class="notep1">See:</p>
<a class="olink CWADD92099" href="../CWADD/GUID-0FA4A79F-B673-4232-863B-328D0E2302B1.htm#CWADD92099"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about IPMI and for information about Configuring IPMI for Failure Isolation</div>
</div>
<!-- class="sect2" -->
<a id="CHDGHJFE"></a>
<div id="HABPT5363" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">5.2.12</span> Use Jumbo Frames for Cluster Interconnect Network</h3>
<p>Ethernet is a widely used networking technology for Cluster Interconnects. Ethernet&#39;s variable frame size of 46-1500 bytes is the transfer unit between the all Ethernet participants, such as the hosts and switches. The upper bound, in this case 1500, is called MTU (Maximum Transmission Unit). When an application sends a message greater than 1500 bytes (MTU), it is fragmented into 1500 byte, or smaller, frames from one end-point to another. In Oracle RAC, the setting of DB_BLOCK_SIZE multiplied by the MULTI_BLOCK_READ_COUNT determines the maximum size of a message for the Global Cache and the PARALLEL_EXECUTION_MESSAGE_SIZE determines the maximum size of a message used in Parallel Query. These message sizes can range from 2K to 64K or more, and hence will get fragmented more so with a lower/default MTU.</p>
<p>Jumbo Frames introduces the ability for an Ethernet frame to exceed its IEEE 802 specified Maximum Transfer Unit of 1500 bytes up to a maximum of 9000 bytes.</p>
<p>note: Jumbo Frames can be implemented for private Cluster Interconnects, and requires careful configuration and testing to realize its benefits also Oracle Engineered Systems may already have an optimal setting pre-configured.</p>
<p>Consider using InfiniBand on the interconnect for workloads that have high volume requirements. InfiniBand can also improve performance by lowering latency. When InfiniBand is in place the RDS protocol can be used to further reduce latency.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGBHEDJ"></a>
<div id="HABPT5253" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">5.3</span> Oracle Clusterware Operational Best Practices</h2>
<p><a id="sthref320"></a>Operational best practices for Oracle Clusterware include:</p>
<ul>
<li>
<p><a href="#CEGIHDHD">Capacity Planning</a></p>
</li>
<li>
<p><a href="#CEGDFEGD">Regularly Back Up OCR to Tape or Offsite</a></p>
</li>
<li>
<p><a href="#CHDBIFED">Use Cluster Health Monitor for Troubleshooting</a></p>
</li>
</ul>
<a id="CEGIHDHD"></a>
<div id="HABPT4852" class="sect2">
<h3 class="sect2"><span class="secnum">5.3.1</span> Capacity Planning<a id="sthref321"></a><a id="sthref322"></a></h3>
<p>Proper capacity planning is a critical success factor for all aspects of Oracle clustering technology, but it is of particular importance for planned maintenance. You must ensure that the work a cluster is responsible for can be done when a small part of the cluster, for example, a node, is unavailable. If the cluster cannot keep up after a planned or unplanned outage, the potential for cascading problems is higher due to system resource starvation.</p>
<p>When sizing your cluster, ensure that <span class="italic">n</span> percentage of the cluster can meet your service levels where <span class="italic">n</span> percentage represents the amount of computing resource left over after a typical planned or unplanned outage. For example, if you have a four-node cluster and you want to apply patches in a rolling fashion&mdash;meaning one node is upgraded at a time&mdash;then three nodes can run the work requested by the application.</p>
<p>One other aspect to capacity planning that is important during planned maintenance is ensuring that any work being done as part of the planned maintenance is separated from the application work when possible. For example, if a patch requires that a SQL script is run after all nodes have been patched, it is a best-practice to run this script on the last node receiving the patch before allowing the application to start using that node. This technique ensures that the SQL script has full use of the operating system resources on the node and it is less likely to affect the application. For example, the <code dir="ltr">CATCPU.SQL</code> script that must be run after installing the CPU patch on all nodes.</p>
</div>
<!-- class="sect2" -->
<a id="CEGDFEGD"></a>
<div id="HABPT4862" class="sect2">
<h3 class="sect2"><span class="secnum">5.3.2</span> Regularly Back Up <a id="sthref323"></a>OCR to Tape or Offsite</h3>
<p>Oracle Clusterware automatically creates Oracle Cluster Registry (OCR) backups every four hours on one node in the cluster, which is the OCR master node. Oracle always retains the last three backup copies of OCR. The <a id="sthref324"></a><a id="sthref325"></a><code dir="ltr">CRSD</code> process that creates the backups also creates and retains an OCR backup for each full day and after each week. You should use <a id="sthref326"></a>Oracle Secure Backup, or standard operating-system tools, or third-party tools to back up the backup files created by Oracle Clusterware as part of the operating system backup.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The default location for generating OCR backups on UNIX-based systems is <code dir="ltr">CRS_HOME/cdata/</code><code dir="ltr"><span class="codeinlineitalic">cluster_name</span></code> where <code dir="ltr"><span class="codeinlineitalic">cluster_name</span></code> is the name of your cluster. The Windows-based default location for generating backups uses the same path structure. Backups are taken on the OCR master node. To list the node and location of the backup, issue the <a id="sthref327"></a><code dir="ltr">ocrconfig -showbackup</code> command.</div>
<p>In addition to using the automatically created OCR backup files, you can use the <code dir="ltr">-manualbackup</code> option on the <code dir="ltr">ocrconfig</code> command to perform a manual backup, on demand. For example, you can perform a manual backup before and after you make changes to the OCR such as adding or deleting nodes from your environment, modifying Oracle Clusterware resources, or creating a database. The <code dir="ltr">ocrconfig -manualbackup</code> command exports the OCR content to a file format. You can then backup the export files created by <code dir="ltr">ocrconfig</code> as a part of the operating system backup using Oracle Secure backup, standard operating-system tools, or third-party tools.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD838" href="../CWADD/GUID-4F3C2848-CBB7-4CC5-8480-ACA3152B1EA6.htm#CWADD838"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about backing up the OCR</div>
</div>
<!-- class="sect2" -->
<a id="CHDBIFED"></a>
<div id="HABPT5364" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">5.3.3</span> Use Cluster Health Monitor for Troubleshooting</h3>
<p>Cluster Health Monitor (CHM) designed to detect and analyze operating system (OS) and cluster resource related degradation and failures in order to bring more explanatory power to many issues that occur in clusters where Oracle Clusterware and Oracle RAC are running such as node eviction. It continuously tracks the OS resource consumption at each node, process, and device level. It collects and analyzes this cluster-wide data. In real time mode, when thresholds are hit, an alert is shown to the operator. For root cause analysis, historical data can be replayed to understand what was happening at the time of failure.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2579">
<tr>
<td class="cellalignment2586">
<table class="cellalignment2584">
<tr>
<td class="cellalignment2583"><a href="config_db.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2583"><a href="config_rac.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2005, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2588">
<table class="cellalignment2582">
<tr>
<td class="cellalignment2583"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2583"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2583"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2583"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2583"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2583"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>