<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-73859"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/How%20to%20Complete%20Preinstallation%20Tasks%20Manually"></a><title>How to Complete Preinstallation Tasks Manually</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-05T7:43:49Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Installation Guide"/>
<meta name="dcterms.identifier" content="E41491-20"/>
<meta name="dcterms.isVersionOf" content="LADBI"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2012, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="app_nas.htm" title="Previous" type="text/html"/>
<link rel="Next" href="app_network.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41491-20.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">18/26</span> <!-- End Header -->
<div id="LADBI7864" class="appendix"><a id="CIHJGCAB"></a>
<h1 class="appendix"><span class="secnum">D</span> How to Complete Preinstallation Tasks Manually</h1>
<p>This appendix provides instructions for how to complete configuration tasks manually that Cluster Verification Utility (CVU) and Oracle Universal Installer normally complete during installation. Use this appendix as a guide if you cannot use the fixup script.</p>
<p>This appendix contains the following information:</p>
<ul>
<li>
<p><a href="#CIHGDACA">Configuring Kernel Parameters for Linux</a></p>
</li>
<li>
<p><a href="#CIHBJEIH">Setting UDP and TCP Kernel Parameters Manually</a></p>
</li>
<li>
<p><a href="#CIHGDCCG">Configuring Storage Paths and Disk Devices</a></p>
</li>
</ul>
<a id="CIHGDACA"></a>
<div id="LADBI7865" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">D.1</span> Configuring Kernel Parameters<a id="sthref792"></a><a id="sthref793"></a><a id="sthref794"></a> for Linux</h2>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CIHGBDHC">Minimum Parameter Settings for Installation</a></p>
</li>
<li>
<p><a href="#CIHGEEID">Displaying and Changing Kernel Parameter Values</a></p>
</li>
<li>
<p><a href="#CIHEIHFI">Additional Parameter and Kernel Settings for SUSE Linux</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Unless otherwise specified, the kernel parameter and shell limit values shown in the following table are minimum values only. For production database systems, Oracle recommends that you tune these values to optimize the performance of the system. See the operating system documentation for more information about tuning kernel parameters.</div>
<a id="CIHGBDHC"></a>
<div id="LADBI7866" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">D.1.1</span> Minimum Parameter Settings for Installation</h3>
<p>During the Oracle Database installation, you can generate and run the fixup script to check and set the kernel parameter values required for successful installation of the database. This script updates required kernel parameters, if necessary, to minimum values.</p>
<p>If you cannot use the fixup script, then review the following table to set the values manually:</p>
<div class="inftblhruleinformal">
<table class="cellalignment2177" title="Recommended Values for Kernel Parameters on Linux" summary="This table shows the recommended values for kernel parameters on Linux" dir="ltr">
<thead>
<tr class="cellalignment2168">
<th class="cellalignment2178" id="r1c1-t3">Parameter</th>
<th class="cellalignment2178" id="r1c2-t3">Value</th>
<th class="cellalignment2178" id="r1c3-t3">File<a id="sthref795"></a><a id="sthref796"></a><a id="sthref797"></a><a id="sthref798"></a><a id="sthref799"></a><a id="sthref800"></a></th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r2c1-t3" headers="r1c1-t3"><a id="sthref801"></a><code dir="ltr">semmsl</code>
<p><a id="sthref802"></a><code dir="ltr">semmns</code></p>
<p><a id="sthref803"></a><code dir="ltr">semopm</code></p>
<p><a id="sthref804"></a><code dir="ltr">semmni</code></p>
</td>
<td class="cellalignment2174" headers="r2c1-t3 r1c2-t3">250
<p>32000</p>
<p>100</p>
<p>128</p>
</td>
<td class="cellalignment2174" headers="r2c1-t3 r1c3-t3"><code dir="ltr"><a id="sthref805"></a>/proc/sys/kernel/sem<a id="sthref806"></a><a id="sthref807"></a></code></td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r3c1-t3" headers="r1c1-t3"><a id="sthref808"></a><code dir="ltr">shmall</code></td>
<td class="cellalignment2174" headers="r3c1-t3 r1c2-t3">40 percent of the size of physical memory in pages
<p><span class="bold">Note:</span> If the server supports multiple databases, or uses a large SGA, then set this parameter to a value that is equal to the total amount of shared memory, in 4K pages, that the system can use at one time.</p>
</td>
<td class="cellalignment2174" headers="r3c1-t3 r1c3-t3"><code dir="ltr"><a id="sthref809"></a>/proc/sys/kernel/shmall<a id="sthref810"></a><a id="sthref811"></a></code></td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r4c1-t3" headers="r1c1-t3"><a id="sthref812"></a><code dir="ltr">shmmax</code></td>
<td class="cellalignment2174" headers="r4c1-t3 r1c2-t3">Half the size of physical memory in bytes
<p>See My Oracle Support Note 567506.1 for additional information about configuring <code dir="ltr">shmmax</code>.</p>
</td>
<td class="cellalignment2174" headers="r4c1-t3 r1c3-t3"><code dir="ltr">/proc/sys/kernel/shmmax</code></td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r5c1-t3" headers="r1c1-t3"><a id="sthref813"></a><code dir="ltr">shmmni</code></td>
<td class="cellalignment2174" headers="r5c1-t3 r1c2-t3">4096</td>
<td class="cellalignment2174" headers="r5c1-t3 r1c3-t3"><code dir="ltr"><a id="sthref814"></a>/proc/sys/kernel/<a id="sthref815"></a>shmmni</code></td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r6c1-t3" headers="r1c1-t3"><code dir="ltr">p<a id="sthref816"></a>anic_on_oops</code></td>
<td class="cellalignment2174" headers="r6c1-t3 r1c2-t3">1</td>
<td class="cellalignment2174" headers="r6c1-t3 r1c3-t3"><code dir="ltr"><a id="sthref817"></a>/proc/sys/kernel/<a id="sthref818"></a>panic_on_oops</code></td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r7c1-t3" headers="r1c1-t3"><a id="sthref819"></a><code dir="ltr">file</code>-<code dir="ltr">max</code></td>
<td class="cellalignment2174" headers="r7c1-t3 r1c2-t3">6815744</td>
<td class="cellalignment2174" headers="r7c1-t3 r1c3-t3"><code dir="ltr"><a id="sthref820"></a>/proc/sys/fs/<a id="sthref821"></a>file-max</code></td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r8c1-t3" headers="r1c1-t3"><code dir="ltr">aio-max-nr</code></td>
<td class="cellalignment2174" headers="r8c1-t3 r1c2-t3">1048576
<p><span class="bold">Note</span>: This value limits concurrent outstanding requests and should be set to avoid I/O subsystem failures.</p>
</td>
<td class="cellalignment2174" headers="r8c1-t3 r1c3-t3"><code dir="ltr">/proc/sys/fs/aio-max-nr<a id="sthref822"></a></code></td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r9c1-t3" headers="r1c1-t3"><a id="sthref823"></a><code dir="ltr">ip_local_port_range</code></td>
<td class="cellalignment2174" headers="r9c1-t3 r1c2-t3"><span class="bold">Minimum</span>: 9000
<p><span class="bold">Maximum</span>: 65500</p>
<p>See <a href="#CIHBJEIH">Setting UDP and TCP Kernel Parameters Manually</a></p>
</td>
<td class="cellalignment2174" headers="r9c1-t3 r1c3-t3"><code dir="ltr"><a id="sthref824"></a>/proc/sys/net/ipv4/<a id="sthref825"></a>ip_local_port_range</code></td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r10c1-t3" headers="r1c1-t3"><a id="sthref826"></a><code dir="ltr">rmem_default</code></td>
<td class="cellalignment2174" headers="r10c1-t3 r1c2-t3">262144</td>
<td class="cellalignment2174" headers="r10c1-t3 r1c3-t3"><code dir="ltr"><a id="sthref827"></a>/proc/sys/net/core/<a id="sthref828"></a>rmem_default</code></td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r11c1-t3" headers="r1c1-t3"><a id="sthref829"></a><code dir="ltr">rmem_max</code></td>
<td class="cellalignment2174" headers="r11c1-t3 r1c2-t3">4194304</td>
<td class="cellalignment2174" headers="r11c1-t3 r1c3-t3"><code dir="ltr"><a id="sthref830"></a>/proc/sys/net/core/<a id="sthref831"></a>rmem_max</code></td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r12c1-t3" headers="r1c1-t3"><a id="sthref832"></a><code dir="ltr">wmem_default</code></td>
<td class="cellalignment2174" headers="r12c1-t3 r1c2-t3">262144</td>
<td class="cellalignment2174" headers="r12c1-t3 r1c3-t3"><code dir="ltr"><a id="sthref833"></a>/proc/sys/net/core/<a id="sthref834"></a>wmem_default</code></td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r13c1-t3" headers="r1c1-t3"><a id="sthref835"></a><code dir="ltr">wmem_max</code></td>
<td class="cellalignment2174" headers="r13c1-t3 r1c2-t3">1048576</td>
<td class="cellalignment2174" headers="r13c1-t3 r1c3-t3"><code dir="ltr"><a id="sthref836"></a>/proc/sys/net/core/<a id="sthref837"></a>wmem_max</code></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
If the current value for any parameter is greater than the value listed in this table, then the Fixup scripts do not change the value of that parameter.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="post_inst_task.htm#BJFFJDCI">&#34;Guidelines for Setting Semaphore Parameters&#34;</a></p>
</li>
<li>
<p><a href="pre_install.htm#BABGICDD">&#34;Using Installation Fixup Scripts&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CIHGEEID"></a>
<div id="LADBI7867" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">D.1.2</span> Displaying and Changing Kernel Parameter Values</h3>
<p>Enter the commands shown in the following table to display the current values of the kernel parameters. Note these values and identify any values that you must change:<a id="sthref838"></a><a id="sthref839"></a></p>
<div class="inftblinformal">
<table class="cellalignment2177" title="tbl" summary="tbl" dir="ltr">
<thead>
<tr class="cellalignment2168">
<th class="cellalignment2178" id="r1c1-t6">Parameter</th>
<th class="cellalignment2178" id="r1c2-t6">Command</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r2c1-t6" headers="r1c1-t6"><code dir="ltr">semmsl, semmns, semopm, and semmni</code></td>
<td class="cellalignment2174" headers="r2c1-t6 r1c2-t6"><code dir="ltr"># /sbin/sysctl -a | grep sem</code>
<p>This command displays the value of the semaphore parameters in the order listed.</p>
</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r3c1-t6" headers="r1c1-t6"><code dir="ltr">shmall, shmmax, and shmmni</code></td>
<td class="cellalignment2174" headers="r3c1-t6 r1c2-t6"><code dir="ltr"># /sbin/sysctl -a | grep shm</code>
<p>This command displays the details of the shared memory segment sizes.</p>
</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r4c1-t6" headers="r1c1-t6"><code dir="ltr">file</code>-<code dir="ltr">max</code></td>
<td class="cellalignment2174" headers="r4c1-t6 r1c2-t6"><code dir="ltr"># /sbin/sysctl -a | grep file-max</code>
<p>This command displays the maximum number of file handles.</p>
</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r5c1-t6" headers="r1c1-t6">i<code dir="ltr">p_local_port_range</code></td>
<td class="cellalignment2174" headers="r5c1-t6 r1c2-t6"><code dir="ltr"># /sbin/sysctl -a | grep ip_local_port_range</code>
<p>This command displays a range of port numbers.</p>
</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r6c1-t6" headers="r1c1-t6"><code dir="ltr">rmem_default</code></td>
<td class="cellalignment2174" headers="r6c1-t6 r1c2-t6"><code dir="ltr"># /sbin/sysctl -a | grep rmem_default</code></td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r7c1-t6" headers="r1c1-t6"><code dir="ltr">rmem_max</code></td>
<td class="cellalignment2174" headers="r7c1-t6 r1c2-t6"><code dir="ltr"># /sbin/sysctl -a | grep rmem_max</code></td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r8c1-t6" headers="r1c1-t6"><code dir="ltr">wmem_default</code></td>
<td class="cellalignment2174" headers="r8c1-t6 r1c2-t6"><code dir="ltr"># /sbin/sysctl -a | grep wmem_default</code></td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r9c1-t6" headers="r1c1-t6"><code dir="ltr">wmem_max</code></td>
<td class="cellalignment2174" headers="r9c1-t6 r1c2-t6"><code dir="ltr"># /sbin/sysctl -a | grep wmem_max</code></td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r10c1-t6" headers="r1c1-t6"><code dir="ltr">aio-max-nr</code></td>
<td class="cellalignment2174" headers="r10c1-t6 r1c2-t6"><code dir="ltr"># /sbin/sysctl -a | grep aio-max-nr</code></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" -->
<p>If the value of any kernel parameter is different from the minimum value, then perform the following:<a id="sthref840"></a></p>
<ol>
<li>
<p><a id="sthref841"></a><a id="sthref842"></a><a id="sthref843"></a>Using any text editor, create or edit the <code dir="ltr">/etc/sysctl.conf</code> file, and add or edit lines similar to the following. For example:</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Include lines only for the kernel parameter values to change. For the semaphore parameters (<code dir="ltr">kernel.sem</code>), you must specify all four values. If any of the current values are larger than the minimum value, then specify the larger value.</div>
<pre dir="ltr">fs.aio-max-nr = 1048576
fs.file-max = 6815744
kernel.shmall = 2097152
kernel.shmmax = 4294967295
kernel.shmmni = 4096
kernel.sem = 250 32000 100 128
net.ipv4.ip_local_port_range = 9000 65500
net.core.rmem_default = 262144
net.core.rmem_max = 4194304
net.core.wmem_default = 262144
net.core.wmem_max = 1048576
</pre>
<p>By specifying the values in the <code dir="ltr">/etc/sysctl.conf</code> file, they persist when you restart the system. On SUSE Linux Enterprise Server systems, enter the following command to ensure that the system reads the <code dir="ltr">/etc/sysctl.conf</code> file when it restarts:</p>
<pre dir="ltr"># /sbin/chkconfig boot.sysctl on
</pre></li>
<li>
<p>Enter the following command to change the current values of the kernel parameters:</p>
<pre dir="ltr"># /sbin/sysctl -p
</pre>
<p>Review the output from this command to verify that the values are correct. If the values are incorrect, edit the <code dir="ltr">/etc/sysctl.conf</code> file, then enter this command again.</p>
</li>
<li>
<p>Enter the command <code dir="ltr">/sbin/sysctl -a</code> to confirm that the values are set correctly.</p>
</li>
<li>
<p>After updating the values of the kernel parameters in the <code dir="ltr">/etc/sysctl.conf</code> file, either restart the computer, or run the command <code dir="ltr">sysctl -p</code> to make the changes in the <code dir="ltr">/etc/sysctl.conf</code> file available in the active kernel memory.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHEIHFI"></a>
<div id="LADBI7868" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">D.1.3</span> Additional Parameter and Kernel Settings for SUSE Linux</h3>
<p>On SUSE Linux Enterprise Server systems only, complete the following steps as needed:</p>
<ol>
<li>
<p>Enter the following command to cause the system to read the <code dir="ltr">/etc/sysctl.conf</code> file when it restarts:</p>
<pre dir="ltr"># /sbin/chkconfig boot.sysctl on
</pre></li>
<li>
<p>Enter the GID of the <code dir="ltr">oinstall</code> group as the value for the parameter <code dir="ltr">/proc/sys/vm/hugetlb_shm_group</code>. Doing this grants members of <code dir="ltr">oinstall</code> a group permission to create shared memory segments.</p>
<p>For example, where the oinstall group GID is 501:</p>
<pre dir="ltr"># echo 501 &gt; /proc/sys/vm/hugetlb_shm_group
</pre>
<p>After running this command, use <code dir="ltr">vi</code> to add the following text to <code dir="ltr">/etc/sysctl.conf</code>, and enable the <code dir="ltr">boot.sysctl</code> script to run on system restart:</p>
<pre dir="ltr">vm.hugetlb_shm_group=501
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Only one group can be defined as the <code dir="ltr">vm.hugetlb_shm_group</code>.</div>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHBJEIH"></a>
<div id="LADBI7869" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">D.2</span> Setting<a id="sthref844"></a><a id="sthref845"></a><a id="sthref846"></a><a id="sthref847"></a><a id="sthref848"></a> UDP and TCP Kernel Parameters Manually</h2>
<p>If you do not use a Fixup script or CVU to set ephemeral ports, then set TCP/IP ephemeral port range parameters to provide enough ephemeral ports for the anticipated server workload. Ensure that the lower range is set to at least 9000 or higher, to avoid Well Known ports, and to avoid ports in the Registered Ports range commonly used by Oracle and other server ports. Set the port range high enough to avoid reserved ports for any applications you may intend to use. If the lower value of the range you have is greater than 9000, and the range is large enough for your anticipated workload, then you can ignore Oracle Universal Installer warnings regarding the ephemeral port range.</p>
<p>For example, with IPv4, use the following command to check your current range for ephemeral ports:</p>
<pre dir="ltr">$ cat /proc/sys/net/ipv4/ip_local_port_range
32768 61000
</pre>
<p>In the preceding example, the lowest port (32768) and the highest port (61000) are set to the default range.</p>
<p>If necessary, update the UDP and TCP ephemeral port range to a range high enough for anticipated system workloads, and to ensure that the ephemeral port range starts at 9000 and above. For example:</p>
<pre dir="ltr"># echo 9000 65500 &gt; /proc/sys/net/ipv4/ip_local_port_range
</pre>
<p>Oracle recommends that you make these settings permanent. For example, as <code dir="ltr">root</code>, use a text editor to open <code dir="ltr">/etc/sysctl.conf</code>, and add or change to the following: <code dir="ltr">net.ipv4.ip_local_port_range = 9000 65500</code>, and then restart the network (<code dir="ltr"># /etc/rc.d/init.d/network restart</code>). Refer to your Linux distribution system administration documentation for detailed information about how to automate this ephemeral port range alteration on system restarts.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="post_inst_task.htm#BJFEBGJB">&#34;Setting TCP Network Protocol Buffer for Direct NFS Client&#34;</a> if you use Direct NFS Client</div>
</div>
<!-- class="sect1" -->
<a id="CIHGDCCG"></a>
<div id="LADBI8064" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">D.3</span> Configuring Storage Paths and Disk Devices</h2>
<p>Oracle recommends that you use Oracle ASM Filter Driver (Oracle ASMFD) to maintain device persistence. However, you can choose to use Oracle Automatic Storage Management library driver (Oracle ASMLIB) or set <code dir="ltr">udev</code> rules for device persistence.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CIHFDDGJ">Configuring Storage Device Path Persistence Using Oracle ASMLIB</a></p>
</li>
<li>
<p><a href="#CIHDEIEG">Configuring Disk Devices Manually for Oracle Automatic Storage Management</a></p>
</li>
</ul>
<a id="CIHFDDGJ"></a>
<div id="LADBI8065" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">D.3.1</span> C<a id="sthref849"></a><a id="sthref850"></a><a id="sthref851"></a>onfiguring Storage Device Path Persistence Using Oracle ASMLIB</h3>
<p>Review the following section to configure Oracle ASMLIB:</p>
<ul>
<li>
<p><a href="#CIHJAAJJ">About Oracle ASM with Oracle ASMLIB</a></p>
</li>
<li>
<p><a href="#CIHJGCDA">Configuring Oracle ASMLIB to Maintain Block Devices</a></p>
</li>
<li>
<p><a href="#CIHDFGEG">Deinstalling Oracle ASMLIB</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle ASMLIB is not supported on IBM:Linux on System z.</div>
<a id="CIHJAAJJ"></a>
<div id="LADBI8066" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">D.3.1.1</span> About Oracle ASM with Oracle ASMLIB</h4>
<p>The Oracle Automatic Storage Management library driver simplifies the configuration and management of block disk devices by eliminating the need to rebind block disk devices used with Oracle Automatic Storage Management (Oracle ASM) each time the system is restarted.</p>
<p>With Oracle ASMLIB, you define the range of disks you want to have made available as Oracle ASM disks. Oracle ASMLIB maintains permissions and disk labels that are persistent on the storage device, so that the label is available even after an operating system upgrade.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you configure disks using Oracle ASMLIB, then you must change the disk discovery string to <code dir="ltr">ORCL:*</code>. If the diskstring is set to <code dir="ltr">ORCL:*</code>, or is left empty (&#34;&#34;), then the installer discovers these disks.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
&#34;Using Oracle ASM Library Driver&#34; in <a class="olink OSTMG" href="../OSTMG/toc.htm"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a></div>
</div>
<!-- class="sect3" -->
<a id="CIHJGCDA"></a>
<div id="LADBI8067" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">D.3.1.2</span> C<a id="sthref852"></a>onfiguring Oracle ASMLIB to Maintain Block Devices</h4>
<p>To use Oracle ASMLIB to configure Oracle ASM devices, complete the following tasks:</p>
<ul>
<li>
<p><a href="#CIHGABIB">Installing and Configuring Oracle ASMLIB Software</a></p>
</li>
<li>
<p><a href="#CIHJDCBF">Configuring Disk Devices to Use Oracle ASMLIB</a></p>
</li>
<li>
<p><a href="#CIHJACBC">Administering Oracle ASMLIB and Disks</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
To create a database during the installation using the Oracle ASM library driver, you must choose an installation method that runs ASMCA in interactive mode. You must also change the disk discovery string to <code dir="ltr">ORCL:*</code>.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="inst_task.htm#BABDFJCC">&#34;Using an Existing Oracle Automatic Storage Management Disk Group&#34;</a></div>
<a id="CIHGABIB"></a>
<div id="LADBI8068" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4"><span class="secnum">D.3.1.2.1</span> Installing and Configuring Oracle ASMLIB Software</h5>
<p>Oracle ASMLIB is included with the Oracle Linux packages, and with SUSE Linux Enterprise Server 11. If you are a member of the Unbreakable Linux Network, then you can install the Oracle ASMLIB RPMs by subscribing to the Oracle Linux channel, and using <code dir="ltr">yum</code> to retrieve the most current package for your system and kernel. For additional information, see the following URL:</p>
<p><code dir="ltr"><a href="http://www.oracle.com/technetwork/topics/linux/asmlib/index-101839.html">http://www.oracle.com/technetwork/topics/linux/asmlib/index-101839.html</a><a href=""></a></code></p>
<p>To install and configure the Oracle Automatic Storage Management library driver software manually, perform the following steps:</p>
<ol>
<li>
<p>Enter the following command to determine the kernel version and architecture of the system:</p>
<pre dir="ltr"># uname -rm
</pre></li>
<li>
<p>If necessary, download the required Oracle Automatic Storage Management library driver packages from the Oracle Technology Network website:</p>
<p><code dir="ltr"><a href="http://www.oracle.com/technetwork/server-storage/linux/downloads/index-088143.html">http://www.oracle.com/technetwork/server-storage/linux/downloads/index-088143.html</a><a href=""></a></code></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must install <code dir="ltr">oracleasm-support</code> package version 2.0.1 or later to use Oracle ASMLIB on Red Hat Enterprise Linux 5 Advanced Server. Oracle ASMLIB is already included with SUSE Linux Enterprise Server distributions.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
My Oracle Support note 1089399.1 for information about Oracle ASMLIB support with Red Hat distributions:
<p><code dir="ltr"><a href="https://support.oracle.com/CSP/main/article?cmd=show/&amp;type=NOT/&amp;id=1089399.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1089399.1</a><a href=""></a></code></p>
</div>
</li>
<li>
<p>Switch to the <code dir="ltr">root</code> user:</p>
<pre dir="ltr">$ su -
</pre></li>
<li>
<p>Install the following packages in sequence, where <code dir="ltr"><span class="codeinlineitalic">version</span></code> is the version of the Oracle Automatic Storage Management library driver, <code dir="ltr"><span class="codeinlineitalic">arch</span></code> is the system architecture, and <code dir="ltr"><span class="codeinlineitalic">kernel</span></code> is the version of the kernel that you are using:</p>
<pre dir="ltr">oracleasm-support-<span class="italic">version</span>.<span class="italic">arch</span>.rpm
oracleasm-<span class="italic">kernel</span>-<span class="italic">version</span>.<span class="italic">arch</span>.rpm
oracleasmlib-<span class="italic">version</span>.<span class="italic">arch</span>.rpm
</pre>
<p>Enter a command similar to the following to install the packages:</p>
<pre dir="ltr"># rpm -ivh oracleasm-support-<span class="italic">version</span>.<span class="italic">arch</span>.rpm \
           oracleasm-<span class="italic">kernel</span>-<span class="italic">version</span>.<span class="italic">arch</span>.rpm \
           oracleasmlib-<span class="italic">version</span>.<span class="italic">arch</span>.rpm
</pre>
<p>For example, if you are using the Red Hat Enterprise Linux 5 AS kernel on an AMD64 system, then enter a command similar to the following:</p>
<pre dir="ltr"># rpm -ivh oracleasm-support-2.1.3-1.el5.x86_64.rpm \
           oracleasm-2.6.18-194.26.1.el5xen-2.0.5-1.el5.x86_64.rpm \
           oracleasmlib-2.0.4-1.el5.x86_64.rpm
</pre></li>
<li>
<p>Enter the following command to run the <code dir="ltr">oracleasm</code> initialization script with the <code dir="ltr">configure</code> option:</p>
<pre dir="ltr"># /usr/sbin/oracleasm configure -i
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The oracleasm command in <code dir="ltr">/usr/sbin</code> is the command you should use. The <code dir="ltr">/etc/init.d</code> path is not deprecated, but the <code dir="ltr">oracleasm</code> binary in that path is now used typically for internal commands.</div>
</li>
<li>
<p>Enter the following information in response to the prompts that the script displays:</p>
<div class="inftblinformal">
<table class="cellalignment2177" title="Initialization Script Prompts" summary="This table lists the inititialization script prompts and the suggested responses." dir="ltr">
<thead>
<tr class="cellalignment2168">
<th class="cellalignment2178" id="r1c1-t18">Prompt</th>
<th class="cellalignment2178" id="r1c2-t18">Suggested Response</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r2c1-t18" headers="r1c1-t18">Default user to own the driver interface:</td>
<td class="cellalignment2174" headers="r2c1-t18 r1c2-t18"><span class="bold">Standard groups and users configuration</span>: Specify the Oracle software owner user (for example, <code dir="ltr">oracle</code>)
<p><span class="bold">Job role separation groups and users configuration:</span> Specify the Grid Infrastructure software owner (for example, <code dir="ltr">grid</code>)</p>
</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r3c1-t18" headers="r1c1-t18">Default group to own the driver interface:</td>
<td class="cellalignment2174" headers="r3c1-t18 r1c2-t18"><span class="bold">Standard groups and users configuration</span>: Specify the OSDBA group for the database (for example, <code dir="ltr">dba</code>).
<p><span class="bold">Job role separation groups and users configuration:</span> Specify the OSASM group for storage administration (for example, <code dir="ltr">asmadmin</code>).</p>
</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r4c1-t18" headers="r1c1-t18">Start Oracle ASM Library driver on boot (y/n):</td>
<td class="cellalignment2174" headers="r4c1-t18 r1c2-t18">Enter <code dir="ltr">y</code> to start the Oracle Automatic Storage Management library driver when the system starts.</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r5c1-t18" headers="r1c1-t18">Scan for Oracle ASM disks on boot (y/n)</td>
<td class="cellalignment2174" headers="r5c1-t18 r1c2-t18">Enter <code dir="ltr">y</code> to scan for Oracle ASM disks when the system starts.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" -->
<p>The script completes the following tasks:</p>
<ul>
<li>
<p>Creates the <code dir="ltr">/etc/sysconfig/oracleasm</code> configuration file</p>
</li>
<li>
<p>Creates the <code dir="ltr">/dev/oracleasm</code> mount point</p>
</li>
<li>
<p>Mounts the ASMLIB driver file system</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The Oracle ASMLIB file system is not a regular file system. It is used only by the Oracle ASM library to communicate with the Oracle ASMLIB.</div>
</li>
</ul>
</li>
<li>
<p>Enter the following command to load the <code dir="ltr">oracleasm</code> kernel module::</p>
<pre dir="ltr"># /usr/sbin/oracleasm init
</pre></li>
</ol>
</div>
<!-- class="sect4" -->
<a id="CIHJDCBF"></a>
<div id="LADBI8069" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4"><span class="secnum">D.3.1.2.2</span> Configuring Disk Devices to Use Oracle ASMLIB</h5>
<p>To configure the disk devices to use in an Oracle Automatic Storage Management disk group, perform the following steps:</p>
<ol>
<li>
<p>If you intend to use IDE, SCSI, or RAID devices in the Oracle Automatic Storage Management disk group, then perform the following steps:</p>
<ol>
<li>
<p>Install or configure the disk devices that you intend to use for the disk group and restart the system.</p>
</li>
<li>
<p>Enter the following command to identify the device name for the disks to use:<a id="sthref853"></a><a id="sthref854"></a><a id="sthref855"></a><a id="sthref856"></a><a id="sthref857"></a><a id="sthref858"></a><a id="sthref859"></a><a id="sthref860"></a></p>
<pre dir="ltr"># /sbin/fdisk -l
</pre>
<p>Depending on the type of disk, the device name can vary:<a id="sthref861"></a><a id="sthref862"></a></p>
<div class="inftblhruleinformal">
<table class="cellalignment2177" title="Disk Device Name Formats on Linux" summary="This table shows the format of Linux disk device names" dir="ltr">
<thead>
<tr class="cellalignment2168">
<th class="cellalignment2178" id="r1c1-t20">Disk Type</th>
<th class="cellalignment2178" id="r1c2-t20">Device Name Format</th>
<th class="cellalignment2178" id="r1c3-t20">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r2c1-t20" headers="r1c1-t20"><a id="sthref863"></a><a id="sthref864"></a>IDE disk</td>
<td class="cellalignment2174" headers="r2c1-t20 r1c2-t20">
<pre dir="ltr">/dev/hd<span class="italic">xn</span>
</pre></td>
<td class="cellalignment2174" headers="r2c1-t20 r1c3-t20">In this example, <code dir="ltr"><span class="codeinlineitalic">x</span></code> is a letter that identifies the IDE disk, and <code dir="ltr"><span class="codeinlineitalic">n</span></code> is the partition number. For example, <code dir="ltr">/dev/hda</code> is the first disk on the first IDE bus.</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r3c1-t20" headers="r1c1-t20"><a id="sthref865"></a><a id="sthref866"></a>SCSI disk</td>
<td class="cellalignment2174" headers="r3c1-t20 r1c2-t20">
<pre dir="ltr">/dev/sd<span class="italic">xn</span>
</pre></td>
<td class="cellalignment2174" headers="r3c1-t20 r1c3-t20">In this example, <code dir="ltr"><span class="codeinlineitalic">x</span></code> is a letter that identifies the SCSI disk, and <code dir="ltr"><span class="codeinlineitalic">n</span></code> is the partition number. For example, <code dir="ltr">/dev/sda</code> is the first disk on the first SCSI bus.</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r4c1-t20" headers="r1c1-t20"><a id="sthref867"></a><a id="sthref868"></a>RAID disk</td>
<td class="cellalignment2174" headers="r4c1-t20 r1c2-t20">
<pre dir="ltr">/dev/rd/c<span class="italic">x</span>d<span class="italic">y</span>p<span class="italic">z</span>
/dev/ida/c<span class="italic">x</span>d<span class="italic">y</span>p<span class="italic">z</span>
</pre></td>
<td class="cellalignment2174" headers="r4c1-t20 r1c3-t20">Depending on the RAID controller, RAID devices can have different device names. In the examples shown, <code dir="ltr"><span class="codeinlineitalic">x</span></code> is a number that identifies the controller, <code dir="ltr"><span class="codeinlineitalic">y</span></code> is a number that identifies the disk, and <code dir="ltr"><span class="codeinlineitalic">z</span></code> is a number that identifies the partition. For example, <code dir="ltr">/dev/ida/c0d1</code> is the second logical drive on the first controller.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<p>To include devices in a disk group, you can specify either whole-drive device names or partition device names.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that you create a single whole-disk partition on each disk to use.</div>
</li>
<li>
<p>Use either <code dir="ltr">fdisk</code> or <code dir="ltr">parted</code> to create a single whole-disk partition on the disk devices.</p>
</li>
</ol>
</li>
<li>
<p>Enter a command similar to the following to mark a disk as an Oracle Automatic Storage Management disk:</p>
<pre dir="ltr"># /usr/sbin/oracleasm createdisk DISK1 /dev/sdb1
</pre>
<p>In this example, <code dir="ltr">DISK1</code> is a name assigned to the disk.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>The disk names you specify can contain uppercase letters, numbers, and the underscore character. They must start with an uppercase letter.</p>
</li>
<li>
<p>To create a database during the installation using the Oracle Automatic Storage Management library driver, you must change the disk discovery string to <code dir="ltr">ORCL:*</code>.</p>
</li>
<li>
<p>If you are using a multi-pathing disk driver with Oracle ASM, then make sure that you specify the correct logical device name for the disk.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<!-- class="sect4" -->
<a id="CIHJACBC"></a>
<div id="LADBI8070" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4"><span class="secnum">D.3.1.2.3</span> Administering Oracle ASMLIB and Disks</h5>
<p>To administer the Oracle Automatic Storage Management library driver and disks, use the <code dir="ltr">/usr/sbin/oracleasm</code> initialization script with different options, as described in the following table:</p>
<div id="LADBI8114" class="tblhruleformalwide">
<p class="titleintable"><a id="sthref869"></a><a id="sthref870"></a>Table D-1 Disk Management Tasks Using ORACLEASM</p>
<table class="cellalignment2177" title="Disk Management Tasks Using ORACLEASM" summary="Disk Management Tasks Using ORACLEASM" dir="ltr">
<thead>
<tr class="cellalignment2168">
<th class="cellalignment2178" id="r1c1-t23">Task</th>
<th class="cellalignment2178" id="r1c2-t23">Command Example</th>
<th class="cellalignment2178" id="r1c3-t23">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r2c1-t23" headers="r1c1-t23">
<p>Configure or reconfigure ASMLIB</p>
</td>
<td class="cellalignment2174" headers="r2c1-t23 r1c2-t23">
<p><code dir="ltr">oracleasm configure -i</code></p>
</td>
<td class="cellalignment2174" headers="r2c1-t23 r1c3-t23">
<p>Use the configure option to reconfigure the Oracle Automatic Storage Management library driver, if necessary.</p>
<p>To see command options, enter <code dir="ltr">oracleasm configure</code> without the <code dir="ltr">-i</code> flag.</p>
</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r3c1-t23" headers="r1c1-t23">
<p>Change system restart load options for ASMLIB</p>
</td>
<td class="cellalignment2174" headers="r3c1-t23 r1c2-t23">
<p><code dir="ltr">oracleasm enable</code></p>
</td>
<td class="cellalignment2174" headers="r3c1-t23 r1c3-t23">
<p>Options are <code dir="ltr">disable</code> and <code dir="ltr">enable</code>.</p>
<p>Use the <code dir="ltr">disable</code> and <code dir="ltr">enable</code> options to change the actions of the Oracle Automatic Storage Management library driver when the system starts. The <code dir="ltr">enable</code> option causes the Oracle Automatic Storage Management library driver to load when the system starts.</p>
</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r4c1-t23" headers="r1c1-t23">
<p>Load or unload ASMLIB without restarting the system</p>
</td>
<td class="cellalignment2174" headers="r4c1-t23 r1c2-t23">
<p><code dir="ltr">oracleasm restart</code></p>
</td>
<td class="cellalignment2174" headers="r4c1-t23 r1c3-t23">
<p>Options are <code dir="ltr">start</code>, <code dir="ltr">stop</code> and <code dir="ltr">restart</code>.</p>
<p>Use the <code dir="ltr">start</code>, <code dir="ltr">stop</code>, and <code dir="ltr">restart</code> options to load or unload the Oracle Automatic Storage Management library driver without restarting the system.</p>
</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r5c1-t23" headers="r1c1-t23">
<p>Mark a disk for use with ASMLIB</p>
</td>
<td class="cellalignment2174" headers="r5c1-t23 r1c2-t23">
<p><code dir="ltr">oracleasm createdisk VOL1 /dev/sda1</code></p>
</td>
<td class="cellalignment2174" headers="r5c1-t23 r1c3-t23">
<p>Use the <code dir="ltr">createdisk</code> option to mark a disk device for use with the Oracle Automatic Storage Management library driver and give it a name, where <code dir="ltr"><span class="codeinlineitalic">labelname</span></code> is the name you want to use to mark the device, and <code dir="ltr"><span class="codeinlineitalic">devicepath</span></code> is the path to the device:</p>
<p><code dir="ltr">oracleasm createdisk</code> <code dir="ltr"><span class="codeinlineitalic">labelname devicepath</span></code></p>
</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r6c1-t23" headers="r1c1-t23">
<p>Unmark a named disk device</p>
</td>
<td class="cellalignment2174" headers="r6c1-t23 r1c2-t23">
<p><code dir="ltr">oracleasm deletedisk VOL1</code></p>
</td>
<td class="cellalignment2174" headers="r6c1-t23 r1c3-t23">
<p>Use the <code dir="ltr">deletedisk</code> option to unmark a named disk device, where <code dir="ltr"><span class="codeinlineitalic">diskname</span></code> is the name of the disk:</p>
<p><code dir="ltr">oracleasm deletedisk</code> <code dir="ltr"><span class="codeinlineitalic">diskname</span></code></p>
<p><span class="bold">Caution:</span> Do not use this command to unmark disks that are being used by an Oracle Automatic Storage Management disk group. You must delete the disk from the Oracle Automatic Storage Management disk group before you unmark it.</p>
</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r7c1-t23" headers="r1c1-t23">
<p>Determine if ASMLIB is using a disk device</p>
</td>
<td class="cellalignment2174" headers="r7c1-t23 r1c2-t23">
<p><code dir="ltr">oracleasm querydisk</code></p>
</td>
<td class="cellalignment2174" headers="r7c1-t23 r1c3-t23">
<p>Use the <code dir="ltr">querydisk</code> option to determine if a disk device or disk name is being used by the Oracle Automatic Storage Management library driver, where <code dir="ltr"><span class="codeinlineitalic">diskname_devicename</span></code> is the name of the disk or device that you want to query:</p>
<p><code dir="ltr">oracleasm querydisk</code> <code dir="ltr"><span class="codeinlineitalic">diskname_devicename</span></code></p>
</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r8c1-t23" headers="r1c1-t23">
<p>List Oracle ASMLIB disks</p>
</td>
<td class="cellalignment2174" headers="r8c1-t23 r1c2-t23">
<p><code dir="ltr">oracleasm listdisks</code></p>
</td>
<td class="cellalignment2174" headers="r8c1-t23 r1c3-t23">
<p>Use the <code dir="ltr">listdisks</code> option to list the disk names of marked Oracle ASM library driver disks.</p>
</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r9c1-t23" headers="r1c1-t23">
<p>Identify disks marked as ASMLIB disks</p>
</td>
<td class="cellalignment2174" headers="r9c1-t23 r1c2-t23">
<p><code dir="ltr">oracleasm scandisks</code></p>
</td>
<td class="cellalignment2174" headers="r9c1-t23 r1c3-t23">
<p>Use the <code dir="ltr">scandisks</code> option to enable cluster nodes to identify which shared disks have been marked as ASMLIB disks on another node.</p>
</td>
</tr>
<tr class="cellalignment2168">
<td class="cellalignment2174" id="r10c1-t23" headers="r1c1-t23">
<p>Rename ASMLIB disks</p>
</td>
<td class="cellalignment2174" headers="r10c1-t23 r1c2-t23">
<p><code dir="ltr">oracleasm renamedisk VOL1 VOL2</code></p>
</td>
<td class="cellalignment2174" headers="r10c1-t23 r1c3-t23">
<p>Use the renamedisk option to change the label of an Oracle ASM library driver disk or device by using the following syntax, where <code dir="ltr"><span class="codeinlineitalic">manager</span></code> specifies the manager device, <code dir="ltr"><span class="codeinlineitalic">label_device</span></code> specifies the disk you intend to rename, as specified either by OracleASM label name or by the device path, and <code dir="ltr"><span class="codeinlineitalic">new_label</span></code> specifies the new label you want to use for the disk:</p>
<pre dir="ltr">oracleasm renamedisk [-l <span class="codeinlineitalic">manager</span>] [-v] <span class="codeinlineitalic">label_device</span> <span class="codeinlineitalic">new_label</span>
</pre>
<p>Use the <code dir="ltr">-v</code> flag to provide a verbose output for debugging.</p>
<p><span class="bold">Caution:</span> You must ensure that all Oracle Database and Oracle ASM instances have ceased using the disk before you relabel the disk. If you do not do this, then you may lose data.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformalwide" --></div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<a id="CIHDFGEG"></a>
<div id="LADBI8071" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">D.3.1.3</span> D<a id="sthref871"></a>einstalling Oracle ASMLIB</h4>
<p>If Oracle ASMLIB is installed but you do not use it for device path persistence, then deinstall Oracle ASMLIB:</p>
<ol>
<li>
<p>Stop Oracle ASM and any running database instance:</p>
<pre dir="ltr">$ srvctl stop asm
$ srvctl stop instance -d <span class="codeinlineitalic">db_unique_name</span>
</pre></li>
<li>
<p>Log in as <code dir="ltr">root</code>.</p>
</li>
<li>
<p>Stop the Oracle Restart stack:</p>
<pre dir="ltr"># cd <span class="codeinlineitalic">Grid_home</span>/bin
# crsctl stop has
</pre></li>
<li>
<p>Stop Oracle ASMLIB:</p>
<pre dir="ltr"># /etc/init.d/oracleasm disable
</pre></li>
<li>
<p>Remove the <code dir="ltr">oracleasm</code> library and tools RPMs:</p>
<pre dir="ltr"># rpm -e oracleasm-support
# rpm -e oracleasmlib
</pre></li>
<li>
<p>Check if any <code dir="ltr">oracleasm</code> RPMs are remaining:</p>
<pre dir="ltr"># rpm -qa| grep oracleasm
</pre></li>
<li>
<p>If any <code dir="ltr">oracleasm</code> configuration files are remaining, remove them:</p>
<pre dir="ltr"># rpm -qa| grep oracleasm | xargs rpm -e
</pre>
<p>Oracle ASMLIB and associated RPMs are now removed.</p>
</li>
<li>
<p>Start the Oracle Restart stack. Optionally, you can install and configure Oracle ASM Filter Driver (Oracle ASMFD) before starting the Oracle Restart stack.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink OSTMG95729" href="../OSTMG/GUID-2F5E344F-AFC2-4768-8C00-6F3C56302123.htm#OSTMG95729"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a></div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CIHDEIEG"></a>
<div id="LADBI8072" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">D.3.2</span> Configuring Disk Devices Manually for Oracle Automatic Storage Management<a id="sthref872"></a><a id="sthref873"></a></h3>
<p>This section contains the following information about preparing disk devices manually for use by Oracle ASM:</p>
<ul>
<li>
<p><a href="#CIHGGDGH">About Device File Names and Ownership for Linux</a></p>
</li>
<li>
<p><a href="#CIHJBBBA">Configuring a Permissions File for Disk Devices for Oracle ASM</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
The operation of <code dir="ltr">udev</code> depends on the Linux version, vendor, and storage configuration.</div>
<a id="CIHGGDGH"></a>
<div id="LADBI8073" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">D.3.2.1</span> About Device File Names and Ownership for Linux</h4>
<p>By default, the device file naming scheme <code dir="ltr">udev</code> dynamically creates device file names when the server is started, and assigns ownership of them to <code dir="ltr">root</code>. If <code dir="ltr">udev</code> applies default settings, then it changes Oracle device file names and owners for the disks, making the disks inaccessible when the server is restarted. For example, a voting disk on a device named <code dir="ltr">/dev/sdd</code> owned by the user <code dir="ltr">grid</code> may be on a device named <code dir="ltr">/dev/sdf</code> owned by <code dir="ltr">root</code> after restarting the server.</p>
<p>If you use Oracle ASMFD, then you do not have to ensure permissions and device path persistency in <code dir="ltr">udev</code>.</p>
<p>If you do not use Oracle ASMFD, then you must create a custom rules file. Linux vendors customize their udev configurations and use different orders for reading rules files. For example, on some Linux distributions when <code dir="ltr">udev</code> is started, it sequentially carries out rules (configuration directives) defined in rules files. These files are in the path <code dir="ltr">/etc/udev/rules.d/</code>. Rules files are read in lexical order. For example, rules in the file <code dir="ltr">10-wacom.rules</code> are parsed and carried out before rules in the rules file <code dir="ltr">90-ib.rules</code>.</p>
<p>When specifying the device information in the UDEV rules file, ensure that the OWNER, GROUP and MODE are specified before all other characteristics in the order shown. For example, to include the characteristic ACTION on the UDEV line, specify ACTION after OWNER, GROUP, and MODE.</p>
<p>Where rules files describe the same devices, on the supported Linux kernel versions, the last file read is the one that is applied.</p>
</div>
<!-- class="sect3" -->
<a id="CIHJBBBA"></a>
<div id="LADBI8074" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">D.3.2.2</span> Configuring a Permissions File for Disk Devices for Oracle ASM</h4>
<p>To configure a permissions file for disk devices for use by Oracle ASM, complete the following tasks:</p>
<ol>
<li>
<p>Configure SCSI devices as trusted devices, while listed, by editing the <code dir="ltr">/etc/scsi_id.config</code> file and adding &#34;options=-g&#34; to the file. For example:</p>
<pre dir="ltr"># cat &gt; /etc/scsi_id.config
vendor=&#34;ATA&#34;,options=-p 0x80
options=-g
</pre></li>
<li>
<p>Using a text editor, create a <code dir="ltr">udev</code> rules file for the Oracle ASM devices, setting permissions to 0660 for the installation owner and the group whose members are administrators of the grid infrastructure software.</p>
<p>For example, on Oracle Linux, to create a role-based configuration <code dir="ltr">rules.d</code> file, where the installation owner is <code dir="ltr">grid</code>, and the OSASM group is <code dir="ltr">asmadmin</code>, enter commands similar to the following:</p>
<pre dir="ltr"># vi /etc/udev/rules.d/99-oracle-asmdevices.rules

KERNEL==&#34;sd?1&#34;, BUS==&#34;scsi&#34;, PROGRAM==&#34;/sbin/scsi_id&#34;,
RESULT==&#34;14f70656e66696c00000000&#34;, OWNER=&#34;grid&#34;, GROUP=&#34;asmadmin&#34;, MODE=&#34;0660&#34;
KERNEL==&#34;sd?2&#34;, BUS==&#34;scsi&#34;, PROGRAM==&#34;/sbin/scsi_id&#34;,
RESULT==&#34;14f70656e66696c00000000&#34;, OWNER=&#34;grid&#34;, GROUP=&#34;asmadmin&#34;, MODE=&#34;0660&#34;
KERNEL==&#34;sd?3&#34;, BUS==&#34;scsi&#34;, PROGRAM==&#34;/sbin/scsi_id&#34;,
RESULT==&#34;14f70656e66696c00000000&#34;, OWNER=&#34;grid&#34;, GROUP=&#34;asmadmin&#34;, MODE=&#34;0660&#34;
</pre></li>
<li>
<p>Load updated block device partition tables on the server using: <code dir="ltr">/sbin/partprobe</code> <code dir="ltr"><span class="codeinlineitalic">devicename</span></code>.<a id="sthref874"></a> You must do this as the <code dir="ltr">root</code> user.</p>
</li>
<li>
<p>Enter the command to restart the <code dir="ltr">udev</code> service.</p>
<p>On Oracle Linux, and Red Hat Enterprise Linux, the commands are:</p>
<pre dir="ltr"># /sbin/udevcontrol reload_rules
# /sbin/start_udev
</pre>
<p>On SUSE Linux Enterprise Server, the command is:</p>
<pre dir="ltr"># /etc/init.d boot.udev restart
</pre>
<p>Verify that the device permissions and ownerships are set correctly.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="appendix" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2167">
<tr>
<td class="cellalignment2174">
<table class="cellalignment2172">
<tr>
<td class="cellalignment2171"><a href="app_nas.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2171"><a href="app_network.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2012, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2176">
<table class="cellalignment2170">
<tr>
<td class="cellalignment2171"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2171"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2171"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2171"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2171"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2171"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>