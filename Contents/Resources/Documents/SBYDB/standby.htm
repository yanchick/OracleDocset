<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-92011"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Getting%20Started%20with%20Oracle%20Data%20Guard"></a><title>Getting Started with Oracle Data Guard</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="standby databases, defined, managed recovery operations, Redo Apply, benefits, physical standby database, physical standby databases, benefits, logical standby database, logical standby databases, directory locations, structure on standby databases, creating, directory structure considerations, directory structure"/>
<meta name="dcterms.created" content="2017-07-21T12:09:00Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Data Guard Concepts and Administration"/>
<meta name="dcterms.identifier" content="E48552-08"/>
<meta name="dcterms.isVersionOf" content="SBYDB"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="concepts.htm" title="Previous" type="text/html"/>
<link rel="Next" href="create_ps.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48552-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-31EBC212-59E1-4536-A884-EFA9FE3DFD84"></a> <span id="PAGE" style="display:none;">8/35</span> <!-- End Header -->
<a id="SBYDB00100"></a>
<h1 id="SBYDB-GUID-31EBC212-59E1-4536-A884-EFA9FE3DFD84" class="sect1"><span class="enumeration_chapter">2</span> Getting Started with Oracle Data Guard</h1>
<div>
<p><a id="d5446e67" class="indexterm-anchor"></a>Considerations when getting started with Oracle Data Guard are discussed in the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="standby.htm#GUID-4CAD29A7-28FD-40B4-A223-F69A302B1E00">Standby Database Types</a></p>
</li>
<li>
<p><a href="standby.htm#GUID-AC2A6894-9805-4969-9746-0D43EE7F8767">User Interfaces for Administering Oracle Data Guard Configurations</a></p>
</li>
<li>
<p><a href="standby.htm#GUID-62F35117-0A9C-47E9-82B6-7E3B214B28B7">Oracle Data Guard Operational Prerequisites</a></p>
</li>
<li>
<p><a href="standby.htm#GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699">Standby Database Directory Structure Considerations</a></p>
</li>
<li>
<p><a href="standby.htm#GUID-8DA7295A-53C7-4B52-9E0A-8A513640D265">Moving the Location of Online Data Files</a></p>
</li>
</ul>
</div>
<a id="SBYDB00110"></a>
<div class="props_rev_3"><a id="GUID-4CAD29A7-28FD-40B4-A223-F69A302B1E00"></a>
<h2 id="SBYDB-GUID-4CAD29A7-28FD-40B4-A223-F69A302B1E00" class="sect2"><span class="enumeration_section">2.1</span> Standby Database Types</h2>
<div>
<p>A <span class="bold">standby database</span> is a transactionally consistent copy of an Oracle production database that is initially created from a backup copy of the primary database. Once the standby database is created and configured, Oracle Data Guard automatically maintains the standby database by transmitting primary database redo data to the standby system, where the redo data is applied to the standby database.</p>
<p>A standby database can be one of these types: a physical standby database, a logical standby database, or a snapshot standby database. If needed, either a physical or a logical standby database can assume the role of the primary database and take over production processing. An Oracle Data Guard configuration can include any combination of these types of standby databases.</p>
</div>
<a id="SBYDB5010"></a><a id="SBYDB00101"></a>
<div class="props_rev_3"><a id="GUID-88BBC338-BC93-454C-B5C6-23CA8F0C329E"></a>
<h3 id="SBYDB-GUID-88BBC338-BC93-454C-B5C6-23CA8F0C329E" class="sect3"><span class="enumeration_section">2.1.1</span> Physical Standby Databases</h3>
<div>
<p>A physical standby database is an exact, block-for-block copy of a primary database. A physical standby is maintained as an exact copy through a process called Redo Apply, in which redo data received from a primary database is continuously applied to a physical standby database using the database recovery mechanisms.</p>
<p>A physical standby database can be opened for read-only access and used to offload queries from a primary database.<a id="d5446e268" class="indexterm-anchor"></a><a id="d5446e272" class="indexterm-anchor"></a> If a license for the Oracle Active Data Guard option has been purchased, Redo Apply can be active while the physical standby database is open, thus allowing queries to return results that are identical to what would be returned from the primary database. This capability is known as the real-time query feature.</p>
<div class="infoboxnotealso" id="GUID-88BBC338-BC93-454C-B5C6-23CA8F0C329E__GUID-F8AFEB70-E11F-4136-A65D-B527B9034E87">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="manage_ps.htm#GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4">Opening a Physical Standby Database</a> &#34;</span></p>
</li>
<li>
<p><a class="olink DBLIC141" target="_blank" href="../DBLIC/options.htm#DBLIC141"><span class="italic">Oracle Database Licensing Information</span></a> for more information about Oracle Active Data Guard</p>
</li>
</ul>
</div>
<div class="section">
<p class="subhead3">Benefits of a Physical Standby Database</p>
</div>
<!-- class="section" -->
<div class="section">
<p>A physical standby database provides the following benefits:</p>
<ul style="list-style-type: disc;">
<li>
<p>Disaster recovery and high availability</p>
<p>A physical standby database is a robust and efficient disaster recovery and high availability solution. Easy-to-manage switchover and failover capabilities allow easy role reversals between primary and physical standby databases, minimizing the downtime of the primary database for planned and unplanned outages.</p>
</li>
<li>
<p>Data protection</p>
<p>A physical standby database can prevent data loss, even in the face of unforeseen disasters. A physical standby database supports all datatypes, and all DDL and DML operations that the primary database can support. It also provides a safeguard against data corruptions and user errors. Storage level physical corruptions on the primary database are not propagated to a standby database. Similarly, logical corruptions or user errors that would otherwise cause data loss can be easily resolved.</p>
</li>
<li>
<p>Reduction in primary database workload</p>
<p>Oracle Recovery Manager (RMAN) can use a physical standby database to off-load backups from a primary database, saving valuable CPU and I/O cycles.</p>
<p>A physical standby database can also be queried while Redo Apply is active, which allows queries to be offloaded from the primary to a physical standby, further reducing the primary workload.</p>
</li>
<li>
<p>Performance</p>
<p>The Redo Apply technology used by a physical standby database is the most efficient mechanism for keeping a standby database updated with changes being made at a primary database because it applies changes using low-level recovery mechanisms which bypass all SQL level code layers.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="SBYDB5011"></a><a id="SBYDB00102"></a>
<div class="props_rev_3"><a id="GUID-D6AB6955-C1E1-4FE9-A9D9-6F6275B8748A"></a>
<h3 id="SBYDB-GUID-D6AB6955-C1E1-4FE9-A9D9-6F6275B8748A" class="sect3"><span class="enumeration_section">2.1.2</span> Logical Standby Databases</h3>
<div>
<p>A logical standby database is initially created as an identical copy of the primary database, but it later can be altered to have a different structure. The logical standby database is updated by executing SQL statements. The flexibility of a logical standby database lets you upgrade Oracle Database software (patch sets and new Oracle Database releases) and perform other database maintenance in rolling fashion with almost no downtime. From Oracle Database 11<span class="italic">g</span> onward, the transient logical database rolling upgrade process can also be used with existing physical standby databases.</p>
<p>Oracle Data Guard automatically applies information from the archived redo log file or standby redo log file to the logical standby database by transforming the data in the log files into SQL statements and then executing the SQL statements on the logical standby database. Because the logical standby database is updated using SQL statements, it must remain open. Although the logical standby database is opened in read/write mode, its target tables for the regenerated SQL are available only for read-only operations. While those tables are being updated, they can be used simultaneously for other tasks such as reporting, summations, and queries.</p>
<p>A logical standby database has some restrictions on datatypes, types of tables, and types of DDL and DML operations. See <a href="data_support.htm#GUID-340BA6D6-74D5-4684-AF39-08890D5CD9D4">Data Type and DDL Support on a Logical Standby Database</a> for information on data type and DDL support on logical standby databases.</p>
<div class="section">
<p class="subhead3">Benefits of a Logical Standby Database</p>
</div>
<!-- class="section" -->
<div class="section">
<p>A logical standby database is ideal for high availability (HA) while still offering data recovery (DR) benefits. Compared to a physical standby database, a logical standby database provides significant additional HA benefits:</p>
<ul style="list-style-type: disc;">
<li>
<p>Minimizing downtime on software upgrades</p>
<p>A logical standby database is ideal for upgrading an Oracle Data Guard configuration in a rolling fashion. Logical standby can be used to greatly reduce downtime associated with applying patchsets and new software releases. A logical standby can be upgraded to the new release and then switched over to become the active primary. This allows full availability while the old primary is converted to a logical standby and the patchset is applied. Logical standbys provide the underlying platform for the <code class="codeph">DBMS_ROLLING</code> PL/SQL package, which is available as of Oracle Database 12<span class="italic">c</span> Release 1 (12.1). The <code class="codeph">DBMS_ROLLING</code> package provides functionality that allows you to make your Oracle Data Guard configuration highly available in the context of rolling upgrades and other storage reorganization.</p>
</li>
<li>
<p>Support for reporting and decision support requirements</p>
<p>A key benefit of logical standby is that significant auxiliary structures can be created to optimize the reporting workload; structures that could have a prohibitive impact on the primary&#39;s transactional response time. A logical standby can have its data physically reorganized into a different storage type with different partitioning, have many different indexes, have on-demand refresh materialized views created and maintained, and can be used to drive the creation of data cubes and other OLAP data views. However, a logical standby database does not allow for any transformation of your data (such as replicating only a subset of columns or allowing additional columns on user tables). For those types of reporting activities, Oracle GoldenGate is Oracle&#39;s preferred solution.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="SBYDB5012"></a><a id="SBYDB00103"></a>
<div class="props_rev_3"><a id="GUID-140A83DB-6189-489C-ADF3-F84FA801B9E1"></a>
<h3 id="SBYDB-GUID-140A83DB-6189-489C-ADF3-F84FA801B9E1" class="sect3"><span class="enumeration_section">2.1.3</span> Snapshot Standby Databases</h3>
<div>
<p>A snapshot standby database is a type of updatable standby database that provides full data protection for a primary database. A snapshot standby database receives and archives, but does not apply, redo data from its primary database. Redo data received from the primary database is applied when a snapshot standby database is converted back into a physical standby database, after discarding all local updates to the snapshot standby database.</p>
<p>A snapshot standby database diverges from its primary database over time because redo data from the primary database is not applied as it is received. Local updates to the snapshot standby database cause additional divergence. The data in the primary database is fully protected however, because a snapshot standby can be converted back into a physical standby database at any time, and the redo data received from the primary is then applied.</p>
<div class="section">
<p class="subhead3">Benefits of a Snapshot Standby Database</p>
</div>
<!-- class="section" -->
<div class="section">
<p>A snapshot standby database is a fully updatable standby database that provides disaster recovery and data protection benefits that are similar to those of a physical standby database. Snapshot standby databases are best used in scenarios where the benefit of having a temporary, updatable snapshot of the primary database justifies the increased time to recover from primary database failures.</p>
<p>The benefits of using a snapshot standby database include the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>It provides an exact replica of a production database for development and testing purposes, while maintaining data protection at all times. You can use the Oracle Real Application Testing option to capture primary database workload and then replay it for test purposes on the snapshot standby.</p>
</li>
<li>
<p>It can be easily refreshed to contain current production data by converting to a physical standby and resynchronizing.</p>
</li>
</ul>
<p>The ability to create a snapshot standby, test, resynchronize with production, and then again create a snapshot standby and test, is a cycle that can be repeated as often as desired. The same process can be used to easily create and regularly update a snapshot standby for reporting purposes where read/write access to data is required.</p>
<div class="infoboxnotealso" id="GUID-140A83DB-6189-489C-ADF3-F84FA801B9E1__GUID-B90689C1-C6F0-4D63-871C-594F43D524A3">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink RATUG101" target="_blank" href="../RATUG/GUID-C6C2FA1F-3474-4B5A-B814-C41415B4C248.htm#RATUG101"><span class="italic">Oracle Database Testing Guide</span></a> for more information about Oracle Real Application Testing and the license required to use it</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="SBYDB00065"></a>
<div class="props_rev_3"><a id="GUID-AC2A6894-9805-4969-9746-0D43EE7F8767"></a>
<h2 id="SBYDB-GUID-AC2A6894-9805-4969-9746-0D43EE7F8767" class="sect2"><span class="enumeration_section">2.2</span> User Interfaces for Administering Oracle Data Guard Configurations</h2>
<div>
<p>You can use the following interfaces to configure, implement, and manage an Oracle Data Guard configuration:</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle Enterprise Manager Cloud Control</p>
<p>Oracle Enterprise Manager Cloud Control provides a GUI interface for the Oracle Data Guard broker that automates many of the tasks involved in creating, configuring, and monitoring an Oracle Data Guard environment. See the Oracle Enterprise Manager Cloud Control online Help for information about the GUI and its wizards.</p>
</li>
<li>
<p>SQL*Plus Command-line interface</p>
<p>Several SQL*Plus statements use the <code class="codeph">STANDBY</code> keyword to specify operations on a standby database. Other SQL statements do not include standby-specific syntax, but they are useful for performing operations on a standby database. See <a href="sql_stmts.htm#GUID-A3B54628-8FDB-4E99-A933-9EDD59AAC2DF">SQL Statements Relevant to Oracle Data Guard</a> for a list of the relevant statements.</p>
</li>
<li>
<p>Initialization parameters</p>
<p>Several initialization parameters are used to define the Oracle Data Guard environment. See <a href="init_params.htm#GUID-A1CF9B00-F0F5-4F3B-A0E0-9D6ABF775EC9">Initialization Parameters</a> for a list of the relevant initialization parameters.</p>
</li>
</ul>
<ul style="list-style-type: disc;">
<li>
<p>Oracle Data Guard broker command-line interface (DGMGRL)</p>
<p>The DGMGRL command-line interface is an alternative to using Oracle Enterprise Manager Cloud Control. The DGMGRL command-line interface is useful if you want to use the broker to manage an Oracle Data Guard configuration from batch programs or scripts. See <a class="olink DGBKR585" target="_blank" href="../DGBKR/dgmgrl.htm#DGBKR585"><span class="italic">Oracle Data Guard Broker</span></a> for complete information.</p>
</li>
</ul>
</div>
</div>
<a id="SBYDB00067"></a>
<div class="props_rev_3"><a id="GUID-62F35117-0A9C-47E9-82B6-7E3B214B28B7"></a>
<h2 id="SBYDB-GUID-62F35117-0A9C-47E9-82B6-7E3B214B28B7" class="sect2"><span class="enumeration_section">2.3</span> Oracle Data Guard Operational Prerequisites</h2>
<div>
<p>The following sections describe <a id="d5446e720" class="indexterm-anchor"></a><a id="d5446e722" class="indexterm-anchor"></a>operational requirements for using Oracle Data Guard:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="standby.htm#GUID-31B64063-7051-48E4-9BE9-E73266317C9F">Hardware and Operating System Requirements</a></p>
</li>
<li>
<p><a href="standby.htm#GUID-A9F7D87E-49EB-4CE9-A076-1F35F35C0EAB">Oracle Software Requirements</a></p>
</li>
</ul>
</div>
<a id="SBYDB4715"></a>
<div class="props_rev_3"><a id="GUID-31B64063-7051-48E4-9BE9-E73266317C9F"></a>
<h3 id="SBYDB-GUID-31B64063-7051-48E4-9BE9-E73266317C9F" class="sect3"><span class="enumeration_section">2.3.1</span> Hardware and Operating System Requirements</h3>
<div>
<p>As of Oracle Database 11<span class="italic">g</span>, Oracle Data Guard provides increased flexibility for Oracle Data Guard configurations in which the primary and standby systems may have different CPU architectures, operating systems (for example, Windows and Linux), operating system binaries (32-bit/64-bit), or Oracle database binaries (32-bit/64-bit).</p>
<p>This increased mixed-platform flexibility is subject to the current restrictions documented in the My Oracle Support notes 413484.1 and 1085687.1 at <a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a>.</p>
<p>Note 413484.1 discusses mixed-platform support and restrictions for physical standbys.</p>
<p>Note 1085687.1 discusses mixed-platform support and restrictions for logical standbys.</p>
<p>The same release of Oracle Database Enterprise Edition must be installed on the primary database and all standby databases, except during rolling database upgrades using logical or transient logical standby databases.</p>
<div class="infoboxnotealso" id="GUID-31B64063-7051-48E4-9BE9-E73266317C9F__GUID-9C0F678D-703D-4ADA-9FCB-5BAD2487BA58">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rollup.htm#GUID-290F632F-5295-47F3-AEF1-2D37C69C00D7">Using SQL Apply to Upgrade the Oracle Database</a> for information about rolling database upgrades</p>
</li>
</ul>
</div>
</div>
</div>
<a id="SBYDB4716"></a>
<div class="props_rev_3"><a id="GUID-A9F7D87E-49EB-4CE9-A076-1F35F35C0EAB"></a>
<h3 id="SBYDB-GUID-A9F7D87E-49EB-4CE9-A076-1F35F35C0EAB" class="sect3"><span class="enumeration_section">2.3.2</span> Oracle Software Requirements</h3>
<div>
<div class="section">
<p>The following list describes <a id="d5446e903" class="indexterm-anchor"></a><a id="d5446e905" class="indexterm-anchor"></a><a id="d5446e909" class="indexterm-anchor"></a><a id="d5446e911" class="indexterm-anchor"></a><a id="d5446e915" class="indexterm-anchor"></a>Oracle software requirements for using Oracle Data Guard:</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle Data Guard is available only as a feature of Oracle Database Enterprise Edition. It is not available with Oracle Database Standard Edition.</p>
<div class="infobox-note" id="GUID-A9F7D87E-49EB-4CE9-A076-1F35F35C0EAB__GUID-97254E1A-9428-4D7B-8EB6-C9E36F4CA421">
<p class="notep1">Note:</p>
<p>It is possible to si<a id="d5446e927" class="indexterm-anchor"></a>mulate a standby database environment with databases running Oracle Database S<a id="d5446e933" class="indexterm-anchor"></a><a id="d5446e937" class="indexterm-anchor"></a>tandard Edition. You can do this by manually transferring archived redo log files using an operating system copy utility or using custom scripts that periodically send archived redo log files from one database to the other, registering them, and using media recovery to roll forward the copy of the database at the disaster recovery site. Such a configuration does not provide the ease-of-use, manageability, performance, and disaster-recovery capabilities available with Oracle Data Guard.</p>
</div>
</li>
<li>
<p>Using Oracle Data Guard SQL Apply, you can perform a <a id="d5446e945" class="indexterm-anchor"></a><a id="d5446e949" class="indexterm-anchor"></a>rolling upgrade of the Oracle database software from <a id="d5446e954" class="indexterm-anchor"></a><a id="d5446e958" class="indexterm-anchor"></a><a id="d5446e962" class="indexterm-anchor"></a><a id="d5446e966" class="indexterm-anchor"></a>patch set release <span class="italic">n</span> (minimally, this must be release 10.1.0.3) to any higher versioned patch set or major version release. During a rolling upgrade, you can run different releases of the Oracle database on the primary and l<a id="d5446e975" class="indexterm-anchor"></a><a id="d5446e981" class="indexterm-anchor"></a><a id="d5446e985" class="indexterm-anchor"></a>ogical standby databases while you upgrade them, one at a time. For complete information, see <a href="rollup.htm#GUID-290F632F-5295-47F3-AEF1-2D37C69C00D7">Using SQL Apply to Upgrade the Oracle Database</a> and the ReadMe file for the applicable Oracle Database 10<span class="italic">g</span> patch set release.</p>
</li>
<li>
<p>The <code class="codeph">COMPATIBLE</code> database initialization parameter must be set to the same value on all databases in an Oracle Data Guard configuration, except when using a logical standby database, which can have a higher <code class="codeph">COMPATIBLE</code> setting than the primary database.</p>
</li>
</ul>
<ul style="list-style-type: disc;">
<li>
<p>The primary database must run in <a id="d5446e1010" class="indexterm-anchor"></a><a id="d5446e1014" class="indexterm-anchor"></a><code class="codeph">ARCHIVELOG</code> mode. See <a class="olink ADMIN008" target="_blank" href="../ADMIN/archredo.htm#ADMIN008"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information.</p>
</li>
<li>
<p>The primary database can be a single instance database or an Oracle Real Application Clusters (Oracle RAC) database. The standby databases can be single instance databases or Oracle RAC databases, and these standby databases can be a mix of physical, logical, and snapshot types.</p>
</li>
<li>
<p>Each primary database and standby database must have its own control file.</p>
</li>
<li>
<p>If a standby database is located on the same system as the primary database, the archival directories for the standby database <span class="italic">must</span> use a different directory structure than the primary database. Otherwise, the standby database may overwrite the primary database files.</p>
</li>
<li>
<p>To protect against unlogged direct writes in the primary database that cannot be propagated to the standby database, turn on <code class="codeph">FORCE LOGGING</code> at the primary database before performing data file backups for standby creation. Keep the database in <code class="codeph">FORCE LOGGING</code> mode as long as the standby database is required.</p>
</li>
<li>
<p>The user accounts you use to manage the primary and standby database instances must have either the <code class="codeph">SYSDG</code> or <code class="codeph">SYSDBA</code> administrative privilege.</p>
</li>
<li>
<p>For operational simplicity, Oracle recommends that when you set up Oracle Automatic Storage Management (Oracle ASM) and Oracle Managed Files (OMF) in an Oracle Data Guard configuration that you set it up symmetrically on the primary and standby database(s). If any database in the Oracle Data Guard configuration uses Oracle ASM, OMF, or both, then every database in the configuration should use Oracle ASM, OMF, or both, respectively, unless you are purposely implementing a mixed configuration for migration or maintenance purposes. See the scenario in <a href="scenarios.htm#GUID-6FB574E5-2F3A-4C9E-A3F0-7C9154B0F540">Creating a Standby Database That Uses OMF or Oracle ASM</a> for more information.</p>
<div class="infobox-note" id="GUID-A9F7D87E-49EB-4CE9-A076-1F35F35C0EAB__GUID-385E2A95-EFB8-4195-AA2E-F43A6B7A808F">
<p class="notep1">Note:</p>
<p>Because some applications that perform updates involving time-based data cannot handle data entered from multiple time zones, consider setting the time zone for the primary and remote standby systems to be the same to ensure the chronological ordering of records is maintained after a role transition.</p>
</div>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="SBYDB5013"></a><a id="SBYDB5014"></a><a id="SBYDB4717"></a>
<div class="props_rev_3"><a id="GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699"></a>
<h2 id="SBYDB-GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699" class="sect2"><span class="enumeration_section">2.4</span> Standby Database Directory Structure Considerations</h2>
<div>
<p>The directory structure of the various standby databases is important because it determines the path names for the standby data files, archived redo log files, and standby redo log files. If possible, the data files, log files, and control files on the primary and standby systems should have the same names and path names and use <a id="d5446e1156" class="indexterm-anchor"></a><a id="d5446e1160" class="indexterm-anchor"></a>Optimal Flexible Architecture (OFA) naming conventions. The archival directories on the standby database should also be identical between sites, including size and structure. This strategy allows other operations such as backups, switchovers, and failovers to execute the same set of steps, reducing the maintenance complexity.</p>
<div class="infoboxnotealso" id="GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__GUID-13DD87AC-95AA-480E-B217-F94F75A16764">
<p class="notep1">See Also:</p>
<p>Your operating system-specific Oracle documentation for more information about Optimal Flexible Architecture (OFA)</p>
</div>
<p>Otherwise, you must set the filename conversion parameters (as shown in <a href="standby.htm#GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__G74804" title="This 3 column tables describes the consequences of setting up a Data Guard configuration with the primary and standby databases located on separate systems, or with the primary and standby databases located on the same system. Column 1 is the standby system. Column 2 is the directory structure. Column 3 lists the consequences.">Table 2-1</a>) or rename the data file. Nevertheless, if you need to use a system with a different directory structure or place the standby and primary databases on the same system, you can do so with a minimum of extra administration.</p>
<p>The three basic <a id="d5446e1177" class="indexterm-anchor"></a><a id="d5446e1183" class="indexterm-anchor"></a><a id="d5446e1187" class="indexterm-anchor"></a>configuration options are illustrated in <a href="standby.htm#GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__I57647">Figure 2-1</a>. These include:</p>
<ul style="list-style-type: disc;">
<li>
<p>A standby database on the same system as the primary database that uses a different directory structure than the primary system. This is illustrated in <a href="standby.htm#GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__I57647">Figure 2-1</a> as <code class="codeph">Standby1</code>.</p>
<p>If you have a standby database on the same system as the primary database, you <span class="italic">must</span> use a different directory structure. Otherwise, the standby database attempts to overwrite the primary database files.</p>
</li>
<li>
<p>A standby database on a separate system that uses the same directory structure as the primary system. This is illustrated in <a href="standby.htm#GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__I57647">Figure 2-1</a> as <code class="codeph">Standby2</code>. This is the recommended method.</p>
</li>
<li>
<p>A standby database on a separate system that uses a different directory structure than the primary system. This is illustrated in <a href="standby.htm#GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__I57647">Figure 2-1</a> as <code class="codeph">Standby3</code>.</p>
<div class="infobox-note" id="GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__GUID-E5463DF3-F1DE-4BC0-A737-762733184EA7">
<p class="notep1">Note:</p>
<p>For operational simplicity, Oracle recommends that when you set up Oracle Automatic Storage Management (Oracle ASM) and Oracle Managed Files (OMF) in an Oracle Data Guard configuration that you set it up symmetrically on the primary and standby database(s). If any database in the Oracle Data Guard configuration uses Oracle ASM, OMF, or both, then every database in the configuration should use Oracle ASM, OMF, or both, respectively, unless you are purposely implementing a mixed configuration for migration or maintenance purposes. See the scenario in <a href="scenarios.htm#GUID-6FB574E5-2F3A-4C9E-A3F0-7C9154B0F540">Creating a Standby Database That Uses OMF or Oracle ASM</a> for more information.</p>
</div>
</li>
</ul>
<div class="figure" id="GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__I57647">
<p class="titleinfigure">Figure 2-1 Possible Standby Configurations</p>
<img width="455" height="611" src="img/GUID-D04A8837-CC7E-4800-B785-A593591FB0CB-default.gif" alt="Description of Figure 2-1 follows" title="Description of Figure 2-1 follows"/><br/>
<a href="img_text/GUID-D04A8837-CC7E-4800-B785-A593591FB0CB-print.htm">Description of &#34;Figure 2-1 Possible Standby Configurations&#34;</a></div>
<!-- class="figure" -->
<p><a href="standby.htm#GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__G74804" title="This 3 column tables describes the consequences of setting up a Data Guard configuration with the primary and standby databases located on separate systems, or with the primary and standby databases located on the same system. Column 1 is the standby system. Column 2 is the directory structure. Column 3 lists the consequences.">Table 2-1</a> describes possible configurations of primary and standby databases and the consequences of each.</p>
<div class="tblformal" id="GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699__G74804">
<p class="titleintable">Table 2-1 Standby Database Location and Directory Options</p>
<table class="cellalignment2269" title="Standby Database Location and Directory Options" summary="This 3 column tables describes the consequences of setting up a Data Guard configuration with the primary and standby databases located on separate systems, or with the primary and standby databases located on the same system. Column 1 is the standby system. Column 2 is the directory structure. Column 3 lists the consequences.">
<thead>
<tr class="cellalignment2253">
<th class="cellalignment2339" id="d5446e1253">Standby System</th>
<th class="cellalignment2293" id="d5446e1256">Directory Structure</th>
<th class="cellalignment2340" id="d5446e1259">Consequences</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2253">
<td class="cellalignment2341" id="d5446e1264" headers="d5446e1253">
<p>Same as primary system</p>
</td>
<td class="cellalignment2295" headers="d5446e1264 d5446e1256">
<p>Different than primary system (required)</p>
</td>
<td class="cellalignment2342" headers="d5446e1264 d5446e1259">
<ul style="list-style-type: disc;">
<li>
<p>You can either manually rename files or set up<a id="d5446e1275" class="indexterm-anchor"></a><a id="d5446e1279" class="indexterm-anchor"></a> the <code class="codeph">DB_FILE_NAME_CONVERT</code> and <code class="codeph">LOG_FILE_NAME_CONVERT</code> initialization parameters on the standby database to automatically update the path names for primary database data files and archived redo log files and standby redo log files in the standby database control file. (See <a href="create_ps.htm#GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84">Set Primary Database Initialization Parameters</a>.)</p>
</li>
<li>
<p>The standby database does not protect against disasters that destroy the system on which the primary and standby databases reside, but it does provide switchover capabilities for planned maintenance.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment2253">
<td class="cellalignment2341" id="d5446e1298" headers="d5446e1253">
<p>Separate system</p>
</td>
<td class="cellalignment2295" headers="d5446e1298 d5446e1256">
<p>Same as primary system</p>
</td>
<td class="cellalignment2342" headers="d5446e1298 d5446e1259">
<ul style="list-style-type: disc;">
<li>
<p>You do not need to rename primary database files, archived redo log files, and standby redo log files in the standby database control file, although you can still do so if you want a new naming scheme (for example, to spread the files among different disks).</p>
</li>
<li>
<p>By locating the standby database on separate physical media, you safeguard the data on the primary database against disasters that destroy the primary system.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment2253">
<td class="cellalignment2341" id="d5446e1313" headers="d5446e1253">
<p>Separate system</p>
</td>
<td class="cellalignment2295" headers="d5446e1313 d5446e1256">
<p>Different than primary system</p>
</td>
<td class="cellalignment2342" headers="d5446e1313 d5446e1259">
<ul style="list-style-type: disc;">
<li>
<p>You can either manually rename files or set up the <code class="codeph">DB_FILE_NAME_CONVERT</code> and <code class="codeph">LOG_FILE_NAME_CONVERT</code> initialization parameters on the standby database to automatically rename the data files (see <a href="create_ps.htm#GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84">Set Primary Database Initialization Parameters</a>).</p>
</li>
<li>
<p>By locating the standby database on separate physical media, you safeguard the data on the primary database against disasters that destroy the primary system.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="SBYDB5158"></a>
<div class="props_rev_3"><a id="GUID-8DA7295A-53C7-4B52-9E0A-8A513640D265"></a>
<h2 id="SBYDB-GUID-8DA7295A-53C7-4B52-9E0A-8A513640D265" class="sect2"><span class="enumeration_section">2.5</span> Moving the Location of Online Data Files</h2>
<div>
<p>You can move the location<a id="d5446e1407" class="indexterm-anchor"></a> of an online data file from one physical file to another physical file while the database is actively accessing the file. To do so, you use the SQL statement <code class="codeph">ALTER DATABASE MOVE DATAFILE</code>.</p>
<p>An operation performed with the <code class="codeph">ALTER DATABASE MOVE DATAFILE</code> statement increases the availability of the database because it does not require that the database be shut down to move the location of an online data file. In releases prior to Oracle Database 12<span class="italic">c</span> Release 1 (12.1), you could only move the location of an online data file if the database was down or not open, or by first taking the file offline.</p>
<p>You can perform an online move data file operation independently on the primary and on the standby (either physical or logical). The standby is not affected when a data file is moved on the primary, and vice versa.</p>
<p>On a physical standby, an online move data file operation can be executed while standby recovery is running if the instance that opens the database is in read-only mode. This functionality requires an Oracle Active Data Guard license.</p>
</div>
<a id="SBYDB5159"></a>
<div class="props_rev_3"><a id="GUID-312871DC-0881-444A-8DAB-0BC484638C76"></a>
<h3 id="SBYDB-GUID-312871DC-0881-444A-8DAB-0BC484638C76" class="sect3"><span class="enumeration_section">2.5.1</span> Restrictions When Moving the Location of Online Data Files</h3>
<div>
<ul style="list-style-type: disc;">
<li>
<p>You cannot use the SQL <code class="codeph">ALTER DATABASE MOVE DATAFILE</code> command to rename or relocate an online data file on a physical standby that is a fast-start failover target if the standby is mounted, but not open.</p>
</li>
<li>
<p>The online move data file operation cannot be executed on physical standby while standby recovery is running in a mounted but not open instance.</p>
</li>
<li>
<p>The online move data file operation may get aborted if the standby recovery process takes the data file offline, shrinks the file, or drops the tablespace.</p>
</li>
<li>
<p>On a primary database, the online move data file operation cannot be executed on a file that belongs to a pluggable database (PDB) that has been closed on all instances of the primary database.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-312871DC-0881-444A-8DAB-0BC484638C76__GUID-CBCEC1FD-C3E4-4037-A94A-8F26B02468AB">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink ADMIN13837" target="_blank" href="../ADMIN/dfiles.htm#ADMIN13837"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information about renaming and relocating online data files</p>
</li>
<li>
<p><a class="olink SQLRF55823" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF55823"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">ALTER DATABASE MOVE DATAFILE</code> statement</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2252">
<tr>
<td class="cellalignment2259">
<table class="cellalignment2257">
<tr>
<td class="cellalignment2256"><a href="concepts.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2256"><a href="create_ps.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2261">
<table class="cellalignment2255">
<tr>
<td class="cellalignment2256"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2256"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2256"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2256"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2256"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2256"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>