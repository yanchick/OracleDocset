<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-91993"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Redo%20Transport%20Services"></a><title>Redo Transport Services</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="redo data, cascading, cascading redo data"/>
<meta name="dcterms.created" content="2017-07-21T12:09:00Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Data Guard Concepts and Administration"/>
<meta name="dcterms.identifier" content="E48552-08"/>
<meta name="dcterms.isVersionOf" content="SBYDB"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="protection.htm" title="Previous" type="text/html"/>
<link rel="Next" href="log_apply.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48552-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-0EC71C7D-A80B-40AA-93E5-28BB7E24ED31"></a> <span id="PAGE" style="display:none;">13/35</span> <!-- End Header -->
<a id="SBYDB00400"></a>
<h1 id="SBYDB-GUID-0EC71C7D-A80B-40AA-93E5-28BB7E24ED31" class="sect1"><span class="enumeration_chapter">7</span> Redo Transport Services</h1>
<div>
<p><a id="d13930e67" class="indexterm-anchor"></a>See the following topics for information about how to configure and monitor Oracle redo transport services:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="log_transport.htm#GUID-04851F96-F8F3-4999-AAAD-83C4C3C7AE14">Introduction to Redo Transport Services</a></p>
</li>
<li>
<p><a href="log_transport.htm#GUID-8575AE63-9583-4149-9EDF-F4FD9E62B70A">Configuring Redo Transport Services</a></p>
</li>
<li>
<p><a href="log_transport.htm#GUID-34BCB162-D996-4678-97F1-497805764950">Cascaded Redo Transport Destinations</a></p>
</li>
<li>
<p><a href="log_transport.htm#GUID-988FF469-5815-4FC3-B529-AE1BE9ACD67B">Data Protection Considerations for Cascading Standbys</a></p>
</li>
<li>
<p><a href="log_transport.htm#GUID-A0AAA20B-4DF8-4698-A7E0-3BED5A2C11E9">Validating a Configuration</a></p>
</li>
<li>
<p><a href="log_transport.htm#GUID-282DA542-4C7C-40E2-A3CB-6486CDCF0C0A">Monitoring Redo Transport Services</a></p>
</li>
<li>
<p><a href="log_transport.htm#GUID-665E1862-E9F2-4CB2-BFF5-B5F741FD475E">Tuning Redo Transport</a></p>
</li>
</ul>
</div>
<a id="SBYDB4745"></a>
<div class="props_rev_3"><a id="GUID-04851F96-F8F3-4999-AAAD-83C4C3C7AE14"></a>
<h2 id="SBYDB-GUID-04851F96-F8F3-4999-AAAD-83C4C3C7AE14" class="sect2"><span class="enumeration_section">7.1</span> Introduction to Redo Transport Services</h2>
<div>
<p><span class="bold">Redo transport services</span> performs the automated transfer of redo data between members of an Oracle Data Guard configuration. The following redo transport destinations are supported:</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle Data Guard standby databases</p>
<p>This guide describes how to create and manage physical, logical, and snapshot standby databases.</p>
</li>
<li>
<p>Archive log repository</p>
<p>This destination type is used for temporary offsite storage of archived redo log files. An archive log repository consists of an Oracle database instance and a physical standby control file. An archive log repository does not contain data files, so it cannot support role transitions.</p>
<p>The procedure used to create an archive log repository is identical to the procedure used to create a physical standby database, except for the copying of data files.</p>
</li>
<li>
<p>Oracle Streams downstream capture databases</p>
<p>See <a class="olink STRMS001" target="_blank" href="../STRMS/strms_over.htm#STRMS001"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about Oracle Streams downstream capture databases.</p>
</li>
<li>
<p>Far sync instances</p>
<p>See <a href="create_fs.htm#GUID-8AD7FBA2-42B0-46CF-852B-1AF0CB4A36E8">Far Sync</a> for more information about far sync instances.</p>
</li>
<li>
<p>Zero Data Loss Recovery Appliance (Recovery Appliance)</p>
<p>See <a class="olink AMAGD-GUID-98143190-8A5B-4003-808B-8D81FC09D014" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=AMAGD-GUID-98143190-8A5B-4003-808B-8D81FC09D014"><span><cite>Zero Data Loss Recovery Appliance Administrator&#39;s Guide</cite></span></a> for more information about Zero Data Loss Recovery Appliance (Recovery Appliance).</p>
</li>
</ul>
<p>Each redo transport destination is individually configured to receive redo data via one of two redo transport modes:</p>
<ul style="list-style-type: disc;">
<li>
<p>Synchronous</p>
<p>The synchronous redo transport mode transmits redo data synchronously with respect to transaction commitment. A transaction cannot commit until all redo generated by that transaction has been successfully sent to every enabled redo transport destination that uses the synchronous redo transport mode.</p>
<p>Although there is no limit on the distance between a primary database and a <code class="codeph">SYNC</code> redo transport destination, transaction commit latency increases as network latency increases between a primary database and a <code class="codeph">SYNC</code> redo transport destination.</p>
<p>This transport mode is used by the Maximum Protection and Maximum Availability data protection modes described in <a href="protection.htm#GUID-16298839-9B8A-4E58-8EC9-27912E57F1CE">Oracle Data Guard Protection Modes</a> .</p>
<div class="infobox-note" id="GUID-04851F96-F8F3-4999-AAAD-83C4C3C7AE14__GUID-DE685756-6A0D-4246-B66C-94F93B0E0E18">
<p class="notep1">Note:</p>
<p>Synchronous redo transport is not supported for Zero Data Loss Recovery Appliance.</p>
</div>
</li>
<li>
<p>Asynchronous</p>
<p>The asynchronous redo transport mode transmits redo data asynchronously with respect to transaction commitment. A transaction can commit without waiting for the redo generated by that transaction to be successfully sent to any redo transport destination that uses the asynchronous redo transport mode.</p>
<p>This transport mode is used by the Maximum Performance data protection mode described in <a href="protection.htm#GUID-16298839-9B8A-4E58-8EC9-27912E57F1CE">Oracle Data Guard Protection Modes</a> .</p>
</li>
</ul>
</div>
</div>
<a id="SBYDB4746"></a>
<div class="props_rev_3"><a id="GUID-8575AE63-9583-4149-9EDF-F4FD9E62B70A"></a>
<h2 id="SBYDB-GUID-8575AE63-9583-4149-9EDF-F4FD9E62B70A" class="sect2"><span class="enumeration_section">7.2</span> Configuring Redo Transport Services</h2>
<div>
<p>This section describes how to configure<a id="d13930e326" class="indexterm-anchor"></a> redo transport services. The following topics are discussed:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="log_transport.htm#GUID-FA3B203C-D28E-4A27-8585-9EBC19836F4C">Redo Transport Security</a></p>
</li>
<li>
<p><a href="log_transport.htm#GUID-45DFFA7C-3967-4B46-8C2C-DBD22A4D6A74">Configuring an Oracle Database to Send Redo Data</a></p>
</li>
<li>
<p><a href="log_transport.htm#GUID-AF64C4FE-2D16-4197-953A-25930F36CFA8">Configuring an Oracle Database to Receive Redo Data</a></p>
</li>
</ul>
<p>This section assumes that you have a thorough understanding of the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p>Database administrator authentication</p>
</li>
<li>
<p>Database initialization parameters</p>
</li>
<li>
<p>Managing a redo log</p>
</li>
<li>
<p>Managing archived redo logs</p>
</li>
<li>
<p>Fast recovery areas</p>
</li>
<li>
<p>Oracle Net Configuration</p>
</li>
</ul>
</div>
<a id="SBYDB00523"></a>
<div class="props_rev_3"><a id="GUID-FA3B203C-D28E-4A27-8585-9EBC19836F4C"></a>
<h3 id="SBYDB-GUID-FA3B203C-D28E-4A27-8585-9EBC19836F4C" class="sect3"><span class="enumeration_section">7.2.1</span> Redo Transport Security</h3>
<div>
<p>Redo transport uses Oracle Net sessions to transport redo data. These redo transport sessions are authenticated<a id="d13930e438" class="indexterm-anchor"></a> using either the Secure Socket Layer (SSL) protocol or a remote login password file.</p>
</div>
<a id="SBYDB4747"></a>
<div class="props_rev_3"><a id="GUID-DB2E46B2-2A4B-4DF0-B925-F07497F3C6A5"></a>
<h4 id="SBYDB-GUID-DB2E46B2-2A4B-4DF0-B925-F07497F3C6A5" class="sect4"><span class="enumeration_section">7.2.1.1</span> Redo Transport Authentication Using SSL</h4>
<div>
<p>Secure Sockets Layer<a id="d13930e513" class="indexterm-anchor"></a> (SSL) is an industry standard protocol for securing network connections. SSL uses RSA public key cryptography and symmetric key cryptography to provide authentication, encryption, and data integrity. SSL is automatically used for redo transport authentication between two Oracle databases if:</p>
<ul style="list-style-type: disc;">
<li>
<p>The databases are members of the same Oracle Internet Directory (OID) enterprise domain and that domain allows the use of current user database links.</p>
</li>
<li>
<p>The <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span>, and <code class="codeph">FAL_SERVER</code> database initialization parameters that correspond to the databases use Oracle Net connect descriptors configured for SSL.</p>
</li>
<li>
<p>Each database has an Oracle wallet or a supported hardware security module that contains a user certificate with a distinguished name (DN) that matches the DN in the OID entry for the database.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-DB2E46B2-2A4B-4DF0-B925-F07497F3C6A5__GUID-9D6495D5-D6A8-4002-A044-9FADA107C37C">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink DBSEG070" target="_blank" href="../DBSEG/asossl.htm#DBSEG070"><span class="italic">Oracle Database Security Guide</span></a> for more information about SSL</p>
</li>
<li>
<p><a class="olink DBIMI130" target="_blank" href="../DBIMI/adminste.htm#DBIMI130"><span class="italic">Oracle Database Enterprise User Security Administrator&#39;s Guide</span></a> for more information about administering enterprise domains</p>
</li>
<li>
<p><a class="olink OLSAG026" target="_blank" href="../OLSAG/olsoid.htm#OLSAG026"><span class="italic">Oracle Label Security Administrator&#39;s Guide</span></a> for information about administering Oracle Internet Directory</p>
</li>
</ul>
</div>
</div>
</div>
<a id="SBYDB4748"></a>
<div class="props_rev_3"><a id="GUID-6BF40A23-66E3-42C8-9CF5-DE715F648CD4"></a>
<h4 id="SBYDB-GUID-6BF40A23-66E3-42C8-9CF5-DE715F648CD4" class="sect4"><span class="enumeration_section">7.2.1.2</span> Redo Transport Authentication Using a Password File</h4>
<div>
<p>If the SSL authentication requirements are not met, then each database must use a remote login password file. In an Oracle Data Guard configuration, all physical and snapshot standby databases must use a copy of the password file from the primary database, and that copy must be refreshed whenever an administrative privilege (<code class="codeph">SYSDG</code>, <code class="codeph">SYSOPER</code>, <code class="codeph">SYSDBA</code>, and so on) is granted or revoked, and after the password of any user with administrative privileges is changed.</p>
<p>If you have stored the password file in an Oracle ASM disk group at the standby database, then you must copy the updated password file from the primary database to the Oracle ASM location at the standby database. See <a class="olink OSTMG95354" target="_blank" href="../OSTMG/GUID-70D58CAB-BFA4-4055-8768-7C12D61D9A39.htm#OSTMG95354"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for information about the ASMCMD <code class="codeph">pwcopy</code> command used to copy an Oracle ASM or database instance password file to a specified location. See <a class="olink RACAD5045" target="_blank" href="../RACAD/GUID-1CAF8C01-4761-4CEB-B201-F4D0E67A4E70.htm#RACAD5045"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for information about using the <code class="codeph">srvctl</code> utility to modify a database configuration.</p>
<p>When a password file is used for redo transport authentication, the password of the user account used for redo transport authentication is compared between the database initiating a redo transport session and the target database. The password must be the same at both databases to create a redo transport session.</p>
<p>By default, the password of the <code class="codeph">SYS</code> user is used to authenticate redo transport sessions when a password file is used. The <code class="codeph">REDO_TRANSPORT_USER</code> database initialization parameter can be used to select a different user password for redo transport authentication by setting this parameter to the name of any user who has been granted the <code class="codeph">SYSOPER</code> privilege. For administrative ease, Oracle recommends that the <code class="codeph">REDO_TRANSPORT_USER</code> parameter be set to the same value on the redo source database and at each redo transport destination.</p>
<div class="infoboxnotealso" id="GUID-6BF40A23-66E3-42C8-9CF5-DE715F648CD4__GUID-96BA3BD3-823E-4D1F-89E9-A76A45DDFFA1">
<p class="notep1">See Also:</p>
<p><a class="olink ADMIN001" target="_blank" href="../ADMIN/dba.htm#ADMIN001"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information creating and maintaining remote login password files</p>
</div>
</div>
</div>
</div>
<a id="SBYDB5028"></a><a id="SBYDB4749"></a>
<div class="props_rev_3"><a id="GUID-45DFFA7C-3967-4B46-8C2C-DBD22A4D6A74"></a>
<h3 id="SBYDB-GUID-45DFFA7C-3967-4B46-8C2C-DBD22A4D6A74" class="sect3"><span class="enumeration_section">7.2.2</span> Configuring an Oracle Database to Send Redo Data</h3>
<div>
<div class="section">
<p>This section describes how to configure an Oracle database to send redo data<a id="d13930e755" class="indexterm-anchor"></a> to a redo transport destination.</p>
<p>The <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> database initialization parameter (where <span class="italic"><code class="codeph">n</code></span> is an integer from 1 to 31) is used to specify the location of a local archive redo log or to specify a redo transport destination. This section describes the latter use of this parameter.</p>
<p>There is a <code class="codeph">LOG_ARCHIVE_DEST_STATE_</code><span class="italic"><code class="codeph">n</code></span> database initialization parameter (where <span class="italic"><code class="codeph">n</code></span> is an integer from 1 to 31) that corresponds to each <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter. This parameter is used to enable or disable the corresponding redo destination. <a href="log_transport.htm#GUID-45DFFA7C-3967-4B46-8C2C-DBD22A4D6A74__BABGFCHH" title="Describes the LOG_ARCHIVE_DEST_STATE_n parameter attributes: ENABLE, DEFER, ALTERNATE, and RESET.">Table 7-1</a> shows the valid values that can be assigned to this parameter.</p>
<div class="tblformal" id="GUID-45DFFA7C-3967-4B46-8C2C-DBD22A4D6A74__BABGFCHH">
<p class="titleintable">Table 7-1 LOG_ARCHIVE_DEST_STATE_n Initialization Parameter Values</p>
<table class="cellalignment2269" title="LOG_ARCHIVE_DEST_STATE_n Initialization Parameter Values" summary="Describes the LOG_ARCHIVE_DEST_STATE_n parameter attributes: ENABLE, DEFER, ALTERNATE, and RESET.">
<thead>
<tr class="cellalignment2253">
<th class="cellalignment2293" id="d13930e805">Value</th>
<th class="cellalignment2294" id="d13930e808">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2253">
<td class="cellalignment2295" id="d13930e813" headers="d13930e805">
<p><code class="codeph">ENABLE</code></p>
</td>
<td class="cellalignment2296" headers="d13930e813 d13930e808">
<p><a id="d13930e819" class="indexterm-anchor"></a><a id="d13930e825" class="indexterm-anchor"></a>Redo transport services can transmit redo data to this destination. This is the default.</p>
</td>
</tr>
<tr class="cellalignment2253">
<td class="cellalignment2295" id="d13930e831" headers="d13930e805">
<p><code class="codeph">DEFER</code></p>
</td>
<td class="cellalignment2296" headers="d13930e831 d13930e808">
<p><a id="d13930e837" class="indexterm-anchor"></a><a id="d13930e843" class="indexterm-anchor"></a>Redo transport services will not transmit redo data to this destination.</p>
</td>
</tr>
<tr class="cellalignment2253">
<td class="cellalignment2295" id="d13930e849" headers="d13930e805">
<p><code class="codeph">ALTERNATE</code></p>
</td>
<td class="cellalignment2296" headers="d13930e849 d13930e808">
<p>This destination will become enabled if communication to its associated destination fails.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>A redo transport destination is configured by setting the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter to a character string that includes one or more attributes. This section briefly describes the most commonly used attributes. See <a href="log_arch_dest_param.htm#GUID-B04FC22C-F0B0-440F-BAF4-182EE547FCC1">LOG_ARCHIVE_DEST_n Parameter Attributes</a> for a full description of all <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter attributes.</p>
<p>The <code class="codeph">SERVICE</code> attribute, which is a mandatory attribute for a redo transport destination, must be the first attribute specified in the attribute list. The <code class="codeph">SERVICE</code> attribute is used to specify the Oracle Net service name used to connect to the redo transport destination. The service name must be resolvable through an Oracle Net naming method to an Oracle Net connect descriptor that matches the Oracle Net listener(s) at the redo transport destination. The connect descriptor must specify that a dedicated server connection be used, unless that is the default connection type for the redo transport destination.</p>
<div class="infoboxnotealso" id="GUID-45DFFA7C-3967-4B46-8C2C-DBD22A4D6A74__GUID-1149A5E0-2FBD-48E4-9D9B-6E4A7B80318F">
<p class="notep1">See Also:</p>
<p><a class="olink NETAG006" target="_blank" href="../NETAG/gettingstart.htm#NETAG006"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for information about Oracle Net service names, connect descriptors, listeners, and network security</p>
</div>
<p>The <code class="codeph">SYNC</code> attribute is used to specify that the synchronous redo transport mode be used to send redo data to a redo transport destination.</p>
<p>The <code class="codeph">ASYNC</code> attribute is used to specify that the asynchronous redo transport mode be used to send redo data to a redo transport destination. The asynchronous redo transport mode will be used if neither the <code class="codeph">SYNC</code> nor the <code class="codeph">ASYNC</code> attribute is specified.</p>
<p>The <code class="codeph">NET_TIMEOUT</code> attribute is used to specify how long the <code class="codeph">LGWR</code> process will block waiting for an acknowledgement that redo data has been successfully received by a destination that uses the synchronous redo transport mode. If an acknowledgement is not received within <code class="codeph">NET_TIMEOUT</code> seconds, the redo transport connection is terminated and an error is logged.</p>
<p>Oracle recommends that the <code class="codeph">NET_TIMEOUT</code> attribute be specified whenever the synchronous redo transport mode is used, so that the maximum duration of a redo source database stall caused by a redo transport fault can be precisely controlled. See <a href="log_transport.htm#GUID-666D0186-B639-4DB2-9993-D1947230C50F">Monitoring Synchronous Redo Transport Response Time</a> for information about monitoring synchronous redo transport mode response time.</p>
<p>The <code class="codeph">AFFIRM</code> attribute is used to specify that redo received from a redo source database is not acknowledged until it has been written to the standby redo log. The <code class="codeph">NOAFFIRM</code> attribute is used to specify that received redo is acknowledged without waiting for received redo to be written to the standby redo log.</p>
<p>The <code class="codeph">DB_UNIQUE_NAME</code> attribute is used to specify the <code class="codeph">DB_UNIQUE_NAME</code> of a redo transport destination. The <code class="codeph">DB_UNIQUE_NAME</code> attribute must be specified if the <code class="codeph">LOG_ARCHIVE_CONFIG</code> database initialization parameter has been defined and its value includes a <code class="codeph">DG_CONFIG</code> list.</p>
<p>If the <code class="codeph">DB_UNIQUE_NAME</code> attribute is specified, its value must match one of the <code class="codeph">DB_UNIQUE_NAME</code> values in the <code class="codeph">DG_CONFIG</code> list. It must also match the value of the <code class="codeph">DB_UNIQUE_NAME</code> database initialization parameter at the redo transport destination. If either match fails, an error is logged and redo transport will not be possible to that destination.</p>
<p>The <code class="codeph">VALID_FOR</code> attribute is used to specify when redo transport services transmits redo data to a redo transport destination. Oracle recommends that the <code class="codeph">VALID_FOR</code> attribute be specified for each redo transport destination at every site in an Oracle Data Guard configuration so that redo transport services will continue to send redo data to all standby databases after a role transition, regardless of which standby database assumes the primary role.</p>
<p>The <code class="codeph">REOPEN</code> attribute is used to specify the minimum number of seconds between automatic reconnect attempts to a redo transport destination that is inactive because of a previous error.</p>
<p>The <code class="codeph">COMPRESSION</code> attribute is used to specify that redo data is transmitted to a redo transport destination in compressed form. Redo transport compression can significantly improve redo transport performance on network links with low bandwidth and high latency.</p>
<p>Redo transport compression is a feature of the Oracle Advanced Compression option. You must purchase a license for this option before using the redo transport compression feature.</p>
<p>The following example uses all of the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> attributes described in this section. A <code class="codeph">DB_UNIQUE_NAME</code> has been specified for both destinations, as has the use of compression. If a redo transport fault occurs at either destination, redo transport will attempt to reconnect to that destination, but not more frequently than once every 60 seconds.</p>
<pre dir="ltr">DB_UNIQUE_NAME=BOSTON
LOG_ARCHIVE_CONFIG=&#39;DG_CONFIG=(BOSTON,CHICAGO,HARTFORD)&#39; 
LOG_ARCHIVE_DEST_2=&#39;SERVICE=CHICAGO ASYNC NOAFFIRM VALID_FOR=(ONLINE_LOGFILE, 
PRIMARY_ROLE) REOPEN=60 COMPRESSION=ENABLE  DB_UNIQUE_NAME=CHICAGO&#39; 
LOG_ARCHIVE_DEST_STATE_2=&#39;ENABLE&#39; 
LOG_ARCHIVE_DEST_3=&#39;SERVICE=HARTFORD SYNC AFFIRM NET_TIMEOUT=30 
VALID_FOR=(ONLINE_LOGFILE,PRIMARY_ROLE) REOPEN=60 COMPRESSION=ENABLE   
DB_UNIQUE_NAME=HARTFORD&#39; 
LOG_ARCHIVE_DEST_STATE_3=&#39;ENABLE&#39;
</pre>
<div class="infobox-note" id="GUID-45DFFA7C-3967-4B46-8C2C-DBD22A4D6A74__GUID-8212D018-8BBF-43F8-BB8D-15B4454EBA9C">
<p class="notep1">Note:</p>
<p>Configuration for Zero Data Loss Recovery Appliance (Recovery Appliance) is identical to configuration for any standby database. So in the preceding example, because Chicago is an <code class="codeph">ASYNC</code> destination, it could be either a standby database or a Recovery Appliance. (Synchronous redo transport is not supported for Recovery Appliance)</p>
</div>
</div>
<!-- class="section" --></div>
<a id="SBYDB4750"></a>
<div class="props_rev_3"><a id="GUID-DC156D33-A034-4766-85BF-ADF414C19945"></a>
<h4 id="SBYDB-GUID-DC156D33-A034-4766-85BF-ADF414C19945" class="sect4"><span class="enumeration_section">7.2.2.1</span> Viewing Attributes With V$ARCHIVE_DEST</h4>
<div>
<div class="section">
<p>The <code class="codeph">V$ARCHIVE_DEST</code> view can be queried to see the current settings and status for each redo transport destination.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="SBYDB4751"></a>
<div class="props_rev_3"><a id="GUID-AF64C4FE-2D16-4197-953A-25930F36CFA8"></a>
<h3 id="SBYDB-GUID-AF64C4FE-2D16-4197-953A-25930F36CFA8" class="sect3"><span class="enumeration_section">7.2.3</span> Configuring an Oracle Database to Receive Redo Data</h3>
<div>
<p>This section describes how to configure a redo transport destination to receive<a id="d13930e1149" class="indexterm-anchor"></a> and to archive redo data from a redo source database.</p>
<p>The following topics are discussed:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="log_transport.htm#GUID-E6EC6104-3C38-482D-B807-A0E84ECFB937">Managing Standby Redo Logs</a></p>
</li>
<li>
<p><a href="log_transport.htm#GUID-7F508757-E1BA-4608-8D0E-946C3C765F61">Cases Where Redo Is Written Directly To an Archived Redo Log File</a></p>
</li>
</ul>
</div>
<a id="SBYDB4752"></a>
<div class="props_rev_3"><a id="GUID-E6EC6104-3C38-482D-B807-A0E84ECFB937"></a>
<h4 id="SBYDB-GUID-E6EC6104-3C38-482D-B807-A0E84ECFB937" class="sect4"><span class="enumeration_section">7.2.3.1</span> Managing Standby Redo Logs</h4>
<div>
<p>The synchronous and asynchronous redo transport modes require that a redo transport destination have a standby redo log. A standby redo log<a id="d13930e1237" class="indexterm-anchor"></a> is used to store redo received from another Oracle database. Standby redo logs are structurally identical to redo logs, and are created and managed using the same SQL statements used to create and manage redo logs.</p>
<p>Redo received from another Oracle database via redo transport is written to the current standby redo log group by a remote file server (RFS) foreground process. When a log switch occurs on the redo source database, incoming redo is then written to the next standby redo log group, and the previously used standby redo log group is archived by an <code class="codeph">ARC</code><span class="italic"><code class="codeph">n</code></span> background process.</p>
<p>The process of sequentially filling and then archiving redo log file groups at a redo source database is mirrored at each redo transport destination by the sequential filling and archiving of standby redo log groups.</p>
<p>Each standby redo log file must be at least as large as the largest redo log file in the redo log of the redo source database. For administrative ease, Oracle recommends that all redo log files in the redo log at the redo source database and the standby redo log at a redo transport destination be of the same size.</p>
<p>The standby redo log must have at least one more redo log group than the redo log at the redo source database, for each redo thread at the redo source database. At the redo source database, query the <code class="codeph">V$LOG</code> view to determine how many redo log groups are in the redo log at the redo source database and query the <code class="codeph">V$THREAD</code> view to determine how many redo threads exist at the redo source database.</p>
<p>Perform the following query on a redo source database to determine the size of each log file and the number of log groups in the redo log:</p>
<pre dir="ltr">SQL&gt; SELECT GROUP#, BYTES FROM V$LOG;
</pre>
<p>Perform the following query on a redo destination database to determine the size of each log file and the number of log groups in the standby redo log:</p>
<pre dir="ltr">SQL&gt; SELECT GROUP#, BYTES FROM V$STANDBY_LOG;
</pre>
<p>If the redo source database is an Oracle Real Applications Cluster (Oracle RAC) or Oracle Real Application Clusters One Node (Oracle RAC One Node) database, query the <code class="codeph">V$LOG</code> view at the redo source database to determine how many redo threads exist and specify the corresponding thread numbers when adding redo log groups to the standby redo log.</p>
<p>The following sample SQL statements create a standby redo log at a database that is to receive redo from a redo source database that has two redo threads:</p>
<pre dir="ltr">SQL&gt; ALTER DATABASE ADD STANDBY LOGFILE THREAD 1 SIZE 500M;
SQL&gt; ALTER DATABASE ADD STANDBY LOGFILE THREAD 1 SIZE 500M;
SQL&gt; ALTER DATABASE ADD STANDBY LOGFILE THREAD 1 SIZE 500M;
SQL&gt; ALTER DATABASE ADD STANDBY LOGFILE THREAD 2 SIZE 500M;
SQL&gt; ALTER DATABASE ADD STANDBY LOGFILE THREAD 2 SIZE 500M;
SQL&gt; ALTER DATABASE ADD STANDBY LOGFILE THREAD 2 SIZE 500M;
</pre>
<div class="infobox-note" id="GUID-E6EC6104-3C38-482D-B807-A0E84ECFB937__GUID-45428B55-0C4E-47B6-B422-EA18D87B1513">
<p class="notep1">Note:</p>
<p>Whenever a redo log group is added to a primary database, a log group must also be added to the standby redo log of each standby database in the configuration. Otherwise, the standby database may become unsynchronized after a primary log switch, which could temporarily prevent a zero data loss failover or cause a primary database operating in maximum protection mode to shut down.</p>
</div>
</div>
</div>
<a id="SBYDB5113"></a>
<div class="props_rev_3"><a id="GUID-7F508757-E1BA-4608-8D0E-946C3C765F61"></a>
<h4 id="SBYDB-GUID-7F508757-E1BA-4608-8D0E-946C3C765F61" class="sect4"><span class="enumeration_section">7.2.3.2</span> Cases Where Redo Is Written Directly To an Archived Redo Log File</h4>
<div>
<p>Redo received by a standby database is written directly to an archived redo log file if a standby redo log group is not available or if the redo was sent to resolve a redo gap. When this occurs, redo is written to the location specified by the <code class="codeph">LOCATION</code> attribute of one <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter that is valid for archiving redo received from another database. The <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter that is used for this purpose is determined when the standby database is mounted, and this choice is reevaluated each time a <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter is modified.</p>
</div>
</div>
</div>
</div>
<a id="SBYDB5122"></a>
<div class="props_rev_3"><a id="GUID-34BCB162-D996-4678-97F1-497805764950"></a>
<h2 id="SBYDB-GUID-34BCB162-D996-4678-97F1-497805764950" class="sect2"><span class="enumeration_section">7.3</span> Cascaded Redo Transport Destinations</h2>
<div>
<div class="infobox-note" id="GUID-34BCB162-D996-4678-97F1-497805764950__GUID-A59A849C-781C-4060-B2FC-0F52E85548CB">
<p class="notep1">Note:</p>
<p>To use the Oracle Data Guard cascading redo transport destination feature described in this section, you should be using Oracle Database 11<span class="italic">g</span> Release 2 (11.2.0.2) or higher.</p>
</div>
<p>A cascaded<a id="d13930e1459" class="indexterm-anchor"></a> redo transport destination (also known as a terminal destination<a id="d13930e1462" class="indexterm-anchor"></a>) receives primary database redo indirectly from a standby database rather than directly from a primary database.</p>
<p>A physical standby database that cascades primary database redo to one or more terminal destinations at the same time it is applying changes to its local database files is known as a cascading standby database.</p>
<p>With cascading, the overhead associated with performing redo transport is offloaded from a primary database to a cascading standby database.</p>
<p>A cascading standby database can cascade primary database redo to up to 30 terminal destinations.</p>
<p>As of Oracle Database 12<span class="italic">c</span> Release 1 (12.1), a cascading standby database can either cascade redo in real-time<a id="d13930e1476" class="indexterm-anchor"></a><a id="d13930e1478" class="indexterm-anchor"></a><a id="d13930e1482" class="indexterm-anchor"></a> (as it is being written to the standby redo log file) or non-real-time (as complete standby redo log files are being archived on the cascading standby).</p>
<p>Cascading has the following restrictions:<a id="d13930e1489" class="indexterm-anchor"></a><a id="d13930e1493" class="indexterm-anchor"></a></p>
<ul style="list-style-type: disc;">
<li>
<p>Only physical standby databases can cascade redo.</p>
</li>
<li>
<p>Real-time cascading requires a license for the Oracle Active Data Guard option.</p>
</li>
<li>
<p>Non-real-time cascading is supported on destinations 1 through 10 only. (Real-time cascading is supported on all destinations.)</p>
</li>
</ul>
<div class="infobox-note" id="GUID-34BCB162-D996-4678-97F1-497805764950__GUID-F36FDDF8-2F72-423A-B0E7-2331A1BF6CA9">
<p class="notep1">Note:</p>
<p>See <a href="upgrades.htm#GUID-784C06D8-9CFA-4244-BA55-D7003CAB3F1E">Before You Upgrade the Oracle Database Software</a> for information about how to handle cascaded redo transport destinations during an Oracle Database upgrade.</p>
</div>
<p>The rest of this section contains the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="log_transport.htm#GUID-10CFB766-F688-4CD8-80CC-7824A522D1DF">Configuring a Terminal Destination</a></p>
</li>
<li>
<p><a href="log_transport.htm#GUID-5CE6C2AB-86AA-4402-AD7E-0820F3935827">Cascading Scenarios</a></p>
</li>
</ul>
</div>
<a id="SBYDB5124"></a><a id="SBYDB5123"></a>
<div class="props_rev_3"><a id="GUID-10CFB766-F688-4CD8-80CC-7824A522D1DF"></a>
<h3 id="SBYDB-GUID-10CFB766-F688-4CD8-80CC-7824A522D1DF" class="sect3"><span class="enumeration_section">7.3.1</span> Configuring a Terminal Destination</h3>
<div>
<div class="section">
<p>Perform the following steps to configure a terminal<a id="d13930e1598" class="indexterm-anchor"></a> destination:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Select a physical standby database to configure as a cascading standby database.</span></li>
<li class="stepexpand"><span>On the cascading standby database, configure the <code class="codeph">FAL_SERVER</code> database initialization parameter with the Oracle Net alias of the primary database or of a standby database that receives redo directly from the primary database.</span></li>
<li class="stepexpand"><span>On the cascading standby database, configure a <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> database initialization parameter for one or more terminal destinations. Configure the <code class="codeph">SERVICE</code> attribute of this destination with the Oracle Net alias of the terminal destination, and the <code class="codeph">VALID</code> attribute to be valid for archival of the standby redo log while in the standby role.</span>
<div>
<p>If you specify <code class="codeph">ASYNC</code> transport mode on destinations 1 through 10, then redo is shipped in real-time. If you do not specify a transport mode or you specify <code class="codeph">SYNC</code> on destinations 1 through 10, then redo is shipped in non-real-time. Destinations 11 through 31 operate only in <code class="codeph">ASYNC</code> (real-time) transport mode.</p>
</div>
</li>
<li class="stepexpand"><span>At the terminal destination, configure the <code class="codeph">FAL_SERVER</code> database initialization parameter with the Oracle Net alias of the cascading standby database or of another standby database that is directly connected to the primary database. Although it is also possible to specify the primary database, this would defeat the purpose of cascading, which is to reduce the redo transport overhead on the primary database.</span></li>
<li class="stepexpand"><span><a href="log_transport.htm#GUID-10CFB766-F688-4CD8-80CC-7824A522D1DF__BEHHDCCI">Example 7-1</a> shows some of the database initialization parameters used by the members of an Oracle Data Guard configuration that includes a primary database named <code class="codeph">boston</code> that sends redo to a local physical standby database named <code class="codeph">boston2</code>, which then cascades primary database redo to a remote physical standby database named <code class="codeph">denver</code>.</span>
<div>
<p>A <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> database initialization parameter could also be configured on database <code class="codeph">boston</code> that is valid for standby redo log archival to database <code class="codeph">denver</code> when database <code class="codeph">boston</code> is in the standby role. This would allow redo cascading to database <code class="codeph">denver</code> to continue if a switchover is performed between database <code class="codeph">boston</code> and database <code class="codeph">boston2</code>.</p>
</div>
</li>
</ol>
<div class="example" id="GUID-10CFB766-F688-4CD8-80CC-7824A522D1DF__BEHHDCCI">
<p class="titleinexample">Example 7-1 Some of the Initialization Parameters Used When Cascading Redo</p>
<p><span class="bold">Primary</span> <span class="bold">Database</span></p>
<pre dir="ltr">DB_UNIQUE_NAME=boston
 
FAL_SERVER=boston2
 
LOG_ARCHIVE_CONFIG=&#39;DG_CONFIG=(boston,boston2,denver)&#39;
 
LOG_ARCHIVE_DEST_1=&#39;LOCATION=USE_DB_RECOVERY_FILE_DEST
VALID_FOR=(ALL_LOGFILES,ALL_ROLES) DB_UNIQUE_NAME=boston&#39;
 
LOG_ARCHIVE_DEST_2=&#39;SERVICE=boston2 SYNC
VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE) DB_UNIQUE_NAME=boston2&#39;
</pre>
<p><span class="bold">Cascading Physical Standby Database</span></p>
<pre dir="ltr">DB_UNIQUE_NAME=boston2
 
FAL_SERVER=boston
 
LOG_ARCHIVE_CONFIG= &#39;DG_CONFIG=(boston,boston2,denver)&#39;
 
LOG_ARCHIVE_DEST_1=&#39;LOCATION= USE_DB_RECOVERY_FILE_DEST
VALID_FOR=(ALL_LOGFILES,ALL_ROLES) DB_UNIQUE_NAME=boston2&#39;
 
LOG_ARCHIVE_DEST_2= &#39;SERVICE=denver
VALID_FOR=(STANDBY_LOGFILES,STANDBY_ROLE) DB_UNIQUE_NAME=denver&#39;
 
</pre>
<p><span class="bold">Cascaded Physical Standby Database</span></p>
<pre dir="ltr">DB_UNIQUE_NAME=denver
 
FAL_SERVER=boston2
 
LOG_ARCHIVE_CONFIG=&#39;DG_CONFIG=(boston,boston2,denver)&#39;
 
LOG_ARCHIVE_DEST_1=&#39;LOCATION= USE_DB_RECOVERY_FILE_DEST
VALID_FOR=(ALL_LOGFILES,ALL_ROLES) DB_UNIQUE_NAME=denver&#39;
</pre></div>
<!-- class="example" -->
<div class="section">
<p>For information about validating a configuration after you set up a cascading environment, see <span class="q">&#34;<a href="log_transport.htm#GUID-A0AAA20B-4DF8-4698-A7E0-3BED5A2C11E9">Validating a Configuration</a>&#34;</span>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="SBYDB5126"></a>
<div class="props_rev_3"><a id="GUID-5CE6C2AB-86AA-4402-AD7E-0820F3935827"></a>
<h3 id="SBYDB-GUID-5CE6C2AB-86AA-4402-AD7E-0820F3935827" class="sect3"><span class="enumeration_section">7.3.2</span> Cascading Scenarios</h3>
<div>
<p>This section describes two typical cascading scenarios</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="log_transport.htm#GUID-D1F7299F-0924-46AA-B12D-D2579F8E0FCC">Cascading to a Physical Standby</a></p>
</li>
<li>
<p><a href="log_transport.htm#GUID-09B8562C-2A31-4B7C-832D-027ED07BE5D4">Cascading to Multiple Physical Standbys</a></p>
</li>
</ul>
</div>
<a id="SBYDB5127"></a>
<div class="props_rev_3"><a id="GUID-D1F7299F-0924-46AA-B12D-D2579F8E0FCC"></a>
<h4 id="SBYDB-GUID-D1F7299F-0924-46AA-B12D-D2579F8E0FCC" class="sect4"><span class="enumeration_section">7.3.2.1</span> Cascading to a Physical Standby</h4>
<div>
<div class="section">
<p>In this scenario, you have a mission-critical primary database. This database has stringent performance and data protection requirements, so you have decided to deploy a local physical standby database to provide zero data loss protection and a remote, cascaded physical standby database to protect against regional disasters at the primary and local standby database sites.</p>
<p>You can achieve the objectives described above by performing the following steps:</p>
</div>
<!-- class="section" -->
<ol>
<li><span>Create a physical standby database at a local site.</span></li>
<li><span>Create a physical standby database at a site that is sufficiently remote to provide protection against regional disasters at the primary and local standby database sites.</span></li>
<li><span>Configure the local standby database as a <code class="codeph">SYNC</code> redo transport destination of the primary database.</span></li>
<li><span>Configure the remote physical standby database as a terminal destination of the local standby database.</span></li>
</ol>
</div>
</div>
<a id="SBYDB5128"></a>
<div class="props_rev_3"><a id="GUID-09B8562C-2A31-4B7C-832D-027ED07BE5D4"></a>
<h4 id="SBYDB-GUID-09B8562C-2A31-4B7C-832D-027ED07BE5D4" class="sect4"><span class="enumeration_section">7.3.2.2</span> Cascading to Multiple Physical Standbys</h4>
<div>
<div class="section">
<p>In this scenario, you have a primary database in North America and you want to deploy three replicas of this database in Europe to support read-only reporting applications. For cost and performance reasons, you do not want to maintain network links from North America to each of your European sites.</p>
<p>You can achieve the objectives described above by performing the following steps:</p>
</div>
<!-- class="section" -->
<ol>
<li><span>Create a network link between your North American site and one of your European sites.</span></li>
<li><span>Create a physical standby database at each of your European sites.</span></li>
<li><span>Open your physical standby databases in real-time query mode, as described in <a href="manage_ps.htm#GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4">Opening a Physical Standby Database</a> .</span></li>
<li><span>Configure the physical standby database at the European endpoint of your transatlantic network link to cascade redo to your other European standby databases.</span></li>
<li><span>Configure the other two physical standby databases as terminal destinations of the cascading standby database configured in step 4.</span></li>
</ol>
</div>
</div>
</div>
</div>
<a id="SBYDB5254"></a>
<div class="props_rev_3"><a id="GUID-988FF469-5815-4FC3-B529-AE1BE9ACD67B"></a>
<h2 id="SBYDB-GUID-988FF469-5815-4FC3-B529-AE1BE9ACD67B" class="sect2"><span class="enumeration_section">7.4</span> Data Protection Considerations for Cascading Standbys</h2>
<div>
<p>Real-time cascade enables a cascaded standby database to provide nearly the same level of data protection as any standby database that receives redo directly from a primary database using asynchronous redo transport. However, although redo is forwarded in real-time, the fact that there is a second network hop creates the potential for additional data loss if an outage prevents all redo from reaching the terminal destination.</p>
<p>When your configuration includes cascading standbys, each destination should have a <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter defined that points back to its source for use during a failover.</p>
</div>
</div>
<a id="SBYDB5407"></a>
<div class="props_rev_3"><a id="GUID-A0AAA20B-4DF8-4698-A7E0-3BED5A2C11E9"></a>
<h2 id="SBYDB-GUID-A0AAA20B-4DF8-4698-A7E0-3BED5A2C11E9" class="sect2"><span class="enumeration_section">7.5</span> Validating a Configuration</h2>
<div>
<div class="section">
<p>To validate an Oracle Data Guard configuration after you create it, query the <code class="codeph">V$DATAGUARD_CONFIG</code> view from any database in the configuration to display the unique database names defined with the <code class="codeph">DB_UNIQUE_NAME</code> and <code class="codeph">LOG_ARCHIVE_CONFIG</code> initialization parameters.</p>
<div class="infoboxnotealso" id="GUID-A0AAA20B-4DF8-4698-A7E0-3BED5A2C11E9__GUID-15C4DCEF-C9AE-45EB-9D25-4009B9E0D166">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink REFRN30053" target="_blank" href="../REFRN/GUID-694A8C09-F2F9-42CE-B569-906D4E05C6FF.htm#REFRN30053"><span class="italic">Oracle Database Reference</span></a> for more information about the <code class="codeph">V$DATAGUARD_CONFIG</code> view</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="SBYDB4756"></a>
<div class="props_rev_3"><a id="GUID-282DA542-4C7C-40E2-A3CB-6486CDCF0C0A"></a>
<h2 id="SBYDB-GUID-282DA542-4C7C-40E2-A3CB-6486CDCF0C0A" class="sect2"><span class="enumeration_section">7.6</span> Monitoring Redo Transport Services</h2>
<div>
<p>This section discusses the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="log_transport.htm#GUID-A9239CAA-DCE9-4108-9516-980FF37A3AE5">Monitoring Redo Transport Status</a></p>
</li>
<li>
<p><a href="log_transport.htm#GUID-666D0186-B639-4DB2-9993-D1947230C50F">Monitoring Synchronous Redo Transport Response Time</a></p>
</li>
<li>
<p><a href="log_transport.htm#GUID-05CE1D49-3DEE-4AAC-A887-55ED436912AF">Redo Gap Detection and Resolution</a></p>
</li>
<li>
<p><a href="log_transport.htm#GUID-EB15DAF9-40A8-4185-B4C2-F8BB4FBD33CE">Redo Transport Services Wait Events</a></p>
</li>
</ul>
</div>
<a id="SBYDB4757"></a>
<div class="props_rev_3"><a id="GUID-A9239CAA-DCE9-4108-9516-980FF37A3AE5"></a>
<h3 id="SBYDB-GUID-A9239CAA-DCE9-4108-9516-980FF37A3AE5" class="sect3"><span class="enumeration_section">7.6.1</span> Monitoring Redo Transport Status</h3>
<div>
<div class="section">
<p>This section describes the steps used to monitor redo transport status<a id="d13930e2313" class="indexterm-anchor"></a> on a redo source database.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Perform the following query on the redo source database to determine the most recently archived sequence number for each thread:</span>
<div>
<pre dir="ltr">SQL&gt; SELECT MAX(SEQUENCE#), THREAD# FROM V$ARCHIVED_LOG -
&gt; WHERE RESETLOGS_CHANGE# = (SELECT MAX(RESETLOGS_CHANGE#) FROM V$ARCHIVED_LOG) -
&gt; GROUP BY THREAD#;
</pre></div>
</li>
<li class="stepexpand"><span>Perform the following query on the redo source database to determine the most recently archived redo log file at each redo transport destination:</span>
<div>
<pre dir="ltr">SQL&gt; SELECT DESTINATION, STATUS, ARCHIVED_THREAD#, ARCHIVED_SEQ# -
&gt; FROM V$ARCHIVE_DEST_STATUS -
&gt; WHERE STATUS &lt;&gt; &#39;DEFERRED&#39; AND STATUS &lt;&gt; &#39;INACTIVE&#39;;
 
DESTINATION         STATUS  ARCHIVED_THREAD#  ARCHIVED_SEQ#
------------------  ------  ----------------  -------------
/private1/prmy/lad   VALID                 1            947
standby1             VALID                 1            947
</pre>
<p>The most recently archived redo log file should be the same for each destination. If it is not, a status other than <code class="codeph">VALID</code> may identify an error encountered during the archival operation to that destination.</p>
</div>
</li>
<li class="stepexpand"><span>Perform a query at a redo source database to find out if an archived redo log file has been received at a particular redo transport destination. Each destination has an ID number associated with it. You can query the <code class="codeph">DEST_ID</code> column of the <code class="codeph">V$ARCHIVE_DEST</code> view on a database to identify each destination&#39;s ID number.</span>
<div>
<p>Assume that destination 1 points to the local archived redo log and that destination 2 points to a redo transport destination. Perform the following query at the redo source database to find out if any log files are missing at the redo transport destination:</p>
<pre dir="ltr">SQL&gt; SELECT LOCAL.THREAD#, LOCAL.SEQUENCE# FROM -
&gt; (SELECT THREAD#, SEQUENCE# FROM V$ARCHIVED_LOG WHERE DEST_ID=1) -
&gt; LOCAL WHERE -
&gt; LOCAL.SEQUENCE# NOT IN -
&gt; (SELECT SEQUENCE# FROM V$ARCHIVED_LOG WHERE DEST_ID=2 AND -
&gt; THREAD# = LOCAL.THREAD#);
 
THREAD#    SEQUENCE#
---------  ---------
  1        12
  1        13
  1        14
</pre></div>
</li>
<li class="stepexpand"><span>Set the <code class="codeph">LOG_ARCHIVE_TRACE</code> database initialization parameter at a redo source database and at each redo transport destination to trace redo transport progress. See <a href="trace.htm#GUID-515A27B2-5163-42E1-A78D-B6E979BA54EB">Setting Archive Tracing</a> for complete details and examples.</span></li>
</ol>
</div>
</div>
<a id="SBYDB00546"></a>
<div class="props_rev_3"><a id="GUID-666D0186-B639-4DB2-9993-D1947230C50F"></a>
<h3 id="SBYDB-GUID-666D0186-B639-4DB2-9993-D1947230C50F" class="sect3"><span class="enumeration_section">7.6.2</span> Monitoring Synchronous Redo Transport Response Time</h3>
<div>
<p>The <code class="codeph">V$REDO_DEST_RESP_HISTOGRAM</code> view<a id="d13930e2434" class="indexterm-anchor"></a> contains response time data for each redo transport destination. This response time data is maintained for redo transport messages sent via the synchronous redo transport mode.</p>
<p>The data for each destination consists of a series of rows, with one row for each response time. To simplify record keeping, response times are rounded up to the nearest whole second for response times less than 300 seconds. Response times greater than 300 seconds are round up to 600, 1200, 2400, 4800, or 9600 seconds.</p>
<p>Each row contains four columns: <code class="codeph">FREQUENCY</code>, <code class="codeph">DURATION</code>, <code class="codeph">DEST_ID</code>, and <code class="codeph">TIME</code>.</p>
<p>The <code class="codeph">FREQUENCY</code> column contains the number of times that a given response time has been observed. The <code class="codeph">DURATION</code> column corresponds to the response time. The <code class="codeph">DEST_ID</code> column identifies the destination. The <code class="codeph">TIME</code> column contains a timestamp taken when the row was last updated.</p>
<p>The response time data in this view is useful for identifying synchronous redo transport mode performance issues that can affect transaction throughput on a redo source database. It is also useful for tuning the <code class="codeph">NET_TIMEOUT</code> attribute.</p>
<p>The next three examples show example queries for destination 2, which corresponds to the <code class="codeph">LOG_ARCHIVE_DEST_2</code> parameter. To display response time data for a different destination, simply change the <code class="codeph">DEST_ID</code> in the query.</p>
<p>Perform the following query on a redo source database to display the response time histogram for destination 2:</p>
<pre dir="ltr">SQL&gt; SELECT FREQUENCY, DURATION FROM -
&gt; V$REDO_DEST_RESP_HISTOGRAM WHERE DEST_ID=2 AND FREQUENCY&gt;1;
</pre>
<p>Perform the following query on a redo source database to display the slowest response time for destination 2:</p>
<pre dir="ltr">SQL&gt; SELECT max(DURATION) FROM V$REDO_DEST_RESP_HISTOGRAM -
&gt; WHERE DEST_ID=2 AND FREQUENCY&gt;1;
</pre>
<p>Perform the following query on a redo source database to display the fastest response time for destination 2:</p>
<pre dir="ltr">SQL&gt; SELECT min( DURATION) FROM V$REDO_DEST_RESP_HISTOGRAM -
&gt; WHERE DEST_ID=2 AND FREQUENCY&gt;1;
</pre>
<div class="infobox-note" id="GUID-666D0186-B639-4DB2-9993-D1947230C50F__GUID-0D702739-CD2B-4F1B-90D1-B7B09853C2E2">
<p class="notep1">Note:</p>
<p>The highest observed response time for a destination cannot exceed the highest specified <code class="codeph">NET_TIMEOUT</code> value specified for that destination, because synchronous redo transport mode sessions are terminated if a redo transport destination does not respond to a redo transport message within <code class="codeph">NET_TIMEOUT</code> seconds.</p>
</div>
</div>
</div>
<a id="SBYDB00718"></a>
<div class="props_rev_3"><a id="GUID-05CE1D49-3DEE-4AAC-A887-55ED436912AF"></a>
<h3 id="SBYDB-GUID-05CE1D49-3DEE-4AAC-A887-55ED436912AF" class="sect3"><span class="enumeration_section">7.6.3</span> Redo Gap Detection and Resolution</h3>
<div>
<p>A redo gap<a id="d13930e2575" class="indexterm-anchor"></a> occurs whenever redo transmission is interrupted. When redo transmission resumes, redo transport services<a id="d13930e2578" class="indexterm-anchor"></a> automatically detects the redo gap and resolves it by sending the missing redo to the destination.</p>
<p>The time needed to resolve a redo gap is directly proportional to the size of the gap and inversely proportional to the effective throughput of the network link between the redo source database and the redo transport destination. Redo transport services has two options that may reduce redo gap resolution<a id="d13930e2585" class="indexterm-anchor"></a> time when low performance network links are used:</p>
<ul style="list-style-type: disc;">
<li>
<p>Redo Transport Compression</p>
<p>The <code class="codeph">COMPRESSION</code> attribute of the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter is used to specify that redo data be compressed before transmission to the destination.</p>
</li>
<li>
<p>Parallel Redo Transport Network Sessions</p>
<p>The <code class="codeph">MAX_CONNECTIONS</code> attribute of the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter can be used to specify that more than one network session be used to send the redo needed to resolve a redo gap.</p>
</li>
</ul>
<p>See <a href="log_arch_dest_param.htm#GUID-B04FC22C-F0B0-440F-BAF4-182EE547FCC1">LOG_ARCHIVE_DEST_n Parameter Attributes</a> for more information about the <code class="codeph">COMPRESSION</code> and <code class="codeph">MAX_CONNECTIONS</code> attributes.</p>
</div>
<a id="SBYDB4758"></a>
<div class="props_rev_3"><a id="GUID-97EB433B-4125-4082-9276-2454349BC4F8"></a>
<h4 id="SBYDB-GUID-97EB433B-4125-4082-9276-2454349BC4F8" class="sect4"><span class="enumeration_section">7.6.3.1</span> Manual Gap Resolution</h4>
<div>
<div class="section">
<p>In some situations, gap resolution cannot be performed automatically and it must be performed<a id="d13930e2702" class="indexterm-anchor"></a> manually. For example, redo gap resolution must be performed manually on a logical standby database if the primary database is unavailable.</p>
<p>Perform the following query at the physical standby database to determine if there is redo gap on a physical standby database:</p>
<pre dir="ltr">SQL&gt; SELECT * FROM V$ARCHIVE_GAP;

    THREAD# LOW_SEQUENCE# HIGH_SEQUENCE#
-----------  -------------  --------------
          1              7              10
</pre>
<p>The output from the previous example indicates that the physical standby database is currently missing log files from sequence 7 to sequence 10 for thread 1.</p>
<p>Perform the following query on the primary database to locate the archived redo log files on the primary database (assuming the local archive destination on the primary database is <code class="codeph">LOG_ARCHIVE_DEST_1</code>):</p>
<pre dir="ltr">SQL&gt; SELECT NAME FROM V$ARCHIVED_LOG WHERE THREAD#=1 AND -
&gt; DEST_ID=1 AND SEQUENCE# BETWEEN 7 AND 10;

NAME
--------------------------------------------------------------------------------
/primary/thread1_dest/arcr_1_7.arc 
/primary/thread1_dest/arcr_1_8.arc 
/primary/thread1_dest/arcr_1_9.arc
</pre>
<div class="infobox-note" id="GUID-97EB433B-4125-4082-9276-2454349BC4F8__GUID-FAB1A664-A7C3-4357-B764-E36A8D329F24">
<p class="notep1">Note:</p>
<p>This query may return consecutive sequences for a given thread. In that case, there is no actual gap, but the associated thread was disabled and enabled within the time period of generating these two archived logs. The query also does not identify the gap that may exist at the tail end for a given thread. For instance, if the primary database has generated archived logs up to sequence 100 for thread 1, and the latest archived log that the logical standby database has received for the given thread is the one associated with sequence 77, then this query does not return any rows, although there is a gap for the archived logs associated with sequences 78 to 100.</p>
</div>
<p>Copy these log files to the physical standby database and register them using the <code class="codeph">ALTER DATABASE REGISTER LOGFILE</code>. For example:</p>
<pre dir="ltr">SQL&gt; ALTER DATABASE REGISTER LOGFILE -
&gt; &#39;/physical_standby1/thread1_dest/arcr_1_7.arc&#39;;

SQL&gt; ALTER DATABASE REGISTER LOGFILE -
&gt; &#39;/physical_standby1/thread1_dest/arcr_1_8.arc&#39;;

SQL&gt; ALTER DATABASE REGISTER LOGFILE -
&gt; &#39;/physical_standby1/thread1_dest/arcr_1_9.arc&#39;;
</pre>
<div class="infobox-note" id="GUID-97EB433B-4125-4082-9276-2454349BC4F8__GUID-2E5EA6F4-DF54-4947-AD2F-F46DCB62CBDA">
<p class="notep1">Note:</p>
<p>The <code class="codeph">V$ARCHIVE_GAP</code> view on a physical standby database only returns the gap that is currently blocking Redo Apply from continuing. After resolving the gap, query the <code class="codeph">V$ARCHIVE_GAP</code> view again on the physical standby database to determine if there is another gap sequence. Repeat this process until there are no more gaps.</p>
</div>
<p>To determine if there is a redo gap on a logical standby database, query the <code class="codeph">DBA_LOGSTDBY_LOG</code> view on the logical standby database. For example, the following query indicates there is a gap in the sequence of archived redo log files because it displays two files for <code class="codeph">THREAD 1</code> on the logical standby database. (If there are no gaps, then the query shows only one file for each thread.) The output shows that the highest registered file is sequence number 10, but there is a gap at the file shown as sequence number 6:</p>
<pre dir="ltr">SQL&gt; COLUMN FILE_NAME FORMAT a55
SQL&gt; SELECT THREAD#, SEQUENCE#, FILE_NAME FROM DBA_LOGSTDBY_LOG L -
&gt; WHERE NEXT_CHANGE# NOT IN -
&gt; (SELECT FIRST_CHANGE# FROM DBA_LOGSTDBY_LOG WHERE L.THREAD# = THREAD#) -
&gt; ORDER BY THREAD#, SEQUENCE#;
 
   THREAD#  SEQUENCE# FILE_NAME
---------- ---------- -----------------------------------------------
         1          6 /disk1/oracle/dbs/log-1292880008_6.arc
         1         10 /disk1/oracle/dbs/log-1292880008_10.arc
</pre>
<p>Copy the missing log files, with sequence numbers 7, 8, and 9, to the logical standby system and register them using the <code class="codeph">ALTER DATABASE REGISTER LOGICAL LOGFILE</code> statement. For example:</p>
<pre dir="ltr">SQL&gt; ALTER DATABASE REGISTER LOGICAL LOGFILE -
&gt; &#39;/disk1/oracle/dbs/log-1292880008_7.arc&#39;; 

SQL&gt; ALTER DATABASE REGISTER LOGICAL LOGFILE -
&gt; &#39;/disk1/oracle/dbs/log-1292880008_8.arc&#39;;

SQL&gt; ALTER DATABASE REGISTER LOGICAL LOGFILE -
&gt; &#39;/disk1/oracle/dbs/log-1292880008_9.arc&#39;;
</pre>
<div class="infobox-note" id="GUID-97EB433B-4125-4082-9276-2454349BC4F8__GUID-F49543CF-86CF-4DAB-B16B-676EBE8272B3">
<p class="notep1">Note:</p>
<p>A query based on the <code class="codeph">DBA_LOGSTDBY_LOG</code> view on a logical standby database, as specified above, only returns the gap that is currently blocking SQL Apply from continuing. After resolving the gap, query the <code class="codeph">DBA_LOGSTDBY_LOG</code> view again on the logical standby database to determine if there is another gap sequence. Repeat this process until there are no more gaps.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="SBYDB5029"></a><a id="SBYDB4759"></a>
<div class="props_rev_3"><a id="GUID-EB15DAF9-40A8-4185-B4C2-F8BB4FBD33CE"></a>
<h3 id="SBYDB-GUID-EB15DAF9-40A8-4185-B4C2-F8BB4FBD33CE" class="sect3"><span class="enumeration_section">7.6.4</span> Redo Transport Services Wait Events</h3>
<div>
<div class="section">
<p><a href="log_transport.htm#GUID-EB15DAF9-40A8-4185-B4C2-F8BB4FBD33CE__BABHDCCD" title="This 2 column table lists Redo Transport Wait Events. Column 1 is the wait event. Column 2 is a description of that event.">Table 7-2</a> lists several of the Oracle wait events used to track redo transport wait time on a redo source database. These wait events<a id="d13930e2843" class="indexterm-anchor"></a><a id="d13930e2847" class="indexterm-anchor"></a> are found in the <code class="codeph">V$SYSTEM_EVENT</code> dynamic performance view.</p>
<p>For a complete list of the Oracle wait events used by redo transport, see the Oracle Data Guard Redo Transport and Network Best Practices white paper on the Oracle Maximum Availability Architecture (MAA) home page at:</p>
<p><a href="http://www.oracle.com/goto/maa/" target="_blank"><code class="codeph">http://www.oracle.com/goto/maa</code></a></p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-EB15DAF9-40A8-4185-B4C2-F8BB4FBD33CE__BABHDCCD">
<p class="titleintable">Table 7-2 Redo Transport Wait Events</p>
<table class="cellalignment2269" title="Redo Transport Wait Events" summary="This 2 column table lists Redo Transport Wait Events. Column 1 is the wait event. Column 2 is a description of that event.">
<thead>
<tr class="cellalignment2253">
<th class="cellalignment2270" id="d13930e2872">Wait Event</th>
<th class="cellalignment2290" id="d13930e2875">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2253">
<td class="cellalignment2272" id="d13930e2880" headers="d13930e2872">
<p>LNS wait on ATTACH</p>
</td>
<td class="cellalignment2291" headers="d13930e2880 d13930e2875">
<p>Total time spent waiting for redo transport sessions to be established to all <code class="codeph">ASYNC</code> and <code class="codeph">SYNC</code> redo transport destinations</p>
</td>
</tr>
<tr class="cellalignment2253">
<td class="cellalignment2272" id="d13930e2893" headers="d13930e2872">
<p>LNS wait on SENDREQ</p>
</td>
<td class="cellalignment2291" headers="d13930e2893 d13930e2875">
<p>Total time spent waiting for redo data to be written to all <code class="codeph">ASYNC</code> and <code class="codeph">SYNC</code> redo transport destinations</p>
</td>
</tr>
<tr class="cellalignment2253">
<td class="cellalignment2272" id="d13930e2906" headers="d13930e2872">
<p>LNS wait on DETACH</p>
</td>
<td class="cellalignment2291" headers="d13930e2906 d13930e2875">
<p>Total time spent waiting for redo transport connections to be terminated to all <code class="codeph">ASYNC</code> and <code class="codeph">SYNC</code> redo transport destinations</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
</div>
<a id="SBYDB4760"></a>
<div class="props_rev_3"><a id="GUID-665E1862-E9F2-4CB2-BFF5-B5F741FD475E"></a>
<h2 id="SBYDB-GUID-665E1862-E9F2-4CB2-BFF5-B5F741FD475E" class="sect2"><span class="enumeration_section">7.7</span> Tuning Redo Transport</h2>
<div>
<p>The Oracle Data Guard Redo Transport and Network Configuration Best Practices white paper describes how to optimize redo transport for best performance. This paper is available on the Oracle Maximum Availability Architecture (MAA) home page at:</p>
<p><a href="http://www.oracle.com/goto/maa/" target="_blank"><code class="codeph">http://www.oracle.com/goto/maa</code></a></p>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2252">
<tr>
<td class="cellalignment2259">
<table class="cellalignment2257">
<tr>
<td class="cellalignment2256"><a href="protection.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2256"><a href="log_apply.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2261">
<table class="cellalignment2255">
<tr>
<td class="cellalignment2256"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2256"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2256"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2256"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2256"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2256"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>