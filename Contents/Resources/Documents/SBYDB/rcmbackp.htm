<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-92004"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Creating%20a%20Standby%20Database%20with%20Recovery%20Manager"></a><title>Creating a Standby Database with Recovery Manager</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-21T12:09:00Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Data Guard Concepts and Administration"/>
<meta name="dcterms.identifier" content="E48552-08"/>
<meta name="dcterms.isVersionOf" content="SBYDB"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="rac_support.htm" title="Previous" type="text/html"/>
<link rel="Next" href="trace.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48552-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-82731D59-A20F-45DD-A235-267B3B0E38C5"></a> <span id="PAGE" style="display:none;">32/35</span> <!-- End Header -->
<a id="SBYDB01500"></a>
<h1 id="SBYDB-GUID-82731D59-A20F-45DD-A235-267B3B0E38C5" class="sect1"><span class="enumeration_chapter">E</span> Creating a Standby Database with Recovery Manager</h1>
<div>
<p>See the following topics for information about how to use Oracle Recovery Manager to create a standby database:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmbackp.htm#GUID-BFD2D916-17D6-4CC1-8BC0-2F333C54516D">Prerequisites</a></p>
</li>
<li>
<p><a href="rcmbackp.htm#GUID-CAEE94C8-6C1A-4021-B93F-E9C65384418A">Overview of Standby Database Creation with RMAN</a></p>
</li>
<li>
<p><a href="rcmbackp.htm#GUID-D1694762-4B53-4828-B094-874DB1A6FC81">Using the DUPLICATE Command to Create a Standby Database</a></p>
</li>
</ul>
</div>
<a id="SBYDB4978"></a>
<div class="props_rev_3"><a id="GUID-BFD2D916-17D6-4CC1-8BC0-2F333C54516D"></a>
<h2 id="SBYDB-GUID-BFD2D916-17D6-4CC1-8BC0-2F333C54516D" class="sect2"><span class="enumeration_section">E.1</span> Prerequisites</h2>
<div>
<p>Before you create a standby database with RMAN, you should have read the chapter on database duplication in <a class="olink BRADV010" target="_blank" href="../BRADV/rcmdupdb.htm#BRADV010"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a>. Because you use the <code class="codeph">DUPLICATE</code> command to create a standby database with RMAN, you should also familiarize yourself with the <code class="codeph">DUPLICATE</code> command entry in <a class="olink RCMRF126" target="_blank" href="../RCMRF/rcmsynta020.htm#RCMRF126"><span class="italic">Oracle Database Backup and Recovery Reference</span></a>.</p>
<p>Also familiarize yourself with how to create a standby database in <a href="create_ps.htm#GUID-B511FB6E-E3E7-436D-94B5-071C37550170">Creating a Physical Standby Database</a> and <a href="create_ls.htm#GUID-3666CA35-D993-44B6-8D70-A2B8B9EC8B2E">Creating a Logical Standby Database</a> <span class="italic">before</span> you attempt to create a standby database with RMAN.</p>
</div>
</div>
<a id="SBYDB4979"></a>
<div class="props_rev_3"><a id="GUID-CAEE94C8-6C1A-4021-B93F-E9C65384418A"></a>
<h2 id="SBYDB-GUID-CAEE94C8-6C1A-4021-B93F-E9C65384418A" class="sect2"><span class="enumeration_section">E.2</span> Overview of Standby Database Creation with RMAN</h2>
<div>
<p>This section explains the purpose and basic concepts involved in standby database creation with RMAN.</p>
</div>
<a id="SBYDB4980"></a>
<div class="props_rev_3"><a id="GUID-9864EED2-AE6E-4378-BA7C-1FB3971649E5"></a>
<h3 id="SBYDB-GUID-9864EED2-AE6E-4378-BA7C-1FB3971649E5" class="sect3"><span class="enumeration_section">E.2.1</span> Purpose of Standby Database Creation with RMAN</h3>
<div>
<p><a id="d63970e322" class="indexterm-anchor"></a><a id="d63970e328" class="indexterm-anchor"></a>You can use either manual techniques or the RMAN <code class="codeph">DUPLICATE</code> command to create a standby database from backups of your primary database. Creating a standby database with RMAN has the following advantages over manual techniques:</p>
<ul style="list-style-type: disc;">
<li>
<p>RMAN can create a standby database by copying the files currently in use by the primary database. No backups are required.</p>
</li>
<li>
<p>RMAN can create a standby database by restoring backups of the primary database to the standby site. Thus, the primary database is not affected during the creation of the standby database.</p>
</li>
<li>
<p>RMAN automates renaming of files, including Oracle Managed Files (OMF) and directory structures.</p>
</li>
<li>
<p>RMAN restores archived redo log files from backups and performs media recovery so that the standby and primary databases are synchronized.</p>
</li>
</ul>
</div>
</div>
<a id="SBYDB4981"></a>
<div class="props_rev_3"><a id="GUID-C055CE69-9410-4B71-92B6-93C9B6F63197"></a>
<h3 id="SBYDB-GUID-C055CE69-9410-4B71-92B6-93C9B6F63197" class="sect3"><span class="enumeration_section">E.2.2</span> Basic Concepts of Standby Creation with RMAN</h3>
<div>
<p>The procedure for creating a standby database with RMAN is almost the same as for creating a duplicate database. You need to amend the duplication procedures described in <a class="olink BRADV89930" target="_blank" href="../BRADV/rcmdupdb.htm#BRADV89930"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> to account for issues specific to a standby database.<a id="d63970e424" class="indexterm-anchor"></a><a id="d63970e430" class="indexterm-anchor"></a></p>
<p>To create a standby database with the <code class="codeph">DUPLICATE</code> command you must connect as target to the primary database and specify the <code class="codeph">FOR STANDBY</code> option. You cannot connect to a standby database and create an additional standby database. RMAN creates the standby database by restoring and mounting a control file. RMAN can use an existing backup of the primary database control file, so you do not need to create a control file backup especially for the standby database.</p>
<p>A standby database, unlike a duplicate database created by <code class="codeph">DUPLICATE</code> <span class="italic">without</span> the <code class="codeph">FOR</code> <code class="codeph">STANDBY</code> <code class="codeph">OPTION</code>, does not get a new DBID. Therefore, do not register the standby database with your recovery catalog.</p>
</div>
<a id="SBYDB4982"></a>
<div class="props_rev_3"><a id="GUID-DDC82FDB-86B6-4FF0-8C1A-7F3611C7F4F9"></a>
<h4 id="SBYDB-GUID-DDC82FDB-86B6-4FF0-8C1A-7F3611C7F4F9" class="sect4"><span class="enumeration_section">E.2.2.1</span> Active Database and Backup-Based Duplication</h4>
<div>
<p>You must choose between active and backup-based duplication. If you specify <code class="codeph">FROM ACTIVE DATABASE</code>, then RMAN copies the data files directly from the primary database to the standby database. The primary database must be mounted or open.</p>
<p>If you not specify <code class="codeph">FROM ACTIVE DATABASE</code>, then RMAN performs backup-based duplication. RMAN restores backups of the primary data files to the standby database. All backups and archived redo log files needed for creating and recovering the standby database must be accessible by the server session on the standby host. RMAN restores the most recent data files unless you execute the <code class="codeph">SET UNTIL</code> command.</p>
</div>
</div>
<a id="SBYDB4983"></a>
<div class="props_rev_3"><a id="GUID-AC0FF3B1-456C-4EF5-BD3E-08014927B7B4"></a>
<h4 id="SBYDB-GUID-AC0FF3B1-456C-4EF5-BD3E-08014927B7B4" class="sect4"><span class="enumeration_section">E.2.2.2</span> DB_UNIQUE_NAME Values in an RMAN Environment</h4>
<div>
<p>A standby database, unlike a duplicate database created by <code class="codeph">DUPLICATE</code> without the <code class="codeph">FOR STANDBY</code> option, does not get a new DBID. When you use RMAN in an Oracle Data Guard environment, connect it to a recovery catalog. The recovery catalog can store the metadata for all primary and standby databases in the environment. Do not explicitly register the standby database in the recovery catalog.</p>
<p>A database in an Oracle Data Guard environment is uniquely identified by means of the <code class="codeph">DB_UNIQUE_NAME</code> parameter in the initialization parameter file. The <code class="codeph">DB_UNIQUE_NAME</code> must be unique across all the databases with the same DBID for RMAN to work correctly in an Oracle Data Guard environment.</p>
<div class="infoboxnotealso" id="GUID-AC0FF3B1-456C-4EF5-BD3E-08014927B7B4__GUID-F65661B2-E78E-4953-877D-F7E029C29F3A">
<p class="notep1">See Also:</p>
<p><a class="olink BRADV89379" target="_blank" href="../BRADV/rcmarchi.htm#BRADV89379"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for a conceptual overview of RMAN operation in an Oracle Data Guard environment</p>
</div>
</div>
</div>
<a id="SBYDB4984"></a>
<div class="props_rev_3"><a id="GUID-A75EBEE4-CFD7-4205-B3D0-24AFFC1331AF"></a>
<h4 id="SBYDB-GUID-A75EBEE4-CFD7-4205-B3D0-24AFFC1331AF" class="sect4"><span class="enumeration_section">E.2.2.3</span> Recovery of a Standby Database</h4>
<div>
<p>By default, RMAN does not recover the standby database after creating it. RMAN leaves the standby database mounted, but does not place the standby database in manual or managed recovery mode. RMAN disconnects and does not perform media recovery of the standby database.</p>
<p>For RMAN to recover the standby database after creating it, the standby control file must be usable for the recovery. The following conditions must be met:</p>
<ul style="list-style-type: disc;">
<li>
<p>The end recovery time of the standby database must be greater than or equal to the checkpoint SCN of the standby control file.</p>
</li>
<li>
<p>An archived redo log file containing the checkpoint SCN of the standby control file must be available at the standby site for recovery.</p>
</li>
</ul>
<p>One way to ensure these conditions are met is to issue the <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> <code class="codeph">ARCHIVE</code> <code class="codeph">LOG</code> <code class="codeph">CURRENT</code> statement after backing up the control file on the primary database. This statement archives the online redo log files of the primary database. Then, either back up the most recent archived redo log file with RMAN or move the archived redo log file to the standby site.</p>
<p>Use the <code class="codeph">DORECOVER</code> option of the <code class="codeph">DUPLICATE</code> command to specify that you want RMAN to recover the standby database. RMAN performs the following steps after creating the standby database files:</p>
<ol>
<li>
<p>RMAN begins media recovery. If recovery requires archived redo log files, and if the log files are not already on disk, then RMAN attempts to restore backups.</p>
</li>
<li>
<p>RMAN recovers the standby database to the specified time, system change number (SCN), or log file sequence number, or to the latest archived redo log file generated if none of the preceding are specified.</p>
</li>
<li>
<p>RMAN leaves the standby database mounted after media recovery is complete, but does <span class="italic">not</span> place the standby database in manual or managed recovery mode.</p>
</li>
</ol>
</div>
</div>
<a id="SBYDB4985"></a>
<div class="props_rev_3"><a id="GUID-730789B8-813C-433F-BF49-D34B4077DE77"></a>
<h4 id="SBYDB-GUID-730789B8-813C-433F-BF49-D34B4077DE77" class="sect4"><span class="enumeration_section">E.2.2.4</span> Standby Database Redo Log Files</h4>
<div>
<p>RMAN automatically creates the standby redo log files on the standby database. After the log files are created, the standby database maintains and archives them according to the normal rules for log files.</p>
<p>If you use backup-based duplication, then the only option when naming the standby redo log files on the standby database is the file names for the log files, as specified in the standby control file. If the log file names on the standby must be different from the primary file names, then one option is to specify file names for the standby redo logs by setting <code class="codeph">LOG_FILE_NAME_CONVERT</code><a id="d63970e823" class="indexterm-anchor"></a><a id="d63970e827" class="indexterm-anchor"></a><a id="d63970e833" class="indexterm-anchor"></a> in the standby initialization parameter file.</p>
<p>Note the following restrictions when specifying file names for the standby redo log files on the standby database:</p>
<ul style="list-style-type: disc;">
<li>
<p>You must use the <code class="codeph">LOG_FILE_NAME_CONVERT</code> parameter to name the standby redo log files if the primary and standby databases use different naming conventions for the log files.</p>
</li>
<li>
<p>You cannot use the <code class="codeph">SET</code> <code class="codeph">NEWNAME</code> or <code class="codeph">CONFIGURE</code> <code class="codeph">AUXNAME</code> commands to rename the standby redo log files.</p>
</li>
<li>
<p>You cannot use the <code class="codeph">LOGFILE</code> clause of the <code class="codeph">DUPLICATE</code> command to specify file names for the standby redo log files.</p>
</li>
<li>
<p>For the standby redo log file names on the standby database to be the same as the primary redo log file names, you must specify the <code class="codeph">NOFILENAMECHECK</code> clause of the <code class="codeph">DUPLICATE</code> command. Otherwise, RMAN signals an error even if the standby database is created on a different host.</p>
</li>
</ul>
</div>
</div>
<a id="SBYDB4986"></a>
<div class="props_rev_3"><a id="GUID-70DD3082-8678-4A06-92F0-7121ACAEBBE9"></a>
<h4 id="SBYDB-GUID-70DD3082-8678-4A06-92F0-7121ACAEBBE9" class="sect4"><span class="enumeration_section">E.2.2.5</span> Password Files for the Standby Database</h4>
<div>
<p>If you are using active database duplication, then RMAN always copies the password file to the standby host because the password file on the standby database must be an exact copy of the password file on the target database. In this case, the <code class="codeph">PASSWORD FILE</code> clause is not necessary. RMAN overwrites any existing password file for the auxiliary instance. With backup-based duplication you must copy the password file used on the primary to the standby, for Oracle Data Guard to ship logs.</p>
</div>
</div>
</div>
</div>
<a id="SBYDB4987"></a>
<div class="props_rev_3"><a id="GUID-D1694762-4B53-4828-B094-874DB1A6FC81"></a>
<h2 id="SBYDB-GUID-D1694762-4B53-4828-B094-874DB1A6FC81" class="sect2"><span class="enumeration_section">E.3</span> Using the DUPLICATE Command to Create a Standby Database</h2>
<div>
<p><a id="d63970e1025" class="indexterm-anchor"></a>The procedure for creating a standby database is basically identical to the duplication procedure described in <a class="olink BRADV168" target="_blank" href="../BRADV/rcmdupdb.htm#BRADV168"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a>.</p>
</div>
<a id="SBYDB4988"></a>
<div class="props_rev_3"><a id="GUID-C713FD5C-3375-45E4-A78F-4063006DAC5B"></a>
<h3 id="SBYDB-GUID-C713FD5C-3375-45E4-A78F-4063006DAC5B" class="sect3"><span class="enumeration_section">E.3.1</span> Creating a Standby Database with Active Database Duplication</h3>
<div>
<div class="section">
<p>To create a standby database from files that are active in the primary database, specify both <code class="codeph">FOR STANDBY</code> and <code class="codeph">FROM ACTIVE DATABASE</code>. Optionally, specify the <code class="codeph">DORECOVER</code> option to recover the database after standby creation.</p>
<p>This scenario assumes that the standby host and primary database host have the same directory structure.</p>
<p><span class="bold">To create a standby database from active database files:</span></p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Prepare the auxiliary database instance as explained in <a class="olink BRADV167" target="_blank" href="../BRADV/rcmdupdb.htm#BRADV167"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a>.</span>
<div>
<p>Because you are using active database duplication, you must create a password file for the auxiliary instance and establish Oracle Net connectivity. This is a temporary password file as it will be overwritten during the duplicate operation.</p>
</div>
</li>
<li class="stepexpand"><span>Decide how to provide names for the standby control files, data files, online redo logs, and tempfiles. This step is explained in <a class="olink BRADV298" target="_blank" href="../BRADV/rcmdupdb.htm#BRADV298"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a>.</span>
<div>
<p>In this scenario, the standby database files will be named the same as the primary database files.</p>
</div>
</li>
<li class="stepexpand"><span>Start and configure RMAN as explained in <a class="olink BRADV299" target="_blank" href="../BRADV/rcmdupdb.htm#BRADV299"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a>.</span></li>
<li class="stepexpand"><span>Execute the <code class="codeph">DUPLICATE</code> command.</span>
<div>
<p>The following example illustrates how to use <code class="codeph">DUPLICATE</code> for active duplication. This example requires the <code class="codeph">NOFILENAMECHECK</code> option because the primary database files have the same names as the standby database files. The <code class="codeph">SET</code> clauses for SPFILE are required for log shipping to work properly. The <code class="codeph">db_unique_name</code> must be set to ensure that the catalog and Oracle Data Guard can identify this database as being different from the primary.</p>
<pre dir="ltr">DUPLICATE TARGET DATABASE
  FOR STANDBY
  FROM ACTIVE DATABASE
  DORECOVER
  SPFILE
    SET &#34;db_unique_name&#34;=&#34;foou&#34; COMMENT &#39;&#39;Is a duplicate&#39;&#39;
    SET LOG_ARCHIVE_DEST_2=&#34;service=inst3 ASYNC REGISTER
     VALID_FOR=(online_logfile,primary_role)&#34;
    SET FAL_SERVER=&#34;inst1&#34; COMMENT &#34;Is primary&#34;
  NOFILENAMECHECK;
</pre>
<p>RMAN automatically copies the server parameter file to the standby host, starts the auxiliary instance with the server parameter file, restores a backup control file, and copies all necessary database files and archived redo logs over the network to the standby host. RMAN recovers the standby database, but does not place it in manual or managed recovery mode.</p>
</div>
</li>
</ol>
</div>
</div>
<a id="SBYDB4989"></a>
<div class="props_rev_3"><a id="GUID-E9FBCFA9-20A2-49DD-8060-AA39100D7751"></a>
<h3 id="SBYDB-GUID-E9FBCFA9-20A2-49DD-8060-AA39100D7751" class="sect3"><span class="enumeration_section">E.3.2</span> Creating a Standby Database with Backup-Based Duplication</h3>
<div>
<div class="section">
<p>To create a standby database from backups, specify <code class="codeph">FOR STANDBY</code> but do not specify <code class="codeph">FROM ACTIVE DATABASE</code>. Optionally, specify the <code class="codeph">DORECOVER</code> option to recover the database after standby creation.</p>
<p>This scenario assumes that the standby host and primary database host have the same directory structure.</p>
<p><span class="bold">To create a standby database from backups:</span></p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Make database backups and archived redo logs available to the auxiliary instance on the duplicate host as explained in <a class="olink BRADV89931" target="_blank" href="../BRADV/rcmdupdb.htm#BRADV89931"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a>.</span></li>
<li class="stepexpand"><span>Prepare the auxiliary database instance as explained in <a class="olink BRADV167" target="_blank" href="../BRADV/rcmdupdb.htm#BRADV167"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a>.</span></li>
<li class="stepexpand"><span>Decide how to provide names for the standby control files, data files, online redo logs, and tempfiles. This step is explained in <a class="olink BRADV298" target="_blank" href="../BRADV/rcmdupdb.htm#BRADV298"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a>.</span>
<div>
<p>In this scenario, the standby database files will be named the same as the primary database files.</p>
</div>
</li>
<li class="stepexpand"><span>Start and configure RMAN as explained in <a class="olink BRADV299" target="_blank" href="../BRADV/rcmdupdb.htm#BRADV299"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a>.</span></li>
<li class="stepexpand"><span>Execute the <code class="codeph">DUPLICATE</code> command.</span>
<div>
<p>The following example illustrates how to use <code class="codeph">DUPLICATE</code> for backup-based duplication. This example requires the <code class="codeph">NOFILENAMECHECK</code> option because the primary database files have the same names as the standby database files.</p>
<pre dir="ltr">DUPLICATE TARGET DATABASE
  FOR STANDBY
  DORECOVER
  SPFILE
    SET &#34;db_unique_name&#34;=&#34;foou&#34; COMMENT &#39;&#39;Is a duplicate&#39;&#39;
    SET LOG_ARCHIVE_DEST_2=&#34;service=inst3 ASYNC REGISTER
     VALID_FOR=(online_logfile,primary_role)&#34;
    SET FAL_SERVER=&#34;inst1&#34; COMMENT &#34;Is primary&#34;
  NOFILENAMECHECK;
</pre>
<p>RMAN automatically copies the server parameter file to the standby host, starts the auxiliary instance with the server parameter file, and restores all necessary database files and archived redo logs to the standby host. RMAN recovers the standby database, but does not place it in manual or managed recovery mode.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2252">
<tr>
<td class="cellalignment2259">
<table class="cellalignment2257">
<tr>
<td class="cellalignment2256"><a href="rac_support.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2256"><a href="trace.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2261">
<table class="cellalignment2255">
<tr>
<td class="cellalignment2256"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2256"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2256"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2256"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2256"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2256"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>