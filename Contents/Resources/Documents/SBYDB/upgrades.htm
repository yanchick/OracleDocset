<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-92016"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Upgrading%20and%20Downgrading%20Databases%20in%20an%20Oracle%20Data%20Guard%20Configuration"></a><title>Upgrading and Downgrading Databases in an Oracle Data Guard Configuration</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="upgrading, Oracle Database software, Data Guard configurations, upgrading Oracle Database software, Oracle Database software, upgrading, physical standby databases, logical standby databases, downgrading"/>
<meta name="dcterms.created" content="2017-07-21T12:09:00Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Data Guard Concepts and Administration"/>
<meta name="dcterms.identifier" content="E48552-08"/>
<meta name="dcterms.isVersionOf" content="SBYDB"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="troubleshooting.htm" title="Previous" type="text/html"/>
<link rel="Next" href="data_support.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48552-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-A4FBE490-7E7E-4998-B80E-01C93C77AE2F"></a> <span id="PAGE" style="display:none;">29/35</span> <!-- End Header -->
<a id="SBYDB1200"></a>
<h1 id="SBYDB-GUID-A4FBE490-7E7E-4998-B80E-01C93C77AE2F" class="sect1"><span class="enumeration_chapter">B</span> Upgrading and Downgrading Databases in an Oracle Data Guard Configuration</h1>
<div>
<p>The following topics describe how to upgrade and downgrade an Oracle database when a physical or logical standby database is present in the Oracle Data Guard configuration:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="upgrades.htm#GUID-784C06D8-9CFA-4244-BA55-D7003CAB3F1E">Before You Upgrade the Oracle Database Software</a></p>
</li>
<li>
<p><a href="upgrades.htm#GUID-6431EFBF-6B00-4E7D-A106-63574225BDD9">Upgrading Oracle Database with a Physical Standby Database in Place</a></p>
</li>
<li>
<p><a href="upgrades.htm#GUID-5AF5983E-E481-4599-88B9-311A43EB5C80">Upgrading Oracle Database with a Logical Standby Database in Place</a></p>
</li>
<li>
<p><a href="upgrades.htm#GUID-253C94C1-8E40-4378-A0A5-2627C248D873">Modifying the COMPATIBLE Initialization Parameter After Upgrading</a></p>
</li>
<li>
<p><a href="upgrades.htm#GUID-F087E74B-ED71-42DF-A730-2A8A5FAA1A84">Downgrading Oracle Database with No Logical Standby in Place</a></p>
</li>
<li>
<p><a href="upgrades.htm#GUID-FDB0FA2C-EA66-423C-AFD9-51F3FA4899F8">Downgrading Oracle Database with a Logical Standby in Place</a></p>
</li>
</ul>
</div>
<a id="SBYDB4931"></a>
<div class="props_rev_3"><a id="GUID-784C06D8-9CFA-4244-BA55-D7003CAB3F1E"></a>
<h2 id="SBYDB-GUID-784C06D8-9CFA-4244-BA55-D7003CAB3F1E" class="sect2"><span class="enumeration_section">B.1</span> Before You Upgrade the Oracle Database Software</h2>
<div>
<p>Consider the following points before beginning to upgrade your Oracle Database software:</p>
<ul style="list-style-type: disc;">
<li>
<p>If you are using the Oracle Data Guard broker to manage your configuration, follow the instructions in the <a class="olink DGBKR1200" target="_blank" href="../DGBKR/upgrade_appx.htm#DGBKR1200"><span class="italic">Oracle Data Guard Broker</span></a> manual for information about removing or disabling the broker configuration.</p>
</li>
<li>
<p>The procedures described in these topics are to be used in conjunction with the ones contained in the <a class="olink UPGRD001" target="_blank" href="../UPGRD/intro.htm#UPGRD001"><span class="italic">Oracle Database Upgrade Guide</span></a>.</p>
</li>
<li>
<p>Check for nologging operations. If nologging operations have been performed then you must update the standby database. See <a href="scenarios.htm#GUID-BD9E85AB-D812-4659-9C85-26CDFF115A8A">Recovering After the NOLOGGING Clause Is Specified</a> for details.</p>
</li>
<li>
<p>Make note of any tablespaces or data files that need recovery due to <code class="codeph">OFFLINE IMMEDIATE</code>. Tablespaces or data files should be recovered and either online or offline prior to upgrading.</p>
</li>
<li>
<p>In an Oracle Data Guard configuration, all physical and snapshot standby databases must use a copy of the password file from the primary database, and that copy must be refreshed whenever an administrative privilege (<code class="codeph">SYSDG</code>, <code class="codeph">SYSOPER</code>, <code class="codeph">SYSDBA</code>, and so on) is granted or revoked, and after the password of any user with administrative privileges is changed</p>
</li>
</ul>
<div class="infobox-note" id="GUID-784C06D8-9CFA-4244-BA55-D7003CAB3F1E__GUID-5FE1991A-D491-4F8B-8DBB-2BE371A44759">
<p class="notep1">Note:</p>
<p>If there are cascaded standbys in your configuration then those cascaded standbys must follow the same rules as any other standby but should be shut down last and restarted in the new home first.</p>
</div>
</div>
</div>
<a id="SBYDB4932"></a>
<div class="props_rev_3"><a id="GUID-6431EFBF-6B00-4E7D-A106-63574225BDD9"></a>
<h2 id="SBYDB-GUID-6431EFBF-6B00-4E7D-A106-63574225BDD9" class="sect2"><span class="enumeration_section">B.2</span> Upgrading Oracle Database with a Physical Standby Database in Place</h2>
<div>
<div class="section">
<p>Perform the following steps to upgrade to Oracle Database 12<span class="italic">c</span> Release 1 (12.1) when a physical standby database is present in the configuration:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Review and perform the steps listed in the &#34;Preparing to Upgrade&#34; chapter of the <a class="olink UPGRD002" target="_blank" href="../UPGRD/preup.htm#UPGRD002"><span class="italic">Oracle Database Upgrade Guide</span></a>.</span></li>
<li class="stepexpand"><span>Install the new release of the Oracle software into a new Oracle home on the physical standby database and primary database systems, as described in the <a class="olink UPGRD003" target="_blank" href="../UPGRD/upgrade.htm#UPGRD003"><span class="italic">Oracle Database Upgrade Guide</span></a>.</span></li>
<li class="stepexpand"><span>Shut down the primary database.</span></li>
<li class="stepexpand"><span>Shut down the physical standby database(s).</span></li>
<li class="stepexpand"><span>Stop all listeners, agents, and other processes running in the Oracle homes that are to be upgraded. Perform this step on all nodes in an Oracle Real Application Clusters (Oracle RAC) environment.</span></li>
<li class="stepexpand"><span>If Oracle Automatic Storage Management (Oracle ASM) is in use, shut down all databases that use Oracle ASM, and then shut down all Oracle ASM instance(s).</span></li>
<li class="stepexpand"><span>In the new Oracle home, restart all listeners, agents, and other processes that were stopped in step 5.</span></li>
<li class="stepexpand"><span>Mount the physical standby database(s) on the new Oracle home (upgraded version). See <a href="create_ps.htm#GUID-3D65210D-9FE5-490E-938E-57FC2E07A569">Start the Physical Standby Database</a> for information on how to start a physical standby database.</span>
<div>
<div class="infobox-note" id="GUID-6431EFBF-6B00-4E7D-A106-63574225BDD9__GUID-C3C376B0-7DA4-4025-AB89-A41256B2DC81">
<p class="notep1">Note:</p>
<p>The standby database(s) should not be opened until the primary database upgrade is completed.</p>
</div>
</div>
</li>
<li class="stepexpand"><span>Start Redo Apply on the physical standby database(s). See <a href="create_ps.htm#GUID-3D65210D-9FE5-490E-938E-57FC2E07A569">Start the Physical Standby Database</a> for information on how to start Redo Apply.</span></li>
<li class="stepexpand"><span>Upgrade the primary database as described in the <a class="olink UPGRD003" target="_blank" href="../UPGRD/upgrade.htm#UPGRD003"><span class="italic">Oracle Database Upgrade Guide</span></a>. Note that the physical standby database(s) will be upgraded when the redo generated by the primary database as it is upgraded is applied.</span></li>
<li class="stepexpand"><span>Open the upgraded primary database.</span></li>
<li class="stepexpand"><span>If Oracle Active Data Guard was being used prior to the upgrade, then refer to <a href="manage_ps.htm#GUID-07CB190C-C248-4FF5-AB64-EAA9C6D42677">Real-time query</a> for information about how to reenable it after upgrading.</span></li>
<li class="stepexpand"><span>Optionally, modify the <code class="codeph">COMPATIBLE</code> initialization parameter, following the procedure described in <a href="upgrades.htm#GUID-253C94C1-8E40-4378-A0A5-2627C248D873">Modifying the COMPATIBLE Initialization Parameter After Upgrading</a>.</span>
<div>
<div class="infobox-note" id="GUID-6431EFBF-6B00-4E7D-A106-63574225BDD9__GUID-B0BEBCE6-1B7A-49E3-A5FB-0A1A06023CDB">
<p class="notep1">Note:</p>
<p>On Windows platforms, it will be necessary to use the ORADIM utility to delete the database service (for the old database version) and to create a new database service for the new database version. The OracleService&lt;SID&gt; must be replaced on both the primary and standby servers.</p>
</div>
</div>
</li>
</ol>
</div>
</div>
<a id="SBYDB4933"></a>
<div class="props_rev_3"><a id="GUID-5AF5983E-E481-4599-88B9-311A43EB5C80"></a>
<h2 id="SBYDB-GUID-5AF5983E-E481-4599-88B9-311A43EB5C80" class="sect2"><span class="enumeration_section">B.3</span> Upgrading Oracle Database with a Logical Standby Database in Place</h2>
<div>
<div class="section">
<div class="infobox-note" id="GUID-5AF5983E-E481-4599-88B9-311A43EB5C80__GUID-D413D6D2-300D-4F68-AA22-C3396791B5A7">
<p class="notep1">Note:</p>
<p>This topic describes the traditional method for upgrading your Oracle Database software with a logical standby database in place. A second method in <a href="rollup.htm#GUID-290F632F-5295-47F3-AEF1-2D37C69C00D7">Using SQL Apply to Upgrade the Oracle Database</a> describes how to upgrade with a logical standby database in place in a rolling fashion to minimize downtime. Use the steps from only one method to perform the complete upgrade. Do not attempt to use both methods or to combine the steps from the two methods as you perform the upgrade process.</p>
<p>The procedure described in this section assumes that the primary database is running in <code class="codeph">MAXIMUM PERFORMANCE</code> data protection mode.</p>
</div>
<p>Perform the following steps to upgrade to Oracle Database 12<span class="italic">c</span> Release 1 (12.1) when a logical standby database is present in the configuration:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Review and perform the steps listed in the &#34;Preparing to Upgrade&#34; chapter of the <a class="olink UPGRD002" target="_blank" href="../UPGRD/preup.htm#UPGRD002"><span class="italic">Oracle Database Upgrade Guide</span></a>.</span></li>
<li class="stepexpand"><span>Set the data protection mode to <code class="codeph">MAXIMUM PERFORMANCE</code> at the primary database, if needed:</span>
<div>
<pre dir="ltr">SQL&gt; ALTER DATABASE SET STANDBY DATABASE TO MAXIMIZE PERFORMANCE;
</pre></div>
</li>
<li class="stepexpand"><span>On the primary database, stop all user activity and defer the remote archival destination associated with the logical standby database (for this procedure, it is assumed that <code class="codeph">LOG_ARCHIVE_DEST_2</code> is associated with the logical standby database):</span>
<div>
<pre dir="ltr">SQL&gt; ALTER SYSTEM SET LOG_ARCHIVE_DEST_STATE_2=DEFER SCOPE=BOTH;
SQL&gt; ALTER SYSTEM ARCHIVE LOG CURRENT;
</pre></div>
</li>
<li class="stepexpand"><span>Stop SQL Apply on the logical standby database:</span>
<div>
<pre dir="ltr">SQL&gt; ALTER DATABASE STOP LOGICAL STANDBY APPLY;
</pre></div>
</li>
<li class="stepexpand"><span>On the primary database install the newer release of the Oracle software as described in the <a class="olink UPGRD003" target="_blank" href="../UPGRD/upgrade.htm#UPGRD003"><span class="italic">Oracle Database Upgrade Guide</span></a>.</span></li>
<li class="stepexpand"><span>On the logical standby database, install the newer release of the Oracle software as described in <a class="olink UPGRD003" target="_blank" href="../UPGRD/upgrade.htm#UPGRD003"><span class="italic">Oracle Database Upgrade Guide</span></a>.</span>
<div>
<div class="infobox-note" id="GUID-5AF5983E-E481-4599-88B9-311A43EB5C80__GUID-9C5473C8-2AAA-4341-80F4-34107983369D">
<p class="notep1">Note:</p>
<p>Steps 5 and 6 can be performed concurrently (in other words, the primary and the standby databases can be upgraded concurrently) to reduce downtime during the upgrade procedure.</p>
</div>
</div>
</li>
<li class="stepexpand"><span>On the upgraded logical standby database, restart SQL Apply. If you are using Oracle RAC, start up the other standby database instances:</span>
<div>
<pre dir="ltr">SQL&gt; ALTER DATABASE START LOGICAL STANDBY APPLY IMMEDIATE;
</pre></div>
</li>
<li class="stepexpand"><span>Open the upgraded primary database and allow users to connect. If you are using Oracle RAC, start up the other primary database instances.</span>
<div>
<p>Also, enable archiving to the upgraded logical standby database, as follows:</p>
<pre dir="ltr">SQL&gt; ALTER SYSTEM SET LOG_ARCHIVE_DEST_STATE_2=ENABLE;
</pre></div>
</li>
<li class="stepexpand"><span>Optionally, reset to the original data protection mode if you changed it in Step 2.</span></li>
<li class="stepexpand"><span>Optionally, modify the <code class="codeph">COMPATIBLE</code> initialization parameter, following the procedure described in <a href="upgrades.htm#GUID-253C94C1-8E40-4378-A0A5-2627C248D873">Modifying the COMPATIBLE Initialization Parameter After Upgrading</a>.</span></li>
</ol>
</div>
</div>
<a id="SBYDB5129"></a>
<div class="props_rev_3"><a id="GUID-253C94C1-8E40-4378-A0A5-2627C248D873"></a>
<h2 id="SBYDB-GUID-253C94C1-8E40-4378-A0A5-2627C248D873" class="sect2"><span class="enumeration_section">B.4</span> Modifying the COMPATIBLE Initialization Parameter After Upgrading</h2>
<div>
<div class="section">
<p>When you upgrade to a new release of Oracle Database, certain new features might make your database incompatible with your previous release. Oracle Database enables you to control the compatibility of your database with the <code class="codeph">COMPATIBLE</code> initialization<a id="d56967e644" class="indexterm-anchor"></a><a id="d56967e648" class="indexterm-anchor"></a> parameter.</p>
<p>After the upgrade is complete, you can increase the setting of the <code class="codeph">COMPATIBLE</code> initialization parameter to the maximum level for the new Oracle Database release. When you are certain that you no longer need the ability to downgrade your database back to its original version, set the <code class="codeph">COMPATIBLE</code> initialization parameter based on the compatibility level you want for your new database.</p>
<p>In an Oracle Data Guard configuration, if you decide to increase the setting of the <code class="codeph">COMPATIBLE</code> initialization parameter after upgrading, then it is important that you perform the following steps in the order shown (be sure the standby database has a <code class="codeph">COMPATIBLE</code> setting equal to, or higher than, the primary):</p>
<ol>
<li>
<p>Increase the value of the <code class="codeph">COMPATIBLE</code> initialization parameter on all standby databases in the configuration first, as follows:</p>
<ol>
<li>
<p>Ensure that apply is current on the standby database(s).</p>
</li>
<li>
<p>On one instance of each standby database, execute the following SQL statement:</p>
<pre dir="ltr">ALTER SYSTEM SET COMPATIBLE=&lt;<span class="italic">value</span>&gt; SCOPE=SPFILE;
</pre></li>
<li>
<p>If Redo Apply or SQL Apply is running, then stop them.</p>
</li>
<li>
<p>Restart all instances of the standby database(s).</p>
</li>
<li>
<p>If you previously stopped Redo Apply or SQL Apply, then restart them.</p>
</li>
</ol>
</li>
<li>
<p>Increase the value of the <code class="codeph">COMPATIBLE</code> initialization parameter on the primary database, as follows:</p>
<ol>
<li>
<p>On one instance of the primary database, execute the following SQL statement:</p>
<pre dir="ltr">ALTER SYSTEM SET COMPATIBLE=&lt;<span class="italic">value</span>&gt; SCOPE=SPFILE;
</pre></li>
<li>
<p>Restart all instances of the primary database.</p>
</li>
</ol>
</li>
</ol>
<div class="infoboxnotealso" id="GUID-253C94C1-8E40-4378-A0A5-2627C248D873__GUID-EF5E8579-5753-4377-9BA7-D8DD09CE8C36">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink UPGRD12472" target="_blank" href="../UPGRD/intro.htm#UPGRD12472"><span class="italic">Oracle Database Upgrade Guide</span></a> for more information about compatibility settings</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="SBYDB5132"></a>
<div class="props_rev_3"><a id="GUID-F087E74B-ED71-42DF-A730-2A8A5FAA1A84"></a>
<h2 id="SBYDB-GUID-F087E74B-ED71-42DF-A730-2A8A5FAA1A84" class="sect2"><span class="enumeration_section">B.5</span> Downgrading Oracle Database with No Logical Standby in Place</h2>
<div>
<div class="section">
<p>Perform the following steps to downgrade Oracle Database in an Oracle Data Guard configuration that does <span class="italic">not</span> contain a logical standby database:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Ensure that all physical standby databases are mounted, but not open. Do not open the standby database(s) until all redo generated by the downgrade of the primary database has been applied.</span></li>
<li class="stepexpand"><span>Start Redo Apply, in real-time apply mode, on the physical standby database(s).</span></li>
<li class="stepexpand"><span>Downgrade the primary database using the procedure described in <a class="olink UPGRD007" target="_blank" href="../UPGRD/downgrade.htm#UPGRD007"><span class="italic">Oracle Database Upgrade Guide</span></a>, keeping the following in mind:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>At each step of the downgrade procedure where a script is executed, execute the script only at the primary database. Do not perform the next downgrade step until all redo generated by the execution of the script at the primary database has been applied to each physical standby database.</p>
</li>
<li>
<p>At each step of the downgrade procedure where an action other than running a script is performed, perform the step at the primary database first and then at each physical standby database. Do not perform the next downgrade step at the primary database until the action has been performed at each physical standby database.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>If it becomes necessary to perform a failover during a downgrade, perform the failover and then continue with the downgrade procedure at the new primary database.</span></li>
</ol>
</div>
</div>
<a id="SBYDB5133"></a>
<div class="props_rev_3"><a id="GUID-FDB0FA2C-EA66-423C-AFD9-51F3FA4899F8"></a>
<h2 id="SBYDB-GUID-FDB0FA2C-EA66-423C-AFD9-51F3FA4899F8" class="sect2"><span class="enumeration_section">B.6</span> Downgrading Oracle Database with a Logical Standby in Place</h2>
<div>
<div class="section">
<p>Perform the following steps to downgrade Oracle Database in an Oracle Data Guard configuration that contains a logical standby database or a mixture of logical and physical standby databases.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Issue the following command at the primary database (database P, for the sake of this discussion) before you downgrade it:</span>
<div>
<pre dir="ltr">SQL&gt; ALTER DATABASE COMMIT TO SWITCHOVER TO LOGICAL STANDBY;
</pre>
<p>Database P is no longer in the primary database role.</p>
</div>
</li>
<li class="stepexpand"><span>Wait for <span class="italic">all</span> standby databases in the configuration to finish applying all available redo. To determine whether each standby database has finished applying all available redo, run the following query at each standby database:</span>
<div>
<pre dir="ltr">SQL&gt; SELECT SWITCHOVER_STATUS FROM V$DATABASE;
 
SWITCHOVER_STATUS
-----------------
TO PRIMARY
</pre>
<p>Do not continue on to step 3 until the query returns a value of <code class="codeph">TO PRIMARY</code> for all standby databases in the configuration.</p>
</div>
</li>
<li class="stepexpand"><span>Downgrade the logical standby databases using the procedures described in <a class="olink UPGRD007" target="_blank" href="../UPGRD/downgrade.htm#UPGRD007"><span class="italic">Oracle Database Upgrade Guide</span></a>, keeping the following in mind:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>At each step of the downgrade procedure where a script is executed, execute the script only at the logical standby databases. Do not perform the next downgrade step until all redo generated by executing the script at the logical standby database that was most recently in the primary role (database P) has been applied to each physical standby database.</p>
</li>
<li>
<p>At each step of the downgrade procedure where an action other than running a script is performed, first perform the step at the logical standby database that was most recently in the primary role (database P), and then perform the step at each physical standby database. Do not perform the next downgrade step at the logical standby database that was most recently in the primary role (database P) until the action has been performed at each physical standby database.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>After the logical standby that was most recently in the primary role (database P) has been successfully downgraded, open it, and issue the following command:</span>
<div>
<pre dir="ltr">SQL&gt; ALTER DATABASE ACTIVATE LOGICAL STANDBY DATABASE;
</pre>
<p>Database P is now back in the primary role.</p>
</div>
</li>
<li class="stepexpand"><span>At each of the logical standby databases in the configuration, issue the following command (note that the command requires that a database link back to the primary exist in all of the logical standby databases):</span>
<div>
<pre dir="ltr">SQL&gt; ALTER DATABASE START LOGICAL STANDBY APPLY IMMEDIATE NEW PRIMARY
<span class="italic">prim_db_link</span>;
</pre></div>
</li>
</ol>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2252">
<tr>
<td class="cellalignment2259">
<table class="cellalignment2257">
<tr>
<td class="cellalignment2256"><a href="troubleshooting.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2256"><a href="data_support.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2261">
<table class="cellalignment2255">
<tr>
<td class="cellalignment2256"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2256"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2256"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2256"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2256"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2256"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>