<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-92002"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Oracle%20Data%20Guard%20Protection%20Modes"></a><title>Oracle Data Guard Protection Modes</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-21T12:09:00Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Data Guard Concepts and Administration"/>
<meta name="dcterms.identifier" content="E48552-08"/>
<meta name="dcterms.isVersionOf" content="SBYDB"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="create_fs.htm" title="Previous" type="text/html"/>
<link rel="Next" href="log_transport.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48552-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-16298839-9B8A-4E58-8EC9-27912E57F1CE"></a> <span id="PAGE" style="display:none;">12/35</span> <!-- End Header -->
<a id="SBYDB02000"></a>
<h1 id="SBYDB-GUID-16298839-9B8A-4E58-8EC9-27912E57F1CE" class="sect1"><span class="enumeration_chapter">6</span> Oracle Data Guard Protection Modes</h1>
<div>
<p>See the following topics for information about Data Guard protection modes and how to set them on a primary database:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="protection.htm#GUID-7EF6EFEE-7E31-4F80-9C97-1B25DAA025F8">Oracle Data Guard Protection Modes</a></p>
</li>
<li>
<p><a href="protection.htm#GUID-5DB32C5F-3ABF-4AD4-AB41-208F1BF134BB">Setting the Data Protection Mode of a Primary Database</a></p>
</li>
</ul>
</div>
<a id="SBYDB5024"></a><a id="SBYDB5160"></a><a id="SBYDB5025"></a><a id="SBYDB5026"></a><a id="SBYDB4743"></a>
<div class="props_rev_3"><a id="GUID-7EF6EFEE-7E31-4F80-9C97-1B25DAA025F8"></a>
<h2 id="SBYDB-GUID-7EF6EFEE-7E31-4F80-9C97-1B25DAA025F8" class="sect2"><span class="enumeration_section">6.1</span> Oracle Data Guard Protection Modes</h2>
<div>
<p>This section describes the Oracle Data Guard protection modes.</p>
<p>In these descriptions, a synchronized standby database is meant to be one that meets the minimum requirements of the configured data protection mode and that does not have a redo gap. Redo gaps are discussed in <a href="log_transport.htm#GUID-05CE1D49-3DEE-4AAC-A887-55ED436912AF">Redo Gap Detection and Resolution</a>.</p>
<div class="section" id="GUID-7EF6EFEE-7E31-4F80-9C97-1B25DAA025F8__BABIEACF">
<p class="subhead2">Maximum Availability</p>
</div>
<!-- class="section" -->
<div class="section">
<p>This protection mode provides the highest level of data protection that is possible without compromising the availability of a primary database. Under normal operations, transactions do not commit until all redo data needed to recover those transactions has been written to the online redo log AND based on user configuration, one of the following is true:</p>
<ul style="list-style-type: disc;">
<li>
<p>redo has been received at the standby, I/O to the standby redo log has been initiated, and acknowledgement sent back to primary</p>
</li>
<li>
<p>redo has been received and written to standby redo log at the standby and acknowledgement sent back to primary</p>
</li>
</ul>
<p>If the primary does not receive acknowledgement from at least one synchronized standby, then it operates as if it were in maximum performance mode to preserve primary database availability until it is again able to write its redo stream to a synchronized standby database.</p>
<p>If the primary database fails, then this mode ensures no data loss occurs provided there is at least one synchronized standby in the Oracle Data Guard configuration. See <span class="q">&#34;<a href="protection.htm#GUID-7EF6EFEE-7E31-4F80-9C97-1B25DAA025F8__BABBFEGF">Performance Versus Protection in Maximum Availability Mode</a>&#34;</span> for information about the redo transport settings necessary to support Maximum Availability and associated trade-offs.</p>
<p>Transactions on the primary are considered protected as soon as Oracle Data Guard has written the redo data to persistent storage in a standby redo log file. Once that is done, acknowledgment is quickly made back to the primary database so that it can proceed to the next transaction. This minimizes the impact of synchronous transport on primary database throughput and response time. To fully benefit from complete Oracle Data Guard validation at the standby database, be sure to operate in real-time apply mode so that redo changes are applied to the standby database as fast as they are received. Oracle Data Guard signals any corruptions that are detected so that immediate corrective action can be taken.</p>
</div>
<!-- class="section" -->
<div class="section" id="GUID-7EF6EFEE-7E31-4F80-9C97-1B25DAA025F8__BABBFEGF">
<p class="subhead2">Performance Versus Protection in Maximum Availability Mode</p>
</div>
<!-- class="section" -->
<div class="section">
<p>When you use Maximum Availability mode, it is important to understand the possible results of using the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> attributes <code class="codeph">SYNC</code>/<code class="codeph">AFFIRM</code> versus <code class="codeph">SYNC</code>/<code class="codeph">NOAFFIRM</code> (FastSync<a id="d13226e207" class="indexterm-anchor"></a>) so that you can make the choice best suited to your needs.</p>
<p>When a transport is performed using <code class="codeph">SYNC/AFFIRM</code>, the primary performs write operations and waits for acknowledgment that the redo has been transmitted synchronously to the physical standby and written to disk. A <code class="codeph">SYNC/AFFIRM</code> transport provides an additional protection benefit at the expense of a performance impact caused by the time required to complete the I/O to the standby redo log.</p>
<p>When a transport is performed using <code class="codeph">SYNC/NOAFFIRM</code>, the primary performs write operations and waits only for acknowledgement that the data has been received on the standby, <span class="italic">not</span> that it has been written to disk. The <code class="codeph">SYNC/NOAFFIRM</code> transport can provide a performance benefit at the expense of potential exposure to data loss in a special case of multiple simultaneous failures.</p>
<p>With those definitions in mind, suppose you experience a catastrophic failure at the primary site at the same time that power is lost at the standby site. Whether data is lost depends on the transport mode being used. In the case of <code class="codeph">SYNC/AFFIRM</code>, in which there is a check to confirm that data is written to disk on the standby, there would be no data loss because the data would be available on the standby when the system was recovered. In the case of <code class="codeph">SYNC/NOAFFIRM</code>, in which there is no check that data has been written to disk on the standby, there may be some data loss.</p>
<div class="infoboxnotealso" id="GUID-7EF6EFEE-7E31-4F80-9C97-1B25DAA025F8__GUID-DB555252-EC63-494C-BDAE-D86C4843825B">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="log_arch_dest_param.htm#GUID-B04FC22C-F0B0-440F-BAF4-182EE547FCC1">LOG_ARCHIVE_DEST_n Parameter Attributes</a> for more information about the <code class="codeph">SYNC</code>, <code class="codeph">AFFIRM</code>, and <code class="codeph">NOAFFIRM</code> attributes</p>
</li>
<li>
<p><a class="olink DGBKR175" target="_blank" href="../DGBKR/dbresource.htm#DGBKR175"><span class="italic">Oracle Data Guard Broker</span></a> for information about transporting redo in a broker configuration using <code class="codeph">FASTSYNC</code> mode (using <code class="codeph">SYNC</code> and <code class="codeph">NOAFFIRM</code> together in maximum availability mode)</p>
</li>
</ul>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Maximum Performance</p>
</div>
<!-- class="section" -->
<div class="section">
<p>This protection<a id="d13226e277" class="indexterm-anchor"></a><a id="d13226e281" class="indexterm-anchor"></a> mode provides the highest level of data protection that is possible without affecting the performance of a primary database. This is accomplished by allowing transactions to commit as soon as all redo data generated by those transactions has been written to the online log. Redo data is also written to one or more standby databases, but this is done asynchronously with respect to transaction commitment, so primary database performance is unaffected by the time required to transmit redo data and receive acknowledgment from a standby database.</p>
<p>This protection mode offers slightly less data protection than maximum availability mode and has minimal impact on primary database performance.</p>
<p>This is the default protection mode.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Maximum Protection</p>
</div>
<!-- class="section" -->
<div class="section">
<p>Maximum protection is similar to maximum availability but provides an additional level of data protection in the event of multiple failure events. Unlike maximum availability, which allows the primary to continue processing if it is unable to receive acknowledgement from a standby database, maximum protection shuts the primary database down rather than allowing it to continue processing transactions that are unprotected.</p>
<p>Because this data protection mode prioritizes data protection over primary database availability, Oracle recommends that a minimum of two standby databases be used to protect a primary database that runs in maximum protection mode to prevent a single standby database failure from causing the primary database to shut down.</p>
<div class="infobox-note" id="GUID-7EF6EFEE-7E31-4F80-9C97-1B25DAA025F8__GUID-D12AEA3C-220F-44A4-B737-7775E1F7E8CE">
<p class="notep1">Note:</p>
<p>Asynchronously committed transactions are not protected by Oracle Data Guard against loss until the redo generated by those transactions has been written to the standby redo log of at least one synchronized standby database.</p>
<p>For more information about the asynchronous commit feature, see:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink CNCPT1119" target="_blank" href="../CNCPT/transact.htm#CNCPT1119"><span class="italic">Oracle Database Concepts</span></a></p>
</li>
<li>
<p><a class="olink LNPLS006" target="_blank" href="../LNPLS/static.htm#LNPLS006"><span class="italic">Oracle Database PL/SQL Language Reference</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="SBYDB5465"></a><a id="SBYDB4744"></a>
<div class="props_rev_3"><a id="GUID-5DB32C5F-3ABF-4AD4-AB41-208F1BF134BB"></a>
<h2 id="SBYDB-GUID-5DB32C5F-3ABF-4AD4-AB41-208F1BF134BB" class="sect2"><span class="enumeration_section">6.2</span> Setting the Data Protection Mode of a Primary Database</h2>
<div>
<div class="section">
<p>Protection mode settings can be set and changed on an open database as long as the configuration meets the requirements of the protection mode (including going from maximum performance mode to maximum availability mode). Perform the following steps<a id="d13226e386" class="indexterm-anchor"></a> to set the data protection mode of a primary database:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Select a data protection mode that meets your availability, performance, and data protection requirements. See <a href="protection.htm#GUID-7EF6EFEE-7E31-4F80-9C97-1B25DAA025F8">Oracle Data Guard Protection Modes</a> for a description of the data protection modes.</span></li>
<li class="stepexpand"><span>Verify that at least one standby database meets the redo transport requirements for the desired data protection mode.</span>
<div>
<p>The <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> database initialization parameter that corresponds to at least one standby database must include the redo transport attributes listed in the following table for the desired data protection mode.</p>
<p>The standby database must also have a standby redo log.</p>
<div class="tblformal" id="GUID-5DB32C5F-3ABF-4AD4-AB41-208F1BF134BB__GUID-E1E38604-FF2D-45B7-B5DD-34F043E10017">
<p class="titleintable">Table 6-1 Required Redo Transport Attributes for Data Protection Modes</p>
<table class="cellalignment2292" title="Required Redo Transport Attributes for Data Protection Modes" summary="This 3 column tables lists the required Redo Transport Attributes. Column 1 is maximum availability. Column 2 is maximum performance. Column 1 is maximum protection.">
<thead>
<tr class="cellalignment2253">
<th class="cellalignment2287" id="d13226e424">Maximum Availability</th>
<th class="cellalignment2287" id="d13226e427">Maximum Performance</th>
<th class="cellalignment2287" id="d13226e430">Maximum Protection</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2253">
<td class="cellalignment2289" id="d13226e435" headers="d13226e424">
<p><code class="codeph">AFFIRM</code> or <code class="codeph">NOAFFIRM</code></p>
</td>
<td class="cellalignment2289" headers="d13226e435 d13226e427">
<p><code class="codeph">NOAFFIRM</code></p>
</td>
<td class="cellalignment2289" headers="d13226e435 d13226e430">
<p><code class="codeph">AFFIRM</code></p>
</td>
</tr>
<tr class="cellalignment2253">
<td class="cellalignment2289" id="d13226e451" headers="d13226e424">
<p><code class="codeph">SYNC</code></p>
</td>
<td class="cellalignment2289" headers="d13226e451 d13226e427">
<p><code class="codeph">ASYNC</code></p>
</td>
<td class="cellalignment2289" headers="d13226e451 d13226e430">
<p><code class="codeph">SYNC</code></p>
</td>
</tr>
<tr class="cellalignment2253">
<td class="cellalignment2289" id="d13226e464" headers="d13226e424">
<p><code class="codeph">DB_UNIQUE_NAME</code></p>
</td>
<td class="cellalignment2289" headers="d13226e464 d13226e427">
<p><code class="codeph">DB_UNIQUE_NAME</code></p>
</td>
<td class="cellalignment2289" headers="d13226e464 d13226e430">
<p><code class="codeph">DB_UNIQUE_NAME</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</li>
<li class="stepexpand"><span>Verify that the <code class="codeph">DB_UNIQUE_NAME</code> database initialization parameter has been set to a unique value on the primary database and on each standby database.</span></li>
<li class="stepexpand"><span>Verify that the <code class="codeph">LOG_ARCHIVE_CONFIG</code> database initialization parameter has been defined on the primary database and on each standby database, and that its value includes a <code class="codeph">DG_CONFIG</code> list that includes the <code class="codeph">DB_UNIQUE_NAME</code> of the primary database and each standby database.</span>
<div>
<p>The following sample SQL statement configures the <code class="codeph">LOG_ARCHIVE_CONFIG</code> parameter:</p>
<pre dir="ltr">SQL&gt; ALTER SYSTEM SET LOG_ARCHIVE_CONFIG=&#39;DG_CONFIG=(CHICAGO,BOSTON)&#39;;
</pre></div>
</li>
<li class="stepexpand"><span>Set the data protection mode by executing the following SQL statement on the primary database:</span>
<div>
<pre dir="ltr">SQL&gt; ALTER DATABASE -
&gt; SET STANDBY DATABASE TO MAXIMIZE {AVAILABILITY | PERFORMANCE | PROTECTION};
</pre>
<p>The data protection mode can be set to <code class="codeph">MAXIMUM</code> <code class="codeph">PROTECTION</code> on an open database only if the current data protection mode is <code class="codeph">MAXIMUM</code> <code class="codeph">AVAILABILITY</code> and if there is at least one synchronized standby database.</p>
</div>
</li>
<li class="stepexpand"><span>Perform the following query on the primary database to confirm that it is operating in the new protection mode:</span>
<div>
<pre dir="ltr">SQL&gt; SELECT PROTECTION_MODE FROM V$DATABASE;
</pre></div>
</li>
</ol>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2252">
<tr>
<td class="cellalignment2259">
<table class="cellalignment2257">
<tr>
<td class="cellalignment2256"><a href="create_fs.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2256"><a href="log_transport.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2261">
<table class="cellalignment2255">
<tr>
<td class="cellalignment2256"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2256"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2256"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2256"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2256"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2256"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>