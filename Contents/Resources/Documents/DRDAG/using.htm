<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-5826"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Using%20the%20Oracle%20Database%20Gateway%20for%20DRDA"></a><title>Using the Oracle Database Gateway for DRDA</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1090"/>
<meta name="dcterms.created" content="2017-06-08T16:23:50Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Gateway for DRDA User&#39;s Guide"/>
<meta name="dcterms.identifier" content="E17937-05"/>
<meta name="dcterms.isVersionOf" content="DRDAG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2004, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="rel_info.htm" title="Previous" type="text/html"/>
<link rel="Next" href="dev_apps.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17937-05.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">8/13</span> <!-- End Header -->
<div id="DRDAG137" class="chapter"><a id="g12878"></a> <a id="i2088"></a>
<h1 class="chapter"><span class="secnum">3</span> Using the Oracle Database Gateway for DRDA</h1>
<p><a id="sthref214"></a><a id="sthref215"></a>Using the Oracle Database Gateway for DRDA involves connecting to the corresponding gateway system and the remote DRDA database associated with the gateway. This chapter also describes how to process and use database links. It contains the following sections:</p>
<ul>
<li>
<p><a href="#CEGFHEFH">DRDA Gateway Features</a></p>
</li>
<li>
<p><a href="#i1089">Processing a Database Link</a></p>
</li>
<li>
<p><a href="#CEGEHEDA">Accessing the Gateway</a></p>
</li>
<li>
<p><a href="#i2862">Accessing i5/OS File Members</a></p>
</li>
<li>
<p><a href="#i1235">Using the Synonym Feature</a></p>
</li>
<li>
<p><a href="#i2863">Performing Distributed Queries</a></p>
</li>
<li>
<p><a href="#i3053">Replicating in a Heterogeneous Environment</a></p>
</li>
<li>
<p><a href="#i3409">Copying Data from Oracle Database to DRDA Server</a></p>
</li>
<li>
<p><a href="#i3449">Copying Data from DRDA Server to Oracle Database</a></p>
</li>
<li>
<p><a href="#i2866">Tracing SQL Statements</a></p>
</li>
</ul>
<a id="CEGFHEFH"></a>
<div id="DRDAG1248" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">DRDA Gateway Features</h2>
<p>This section describes the following DRDA gateway features:</p>
<ul>
<li>
<p><a href="#CEGIJFGD">CHAR Semantics</a></p>
</li>
<li>
<p><a href="#CEGCDEHC">Multi-byte Character Sets Ratio Suppression</a></p>
</li>
<li>
<p><a href="#CEGHHDFH">IPv6 Support</a></p>
</li>
<li>
<p><a href="#CEGGEJIH">Gateway Session IDLE Timeout</a></p>
</li>
</ul>
<a id="CEGIJFGD"></a>
<div id="DRDAG1249" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">CHAR Semantics</h3>
<p>This feature allows the gateway to optionally run in <code dir="ltr">CHAR</code> Semantics mode. Rather than always describing UDB <code dir="ltr">CHAR</code> columns as <code dir="ltr">CHAR(n BYTE)</code>, this feature describes them as <code dir="ltr">CHAR(n CHAR)</code> and <code dir="ltr">VARCHAR(n CHAR)</code>. The concept is similar to Oracle database <code dir="ltr">CHAR</code> Semantics. You need to specify <code dir="ltr">HS_NLS_LENGTH_SEMANTICS=CHAR</code> gateway parameter to activate this option. Refer to <a href="app_initparam.htm#g636253">Appendix B</a> for more detail.</p>
</div>
<!-- class="sect2" -->
<a id="CEGCDEHC"></a>
<div id="DRDAG1250" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Multi-byte Character Sets Ratio Suppression</h3>
<p>This feature optionally suppresses the ratio expansion from UDB database to Oracle database involving multi-byte character set. By default, Oracle Database Gateway for DRDA assumes the worst ratio to prevent data being truncated or insufficient buffer size situation. However, if you have specific knowledge of your UDB database and do not want the expansion to occur, you can specify <code dir="ltr">HS_KEEP_REMOTE_COLUMN_SIZE</code> parameter to suppress the expansion. Refer to <a href="app_initparam.htm#g636253">Appendix B</a> for more detail.</p>
</div>
<!-- class="sect2" -->
<a id="CEGHHDFH"></a>
<div id="DRDAG1251" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">IPv6 Support</h3>
<p>Besides full IPv6 support between Oracle databases and the gateway, IPv6 is also supported between this gateway and UDB database. Refer to the <code dir="ltr">HS_FDS_CONNECT_INFO</code> parameter in <a href="app_initparam.htm#g636253">Appendix B</a> for more detail.</p>
</div>
<!-- class="sect2" -->
<a id="CEGGEJIH"></a>
<div id="DRDAG1252" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Gateway Session IDLE Timeout</h3>
<p>You can optionally choose to terminate long idle gateway sessions automatically with the gateway parameter <code dir="ltr">HS_IDLE_TIMEOUT</code>. Specifically, when a gateway session is idle for more than the specified time limit, the gateway session is terminated with any pending update rolled back</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1089"></a>
<div id="DRDAG138" class="sect1">
<h2 class="sect1">Processing a Database Link<a id="sthref216"></a></h2>
<p>The database and application administrators of a distributed database system are responsible for managing the database links that define paths to the Oracle Database Gateway for DRDA. The tasks are as follows:</p>
<ul>
<li>
<p><a href="#BABIGCCA">Creating Database Links</a></p>
</li>
<li>
<p><a href="#BABJGBGD">Dropping Database Links</a></p>
</li>
<li>
<p><a href="#BABFFGHJ">Examining Available Database Links</a></p>
</li>
<li>
<p><a href="#BABFHEFB">Limiting the Number of Active Database Links</a></p>
</li>
</ul>
<a id="BABIGCCA"></a>
<div id="DRDAG139" class="sect2">
<h3 class="sect2">Creating Database Links<a id="sthref217"></a><a id="sthref218"></a></h3>
<p>To create a database link and define a path to a <a id="sthref219"></a>remote database, use the <a id="sthref220"></a><a id="sthref221"></a><code dir="ltr">CREATE</code> <code dir="ltr">DATABASE LINK</code> statement. The <a id="sthref222"></a><a id="sthref223"></a><code dir="ltr">CONNECT TO</code> clause specifies the <a id="sthref224"></a>remote user&nbsp;ID and password to use when creating a session in the remote database. The <a id="sthref225"></a><a id="sthref226"></a><code dir="ltr">USING</code> clause points to a <a id="sthref227"></a>tnsnames.ora connect descriptor.</p>
<div class="infobox-note">
<p class="notep1"><span class="bold">Note</span>:</p>
If you do not specify a user ID and a password in the <code dir="ltr">CONNECT TO</code> clause, then the Oracle database user ID and password are used.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Refer to Chapter 15, &#34;Security Considerations&#34; in <a class="olink OTGIS150" href="../OTGIS/security.htm#OTGIS150"><span class="italic">Oracle Database Gateway Installation and Configuration Guide for IBM AIX on POWER Systems (64-Bit), Linux x86-64, Oracle Solaris on SPARC (64-Bit), Oracle Solaris on x86-64 (64-Bit) and HP-UX Itanium</span></a> or <a class="olink OTGIW150" href="../OTGIW/security.htm#OTGIW150"><span class="italic">Oracle Database Gateway Installation and Configuration Guide for Microsoft Windows</span></a> for details.</div>
<p>The following example creates a database link to access information in the DRDA server:</p>
<pre dir="ltr">CREATE PUBLIC DATABASE LINK <span class="italic">dblink</span> 
CONNECT TO <span class="italic">userid</span> IDENTIFIED BY <span class="italic">password</span>  
USING &#39;<span class="italic">tns_name_entry</span>&#39;;
</pre>
<p>where:</p>
<p><code dir="ltr">dblink</code> is the complete database link name.</p>
<p><code dir="ltr">user id</code>&nbsp;is the user&nbsp;ID used to establish a session in the <a id="sthref228"></a>remote database. This user ID must be a valid DRDA server user ID. It must be authorized to any table or file on the DRDA server that is referenced in the SQL commands. Length restrictions on user IDs are dependent on the authorization system used by the DRDA server. In many cases this limit is eight characters, but in other cases, it may be longer. See DB2 platform documentation for limitations.</p>
<p><code dir="ltr">password</code> is the password used to establish a session in the remote database. This password must be a valid DRDA server password. Length restrictions on passwords are dependent on the authorization system used by the DRDA server. In many cases this limit is eight characters, but in other cases, it may be longer. See DB2 platform documentation for limitations.</p>
<p><a id="sthref229"></a><code dir="ltr">tns_name_entry</code> specifies the Oracle Net connect descriptor used to identify the gateway.</p>
<p class="subhead2"><a id="DRDAG1253"></a>Guidelines for Database Links<a id="sthref230"></a></p>
<p>Database links are active for the duration of a gateway session. If you want to close a database link during a session, then use the <a id="sthref231"></a><code dir="ltr">ALTER SESSION CLOSE DATABASE LINK</code> <code dir="ltr"><span class="codeinlineitalic">dblink</span></code> statement.</p>
</div>
<!-- class="sect2" -->
<a id="BABJGBGD"></a>
<div id="DRDAG140" class="sect2">
<h3 class="sect2">Dropping Database Links<a id="sthref232"></a></h3>
<p>You can drop a database link with the <a id="sthref233"></a><a id="sthref234"></a><code dir="ltr">DROP DATABASE LINK</code> statement. For example, to drop the public database link named <code dir="ltr">DBLINK,</code> use the statement:</p>
<pre dir="ltr">DROP PUBLIC DATABASE LINK dblink;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
A database link should not be dropped if it is required to resolve an in-doubt distributed transaction. Refer to <span class="italic">Oracle Database Administrator&#39;s Guide</span> for additional information about dropping database links.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN" href="../ADMIN/toc.htm"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for additional information about dropping database links</div>
</div>
<!-- class="sect2" -->
<a id="BABFFGHJ"></a>
<div id="DRDAG141" class="sect2">
<h3 class="sect2">Examining Available Database Links<a id="sthref235"></a></h3>
<p>The data dictionary of each database stores the definitions of all the database links in that database. The <a id="sthref236"></a><a id="sthref237"></a><code dir="ltr">USER_DB_LINKS</code> data dictionary view shows the privately defined database links, that is, those accessible to the current Oracle user. The <a id="sthref238"></a><a id="sthref239"></a><code dir="ltr">ALL_DB_LINKS</code> data dictionary views show all accessible (public and private) database links.</p>
</div>
<!-- class="sect2" -->
<a id="BABFHEFB"></a>
<div id="DRDAG142" class="sect2">
<h3 class="sect2">Limiting the Number of Active Database Links<a id="sthref240"></a></h3>
<p>You can limit the number of connections from a user process to remote databases with the <a id="sthref241"></a><a id="sthref242"></a>parameter <code dir="ltr">OPEN_LINKS</code>. This parameter controls the number of <a id="sthref243"></a>remote connections that any single user process can concurrently use with a single SQL statement. Refer to <a class="olink REFRN" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for additional information about limiting the number of active database links.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGEHEDA"></a>
<div id="DRDAG143" class="sect1">
<h2 class="sect1"><a id="sthref244"></a><a id="sthref245"></a>Accessing the Gateway</h2>
<p>To access the <a id="sthref246"></a>gateway, complete the following steps on the <a id="sthref247"></a>Oracle database:</p>
<ol>
<li>
<p><a href="#BABJBIAA">Login to the Oracle Database</a></p>
</li>
<li>
<p><a href="#BABGGIJG">Create a database link to the DRDA Database</a></p>
</li>
<li>
<p><a href="#BABEFGEE">Retrieve data from the DRDA Database</a></p>
</li>
</ol>
<p class="subhead2"><a id="BABJBIAA"></a><a id="DRDAG1254"></a>Login to the Oracle Database</p>
<p>Login to the Oracle database to access the gateway</p>
<p class="subhead2"><a id="BABGGIJG"></a><a id="DRDAG1255"></a>Create a database link to the DRDA Database</p>
<p>For example, use:</p>
<pre dir="ltr">CREATE PUBLIC DATABASE LINK DRDA
CONNECT TO ORADRDA IDENTIFIED BY <span class="italic">oracle_pw</span> 
USING &#39;<span class="italic">tns_name_entry</span>&#39; 
</pre>
<p class="subhead2"><a id="BABEFGEE"></a><a id="DRDAG1256"></a>Retrieve data from the DRDA Database</p>
<p>This query fetches the <code dir="ltr">TABLE</code> table in the schema <code dir="ltr">SECURE</code>, using the name <code dir="ltr">ORADRDA</code> as the DRDA server user profile. The <code dir="ltr">ORADRDA</code> user profile must have the appropriate privileges on the DRDA server to access the <code dir="ltr">SECURE.TABLE</code> files:</p>
<pre dir="ltr">SELECT * FROM SECURE.TABLE@DRDA
</pre>
<p>The following is an example of the error messages that are displayed if insufficient privileges are displayed:</p>
<pre dir="ltr">ORA-28500: connection from ORACLE to a non-Oracle system returned this message:
[Oracle][ODBC DB2 Wire Protocol driver][UDB DB2 for Windows, UNIX, and
Linux]ORADRDA DOES NOT HAVE PRIVILEGE TO PERFORM OPERATION SELECT ON THIS
OBJECT SECURE.TABLE.
ORA-02063: preceding 2 lines from DRDA
</pre></div>
<!-- class="sect1" -->
<a id="i2862"></a>
<div id="DRDAG144" class="sect1">
<h2 class="sect1">Accessing i5/OS <a id="sthref248"></a>File Members</h2>
<p>Access to <a id="sthref249"></a>i5/OS files and file members is not specifically controlled by DRDA or the gateway. However, DB2 UDB for iSeries uses a naming convention that implies that the <a id="sthref250"></a>file member name is the same as the name of the file being addressed. For example, accessing <code dir="ltr">schema.table</code> implies that table is the file name and also that table is the file member name being accessed.</p>
<p>To access file members with names that differ from the associated file name, you must create a view within the file so that DB2 UDB for iSeries can reference the correct file member.</p>
<p>One method for creating this view involves issuing the i5/OS command <code dir="ltr">Create Logical File</code> (<code dir="ltr">CRTLF</code>). This action creates a logical association between the file name and the file member name.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
For additional information, refer to the i5/OS Command Language (CL) documentation or to the DB2 UDB for iSeries SQL reference document.</div>
</div>
<!-- class="sect1" -->
<a id="i1235"></a>
<div id="DRDAG145" class="sect1">
<h2 class="sect1">Using the Synonym Feature<a id="sthref251"></a></h2>
<p>You can provide complete data, location, and network transparency by using the synonym feature of Oracle database. When a synonym is defined, the user need not know the underlying table or network <a id="sthref252"></a>protocol being used. A synonym can be public, which means it is available to all Oracle users. A synonym can also be defined as private, available only to the user who created it. Refer to <a class="olink REFRN" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for details on the synonym feature.</p>
<p>The following statement creates a system-wide synonym for the <code dir="ltr">EMP</code> file in the DRDA server with ownership of <code dir="ltr">ORACLE</code>:</p>
<pre dir="ltr">CREATE PUBLIC SYNONYM <a id="sthref253"></a>EMP FOR ORACLE.EMP@DRDA
</pre></div>
<!-- class="sect1" -->
<a id="i2863"></a>
<div id="DRDAG146" class="sect1">
<h2 class="sect1">Performing Distributed Queries<a id="sthref254"></a></h2>
<p>The Oracle Database Gateway technology enables the execution of distributed queries that join data in an Oracle database and in DRDA servers and data from any other data store for which Oracle provides a <a id="sthref255"></a>gateway. These complex operations can be completely transparent to the users requesting the data.</p>
<p>The following example joins data between an Oracle database, DB2 UDB for z/OS, and a DRDA server:</p>
<pre dir="ltr">SELECT o.custname, p.projno, e.ename, sum(e.rate*p.hours)
FROM orders@DB2 o, EMP@ORACLE7 e, projects@DRDA p
WHERE o.projno = p.projno 
AND p.empno = e.empno
GROUP BY o.custname, p.projno, e.ename
</pre>
<p>A combination of views and synonyms, using the following SQL statements, keeps the process of distributed queries transparent to the user:</p>
<pre dir="ltr">CREATE SYNONYM orders for orders@DB2;
CREATE SYNONYM PROJECTS for PROJECTS@DRDA;
CREATE VIEW details (custname,projno,ename,spend)
AS 
SELECT o.custname, p.projno, e.ename, sum(e.rate*p.hours)
FROM orders o, EMP e, projects p
WHERE o.projno = p.projno
AND p.empno = e.empno
GROUP BY o.custname, p.projno, e.ename
</pre>
<p>The following SQL statement retrieves information from these three data stores in one command:</p>
<pre dir="ltr">SELECT * FROM DETAILS;
</pre>
<p>The results of this command are:</p>
<pre dir="ltr">CUSTNAME   PROJNO     ENAME      SPEND
---------  ---------  ---------  ---------
ABC Co.    1         Jones      400
ABC Co.    1         Smith      180
XYZ Inc.   2         Jones      400
XYZ Inc.   2         Smith      180
</pre>
<a id="i5827"></a>
<div id="DRDAG147" class="sect2">
<h3 class="sect2">Two-Phase Commit Processing<a id="sthref256"></a><a id="sthref257"></a></h3>
<p>To fully participate in a two-phase commit transaction, a server must support the <a id="sthref258"></a><a id="sthref259"></a><code dir="ltr">PREPARE TRANSACTION</code> statement. The <code dir="ltr">PREPARE TRANSACTION</code> statement ensures that all participating databases are prepared to <code dir="ltr">COMMIT</code> or to <code dir="ltr">ROLLBACK</code> a specific unit of work.</p>
<p>Oracle database supports the <code dir="ltr">PREPARE TRANSACTION</code> statement. Any number of Oracle database can participate in a distributed two-phase commit transaction. The <code dir="ltr">PREPARE TRANSACTION</code> statement is performed automatically when a <code dir="ltr">COMMIT</code> is issued explicitly by an application or implicitly at the normal end of the application.</p>
<p>The gateway does not support <a id="sthref260"></a>the <code dir="ltr">PREPARE TRANSACTION</code> statement. This limits the <a id="sthref261"></a>two-phase commit protocol when the gateway participates in a distributed transaction. The gateway becomes the commit focal point site of a distributed transaction. The gateway is configured as commit/confirm, so it is always the commit point site, regardless of the commit point strength setting. The gateway commits the unit of work after verifying that all Oracle databases in the transaction have successfully committed their work. The gateway must coordinate the distributed transaction so that only one gateway can participate in a two-phase commit transaction.</p>
<p>Two-phase commit transactions are recorded in the <code dir="ltr">HS_TRANSACTION_LOG</code> table (see the initialization parameter <code dir="ltr">HS_FDS_TRANSACTION_LOG</code>), which is created during installation. This table is created when the <a id="sthref262"></a><code dir="ltr">o2pc.sql</code> script is run. The owner of this table also owns the package. Refer to &#34;DRDA Gateway Package Binding Considerations&#34; on <a class="olink OTGIS130" href="../OTGIS/configdrda_server.htm#OTGIS130"><span class="italic">Oracle Database Gateway Installation and Configuration Guide for IBM AIX on POWER Systems (64-Bit), Linux x86-64, Oracle Solaris on SPARC (64-Bit), Oracle Solaris on x86-64 (64-Bit) and HP-UX Itanium</span></a> or <a class="olink OTGIW130" href="../OTGIW/cfg_drda.htm#OTGIW130"><span class="italic">Oracle Database Gateway Installation and Configuration Guide for Microsoft Windows</span></a>, depending on your platform, for more information.</p>
</div>
<!-- class="sect2" -->
<div id="DRDAG148" class="sect2"><a id="sthref263"></a>
<h3 class="sect2">Distributed DRDA Transactions</h3>
<p><a id="sthref264"></a>Because the <code dir="ltr">HS_TRANSACTION_LOG</code> table is used to record the status of a gateway transaction, this table must be in at the database where the DRDA update takes place. Therefore, all updates that take place over the gateway must be local to the IBM database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>Updates to the <code dir="ltr">HS_TRANSACTION_LOG</code> table cannot be part of an IBM distributed transaction.</p>
</li>
<li>
<p>The default commit mode on OS400 V5R1 and later is <code dir="ltr">READ UNCOMMITTED (*CHG)</code> and this requires files to be journaled. Hence, the object specified by the <code dir="ltr">HS_TRANSACTION_LOG</code> initialization parameter must be journaled.</p>
</li>
</ul>
</div>
<p>For additional information about the two-phase commit process, refer to <a class="olink ADMIN" href="../ADMIN/toc.htm"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i3053"></a>
<div id="DRDAG150" class="sect1">
<h2 class="sect1">Replicating in a Heterogeneous Environment<a id="sthref265"></a><a id="sthref266"></a></h2>
<p>Oracle Database Gateway for DRDA provides a number of <a id="sthref267"></a>options for replicating Oracle and non-Oracle data throughout the enterprise.</p>
<p class="subhead2"><a id="DRDAG1257"></a>Oracle Database Triggers</p>
<p>When updates are made to Oracle database, synchronous copies of Oracle and non-Oracle data can be maintained automatically by using <a id="sthref268"></a><a id="sthref269"></a>Oracle database triggers.</p>
<p class="subhead2"><a id="DRDAG1258"></a>Oracle Snapshots<a id="sthref270"></a><a id="sthref271"></a></p>
<p>Oracle Database Gateway for DRDA can use the Oracle snapshot feature to automatically replicate non-Oracle data into Oracle database. The complete refresh capability of Oracle<a id="sthref272"></a> snapshot can be used to propagate a complete copy or a subset of the non-Oracle data into Oracle database at user-defined intervals.</p>
</div>
<!-- class="sect1" -->
<a id="i3409"></a>
<div id="DRDAG151" class="sect1">
<h2 class="sect1">Copying<a id="sthref273"></a> Data from Oracle Database <a id="sthref274"></a> to DRDA Server</h2>
<p>The <a id="sthref275"></a><code dir="ltr">COPY</code> command<a id="sthref276"></a> enables you to copy data from Oracle database to a DRDA server. The Oracle SQL <code dir="ltr">INSERT</code> <a id="sthref277"></a>command is not supported. If you use the <a id="sthref278"></a><code dir="ltr">INSERT</code> command:</p>
<pre dir="ltr">INSERT INTO DRDA_table SELECT * FROM local_table
</pre>
<p>then the following message is displayed:</p>
<pre dir="ltr"><a id="sthref279"></a>ORA-2025<a id="sthref280"></a>: All tables in the SQL statement must be at the <a id="sthref281"></a>remote database
</pre>
<p>To copy data from your Oracle database to the DRDA server, use:</p>
<pre dir="ltr">COPY FROM <span class="italic">username/password@connect_identifier -</span> 
INSERT <span class="italic">destination_table -</span>  
USING <span class="italic">query</span> 
</pre>
<p>For example, to select all rows from the local Oracle <code dir="ltr"><a id="sthref282"></a></code><code dir="ltr">EMP</code> table, insert them into the <code dir="ltr">EMP</code> table on the DRDA server, and commit the transaction, use:</p>
<pre dir="ltr">COPY FROM scott/tiger@ORACLE -
INSERT scott.EMP@DRDA -
USING SELECT * FROM EMP
</pre>
<p>The <a id="sthref283"></a>SQL*Plus <code dir="ltr">COPY</code> command supports <a id="sthref284"></a><code dir="ltr">APPEND</code>, <a id="sthref285"></a><code dir="ltr">CREATE</code>, <a id="sthref286"></a><code dir="ltr">INSERT</code>, and <a id="sthref287"></a><code dir="ltr">REPLACE</code> <a id="sthref288"></a> commands. However, <code dir="ltr">INSERT</code> is the only command supported when copying to the DRDA server. For more information about the <a id="sthref289"></a><a id="sthref290"></a><code dir="ltr">COPY</code> command, refer to <a class="olink SQPUG" href="../SQPUG/toc.htm"><span class="italic">SQL*Plus User&#39;s Guide and Reference</span></a>.</p>
</div>
<!-- class="sect1" -->
<a id="i3449"></a>
<div id="DRDAG152" class="sect1">
<h2 class="sect1">Copying<a id="sthref291"></a> Data from DRDA Server to Oracle Database <a id="sthref292"></a></h2>
<p>The <code dir="ltr">CREATE TABLE</code> command enables you to copy data from a DRDA server to Oracle database. To create a table on your Oracle database and to insert rows from a DRDA server table, use:</p>
<pre dir="ltr">CREATE TABLE <span class="italic">table_name</span> 
AS <span class="italic">query</span> 
</pre>
<p>A SQL <code dir="ltr">INSERT</code> into an Oracle table can be done selecting data from the gateway as follows:</p>
<pre dir="ltr">INSERT INTO <span class="italic">local_table</span> SELECT * FROM <span class="italic">drda_table</span>
</pre>
<p>The following example creates the table <code dir="ltr">EMP</code> in your local Oracle database and inserts the rows from the <code dir="ltr">EMP</code> table on the DRDA server:</p>
<pre dir="ltr">CREATE TABLE EMP
AS SELECT * FROM scott.EMP@DRDA
</pre>
<p>Alternatively, you can use the SQL*Plus <code dir="ltr">COPY</code> command to copy data from a DRDA server to Oracle database. For more information about the <code dir="ltr">COPY</code> command, refer to <a class="olink SQPUG" href="../SQPUG/toc.htm"><span class="italic">SQL*Plus User&#39;s Guide and Reference</span></a>.</p>
</div>
<!-- class="sect1" -->
<a id="i2866"></a>
<div id="DRDAG153" class="sect1">
<h2 class="sect1">Tracing SQL Statements<a id="sthref293"></a><a id="sthref294"></a></h2>
<p><a id="sthref295"></a>SQL statements issued through the gateway can be changed before reaching the DRDA database. These changes are made to make the format acceptable to the gateway or to make Oracle SQL compatible with DRDA server SQL. Oracle database and the gateway can change the statements depending on the situation.</p>
<p>For various reasons, you might need to assess whether the gateway has altered the statement correctly or whether the statement could be rewritten to improve performance. <a id="sthref296"></a>SQL tracing is a feature that allows you to view the changes made to a SQL statement by the Oracle database or the gateway.</p>
<p>SQL tracing reduces gateway performance. Use tracing only when testing and <a id="sthref297"></a><a id="sthref298"></a>debugging your application. Do not enable SQL tracing when the application is running in a production environment. For more information about enabling SQL tracing, refer to the section on <a href="errors.htm#i25970">&#34;SQL Tracing and the Gateway&#34;</a> in <a href="errors.htm#g33155">Chapter 5, &#34;Error Messages, Diagnosis, and Reporting&#34;</a>.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5105">
<tr>
<td class="cellalignment5114">
<table class="cellalignment5110">
<tr>
<td class="cellalignment5109"><a href="rel_info.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5109"><a href="dev_apps.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2004, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5116">
<table class="cellalignment5108">
<tr>
<td class="cellalignment5109"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5109"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5109"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5109"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5109"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5109"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>