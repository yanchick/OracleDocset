<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-106510"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Identifying%20High-Load%20SQL%20Statements"></a><title>Identifying High-Load SQL Statements</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-01-18T01:22:51Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database 2 Day + Performance Tuning Guide"/>
<meta name="dcterms.identifier" content="E55047-05"/>
<meta name="dcterms.isVersionOf" content="TDPPT"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="tdppt_partfour.htm" title="Previous" type="text/html"/>
<link rel="Next" href="tdppt_sqltune.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E55047-05.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-D4D8C985-93B4-402C-A6C9-D5ABA980BEDB"></a> <span id="PAGE" style="display:none;">19/22</span> <!-- End Header -->
<a id="TDPPT140"></a>
<h1 id="TDPPT-GUID-D4D8C985-93B4-402C-A6C9-D5ABA980BEDB" class="sect1"><span class="enumeration_chapter">11</span> Identifying High-Load SQL Statements</h1>
<div>
<p>High-load SQL statements<a id="d20667e74" class="indexterm-anchor"></a> may consume a disproportionate amount of system resources. These SQL statements often greatly affect database performance and must be tuned to optimize their performance and resource consumption. Even when a database is properly tuned, inefficient SQL can significantly degrade performance.</p>
<p>Identifying high-load SQL statements is an important SQL tuning activity that must be performed regularly. Automatic Database Diagnostic Monitor (ADDM) automates this task by proactively identifying potential high-load SQL statements. Additionally, you can use Oracle Enterprise Manager Cloud Control (Cloud Control) to identify high-load SQL statements that require further investigation. After you have identified the high-load SQL statements, you can tune them with SQL Tuning Advisor and SQL Access Advisor.</p>
<p>This chapter describes how to identify high-load SQL statements and contains the following sections:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="tdppt_sqlid.htm#GUID-795AF9F0-5CBF-44FB-8D20-FC170EFA149C">Identification of High-Load SQL Statements Using ADDM Findings</a></p>
</li>
<li>
<p><a href="tdppt_sqlid.htm#GUID-572D0FE3-BC16-4107-A8CC-EF59480B9C9E">Identifying High-Load SQL Statements Using Top SQL</a></p>
</li>
</ul>
</div>
<a id="TDPPT141"></a>
<div class="props_rev_3"><a id="GUID-795AF9F0-5CBF-44FB-8D20-FC170EFA149C"></a>
<h2 id="TDPPT-GUID-795AF9F0-5CBF-44FB-8D20-FC170EFA149C" class="sect2">Identification of High-Load SQL Statements Using ADDM Findings</h2>
<div>
<p>By default, ADDM runs proactively once every hour. It analyzes key statistics gathered by the Automatic Workload Repository (AWR) over the last hour to identify any performance problems, including high-load SQL statements<a id="d20667e170" class="indexterm-anchor"></a><a id="d20667e174" class="indexterm-anchor"></a>. When the system finds performance problems, it displays them as ADDM findings in the Automatic Database Diagnostic Monitor (ADDM) page.</p>
<p>ADDM provides recommendations with each ADDM finding. When a high-load SQL statement is identified, ADDM gives recommendations, such as running SQL Tuning Advisor on the SQL statement. You can begin tuning SQL statements as described in <a href="tdppt_sqltune.htm#GUID-6B386EC1-A58F-4CFC-AEFB-9F787A112396">Tuning SQL Statements</a> .</p>
<div class="infoboxnotealso" id="GUID-795AF9F0-5CBF-44FB-8D20-FC170EFA149C__GUID-C06B2CDF-ECF1-426C-8658-12F951B50EDD">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="tdppt_auto.htm#GUID-32E92AEC-AF1A-4602-B998-3250920CD3BE">Overview of Automatic Database Diagnostic Monitor</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="tdppt_auto.htm#GUID-3262CC73-BDB4-4315-907C-440307A0565C">Interpretation of Automatic Database Diagnostic Monitor Findings</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="tdppt_auto.htm#GUID-8CBEA3E7-7550-41D9-ACFF-13BACF9900F1">Implementing Automatic Database Diagnostic Monitor Recommendations</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="TDPPT430"></a><a id="TDPPT142"></a>
<div class="props_rev_3"><a id="GUID-572D0FE3-BC16-4107-A8CC-EF59480B9C9E"></a>
<h2 id="TDPPT-GUID-572D0FE3-BC16-4107-A8CC-EF59480B9C9E" class="sect2">Identifying High-Load SQL Statements Using Top SQL</h2>
<div>
<div class="section">
<p>ADDM automatically identifies high-load SQL statements that may be causing systemwide performance degradation. Under normal circumstances, manual identification of high-load SQL statements is not necessary. In some cases, however, you may want to monitor SQL statements at a more granular level. The Top SQL section<a id="d20667e283" class="indexterm-anchor"></a><a id="d20667e287" class="indexterm-anchor"></a><a id="d20667e291" class="indexterm-anchor"></a> of the Top Activity page in Cloud Control enables you to identify high-load SQL statements for any 5-minute interval.</p>
<p><a href="tdppt_sqlid.htm#GUID-572D0FE3-BC16-4107-A8CC-EF59480B9C9E__CHDEDBJE">Figure 11-1</a> shows an example of the Top Activity page. The page shows a 1-hour time line of the top activity running on the database. SQL statements that are using the highest percentage of database activity are listed under the Top SQL section, and are displayed in 5-minute intervals.</p>
<div class="figure" id="GUID-572D0FE3-BC16-4107-A8CC-EF59480B9C9E__CHDEDBJE">
<p class="titleinfigure">Figure 11-1 Top Activity Page</p>
<img width="755" height="616" src="img/GUID-69E5028A-9B69-4B16-9F33-5083EC402A52-default.gif" alt="Description of Figure 11-1 follows" title="Description of Figure 11-1 follows"/><br/>
<a href="img_text/GUID-69E5028A-9B69-4B16-9F33-5083EC402A52-default.htm">Description of &#34;Figure 11-1 Top Activity Page&#34;</a></div>
<!-- class="figure" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">To access the Top Activity page:</p>
<ol>
<li>
<p>Access the Database Home page.</p>
<p>See <span class="q">&#34;<a href="tdppt_intro.htm#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">Accessing the Database Home Page</a>&#34;</span> for more information.</p>
</li>
<li>
<p>From the <span class="bold">Performance</span> menu, select <span class="bold">Top Activity</span>.</p>
<p>If the Database Login page appears, then log in as a user with administrator privileges. The Top Activity page appears.</p>
</li>
<li>
<p>To move the 5-minute interval, drag the shaded box to the desired time.</p>
<p>The information contained in the Top SQL section is automatically updated to reflect the selected time period.</p>
</li>
<li>
<p>To monitor SQL statements for a longer duration than one hour, select <span class="bold">Historical</span> from the View Data list.</p>
<p>In Historical view, you can view the top SQL statements for the duration defined by the AWR retention period.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p>This section contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="tdppt_sqlid.htm#GUID-65BF9DC3-4FD4-4CA9-B678-21D36E7188D6">Viewing SQL Statements by Wait Class</a></p>
</li>
<li>
<p><a href="tdppt_sqlid.htm#GUID-FDC4381B-0703-4FBF-93FC-36B9425A85C0">Viewing Details of SQL Statements</a></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
<a id="TDPPT143"></a>
<div class="props_rev_3"><a id="GUID-65BF9DC3-4FD4-4CA9-B678-21D36E7188D6"></a>
<h3 id="TDPPT-GUID-65BF9DC3-4FD4-4CA9-B678-21D36E7188D6" class="sect3">Viewing SQL Statements by Wait Class</h3>
<div>
<div class="section">
<p>The SQL statements that appear in the Top SQL section of the Top Activity page<a id="d20667e433" class="indexterm-anchor"></a><a id="d20667e437" class="indexterm-anchor"></a><a id="d20667e441" class="indexterm-anchor"></a> are categorized into various wait classes, based on their corresponding class as described in the legend on the Top Activity chart.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To view the SQL statements for a particular wait class:</p>
<ol>
<li>
<p>Access the Database Home page.</p>
<p>See <span class="q">&#34;<a href="tdppt_intro.htm#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">Accessing the Database Home Page</a>&#34;</span> for more information.</p>
</li>
<li>
<p>From the <span class="bold">Performance</span> menu, select <span class="bold">Top Activity</span>.</p>
<p>If the Database Login page appears, then log in as a user with administrator privileges. The Top Activity page appears.</p>
</li>
<li>
<p>In the Top Activity chart, click the block of color on the chart for the wait class, or its corresponding wait class in the legend.</p>
<p>The Active Sessions Working page for the selected wait class appears. The Top SQL section automatically updates to show only the SQL statements for the specified wait class.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-65BF9DC3-4FD4-4CA9-B678-21D36E7188D6__GUID-296B5F6D-8C9C-4FE4-B74C-7F052CB4C9AA">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="tdppt_realtime.htm#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">Monitoring User Activity</a>&#34;</span> for information about using the Active Sessions Working page</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPPT144"></a>
<div class="props_rev_3"><a id="GUID-FDC4381B-0703-4FBF-93FC-36B9425A85C0"></a>
<h3 id="TDPPT-GUID-FDC4381B-0703-4FBF-93FC-36B9425A85C0" class="sect3">Viewing Details of SQL Statements</h3>
<div>
<div class="section">
<p>The Top SQL section of the Top Activity page displays the SQL statements<a id="d20667e563" class="indexterm-anchor"></a> executed within the selected 5-minute interval in descending order based on their resource consumption. The SQL statement at the top of this table represents the most resource-intensive SQL statement during that time period, followed by the second most resource-intensive SQL statement, and so on.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To view details of SQL statements:</p>
<ol>
<li>
<p>Access the Database Home page.</p>
<p>See <span class="q">&#34;<a href="tdppt_intro.htm#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">Accessing the Database Home Page</a>&#34;</span> for more information.</p>
</li>
<li>
<p>From the <span class="bold">Performance</span> menu, select <span class="bold">Top Activity</span>.</p>
<p>If the Database Login page appears, then log in as a user with administrator privileges. The Top Activity page<a id="d20667e593" class="indexterm-anchor"></a> appears.</p>
</li>
<li>
<p>In the Top SQL section, click the <span class="bold">SQL ID</span> link of the SQL statement.</p>
<p>The SQL Details page for the selected SQL statement appears.</p>
</li>
<li>
<p>To view SQL details for a longer period, select <span class="bold">Historical</span> from the View Data list.</p>
<div class="figure" id="GUID-FDC4381B-0703-4FBF-93FC-36B9425A85C0__GUID-F6AF52ED-21B3-4C72-A266-205EE1131862"><img width="283" height="101" src="img/GUID-3E16926D-565D-433E-A5D4-363D817863F5-default.gif" alt="Description of GUID-3E16926D-565D-433E-A5D4-363D817863F5-default.gif follows" title="Description of GUID-3E16926D-565D-433E-A5D4-363D817863F5-default.gif follows"/><br/>
<a href="img_text/GUID-3E16926D-565D-433E-A5D4-363D817863F5-default.htm">Description of the illustration GUID-3E16926D-565D-433E-A5D4-363D817863F5-default.gif</a></div>
<!-- class="figure" -->
<p>You can now view SQL details in the past, up to the duration defined by the AWR retention period.</p>
</li>
<li>
<p>In the Text section, review the SQL text for the SQL statement.</p>
<p>The Text section<a id="d20667e622" class="indexterm-anchor"></a> contains the SQL text for the selected SQL statement. Note that if only part of the SQL statement is displayed, then a plus sign (<code>+</code>) icon appears next to the Text heading. To view the SQL text for the entire SQL statement, click the plus sign (<span class="bold">+</span>) icon.</p>
<p>In <a href="tdppt_sqlid.htm#GUID-572D0FE3-BC16-4107-A8CC-EF59480B9C9E__CHDEDBJE">Figure 11-1</a>, the text of the SQL statement <code>ddthrb7j9a63f</code> is as follows:</p>
<pre dir="ltr">SELECT E.LAST_NAME, J.JOB_TITLE, D.DEPARTMENT_NAME
FROM   HR.EMPLOYEES E, HR.DEPARTMENTS D, HR.JOBS J
WHERE  E.DEPARTMENT_ID = D.DEPARTMENT_ID 
AND    E.JOB_ID = J.JOB_ID 
AND    E.LAST_NAME LIKE &#39;A%&#39;
</pre></li>
<li>
<p>In the Plan Hash Value list in the Details section, do one of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>If the SQL statement has multiple plans, then select <span class="bold">All</span> to show SQL details for all plans.</p>
</li>
<li>
<p>Select a particular plan to display SQL details for this plan only.</p>
</li>
</ul>
</li>
<li>
<p>View the subpages available on the SQL Details page to display additional information about the SQL statement, as described in the following sections:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="tdppt_sqlid.htm#GUID-C6418DB0-9238-429D-9159-DE7E6E20393E">Viewing SQL Statistics</a></p>
</li>
<li>
<p><a href="tdppt_sqlid.htm#GUID-AD63DDAB-0B64-4F02-8FA6-D8488607222B">Viewing Session Activity</a></p>
</li>
<li>
<p><a href="tdppt_sqlid.htm#GUID-586546C6-60A2-473A-9FA5-B683EC5AB7C6">Viewing the SQL Execution Plan</a></p>
</li>
<li>
<p><a href="tdppt_sqlid.htm#GUID-5FDF9E5C-1CE6-4262-BD21-BAE7D4A5F615">Viewing the Plan Control</a></p>
</li>
<li>
<p><a href="tdppt_sqlid.htm#GUID-EA069807-764B-4E0A-B5B3-63ADFE876B96">Viewing the Tuning History</a></p>
</li>
</ul>
</li>
<li>
<p>If the SQL statement is a high-load SQL statement, then tune it as described in <a href="tdppt_sqltune.htm#GUID-6B386EC1-A58F-4CFC-AEFB-9F787A112396">Tuning SQL Statements</a> .</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
<a id="TDPPT497"></a>
<div class="props_rev_3"><a id="GUID-C6418DB0-9238-429D-9159-DE7E6E20393E"></a>
<h4 id="TDPPT-GUID-C6418DB0-9238-429D-9159-DE7E6E20393E" class="sect4">Viewing SQL Statistics</h4>
<div>
<div class="section">
<p>The <a id="d20667e768" class="indexterm-anchor"></a><a id="d20667e772" class="indexterm-anchor"></a>Statistics subpage of the SQL Details page displays statistical information about the SQL statement.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To view statistics for the SQL statement:</p>
<ol>
<li>
<p>Access the SQL Details page, as explained in <span class="q">&#34;<a href="tdppt_sqlid.htm#GUID-FDC4381B-0703-4FBF-93FC-36B9425A85C0">Viewing Details of SQL Statements</a>&#34;</span>.</p>
</li>
<li>
<p>Under Details, click <span class="bold">Statistics</span>.</p>
<p>The Statistics subpage appears.</p>
<div class="figure" id="GUID-C6418DB0-9238-429D-9159-DE7E6E20393E__GUID-618C54AC-5F94-40E8-B067-8B3D3633F503"><img width="700" height="577" src="img/GUID-6BF7E00B-70F1-4C95-ADFF-5EC68DEF78A0-default.gif" alt="Description of GUID-6BF7E00B-70F1-4C95-ADFF-5EC68DEF78A0-default.gif follows" title="Description of GUID-6BF7E00B-70F1-4C95-ADFF-5EC68DEF78A0-default.gif follows"/><br/>
<a href="img_text/GUID-6BF7E00B-70F1-4C95-ADFF-5EC68DEF78A0-default.htm">Description of the illustration GUID-6BF7E00B-70F1-4C95-ADFF-5EC68DEF78A0-default.gif</a></div>
<!-- class="figure" --></li>
<li>
<p>View the statistics for the SQL statement, as described in the following sections:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="tdppt_sqlid.htm#GUID-C1A2F014-0B46-4289-9A72-984CC83B456E">SQL Statistics Summary</a></p>
</li>
<li>
<p><a href="tdppt_sqlid.htm#GUID-4D30886E-A7BC-4A42-A115-3661999FD6D4">General SQL Statistics</a></p>
</li>
<li>
<p><a href="tdppt_sqlid.htm#GUID-9DAF8880-E83F-436A-95FD-6945E6B7C419">Activity by Waits Statistics and Activity by Time Statistics</a></p>
</li>
<li>
<p><a href="tdppt_sqlid.htm#GUID-6C19EB4C-5EA4-4EB2-80A8-A59D669AF509">Elapsed Time Breakdown Statistics</a></p>
</li>
<li>
<p><a href="tdppt_sqlid.htm#GUID-E5A10F7C-133D-463D-A5B4-C5AAA9253A40">Shared Cursors Statistics and Execution Statistics</a></p>
</li>
<li>
<p><a href="tdppt_sqlid.htm#GUID-A519C862-8042-42CA-9C6F-1118728CFA4D">Other SQL Statistics</a></p>
</li>
</ul>
</li>
</ol>
</div>
<!-- class="section" --></div>
<a id="TDPPT499"></a>
<div class="props_rev_3"><a id="GUID-C1A2F014-0B46-4289-9A72-984CC83B456E"></a>
<h5 id="TDPPT-GUID-C1A2F014-0B46-4289-9A72-984CC83B456E" class="sect5">SQL Statistics Summary</h5>
<div>
<p>The Summary section displays SQL statistics and activity on a chart.</p>
<p>In the Real Time view, the Active Sessions chart shows the average number of active sessions executing the SQL statement in the last hour. If the SQL statement has multiple plans and <span class="bold">All</span> is selected in the Plan Hash Value list, then the chart displays each plan in different colors, enabling you to easily spot if the plan changed and whether this may be the cause of the performance degradation. Alternatively, you can select a particular plan to display that plan only.</p>
<p>In the Historical view, the chart shows execution statistics in different dimensions. To view execution statistics, select the desired dimension from the View list:</p>
<ul style="list-style-type: disc;">
<li>
<p>Elapsed time per execution</p>
</li>
<li>
<p>Executions per hour</p>
</li>
<li>
<p>Disk reads per execution</p>
</li>
<li>
<p>Buffer gets per execution</p>
</li>
</ul>
<p>This technique enables you to track the response time of the SQL statement using different dimensions. You can determine whether the performance of the SQL statement has degraded based on the dimension selected.</p>
<p>To view statistics of the SQL statement for a particular time interval, click the snapshot icon below the chart. You can also use the arrows to scroll the chart to locate a desired snapshot.</p>
</div>
</div>
<a id="TDPPT500"></a>
<div class="props_rev_3"><a id="GUID-4D30886E-A7BC-4A42-A115-3661999FD6D4"></a>
<h5 id="TDPPT-GUID-4D30886E-A7BC-4A42-A115-3661999FD6D4" class="sect5">General SQL Statistics</h5>
<div>
<p>The General section enables you to identify the origin of the SQL statement by listing the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p>Module, if specified using the <code>DBMS_APPLICATION_INFO</code> package</p>
</li>
<li>
<p>Action, if specified using the <code>DBMS_APPLICATION_INFO</code> package</p>
</li>
<li>
<p>Parsing schema, or the database account used to execute the SQL statement</p>
</li>
<li>
<p>PL/SQL source, or the code line if the SQL statement is part of a PL/SQL program</p>
</li>
</ul>
</div>
</div>
<a id="TDPPT501"></a>
<div class="props_rev_3"><a id="GUID-9DAF8880-E83F-436A-95FD-6945E6B7C419"></a>
<h5 id="TDPPT-GUID-9DAF8880-E83F-436A-95FD-6945E6B7C419" class="sect5">Activity by Waits Statistics and Activity by Time Statistics</h5>
<div>
<p>The Activity by Waits and Activity by Time sections enable you to identify how the SQL statement spent most of its time. The Activity by Waits section contains a graphical representation of how much elapsed time is consumed by CPU and by remaining waits. The Activity by Time section breaks out the total elapsed time into CPU time and wait time by seconds.</p>
</div>
</div>
<a id="TDPPT502"></a>
<div class="props_rev_3"><a id="GUID-6C19EB4C-5EA4-4EB2-80A8-A59D669AF509"></a>
<h5 id="TDPPT-GUID-6C19EB4C-5EA4-4EB2-80A8-A59D669AF509" class="sect5">Elapsed Time Breakdown Statistics</h5>
<div>
<p>The Elapsed Time Breakdown section enables you to identify if the SQL statement itself is consuming a lot of time, or if the total elapsed time is inflated due to the amount of time the originating program or application spent with the PL/SQL or Java engine. If the PL/SQL time or Java time makes up a significant portion of the elapsed time, then there may be minimal benefit gained by tuning the SQL statement. Instead, you should examine the application to determine how the PL/SQL time or Java time can be reduced.</p>
</div>
</div>
<a id="TDPPT503"></a>
<div class="props_rev_3"><a id="GUID-E5A10F7C-133D-463D-A5B4-C5AAA9253A40"></a>
<h5 id="TDPPT-GUID-E5A10F7C-133D-463D-A5B4-C5AAA9253A40" class="sect5">Shared Cursors Statistics and Execution Statistics</h5>
<div>
<p>The Shared Cursors Statistics and Execution Statistics sections provide information about the efficiency of various stages of the SQL execution process.</p>
</div>
</div>
<a id="TDPPT504"></a>
<div class="props_rev_3"><a id="GUID-A519C862-8042-42CA-9C6F-1118728CFA4D"></a>
<h5 id="TDPPT-GUID-A519C862-8042-42CA-9C6F-1118728CFA4D" class="sect5">Other SQL Statistics</h5>
<div>
<p>The Other Statistics section provides additional information about the SQL statement, such as average persistent and run-time memory.</p>
</div>
</div>
</div>
<a id="TDPPT505"></a>
<div class="props_rev_3"><a id="GUID-AD63DDAB-0B64-4F02-8FA6-D8488607222B"></a>
<h4 id="TDPPT-GUID-AD63DDAB-0B64-4F02-8FA6-D8488607222B" class="sect4">Viewing Session Activity</h4>
<div>
<div class="section">
<p>The Activity subpage<a id="d20667e1412" class="indexterm-anchor"></a><a id="d20667e1416" class="indexterm-anchor"></a> contains a graphical representation of the session activity.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To view session activity for the SQL statement:</p>
<ol>
<li>
<p>Access the SQL Details page, as explained in <span class="q">&#34;<a href="tdppt_sqlid.htm#GUID-FDC4381B-0703-4FBF-93FC-36B9425A85C0">Viewing Details of SQL Statements</a>&#34;</span>.</p>
</li>
<li>
<p>Under Details, click <span class="bold">Activity</span>.</p>
<p>The SQL Details page appears, showing the Activity subpage.</p>
<div class="figure" id="GUID-AD63DDAB-0B64-4F02-8FA6-D8488607222B__GUID-B419CCE9-520D-4103-9A8D-B0FEF8FB4E11"><img width="684" height="417" src="img/GUID-B0F4F2DF-E693-46A6-8746-5597BF527364-default.gif" alt="Description of GUID-B0F4F2DF-E693-46A6-8746-5597BF527364-default.gif follows" title="Description of GUID-B0F4F2DF-E693-46A6-8746-5597BF527364-default.gif follows"/><br/>
<a href="img_text/GUID-B0F4F2DF-E693-46A6-8746-5597BF527364-default.htm">Description of the illustration GUID-B0F4F2DF-E693-46A6-8746-5597BF527364-default.gif</a></div>
<!-- class="figure" -->
<p>The Activity subpage displays details of various sessions executing the SQL statement. The Active Sessions chart profiles the average number of active sessions over time.</p>
</li>
<li>
<p>Optionally, drag the shaded box to select a 5-minute interval.</p>
<p>The Detail for Selected 5 Minute Interval section lists the sessions that executed the SQL statement during the selected 5-minute interval. The multicolored bar in the <span>Activity %</span> column depicts how the database time is divided for each session while executing the SQL statement.</p>
</li>
<li>
<p>Optionally, click the link in the <span class="bold">SID</span> column of the session you want to view to display the Session Details page.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-AD63DDAB-0B64-4F02-8FA6-D8488607222B__GUID-76EA6DDA-6AAA-4B24-BC53-14C08443A408">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="tdppt_realtime.htm#GUID-F89D9B48-A4CA-4AC6-80FB-81EF8BB78DFC">Monitoring Top Sessions</a>&#34;</span> for information about monitoring session activity and details</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPPT506"></a>
<div class="props_rev_3"><a id="GUID-586546C6-60A2-473A-9FA5-B683EC5AB7C6"></a>
<h4 id="TDPPT-GUID-586546C6-60A2-473A-9FA5-B683EC5AB7C6" class="sect4">Viewing the SQL Execution Plan</h4>
<div>
<div class="section">
<p>The <span class="bold">execution plan</span> for a SQL statement is the sequence of operations Oracle Database performs to run the statement. The Plan subpage<a id="d20667e1551" class="indexterm-anchor"></a><a id="d20667e1555" class="indexterm-anchor"></a> displays the execution plan for the SQL statement in a graph view and a table view.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To view the execution plan for the SQL statement:</p>
<ol>
<li>
<p>Access the SQL Details page, as explained in <span class="q">&#34;<a href="tdppt_sqlid.htm#GUID-FDC4381B-0703-4FBF-93FC-36B9425A85C0">Viewing Details of SQL Statements</a>&#34;</span>.</p>
</li>
<li>
<p>Under Details, click <span class="bold">Plan</span>.</p>
<p>The SQL Details page appears, showing the Plan subpage.</p>
</li>
<li>
<p>Click <span class="bold">Graphical</span> to view the SQL execution in a graph view.</p>
<div class="figure" id="GUID-586546C6-60A2-473A-9FA5-B683EC5AB7C6__GUID-7249D0E3-FFFE-4F1C-8B70-2D7D566761E1"><img width="1036" height="537" src="img/GUID-93A90CBC-1D2C-4588-AF25-649BE43B5EC8-default.gif" alt="Description of GUID-93A90CBC-1D2C-4588-AF25-649BE43B5EC8-default.gif follows" title="Description of GUID-93A90CBC-1D2C-4588-AF25-649BE43B5EC8-default.gif follows"/><br/>
<a href="img_text/GUID-93A90CBC-1D2C-4588-AF25-649BE43B5EC8-default.htm">Description of the illustration GUID-93A90CBC-1D2C-4588-AF25-649BE43B5EC8-default.gif</a></div>
<!-- class="figure" --></li>
<li>
<p>Optionally, select an operation in the graph to display details about the operations shown in the execution plan.</p>
<p>The Selection Details section refreshes to show details about the selected operations.</p>
</li>
<li>
<p>If the selected operation is on a particular database object (such as a table), then click the <span class="bold">Object</span> link to view further details about the database object.</p>
</li>
<li>
<p>To view the SQL execution in a table view, click <span class="bold">Tabular</span>.</p>
<p>The Plan subpage refreshes to show the explain plan in a table.</p>
<div class="figure" id="GUID-586546C6-60A2-473A-9FA5-B683EC5AB7C6__GUID-9224C9DA-4EAD-4AD1-95F5-FF3B93B84763"><img width="1031" height="435" src="img/GUID-DE2B522A-6875-4B74-A525-EAE6D86300F0-default.gif" alt="Description of GUID-DE2B522A-6875-4B74-A525-EAE6D86300F0-default.gif follows" title="Description of GUID-DE2B522A-6875-4B74-A525-EAE6D86300F0-default.gif follows"/><br/>
<a href="img_text/GUID-DE2B522A-6875-4B74-A525-EAE6D86300F0-default.htm">Description of the illustration GUID-DE2B522A-6875-4B74-A525-EAE6D86300F0-default.gif</a></div>
<!-- class="figure" -->
<p><span class="bold">Query rewrite</span> is an optimization technique that transforms a user request written in terms of master tables into a semantically equivalent request that includes materialized views. The database compares the cost for the query, with and without query rewrite, and selects the least costly option. If a rewrite is necessary, then query rewrite and its cost benefit are shown in the Explain Rewrite section.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-586546C6-60A2-473A-9FA5-B683EC5AB7C6__GUID-135D1E03-BD99-4D76-9E1D-14BD037AFA9D">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="tdppt_sqltune.htm#GUID-6B386EC1-A58F-4CFC-AEFB-9F787A112396">Tuning SQL Statements</a> &#34;</span> for information about execution plan and the query optimizer</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPPT507"></a>
<div class="props_rev_3"><a id="GUID-5FDF9E5C-1CE6-4262-BD21-BAE7D4A5F615"></a>
<h4 id="TDPPT-GUID-5FDF9E5C-1CE6-4262-BD21-BAE7D4A5F615" class="sect4">Viewing the Plan Control</h4>
<div>
<div class="section">
<p>The <a id="d20667e1702" class="indexterm-anchor"></a>Plan Control subpage contains information about the following items:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>SQL profiles</p>
<p>A SQL profile contains additional statistics for the SQL statement. The optimizer uses these statistics to generate a better execution plan for the statement.</p>
</li>
<li>
<p>SQL patches</p>
<p>A SQL patch is automatically generated to work around an error or performance problem for a single SQL statement.</p>
</li>
<li>
<p>SQL plan baselines</p>
<p>A SQL plan baseline is an execution plan proven to have acceptable performance for a given SQL statement.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To view plan control information:</p>
<ol>
<li>
<p>Access the SQL Details page, as explained in <span class="q">&#34;<a href="tdppt_sqlid.htm#GUID-FDC4381B-0703-4FBF-93FC-36B9425A85C0">Viewing Details of SQL Statements</a>&#34;</span>.</p>
</li>
<li>
<p>Under Details, click <span class="bold">Plan Control</span>.</p>
<p>The SQL Details page appears, showing the Plan Control subpage.</p>
</li>
<li>
<p>Review the plan-related information.</p>
<p>In the following example, the optimizer used a SQL plan baseline named <code>STMT01</code> for the SQL statement.</p>
<div class="figure" id="GUID-5FDF9E5C-1CE6-4262-BD21-BAE7D4A5F615__GUID-9CCBC96C-A543-47C2-BCA1-0E02C9EBEA37"><img width="664" height="259" src="img/GUID-BA74B329-D93C-4A77-B5C0-FEAB9284F247-default.gif" alt="Description of GUID-BA74B329-D93C-4A77-B5C0-FEAB9284F247-default.gif follows" title="Description of GUID-BA74B329-D93C-4A77-B5C0-FEAB9284F247-default.gif follows"/><br/>
<a href="img_text/GUID-BA74B329-D93C-4A77-B5C0-FEAB9284F247-default.htm">Description of the illustration GUID-BA74B329-D93C-4A77-B5C0-FEAB9284F247-default.gif</a></div>
<!-- class="figure" --></li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-5FDF9E5C-1CE6-4262-BD21-BAE7D4A5F615__GUID-73300239-AD2F-4E3E-A942-D095EB92FE3E">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="tdppt_sqltune.htm#GUID-6B386EC1-A58F-4CFC-AEFB-9F787A112396">Tuning SQL Statements</a> &#34;</span> for information about SQL Tuning Advisor and SQL profiles</p>
</li>
<li>
<p><span class="q">&#34;<a href="tdppt_sqltune.htm#GUID-84FE7EBB-54AB-4D11-A910-9C63B8C39441">Managing SQL Profiles</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34; <a href="tdppt_sqlopt.htm#GUID-1E926221-441F-483A-B045-8AE4A5764B8C">Optimizing Data Access Paths</a> &#34;</span> for information about SQL Access Advisor</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPPT508"></a>
<div class="props_rev_3"><a id="GUID-EA069807-764B-4E0A-B5B3-63ADFE876B96"></a>
<h4 id="TDPPT-GUID-EA069807-764B-4E0A-B5B3-63ADFE876B96" class="sect4">Viewing the Tuning History</h4>
<div>
<div class="section">
<p>The SQL Tuning History section displays a history of SQL Tuning Advisor and SQL Access Advisor tasks.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To view the SQL tuning history:</p>
<ol>
<li>
<p>Access the SQL Details page, as explained in <span class="q">&#34;<a href="tdppt_sqlid.htm#GUID-FDC4381B-0703-4FBF-93FC-36B9425A85C0">Viewing Details of SQL Statements</a>&#34;</span>.</p>
</li>
<li>
<p>Under Details, click <span class="bold">Tuning History</span>.</p>
<p>The SQL Details page appears, showing the Tuning History subpage.</p>
</li>
<li>
<p>Review the information about the tuning history.</p>
<p>The SQL Tuning History section displays a history of SQL Tuning Advisor or SQL Access Advisor tasks.</p>
<p>The ADDM Findings for this SQL During Historic Period section displays the number of occurrences of ADDM findings that are associated with the SQL statement.</p>
<p>The following example shows that SQL tuning task was performed by user <code>DBA1</code> on February 9, 2012.</p>
<div class="figure" id="GUID-EA069807-764B-4E0A-B5B3-63ADFE876B96__GUID-E53BFDE4-9D78-4FAD-93F8-966962C69E16"><img width="664" height="191" src="img/GUID-F917463E-CD09-4265-83DF-5AE0A1D195A0-default.gif" alt="Description of GUID-F917463E-CD09-4265-83DF-5AE0A1D195A0-default.gif follows" title="Description of GUID-F917463E-CD09-4265-83DF-5AE0A1D195A0-default.gif follows"/><br/>
<a href="img_text/GUID-F917463E-CD09-4265-83DF-5AE0A1D195A0-default.htm">Description of the illustration GUID-F917463E-CD09-4265-83DF-5AE0A1D195A0-default.gif</a></div>
<!-- class="figure" --></li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-EA069807-764B-4E0A-B5B3-63ADFE876B96__GUID-97309675-1659-4C40-96A8-09FBEC4449E7">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="tdppt_sqltune.htm#GUID-6B386EC1-A58F-4CFC-AEFB-9F787A112396">Tuning SQL Statements</a> &#34;</span> for information about SQL Tuning Advisor and SQL profiles</p>
</li>
<li>
<p><span class="q">&#34;<a href="tdppt_sqltune.htm#GUID-84FE7EBB-54AB-4D11-A910-9C63B8C39441">Managing SQL Profiles</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34; <a href="tdppt_sqlopt.htm#GUID-1E926221-441F-483A-B045-8AE4A5764B8C">Optimizing Data Access Paths</a> &#34;</span> for information about SQL Access Advisor</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment620">
<tr>
<td class="cellalignment627">
<table class="cellalignment625">
<tr>
<td class="cellalignment624"><a href="tdppt_partfour.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment624"><a href="tdppt_sqltune.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment629">
<table class="cellalignment623">
<tr>
<td class="cellalignment624"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment624"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment624"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment624"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment624"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment624"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>