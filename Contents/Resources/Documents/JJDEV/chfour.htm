<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-71037"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Java%20Installation%20and%20Configuration"></a><title>Java Installation and Configuration</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023"/>
<meta name="description" content="This book describes how to develop, load, and run Java applications in Oracle Database."/>
<meta name="dcterms.created" content="2014-06-30T4:25:0Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Java Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E50793-03"/>
<meta name="dcterms.isVersionOf" content="JJDEV"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="chthree.htm" title="Previous" type="text/html"/>
<link rel="Next" href="chfive.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E50793-03.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/23</span> <!-- End Header -->
<div id="JJDEV13214" class="chapter"><a id="BABCFGAB"></a>
<h1 class="chapter"><span class="secnum">4</span> Java Installation and <a id="sthref355"></a><a id="sthref356"></a>Configuration</h1>
<p><a id="sthref357"></a><a id="sthref358"></a>This chapter describes how to install and configure Oracle JVM. It also describes how to enable the Java client. This chapter covers the following topics:</p>
<ul>
<li>
<p><a href="#BABCEEFC">Initializing a Java-Enabled Database</a></p>
</li>
<li>
<p><a href="#BABFJJBC">Configuring Oracle JVM</a></p>
</li>
<li>
<p><a href="#BABEHDBE">Using The DBMS_JAVA Package</a></p>
</li>
<li>
<p><a href="#BABIGIJI">Enabling the Java Client</a></p>
</li>
<li>
<p><a href="#BABICDHE">Two-Tier Duration for Java Session State</a></p>
</li>
<li>
<p><a href="#BABIIBIJ">Setting System Properties</a></p>
</li>
</ul>
<a id="BABCEEFC"></a>
<div id="JJDEV13215" class="sect1">
<h2 class="sect1">Initializing a Java-Enabled Database</h2>
<p>If you install Oracle Database with Oracle JVM option, then the database is Java-enabled. That is, it is ready to run Java stored procedures, Java Database Connectivity (JDBC), and SQLJ.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BABEBCJA">Configuring with Oracle Database Template</a></p>
</li>
<li>
<p><a href="#BABGAHEE">Modifying an Existing Oracle Database to Include Oracle JVM</a></p>
</li>
</ul>
<a id="BABEBCJA"></a>
<div id="JJDEV13216" class="sect2">
<h3 class="sect2">Configuring with Oracle Database Template</h3>
<p>Configure Oracle JVM option within the database template. This is the recommended method for Java installation.</p>
<p>The Database Configuration Assistant enables you to create database templates for defining what each database instance installation will contain. Choose Oracle JVM option to have the Java platform installed within your database.</p>
</div>
<!-- class="sect2" -->
<a id="BABGAHEE"></a>
<div id="JJDEV13217" class="sect2">
<h3 class="sect2">Modifying an Existing Oracle Database to Include Oracle JVM</h3>
<p>If you have already installed Oracle Database without Oracle JVM, then you can add Java to your database through the modify mode of the Database Configuration Assistant of Oracle Database 12<span class="italic">c</span> Release 1 (12.1). The modify mode enables you to choose the features, such as Oracle JVM, that you would like to install on top of an existing Oracle Database instance.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABFJJBC"></a>
<div id="JJDEV13218" class="sect1">
<h2 class="sect1">Configuring <a id="sthref359"></a>Oracle JVM</h2>
<p>Before you install Oracle JVM as part of your standard Oracle Database installation, you must ensure that the <a id="sthref360"></a>configuration requirements for Oracle JVM are fulfilled. The main configuration for Java classes within Oracle Database includes configuring the:</p>
<ul>
<li>
<p>Java memory requirements</p>
<p>You must have at least 50 MB of <code><a id="sthref361"></a>JAVA_POOL_SIZE</code> and 96 MB of <code><a id="sthref362"></a>SHARED_POOL_SIZE</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="chnine.htm#BABHEBIE">&#34;Java Memory Usage&#34;</a></div>
</li>
<li>
<p>Database processes</p>
<p>You must decide whether to use dedicated server processes or shared server processes for your database server.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="BABEHDBE"></a>
<div id="JJDEV13219" class="sect1">
<h2 class="sect1">Using The <a id="sthref363"></a><a id="sthref364"></a>DBMS_JAVA Package</h2>
<p>Installing Oracle JVM creates the <code>DBMS_JAVA</code> PL/SQL package. The <code>DBMS_JAVA</code> package functions can be used by both Database server and Database clients. The corresponding Java class, <code>DbmsJava</code>, provides methods for accessing database functionality from Java.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="appendixa.htm#BGBIGACA">Appendix A, &#34;DBMS_JAVA Package&#34;</a></div>
</div>
<!-- class="sect1" -->
<a id="BABIGIJI"></a>
<div id="JJDEV13220" class="sect1">
<h2 class="sect1">Enabling the <a id="sthref365"></a>Java Client</h2>
<p>To run Java between the client and server, your must perform the following:</p>
<ol>
<li>
<p><a href="#BABEDDHD">Install Java SE on the Client</a></p>
</li>
<li>
<p><a href="#BABGIGDI">Set Up Environment Variables</a></p>
</li>
<li>
<p><a href="#BABJFHBE">Test Install with Samples</a></p>
</li>
</ol>
<a id="BABEDDHD"></a>
<div id="JJDEV13221" class="sect2">
<h3 class="sect2">Install <a id="sthref366"></a><a id="sthref367"></a><a id="sthref368"></a><a id="sthref369"></a>Java SE on the Client</h3>
<p>The client requires Java Development Kit (JDK) 1.6 or later. To confirm the version of JDK you are using, run the following commands on the command line:</p>
<pre>$ which java
/usr/local/jdk1.6.0_26/bin/java

$ which javac
/usr/local/jdk1.6.0_26/bin/javac

$ java -version
java version &#34;1.6.0_26&#34;
</pre></div>
<!-- class="sect2" -->
<a id="BABGIGDI"></a>
<div id="JJDEV13222" class="sect2">
<h3 class="sect2"><a id="sthref370"></a>Set Up Environment Variables</h3>
<p>After installing JDK on your client, add the directory path to the following environment variables:</p>
<ul>
<li>
<p><code>$JAVA_HOME</code></p>
<p>This variable must be set to the top directory of the installed JDK base.</p>
</li>
<li>
<p><code>$PATH</code></p>
<p>This variable must include <code>$JAVA_HOME/bin</code>.</p>
</li>
<li>
<p><code>$LD_LIBRARY_PATH</code></p>
<p>This variable must include <code>$JAVA_HOME/lib</code>.</p>
</li>
</ul>
<p class="subhead2"><a id="JJDEV13223"></a>JAR Files Necessary for Java 2 Clients</p>
<p>To ensure that the Java client successfully communicates with the server, include the following files in the <code>CLASSPATH</code>:</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Specifics of <code>CLASSPATH</code> requirements may vary for Oracle JVMs running on different platforms. You must ensure that all elements of <code>CLASSPATH</code>, as defined in the script for Oracle JVM utilities, are present.</div>
<ul>
<li>
<p>For JDK 1.5.2, include <code>$JAVA_HOME/lib/dt.jar</code></p>
</li>
<li>
<p>For JRE 1.5.2, include <code>$JAVA_HOME/lib/rt.jar</code></p>
</li>
<li>
<p>For any interaction with JDBC, include <code>$ORACLE_HOME/jdbc/lib/ojdbc5.jar</code></p>
</li>
<li>
<p>For any client that uses SSL, include <code>$ORACLE_HOME/jlib/jssl-1_2.jar</code> and <code>$ORACLE_HOME/jlib/javax-ssl-1_2.jar</code></p>
</li>
<li>
<p>For any client that uses the Java Transaction API (JTA) functionality, include <code>$ORACLE_HOME/jlib/jta.jar</code></p>
</li>
<li>
<p>For any client that uses the Java Naming and Directory Interface (JNDI) functionality, include <code>$ORACLE_HOME/jlib/jndi.jar</code></p>
</li>
<li>
<p>If you are using the accelerator for native compilation, include <code>$JAVA_HOME/lib/tools.jar</code></p>
</li>
</ul>
<p class="subhead2"><a id="JJDEV13224"></a>JAR Files Included for Clients that Use SQLJ</p>
<p>You must include the <code>$ORACLE_HOME/sqlj/lib/translator.zip</code> file for SQLJ.</p>
<p>In addition to this file, add the appropriate <code>runtime</code><code><span class="codeinlineitalic">X</span></code><code>.zip</code> file, as follows:</p>
<ul>
<li>
<p>For a Java client using the current release of JDBC, include <code>$ORACLE_HOME/sqlj/lib/runtime12.zip</code></p>
</li>
<li>
<p>For a Java2 Platform, Enterprise Edition (J2EE) client using the current release of JDBC, include <code>$ORACLE_HOME/sqlj/lib/runtime12ee.zip</code></p>
</li>
<li>
<p>For any JDK client using JDBC 8.1.7 or earlier version, include <code>$ORACLE_HOME/sqlj/lib/runtime.zip</code></p>
</li>
</ul>
<p class="subhead2"><a id="JJDEV13225"></a>Server Application Development on the Client</p>
<p>If you develop and compile your server applications on the client and want to use the same Java Archive (JAR) files that are loaded on the server, then include <code>$ORACLE_HOME/lib/aurora.zip</code> in <code>CLASSPATH</code>. This is not required for running Java clients.</p>
</div>
<!-- class="sect2" -->
<a id="BABJFHBE"></a>
<div id="JJDEV13226" class="sect2">
<h3 class="sect2">Test Install with Samples</h3>
<p>When you install Oracle Database with Oracle JVM option, a set of samples is also installed and available in the <code>$ORACLE_HOME/javavm/demo</code> directory. These samples can be compiled and run as a test of your installation.</p>
<p>If these samples do not compile or run, then the environment may be incorrectly set. Similarly, if these samples compile and run, but a code written by you does not, then a problem exists within the build environment or code.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When verifying your installation, it is important that you run these examples using the supplied makefiles.</div>
<p>Verify that the samples work before using more complex build environments, such as Visual Cafe, JDeveloper, or VisualAge.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABICDHE"></a>
<div id="JJDEV13227" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Two-Tier Duration for Java Session State</h2>
<p>Prior to 11<span class="italic">g</span> release 1 (11.1), Java session state was single-tier, which included all values associated with running Java, such as System property values and static variable values, the set of classes loaded during the session and so on. The duration of this state used to start with the first invocation of a Java method in the RDBMS session and it used to last till JVM exited, either due to a call to <code>java.lang.System.exit</code> or similar <code>OracleRuntime</code> methods, an uncaught exception, a fatal error, or the end of the RDBMS session. This required modifying Java code and also failed to fully complete the termination of the session before the end of the RDBMS call. This made it impossible to start a new Java session within the same call.</p>
<p>Starting with 11<span class="italic">g</span> release 1 (11.1), Java session state is split into two tiers. One tier has a longer duration and it encompasses the duration of the other tier. The duration of the shorter tier is the same as before, that is, it starts when a Java method is invoked and ends when JVM exits. The duration of the longer tier starts when a Java method is invoked in the RDBMS session for the first time. This session lasts until the RDBMS session ends or the session is explicitly terminated by a call to the function <code>dbms_java.endsession_and_related_state</code>. This is addressed by the addition of the following two PL/SQL functions to the <code>DBMS_JAVA</code> package, which account for the two kinds of Java session duration:</p>
<ul>
<li>
<p><code>FUNCTION endsession RETURN VARCHAR2;</code></p>
<p>This function clears any Java session state remaining from previous execution of Java in the current RDBMS session. The return value is a message indicating the action taken.</p>
</li>
<li>
<p><code>FUNCTION endsession_and_related_state RETURN VARCHAR2;</code></p>
<p>This function clears any Java session state remaining from previous execution of Java in the current RDBMS session and all supporting data related to running Java, such as property settings and output specifications. The return value is a message indicating the action taken.</p>
</li>
</ul>
<p>Most of the values associated with running Java remain in the shorter tier. The values that can be useful for multiple invocations of JVM have been moved to the longer tier. For example, the system property values established by <code>dbms_java.set_property</code> and the output redirection specifications.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BABIIBIJ">&#34;Setting System Properties&#34;</a> and <a href="chthree.htm#CACIIEDH">&#34;Redirecting Output on the Server&#34;</a>.</div>
</div>
<!-- class="sect1" -->
<a id="BABIIBIJ"></a>
<div id="JJDEV13228" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Setting System Properties</h2>
<p>Within an RDBMS session you can maintain a set of values that are added to the system properties whenever a Java session is started in the RDBMS session. This set of values remains valid for the duration of the longer tier of Java session state, which is typically the same as the duration the RDBMS session.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BABICDHE">&#34;Two-Tier Duration for Java Session State&#34;</a></div>
<p>There is a set of PL/SQL functions in the <code>DBMS_JAVA</code> package for setting, retrieving, removing and displaying key value pairs in an internal, RDBMS session duration table, where both elements of a pair are strings (<code>VARCHAR2</code>) and there is at most one pair for a given key. These functions are as follows:</p>
<ul>
<li>
<p><a href="#BABGBDHE">set_property</a></p>
</li>
<li>
<p><a href="#BABGEDJF">get_property</a></p>
</li>
<li>
<p><a href="#BABJBEGB">remove_property</a></p>
</li>
<li>
<p><a href="#BABGHIEJ">show_property</a></p>
</li>
</ul>
<p class="subhead2"><a id="BABGBDHE"></a><a id="JJDEV13229"></a>set_property</p>
<p>This function establishes a value for a system property that is then used for the duration of the current RDBMS session, whenever a Java session is initialized. The first argument is the name of the property and the second is the value to be established for it. The return value for <code>set_property</code> is null unless there is some error. For example, if an attempt is made to set a value for a prescribed property, then an error message is returned.</p>
<pre>FUNCTION set_property(name VARCHAR2, value VARCHAR2) RETURN VARCHAR2;
</pre>
<p class="subhead2"><a id="BABGEDJF"></a><a id="JJDEV13230"></a>get_property</p>
<p>This function returns any value previously established by <code>set_property.</code> It returns null if there is no such value.</p>
<pre>FUNCTION get_property(name VARCHAR2) RETURN VARCHAR2;
</pre>
<p class="subhead2"><a id="BABJBEGB"></a><a id="JJDEV13231"></a>remove_property</p>
<p>This function removes any value previously established by <code>set_property.</code> The return value is null unless an error occurred, in which case an error message is returned.</p>
<pre>FUNCTION remove_property(name VARCHAR2) RETURN VARCHAR2;
</pre>
<p class="subhead2"><a id="BABGHIEJ"></a><a id="JJDEV13232"></a>show_property</p>
<p>This function displays a message of the form <code>name = value</code> for the input name, or for all established property bindings, if name is null. The return value for this function is null on successful completion, otherwise it is an error message. The output is displayed to wherever you have currently directed your Java output.</p>
<pre>FUNCTION show_property(name VARCHAR2) RETURN VARCHAR2;
</pre>
<p>Before initializing the Java session, the values from this table are added to the set of default system property values already maintained by Oracle JVM. When you run a Java method by using the command-line interface, the values determined by the <code>-D</code> option, if present, override the values set in the table. As soon as you terminate the Java session, the values established by the <code>-D</code> option become obsolete and the keys are set to the original values as present in the table.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3995">
<tr>
<td class="cellalignment4004">
<table class="cellalignment4000">
<tr>
<td class="cellalignment3999"><a href="chthree.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3999"><a href="chfive.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4006">
<table class="cellalignment3998">
<tr>
<td class="cellalignment3999"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3999"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3999"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3999"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3999"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3999"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>