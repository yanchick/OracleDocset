<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-103723"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/ROLLBACK"></a><title>ROLLBACK</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-18T18:53:1Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database SQL Language Reference"/>
<meta name="dcterms.identifier" content="E41329-25"/>
<meta name="dcterms.isVersionOf" content="SQLRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="statements_9022.htm" title="Previous" type="text/html"/>
<link rel="Next" href="statements_10.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41329-25.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">512/555</span> <!-- End Header --><a id="i2104635"></a>
<div id="SQLRF01610" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1">ROLLBACK <a id="sthref7262"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref7263"></a>Purpose</p>
<p><a id="sthref7264"></a><a id="sthref7265"></a><a id="sthref7266"></a>Use the <code dir="ltr">ROLLBACK</code> statement to undo work done in the current transaction or to manually undo the work done by an in-doubt distributed transaction.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that you explicitly end transactions in application programs using either a <code dir="ltr">COMMIT</code> or <code dir="ltr">ROLLBACK</code> statement. If you do not explicitly commit the transaction and the program terminates abnormally, then Oracle Database rolls back the last uncommitted transaction.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CNCPT117" href="../CNCPT/transact.htm#CNCPT117"><span class="italic">Oracle Database Concepts</span></a> for information on transactions</p>
</li>
<li>
<p><a class="olink HETER006" href="../HETER/GUID-38A89AFD-B5E1-4710-A11B-2A05A1276A30.htm#HETER006"><span class="italic">Oracle Database Heterogeneous Connectivity User&#39;s Guide</span></a> for information on distributed transactions</p>
</li>
<li>
<p><a href="statements_10005.htm#i2067247">SET TRANSACTION</a> for information on setting characteristics of the current transaction</p>
</li>
<li>
<p><a href="statements_4011.htm#i2060233">COMMIT</a> and <a href="statements_10001.htm#BABFIJGC">SAVEPOINT</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref7267"></a>Prerequisites</p>
<p>To roll back your current transaction, no privileges are necessary.</p>
<p><a id="sthref7268"></a>To manually roll back an in-doubt distributed transaction that you originally committed, you must have the <code dir="ltr">FORCE</code> <code dir="ltr">TRANSACTION</code> system privilege. To manually roll back an in-doubt distributed transaction originally committed by another user, you must have the <code dir="ltr">FORCE</code> <code dir="ltr">ANY</code> <code dir="ltr">TRANSACTION</code> system privilege.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref7269"></a>Syntax</p>
<p class="subhead2"><a id="SQLRF55215"></a><span class="italic">rollback</span>::=</p>
<img width="567" height="98" src="img/rollback.gif" alt="Description of rollback.gif follows"/><br/>
<a id="sthref7270" href="img_text/rollback.htm">Description of the illustration &#39;&#39;rollback.gif&#39;&#39;</a><br/>
<br/></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref7271"></a>Semantics</p>
<p class="subhead1"><a id="SQLRF55216"></a>WORK</p>
<p>The keyword <code dir="ltr">WORK</code> is optional and is provided for SQL standard compatibility.</p>
<p class="subhead1"><a id="SQLRF55217"></a><a id="sthref7272"></a><a id="sthref7273"></a>TO SAVEPOINT Clause <a id="sthref7274"></a><a id="sthref7275"></a></p>
<p>Specify the savepoint to which you want to roll back the current transaction. If you omit this clause, then the <code dir="ltr">ROLLBACK</code> statement rolls back the entire transaction.</p>
<p>Using <code dir="ltr">ROLLBACK</code> without the <code dir="ltr">TO</code> <code dir="ltr">SAVEPOINT</code> clause performs the following operations:</p>
<ul>
<li>
<p>Ends the transaction</p>
</li>
<li>
<p>Undoes all changes in the current transaction</p>
</li>
<li>
<p>Erases all savepoints in the transaction</p>
</li>
<li>
<p>Releases any transaction locks</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="statements_10001.htm#BABFIJGC">SAVEPOINT</a></div>
<p>Using <code dir="ltr">ROLLBACK</code> with the <code dir="ltr">TO</code> <code dir="ltr">SAVEPOINT</code> clause performs the following operations:</p>
<ul>
<li>
<p>Rolls back just the portion of the transaction after the savepoint. It does not end the transaction.</p>
</li>
<li>
<p>Erases all savepoints created after that savepoint. The named savepoint is retained, so you can roll back to the same savepoint multiple times. Prior savepoints are also retained.</p>
</li>
<li>
<p>Releases all table and row locks acquired since the savepoint. Other transactions that have requested access to rows locked after the savepoint must continue to wait until the transaction is committed or rolled back. Other transactions that have not already requested the rows can request and access the rows immediately.</p>
</li>
</ul>
<p><a id="SQLRF55218"></a><span class="subhead3">Restriction on In-doubt Transactions&nbsp;</span>You cannot manually roll back an in-doubt transaction to a savepoint.</p>
<p class="subhead1"><a id="SQLRF55219"></a>FORCE Clause <a id="sthref7276"></a><a id="sthref7277"></a></p>
<p>Specify <code dir="ltr">FORCE</code> to manually roll back an in-doubt distributed transaction. The transaction is identified by the <code dir="ltr"><span class="codeinlineitalic">string</span></code> containing its local or global transaction ID. To find the IDs of such transactions, query the data dictionary view <code dir="ltr">DBA_2PC_PENDING</code>.</p>
<p>A <code dir="ltr">ROLLBACK</code> statement with a <code dir="ltr">FORCE</code> clause rolls back only the specified transaction. Such a statement does not affect your current transaction.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN032" href="../ADMIN/ds_txnman.htm#ADMIN032"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information on distributed transactions and rolling back in-doubt transactions</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref7278"></a>Examples</p>
<p><a id="SQLRF55220"></a><span class="subhead3">Rolling Back Transactions: Examples&nbsp;</span>The following statement rolls back your entire current transaction:</p>
<pre dir="ltr">ROLLBACK; 
</pre>
<p>The following statement rolls back your current transaction to savepoint <code dir="ltr">banda_sal</code>:</p>
<pre dir="ltr">ROLLBACK TO SAVEPOINT banda_sal; 
</pre>
<p>See <a href="statements_10001.htm#i2106871">&#34;Creating Savepoints: Example&#34;</a> for a full version of the preceding example.</p>
<p>The following statement manually rolls back an in-doubt distributed transaction:</p>
<pre dir="ltr">ROLLBACK WORK 
    FORCE &#39;25.32.87&#39;; 
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" -->
<!-- class="chapter" -->
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5862">
<tr>
<td class="cellalignment5869">
<table class="cellalignment5867">
<tr>
<td class="cellalignment5866"><a href="statements_9022.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5866"><a href="statements_10.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5871">
<table class="cellalignment5865">
<tr>
<td class="cellalignment5866"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5866"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5866"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5866"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5866"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5866"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>