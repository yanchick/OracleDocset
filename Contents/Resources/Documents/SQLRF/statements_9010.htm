<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-103710"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/EXPLAIN%20PLAN"></a><title>EXPLAIN PLAN</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-18T18:52:58Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database SQL Language Reference"/>
<meta name="dcterms.identifier" content="E41329-25"/>
<meta name="dcterms.isVersionOf" content="SQLRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="statements_9009.htm" title="Previous" type="text/html"/>
<link rel="Next" href="statements_9011.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41329-25.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">499/555</span> <!-- End Header --><a id="i2061796"></a>
<div id="SQLRF01601" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1">EXPLAIN PLAN <a id="sthref6502"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6503"></a>Purpose</p>
<p><a id="sthref6504"></a><a id="sthref6505"></a><a id="sthref6506"></a><a id="sthref6507"></a>Use the <code dir="ltr">EXPLAIN</code> <code dir="ltr">PLAN</code> statement to determine the execution plan Oracle Database follows to execute a specified SQL statement. This statement inserts a row describing each step of the execution plan into a specified table. You can also issue the <code dir="ltr">EXPLAIN</code> <code dir="ltr">PLAN</code> statement as part of the SQL trace facility.</p>
<p>This statement also determines the cost of executing the statement. If any domain indexes are defined on the table, then user-defined CPU and I/O costs will also be inserted.</p>
<p><a id="sthref6508"></a><a id="sthref6509"></a>The definition of a sample output table <code dir="ltr">PLAN_TABLE</code> is available in a SQL script on your distribution media. Your output table must have the same column names and data types as this table. The common name of this script is <code dir="ltr">UTLXPLAN.SQL</code>. The exact name and location depend on your operating system.</p>
<p><a id="sthref6510"></a><a id="sthref6511"></a>Oracle Database provides information on cached cursors through several dynamic performance views:</p>
<ul>
<li>
<p>For information on the work areas used by SQL cursors, query <code dir="ltr">V$SQL_WORKAREA</code>.</p>
</li>
<li>
<p>For information on the execution plan for a cached cursor, query <code dir="ltr">V$SQL_PLAN</code>.</p>
</li>
<li>
<p>For execution statistics at each step or operation of an execution plan of cached cursors (for example, number of produced rows, number of blocks read), query <code dir="ltr">V$SQL_PLAN_STATISTICS</code>.</p>
</li>
<li>
<p>For a selective precomputed join of the preceding three views, query <code dir="ltr">V$SQL_PLAN_STATISTICS_ALL</code>.</p>
</li>
<li>
<p>Execution statistics at each step or operation of an execution plan of cached cursors are displayed in <code dir="ltr">V$SQL_PLAN_MONITOR</code> if the statement execution is monitored. You can force monitoring using the <code dir="ltr">MONITOR</code> hint.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink TGSQL271" href="../TGSQL/tgsql_genplan.htm#TGSQL271"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for information on the output of <code dir="ltr">EXPLAIN</code> <code dir="ltr">PLAN</code>, how to use the SQL trace facility, and how to generate and interpret execution plans</p>
</li>
<li>
<p><a class="olink REFRN003" href="../REFRN/GUID-8C5690B0-DE10-4460-86DF-80111869CF4C.htm#REFRN003"><span class="italic">Oracle Database Reference</span></a> for information on dynamic performance views</p>
</li>
</ul>
</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6512"></a>Prerequisites</p>
<p>To issue an <code dir="ltr">EXPLAIN</code> <code dir="ltr">PLAN</code> statement, you must have the privileges necessary to insert rows into an existing output table that you specify to hold the execution plan.</p>
<p>You must also have the privileges necessary to execute the SQL statement for which you are determining the execution plan. If the SQL statement accesses a view, then you must have privileges to access any tables and views on which the view is based. If the view is based on another view that is based on a table, then you must have privileges to access both the other view and its underlying table.</p>
<p>To examine the execution plan produced by an <code dir="ltr">EXPLAIN</code> <code dir="ltr">PLAN</code> statement, you must have the privileges necessary to query the output table.</p>
<p>The <code dir="ltr">EXPLAIN</code> <code dir="ltr">PLAN</code> statement is a data manipulation language (DML) statement, rather than a data definition language (DDL) statement. Therefore, Oracle Database does not implicitly commit the changes made by an <code dir="ltr">EXPLAIN</code> <code dir="ltr">PLAN</code> statement. If you want to keep the rows generated by an <code dir="ltr">EXPLAIN</code> <code dir="ltr">PLAN</code> statement in the output table, then you must commit the transaction containing the statement.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="statements_9015.htm#i2163698">INSERT</a> and <a href="statements_10002.htm#i2065646">SELECT</a> for information on the privileges you need to populate and query the plan table</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6513"></a>Syntax</p>
<p class="subhead2"><a id="SQLRF54982"></a><span class="italic">explain_plan</span>::=</p>
<img width="598" height="142" src="img/explain_plan.gif" alt="Description of explain_plan.gif follows"/><br/>
<a id="sthref6514" href="img_text/explain_plan.htm">Description of the illustration &#39;&#39;explain_plan.gif&#39;&#39;</a><br/>
<br/></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6515"></a>Semantics</p>
<p class="subhead1"><a id="SQLRF54983"></a>SET STATEMENT_ID Clause <a id="sthref6516"></a></p>
<p>Specify a value for the <code dir="ltr">STATEMENT_ID</code> column for the rows of the execution plan in the output table. You can then use this value to identify these rows among others in the output table. Be sure to specify a <code dir="ltr">STATEMENT_ID</code> value if your output table contains rows from many execution plans. If you omit this clause, then the <code dir="ltr">STATEMENT_ID</code> value defaults to null.</p>
<p class="subhead1"><a id="SQLRF54984"></a>INTO <span class="italic">table</span> Clause <a id="sthref6517"></a></p>
<p>Specify the name of the output table, and optionally its schema and database. This table must exist before you use the <code dir="ltr">EXPLAIN</code> <code dir="ltr">PLAN</code> statement.</p>
<p>If you omit <code dir="ltr"><span class="codeinlineitalic">schema</span></code>, then the database assumes the table is in your own schema.</p>
<p>The <code dir="ltr"><span class="codeinlineitalic">dblink</span></code> can be a complete or partial name of a database link to a remote Oracle Database where the output table is located. You can specify a remote output table only if you are using Oracle Database distributed functionality. If you omit <code dir="ltr"><span class="codeinlineitalic">dblink</span></code>, then the database assumes the table is on your local database. See <a href="sql_elements009.htm#i27761">&#34;References to Objects in Remote Databases&#34;</a> for information on referring to database links.</p>
<p>If you omit <code dir="ltr">INTO</code> altogether, then the database assumes an output table named <code dir="ltr">PLAN_TABLE</code> in your own schema on your local database.</p>
<p class="subhead1"><a id="SQLRF54985"></a>FOR <span class="italic">statement</span> Clause <a id="sthref6518"></a></p>
<p>Specify a <code dir="ltr">SELECT</code>, <code dir="ltr">INSERT</code>, <code dir="ltr">UPDATE</code>, <code dir="ltr">DELETE</code>, <code dir="ltr">MERGE</code>, <code dir="ltr">CREATE</code> <code dir="ltr">TABLE</code>, <code dir="ltr">CREATE</code> <code dir="ltr">INDEX</code>, or <code dir="ltr">ALTER</code> <code dir="ltr">INDEX</code> ... <code dir="ltr">REBUILD</code> statement for which the execution plan is generated.</p>
<p><a id="SQLRF54986"></a><span class="subhead3">Notes on EXPLAIN PLAN&nbsp;</span>The following notes apply to <code dir="ltr">EXPLAIN</code> <code dir="ltr">PLAN</code>:</p>
<ul>
<li>
<p>If <code dir="ltr"><span class="codeinlineitalic">statement</span></code> includes the <code dir="ltr"><span class="codeinlineitalic">parallel_clause</span></code>, then the resulting execution plan will indicate parallel execution. However, <code dir="ltr">EXPLAIN</code> <code dir="ltr">PLAN</code> actually inserts the statement into the plan table, so that the parallel DML statement you submit is no longer the first DML statement in the transaction. This violates the Oracle Database restriction of one parallel DML statement in a single transaction, and the statement will be executed serially. To maintain parallel execution of the statements, you must commit or roll back the <code dir="ltr">EXPLAIN</code> <code dir="ltr">PLAN</code> statement, and then submit the parallel DML statement.</p>
</li>
<li>
<p>To determine the execution plan for an operation on a temporary table, <code dir="ltr">EXPLAIN</code> <code dir="ltr">PLAN</code> must be run from the same session, because the data in temporary tables is session specific.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6519"></a>Examples</p>
<p><a id="SQLRF54987"></a><span class="subhead3">EXPLAIN PLAN Examples&nbsp;</span>The following statement determines the execution plan and cost for an <code dir="ltr">UPDATE</code> statement and inserts rows describing the execution plan into the specified <code dir="ltr">plan_table</code> table with the <code dir="ltr">STATEMENT_ID</code> value of &#39;Raise in Tokyo&#39;:</p>
<pre dir="ltr">EXPLAIN PLAN 
    SET STATEMENT_ID = &#39;Raise in Tokyo&#39; 
    INTO plan_table 
    FOR UPDATE employees 
        SET salary = salary * 1.10 
        WHERE department_id =  
           (SELECT department_id FROM departments
               WHERE location_id = 1700); 
</pre>
<p>The following <code dir="ltr">SELECT</code> statement queries the <code dir="ltr">plan_table</code> table and returns the execution plan and the cost:</p>
<pre dir="ltr">SELECT id, LPAD(&#39; &#39;,2*(LEVEL-1))||operation operation, options,
       object_name, object_alias, position 
    FROM plan_table 
    START WITH id = 0 AND statement_id = &#39;Raise in Tokyo&#39;
    CONNECT BY PRIOR id = parent_id AND statement_id = &#39;Raise in Tokyo&#39;
    ORDER BY id;
</pre>
<p>The query returns this execution plan:</p>
<pre dir="ltr"> ID OPERATION            OPTIONS              OBJECT_NAME          OBJECT_ALIAS         POSITION
--- -------------------- -------------------- -------------------- -------------------- --------
  0 UPDATE STATEMENT                                                                           4
  1   UPDATE                                  EMPLOYEES                                        1
  2     INDEX            RANGE SCAN           EMP_DEPARTMENT_IX    EMPLOYEES@UPD$1             1
  3       TABLE ACCESS   BY INDEX ROWID       DEPARTMENTS          DEPARTMENTS@SEL$1           1
  4         INDEX        RANGE SCAN           DEPT_LOCATION_IX     DEPARTMENTS@SEL$1           1
</pre>
<p>The value in the <code dir="ltr">POSITION</code> column of the first row shows that the statement has a cost of 4.</p>
<p><a id="SQLRF54988"></a><span class="subhead3">EXPLAIN PLAN: Partitioned Example&nbsp;</span>The sample table <code dir="ltr">sh.sales</code> is partitioned on the <code dir="ltr">time_id</code> column. Partition <code dir="ltr">sales_q3_2000</code> contains time values less than Oct. 1, 2000, and there is a local index <code dir="ltr">sales_time_bix</code> on the <code dir="ltr">time_id</code> column.</p>
<p>Consider the query:</p>
<pre dir="ltr">EXPLAIN PLAN FOR
  SELECT * FROM sales 
     WHERE time_id BETWEEN :h AND &#39;01-OCT-2000&#39;;
</pre>
<p>where <code dir="ltr">:h</code> represents an already declared bind variable. <code dir="ltr">EXPLAIN</code> <code dir="ltr">PLAN</code> executes this query with <code dir="ltr">PLAN_TABLE</code> as the output table. The basic execution plan, including partitioning information, is obtained with the following query:</p>
<pre dir="ltr">SELECT operation, options, partition_start, partition_stop,
       partition_id
  FROM plan_table;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5862">
<tr>
<td class="cellalignment5869">
<table class="cellalignment5867">
<tr>
<td class="cellalignment5866"><a href="statements_9009.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5866"><a href="statements_9011.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5871">
<table class="cellalignment5865">
<tr>
<td class="cellalignment5866"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5866"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5866"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5866"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5866"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5866"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>