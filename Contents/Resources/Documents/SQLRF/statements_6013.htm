<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-103655"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/CREATE%20RESTORE%20POINT"></a><title>CREATE RESTORE POINT</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-18T18:52:49Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database SQL Language Reference"/>
<meta name="dcterms.identifier" content="E41329-25"/>
<meta name="dcterms.isVersionOf" content="SQLRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="statements_6012.htm" title="Previous" type="text/html"/>
<link rel="Next" href="statements_6014.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41329-25.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">444/555</span> <!-- End Header --><a id="BABGAFFE"></a>
<div id="SQLRF20001" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1">CREATE RESTORE POINT <a id="sthref5345"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5346"></a>Purpose</p>
<p>Use the <code dir="ltr">CREATE</code> <code dir="ltr">RESTORE</code> <code dir="ltr">POINT</code> statement to create a <span class="bold">restore point</span>, which is a name associated with a timestamp or an SCN of the database. A restore point can be used to flash back a table or the database to the time specified by the restore point without the need to determine the SCN or timestamp. Restore points are also useful in various RMAN operations, including backups and database duplication. You can use RMAN to create restore points in the process of implementing an archival backup.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span> for more information on <a class="olink BRADV589" href="../BRADV/flashdb.htm#BRADV589">creating and using restore points and guaranteed restore points</a>, for information on <a class="olink BRADV010" href="../BRADV/rcmdupdb.htm#BRADV010">database duplication</a>, and for information on <a class="olink BRADV89551" href="../BRADV/rcmbckba.htm#BRADV89551">archival backups</a></p>
</li>
<li>
<p><a href="statements_9012.htm#i2143247">FLASHBACK DATABASE</a>, <a href="statements_9013.htm#i2172752">FLASHBACK TABLE</a>, and <a href="statements_8031.htm#BABHBIEF">DROP RESTORE POINT</a> for information on using and dropping restore points</p>
</li>
</ul>
</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5347"></a>Prerequisites</p>
<p>To create a normal restore point, you must have the <code dir="ltr">SELECT</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code>, <code dir="ltr">FLASHBACK</code> <code dir="ltr">ANY</code> <code dir="ltr">TABLE</code>, <code dir="ltr">SYSDBA</code>, <code dir="ltr">SYSBACKUP</code>, or <code dir="ltr">SYSDG</code> system privilege. To create a guaranteed restore point, you must have the <code dir="ltr">SYSDBA</code>, <code dir="ltr">SYSBACKUP</code>, or <code dir="ltr">SYSDG</code> system privilege.</p>
<p>To view or use a restore point, you must have the <code dir="ltr">SELECT</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code>, <code dir="ltr">FLASHBACK</code> <code dir="ltr">ANY</code> <code dir="ltr">TABLE</code>, <code dir="ltr">SYSDBA</code>, <code dir="ltr">SYSBACKUP</code>, or <code dir="ltr">SYSDG</code> system privilege or the <code dir="ltr">SELECT_CATALOG_ROLE</code> role.</p>
<p>You can create a restore point on a primary or standby database. The database can be open, or mounted but not open. If the database is mounted, then it must have been shut down consistently before being mounted unless it is a physical standby database.</p>
<p>You must have created a fast recovery area before creating a guaranteed restore point. You need not enable flashback database before you create the restore point. The database must be in <code dir="ltr">ARCHIVELOG</code> mode if you are creating a guaranteed restore point.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5348"></a>Syntax</p>
<p class="subhead2"><a id="SQLRF54301"></a><span class="italic">create_restore_point</span>::=</p>
<img width="626" height="187" src="img/create_restore_point.gif" alt="Description of create_restore_point.gif follows"/><br/>
<a id="sthref5349" href="img_text/create_restore_point.htm">Description of the illustration &#39;&#39;create_restore_point.gif&#39;&#39;</a><br/>
<br/></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5350"></a>Semantics</p>
<p class="subhead1"><a id="BABEBBJC"></a><a id="SQLRF54302"></a><span class="italic">restore_point</span></p>
<p>Specify the name of the restore point. The name is a character value of up to 128 characters.</p>
<p>The database can retain at least 2048 normal restore points. Normal restore points are retained in the database for at least the number of days specified for the <code dir="ltr">CONTROL_FILE_RECORD_KEEP_TIME</code> initialization parameter. The default value of that parameter is 7 days. Guaranteed restore points are retained in the database until explicitly dropped by the user.</p>
<p>If you specify neither <code dir="ltr">PRESERVE</code> nor <code dir="ltr">GUARANTEE FLASHBACK DATABASE</code>, then the resulting restore point enables you to flash the database back to a restore point within the time period determined by the <code dir="ltr">DB_FLASHBACK_RETENTION_TARGET</code> initialization parameter. The database automatically manages such restore points. When the maximum number of restore points is reached, according to the rules described in <code dir="ltr"><span class="codeinlineitalic">restore_point</span></code> above, the database automatically drops the oldest restore point. Under some circumstances the restore points will be retained in the RMAN recovery catalog for use in restoring long-term backups. You can explicitly drop a restore point using the <code dir="ltr">DROP</code> <code dir="ltr">RESTORE</code> <code dir="ltr">POINT</code> statement.</p>
<p class="subhead1"><a id="SQLRF54303"></a>AS OF Clause</p>
<p>Use this clause to create a restore point at a specified datetime or SCN in the past. If you specify <code dir="ltr">TIMESTAMP</code>, then <code dir="ltr"><span class="codeinlineitalic">expr</span></code> must be a valid datetime expression resolving to a time in the past. If you specify SCN, then <code dir="ltr"><span class="codeinlineitalic">expr</span></code> must be a valid SCN in the database in the past. In either case, <code dir="ltr"><span class="codeinlineitalic">expr</span></code> must refer to a datetime or SCN in the current incarnation of the database.</p>
<p class="subhead1"><a id="SQLRF54304"></a>PRESERVE <a id="sthref5351"></a><a id="sthref5352"></a></p>
<p>Specify <code dir="ltr">PRESERVE</code> to indicate that the restore point must be explicitly deleted. Such restore points are useful for preserving a flashback database.</p>
<p class="subhead1"><a id="SQLRF54305"></a>GUARANTEE FLASHBACK DATABASE</p>
<p>A guaranteed restore point enables you to flash the database back deterministically to the restore point regardless of the <code dir="ltr">DB_FLASHBACK_RETENTION_TARGET</code> initialization parameter setting. The guaranteed ability to flash back depends on sufficient space being available in the fast recovery area.</p>
<p>Guaranteed restore points guarantee only that the database will maintain enough flashback logs to flashback the database to the guaranteed restore point. It does not guarantee that the database will have enough undo to flashback any table to the same restore point.</p>
<p>Guaranteed restore points are always preserved. They must be dropped explicitly by the user using the <code dir="ltr">DROP</code> <code dir="ltr">RESTORE</code> <code dir="ltr">POINT</code> statement. They do not age out. Guaranteed restore points can use considerable space in the fast recovery area. Therefore, Oracle recommends that you create guaranteed restore points only after careful consideration.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5353"></a>Examples</p>
<p><a id="BABCFEEH"></a><a id="SQLRF54306"></a><span class="subhead3">Creating and Using a Restore Point: Example&nbsp;</span>The following example creates a normal restore point, updates a table, and then flashes back the altered table to the restore point. The example assumes the user <code dir="ltr">hr</code> has the appropriate system privileges to use each of the statements.</p>
<pre dir="ltr">CREATE RESTORE POINT good_data;

SELECT salary FROM employees WHERE employee_id = 108;

    SALARY
----------
     12000

UPDATE employees SET salary = salary*10
   WHERE employee_id = 108;

SELECT salary FROM employees
   WHERE employee_id = 108;

    SALARY
----------
    120000

COMMIT;

FLASHBACK TABLE employees TO RESTORE POINT good_data;

SELECT salary FROM employees
   WHERE employee_id = 108;

    SALARY
----------
     12000
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5862">
<tr>
<td class="cellalignment5869">
<table class="cellalignment5867">
<tr>
<td class="cellalignment5866"><a href="statements_6012.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5866"><a href="statements_6014.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5871">
<table class="cellalignment5865">
<tr>
<td class="cellalignment5866"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5866"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5866"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5866"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5866"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5866"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>