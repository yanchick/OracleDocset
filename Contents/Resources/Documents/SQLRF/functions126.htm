<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-102208"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/NTH_VALUE"></a><title>NTH_VALUE</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-18T18:52:17Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database SQL Language Reference"/>
<meta name="dcterms.identifier" content="E41329-25"/>
<meta name="dcterms.isVersionOf" content="SQLRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="functions125.htm" title="Previous" type="text/html"/>
<link rel="Next" href="functions127.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41329-25.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">199/555</span> <!-- End Header --><a id="CJAFEJBE"></a>
<div id="SQLRF30031" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1">NTH_VALUE <a id="sthref1656"></a><a id="sthref1657"></a></h1>
<p class="subhead1"><a id="SQLRF51563"></a>Syntax</p>
<img width="749" height="135" src="img/nth_value.gif" alt="Description of nth_value.gif follows"/><br/>
<a id="sthref1658" href="img_text/nth_value.htm">Description of the illustration &#39;&#39;nth_value.gif&#39;&#39;</a><br/>
<br/>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="functions004.htm#i81407">&#34;Analytic Functions&#34;</a> for information on syntax, semantics, and restrictions of the <code dir="ltr"><span class="codeinlineitalic">analytic_clause</span></code></div>
<p class="subhead1"><a id="SQLRF51564"></a>Purpose</p>
<p><code dir="ltr">NTH_VALUE</code> returns the <code dir="ltr"><span class="codeinlineitalic">measure_expr</span></code> value of the <span class="italic">n</span>th row in the window defined by the <code dir="ltr"><span class="codeinlineitalic">analytic_clause</span></code>. The returned value has the data type of the <code dir="ltr"><span class="codeinlineitalic">measure_expr</span></code>.</p>
<ul>
<li>
<p>{<code dir="ltr">RESPECT</code> | <code dir="ltr">IGNORE</code>} <code dir="ltr">NULLS</code> determines whether null values of <code dir="ltr"><span class="codeinlineitalic">measure_expr</span></code> are included in or eliminated from the calculation. The default is <code dir="ltr">RESPECT</code> <code dir="ltr">NULLS</code>.</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">n</span></code> determines the <span class="italic">n</span>th row for which the measure value is to be returned. <code dir="ltr"><span class="codeinlineitalic">n</span></code> can be a constant, bind variable, column, or an expression involving them, as long as it resolves to a positive integer. The function returns <code dir="ltr">NULL</code> if the data source window has fewer than <code dir="ltr"><span class="codeinlineitalic">n</span></code> rows. If <code dir="ltr"><span class="codeinlineitalic">n</span></code> is null, then the function returns an error.</p>
</li>
<li>
<p><code dir="ltr">FROM</code> {<code dir="ltr">FIRST</code> | <code dir="ltr">LAST</code>} determines whether the calculation begins at the first or last row of the window. The default is <code dir="ltr">FROM</code> <code dir="ltr">FIRST</code>.</p>
</li>
</ul>
<p>If you omit the <code dir="ltr"><span class="codeinlineitalic">windowing_clause</span></code> of the <code dir="ltr"><span class="codeinlineitalic">analytic_clause</span></code>, it defaults to <code dir="ltr">RANGE</code> <code dir="ltr">BETWEEN</code> <code dir="ltr">UNBOUNDED</code> <code dir="ltr">PRECEDING</code> <code dir="ltr">AND</code> <code dir="ltr">CURRENT</code> <code dir="ltr">ROW</code>. This default sometimes returns an unexpected value for <code dir="ltr">NTH_VALUE</code> ... <code dir="ltr">FROM</code> <code dir="ltr">LAST</code> ... , because the last value in the window is at the bottom of the window, which is not fixed. It keeps changing as the current row changes. For expected results, specify the <code dir="ltr"><span class="codeinlineitalic">windowing_clause</span></code> as <code dir="ltr">RANGE</code> <code dir="ltr">BETWEEN</code> <code dir="ltr">UNBOUNDED</code> <code dir="ltr">PRECEDING</code> <code dir="ltr">AND</code> <code dir="ltr">UNBOUNDED</code> <code dir="ltr">FOLLOWING</code>. Alternatively, you can specify the <code dir="ltr"><span class="codeinlineitalic">windowing_clause</span></code> as <code dir="ltr">RANGE</code> <code dir="ltr">BETWEEN</code> <code dir="ltr">CURRENT</code> <code dir="ltr">ROW</code> <code dir="ltr">AND</code> <code dir="ltr">UNBOUNDED</code> <code dir="ltr">FOLLOWING</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DWHSG02017" href="../DWHSG/analysis.htm#DWHSG02017"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for more information on the use of this function</div>
<p class="subhead1"><a id="SQLRF51565"></a>Examples</p>
<p>The following example shows the minimum <code dir="ltr"><span class="codeinlineitalic">amount_sold</span></code> value for the second <code dir="ltr"><span class="codeinlineitalic">channel_id</span></code> in ascending order for each <code dir="ltr"><span class="codeinlineitalic">prod_id</span></code> between 13 and 16:</p>
<pre dir="ltr">SELECT prod_id, channel_id, MIN(amount_sold),
    NTH_VALUE(MIN(amount_sold), 2) OVER (PARTITION BY prod_id ORDER BY channel_id
    ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) nv
  FROM sales
  WHERE prod_id BETWEEN 13 and 16
  GROUP BY prod_id, channel_id;

   PROD_ID CHANNEL_ID MIN(AMOUNT_SOLD)         NV
---------- ---------- ---------------- ----------
        13          2           907.34      906.2
        13          3            906.2      906.2
        13          4           842.21      906.2
        14          2          1015.94    1036.72
        14          3          1036.72    1036.72
        14          4           935.79    1036.72
        15          2           871.19     871.19
        15          3           871.19     871.19
        15          4           871.19     871.19
        16          2           266.84     266.84
        16          3           266.84     266.84
        16          4           266.84     266.84
        16          9            11.99     266.84

13 rows selected.
</pre></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5862">
<tr>
<td class="cellalignment5869">
<table class="cellalignment5867">
<tr>
<td class="cellalignment5866"><a href="functions125.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5866"><a href="functions127.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5871">
<table class="cellalignment5865">
<tr>
<td class="cellalignment5866"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5866"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5866"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5866"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5866"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5866"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>