<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-103628"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/CREATE%20CLUSTER"></a><title>CREATE CLUSTER</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-18T18:52:43Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database SQL Language Reference"/>
<meta name="dcterms.identifier" content="E41329-25"/>
<meta name="dcterms.isVersionOf" content="SQLRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="statements_5001.htm" title="Previous" type="text/html"/>
<link rel="Next" href="statements_5003.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41329-25.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">417/555</span> <!-- End Header --><a id="BABDBDEE"></a>
<div id="SQLRF01201" class="refsect1">
<h1 class="refsect1">CREATE CLUSTER<a id="sthref4524"></a><a id="sthref4525"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4526"></a>Purpose</p>
<p><a id="sthref4527"></a>Use the <code dir="ltr">CREATE</code> <code dir="ltr">CLUSTER</code> statement to create a cluster. A <span class="bold">cluster</span> is a schema object that contains data from one or more tables.</p>
<ul>
<li>
<p>An <span class="bold">indexed cluster</span> must contain more than one table, and all of the tables in the cluster have one or more columns in common. Oracle Database stores together all the rows from all the tables that share the same cluster key.</p>
</li>
<li>
<p>In a <span class="bold">hash cluster</span>, which can contain one or more tables, Oracle Database stores together rows that have the same hash key value.</p>
</li>
</ul>
<p>For information on existing clusters, query the <code dir="ltr">USER_CLUSTERS</code>, <code dir="ltr">ALL_CLUSTERS</code>, and <code dir="ltr">DBA_CLUSTERS</code> data dictionary views.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CNCPT608" href="../CNCPT/tablecls.htm#CNCPT608"><span class="italic">Oracle Database Concepts</span></a> for general information on clusters</p>
</li>
<li>
<p><a class="olink TGSQL850" href="../TGSQL/tgsql_indc.htm#TGSQL850"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for suggestions on when to use clusters</p>
</li>
<li>
<p><a class="olink REFRN002" href="../REFRN/GUID-8865F65B-EF6D-44A5-B0A1-3179EFF0C36A.htm#REFRN002"><span class="italic">Oracle Database Reference</span></a> for information on the data dictionary views</p>
</li>
</ul>
</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4528"></a>Prerequisites</p>
<p>To create a cluster in your own schema, you must have <code dir="ltr">CREATE</code> <code dir="ltr">CLUSTER</code> system privilege. To create a cluster in another user&#39;s schema, you must have <code dir="ltr">CREATE</code> <code dir="ltr">ANY</code> <code dir="ltr">CLUSTER</code> system privilege. Also, the owner of the schema to contain the cluster must have either space quota on the tablespace containing the cluster or the <code dir="ltr">UNLIMITED</code> <code dir="ltr">TABLESPACE</code> system privilege.</p>
<p>Oracle Database does not automatically create an index for a cluster when the cluster is initially created. Data manipulation language (DML) statements cannot be issued against cluster tables in an indexed cluster until you create a cluster index with a <code dir="ltr">CREATE</code> <code dir="ltr">INDEX</code> statement.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4529"></a>Syntax</p>
<p class="subhead2"><a id="SQLRF53782"></a><span class="italic">create_cluster</span>::=</p>
<img width="777" height="407" src="img/create_cluster.gif" alt="Description of create_cluster.gif follows"/><br/>
<a id="sthref4530" href="img_text/create_cluster.htm">Description of the illustration &#39;&#39;create_cluster.gif&#39;&#39;</a><br/>
<br/>
<p>(<a href="#i2127411"><span class="xreftitleitalic"><span class="italic">physical_attributes_clause</span>::=</span></a>, <a href="clauses008.htm#CHDEAIID"><span class="xreftitleitalic"><span class="italic">size_clause</span>::=</span></a>, <a href="#CACHDBII"><span class="xreftitleitalic"><span class="italic">cluster_range_partitions</span>::=</span></a>)</p>
<p class="subhead2"><a id="i2127411"></a><a id="SQLRF53783"></a><a href="#i2067402"><span class="xreftitleitalic"><span class="italic">physical_attributes_clause</span></span></a>::=<a id="sthref4531"></a></p>
<img width="268" height="147" src="img/physical_attributes_clause.gif" alt="Description of physical_attributes_clause.gif follows"/><br/>
<a id="sthref4532" href="img_text/physical_attributes_clause.htm">Description of the illustration &#39;&#39;physical_attributes_clause.gif&#39;&#39;</a><br/>
<br/>
<p>(<a href="clauses009.htm#CJACEJGB"><span class="xreftitleitalic"><span class="italic">storage_clause</span>::=</span></a>)</p>
<p class="subhead2"><a id="i2127422"></a><a id="SQLRF53784"></a><a href="#i2067554"><span class="xreftitleitalic"><span class="italic">parallel_clause</span></span></a> ::=</p>
<img width="241" height="79" src="img/parallel_clause.gif" alt="Description of parallel_clause.gif follows"/><br/>
<a id="sthref4533" href="img_text/parallel_clause.htm">Description of the illustration &#39;&#39;parallel_clause.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="CACHDBII"></a><a id="SQLRF56679"></a><a href="#CACGBDJH"><span class="xreftitleitalic"><span class="italic">cluster_range_partitions</span></span></a>::=</p>
<img width="602" height="166" src="img/cluster_range_partitions.gif" alt="Description of cluster_range_partitions.gif follows"/><br/>
<a id="sthref4534" href="img_text/cluster_range_partitions.htm">Description of the illustration &#39;&#39;cluster_range_partitions.gif&#39;&#39;</a><br/>
<br/>
<p>(<a href="statements_7002.htm#i2125922"><span class="xreftitleitalic"><span class="italic">range_values_clause</span>::=</span></a>, <a href="statements_7002.htm#i2127282"><span class="xreftitleitalic"><span class="italic">table_partition_description</span>::=</span></a>)</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="g2261560"></a>Semantics</p>
<p class="subhead1"><a id="SQLRF53785"></a><span class="italic">schema</span></p>
<p>Specify the schema to contain the cluster. If you omit <code dir="ltr"><span class="codeinlineitalic">schema</span></code>, then Oracle Database creates the cluster in your current schema.</p>
<p class="subhead1"><a id="SQLRF53786"></a><span class="italic">cluster</span></p>
<p>Specify is the name of the cluster to be created.</p>
<p>After you create a cluster, you add tables to it. A cluster can contain a maximum of 32 tables. Object tables and tables containing LOB columns or columns of the <code dir="ltr">Any*</code> Oracle-supplied types cannot be part of a cluster. After you create a cluster and add tables to it, the cluster is transparent. You can access clustered tables with SQL statements just as you can access nonclustered tables.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="statements_7002.htm#i2095331">CREATE TABLE</a> for information on adding tables to a cluster, <a href="#i2105033">&#34;Creating a Cluster: Example&#34;</a>, and <a href="#i2129354">&#34;Adding Tables to a Cluster: Example&#34;</a></div>
<p class="subhead1"><a id="SQLRF53787"></a><span class="italic">column</span></p>
<p>Specify one or more names of columns in the cluster key. You can specify up to 16 cluster key columns. These columns must correspond in both data type and size to columns in each of the clustered tables, although they need not correspond in name.</p>
<p>You cannot specify integrity constraints as part of the definition of a cluster key column. Instead, you can associate integrity constraints with the tables that belong to the cluster.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i2129341">&#34;Cluster Keys: Example&#34;</a></div>
<p class="subhead1"><a id="SQLRF53788"></a><span class="italic">datatype</span></p>
<p>Specify the data type of each cluster key column.</p>
<p><a id="SQLRF53789"></a><span class="subhead3">Restrictions on Cluster Data Types&nbsp;</span>Cluster data types are subject to the following restrictions:</p>
<ul>
<li>
<p>You cannot specify a cluster key column of data type <code dir="ltr">LONG</code>, <code dir="ltr">LONG</code> <code dir="ltr">RAW</code>, <code dir="ltr">REF</code>, nested table, varray, <code dir="ltr">BLOB</code>, <code dir="ltr">CLOB</code>, <code dir="ltr">BFILE</code>, the <code dir="ltr">Any*</code> Oracle-supplied types, or user-defined object type.</p>
</li>
<li>
<p>You can specify a column of type <code dir="ltr">ROWID</code>, but Oracle Database does not guarantee that the values in such columns are valid rowids.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="sql_elements001.htm#i45441">&#34;Data Types&#34;</a> for information on data types</div>
<p class="subhead2"><a id="SQLRF53790"></a>SORT <a id="sthref4535"></a></p>
<p>The <code dir="ltr">SORT</code> keyword is valid only if you are creating a hash cluster. This clause instructs Oracle Database to sort the rows of the cluster on this column after applying the hash function when performing a DML operation. Doing so may improve response time during subsequent queries on the clustered data. See <a href="#i2143441">&#34;HASHKEYS Clause&#34;</a> for information on creating a hash cluster.</p>
<p><a id="SQLRF55610"></a><span class="subhead3">Restriction on Sorted Hash Clusters&nbsp;</span>Row dependency is not supported for sorted hash clusters.</p>
<p class="subhead1"><a id="i2067402"></a><a id="SQLRF53791"></a><span class="italic">physical_attributes_clause<a id="sthref4536"></a></span></p>
<p>The <code dir="ltr"><span class="codeinlineitalic">physical_attributes_clause</span></code> lets you specify the storage characteristics of the cluster. Each table in the cluster uses these storage characteristics as well. If you do not specify values for these parameters, then Oracle Database uses the following defaults:</p>
<ul>
<li>
<p><code dir="ltr">PCTFREE</code>: 10</p>
</li>
<li>
<p><code dir="ltr">PCTUSED</code>: 40</p>
</li>
<li>
<p><code dir="ltr">INITRANS</code>: 2 or the default value of the tablespace to contain the cluster, whichever is greater</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="clauses007.htm#g1058547"><span class="xreftitleitalic"><span class="italic">physical_attributes_clause</span></span></a> and <a href="clauses007.htm#i1026834"><span class="xreftitleitalic"><span class="italic">storage_clause</span></span></a> for a complete description of these clauses</div>
</li>
</ul>
<p class="subhead1"><a id="SQLRF53792"></a>SIZE <a id="sthref4537"></a><a id="sthref4538"></a></p>
<p>Specify the amount of space in bytes reserved to store all rows with the same cluster key value or the same hash value. This space determines the maximum number of cluster or hash values stored in a data block. If <code dir="ltr">SIZE</code> is not a divisor of the data block size, then Oracle Database uses the next largest divisor. If <code dir="ltr">SIZE</code> is larger than the data block size, then the database uses the operating system block size, reserving at least one data block for each cluster or hash value.</p>
<p>The database also considers the length of the cluster key when determining how much space to reserve for the rows having a cluster key value. Larger cluster keys require larger sizes. To see the actual size, query the <code dir="ltr">KEY_SIZE</code> column of the <code dir="ltr">USER_CLUSTERS</code> data dictionary view. (This value does not apply to hash clusters, because hash values are not actually stored in the cluster.)</p>
<p>If you omit this parameter, then the database reserves one data block for each cluster key value or hash value.</p>
<p class="subhead1"><a id="SQLRF53793"></a>TABLESPACE <a id="sthref4539"></a><a id="sthref4540"></a></p>
<p>Specify the tablespace in which the cluster is to be created.</p>
<p class="subhead1"><a id="SQLRF53794"></a>INDEX Clause <a id="sthref4541"></a><a id="sthref4542"></a><a id="sthref4543"></a></p>
<p>Specify <code dir="ltr">INDEX</code> to create an <span class="bold">indexed cluster</span>. In an indexed cluster, Oracle Database stores together rows having the same cluster key value. Each distinct cluster key value is stored only once in each data block, regardless of the number of tables and rows in which it occurs. If you specify neither <code dir="ltr">INDEX</code> nor <code dir="ltr">HASHKEYS</code>, then Oracle Database creates an indexed cluster by default.</p>
<p>After you create an indexed cluster, you must create an index on the cluster key before you can issue any data manipulation language (DML) statements against a table in the cluster. This index is called the <span class="bold">cluster index</span>.</p>
<p>You cannot create a cluster index for a hash cluster, and you need not create an index on a hash cluster key.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="statements_5013.htm#i2062403">CREATE INDEX</a> for information on creating a cluster index and <a class="olink CNCPT608" href="../CNCPT/tablecls.htm#CNCPT608"><span class="italic">Oracle Database Concepts</span></a> for general information in indexed clusters</div>
<p class="subhead1"><a id="i2143441"></a><a id="SQLRF53795"></a>HASHKEYS Clause <a id="sthref4544"></a><a id="sthref4545"></a><a id="sthref4546"></a></p>
<p>Specify the <code dir="ltr">HASHKEYS</code> clause to create a <span class="bold">hash cluster</span> and specify the number of hash values for the hash cluster. In a hash cluster, Oracle Database stores together rows that have the same hash key value. The hash value for a row is the value returned by the hash function of the cluster.</p>
<p>Oracle Database rounds up the <code dir="ltr">HASHKEYS</code> value to the nearest prime number to obtain the actual number of hash values. The minimum value for this parameter is 2. If you omit both the <code dir="ltr">INDEX</code> clause and the <code dir="ltr">HASHKEYS</code> parameter, then the database creates an indexed cluster by default.</p>
<p>When you create a hash cluster, the database immediately allocates space for the cluster based on the values of the <code dir="ltr">SIZE</code> and <code dir="ltr">HASHKEYS</code> parameters.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CNCPT609" href="../CNCPT/tablecls.htm#CNCPT609"><span class="italic">Oracle Database Concepts</span></a> for more information on how Oracle Database allocates space for clusters and <a href="#i2129365">&#34;Hash Clusters: Examples&#34;</a></div>
<p><a id="SQLRF53796"></a><span class="subhead3">SINGLE TABLE <a id="sthref4547"></a><a id="sthref4548"></a><a id="sthref4549"></a>&nbsp;</span><code dir="ltr">SINGLE</code> <code dir="ltr">TABLE</code> indicates that the cluster is a type of hash cluster containing only one table. This clause can provide faster access to rows in the table.</p>
<p><a id="SQLRF53797"></a><span class="subhead3">Restriction on Single-table Clusters&nbsp;</span>Only one table can be present in the cluster at a time. However, you can drop the table and create a different table in the same cluster.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i2129381">&#34;Single-Table Hash Clusters: Example&#34;</a></div>
<p><a id="SQLRF53798"></a><span class="subhead3">HASH IS <span class="italic"><a id="sthref4550"></a><a id="sthref4551"></a>expr</span>&nbsp;</span>Specify an expression to be used as the hash function for the hash cluster. The expression:</p>
<ul>
<li>
<p>Must evaluate to a positive value</p>
</li>
<li>
<p>Must contain at least one column, with referenced columns of any data type as long as the entire expression evaluates to a number of scale 0. For example: <code dir="ltr"><span class="codeinlineitalic">number_column</span></code> * <code dir="ltr">LENGTH</code>(<code dir="ltr"><span class="codeinlineitalic">varchar2_column</span></code>)</p>
</li>
<li>
<p>Cannot reference user-defined PL/SQL functions</p>
</li>
<li>
<p>Cannot reference the pseudocolumns <code dir="ltr">LEVEL</code> or <code dir="ltr">ROWNUM</code></p>
</li>
<li>
<p>Cannot reference the user-related functions <code dir="ltr">USERENV</code>, <code dir="ltr">UID</code>, or <code dir="ltr">USER</code> or the datetime functions <code dir="ltr">CURRENT_DATE</code>, <code dir="ltr">CURRENT_TIMESTAMP</code>, <code dir="ltr">DBTIMEZONE</code>, <code dir="ltr">EXTRACT</code> (datetime), <code dir="ltr">FROM_TZ</code>, <code dir="ltr">LOCALTIMESTAMP</code>, <code dir="ltr">NUMTODSINTERVAL</code>, <code dir="ltr">NUMTOYMINTERVAL</code>, <code dir="ltr">SESSIONTIMEZONE</code>, <code dir="ltr">SYSDATE</code>, <code dir="ltr">SYSTIMESTAMP</code>, <code dir="ltr">TO_DSINTERVAL</code>, <code dir="ltr">TO_TIMESTAMP</code>, <code dir="ltr">TO_DATE</code>, <code dir="ltr">TO_TIMESTAMP_TZ</code>, <code dir="ltr">TO_YMINTERVAL</code>, and <code dir="ltr">TZ_OFFSET</code>.</p>
</li>
<li>
<p>Cannot evaluate to a constant</p>
</li>
<li>
<p>Cannot be a scalar subquery expression</p>
</li>
<li>
<p>Cannot contain columns qualified with a schema or object name (other than the cluster name)</p>
</li>
</ul>
<p>If you omit the <code dir="ltr">HASH</code> <code dir="ltr">IS</code> clause, then Oracle Database uses an internal hash function for the hash cluster.</p>
<p>For information on existing hash functions, query the <code dir="ltr">USER_</code>, <code dir="ltr">ALL_</code>, and <code dir="ltr">DBA_CLUSTER_HASH_EXPRESSIONS</code> data dictionary tables.</p>
<p>The cluster key of a hash column can have one or more columns of any data type. Hash clusters with composite cluster keys or cluster keys made up of noninteger columns must use the internal hash function.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for information on the data dictionary views</div>
<p class="subhead1"><a id="i2067554"></a><a id="SQLRF53799"></a><span class="italic">parallel_clause</span> <span class="bolditalic"><a id="sthref4552"></a><a id="sthref4553"></a></span></p>
<p>The <code dir="ltr"><span class="codeinlineitalic">parallel_clause</span></code> lets you parallelize the creation of the cluster.</p>
<p>For complete information on this clause, refer to <a href="statements_7002.htm#i2159323"><span class="xreftitleitalic"><span class="italic">parallel_clause</span></span></a> in the documentation on <code dir="ltr">CREATE</code> <code dir="ltr">TABLE</code>.</p>
<p class="subhead1"><a id="SQLRF53800"></a>NOROWDEPENDENCIES | ROWDEPENDENCIES <a id="sthref4554"></a><a id="sthref4555"></a><a id="sthref4556"></a><a id="sthref4557"></a></p>
<p>This clause has the same behavior for a cluster that it has for a table. Refer to <a href="statements_7002.htm#CJAEEGDA">&#34;NOROWDEPENDENCIES | ROWDEPENDENCIES&#34;</a> in <code dir="ltr">CREATE</code> <code dir="ltr">TABLE</code> for information.</p>
<p class="subhead1"><a id="i2177270"></a><a id="SQLRF53801"></a>CACHE | NOCACHE <a id="sthref4558"></a><a id="sthref4559"></a><a id="sthref4560"></a></p>
<p><a id="SQLRF53802"></a><span class="subhead3">CACHE&nbsp;</span>Specify <code dir="ltr">CACHE</code> if you want the blocks retrieved for this cluster to be placed at the most recently used end of the least recently used (LRU) list in the buffer cache when a full table scan is performed. This clause is useful for small lookup tables.</p>
<p><a id="SQLRF53803"></a><span class="subhead3">NOCACHE&nbsp;</span>Specify <code dir="ltr">NOCACHE</code> if you want the blocks retrieved for this cluster to be placed at the least recently used end of the LRU list in the buffer cache when a full table scan is performed. This is the default behavior.</p>
<p><code dir="ltr">NOCACHE</code> has no effect on clusters for which you specify <code dir="ltr">KEEP</code> in the <code dir="ltr"><span class="codeinlineitalic">storage_clause</span></code>.</p>
<p class="subhead1"><a id="CACGBDJH"></a><a id="SQLRF56680"></a><span class="italic">cluster_range_partitions</span><a id="sthref4561"></a></p>
<p>Beginning with Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2), you can specify the <code dir="ltr"><span class="codeinlineitalic">cluster_range_partitions</span></code> clause to create a range-partitioned hash cluster. If you specify this clause, then you must also specify the <code dir="ltr">HASHKEYS</code> clause.</p>
<p>Use the <code dir="ltr"><span class="codeinlineitalic">cluster_range_partitions</span></code> clause to partition the cluster on ranges of values from the column list. When you add a table to a range-partitioned hash cluster, it is automatically partitioned on the same columns, with the same number of partitions, and on the same partition bounds as the cluster. Oracle Database assigns system-generated names to the table partitions.</p>
<p>The <code dir="ltr"><span class="codeinlineitalic">cluster_range_partitions</span></code> clause has the same semantics as the <code dir="ltr"><span class="codeinlineitalic">range_partitions</span></code> clause of <code dir="ltr">CREATE</code> <code dir="ltr">TABLE</code>, except that here you cannot specify the <code dir="ltr">INTERVAL</code> clause. For complete information, refer to <a href="statements_7002.htm#BABJDACD"><span class="xreftitleitalic"><span class="italic">range_partitions</span></span></a> in the documentation on <code dir="ltr">CREATE</code> <code dir="ltr">TABLE</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CACCJEAG">&#34;Range-Partitioned Hash Clusters: Example&#34;</a></div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i2105031"></a>Examples</p>
<p><a id="i2105033"></a><a id="SQLRF53804"></a><span class="subhead3">Creating a Cluster: Example&nbsp;</span>The following statement creates a cluster named <code dir="ltr">personnel</code> with the cluster key column <code dir="ltr">department</code>, a cluster size of 512 bytes, and storage parameter values:</p>
<pre dir="ltr">CREATE CLUSTER personnel
   (department NUMBER(4))
SIZE 512 
STORAGE (initial 100K next 50K);
</pre>
<p><a id="i2129341"></a><a id="SQLRF53805"></a><span class="subhead3">Cluster Keys: Example&nbsp;</span>The following statement creates the cluster index on the cluster key of <code dir="ltr">personnel</code>:</p>
<pre dir="ltr">CREATE INDEX idx_personnel ON CLUSTER personnel;
 
</pre>
<p>After creating the cluster index, you can add tables to the index and perform DML operations on those tables.</p>
<p><a id="i2129354"></a><a id="SQLRF53806"></a><span class="subhead3">Adding Tables to a Cluster: Example&nbsp;</span>The following statements create some departmental tables from the sample <code dir="ltr">hr.employees</code> table and add them to the personnel cluster created in the earlier example:</p>
<pre dir="ltr">CREATE TABLE dept_10
   CLUSTER personnel (department_id)
   AS SELECT * FROM employees WHERE department_id = 10;

CREATE TABLE dept_20
   CLUSTER personnel (department_id)
   AS SELECT * FROM employees WHERE department_id = 20;
</pre>
<p><a id="i2129365"></a><a id="SQLRF53807"></a><span class="subhead3">Hash Clusters: Examples&nbsp;</span>The following statement creates a hash cluster named <code dir="ltr">language</code> with the cluster key column <code dir="ltr">cust_language</code>, a maximum of 10 hash key values, each of which is allocated 512 bytes, and storage parameter values:</p>
<pre dir="ltr">CREATE CLUSTER language (cust_language VARCHAR2(3))
   SIZE 512 HASHKEYS 10
   STORAGE (INITIAL 100k next 50k);
</pre>
<p>Because the preceding statement omits the <code dir="ltr">HASH</code> <code dir="ltr">IS</code> clause, Oracle Database uses the internal hash function for the cluster.</p>
<p>The following statement creates a hash cluster named <code dir="ltr">address</code> with the cluster key made up of the columns <code dir="ltr">postal_code</code> and <code dir="ltr">country_id</code>, and uses a SQL expression containing these columns for the hash function:</p>
<pre dir="ltr">CREATE CLUSTER address
   (postal_code NUMBER, country_id CHAR(2))
   HASHKEYS 20
   HASH IS MOD(postal_code + country_id, 101);
</pre>
<p><a id="i2129381"></a><a id="SQLRF53808"></a><span class="subhead3">Single-Table Hash Clusters: Example&nbsp;</span>The following statement creates a single-table hash cluster named <code dir="ltr">cust_orders</code> with the cluster key <code dir="ltr">customer_id</code> and a maximum of 100 hash key values, each of which is allocated 512 bytes:</p>
<pre dir="ltr">CREATE CLUSTER cust_orders (customer_id NUMBER(6))
   SIZE 512 SINGLE TABLE HASHKEYS 100;
</pre>
<p><a id="CACCJEAG"></a><a id="SQLRF56682"></a><span class="subhead3">Range-Partitioned Hash Clusters: Example&nbsp;</span>The following statement creates a range-partitioned hash cluster named <code dir="ltr">sales</code> with five range partitions based on the amount sold. The cluster key is made up of the columns <code dir="ltr">amount_sold</code> and <code dir="ltr">prod_id</code>. The cluster uses the hash function <code dir="ltr">(amount_sold * 10 + prod_id)</code> and has a maximum of 100000 hash key values, each of which is allocated 300 bytes.</p>
<pre dir="ltr">CREATE CLUSTER sales (amount_sold NUMBER, prod_id NUMBER)
  HASHKEYS 100000
  HASH IS (amount_sold * 10 + prod_id)
  SIZE 300
  TABLESPACE example
  PARTITION BY RANGE (amount_sold)
    (PARTITION p1 VALUES LESS THAN (2001),
     PARTITION p2 VALUES LESS THAN (4001),
     PARTITION p3 VALUES LESS THAN (6001),
     PARTITION p4 VALUES LESS THAN (8001),
     PARTITION p5 VALUES LESS THAN (MAXVALUE));
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5862">
<tr>
<td class="cellalignment5869">
<table class="cellalignment5867">
<tr>
<td class="cellalignment5866"><a href="statements_5001.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5866"><a href="statements_5003.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5871">
<table class="cellalignment5865">
<tr>
<td class="cellalignment5866"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5866"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5866"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5866"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5866"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5866"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>