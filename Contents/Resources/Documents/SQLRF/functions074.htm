<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-102156"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/FIRST"></a><title>FIRST</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-18T18:52:14Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database SQL Language Reference"/>
<meta name="dcterms.identifier" content="E41329-25"/>
<meta name="dcterms.isVersionOf" content="SQLRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="functions073.htm" title="Previous" type="text/html"/>
<link rel="Next" href="functions075.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41329-25.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">147/555</span> <!-- End Header --><a id="i1000901"></a>
<div id="SQLRF00641" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1">FIRST <a id="sthref1454"></a><a id="sthref1455"></a></h1>
<p class="subhead1"><a id="SQLRF51409"></a>Syntax</p>
<p class="subhead2"><a id="SQLRF51410"></a><span class="italic">first</span>::=</p>
<img width="763" height="254" src="img/first.gif" alt="Description of first.gif follows"/><br/>
<a id="sthref1456" href="img_text/first.htm">Description of the illustration &#39;&#39;first.gif&#39;&#39;</a><br/>
<br/>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="functions004.htm#i81407">&#34;Analytic Functions&#34;</a> for information on syntax, semantics, and restrictions of the <code dir="ltr">ORDER</code> <code dir="ltr">BY</code> clause and <code dir="ltr">OVER</code> clause</div>
<p class="subhead1"><a id="SQLRF51411"></a>Purpose</p>
<p><code dir="ltr">FIRST</code> and <code dir="ltr">LAST</code> are very similar functions. Both are aggregate and analytic functions that operate on a set of values from a set of rows that rank as the <code dir="ltr">FIRST</code> or <code dir="ltr">LAST</code> with respect to a given sorting specification. If only one row ranks as <code dir="ltr">FIRST</code> or <code dir="ltr">LAST</code>, then the aggregate operates on the set with only one element.</p>
<p>If you omit the <code dir="ltr">OVER</code> clause, then the <code dir="ltr">FIRST</code> and <code dir="ltr">LAST</code> functions are treated as aggregate functions. You can use these functions as analytic functions by specifying the <code dir="ltr">OVER</code> clause. The <code dir="ltr"><span class="codeinlineitalic">query_partition_clause</span></code> is the only part of the <code dir="ltr">OVER</code> clause valid with these functions. If you include the <code dir="ltr">OVER</code> clause but omit the <code dir="ltr"><span class="codeinlineitalic">query_partition_clause</span></code>, then the function is treated as an analytic function, but the window defined for analysis is the entire table.</p>
<p>These functions take as an argument any numeric data type or any nonnumeric data type that can be implicitly converted to a numeric data type. The function returns the same data type as the numeric data type of the argument.</p>
<p>When you need a value from the first or last row of a sorted group, but the needed value is not the sort key, the <code dir="ltr">FIRST</code> and <code dir="ltr">LAST</code> functions eliminate the need for self-joins or views and enable better performance.</p>
<ul>
<li>
<p>The <code dir="ltr"><span class="codeinlineitalic">aggregate_function</span></code> argument is any one of the <code dir="ltr">MIN</code>, <code dir="ltr">MAX</code>, <code dir="ltr">SUM</code>, <code dir="ltr">AVG</code>, <code dir="ltr">COUNT</code>, <code dir="ltr">VARIANCE</code>, or <code dir="ltr">STDDEV</code> functions. It operates on values from the rows that rank either <code dir="ltr">FIRST</code> or <code dir="ltr">LAST</code>. If only one row ranks as <code dir="ltr">FIRST</code> or <code dir="ltr">LAST</code>, then the aggregate operates on a singleton (nonaggregate) set.</p>
</li>
<li>
<p><a id="sthref1457"></a><a id="sthref1458"></a>The <code dir="ltr">KEEP</code> keyword is for semantic clarity. It qualifies <code dir="ltr"><span class="codeinlineitalic">aggregate_function</span></code>, indicating that only the <code dir="ltr">FIRST</code> or <code dir="ltr">LAST</code> values of <code dir="ltr"><span class="codeinlineitalic">aggregate_function</span></code> will be returned.</p>
</li>
<li>
<p><code dir="ltr">DENSE_RANK</code> <code dir="ltr">FIRST</code> or <code dir="ltr">DENSE_RANK</code> <code dir="ltr">LAST</code> indicates that Oracle Database will aggregate over only those rows with the minimum (<code dir="ltr">FIRST</code>) or the maximum (<code dir="ltr">LAST</code>) dense rank (also called olympic rank).</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="sql_elements002.htm#g195937">Table 2-10, &#34;Implicit Type Conversion Matrix&#34;</a> for more information on implicit conversion and <a href="functions095.htm#i1000905">LAST</a></div>
<p class="subhead1"><a id="SQLRF51412"></a>Aggregate Example</p>
<p>The following example returns, within each department of the sample table <code dir="ltr">hr.employees</code>, the minimum salary among the employees who make the lowest commission and the maximum salary among the employees who make the highest commission:</p>
<pre dir="ltr">SELECT department_id,
       MIN(salary) KEEP (DENSE_RANK FIRST ORDER BY commission_pct) &#34;Worst&#34;,
       MAX(salary) KEEP (DENSE_RANK LAST ORDER BY commission_pct) &#34;Best&#34;
  FROM employees
  GROUP BY department_id
  ORDER BY department_id;

DEPARTMENT_ID      Worst       Best
------------- ---------- ----------
           10       4400       4400
           20       6000      13000
           30       2500      11000
           40       6500       6500
           50       2100       8200
           60       4200       9000
           70      10000      10000
           80       6100      14000
           90      17000      24000
          100       6900      12008
          110       8300      12008
                    7000       7000
</pre>
<p class="subhead1"><a id="SQLRF51413"></a>Analytic Example</p>
<p>The next example makes the same calculation as the previous example but returns the result for each employee within the department:</p>
<pre dir="ltr">SELECT last_name, department_id, salary,
       MIN(salary) KEEP (DENSE_RANK FIRST ORDER BY commission_pct)
         OVER (PARTITION BY department_id) &#34;Worst&#34;,
       MAX(salary) KEEP (DENSE_RANK LAST ORDER BY commission_pct)
         OVER (PARTITION BY department_id) &#34;Best&#34;
   FROM employees
   ORDER BY department_id, salary, last_name;

LAST_NAME           DEPARTMENT_ID     SALARY      Worst       Best
------------------- ------------- ---------- ---------- ----------
Whalen                         10       4400       4400       4400
Fay                            20       6000       6000      13000
Hartstein                      20      13000       6000      13000
. . .
Gietz                         110       8300       8300      12008
Higgins                       110      12008       8300      12008
Grant                                   7000       7000       7000
</pre></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5862">
<tr>
<td class="cellalignment5869">
<table class="cellalignment5867">
<tr>
<td class="cellalignment5866"><a href="functions073.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5866"><a href="functions075.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5871">
<table class="cellalignment5865">
<tr>
<td class="cellalignment5866"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5866"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5866"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5866"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5866"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5866"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>