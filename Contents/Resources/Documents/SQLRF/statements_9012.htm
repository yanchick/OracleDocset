<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-103712"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/FLASHBACK%20DATABASE"></a><title>FLASHBACK DATABASE</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-18T18:52:59Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database SQL Language Reference"/>
<meta name="dcterms.identifier" content="E41329-25"/>
<meta name="dcterms.isVersionOf" content="SQLRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="statements_9011.htm" title="Previous" type="text/html"/>
<link rel="Next" href="statements_9013.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41329-25.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">501/555</span> <!-- End Header --><a id="i2143247"></a>
<div id="SQLRF01801" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1">FLASHBACK DATABASE</h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6529"></a><a id="sthref6530"></a><a id="sthref6531"></a><a id="sthref6532"></a>Purpose</p>
<p>Use the <code dir="ltr">FLASHBACK</code> <code dir="ltr">DATABASE</code> statement to return the database to a past time or system change number (SCN). This statement provides a fast alternative to performing incomplete database recovery.</p>
<p>Following a <code dir="ltr">FLASHBACK</code> <code dir="ltr">DATABASE</code> operation, in order to have write access to the flashed back database, you must reopen it with an <code dir="ltr">ALTER</code> <code dir="ltr">DATABASE</code> <code dir="ltr">OPEN</code> <code dir="ltr">RESETLOGS</code> statement.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV71000" href="../BRADV/flashdb.htm#BRADV71000"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for more information on <code dir="ltr">FLASHBACK</code> <code dir="ltr">DATABASE</code></div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6533"></a>Prerequisites</p>
<p>You must have the <code dir="ltr">SYSDBA</code>, <code dir="ltr">SYSBACKUP</code>, or <code dir="ltr">SYSDG</code> system privilege. A fast recovery area must have been prepared for the database. The database must have been put in <code dir="ltr">FLASHBACK</code> mode with an <code dir="ltr">ALTER</code> <code dir="ltr">DATABASE</code> <code dir="ltr">FLASHBACK</code> <code dir="ltr">ON</code> statement unless you are flashing the database back to a guaranteed restore point. The database must be mounted but not open. In addition:</p>
<ul>
<li>
<p>The database must run in <code dir="ltr">ARCHIVELOG</code> mode.</p>
</li>
<li>
<p>The database must be mounted, but not open, with a current control file. The control file cannot be a backup or re-created. When the database control file is restored from backup or re-created, all existing flashback log information is discarded.</p>
</li>
<li>
<p>The database must contain no online tablespaces for which flashback functionality was disabled with the SQL statement <code dir="ltr">ALTER</code> <code dir="ltr">TABLESPACE</code> ... <code dir="ltr">FLASHBACK</code> <code dir="ltr">OFF</code>.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink BRADV017" href="../BRADV/osrecvry.htm#BRADV017"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> and the <code dir="ltr">ALTER</code> <code dir="ltr">DATABASE</code> ... <a href="statements_1006.htm#i2155821"><span class="xreftitleitalic"><span class="italic">flashback_mode_clause</span></span></a> for information on putting the database in <code dir="ltr">FLASHBACK</code> mode</p>
</li>
<li>
<p><a href="statements_6013.htm#BABGAFFE">CREATE RESTORE POINT</a> for information on restore points and guaranteed restore points</p>
</li>
</ul>
</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6534"></a>Syntax</p>
<p class="subhead2"><a id="SQLRF54989"></a><span class="italic">flashback_database</span>::=</p>
<img width="815" height="187" src="img/flashback_database.gif" alt="Description of flashback_database.gif follows"/><br/>
<a id="sthref6535" href="img_text/flashback_database.htm">Description of the illustration &#39;&#39;flashback_database.gif&#39;&#39;</a><br/>
<br/></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6536"></a>Semantics</p>
<p>When you issue a <code dir="ltr">FLASHBACK</code> <code dir="ltr">DATABASE</code> statement, Oracle Database first verifies that all required archived and online redo logs are available. If they are available, then it reverts all currently online data files in the database to the SCN or time specified in this statement.</p>
<ul>
<li>
<p>The amount of Flashback data retained in the database is controlled by the <code dir="ltr">DB_FLASHBACK_RETENTION_TARGET</code> initialization parameter and the size of the fast recovery area. You can determine how far back you can flash back the database by querying the <code dir="ltr">V$FLASHBACK_DATABASE_LOG</code> view.</p>
</li>
<li>
<p>If insufficient data remains in the database to perform the flashback, then you can use standard recovery procedures to recover the database to a past point in time.</p>
</li>
<li>
<p>If insufficient data remains for a set of data files, then the database returns an error. In this case, you can take those data files offline and reissue the statement to revert the remainder of the database. You can then attempt to recover the offline data files using standard recovery procedures.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV89765" href="../BRADV/rcmcomre.htm#BRADV89765"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for more information on recovering data files</div>
<p class="subhead1"><a id="SQLRF54990"></a>STANDBY</p>
<p>Specify <code dir="ltr">STANDBY</code> to revert the standby database to an earlier SCN or time. If the database is not a standby database, then the database returns an error. If you omit this clause, then <code dir="ltr"><span class="codeinlineitalic">database</span></code> can be either a primary or a standby database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SBYDB00717" href="../SBYDB/role_management.htm#SBYDB00717"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for information on how you can use <code dir="ltr">FLASHBACK</code> <code dir="ltr">DATABASE</code> on a standby database to achieve different delays</div>
<p class="subhead1"><a id="SQLRF54991"></a>TO SCN Clause</p>
<p>Specify a system change number (SCN):</p>
<ul>
<li>
<p><code dir="ltr">TO SCN</code> reverts the database back to its state at the specified SCN.</p>
</li>
<li>
<p><code dir="ltr">TO BEFORE SCN</code> reverts the database back to its state at the system change number just preceding the specified SCN.</p>
</li>
</ul>
<p>You can determine the current SCN by querying the <code dir="ltr">CURRENT_SCN</code> column of the <a class="olink REFRN30047" href="../REFRN/GUID-C62A7B96-2DD4-4E70-A0D9-26EE4BFBE256.htm#REFRN30047"><code dir="ltr">V$DATABASE</code></a> view. This in turn lets you save the SCN to a spool file, for example, before running a high-risk batch job.</p>
<p class="subhead1"><a id="SQLRF54992"></a>TO TIMESTAMP Clause</p>
<p>Specify a valid datetime expression.</p>
<ul>
<li>
<p><code dir="ltr">TO TIMESTAMP</code> reverts the database back to its state at the specified timestamp.</p>
</li>
<li>
<p><code dir="ltr">TO BEFORE TIMESTAMP</code> reverts the database back to its state one second before the specified timestamp.</p>
</li>
</ul>
<p>You can represent the timestamp as an offset from a determinate value, such as <code dir="ltr">SYSDATE</code>, or as an absolute system timestamp.</p>
<p class="subhead1"><a id="SQLRF54993"></a>TO RESTORE POINT Clause <a id="sthref6537"></a></p>
<p>Specify this clause to flash back the database to the specified restore point. If you have not enabled flashback database, then this is the only clause you can specify in this <code dir="ltr">FLASHBACK</code> <code dir="ltr">DATABASE</code> statement. If the database is not in <code dir="ltr">FLASHBACK</code> mode, as described in the &#34;Prerequisites&#34; section above, then this is the only clause you can specify for this statement.</p>
<p class="subhead1"><a id="SQLRF54994"></a>RESETLOGS</p>
<p>Specify <code dir="ltr">TO</code> <code dir="ltr">BEFORE</code> <code dir="ltr">RESETLOGS</code> to flash the database back to just before the last resetlogs operation (<code dir="ltr">ALTER</code> <code dir="ltr">DATABASE</code> <code dir="ltr">OPEN</code> <code dir="ltr">RESETLOGS</code>).</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV85442" href="../BRADV/rcmflash.htm#BRADV85442"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for more information about this clause</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i2143227"></a>Examples</p>
<p>Assuming that you have prepared a fast recovery area for the database and enabled media recovery, enable database <code dir="ltr">FLASHBACK</code> mode and open the database with the following statements:</p>
<pre dir="ltr">STARTUP MOUNT 
ALTER DATABASE FLASHBACK ON;
ALTER DATABASE OPEN;
</pre>
<p>With your database open for at least a day, you can flash back the database one day with the following statements:</p>
<pre dir="ltr">SHUTDOWN DATABASE
STARTUP MOUNT 
FLASHBACK DATABASE TO TIMESTAMP SYSDATE-1;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5862">
<tr>
<td class="cellalignment5869">
<table class="cellalignment5867">
<tr>
<td class="cellalignment5866"><a href="statements_9011.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5866"><a href="statements_9013.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5871">
<table class="cellalignment5865">
<tr>
<td class="cellalignment5866"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5866"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5866"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5866"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5866"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5866"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>