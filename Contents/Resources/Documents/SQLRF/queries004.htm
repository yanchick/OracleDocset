<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-103551"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/The%20UNION%20%5BALL%5D%2C%20INTERSECT%2C%20MINUS%20Operators"></a><title>The UNION [ALL], INTERSECT, MINUS Operators</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-18T18:52:25Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database SQL Language Reference"/>
<meta name="dcterms.identifier" content="E41329-25"/>
<meta name="dcterms.isVersionOf" content="SQLRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="queries003.htm" title="Previous" type="text/html"/>
<link rel="Next" href="queries005.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41329-25.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">360/555</span> <!-- End Header --><a id="i2054381"></a>
<div id="SQLRF52341" class="sect1"><!-- infolevel="all" infotype="General" -->
<h1 class="sect1">The UNION [ALL], INTERSECT, MINUS Operators</h1>
<p>You can combine multiple queries using the set operators <code dir="ltr">UNION</code>, <code dir="ltr">UNION</code> <code dir="ltr">ALL</code>, <code dir="ltr">INTERSECT</code>, and <code dir="ltr">MINUS</code>. All set operators have equal precedence. If a SQL statement contains multiple set operators, then Oracle Database evaluates them from the left to right unless parentheses explicitly specify another order.</p>
<p>The corresponding expressions in the select lists of the component queries of a compound query must match in number and must be in the same data type group (such as numeric or character).</p>
<p>If component queries select character data, then the data type of the return values are determined as follows:</p>
<ul>
<li>
<p>If both queries select values of data type <code dir="ltr">CHAR</code> of equal length, then the returned values have data type <code dir="ltr">CHAR</code> of that length. If the queries select values of <code dir="ltr">CHAR</code> with different lengths, then the returned value is <code dir="ltr">VARCHAR2</code> with the length of the larger <code dir="ltr">CHAR</code> value.</p>
</li>
<li>
<p>If either or both of the queries select values of data type <code dir="ltr">VARCHAR2</code>, then the returned values have data type <code dir="ltr">VARCHAR2</code>.</p>
</li>
</ul>
<p>If component queries select numeric data, then the data type of the return values is determined by numeric precedence:</p>
<ul>
<li>
<p>If any query selects values of type <code dir="ltr">BINARY_DOUBLE</code>, then the returned values have data type <code dir="ltr">BINARY_DOUBLE</code>.</p>
</li>
<li>
<p>If no query selects values of type <code dir="ltr">BINARY_DOUBLE</code> but any query selects values of type <code dir="ltr">BINARY_FLOAT</code>, then the returned values have data type <code dir="ltr">BINARY_FLOAT</code>.</p>
</li>
<li>
<p>If all queries select values of type <code dir="ltr">NUMBER</code>, then the returned values have data type <code dir="ltr">NUMBER</code>.</p>
</li>
</ul>
<p>In queries using set operators, Oracle does not perform implicit conversion across data type groups. Therefore, if the corresponding expressions of component queries resolve to both character data and numeric data, Oracle returns an error.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="sql_elements002.htm#g195937">Table 2-10, &#34;Implicit Type Conversion Matrix&#34;</a> for more information on implicit conversion and <a href="sql_elements001.htm#i156865">&#34;Numeric Precedence&#34;</a> for information on numeric precedence</div>
<p><a id="SQLRF52342"></a><span class="subhead3">Examples&nbsp;</span>The following query is valid:</p>
<pre dir="ltr">SELECT 3 FROM DUAL
   INTERSECT
SELECT 3f FROM DUAL;
</pre>
<p>This is implicitly converted to the following compound query:</p>
<pre dir="ltr">SELECT TO_BINARY_FLOAT(3) FROM DUAL
   INTERSECT
SELECT 3f FROM DUAL;
</pre>
<p>The following query returns an error:</p>
<pre dir="ltr">SELECT &#39;3&#39; FROM DUAL
   INTERSECT
SELECT 3f FROM DUAL;
</pre>
<p><a id="SQLRF52343"></a><span class="subhead3">Restrictions on the Set Operators&nbsp;</span>The set operators are subject to the following restrictions:</p>
<ul>
<li>
<p>The set operators are not valid on columns of type <code dir="ltr">BLOB</code>, <code dir="ltr">CLOB</code>, <code dir="ltr">BFILE</code>, <code dir="ltr">VARRAY</code>, or nested table.</p>
</li>
<li>
<p>The <code dir="ltr">UNION</code>, <code dir="ltr">INTERSECT</code>, and <code dir="ltr">MINUS</code> operators are not valid on <code dir="ltr">LONG</code> columns.</p>
</li>
<li>
<p>If the select list preceding the set operator contains an expression, then you must provide a column alias for the expression in order to refer to it in the <code dir="ltr"><span class="codeinlineitalic">order_by_clause</span></code>.</p>
</li>
<li>
<p>You cannot also specify the <code dir="ltr"><span class="codeinlineitalic">for_update_clause</span></code> with the set operators.</p>
</li>
<li>
<p>You cannot specify the <code dir="ltr"><span class="codeinlineitalic">order_by_clause</span></code> in the <code dir="ltr"><span class="codeinlineitalic">subquery</span></code> of these operators.</p>
</li>
<li>
<p>You cannot use these operators in <code dir="ltr">SELECT</code> statements containing <code dir="ltr">TABLE</code> collection expressions.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
To comply with emerging SQL standards, a future release of Oracle will give the <code dir="ltr">INTERSECT</code> operator greater precedence than the other set operators. Therefore, you should use parentheses to specify order of evaluation in queries that use the <code dir="ltr">INTERSECT</code> operator with other set operators.</div>
<p><a id="SQLRF52344"></a><span class="subhead3">UNION Example&nbsp;</span>The following statement combines the results of two queries with the <code dir="ltr">UNION</code> operator, which eliminates duplicate selected rows. This statement shows that you must match data type (using the <code dir="ltr">TO_CHAR</code> function) when columns do not exist in one or the other table:</p>
<pre dir="ltr">SELECT location_id, department_name &#34;Department&#34;, 
   TO_CHAR(NULL) &#34;Warehouse&#34;  FROM departments
   UNION
   SELECT location_id, TO_CHAR(NULL) &#34;Department&#34;, warehouse_name 
   FROM warehouses;

LOCATION_ID Department                     Warehouse
----------- ------------------------------ ---------------------------
       1400 IT
       1400                                Southlake, Texas
       1500 Shipping
       1500                                San Francisco
       1600                                New Jersey
       1700 Accounting
       1700 Administration
       1700 Benefits
       1700 Construction
       1700 Contracting
       1700 Control And Credit
...
</pre>
<p><a id="SQLRF52345"></a><span class="subhead3">UNION ALL Example&nbsp;</span>The <code dir="ltr">UNION</code> operator returns only distinct rows that appear in either result, while the <code dir="ltr">UNION</code> <code dir="ltr">ALL</code> operator returns all rows. The <code dir="ltr">UNION</code> <code dir="ltr">ALL</code> operator does not eliminate duplicate selected rows:</p>
<pre dir="ltr">SELECT product_id FROM order_items
UNION
SELECT product_id FROM inventories
ORDER BY product_id;

SELECT location_id  FROM locations 
UNION ALL 
SELECT location_id  FROM departments
ORDER BY location_id;
</pre>
<p>A <code dir="ltr">location_id</code> value that appears multiple times in either or both queries (such as &#39;<code dir="ltr">1700</code>&#39;) is returned only once by the <code dir="ltr">UNION</code> operator, but multiple times by the <code dir="ltr">UNION</code> <code dir="ltr">ALL</code> operator.</p>
<p><a id="SQLRF52346"></a><span class="subhead3">INTERSECT Example&nbsp;</span>The following statement combines the results with the <code dir="ltr">INTERSECT</code> operator, which returns only those unique rows returned by both queries:</p>
<pre dir="ltr">SELECT product_id FROM inventories
INTERSECT
SELECT product_id FROM order_items
ORDER BY product_id;
</pre>
<p><a id="SQLRF52347"></a><span class="subhead3">MINUS Example&nbsp;</span>The following statement combines results with the <code dir="ltr">MINUS</code> operator, which returns only unique rows returned by the first query but not by the second:</p>
<pre dir="ltr">SELECT product_id FROM inventories
MINUS
SELECT product_id FROM order_items
ORDER BY product_id;
</pre></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5862">
<tr>
<td class="cellalignment5869">
<table class="cellalignment5867">
<tr>
<td class="cellalignment5866"><a href="queries003.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5866"><a href="queries005.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5871">
<table class="cellalignment5865">
<tr>
<td class="cellalignment5866"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5866"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5866"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5866"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5866"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5866"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>