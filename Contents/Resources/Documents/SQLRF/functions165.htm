<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-102247"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/REGR_%20%28Linear%20Regression%29%20Functions"></a><title>REGR_ (Linear Regression) Functions</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-18T18:52:19Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database SQL Language Reference"/>
<meta name="dcterms.identifier" content="E41329-25"/>
<meta name="dcterms.isVersionOf" content="SQLRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="functions164.htm" title="Previous" type="text/html"/>
<link rel="Next" href="functions166.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41329-25.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">238/555</span> <!-- End Header --><a id="i85922"></a>
<div id="SQLRF00696" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1">REGR_ (Linear Regression) Funct<a id="sthref1810"></a>ion<a id="sthref1811"></a><a id="sthref1812"></a><a id="sthref1813"></a><a id="sthref1814"></a><a id="sthref1815"></a><a id="sthref1816"></a><a id="sthref1817"></a><a id="sthref1818"></a><a id="sthref1819"></a><a id="sthref1820"></a><a id="sthref1821"></a>s <a id="sthref1822"></a><a id="sthref1823"></a><a id="sthref1824"></a><a id="sthref1825"></a><a id="sthref1826"></a><a id="sthref1827"></a><a id="sthref1828"></a><a id="sthref1829"></a><a id="sthref1830"></a></h1>
<p>The linear regression functions are:</p>
<a id="i85927"></a>
<ul>
<li>
<p><code dir="ltr">REGR_SLOPE</code></p>
</li>
<li id="i85929">
<p><code dir="ltr">REGR_INTERCEPT</code></p>
</li>
<li id="i85931">
<p><code dir="ltr">REGR_COUNT</code></p>
</li>
<li id="i85933">
<p><code dir="ltr">REGR_R2</code></p>
</li>
<li id="i85935">
<p><code dir="ltr">REGR_AVGX</code></p>
</li>
<li id="i85937">
<p><code dir="ltr">REGR_AVGY</code></p>
</li>
<li id="i85939">
<p><code dir="ltr">REGR_SXX</code></p>
</li>
<li id="i85941">
<p><code dir="ltr">REGR_SYY</code></p>
</li>
<li id="i85943">
<p><code dir="ltr">REGR_SXY</code></p>
</li>
</ul>
<p class="subhead1"><a id="SQLRF51695"></a>Syntax</p>
<p class="subhead2"><a id="SQLRF51696"></a><span class="italic">linear_regr</span>::=</p>
<img width="645" height="284" src="img/linear_regr.gif" alt="Description of linear_regr.gif follows"/><br/>
<a id="sthref1831" href="img_text/linear_regr.htm">Description of the illustration &#39;&#39;linear_regr.gif&#39;&#39;</a><br/>
<br/>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="functions004.htm#i81407">&#34;Analytic Functions&#34;</a> for information on syntax, semantics, and restrictions</div>
<p class="subhead1"><a id="SQLRF51697"></a>Purpose</p>
<p>The linear regression functions fit an ordinary-least-squares regression line to a set of number pairs. You can use them as both aggregate and analytic functions.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="functions003.htm#i89203">&#34;Aggregate Functions&#34;</a> and <a href="expressions001.htm#i1002626">&#34;About SQL Expressions&#34;</a> for information on valid forms of <code dir="ltr"><span class="codeinlineitalic">expr</span></code></div>
<p>These functions take as arguments any numeric data type or any nonnumeric data type that can be implicitly converted to a numeric data type. Oracle determines the argument with the highest numeric precedence, implicitly converts the remaining arguments to that data type, and returns that data type.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="sql_elements002.htm#g195937">Table 2-10, &#34;Implicit Type Conversion Matrix&#34;</a> for more information on implicit conversion and <a href="sql_elements001.htm#i156865">&#34;Numeric Precedence&#34;</a> for information on numeric precedence</div>
<p>Oracle applies the function to the set of (<code dir="ltr"><span class="codeinlineitalic">expr1</span></code>, <code dir="ltr"><span class="codeinlineitalic">expr2</span></code>) pairs after eliminating all pairs for which either <code dir="ltr"><span class="codeinlineitalic">expr1</span></code> or <code dir="ltr"><span class="codeinlineitalic">expr2</span></code> is null. Oracle computes all the regression functions simultaneously during a single pass through the data.</p>
<p><code dir="ltr"><span class="codeinlineitalic">expr1</span></code> is interpreted as a value of the dependent variable (a <code dir="ltr">y</code> value), and <code dir="ltr"><span class="codeinlineitalic">expr2</span></code> is interpreted as a value of the independent variable (an <code dir="ltr">x</code> value).</p>
<ul>
<li>
<p><code dir="ltr">REGR_SLOPE</code> returns the slope of the line. The return value is a numeric data type and can be null. After the elimination of null (<code dir="ltr"><span class="codeinlineitalic">expr1</span></code>, <code dir="ltr"><span class="codeinlineitalic">expr2</span></code>) pairs, it makes the following computation:</p>
<pre dir="ltr">COVAR_POP(expr1, expr2) / VAR_POP(expr2)
</pre></li>
<li>
<p><code dir="ltr">REGR_INTERCEPT</code> returns the y-intercept of the regression line. The return value is a numeric data type and can be null. After the elimination of null (<code dir="ltr"><span class="codeinlineitalic">expr1</span></code>, <code dir="ltr"><span class="codeinlineitalic">expr2</span></code>) pairs, it makes the following computation:</p>
<pre dir="ltr">AVG(expr1) - REGR_SLOPE(expr1, expr2) * AVG(expr2)
</pre></li>
<li>
<p><code dir="ltr">REGR_COUNT</code> returns an integer that is the number of non-null number pairs used to fit the regression line.</p>
</li>
<li>
<p><code dir="ltr">REGR_R2</code> returns the coefficient of determination (also called R-squared or goodness of fit) for the regression. The return value is a numeric data type and can be null. <code dir="ltr">VAR_POP</code>(<code dir="ltr"><span class="codeinlineitalic">expr1</span></code>) and <code dir="ltr">VAR_POP</code>(<code dir="ltr"><span class="codeinlineitalic">expr2</span></code>) are evaluated after the elimination of null pairs. The return values are:</p>
<pre dir="ltr">                     NULL if VAR_POP(expr2)  = 0

                        1 if VAR_POP(expr1)  = 0 and 
                             VAR_POP(expr2) != 0

POWER(CORR(expr1,expr),2) if VAR_POP(expr1)  &gt; 0 and
                             VAR_POP(expr2  != 0
</pre></li>
</ul>
<p>All of the remaining regression functions return a numeric data type and can be null:</p>
<ul>
<li>
<p><code dir="ltr">REGR_AVGX</code> evaluates the average of the independent variable (<code dir="ltr"><span class="codeinlineitalic">expr2</span></code>) of the regression line. It makes the following computation after the elimination of null (<code dir="ltr"><span class="codeinlineitalic">expr1</span></code>, <code dir="ltr"><span class="codeinlineitalic">expr2</span></code>) pairs:</p>
<pre dir="ltr">AVG(expr2)
</pre></li>
<li>
<p><code dir="ltr">REGR_AVGY</code> evaluates the average of the dependent variable (<code dir="ltr"><span class="codeinlineitalic">expr1</span></code>) of the regression line. It makes the following computation after the elimination of null (<code dir="ltr"><span class="codeinlineitalic">expr1</span></code>, <code dir="ltr"><span class="codeinlineitalic">expr2</span></code>) pairs:</p>
<pre dir="ltr">AVG(expr1)
</pre></li>
</ul>
<p><code dir="ltr">REGR_SXY</code>, <code dir="ltr">REGR_SXX</code>, <code dir="ltr">REGR_SYY</code> are auxiliary functions that are used to compute various diagnostic statistics.</p>
<ul>
<li>
<p><code dir="ltr">REGR_SXX</code> makes the following computation after the elimination of null (<code dir="ltr"><span class="codeinlineitalic">expr1</span></code>, <code dir="ltr"><span class="codeinlineitalic">expr2</span></code>) pairs:</p>
<pre dir="ltr">REGR_COUNT(expr1, expr2) * VAR_POP(expr2)
</pre></li>
<li>
<p><code dir="ltr">REGR_SYY</code> makes the following computation after the elimination of null (<code dir="ltr"><span class="codeinlineitalic">expr1</span></code>, <code dir="ltr"><span class="codeinlineitalic">expr2</span></code>) pairs:</p>
<pre dir="ltr">REGR_COUNT(expr1, expr2) * VAR_POP(expr1)
</pre></li>
<li>
<p><code dir="ltr">REGR_SXY</code> makes the following computation after the elimination of null (<code dir="ltr"><span class="codeinlineitalic">expr1</span></code>, <code dir="ltr"><span class="codeinlineitalic">expr2</span></code>) pairs:</p>
<pre dir="ltr">REGR_COUNT(expr1, expr2) * COVAR_POP(expr1, expr2)
</pre></li>
</ul>
<p>The following examples are based on the sample tables <code dir="ltr">sh.sales</code> and <code dir="ltr">sh.products</code>.</p>
<p class="subhead1"><a id="SQLRF51698"></a>General Linear Regression Example</p>
<p>The following example provides a comparison of the various linear regression functions used in their analytic form. The analytic form of these functions can be useful when you want to use regression statistics for calculations such as finding the salary predicted for each employee by the model. The sections that follow on the individual linear regression functions contain examples of the aggregate form of these functions.</p>
<pre dir="ltr">SELECT job_id, employee_id ID, salary,
REGR_SLOPE(SYSDATE-hire_date, salary)
   OVER (PARTITION BY job_id) slope,
REGR_INTERCEPT(SYSDATE-hire_date, salary)
   OVER (PARTITION BY job_id) intcpt,
REGR_R2(SYSDATE-hire_date, salary)
   OVER (PARTITION BY job_id) rsqr,
REGR_COUNT(SYSDATE-hire_date, salary)
   OVER (PARTITION BY job_id) count,
REGR_AVGX(SYSDATE-hire_date, salary)
   OVER (PARTITION BY job_id) avgx,
REGR_AVGY(SYSDATE-hire_date, salary)
   OVER (PARTITION BY job_id) avgy
   FROM employees
   WHERE department_id in (50, 80)
   ORDER BY job_id, employee_id;

JOB_ID        ID     SALARY SLOPE    INTCPT  RSQR  COUNT       AVGX      AVGY
---------- ----- ---------- ----- --------- ----- ------ ---------- ---------
SA_MAN       145      14000  .355 -1707.035  .832      5  12200.000  2626.589
SA_MAN       146      13500  .355 -1707.035  .832      5  12200.000  2626.589
SA_MAN       147      12000  .355 -1707.035  .832      5  12200.000  2626.589
SA_MAN       148      11000  .355 -1707.035  .832      5  12200.000  2626.589
SA_MAN       149      10500  .355 -1707.035  .832      5  12200.000  2626.589
SA_REP       150      10000  .257   404.763  .647     29   8396.552  2561.244
SA_REP       151       9500  .257   404.763  .647     29   8396.552  2561.244
SA_REP       152       9000  .257   404.763  .647     29   8396.552  2561.244
SA_REP       153       8000  .257   404.763  .647     29   8396.552  2561.244
SA_REP       154       7500  .257   404.763  .647     29   8396.552  2561.244
SA_REP       155       7000  .257   404.763  .647     29   8396.552  2561.244
SA_REP       156      10000  .257   404.763  .647     29   8396.552  2561.244
. . .
</pre>
<p class="subhead1"><a id="SQLRF51699"></a>REGR_SLOPE and REGR_INTERCEPT Examples</p>
<p>The following example calculates the slope and regression of the linear regression model for time employed (<code dir="ltr">SYSDATE</code> - <code dir="ltr">hire_date</code>) and salary using the sample table <code dir="ltr">hr.employees</code>. Results are grouped by <code dir="ltr">job_id</code>.</p>
<pre dir="ltr">SELECT job_id,
REGR_SLOPE(SYSDATE-hire_date, salary) slope,
REGR_INTERCEPT(SYSDATE-hire_date, salary) intercept
   FROM employees
   WHERE department_id in (50,80)
   GROUP BY job_id
   ORDER BY job_id;

JOB_ID     SLOPE    INTERCEPT
---------- ----- ------------
SA_MAN      .355 -1707.030762
SA_REP      .257   404.767151
SH_CLERK    .745   159.015293
ST_CLERK    .904   134.409050
ST_MAN      .479  -570.077291
</pre>
<p class="subhead1"><a id="SQLRF51700"></a>REGR_COUNT Examples</p>
<p>The following example calculates the count of by <code dir="ltr">job_id</code> for time employed (<code dir="ltr">SYSDATE</code> - <code dir="ltr">hire_date</code>) and salary using the sample table <code dir="ltr">hr.employees</code>. Results are grouped by <code dir="ltr">job_id</code>.</p>
<pre dir="ltr">SELECT job_id,
REGR_COUNT(SYSDATE-hire_date, salary) count
   FROM employees
   WHERE department_id in (30, 50)
   GROUP BY job_id
   ORDER BY job_id, count;

JOB_ID          COUNT
---------- ----------
PU_CLERK            5
PU_MAN              1
SH_CLERK           20
ST_CLERK           20
ST_MAN              5
</pre>
<p class="subhead1"><a id="SQLRF51701"></a>REGR_R2 Examples</p>
<p>The following example calculates the coefficient of determination the linear regression of time employed (<code dir="ltr">SYSDATE</code> - <code dir="ltr">hire_date</code>) and salary using the sample table <code dir="ltr">hr.employees</code>:</p>
<pre dir="ltr">SELECT job_id,
REGR_R2(SYSDATE-hire_date, salary) Regr_R2
   FROM employees
   WHERE department_id in (80, 50)
   GROUP by job_id
  ORDER BY job_id, Regr_R2;

JOB_ID        REGR_R2
---------- ----------
SA_MAN      .83244748
SA_REP     .647007156
SH_CLERK   .879799698
ST_CLERK   .742808493
ST_MAN      .69418508
</pre>
<p class="subhead1"><a id="SQLRF51702"></a>REGR_AVGY and REGR_AVGX Examples</p>
<p>The following example calculates the average values for time employed (<code dir="ltr">SYSDATE</code> - <code dir="ltr">hire_date</code>) and salary using the sample table <code dir="ltr">hr.employees</code>. Results are grouped by <code dir="ltr">job_id</code>:</p>
<pre dir="ltr">SELECT job_id,
REGR_AVGY(SYSDATE-hire_date, salary) avgy,
REGR_AVGX(SYSDATE-hire_date, salary) avgx
   FROM employees
   WHERE department_id in (30,50)
   GROUP BY job_id
   ORDER BY job_id, avgy, avgx;

JOB_ID           AVGY       AVGX
---------- ---------- ----------
PU_CLERK    2950.3778       2780
PU_MAN      4026.5778      11000
SH_CLERK    2773.0778       3215
ST_CLERK    2872.7278       2785
ST_MAN      3140.1778       7280
</pre>
<p class="subhead1"><a id="SQLRF51703"></a>REGR_SXY, REGR_SXX, and REGR_SYY Examples</p>
<p>The following example calculates three types of diagnostic statistics for the linear regression of time employed (<code dir="ltr">SYSDATE</code> - <code dir="ltr">hire_date</code>) and salary using the sample table <code dir="ltr">hr.employees</code>:</p>
<pre dir="ltr">SELECT job_id,
REGR_SXY(SYSDATE-hire_date, salary) regr_sxy,
REGR_SXX(SYSDATE-hire_date, salary) regr_sxx,
REGR_SYY(SYSDATE-hire_date, salary) regr_syy
   FROM employees
   WHERE department_id in (80, 50)
   GROUP BY job_id
   ORDER BY job_id;
 
JOB_ID       REGR_SXY    REGR_SXX   REGR_SYY
---------- ---------- ----------- ----------
SA_MAN        3303500   9300000.0    1409642
SA_REP     16819665.5  65489655.2 6676562.55
SH_CLERK      4248650   5705500.0    3596039
ST_CLERK      3531545   3905500.0 4299084.55
ST_MAN        2180460   4548000.0  1505915.2
</pre></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5862">
<tr>
<td class="cellalignment5869">
<table class="cellalignment5867">
<tr>
<td class="cellalignment5866"><a href="functions164.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5866"><a href="functions166.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5871">
<table class="cellalignment5865">
<tr>
<td class="cellalignment5866"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5866"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5866"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5866"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5866"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5866"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>