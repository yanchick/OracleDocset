<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-103670"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/CREATE%20VIEW"></a><title>CREATE VIEW</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-18T18:52:55Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database SQL Language Reference"/>
<meta name="dcterms.identifier" content="E41329-25"/>
<meta name="dcterms.isVersionOf" content="SQLRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="statements_8003.htm" title="Previous" type="text/html"/>
<link rel="Next" href="statements_8005.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41329-25.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">459/555</span> <!-- End Header --><a id="i2065510"></a>
<div id="SQLRF01504" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1">CREATE VIEW <a id="sthref6008"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6009"></a>Purpose</p>
<p><a id="sthref6010"></a>Use the <code dir="ltr">CREATE</code> <code dir="ltr">VIEW</code> statement to define a <span class="bold">view</span>, which is a logical table based on one or more tables or views. A view contains no data itself. The tables upon which a view is based are called <span class="bold">base tables</span>.</p>
<p><a id="sthref6011"></a>You can also create an <span class="bold">object view</span> or a relational view that supports LOBs, object types, <code dir="ltr">REF</code> data types, nested table, or varray types on top of the existing view mechanism. An object view is a view of a user-defined type, where each row contains objects, each object with a unique object identifier.</p>
<p>You can also create <code dir="ltr">XMLType</code> views, which are similar to object views but display data from XMLSchema-based tables of <code dir="ltr">XMLType</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CNCPT311" href="../CNCPT/schemaob.htm#CNCPT311"><span class="italic">Oracle Database Concepts</span></a>, <a class="olink ADFNS1706" href="../ADFNS/adfns_idcode.htm#ADFNS1706"><span class="italic">Oracle Database Development Guide</span></a>, and <a class="olink ADMIN020" href="../ADMIN/views.htm#ADMIN020"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for information on various types of views and their uses</p>
</li>
<li>
<p><a class="olink ADXDB1800" href="../ADXDB/xdb14vie.htm#ADXDB1800"><span class="italic">Oracle XML DB Developer&#39;s Guide</span></a> for information on <code dir="ltr">XMLType</code> views</p>
</li>
<li>
<p><a href="statements_4004.htm#i2058392">ALTER VIEW</a> and <a href="statements_9009.htm#i2061728">DROP VIEW</a> for information on modifying a view and removing a view from the database</p>
</li>
</ul>
</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6012"></a>Prerequisites</p>
<p>To create a view in your own schema, you must have the <code dir="ltr">CREATE</code> <code dir="ltr">VIEW</code> system privilege. To create a view in another user&#39;s schema, you must have the <code dir="ltr">CREATE</code> <code dir="ltr">ANY</code> <code dir="ltr">VIEW</code> system privilege.</p>
<p>To create a subview, you must have the <code dir="ltr">UNDER</code> <code dir="ltr">ANY</code> <code dir="ltr">VIEW</code> system privilege or the <code dir="ltr">UNDER</code> object privilege on the superview.</p>
<p>The owner of the schema containing the view must have the privileges necessary to either select (<code dir="ltr">READ</code> or <code dir="ltr">SELECT</code> privilege), insert, update, or delete rows from all the tables or views on which the view is based. The owner must be granted these privileges directly, rather than through a role.</p>
<p>To use the basic constructor method of an object type when creating an object view, one of the following must be true:</p>
<ul>
<li>
<p>The object type must belong to the same schema as the view to be created.</p>
</li>
<li>
<p>You must have the <code dir="ltr">EXECUTE</code> <code dir="ltr">ANY</code> <code dir="ltr">TYPE</code> system privileges.</p>
</li>
<li>
<p>You must have the <code dir="ltr">EXECUTE</code> object privilege on that object type.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="statements_10002.htm#i2065646">SELECT</a>, <a href="statements_9015.htm#i2163698">INSERT</a>, <a href="statements_10008.htm#i2067715">UPDATE</a>, and <a href="statements_8005.htm#i2117787">DELETE</a> for information on the privileges required by the owner of a view on the base tables or views of the view being created</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6013"></a>Syntax</p>
<p class="subhead2"><a id="SQLRF54755"></a><span class="italic">create_view</span>::=</p>
<img width="836" height="496" src="img/create_view.gif" alt="Description of create_view.gif follows"/><br/>
<a id="sthref6014" href="img_text/create_view.htm">Description of the illustration &#39;&#39;create_view.gif&#39;&#39;</a><br/>
<br/>
<p>(<a href="clauses002.htm#CJAGIICD"><span class="xreftitleitalic"><span class="italic">inline_constraint</span>::=</span></a> and <a href="clauses002.htm#CJADJGEC"><span class="xreftitleitalic"><span class="italic">out_of_line_constraint</span>::=</span></a>, <a href="#i2122282"><span class="xreftitleitalic"><span class="italic">object_view_clause</span>::=</span></a>, <a href="#i2122300"><span class="xreftitleitalic"><span class="italic">XMLType_view_clause</span> ::=</span></a>, <a href="statements_10002.htm#i2126435"><span class="xreftitleitalic"><span class="italic">subquery</span>::=</span></a>&mdash;part of <code dir="ltr">SELECT</code>, <a href="#i2122502"><span class="xreftitleitalic"><span class="italic">subquery_restriction_clause</span>::=</span></a>)</p>
<p class="subhead2"><a id="i2122282"></a><a id="SQLRF54756"></a><span class="italic">object_view_clause</span>::=</p>
<img width="751" height="282" src="img/object_view_clause.gif" alt="Description of object_view_clause.gif follows"/><br/>
<a id="sthref6015" href="img_text/object_view_clause.htm">Description of the illustration &#39;&#39;object_view_clause.gif&#39;&#39;</a><br/>
<br/>
<p>(<a href="clauses002.htm#CJAGIICD"><span class="xreftitleitalic"><span class="italic">inline_constraint</span>::=</span></a> and <a href="clauses002.htm#CJADJGEC"><span class="xreftitleitalic"><span class="italic">out_of_line_constraint</span>::=</span></a>)</p>
<p class="subhead2"><a id="i2122300"></a><a id="SQLRF54757"></a><a href="#i2126778"><span class="xreftitleitalic"><span class="italic">XMLType_view_clause</span></span></a> ::=</p>
<img width="725" height="91" src="img/xmltype_view_clause.gif" alt="Description of xmltype_view_clause.gif follows"/><br/>
<a id="sthref6016" href="img_text/xmltype_view_clause.htm">Description of the illustration &#39;&#39;xmltype_view_clause.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="SQLRF54758"></a><span class="italic">XMLSchema_spec</span>::=</p>
<img width="614" height="258" src="img/xmlschema_spec.gif" alt="Description of xmlschema_spec.gif follows"/><br/>
<a id="sthref6017" href="img_text/xmlschema_spec.htm">Description of the illustration &#39;&#39;xmlschema_spec.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="i2122502"></a><a id="SQLRF54759"></a><a href="#i2117836"><span class="xreftitleitalic"><span class="italic">subquery_restriction_clause</span></span></a>::=<a id="sthref6018"></a><a id="sthref6019"></a></p>
<img width="463" height="64" src="img/subquery_restriction_clause.gif" alt="Description of subquery_restriction_clause.gif follows"/><br/>
<a id="sthref6020" href="img_text/subquery_restriction_clause.htm">Description of the illustration &#39;&#39;subquery_restriction_clause.gif&#39;&#39;</a><br/>
<br/></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6021"></a>Semantics</p>
<p class="subhead1"><a id="SQLRF54760"></a>OR REPLACE <a id="sthref6022"></a><a id="sthref6023"></a><a id="sthref6024"></a></p>
<p>Specify <code dir="ltr">OR</code> <code dir="ltr">REPLACE</code> to re-create the view if it already exists. You can use this clause to change the definition of an existing view without dropping, re-creating, and regranting object privileges previously granted on it.</p>
<p><code dir="ltr">INSTEAD</code> <code dir="ltr">OF</code> triggers defined on a conventional view are dropped when the view is re-created. DML triggers defined on an editioning view are retained when an editioning view is re-created. However, such triggers can be rendered permanently invalid if the editioning view has changed so that it can no longer be compiled&mdash;for example if an editioning view column referenced in the trigger definition has been dropped.</p>
<p>If any materialized views are dependent on <code dir="ltr"><span class="codeinlineitalic">view</span></code>, then those materialized views will be marked <code dir="ltr">UNUSABLE</code> and will require a full refresh to restore them to a usable state. Invalid materialized views cannot be used by query rewrite and cannot be refreshed until they are recompiled.</p>
<p>You cannot replace a conventional view with an editioning view or an editioning view with a conventional view. See <a class="olink ADFNS0202" href="../ADFNS/adfns_editions.htm#ADFNS0202"><span class="italic">Oracle Database Development Guide</span></a> for more information on editioning views.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="statements_2002.htm#CCHECCJB">ALTER MATERIALIZED VIEW</a> for information on refreshing invalid materialized views</p>
</li>
<li>
<p><a class="olink CNCPT411" href="../CNCPT/schemaob.htm#CNCPT411"><span class="italic">Oracle Database Concepts</span></a> for information on materialized views in general</p>
</li>
<li>
<p><a href="statements_7004.htm#i2235611">CREATE TRIGGER</a> for more information about the <code dir="ltr">INSTEAD</code> <code dir="ltr">OF</code> clause</p>
</li>
</ul>
</div>
<p class="subhead1"><a id="SQLRF54761"></a>FORCE <a id="sthref6025"></a><a id="sthref6026"></a></p>
<p>Specify <code dir="ltr">FORCE</code> if you want to create the view regardless of whether the base tables of the view or the referenced object types exist or the owner of the schema containing the view has privileges on them. These conditions must be true before any <code dir="ltr">SELECT</code>, <code dir="ltr">INSERT</code>, <code dir="ltr">UPDATE</code>, or <code dir="ltr">DELETE</code> statements can be issued against the view.</p>
<p>If the view definition contains any constraints, <code dir="ltr">CREATE</code> <code dir="ltr">VIEW</code> ... <code dir="ltr">FORCE</code> fails if the base table does not exist or the referenced object type does not exist. <code dir="ltr">CREATE</code> <code dir="ltr">VIEW</code> ... <code dir="ltr">FORCE</code> also fails if the view definition names a constraint that does not exist.</p>
<p class="subhead1"><a id="SQLRF54762"></a>NO FORCE <a id="sthref6027"></a></p>
<p>Specify <code dir="ltr">NOFORCE</code> if you want to create the view only if the base tables exist and the owner of the schema containing the view has privileges on them. This is the default.</p>
<p class="subhead1"><a id="BABEJIHE"></a><a id="SQLRF54763"></a>EDITIONING <a id="sthref6028"></a><a id="sthref6029"></a></p>
<p>Use this clause to create an <span class="bold">editioning view</span>. An editioning view is a single-table view that selects all rows from the base table and displays a subset of the base table columns. You can use an editioning view to isolate an application from DDL changes to the base table during administrative operations such as upgrades. You can obtain information about the relationship of existing editioning view to their base tables by querying the <code dir="ltr">USER_</code>, <code dir="ltr">ALL_</code>, and <code dir="ltr">DBA_EDITIONING_VIEW</code> data dictionary views.</p>
<p>The owner of an editioning view must be editions-enabled. Refer to <a href="statements_4003.htm#BABDHGJC">ENABLE EDITIONS</a> for more information.</p>
<p><a id="SQLRF54764"></a><span class="subhead3">Notes on Editioning Views&nbsp;</span>Editioning views differ from conventional views in several important ways:</p>
<ul>
<li>
<p>Editioning views are intended only to select and provide aliases for a subset of columns in a table. Therefore, the syntax for creating an editioning view is more limited than the syntax for creating a conventional view. Any violation of the restrictions that follow causes the creation of the view to fail, even if you specify <code dir="ltr">FORCE</code>.</p>
</li>
<li>
<p>You can create DML triggers on editioning views. In this case, the database considers the editioning view to be the base object of the trigger. Such triggers fire when a DML operation target the editioning view itself. They do not fire if the DML operation targets the base table.</p>
</li>
<li>
<p>You cannot create <code dir="ltr">INSTEAD</code> <code dir="ltr">OF</code> triggers on editioning views.</p>
</li>
</ul>
<p><a id="SQLRF54765"></a><span class="subhead3">Restrictions on Editioning Views&nbsp;</span>Editioning views are subject to the following restrictions:</p>
<ul>
<li>
<p>Within any edition, you can create only one editioning view for any single table.</p>
</li>
<li>
<p>You cannot specify the <code dir="ltr"><span class="codeinlineitalic">object_view_clause</span></code>, <code dir="ltr"><span class="codeinlineitalic">XMLType_view_clause</span></code>, or <code dir="ltr">BEQUEATH</code> clause.</p>
</li>
<li>
<p>You cannot define a constraint <code dir="ltr">WITH</code> <code dir="ltr">CHECK</code> <code dir="ltr">OPTION</code> on an editioning view.</p>
</li>
<li>
<p>In the select list of the defining subquery, you can specify only simple references to the columns of the base table, and you can specify each column of the base table only once in the select list. The asterisk wildcard symbol <code dir="ltr">*</code> and <code dir="ltr"><span class="codeinlineitalic">t_alias</span></code>.<code dir="ltr">*</code> are supported to designate all columns of a base table.</p>
</li>
<li>
<p>The <code dir="ltr">FROM</code> clause of the defining subquery of the view can reference only a single existing database table. Joins are not permitted. The base table must be in the same schema as the view being created. You cannot use a synonym to identify the table, but you can specify a table alias.</p>
</li>
<li>
<p>The following clauses of the defining subquery are not valid for editioning views: <code dir="ltr"><span class="codeinlineitalic">subquery_factoring_clause</span></code>, <code dir="ltr">DISTINCT</code> or <code dir="ltr">UNIQUE</code>, <code dir="ltr"><span class="codeinlineitalic">where_clause</span></code>, <code dir="ltr"><span class="codeinlineitalic">hierarchical_query_clause</span></code>, <code dir="ltr"><span class="codeinlineitalic">group_by_clause</span></code>, <code dir="ltr">HAVING</code> condition, <code dir="ltr"><span class="codeinlineitalic">model_clause</span></code>, or the set operators (<code dir="ltr">UNION</code>, <code dir="ltr">INTERSECT</code>, or <code dir="ltr">MINUS</code>)</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADFNS0202" href="../ADFNS/adfns_editions.htm#ADFNS0202"><span class="italic">Oracle Database Development Guide</span></a> for detailed information about editioning views</p>
</li>
<li>
<p><a href="statements_5010.htm#BABGIFFD">CREATE EDITION</a> for information about editions, including an example of an editioning view</p>
</li>
</ul>
</div>
<p class="subhead1"><a id="SQLRF56249"></a>EDITIONABLE | NONEDITIONABLE</p>
<p>Use these clauses to specify whether the view becomes an editioned or noneditioned object if editioning is enabled for the schema object type <code dir="ltr">VIEW</code> in <code dir="ltr"><span class="codeinlineitalic">schema</span></code>. The default is <code dir="ltr">EDITIONABLE</code>. For information about editioned and noneditioned objects, see <a class="olink ADFNS99923" href="../ADFNS/adfns_editions.htm#ADFNS99923"><span class="italic">Oracle Database Development Guide</span></a>.</p>
<p class="subhead1"><a id="SQLRF54766"></a><span class="italic">schema</span></p>
<p>Specify the schema to contain the view. If you omit <code dir="ltr"><span class="codeinlineitalic">schema</span></code>, then Oracle Database creates the view in your own schema.</p>
<p class="subhead1"><a id="SQLRF54767"></a><span class="italic">view</span></p>
<p>Specify the name of the view or the object view. The name must satisfy the requirements listed in <a href="sql_elements008.htm#i27570">&#34;Database Object Naming Rules&#34;</a>.</p>
<p><a id="SQLRF54768"></a><span class="subhead3">Restriction on Views&nbsp;</span>If a view has <code dir="ltr">INSTEAD</code> <code dir="ltr">OF</code> triggers, then any views created on it must have <code dir="ltr">INSTEAD</code> <code dir="ltr">OF</code> triggers, even if the views are inherently updatable.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i2102873">&#34;Creating a View: Example&#34;</a></div>
<p class="subhead1"><a id="SQLRF54769"></a><span class="italic">alias</span> <a id="sthref6030"></a></p>
<p>Specify names for the expressions selected by the defining query of the view. The number of aliases must match the number of expressions selected by the view. Aliases must follow the rules for naming Oracle Database schema objects. Aliases must be unique within the view.</p>
<p>If you omit the aliases, then the database derives them from the columns or column aliases in the query. For this reason, you must use aliases if the query contains expressions rather than only column names. Also, you must specify aliases if the view definition includes constraints.</p>
<p><a id="SQLRF54770"></a><span class="subhead3">Restriction on View Aliases&nbsp;</span>You cannot specify an alias when creating an object view.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="sql_elements009.htm#i33367">&#34;Syntax for Schema Objects and Parts in SQL Statements&#34;</a></div>
<p class="subhead1"><a id="BABBDHGD"></a><a id="SQLRF55901"></a>VISIBLE | INVISIBLE</p>
<p>Use this clause to specify whether a view column is <code dir="ltr">VISIBLE</code> or <code dir="ltr">INVISIBLE</code>. By default, view columns are <code dir="ltr">VISIBLE</code> regardless of their visibility in the base tables, unless you specify <code dir="ltr">INVISIBLE</code>. This applies to conventional views and editioning views. For complete information on these clauses, refer to <a href="statements_7002.htm#CJAGDBIC">&#34;VISIBLE | INVISIBLE&#34;</a> in the documentation on <code dir="ltr">CREATE</code> <code dir="ltr">TABLE</code>.</p>
<p class="subhead1"><a id="SQLRF54771"></a><span class="italic">inline_constraint</span> and <span class="italic">out_of_line_constraint</span> <a id="sthref6031"></a></p>
<p>You can specify constraints on views and object views. You define the constraint at the view level using the <code dir="ltr"><span class="codeinlineitalic">out_of_line_constraint</span></code> clause. You define the constraint as part of column or attribute specification using the <code dir="ltr"><span class="codeinlineitalic">inline_constraint</span></code> clause after the appropriate alias.</p>
<p>Oracle Database does not enforce view constraints. For a full discussion of view constraints, including restrictions, refer to <a href="clauses002.htm#i1002565">&#34;View Constraints&#34;</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i2126714">&#34;Creating a View with Constraints: Example&#34;</a></div>
<p class="subhead2"><a id="i2164765"></a><a id="SQLRF54772"></a><span class="italic">object_view_clause <a id="sthref6032"></a><a id="sthref6033"></a></span></p>
<p>The <code dir="ltr"><span class="codeinlineitalic">object_view_clause</span></code> lets you define a view on an object type.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i2126819">&#34;Creating an Object View: Example&#34;</a></div>
<p class="subhead2"><a id="SQLRF54773"></a>OF <span class="italic">type_name</span> Clause <a id="sthref6034"></a><a id="sthref6035"></a><a id="sthref6036"></a></p>
<p>Use this clause to explicitly create an <span class="bold">object view</span> of type <code dir="ltr"><span class="codeinlineitalic">type_name</span></code>. The columns of an object view correspond to the top-level attributes of type <code dir="ltr"><span class="codeinlineitalic">type_name</span></code>. Each row will contain an object instance and each instance will be associated with an object identifier as specified in the <code dir="ltr">WITH</code> <code dir="ltr">OBJECT</code> <code dir="ltr">IDENTIFIER</code> clause. If you omit <code dir="ltr"><span class="codeinlineitalic">schema</span></code>, then the database creates the object view in your own schema.</p>
<p><a id="sthref6037"></a><a id="sthref6038"></a><a id="sthref6039"></a>Object tables, as well as <code dir="ltr">XMLType</code> tables, object views, and <code dir="ltr">XMLType</code> views, do not have any column names specified for them. Therefore, Oracle Database defines a system-generated pseudocolumn <code dir="ltr">OBJECT_ID</code>. You can use this column name in queries and to create object views with the <code dir="ltr">WITH</code> <code dir="ltr">OBJECT</code> <code dir="ltr">IDENTIFIER</code> clause.</p>
<p class="subhead2"><a id="SQLRF54774"></a>WITH OBJECT IDENTIFIER Clause <code dir="ltr"><a id="sthref6040"></a><a id="sthref6041"></a></code></p>
<p>Use the <code dir="ltr">WITH</code> <code dir="ltr">OBJECT</code> <code dir="ltr">IDENTIFIER</code> clause to specify a top-level (root) object view. This clause lets you specify the attributes of the object type that will be used as a key to identify each row in the object view. In most cases these attributes correspond to the primary key columns of the base table. You must ensure that the attribute list is unique and identifies exactly one row in the view. The <code dir="ltr">WITH</code> <code dir="ltr">OBJECT</code> <code dir="ltr">IDENTIFIER</code> and <code dir="ltr">WITH</code> <code dir="ltr">OBJECT</code> <code dir="ltr">ID</code> clauses can be used interchangeably and are provided for semantic clarity.</p>
<p><a id="SQLRF54775"></a><span class="subhead3">Restrictions on Object Views&nbsp;</span>Object views are subject to the following restrictions:</p>
<ul>
<li>
<p>If you try to dereference or pin a primary key <code dir="ltr">REF</code> that resolves to more than one instance in the object view, then the database returns an error.</p>
</li>
<li>
<p>You cannot specify this clause if you are creating a subview, because subviews inherit object identifiers from superviews.</p>
</li>
</ul>
<p>If the object view is defined on an object table or an object view, then you can omit this clause or specify <code dir="ltr">DEFAULT</code>.</p>
<p><a id="SQLRF54776"></a><span class="subhead3">DEFAULT&nbsp;</span>Specify <code dir="ltr">DEFAULT</code> if you want the database to use the intrinsic object identifier of the underlying object table or object view to uniquely identify each row.</p>
<p><a id="SQLRF54777"></a><span class="subhead3"><span class="italic">attribute</span>&nbsp;</span>For <code dir="ltr"><span class="codeinlineitalic">attribute</span></code>, specify an attribute of the object type from which the database should create the object identifier for the object view.</p>
<p class="subhead2"><a id="SQLRF54778"></a>UNDER Clause <code dir="ltr"><a id="sthref6042"></a><a id="sthref6043"></a><a id="sthref6044"></a></code></p>
<p>Use the <code dir="ltr">UNDER</code> clause to specify a subview based on an object superview.</p>
<p><a id="SQLRF54779"></a><span class="subhead3">Restrictions on Subviews&nbsp;</span>Subviews are subject to the following restrictions:</p>
<ul>
<li>
<p>You must create a subview in the same schema as the superview.</p>
</li>
<li>
<p>The object type <code dir="ltr"><span class="codeinlineitalic">type_name</span></code> must be the immediate subtype of <code dir="ltr"><span class="codeinlineitalic">superview</span></code>.</p>
</li>
<li>
<p>You can create only one subview of a particular type under the same superview.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="statements_8001.htm#BABHJHEB">CREATE TYPE</a> for information about creating objects</p>
</li>
<li>
<p><a class="olink REFRN" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for information on data dictionary views</p>
</li>
</ul>
</div>
<p class="subhead1"><a id="i2126778"></a><a id="SQLRF54783"></a><span class="italic">XMLType_view_clause <a id="sthref6045"></a><a id="sthref6046"></a><a id="sthref6047"></a><a id="sthref6048"></a><a id="sthref6049"></a></span></p>
<p>Use this clause to create an <code dir="ltr">XMLType</code> view, which displays data from an XMLSchema-based table of type <code dir="ltr">XMLType</code>. The <code dir="ltr"><span class="codeinlineitalic">XMLSchema_spec</span></code> indicates the XMLSchema to be used to map the XML data to its object-relational equivalents. The XMLSchema must already have been created before you can create an <code dir="ltr">XMLType</code> view.</p>
<p>The <code dir="ltr">WITH</code> <code dir="ltr">OBJECT</code> <code dir="ltr">IDENTIFIER</code> and <code dir="ltr">WITH</code> <code dir="ltr">OBJECT</code> <code dir="ltr">ID</code> clauses can be used interchangeably and are provided for semantic clarity.</p>
<p><a id="sthref6050"></a><a id="sthref6051"></a><a id="sthref6052"></a>Object tables, as well as <code dir="ltr">XMLType</code> tables, object views, and <code dir="ltr">XMLType</code> views, do not have any column names specified for them. Therefore, Oracle Database defines a system-generated pseudocolumn <code dir="ltr">OBJECT_ID</code>. You can use this column name in queries and to create object views with the <code dir="ltr">WITH</code> <code dir="ltr">OBJECT</code> <code dir="ltr">IDENTIFIER</code> clause.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><span class="italic">Oracle XML DB Developer&#39;s Guide</span> for information on <a class="olink ADXDB1800" href="../ADXDB/xdb14vie.htm#ADXDB1800"><code dir="ltr">XMLType</code> views</a> and <a class="olink ADXDB0800" href="../ADXDB/xdb07evo.htm#ADXDB0800">XMLSchemas</a></p>
</li>
<li>
<p><a href="#i2117764">&#34;Creating an XMLType View: Example&#34;</a> and <a href="#i2126830">&#34;Creating a View on an XMLType Table: Example&#34;</a></p>
</li>
</ul>
</div>
<p class="subhead1"><a id="BABFIHJJ"></a><a id="SQLRF55922"></a><a id="sthref6053"></a>BEQUEATH</p>
<p>Use the <code dir="ltr">BEQUEATH</code> clause to specify whether functions referenced in the view are executed using the view invoker&#39;s rights or the view definer&#39;s rights.</p>
<p><a id="SQLRF56107"></a><span class="subhead3"><a id="sthref6054"></a><a id="sthref6055"></a>CURRENT_USER&nbsp;</span>If you specify <code dir="ltr">BEQUEATH</code> <code dir="ltr">CURRENT_USER</code>, then functions referenced by the view are executed using the view invoker&#39;s rights as long as one of the following conditions is met:</p>
<ul>
<li>
<p>The view owner has the <code dir="ltr">INHERIT</code> <code dir="ltr">PRIVILEGES</code> object privilege on the invoking user.</p>
</li>
<li>
<p>The view owner has the <code dir="ltr">INHERIT</code> <code dir="ltr">ANY</code> <code dir="ltr">PRIVILEGES</code> system privilege.</p>
</li>
</ul>
<p>If a query of the view invokes an identity- or privilege-sensitive SQL function, or an invoker&#39;s rights PL/SQL or Java function, then the current schema, current user, and currently enabled roles within the operation&#39;s execution are inherited from the querying user&#39;s environment, rather than from the owner of the view.</p>
<p>This clause does not turn the view itself into an invoker&#39;s rights object. Name resolution within the view is still handled using the view owner&#39;s schema, and privilege checking for the view is done using the view owner&#39;s privileges.</p>
<p><a id="SQLRF56108"></a><span class="subhead3"><a id="sthref6056"></a><a id="sthref6057"></a>DEFINER&nbsp;</span>If you specify <code dir="ltr">BEQUEATH</code> <code dir="ltr">DEFINER</code>, then functions referenced by the view are executed using the view definer&#39;s rights. If a query on the view invokes an identity- or privilege-sensitive SQL function, or an invoker&#39;s rights PL/SQL or Java function, then the current schema, current user, and currently enabled roles within the operation&#39;s execution are inherited from the owner of the view.</p>
<p>Name resolution within the view is handled using the view owner&#39;s schema, and privilege checking for the view is done using the view owner&#39;s privileges.</p>
<p>This is the default.</p>
<p><a id="SQLRF55971"></a><span class="subhead3">Restriction on the BEQUEATH Clause&nbsp;</span>You cannot specify this clause with the <code dir="ltr">EDITIONING</code> clause.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DBSEG586" href="../DBSEG/dr_ir.htm#DBSEG586"><span class="italic">Oracle Database Security Guide</span></a> for more information on controlling invoker&#39;s rights and definer&#39;s rights in views</div>
<p class="subhead1"><a id="SQLRF54780"></a>AS <span class="italic">subquery</span> <a id="sthref6058"></a><a id="sthref6059"></a></p>
<p>Specify a subquery that identifies columns and rows of the table(s) that the view is based on. The select list of the subquery can contain up to 1000 expressions.</p>
<p>If you create views that refer to remote tables and views, then the database links you specify must have been created using the <code dir="ltr">CONNECT</code> <code dir="ltr">TO</code> clause of the <code dir="ltr">CREATE</code> <code dir="ltr">DATABASE</code> <code dir="ltr">LINK</code> statement, and you must qualify them with a schema name in the view subquery.</p>
<p>If you create a view with the <code dir="ltr"><span class="codeinlineitalic">flashback_query_clause</span></code> in the defining query, then the database does not interpret the <code dir="ltr">AS</code> <code dir="ltr">OF</code> expression at create time but rather each time a user subsequently queries the view.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i2171191">&#34;Creating a Join View: Example&#34;</a> and <a class="olink ADFNS01003" href="../ADFNS/adfns_flashback.htm#ADFNS01003"><span class="italic">Oracle Database Development Guide</span></a> for more information on Oracle Flashback Query</div>
<p><a id="SQLRF54781"></a><span class="subhead3">Restrictions on the Defining Query of a View&nbsp;</span>The view query is subject to the following restrictions:</p>
<ul>
<li>
<p>The subquery cannot select the <code dir="ltr">CURRVAL</code> or <code dir="ltr">NEXTVAL</code> pseudocolumns.</p>
</li>
<li>
<p>If the subquery selects the <code dir="ltr">ROWID</code>, <code dir="ltr">ROWNUM</code>, or <code dir="ltr">LEVEL</code> pseudocolumns, then those columns must have aliases in the view subquery.</p>
</li>
<li>
<p>If the subquery uses an asterisk (*) to select all columns of a table, and you later add new columns to the table, then the view will not contain those columns until you re-create the view by issuing a <code dir="ltr">CREATE</code> <code dir="ltr">OR</code> <code dir="ltr">REPLACE</code> <code dir="ltr">VIEW</code> statement.</p>
</li>
<li>
<p>For object views, the number of elements in the subquery select list must be the same as the number of top-level attributes for the object type. The data type of each of the selecting elements must be the same as the corresponding top-level attribute.</p>
</li>
<li>
<p>You cannot specify the <code dir="ltr">SAMPLE</code> clause.</p>
</li>
</ul>
<p>The preceding restrictions apply to materialized views as well.</p>
<p><a id="CEGCADFA"></a><a id="SQLRF54782"></a><span class="subhead3">Notes on Updatable Views<a id="sthref6060"></a><a id="sthref6061"></a>&nbsp;</span>The following notes apply to updatable views:</p>
<p>An updatable view is one you can use to insert, update, or delete base table rows. You can create a view to be inherently updatable, or you can create an <code dir="ltr">INSTEAD OF</code> trigger on any view to make it updatable.</p>
<p>To learn whether and in what ways the columns of an inherently updatable view can be modified, query the <code dir="ltr">USER_UPDATABLE_COLUMNS</code> data dictionary view. The information displayed by this view is meaningful only for inherently updatable views. For a view to be inherently updatable, the following conditions must be met:</p>
<ul>
<li>
<p>Each column in the view must map to a column of a single table. For example, if a view column maps to the output of a <code dir="ltr">TABLE</code> clause (an unnested collection), then the view is not inherently updatable.</p>
</li>
</ul>
<ul>
<li>
<p>The view must not contain any of the following constructs:</p>
<dl>
<dd>A set operator</dd>
<dd>A <code dir="ltr">DISTINCT</code> operator</dd>
<dd>An aggregate or analytic function</dd>
<dd>A <code dir="ltr">GROUP</code> <code dir="ltr">BY</code>, <code dir="ltr">ORDER</code> <code dir="ltr">BY</code>, <code dir="ltr">MODEL</code>, <code dir="ltr">CONNECT</code> <code dir="ltr">BY</code>, or <code dir="ltr">START</code> <code dir="ltr">WITH</code> clause</dd>
<dd>A collection expression in a <code dir="ltr">SELECT</code> list</dd>
<dd>A subquery in a <code dir="ltr">SELECT</code> list</dd>
<dd>A subquery designated <code dir="ltr">WITH READ ONLY</code></dd>
<dd>Joins, with some exceptions, as documented in <a class="olink ADMIN020" href="../ADMIN/views.htm#ADMIN020"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a></dd>
</dl>
</li>
<li>
<p>In addition, if an inherently updatable view contains pseudocolumns or expressions, then you cannot update base table rows with an <code dir="ltr">UPDATE</code> statement that refers to any of these pseudocolumns or expressions.</p>
</li>
<li>
<p><a id="sthref6062"></a><a id="sthref6063"></a><a id="sthref6064"></a><a id="sthref6065"></a>If you want a join view to be updatable, then all of the following conditions must be true:</p>
<ul>
<li>
<p>The DML statement must affect only one table underlying the join.</p>
</li>
<li>
<p>For an <code dir="ltr">INSERT</code> statement, the view must not be created <code dir="ltr">WITH</code> <code dir="ltr">CHECK</code> <code dir="ltr">OPTION</code>, and all columns into which values are inserted must come from a <span class="bold">key-preserved table</span>. A key-preserved table is one for which every primary key or unique key value in the base table is also unique in the join view.</p>
</li>
<li>
<p>For an <code dir="ltr">UPDATE</code> statement, the view must not be created <code dir="ltr">WITH</code> <code dir="ltr">CHECK</code> <code dir="ltr">OPTION</code>, and all columns updated must be extracted from a key-preserved table.</p>
</li>
<li>
<p>For a <code dir="ltr">DELETE</code> statement, if the join results in more than one key-preserved table, then Oracle Database deletes from the first table named in the <code dir="ltr">FROM</code> clause, whether or not the view was created <code dir="ltr">WITH</code> <code dir="ltr">CHECK</code> <code dir="ltr">OPTION</code>.</p>
</li>
</ul>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN020" href="../ADMIN/views.htm#ADMIN020"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information on updatable views</p>
</li>
<li>
<p><a href="#i2126726">&#34;Creating an Updatable View: Example&#34;</a>, <a href="#i2171191">&#34;Creating a Join View: Example&#34;</a> for an example of updatable join views and key-preserved tables, and <a class="olink LNPLS20041" href="../LNPLS/triggers.htm#LNPLS20041"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for an example of an <code dir="ltr">INSTEAD</code> <code dir="ltr">OF</code> trigger on a view that is not inherently updatable</p>
</li>
</ul>
</div>
<p class="subhead1"><a id="i2117836"></a><a id="SQLRF54784"></a><span class="italic">subquery_restriction_clause<a id="sthref6066"></a><a id="sthref6067"></a><a id="sthref6068"></a></span></p>
<p>Use the <code dir="ltr"><span class="codeinlineitalic">subquery_restriction_clause</span></code> to restrict the defining query of the view in one of the following ways:</p>
<p><a id="BABHECBI"></a><a id="SQLRF54785"></a><span class="subhead3">WITH READ ONLY&nbsp;</span>Specify <code dir="ltr">WITH</code> <code dir="ltr">READ</code> <code dir="ltr">ONLY</code> to indicate that the table or view cannot be updated.</p>
<p><a id="SQLRF54786"></a><span class="subhead3">WITH CHECK OPTION&nbsp;</span>Specify <code dir="ltr">WITH</code> <code dir="ltr">CHECK</code> <code dir="ltr">OPTION</code> to indicate that Oracle Database prohibits any changes to the table or view that would produce rows that are not included in the subquery. When used in the subquery of a DML statement, you can specify this clause in a subquery in the <code dir="ltr">FROM</code> clause but not in subquery in the <code dir="ltr">WHERE</code> clause.</p>
<p><a id="SQLRF54787"></a><span class="subhead3">CONSTRAINT <span class="italic">constraint</span>&nbsp;</span>Specify the name of the <code dir="ltr">READ</code> <code dir="ltr">ONLY</code> or <code dir="ltr">CHECK</code> <code dir="ltr">OPTION</code> constraint. If you omit this identifier, then Oracle automatically assigns the constraint a name of the form <code dir="ltr">SYS_C</code><code dir="ltr"><span class="codeinlineitalic">n</span></code>, where <span class="italic">n</span> is an integer that makes the constraint name unique within the database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
For tables, <code dir="ltr">WITH</code> <code dir="ltr">CHECK</code> <code dir="ltr">OPTION</code> guarantees that inserts and updates result in tables that the defining table subquery can select. For views, <code dir="ltr">WITH</code> <code dir="ltr">CHECK</code> <code dir="ltr">OPTION</code> cannot make this guarantee if:
<ul>
<li>
<p>There is a subquery within the defining query of this view or any view on which this view is based or</p>
</li>
<li>
<p><code dir="ltr">INSERT</code>, <code dir="ltr">UPDATE</code>, or <code dir="ltr">DELETE</code> operations are performed using <code dir="ltr">INSTEAD</code> <code dir="ltr">OF</code> triggers.</p>
</li>
</ul>
</div>
<p><a id="SQLRF54788"></a><span class="subhead3">Restriction on the <span class="italic">subquery_restriction_clause</span>&nbsp;</span>You cannot specify this clause if you specify an <code dir="ltr">ORDER</code> <code dir="ltr">BY</code> clause.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i2105040">&#34;Creating a Read-Only View: Example&#34;</a></div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="g2214478"></a>Examples</p>
<p><a id="i2102873"></a><a id="SQLRF54789"></a><span class="subhead3">Creating a View: Example&nbsp;</span>The following statement creates a view of the sample table <code dir="ltr">employees</code> named <code dir="ltr">emp_view</code>. The view shows the employees in department 20 and their annual salary:</p>
<pre dir="ltr">CREATE VIEW emp_view AS 
   SELECT last_name, salary*12 annual_salary
   FROM employees 
   WHERE department_id = 20;
</pre>
<p>The view declaration need not define a name for the column based on the expression <code dir="ltr">salary*12</code>, because the subquery uses a column alias (<code dir="ltr">annual_salary</code>) for this expression.</p>
<p><a id="SQLRF54790"></a><span class="subhead3">Creating an Editioning View: Example&nbsp;</span>The following statement creates an editioning view of the <code dir="ltr">orders</code> table:</p>
<pre dir="ltr">CREATE EDITIONING VIEW ed_orders_view (o_id, o_date, o_status)
  AS SELECT order_id, order_date, order_status FROM orders
  WITH READ ONLY;
</pre>
<p>You can use this view to isolate an application from DDL changes to the <code dir="ltr">orders</code> table during an administrative operation such as an upgrade. You can create a DML trigger on this view, so that the trigger fires when a DML operation targets the view itself, but does not fire if the DML operation targets the <code dir="ltr">orders</code> table.</p>
<p><a id="i2126714"></a><a id="SQLRF54791"></a><span class="subhead3">Creating a View with Constraints: Example&nbsp;</span>The following statement creates a restricted view of the sample table <code dir="ltr">hr.employees</code> and defines a unique constraint on the <code dir="ltr">email</code> view column and a primary key constraint for the view on the <code dir="ltr">emp_id</code> view column:</p>
<pre dir="ltr">CREATE VIEW emp_sal (emp_id, last_name, 
      email UNIQUE RELY DISABLE NOVALIDATE,
   CONSTRAINT id_pk PRIMARY KEY (emp_id) RELY DISABLE NOVALIDATE)
   AS SELECT employee_id, last_name, email FROM employees;
</pre>
<p><a id="i2126726"></a><a id="SQLRF54792"></a><span class="subhead3">Creating an Updatable View: Example&nbsp;</span>The following statement creates an updatable view named <code dir="ltr">clerk</code> of all clerks in the <code dir="ltr">employees</code> table. Only the employees&#39; IDs, last names, department numbers, and jobs are visible in this view, and these columns can be updated only in rows where the employee is a kind of clerk:</p>
<pre dir="ltr">CREATE VIEW clerk AS
   SELECT employee_id, last_name, department_id, job_id 
   FROM employees
   WHERE job_id = &#39;PU_CLERK&#39; 
      or job_id = &#39;SH_CLERK&#39; 
      or job_id = &#39;ST_CLERK&#39;;
</pre>
<p>This view lets you change the <code dir="ltr">job_id</code> of a purchasing clerk to purchasing manager (<code dir="ltr">PU_MAN</code>):</p>
<pre dir="ltr">UPDATE clerk SET job_id = &#39;PU_MAN&#39; WHERE employee_id = 118;
</pre>
<p>The next example creates the same view <code dir="ltr">WITH</code> <code dir="ltr">CHECK</code> <code dir="ltr">OPTION</code>. You cannot subsequently insert a new row into <code dir="ltr">clerk</code> if the new employee is not a clerk. You can update an employee&#39;s <code dir="ltr">job_id</code> from one type of clerk to another type of clerk, but the update in the preceding statement would fail, because the view cannot access employees with non-clerk <code dir="ltr">job_id</code>.</p>
<pre dir="ltr">CREATE VIEW clerk AS
   SELECT employee_id, last_name, department_id, job_id 
   FROM employees
   WHERE job_id = &#39;PU_CLERK&#39; 
      or job_id = &#39;SH_CLERK&#39; 
      or job_id = &#39;ST_CLERK&#39;
   WITH CHECK OPTION;
</pre>
<p><a id="i2171191"></a><a id="SQLRF54793"></a><span class="subhead3">Creating a Join View: Example <a id="sthref6069"></a>&nbsp;</span>A join view is one whose view subquery contains a join. If at least one column in the join has a unique index, then it may be possible to modify one base table in a join view. You can query <code dir="ltr">USER_UPDATABLE_COLUMNS</code> to see whether the columns in a join view are updatable. For example:</p>
<pre dir="ltr">CREATE VIEW locations_view AS
   SELECT d.department_id, d.department_name, l.location_id, l.city
   FROM departments d, locations l
   WHERE d.location_id = l.location_id;

SELECT column_name, updatable 
   FROM user_updatable_columns
   WHERE table_name = &#39;LOCATIONS_VIEW&#39;
   ORDER BY column_name, updatable;

COLUMN_NAME                    UPD
------------------------------ ---
DEPARTMENT_ID                  YES
DEPARTMENT_NAME                YES
LOCATION_ID                    NO
CITY                           NO
</pre>
<p>In the preceding example, the primary key index on the <code dir="ltr">location_id</code> column of the <code dir="ltr">locations</code> table is not unique in the <code dir="ltr">locations_view</code> view. Therefore, <code dir="ltr">locations</code> is not a key-preserved table and columns from that base table are not updatable.</p>
<pre dir="ltr">INSERT INTO locations_view VALUES
   (999, &#39;Entertainment&#39;, 87, &#39;Roma&#39;);
INSERT INTO locations_view VALUES
*
ERROR at line 1:
ORA-01776: cannot modify more than one base table through a join view
</pre>
<p>You can insert, update, or delete a row from the <code dir="ltr">departments</code> base table, because all the columns in the view mapping to the <code dir="ltr">departments</code> table are marked as updatable and because the primary key of <code dir="ltr">departments</code> is retained in the view.</p>
<pre dir="ltr">INSERT INTO locations_view (department_id, department_name)
   VALUES (999, &#39;Entertainment&#39;);

1 row created.
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
For you to insert into the table using the view, the view must contain all <code dir="ltr">NOT</code> <code dir="ltr">NULL</code> columns of all tables in the join, unless you have specified <code dir="ltr">DEFAULT</code> values for the <code dir="ltr">NOT</code> <code dir="ltr">NULL</code> columns.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN020" href="../ADMIN/views.htm#ADMIN020"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information on updating join views</div>
<p><a id="i2105040"></a><a id="SQLRF54794"></a><span class="subhead3">Creating a Read-Only View: Example&nbsp;</span>The following statement creates a read-only view named <code dir="ltr">customer_ro</code> of the <code dir="ltr">oe.customers</code> table. Only the customers&#39; last names, language, and credit limit are visible in this view:</p>
<pre dir="ltr">CREATE VIEW customer_ro (name, language, credit)
      AS SELECT cust_last_name, nls_language, credit_limit
      FROM customers
      WITH READ ONLY;
</pre>
<p><a id="i2126819"></a><a id="SQLRF54795"></a><span class="subhead3">Creating an Object View: Example&nbsp;</span>The following example shows the creation of the type <code dir="ltr">inventory_typ</code> in the <code dir="ltr">oc</code> schema, and the <code dir="ltr">oc_inventories</code> view that is based on that type:</p>
<pre dir="ltr">CREATE TYPE inventory_typ
 OID &#39;82A4AF6A4CD4656DE034080020E0EE3D&#39;
 AS OBJECT
    ( product_id          NUMBER(6)
    , warehouse           warehouse_typ
    , quantity_on_hand    NUMBER(8)
    ) ;
/
CREATE OR REPLACE VIEW oc_inventories OF inventory_typ
 WITH OBJECT OID (product_id)
 AS SELECT i.product_id,
           warehouse_typ(w.warehouse_id, w.warehouse_name, w.location_id),
           i.quantity_on_hand
    FROM inventories i, warehouses w
    WHERE i.warehouse_id=w.warehouse_id;
</pre>
<p><a id="i2126830"></a><a id="SQLRF54796"></a><span class="subhead3">Creating a View on an XMLType Table: Example&nbsp;</span>The following example builds a regular view on the <code dir="ltr">XMLType</code> table <code dir="ltr">xwarehouses</code>, which was created in <a href="statements_7002.htm#i2062833">&#34;Examples&#34;</a>:</p>
<pre dir="ltr">CREATE VIEW warehouse_view AS
   SELECT VALUE(p) AS warehouse_xml
   FROM xwarehouses p;
</pre>
<p>You select from such a view as follows:</p>
<pre dir="ltr">SELECT e.warehouse_xml.getclobval()
   FROM warehouse_view e
   WHERE EXISTSNODE(warehouse_xml, &#39;//Docks&#39;) =1;
</pre>
<p><a id="i2117764"></a><a id="SQLRF54797"></a><span class="subhead3">Creating an XMLType View: Example<a id="sthref6070"></a>&nbsp;</span>In some cases you may have an object-relational table upon which you would like to build an <code dir="ltr">XMLType</code> view. The following example creates an object-relational table resembling the <code dir="ltr">XMLType</code> column <code dir="ltr">warehouse_spec</code> in the sample table <code dir="ltr">oe.warehouses</code>, and then creates an <code dir="ltr">XMLType</code> view of that table:</p>
<pre dir="ltr">CREATE TABLE warehouse_table 
(
  WarehouseID       NUMBER,
  Area              NUMBER,
  Docks             NUMBER,
  DockType          VARCHAR2(100),
  WaterAccess       VARCHAR2(10),
  RailAccess        VARCHAR2(10),
  Parking           VARCHAR2(20),
  VClearance        NUMBER
);

INSERT INTO warehouse_table 
   VALUES(5, 103000,3,&#39;Side Load&#39;,&#39;false&#39;,&#39;true&#39;,&#39;Lot&#39;,15);

CREATE VIEW warehouse_view OF XMLTYPE
 XMLSCHEMA &#34;http://www.example.com/xwarehouses.xsd&#34; 
    ELEMENT &#34;Warehouse&#34;
    WITH OBJECT ID 
    (extract(OBJECT_VALUE, &#39;/Warehouse/Area/text()&#39;).getnumberval())
 AS SELECT XMLELEMENT(&#34;Warehouse&#34;,
            XMLFOREST(WarehouseID as &#34;Building&#34;,
                      area as &#34;Area&#34;,
                      docks as &#34;Docks&#34;,
                      docktype as &#34;DockType&#34;,
                      wateraccess as &#34;WaterAccess&#34;,
                      railaccess as &#34;RailAccess&#34;,
                      parking as &#34;Parking&#34;,
                      VClearance as &#34;VClearance&#34;))
  FROM warehouse_table;
</pre>
<p>You query this view as follows:</p>
<pre dir="ltr">SELECT VALUE(e) FROM warehouse_view e;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5862">
<tr>
<td class="cellalignment5869">
<table class="cellalignment5867">
<tr>
<td class="cellalignment5866"><a href="statements_8003.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5866"><a href="statements_8005.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5871">
<table class="cellalignment5865">
<tr>
<td class="cellalignment5866"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5866"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5866"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5866"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5866"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5866"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>