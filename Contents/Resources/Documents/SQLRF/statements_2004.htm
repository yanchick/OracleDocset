<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-103597"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/ALTER%20MATERIALIZED%20ZONEMAP"></a><title>ALTER MATERIALIZED ZONEMAP</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-18T18:52:32Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database SQL Language Reference"/>
<meta name="dcterms.identifier" content="E41329-25"/>
<meta name="dcterms.isVersionOf" content="SQLRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="statements_2003.htm" title="Previous" type="text/html"/>
<link rel="Next" href="statements_2005.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41329-25.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">386/555</span> <!-- End Header --><a id="BGBBBEDH"></a>
<div id="SQLRF56854" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1">ALTER MATERIALIZED ZONEMAP<a id="sthref3347"></a><a id="sthref3348"></a></h1>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code dir="ltr">ALTER</code> <code dir="ltr">MATERIALIZED</code> <code dir="ltr">ZONEMAP</code> statement is available starting with Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2).</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3349"></a>Purpose</p>
<p>Use the <code dir="ltr">ALTER</code> <code dir="ltr">MATERIALIZED</code> <code dir="ltr">ZONEMAP</code> statement to modify an existing zone map in one of the following ways:</p>
<ul>
<li>
<p>To change its attributes</p>
</li>
<li>
<p>To change its default refresh method and mode</p>
</li>
<li>
<p>To enable or disable its use for pruning</p>
</li>
<li>
<p>To compile it, rebuild it, or make it unusable</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="statements_6004.htm#CACECJCC">CREATE MATERIALIZED ZONEMAP</a> for information on creating zone maps</p>
</li>
<li>
<p><a class="olink DWHSG9355" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=DWHSG9355"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for more information on zone maps</p>
</li>
</ul>
</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3350"></a>Prerequisites</p>
<p>The zone map must be in your own schema or you must have the <code dir="ltr">ALTER</code> <code dir="ltr">ANY</code> <code dir="ltr">MATERIALIZED</code> <code dir="ltr">VIEW</code> system privilege.</p>
<p>The user who owns the schema containing the zone map must have access to any base tables of the zone map that reside outside of that schema, either through a <code dir="ltr">READ</code> or <code dir="ltr">SELECT</code> object privilege on each of the tables, or through the <code dir="ltr">READ</code> <code dir="ltr">ANY</code> <code dir="ltr">TABLE</code> or <code dir="ltr">SELECT</code> <code dir="ltr">ANY</code> <code dir="ltr">TABLE</code> system privilege.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3351"></a>Syntax</p>
<p class="subhead2"><a id="SQLRF56855"></a><span class="italic">alter_materialized_zonemap</span>::=</p>
<img width="758" height="220" src="img/alter_materialized_zonemap.gif" alt="Description of alter_materialized_zonemap.gif follows"/><br/>
<a id="sthref3352" href="img_text/alter_materialized_zonemap.htm">Description of the illustration &#39;&#39;alter_materialized_zonemap.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="SQLRF56856"></a><a href="#BGBICGAH"><span class="xreftitleitalic"><span class="italic">alter_zonemap_attributes</span></span></a>::=</p>
<img width="221" height="135" src="img/alter_zonemap_attributes.gif" alt="Description of alter_zonemap_attributes.gif follows"/><br/>
<a id="sthref3353" href="img_text/alter_zonemap_attributes.htm">Description of the illustration &#39;&#39;alter_zonemap_attributes.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="SQLRF56857"></a><a href="#BGBJJHHD"><span class="xreftitleitalic"><span class="italic">zonemap_refresh_clause</span></span></a>::=</p>
<img width="591" height="175" src="img/zonemap_refresh_clause.gif" alt="Description of zonemap_refresh_clause.gif follows"/><br/>
<a id="sthref3354" href="img_text/zonemap_refresh_clause.htm">Description of the illustration &#39;&#39;zonemap_refresh_clause.gif&#39;&#39;</a><br/>
<br/>
<div class="infobox-note">
<p class="notep1">Note:</p>
When specifying the <code dir="ltr"><span class="codeinlineitalic">zonemap_refresh_clause</span></code>, you must specify at least one clause after the <code dir="ltr">REFRESH</code> keyword.</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3355"></a>Semantics</p>
<p class="subhead1"><a id="SQLRF56914"></a><span class="italic">schema</span></p>
<p>Specify the schema containing the zone map. If you omit <code dir="ltr"><span class="codeinlineitalic">schema</span></code>, then Oracle Database assumes the zone map is in your own schema.</p>
<p class="subhead1"><a id="SQLRF56915"></a><span class="italic">zonemap_name</span></p>
<p>Specify the name of the zone map to be altered.</p>
<p class="subhead1"><a id="BGBICGAH"></a><a id="SQLRF56916"></a><span class="italic">alter_zonemap_attributes<a id="sthref3356"></a><a id="sthref3357"></a></span></p>
<p>Use this clause to modify the following attributes for the zone map: <code dir="ltr">PCTFREE</code>, <code dir="ltr">PCTUSED</code>, and <code dir="ltr">CACHE</code> or <code dir="ltr">NOCACHE</code>. These attributes have the same semantics for <code dir="ltr">ALTER</code> <code dir="ltr">MATERIALIZED</code> <code dir="ltr">ZONEMAP</code> and <code dir="ltr">CREATE</code> <code dir="ltr">MATERIALIZED</code> <code dir="ltr">ZONEMAP</code>. For complete information on these attributes, refer to <a href="statements_6004.htm#CACDIEDG">PCTFREE</a>, <a href="statements_6004.htm#CACJGFEF">PCTUSED</a>, and <a href="statements_6004.htm#CACIGEHI">CACHE | NOCACHE</a> in the documentation on <code dir="ltr">CREATE</code> <code dir="ltr">MATERIALIZED</code> <code dir="ltr">ZONEMAP</code>.</p>
<p class="subhead2"><a id="BGBJJHHD"></a><a id="SQLRF56917"></a><span class="italic">zonemap_refresh_clause</span></p>
<p>Use this clause to modify the default refresh method and mode for the zone map. This clause has the same semantics for <code dir="ltr">ALTER</code> <code dir="ltr">MATERIALIZED</code> <code dir="ltr">ZONEMAP</code> and <code dir="ltr">CREATE</code> <code dir="ltr">MATERIALIZED</code> <code dir="ltr">ZONEMAP</code>. For complete information on this clause, refer to <a href="statements_6004.htm#CACBDIJH"><span class="xreftitleitalic"><span class="italic">zonemap_refresh_clause</span></span></a> in the documentation on <code dir="ltr">CREATE</code> <code dir="ltr">MATERIALIZED</code> <code dir="ltr">ZONEMAP</code>.</p>
<p class="subhead2"><a id="SQLRF56918"></a>ENABLE | DISABLE PRUNING</p>
<p>Use this clause to enable or disable use of the zone map for pruning. This clause has the same semantics for <code dir="ltr">ALTER</code> <code dir="ltr">MATERIALIZED</code> <code dir="ltr">ZONEMAP</code> and <code dir="ltr">CREATE</code> <code dir="ltr">MATERIALIZED</code> <code dir="ltr">ZONEMAP</code>. For complete information on this clause, refer to <a href="statements_6004.htm#CACEAADH">ENABLE | DISABLE PRUNING</a> in the documentation on <code dir="ltr">CREATE</code> <code dir="ltr">MATERIALIZED</code> <code dir="ltr">ZONEMAP</code></p>
<p class="subhead2"><a id="SQLRF56919"></a>COMPILE</p>
<p>This clause lets you explicitly compile the zone map. This operation validates the zone map after a DDL operation changes the structure of one or more of its base tables. It is usually not necessary to issue this clause because Oracle database automatically compiles a zone map that requires compilation before using it. However, if you would like to explicitly compile a zone map, then you can use this clause to do so.</p>
<p>The result of compiling a zone map depends on whether a base table is changed in a way that affects the zone map. For example, if a column is added to a base table, then the zone map will be valid after compilation because the change does not affect the zone map. However, if a column that is included in the defining subquery of the zone map is dropped from a base table, then the zone map will be invalid after compilation.</p>
<p>You can determine if a zone map requires compilation by querying the <code dir="ltr">COMPILE_STATE</code> column of the <code dir="ltr">ALL_</code>, <code dir="ltr">DBA_</code>, and <code dir="ltr">USER_ZONEMAPS</code> data dictionary views. If the value of the column is <code dir="ltr">NEEDS_COMPILE</code>, then the zone map requires compilation.</p>
<p class="subhead2"><a id="BGBHEFFI"></a><a id="SQLRF56920"></a>REBUILD</p>
<p>This clause lets you explicitly rebuild the zone map. This operation refreshes the data in the zone map. This clause is useful in the following situations:</p>
<ul>
<li>
<p>You can use this clause to refresh the data for a refresh-on-demand zone map. Refer to the <a href="statements_6004.htm#CACFCGJJ">ON DEMAND</a> clause in the documentation on <code dir="ltr">CREATE</code> <code dir="ltr">MATERIALIZED</code> <code dir="ltr">ZONEMAP</code> for more information.</p>
</li>
<li>
<p>You must issue this clause after an <code dir="ltr">EXCHANGE</code> <code dir="ltr">PARTITION</code> operation on one of the base tables of a zone map, regardless of the default refresh mode of the zone map.</p>
</li>
<li>
<p>If a zone map is marked unusable, then you must issue this clause to mark it usable. You can determine if a zone map is marked unusable by querying the <code dir="ltr">UNUSABLE</code> column of the <code dir="ltr">ALL_</code>, <code dir="ltr">DBA_</code>, and <code dir="ltr">USER_ZONEMAPS</code> data dictionary views.</p>
</li>
</ul>
<p class="subhead2"><a id="SQLRF56921"></a>UNUSABLE</p>
<p>Specify this clause to make the zone map unusable. Subsequent queries will not use the zone map and the database will no longer maintain the zone map. You can make the zone map usable again by issuing an <code dir="ltr">ALTER</code> <code dir="ltr">MATERIALIZED</code> <code dir="ltr">ZONEMAP</code> ... <code dir="ltr">REBUILD</code> statement.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3358"></a>Examples</p>
<p><a id="SQLRF56922"></a><span class="subhead3">Modifying Zone Map Attributes: Example&nbsp;</span>The following statement modifies the <code dir="ltr">PCTFREE</code> and <code dir="ltr">PCTUSED</code> attributes of zone map <code dir="ltr">sales_zmap</code>, and modifies the zone map so that it does not use caching:</p>
<pre dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap
  PCTFREE 20 PCTUSED 50 NOCACHE;
</pre>
<p><a id="SQLRF56923"></a><span class="subhead3">Modifying the Default Refresh Method and Mode for a Zone Map: Example&nbsp;</span>The following statement changes the default refresh method to <code dir="ltr">FAST</code> and the default refresh mode to <code dir="ltr">ON</code> <code dir="ltr">COMMIT</code> for zone map <code dir="ltr">sales_zmap</code>:</p>
<pre dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap
  REFRESH FAST ON COMMIT;
</pre>
<p><a id="SQLRF56924"></a><span class="subhead3">Disabling Use of a Zone Map for Pruning: Example&nbsp;</span>The following statement disables use of zone map <code dir="ltr">sales_zmap</code> for pruning:</p>
<pre dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap
  DISABLE PRUNING;
</pre>
<p><a id="SQLRF56925"></a><span class="subhead3">Compiling a Zone Map: Example&nbsp;</span>The following statement compiles zone map <code dir="ltr">sales_zmap</code>:</p>
<pre dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap
  COMPILE;
</pre>
<p><a id="SQLRF56926"></a><span class="subhead3">Rebuilding a Zone Map: Example&nbsp;</span>The following statement rebuilds zone map <code dir="ltr">sales_zmap</code>:</p>
<pre dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap
  REBUILD;
</pre>
<p><a id="SQLRF56927"></a><span class="subhead3">Making a Zone Map Unusable: Example&nbsp;</span>The following statement makes zone map <code dir="ltr">sales_zmap</code> unusable:</p>
<pre dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap
  UNUSABLE;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5862">
<tr>
<td class="cellalignment5869">
<table class="cellalignment5867">
<tr>
<td class="cellalignment5866"><a href="statements_2003.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5866"><a href="statements_2005.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5871">
<table class="cellalignment5865">
<tr>
<td class="cellalignment5866"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5866"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5866"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5866"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5866"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5866"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>