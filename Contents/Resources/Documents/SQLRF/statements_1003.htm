<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-103581"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/ADMINISTER%20KEY%20MANAGEMENT"></a><title>ADMINISTER KEY MANAGEMENT</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-18T18:52:25Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database SQL Language Reference"/>
<meta name="dcterms.identifier" content="E41329-25"/>
<meta name="dcterms.isVersionOf" content="SQLRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="statements_1002.htm" title="Previous" type="text/html"/>
<link rel="Next" href="statements_1004.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41329-25.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">370/555</span> <!-- End Header --><a id="BGECGFGI"></a>
<div id="SQLRF55976" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1">ADMINISTER KEY MANAGEMENT<a id="sthref2503"></a><a id="sthref2504"></a><a id="sthref2505"></a><a id="sthref2506"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref2507"></a>Purpose</p>
<p>The <code dir="ltr">ADMINISTER</code> <code dir="ltr">KEY</code> <code dir="ltr">MANAGEMENT</code> statement provides a unified key management interface for Transparent Data Encryption. Use this statement to:</p>
<ul>
<li>
<p>Manage software and hardware keystores</p>
</li>
<li>
<p>Manage encryption keys</p>
</li>
<li>
<p>Manage secrets</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref2508"></a>Prerequisites</p>
<p>You must have the <code dir="ltr">ADMINISTER</code> <code dir="ltr">KEY</code> <code dir="ltr">MANAGEMENT</code> or <code dir="ltr">SYSKM</code> system privilege.</p>
<p>To specify the <code dir="ltr">CONTAINER</code> clause, you must be connected to a multitenant container database (CDB). To specify <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">ALL</code>, the current container must be the root and you must have the commonly granted <code dir="ltr">ADMINISTER</code> <code dir="ltr">KEY</code> <code dir="ltr">MANAGEMENT</code> or <code dir="ltr">SYSKM</code> privilege.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref2509"></a>Syntax</p>
<p class="subhead2"><a id="BGEJCFCG"></a><a id="SQLRF55977"></a><span class="italic">administer_key_management</span>::=</p>
<img width="510" height="91" src="img/administer_key_management.gif" alt="Description of administer_key_management.gif follows"/><br/>
<a id="sthref2510" href="img_text/administer_key_management.htm">Description of the illustration &#39;&#39;administer_key_management.gif&#39;&#39;</a><br/>
<br/>
<p>(<a href="#BGEJEEFB"><span class="xreftitleitalic"><span class="italic"><span class="italic">keystore_management_clauses</span></span>::=</span></a>, <a href="#BGEFECGG"><span class="xreftitleitalic"><span class="italic">key_management_clauses</span>::=</span></a>, <a href="#BGEEJDAI"><span class="xreftitleitalic"><span class="italic">secret_management_clauses</span>::=</span></a>)</p>
<p class="subhead2"><a id="BGEJEEFB"></a><a id="SQLRF55978"></a><span class="italic"><a href="#BGEHJEIJ"><span class="xreftitleitalic"><span class="italic">keystore_management_clauses</span></span></a></span>::=</p>
<img width="211" height="220" src="img/keystore_management_clauses.gif" alt="Description of keystore_management_clauses.gif follows"/><br/>
<a id="sthref2511" href="img_text/keystore_management_clauses.htm">Description of the illustration &#39;&#39;keystore_management_clauses.gif&#39;&#39;</a><br/>
<br/>
<p>(<a href="#BGEFAFFD"><span class="xreftitleitalic"><span class="italic">create_keystore</span>::=</span></a>, <a href="#BGEDBEJF"><span class="xreftitleitalic"><span class="italic">open_keystore</span>::=</span></a>, <a href="#BGEDHCEE"><span class="xreftitleitalic"><span class="italic">close_keystore</span></span></a>, <a href="#BGEJDBFF"><span class="xreftitleitalic"><span class="italic">backup_keystore</span>::=</span></a>, <a href="#BGEFDIEE"><span class="xreftitleitalic"><span class="italic">alter_keystore_password</span>::=</span></a>, <a href="#BGEGJCGG"><span class="xreftitleitalic"><span class="italic">merge_into_new_keystore</span>::=</span></a>, <a href="#BGEFFGDF"><span class="xreftitleitalic"><span class="italic">merge_into_exist_keystore</span>::=</span></a>)</p>
<p class="subhead2"><a id="BGEFAFFD"></a><a id="SQLRF55979"></a><a href="#BGEGHDCE"><span class="xreftitleitalic"><span class="italic">create_keystore</span></span></a>::=</p>
<img width="739" height="135" src="img/create_keystore.gif" alt="Description of create_keystore.gif follows"/><br/>
<a id="sthref2512" href="img_text/create_keystore.htm">Description of the illustration &#39;&#39;create_keystore.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="BGEDBEJF"></a><a id="SQLRF55983"></a><a href="#BGECCDCA"><span class="xreftitleitalic"><span class="italic">open_keystore</span></span></a>::=</p>
<img width="753" height="79" src="img/open_keystore.gif" alt="Description of open_keystore.gif follows"/><br/>
<a id="sthref2513" href="img_text/open_keystore.htm">Description of the illustration &#39;&#39;open_keystore.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="BGEDHCEE"></a><a id="SQLRF56251"></a><a href="#BGEDFGGA"><span class="xreftitleitalic"><span class="italic">close_keystore</span></span></a></p>
<img width="807" height="79" src="img/close_keystore.gif" alt="Description of close_keystore.gif follows"/><br/>
<a id="sthref2514" href="img_text/close_keystore.htm">Description of the illustration &#39;&#39;close_keystore.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="BGEJDBFF"></a><a id="SQLRF55984"></a><a href="#BGEIADJI"><span class="xreftitleitalic"><span class="italic">backup_keystore</span></span></a>::=</p>
<img width="534" height="123" src="img/backup_keystore.gif" alt="Description of backup_keystore.gif follows"/><br/>
<a id="sthref2515" href="img_text/backup_keystore.htm">Description of the illustration &#39;&#39;backup_keystore.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="BGEFDIEE"></a><a id="SQLRF55980"></a><a href="#BGEJEGIB"><span class="xreftitleitalic"><span class="italic">alter_keystore_password</span></span></a>::=</p>
<img width="671" height="123" src="img/alter_keystore_password.gif" alt="Description of alter_keystore_password.gif follows"/><br/>
<a id="sthref2516" href="img_text/alter_keystore_password.htm">Description of the illustration &#39;&#39;alter_keystore_password.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="BGEGJCGG"></a><a id="SQLRF55981"></a><a href="#BGEECFJH"><span class="xreftitleitalic"><span class="italic">merge_into_new_keystore</span></span></a>::=</p>
<img width="661" height="178" src="img/merge_into_new_keystore.gif" alt="Description of merge_into_new_keystore.gif follows"/><br/>
<a id="sthref2517" href="img_text/merge_into_new_keystore.htm">Description of the illustration &#39;&#39;merge_into_new_keystore.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="BGEFFGDF"></a><a id="SQLRF55982"></a><a href="#BGEGFHBD"><span class="xreftitleitalic"><span class="italic">merge_into_exist_keystore</span></span></a>::=</p>
<img width="678" height="189" src="img/merge_into_exist_keystore.gif" alt="Description of merge_into_exist_keystore.gif follows"/><br/>
<a id="sthref2518" href="img_text/merge_into_exist_keystore.htm">Description of the illustration &#39;&#39;merge_into_exist_keystore.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="BGEFECGG"></a><a id="SQLRF55986"></a><a href="#BGEBBFJG"><span class="xreftitleitalic"><span class="italic">key_management_clauses</span></span></a>::=</p>
<img width="182" height="251" src="img/key_management_clauses.gif" alt="Description of key_management_clauses.gif follows"/><br/>
<a id="sthref2519" href="img_text/key_management_clauses.htm">Description of the illustration &#39;&#39;key_management_clauses.gif&#39;&#39;</a><br/>
<br/>
<p>(<a href="#BGEHAIAI"><span class="xreftitleitalic"><span class="italic">set_key</span>::=</span></a>, <a href="#BGEGGEGI"><span class="xreftitleitalic"><span class="italic">create_key</span>::=</span></a>, <a href="#BGEJHBCJ"><span class="xreftitleitalic"><span class="italic">use_key</span>::=</span></a>, <a href="#BGEEBBAC"><span class="xreftitleitalic"><span class="italic">set_key_tag</span>::=</span></a>, <a href="#BGECAFFH"><span class="xreftitleitalic"><span class="italic">export_keys</span>::=</span></a>, <a href="#BGEJBIFJ"><span class="xreftitleitalic"><span class="italic">import_keys</span>::=</span></a>, <a href="#BGEBHGHA"><span class="xreftitleitalic"><span class="italic">migrate_key</span>::=</span></a>, <a href="#BGEEAGHG"><span class="xreftitleitalic"><span class="italic">reverse_migrate_key</span>::=</span></a>)</p>
<p class="subhead2"><a id="BGEHAIAI"></a><a id="SQLRF56252"></a><a href="#BGEBBEJB"><span class="xreftitleitalic"><span class="italic">set_key</span></span></a>::=</p>
<img width="775" height="145" src="img/set_key.gif" alt="Description of set_key.gif follows"/><br/>
<a id="sthref2520" href="img_text/set_key.htm">Description of the illustration &#39;&#39;set_key.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="BGEGGEGI"></a><a id="SQLRF55987"></a><a href="#BGEJHHFF"><span class="xreftitleitalic"><span class="italic">create_key</span></span></a>::=</p>
<img width="800" height="145" src="img/create_key.gif" alt="Description of create_key.gif follows"/><br/>
<a id="sthref2521" href="img_text/create_key.htm">Description of the illustration &#39;&#39;create_key.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="BGEJHBCJ"></a><a id="SQLRF55988"></a><a href="#BGEEIBAF"><span class="xreftitleitalic"><span class="italic">use_key</span></span></a>::=</p>
<img width="727" height="142" src="img/use_key.gif" alt="Description of use_key.gif follows"/><br/>
<a id="sthref2522" href="img_text/use_key.htm">Description of the illustration &#39;&#39;use_key.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="BGEEBBAC"></a><a id="SQLRF55989"></a><a href="#BGECHJAD"><span class="xreftitleitalic"><span class="italic">set_key_tag</span></span></a>::=</p>
<img width="636" height="114" src="img/set_key_tag.gif" alt="Description of set_key_tag.gif follows"/><br/>
<a id="sthref2523" href="img_text/set_key_tag.htm">Description of the illustration &#39;&#39;set_key_tag.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="BGECAFFH"></a><a id="SQLRF55991"></a><a href="#BGEEACDI"><span class="xreftitleitalic"><span class="italic">export_keys</span></span></a>::=</p>
<img width="680" height="187" src="img/export_keys.gif" alt="Description of export_keys.gif follows"/><br/>
<a id="sthref2524" href="img_text/export_keys.htm">Description of the illustration &#39;&#39;export_keys.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="BGEJBIFJ"></a><a id="SQLRF55990"></a><a href="#BGEFGECA"><span class="xreftitleitalic"><span class="italic">import_keys</span></span></a>::=</p>
<img width="727" height="142" src="img/import_keys.gif" alt="Description of import_keys.gif follows"/><br/>
<a id="sthref2525" href="img_text/import_keys.htm">Description of the illustration &#39;&#39;import_keys.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="BGEBHGHA"></a><a id="SQLRF56071"></a><a href="#BGEGIEIF"><span class="xreftitleitalic"><span class="italic">migrate_key</span></span></a>::=</p>
<img width="784" height="142" src="img/migrate_key.gif" alt="Description of migrate_key.gif follows"/><br/>
<a id="sthref2526" href="img_text/migrate_key.htm">Description of the illustration &#39;&#39;migrate_key.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="BGEEAGHG"></a><a id="SQLRF56253"></a><a href="#BGEGGIFJ"><span class="xreftitleitalic"><span class="italic">reverse_migrate_key</span></span></a>::=</p>
<img width="567" height="102" src="img/reverse_migrate_key.gif" alt="Description of reverse_migrate_key.gif follows"/><br/>
<a id="sthref2527" href="img_text/reverse_migrate_key.htm">Description of the illustration &#39;&#39;reverse_migrate_key.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="BGEEJDAI"></a><a id="SQLRF55992"></a><a href="#BGEGDDEA"><span class="xreftitleitalic"><span class="italic">secret_management_clauses</span></span></a>::=</p>
<img width="173" height="58" src="img/secret_management_clauses.gif" alt="Description of secret_management_clauses.gif follows"/><br/>
<a id="sthref2528" href="img_text/secret_management_clauses.htm">Description of the illustration &#39;&#39;secret_management_clauses.gif&#39;&#39;</a><br/>
<br/>
<p>(<a href="#BGEBDBJI"><span class="xreftitleitalic"><span class="italic">add_update_secret</span>::=</span></a>, <a href="#BGEEBIEH"><span class="xreftitleitalic"><span class="italic">delete_secret</span>::=</span></a>)</p>
<p class="subhead2"><a id="BGEBDBJI"></a><a id="SQLRF55993"></a><a href="#BGEJCFJI"><span class="xreftitleitalic"><span class="italic">add_update_secret</span></span></a>::=</p>
<img width="841" height="159" src="img/add_update_secret.gif" alt="Description of add_update_secret.gif follows"/><br/>
<a id="sthref2529" href="img_text/add_update_secret.htm">Description of the illustration &#39;&#39;add_update_secret.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead2"><a id="BGEEBIEH"></a><a id="SQLRF55994"></a><a href="#BGEBBBGI"><span class="xreftitleitalic"><span class="italic">delete_secret</span></span></a>::=</p>
<img width="727" height="123" src="img/delete_secret.gif" alt="Description of delete_secret.gif follows"/><br/>
<a id="sthref2530" href="img_text/delete_secret.htm">Description of the illustration &#39;&#39;delete_secret.gif&#39;&#39;</a><br/>
<br/></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref2531"></a>Semantics</p>
<p class="subhead1"><a id="BGEHJEIJ"></a><a id="SQLRF56254"></a><span class="italic">keystore_management_clauses</span></p>
<p>Use these clauses to perform the following keystore management operations:</p>
<ul>
<li>
<p>Create a software keystore</p>
</li>
<li>
<p>Open and close a software keystore or a hardware keystore</p>
</li>
<li>
<p>Back up a password-based software keystore</p>
</li>
<li>
<p>Change the password of a password-based software keystore</p>
</li>
<li>
<p>Merge two existing software keystores into a new password-based software keystore</p>
</li>
<li>
<p>Merge one existing software keystore into an existing password-based software keystore</p>
</li>
</ul>
<p class="subhead2"><a id="BGEGHDCE"></a><a id="SQLRF56255"></a><span class="italic">create_keystore</span></p>
<p>This clause lets you create the following types of software keystores: password-based software keystores and auto-login software keystores. To issue this clause in a multitenant environment, you must be connected to the root.</p>
<p><a id="SQLRF56256"></a><span class="subhead3">CREATE KEYSTORE&nbsp;</span>Specify this clause to create a password-based software keystore.</p>
<ul>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore_location</span></code>, specify the full path name of the software keystore directory. The keystore will be created in this directory in a file named <code dir="ltr">ewallet.p12</code>. Refer to <a class="olink ASOAG10276" href="../ASOAG/configuring-transparent-data-encryption.htm#ASOAG10276"><span class="italic">Oracle Database Advanced Security Guide</span></a> to learn how to determine the software keystore directory for your system.</p>
</li>
<li>
<p>Use <code dir="ltr"><span class="codeinlineitalic">keystore_password</span></code> to set the password for the keystore. Refer to <a href="#BGEEFBCD">&#34;Notes on Specifying Keystore Passwords&#34;</a> for more information.</p>
</li>
</ul>
<p><a id="SQLRF56257"></a><span class="subhead3">CREATE [ LOCAL ] AUTO_LOGIN KEYSTORE&nbsp;</span>Specify this clause to create an auto-login software keystore. An auto-login software keystore is created from an existing password-based software keystore. The auto-login keystore has a system-generated password. It is stored in a PKCS#12-based file named <code dir="ltr">cwallet.sso</code> in the same directory as the password-based software keystore.</p>
<ul>
<li>
<p>By default, Oracle creates an auto-login keystore, which can be opened from computers other than the computer on which the keystore resides. If you specify the <code dir="ltr">LOCAL</code> keyword, then Oracle Database creates a local auto-login keystore, which can be opened only from the computer on which the keystore resides.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore_location</span></code>, specify the full path name of the directory in which the existing password-based software keystore resides. The password-based software keystore can be open or closed.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore_password</span></code>, specify the password for the existing password-based software keystore.</p>
</li>
</ul>
<p><a id="SQLRF56258"></a><span class="subhead3">Restriction on Creating Keystores&nbsp;</span>You can create at most one password-based software keystore and one auto-login software keystore, either local or not, in any single directory.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG10282" href="../ASOAG/configuring-transparent-data-encryption.htm#ASOAG10282"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on creating software keystores</div>
<p class="subhead2"><a id="BGECCDCA"></a><a id="SQLRF56259"></a><span class="italic">open_keystore</span></p>
<p>This clause lets you open a password-based software keystore or a hardware keystore.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You do not need to use this clause to open auto-login and local auto-login software keystores because they are opened automatically when they are required&mdash;that is, when the master encryption key is accessed.</div>
<ul>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore_password</span></code>, specify the password for the keystore.</p>
</li>
<li>
<p>The <code dir="ltr">CONTAINER</code> clause applies when you are connected to a CDB.</p>
<p>If the current container is a pluggable database (PDB), then specify <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">CURRENT</code> to open the keystore in the PDB. The keystore must be open in the root before you open it in the PDB.</p>
<p>If the current container is the root, then specify <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">CURRENT</code> to open the keystore in the root, or specify <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">ALL</code> to open the keystore in the root and in all PDBs.</p>
<p>If you omit this clause, then <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">CURRENT</code> is the default.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Database Advanced Security Guide</span> for more information on opening <a class="olink ASOAG10285" href="../ASOAG/configuring-transparent-data-encryption.htm#ASOAG10285">password-based software keystores</a> and <a class="olink ASOAG10296" href="../ASOAG/configuring-transparent-data-encryption.htm#ASOAG10296">hardware keystores</a></div>
<p class="subhead2"><a id="BGEDFGGA"></a><a id="SQLRF56260"></a><span class="italic">close_keystore</span></p>
<p>This clause lets you close a password-based software keystore, an auto-login software keystore, or a hardware keystore. Closing a keystore disables all encryption and decryption operations. Any attempt to encrypt or decrypt data or access encrypted data results in an error.</p>
<ul>
<li>
<p>To close a password-based software keystore or a hardware keystore, specify the <code dir="ltr"><span class="codeinlineitalic">keystore_password</span></code>.</p>
</li>
<li>
<p>To close an auto-login keystore, do not specify <code dir="ltr"><span class="codeinlineitalic">keystore_password</span></code>. Before you close an auto-login keystore, check the <code dir="ltr">WALLET_TYPE</code> column of the <code dir="ltr">V$ENCRYPTION_WALLET</code> view. If it returns <code dir="ltr">AUTOLOGIN</code>, then you can close the keystore. Otherwise, if you attempt to close the keystore, then an error occurs.</p>
</li>
<li>
<p>The <code dir="ltr">CONTAINER</code> clause applies when you are connected to a CDB.</p>
<p>If the current container is a PDB, then specify <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">CURRENT</code> to close the keystore in the PDB.</p>
<p>If the current container is the root, then the <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">CURRENT</code> and <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">ALL</code> clauses have the same effect; both clauses close the keystore in the root and in all PDBs.</p>
<p>If you omit this clause, then <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">CURRENT</code> is the default.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG10321" href="../ASOAG/managing-keystore-and-tde-master-encryption-key.htm#ASOAG10321"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on closing keystores</div>
<p class="subhead2"><a id="BGEIADJI"></a><a id="SQLRF56261"></a><span class="italic">backup_keystore</span></p>
<p>This clause lets you back up a password-based software keystore. The keystore must be open.</p>
<ul>
<li>
<p>By default, Oracle Database creates a backup file with a name of the form <code dir="ltr">ewallet_</code><code dir="ltr"><span class="codeinlineitalic">timestamp</span></code><code dir="ltr">.p12</code>, where <code dir="ltr"><span class="codeinlineitalic">timestamp</span></code> is the file creation timestamp in UTC format. The optional <code dir="ltr">USING</code> <code dir="ltr">&#39;</code><code dir="ltr"><span class="codeinlineitalic">backup_identifier</span></code><code dir="ltr">&#39;</code> clause lets you specify a backup identifier which is added to the backup file name. For example, if you specify a backup identifier of <code dir="ltr">&#39;Backup1&#39;</code>, then Oracle Database creates a backup file with a name of the form <code dir="ltr">ewallet_</code><code dir="ltr"><span class="codeinlineitalic">timestamp</span></code><code dir="ltr">_Backup1.p12</code>.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore_password</span></code>, specify the password for the keystore.</p>
</li>
<li>
<p>The optional <code dir="ltr">TO</code> &#39;<code dir="ltr"><span class="codeinlineitalic">keystore_location</span></code>&#39; clause lets you specify the directory in which the backup file is created. If you omit this clause, then the backup is created in the same directory as the keystore that you are backing up.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG10313" href="../ASOAG/managing-keystore-and-tde-master-encryption-key.htm#ASOAG10313"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on backing up password-based software keystores</div>
<p class="subhead2"><a id="BGEJEGIB"></a><a id="SQLRF56262"></a><span class="italic">alter_keystore_password</span></p>
<p>This clause lets you change the password for a password-based software keystore. The keystore must be open.</p>
<ul>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">old_keystore_password</span></code>, specify the old password for the keystore.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">new_keystore_password</span></code>, specify the new password for the keystore.</p>
</li>
<li>
<p>The optional <code dir="ltr">WITH</code> <code dir="ltr">BACKUP</code> clause instructs the database to create a backup of the keystore before changing the password. Refer to <a href="#BGEIBFFB">&#34;Notes on the WITH BACKUP Clause&#34;</a> for more information.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG10312" href="../ASOAG/managing-keystore-and-tde-master-encryption-key.htm#ASOAG10312"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on changing a password-based software keystore password</div>
<p class="subhead2"><a id="BGEECFJH"></a><a id="SQLRF56267"></a><span class="italic">merge_into_new_keystore</span></p>
<p>This clause lets you merge two software keystores into a new keystore. The keys and attributes in the two constituent keystores are added to the new keystore. The constituent keystores can be password-based or auto-login (including local auto-login) software keystores; they can be open or closed. The new keystore is a password-based software keystore. It is in a closed state when the merge completes. Any or none of the keystores specified in this clause can be the keystore configured for use by the database.</p>
<ul>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore1_location</span></code>, specify the full path name of the directory in which the first keystore resides.</p>
</li>
<li>
<p>Specify <code dir="ltr">IDENTIFIED</code> <code dir="ltr">BY</code> <code dir="ltr"><span class="codeinlineitalic">keystore1_password</span></code> only if the first keystore is a password-based software keystore.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore2_location</span></code>, specify the full path name of the directory in which the second keystore resides.</p>
</li>
<li>
<p>Specify <code dir="ltr">IDENTIFIED</code> <code dir="ltr">BY</code> <code dir="ltr"><span class="codeinlineitalic">keystore2_password</span></code> only if the second keystore is a password-based software keystore.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore3_location</span></code>, specify the full path name of the directory in which the new keystore is created.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore3_password</span></code>, specify the password for the new keystore. Refer to <a href="#BGEEFBCD">&#34;Notes on Specifying Keystore Passwords&#34;</a> for more information.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG10314" href="../ASOAG/managing-keystore-and-tde-master-encryption-key.htm#ASOAG10314"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on merging software keystores</div>
<p class="subhead2"><a id="BGEGFHBD"></a><a id="SQLRF56268"></a><span class="italic">merge_into_exist_keystore</span></p>
<p>This clause lets you merge a software keystore into another existing software keystore. The keys and attributes in the keystore from which you merge are added to the keystore into which you merge. The keystore from which you merge can be a password-based or auto-login (including local auto-login) software keystore; it can be open or closed. The keystore into which you merge must be a password-based software keystore. It can be open or closed when the merge begins. However, it will be in a closed state when the merge completes. Either or neither of the keystores specified in this clause can be the keystore configured for use by the database.</p>
<ul>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore1_location</span></code>, specify the full path name of the directory in which the keystore from which you merge resides.</p>
</li>
<li>
<p>Specify <code dir="ltr">IDENTIFIED</code> <code dir="ltr">BY</code> <code dir="ltr"><span class="codeinlineitalic">keystore1_password</span></code> only if the keystore from which you merge is a password-based software keystore.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore2_location</span></code>, specify the full path name of the directory in which the keystore into which you merge resides.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore2_password</span></code>, specify the password for the keystore into which you merge.</p>
</li>
<li>
<p>The optional <code dir="ltr">WITH</code> <code dir="ltr">BACKUP</code> clause instructs the database to create a backup of the keystore into which you merge before performing the merge. Refer to <a href="#BGEIBFFB">&#34;Notes on the WITH BACKUP Clause&#34;</a> for more information.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG10314" href="../ASOAG/managing-keystore-and-tde-master-encryption-key.htm#ASOAG10314"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on merging software keystores</div>
<p class="subhead1"><a id="BGEBBFJG"></a><a id="SQLRF56269"></a><span class="italic">key_management_clauses</span></p>
<p>Use these clauses to perform the following key management operations:</p>
<ul>
<li>
<p>Create and activate a master encryption key</p>
</li>
<li>
<p>Set the tag for an encryption key</p>
</li>
<li>
<p>Export encryption keys from a keystore into a file</p>
</li>
<li>
<p>Import encryption keys from a file into a keystore</p>
</li>
<li>
<p>Migrate from a password-based software keystore to a hardware keystore</p>
</li>
<li>
<p>Migrate from a hardware keystore to a password-based software keystore</p>
</li>
</ul>
<p class="subhead2"><a id="BGEBBEJB"></a><a id="SQLRF56272"></a><span class="italic">set_key</span></p>
<p>This clause creates a new master encryption key and activates it. You can use this clause to create the first master encryption key in a keystore or to rotate (change) the master encryption key. If a master encryption key is active when you use this clause, then it is deactivated before the new master encryption key is activated. The keystore that contains the key can be a password-based software keystore or a hardware keystore. The keystore must be open.</p>
<ul>
<li>
<p>The <code dir="ltr">ENCRYPTION</code> keyword is optional and is provided for semantic clarity.</p>
</li>
<li>
<p>Specify the optional <code dir="ltr">USING</code> <code dir="ltr">TAG</code> clause to associate a tag to the new master encryption key. Refer to <a href="#BGEJGHAE">&#34;Notes on the USING TAG Clause&#34;</a> for more information.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore_password</span></code>, specify the password for the keystore.</p>
</li>
<li>
<p>Specify the <code dir="ltr">WITH</code> <code dir="ltr">BACKUP</code> clause, and optionally the <code dir="ltr">USING</code> <code dir="ltr">&#39;</code><code dir="ltr"><span class="codeinlineitalic">backup_identifier</span></code><code dir="ltr">&#39;</code> clause, to create a backup of the keystore before the new master encryption key is created. Refer to <a href="#BGEIBFFB">&#34;Notes on the WITH BACKUP Clause&#34;</a> for more information.</p>
</li>
<li>
<p>The <code dir="ltr">CONTAINER</code> clause applies when you are connected to a CDB.</p>
<p>If the current container is a PDB, then specify <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">CURRENT</code> to create and activate a new master encryption key in the PDB. A master encryption key must exist in the root before you create a master encryption key in the PDB.</p>
<p>If the current container is the root, then specify <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">CURRENT</code> to create and activate a new master encryption key in the root, or specify <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">ALL</code> to create and activate new master encryption keys in the root and in all PDBs.</p>
<p>If you omit this clause, then <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">CURRENT</code> is the default.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG9527" href="../ASOAG/managing-keystore-and-tde-master-encryption-key.htm#ASOAG9527"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on creating and activating a master encryption key</div>
<p class="subhead2"><a id="BGEJHHFF"></a><a id="SQLRF56270"></a><span class="italic">create_key</span></p>
<p>This clause lets you create a master encryption key for later use. You can subsequently activate the key by using the <a href="#BGEEIBAF"><span class="xreftitleitalic"><span class="italic">use_key</span></span></a> clause. The keystore that contains the key can be a password-based software keystore or a hardware keystore. The keystore must be open.</p>
<ul>
<li>
<p>The <code dir="ltr">ENCRYPTION</code> keyword is optional and is provided for semantic clarity.</p>
</li>
<li>
<p>Specify the optional <code dir="ltr">USING</code> <code dir="ltr">TAG</code> clause to associate a tag to the encryption key. Refer to <a href="#BGEJGHAE">&#34;Notes on the USING TAG Clause&#34;</a> for more information.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore_password</span></code>, specify the password for the keystore in which the key will be created.</p>
</li>
<li>
<p>Specify the <code dir="ltr">WITH</code> <code dir="ltr">BACKUP</code> clause, and optionally the <code dir="ltr">USING</code> <code dir="ltr">&#39;</code><code dir="ltr"><span class="codeinlineitalic">backup_identifier</span></code><code dir="ltr">&#39;</code> clause, to create a backup of the keystore before the key is created. Refer to <a href="#BGEIBFFB">&#34;Notes on the WITH BACKUP Clause&#34;</a> for more information.</p>
</li>
<li>
<p>The <code dir="ltr">CONTAINER</code> clause applies when you are connected to a CDB.</p>
<p>If the current container is a PDB, then specify <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">CURRENT</code> to create a master encryption key in the PDB. A master encryption key must exist in the root before you create a master encryption key in the PDB</p>
<p>If the current container is the root, then specify <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">CURRENT</code> to create a master encryption key in the root, or specify <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">ALL</code> to create master encryption keys in the root and in all PDBs.</p>
<p>If you omit this clause, then <code dir="ltr">CONTAINER</code> <code dir="ltr">=</code> <code dir="ltr">CURRENT</code> is the default.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG10414" href="../ASOAG/managing-keystore-and-tde-master-encryption-key.htm#ASOAG10414"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on creating a master encryption key for later use</div>
<p class="subhead2"><a id="BGEEIBAF"></a><a id="SQLRF56271"></a><span class="italic">use_key</span></p>
<p>This clause lets you activate a master encryption key that has already been created. If a master encryption key is active when you use this clause, then it is deactivated before the new master encryption key is activated. The keystore that contains the key can be a password-based software keystore or a hardware keystore. The keystore must be open</p>
<ul>
<li>
<p>The <code dir="ltr">ENCRYPTION</code> keyword is optional and is provided for semantic clarity.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">key_id</span></code>, specify the identifier of the key that you want to activate. You can find the key identifier by querying the <code dir="ltr">KEY_ID</code> column of the <code dir="ltr">V$ENCRYPTION_KEYS</code> view.</p>
</li>
<li>
<p>Specify the optional <code dir="ltr">USING</code> <code dir="ltr">TAG</code> clause to associate a tag to the encryption key. Refer to <a href="#BGEJGHAE">&#34;Notes on the USING TAG Clause&#34;</a> for more information.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore_password</span></code>, specify the password for the keystore that contains the key.</p>
</li>
<li>
<p>Specify the <code dir="ltr">WITH</code> <code dir="ltr">BACKUP</code> clause, and optionally the <code dir="ltr">USING</code> <code dir="ltr">&#39;</code><code dir="ltr"><span class="codeinlineitalic">backup_identifier</span></code><code dir="ltr">&#39;</code> clause, to create a backup of the keystore before the key is activated. Refer to <a href="#BGEIBFFB">&#34;Notes on the WITH BACKUP Clause&#34;</a> for more information.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG10419" href="../ASOAG/managing-keystore-and-tde-master-encryption-key.htm#ASOAG10419"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on activating a master encryption key</div>
<p class="subhead2"><a id="BGECHJAD"></a><a id="SQLRF56273"></a><span class="italic">set_key_tag</span></p>
<p>This clause lets you set the tag for the specified encryption key. The tag is an optional, user-defined descriptor for the key. If the key has no tag, then use this clause to create a tag. If the key already has a tag, then use this clause to replace the tag. You can view encryption key tags by querying the <code dir="ltr">TAG</code> column of the <code dir="ltr">V$ENCRYPTION_KEYS</code> view.</p>
<ul>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">tag</span></code>, specify an alphanumeric string. Enclose <code dir="ltr"><span class="codeinlineitalic">tag</span></code> in single quotation marks.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">key_id</span></code>, specify the identifier of the encryption key. You can find the key identifier by querying the <code dir="ltr">KEY_ID</code> column of the <code dir="ltr">V$ENCRYPTION_KEYS</code> view.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore_password</span></code>, specify the password for the keystore that contains the key.</p>
</li>
<li>
<p>Specify the <code dir="ltr">WITH</code> <code dir="ltr">BACKUP</code> clause, and optionally the <code dir="ltr">USING</code> <code dir="ltr">&#39;</code><code dir="ltr"><span class="codeinlineitalic">backup_identifier</span></code><code dir="ltr">&#39;</code> clause, to create a backup of the keystore before you set the key tag. Refer to <a href="#BGEIBFFB">&#34;Notes on the WITH BACKUP Clause&#34;</a> for more information.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG10335" href="../ASOAG/managing-keystore-and-tde-master-encryption-key.htm#ASOAG10335"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on setting a key tag</div>
<p class="subhead2"><a id="BGEEACDI"></a><a id="SQLRF56275"></a><span class="italic">export_keys</span></p>
<p>Use this clause to export one or more encryption keys from a password-based software keystore into a file. The keystore must be open. Each encryption key is exported together with its key identifier and key attributes. The exported keys are protected in the file with a password (secret). You can subsequently import one or more of the keys into a password-based software keystore by using the <a href="#BGEFGECA"><span class="xreftitleitalic"><span class="italic">import_keys</span></span></a> clause.</p>
<ul>
<li>
<p>The <code dir="ltr">ENCRYPTION</code> keyword is optional and is provided for semantic clarity.</p>
</li>
<li>
<p>Specify <code dir="ltr"><span class="codeinlineitalic">secret</span></code> to set the password (secret) that protects the keys in the file. The secret is an alphanumeric string. You can optionally enclose the secret in double quotation marks. Quoted and nonquoted secrets are case sensitive.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">filename</span></code>, specify the full path name of the file to which the keys are to be exported. Enclose <code dir="ltr"><span class="codeinlineitalic">filename</span></code> in single quotation marks.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore_password</span></code>, specify the password for the keystore that contains the keys you want to export.</p>
</li>
<li>
<p>Use the <code dir="ltr">WITH</code> <code dir="ltr">IDENTIFIER</code> <code dir="ltr">IN</code> clause to specify one or more encryption keys that you would like to export using one of the following methods:</p>
<ul>
<li>
<p>Use <code dir="ltr"><span class="codeinlineitalic">key_id</span></code> to specify the identifier of the encryption key you would like to export. You can specify more than one <code dir="ltr"><span class="codeinlineitalic">key_id</span></code> in a comma-separated list. You can find key identifiers by querying the <code dir="ltr">KEY_ID</code> column of the <code dir="ltr">V$ENCRYPTION_KEYS</code> view.</p>
</li>
<li>
<p>Use <code dir="ltr"><span class="codeinlineitalic">subquery</span></code> to specify a query that returns a list of key identifiers for the encryption keys you would like to export. For example, the following <code dir="ltr"><span class="codeinlineitalic">subquery</span></code> returns the key identifiers for all encryption keys in the database whose tags begin with the string <code dir="ltr">mytag</code>:</p>
<pre dir="ltr">SELECT KEY_ID FROM V$ENCRYPTION_KEYS WHERE TAG LIKE &#39;mytag%&#39;
</pre>
<p>Be aware that Oracle Database executes <code dir="ltr"><span class="codeinlineitalic">subquery</span></code> within the current user&#39;s rights and not with definer&#39;s rights.</p>
</li>
<li>
<p>If you omit the <code dir="ltr">WITH</code> <code dir="ltr">IDENTIFIER</code> <code dir="ltr">IN</code> clause, then all encryption keys in the database are exported.</p>
</li>
</ul>
</li>
</ul>
<p><a id="SQLRF56625"></a><span class="subhead3">Restriction on the WITH IDENTIFIER IN Clause&nbsp;</span>In a multitenant environment, you cannot specify <code dir="ltr">WITH</code> <code dir="ltr">IDENTIFIER</code> <code dir="ltr">IN</code> when exporting keys from a PDB. This ensures that all of the keys in the PDB are exported, along with metadata about the active encryption key. If you subsequently clone the PDB, or unplug and plug in the PDB, then you can use the export file to import the keys into the cloned or newly plugged-in PDB and preserve information about the active encryption key.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG10424" href="../ASOAG/managing-keystore-and-tde-master-encryption-key.htm#ASOAG10424"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on exporting encryption keys</div>
<p class="subhead2"><a id="BGEFGECA"></a><a id="SQLRF56274"></a><span class="italic">import_keys</span></p>
<p>Use this clause to import one or more encryption keys from a file into a password-based software keystore. The keystore must be open. Each encryption key is imported together with its key identifier and key attributes. The keys must have been previously exported to the file by using the <a href="#BGEEACDI"><span class="xreftitleitalic"><span class="italic">export_keys</span></span></a> clause. You cannot re-import keys that have already been imported into the keystore.</p>
<ul>
<li>
<p>The <code dir="ltr">ENCRYPTION</code> keyword is optional and is provided for semantic clarity.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">secret</span></code>, specify the password (secret) that protects the keys in the file. The secret is an alphanumeric string. You can optionally enclose the secret in double quotation marks. Quoted and nonquoted secrets are case sensitive.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">filename</span></code>, specify the full path name of the file from which the keys are to be imported. Enclose <code dir="ltr"><span class="codeinlineitalic">filename</span></code> in single quotation marks.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore_password</span></code>, specify the password for the keystore into which you want to import the keys.</p>
</li>
<li>
<p>Specify the <code dir="ltr">WITH</code> <code dir="ltr">BACKUP</code> clause, and optionally the <code dir="ltr">USING</code> <code dir="ltr">&#39;</code><code dir="ltr"><span class="codeinlineitalic">backup_identifier</span></code><code dir="ltr">&#39;</code> clause, to create a backup of the keystore before the keys are imported. Refer to <a href="#BGEIBFFB">&#34;Notes on the WITH BACKUP Clause&#34;</a> for more information.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG10427" href="../ASOAG/managing-keystore-and-tde-master-encryption-key.htm#ASOAG10427"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on importing encryption keys</div>
<p class="subhead2"><a id="BGEGIEIF"></a><a id="SQLRF56276"></a><span class="italic">migrate_key</span></p>
<p>Use this clause to migrate from a password-based software keystore to a hardware keystore. This clause decrypts existing table encryption keys and tablespace encryption keys with the master encryption key in the software keystore and then re-encrypts them with the newly created master encryption key in the hardware keystore.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The use of this clause is only one step in a series of steps for migrating from a password-based software keystore to a hardware keystore. Refer to <a class="olink ASOAG10377" href="../ASOAG/managing-keystore-and-tde-master-encryption-key.htm#ASOAG10377"><span class="italic">Oracle Database Advanced Security Guide</span></a> for the complete set of steps before you use this clause.</div>
<ul>
<li>
<p>The <code dir="ltr">ENCRYPTION</code> keyword is optional and is provided for semantic clarity.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">HSM_auth_string</span></code>, specify the hardware keystore password. Refer to <a href="#BGEEFBCD">&#34;Notes on Specifying Keystore Passwords&#34;</a> for more information.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">software_keystore_password</span></code>., specify the password-based software keystore password. Refer to <a href="#BGEEFBCD">&#34;Notes on Specifying Keystore Passwords&#34;</a> for more information.</p>
</li>
<li>
<p>Specify the <code dir="ltr">WITH</code> <code dir="ltr">BACKUP</code> clause, and optionally the <code dir="ltr">USING</code> <code dir="ltr">&#39;</code><code dir="ltr"><span class="codeinlineitalic">backup_identifier</span></code><code dir="ltr">&#39;</code> clause, to create a backup of the keystore before the migration occurs. Refer to <a href="#BGEIBFFB">&#34;Notes on the WITH BACKUP Clause&#34;</a> for more information.</p>
</li>
</ul>
<p class="subhead2"><a id="BGEGGIFJ"></a><a id="SQLRF56277"></a><span class="italic">reverse_migrate_key</span></p>
<p>Use this clause to migrate from a hardware keystore to a password-based software keystore. This clause decrypts existing table encryption keys and tablespace encryption keys with the master encryption key in the hardware keystore and then re-encrypts them with the newly created master encryption key in the password-based software keystore.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The use of this clause is only one step in a series of steps for migrating from a hardware keystore to a password-based software keystore. Refer to <a class="olink ASOAG10327" href="../ASOAG/managing-keystore-and-tde-master-encryption-key.htm#ASOAG10327"><span class="italic">Oracle Database Advanced Security Guide</span></a> for the complete set of steps before you use this clause.</div>
<ul>
<li>
<p>The <code dir="ltr">ENCRYPTION</code> keyword is optional and is provided for semantic clarity.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">software_keystore_password</span></code>., specify the password-based software keystore password. Refer to <a href="#BGEEFBCD">&#34;Notes on Specifying Keystore Passwords&#34;</a> for more information.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">HSM_auth_string</span></code>, specify the hardware keystore password. Refer to <a href="#BGEEFBCD">&#34;Notes on Specifying Keystore Passwords&#34;</a> for more information.</p>
</li>
</ul>
<p class="subhead1"><a id="BGEGDDEA"></a><a id="SQLRF56278"></a><span class="italic">secret_management_clauses</span></p>
<p>Use these clauses to add, update, and delete secrets in a password-based software keystores or a hardware keystore.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG10398" href="../ASOAG/managing-keystore-and-tde-master-encryption-key.htm#ASOAG10398"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information on adding, updating, and deleting secrets</div>
<p class="subhead2"><a id="BGEJCFJI"></a><a id="SQLRF56279"></a><span class="italic">add_update_secret</span></p>
<p>This clause lets you add or update a secret.</p>
<ul>
<li>
<p>Specify <code dir="ltr">ADD</code> to add a secret to a keystore.</p>
</li>
<li>
<p>Specify <code dir="ltr">UPDATE</code> to update an existing secret in a keystore.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">secret</span></code>, specify the secret to be added or updated. The secret is an alphanumeric string. Enclose the secret in single quotation marks.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">client_identifier</span></code>, specify an alphanumeric string used to identify the secret. Enclose <code dir="ltr"><span class="codeinlineitalic">client_identifier</span></code> in single quotation marks.</p>
</li>
<li>
<p>Specify the optional <code dir="ltr">USING</code> <code dir="ltr">TAG</code> clause to associate a tag to <code dir="ltr"><span class="codeinlineitalic">secret</span></code>. The <code dir="ltr"><span class="codeinlineitalic">tag</span></code> is an optional, user-defined descriptor for the secret. Enclose the tag in single quotation marks. You can view secret tags by querying the <code dir="ltr">SECRET_TAG</code> column of the <code dir="ltr">V$CLIENT_SECRETS</code> view.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore_password</span></code>, specify the password for the keystore.</p>
</li>
<li>
<p>Specify the <code dir="ltr">WITH</code> <code dir="ltr">BACKUP</code> clause, and optionally the <code dir="ltr">USING</code> <code dir="ltr">&#39;</code><code dir="ltr"><span class="codeinlineitalic">backup_identifier</span></code><code dir="ltr">&#39;</code> clause, to create a backup of the keystore before adding or updating the secret in a password-based software keystore. Refer to <a href="#BGEIBFFB">&#34;Notes on the WITH BACKUP Clause&#34;</a> for more information.</p>
</li>
</ul>
<p class="subhead2"><a id="BGEBBBGI"></a><a id="SQLRF56280"></a><span class="italic">delete_secret</span></p>
<p>This clause lets you delete a secret.</p>
<ul>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">client_identifier</span></code>, specify an alphanumeric string used to identify the secret. Enclose <code dir="ltr"><span class="codeinlineitalic">client_identifier</span></code> in single quotation marks. You can view client identifiers by querying the <code dir="ltr">CLIENT</code> column of the <code dir="ltr">V$CLIENT_SECRETS</code> view.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">keystore_password</span></code>, specify the password for the keystore.</p>
</li>
<li>
<p>Specify the <code dir="ltr">WITH</code> <code dir="ltr">BACKUP</code> clause, and optionally the <code dir="ltr">USING</code> <code dir="ltr">&#39;</code><code dir="ltr"><span class="codeinlineitalic">backup_identifier</span></code><code dir="ltr">&#39;</code> clause, to create a backup of the keystore before deleting the secret from a password-based software keystore. Refer to <a href="#BGEIBFFB">&#34;Notes on the WITH BACKUP Clause&#34;</a> for more information.</p>
</li>
</ul>
<p><a id="BGEEFBCD"></a><a id="SQLRF56522"></a><span class="subhead3">Notes on Specifying Keystore Passwords&nbsp;</span>Specify keystore passwords as follows:</p>
<ul>
<li>
<p>For a password-based software keystore, specify the password as a character string. You can optionally enclose the password in double quotation marks. Quoted and nonquoted passwords are case sensitive. Keystore passwords adhere to the same rules as database user passwords. Refer to the <a href="statements_8003.htm#BABHHFHD">BY <span class="italic">password</span></a> clause of <code dir="ltr">CREATE</code> <code dir="ltr">USER</code> for the complete details.</p>
</li>
<li>
<p>For a hardware keystore, specify the password as a string of the form <code dir="ltr">&#34;</code><code dir="ltr"><span class="codeinlineitalic">user_id</span></code><code dir="ltr">:</code><code dir="ltr"><span class="codeinlineitalic">password</span></code><code dir="ltr">&#34;</code> where:</p>
<ul>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">user_id</span></code> is the user ID created for the database using the HSM management interface</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">password</span></code> is the password created for the user ID using the HSM management interface</p>
</li>
</ul>
<p>Enclose the <code dir="ltr"><span class="codeinlineitalic">user_id</span></code><code dir="ltr">:</code><code dir="ltr"><span class="codeinlineitalic">password</span></code> string in double quotation marks (<code dir="ltr">&#34;</code> <code dir="ltr">&#34;</code>) and separate <code dir="ltr"><span class="codeinlineitalic">user_id</span></code> and <code dir="ltr"><span class="codeinlineitalic">password</span></code> with a colon (<code dir="ltr">:</code>).</p>
</li>
</ul>
<p><a id="BGEIBFFB"></a><a id="SQLRF56340"></a><span class="subhead3">Notes on the WITH BACKUP Clause&nbsp;</span>Many <code dir="ltr">ADMINISTER</code> <code dir="ltr">KEY</code> <code dir="ltr">MANAGEMENT</code> operations include the <code dir="ltr">WITH</code> <code dir="ltr">BACKUP</code> clause. This clause applies only to password-based software keystores. It indicates that the keystore must be backed up before the operation is performed. Therefore, you must either specify the <code dir="ltr">WITH</code> <code dir="ltr">BACKUP</code> clause when performing the operation, or issue the <code dir="ltr">ADMINISTER</code> <code dir="ltr">KEY</code> <code dir="ltr">MANAGEMENT</code> <code dir="ltr"><span class="codeinlineitalic">backup_clause</span></code> statement immediately <span class="italic">before</span> performing the operation.</p>
<p>When you specify the <code dir="ltr">WITH</code> <code dir="ltr">BACKUP</code> clause, Oracle Database creates a backup file with a name of the form <code dir="ltr">ewallet_</code><code dir="ltr"><span class="codeinlineitalic">timestamp</span></code><code dir="ltr">.p12</code>, where <code dir="ltr"><span class="codeinlineitalic">timestamp</span></code> is the file creation timestamp in UTC format. The backup file is created in the same directory as the keystore you are backing up.</p>
<p>The optional <code dir="ltr">USING</code> <code dir="ltr">&#39;</code><code dir="ltr"><span class="codeinlineitalic">backup_identifier</span></code><code dir="ltr">&#39;</code> clause lets you specify a backup identifier, which is added to the backup file name. For example, if you specify a backup identifier of <code dir="ltr">&#39;Backup1&#39;</code>, then Oracle Database creates a backup file with a name of the form <code dir="ltr">ewallet_</code><code dir="ltr"><span class="codeinlineitalic">timestamp</span></code><code dir="ltr">_Backup1.p12</code>.</p>
<p><a id="BGEJGHAE"></a><a id="SQLRF56341"></a><span class="subhead3">Notes on the USING TAG Clause&nbsp;</span>Many <code dir="ltr">ADMINISTER</code> <code dir="ltr">KEY</code> <code dir="ltr">MANAGEMENT</code> operations include the <code dir="ltr">USING</code> <code dir="ltr">TAG</code> clause, which lets you associate a tag to an encryption key. The <code dir="ltr"><span class="codeinlineitalic">tag</span></code> is an optional, user-defined descriptor for the key. It is a character string enclosed in single quotation marks.</p>
<p>You can view encryption key tags by querying the <code dir="ltr">TAG</code> column of the <code dir="ltr">V$ENCRYPTION_KEYS</code> view.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref2532"></a>Examples</p>
<p><a id="SQLRF56493"></a><span class="subhead3">Creating a Keystore: Examples&nbsp;</span>The following statement creates a password-based software keystore in directory <code dir="ltr">/etc/ORACLE/WALLETS/orcl</code>:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  CREATE KEYSTORE &#39;/etc/ORACLE/WALLETS/orcl&#39;
  IDENTIFIED BY <span class="italic">password</span>;
</pre>
<p>The following statement creates an auto-login software keystore from the keystore created in the previous statement:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  CREATE AUTO_LOGIN KEYSTORE FROM KEYSTORE &#39;/etc/ORACLE/WALLETS/orcl&#39;
  IDENTIFIED BY <span class="italic">password</span>;
</pre>
<p><a id="SQLRF56494"></a><span class="subhead3">Opening a Keystore: Examples&nbsp;</span>The following statement opens a password-based software keystore:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  SET KEYSTORE OPEN
  IDENTIFIED BY <span class="italic">password</span>;
</pre>
<p>If you are connected to a CDB, then the following statement opens a password-based software keystore in the current container:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  SET KEYSTORE OPEN
  IDENTIFIED BY <span class="italic">password</span>
  CONTAINER = CURRENT;
</pre>
<p>The following statement opens a hardware keystore:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  SET KEYSTORE OPEN
  IDENTIFIED BY &#34;<span class="italic">user_id</span>:<span class="italic">password</span>&#34;;
</pre>
<p><a id="SQLRF56495"></a><span class="subhead3">Closing a Keystore: Examples&nbsp;</span>The following statement closes a password-based software keystore:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  SET KEYSTORE CLOSE
  IDENTIFIED BY <span class="italic">password</span>;
</pre>
<p>The following statement closes an auto-login software keystore:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  SET KEYSTORE CLOSE;
</pre>
<p>The following statement closes a hardware keystore:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  SET KEYSTORE CLOSE
  IDENTIFIED BY &#34;<span class="italic">user_id</span>:<span class="italic">password</span>&#34;;
</pre>
<p><a id="SQLRF56496"></a><span class="subhead3">Backing Up a Keystore: Example&nbsp;</span>The following statement creates a backup of a password-based software keystore. The backup is stored in directory <code dir="ltr">/etc/ORACLE/KEYSTORE/DB1</code> and the backup file name contains the tag <code dir="ltr">hr.emp_keystore</code>.</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  BACKUP KEYSTORE USING &#39;hr.emp_keystore&#39;
  IDENTIFIED BY <span class="italic">password</span>
  TO &#39;/etc/ORACLE/KEYSTORE/DB1/&#39;;
</pre>
<p><a id="SQLRF56497"></a><span class="subhead3">Changing a Keystore Password: Example&nbsp;</span>The following statement changes the password for a password-based software keystore. It also creates a backup of the keystore, with the tag <code dir="ltr">pwd_change</code>, before changing the password.</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  ALTER KEYSTORE PASSWORD IDENTIFIED BY <span class="italic">old_password</span>
  SET <span class="italic">new_password</span> WITH BACKUP USING &#39;pwd_change&#39;;
</pre>
<p><a id="SQLRF56498"></a><span class="subhead3">Merging Two Keystores Into a New Keystore: Example&nbsp;</span>The following statement merges an auto-login software keystore with a password-based software keystore to create a new password-based software keystore at a new location:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  MERGE KEYSTORE &#39;/etc/ORACLE/KEYSTORE/DB1&#39;
  AND KEYSTORE &#39;/etc/ORACLE/KEYSTORE/DB2&#39;
    IDENTIFIED BY <span class="italic">existing_keystore_password</span>
  INTO NEW KEYSTORE &#39;/etc/ORACLE/KEYSTORE/DB3&#39;
    IDENTIFIED BY <span class="italic">new_keystore_password</span>;
</pre>
<p><a id="SQLRF56499"></a><span class="subhead3">Merging a Keystore Into an Existing Keystore: Example&nbsp;</span>The following statement merges an auto-login software keystore into a password-based software keystore. It also creates a backup of the password-based software keystore before performing the merge.</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  MERGE KEYSTORE &#39;/etc/ORACLE/KEYSTORE/DB1&#39;
  INTO EXISTING KEYSTORE &#39;/etc/ORACLE/KEYSTORE/DB2&#39;
    IDENTIFIED BY <span class="italic">existing_keystore_password</span>
  WITH BACKUP;
</pre>
<p><a id="SQLRF56500"></a><span class="subhead3">Creating and Activating a Master Encryption Key: Examples&nbsp;</span>The following statement creates and activates a master encryption key in a password-based software keystore. It also creates a backup of the keystore before creating the new master encryption key.</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  SET KEY IDENTIFIED BY <span class="italic">password</span>
  WITH BACKUP;
</pre>
<p>The following statement creates a master encryption key in a password-based software keystore, but does not activate the key. It also creates a backup of the keystore before creating the new master encryption key.</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  CREATE KEY USING TAG &#39;mykey1&#39;
  IDENTIFIED BY <span class="italic">password</span>
  WITH BACKUP;
</pre>
<p>The following query displays the key identifier for the master encryption key that was created in the previous statement:</p>
<pre dir="ltr">SELECT TAG, KEY_ID
  FROM V$ENCRYPTION_KEYS
  WHERE TAG = &#39;mykey1&#39;;

TAG     KEY_ID
---     ----------------------------------------------------
mykey1  ARgEtzPxpE/Nv8WdPu8LJJUAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
</pre>
<p>The following statement activates the master encryption key that was queried in the previous statement. It also creates a backup of the keystore before activating the new master encryption key.</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  USE KEY &#39;ARgEtzPxpE/Nv8WdPu8LJJUAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&#39;
  IDENTIFIED BY <span class="italic">password</span>
  WITH BACKUP;
</pre>
<p><a id="SQLRF56501"></a><span class="subhead3">Setting a Key Tag: Example&nbsp;</span>The following statement changes the tag to <code dir="ltr">mykey2</code> for the master encryption key that was activated in the previous example. It also creates a backup of the keystore before changing the tag.</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  SET TAG &#39;mykey2&#39; FOR &#39;ARgEtzPxpE/Nv8WdPu8LJJUAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&#39;
  IDENTIFIED BY <span class="italic">password</span>
  WITH BACKUP;
</pre>
<p><a id="SQLRF56502"></a><span class="subhead3">Exporting Keys: Examples&nbsp;</span>The following statement exports two master encryption keys from a password-based software keystore to file <code dir="ltr">/etc/TDE/export.exp</code>. The statement encrypts the master encryption keys in the file using the secret <code dir="ltr">my_secret</code>. The identifiers of the master encryption keys to be exported are provided as a comma-separated list.</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  EXPORT KEYS WITH SECRET &#34;my_secret&#34;
  TO &#39;/etc/TDE/export.exp&#39;
  IDENTIFIED BY <span class="italic">password</span>
  WITH IDENTIFIER IN &#39;AdoxnJ0uH08cv7xkz83ovwsAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&#39;,
                     &#39;AW5z3CoyKE/yv3cNT5CWCXUAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&#39;;
</pre>
<p>The following statement exports master encryption keys from a password-based software keystore to file <code dir="ltr">/etc/TDE/export.exp</code>. Only the keys whose tags are <code dir="ltr">mytag1</code> or <code dir="ltr">mytag2</code> are exported. The master encryption keys in the file are encrypted using the secret <code dir="ltr">my_secret</code>. The key identifiers are found by querying the <code dir="ltr">V$ENCRYPTION_KEYS</code> view.</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  EXPORT KEYS WITH SECRET &#34;my_secret&#34;
  TO &#39;/etc/TDE/export.exp&#39;
  IDENTIFIED BY <span class="italic">password</span>
  WITH IDENTIFIER IN
    (SELECT KEY_ID FROM V$ENCRYPTION_KEYS WHERE TAG IN (&#39;mytag1&#39;, &#39;mytag2&#39;));
</pre>
<p>The following statement exports all master encryption keys of the database to file <code dir="ltr">/etc/TDE/export.exp</code>. The master encryption keys in the file are encrypted using the secret <code dir="ltr">my_secret</code>.</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  EXPORT KEYS WITH SECRET &#34;my_secret&#34;
  TO &#39;/etc/TDE/export.exp&#39;
  IDENTIFIED BY <span class="italic">password</span>;
</pre>
<p>In a multitenant environment, the following statements exports all master encryption keys of the PDB <code dir="ltr">salespdb</code>, along with metadata, to file <code dir="ltr">/etc/TDE/salespdb.exp</code>. The master encryption keys in the file are encrypted using the secret <code dir="ltr">my_secret</code>. If the PDB is subsequently cloned, or unplugged and plugged back in, then the export file created by this statement can be used to import the keys into the cloned or newly plugged-in PDB.</p>
<pre dir="ltr">ALTER SESSION SET CONTAINER = salespdb;
ADMINISTER KEY MANAGEMENT
  EXPORT KEYS WITH SECRET &#34;my_secret&#34;
  TO &#39;/etc/TDE/salespdb.exp&#39;
  IDENTIFIED BY <span class="italic">password</span>;
</pre>
<p><a id="SQLRF56503"></a><span class="subhead3">Importing Keys: Example&nbsp;</span>The following statement imports the master encryption keys, encrypted with secret <code dir="ltr">my_secret</code>, from file <code dir="ltr">/etc/TDE/export.exp</code> to a password-based software keystore. It also creates a backup of the password-based software keystore before importing the keys.</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  IMPORT KEYS WITH SECRET &#34;my_secret&#34;
  FROM &#39;/etc/TDE/export.exp&#39;
  IDENTIFIED BY <span class="italic">password</span>
  WITH BACKUP;
</pre>
<p><a id="SQLRF56504"></a><span class="subhead3">Migrating a Keystore: Example&nbsp;</span>The following statement migrates from a password-based software keystore to a hardware keystore. It also creates a backup of the password-based software keystore before performing the migration.</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  SET ENCRYPTION KEY IDENTIFIED BY &#34;<span class="italic">user_id</span>:<span class="italic">password</span>&#34;
  MIGRATE USING <span class="italic">software_keystore_password</span>
  WITH BACKUP;
</pre>
<p><a id="SQLRF56626"></a><span class="subhead3">Reverse Migrating a Keystore: Example&nbsp;</span>The following statement reverse migrates from a hardware keystore to a password-based software keystore:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  SET ENCRYPTION KEY IDENTIFIED BY <span class="italic">software_keystore_password</span>
  REVERSE MIGRATE USING &#34;<span class="italic">user_id</span>:<span class="italic">password</span>&#34;;
</pre>
<p><a id="SQLRF56505"></a><span class="subhead3">Adding a Secret to a Keystore: Examples&nbsp;</span>The following statement adds secret <code dir="ltr">secret1</code>, with the tag <code dir="ltr">My first secret</code>, for client <code dir="ltr">client1</code> to a password-based software keystore. It also creates a backup of the password-based software keystore before adding the secret.</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  ADD SECRET &#39;secret1&#39; FOR CLIENT &#39;client1&#39;
  USING TAG &#39;My first secret&#39;
  IDENTIFIED BY <span class="italic">password</span>
  WITH BACKUP;
</pre>
<p>The following statement adds a similar secret to a hardware keystore:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  ADD SECRET &#39;secret2&#39; FOR CLIENT &#39;client2&#39;
  USING TAG &#39;My second secret&#39;
  IDENTIFIED BY &#34;<span class="italic">user_id</span>:<span class="italic">password</span>&#34;;
</pre>
<p><a id="SQLRF56506"></a><span class="subhead3">Updating a Secret in a Keystore: Examples&nbsp;</span>The following statement updates the secret that was created in the previous example in a password-based software keystore. It also creates a backup of the password-based software keystore before updating the secret.</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  UPDATE SECRET &#39;secret1&#39; FOR CLIENT &#39;client1&#39;
  USING TAG &#39;New Tag 1&#39;
  IDENTIFIED BY <span class="italic">password</span>
  WITH BACKUP;
</pre>
<p>The following statement updates the secret that was created in the previous example in a hardware keystore:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  UPDATE SECRET &#39;secret2&#39; FOR CLIENT &#39;client2&#39;
  USING TAG &#39;New Tag 2&#39;
  IDENTIFIED BY &#34;<span class="italic">user_id</span>:<span class="italic">password</span>&#34;;
</pre>
<p><a id="SQLRF56507"></a><span class="subhead3">Deleting a Secret from a Keystore: Examples&nbsp;</span>The following statement deletes the secret that was updated in the previous example from a password-based software keystore. It also creates a backup of the password-based software keystore before deleting the secret.</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  DELETE SECRET FOR CLIENT &#39;client1&#39;
  IDENTIFIED BY <span class="italic">password</span>
  WITH BACKUP;
</pre>
<p>The following statement deletes the secret that was updated in the previous example from a hardware keystore:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT
  DELETE SECRET FOR CLIENT &#39;client2&#39;
  IDENTIFIED BY &#34;<span class="italic">user_id</span>:<span class="italic">password</span>&#34;;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5862">
<tr>
<td class="cellalignment5869">
<table class="cellalignment5867">
<tr>
<td class="cellalignment5866"><a href="statements_1002.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5866"><a href="statements_1004.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5871">
<table class="cellalignment5865">
<tr>
<td class="cellalignment5866"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5866"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5866"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5866"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5866"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5866"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>