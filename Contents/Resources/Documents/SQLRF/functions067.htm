<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-102149"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/EXTRACT%20%28datetime%29"></a><title>EXTRACT (datetime)</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-18T18:52:13Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database SQL Language Reference"/>
<meta name="dcterms.identifier" content="E41329-25"/>
<meta name="dcterms.isVersionOf" content="SQLRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="functions066.htm" title="Previous" type="text/html"/>
<link rel="Next" href="functions068.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41329-25.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">140/555</span> <!-- End Header --><a id="i1017161"></a>
<div id="SQLRF00639" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1">EXTRACT (datetime) <a id="sthref1419"></a><a id="sthref1420"></a><a id="sthref1421"></a></h1>
<p class="subhead1"><a id="SQLRF51387"></a>Syntax</p>
<p class="subhead2"><a id="SQLRF51388"></a><span class="italic">extract_datetime</span>::=</p>
<img width="432" height="315" src="img/extract_datetime.gif" alt="Description of extract_datetime.gif follows"/><br/>
<a id="sthref1422" href="img_text/extract_datetime.htm">Description of the illustration &#39;&#39;extract_datetime.gif&#39;&#39;</a><br/>
<br/>
<p class="subhead1"><a id="SQLRF51389"></a>Purpose</p>
<p><code dir="ltr">EXTRACT</code> extracts and returns the value of a specified datetime field from a datetime or interval expression. The <code dir="ltr"><span class="codeinlineitalic">expr</span></code> can be any expression that evaluates to a datetime or interval data type compatible with the requested field:</p>
<ul>
<li>
<p>If <code dir="ltr">YEAR</code> or <code dir="ltr">MONTH</code> is requested, then <code dir="ltr"><span class="codeinlineitalic">expr</span></code> must evaluate to an expression of data type <code dir="ltr">DATE</code>, <code dir="ltr">TIMESTAMP</code>, <code dir="ltr">TIMESTAMP</code> <code dir="ltr">WITH</code> <code dir="ltr">TIME</code> <code dir="ltr">ZONE</code>, <code dir="ltr">TIMESTAMP</code> <code dir="ltr">WITH</code> <code dir="ltr">LOCAL</code> <code dir="ltr">TIME</code> <code dir="ltr">ZONE</code>, or <code dir="ltr">INTERVAL</code> <code dir="ltr">YEAR</code> <code dir="ltr">TO</code> <code dir="ltr">MONTH</code>.</p>
</li>
<li>
<p>If <code dir="ltr">DAY</code> is requested, then <code dir="ltr"><span class="codeinlineitalic">expr</span></code> must evaluate to an expression of data type <code dir="ltr">DATE</code>, <code dir="ltr">TIMESTAMP</code>, <code dir="ltr">TIMESTAMP</code> <code dir="ltr">WITH</code> <code dir="ltr">TIME</code> <code dir="ltr">ZONE</code>, <code dir="ltr">TIMESTAMP</code> <code dir="ltr">WITH</code> <code dir="ltr">LOCAL</code> <code dir="ltr">TIME</code> <code dir="ltr">ZONE</code>, or <code dir="ltr">INTERVAL</code> <code dir="ltr">DAY</code> <code dir="ltr">TO</code> <code dir="ltr">SECOND</code>.</p>
</li>
<li>
<p>If <code dir="ltr">HOUR</code>, <code dir="ltr">MINUTE</code>, or <code dir="ltr">SECOND</code> is requested, then <code dir="ltr"><span class="codeinlineitalic">expr</span></code> must evaluate to an expression of data type <code dir="ltr">TIMESTAMP</code>, <code dir="ltr">TIMESTAMP</code> <code dir="ltr">WITH</code> <code dir="ltr">TIME</code> <code dir="ltr">ZONE</code>, <code dir="ltr">TIMESTAMP</code> <code dir="ltr">WITH</code> <code dir="ltr">LOCAL</code> <code dir="ltr">TIME</code> <code dir="ltr">ZONE</code>, or <code dir="ltr">INTERVAL</code> <code dir="ltr">DAY</code> <code dir="ltr">TO</code> <code dir="ltr">SECOND</code>. <code dir="ltr">DATE</code> is not valid here, because Oracle Database treats it as ANSI <code dir="ltr">DATE</code> data type, which has no time fields.</p>
</li>
<li>
<p>If <code dir="ltr">TIMEZONE_HOUR</code>, <code dir="ltr">TIMEZONE_MINUTE</code>, <code dir="ltr">TIMEZONE_ABBR</code>, <code dir="ltr">TIMEZONE_REGION</code>, or <code dir="ltr">TIMEZONE_OFFSET</code> is requested, then <code dir="ltr"><span class="codeinlineitalic">expr</span></code> must evaluate to an expression of data type <code dir="ltr">TIMESTAMP</code> <code dir="ltr">WITH</code> <code dir="ltr">TIME</code> <code dir="ltr">ZONE</code> or <code dir="ltr">TIMESTAMP</code> <code dir="ltr">WITH</code> <code dir="ltr">LOCAL</code> <code dir="ltr">TIME</code> <code dir="ltr">ZONE</code>.</p>
</li>
</ul>
<p><code dir="ltr">EXTRACT</code> interprets <code dir="ltr"><span class="codeinlineitalic">expr</span></code> as an ANSI datetime data type. For example, <code dir="ltr">EXTRACT</code> treats <code dir="ltr">DATE</code> not as legacy Oracle <code dir="ltr">DATE</code> but as ANSI <code dir="ltr">DATE</code>, without time elements. Therefore, you can extract only <code dir="ltr">YEAR</code>, <code dir="ltr">MONTH</code>, and <code dir="ltr">DAY</code> from a <code dir="ltr">DATE</code> value. Likewise, you can extract <code dir="ltr">TIMEZONE_HOUR</code> and <code dir="ltr">TIMEZONE_MINUTE</code> only from the <code dir="ltr">TIMESTAMP</code> <code dir="ltr">WITH</code> <code dir="ltr">TIME</code> <code dir="ltr">ZONE</code> data type.</p>
<p>When you specify <code dir="ltr">TIMEZONE_REGION</code> or <code dir="ltr">TIMEZONE_ABBR</code> (abbreviation), the value returned is a <code dir="ltr">VARCHAR2</code> string containing the appropriate time zone region name or abbreviation. When you specify any of the other datetime fields, the value returned is an integer value of <code dir="ltr">NUMBER</code> data type representing the datetime value in the Gregorian calendar. When extracting from a datetime with a time zone value, the value returned is in UTC. For a listing of time zone region names and their corresponding abbreviations, query the <code dir="ltr">V$TIMEZONE_NAMES</code> dynamic performance view.</p>
<p>This function can be very useful for manipulating datetime field values in very large tables, as shown in the first example below.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Time zone region names are needed by the daylight saving feature. These names are stored in two types of time zone files: one large and one small. One of these files is the default file, depending on your environment and the release of Oracle Database you are using. For more information regarding time zone files and names, see <a class="olink NLSPG014" href="../NLSPG/applocaledata.htm#NLSPG014"><span class="italic">Oracle Database Globalization Support Guide</span></a>.</div>
<p>Some combinations of datetime field and datetime or interval value expression result in ambiguity. In these cases, Oracle Database returns <code dir="ltr">UNKNOWN</code> (see the examples that follow for additional information).</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink NLSPG0141" href="../NLSPG/applocaledata.htm#NLSPG0141"><span class="italic">Oracle Database Globalization Support Guide</span></a> for a complete listing of the time zone region names in both files</p>
</li>
<li>
<p><a href="sql_elements001.htm#i48042">&#34;Datetime/Interval Arithmetic&#34;</a> for a description of <code dir="ltr"><span class="codeinlineitalic">datetime_value_expr</span></code> and <code dir="ltr"><span class="codeinlineitalic">interval_value_expr</span></code></p>
</li>
<li>
<p><a class="olink REFRN003" href="../REFRN/GUID-8C5690B0-DE10-4460-86DF-80111869CF4C.htm#REFRN003"><span class="italic">Oracle Database Reference</span></a> for information on the dynamic performance views</p>
</li>
</ul>
</div>
<p class="subhead1"><a id="SQLRF51390"></a>Examples</p>
<p>The following example returns from the <code dir="ltr">oe.orders</code> table the number of orders placed in each month:</p>
<pre dir="ltr">SELECT EXTRACT(month FROM order_date) &#34;Month&#34;, COUNT(order_date) &#34;No. of Orders&#34;
  FROM orders
  GROUP BY EXTRACT(month FROM order_date)
  ORDER BY &#34;No. of Orders&#34; DESC, &#34;Month&#34;;

     Month No. of Orders
---------- -------------
        11            15
         6            14
         7            14
         3            11
         5            10
         2             9
         9             9
         8             7
        10             6
         1             5
        12             4
         4             1
 
12 rows selected.
</pre>
<p>The following example returns the year 1998.</p>
<pre dir="ltr">SELECT EXTRACT(YEAR FROM DATE &#39;1998-03-07&#39;)
  FROM DUAL;

EXTRACT(YEARFROMDATE&#39;1998-03-07&#39;)
---------------------------------
                             1998
</pre>
<p>The following example selects from the sample table <code dir="ltr">hr.employees</code> all employees who were hired after 2007:</p>
<pre dir="ltr">SELECT last_name, employee_id, hire_date
  FROM employees
  WHERE EXTRACT(YEAR FROM TO_DATE(hire_date, &#39;DD-MON-RR&#39;)) &gt; 2007
  ORDER BY hire_date;

LAST_NAME                 EMPLOYEE_ID HIRE_DATE
------------------------- ----------- ---------
Johnson                           179 04-JAN-08
Grant                             199 13-JAN-08
Marvins                           164 24-JAN-08
. . .
</pre>
<p>The following example results in ambiguity, so Oracle returns <code dir="ltr">UNKNOWN</code>:</p>
<pre dir="ltr">SELECT EXTRACT(TIMEZONE_REGION FROM TIMESTAMP &#39;1999-01-01 10:00:00 -08:00&#39;)
  FROM DUAL;

EXTRACT(TIMEZONE_REGIONFROMTIMESTAMP&#39;1999-01-0110:00:00-08:00&#39;)
----------------------------------------------------------------
UNKNOWN
</pre>
<p>The ambiguity arises because the time zone numerical offset is provided in the expression, and that numerical offset may map to more than one time zone region name.</p>
</div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5862">
<tr>
<td class="cellalignment5869">
<table class="cellalignment5867">
<tr>
<td class="cellalignment5866"><a href="functions066.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5866"><a href="functions068.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5871">
<table class="cellalignment5865">
<tr>
<td class="cellalignment5866"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5866"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5866"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5866"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5866"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5866"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>