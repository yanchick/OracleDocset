<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-103575"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/SET%20TRANSACTION"></a><title>SET TRANSACTION</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-18T18:53:4Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database SQL Language Reference"/>
<meta name="dcterms.identifier" content="E41329-25"/>
<meta name="dcterms.isVersionOf" content="SQLRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="statements_10004.htm" title="Previous" type="text/html"/>
<link rel="Next" href="statements_10006.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41329-25.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">518/555</span> <!-- End Header --><a id="i2067247"></a>
<div id="SQLRF01705" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1">SET TRANSACTION <a id="sthref7503"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref7504"></a>Purpose</p>
<p><a id="sthref7505"></a><a id="sthref7506"></a><a id="sthref7507"></a><a id="sthref7508"></a>Use the <code dir="ltr">SET</code> <code dir="ltr">TRANSACTION</code> statement to establish the current transaction as read-only or read/write, establish its isolation level, assign it to a specified rollback segment, or assign a name to the transaction.</p>
<p>A transaction implicitly begins with any operation that obtains a TX lock:</p>
<ul>
<li>
<p>When a statement that modifies data is issued</p>
</li>
<li>
<p>When a <code dir="ltr">SELECT</code> ... <code dir="ltr">FOR</code> <code dir="ltr">UPDATE</code> statement is issued</p>
</li>
<li>
<p>When a transaction is explicitly started with a <code dir="ltr">SET</code> <code dir="ltr">TRANSACTION</code> statement or the <code dir="ltr">DBMS_TRANSACTION</code> package</p>
</li>
</ul>
<p>Issuing either a <code dir="ltr">COMMIT</code> or <code dir="ltr">ROLLBACK</code> statement explicitly ends the current transaction.</p>
<p>The operations performed by a <code dir="ltr">SET</code> <code dir="ltr">TRANSACTION</code> statement affect only your current transaction, not other users or other transactions. Your transaction ends whenever you issue a <code dir="ltr">COMMIT</code> or <code dir="ltr">ROLLBACK</code> statement. Oracle Database implicitly commits the current transaction before and after executing a data definition language (DDL) statement.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="statements_4011.htm#i2060233">COMMIT</a> and <a href="statements_9023.htm#i2104635">ROLLBACK</a></div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i2067270"></a>Prerequisites</p>
<p>If you use a <code dir="ltr">SET</code> <code dir="ltr">TRANSACTION</code> statement, then it must be the first statement in your transaction. However, a transaction need not have a <code dir="ltr">SET</code> <code dir="ltr">TRANSACTION</code> statement.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i2067273"></a>Syntax</p>
<p class="subhead2"><a id="SQLRF55417"></a><span class="italic">set_transaction</span>::=</p>
<img width="751" height="187" src="img/set_transaction.gif" alt="Description of set_transaction.gif follows"/><br/>
<a id="sthref7509" href="img_text/set_transaction.htm">Description of the illustration &#39;&#39;set_transaction.gif&#39;&#39;</a><br/>
<br/></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i2067279"></a>Semantics</p>
<p class="subhead1"><a id="SQLRF55418"></a>READ ONLY</p>
<p>The <code dir="ltr">READ</code> <code dir="ltr">ONLY</code> clause establishes the current transaction as a read-only transaction. This clause established <span class="bold">transaction-level read consistency</span>.</p>
<p>All subsequent queries in that transaction see only changes that were committed before the transaction began. Read-only transactions are useful for reports that run multiple queries against one or more tables while other users update these same tables.</p>
<p>This clause is not supported for the user <code dir="ltr">SYS</code>. Queries by <code dir="ltr">SYS</code> will return changes made during the transaction even if <code dir="ltr">SYS</code> has set the transaction to be <code dir="ltr">READ</code> <code dir="ltr">ONLY</code>.</p>
<p><a id="SQLRF55419"></a><span class="subhead3">Restriction on Read-only Transactions&nbsp;</span>Only the following statements are permitted in a read-only transaction:</p>
<ul>
<li>
<p>Subqueries&mdash;<code dir="ltr">SELECT</code> statements without the <code dir="ltr"><span class="codeinlineitalic">for_update_clause</span></code></p>
</li>
<li>
<p><code dir="ltr">LOCK</code> <code dir="ltr">TABLE</code></p>
</li>
<li>
<p><code dir="ltr">SET</code> <code dir="ltr">ROLE</code></p>
</li>
<li>
<p><code dir="ltr">ALTER</code> <code dir="ltr">SESSION</code></p>
</li>
<li>
<p><code dir="ltr">ALTER</code> <code dir="ltr">SYSTEM</code></p>
</li>
</ul>
<p class="subhead1"><a id="SQLRF55420"></a>READ WRITE</p>
<p>Specify <code dir="ltr">READ</code> <code dir="ltr">WRITE</code> to establish the current transaction as a read/write transaction. This clause establishes <span class="bold">statement-level read consistency</span>, which is the default.</p>
<p><a id="SQLRF55421"></a><span class="subhead3">Restriction on Read/Write Transactions&nbsp;</span>You cannot toggle between transaction-level and statement-level read consistency in the same transaction.</p>
<p class="subhead1"><a id="SQLRF55422"></a>ISOLATION LEVEL Clause</p>
<p>Use the <code dir="ltr">ISOLATION</code> <code dir="ltr">LEVEL</code> clause to specify how transactions containing database modifications are handled.</p>
<ul>
<li>
<p>The <code dir="ltr">SERIALIZABLE</code> setting specifies serializable transaction isolation mode as defined in the SQL standard. If a serializable transaction contains data manipulation language (DML) that attempts to update any resource that may have been updated in a transaction uncommitted at the start of the serializable transaction, then the DML statement fails.</p>
</li>
<li>
<p>The <code dir="ltr">READ</code> <code dir="ltr">COMMITTED</code> setting is the default Oracle Database transaction behavior. If the transaction contains DML that requires row locks held by another transaction, then the DML statement waits until the row locks are released.</p>
</li>
</ul>
<p class="subhead1"><a id="SQLRF55423"></a>USE ROLLBACK SEGMENT Clause</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
This clause is relevant and valid only if you are using rollback segments for undo. Oracle strongly recommends that you use automatic undo management to handle undo space. If you follow this recommendation and run your database in automatic undo mode, then Oracle Database ignores this clause.</div>
<p>Specify <code dir="ltr">USE ROLLBACK SEGMENT</code> to assign the current transaction to the specified rollback segment. This clause also implicitly establishes the transaction as a read/write transaction.</p>
<p>Parallel DML requires more than one rollback segment. Therefore, if your transaction contains parallel DML operations, then the database ignores this clause.</p>
<p class="subhead1"><a id="SQLRF55424"></a>NAME Clause <a id="sthref7510"></a><a id="sthref7511"></a><a id="sthref7512"></a></p>
<p>Use the <code dir="ltr">NAME</code> clause to assign a name to the current transaction. This clause is especially useful in distributed database environments when you must identify and resolve in-doubt transactions. The <code dir="ltr"><span class="codeinlineitalic">string</span></code> value is limited to 255 bytes.</p>
<p>If you specify a name for a distributed transaction, then when the transaction commits, the name becomes the commit comment, overriding any comment specified explicitly in the <code dir="ltr">COMMIT</code> statement.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CNCPT1122" href="../CNCPT/transact.htm#CNCPT1122"><span class="italic">Oracle Database Concepts</span></a> for more information about transaction naming</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i2077257"></a>Examples</p>
<p><a id="SQLRF55425"></a><span class="subhead3">Setting Transactions: Examples&nbsp;</span>The following statements could be run at midnight of the last day of every month to count the products and quantities on hand in the Toronto warehouse in the sample Order Entry (<code dir="ltr">oe</code>) schema. This report would not be affected by any other user who might be adding or removing inventory to a different warehouse.</p>
<pre dir="ltr">COMMIT; 

SET TRANSACTION READ ONLY NAME &#39;Toronto&#39;; 

SELECT product_id, quantity_on_hand FROM inventories
   WHERE warehouse_id = 5
   ORDER BY product_id; 

COMMIT; 
</pre>
<p>The first <code dir="ltr">COMMIT</code> statement ensures that <code dir="ltr">SET</code> <code dir="ltr">TRANSACTION</code> is the first statement in the transaction. The last <code dir="ltr">COMMIT</code> statement does not actually make permanent any changes to the database. It simply ends the read-only transaction.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5862">
<tr>
<td class="cellalignment5869">
<table class="cellalignment5867">
<tr>
<td class="cellalignment5866"><a href="statements_10004.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5866"><a href="statements_10006.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5871">
<table class="cellalignment5865">
<tr>
<td class="cellalignment5866"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5866"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5866"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5866"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5866"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5866"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>