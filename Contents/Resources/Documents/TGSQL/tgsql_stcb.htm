<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-106807"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Gathering%20Diagnostic%20Data%20with%20SQL%20Test%20Case%20Builder"></a><title>Gathering Diagnostic Data with SQL Test Case Builder</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="A SQL test case is a set of information that enables a developer to reproduce the execution plan for a specific SQL statement that has encountered a performance problem. SQL Test Case Builder is a tool that automatically gathers information needed to reproduce the problem in a different database instance."/>
<meta name="keywords" content="SQL test cases, SQL Test Case Builder"/>
<meta name="dcterms.created" content="2017-07-24T09:35:46Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database SQL Tuning Guide"/>
<meta name="dcterms.identifier" content="E49106-14"/>
<meta name="dcterms.isVersionOf" content="TGSQL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2013, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="tgsql_monit.htm" title="Previous" type="text/html"/>
<link rel="Next" href="tgsql_trace.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49106-14.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-5207C3C6-C459-4CA7-A12A-6D9CC2485197"></a> <span id="PAGE" style="display:none;">28/40</span> <!-- End Header -->
<a id="TGSQL94840"></a>
<h1 id="TGSQL-GUID-5207C3C6-C459-4CA7-A12A-6D9CC2485197" class="sect1"><span class="enumeration_chapter">17</span> Gathering Diagnostic Data with SQL Test Case Builder</h1>
<div>
<p>A <span class="bold">SQL test case</span> is a set of information that enables a developer to reproduce the execution plan for a specific SQL statement that has encountered a performance problem. SQL Test Case Builder is a tool that automatically gathers information needed to reproduce the problem in a different database instance.</p>
<p>This chapter contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="tgsql_stcb.htm#GUID-F4A2878D-311C-45F0-8747-81E4398F2BDC" title="SQL Test Case Builder automates the sometimes difficult and time-consuming process of gathering and reproducing information about a problem and the environment in which it occurred.">Purpose of SQL Test Case Builder</a></p>
</li>
<li>
<p><a href="tgsql_stcb.htm#GUID-78C2FCFC-FA60-4E86-A5F0-DA7CCC1AD987">Concepts for SQL Test Case Builder</a></p>
</li>
<li>
<p><a href="tgsql_stcb.htm#GUID-C28E1EFD-3F92-4BF1-AE92-9230581712BD" title="This task explains how to navigate to the Incident Manager from the Incidents and Problems section on the Database Home page.The DBMS_SQLDIAG package performs tasks relating to SQL Test Case Builder.">User Interfaces for SQL Test Case Builder</a></p>
</li>
<li>
<p><a href="tgsql_stcb.htm#GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE" title="This tutorial explains how to run SQL Test Case Builder using Cloud Control.">Running SQL Test Case Builder</a></p>
</li>
</ul>
</div>
<a id="TGSQL94868"></a>
<div class="props_rev_3"><a id="GUID-F4A2878D-311C-45F0-8747-81E4398F2BDC"></a>
<h2 id="TGSQL-GUID-F4A2878D-311C-45F0-8747-81E4398F2BDC" class="sect2">Purpose of SQL Test Case Builder</h2>
<div>
<p>SQL Test Case Builder automates the sometimes difficult and time-consuming process of gathering and reproducing information about a problem and the environment in which it occurred.</p>
<p>The output of SQL Test Case Builder is a set of scripts in a predefined directory. These scripts contain the commands required to re-create all the necessary objects and the environment. After the test case is ready, you can create a zip file of the directory and move it to another database, or upload the file to Oracle Support.</p>
</div>
</div>
<a id="TGSQL94869"></a>
<div class="props_rev_3"><a id="GUID-78C2FCFC-FA60-4E86-A5F0-DA7CCC1AD987"></a>
<h2 id="TGSQL-GUID-78C2FCFC-FA60-4E86-A5F0-DA7CCC1AD987" class="sect2">Concepts for SQL Test Case Builder</h2>
<div>
<p>This section contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="tgsql_stcb.htm#GUID-1FA91A0F-ACC1-4849-845D-86AB312A866E">SQL Incidents</a></p>
</li>
<li>
<p><a href="tgsql_stcb.htm#GUID-0D666C9D-8B0E-4FC5-8EC1-6FBC65475C66">What SQL Test Case Builder Captures</a></p>
</li>
<li>
<p><a href="tgsql_stcb.htm#GUID-3E77892C-9259-4361-93FC-0C643AA51A88">Output of SQL Test Case Builder</a></p>
</li>
</ul>
</div>
<a id="TGSQL94870"></a>
<div class="props_rev_3"><a id="GUID-1FA91A0F-ACC1-4849-845D-86AB312A866E"></a>
<h3 id="TGSQL-GUID-1FA91A0F-ACC1-4849-845D-86AB312A866E" class="sect3">SQL Incidents</h3>
<div>
<p>In the fault diagnosability infrastructure of Oracle Database, an incident is a single occurrence of a problem. A <a href="glossary.htm#GUID-2A5C7F1F-4709-4C53-A3B7-8005160D8E74"><span class="xrefglossterm">SQL incident</span></a> is a SQL-related problem. When a problem (critical error) occurs multiple times, the database creates an incident for each occurrence. Incidents are timestamped and tracked in the Automatic Diagnostic Repository (ADR). Each incident is identified by a numeric incident ID, which is unique within the ADR.</p>
<p>SQL Test Case Builder is accessible any time on the command line. In Oracle Enterprise Manager Cloud Control (Cloud Control), the SQL Test Case pages are only available after a SQL incident is found.</p>
<div class="infoboxnotealso" id="GUID-1FA91A0F-ACC1-4849-845D-86AB312A866E__GUID-C5A44A57-C14F-4A6A-B0DB-B7934FFD938C">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink CNCPT1913" target="_blank" href="../CNCPT/startup.htm#CNCPT1913"><span class="italic">Oracle Database Concepts</span></a> for a conceptual overview of ADR</p>
</li>
<li>
<p><a class="olink ADMIN12290" target="_blank" href="../ADMIN/diag.htm#ADMIN12290"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> to learn how to investigate, report, and resolve a problem</p>
</li>
</ul>
</div>
</div>
</div>
<a id="TGSQL94871"></a>
<div class="props_rev_3"><a id="GUID-0D666C9D-8B0E-4FC5-8EC1-6FBC65475C66"></a>
<h3 id="TGSQL-GUID-0D666C9D-8B0E-4FC5-8EC1-6FBC65475C66" class="sect3">What SQL Test Case Builder Captures</h3>
<div>
<p>SQL Test Case Builder captures permanent information such as the query being executed, table and index definitions (but not the actual data), PL/SQL packages and program units, optimizer statistics, SQL plan baselines, and initialization parameter settings. Starting in Oracle Database 12<span class="italic">c</span>, SQL Test Case Builder also captures and replays transient information, including information only available as part of statement execution.</p>
<p>SQL Test Case Builder supports the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Adaptive plans</p>
<p><a id="d98611e485" class="indexterm-anchor"></a><a id="d98611e487" class="indexterm-anchor"></a>SQL Test Case Builder captures inputs to the decisions made regarding adaptive plans, and replays them at each decision point (see <span class="q">&#34;<a href="tgsql_optcncpt.htm#GUID-5A1EB094-1A9E-4B69-9BE5-39BDA2B3253C" title="An adaptive plan enables the optimizer to defer the final plan decision for a statement until execution time.">Adaptive Plans</a>&#34;</span>). For adaptive plans, the final statistics value at each buffering statistics collector is sufficient to decide on the final plan.</p>
</li>
<li>
<p>Automatic memory management</p>
<p>The database automatically handles the memory requested for each SQL operation. Actions such as sorting can affect performance significantly. SQL Test Case Builder keeps track of the memory activities, for example, where the database allocated memory and how much it allocated.</p>
</li>
<li>
<p>Dynamic statistics</p>
<p><a id="d98611e512" class="indexterm-anchor"></a><a id="d98611e514" class="indexterm-anchor"></a><a id="d98611e518" class="indexterm-anchor"></a>Regathering <a href="glossary.htm#GUID-453737A7-931A-49D1-AA5C-AFB14D9837FB"><span class="xrefglossterm">dynamic statistics</span></a> on a different database does not always generate the same results, for example, when data is missing (see <span class="q">&#34;<a href="tgsql_statscon.htm#GUID-620CB826-10A2-4937-8DAD-2B41475AE47F" title="By default, when optimizer statistics are missing, stale, or insufficient, the database automatically gathers dynamic statistics during a parse. The database uses recursive SQL to scan a small random sample of table blocks.">Dynamic Statistics</a>&#34;</span>). To reproduce the problem, SQL Test Case Builder exports the dynamic statistics result from the source database. In the testing database, SQL Test Case Builder reuses the same values captured from the source database instead of regathering dynamic statistics.</p>
</li>
<li>
<p>Multiple execution support</p>
<p>SQL Test Case Builder can capture dynamic information accumulated during multiple executions of the query. This capability is important for automatic reoptimization (see <span class="q">&#34;<a href="tgsql_optcncpt.htm#GUID-D23F8328-A4CF-4211-8C9B-79B826F34A32" title="In automatic reoptimization, the optimizer changes a plan on subsequent executions after the initial execution.">Automatic Reoptimization</a>&#34;</span>).</p>
</li>
<li>
<p>Compilation environment and bind values replay</p>
<p>The compilation environment setting is an important part of the query optimization context. SQL Test Case Builder captures nondefault settings altered by the user when running the problem query in the source database. If any nondefault parameter values are used, SQL Test Case Builder re-establishes the same values before running the query.</p>
</li>
<li>
<p>Object statistics history</p>
<p>The statistics history for objects is helpful to determine whether a plan change was caused by a change in statistics values. <code class="codeph">DBMS_STATS</code> stores the history in the data dictionary. SQL Test Case Builder stores this statistics data into a staging table during export. During import, SQL Test Case Builder automatically reloads the statistics history data into the target database from the staging table.</p>
</li>
<li>
<p>Statement history</p>
<p>The statement history is important for diagnosing problems related to adaptive cursor sharing, statistics feedback, and cursor sharing bugs. The history includes execution plans and compilation and execution statistics.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-0D666C9D-8B0E-4FC5-8EC1-6FBC65475C66__GUID-C7361FF5-20C7-4948-B5DD-AF9F1C7B4DC8">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="tgsql_spm.htm#GUID-7024369A-F98D-48E4-921C-C899485C954F" title="You can manage SQL plan baselines using the DBMS_SPM package.">Managing SQL Plan Baselines</a></p>
</li>
<li>
<p><a class="olink ARPLS059" target="_blank" href="../ARPLS/d_stats.htm#ARPLS059"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> to learn about the <code class="codeph">DBMS_STATS</code> package</p>
</li>
</ul>
</div>
</div>
</div>
<a id="TGSQL94872"></a>
<div class="props_rev_3"><a id="GUID-3E77892C-9259-4361-93FC-0C643AA51A88"></a>
<h3 id="TGSQL-GUID-3E77892C-9259-4361-93FC-0C643AA51A88" class="sect3">Output of SQL Test Case Builder</h3>
<div>
<p>The output of the SQL Test Case Builder is a set of files that contains the commands required to re-create all the necessary objects and the environment. By default, SQL Test Case Builder stores the files in the following location, where <span class="italic">incnum</span> refers to the incident number and <span class="italic">runnum</span> refers to the run number:</p>
<pre dir="ltr">$ADR_HOME/incident/incdir_<span class="italic">incnum</span>/SQLTCB_<span class="italic">runnum</span>
</pre>
<p>For example, a valid output file name could be as follows:</p>
<pre dir="ltr">$ORACLE_HOME/log/diag/rdbms/dbsa/dbsa/incident/incdir_2657/SQLTCB_1
</pre>
<p>You can specify a nondefault location by creating an Oracle directory and invoking <code class="codeph">DBMS_SQLDIAG.EXPORT_SQL_TESTCASE</code>, as in the following example:</p>
<pre dir="ltr">CREATE OR REPLACE DIRECTORY my_tcb_dir_exp &#39;/tmp&#39;;
 
BEGIN 
  DBMS_SQLDIAG.EXPORT_SQL_TESTCASE (
    directory =&gt; &#39;my_tcb_dir_exp&#39;
,   sql_text  =&gt; &#39;SELECT COUNT(*) FROM sales&#39;
,   testcase  =&gt; tco
);
END;
</pre>
<div class="infoboxnotealso" id="GUID-3E77892C-9259-4361-93FC-0C643AA51A88__GUID-CFDC8A99-E396-4AF5-A4D3-2FD4413D5EC5">
<p class="notep1">See Also:</p>
<p><a class="olink ADMIN11008" target="_blank" href="../ADMIN/diag.htm#ADMIN11008"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> to learn about the structure of the ADR repository</p>
</div>
</div>
</div>
</div>
<a id="TGSQL94873"></a>
<div class="props_rev_3"><a id="GUID-C28E1EFD-3F92-4BF1-AE92-9230581712BD"></a>
<h2 id="TGSQL-GUID-C28E1EFD-3F92-4BF1-AE92-9230581712BD" class="sect2">User Interfaces for SQL Test Case Builder</h2>
<div>
<p>You can access SQL Test Case Builder either through Cloud Control or using PL/SQL on the command line.</p>
</div>
<a id="TGSQL94874"></a>
<div class="props_rev_3"><a id="GUID-3B9C9026-DD36-44FA-A346-C84C2E30779A"></a>
<h3 id="TGSQL-GUID-3B9C9026-DD36-44FA-A346-C84C2E30779A" class="sect3">Graphical Interface for SQL Test Case Builder</h3>
<div>
<p>Within Cloud Control, you can access SQL Test Case Builder from the Incident Manager page or the Support Workbench page.</p>
</div>
<a id="TGSQL94837"></a>
<div class="props_rev_3"><a id="GUID-355F7C1F-42B6-47E9-B8E6-BE47DD587A8C"></a>
<h4 id="TGSQL-GUID-355F7C1F-42B6-47E9-B8E6-BE47DD587A8C" class="sect4">Accessing the Incident Manager</h4>
<div>
<p>This task explains how to navigate to the Incident Manager from the Incidents and Problems section on the Database Home page.</p>
<div class="section"></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To access the Incident Manager:</p>
<ol>
<li>
<p>Log in to Cloud Control with the appropriate credentials.</p>
</li>
<li>
<p>Under the <span class="bold">Targets</span> menu, select <span class="bold">Databases</span>.</p>
</li>
<li>
<p>In the list of database targets, select the target for the Oracle Database instance that you want to administer.</p>
</li>
<li>
<p>If prompted for database credentials, then enter the minimum credentials necessary for the tasks you intend to perform.</p>
</li>
<li>
<p>In the Incidents and Problems section, locate the SQL incident to be investigated.</p>
<p>In the following example, the <code class="codeph">ORA 600</code> error is a SQL incident.</p>
<div class="figure" id="GUID-355F7C1F-42B6-47E9-B8E6-BE47DD587A8C__GUID-591D2F54-1C35-48BD-BD9A-8D2EDADE3115"><img width="671" height="104" src="img/GUID-6662F630-C8D1-41A1-923F-919BCD08A775-default.gif" alt="Description of GUID-6662F630-C8D1-41A1-923F-919BCD08A775-default.gif follows" title="Description of GUID-6662F630-C8D1-41A1-923F-919BCD08A775-default.gif follows"/><br/>
<a href="img_text/GUID-6662F630-C8D1-41A1-923F-919BCD08A775-default.htm">Description of the illustration GUID-6662F630-C8D1-41A1-923F-919BCD08A775-default.gif</a></div>
<!-- class="figure" --></li>
<li>
<p>Click the summary of the incident.</p>
<p>The Problem Details page of the Incident Manager appears.</p>
<div class="figure" id="GUID-355F7C1F-42B6-47E9-B8E6-BE47DD587A8C__GUID-7A952FA8-0358-40B0-8D8D-6F11BF57909C"><img width="750" height="365" src="img/GUID-638AB108-719B-4FC5-9A9A-71F8DF95D9F0-default.gif" alt="Description of GUID-638AB108-719B-4FC5-9A9A-71F8DF95D9F0-default.gif follows" title="Description of GUID-638AB108-719B-4FC5-9A9A-71F8DF95D9F0-default.gif follows"/><br/>
<a href="img_text/GUID-638AB108-719B-4FC5-9A9A-71F8DF95D9F0-default.htm">Description of the illustration GUID-638AB108-719B-4FC5-9A9A-71F8DF95D9F0-default.gif</a></div>
<!-- class="figure" -->
<p>The Support Workbench page appears, with the incidents listed in a table.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-355F7C1F-42B6-47E9-B8E6-BE47DD587A8C__GUID-2ED3D211-E994-4FDA-BD8B-6755928E75AF">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink ADMIN12299" target="_blank" href="../ADMIN/diag.htm#ADMIN12299"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> to learn how to view problems with the Cloud Control Support Workbench</p>
</li>
<li>
<p>Online help for Cloud Control</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="TGSQL94875"></a>
<div class="props_rev_3"><a id="GUID-82F02C36-11DC-486B-B299-E242E4B10490"></a>
<h4 id="TGSQL-GUID-82F02C36-11DC-486B-B299-E242E4B10490" class="sect4">Accessing the Support Workbench</h4>
<div>
<div class="section">
<p>This task explains how to navigate to the Incident Manager from the Oracle Database menu.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To access the Support Workbench:</p>
<ol>
<li>
<p>Log in to Cloud Control with the appropriate credentials.</p>
</li>
<li>
<p>Under the <span class="bold">Targets</span> menu, select <span class="bold">Databases</span>.</p>
</li>
<li>
<p>In the list of database targets, select the target for the Oracle Database instance that you want to administer.</p>
</li>
<li>
<p>If prompted for database credentials, then enter the minimum credentials necessary for the tasks you intend to perform.</p>
</li>
<li>
<p>From the <span class="bold">Oracle Database</span> menu, select <span class="bold">Diagnostics</span>, then <span class="bold">Support Workbench</span>.</p>
<p>The Support Workbench page appears, with the incidents listed in a table.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-82F02C36-11DC-486B-B299-E242E4B10490__GUID-5497E9E8-0696-40F5-BA94-3F8C94D02FC0">
<p class="notep1">See Also:</p>
<p>Online help for Cloud Control</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="TGSQL94877"></a><a id="TGSQL94876"></a>
<div class="props_rev_3"><a id="GUID-BE5ECC60-8033-40B5-BB0A-5803A78416DB"></a>
<h3 id="TGSQL-GUID-BE5ECC60-8033-40B5-BB0A-5803A78416DB" class="sect3">Command-Line Interface for SQL Test Case Builder</h3>
<div>
<p>The <code class="codeph">DBMS_SQLDIAG</code> package performs tasks relating to SQL Test Case Builder.</p>
<div class="section">
<p>This package consists of various subprograms for the SQL Test Case Builder, some of which are listed in <a href="tgsql_stcb.htm#GUID-BE5ECC60-8033-40B5-BB0A-5803A78416DB__BABHBBHG" title="SQL Test Case Functions in DBMS_SQLDIAG">Table 17-1</a>.</p>
<div class="tblformal" id="GUID-BE5ECC60-8033-40B5-BB0A-5803A78416DB__BABHBBHG">
<p class="titleintable">Table 17-1 SQL Test Case Functions in DBMS_SQLDIAG</p>
<table class="cellalignment4808" title="SQL Test Case Functions in DBMS_SQLDIAG" summary="SQL Test Case Functions in DBMS_SQLDIAG">
<thead>
<tr class="cellalignment4802">
<th class="cellalignment4866" id="d98611e1223">Procedure</th>
<th class="cellalignment4866" id="d98611e1226">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4802">
<td class="cellalignment4867" id="d98611e1231" headers="d98611e1223">
<p><code class="codeph">EXPORT_SQL_TESTCASE</code></p>
</td>
<td class="cellalignment4867" headers="d98611e1231 d98611e1226">
<p>Exports a SQL test case to a user-specified directory</p>
</td>
</tr>
<tr class="cellalignment4802">
<td class="cellalignment4867" id="d98611e1239" headers="d98611e1223">
<p><code class="codeph">EXPORT_SQL_TESTCASE_DIR_BY_INC</code></p>
</td>
<td class="cellalignment4867" headers="d98611e1239 d98611e1226">
<p>Exports a SQL test case corresponding to the incident ID passed as an argument</p>
</td>
</tr>
<tr class="cellalignment4802">
<td class="cellalignment4867" id="d98611e1247" headers="d98611e1223">
<p><code class="codeph">EXPORT_SQL_TESTCASE_DIR_BY_TXT</code></p>
</td>
<td class="cellalignment4867" headers="d98611e1247 d98611e1226">
<p>Exports a SQL test case corresponding to the SQL text passed as an argument</p>
</td>
</tr>
<tr class="cellalignment4802">
<td class="cellalignment4867" id="d98611e1255" headers="d98611e1223">
<p><code class="codeph">IMPORT_SQL_TESTCASE</code></p>
</td>
<td class="cellalignment4867" headers="d98611e1255 d98611e1226">
<p>Imports a SQL test case into a schema</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso" id="GUID-BE5ECC60-8033-40B5-BB0A-5803A78416DB__GUID-8BC887CC-119B-4A4A-A30E-CB553A23A1E2">
<p class="notep1">See Also:</p>
<p><a class="olink ARPLS203" target="_blank" href="../ARPLS/d_sqldiag.htm#ARPLS203"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn more about the <code class="codeph">DBMS_SQLDIAG</code> package</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="TGSQL94879"></a><a id="TGSQL94878"></a>
<div class="props_rev_3"><a id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE"></a>
<h2 id="TGSQL-GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE" class="sect2">Running SQL Test Case Builder</h2>
<div>
<p>This tutorial explains how to run SQL Test Case Builder using Cloud Control.</p>
<div class="section">
<p class="subhead2">Assumptions</p>
<p>This tutorial assumes the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>You ran the following <code class="codeph">EXPLAIN PLAN</code> statement as user <code class="codeph">sh</code>, which causes an internal error:</p>
<pre dir="ltr">EXPLAIN PLAN FOR
  SELECT unit_cost, sold
  FROM   costs c,
         ( SELECT /*+ merge */ p.prod_id, SUM(quantity_sold) AS sold
           FROM   products p, sales s
           WHERE  p.prod_id = s.prod_id
           GROUP BY p.prod_id ) v
  WHERE  c.prod_id = v.prod_id;
</pre></li>
<li>
<p>In the Incidents and Problems section on the Database Home page, a SQL incident generated by the internal error appears.</p>
</li>
<li>
<p>You access the Incident Details page, as explained in <span class="q">&#34;<a href="tgsql_stcb.htm#GUID-355F7C1F-42B6-47E9-B8E6-BE47DD587A8C" title="This task explains how to navigate to the Incident Manager from the Incidents and Problems section on the Database Home page.">Accessing the Incident Manager</a>&#34;</span>.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">To run SQL Test Case Builder:</p>
<ol>
<li>
<p>Click the Incidents tab.</p>
<p>The Problem Details page appears.</p>
<div class="figure" id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE__GUID-A4AEE60C-E98A-47E3-BA6D-FB2BB02335D4"><img width="570" height="123" src="img/GUID-CBB30684-26B5-42D8-9393-D73EF0844932-default.gif" alt="Description of GUID-CBB30684-26B5-42D8-9393-D73EF0844932-default.gif follows" title="Description of GUID-CBB30684-26B5-42D8-9393-D73EF0844932-default.gif follows"/><br/>
<a href="img_text/GUID-CBB30684-26B5-42D8-9393-D73EF0844932-default.htm">Description of the illustration GUID-CBB30684-26B5-42D8-9393-D73EF0844932-default.gif</a></div>
<!-- class="figure" --></li>
<li>
<p>Click the summary for the incident.</p>
<p>The Incident Details page appears.</p>
<div class="figure" id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE__GUID-879564EF-C896-4291-A3AA-A77C7AB3434D"><img width="667" height="419" src="img/GUID-2BA109AD-6054-4A16-B501-5D378907955A-default.gif" alt="Description of GUID-2BA109AD-6054-4A16-B501-5D378907955A-default.gif follows" title="Description of GUID-2BA109AD-6054-4A16-B501-5D378907955A-default.gif follows"/><br/>
<a href="img_text/GUID-2BA109AD-6054-4A16-B501-5D378907955A-default.htm">Description of the illustration GUID-2BA109AD-6054-4A16-B501-5D378907955A-default.gif</a></div>
<!-- class="figure" --></li>
<li>
<p>In Guided Resolution, click <span class="bold">View Diagnostic Data</span>.</p>
<p>The Incident Details: <span class="italic">incident_number</span> page appears.</p>
<div class="figure" id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE__GUID-D74DAA7C-5D91-4BED-BA98-4BCD687F3E31"><img width="683" height="606" src="img/GUID-0FDF845B-790F-4DDD-818A-F381EA7C5C1C-default.gif" alt="Description of GUID-0FDF845B-790F-4DDD-818A-F381EA7C5C1C-default.gif follows" title="Description of GUID-0FDF845B-790F-4DDD-818A-F381EA7C5C1C-default.gif follows"/><br/>
<a href="img_text/GUID-0FDF845B-790F-4DDD-818A-F381EA7C5C1C-default.htm">Description of the illustration GUID-0FDF845B-790F-4DDD-818A-F381EA7C5C1C-default.gif</a></div>
<!-- class="figure" --></li>
<li>
<p>In the Application Information section, click <span class="bold">Additional Diagnostics</span>.</p>
<p>The Additional Diagnostics subpage appears.</p>
<div class="figure" id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE__GUID-21292F72-13C3-46C2-BFA5-FE3233FBC06E"><img width="681" height="131" src="img/GUID-4C923228-7C40-4BB1-B355-497A553C6A92-default.gif" alt="Description of GUID-4C923228-7C40-4BB1-B355-497A553C6A92-default.gif follows" title="Description of GUID-4C923228-7C40-4BB1-B355-497A553C6A92-default.gif follows"/><br/>
<a href="img_text/GUID-4C923228-7C40-4BB1-B355-497A553C6A92-default.htm">Description of the illustration GUID-4C923228-7C40-4BB1-B355-497A553C6A92-default.gif</a></div>
<!-- class="figure" --></li>
<li>
<p>Select <span class="bold">SQL Test Case Builder</span>, and then click <span class="bold">Run</span>.</p>
<p>The Run User Action page appears.</p>
<div class="figure" id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE__GUID-1FEB47A1-98AC-422F-BAC0-EC53D791A7A5"><img width="535" height="282" src="img/GUID-6B7CECDB-DF3B-4EC0-B334-118A71FAFE23-default.gif" alt="Description of GUID-6B7CECDB-DF3B-4EC0-B334-118A71FAFE23-default.gif follows" title="Description of GUID-6B7CECDB-DF3B-4EC0-B334-118A71FAFE23-default.gif follows"/><br/>
<a href="img_text/GUID-6B7CECDB-DF3B-4EC0-B334-118A71FAFE23-default.htm">Description of the illustration GUID-6B7CECDB-DF3B-4EC0-B334-118A71FAFE23-default.gif</a></div>
<!-- class="figure" --></li>
<li>
<p>Select a sampling percentage (optional), and then click <span class="bold">Submit</span>.</p>
<p>After processing completes, the Confirmation page appears.</p>
<div class="figure" id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE__GUID-09B3E1CB-BC3C-4FB6-8348-4F278BC98AD1"><img width="436" height="88" src="img/GUID-EF3F463F-D0B7-46A6-8A20-E999084DF3B5-default.gif" alt="Description of GUID-EF3F463F-D0B7-46A6-8A20-E999084DF3B5-default.gif follows" title="Description of GUID-EF3F463F-D0B7-46A6-8A20-E999084DF3B5-default.gif follows"/><br/>
<a href="img_text/GUID-EF3F463F-D0B7-46A6-8A20-E999084DF3B5-default.htm">Description of the illustration GUID-EF3F463F-D0B7-46A6-8A20-E999084DF3B5-default.gif</a></div>
<!-- class="figure" --></li>
<li>
<p>Access the SQL Test Case files in the location described in <span class="q">&#34;<a href="tgsql_stcb.htm#GUID-3E77892C-9259-4361-93FC-0C643AA51A88">Output of SQL Test Case Builder</a>&#34;</span>.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE__GUID-EDCF1E11-46C2-499E-8159-FFCB3BA640B1">
<p class="notep1">See Also:</p>
<p>Online help for Cloud Control</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4801">
<tr>
<td class="cellalignment4834">
<table class="cellalignment4806">
<tr>
<td class="cellalignment4805"><a href="tgsql_monit.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4805"><a href="tgsql_trace.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4836">
<table class="cellalignment4804">
<tr>
<td class="cellalignment4805"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4805"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4805"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4805"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4805"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4805"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>