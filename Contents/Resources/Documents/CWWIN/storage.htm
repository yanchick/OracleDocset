<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-5084"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Configuring%20Storage%20for%20Oracle%20Grid%20Infrastructure%20and%20Oracle%20RAC"></a><title>Configuring Storage for Oracle Grid Infrastructure and Oracle RAC</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="This chapter describes the storage configuration tasks that you must complete before you start the installer to install Oracle Clusterware and Oracle Automatic Storage Management (Oracle ASM), and that you must complete before adding an Oracle Real Application Clusters (Oracle RAC) installation to the cluster."/>
<meta name="keywords" content="supported storage options, Oracle Clusterware, supported storage options for, voting files, Oracle Cluster Registry, recovery files, database files, network file system (NFS), Direct NFS Client, Oracle Clusterware files, Automatic Storage Management, Oracle ASM, guidelines for choosing storage, guidelines, and Oracle Clusterware files, requirement of absolute majority of, quorum failure group, Oracle ASM disk group compatibility, Oracle ASM:disk groups, Oracle Database, data file storage options, data files, storage options, file systems, storage option for data files, cluster file systems, and shared storage, and raw devices, and database files, Standard Edition, Standard Edition Two, NAS, clients, and NFS, executable files, and Oracle ACFS, Oracle ACFS, guidelines for storage location, RAID, and mirroring Oracle Cluster Registry and voting files, mirroring, failure groups, disk group, Oracle ASM with redundancy levels, recommendations for Oracle ASM disk groups, disk space, requirements, for Oracle ASM, disk groups, recommendations for, partitions, using with Oracle ASM, redundancy levels, ASM, redundancy levels, redundancy level, external redundancy, normal redundancy, Oracle ASM redundancy levels, high redundancy, mirroring Oracle ASM disk groups, recommended Oracle ASM redundancy level, recommendations, Oracle ASM redundancy level, installation, Oracle ASM requirements, space required for Oracle Clusterware files, Oracle ASM disk space requirements, requirements:for Oracle ASM, requirements:for preconfigured database in Oracle ASM, and space requirements for preconfigured database, databases, requirements with Oracle ASM, preconfigured database, requirements when using Oracle ASM, customized database, required disk space, space required for preconfigured database, characteristics in Oracle ASM, characteristics, data loss, minimizing with Oracle ASM, identifying, failure groups for Oracle ASM, examples, examples in Oracle ASM, restrictions, limiting the number of partitions on a single disk, ASMCA, configuring disks, disks, configuring for Oracle ASM, selecting for use with Oracle ASM, upgrading, upgrades, voting file partition sizes, OCR partition sizes, partition sizes, raw devices, upgrading existing partitions, and file systems, disk automount, enable, enable disk automount, automount, enable disk automounting, marking, raw, device names, creating with asmtoolg, asmtool utility, asmtoolg utility, creating with asmtool, asmtool utility reference, Oracle Disk Manager (ODM), description, CIFS, Common Internet File System, files, oranfstab, oranfstab file, load balancing, enabling, attributes, library file, ORADNFS utility, dictionary views, managing, disabling, Automatic Storage Management Cluster File System, commands, asmca, starting"/>
<meta name="dcterms.created" content="2017-07-05T01:57:42Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Oracle Grid Infrastructure Installation Guide"/>
<meta name="dcterms.identifier" content="E49041-08"/>
<meta name="dcterms.isVersionOf" content="CWWIN"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2012, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="usrgrps.htm" title="Previous" type="text/html"/>
<link rel="Next" href="crswin.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49041-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-88056EE7-08E7-4491-911E-B54112F81E37"></a> <span id="PAGE" style="display:none;">12/20</span> <!-- End Header -->
<script>
//<![CDATA[
window.name='storage'
//]]>
</script> <script>
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" ><head><title>');
   
    msg.document.write('Footnote&amp;nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('');
    msg.document.write('<style> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
</script><noscript>
<p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
</noscript>
<h1 id="CWWIN-GUID-88056EE7-08E7-4491-911E-B54112F81E37" class="sect1"><span class="enumeration_chapter">6</span> Configuring Storage for Oracle Grid Infrastructure and Oracle RAC</h1>
<div>
<p>This chapter describes the storage configuration tasks that you must complete before you start the installer to install Oracle Clusterware and Oracle Automatic Storage Management (Oracle ASM), and that you must complete before adding an Oracle Real Application Clusters (Oracle RAC) installation to the cluster.</p>
<div class="infobox-note" id="GUID-88056EE7-08E7-4491-911E-B54112F81E37__GUID-A37D63AB-0903-4DC1-89CE-22FF0B7E250D">
<p class="notep1">Note:</p>
If you are currently using OCFS for Windows as your shared storage, then you must migrate to using Oracle ASM <span class="italic">before</span> the upgrade of Oracle Database and Oracle Grid Infrastructure.</div>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="storage.htm#GUID-607A1355-1C63-4AD2-AF52-107E2EAF6A38">Reviewing Oracle Grid Infrastructure Storage Options</a></strong><br/>
This section describes the supported storage options for Oracle Grid Infrastructure for a cluster, and for features running on Oracle Grid Infrastructure.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-55191BB9-798B-4063-A2B5-215539761FF0">Guidelines for Choosing a Shared Storage Option</a></strong><br/>
You can choose any combination of the supported shared storage options for each file type if you satisfy all requirements listed for the chosen storage option.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-516E5E83-BC00-4C64-A204-F50CDB556F37">Storage Requirements for Oracle Clusterware and Oracle RAC</a></strong><br/>
Each supported file system type has additional requirements that must be met to support Oracle Clusterware and Oracle RAC. Use the following sections to help you select your storage option.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-38408606-CD90-4FE2-9E99-AD67E7C211E7">After You Have Selected the Shared Storage Options</a></strong><br/>
When you have determined your disk storage options, you then start the configuration. The exact steps to perform depend on the type of shared storage you use.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-1192509E-CE51-4BA8-BECC-51D4A8B45CBA">Preliminary Shared Disk Preparation</a></strong><br/>
When using shared storage on a Windows platform, there are additional preinstallation tasks to complete.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-3F9AAD1E-5FBA-45D5-B94C-BFEFCBBF8971">Configuring Shared Storage for Oracle ASM</a></strong><br/>
The installer does not suggest a default location for the OCR or the voting file. If you choose to create these files on Oracle ASM, then you must first create and configure disk partitions to be used in the Oracle ASM disk group.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-8297B30F-E074-4384-A941-94B63B7360D3">Configuring Disk Partitions on Shared Storage</a></strong><br/>
To create disk partitions, use the disk administration tools provided by the operating system or third party vendors. You can create the disk partitions using either the Disk Management Interface or the DiskPart utility, both of which are provided by the operating system.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-E3DA9FBF-DE48-4516-BD0D-C147A2ECE2D9">Configuring Direct NFS Client for Oracle RAC Data Files</a></strong><br/>
Direct NFS Client is an interface for NFS systems provided by Oracle.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-0F7D3132-E614-4F76-B054-90AF71944150">Upgrading Existing Oracle ASM Instances</a></strong><br/>
If you have an Oracle ASM installation from a prior release installed on your server, or in an existing Oracle Clusterware installation, then you can use Oracle Automatic Storage Management Configuration Assistant (ASMCA) to upgrade the existing Oracle ASM instance to Oracle ASM 12<span class="italic">c</span> Release 1 (12.1).</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-230C5175-8214-4AB9-86D5-4BCC39DF6995">Configuring Oracle Automatic Storage Management Cluster File System</a></strong><br/>
If you want to install Oracle RAC on Oracle ACFS, you must first create the Oracle home directory in Oracle ACFS.</li>
</ul>
</div>
<div class="sect2"><a id="GUID-607A1355-1C63-4AD2-AF52-107E2EAF6A38"></a>
<h2 id="CWWIN-GUID-607A1355-1C63-4AD2-AF52-107E2EAF6A38" class="sect2"><span class="enumeration_section">6.1</span> Reviewing Oracle Grid Infrastructure Storage Options</h2>
<div>
<p>This section describes the supported storage options for Oracle Grid Infrastructure for a cluster, and for features running on Oracle Grid Infrastructure.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="storage.htm#GUID-3642D9D0-089E-49B7-8BD8-F4A46B543D14">Supported Storage Options for Oracle Grid Infrastructure and Oracle RAC</a></strong><br/>
Both Oracle Clusterware and the Oracle RAC database use files that must be available to all the nodes in the cluster. The following table shows the storage options supported for storing Oracle Clusterware and Oracle RAC files.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-A3E58C33-A1C3-445E-99DC-510832EEB457">General Storage Considerations for Oracle Grid Infrastructure</a></strong><br/>
Oracle Clusterware uses voting files to monitor cluster node status, and the Oracle Cluster Registry (OCR) is a file that contains the configuration information and status of the cluster. The installer automatically initializes the OCR during the Oracle Clusterware installation. Oracle Database Configuration Assistant (DBCA) uses the OCR for storing the configurations for the cluster databases that it creates.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-60CC5D8D-6738-43E3-A173-6ECAF5EF1097">General Storage Considerations for Oracle RAC</a></strong><br/>
For all Oracle RAC installations, you must choose the shared storage options to use for Oracle Database files. Oracle Database files include data files, control files, redo log files, the server parameter file, and the password file.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-FBBC00FC-435F-4B62-83BC-02F44E2DE6CE">About Oracle ACFS and Oracle ADVM</a></strong><br/>
Oracle Automatic Storage Management Cluster File System (Oracle ACFS) and Oracle ASM Dynamic Volume Manager (Oracle ADVM) are the main components of Oracle Cloud File System (Oracle CloudFS).</li>
</ul>
<div class="infoboxnotealso" id="GUID-607A1355-1C63-4AD2-AF52-107E2EAF6A38__GUID-FB0DE75C-05CA-4FDA-96BA-45ABDD108ACE">
<p class="notep1">See Also:</p>
The Certification page in My Oracle Support for the most current information about certified storage options: <a href="https://support.oracle.com/" target="_blank">https://support.oracle.com</a></div>
</div>
<div class="sect3"><a id="GUID-3642D9D0-089E-49B7-8BD8-F4A46B543D14"></a>
<h3 id="CWWIN-GUID-3642D9D0-089E-49B7-8BD8-F4A46B543D14" class="sect3"><span class="enumeration_section">6.1.1</span> Supported Storage Options for Oracle Grid Infrastructure and Oracle RAC</h3>
<div>
<p>Both Oracle Clusterware and the Oracle RAC database use files that must be available to all the nodes in the cluster. The following table shows the storage options supported for storing Oracle Clusterware and Oracle RAC files.</p>
<div class="tblformalwide" id="GUID-3642D9D0-089E-49B7-8BD8-F4A46B543D14__GUID-C36EC266-3CE9-40AF-8C6D-D5FE3BE7971B">
<p class="titleintable">Table 6-1 Supported Storage Options for Oracle Clusterware and Oracle RAC Files and Home Directories</p>
<table class="cellalignment5137" title="Supported Storage Options for Oracle Clusterware and Oracle RAC Files and Home Directories " summary="Storage options for Oracle software and files">
<thead>
<tr class="cellalignment5121">
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e205">Storage Option</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e208">OCR and Voting Files</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e211">Oracle Grid Infrastructure Home</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e214">Oracle RAC Home</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e217">Oracle RAC Database Files</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e220">Oracle Recovery Files</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e225" headers="d19568e205">
<p>Oracle Automatic Storage Management (Oracle ASM)</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e225 d19568e208">
<p>Yes</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e225 d19568e211">
<p>No</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e225 d19568e214">
<p>No</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e225 d19568e217">
<p>Yes</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e225 d19568e220">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e244" headers="d19568e205">
<p>Oracle Automatic Storage Management Cluster File System (Oracle ACFS)</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e244 d19568e208">
<p>No</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e244 d19568e211">
<p>No</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e244 d19568e214">
<p>Yes</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e244 d19568e217">
<p>Yes (Oracle Database 12<span class="italic">c</span> Release 12.1.0.2 and later)</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e244 d19568e220">
<p>Yes (Oracle Database 12<span class="italic">c</span> Release 12.1.0.2 and later)</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e269" headers="d19568e205">
<p>Direct NFS Client access to a certified network attached storage (NAS) filer</p>
<p><span class="bold">Note:</span> NFS or Direct NFS Client cannot be used for Oracle Clusterware files.</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e269 d19568e208">
<p>No</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e269 d19568e211">
<p>No</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e269 d19568e214">
<p>No</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e269 d19568e217">
<p>Yes</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e269 d19568e220">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e292" headers="d19568e205">
<p>Shared disk partitions (raw devices)</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e292 d19568e208">
<p>No</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e292 d19568e211">
<p>No</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e292 d19568e214">
<p>No</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e292 d19568e217">
<p>No</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e292 d19568e220">
<p>No</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e311" headers="d19568e205">
<p>Local file system (NTFS formatted disk)</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e311 d19568e208">
<p>No</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e311 d19568e211">
<p>Yes</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e311 d19568e214">
<p>Yes</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e311 d19568e217">
<p>No</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e311 d19568e220">
<p>No</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<div class="sect3"><a id="GUID-A3E58C33-A1C3-445E-99DC-510832EEB457"></a>
<h3 id="CWWIN-GUID-A3E58C33-A1C3-445E-99DC-510832EEB457" class="sect3"><span class="enumeration_section">6.1.2</span> General Storage Considerations for Oracle Grid Infrastructure</h3>
<div>
<p>Oracle Clusterware uses voting files to monitor cluster node status, and the Oracle Cluster Registry (OCR) is a file that contains the configuration information and status of the cluster. The installer automatically initializes the OCR during the Oracle Clusterware installation. Oracle Database Configuration Assistant (DBCA) uses the OCR for storing the configurations for the cluster databases that it creates.</p>
<p>Use the following guidelines when choosing storage options for the Oracle Clusterware files:</p>
<ul style="list-style-type: disc;">
<li>
<p>The Oracle Grid Infrastructure home (Grid home) cannot be stored on a shared file system; it must be installed on a local disk.</p>
</li>
<li>
<p>You can choose any combination of the supported storage options for each file type if you satisfy all requirements listed for the chosen storage options.</p>
</li>
<li>
<p>You can store Oracle Cluster Registry (OCR) and voting files in Oracle ASM disk groups. You can also store a backup of the OCR file in a disk group.</p>
<div class="infobox-note" id="GUID-A3E58C33-A1C3-445E-99DC-510832EEB457__GUID-A0B0C53B-33B9-4817-966B-0325EF9A03FF">
<p class="notep1">Note:</p>
<a class="olink UPGRD" target="_blank" href="../UPGRD/toc.htm"><span class="italic">Oracle Database Upgrade Guide</span></a> for information about how to prepare for upgrading an existing database</div>
</li>
<li>
<p>For a storage option to meet high availability requirements, the files stored on the disk must be protected by data redundancy, so that if one or more disks fail, then the data stored on the failed disks can be recovered. This redundancy can be provided externally using Redundant Array of Independent Disks (RAID) devices, or logical volumes on multiple physical devices and implement the stripe-and-mirror- everything methodology, also known as <span class="bold">SAME</span>.</p>
</li>
<li>
<p>If you do not have a RAID devices or logical volumes to provide redundancy, then you can create additional copies, or <span class="bold">mirrors</span>, of the files on different file systems. If you choose to mirror the files, then you must provide disk space for additional OCR files and at least two additional voting files.</p>
</li>
<li>
<p>Each OCR location should be placed on a different disk.</p>
</li>
<li>
<p>For voting files, ensure that each file does not share any hardware device or disk, or other single point of failure with the other voting files. Any node that does not have available to it an absolute majority of voting files (more than half, or a <span class="bold">quorum</span>) configured will be restarted.</p>
</li>
<li>
<p>If you do not have a storage option that provides external file redundancy, then you must use Oracle ASM, or configure at least three voting file locations to provide redundancy.</p>
</li>
<li>
<p>Except when using external redundancy, Oracle ASM mirrors all Oracle Clusterware files in separate failure groups within a disk group. A <span class="bold">quorum failure group</span>, a special type of failure group, contains mirror copies of voting files when voting files are stored in normal or high redundancy disk groups.</p>
</li>
</ul>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="storage.htm#GUID-7DB0370D-AF3A-4D3F-93A7-5BBB7676748D">Storage Requirements When Using Oracle ASM for Oracle Clusterware Files</a></strong><br/>
Be aware of the following requirements and recommendations when using Oracle ASM to store the Oracle Clusterware files:</li>
</ul>
</div>
<div class="sect4"><a id="GUID-7DB0370D-AF3A-4D3F-93A7-5BBB7676748D"></a>
<h4 id="CWWIN-GUID-7DB0370D-AF3A-4D3F-93A7-5BBB7676748D" class="sect4"><span class="enumeration_section">6.1.2.1</span> Storage Requirements When Using Oracle ASM for Oracle Clusterware Files</h4>
<div>
<p>Be aware of the following requirements and recommendations when using Oracle ASM to store the Oracle Clusterware files:</p>
<ul style="list-style-type: disc;">
<li>
<p>You can store Oracle Cluster Registry (OCR) and voting files in Oracle ASM disk groups. You can also store a backup of the OCR file in a disk group.</p>
</li>
<li>
<p>The Oracle ASM instance must be clustered and the disks available to all the nodes in the cluster. Any node that does not have access to an absolute majority of voting files (more than half) will be restarted.</p>
</li>
<li>
<p>To store the Oracle Clusterware files in an Oracle ASM disk group, the disk group compatibility must be at least 11.2.</p>
</li>
</ul>
<div class="infobox-note" id="GUID-7DB0370D-AF3A-4D3F-93A7-5BBB7676748D__GUID-C9BDE855-D059-4EA1-A885-15296C425D55">
<p class="notep1">Note:</p>
If you are upgrading an Oracle ASM installation, then see <a class="olink OSTMG02700" target="_blank" href="../OSTMG/GUID-FBB5AA72-5208-48E1-BD8D-0FD4C6876F34.htm#OSTMG02700"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for more information about disk group compatibility.</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-60CC5D8D-6738-43E3-A173-6ECAF5EF1097"></a>
<h3 id="CWWIN-GUID-60CC5D8D-6738-43E3-A173-6ECAF5EF1097" class="sect3"><span class="enumeration_section">6.1.3</span> General Storage Considerations for Oracle RAC</h3>
<div>
<p>For all Oracle RAC installations, you must choose the shared storage options to use for Oracle Database files. Oracle Database files include data files, control files, redo log files, the server parameter file, and the password file.</p>
<p>If you plan to configure automated backups, then you must also choose a shared storage option to use for recovery files (the fast recovery area). Oracle recommends that you choose Oracle ASM as the shared storage option for the database data files and recovery files. The shared storage option that you choose for recovery files can be the same as or different from the shared storage option that you choose for the data files.</p>
<p>If you do not use Oracle ASM, then Oracle recommends that you place the data files and the Fast Recovery Area in shared storage located outside of the Oracle home, in separate locations, so that a hardware failure does not affect availability.</p>
<p>Use the following guidelines when choosing storage options for the Oracle RAC files:</p>
<ul style="list-style-type: disc;">
<li>
<p>You can choose any combination of the supported storage options for each file type if you satisfy all requirements listed for the chosen storage options.</p>
</li>
<li>
<p>Oracle recommends that you choose Oracle ASM as the storage option for database and recovery files.</p>
</li>
<li>
<p>If you intend to use Oracle ASM with Oracle RAC, and you are configuring a new Oracle ASM instance, then your system must meet the following conditions:</p>
<ul style="list-style-type: disc;">
<li>
<p>All the nodes in the cluster must have Oracle Clusterware and Oracle ASM 12c Release 1 (12.1) installed as part of an Oracle Grid Infrastructure for a cluster installation.</p>
</li>
<li>
<p>Any existing Oracle ASM instance on any node in the cluster is shut down before installing Oracle RAC or creating the Oracle RAC database.</p>
</li>
</ul>
</li>
<li>
<p>For Standard Edition and Standard Edition 2 (SE2) Oracle RAC installations, Oracle ASM is the only supported shared storage option for database or recovery files. You must use Oracle ASM for the storage of Oracle RAC data files, online redo logs, archived redo logs, control files, server parameter file (SPFILE), and the fast recovery area.</p>
</li>
</ul>
</div>
</div>
<div class="sect3"><a id="GUID-FBBC00FC-435F-4B62-83BC-02F44E2DE6CE"></a>
<h3 id="CWWIN-GUID-FBBC00FC-435F-4B62-83BC-02F44E2DE6CE" class="sect3"><span class="enumeration_section">6.1.4</span> About Oracle ACFS and Oracle ADVM</h3>
<div>
<p>Oracle Automatic Storage Management Cluster File System (Oracle ACFS) and Oracle ASM Dynamic Volume Manager (Oracle ADVM) are the main components of Oracle Cloud File System (Oracle CloudFS).</p>
<p>Oracle ACFS extends Oracle ASM technology to support all your application data in both single instance and cluster configurations. Oracle ADVM provides volume management services and a standard disk device driver interface to clients. Oracle Automatic Storage Management Cluster File System communicates with Oracle ASM through the Oracle Automatic Storage Management Dynamic Volume Manager interface.</p>
<div class="infoboxnotealso" id="GUID-FBBC00FC-435F-4B62-83BC-02F44E2DE6CE__GUID-7CE64192-279F-4057-8D4F-FAE1EFD0A035">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p>My Oracle Support Note 1369107.1 for more information about platforms and releases that support Oracle ACFS and Oracle ADVM: <a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1369107.1" target="_blank">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1369107.1</a></p>
</li>
<li>
<p><span class="q">&#34;<a href="storage.htm#GUID-D1E153B7-3545-4D77-8890-46200B8A753C" title="Oracle Automatic Storage Management Cluster File System (Oracle ACFS) provides a general purpose file system. Oracle ACFS extends Oracle ASM technology to support all your application data in both single instance and cluster configurations.">Restrictions and Guidelines for Oracle ACFS</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-55191BB9-798B-4063-A2B5-215539761FF0"></a>
<h2 id="CWWIN-GUID-55191BB9-798B-4063-A2B5-215539761FF0" class="sect2"><span class="enumeration_section">6.2</span> Guidelines for Choosing a Shared Storage Option</h2>
<div>
<p>You can choose any combination of the supported shared storage options for each file type if you satisfy all requirements listed for the chosen storage option.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="storage.htm#GUID-4D4B068B-3698-4882-AF96-EA9307ED96DF">Guidelines for Using Oracle ASM Disk Groups for Storage</a></strong><br/>
During Oracle Grid Infrastructure installation, you can create one or two Oracle ASM disk groups. After the Oracle Grid Infrastructure installation, you can create additional disk groups using Oracle Automatic Storage Management Configuration Assistant (ASMCA), SQL*Plus, or Automatic Storage Management Command-Line Utility (ASMCMD).</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-EB22A198-C6C8-46B9-B674-BD83DD5B3101">Guidelines for Using Direct Network File System (NFS) with Oracle RAC</a></strong><br/>
Network-attached storage (NAS) systems use a network file system (NFS) to access data. You can store Oracle RAC data files and recovery files on a supported NAS server using Direct NFS Client.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-D1E153B7-3545-4D77-8890-46200B8A753C">Restrictions and Guidelines for Oracle ACFS</a></strong><br/>
Oracle Automatic Storage Management Cluster File System (Oracle ACFS) provides a general purpose file system. Oracle ACFS extends Oracle ASM technology to support all your application data in both single instance and cluster configurations.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-8A0C4932-A9B6-4B02-8B78-9D8D98768ECE">Guidelines for Placing Recovery Files on a File System</a></strong><br/>
If you choose to place the recovery files on a cluster file system, then use the following guidelines when deciding where to place them:</li>
</ul>
</div>
<div class="sect3"><a id="GUID-4D4B068B-3698-4882-AF96-EA9307ED96DF"></a>
<h3 id="CWWIN-GUID-4D4B068B-3698-4882-AF96-EA9307ED96DF" class="sect3"><span class="enumeration_section">6.2.1</span> Guidelines for Using Oracle ASM Disk Groups for Storage</h3>
<div>
<p>During Oracle Grid Infrastructure installation, you can create one or two Oracle ASM disk groups. After the Oracle Grid Infrastructure installation, you can create additional disk groups using Oracle Automatic Storage Management Configuration Assistant (ASMCA), SQL*Plus, or Automatic Storage Management Command-Line Utility (ASMCMD).</p>
<p>Note that with Oracle Database 11<span class="italic">g</span> Release 2 (11.2) and later releases, Oracle Database Configuration Assistant (DBCA) does not have the functionality to create disk groups for Oracle ASM.</p>
<p>If you choose to create a second disk group during Oracle Grid Infrastructure installation, then the second disk group stores the Grid Infrastructure Management Repository (GIMR) data files and Oracle Cluster Registry (OCR) backup files. It is strongly recommended that you store the OCR backup files in a different disk group from the disk group where you store OCR files. Storing OCR backups in a separate location is also advisable for performance, availability, sizing, and manageability of storage.</p>
<div class="infobox-note" id="GUID-4D4B068B-3698-4882-AF96-EA9307ED96DF__GUID-50DB2E8C-64B1-4F52-96E7-C2A024BADB19">
<p class="notep1">Note:</p>
You can choose the Grid Infrastructure Management Repository (GIMR) location at the time of installing Oracle Grid Infrastructure. You cannot migrate a Grid Infrastructure Management Repository (GIMR) from one disk group to another later.</div>
<p>If you install Oracle Database or Oracle RAC after you install Oracle Grid Infrastructure, then you can either use the same disk group for database files, OCR, and voting files, or you can use different disk groups. If you create multiple disk groups before installing Oracle RAC or before creating a database, then you can do one of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Place the data files in the same disk group as the Oracle Clusterware files.</p>
</li>
<li>
<p>Use the same Oracle ASM disk group for data files and recovery files.</p>
</li>
<li>
<p>Use different disk groups for each file type.</p>
</li>
</ul>
<p>If you create only one disk group for storage, then the OCR and voting files, database files, and recovery files are contained in the one disk group. If you create multiple disk groups for storage, then you can place files in different disk groups.</p>
<div class="infoboxnotealso" id="GUID-4D4B068B-3698-4882-AF96-EA9307ED96DF__GUID-D6C7C846-4B31-4CA2-A8FB-802A31E3C024">
<p class="notep1">See Also:</p>
<p><a class="olink OSTMG137" target="_blank" href="../OSTMG/GUID-C455CEB1-0FC3-4DF4-9CD4-25EFA4D2BE01.htm#OSTMG137"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for information about creating disk groups</p>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-EB22A198-C6C8-46B9-B674-BD83DD5B3101"></a>
<h3 id="CWWIN-GUID-EB22A198-C6C8-46B9-B674-BD83DD5B3101" class="sect3"><span class="enumeration_section">6.2.2</span> Guidelines for Using Direct Network File System (NFS) with Oracle RAC</h3>
<div>
<p>Network-attached storage (NAS) systems use a network file system (NFS) to access data. You can store Oracle RAC data files and recovery files on a supported NAS server using Direct NFS Client.</p>
<p>NFS file systems must be mounted and available over NFS mounts before you start the Oracle RAC installation. See your vendor documentation for NFS configuration and mounting information.</p>
<p>Note that the performance of Oracle Database software and the databases that use NFS storage depend on the performance of the network connection between the database server and the NAS device. For this reason, Oracle recommends that you connect the database server (or cluster node) to the NAS device using a private, dedicated, network connection, which should be Gigabit Ethernet or better.</p>
</div>
</div>
<div class="sect3"><a id="GUID-D1E153B7-3545-4D77-8890-46200B8A753C"></a>
<h3 id="CWWIN-GUID-D1E153B7-3545-4D77-8890-46200B8A753C" class="sect3"><span class="enumeration_section">6.2.3</span> Restrictions and Guidelines for Oracle ACFS</h3>
<div>
<p>Oracle Automatic Storage Management Cluster File System (Oracle ACFS) provides a general purpose file system. Oracle ACFS extends Oracle ASM technology to support all your application data in both single instance and cluster configurations.</p>
<p>You can place the Oracle home for Oracle Database 12<span class="italic">c</span> Release 1 (12.1) software on Oracle ACFS, but you cannot place Oracle Clusterware files on Oracle ACFS.</p>
<p>Note the following about Oracle ACFS:</p>
<ul style="list-style-type: disc;">
<li>
<p>You cannot place Oracle Clusterware executable files or shared files on Oracle ACFS.</p>
</li>
<li>
<p>You must use a domain user when installing Oracle Grid Infrastructure if you plan to use Oracle ACFS.</p>
</li>
<li>
<p>Starting with Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1) for a cluster, creating Oracle data files on an Oracle ACFS file system is supported.</p>
<p>You can put Oracle Database binaries and administrative files (for example, trace files) on Oracle ACFS.</p>
</li>
<li>
<p>Oracle ACFS does not support replication or encryption with Oracle Database data files, tablespace files, control files, and redo logs.</p>
</li>
<li>
<p>For policy-managed Oracle Flex Cluster databases, Oracle ACFS can run on Hub Nodes, but cannot run on Leaf Nodes. For this reason, Oracle RAC binaries cannot be placed on Oracle ACFS located on Leaf Nodes.</p>
</li>
<li>
<p>When creating Oracle ACFS file systems on Windows, log on as a Windows domain user. Also, when creating files in an Oracle ACFS file system on Windows, you should be logged in as a Windows domain user to ensure that the files are accessible by all nodes.</p>
<p>When using a file system across cluster nodes, the best practice is to mount the file system using a domain user, to ensure that the security identifier is the same across cluster nodes. Windows security identifiers, which are used in defining access rights to files and directories, use information which identifies the user. Local users are only known in the context of the local node. Oracle ACFS uses this information during the first file system mount to set the default access rights to the file system.</p>
</li>
<li>
<p>Oracle Restart does not support root-based Oracle Clusterware resources. For this reason, the following restrictions apply if you run Oracle ACFS on an Oracle Restart Configuration:</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle Restart does not support Oracle ACFS resources on all platforms.</p>
</li>
<li>
<p>Starting with Oracle Database 12<span class="italic">c</span>, Oracle Restart configurations do not support the Oracle ACFS registry.</p>
</li>
<li>
<p>You must manually load Oracle ACFS drivers after a system restart.</p>
</li>
<li>
<p>You must manually mount an Oracle ACFS file system, and unmount it after the Oracle ASM instance has finished running.</p>
</li>
<li>
<p>Creating Oracle data files on an Oracle ACFS file system is not supported in Oracle Restart configurations. Creating Oracle data files on an Oracle ACFS file system is supported on Oracle Grid Infrastructure for a Cluster configurations.</p>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="sect3"><a id="GUID-8A0C4932-A9B6-4B02-8B78-9D8D98768ECE"></a>
<h3 id="CWWIN-GUID-8A0C4932-A9B6-4B02-8B78-9D8D98768ECE" class="sect3"><span class="enumeration_section">6.2.4</span> Guidelines for Placing Recovery Files on a File System</h3>
<div>
<p>If you choose to place the recovery files on a cluster file system, then use the following guidelines when deciding where to place them:</p>
<ul style="list-style-type: disc;">
<li>
<p>To prevent disk failure from making the database files and the recovery files unavailable, place the recovery files on a cluster file system that is on a different physical disk from the database files.</p>
<div class="infobox-note" id="GUID-8A0C4932-A9B6-4B02-8B78-9D8D98768ECE__GUID-D12FAE66-9CB2-40D6-B6F3-D668A48BA23C">
<p class="notep1">Note:</p>
Alternatively use an Oracle ASM disk group with a normal or high redundancy level for data files, recovery files, or both file types, or use external redundancy.</div>
</li>
<li>
<p>The cluster file system that you choose should have at least 3 GB of free disk space.</p>
<p>The disk space requirement is the default disk quota configured for the fast recovery area (specified by the <code class="codeph">DB_RECOVERY_FILE_DEST_SIZE</code> initialization parameter).</p>
<p>If you choose the Advanced database configuration option, then you can specify a different disk quota value. After you create the database, you can also use Oracle Enterprise Manager to specify a different value.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-8A0C4932-A9B6-4B02-8B78-9D8D98768ECE__GUID-97E6BC03-7448-4DDE-A236-EC997067B76D">
<p class="notep1">See Also:</p>
<a class="olink BRADV89422" target="_blank" href="../BRADV/rcmconfb.htm#BRADV89422"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for more information about sizing the fast recovery area.</div>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-516E5E83-BC00-4C64-A204-F50CDB556F37"></a>
<h2 id="CWWIN-GUID-516E5E83-BC00-4C64-A204-F50CDB556F37" class="sect2"><span class="enumeration_section">6.3</span> Storage Requirements for Oracle Clusterware and Oracle RAC</h2>
<div>
<p>Each supported file system type has additional requirements that must be met to support Oracle Clusterware and Oracle RAC. Use the following sections to help you select your storage option.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="storage.htm#GUID-AD965744-02EE-4E83-8D89-7C1842539F46">Requirements for Using a Cluster File System for Oracle Database Files</a></strong><br/></li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706">Identifying Storage Requirements for Using Oracle ASM for Shared Storage</a></strong><br/>
Before installing Oracle Grid Infrastructure, you must identify and determine how many devices are available for use by Oracle ASM, the amount of free disk space available on each disk, and the redundancy level to use with Oracle ASM. When Oracle ASM provides redundancy, you must have sufficient capacity in each disk group to manage a re-creation of data that is lost after a failure of one or two failure groups.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-4356FDED-FD48-4620-BED1-E2ABEB822B62">Restrictions for Disk Partitions Used By Oracle ASM</a></strong><br/>
Be aware of the following restrictions when configuring disk partitions for use with Oracle ASM:</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-C4CDBC1C-D8BC-4B63-B6B3-6AD92EE9A1D1">Preparing Your System to Use Oracle ASM for Shared Storage</a></strong><br/>
To use Oracle ASM as the shared storage solution for Oracle Clusterware or Oracle RAC files, you must perform certain tasks before you begin the software installation.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-4404920E-D99B-400A-BD98-9E2D5D6A6EF0">Requirements for Using a Shared File System</a></strong><br/>
To use a shared file system for Oracle RAC, the file system must comply with the following requirements:</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-61FEC051-3B52-418A-9144-27597ED41462">Requirements for Files Managed by Oracle</a></strong><br/>
If you use Oracle ASM for your database files, then Oracle creates the database with Oracle Managed files by default. When using the Oracle Managed files feature, you need specify only the database object name instead of file names when creating or deleting database files.</li>
</ul>
</div>
<div class="sect3"><a id="GUID-AD965744-02EE-4E83-8D89-7C1842539F46"></a>
<h3 id="CWWIN-GUID-AD965744-02EE-4E83-8D89-7C1842539F46" class="sect3"><span class="enumeration_section">6.3.1</span> Requirements for Using a Cluster File System for Oracle Database Files</h3>
<div>
<p>If you choose to place your Oracle Database software or data files on a clustered file system, then one of the following should be true:</p>
<ul style="list-style-type: disc;">
<li>
<p>The disks used for the file system are on a highly available storage device, (for example, a RAID device).</p>
</li>
<li>
<p>You use at least two independent file systems, with the database files on one file system, and the recovery files on a different file system.</p>
</li>
</ul>
<p>The user account with which you perform the installation must be able to create the files in the path that you specify.</p>
<div class="infobox-note" id="GUID-AD965744-02EE-4E83-8D89-7C1842539F46__GUID-715352DE-36E8-49A2-BD85-49F293DE589C">
<p class="notep1">Note:</p>
On Windows platforms, the only supported method for storing Oracle Clusterware files is Oracle ASM.</div>
</div>
</div>
<div class="sect3"><a id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706"></a>
<h3 id="CWWIN-GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706" class="sect3"><span class="enumeration_section">6.3.2</span> Identifying Storage Requirements for Using Oracle ASM for Shared Storage</h3>
<div>
<p>Before installing Oracle Grid Infrastructure, you must identify and determine how many devices are available for use by Oracle ASM, the amount of free disk space available on each disk, and the redundancy level to use with Oracle ASM. When Oracle ASM provides redundancy, you must have sufficient capacity in each disk group to manage a re-creation of data that is lost after a failure of one or two failure groups.</p>
<div class="section">
<div class="infoboxnotealso" id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706__GUID-308BE25E-8C2B-43CF-BAC1-46A26C6D6572">
<p class="notep1">Tip:</p>
As you progress through the following steps, make a list of the raw device names you intend to use to create the Oracle ASM disk groups and have this information available during the Oracle Grid Infrastructure installation or when creating your Oracle RAC database.</div>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Determine whether you want to use Oracle ASM for Oracle Clusterware files (OCR and voting files), Oracle Database data files, recovery files, or all file types.</span>
<div>
<div class="infobox-note" id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706__GUID-92B17E05-78BA-47F7-A05C-02BA68BD9D52">
<p class="notep1">Note:</p>
<ul style="list-style-type: disc;">
<li>
<p>You do not have to use the same storage mechanism for data files and recovery files. You can store one type of file in a cluster file system while storing the other file type within Oracle ASM. If you plan to use Oracle ASM for both data files and recovery files, then you should create separate Oracle ASM disk groups for the data files and the recovery files.</p>
</li>
<li>
<p>There are two types of Oracle Clusterware files: OCR files and voting files. Each type of file can be stored on either Oracle ASM or a cluster file system. All the OCR files or all the voting files must use the same type of storage. You cannot have some OCR files stored in Oracle ASM and other OCR files in a cluster file system. However, you can use one type of storage for the OCR files and a different type of storage for the voting files if all files of each type use the same type of storage.</p>
</li>
</ul>
</div>
</div>
</li>
<li class="stepexpand"><span>Choose the Oracle ASM redundancy level to use for the Oracle ASM disk group.</span>
<div>
<p>The redundancy level that you choose for the Oracle ASM disk group determines how Oracle ASM mirrors files in the disk group, and determines the number of disks and amount of disk space that you require. If the voting files are in a disk group, then the disk groups that contain Oracle Clusterware files (OCR and voting files) have a higher minimum number of failure groups than other disk groups because the voting files are stored in quorum failure groups.</p>
<p>A <span class="bold">quorum failure group</span> is a special type of failure group that stores the Oracle Clusterware voting files. The quorum failure group ensures that a quorum of the specified failure groups are available. When Oracle ASM mounts a disk group that contains Oracle Clusterware files, the quorum failure group determines if the disk group can be mounted in the event of the loss of one or more failure groups. Disks in the quorum failure group do not contain user data, therefore a quorum failure group is not considered when determining redundancy requirements in respect to storing user data.</p>
<p>The redundancy levels are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>External redundancy</p>
<p>An external redundancy disk group requires a minimum of one disk device. The effective disk space in an external redundancy disk group is the sum of the disk space in all of its devices.</p>
<p>Because Oracle ASM does not mirror data in an external redundancy disk group, Oracle recommends that you use external redundancy with storage devices such as RAID, or other similar devices that provide their own data protection mechanisms.</p>
</li>
<li>
<p>Normal redundancy</p>
<p>A normal redundancy disk group requires a minimum of two disk devices (or two failure groups). The effective disk space in a normal redundancy disk group is <span class="italic">half</span> the sum of the disk space in all of its devices.</p>
<p>For Oracle Clusterware files, a normal redundancy disk group requires a minimum of three disk devices (failure groups use two of the three disks and the quorum failure group uses all three disks) and provides three voting files and one OCR and mirror of the OCR. When using a normal redundancy disk group, the cluster can survive the loss of one failure group.</p>
<p>For most installations, Oracle recommends that you select normal redundancy disk groups.</p>
</li>
<li>
<p>High redundancy</p>
<p>In a high redundancy disk group, Oracle ASM uses three-way mirroring to increase performance and provide the highest level of reliability. A high redundancy disk group requires a minimum of three disk devices (or three failure groups). The effective disk space in a high redundancy disk group is <span class="italic">one-third</span> the sum of the disk space in all of its devices.</p>
<p>For Oracle Clusterware files, a high redundancy disk group requires a minimum of five disk devices (failure groups use three of the five disks and the quorum failure group uses all five disks) and provides five voting files and one OCR and two mirrors of the OCR. With high redundancy, the cluster can survive the loss of two failure groups.</p>
<p>While high redundancy disk groups provide a high level of data protection, you should consider the greater cost of additional storage devices before deciding to use this redundancy level.</p>
<div class="infobox-note" id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706__GUID-3DEAA7FC-5E20-4839-9EF2-1DE1B901DC7B">
<p class="notep1">Note:</p>
After a disk group is created, you cannot alter the redundancy level of the disk group.</div>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Determine the total amount of disk space that you require for the Oracle Clusterware files using Oracle ASM for shared storage.</span>
<div>
<p>Use the following table to determine the minimum number of disks and the minimum disk space requirements for installing Oracle Clusterware using Oracle ASM for shared storage:</p>
<div class="tblformalwide" id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706__GUID-2DFF8DD5-9AC9-4E1A-8051-016251463E6D">
<p class="titleintable">Table 6-2 Oracle Clusterware Storage Required by Redundancy Type</p>
<table class="cellalignment5142" title="Oracle Clusterware Storage Required by Redundancy Type" summary="This table lists the disk space requirements for external, normal and high redundancy.">
<thead>
<tr class="cellalignment5121">
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e1190">Redundancy Level</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e1193">Minimum Number of Disks</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e1196">Oracle Cluster Registry (OCR) Files</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e1199">Voting Files</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e1202">Both File Types</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e1205">Total</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e1210" headers="d19568e1190">
<p>External</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1210 d19568e1193">
<p>1</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1210 d19568e1196">
<p>400 MB</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1210 d19568e1199">
<p>300 MB</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1210 d19568e1202">
<p>700 MB</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1210 d19568e1205">
<p>At least 5.9 GB for a cluster with 4 nodes or less (5.2 GB<a id="fn_1" href="#fn_1" onclick="footdisplay(1,&#34;The size of the Grid Infrastructure Management Repository for Oracle Clusterware 12.1.0.2 is 5.2 GB. For Oracle Clusterware 12.1.0.1, the size is 4.5 GB.&#34;)"><sup>Foot&nbsp;1</sup></a> + 400 MB + 300 MB).</p>
<p>Additional space required for clusters with 5 or more nodes. For example, a six-node cluster allocation should be at least 6.9 GB:</p>
<p>(5.2 GB + 2*(500 MB) +</p>
<p>400 MB + 300 MB).</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e1238" headers="d19568e1190">
<p>Normal</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1238 d19568e1193">
<p>3</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1238 d19568e1196">
<p>At least 400 MB for each failure group, or 800 MB</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1238 d19568e1199">
<p>At least 300 MB for each voting file, or 900MB</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1238 d19568e1202">
<p>1.7 GB</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1238 d19568e1205">
<p>At least 12.1 GB for a cluster with 4 nodes or less (10.4 GB + 2*400 MB + 3*300 MB).</p>
<p>Additional space required for clusters with 5 or more nodes. For example, for a six-node cluster allocation should be at least 14.1 GB:</p>
<p>(2 * (5.2 GB + 2*(500 MB)) +</p>
<p>(2 * 400 MB) + (3 * 300 MB)).</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e1263" headers="d19568e1190">
<p>High</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1263 d19568e1193">
<p>5</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1263 d19568e1196">
<p>At least 400 MB for each failure group, or 1.2 GB</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1263 d19568e1199">
<p>At least 300 MB for each voting file, or 1.5 GB</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1263 d19568e1202">
<p>2.7 GB</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1263 d19568e1205">
<p>At least 18.3 GB for a cluster with 4 nodes or less (3* 5.2 GB + 3*400 MB + 5*300 MB).</p>
<p>Additional space required for clusters with 5 or more nodes. For example, for a six-node cluster allocation should be at least 21.3 GB:</p>
<p>(3* (5.2 GB + 2*(500 MB))+</p>
<p>(3 * 400 MB) + (5 * 300 MB)).</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1</sup> The size of the Grid Infrastructure Management Repository for Oracle Clusterware 12.1.0.2 is 5.2 GB. For Oracle Clusterware 12.1.0.1, the size is 4.5 GB.</p>
<div class="infobox-note" id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706__GUID-E594A0CE-8842-4826-9BD8-8507E3866E16">
<p class="notep1">Note:</p>
<p>If the voting files are in a disk group, then the disk groups that contain Oracle Clusterware files (OCR and voting files) have a higher minimum number of failure groups than other disk groups.</p>
<p>If you create a disk group for the OCR and voting files as part of the installation, then the installer requires that you create these files on a disk group with at least 2 GB of available space.</p>
</div>
<p>To ensure high availability of Oracle Clusterware files on Oracle ASM, you must have at least 2 GB of disk space for Oracle Clusterware files in three separate failure groups, with at least three physical disks. Each disk must have at least 1 GB of capacity to ensure that there is sufficient space to create Oracle Clusterware files.</p>
</div>
</li>
<li class="stepexpand"><span>Determine an allocation unit size.</span>
<div>Every Oracle ASM disk is divided into allocation units (AU). An <span class="bold">allocation unit</span> is the fundamental unit of allocation within a disk group. You can select the AU Size value from 1, 2, 4, 8, 16, 32 or 64 MB, depending on the specific disk group compatibility level. The default value is set to 1 MB.</div>
</li>
<li class="stepexpand"><span>For Oracle Clusterware installations, you must also add additional disk space for the Oracle ASM metadata.</span>
<div>For Oracle Clusterware installations, you must also add additional disk space for the Oracle ASM metadata. You can use the following formula to calculate the disk space requirements (in MB) for OCR and voting files, and the Oracle ASM metadata:
<pre dir="ltr">total = [2 * <span class="variable">ausize</span> * <span class="variable">disks</span>] + [<span class="variable">redundancy</span> * (<span class="variable">ausize</span> * (<span class="variable">nodes</span> * (<span class="variable">clients</span> + 1)
 + 30) + (64 * <span class="variable">nodes</span>) + 533)]
</pre>
<p>Where:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="variable">redundancy</span> = Number of mirrors: external = 1, normal = 2, high = 3</p>
</li>
<li>
<p><span class="variable">ausize</span> = Metadata AU size in megabytes (default is 1 MB)</p>
</li>
<li>
<p><span class="variable">nodes</span> = Number of nodes in cluster</p>
</li>
<li>
<p><span class="variable">clients</span> = Number of database instances for each node</p>
</li>
<li>
<p><span class="variable">disks</span> = Number of disks in disk group</p>
</li>
</ul>
<p>For example, for a four-node Oracle RAC installation, using three disks in a normal redundancy disk group, and a default AU size of 1 MB, you require an additional 1684 MB of space:</p>
<pre dir="ltr">[2 * 1 * 3] + [2 * (1 * (4 * (4 + 1)+ 30)+ (64* 4)+ 533)] = 1684 MB
</pre></div>
<div>
<p>To ensure high availability of Oracle Clusterware files on Oracle ASM, for a normal redundancy disk group, you must have at least 2 GB of disk space for Oracle Clusterware files in three separate failure groups, with at least three physical disks. Each disk must have at least 2.1 GB of capacity, with total capacity of at least 6.3 GB for three disks, to ensure that the effective disk space to create Oracle Clusterware files is 2 GB.</p>
</div>
</li>
<li class="stepexpand"><span>Determine the total amount of disk space that you require for the Oracle database files and recovery files.</span>
<div>Use the following table to determine the minimum number of disks and the minimum disk space requirements for installing the starter database:
<div class="tblformal" id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706__GUID-BCE46A21-CEB8-4696-8A60-7AF7013DCFE4">
<p class="titleintable">Table 6-3 Total Oracle Database Storage Space Required by Redundancy Type</p>
<table class="cellalignment5132" title="Total Oracle Database Storage Space Required by Redundancy Type" summary="Database disk space requirements">
<thead>
<tr class="cellalignment5121">
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e1384">Redundancy Level</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e1387">Minimum Number of Disks</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e1390">Database Files</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e1393">Recovery Files</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e1396">Both File Types</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e1401" headers="d19568e1384">
<p>External</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1401 d19568e1387">
<p>1</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1401 d19568e1390">
<p>1.5 GB</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1401 d19568e1393">
<p>3 GB</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1401 d19568e1396">
<p>4.5 GB</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e1417" headers="d19568e1384">
<p>Normal</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1417 d19568e1387">
<p>2</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1417 d19568e1390">
<p>3 GB</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1417 d19568e1393">
<p>6 GB</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1417 d19568e1396">
<p>9 GB</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e1433" headers="d19568e1384">
<p>High</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1433 d19568e1387">
<p>3</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1433 d19568e1390">
<p>4.5 GB</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1433 d19568e1393">
<p>9 GB</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1433 d19568e1396">
<p>13.5 GB</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-note" id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706__GUID-169B57DD-073E-4FE8-8720-449420FC7813">
<p class="notep1">Note:</p>
The file sizes listed in the previous table are estimates of minimum requirements for a new installation (or a database without any user data). The file sizes for your database will be larger.</div>
</div>
</li>
<li class="stepexpand"><span>Determine if you can use an existing disk group.</span>
<div>If an Oracle ASM instance currently exists on the system, then you can use an existing disk group to meet these storage requirements. If necessary, you can add disks to an existing disk group during the installation. See <span class="q">&#34;<a href="storage.htm#GUID-109D2E0C-3A7B-4753-A4D8-924C4FA1511F" title="To use Oracle ASM as the storage option for either database or recovery files, you must use an existing Oracle ASM disk group, or use ASMCA to create the necessary disk groups before installing Oracle Database 12c Release 1 (12.1) and creating an Oracle RAC database.">Identifying Existing Oracle ASM Disk Groups to Use</a>&#34;</span> for more information about using an existing disk group.</div>
</li>
<li class="stepexpand"><span>If there is no existing Oracle ASM disk group to use, then create one or more Oracle ASM disk groups, as needed, before installing Oracle RAC.</span>
<div>See <span class="q">&#34;<a href="storage.htm#GUID-326E31F7-3791-42EF-90E7-6845CFA9BD79" title="If you are sure that a suitable disk group does not exist on the system, then install or identify appropriate disk devices to add to a new disk group.">Selecting Disks to use with Oracle ASM Disk Groups</a>&#34;</span> for more information about selecting disks to use in a disk group.</div>
</li>
<li class="stepexpand"><span>Optionally, identify failure groups for the Oracle ASM disk group devices.</span>
<div>
<div class="infobox-note" id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706__GUID-8015694E-2118-446E-BFBE-D60F1A7966EC">
<p class="notep1">Note:</p>
You only have to complete this step if you plan to use an installation method that includes configuring Oracle ASM disk groups before installing Oracle RAC, or creating an Oracle RAC database.</div>
<p>If you intend to use a normal or high redundancy disk group, then you can further protect your database against hardware failure by associating a set of disk devices in a custom failure group. <span class="bold">Failure groups</span> define Oracle ASM disks that share a common potential failure mechanism. By default, each device comprises its own failure group. If you choose to define custom failure groups, then note the following:</p>
<p>You must specify a minimum of two failure groups for normal redundancy disk groups and three failure groups for high redundancy disk groups.</p>
<p>If the disk group contains data files and Oracle Clusterware files, including the voting files, then you must specify a minimum of three failure groups for normal redundancy disk groups and five failure groups for high redundancy disk groups.</p>
<p>Disk groups containing voting files must have at least three failure groups for normal redundancy or at least five failure groups for high redundancy. If the disk group does not contain the voting files, then the minimum number of required failure groups is two for normal redundancy and three for high redundancy. The minimum number of failure groups applies whether or not they are custom failure groups.</p>
<p>If two disk devices in a normal redundancy disk group are attached to the same small computer system interface (SCSI) controller, then the disk group becomes unavailable if the controller fails. The SCSI controller in this example is a single point of failure. To protect against failures of this type, you could use two SCSI controllers, each with two disks, and define a failure group for the disks attached to each controller. This configuration enables the disk group to tolerate the failure of one SCSI controller.</p>
<div class="infobox-note" id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706__GUID-A4BEB879-FE95-4870-85B0-7563B9030067">
<p class="notep1">Note:</p>
You can define custom failure groups after installation of Oracle Grid Infrastructure using the GUI tool ASMCA, the command-line tool <code class="codeph">asmcmd</code>, or SQL*Plus commands.</div>
</div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706__GUID-88F23859-C7E5-4F3D-9AF8-4DE71F1DDBAC">
<p class="notep1">See Also:</p>
<a class="olink OSTMG" target="_blank" href="../OSTMG/toc.htm"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for more information about Oracle ASM failure groups</div>
</div>
<!-- class="section" --></div>
</div>
<div class="sect3"><a id="GUID-4356FDED-FD48-4620-BED1-E2ABEB822B62"></a>
<h3 id="CWWIN-GUID-4356FDED-FD48-4620-BED1-E2ABEB822B62" class="sect3"><span class="enumeration_section">6.3.3</span> Restrictions for Disk Partitions Used By Oracle ASM</h3>
<div>
<p>Be aware of the following restrictions when configuring disk partitions for use with Oracle ASM:</p>
<ul style="list-style-type: disc;">
<li>
<p>With x64 Windows, you can create up to 128 primary partitions for each disk.</p>
</li>
<li>
<p>Oracle recommends that you limit the number of partitions you create on a single disk to prevent disk contention. Therefore, you may prefer to use extended partitions rather than primary partitions.</p>
</li>
</ul>
</div>
</div>
<div class="sect3"><a id="GUID-C4CDBC1C-D8BC-4B63-B6B3-6AD92EE9A1D1"></a>
<h3 id="CWWIN-GUID-C4CDBC1C-D8BC-4B63-B6B3-6AD92EE9A1D1" class="sect3"><span class="enumeration_section">6.3.4</span> Preparing Your System to Use Oracle ASM for Shared Storage</h3>
<div>
<p>To use Oracle ASM as the shared storage solution for Oracle Clusterware or Oracle RAC files, you must perform certain tasks before you begin the software installation.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="storage.htm#GUID-109D2E0C-3A7B-4753-A4D8-924C4FA1511F">Identifying Existing Oracle ASM Disk Groups to Use</a></strong><br/>
To use Oracle ASM as the storage option for either database or recovery files, you must use an existing Oracle ASM disk group, or use ASMCA to create the necessary disk groups before installing Oracle Database 12<span class="italic">c</span> Release 1 (12.1) and creating an Oracle RAC database.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-326E31F7-3791-42EF-90E7-6845CFA9BD79">Selecting Disks to use with Oracle ASM Disk Groups</a></strong><br/>
If you are sure that a suitable disk group does not exist on the system, then install or identify appropriate disk devices to add to a new disk group.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-573F1774-C532-4ADD-87DC-45892A07152D">Specifying the Oracle ASM Disk Discovery String</a></strong><br/>
When an Oracle ASM instance is initialized, Oracle ASM discovers and examines the contents of all of the disks that are in the paths that you designated with values in the <code class="codeph">ASM_DISKSTRING</code> initialization parameter.</li>
</ul>
</div>
<div class="sect4"><a id="GUID-109D2E0C-3A7B-4753-A4D8-924C4FA1511F"></a>
<h4 id="CWWIN-GUID-109D2E0C-3A7B-4753-A4D8-924C4FA1511F" class="sect4"><span class="enumeration_section">6.3.4.1</span> Identifying Existing Oracle ASM Disk Groups to Use</h4>
<div>
<p>To use Oracle ASM as the storage option for either database or recovery files, you must use an existing Oracle ASM disk group, or use ASMCA to create the necessary disk groups before installing Oracle Database 12<span class="italic">c</span> Release 1 (12.1) and creating an Oracle RAC database.</p>
<div class="section">To determine if an Oracle ASM disk group currently exists, or to determine whether there is sufficient disk space in an existing disk group, the Oracle ASM command line tool (<code class="codeph">asmcmd</code>), or Oracle Enterprise Manager Cloud Control. Alternatively, you can use the following procedure:</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>In the <span class="bold">Services</span> Control Panel, ensure that the <code class="codeph">OracleASMService+ASM<span class="variable">n</span></code> service, where <span class="variable">n</span> is the node number, has started.</span></li>
<li class="stepexpand"><span>Open a Windows command prompt and temporarily set the <code class="codeph">ORACLE_SID</code> environment variable to specify the appropriate value for the Oracle ASM instance to use.</span>
<div>
<p>For example, if the Oracle ASM system identifier (SID) is named <code class="codeph">+ASM1</code>, then enter a setting similar to the following:</p>
<pre dir="ltr">C:\&gt; set ORACLE_SID=+ASM1
</pre></div>
</li>
<li class="stepexpand"><span>If the <code class="codeph">ORACLE_HOME</code> environment variable is not set to the Grid home, then temporarily set this variable to the location of the Grid home using a command similar to the following:</span>
<div>
<pre dir="ltr">C:\&gt; set ORACLE_HOME=C:\app\12.1.0\grid
</pre></div>
</li>
<li class="stepexpand"><span>Use ASMCMD to connect to the Oracle ASM instance and start the instance if necessary with a command similar to the following:</span>
<div>
<pre dir="ltr">C:\&gt;%ORACLE_HOME%\bin\asmcmd
ASMCMD&gt; startup
</pre></div>
</li>
<li class="stepexpand"><span>Enter one of the following commands to view the existing disk groups, their redundancy level, and the amount of free disk space in each disk group:</span>
<div>
<pre dir="ltr">ASMCMD&gt; lsdg
</pre>
<p>or:</p>
<pre dir="ltr">C:\&gt; %ORACLE_HOME%\bin\asmcmd -p lsdg
</pre></div>
</li>
<li class="stepexpand"><span>From the output, identify a disk group with the appropriate redundancy level and note the free space that it contains.</span></li>
<li class="stepexpand"><span>If necessary, install, or identify the additional disk devices required to meet the storage requirements listed in the previous section.</span>
<div>
<div class="infobox-note" id="GUID-109D2E0C-3A7B-4753-A4D8-924C4FA1511F__GUID-D9822DDA-1917-4D92-A68E-42757AFC40A1">
<p class="notep1">Note:</p>
If you are adding devices to an existing disk group, then Oracle recommends that you use devices that have the same size and performance characteristics as the existing devices in that disk group.</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4"><a id="GUID-326E31F7-3791-42EF-90E7-6845CFA9BD79"></a>
<h4 id="CWWIN-GUID-326E31F7-3791-42EF-90E7-6845CFA9BD79" class="sect4"><span class="enumeration_section">6.3.4.2</span> Selecting Disks to use with Oracle ASM Disk Groups</h4>
<div>
<p>If you are sure that a suitable disk group does not exist on the system, then install or identify appropriate disk devices to add to a new disk group.</p>
<p>Use the following guidelines when identifying appropriate disk devices:</p>
<ul style="list-style-type: disc;">
<li>
<p>All of the devices in an Oracle ASM disk group should be the same size and have the same performance characteristics.</p>
</li>
<li>
<p>Do not specify multiple partitions on a single physical disk as a disk group device. Oracle ASM expects each disk group device to be on a separate physical disk.</p>
</li>
<li>
<p>Nonshared logical partitions are not supported with Oracle RAC. To use logical partitions for your Oracle RAC database, you must use shared logical volumes created by a logical volume manager such as <code class="codeph">diskpart.msc</code>.</p>
</li>
<li>
<p>Although you can specify a logical volume as a device in an Oracle ASM disk group, Oracle does not recommend their use because it adds a layer of complexity that is unnecessary with Oracle ASM. In addition, Oracle RAC requires a cluster logical volume manager in case you decide to use a logical volume with Oracle ASM and Oracle RAC.</p>
</li>
</ul>
</div>
<div>
<div class="relinfo">
<p><strong>Related Topics</strong></p>
<ul>
<li><a href="storage.htm#GUID-1192509E-CE51-4BA8-BECC-51D4A8B45CBA">Preliminary Shared Disk Preparation</a></li>
<li><a href="storage.htm#GUID-8297B30F-E074-4384-A941-94B63B7360D3">Configuring Disk Partitions on Shared Storage</a></li>
</ul>
</div>
</div>
</div>
<div class="sect4"><a id="GUID-573F1774-C532-4ADD-87DC-45892A07152D"></a>
<h4 id="CWWIN-GUID-573F1774-C532-4ADD-87DC-45892A07152D" class="sect4"><span class="enumeration_section">6.3.4.3</span> Specifying the Oracle ASM Disk Discovery String</h4>
<div>
<p>When an Oracle ASM instance is initialized, Oracle ASM discovers and examines the contents of all of the disks that are in the paths that you designated with values in the <code class="codeph">ASM_DISKSTRING</code> initialization parameter.</p>
<p>The value for the <code class="codeph">ASM_DISKSTRING</code> initialization parameter is an operating system&ndash;dependent value that Oracle ASM uses to limit the set of paths that the discovery process uses to search for disks. The exact syntax of a discovery string depends on the platform, ASMLib libraries, and whether Oracle Exadata disks are used. The path names that an operating system accepts are always usable as discovery strings.</p>
<p>The default value of <code class="codeph">ASM_DISKSTRING</code> might not find all disks in all situations. If your site is using a third-party vendor ASMLib, then the vendor might have discovery string conventions that you must use for <code class="codeph">ASM_DISKSTRING</code>. In addition, if your installation uses multipathing software, then the software might place pseudo-devices in a path that is different from the operating system default.</p>
<div class="infoboxnotealso" id="GUID-573F1774-C532-4ADD-87DC-45892A07152D__GUID-DAFFDA1E-A304-40DC-90DD-FACAB068B76E">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink OSTMG10142" target="_blank" href="../OSTMG/GUID-03BD4335-FEF9-4147-B8E4-E63F2D80F863.htm#OSTMG10142"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for more information about the initialization parameter <code class="codeph">ASM_DISKSTRING</code></p>
</li>
<li>
<p>See &#34;Oracle ASM and Multipathing&#34; in <a class="olink OSTMG02500" target="_blank" href="../OSTMG/GUID-DA8FBBB8-9831-44D1-AA41-5890B829CAEE.htm#OSTMG02500"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for information about configuring Oracle ASM to work with multipathing, and consult your multipathing vendor documentation for details.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-4404920E-D99B-400A-BD98-9E2D5D6A6EF0"></a>
<h3 id="CWWIN-GUID-4404920E-D99B-400A-BD98-9E2D5D6A6EF0" class="sect3"><span class="enumeration_section">6.3.5</span> Requirements for Using a Shared File System</h3>
<div>
<p>To use a shared file system for Oracle RAC, the file system must comply with the following requirements:</p>
<ul style="list-style-type: disc;">
<li>
<p>To use NFS, it must be on a certified network attached storage (NAS) device. Access the My Oracle Support website as described in <span class="q">&#34;<a href="prewin.htm#GUID-1B481D17-3295-4140-885B-3D8C0CB1F175" title="The My Oracle Support website also provides compatible client and database releases, patches, and workaround information for bugs.">Checking Hardware and Software Certification on My Oracle Support</a>&#34;</span> to find a list of certified NAS devices.</p>
</li>
<li>
<p>If placing the Oracle RAC data files on a shared file system, then one of the following should be true:</p>
<ul style="list-style-type: disc;">
<li>
<p>The disks used for the file system are on a highly available storage device, (for example, a RAID device).</p>
</li>
<li>
<p>The file systems consist of at least two independent file systems, with the data files on one file system, and the recovery files on a different file system.</p>
</li>
</ul>
</li>
<li>
<p>The user account with which you perform the installation must be able to create the files in the path that you specify for the shared storage.</p>
</li>
</ul>
<div class="infobox-note" id="GUID-4404920E-D99B-400A-BD98-9E2D5D6A6EF0__GUID-76FE23D9-6E6E-4359-84B8-D6E9D283FC78">
<p class="notep1">Note:</p>
<p>If you are upgrading Oracle Clusterware, and your existing cluster uses 100 MB OCR and 20 MB voting file partitions, then you must extend these partitions to at least 300 MB. Oracle recommends that you do not use partitions, but instead place OCR and voting files in Oracle ASM disk groups marked as QUORUM disk groups.</p>
<p>All storage products must be supported by both your server and storage vendors.</p>
</div>
<p>Use the following table to determine the minimum size for shared file systems:</p>
<div class="tblformal" id="GUID-4404920E-D99B-400A-BD98-9E2D5D6A6EF0__GUID-AC1DB28C-6075-4D66-9692-27C4EC444F11">
<p class="titleintable">Table 6-4 Oracle RAC Shared File System Volume Size Requirements</p>
<table class="cellalignment5132" title="Oracle RAC Shared File System Volume Size Requirements" summary="Lists minimum partition sizes for shared file systems for Oracle Clusterware, including minimum sizes for database files if these are also stored on shared file system partitions.">
<thead>
<tr class="cellalignment5121">
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e1857">File Types Stored</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e1860">Number of Volumes</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e1863">Volume Size</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e1868" headers="d19568e1857">
<p>Oracle Database data files</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1868 d19568e1860">
<p>1</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1868 d19568e1863">
<p>At least 1.5 GB for each volume</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e1878" headers="d19568e1857">
<p>Recovery files</p>
<p><span class="bold">Note</span>: Recovery files must be on a different volume than database files</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1878 d19568e1860">
<p>1</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e1878 d19568e1863">
<p>At least 2 GB for each volume</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>The total required volume size is cumulative. For example, if you use one volume for data files and one volume for recovery files, then you should have at least 3.5 GB of available storage over two volumes.</p>
</div>
</div>
<div class="sect3"><a id="GUID-61FEC051-3B52-418A-9144-27597ED41462"></a>
<h3 id="CWWIN-GUID-61FEC051-3B52-418A-9144-27597ED41462" class="sect3"><span class="enumeration_section">6.3.6</span> Requirements for Files Managed by Oracle</h3>
<div>
<p>If you use Oracle ASM for your database files, then Oracle creates the database with Oracle Managed files by default. When using the Oracle Managed files feature, you need specify only the database object name instead of file names when creating or deleting database files.</p>
<p>Configuration procedures are required to enable Oracle Managed Files.</p>
<div class="infoboxnotealso" id="GUID-61FEC051-3B52-418A-9144-27597ED41462__GUID-19F6101C-0FB8-4059-9FCA-38DCDA186732">
<p class="notep1">See Also:</p>
<span class="q">&#34;Using Oracle-Managed Files&#34;</span> in <a class="olink ADMIN" target="_blank" href="../ADMIN/toc.htm"><span class="italic">Oracle Database Administrator&rsquo;s Guide</span></a>.</div>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-38408606-CD90-4FE2-9E99-AD67E7C211E7"></a>
<h2 id="CWWIN-GUID-38408606-CD90-4FE2-9E99-AD67E7C211E7" class="sect2"><span class="enumeration_section">6.4</span> After You Have Selected the Shared Storage Options</h2>
<div>
<p>When you have determined your disk storage options, you then start the configuration. The exact steps to perform depend on the type of shared storage you use.</p>
<ol>
<li><span>First perform the steps listed in the section <span class="q">&#34;<a href="storage.htm#GUID-1192509E-CE51-4BA8-BECC-51D4A8B45CBA" title="When using shared storage on a Windows platform, there are additional preinstallation tasks to complete.">Preliminary Shared Disk Preparation</a>.&#34;</span></span></li>
<li><span>Configure the shared storage:</span>
<ul>
<li><span class="bold">To use Oracle ASM</span>, refer to <span class="q">&#34;<a href="storage.htm#GUID-3F9AAD1E-5FBA-45D5-B94C-BFEFCBBF8971" title="The installer does not suggest a default location for the OCR or the voting file. If you choose to create these files on Oracle ASM, then you must first create and configure disk partitions to be used in the Oracle ASM disk group.">Configuring Shared Storage for Oracle ASM</a>&#34;</span>.</li>
<li><span class="bold">To use a file system</span>, refer to <span class="q">&#34;<a href="storage.htm#GUID-8297B30F-E074-4384-A941-94B63B7360D3" title="To create disk partitions, use the disk administration tools provided by the operating system or third party vendors. You can create the disk partitions using either the Disk Management Interface or the DiskPart utility, both of which are provided by the operating system.">Configuring Disk Partitions on Shared Storage</a>&#34;</span>.</li>
</ul>
</li>
</ol>
</div>
</div>
<div class="sect2"><a id="GUID-1192509E-CE51-4BA8-BECC-51D4A8B45CBA"></a>
<h2 id="CWWIN-GUID-1192509E-CE51-4BA8-BECC-51D4A8B45CBA" class="sect2"><span class="enumeration_section">6.5</span> Preliminary Shared Disk Preparation</h2>
<div>
<p>When using shared storage on a Windows platform, there are additional preinstallation tasks to complete.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="storage.htm#GUID-17FF487A-61E0-4A91-82C4-F8AC9DD1A389">Disabling Write Caching</a></strong><br/>
You must disable write caching on all disks that will be used to share data between the nodes in your cluster.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-6C50678D-7A2C-43F8-9A56-9D85DBE40795">Enabling Automounting for Windows</a></strong><br/>
Even though the automount feature is enabled by default, you should verify that automount is enabled.</li>
</ul>
</div>
<div class="sect3"><a id="GUID-17FF487A-61E0-4A91-82C4-F8AC9DD1A389"></a>
<h3 id="CWWIN-GUID-17FF487A-61E0-4A91-82C4-F8AC9DD1A389" class="sect3"><span class="enumeration_section">6.5.1</span> Disabling Write Caching</h3>
<div>
<p>You must disable write caching on all disks that will be used to share data between the nodes in your cluster.</p>
<ol>
<li><span>Click <span class="bold">Start</span>, then select <span class="bold">Control Panel</span>, then <span class="bold">Administrative Tools</span>, then <span class="bold">Computer Management</span>, then <span class="bold">Device Manager</span>, and then <span class="bold">Disk drives</span></span></li>
<li><span>Expand the Disk drives and double-click the first drive listed.</span></li>
<li><span>Under the Policies tab for the selected drive, uncheck the option that enables write caching.</span></li>
<li><span>Double-click each of the other drives that will be used by Oracle Clusterware and Oracle RAC and disable write caching as described in the previous step.</span></li>
</ol>
<div class="section">
<div class="infobox-note" id="GUID-17FF487A-61E0-4A91-82C4-F8AC9DD1A389__GUID-A4DFB6A5-9CEF-4C68-8BAD-40EB2CA5D125">
<p class="notep1">Note:</p>
Any disks that you use to store files, including database files, that will be shared between nodes, must have write caching disabled.</div>
</div>
<!-- class="section" --></div>
</div>
<div class="sect3"><a id="GUID-6C50678D-7A2C-43F8-9A56-9D85DBE40795"></a>
<h3 id="CWWIN-GUID-6C50678D-7A2C-43F8-9A56-9D85DBE40795" class="sect3"><span class="enumeration_section">6.5.2</span> Enabling Automounting for Windows</h3>
<div>
<p>Even though the automount feature is enabled by default, you should verify that automount is enabled.</p>
<div class="section">
<p>You must enable automounting when using:</p>
<ul style="list-style-type: disc;">
<li>
<p>Raw partitions for Oracle ASM</p>
</li>
<li>
<p>Oracle Clusterware</p>
</li>
<li>
<p>Logical drives for Oracle ASM</p>
</li>
</ul>
<div class="infobox-note" id="GUID-6C50678D-7A2C-43F8-9A56-9D85DBE40795__GUID-9D7DF79B-CC9F-4442-BB79-D908C944EB25">
<p class="notep1">Note:</p>
Raw partitions are supported only when upgrading an existing installation using the configured partitions. On new installations, using raw partitions is not supported by ASMCA or OUI, but is supported by the software if you perform manual configuration</div>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>To determine if automatic mounting of new volumes is enabled, use the following commands:</span>
<div>
<pre dir="ltr">C:\&gt; diskpart 
DISKPART&gt; automount 
Automatic mounting of new volumes disabled.
</pre></div>
</li>
<li class="stepexpand"><span>To enable automounting:</span>
<ol>
<li class="substepexpand"><span>Enter the following commands at a command prompt:</span>
<div>
<pre dir="ltr">C:\&gt; diskpart
DISKPART&gt; automount enable
Automatic mounting of new volumes enabled.
</pre></div>
</li>
<li class="substepexpand"><span>Type <code class="codeph">exit</code> to end the <code class="codeph">diskpart</code> session.</span></li>
<li class="substepexpand"><span>Repeat steps 1 and 2 for each node in the cluster.</span></li>
</ol>
</li>
</ol>
<div class="section">
<div class="infobox-note" id="GUID-6C50678D-7A2C-43F8-9A56-9D85DBE40795__GUID-7717D8EE-E80B-43EF-8E73-9D0329A94847">
<p class="notep1">Note:</p>
All nodes in the cluster must have automatic mounting enabled to correctly install Oracle RAC and Oracle Clusterware. Oracle recommends that you enable automatic mounting before creating any logical partitions for use by the database or Oracle ASM.</div>
<p>You must restart each node after enabling disk automounting.</p>
<p>After disk automounting is enabled and the node is restarted, automatic mounting remains active until it is disabled.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<div class="sect2"><a id="GUID-3F9AAD1E-5FBA-45D5-B94C-BFEFCBBF8971"></a>
<h2 id="CWWIN-GUID-3F9AAD1E-5FBA-45D5-B94C-BFEFCBBF8971" class="sect2"><span class="enumeration_section">6.6</span> Configuring Shared Storage for Oracle ASM</h2>
<div>
<p>The installer does not suggest a default location for the OCR or the voting file. If you choose to create these files on Oracle ASM, then you must first create and configure disk partitions to be used in the Oracle ASM disk group.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="storage.htm#GUID-99081AA2-FE28-40DE-93DF-92A9AB039D3F">Create Disk Partitions for Use With Oracle ASM</a></strong><br/>
The following steps outline the procedure for creating disk partitions for use with Oracle ASM.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-5A5C215E-CA7C-41A8-8706-318797643996">Marking Disk Partitions for Oracle ASM Before Installation</a></strong><br/>
The only partitions that OUI displays for Windows systems are logical drives that are on disks that do not contain a primary partition, and have been marked (or <span class="bold">stamped</span>) with <code class="codeph">asmtool</code>.</li>
</ul>
</div>
<div class="sect3"><a id="GUID-99081AA2-FE28-40DE-93DF-92A9AB039D3F"></a>
<h3 id="CWWIN-GUID-99081AA2-FE28-40DE-93DF-92A9AB039D3F" class="sect3"><span class="enumeration_section">6.6.1</span> Create Disk Partitions for Use With Oracle ASM</h3>
<div>
<p>The following steps outline the procedure for creating disk partitions for use with Oracle ASM.</p>
<ol>
<li class="stepexpand"><span>Use Microsoft Computer Management utility or the command line tool <code class="codeph">diskpart</code> to create an extended partition.</span>
<div>Use a basic disk; dynamic disks are not supported.</div>
</li>
<li class="stepexpand"><span>Create at least one logical partition for the Oracle Clusterware files.</span>
<div>You do not have to create separate partitions for the OCR and voting file; Oracle Clusterware creates individual files for the OCR and voting file in the specified location.</div>
</li>
<li class="stepexpand"><span>If your file system does not use a redundant array of inexpensive disks (RAID), then create an additional extended partition and logical partition for each partition that will be used by Oracle Clusterware files, to provide redundancy.</span></li>
<li class="stepexpand"><span>To create the required partitions, use the Disk Management utilities available with Microsoft Windows. Use a basic disk with a Master Boot Record (MBR) partition style as an extended partition for creating partitions.</span>
<ol>
<li class="substepexpand"><span>From an existing node in the cluster, run the Windows disk administration tool as follows:</span>
<div>See <span class="q">&#34;<a href="storage.htm#GUID-8297B30F-E074-4384-A941-94B63B7360D3" title="To create disk partitions, use the disk administration tools provided by the operating system or third party vendors. You can create the disk partitions using either the Disk Management Interface or the DiskPart utility, both of which are provided by the operating system.">Configuring Disk Partitions on Shared Storage</a>&#34;</span> for instructions on creating disk partitions using the DISKPART utility.</div>
</li>
<li class="substepexpand"><span>On each node in the cluster, ensure that the partitions are visible and that none of the disk partitions created for shared storage have drive letters assigned. If any partitions have drive letters assigned, then remove them by performing these steps:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>Right-click the partition in the Windows disk administration tool</p>
</li>
<li>
<p>Select <span class="bold">&#34;Change Drive Letters and Paths&#34;</span> from the menu</p>
</li>
<li>
<p>Click <span class="bold">Remove</span> in the &#34;Change Drive Letter and Paths&#34; window</p>
</li>
</ul>
</div>
</li>
</ol>
</li>
</ol>
</div>
<div>
<div class="relinfo">
<p><strong>Related Topics</strong></p>
<ul>
<li><a href="storage.htm#GUID-3F9AAD1E-5FBA-45D5-B94C-BFEFCBBF8971">Configuring Shared Storage for Oracle ASM</a></li>
<li><a href="storage.htm#GUID-8297B30F-E074-4384-A941-94B63B7360D3">Configuring Disk Partitions on Shared Storage</a></li>
</ul>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-5A5C215E-CA7C-41A8-8706-318797643996"></a>
<h3 id="CWWIN-GUID-5A5C215E-CA7C-41A8-8706-318797643996" class="sect3"><span class="enumeration_section">6.6.2</span> Marking Disk Partitions for Oracle ASM Before Installation</h3>
<div>
<p>The only partitions that OUI displays for Windows systems are logical drives that are on disks that do not contain a primary partition, and have been marked (or <span class="bold">stamped</span>) with <code class="codeph">asmtool</code>.</p>
<p>Configure the disks before installation either by using <code class="codeph">asmtoolg</code> (graphical user interface (GUI) version) or using <code class="codeph">asmtool</code> (command line version). You also have the option of using the asmtoolg utility during Oracle Grid Infrastructure for a cluster installation.</p>
<p>All disk names created by <code class="codeph">asmtoolg</code> or <code class="codeph">asmtool</code> begin with the prefix <code class="codeph">ORCLDISK</code> followed by a user-defined prefix (the default is <code class="codeph">DATA</code>), and by a disk number for identification purposes. You can use them as raw devices in the Oracle ASM instance by specifying a name <code class="codeph">\\.\ORCLDISK<span class="variable">prefix</span><span class="variable">n</span></code>, where <span class="variable">prefixn</span> either can be DATA, or a value you supply, and where <span class="variable">n</span> represents the disk number.</p>
<p>The <code class="codeph">asmtoolg</code> and <code class="codeph">asmtool</code> utilities only work on partitioned disks; you cannot use Oracle ASM on unpartitioned disks. You can also use these tools to reconfigure the disks after installation. These utilities are installed automatically as part of Oracle Grid Infrastructure.</p>
<div class="infobox-note" id="GUID-5A5C215E-CA7C-41A8-8706-318797643996__GUID-FAF25DBD-33E6-4854-8DDB-4CA263AEE5EB">
<p class="notep1">Note:</p>
If user account control (UAC) is enabled, then running <code class="codeph">asmtoolg</code> or <code class="codeph">asmtool</code> requires administrator-level permissions.</div>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="storage.htm#GUID-D4A98577-4415-4AD8-8AC4-46B582A912BD">Overview of asmtoolg and asmtool</a></strong><br/>
The <code class="codeph">asmtoolg</code> and <code class="codeph">asmtool</code> tools associate meaningful, persistent names with disks to facilitate using those disks with Oracle ASM.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-BB6D0FBD-5117-4945-AA34-1CA64F330584">Using asmtoolg (Graphical User Interface) To Mark Disks</a></strong><br/>
Use asmtoolg (GUI version) to create device names; use asmtoolg to add, change, delete, and examine the devices available for use in Oracle ASM.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-8FB69708-4D70-403B-8597-6A352C38AF45">Using asmtoolg To Remove Disk Stamps</a></strong><br/>
You can use <code class="codeph">asmtoolg</code> (GUI version) to delete disk stamps.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-59089F95-CCAA-40B5-9C1B-DF80C670FEF3">asmtool Command Line Reference</a></strong><br/>
<code class="codeph">asmtool</code> is a command-line interface for marking (or stamping) disks to be used with Oracle ASM.</li>
</ul>
</div>
<div class="sect4"><a id="GUID-D4A98577-4415-4AD8-8AC4-46B582A912BD"></a>
<h4 id="CWWIN-GUID-D4A98577-4415-4AD8-8AC4-46B582A912BD" class="sect4"><span class="enumeration_section">6.6.2.1</span> Overview of asmtoolg and asmtool</h4>
<div>
<p>The <code class="codeph">asmtoolg</code> and <code class="codeph">asmtool</code> tools associate meaningful, persistent names with disks to facilitate using those disks with Oracle ASM.</p>
<p>Oracle ASM uses disk strings to operate more easily on groups of disks at the same time. The names that asmtoolg or asmtool create make this easier than using Windows drive letters.</p>
<p>All disk names created by <code class="codeph">asmtoolg</code> or <code class="codeph">asmtool</code> begin with the prefix <code class="codeph">ORCLDISK</code> followed by a user-defined prefix (the default is <code class="codeph">DATA</code>), and by a disk number for identification purposes. You can use them as raw devices in the Oracle ASM instance by specifying a name <code class="codeph">\\.\ORCLDISK<span class="variable">prefixn</span></code>, where <span class="variable">prefixn</span> either can be <code class="codeph">DATA</code>, or a value you supply, and where <span class="variable">n</span> represents the disk number.</p>
</div>
</div>
<div class="sect4"><a id="GUID-BB6D0FBD-5117-4945-AA34-1CA64F330584"></a>
<h4 id="CWWIN-GUID-BB6D0FBD-5117-4945-AA34-1CA64F330584" class="sect4"><span class="enumeration_section">6.6.2.2</span> Using asmtoolg (Graphical User Interface) To Mark Disks</h4>
<div>
<p>Use asmtoolg (GUI version) to create device names; use asmtoolg to add, change, delete, and examine the devices available for use in Oracle ASM.</p>
<ol>
<li class="stepexpand"><span>In the installation media for Oracle Grid Infrastructure, go the <code class="codeph">asmtool</code> folder and double-click <code class="codeph">asmtoolg</code>.</span>
<div>
<p>If Oracle Clusterware is installed, then go to the <code><span class="variable">Grid_home</span>\bin</code> folder and double-click <code class="codeph">asmtoolg.exe</code>.</p>
<p>If user access control (UAC) is enabled, then you must create a desktop shortcut to a command window. Open the command window using the <span class="bold">Run as Administrator</span>, right-click the context menu, and launch <code class="codeph">asmtoolg</code>.</p>
</div>
</li>
<li class="stepexpand"><span>Select the <span class="bold">Add or change label</span> option, and then click <span class="bold">Next</span>.</span>
<div>
<p><code class="codeph">asmtoolg</code> shows the devices available on the system. Unrecognized disks have a status of &#34;Candidate device&#34;, stamped disks have a status of &#34;Stamped ASM device,&#34; and disks that have had their stamp deleted have a status of &#34;Unstamped ASM device.&#34; The tool also shows disks that are recognized by Windows as a file system (such as NTFS). These disks are not available for use as Oracle ASM disks, and cannot be selected. In addition, Microsoft Dynamic disks are not available for use as Oracle ASM disks.</p>
<p>If necessary, follow the steps under <span class="q">&#34;<a href="storage.htm#GUID-99081AA2-FE28-40DE-93DF-92A9AB039D3F" title="The following steps outline the procedure for creating disk partitions for use with Oracle ASM.">Create Disk Partitions for Use With Oracle ASM</a>&#34;</span> to create disk partitions for the Oracle ASM instance.</p>
</div>
</li>
<li class="stepexpand"><span>On the Stamp Disks window, select the disks to you want to use with Oracle ASM.</span>
<div>
<p>For ease of use, Oracle ASM can generate unique stamps for all of the devices selected for a given prefix. The stamps are generated by concatenating a number with the prefix specified. For example, if the prefix is <code class="codeph">DATA</code>, then the first Oracle ASM link name is <code class="codeph">ORCLDISKDATA0</code>.</p>
<p>You can also specify the stamps of individual devices.</p>
</div>
</li>
<li class="stepexpand"><strong>Optional:</strong> <span>Select a disk to edit the individual stamp (Oracle ASM link name).</span></li>
<li class="stepexpand"><span>Click <span class="bold">Next</span>.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Finish</span>.</span></li>
</ol>
</div>
</div>
<div class="sect4"><a id="GUID-8FB69708-4D70-403B-8597-6A352C38AF45"></a>
<h4 id="CWWIN-GUID-8FB69708-4D70-403B-8597-6A352C38AF45" class="sect4"><span class="enumeration_section">6.6.2.3</span> Using asmtoolg To Remove Disk Stamps</h4>
<div>
<p>You can use <code class="codeph">asmtoolg</code> (GUI version) to delete disk stamps.</p>
<ol>
<li class="stepexpand"><span>In the installation media for Oracle Grid Infrastructure, go the <code class="codeph">asmtool</code> folder and double-click <code class="codeph">asmtoolg</code>.</span>
<div>
<p>If Oracle Clusterware is installed, then go to the <code><span class="variable">Grid_home</span>\bin</code> folder and double-click <code class="codeph">asmtoolg.exe</code>.</p>
<p>If user access control (UAC) is enabled, then you must create a desktop shortcut to a command window. Open the command window using the <span class="bold">Run as Administrator</span>, right-click the context menu, and launch <code class="codeph">asmtoolg</code>.</p>
</div>
</li>
<li class="stepexpand"><span>Select the <span class="bold">Delete labels</span> option, then click <span class="bold">Next</span>.</span>
<div>The delete option is only available if disks exist with stamps. The delete screen shows all stamped Oracle ASM disks.</div>
</li>
<li class="stepexpand"><span>On the Delete Stamps screen, select the disks to unstamp.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Next</span>.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Finish</span>.</span></li>
</ol>
</div>
</div>
<div class="sect4"><a id="GUID-59089F95-CCAA-40B5-9C1B-DF80C670FEF3"></a>
<h4 id="CWWIN-GUID-59089F95-CCAA-40B5-9C1B-DF80C670FEF3" class="sect4"><span class="enumeration_section">6.6.2.4</span> asmtool Command Line Reference</h4>
<div>
<p><code class="codeph">asmtool</code> is a command-line interface for marking (or stamping) disks to be used with Oracle ASM.</p>
<div class="tblformalwide" id="GUID-59089F95-CCAA-40B5-9C1B-DF80C670FEF3__GUID-B07D0395-6B60-4850-8811-6A909D0E4C86">
<table class="cellalignment5137" summary="This table lists the available options for the asmtool command line inteface.">
<thead>
<tr class="cellalignment5121">
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e2624">Option</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e2627">Description</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e2630">Example</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e2635" headers="d19568e2624">
<p><code class="codeph">-add</code></p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e2635 d19568e2627">
<p>Adds or changes stamps. You must specify the hard disk, partition, and new stamp name. If the disk is a raw device or has an existing Oracle ASM stamp, then you must specify the <code class="codeph">-force</code> option.</p>
<p>If necessary, follow the steps under <span class="q">&#34;<a href="storage.htm#GUID-99081AA2-FE28-40DE-93DF-92A9AB039D3F" title="The following steps outline the procedure for creating disk partitions for use with Oracle ASM.">Create Disk Partitions for Use With Oracle ASM</a>&#34;</span> to create disk partitions for the Oracle ASM instance.</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e2635 d19568e2630">
<pre dir="ltr">asmtool -add [-force]
\Device\Harddisk1\Partition1 ORCLDISKASM0
\Device\Harddisk2\Partition1 ORCLDISKASM2
...
</pre></td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e2658" headers="d19568e2624">
<p><code class="codeph">-addprefix</code></p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e2658 d19568e2627">
<p>Adds or changes stamps using a common prefix to generate stamps automatically. The stamps are generated by concatenating a number with the prefix specified. If the disk is a raw device or has an existing Oracle ASM stamp, then you must specify the <code class="codeph">-force</code> option.</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e2658 d19568e2630">
<pre dir="ltr">asmtool -addprefix ORCLDISKASM [-force]
\Device\Harddisk1\Partition1
\Device\Harddisk2\Partition1
...
</pre></td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e2672" headers="d19568e2624">
<p><code class="codeph">-create</code></p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e2672 d19568e2627">
<p>Creates an Oracle ASM disk device from a file instead of a partition.</p>
<p><span class="bold">Note</span>: Usage of this command is not supported for production environments.</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e2672 d19568e2630">
<pre dir="ltr">asmtool -create \\server\share\file 1000
asmtool -create D:\asm\asmfile02.asm 240
</pre></td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e2687" headers="d19568e2624">
<p><code class="codeph">-list</code></p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e2687 d19568e2627">
<p>List available disks. The stamp, windows device name, and disk size in MB are shown.</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e2687 d19568e2630">
<pre dir="ltr">asmtool -list
</pre></td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e2698" headers="d19568e2624">
<p><code class="codeph">-delete</code></p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e2698 d19568e2627">
<p>Removes existing stamps from disks.</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e2698 d19568e2630">
<pre dir="ltr">asmtool -delete ORCLDISKASM0 ORCLDISKASM1...
</pre></td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p>If user access control (UAC) is enabled, then you must create a desktop shortcut to a command window. Open the command window using the <span class="bold">Run as Administrator</span>, right-click the context menu, and launch <code class="codeph">asmtool</code>.</p>
<div class="infobox-note" id="GUID-59089F95-CCAA-40B5-9C1B-DF80C670FEF3__GUID-EB6F4BDF-558D-4C97-960B-8B56DC8D5D9A">
<p class="notep1">Note:</p>
If you use <code class="codeph">-add</code>, <code class="codeph">-addprefix</code>, or <code class="codeph">-delete</code>, <code class="codeph">asmtool</code> notifies the Oracle ASM instance on the local node and on other nodes in the cluster, if available, to rescan the available disks.</div>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-8297B30F-E074-4384-A941-94B63B7360D3"></a>
<h2 id="CWWIN-GUID-8297B30F-E074-4384-A941-94B63B7360D3" class="sect2"><span class="enumeration_section">6.7</span> Configuring Disk Partitions on Shared Storage</h2>
<div>
<p>To create disk partitions, use the disk administration tools provided by the operating system or third party vendors. You can create the disk partitions using either the Disk Management Interface or the DiskPart utility, both of which are provided by the operating system.</p>
<p>To use shared disks not managed by Oracle ASM for the Oracle home and data files, the following partitions, at a minimum, must exist before you run OUI to install Oracle Clusterware:</p>
<ul style="list-style-type: disc;">
<li>
<p>5.5 GB or larger partition for the Oracle home, if you want a shared Oracle home</p>
</li>
<li>
<p>3 GB or larger partitions for the Oracle Database data files and recovery files</p>
</li>
</ul>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="storage.htm#GUID-8B82DFB1-E437-48E9-9C16-C7A01B3BC1C2">Creating Disk Partitions Using the Disk Management Interface</a></strong><br/>
Use the graphical user interface Disk Management snap-in to manage disks.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-99327DC8-29BA-4F20-B59F-74A8744AA88D">Creating Disk Partitions using the DiskPart Utility</a></strong><br/>
You can also use the DiskPart utility to manage disks.</li>
</ul>
</div>
<div class="sect3"><a id="GUID-8B82DFB1-E437-48E9-9C16-C7A01B3BC1C2"></a>
<h3 id="CWWIN-GUID-8B82DFB1-E437-48E9-9C16-C7A01B3BC1C2" class="sect3"><span class="enumeration_section">6.7.1</span> Creating Disk Partitions Using the Disk Management Interface</h3>
<div>
<p>Use the graphical user interface Disk Management snap-in to manage disks.</p>
<ol>
<li class="stepexpand"><span>To access the Disk Management snap-in, do one of the following:</span>
<ul>
<li>Type <code class="codeph">diskmgmt.msc</code> at the command prompt</li>
<li>From the <span class="bold">Start</span> menu, select <span class="bold">All Programs</span>, then <span class="bold">Administrative Tools</span>, then <span class="bold">Computer Management</span>. Then select the <span class="bold">Disk Management</span> node in the Storage tree.</li>
</ul>
</li>
<li class="stepexpand"><span>Create primary partitions and logical drives in extended partitions by selecting the <span class="bold">New Simple Volume</span> option.</span>
<div>You must select <span class="bold">Do not format this partition</span> to specify raw partition. Do not use spanned volumes or striped volumes. These options convert the volume to a dynamic disk. Oracle Automatic Storage Management does not support dynamic disks.
<p>For other Windows, create primary partitions by selecting the <span class="bold">New Partition</span> option. Create the logical drives by selecting the <span class="bold">New Logical Drive</span> option.</p>
</div>
</li>
<li class="stepexpand"><span>To create a raw device, after the partition is created, you must remove the drive letter that was assigned to the partition.</span></li>
</ol>
</div>
</div>
<div class="sect3"><a id="GUID-99327DC8-29BA-4F20-B59F-74A8744AA88D"></a>
<h3 id="CWWIN-GUID-99327DC8-29BA-4F20-B59F-74A8744AA88D" class="sect3"><span class="enumeration_section">6.7.2</span> Creating Disk Partitions using the DiskPart Utility</h3>
<div>
<p>You can also use the DiskPart utility to manage disks.</p>
<ol>
<li class="stepexpand"><span>From an existing node in the cluster, run the DiskPart utility as follows:</span>
<div>
<pre dir="ltr">C:\&gt; diskpart
DISKPART&gt;
</pre></div>
</li>
<li class="stepexpand"><span>List the available disks.</span>
<div>
<p>By specifying its disk number (<span class="italic">n</span>), select the disk on which you want to create a partition.</p>
<pre dir="ltr">DISKPART&gt; list disk
DISKPART&gt; select disk n
</pre></div>
</li>
<li class="stepexpand"><span>Create an extended partition:</span>
<div>
<pre dir="ltr">DISKPART&gt; create part ext
</pre></div>
</li>
<li class="stepexpand"><span>Create a logical drive of the desired size after the extended partition is created using the following syntax:</span>
<div>
<pre dir="ltr">DISKPART&gt; create part log [size=n] [offset=n] [noerr]
</pre></div>
</li>
<li class="stepexpand"><span>Repeat steps 2 through 4 for the second and any additional partitions. An optimal configuration is one partition for the Oracle home and one partition for Oracle Database files.</span></li>
<li class="stepexpand"><span>List the available volumes, and remove any drive letters from the logical drives you plan to use.</span>
<div>
<pre dir="ltr">DISKPART&gt; list volume
DISKPART&gt; select volume n
DISKPART&gt; remove
</pre></div>
</li>
<li class="stepexpand"><span>Check all nodes in the cluster to ensure that the partitions are visible on all the nodes and to ensure that none of the Oracle partitions have drive letters assigned.</span>
<div>If any partitions have drive letters assigned, then remove them by performing these steps:</div>
<ol>
<li><span>Right-click the partition in the Windows Disk Management utility</span></li>
<li><span>Select <span class="bold">Change Drive Letters and Paths</span> from the menu</span></li>
<li><span>Click <span class="bold">Remove</span> in the <span class="wintitle">Change Drive Letter and Paths</span> window.</span></li>
</ol>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-E3DA9FBF-DE48-4516-BD0D-C147A2ECE2D9"></a>
<h2 id="CWWIN-GUID-E3DA9FBF-DE48-4516-BD0D-C147A2ECE2D9" class="sect2"><span class="enumeration_section">6.8</span> Configuring Direct NFS Client for Oracle RAC Data Files</h2>
<div>
<p>Direct NFS Client is an interface for NFS systems provided by Oracle.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="storage.htm#GUID-D56D8E32-8695-44D5-85F8-0B6FFC59AB35">About Direct NFS Client Storage</a></strong><br/>
With Oracle Database, instead of using the operating system NFS client or third-party NFS client, you can configure Oracle Database to use Direct NFS Client NFS to access NFS servers directly.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-1435CA47-EA31-456D-9B7D-54D549798D64">About the Oranfstab File for Direct NFS Client</a></strong><br/></li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-01FED72A-C7ED-42DA-B257-E8047965E4D1">Configurable Attributes for the oranfstab File</a></strong><br/>
You can configure various settings in the <code class="codeph">oranfstab</code> file.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-379C06AC-0A90-465D-9273-172E264B397F">Mounting NFS Storage Devices with Direct NFS Client</a></strong><br/>
Direct NFS Client determines mount point settings for NFS storage devices based on the configuration information in oranfstab. Direct NFS Client uses the first matching entry as the mount point.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-4A3A9EC7-0F56-4866-8923-12ECB44BAFB6">Specifying Network Paths for a NFS Server</a></strong><br/>
Direct NFS Client can use up to four network paths defined in the oranfstab file for an NFS server.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-85684A35-5528-4E3E-AB7E-8ACCFF85FDC3">Enabling Direct NFS Client</a></strong><br/>
To enable Direct NFS Client, you must add an <code class="codeph">oranfstab</code> file to <code><span class="variable">Oracle_home</span>\dbs</code>.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-7C22BDF4-F876-4ED9-9E72-595571F9950D">Performing Basic File Operations Using the ORADNFS Utility</a></strong><br/>
ORADNFS is a utility which enables the database administrators to perform basic file operations over Direct NFS Client on Microsoft Windows platforms.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-2A0183A3-CF8E-47B4-B40C-9EBAECBF2877">Monitoring Direct NFS Client Usage</a></strong><br/>
You use data dictionary view to monitor the Direct NFS client.</li>
<li class="ulchildlink"><strong><a href="storage.htm#GUID-F56C18BC-A057-4A2C-BD80-4AA3FCC2D0E2">Disabling Oracle Disk Management Control of NFS for Direct NFS Client</a></strong><br/>
If you no longer want to use the Direct NFS client, you can disable it.</li>
</ul>
</div>
<div class="sect3"><a id="GUID-D56D8E32-8695-44D5-85F8-0B6FFC59AB35"></a>
<h3 id="CWWIN-GUID-D56D8E32-8695-44D5-85F8-0B6FFC59AB35" class="sect3"><span class="enumeration_section">6.8.1</span> About Direct NFS Client Storage</h3>
<div>
<p>With Oracle Database, instead of using the operating system NFS client or third-party NFS client, you can configure Oracle Database to use Direct NFS Client NFS to access NFS servers directly.</p>
<p>Direct NFS Client supports NFSv3, NFSv4 and NFSv4.1 protocols (excluding the Parallel NFS extension) to access the NFS server. Direct NFS Client tunes itself to make optimal use of available resources and enables the storage of data files on supported NFS servers.</p>
<div class="infobox-note" id="GUID-D56D8E32-8695-44D5-85F8-0B6FFC59AB35__GUID-7F76819F-15B6-4670-9B40-A7965AB5F0CB">
<p class="notep1">Note:</p>
Use NFS servers supported for Oracle RAC. Check My Oracle Support, as described in <span class="q">&#34;<a href="prewin.htm#GUID-1B481D17-3295-4140-885B-3D8C0CB1F175" title="The My Oracle Support website also provides compatible client and database releases, patches, and workaround information for bugs.">Checking Hardware and Software Certification on My Oracle Support</a>&#34;</span> for support information.</div>
<p>To enable Oracle Database to use Direct NFS Client, the NFS file systems must be mounted and available over regular NFS mounts before you start installation. Direct NFS Client manages settings after installation. If Oracle Database cannot open an NFS server using Direct NFS Client, then an informational message is logged into the Oracle alert log. A trace file is also created, indicating that Direct NFS Client could not connect to an NFS server.</p>
<div class="infobox-note" id="GUID-D56D8E32-8695-44D5-85F8-0B6FFC59AB35__GUID-7E4B2A06-F0CA-4FAD-B4CA-6AF3DA73DDA1">
<p class="notep1">Note:</p>
Direct NFS does not work if the backend NFS server does not support a write size (<code class="codeph">wtmax</code>) of 32768 or larger.</div>
<p>The Oracle files resident on the NFS server that are accessed by Direct NFS Client can also be accessed through a third party NFS client. Management of Oracle data files created with Direct NFS Client should be done according to the guidelines specified in the &#34;Managing Datafiles and Tempfiles&#34; chapter of <a class="olink ADMIN012" target="_blank" href="../ADMIN/dfiles.htm#ADMIN012"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a>.</p>
<p>Volumes mounted through Common Internet File System (CIFS) can not be used for storing Oracle database files without configuring Direct NFS Client. The atomic write requirements needed for database writes are not guaranteed through the CIFS protocol, consequently CIFS can only be used for OS level access, for example, for commands such as copy.</p>
<p>Some NFS file servers require NFS clients to connect using reserved ports. If your filer is running with reserved port checking, then you must disable it for Direct NFS to operate. To disable reserved port checking, consult your NFS file server documentation.</p>
<p>For NFS servers that restrict port range, you can use the insecure option to enable clients other than an Administrator user to connect to the NFS server. Alternatively, you can disable Direct NFS Client as described in <span class="q">&#34;<a href="storage.htm#GUID-F56C18BC-A057-4A2C-BD80-4AA3FCC2D0E2" title="If you no longer want to use the Direct NFS client, you can disable it.">Disabling Oracle Disk Management Control of NFS for Direct NFS Client</a>&#34;</span></p>
</div>
</div>
<div class="sect3"><a id="GUID-1435CA47-EA31-456D-9B7D-54D549798D64"></a>
<h3 id="CWWIN-GUID-1435CA47-EA31-456D-9B7D-54D549798D64" class="sect3"><span class="enumeration_section">6.8.2</span> About the Oranfstab File for Direct NFS Client</h3>
<div>
<p>If you use Direct NFS Client, then you must create a configuration file, <code class="codeph">oranfstab</code>, to specify the options, attributes, and parameters that enable Oracle Database to use Direct NFS Client. Direct NFS Client looks for the mount point entries in <code class="codeph">oranfstab</code>. It uses the first matched entry as the mount point. You must create the <code class="codeph">oranfstab</code> file in the <code><span class="variable">Oracle_home</span>\dbs</code> directory.</p>
<p>When the <code class="codeph">oranfstab</code> file is placed in <code><span class="variable">Oracle_home</span>\dbs</code>, the entries in the file are specific to a single database. For Oracle RAC installations in a shared Oracle home, the <code class="codeph">oranfstab</code> file is globally available to all database instances.</p>
<p>All instances that use the shared Oracle home use the same <code><span class="variable">Oracle_home</span>\dbs\oranfstab</code> file. For a nonshared Oracle home, because all the Oracle RAC instances use the same <code class="codeph">oranfstab</code> file, you must replicate the <code class="codeph">oranfstab</code> file on all of the nodes. Also, you must keep the <code class="codeph">oranfstab</code> file synchronized on all the nodes.</p>
<div class="infobox-note" id="GUID-1435CA47-EA31-456D-9B7D-54D549798D64__GUID-67BD92EC-4AEA-4969-B0E1-8B6A606DF978">
<p class="notep1">Note:</p>
If you remove an NFS path from <code class="codeph">oranfstab</code> that Oracle Database is using, then you must restart the database for the change to be effective. In addition, the mount point that you use for the file system must be identical on each node.</div>
</div>
<div>
<div class="relinfo">
<p><strong>Related Topics</strong></p>
<ul>
<li><a href="storage.htm#GUID-85684A35-5528-4E3E-AB7E-8ACCFF85FDC3" title="To enable Direct NFS Client, you must add an oranfstab file to Oracle_home\dbs.">Enabling Direct NFS Client</a></li>
</ul>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-01FED72A-C7ED-42DA-B257-E8047965E4D1"></a>
<h3 id="CWWIN-GUID-01FED72A-C7ED-42DA-B257-E8047965E4D1" class="sect3"><span class="enumeration_section">6.8.3</span> Configurable Attributes for the oranfstab File</h3>
<div>
<p>You can configure various settings in the <code class="codeph">oranfstab</code> file.</p>
<div class="tblformal" id="GUID-01FED72A-C7ED-42DA-B257-E8047965E4D1__GUID-9D6CDF41-3C9D-4A1B-95D0-A74FBA8C29E4">
<p class="titleintable">Table 6-5 Configurable Attributes for the oranfstab File</p>
<table class="cellalignment5132" title="Configurable Attributes for the oranfstab File" summary="dNFS mount parameters and descriptions">
<thead>
<tr class="cellalignment5121">
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e3176">Attribute</th>
<th class="cellalignment5133" rowspan="1" colspan="1" id="d19568e3179">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e3184" headers="d19568e3176">
<p>server</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e3184 d19568e3179">
<p>The NFS server name</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e3191" headers="d19568e3176">
<p>path</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e3191 d19568e3179">
<p>Up to four network paths to the NFS server, specified either by internet protocol (IP) address, or by name, as displayed using the ifconfig command on the NFS server</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e3198" headers="d19568e3176">
<p>local</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e3198 d19568e3179">
<p>Up to 4 network interfaces on the database host, specified by IP address, or by name, as displayed using the ipconfig command on the database host.</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e3205" headers="d19568e3176">
<p>export</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e3205 d19568e3179">
<p>The exported path from the NFS server. Use a UNIX-style path</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e3212" headers="d19568e3176">
<p>mount</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e3212 d19568e3179">
<p>The corresponding local mount point for the exported volume. Use a Windows-style path</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e3219" headers="d19568e3176">
<p>mnt_timeout</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e3219 d19568e3179">
<p>(Optional) Specifies the time (in seconds) for which Direct NFS Client should wait for a successful mount before timing out. The default timeout is 10 minutes (600).</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e3226" headers="d19568e3176">
<p>uid</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e3226 d19568e3179">
<p>(Optional) The UNIX user ID to be used by Direct NFS Client to access all NFS servers listed in <code class="codeph">oranfstab</code>. The default value is <code class="codeph">uid:65534</code>, which corresponds to <code class="codeph">user:nobody</code> on the NFS server.</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e3242" headers="d19568e3176">
<p>gid</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e3242 d19568e3179">
<p>(Optional) The UNIX group ID to be used by Direct NFS Client to access all NFS servers listed in <code class="codeph">oranfstab</code>. The default value is <code class="codeph">gid:65534</code>, which corresponds to <code class="codeph">group:nogroup</code> on the NFS server.</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e3258" headers="d19568e3176">
<p>nfs_version</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e3258 d19568e3179">
<p>(Optional) Specifies the NFS protocol that Direct NFS Client uses. Possible values are NFSv3, NFSv4, and NFSv4.1. The default version is NFSv3. To specify NFSv4 or NFSv4.1, you must set the <code class="codeph">nfs_version</code> parameter accordingly in the <code class="codeph">oranfstab</code> file.</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e3271" headers="d19568e3176">
<p>management</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e3271 d19568e3179">
<p>Enables Direct NFS Client to use the management interface for SNMP queries. You can use this parameter if SNMP is running on separate management interfaces on the NFS server. The default value is <code class="codeph">server</code>.</p>
</td>
</tr>
<tr class="cellalignment5121">
<td class="cellalignment5121" rowspan="1" colspan="1" id="d19568e3281" headers="d19568e3176">
<p>community</p>
</td>
<td class="cellalignment5121" rowspan="1" colspan="1" headers="d19568e3281 d19568e3179">
<p>Specifies the community string for use in SNMP queries. Default value is <code class="codeph">public</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-01FED72A-C7ED-42DA-B257-E8047965E4D1__GUID-69A7010A-A052-4FDB-8D04-B26B71FB6E46">
<p class="notep1">See Also:</p>
&#34;Limiting Asynchronous I/O in NFS Server Environments&#34; in <a class="olink TGDBA95342" target="_blank" href="../TGDBA/pfgrf_os.htm#TGDBA95342"><span class="italic">Oracle Database Performance Tuning Guide</span></a></div>
</div>
<!-- class="section" --></div>
</div>
<div class="sect3"><a id="GUID-379C06AC-0A90-465D-9273-172E264B397F"></a>
<h3 id="CWWIN-GUID-379C06AC-0A90-465D-9273-172E264B397F" class="sect3"><span class="enumeration_section">6.8.4</span> Mounting NFS Storage Devices with Direct NFS Client</h3>
<div>
<p>Direct NFS Client determines mount point settings for NFS storage devices based on the configuration information in oranfstab. Direct NFS Client uses the first matching entry as the mount point.</p>
<p>If Oracle Database cannot open an NFS server using Direct NFS Client, then an error message is written into the Oracle alert and trace files indicating that Direct NFS Client could not be established.</p>
<div class="infobox-note" id="GUID-379C06AC-0A90-465D-9273-172E264B397F__GUID-5FC127BF-59FA-4880-8B2C-645460D377D8">
<p class="notep1">Note:</p>
You can have only one active Direct NFS Client implementation for each instance. Using Direct NFS Client on an instance will prevent another Direct NFS Client implementation.</div>
<p>Direct NFS Client requires an NFS server supporting NFS read/write buffers of at least 16384 bytes.</p>
<p>Direct NFS Client issues writes at wtmax granularity to the NFS server. Direct NFS Client does not serve an NFS server with a wtmax less than 16384. Oracle recommends that you use the value 32768.</p>
<div class="infoboxnotealso" id="GUID-379C06AC-0A90-465D-9273-172E264B397F__GUID-A7B2FD7B-4AF3-4F0C-B2FF-5B97FB33C9FB">
<p class="notep1">See Also:</p>
<span class="q">&#34;<a href="storage.htm#GUID-3642D9D0-089E-49B7-8BD8-F4A46B543D14" title="Both Oracle Clusterware and the Oracle RAC database use files that must be available to all the nodes in the cluster. The following table shows the storage options supported for storing Oracle Clusterware and Oracle RAC files.">Supported Storage Options for Oracle Grid Infrastructure and Oracle RAC</a>&#34;</span> for a list of the file types that are supported with Direct NFS Client.</div>
</div>
</div>
<div class="sect3"><a id="GUID-4A3A9EC7-0F56-4866-8923-12ECB44BAFB6"></a>
<h3 id="CWWIN-GUID-4A3A9EC7-0F56-4866-8923-12ECB44BAFB6" class="sect3"><span class="enumeration_section">6.8.5</span> Specifying Network Paths for a NFS Server</h3>
<div>
<p>Direct NFS Client can use up to four network paths defined in the oranfstab file for an NFS server.</p>
<p>Direct NFS Client performs load balancing across all specified paths. If a specified path fails, then Direct NFS Client re-issues all outstanding requests over any remaining paths.</p>
<div class="infobox-note" id="GUID-4A3A9EC7-0F56-4866-8923-12ECB44BAFB6__GUID-0124E210-2529-4F57-B896-AF40622D5BF2">
<p class="notep1">Note:</p>
You can have only one active Direct NFS Client implementation for each instance. Using Direct NFS Client on an instance prevents the use of another Direct NFS Client implementation.</div>
<p><a href="storage.htm#GUID-85684A35-5528-4E3E-AB7E-8ACCFF85FDC3__GUID-2394C8FF-3718-4AEC-B530-BA3D04697CB9">Example 6-1</a> and <a href="storage.htm#GUID-85684A35-5528-4E3E-AB7E-8ACCFF85FDC3__GUID-63E98D44-EB55-43F2-897F-035053204471">Example 6-2</a> provide examples of configuring network paths for Direct NFS Client attributes in an <code class="codeph">oranfstab</code> file.</p>
</div>
</div>
<div class="sect3"><a id="GUID-85684A35-5528-4E3E-AB7E-8ACCFF85FDC3"></a>
<h3 id="CWWIN-GUID-85684A35-5528-4E3E-AB7E-8ACCFF85FDC3" class="sect3"><span class="enumeration_section">6.8.6</span> Enabling Direct NFS Client</h3>
<div>
<p>To enable Direct NFS Client, you must add an <code class="codeph">oranfstab</code> file to <code><span class="variable">Oracle_home</span>\dbs</code>.</p>
<div class="section">When <code class="codeph">oranfstab</code> is placed in the <code><span class="variable">Oracle_home</span>\dbs</code> directory, the entries in this file are specific to one particular database. Direct NFS Client searches for the mount point entries as they appear in <code class="codeph">oranfstab</code>. Direct NFS Client uses the first matched entry as the mount point.</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Create an <code class="codeph">oranfstab</code> file and specify the attributes listed in <span class="q">&#34;<a href="storage.htm#GUID-01FED72A-C7ED-42DA-B257-E8047965E4D1" title="You can configure various settings in the oranfstab file.">Configurable Attributes for the oranfstab File</a>&#34;</span> for each NFS server that Direct NFS Client accesses:</span>
<div>
<div class="infoboxnotealso" id="GUID-85684A35-5528-4E3E-AB7E-8ACCFF85FDC3__GUID-00D10833-4AF3-445D-8C49-51FC13044F3A">
<p class="notep1">See Also:</p>
&#34;Limiting Asynchronous I/O in NFS Server Environments&#34; in <a class="olink TGDBA95342" target="_blank" href="../TGDBA/pfgrf_os.htm#TGDBA95342"><span class="italic">Oracle Database Performance Tuning Guide</span></a></div>
<p>The mount point specified in the <code class="codeph">oranfstab</code> file represents the local path where the database files would reside normally, as if Direct NFS Client was not used. For example, if the location for the data files would be <code>C:\app\oracle\oradata\orcl</code> directory if the database did not use Direct NFS Client, then you specify <code>C:\app\oracle\oradata\orcl</code> for the NFS virtual mount point in the corresponding <code class="codeph">oranfstab</code> file.</p>
<p><a href="storage.htm#GUID-85684A35-5528-4E3E-AB7E-8ACCFF85FDC3__GUID-2394C8FF-3718-4AEC-B530-BA3D04697CB9">Example 6-1</a> and <a href="storage.htm#GUID-85684A35-5528-4E3E-AB7E-8ACCFF85FDC3__GUID-63E98D44-EB55-43F2-897F-035053204471">Example 6-2</a> provide examples of how Direct NFS Client attributes can be used in an <code class="codeph">oranfstab</code> file.</p>
<div class="infobox-note" id="GUID-85684A35-5528-4E3E-AB7E-8ACCFF85FDC3__GUID-9C32BABB-3293-48B1-9B6A-6F5CBF6BEB0F">
<p class="notep1">Note:</p>
<ul style="list-style-type: disc;">
<li>
<p>Direct NFS Client ignores a <code class="codeph">uid</code> or <code class="codeph">gid</code> value of 0.</p>
</li>
<li>
<p>The exported path from the NFS server must be accessible for <code class="codeph">read/write/execute</code> by the user with the <code class="codeph">uid</code>, <code class="codeph">gid</code> specified in <code class="codeph">oranfstab</code>. If neither <code class="codeph">uid</code> nor <code class="codeph">gid</code> is listed, then the exported path must be accessible by the user with <code class="codeph">uid:65534</code> and <code class="codeph">gid:65534</code>.</p>
</li>
</ul>
</div>
</div>
</li>
<li class="stepexpand"><span>Replace the standard ODM library, <code class="codeph">oraodm12.dll</code>, with the ODM NFS library</span>
<div>Oracle Database uses the ODM library, <code class="codeph">oranfsodm12.dll</code>, to enable Direct NFS Client. To replace the ODM library, complete the following steps:</div>
<ol>
<li class="substepexpand"><span>Change directory to <code><span class="variable">Oracle_home</span>\bin</code>.</span></li>
<li class="substepexpand"><span>Shut down the Oracle Database instance on a node using the Server Control Utility (SRVCTL).</span></li>
<li class="substepexpand"><span>Enter the following commands:</span>
<div>
<pre dir="ltr">copy oraodm12.dll oraodm12.dll.orig
copy /Y oranfsodm12.dll oraodm12.dll 
</pre></div>
</li>
<li class="substepexpand"><span>Restart the Oracle Database instance using SRVCTL.</span></li>
<li class="substepexpand"><span>Repeat Step a to Step d for each node in the cluster.</span></li>
</ol>
</li>
</ol>
<div class="example" id="GUID-85684A35-5528-4E3E-AB7E-8ACCFF85FDC3__GUID-2394C8FF-3718-4AEC-B530-BA3D04697CB9">
<p class="titleinexample">Example 6-1 oranfstab File Using Local and Path NFS Server Entries</p>
<p>The following example of an <code class="codeph">oranfstab</code> file shows an NFS server entry, where the NFS server, <code class="codeph">MyDataServer1</code>, uses two network paths specified with IP addresses.</p>
<pre dir="ltr">server: MyDataServer1
local: 192.0.2.0
path: 192.0.2.1
local: 192.0.100.0
path: 192.0.100.1
nfs_version: nfsv3
export: /vol/oradata1 mount: C:\APP\ORACLE\ORADATA\ORCL
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-85684A35-5528-4E3E-AB7E-8ACCFF85FDC3__GUID-63E98D44-EB55-43F2-897F-035053204471">
<p class="titleinexample">Example 6-2 oranfstab File Using Network Connection Names</p>
<p>The following example of an <code class="codeph">oranfstab</code> file shows an NFS server entry, where the NFS server, <code class="codeph">MyDataServer2</code>, uses four network paths specified by the network interface to use, or the network connection name. Multiple export paths are also used in this example.</p>
<pre dir="ltr">server: MyDataServer2
local: LocalInterface1
path: NfsPath1
local: LocalInterface2
path: NfsPath2
local: LocalInterface3
path: NfsPath3
local: LocalInterface4
path: NfsPath4
nfs_version: nfsv4
export: /vol/oradata2 mount: C:\APP\ORACLE\ORADATA\ORCL2
export: /vol/oradata3 mount: C:\APP\ORACLE\ORADATA\ORCL3
management: MgmtPath1
community: private
</pre></div>
<!-- class="example" --></div>
</div>
<div class="sect3"><a id="GUID-7C22BDF4-F876-4ED9-9E72-595571F9950D"></a>
<h3 id="CWWIN-GUID-7C22BDF4-F876-4ED9-9E72-595571F9950D" class="sect3"><span class="enumeration_section">6.8.7</span> Performing Basic File Operations Using the ORADNFS Utility</h3>
<div>
<p>ORADNFS is a utility which enables the database administrators to perform basic file operations over Direct NFS Client on Microsoft Windows platforms.</p>
<div class="section">ORADNFS is a multi-call binary, which is a single binary that acts like many utilities.</div>
<!-- class="section" -->
<div class="p">You must be a member of the local <code class="codeph">ORA_DBA</code> group to use ORADNFS. A valid copy of the <code class="codeph">oranfstab</code> configuration file must be present in <code><span class="variable">Oracle_home</span>\dbs</code> for ORADNFS to operate.</div>
<!-- class="section" -->
<ul>
<li class="stepexpand"><span>To execute commands using ORADNFS you issue the command as an argument on the command line.</span>
<div>The following command prints a list of commands available with ORADNFS:
<pre dir="ltr">C:\&gt; oradnfs help
</pre>
To display the list of files in the NFS directory mounted as <code>C:\ORACLE\ORADATA</code>, use the following command:
<pre dir="ltr">C:\&gt; oradnfs ls C:\ORACLE\ORADATA\ORCL
</pre></div>
</li>
</ul>
</div>
</div>
<div class="sect3"><a id="GUID-2A0183A3-CF8E-47B4-B40C-9EBAECBF2877"></a>
<h3 id="CWWIN-GUID-2A0183A3-CF8E-47B4-B40C-9EBAECBF2877" class="sect3"><span class="enumeration_section">6.8.8</span> Monitoring Direct NFS Client Usage</h3>
<div>
<p>You use data dictionary view to monitor the Direct NFS client.</p>
<ul>
<li class="stepexpand"><span>Use the following global dynamic performance views for managing Direct NFS Client usage with your Oracle RAC database:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">GV$DNFS_SERVERS</code>: Lists the servers that are accessed using Direct NFS Client.</p>
</li>
<li>
<p><code class="codeph">GV$DNFS_FILES</code>: Lists the files that are currently open using Direct NFS Client.</p>
</li>
<li>
<p><code class="codeph">GV$DNFS_CHANNELS</code>: Lists the open network paths, or channels, to servers for which Direct NFS Client is providing files.</p>
</li>
<li>
<p><code class="codeph">GV$DNFS_STATS</code>: Lists performance statistics for Direct NFS Client.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3"><a id="GUID-F56C18BC-A057-4A2C-BD80-4AA3FCC2D0E2"></a>
<h3 id="CWWIN-GUID-F56C18BC-A057-4A2C-BD80-4AA3FCC2D0E2" class="sect3"><span class="enumeration_section">6.8.9</span> Disabling Oracle Disk Management Control of NFS for Direct NFS Client</h3>
<div>
<p>If you no longer want to use the Direct NFS client, you can disable it.</p>
<ol>
<li><span>Log in as the Oracle Grid Infrastructure software owner.</span></li>
<li><span>Restore the original <code class="codeph">oraodm12.dll</code> file by reversing the process you completed in <span class="q">&#34;<a href="storage.htm#GUID-85684A35-5528-4E3E-AB7E-8ACCFF85FDC3" title="To enable Direct NFS Client, you must add an oranfstab file to Oracle_home\dbs.">Enabling Direct NFS Client</a>&#34;</span>.</span></li>
<li><span>Remove the <code class="codeph">oranfstab</code> file.</span></li>
</ol>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-0F7D3132-E614-4F76-B054-90AF71944150"></a>
<h2 id="CWWIN-GUID-0F7D3132-E614-4F76-B054-90AF71944150" class="sect2"><span class="enumeration_section">6.9</span> Upgrading Existing Oracle ASM Instances</h2>
<div>
<p>If you have an Oracle ASM installation from a prior release installed on your server, or in an existing Oracle Clusterware installation, then you can use Oracle Automatic Storage Management Configuration Assistant (ASMCA) to upgrade the existing Oracle ASM instance to Oracle ASM 12<span class="italic">c</span> Release 1 (12.1).</p>
<p>The ASMCA utility is located in the path <code><span class="variable">Grid_home</span>\bin</code>. You can also use ASMCA to configure failure groups, Oracle ASM volumes and Oracle Automatic Storage Management Cluster File System (Oracle ACFS).</p>
<div class="infobox-note" id="GUID-0F7D3132-E614-4F76-B054-90AF71944150__GUID-7009009E-1636-49E5-A1E6-C55C149116C1">
<p class="notep1">Note:</p>
You must first shut down all database instances and applications on the node with the existing Oracle ASM instance before upgrading it.</div>
<p>During installation, if you are upgrading from an Oracle ASM release before 11.2, and you chose to use Oracle ASM and ASMCA detects that there is a prior Oracle ASM release installed in another Oracle ASM home, then after installing the Oracle ASM 12<span class="italic">c</span> Release 1 (12.1) binaries, you can start ASMCA to upgrade the existing Oracle ASM instance. You can then choose to configure an Oracle ACFS deployment by creating Oracle ASM volumes and using the upgraded Oracle ASM to create the Oracle ACFS.</p>
<p>If you are upgrading from Oracle ASM 11<span class="italic">g</span> Release 2 (11.2.0.1) or later, then Oracle ASM is always upgraded with Oracle Grid Infrastructure as part of the rolling upgrade, and ASMCA is started during the upgrade. ASMCA cannot perform a separate upgrade of Oracle ASM from a prior release to the current release.</p>
<p>On an existing Oracle Clusterware or Oracle RAC installation, if the prior release of Oracle ASM instances on all nodes is Oracle ASM 11<span class="italic">g</span> Release 1 or later, then you are provided with the option to perform a rolling upgrade of Oracle ASM instances. If the prior release of the Oracle ASM instances for an Oracle RAC installation are from a release prior to Oracle ASM 11<span class="italic">g</span> Release 1, then rolling upgrades cannot be performed. Oracle ASM on all nodes will be upgraded to Oracle ASM 12<span class="italic">c</span> Release 1 (12.1).</p>
</div>
</div>
<div class="sect2"><a id="GUID-230C5175-8214-4AB9-86D5-4BCC39DF6995"></a>
<h2 id="CWWIN-GUID-230C5175-8214-4AB9-86D5-4BCC39DF6995" class="sect2"><span class="enumeration_section">6.10</span> Configuring Oracle Automatic Storage Management Cluster File System</h2>
<div>
<p>If you want to install Oracle RAC on Oracle ACFS, you must first create the Oracle home directory in Oracle ACFS.</p>
<div class="section">You can also create a General Purpose File System configuration of ACFS using ASMCA. Oracle ACFS is installed as part of an Oracle Grid Infrastructure installation (Oracle Clusterware and Oracle Automatic Storage Management) for 12<span class="italic">c</span> Release 1 (12.1).</div>
<!-- class="section" -->
<div class="p">The compatibility parameters <code class="codeph">COMPATIBLE.ASM</code> and <code class="codeph">COMPATIBLE.ADVM</code> must be set to 11.2 or higher for the disk group to contain an Oracle ADVM volume.
<div class="infoboxnotealso" id="GUID-230C5175-8214-4AB9-86D5-4BCC39DF6995__GUID-9803C93C-5312-49E0-B936-E6EA24F00F2E">
<p class="notep1">See Also:</p>
<span class="q">&#34;<a href="storage.htm#GUID-D1E153B7-3545-4D77-8890-46200B8A753C" title="Oracle Automatic Storage Management Cluster File System (Oracle ACFS) provides a general purpose file system. Oracle ACFS extends Oracle ASM technology to support all your application data in both single instance and cluster configurations.">Restrictions and Guidelines for Oracle ACFS</a>&#34;</span></div>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Install Oracle Grid Infrastructure for a cluster (Oracle Clusterware and Oracle ASM).</span></li>
<li class="stepexpand"><span>Go to the <code class="codeph">bin</code> directory in the Grid home, for example:</span>
<div>
<pre dir="ltr">C:\&gt; cd app\12.1.0\grid\bin
</pre></div>
</li>
<li class="stepexpand"><span>Ensure that the Oracle Grid Infrastructure installation owner has read and write permissions on the storage mountpoint you want to use.</span>
<div>For example, to use the mountpoint <code>E:\data\acfsmounts\</code>
<pre dir="ltr">C:\..bin&gt; dir /Q E:\data\acfsmounts
</pre></div>
</li>
<li class="stepexpand"><span>Start ASMCA as the Oracle Installation user for Oracle Grid Infrastructure, for example:</span>
<div>
<pre dir="ltr">C:\..\bin&gt; asmca
</pre></div>
<div>The Configure ASM: Disk Groups page is displayed. The Configure ASM: ASM Disk Groups page shows you the Oracle ASM disk group you created during installation.</div>
</li>
<li class="stepexpand"><span>Click the <span class="bold">ASM Cluster File Systems</span> tab.</span></li>
<li class="stepexpand"><span>On the ASM Cluster File Systems page, right-click the disk group in which you want to create the Oracle ADVM volume, then select <span class="bold">Create ACFS for Database Use</span>.</span></li>
<li class="stepexpand"><span>In the Create ACFS Hosted Database Home window, enter the following information:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Database Home ADVM Volume Device Name</span>: Enter the name of the database home. The name must be unique in your enterprise, for example: <code class="codeph">racdb_01</code></p>
</li>
<li>
<p><span class="bold">Database Home Mountpoint</span>: Enter the directory path or logical drive letter for the mountpoint. For example: <code>M:\acfsdisks\racdb_01</code></p>
<p>Make a note of this mountpoint for future reference.</p>
</li>
<li>
<p><span class="bold">Database Home Size (GB)</span>: Enter in gigabytes the size you want the database home to be.</p>
</li>
<li>
<p><span class="bold">Database Home Owner Name</span>: Enter the name of the Oracle Installation user you plan to use to install the database. For example: <code class="codeph">oracle1</code></p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">OK</span> when you have entered the required information.</span></li>
<li class="stepexpand"><span>If prompted, run any scripts as directed by ASMCA as the Local Administrator user.</span>
<div>On an Oracle Clusterware environment, the script registers the ACFS as a resource managed by Oracle Clusterware. Registering ACFS as a resource helps Oracle Clusterware to mount the ACFS automatically in the proper order when ACFS is used for an Oracle RAC database home.</div>
</li>
<li class="stepexpand"><span>During Oracle RAC 12<span class="italic">c</span> Release 1 (12.1) installation, ensure that you or the database administrator who installs Oracle RAC selects for the Oracle home the mountpoint you provided in the Database Home Mountpoint field (in the preceding example, this was <code>M:\acfsdisks\racdb_01</code>).</span>
<div>
<div class="infobox-note" id="GUID-230C5175-8214-4AB9-86D5-4BCC39DF6995__GUID-3D7460C0-68BD-4405-B6D6-306456F1C23A">
<p class="notep1">Note:</p>
You cannot place the Oracle home directory for Oracle Database 11<span class="italic">g</span> Release 1 or earlier releases on Oracle ACFS.</div>
</div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-230C5175-8214-4AB9-86D5-4BCC39DF6995__GUID-05E1619B-6FB3-4B72-ACBF-EC62F61111E7">
<p class="notep1">See Also:</p>
<a class="olink OSTMG93000" target="_blank" href="../OSTMG/GUID-0AAA3F88-2466-459A-8723-3EEDEA571DF0.htm#OSTMG93000"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for more information about configuring and managing your storage with Oracle ACFS</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5120">
<tr>
<td class="cellalignment5127">
<table class="cellalignment5125">
<tr>
<td class="cellalignment5124"><a href="usrgrps.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5124"><a href="crswin.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2012, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5129">
<table class="cellalignment5123">
<tr>
<td class="cellalignment5124"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5124"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5124"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5124"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5124"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5124"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>


</body></html>