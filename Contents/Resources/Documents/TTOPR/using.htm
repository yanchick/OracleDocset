<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-113943"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Managing%20TimesTen%20Databases"></a><title>Managing TimesTen Databases</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 748"/>
<meta name="dcterms.created" content="2014-09-30T15:13:3Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="TimesTen In-Memory Database Operations Guide"/>
<meta name="dcterms.identifier" content="E21633-12"/>
<meta name="dcterms.isVersionOf" content="TTOPR"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="whatsnew.htm" title="Previous" type="text/html"/>
<link rel="Next" href="client_server.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E21633-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">5/16</span> <!-- End Header -->
<div id="TTOPR120" class="chapter"><a id="BABGHFCB"></a>
<h1 class="chapter"><span class="secnum">1</span> Managing TimesTen Databases</h1>
<p>A TimesTen<a id="sthref9"></a> database is a collection of elements such as tables, views, and sequences. You can access and manipulate the TimesTen database through SQL. If your database does not exist, TimesTen creates the database with the specified attributes when the instance administrator connects to the database. You can free the database shared memory segment by disconnecting all existing connections to the TimesTen database.</p>
<p>Thus, this chapter describes first how to configure for a connection to the TimesTen database, because the configuration and management for your TimesTen database is contained in attributes within the connection definition.</p>
<p>Once you have created a database, you can perform the following:</p>
<ul>
<li>
<p>Use the <code>ttIsql</code> utility to connect to the database and execute a SQL file or start an interactive SQL session, as described in <a href="ttisql.htm#BABGJFAE">&#34;Batch mode vs. interactive mode&#34;</a>.</p>
</li>
<li>
<p>Execute an application that uses the database.</p>
</li>
</ul>
<p>The main topics are as follows:</p>
<ul>
<li>
<p><a href="#BCGFCJIH">Connecting to TimesTen with ODBC and JDBC drivers</a></p>
</li>
<li>
<p><a href="#BCGBEEBG">Specifying Data Source Names to identify TimesTen databases</a></p>
</li>
<li>
<p><a href="#BABEHJCF">Defining a Data Manager DSN</a></p>
</li>
<li>
<p><a href="#BABBJGCJ">Defining client and server DSNs</a></p>
</li>
<li>
<p><a href="#BCGHDBDJ">Resolution path for a DSN</a></p>
</li>
<li>
<p><a href="#BCGCGAIG">DSN examples</a></p>
</li>
<li>
<p><a href="#BCGIFGIB">odbc.ini file entry descriptions</a></p>
</li>
<li>
<p><a href="#BABFFCGC">Specifying a RAM policy</a></p>
</li>
<li>
<p><a href="#CEGBCIAB">Loading and unloading the database from memory</a></p>
</li>
<li>
<p><a href="#BCGIDAJG">Specifying the size of a database</a></p>
</li>
<li>
<p><a href="#BABBACAA">Manage existing tables in the database</a></p>
</li>
<li>
<p><a href="#BCGCBAFE">Thread programming with TimesTen</a></p>
</li>
<li>
<p><a href="#BABBCFFF">Defragmenting TimesTen databases</a></p>
</li>
</ul>
<a id="BCGFCJIH"></a>
<div id="TTOPR121" class="sect1">
<h2 class="sect1">Connecting to TimesTen with ODBC and JDBC drivers</h2>
<p>As described in <a class="olink TTCIN160" href="../TTCIN/arch.htm#TTCIN160">&#34;TimesTen connection options&#34;</a> in the <span class="italic">Oracle TimesTen Application-Tier Database Cache Introduction</span>, applications use the TimesTen ODBC driver to access a TimesTen database. The application can use the ODBC direct driver, the Windows ODBC driver manager, the ODBC client driver or the ODBC driver indirectly through a provided interface to access the TimesTen database.</p>
<p><a href="#BABIIDDA">Figure 1-1</a> shows how the application can use different drivers and interfaces to access the TimesTen database.</p>
<div id="TTOPR649" class="figure">
<p class="titleinfigure"><a id="BABIIDDA"></a>Figure 1-1 Application access to TimesTen database diagram</p>
<img width="514" height="287" src="./img/odbc_diagram.gif" alt="Description of Figure 1-1 follows"/><br/>
<a id="sthref10" href="./img_text/odbc_diagram.htm">Description of &#34;Figure 1-1 Application access to TimesTen database diagram&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<ul>
<li>
<p>C applications interact with TimesTen by <a id="sthref11"></a><a id="sthref12"></a><a id="sthref13"></a><a id="sthref14"></a>linking directly with the TimesTen ODBC driver, by linking with the Windows ODBC driver manager, or by using the OCI or Pro*C/C++ interfaces that access the ODBC driver.</p>
</li>
<li>
<p>Java applications interact with TimesTen by loading the JDBC library.</p>
</li>
<li>
<p>C++ applications interact with TimesTen through a TimesTen-provided set of classes called TTClasses or by using the OCI or Pro*C/C++ interfaces that access the ODBC driver.</p>
</li>
<li>
<p>C# applications interact with TimesTen through Oracle Data Provider for .NET support for the TimesTen database.</p>
</li>
</ul>
<p>Consider the following points:</p>
<ul>
<li>
<p>An application that links directly with an ODBC driver, whether it is linked with the direct driver or client driver, is limited to using only the driver with which it is linked. An application linked directly to either of the TimesTen drivers can connect to multiple databases at the same time.</p>
<ul>
<li>
<p>The TimesTen direct driver supports multiple connections to multiple TimesTen databases, each of which are all the same TimesTen version.</p>
</li>
<li>
<p>The TimesTen client driver, used to facilitate a client/server connection, supports multiple connections to multiple TimesTen databases, which can be different TimesTen versions.</p>
</li>
</ul>
<p>This option offers less flexibility but better performance than linking with a driver manager.</p>
</li>
<li>
<p>An application can link with more than one ODBC driver within the same application, even if the drivers are for different databases. If the application loads more than one ODBC driver, the application must use a driver manager, such as the Windows ODBC driver manager.</p>
<p>An application might need multiple drivers if it needs to use both the TimesTen direct driver and the TimesTen client driver.</p>
<p>The Windows ODBC driver manager dynamically loads an ODBC driver at runtime. However, carefully evaluate the benefits of using the ODBC driver manager, because it may affect the performance of your application with its additional runtime overhead.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
An application that is using an ODBC driver manager cannot use XLA.</div>
</li>
</ul>
<p>For more information on how to compile an application that uses the TimesTen driver manager, see <a class="olink TTCDV487" href="../TTCDV/compiling.htm#TTCDV487">&#34;Compiling and linking applications&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database C Developer&#39;s Guide</span>, <a class="olink TTJDV324" href="../TTJDV/env_setup.htm#TTJDV324">&#34;Compiling Java applications&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Java Developer&#39;s Guide</span>, and <a class="olink TTCLS482" href="../TTCLS/compiling.htm#TTCLS482">&#34;Compiling and linking applications&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database TTClasses Guide</span>.</p>
<p>The following sections describe how to define TimesTen databases:</p>
<ul>
<li>
<p><a href="#BCGGBJJB">Connecting using TimesTen ODBC drivers</a></p>
</li>
<li>
<p><a href="#BCGGGIHA">Connecting using the TimesTen JDBC driver and driver manager</a></p>
</li>
</ul>
<a id="BCGGBJJB"></a>
<div id="TTOPR122" class="sect2">
<h3 class="sect2"><a id="sthref15"></a>Connecting using TimesTen ODBC drivers</h3>
<p>TimesTen includes the following ODBC drivers:</p>
<ul>
<li>
<p><span class="italic">TimesTen Data Manager driver</span>: A TimesTen ODBC driver for use with direct connect applications.</p>
</li>
<li>
<p><span class="italic">TimesTen Client driver</span>: A TimesTen Client ODBC driver for use with client/server applications.</p>
</li>
</ul>
<p>TimesTen includes the following two versions of the Data Manager ODBC driver:</p>
<ul>
<li>
<p><span class="italic">Production</span>: Use the <span class="italic">production</span> version of the TimesTen Data Manager driver for most application development and for all deployment.</p>
</li>
<li>
<p><span class="italic">Debug</span>: Use the <span class="italic">debug</span> version of the TimesTen Data Manager driver only if you encounter problems with TimesTen itself. This version performs additional internal error checking and is slower than the production version. On UNIX, the TimesTen debug libraries are compiled with the <code>-g</code> option to display additional debug information.</p>
</li>
</ul>
<p>On Windows, the production version of the TimesTen Data Manager is installed by default. To install the debug version, choose <a id="sthref16"></a>Custom setup. To install the TimesTen Client driver, choose either Typical or Custom setup.</p>
<p><a href="#BABICAHC">Table 1-1</a> lists the ODBC drivers for Windows:</p>
<div id="TTOPR650" class="tblhruleformal">
<p class="titleintable"><a id="sthref17"></a><a id="BABICAHC"></a>Table 1-1 ODBC drivers provided for Windows platforms</p>
<table class="cellalignment3233" title="ODBC drivers provided for Windows platforms" summary="This table lists the ODBC drivers for Windows." dir="ltr">
<thead>
<tr class="cellalignment3224">
<th class="cellalignment3234" id="r1c1-t3">Platform</th>
<th class="cellalignment3234" id="r1c2-t3">Version</th>
<th class="cellalignment3234" id="r1c3-t3">Name</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r2c1-t3" headers="r1c1-t3">
<p>Windows</p>
</td>
<td class="cellalignment3230" headers="r2c1-t3 r1c2-t3">
<p>Production</p>
</td>
<td class="cellalignment3230" headers="r2c1-t3 r1c3-t3">
<p>TimesTen Data Manager 11.2.2 Driver.</p>
</td>
</tr>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r3c1-t3" headers="r1c1-t3">
<p>Windows</p>
</td>
<td class="cellalignment3230" headers="r3c1-t3 r1c2-t3">
<p>Debug</p>
</td>
<td class="cellalignment3230" headers="r3c1-t3 r1c3-t3">
<p>TimesTen Data Manager 11.2.2 Debug Driver.</p>
</td>
</tr>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r4c1-t3" headers="r1c1-t3">
<p>Windows</p>
</td>
<td class="cellalignment3230" headers="r4c1-t3 r1c2-t3">
<p>Client</p>
</td>
<td class="cellalignment3230" headers="r4c1-t3 r1c3-t3">
<p>TimesTen Client 11.2.2 Driver</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" -->
<p>On UNIX, depending on the options selected at install time, TimesTen may install the Client driver and both the production version and the debug version of the TimesTen Data Manager ODBC driver.</p>
<p><a href="#BABDHEJC">Table 1-2</a> lists the TimesTen ODBC drivers for UNIX platforms.</p>
<div id="TTOPR651" class="tblhruleformal">
<p class="titleintable"><a id="sthref18"></a><a id="BABDHEJC"></a>Table 1-2 ODBC drivers provided for UNIX platforms</p>
<table class="cellalignment3233" title="ODBC drivers provided for UNIX platforms" summary="ODBC drivers for UNIX platforms" dir="ltr">
<thead>
<tr class="cellalignment3224">
<th class="cellalignment3234" id="r1c1-t4">Platform</th>
<th class="cellalignment3234" id="r1c2-t4">Version</th>
<th class="cellalignment3234" id="r1c3-t4">Location and name</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r2c1-t4" headers="r1c1-t4">
<p>Solaris</p>
<p>Linux</p>
</td>
<td class="cellalignment3230" headers="r2c1-t4 r1c2-t4">
<p>Production</p>
</td>
<td class="cellalignment3230" headers="r2c1-t4 r1c3-t4">
<p><code><span class="codeinlineitalic">install_dir</span></code><code>/lib/libtten.so</code></p>
<p>TimesTen Data Manager 11.2.2 Driver.</p>
</td>
</tr>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r3c1-t4" headers="r1c1-t4">
<p>Solaris</p>
<p>Linux</p>
</td>
<td class="cellalignment3230" headers="r3c1-t4 r1c2-t4">
<p>Debug</p>
</td>
<td class="cellalignment3230" headers="r3c1-t4 r1c3-t4">
<p><code><span class="codeinlineitalic">install_dir</span></code><code>/lib/libttenD.so</code></p>
<p>TimesTen Data Manager 11.2.2 Debug Driver.</p>
</td>
</tr>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r4c1-t4" headers="r1c1-t4">
<p>Solaris</p>
<p>Linux</p>
</td>
<td class="cellalignment3230" headers="r4c1-t4 r1c2-t4">
<p>Client</p>
</td>
<td class="cellalignment3230" headers="r4c1-t4 r1c3-t4">
<p><code><span class="codeinlineitalic">install_dir</span></code><code>/lib/libttclient.so</code></p>
<p>TimesTen Client 11.2.2 Driver.</p>
</td>
</tr>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r5c1-t4" headers="r1c1-t4">
<p>AIX</p>
</td>
<td class="cellalignment3230" headers="r5c1-t4 r1c2-t4">
<p>Production</p>
</td>
<td class="cellalignment3230" headers="r5c1-t4 r1c3-t4">
<p><code><span class="codeinlineitalic">install_dir</span></code><code>/lib/libtten.a</code></p>
<p>TimesTen Data Manager 11.2.2 Driver.</p>
</td>
</tr>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r6c1-t4" headers="r1c1-t4">
<p>AIX</p>
</td>
<td class="cellalignment3230" headers="r6c1-t4 r1c2-t4">
<p>Debug</p>
</td>
<td class="cellalignment3230" headers="r6c1-t4 r1c3-t4">
<p><code><span class="codeinlineitalic">install_dir</span></code><code>/lib/libttenD.a</code></p>
<p>TimesTen Data Manager 11.2.2 Debug Driver.</p>
</td>
</tr>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r7c1-t4" headers="r1c1-t4">
<p>AIX</p>
</td>
<td class="cellalignment3230" headers="r7c1-t4 r1c2-t4">
<p>Client</p>
</td>
<td class="cellalignment3230" headers="r7c1-t4 r1c3-t4">
<p><code><span class="codeinlineitalic">install_dir</span></code><code>/lib/libttclient.a</code></p>
<p>TimesTen Client 11.2.2 Driver.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" --></div>
<!-- class="sect2" -->
<a id="BCGGGIHA"></a>
<div id="TTOPR123" class="sect2">
<h3 class="sect2">Connecting using the TimesTen JDBC driver and driver manager</h3>
<p>JDBC enables Java applications to issue SQL statements to TimesTen and process the results. It is the primary interface for data access in the Java programming language. For TimesTen installations, JDBC is installed with the TimesTen Data Manager.</p>
<p>As shown in <a href="#BABIIDDA">Figure 1-1</a>, the TimesTen JDBC driver uses the ODBC driver to access TimesTen databases. For each JDBC method, the driver executes a set of <a id="sthref19"></a><a id="sthref20"></a>ODBC functions to perform the appropriate operation. Since the JDBC driver depends on ODBC for all database operations, the first step in using JDBC is to define a TimesTen database and the ODBC driver that accesses it on behalf of JDBC.</p>
<p>The TimesTen <a id="sthref21"></a>JDBC API is implemented using native methods to bridge to the TimesTen native API and provides a driver manager that can support multiple drivers connecting to separate databases. The <a id="sthref22"></a><a id="sthref23"></a>JDBC driver manager in the <code>DriverManager</code> class keeps track of all JDBC drivers that have been loaded and are available to the Java application. The application may load several drivers and access each driver independently. For example, both the TimesTen Client JDBC driver and the TimesTen direct driver can be loaded by an application. Then, Java applications can access databases either on the local system or a remote system.</p>
<p>For a list of the Java functions supported by TimesTen, see <a class="olink TTJDV119" href="../TTJDV/writing_app.htm#TTJDV119">&#34;Support for interfaces in the java.sql package&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Java Developer&#39;s Guide</span>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BCGBEEBG"></a>
<div id="TTOPR124" class="sect1">
<h2 class="sect1">Specifying Data Source Names to identify TimesTen databases</h2>
<p>When you connect from an application, you use a Data Source Name (DSN) to uniquely identify the particular TimesTen database to which you want to connect. Specifically, a DSN is a character-string name that identifies a TimesTen database and a collection of connection attributes that are to be used when connecting to the database. On Windows, the DSN also specifies the ODBC driver to be used to access the database.</p>
<p>You can also define a default DSN that can be used when a user or an application either does not specify a DSN or specifies a DSN that is not defined in the <code>odbc.ini</code> file at connect time. For details, see <a href="#BABDFFGA">&#34;Setting up a default DSN&#34;</a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If a user tries to use a DSN that has connection attributes for which they do not have privileges, such as first connection attributes, they receive an error. For more information on first connection attribute privileges, see <a class="olink TTREF114" href="../TTREF/attribute.htm#TTREF114">&#34;Connection Attributes&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span><span class="italic">.</span></div>
<p>Even though the DSN uniquely identifies a TimesTen database, a database can be referenced by multiple DSNs. The difference between each of these unique DSNs is in the specification of the connection attributes to the database. This provides convenient names to different connection configurations for a single database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
According to the ODBC standard, when an attribute occurs multiple times in a connection string, the first value specified is used, not the last value.</div>
<p>A DSN <a id="sthref24"></a><a id="sthref25"></a>has the following characteristics:</p>
<ul>
<li>
<p>Its maximum length is 32 characters.</p>
</li>
<li>
<p>It is case insensitive.</p>
</li>
<li>
<p>It is composed of ASCII characters except for the following: ( ) [ ] { } , ; ? * = ! @ \ /</p>
</li>
<li>
<p>TimesTen does not recommend the use of spaces as part of the DSN. If a DSN contains a space, some TimesTen utilities truncate the DSN at the point where they encounter the space. In addition, a DSN cannot start or end with a space, or consist solely of spaces.</p>
</li>
</ul>
<p>The following sections describe how to configure and manage your DSNs:</p>
<ul>
<li>
<p><a href="#BCGBIAFB">Overview of user and system DSNs</a></p>
</li>
<li>
<p><a href="#BCGHEHFB">Defining DSNs for direct or client/server connections</a></p>
</li>
<li>
<p><a href="#BCGHIDGA">Connection attributes for Data Manager DSNs or server DSNs</a></p>
</li>
</ul>
<a id="BCGBIAFB"></a>
<div id="TTOPR125" class="sect2">
<h3 class="sect2">Overview of user and system DSNs</h3>
<p>DSNs are resolved using a two-tiered naming system, where TimesTen first tries to resolve the DSN within the defined user DSNs and secondly within the defined system DSNs.</p>
<ul>
<li>
<p>A <span class="bold">user</span><a id="sthref26"></a> DSN can be used only by the user who created the DSN.</p>
<ul>
<li>
<p>On Windows, user <a id="sthref27"></a>DSNs are defined from the <span class="bold">User DSN</span> tab of the ODBC Data Source Administrator.</p>
</li>
<li>
<p>On UNIX, define user DSNs in the user <code>odbc.ini</code> file. TimesTen locates this file by first finding if a file is specified by the <code>ODBCINI</code> environment variable. If not, TimesTen locates the <a id="sthref28"></a><a id="sthref29"></a><code><span class="codeinlineitalic">$HOME</span></code><a id="sthref30"></a><code>/.odbc.ini</code> file.</p>
</li>
</ul>
<p>Although a user DSN is private to the user who created it, it is only the DSN, consisting of the character-string name and its attributes, that is private. The underlying database can be referenced by other users&#39; user DSNs or by system DSNs.</p>
<p>TimesTen supports data sources for both the TimesTen Data Manager and the TimesTen Client in the <code>.odbc.ini</code> file.</p>
</li>
<li>
<p>A <span class="bold">system</span> <a id="sthref31"></a>DSN can be used by any user on the system on which the system DSN is defined to connect to the TimesTen database.</p>
<ul>
<li>
<p>On Windows, system DSNs are defined from the <span class="bold">System DSN</span> tab of the ODBC Data Source Administrator.</p>
</li>
<li>
<p>On UNIX, system DSNs are defined in the <code>sys.odbc.ini</code> file, which is referred to as the system <code>odbc.ini</code> file. TimesTen locates the system DSN file in the following order:</p>
<ul>
<li>
<p>The file is located if it is specified by the <code>SYSODBCINI</code> environment variable.</p>
</li>
<li>
<p>In a non-root installation, the file is located in <code><span class="codeinlineitalic">install_dir</span></code><code>/info/sys.odbc.ini</code>. In a root installation, the file is located in <code>/var/TimesTen/InstanceName/sys.odbc.ini</code>.</p>
</li>
<li>
<p>If not found in either the root or non-root locations, TimesTen looks for the <code>/var/TimesTen/sys.odbc.ini</code> file.</p>
</li>
<li>
<p>If not found in any of these locations, TimesTen looks on the system for the <code>/etc/odbc.ini</code> file.</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BCGHEHFB"></a>
<div id="TTOPR126" class="sect2">
<h3 class="sect2">Defining DSNs for direct or client/server connections</h3>
<p><a id="sthref32"></a>DSNs <a id="sthref33"></a>are created to uniquely identify a database, whether local or remote. The following explains the type of DSN to use for either a direct or client/server connection:</p>
<ul>
<li>
<p><span class="italic">Data Manager DSN</span>: A DSN that specifies a local database uses the TimesTen Data Manager ODBC driver, which is the direct driver. You can use either the production version or the debug version of the TimesTen Data Manager driver.</p>
<p>A Data Manager DSN refers to a database using a path name and a file name prefix. The database path name specifies the directory location of the database and the prefix for the database, such as <code>C:\data\chns\AdminDS</code> or <code>/home/chns/AdminDS</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
This path name and prefix does not define a file name, but the name of the directory where the database is located and the prefix for all database files. The actual files used by the database append file suffixes, such as <code>C:\data\chns\AdminDS.ds0</code> or <code>/home/chns/AdminDS.log2</code>.</div>
<p>A Data Manager DSN that refers to a given TimesTen database must be defined on the same system on which the database resides. TimesTen creates <code><span class="codeinlineitalic">dsName</span></code><code>.res</code><code><span class="codeinlineitalic">n</span></code> files for each database. These files are used internally by TimesTen for maintaining logs.</p>
<p>If multiple Data Manager DSNs refer to the same database, they must all use exactly the same database path name, even if some other path name identifies the same location. For example, you cannot use a symbolic link to refer to the database in one DSN and the actual path name in another DSN. On Windows, you cannot use a mapped drive letter in the database path name.</p>
</li>
<li>
<p><span class="italic">Client DSN</span>: A client DSN specifies a remote database and uses the TimesTen client. A client <a id="sthref34"></a>DSN refers to a TimesTen database indirectly by specifying a <code>hostname, DSN</code> pair, where the hostname represents the server system on which TimesTen Server is running and the DSN refers to a server DSN that specifies the TimesTen database on the server host.</p>
</li>
<li>
<p><span class="italic">Server DSN</span>: A server DSN is always defined as a system DSN and is defined on the server system for each database on that server that can be accessed by client applications. The format and attributes of a server DSN are very similar to those of a Data Manager DSN.</p>
</li>
</ul>
<p>On UNIX, all user DSNs including both client DSNs and Data Manager DSNs that are created by a specific user are defined in the same user <code>odbc.ini</code> file. Similarly, all system DSNs are defined in the same system <code>odbc.ini</code> file.</p>
<p>The following table indicates the types of DSN supported by TimesTen, whether to create a user or system DSN and the location of the DSN.</p>
<div class="inftblhruleinformal">
<table class="cellalignment3233" title="DSN types supported by TimesTen" summary="This table lists the types of DSN supported by TimesTen." dir="ltr">
<thead>
<tr class="cellalignment3224">
<th class="cellalignment3234" id="r1c1-t8">DSN type</th>
<th class="cellalignment3234" id="r1c2-t8">User or System DSN?</th>
<th class="cellalignment3234" id="r1c3-t8">Location of DSN</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r2c1-t8" headers="r1c1-t8">Data Manager DSN</td>
<td class="cellalignment3230" headers="r2c1-t8 r1c2-t8">Can be a user or system DSN</td>
<td class="cellalignment3230" headers="r2c1-t8 r1c3-t8">Located on the system where the database resides.</td>
</tr>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r3c1-t8" headers="r1c1-t8">Client DSN</td>
<td class="cellalignment3230" headers="r3c1-t8 r1c2-t8">Can be a user or system DSN</td>
<td class="cellalignment3230" headers="r3c1-t8 r1c3-t8">Located on any local or remote system.</td>
</tr>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r4c1-t8" headers="r1c1-t8">Server DSN</td>
<td class="cellalignment3230" headers="r4c1-t8 r1c2-t8">Must be a system DSN</td>
<td class="cellalignment3230" headers="r4c1-t8 r1c3-t8">Located on the system where the database resides.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<p>For more information about client DSNs and server DSNs, see <a href="client_server.htm#CHDHEBJB">&#34;Working with the TimesTen Client and Server&#34;</a>.</p>
</div>
<!-- class="sect2" -->
<a id="BCGHIDGA"></a>
<div id="TTOPR127" class="sect2">
<h3 class="sect2">Connection attributes for Data Manager <a id="sthref35"></a>DSNs or server DSNs</h3>
<p>There are four types of TimesTen Data Manager DSN or server DSN attributes:</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
For a complete description of all attributes, see <a class="olink TTREF114" href="../TTREF/attribute.htm#TTREF114">&#34;Connection Attributes&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</div>
<ul>
<li>
<p><span class="bold">Data Store attributes</span> are associated with a database when it is created and cannot be modified by subsequent connections. They can only be changed by destroying and re-creating the database.</p>
<p>The following are the most commonly used data store attributes:</p>
<ul>
<li>
<p><code>DataStore</code>: Directory name and file name prefix of the database.</p>
</li>
<li>
<p><code>LogDir</code>: Directory name of the database transaction log files. By default, the transaction log files reside in the checkpoint files directory. Placing the transaction log files and checkpoint files on different disks can improve system throughput.</p>
</li>
<li>
<p><code>DatabaseCharacterSet</code>: Required character set specification that defines the storage encoding.</p>
</li>
</ul>
</li>
<li>
<p><span class="bold">First connection attributes</span> are used when the TimesTen database is loaded into memory. Only the instance administrator can load a database with first connection attribute settings. By default, TimesTen loads an idle database, which is a database with no connections, into memory when a first connection is made to it. These attributes persist for all subsequent connections until the last connection to the database is closed. First connection attributes can be modified only when the TimesTen database is unloaded and then the instance administrator reconnects with different values for the first connection attributes.</p>
<p>The following are the most commonly used first connection attributes:</p>
<ul>
<li>
<p><code>PermSize</code>: Configures the allocated size of the database&#39;s permanent memory region. The permanent memory region contains persistent database elements. TimesTen only writes the permanent memory region to disk during a checkpoint operation.</p>
</li>
<li>
<p><code>TempSize</code>: Configures the allocated size of the database&#39;s temporary memory region. The temporary memory region contains transient data generated when executing statements.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Your system must have sufficient main memory to accommodate the entire database. For more details on setting region sizes, see <a href="#BCGIDAJG">&#34;Specifying the size of a database&#34;</a>.</div>
</li>
</ul>
</li>
<li>
<p><span class="bold">General connection attributes</span> are set by each connection and persist for the duration of the connection. Each concurrent connection can have different values.</p>
<p>The following are the most commonly used general connection attributes:</p>
<ul>
<li>
<p><code>UID</code>: Specifies the user name to be used for the connection to the database, whether using a direct or client/server connection. To connect as the instance administrator or as an external user, you do not need to specify an user name. When you do not specify an user name, TimesTen assumes that the <code>UID</code> is the user name identified by the operating system.</p>
</li>
<li>
<p><code>PWD</code>: Specifies the password that corresponds with the specified <code>UID</code>. For internal users, if you do not set the <code>PWD</code> attribute in the <code>odbc.ini</code> file for the specified DSN or in the connection string, TimesTen prompts for the password. For external users, you do not provide the password as it is verified by the operating system.</p>
<p>When you initiate a client/server connection, the password sent for the connection is encrypted by the client/server protocol.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
For more information on the <code>UID</code> and <code>PWD</code> general connection attributes, see <a class="olink TTREF173" href="../TTREF/attribute.htm#TTREF173">&#34;UID and PWD&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>. See <a href="accesscontrol.htm#BABDGBBI">&#34;Managing users to control authentication&#34;</a> for details on the instance administrator, external users, or internal users.</div>
</li>
<li>
<p><code>PWDCrypt</code>: Specifies the encrypted password that corresponds with the specified <code>UID</code>.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you provide connection attributes in the connection string, this overrides the connection attributes set in the DSN. See <a href="#BCGGFDGJ">&#34;Connecting to a database using a connection string&#34;</a> for details.</div>
</li>
<li>
<p><span class="bold">TimesTen Cache attributes</span> enable you to enter the Oracle Service Identifier for the Oracle database instance from which data is loaded into TimesTen.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
See <a href="client_server.htm#CHDHEBJB">&#34;Working with the TimesTen Client and Server&#34;</a> for a description of the connection attributes that can be used with the TimesTen Client ODBC driver.</div>
<p>On Windows, you specify attributes in the ODBC Data Source Administrator.</p>
<p>On UNIX, you specify attributes in the <code>odbc.ini</code> file. Attributes that do not appear in the <code>odbc.ini</code> file assume their default value.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABEHJCF"></a>
<div id="TTOPR652" class="sect1">
<h2 class="sect1">Defining a Data Manager DSN</h2>
<p>The following sections describe how to create a Data Manager DSN on either platform:</p>
<ul>
<li>
<p><a href="#BCGCABBI">Creating a Data Manager DSN on Windows</a></p>
</li>
<li>
<p><a href="#BCGFEHHF">Creating a Data Manager DSN on UNIX</a></p>
</li>
</ul>
<a id="BCGCABBI"></a>
<div id="TTOPR129" class="sect2">
<h3 class="sect2">Creating a Data Manager DSN on Windows</h3>
<p>The following sections describe how to create a DSN on Windows:</p>
<ul>
<li>
<p><a href="#BCGJHHHF">Specify the ODBC driver</a></p>
</li>
<li>
<p><a href="#BCGHAIBG">Specify the Data Manager DSN</a></p>
</li>
<li>
<p><a href="#BCGFCHEE">Specify the connection attributes</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
For additional examples of setting up a Data Manager DSN, see <a href="#BCGCGAIG">&#34;DSN examples&#34;</a>.</div>
<a id="BCGJHHHF"></a>
<div id="TTOPR130" class="sect3">
<h4 class="sect3">Specify the ODBC <a id="sthref36"></a>driver</h4>
<p>Specify the ODBC driver in the ODBC Data Source Administrator.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
JDBC users need to specify the ODBC driver to be used by the JDBC driver, as described in <a href="#BCGGGIHA">&#34;Connecting using the TimesTen JDBC driver and driver manager&#34;</a>.</div>
<ol>
<li>
<p>On the Windows Desktop from the <span class="bold">Start</span> menu, select <span class="bold">Settings</span>, <span class="bold">Control Panel</span>, <span class="bold">Administrative Tools</span>, and then select <span class="bold">Data Sources (ODBC)</span>. This opens the ODBC Data Source Administrator.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are using a 32-bit TimesTen installation on a 64-bit Windows system, start the 32-bit ODBC Data Source Administrator with the following executable:
<pre>C:\WINDOWS\SysWOW64\odbcad32.exe
</pre></div>
</li>
<li>
<p>Choose whether you want to create a <span class="bold">User DSN</span> or <a id="sthref37"></a><span class="bold">System DSN</span>. For a description of user and system DSNs, see <a href="#BCGBIAFB">&#34;Overview of user and system DSNs&#34;</a>.</p>
</li>
<li>
<p>Perform one of the following:</p>
<ul>
<li>
<p>Select an existing TimesTen data source and click <span class="bold">Configure</span>.</p>
</li>
<li>
<p>Click <span class="bold">Add</span>. Then, select the appropriate TimesTen driver from the list. Click <span class="bold">Finish</span>. This displays the TimesTen ODBC Setup dialog.</p>
</li>
</ul>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
For a list of TimesTen ODBC drivers, see <a href="#BCGGBJJB">&#34;Connecting using TimesTen ODBC drivers&#34;</a>.</div>
</div>
<!-- class="sect3" -->
<a id="BCGHAIBG"></a>
<div id="TTOPR131" class="sect3">
<h4 class="sect3">Specify the Data Manager DSN</h4>
<p>On the Data Store tab of the TimesTen ODBC Setup dialog, specify a data source name (DSN), a database directory path and prefix, and a database character set. The database directory path cannot reference a mapped drive. See <a href="#BCGEGHDF">Figure 1-2</a>.</p>
<div id="TTOPR132" class="figure">
<p class="titleinfigure"><a id="BCGEGHDF"></a>Figure 1-2 Data Store tab</p>
<img width="533" height="427" src="./img/odbc_empty.gif" alt="Description of Figure 1-2 follows"/><br/>
<a id="sthref38" href="./img_text/odbc_empty.htm">Description of &#34;Figure 1-2 Data Store tab&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>For an explanation of the DSN, database path and prefix, see <a href="#BCGBEEBG">&#34;Specifying Data Source Names to identify TimesTen databases&#34;</a>. For an explanation of database character sets, see <a href="globalization.htm#CJHBBGCC">&#34;Choosing a database character set&#34;</a>. The description field is optional.</p>
</div>
<!-- class="sect3" -->
<a id="BCGFCHEE"></a>
<div id="TTOPR133" class="sect3">
<h4 class="sect3">Specify the connection <a id="sthref39"></a>attributes</h4>
<p>Indicate the desired connection attributes under the <span class="bold">First Connection</span>, <span class="bold">General Connection</span>, and <span class="bold">NLS Connection</span> tabs of the TimesTen ODBC Setup dialog as shown in <a href="#BCGGIAJH">Figure 1-3</a>, <a href="#BCGFAAFJ">Figure 1-4</a>,and <a href="#BCGEJIGH">Figure 1-5</a>. In addition, if you are using TimesTen Cache for an Oracle database, specify the connection attributes shown in <a href="#BCGFFJFF">Figure 1-6</a>. If you are using a multi-threaded client/server configuration, specify the connection attributes shown in <a href="#BCGFEJAC">Figure 1-7</a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
For a description of the connection attributes, see <a class="olink TTREF114" href="../TTREF/attribute.htm#TTREF114">&#34;Connection Attributes&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</div>
<div id="TTOPR134" class="figure">
<p class="titleinfigure"><a id="BCGGIAJH"></a>Figure 1-3 First Connection Attributes</p>
<img width="533" height="424" src="./img/odbc_firstcon.gif" alt="Description of Figure 1-3 follows"/><br/>
<a id="sthref40" href="./img_text/odbc_firstcon.htm">Description of &#34;Figure 1-3 First Connection Attributes&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<div id="TTOPR135" class="figure">
<p class="titleinfigure"><a id="BCGFAAFJ"></a>Figure 1-4 General Connection Attributes</p>
<img width="533" height="424" src="./img/odbc_gencon.gif" alt="Description of Figure 1-4 follows"/><br/>
<a id="sthref41" href="./img_text/odbc_gencon.htm">Description of &#34;Figure 1-4 General Connection Attributes&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<div id="TTOPR136" class="figure">
<p class="titleinfigure"><a id="BCGEJIGH"></a>Figure 1-5 NLS Connection Attributes</p>
<img width="533" height="427" src="./img/odbc_nls.gif" alt="Description of Figure 1-5 follows"/><br/>
<a id="sthref42" href="./img_text/odbc_nls.htm">Description of &#34;Figure 1-5 NLS Connection Attributes&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<div id="TTOPR137" class="figure">
<p class="titleinfigure"><a id="BCGFFJFF"></a>Figure 1-6 TimesTen Cache Attributes</p>
<img width="535" height="429" src="./img/odbc_cache.gif" alt="Description of Figure 1-6 follows"/><br/>
<a id="sthref43" href="./img_text/odbc_cache.htm">Description of &#34;Figure 1-6 TimesTen Cache Attributes&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<div id="TTOPR138" class="figure">
<p class="titleinfigure"><a id="BCGFEJAC"></a>Figure 1-7 Server Attributes</p>
<img width="536" height="428" src="./img/odbc_server.gif" alt="Description of Figure 1-7 follows"/><br/>
<a id="sthref44" href="./img_text/odbc_server.htm">Description of &#34;Figure 1-7 Server Attributes&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<div id="TTOPR702" class="figure">
<p class="titleinfigure"><a id="BABFJCHH"></a>Figure 1-8 PL/SQL Attributes</p>
<img width="536" height="427" src="./img/odbc_plsql.gif" alt="Description of Figure 1-8 follows"/><br/>
<a id="sthref45" href="./img_text/odbc_plsql.htm">Description of &#34;Figure 1-8 PL/SQL Attributes&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>Click <span class="bold">OK</span> when finished.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BCGFEHHF"></a>
<div id="TTOPR139" class="sect2">
<h3 class="sect2">Creating a Data Manager DSN on UNIX</h3>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#BCGFJEHE">Create a user or system odbc.ini file</a></p>
</li>
<li>
<p><a href="#BABBCJJG">Using environment variables in database path names</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
For examples on defining a DSN, see <a href="#BCGCGAIG">&#34;DSN examples&#34;</a>.</div>
<a id="BCGFJEHE"></a>
<div id="TTOPR140" class="sect3">
<h4 class="sect3">Create a user or system odbc.ini file</h4>
<p>On UNIX, user DSNs are defined in the file <code>$HOME/.odbc.ini</code> or in a file named by the <code>ODBCINI</code> environment variable. This file is referred to as the user <code>odbc.ini</code> file. System DSNs are defined in the system <code>odbc.ini</code> file, which is located in <code><span class="codeinlineitalic">install_dir</span></code><code>/info/sys.odbc.ini</code>.</p>
<p>The syntax for user and system <code>odbc.ini</code> files are the same. The syntax is described in <a href="#BCGIFGIB">&#34;odbc.ini file entry descriptions&#34;</a>. The system <code>odbc.ini</code> file is created when TimesTen is installed on the system. Users must create their own user <code>odbc.ini</code> file.</p>
<p>Perform the following to create the DSN:</p>
<ol>
<li>
<p>Specify the DSN in the <code>odbc.ini</code> file. The DSN appears inside square brackets at the top of the DSN definition on a line by itself. For example:</p>
<pre>[AdminDS]
</pre></li>
<li>
<p>Specify the <a id="sthref46"></a>ODBC driver.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
JDBC users need to specify the ODBC driver to be used by the JDBC driver, as described in <a href="#BCGGGIHA">&#34;Connecting using the TimesTen JDBC driver and driver manager&#34;</a>.</div>
<p>To set the TimesTen driver, specify the <a id="sthref47"></a><code>DRIVER</code> attribute in the <code>odbc.ini</code> file. The following example provides the TimesTen ODBC driver that this DSN is configured to use:</p>
<pre>[AdminDS]
DRIVER=<span class="italic">install_dir</span>/lib/libtten.so
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
For a list of TimesTen ODBC drivers that you can use, see <a href="#BABDHEJC">Table 1-2</a>.</div>
</li>
<li>
<p>Specify the database directory path and prefix in the <code>odbc.ini</code> file. The following example defines <code>/users/robin</code> as the database directory path and <code>FixedDs</code> as the <a id="sthref48"></a>prefix for the database files:</p>
<pre>DataStore=/users/robin/FixedDs
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
For more information, see <a href="#BCGBEEBG">&#34;Specifying Data Source Names to identify TimesTen databases&#34;</a>.</div>
<p>The database directory path can use environment variables, as discussed in <a href="#BABBCJJG">&#34;Using environment variables in database path names&#34;</a>.</p>
</li>
<li>
<p>Choose a database character set. The following example defines the database character set in the <code>odbc.ini</code> file as <code>US7ASCII</code>:</p>
<pre>DatabaseCharacterSet=US7ASCII
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
For more information, see <a href="globalization.htm#CJHBBGCC">&#34;Choosing a database character set&#34;</a>.</div>
</li>
<li>
<p><a id="sthref49"></a><a id="sthref50"></a><a id="sthref51"></a><a id="sthref52"></a>Set connection attributes in your <code>odbc.ini</code> file. Attributes that do not appear in the <code>odbc.ini</code> file assume their default value.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
See <a class="olink TTREF114" href="../TTREF/attribute.htm#TTREF114">&#34;Connection Attributes&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Reference</span>. For examples, see <a href="#BCGCGAIG">&#34;DSN examples&#34;</a>.</div>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="BABBCJJG"></a>
<div id="TTOPR653" class="sect3">
<h4 class="sect3">Using environment variables in <a id="sthref53"></a><a id="sthref54"></a>database path names</h4>
<p>You can use environment variables in the specification of the database path name and transaction log file path name. For example, you can specify <code>$HOME/AdminDS</code> for the location of the database.</p>
<p>Environment variables can be expressed either as <code>$varname</code> or <code>$(varname)</code>. The parentheses are optional. A backslash character (\) in the database path name quotes the next character.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Environment variable expansion uses the environment of the process connecting to the database. Different processes may have different values for the same environment variables and may therefore expand the database path name differently. Environment variables can only be used in the user <code>odbc.ini</code> file. They cannot be specified in the system <code>odbc.ini</code> file.</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABBJGCJ"></a>
<div id="TTOPR654" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Defining client and server DSNs</h2>
<p>For directions on how to define client or server DSNs for each platform, see <a href="client_server.htm#BGBHJHDD">&#34;Defining server DSNs on a TimesTen Server system&#34;</a> and <a href="client_server.htm#CHDFCIJH">&#34;Creating client DSNs on a TimesTen Client system&#34;</a>.</p>
</div>
<!-- class="sect1" -->
<a id="BCGHDBDJ"></a>
<div id="TTOPR171" class="sect1">
<h2 class="sect1">Resolution path for a DSN</h2>
<p>When resolving a <a id="sthref55"></a>specific DSN, TimesTen performs the following:</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>If a user DSN and a system DSN with the same name exist, TimesTen retrieves the user DSN.</p>
</li>
<li>
<p>On UNIX, if there are multiple DSNs with the same name in the same <code>odbc.ini</code> file, TimesTen retrieves the first one specified in the file.</p>
</li>
</ul>
</div>
<ol>
<li>
<p>Searches for a user DSN with the specified name in the following files:</p>
<ol>
<li>
<p>The file referenced by the <code>ODBCINI</code> environment variable, if it is set.</p>
</li>
<li>
<p>The <code>.odbc.ini</code> file in the user&#39;s home directory, if the <code>ODBCINI</code> environment variable is not set.</p>
</li>
</ol>
</li>
<li>
<p>If no matching user DSN is found, TimesTen looks for a system DSN with the specified name.</p>
<ol>
<li>
<p>The file referenced by the <code>SYSODBCINI</code> environment variable, if it is set.</p>
</li>
<li>
<p>The <code>sys.odbc.ini</code> file in the daemon home directory, if the <code>SYSODBCINI</code> environment variable is not set.</p>
</li>
<li>
<p>On UNIX, for a non-root installation, the file is located in <code><span class="codeinlineitalic">install_dir</span></code><code>/info/sys.odbc.ini</code>. Or for a root installation, the file is located at <code>/var/TimesTen/InstanceName/sys.odbc.ini</code> or <code>/var/TimesTen/sys.odbc.ini</code>.</p>
</li>
</ol>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BCGCGAIG"></a>
<div id="TTOPR147" class="sect1">
<h2 class="sect1">DSN <a id="sthref56"></a>examples</h2>
<p>This section provides additional examples of how to set up a database:</p>
<ul>
<li>
<p><a href="#BABDFFGA">Setting up a default DSN</a></p>
</li>
<li>
<p><a href="#BCGJAJDI">Setting up a temporary database</a></p>
</li>
<li>
<p><a href="#BABJIDCG">Specifying PL/SQL connection attributes in a DSN</a></p>
</li>
<li>
<p><a href="#BCGEDFHJ">Creating multiple DSNs to a single database</a></p>
</li>
</ul>
<p>For each example, the Windows ODBC Data Source Administrator settings are followed by the corresponding <code>odbc.ini</code> entries for UNIX.</p>
<a id="BABDFFGA"></a>
<div id="TTOPR759" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Setting up a default DSN<a id="sthref57"></a><a id="sthref58"></a><a id="sthref59"></a></h3>
<p>Optionally, you can add a default data source definition. At connect time, if an application specifies a DSN that is not in the <code>odbc.ini</code> file or if the application does not specify a DSN, the default DSN is used to configure the connection to the TimesTen database.</p>
<p>The default data source must be named <code>default</code> when defined. The default DSN can be defined with the same attributes as any other data source, which are described in <a href="#BCGHECHI">&#34;DSN specification&#34;</a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
On Windows platforms, when using the &#34;ODBC Data Source Administrator&#34; to create the default DSN, you can specify only one default DSN in each of the User DSN, System DSN, and File DSN tabs. The default DSN must be associated with an ODBC driver.</div>
<p>When connecting, TimesTen uses the default DSN in any of the following scenarios:</p>
<ul>
<li>
<p>When you specify the <code>DSN=default</code> keyword-value pair in the connection string.</p>
</li>
<li>
<p>When you specify an undefined value for the <code>DSN</code> connection attribute in the connection string.</p>
</li>
<li>
<p>When you do not specify any value for the <code>DSN</code> connection attribute in the connection string.</p>
</li>
</ul>
<p>However, in general, it is best to connect with a specific data source.</p>
<p>When using a default DSN, provide <code>default</code> as the DSN name when performing TimesTen utility operations that require a DSN name, such as destroying the database with the <code>ttDestroy</code> utility.</p>
<p>The following example shows the user invoking <code>ttIsql</code> to connect using an undefined DSN. Since there is no definition for <code>doesNotExist</code> in the <code>odbc.ini</code> file, TimesTen uses the <code>default</code> DSN to create the database and initiate a connection to it. It also demonstrates the user invoking both the <code>ttStatus</code> and <code>ttDestroy</code> utilities with <code>default</code> specified as the DSN. In addition, it shows the error thrown if the user provides <code>doesNotExist</code> as the DSN, instead of <code>default</code>.</p>
<pre>$ ttIsql doesNotExist;
 
Copyright (c) 1996-2011, Oracle.  All rights reserved.
Type ? or &#34;help&#34; for help, type &#34;exit&#34; to quit ttIsql.
 
connect &#34;DSN=doesNotExist&#34;;
Connection successful:
Command&gt; exit
Disconnecting...
Done.
]$ ttStatus default
TimesTen status report as of Mon Oct 22 12:27:52 2012
 
Daemon pid 13623 port 16138 instance myhost
TimesTen server pid 13632 started on port 16140
------------------------------------------------------------------------
Data store /timesten/install/info/default
There are no connections to the data store
Replication policy  : Manual
Cache Agent policy  : Manual
PL/SQL enabled.
------------------------------------------------------------------------
Accessible by group xyz
End of report
$ ttDestroy doesNotExist;
Failed to destroy data store: Specified DSN is not found in user and system
odbc.ini files (or registry)
$ ttDestroy default; 
</pre>
<p>The following example shows how to configure connection attributes for a default DSN. While not necessary, you can configure connection attributes for a default DSN as you would configure any other DSN. Notice that it is not specified in the <span class="italic">ODBC Data Sources</span> section.</p>
<pre>[ODBC Data Sources]
sampledb_1122=TimesTen 11.2.2 Driver
...
 
[default]
Driver=<span class="italic">install_dir</span>/lib/libtten.so
DataStore=<span class="italic">install_dir</span>/info/DemoDataStore/default
PermSize=40
TempSize=64
DatabaseCharacterSet=US7ASCII

[sampledb_1122]
Driver=<span class="italic">install_dir</span>/lib/libtten.so
DataStore=<span class="italic">install_dir</span>/info/DemoDataStore/sampledb_1122
PermSize=40
TempSize=32
PLSQL=1
DatabaseCharacterSet=US7ASCII
</pre></div>
<!-- class="sect2" -->
<a id="BCGJAJDI"></a>
<div id="TTOPR148" class="sect2">
<h3 class="sect2">Setting up a temporary <a id="sthref60"></a>database</h3>
<p>This example illustrates how to set up a temporary database. For information on temporary databases, see <a href="comp.htm#CHDBEDHC">&#34;Database overview&#34;</a>.</p>
<p>On Windows, you can use the settings in the TimesTen ODBC Setup dialog to set up a temporary database. See <a href="#BCGDBCGH">Figure 1-9</a> and <a href="#CEGEGDCD">Figure 1-10</a>.</p>
<div id="TTOPR149" class="figure">
<p class="titleinfigure"><a id="BCGDBCGH"></a>Figure 1-9 Data Store tab</p>
<img width="532" height="427" src="./img/odbc_temp.gif" alt="Description of Figure 1-9 follows"/><br/>
<a id="sthref61" href="./img_text/odbc_temp.htm">Description of &#34;Figure 1-9 Data Store tab&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<div id="TTOPR784" class="figure">
<p class="titleinfigure"><a id="CEGEGDCD"></a>Figure 1-10 First Connection Attributes</p>
<img width="535" height="427" src="./img/odbc_temp2.gif" alt="Description of Figure 1-10 follows"/><br/>
<a id="sthref62" href="./img_text/odbc_temp2.htm">Description of &#34;Figure 1-10 First Connection Attributes&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>To set up a temporary database on UNIX, create the following entries in your <code>odbc.ini</code> file. For a list of drivers for all UNIX platforms, see the table in <a href="#BCGGBJJB">&#34;Connecting using TimesTen ODBC drivers&#34;</a>.</p>
<p>The text in square brackets is the data source name.</p>
<pre>[TempDs]
Driver=<span class="italic">install_dir</span>/lib/libtten.so
DataStore=/users/robin/TempDs
#this is a temporary database
Temporary=1
#create database if it is not found
AutoCreate=1
#log database updates to disk
LogPurge=1
DatabaseCharacterSet=US7ASCII
</pre></div>
<!-- class="sect2" -->
<a id="BABJIDCG"></a>
<div id="TTOPR151" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Specifying PL/SQL connection attributes in a DSN</h3>
<p>You can specify values for PL/SQL general connection attributes.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
For a complete list of PL/SQL connection attributes, see <a class="olink TTREF114" href="../TTREF/attribute.htm#TTREF114">&#34;Connection Attributes&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</div>
<p>The following are some PL/SQL connection attributes:</p>
<ul>
<li>
<p><a id="sthref63"></a><a id="sthref64"></a><code>PLSCOPE_SETTINGS</code> - Controls whether the PL/SQL compiler generates cross-reference information.</p>
</li>
<li>
<p><a id="sthref65"></a><a id="sthref66"></a><code>PLSQL_OPTIMIZE_LEVEL</code> - Sets the optimization level that is used to compile PL/SQL library units.</p>
</li>
<li>
<p><a id="sthref67"></a><a id="sthref68"></a><code>PLSQL_MEMORY_ADDRESS</code> - Specifies the virtual address, as a hexadecimal value, at which the PL/SQL shared memory segment is loaded into each process that uses the TimesTen direct drivers. This memory address must be identical in all connections to your database and in all processes that connect to your database.</p>
</li>
<li>
<p><a id="sthref69"></a><a id="sthref70"></a><code>PLSQL_MEMORY_SIZE</code> - Determines the size, in megabytes, of the PL/SQL shared memory segment.</p>
</li>
</ul>
<p>This example creates the <code>PLdsn</code> DSN, enables PL/SQL by setting PLSQL to &#34;1&#34; and sets the PL/SQL shared memory segment size to 32 MB.</p>
<pre>[PLdsn]
Datastore=/users/user1/PLdsn
PermSize=32
DatabaseCharacterSet=AL32UTF8
ConnectionCharacterSet=AL32UTF8
PLSQL=1
PLSQL_MEMORY_SIZE=32
</pre>
<p>For more examples, see <a class="olink TTPLS257" href="../TTPLS/plsqlenv.htm#TTPLS257">&#34;PL/SQL connection attributes&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database PL/SQL Developer&#39;s Guide</span>.</p>
</div>
<!-- class="sect2" -->
<a id="BCGEDFHJ"></a>
<div id="TTOPR152" class="sect2">
<h3 class="sect2">Creating multiple DSNs to a single database</h3>
<p>You can create two or more DSNs that refer to the same database but have different connection attributes.<a id="sthref71"></a><a id="sthref72"></a></p>
<p>This example creates two DSNs, <code>AdminDSN</code> and <code>GlobalDSN</code>. The DSNs are identical except for their connection character sets. Applications that use the <code>US7ASCII</code> character set can connect to the <code>TTDS</code> database by using <code>AdminDSN</code>. Applications that use multibyte characters can connect to the <code>TTDS</code> database by using <code>GlobalDSN</code>.</p>
<p>For Windows, use the ODBC Data Source Administrator to define AdminDSN as shown in <a href="#BCGEGABH">Figure 1-11</a>. <code>AdminDSN</code> is created with the <code>AL32UTF8</code> database character set. <a href="#BCGJFIDJ">Figure 1-12</a> shows that <code>US7ASCII</code> is the connection character set for <code>AdminDSN</code>.</p>
<div id="TTOPR153" class="figure">
<p class="titleinfigure"><a id="BCGEGABH"></a>Figure 1-11 Creating AdminDSN using TTDS database</p>
<img width="535" height="427" src="./img/adminds2.gif" alt="Description of Figure 1-11 follows"/><br/>
<a id="sthref73" href="./img_text/adminds2.htm">Description of &#34;Figure 1-11 Creating AdminDSN using TTDS database&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<div id="TTOPR154" class="figure">
<p class="titleinfigure"><a id="BCGJFIDJ"></a>Figure 1-12 Setting the connection character set for AdminDSN</p>
<img width="535" height="431" src="./img/admin_concharset.gif" alt="Description of Figure 1-12 follows"/><br/>
<a id="sthref74" href="./img_text/admin_concharset.htm">Description of &#34;Figure 1-12 Setting the connection character set for AdminDSN&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p><code>GlobalDSN</code> is also created with the <code>AL32UTF8</code> database character set, as shown in <a href="#BCGECECA">Figure 1-13</a>. <a href="#BCGFFDHF">Figure 1-14</a> shows that the connection character set for <code>GlobalDSN</code> is <code>AL32UTF8</code>.</p>
<div id="TTOPR155" class="figure">
<p class="titleinfigure"><a id="BCGECECA"></a>Figure 1-13 Creating GlobalDSN using TTDS database</p>
<img width="533" height="428" src="./img/global_dsn.gif" alt="Description of Figure 1-13 follows"/><br/>
<a id="sthref75" href="./img_text/global_dsn.htm">Description of &#34;Figure 1-13 Creating GlobalDSN using TTDS database&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<div id="TTOPR156" class="figure">
<p class="titleinfigure"><a id="BCGFFDHF"></a>Figure 1-14 Setting the connection character set for GlobalDSN</p>
<img width="538" height="427" src="./img/global_concharset.gif" alt="Description of Figure 1-14 follows"/><br/>
<a id="sthref76" href="./img_text/global_concharset.htm">Description of &#34;Figure 1-14 Setting the connection character set for GlobalDSN&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>The next example shows how to specify the DSNs on UNIX. It uses the TimesTen Data Manager ODBC driver for Solaris.</p>
<p>The text in square brackets is the data source name.</p>
<pre>[AdminDSN]
Driver=<span class="italic">install_dir</span>/lib/libtten.so
Datastore=/data/TTDS
DatabaseCharacterSet=AL32UTF8
ConnectionCharacterSet=US7ASCII

[GlobalDSN]
Driver=<span class="italic">install_dir</span>/lib/libtten.so
DataStore=/data/TTDS
DatabaseCharacterSet=AL32UTF8
ConnectionCharacterSet=AL32UTF8
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BCGIFGIB"></a>
<div id="TTOPR168" class="sect1">
<h2 class="sect1">odbc.ini file entry descriptions</h2>
<p>The following sections describe the entries in the <code>odbc.ini</code> file:</p>
<ul>
<li>
<p><a href="#BCGBAADG">ODBC Data Sources</a></p>
</li>
<li>
<p><a href="#BCGHECHI">DSN specification</a></p>
</li>
<li>
<p><a href="#BCGBIIGE">odbc.ini file example</a></p>
</li>
</ul>
<a id="BCGBAADG"></a>
<div id="TTOPR172" class="sect2">
<h3 class="sect2">ODBC Data Sources</h3>
<p>Each entry in the optional ODBC Data Sources section lists a data source and a description of the driver it uses. The data source section has the following format:</p>
<pre>[ODBC Data Sources]
<span class="italic">DSN</span>=<span class="italic">driver-description</span>
</pre>
<ul>
<li>
<p>The <code><span class="codeinlineitalic">DSN</span></code> is required and it identifies the data source to which the driver connects. You choose this name.</p>
</li>
<li>
<p>The <code><span class="codeinlineitalic">driver-description</span></code> is required. It describes the driver that connects to the data source.</p>
</li>
</ul>
<p>The optional Data Sources section, when present in the system DSN file on the TimesTen Server, is used during the setup of client DSNs. All system DSNs are made available to the client DSN setup for the ODBC Data Source Administrator on the client, which displays all available DSNs on the TimesTen Server. The user can always add a new system DSN in the ODBC Data Source Administrator. When adding DSNs to the system DSN file, you should only include those DSNs that can be advertised to clients. All system DSNs are potentially accessible through the client/server configuration, even if they are not advertised.</p>
</div>
<!-- class="sect2" -->
<a id="BCGHECHI"></a>
<div id="TTOPR173" class="sect2">
<h3 class="sect2">D<a id="sthref77"></a>SN specification</h3>
<p>Each DSN listed in the ODBC Data Sources section has its own DSN specification. The DSN specification for Data Manager DSN has the format shown in <a href="#BABJGCEH">Table 1-3</a>.</p>
<div id="TTOPR174" class="tblhruleformal">
<p class="titleintable"><a id="sthref78"></a><a id="BABJGCEH"></a>Table 1-3 Data Source specification format</p>
<table class="cellalignment3233" title="Data Source specification format" summary="This table contains descriptions of the component of a data source specification." dir="ltr">
<thead>
<tr class="cellalignment3224">
<th class="cellalignment3234" id="r1c1-t29">Component</th>
<th class="cellalignment3234" id="r1c2-t29">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r2c1-t29" headers="r1c1-t29">
<p><code>[</code><code><span class="codeinlineitalic">DSN</span></code><code>]</code></p>
</td>
<td class="cellalignment3230" headers="r2c1-t29 r1c2-t29">
<p>The <code><span class="codeinlineitalic">DSN</span></code> is required. It is the name of the DSN, as specified in the ODBC Data Sources section of your <code>.odbc.ini</code> file.</p>
</td>
</tr>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r3c1-t29" headers="r1c1-t29">
<p><code>Driver=</code><code><span class="codeinlineitalic">driver-path-name</span></code></p>
</td>
<td class="cellalignment3230" headers="r3c1-t29 r1c2-t29">
<p>The TimesTen Data Manager driver that is linked with the data source. This is relevant when using a driver manager or for the server in a client/server scenario.</p>
</td>
</tr>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r4c1-t29" headers="r1c1-t29">
<p><code>DataStore=</code><code><span class="codeinlineitalic">data-store-path-prefix</span></code></p>
</td>
<td class="cellalignment3230" headers="r4c1-t29 r1c2-t29">
<p>The directory path and prefix of the database to access. This is required.</p>
</td>
</tr>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r5c1-t29" headers="r1c1-t29">
<p><code>DatabaseCharacterSet=</code><code><span class="codeinlineitalic">Database-character-set</span></code></p>
</td>
<td class="cellalignment3230" headers="r5c1-t29 r1c2-t29">
<p>The database character set determines the character set in which data is stored. The database character set is required and cannot be altered after the database has been created. For more information, see <a href="globalization.htm#CJHBBGCC">&#34;Choosing a database character set&#34;</a>.</p>
</td>
</tr>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r6c1-t29" headers="r1c1-t29">
<p>Optional attributes</p>
</td>
<td class="cellalignment3230" headers="r6c1-t29 r1c2-t29">
<p>See <a class="olink TTREF114" href="../TTREF/attribute.htm#TTREF114">&#34;Connection Attributes&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Reference</span> for information about attributes.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" -->
<p>For example, the <code>sampledb_1122</code> DSN could have a specification that includes the following:</p>
<pre>[sampledb_1122]
Driver=<span class="italic">install_dir</span>/lib/libtten.so
DataStore=<span class="italic">install_dir</span>/info/DemoDataStore/sampledb_1122
...
</pre>
<p>The database specification for TimesTen client DSN has the format shown in <a href="#BABJHGHE">Table 1-4</a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
While the syntax for the TimesTen client DSN is listed here, full directions for setting the client DSN and server DSN are located in <a href="client_server.htm#BGBHJHDD">&#34;Defining server DSNs on a TimesTen Server system&#34;</a> and <a href="client_server.htm#CHDFCIJH">&#34;Creating client DSNs on a TimesTen Client system&#34;</a>.</div>
<div id="TTOPR175" class="tblhruleformal">
<p class="titleintable"><a id="sthref79"></a><a id="BABJHGHE"></a>Table 1-4 Database specification for TimesTen Client configurations</p>
<table class="cellalignment3233" title="Database specification for TimesTen Client configurations" summary="This table contains descriptions of the component of a data source specification for TimesTen Client configurations." dir="ltr">
<thead>
<tr class="cellalignment3224">
<th class="cellalignment3234" id="r1c1-t31">Component</th>
<th class="cellalignment3234" id="r1c2-t31">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r2c1-t31" headers="r1c1-t31">
<p><code>[</code><code><span class="codeinlineitalic">DSN</span></code><code>]</code></p>
</td>
<td class="cellalignment3230" headers="r2c1-t31 r1c2-t31">
<p>The <code><span class="codeinlineitalic">DSN</span></code> is required. It is the same DSN specified in the ODBC Data Sources section of the <code>.odbc.ini</code> file.</p>
</td>
</tr>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r3c1-t31" headers="r1c1-t31">
<p><code>TTC_Server=</code><code><span class="codeinlineitalic">server-name</span></code></p>
</td>
<td class="cellalignment3230" headers="r3c1-t31 r1c2-t31">
<p>The <code><span class="codeinlineitalic">server-name</span></code> is required. It is the DNS name, host name, IP address or logical server name for the TimesTen Server.</p>
</td>
</tr>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r4c1-t31" headers="r1c1-t31">
<p><code>TTC_Server_DSN=</code><code><span class="codeinlineitalic">server-DSN</span></code></p>
</td>
<td class="cellalignment3230" headers="r4c1-t31 r1c2-t31">
<p>The <code><span class="codeinlineitalic">server-DSN</span></code> is required. It is the name of the data source to access on the TimesTen Server.</p>
</td>
</tr>
<tr class="cellalignment3224">
<td class="cellalignment3230" id="r5c1-t31" headers="r1c1-t31">
<p><code>TTC_Timeout=</code><code><span class="codeinlineitalic">value</span></code></p>
</td>
<td class="cellalignment3230" headers="r5c1-t31 r1c2-t31">
<p>Client connection timeout value in seconds.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
Most TimesTen Data Manager attributes are ignored for TimesTen Client databases.</div>
<p>For example, the client/server data source <code>sampledbCS_1122</code> that connects to <code>sampledb_1122</code> on the TimesTen Server <code>ttserver</code> could have a data source specification that includes the following:</p>
<pre>[sampledbCS_1122]
TTC_Server=ttserver
TTC_SERVER_DSN=sampledb_1122
TTC_Timeout=30
</pre></div>
<!-- class="sect2" -->
<a id="BCGBIIGE"></a>
<div id="TTOPR176" class="sect2">
<h3 class="sect2"><a id="sthref80"></a>odbc.ini file example</h3>
<p><a id="sthref81"></a><a id="sthref82"></a><a id="sthref83"></a><a id="sthref84"></a><a id="sthref85"></a><a id="sthref86"></a><a id="sthref87"></a>The following example shows portions of a UNIX <code>.odbc.ini</code> file:</p>
<pre>...
[ODBC Data Sources]
sampledb_1122=TimesTen 11.2.2 Driver
...
 
[sampledb_1122]
Driver=<span class="italic">install_dir</span>/lib/libtten.so
DataStore=<span class="italic">install_dir</span>/info/DemoDataStore/sampledb_1122
PermSize=40
TempSize=32
PLSQL=1
DatabaseCharacterSet=US7ASCII
...
 
########################################################################
# This following sample definitions should be in the .odbc.ini file
# that is used for the TimesTen 11.2.2 Client.
# The Server Name is set in the TTC_SERVER attribute.
# The Server DSN is set in the TTC_SERVER_DSN attribute.
#########################################################################
 
[ODBC Data Sources]
sampledbCS_1122=TimesTen 11.2.2 Client Driver
...
 
[sampledbCS_1122]
TTC_SERVER=localhost
TTC_SERVER_DSN=sampledb_1122
...
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BCGGFDGJ"></a>
<div id="TTOPR157" class="sect1">
<h2 class="sect1">Connecting to a database using a connection string</h2>
<p>T<a id="sthref88"></a><a id="sthref89"></a>imesTen applications require a DSN or a connection string be specified to connect to a database. For modularity and maintainability, it is better to set attributes in a DSN rather than in a connection string within the application, unless a particular connection requires that specific attribute settings override the settings in the DSN or the default settings.</p>
<p>The syntax for a connection string contains connection attribute definitions, where each attribute is separated by a semicolon.</p>
<p>These precedence rules are used to determine the settings of DSN attributes:</p>
<ol>
<li>
<p>Attribute settings specified in a connection string have the highest precedence.If an attribute appears more than once in a connection string, the first specification is used.</p>
</li>
<li>
<p>If an attribute is not specified in the connection string, the attribute settings that are specified in the DSN are used.</p>
</li>
<li>
<p>Default attribute settings have the lowest precedence.</p>
</li>
</ol>
<p>You can connect to a TimesTen database without a predefined DSN with any ODBC application or the <code>ttIsql</code> utility if the connection string contains the <code>Driver</code>, <code>DataStore</code>, and <code>DatabaseCharacterSet</code> attributes. Define the connection string as follows:</p>
<ul>
<li>
<p>The name or path name of the ODBC driver using the <code>Driver</code> attribute.</p>
<ul>
<li>
<p>On Windows, the value of the <code>Driver</code> attribute should be the name of the TimesTen ODBC Driver. For example, the value can be TimesTen Data Manager 11.2.2.</p>
</li>
<li>
<p>On UNIX systems, the value of the <code>Driver</code> attribute should be the pathname of the TimesTen ODBC Driver shared library file. The file resides in the <code><span class="codeinlineitalic">install_dir</span></code><code>/lib</code> directory.</p>
</li>
</ul>
</li>
<li>
<p>The database path and file name prefix using the <code>DataStore</code> attribute.</p>
</li>
<li>
<p>The character set for the database using the <code>DatabaseCharacterSet</code> attribute.</p>
</li>
</ul>
<p>The following example shows how you can connect providing the <code>Driver</code>, <code>DataStore</code>, and <code>DatabaseCharacterSet</code> attributes using a connection string in the <code>ttIsql</code> utility:</p>
<pre>C:\ ttIsql
Copyright (c) 1996-2011, Oracle.  All rights reserved.
Type ? or &#34;help&#34; for help, type &#34;exit&#34; to quit ttIsql.
Command&gt; connect &#34;Driver=TimesTen Data Manager 
11.2.2;DataStore=C:\sales\admin;DatabaseCharacterSet=US7ASCII&#34;;
</pre></div>
<!-- class="sect1" -->
<a id="BABFFCGC"></a>
<div id="TTOPR728" class="sect1">
<h2 class="sect1">Specifying a RAM policy<a id="sthref90"></a><a id="sthref91"></a></h2>
<p>TimesTen allows you to specify a RAM policy that determines when databases are loaded and unloaded from main memory. For each database, you can have a different RAM policy.</p>
<p>The RAM policy options are as follows:</p>
<ul>
<li>
<p><span class="italic">inUse</span>: The database is loaded into memory when the first connection to the database is opened, and it remains in memory as long as it has at least one active connection. When the last connection to the database is closed, the database is unloaded from memory. This is the default policy.</p>
</li>
<li>
<p><span class="italic">inUse with RamGrace</span>: The database is loaded into memory when the first connection to the database is opened, and it remains in memory as long as it has at least one active connection. When the last connection to the database is closed, the database remains in memory for a &#34;grace period.&#34; The database is unloaded from memory only if no processes have connected to the database for the duration of the grace period. The grace period can be set or reset at any time. It stays in effect until the next time the grace period is changed.</p>
</li>
<li>
<p><span class="italic">always</span>: The database always stays in memory. If the TimesTen daemon is restarted, it automatically reloads the database. The database is always automatically reloaded unless an unrecoverable error condition occurs. For more details on database error recovery, see <a href="#BABIIAID">&#34;Changes to RAM policy after automatic recovery fails&#34;</a>.</p>
</li>
<li>
<p><span class="italic">manual</span>: The database is manually loaded and unloaded by system administrators. Once loaded, TimesTen ensures that the database stays loaded until the administrator unloads the database or unless an unrecoverable error condition occurs. For more details on database error recovery, see <a href="#BABIIAID">&#34;Changes to RAM policy after automatic recovery fails&#34;</a>.</p>
</li>
</ul>
<p><a id="sthref92"></a>A system administrator can set the RAM policy or manually load or unload the database with either the <code>ttAdmin</code> utility or the C API RAM policy utilities. For more details, see <a class="olink TTREF321" href="../TTREF/util.htm#TTREF321">&#34;ttAdmin&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span> or the <a class="olink TTCDV371" href="../TTCDV/c_ref.htm#TTCDV371">&#34;TimesTen Utility API&#34;</a> chapter in the <span class="italic">Oracle TimesTen In-Memory Database C Developer&#39;s Guide</span>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
By default, if an automatic recovery of the database is unsuccessful after a fatal error, <a id="sthref93"></a>TimesTen changes the <code>always</code> and <code>manual</code> RAM policies to <code>InUse</code> to prevent reoccurring failures. For more information on how to prevent the RAM policy from changing, see <a href="#BABIIAID">&#34;Changes to RAM policy after automatic recovery fails&#34;</a>.</div>
<p>The following example sets the RAM policy to <code>always</code> for the database identified by the <code>ttdata</code> DSN:</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The first line shows the RAM residence policy set to <code>always</code>. The rest of the output details other policies you can set with the <code>ttAdmin</code> utility. See <a class="olink TTREF321" href="../TTREF/util.htm#TTREF321">&#34;ttAdmin&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span> for more information.</div>
<pre>% ttadmin &ndash;rampolicy always ttdata
RAM Residence Policy            : always
Replication Agent Policy        : manual
Replication Manually Started    : False
Cache Agent Policy              : manual
Cache Agent Manually Started    : False
</pre>
<a id="BABIIAID"></a>
<div id="TTOPR729" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Changes to RAM policy after automatic recovery fails<a id="sthref94"></a><a id="sthref95"></a><a id="sthref96"></a><a id="sthref97"></a><a id="sthref98"></a><a id="sthref99"></a><a id="sthref100"></a></h3>
<p>If a fatal error invalidates the database and the automatic database recovery performed by TimesTen is unsuccessful, the following occurs by default:</p>
<ul>
<li>
<p>TimesTen changes the <code>always</code> and <code>manual</code> RAM policies to <code>InUse</code> to prevent reoccurring errors. For both the <code>always</code> and <code>manual</code> RAM policies, TimesTen automatically reloads the database after each failure, even if the same failure occurs multiple times. However, for the <code>InUse</code> RAM policy, TimesTen does not automatically reload the database until a process tries to connect.</p>
</li>
<li>
<p>If a fatal error causes the database to be invalidated, user processes connected to this database may not know that the database has been invalidated. In this case, the invalidated database exists in memory until all user processes close their connections. Thus, the invalidated database could coexist in memory with a newly reloaded database.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Reloading a large database into memory when an invalidated database still exists in memory can fill up available RAM. See <a href="#BABBGJDG">&#34;Preventing an automatic reload of the database after failure&#34;</a> on how to stop automatic reloading of the database.</div>
<p>You can modify the default database recovery behavior by setting the <code>-enablePolicyInactive</code> option in the <code>ttendaemon.options</code> file before you start the TimesTen daemon. Once set, the following is the behavior when automatic recovery fails:</p>
<ul>
<li>
<p>The RAM policies of <code>manual</code> and <code>always</code> remain unchanged.</p>
</li>
<li>
<p>The replication and cache agents are not restarted.</p>
</li>
<li>
<p>After several failed attempts to reload the database, TimesTen sets the <code>policyInactive</code> mode, which prevents any more attempts at loading the database.</p>
</li>
</ul>
<p>Any one of the following clears the <code>policyInactive</code> mode, so that normal behavior can resume:</p>
<ul>
<li>
<p>The TimesTen daemon restarts.</p>
</li>
<li>
<p>A process connects successfully.</p>
</li>
<li>
<p>The administrator executes a <code>ttAdmin</code> command for the database that changes the RAM policy, performs a RAM load, or starts either the cache or replication agents.</p>
</li>
</ul>
<p>You can see if <code>policyInactive</code> mode is active when one of the following messages is displayed in the <code>ttStatus</code> output:</p>
<ul>
<li>
<p>&#34;<code>Automatic reloads disabled.</code>&#34;</p>
</li>
<li>
<p>&#34;<code>Data store should be manually loaded, but inactive due to failures.</code>&#34; This is shown when the RAM policy is <code>manual</code>.</p>
</li>
<li>
<p>&#34;<code>Data store should be loaded, but inactive due to failures.</code>&#34; This is shown if the RAM policy is <code>always</code>.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BABBGJDG"></a>
<div id="TTOPR730" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Preventing an automatic reload of the database after failure<a id="sthref101"></a><a id="sthref102"></a><a id="sthref103"></a><a id="sthref104"></a><a id="sthref105"></a></h3>
<p>After a fatal error that causes the database to be invalidated, TimesTen attempts to reload and recover the database, as long as it is consistent with the settings for the RAM policy, cache agent policy, and replication agent policy. However, user processes could still be connected to the invalidated database if they do not know that the original database has been invalidated. In this case, the invalidated database exists in memory until all user processes close their connections. Thus, the invalidated database could coexist in memory with the newly reloaded database. This can be an issue if the database is large.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Not only does the RAM policy determines whether the database is reloaded and recovered, but the cache agent and replication agent policies also factor into whether the database is reloaded after invalidation. If the cache agent and replication agent policies are set so that the daemon automatically restarts the agent after a failure, the agent initiates a connection to the database. If this is the first connection, the daemon reloads the database and performs a recovery.
<p>For more information on cache agent and replication agent policies, see <a class="olink TTREP428" href="../TTREP/setup.htm#TTREP428">&#34;Starting and stopping the replication agents&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Replication Guide</span>, <a class="olink TTCAC201" href="../TTCAC/prereqs.htm#TTCAC201">&#34;Set a cache agent start policy&#34;</a> in the <span class="italic">Oracle TimesTen Application-Tier Database Cache User&#39;s Guide</span>, and <a class="olink TTREF321" href="../TTREF/util.htm#TTREF321">&#34;ttAdmin&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
</div>
<p>You can prevent the database from being automatically reloaded after an invalidation using the <code>ttAdmin -noautoreload</code> command. You can reset to the default automatic database reload behavior with the <code>ttAdmin -autoreload</code> command. See <a class="olink TTREF321" href="../TTREF/util.htm#TTREF321">&#34;ttAdmin&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span> for more details.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code><a id="sthref106"></a>ttRamPolicyAutoReloadSet</code> built-in procedure performs the same actions as <code>ttAdmin -noautoreload</code> and <code>ttAdmin -autoreload</code>. See &#34;<a class="olink TTREF781" href="../TTREF/proced.htm#TTREF781">ttRamPolicyAutoReloadSet</a>&#34; in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span> for more details.</div>
<p>Any one of the following initiates a reload and recovery of the database so that normal behavior can resume:</p>
<ul>
<li>
<p>The TimesTen daemon restarts.</p>
</li>
<li>
<p>A process connects successfully.</p>
</li>
<li>
<p>The administrator executes a <code>ttAdmin</code> command for the database that changes the RAM policy, performs a RAM load, or starts either the cache or replication agents.</p>
</li>
</ul>
<p>If you set the behavior to prevent automatic reloads of the database, you may receive the following error when connecting to a database that was not reloaded.</p>
<pre>Error 707, &#34;Attempt to connect to a data store that has been manually unloaded from RAM&#34;
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGBCIAB"></a>
<div id="TTOPR797" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Loading and unloading the database from memory</h2>
<p>Loading and unloading the database from memory is described in these sections:</p>
<ul>
<li>
<p><a href="#CEGGIHCH">Loading the database into memory</a></p>
</li>
<li>
<p><a href="#BABHHCBC">Unloading the database from memory</a></p>
</li>
</ul>
<a id="CEGGIHCH"></a>
<div id="TTOPR798" class="sect2">
<h3 class="sect2">Loading the database into memory<a id="sthref107"></a><a id="sthref108"></a></h3>
<p>Set the RAM policy to <code>manual</code> or <code>inUse</code> before loading the database into memory. If the RAM policy is set to <code>always</code>, then the database is already loaded since this policy states to keep the database loaded at all times. Also, ensure that the TimesTen daemon is running. The default RAM policy for a TimesTen database is <code>inUse</code>. For more information on specifying a RAM policy, see <a href="#BABFFCGC">&#34;Specifying a RAM policy&#34;</a>.</p>
<p>Before you try to load the database into memory, confirm that the TimesTen daemon is running:</p>
<pre>ttDaemonAdmin -start
</pre>
<p>To load the database into memory, run the <code>ttAdmin</code> utility:</p>
<ul>
<li>
<p>The following example sets the RAM policy of a TimesTen database to <code>manual</code>:</p>
<pre>ttAdmin -ramPolicy manual sampledb_1122

RAM Residence Policy            : manual
Manually Loaded In RAM          : False
Replication Agent Policy        : manual
Replication Manually Started    : False
Cache Agent Policy              : manual
Cache Agent Manually Started    : False
</pre>
<p>Then, load the TimesTen database into memory with the <code>ttAdmin -ramload</code> utility. The <code>-ramLoad</code> option of the <code>ttAdmin</code> utility can only be used with the manual RAM policy:</p>
<pre>ttAdmin -ramLoad sampledb_1122

RAM Residence Policy            : manual
Manually Loaded In RAM          : True
Replication Agent Policy        : manual
Replication Manually Started    : False
Cache Agent Policy              : manual
Cache Agent Manually Started    : False
</pre></li>
<li>
<p>The following example defines the database RAM policy as <code>inUse</code> with a grace period of 200 seconds:</p>
<pre>ttAdmin -ramPolicy inUse -ramGrace 200 sampledb_1122

RAM Residence Policy            : inUse plus grace period
RAM Residence Grace (Secs)      : 200
Replication Agent Policy        : manual
Replication Manually Started    : False
Cache Agent Policy              : manual
Cache Agent Manually Started    : False
</pre></li>
</ul>
<p>If your database is configured replication or cache for your database, run the <code>ttAdmin</code> utility to start the replication and cache agents.</p>
<pre>ttAdmin -repStart sampledb_1122
</pre>
<pre>ttAdmin -cacheStart sampledb_1122
</pre>
<p>For more information on these utilities, see <a class="olink TTREF321" href="../TTREF/util.htm#TTREF321">&#34;ttAdmin&#34;</a> and <a class="olink TTREF337" href="../TTREF/util.htm#TTREF337">&#34;ttDaemonAdmin&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
</div>
<!-- class="sect2" -->
<a id="BABHHCBC"></a>
<div id="TTOPR162" class="sect2">
<h3 class="sect2">Unloading the database from memory<a id="sthref109"></a><a id="sthref110"></a></h3>
<p>Before unloading the database from memory, you must first close all active connections to the database and set the RAM policy of the database to <code>manual</code> or <code>inUse</code>.</p>
<ul>
<li>
<p>To close all active connections to the database, run the <code><a id="sthref111"></a>ttStatus</code> utility to find processes connected to the database and stop them. For more information on <code>ttStatus</code>, see <a class="olink TTREF370" href="../TTREF/util.htm#TTREF370">&#34;ttStatus&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
<p>If you configured cache or replication for your database, stop the cache and replication agents with the <code>-cacheStop</code> and <code>-repStop</code> options of the <code>ttAdmin</code> utility.</p>
</li>
<li>
<p>To set the RAM policy to <code>manual</code> or <code>inUse</code>, see <a href="#BABFFCGC">&#34;Specifying a RAM policy&#34;</a> for information.</p>
</li>
<li>
<p>To unload a database with a <code>manual</code> RAM policy from memory, run the <code>ttAdmin -ramUnload</code> utility. TimesTen unloads a database with an <code>inUse</code> RAM policy from memory once you close all active connections. For more information on unloading a database with a <code>manual</code> RAM policy from memory, see <a class="olink TTINS218" href="../TTINS/upgrade.htm#TTINS218">&#34;Unloading a database from memory&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Installation Guide</span>.</p>
</li>
</ul>
<p>For more information on the <code>ttAdmin</code> utility, see <a class="olink TTREF321" href="../TTREF/util.htm#TTREF321">&#34;ttAdmin&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BCGIDAJG"></a>
<div id="TTOPR158" class="sect1">
<h2 class="sect1">Specifying the size of a database</h2>
<p><a id="sthref112"></a><a id="sthref113"></a><a id="sthref114"></a><a id="sthref115"></a><a id="sthref116"></a><a id="sthref117"></a><a id="sthref118"></a><a id="sthref119"></a><a id="sthref120"></a>TimesTen manages database space using two separate memory regions within a single contiguous memory space. One region contains permanent data and the other contains temporary data.</p>
<ul>
<li>
<p>Permanent data includes the tables and indexes that make up a TimesTen database. When a database is loaded into memory, the contents of the permanent memory region are read from files stored on disk. The permanent memory region is written to disk during checkpoint operations.</p>
</li>
<li>
<p>Temporary data includes locks, cursors, compiled commands, and other structures needed for command execution and query evaluation. The temporary memory region is created when a database is loaded into memory and is destroyed when it is unloaded.</p>
</li>
</ul>
<p>The connection attributes that control the size of the database when it is in memory are <code>PermSize</code> and <code>TempSize</code>. The <code>PermSize</code> attribute specifies the size of the permanent memory region and the <code>TempSize</code> attribute specifies the size of the temporary memory region.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
See <a class="olink TTREF114" href="../TTREF/attribute.htm#TTREF114">&#34;Connection Attributes&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span> for further description of these attributes.</div>
<p><a id="sthref121"></a><a id="sthref122"></a><a id="sthref123"></a><a id="sthref124"></a><a id="sthref125"></a><a id="sthref126"></a>The sizes of the permanent and temporary memory regions are set when a database is loaded into memory and cannot be changed while the database is in memory. To change the size of either region, you must unload the database from memory and then reconnect using different values for the <code>PermSize</code> or <code>TempSize</code> attributes. For more information on unloading the database from memory, see <a href="#BABHHCBC">&#34;Unloading the database from memory&#34;</a>.</p>
<p>Managing the database size is described in these sections:</p>
<ul>
<li>
<p><a href="#BABCDECE">Estimating and modifying the memory region sizes for the database</a></p>
</li>
<li>
<p><a href="#BABJIHCF">Monitoring PermSize and TempSize attributes</a></p>
</li>
<li>
<p><a href="#BCGIBEJC">Receiving out-of-memory warnings</a></p>
</li>
</ul>
<a id="BABCDECE"></a>
<div id="TTOPR161" class="sect2">
<h3 class="sect2">Estimating and modifying the memory region sizes for the database</h3>
<p>Procedures, tables, or rows cannot be created in the database if the permanent or temporary memory region is full. In order to have the correct size for your database, set the appropriate size in the <code>PermSize</code> and <code>TempSize</code> connection attributes.</p>
<ul>
<li>
<p><code>PermSize</code> connection attribute: You can increase but not decrease the <a id="sthref127"></a>permanent memory region.</p>
</li>
<li>
<p><code>TempSize</code> connection attribute: You can increase or decrease the size of the temporary memory region for databases that do not participate in <a id="sthref128"></a><a id="sthref129"></a>replication.</p>
</li>
</ul>
<p>To make size estimates, use the <code><a id="sthref130"></a>ttSize</code> utility or run the application until you can make a reasonable estimate.</p>
<p>You must make sure that you have a shared memory segment that is large enough to hold the database. In general, the minimum size of this shared memory segment should be:</p>
<pre>PermSize + TempSize + LogBufMB + 64 MB overhead
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Additional shared segments may be created either for PL/SQL with the <code>PLSQL_MEMORY_SIZE</code> or for Client/Server with the <code>-serverShmSize</code> daemon option.</div>
<p>When you are calculating the amount of <code>PermSize</code> to allocate, take into account that PL/SQL procedures, functions and packages occupy space in the permanent memory region. The amount of permanent memory region required by a stored PL/SQL unit depends on the size and complexity of the unit. Small procedures can take less than 3 KBs, while larger ones can take considerably more. On average, reasonably complex units could be expected to use about 20 KBs of permanent memory region space.</p>
<p>If the database is configured for replication, reconfigure the database sizes for all replicas of the database. Once you have made the change in database size, load the database into memory and restart the cache and replication agents.</p>
<p>For more details, see <a class="olink TTINS127" href="../TTINS/install.htm#TTINS127">&#34;Installation prerequisites&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Installation Guide</span> and the descriptions of the <a class="olink TTREF154" href="../TTREF/attribute.htm#TTREF154">&#34;TempSize&#34;</a> and <a class="olink TTREF151" href="../TTREF/attribute.htm#TTREF151">&#34;PermSize&#34;</a> attributes in <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
</div>
<!-- class="sect2" -->
<div id="TTOPR796" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref131"></a>
<h3 class="sect2">Ensuring sufficient disk space</h3>
<p>TimesTen saves a copy of the database in two checkpoint files, each of which is stored in the directory that is specified with the <code>DataStore</code> attribute. As each checkpoint file grows on disk, it never decreases in size. This can result in the size of each checkpoint file being equal to the maximum size that the database has ever reached in the permanent memory region. The maximum size for each checkpoint file is <code>PermSize</code> + the database header. For each permanent database, you must have enough disk space for both checkpoint files and all transaction log files. For more information about the <code>DataStore</code> attribute, see <a class="olink TTREF128" href="../TTREF/attribute.htm#TTREF128">&#34;DataStore&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
<p>You can set the <code>Preallocate</code> connection attribute to <code>1</code> to have TimesTen reserve disk space at connect time for checkpoint files. This is useful for big databases, to ensure that the disk always has room for the checkpoint files as data is added to the database. For more information about the <code>Preallocate</code> connection attribute, see <a class="olink TTREF132" href="../TTREF/attribute.htm#TTREF132">&#34;Preallocate&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
</div>
<!-- class="sect2" -->
<a id="BABJIHCF"></a>
<div id="TTOPR163" class="sect2">
<h3 class="sect2">Monitoring PermSize and TempSize attributes</h3>
<p>The TimesTen table <a id="sthref132"></a><a id="sthref133"></a><a id="sthref134"></a><code>SYS.MONITOR</code> contains several columns that can be used to monitor usage of <code>PermSize</code> and <code>TempSize</code>. These columns include <code>PERM_ALLOCATED_SIZE</code>, <code>TEMP_ALLOCATED_SIZE</code>, <code>PERM_IN_USE_SIZE</code>, <code>PERM_IN_USE_HIGH_WATER</code>, <code>TEMP_IN_USE_SIZE</code>, and <code>TEMP_IN_USE_HIGH_WATER</code>. Each of these columns show in KB units the currently allocated size of the database and the in-use size of the database. The system updates this information each time a connection is made or released and each time a transaction is committed or rolled back.</p>
<p>You can monitor block-level <a id="sthref135"></a><a id="sthref136"></a>fragmentation in the database by calling the <code>ttBlockInfo</code> built-in procedure. For more details, see <a class="olink TTREF218" href="../TTREF/proced.htm#TTREF218">&#34;ttBlockInfo&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
</div>
<!-- class="sect2" -->
<a id="BCGIBEJC"></a>
<div id="TTOPR164" class="sect2">
<h3 class="sect2">Receiving <a id="sthref137"></a>out-of-memory warnings</h3>
<p>TimesTen provides two general connection attributes that determine when a low memory warning should be issued: <a id="sthref138"></a><a id="sthref139"></a><code>PermWarnThreshold</code> and <code>TempWarnThreshold</code><a id="sthref140"></a>. Both attributes take a percentage value.</p>
<p>To receive out-of memory warnings, applications must call the built-in procedure <a id="sthref141"></a><code>ttWarnOnLowMemory</code>.</p>
<p>These attributes also set the threshold for<a id="sthref142"></a><a id="sthref143"></a> SNMP warning. See <a class="olink TTERR138" href="../TTERR/snmp.htm#TTERR138">&#34;Diagnostics through SNMP Traps&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Error Messages and SNMP Traps</span>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABBACAA"></a>
<div id="TTOPR655" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Manage existing tables in the database</h2>
<p>The following utilities enable you to manage certain aspects of existing tables in the database:</p>
<ul>
<li>
<p>Add rows of data to an existing table. Use the <code>ttBulkCp</code> utility. You can save data to an ASCII file and use the <code>ttBulkCp</code> utility to load the data rows into a table in a TimesTen database.</p>
<p>The rows you are adding must contain the same number of columns as the table, and the data in each column must be of the type defined for that column.</p>
<p>Because the <code>ttBulkCp</code> utility works on data stored in ASCII files, you can also use this utility to import data from other applications, provided the number of columns and data types are compatible with those in the table in the TimesTen database and that the file found is compatible with <code>ttBulkCp</code>.</p>
</li>
<li>
<p>Rename the owner of tables in a database. Use the <code>ttMigrate</code> utility. When restoring tables, you can use the <code>-rename</code> option to rename the owner of tables.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="BCGCBAFE"></a>
<div id="TTOPR128" class="sect1">
<h2 class="sect1">Thread programming with <a id="sthref144"></a>TimesTen</h2>
<p>TimesTen supports multithreaded application access to databases. When a connection is made to a database, any thread may issue operations on the connection.</p>
<p>Typically, a thread issues operations on its own connection and therefore in a separate transaction from all other threads. In environments where threads are created and destroyed rapidly, better performance may be obtained by maintaining a pool of connections. Threads can allocate connections from this pool on demand to avoid the connect and disconnect overhead.</p>
<p>TimesTen allows multiple threads to issue requests on the same connection and therefore the same transaction. These requests are serialized by TimesTen, although the application may require additional serialization of its own.</p>
<p>TimesTen also allows a thread to issue requests against multiple connections, managing activities in several separate and concurrent transactions on the same or different databases.</p>
</div>
<!-- class="sect1" -->
<a id="BABBCFFF"></a>
<div id="TTOPR753" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Defragmenting TimesTen databases<a id="sthref145"></a><a id="sthref146"></a><a id="sthref147"></a><a id="sthref148"></a><a id="sthref149"></a><a id="sthref150"></a></h2>
<p>Under some circumstances, a TimesTen database may develop memory fragmentation such that significant amounts of free memory are allocated to partially filled pages of existing tables. This can result in an inability to allocate memory for other uses (such as new pages for other tables) due to a lack of free memory. In these circumstances, it is necessary to defragment the database in order to make this memory available for other uses.</p>
<p>A secondary table partition is created after a table has been altered with the <code>ALTER TABLE ADD</code> SQL statement. Defragmentation enables you to remove the secondary table partitions and create a single table partition that contains all of the table columns. When secondary table partitions have been created, it is recommended to periodically defragment the database in order to improve space utilization and performance.</p>
<p>The following procedures address both types of database fragmentation:</p>
<ul>
<li>
<p><a href="#BABJGECE">Offline defragmentation of TimesTen databases</a></p>
</li>
<li>
<p><a href="#BABJABFD">Online defragmentation of TimesTen databases</a></p>
</li>
</ul>
<a id="BABJGECE"></a>
<div id="TTOPR754" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Offline defragmentation of TimesTen databases<a id="sthref151"></a></h3>
<p>To defragment a database, use the <code>ttMigrate</code> utility as follows:</p>
<ol>
<li>
<p>Stop all connections to the database.</p>
</li>
<li>
<p>Save a copy of the database using <code>ttMigrate</code>.</p>
<pre>ttMigrate -c ttdb ttdb.dat
</pre></li>
<li>
<p>As the administration user, rebuild the <code>ttdb</code> database:</p>
<pre>ttMigrate -r -relaxedUpgrade -connstr &#34;dsn=ttdb&#34; ttdb.dat
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you do not want to condense table partitions, remove the <code>-relaxedUpgrade</code> option when executing the <code>ttMigrate -r</code> command.</div>
</li>
</ol>
<p>At this time:</p>
<ul>
<li>
<p>All the users, cache groups, and the active standby pair have been restored to <code>ttdb</code>.</p>
</li>
<li>
<p>The cache groups are in <code>AUTOREFRESH STATE = OFF</code>.</p>
</li>
<li>
<p>The cache agent and replication agent are not running.</p>
</li>
</ul>
<p>Table partitions can be added when columns are added to tables with the <code>ALTER TABLE ADD</code> SQL statement. See the notes on <a class="olink TTSQL286" href="../TTSQL/state.htm#TTSQL286">&#34;ALTER TABLE&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database SQL Reference</span> for more information.</p>
<p>For more information on <code>ttMigrate</code>, see <a class="olink TTREF343" href="../TTREF/util.htm#TTREF343">&#34;ttMigrate&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
</div>
<!-- class="sect2" -->
<a id="BABJABFD"></a>
<div id="TTOPR755" class="sect2">
<h3 class="sect2">Online defragmentation of TimesTen databases<a id="sthref152"></a><a id="sthref153"></a></h3>
<p>Use a combination of the <code>ttMigrate -relaxedUpgrade</code> and <code>ttRepAdmin -duplicate</code> utilities to defragment TimesTen databases (with minimal overall service downtime) that are involved in a replication scheme where <code>TABLE DEFINITION CHECKING</code> is set to <code>RELAXED</code>. In addition, the <code>ttMigrate -relaxedUpgrade</code> option condenses partitions.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can only defragment TimesTen databases that are involved in an active standby pair replication scheme if the replication scheme either does not contain any cache groups or contains only <code>READONLY</code> cache groups.</div>
<p>The following sections describe how to defragment TimesTen databases that are involved in a replication scheme:</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The examples provided in each section assume that you are familiar with the configuration and management of replication schemes. For more information, see <a class="olink TTREP153" href="../TTREP/gettingstarted.htm#TTREP153">&#34;Getting Started&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Replication Guide</span>.</div>
<ul>
<li>
<p><a href="#CEGICGEG">Online defragmentation of databases in an active standby pair replication scheme</a></p>
</li>
<li>
<p><a href="#CEGBJJFC">Online defragmentation of databases in a non active standby pair replication scheme</a></p>
</li>
</ul>
<a id="CEGICGEG"></a>
<div id="TTOPR778" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Online defragmentation of databases in an active standby pair replication scheme</h4>
<p>The following sections describe how to defragment TimesTen databases that are involved in an active standby pair replication scheme:</p>
<ul>
<li>
<p><a href="#BABFGCEB">Migrate and rebuild the standby database</a></p>
</li>
<li>
<p><a href="#BABJFBIH">Reverse the active and standby roles</a></p>
</li>
<li>
<p><a href="#BABDFBBJ">Destroy and re-create the new standby</a></p>
</li>
</ul>
<p>The example in this section shows how to perform an online defragmentation with an active standby pair replication scheme where the active database is <code>ttdb1</code> and the standby database is <code>ttdb2</code>.</p>
<a id="BABFGCEB"></a>
<div id="TTOPR756" class="sect4">
<h5 class="sect4">Migrate and rebuild the standby database</h5>
<p>The following shows how to stop replication to the standby TimesTen database, save a copy of the standby database, and then defragment the standby database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
While the standby database is defragmented, application processing can continue on the active database.</div>
<p>Perform the following to save a copy of the standby database:</p>
<ol>
<li>
<p>Stop the replication agent on the standby database (<code>ttdb2</code>):</p>
<pre>ttAdmin &ndash;repStop ttdb2
</pre></li>
<li>
<p>If there any subscribers, execute <code>ttRepStateSave</code> on the active database to set the status of the standby to failed. As long as the standby database is unavailable, updates to the active database are replicated directly to the subscriber databases.</p>
<pre>ttRepStateSave(&#39;FAILED&#39;, &#39;ttdb2&#39;, &#39;ttsrv2&#39;);
</pre></li>
<li>
<p>Save a copy of the standby database using <code>ttMigrate</code>.</p>
<pre>ttMigrate -c -relaxedUpgrade ttdb2 ttdb2.dat
</pre></li>
<li>
<p>Stop the cache agent, drop any cache groups, and destroy the standby.</p>
<pre>ttAdmin &ndash;cacheStop ttdb2
</pre>
<p>While connected as cache manager user, drop all cache groups:</p>
<pre>Command&gt; DROP CACHE GROUP t_cg;
</pre>
<p>Destroy the standby database:</p>
<pre>ttDestroy ttdb2
</pre></li>
<li>
<p>Rebuild the standby database. Execute the following on the standby as the instance administrator:</p>
<pre>ttIsql ttdb2
</pre></li>
<li>
<p>Create the cache manager user and grant the user <code>ADMIN</code> privileges.</p>
<pre>Command&gt; CREATE USER cacheadmin IDENTIFIED BY cadminpwd;
Command&gt; GRANT CREATE SESSION, CACHE_MANAGER, CREATE ANY TABLE,
 DROP ANY TABLE TO cacheadmin;
Command&gt; GRANT ADMIN TO cacheadmin;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The cache manager user requires <code>ADMIN</code> privileges in order to execute <code>ttMigrate &ndash;r</code>. Once migration is completed, you can revoke the <code>ADMIN</code> privilege from this user if desired.
<p>For more information on <code>ttMigrate</code>, see <a class="olink TTREF343" href="../TTREF/util.htm#TTREF343">&#34;ttMigrate&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
</div>
</li>
<li>
<p>As the cache manager user, rebuild the <code>ttdb2</code> database:</p>
<pre>ttMigrate -r -relaxedUpgrade -cacheuid cacheadmin -cachepwd cadminpwd -connstr 
 &#34;dsn=ttdb2;uid=cacheadmin;pwd=cadminpwd;oraclepwd=oraclepwd&#34; ttdb2.dat
</pre>
<p>At this time:</p>
<ul>
<li>
<p>All the users, cache groups, and the active standby pair have been restored to <code>ttdb2</code>.</p>
</li>
<li>
<p>The cache groups are in <code>AUTOREFRESH STATE = OFF</code>.</p>
</li>
<li>
<p>The cache agent and replication agent are not running.</p>
</li>
</ul>
</li>
<li>
<p>As the cache manager user, start the cache agent on the standby:</p>
<pre>ttAdmin &ndash;cacheStart ttdb2
</pre></li>
<li>
<p>Load any cache groups.</p>
<pre>Command&gt; ALTER CACHE GROUP t_cg SET AUTOREFRESH STATE PAUSED;
Command&gt; LOAD CACHE GROUP t_cg COMMIT EVERY 256 ROWS PARALLEL &lt;<span class="italic">nThreads</span>&gt;;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>Choose <code><span class="codeinlineitalic">nThreads</span></code> based on how many CPU cores you use to insert the data into TimesTen for this load operation.</p>
</li>
<li>
<p>If there are several read-only cache groups it is recommended that you run several <code>LOAD</code> operations in separate sessions in parallel, if the TimesTen and Oracle Database resources are available.</p>
</li>
</ul>
</div>
</li>
<li>
<p>After completion, verify the cache group state.</p>
<pre>Command&gt; cacheGroups;
Cache Group CACHEADMIN.T_CG:
  Cache Group Type: Read Only
  Autorefresh: Yes
  Autorefresh Mode: Incremental
  Autorefresh State: On
  Autorefresh Interval: 10 Seconds
  
  Autorefresh Status: ok
  Aging: No aging defined
 
  Root Table: ORATT.T
  Table Type: Read Only
 
1 cache group found.
</pre></li>
<li>
<p>Start the replication agent on the standby database:</p>
<pre>ttAdmin -repStart ttdb2
</pre></li>
<li>
<p>Check the replication state on the standby:</p>
<pre>ttIsql ttdb2
Command&gt; call ttRepStateGet;
&lt; STANDBY, NO GRID &gt;
1 row found.
</pre></li>
</ol>
<p>The standby database (<code>ttdb2</code>) has been defragmented and both the active and standby databases are functional.</p>
</div>
<!-- class="sect4" -->
<a id="BABJFBIH"></a>
<div id="TTOPR757" class="sect4">
<h5 class="sect4">Reverse the active and standby roles</h5>
<p>In order to perform the database defragmentation on the active database, switch the roles of the active and standby database. The active (<code>ttdb1</code>) becomes the standby database. The original standby (<code>ttdb2</code>) becomes the active database.</p>
<ol>
<li>
<p>Stop all application processing and disconnect all application connections. Any query only processing can be moved to work at the <code>ttdb2</code> TimesTen database.</p>
</li>
<li>
<p>Call the <code>ttRepSubscriberWait</code> built-in procedure at the current active database (<code>ttdb1</code>), with the database name and host of the current standby database (<code>ttdb2</code>) as input parameters. This ensures that all queued updates have been transmitted to the current standby database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you set the <code>waitTime</code> to <code>-1</code>, the call waits until all transactions that committed before the call have been transmitted to the subscriber.
<p>However, if you set the <code>waitTime</code> to any value (this value cannot be <code>NULL</code>), ensure that the return <code>timeOut</code> parameter value is <code>0x00</code> before continuing. If the returned value <code>0x01</code>, call the <code>ttRepSubscriberWait</code> built-in procedure until all transactions that committed before the call have been transmitted to the subscriber.</p>
<p>For more information about the <code>ttRepSubscriberWait</code> built-in procedure, see <a class="olink TTREF295" href="../TTREF/proced.htm#TTREF295">&#34;ttRepSubscriberWait&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
</div>
<pre>Command&gt; call ttRepSubscriberWait(NULL,NULL,&#39;ttdb2&#39;,&#39;ttsrv2&#39;, 100);
</pre></li>
<li>
<p>Stop the replication agent on the current active database.</p>
<pre>Command&gt; call ttRepStop;
</pre></li>
<li>
<p>Call the <code>ttRepDeactivate</code> built-in procedure on the current active database. This puts the database in the <code>IDLE</code> state.</p>
<pre>Command&gt; call ttRepDeactivate;
Command&gt; call ttRepStateGet;
&lt; IDLE, NO GRID &gt;
1 row found.
</pre></li>
<li>
<p>Promote the standby to active by calling the <code>ttRepStateSet(&#39;ACTIVE&#39;)</code> built-in procedure on the old standby database. This database now becomes the active database in the active standby pair. Use the <code>ttRepStateGet</code> built-on to verify that the database has become active.</p>
<pre>Command&gt; call ttRepStateSet(&#39;ACTIVE&#39;);
Command&gt; call ttRepStateGet;
&lt; ACTIVE, NO GRID &gt;
1 row found.
</pre></li>
<li>
<p>Stop the replication agent on the database that used to be the active database.</p>
<pre>ttAdmin -repStop ttdb1
</pre></li>
<li>
<p>Execute <code>ttRepStateSave</code> on the new active database to set the status of the old active database to failed. As long as the standby database is unavailable, updates to the active database are replicated directly to the subscriber databases.</p>
<pre>Command&gt; call ttRepStateSave(&#39;FAILED&#39;, &#39;ttdb1&#39;, &#39;ttsrv1&#39;);
</pre></li>
<li>
<p>Restart the full application workload on the new active database (<code>ttdb2</code>).</p>
</li>
</ol>
<p>This database now acts as the standby database in the active standby pair.</p>
</div>
<!-- class="sect4" -->
<a id="BABDFBBJ"></a>
<div id="TTOPR758" class="sect4">
<h5 class="sect4">Destroy and re-create the new standby</h5>
<p>Destroy and recreate the new standby using <code>ttRepAdmin -duplicate</code> from the new active. During these steps, application processing can continue at the active database.</p>
<ol>
<li>
<p>Stop the cache agent on the new standby database:</p>
<pre>ttAdmin &ndash;cacheStop ttdb1
</pre></li>
<li>
<p>As the cache manager user, drop all cache groups:</p>
<pre>Command&gt; DROP CACHE GROUP t_cg;
</pre></li>
<li>
<p>Destroy the database:</p>
<pre>ttDestroy ttdb1
</pre></li>
<li>
<p>Re-create the new standby database by duplicating the new active.</p>
<pre>ttRepAdmin -duplicate -from ttdb2 -host ttsrv2 &ndash;setMasterRepStart 
 -UID ttadmin -PWD ttadminpwd -keepCG -cacheUID cacheadmin 
 -cachePWD cadminpwd ttdb1
</pre></li>
<li>
<p>Start cache and replication agents on the new standby database:</p>
<pre>ttAdmin &ndash;cacheStart ttdb1
ttAdmin &ndash;repStart ttdb1
</pre></li>
</ol>
<p>This process defragments both the active and standby databases with only a few seconds of service interruption.</p>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<a id="CEGBJJFC"></a>
<div id="TTOPR779" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Online defragmentation of databases in a non active standby pair replication scheme</h4>
<p>The following sections describe how to defragment TimesTen databases that are involved in a non active standby pair replication scheme:</p>
<ul>
<li>
<p><a href="#BABFGCEB">Migrate and rebuild the standby database</a></p>
</li>
<li>
<p><a href="#CEGHHJEA">Alter the replication scheme</a></p>
</li>
<li>
<p><a href="#CEGBDHFB">Destroy and re-create a database</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
These sections discuss how to defragment databases that are involved in a bidirectional replication scheme. In bidirectional replication schemes, each database is both a master and subscriber.</div>
<p>The examples in this section show how to perform an online defragmentation with bidirectional and unidirectional replication schemes with two TimesTen databases named <code>ttdb1</code> and <code>ttdb2</code>. For the unidirectional replication example, <code>ttdb1</code> represents the master and <code>ttdb2</code> represents the subscriber.</p>
<div id="TTOPR780" class="sect4"><a id="sthref154"></a>
<h5 class="sect4">Migrate and rebuild a database</h5>
<p>The first step in the procedure is to stop replication on one of the TimesTen databases and then defragment this database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
While one of the databases is defragmented, application processing can continue on the other database.</div>
<p>Perform the following to save a copy of the TimesTen database:</p>
<ol>
<li>
<p>Stop the replication agents on one of the databases.</p>
<p>On the <code>ttdb2</code> database:</p>
<pre>ttAdmin &ndash;repStop ttdb2
</pre></li>
<li>
<p>Save a copy of the <code>ttdb1</code> database using <code>ttMigrate</code>.</p>
<pre>ttMigrate -c -relaxedUpgrade ttdb2 ttdb2.dat
</pre></li>
<li>
<p>Destroy the database:</p>
<pre>ttDestroy ttdb2
</pre></li>
<li>
<p>As a TimesTen user with <code>ADMIN</code> privileges, rebuild the <code>ttdb2</code> database:</p>
<pre>ttMigrate -r -relaxedUpgrade -connstr &#34;dsn=ttdb2;uid=ttadmin;pwd=ttadminpwd&#34; ttdb2.dat
</pre>
<p>At this time:</p>
<ul>
<li>
<p>All the users have been restored to <code>ttdb2</code>.</p>
</li>
<li>
<p>The replication agent is not running.</p>
</li>
</ul>
</li>
<li>
<p>Restart the replication agent on <code>ttdb2</code>:</p>
<pre>ttAdmin -repStart ttdb2
</pre></li>
</ol>
<p>The <code>ttdb2</code> TimesTen database has been defragmented.</p>
</div>
<!-- class="sect4" -->
<a id="CEGHHJEA"></a>
<div id="TTOPR781" class="sect4">
<h5 class="sect4">Alter the replication scheme</h5>
<p>In order to perform the database defragmentation on the <code>ttdb1</code> database, perform the following:</p>
<ol>
<li>
<p>Stop all application processing and disconnect all application connections. Any processing can be moved to work at the <code>ttdb2</code> TimesTen database.</p>
</li>
<li>
<p>Call the <code>ttRepSubscriberWait</code> built-in procedure at the TimesTen database that has not been defragmented (<code>ttdb1</code>), with the database name and host of the defragmented database (<code>ttdb2</code>) as input parameters. This ensures that all queued updates have been transmitted to both databases.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you set the <code>waitTime</code> to <code>-1</code>, the call waits until all transactions that committed before the call have been transmitted to the subscriber.
<p>However, if you set the <code>waitTime</code> to any value (this value may not be <code>NULL</code>), ensure that the return <code>timeOut</code> parameter value is <code>0x00</code> before continuing. If the returned value <code>0x01</code>, call the <code>ttRepSubscriberWait</code> built-in procedure until all transactions that committed before the call have been transmitted to the subscriber.</p>
<p>For more information about the <code>ttRepSubscriberWait</code> built-in procedure, see <a class="olink TTREF295" href="../TTREF/proced.htm#TTREF295">&#34;ttRepSubscriberWait&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
</div>
<p>On ttdb1:</p>
<pre>ttIsql ttdb1

Command&gt; call ttRepSubscriberWait(NULL,NULL,&#39;ttdb2&#39;,&#39;ttsrv2&#39;, 100);
</pre>
<p>If you are using a bidirectional replication scheme, skip steps 3-4 and move to step 5.</p>
</li>
<li>
<p>For a unidirectional replication scheme, where <code>ttdb1</code> is the master and <code>ttdb2</code> is the subscriber, drop the replication scheme on both TimesTen databases:</p>
<p>On <code>ttdb1</code>:</p>
<pre>ttIsql ttdb1

Command&gt; DROP REPLICATION r1;
</pre>
<p>On <code>ttdb2</code>:</p>
<pre>ttIsql ttdb2

Command&gt; DROP REPLICATION r1;
</pre></li>
<li>
<p>For a unidirectional replication scheme, drop the replication scheme on the master (<code>ttdb1</code>) and subscriber (<code>ttdb2</code>):</p>
<p>On <code>ttdb1</code>:</p>
<pre>ttIsql ttdb1

Command&gt; DROP REPLICATION r1;
</pre>
<p>On <code>ttdb2</code>:</p>
<pre>ttIsql ttdb2

Command&gt; DROP REPLICATION r1;
</pre></li>
<li>
<p>Start the replication agent on <code>ttdb2</code>:</p>
<pre>ttAdmin -repStart ttdb2
</pre></li>
<li>
<p>Stop the replication agent on <code>ttdb1</code>.</p>
<pre>ttAdmin -repStop ttdb1
</pre></li>
</ol>
<p>If you modified a unidirectional replication scheme, the <code>ttdb2</code> database now acts as the master database in the unidirectional scheme; the <code>ttdb1</code> database acts as the subscriber database in the unidirectional replication scheme.</p>
</div>
<!-- class="sect4" -->
<a id="CEGBDHFB"></a>
<div id="TTOPR782" class="sect4">
<h5 class="sect4">Destroy and re-create a database</h5>
<p>Destroy and recreate the TimesTen database in the replication scheme that has not yet been defragmented using <code>ttRepAdmin -duplicate</code>. During these steps, application processing can continue on the defragmented database.</p>
<ol>
<li>
<p>Destroy the database:</p>
<pre>ttDestroy ttdb1
</pre></li>
<li>
<p>Recreate the new TimesTen database (<code>ttdb1</code>) by duplicating the previously defragmented TimesTen database (<code>ttdb2</code>) involved in the replication scheme.</p>
<pre>ttRepAdmin -duplicate -from ttdb2 -host ttsrv2 &ndash;setMasterRepStart 
 -UID ttadmin -PWD ttadminpwd ttdb1
</pre></li>
<li>
<p>Start the replication agent on the new standby database:</p>
<pre>ttAdmin &ndash;repStart ttdb1
</pre></li>
</ol>
<p>This process defragments both the TimesTen databases involves in either a unidirectional or bidirectional replication scheme with only a few seconds of service interruption.</p>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3223">
<tr>
<td class="cellalignment3230">
<table class="cellalignment3228">
<tr>
<td class="cellalignment3227"><a href="whatsnew.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3227"><a href="client_server.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3232">
<table class="cellalignment3226">
<tr>
<td class="cellalignment3227"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3227"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3227"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3227"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3227"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3227"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>