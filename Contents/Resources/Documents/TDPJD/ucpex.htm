<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-106340"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Creating%20a%20Universal%20Connection%20Pool"></a><title>Creating a Universal Connection Pool</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 748"/>
<meta name="dcterms.created" content="2014-02-21T3:12:39Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database 2 Day + Java Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E17944-10"/>
<meta name="dcterms.isVersionOf" content="TDPJD"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="getuncon.htm" title="Previous" type="text/html"/>
<link rel="Next" href="globapps.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17944-10.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">14/16</span> <!-- End Header -->
<div id="TDPJD389" class="chapter"><a id="sthref480"></a>
<h1 class="chapter"><span class="secnum">8</span> Creating a Universal Connection Pool</h1>
<p>A connection pool is a cache of database connection objects. The objects represent physical database connections that can be used by an application to connect to a database. At run time, the application requests a connection from the pool. If the pool contains a connection that can satisfy the request, it returns the connection to the application. If no connections are found, a new connection is created and returned to the application. The application uses the connection to perform some work on the database and then returns the object back to the pool. The connection is then available for the next connection request.</p>
<p><a id="sthref481"></a>Universal Connection Pool (UCP) for JDBC provides a connection pool implementation for caching JDBC connections. Java applications that are database-intensive use the connection pool to improve performance and better utilize system resources. A UCP JDBC connection pool can use any JDBC driver to create physical connections that are then maintained by the pool. The pool can be configured and provides a full set of properties that are used to optimize pool behavior based on the performance and availability requirements of an application. For more advanced applications, UCP for JDBC provides a pool manager that can be used to manage a pool instance.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink JJUCP" href="../JJUCP/toc.htm"><span class="italic">Oracle Universal Connection Pool for JDBC Developer&#39;s Guide</span></a></div>
<p>This chapter describes how to create a Universal Connection Pool. This chapter has the following sections:</p>
<ul>
<li>
<p><a href="#CHDBBEAJ">Setting JDeveloper Project Properties</a></p>
</li>
<li>
<p><a href="#CHDFHCFG">Creating the Stock Ticker Application</a></p>
</li>
<li>
<p><a href="#CHDHIIGI">Observing the Output</a></p>
</li>
</ul>
<a id="CHDBBEAJ"></a>
<div id="TDPJD390" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">8.1</span> Setting JDeveloper Project Properties</h2>
<p>To create a Universal Connection Pool, first you must set JDeveloper project properties by performing the following steps:</p>
<ol>
<li>
<p>From the <span class="bold">Application</span> menu, select <span class="bold">Default Project Properties</span>.</p>
<div id="TDPJD391" class="figure">
<p class="titleinfigure"><a id="sthref482"></a>Figure 8-1 Setting the Default Project Properties</p>
<img width="198" height="370" src="img/projprop.gif" alt="Description of Figure 8-1 follows"/><br/>
<a id="sthref483" href="img_text/projprop.htm">Description of &#34;Figure 8-1 Setting the Default Project Properties&#34;</a><br/>
<br/></div>
<!-- class="figure" --></li>
<li>
<p>Click <span class="bold">Libraries and Classpath</span> on the left panel of the Default Project Properties screen.</p>
<div id="TDPJD392" class="figure">
<p class="titleinfigure"><a id="sthref484"></a>Figure 8-2 Setting the Libraries and Classpath</p>
<img width="700" height="500" src="img/libclasspath.gif" alt="Description of Figure 8-2 follows"/><br/>
<a id="sthref485" href="img_text/libclasspath.htm">Description of &#34;Figure 8-2 Setting the Libraries and Classpath&#34;</a><br/>
<br/></div>
<!-- class="figure" --></li>
<li>
<p>Click <span class="bold">Add JAR/ Directory</span> on the right pane of the Default Project Properties screen.</p>
<p>The Add Archive or Directory screen is displayed.</p>
</li>
<li>
<p>Select <a id="sthref486"></a><code>ucp.jar</code> file in the <code>$ORACLE_HOME/ucp/lib</code> folder and click <span class="bold">Select</span>.</p>
<div id="TDPJD393" class="figure">
<p class="titleinfigure"><a id="sthref487"></a>Figure 8-3 The Add Archive or Directory Screen</p>
<img width="600" height="370" src="img/addjar.gif" alt="This image illustrates how to add a jar to the classpath."/><br/></div>
<!-- class="figure" --></li>
<li>
<p>Click OK.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CHDFHCFG"></a>
<div id="TDPJD394" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">8.2</span> Creating the Stock Ticker Application</h2>
<p>The following example is a stock ticker application that uses the Universal Connection Pool to retrieve stock price information from the database. Using this example, you can view the Universal Connection Pool properties, change the properties at run time without shutting down the pool instance, view Universal Connection Statistics and so on. Perform the following steps to run the example:</p>
<ol>
<li>
<p>Click <span class="bold">New Application</span> in the Application Navigator panel.</p>
<div id="TDPJD395" class="figure">
<p class="titleinfigure"><a id="sthref488"></a>Figure 8-4 The Application Navigator Panel Options</p>
<img width="277" height="200" src="img/newapp.gif" alt="This image illustrates how to create a new application."/><br/></div>
<!-- class="figure" --></li>
<li>
<p>Enter <code>StockTickerApp</code> as the <span class="bold">Application Name</span> in the Name Your Application screen and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>Enter <code>StockTickerProj</code> as the <span class="bold">Project Name</span> in the Name Your Project screen and click <span class="bold">Finish</span>.</p>
</li>
<li>
<p>Click <span class="bold">Open</span> from <span class="bold">File</span> menu.</p>
</li>
<li>
<p>Select the <code>UCPDemo.java</code>, <code>ClientSimulator.java</code>, <code>DBConfig.java</code>, <code>HttpServer.java</code>, and <code>DbConfig.properties</code> files and click <span class="bold">Open</span>.</p>
</li>
<li>
<p>In the <code>DbConfig.properties</code> file, verify the information about the user name, the password, and the URL of your Oracle database.</p>
<div id="TDPJD396" class="figure">
<p class="titleinfigure"><a id="sthref489"></a>Figure 8-5 The DbConfig.properties File in the Code Editor</p>
<img width="372" height="114" src="img/dbconfig.gif" alt="This image illustrates the content of the DBConfig file."/><br/></div>
<!-- class="figure" --></li>
<li id="CHDBGBFJ">
<p>Right-click the <code>UCPDemo.java</code> tab in the code editor and select <span class="bold">Add to StockTickerProj.jpr</span>.</p>
<div id="TDPJD397" class="figure">
<p class="titleinfigure"><a id="sthref490"></a>Figure 8-6 Adding a Source File to a Project</p>
<img width="358" height="224" src="img/addfile.gif" alt="This image illustrates how to add a file to a project."/><br/></div>
<!-- class="figure" --></li>
<li id="CHDEEAIB">
<p>Retain the default value for the content path in the Add to Project Content screen and click <span class="bold">OK</span>.</p>
<div id="TDPJD398" class="figure">
<p class="titleinfigure"><a id="sthref491"></a>Figure 8-7 The Add to Project Content</p>
<img width="358" height="274" src="img/addproj.gif" alt="This image illustrates how to add a file to a project."/><br/></div>
<!-- class="figure" --></li>
<li>
<p>Repeat steps <a href="#CHDBGBFJ">7</a> and <a href="#CHDEEAIB">8</a> for <code>ClientSimulator.java</code>, <code>DBConfig.java</code>, <code>HttpServer.java</code>, and <code>DbConfig.properties</code> files to add them to the <code>StockTickerProj</code> project.</p>
</li>
<li>
<p>Right-click the <code>UCPDemo.java</code> file in the Application Navigator window and click <span class="bold">Make</span>.</p>
</li>
<li>
<p>Select <span class="bold">Choose Active Run Configuration</span> from the <span class="bold">Run</span> menu and then select <span class="bold">Manage Run Configurations</span>.</p>
<div id="TDPJD399" class="figure">
<p class="titleinfigure"><a id="sthref492"></a>Figure 8-8 The Run Menu Options</p>
<img width="496" height="560" src="img/runmenu.gif" alt="Description of Figure 8-8 follows"/><br/>
<a id="sthref493" href="img_text/runmenu.htm">Description of &#34;Figure 8-8 The Run Menu Options&#34;</a><br/>
<br/></div>
<!-- class="figure" --></li>
<li>
<p>Click <span class="bold">Edit</span> in the Project Properties screen for the <code>StockTickerPro</code>j project.</p>
<div id="TDPJD400" class="figure">
<p class="titleinfigure"><a id="sthref494"></a>Figure 8-9 The Project Properties Screen for the StockTickerProj Project</p>
<img width="700" height="560" src="img/projproprun.gif" alt="Description of Figure 8-9 follows"/><br/>
<a id="sthref495" href="img_text/projproprun.htm">Description of &#34;Figure 8-9 The Project Properties Screen for the StockTickerProj Project&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>The Edit Run Configuration screen is displayed.</p>
</li>
<li>
<p>Enter <code>8067</code> or any free port on your system in the <span class="bold">Program Arguments</span> field and click <span class="bold">OK</span>.</p>
<div id="TDPJD401" class="figure">
<p class="titleinfigure"><a id="sthref496"></a>Figure 8-10 The Edit Run Configuration Screen</p>
<img width="700" height="500" src="img/runconfig.gif" alt="Description of Figure 8-10 follows"/><br/>
<a id="sthref497" href="img_text/runconfig.htm">Description of &#34;Figure 8-10 The Edit Run Configuration Screen&#34;</a><br/>
<br/></div>
<!-- class="figure" --></li>
<li>
<p>Click <span class="bold">OK</span> to exit the Project Properties screen.</p>
</li>
<li>
<p>Right-click the <code>UCPDemo.java</code> file in the Application Navigator window and click <span class="bold">Run</span>.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CHDHIIGI"></a>
<div id="TDPJD402" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">8.3</span> Observing the Output</h2>
<p>When you run the application, initially it will spend a few seconds to store the stock price data into the database. So, wait until the message <code>&#34;...ready to go!&#34;</code> is printed out on the screen as shown in <a href="#CHDGFEEI">Figure 8-11</a>.</p>
<div id="TDPJD403" class="figure">
<p class="titleinfigure"><a id="CHDGFEEI"></a>Figure 8-11 Output of the Stock Ticker Application in JDeveloper Log</p>
<img width="358" height="172" src="img/stockdata.gif" alt="This image shows the output of the stock sticker demo"/><br/></div>
<!-- class="figure" -->
<p>After the message is displayed, the UCP demo server is up and running and you can use it by using the following steps:</p>
<ol>
<li>
<p>Enter the following URL in the address bar of your browser:</p>
<p><code>http://localhost:8067</code></p>
<p>The Universal Connection Pool Demo page is displayed.</p>
<div id="TDPJD404" class="figure">
<p class="titleinfigure"><a id="sthref498"></a>Figure 8-12 Retrieving Information from the Universal Connection Pool Using the Browser</p>
<img width="1136" height="617" src="img/ucpie.gif" alt="This image describes the UCP options on the browser"/><br/></div>
<!-- class="figure" --></li>
<li>
<p>Click the links below the <span class="bold">Try the Demo:</span> section to retrieve stock price information from the database.</p>
<p>Click <span class="bold">Show UCP Properties</span> to see the UCP properties:</p>
<div id="TDPJD405" class="figure">
<p class="titleinfigure"><a id="sthref499"></a>Figure 8-13 The UCP Properties page</p>
<img width="962" height="611" src="img/shw_ucpprop.gif" alt="Description of Figure 8-13 follows"/><br/>
<a id="sthref500" href="img_text/shw_ucpprop.htm">Description of &#34;Figure 8-13 The UCP Properties page&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>Click <span class="bold">Get Stock Price from Database</span> to run the stock ticker:</p>
<div id="TDPJD406" class="figure">
<p class="titleinfigure"><a id="sthref501"></a>Figure 8-14 The Stock Ticker Page on the Browser</p>
<img width="398" height="244" src="img/runticker.gif" alt="Description of Figure 8-14 follows"/><br/>
<a id="sthref502" href="img_text/runticker.htm">Description of &#34;Figure 8-14 The Stock Ticker Page on the Browser&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>Click <span class="bold">Show UCP Statistics</span> to see the UCP statistics:</p>
<div id="TDPJD407" class="figure">
<p class="titleinfigure"><a id="sthref503"></a>Figure 8-15 The UCP Statistics Page on the Browser</p>
<img width="877" height="626" src="img/ucp_stat.gif" alt="Description of Figure 8-15 follows"/><br/>
<a id="sthref504" href="img_text/ucp_stat.htm">Description of &#34;Figure 8-15 The UCP Statistics Page on the Browser&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>Click <span class="bold">Dynamically Reconfigure UCP Properties</span> to update the UCP properties:</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can change the UCP properties in the browser by clicking the Dynamically Reconfigure UCP Properties link. However, if you try to set a property that is not relevant for a single instance Database, then an exception may be thrown.</div>
<div id="TDPJD408" class="figure">
<p class="titleinfigure"><a id="sthref505"></a>Figure 8-16 The UCP Properties Update Page on the Browser</p>
<img width="955" height="731" src="img/update_prop.gif" alt="Description of Figure 8-16 follows"/><br/>
<a id="sthref506" href="img_text/update_prop.htm">Description of &#34;Figure 8-16 The UCP Properties Update Page on the Browser&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>Click <span class="bold">Run Massive Website Client Access Simulation</span> to simulate many stock ticker clients using the service simultaneously:</p>
<div id="TDPJD409" class="figure">
<p class="titleinfigure"><a id="sthref507"></a>Figure 8-17 The Client Simulator Page on the Browser</p>
<img width="1049" height="292" src="img/client_sim.gif" alt="Description of Figure 8-17 follows"/><br/>
<a id="sthref508" href="img_text/client_sim.htm">Description of &#34;Figure 8-17 The Client Simulator Page on the Browser&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>This page provides the following fields:</p>
<div class="inftblhruleinformal">
<table class="cellalignment5888" summary="This table describes the Client Simulator page fields" dir="ltr">
<thead>
<tr class="cellalignment5879">
<th class="cellalignment5889" id="r1c1-t4">Field</th>
<th class="cellalignment5889" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5879">
<td class="cellalignment5885" id="r2c1-t4" headers="r1c1-t4"><code>Ticket server URL</code></td>
<td class="cellalignment5885" headers="r2c1-t4 r1c2-t4">Specifies the URL of ticker web service</td>
</tr>
<tr class="cellalignment5879">
<td class="cellalignment5885" id="r3c1-t4" headers="r1c1-t4"><code>Number of simulated users (threads) to run</code></td>
<td class="cellalignment5885" headers="r3c1-t4 r1c2-t4">Specifies the number of concurrent threads to run</td>
</tr>
<tr class="cellalignment5879">
<td class="cellalignment5885" id="r4c1-t4" headers="r1c1-t4"><code>Number of ticket requests per user</code></td>
<td class="cellalignment5885" headers="r4c1-t4 r1c2-t4">Specifies number of ticker requests per thread to run</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></li>
</ol>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5878">
<tr>
<td class="cellalignment5885">
<table class="cellalignment5883">
<tr>
<td class="cellalignment5882"><a href="getuncon.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5882"><a href="globapps.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5887">
<table class="cellalignment5881">
<tr>
<td class="cellalignment5882"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5882"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5882"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5882"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5882"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5882"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>