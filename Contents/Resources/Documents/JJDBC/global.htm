<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-70987"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Globalization%20Support"></a><title>Globalization Support</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023"/>
<meta name="description" content="This book describes how to use Oracle JDBC drivers to develop powerful Java database applications."/>
<meta name="dcterms.created" content="2014-06-30T1:22:37Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database JDBC Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49300-05"/>
<meta name="dcterms.isVersionOf" content="JJDBC"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="jcrowset.htm" title="Previous" type="text/html"/>
<link rel="Next" href="part5.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49300-05.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">30/55</span> <!-- End Header -->
<div id="JJDBC28643" class="chapter"><a id="CHDGGECB"></a>
<h1 class="chapter"><span class="secnum">19</span> Globalization Support</h1>
<p>The <a id="sthref690"></a>Oracle Java Database Connectivity (JDBC) drivers provide globalization support, formerly known as National Language Support (NLS). Globalization<a id="ABC1088676"></a> support enables you to retrieve data or insert data into a database in any character set that Oracle supports. If the clients and the server use different character sets, then the driver provides the support to perform the conversions between the database character set and the client character set.</p>
<p>This chapter contains the following sections:</p>
<ul>
<li>
<p><a href="#CHDCHJJC">Providing Globalization Support</a></p>
</li>
<li>
<p><a href="#CHDHHJDB">NCHAR, NVARCHAR2, NCLOB and the defaultNChar Property</a></p>
</li>
<li>
<p><a href="#BABJFAGA">New Methods for National Character Set Type Data in JDK 6</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="oraint.htm#i1064650">&#34;Oracle Character Data Types Support&#34;</a></p>
</li>
<li>
<p><a class="olink NLSPG" href="../NLSPG/toc.htm"><span class="italic">Oracle Database Globalization Support Guide</span></a></p>
</li>
<li>
<p><a class="olink REFRN" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a></p>
</li>
</ul>
</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>Starting from Oracle Database 10<span class="italic">g</span>, the <code><a id="sthref691"></a>NLS_LANG</code> variable is no longer part of the JDBC globalization mechanism. The JDBC driver does not check NLS environment. So, setting it has no effect.</p>
</li>
<li>
<p>The JDBC server-side internal driver provides complete globalization support and does not require any globalization extension files.</p>
</li>
<li>
<p>JDBC 4.0 includes methods for reading and writing national character set values. You should use these methods when using JSE 6 or later.</p>
</li>
</ul>
</div>
<a id="CHDCHJJC"></a>
<div id="JJDBC28644" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Providing Globalization Support</h2>
<p>The basic Java Archive (JAR) file <code>ojdbc7.jar</code>, contains all the necessary classes to provide complete globalization support for:</p>
<ul>
<li>
<p>Oracle character sets for <code>CHAR</code>, <code>VARCHAR</code>, <code>LONGVARCHAR</code>, or <code>CLOB</code> data that is not being retrieved or inserted as a data member of an Oracle object or collection type.</p>
</li>
<li>
<p><code>CHAR</code> or <code>VARCHAR</code> data members of object and collection for the character sets <code>US7ASCII</code>, <code>WE8DEC</code>, <code>WE8ISO8859P1</code>, <code>WE8MSWIN1252</code>, and <code>UTF8</code>.</p>
</li>
</ul>
<p>To use any other character sets in <code>CHAR</code> or <code>VARCHAR</code> data members of objects or collections, you must include <code>orai18n.jar</code> in the <code>CLASSPATH</code> environment variable:</p>
<pre><span class="italic">ORACLE_HOME</span>/jlib/orai18n.jar
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Previous releases depended on the <code>nls_charset12.zip</code> file. This file is now obsolete.</div>
<p class="subhead2"><a id="JJDBC28645"></a>Compressing orai18n.jar</p>
<p>The <a id="sthref692"></a><code>orai18n.jar</code> file contains many important character set and globalization support files. You can reduce the size of <code>orai18n.jar</code> using the built-in customization tool, as follows:</p>
<pre>java -jar orai18n.jar -custom-charsets-jar [<span class="italic">jar/zip_filename</span>] -charset <span class="italic">characterset_name</span> [<span class="italic">characterset_name</span> ...]
</pre>
<p>For example, if you want to create a custom character set file, <code>custom_orai18n_ja.jar</code>, that includes the JA16SJIS and JA16EUC character sets, then issue the following command:</p>
<pre>$ java -jar orai18n.jar -custom-charsets-jar custom_orai18n_ja.jar -charset JA16SJIS JA16EUC
</pre>
<p>The output of the command is as follows:</p>
<pre>Added Character set : JA16SJIS
Added Character set : JA16EUC
</pre>
<p>If you do not specify a file name for your custom JAR/ZIP file, then a file with the name <code>jdbc_orai18n_cs.jar</code> is created in the current working directory. Also, for your custom JAR/ZIP file, you cannot specify a name that starts with <code>orai18n</code>.</p>
<p>If any invalid or unsupported character set name is specified in the command, then no output JAR/ZIP file will be created. If the custom JAR/ZIP file exists, then the file will not be updated or removed.</p>
<p>The custom character set JAR/ZIP does not accept any command. However, it prints the version information and the command that was used to generate the JAR/ZIP file. For example, you have <code>jdbc_orai18n_cs.zip</code>, the command that displays the information and the displayed information is as follows:</p>
<pre>$ java -jar jdbc_orai18n_cs.jar
Oracle Globalization Development Kit - 12.1.X.X.X Release
This custom character set jar/zip file was created with the following command:
java -jar orai18n.jar -custom-charsets-jar jdbc_orai18n_cs.jar -charset WE8ISO8859P15
</pre>
<p>The limitation to the number of character sets that can be specified depends on that of the shell or command prompt of the operating system. It is certified that all supported character sets can be specified with the command.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are using a custom character set, then you need to perform the following so that JDBC supports the custom character set:
<ol>
<li>
<p>After creating the <code>.nlt</code> and <code>.nlb</code> files as part of the process of creating a custom character set, create <code>.glb</code> files for the newly created character set and also for the <code>lx0boot.nlt</code> file using the following command:</p>
<pre>java -classpath $ORACLE_HOME/jlib/orai18n-tools.jar Ginstall &lt;nlt file&gt;
</pre></li>
<li>
<p>Add the generated files and <code>$ORACLE_HOME/jlib/orai18n-mappings.jar</code> into the <code>classpath</code> environment variable while executing the JDBC code that connects to the database with the custom character set.</p>
</li>
</ol>
<p>For more information about creating a custom character set, refer to <a class="olink NLSPG" href="../NLSPG/toc.htm"><span class="italic">Oracle Database Globalization Support Guide.</span></a></p>
</div>
</div>
<!-- class="sect1" -->
<a id="CHDHHJDB"></a>
<div id="JJDBC28646" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">NCHAR, NVARCHAR2, NCLOB and the defaultNChar Property</h2>
<p>By default, the <code>oracle.jdbc.OraclePreparedStatement</code> interface treats the data type of all the columns in the same way as they are encoded in the database character set. However, since Oracle Database 10<span class="italic">g</span>, if you set the value of <code>oracle.jdbc.defaultNChar</code> system property to <code>true</code>, then JDBC treats all character columns as being national-language.</p>
<p>The default value of <code>defaultNChar</code> is false. If the value of <code>defaultNChar</code> is false, then you must call the <code>setFormOfUse(&lt;column_Index&gt;, OraclePreparedStatement.FORM_NCHAR)</code> method for those columns that specifically need national-language characters. For example:</p>
<pre>PreparedStatement pstmt =
conn.prepareStatement(&#34;insert into TEST values(?,?,?)&#34;);
pstmt.setFormOfUse(1, OraclePreparedStatement.FORM_NCHAR);
pstmt.setString(1, myUnicodeString1); // NCHAR column
pstmt.setFormOfUse(2, OraclePreparedeStatement.FORM_NCHAR);
pstmt.setString(2, myUnicodeString2); // NVARCHAR2 column
</pre>
<p>If you want to set the value of <code>defaultNChar</code> to <code>true</code>, then specify the following at the command-line:</p>
<pre>java -Doracle.jdbc.defaultNChar=true <span class="italic">myApplication</span>
</pre>
<p>If you prefer, then you can also specify <code>defaultNChar</code> as a connection property and access <code>NCHAR</code>, <code>NVARCHAR2</code>, or <code>NCLOB</code> data.</p>
<pre>Properties props = new Properties();
props.put(OracleConnection.CONNECTION_PROPERTY_DEFAULTNCHAR, &#34;true&#34;);
// set URL, username, password, and so on.
...
Connection conn = DriverManager.getConnection(props);
</pre>
<p>If the value of <code>defaultNChar</code> is <code>true</code>, then you should call the <code>setFormOfUse(&lt;column_Index&gt;, FORM_CHAR)</code> for columns that do not need national-language characters. For example:</p>
<pre>PreparedStatement pstmt =
conn.prepareStatement(&#34;insert into TEST values(?,?,?)&#34;);
pstmt.setFormOfUse(3, OraclePreparedStatement.FORM_CHAR);
pstmt.setString(3, myString); // CHAR column
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>Always use <code>java.lang.String</code> for character data instead of <code>oracle.sql.CHAR</code>. <code>CHAR</code> is provided only for backward compatibility.</p>
</li>
<li>
<p>You can also use the <code>setObject</code> method to access national character set types, but if the <code>setObject</code> method is used, then the target data type must be specified as <code>Types.NCHAR</code>, <code>Types.NCLOB</code>, <code>Types.NVARCHAR</code>, or <code>Types.LONGNVARCHAR</code>.</p>
</li>
</ul>
</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
In Oracle Database, SQL strings are converted to the database character set. Therefore you need to keep in mind the following:
<ul>
<li>
<p>In Oracle Database 10<span class="italic">g</span> release 1 (10.1) and earlier releases, JDBC drivers do not support any <code>NCHAR</code> literal (n&#39;...&#39;) containing Unicode characters that are not representable in the database character set. All Unicode characters that are not representable in the database character set get corrupted.</p>
</li>
<li>
<p>If an Oracle Database 10<span class="italic">g</span> release 2 (10.2) JDBC driver is connected to an Oracle Database 10<span class="italic">g</span> release 2 (10.2) database server, then all <code>NCHAR</code> literals (n&#39;...&#39;) are converted to Unicode literals (u&#39;...&#39;) and all non-ASCII characters are converted to their corresponding Unicode escape sequence. This is done automatically to prevent data corruption.</p>
</li>
<li>
<p>If an Oracle Database 10<span class="italic">g</span> release 2 (10.2) JDBC driver is connected to an Oracle Database 10<span class="italic">g</span> release 1 (10.1) or earlier database server, then <code>NCHAR</code> literals (n&#39;...&#39;) are not converted and any character that is not representable in the database character set gets corrupted.</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BABJFAGA"></a>
<div id="JJDBC28647" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">New Methods for National Character Set Type Data in JDK 6</h2>
<p>JDBC 4.0 introduces support for the following four additional SQL types to access the national character set types:</p>
<ul>
<li>
<p><code>NCHAR</code></p>
</li>
<li>
<p><code>NVARCHAR</code></p>
</li>
<li>
<p><code>LONGNVARCHAR</code></p>
</li>
<li>
<p><code>NCLOB</code></p>
</li>
</ul>
<p>These types are similar to the <code>CHAR</code>, <code>VARCHAR</code>, <code>LONGVARCHAR</code>, and <code>CLOB</code> types, except that the values are encoded using the national character set. The JDBC specification uses the <code>String</code> class to represent <code>NCHAR</code>, <code>NVARCHAR</code>, and <code>LONGNVARCHAR</code> data, and the <code>NClob</code> class to represent <code>NCLOB</code> values.</p>
<p>To retrieve a national character value, an application calls one of the following methods:</p>
<ul>
<li>
<p><code>getNString</code></p>
</li>
<li>
<p><code>getNClob</code></p>
</li>
<li>
<p><code>getNCharacterStream</code></p>
</li>
<li>
<p><code>getObject</code></p>
</li>
</ul>
<p>To specify a value for a parameter marker of national character type, an application calls one of the following methods:</p>
<ul>
<li>
<p><code>setNString</code></p>
</li>
<li>
<p><code>setNCharacterStream</code></p>
</li>
<li>
<p><code>setNClob</code></p>
</li>
<li>
<p><code>setObject</code></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can use the <code>setFormOfUse</code> method to specify a national character value in JDK 6. But this practice is discouraged because this method will be deprecated in future release. So, Oracle recommends you to use the methods discussed in this section.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
If the <code>setObject</code> method is used, then the target data type must be specified as <code>Types.NCHAR</code>, <code>Types.NCLOB</code>, <code>Types.NVARCHAR</code>, or <code>Types.LONGNVARCHAR</code>.</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2237">
<tr>
<td class="cellalignment2246">
<table class="cellalignment2242">
<tr>
<td class="cellalignment2241"><a href="jcrowset.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2241"><a href="part5.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2249">
<table class="cellalignment2240">
<tr>
<td class="cellalignment2241"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2241"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2241"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2241"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2241"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2241"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>