<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-70984"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/JDBC%20DMS%20Metrics"></a><title>JDBC DMS Metrics</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023"/>
<meta name="description" content="This book describes how to use Oracle JDBC drivers to develop powerful Java database applications."/>
<meta name="dcterms.created" content="2014-06-30T1:22:37Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database JDBC Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49300-05"/>
<meta name="dcterms.isVersionOf" content="JJDBC"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="diagnose.htm" title="Previous" type="text/html"/>
<link rel="Next" href="part9.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49300-05.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">48/55</span> <!-- End Header -->
<div id="JJDBC28899" class="chapter"><a id="CHDIJFHA"></a>
<h1 class="chapter"><span class="secnum">33</span> JDBC DMS Metrics</h1>
<p>DMS metrics are used to measure the performance of application components.</p>
<p>This chapter discusses the following topics:</p>
<ul>
<li>
<p><a href="#CHDDEAFI">Overview of JDBC DMS Metrics</a></p>
</li>
<li>
<p><a href="#CHDFDJGE">Determining the Type of Metric to Be Generated</a></p>
</li>
<li>
<p><a href="#CHDBDDHB">Generating the SQLText Metric</a></p>
</li>
<li>
<p><a href="#CHDJBCGF">Accessing DMS Metrics Using JMX</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
There is another kind of metrics called end-to-end metrics. End-to-end metrics are used for tagging application activity from the entry into the application code through JDBC to the database and back.
<p>JDBC supports the following end-to-end metrics:</p>
<ul>
<li>
<p><code>Action</code></p>
</li>
<li>
<p><code>ClientId</code></p>
</li>
<li>
<p><code>ExecutionContextId</code></p>
</li>
<li>
<p><code>Module</code></p>
</li>
<li>
<p><code>State</code></p>
</li>
</ul>
<p>For earlier releases, to work with the preceding metrics, you could use the <code>setEndToEndMetrics</code> and <code>getEndToEndMetrics</code> methods of the <code>oracle.jdbc.OracleConnection</code> interface. However, starting from Oracle Database 12<span class="italic">c</span> Release 1 (12.1), these methods have been deprecated. Oracle recommends to use the <code>setClientInfo</code> and <code>getClientInfo</code> methods instead of the <code>setEndToEndMetrics</code> and <code>getEndToEndMetrics</code> methods.</p>
<p>In Oracle Database 10<span class="italic">g</span>, Oracle Java Database Connectivity (JDBC) supports end-to-end metrics. In Oracle Database 12<span class="italic">c</span> Release 1 (12.1), an application can set the end-to-end metrics directly only when it does not use a DMS-enabled JAR files. But, if the application uses a DMS-enabled JAR file, the end-to-end metrics can be set only through DMS.</p>
<p>For more information about end-to-end metrics, refer to <a class="olink JAJDB" href="../JAJDB/toc.htm"><span class="italic">Oracle Database JDBC Java API Reference.</span></a></p>
</div>
<div class="infoboxnotewarn">
<p class="notep1">Caution:</p>
<p class="warnsp">Oracle strongly recommends using DMS metrics, if the application uses a DMS-enabled JAR file.</p>
</div>
<a id="CHDDEAFI"></a>
<div id="JJDBC28900" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Overview of JDBC DMS Metrics</h2>
<p>DMS metrics enable application and system developers to measure and export customized performance metrics for specific software components. All DMS metrics are available in the following DMS-enabled JAR files:</p>
<ul>
<li>
<p><code>ojdbc6dms.jar</code></p>
</li>
<li>
<p><code>ojdbc6dms_g.jar</code></p>
</li>
<li>
<p><code>ojdbc7dms.jar</code></p>
</li>
<li>
<p><code>ojdbc7dms_g.jar</code></p>
</li>
</ul>
<p>Any other JDBC JAR files do not generate any DMS metrics. The metrics generated in Oracle Database 12<span class="italic">c</span> Release 1 (12.1) are different from 10.2, 10.1, 9.2, and earlier versions of Oracle JDBC as it makes no attempt to retain compatibility with earlier versions. There are also no compatibility modes. A system that is dependent on the exact details of the DMS metrics generated by earlier versions of JDBC may have unexpected behavior when processing the metrics generated by Oracle JDBC 12<span class="italic">c</span>. This is by design and cannot be changed.</p>
<p>Statement metrics can be reported consolidated for all statements in a connection or individually for each statement. All DMS metrics, except those related to individual statements, are enabled at all times.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can enable or disable the <code>SQLText</code> statement metric. It is disabled by default. If enabled, it is enabled for all statements.</div>
</div>
<!-- class="sect1" -->
<a id="CHDFDJGE"></a>
<div id="JJDBC28901" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Determining the Type of Metric to Be Generated</h2>
<p>To determine whether to use consolidated or individual metrics, JDBC checks the DMSConsole sensor weight. If the sensor weight is less than or equal to <code>DMSConsole.NORMAL</code>, then JDBC generates consolidated statement metrics. If the sensor weight is greater than <code>DMSConsole.NORMAL</code>, then JDBC generates individual statement metrics.</p>
<p>JDBC checks the DMSConsole sensor weight when creating a Prepared or Callable statement and depending on the sensor weight at the time the statement is created, the metrics are generated. Changing the value of the sensor weight, after the statement has been created, does not cause a statement to switch between consolidated and individual metrics.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
In the presence of Statement caching, it may appear that changing sensor weight has no impact as statements are retrieved from the cache rather than created anew.</div>
<p>There is only one list of statement metrics that is generated for both consolidated and individual statement metrics. The only difference between these two lists is the aggregation of the statements. When individual statement metrics are generated, one set of metrics is generated for each distinct statement object created by the JDBC driver. On the other hand, when consolidated statement metrics are generated, all statements created by a given connection use the same set of statement metrics.</p>
<p>For example, consider an &#39;<code>execute</code>&#39; phase event. If individual statement metrics are used, then each statement created will have a distinct &#39;<code>execute</code>&#39; phase event. So, from two such statements, it will be possible to distinguish the execution statistics for the two separate statements. If one has an execution time of 1 second and the other an execution time of 3 seconds, then there will be two distinct &#39;execute&#39; phase events, one with a total time and average of 1 second and the other with a total time and average of 3 seconds. But, if consolidated statement metrics are used, all statements will use the single &#39;<code>execute</code>&#39; phase event common to the connection. So, from two such statements created by the same connection, it will not be possible to distinguish the execution statistics for the two statements. If one has an execution time of 1 second and the other an execution time of 3 seconds, then the common &#39;<code>execute</code>&#39; phase event will report a total execution time of 4 seconds and an average of 2 seconds.</p>
</div>
<!-- class="sect1" -->
<a id="CHDBDDHB"></a>
<div id="JJDBC28902" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Generating the SQLText Metric</h2>
<p>Depending on the version of DMS, there are two mechanisms for determining the generating of the <code>SQLText</code> statement metrics:</p>
<ul>
<li>
<p>If the 12<span class="italic">c</span> version of the DMS JAR file is present in the <code>classpath</code> environment variable, then JDBC checks the DMS update SQL text flag. If this flag is <code>true</code>, then the <code>SQLText</code> metric is updated.</p>
</li>
<li>
<p>If the 12<span class="italic">c</span> version of the DMS JAR file is not present in the <code>classpath</code> environment variable, then JDBC uses the value of the <code>DMSStatementMetrics</code> connection property. If this statement property is <code>true</code>, then <code>SQLText</code> metric is updated. The default value of this connection property is <code>false</code>.</p>
</li>
</ul>
<p>Whether or not the <code>SQLText</code> metric will be generated is independent of the use of the type of statement metrics used, that is, individual statement metrics or consolidated statement metrics.</p>
</div>
<!-- class="sect1" -->
<a id="CHDJBCGF"></a>
<div id="JJDBC28903" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Accessing DMS Metrics Using JMX</h2>
<p>JMX (Java Management Extensions) is a Java technology that supplies tools for managing and monitoring applications, system objects, devices, service-oriented networks, and the JVM (Java Virtual Machine). You can easily access DMS metrics at run time using a management application that supports JMX. For more information about using JMX to access DMS data, go to the following URL <code><a href="http://www.oracle.com/technetwork/middleware/toplink/overview/index.html">http://www.oracle.com/technetwork/middleware/toplink/overview/index.html</a></code></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink JJDEV13114" href="../JJDEV/chtwo.htm#JJDEV13114"><span class="italic">Oracle Database Java Developer&#39;s Guide</span></a> for more information about JMX</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2237">
<tr>
<td class="cellalignment2246">
<table class="cellalignment2242">
<tr>
<td class="cellalignment2241"><a href="diagnose.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2241"><a href="part9.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2249">
<table class="cellalignment2240">
<tr>
<td class="cellalignment2241"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2241"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2241"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2241"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2241"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2241"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>