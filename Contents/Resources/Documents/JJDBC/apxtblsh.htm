<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-70977"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Troubleshooting"></a><title>Troubleshooting</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023"/>
<meta name="description" content="This book describes how to use Oracle JDBC drivers to develop powerful Java database applications."/>
<meta name="dcterms.created" content="2014-06-30T1:22:38Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database JDBC Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49300-05"/>
<meta name="dcterms.isVersionOf" content="JJDBC"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="apxermsg.htm" title="Previous" type="text/html"/>
<link rel="Next" href="index.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49300-05.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">54/55</span> <!-- End Header -->
<div id="JJDBC28976" class="appendix"><a id="CEGDHCCD"></a>
<h1 class="appendix"><span class="secnum">E</span> Troubleshooting</h1>
<p>This appendix describes how to troubleshoot a Java Database Connectivity (JDBC) application or applet, and contains the following topics:</p>
<ul>
<li>
<p><a href="#i1001430">Common Problems</a></p>
</li>
<li>
<p><a href="#i1004693">Basic Debugging Procedures</a></p>
</li>
</ul>
<a id="i1001430"></a>
<div id="JJDBC28977" class="sect1">
<h2 class="sect1">Common Problems</h2>
<p>This section describes some common problems that you might encounter while using Oracle <a id="sthref1069"></a>JDBC drivers. These problems include:</p>
<ul>
<li>
<p><a href="#i1005245">Memory Consumption for CHAR Columns Defined as OUT or IN/OUT Variables</a></p>
</li>
<li>
<p><a href="#i1005250">Memory Leaks and Running Out of Cursors</a></p>
</li>
<li>
<p><a href="#i1006090">Opening More than 16 OCI Connections for a Process</a></p>
</li>
<li>
<p><a href="#BACDAICJ">Using statement.cancel</a></p>
</li>
<li>
<p><a href="#CHDBBDDA">Using JDBC with Firewalls</a></p>
</li>
<li>
<p><a href="#CBHHGCEF">Frequent Abrupt Disconnection from Server</a></p>
</li>
<li>
<p><a href="#CHDGDEGH">Network Adapter Cannot Establish Connection</a></p>
</li>
</ul>
<a id="i1005245"></a>
<div id="JJDBC28979" class="sect2">
<h3 class="sect2">Memory Consumption for CHAR Columns Defined as OUT or IN/OUT Variables</h3>
<p>In PL/SQL, when a <code>CHAR</code> or a <code>VARCHAR2</code> column is defined as a <code>OUT</code> or <code>IN/OUT</code> variable, the driver allocates a <code>CHAR</code> array of 32512 chars. This can cause a memory consumption problem. JDBC Thin driver does not allocate memory when using <code>VARCHAR2</code> output type. But JDBC OCI driver allocates memory for both <code>CHAR</code> and <code>VARCHAR2</code> types. So, CPU load in OCI driver is higher than Thin driver.</p>
<p>At previous releases, the solution to the problem was to invoke the <code>Statement.setMaxFieldSize</code> method. A better solution is to use <code>OracleCallableStatement.registerOutParameter</code>. Oracle encourages you always to call <code>registerOutParameter (int paramIndex, int sqlType, int scale, int maxLength)</code> on each <code>CHAR</code> or <code>VARCHAR2</code> column. This method is defined in <code>oracle.jdbc.OracleCallableStatement</code>. Use the fourth argument, <code>maxLength</code>, to limit the memory consumption. This parameter tells the driver how many characters are necessary to store this column. The column is truncated if the character array cannot hold the column data. The third argument, <code>scale</code>, is ignored by the driver.</p>
</div>
<!-- class="sect2" -->
<a id="i1005250"></a>
<div id="JJDBC28980" class="sect2">
<h3 class="sect2">Memory Leaks and Running Out of Cursors</h3>
<p>If you receive <a id="sthref1070"></a><a id="sthref1071"></a><a id="sthref1072"></a><a id="sthref1073"></a>messages that you are running out of cursors or that you are running out of memory, make sure that all your <code>Statement</code> and <code>ResultSet</code> objects are explicitly closed. Oracle JDBC drivers do not have finalizer methods. They perform cleanup routines by using the <code>close</code> method of the <code>ResultSet</code> and <code>Statement</code> classes. If you do not explicitly close your result set and statement objects, significant memory leaks can occur. You could also run out of cursors in the database. Closing a statement releases the corresponding cursor in the database.</p>
<p>Similarly, you must explicitly close <code>Connection</code> objects to avoid leaking and running out of cursors on the server-side. When you close the connection, the JDBC driver closes any open statement objects associated with it, thus releasing the cursor on the server-side.</p>
</div>
<!-- class="sect2" -->
<a id="i1006090"></a>
<div id="JJDBC28982" class="sect2">
<h3 class="sect2">Opening More than 16 OCI Connections for a Process</h3>
<p>You may find that you are unable to open more than approximately 16 JDBC-OCI connections for a process at any given time. The most likely reasons for this would be either that the number of processes on the server exceeded the limit specified in the initialization file, or that the per-process file descriptors limit was exceeded. It is important to note that one JDBC-OCI connection can use more than one file descriptor (it might use anywhere between 3 and 4 file descriptors).</p>
<p>If the server allows more than 16 processes, then the problem could be with the per-process file descriptor limit. The possible solution would be to increase this limit.</p>
</div>
<!-- class="sect2" -->
<a id="BACDAICJ"></a>
<div id="JJDBC28983" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Using statement.cancel</h3>
<p><a id="sthref1074"></a><a id="sthref1075"></a><a id="sthref1076"></a>The JDBC standard method <code>Statement.cancel</code> attempts to cleanly stop the execution of a SQL statement by sending a message to the database. In response, the database stops execution and replies with an error message. The Java thread that invoked <code>Statement.execute</code> waits on the server, and continues execution only when it receives the error reply message invoked by the call of the other thread to <code>Statement.cancel</code> method.</p>
<p>As a result, the <code>Statement.cancel</code> method relies on the correct functioning of the network and the database. If either the network connection is broken or the database server is hung, the client does not receive the error reply to the cancel message. Frequently, when the server process dies, JDBC receives an <code>IOException</code> that frees the thread that invoked <code>Statement.execute</code>. In some circumstances, the server is hung, but JDBC does not receive an <code>IOException</code>. The <code>Statement.cancel</code> method does not free the thread that initiated the <code>Statement.execute</code> method.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Remember the following points while working with the <code>Statement.cancel</code> method:
<ul>
<li>
<p>Distinguish between Connection-level and Statement-level cancel. If a nonstatement execution, for example, a <code>ROLLBACK</code> is cancelled by a <code>statement.cancel</code> method, then we replay the command (only if it is <code>ROLLBACK</code>, <code>COMMIT</code>, <code>autoCommit ON</code>, <code>autoCommit OFF</code>, <code>VERSION</code>). To guarantee data integrity, we do not replay statement executions.</p>
</li>
<li>
<p>Synchronize statement execution and statement cancel, so that the execution does not return until the cancel call is sent to the Database. This provides a better chance for the executing statement to be cancelled.</p>
</li>
<li>
<p>Synchronize cancel calls, so that any new cancel request is ignored until the cancel in progress has completed the full protocol, that is, after the database receives an interrupt, act on it, and notify JDBC.</p>
</li>
</ul>
</div>
<p>When JDBC does not receive an <code>IOException</code>, Oracle Net may eventually time out and close the connection. This causes an <code>IOException</code> and frees the thread. This process can take many minutes. For information about how to control this time-out, see the description of the <code>readTimeout</code> property for <code>OracleDatasource.setConnectionProperties</code>. You can also tune this time-out with certain Oracle Net settings.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG" href="../NETAG/toc.htm"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for more information</div>
<p>The JDBC standard method <code>Statement.setQueryTimeout</code> relies on the <code>Statement.cancel</code> method. If execution continues longer than the specified time-out interval, then the monitor thread calls the <code>Statement.cancel</code> method. This is subject to all the same limitations described previously. As a result, there are cases when the time-out does not free the thread that invoked the <code>Statement.execute</code> method.</p>
<p>The length of time between execution and cancellation is not precise. This interval is no less than the specified time-out interval but can be several seconds longer. If the application has active threads running at high priority, then the interval can be arbitrarily longer. The monitor thread runs at high priority, but other high priority threads may keep it from running indefinitely. Note that the monitor thread is started only if there are statements executed with non zero time-out. There is only one monitor thread that monitors all Oracle JDBC statement execution.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code>Statement.cancel</code> method and the <code>Statement.setQueryTimeout</code> method are not supported in the server-side internal driver. The server-side internal driver runs in the single-threaded server process and the Oracle JVM implements Java threads within this single-threaded process. If the server-side internal driver is executing a SQL statement, then no Java thread can call the <code>Statement.cancel</code> method. This also applies to the Oracle JDBC monitor thread.</div>
</div>
<!-- class="sect2" -->
<a id="CHDBBDDA"></a>
<div id="JJDBC28984" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref1077"></a>Using JDBC with Firewalls</h3>
<p>Firewall timeout for idle-connections may sever a connection. This can cause JDBC applications to hang while waiting for a connection. You can perform one or more of the following actions to avoid connections from being severed due to firewall timeout:</p>
<ul>
<li>
<p>If you are using connection caching or connection pooling, then always set the inactivity timeout value on the connection cache to be shorter than the firewall idle timeout value.</p>
</li>
<li>
<p>Pass <code>oracle.jdbc.ReadTimeout</code> as connection property to enable read timeout on socket. The timeout value is in milliseconds.</p>
</li>
<li>
<p>For both JDBC OCI and JDBC Thin drivers, use net descriptor to connect to the database and specify the <code>ENABLE=BROKEN</code> parameter in the <code>DESCRIPTION</code> clause in the connect descriptor. Also, set a lower value for <code>TCP_KEEPALIVE_INTERVAL</code>.</p>
</li>
<li>
<p>Enable Oracle Net DCD by setting <code>SQLNET.EXPIRE_TIME=1</code> in the <code>sqlnet.ora</code> file on the server-side.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CBHHGCEF"></a>
<div id="JJDBC28985" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Frequent Abrupt Disconnection from Server</h3>
<p>If the network is not reliable, then it is difficult for a client to detect the frequent disconnections when the server is abruptly disconnected. By default, a client running on Linux takes 7200 seconds (2 hours) to sense the abrupt disconnections. This value is equal to the value of the <code>tcp_keepalive_time</code> property. If you want your application to detect the disconnections faster, then you must set the value of the <code>tcp_keepalive_time</code>, <code>tcp_keepalive_interval</code>, and <code>tcp_keepalive_probes</code> properties to a lower value at the operating system level.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Setting a low value for the <code>tcp_keepalive_interval</code> property leads to frequent probe packets on the network, which can make the system slower. So, the value of this property should be set appropriately based on the system requirements.</div>
<p>Also, you must specify the <code>ENABLE=BROKEN</code> parameter in the <code>DESCRIPTION</code> clause in the connection descriptor. For example:</p>
<pre>jdbc:oracle:thin:@(DESCRIPTION=(ENABLE=BROKEN)(ADDRESS=(PROTOCOL=tcp)(PORT=5221)(HOST=myhost))(CONNECT_DATA=(SERVICE_NAME=orcl)))
</pre></div>
<!-- class="sect2" -->
<a id="CHDGDEGH"></a>
<div id="JJDBC29175" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Network Adapter Cannot Establish Connection</h3>
<p>You may receive the following error while trying to establish a connection from a JDBC application to an Oracle instance:</p>
<pre>java.sql.SQLException: Io exception: 
  The Network Adapter could not establish connection
 
SQLException: SQLState (null) vendor code (17002)
</pre>
<p>This error may occur even if all or any of the following conditions is true:</p>
<ul>
<li>
<p>You are able to establish a SQL*Plus connection from the same client to the same Oracle instance.</p>
</li>
<li>
<p>You are able to establish a JDBC OCI connection, but not a JDBC Thin connection from the same client to the same Oracle instance.</p>
</li>
<li>
<p>The same JDBC application is able to connect from a different client to the same Oracle instance.</p>
</li>
<li>
<p>The same behavior applies whether the initial JDBC connection string specifies a host name or an IP address.</p>
</li>
</ul>
<p>One or more of the following reasons can cause this error:</p>
<ul>
<li>
<p>The host name to which you are trying to establish the connection is incorrect.</p>
</li>
<li>
<p>The port number you are using to establish the connection is wrong.</p>
</li>
<li>
<p>The NIC card supports both IPv4 and IPv6.</p>
</li>
<li>
<p>The Oracle instance is configured for MTS, but the JDBC connection uses a shared server instead of a dedicated server.</p>
</li>
</ul>
<p>You can quickly diagnose these above-mentioned reasons by using SQL*Plus, except for the issue with the NIC card. The following sections specify how to resolve this error, and also contains a sample application:</p>
<ul>
<li>
<p><a href="#CHDDGAAF">Oracle Instance Configured with MTS Server Uses Shared Server</a></p>
</li>
<li>
<p><a href="#CHDDJHCE">JDBC Thin Driver with NIC Card Supporting Both IPv4 and IPv6</a></p>
</li>
<li>
<p><a href="#CHDIDIEC">Sample Application</a></p>
</li>
</ul>
<a id="CHDDGAAF"></a>
<div id="JJDBC29176" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Oracle Instance Configured with MTS Server Uses Shared Server</h4>
<p>For resolving this error, you must verify whether the Oracle instance is configured for Multi-threaded Server (MTS) or not. If the Oracle instance is not configured for MTS, then it must be configured.</p>
<p>If the Oracle instance is configured for MTS, then you must force the JDBC connection to use a dedicated server instead of a shared server. You can achieve this by reconfiguring the server to use dedicated connections only. If it is not feasible to configure your server to use only dedicated connections, then you perform the following steps to set it from the client side:</p>
<p class="subhead2"><a id="JJDBC29177"></a>For JDBC OCI Client</p>
<ol>
<li>
<p>Add the <code>(SERVER=DEDICATED)</code> property to the TNS connection string stored in the <code>tnsnames.ora</code> file on the client.</p>
</li>
<li>
<p>Set the <code>USER_DEDICATED_SERVER=ON</code> in the <code>sqlnet.ora</code> file on the client.</p>
</li>
</ol>
<p class="subhead2"><a id="JJDBC29178"></a>For JDBC Thin:</p>
<p>You must specify a full name-value pair connection string (the same as it may appear in the <code>tnsnames.ora</code> file) instead of the short JDBC Thin syntax. For example, instead of the &#34;<code>jdbc:oracle:thin:@host:port:sid</code>&#34; connection string, you must use a connection string of the following form:</p>
<pre>   &#34;jdbc:oracle:thin:@(DESCRIPTION=&#34;                   +
                         &#34;(ADDRESS_LIST=&#34;              +
                             &#34;(ADDRESS=(PROTOCOL=TCP)&#34; +
                                      &#34;(HOST=host)&#34;    +
                                      &#34;(PORT=port)&#34;    +
                             &#34;)&#34;                       +
                         &#34;)&#34;                           +
                         &#34;(CONNECT_DATA=&#34;              +
                             &#34;(SERVICE_NAME=sid)&#34;      +
                             &#34;(SERVER=DEDICATED)&#34;      +
                         &#34;)&#34;                           +
                       &#34;)&#34;
</pre></div>
<!-- class="sect3" -->
<a id="CHDDJHCE"></a>
<div id="JJDBC29179" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">JDBC Thin Driver with NIC Card Supporting Both IPv4 and IPv6</h4>
<p>If the Network Interface Controller (NIC) card of the server is configured to support both IPv4 and IPv6, then some services may start with IPv6. Any client application that tries to connect using IPv4 to the service that is running with IPv6 (or the other way round) receives a connection refused error. If a JDBC thin client application tries to connect to the Database server, then the application may stop responding or fail with the following error:</p>
<pre>java.sql.SQLException: Io exception: The Network Adapter could not establish the connection Error Code: 17002
</pre>
<p>Use any of the following solutions to resolve this error:</p>
<ul>
<li>
<p>Indicate the Java Virtual Machine (JVM) to use IP protocol version 4. Launch the JVM, where the JDBC application is running, with the <code>-Djava.net.preferIPv4Stack</code> parameter as <code>true</code>. For example, suppose you are running a JDBC application named <code>jdbcTest</code>. Then execute the application in the following way:</p>
<pre>java -Djava.net.preferIPv4Stack=true jdbcTest
</pre></li>
<li>
<p>Use the OCI JDBC driver.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CHDIDIEC"></a>
<div id="JJDBC29180" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Sample Application</h4>
<p><a href="#CHDHJBCE">Example E-1</a> shows a basic JDBC program that connects to a Database and can be used to test your connection. It enables to try all forms of connection using Oracle JDBC drivers.</p>
<div id="JJDBC29181" class="example">
<p class="titleinexample"><a id="CHDHJBCE"></a>Example E-1 Basic JDBC Program to Connect to a Database in Five Different Ways</p>
<pre>import java.sql.*;
public class Jdbctest
{
   public static void main (String args[])
   {
         try 
         {
                   /* Uncomment the next line for more connection information */
                   // DriverManager.setLogStream(System.out);          
                   /* Set the host, port, and sid below to match the entries in the listener.ora */         
                   String host = &#34;myhost.oracle.com&#34;;
                   String port = &#34;5221&#34;;
                   String sid  = &#34;orcl&#34;;
                   // or pass on command line arguments for all three items         
                   if ( args.length &gt;= 3 ) 
                   { 
                              host = args[0];
                              port = args[1];            
                              sid  = args[2];
                   }
                   
                   String s1 = &#34;jdbc:oracle:thin:@&#34; + host + &#34;:&#34; + port + &#34;:&#34; + sid ;
                   if ( args.length == 1 )
                   { 
                              s1 =  &#34;jdbc:oracle:oci8:@&#34; + args[0];
                   }
                   if ( args.length == 4 )
                   {
                               s1 = &#34;jdbc:oracle:&#34; + args[3] + &#34;:@&#34; + 
                                    &#34;(description=(address=(host=&#34; + host+ &#34;)(protocol=tcp)(port=&#34; + port+ &#34;))(connect_data=(sid=&#34;+ sid + &#34;)))&#34;;
                   } 
                   System.out.println( &#34;Connecting with: &#34; );
                   System.out.println( s1 );          
                   DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());
                   Connection conn = DriverManager.getConnection( s1,&#34;hr&#34;,&#34;hr&#34;);          
                   DatabaseMetaData dmd = conn.getMetaData();
                   System.out.println(&#34;DriverVersion:[&#34;+dmd.getDriverVersion()+&#34;]&#34;);
                   System.out.println(&#34;DriverMajorVersion: [&#34;+dmd.getDriverMajorVersion()+&#34;]&#34;);
                   System.out.println(&#34;DriverMinorVersion: [&#34;+dmd.getDriverMinorVersion()+&#34;]&#34;);
                   System.out.println(&#34;DriverName:[&#34;+dmd.getDriverName()+&#34;]&#34;);
                   if ( conn!=null ) 
                      conn.close();
                   System.out.println(&#34;Done.&#34;);
           } 
           catch ( SQLException e ) 
           { 
                   System.out.println (&#34;\n*** Java Stack Trace ***\n&#34;);
                   e.printStackTrace();          
                   System.out.println (&#34;\n*** SQLException caught ***\n&#34;);          
                   while ( e != null ) 
                   {
                               System.out.println (&#34;SQLState: &#34; + e.getSQLState ());             
                               System.out.println (&#34;Message:  &#34; + e.getMessage ());             
                               System.out.println (&#34;Error Code:   &#34; + e.getErrorCode ());             
                               e = e.getNextException ();             
                               System.out.println (&#34;&#34;);          
                    }       
             }   
  }
}
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1004693"></a>
<div id="JJDBC28986" class="sect1">
<h2 class="sect1">Basic Debugging Procedures</h2>
<p>This section describes strategies for <a id="sthref1078"></a>debugging a JDBC program:</p>
<ul>
<li>
<p><a href="#i1004660">Oracle Net Tracing to Trap Network Events</a></p>
</li>
<li>
<p><a href="#i1004665">Third Party Debugging Tools</a></p>
</li>
</ul>
<p>For information about processing SQL exceptions, including printing stack traces to aid in debugging, see <a href="getsta.htm#i1018335">&#34;Processing SQL Exceptions&#34;</a>.</p>
<a id="i1004660"></a>
<div id="JJDBC28987" class="sect2">
<h3 class="sect2">Oracle Net Tracing to Trap Network Events</h3>
<p><a id="sthref1079"></a>You can enable client and server Oracle-Net trace to trap the packets sent over Oracle Net. You can use client-side tracing only for the JDBC OCI driver; it is not supported for the JDBC Thin driver. You can find more information about tracing and reading trace files in the <span class="italic">Oracle Net Services Administrator&#39;s Guide</span>.</p>
<p>The <a id="sthref1080"></a>trace facility produces a detailed sequence of statements that describe network events as they execute. &#34;Tracing&#34; an operation lets you obtain more information about the internal operations of the event. This information is printed to a readable file that identifies the events that led to the error. Several Oracle Net parameters in the <code><a id="sthref1081"></a>SQLNET.ORA</code> file control the gathering of trace information. After setting the parameters in <code>SQLNET.ORA</code>, you must make a new connection for tracing to be performed.</p>
<p>The higher the trace level, the more detail is captured in the trace file. Because the trace file can be hard to understand, start with a trace level of 4 when enabling tracing. The first part of the trace file contains connection handshake information, so look beyond this for the SQL statements and error messages related to your JDBC program.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The trace facility uses a large amount of disk space and might have significant impact upon system performance. Therefore, enable tracing only when necessary.</div>
<div id="JJDBC28988" class="sect3"><a id="sthref1082"></a>
<h4 class="sect3">Client-Side Tracing</h4>
<p><a id="sthref1083"></a> Set the following parameters in the <code>SQLNET.ORA</code> file on the client system.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Starting from Oracle Database 12<span class="italic">c</span> Release 1 (12.1), Oracle recommends you to use the configuration parameters present in the new XML configuration file <code>oraaccess.xml</code> instead of the OCI-specific configuration parameters present in the <code>sqlnet.ora</code> file. However, the configuration parameters present in the <code>sqlnet.ora</code> file are still supported. For more information about the <code>oraaccess.xml</code> file, see <a class="olink LNOCI73054" href="../LNOCI/oci10new.htm#LNOCI73054"><span class="italic">Oracle Call Interface Programmer&#39;s Guide</span></a>.</div>
<div id="JJDBC28989" class="sect4"><a id="sthref1084"></a>
<h5 class="sect4">TRACE_LEVEL_CLIENT</h5>
<p><span class="bold">Purpose:</span></p>
<p>Turns tracing <code>on</code> or <code>off</code> to a certain specified level.</p>
<p><span class="bold">Default Value:</span></p>
<p>0 or OFF</p>
<p><span class="bold">Available Values:</span></p>
<ul>
<li>
<p>0 or <code>OFF</code> - No trace output</p>
</li>
<li>
<p>4 or <code>USER</code> - User trace information</p>
</li>
<li>
<p>10 or <code>ADMIN</code> - Administration trace information</p>
</li>
<li>
<p>16 or <code>SUPPORT</code> - WorldWide Customer Support trace information</p>
</li>
</ul>
<p><span class="bold">Example:</span></p>
<pre>TRACE_LEVEL_CLIENT=10
</pre></div>
<!-- class="sect4" -->
<div id="JJDBC28990" class="sect4"><a id="sthref1085"></a>
<h5 class="sect4">TRACE_DIRECTORY_CLIENT</h5>
<p><span class="bold">Purpose:</span></p>
<p>Specifies the destination directory of the trace file.</p>
<p><span class="bold">Default Value:</span></p>
<p><code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>/network/trace</code></p>
<p><span class="bold">Example:</span></p>
<p>UNIX: <code>TRACE_DIRECTORY_CLIENT=/oracle/traces</code></p>
<p>Windows: <code>TRACE_DIRECTORY_CLIENT=C:\ORACLE\TRACES</code></p>
</div>
<!-- class="sect4" -->
<div id="JJDBC28991" class="sect4"><a id="sthref1086"></a>
<h5 class="sect4">TRACE_FILE_CLIENT</h5>
<p><span class="bold">Purpose:</span></p>
<p>Specifies the name of the client trace file.</p>
<p><span class="bold">Default Value:</span></p>
<p><code>SQLNET.TRC</code></p>
<p><span class="bold">Example:</span></p>
<p><code>TRACE_FILE_CLIENT=cli_Connection1.trc</code></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Ensure that the name you choose for the <code>TRACE_FILE_CLIENT</code> file is different from the name you choose for the <code>TRACE_FILE_SERVER</code> file.</div>
</div>
<!-- class="sect4" -->
<div id="JJDBC28992" class="sect4"><a id="sthref1087"></a>
<h5 class="sect4">TRACE_UNIQUE_CLIENT</h5>
<p><span class="bold">Purpose:</span></p>
<p>Gives each client-side trace a unique name to prevent each trace file from being overwritten with the next occurrence of a client trace. The <code>PID</code> is attached to the end of the file name.</p>
<p><span class="bold">Default Value:</span></p>
<p><code>OFF</code></p>
<p><span class="bold">Example:</span></p>
<p><code>TRACE_UNIQUE_CLIENT = ON</code></p>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<div id="JJDBC28993" class="sect3"><a id="sthref1088"></a>
<h4 class="sect3">Server-Side Tracing</h4>
<p><a id="sthref1089"></a>Set the following parameters in the <code>SQLNET.ORA</code> file on the server system. Each connection will generate a separate file with a unique file name.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Starting from Oracle Database 12<span class="italic">c</span> Release 1 (12.1), Oracle recommends you to use the configuration parameters present in the new XML configuration file <code>oraaccess.xml</code> instead of the OCI-specific configuration parameters present in the <code>sqlnet.ora</code> file. However, the configuration parameters present in the <code>sqlnet.ora</code> file are still supported. For more information about the <code>oraaccess.xml</code> file, see <a class="olink LNOCI73054" href="../LNOCI/oci10new.htm#LNOCI73054"><span class="italic">Oracle Call Interface Programmer&#39;s Guide</span></a>.</div>
<div id="JJDBC28994" class="sect4"><a id="sthref1090"></a>
<h5 class="sect4">TRACE_LEVEL_SERVER</h5>
<p><span class="bold">Purpose:</span></p>
<p>Turns tracing <code>on</code> or <code>off</code> to a certain specified level.</p>
<p><span class="bold">Default Value:</span></p>
<p>0 or <code>OFF</code></p>
<p><span class="bold">Available Values:</span></p>
<ul>
<li>
<p>0 or <code>OFF</code> - No trace output</p>
</li>
<li>
<p>4 or <code>USER</code> - User trace information</p>
</li>
<li>
<p>10 or <code>ADMIN</code> - Administration trace information</p>
</li>
<li>
<p>16 or <code>SUPPORT</code> - WorldWide Customer Support trace information</p>
</li>
</ul>
<p><span class="bold">Example:</span></p>
<pre>TRACE_LEVEL_SERVER=10
</pre></div>
<!-- class="sect4" -->
<div id="JJDBC28995" class="sect4"><a id="sthref1091"></a>
<h5 class="sect4">TRACE_DIRECTORY_SERVER</h5>
<p><span class="bold">Purpose:</span></p>
<p>Specifies the destination directory of the trace file.</p>
<p><span class="bold">Default Value:</span></p>
<p><code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>/network/trace</code></p>
<p><span class="bold">Example:</span></p>
<p><code>TRACE_DIRECTORY_SERVER=/oracle/traces</code></p>
</div>
<!-- class="sect4" -->
<div id="JJDBC28996" class="sect4"><a id="sthref1092"></a>
<h5 class="sect4">TRACE_FILE_SERVER</h5>
<p><span class="bold">Purpose:</span></p>
<p>Specifies the name of the server trace file.</p>
<p><span class="bold">Default Value:</span></p>
<p><code>SERVER.TRC</code></p>
<p><span class="bold">Example:</span></p>
<p><code>TRACE_FILE_SERVER= svr_Connection1.trc</code></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Ensure that the name you choose for the <code>TRACE_FILE_SERVER</code> file is different from the name you choose for the <code>TRACE_FILE_CLIENT</code> file.</div>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1004665"></a>
<div id="JJDBC28997" class="sect2">
<h3 class="sect2">Third Party Debugging Tools</h3>
<p>You can use tools such as <a id="sthref1093"></a>JDBCSpy and <a id="sthref1094"></a>JDBCTest from Intersolv to troubleshoot at the JDBC API level. These tools are similar to <a id="sthref1095"></a>ODBC Spy and <a id="sthref1096"></a>ODBC Test tools.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="appendix" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2237">
<tr>
<td class="cellalignment2246">
<table class="cellalignment2242">
<tr>
<td class="cellalignment2241"><a href="apxermsg.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2241"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2249">
<table class="cellalignment2240">
<tr>
<td class="cellalignment2241"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2241"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2241"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2241"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2241"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2241"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>