<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2069"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Gateway%20Initialization%20Parameters%20for%20SNA%20Protocol"></a><title>Gateway Initialization Parameters for SNA Protocol</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1090"/>
<meta name="dcterms.created" content="2017-06-07T20:58:54Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Gateway for APPC Installation and Configuration Guide"/>
<meta name="dcterms.identifier" content="E17929-06"/>
<meta name="dcterms.isVersionOf" content="APPCI"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2004, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="ch15.htm" title="Previous" type="text/html"/>
<link rel="Next" href="apb.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17929-06.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">19/23</span> <!-- End Header -->
<div id="APPCI283" class="appendix"><a id="g636937"></a> <a id="i624650"></a>
<h1 class="appendix"><span class="secnum">A</span> Gateway Initialization Parameters for SNA Protocol</h1>
<p>This appendix describes the gateway initialization file location and lists the <a id="sthref1184"></a><a id="sthref1185"></a>gateway initialization parameters supported by Oracle Database Gateway for APPC, specifically for the SNA protocol. These parameters are fully documented in <a href="ch15.htm#i33501">&#34;Migrating An Existing Gateway Instance to a New Release Using SNA Protocol&#34;</a>. In addition, this appendix contains sample <code dir="ltr">listener.ora</code> and <code dir="ltr">tnsnames</code> files for a gateway using SNA.</p>
<p>This appendix contains the following sections:</p>
<ul>
<li>
<p><a href="#i627100">Gateway Initialization Parameter File Using SNA Protocol</a></p>
</li>
</ul>
<a id="i627100"></a>
<div id="APPCI284" class="sect1">
<h2 class="sect1">Gateway Initialization Parameter File Using SNA Protocol<a id="sthref1186"></a><a id="sthref1187"></a></h2>
<p>The parameter file for the gateway is located in the<br/>
<code dir="ltr">$ORACLE_HOME/dg4appc/admin</code> directory and is called <a id="sthref1188"></a><a id="sthref1189"></a><a id="sthref1190"></a><a id="sthref1191"></a><code dir="ltr">init</code><code dir="ltr"><span class="codeinlineitalic">sid.</span></code><code dir="ltr">ora</code>.</p>
<p>This section covers various aspects of the gateway initialization file in the following sections:</p>
<ul>
<li>
<p><a href="#i624735">PGA Parameters</a></p>
</li>
<li>
<p><a href="#i633378">PGA_CAPABILITY Parameter Considerations</a></p>
</li>
<li>
<p><a href="#i627764">PGA_CONFIRM Parameter Considerations</a></p>
</li>
<li>
<p><a href="#CHDHIHAG">Sample listener.ora file for a Gateway Using SNA</a></p>
</li>
<li>
<p><a href="#CHDBHAIH">Sample tnsnames.ora file for a Gateway Using SNA</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1"><span class="bold">Note</span>:</p>
The <code dir="ltr">init</code><code dir="ltr"><span class="codeinlineitalic">sid.</span></code><code dir="ltr">ora</code> file contains both SNA and TCP/IP parameters. You must modify these files with suitable parameters.</div>
<a id="i624735"></a>
<div id="APPCI285" class="sect2">
<h3 class="sect2">PGA Parameters</h3>
<p>The <a id="sthref1192"></a><a id="sthref1193"></a>PGA parameters control the APPC interface portion of the gateway. PGA parameters are specified using the <code dir="ltr">SET</code> <a id="sthref1194"></a>gateway initialization parameter. For example:</p>
<pre dir="ltr">SET <span class="italic">pga_parm=value</span> 
</pre>
<p>where:</p>
<ul>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">pga_parm</span></code> is one of the PGA parameter names in the list that follows</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">value</span></code> is a character string with contents that depend on <code dir="ltr"><span class="codeinlineitalic">pga_parm</span></code></p>
</li>
</ul>
<p><a href="#g635413">Table A-1</a> provides a list of PGA parameters and their descriptions.</p>
<div id="APPCI371" class="tblformal">
<p class="titleintable"><a id="sthref1195"></a><a id="g635413"></a>Table A-1 PGA Parameters for Gateway Using SNA</p>
<table class="cellalignment2574" title="PGA Parameters for Gateway Using SNA" summary="provides a list of PGA parameters and their descriptions" dir="ltr">
<thead>
<tr class="cellalignment2565">
<th class="cellalignment2575" id="r1c1-t3">Parameter</th>
<th class="cellalignment2575" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2565">
<td class="cellalignment2571" id="r2c1-t3" headers="r1c1-t3">
<p><a id="sthref1196"></a><code dir="ltr">LOG_DESTINATION</code>=<code dir="ltr"><span class="codeinlineitalic">logpath</span></code></p>
</td>
<td class="cellalignment2571" headers="r2c1-t3 r1c2-t3">
<p><code dir="ltr"><span class="codeinlineitalic">logpath</span></code> specifies the destination at which <code dir="ltr">STDERR</code> is reopened. <code dir="ltr">LOG_DESTINATION</code> specifies a directory only and <code dir="ltr">STDERR</code> is reopened to <code dir="ltr">logpath/</code><code dir="ltr"><span class="codeinlineitalic">sid_pid</span></code><code dir="ltr">.log</code></p>
<p>where:</p>
<ul>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">sid</span></code> is the sid name</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">pid</span></code> is the process ID assigned to the gateway</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment2565">
<td class="cellalignment2571" id="r3c1-t3" headers="r1c1-t3">
<p><a id="sthref1197"></a><a id="sthref1198"></a><code dir="ltr">PGA_CAPABILITY</code></p>
</td>
<td class="cellalignment2571" headers="r3c1-t3 r1c2-t3">
<p>PGA transaction capability. This controls whether updates are allowed through the gateway. The following are valid values:</p>
<p><code dir="ltr">READ_ONLY</code> or <code dir="ltr">RO</code>: Read-only capabilities.</p>
<p><code dir="ltr">SINGLE_SITE</code> or <code dir="ltr">SS</code>: Single-site update only. This indicates that in a distributed environment, only the gateway can perform updates. No other database updates can occur within the Oracle transaction.</p>
<p><a id="sthref1199"></a><code dir="ltr">COMMIT_CONFIRM</code> or <code dir="ltr">CC</code>: Commit-confirm. This indicates that in a distributed environment, updates can be performed by both the gateway and other participants within the Oracle transaction. The gateway is always committed first in this mode, and no other commit-confirm sites are allowed to participate in the Oracle transaction.<a id="sthref1200"></a></p>
<p>The default is <code dir="ltr">SINGLE_SITE</code>.</p>
</td>
</tr>
<tr class="cellalignment2565">
<td class="cellalignment2571" id="r4c1-t3" headers="r1c1-t3">
<p><a id="sthref1201"></a><a id="sthref1202"></a><code dir="ltr">PGA_CONFIRM</code></p>
</td>
<td class="cellalignment2571" headers="r4c1-t3 r1c2-t3">
<p>Incoming APPC <code dir="ltr">CONFIRM</code> request handling option. This controls what the gateway does when an APPC <code dir="ltr">CONFIRM</code> request is received from the remote transaction program. This parameter has meaning only when the conversation is running with <code dir="ltr">SYNCLEVEL</code> set to a value higher than 0. The following are valid values:</p>
<p><code dir="ltr">ACCEPT</code> - Respond to incoming APPC <code dir="ltr">CONFIRM</code> requests with APPC <code dir="ltr">CONFIRMED</code> responses.</p>
<p><code dir="ltr">REJECT</code> - Treat incoming APPC <code dir="ltr">CONFIRM</code> requests as <a id="sthref1203"></a>errors causing the conversation to be deallocated and an error message to be issued.</p>
<p>The default is <code dir="ltr">REJECT</code>.</p>
</td>
</tr>
<tr class="cellalignment2565">
<td class="cellalignment2571" id="r5c1-t3" headers="r1c1-t3">
<p><a id="sthref1204"></a><a id="sthref1205"></a><code dir="ltr">PGA_LOG_DB</code></p>
</td>
<td class="cellalignment2571" headers="r5c1-t3 r1c2-t3">
<p>The <a id="sthref1206"></a>Oracle Net service name for the Oracle database in which the gateway maintains its transaction log. This parameter can be from&nbsp;<code dir="ltr">1</code> to <code dir="ltr">255</code>&nbsp;characters long. This parameter is required only when <code dir="ltr">PGA_CAPABILITY</code> is set to <code dir="ltr">COMMIT_CONFIRM</code>.</p>
<p>There is no default value.</p>
</td>
</tr>
<tr class="cellalignment2565">
<td class="cellalignment2571" id="r6c1-t3" headers="r1c1-t3">
<p><a id="sthref1207"></a><a id="sthref1208"></a><code dir="ltr">PGA_LOG_PASS</code></p>
</td>
<td class="cellalignment2571" headers="r6c1-t3 r1c2-t3">
<p>The Oracle <a id="sthref1209"></a>password to be used by the gateway when connecting to the Oracle database specified by the <code dir="ltr">PGA_LOG_DB</code> parameter. The password can be from&nbsp;<code dir="ltr">1</code> to <code dir="ltr">30</code>&nbsp;characters long. This parameter is required only when <code dir="ltr">PGA_CAPABILITY</code> is set to <code dir="ltr">COMMIT_CONFIRM</code>. The password can be encrypted. For more information about encrypting the password, refer to <a href="ch14.htm#BCEHFEEG">Passwords in the Gateway Initialization File</a>.</p>
<p>There is no default value.</p>
</td>
</tr>
<tr class="cellalignment2565">
<td class="cellalignment2571" id="r7c1-t3" headers="r1c1-t3">
<p><a id="sthref1210"></a><a id="sthref1211"></a><code dir="ltr">PGA_LOG_USER</code></p>
</td>
<td class="cellalignment2571" headers="r7c1-t3 r1c2-t3">
<p>The Oracle user&nbsp;ID to be used by the gateway when connecting to the Oracle database specified by the <code dir="ltr">PGA_LOG_DB</code> parameter. The user&nbsp;ID can be from&nbsp;<code dir="ltr">1</code> to <code dir="ltr">30</code>&nbsp;characters long. This parameter is required only when <code dir="ltr">PGA_CAPABILITY</code> is set to <code dir="ltr">COMMIT_CONFIRM</code>.</p>
<p>There is no default value.</p>
</td>
</tr>
<tr class="cellalignment2565">
<td class="cellalignment2571" id="r8c1-t3" headers="r1c1-t3">
<p><a id="sthref1212"></a><a id="sthref1213"></a><code dir="ltr">PGA_RECOVERY_PASS</code></p>
</td>
<td class="cellalignment2571" headers="r8c1-t3 r1c2-t3">
<p>The password to be used by the gateway when allocating an APPC conversation with the transaction specified by the<br/>
<code dir="ltr">PGA_RECOVERY_TPNAME</code> parameter. The password can be from&nbsp;<code dir="ltr">1</code> to <code dir="ltr">8</code>&nbsp;characters long. This parameter is required only when <code dir="ltr">PGA_CAPABILITY</code> is set to <code dir="ltr">COMMIT_CONFIRM</code> and <code dir="ltr">PGA_SECURITY_TYPE</code> is set to <code dir="ltr">PROGRAM</code>. The password can be encrypted. For more information about encrypting the password, refer to <a href="ch14.htm#BCEHFEEG">Passwords in the Gateway Initialization File</a>.</p>
<p>There is no default value.</p>
</td>
</tr>
<tr class="cellalignment2565">
<td class="cellalignment2571" id="r9c1-t3" headers="r1c1-t3">
<p><a id="sthref1214"></a><a id="sthref1215"></a><code dir="ltr">PGA_RECOVERY_TPNAME</code></p>
</td>
<td class="cellalignment2571" headers="r9c1-t3 r1c2-t3">
<p>The <a id="sthref1216"></a>TP name of the transaction installed in the OLTP for commit-confirm <code dir="ltr">FORGET</code> and <code dir="ltr">RECOVERY</code> processing. The TP name can be from&nbsp;<code dir="ltr">1</code> to <code dir="ltr">64</code>&nbsp;characters long. For <a id="sthref1217"></a>CICS Transaction Server for z/OS, the TP name is limited to four&nbsp;characters. For <a id="sthref1218"></a>IMS/TM, the TP name is limited to eight&nbsp;characters. Other OLTPs might have other limits on the length of the TP name. This parameter is required only when <code dir="ltr">PGA_CAPABILITY</code> is set to <code dir="ltr">COMMIT_CONFIRM</code>.</p>
<p>The default value is <code dir="ltr">RECO</code>.</p>
</td>
</tr>
<tr class="cellalignment2565">
<td class="cellalignment2571" id="r10c1-t3" headers="r1c1-t3">
<p><a id="sthref1219"></a><a id="sthref1220"></a><code dir="ltr">PGA_RECOVERY_USER</code></p>
</td>
<td class="cellalignment2571" headers="r10c1-t3 r1c2-t3">
<p>The user&nbsp;ID to be used by the gateway when allocating an APPC conversation with the transaction specified by the <code dir="ltr">PGA_RECOVERY_TPNAME</code> parameter. The user&nbsp;ID can be from&nbsp;1 to 8&nbsp;characters long. This parameter is required only when <code dir="ltr">PGA_CAPABILITY</code> is set to <code dir="ltr">COMMIT_CONFIRM</code> and <code dir="ltr">PGA_SECURITY_TYPE</code> is set to <code dir="ltr">PROGRAM</code> or <code dir="ltr">SAME</code>.</p>
<p>There is no default value.</p>
</td>
</tr>
<tr class="cellalignment2565">
<td class="cellalignment2571" id="r11c1-t3" headers="r1c1-t3">
<p><a id="sthref1221"></a><code dir="ltr">PGA_SECURITY_TYPE</code></p>
</td>
<td class="cellalignment2571" headers="r11c1-t3 r1c2-t3">
<p><a id="sthref1222"></a>APPC conversation security option. This controls what security parameters are sent to the OLTP in the FMH-5 at conversation allocation. The following are valid values:</p>
<p><code dir="ltr">NONE</code>: Sends no security parameters</p>
<p><code dir="ltr">SAME</code>: Sends only a user&nbsp;ID</p>
<p><code dir="ltr">PROGRAM</code>: Sends a user&nbsp;ID and password</p>
<p>The default is <code dir="ltr">NONE</code>.</p>
<p>For further information on these options, refer to <a href="ch14.htm#g1012554">Chapter 12, &#34;Security Requirements&#34;</a>.</p>
</td>
</tr>
<tr class="cellalignment2565">
<td class="cellalignment2571" id="r12c1-t3" headers="r1c1-t3">
<p><code dir="ltr">PGA_SIGDANGER</code></p>
<p>(AIX only parameter)</p>
</td>
<td class="cellalignment2571" headers="r12c1-t3 r1c2-t3">
<p>Action to take on receipt of a <code dir="ltr">SIGDANGER</code> signal from the system indicating a shortage of paging space. The following is a valid value:</p>
<p><code dir="ltr">IGNORE</code>: Ignores the signal</p>
<p>The default is <code dir="ltr">IGNORE</code>.</p>
</td>
</tr>
<tr class="cellalignment2565">
<td class="cellalignment2571" id="r13c1-t3" headers="r1c1-t3">
<p><a id="sthref1223"></a><a id="sthref1224"></a><a id="sthref1225"></a><a id="sthref1226"></a><code dir="ltr">TRACE_LEVEL</code></p>
</td>
<td class="cellalignment2571" headers="r13c1-t3 r1c2-t3">
<p>PGA trace level. This controls tracing output written to <code dir="ltr">STDERR</code> (the target of the <code dir="ltr">LOG_DESTINATION</code> parameter). The value must be an integer between&nbsp;<code dir="ltr">0</code> and&nbsp;<code dir="ltr">255</code>.</p>
<p>The default is&nbsp;<code dir="ltr">0</code>, indicating no tracing.</p>
<p>Any value between <code dir="ltr">1</code> and <code dir="ltr">255</code> will turn tracing on.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" -->
<a id="i633378"></a>
<div id="APPCI286" class="sect2">
<h3 class="sect2">PGA_CAPABILITY Parameter Considerations</h3>
<p><a id="sthref1227"></a>When choosing a setting for the <code dir="ltr">PGA_CAPABILITY</code> parameter, take care to ensure that the correct setting is used based on what the remote transaction programs will be doing.</p>
<p>The <a id="sthref1228"></a><code dir="ltr">READ_ONLY</code> setting should always be used when the <a id="sthref1229"></a>remote transaction programs are read-only, that is, when the remote transaction programs perform no database updates. <code dir="ltr">READ_ONLY</code> should never be used when the remote transaction programs perform database updates. For example, if the <code dir="ltr">READ_ONLY</code> setting is chosen and if a remote transaction program invoked by the gateway performs updates to a foreign database, then <a id="sthref1230"></a>Oracle database does not provide any integrity protection for those updates. Furthermore, the <code dir="ltr">READ_ONLY</code> mode enables a gateway transaction to be part of a distributed transaction that might update several other databases. If the gateway invokes a remote transaction program that performs updates in this situation and if a failure occurs, then the database updated by the remote transaction program is not synchronized with the other databases.</p>
<p><a id="sthref1231"></a><a id="sthref1232"></a>In cases where the remote transaction programs perform updates to foreign databases, there are <a id="sthref1233"></a><a id="sthref1234"></a>two options for the value of <code dir="ltr">PGA_CAPABILITY</code>:</p>
<ul>
<li>
<p><code dir="ltr">SINGLE_SITE</code></p>
</li>
<li>
<p><code dir="ltr">COMMIT_CONFIRM</code></p>
</li>
</ul>
<p>Each of these options provides protection against data integrity problems by allowing <a id="sthref1235"></a><code dir="ltr">COMMIT</code> and <a id="sthref1236"></a><code dir="ltr">ROLLBACK</code> requests to be forwarded to the remote transaction program and by informing <a id="sthref1237"></a>Oracle database about the distributed update and recovery capabilities of the gateway. The particular option depends on the design of the remote transaction programs and on the capabilities of the <a id="sthref1238"></a>OLTP (online transaction processor) where they execute.</p>
<p>If the OLTP has LU6.2 <code dir="ltr">SYNCLEVEL&nbsp;1</code> or&nbsp;<code dir="ltr">2</code> support, then the <a id="sthref1239"></a><code dir="ltr">COMMIT_CONFIRM</code> capability provides limited two-phase commit between the <a id="sthref1240"></a>Oracle database and the OLTP, with the restriction that no other <a id="sthref1241"></a>commit-confirm site (gateway or Oracle) can be part of the distributed transaction. If it is not possible to use <code dir="ltr">COMMIT_CONFIRM</code>, then the <code dir="ltr">SINGLE_SITE</code> capability provides update capability between Oracle database and the <a id="sthref1242"></a>OLTP, with the restriction that only the OLTP can perform updates and no updates can occur on the Oracle side.<a id="sthref1243"></a></p>
<p>Each of the <code dir="ltr">PGA_CAPABILITY</code> options for update control imposes specific requirements on the remote transaction program and on the OLTP. For <code dir="ltr">COMMIT_CONFIRM</code> capability, these requirements are discussed in detail in Chapter&nbsp;5, &#34;Implementing Commit-Confirm,&#34; of the <span class="italic">Oracle Database Gateway for APPC User&#39;s Guide</span>. Also refer to <a href="ch12.htm#i1015053">Configuring the OLTP for Commit-Confirm</a> in this guide. For <code dir="ltr">SINGLE_SITE</code> capability, the remote transaction program is responsible for performing the required tasks in response to <code dir="ltr">COMMIT</code> and <code dir="ltr">ROLLBACK</code> requests received from the gateway on behalf of the <a id="sthref1244"></a>Oracle database. The gateway uses the APPC <code dir="ltr">CONFIRM</code> and <code dir="ltr">SEND_ERR</code> requests to implement <code dir="ltr">COMMIT</code> and <code dir="ltr">ROLLBACK</code>, respectively. On receipt of a <code dir="ltr">CONFIRM</code>, the remote transaction program must perform <code dir="ltr">COMMIT</code> processing and then respond to the gateway with an APPC <code dir="ltr">CONFIRMED</code> response. On receipt of <code dir="ltr">SEND_ERR</code>, the remote transaction program must perform <code dir="ltr">ROLLBACK</code> processing.</p>
<p>Because the distributed transaction capability of the <a id="sthref1245"></a>Oracle database is affected by the <code dir="ltr">PGA_CAPABILITY</code> option used by the gateway, it is desirable to separate inquiry and update applications by using different gateway instances for each. One gateway can be defined with <code dir="ltr">PGA_CAPABILITY</code> set to <code dir="ltr">READ_ONLY</code> and others with <code dir="ltr">PGA_CAPABILITY</code> set to <code dir="ltr">SINGLE_SITE</code> or <code dir="ltr">COMMIT_CONFIRM</code>.</p>
<p>This allows read-only transaction programs to participate in distributed transactions under the control of the Oracle database. For example, data from DB2 can be retrieved through the <code dir="ltr">READ_ONLY</code> gateway by an inquiry-only remote transaction program and can then be used as input to database updates on the Oracle database, all in one Oracle transaction. A <code dir="ltr">SINGLE_SITE</code> gateway can be used only for accessing remote transaction programs which perform updates to foreign databases outside the scope of the Oracle database control. Data can be read from any databases accessible to the Oracle database, and that data can be used to perform updates through the gateway.</p>
<p>When it is necessary to update resources on both the Oracle side and the OLTP side, a <code dir="ltr">COMMIT_CONFIRM</code> gateway can be used, provided that the OLTP and the remote transaction programs are set up to implement commit-confirm.</p>
<p>All that is necessary to set up multiple <a id="sthref1246"></a>gateway instances is to set up the following for each instance:</p>
<ul>
<li>
<p>An entry in the <code dir="ltr">listener.ora</code> <a id="sthref1247"></a><a id="sthref1248"></a>file defining the <code dir="ltr"><span class="codeinlineitalic">sid</span></code> of the gateway instance</p>
</li>
<li>
<p>An entry in the <code dir="ltr">tnsnames.ora</code> <a id="sthref1249"></a><a id="sthref1250"></a>file defining an alias to be used to connect to the gateway instance defined in <code dir="ltr">listener.ora</code></p>
</li>
<li>
<p>A <a id="sthref1251"></a>database link in Oracle database that specifies the alias defined in the <code dir="ltr">tnsnames.ora</code> file in its <code dir="ltr">USING</code> parameter</p>
</li>
</ul>
<p>Note that the gateway instances can share one common directory structure and use the same executables.</p>
<p>For example, to set up two gateways, <a id="sthref1252"></a><code dir="ltr">PGAI</code> and <a id="sthref1253"></a><code dir="ltr">PGAU</code> (for inquiry and update use, respectively), the following steps are required:</p>
<ol>
<li>
<p>Define entries in <code dir="ltr">l<a id="sthref1254"></a><a id="sthref1255"></a>istener.ora</code> for two <code dir="ltr">sid</code>s, <code dir="ltr">PGAI</code> and <code dir="ltr">PGAU</code>.</p>
</li>
<li>
<p>Define two aliases in <code dir="ltr"><a id="sthref1256"></a><a id="sthref1257"></a>tnsnames.ora</code> that connect to the two new <code dir="ltr">sid</code>s, <code dir="ltr">PGAI</code> and <code dir="ltr">PGAU</code>.</p>
</li>
<li>
<p>Define two database links in <a id="sthref1258"></a>Oracle database, one connecting to <code dir="ltr">PGAI</code> and the other connecting to <code dir="ltr">PGAU</code>.</p>
</li>
<li>
<p>Finally, create the <a id="sthref1259"></a>initialization files <code dir="ltr">i<a id="sthref1260"></a><a id="sthref1261"></a>nitPGAI.ora</code> and <code dir="ltr"><a id="sthref1262"></a><a id="sthref1263"></a>initPGAU.ora</code>.</p>
<p>In <code dir="ltr">initPGAI.ora</code>, set <code dir="ltr">PGA_CAPABILITY</code> to <code dir="ltr">READ_ONLY</code>, and in <code dir="ltr">initPGAU.ora</code>, set <code dir="ltr">PGA_CAPABILITY</code> to <code dir="ltr">SINGLE_SITE</code> or <code dir="ltr">COMMIT_CONFIRM</code>. Then, use the <code dir="ltr">PGAI</code> gateway for inquiry-only transactions, and use the <code dir="ltr">PGAU</code> gateway for update transactions.</p>
<p>The same steps can be used to set up additional gateway instances.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="i627764"></a>
<div id="APPCI287" class="sect2">
<h3 class="sect2">PGA_CONFIRM Parameter Considerations</h3>
<p>When deciding on the setting for the <code dir="ltr">PGA_CONFIRM</code><a id="sthref1264"></a> parameter, it is important to understand the effects of each setting. First, keep in mind that this parameter affects only those conversations running at <code dir="ltr">SYNCLEVEL&nbsp;1</code>. The default setting, <code dir="ltr">PGA_CONFIRM</code><code dir="ltr">=</code><code dir="ltr">REJECT</code>, is correct for most applications. With this setting, the gateway generates an <a id="sthref1265"></a>error if a <code dir="ltr">CONFIRM</code> request is received from the remote transaction program. If you have a remote transaction that uses <code dir="ltr">CONFIRM</code> to verify that data was received by the gateway, then you must use <code dir="ltr">PGA_CONFIRM</code><code dir="ltr">=</code><code dir="ltr">ACCEPT</code> to allow the gateway to respond to those incoming <code dir="ltr">CONFIRM</code> requests with <code dir="ltr">CONFIRMED</code> responses. You must be aware that the gateway sends <code dir="ltr">CONFIRM</code> requests to the remote transaction when the Oracle application has sent a <code dir="ltr">COMMIT</code> request. For the <code dir="ltr">COMMIT</code> processing to work correctly, the remote transaction must be written to perform its local commit processing whenever a <code dir="ltr">CONFIRM</code> request is received from the gateway, and respond to the gateway with <code dir="ltr">CONFIRMED</code> after the commit processing has successfully completed. If an <a id="sthref1266"></a>error occurs during commit processing, then the remote transaction must respond to the gateway with <code dir="ltr">SEND_ERR</code> to indicate that the commit failed.</p>
<p>One special case for the use of <code dir="ltr">PGA_CONFIRM</code><code dir="ltr">=</code><code dir="ltr">ACCEPT</code> is with IMS/TM version&nbsp;7. When using the &#34;implied APPC&#34; support that is provided by IMS/TM version&nbsp;7, conversations that run at <code dir="ltr">SYNCLEVEL&nbsp;1</code> are handled differently than conversations that run at <code dir="ltr">SYNCLEVEL&nbsp;0</code>. IMS/TM automatically generates <code dir="ltr">CONFIRM</code> requests after each APPC <code dir="ltr">SEND</code> when the conversation is at <code dir="ltr">SYNCLEVEL&nbsp;1</code>.<a id="sthref1267"></a> On the gateway side, if <code dir="ltr">PGA_CONFIRM</code>=<code dir="ltr">ACCEPT</code> is not specified, then the <code dir="ltr">CONFIRM</code> requests sent by IMS/TM result in errors generated by the gateway. Using <code dir="ltr">PGA_CONFIRM</code>=<code dir="ltr">ACCEPT</code> alleviates this problem, allowing the gateway to respond to incoming <code dir="ltr">CONFIRM</code> requests with <code dir="ltr">CONFIRMED</code> responses. The only limitation with running this way is that the implied APPC support provided by IMS does not notify the application when a <code dir="ltr">CONFIRM</code> request is received from the gateway. This means that the gateway cannot use <code dir="ltr">CONFIRM</code> to implement <code dir="ltr">COMMIT</code>, thereby disabling the use of <code dir="ltr">COMMIT</code> and <code dir="ltr">ROLLBACK</code> to control updates on the IMS side of the conversation.</p>
</div>
<!-- class="sect2" -->
<a id="CHDHIHAG"></a>
<div id="APPCI288" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Sample <a id="sthref1268"></a>listener.ora file for a Gateway Using SNA</h3>
<pre dir="ltr">LISTENER =
  (ADDRESS_LIST =
        (ADDRESS=
          (COMMUNITY= TCP.world)
          (Host = bay)
          (PROTOCOL= TCP)
          (Port= 2621)
        )
        (ADDRESS=
          (COMMUNITY= TCP.world)
          (Host = bay)
          (PROTOCOL= TCP)
          (Port= 2623)
        )
  )
 
SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = PGA)
      (ORACLE_HOME = /oracle/pga/12.1)
      (PROGRAM = pg4asrv)
    )
  )
</pre></div>
<!-- class="sect2" -->
<a id="CHDBHAIH"></a>
<div id="APPCI289" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Sample <a id="sthref1269"></a>tnsnames.ora file for a Gateway Using SNA</h3>
<pre dir="ltr">ORA920 =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = bay.us.oracle.com)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = ORA920.bay)
    )
  )
 
PGA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = bay)(PORT = 2621))
    )
    (CONNECT_DATA =
      (SID = PGA)
    )
    (HS = OK)
  )
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="appendix" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2564">
<tr>
<td class="cellalignment2571">
<table class="cellalignment2569">
<tr>
<td class="cellalignment2568"><a href="ch15.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2568"><a href="apb.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2004, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2573">
<table class="cellalignment2567">
<tr>
<td class="cellalignment2568"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2568"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2568"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2568"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2568"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2568"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>