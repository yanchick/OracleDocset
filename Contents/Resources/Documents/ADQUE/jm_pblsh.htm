<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-992"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Oracle%20Java%20Message%20Service%20Publish%2FSubscribe"></a><title>Oracle Java Message Service Publish/Subscribe</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023"/>
<meta name="dcterms.created" content="2014-07-01T0:30:47Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Advanced Queuing User&#39;s Guide"/>
<meta name="dcterms.identifier" content="E17945-14"/>
<meta name="dcterms.isVersionOf" content="ADQUE"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="jm_point.htm" title="Previous" type="text/html"/>
<link rel="Next" href="jm_share.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17945-14.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">21/34</span> <!-- End Header -->
<div id="ADQUE1400" class="chapter"><a id="g1016530"></a> <a id="i1010771"></a>
<h1 class="chapter"><span class="secnum">14</span> Oracle Java Message Service Publish/Subscribe</h1>
<p>This chapter describes the components of the Oracle Database Advanced Queuing (AQ) <a href="glossary.htm#i432286"><span class="xrefglossterm">Java Message Service</span></a> (JMS) operational interface that are specific to <a href="glossary.htm#CBAIJICJ"><span class="xrefglossterm">publish/subscribe</span></a> operations. Components that are shared by point-to-point and publish/subscribe are described in <a href="jm_share.htm#g1011754">Chapter 15, &#34;Oracle Java Message Service Shared Interfaces&#34;</a>.</p>
<p>This chapter contains these topics:</p>
<ul>
<li>
<p><a href="#CBHFHJBB">Creating a Connection with User Name/Password</a></p>
</li>
<li>
<p><a href="#CHDEAFBI">Creating a Connection with Default ConnectionFactory Parameters</a></p>
</li>
<li>
<p><a href="#CHDGBBBG">Creating a TopicConnection with User Name/Password</a></p>
</li>
<li>
<p><a href="#CHDEIIFA">Creating a TopicConnection with Open JDBC Connection</a></p>
</li>
<li>
<p><a href="#CHDJDCDI">Creating a TopicConnection with an Open OracleOCIConnectionPool</a></p>
</li>
<li>
<p><a href="#CBHGCJDA">Creating a Session</a></p>
</li>
<li>
<p><a href="#i1006079">Creating a TopicSession</a></p>
</li>
<li>
<p><a href="#i1006104">Creating a TopicPublisher</a></p>
</li>
<li>
<p><a href="#CHDFDAGH">Publishing Messages with Minimal Specification</a></p>
</li>
<li>
<p><a href="#CHDIIEED">Publishing Messages Specifying Topic</a></p>
</li>
<li>
<p><a href="#CHDBAIIG">Publishing Messages Specifying Delivery Mode, Priority, and TimeToLive</a></p>
</li>
<li>
<p><a href="#CHDJEJIG">Publishing Messages Specifying a Recipient List</a></p>
</li>
<li>
<p><a href="#CHDHBFCF">Creating a DurableSubscriber for a JMS Topic Without Selector</a></p>
</li>
<li>
<p><a href="#CHDJFGAG">Creating a DurableSubscriber for a JMS Topic with Selector</a></p>
</li>
<li>
<p><a href="#CHDHBFDD">Creating a DurableSubscriber for an Oracle Object Type Topic Without Selector</a></p>
</li>
<li>
<p><a href="#CHDFDIGG">Creating a DurableSubscriber for an Oracle Object Type Topic with Selector</a></p>
</li>
<li>
<p><a href="#CHDHGCBE">Specifying Transformations for Topic Subscribers</a></p>
</li>
<li>
<p><a href="#i1010596">Creating a Remote Subscriber for JMS Messages</a></p>
</li>
<li>
<p><a href="#CHDCIJCI">Creating a Remote Subscriber for Oracle Object Type Messages</a></p>
</li>
<li>
<p><a href="#CHDGFCIH">Specifying Transformations for Remote Subscribers</a></p>
</li>
<li>
<p><a href="#i1010638">Unsubscribing a Durable Subscription for a Local Subscriber</a></p>
</li>
<li>
<p><a href="#CHDJBEBE">Unsubscribing a Durable Subscription for a Remote Subscriber</a></p>
</li>
<li>
<p><a href="#i1010673">Creating a TopicReceiver for a Topic of Standard JMS Type Messages</a></p>
</li>
<li>
<p><a href="#CHDIDFHC">Creating a TopicReceiver for a Topic of Oracle Object Type Messages</a></p>
</li>
<li>
<p><a href="#CHDEAAJI">Creating a TopicBrowser for Standard JMS Messages</a></p>
</li>
<li>
<p><a href="#CHDIEGCJ">Creating a TopicBrowser for Standard JMS Messages, Locking Messages</a></p>
</li>
<li>
<p><a href="#CHDGGJDH">Creating a TopicBrowser for Oracle Object Type Messages</a></p>
</li>
<li>
<p><a href="#CHDBIIEB">Creating a TopicBrowser for Oracle Object Type Messages, Locking Messages</a></p>
</li>
<li>
<p><a href="#i1007232">Browsing Messages Using a TopicBrowser</a></p>
</li>
</ul>
<a id="CBHFHJBB"></a>
<div id="ADQUE3041" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1393"></a><a id="sthref1394"></a>Creating a Connection with User Name/Password</h2>
<pre>public javax.jms.Connection createConnection(
             java.lang.String username,
             java.lang.String password)
      throws JMSException
</pre>
<p>This method creates a connection supporting both point-to-point and publish/subscribe operations with the specified user name and password. This method is new and supports JMS version 1.1 specifications. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t2">Parameter</th>
<th class="cellalignment1001" id="r1c2-t2">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t2" headers="r1c1-t2"><code>username</code></td>
<td class="cellalignment1002" headers="r2c1-t2 r1c2-t2">Name of the user connecting to the database for queuing</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t2" headers="r1c1-t2"><code>password</code></td>
<td class="cellalignment1002" headers="r3c1-t2 r1c2-t2">Password for creating the connection to the server</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect1" -->
<a id="CHDEAFBI"></a>
<div id="ADQUE3042" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1395"></a><a id="sthref1396"></a>Creating a Connection with Default ConnectionFactory Parameters</h2>
<pre>public javax.jms.Connection createConnection()
      throws JMSException
</pre>
<p>This method creates a connection supporting both point-to-point and publish/subscribe operations with default <a href="glossary.htm#CBAHHBDH"><span class="xrefglossterm">ConnectionFactory</span></a> parameters. This method is new and supports JMS version 1.1 specifications. If the <code>ConnectionFactory</code> properties do not contain a default user name and password, then it throws a JMSException.</p>
</div>
<!-- class="sect1" -->
<a id="CHDGBBBG"></a>
<div id="ADQUE3043" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1397"></a><a id="sthref1398"></a>Creating a TopicConnection with User Name/Password</h2>
<pre>public javax.jms.TopicConnection createTopicConnection(
             java.lang.String username,
             java.lang.String password)
      throws JMSException
</pre>
<p>This method creates a <code>TopicConnection</code> with the specified user name and password. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t3">Parameter</th>
<th class="cellalignment1001" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t3" headers="r1c1-t3"><code>username</code></td>
<td class="cellalignment1002" headers="r2c1-t3 r1c2-t3">Name of the user connecting to the database for queuing</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t3" headers="r1c1-t3"><code>password</code></td>
<td class="cellalignment1002" headers="r3c1-t3 r1c2-t3">Password for creating the connection to the server</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div id="ADQUE3044" class="example">
<p class="titleinexample"><a id="sthref1399"></a>Example 14-1 Creating a TopicConnection with User Name/Password</p>
<pre>TopicConnectionFactory tc_fact = AQjmsFactory.getTopicConnectionFactory(&#34;sun123&#34;, &#34;oratest&#34;, 5521, &#34;thin&#34;);
/* Create a TopicConnection using a username/password */
TopicConnection tc_conn = tc_fact.createTopicConnection(&#34;jmsuser&#34;, &#34;jmsuser&#34;);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDEIIFA"></a>
<div id="ADQUE3045" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1400"></a><a id="sthref1401"></a>Creating a TopicConnection with Open JDBC Connection</h2>
<pre>public static javax.jms.TopicConnection createTopicConnection(
              java.sql.Connection jdbc_connection)
       throws JMSException
</pre>
<p>This method creates a <code>TopicConnection</code> with open JDBC connection. It has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t4">Parameter</th>
<th class="cellalignment1001" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t4" headers="r1c1-t4"><code>jdbc_connection</code></td>
<td class="cellalignment1002" headers="r2c1-t4 r1c2-t4">Valid open connection to database</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div id="ADQUE3046" class="example">
<p class="titleinexample"><a id="sthref1402"></a>Example 14-2 Creating a TopicConnection with Open JDBC Connection</p>
<pre>Connection db_conn;   /*previously opened JDBC connection */
TopicConnection tc_conn = 
AQjmsTopicConnectionFactory createTopicConnection(db_conn);
</pre></div>
<!-- class="example" -->
<div id="ADQUE3047" class="example">
<p class="titleinexample"><a id="sthref1403"></a>Example 14-3 Creating a TopicConnection with New JDBC Connection</p>
<pre>OracleDriver ora = new OracleDriver();
TopicConnection tc_conn = 
AQjmsTopicConnectionFactory.createTopicConnection(ora.defaultConnection());
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDJDCDI"></a>
<div id="ADQUE3048" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1404"></a><a id="sthref1405"></a>Creating a TopicConnection with an Open OracleOCIConnectionPool</h2>
<pre>public static javax.jms.TopicConnection createTopicConnection(
              oracle.jdbc.pool.OracleOCIConnectionPool cpool)
       throws JMSException
</pre>
<p>This method creates a <code>TopicConnection</code> with an open <code>OracleOCIConnectionPool</code>. It is static and has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t5">Parameter</th>
<th class="cellalignment1001" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t5" headers="r1c1-t5"><code>cpool</code></td>
<td class="cellalignment1002" headers="r2c1-t5 r1c2-t5">Valid open OCI connection pool to the database</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div id="ADQUE3049" class="example">
<p class="titleinexample"><a id="sthref1406"></a>Example 14-4 Creating a TopicConnection with Open OracleOCIConnectionPool</p>
<pre>OracleOCIConnectionPool cpool; /* previously created OracleOCIConnectionPool */
TopicConnection tc_conn = 
AQjmsTopicConnectionFactory.createTopicConnection(cpool);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CBHGCJDA"></a>
<div id="ADQUE3050" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1407"></a><a id="sthref1408"></a><a id="sthref1409"></a>Creating a Session</h2>
<pre>public javax.jms.Session createSession(boolean transacted,
                                                 int ack_mode)
                                          throws JMSException
</pre>
<p>This method creates a <code>Session</code> supporting both point-to-point and publish/subscribe operations. It is new and supports JMS version 1.1 specifications. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t6">Parameter</th>
<th class="cellalignment1001" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t6" headers="r1c1-t6"><code>transacted</code></td>
<td class="cellalignment1002" headers="r2c1-t6 r1c2-t6">If set to true, then the session is <a href="glossary.htm#CBACAHAA"><span class="xrefglossterm">transactional</span></a></td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t6" headers="r1c1-t6"><code>ack_mode</code></td>
<td class="cellalignment1002" headers="r3c1-t6 r1c2-t6">Indicates whether the consumer or the client will acknowledge any messages it receives. It is ignored if the session is transactional. Legal values are <code>Session.AUTO_ACKNOWLEDGE</code>, <code>Session.CLIENT_ACKNOWLEDGE</code>, and <code>Session.DUPS_OK_ACKNOWLEDGE</code>.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect1" -->
<a id="i1006079"></a>
<div id="ADQUE3051" class="sect1">
<h2 class="sect1"><a id="sthref1410"></a><a id="sthref1411"></a>Creating a TopicSession</h2>
<pre>public javax.jms.TopicSession createTopicSession(boolean transacted,
                                                 int ack_mode)
                                          throws JMSException
</pre>
<p>This method creates a <code>TopicSession</code>. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t7">Parameter</th>
<th class="cellalignment1001" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t7" headers="r1c1-t7"><code>transacted</code></td>
<td class="cellalignment1002" headers="r2c1-t7 r1c2-t7">If set to true, then the session is <a href="glossary.htm#CBACAHAA"><span class="xrefglossterm">transactional</span></a></td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t7" headers="r1c1-t7"><code>ack_mode</code></td>
<td class="cellalignment1002" headers="r3c1-t7 r1c2-t7">Indicates whether the consumer or the client will acknowledge any messages it receives. It is ignored if the session is transactional. Legal values are <code>Session.AUTO_ACKNOWLEDGE</code>, <code>Session.CLIENT_ACKNOWLEDGE</code>, and <code>Session.DUPS_OK_ACKNOWLEDGE</code>.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div id="ADQUE3052" class="example">
<p class="titleinexample"><a id="sthref1412"></a>Example 14-5 Creating a TopicSession</p>
<pre>TopicConnection tc_conn;
TopicSession t_sess = tc_conn.createTopicSession(true,0);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="i1006104"></a>
<div id="ADQUE3053" class="sect1">
<h2 class="sect1"><a id="sthref1413"></a><a id="sthref1414"></a>Creating a TopicPublisher</h2>
<pre>public javax.jms.TopicPublisher createPublisher(javax.jms.Topic topic)
                                         throws JMSException
</pre>
<p>This method creates a <code>TopicPublisher</code>. It has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t8">Parameter</th>
<th class="cellalignment1001" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t8" headers="r1c1-t8"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t8 r1c2-t8">Topic to publish to, or null if this is an unidentified <a href="glossary.htm#CBAJDCHC"><span class="xrefglossterm">producer</span></a></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect1" -->
<a id="CHDFDAGH"></a>
<div id="ADQUE3054" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1415"></a><a id="sthref1416"></a><a id="sthref1417"></a>Publishing Messages with Minimal Specification</h2>
<pre>public void publish(javax.jms.Message message)
             throws JMSException
</pre>
<p>This method publishes a message with minimal specification. It has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t9">Parameter</th>
<th class="cellalignment1001" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t9" headers="r1c1-t9"><code>message</code></td>
<td class="cellalignment1002" headers="r2c1-t9 r1c2-t9">Message to send</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<p>The <code>TopicPublisher</code> uses the default values for message <code>priority</code> (<code>1</code>) and <code>timeToLive</code> (<code>infinite</code>).</p>
<div id="ADQUE3055" class="example">
<p class="titleinexample"><a id="sthref1418"></a>Example 14-6 Publishing Without Specifying Topic</p>
<pre>/* Publish without specifying topic */
TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              jms_sess;
TopicPublisher            publisher1;
Topic                     shipped_orders;
int                       myport = 5521;
/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
          &#34;MYHOSTNAME&#34;,
          &#34;MYSID&#34;, 
           myport, 
          &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
/* create TopicSession */
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
/* get shipped orders topic */
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
          &#34;OE&#34;, 
          &#34;Shipped_Orders_Topic&#34;);
publisher1 = jms_sess.createPublisher(shipped_orders);
/* create TextMessage */
TextMessage     jms_sess.createTextMessage();
/* publish without specifying the topic */
publisher1.publish(text_message);
</pre></div>
<!-- class="example" -->
<div id="ADQUE3056" class="example">
<p class="titleinexample"><a id="CHDHGACB"></a>Example 14-7 Publishing Specifying Correlation and Delay</p>
<pre>TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              jms_sess;
TopicPublisher            publisher1;
Topic                     shipped_orders;
int                       myport = 5521;
/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
          &#34;MYHOSTNAME&#34;,
          &#34;MYSID&#34;, 
           myport, 
          &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
          &#34;OE&#34;, 
          &#34;Shipped_Orders_Topic&#34;);
publisher1 = jms_sess.createPublisher(shipped_orders);
/* Create TextMessage */
TextMessage     jms_sess.createTextMessage();
/* Set correlation and delay */
/* Set correlation */
jms_sess.setJMSCorrelationID(&#34;FOO&#34;);
/* Set delay of 30 seconds */
jms_sess.setLongProperty(&#34;JMS_OracleDelay&#34;, 30);
/* Publish  */
publisher1.publish(text_message);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDIIEED"></a>
<div id="ADQUE3057" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1419"></a><a id="sthref1420"></a><a id="sthref1421"></a>Publishing Messages Specifying Topic</h2>
<pre>public void publish(javax.jms.Topic topic, javax.jms.Message message)
             throws JMSException
</pre>
<p>This method publishes a message specifying the topic. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t10">Parameter</th>
<th class="cellalignment1001" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t10" headers="r1c1-t10"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t10 r1c2-t10">Topic to publish to</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t10" headers="r1c1-t10"><code>message</code></td>
<td class="cellalignment1002" headers="r3c1-t10 r1c2-t10">Message to send</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<p>If the <code>TopicPublisher</code> has been created with a default topic, then the <code>topic</code> parameter may not be specified in the <code>publish()</code> call. If a topic is specified, then that value overrides the default in the <code>TopicPublisher</code>. If the <code>TopicPublisher</code> has been created without a default topic, then the topic must be specified with the <code>publish()</code> call.</p>
<div id="ADQUE3058" class="example">
<p class="titleinexample"><a id="sthref1422"></a>Example 14-8 Publishing Specifying Topic</p>
<pre>/* Publish specifying topic */
TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              jms_sess;
TopicPublisher            publisher1;
Topic                     shipped_orders;
int                       myport = 5521;
/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
          &#39;MYHOSTNAME&#39;, &#39;MYSID&#39;, myport, &#39;oci8&#39;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE); 
/* create TopicPublisher */
publisher1 = jms_sess.createPublisher(null);
/* get topic object */
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
          &#39;WS&#39;, &#39;Shipped_Orders_Topic&#39;);
/* create text message */
TextMessage     jms_sess.createTextMessage();
/* publish specifying the topic */
publisher1.publish(shipped_orders, text_message);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDBAIIG"></a>
<div id="ADQUE3059" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1423"></a><a id="sthref1424"></a><a id="sthref1425"></a>Publishing Messages Specifying Delivery Mode, Priority, and TimeToLive</h2>
<pre>public void publish(javax.jms.Topic topic,
                    javax.jms.Message message,
                    oracle.jms.AQjmsAgent[] recipient_list,
                    int deliveryMode,
                    int priority,
                    long timeToLive)
             throws JMSException
</pre>
<p>This method publishes a message specifying delivery mode, priority and <code>TimeToLive</code>. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t11">Parameter</th>
<th class="cellalignment1001" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t11" headers="r1c1-t11"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t11 r1c2-t11">Topic to which to publish the message (overrides the default topic of the <code>MessageProducer</code>)</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t11" headers="r1c1-t11"><code>message</code></td>
<td class="cellalignment1002" headers="r3c1-t11 r1c2-t11">Message to publish</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r4c1-t11" headers="r1c1-t11"><code>recipient_list</code></td>
<td class="cellalignment1002" headers="r4c1-t11 r1c2-t11">List of recipients to which the message is published. Recipients are of type <code>AQjmsAgent</code>.</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r5c1-t11" headers="r1c1-t11"><code>deliveryMode</code></td>
<td class="cellalignment1002" headers="r5c1-t11 r1c2-t11"><code>PERSISTENT</code> or <code>NON_PERSISTENT</code> (only <code>PERSISTENT</code> is supported in this release)</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r6c1-t11" headers="r1c1-t11"><code>priority</code></td>
<td class="cellalignment1002" headers="r6c1-t11 r1c2-t11">Priority for this message</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r7c1-t11" headers="r1c1-t11"><code>timeToLive</code></td>
<td class="cellalignment1002" headers="r7c1-t11 r1c2-t11">Message lifetime in milliseconds (zero is unlimited)</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div id="ADQUE3060" class="example">
<p class="titleinexample"><a id="sthref1426"></a>Example 14-9 Publishing Specifying Priority and TimeToLive</p>
<pre>TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              jms_sess;
TopicPublisher            publisher1;
Topic                     shipped_orders;
int                       myport = 5521;
/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
          &#34;MYHOSTNAME&#34;, &#34;MYSID&#34;, myport, &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
          &#34;OE&#34;, &#34;Shipped_Orders_Topic&#34;);
publisher1 = jms_sess.createPublisher(shipped_orders);
/* Create TextMessage */
TextMessage     jms_sess.createTextMessage();
/* Publish  message with priority 1 and time to live 200 seconds */
publisher1.publish(text_message, DeliveryMode.PERSISTENT, 1, 200000);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDJEJIG"></a>
<div id="ADQUE3061" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1427"></a><a id="sthref1428"></a><a id="sthref1429"></a>Publishing Messages Specifying a Recipient List</h2>
<pre>public void publish(javax.jms.Message message,
                    oracle.jms.AQjmsAgent[] recipient_list)
             throws JMSException
</pre>
<p>This method publishes a message specifying a <a href="glossary.htm#CBACHAEI"><span class="xrefglossterm">recipient</span></a> list overriding topic subscribers. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t12">Parameter</th>
<th class="cellalignment1001" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t12" headers="r1c1-t12"><code>message</code></td>
<td class="cellalignment1002" headers="r2c1-t12 r1c2-t12">Message to publish</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t12" headers="r1c1-t12"><code>recipient_list</code></td>
<td class="cellalignment1002" headers="r3c1-t12 r1c2-t12">List of recipients to which the message is published. Recipients are of type <code>AQjmsAgent</code>.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div id="ADQUE3062" class="example">
<p class="titleinexample"><a id="sthref1430"></a>Example 14-10 Publishing Specifying a Recipient List Overriding Topic Subscribers</p>
<pre>/* Publish specifying priority and timeToLive */
TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              jms_sess;
TopicPublisher            publisher1;
Topic                     shipped_orders;
int                       myport = 5521;
AQjmsAgent[]              recipList;
/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
          &#34;MYHOSTNAME&#34;, &#34;MYSID&#34;, myport, &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
          &#34;OE&#34;, &#34;Shipped_Orders_Topic&#34;);
publisher1 = jms_sess.createPublisher(shipped_orders);
/* create TextMessage */
TextMessage     jms_sess.createTextMessage();
/* create two receivers */
recipList = new AQjmsAgent[2];
recipList[0] = new AQjmsAgent(
          &#34;ES&#34;, &#34;ES.shipped_orders_topic&#34;, AQAgent.DEFAULT_AGENT_PROTOCOL);
recipList[1] = new AQjmsAgent(
          &#34;WS&#34;, &#34;WS.shipped_orders_topic&#34;, AQAgent.DEFAULT_AGENT_PROTOCOL);
/* publish  message specifying a recipient list */
publisher1.publish(text_message, recipList);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDHBFCF"></a>
<div id="ADQUE3063" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1431"></a><a id="sthref1432"></a><a id="sthref1433"></a>Creating a DurableSubscriber for a JMS Topic Without Selector</h2>
<pre>public javax.jms.TopicSubscriber createDurableSubscriber(
             javax.jms.Topic topic,
             java.lang.String subs_name)
      throws JMSException
</pre>
<p>This method creates a DurableSubscriber for a <a href="glossary.htm#CBAICJAJ"><span class="xrefglossterm">JMS topic</span></a> without selector. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t13">Parameter</th>
<th class="cellalignment1001" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t13" headers="r1c1-t13"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t13 r1c2-t13">Non-temporary topic to subscribe to</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t13" headers="r1c1-t13"><code>subs_name</code></td>
<td class="cellalignment1002" headers="r3c1-t13 r1c2-t13">Name used to identify this subscription</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<p class="subhead2"><a id="CHDEGJGH"></a><a id="ADQUE3064"></a>Exclusive Access to Topics</p>
<p><code>CreateDurableSubscriber()</code> and <code>Unsubscribe()</code> both require exclusive access to their target topics. If there are pending JMS <code>send()</code>, <code>publish()</code>, or <code>receive()</code> operations on the same topic when these calls are applied, then exception ORA - 4020 is raised. There are two solutions to the problem:</p>
<ul>
<li>
<p>Limit calls to <code>createDurableSubscriber()</code> and <code>Unsubscribe()</code> to the setup or cleanup phase when there are no other JMS operations pending on the topic. That makes sure that the required resources are not held by other JMS operational calls.</p>
</li>
<li>
<p>Call <code>TopicSession.commit</code> before calling <code>createDurableSubscriber()</code> or <code>Unsubscribe()</code>.</p>
</li>
</ul>
<div id="ADQUE3065" class="example">
<p class="titleinexample"><a id="sthref1434"></a>Example 14-11 Creating a Durable Subscriber for a JMS Topic Without Selector</p>
<pre>TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              jms_sess;
TopicSubscriber           subscriber1;
Topic                     shipped_orders;
int                       myport = 5521;
AQjmsAgent[]              recipList;
/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
          &#34;MYHOSTNAME&#34;,
          &#34;MYSID&#34;, 
           myport, 
          &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
          &#34;OE&#34;, 
          &#34;Shipped_Orders_Topic&#34;);
/* create a durable subscriber on the shipped_orders topic*/
subscriber1 = jms_sess.createDurableSubscriber(
          shipped_orders, 
         &#39;WesternShipping&#39;);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDJFGAG"></a>
<div id="ADQUE3066" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1435"></a><a id="sthref1436"></a><a id="sthref1437"></a>Creating a DurableSubscriber for a JMS Topic with Selector</h2>
<pre>public javax.jms.TopicSubscriber createDurableSubscriber(
             javax.jms.Topic topic,
             java.lang.String subs_name,
             java.lang.String messageSelector,
             boolean noLocal)
      throws JMSException
</pre>
<p>This method creates a durable subscriber for a JMS topic with selector. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t14">Parameter</th>
<th class="cellalignment1001" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t14" headers="r1c1-t14"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t14 r1c2-t14">Non-temporary topic to subscribe to</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t14" headers="r1c1-t14"><code>subs_name</code></td>
<td class="cellalignment1002" headers="r3c1-t14 r1c2-t14">Name used to identify this subscription</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r4c1-t14" headers="r1c1-t14"><code>messageSelector</code></td>
<td class="cellalignment1002" headers="r4c1-t14 r1c2-t14">Only messages with properties matching the <code>messageSelector</code> expression are delivered. A value of null or an empty string indicates that there is no <code>messageSelector</code> for the message consumer.</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r5c1-t14" headers="r1c1-t14"><code>noLocal</code></td>
<td class="cellalignment1002" headers="r5c1-t14 r1c2-t14">If set to true, then it inhibits the delivery of messages published by its own connection</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDEGJGH">&#34;Exclusive Access to Topics&#34;</a></div>
<p>A client can change an existing durable subscription by creating a durable TopicSubscriber with the same name and a different <code>messageSelector</code>. An unsubscribe call is needed to end the subscription to the topic.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="jm_create.htm#CACBBCBJ">&#34;MessageSelector&#34;</a></div>
<div id="ADQUE3067" class="example">
<p class="titleinexample"><a id="sthref1438"></a>Example 14-12 Creating a Durable Subscriber for a JMS Topic With Selector</p>
<pre>TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              jms_sess;
TopicSubscriber           subscriber1;
Topic                     shipped_orders;
int                       myport = 5521;
AQjmsAgent[]              recipList;
/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
          &#34;MYHOSTNAME&#34;, &#34;MYSID&#34;, myport, &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
          &#34;OE&#34;, &#34;Shipped_Orders_Topic&#34;);
/* create a subscriber */
/* with condition on JMSPriority and user property &#39;Region&#39; */
subscriber1 = jms_sess.createDurableSubscriber(
          shipped_orders, &#39;WesternShipping&#39;, 
         &#34;JMSPriority &gt; 2 and Region like &#39;Western%&#39;&#34;, false);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDHBFDD"></a>
<div id="ADQUE3068" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1439"></a><a id="sthref1440"></a><a id="sthref1441"></a>Creating a DurableSubscriber for an Oracle Object Type Topic Without Selector</h2>
<pre>public javax.jms.TopicSubscriber createDurableSubscriber(
             javax.jms.Topic topic,
             java.lang.String subs_name,
             java.lang.Object payload_factory)
      throws JMSException
</pre>
<p>This method creates a durable subscriber for an Oracle <a href="glossary.htm#CBAGCEHG"><span class="xrefglossterm">object type</span></a> topic without selector. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t17">Parameter</th>
<th class="cellalignment1001" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t17" headers="r1c1-t17"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t17 r1c2-t17">Non-temporary topic to subscribe to</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t17" headers="r1c1-t17"><code>subs_name</code></td>
<td class="cellalignment1002" headers="r3c1-t17 r1c2-t17">Name used to identify this subscription</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r4c1-t17" headers="r1c1-t17"><code>payload_factory</code></td>
<td class="cellalignment1002" headers="r4c1-t17 r1c2-t17"><code>CustomDatumFactory</code> or <code>ORADataFactory</code> for the Java class that maps to the Oracle ADT</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p><code>CustomDatum</code> support will be deprecated in a future release. Use <code>ORADataFactory</code> payload factories instead.</p>
</li>
<li>
<p>Sharded queues do not support object type messages.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDEGJGH">&#34;Exclusive Access to Topics&#34;</a></div>
<div id="ADQUE3069" class="example">
<p class="titleinexample"><a id="sthref1442"></a>Example 14-13 Creating a Durable Subscriber for an Oracle Object Type Topic Without Selector</p>
<pre>/* Subscribe to an ADT queue */
TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              t_sess    = null;
TopicSession              jms_sess;
TopicSubscriber           subscriber1;
Topic                     shipped_orders;
int                       my[port = 5521;
AQjmsAgent[]              recipList;
/* the java mapping of the oracle object type created by J Publisher */
ADTMessage                message; 
/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
          &#34;MYHOSTNAME&#34;, &#34;MYSID&#34;, myport, &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
          &#34;OE&#34;, &#34;Shipped_Orders_Topic&#34;);
/* create a subscriber, specifying the correct CustomDatumFactory */
subscriber1 = jms_sess.createDurableSubscriber(
          shipped_orders, &#39;WesternShipping&#39;, AQjmsAgent.getFactory());
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDFDIGG"></a>
<div id="ADQUE3070" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1443"></a><a id="sthref1444"></a><a id="sthref1445"></a>Creating a DurableSubscriber for an Oracle Object Type Topic with Selector</h2>
<pre>public javax.jms.TopicSubscriber createDurableSubscriber(
             javax.jms.Topic topic,
             java.lang.String subs_name,
             java.lang.String messageSelector,
             boolean noLocal,
             java.lang.Object payload_factory)
      throws JMSException
</pre>
<p>This method creates a durable subscriber for an Oracle object type topic with selector. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t20">Parameter</th>
<th class="cellalignment1001" id="r1c2-t20">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t20" headers="r1c1-t20"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t20 r1c2-t20">Non-temporary topic to subscribe to</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t20" headers="r1c1-t20"><code>subs_name</code></td>
<td class="cellalignment1002" headers="r3c1-t20 r1c2-t20">Name used to identify this subscription</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r4c1-t20" headers="r1c1-t20"><code>messageSelector</code></td>
<td class="cellalignment1002" headers="r4c1-t20 r1c2-t20">Only messages with properties matching the <code>messageSelector</code> expression are delivered. A value of null or an empty string indicates that there is no <code>messageSelector</code> for the message consumer.</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r5c1-t20" headers="r1c1-t20"><code>noLocal</code></td>
<td class="cellalignment1002" headers="r5c1-t20 r1c2-t20">If set to true, then it inhibits the delivery of messages published by its own connection</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r6c1-t20" headers="r1c1-t20"><code>payload_factory</code></td>
<td class="cellalignment1002" headers="r6c1-t20 r1c2-t20"><code>CustomDatumFactory</code> or <code>ORADataFactory</code> for the Java class that maps to the Oracle ADT</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p><code>CustomDatum</code> support will be deprecated in a future release. Use <code>ORADataFactory</code> payload factories instead.</p>
</li>
<li>
<p>Sharded queues do not support object yype messages.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDEGJGH">&#34;Exclusive Access to Topics&#34;</a></div>
<div id="ADQUE3071" class="example">
<p class="titleinexample"><a id="sthref1446"></a>Example 14-14 Creating a Durable Subscriber for an Oracle Object Type Topic With Selector</p>
<pre>TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              jms_sess;
TopicSubscriber           subscriber1;
Topic                     shipped_orders;
int                       myport = 5521;
AQjmsAgent[]              recipList;
/* the java mapping of the oracle object type created by J Publisher */
ADTMessage                message; 
/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
          &#34;MYHOSTNAME&#34;, &#34;MYSID&#34;, myport, &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
          &#34;OE&#34;, &#34;Shipped_Orders_Topic&#34;);
/* create a subscriber, specifying correct CustomDatumFactory and selector */
subscriber1 = jms_sess.createDurableSubscriber(
          shipped_orders, &#34;WesternShipping&#34;, 
         &#34;priority &gt; 1 and tab.user_data.region like &#39;WESTERN %&#39;&#34;, false, 
          ADTMessage.getFactory());
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDHGCBE"></a>
<div id="ADQUE3072" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1447"></a><a id="sthref1448"></a><a id="sthref1449"></a>Specifying Transformations for Topic Subscribers</h2>
<p>A transformation can be supplied when sending/publishing a message to a queue/topic. The transformation is applied before putting the message into the queue/topic.</p>
<p>The application can specify a transformation using the <code>setTransformation</code> interface in the <code>AQjmsQueueSender</code> and <code>AQjmsTopicPublisher</code> interfaces.</p>
<div id="ADQUE3073" class="example">
<p class="titleinexample"><a id="sthref1450"></a>Example 14-15 Sending Messages to a Destination Using a Transformation</p>
<p>Suppose that the orders that are processed by the order entry application should be published to <code>WS_bookedorders_topic</code>. The transformation OE2WS (defined in the previous section) is supplied so that the messages are inserted into the topic in the correct format.</p>
<pre>public void ship_bookedorders(
   TopicSession jms_session, 
        AQjmsADTMessage adt_message)                             
{
    TopicPublisher  publisher;
    Topic           topic;

    try
    {
      /* get a handle to the WS_bookedorders_topic */
              topic = ((AQjmsSession)jms_session).getTopic(&#34;WS&#34;, &#34;WS_bookedorders_topic&#34;);
      publisher = jms_session.createPublisher(topic);

      /* set the transformation in the publisher */
      ((AQjmsTopicPublisher)publisher).setTransformation(&#34;OE2WS&#34;);
      publisher.publish(topic, adt_message);
            }
            catch (JMSException ex)
            {
               System.out.println(&#34;Exception :&#34; ex);
    }
}
</pre></div>
<!-- class="example" -->
<p>A transformation can also be specified when creating topic subscribers using the <code>CreateDurableSubscriber()</code> call. The transformation is applied to the retrieved message before returning it to the subscriber. If the subscriber specified in the <code>CreateDurableSubscriber()</code> call already exists, then its transformation is set to the specified transformation.</p>
<div id="ADQUE3074" class="example">
<p class="titleinexample"><a id="sthref1451"></a>Example 14-16 Specifying Transformations for Topic Subscribers</p>
<p>The Western Shipping application subscribes to the OE_bookedorders_topic with the transformation <code>OE2WS</code>. This transformation is applied to the messages and the returned message is of Oracle object type <code>WS.WS_orders</code>.</p>
<p>Suppose that the WSOrder java class has been generated by Jpublisher to map to the Oracle object <code>WS.WS_order</code>:</p>
<pre>public AQjmsAdtMessage retrieve_bookedorders(TopicSession jms_session)
{
    TopicSubscriber     subscriber;
    Topic               topic;
    AQjmsAdtMessage     msg = null;

    try
    {
      /* get a handle to the OE_bookedorders_topic */
      topic = ((AQjmsSession)jms_session).getTopic(&#34;OE&#34;, &#34;OE_bookedorders_topic&#34;);

      /* create a subscriber with the transformation OE2WS */
      subs = ((AQjmsSession)jms_session).createDurableSubscriber(
         topic, &#39;WShip&#39;, null, false, WSOrder.getFactory(), &#34;OE2WS&#34;);
      msg = subscriber.receive(10);
    }
    catch (JMSException ex)
    {
        System.out.println(&#34;Exception :&#34; ex);
    }
    return (AQjmsAdtMessage)msg;
}
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="i1010596"></a>
<div id="ADQUE3075" class="sect1">
<h2 class="sect1"><a id="sthref1452"></a><a id="sthref1453"></a><a id="sthref1454"></a>Creating a Remote Subscriber for JMS Messages</h2>
<pre>public void createRemoteSubscriber(javax.jms.Topic topic,
                                   oracle.jms.AQjmsAgent remote_subscriber,
                                   java.lang.String messageSelector)
                            throws JMSException
</pre>
<p>This method creates a remote subscriber for topics of JMS messages. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t23">Parameter</th>
<th class="cellalignment1001" id="r1c2-t23">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t23" headers="r1c1-t23"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t23 r1c2-t23">Topic to subscribe to</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t23" headers="r1c1-t23"><code>remote_subscriber</code></td>
<td class="cellalignment1002" headers="r3c1-t23 r1c2-t23"><code>AQjmsAgent</code> that refers to the remote subscriber</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r4c1-t23" headers="r1c1-t23"><code>messageSelector</code></td>
<td class="cellalignment1002" headers="r4c1-t23 r1c2-t23">Only messages with properties matching the <code>messageSelector</code> expression are delivered. A value of null or an empty string indicates that there is no <code>messageSelector</code> for the message consumer.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="jm_create.htm#CACBBCBJ">&#34;MessageSelector&#34;</a></div>
<p>Oracle Database Advanced Queuing allows topics to have remote subscribers, for example, subscribers at other topics in the same or different database. In order to use remote subscribers, you must set up <a href="glossary.htm#CBADIFJC"><span class="xrefglossterm">propagation</span></a> between the local and remote topic.</p>
<p>Remote subscribers can be a specific consumer at the remote topic or all subscribers at the remote topic. A remote subscriber is defined using the <code>AQjmsAgent</code> structure. An <code>AQjmsAgent</code> consists of a name and address. The name refers to the <code>consumer_name</code> at the remote topic. The address refers to the remote topic. Its syntax is <code>schema.topic_name[@dblink]</code>.</p>
<p>To publish messages to a particular consumer at the remote topic, the <code>subscription_name</code> of the recipient at the remote topic must be specified in the name field of <code>AQjmsAgent</code>, and the remote topic must be specified in the address field. To publish messages to all subscribers of the remote topic, the name field of <code>AQjmsAgent</code> must be set to null.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Sharded queues do not support remote subscribers.</div>
<div id="ADQUE3076" class="example">
<p class="titleinexample"><a id="sthref1455"></a>Example 14-17 Creating a Remote Subscriber for Topics of JMS Messages</p>
<pre>TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              t_sess    = null;
TopicSession              jms_sess;
TopicSubscriber           subscriber1;
Topic                     shipped_orders;
int                       my[port = 5521;
AQjmsAgent                remoteAgent;
/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
          &#34;MYHOSTNAME&#34;, &#34;MYSID&#34;, myport, &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
          &#34;OE&#34;, &#34;Shipped_Orders_Topic&#34;);
remoteAgent = new AQjmsAgent(&#34;WesternRegion&#34;, &#34;WS.shipped_orders_topic&#34;, null);
/* create a remote subscriber (selector is null )*/
subscriber1 = ((AQjmsSession)jms_sess).createRemoteSubscriber(
          shipped_orders, remoteAgent, null);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDCIJCI"></a>
<div id="ADQUE3077" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1456"></a><a id="sthref1457"></a>Creating a Remote Subscriber for Oracle Object Type Messages</h2>
<pre>public void createRemoteSubscriber(javax.jms.Topic topic,
                                   oracle.jms.AQjmsAgent remote_subscriber,
                                   java.lang.String messageSelector,
                                   java.lang.Object payload_factory)
                            throws JMSException
</pre>
<p>This method creates a remote subscriber for topics of Oracle object type messages. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t26">Parameter</th>
<th class="cellalignment1001" id="r1c2-t26">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t26" headers="r1c1-t26"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t26 r1c2-t26">Topic to subscribe to</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t26" headers="r1c1-t26"><code>remote_subscriber</code></td>
<td class="cellalignment1002" headers="r3c1-t26 r1c2-t26"><code>AQjmsAgent</code> that refers to the remote subscriber</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r4c1-t26" headers="r1c1-t26"><code>messageSelector</code></td>
<td class="cellalignment1002" headers="r4c1-t26 r1c2-t26">Only messages with properties matching the <code>messageSelector</code> expression are delivered. A value of null or an empty string indicates that there is no <code>messageSelector</code> for the message consumer.</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r5c1-t26" headers="r1c1-t26"><code>payload_factory</code></td>
<td class="cellalignment1002" headers="r5c1-t26 r1c2-t26"><code>CustomDatumFactory</code> or <code>ORADataFactory</code> for the Java class that maps to the Oracle ADT</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p><code>CustomDatum</code> support will be deprecated in a future release. Use <code>ORADataFactory</code> payload factories instead.</p>
</li>
<li>
<p>Sharded queues do not support remote subscribers or object type messages.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="jm_create.htm#CACBBCBJ">&#34;MessageSelector&#34;</a></div>
<p>Oracle Database Advanced Queuing allows topics to have remote subscribers, for example, subscribers at other topics in the same or different database. In order to use remote subscribers, you must set up <a href="glossary.htm#CBADIFJC"><span class="xrefglossterm">propagation</span></a> between the local and remote topic.</p>
<p>Remote subscribers can be a specific consumer at the remote topic or all subscribers at the remote topic. A remote subscriber is defined using the <code>AQjmsAgent</code> structure. An <code>AQjmsAgent</code> consists of a name and address. The name refers to the <code>consumer_name</code> at the remote topic. The address refers to the remote topic. Its syntax is <code>schema.topic_name[@dblink]</code>.</p>
<p>To publish messages to a particular consumer at the remote topic, the <code>subscription_name</code> of the recipient at the remote topic must be specified in the name field of <code>AQjmsAgent</code>, and the remote topic must be specified in the address field. To publish messages to all subscribers of the remote topic, the name field of <code>AQjmsAgent</code> must be set to null.</p>
<div id="ADQUE3078" class="example">
<p class="titleinexample"><a id="sthref1458"></a>Example 14-18 Creating a Remote Subscriber for Topics of Oracle Object Type Messages</p>
<pre>TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              t_sess    = null;
TopicSession              jms_sess;
TopicSubscriber           subscriber1;
Topic                     shipped_orders;
int                       my[port = 5521;
AQjmsAgent                remoteAgent;
ADTMessage                message;
/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
          &#34;MYHOSTNAME&#34;, &#34;MYSID&#34;, myport, &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
/* create TopicSession */
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
/* get the Shipped order topic */
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
          &#34;OE&#34;, &#34;Shipped_Orders_Topic&#34;);
/* create a remote agent */
remoteAgent = new AQjmsAgent(&#34;WesternRegion&#34;, &#34;WS.shipped_orders_topic&#34;, null);
/* create a remote subscriber  with null selector*/
subscriber1 = ((AQjmsSession)jms_sess).createRemoteSubscriber(
          shipped_orders, remoteAgent, null, message.getFactory);
</pre></div>
<!-- class="example" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
AQ does not support the use of multiple dblink to the same destination. As a workaround, use a single database link for each destination.</div>
</div>
<!-- class="sect1" -->
<a id="CHDGFCIH"></a>
<div id="ADQUE3079" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1459"></a><a id="sthref1460"></a>Specifying Transformations for Remote Subscribers</h2>
<p>Oracle Database Advanced Queuing allows a remote subscriber, that is a subscriber at another database, to subscribe to a topic.</p>
<p>Transformations can be specified when creating remote subscribers using the <code>createRemoteSubscriber()</code> call. This enables propagation of messages between topics of different formats. When a message published at a topic meets the criterion of a remote subscriber, Oracle Database Advanced Queuing automatically propagates the message to the queue/topic at the remote database specified for the remote subscriber. If a transformation is also specified, then Oracle Database Advanced Queuing applies the transformation to the message before propagating it to the queue/topic at the remote database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Sharded queues do not support remote subscribers.</div>
<div id="ADQUE3080" class="example">
<p class="titleinexample"><a id="sthref1461"></a>Example 14-19 Specifying Transformations for Remote Subscribers</p>
<p>A remote subscriber is created at the OE.OE_bookedorders_topic so that messages are automatically propagated to the WS.WS_bookedorders_topic. The transformation OE2WS is specified when creating the remote subscriber so that the messages reaching the WS_bookedorders_topic have the correct format.</p>
<p>Suppose that the WSOrder java class has been generated by Jpublisher to map to the Oracle object <code>WS.WS_order</code></p>
<pre>public void create_remote_sub(TopicSession jms_session)
{
   AQjmsAgent          subscriber;
   Topic               topic;

   try
   {
     /* get a handle to the OE_bookedorders_topic */
     topic = ((AQjmsSession)jms_session).getTopic(&#34;OE&#34;, &#34;OE_bookedorders_topic&#34;);
     subscriber = new AQjmsAgent(&#34;WShip&#34;, &#34;WS.WS_bookedorders_topic&#34;);

     ((AQjmsSession )jms_session).createRemoteSubscriber(
        topic, subscriber, null, WSOrder.getFactory(),&#34;OE2WS&#34;);
   }
   catch (JMSException ex)
   {
     System.out.println(&#34;Exception :&#34; ex);
   }
}
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="i1010638"></a>
<div id="ADQUE3081" class="sect1">
<h2 class="sect1"><a id="sthref1462"></a><a id="sthref1463"></a>Unsubscribing a Durable Subscription for a Local Subscriber</h2>
<pre>public void unsubscribe(javax.jms.Topic topic,
                        java.lang.String subs_name)
                 throws JMSException
</pre>
<p>This method unsubscribes a durable subscription for a local subscriber. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t31">Parameter</th>
<th class="cellalignment1001" id="r1c2-t31">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t31" headers="r1c1-t31"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t31 r1c2-t31">Non-temporary topic to unsubscribe</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t31" headers="r1c1-t31"><code>subs_name</code></td>
<td class="cellalignment1002" headers="r3c1-t31 r1c2-t31">Name used to identify this subscription</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDEGJGH">&#34;Exclusive Access to Topics&#34;</a></div>
<div id="ADQUE3082" class="example">
<p class="titleinexample"><a id="sthref1464"></a>Example 14-20 Unsubscribing a Durable Subscription for a Local Subscriber</p>
<pre>TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              jms_sess;
TopicSubscriber           subscriber1;
Topic                     shipped_orders;
int                       myport = 5521;
AQjmsAgent[]              recipList;
/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
          &#34;MYHOSTNAME&#34;, &#34;MYSID&#34;, myport, &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
          &#34;OE&#34;, &#34;Shipped_Orders_Topic&#34;);
/* unsusbcribe &#34;WesternShipping&#34; from shipped_orders */
jms_sess.unsubscribe(shipped_orders, &#34;WesternShipping&#34;);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDJBEBE"></a>
<div id="ADQUE3083" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1465"></a><a id="sthref1466"></a>Unsubscribing a Durable Subscription for a Remote Subscriber</h2>
<pre>public void unsubscribe(javax.jms.Topic topic,
                        oracle.jms.AQjmsAgent remote_subscriber)
                 throws JMSException
</pre>
<p>This method unsubscribes a durable subscription for a remote subscriber. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t33">Parameter</th>
<th class="cellalignment1001" id="r1c2-t33">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t33" headers="r1c1-t33"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t33 r1c2-t33">Non-temporary topic to unsubscribe</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t33" headers="r1c1-t33"><code>remote_subscriber</code></td>
<td class="cellalignment1002" headers="r3c1-t33 r1c2-t33"><code>AQjmsAgent</code> that refers to the remote subscriber. The address field of the <code>AQjmsAgent</code> cannot be null.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
Sharded queues do not support remote subscribers.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDEGJGH">&#34;Exclusive Access to Topics&#34;</a></div>
<div id="ADQUE3084" class="example">
<p class="titleinexample"><a id="sthref1467"></a>Example 14-21 Unsubscribing a Durable Subscription for a Remote Subscriber</p>
<pre>TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              t_sess    = null;
TopicSession              jms_sess;
Topic                     shipped_orders;
int                       myport = 5521;
AQjmsAgent                remoteAgent;
/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
          &#34;MYHOSTNAME&#34;, &#34;MYSID&#34;, myport, &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
          &#34;OE&#34;, &#34;Shipped_Orders_Topic&#34;);
remoteAgent = new AQjmsAgent(&#34;WS&#34;, &#34;WS.Shipped_Orders_Topic&#34;, null);
/* unsubscribe the remote agent from shipped_orders */
((AQjmsSession)jms_sess).unsubscribe(shipped_orders, remoteAgent);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="i1010673"></a>
<div id="ADQUE3085" class="sect1">
<h2 class="sect1"><a id="sthref1468"></a><a id="sthref1469"></a><a id="sthref1470"></a>Creating a TopicReceiver for a Topic of Standard JMS Type Messages</h2>
<pre>public oracle.jms.AQjmsTopicReceiver createTopicReceiver(
              javax.jms.Topic topic,
              java.lang.String receiver_name,
              java.lang.String messageSelector)
       throws JMSException
</pre>
<p>This method creates a <code>TopicReceiver</code> for a topic of standard JMS type messages. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t36">Parameter</th>
<th class="cellalignment1001" id="r1c2-t36">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t36" headers="r1c1-t36"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t36 r1c2-t36">Topic to access</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t36" headers="r1c1-t36"><code>receiver_name</code></td>
<td class="cellalignment1002" headers="r3c1-t36 r1c2-t36">Name of message receiver</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r4c1-t36" headers="r1c1-t36"><code>messageSelector</code></td>
<td class="cellalignment1002" headers="r4c1-t36 r1c2-t36">Only messages with properties matching the <code>messageSelector</code> expression are delivered. A value of null or an empty string indicates that there is no <code>messageSelector</code> for the message consumer.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="jm_create.htm#CACBBCBJ">&#34;MessageSelector&#34;</a></div>
<p>Oracle Database Advanced Queuing allows messages to be sent to specified recipients. These receivers may or may not be subscribers of the topic. If the receiver is not a subscriber to the topic, then it receives only those messages that are explicitly addressed to it. This method must be used order to create a <code>TopicReceiver</code> object for consumers that are not durable subscribers.</p>
<div id="ADQUE3086" class="example">
<p class="titleinexample"><a id="sthref1471"></a>Example 14-22 Creating a TopicReceiver for Standard JMS Type Messages</p>
<pre>TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              t_sess    = ull;
TopicSession              jms_sess;
Topic                     shipped_orders;
int                       myport = 5521;
TopicReceiver             receiver;
/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
          &#34;MYHOSTNAME&#34;, &#34;MYSID&#34;, myport, &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
          &#34;WS&#34;, &#34;Shipped_Orders_Topic&#34;);
receiver = ((AQjmsSession)jms_sess).createTopicReceiver(
          shipped_orders, &#34;WesternRegion&#34;, null); 
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDIDFHC"></a>
<div id="ADQUE3087" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1472"></a><a id="sthref1473"></a><a id="sthref1474"></a>Creating a TopicReceiver for a Topic of Oracle Object Type Messages</h2>
<pre>public oracle.jms.AQjmsTopicReceiver createTopicReceiver(
              javax.jms.Topic topic,
              java.lang.String receiver_name,
              java.lang.String messageSelector,
              java.lang.Object payload_factory)
       throws JMSException
</pre>
<p>This method creates a <code>TopicReceiver</code> for a topic of Oracle object type messages with selector. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t38">Parameter</th>
<th class="cellalignment1001" id="r1c2-t38">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t38" headers="r1c1-t38"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t38 r1c2-t38">Topic to access</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t38" headers="r1c1-t38"><code>receiver_name</code></td>
<td class="cellalignment1002" headers="r3c1-t38 r1c2-t38">Name of message receiver</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r4c1-t38" headers="r1c1-t38"><code>messageSelector</code></td>
<td class="cellalignment1002" headers="r4c1-t38 r1c2-t38">Only messages with properties matching the <code>messageSelector</code> expression are delivered. A value of null or an empty string indicates that there is no <code>messageSelector</code> for the message consumer.</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r5c1-t38" headers="r1c1-t38"><code>payload_factory</code></td>
<td class="cellalignment1002" headers="r5c1-t38 r1c2-t38"><code>CustomDatumFactory</code> or <code>ORADataFactory</code> for the Java class that maps to the Oracle ADT</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p><code>CustomDatum</code> support will be deprecated in a future release. Use <code>ORADataFactory</code> payload factories instead.</p>
</li>
<li>
<p>Sharded queues do not support object type messages.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="jm_create.htm#CACBBCBJ">&#34;MessageSelector&#34;</a></div>
<p>Oracle Database Advanced Queuing allows messages to be sent to all subscribers of a topic or to specified recipients. These receivers may or may not be subscribers of the topic. If the receiver is not a subscriber to the topic, then it receives only those messages that are explicitly addressed to it. This method must be used order to create a <code>TopicReceiver</code> object for consumers that are not durable subscribers.</p>
<div id="ADQUE3088" class="example">
<p class="titleinexample"><a id="sthref1475"></a>Example 14-23 Creating a TopicReceiver for Oracle Object Type Messages</p>
<pre>TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              t_sess    = null;
TopicSession              jms_sess;
Topic                     shipped_orders;
int                       myport = 5521;
TopicReceiver             receiver;
/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
          &#34;MYHOSTNAME&#34;, &#34;MYSID&#34;, myport, &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
          &#34;WS&#34;, &#34;Shipped_Orders_Topic&#34;);
receiver = ((AQjmsSession)jms_sess).createTopicReceiver(
          shipped_orders, &#34;WesternRegion&#34;, null);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDEAAJI"></a>
<div id="ADQUE3089" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1476"></a><a id="sthref1477"></a><a id="sthref1478"></a>Creating a TopicBrowser for Standard JMS Messages</h2>
<pre>public oracle.jms.TopicBrowser createBrowser(javax.jms.Topic topic,
                                             java.lang.String cons_name,
                                             java.lang.String messageSelector)
                                      throws JMSException
</pre>
<p>This method creates a <code>TopicBrowser</code> for topics with <code>TextMessage</code>, <code>StreamMessage</code>, <code>ObjectMessage</code>, <code>BytesMessage</code>, or <code>MapMessage</code> message bodies. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t41">Parameter</th>
<th class="cellalignment1001" id="r1c2-t41">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t41" headers="r1c1-t41"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t41 r1c2-t41">Topic to access</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t41" headers="r1c1-t41"><code>cons_name</code></td>
<td class="cellalignment1002" headers="r3c1-t41 r1c2-t41">Name of the durable subscriber or consumer</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r4c1-t41" headers="r1c1-t41"><code>messageSelector</code></td>
<td class="cellalignment1002" headers="r4c1-t41 r1c2-t41">Only messages with properties matching the <code>messageSelector</code> expression are delivered. A value of null or an empty string indicates that there is no <code>messageSelector</code> for the message consumer.</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r5c1-t41" headers="r1c1-t41"><code>payload_factory</code></td>
<td class="cellalignment1002" headers="r5c1-t41 r1c2-t41"><code>CustomDatumFactory</code> or <code>ORADataFactory</code> for the Java class that maps to the Oracle ADT</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="jm_create.htm#CACBBCBJ">&#34;MessageSelector&#34;</a></div>
<div id="ADQUE3090" class="example">
<p class="titleinexample"><a id="sthref1479"></a>Example 14-24 Creating a TopicBrowser Without a Selector</p>
<pre>/* Create a browser without a selector */
TopicSession    jms_session;
TopicBrowser    browser;
Topic           topic;
browser = ((AQjmsSession) jms_session).createBrowser(topic, &#34;SUBS1&#34;);
</pre></div>
<!-- class="example" -->
<div id="ADQUE3091" class="example">
<p class="titleinexample"><a id="sthref1480"></a>Example 14-25 Creating a TopicBrowser With a Specified Selector</p>
<pre>/* Create a browser for topics with a specified selector */
TopicSession    jms_session;
TopicBrowser    browser;
Topic           topic;
/* create a Browser to look at messages with correlationID = RUSH  */
browser = ((AQjmsSession) jms_session).createBrowser(
          topic, &#34;SUBS1&#34;, &#34;JMSCorrelationID = &#39;RUSH&#39;&#34;);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDIEGCJ"></a>
<div id="ADQUE3092" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1481"></a><a id="sthref1482"></a><a id="sthref1483"></a>Creating a TopicBrowser for Standard JMS Messages, Locking Messages</h2>
<pre>public oracle.jms.TopicBrowser createBrowser(javax.jms.Topic topic,
                                             java.lang.String cons_name,
                                             java.lang.String messageSelector,
                                             boolean locked)
                                      throws JMSException
</pre>
<p>This method creates a <code>TopicBrowser</code> for topics with text, stream, objects, bytes or map messages, locking messages while browsing. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t43">Parameter</th>
<th class="cellalignment1001" id="r1c2-t43">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t43" headers="r1c1-t43"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t43 r1c2-t43">Topic to access</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t43" headers="r1c1-t43"><code>cons_name</code></td>
<td class="cellalignment1002" headers="r3c1-t43 r1c2-t43">Name of the durable subscriber or consumer</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r4c1-t43" headers="r1c1-t43"><code>messageSelector</code></td>
<td class="cellalignment1002" headers="r4c1-t43 r1c2-t43">Only messages with properties matching the <code>messageSelector</code> expression are delivered. A value of null or an empty string indicates that there is no <code>messageSelector</code> for the message consumer.</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r5c1-t43" headers="r1c1-t43"><code>locked</code></td>
<td class="cellalignment1002" headers="r5c1-t43 r1c2-t43">If set to true, then messages are locked as they are browsed (similar to a SELECT for UPDATE)</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div id="ADQUE3093" class="example">
<p class="titleinexample"><a id="sthref1484"></a>Example 14-26 Creating a TopicBrowser Without a Selector, Locking Messages While Browsing</p>
<pre>/* Create a browser without a selector */
TopicSession    jms_session;
TopicBrowser    browser;
Topic           topic;
browser = ((AQjmsSession) jms_session).createBrowser(
          topic, &#34;SUBS1&#34;, true);
</pre></div>
<!-- class="example" -->
<div id="ADQUE3094" class="example">
<p class="titleinexample"><a id="sthref1485"></a>Example 14-27 Creating a TopicBrowser With a Specified Selector, Locking Messages</p>
<pre>/* Create a browser for topics with a specified selector */
TopicSession    jms_session;
TopicBrowser    browser;
Topic           topic;
/* create a Browser to look at messages with correlationID = RUSH in
lock mode */
browser = ((AQjmsSession) jms_session).createBrowser(
          topic, &#34;SUBS1&#34;, &#34;JMSCorrelationID = &#39;RUSH&#39;&#34;, true);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDGGJDH"></a>
<div id="ADQUE3095" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1486"></a><a id="sthref1487"></a>Creating a TopicBrowser for Oracle Object Type Messages</h2>
<pre>public oracle.jms.TopicBrowser createBrowser(javax.jms.Topic topic,
                                             java.lang.String cons_name,
                                             java.lang.String messageSelector,
                                             java.lang.Object payload_factory)
                                      throws JMSException
</pre>
<p>This method creates a <code>TopicBrowser</code> for topics of Oracle object type messages. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t44">Parameter</th>
<th class="cellalignment1001" id="r1c2-t44">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t44" headers="r1c1-t44"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t44 r1c2-t44">Topic to access</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t44" headers="r1c1-t44"><code>cons_name</code></td>
<td class="cellalignment1002" headers="r3c1-t44 r1c2-t44">Name of the durable subscriber or consumer</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r4c1-t44" headers="r1c1-t44"><code>messageSelector</code></td>
<td class="cellalignment1002" headers="r4c1-t44 r1c2-t44">Only messages with properties matching the <code>messageSelector</code> expression are delivered. A value of null or an empty string indicates that there is no <code>messageSelector</code> for the message consumer.</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r5c1-t44" headers="r1c1-t44"><code>payload_factory</code></td>
<td class="cellalignment1002" headers="r5c1-t44 r1c2-t44"><code>CustomDatumFactory</code> or <code>ORADataFactory</code> for the Java class that maps to the Oracle ADT</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p><code>CustomDatum</code> support will be deprecated in a future release. Use <code>ORADataFactory</code> payload factories instead.</p>
</li>
<li>
<p>Sharded queues do not support object type messages.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="jm_create.htm#CACBBCBJ">&#34;MessageSelector&#34;</a></div>
<p>The <code>CustomDatumFactory</code> for a particular Java class that maps to the SQL object type payload can be obtained using the <code>getFactory</code> static method. Assume the topic <code>test_topic</code> has payload of type <code>SCOTT.EMPLOYEE</code> and the Java class that is generated by Jpublisher for this Oracle object type is called <code>Employee</code>. The Employee class implements the <code>CustomDatum</code> interface. The <code>CustomDatumFactory</code> for this class can be obtained by using the <code>Employee.getFactory()</code> method.</p>
<div id="ADQUE3096" class="example">
<p class="titleinexample"><a id="sthref1488"></a>Example 14-28 Creating a TopicBrowser for AdtMessage Messages</p>
<pre>/* Create a browser for a Topic with AdtMessage messages of type EMPLOYEE*/
TopicSession jms_session
TopicBrowser browser;
Topic        test_topic;
browser = ((AQjmsSession) jms_session).createBrowser(
          test_topic, &#34;SUBS1&#34;, Employee.getFactory());
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CHDBIIEB"></a>
<div id="ADQUE3097" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref1489"></a><a id="sthref1490"></a>Creating a TopicBrowser for Oracle Object Type Messages, Locking Messages</h2>
<pre>public oracle.jms.TopicBrowser createBrowser(javax.jms.Topic topic,
                                             java.lang.String cons_name,
                                             java.lang.String messageSelector,
                                             java.lang.Object payload_factory,
                                             boolean locked)
                                      throws JMSException
</pre>
<p>This method creates a <code>TopicBrowser</code> for topics of Oracle object type messages, locking messages while browsing. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t47">Parameter</th>
<th class="cellalignment1001" id="r1c2-t47">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t47" headers="r1c1-t47"><code>topic</code></td>
<td class="cellalignment1002" headers="r2c1-t47 r1c2-t47">Topic to access</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t47" headers="r1c1-t47"><code>cons_name</code></td>
<td class="cellalignment1002" headers="r3c1-t47 r1c2-t47">Name of the durable subscriber or consumer</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r4c1-t47" headers="r1c1-t47"><code>messageSelector</code></td>
<td class="cellalignment1002" headers="r4c1-t47 r1c2-t47">Only messages with properties matching the <code>messageSelector</code> expression are delivered. A value of null or an empty string indicates that there is no <code>messageSelector</code> for the message consumer.</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r5c1-t47" headers="r1c1-t47"><code>payload_factory</code></td>
<td class="cellalignment1002" headers="r5c1-t47 r1c2-t47"><code>CustomDatumFactory</code> or <code>ORADataFactory</code> for the Java class that maps to the Oracle ADT</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r6c1-t47" headers="r1c1-t47"><code>locked</code></td>
<td class="cellalignment1002" headers="r6c1-t47 r1c2-t47">If set to true, then messages are locked as they are browsed (similar to a SELECT for UPDATE)</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p><code>CustomDatum</code> support will be deprecated in a future release. Use <code>ORADataFactory</code> payload factories instead.</p>
</li>
<li>
<p>Sharded queues do not support object type messages.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="jm_create.htm#CACBBCBJ">&#34;MessageSelector&#34;</a></div>
<div id="ADQUE3098" class="example">
<p class="titleinexample"><a id="sthref1491"></a>Example 14-29 Creating a TopicBrowser for AdtMessage Messages, Locking Messages</p>
<pre>/* Create a browser for a Topic with AdtMessage messages of type EMPLOYEE* in
lock mode/
TopicSession jms_session
TopicBrowser browser;
Topic        test_topic;
browser = ((AQjmsSession) jms_session).createBrowser(
          test_topic, &#34;SUBS1&#34;, Employee.getFactory(), true);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="i1007232"></a>
<div id="ADQUE3099" class="sect1">
<h2 class="sect1"><a id="sthref1492"></a><a id="sthref1493"></a><a id="sthref1494"></a>Browsing Messages Using a TopicBrowser</h2>
<pre>public void purgeSeen()
               throws JMSException
</pre>
<p>This method browses messages using a <code>TopicBrowser</code>. Use methods in <code>java.util.Enumeration</code> to go through the list of messages. Use the method <code>purgeSeen</code> in <code>TopicBrowser</code> to purge messages that have been seen during the current browse.</p>
<div id="ADQUE3100" class="example">
<p class="titleinexample"><a id="sthref1495"></a>Example 14-30 Creating a TopicBrowser with a Specified Selector</p>
<pre>/* Create a browser for topics with a specified selector */
public void browse_rush_orders(TopicSession jms_session)
TopicBrowser    browser;
Topic           topic;
ObjectMessage   obj_message
BolOrder        new_order;
Enumeration     messages;
/* get a handle to the new_orders topic */
topic = ((AQjmsSession) jms_session).getTopic(&#34;OE&#34;, &#34;OE_bookedorders_topic&#34;);
/* create a Browser to look at RUSH orders */
browser = ((AQjmsSession) jms_session).createBrowser(
          topic, &#34;SUBS1&#34;, &#34;JMSCorrelationID = &#39;RUSH&#39;&#34;);
/* Browse through the messages */
for (messages = browser.elements() ; message.hasMoreElements() ;)
{obj_message = (ObjectMessage)message.nextElement();}
/* Purge messages seen during this browse */
browser.purgeSeen() 
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment993">
<tr>
<td class="cellalignment1002">
<table class="cellalignment998">
<tr>
<td class="cellalignment997"><a href="jm_point.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment997"><a href="jm_share.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1004">
<table class="cellalignment996">
<tr>
<td class="cellalignment997"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment997"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment997"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment997"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment997"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment997"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>