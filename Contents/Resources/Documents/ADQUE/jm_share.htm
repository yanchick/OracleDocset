<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-994"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Oracle%20Java%20Message%20Service%20Shared%20Interfaces"></a><title>Oracle Java Message Service Shared Interfaces</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023"/>
<meta name="dcterms.created" content="2014-07-01T0:30:47Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Advanced Queuing User&#39;s Guide"/>
<meta name="dcterms.identifier" content="E17945-14"/>
<meta name="dcterms.isVersionOf" content="ADQUE"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="jm_pblsh.htm" title="Previous" type="text/html"/>
<link rel="Next" href="jm_exmpl.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17945-14.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">22/34</span> <!-- End Header -->
<div id="ADQUE1500" class="chapter"><a id="g1011754"></a> <a id="i1006996"></a>
<h1 class="chapter"><span class="secnum">15</span> Oracle Java Message Service Shared Interfaces</h1>
<p>This chapter describes the <a href="glossary.htm#i432286"><span class="xrefglossterm">Java Message Service</span></a> (JMS) operational interface (shared interfaces) to Oracle Database Advanced Queuing (AQ).</p>
<p>This chapter contains these topics:</p>
<ul>
<li>
<p><a href="#i1006908">Oracle Database Advanced Queuing JMS Operational Interface: Shared Interfaces</a></p>
</li>
<li>
<p><a href="#i1005830">Specifying JMS Message Properties</a></p>
</li>
<li>
<p><a href="#i1005933">Setting Default TimeToLive for All Messages Sent by a MessageProducer</a></p>
</li>
<li>
<p><a href="#i1005961">Setting Default Priority for All Messages Sent by a MessageProducer</a></p>
</li>
<li>
<p><a href="#i1005995">Creating an AQjms Agent</a></p>
</li>
<li>
<p><a href="#i1006017">Receiving a Message Synchronously</a></p>
</li>
<li>
<p><a href="#CACFHCHC">Specifying the Navigation Mode for Receiving Messages</a></p>
</li>
<li>
<p><a href="#i1006171">Receiving a Message Asynchronously</a></p>
</li>
<li>
<p><a href="#i1006292">Getting Message ID</a></p>
</li>
<li>
<p><a href="#i1006330">Getting JMS Message Properties</a></p>
</li>
<li>
<p><a href="#CACEGGDH">Closing and Shutting Down</a></p>
</li>
<li>
<p><a href="#i1006514">Troubleshooting</a></p>
</li>
</ul>
<a id="i1006908"></a>
<div id="ADQUE3101" class="sect1">
<h2 class="sect1">Oracle Database Advanced Queuing JMS Operational Interface: Shared Interfaces</h2>
<p>This section discusses Oracle Database Advanced Queuing shared interfaces for JMS operations.</p>
<p>This section contains these topics:</p>
<ul>
<li>
<p><a href="#i1005727">Starting a JMS Connection</a></p>
</li>
<li>
<p><a href="#CACGAEJE">Getting a JMS Connection</a></p>
</li>
<li>
<p><a href="#i1005738">Committing All Operations in a Session</a></p>
</li>
<li>
<p><a href="#i1005744">Rolling Back All Operations in a Session</a></p>
</li>
<li>
<p><a href="#i1005750">Getting the JDBC Connection from a Session</a></p>
</li>
<li>
<p><a href="#i1005760">Getting the OracleOCIConnectionPool from a JMS Connection</a></p>
</li>
<li>
<p><a href="#CACFDJIG">Creating a BytesMessage</a></p>
</li>
<li>
<p><a href="#CACFHIEE">Creating a MapMessage</a></p>
</li>
<li>
<p><a href="#i1005784">Creating a StreamMessage</a></p>
</li>
<li>
<p><a href="#CACECJCJ">Creating an ObjectMessage</a></p>
</li>
<li>
<p><a href="#i1005798">Creating a TextMessage</a></p>
</li>
<li>
<p><a href="#i1005805">Creating a JMS Message</a></p>
</li>
<li>
<p><a href="#i1005818">Creating an AdtMessage</a></p>
</li>
<li>
<p><a href="#i1005826">Setting a JMS Correlation Identifier</a></p>
</li>
</ul>
<a id="i1005727"></a>
<div id="ADQUE3102" class="sect2">
<h3 class="sect2"><a id="sthref1496"></a><a id="sthref1497"></a>Starting a JMS Connection</h3>
<pre>public void start()
          throws JMSException
</pre>
<p><code>AQjmsConnection.start()</code> starts a <a href="glossary.htm#CBAEACDA"><span class="xrefglossterm">JMS connection</span></a> for receiving messages.</p>
</div>
<!-- class="sect2" -->
<a id="CACGAEJE"></a>
<div id="ADQUE3103" class="sect2">
<h3 class="sect2"><a id="sthref1498"></a><a id="sthref1499"></a>Getting a JMS Connection</h3>
<pre>public oracle.jms.AQjmsConnection getJmsConnection()
                                            throws JMSException
</pre>
<p><code>AQjmsSession.getJmsConnection()</code> gets a JMS connection from a session.</p>
</div>
<!-- class="sect2" -->
<a id="i1005738"></a>
<div id="ADQUE3104" class="sect2">
<h3 class="sect2"><a id="sthref1500"></a><a id="sthref1501"></a>Committing All Operations in a Session</h3>
<pre>public void commit()
           throws JMSException
</pre>
<p><code>AQjmsSession.commit()</code> commits all JMS and SQL operations performed in a session.</p>
</div>
<!-- class="sect2" -->
<a id="i1005744"></a>
<div id="ADQUE3105" class="sect2">
<h3 class="sect2"><a id="sthref1502"></a><a id="sthref1503"></a>Rolling Back All Operations in a Session</h3>
<pre>public void rollback()
              throws JMSException
</pre>
<p><code>AQjmsSession.rollback()</code> terminates all JMS and SQL operations performed in a session.</p>
</div>
<!-- class="sect2" -->
<a id="i1005750"></a>
<div id="ADQUE3106" class="sect2">
<h3 class="sect2"><a id="sthref1504"></a><a id="sthref1505"></a><a id="sthref1506"></a><a id="sthref1507"></a>Getting the JDBC Connection from a Session</h3>
<pre>public java.sql.Connection getDBConnection()
                                    throws JMSException
</pre>
<p><code>AQjmsSession.getDBConnection()</code> gets the underlying JDBC connection from a <a href="glossary.htm#CBAEAFFH"><span class="xrefglossterm">JMS session</span></a>. The JDBC connection can be used to perform SQL operations as part of the same transaction in which the JMS operations are accomplished.</p>
<div id="ADQUE3107" class="example">
<p class="titleinexample"><a id="sthref1508"></a>Example 15-1 Getting Underlying JDBC Connection from JMS Session</p>
<pre>java.sql.Connection db_conn;
QueueSession     jms_sess;
db_conn = ((AQjmsSession)jms_sess).getDBConnection();
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="i1005760"></a>
<div id="ADQUE3108" class="sect2">
<h3 class="sect2"><a id="sthref1509"></a><a id="sthref1510"></a><a id="sthref1511"></a>Getting the OracleOCIConnectionPool from a JMS Connection</h3>
<pre>public oracle.jdbc.pool.OracleOCIConnectionPool getOCIConnectionPool()
</pre>
<p><code>AQjmsConnection.getOCIConnectionPool()</code> gets the underlying <code>OracleOCIConnectionPool</code> from a JMS connection. The settings of the <code>OracleOCIConnectionPool</code> instance can be tuned by the user depending on the connection usage, for example, the number of sessions the user wants to create using the given connection. The user should not, however, close the <code>OracleOCIConnectionPool</code> instance being used by the JMS connection.</p>
<div id="ADQUE3109" class="example">
<p class="titleinexample"><a id="sthref1512"></a>Example 15-2 Getting Underlying OracleOCIConnectionPool from JMS Connection</p>
<pre>oracle.jdbc.pool.OracleOCIConnectionPool cpool;
QueueConnection jms_conn;
cpool = ((AQjmsConnection)jms_conn).getOCIConnectionPool();
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CACFDJIG"></a>
<div id="ADQUE3110" class="sect2">
<h3 class="sect2"><a id="sthref1513"></a><a id="sthref1514"></a><a id="sthref1515"></a><a id="sthref1516"></a>Creating a BytesMessage</h3>
<pre>public javax.jms.BytesMessage createBytesMessage()
                                          throws JMSException
</pre>
<p><code>AQjmsSession.createBytesMessage()</code> creates a bytes <a href="glossary.htm#CBACDHGB"><span class="xrefglossterm">message</span></a>. It can be used only if the <a href="glossary.htm#CBAFHDDD"><span class="xrefglossterm">queue table</span></a> that contains the destination <a href="glossary.htm#CBAHIIAB"><span class="xrefglossterm">queue</span></a>/topic was created with the <code>SYS.AQ$_JMS_BYTES_MESSAGE</code> or <code>AQ$_JMS_MESSAGE</code> payload types.</p>
</div>
<!-- class="sect2" -->
<a id="CACFHIEE"></a>
<div id="ADQUE3111" class="sect2">
<h3 class="sect2"><a id="sthref1517"></a><a id="sthref1518"></a><a id="sthref1519"></a><a id="sthref1520"></a>Creating a MapMessage</h3>
<pre>public javax.jms.MapMessage createMapMessage()
                                      throws JMSException
</pre>
<p><code>AQjmsSession.createMapMessage()</code> creates a map message. It can be used only if the queue table that contains the destination queue/topic was created with the <code>SYS.AQ$_JMS_MAP_MESSAGE</code> or <code>AQ$_JMS_MESSAGE</code> payload types.</p>
</div>
<!-- class="sect2" -->
<a id="i1005784"></a>
<div id="ADQUE3112" class="sect2">
<h3 class="sect2"><a id="sthref1521"></a><a id="sthref1522"></a><a id="sthref1523"></a><a id="sthref1524"></a>Creating a StreamMessage</h3>
<pre>public javax.jms.StreamMessage createStreamMessage()
                                            throws JMSException
</pre>
<p><code>AQjmsSession.createStreamMessage()</code> creates a stream message. It can be used only if the queue table that contains the destination queue/topic was created with the <code>SYS.AQ$_JMS_STREAM_MESSAGE</code> or <code>AQ$_JMS_MESSAGE</code> payload types.</p>
</div>
<!-- class="sect2" -->
<a id="CACECJCJ"></a>
<div id="ADQUE3113" class="sect2">
<h3 class="sect2"><a id="sthref1525"></a><a id="sthref1526"></a><a id="sthref1527"></a><a id="sthref1528"></a>Creating an ObjectMessage</h3>
<pre>public javax.jms.ObjectMessage createObjectMessage(java.io.Serializable object)
                                            throws JMSException
</pre>
<p><code>AQjmsSession.createObjectMessage()</code> creates an object message. It can be used only if the queue table that contains the destination queue/topic was created with the <code>SYS.AQ$_JMS_OBJECT_MESSAGE</code> or <code>AQ$_JMS_MESSAGE</code> payload types.</p>
</div>
<!-- class="sect2" -->
<a id="i1005798"></a>
<div id="ADQUE3114" class="sect2">
<h3 class="sect2"><a id="sthref1529"></a><a id="sthref1530"></a><a id="sthref1531"></a><a id="sthref1532"></a>Creating a TextMessage</h3>
<pre>public javax.jms.TextMessage createTextMessage()
                                        throws JMSException
</pre>
<p><code>AQjmsSession.createTextMessage()</code> creates a text message. It can be used only if the queue table that contains the destination queue/topic was created with the <code>SYS.AQ$_JMS_TEXT_MESSAGE</code> or <code>AQ$_JMS_MESSAGE</code> payload types.</p>
</div>
<!-- class="sect2" -->
<a id="i1005805"></a>
<div id="ADQUE3115" class="sect2">
<h3 class="sect2"><a id="sthref1533"></a><a id="sthref1534"></a><a id="sthref1535"></a><a id="sthref1536"></a>Creating a JMS Message</h3>
<pre>public javax.jms.Message createMessage()
                                throws JMSException
</pre>
<p><code>AQjmsSession.createMessage()</code> creates a <a href="glossary.htm#CBADEAAI"><span class="xrefglossterm">JMS message</span></a>. You can use the <code>AQ$_JMS_MESSAGE</code> construct message to construct messages of different types. The message type must be one of the following:</p>
<ul>
<li>
<p><code>DBMS_AQ.JMS_TEXT_MESSAGE</code></p>
</li>
<li>
<p><code>DBMS_AQ.JMS_OBJECT_MESSAGE</code></p>
</li>
<li>
<p><code>DBMS_AQ.JMS_MAP_MESSAGE</code></p>
</li>
<li>
<p><code>DBMS_AQ.JMS_BYTES_MESSAGE</code></p>
</li>
<li>
<p><code>DBMS_AQ.JMS_STREAM_MESSAGE</code></p>
</li>
</ul>
<p>You can also use this ADT to create a header-only JMS message.</p>
</div>
<!-- class="sect2" -->
<a id="i1005818"></a>
<div id="ADQUE3116" class="sect2">
<h3 class="sect2"><a id="sthref1537"></a><a id="sthref1538"></a><a id="sthref1539"></a><a id="sthref1540"></a>Creating an AdtMessage</h3>
<pre>public oracle.jms.AdtMessage createAdtMessage()
                                       throws JMSException
</pre>
<p><code>AQjmsSession.createAdtMessage()</code> creates an <code>AdtMessage</code>. It can be used only if the queue table that contains the queue/topic was created with an Oracle ADT payload type. An <code>AdtMessage</code> must be populated with an object that implements the <code>CustomDatum</code> interface. This object must be the Java mapping of the SQL ADT defined as the payload for the queue/topic. Java classes corresponding to SQL ADT types can be generated using the Jpublisher tool.</p>
</div>
<!-- class="sect2" -->
<a id="i1005826"></a>
<div id="ADQUE3117" class="sect2">
<h3 class="sect2"><a id="sthref1541"></a><a id="sthref1542"></a>Setting a JMS Correlation Identifier</h3>
<pre>public void setJMSCorrelationID(java.lang.String correlationID)
                         throws JMSException
</pre>
<p><code>AQjmsMessage.setJMSCorrelationID()</code> specifies the message correlation identifier.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1005830"></a>
<div id="ADQUE3118" class="sect1">
<h2 class="sect1"><a id="sthref1543"></a><a id="sthref1544"></a>Specifying JMS Message Properties</h2>
<p>Property names starting with JMS are provider-specific. User-defined properties cannot start with JMS.</p>
<p>The following provider properties can be set by clients using text, stream, object, bytes or map messages:</p>
<ul>
<li>
<p><code>JMSXAppID (string)</code></p>
</li>
<li>
<p><code>JMSXGroupID (string)</code></p>
</li>
<li>
<p><code>JMSXGroupSeq (int)</code></p>
</li>
<li>
<p><code>JMS_OracleExcpQ (string)</code></p>
<p>This message property specifies the <a href="glossary.htm#CBAHHGJI"><span class="xrefglossterm">exception queue</span></a>.</p>
</li>
<li>
<p><code>JMS_OracleDelay (int)</code></p>
<p>This message property specifies the message delay in seconds.</p>
</li>
</ul>
<p>The following properties can be set on <code>AdtMessage</code></p>
<ul>
<li>
<p><code>JMS_OracleExcpQ (String)</code></p>
<p>This message property specifies the exception queue as &#34;<code><span class="codeinlineitalic">schema</span></code><code>.queue_name</code>&#34;</p>
</li>
<li>
<p><code>JMS_OracleDelay (int)</code></p>
<p>This message property specifies the message delay in seconds.</p>
</li>
</ul>
<p>This section contains these topics:</p>
<ul>
<li>
<p><a href="#i1005890">Setting a Boolean Message Property</a></p>
</li>
<li>
<p><a href="#i1005894">Setting a String Message Property</a></p>
</li>
<li>
<p><a href="#i1005898">Setting an Integer Message Property</a></p>
</li>
<li>
<p><a href="#i1005902">Setting a Double Message Property</a></p>
</li>
<li>
<p><a href="#i1005906">Setting a Float Message Property</a></p>
</li>
<li>
<p><a href="#CACEEBGC">Setting a Byte Message Property</a></p>
</li>
<li>
<p><a href="#i1005916">Setting a Long Message Property</a></p>
</li>
<li>
<p><a href="#i1005922">Setting a Short Message Property</a></p>
</li>
<li>
<p><a href="#i1006424">Getting an Object Message Property</a></p>
</li>
</ul>
<a id="i1005890"></a>
<div id="ADQUE3119" class="sect2">
<h3 class="sect2"><a id="sthref1545"></a><a id="sthref1546"></a>Setting a Boolean Message Property</h3>
<pre>public void setBooleanProperty(java.lang.String name,
                               boolean value)
                        throws JMSException
</pre>
<p><code>AQjmsMessage.setBooleanProperty()</code> specifies a message property as Boolean. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t2">Parameter</th>
<th class="cellalignment1001" id="r1c2-t2">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t2" headers="r1c1-t2"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t2 r1c2-t2">Name of the Boolean property</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t2" headers="r1c1-t2"><code>value</code></td>
<td class="cellalignment1002" headers="r3c1-t2 r1c2-t2">Boolean property value to set in the message</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" -->
<a id="i1005894"></a>
<div id="ADQUE3120" class="sect2">
<h3 class="sect2"><a id="sthref1547"></a><a id="sthref1548"></a>Setting a String Message Property</h3>
<pre>public void setStringProperty(java.lang.String name,
                              java.lang.String value)
                       throws JMSException
</pre>
<p><code>AQjmsMessage.setStringProperty()</code> specifies a message property as string. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t3">Parameter</th>
<th class="cellalignment1001" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t3" headers="r1c1-t3"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t3 r1c2-t3">Name of the string property</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t3" headers="r1c1-t3"><code>value</code></td>
<td class="cellalignment1002" headers="r3c1-t3 r1c2-t3">String property value to set in the message</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" -->
<a id="i1005898"></a>
<div id="ADQUE3121" class="sect2">
<h3 class="sect2"><a id="sthref1549"></a><a id="sthref1550"></a>Setting an Integer Message Property</h3>
<pre>public void setIntProperty(java.lang.String name,
                           int value)
                    throws JMSException
</pre>
<p><code>AQjmsMessage.setIntProperty()</code> specifies a message property as integer. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t4">Parameter</th>
<th class="cellalignment1001" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t4" headers="r1c1-t4"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t4 r1c2-t4">Name of the integer property</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t4" headers="r1c1-t4"><code>value</code></td>
<td class="cellalignment1002" headers="r3c1-t4 r1c2-t4">Integer property value to set in the message</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" -->
<a id="i1005902"></a>
<div id="ADQUE3122" class="sect2">
<h3 class="sect2"><a id="sthref1551"></a><a id="sthref1552"></a>Setting a Double Message Property</h3>
<pre>public void setDoubleProperty(java.lang.String name,
                              double value)
                       throws JMSException
</pre>
<p><code>AQjmsMessage.setDoubleProperty()</code> specifies a message property as double. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t5">Parameter</th>
<th class="cellalignment1001" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t5" headers="r1c1-t5"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t5 r1c2-t5">Name of the double property</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t5" headers="r1c1-t5"><code>value</code></td>
<td class="cellalignment1002" headers="r3c1-t5 r1c2-t5">Double property value to set in the message</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" -->
<a id="i1005906"></a>
<div id="ADQUE3123" class="sect2">
<h3 class="sect2"><a id="sthref1553"></a><a id="sthref1554"></a>Setting a Float Message Property</h3>
<pre>public void setFloatProperty(java.lang.String name,
                             float value)
                      throws JMSException
</pre>
<p><code>AQjmsMessage.setFloatProperty()</code> specifies a message property as float. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t6">Parameter</th>
<th class="cellalignment1001" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t6" headers="r1c1-t6"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t6 r1c2-t6">Name of the float property</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t6" headers="r1c1-t6"><code>value</code></td>
<td class="cellalignment1002" headers="r3c1-t6 r1c2-t6">Float property value to set in the message</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" -->
<a id="CACEEBGC"></a>
<div id="ADQUE3124" class="sect2">
<h3 class="sect2"><a id="sthref1555"></a><a id="sthref1556"></a>Setting a Byte Message Property</h3>
<pre>public void setByteProperty(java.lang.String name,
                            byte value)
                     throws JMSException
</pre>
<p><code>AQjmsMessage.setByteProperty()</code> specifies a message property as byte. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t7">Parameter</th>
<th class="cellalignment1001" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t7" headers="r1c1-t7"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t7 r1c2-t7">Name of the byte property</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t7" headers="r1c1-t7"><code>value</code></td>
<td class="cellalignment1002" headers="r3c1-t7 r1c2-t7">Byte property value to set in the message</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" -->
<a id="i1005916"></a>
<div id="ADQUE3125" class="sect2">
<h3 class="sect2"><a id="sthref1557"></a><a id="sthref1558"></a>Setting a Long Message Property</h3>
<pre>public void setLongProperty(java.lang.String name,
                            long value)
                     throws JMSException
</pre>
<p><code>AQjmsMessage.setLongProperty()</code> specifies a message property as long. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t8">Parameter</th>
<th class="cellalignment1001" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t8" headers="r1c1-t8"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t8 r1c2-t8">Name of the long property</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t8" headers="r1c1-t8"><code>value</code></td>
<td class="cellalignment1002" headers="r3c1-t8 r1c2-t8">Long property value to set in the message</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" -->
<a id="i1005922"></a>
<div id="ADQUE3126" class="sect2">
<h3 class="sect2"><a id="sthref1559"></a><a id="sthref1560"></a>Setting a Short Message Property</h3>
<pre>public void setShortProperty(java.lang.String name,
                             short value)
                      throws JMSException
</pre>
<p><code>AQjmsMessage.setShortProperty()</code> specifies a message property as short. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t9">Parameter</th>
<th class="cellalignment1001" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t9" headers="r1c1-t9"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t9 r1c2-t9">Name of the short property</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t9" headers="r1c1-t9"><code>value</code></td>
<td class="cellalignment1002" headers="r3c1-t9 r1c2-t9">Short property value to set in the message</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" -->
<a id="i1005927"></a>
<div id="ADQUE3127" class="sect2">
<h3 class="sect2"><a id="sthref1561"></a><a id="sthref1562"></a>Setting an Object Message Property</h3>
<pre>public void setObjectProperty(java.lang.String name,
                              java.lang.Object value)
                       throws JMSException
</pre>
<p><code>AQjmsMessage.setObjectProperty()</code> specifies a message property as object. Only objectified primitive values are supported: Boolean, byte, short, integer, long, float, double and string. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t10">Parameter</th>
<th class="cellalignment1001" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t10" headers="r1c1-t10"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t10 r1c2-t10">Name of the Java object property</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t10" headers="r1c1-t10"><code>value</code></td>
<td class="cellalignment1002" headers="r3c1-t10 r1c2-t10">Java object property value to set in the message</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1005933"></a>
<div id="ADQUE3128" class="sect1">
<h2 class="sect1"><a id="sthref1563"></a><a id="sthref1564"></a><a id="sthref1565"></a><a id="sthref1566"></a>Setting Default TimeToLive for All Messages Sent by a MessageProducer</h2>
<pre>public void setTimeToLive(long timeToLive)
                   throws JMSException
</pre>
<p>This method sets the default <code>TimeToLive</code> for all messages sent by a <code>MessageProducer</code>. It is calculated after message delay has taken effect. This method has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t11">Parameter</th>
<th class="cellalignment1001" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t11" headers="r1c1-t11"><code>timeToLive</code></td>
<td class="cellalignment1002" headers="r2c1-t11 r1c2-t11">Message time to live in milliseconds (zero is unlimited)</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div id="ADQUE3129" class="example">
<p class="titleinexample"><a id="sthref1567"></a>Example 15-3 Setting Default TimeToLive for All Messages Sent by a MessageProducer</p>
<pre>/* Set default timeToLive value to 100000 milliseconds for all messages sent by the QueueSender*/
QueueSender sender;
sender.setTimeToLive(100000);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="i1005961"></a>
<div id="ADQUE3130" class="sect1">
<h2 class="sect1"><a id="sthref1568"></a><a id="sthref1569"></a><a id="sthref1570"></a><a id="sthref1571"></a>Setting Default Priority for All Messages Sent by a MessageProducer</h2>
<pre>public void setPriority(int priority)
                 throws JMSException
</pre>
<p>This method sets the default <code>Priority</code> for all messages sent by a <code>MessageProducer</code>. It has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t12">Parameter</th>
<th class="cellalignment1001" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t12" headers="r1c1-t12"><code>priority</code></td>
<td class="cellalignment1002" headers="r2c1-t12 r1c2-t12">Message priority for this message producer. The default is 4.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<p>Priority values can be any integer. A smaller number indicates higher priority. If a priority value is explicitly specified during a <code>send()</code> operation, then it overrides the default value set by this method.</p>
<div id="ADQUE3131" class="example">
<p class="titleinexample"><a id="sthref1572"></a>Example 15-4 Setting Default Priority Value for All Messages Sent by QueueSender</p>
<pre>/* Set default priority value to 2 for all messages sent by the QueueSender*/
QueueSender sender;
sender.setPriority(2);
</pre></div>
<!-- class="example" -->
<div id="ADQUE3132" class="example">
<p class="titleinexample"><a id="sthref1573"></a>Example 15-5 Setting Default Priority Value for All Messages Sent by TopicPublisher</p>
<pre>/* Set default priority value to 2 for all messages sent by the TopicPublisher*/
TopicPublisher publisher;
publisher.setPriority(1);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="i1005995"></a>
<div id="ADQUE3133" class="sect1">
<h2 class="sect1"><a id="sthref1574"></a><a id="sthref1575"></a><a id="sthref1576"></a>Creating an AQjms Agent</h2>
<pre>public void createAQAgent(java.lang.String agent_name,
                          boolean enable_http,
                   throws JMSException
</pre>
<p>This method creates an <code>AQjmsAgent</code>. It has the following parameters:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t13">Parameter</th>
<th class="cellalignment1001" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t13" headers="r1c1-t13"><code>agent_name</code></td>
<td class="cellalignment1002" headers="r2c1-t13 r1c2-t13">Name of the AQ agent</td>
</tr>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r3c1-t13" headers="r1c1-t13"><code>enable_http</code></td>
<td class="cellalignment1002" headers="r3c1-t13 r1c2-t13">If set to true, then this agent is allowed to access AQ through HTTP</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect1" -->
<a id="i1006017"></a>
<div id="ADQUE3134" class="sect1">
<h2 class="sect1">Receiving a Message Synchronously</h2>
<p>You can receive a message synchronously by specifying Timeout or without waiting. You can also receive a message using a transformation:</p>
<ul>
<li>
<p><a href="#i1007162">Using a Message Consumer by Specifying Timeout</a></p>
</li>
<li>
<p><a href="#i1006074">Using a Message Consumer Without Waiting</a></p>
</li>
<li>
<p><a href="#CHDHBJJI">Receiving Messages from a Destination Using a Transformation</a></p>
</li>
</ul>
<a id="i1007162"></a>
<div id="ADQUE3135" class="sect2">
<h3 class="sect2"><a id="sthref1577"></a><a id="sthref1578"></a><a id="sthref1579"></a>Using a Message Consumer by Specifying Timeout</h3>
<pre>public javax.jms.Message receive(long timeout)
                          throws JMSException
</pre>
<p>This method receives a message using a message <a href="glossary.htm#CBAJDFJA"><span class="xrefglossterm">consumer</span></a> by specifying timeout.</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t14">Parameter</th>
<th class="cellalignment1001" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t14" headers="r1c1-t14"><code>timeout</code></td>
<td class="cellalignment1002" headers="r2c1-t14 r1c2-t14">Timeout value in milliseconds</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div id="ADQUE3136" class="example">
<p class="titleinexample"><a id="CHDBEGDJ"></a>Example 15-6 Using a Message Consumer by Specifying Timeout</p>
<pre>TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              t_sess    = null;
TopicSession              jms_sess;
Topic                     shipped_orders;
int                       myport = 5521;

/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
   &#34;MYHOSTNAME&#34;, &#34;MYSID&#34;, myport, &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
   &#34;WS&#34;, &#34;Shipped_Orders_Topic&#34;);

/* create a subscriber, specifying the correct CustomDatumFactory  and
selector */
subscriber1 = jms_sess.createDurableSubscriber(
   shipped_orders, &#39;WesternShipping&#39;, 
   &#34; priority &gt; 1 and tab.user_data.region like &#39;WESTERN %&#39;&#34;,
   false, AQjmsAgent.getFactory());
/* receive, blocking for 30 seconds if there were no messages */
Message = subscriber.receive(30000);
</pre></div>
<!-- class="example" -->
<div id="ADQUE3137" class="example">
<p class="titleinexample"><a id="sthref1580"></a>Example 15-7 JMS: Blocking Until a Message Arrives</p>
<pre>public BolOrder get_new_order1(QueueSession jms_session)
 {
   Queue            queue;
   QueueReceiver    qrec;
   ObjectMessage    obj_message;
   BolCustomer      customer;
   BolOrder         new_order = null;
   String           state;

   try
   {
   /* get a handle to the new_orders queue */
    queue = ((AQjmsSession) jms_session).getQueue(&#34;OE&#34;, &#34;OE_neworders_que&#34;);
    qrec = jms_session.createReceiver(queue);

    /* wait for a message to show up in the queue */
    obj_message = (ObjectMessage)qrec.receive();
    new_order = (BolOrder)obj_message.getObject();
    customer = new_order.getCustomer();
    state    = customer.getState();
    System.out.println(&#34;Order:  for customer &#34; + customer.getName()); 
   }
  catch (JMSException ex)
   {
     System.out.println(&#34;Exception: &#34; + ex);
   }
   return new_order;
 }
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="i1006074"></a>
<div id="ADQUE3138" class="sect2">
<h3 class="sect2"><a id="sthref1581"></a><a id="sthref1582"></a><a id="sthref1583"></a>Using a Message Consumer Without Waiting</h3>
<pre>public javax.jms.Message receiveNoWait()
                                throws JMSException
</pre>
<p>This method receives a message using a message consumer without waiting.</p>
<div id="ADQUE3139" class="example">
<p class="titleinexample"><a id="sthref1584"></a>Example 15-8 JMS: Nonblocking Messages</p>
<pre>public BolOrder poll_new_order3(QueueSession jms_session)
 {
   Queue            queue;
   QueueReceiver    qrec;
   ObjectMessage    obj_message;
   BolCustomer      customer;
   BolOrder         new_order = null;
   String           state;

   try
   {
    /* get a handle to the new_orders queue */
    queue = ((AQjmsSession) jms_session).getQueue(&#34;OE&#34;, &#34;OE_neworders_que&#34;);
    qrec = jms_session.createReceiver(queue);

    /* check for a message to show in the queue */
    obj_message = (ObjectMessage)qrec.receiveNoWait();
    new_order = (BolOrder)obj_message.getObject();
    customer = new_order.getCustomer();
    state    = customer.getState();

    System.out.println(&#34;Order:  for customer &#34; + customer.getName()); 
   }
   catch (JMSException ex)
   {
     System.out.println(&#34;Exception: &#34; + ex);
   }
   return new_order;
 }
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CHDHBJJI"></a>
<div id="ADQUE3140" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref1585"></a><a id="sthref1586"></a><a id="sthref1587"></a>Receiving Messages from a Destination Using a Transformation</h3>
<p>A transformation can be applied when receiving a message from a queue or topic. The transformation is applied to the message before returning it to JMS application.</p>
<p>The transformation can be specified using the <code>setTransformation()</code> interface of the <code>AQjmsQueueReceiver</code>, <code>AQjmsTopicSubscriber</code> or <code>AQjmsTopicReceiver</code>.</p>
<div id="ADQUE3141" class="example">
<p class="titleinexample"><a id="sthref1588"></a>Example 15-9 JMS: Receiving Messages from a Destination Using a Transformation</p>
<p>Assume that the Western Shipping application retrieves messages from the OE_bookedorders_topic. It specifies the transformation <code>OE2WS</code> to retrieve the message as the Oracle object type <code>WS_order</code>. Assume that the WSOrder Java class has been generated by Jpublisher to map to the Oracle object <code>WS.WS_order</code>:</p>
<pre>public AQjmsAdtMessage retrieve_bookedorders(TopicSession jms_session)
  AQjmsTopicReceiver  receiver;
  Topic               topic;
  Message             msg = null;

  try
  {
    /* get a handle to the OE_bookedorders_topic */
    topic = ((AQjmsSession)jms_session).getTopic(&#34;OE&#34;, &#34;OE_bookedorders_topic&#34;);

    /* Create a receiver for WShip */
    receiver = ((AQjmsSession)jms_session).createTopicReceiver(
       topic, &#34;WShip, null, WSOrder.getFactory());

    /* set the transformation in the publisher */
    receiver.setTransformation(&#34;OE2WS&#34;);
    msg = receiver.receive(10);
  }
  catch (JMSException ex)
  {
     System.out.println(&#34;Exception :&#34;, ex);
  }
       return (AQjmsAdtMessage)msg;
}
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CACFHCHC"></a>
<div id="ADQUE3142" class="sect1">
<h2 class="sect1"><a id="sthref1589"></a><a id="sthref1590"></a><a id="sthref1591"></a>Specifying the Navigation Mode for Receiving Messages</h2>
<pre>public void setNavigationMode(int mode)
                       throws JMSException
</pre>
<p>This method specifies the navigation mode for receiving messages. It has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t15">Parameter</th>
<th class="cellalignment1001" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t15" headers="r1c1-t15"><code>mode</code></td>
<td class="cellalignment1002" headers="r2c1-t15 r1c2-t15">New value of the navigation mode</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div id="ADQUE3143" class="example">
<p class="titleinexample"><a id="CHDECEHH"></a>Example 15-10 Specifying Navigation Mode for Receiving Messages</p>
<pre>TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              t_sess    = null;
TopicSession              jms_sess;
Topic                     shipped_orders;
int                       myport = 5521;

/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
   &#34;MYHOSTNAME&#34;, &#34;MYSID&#34;, myport, &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
shipped_orders = ((AQjmsSession )jms_sess).getTopic(&#34;WS&#34;, &#34;Shipped_Orders_Topic&#34;);

/* create a subscriber, specifying the correct CustomDatumFactory and selector */
subscriber1 = jms_sess.createDurableSubscriber(
   shipped_orders, &#39;WesternShipping&#39;, 
   &#34;priority &gt; 1 and tab.user_data.region like &#39;WESTERN %&#39;&#34;, false,
   AQjmsAgent.getFactory());
subscriber1.setNavigationMode(AQjmsConstants.NAVIGATION_FIRST_MESSAGE);

/* get message for the subscriber, returning immediately if there was nomessage */
Message = subscriber.receive();
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="i1006171"></a>
<div id="ADQUE3144" class="sect1">
<h2 class="sect1">Receiving a Message Asynchronously</h2>
<p>You can receive a message asynchronously two ways:</p>
<ul>
<li>
<p><a href="#i1007210">Specifying a Message Listener at the Message Consumer</a></p>
</li>
<li>
<p><a href="#i1006262">Specifying a Message Listener at the Session</a></p>
</li>
</ul>
<a id="i1007210"></a>
<div id="ADQUE3145" class="sect2">
<h3 class="sect2"><a id="sthref1592"></a><a id="sthref1593"></a>Specifying a Message Listener at the Message Consumer</h3>
<pre>public void setMessageListener(javax.jms.MessageListener myListener)
                        throws JMSException
</pre>
<p>This method specifies a message listener at the message consumer. It has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t16">Parameter</th>
<th class="cellalignment1001" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t16" headers="r1c1-t16"><code>myListener</code></td>
<td class="cellalignment1002" headers="r2c1-t16 r1c2-t16">Sets the consumer message listener</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div id="ADQUE3146" class="example">
<p class="titleinexample"><a id="CHDGEEAJ"></a>Example 15-11 Specifying Message Listener at Message Consumer</p>
<pre>TopicConnectionFactory    tc_fact   = null;
TopicConnection           t_conn    = null;
TopicSession              t_sess    = null;
TopicSession              jms_sess;
Topic                     shipped_orders;
int                       myport = 5521;
MessageListener           mLis = null;

/* create connection and session */
tc_fact = AQjmsFactory.getTopicConnectionFactory(
   &#34;MYHOSTNAME&#34;, &#34;MYSID&#34;, myport, &#34;oci8&#34;);
t_conn = tc_fact.createTopicConnection(&#34;jmstopic&#34;, &#34;jmstopic&#34;);
jms_sess = t_conn.createTopicSession(true, Session.CLIENT_ACKNOWLEDGE);
shipped_orders = ((AQjmsSession )jms_sess).getTopic(
    &#34;WS&#34;, &#34;Shipped_Orders_Topic&#34;);

/* create a subscriber, specifying the correct CustomDatumFactory and selector */
subscriber1 = jms_sess.createDurableSubscriber(
   shipped_orders, &#39;WesternShipping&#39;,
   &#34;priority &gt; 1 and tab.user_data.region like &#39;WESTERN %&#39;&#34;,
   false, AQjmsAgent.getFactory());
mLis = new myListener(jms_sess, &#34;foo&#34;);

/* get message for the subscriber, returning immediately if there was nomessage */
subscriber.setMessageListener(mLis);
The definition of the myListener class
import oracle.AQ.*;
import oracle.jms.*;
import javax.jms.*;
import java.lang.*;
import java.util.*;
public class myListener implements MessageListener
{
   TopicSession   mySess;
   String         myName;
   /* constructor */
   myListener(TopicSession t_sess, String t_name)
   {
      mySess = t_sess;
      myName = t_name;
   }
   public onMessage(Message m)
   {
      System.out.println(&#34;Retrieved message with correlation: &#34; ||
m.getJMSCorrelationID());
      try{
        /* commit the dequeue */
        mySession.commit();
      } catch (java.sql.SQLException e)
      {System.out.println(&#34;SQL Exception on commit&#34;); }
   }
}
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="i1006262"></a>
<div id="ADQUE3147" class="sect2">
<h3 class="sect2"><a id="sthref1594"></a><a id="sthref1595"></a><a id="sthref1596"></a>Specifying a Message Listener at the Session</h3>
<pre>public void setMessageListener(javax.jms.MessageListener listener)
                        throws JMSException
</pre>
<p>This method specifies a message listener at the session.</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t17">Parameter</th>
<th class="cellalignment1001" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t17" headers="r1c1-t17"><code>listener</code></td>
<td class="cellalignment1002" headers="r2c1-t17 r1c2-t17">Message listener to associate with this session</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1006292"></a>
<div id="ADQUE3148" class="sect1">
<h2 class="sect1">Getting Message ID</h2>
<p>This section contains these topics:</p>
<ul>
<li>
<p><a href="#i1006322">Getting the Correlation Identifier</a></p>
</li>
<li>
<p><a href="#CACEFECC">Getting the Message Identifier</a></p>
</li>
</ul>
<a id="i1006322"></a>
<div id="ADQUE3149" class="sect2">
<h3 class="sect2"><a id="sthref1597"></a><a id="sthref1598"></a><a id="sthref1599"></a><a id="sthref1600"></a>Getting the Correlation Identifier</h3>
<pre>public java.lang.String getJMSCorrelationID()
          throws JMSException
</pre>
<p><code>AQjmsMessage.getJMSCorrelationID()</code> gets the correlation identifier of a message.</p>
</div>
<!-- class="sect2" -->
<a id="CACEFECC"></a>
<div id="ADQUE3150" class="sect2">
<h3 class="sect2"><a id="sthref1601"></a><a id="sthref1602"></a><a id="sthref1603"></a><a id="sthref1604"></a>Getting the Message Identifier</h3>
<pre>public byte[] getJMSCorrelationIDAsBytes()
          throws JMSException
</pre>
<p><code>AQjmsMessage.getJMSMessageID()</code> gets the message identifier of a message as bytes or a string.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1006330"></a>
<div id="ADQUE3151" class="sect1">
<h2 class="sect1"><a id="sthref1605"></a><a id="sthref1606"></a>Getting JMS Message Properties</h2>
<p>This section contains these topics:</p>
<ul>
<li>
<p><a href="#i1006380">Getting a Boolean Message Property</a></p>
</li>
<li>
<p><a href="#CACGGEII">Getting a String Message Property</a></p>
</li>
<li>
<p><a href="#i1006395">Getting an Integer Message Property</a></p>
</li>
<li>
<p><a href="#i1006404">Getting a Double Message Property</a></p>
</li>
<li>
<p><a href="#i1006408">Getting a Float Message Property</a></p>
</li>
<li>
<p><a href="#i1006412">Getting a Byte Message Property</a></p>
</li>
<li>
<p><a href="#CACBEAAG">Getting a Long Message Property</a></p>
</li>
<li>
<p><a href="#i1006420">Getting a Short Message Property</a></p>
</li>
<li>
<p><a href="#i1006424">Getting an Object Message Property</a></p>
</li>
</ul>
<a id="i1006380"></a>
<div id="ADQUE3152" class="sect2">
<h3 class="sect2"><a id="sthref1607"></a><a id="sthref1608"></a>Getting a Boolean Message Property</h3>
<pre>public boolean getBooleanProperty(java.lang.String name)
          throws JMSException
</pre>
<p><code>AQjmsMessage.getBooleanProperty()</code> gets a message property as Boolean. It has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t18">Parameter</th>
<th class="cellalignment1001" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t18" headers="r1c1-t18"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t18 r1c2-t18">Name of the Boolean property</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" -->
<a id="CACGGEII"></a>
<div id="ADQUE3153" class="sect2">
<h3 class="sect2"><a id="sthref1609"></a><a id="sthref1610"></a>Getting a String Message Property</h3>
<pre>public java.lang.String getStringProperty(java.lang.String name)
          throws JMSException
</pre>
<p><code>AQjmsMessage.getStringProperty()</code> gets a message property as string. It has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t19">Parameter</th>
<th class="cellalignment1001" id="r1c2-t19">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t19" headers="r1c1-t19"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t19 r1c2-t19">Name of the string property</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" -->
<a id="i1006395"></a>
<div id="ADQUE3154" class="sect2">
<h3 class="sect2"><a id="sthref1611"></a><a id="sthref1612"></a>Getting an Integer Message Property</h3>
<pre>public int getIntProperty(java.lang.String name)
          throws JMSException
</pre>
<p><code>AQjmsMessage.getIntProperty()</code> gets a message property as integer. It has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t20">Parameter</th>
<th class="cellalignment1001" id="r1c2-t20">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t20" headers="r1c1-t20"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t20 r1c2-t20">Name of the integer property</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" -->
<a id="i1006404"></a>
<div id="ADQUE3155" class="sect2">
<h3 class="sect2"><a id="sthref1613"></a><a id="sthref1614"></a>Getting a Double Message Property</h3>
<pre>public double getDoubleProperty(java.lang.String name)
                         throws JMSException
</pre>
<p><code>AQjmsMessage.getDoubleProperty()</code> gets a message property as double. It has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t21">Parameter</th>
<th class="cellalignment1001" id="r1c2-t21">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t21" headers="r1c1-t21"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t21 r1c2-t21">Name of the double property</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" -->
<a id="i1006408"></a>
<div id="ADQUE3156" class="sect2">
<h3 class="sect2"><a id="sthref1615"></a><a id="sthref1616"></a>Getting a Float Message Property</h3>
<pre>public float getFloatProperty(java.lang.String name)
          throws JMSException
</pre>
<p><code>AQjmsMessage.getFloatProperty()</code> gets a message property as float. It has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t22">Parameter</th>
<th class="cellalignment1001" id="r1c2-t22">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t22" headers="r1c1-t22"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t22 r1c2-t22">Name of the float property</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" -->
<a id="i1006412"></a>
<div id="ADQUE3157" class="sect2">
<h3 class="sect2"><a id="sthref1617"></a><a id="sthref1618"></a>Getting a Byte Message Property</h3>
<pre>public byte getByteProperty(java.lang.String name)
          throws JMSException
</pre>
<p><code>AQjmsMessage.getByteProperty()</code> gets a message property as byte. It has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t23">Parameter</th>
<th class="cellalignment1001" id="r1c2-t23">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t23" headers="r1c1-t23"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t23 r1c2-t23">Name of the byte property</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" -->
<a id="CACBEAAG"></a>
<div id="ADQUE3158" class="sect2">
<h3 class="sect2"><a id="sthref1619"></a><a id="sthref1620"></a>Getting a Long Message Property</h3>
<pre>public long getLongProperty(java.lang.String name)
          throws JMSException
</pre>
<p><code>AQjmsMessage.getLongProperty()</code> gets a message property as long. It has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t24">Parameter</th>
<th class="cellalignment1001" id="r1c2-t24">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t24" headers="r1c1-t24"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t24 r1c2-t24">Name of the long property</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" -->
<a id="i1006420"></a>
<div id="ADQUE3159" class="sect2">
<h3 class="sect2"><a id="sthref1621"></a><a id="sthref1622"></a>Getting a Short Message Property</h3>
<pre>public short getShortProperty(java.lang.String name)
                       throws JMSException
</pre>
<p>AQjmsMessage.getShortProperty() gets a message property as short. It has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t25">Parameter</th>
<th class="cellalignment1001" id="r1c2-t25">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t25" headers="r1c1-t25"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t25 r1c2-t25">Name of the short property</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" -->
<a id="i1006424"></a>
<div id="ADQUE3160" class="sect2">
<h3 class="sect2"><a id="sthref1623"></a><a id="sthref1624"></a>Getting an Object Message Property</h3>
<pre>public java.lang.Object getObjectProperty(java.lang.String name)
                                   throws JMSException
</pre>
<p><code>AQjmsMessage.getObjectProperty()</code> gets a message property as object. It has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t26">Parameter</th>
<th class="cellalignment1001" id="r1c2-t26">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t26" headers="r1c1-t26"><code>name</code></td>
<td class="cellalignment1002" headers="r2c1-t26 r1c2-t26">Name of the object property</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<div id="ADQUE3161" class="example">
<p class="titleinexample"><a id="sthref1625"></a>Example 15-12 Getting Message Property as an Object</p>
<pre>TextMessage message;
message.getObjectProperty(&#34;empid&#34;, new Integer(1000);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CACEGGDH"></a>
<div id="ADQUE3162" class="sect1">
<h2 class="sect1">Closing and Shutting Down</h2>
<p>This section contains these topics:</p>
<ul>
<li>
<p><a href="#i1006490">Closing a MessageProducer</a></p>
</li>
<li>
<p><a href="#i1006494">Closing a Message Consumer</a></p>
</li>
<li>
<p><a href="#i1006498">Stopping a JMS Connection</a></p>
</li>
<li>
<p><a href="#i1006504">Closing a JMS Session</a></p>
</li>
<li>
<p><a href="#CACFBBBB">Closing a JMS Connection</a></p>
</li>
</ul>
<a id="i1006490"></a>
<div id="ADQUE3163" class="sect2">
<h3 class="sect2"><a id="sthref1626"></a><a id="sthref1627"></a><a id="sthref1628"></a><a id="sthref1629"></a>Closing a MessageProducer</h3>
<pre>public void close()
           throws JMSException
</pre>
<p><code>AQjmsProducer.close()</code> closes a <code>MessageProducer</code>.</p>
</div>
<!-- class="sect2" -->
<a id="i1006494"></a>
<div id="ADQUE3164" class="sect2">
<h3 class="sect2"><a id="sthref1630"></a><a id="sthref1631"></a><a id="sthref1632"></a>Closing a Message Consumer</h3>
<pre>public void close()
           throws JMSException
</pre>
<p><code>AQjmsConsumer.close()</code> closes a message consumer.</p>
</div>
<!-- class="sect2" -->
<a id="i1006498"></a>
<div id="ADQUE3165" class="sect2">
<h3 class="sect2"><a id="sthref1633"></a><a id="sthref1634"></a>Stopping a JMS Connection</h3>
<pre>public void stop()
          throws JMSException
</pre>
<p><code>AQjmsConnection.stop()</code> stops a JMS connection.</p>
</div>
<!-- class="sect2" -->
<a id="i1006504"></a>
<div id="ADQUE3166" class="sect2">
<h3 class="sect2"><a id="sthref1635"></a><a id="sthref1636"></a>Closing a JMS Session</h3>
<pre>public void close()
           throws JMSException
</pre>
<p><code>AQjmsSession.close()</code> closes a JMS session.</p>
</div>
<!-- class="sect2" -->
<a id="CACFBBBB"></a>
<div id="ADQUE3167" class="sect2">
<h3 class="sect2"><a id="sthref1637"></a><a id="sthref1638"></a>Closing a JMS Connection</h3>
<pre>public void close()
          throws JMSException
</pre>
<p><code>AQjmsConnection.close()</code> closes a JMS connection and releases all resources allocated on behalf of the connection. Because the JMS provider typically allocates significant resources outside the JVM on behalf of a connection, clients should close them when they are not needed. Relying on garbage collection to eventually reclaim these resources may not be timely enough.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1006514"></a>
<div id="ADQUE3168" class="sect1">
<h2 class="sect1"><a id="sthref1639"></a><a id="sthref1640"></a>Troubleshooting</h2>
<p>This section contains these topics:</p>
<ul>
<li>
<p><a href="#i1006579">Getting a JMS Error Code</a></p>
</li>
<li>
<p><a href="#i1006583">Getting a JMS Error Number</a></p>
</li>
<li>
<p><a href="#i1006591">Getting an Exception Linked to a JMS Exception</a></p>
</li>
<li>
<p><a href="#i1006597">Printing the Stack Trace for a JMS Exception</a></p>
</li>
<li>
<p><a href="#i1006601">Setting an Exception Listener</a></p>
</li>
<li>
<p><a href="#i1006617">Getting an Exception Listener</a></p>
</li>
</ul>
<a id="i1006579"></a>
<div id="ADQUE3169" class="sect2">
<h3 class="sect2"><a id="sthref1641"></a><a id="sthref1642"></a>Getting a JMS Error Code</h3>
<pre>public java.lang.String getErrorCode()
</pre>
<p><code>AQjmsException.getErrorCode()</code> gets the error code for a JMS exception.</p>
</div>
<!-- class="sect2" -->
<a id="i1006583"></a>
<div id="ADQUE3170" class="sect2">
<h3 class="sect2"><a id="sthref1643"></a><a id="sthref1644"></a>Getting a JMS Error Number</h3>
<pre>public int getErrorNumber()
</pre>
<p><code>AQjmsException.getErrorNumber()</code> gets the error number for a JMS exception.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
This method will be deprecated in a future release. Use <code>getErrorCode()</code> instead.</div>
</div>
<!-- class="sect2" -->
<a id="i1006591"></a>
<div id="ADQUE3171" class="sect2">
<h3 class="sect2"><a id="sthref1645"></a><a id="sthref1646"></a>Getting an Exception Linked to a JMS Exception</h3>
<pre>public java.lang.String getLinkString()
</pre>
<p><code>AQjmsException.getLinkString()</code> gets the exception linked to a JMS exception. In general, this contains the SQL exception raised by the database.</p>
</div>
<!-- class="sect2" -->
<a id="i1006597"></a>
<div id="ADQUE3172" class="sect2">
<h3 class="sect2"><a id="sthref1647"></a><a id="sthref1648"></a>Printing the Stack Trace for a JMS Exception</h3>
<pre>public void printStackTrace(java.io.PrintStream s)
</pre>
<p><code>AQjmsException.printStackTrace()</code> prints the stack trace for a JMS exception.</p>
</div>
<!-- class="sect2" -->
<a id="i1006601"></a>
<div id="ADQUE3173" class="sect2">
<h3 class="sect2"><a id="sthref1649"></a>Setting an Exception Listener</h3>
<pre>public void setExceptionListener(javax.jms.ExceptionListener listener)
                          throws JMSException
</pre>
<p><code>AQjmsConnection.setExceptionListener()</code> specifies an exception listener for a connection. It has the following parameter:</p>
<div class="inftblhruleinformal">
<table class="cellalignment1000" title="Parameter Descriptions" summary="The first column is the name of a parameter. The second column describes it." dir="ltr">
<thead>
<tr class="cellalignment994">
<th class="cellalignment1001" id="r1c1-t28">Parameter</th>
<th class="cellalignment1001" id="r1c2-t28">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment994">
<td class="cellalignment1002" id="r2c1-t28" headers="r1c1-t28"><code>listener</code></td>
<td class="cellalignment1002" headers="r2c1-t28 r1c2-t28">Exception listener</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<p>If an exception listener has been registered, then it is informed of any serious problem detected for a connection. This is accomplished by calling the listener <code>onException()</code> method, passing it a JMS exception describing the problem. This allows a JMS client to be notified of a problem asynchronously. Some connections only consume messages, so they have no other way to learn the connection has failed.</p>
<div id="ADQUE3174" class="example">
<p class="titleinexample"><a id="sthref1650"></a>Example 15-13 Specifying Exception Listener for Connection</p>
<pre>//register an exception listener
Connection jms_connection;
jms_connection.setExceptionListener(
    new ExceptionListener() {
        public void onException (JMSException jmsException) {
            System.out.println(&#34;JMS-EXCEPTION: &#34; + jmsException.toString());
        }
    };
  );
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="i1006617"></a>
<div id="ADQUE3175" class="sect2">
<h3 class="sect2"><a id="sthref1651"></a>Getting an Exception Listener</h3>
<pre>public javax.jms.ExceptionListener getExceptionListener()
                                                 throws JMSException

</pre>
<p><code>AQjmsConnection.getExceptionListener()</code> gets the exception listener for the connection.</p>
<p><a href="#CHDIDGIB">Example 15-14</a> demonstrates how to use <code>ExceptionListener</code> with <code>MessageListener</code>. Ensure that the following conditions are met:</p>
<ul>
<li>
<p>The user <code>jmsuser</code> with password <code>jmsuser</code> is created in the database, with appropriate privileges.</p>
</li>
<li>
<p>The queue <code>demoQueue</code> is created and started.</p>
</li>
</ul>
<p>This example demonstrates how to make the MessageListener asynchronously receive the messages, where the exception listener recreates the JMS objects in case there is a connection restart.</p>
<div id="ADQUE3691" class="example">
<p class="titleinexample"><a id="CHDIDGIB"></a>Example 15-14 Using ExceptionListener with MessageListener</p>
<pre>import java.util.Enumeration;
import java.util.Properties;
 
import javax.jms.Connection;
import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.MessageConsumer;
import javax.jms.MessageProducer;
import javax.jms.Queue;
import javax.jms.QueueBrowser;
import javax.jms.Session;
import javax.jms.TextMessage;
 
import oracle.jms.AQjmsConnectionFactory;
import oracle.jms.AQjmsFactory;
import oracle.jms.AQjmsSession;
 
public class JMSDemo {
 
  static String queueName = &#34;demoQueue&#34;;
 
  static String queueOwner = &#34;jmsuser&#34;;
 
  static String queueOwnerPassword = &#34;jmsuser&#34;;
 
  static Connection connection = null;
 
  static int numberOfMessages = 25000;
 
  static int messageCount = 0;
 
  static String jdbcURL = &#34;&#34;;
 
  public static void main(String args[]) {
    try {
      jdbcURL = System.getProperty(&#34;JDBC_URL&#34;);
 
      if (jdbcURL == null)
        System.out
            .println(&#34;The system property JDBC_URL has not been set, &#34; +
                        &#34;usage:java -DJDBC_URL=xxx filename &#34;);
      else {
        JMSDemo demo = new JMSDemo();
        demo.performJmsOperations();
      }
    } catch (Exception exception) {
      System.out.println(&#34;Exception : &#34; + exception);
      exception.printStackTrace();
    } finally {
      try {
        if (connection != null)
          connection.close();
      } catch (Exception exc) {
        exc.printStackTrace();
      }
    }
    System.out.println(&#34;\nEnd of Demo aqjmsdemo11.&#34;);
  }
 
  public void performJmsOperations() {
    try {
      connection = getConnection(jdbcURL);
      Session session = connection.createSession(false,
          Session.AUTO_ACKNOWLEDGE);
      Queue queue = session.createQueue(queueName);
 
      // remove the messages from the Queue
      drainQueue(queueName, queueOwner, jdbcURL, true);
 
      // set the exception listener on the Connection
      connection.setExceptionListener(new DemoExceptionListener());
 
      MessageProducer producer = session.createProducer(queue);
      TextMessage textMessage = null;
 
      System.out.println(&#34;Sending &#34; + numberOfMessages + &#34; messages to queue &#34;
          + queueName);
      for (int i = 0; i &lt; numberOfMessages; i++) {
        textMessage = session.createTextMessage();
        textMessage.setText(&#34;Sample message text&#34;);
        producer.send(textMessage);
      }
 
      MessageConsumer consumer = session.createConsumer(queue);
      System.out.println(&#34;Setting the message listener ...&#34;);
      consumer.setMessageListener(new DemoMessageListener());
      connection.start();
 
      // Introduce a long wait to allow the listener to receive all the messages
      while (messageCount &lt; numberOfMessages) {
        try {
          Thread.sleep(5000);
        } catch (InterruptedException interruptedException) {
        }
      }
    } catch (JMSException jmsException) {
      jmsException.printStackTrace();
    }
  }
 
  // Sample message listener
  static class DemoMessageListener implements javax.jms.MessageListener {
 
    public void onMessage(Message message) {
      try {
        System.out.println(&#34;Message listener received message with JMSMessageID &#34;
                + message.getJMSMessageID());
        messageCount++;
      } catch (JMSException jmsException) {
        System.out.println(&#34;JMSException &#34; + jmsException.getMessage());
      }
    }
  }
 
  // sample exception listener
  static class DemoExceptionListener implements javax.jms.ExceptionListener {
 
    public void onException(JMSException jmsException) {      
      try {
        // As a first step close the connection
        if (connection != null)
          connection.close();
      } catch (JMSException exception) {}
 
      try {
        System.out.println(&#34;Re-create the necessary JMS objects ...&#34;);
        connection = getConnection(jdbcURL);
        connection.start();
        Session session = connection.createSession(false,
            Session.AUTO_ACKNOWLEDGE);
        Queue queue = session.createQueue(queueName);
        MessageConsumer consumer = session.createConsumer(queue);
        consumer.setMessageListener(new DemoMessageListener());
      } catch (JMSException newJmsException) {
        newJmsException.printStackTrace();
      }
    }
  }
 
  // Utility method to get a connection
  static Connection getConnection(String jdbcUrl) throws JMSException {
    Properties prop = new Properties();
    prop.put(&#34;user&#34;, queueOwner);
    prop.put(&#34;password&#34;, queueOwnerPassword);
 
    AQjmsConnectionFactory fact = (AQjmsConnectionFactory) AQjmsFactory
        .getConnectionFactory(jdbcUrl, prop);
    Connection conn = fact.createConnection();
    return conn;
  }
 
  // Utility method to remove the messages from the queue
  static void drainQueue(String queueName, String queueOwner, String jdbcUrl,
      boolean debugInfo) {
    Connection connection = null;
    Session session = null;
    long timeout = 10000;
    int count = 0;
    Message message = null;
    try {
      connection = getConnection(jdbcUrl);
      connection.start();
      session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
      Queue queue = ((AQjmsSession) session).getQueue(queueOwner, queueName);
 
      MessageConsumer messageConsumer = session.createConsumer(queue);
      QueueBrowser browser = session.createBrowser(queue);
      Enumeration enumeration = browser.getEnumeration();
 
      if (enumeration.hasMoreElements()) {
        while ((message = messageConsumer.receive(timeout)) != null) {
          if (debugInfo) {
            count++;
          }
        }
      }
      messageConsumer.close();
      if (debugInfo) {
        System.out.println(&#34;Removed &#34; + count + &#34; messages from the queue : &#34;
            + queueName);
      }
    } catch (JMSException jmsException) {
      jmsException.printStackTrace();
    } finally {
      try {
        if (session != null)
          session.close();
 
        if (connection != null)
          connection.close();
      } catch (Exception exception) {
 
      }
    }
  }
 
}
</pre></div>
<!-- class="example" -->
<div id="ADQUE3176" class="example">
<p class="titleinexample"><a id="sthref1652"></a>Example 15-15 Getting the Exception Listener for the Connection</p>
<pre>//Get the exception listener
Connection jms_connection;
ExceptionListener el = jms_connection.getExceptionListener();
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment993">
<tr>
<td class="cellalignment1002">
<table class="cellalignment998">
<tr>
<td class="cellalignment997"><a href="jm_pblsh.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment997"><a href="jm_exmpl.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1004">
<table class="cellalignment996">
<tr>
<td class="cellalignment997"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment997"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment997"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment997"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment997"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment997"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>