<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-107478"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/TimesTen%20Cache%20Architecture%20and%20Components"></a><title>TimesTen Cache Architecture and Components</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 726"/>
<meta name="dcterms.created" content="2014-06-06T13:40:25Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="TimesTen Application-Tier Database Cache Introduction"/>
<meta name="dcterms.identifier" content="E21631-06"/>
<meta name="dcterms.isVersionOf" content="TTCIN"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2012, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="casestudies.htm" title="Previous" type="text/html"/>
<link rel="Next" href="concurrent.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E21631-06.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">7/14</span> <!-- End Header -->
<div id="TTCIN150" class="chapter"><a id="CHDFCAJC"></a>
<h1 class="chapter"><span class="secnum">3</span> TimesTen Cache Architecture and Components</h1>
<p>This chapter includes the following topics:</p>
<ul>
<li>
<p><a href="#BAABJBEH">Architectural overview</a></p>
</li>
<li>
<p><a href="#BAAEBJEF">Shared libraries</a></p>
</li>
<li>
<p><a href="#BAAJCFEC">Memory-resident data structures</a></p>
</li>
<li>
<p><a href="#BAACHBGI">Database processes</a></p>
</li>
<li>
<p><a href="#BAADFJEC">Administrative programs</a></p>
</li>
<li>
<p><a href="#BAAJEICI">Checkpoint and transaction log files</a></p>
</li>
<li>
<p><a href="#BAADAAJE">Cached data</a></p>
</li>
<li>
<p><a href="#BAABECIB">Replication</a></p>
</li>
<li>
<p><a href="#BAAHBFIF">TimesTen connection options</a></p>
</li>
</ul>
<a id="BAABJBEH"></a>
<div id="TTCIN151" class="sect1">
<h2 class="sect1">Architectural overview<a id="sthref65"></a><a id="sthref66"></a><a id="sthref67"></a><a id="sthref68"></a></h2>
<p>This section describes the architecture of the TimesTen Application-Tier Database Cache (TimesTen Cache). The architecture of the Oracle TimesTen In-Memory Database is the same as the architecture of the TimesTen Cache except that the Oracle database and cache agent are not included. <a href="#BABJHAHC">Figure 3-1</a> shows the architecture of the TimesTen Cache.</p>
<div id="TTCIN152" class="figure">
<p class="titleinfigure"><a id="BABJHAHC"></a>Figure 3-1 TimesTen Application-Tier Database Cache architecture</p>
<img width="327" height="324" src="img/cachereparch.gif" alt="Description of Figure 3-1 follows"/><br/>
<a id="sthref69" href="img_text/cachereparch.htm">Description of &#34;Figure 3-1 TimesTen Application-Tier Database Cache architecture&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>The architectural components include shared libraries, memory-resident data structures, database processes, and administrative programs. Memory-resident data structures include tables, indexes, system tables, locks, cursors, compiled commands and temporary indexes. The application can connect to the TimesTen Cache or TimesTen database by direct link and by client/server connections.</p>
<p>Replication agents receive information from master databases and send information to subscriber databases. The cache agent performs all asynchronous data transfers between cache groups in the TimesTen Cache and the Oracle database.</p>
<p>These components are described in subsequent sections.</p>
</div>
<!-- class="sect1" -->
<a id="BAAEBJEF"></a>
<div id="TTCIN153" class="sect1">
<h2 class="sect1">Shared libraries<a id="sthref70"></a></h2>
<p>The routines that implement the TimesTen functionality are embodied in a set of shared libraries that developers link with their applications and execute as a part of the application&#39;s process. This shared library approach is in contrast to a more conventional RDBMS, which is implemented as a collection of daemon processes to which applications connect, typically over a client/server network. Applications can also use a client/server connection to access a TimesTen Cache or TimesTen database, though in most cases the best performance can be realized with a directly linked application. See <a href="#BAAHBFIF">&#34;TimesTen connection options&#34;</a>.</p>
</div>
<!-- class="sect1" -->
<a id="BAAJCFEC"></a>
<div id="TTCIN154" class="sect1">
<h2 class="sect1">Memory-resident data structures<a id="sthref71"></a></h2>
<p>The TimesTen Cache or TimesTen database resides entirely in main memory at run time. It is maintained in shared memory segments provided by the operating system and contains all user data, indexes, system catalogs, log buffers, and temp space. Multiple applications can share one database, and a single application can access multiple databases on the same system.</p>
</div>
<!-- class="sect1" -->
<a id="BAACHBGI"></a>
<div id="TTCIN155" class="sect1">
<h2 class="sect1">Database processes<a id="sthref72"></a></h2>
<p>TimesTen assigns a separate background process to each database to perform operations including the following tasks:</p>
<ul>
<li>
<p>Loading the database into memory from a checkpoint file on disk</p>
</li>
<li>
<p>Recovering the database if it needs to be recovered after loading it into memory</p>
</li>
<li>
<p>Performing periodic checkpoints in the background against the active database</p>
</li>
<li>
<p>Detecting and handling deadlocks</p>
</li>
<li>
<p>Performing data aging</p>
</li>
<li>
<p>Writing log records to files</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="BAADFJEC"></a>
<div id="TTCIN156" class="sect1">
<h2 class="sect1">Administrative programs</h2>
<p>Utility programs are explicitly invoked by users, scripts, or applications to perform services such as interactive SQL, bulk copy, backup and restore, database migration and system monitoring.</p>
</div>
<!-- class="sect1" -->
<a id="BAAJEICI"></a>
<div id="TTCIN157" class="sect1">
<h2 class="sect1">Checkpoint and transaction log files<a id="sthref73"></a><a id="sthref74"></a></h2>
<p>Checkpoint files contain an image of the database in persistent storage on disk. TimesTen uses dual checkpoint files for additional safety, in case the system fails while a checkpoint operation is in progress. Changes to databases are captured in transaction logs that are periodically written to persistent storage on disk. If a database needs to be recovered, TimesTen merges the most recent database checkpoint file on disk with the completed transactions that are still in the transaction log files. Normal file systems are used for checkpoints and transaction log files.</p>
<p>See <a href="availability.htm#CHDDEEGE">&#34;Data Availability and Integrity&#34;</a> for more information.</p>
</div>
<!-- class="sect1" -->
<a id="BAADAAJE"></a>
<div id="TTCIN158" class="sect1">
<h2 class="sect1">Cached data<a id="sthref75"></a></h2>
<p>When the TimesTen Cache is used to cache portions of an Oracle database in a TimesTen in-memory database, a <span class="italic">cache group</span> is created to hold the cached data.</p>
<p>A <a id="sthref76"></a>cache group is a collection of one or more tables arranged in a logical hierarchy by using primary key and foreign key relationships. Each table in a cache group is related to an Oracle database table. A cache table can contain all rows and columns or a subset of the rows and columns in the related Oracle database table. You can create or modify cache groups by using SQL statements or by using Oracle SQL Developer. Cache groups support these features:</p>
<ul>
<li>
<p>Applications can read from and write to cache groups.</p>
</li>
<li>
<p>Cache groups can be refreshed from the Oracle database automatically or manually.</p>
</li>
<li>
<p>Updates to cache groups can be propagated to the Oracle database tables automatically or manually.</p>
</li>
<li>
<p>Changes to either the Oracle database tables or the cache group can be tracked automatically.</p>
</li>
</ul>
<p>When rows in a cache group are updated by applications, the corresponding rows in the Oracle database tables can be updated synchronously as part of the same transaction or asynchronously immediately afterward depending on the type of cache group. The asynchronous configuration produces significantly higher throughput and much faster application response times.</p>
<p>Changes that originate in the Oracle database tables are refreshed into the cache by the cache agent.</p>
<p>See <a href="cache.htm#CBBDAFJC">&#34;TimesTen Cache&#34;</a> for more information.</p>
</div>
<!-- class="sect1" -->
<a id="BAABECIB"></a>
<div id="TTCIN159" class="sect1">
<h2 class="sect1">Replication<a id="sthref77"></a></h2>
<p>TimesTen replication enables you to achieve near-continuous availability or workload distribution by sending updates between two or more hosts. A master host is configured to send updates and a subscriber host is configured to receive them. A host can be both a master and a subscriber in a bidirectional replication scheme. Time-based conflict detection and resolution are used to establish precedence in case the same data is updated in multiple locations at the same time.</p>
<p>TimesTen recommends the <a id="sthref78"></a><a id="sthref79"></a>active standby pair configuration for highest availability. It is the only replication configuration that you can use for replicating TimesTen Cache. An active standby pair includes an active database, a standby database, optional read-only subscriber databases, and the tables and cache groups that comprise the databases.</p>
<p>When replication is configured, a <span class="italic">replication agent</span> is started for each database, even if multiple databases exist on the same host. Each replication agent can send updates to one or more subscribers and to receive updates from one or more masters. Each of these connections is implemented as a separate thread of execution inside the replication agent process. Replication agents communicate through TCP/IP stream sockets.</p>
<p>For maximum performance, the replication agent detects updates to a database by monitoring the existing transaction log. It sends updates to the subscribers in batches, if possible. Only committed transactions are replicated. On the subscriber host, the replication agent updates the database through an efficient low-level interface, avoiding the overhead of the SQL layer.</p>
<p>See <a href="availability.htm#CHDJFEHJ">&#34;Replication&#34;</a> for more information about replication configurations.</p>
</div>
<!-- class="sect1" -->
<a id="BAAHBFIF"></a>
<div id="TTCIN160" class="sect1">
<h2 class="sect1">TimesTen connection options</h2>
<p>Applications can connect to a TimesTen database in one of the following ways:</p>
<ul>
<li>
<p><a href="#BAAGBJAC">Direct driver connection</a></p>
</li>
<li>
<p><a href="#BAADFDFD">Client/server connection</a></p>
</li>
<li>
<p><a href="#BAAFCFDD">Driver manager connection</a></p>
</li>
</ul>
<a id="BAAGBJAC"></a>
<div id="TTCIN161" class="sect2">
<h3 class="sect2">Direct driver connection<a id="sthref80"></a><a id="sthref81"></a><a id="sthref82"></a></h3>
<p>In a traditional database system, TCP/IP or another IPC mechanism is used by client applications to communicate with a database server process. All exchanges between client and server are sent over a TCP/IP connection. This IPC overhead adds substantial cost to all SQL operations and can be avoided in TimesTen by connecting the application directly to the TimesTen ODBC <span class="italic">direct driver</span>.</p>
<p>The ODBC direct driver is a library of ODBC and TimesTen routines that implement the database engine used to manage the databases. Java applications access the ODBC direct driver through the JDBC library. OCI applications access the ODBC direct driver through the OCI library.</p>
<p>An application can create a direct driver connection when it runs on the same machine as the TimesTen Cache or TimesTen database. In a direct driver connection, the ODBC driver directly loads the TimesTen Cache or TimesTen database into a shared memory segment. The application then uses the direct driver to access the memory image of the database. Because no inter-process communication (IPC) of any kind is required, a direct-driver connection provides extremely fast performance and is the preferred way for applications to access the TimesTen Cache or TimesTen database.</p>
</div>
<!-- class="sect2" -->
<a id="BAADFDFD"></a>
<div id="TTCIN162" class="sect2">
<h3 class="sect2">Client/server connection<a id="sthref83"></a><a id="sthref84"></a></h3>
<p>The TimesTen <span class="italic">client driver</span> and <span class="italic">server daemon</span> processes accommodate connections from remote client machines to databases across a network. The server daemon spawns a separate <span class="italic">server child process</span> for each client connection to the database.</p>
<p>Applications on a client machine issue ODBC, JDBC or OCI calls. These calls access a local ODBC <span class="italic">client driver</span> that communicates with a server child process on the TimesTen server machine. The server child process, in turn, issues native ODBC requests to the ODBC direct driver to access the TimesTen Cache or TimesTen database.</p>
<p>If the client and server reside on separate hosts in a network, they communicate by using sockets and TCP/IP. If both the client and server reside on the same machine, they can communicate more efficiently by using a shared memory segment as IPC.</p>
<p>Traditional database systems are typically structured in this client/server model, even when the application and the database are on the same system. Client/server communication adds extra cost to all database operations.</p>
</div>
<!-- class="sect2" -->
<a id="BAAFCFDD"></a>
<div id="TTCIN163" class="sect2">
<h3 class="sect2">Driver manager connection<a id="sthref85"></a><a id="sthref86"></a></h3>
<p>Applications can connect to the TimesTen Cache or TimesTen database through an ODBC <span class="italic">driver manager</span>, which is a database-independent interface that adds a layer of abstraction between the applications and the TimesTen database. In this way, the driver manager allows applications to be written to operate independently of the database and to use interfaces that are not directly supported by TimesTen. The use of a driver manager also enables a single process to have both direct and client connections to the database.</p>
<p>On Microsoft Windows systems, applications can connect to the MS ODBC driver manager to use a TimesTen Cache or TimesTen database along with data sources from other vendors. Driver managers for UNIX systems are available as open-source software as well as from third-party vendors.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<div id="TTCIN169" class="sect1"><a id="sthref87"></a>
<h2 class="sect1">For more information</h2>
<p>For more information about the TimesTen database, see <a class="olink TTCDV112" href="../TTCDV/writing_app.htm#TTCDV112">&#34;Working with TimesTen Databases in ODBC&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database C Developer&#39;s Guide</span> and &#34;<a class="olink TTOPR327" href="../TTOPR/comp.htm#TTOPR327">Working with Data in a TimesTen Database</a>&#34; in <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
<p>For more information about connecting to databases, see <a class="olink TTOPR120" href="../TTOPR/using.htm#TTOPR120">&#34;Managing TimesTen Databases&#34;</a> and <a class="olink TTOPR177" href="../TTOPR/client_server.htm#TTOPR177">&#34;Working with the TimesTen Client and Server&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2928">
<tr>
<td class="cellalignment2937">
<table class="cellalignment2933">
<tr>
<td class="cellalignment2932"><a href="casestudies.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2932"><a href="concurrent.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2012, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2939">
<table class="cellalignment2931">
<tr>
<td class="cellalignment2932"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2932"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2932"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2932"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2932"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2932"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>