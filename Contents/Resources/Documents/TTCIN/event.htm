<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-107483"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Event%20Notification"></a><title>Event Notification</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 726"/>
<meta name="dcterms.created" content="2014-06-06T13:40:26Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="TimesTen Application-Tier Database Cache Introduction"/>
<meta name="dcterms.identifier" content="E21631-06"/>
<meta name="dcterms.isVersionOf" content="TTCIN"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2012, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="availability.htm" title="Previous" type="text/html"/>
<link rel="Next" href="cache.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E21631-06.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/14</span> <!-- End Header -->
<div id="TTCIN220" class="chapter"><a id="CIHJGHCB"></a>
<h1 class="chapter"><span class="secnum">7</span> Event Notification</h1>
<p>TimesTen and TimesTen Cache event notification is done through the Transaction Log API (XLA), which provides functions to detect changes to the database. XLA monitors log records. A log record describes an insert, update, or delete on a row in a table. XLA can be used with materialized views to focus the scope of notification on changes made to specific rows across multiple tables.</p>
<p>TimesTen and TimesTen Cache also use SNMP traps to send asynchronous alerts of events.</p>
<p>This chapter includes the following topics:</p>
<ul>
<li>
<p><a href="#CIHEHEGJ">Detect transaction modifications with the Transaction Log API</a></p>
</li>
<li>
<p><a href="#CIHDECBG">Monitor tables with materialized views and XLA</a></p>
</li>
<li>
<p><a href="#CIHIDDAE">Monitor problems with SNMP traps</a></p>
</li>
</ul>
<a id="CIHEHEGJ"></a>
<div id="TTCIN221" class="sect1">
<h2 class="sect1">Detect transaction modifications with the Transaction Log API<a id="sthref184"></a><a id="sthref185"></a></h2>
<p>TimesTen and TimesTen Cache provide a Transaction Log API (XLA) that enables applications to monitor the transaction log of a local database to detect changes made by other applications. XLA also provides functions that enable XLA applications to apply the detected changes to another database. XLA is a C language API. TimesTen and TimesTen Cache provide a <a id="sthref186"></a>C++ wrapper interface for XLA as part of TTClasses, as well as a separate Java wrapper interface.</p>
<p>Applications use XLA to implement a change notification scheme. In this scheme, XLA applications can monitor a database for changes and then take actions based on those changes. For example, a TimesTen database in a stock trading environment might be constantly updated from a data stream of stock quotes. Automated trading applications might use XLA to &#34;watch&#34; the database for updates on certain stock prices and use that information to determine whether to execute orders. See <a href="casestudies.htm#BABEFJCD">&#34;Real-time quote service application&#34;</a> for a complete example.</p>
<p>XLA can also be used to build a custom data replication solution in place of the TimesTen replication. Such XLA-enabled replication solutions might include replication with a non-TimesTen database or pushing updates to another TimesTen database.</p>
<div id="TTCIN222" class="sect2"><a id="sthref187"></a>
<h3 class="sect2">How XLA works</h3>
<p>XLA obtains update records for transactions directly from the transaction log buffer. If the records are not present in the buffer, XLA obtains the update records from the transaction log files on disk, as shown in <a href="#CIHIFHCE">Figure 7-1</a>. Records are available as long as the transaction log files are available. Readers use bookmarks to maintain their position in the log update stream. Bookmarks are stored in the database, so they are persistent across database connections, shutdowns, and failures.</p>
<div id="TTCIN223" class="figure">
<p class="titleinfigure"><a id="CIHIFHCE"></a>Figure 7-1 How XLA works</p>
<img width="461" height="298" src="img/xla.gif" alt="Description of Figure 7-1 follows"/><br/>
<a id="sthref188" href="img_text/xla.htm">Description of &#34;Figure 7-1 How XLA works&#34;</a><br/>
<br/></div>
<!-- class="figure" --></div>
<!-- class="sect2" -->
<div id="TTCIN224" class="sect2"><a id="sthref189"></a>
<h3 class="sect2">Log update records</h3>
<p>Update records are available to be read from the log as soon as the transaction that created them commits. A &#34;log sniffer&#34; application can obtain groups of update records written to the log.</p>
<p>Each returned record contains a fixed-length update header and one or two rows of data stored in an internal format. The update header describes:</p>
<ul>
<li>
<p>The table to which the updated row applies</p>
</li>
<li>
<p>Whether the record is the first or last commit record in the transaction</p>
</li>
<li>
<p>The type of transaction it represents</p>
</li>
<li>
<p>The length of the returned row data</p>
</li>
<li>
<p>Which columns in the row were updated</p>
</li>
</ul>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHDECBG"></a>
<div id="TTCIN225" class="sect1">
<h2 class="sect1">Monitor tables with materialized views and XLA<a id="sthref190"></a><a id="sthref191"></a></h2>
<p>In most database systems, materialized views are used to simplify and enhance the performance of <code>SELECT</code> queries that involve multiple tables. Though materialized views offer this same capability in TimesTen and TimesTen Cache, another purpose of materialized views in TimesTen and TimesTen Cache is their role in working with XLA to keep track of specific rows and columns in multiple tables.</p>
<p>When a materialized view is present, an XLA application needs to monitor only update records that are of interest from a single materialized view. Without a materialized view, the XLA application would have to monitor all of the update records from all of the detail tables, including records reflecting updates to rows and columns of no interest to the application.</p>
<p><a href="#CIHJJIHH">Figure 7-2</a> shows an update made to a column in a detail table that is part of the materialized view result set. The XLA application monitoring updates to the materialized view captures the updated record. Updates to other columns and rows in the same detail table that are not part of the materialized view result set are not seen by the XLA application.</p>
<div id="TTCIN226" class="figure">
<p class="titleinfigure"><a id="CIHJJIHH"></a>Figure 7-2 Using XLA to detect updates on a materialized view table</p>
<img width="582" height="285" src="img/xla_materialized.gif" alt="Description of Figure 7-2 follows"/><br/>
<a id="sthref192" href="img_text/xla_materialized.htm">Description of &#34;Figure 7-2 Using XLA to detect updates on a materialized view table&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>See <a href="casestudies.htm#BABEFJCD">&#34;Real-time quote service application&#34;</a> for an example of a trading application that uses XLA and a materialized view to detect updates to select stocks.</p>
<p>The TimesTen and TimesTen Cache implementation of materialized views emphasizes performance as well as the ability to detect updates across multiple tables. Readers familiar with other implementations of <a id="sthref193"></a>materialized views should note that the following tradeoffs have been made:</p>
<ul>
<li>
<p>The application must explicitly create materialized views. The TimesTen query optimizer has no facility to create materialized views automatically.</p>
</li>
<li>
<p>The query optimizer does not rewrite queries on the detail tables to reference materialized views. Application queries must directly reference views.</p>
</li>
<li>
<p>There are some restrictions to the SQL used to create materialized views.</p>
</li>
</ul>
<p>When creating a materialized view, the application must specify whether the maintenance of the view should be immediate or deferred. With immediate maintenance, a view is refreshed as soon as changes are made to its detail tables. With deferred maintenance, a view is refreshed only after the transaction that updated the detail tables is committed. A view with deferred maintenance is called an <a id="sthref194"></a><a id="sthref195"></a><span class="italic">asynchronous materialized view</span>. The refreshes may be automatic or may be initiated by the application, and they may be incremental or full. The application must specify the frequency of automatic refreshes. Note that the order of XLA notifications for an asynchronous materialized view is not necessarily the same as the order of transactions for the associated detail tables.</p>
</div>
<!-- class="sect1" -->
<a id="CIHIDDAE"></a>
<div id="TTCIN227" class="sect1">
<h2 class="sect1">Monitor problems with SNMP traps<a id="sthref196"></a></h2>
<p>Simple Network Management Protocol (SNMP) is a protocol for network management services. Network management software typically uses SNMP to query or control the state of network devices like routers and switches. These devices sometimes also generate asynchronous alerts in the form of UDP/IP packets, called <span class="italic">SNMP traps</span>, to inform the management systems of problems.</p>
<p>TimesTen and TimesTen Cache cannot be queried or controlled through SNMP. However, TimesTen and TimesTen Cache send SNMP traps for certain critical events to facilitate user recovery mechanisms. TimesTen sends traps for the following events:</p>
<ul>
<li>
<p>TimesTen Cache autorefresh failure</p>
</li>
<li>
<p>Database out of space</p>
</li>
<li>
<p>Replicated transaction failure</p>
</li>
<li>
<p>Death of daemons</p>
</li>
<li>
<p>Database invalidation</p>
</li>
<li>
<p>Assertion failure</p>
</li>
</ul>
<p>These events also cause log entries to be written by the TimesTen daemon, but exposing them through SNMP traps allows properly configured network management software to take immediate action.</p>
</div>
<!-- class="sect1" -->
<div id="TTCIN228" class="sect1"><a id="sthref197"></a>
<h2 class="sect1">For more information</h2>
<p>For more information about XLA, see <a class="olink TTCDV246" href="../TTCDV/xla_event.htm#TTCDV246">&#34;XLA and TimesTen Event Management&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database C Developer&#39;s Guide</span> and <a class="olink TTJDV199" href="../TTJDV/jmsxla_event.htm#TTJDV199">&#34;Using JMS/XLA for Event Management&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Java Developer&#39;s Guide</span>.</p>
<p>For more information about TTClasses, see <a class="olink TTCLS" href="../TTCLS/toc.htm"><span class="italic">Oracle TimesTen In-Memory Database TTClasses Guide</span></a>.</p>
<p>For more information about materialized views, see <a class="olink TTOPR359" href="../TTOPR/comp.htm#TTOPR359">&#34;Understanding materialized views&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>. Also see the <a class="olink TTSQL293" href="../TTSQL/state.htm#TTSQL293"><code>CREATE MATERIALIZED VIEW</code></a> statement in <span class="italic">Oracle TimesTen In-Memory Database SQL Reference</span>.</p>
<p>For more information about SNMP traps, see <a class="olink TTERR138" href="../TTERR/snmp.htm#TTERR138">&#34;Diagnostics through SNMP Traps&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Error Messages and SNMP Traps</span>.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2928">
<tr>
<td class="cellalignment2937">
<table class="cellalignment2933">
<tr>
<td class="cellalignment2932"><a href="availability.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2932"><a href="cache.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2012, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2939">
<table class="cellalignment2931">
<tr>
<td class="cellalignment2932"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2932"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2932"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2932"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2932"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2932"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>