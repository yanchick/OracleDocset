<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-6012"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Troubleshooting%20Oracle%20Database%20Vault"></a><title>Troubleshooting Oracle Database Vault</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="You can troubleshoot Oracle Database Vault by using tools such as trace files or checking certain Oracle Database Vault reports."/>
<meta name="keywords" content="trace files, about, databases, monitoring events, event monitoring, problems, diagnosing, trace files, Oracle Database Vault, activities that can be traced, levels of trace events, performance effect, ALTER SESSION privilege, enabling trace files, enabling for current session, PDBs, enabling tracing, current database session, enabling for all sessions, all database sessions, directory location for trace files, finding trace file directory, querying, Linux grep command, ADRCI utility, Database Vault, examples, low level realm violations, high level authorization, highest level on realm violations, disabling for current session, disabling for all sessions, disabling tracing, realms, authorization, troubleshooting, rules, rule sets, factors, tips, rule sets, general diagnostic tips, secure application roles, configuration problems, DV_OWNER role, recovering lost password, passwords, resetting for DV_OWNER user, DV_ACCTMGR role, resetting for DV_ACCTMGR user"/>
<meta name="dcterms.created" content="2017-06-05T10:50:14Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Vault Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49109-12"/>
<meta name="dcterms.isVersionOf" content="DVADM"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="guidelines.htm" title="Previous" type="text/html"/>
<link rel="Next" href="index.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49109-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-2326597E-EFB4-4938-9249-6D20E65CAFA1"></a> <span id="PAGE" style="display:none;">33/34</span> <!-- End Header -->
<a id="DVADM017"></a>
<h1 id="DVADM-GUID-2326597E-EFB4-4938-9249-6D20E65CAFA1" class="sect1"><span class="enumeration_appendix">E</span> Troubleshooting Oracle Database Vault</h1>
<div>
<p>You can troubleshoot Oracle Database Vault by using tools such as trace files or checking certain Oracle Database Vault reports.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="troubleshooting.htm#GUID-98F32BA5-85C3-4827-9202-E90AE214BC4B" title="Trace files, which the database generates, capture important information to help you debug errors.">Using Trace Files to Diagnose Oracle Database Vault Events</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-D6B6CA0F-7F61-44BB-932A-011E9135A5F8" title="Oracle provides general tips for diagnosing problems in realms, factors, and rule sets.">General Diagnostic Tips</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-5CB5950D-A9CB-4D97-AC99-14FF29923F0B" title="Oracle Database Vault provides reports to check configuration problems with realms, command rules, factors, rule sets, or secure application roles.">Configuration Problems with Oracle Database Vault Components</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-6A419E95-F2E4-4F37-8B84-EFB78989BBDB" title="Backup accounts can help you reset lost passwords for users who have been granted the DV_OWNER and DV_ACCTMGR roles.">Resetting Oracle Database Vault Account Passwords</a></p>
</li>
</ul>
</div>
<a id="DVADM71111"></a>
<div class="props_rev_3"><a id="GUID-98F32BA5-85C3-4827-9202-E90AE214BC4B"></a>
<h2 id="DVADM-GUID-98F32BA5-85C3-4827-9202-E90AE214BC4B" class="sect2">Using Trace Files to Diagnose Oracle Database Vault Events</h2>
<div>
<p>Trace files, which the database generates, capture important information to help you debug errors.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="troubleshooting.htm#GUID-86477748-7A80-40EA-A5D3-033642529E9E" title="You can monitor the Oracle Database Vault database instance for server and background process events by enabling and checking the database instance trace files.">About Using Trace Files to Diagnose Oracle Database Vault Events</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-FC2AD106-C1D8-4604-8EB0-BB06737E7E62" title="You can use trace files to track a variety of Oracle Database Vault activities.">Types of Oracle Database Vault Trace Events That You Can and Cannot Track</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-C4714887-911D-47F7-9F46-27DFF04E1B5F" title="You can use the several levels for Oracle Database Vault trace events.">Levels of Oracle Database Vault Trace Events</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-91F2FB0F-63F9-4EA5-BF50-E8A235CC3E27" title="Be careful about enabling trace files.">Performance Effect of Enabling Oracle Database Vault Trace Files</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-08EAE65B-8E21-462B-888A-90BD4BD6C8DD" title="You can use the ALTER SESSION or ALTER SYSTEM SQL statements to enable Oracle Database Vault trace events.">Enabling Oracle Database Vault Trace Events</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-5C044512-4715-4509-BC58-385E1267F64C" title="The Linux grep command and the ADR Command Interpreter (ADRCI) command-line utility can find Oracle Database Vault trace file data.">Finding Oracle Database Vault Trace File Data</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-F8C72B2D-0BF1-4F4E-BD12-34F536874DB9" title="You can use trace file data to track low level realm violations.">Example: Low Level Oracle Database Vault Realm Violations in a Trace File</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-81ED4F03-75D6-495B-B5C4-937559147300" title="You can disable tracing for Oracle Database Vault events.">Disabling Oracle Database Vault Trace Events</a></p>
</li>
</ul>
</div>
<a id="DVADM71357"></a>
<div class="props_rev_3"><a id="GUID-86477748-7A80-40EA-A5D3-033642529E9E"></a>
<h3 id="DVADM-GUID-86477748-7A80-40EA-A5D3-033642529E9E" class="sect3">About Using Trace Files to Diagnose Oracle Database Vault Events</h3>
<div>
<p>You can monitor the Oracle Database Vault database instance for server and background process events by enabling and checking the database instance trace files.</p>
<p>Trace files reveal the Oracle Database Vault policy authorization success and failures. They are useful for providing information to help resolve bug and other issues that may occur.</p>
<p>To set tracing for Oracle Database Vault, you must have the <code class="codeph">DV_ADMIN</code> role. To perform the configuration, you use either of the <code class="codeph">ALTER SESSION SET EVENTS</code> or <code class="codeph">ALTER SYSTEM SET EVENTS</code> SQL statements.</p>
<div class="infoboxnotealso" id="GUID-86477748-7A80-40EA-A5D3-033642529E9E__GUID-78AEAB99-FF5A-408F-AB18-D1AC4468CA62">
<p class="notep1">See Also:</p>
<p><a class="olink ADMIN11243" target="_blank" href="../ADMIN/monitoring.htm#ADMIN11243"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for more information about how to manage trace files</p>
</div>
</div>
</div>
<a id="DVADM71359"></a><a id="DVADM71358"></a>
<div class="props_rev_3"><a id="GUID-FC2AD106-C1D8-4604-8EB0-BB06737E7E62"></a>
<h3 id="DVADM-GUID-FC2AD106-C1D8-4604-8EB0-BB06737E7E62" class="sect3">Types of Oracle Database Vault Trace Events That You Can and Cannot Track</h3>
<div>
<p>You can use trace files to track a variety of Oracle Database Vault activities.</p>
<p><a href="troubleshooting.htm#GUID-FC2AD106-C1D8-4604-8EB0-BB06737E7E62__BABEGDHE" title="DV Trace Event Categories">Table E-1</a> describes these activities.</p>
<div class="tblformal" id="GUID-FC2AD106-C1D8-4604-8EB0-BB06737E7E62__BABEGDHE">
<p class="titleintable">Table E-1 Contents of Oracle Database Vault Trace Files</p>
<table class="cellalignment338" title="Contents of Oracle Database Vault Trace Files" summary="DV Trace Event Categories">
<thead>
<tr class="cellalignment332">
<th class="cellalignment362" id="d149532e467">Database Vault Feature</th>
<th class="cellalignment430" id="d149532e470">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment332">
<td class="cellalignment363" id="d149532e475" headers="d149532e467">
<p>Realm authorizations</p>
</td>
<td class="cellalignment431" headers="d149532e475 d149532e470">
<p>The trace file tracks cases of realm authorization with a rule set and realm authorization to a role. See <a href="troubleshooting.htm#GUID-F8C72B2D-0BF1-4F4E-BD12-34F536874DB9" title="You can use trace file data to track low level realm violations.">Example: Low Level Oracle Database Vault Realm Violations in a Trace File</a> for examples of this type of trace file.</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment363" id="d149532e488" headers="d149532e467">
<p>Rule set evaluations</p>
</td>
<td class="cellalignment431" headers="d149532e488 d149532e470">
<p>The trace file includes information about a rule set evaluation from a realm authorization, for a command rule, the CONNECT command rule, and from a factor.</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment363" id="d149532e495" headers="d149532e467">
<p>Oracle Data Pump authorization</p>
</td>
<td class="cellalignment431" headers="d149532e495 d149532e470">
<p>The trace file includes Database Vault Data Pump authorization results and other user, object, and SQL text information.</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment363" id="d149532e502" headers="d149532e467">
<p>Oracle Scheduler job authorization</p>
</td>
<td class="cellalignment431" headers="d149532e502 d149532e470">
<p>The trace file includes the Database Vault Oracle Scheduler job authorization results, job name, job owner, current statement, and so on.</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment363" id="d149532e509" headers="d149532e467">
<p>Object privilege bypass</p>
</td>
<td class="cellalignment431" headers="d149532e509 d149532e470">
<p>The trace file tracks both direct grants and grants through a role. This type of trace is useful for cases where mandatory realms are not enabled, which enables users who have an object privilege to access realm protected objects.</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment363" id="d149532e516" headers="d149532e467">
<p>Factor loading</p>
</td>
<td class="cellalignment431" headers="d149532e516 d149532e470">
<p>The trace file tracks the expression and value for each factor loaded.</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment363" id="d149532e523" headers="d149532e467">
<p>Others</p>
</td>
<td class="cellalignment431" headers="d149532e523 d149532e470">
<p>Object owner bypassed realm protection and other Database Vault failed and succeeded operations</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="DVADM71360"></a>
<div class="props_rev_3"><a id="GUID-C4714887-911D-47F7-9F46-27DFF04E1B5F"></a>
<h3 id="DVADM-GUID-C4714887-911D-47F7-9F46-27DFF04E1B5F" class="sect3">Levels of Oracle Database Vault Trace Events</h3>
<div>
<p>You can use the several levels for Oracle Database Vault trace events.</p>
<p>These levels are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Low</span> prints the information for all failed Oracle Database Vault authorizations to a trace file. This type of trace file includes failed realm authorizations, failed factor loading, failed rule set evaluating, and so on. It has a low impact on Oracle Database performance.</p>
</li>
<li>
<p><span class="bold">High</span> prints trace records that include both successful and failed authorizations. Because this type of tracing tracks all the authorizations, the overhead is larger than that of the low level tracing. In addition, the trace files are usually larger.</p>
</li>
<li>
<p><span class="bold">Highest</span> prints the PL/SQL stack and function call stack to a trace file, as well as what is traced at level high (as described in <a href="troubleshooting.htm#GUID-FC2AD106-C1D8-4604-8EB0-BB06737E7E62__BABEGDHE" title="DV Trace Event Categories">Table E-1</a>). It has the highest impact on Oracle Database performance.</p>
</li>
</ul>
</div>
</div>
<a id="DVADM71361"></a>
<div class="props_rev_3"><a id="GUID-91F2FB0F-63F9-4EA5-BF50-E8A235CC3E27"></a>
<h3 id="DVADM-GUID-91F2FB0F-63F9-4EA5-BF50-E8A235CC3E27" class="sect3">Performance Effect of Enabling Oracle Database Vault Trace Files</h3>
<div>
<p>Be careful about enabling trace files.</p>
<p>Doing so can increase the overhead of the database instance operation, which could decrease performance.</p>
</div>
</div>
<a id="DVADM71362"></a>
<div class="props_rev_3"><a id="GUID-08EAE65B-8E21-462B-888A-90BD4BD6C8DD"></a>
<h3 id="DVADM-GUID-08EAE65B-8E21-462B-888A-90BD4BD6C8DD" class="sect3">Enabling Oracle Database Vault Trace Events</h3>
<div>
<p>You can use the <code class="codeph">ALTER SESSION</code> or <code class="codeph">ALTER SYSTEM</code> SQL statements to enable Oracle Database Vault trace events.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="troubleshooting.htm#GUID-6D0F7B6A-D155-414E-BBE9-D4CA0D08A19F" title="You can use the ALTER SESSION SET EVENTS SQL statement to enable trace events for the current database session.">Enabling Trace Events for the Current Database Session</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-29AB6F5E-3A97-4143-8415-9C34051EDF13" title="You can use the ALTER SYSTEM SET EVENTS SQL statement to enable Database Vault trace events for all database sessions.">Enabling Trace Events for All Database Sessions</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-AA31F01F-7701-4452-8DE8-A5DC1C365007" title="You should be aware of how enabling trace events is affected in a multitenant environment.">Management of Trace Events in a Multitenant Environment</a></p>
</li>
</ul>
</div>
<a id="DVADM71363"></a>
<div class="props_rev_3"><a id="GUID-6D0F7B6A-D155-414E-BBE9-D4CA0D08A19F"></a>
<h4 id="DVADM-GUID-6D0F7B6A-D155-414E-BBE9-D4CA0D08A19F" class="sect4">Enabling Trace Events for the Current Database Session</h4>
<div>
<p>You can use the <code class="codeph">ALTER SESSION SET EVENTS</code> SQL statement to enable trace events for the current database session.</p>
<ol>
<li class="stepexpand"><span>Log into the database instance as a user who has been granted the <code class="codeph">DV_ADMIN</code> role and the <code class="codeph">ALTER SESSION</code> system privilege.</span>
<div>
<p>For example:</p>
<pre dir="ltr">sqlplus leo_dvowner
Enter password: <span class="italic">password</span>
Connected.
</pre></div>
</li>
<li class="stepexpand" id="GUID-6D0F7B6A-D155-414E-BBE9-D4CA0D08A19F__BABJBCEG"><span>Enter the <code class="codeph">ALTER SESSION SET EVENTS</code> SQL statement to set the tracing to low, high, or highest, as described in <a href="troubleshooting.htm#GUID-C4714887-911D-47F7-9F46-27DFF04E1B5F" title="You can use the several levels for Oracle Database Vault trace events.">Levels of Oracle Database Vault Trace Events</a>.</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>To turn on tracing for failed operations that have a low impact, enter one of the following statements:</p>
<pre dir="ltr">ALTER SESSION SET EVENTS &#39;TRACE[DV] DISK=LOW&#39;;

ALTER SESSION SET EVENTS &#39;47998 TRACE NAME CONTEXT FOREVER, LEVEL 1&#39;;
</pre></li>
<li>
<p>To turn on tracing for both failed and successful operations that have a high impact, enter one of the following statements:</p>
<pre dir="ltr">ALTER SESSION SET EVENTS &#39;TRACE[DV] DISK=HIGH&#39;;

ALTER SESSION SET EVENTS &#39;47998 TRACE NAME CONTEXT FOREVER, LEVEL 3&#39;;
</pre></li>
<li>
<p>To turn on tracing for both failed and successful operations with a function and PL/SQL call stack that has the highest impact, enter one of the following statements:</p>
<pre dir="ltr">ALTER SESSION SET EVENTS &#39;TRACE[DV] DISK=HIGHEST&#39;;

ALTER SESSION SET EVENTS &#39;47998 TRACE NAME CONTEXT FOREVER, LEVEL 4&#39;;
</pre></li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<a id="DVADM71364"></a>
<div class="props_rev_3"><a id="GUID-29AB6F5E-3A97-4143-8415-9C34051EDF13"></a>
<h4 id="DVADM-GUID-29AB6F5E-3A97-4143-8415-9C34051EDF13" class="sect4">Enabling Trace Events for All Database Sessions</h4>
<div>
<p>You can use the <code class="codeph">ALTER SYSTEM SET EVENTS</code> SQL statement to enable Database Vault trace events for all database sessions.</p>
<ol>
<li class="stepexpand"><span>Log into the database instance as a user who has been granted the <code class="codeph">DV_ADMIN</code> role and the <code class="codeph">ALTER SYSTEM</code> system privilege.</span>
<div>
<p>For example:</p>
<pre dir="ltr">sqlplus leo_dvowner
Enter password: <span class="italic">password</span>
Connected.
</pre></div>
</li>
<li class="stepexpand"><span>Enter the <code class="codeph">ALTER SYSTEM SET EVENTS</code> SQL statement, using the syntax that is shown in Step 2 in <a href="troubleshooting.htm#GUID-6D0F7B6A-D155-414E-BBE9-D4CA0D08A19F" title="You can use the ALTER SESSION SET EVENTS SQL statement to enable trace events for the current database session.">Enabling Trace Events for the Current Database Session</a>.</span>
<div>
<p>For example:</p>
<pre dir="ltr">ALTER SYSTEM SET EVENTS &#39;TRACE[DV] DISK=LOW&#39;;
</pre></div>
</li>
<li class="stepexpand"><span>Restart the database.</span>
<div>
<p>For example:</p>
<pre dir="ltr">SHUTDOWN IMMEDIATE
STARTUP
</pre></div>
</li>
</ol>
<div class="section">
<p>Another way that you can enable trace events for all database sessions is to add the following line to the <code class="codeph">init.ora</code> file, and then restart the database:</p>
<pre dir="ltr">event=&#34;47998 trace name context forever, level [<span class="italic">trace_level</span>]&#34;
</pre>
<p>Replace <span class="italic"><code class="codeph">trace_level</code></span> with one of the following values:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">1</code> for the lowest level of tracing</p>
</li>
<li>
<p><code class="codeph">3</code> for the high level</p>
</li>
<li>
<p><code class="codeph">4</code> for the highest level</p>
</li>
</ul>
<p>For example:</p>
<pre dir="ltr">event=&#34;47998 trace name context forever, level [1]&#34;
</pre></div>
<!-- class="section" --></div>
</div>
<a id="DVADM71533"></a>
<div class="props_rev_3"><a id="GUID-AA31F01F-7701-4452-8DE8-A5DC1C365007"></a>
<h4 id="DVADM-GUID-AA31F01F-7701-4452-8DE8-A5DC1C365007" class="sect4">Management of Trace Events in a Multitenant Environment</h4>
<div>
<p>You should be aware of how enabling trace events is affected in a multitenant environment.</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Trace events for the current session:</span> In a multitenant environment, running the <code class="codeph">ALTER SESSION SET EVENTS</code> SQL statement from either the root or a pluggable database (PDB) enables tracing for the current user session. If you switch from one PDB to another PDB (by using the <code class="codeph">ALTER SESSION SET CONTAINER</code> statement), then tracing is still enabled for the new PDB. You cannot enable tracing for a single PDB in a multitenant container database (CDB); it applies to all PDBs and the root. Remember that must have the <code class="codeph">ALTER SESSION SET CONTAINER</code> system privilege to move from one PDB to another.</p>
</li>
<li>
<p><span class="bold">Trace events for all database sessions:</span> In a multitenant environment, running the <code class="codeph">ALTER SYSTEM SET EVENTS</code> statement from either the root or a specific PDB enables tracing for all PDBs in the container database.</p>
</li>
</ul>
</div>
</div>
</div>
<a id="DVADM71365"></a>
<div class="props_rev_3"><a id="GUID-5C044512-4715-4509-BC58-385E1267F64C"></a>
<h3 id="DVADM-GUID-5C044512-4715-4509-BC58-385E1267F64C" class="sect3">Finding Oracle Database Vault Trace File Data</h3>
<div>
<p>The Linux <code class="codeph">grep</code> command and the ADR Command Interpreter (<code class="codeph">ADRCI</code>) command-line utility can find Oracle Database Vault trace file data.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="troubleshooting.htm#GUID-7790FBE4-AFE9-48F7-A19C-BD833AF202DF" title="You can find the full directory location of trace files by querying the V$DIAG_INFO dynamic view.">Finding the Database Vault Trace File Directory Location</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-8D5894C8-C0B0-4E8F-B0B1-399E721B5BA3" title="To query or process the trace files, you can use the Linux grep command to search for strings.">Using the Linux grep Command to Search Trace Files for Strings</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-B05344D3-E3EE-4B59-B4D6-41CD280EA44A" title="You can query trace files by using the ADR Command Interpreter (ADRCI) command-line utility.">Using the ADR Command Interpreter (ADRCI) Utility to QueryTrace Files</a></p>
</li>
</ul>
</div>
<a id="DVADM71366"></a>
<div class="props_rev_3"><a id="GUID-7790FBE4-AFE9-48F7-A19C-BD833AF202DF"></a>
<h4 id="DVADM-GUID-7790FBE4-AFE9-48F7-A19C-BD833AF202DF" class="sect4">Finding the Database Vault Trace File Directory Location</h4>
<div>
<p>You can find the full directory location of trace files by querying the <code class="codeph">V$DIAG_INFO</code> dynamic view.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Query the <code class="codeph">V$DIAG_INFO</code> dynamic view as follows:</p>
<pre dir="ltr">SELECT VALUE FROM V$DIAG_INFO WHERE NAME = &#39;Default Trace File&#39;;
</pre></li>
</ul>
<p>Output similar to the following appears:</p>
<pre dir="ltr">VALUE
--------------------------------------------------------------------------------
/u01/app/oracle/product/12.1.0/log/diag/rdbms/orcl/orcl/trace/orcl_ora_7174.trc
</pre></div>
<!-- class="section" --></div>
</div>
<a id="DVADM71367"></a>
<div class="props_rev_3"><a id="GUID-8D5894C8-C0B0-4E8F-B0B1-399E721B5BA3"></a>
<h4 id="DVADM-GUID-8D5894C8-C0B0-4E8F-B0B1-399E721B5BA3" class="sect4">Using the Linux grep Command to Search Trace Files for Strings</h4>
<div>
<p>To query or process the trace files, you can use the Linux <code class="codeph">grep</code> command to search for strings.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>For example, to find the trace files that show realm authorization failures, enter the following command:</p>
<pre dir="ltr">grep &#39;Result=Realm Authorization Failed&#39;  *.trc
</pre></li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM71368"></a>
<div class="props_rev_3"><a id="GUID-B05344D3-E3EE-4B59-B4D6-41CD280EA44A"></a>
<h4 id="DVADM-GUID-B05344D3-E3EE-4B59-B4D6-41CD280EA44A" class="sect4">Using the ADR Command Interpreter (ADRCI) Utility to QueryTrace Files</h4>
<div>
<p>You can query trace files by using the ADR Command Interpreter (<code class="codeph">ADRCI</code>) command-line utility.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>To use the <code class="codeph">ADRCI</code> utility to find trace file information, use the <code class="codeph">SHOW</code> command.</p>
</li>
</ul>
<p>For example, to use <code class="codeph">ADRCI</code> to find the trace files, enter the <code class="codeph">SHOW TRACEFILE</code> command:</p>
<pre dir="ltr">adrci <span class="italic">--To start ACRCI from the command line</span>
adrci&gt; show tracefile

diag/rdbms/orcl/orcl/trace/orcl_m002_14551.trc
diag/rdbms/orcl/orcl/trace/orcl_tmon_13450.trc
diag/rdbms/orcl/orcl/trace/orcl_vktm_963.trc
diag/rdbms/orcl/orcl/trace/alert_orcl.log
...
</pre>
<p>To find the number of all trace incidents:</p>
<pre dir="ltr">adrci&gt; show incident

ADR Home = /u01/app/oracle/product/12.1.0/log/diag/rdbms/orcl/orcl:
*************************************************************************
234 rows fetched
</pre>
<p>The following <code class="codeph">ADRCI</code> command returns a list of all trace files whose name contains the word <code class="codeph">ora</code>:</p>
<pre dir="ltr">adrci&gt; show tracefile %ora%

/u01/app/oracle/product/12.1.0/log/diag/rdbms/orcl/orcl/trace/orcl_ora_18841.trc
/u01/app/oracle/product/12.1.0/log/diag/rdbms/orcl/orcl/trace/orcl_ora_12017.trc
/u01/app/oracle/product/12.1.0/log/diag/rdbms/orcl/orcl/trace/orcl_ora_19372.trc
/u01/app/oracle/product/12.1.0/log/diag/rdbms/orcl/orcl/trace/orcl_ora_12221.trc
/u01/app/oracle/product/12.1.0/log/diag/rdbms/orcl/orcl/trace/orcl_ora_1600.trc
...
</pre>
<p>The following <code class="codeph">ADRCI</code> command searches for trace files that contain the phrase <code class="codeph">Realm Authorization Failed</code>:</p>
<pre dir="ltr">adrci&gt; show trace %trc -xp &#34;[payload like &#39;%Realm Authorization Failed%&#39;]&#34;
</pre>
<div class="infoboxnotealso" id="GUID-B05344D3-E3EE-4B59-B4D6-41CD280EA44A__GUID-651FBEDA-90AF-4C8A-8BEE-CCDA3C25ABA9">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SUTIL700" target="_blank" href="../SUTIL/GUID-DC5744C7-FAC0-436B-99D5-DBD45B66930B.htm#SUTIL700"><span><cite>Oracle Database Utilities</cite></span></a> for detailed information about the <code class="codeph">ADRCI</code> utility</p>
</li>
<li>
<p><a class="olink ADMIN11277" target="_blank" href="../ADMIN/diag.htm#ADMIN11277"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about viewing reports with the <code class="codeph">ADRCI</code> utility</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="DVADM71370"></a><a id="DVADM71369"></a>
<div class="props_rev_3"><a id="GUID-F8C72B2D-0BF1-4F4E-BD12-34F536874DB9"></a>
<h3 id="DVADM-GUID-F8C72B2D-0BF1-4F4E-BD12-34F536874DB9" class="sect3">Example: Low Level Oracle Database Vault Realm Violations in a Trace File</h3>
<div>
<p>You can use trace file data to track low level realm violations.</p>
<p><a href="troubleshooting.htm#GUID-F8C72B2D-0BF1-4F4E-BD12-34F536874DB9__BABFEBIB">Example E-1</a> shows an example of tracking low lever real violations.</p>
<div class="example" id="GUID-F8C72B2D-0BF1-4F4E-BD12-34F536874DB9__BABFEBIB">
<p class="titleinexample">Example E-1 Low Level Oracle Database Vault Realm Violations in a Trace File</p>
<pre dir="ltr">*** 2010-02-05 18:35:31.438
*** SESSION ID:(34.559) 2010-02-05 18:35:31.438
*** CLIENT ID:() 2010-02-05 18:35:31.438
*** SERVICE NAME:(SYS$USERS) 2010-02-05 18:35:31.438
*** MODULE NAME:(SQL*Plus) 2010-02-05 18:35:31.438
*** ACTION NAME:() 2010-02-05 18:35:31.438
 
Result=Realm Authorization Failed
        Realm_Name=realm 3      Required_Auth_Level=0
        Current_User=116
        Object_Owner=U1 Object_Name=T1  Object_Type=TABLE
        SQL_Text=INSERT INTO U1.T1 VALUES(30)
 
Result=Realm Authorization Failed
        Realm_Name=realm 3      Required_Auth_Level=0
        Current_User=116
        Object_Owner=U1 Object_Name=T1  Object_Type=TABLE
        SQL_Text=DELETE FROM U1.T1
 
Result=Realm Authorization Failed
        Realm_Name=realm 3      Required_Auth_Level=0
        Current_User=116
        Object_Owner=U1 Object_Name=T3  Object_Type=TABLE
        SQL_Text=CREATE TABLE U1.T3(C INT)
 
*** 2010-02-05 18:35:34.465
 
Result=Realm Authorization Failed
        Realm_Name=realm 3      Required_Auth_Level=0
        Current_User=116
        Object_Owner=U1 Object_Name=T1  Object_Type=TABLE
        SQL_Text=INSERT INTO U1.T1 VALUES(30)
 
Result=Realm Authorization Failed
        Realm_Name=realm 3      Required_Auth_Level=0
        Current_User=116
        Object_Owner=U1 Object_Name=T1  Object_Type=TABLE
        SQL_Text=DELETE FROM U1.T1
</pre></div>
<!-- class="example" --></div>
</div>
<a id="DVADM71371"></a><a id="DVADM71534"></a>
<div class="props_rev_3"><a id="GUID-3A56C263-A809-4631-A56B-F774383315DB"></a>
<h3 id="DVADM-GUID-3A56C263-A809-4631-A56B-F774383315DB" class="sect3">Example: High Level Trace Enabled for Oracle Database Vault Authorization</h3>
<div>
<p>You can track Oracle Database Vault authorizations in a trace file with high level trace enabled.</p>
<p><a href="troubleshooting.htm#GUID-3A56C263-A809-4631-A56B-F774383315DB__BABDHDJJ">Example E-2</a> shows an example of this type of trace file.</p>
<div class="example" id="GUID-3A56C263-A809-4631-A56B-F774383315DB__BABDHDJJ">
<p class="titleinexample">Example E-2 High Level Trace Enabled for Oracle Database Vault Authorization</p>
<pre dir="ltr">Result= Realm Authorization Passed
        Reason=Current user is the object owner
        Current_User=70 Command=SELECT
        Object_Owner=LBACSYS    Object_Name=LBAC$AUDIT  Object_Type=TABLE
 
Result= Realm Authorization Passed
        Reason=Current user is the object owner
        Current_User=70 Command=SELECT
        Object_Owner=LBACSYS    Object_Name=LBAC$AUDIT  Object_Type=TABLE
 
Result= Realm Authorization Passed
        Reason=Current user is the object owner
        Current_User=70 Command=SELECT
        Object_Owner=LBACSYS    Object_Name=LBAC$POL    Object_Type=TABLE
 
Result= Realm Authorization Passed
        Reason=Current user is the object owner
        Current_User=70 Command=SELECT
        Object_Owner=LBACSYS    Object_Name=LBAC$USER_LOGON     Object_Type=VIEW
 
&hellip;&hellip;
 
Result= Realm Authorization Passed
        Reason=Current user is the object owner
        Current_User=70 Command=SELECT
        Object_Owner=LBACSYS    Object_Name=LBAC$POL    Object_Type=TABLE
 
Result=Set Factor Value
        Factor_Name=Sensitive_Treatments        Factor_Expression=/SURGERY/PSYCHOLOGICAL
 
Result=Set Factor Value
        Factor_Name=Database_Instance   Factor_Expression=UPPER(SYS_CONTEXT(&#39;USERENV&#39;,&#39;INSTANCE&#39;))      Factor_Value=1
 
Result=Set Factor Value
        Factor_Name=Client_IP   Factor_Expression=UPPER(SYS_CONTEXT(&#39;USERENV&#39;,&#39;IP_ADDRESS&#39;))    Factor_Value=
 
Result=Set Factor Value
        Factor_Name=Authentication_Method       Factor_Expression=UPPER(SYS_CONTEXT(&#39;USERENV&#39;,&#39;AUTHENTICATION_METHOD&#39;)) Factor_Value=PASSWORD
&hellip;&hellip;
 
*** ACTION NAME:() 2010-02-05 18:47:19.540
 
Result=Rule Set Evaluation Failed
        Command=SELECT  RuleSet_ID=2    RuleSet_Name=Disabled
        Current_User=SYSTEM 
        Object_Owner=U1 Object_Name=T1  Object_Type=TABLE
        SQL_Text=SELECT * FROM U1.T1
 
Result=Rule Set Evaluation Succeeded
        Command=SELECT  RuleSet_ID=1    RuleSet_Name=Enabled
        Current_User=SYSTEM 
        Object_Owner=U1 Object_Name=T1  Object_Type=TABLE
        SQL_Text=SELECT * FROM U1.T1
</pre></div>
<!-- class="example" --></div>
</div>
<a id="DVADM71372"></a><a id="DVADM71535"></a>
<div class="props_rev_3"><a id="GUID-55889986-AA0A-44EC-86FE-7C6475EBEE3D"></a>
<h3 id="DVADM-GUID-55889986-AA0A-44EC-86FE-7C6475EBEE3D" class="sect3">Example: Highest Level Traces on Violations on Realm-Protected Objects</h3>
<div>
<p>You can track high level violations using trace files.</p>
<p><a href="troubleshooting.htm#GUID-55889986-AA0A-44EC-86FE-7C6475EBEE3D__BABEAIIA">Example E-3</a> shows how highest level violations that involve Oracle Scheduler jobs authorization can appear in a trace file when trace is enabled at the highest level.</p>
<div class="example" id="GUID-55889986-AA0A-44EC-86FE-7C6475EBEE3D__BABEAIIA">
<p class="titleinexample">Example E-3 Highest Level Traces on Violations on Realm-Protected Objects</p>
<pre dir="ltr">------ Call Stack Trace ------
kzvdvechk&lt;-kzvdveqau&lt;-kksfbc&lt;-opiexe&lt;-kpoal8&lt;-opiodr&lt;-ttcpip&lt;-opitsk&lt;-opiino&lt;-opiodr&lt;-opidrv&lt;-sou2o&lt;-opimai_real&lt;-ssthrdmain&lt;-main&lt;-__libc_start_main&lt;-_start
 
Result=Object Privilege check passed
        Current_User=INVOKER2   Used_Role=1
        Object_Owner=SYSTEM     Object_Name=PRODUCT_PRIVS       Object_Type=VIEW
        SQL_Text=SELECT CHAR_VALUE FROM SYSTEM.PRODUCT_PRIVS WHERE (UPPER(&#39;SQL*PLUS&#39;) LIKE UPPER(PRODUCT)) AND ((USER LIKE USERID) OR (USERID = &#39;PUBLIC&#39;)) AND (UPPER(ATTRIBUTE) = &#39;ROLES&#39;)
*** MODULE NAME:(SQL*Plus) 2010-02-05 18:57:53.973
*** ACTION NAME:() 2010-02-05 18:57:53.973
 
----- Current SQL Statement for this session (sql_id=2sr63rjm45yfh) -----
UPDATE INVOKER1.T1 SET A = 20
----- PL/SQL Stack -----
----- PL/SQL Call Stack -----
  object      line  object
  handle    number  name
0x26a00e34         1  anonymous block
0x2495b000       185  package body SYS.DBMS_ISCHED
0x24958fb8       486  package body SYS.DBMS_SCHEDULER
0x247bbb34         1  anonymous block
 
------ Call Stack Trace ------
kzvdvechk&lt;-kzvdveqau&lt;-kksfbc&lt;-opiexe&lt;-opipls&lt;-opiodr&lt;-__PGOSF151_rpidrus&lt;-skgmstack&lt;-rpidru&lt;-rpiswu2&lt;-rpidrv&lt;-psddr0&lt;-psdnal&lt;-pevm_EXECC&lt;-pfrinstr_EXECC&lt;-pfrrun_no_tool&lt;-pfrrun&lt;-plsql_run&lt;-peicnt&lt;-kkxexe&lt;-opiexe&lt;-kpoal8&lt;-opiodr&lt;-kpoodr&lt;-upirtrc&lt;-kpurcsc&lt;-kpuexec
&lt;-OCIStmtExecute&lt;-jslvec_execcb&lt;-jslvswu&lt;-jslve_execute0&lt;-jskaJobRun&lt;-jsiRunJob&lt;-jsaRunJob&lt;-spefcmpa&lt;-spefmccallstd&lt;-pextproc&lt;-__PGOSF495_peftrusted&lt;-__PGOSF522_psdexsp&lt;-rpiswu2&lt;-psdextp&lt;-pefccal&lt;-pefcal&lt;-pevm_FCAL&lt;-pfrinstr_FCAL&lt;-pfrrun_no_tool&lt;-pfrrun&lt;-plsql_run
&lt;-peicnt&lt;-kkxexe&lt;-opiexe&lt;-kpoal8&lt;-opiodr&lt;-ttcpip&lt;-opitsk&lt;-opiino&lt;-opiodr&lt;-opidrv&lt;-sou2o&lt;-opimai_real&lt;-ssthrdmain&lt;-main&lt;-__libc_start_main&lt;-_start
 
Result=Realm Authorization Succeeded
        Realm_Name=jobowner realm       Used_Auth_Level=0
        Current_User=119
        Object_Owner=INVOKER1   Object_Name=T1  Object_Type=TABLE
        SQL_Text=UPDATE INVOKER1.T1 SET A = 20
 
Result=Scheduler Job Authorization Succeeded
        Current_User=JOBOWNER   Logon_User=INVOKER2
        Job_Owner=JOBOWNER      Job_Name=DMLJOB1
        Object_Owner=INVOKER1   Object_Name=T1  Object_Type=TABLE
        SQL_Text=UPDATE INVOKER1.T1 SET A = 20
</pre></div>
<!-- class="example" --></div>
</div>
<a id="DVADM71373"></a>
<div class="props_rev_3"><a id="GUID-81ED4F03-75D6-495B-B5C4-937559147300"></a>
<h3 id="DVADM-GUID-81ED4F03-75D6-495B-B5C4-937559147300" class="sect3">Disabling Oracle Database Vault Trace Events</h3>
<div>
<p>You can disable tracing for Oracle Database Vault events.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="troubleshooting.htm#GUID-9BDF5D74-28DF-48D5-991B-AF147C9BB0E9" title="You can use the ALTER SESSION SET EVENTS SQL statement to disable Database Vault tracing for the current database session.">Disabling Trace Events for the Current Database Session</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-064E501C-6BAA-4744-8C60-E7C6A2AE465E" title="You can use the ALTER SYSTEM SET EVENTS SQL statement to disable Database Vault tracing for all database sessions.">Disabling Trace Events for All Database Sessions</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-48B51F87-A38C-4808-833F-E0EC7BB9F413" title="You should be aware of how enabling trace events is affected in a multitenant environment.">Disabling Trace Events in a Multitenant Environment</a></p>
</li>
</ul>
</div>
<a id="DVADM71374"></a>
<div class="props_rev_3"><a id="GUID-9BDF5D74-28DF-48D5-991B-AF147C9BB0E9"></a>
<h4 id="DVADM-GUID-9BDF5D74-28DF-48D5-991B-AF147C9BB0E9" class="sect4">Disabling Trace Events for the Current Database Session</h4>
<div>
<p>You can use the <code class="codeph">ALTER SESSION SET EVENTS</code> SQL statement to disable Database Vault tracing for the current database session.</p>
<ol>
<li class="stepexpand"><span>Log into the database instance as a user who has been granted the <code class="codeph">DV_ADMIN</code> role and the <code class="codeph">ALTER SESSION</code> system privilege.</span>
<div>
<p>For example:</p>
<pre dir="ltr">sqlplus leo_dvowner
Enter password: <span class="italic">password</span>
Connected.
</pre></div>
</li>
<li class="stepexpand" id="GUID-9BDF5D74-28DF-48D5-991B-AF147C9BB0E9__BABIEADF"><span>Enter both of the following SQL statements to disable tracing:</span>
<div>
<pre dir="ltr">ALTER SESSION SET EVENTS &#39;TRACE[DV] OFF&#39;; 
ALTER SESSION SET EVENTS &#39;47998 trace name context off&#39;;
</pre>
<p>Alternatively, you can use the <code class="codeph">ALTER SYSTEM</code> statement as well:</p>
<pre dir="ltr">ALTER SYSTEM SET EVENTS &#39;TRACE[DV] OFF&#39;; 
ALTER SYSTEM SET EVENTS &#39;47998 trace name context off&#39;;
</pre></div>
</li>
</ol>
</div>
</div>
<a id="DVADM71375"></a>
<div class="props_rev_3"><a id="GUID-064E501C-6BAA-4744-8C60-E7C6A2AE465E"></a>
<h4 id="DVADM-GUID-064E501C-6BAA-4744-8C60-E7C6A2AE465E" class="sect4">Disabling Trace Events for All Database Sessions</h4>
<div>
<p>You can use the <code class="codeph">ALTER SYSTEM SET EVENTS</code> SQL statement to disable Database Vault tracing for all database sessions.</p>
<ol>
<li class="stepexpand"><span>Log into the database instance as a user who has been granted the <code class="codeph">DV_ADMIN</code> role and the <code class="codeph">ALTER SYSTEM</code> system privilege.</span>
<div>
<p>For example:</p>
<pre dir="ltr">sqlplus leo_dvowner
Enter password: <span class="italic">password</span>
Connected.
</pre></div>
</li>
<li class="stepexpand"><span>Enter the <code class="codeph">ALTER SYSTEM SET EVENTS</code> SQL statement, using the syntax that is shown in Step <a href="troubleshooting.htm#GUID-9BDF5D74-28DF-48D5-991B-AF147C9BB0E9__BABIEADF">2</a> in <a href="troubleshooting.htm#GUID-9BDF5D74-28DF-48D5-991B-AF147C9BB0E9" title="You can use the ALTER SESSION SET EVENTS SQL statement to disable Database Vault tracing for the current database session.">Disabling Trace Events for the Current Database Session</a>.</span>
<div>
<p>For example:</p>
<pre dir="ltr">ALTER SYSTEM SET EVENTS &#39;TRACE[DV] OFF&#39;; 
</pre></div>
</li>
<li class="stepexpand"><span>Restart the database.</span>
<div>
<p>For example:</p>
<pre dir="ltr">SHUTDOWN IMMEDIATE
STARTUP
</pre></div>
</li>
</ol>
<div class="section">
<p>Another way that you can disable trace events for all database sessions is to add the following line to the <code class="codeph">init.ora</code> file, and then restart the database:</p>
<pre dir="ltr">event=&#34;47998 trace name context off&#34;
</pre>
<p>Ensure that the <code class="codeph">init.ora</code> file does not have any conflicting <code class="codeph">47998</code> lines, such as <code class="codeph">event=&#34;47998 trace name context forever, level [1]&#34;</code>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM71536"></a>
<div class="props_rev_3"><a id="GUID-48B51F87-A38C-4808-833F-E0EC7BB9F413"></a>
<h4 id="DVADM-GUID-48B51F87-A38C-4808-833F-E0EC7BB9F413" class="sect4">Disabling Trace Events in a Multitenant Environment</h4>
<div>
<p>You should be aware of how enabling trace events is affected in a multitenant environment.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Trace events for the current session:</span> In a multitenant environment, running the <code class="codeph">ALTER SESSION SET EVENTS</code> SQL statement from either the root or a PDB disables tracing for the current user session. If you switch from one PDB to another PDB (by using the <code class="codeph">ALTER SESSION SET CONTAINER</code> statement), then tracing is still disabled for the new PDB. You cannot disable tracing for a single PDB in a CDB; it applies to all PDBs and the root. Remember that must have the <code class="codeph">ALTER SESSION SET CONTAINER</code> system privilege to move from one PDB to another.</p>
</li>
<li>
<p><span class="bold">Trace events for all database sessions:</span> In a multitenant environment, running the <code class="codeph">ALTER SYSTEM SET EVENTS</code> statement from either the root or a specific PDB disables tracing for all PDBs in the CDB.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<a id="DVADM71112"></a>
<div class="props_rev_3"><a id="GUID-D6B6CA0F-7F61-44BB-932A-011E9135A5F8"></a>
<h2 id="DVADM-GUID-D6B6CA0F-7F61-44BB-932A-011E9135A5F8" class="sect2">General Diagnostic Tips</h2>
<div>
<p>Oracle provides general tips for diagnosing problems in realms, factors, and rule sets.</p>
<p>These guidelines are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>For realm protections, verify that a user has the underlying system or object privileges (granted directly or through a role) that might affect the command.</p>
</li>
<li>
<p>If a realm authorization is not working, verify that the account roles are set correctly.</p>
</li>
<li>
<p>For PL/SQL expressions used in factors and rule sets, grant the <code class="codeph">EXECUTE</code> privilege on the PL/SQL package functions used in these expressions directly to the account and determine if the results appear to be correct.</p>
</li>
<li>
<p>Use the auditing reports to diagnose problems in general. See <a href="reports.htm#GUID-457714A0-F847-47DB-BC79-65AA70679835" title="If you have unified auditing enabled, then the Oracle Database Vault audit reports capture the results of unified audit policies.">Oracle Database Vault Auditing Reports</a> for more information.</p>
</li>
</ul>
</div>
</div>
<a id="DVADM71113"></a>
<div class="props_rev_3"><a id="GUID-5CB5950D-A9CB-4D97-AC99-14FF29923F0B"></a>
<h2 id="DVADM-GUID-5CB5950D-A9CB-4D97-AC99-14FF29923F0B" class="sect2">Configuration Problems with Oracle Database Vault Components</h2>
<div>
<p>Oracle Database Vault provides reports to check configuration problems with realms, command rules, factors, rule sets, or secure application roles.</p>
<p>See the following sections for more information:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="reports.htm#GUID-DB10DAF0-4E4C-4A11-A9B8-A227DC82D8AA" title="The Command Rule Configuration Issues Report displays command rules that have configuration issues.">Command Rule Configuration Issues Report</a></p>
</li>
<li>
<p><a href="reports.htm#GUID-A94B0EFE-DF5E-4E3E-B952-EF9047348370" title="The Factor Configuration Issues Report displays Oracle Database Vault factors configuration issues.">Factor Configuration Issues Report</a></p>
</li>
<li>
<p><a href="reports.htm#GUID-CDB7ACBE-8C0E-4D36-93F5-CF0E206A18FA" title="The Factor Without Identities Report displays Oracle Database Vault factors that have no identities configured.">Factor Without Identities Report</a></p>
</li>
<li>
<p><a href="reports.htm#GUID-4BB1C655-BCBA-4C9D-8793-10E9AFD9F51D" title="The Identity Configuration Issues Report displays Oracle Database Vault factor identity configuration issues.">Identity Configuration Issues Report</a></p>
</li>
<li>
<p><a href="reports.htm#GUID-9BB457EC-EDBD-48DB-9719-964FD8A4D7B4" title="The Realm Authorization Configuration Issues Report displays Oracle Database Vault realm configuration issues.">Realm Authorization Configuration Issues Report</a></p>
</li>
<li>
<p><a href="reports.htm#GUID-162BB69D-9C1F-4FB8-959E-1B8C21FE6FF9" title="The Rule Set Configuration Issues Report displays Oracle Database Vault rule set configuration issues.">Rule Set Configuration Issues Report</a></p>
</li>
<li>
<p><a href="reports.htm#GUID-0BEBF077-C4BA-471B-8789-85BD5A758421" title="The Secure Application Configuration Issues Report displays Database Vault secure application role configuration issues.">Secure Application Configuration Issues Report</a></p>
</li>
</ul>
<p>To run these reports, see <a href="reports.htm#GUID-3F39A72A-3833-4B20-B2FD-F283A448BD60" title="A user who has been granted the appropriate roles can run the Oracle Database Vault reports from Database Vault Administrator.">Running the Oracle Database Vault Reports</a>.</p>
</div>
</div>
<div class="sect2"><a id="GUID-6A419E95-F2E4-4F37-8B84-EFB78989BBDB"></a>
<h2 id="DVADM-GUID-6A419E95-F2E4-4F37-8B84-EFB78989BBDB" class="sect2">Resetting Oracle Database Vault Account Passwords</h2>
<div>
<p>Backup accounts can help you reset lost passwords for users who have been granted the <code class="codeph">DV_OWNER</code> and <code class="codeph">DV_ACCTMGR</code> roles.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="troubleshooting.htm#GUID-6CDCC278-CB47-4168-91E0-4C16F3D1C9B7" title="You can use the DV_OWNER backup account to reset the DV_OWNER user password.">Resetting the DV_OWNER User Password</a></p>
</li>
<li>
<p><a href="troubleshooting.htm#GUID-C266063F-AAB2-4E02-8923-C707FDA3744F" title="You can use the DV_ACCTMGR backup account to reset the DV_ACCTMGR user password.">Resetting the DV_ACCTMGR User Password</a></p>
</li>
</ul>
</div>
<div class="sect3"><a id="GUID-6CDCC278-CB47-4168-91E0-4C16F3D1C9B7"></a>
<h3 id="DVADM-GUID-6CDCC278-CB47-4168-91E0-4C16F3D1C9B7" class="sect3">Resetting the DV_OWNER User Password</h3>
<div>
<p>You can use the <code class="codeph">DV_OWNER</code> backup account to reset the <code class="codeph">DV_OWNER</code> user password.</p>
<div class="section">To reset the <code class="codeph">DV_OWNER</code> user password, you must temporarily revoke the <code class="codeph">DV_OWNER</code> role from this user, reset the password, and then re-grant the role back to the user.</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Log in to the database instance as the backup user for the <code class="codeph">DV_OWNER</code> user account.</span>
<div>
<p>For example:</p>
<pre dir="ltr">sqlplus dbv_owner_backup
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Revoke the <code class="codeph">DV_OWNER</code> role from the <code class="codeph">DV_OWNER</code> user who has lost the password.</span>
<div>
<p>For example:</p>
<pre dir="ltr">REVOKE DV_OWNER FROM dbv_owner;
</pre></div>
</li>
<li class="stepexpand"><span>Connect as a user who has been granted the <code class="codeph">DV_ACCTMGR</code> role.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT dbv_acctmgr
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Reset the password for the <code class="codeph">DV_OWNER</code> user.</span>
<div>
<pre dir="ltr">ALTER USER dbv_owner IDENTIFIED BY <span class="italic">password</span>;
</pre>
<p>Follow the guidelines in <a class="olink DBSEG33223" target="_blank" href="../DBSEG/authentication.htm#DBSEG33223"><span><cite>Oracle Database Security Guide</cite></span></a> to replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure.</p>
</div>
</li>
<li class="stepexpand"><span>Connect as the backup <code class="codeph">DV_OWNER</code> user.</span>
<div>
<pre dir="ltr">CONNECT dbv_owner_backup
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Grant the <code class="codeph">DV_OWNER</code> role back to the <code class="codeph">DV_OWNER</code> user.</span>
<div>
<pre dir="ltr">GRANT DV_OWNER TO dbv_owner;
</pre></div>
</li>
</ol>
<div class="section">
<div class="infobox-note" id="GUID-6CDCC278-CB47-4168-91E0-4C16F3D1C9B7__GUID-A046817D-D7E6-46CB-9FC6-CC4E537668AA">
<p class="notep1">Note:</p>
<p>Ensure that the backup <code class="codeph">DV_OWNER</code> account is safely stored in case it is needed again.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<div class="sect3"><a id="GUID-C266063F-AAB2-4E02-8923-C707FDA3744F"></a>
<h3 id="DVADM-GUID-C266063F-AAB2-4E02-8923-C707FDA3744F" class="sect3">Resetting the DV_ACCTMGR User Password</h3>
<div>
<p>You can use the <code class="codeph">DV_ACCTMGR</code> backup account to reset the <code class="codeph">DV_ACCTMGR</code> user password.</p>
<div class="section">To reset the <code class="codeph">DV_ACCTMGR</code> user password, you can use the backup <code class="codeph">DV_ACCTMGR</code> account to reset this user&rsquo;s password.</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Log in to the database instance as the backup user for the <code class="codeph">DV_ACCTMGR</code> user account.</span>
<div>
<p>For example:</p>
<pre dir="ltr">sqlplus dbv_acctmgr_backup
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Reset the password for the <code class="codeph">DV_ACCTMGR</code> user.</span>
<div>
<p>For example:</p>
<pre dir="ltr">ALTER USER dbv_acctmgr IDENTIFIED BY <span class="italic">password</span>;
</pre>
<p>Follow the guidelines in <a class="olink DBSEG33223" target="_blank" href="../DBSEG/authentication.htm#DBSEG33223"><span><cite>Oracle Database Security Guide</cite></span></a> to replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure.</p>
</div>
</li>
</ol>
<div class="section">
<div class="infobox-note" id="GUID-C266063F-AAB2-4E02-8923-C707FDA3744F__GUID-A046817D-D7E6-46CB-9FC6-CC4E537668AA">
<p class="notep1">Note:</p>
<p>Ensure that the backup <code class="codeph">DV_ACCTMGR</code> account is safely stored in case it is needed again.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment331">
<tr>
<td class="cellalignment359">
<table class="cellalignment336">
<tr>
<td class="cellalignment335"><a href="guidelines.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment335"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment361">
<table class="cellalignment334">
<tr>
<td class="cellalignment335"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment335"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment335"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment335"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment335"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment335"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>