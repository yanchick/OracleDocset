<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-5963"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Configuring%20Factors"></a><title>Configuring Factors</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="Factors enable you to base Database Vault restrictions on attributes such as a client IP address or a domain."/>
<meta name="keywords" content="factors, values (identities), databases, defined with factors, IP addresses, data Oracle Database Vault recognizes, domains, about, enterprise identities, Enterprise_Identity default factor, schema creation, Identification_Type default factor, names, Database_Name default factor, Database_IP default factor, instances, Database_Instance default factor, host names, Database_Hostname default factor, database domains, Database_Domain default factor, authentication, Authentication_Method default factor, Client_IP default factor, user name, Session_User default factor, database sessions, session user name, Proxy_User default factor, Oracle Internet Directory Distinguished Name, Proxy_Enterprise_Identity default factor, computer name, Machine default factor, network protocol, Network_Protocol default factor, languages, name, Lang default factor, Language default factor, domain, Domain default factor, default factors, creating, type (category of factor), factor type, selecting, naming conventions, factors, creating names, parent factors, child factors, identities, mapping, identified, resolving, database session, trust levels, how factor identities work, ways to assign, with Oracle Label Security, factors, identities, Oracle Real Application Clusters, multiple factor identities, evaluate, assigning, Oracle Label Security labels, labels, retrieval methods, validating, assignment, validate, rule sets, selecting, factors, selecting for, security attacks, tracking, with factor auditing, auditing, intruders, using factors, error options, errors, factor error options, audit options, options, adding to factor, factor identity, OLS, Oracle Label Security, Oracle Label Security (OLS), configuring, deleting, mapping, identifying using child factors, mapping, about, child factors, mapping, factor-identity pair mapping, mapping identities, mapping, procedure, functionality, process flow, factor evaluation, retrieving, tutorials, examples, setting, ad hoc tool access, preventing, ad hoc tools, preventing use of, administrators, restricting different types, users, restricting access by factor identity, mapping, tutorial, factors, mapping identities, restricting access based on session data, sessions, restricting data based on, guidelines, performance tools, TKPROF utility, Automatic Workload Repository (AWR), Oracle Enterprise Manager Cloud Control, Oracle Enterprise Manager, performance effect, reports, data dictionary views"/>
<meta name="dcterms.created" content="2017-06-05T10:50:14Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Vault Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49109-12"/>
<meta name="dcterms.isVersionOf" content="DVADM"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="cfcmdaut.htm" title="Previous" type="text/html"/>
<link rel="Next" href="cfseappr.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49109-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-26DF59FF-D0BF-496A-8D5B-6B2B6AC99822"></a> <span id="PAGE" style="display:none;">12/34</span> <!-- End Header -->
<a id="DVADM004"></a>
<h1 id="DVADM-GUID-26DF59FF-D0BF-496A-8D5B-6B2B6AC99822" class="sect1"><span class="enumeration_chapter">8</span> Configuring Factors</h1>
<div>
<p>Factors enable you to base Database Vault restrictions on attributes such as a client IP address or a domain.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="cfgfact.htm#GUID-B8410E32-B6A5-4850-9FDB-9B31018FE95F" title="A factor is a named variable or attribute, such as a database IP address, that Oracle Database Vault can recognize.">What Are Factors?</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-F4B06A72-933C-43B6-82CC-B7273B7F2696" title="Oracle Database Vault provides default factors.">Default Factors</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-84E260F7-FB2E-490A-997F-DDD7F4BD220A" title="In general, to create a factor, you first create the factor itself, and then you edit the factor to include its identity.">Creating a Factor</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-3317EBF9-3261-4D4C-8E46-51700CBEC4EA" title="After you create a new factor, you optionally can add an identity to it.">Adding an Identity to a Factor</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-7330B098-C9AB-4C28-848D-27CA6BA5B2C5" title="Before you delete a factor, you must remove references to the factor.">Deleting a Factor</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-E1D7B84F-57AD-4FBA-B99F-47E3BC64B91F" title="Oracle Database Vault processes factors when a session is established.">How Factors Work</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-9A320C0A-12D7-4414-B79F-512AD76FF436" title="This tutorial demonstrates how to use factors to prevent ad hoc tools (such as SQL*Plus) from accessing the database.">Tutorial: Preventing Ad Hoc Tool Access to the Database</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-33BAA236-2C0E-49AB-803A-89A3C2945A8B" title="This tutorial shows how to restrict user activities based on their session data, such as the domain the user is using.">Tutorial: Restricting User Activities Based on Session Data</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-F197EA7C-8AC2-4D7B-B5CB-7326CA1FABA7" title="Oracle provides guidelines for designing factors.">Guidelines for Designing Factors</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-F6EB02AD-18A4-4005-B3AA-89B23F31AC6B" title="The complexity of factors affects the performance of your Oracle database instance.">How Factors Affect Performance</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-1404DAD0-47FD-46D8-946F-1685C1AD5ADA" title="Oracle Database Vault provides reports and data dictionary views that display information about factors and their identities.">Factor Related Reports and Data Dictionary Views</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-26DF59FF-D0BF-496A-8D5B-6B2B6AC99822__GUID-29345EDD-A0D1-42B3-93A7-0C72FE8FD96C">
<p class="notep1">See Also:</p>
<p><a href="apis_factors.htm#GUID-75586A2C-ADCF-4421-A5C3-267E0AA878B2" title="The DBMS_MACADM PL/SQL package has factor-related Oracle Database Vault rule procedures and functions, and DVF has functions to manage factors.">Oracle Database Vault Factor APIs</a></p>
</div>
</div>
<a id="DVADM70224"></a>
<div class="props_rev_3"><a id="GUID-B8410E32-B6A5-4850-9FDB-9B31018FE95F"></a>
<h2 id="DVADM-GUID-B8410E32-B6A5-4850-9FDB-9B31018FE95F" class="sect2">What Are Factors?</h2>
<div>
<p>A factor is a named variable or attribute, such as a database IP address, that Oracle Database Vault can recognize.</p>
<p>You can use factors for activities such as authorizing database accounts to connect to the database or creating filtering logic to restrict the visibility and manageability of data.</p>
<p>Oracle Database Vault provides a selection of factors that lets you set controls on such components as the domain for your site, IP addresses, databases, and so on. You also can create custom factors, using your own PL/SQL retrieval methods.</p>
<p>Note the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>You can use factors in combination with rules in rule sets. The <code class="codeph">DVF</code> factor functions are factor-specific functions that you can use in rule expressions.</p>
</li>
<li>
<p>Factors have values (identities) and are further categorized by their factor types. See &#34;Factor Type&#34; in <a href="cfgfact.htm#GUID-45162827-2A09-4C62-BBFD-5710685583D9" title="In the General page, you must enter general identifying information for the factor, such as its name.">Completing the General Page for Factor Creation</a> for information about factor types.</p>
</li>
<li>
<p>You also can integrate factors with Oracle Label Security labels.</p>
</li>
<li>
<p>You can run reports on the factors that you create in Oracle Database Vault. See for more information.</p>
</li>
</ul>
<p>This chapter explains how to configure factors by using Oracle Database Vault Administrator. Alternatively, you can use the Oracle Database Vault factor APIs to configure factors.</p>
<div class="infoboxnotealso" id="GUID-B8410E32-B6A5-4850-9FDB-9B31018FE95F__GUID-53452F4B-8575-4918-A2B6-F7D316B70BD1">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="apis_factors.htm#GUID-364245B9-C339-488A-8D49-B8B01B667857" title="Oracle Database Vault maintains the DVF schema functions when you use the DBMS_MACADM PL/SQL package to manage the various factors.">Oracle Database Vault DVF PL/SQL Factor Functions</a></p>
</li>
<li>
<p><a href="apis_factors.htm#GUID-75586A2C-ADCF-4421-A5C3-267E0AA878B2" title="The DBMS_MACADM PL/SQL package has factor-related Oracle Database Vault rule procedures and functions, and DVF has functions to manage factors.">Oracle Database Vault Factor APIs</a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="DVADM70225"></a>
<div class="props_rev_3"><a id="GUID-F4B06A72-933C-43B6-82CC-B7273B7F2696"></a>
<h2 id="DVADM-GUID-F4B06A72-933C-43B6-82CC-B7273B7F2696" class="sect2">Default Factors</h2>
<div>
<p>Oracle Database Vault provides default factors.</p>
<div class="section">
<p>For each of these factors, there is an associated function that retrieves the value of the factor. See <a href="apis_factors.htm#GUID-364245B9-C339-488A-8D49-B8B01B667857" title="Oracle Database Vault maintains the DVF schema functions when you use the DBMS_MACADM PL/SQL package to manage the various factors.">Oracle Database Vault DVF PL/SQL Factor Functions</a> for a listing of these functions.</p>
<p>You can create custom factors by using your own PL/SQL retrieval methods. A useful PL/SQL function you can use (which is used for many of the default factors) is the <code class="codeph">SYS_CONTEXT</code> SQL function, which retrieves data about the user session. For example, you can use the <code class="codeph">CLIENT_PROGRAM_NAME</code> attribute of <code class="codeph">SYS_CONTEXT</code> to find the name of the program used for the database session. After you create the custom factor, you can query its values similar to the functions used to query the default factors.</p>
<p>See <a class="olink SQLRF06117" target="_blank" href="../SQLRF/functions199.htm#SQLRF06117"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for more information about the <code class="codeph">SYS_CONTEXT</code> function.</p>
<p>You can use the default factors in your own security configurations. If you do not need them, you can remove them. (That is, they are not needed for internal use by Oracle Database Vault.)</p>
<p>The default factors are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Authentication_Method:</span> Is the method of authentication. In the list that follows, the type of user is followed by the method returned:</p>
<ul style="list-style-type: disc;">
<li>
<p>Password-authenticated enterprise user, local database user, or <code class="codeph">SYSDBA</code>/<code class="codeph">SYSOPER</code> using Password File; proxy with user name using password: <code class="codeph">PASSWORD</code></p>
</li>
<li>
<p>Kerberos-authenticated enterprise or external user: <code class="codeph">KERBEROS</code></p>
</li>
<li>
<p>SSL-authenticated enterprise or external user: <code class="codeph">SSL</code></p>
</li>
<li>
<p>Radius-authenticated external user: <code class="codeph">RADIUS</code></p>
</li>
<li>
<p>Operating system-authenticated external user or <code class="codeph">SYSDBA</code>/<code class="codeph">SYSOPER</code>: <code class="codeph">OS</code></p>
</li>
<li>
<p>DCE-authenticated external user: <code class="codeph">DCE</code></p>
</li>
<li>
<p>Proxy with certificate, distinguished name (DN), or user name without using password: <code class="codeph">NONE</code></p>
</li>
</ul>
<p>You can use <code class="codeph">IDENTIFICATION_TYPE</code> to distinguish between external and enterprise users when the authentication method is Password, Kerberos, or SSL.</p>
</li>
<li>
<p><span class="bold">Client_IP:</span> Is the IP address of the machine from which the client is connected.</p>
</li>
<li>
<p><span class="bold">Database_Domain:</span> Is the domain of the database as specified in the <code class="codeph">DB_DOMAIN</code> initialization parameter.</p>
</li>
<li>
<p><span class="bold">Database_Hostname:</span> Is the host name of the computer on which the instance is running.</p>
</li>
<li>
<p><span class="bold">Database_Instance:</span> Is the instance identification number of the current instance.</p>
</li>
<li>
<p><span class="bold">Database_IP:</span> Is the IP address of the computer on which the instance is running.</p>
</li>
<li>
<p><span class="bold">Database_Name:</span> Is the name of the database as specified in the <code class="codeph">DB_NAME</code> initialization parameter.</p>
</li>
<li>
<p><span class="bold">Domain:</span> Is a named collection of physical, configuration, or implementation-specific factors in the run-time environment (for example, a networked IT environment or subset of it) that operates at a specific sensitivity level. You can identify a domain using factors such as host name, IP address, and database instance names of the Database Vault nodes in a secure access path to the database. Each domain can be uniquely determined using a combination of the factor identifiers that identify the domain. You can use these identifying factors and possibly additional factors to define the Maximum Security Label within the domain. This restricts data access and commands, depending on the physical factors about the Database Vault session. Example domains of interest may be Corporate Sensitive, Internal Public, Partners, and Customers.</p>
</li>
<li>
<p><span class="bold">Enterprise_Identity:</span> Is the enterprise-wide identity for the user:</p>
<ul style="list-style-type: disc;">
<li>
<p>For enterprise users: the Oracle Internet Directory-distinguished name (DN).</p>
</li>
<li>
<p>For external users: the external identity (Kerberos principal name, Radius and DCE schema names, operating system user name, certificate DN).</p>
</li>
<li>
<p>For local users and <code class="codeph">SYSDBA</code> and <code class="codeph">SYSOPER</code> logins: NULL.</p>
</li>
</ul>
<p>The value of the attribute differs by proxy method:</p>
<ul style="list-style-type: disc;">
<li>
<p>For a proxy with DN: the Oracle Internet Directory DN of the client.</p>
</li>
<li>
<p>For a proxy with certificate: the certificate DN of the client for external users; the Oracle Internet Directory DN for global users.</p>
</li>
<li>
<p>For a proxy with user names: the Oracle Internet Directory DN if the client is an enterprise user; NULL if the client is a local database user.</p>
</li>
</ul>
</li>
<li>
<p><span class="bold">Identification_Type:</span> Is the way the user schema was created in the database. Specifically, it reflects the <code class="codeph">IDENTIFIED</code> clause in the <code class="codeph">CREATE</code>/<code class="codeph">ALTER USER</code> syntax. In the list that follows, the syntax used during schema creation is followed by the identification type returned:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">IDENTIFIED BY</code> <span class="italic"><code class="codeph">password</code></span>: <code class="codeph">LOCAL</code></p>
</li>
<li>
<p><code class="codeph">IDENTIFIED EXTERNALLY</code>: <code class="codeph">EXTERNAL</code></p>
</li>
<li>
<p><code class="codeph">IDENTIFIED GLOBALLY</code>: <code class="codeph">GLOBAL SHARED</code></p>
</li>
<li>
<p><code class="codeph">IDENTIFIED GLOBALLY</code> <code class="codeph">AS DN</code>: <code class="codeph">GLOBAL PRIVATE</code></p>
</li>
</ul>
</li>
<li>
<p><span class="bold">Lang:</span> Is the ISO abbreviation for the language name, a shorter form than the existing <code class="codeph">LANGUAGE</code> parameter.</p>
</li>
<li>
<p><span class="bold">Language:</span> Is the language and territory your session currently uses, along with the database character set, in the following form:</p>
<pre dir="ltr"><span class="italic">language_territory</span>.<span class="italic">characterset</span>
</pre>
<p>For example:</p>
<pre dir="ltr">AMERICAN_AMERICA.WE8MSWIN1252
</pre>
<p>Refer to <a class="olink NLSPG" target="_blank" href="../NLSPG/toc.htm"><span><cite>Oracle Database Globalization Support Guide</cite></span></a> for more information about languages, territories, and character sets.</p>
</li>
<li>
<p><span class="bold">Machine:</span> Is the host name for the database client that established the current session. If you must find out whether the computer was used for a client or server session, then you can compare this setting with the Database_Hostname factor to make the determination.</p>
</li>
<li>
<p><span class="bold">Network_Protocol:</span> Is the network protocol being used for communication, as specified in the <code class="codeph">PROTOCOL=protocol</code> portion of the connect string.</p>
</li>
<li>
<p><span class="bold">Proxy_Enterprise_Identity:</span> Is the Oracle Internet Directory DN when the proxy user is an enterprise user.</p>
</li>
<li>
<p><span class="bold">Proxy_User:</span> Is the name of the database user who opened the current session on behalf of <code class="codeph">SESSION_USER</code>.</p>
</li>
<li>
<p><span class="bold">Session_User:</span> Is the database user name by which the current user is authenticated. This value remains the same throughout the session.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM70226"></a>
<div class="props_rev_3"><a id="GUID-84E260F7-FB2E-490A-997F-DDD7F4BD220A"></a>
<h2 id="DVADM-GUID-84E260F7-FB2E-490A-997F-DDD7F4BD220A" class="sect2">Creating a Factor</h2>
<div>
<p>In general, to create a factor, you first create the factor itself, and then you edit the factor to include its identity.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="cfgfact.htm#GUID-4DBC72EA-1308-4569-B9F6-462F349B0B09" title="The Create Factors page enables you to create the factor, starting with a general definition of the factor that you want to create.">Accessing the Create Factors Page</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-45162827-2A09-4C62-BBFD-5710685583D9" title="In the General page, you must enter general identifying information for the factor, such as its name.">Completing the General Page for Factor Creation</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-9AE18686-4A5C-4462-BBC7-CCA120887D30" title="The Configurations page defines settings such as the factor&#39;s identification and the evaluation method.">Configurations Page for Factor Creation</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-C66D5BDA-2AE4-433E-ABFC-6C04561B4683" title="The Options page assigns a rule set to a factor, sets error options, and for non-unified auditing, sets audit options.">Options Page of Factor Creation</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-AA6DA56D-EE20-4BB7-AB59-18466A7E8EF0" title="You can create and configure a factor identity in Oracle Database Vault Administrator.">Creating and Configuring a Factor Identity</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-84E260F7-FB2E-490A-997F-DDD7F4BD220A__GUID-C902ABAD-660A-46A1-8FA5-DAA02BC76906">
<p class="notep1">See Also:</p>
<a href="cfgfact.htm#GUID-F197EA7C-8AC2-4D7B-B5CB-7326CA1FABA7" title="Oracle provides guidelines for designing factors.">Guidelines for Designing Factors</a></div>
</div>
<a id="DVADM71442"></a>
<div class="props_rev_3"><a id="GUID-4DBC72EA-1308-4569-B9F6-462F349B0B09"></a>
<h3 id="DVADM-GUID-4DBC72EA-1308-4569-B9F6-462F349B0B09" class="sect3">Accessing the Create Factors Page</h3>
<div>
<p>The Create Factors page enables you to create the factor, starting with a general definition of the factor that you want to create.</p>
<ol>
<li class="stepexpand"><span>From Cloud Control, log into Oracle Database Vault Administrator as a user who has been granted the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role.</span>
<div>
<p><a href="getting_started.htm#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for Oracle Database Vault.">Logging into Oracle Database Vault</a> explains how to log in.</p>
</div>
</li>
<li class="stepexpand"><span>In the Administration page, under Database Vault Components, click <span class="bold">Factors</span>.</span></li>
<li class="stepexpand"><span>In the Factors page, click <span class="bold">Create</span> to display the Create Factor page.</span>
<div><br/>
<img width="1010" height="434" src="img/GUID-49785934-A783-48F5-8313-47ECB4CA7E0E-default.png" alt="Description of GUID-49785934-A783-48F5-8313-47ECB4CA7E0E-default.png follows" title="Description of GUID-49785934-A783-48F5-8313-47ECB4CA7E0E-default.png follows"/><br/>
<a href="img_text/GUID-49785934-A783-48F5-8313-47ECB4CA7E0E-default.htm">Description of the illustration GUID-49785934-A783-48F5-8313-47ECB4CA7E0E-default.png</a><br/></div>
</li>
<li class="stepexpand"><span>Starting with the General page, enter the following information, clicking <span class="bold">Next</span> to go to each subsequent page, and then clicking <span class="bold">Done</span> and <span class="bold">Finish</span> when the factor definition is complete.</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><a href="cfgfact.htm#GUID-45162827-2A09-4C62-BBFD-5710685583D9" title="In the General page, you must enter general identifying information for the factor, such as its name.">Completing the General Page for Factor Creation</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-9AE18686-4A5C-4462-BBC7-CCA120887D30" title="The Configurations page defines settings such as the factor&#39;s identification and the evaluation method.">Configurations Page for Factor Creation</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-C66D5BDA-2AE4-433E-ABFC-6C04561B4683" title="The Options page assigns a rule set to a factor, sets error options, and for non-unified auditing, sets audit options.">Options Page of Factor Creation</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-AA6DA56D-EE20-4BB7-AB59-18466A7E8EF0" title="You can create and configure a factor identity in Oracle Database Vault Administrator.">Creating and Configuring a Factor Identity</a></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<a id="DVADM71281"></a>
<div class="props_rev_3"><a id="GUID-45162827-2A09-4C62-BBFD-5710685583D9"></a>
<h3 id="DVADM-GUID-45162827-2A09-4C62-BBFD-5710685583D9" class="sect3">Completing the General Page for Factor Creation</h3>
<div>
<p>In the General page, you must enter general identifying information for the factor, such as its name.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>In the General page, enter the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Name:</span> Enter a name up to 28 characters in mixed-case, without spaces. Oracle Database Vault creates a valid Oracle identifier for the factor function to be created in the <code class="codeph">DVF</code> schema based on the name of the factor chosen. For example, if you create a factor named <code class="codeph">GetNetworkIP</code>, Oracle Database Vault creates the <code class="codeph">DVF.F$GETNETWORKIP</code> function. This attribute is mandatory.</p>
<p>Oracle suggests that you start the name with a noun and complete the name with a brief description of the derived value.</p>
<p><span class="q">&#34;<a href="apis_factors.htm#GUID-364245B9-C339-488A-8D49-B8B01B667857" title="Oracle Database Vault maintains the DVF schema functions when you use the DBMS_MACADM PL/SQL package to manage the various factors.">Oracle Database Vault DVF PL/SQL Factor Functions</a>&#34;</span> describes the <code class="codeph">DVF</code> factor functions.</p>
</li>
<li>
<p><span class="bold">Description:</span> Enter a text description of the factor. It can have up to 1024 characters in mixed-case. This attribute is optional.</p>
</li>
<li>
<p><span class="bold">Factor Type:</span> From the list, select the type or category of the factor. This attribute is mandatory.</p>
<p>Factor types have a name and description and are used only to help classify factors. A factor type is the category name used to classify the factor. The default physical factor types include authentication method, host name, host IP address, instance identifiers, database account information, and others. You can create user-defined factor types, such as application name, certificate information, and so on in addition to the installed factor types, such as time and authentication method.</p>
<p>You can find the factors that are associated with a particular factor type by querying the <code class="codeph">DVSYS.DBA_DV_FACTOR</code> data dictionary view. For example:</p>
<pre dir="ltr">SELECT NAME FROM DVSYS.DBA_DV_FACTOR 
WHERE FACTOR_TYPE_NAME=&#39;Authentication Method&#39;;
</pre>
<p>The output is:</p>
<pre dir="ltr">NAME
------------------------------
Network_Protocol
Authentication_Method
Identification_Type
</pre></li>
</ul>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM71282"></a>
<div class="props_rev_3"><a id="GUID-9AE18686-4A5C-4462-BBC7-CCA120887D30"></a>
<h3 id="DVADM-GUID-9AE18686-4A5C-4462-BBC7-CCA120887D30" class="sect3">Configurations Page for Factor Creation</h3>
<div>
<p>The Configurations page defines settings such as the factor&#39;s identification and the evaluation method.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="cfgfact.htm#GUID-6FD3B138-AAFB-455A-B9F6-5F58CD06219E" title="Under Factor Identification, you must select how to resolve the identity of a factor.">Setting the Factor Identification Information</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-8C84E045-A973-4E90-9682-6A607BE745D0" title="A factor identity is the actual value of a factor (for example, the IP address for a factor that uses the IP_Address type).">How Factor Identities Work</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-46146713-138D-4C56-A624-0E7C8D9EE221" title="Under Evaluation, you must select how you want the factor to be evaluated and assigned an identity.">Setting the Evaluation Information for a Factor</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-76A0178F-E6EB-4589-B908-C96071CFCCCE" title="Under Factor Labeling, you must select how you want the factor identity to retrieve an Oracle Label Security (OLS) label.">Setting the Oracle Label Security Labeling Information for a Factor</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-9B14F55D-CE57-48FA-9BD5-0D9E551E77D6" title="Under Retrieval Method, you must enter a PL/SQL expression that retrieves the identity of a factor or a constant.">Setting the Retrieval Method for a Factor</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-402C3F02-8F7F-4FB8-BA2B-0C8AC07D9F3E" title="The Retrieval Method identifies factors where the factor identification is by method or constant.">How Retrieval Methods Work</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-24020798-C139-4BF2-8E3C-1CD2EB6BCDC9" title="A validation method uses a PL/SQL expression to return a Boolean value to validate the identity of a factor.">Setting the Validation Method for a Factor</a></p>
</li>
</ul>
</div>
<a id="DVADM70228"></a>
<div class="props_rev_3"><a id="GUID-6FD3B138-AAFB-455A-B9F6-5F58CD06219E"></a>
<h4 id="DVADM-GUID-6FD3B138-AAFB-455A-B9F6-5F58CD06219E" class="sect4">Setting the Factor Identification Information</h4>
<div>
<p>Under Factor Identification, you must select how to resolve the identity of a factor.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>In the Configurations page, under Factor Identification, enter the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">By Method:</span> Sets the factor identity by executing the PL/SQL expression specified in the <span class="bold">Retrieval Method</span> field.</p>
<p>For example, suppose the expression retrieves the system date:</p>
<pre dir="ltr">to_char(sysdate,&#39;yyyy-mm-dd&#39;)
</pre>
<p>On December 15, 2014, the <span class="bold">By Method</span> option would return the following value:</p>
<pre dir="ltr">2014-12-15
</pre></li>
<li>
<p><span class="bold">By Constant:</span> Resolves the factor identity by retrieving the constant value found in the <span class="bold">Retrieval Method</span> field.</p>
</li>
<li>
<p><span class="bold">By Factors:</span> Determines the factor identity by mapping the identities of the child factor to its parent factor. A parent factor is a factor whose values are resolved based on a second factor, called a child factor. To establish their relationship, you map their identities. (You do not need to specify a <span class="bold">Retrieval Method</span> expression for this option.)</p>
<p>See <a href="cfgfact.htm#GUID-08304327-0072-4170-AC13-CBE1DDB6D136" title="You can use identity mapping to use a group of factors to manage identity values.">Using Identity Mapping to Configure an Identity to Use Other Factors</a> for more information about mapping identities.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM71443"></a>
<div class="props_rev_3"><a id="GUID-8C84E045-A973-4E90-9682-6A607BE745D0"></a>
<h4 id="DVADM-GUID-8C84E045-A973-4E90-9682-6A607BE745D0" class="sect4">How Factor Identities Work</h4>
<div>
<p>A factor identity is the actual value of a factor (for example, the IP address for a factor that uses the IP_Address type).</p>
<p>A factor can have several identities depending on its retrieval method or its identity mapping logic. For example, a factor such as Database_Hostname could have multiple identities in an Oracle Real Application Clusters environment; a factor such as Client_IP can have multiple identities in any RDBMS environment. The retrieval method for these types of factors may return different values because the retrieval method is based on the database session.</p>
<p>Several reports allow you to track the factor identity configuration. See <a href="cfgfact.htm#GUID-1404DAD0-47FD-46D8-946F-1685C1AD5ADA" title="Oracle Database Vault provides reports and data dictionary views that display information about factors and their identities.">Factor Related Reports and Data Dictionary Views</a> for more information.</p>
<p>You can configure the assignment of a factor in the following ways:</p>
<ul style="list-style-type: disc;">
<li>
<p>Assign the factor at the time a database session is established.</p>
</li>
<li>
<p>Configure individual requests to retrieve the identity of the factor.</p>
</li>
</ul>
<p>With the Oracle Label Security integration, you can label identities with an Oracle Label Security label. You can also assign an identity <span class="italic">trust levels</span>, which are numbers that indicate the magnitude of trust relative to other identities for the same factor. In general, the higher the trust level number is set, the greater the trust. Negative trust levels are not trusted.</p>
<p>Within a database session, a factor assigned identity is available to Oracle Database Vault and any application with a publicly accessible PL/SQL function that exists in the <code class="codeph">DVF</code> schema (which contains functions that retrieve factor values) as follows:</p>
<p><code class="codeph">dvf.f$</code><span class="italic"><code class="codeph">factor_name</code></span></p>
<p>This allows the identifier for a factor to be accessed globally from within the Oracle database (using PL/SQL, SQL, Oracle Virtual Private Database, triggers, and so on). For example, in SQL*Plus:</p>
<pre dir="ltr">CONNECT leo_dvowner
Enter password: <span class="italic">password</span>    

SELECT DVF.F$DATABASE_IP FROM DUAL;
</pre>
<p>Output similar to the following appears:</p>
<pre dir="ltr">SELECT DVF.F$DATABASE_IP FROM DUAL;

F$DATABASE_IP
-------------------------------------------------------------
192.0.2.1
</pre>
<p>You can also use the <code class="codeph">DVSYS.GET_FACTOR</code> function to find the identity of a factor that is made available for public access. For example:</p>
<pre dir="ltr">SELECT DVSYS.GET_FACTOR(&#39;DATABASE_IP&#39;) FROM DUAL;
</pre>
<p>The following output appears:</p>
<pre dir="ltr">GET_FACTOR(&#39;DATABASE_IP&#39;)
-------------------------------------------------------------
192.0.2.1
</pre>
<div class="infoboxnotealso" id="GUID-8C84E045-A973-4E90-9682-6A607BE745D0__GUID-FBBD5E26-9E20-4B46-8C32-AA14B7B5AC06">
<p class="notep1">See Also:</p>
<p><a href="cfgfact.htm#GUID-3317EBF9-3261-4D4C-8E46-51700CBEC4EA" title="After you create a new factor, you optionally can add an identity to it.">Adding an Identity to a Factor</a> for more information about factor identities</p>
</div>
</div>
</div>
<a id="DVADM70229"></a>
<div class="props_rev_3"><a id="GUID-46146713-138D-4C56-A624-0E7C8D9EE221"></a>
<h4 id="DVADM-GUID-46146713-138D-4C56-A624-0E7C8D9EE221" class="sect4">Setting the Evaluation Information for a Factor</h4>
<div>
<p>Under Evaluation, you must select how you want the factor to be evaluated and assigned an identity.</p>
<div class="section">
<p>See <a href="cfgfact.htm#GUID-F6EB02AD-18A4-4005-B3AA-89B23F31AC6B" title="The complexity of factors affects the performance of your Oracle database instance.">How Factors Affect Performance</a> for the performance effect of session factors. This attribute is mandatory.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>In the Configurations page, under Evaluation, enter the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">For Session:</span> Evaluates the factor when a database session is created.</p>
</li>
<li>
<p><span class="bold">By Access:</span> Evaluates the factor each time it is accessed (for example, referenced by an application) and when the database session is first created.</p>
</li>
<li>
<p><span class="bold">On Startup:</span> Evaluates the factor when the database session starts.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM70230"></a>
<div class="props_rev_3"><a id="GUID-76A0178F-E6EB-4589-B908-C96071CFCCCE"></a>
<h4 id="DVADM-GUID-76A0178F-E6EB-4589-B908-C96071CFCCCE" class="sect4">Setting the Oracle Label Security Labeling Information for a Factor</h4>
<div>
<p>Under Factor Labeling, you must select how you want the factor identity to retrieve an Oracle Label Security (OLS) label.</p>
<div class="section">
<p>This setting applies if you plan to use the Oracle Label Security integration. This attribute is mandatory if you want to use an OLS label. (See also <a href="dv_ols.htm#GUID-41CF584E-84D5-4912-A113-043D52C9EF06" title="You can integrate Oracle Database Vault with Oracle Label Security, and check the integration with reports and data dictionary views.">Integrating Oracle Database Vault with Oracle Label Security</a> for information on integrating OLS labels with a factors.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>In the Configurations page, under Factor Labeling, enter the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">By Self:</span> Labels the identities for the factor directly from the labels associated with an Oracle Label Security policy.</p>
</li>
<li>
<p><span class="bold">By Factors:</span> If there are multiple child factor labels, then Oracle Database Vault merges the labels by using the Oracle Label Security algorithm that is associated with the applicable Oracle Label Security policy. For each applicable Oracle Label Security policy, a factor identity can have an assigned label.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM70231"></a>
<div class="props_rev_3"><a id="GUID-9B14F55D-CE57-48FA-9BD5-0D9E551E77D6"></a>
<h4 id="DVADM-GUID-9B14F55D-CE57-48FA-9BD5-0D9E551E77D6" class="sect4">Setting the Retrieval Method for a Factor</h4>
<div>
<p>Under Retrieval Method, you must enter a PL/SQL expression that retrieves the identity of a factor or a constant.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>In the Configurations page, under Retrieval Method, enter a PL/SQL retrieval method. It can use up to 255 characters in mixed-case.</p>
</li>
</ul>
<p>The following retrieval method sets a value of the DB_NAME factor by retrieving the database name (DB_NAME) from the <code class="codeph">USERENV</code> namespace in a user&#39;s session.</p>
<pre dir="ltr">UPPER(SYS_CONTEXT(&#39;USERENV&#39;,&#39;DB_NAME&#39;))
</pre></div>
<!-- class="section" --></div>
</div>
<a id="DVADM71444"></a>
<div class="props_rev_3"><a id="GUID-402C3F02-8F7F-4FB8-BA2B-0C8AC07D9F3E"></a>
<h4 id="DVADM-GUID-402C3F02-8F7F-4FB8-BA2B-0C8AC07D9F3E" class="sect4">How Retrieval Methods Work</h4>
<div>
<p>The Retrieval Method identifies factors where the factor identification is by method or constant.</p>
<p>If the factor identification is by factors, Oracle Database Vault identifies it by its identity mappings. You can create your own PL/SQL retrieval methods, or use the functions supplied with Oracle Database Vault. See the following sections for factor-specific and general utility functions that you can use to build the retrieval method:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="apis_factors.htm#GUID-364245B9-C339-488A-8D49-B8B01B667857" title="Oracle Database Vault maintains the DVF schema functions when you use the DBMS_MACADM PL/SQL package to manage the various factors.">Oracle Database Vault DVF PL/SQL Factor Functions</a></p>
</li>
<li>
<p><a href="apis_factors.htm#GUID-D7C3A134-8B39-4352-AFCC-DDDE6DB5DC30" title="The DBMS_MACADM PL/SQL package provides procedures and functions to configure factors.">DBMS_MACADM Factor Procedures and Functions</a></p>
</li>
<li>
<p><a href="apis_dbms_macutl.htm#GUID-5A0CB405-9A3C-48ED-B18F-3A8013D436E3" title="Oracle Database Vault provides a set of utility APIs in the DBMS_MACUTL PL/SQL package.">Oracle Database Vault Utility APIs</a></p>
</li>
</ul>
<p>See also the default factors provided with Oracle Database Vault for examples of retrieval methods. <a href="cfgfact.htm#GUID-F4B06A72-933C-43B6-82CC-B7273B7F2696" title="Oracle Database Vault provides default factors.">Default Factors</a> describes these factors.</p>
<p>The <span class="bold">Retrieval Method</span> field is mandatory if you have selected the following settings under Factor Identification:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">By Method:</span> Enter a method in the Retrieval Method field.</p>
</li>
<li>
<p><span class="bold">By Constant:</span> Enter a constant in the Retrieval Method field.</p>
</li>
</ul>
<p>The value returned as the factor identity must be a <code class="codeph">VARCHAR2</code> string or otherwise convertible to one.</p>
<p>You can include any package function or standalone function in the expression. Ensure that the expression is a fully qualified function, such as <span class="italic"><code class="codeph">schema</code></span>.<span class="italic"><code class="codeph">function_name</code></span>. Do not include complete SQL statements. If you are using application packages or functions, you must provide <code class="codeph">DVSYS</code> with the <code class="codeph">GRANT EXECUTE</code> privilege on the object.</p>
<p>Write the function signature using the following format:</p>
<pre dir="ltr">FUNCTION GET_FACTOR RETURN VARCHAR2
</pre></div>
</div>
<a id="DVADM70232"></a>
<div class="props_rev_3"><a id="GUID-24020798-C139-4BF2-8E3C-1CD2EB6BCDC9"></a>
<h4 id="DVADM-GUID-24020798-C139-4BF2-8E3C-1CD2EB6BCDC9" class="sect4">Setting the Validation Method for a Factor</h4>
<div>
<p>A validation method uses a PL/SQL expression to return a Boolean value to validate the identity of a factor.</p>
<div class="section">
<p>Under Validation Method, you must enter a PL/SQL expression that returns a Boolean value (<code class="codeph">TRUE</code> or <code class="codeph">FALSE</code>) to validate the identity of a factor being retrieved (with the <code class="codeph">DVSYS.GET_FACTOR</code> function) or the value to be assigned to a factor (with the <code class="codeph">DVSYS.SET_FACTOR</code> function).</p>
<p>If the method is evaluated to false for the value being retrieved or to be assigned, then the factor identity is set to null. This optional feature provides an additional level of assurance that the factor is properly retrieved and set. This field can have up to 255 characters in mixed-case.</p>
<p>You can include any package function or standalone function in the expression. Ensure that the expression is a fully qualified function, such as <span class="italic"><code class="codeph">schema</code></span>.<span class="italic"><code class="codeph">function_name</code></span>. Do not include complete SQL statements. If you are using application packages or functions, then you must provide <code class="codeph">DVSYS</code> with the <code class="codeph">GRANT EXECUTE</code> privilege on the object.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>In the Configurations page, under Validation method, create a function that uses any of the following formats:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">FUNCTION</code> <code class="codeph">IS_VALID</code> <code class="codeph">RETURN BOOLEAN</code></p>
<p>In this form, you can use the <code class="codeph">DVF.F$</code><span class="italic"><code class="codeph">factor_name</code></span> function inside the function logic. This is more appropriate for factors that are evaluated by session.</p>
</li>
<li>
<p><code class="codeph">FUNCTION</code> <code class="codeph">IS_VALID</code><code class="codeph">(</code><span class="italic"><code class="codeph">p_factor_value</code></span> <code class="codeph">VARCHAR2</code><code class="codeph">)</code> <code class="codeph">RETURN BOOLEAN</code></p>
<p>In this form, the factor value is passed to the validation function directly. This is more appropriate for factors that are evaluated by access. It is also valid for factors evaluated by session.</p>
</li>
</ul>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-24020798-C139-4BF2-8E3C-1CD2EB6BCDC9__GUID-BA2CAF34-71F9-47C8-BB6B-7F193A2CEAA0">
<p class="notep1">See Also:</p>
<p>See the following sections for factor-specific and general utility functions that you can use to build the validation method:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="apis_factors.htm#GUID-D7C3A134-8B39-4352-AFCC-DDDE6DB5DC30" title="The DBMS_MACADM PL/SQL package provides procedures and functions to configure factors.">DBMS_MACADM Factor Procedures and Functions</a></p>
</li>
<li>
<p><a href="apis_factors.htm#GUID-CC99DA3D-72F9-400A-854B-FED379B07ABE" title="Oracle Database Vault provides a set of procedural interfaces to administer various Database Vault security options and manage Database Vault security enforcements.">Oracle Database Vault Run-Time PL/SQL Procedures and Functions</a></p>
</li>
<li>
<p><a href="apis_factors.htm#GUID-364245B9-C339-488A-8D49-B8B01B667857" title="Oracle Database Vault maintains the DVF schema functions when you use the DBMS_MACADM PL/SQL package to manage the various factors.">Oracle Database Vault DVF PL/SQL Factor Functions</a></p>
</li>
<li>
<p><a href="apis_dbms_macutl.htm#GUID-5A0CB405-9A3C-48ED-B18F-3A8013D436E3" title="Oracle Database Vault provides a set of utility APIs in the DBMS_MACUTL PL/SQL package.">Oracle Database Vault Utility APIs</a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="DVADM71283"></a>
<div class="props_rev_3"><a id="GUID-C66D5BDA-2AE4-433E-ABFC-6C04561B4683"></a>
<h3 id="DVADM-GUID-C66D5BDA-2AE4-433E-ABFC-6C04561B4683" class="sect3">Options Page of Factor Creation</h3>
<div>
<p>The Options page assigns a rule set to a factor, sets error options, and for non-unified auditing, sets audit options.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="cfgfact.htm#GUID-37860E55-BDD7-48D7-9842-979858E19817" title="Under Assignment Rule Set, you select a rule set if you want to use a rule set to control setting a factor identity.">Assigning a Rule Set to a Factor</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-9BF6F8E1-69E0-44FF-819C-30B41CF97259" title="Under Error Options, you set the processing that must occur when a factor identity cannot be resolved.">Setting Error Options for a Factor</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-D4BA8031-3ED5-4274-AA21-E6B7B7B1076E" title="Under Audit Options, you can generate an audit trail if you are not using a unified audit environment.">Setting Audit Options for a Factor</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-98E4446D-4283-42A9-A739-90253C723F60" title="Whether you have unified auditing enabled affects how auditing is handled for factors.">How Factor Auditing Works</a></p>
</li>
</ul>
</div>
<a id="DVADM70233"></a>
<div class="props_rev_3"><a id="GUID-37860E55-BDD7-48D7-9842-979858E19817"></a>
<h4 id="DVADM-GUID-37860E55-BDD7-48D7-9842-979858E19817" class="sect4">Assigning a Rule Set to a Factor</h4>
<div>
<p>Under Assignment Rule Set, you select a rule set if you want to use a rule set to control setting a factor identity.</p>
<div class="section">
<p>For example, you can use a rule set to determine when a database session originates from a known application server or program. <a href="cfrulset.htm#GUID-41914FF0-20E0-4878-8124-C6C976C19104" title="Rule sets group one or more rules together; the rules determine whether a user can perform an action on an object.">Configuring Rule Sets</a>, explains how to create rule sets.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>In the Options page, under Assigning a rule set, select a rule set from the list.</p>
</li>
</ul>
<p>This attribute is particularly useful for situations where database applications, such as a Web application using a JDBC connection pool, must dynamically set a factor identity for the current database session. For example, a Web application may want to assign the geographic location for a database account logging in to the Web application. To do so, the Web application can use the JDBC Callable Statement, or Oracle Data Provider for .NET (ODP.NET) to execute the PL/SQL function <code class="codeph">DVSYS.SET_FACTOR</code>, for example:</p>
<pre dir="ltr">BEGIN 
 DVSYS.SET_FACTOR(&#39;GEO_STATE&#39;,&#39;VIRGINIA&#39;);
END;
</pre>
<p>Then you can create an assignment rule for the GEO_STATE factor to allow or disallow the setting of the GEO_STATE factor based on other factors or rule expressions. See <a href="cfgfact.htm#GUID-5334920A-604E-47A8-B265-BBE51097E022" title="You can assign a factor identity at any time during a database session, but only if the factor assignment rule set evaluates to true.">How Factors Are Set</a> for more information.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM70235"></a>
<div class="props_rev_3"><a id="GUID-9BF6F8E1-69E0-44FF-819C-30B41CF97259"></a>
<h4 id="DVADM-GUID-9BF6F8E1-69E0-44FF-819C-30B41CF97259" class="sect4">Setting Error Options for a Factor</h4>
<div>
<p>Under Error Options, you set the processing that must occur when a factor identity cannot be resolved.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>In the Options page, under Error Options, select from the following values:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Show Error Message:</span> Displays an error message to the database session.</p>
</li>
<li>
<p><span class="bold">Do Not Show Error Message:</span> Does not display the error message.</p>
<p>An advantage of selecting <span class="bold">Do Not Show Error Message</span> and then enabling auditing is that you can track the activities of a potential intruder. The audit report reveals the activities of the intruder, yet the intruder is unaware that you are doing this because he or she does not see any error messages.</p>
</li>
</ul>
</li>
</ul>
<p>After you have created a new factor, you are ready to configure its identity. To do so, edit the factor and then add its identity.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM70234"></a>
<div class="props_rev_3"><a id="GUID-D4BA8031-3ED5-4274-AA21-E6B7B7B1076E"></a>
<h4 id="DVADM-GUID-D4BA8031-3ED5-4274-AA21-E6B7B7B1076E" class="sect4">Setting Audit Options for a Factor</h4>
<div>
<p>Under Audit Options, you can generate an audit trail if you are not using a unified audit environment.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>In the Options page, under Audit Options, select from the following values:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Never:</span> Does not audit.</p>
</li>
<li>
<p><span class="bold">Always:</span> Always creates an audit record when a factor is evaluated. You can select from the conditions, described next.</p>
</li>
<li>
<p><span class="bold">Sometimes:</span> Creates an audit record based on one or more conditions. When you select <span class="bold">Sometimes</span>, by default the <span class="bold">Retrieval Error</span> and <span class="bold">Retrieval NULL</span> options are selected.</p>
<p>You can select from the following conditions listed next.</p>
</li>
</ul>
<p>Conditions that you can select for the <span class="bold">Always</span> and <span class="bold">Sometimes</span> options are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Retrieval Error:</span> Creates an audit record when the identity of a factor cannot be resolved and assigned, due to an error (such as <code class="codeph">No data found</code> or <code class="codeph">Too many rows</code>).</p>
</li>
<li>
<p><span class="bold">Retrieval NULL:</span> Creates an audit record when the identity of a factor is resolved to <code class="codeph">NULL</code>.</p>
</li>
<li>
<p><span class="bold">Validation Error:</span> Creates an audit record when the validation method (if provided) returns an error.</p>
</li>
<li>
<p><span class="bold">Validation False:</span> Creates an audit record when the validation method (if provided) returns <code class="codeph">FALSE</code>.</p>
</li>
<li>
<p><span class="bold">Trust Level NULL:</span> Creates an audit record when the resolved identity of a factor has an assigned trust level of <code class="codeph">NULL</code>.</p>
<p>See <a href="cfgfact.htm#GUID-AA6DA56D-EE20-4BB7-AB59-18466A7E8EF0" title="You can create and configure a factor identity in Oracle Database Vault Administrator.">Creating and Configuring a Factor Identity</a> for more information about trust levels.</p>
</li>
<li>
<p><span class="bold">Trust Level Less Than Zero:</span> Creates an audit record when the resolved identity of a factor has an assigned trust level less than zero.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM71445"></a>
<div class="props_rev_3"><a id="GUID-98E4446D-4283-42A9-A739-90253C723F60"></a>
<h4 id="DVADM-GUID-98E4446D-4283-42A9-A739-90253C723F60" class="sect4">How Factor Auditing Works</h4>
<div>
<p>Whether you have unified auditing enabled affects how auditing is handled for factors.</p>
<p>In a non-unified auditing environment, Oracle Database Vault writes the audit trail to the <code class="codeph">DVSYS.AUDIT_TRAIL$</code> table, described in <a href="audplcy.htm#GUID-9E9C7DBE-A8C5-4F02-8E90-F7311D47AB92" title="You can audit activities in Oracle Database Vault, such as changes to policy configurations.">Auditing Oracle Database Vault</a>.</p>
<p>If you have enabled unified auditing, then this setting does not capture audit records. Instead, you can create audit policies to capture this information, as described in <a class="olink DBSEG419" target="_blank" href="../DBSEG/audit_config.htm#DBSEG419"><span><cite>Oracle Database Security Guide</cite></span></a>.</p>
<p>You can use the Factor Audit Report to display the generated audit records. (See <a href="cfgfact.htm#GUID-1404DAD0-47FD-46D8-946F-1685C1AD5ADA" title="Oracle Database Vault provides reports and data dictionary views that display information about factors and their identities.">Factor Related Reports and Data Dictionary Views</a> for more information.) In addition, you can select multiple audit options at a time. Each option is converted to a bit mask and added to determine the aggregate behavior. Note that there is little performance impact in auditing, unless the factor has errors.</p>
</div>
</div>
</div>
</div>
<a id="DVADM70237"></a>
<div class="props_rev_3"><a id="GUID-3317EBF9-3261-4D4C-8E46-51700CBEC4EA"></a>
<h2 id="DVADM-GUID-3317EBF9-3261-4D4C-8E46-51700CBEC4EA" class="sect2">Adding an Identity to a Factor</h2>
<div>
<p>After you create a new factor, you optionally can add an identity to it.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="cfgfact.htm#GUID-36900DF7-CA06-49B7-B97B-2C0BE9614734" title="An identity is the actual value of a factor, such an IP_Address factor identity being 192.0.2.4.">About Factor Identities</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-6C6DCCB1-50BA-4B02-ABA7-D4AA3E5BB01C" title="Trust levels enable you to assign a numeric value to indicate the measure of trust allowed.">About Trust Levels</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-F267392C-0157-44EA-8FDC-124D2BA50F4A" title="You can assign You Oracle Label Security (OLS) labels to factor identities.">About Label Identities</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-AA6DA56D-EE20-4BB7-AB59-18466A7E8EF0" title="You can create and configure a factor identity in Oracle Database Vault Administrator.">Creating and Configuring a Factor Identity</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-69BF3FBE-84D3-43DF-B9FE-22D4BC63059C" title="If you want to delete a factor identity, you can locate references to it by querying the factor-related Oracle Database Vault views.">Deleting a Factor Identity</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-08304327-0072-4170-AC13-CBE1DDB6D136" title="You can use identity mapping to use a group of factors to manage identity values.">Using Identity Mapping to Configure an Identity to Use Other Factors</a></p>
</li>
</ul>
</div>
<a id="DVADM70238"></a>
<div class="props_rev_3"><a id="GUID-36900DF7-CA06-49B7-B97B-2C0BE9614734"></a>
<h3 id="DVADM-GUID-36900DF7-CA06-49B7-B97B-2C0BE9614734" class="sect3">About Factor Identities</h3>
<div>
<p>An identity is the actual value of a factor, such an IP_Address factor identity being 192.0.2.4.</p>
<p>A factor identity for a given database session is assigned at run time using the <span class="bold">Factor Identification</span> and <span class="bold">Retrieval Method</span> fields described in <a href="cfgfact.htm#GUID-84E260F7-FB2E-490A-997F-DDD7F4BD220A" title="In general, to create a factor, you first create the factor itself, and then you edit the factor to include its identity.">Creating a Factor</a>. You can further configure the identity for the following reasons:</p>
<ul style="list-style-type: disc;">
<li>
<p>To define the known identities for a factor</p>
</li>
<li>
<p>To add a trust level to a factor identity</p>
</li>
<li>
<p>To add an Oracle Label Security label to a factor identity</p>
</li>
<li>
<p>To resolve a factor identity through its child factors, by using identity mapping</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-36900DF7-CA06-49B7-B97B-2C0BE9614734__GUID-578F9571-4C3A-4CF2-BB5E-90269385B167">
<p class="notep1">See Also:</p>
<a href="cfgfact.htm#GUID-33BAA236-2C0E-49AB-803A-89A3C2945A8B" title="This tutorial shows how to restrict user activities based on their session data, such as the domain the user is using.">Tutorial: Restricting User Activities Based on Session Data</a> for an example of how to create and use factor identities</div>
</div>
</div>
<a id="DVADM71229"></a>
<div class="props_rev_3"><a id="GUID-6C6DCCB1-50BA-4B02-ABA7-D4AA3E5BB01C"></a>
<h3 id="DVADM-GUID-6C6DCCB1-50BA-4B02-ABA7-D4AA3E5BB01C" class="sect3">About Trust Levels</h3>
<div>
<p>Trust levels enable you to assign a numeric value to indicate the measure of trust allowed.</p>
<p>A trust value of 1 signifies some trust. A higher value indicates a higher level of trust. A negative value or zero indicates distrust. When the factor identity returned from a factor retrieval method is not defined in the identity, Oracle Database Vault automatically assigns the identity a negative trust level.</p>
<p>To determine the trust level of a factor identity at run time, you can use the <code class="codeph">GET_TRUST_LEVEL</code> and <code class="codeph">GET_TRUST_LEVEL_FOR_IDENTITY</code> functions in the <code class="codeph">DVSYS</code> schema.</p>
<p>For example, suppose you have created a factor named Network. You can create the following identities for the Network factor:</p>
<ul style="list-style-type: disc;">
<li>
<p>Intranet, with a trust level of 10</p>
</li>
<li>
<p>VPN (virtual private network), with a trust level of 5</p>
</li>
<li>
<p>Public, with a trust level of 1</p>
</li>
</ul>
<p>You then can create rule expressions (or custom application code) that base policy decisions on the trust level. For example, you can use the <code class="codeph">DVSYS.GET_TRUST_LEVEL</code> function to find trust levels greater than 5:</p>
<pre dir="ltr">DVSYS.GET_TRUST_LEVEL(&#39;Network&#39;) &gt; 5
</pre>
<p>Or, you can use a <code class="codeph">SELECT</code> statement on the <code class="codeph">DBA_DV_IDENTITY</code> data dictionary view to find trust levels for the Network factor greater than or equal to 5:</p>
<pre dir="ltr">SELECT VALUE, TRUST_LEVEL FROM DBA_DV_IDENTITY 
   WHERE TRUST_LEVEL &gt;= 5 
   AND FACTOR_NAME=&#39;Network&#39;
</pre>
<p>Output similar to the following appears:</p>
<pre dir="ltr">F$NETWORK GET_TRUST_LEVEL(&#39;NETWORK&#39;)
------------------------------------
VPN                                5
INTRANET                          10
</pre>
<p>In the preceding example, Network factor identity for VPN is trusted (value equals 5), and the identity for the INTRANET domain is 10, which implies a greater trust.</p>
<p>See <a href="apis_realms.htm#GUID-8C2577B4-2DA0-4169-B801-0BA02A523CAB" title="The DBMS_MACADM PL/SQL package enables you to configure Oracle Database Vault realms.">Oracle Database Vault Realm APIs</a> , for more information about the Oracle Database Vault factor-related functions.</p>
</div>
</div>
<a id="DVADM71230"></a>
<div class="props_rev_3"><a id="GUID-F267392C-0157-44EA-8FDC-124D2BA50F4A"></a>
<h3 id="DVADM-GUID-F267392C-0157-44EA-8FDC-124D2BA50F4A" class="sect3">About Label Identities</h3>
<div>
<p>You can assign You Oracle Label Security (OLS) labels to factor identities.</p>
<p>In brief, a label acts as an identifier for a database table row to assign privileges to the row. The <span class="bold">Factor Labeling</span> attribute for a factor determines whether a factor is labeled <span class="bold">By Self</span> or <span class="bold">By Factors</span>. If you set the <span class="bold">Factor Labeling</span> attribute to <span class="bold">By Self</span>, then you can associate OLS labels with the factor identities. If you set the <span class="bold">Factor Labeling</span> attribute to <span class="bold">By Factors</span>, then Oracle Database Vault derives the factor identity labels from the labeling of child factor identities. When there are multiple child factor identities with labels, Oracle Database Vault merges the labels using the OLS algorithm associated with the applicable factor Oracle Label Security policy.</p>
<div class="infoboxnotealso" id="GUID-F267392C-0157-44EA-8FDC-124D2BA50F4A__GUID-2ACCA60D-1ED0-44B2-B58E-4598E149CE59">
<p class="notep1">See Also:</p>
<a class="olink OLSAG007" target="_blank" href="../OLSAG/labels.htm#OLSAG007"><span><cite>Oracle Label Security Administrator&rsquo;s Guide</cite></span></a> for more information about labels</div>
</div>
</div>
<a id="DVADM70239"></a>
<div class="props_rev_3"><a id="GUID-AA6DA56D-EE20-4BB7-AB59-18466A7E8EF0"></a>
<h3 id="DVADM-GUID-AA6DA56D-EE20-4BB7-AB59-18466A7E8EF0" class="sect3">Creating and Configuring a Factor Identity</h3>
<div>
<p>You can create and configure a factor identity in Oracle Database Vault Administrator.</p>
<ol>
<li class="stepexpand"><span>From Cloud Control, log into Oracle Database Vault Administrator as a user who has been granted the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role.</span>
<div>
<p><a href="getting_started.htm#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for Oracle Database Vault.">Logging into Oracle Database Vault</a> explains how to log in.</p>
</div>
</li>
<li class="stepexpand"><span>In the Administration page, under Database Vault Components, click <span class="bold">Factors</span>.</span></li>
<li class="stepexpand"><span>From the list, select the factor with which you want to create an identity, and then click <span class="bold">Edit</span>.</span>
<div>
<p>The General page appears.</p>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">Next</span> until you reach the Identities page.</span></li>
<li class="stepexpand"><span>Select <span class="bold">Add New Identity.</span></span>
<div>
<p>The Add New Identity and Mapping window appears.</p>
<div class="figure" id="GUID-AA6DA56D-EE20-4BB7-AB59-18466A7E8EF0__GUID-D5C46032-0556-4E4B-8A33-1754D4ACE5A0"><img width="584" height="386" src="img/GUID-FAB5C5DF-D88F-4152-B947-7F9664E02249-default.gif" alt="Description of GUID-FAB5C5DF-D88F-4152-B947-7F9664E02249-default.gif follows" title="Description of GUID-FAB5C5DF-D88F-4152-B947-7F9664E02249-default.gif follows"/><br/>
<a href="img_text/GUID-FAB5C5DF-D88F-4152-B947-7F9664E02249-default.htm">Description of the illustration GUID-FAB5C5DF-D88F-4152-B947-7F9664E02249-default.gif</a></div>
<!-- class="figure" --></div>
</li>
<li class="stepexpand"><span>In the Identity subpage, enter the following values:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Value:</span> Enter the value of the identity, up to 1024 characters in mixed-case. This attribute is mandatory.</p>
</li>
<li>
<p><span class="bold">Trust Level:</span> Select one of the following trust levels:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Very Trusted:</span> Assigns a trust level value of 10</p>
</li>
<li>
<p><span class="bold">Trusted:</span> Assigns a trust level value of 5</p>
</li>
<li>
<p><span class="bold">Somewhat Trusted:</span> Assigns a trust level value of 1</p>
</li>
<li>
<p><span class="bold">Untrusted:</span> Assigns a trust level value of -1</p>
</li>
<li>
<p><span class="bold">Trust Level Not Defined:</span> Assigns a trust level value of <code class="codeph">NULL</code> (default)</p>
</li>
</ul>
<p>See <a href="cfgfact.htm#GUID-6C6DCCB1-50BA-4B02-ABA7-D4AA3E5BB01C" title="Trust levels enable you to assign a numeric value to indicate the measure of trust allowed.">About Trust Levels</a> for detailed information about trust levels.</p>
</li>
<li>
<p><span class="bold">Label Identity:</span> Optionally, select from the list of available Oracle Label Security policies and then click the <span class="bold">Move</span> button to move them to the <span class="bold">Selected OLS Policies</span> list.</p>
<p>The list shows data labels from the Oracle Label Security installation for your site. For more information, refer to <a class="olink OLSAG" target="_blank" href="../OLSAG/toc.htm"><span><cite>Oracle Label Security Administrator&rsquo;s Guide</cite></span></a>.</p>
<p>See <a href="cfgfact.htm#GUID-F267392C-0157-44EA-8FDC-124D2BA50F4A" title="You can assign You Oracle Label Security (OLS) labels to factor identities.">About Label Identities</a> for detailed information about label identities.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">OK</span> to return to the Create Factors : Identities page.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Done</span>, and then click <span class="bold">Finish</span>.</span></li>
</ol>
</div>
</div>
<a id="DVADM71231"></a>
<div class="props_rev_3"><a id="GUID-69BF3FBE-84D3-43DF-B9FE-22D4BC63059C"></a>
<h3 id="DVADM-GUID-69BF3FBE-84D3-43DF-B9FE-22D4BC63059C" class="sect3">Deleting a Factor Identity</h3>
<div>
<p>If you want to delete a factor identity, you can locate references to it by querying the factor-related Oracle Database Vault views.</p>
<div class="section">
<p>See <a href="views.htm#GUID-C0CEF4FC-DB4C-4AD5-9671-C0861A647183" title="You can find information about the Oracle Database Vault configuration settings by querying the Database Vault-specific data dictionary views.">Oracle Database Vault Data Dictionary Views</a>, for more information.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>From Cloud Control, log into Oracle Database Vault Administrator as a user who has been granted the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role.</span>
<div>
<p><a href="getting_started.htm#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for Oracle Database Vault.">Logging into Oracle Database Vault</a> explains how to log in.</p>
</div>
</li>
<li class="stepexpand"><span>In the Administration page, under Database Vault Components, click <span class="bold">Factors</span>.</span></li>
<li class="stepexpand"><span>Select the factor whose identity you want to delete, and then click <span class="bold">Edit</span>.</span></li>
<li class="stepexpand"><span>In the Edit Factor page, click <span class="bold">Next</span> until you reach the Identities page.</span></li>
<li class="stepexpand"><span>Select the factor identity that you want to remove.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Remove</span>.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Done</span>, then click <span class="bold">Finish</span>.</span></li>
</ol>
</div>
</div>
<a id="DVADM70244"></a>
<div class="props_rev_3"><a id="GUID-08304327-0072-4170-AC13-CBE1DDB6D136"></a>
<h3 id="DVADM-GUID-08304327-0072-4170-AC13-CBE1DDB6D136" class="sect3">Using Identity Mapping to Configure an Identity to Use Other Factors</h3>
<div>
<p>You can use identity mapping to use a group of factors to manage identity values.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="cfgfact.htm#GUID-4112AA85-F3B4-4FF5-9548-639D662D6181" title="While you are creating a factory identity, you can map it.">About Identity Mapping</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-37F292BD-C4E4-4CB9-A3F7-D3498E6279FF" title="You can map an identity to a factor by creating a parent-child relationship with two factors.">Mapping an Identity to a Factor</a></p>
</li>
</ul>
</div>
<a id="DVADM71232"></a>
<div class="props_rev_3"><a id="GUID-4112AA85-F3B4-4FF5-9548-639D662D6181"></a>
<h4 id="DVADM-GUID-4112AA85-F3B4-4FF5-9548-639D662D6181" class="sect4">About Identity Mapping</h4>
<div>
<p>While you are creating a factory identity, you can map it.</p>
<p>Identity mapping is the process of identifying a factor by using other (child) factors. This is a way to transform combinations of factors into logical identities for a factor or to transform continuous identity values (for example, temperature) or large discrete identity values (for example, IP address ranges) into logical sets. To check configuration issues in the mapping for an identity, you can run the Identity Configuration Issues report.</p>
<p>You can map different identities of a parent factor to different identities of the contributing factor. For example, an INTRANET identity maps to an IP address range of 192.0.2.1 to 192.0.2.24. A REMOTE identity can map to an IP address range that excludes the address range 192.0.2.1 to 192.0.2.24.</p>
<p>Based on identity mapping, you can create a security policy. For example, you can define a reduced set of privileges for an employee connecting over VPN (with REMOTE), as opposed to an employee connecting from within the corporate network (with INTRANET).</p>
<div class="infoboxnotealso" id="GUID-4112AA85-F3B4-4FF5-9548-639D662D6181__GUID-62FB7529-63D2-44B7-A240-2C7BDFD92DDC">
<p class="notep1">See Also:</p>
<a href="cfgfact.htm#GUID-33BAA236-2C0E-49AB-803A-89A3C2945A8B" title="This tutorial shows how to restrict user activities based on their session data, such as the domain the user is using.">Tutorial: Restricting User Activities Based on Session Data</a> for an example of how to use identity mapping</div>
</div>
</div>
<a id="DVADM71233"></a>
<div class="props_rev_3"><a id="GUID-37F292BD-C4E4-4CB9-A3F7-D3498E6279FF"></a>
<h4 id="DVADM-GUID-37F292BD-C4E4-4CB9-A3F7-D3498E6279FF" class="sect4">Mapping an Identity to a Factor</h4>
<div>
<p>You can map an identity to a factor by creating a parent-child relationship with two factors.</p>
<div class="section">
<ol>
<li>
<p>Create a parent factor and set the attribute <span class="bold">Factor Identification</span> to <span class="bold">By Factors</span>.</p>
<p><a href="cfgfact.htm#GUID-84E260F7-FB2E-490A-997F-DDD7F4BD220A" title="In general, to create a factor, you first create the factor itself, and then you edit the factor to include its identity.">Creating a Factor</a> describes how to create factors.</p>
</li>
<li>
<p>In the Identities page, for the parent factor, create a new factor identity.</p>
<p><a href="cfgfact.htm#GUID-AA6DA56D-EE20-4BB7-AB59-18466A7E8EF0" title="You can create and configure a factor identity in Oracle Database Vault Administrator.">Creating and Configuring a Factor Identity</a> describes how to create an identity.</p>
</li>
<li>
<p>Map the factor-identity pair of the parent to the factor-identity pairs of its children. Use the following process:</p>
<ol>
<li>
<p>In the Identities page, either select an existing identity and click <span class="bold">Edit</span>, or click <span class="bold">Add New Identity</span> to create a new identity.</p>
</li>
<li>
<p>In the Add New Identity and Mapping window, ensure that at least the <span class="bold">Value</span> field is filled out in the Identity subpage.</p>
</li>
<li>
<p>Click the <span class="bold">Map Identity</span> subpage.</p>
<div class="figure" id="GUID-37F292BD-C4E4-4CB9-A3F7-D3498E6279FF__GUID-FF1D1828-443E-4802-A314-38B1368541FA"><img width="588" height="382" src="img/GUID-3CA94036-46ED-4C76-89A8-B036CEC73FAD-default.gif" alt="Description of GUID-3CA94036-46ED-4C76-89A8-B036CEC73FAD-default.gif follows" title="Description of GUID-3CA94036-46ED-4C76-89A8-B036CEC73FAD-default.gif follows"/><br/>
<a href="img_text/GUID-3CA94036-46ED-4C76-89A8-B036CEC73FAD-default.htm">Description of the illustration GUID-3CA94036-46ED-4C76-89A8-B036CEC73FAD-default.gif</a></div>
<!-- class="figure" --></li>
<li>
<p>Click <span class="bold">Add Mapping</span>.</p>
</li>
<li>
<p>Enter the following information:</p>
<p><span class="bold">Child Factor Name:</span> From the list, select the child factor name.</p>
<p><span class="bold">Operator:</span> Select the operator from the list.</p>
<p><span class="bold">Min Value:</span> Enter the minimum value.</p>
<p><span class="bold">Max Value:</span> Enter the maximum value.</p>
<p>For example, consider a scenario where the Contributing Factor to the Factor Network is set to Client_IP, the <span class="bold">Operator</span> is set to <code class="codeph">Between</code>, the <span class="bold">Min Value</span> is set to 192.0.2.1 and the <span class="bold">Max Value</span> is set to 192.0.2.24. This means that whenever the client IP address lies in the specified address range of 192.0.2.1 to 192.0.2.24, the parent factor evaluates to a predefined identity (for example, INTRANET).</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to exit the Add New Identity Mapping window.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to exit the Add New Identity and Mapping window.</p>
</li>
</ol>
</li>
<li>
<p>Click <span class="bold">Done</span>, and then click <span class="bold">Finish</span>.</p>
</li>
</ol>
<p>Repeat this process to add more contributing factors for a parent factor identity. For example, you can configure the Network factor to resolve to a value ACCOUNTING-SENSITIVE, when the Program factor resolves to &#34;Oracle General Ledger&#34; and the Client_IP is in between 192.0.2.1 and 192.0.2.24. So, if an authorized accounting financial application program, running on a client with IP address 192.0.2.12 accesses the database, then the Network factor is resolved to ACCOUNTING-SENSITIVE. A database session with the ACCOUNTING-SENSITIVE Network value would have more access privileges than one with the INTRANET Network value.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<a id="DVADM70245"></a>
<div class="props_rev_3"><a id="GUID-7330B098-C9AB-4C28-848D-27CA6BA5B2C5"></a>
<h2 id="DVADM-GUID-7330B098-C9AB-4C28-848D-27CA6BA5B2C5" class="sect2">Deleting a Factor</h2>
<div>
<p>Before you delete a factor, you must remove references to the factor.</p>
<div class="section">
<p>You can find the various references to the factor and its identities by querying the factor-related Oracle Database Vault views. See <a href="views.htm#GUID-C0CEF4FC-DB4C-4AD5-9671-C0861A647183" title="You can find information about the Oracle Database Vault configuration settings by querying the Database Vault-specific data dictionary views.">Oracle Database Vault Data Dictionary Views</a>, for more information.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Delete any references to the factor, such as rule sets, factor identities, and Oracle Label Security policy associations.</span>
<div>
<p>To do so, edit the factor. You can find and remove the rule set from the Options page and the Oracle Label Security policies associations and identities from the Identities page.</p>
</div>
</li>
<li class="stepexpand"><span>In the Oracle Database Vault Administration page, select <span class="bold">Factors</span>.</span></li>
<li class="stepexpand"><span>In the Factors page, select the factor that you want to remove.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Delete</span>.</span></li>
<li class="stepexpand"><span>In the Confirmation window, click <span class="bold">Yes</span>.</span></li>
</ol>
</div>
</div>
<a id="DVADM70246"></a>
<div class="props_rev_3"><a id="GUID-E1D7B84F-57AD-4FBA-B99F-47E3BC64B91F"></a>
<h2 id="DVADM-GUID-E1D7B84F-57AD-4FBA-B99F-47E3BC64B91F" class="sect2">How Factors Work</h2>
<div>
<p>Oracle Database Vault processes factors when a session is established.</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="cfgfact.htm#GUID-D2CECCAD-CB9D-46D6-88DE-63E2D363936D" title="Oracle Database Vault evaluates the factors based on when a session begins.">How Factors Are Processed When a Session Is Established</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-1F1BF07B-5453-4362-8BF6-6C70A7A7E492" title="You can retrieve a factor in a database session at any time by using the DVF factor function or the DVSYS.GET_FACTOR function.">How Factors Are Retrieved</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-5334920A-604E-47A8-B265-BBE51097E022" title="You can assign a factor identity at any time during a database session, but only if the factor assignment rule set evaluates to true.">How Factors Are Set</a></p>
</li>
</ul>
</div>
<a id="DVADM70247"></a>
<div class="props_rev_3"><a id="GUID-D2CECCAD-CB9D-46D6-88DE-63E2D363936D"></a>
<h3 id="DVADM-GUID-D2CECCAD-CB9D-46D6-88DE-63E2D363936D" class="sect3">How Factors Are Processed When a Session Is Established</h3>
<div>
<p>Oracle Database Vault evaluates the factors based on when a session begins.</p>
<p>When a database session is established, the following actions occur:</p>
<ol>
<li>
<p>At the start of each database session, Oracle Database Vault begins to evaluate all default and user-created factors in the database instance.</p>
<p>This evaluation occurs after the normal database authentication of the session and the initialization of the Oracle Label Security session information, if applicable.</p>
</li>
<li id="GUID-D2CECCAD-CB9D-46D6-88DE-63E2D363936D__BABJGGCA">
<p>In the factor evaluation stage, the factor initialization process executes the retrieval method for all factors that are identified by methods or constants, to resolve the factor identity for the session.</p>
<p>The factor error options setting has no effect on the factor initialization process.</p>
</li>
<li>
<p>If a factor has a validation method defined, Oracle Database Vault validates the identity (value) of the factor by executing this validation method. If the validation method fails or returns false, the identity of the factor is undefined (<code class="codeph">NULL</code>).</p>
</li>
<li>
<p>If a factor has any identities defined for it, Oracle Database Vault resolves the trust level of the factor based on the identities defined. If an identity of the factor is defined in this list of defined identities, then Oracle Database Vault assigns the trust level as configured; otherwise it sets it to -1. If there are no identities defined for the factor, the trust level is undefined (<code class="codeph">NULL</code>).</p>
</li>
<li id="GUID-D2CECCAD-CB9D-46D6-88DE-63E2D363936D__CIHJFJJD">
<p>Depending on the outcome of this factor evaluation, factor validation, and trust level resolution, Database Vault audits the details of the evaluation as dictated by the factor audit configuration.</p>
</li>
<li id="GUID-D2CECCAD-CB9D-46D6-88DE-63E2D363936D__BABHEHBJ">
<p>When the evaluation of all factors that are identified by method or constant completes, Oracle Database Vault resolves the factors that are identified by other factors by using the identity maps that are defined for the factor configured identities.</p>
<p>The evaluation order of the factor-configured identities is by ASCII sort on the identity values: Oracle Database Vault uses the first alphabetically sorted identity mapping that it evaluates. For example, suppose factor TEST has identities X and Y. Furthermore, identities X and Y have identity maps that are dependent on identities for factors A, B, and C. The following mapping occurs:</p>
<ul style="list-style-type: disc;">
<li>
<p>X is mapped when A=1 and B=1</p>
</li>
<li>
<p>Y is mapped when A=1, B=1, and C=2</p>
</li>
</ul>
<p>In this case, the first one evaluated is X. Y is not evaluated, but what if its C mapping meets the criteria that is needed for the TEST factor&#39;s success? You would need to reverse the mapping, that is, map Y before X so that A, B, and C can be evaluated first. To reverse the mapping, rename Y to V (or some alphabetic value that sorts before X) so that it can be correctly resolved.</p>
<p>This algorithm works if the ASCII sort ordering is correct and the identities map the same number factors at some level.</p>
</li>
<li>
<p>When the factor initialization completes, the Oracle Database Vault integration with Oracle Label Security occurs.</p>
</li>
</ol>
<p>After this process completes, Oracle Database Vault checks to see if a command rule is associated with the <code class="codeph">CONNECT</code> event. If a rule set associated with the <code class="codeph">CONNECT</code> event, then Oracle Database Vault evaluates the rule set. If the rule set evaluates to false or results in an error, then the session is terminated. Oracle Database Vault executes any auditing or call handlers associated with the rule set before the session is terminated.</p>
<div class="infobox-note" id="GUID-D2CECCAD-CB9D-46D6-88DE-63E2D363936D__GUID-123F53A8-A452-406C-9CA5-72F91938240C">
<p class="notep1">Note:</p>
<p>Be careful about associating command rules with the <code class="codeph">CONNECT</code> event, because you can inadvertently lock out other users from of the database. In general, if you create a command rule for <code class="codeph">CONNECT</code>, set its evaluation option of the associated rule set to <code class="codeph">Any True</code>.</p>
<p>If you do inadvertently lock out users, then you should temporarily disable Oracle Database Vault, disable the CONNECT command rule, reenable Oracle Database Vault, and then fix the factor code that is causing the problem. <a href="cfgfact.htm#GUID-506DBBB2-CC2D-42AF-9A98-8BCBCCB4EF7A__CIHCJAFG">If the Test Fails</a> provides an example of how to accomplish this.</p>
</div>
</div>
</div>
<a id="DVADM70249"></a><a id="DVADM70248"></a>
<div class="props_rev_3"><a id="GUID-1F1BF07B-5453-4362-8BF6-6C70A7A7E492"></a>
<h3 id="DVADM-GUID-1F1BF07B-5453-4362-8BF6-6C70A7A7E492" class="sect3">How Factors Are Retrieved</h3>
<div>
<p>You can retrieve a factor in a database session at any time by using the <code class="codeph">DVF</code> factor function or the <code class="codeph">DVSYS.GET_FACTOR</code> function.</p>
<p>To find a listing of available factors, query the <code class="codeph">DVSYS.DBA_DV_FACTOR</code> data dictionary view, described in <span class="q">&#34;<a href="views.htm#GUID-5B6C4B1F-57EE-4F51-A042-645C902A43BA" title="The DVSYS.DBA_DV_FACTOR data dictionary view lists the existing factors in the current database instance.">DVSYS.DBA_DV_FACTOR View</a>&#34;</span>.</p>
<p><a href="cfgfact.htm#GUID-1F1BF07B-5453-4362-8BF6-6C70A7A7E492__CIHEDHHG">Example 8-1</a> shows an example of using the <code class="codeph">DVSYS.GET_FACTOR</code> function.</p>
<div class="example" id="GUID-1F1BF07B-5453-4362-8BF6-6C70A7A7E492__CIHEDHHG">
<p class="titleinexample">Example 8-1 Using DVSYS.GET_FACTOR to Retrieve a Factor</p>
<pre dir="ltr">SELECT DVSYS.GET_FACTOR(&#39;client_ip&#39;) FROM DUAL;
</pre>
<p>You can use the factor values retrieved from the <code class="codeph">DVF</code> factor function or the <code class="codeph">DVSYS.GET_FACTOR</code> in the following ways:</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle Database Vault rule expressions</p>
</li>
<li>
<p>Custom application code that is available to all database sessions in an Oracle Database Vault environment</p>
</li>
</ul>
<p><a href="apis_factors.htm#GUID-364245B9-C339-488A-8D49-B8B01B667857" title="Oracle Database Vault maintains the DVF schema functions when you use the DBMS_MACADM PL/SQL package to manage the various factors.">Oracle Database Vault DVF PL/SQL Factor Functions</a> describes <code class="codeph">DVF</code> factor functions in detail.</p>
<p>If you had set the factor evaluation to <span class="bold">By Session</span>, then Oracle Database Vault retrieves the value from the session context established, as described under <a href="cfgfact.htm#GUID-D2CECCAD-CB9D-46D6-88DE-63E2D363936D" title="Oracle Database Vault evaluates the factors based on when a session begins.">How Factors Are Processed When a Session Is Established</a>.</p>
<p>If you had set the factor evaluation to <span class="bold">By Access</span>, then Oracle Database Vault performs Step 2 through Step 5 (or Step 6), as described under <a href="cfgfact.htm#GUID-D2CECCAD-CB9D-46D6-88DE-63E2D363936D" title="Oracle Database Vault evaluates the factors based on when a session begins.">How Factors Are Processed When a Session Is Established</a>, whenever the factor is retrieved.</p>
<p>If you had defined error options for the factor and if an error occurs, then Oracle Database Vault displays the error message.</p>
</div>
<!-- class="example" --></div>
</div>
<a id="DVADM70250"></a>
<div class="props_rev_3"><a id="GUID-5334920A-604E-47A8-B265-BBE51097E022"></a>
<h3 id="DVADM-GUID-5334920A-604E-47A8-B265-BBE51097E022" class="sect3">How Factors Are Set</h3>
<div>
<p>You can assign a factor identity at any time during a database session, but only if the factor assignment rule set evaluates to true.</p>
<p>You can do this in the application code by using the <code class="codeph">DVSYS.SET_FACTOR</code> function. In Java code, you can use the JDBC class <code class="codeph">java.sql.CallableStatement</code> to set this value. For example:</p>
<pre dir="ltr">java.sql.Connection connection ; 
...
java.sql.CallableStatement statement = 
   connection.prepareCall(&#34;{call DVSYS.SET_FACTOR(&#39;FACTOR_X&#39;, ?)}&#34;);
statement.setString(1, &#34;MyValue&#34;);
boolean result = statement.execute();
...
</pre>
<p>Applications that can execute Oracle PL/SQL functions can use this procedure (for example, applications written using Oracle Data Provider for .NET (ODP.NET)).</p>
<p>This concept is similar to the standard Oracle <code class="codeph">DBMS_SESSION.SET_IDENTIFIER</code> procedure with an added feature that a rule set controls when a factor value can be set. If the rule set evaluates to true, Steps <a href="cfgfact.htm#GUID-D2CECCAD-CB9D-46D6-88DE-63E2D363936D__BABJGGCA">2</a> through <a href="cfgfact.htm#GUID-D2CECCAD-CB9D-46D6-88DE-63E2D363936D__CIHJFJJD">5</a> under <a href="cfgfact.htm#GUID-D2CECCAD-CB9D-46D6-88DE-63E2D363936D" title="Oracle Database Vault evaluates the factors based on when a session begins.">How Factors Are Processed When a Session Is Established</a> occur.</p>
<p>If you have not associated a assignment rule set for the factor or if the rule set returns false (or returns errors), then Oracle Database Vault sends an error message if you attempt to set the factor using the <code class="codeph">DVSYS.SET_FACTOR</code> function.</p>
</div>
</div>
</div>
<a id="DVADM70078"></a>
<div class="props_rev_3"><a id="GUID-9A320C0A-12D7-4414-B79F-512AD76FF436"></a>
<h2 id="DVADM-GUID-9A320C0A-12D7-4414-B79F-512AD76FF436" class="sect2">Tutorial: Preventing Ad Hoc Tool Access to the Database</h2>
<div>
<p>This tutorial demonstrates how to use factors to prevent ad hoc tools (such as SQL*Plus) from accessing the database.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="cfgfact.htm#GUID-AD2CE5EE-5A68-4075-9BA1-9DCC36141012" title="Many database applications contain features to explicitly control the actions of a user.">About This Tutorial</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-D44A9156-1FC6-4063-8771-3801002354BC" title="You must use the HR and OE accounts later on when you test the Oracle Database Vault components for this tutorial.">Step 1: Enable the HR and OE User Accounts</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-E97E3E83-24B2-4DA7-9A65-D5733CCE5EAB" title="After you have ensured that the HR and OE accounts are active, you can create a factor.">Step 2: Create the Factor</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-7B61A799-BAD1-4A5D-97D3-1FCBEED81180" title="After you have created the factor, you can create a rule set and rules to work with the factor.">Step 3: Create the Rule Set and Rules</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-869EE4FA-3C9E-4C6D-9D59-AC32B0C776B4" title="The CONNECT command rule controls the CONNECT SQL statement.">Step 4: Create the CONNECT Command Rule</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-506DBBB2-CC2D-42AF-9A98-8BCBCCB4EF7A" title="You do not need to restart your SQL*Plus session for the Oracle Database Vault changes to take effect.">Step 5: Test the Ad Hoc Tool Access Restriction</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-8049D286-C6D9-4355-8139-D1D470AAB14E" title="You can remove the components that you created for this tutorial if you no longer need them.">Step 6: Remove the Components for This Tutorial</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-9A320C0A-12D7-4414-B79F-512AD76FF436__GUID-94F694C3-B3BB-41E1-934F-77FA7ADDDD2D">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="cfgfact.htm#GUID-33BAA236-2C0E-49AB-803A-89A3C2945A8B" title="This tutorial shows how to restrict user activities based on their session data, such as the domain the user is using.">Tutorial: Restricting User Activities Based on Session Data</a> for an example of using factor identity mapping</p>
</li>
<li>
<p><a href="dv_ols.htm#GUID-8C427946-4091-4301-9003-B44A213567DC" title="An Oracle Database Vault-Oracle Label Security integration can grant different levels of access to two administrative users who have the same privileges.">Tutorial: Integrating Oracle Database Vault with Oracle Label Security</a> for an example of integrating an Oracle Database Vault factor with an Oracle Label Security label</p>
</li>
</ul>
</div>
</div>
<a id="DVADM71118"></a>
<div class="props_rev_3"><a id="GUID-AD2CE5EE-5A68-4075-9BA1-9DCC36141012"></a>
<h3 id="DVADM-GUID-AD2CE5EE-5A68-4075-9BA1-9DCC36141012" class="sect3">About This Tutorial</h3>
<div>
<p>Many database applications contain features to explicitly control the actions of a user.</p>
<p>However, an ad hoc query tool, such as SQL*Plus, may not have these controls. As a result, a user could use an ad hoc tool to perform actions in the database that he or she would normally be prevented from performing in a database application. You can use a combination of Oracle Database Vault factors, rule sets, and command rules to prevent unauthorized access to the database by ad hoc query tools.</p>
<p>In the following tutorial, you prevent users HR and OE from using SQL*Plus. To accomplish this, you must create a factor to find the applications on your system and a rule and rule set to limit SQL*Plus to these four users. Then you create a command rule for the <code class="codeph">CONNECT</code> SQL statement, which is associated with the rule set. This factor, Client_Prog_Name, uses the <code class="codeph">CLIENT_PROGRAM_NAME</code> attribute of the <code class="codeph">SYS_CONTEXT</code> SQL function <code class="codeph">USERENV</code> namespace to find the names of the applications that are used to access the current instance of Oracle Database. The <code class="codeph">SYS_CONTEXT</code> SQL function provides many useful methods for finding the state of a user session. <code class="codeph">SYS_CONTEXT</code> is a valuable tool for creating custom factors.</p>
<div class="infoboxnotealso" id="GUID-AD2CE5EE-5A68-4075-9BA1-9DCC36141012__GUID-AEDAAA26-5E6B-4F7D-857B-C75847AF582B">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF06117" target="_blank" href="../SQLRF/functions199.htm#SQLRF06117"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for more information about the <code class="codeph">SYS_CONTEXT</code> function.</p>
</div>
</div>
</div>
<a id="DVADM70251"></a>
<div class="props_rev_3"><a id="GUID-D44A9156-1FC6-4063-8771-3801002354BC"></a>
<h3 id="DVADM-GUID-D44A9156-1FC6-4063-8771-3801002354BC" class="sect3">Step 1: Enable the HR and OE User Accounts</h3>
<div>
<p>You must use the <code class="codeph">HR</code> and <code class="codeph">OE</code> accounts later on when you test the Oracle Database Vault components for this tutorial.</p>
<ol>
<li class="stepexpand"><span>Log into the database instance as a user who has been granted the <code class="codeph">DV_ACCTMGR</code> role.</span>
<div>
<p>For example:</p>
<pre dir="ltr">sqlplus bea_dvacctmgr
Enter password: <span class="italic">password</span>
</pre>
<p>In a multitenant environment, you must connect to the appropriate pluggable database (PDB).</p>
<p>For example:</p>
<pre dir="ltr">sqlplus bea_dvacctmgr@hrpdb
Enter password: <span class="italic">password</span>
</pre>
<p>To find the available PDBs, query the <code class="codeph">DBA_PDBS</code> data dictionary view. To check the current PDB, run the <code class="codeph">show con_name</code> command.</p>
</div>
</li>
<li class="stepexpand"><span>Check the status of the <code class="codeph">HR</code> account.</span>
<div>
<pre dir="ltr">SELECT USERNAME, ACCOUNT_STATUS FROM DBA_USERS WHERE USERNAME = &#39;HR&#39;;
</pre></div>
</li>
<li class="stepexpand"><span>If the <code class="codeph">HR</code> account is expired and locked, then enter the following statement to make it active:</span>
<div>
<pre dir="ltr">ALTER USER HR ACCOUNT UNLOCK IDENTIFIED BY <span class="italic">password</span>;
</pre>
<p>Follow the guidelines in <a class="olink DBSEG33223" target="_blank" href="../DBSEG/authentication.htm#DBSEG33223"><span><cite>Oracle Database Security Guide</cite></span></a> to replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure.</p>
</div>
</li>
<li class="stepexpand"><span>Repeat these steps for the <code class="codeph">OE</code> account.</span></li>
</ol>
</div>
</div>
<a id="DVADM71382"></a>
<div class="props_rev_3"><a id="GUID-E97E3E83-24B2-4DA7-9A65-D5733CCE5EAB"></a>
<h3 id="DVADM-GUID-E97E3E83-24B2-4DA7-9A65-D5733CCE5EAB" class="sect3">Step 2: Create the Factor</h3>
<div>
<p>After you have ensured that the <code class="codeph">HR</code> and <code class="codeph">OE</code> accounts are active, you can create a factor.</p>
<ol>
<li class="stepexpand"><span>Connect as a user who has been granted the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT leo_dvowner <span class="italic">--Or, CONNECT leo_dvowner@hrpdb</span>
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Create the factor.</span>
<div>
<pre dir="ltr">BEGIN
 DBMS_MACADM.CREATE_FACTOR(
  factor_name       =&gt; &#39;Client_Prog_Name&#39;,
  factor_type_name  =&gt; &#39;Application&#39;,
  description       =&gt; &#39;Stores client program name that connects to database&#39;,
  rule_set_name     =&gt; NULL,
  validate_expr     =&gt; NULL,
  get_expr          =&gt; &#39;UPPER(SYS_CONTEXT(&#39;&#39;USERENV&#39;&#39;,&#39;&#39;CLIENT_PROGRAM_NAME&#39;&#39;))&#39;,
  identify_by       =&gt; DBMS_MACUTL.G_IDENTIFY_BY_METHOD,
  labeled_by        =&gt; DBMS_MACUTL.G_LABELED_BY_SELF,
  eval_options      =&gt; DBMS_MACUTL.G_EVAL_ON_SESSION,
  audit_options     =&gt; DBMS_MACUTL.G_AUDIT_ON_GET_ERROR,
  fail_options      =&gt; DBMS_MACUTL.G_FAIL_SILENTLY);
END;
/
</pre>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">factor_type_name</code> specifies that this is an application-based factor.</p>
</li>
<li>
<p><code class="codeph">get_expr</code> defines the expression for the factor. This expression calls the <code class="codeph">SYS_CONTEXT</code> function, using the <code class="codeph">USERENV</code> namespace and <code class="codeph">CLIENT_PROGRAM_NAME</code> attribute, to find the programs that are logged into the Oracle database.</p>
</li>
<li>
<p><code class="codeph">identify_by</code> identifies the factor by method.</p>
</li>
<li>
<p><code class="codeph">labeled_by</code> labels the identities for the factor directly from the labels associated with an Oracle Label Security policy (default).</p>
</li>
<li>
<p><code class="codeph">eval_options</code> evaluates the factor when the database session is created.</p>
</li>
<li>
<p><code class="codeph">audit_options</code> audits if <code class="codeph">get_expr</code> returns an error.</p>
</li>
<li>
<p><code class="codeph">fail_silently</code> does not show any error messages for the factor.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<a id="DVADM70253"></a>
<div class="props_rev_3"><a id="GUID-7B61A799-BAD1-4A5D-97D3-1FCBEED81180"></a>
<h3 id="DVADM-GUID-7B61A799-BAD1-4A5D-97D3-1FCBEED81180" class="sect3">Step 3: Create the Rule Set and Rules</h3>
<div>
<p>After you have created the factor, you can create a rule set and rules to work with the factor.</p>
<ol>
<li class="stepexpand"><span>Create the Limit SQL*Plus Access rule set as follows:</span>
<div>
<pre dir="ltr">BEGIN
 DBMS_MACADM.CREATE_RULE_SET(
  rule_set_name    =&gt; &#39;Limit SQL*Plus Access&#39;,
  description      =&gt; &#39;Limits access to SQL*Plus for Apps Schemas&#39;,
  enabled          =&gt; DBMS_MACUTL.G_YES,
  eval_options     =&gt; DBMS_MACUTL.G_RULESET_EVAL_ANY,
  audit_options    =&gt; DBMS_MACUTL.G_RULESET_AUDIT_OFF,
  fail_options     =&gt; DBMS_MACUTL.G_RULESET_FAIL_SHOW,
  fail_message     =&gt; &#39;SQL*Plus access not allowed for Apps Schemas&#39;,
  fail_code        =&gt; 20461,
  handler_options  =&gt; DBMS_MACUTL.G_RULESET_HANDLER_OFF,
  handler          =&gt; NULL,
  is_static        =&gt; FALSE);
END;
/
</pre>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">fail_options</code> enables an error message, set by <code class="codeph">fail_message</code>, and error code, set by <code class="codeph">fail_code</code>, to appear if there are errors.</p>
</li>
<li>
<p><code class="codeph">is_static</code> evaluates the rule set once during the user session. After that, the value is re-used.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Find the exact settings for the computer on which you want to apply the policy, based on what the <code class="codeph">CLIENT_PROGRAM_NAME</code> attribute will return.</span>
<div>
<pre dir="ltr">SELECT SYS_CONTEXT(&#39;USERENV&#39;, &#39;CLIENT_PROGRAM_NAME&#39;) FROM DUAL;
</pre>
<p>The output should be similar to the following:</p>
<pre dir="ltr">SYS_CONTEXT(&#39;USERENV&#39;,&#39;CLIENT_PROGRAM_NAME&#39;)
---------------------------------------------------------------
sqlplus@nemosity (TNS V1-V3)
</pre>
<p>For this tutorial, the name of the computer is <code class="codeph">nemosity</code>. The <code class="codeph">(TN V1-V3)</code> output refers to the version of the TNS connector.</p>
</div>
</li>
<li class="stepexpand"><span>Create the following rules.</span>
<div>
<pre dir="ltr">BEGIN
 DBMS_MACADM.CREATE_RULE(
  rule_name  =&gt; &#39;Prevent Apps Schemas Access to SQL*Plus&#39;,
  rule_expr  =&gt;&#39;UPPER (DVF.F$CLIENT_PROG_NAME) != &#39;&#39;SQLPLUS@NEMOSITY (TNS V1-V3)&#39;&#39; AND DVF.F$SESSION_USER IN (&#39;&#39;HR&#39;&#39;, &#39;&#39;OE&#39;&#39;)&#39;);
END;
/
BEGIN
 DBMS_MACADM.CREATE_RULE(
  rule_name  =&gt; &#39;Allow Non-Apps Schemas Access to SQL*Plus&#39;,
  rule_expr  =&gt;&#39;DVF.F$SESSION_USER NOT IN (&#39;&#39;HR&#39;&#39;, &#39;&#39;OE&#39;&#39;)&#39;);
END;
/
</pre>
<p>The rules translate to the following: &#34;Prevent users <code class="codeph">HR</code> and <code class="codeph">OE</code> from logging into SQL*Plus, but allow other users access.&#34;</p>
</div>
</li>
<li class="stepexpand"><span>Add the rules to the Limit SQL*Plus Access rule set.</span>
<div>
<pre dir="ltr">BEGIN
 DBMS_MACADM.ADD_RULE_TO_RULE_SET(
  rule_set_name =&gt; &#39;Limit SQL*Plus Access&#39;,
  rule_name     =&gt; &#39;Prevent Apps Schemas Access to SQL*Plus&#39;,
  rule_order    =&gt; 1);
END;
/
BEGIN
 DBMS_MACADM.ADD_RULE_TO_RULE_SET(
  rule_set_name =&gt; &#39;Limit SQL*Plus Access&#39;,
  rule_name     =&gt; &#39;Allow Non-Apps Schemas Access to SQL*Plus&#39;,
  rule_order    =&gt; 1);
END;
/
</pre>
<p>The <code class="codeph">rule_order</code> setting is required to enable the procedure to work.</p>
</div>
</li>
</ol>
</div>
</div>
<a id="DVADM70254"></a>
<div class="props_rev_3"><a id="GUID-869EE4FA-3C9E-4C6D-9D59-AC32B0C776B4"></a>
<h3 id="DVADM-GUID-869EE4FA-3C9E-4C6D-9D59-AC32B0C776B4" class="sect3">Step 4: Create the CONNECT Command Rule</h3>
<div>
<p>The CONNECT command rule controls the <code class="codeph">CONNECT</code> SQL statement.</p>
<div class="section">
<p>This command rule also applies to logging into SQL*Plus from the command line or other tools your site may use to access SQL*Plus.</p>
<ul style="list-style-type: disc;">
<li>
<p>Create the CONNECT command rule as follows:</p>
<pre dir="ltr">BEGIN
 DBMS_MACADM.CREATE_COMMAND_RULE(
  command         =&gt; &#39;CONNECT&#39;,
  rule_set_name   =&gt; &#39;Limit SQL*Plus Access&#39;,
  object_owner    =&gt; &#39;%&#39;,
  object_name     =&gt; &#39;%&#39;,
  enabled         =&gt; DBMS_MACUTL.G_YES);
END;
/
</pre></li>
</ul>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">rule_set_name</code> associates the Limit SQL*Plus Access rule set with the CONNECT command rule.</p>
</li>
<li>
<p><code class="codeph">object_owner</code> is set to <code class="codeph">%</code> so that the command rule applies to all users.</p>
</li>
<li>
<p><code class="codeph">object_name</code> is set to <code class="codeph">%</code> so that the command rule applies to all objects.</p>
</li>
<li>
<p><code class="codeph">enabled</code> enables the command rule so that it can be used right away.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM70256"></a><a id="DVADM70255"></a>
<div class="props_rev_3"><a id="GUID-506DBBB2-CC2D-42AF-9A98-8BCBCCB4EF7A"></a>
<h3 id="DVADM-GUID-506DBBB2-CC2D-42AF-9A98-8BCBCCB4EF7A" class="sect3">Step 5: Test the Ad Hoc Tool Access Restriction</h3>
<div>
<p>You do not need to restart your SQL*Plus session for the Oracle Database Vault changes to take effect.</p>
<div class="section">
<ol>
<li>
<p>In SQL*Plus, try to connect as user <code class="codeph">HR</code>:</p>
<pre dir="ltr">CONNECT HR <span class="italic">--Or, CONNECT HR@hrpdb</span>
Enter password: <span class="italic">password</span>
</pre>
<p>The following output should appear:</p>
<pre dir="ltr">ERROR:
ORA-47306: 20461: Limit SQL*Plus Access rule set failed
</pre>
<p>User <code class="codeph">HR</code> should be prevented from using SQL*Plus.</p>
</li>
<li>
<p>Next, try to connect as user <code class="codeph">OE</code>:</p>
<pre dir="ltr">CONNECT OE <span class="italic">--Or, CONNECT OE@hrpdb</span>
Enter password: <span class="italic">password</span>
</pre>
<p>The following output should appear:</p>
<pre dir="ltr">ERROR:
ORA-47306: 20461: Limit SQL*Plus Access rule set failed
</pre>
<p>User <code class="codeph">OE</code> also should be prevented from using SQL*Plus.</p>
</li>
<li>
<p>Now try to connect as user <code class="codeph">SYSTEM</code>:</p>
<pre dir="ltr">CONNECT SYSTEM <span class="italic">--Or, CONNECT SYSTEM@hrpdb</span>
Enter password: <span class="italic">password</span>
Connected. 
</pre>
<p>User <code class="codeph">SYSTEM</code> should be able to log into the database instance. So should <code class="codeph">SYS</code>, the Database Vault Owner account, and the Database Vault Account Manager account.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section" id="GUID-506DBBB2-CC2D-42AF-9A98-8BCBCCB4EF7A__CIHCJAFG">
<p class="subhead3">If the Test Fails</p>
</div>
<!-- class="section" -->
<div class="section">
<p>If you cannot log into the database instance as <code class="codeph">SYSTEM</code> (or as any of the other administrative users listed in your rule expression), then you are prevented from using SQL*Plus.</p>
<p>You can remedy the problem as follows:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Log into the database instance as a user who has been granted the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT dbv_owner <span class="italic">--Or, CONNECT dbv_owner@hrpdb for a PDB</span>
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Enter the following statement to drop the CONNECT command rule.</span>
<div>
<pre dir="ltr">EXEC DBMS_MACADM.DELETE_COMMAND_RULE (&#39;CONNECT&#39;, &#39;%&#39;, &#39;%&#39;);
</pre>
<p>Even though you have disabled Oracle Database Vault, you still can use its PL/SQL packages and Database Vault Administrator.</p>
</div>
</li>
<li class="stepexpand"><span>Check the policy components for any errors and then correct them. Recreate the CONNECT command rule, and then test it.</span></li>
</ol>
</div>
</div>
<a id="DVADM70257"></a>
<div class="props_rev_3"><a id="GUID-8049D286-C6D9-4355-8139-D1D470AAB14E"></a>
<h3 id="DVADM-GUID-8049D286-C6D9-4355-8139-D1D470AAB14E" class="sect3">Step 6: Remove the Components for This Tutorial</h3>
<div>
<p>You can remove the components that you created for this tutorial if you no longer need them.</p>
<ol>
<li class="stepexpand"><span>Remove the CONNECT command rule.</span>
<div>
<pre dir="ltr">EXEC DBMS_MACADM.DELETE_COMMAND_RULE (&#39;CONNECT&#39;, &#39;%&#39;, &#39;%&#39;);
</pre></div>
</li>
<li class="stepexpand"><span>Remove the Client_Prog_Name factor.</span>
<div>
<pre dir="ltr">EXEC DBMS_MACADM.DELETE_FACTOR(&#39;Client_Prog_Name&#39;);
</pre></div>
</li>
<li class="stepexpand"><span>Remove the Limit SQL*Plus Access rule set.</span>
<div>
<pre dir="ltr">EXEC DBMS_MACADM.DELETE_RULE_SET(&#39;Limit SQL*Plus Access&#39;);
</pre></div>
</li>
<li class="stepexpand"><span>Remove the rules.</span>
<div>
<pre dir="ltr">EXEC DBMS_MACADM.DELETE_RULE(&#39;Prevent Apps Schemas Access to SQL*Plus&#39;);
EXEC DBMS_MACADM.DELETE_RULE(&#39;Allow Non-Apps Schemas Access to SQL*Plus&#39;);
</pre></div>
</li>
<li class="stepexpand"><span>If necessary, as a user who has been granted the <code class="codeph">DBV_ACCTMGR</code> role, lock the <code class="codeph">HR</code> and <code class="codeph">OE</code> accounts.</span>
<div>
<pre dir="ltr">CONNECT bea_dvacctmgr <span class="italic">--Or, CONNECT amalcolumn_dbacctmgr@hrpdb</span>
Enter password: <span class="italic">password</span>

ALTER USER HR ACCOUNT LOCK;
ALTER USER OE ACCOUNT LOCK;
</pre></div>
</li>
</ol>
</div>
</div>
</div>
<a id="DVADM70258"></a>
<div class="props_rev_3"><a id="GUID-33BAA236-2C0E-49AB-803A-89A3C2945A8B"></a>
<h2 id="DVADM-GUID-33BAA236-2C0E-49AB-803A-89A3C2945A8B" class="sect2">Tutorial: Restricting User Activities Based on Session Data</h2>
<div>
<p>This tutorial shows how to restrict user activities based on their session data, such as the domain the user is using.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="cfgfact.htm#GUID-6122D69D-91A3-40AC-8012-AACDDAC33D27" title="You can use factor identity mapping to set session-based user restrictions for database activities.">About This Tutorial</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-EDE5443B-0ADA-4AE3-B2F8-DAC02697FF07" title="Before you can use this tutorial, you must create an administrative user.">Step 1: Create an Administrative User</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-4EA09558-D730-4851-A1F1-C6D8D85C9353" title="Next, you must add identities to the Domain factor, which is a default factor.">Step 2: Add Identities to the Domain Factor</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-8D459AAC-2F56-46F6-9C45-8347DBC4468F" title="After you have added identities to the domain factory, you can map them to the Client_IP factor.">Step 3: Map the Domain Factor Identities to the Client_IP Factor</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-A89A6D8D-78AD-49B9-AFEC-18F42BB13DAC" title="You must create a rule set to work with the factor that you modified.">Step 4: Create a Rule Set to Set the Hours and Select the Factor Identity</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-33FD3BD0-72EF-43BC-924E-4CA79BA88192" title="You must create a command rule that uses the rule set that you created.">Step 5: Create a Command Rule That Uses the Rule Set</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-A2B6E7D8-CAA3-44BE-8904-0CF157898960" title="Test the settings by resetting the system clock, logging in as the mwaldron administrative user, and then trying to create a table.">Step 6: Test the Factor Identity Settings</a></p>
</li>
<li>
<p><a href="cfgfact.htm#GUID-0F089748-289A-455B-B22A-DE3952789A51" title="You can remove the components that you created for this tutorial if you no longer need them.">Step 7: Remove the Components for This Tutorial</a></p>
</li>
</ul>
</div>
<a id="DVADM71119"></a>
<div class="props_rev_3"><a id="GUID-6122D69D-91A3-40AC-8012-AACDDAC33D27"></a>
<h3 id="DVADM-GUID-6122D69D-91A3-40AC-8012-AACDDAC33D27" class="sect3">About This Tutorial</h3>
<div>
<p>You can use factor identity mapping to set session-based user restrictions for database activities.</p>
<p>For example, suppose you wanted to restrict administrative access to a database using the following criteria:</p>
<ul style="list-style-type: disc;">
<li>
<p>Ensure that the administrator is accessing the database from the correct IP address.</p>
</li>
<li>
<p>Limit the database access to the standard business hours of the administrator.</p>
</li>
</ul>
<p>This type of configuration is useful for restricting different types of administrators: not only local, internal administrators, but offshore and contract administrators as well.</p>
<p>In this tutorial, you modify the Domain factor to include identities for a secure and non-secure network access, which are based on the IP address of the computer the administrator is using. If the administrator tries to perform an action outside the standard working hours or from a different IP address, then Oracle Database Vault prevents him from doing so.</p>
</div>
</div>
<a id="DVADM70259"></a>
<div class="props_rev_3"><a id="GUID-EDE5443B-0ADA-4AE3-B2F8-DAC02697FF07"></a>
<h3 id="DVADM-GUID-EDE5443B-0ADA-4AE3-B2F8-DAC02697FF07" class="sect3">Step 1: Create an Administrative User</h3>
<div>
<p>Before you can use this tutorial, you must create an administrative user.</p>
<ol>
<li class="stepexpand"><span>In SQL*Plus, log in as a user who has been granted the <code class="codeph">DV_ACCTMGR</code> role, and then create the user account <code class="codeph">mwaldron</code>.</span>
<div>
<p>For example:</p>
<pre dir="ltr">sqlplus bea_dvacctmgr
Enter password: <span class="italic">password</span>

CREATE USER mwaldron IDENTIFIED BY <span class="italic">password</span>;
</pre>
<p>Follow the guidelines in <a class="olink DBSEG33223" target="_blank" href="../DBSEG/authentication.htm#DBSEG33223"><span><cite>Oracle Database Security Guide</cite></span></a> to replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure.</p>
<p>In a multitenant environment, you must connect to the appropriate pluggable database (PDB).</p>
<p>For example:</p>
<pre dir="ltr">sqlplus bea_dvacctmgr@hrpdb
Enter password: <span class="italic">password</span>
</pre>
<p>To find the available PDBs, query the <code class="codeph">DBA_PDBS</code> data dictionary view. To check the current PDB, run the <code class="codeph">show con_name</code> command.</p>
</div>
</li>
<li class="stepexpand"><span>Connect as a user who privileges to grant the <code class="codeph">CREATE SESSION</code> privilege and the <code class="codeph">DBA</code> role, and then grant user <code class="codeph">mwaldron</code> these privileges. This user must also be authorized as an owner of the Oracle System Privilege and Role Management realm.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT dba_psmith <span class="italic">-- Or, CONNECT dba_psmith@hrpdb</span>
Enter password: <span class="italic">password</span>

GRANT CREATE SESSION, DBA TO mwaldron;
</pre></div>
</li>
</ol>
</div>
</div>
<a id="DVADM70260"></a>
<div class="props_rev_3"><a id="GUID-4EA09558-D730-4851-A1F1-C6D8D85C9353"></a>
<h3 id="DVADM-GUID-4EA09558-D730-4851-A1F1-C6D8D85C9353" class="sect3">Step 2: Add Identities to the Domain Factor</h3>
<div>
<p>Next, you must add identities to the Domain factor, which is a default factor.</p>
<ol>
<li class="stepexpand"><span>From Cloud Control, log into Oracle Database Vault Administrator as a user who has been granted the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role and the <code class="codeph">SELECT ANY DICTIONARY</code> system privilege.</span>
<div>
<p><a href="getting_started.htm#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for Oracle Database Vault.">Logging into Oracle Database Vault</a> explains how to log in.</p>
</div>
</li>
<li class="stepexpand"><span>In the Administration page, under Database Vault Components, click <span class="bold">Factors</span>.</span>
<div>
<p>The Factors page appears.</p>
</div>
</li>
<li class="stepexpand"><span>Select the <span class="bold">Show Oracle defined Factors</span> check box to display the default factors.</span></li>
<li class="stepexpand"><span>Select the Domain factor and then select <span class="bold">Edit</span>.</span>
<div>
<p>The Domain factor will be the parent factor.</p>
</div>
</li>
<li class="stepexpand"><span>Click the <span class="bold">Next</span> button until you reach the Identities page.</span></li>
<li class="stepexpand"><span>Select the <span class="bold">Add New Identity</span> button.</span></li>
<li class="stepexpand"><span>In the Identity tab of the Add New Identity and Mapping page, enter the following information:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Value:</span> Enter <code class="codeph">HIGHLY SECURE INTERNAL NETWORK</code></p>
</li>
<li>
<p><span class="bold">Trust Level:</span> Select <span class="bold">Very Trusted</span></p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">OK</span>.</span></li>
<li class="stepexpand"><span>Repeat these steps to create a second identity called <code class="codeph">NOT SECURE</code>, and then set its trust level to <span class="bold">Untrusted</span>.</span>
<div>
<div class="figure" id="GUID-4EA09558-D730-4851-A1F1-C6D8D85C9353__GUID-72FAD807-FE7E-40CE-9D5D-F2FAE1467AC3"><img width="667" height="382" src="img/GUID-D6E15C0C-87DA-4F99-96A5-52131CBFE17A-default.gif" alt="Description of GUID-D6E15C0C-87DA-4F99-96A5-52131CBFE17A-default.gif follows" title="Description of GUID-D6E15C0C-87DA-4F99-96A5-52131CBFE17A-default.gif follows"/><br/>
<a href="img_text/GUID-D6E15C0C-87DA-4F99-96A5-52131CBFE17A-default.htm">Description of the illustration GUID-D6E15C0C-87DA-4F99-96A5-52131CBFE17A-default.gif</a></div>
<!-- class="figure" --></div>
</li>
</ol>
</div>
</div>
<a id="DVADM70261"></a>
<div class="props_rev_3"><a id="GUID-8D459AAC-2F56-46F6-9C45-8347DBC4468F"></a>
<h3 id="DVADM-GUID-8D459AAC-2F56-46F6-9C45-8347DBC4468F" class="sect3">Step 3: Map the Domain Factor Identities to the Client_IP Factor</h3>
<div>
<p>After you have added identities to the domain factory, you can map them to the Client_IP factor.</p>
<div class="section">The Client_IP factor is a default factor.</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>In Identities page, select the HIGHLY SECURE INTERNAL NETWORK identity and then select <span class="bold">Edit</span>.</span></li>
<li class="stepexpand"><span>In the Add New Identity and Mapping window, select the <span class="bold">Map Identity</span> subpage.</span></li>
<li class="stepexpand"><span>Select the <span class="bold">Map Identity</span> tab, and then select <span class="bold">Add Mapping</span>.</span></li>
<li class="stepexpand"><span>In the Add New Identity Mapping page, enter the following information:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Child Factor:</span> Select <span class="bold">Client_IP</span> to be the child factor.</p>
</li>
<li>
<p><span class="bold">Operator:</span> Select <span class="bold">Equal</span>.</p>
</li>
<li>
<p><span class="bold">Min Value:</span> Enter the IP address for the Virtual Machine (for example, <code class="codeph">192.0.2.12</code>). (This is the computer that user <code class="codeph">mwaldron</code> uses. For this tutorial, you can enter the IP address of your own computer. If you are using Microsoft Windows, use the IP address assigned to the Loopback Adapter.)</p>
</li>
<li>
<p><span class="bold">Max Value:</span> Leave this field empty.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">OK</span>, and then click <span class="bold">OK</span> again to return to the Identities page.</span></li>
<li class="stepexpand"><span>Create the following two identity maps for the NOT SECURE identity, by editing this identity:</span>
<div>
<div class="tblformal" id="GUID-8D459AAC-2F56-46F6-9C45-8347DBC4468F__GUID-D3A68B5C-BF86-4E26-B393-F89B7BDD1C4C">
<table class="cellalignment364" summary="SECURE NETWORK EXTERNAL DBA identity mappings, listed top to bottom, left to right">
<thead>
<tr class="cellalignment332">
<th class="cellalignment446" id="d35707e6876">Child Factor</th>
<th class="cellalignment384" id="d35707e6880">Operator</th>
<th class="cellalignment422" id="d35707e6884">Min Value</th>
<th class="cellalignment380" id="d35707e6888">Max Value</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment332">
<td class="cellalignment447" id="d35707e6894" headers="d35707e6876">
<p><code class="codeph">Client_IP</code></p>
</td>
<td class="cellalignment386" headers="d35707e6894 d35707e6880">
<p><code class="codeph">Less</code></p>
</td>
<td class="cellalignment424" headers="d35707e6894 d35707e6884">
<p><code class="codeph">192.0.2.5</code></p>
</td>
<td class="cellalignment382" headers="d35707e6894 d35707e6888">
<p>(Leave blank)</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment447" id="d35707e6910" headers="d35707e6876">
<p><code class="codeph">Client_IP</code></p>
</td>
<td class="cellalignment386" headers="d35707e6910 d35707e6880">
<p><code class="codeph">Greater</code></p>
</td>
<td class="cellalignment424" headers="d35707e6910 d35707e6884">
<p><code class="codeph">192.0.2.20</code></p>
</td>
<td class="cellalignment382" headers="d35707e6910 d35707e6888">
<p>(Leave blank)</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>The identity maps in the NOT SECURE identity are in a range of IP addresses outside the IP address that user <code class="codeph">mwaldron</code> uses (192.0.2.12). The IP addresses here must be in any range <span class="italic">outside</span> <code class="codeph">mwaldron</code>&#39;s IP address.</p>
<p>This identity mapping creates the following condition: If the user logs in from the correct IP address, then Oracle Database Vault decides that the connection is secure, through the HIGHLY SECURE INTERNAL NETWORK identity. However, if the user logs in from an IP address that is less than 192.0.2.5 or greater than 192.0.2.20, then the connection is deemed not secure, through the NO SECURE identity.</p>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">OK</span>.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Done</span>, and then click <span class="bold">Finish</span>.</span></li>
<li class="stepexpand" id="GUID-8D459AAC-2F56-46F6-9C45-8347DBC4468F__CIHCJBAH"><span>Test the factor identities.</span>
<div id="GUID-8D459AAC-2F56-46F6-9C45-8347DBC4468F__FIRSTINSQLPLUSCONNECTASUSERMWALDRON-B1556126">
<p>First, in SQL*Plus, connect as user <code class="codeph">mwaldron</code> but do not specify a database instance.</p>
<pre dir="ltr">CONNECT mwaldron <span class="italic">-- Or, CONNECT mwaldron@hrpdb</span>
Enter password: <span class="italic">password</span>

SELECT DVF.F$CLIENT_IP FROM DUAL;
</pre>
<p>The following output should appear:</p>
<pre dir="ltr">F$CLIENT_IP
-------------------------------------
</pre>
<p>Next:</p>
<pre dir="ltr">SELECT DVF.F$DOMAIN FROM DUAL;
</pre>
<p>The following output should appear:</p>
<pre dir="ltr">F$DOMAIN
-------------------------------------
NOT SECURE
</pre>
<p>Because user <code class="codeph">mwaldron</code> is not connecting directly to the database instance, Oracle Database Vault does not recognize the IP address from which he is connecting. In this case, Oracle Database uses the IPC protocol to perform the connection, which sets the IP value to null. Therefore, the identity for this connection is set to NOT SECURE.</p>
<p>Now connect to SQL*Plus by specifying the database instance (for example, <code class="codeph">orcl</code>), and then check the factor identities again:</p>
<pre dir="ltr">CONNECT mwaldron@orcl
Enter password: <span class="italic">password</span>

SELECT DVF.F$CLIENT_IP FROM DUAL;
</pre>
<p>The following output should appear:</p>
<pre dir="ltr">F$CLIENT_IP
-------------------------------------
192.0.2.12
</pre>
<p>Next:</p>
<pre dir="ltr">SELECT DVF.F$DOMAIN FROM DUAL;
</pre>
<p>The following output should appear:</p>
<pre dir="ltr">F$DOMAIN
-------------------------------------
HIGHLY SECURE INTERNAL NETWORK
</pre>
<p>Now that user <code class="codeph">mwaldron</code> is connecting to the <code class="codeph">orcl</code> database instance, his IP address is recognized. This is because the database uses the TCP protocol, so now the host IP value can be populated appropriately. Because the IP address is within the correct range, the factor identity is set to HIGHLY SECURE INTERNAL NETWORK.</p>
</div>
</li>
</ol>
</div>
</div>
<a id="DVADM70262"></a>
<div class="props_rev_3"><a id="GUID-A89A6D8D-78AD-49B9-AFEC-18F42BB13DAC"></a>
<h3 id="DVADM-GUID-A89A6D8D-78AD-49B9-AFEC-18F42BB13DAC" class="sect3">Step 4: Create a Rule Set to Set the Hours and Select the Factor Identity</h3>
<div>
<p>You must create a rule set to work with the factor that you modified.</p>
<ol>
<li class="stepexpand"><span>In the Administration page, under Database Vault Components, select <span class="bold">Rule Sets</span>.</span></li>
<li class="stepexpand"><span>In the Rule Sets page, select <span class="bold">Create</span>.</span></li>
<li class="stepexpand"><span>In the Create Rule Set page, enter the following settings:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Name:</span> Enter <code class="codeph">Internal DBA Standard Working Hours</code>.</p>
</li>
<li>
<p><span class="bold">Status:</span> Select <span class="bold">Enabled</span>.</p>
</li>
<li>
<p><span class="bold">Evaluation Options:</span> Select <span class="bold">All True</span>.</p>
</li>
</ul>
<p>Leave the remaining settings at their defaults.</p>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">Next</span> to display the Rules Associated with Rule Sets page.</span></li>
<li class="stepexpand"><span>Select <span class="bold">Create Rule</span>.</span></li>
<li class="stepexpand"><span>In the Create Rule window, enter the following settings:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Name:</span> <code class="codeph">Internal DBA</code></p>
</li>
<li>
<p><span class="bold">Expression:</span> <code class="codeph">DVF.F$SESSION_USER=&#39;MWALDRON&#39;</code></p>
<p>(When you create an expression with a user name, enter the user name in upper case letters, because that is how the database stores user names.)</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">OK</span>.</span></li>
<li class="stepexpand"><span>Use the <span class="bold">Create Rule</span> pages to create the following additional rules:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Name:</span> <code class="codeph">Internal Network Only</code></p>
<p><span class="bold">Rule Expression:</span> <code class="codeph">DVF.F$DOMAIN=&#39;HIGHLY SECURE INTERNAL NETWORK&#39;</code></p>
</li>
<li>
<p><span class="bold">Name:</span> <code class="codeph">Week Day</code></p>
<p><span class="bold">Rule Expression:</span> <code class="codeph">TO_CHAR(SYSDATE, &#39;D&#39;) BETWEEN &#39;2&#39; AND &#39;6&#39;</code></p>
</li>
<li>
<p><span class="bold">Name:</span> <code class="codeph">Week Working Day Hours</code></p>
<p><span class="bold">Rule Expression:</span> <code class="codeph">TO_CHAR(SYSDATE, &#39;HH24&#39;) BETWEEN &#39;08&#39; AND &#39;19&#39;</code></p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">Done</span>, and then click <span class="bold">Finish</span>.</span></li>
</ol>
</div>
</div>
<a id="DVADM70263"></a>
<div class="props_rev_3"><a id="GUID-33FD3BD0-72EF-43BC-924E-4CA79BA88192"></a>
<h3 id="DVADM-GUID-33FD3BD0-72EF-43BC-924E-4CA79BA88192" class="sect3">Step 5: Create a Command Rule That Uses the Rule Set</h3>
<div>
<p>You must create a command rule that uses the rule set that you created.</p>
<ol>
<li class="stepexpand"><span>In the Administration page, select <span class="bold">Command Rules</span>.</span></li>
<li class="stepexpand"><span>In the Command Rules page, select <span class="bold">Create</span>.</span></li>
<li class="stepexpand"><span>In the Create Command Rule page, enter the following settings:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Command</span>: Select <span class="bold">CREATE TABLE</span> from the list.</p>
</li>
<li>
<p><span class="bold">Status:</span> Select <span class="bold">Enabled</span>.</p>
</li>
<li>
<p><span class="bold">Applicable Object Owner:</span> Ensure it is set to <span class="bold">%</span> (the default).</p>
</li>
<li>
<p><span class="bold">Applicable Object Name:</span> Ensure it is set to <span class="bold">%</span> (the default).</p>
</li>
<li>
<p><span class="bold">Evaluating Rule Set</span>: Select <span class="bold">Internal DBA Standard Working Hours</span> from the list.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">OK</span>.</span></li>
</ol>
</div>
</div>
<a id="DVADM70264"></a>
<div class="props_rev_3"><a id="GUID-A2B6E7D8-CAA3-44BE-8904-0CF157898960"></a>
<h3 id="DVADM-GUID-A2B6E7D8-CAA3-44BE-8904-0CF157898960" class="sect3">Step 6: Test the Factor Identity Settings</h3>
<div>
<p>Test the settings by resetting the system clock, logging in as the <code class="codeph">mwaldron</code> administrative user, and then trying to create a table.</p>
<ol>
<li class="stepexpand"><span>Set the system time to 9 p.m.</span>
<div>
<p><span class="bold">UNIX:</span> Log in as root and use the <code class="codeph">date</code> command to set the time. For example, assuming the date today is August 15, 2013, you would enter the following:</p>
<pre dir="ltr">su root
Password: <span class="italic">password</span>

date --set=&#34;15 AUG 2013 21:00:00&#34;
</pre>
<p><span class="bold">Windows:</span> Double-click the clock icon, which is typically at the lower right corner of the screen. In the Date and Time Properties window, set the time to 9 p.m., and then click <span class="bold">OK</span>.</p>
</div>
</li>
<li class="stepexpand"><span>In SQL*Plus, connect as user <code class="codeph">mwaldron</code> and try to create a table. In the following, replace <code class="codeph">orcl</code> with the name of your database instance.</span>
<div>
<pre dir="ltr">CONNECT mwaldron@orcl
Enter password: <span class="italic">password</span>

CREATE TABLE TEST (num number);  
</pre>
<p>The following output should appear:</p>
<pre dir="ltr">ORA-47400: Command Rule violation for create table on MWALDRON.TEST
</pre>
<p>Because user <code class="codeph">mwaldron</code> is create a table outside working hours, Database Vault prevents him.</p>
</div>
</li>
<li class="stepexpand"><span>Reset the system time back to the local time.</span></li>
<li class="stepexpand"><span>In SQL*Plus, as user <code class="codeph">mwaldron</code>, try to create the table again.</span>
<div>
<pre dir="ltr">CREATE TABLE TEST (num number);

Table created.

DROP TABLE TEST;
Table dropped.
</pre>
<p>Now that user <code class="codeph">mwaldron</code> is working during his local hours and from the IP address associated with the HIGHLY SECURE INTERNAL NETWORK identity, he can create tables.</p>
</div>
</li>
<li class="stepexpand"><span>Reconnect as user <code class="codeph">mwaldron</code> but without adding the database instance name to the connection command, and then try to create the table again.</span>
<div>
<pre dir="ltr">CONNECT mwaldron <span class="italic">-- Or, CONNECT mwaldron@hrpdb</span>
Enter password: <span class="italic">password</span>

CREATE TABLE TEST (num number);
</pre>
<p>The following output should appear:</p>
<pre dir="ltr">ORA-47400: Command Rule violation for create table on MWALDRON.TEST
</pre>
<p>Even though user <code class="codeph">mwaldron</code> is trying to create a table during the correct time, he cannot because is not directly logged in to the <code class="codeph">orcl</code> database instance. Oracle Database Vault deems him to be using the NOT SECURE identity, and then denies him access.</p>
</div>
</li>
</ol>
</div>
</div>
<a id="DVADM70265"></a>
<div class="props_rev_3"><a id="GUID-0F089748-289A-455B-B22A-DE3952789A51"></a>
<h3 id="DVADM-GUID-0F089748-289A-455B-B22A-DE3952789A51" class="sect3">Step 7: Remove the Components for This Tutorial</h3>
<div>
<p>You can remove the components that you created for this tutorial if you no longer need them.</p>
<ol>
<li class="stepexpand"><span>Log into the database instance as the <code class="codeph">DV_ACCTMGR</code> user and drop user <code class="codeph">mwaldron</code>.</span>
<div>
<pre dir="ltr">sqlplus bea_dvacctmgr <span class="italic">-- Or, CONNECT bea_dvacctmgr@hrpdb</span>
Enter password: <span class="italic">password</span>

DROP USER mwaldron CASCADE;
</pre></div>
</li>
<li class="stepexpand"><span>Remove the CREATE TABLE command rule.</span>
<div>
<p>Return the Administration page and select <span class="bold">Command Rules</span>. Select the CREATE TABLE command rule and then click <span class="bold">Delete</span>. In the Confirmation window, select <span class="bold">Yes</span>.</p>
</div>
</li>
<li class="stepexpand"><span>Remove the Internal DBA Standard Working Hours rule set.</span>
<div>
<p>Select <span class="bold">Rule Sets</span> in the Administration page. In the Rule Sets page, select the Internal DBA Standard Working Hours rule set, and then select <span class="bold">Delete</span>. In the Confirmation window, select the <span class="bold">Remove rules associated with the rule set</span> check box, and then select <span class="bold">Yes</span>.</p>
</div>
</li>
<li class="stepexpand"><span>Remove the rules that were associated with the Internal DBA Standard Working Hours rule set.</span>
<div>
<p>Select <span class="bold">Rules</span> in the Administration page. In the Rules page, select the Internal DBA, Internal Network Only, Week Day, and Week Day Working Hours rules, and then select <span class="bold">Delete</span>. Select Yes in the Confirmation window.</p>
</div>
</li>
<li class="stepexpand"><span>Remove the HIGHLY SECURE INTERNAL NETWORK and NOT SECURE factor identities from the Domain factor.</span>
<div>
<p>In the Administration page and select <span class="bold">Factors</span>. Select the Domain factor, select <span class="bold">Edit</span>. Click <span class="bold">Next</span> until you reach the Identities page. Select the HIGHLY SECURE INTERNAL NETWORK and NOT SECURE factor identities and click <span class="bold">Remove</span> to remove each one. (Hold the <span class="bold">Control</span> key down to select multiple items.) In the Confirmation window, select <span class="bold">Yes</span>. Click <span class="bold">Done</span>, and then click <span class="bold">Finish</span>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<a id="DVADM70266"></a>
<div class="props_rev_3"><a id="GUID-F197EA7C-8AC2-4D7B-B5CB-7326CA1FABA7"></a>
<h2 id="DVADM-GUID-F197EA7C-8AC2-4D7B-B5CB-7326CA1FABA7" class="sect2">Guidelines for Designing Factors</h2>
<div>
<p>Oracle provides guidelines for designing factors.</p>
<ul style="list-style-type: disc;">
<li>
<p>You can use the Oracle utility packages such as <code class="codeph">UTL_TCP</code>, <code class="codeph">UTL_HTTP</code>, <code class="codeph">DBMS_LDAP</code>, and <code class="codeph">DBMS_PIPE</code> to integrate security or other contextual information about the session from external systems.</p>
</li>
<li>
<p>Do not specify a retrieval method if the factor identification is set to <span class="bold">Identified By Factors</span>. Retrieval methods are only needed if you set the factor to <span class="bold">By Method</span> or <span class="bold">By Constant</span>.</p>
</li>
<li>
<p>Consider using a validation method if a factor has an assignment rule set. Doing so helps to verify that invalid identities are not submitted.</p>
</li>
<li>
<p>Use the client-supplied factors such as Program, OS User, and others with caution, because the values that are supplied can only be trusted when the client software is trusted and the communications channel from the client software is known to be secure.</p>
</li>
<li>
<p>Only specify an evaluation option of <span class="bold">By Access</span> if the value returned by the retrieval method could change from one invocation to the next in the same session (for example, time-based factors).</p>
</li>
<li>
<p>Optimize the internal logic of a function used for the factor retrieval method using traditional SQL and PL/SQL optimization techniques. For more information about performance and optimization, see <a class="olink TGSQL112" target="_blank" href="../TGSQL/tgsql_intro.htm#TGSQL112"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a>.</p>
</li>
<li>
<p>If the discrete values returned by the retrieval method are known, be sure to define identities for each value so that you can assign trust levels for them. Trust levels add value to factors as you also can use the trust level in application logic based on factors.</p>
</li>
<li>
<p>A security policy based on more factors is generally considered stronger than one based on fewer factors. You can create a new factor that is identified by other factors to store combinations of factors into logical grouping using identity maps. This also makes it easier to label the parent factor when you integrate the factors with the Oracle Label Security labels. (See <a href="dv_ols.htm#GUID-41CF584E-84D5-4912-A113-043D52C9EF06" title="You can integrate Oracle Database Vault with Oracle Label Security, and check the integration with reports and data dictionary views.">Integrating Oracle Database Vault with Oracle Label Security</a> for more information.)</p>
</li>
<li>
<p>It is generally easier to configure and debug a factor that is labeled <span class="bold">By Self</span> than one labeled <span class="bold">By Factors</span> when integrating the Oracle Label Security.</p>
</li>
<li>
<p>You can design a database client application to pass one or more security, end-user, or environmental attributes so that they are available to an associated database session. To do this, create a single factor for each attribute and then use an assignment rule set to control when these attributes can be assigned (for example only when using a specific Web application on specified named application server computers). Oracle Database Vault factors used in this fashion are very much like the Oracle procedure <code class="codeph">DBMS_SESSION.SET_IDENTIFIER</code> but also include a capability to control when they can be set. For more information about the <code class="codeph">DBMS_SESSION</code> package, see <a class="olink ARPLS054" target="_blank" href="../ARPLS/d_sessio.htm#ARPLS054"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> .</p>
</li>
</ul>
</div>
</div>
<a id="DVADM70267"></a>
<div class="props_rev_3"><a id="GUID-F6EB02AD-18A4-4005-B3AA-89B23F31AC6B"></a>
<h2 id="DVADM-GUID-F6EB02AD-18A4-4005-B3AA-89B23F31AC6B" class="sect2">How Factors Affect Performance</h2>
<div>
<p>The complexity of factors affects the performance of your Oracle database instance.</p>
<p>Each factor has elements that are processed, such as its validation method, trust level, and so on. For factors that are evaluated by the session, such as Database_Hostname and <code class="codeph">Proxy_User</code>, Oracle Database Vault performs this processing during session initialization, and then caches the results for subsequent requests for that value.</p>
<p>The default factors listed in <a href="cfgfact.htm#GUID-F4B06A72-933C-43B6-82CC-B7273B7F2696" title="Oracle Database Vault provides default factors.">Default Factors</a> are cached because they are likely candidates for a typical security policy. However, if you only use five factors (for example, in rule sets or other components), then the other factors consume resources that could otherwise be used elsewhere. In this case, you should remove the unnecessary factors by deleting them. (Oracle Database Vault does not use any of these factors internally, so you can remove them if you do not need them.)</p>
<p>If you have a large number of users or if your application server frequently must create and destroy connections, the resources used can affect system performance. You can delete the unnecessary factors.</p>
<p>You can check system performance by running tools such as Oracle Enterprise Manager (including Oracle Enterprise Manager Cloud Control, which is installed by default with Oracle Database), Automatic Workload Repository (AWR), and <code class="codeph">TKPROF</code>.</p>
<div class="infoboxnotealso" id="GUID-F6EB02AD-18A4-4005-B3AA-89B23F31AC6B__ORACLEDATABASEPERFORMANCETUNINGGUID-630F19C8">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink TGDBA025" target="_blank" href="../TGDBA/pfgrf_perf_overview.htm#TGDBA025"><span><cite>Oracle Database Performance Tuning Guide</cite></span></a> to learn how to monitor database performance</p>
</li>
<li>
<p><a class="olink TGSQL809" target="_blank" href="../TGSQL/tgsql_trace.htm#TGSQL809"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a> to monitor the performance of individual SQL and PL/SQL statements</p>
</li>
</ul>
</div>
</div>
</div>
<a id="DVADM70269"></a><a id="DVADM70270"></a><a id="DVADM70268"></a>
<div class="props_rev_3"><a id="GUID-1404DAD0-47FD-46D8-946F-1685C1AD5ADA"></a>
<h2 id="DVADM-GUID-1404DAD0-47FD-46D8-946F-1685C1AD5ADA" class="sect2">Factor Related Reports and Data Dictionary Views</h2>
<div>
<p>Oracle Database Vault provides reports and data dictionary views that display information about factors and their identities.</p>
<div class="section">
<p><a href="cfgfact.htm#GUID-1404DAD0-47FD-46D8-946F-1685C1AD5ADA__CIHECJFB" title="factor reports">Table 8-1</a> lists the Oracle Database Vault reports. See <a href="reports.htm#GUID-1B6D02DE-3FB2-4ADB-9916-4491B37FDECD" title="Oracle Database Vault provides reports that track activities, such as the Database Vault configuration settings.">Oracle Database Vault Reports</a>, for information about how to run these reports.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-1404DAD0-47FD-46D8-946F-1685C1AD5ADA__CIHECJFB">
<p class="titleintable">Table 8-1 Reports Related to Factors and Their Identities</p>
<table class="cellalignment338" title="Reports Related to Factors and Their Identities" summary="factor reports">
<thead>
<tr class="cellalignment332">
<th class="cellalignment371" id="d35707e8150">Report</th>
<th class="cellalignment372" id="d35707e8153">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment332">
<td class="cellalignment373" id="d35707e8158" headers="d35707e8150">
<p><a href="reports.htm#GUID-334C779A-3BBC-4C57-A6F9-0C3EF9D44F37" title="The Factor Audit Report shows factors that failed to evaluate or were set to create audit records under various conditions.">Factor Audit Report</a></p>
</td>
<td class="cellalignment374" headers="d35707e8158 d35707e8153">
<p>Audits factors (for example, to find factors that failed to be evaluated)</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment373" id="d35707e8169" headers="d35707e8150">
<p><a href="reports.htm#GUID-A94B0EFE-DF5E-4E3E-B952-EF9047348370" title="The Factor Configuration Issues Report displays Oracle Database Vault factors configuration issues.">Factor Configuration Issues Report</a></p>
</td>
<td class="cellalignment374" headers="d35707e8169 d35707e8153">
<p>Lists configuration issues, such as disabled or incomplete rule sets, or to audit issues that may affect the factor</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment373" id="d35707e8180" headers="d35707e8150">
<p><a href="reports.htm#GUID-CDB7ACBE-8C0E-4D36-93F5-CF0E206A18FA" title="The Factor Without Identities Report displays Oracle Database Vault factors that have no identities configured.">Factor Without Identities Report</a></p>
</td>
<td class="cellalignment374" headers="d35707e8180 d35707e8153">
<p>Lists factors that have had no identities assigned yet</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment373" id="d35707e8191" headers="d35707e8150">
<p><a href="reports.htm#GUID-4BB1C655-BCBA-4C9D-8793-10E9AFD9F51D" title="The Identity Configuration Issues Report displays Oracle Database Vault factor identity configuration issues.">Identity Configuration Issues Report</a></p>
</td>
<td class="cellalignment374" headers="d35707e8191 d35707e8153">
<p>Lists factors that have invalid label identities or no map for the identity</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment373" id="d35707e8202" headers="d35707e8150">
<p><a href="reports.htm#GUID-162BB69D-9C1F-4FB8-959E-1B8C21FE6FF9" title="The Rule Set Configuration Issues Report displays Oracle Database Vault rule set configuration issues.">Rule Set Configuration Issues Report</a></p>
</td>
<td class="cellalignment374" headers="d35707e8202 d35707e8153">
<p>Lists rule sets that have no rules defined or enabled, which may affect the factors that use them</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p><a href="cfgfact.htm#GUID-1404DAD0-47FD-46D8-946F-1685C1AD5ADA__CIHCDBII" title="Factor Data Dictionary Views">Table 8-2</a> lists data dictionary views that provide information about existing factors and factor identities.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-1404DAD0-47FD-46D8-946F-1685C1AD5ADA__CIHCDBII">
<p class="titleintable">Table 8-2 Data Dictionary Views Used for Factors and Factor Identities</p>
<table class="cellalignment338" title="Data Dictionary Views Used for Factors and Factor Identities" summary="Factor Data Dictionary Views">
<thead>
<tr class="cellalignment332">
<th class="cellalignment375" id="d35707e8229">Data Dictionary View</th>
<th class="cellalignment376" id="d35707e8232">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment332">
<td class="cellalignment377" id="d35707e8237" headers="d35707e8229">
<p><a href="views.htm#GUID-5B6C4B1F-57EE-4F51-A042-645C902A43BA" title="The DVSYS.DBA_DV_FACTOR data dictionary view lists the existing factors in the current database instance.">DVSYS.DBA_DV_FACTOR View</a></p>
</td>
<td class="cellalignment378" headers="d35707e8237 d35707e8232">
<p>Lists the existing factors in the current database instance</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment377" id="d35707e8251" headers="d35707e8229">
<p><a href="views.htm#GUID-1E0E07FF-D8F3-44EE-9662-2756F6E1F49A" title="The DVSYS.DBA_DV_FACTOR_LINK data dictionary view shows the relationships of each factor whose identity is determined by the association of child factors.">DVSYS.DBA_DV_FACTOR_LINK View</a></p>
</td>
<td class="cellalignment378" headers="d35707e8251 d35707e8232">
<p>Shows the relationships of each factor whose identity is determined by the association of child factors</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment377" id="d35707e8265" headers="d35707e8229">
<p><a href="views.htm#GUID-19313BA1-4127-41B4-8CFB-70B62B836328" title="The DVSYS.DBA_DV_FACTOR_TYPE data dictionary view lists the names and descriptions of factor types used in the system.">DVSYS.DBA_DV_FACTOR_TYPE View</a></p>
</td>
<td class="cellalignment378" headers="d35707e8265 d35707e8232">
<p>Lists the names and descriptions of factor types used in the system</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment377" id="d35707e8279" headers="d35707e8229">
<p><a href="views.htm#GUID-CEC74E3E-E65C-4A56-A672-DD9CE7522020" title="The DVSYS.DBA_DV_IDENTITY data dictionary view lists the identities for each factor.">DVSYS.DBA_DV_IDENTITY View</a></p>
</td>
<td class="cellalignment378" headers="d35707e8279 d35707e8232">
<p>Lists the identities for each factor</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment377" id="d35707e8293" headers="d35707e8229">
<p><a href="views.htm#GUID-BC732C4B-A260-45A3-AB65-1D0B9A6F9ED3" title="The DVSYS.DBA_DV_IDENTITY_MAP data dictionary view lists the mappings for each factor identity.">DVSYS.DBA_DV_IDENTITY_MAP View</a></p>
</td>
<td class="cellalignment378" headers="d35707e8293 d35707e8232">
<p>Lists the mappings for each factor identity</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment331">
<tr>
<td class="cellalignment359">
<table class="cellalignment336">
<tr>
<td class="cellalignment335"><a href="cfcmdaut.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment335"><a href="cfseappr.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment361">
<table class="cellalignment334">
<tr>
<td class="cellalignment335"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment335"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment335"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment335"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment335"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment335"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>