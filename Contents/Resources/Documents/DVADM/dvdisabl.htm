<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-5972"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Disabling%20and%20Enabling%20Oracle%C2%A0Database%C2%A0Vault"></a><title>Disabling and Enabling Oracle&nbsp;Database&nbsp;Vault</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="Periodically you must disable and then re-enable Oracle Database Vault, for activities such as installing Oracle Database optional products or features."/>
<meta name="keywords" content="deinstallation, Oracle Database Vault, enabling, procedures for, disabling, database options, installing, troubleshooting, passwords, forgotten, passwords, forgotten, solution for, locked out accounts, database accounts, solution for lockouts, locked out accounts, solution for, reasons for"/>
<meta name="dcterms.created" content="2017-06-05T10:50:14Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Vault Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49109-12"/>
<meta name="dcterms.isVersionOf" content="DVADM"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="audplcy.htm" title="Previous" type="text/html"/>
<link rel="Next" href="dvca.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49109-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6"></a> <span id="PAGE" style="display:none;">30/34</span> <!-- End Header -->
<a id="DVADM012"></a>
<h1 id="DVADM-GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6" class="sect1"><span class="enumeration_appendix">B</span> Disabling and Enabling Oracle&nbsp;Database&nbsp;Vault</h1>
<div>
<p>Periodically you must disable and then re-enable Oracle Database Vault, for activities such as installing Oracle Database optional products or features.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="dvdisabl.htm#GUID-9DE56340-8252-4EE7-803A-965FDE5EC6C7" title="You may need to disable Oracle Database Vault to perform upgrade tasks or correct erroneous configurations.">When You Must Disable Oracle Database Vault</a></p>
</li>
<li>
<p><a href="dvdisabl.htm#GUID-6D80B63C-6A29-47A9-8733-1070199CDF06" title="Be aware that after you disable Oracle Database Vault, Oracle Label Security, which is required to run Database Vault, is still enabled.">Step 1: Disable Oracle Database Vault</a></p>
</li>
<li>
<p><a href="dvdisabl.htm#GUID-40E0211E-B527-4C00-94CA-CC5A63769C74" title="At this stage, Oracle Database Vault is disabled and you can perform the required tasks.">Step 2: Perform the Required Tasks</a></p>
</li>
<li>
<p><a href="dvdisabl.htm#GUID-B75A5A98-5CBD-4782-BA5C-D162AB6AAB97" title="You can enable Oracle Database Vault and Oracle Label Security from SQL*Plus.">Step 3: Enable Oracle Database Vault</a></p>
</li>
</ul>
<div class="infobox-note" id="GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6__GUID-C54E3BDB-544E-4612-B48D-ABBAE30F32B8">
<p class="notep1">Note:</p>
<ul style="list-style-type: disc;">
<li>
<p>When Oracle Database Vault is disabled, there are some Database Vault features that you can still use.</p>
</li>
<li>
<p>Oracle does not support the deinstallation of Oracle Database Vault.</p>
</li>
</ul>
</div>
</div>
<a id="DVADM71061"></a>
<div class="props_rev_3"><a id="GUID-9DE56340-8252-4EE7-803A-965FDE5EC6C7"></a>
<h2 id="DVADM-GUID-9DE56340-8252-4EE7-803A-965FDE5EC6C7" class="sect2">When You Must Disable Oracle Database Vault</h2>
<div>
<p>You may need to disable Oracle Database Vault to perform upgrade tasks or correct erroneous configurations.</p>
<p>You can reenable Oracle Database Vault after you complete the corrective tasks.</p>
<p>To find the enablement and configuration status of Oracle Database Vault, see <a href="getting_started.htm#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="The V$OPTION dynamic view and the DVSYS.DBA_DV_STATUS and DBA_OLS_STATUS data dictionary views verify if Oracle Database is configured and enabled.">Verifying That Oracle Database Vault Is Configured and Enabled</a>.</p>
<div class="infobox-note" id="GUID-9DE56340-8252-4EE7-803A-965FDE5EC6C7__GUID-34AFB182-57ED-42BB-A02B-839921FE1038">
<p class="notep1">Note:</p>
<p>Be aware that if you disable Oracle Database Vault, the privileges that were revoked from existing users and roles during installation remain in effect. See <a href="dv_impact.htm#GUID-5B269A7B-E0EC-484B-8CF6-D664A1DB9A77" title="The Oracle Database Vault configuration revokes privileges from several Oracle Database-supplied users and roles, for better separation of duty.">Privileges That Are Revoked from Existing Users and Roles</a> for a listing of the revoked privileges.</p>
</div>
<p>The following situations require you to disable Oracle Database Vault:</p>
<ul style="list-style-type: disc;">
<li>
<p>You must install any of the Oracle Database optional products or features, such as Oracle Spatial, or Oracle Multimedia, by using Database Configuration Assistant (DBCA).</p>
</li>
<li>
<p>If you did not configure backup <code class="codeph">DV_OWNER</code> and <code class="codeph">DV_ACCTMGR</code> accounts when you registered Oracle Database Vault, and these accounts are inadvertently locked or their passwords forgotten. Note that if your site only has one <code class="codeph">DV_OWNER</code> user and this user has lost his or her password, you will be unable to disable Oracle Database Vault. However, if your site&#39;s only <code class="codeph">DV_ACCTMGR</code> user has lost the password, you can disable Database Vault. As a best practice, you should grant the <code class="codeph">DV_OWNER</code> and <code class="codeph">DV_ACCTMGR</code> roles to new or existing user accounts, and use the Database Vault Owner and Account Manager accounts that you created when you registered Database Vault as back-up accounts. (See <a href="db_objects.htm#GUID-85DCF2C7-BC01-425E-AEDB-1326274713AC" title="As a best practice, you should maintain backup accounts for the DV_OWNER and DV_ACCTMGR roles.">Backup Oracle Database Vault Accounts</a> for a guideline for avoiding this problem in the future.)</p>
</li>
<li>
<p>If you want to register Oracle Internet Directory (OID) using Oracle Database Configuration Assistant (DBCA).</p>
</li>
</ul>
</div>
</div>
<a id="DVADM01203"></a>
<div class="props_rev_3"><a id="GUID-6D80B63C-6A29-47A9-8733-1070199CDF06"></a>
<h2 id="DVADM-GUID-6D80B63C-6A29-47A9-8733-1070199CDF06" class="sect2">Step 1: Disable Oracle Database Vault</h2>
<div>
<p>Be aware that after you disable Oracle Database Vault, Oracle Label Security, which is required to run Database Vault, is still enabled.</p>
<ol>
<li class="stepexpand"><span>In SQL*Plus, log in as the Oracle Database Owner (<code class="codeph">DV_OWNER</code>) account, and then disable Oracle Database Vault.</span>
<div>
<pre dir="ltr">sqlplus psmith
Enter password: <span class="italic">password</span>

EXEC DBMS_MACADM.DISABLE_DV;
</pre></div>
</li>
<li class="stepexpand"><span>In a multitenant environment, connect to the appropriate pluggable database (PDB).</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT psmith@hrpdb
Enter password: <span class="italic">password</span>
</pre>
<p>To find the available PDBs, query the <code class="codeph">DBA_PDBS</code> data dictionary view. To check the current PDB, run the <code class="codeph">show con_name</code> command.</p>
</div>
</li>
<li class="stepexpand"><span>Restart the database.</span>
<div>
<pre dir="ltr">CONNECT SYS AS SYSOPER <span class="italic">-- Or, CONNECT SYS@hrpdb AS SYSOPER</span>
Enter password: <span class="italic">password</span>

SHUTDOWN IMMEDIATE
STARTUP
</pre></div>
</li>
<li class="stepexpand"><span>For Oracle RAC installations, repeat these steps for each node on which the database is installed.</span></li>
</ol>
</div>
</div>
<a id="DVADM71063"></a>
<div class="props_rev_3"><a id="GUID-40E0211E-B527-4C00-94CA-CC5A63769C74"></a>
<h2 id="DVADM-GUID-40E0211E-B527-4C00-94CA-CC5A63769C74" class="sect2">Step 2: Perform the Required Tasks</h2>
<div>
<p>At this stage, Oracle Database Vault is disabled and you can perform the required tasks.</p>
<div class="section">
<p>You can perform the following types of activities:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Use the Oracle Database Vault PL/SQL packages and functions.</span> For example, to correct a login or <code class="codeph">CONNECT</code> rule set error, use the <code class="codeph">DBMS_MACADM</code> PL/SQL package or the Oracle Database Vault pages in Enterprise Manager Cloud Control. Note that a CONNECT command rule cannot prevent a user who has the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role from connecting to the database. This enables a Database Vault administrator to correct a misconfigured protection without having to disable Database Vault.</p>
</li>
<li>
<p><span class="bold">Use the SYSTEM or SYS accounts to perform tasks such as creating or changing passwords, or locking and unlocking accounts.</span> In addition to modifying standard database and administrative user accounts, you can modify passwords and the lock status of any of the Oracle Database Vault-specific accounts, such as users who have been granted the <code class="codeph">DV_ADMIN</code> or <code class="codeph">DV_ACCTMGR</code> roles. (See the tip under <a href="db_objects.htm#GUID-F6CA47BC-B122-4FBD-B914-E5487FEF4F9F" title="You must create accounts for the Oracle Database Vault Owner and Oracle Database Vault Account Manager during the registration process.">Oracle Database Vault Accounts Created During Registration</a> for a guideline for avoiding this problem in the future.)</p>
</li>
<li>
<p><span class="bold">Perform the installation or other tasks that require security protections to be disabled.</span></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM71064"></a>
<div class="props_rev_3"><a id="GUID-B75A5A98-5CBD-4782-BA5C-D162AB6AAB97"></a>
<h2 id="DVADM-GUID-B75A5A98-5CBD-4782-BA5C-D162AB6AAB97" class="sect2">Step 3: Enable Oracle Database Vault</h2>
<div>
<p>You can enable Oracle Database Vault and Oracle Label Security from SQL*Plus.</p>
<ol>
<li class="stepexpand"><span>In SQL*Plus, connect as the Oracle Database Owner (<code class="codeph">DV_OWNER</code>) account, and then enable Oracle Database Vault.</span>
<div>
<pre dir="ltr">CONNECT psmith <span class="italic">-- Or, CONNECT psmith@hrpdb for a PDB</span>
Enter password: <span class="italic">password</span>

EXEC DBMS_MACADM.ENABLE_DV;
</pre></div>
</li>
<li class="stepexpand"><span>Check if Oracle Label Security is enabled.</span>
<div>
<pre dir="ltr">SELECT VALUE FROM V$OPTION WHERE PARAMETER = &#39;Oracle Label Security&#39;;
</pre>
<p>Oracle Label security must be enabled before you can use Database Vault. If it is not enabled, then this query returns <code class="codeph">FALSE</code>.</p>
</div>
</li>
<li class="stepexpand"><span>If Oracle Label Security is not enabled, then enable it.</span>
<div>
<pre dir="ltr">CONNECT SYS AS SYSDBA <span class="italic">-- Or, CONNECT SYS@hrpdb AS SYSDBA</span>
Enter password: <span class="italic">password</span>

EXEC LBACSYS.CONFIGURE_OLS;
EXEC LBACSYS.OLS_ENFORCEMENT.ENABLE_OLS;
</pre></div>
</li>
<li class="stepexpand"><span>Restart the database.</span>
<div>
<pre dir="ltr">CONNECT SYS AS SYSOPER <span class="italic">-- Or, CONNECT SYS@hrpdb AS SYSOPER</span>
Enter password: <span class="italic">password</span>

SHUTDOWN IMMEDIATE
STARTUP
</pre></div>
</li>
<li class="stepexpand"><span>For Oracle RAC installations, repeat these steps for each node on which the database is installed.</span></li>
</ol>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment331">
<tr>
<td class="cellalignment359">
<table class="cellalignment336">
<tr>
<td class="cellalignment335"><a href="audplcy.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment335"><a href="dvca.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment361">
<table class="cellalignment334">
<tr>
<td class="cellalignment335"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment335"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment335"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment335"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment335"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment335"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>