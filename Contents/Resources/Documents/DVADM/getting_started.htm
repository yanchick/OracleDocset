<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-5974"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Getting%20Started%20with%20Oracle%20Database%20Vault"></a><title>Getting Started with Oracle Database Vault</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="Before you can start using Oracle Database Vault, you must register it with the Oracle database."/>
<meta name="keywords" content="Oracle Database Vault registration, about, registering Oracle Database Vault, Oracle Database Vault, registering, using DBCA, non-multitenant environment, DVSYS.CONFIGURE_DV procedure, registering Database Vault with, DBMS_MACADM.ENABLE_DV procedure, common user to manage CDB root, common users to manage specific PDBs, ORA-47503 error, plugging in a Database Vault-enabled database, verifying configuration and enablement, Oracle Database Vault Administrator (DVA), logging on from Oracle Enterprise Manager Cloud Control, Oracle Enterprise Manager Cloud Control, starting Oracle Database Vault from, tutorials, schema, protecting with a realm, realms, tutorial"/>
<meta name="dcterms.created" content="2017-06-05T10:50:14Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Vault Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49109-12"/>
<meta name="dcterms.isVersionOf" content="DVADM"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="dv_impact.htm" title="Previous" type="text/html"/>
<link rel="Next" href="priv_analysis.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49109-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-D3F37B71-0935-462C-A459-557D28F8CF20"></a> <span id="PAGE" style="display:none;">7/34</span> <!-- End Header -->
<a id="DVADM002"></a>
<h1 id="DVADM-GUID-D3F37B71-0935-462C-A459-557D28F8CF20" class="sect1"><span class="enumeration_chapter">3</span> Getting Started with Oracle Database Vault</h1>
<div>
<p>Before you can start using Oracle Database Vault, you must register it with the Oracle database.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="getting_started.htm#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="You can register Oracle Database Vault for either a non-multitenant environment or a multitenant environment.">Registering Oracle Database Vault with an Oracle Database</a></p>
</li>
<li>
<p><a href="getting_started.htm#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for Oracle Database Vault.">Logging into Oracle Database Vault</a></p>
</li>
<li>
<p><a href="getting_started.htm#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="This tutorial shows how to create a realm around the HR schema.">Quick Start Tutorial: Securing a Schema from DBA Access</a></p>
</li>
</ul>
</div>
<a id="DVADM30031"></a>
<div class="props_rev_3"><a id="GUID-68558E32-ABD0-4495-8677-4F9E09283E5D"></a>
<h2 id="DVADM-GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" class="sect2">Registering Oracle Database Vault with an Oracle Database</h2>
<div>
<p>You can register Oracle Database Vault for either a non-multitenant environment or a multitenant environment.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="getting_started.htm#GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D" title="After you install Oracle Database, you must register (that is, configure and enable) Oracle Database Vault with the Oracle database in which it was installed.">About Registering Oracle Database Vault with an Oracle Database</a></p>
</li>
<li>
<p><a href="getting_started.htm#GUID-82062E1E-C0E7-4258-B532-5C0393ADE0DB" title="You can register Oracle Database Vault from SQL*Plus in a non-multitenant environment.">Registering Oracle Database Vault in a Non-Multitenant Environment</a></p>
</li>
<li>
<p><a href="getting_started.htm#GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" title="In SQL*Plus, you can register Oracle Database Vault with a common user who will manage the CDB root.">Registering Oracle Database Vault with a Common User to Manage the CDB Root</a></p>
</li>
<li>
<p><a href="getting_started.htm#GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193" title="In a multitenant environment, you must register Oracle Database Vault in the root first, then in the PDBs.">Registering Database Vault Common Users to Manage Specific PDBs</a></p>
</li>
<li>
<p><a href="getting_started.htm#GUID-C6218DD3-BB78-40F7-8BE2-7391D3BF6418" title="From SQL*Plus, in a multitenant environment, you can plug in a database that already has Database Vault enabled.">Creating Common Database Vault Accounts for a Plugged in Database Vault PDB</a></p>
</li>
<li>
<p><a href="getting_started.htm#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="The V$OPTION dynamic view and the DVSYS.DBA_DV_STATUS and DBA_OLS_STATUS data dictionary views verify if Oracle Database is configured and enabled.">Verifying That Oracle Database Vault Is Configured and Enabled</a></p>
</li>
</ul>
</div>
<a id="DVADM71415"></a>
<div class="props_rev_3"><a id="GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D"></a>
<h3 id="DVADM-GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D" class="sect3">About Registering Oracle Database Vault with an Oracle Database</h3>
<div>
<p>After you install Oracle Database, you must register (that is, configure and enable) Oracle Database Vault with the Oracle database in which it was installed.</p>
<p>Oracle Database includes Database Vault when you choose to include a default database in the installation process, but you must register it before you can use it. If you create a custom database, then you can use DBCA to install and enable Database Vault for it. As part of the registration process, you create the Database Vault administrative accounts. The registration process enables Oracle Label Security if it is not already enabled. Oracle Label Security is required for Oracle Database Vault but it does not require a separate license unless you begin using Oracle Label Security separately and create Oracle Label Security policies. This procedure applies to the current pluggable database (PDB), as well as to both single-instance and Oracle RAC installations. To check if Database Vault has already been enabled, see <a href="getting_started.htm#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="The V$OPTION dynamic view and the DVSYS.DBA_DV_STATUS and DBA_OLS_STATUS data dictionary views verify if Oracle Database is configured and enabled.">Verifying That Oracle Database Vault Is Configured and Enabled</a>.</p>
<p>This section explains how to register Oracle Database Vault in a non-multitenant environment, and several ways that you can register it in a multitenant environment.</p>
</div>
</div>
<a id="DVADM71416"></a>
<div class="props_rev_3"><a id="GUID-82062E1E-C0E7-4258-B532-5C0393ADE0DB"></a>
<h3 id="DVADM-GUID-82062E1E-C0E7-4258-B532-5C0393ADE0DB" class="sect3">Registering Oracle Database Vault in a Non-Multitenant Environment</h3>
<div>
<p>You can register Oracle Database Vault from SQL*Plus in a non-multitenant environment.</p>
<div class="section"></div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Log into the database instance as a user who has privileges to create user accounts and grant the <code class="codeph">CREATE SESSION</code> privilege to other users.</span>
<div>
<p>For example:</p>
<pre dir="ltr">sqlplus sec_admin
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Create accounts that will be used for the Database Vault Owner (<code class="codeph">DV_OWNER</code> role) and Database Vault Account Manager (<code class="codeph">DV_ACCTMGR</code> role) accounts.</span>
<div>
<p>Oracle strongly recommends that you create two accounts for each role. One account, the primary account, will be used on a day-to-day basis and the other account will be used as a backup account in case the password of the primary account is lost and must be reset.</p>
<p>For example:</p>
<pre dir="ltr">GRANT CREATE SESSION TO dbv_owner IDENTIFIED BY <span class="italic">password</span>;
GRANT CREATE SESSION TO dbv_owner_backup IDENTIFIED BY <span class="italic">password</span>;
GRANT CREATE SESSION TO dbv_acctmgr IDENTIFIED BY <span class="italic">password</span>;
GRANT CREATE SESSION TO dbv_acctmgr_backup IDENTIFIED BY <span class="italic">password</span>
</pre>
<p>Replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure. See <a class="olink DBSEG33223" target="_blank" href="../DBSEG/authentication.htm#DBSEG33223"><span class="italic">Oracle Database Security Guide</span></a> for the minimum requirements for creating passwords.</p>
<p>See <a href="db_objects.htm#GUID-85DCF2C7-BC01-425E-AEDB-1326274713AC" title="As a best practice, you should maintain backup accounts for the DV_OWNER and DV_ACCTMGR roles.">Backup Oracle Database Vault Accounts</a> for more information.</p>
<p>Replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure. See <a class="olink DBSEG33223" target="_blank" href="../DBSEG/authentication.htm#DBSEG33223"><span class="italic">Oracle Database Security Guide</span></a> for the minimum requirements for creating passwords.</p>
<p>See <a href="guidelines.htm#GUID-13CD2B04-9CD2-449F-9239-0EA3E31D7C4C" title="Oracle Database Vault defines the several main responsibilities.">Separation of Tasks in an Oracle Database Vault Environment</a> for more information about how the <code class="codeph">DV_OWNER</code> and <code class="codeph">DV_ACCTMGR</code> accounts follow separation of duty guidelines.</p>
</div>
</li>
<li class="stepexpand"><span>Connect with the <code class="codeph">SYSDBA</code> administrative privilege.</span>
<div>
<pre dir="ltr">CONNECT / AS SYSDBA
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Configure the primary Database Vault user accounts.</span>
<div>
<pre dir="ltr">BEGIN
 DVSYS.CONFIGURE_DV (
   dvowner_uname         =&gt; &#39;dbv_owner&#39;,
   dvacctmgr_uname       =&gt; &#39;dbv_acctmgr&#39;);
 END;
/
</pre>
<p>Do not enter the names <code class="codeph">DV_OWNER</code>, <code class="codeph">DV_ACCTMGR</code>, or the names of any other Database Vault roles for these user accounts. These names are reserved words. <a href="db_objects.htm#GUID-4E1707B4-F9BB-4131-9D3E-90BB273F2832" title="Oracle Database Vault provides a set of roles that are required for managing Oracle Database Vault. The Oracle Database Vault roles are designed to provide the maximum benefits of separation of duty.The DV_OWNER role enables you to manage the Oracle Database Vault roles and its configuration. The DV_ADMIN role controls the Oracle Database Vault PL/SQL packages. The DV_MONITOR role is used for monitoring Oracle Database Vault.The DV_SECANALYST role enables users to analyze activities. The DV_AUDIT_CLEANUP role is used for purge operations.The DV_DATAPUMP_NETWORK_LINK role is used for Data Pump import operations.The DV_STREAMS_ADMIN role is used with Oracle Streams.The DV_XSTREAM_ADMIN role is used for Oracle XStream.The DV_GOLDENGATE_ADMIN role is used with Oracle GoldenGate.The DV_GOLDENGATE_REDO_ACCESS role is used with Oracle GoldenGate.The DV_PATCH_ADMIN role is used for patching operations.The DV_ACCTMGR role is a powerful role, used for accounts management.The DV_REALM_OWNER role is used for realm management.The DV_REALM_RESOURCE role is use for the management of realm resources.The DV_PUBLIC role is no longer used.">Oracle Database Vault Roles</a> describes the Database Vault roles.</p>
</div>
</li>
<li class="stepexpand"><span>Run the <code class="codeph">utlrp.sql</code> script to recompile invalidated objects.</span>
<div>
<pre dir="ltr">@?/rdbms/admin/utlrp.sql
</pre>
<p>If the script gives you any instructions, follow them, and then run the script again. If the script terminates abnormally without giving any instructions, run it again.</p>
</div>
</li>
<li class="stepexpand"><span>Connect as the primary Database Vault Owner user that you just configured.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT dbv_owner
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Enable Oracle Database Vault.</span>
<div>
<pre dir="ltr">EXEC DBMS_MACADM.ENABLE_DV;
</pre></div>
</li>
<li class="stepexpand"><span>Connect with the <code class="codeph">SYSDBA</code> administrative privilege.</span>
<div>
<pre dir="ltr">CONNECT / AS SYSDBA
</pre></div>
</li>
<li class="stepexpand"><span>Restart the database.</span>
<div>
<pre dir="ltr">SHUTDOWN IMMEDIATE
STARTUP
</pre></div>
</li>
<li class="stepexpand"><span>Connect as the primary <code class="codeph">DV_OWNER</code> user and then grant the <code class="codeph">DV_OWNER</code> role to the backup <code class="codeph">DV_OWNER</code> user that you created earlier.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT dbv_owner
Enter password: <span class="italic">password</span>

GRANT DV_OWNER TO dbv_owner_backup;
</pre></div>
</li>
<li class="stepexpand"><span>Connect as the primary <code class="codeph">DV_ACCTMGR</code> user and then grant the <code class="codeph">DV_ACCTMGR</code> role to the backup <code class="codeph">DV_ACCTMGR</code> user.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT dbv_acctmgr
Enter password: <span class="italic">password</span>

GRANT DV_ACCTMGR TO dbv_acctmgr_backup;
</pre></div>
</li>
<li class="stepexpand"><span>Store the two backup accounts in a safe location in case they are needed in the future.</span></li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-82062E1E-C0E7-4258-B532-5C0393ADE0DB__GUID-44DB24A7-992A-40E9-BEF8-1833DB06C1A9">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="getting_started.htm#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="The V$OPTION dynamic view and the DVSYS.DBA_DV_STATUS and DBA_OLS_STATUS data dictionary views verify if Oracle Database is configured and enabled.">Verifying That Oracle Database Vault Is Configured and Enabled</a> to confirm that this procedure was successful</p>
</li>
<li>
<p><a href="getting_started.htm#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for Oracle Database Vault.">Logging into Oracle Database Vault</a> for information about logging in to Oracle Database Vault Administrator</p>
</li>
<li>
<p><a href="db_objects.htm#GUID-85DCF2C7-BC01-425E-AEDB-1326274713AC" title="As a best practice, you should maintain backup accounts for the DV_OWNER and DV_ACCTMGR roles.">Backup Oracle Database Vault Accounts</a> for more information about the importance of creating backup accounts</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM71417"></a>
<div class="props_rev_3"><a id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A"></a>
<h3 id="DVADM-GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" class="sect3">Registering Oracle Database Vault with a Common User to Manage the CDB Root</h3>
<div>
<p>In SQL*Plus, you can register Oracle Database Vault with a common user who will manage the CDB root.</p>
<ol>
<li class="stepexpand"><span>In a multitenant environment, log into the root of the database instance as a user who has privileges to create users and grant the <code class="codeph">CREATE SESSION</code> and <code class="codeph">SET CONTAINER</code> privileges.</span>
<div>
<p>For example:.</p>
<pre dir="ltr">sqlplus c##sec_admin
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand" id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A__CHDGDEIB"><span>Create accounts that will be used for the Database Vault Owner (<code class="codeph">DV_OWNER</code> role) and Database Vault Account Manager (<code class="codeph">DV_ACCTMGR</code> role) accounts.</span>
<div>
<p>Oracle strongly recommends that you create two accounts for each role. One account, the primary account, will be used on a day-to-day basis and the other account will be used as a backup account in case the password of the primary account is lost and must be reset.</p>
<p>Prepend the names of these accounts with <code class="codeph">c##</code> or <code class="codeph">C##</code>. For example:</p>
<pre dir="ltr">GRANT CREATE SESSION, SET CONTAINER TO c##dbv_owner_root IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL;
GRANT CREATE SESSION, SET CONTAINER TO c##dbv_owner_root_backup IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL;
GRANT CREATE SESSION, SET CONTAINER TO c##dbv_acctmgr_root IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL;
GRANT CREATE SESSION, SET CONTAINER TO c##dbv_acctmgr_root_backup IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL;
</pre>
<p>Replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure. See <a class="olink DBSEG33223" target="_blank" href="../DBSEG/authentication.htm#DBSEG33223"><span class="italic">Oracle Database Security Guide</span></a> for the minimum requirements for creating passwords.</p>
<p>See <a href="db_objects.htm#GUID-85DCF2C7-BC01-425E-AEDB-1326274713AC" title="As a best practice, you should maintain backup accounts for the DV_OWNER and DV_ACCTMGR roles.">Backup Oracle Database Vault Accounts</a> for more information about backup accounts.</p>
<p>See <a href="guidelines.htm#GUID-13CD2B04-9CD2-449F-9239-0EA3E31D7C4C" title="Oracle Database Vault defines the several main responsibilities.">Separation of Tasks in an Oracle Database Vault Environment</a> for more information about how the <code class="codeph">DV_OWNER</code> and <code class="codeph">DV_ACCTMGR</code> accounts follow separation of duty guidelines.</p>
</div>
</li>
<li class="stepexpand"><span>Connect to the root as user <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege</span>
<div>
<pre dir="ltr">CONNECT SYS AS SYSDBA
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Configure the primary Database Vault user accounts.</span>
<div>
<pre dir="ltr">BEGIN
 DVSYS.CONFIGURE_DV (
   dvowner_uname         =&gt; &#39;c##dbv_owner_root&#39;,
   dvacctmgr_uname       =&gt; &#39;c##dbv_acctmgr_root&#39;);
 END;
/
</pre></div>
</li>
<li class="stepexpand"><span>Run the <code class="codeph">utlrp.sql</code> script to recompile invalidated objects in the root.</span>
<div>
<pre dir="ltr">@?/rdbms/admin/utlrp.sql
</pre>
<p>If the script provides instructions, follow them, and then run the script again. If the script terminates abnormally without giving any instructions, run it again.</p>
</div>
</li>
<li class="stepexpand"><span>Connect to the root as the primary Database Vault Owner user that you just configured.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT c##dbv_owner_root
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Enable Oracle Database Vault.</span>
<div>
<pre dir="ltr">EXEC DBMS_MACADM.ENABLE_DV;
</pre></div>
</li>
<li class="stepexpand"><span>Connect with the <code class="codeph">SYSDBA</code> administrative privilege.</span>
<div>
<pre dir="ltr">CONNECT / AS SYSDBA
</pre></div>
</li>
<li class="stepexpand"><span>Restart the database.</span>
<div>
<pre dir="ltr">SHUTDOWN IMMEDIATE
STARTUP
</pre></div>
</li>
<li class="stepexpand"><span>Connect as the primary <code class="codeph">DV_OWNER</code> user and then grant the <code class="codeph">DV_OWNER</code> role to the backup <code class="codeph">DV_OWNER</code> user that you created earlier.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT c##dbv_owner_root
Enter password: <span class="italic">password</span>

GRANT DV_OWNER TO c##dbv_owner_root_backup;
</pre></div>
</li>
<li class="stepexpand"><span>Connect as the primary <code class="codeph">DV_ACCTMGR</code> user and then grant the <code class="codeph">DV_ACCTMGR</code> role to the backup <code class="codeph">DV_ACCTMGR</code> user.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT c##dbv_acctmgr_root
Enter password: <span class="italic">password</span>

GRANT DV_ACCTMGR TO c##dbv_acctmgr_root_backup;
</pre></div>
</li>
<li class="stepexpand"><span>Store the two backup accounts in a safe location in case they are needed in the future.</span></li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A__GUID-22222015-1299-44AC-98D2-C775861A2A14">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="getting_started.htm#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="The V$OPTION dynamic view and the DVSYS.DBA_DV_STATUS and DBA_OLS_STATUS data dictionary views verify if Oracle Database is configured and enabled.">Verifying That Oracle Database Vault Is Configured and Enabled</a> to confirm that this procedure was successful</p>
</li>
<li>
<p><a href="getting_started.htm#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for Oracle Database Vault.">Logging into Oracle Database Vault</a> for information about logging in to Oracle Database Vault Administrator</p>
</li>
<li>
<p><a href="db_objects.htm#GUID-85DCF2C7-BC01-425E-AEDB-1326274713AC" title="As a best practice, you should maintain backup accounts for the DV_OWNER and DV_ACCTMGR roles.">Backup Oracle Database Vault Accounts</a> for information about the importance of backup accounts</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM71429"></a>
<div class="props_rev_3"><a id="GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193"></a>
<h3 id="DVADM-GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193" class="sect3">Registering Database Vault Common Users to Manage Specific PDBs</h3>
<div>
<p>In a multitenant environment, you must register Oracle Database Vault in the root first, then in the PDBs.</p>
<div class="section">If you try to register in a PDB first, then an <code class="codeph">ORA-47503: Database Vault is not enabled on CDB$ROOT</code> error appears.</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>In a multitenant environment, log into the root of the database instance as a user who has privileges to create users and to grant the <code class="codeph">CREATE SESSION</code> and <code class="codeph">SET CONTAINER</code> privileges.</span>
<div>
<p>For example:.</p>
<pre dir="ltr">sqlplus c##sec_admin
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>If you have not already done so, then create user accounts to be used as the Database Vault accounts.</span>
<div>
<p>See Step <a href="getting_started.htm#GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A__CHDGDEIB">2</a> under <a href="getting_started.htm#GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" title="In SQL*Plus, you can register Oracle Database Vault with a common user who will manage the CDB root.">Registering Oracle Database Vault with a Common User to Manage the CDB Root</a> for more information about these accounts.</p>
</div>
</li>
<li class="stepexpand"><span>Ensure that you have registered Oracle Database Vault in the CDB root, as described in <a href="getting_started.htm#GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" title="In SQL*Plus, you can register Oracle Database Vault with a common user who will manage the CDB root.">Registering Oracle Database Vault with a Common User to Manage the CDB Root</a>.</span></li>
<li class="stepexpand"><span>Connect to the PDB to which the common users will need access.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT c##sec_admin@<span class="italic">pdb_name</span>
Enter password: <span class="italic">password</span>
</pre>
<p>To find the available PDBs, query the <code class="codeph">DBA_PDBS</code> data dictionary view. To check the current PDB, run the <code class="codeph">show con_name</code> command.</p>
</div>
</li>
<li class="stepexpand"><span>Grant the <code class="codeph">CREATE SESSION</code> and <code class="codeph">SET CONTAINER</code> privileges to the users.</span>
<div>
<p>For example:</p>
<pre dir="ltr">GRANT CREATE SESSION, SET CONTAINER TO c##dbv_owner_root CONTAINER = CURRENT;
GRANT CREATE SESSION, SET CONTAINER TO c##dbv_acctmgr_root CONTAINER = CURRENT;
</pre></div>
</li>
<li class="stepexpand"><span>Connect as user <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege</span>
<div>
<pre dir="ltr">CONNECT SYS@<span class="italic">pdb_name</span> AS SYSDBA
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>While still in the PDB, configure the two primary Database Vault user accounts.</span>
<div>
<p>For example:</p>
<pre dir="ltr">BEGIN
 DVSYS.CONFIGURE_DV (
   dvowner_uname         =&gt; &#39;c##dbv_owner_root&#39;,
   dvacctmgr_uname       =&gt; &#39;c##dbv_acctmgr_root&#39;);
 END;
/
</pre></div>
</li>
<li class="stepexpand"><span>Run the <code class="codeph">utlrp.sql</code> script to recompile invalidated objects in this PDB.</span>
<div>
<pre dir="ltr">@?/rdbms/admin/utlrp.sql
</pre>
<p>If the script provides instructions, follow them, and then run the script again. If the script terminates abnormally without giving any instructions, run it again.</p>
</div>
</li>
<li class="stepexpand"><span>Connect to the PDB as the primary Database Vault Owner user that you just configured.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT c##dbv_owner_root@<span class="italic">pdb_name</span>
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Enable Oracle Database Vault in this PDB.</span>
<div>
<pre dir="ltr">EXEC DBMS_MACADM.ENABLE_DV;
</pre></div>
</li>
<li class="stepexpand"><span>Connect to the CDB with the <code class="codeph">SYSDBA</code> administrative privilege.</span>
<div>
<pre dir="ltr">CONNECT / AS SYSDBA
</pre></div>
</li>
<li class="stepexpand"><span>Close and reopen the PDB.</span>
<div>
<p>For example:</p>
<pre dir="ltr">ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> CLOSE IMMEDIATE;

ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> OPEN;
</pre></div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193__GUID-DA3C400D-2D52-42EE-8E5E-9281CF01BFD3">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="getting_started.htm#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="The V$OPTION dynamic view and the DVSYS.DBA_DV_STATUS and DBA_OLS_STATUS data dictionary views verify if Oracle Database is configured and enabled.">Verifying That Oracle Database Vault Is Configured and Enabled</a> to confirm that this procedure was successful</p>
</li>
<li>
<p><a href="getting_started.htm#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for Oracle Database Vault.">Logging into Oracle Database Vault</a> for information about logging in to Oracle Database Vault Administrator</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM71420"></a>
<div class="props_rev_3"><a id="GUID-C6218DD3-BB78-40F7-8BE2-7391D3BF6418"></a>
<h3 id="DVADM-GUID-C6218DD3-BB78-40F7-8BE2-7391D3BF6418" class="sect3">Creating Common Database Vault Accounts for a Plugged in Database Vault PDB</h3>
<div>
<p>From SQL*Plus, in a multitenant environment, you can plug in a database that already has Database Vault enabled.</p>
<div class="section">In this scenario, the plugged in database has its own local Database Vault accounts.</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Log into the PDB as the local primary Database Vault owner.</span>
<div>
<p>For example:</p>
<pre dir="ltr">sqlplus dbv_owner@<span class="italic">pdb_name</span>
Enter password: <span class="italic">password</span>
</pre>
<p>To find the available PDBs, query the <code class="codeph">DBA_PDBS</code> data dictionary view. To check the current PDB, run the <code class="codeph">show con_name</code> command.</p>
</div>
</li>
<li class="stepexpand"><span>Grant the common Database Vault <code class="codeph">DV_OWNER</code> users the <code class="codeph">CREATE SESSION</code> and <code class="codeph">SET CONTAINER</code> privileges, and the appropriate Database Vault roles.</span>
<div>
<p>The following accounts will be the primary and the backup accounts:</p>
<pre dir="ltr">GRANT CREATE SESSION, SET CONTAINER, DV_OWNER TO c##dbv_owner_root;
GRANT CREATE SESSION, SET CONTAINER, DV_OWNER TO c##dbv_owner_root_backup;
</pre></div>
</li>
<li class="stepexpand"><span>Connect as a user who has been granted the <code class="codeph">DV_ACCTMGR</code> role.</span></li>
<li class="stepexpand"><span>Create the <code class="codeph">DV_ACCTMGR</code> common accounts.</span>
<div>
<pre dir="ltr">GRANT CREATE SESSION, SET CONTAINER, DV_ACCTMGR TO c##dbv_acctmgr_root;
GRANT CREATE SESSION, SET CONTAINER, DV_ACCTMGR TO c##dbv_acctmgr_root_backup;
</pre></div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-C6218DD3-BB78-40F7-8BE2-7391D3BF6418__GUID-A5783377-2B6A-4721-B1FB-0C24103EF274">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="getting_started.htm#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="The V$OPTION dynamic view and the DVSYS.DBA_DV_STATUS and DBA_OLS_STATUS data dictionary views verify if Oracle Database is configured and enabled.">Verifying That Oracle Database Vault Is Configured and Enabled</a> to confirm that this procedure was successful</p>
</li>
<li>
<p><a href="getting_started.htm#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for Oracle Database Vault.">Logging into Oracle Database Vault</a> for information about logging in to Oracle Database Vault Administrator</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM71421"></a>
<div class="props_rev_3"><a id="GUID-B5569AED-AC16-482C-BA6D-34E275F016D2"></a>
<h3 id="DVADM-GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" class="sect3">Verifying That Oracle Database Vault Is Configured and Enabled</h3>
<div>
<p>The <code class="codeph">V$OPTION</code> dynamic view and the <code class="codeph">DVSYS.DBA_DV_STATUS</code> and <code class="codeph">DBA_OLS_STATUS</code> data dictionary views verify if Oracle Database is configured and enabled.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>To query the <code class="codeph">V$OPTION</code> dynamic view:</p>
<ul style="list-style-type: disc;">
<li>
<p>To find if Oracle Database Vault is configured and enabled, run the following query, which should show the <code class="codeph">VALUE</code> setting as <code class="codeph">TRUE</code>:</p>
<pre dir="ltr">SELECT VALUE FROM V$OPTION WHERE PARAMETER = &#39;Oracle Database Vault&#39;;
</pre></li>
<li>
<p>To check if Oracle Label Security is enabled, query <code class="codeph">V$OPTION</code> as follows:</p>
<pre dir="ltr">SELECT VALUE FROM V$OPTION WHERE PARAMETER = &#39;Oracle Label Security&#39;;
</pre></li>
</ul>
</li>
</ul>
<ul style="list-style-type: disc;">
<li>To query the <code class="codeph">DVSYS.DBA_DV_STATUS</code> data dictionary view for the status or Oracle Database Vault:
<pre dir="ltr">SELECT * FROM DVSYS.DBA_DV_STATUS;
</pre>
<p>Output similar to the following appears:</p>
<pre dir="ltr">NAME                 STATUS
-------------------- -----------
DV_CONFIGURE_STATUS  FALSE
DV_ENABLE_STATUS     FALSE
</pre></li>
<li>
<p>To find the enablement and configuration status for Oracle Label Security, query the <code class="codeph">DBA_OLS_STATUS</code> data dictionary view, which provides output similar to <code class="codeph">DVSYS.DBA_DV_STATUS</code>.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="DVADM30001"></a>
<div class="props_rev_3"><a id="GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6"></a>
<h2 id="DVADM-GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" class="sect2">Logging into Oracle Database Vault</h2>
<div>
<p>Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for Oracle Database Vault.</p>
<div class="section">The Oracle Database Vault pages can be used to administer and monitor Database Vault-protected databases from a centralized console. This console enables you to automate alerts, view Database Vault reports, and propagate Database Vault policies to other Database Vault-protected databases.</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Ensure that you have configured the Cloud Control target databases that you plan to use with Database Vault.</span>
<div>
<p>See the Oracle Enterprise Manager online help and <a class="olink OEMCG" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=OEMCG"><span class="italic">Oracle Enterprise Manager Advanced Configuration</span></a> for more information about configuring target databases.</p>
</div>
</li>
<li class="stepexpand"><span>If necessary, register Oracle Database Vault.</span>
<div>
<p>If you have just installed Oracle Database Vault, you must register it with the database. See <a href="getting_started.htm#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="You can register Oracle Database Vault for either a non-multitenant environment or a multitenant environment.">Registering Oracle Database Vault with an Oracle Database</a> for more information.</p>
</div>
</li>
<li class="stepexpand"><span>Start Cloud Control.</span>
<div>
<p>For example:</p>
<pre dir="ltr">https://myserver.example.com:7799/em
</pre></div>
</li>
<li class="stepexpand"><span>Log in to Cloud Control as a security administrator.</span></li>
<li class="stepexpand"><span>In the Cloud Control home page, from the <span class="bold">Targets</span> menu, select <span class="bold">Databases</span>.</span></li>
<li class="stepexpand"><span>In the Databases page, select the link for the Oracle Database Vault-protected database to which you want to connect.</span>
<div>
<p>The Database home page appears.</p>
</div>
</li>
<li class="stepexpand"><span>From the <span class="bold">Security</span> menu, select <span class="bold">Database Vault</span>.</span>
<div>
<p>The Database Login page appears.</p>
</div>
</li>
<li class="stepexpand"><span>Enter the following information:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Username:</span> Enter the name of a user who has been granted the appropriate Oracle Database Vault role:</p>
<ul style="list-style-type: disc;">
<li>
<p>Creating and propagating Database Vault policies: <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role, <code class="codeph">SELECT ANY DICTIONARY</code> privilege</p>
</li>
<li>
<p>Viewing Database Vault alerts and reports: <code class="codeph">DV_OWNER</code>, <code class="codeph">DV_ADMIN</code>, or <code class="codeph">DV_SECANALYST</code> role, <code class="codeph">SELECT ANY DICTIONARY</code> privilege</p>
</li>
</ul>
<p>See <a href="db_objects.htm#GUID-F9FF7E47-641E-45D3-8EF2-3EA6B9FFD6A3" title="Oracle Database Vault provides a set of roles that are required for managing Oracle Database Vault.">About Oracle Database Vault Roles</a> for more information.</p>
</li>
<li>
<p><span class="bold">Password:</span> Enter your password.</p>
</li>
<li>
<p><span class="bold">Role:</span> Select <span class="bold">NORMAL</span> from the list.</p>
</li>
<li>
<p><span class="bold">Save as:</span> Select this check box if you want these credentials to be automatically filled in for you the next time that this page appears. The credentials are stored in Enterprise Manager in a secured manner. Access to these credentials depends on the user who is currently logged in.</p>
</li>
</ul>
<p>The Database Vault home page appears.</p>
<br/>
<img width="886" height="543" src="img/GUID-14EAB030-5CC3-43B2-BC72-D38722700909-default.png" alt="Description of GUID-14EAB030-5CC3-43B2-BC72-D38722700909-default.png follows" title="Description of GUID-14EAB030-5CC3-43B2-BC72-D38722700909-default.png follows"/><br/>
<a href="img_text/GUID-14EAB030-5CC3-43B2-BC72-D38722700909-default.htm">Description of the illustration GUID-14EAB030-5CC3-43B2-BC72-D38722700909-default.png</a><br/></div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6__GUID-412E85A6-A192-480F-B936-91DF69846848">
<p class="notep1">See Also:</p>
<p><a href="dba.htm#GUID-990B6C45-901E-46B5-B5B2-0CE24C3ED42E" title="Oracle Database Vault administrators can perform tasks in Oracle Enterprise Manager Cloud Control such as propagating polices to other databases.">Using Oracle Database Vault with Oracle Enterprise Manager</a></p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM70135"></a>
<div class="props_rev_3"><a id="GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD"></a>
<h2 id="DVADM-GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" class="sect2">Quick Start Tutorial: Securing a Schema from DBA Access</h2>
<div>
<p>This tutorial shows how to create a realm around the <code class="codeph">HR</code> schema.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="getting_started.htm#GUID-1E5427BD-4084-4712-A27A-E3A609B5BE3B" title="In this tutorial, you create a realm around for the HR sample database schema by using the Oracle Database Vault PL/SQL packages.">About This Tutorial</a></p>
</li>
<li>
<p><a href="getting_started.htm#GUID-872977EE-3DAD-46F4-8AE3-36176093F999" title="You must enable the HR schema for this tutorial.">Step 1: Log On as SYSTEM to Access the HR Schema</a></p>
</li>
<li>
<p><a href="getting_started.htm#GUID-D327A3A5-B33E-4038-9C11-F333BC23B65C" title="Realms can protect one or more schemas, individual schema objects, and database roles.">Step 2: Create a Realm</a></p>
</li>
<li>
<p><a href="getting_started.htm#GUID-06B429BC-7070-4D97-9C7E-A13FB49E0B16" title="At this stage, there are no database accounts or roles authorized to access or otherwise manipulate the database objects the realm will protect.">Step 3: Create the SEBASTIAN User Account</a></p>
</li>
<li>
<p><a href="getting_started.htm#GUID-97F096B5-76EC-422B-BF05-A64DEAA9B5D7" title="At this stage, have user SEBASTIAN test the realm, even though he has the READ ANY TABLE system privilege.">Step 4: Have User SEBASTIAN Test the Realm</a></p>
</li>
<li>
<p><a href="getting_started.htm#GUID-0861C9DB-43A9-4887-9F98-D1DE0D2B2833" title="Next, user SEBASTIAN must be granted authorization to the HR Apps realm, so that he can access the HR.EMPLOYEES table.">Step 5: Create an Authorization for the Realm</a></p>
</li>
<li>
<p><a href="getting_started.htm#GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7" title="To test the realm, you must try to access the EMPLOYEES table as a user other than HR.">Step 6: Test the Realm</a></p>
</li>
<li>
<p><a href="getting_started.htm#GUID-F1D1B4F0-7C04-477A-B7B3-357605EA127A" title="Because you enabled auditing on failure for the HR Apps realm, you can generate a report to find any security violations.">Step 7: If Unified Auditing Is Not Enabled, Then Run a Report</a></p>
</li>
<li>
<p><a href="getting_started.htm#GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2" title="You can remove the components that you created for this tutorial if you no longer need them.">Step 8: Remove the Components for This Tutorial</a></p>
</li>
</ul>
</div>
<a id="DVADM71114"></a>
<div class="props_rev_3"><a id="GUID-1E5427BD-4084-4712-A27A-E3A609B5BE3B"></a>
<h3 id="DVADM-GUID-1E5427BD-4084-4712-A27A-E3A609B5BE3B" class="sect3">About This Tutorial</h3>
<div>
<p>In this tutorial, you create a realm around for the <code class="codeph">HR</code> sample database schema by using the Oracle Database Vault PL/SQL packages.</p>
<p>In the <code class="codeph">HR</code> schema, the <code class="codeph">EMPLOYEES</code> table has information such as salaries that should be hidden from most employees in the company, including those with administrative access. To accomplish this, you add the <code class="codeph">HR</code> schema to the secured objects of the protection zone, which in Oracle Database Vault is called a <span class="italic">realm</span>, inside the database. Then you grant limited authorizations to this realm. Afterward, you test the realm to make sure it has been properly secured. And finally, to see how Oracle Database Vault provides an audit trail on suspicious activities like the one you will try when you test the realm, you will run a report.</p>
</div>
</div>
<a id="DVADM70137"></a>
<div class="props_rev_3"><a id="GUID-872977EE-3DAD-46F4-8AE3-36176093F999"></a>
<h3 id="DVADM-GUID-872977EE-3DAD-46F4-8AE3-36176093F999" class="sect3">Step 1: Log On as SYSTEM to Access the HR Schema</h3>
<div>
<p>You must enable the <code class="codeph">HR</code> schema for this tutorial.</p>
<ol>
<li class="stepexpand"><span>Ensure that the <code class="codeph">HR</code> sample schema is installed.</span>
<div>
<p>See <a class="olink COMSC005" target="_blank" href="../COMSC/overview.htm#COMSC005"><span><cite>Oracle Database Sample Schemas</cite></span></a> for information about installing the sample schemas.</p>
</div>
</li>
<li class="stepexpand"><span>Log into the database instance as a user who has been granted the <code class="codeph">DBA</code> role, and then access the <code class="codeph">HR</code> schema.</span>
<div>
<p>For example:</p>
<pre dir="ltr">sqlplus system
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>In a multitenant environment, connect to the appropriate PDB.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT SYSTEM@my_pdb
Enter password: <span class="italic">password</span>
</pre>
<p>To find the available PDBs, in the CDB, query the <code class="codeph">DBA_PDBS</code> data dictionary view. To check the current PDB, run the <code class="codeph">show con_name</code> command.</p>
</div>
</li>
<li class="stepexpand"><span>Query the <code class="codeph">HR.EMPLOYEES</code> table as follows.</span>
<div>
<pre dir="ltr">SELECT FIRST_NAME, LAST_NAME, SALARY FROM HR.EMPLOYEES WHERE ROWNUM &lt; 10;
</pre>
<p>Output similar to the following appears:</p>
<pre dir="ltr">FIRST_NAME           LAST_NAME                     SALARY
-------------------- ------------------------- ----------
Steven               King                           24000
Neena                Kochhar                        17000
Lex                  De Haan                        17000
Alexander            Hunold                          9000
Bruce                Ernst                           6000
David                Austin                          4800
Valli                Pataballa                       4800
Diana                Lorentz                         4200
Nancy                Greenberg                      12008

9 rows selected.
</pre></div>
</li>
<li class="stepexpand"><span>If the <code class="codeph">HR</code> schema is locked and expired, log into the database instance as the <code class="codeph">DV_ACCTMGR</code> user and unlock and unexpire the account. For example:</span>
<div>
<pre dir="ltr">sqlplus bea_dvacctmgr <span class="italic">-- For a multitenant environment, sqlplus bea_dvacctmgr@hrpdb</span>
Enter password: <span class="italic">password</span>

ALTER USER HR ACCOUNT UNLOCK IDENTIFIED BY <span class="italic">password</span>
</pre>
<p>Replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure. See <a class="olink DBSEG33223" target="_blank" href="../DBSEG/authentication.htm#DBSEG33223"><span><cite>Oracle Database Security Guide</cite></span></a> for the minimum requirements for creating passwords.</p>
<p>As you can see, <code class="codeph">SYSTEM</code> has access to the salary information in the <code class="codeph">EMPLOYEES</code> table of the <code class="codeph">HR</code> schema. This is because <code class="codeph">SYSTEM</code> is automatically granted the <code class="codeph">DBA</code> role, which includes the <code class="codeph">SELECT ANY TABLE</code> system privilege.</p>
</div>
</li>
<li class="stepexpand"><span>Do not exit SQL*Plus.</span></li>
</ol>
</div>
</div>
<a id="DVADM70138"></a>
<div class="props_rev_3"><a id="GUID-D327A3A5-B33E-4038-9C11-F333BC23B65C"></a>
<h3 id="DVADM-GUID-D327A3A5-B33E-4038-9C11-F333BC23B65C" class="sect3">Step 2: Create a Realm</h3>
<div>
<p>Realms can protect one or more schemas, individual schema objects, and database roles.</p>
<div class="section">
<p>Once you create a realm, you can create security restrictions that apply to the schemas and their schema objects within the realm.</p>
<p>Your first step is to create a realm for the <code class="codeph">HR</code> schema.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Log into Oracle Database Vault Administrator from Cloud Control as a user who has been granted the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role and the <code class="codeph">SELECT ANY DICTIONARY</code> privilege.</span>
<div>
<p><a href="getting_started.htm#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for Oracle Database Vault.">Logging into Oracle Database Vault</a> explains how to log in.</p>
</div>
</li>
<li class="stepexpand"><span>In the Administration page, under Database Vault Components, click <span class="bold">Realms</span>. (It should be selected by default.)</span></li>
<li class="stepexpand"><span>In the Realms page of Oracle Database Vault Administrator, click <span class="bold">Create</span>.</span></li>
<li class="stepexpand"><span>In the Create Realm page, under General, enter <code class="codeph">HR Apps</code> after <span class="bold">Name</span>.</span></li>
<li class="stepexpand"><span>In the <span class="bold">Description</span> field, enter <code class="codeph">Realm to protect the HR schema</code>.</span></li>
<li class="stepexpand"><span>Leave the <span class="bold">Mandatory Realm</span> check box unchecked.</span></li>
<li class="stepexpand"><span>After Status, ensure that <span class="bold">Enabled</span> is selected so that the realm can be used.</span></li>
<li class="stepexpand"><span>Under Audit Options, ensure that <span class="bold">Audit On Failure</span> is selected so that you can create an audit trial later on.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Next</span> to display the Realm secured objects page.</span></li>
<li class="stepexpand"><span>Click the <span class="bold">Add</span> button and in the Add Secured Object dialog box, enter the following information:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Owner:</span> Enter <code class="codeph">HR</code> to select the <code class="codeph">HR</code> schema.</p>
</li>
<li>
<p><span class="bold">Object Type:</span> Enter <code class="codeph">TABLE</code>.</p>
</li>
<li>
<p><span class="bold">Object Name:</span> Enter <code class="codeph">EMPLOYEES</code>.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">OK</span>.</span>
<div>
<p>The <code class="codeph">HR.EMPLOYEES</code> table is added to the Create Realm : Realm Secured Objects page.</p>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">Done</span>, and then click <span class="bold">Finish</span>.</span></li>
</ol>
<div class="section">
<p>At this stage, you have created the realm but you have not assigned any authorizations to it. You will take care of that later on in this tutorial.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM71219"></a>
<div class="props_rev_3"><a id="GUID-06B429BC-7070-4D97-9C7E-A13FB49E0B16"></a>
<h3 id="DVADM-GUID-06B429BC-7070-4D97-9C7E-A13FB49E0B16" class="sect3">Step 3: Create the SEBASTIAN User Account</h3>
<div>
<p>At this stage, there are no database accounts or roles authorized to access or otherwise manipulate the database objects the realm will protect.</p>
<div class="section">
<p>So, the next step is to authorize database accounts or database roles so that they can have access to the schemas within the realm. You will create the <code class="codeph">SEBASTIAN</code> user account.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>In SQL*Plus, connect as the Database Vault Account Manager, who has the <code class="codeph">DV_ACCTMGR</code> role, and create the local user <code class="codeph">SEBASTIAN</code>.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT bea_dvacctmgr <span class="italic">-- Or, CONNECT bea_dvacctmgr@hrpdb</span>
Enter password: <span class="italic">password</span>

GRANT CREATE SESSION TO SEBASTIAN IDENTIFIED BY <span class="italic">password</span>;
</pre>
<p>Replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure. See <a class="olink DBSEG33223" target="_blank" href="../DBSEG/authentication.htm#DBSEG33223"><span><cite>Oracle Database Security Guide</cite></span></a> for the minimum requirements for creating passwords.</p>
</div>
</li>
<li class="stepexpand"><span>Connect as <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> privilege, and then grant <code class="codeph">SEBASTIAN</code> the following additional privilege.</span>
<div>
<pre dir="ltr">CONNECT SYS AS SYSDBA <span class="italic">-- Or, CONNECT SYS@hrpdb</span> AS SYSDBA
Enter password: <span class="italic">password</span>

GRANT READ ANY TABLE TO SEBASTIAN;
</pre></div>
</li>
</ol>
<div class="section">
<p>Do not exit SQL*Plus; you will need it for <a href="getting_started.htm#GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7" title="To test the realm, you must try to access the EMPLOYEES table as a user other than HR.">Step 6: Test the Realm</a>, when you test the realm.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect3"><a id="GUID-97F096B5-76EC-422B-BF05-A64DEAA9B5D7"></a>
<h3 id="DVADM-GUID-97F096B5-76EC-422B-BF05-A64DEAA9B5D7" class="sect3">Step 4: Have User SEBASTIAN Test the Realm</h3>
<div>
<p>At this stage, have user <code class="codeph">SEBASTIAN</code> test the realm, even though he has the <code class="codeph">READ ANY TABLE</code> system privilege.</p>
<ol>
<li class="stepexpand"><span>Connect as user <code class="codeph">SEBASTIAN</code>.</span>
<div>
<pre dir="ltr">CONNECT sebastian
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Query the <code class="codeph">HR.EMPLOYEES</code> table.</span>
<div>
<pre dir="ltr">SELECT COUNT(*) FROM HR.EMPLOYEES;
</pre></div>
<div>
<p>The following output should appear:</p>
<pre dir="ltr">ERROR at line 1:
ORA-01031: insufficient privileges
</pre></div>
</li>
</ol>
<div class="section">Even though user <code class="codeph">SEBASTIAN</code> has the <code class="codeph">READ ANY TABLE</code> system privilege, he cannot query the <code class="codeph">HR.EMPLOYEES</code> table, because the HR Apps realm takes precedence over the <code class="codeph">READ ANY TABLE</code> system privilege.</div>
<!-- class="section" --></div>
</div>
<a id="DVADM70140"></a>
<div class="props_rev_3"><a id="GUID-0861C9DB-43A9-4887-9F98-D1DE0D2B2833"></a>
<h3 id="DVADM-GUID-0861C9DB-43A9-4887-9F98-D1DE0D2B2833" class="sect3">Step 5: Create an Authorization for the Realm</h3>
<div>
<p>Next, user <code class="codeph">SEBASTIAN</code> must be granted authorization to the HR Apps realm, so that he can access the <code class="codeph">HR.EMPLOYEES</code> table.</p>
<ol>
<li class="stepexpand"><span>In the Realms page of Database Vault Administrator, select the <span class="bold">HR Apps</span> in the list of realms, and then click <span class="bold">Edit</span>.</span></li>
<li class="stepexpand"><span>Click the <span class="bold">Next</span> button until you reach the Realm authorizations page.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Add</span> and then enter the following information in the Add Authorizations dialog box:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Realm Authorization Grantee:</span> Enter <code class="codeph">SEBASTIAN</code>.</p>
</li>
<li>
<p><span class="bold">Realm Authorization Type:</span> Select <span class="bold">Participant</span> from the list.</p>
</li>
<li>
<p><span class="bold">Realm Authorization Ruleset:</span> Leave this field blank.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">OK</span>.</span>
<div>
<p>The Participant authorization allows the user <code class="codeph">SEBASTIAN</code> in the HR Apps realm to manage access, manipulate, and create objects protected by the HR Apps realm. In this case, the <code class="codeph">HR</code> user and <code class="codeph">SEBASTIAN</code> are the only users allowed to view the <code class="codeph">EMPLOYEES</code> table.</p>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">Done</span>, and then <span class="bold">Finish</span>.</span></li>
</ol>
</div>
</div>
<a id="DVADM70141"></a>
<div class="props_rev_3"><a id="GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7"></a>
<h3 id="DVADM-GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7" class="sect3">Step 6: Test the Realm</h3>
<div>
<p>To test the realm, you must try to access the <code class="codeph">EMPLOYEES</code> table as a user other than <code class="codeph">HR</code>.</p>
<div class="section">
<p>The <code class="codeph">SYSTEM</code> account normally has access to all objects in the <code class="codeph">HR</code> schema, but now that you have safeguarded the <code class="codeph">EMPLOYEES</code> table with Oracle Database Vault, this is no longer the case.</p>
<ol>
<li>
<p>In SQL*Plus, connect as <code class="codeph">SYSTEM</code>.</p>
<pre dir="ltr">CONNECT SYSTEM <span class="italic">-- Or, CONNECT SYSTEM@hrpdb</span>
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Try accessing the salary information in the <code class="codeph">EMPLOYEES</code> table again:</p>
<pre dir="ltr">SELECT FIRST_NAME, LAST_NAME, SALARY FROM HR.EMPLOYEES WHERE ROWNUM &lt;10;
</pre>
<p>The following output should appear:</p>
<pre dir="ltr">Error at line 1:
ORA-01031: insufficient privileges
</pre>
<p><code class="codeph">SYSTEM</code> no longer has access to the salary information in the EMPLOYEES table. (In fact, even user <code class="codeph">SYS</code> does not have access to this table.) However, user <code class="codeph">SEBASTIAN</code> does have access to this information.</p>
</li>
<li>
<p>Connect as user <code class="codeph">SEBASTIAN</code>.</p>
<pre dir="ltr">CONNECT sebastian <span class="italic">-- Or, CONNECT sebastian@hrpdb</span>
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Perform the following query:</p>
<pre dir="ltr">SELECT FIRST_NAME, LAST_NAME, SALARY FROM HR.EMPLOYEES WHERE ROWNUM &lt;10;
</pre>
<p>Output similar to the following appears:</p>
<pre dir="ltr">FIRST_NAME           LAST_NAME                     SALARY
-------------------- ------------------------- ----------
Steven               King                           24000
Neena                Kochhar                        17000
Lex                  De Haan                        17000
Alexander            Hunold                          9000
Bruce                Ernst                           6000
David                Austin                          4800
Valli                Pataballa                       4800
Diana                Lorentz                         4200
Nancy                Greenberg                      12008

9 rows selected.
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM70142"></a>
<div class="props_rev_3"><a id="GUID-F1D1B4F0-7C04-477A-B7B3-357605EA127A"></a>
<h3 id="DVADM-GUID-F1D1B4F0-7C04-477A-B7B3-357605EA127A" class="sect3">Step 7: If Unified Auditing Is Not Enabled, Then Run a Report</h3>
<div>
<p>Because you enabled auditing on failure for the HR Apps realm, you can generate a report to find any security violations.</p>
<div class="section">
<p>For example, you could generate a report for the violation that you attempted in <a href="getting_started.htm#GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7" title="To test the realm, you must try to access the EMPLOYEES table as a user other than HR.">Step 6: Test the Realm</a>.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>In SQL*Plus, connect as user <code class="codeph">SYSTEM</code> and ensure that unified auditing is not enabled.</span>
<div>
<pre dir="ltr">CONNECT SYSTEM <span class="italic">-- Or, CONNECT SYSTEM@hrpdb</span>
Enter password: <span class="italic">password</span>

SQL&gt; SELECT VALUE FROM V$OPTION WHERE PARAMETER = &#39;Unified Auditing&#39;;
</pre>
<p>If <code class="codeph">VALUE</code> returns <code class="codeph">TRUE</code>, then you cannot complete this section. Go to <a href="getting_started.htm#GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2" title="You can remove the components that you created for this tutorial if you no longer need them.">Step 8: Remove the Components for This Tutorial</a>.</p>
<p>If unified auditing is enabled, then you must create a unified audit policy to capture events. See <a class="olink DBSEG419" target="_blank" href="../DBSEG/audit_config.htm#DBSEG419"><span><cite>Oracle Database Security Guide</cite></span></a> for information about how to create unified audit policies for Oracle Database Vault.</p>
</div>
</li>
<li class="stepexpand"><span>In the Database Vault Administrator page, click <span class="bold">Home</span> to display the home page.</span></li>
<li class="stepexpand"><span>In the Database Vault Home page, under <span class="bold">Reports</span>, select <span class="bold">Database Vault Reports</span>.</span></li>
<li class="stepexpand"><span>In the Database Vault Reports page, select <span class="bold">Database Vault Enforcement Audit Report</span>.</span></li>
<li class="stepexpand"><span>From the <span class="bold">Database Vault Audit Report</span> list, select <span class="bold">Realm Audit Report</span>.</span></li>
<li class="stepexpand"><span>In the Search area, from the <span class="bold">Command</span> menu, select <span class="bold">Equals</span> and in the text field, enter <code class="codeph">SELECT</code>. Then click <span class="bold">Search</span>.</span>
<div>
<p>The report appears in the table that follows the Search region.</p>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">OK</span> to exit the report.</span></li>
</ol>
<div class="section">
<p>Oracle Database Vault generates a report listing the type of violation (in this case, the <code class="codeph">SELECT</code> statement entered in the previous section), when and where it occurred, the login account who tried the violation, and what the violation was.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM70143"></a>
<div class="props_rev_3"><a id="GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2"></a>
<h3 id="DVADM-GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2" class="sect3">Step 8: Remove the Components for This Tutorial</h3>
<div>
<p>You can remove the components that you created for this tutorial if you no longer need them.</p>
<div class="section">
<ol>
<li>
<p>Drop user <code class="codeph">SEBASTIAN</code>.</p>
<p>In SQL*Plus, log on as the Oracle Database Vault account manager (for example, <code class="codeph">bea_dvacctmgr</code>) and then drop <code class="codeph">SEBASTIAN</code> as follows:</p>
<pre dir="ltr">sqlplus bea_dvacctmgr <span class="italic">-- Or, CONNECT bea_dvacctmgr@hrpdb</span>
Enter password: <span class="italic">password</span>

DROP USER SEBASTIAN;
</pre></li>
<li>
<p>Delete the HR Apps realm.</p>
<ol>
<li>
<p>In Cloud Control, ensure that you are logged in as a user who has the <code class="codeph">DV_OWNER</code> role.</p>
</li>
<li>
<p>In the Database Vault Home page, click <span class="bold">Administration</span>.</p>
</li>
<li>
<p>In the Realms page, select <code class="codeph">HR Apps</code> from the list of realms.</p>
</li>
<li>
<p>Click <span class="bold">Delete</span>, and in the Confirmation window, click <span class="bold">Yes</span>.</p>
</li>
</ol>
</li>
<li>
<p>If necessary, in SQL*Plus, lock and expire the <code class="codeph">HR</code> account.</p>
<pre dir="ltr">ALTER USER HR ACCOUNT LOCK PASSWORD EXPIRE;
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment331">
<tr>
<td class="cellalignment359">
<table class="cellalignment336">
<tr>
<td class="cellalignment335"><a href="dv_impact.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment335"><a href="priv_analysis.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment361">
<table class="cellalignment334">
<tr>
<td class="cellalignment335"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment335"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment335"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment335"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment335"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment335"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>