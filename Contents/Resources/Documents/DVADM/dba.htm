<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-5968"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBA%20Operations%20in%20an%20Oracle%C2%A0Database%C2%A0Vault%C2%A0Environment"></a><title>DBA Operations in an Oracle&nbsp;Database&nbsp;Vault&nbsp;Environment</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="Database administrators can perform operations in an Oracle Database Vault environment, such as using Database Vault with products such as Oracle Data Pump."/>
<meta name="keywords" content="database administrative operations, administrators, DBA operations in Oracle Database Vault, Oracle Enterprise Manager, using Oracle Database Vault with, factors, propagating policies to other databases, secure application roles, command rules, rule sets, realms, Oracle Enterprise Manager Cloud Control, propagating Database Vault policies to other databases, alerts, Enterprise Manager Cloud Control, reports, DBSNMP account, changing password, database accounts, DBSNMP, changing password, DBSNMP user account, authorizations, Oracle Data Pump activities, exporting data, Oracle Data Pump, importing data, using with Oracle Database Vault, levels of authorization required, Oracle Data Pump only, granting authorization to use with Database Vault, revoking standard authorization, transportable tablespaces, authorizing for Oracle Data Pump operations in Database Vault, authorizing transportable tablespace operations for Database Vault, revoking transportable tablespace authorization, guidelines before performing an export or import, scheduling jobs, Oracle Scheduler, jobs, scheduling, scheduling database jobs, granting Oracle Database Vault authorization, revoking Oracle Database Vault authorization, Oracle Recovery Manager (RMAN), in an Oracle Database Vault environment, XStream, Oracle GoldenGate, ORA-01301 error, ORA-47409 error, ORA-47408 error, ORA-47401 error, ORA-47400 error, data masking, errors that can appear, about, Data Dictionary realm, adding users to realms for, creating command rule for, PDBs, plugging Database Vault-enabled PDB to CDB, ORADEBUG utility, using with Database Vault"/>
<meta name="dcterms.created" content="2017-06-05T10:50:14Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Vault Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49109-12"/>
<meta name="dcterms.isVersionOf" content="DVADM"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="dv_ols.htm" title="Previous" type="text/html"/>
<link rel="Next" href="db_objects.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49109-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-17665902-E9F9-479A-B60A-29853672BB2B"></a> <span id="PAGE" style="display:none;">15/34</span> <!-- End Header -->
<script>
//<![CDATA[
window.name='dba'
//]]>
</script> <script>
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" ><head><title>');
   
    msg.document.write('Footnote&amp;nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('');
    msg.document.write('<style> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
</script><noscript>
<p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
</noscript><a id="DVADM71122"></a>
<h1 id="DVADM-GUID-17665902-E9F9-479A-B60A-29853672BB2B" class="sect1"><span class="enumeration_chapter">11</span> DBA Operations in an Oracle&nbsp;Database&nbsp;Vault&nbsp;Environment</h1>
<div>
<p>Database administrators can perform operations in an Oracle Database Vault environment, such as using Database Vault with products such as Oracle Data Pump.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="dba.htm#GUID-990B6C45-901E-46B5-B5B2-0CE24C3ED42E" title="Oracle Database Vault administrators can perform tasks in Oracle Enterprise Manager Cloud Control such as propagating polices to other databases.">Using Oracle Database Vault with Oracle Enterprise Manager</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-F43AB786-056D-4875-A555-F036D75EE63B" title="Database administrators can authorize Oracle Data Pump users to work in a Database Vault environment.">Using Oracle Data Pump with Oracle Database Vault</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-7B4B7730-24EC-4346-A8EF-536204F1E07D" title="Users who are responsible for scheduling database jobs must have Oracle Database Vault-specific authorization.">Using Oracle Scheduler with Oracle Database Vault</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-BC8B8432-223A-49CF-B215-4E0938CAF1FA" title="You can use Recovery Manager (RMAN) in an Oracle Database Vault environment.">Oracle Recovery Manager and Oracle Database Vault</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-702D094B-8308-4955-9ADA-267D18B08A46" title="If you want to use Oracle Streams in an Oracle Database Vault environment, then you must have the correct privileges.">Privileges for Using Oracle Streams with Oracle Database Vault</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-83F623CD-C0CC-47BB-8CF9-1F55DE44C7A3" title="If you want to use XStream in an Oracle Database Vault environment, then you must have the appropriate privileges.">Privileges for Using XStream with Oracle Database Vault</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-8BC01B07-01AE-4973-9E72-BD637D773D01" title="If you want to use Oracle GoldenGate in an Oracle Database Vault environment, then you must have the appropriate privileges.">Privileges for Using Oracle GoldenGate in with Oracle Database Vault</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-D2913E58-F3D7-4D6D-8997-8DACF943C4EA" title="You must have the correct authorization to perform data masking in an Oracle Database Vault environment.">Using Data Masking in an Oracle Database Vault Environment</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-517E9611-546B-43D9-8C54-37037AF0B198" title="You can convert a standalone Oracle Database Release 12c or later database to a PDB, and then plug this PDB into a CDB.">Converting a Standalone Oracle Database to a PDB and Plugging It into a CDB</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-C962017D-313C-4AD8-85D5-B0772DAC3313" title="The ORADEBUG utility is used primarily by Oracle Support to diagnose problems that may arise with an Oracle database.">Using the ORADEBUG Utility with Oracle Database Vault</a></p>
</li>
</ul>
</div>
<a id="DVADM70289"></a>
<div class="props_rev_3"><a id="GUID-990B6C45-901E-46B5-B5B2-0CE24C3ED42E"></a>
<h2 id="DVADM-GUID-990B6C45-901E-46B5-B5B2-0CE24C3ED42E" class="sect2">Using Oracle Database Vault with Oracle Enterprise Manager</h2>
<div>
<p>Oracle Database Vault administrators can perform tasks in Oracle Enterprise Manager Cloud Control such as propagating polices to other databases.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="dba.htm#GUID-199489A3-6050-4A5C-8144-B85E62E92D58" title="You can propagate Database Vault policies to other Database Vault-protected databases.">Propagating Oracle Database Vault Policies to Other Databases</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-FD0ACE67-0F10-4541-A67B-5C7534BAB26B" title="To view Oracle Database Vault alerts, you must be granted the DV_OWNER, DV_ADMIN, or DV_SECANALYST role.">Enterprise Manager Cloud Control Alerts for Oracle Database Vault Policies</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-1AD5B037-33D3-41BF-A0BA-0DB21759A237" title="From the Database Vault home page, you can find information about violations.">Oracle Database Vault-Specific Reports in Enterprise Manager Cloud Control</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-A395212A-DFCF-4607-88A8-7F1D7FB5F6B4" title="Before you can change the password for the DBSNMP user account, you must revoke the DV_MONITOR role from this account.">Changing the DBSNMP Account Password in a Database Vault Environment</a></p>
</li>
</ul>
</div>
<a id="DVADM08007"></a>
<div class="props_rev_3"><a id="GUID-199489A3-6050-4A5C-8144-B85E62E92D58"></a>
<h3 id="DVADM-GUID-199489A3-6050-4A5C-8144-B85E62E92D58" class="sect3">Propagating Oracle Database Vault Policies to Other Databases</h3>
<div>
<p>You can propagate Database Vault policies to other Database Vault-protected databases.</p>
<div class="section">
<ol>
<li>
<p>From Cloud Control, log into Oracle Database Vault Administrator as a user who has been granted the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role.</p>
<p><span class="q">&#34;<a href="getting_started.htm#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for Oracle Database Vault.">Logging into Oracle Database Vault</a>&#34;</span> explains how to log in.</p>
</li>
<li>
<p>In the Database Vault home page, under Policy Propagation, select <span class="bold">Database Vault Policy Propagation</span>.</p>
<p>The Available Policies area in the Policy Propagation subpage lists a summary of the Oracle Database Vault policies that were created for the current database. From here, you can propagate these policies to another database.</p>
</li>
<li>
<p>Under Available Policies, select each policy that you want to propagate to another database.</p>
<p>By default, all policies are selected.</p>
<div class="figure" id="GUID-199489A3-6050-4A5C-8144-B85E62E92D58__GUID-7BE8F900-C3BC-43E7-9FC3-345B8689F31F"><img width="948" height="604" src="img/GUID-446D8724-FDBA-48E2-B3A8-FF5D1F2EF6E9-default.gif" alt="Description of GUID-446D8724-FDBA-48E2-B3A8-FF5D1F2EF6E9-default.gif follows" title="Description of GUID-446D8724-FDBA-48E2-B3A8-FF5D1F2EF6E9-default.gif follows"/><br/>
<a href="img_text/GUID-446D8724-FDBA-48E2-B3A8-FF5D1F2EF6E9-default.htm">Description of the illustration GUID-446D8724-FDBA-48E2-B3A8-FF5D1F2EF6E9-default.gif</a></div>
<!-- class="figure" --></li>
<li>
<p>Under Destination Databases, click the <span class="bold">Add</span> button.</p>
</li>
<li>
<p>Under Search and Select: Database Vault Enabled Destination Databases, search for the destination databases, and then select each database to which you want to propagate the policies. Then click the <span class="bold">Select</span> button.</p>
</li>
<li>
<p>Under Destination Databases, do the following:</p>
<ol>
<li>
<p>Under Apply credentials across destination database(s), enter the user name and password of the administrator of the Database Vault database that contains the policies you want to propagate.</p>
<p>This feature applies the Database Vault administrator&#39;s user name and password to all of the selected destination databases.</p>
</li>
<li>
<p>Select each database to which you want to propagate the policies.</p>
</li>
<li>
<p>Enter the Database Vault administrator user name and password for each database.</p>
</li>
<li>
<p>Click the <span class="bold">Apply</span> button.</p>
</li>
</ol>
</li>
<li>
<p>In the Propagate Options page, select from the following options.</p>
<p>Any changes made to the seeded realms, command rules, rule sets, and so on will not be propagated to the destination databases. Only custom-created data are propagated.</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Restore on failure:</span> If the policy propagation encounters errors, then the propagation is rolled back. That is, the original policies on the destination database are restored. If you do not select this option, then the policy propagation on the destination database continues and ignores any errors.</p>
</li>
<li>
<p><span class="bold">Skip propagation if user defined policies exist:</span> If the destination databases already have the user-defined policies, then the policy propagation is not attempted. If you do not select this option, then regardless of whether user-defined policies exist on the destination database, all the existing policies are cleared, and the policies from the source database are applied to the destination database.</p>
</li>
<li>
<p><span class="bold">Propagate Enterprise Manager metric thresholds for database vault metrics:</span> If the source database has Oracle Database Vault metric thresholds set, then these thresholds are also propagated to the destination databases. If you do not select this option, then only policies are propagated and not the Oracle Database Vault thresholds.</p>
</li>
</ul>
</li>
<li>
<p>Click the <span class="bold">OK</span> button.</p>
</li>
<li>
<p>In the Confirmation window, click <span class="bold">OK</span>.</p>
<p>A message indicating success or failure appears. If the propagation succeeds, then the policies are active right away in their destination databases.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM70291"></a>
<div class="props_rev_3"><a id="GUID-FD0ACE67-0F10-4541-A67B-5C7534BAB26B"></a>
<h3 id="DVADM-GUID-FD0ACE67-0F10-4541-A67B-5C7534BAB26B" class="sect3">Enterprise Manager Cloud Control Alerts for Oracle Database Vault Policies</h3>
<div>
<p>To view Oracle Database Vault alerts, you must be granted the <code class="codeph">DV_OWNER</code>, <code class="codeph">DV_ADMIN</code>, or <code class="codeph">DV_SECANALYST</code> role.</p>
<p>The alerts are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Database Vault Attempted Realm Violations.</span> This alert helps the Oracle Database Vault security analyst (<code class="codeph">DV_SECANALYST</code> role) to monitor violation attempts on the Database Vault database. This user can select the realms to be affected by the alert and filter these realms based on the different types of attempts by using error codes. You can enable this metric from the Metrics and Policy Settings page. By default, the attempted realm violations are collected every 24 hours.</p>
</li>
<li>
<p><span class="bold">Database Vault Attempted Command Rule Violations.</span> The functionality for this alert is the same as for Database Vault Attempted Realm Violations, except that it focuses on violations on command rules.</p>
</li>
<li>
<p><span class="bold">Database Vault Realm Configuration Issues.</span> This metric tracks and raises an alert if users misconfigure realms. This metric is enabled when you install Oracle Database vault, and by default it collects data every one hour.</p>
</li>
<li>
<p><span class="bold">Database Vault Command Rule Configuration Issues.</span> This functionality for this alert is that same as Database Vault Realm Configuration Issues, except that it focuses on configuration changes to command rules.</p>
</li>
<li>
<p><span class="bold">Database Vault Policy Changes.</span> This metric raises an alert on any change to any Database Vault policy, such as policies for realms and command rules. It provides a detailed policy changes report.</p>
</li>
</ul>
</div>
</div>
<a id="DVADM70292"></a>
<div class="props_rev_3"><a id="GUID-1AD5B037-33D3-41BF-A0BA-0DB21759A237"></a>
<h3 id="DVADM-GUID-1AD5B037-33D3-41BF-A0BA-0DB21759A237" class="sect3">Oracle Database Vault-Specific Reports in Enterprise Manager Cloud Control</h3>
<div>
<p>From the Database Vault home page, you can find information about violations.</p>
<p>These violations are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Top five attempted violations on realm and command rule</p>
</li>
<li>
<p>Top five attempted violations by database users and client host</p>
</li>
<li>
<p>Time series-based graphical reports on attempted violations for more detailed analysis</p>
</li>
</ul>
<p>To have full access to the Database Vault reports, you must log into Database Vault Administrator as a user who has been granted the <code class="codeph">DV_OWNER</code>, <code class="codeph">DV_ADMIN</code>, or <code class="codeph">DV_SECANALYST</code> role.</p>
<div class="infoboxnotealso" id="GUID-1AD5B037-33D3-41BF-A0BA-0DB21759A237__GUID-7527F83B-BF18-4ACB-8BAC-9A233A5B43D2">
<p class="notep1">See Also:</p>
<p><a href="reports.htm#GUID-1B6D02DE-3FB2-4ADB-9916-4491B37FDECD" title="Oracle Database Vault provides reports that track activities, such as the Database Vault configuration settings.">Oracle Database Vault Reports</a></p>
</div>
</div>
</div>
<a id="DVADM70293"></a>
<div class="props_rev_3"><a id="GUID-A395212A-DFCF-4607-88A8-7F1D7FB5F6B4"></a>
<h3 id="DVADM-GUID-A395212A-DFCF-4607-88A8-7F1D7FB5F6B4" class="sect3">Changing the DBSNMP Account Password in a Database Vault Environment</h3>
<div>
<p>Before you can change the password for the <code class="codeph">DBSNMP</code> user account, you must revoke the <code class="codeph">DV_MONITOR</code> role from this account.</p>
<div class="section">
<p>In an Oracle Database Vault environment, the <code class="codeph">DBSNMP</code> user account is granted the <code class="codeph">DV_MONITOR</code> role. (The <code class="codeph">DBSNMP</code> user can change his or her own password directly, without having to have the <code class="codeph">DV_MONITOR</code> role revoked first.)</p>
</div>
<!-- class="section" -->
<ol>
<li><span>Log into the database instance using an account that has been granted the <code class="codeph">DV_OWNER</code> role.</span></li>
<li><span>Revoke the <code class="codeph">DV_MONITOR</code> role from the <code class="codeph">DBSNMP</code> user account.</span></li>
<li><span>Connect as a user who has been granted the <code class="codeph">DV_ACCTMGR</code> role and then change the <code class="codeph">DBSNMP</code> user account password.</span></li>
<li><span>Connect as the <code class="codeph">DV_OWNER</code> user and then grant the <code class="codeph">DV_MONITOR</code> role back to the <code class="codeph">DBSNMP</code> user account.</span></li>
</ol>
</div>
</div>
</div>
<a id="DVADM70314"></a>
<div class="props_rev_3"><a id="GUID-F43AB786-056D-4875-A555-F036D75EE63B"></a>
<h2 id="DVADM-GUID-F43AB786-056D-4875-A555-F036D75EE63B" class="sect2">Using Oracle Data Pump with Oracle Database Vault</h2>
<div>
<p>Database administrators can authorize Oracle Data Pump users to work in a Database Vault environment.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="dba.htm#GUID-B686B999-6A7D-4EEA-838F-3DCB684D393B" title="Database administrators who use Oracle Data Pump in an Database Vault environment must have Database Vault-specific authorization to export and import data.">About Using Oracle Data Pump with Oracle Database Vault</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-FAFC06B4-CE1A-4A26-9B3B-F55566E1431D" title="You can use different authorization types for administrators who perform Oracle Data Pump export and import operations in a Database Vault environment.">Authorizing Users for Data Pump Regular Export and Import Operations</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-5D8EA9C8-AA46-4DFF-BA8F-A69A4B9C2EEE" title="You can grant authorization levels for users who must perform Oracle Data Pump transportable operations.">Authorizing Users for Data Pump Transportable Export and Import Operations</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-182867A6-4CF5-447C-A4B7-FB7CC24D3CC2" title="After you grant the Oracle Data Pump database administrator the proper authorization, this can perform any export or import operations that are necessary.">Guidelines for Exporting or Importing Data in a Database Vault Environment</a></p>
</li>
</ul>
</div>
<a id="DVADM70315"></a>
<div class="props_rev_3"><a id="GUID-B686B999-6A7D-4EEA-838F-3DCB684D393B"></a>
<h3 id="DVADM-GUID-B686B999-6A7D-4EEA-838F-3DCB684D393B" class="sect3">About Using Oracle Data Pump with Oracle Database Vault</h3>
<div>
<p>Database administrators who use Oracle Data Pump in an Database Vault environment must have Database Vault-specific authorization to export and import data.</p>
<p>They must have these privileges in addition to the standard Oracle Data Pump privileges. If these users want to perform Oracle Data Pump transportable tablespace operations, then they must have special authorization. You can check a user&#39;s authorizations for using Data Pump in an Oracle Database Vault environment by querying the <code class="codeph">DVSYS.DBA_DV_DATAPUMP_AUTH</code> data dictionary view.</p>
<div class="infoboxnotealso" id="GUID-B686B999-6A7D-4EEA-838F-3DCB684D393B__GUID-C310CCBB-3BD8-4BD2-A487-66E7B83C1C7C">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SUTIL2877" target="_blank" href="../SUTIL/GUID-501A9908-BCC5-434C-8853-9A6096766B5A.htm#SUTIL2877"><span><cite>Oracle Database Utilities</cite></span></a> for detailed information about Oracle Data Pump</p>
</li>
<li>
<p><a class="olink ADMIN01101" target="_blank" href="../ADMIN/transport.htm#ADMIN01101"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for more information about transportable tablespaces</p>
</li>
<li>
<p><a href="views.htm#GUID-032394A2-CF30-4B84-A4A9-07823AC96C59" title="The DVSYS.DBA_DV_DATAPUMP_AUTH data dictionary view lists the authorizations for using Oracle Data Pump in an Oracle Database Vault environment.">DVSYS.DBA_DV_DATAPUMP_AUTH View</a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="DVADM71324"></a>
<div class="props_rev_3"><a id="GUID-FAFC06B4-CE1A-4A26-9B3B-F55566E1431D"></a>
<h3 id="DVADM-GUID-FAFC06B4-CE1A-4A26-9B3B-F55566E1431D" class="sect3">Authorizing Users for Data Pump Regular Export and Import Operations</h3>
<div>
<p>You can use different authorization types for administrators who perform Oracle Data Pump export and import operations in a Database Vault environment.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="dba.htm#GUID-6BF79D85-CB29-44F7-BAAC-12291AE6C718" title="Users who have Oracle Data Pump authorization can perform regular Oracle Data Pump operations in a Database Vault environment.">About Authorizing Users for Oracle Data Pump Regular Operations</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-02497FDC-C4AE-4D64-AD38-E2B31607239E" title="Oracle Database Vault provides several levels of authorization required for Oracle Data Pump regular operations in a Database Vault environment.">Levels of Database Vault Authorization for Oracle Data Pump Regular Operations</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-BE236503-9FC0-4AFA-BA6F-F02BD16552FA" title="You can authorize a database administrator to use Data Pump for regular operations in an Oracle Database Vault environment.">Authorizing Users for Oracle Data Pump Regular Operations in Database Vault</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-4E0B05C8-9CE2-44A3-97CE-83D29011D19C" title="You can revoke authorization from a database administrator who is using Oracle Data Pump for regular operations.">Revoking Oracle Data Pump Authorization from Users</a></p>
</li>
</ul>
</div>
<a id="DVADM71325"></a>
<div class="props_rev_3"><a id="GUID-6BF79D85-CB29-44F7-BAAC-12291AE6C718"></a>
<h4 id="DVADM-GUID-6BF79D85-CB29-44F7-BAAC-12291AE6C718" class="sect4">About Authorizing Users for Oracle Data Pump Regular Operations</h4>
<div>
<p>Users who have Oracle Data Pump authorization can perform regular Oracle Data Pump operations in a Database Vault environment.</p>
<p>Full level Data Pump authorization enables these users to perform transportable export and import operations as well.</p>
<div class="infoboxnotealso" id="GUID-6BF79D85-CB29-44F7-BAAC-12291AE6C718__GUID-761BCE95-6E63-4855-8701-45DA60579A24">
<p class="notep1">See Also:</p>
<a href="dba.htm#GUID-5D8EA9C8-AA46-4DFF-BA8F-A69A4B9C2EEE" title="You can grant authorization levels for users who must perform Oracle Data Pump transportable operations.">Authorizing Users for Data Pump Transportable Export and Import Operations</a> if you want the user only to perform transportable export and import operations</div>
</div>
</div>
<a id="DVADM71327"></a><a id="DVADM71326"></a>
<div class="props_rev_3"><a id="GUID-02497FDC-C4AE-4D64-AD38-E2B31607239E"></a>
<h4 id="DVADM-GUID-02497FDC-C4AE-4D64-AD38-E2B31607239E" class="sect4">Levels of Database Vault Authorization for Oracle Data Pump Regular Operations</h4>
<div>
<p>Oracle Database Vault provides several levels of authorization required for Oracle Data Pump regular operations in a Database Vault environment.</p>
<p><a href="dba.htm#GUID-02497FDC-C4AE-4D64-AD38-E2B31607239E__CHDHCAIA" title="Full Oracle Data Pump Levels of Authorization">Table 11-1</a> describes these levels.</p>
<div class="tblformal" id="GUID-02497FDC-C4AE-4D64-AD38-E2B31607239E__CHDHCAIA">
<p class="titleintable">Table 11-1 Levels of Authorization for Oracle Data Pump Regular Operations</p>
<table class="cellalignment338" title="Levels of Authorization for Oracle Data Pump Regular Operations" summary="Full Oracle Data Pump Levels of Authorization">
<thead>
<tr class="cellalignment332">
<th class="cellalignment362" id="d47731e1390">Scenario</th>
<th class="cellalignment430" id="d47731e1393">Authorization Required</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment332">
<td class="cellalignment363" id="d47731e1398" headers="d47731e1390">
<p>A database administrator wants to import data into another schema.</p>
</td>
<td class="cellalignment431" headers="d47731e1398 d47731e1393">
<p>You must grant this user the <code class="codeph">BECOME USER</code> system privilege and the <code class="codeph">IMP_FULL_DATABASE</code> role.<a id="fn_1" href="#fn_1" onclick="footdisplay(1,&#34;The BECOME USER privilege is part of the IMP_FULL_DATABASE role by default, but in an Oracle Database Vault environment, this privilege is revoked. &#34;)"><sup>Foot&nbsp;1</sup></a> To find the privileges a user has been granted, query the <code class="codeph">USER_SYS_PRIVS</code> data dictionary view.</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment363" id="d47731e1424" headers="d47731e1390">
<p>A database administrator wants to export or import data in a schema that has no Database Vault protection.</p>
</td>
<td class="cellalignment431" headers="d47731e1424 d47731e1393">
<p>You only need to grant this user the standard Oracle Data Pump privileges, which are the <code class="codeph">EXP_FULL_DATABASE</code> and <code class="codeph">IMP_FULL_DATABASE</code> roles. If the user wants to import data, grant this user the <code class="codeph">BECOME USER</code> system privilege.</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment363" id="d47731e1440" headers="d47731e1390">
<p>A database administrator wants to export or import data in a protected schema.</p>
</td>
<td class="cellalignment431" headers="d47731e1440 d47731e1393">
<p>In addition to the <code class="codeph">EXP_FULL_DATABASE</code> and <code class="codeph">IMP_FULL_DATABASE</code> roles, you must grant this user Database Vault-specific authorization by using the <code class="codeph">DBMS_MACADM.AUTHORIZE_DATAPUMP_USER</code> procedure. This authorization applies to both the <code class="codeph">EXPDP</code> and <code class="codeph">IMPDP</code> utilities. Later on, you can revoke this authorization by using the <code class="codeph">DBMS_MACADM.UNAUTHORIZE_DATAPUMP_USER</code> procedure.</p>
<p>If the user wants to import data, also grant this user the <code class="codeph">BECOME USER</code> system privilege.</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment363" id="d47731e1471" headers="d47731e1390">
<p>A database administrator wants to export or import the contents of an entire database.</p>
</td>
<td class="cellalignment431" headers="d47731e1471 d47731e1393">
<p>In addition to the <code class="codeph">EXP_FULL_DATABASE</code> and <code class="codeph">IMP_FULL_DATABASE</code> roles and the authorization granted by the <code class="codeph">DBMS_MACADM.AUTHORIZE_DATAPUMP_USER</code> procedure, you must grant this user the <code class="codeph">DV_OWNER</code> role. If the user wants to import data, grant this user the <code class="codeph">BECOME USER</code> system privilege.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1</sup></p>
<p>The <code class="codeph">BECOME USER</code> privilege is part of the <code class="codeph">IMP_FULL_DATABASE</code> role by default, but in an Oracle Database Vault environment, this privilege is revoked.</p>
</div>
</div>
<a id="DVADM71227"></a>
<div class="props_rev_3"><a id="GUID-BE236503-9FC0-4AFA-BA6F-F02BD16552FA"></a>
<h4 id="DVADM-GUID-BE236503-9FC0-4AFA-BA6F-F02BD16552FA" class="sect4">Authorizing Users for Oracle Data Pump Regular Operations in Database Vault</h4>
<div>
<p>You can authorize a database administrator to use Data Pump for regular operations in an Oracle Database Vault environment.</p>
<ol>
<li class="stepexpand"><span>Log into the database instance as a user who has been granted the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role.</span></li>
<li class="stepexpand"><span>Ensure that the user to whom you want to grant authorization has been granted the <code class="codeph">EXP_FULL_DATABASE</code> and <code class="codeph">IMP_FULL_DATABASE</code> roles, which are required for using Oracle Data Pump.</span>
<div>
<pre dir="ltr">SELECT GRANTEE, GRANTED_ROLE FROM DBA_ROLE_PRIVS WHERE GRANTED_ROLE LIKE &#39;%FULL%&#39;;
</pre></div>
</li>
<li class="stepexpand"><span>Grant this user Oracle Database Vault authorization for Oracle Data Pump regular operations.</span>
<div>
<p>For example, to authorize the Data Pump user <code class="codeph">DP_MGR</code> to export and import objects for the database table <code class="codeph">EMPLOYEES</code>:</p>
<pre dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_DATAPUMP_USER(&#39;DP_MGR&#39;, &#39;HR&#39;, &#39;EMPLOYEES&#39;);
</pre>
<p>To restrict <code class="codeph">DP_MGR</code>&#39;s activities to a specific schema, you would enter the following procedure:</p>
<pre dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_DATAPUMP_USER(&#39;DP_MGR&#39;, &#39;HR&#39;);
</pre>
<p>To authorize the Data Pump user <code class="codeph">DP_MGR</code> to export and import objects for the entire database, enter the following:</p>
<pre dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_DATAPUMP_USER(&#39;DP_MGR&#39;);
</pre>
<p>See <a href="apis_admin.htm#GUID-DB9AA939-D18D-407D-B2E4-4CA038992589" title="The AUTHORIZE_DATAPUMP_USER procedure authorizes a user to perform Oracle Data Pump operations when Oracle Database Vault is enabled.">AUTHORIZE_DATAPUMP_USER Procedure</a> for detailed information about this procedure.</p>
<p>After you run the <code class="codeph">DBMS_MACADM.AUTHORIZE_DATAPUMP_USER</code> procedure, you can check the user&#39;s authorization by querying the <code class="codeph">DBA_DV_DATAPUMP_AUTH</code> data dictionary view, described in <a href="views.htm#GUID-032394A2-CF30-4B84-A4A9-07823AC96C59" title="The DVSYS.DBA_DV_DATAPUMP_AUTH data dictionary view lists the authorizations for using Oracle Data Pump in an Oracle Database Vault environment.">DVSYS.DBA_DV_DATAPUMP_AUTH View</a>.</p>
</div>
</li>
<li class="stepexpand"><span>If the user must export the entire database, then grant the user the <code class="codeph">DV_OWNER</code> role.</span>
<div>
<pre dir="ltr">GRANT DV_OWNER TO DP_MGR;
</pre></div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-BE236503-9FC0-4AFA-BA6F-F02BD16552FA__GUID-A9F6727F-902A-4FBD-99C6-08C9208219F7">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="apis_admin.htm#GUID-DB9AA939-D18D-407D-B2E4-4CA038992589" title="The AUTHORIZE_DATAPUMP_USER procedure authorizes a user to perform Oracle Data Pump operations when Oracle Database Vault is enabled.">AUTHORIZE_DATAPUMP_USER Procedure</a></p>
</li>
<li>
<p><a href="views.htm#GUID-032394A2-CF30-4B84-A4A9-07823AC96C59" title="The DVSYS.DBA_DV_DATAPUMP_AUTH data dictionary view lists the authorizations for using Oracle Data Pump in an Oracle Database Vault environment.">DVSYS.DBA_DV_DATAPUMP_AUTH View</a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM70318"></a>
<div class="props_rev_3"><a id="GUID-4E0B05C8-9CE2-44A3-97CE-83D29011D19C"></a>
<h4 id="DVADM-GUID-4E0B05C8-9CE2-44A3-97CE-83D29011D19C" class="sect4">Revoking Oracle Data Pump Authorization from Users</h4>
<div>
<p>You can revoke authorization from a database administrator who is using Oracle Data Pump for regular operations.</p>
<ol>
<li class="stepexpand"><span>If you granted the user the <code class="codeph">DV_OWNER</code> role, then optionally revoke this role.</span>
<div>
<pre dir="ltr">REVOKE DV_OWNER FROM DP_MGR;
</pre></div>
</li>
<li class="stepexpand" id="GUID-4E0B05C8-9CE2-44A3-97CE-83D29011D19C__CHDCIIFB"><span>Query the <code class="codeph">DVSYS.DBA_DV_DATAPUMP_AUTH</code> data dictionary view to find the users who have been granted Oracle Data Pump authorizations.</span>
<div>
<pre dir="ltr">SELECT GRANTEE, SCHEMA, OBJECT FROM DVSYS.DBA_DV_DATAPUMP_AUTH;
</pre></div>
</li>
<li class="stepexpand"><span>Use the information you gathered from Step <a href="dba.htm#GUID-4E0B05C8-9CE2-44A3-97CE-83D29011D19C__CHDCIIFB">2</a> to build the <code class="codeph">DBMS_MACADM.UNAUTHORIZE_DATAPUMP_USER</code> command.</span>
<div>
<p>For example:</p>
<pre dir="ltr">EXEC DBMS_MACADM.UNAUTHORIZE_DATAPUMP_USER(&#39;DP_MGR&#39;, &#39;HR&#39;, &#39;EMPLOYEES&#39;);
</pre>
<p>Ensure that this unauthorization complements the original authorization action. In other words, if you originally gave <code class="codeph">DP_MGR</code> authorization over the entire database, then the following commands will not work:</p>
<pre dir="ltr">EXEC DBMS_MACADM.UNAUTHORIZE_DATAPUMP_USER(&#39;DP_MGR&#39;, &#39;HR&#39;);

EXEC DBMS_MACADM.UNAUTHORIZE_DATAPUMP_USER(&#39;DP_MGR&#39;, &#39;HR&#39;, &#39;EMPLOYEES&#39;);
</pre></div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-4E0B05C8-9CE2-44A3-97CE-83D29011D19C__GUID-F667ADF7-DB54-4C36-BF81-6B6675C290A9">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="apis_admin.htm#GUID-416BFDD0-26A6-4859-BC2A-23C4BF89D47B" title="The UNAUTHORIZE_DATAPUMP_USER procedure revokes the authorization that was granted by the AUTHORIZE_DATAPUMP_USER procedure.">UNAUTHORIZE_DATAPUMP_USER Procedure</a></p>
</li>
<li>
<p><a href="views.htm#GUID-032394A2-CF30-4B84-A4A9-07823AC96C59" title="The DVSYS.DBA_DV_DATAPUMP_AUTH data dictionary view lists the authorizations for using Oracle Data Pump in an Oracle Database Vault environment.">DVSYS.DBA_DV_DATAPUMP_AUTH View</a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="DVADM71328"></a>
<div class="props_rev_3"><a id="GUID-5D8EA9C8-AA46-4DFF-BA8F-A69A4B9C2EEE"></a>
<h3 id="DVADM-GUID-5D8EA9C8-AA46-4DFF-BA8F-A69A4B9C2EEE" class="sect3">Authorizing Users for Data Pump Transportable Export and Import Operations</h3>
<div>
<p>You can grant authorization levels for users who must perform Oracle Data Pump transportable operations.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="dba.htm#GUID-50DD4721-514B-4F54-B6AD-A843BF94AD06" title="You can grant users different levels of transportable operation authorization.">About Authorizing Users for Oracle Data Pump Transportable Operations</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-83A4A1B8-33C7-442B-8CE1-5E4A1113C361" title="Oracle Database Vault provides levels of authorization required for users who must perform export and import transportable operations in a Database Vault environment.">Levels of Database Vault Authorization for Data Pump Transportable Operations</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-D8BA77F1-297A-4E5B-BC6E-848B7B35A246" title="You can authorize users to perform Oracle Data Pump transportable export or import operations in a Database Vault environment.">Authorizing Users for Data Pump Transportable Operations in Database Vault</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-0CDADB19-E938-407C-A0D8-6994B2F1A1FD" title="You can revoke authorization from the database administrator who is using Data Pump.">Revoking Transportable Tablespace Authorization from Users</a></p>
</li>
</ul>
</div>
<a id="DVADM71329"></a>
<div class="props_rev_3"><a id="GUID-50DD4721-514B-4F54-B6AD-A843BF94AD06"></a>
<h4 id="DVADM-GUID-50DD4721-514B-4F54-B6AD-A843BF94AD06" class="sect4">About Authorizing Users for Oracle Data Pump Transportable Operations</h4>
<div>
<p>You can grant users different levels of transportable operation authorization.</p>
<p>If you want users to only have the authorization to perform transportable export and import operations, then you must grant users the correct authorization, based on their tasks.</p>
<div class="infoboxnotealso" id="GUID-50DD4721-514B-4F54-B6AD-A843BF94AD06__GUID-01EE1801-96DF-4714-BE7C-0A73E9BE78F0">
<p class="notep1">See Also:</p>
<a href="dba.htm#GUID-FAFC06B4-CE1A-4A26-9B3B-F55566E1431D" title="You can use different authorization types for administrators who perform Oracle Data Pump export and import operations in a Database Vault environment.">Authorizing Users for Data Pump Regular Export and Import Operations</a> if your users must have Oracle Data Pump authorization to perform regular operations in a Database Vault environment</div>
</div>
</div>
<a id="DVADM71331"></a><a id="DVADM71330"></a>
<div class="props_rev_3"><a id="GUID-83A4A1B8-33C7-442B-8CE1-5E4A1113C361"></a>
<h4 id="DVADM-GUID-83A4A1B8-33C7-442B-8CE1-5E4A1113C361" class="sect4">Levels of Database Vault Authorization for Data Pump Transportable Operations</h4>
<div>
<p>Oracle Database Vault provides levels of authorization required for users who must perform export and import transportable operations in a Database Vault environment.</p>
<p><a href="dba.htm#GUID-83A4A1B8-33C7-442B-8CE1-5E4A1113C361__CHDEJDJB" title="Transportable tablespace export and import authorization levels">Table 11-2</a> describes these levels.</p>
<div class="tblformalwide" id="GUID-83A4A1B8-33C7-442B-8CE1-5E4A1113C361__CHDEJDJB">
<p class="titleintable">Table 11-2 Levels of Authorization for Oracle Data Pump Transporatable Operations</p>
<table class="cellalignment379" title="Levels of Authorization for Oracle Data Pump Transporatable Operations" summary="Transportable tablespace export and import authorization levels">
<thead>
<tr class="cellalignment332">
<th class="cellalignment467" id="d47731e2116">Scenario</th>
<th class="cellalignment465" id="d47731e2119">Authorization Required</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment332">
<td class="cellalignment468" id="d47731e2124" headers="d47731e2116">
<p>A database administrator wants to transportable export a tablespace or table that has no Database Vault protection.</p>
</td>
<td class="cellalignment466" headers="d47731e2124 d47731e2119">
<p>You only need to grant this user the standard Oracle Data Pump privileges, which are the <code class="codeph">EXP_FULL_DATABASE</code> and <code class="codeph">IMP_FULL_DATABASE</code> roles.</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment468" id="d47731e2137" headers="d47731e2116">
<p>A database administrator wants to transportable export a tablespace where there is Database Vault protection (for example, realm or command rule for a table object residing on that tablespace).</p>
</td>
<td class="cellalignment466" headers="d47731e2137 d47731e2119">
<p>In addition to the <code class="codeph">EXP_FULL_DATABASE</code> and <code class="codeph">IMP_FULL_DATABASE</code> roles, you must grant this user Database Vault-specific transportable tablespace authorization by using the <code class="codeph">DBMS_MACADM.AUTHORIZE_TTS_USER</code> procedure. Later on, you can revoke this authorization by using the <code class="codeph">DBMS_MACADM.UNAUTHORIZE_TTS_USER</code> procedure.</p>
<p>Remember that users who have been granted full database level Oracle Data Pump authorization (through the <code class="codeph">DBMS_MACADM.AUTHORIZE_DATAPUMP_USER</code> procedure) can perform these operations as well.</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment468" id="d47731e2161" headers="d47731e2116">
<p>A database administrator wants to transportable export a table within a tablespace where there is Database Vault protection (for example, a realm or command rule for a table object residing on the tablespace that contains the table to be exported).</p>
</td>
<td class="cellalignment466" headers="d47731e2161 d47731e2119">
<p>In addition to the <code class="codeph">EXP_FULL_DATABASE</code> and <code class="codeph">IMP_FULL_DATABASE</code> roles, you must grant this user Database Vault-specific transportable tablespace authorization for the tablespace that contains the table to be exported by using the <code class="codeph">DBMS_MACADM.AUTHORIZE_TTS_USER</code> procedure.</p>
<p>Remember that users who have been granted full database level Oracle Data Pump authorization (from the <code class="codeph">DBMS_MACADM.AUTHORIZE_DATAPUMP_USER</code> procedure) can perform these operations as well.</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment468" id="d47731e2182" headers="d47731e2116">
<p>A database administrator wants to transportable export the contents of an entire database.</p>
</td>
<td class="cellalignment466" headers="d47731e2182 d47731e2119">
<p>In addition to the <code class="codeph">DV_OWNER</code>, <code class="codeph">EXP_FULL_DATABASE</code>, and <code class="codeph">IMP_FULL_DATABASE</code> roles, you must grant this user Database Vault-specific full database level Oracle Data Pump authorization by using the <code class="codeph">DBMS_MACADM.AUTHORIZE_DATAPUMP_USER</code> procedure. You do not need to run the <code class="codeph">DBMS_MACADM.AUTHORIZE_TTS_USER</code> procedure for this user.</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment468" id="d47731e2204" headers="d47731e2116">
<p>A database administrator wants to use a network link to transportable import a tablespace or a table that has no Database Vault protection.</p>
</td>
<td class="cellalignment466" headers="d47731e2204 d47731e2119">
<p>In addition to the <code class="codeph">EXP_FULL_DATABASE</code> and <code class="codeph">IMP_FULL_DATABASE</code> roles for both the database administrator and the connecting user, you must grant the connecting user specified in the network link the <code class="codeph">DV_DATAPUMP_NETWORK_LINK</code> role.</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment468" id="d47731e2220" headers="d47731e2116">
<p>A database administrator wants to use a network link to transportable import a tablespace where there is Database Vault protection (for example, realm or command rule for a table object residing on that tablespace)</p>
</td>
<td class="cellalignment466" headers="d47731e2220 d47731e2119">
<p>In addition to the <code class="codeph">EXP_FULL_DATABASE</code> and <code class="codeph">IMP_FULL_DATABASE</code> roles, you must grant the connecting user specified in the network link the Database Vault-specific transportable tablespace authorization for that tablespace by using the <code class="codeph">DBMS_MACADM.AUTHORIZE_TTS_USER</code> procedure. You must also grant the connecting user the <code class="codeph">DV_DATAPUMP_NETWORK_LINK</code> role.</p>
<p>Remember that users who have been granted Database Vault-specific full database level Oracle Data Pump authorization (through the <code class="codeph">DBMS_MACADM.AUTHORIZE_DATAPUMP_USER</code> procedure) can perform these operations.</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment468" id="d47731e2244" headers="d47731e2116">
<p>A database administrator wants to use a network link to import a table within a transportable tablespace where there is Database Vault protection (for example, realm or command rule for a table object residing on the tablespace that contains the table to be exported)</p>
</td>
<td class="cellalignment466" headers="d47731e2244 d47731e2119">
<p>In addition to the <code class="codeph">EXP_FULL_DATABASE</code> and <code class="codeph">IMP_FULL_DATABASE</code> roles, you must grant the connecting user the Database Vault-specific transportable tablespace authorization for the tablespace that contains the table to be exported by using the <code class="codeph">DBMS_MACADM.AUTHORIZE_TTS_USER</code> procedure. You also must grant the connecting user specified in the network link the <code class="codeph">DV_DATAPUMP_NETWORK_LINK</code> role.</p>
<p>Remember that users who have been granted Database Vault-specific full database level Oracle Data Pump authorization (through the <code class="codeph">DBMS_MACADM.AUTHORIZE_DATAPUMP_USER</code> procedure) can perform the operations.</p>
</td>
</tr>
<tr class="cellalignment332">
<td class="cellalignment468" id="d47731e2268" headers="d47731e2116">
<p>A database administrator wants to use a network link to transportable import the contents of an entire database.</p>
</td>
<td class="cellalignment466" headers="d47731e2268 d47731e2119">
<p>In addition to the <code class="codeph">DV_OWNER</code> role, you must grant the connecting user Database Vault-specific full database level Oracle Data Pump authorization by using the <code class="codeph">DBMS_MACADM.AUTHORIZE_DATAPUMP_USER</code> procedure. You do not need to run the <code class="codeph">DBMS_MACADM.AUTHORIZE_TTS_USER</code> procedure for this user. You must also grant the connecting user who is specified in the network link the <code class="codeph">DV_DATAPUMP_NETWORK_LINK</code> role.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="DVADM71332"></a>
<div class="props_rev_3"><a id="GUID-D8BA77F1-297A-4E5B-BC6E-848B7B35A246"></a>
<h4 id="DVADM-GUID-D8BA77F1-297A-4E5B-BC6E-848B7B35A246" class="sect4">Authorizing Users for Data Pump Transportable Operations in Database Vault</h4>
<div>
<p>You can authorize users to perform Oracle Data Pump transportable export or import operations in a Database Vault environment.</p>
<ol>
<li class="stepexpand"><span>Log into the database instance as a user who has been granted the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role.</span></li>
<li class="stepexpand"><span>Ensure that the user to whom you want to grant authorization has been granted the <code class="codeph">EXP_FULL_DATABASE</code> and <code class="codeph">IMP_FULL_DATABASE</code> roles, which are required for using Oracle Data Pump.</span>
<div>
<pre dir="ltr">SELECT GRANTEE, GRANTED_ROLE FROM DBA_ROLE_PRIVS 
 WHERE GRANTED_ROLE LIKE &#39;%FULL%&#39;;
</pre></div>
</li>
<li class="stepexpand"><span>If the user wants to transportable export or use a network link to transportable import the contents of an entire database, then grant the full database level Oracle Data Pump authorization by using the <code class="codeph">DBMS_MACADM.AUTHORIZE_DATAPUMP_USER</code> procedure. Otherwise, bypass this step.</span>
<div>
<p>For example:</p>
<pre dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_DATAPUMP_USER(&#39;DP_MGR&#39;);
</pre></div>
</li>
<li class="stepexpand"><span>If the user must have Database Vault-specific transportable tablespace authorization only, then grant this user this authorization.</span>
<div>
<p>For example:</p>
<pre dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_TTS_USER(&#39;DP_MGR&#39;, &#39;HR_TS&#39;);
</pre></div>
</li>
<li class="stepexpand"><span>If the user who wants to perform a transportable import operation wants to use a network link to perform the operation, then grant this user the <code class="codeph">DV_DATAPUMP_NETWORK_LINK</code> role.</span>
<div>
<p>For example:</p>
<pre dir="ltr">GRANT DV_DATAPUMP_NETWORK_LINK TO DP_MGR;
</pre></div>
</li>
<li class="stepexpand"><span>If the user wants to transportable export or use a network link to transportable import the entire database, then grant this user the <code class="codeph">DV_OWNER</code> role.</span>
<div>
<pre dir="ltr">GRANT DV_OWNER TO DP_MGR;
</pre></div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-D8BA77F1-297A-4E5B-BC6E-848B7B35A246__GUID-84BE5AD6-71BB-420A-B8DA-576511CD27F2">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="views.htm#GUID-2FA377BE-C508-4B13-A86E-B0EF94124F06" title="The DVSYS.DBA_DV_TTS_AUTH data dictionary view lists users who have been granted authorization through the DBMS_MACADM.AUTHORIZE_TTS_USER procedure to perform Oracle Data Pump transportable operations.">DVSYS.DBA_DV_TTS_AUTH View</a></p>
</li>
<li>
<p><a href="views.htm#GUID-032394A2-CF30-4B84-A4A9-07823AC96C59" title="The DVSYS.DBA_DV_DATAPUMP_AUTH data dictionary view lists the authorizations for using Oracle Data Pump in an Oracle Database Vault environment.">DVSYS.DBA_DV_DATAPUMP_AUTH View</a></p>
</li>
<li>
<p><a href="apis_admin.htm#GUID-EC41007D-D62E-48F6-A180-4A96DDF39811" title="The AUTHORIZE_TTS_USER procedure authorizes a user to perform Oracle Data Pump transportable tablespace operations for a tablespace when Oracle Database Vault is enabled.">AUTHORIZE_TTS_USER Procedure</a></p>
</li>
<li>
<p><a href="apis_admin.htm#GUID-DB9AA939-D18D-407D-B2E4-4CA038992589" title="The AUTHORIZE_DATAPUMP_USER procedure authorizes a user to perform Oracle Data Pump operations when Oracle Database Vault is enabled.">AUTHORIZE_DATAPUMP_USER Procedure</a></p>
</li>
<li>
<p><a href="db_objects.htm#GUID-2FBCA546-F12B-4AC7-B3C7-5DECC7740AD5" title="The DV_DATAPUMP_NETWORK_LINK role is used for Data Pump import operations.">DV_DATAPUMP_NETWORK_LINK Data Pump Network Link Role</a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DVADM71333"></a>
<div class="props_rev_3"><a id="GUID-0CDADB19-E938-407C-A0D8-6994B2F1A1FD"></a>
<h4 id="DVADM-GUID-0CDADB19-E938-407C-A0D8-6994B2F1A1FD" class="sect4">Revoking Transportable Tablespace Authorization from Users</h4>
<div>
<p>You can revoke authorization from the database administrator who is using Data Pump.</p>
<ol>
<li class="stepexpand"><span>If you granted the user the <code class="codeph">DV_OWNER</code> role, then optionally revoke this role.</span>
<div>
<pre dir="ltr">REVOKE DV_OWNER FROM DP_MGR;
</pre></div>
</li>
<li class="stepexpand" id="GUID-0CDADB19-E938-407C-A0D8-6994B2F1A1FD__CHDJAEHI"><span>Query the <code class="codeph">DVSYS.DBA_DV_TTS_AUTH</code> data dictionary view to find the users who have been granted Oracle Data Pump authorizations.</span>
<div>
<pre dir="ltr">SELECT GRANTEE, TSNAME FROM DVSYS.DBA_DV_TTS_AUTH;
</pre></div>
</li>
<li class="stepexpand"><span>Use the information you gathered from Step <a href="dba.htm#GUID-0CDADB19-E938-407C-A0D8-6994B2F1A1FD__CHDJAEHI">2</a> to build the <code class="codeph">DBMS_MACADM.UNAUTHORIZE_TTS_USER</code> statement.</span>
<div>
<p>For example:</p>
<pre dir="ltr">EXEC DBMS_MACADM.UNUTHORIZE_TTS_USER(&#39;DP_MGR&#39;, &#39;HR_TS&#39;);
</pre>
<p>See <a href="apis_admin.htm#GUID-774B88EA-66A7-47DB-AAD8-8A8212CED678" title="The UNAUTHORIZE_TTS_USER procedure removes from authorization users who had previously been granted the authorization to perform Oracle Data Pump transportable tablespace operations.">UNAUTHORIZE_TTS_USER Procedure</a> for more information.</p>
</div>
</li>
<li class="stepexpand"><span>If the user had transportable exported or used a network link to transportable import the contents of an entire database, then revoke the full database level Oracle Data Pump authorization.</span>
<div>
<p>For example:</p>
<pre dir="ltr">EXEC DBMS_MACADM.UNAUTHORIZE_DATAPUMP_USER(&#39;DP_MGR&#39;);
</pre></div>
</li>
<li class="stepexpand"><span>If the user who had performed a transportable import operation used a network link to perform the operation, then revoke the <code class="codeph">DV_DATAPUMP_NETWORK_LINK</code> role from this user.</span>
<div>
<p>For example:</p>
<pre dir="ltr">REVOKE DV_DATAPUMP_NETWORK_LINK FROM DP_MGR;
</pre></div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-0CDADB19-E938-407C-A0D8-6994B2F1A1FD__GUID-A019CEBA-3CF6-4E8B-B357-BD0B24B2AEEE">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="views.htm#GUID-2FA377BE-C508-4B13-A86E-B0EF94124F06" title="The DVSYS.DBA_DV_TTS_AUTH data dictionary view lists users who have been granted authorization through the DBMS_MACADM.AUTHORIZE_TTS_USER procedure to perform Oracle Data Pump transportable operations.">DVSYS.DBA_DV_TTS_AUTH View</a></p>
</li>
<li>
<p><a href="apis_admin.htm#GUID-774B88EA-66A7-47DB-AAD8-8A8212CED678" title="The UNAUTHORIZE_TTS_USER procedure removes from authorization users who had previously been granted the authorization to perform Oracle Data Pump transportable tablespace operations.">UNAUTHORIZE_TTS_USER Procedure</a></p>
</li>
<li>
<p><a href="apis_admin.htm#GUID-416BFDD0-26A6-4859-BC2A-23C4BF89D47B" title="The UNAUTHORIZE_DATAPUMP_USER procedure revokes the authorization that was granted by the AUTHORIZE_DATAPUMP_USER procedure.">UNAUTHORIZE_DATAPUMP_USER Procedure</a></p>
</li>
<li>
<p><a href="db_objects.htm#GUID-2FBCA546-F12B-4AC7-B3C7-5DECC7740AD5" title="The DV_DATAPUMP_NETWORK_LINK role is used for Data Pump import operations.">DV_DATAPUMP_NETWORK_LINK Data Pump Network Link Role</a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="DVADM70317"></a>
<div class="props_rev_3"><a id="GUID-182867A6-4CF5-447C-A4B7-FB7CC24D3CC2"></a>
<h3 id="DVADM-GUID-182867A6-4CF5-447C-A4B7-FB7CC24D3CC2" class="sect3">Guidelines for Exporting or Importing Data in a Database Vault Environment</h3>
<div>
<p>After you grant the Oracle Data Pump database administrator the proper authorization, this can perform any export or import operations that are necessary.</p>
<p>Before this user begins work, he or she should follow these guidelines:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Create a full backup of the database datafiles.</span> This way, if you or other users do not like the newly-imported data, then you easily can revert the database to its previous state. This guideline is especially useful if an intruder had managed to modify Oracle Data Pump exported data to use his or her own policies.</p>
</li>
<li>
<p><span class="bold">Decide how to handle exporting and importing multiple schemas or tables.</span> You cannot specify multiple schemas or tables in the <code class="codeph">DBMS_MACADM.AUTHORIZE_DATAPUMP_USER</code> procedure, but you can use either of the following methods to accomplish this task:</p>
<ul style="list-style-type: disc;">
<li>
<p>Run the <code class="codeph">DBMS_MACADM.AUTHORIZE_DATAPUMP_USER</code> procedure for each schema or table, and then specify the list of these objects in the <code class="codeph">SCHEMAS</code> or <code class="codeph">TABLES</code> parameter of the <code class="codeph">EXPDP</code> and <code class="codeph">IMPDP</code> utilities.</p>
</li>
<li>
<p>Perform a full database export or import operation. If so, see the next guideline.</p>
</li>
</ul>
</li>
<li>
<p><span class="bold">When performing an export or import operation for an entire database, set the EXPDP or IMPDP FULL option to Y.</span> Remember that this setting will capture the <code class="codeph">DVSYS</code> schema, so ensure that the user has been granted the <code class="codeph">DV_OWNER</code> role.</p>
</li>
</ul>
<p>Note the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>You cannot use the legacy <code class="codeph">EXP</code> and <code class="codeph">IMP</code> utilities with the direct path option (<code class="codeph">direct=y</code>) if Oracle Database Vault is enabled.</p>
</li>
<li>
<p>Users who have been granted Database Vault-specific Oracle Data Pump authorization through the <code class="codeph">DBMS_MACADM.AUTHORIZE_DATAPUMP_USER</code> procedure or transportable tablespace authorization through the <code class="codeph">DBMS_MACADM.AUTHORIZE_TTS_USER</code> procedure can export and import database objects, but they cannot perform other activities, such as <code class="codeph">SELECT</code> queries on schema tables to which they normally do not have access. Similarly, users are not permitted to perform Data Pump operations on objects outside the designated data objects.</p>
</li>
<li>
<p>You must grant the <code class="codeph">DV_OWNER</code> role to users who want to export or import an entire database, because a full database export requires access to the <code class="codeph">DVSYS</code> schema, which stores the Oracle Database Vault policies. However, you cannot export the <code class="codeph">DVSYS</code> schema itself. Data Pump only exports the protection definitions. The target database must have the <code class="codeph">DVSYS</code> schema in it and Database Vault enabled before you can begin the import process.) Conversely, for a Data Pump import operation to apply the imported policies to the target database, it internally uses the <code class="codeph">DBMS_MACADM</code> PL/SQL package, which in turn requires the Data Pump user to have the <code class="codeph">DV_OWNER</code> role.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-182867A6-4CF5-447C-A4B7-FB7CC24D3CC2__GUID-3C2B5BFF-F602-4784-B6C7-AD393F5A7444">
<p class="notep1">See Also:</p>
<a class="olink SUTIL100" target="_blank" href="../SUTIL/GUID-17FAE261-0972-4220-A2E4-44D479F519D4.htm#SUTIL100"><span><cite>Oracle Database Utilities</cite></span></a> for detailed information about Oracle Data Pump</div>
</div>
</div>
</div>
<a id="DVADM70319"></a>
<div class="props_rev_3"><a id="GUID-7B4B7730-24EC-4346-A8EF-536204F1E07D"></a>
<h2 id="DVADM-GUID-7B4B7730-24EC-4346-A8EF-536204F1E07D" class="sect2">Using Oracle Scheduler with Oracle Database Vault</h2>
<div>
<p>Users who are responsible for scheduling database jobs must have Oracle Database Vault-specific authorization.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="dba.htm#GUID-8232EB36-8AFA-4ABE-822B-7CEDC951923F" title="The level of authorization that you must grant depends on schema in which the administrator wants to perform a task.">About Using Oracle Scheduler with Oracle Database Vault</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-87F554B8-CE24-4A0B-9D40-543BB5A445B5" title="You can authorize a user to schedule database jobs in a Database Vault environment.">Granting a Job Scheduling Administrator Authorization for Oracle Database Vault</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-35676820-CF9D-40B4-95CA-16E3145F0C6D" title="You can revoke authorization from a user for scheduling database jobs.">Revoking Authorization from Job Scheduling Administrators</a></p>
</li>
</ul>
</div>
<a id="DVADM70320"></a>
<div class="props_rev_3"><a id="GUID-8232EB36-8AFA-4ABE-822B-7CEDC951923F"></a>
<h3 id="DVADM-GUID-8232EB36-8AFA-4ABE-822B-7CEDC951923F" class="sect3">About Using Oracle Scheduler with Oracle Database Vault</h3>
<div>
<p>The level of authorization that you must grant depends on schema in which the administrator wants to perform a task.</p>
<p>Possible scenarios are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">An administrator wants to schedule a job in his or her own schema.</span> An administrator who has been granted privileges to schedule database jobs can continue to do so without any Oracle Database Vault-specific authorizations, unless this schema is protected by a realm. In that case, ensure that this user is authorized to access the realm. See <a href="cfrealms.htm#GUID-18D6FFCB-42C2-49D1-9F53-BADE7B0754AB" title="Realm authorizations establish the set of database accounts and roles that manage or access objects protected in realms.">About Realm Authorization</a> for instructions on granting a user realm authorization.</p>
</li>
<li>
<p><span class="bold">An administrator wants to run a job in another schema, but this job does not access any Oracle Database Vault realm or command rule protected object.</span> In this case, this user only needs job related system privileges, not the Oracle Database Vault privileges.</p>
</li>
<li>
<p><span class="bold">An administrator wants to run a job under the schema of another user, including any schema in the database or a remote database.</span> If this job accesses an Oracle Database Vault realm or command rule protected object, then you must grant this user Database Vault-specific authorization by using the <code class="codeph">DBMS_MACADM.AUTHORIZE_SCHEDULER_USER</code> procedure. This authorization applies to both background and foreground jobs. For background jobs, the authorization applies to the last user who created or modified the job. In addition, ensure that the schema owner (the protected schema in which the job is created) authorized to the realm.</p>
<p>Later on, you can revoke this authorization by using the <code class="codeph">DBMS_MACADM.UNAUTHORIZE_SCHEDULER_USER</code> procedure. If the schema is not protected by a realm, then you do not need to run the <code class="codeph">DBMS_MACADM.AUTHORIZE_SCHEDULER_USER</code> procedure for the user.</p>
</li>
</ul>
</div>
</div>
<a id="DVADM70321"></a>
<div class="props_rev_3"><a id="GUID-87F554B8-CE24-4A0B-9D40-543BB5A445B5"></a>
<h3 id="DVADM-GUID-87F554B8-CE24-4A0B-9D40-543BB5A445B5" class="sect3">Granting a Job Scheduling Administrator Authorization for Oracle Database Vault</h3>
<div>
<p>You can authorize a user to schedule database jobs in a Database Vault environment.</p>
<ol>
<li class="stepexpand"><span>Log into the database instance as a user who has been granted the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role.</span>
<div>
<p>Only a user who has been granted either of these roles can grant the necessary authorization.</p>
</div>
</li>
<li class="stepexpand" id="GUID-87F554B8-CE24-4A0B-9D40-543BB5A445B5__CHDCIACI"><span>Ensure that the user to whom you want to grant authorization has been granted system privileges to schedule database jobs.</span>
<div>
<p>These privileges include any of the following: <code class="codeph">CREATE JOB</code>, <code class="codeph">CREATE ANY JOB</code>, <code class="codeph">CREATE EXTERNAL JOB</code>, <code class="codeph">EXECUTE ANY PROGRAM</code>, <code class="codeph">EXECUTE ANY CLASS</code>, <code class="codeph">MANAGE SCHEDULER</code>. The <code class="codeph">DBA</code> and <code class="codeph">SCHEDULER_ADMIN</code> roles provide these privileges; however, when Oracle Database Vault is enabled, the privileges are revoked from these roles.</p>
<p>For example:</p>
<pre dir="ltr">SELECT GRANTEE, PRIVILEGE FROM DBA_SYS_PRIVS 
 WHERE PRIVILEGE IN (&#39;CREATE JOB&#39;, &#39;CREATE ANY JOB&#39;);
</pre></div>
</li>
<li class="stepexpand"><span>Grant this user Oracle Database Vault authorization.</span>
<div>
<p>For example, to authorize the user <code class="codeph">job_mgr</code> to schedule jobs for any schema in the database:</p>
<pre dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_SCHEDULER_USER(&#39;JOB_MGR&#39;);
</pre>
<p>Optionally, you can restrict <code class="codeph">job_mgr</code>&#39;s activities to a specific schema, as follows:</p>
<pre dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_SCHEDULER_USER(&#39;JOB_MGR&#39;, &#39;HR&#39;);
</pre>
<p>See <a href="apis_admin.htm#GUID-72FC758D-9427-4BCB-93DD-8EF86A4D6DF5" title="The AUTHORIZE_SCHEDULER_USER procedure grants a user authorization to schedule database jobs when Oracle Database Vault is enabled.">AUTHORIZE_SCHEDULER_USER Procedure</a> for detailed information about this procedure.</p>
</div>
</li>
<li class="stepexpand"><span>Ensure that the user has been authorized by querying the <code class="codeph">DVSYS.DBA_DV_JOB_AUTH</code> data dictionary view as follows:</span>
<div>
<pre dir="ltr">SELECT GRANTEE,SCHEMA FROM DVSYS.DBA_DV_JOB_AUTH WHERE GRANTEE = &#39;<span class="italic">user_name</span>&#39;;
</pre>
<p>See <a href="views.htm#GUID-0C51B94F-AAB7-4E37-BAF5-946A1580EFD3" title="The DVSYS.DBA_DV_JOB_AUTH data dictionary view lists the authorizations for using Oracle Scheduler in an Oracle Database Vault environment.">DVSYS.DBA_DV_JOB_AUTH View</a> for more information about this view.</p>
</div>
</li>
</ol>
</div>
</div>
<a id="DVADM70322"></a>
<div class="props_rev_3"><a id="GUID-35676820-CF9D-40B4-95CA-16E3145F0C6D"></a>
<h3 id="DVADM-GUID-35676820-CF9D-40B4-95CA-16E3145F0C6D" class="sect3">Revoking Authorization from Job Scheduling Administrators</h3>
<div>
<p>You can revoke authorization from a user for scheduling database jobs.</p>
<ol>
<li class="stepexpand" id="GUID-35676820-CF9D-40B4-95CA-16E3145F0C6D__CHDJEBIH"><span>Query the <code class="codeph">DVSYS.DBA_DV_JOB_AUTH</code> data dictionary view to find the user&#39;s authorization.</span>
<div>
<pre dir="ltr">SELECT GRANTEE, SCHEMA FROM DVSYS.DBA_DV_JOB_AUTH WHERE GRANTEE=&#39;<span class="italic">username</span>&#39;;
</pre></div>
</li>
<li class="stepexpand"><span>Use the information you gathered from the preceding step to build the <code class="codeph">DBMS_MACADM.UNAUTHORIZE_SCHEDULER_USER</code> command.</span>
<div>
<p>For example:</p>
<pre dir="ltr">EXEC DBMS_MACADM.UNAUTHORIZE_SCHEDULER_USER(&#39;JOB_MGR&#39;);
</pre>
<p>Ensure that this unauthorization complements the original authorization action. In other words, if you originally gave <code class="codeph">job_mgr</code> authorization over the entire database, then the following command will not work:</p>
<pre dir="ltr">EXEC DBMS_MACADM.UNAUTHORIZE_SCHEDULER_USER(&#39;JOB_MGR&#39;, &#39;HR&#39;);
</pre>
<p>See <span class="q">&#34;<a href="apis_admin.htm#GUID-9861403F-0D92-4FBE-8ED3-985DAF60B9F8" title="The UNAUTHORIZE_SCHEDULER_USER procedure revokes the authorization that was granted by the AUTHORIZE_SCHEDULER_USER procedure.">UNAUTHORIZE_SCHEDULER_USER Procedure</a>&#34;</span> for more information.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<a id="DVADM70323"></a>
<div class="props_rev_3"><a id="GUID-BC8B8432-223A-49CF-B215-4E0938CAF1FA"></a>
<h2 id="DVADM-GUID-BC8B8432-223A-49CF-B215-4E0938CAF1FA" class="sect2">Oracle Recovery Manager and Oracle Database Vault</h2>
<div>
<p>You can use Recovery Manager (RMAN) in an Oracle Database Vault environment.</p>
<p>The functionality of RMAN with Oracle Database Vault is the same as its functionality in a standard Oracle Database environment.</p>
<div class="infoboxnotealso" id="GUID-BC8B8432-223A-49CF-B215-4E0938CAF1FA__GUID-F5879D76-29CE-4027-9735-70F0AE1F48D3">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink BRADV8001" target="_blank" href="../BRADV/rcmintro.htm#BRADV8001"><span><cite>Oracle Database Backup and Recovery User&rsquo;s Guide</cite></span></a></p>
</li>
<li>
<p><a class="olink RCMRF001" target="_blank" href="../RCMRF/rcmcomma.htm#RCMRF001"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="DVADM70324"></a>
<div class="props_rev_3"><a id="GUID-702D094B-8308-4955-9ADA-267D18B08A46"></a>
<h2 id="DVADM-GUID-702D094B-8308-4955-9ADA-267D18B08A46" class="sect2">Privileges for Using Oracle Streams with Oracle Database Vault</h2>
<div>
<p>If you want to use Oracle Streams in an Oracle Database Vault environment, then you must have the correct privileges.</p>
<p>The privileges that you must have are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>You must be granted the <code class="codeph">DV_STREAMS_ADMIN</code> role in order to configure the Oracle Streams capture process.</p>
</li>
<li>
<p>Before you can apply changes to any tables that are protected by a realm, you must be authorized to have access to that realm. For example:</p>
<pre dir="ltr">EXEC DBMS_MACADM.ADD_AUTH_TO_REALM(&#39;<span class="italic">realm_name</span>&#39;,&#39;<span class="italic">username</span>&#39;);
</pre></li>
</ul>
<div class="infoboxnotealso" id="GUID-702D094B-8308-4955-9ADA-267D18B08A46__GUID-D8A9C40E-A3A9-40D6-B6BE-DE5F402A5936">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="db_objects.htm#GUID-50E6727C-3C7E-4E03-96D0-4D91DC9BF7CC" title="The DV_STREAMS_ADMIN role is used with Oracle Streams.">DV_STREAMS_ADMIN Oracle Streams Configuration Role</a> for more information about the <code class="codeph">DV_STREAMS_ADMIN</code> role</p>
</li>
<li>
<p><a href="apis_realms.htm#GUID-8722087E-3D68-4117-9662-57492E89A4A5" title="The ADD_AUTH_TO_REALM procedure authorizes a user or role to access a realm as an owner or a participant.">ADD_AUTH_TO_REALM Procedure</a> for more information about the <code class="codeph">DBMS_MACADM.ADD_AUTH_TO_REALM</code> procedure</p>
</li>
</ul>
</div>
</div>
</div>
<a id="DVADM71237"></a>
<div class="props_rev_3"><a id="GUID-83F623CD-C0CC-47BB-8CF9-1F55DE44C7A3"></a>
<h2 id="DVADM-GUID-83F623CD-C0CC-47BB-8CF9-1F55DE44C7A3" class="sect2">Privileges for Using XStream with Oracle Database Vault</h2>
<div>
<p>If you want to use XStream in an Oracle Database Vault environment, then you must have the appropriate privileges.</p>
<p>These privileges are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>You must be granted the <code class="codeph">DV_XSTREAM_ADMIN</code> role in order to configure the XStream.</p>
</li>
<li>
<p>Before you can apply changes to any tables that are protected by a realm, you must be authorized to have access to that realm. For example:</p>
<pre dir="ltr">EXEC DBMS_MACADM.ADD_AUTH_TO_REALM(&#39;<span class="italic">realm_name</span>&#39;,&#39;<span class="italic">username</span>&#39;);
</pre></li>
</ul>
<div class="infoboxnotealso" id="GUID-83F623CD-C0CC-47BB-8CF9-1F55DE44C7A3__GUID-D5F539EE-0F0C-4E55-9CE5-A021AE3502A3">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="db_objects.htm#GUID-2EC5160C-E4AF-4A2B-AB47-4ED7D463AB2B" title="The DV_XSTREAM_ADMIN role is used for Oracle XStream.">DV_XSTREAM_ADMIN XStream Administrative Role</a> for more information about the <code class="codeph">DV_XSTREAM_ADMIN</code> role</p>
</li>
<li>
<p><a href="apis_realms.htm#GUID-8722087E-3D68-4117-9662-57492E89A4A5" title="The ADD_AUTH_TO_REALM procedure authorizes a user or role to access a realm as an owner or a participant.">ADD_AUTH_TO_REALM Procedure</a> for more information about the <code class="codeph">DBMS_MACADM.ADD_AUTH_TO_REALM</code> procedure</p>
</li>
</ul>
</div>
</div>
</div>
<a id="DVADM71238"></a>
<div class="props_rev_3"><a id="GUID-8BC01B07-01AE-4973-9E72-BD637D773D01"></a>
<h2 id="DVADM-GUID-8BC01B07-01AE-4973-9E72-BD637D773D01" class="sect2">Privileges for Using Oracle GoldenGate in with Oracle Database Vault</h2>
<div>
<p>If you want to use Oracle GoldenGate in an Oracle Database Vault environment, then you must have the appropriate privileges.</p>
<p>These privileges are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>You must be granted the <code class="codeph">DV_GOLDENGATE_ADMIN</code> role in order to configure the Oracle GoldenGate.</p>
</li>
<li>
<p>You must be granted the <code class="codeph">DV_GOLDENGATE_REDO_ACCESS</code> role if you want to use the Oracle GoldenGate <code class="codeph">TRANLOGOPTIONS DBLOGREADER</code> method to access redo logs.</p>
</li>
<li>
<p>You must be granted the <code class="codeph">DV_ACCTMGR</code> role before you can create users on the replicated side.</p>
</li>
<li>
<p>Before you can apply changes to any tables that are protected by a realm, you must be authorized to have access to that realm. For example:</p>
<pre dir="ltr">EXEC DBMS_MACADM.ADD_AUTH_TO_REALM(&#39;<span class="italic">realm_name</span>&#39;,&#39;<span class="italic">username</span>&#39;);
</pre></li>
</ul>
<div class="infoboxnotealso" id="GUID-8BC01B07-01AE-4973-9E72-BD637D773D01__GUID-31C592D2-EAD0-4449-BD2D-FDD079F723D3">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="db_objects.htm#GUID-37C616E2-F56B-4A69-A971-FE07FC352A4D" title="The DV_GOLDENGATE_ADMIN role is used with Oracle GoldenGate.">DV_GOLDENGATE_ADMIN GoldenGate Administrative Role</a> for more information about the <code class="codeph">DV_GOLDENGATE_ADMIN</code> role</p>
</li>
<li>
<p><a href="db_objects.htm#GUID-6C430465-D2AE-4FEF-AAF2-5D81A84E3039" title="The DV_GOLDENGATE_REDO_ACCESS role is used with Oracle GoldenGate.">DV_GOLDENGATE_REDO_ACCESS GoldenGate Redo Log Role</a> for more information about the <code class="codeph">DV_GOLDENGATE_REDO_ACCESS</code> role</p>
</li>
<li>
<p><a href="apis_realms.htm#GUID-8722087E-3D68-4117-9662-57492E89A4A5" title="The ADD_AUTH_TO_REALM procedure authorizes a user or role to access a realm as an owner or a participant.">ADD_AUTH_TO_REALM Procedure</a> for more information about the <code class="codeph">DBMS_MACADM.ADD_AUTH_TO_REALM</code> procedure</p>
</li>
</ul>
</div>
</div>
</div>
<a id="DVADM71123"></a>
<div class="props_rev_3"><a id="GUID-D2913E58-F3D7-4D6D-8997-8DACF943C4EA"></a>
<h2 id="DVADM-GUID-D2913E58-F3D7-4D6D-8997-8DACF943C4EA" class="sect2">Using Data Masking in an Oracle Database Vault Environment</h2>
<div>
<p>You must have the correct authorization to perform data masking in an Oracle Database Vault environment.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="dba.htm#GUID-028612C3-3282-4257-9228-9E569B2AF911" title="In an Oracle Database Vault-enabled database, only users who have Database Vault authorizations can mask data in Database Vault-protected database objects.">About Data Masking in an Oracle Database Vault Enabled Database</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-C34967BE-39C4-4354-9DC4-2D2F5C2E1822" title="You can add data masking users to the Oracle Default Component Protection realm to give them data dictionary realm authorizations.">Adding Data Masking Users to the Data Dictionary Realm Authorizations</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-F79013E0-D11B-4868-A0B6-65CF488B3542" title="To give users access to tables or schemas that they want to mask, you must authorize them for the appropriate realm.">Giving Users Access to Tables or Schemas That They Want to Mask</a></p>
</li>
<li>
<p><a href="dba.htm#GUID-E13C83CF-177D-469A-89A2-1842AA2C004F" title="You must have privileges to manage tables, packages, and triggers before you can use data masking in an Oracle Database Vault environment.">Creating a Command Rule to Control Data Masking Privileges</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-D2913E58-F3D7-4D6D-8997-8DACF943C4EA__GUID-E8D75F4C-4409-43DF-A9CE-F48C88F254BF">
<p class="notep1">See Also:</p>
<p><a class="olink RATUG04000" target="_blank" href="../RATUG/GUID-B0F81E6F-9256-44BA-BA14-6CB582EAFD60.htm#RATUG04000"><span><cite>Oracle Database Testing Guide</cite></span></a> for more information about data masking</p>
</div>
</div>
<a id="DVADM71124"></a>
<div class="props_rev_3"><a id="GUID-028612C3-3282-4257-9228-9E569B2AF911"></a>
<h3 id="DVADM-GUID-028612C3-3282-4257-9228-9E569B2AF911" class="sect3">About Data Masking in an Oracle Database Vault Enabled Database</h3>
<div>
<p>In an Oracle Database Vault-enabled database, only users who have Database Vault authorizations can mask data in Database Vault-protected database objects.</p>
<p>In a non-Database Vault environment, users who have been granted the <code class="codeph">SELECT_CATALOG_ROLE</code> and <code class="codeph">DBA</code> roles can perform data masking. However, with Database Vault, users must have additional privileges. This section describes three ways that you can use to enable users to mask data in Database Vault-protected objects.</p>
<p>If users do not have the correct privileges, then the following errors can occur while creating the masking definition or when the job is executing:</p>
<pre dir="ltr">ORA-47400: Command Rule violation for string on string 

ORA-47401: Realm violation for string on string. 

ORA-47408: Realm violation for the EXECUTE command 

ORA-47409: Command Rule violation for the EXECUTE command 

ORA-01301: insufficient privileges
</pre></div>
</div>
<a id="DVADM71125"></a>
<div class="props_rev_3"><a id="GUID-C34967BE-39C4-4354-9DC4-2D2F5C2E1822"></a>
<h3 id="DVADM-GUID-C34967BE-39C4-4354-9DC4-2D2F5C2E1822" class="sect3">Adding Data Masking Users to the Data Dictionary Realm Authorizations</h3>
<div>
<p>You can add data masking users to the Oracle Default Component Protection realm to give them data dictionary realm authorizations.</p>
<div class="section">
<p>The Oracle Data Dictionary controls access to the Oracle Database catalog schemas, such as <code class="codeph">SYS</code> and <code class="codeph">SYSTEM</code>. (See <a href="cfrealms.htm#GUID-3DE167E8-BD1D-48C4-A0EE-8E6FDFFC5CCA" title="Oracle Database Vault provides default realms, which are regular realms, not mandatory realms.">Default Realms</a> for a full list of these schemas.) It also controls the ability to grant system privileges and database administrator roles. If you add users to the Oracle Default Component Protection realm, and assuming these users already have the privileges associated with the Oracle Data Dictionary, then these users will have these same privileges in a Database Vault environment. Therefore, if you do add a user to this realm, ensure that this user is a trusted user.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>To add a user to the Oracle Default Component Protection realm, use the <code class="codeph">DBMS_MACADM.ADD_AUTH_TO_REALM</code> procedure.</p>
</li>
</ul>
<p>For example:</p>
<pre dir="ltr">BEGIN
 DBMS_MACADM.ADD_AUTH_TO_REALM(
  realm_name   =&gt; &#39;Oracle Default Component Protection Realm&#39;, 
  grantee      =&gt; &#39;DBA_JSMITH&#39;, 
  auth_options =&gt; DBMS_MACUTL.G_REALM_AUTH_PARTICIPANT);
END;
/
</pre></div>
<!-- class="section" --></div>
</div>
<a id="DVADM71126"></a>
<div class="props_rev_3"><a id="GUID-F79013E0-D11B-4868-A0B6-65CF488B3542"></a>
<h3 id="DVADM-GUID-F79013E0-D11B-4868-A0B6-65CF488B3542" class="sect3">Giving Users Access to Tables or Schemas That They Want to Mask</h3>
<div>
<p>To give users access to tables or schemas that they want to mask, you must authorize them for the appropriate realm.</p>
<div class="section">
<p>If the table or schema of a table that is to be data masked is in a realm, then you must add the user responsible for data masking to the realm authorization as a participant or owner. If the table or schema has dependent objects that are in other realm-protected tables, then you must grant the user participant or owner authorization for those realms as well.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>To authorize users for data masking to a realm that protects the objects they want to data mask, use the <code class="codeph">DBMS_MACADM.ADD_AUTH_TO_REALM</code> procedure.</p>
</li>
</ul>
<p>The following example shows how to grant user <code class="codeph">DBA_JSMITH</code> authorization for the <code class="codeph">HR.EMPLOYEES</code> table, which is protected by a realm called Business Apps Realm:</p>
<pre dir="ltr">BEGIN
 DBMS_MACADM.ADD_AUTH_TO_REALM(
  realm_name   =&gt; &#39;Business Apps Realm&#39;, 
  grantee      =&gt; &#39;DBA_JSMITH&#39;, 
  auth_options =&gt; DBMS_MACUTL.G_REALM_AUTH_PARTICIPANT;
END;
/
</pre></div>
<!-- class="section" --></div>
</div>
<a id="DVADM71127"></a>
<div class="props_rev_3"><a id="GUID-E13C83CF-177D-469A-89A2-1842AA2C004F"></a>
<h3 id="DVADM-GUID-E13C83CF-177D-469A-89A2-1842AA2C004F" class="sect3">Creating a Command Rule to Control Data Masking Privileges</h3>
<div>
<p>You must have privileges to manage tables, packages, and triggers before you can use data masking in an Oracle Database Vault environment.</p>
<div class="section">
<p>For data masking, users must have the <code class="codeph">CREATE TABLE</code>, <code class="codeph">SELECT TABLE</code>, <code class="codeph">ALTER TABLE</code>, and <code class="codeph">DROP TABLE</code> privileges for the masking objects and if there are any dependent objects to be created, the user must have the appropriate privileges such as <code class="codeph">CREATE PACKAGE</code>, <code class="codeph">CREATE TRIGGER</code>, and so on.</p>
<p>You can create command rules to control data masking privileges at a granular level. To do so, create a command rule that can either prevent or allow the user access to objects that must have to be data masked. For example, you can create a command rule called Allow Data Masking that checks if the user is in a list of users who are responsible for data masking. If the user logging in is one of these users, then the command rule evaluates to true and the user is permitted to create the data mask for the protected object.</p>
<p>To create a command rule that controls data masking privileges:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Create the rule set rule.</span>
<div>
<p>For example:</p>
<pre dir="ltr">BEGIN
 DBMS_MACADM.CREATE_RULE(
  rule_name  =&gt; &#39;Is HDRISCOLL or DBA_JSMITH User&#39;, 
  rule_expr  =&gt;&#39;USER IN(&#39;&#39;HDRISCOLL&#39;&#39;,&#39;&#39;DBA_JSMITH&#39;&#39;)&#39;;
END;
/
</pre></div>
</li>
<li class="stepexpand"><span>Create a rule set and then add the rule to it:</span>
<div>
<pre dir="ltr">BEGIN
 DBMS_MACADM.CREATE_RULE_SET(
  rule_set_name    =&gt; &#39;Allow Data Masking&#39;, 
  description      =&gt; &#39;Allows users HDRISCOLL and DBA_JSMITH access&#39;, 
  enabled          =&gt; &#39;Y&#39;,
  eval_options     =&gt; 1,
  audit_options    =&gt; 1,
  fail_options     =&gt; 1,
  fail_message     =&gt; &#39;You do not have access to this object.&#39;,
  fail_code        =&gt; 20461,
  handler_options  =&gt; 0, 
  is_static        =&gt; TRUE);
END;
/
BEGIN
 DBMS_MACADM.ADD_RULE_TO_RULE_SET(
  rule_set_name =&gt; &#39;Allow Data Masking&#39;, 
  rule_name     =&gt; &#39;Is HDRISCOLL or DBA_JSMITH User&#39;),
  rule_order    =&gt; 1);
END;
/
</pre></div>
</li>
<li class="stepexpand"><span>Create a command rule and then add this rule to it:</span>
<div>
<pre dir="ltr">BEGIN
 DBMS_MACADM.CREATE_COMMAND_RULE(
  command         =&gt; &#39;CREATE TABLE&#39;, 
  rule_set_name   =&gt; &#39;Allow Data Masking&#39;, 
  object_owner    =&gt; &#39;HR&#39;, 
  object_name     =&gt; &#39;EMPLOYEES&#39;, 
  enabled         =&gt; DBMS_MACUTL.G_YES);
END; 
/
</pre></div>
</li>
</ol>
</div>
</div>
</div>
<a id="DVADM71354"></a>
<div class="props_rev_3"><a id="GUID-517E9611-546B-43D9-8C54-37037AF0B198"></a>
<h2 id="DVADM-GUID-517E9611-546B-43D9-8C54-37037AF0B198" class="sect2">Converting a Standalone Oracle Database to a PDB and Plugging It into a CDB</h2>
<div>
<p>You can convert a standalone Oracle Database Release 12<span class="italic">c</span> or later database to a PDB, and then plug this PDB into a CDB.</p>
<ol>
<li class="stepexpand"><span>Connect to the root as a user who has been granted the <code class="codeph">DV_OWNER</code> role.</span>
<div>
<p>For example:</p>
<pre dir="ltr">sqlplus c##sec_admin
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Grant the <code class="codeph">DV_PATCH_ADMIN</code> role to user <code class="codeph">SYS</code> with <code class="codeph">CONTAINER = CURRENT</code>.</span>
<div>
<pre dir="ltr">GRANT DV_PATCH_ADMIN TO SYS CONTAINER = CURRENT;
</pre></div>
</li>
<li class="stepexpand"><span>In the root, connect as user <code class="codeph">SYS</code> with the <code class="codeph">SYSOPER</code> system privilege.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT SYS AS SYSOPER <span class="italic">-- Or, CONNECT SYS@hrpdb AS SYSOPER</span>
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Restart the database in read-only mode.</span>
<div>
<p>For example:</p>
<pre dir="ltr">SHUTDOWN IMMEDIATE
STARTUP MOUNT
ALTER DATABASE OPEN READ ONLY
</pre></div>
</li>
<li class="stepexpand"><span>Connect to the Database Vault-enabled database as a user who has the <code class="codeph">DV_OWNER</code> role.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CONNECT sec_admin@dv_db
</pre></div>
</li>
<li class="stepexpand"><span>Grant the <code class="codeph">DV_PATCH_ADMIN</code> role to user <code class="codeph">SYS</code> on this database.</span>
<div>
<pre dir="ltr">GRANT DV_PATCH_ADMIN TO SYS;
</pre></div>
</li>
<li class="stepexpand"><span>Optionally, run the <code class="codeph">DBMS_PDB.CHECK_PLUG_COMPATIBILITY</code> function to determine whether the unplugged PDB is compatible with the CDB.</span>
<div>
<p>When you run the function, set the following parameters:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">pdb_descr_file</code>: Set this parameter to the full path to the XML file that will contain a description of the PDB.</p>
</li>
<li>
<p><code class="codeph">store_report</code>: Set this parameter to indicate whether you want to generate a report if the PDB is not compatible with the CDB. Set it to <code class="codeph">TRUE</code> to generate a report or <code class="codeph">FALSE</code> to not generate a report. A generated report is stored in the <code class="codeph">PDB_PLUG_IN_VIOLATIONS</code> temporary table and is generated only if the PDB is not compatible with the CDB.</p>
</li>
</ul>
<p>For example, to determine whether a PDB described by the <code class="codeph">/disk1/usr/dv_db_pdb.xml</code> file is compatible with the current CDB, run the following PL/SQL block:</p>
<pre dir="ltr">SET SERVEROUTPUT ON
DECLARE
  compatible CONSTANT VARCHAR2(3) := 
    CASE DBMS_PDB.CHECK_PLUG_COMPATIBILITY(
           pdb_descr_file =&gt; &#39;/disk1/usr/dv_db_pdb.xml&#39;,
           store_report   =&gt; TRUE)
    WHEN TRUE THEN &#39;YES&#39;
    ELSE &#39;NO&#39;
END;
BEGIN
  DBMS_OUTPUT.PUT_LINE(compatible);
END;
/
</pre>
<p>If the output is <code class="codeph">YES</code>, then the PDB is compatible, and you can continue with the next step.</p>
<p>If the output is <code class="codeph">NO</code>, then the PDB is not compatible. You can check the <code class="codeph">PDB_PLUG_IN_VIOLATIONS</code> temporary table to see why it is not compatible.</p>
</div>
</li>
<li class="stepexpand"><span>Create an XML file that describes the PDB.</span>
<div>
<p>For example:</p>
<pre dir="ltr">BEGIN
  DBMS_PDB.DESCRIBE(
    pdb_descr_file =&gt; &#39;/disk1/oracle/dv_db.xml&#39;);
END;
/
</pre></div>
</li>
<li class="stepexpand"><span>Run the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement, and specify the XML file in the <code class="codeph">USING</code> clause. Specify other clauses when they are required.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CREATE PLUGGABLE DATABASE dv_db_pdb AS CLONE USING &#39;dv_db.xml&#39; NOCOPY;
</pre></div>
</li>
<li class="stepexpand"><span>Connect to the PDB that you just created as user <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege.</span>
<div>
<pre dir="ltr">CONNECT SYS@dv_db_pdb AS SYSDBA
</pre></div>
</li>
<li class="stepexpand"><span>Execute the <code class="codeph">noncdb_to_pdb.sql</code> script.</span>
<div>
<pre dir="ltr">@$ORACLE_HOME/rdbms/admin/noncdb_to_pdb.sql
</pre></div>
</li>
<li class="stepexpand"><span>Open this PDB in a read-write restricted mode.</span>
<div>
<pre dir="ltr">ALTER PLUGGABLE DATABASE dv_db_pdb OPEN READ WRITE RESTRICTED;
</pre></div>
</li>
<li class="stepexpand"><span>Run the following procedure to synchronize the PDB:</span>
<div>
<pre dir="ltr">EXECUTE DBMS_PDB.SYNC_PDB;
</pre></div>
</li>
<li class="stepexpand"><span>Connect to the root as a user who has been granted the <code class="codeph">DV_OWNER</code> role.</span>
<div>
<pre dir="ltr">sqlplus c##sec_admin
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Revoke the <code class="codeph">DV_PATCH_ADMIN</code> role from user <code class="codeph">SYS</code> with <code class="codeph">CONTAINER = CURRENT</code>.</span>
<div>
<pre dir="ltr">REVOKE DV_PATCH_ADMIN FROM SYS CONTAINER = CURRENT;
</pre></div>
</li>
<li class="stepexpand"><span>Connect to the legacy Database Vault-enabled database as user <code class="codeph">SYS</code> with the <code class="codeph">SYSOPER</code> system privilege.</span>
<div>
<pre dir="ltr">CONNECT SYS@dv_db_pdb AS SYSOPER
</pre></div>
</li>
<li class="stepexpand"><span>Restart this database.</span>
<div>
<p>For example:</p>
<pre dir="ltr">SHUTDOWN IMMMEDIATE
STARUP
</pre></div>
</li>
<li class="stepexpand"><span>Revoke the <code class="codeph">DV_PATCH_ADMIN</code> role from user <code class="codeph">SYS</code>.</span>
<div>
<pre dir="ltr">REVOKE DV_PATCH_ADMIN FROM SYS;
</pre></div>
</li>
</ol>
</div>
</div>
<a id="DVADM71239"></a>
<div class="props_rev_3"><a id="GUID-C962017D-313C-4AD8-85D5-B0772DAC3313"></a>
<h2 id="DVADM-GUID-C962017D-313C-4AD8-85D5-B0772DAC3313" class="sect2">Using the ORADEBUG Utility with Oracle Database Vault</h2>
<div>
<p>The <code class="codeph">ORADEBUG</code> utility is used primarily by Oracle Support to diagnose problems that may arise with an Oracle database.</p>
<div class="section">
<p>You can control whether users can run the <code class="codeph">ORADEBUG</code> utility in an Oracle Database Vault-enabled environment.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Log into the database instance as a user who has been granted the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role.</span></li>
<li class="stepexpand"><span>If necessary, find out if <code class="codeph">ORADEBUG</code> is already disabled or enabled.</span>
<div>
<pre dir="ltr">SELECT * FROM DVSYS.DBA_DV_ORADEBUG;
</pre></div>
</li>
<li class="stepexpand"><span>Run one of the following procedures:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>To disable the use of <code class="codeph">ORADEBUG</code>:</p>
<pre dir="ltr">EXEC DBMS_MACADM.DISABLE_ORADEBUG;
</pre></li>
<li>
<p>To enable the use of <code class="codeph">ORADEBUG</code>:</p>
<pre dir="ltr">EXEC DBMS_MACADM.ENABLE_ORADEBUG;
</pre></li>
</ul>
</div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-C962017D-313C-4AD8-85D5-B0772DAC3313__GUID-7B40C1D3-1F65-49CD-BA11-BA30F5491292">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="views.htm#GUID-258A12A8-3D9C-4A58-BFB2-239C7AA77E53" title="The DVSYS.DBA_DV_ORADEBUG data dictionary view indicates whether users can use the ORADEBUG utility in an Oracle Database Vault environment.">DVSYS.DBA_DV_ORADEBUG View</a></p>
</li>
<li>
<p><a href="apis_admin.htm#GUID-3F86EF7D-AEED-4AB5-99CD-BD07EACE11C5" title="The DISABLE_ORADEBUG procedure disables the use of the ORADEBUG utility in an Oracle Database Vault environment.">DISABLE_ORADEBUG Procedure</a></p>
</li>
<li>
<p><a href="apis_admin.htm#GUID-2CEFBBEA-4261-47A9-A10B-8043391B09A6" title="The ENABLE_ORADEBUG procedure enables the use of the ORADEBUG utility in an Oracle Database Vault environment.">ENABLE_ORADEBUG Procedure</a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment331">
<tr>
<td class="cellalignment359">
<table class="cellalignment336">
<tr>
<td class="cellalignment335"><a href="dv_ols.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment335"><a href="db_objects.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment361">
<table class="cellalignment334">
<tr>
<td class="cellalignment335"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment335"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment335"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment335"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment335"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment335"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>


</body></html>