<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-1627"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Oracle%20XML%20DB%20Content%20Connector"></a><title>Oracle XML DB Content Connector</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="Oracle XML DB Content Connector implements Content Repository API for Java (also known as JCR), a Java API standard developed by the Java community as JSR-170. You can access Oracle XML&nbsp;DB Repository using Oracle XML DB Content Connector."/>
<meta name="keywords" content="Oracle XML DB Content Connector, JCR, Content Repository API for Java, Java Content Repository API, JSR-170, Java Specification Request, 170, overview, repository, access using JCR, Oracle XML DB Repository access, JCR node types, nt:file, nt:folder, nt:folder, nt:file JCR node type, nt:folder JCR node type, files and folders, exposure, Oracle extensions to JCR node types, Oracle extensions, namespace, prefixes, ocjr, ocjr namespace prefix, jcr:data property, ojcr:folder, mix:referenceable, document view serialization, JCR, definition, document view serialization, standard metadata, user-defined metadata, jcr:content, hard link, JCR, weak link, getPath() Java method, CLASSPATH environment variable, for JCR, getting JCR repository objects, repository objects, OracleRepository, sample code to upload file, logging API, logging, compliance levels supported, restrictions, restrictions for Oracle XML DB Content Connector, XML schema, use with JCR, XML schema, registering an XML schema for JCR, registration with Oracle XML DB, for use with JCR, XML Schema data types, mapping to JCR node types, mapping from XML Schema data types, mapping from XML Schema global element declarations"/>
<meta name="dcterms.created" content="2016-12-08T13:53:25Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="XML DB Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41152-15"/>
<meta name="dcterms.isVersionOf" content="ADXDB"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="xdb_repos_events.htm" title="Previous" type="text/html"/>
<link rel="Next" href="xdb23jv1.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41152-15.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-F0007175-676B-4187-AF1F-FC24D5ADCDBF"></a> <span id="PAGE" style="display:none;">44/61</span> <!-- End Header -->
<script>
//<![CDATA[
window.name='xdb_jcr'
//]]>
</script> <script>
    function footdisplay(footnum,footnote) {
    var msg = window.open('', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');

    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">');
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>');
    msg.document.write('Footnote&amp;nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('');
    msg.document.write('<style> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
</script><noscript>
<p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
</noscript><a id="ADXDB2630"></a>
<h1 id="ADXDB-GUID-F0007175-676B-4187-AF1F-FC24D5ADCDBF" class="sect1"><span class="enumeration_chapter">31</span> Oracle XML DB Content Connector</h1>
<div>
<p>Oracle XML DB Content Connector implements Content Repository API for Java (also known as JCR), a Java API standard developed by the Java community as JSR-170. You can access Oracle XML&nbsp;DB Repository using Oracle XML DB Content Connector.</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="xdb_jcr.htm#GUID-83A8D8D9-4D02-4305-A599-22A4A2A06543" title="JCR 1.0 defines a standard Java API for applications to interact with content repositories. A content repository is a tree of nodes, each of which can have one or more child nodes. Each node has exactly one parent node, except for the root node, which has no parent.">About the Content Repository API for Java (JCR)</a></p>
</li>
<li>
<p><a href="xdb_jcr.htm#GUID-ECCC3B15-8448-44F7-990B-391709FC0406" title="Oracle XML DB Content Connector lets you access Oracle XML&nbsp;DB Repository using JCR 1.0 Java. Your applications can run either in a standalone Java Virtual Machine (JVM) or a J2EE container. Files and folders in the repository are represented as JCR nodes (and properties of those nodes).">About Oracle XML DB Content Connector</a></p>
</li>
<li>
<p><a href="xdb_jcr.htm#GUID-F5DE153B-484D-4802-96AA-EA3B99925284" title="Oracle XML DB Content Connector represents data in Oracle XML&nbsp;DB Repository as JCR nodes and properties. Files and folders are represented as nodes of type nt:file and nt:folder, respectively. Their content and metadata is exposed as nodes of node type nt:resource.">How Oracle XML&nbsp;DB Repository Is Exposed in JCR</a></p>
</li>
<li>
<p><a href="xdb_jcr.htm#GUID-13A9B8B2-A114-4A2E-A969-66BA63A65EB3" title="Oracle XML DB Content Connector requires certain entries in environment variable CLASSPATH.">CLASSPATH for Oracle XML DB Content Connector</a></p>
</li>
<li>
<p><a href="xdb_jcr.htm#GUID-0562911B-7E28-4C29-83F5-445C4727EDF4" title="In Oracle XML DB Content Connector, oracle.jcr.OracleRepository implements JCR interface javax.jcr.Repository, which provides the entry point for a JCR repository. You can use it to obtain a Repository object for Oracle XML&nbsp;DB Repository.">Obtaining the JCR Repository Object</a></p>
</li>
<li>
<p><a href="xdb_jcr.htm#GUID-C6E68FC7-7F4D-4F43-B528-7450323024A5" title="You can use Oracle XML DB Content Connector to upload a file from the local file system to Oracle XML&nbsp;DB Repository.">Java Code to Upload a File to the Repository using Oracle XML DB Content Connector</a></p>
</li>
<li>
<p><a href="xdb_jcr.htm#GUID-1F72EBAC-F5BD-46B9-92EC-404C9FB254D3" title="You can find additional sample JCR code at $ORACLE_HOME/xdk/demo/java/jcr. For each code sample, a README file describes its purpose and use.">Additional JCR Code Examples</a></p>
</li>
<li>
<p><a href="xdb_jcr.htm#GUID-646D0849-09DF-4260-9895-A6DA1A634A02" title="Oracle XML DB Content Connector uses the standard java.util.logging framework. You can use the logging API provided by that framework to control logging behavior.">Oracle XML DB Content Connector Uses the Standard Java Logging API</a></p>
</li>
<li>
<p><a href="xdb_jcr.htm#GUID-A748295C-08E8-497F-BC9B-8573014CB329" title="The JSR-170 standard, which defines JCR version 1.0, defines two compliance levels and a set of optional features. Oracle XML DB Content Connector supports Level 1 (read functions) and Level 2 (write functions).">Supported JCR Compliance Levels</a></p>
</li>
<li>
<p><a href="xdb_jcr.htm#GUID-B95FD86F-9769-4B90-8C7A-B05E21CEF483" title="Certain restrictions apply to Oracle XML DB Content Connector.">Oracle XML DB Content Connector Restrictions</a></p>
</li>
<li>
<p><a href="xdb_jcr.htm#GUID-5015FD42-CA22-484C-B52E-444D8E10CE9A" title="Oracle XML DB Content Connector can create JCR node types from XML schemas.">XML Schemas and JCR</a></p>
</li>
</ul>
</div>
<a id="ADXDB5611"></a>
<div class="props_rev_3"><a id="GUID-83A8D8D9-4D02-4305-A599-22A4A2A06543"></a>
<h2 id="ADXDB-GUID-83A8D8D9-4D02-4305-A599-22A4A2A06543" class="sect2"><span class="enumeration_section">31.1</span> About the Content Repository API for Java (JCR)</h2>
<div>
<p>JCR 1.0 defines a standard Java API for applications to interact with content repositories. A content repository is a tree of nodes, each of which can have one or more child nodes. Each node has exactly one parent node, except for the root node, which has no parent.</p>
<p>In addition to child nodes, a node may also have one or more properties. A property is a simple name/value pair. For example, a node representing a particular file in the content repository has a property named <code>jcr:created</code> whose value is the date the file was created.</p>
<p>Each property has a property type. For example, the <code>jcr:created</code> property has the <code>DATE</code> property type, requiring its value to be a valid date/time.</p>
<p>Similarly, each node has a node type. For example, a node representing a file has node type <code>nt:file</code>. The node type controls what child nodes and properties the node may have or must have. For example, all nodes of type <code>nt:file</code> must have a <code>jcr:created</code> property.</p>
<p>Because nodes and properties are named, they can be addressed by path. JCR supports both absolute and relative paths. For example, the absolute path</p>
<pre>/My Documents/pictures/puppy.jpg/jcr:created
</pre>
<p>resolves to the <code>jcr:created</code> property of file <code>puppy.jpg</code>. This property can also be addressed relative to the <code>My Documents</code> folder by the following relative path:</p>
<pre dir="ltr">pictures/puppy.jpg/jcr:created
</pre>
<p>Node and property names can be namespace qualified. Like XML, JCR uses colon-delimited namespace prefixes to express namespace-qualified names, for example, <code>jcr:created</code>. Unlike XML, JCR records the namespace prefix-to-URI mappings in a repository-wide namespace registry, which, for example, maps the <code>jcr</code> prefix to the URI <code>http://www.jcp.org/jcr/1.0</code>.</p>
<div class="infoboxnotealso" id="GUID-83A8D8D9-4D02-4305-A599-22A4A2A06543__GUID-56ED313E-58BA-40C7-8C49-C0BCC377EDF3">
<p class="notep1">See Also:</p>
<p>Java Community Process, &#34;Content Repository for Java technology API&#34;, <a href="http://jcp.org/en/jsr/detail?id=170" target="_blank"><code>http://jcp.org/en/jsr/detail?id=170</code></a>. Chapter 4 of the JSR-170 specification provides a concise introduction to JCR 1.0</p>
</div>
</div>
</div>
<a id="ADXDB5612"></a>
<div class="props_rev_3"><a id="GUID-ECCC3B15-8448-44F7-990B-391709FC0406"></a>
<h2 id="ADXDB-GUID-ECCC3B15-8448-44F7-990B-391709FC0406" class="sect2"><span class="enumeration_section">31.2</span> About Oracle XML DB Content Connector</h2>
<div>
<p>Oracle XML DB Content Connector lets you access Oracle XML&nbsp;DB Repository using JCR 1.0 Java. Your applications can run either in a standalone Java Virtual Machine (JVM) or a J2EE container. Files and folders in the repository are represented as JCR nodes (and properties of those nodes).</p>
<p>You can create, retrieve, and update repository files and folders using the JCR APIs.</p>
<div class="infobox-note" id="GUID-ECCC3B15-8448-44F7-990B-391709FC0406__GUID-E27DB720-49A7-40DC-834E-BE5CE17763A3">
<p class="notep1">Note:</p>
<p>Using Oracle XML DB Content Connector in the database Oracle JVM (the Java Virtual Machine available within a database process) is not supported. To use the content connector in the database tier, you must use either a standalone Java Virtual Machine or a J2EE container.</p>
</div>
</div>
</div>
<a id="ADXDB5613"></a>
<div class="props_rev_3"><a id="GUID-F5DE153B-484D-4802-96AA-EA3B99925284"></a>
<h2 id="ADXDB-GUID-F5DE153B-484D-4802-96AA-EA3B99925284" class="sect2"><span class="enumeration_section">31.3</span> How Oracle XML&nbsp;DB Repository Is Exposed in JCR</h2>
<div>
<p>Oracle XML DB Content Connector represents data in Oracle XML&nbsp;DB Repository as JCR nodes and properties. Files and folders are represented as nodes of type <code>nt:file</code> and <code>nt:folder</code>, respectively. Their content and metadata is exposed as nodes of node type <code>nt:resource</code>.</p>
</div>
<a id="ADXDB5615"></a><a id="ADXDB5614"></a>
<div class="props_rev_3"><a id="GUID-BFC8BA91-F1B3-47D5-B34D-1686671D5999"></a>
<h3 id="ADXDB-GUID-BFC8BA91-F1B3-47D5-B34D-1686671D5999" class="sect3"><span class="enumeration_section">31.3.1</span> How Files and Folders are Exposed in JCR</h3>
<div>
<p>An example is presented of a repository folder containing two files, and showing how this is viewed from JCR.</p>
<p>The folder <code>MyFolder</code> is stored in the root folder of Oracle XML&nbsp;DB Repository. It contains two files, <code>Address.xml</code> and <code>Car.jpg</code>.</p>
<p>File <code>Address.xml</code> has the following XML content:</p>
<pre dir="ltr">&lt;Address country=&#34;US&#34;&gt;
  &lt;name&gt;Alice Smith&lt;/name&gt;
  &lt;street&gt;123 Maple Street&lt;/street&gt;
  &lt;city&gt;Mill Valley&lt;/city&gt;
  &lt;state&gt;CA&lt;/state&gt;
  &lt;zip&gt;90952&lt;/zip&gt;
&lt;/Address&gt;
</pre>
<p>File <code>Car.jpg</code> has binary content: a picture of an automobile. It also has the following user-defined XML metadata:</p>
<pre dir="ltr">&lt;i:ImageMetadata&gt;
  &lt;Height&gt;640&lt;/Height&gt;
  &lt;Width&gt;480&lt;/Width&gt;
  &lt;RGB R=&#34;44&#34; G=&#34;123&#34; B=&#34;74&#34;/&gt;
&lt;/i:ImageMetadata&gt; 
</pre>
<p>Oracle XML DB Content Connector exposes <code>MyFolder</code>, <code>Address.xml</code>, and <code>Car.jpg</code> as JCR nodes and properties.</p>
<p><a href="xdb_jcr.htm#GUID-BFC8BA91-F1B3-47D5-B34D-1686671D5999__CHDEDHFJ">Example 31-1</a> shows folder <code>MyFolder</code> represented as a tree of JCR nodes and properties. In this representation, <span class="bold"><code>bold</code></span> type indicates a node, <span class="italic"><code>italic</code></span> type indicates a node type, <code>regular</code> type indicates a property, and italic type with angle brackets (<code>&lt;&gt;</code>) indicates omitted data, such as binary data.</p>
<div class="example" id="GUID-BFC8BA91-F1B3-47D5-B34D-1686671D5999__CHDEDHFJ">
<p class="titleinexample">Example 31-1 JCR Node Representation of MyFolder</p>
<pre dir="ltr"><span class="bold">[root]</span> <span class="italic">(nt:folder)</span>
  jcr:created=&#34;2001-01-01T00:00:00.000Z&#34;
  <span class="bold">jcr:content </span><span class="italic">(nt:resource)</span>
    jcr:data=null
    jcr:lastModified=&#34;2001-01-01T00:00:00.000Z&#34;
    ojcr:owner=&#34;SYS&#34;
    ojcr:creator=&#34;SYS&#34;
    ojcr:lastModifier=&#34;SYS&#34;
    ojcr:displayName=&#34;&#34;
    ojcr:language=&#34;en-US&#34;
  <span class="bold">MyFolder</span> <span class="italic">(nt:folder)</span>
    jcr:created=&#34;2001-01-01T00:00:00.000Z&#34;
    <span class="bold">jcr:content</span> <span class="italic">(nt:resource)</span>
      jcr:data=null
      jcr:lastModified=&#34;2001-01-01T00:00:00.000Z&#34;
      ojcr:owner=&#34;ALICE&#34;
      ojcr:creator=&#34;BOB&#34;
      ojcr:lastModifier=&#34;CHARLIE&#34;
      ojcr:author=&#34;BOB&#34;
      ojcr:comment=&#34;An application folder&#34;
      ojcr:displayName=&#34;MyFolder&#34;
      ojcr:language=&#34;en-US&#34;
      <span class="bold">ojcr:links</span> <span class="italic">(ojcr:links)</span>
        <span class="bold">ojcr:folderLink</span> <span class="italic">(ojcr:linkProperties)</span>
          ojcr:linkType=&#34;Hard&#34;
          ojcr:linkSource=<span class="italic">&lt;RESID of the root folder&gt;</span>
          ojcr:linkTarget=<span class="italic">&lt;RESID of folder MyFolder&gt;</span>
          ojcr:linkName=&#34;MyFolder&#34;
    <span class="bold">Address.xml</span> <span class="italic">(nt:file)</span>
      jcr:created=&#34;2005-09-01T12:34:56.789Z&#34;
      <span class="bold">jcr:content</span> <span class="italic">(nt:resource)</span>
        jcr:encoding=&#34;UTF-8&#34;
        jcr:mimeType=&#34;text/xml&#34;
        jcr:data=<span class="italic">&lt;binary representation of the XML content&gt;</span>
        jcr:lastModified=&#34;2005-09-01T12:34:56.789Z&#34;
        ojcr:owner=&#34;ALICE&#34;
        ojcr:creator=&#34;BOB&#34;
        ojcr:lastModifier=&#34;CHARLIE&#34;
        ojcr:author=&#34;BOB&#34;
        ojcr:displayName=&#34;Address.xml&#34;
        ojcr:language=&#34;en-US&#34;
        <span class="bold">ojcr:xmlContent</span> <span class="italic">(nt:unstructured)</span>
          <span class="bold">Address</span>
            country=&#34;US&#34;
            <span class="bold">name</span>
              <span class="bold">jcr:xmltext</span>
                jcr:xmlcharacters=&#34;Alice Smith&#34;
            <span class="bold">street</span>
              <span class="bold">jcr:xmltext</span>
                jcr:xmlcharacters=&#34;123 Maple Street&#34;
            <span class="bold">city</span>
              <span class="bold">jcr:xmltext</span>
                jcr:xmlcharacters=&#34;Mill Valley&#34;
            <span class="bold">state</span>
              <span class="bold">jcr:xmltext</span>
                jcr:xmlcharacters=&#34;CA&#34;
            <span class="bold">zip</span>
              <span class="bold">jcr:xmltext</span>
                jcr:xmlcharacters=&#34;90952&#34;
        <span class="bold">ojcr:links</span> <span class="italic">(ojcr:links)</span>
          <span class="bold">ojcr:folderLink</span> <span class="italic">(ojcr:linkProperties)</span>
            ojcr:linkType=&#34;Hard&#34;
            ojcr:linkSource=<span class="italic">&lt;RESID of folder MyFolder&gt;</span>
            ojcr:linkTarget=<span class="italic">&lt;RESID of file Address.xml&gt;</span>
            ojcr:linkName=&#34;Address.xml&#34;
    <span class="bold">Car.jpg</span> <span class="italic">(nt:file)</span>
      jcr:created=&#34;2004-02-12T16:15:23.247Z&#34;
      <span class="bold">jcr:content</span> <span class="italic">(nt:resource)</span>
        jcr:mimeType=&#34;image/jpeg&#34;
        jcr:data=<span class="italic">&lt;binary content of file Car.jpg&gt;</span>
        jcr:lastModified=&#34;2004-02-12T17:20:25.314Z&#34;
        ojcr:owner=&#34;ALICE&#34;
        ojcr:creator=&#34;BOB&#34;
        ojcr:lastModifier=&#34;CHARLIE&#34;
        ojcr:author=&#34;BOB&#34;
        ojcr:displayName=&#34;A shiny red car!&#34;
        ojcr:language=&#34;en-US&#34;
        <span class="bold">i:ImageMetadata</span>
          <span class="bold">Height</span>
            <span class="bold">jcr:xmltext</span>
              jcr:xmlcharacters=&#34;640&#34;
          <span class="bold">Width</span>
            <span class="bold">jcr:xmltext</span>
              jcr:xmlcharacters=&#34;480&#34;
          <span class="bold">RGB</span>
            R=&#34;44&#34;
            G=&#34;123&#34;
            B=&#34;74&#34;
        <span class="bold">ojcr:links</span> <span class="italic">(ojcr:links)</span>
          <span class="bold">ojcr:folderLink</span> <span class="italic">(ojcr:linkProperties)</span>
            ojcr:linkType=&#34;Hard&#34;
            ojcr:linkSource=<span class="italic">&lt;RESID of folder MyFolder&gt;</span>
            ojcr:linkTarget=<span class="italic">&lt;RESID of file Car.jpg&gt;</span>
            ojcr:linkName=&#34;Car.jpg&#34;
</pre></div>
<!-- class="example" --></div>
</div>
<a id="ADXDB5616"></a>
<div class="props_rev_3"><a id="GUID-812E335A-B196-42B6-ACAD-E89797E23882"></a>
<h3 id="ADXDB-GUID-812E335A-B196-42B6-ACAD-E89797E23882" class="sect3"><span class="enumeration_section">31.3.2</span> Oracle Extensions to JCR Node Types</h3>
<div>
<p>Oracle XML DB Content Connector augments the definitions of node types <code>nt:file</code>, <code>nt:folder</code>, and <code>nt:resource</code> to include additional information held in Oracle XML&nbsp;DB Repository. Node type <code>ojcr:folder</code> is added as a supertype of <code>nt:folder</code>, and node type <code>ojcr:resource</code> is added as a supertype of <code>nt:resource</code>.</p>
<p>All Oracle extensions are in the namespace <code>http://xmlns.oracle.com/jcr/1.0</code>, which is mapped to namespace prefix <span class="bold"><code>ojcr</code></span>.</p>
<p>In addition, node type <code>mix:referenceable</code> is added as a supertype of <code>nt:file</code> and <code>nt:folder</code> to allow all files and folders to be accessed by their resource id.</p>
</div>
</div>
<a id="ADXDB5617"></a>
<div class="props_rev_3"><a id="GUID-2D265506-4B0D-4E8F-925B-D5AB7AC4BE19"></a>
<h3 id="ADXDB-GUID-2D265506-4B0D-4E8F-925B-D5AB7AC4BE19" class="sect3"><span class="enumeration_section">31.3.3</span> Binary and XML Content</h3>
<div>
<p>Property <code>jcr:data</code> contains the binary content of a file. It is a property not of <code>nt:file</code>, but rather of its child node, <code>jcr:content</code>. For files containing XML content, <code>jcr:content</code> has a child node, <code>ojcr:xmlContent</code>, under which the XML content can be accessed as a set of JCR nodes and properties.</p>
<p>File <code>Address.xml</code>, referenced in <a href="xdb_jcr.htm#GUID-BFC8BA91-F1B3-47D5-B34D-1686671D5999__CHDEDHFJ">Example 31-1</a>, is such a file. The XML content of an XML file in the repository is mapped to JCR nodes and properties using the <strong class="term">document view serialization</strong> defined by JCR, in which:</p>
<ul style="list-style-type: disc;">
<li>
<p>XML elements are exposed as JCR nodes.</p>
</li>
<li>
<p>XML attributes are exposed as JCR properties.</p>
</li>
<li>
<p>XML text is exposed as JCR properties named <code>jcr:xmlcharacters</code> within nodes named <code>jcr:xmltext</code>.</p>
</li>
</ul>
</div>
</div>
<a id="ADXDB5619"></a><a id="ADXDB5618"></a>
<div class="props_rev_3"><a id="GUID-657D4C38-CF6B-421D-846A-A7BA67862D42"></a>
<h3 id="ADXDB-GUID-657D4C38-CF6B-421D-846A-A7BA67862D42" class="sect3"><span class="enumeration_section">31.3.4</span> System-Defined Metadata Mapped to JCR</h3>
<div>
<p>Oracle XML&nbsp;DB Repository maintains metadata for each repository file and folder. In database views <code>RESOURCE_VIEW</code> and <code>PATH_VIEW</code>, this metadata is represented as a set of XML elements within <code>XMLType</code> column <code>RES</code>. In JCR, this metadata is mapped to properties in namespaces <code>jcr</code> and <code>ojcr</code>.</p>
<div class="section">
<p><a href="xdb_jcr.htm#GUID-657D4C38-CF6B-421D-846A-A7BA67862D42__BABCJEDC" title="rows are types; the first column are the XMLTypes and the second column are the JCR nodes or properties that map to the XMLTypes.">Table 31-1</a> describes this mapping.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-657D4C38-CF6B-421D-846A-A7BA67862D42__BABCJEDC">
<p class="titleintable">Table 31-1 Oracle XML&nbsp;DB Resource to JCR Mappings</p>
<table class="cellalignment3420" title="Oracle XML&nbsp;DB Resource to JCR Mappings" summary="rows are types; the first column are the XMLTypes and the second column are the JCR nodes or properties that map to the XMLTypes.">
<thead>
<tr class="cellalignment3411">
<th class="cellalignment3421" id="d148073e832">XPath</th>
<th class="cellalignment3422" id="d148073e835">Relative Path From Node nt:file or nt:folder</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3411">
<td class="cellalignment3423" id="d148073e840" headers="d148073e832">
<p><code>/Resource/CreationDate</code></p>
</td>
<td class="cellalignment3424" headers="d148073e840 d148073e835">
<p><code>jcr:created</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3423" id="d148073e849" headers="d148073e832">
<p><code>/Resource/ModificationDate</code></p>
</td>
<td class="cellalignment3424" headers="d148073e849 d148073e835">
<p><code>jcr:content/jcr:lastModified</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3423" id="d148073e858" headers="d148073e832">
<p><code>/Resource/Author</code></p>
</td>
<td class="cellalignment3424" headers="d148073e858 d148073e835">
<p><code>jcr:content/ojcr:author</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3423" id="d148073e867" headers="d148073e832">
<p><code>/Resource/DisplayName</code></p>
</td>
<td class="cellalignment3424" headers="d148073e867 d148073e835">
<p><code>jcr:content/ojcr:displayName</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3423" id="d148073e876" headers="d148073e832">
<p><code>/Resource/Comment</code></p>
</td>
<td class="cellalignment3424" headers="d148073e876 d148073e835">
<p><code>jcr:content/ojcr:comment</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3423" id="d148073e885" headers="d148073e832">
<p><code>/Resource/Language</code></p>
</td>
<td class="cellalignment3424" headers="d148073e885 d148073e835">
<p><code>jcr:content/ojcr:language</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3423" id="d148073e894" headers="d148073e832">
<p><code>/Resource/CharacterSet</code></p>
</td>
<td class="cellalignment3424" headers="d148073e894 d148073e835">
<p><code>jcr:content/jcr:encoding</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3423" id="d148073e903" headers="d148073e832">
<p><code>/Resource/ContentType</code></p>
</td>
<td class="cellalignment3424" headers="d148073e903 d148073e835">
<p><code>jcr:content/jcr:mimeType</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3423" id="d148073e912" headers="d148073e832">
<p><code>/Resource/Owner</code></p>
</td>
<td class="cellalignment3424" headers="d148073e912 d148073e835">
<p><code>jcr:content/ojcr:owner</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3423" id="d148073e921" headers="d148073e832">
<p><code>/Resource/Creator</code></p>
</td>
<td class="cellalignment3424" headers="d148073e921 d148073e835">
<p><code>jcr:content/ojcr:creator</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3423" id="d148073e930" headers="d148073e832">
<p><code>/Resource/LastModifier</code></p>
</td>
<td class="cellalignment3424" headers="d148073e930 d148073e835">
<p><code>jcr:content/ojcr:lastModifier</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="ADXDB5620"></a>
<div class="props_rev_3"><a id="GUID-453734BF-7B7C-4933-A7F1-273BE46E1953"></a>
<h3 id="ADXDB-GUID-453734BF-7B7C-4933-A7F1-273BE46E1953" class="sect3"><span class="enumeration_section">31.3.5</span> User-Defined Metadata Mapped to JCR</h3>
<div>
<p>User-defined XML metadata is exposed as JCR nodes and properties under child node <code>jcr:content</code> of a repository file or folder. As with XML file content, XML metadata is mapped to JCR nodes and properties using the document view serialization that is defined by JCR.</p>
<p>See <span class="q">&#34;<a href="xdb_jcr.htm#GUID-2D265506-4B0D-4E8F-925B-D5AB7AC4BE19" title="Property jcr:data contains the binary content of a file. It is a property not of nt:file, but rather of its child node, jcr:content. For files containing XML content, jcr:content has a child node, ojcr:xmlContent, under which the XML content can be accessed as a set of JCR nodes and properties.">Binary and XML Content</a>&#34;</span> for a description of this serialization.</p>
<p>In <a href="xdb_jcr.htm#GUID-BFC8BA91-F1B3-47D5-B34D-1686671D5999__CHDEDHFJ">Example 31-1</a>, file <code>Car.jpg</code> has this user-defined metadata:</p>
<pre dir="ltr">&lt;i:ImageMetadata&gt;
  &lt;Height&gt;640&lt;/Height&gt;
  &lt;Width&gt;480&lt;/Width&gt;
  &lt;RGB R=&#34;44&#34; G=&#34;123&#34; B=&#34;74&#34;/&gt;
&lt;/i:ImageMetadata&gt; 
</pre>
<p>The following JCR path retrieves the <code>Width</code> value:</p>
<pre dir="ltr">/My Folder/Car.jpg/jcr:content/i:ImageMetadata/
   Width/jcr:xmltext/jcr:xmlcharacters
</pre></div>
</div>
<a id="ADXDB5621"></a>
<div class="props_rev_3"><a id="GUID-CFF01360-28ED-4EE9-974D-70E720A3F24B"></a>
<h3 id="ADXDB-GUID-CFF01360-28ED-4EE9-974D-70E720A3F24B" class="sect3"><span class="enumeration_section">31.3.6</span> JCR and Repository Hard and Weak Links</h3>
<div>
<p>In JCR, each node or property has one parent (except for the root node, which has none), so there it has only one absolute path. In Oracle XML&nbsp;DB Repository. a resource can be linked to more than one parent folder, so there it can have more than one path.</p>
<p>In the repository, a resource (file or folder) can be linked to its parent folders by either hard links, which control the life span of the child, or weak links, which do not.</p>
<p>In resolving a path, Oracle XML DB Content Connector traverses both hard and weak repository links. If there is more than one path to a resource, JCR method <code>getPath()</code> returns the path by which that resource was first discovered, subsequent to the most recent call to either <code>save()</code> or <code>refresh(boolean)</code> during the session. JCR method <code>getParent()</code> returns the folder targeted by that path.</p>
<p>It is often useful to obtain a list of all parents of a resource, if the resource is the target of more than one link and therefore has more than one parent folder. Oracle XML DB Content Connector presents this as nodes of type <code>ojcr:linkProperties</code> with path <code>jcr:content/ojcr:links/ojcr:folderLink</code> relative to node <code>nt:file</code> or <code>nt:folder</code>. There is one <code>ojcr:folderLink</code> node for each parent of the resource.</p>
<p>Node <code>ojcr:folderLink</code> has the following properties:</p>
<ul style="list-style-type: disc;">
<li>
<p><code>ojcr:linkType</code>: Link type (<code>Hard</code> or <code>Weak</code>)</p>
</li>
<li>
<p><code>ojcr:linkSource</code>: Resource id of the parent folder</p>
</li>
<li>
<p><code>ojcr:linkTarget</code>: Resource id of the child file or folder</p>
</li>
<li>
<p><code>ojcr:linkName</code>: Name of the child file or folder in that parent</p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADXDB5624"></a>
<div class="props_rev_3"><a id="GUID-13A9B8B2-A114-4A2E-A969-66BA63A65EB3"></a>
<h2 id="ADXDB-GUID-13A9B8B2-A114-4A2E-A969-66BA63A65EB3" class="sect2"><span class="enumeration_section">31.4</span> CLASSPATH for Oracle XML DB Content Connector</h2>
<div>
<p>Oracle XML DB Content Connector requires certain entries in environment variable <code>CLASSPATH</code>.</p>
<ul style="list-style-type: disc;">
<li>
<p><code>$ORACLE_HOME/lib/jcr-1.0.jar</code></p>
</li>
<li>
<p><code>$ORACLE_HOME/lib/ojcr.jar</code></p>
</li>
<li>
<p><code>$ORACLE_HOME/lib/xmlparserv2.jar</code></p>
</li>
<li>
<p><code>$ORACLE_HOME/jlib/xquery.jar</code></p>
</li>
</ul>
</div>
</div>
<a id="ADXDB5626"></a><a id="ADXDB5625"></a>
<div class="props_rev_3"><a id="GUID-0562911B-7E28-4C29-83F5-445C4727EDF4"></a>
<h2 id="ADXDB-GUID-0562911B-7E28-4C29-83F5-445C4727EDF4" class="sect2"><span class="enumeration_section">31.5</span> Obtaining the JCR Repository Object</h2>
<div>
<p>In Oracle XML DB Content Connector, <code>oracle.jcr.OracleRepository</code> implements JCR interface <code>javax.jcr.Repository</code>, which provides the entry point for a JCR repository. You can use it to obtain a <code>Repository</code> object for Oracle XML&nbsp;DB Repository.</p>
<div class="section">
<p>The code fragment in <a href="xdb_jcr.htm#GUID-0562911B-7E28-4C29-83F5-445C4727EDF4__BABIDJDH">Example 31-2</a> illustrates this.</p>
<p><code>OracleRepository</code> implements both <code>java.io.Serializable</code> and <code>javax.naming.Referenceable</code>. This lets you create and configure an <code>OracleRepository</code> object upon application deployment, and store the ready-to-use <code>OracleRepository</code> object in a JNDI directory. At run-time, your application can retrieve the preconfigured <code>OracleRepository</code> object from the JNDI directory. This approach, recommended by the JCR specification, separates deployment and run-time concerns.</p>
<p>In Oracle XML DB Content Connector, the set of prefix-to-URI mappings forming the JCR namespace registry is stored as part of the <code>OracleRepository</code> configuration.</p>
<div class="infoboxnotealso" id="GUID-0562911B-7E28-4C29-83F5-445C4727EDF4__GUID-A4F4684B-D3F7-48AB-90C5-48E6D6A3EE2C">
<p class="notep1">See Also:</p>
<p><a class="olink JAXML" target="_blank" href="../JAXML/toc.htm"><span class="italic">Oracle Database XML Java API Reference</span></a>, package <code>oracle.jcr</code></p>
</div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-0562911B-7E28-4C29-83F5-445C4727EDF4__BABIDJDH">
<p class="titleinexample">Example 31-2 Code Fragment Showing How to Get a Repository Object</p>
<pre dir="ltr">import oracle.jcr.OracleRepository;
import oracle.jcr.OracleRepositoryFactory;
import oracle.jcr.xdb.XDBRepositoryConfiguration;
import oracle.jdbc.pool.OracleDataSource;
...
XDBRepositoryConfiguration configuration =
  new XDBRepositoryConfiguration();
OracleDataSource ods =
  (OracleDataSource)configuration.getDataSource();
// databaseURL is a JDBC database URL.
ods.setURL(databaseURL);
// OracleRepository implements javax.jcr.Repository.
OracleRepository repository =
  OracleRepositoryFactory.<span class="bold">createOracleRepository</span>(configuration);
</pre></div>
<!-- class="example" --></div>
</div>
<a id="ADXDB5628"></a><a id="ADXDB5929"></a><a id="ADXDB5627"></a>
<div class="props_rev_3"><a id="GUID-C6E68FC7-7F4D-4F43-B528-7450323024A5"></a>
<h2 id="ADXDB-GUID-C6E68FC7-7F4D-4F43-B528-7450323024A5" class="sect2"><span class="enumeration_section">31.6</span> Java Code to Upload a File to the Repository using Oracle XML DB Content Connector</h2>
<div>
<p>You can use Oracle XML DB Content Connector to upload a file from the local file system to Oracle XML&nbsp;DB Repository.</p>
<div class="section">
<p><a href="xdb_jcr.htm#GUID-C6E68FC7-7F4D-4F43-B528-7450323024A5__BABGDJIG">Example 31-3</a> is a Java program that illustrates this. You can compile and run it from the command line. The program requires the following command-line arguments:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>JDBC database URL</p>
</li>
<li>
<p>User ID</p>
</li>
<li>
<p>User password</p>
</li>
<li>
<p>Folder in Oracle XML&nbsp;DB Repository into which to upload the file</p>
</li>
<li>
<p>File to be uploaded</p>
</li>
<li>
<p>MIME type</p>
</li>
</ul>
<p><a href="xdb_jcr.htm#GUID-C6E68FC7-7F4D-4F43-B528-7450323024A5__BGBFJGFD">Example 31-4</a> illustrates this.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-C6E68FC7-7F4D-4F43-B528-7450323024A5__BABGDJIG">
<p class="titleinexample">Example 31-3 Uploading a File Using Oracle XML DB Content Connector</p>
<pre dir="ltr">import java.io.FileInputStream;
 
import javax.jcr.Node;
import javax.jcr.Session;
import javax.jcr.SimpleCredentials;
 
import oracle.jcr.OracleRepository;
import oracle.jcr.OracleRepositoryFactory;
 
import oracle.jcr.xdb.XDBRepositoryConfiguration;
 
import oracle.jdbc.pool.OracleDataSource;
 
public class UploadFile
{
  public static void main(String[] args)
    throws Exception
  {
    String databaseURL = args[0];
    String userName = args[1];
    String password = args[2];
    String parentPath = args[3];
    String fileName = args[4];
    String mimeType = args[5];
    
    // Get the JCR Repository object.
    XDBRepositoryConfiguration configuration =
      new XDBRepositoryConfiguration();
 
    OracleDataSource ods =
      (OracleDataSource)configuration.getDataSource();
 
    ods.setURL(databaseURL);
    
    OracleRepository repository =
      OracleRepositoryFactory.createOracleRepository(configuration);
    
    // Create a JCR Session.
    SimpleCredentials sc =  
      new SimpleCredentials(userName, password.toCharArray());
 
    Session session = repository.login(sc);
 
    // Get the parent node.
    Node parentNode = (Node)session.getItem(parentPath);
    
    // Get the child contents.
    FileInputStream inputStream = new FileInputStream(fileName);
    
    // Create child node.
    Node node = parentNode.addNode(fileName, &#34;nt:file&#34;);
    Node contentNode = node.getNode(&#34;jcr:content&#34;);
    contentNode.setProperty(&#34;jcr:mimeType&#34;, mimeType);
    contentNode.setProperty(&#34;jcr:data&#34;, inputStream);
    
    // Save changes and logout.
    session.save();
    session.logout();
  }
}
 
// EOF
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-C6E68FC7-7F4D-4F43-B528-7450323024A5__BGBFJGFD">
<p class="titleinexample">Example 31-4 Uploading a File Using the Command Line</p>
<pre dir="ltr">export CLASSPATH=.:$ORACLE_HOME/lib/jcr-1.0.jar:$ORACLE_HOME/lib/ojcr.jar:<a id="fn_1" href="#fn_1" onclick="footdisplay(1,&#34;This statement is split across two lines for the purpose of documentation. &#34;)"><sup>Foot 1</sup></a>
$ORACLE_HOME/lib/xmlparserv2.jar:$ORACLE_HOME/jlib/xquery.jar

javac UploadFile.java
java UploadFile jdbc:oracle:oci:@ quine <span class="italic">password</span> /public MyFile.txt text/plain
</pre></div>
<!-- class="example" --></div>
</div>
<a id="ADXDB5629"></a>
<div class="props_rev_3"><a id="GUID-1F72EBAC-F5BD-46B9-92EC-404C9FB254D3"></a>
<h2 id="ADXDB-GUID-1F72EBAC-F5BD-46B9-92EC-404C9FB254D3" class="sect2"><span class="enumeration_section">31.7</span> Additional JCR Code Examples</h2>
<div>
<p>You can find additional sample JCR code at <code>$ORACLE_HOME/xdk/demo/java/jcr</code>. For each code sample, a <code>README</code> file describes its purpose and use.</p>
</div>
</div>
<a id="ADXDB5630"></a>
<div class="props_rev_3"><a id="GUID-646D0849-09DF-4260-9895-A6DA1A634A02"></a>
<h2 id="ADXDB-GUID-646D0849-09DF-4260-9895-A6DA1A634A02" class="sect2"><span class="enumeration_section">31.8</span> Oracle XML&nbsp;DB Content Connector Uses the Standard Java Logging API</h2>
<div>
<p>Oracle XML DB Content Connector uses the standard <code>java.util.logging</code> framework. You can use the logging API provided by that framework to control logging behavior.</p>
<p>For example, the following Java code fragment disables all logging.</p>
<pre dir="ltr">import java.util.logging.LogManager;
...
LogManager.getLogManager().reset();
</pre></div>
</div>
<a id="ADXDB5631"></a>
<div class="props_rev_3"><a id="GUID-A748295C-08E8-497F-BC9B-8573014CB329"></a>
<h2 id="ADXDB-GUID-A748295C-08E8-497F-BC9B-8573014CB329" class="sect2"><span class="enumeration_section">31.9</span> Supported JCR Compliance Levels</h2>
<div>
<p>The JSR-170 standard, which defines JCR version 1.0, defines two compliance levels and a set of optional features. Oracle XML DB Content Connector supports Level 1 (read functions) and Level 2 (write functions).</p>
<div class="section"></div>
<!-- class="section" --></div>
</div>
<a id="ADXDB5632"></a>
<div class="props_rev_3"><a id="GUID-B95FD86F-9769-4B90-8C7A-B05E21CEF483"></a>
<h2 id="ADXDB-GUID-B95FD86F-9769-4B90-8C7A-B05E21CEF483" class="sect2"><span class="enumeration_section">31.10</span> Oracle XML DB Content Connector Restrictions</h2>
<div>
<p>Certain restrictions apply to Oracle XML DB Content Connector.</p>
<div class="section"></div>
<!-- class="section" --></div>
<a id="ADXDB5633"></a>
<div class="props_rev_3"><a id="GUID-3CC252A1-B7AA-4C24-AAF9-A96420338DCA"></a>
<h3 id="ADXDB-GUID-3CC252A1-B7AA-4C24-AAF9-A96420338DCA" class="sect3"><span class="enumeration_section">31.10.1</span> Default Workspace Name</h3>
<div>
<p>A single workspace is supported. In calling the <code>login(Credentials, String)</code> or <code>login(String)</code> methods of <code>javax.jcr.Repository</code>, the workspace name must be either an empty-string (<code>&#34;&#34;</code>) or <code>NULL</code>.</p>
<div class="section"></div>
<!-- class="section" --></div>
</div>
<a id="ADXDB5634"></a>
<div class="props_rev_3"><a id="GUID-1A26B08C-E949-49AC-A723-48793FA5EB18"></a>
<h3 id="ADXDB-GUID-1A26B08C-E949-49AC-A723-48793FA5EB18" class="sect3"><span class="enumeration_section">31.10.2</span> Operations Restricted to Specific Node Types</h3>
<div>
<p>Methods <code>save()</code> and <code>refresh()</code> of <code>javax.jcr.Item</code> can be called only on nodes whose type is <code>nt:file</code> or <code>nt:folder</code>. Method <code>move()</code> of <code>javax.jcr.Session</code> and methods <code>copy()</code> and <code>move()</code> of <code>javax.jcr.Workspace</code> can be called only on <code>nt:file</code> and <code>nt:folder</code> nodes.</p>
<div class="section"></div>
<!-- class="section" --></div>
</div>
<a id="ADXDB5635"></a>
<div class="props_rev_3"><a id="GUID-468AABB0-A569-4D39-A8D5-34750430EAF4"></a>
<h3 id="ADXDB-GUID-468AABB0-A569-4D39-A8D5-34750430EAF4" class="sect3"><span class="enumeration_section">31.10.3</span> File and Folder States</h3>
<div>
<p>The methods of <code>javax.jcr.Item</code> that return the state of a file or folder have certain restrictions.</p>
<p>Methods <code>isNew()</code> and <code>isModified()</code> return the state of the file or folder containing the item, not the item itself. Method <code>isNew()</code> returns <code>true</code> if the file or folder has been created in the JCR transient layer but not saved. Method <code>isModified()</code> returns <code>true</code> if the file or folder has been changed in the transient layer but not saved.</p>
</div>
</div>
<a id="ADXDB5636"></a>
<div class="props_rev_3"><a id="GUID-4B59F196-2092-4A4C-9930-9EDB613B6AB9"></a>
<h3 id="ADXDB-GUID-4B59F196-2092-4A4C-9930-9EDB613B6AB9" class="sect3"><span class="enumeration_section">31.10.4</span> Interaction Between Binary and XML Content</h3>
<div>
<p>Property <code>jcr:data</code> contains the binary-format content of a file. If the file content is XML, there is also an <code>ojcr:xmlContent</code> node under which its XML content is exposed as JCR nodes and properties.</p>
<p>Changes you make to the <code>ojcr:xmlContent</code> subtree are not reflected in the <code>jcr:data</code> property until those changes are saved. If you change both the <code>jcr:data</code> property and the <code>ojcr:xmlContent</code> subtree, then the <code>ojcr:xmlContent</code> subtree takes precedence when those changes are saved.</p>
</div>
</div>
<a id="ADXDB5637"></a>
<div class="props_rev_3"><a id="GUID-7C0E7F62-8325-4C4D-B358-92DA57721B64"></a>
<h3 id="ADXDB-GUID-7C0E7F62-8325-4C4D-B358-92DA57721B64" class="sect3"><span class="enumeration_section">31.10.5</span> Order in Which Changes Are Saved</h3>
<div>
<p>Method <code>save</code> of class <code>javax.jcr.Session</code> or class <code>javax.jcr.Item</code> saves changes made in the transient layer. If more than one node or property has been changed, then JCR does not specify the order in which the changes are stored. Oracle XML DB Content Connector saves changes in the following order:</p>
<div class="section">
<ol>
<li>
<p>Apply updates to existing files and folders, in path-sorted order.</p>
</li>
<li>
<p>Create new files and folders, in path-sorted order.</p>
</li>
<li>
<p>Move existing files and folders, in reverse path-sorted order.</p>
</li>
<li>
<p>Delete existing files and folders, in reverse path-sorted order.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="ADXDB5638"></a>
<div class="props_rev_3"><a id="GUID-D66F2C49-19C1-41A6-9FE6-4351A2C029CC"></a>
<h3 id="ADXDB-GUID-D66F2C49-19C1-41A6-9FE6-4351A2C029CC" class="sect3"><span class="enumeration_section">31.10.6</span> Undefined Properties</h3>
<div>
<p>Properties that have definitions of type <code>UNDEFINED</code> are stored as <code>STRING</code> values.</p>
<div class="section"></div>
<!-- class="section" --></div>
</div>
<a id="ADXDB5639"></a>
<div class="props_rev_3"><a id="GUID-EFE038FA-FA36-487D-9C09-21C10715EE38"></a>
<h3 id="ADXDB-GUID-EFE038FA-FA36-487D-9C09-21C10715EE38" class="sect3"><span class="enumeration_section">31.10.7</span> Node Type nt:base Is Abstract</h3>
<div>
<p>Node type <code>nt:base</code> is abstract and cannot be specified as the type of a new node.</p>
<div class="section"></div>
<!-- class="section" --></div>
</div>
<a id="ADXDB5640"></a>
<div class="props_rev_3"><a id="GUID-8B40A056-9DCA-494C-A1D5-D287A2477953"></a>
<h3 id="ADXDB-GUID-8B40A056-9DCA-494C-A1D5-D287A2477953" class="sect3"><span class="enumeration_section">31.10.8</span> Node jcr:content Is Created Automatically</h3>
<div>
<p>When you create a node of type <code>nt:file</code> or <code>nt:folder</code>, a <code>jcr:content</code> node is created automatically as a child.</p>
<div class="section"></div>
<!-- class="section" --></div>
</div>
<a id="ADXDB5641"></a>
<div class="props_rev_3"><a id="GUID-BA9E15F5-20CB-45D8-9B37-28CAB98B8CA6"></a>
<h3 id="ADXDB-GUID-BA9E15F5-20CB-45D8-9B37-28CAB98B8CA6" class="sect3"><span class="enumeration_section">31.10.9</span> jcr:xmltext Nodes Are Combined When Saved</h3>
<div>
<p>Saving combines successive <code>jcr:xmltext</code> nodes, which represent text within XML content or user-defined metadata, into a single <code>jcr:xmltext</code> node.</p>
<div class="section"></div>
<!-- class="section" --></div>
</div>
<a id="ADXDB5642"></a>
<div class="props_rev_3"><a id="GUID-9B663F39-A3B8-4244-BC53-BAC35EC482EF"></a>
<h3 id="ADXDB-GUID-9B663F39-A3B8-4244-BC53-BAC35EC482EF" class="sect3"><span class="enumeration_section">31.10.10</span> Node Type mix:referenceable</h3>
<div>
<p>Node types <code>nt:file</code>, <code>nt:folder</code>, and <code>nt:resource</code> are subtypes of mix-in node type <code>mix:referenceable</code>. Consequently, all <code>nt:file</code>, <code>nt:folder</code>, and <code>nt:resource</code> nodes can be referenced by UUID. You cannot add <code>mix:referenceable</code> to nodes of any type.</p>
<div class="section"></div>
<!-- class="section" --></div>
</div>
<a id="ADXDB5643"></a>
<div class="props_rev_3"><a id="GUID-9F5A452D-650B-4F6E-8C4A-19ADCBF3F49F"></a>
<h3 id="ADXDB-GUID-9F5A452D-650B-4F6E-8C4A-19ADCBF3F49F" class="sect3"><span class="enumeration_section">31.10.11</span> Full-Text Index for USe with JCR</h3>
<div>
<p>You can create a full-text index on file content using PL/SQL package <code>DBMS_XDBT</code>. This lets queries apply function <code>jcr:contains</code> to property <code>jcr:data</code> of a <code>jcr:content</code> node. Full-text indexes on other properties are not supported.</p>
</div>
</div>
</div>
<a id="ADXDB5644"></a>
<div class="props_rev_3"><a id="GUID-5015FD42-CA22-484C-B52E-444D8E10CE9A"></a>
<h2 id="ADXDB-GUID-5015FD42-CA22-484C-B52E-444D8E10CE9A" class="sect2"><span class="enumeration_section">31.11</span> XML Schemas and JCR</h2>
<div>
<p>Oracle XML DB Content Connector can create JCR node types from XML schemas.</p>
</div>
<a id="ADXDB5646"></a><a id="ADXDB5647"></a><a id="ADXDB5648"></a><a id="ADXDB5649"></a><a id="ADXDB5645"></a>
<div class="props_rev_3"><a id="GUID-1493D71F-6617-4719-9F8E-34569D7F2053"></a>
<h3 id="ADXDB-GUID-1493D71F-6617-4719-9F8E-34569D7F2053" class="sect3"><span class="enumeration_section">31.11.1</span> Why Register XML Schemas for Use with JCR?</h3>
<div>
<p>Oracle XML DB Content Connector lets XML schemas be registered for use in JCR. This causes the content connector to generate JCR node types for the XML Schema simple types, complex types, and global element declarations in the registered XML schema.</p>
<p>XML data can be stored in Oracle XML&nbsp;DB Repository as either file content or user-defined metadata. In either case, the XML data can be based on an XML schema. XML Schema-based data is validated against an XML schema that has been registered with Oracle XML&nbsp;DB.</p>
<p>By default, the JCR nodes corresponding to XML document content and user-defined metadata are of node type <code>nt:unstructured</code>, a generic node type defined by JCR, even if the XML data is XML Schema-based. Oracle XML&nbsp;DB Repository still validates any changes made through the Oracle XML DB Content Connector against the XML schema, but it is not possible to access or specify typing metadata through JCR.</p>
<p>However, when you register an XML schema for use in JCR, the content connector generates JCR node types for the XML Schema simple types, complex types, and global element declarations in the XML schema.</p>
<p>In exposing XML data as JCR nodes, the content connector determines whether the XML data conforms to an XML schema that is registered for JCR use, based on the value of XML attribute <code>xsi:schemaLocation</code> or <code>xsi:noNamespaceSchemaLocation</code> of its root element. If the XML data conforms to a JCR registered XML schema, then the XML data is exposed as JCR nodes of the node types generated from the XML schema, instead of using the generic node type <code>nt:unstructured</code>.</p>
<p>You can also use the generated JCR node types to create or update XML document content and user-defined metadata.</p>
<p><a href="xdb_jcr.htm#GUID-1493D71F-6617-4719-9F8E-34569D7F2053__BABJBCEI">Example 31-5</a> shows an XML document with XML schema-based content.</p>
<p>The content of <a href="xdb_jcr.htm#GUID-1493D71F-6617-4719-9F8E-34569D7F2053__BABJBCEI">Example 31-5</a> is valid with respect to the XML schema shown in <a href="xdb_jcr.htm#GUID-1493D71F-6617-4719-9F8E-34569D7F2053__BABGFHFF">Example 31-6</a>.</p>
<p>Initially, this XML schema is not registered for JCR use. The JCR nodes and properties representing the XML content are shown in <a href="xdb_jcr.htm#GUID-1493D71F-6617-4719-9F8E-34569D7F2053__BABFEBBJ">Example 31-7</a>.</p>
<p>The XML schema is then registered for JCR use. The JCR nodes and properties are shown in <a href="xdb_jcr.htm#GUID-1493D71F-6617-4719-9F8E-34569D7F2053__BABBCDHA">Example 31-8</a>.</p>
<p>Node <code>Address</code> now has node type <code>USAddress</code>. Similarly, nodes <code>name</code>, <code>street</code>, <code>city</code>, and <code>state</code> have node type <code>xsd:string</code>. Node <code>zip</code> has node type <code>xsd:long</code>, and the <code>jcr:xmlcharacters</code> property of its <code>jcr:xmltext</code> child is a <code>LONG</code> property type.</p>
<div class="infoboxnotealso" id="GUID-1493D71F-6617-4719-9F8E-34569D7F2053__GUID-149125D8-A174-49E1-81B9-C8FAB98A461D">
<p class="notep1">See Also:</p>
<p><a href="xdb_repos_meta.htm#GUID-74BCC51E-2E7C-4DB6-8DCF-F65122FE132E" title="You can create your own metadata to associate with XML data stored in Oracle XML&nbsp;DB Repository.">User-Defined Repository Metadata</a></p>
</div>
<div class="example" id="GUID-1493D71F-6617-4719-9F8E-34569D7F2053__BABJBCEI">
<p class="titleinexample">Example 31-5 XML Document with XML Schema-Based Content</p>
<pre dir="ltr">&lt;Address country=&#34;US&#34;
   xmlns:xsi=
     &#34;http://www.w3.org/2001/XMLSchema-instance&#34;
   xsi:noNamespaceSchemaLocation=
     &#34;http://www.example.com/Address&#34;&gt;
  &lt;name&gt;Alice Smith&lt;/name&gt;
  &lt;street&gt;123 Maple Street&lt;/street&gt;
  &lt;city&gt;Mill Valley&lt;/city&gt;
  &lt;state&gt;CA&lt;/state&gt;
  &lt;zip&gt;90952&lt;/zip&gt;
&lt;/Address&gt;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-1493D71F-6617-4719-9F8E-34569D7F2053__BABGFHFF">
<p class="titleinexample">Example 31-6 XML Schema</p>
<pre dir="ltr">&lt;xsd:schema xmlns:xsd=&#34;http://www.w3.org/2001/XMLSchema&#34;&gt;
  &lt;xsd:complexType name=&#34;USAddress&#34;&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element name=&#34;name&#34;   type=&#34;xsd:string&#34;/&gt;
      &lt;xsd:element name=&#34;street&#34; type=&#34;xsd:string&#34;/&gt;
      &lt;xsd:element name=&#34;city&#34;   type=&#34;xsd:string&#34;/&gt;
      &lt;xsd:element name=&#34;state&#34;  type=&#34;xsd:string&#34;/&gt;
      &lt;xsd:element name=&#34;zip&#34;    type=&#34;xsd:long&#34;/&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name=&#34;country&#34; type=&#34;xsd:NMTOKEN&#34;
                   fixed=&#34;US&#34;/&gt;
  &lt;/xsd:complexType&gt;
&lt;/xsd:schema&gt;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-1493D71F-6617-4719-9F8E-34569D7F2053__BABFEBBJ">
<p class="titleinexample">Example 31-7 JCR Representation of XML Content Not Registered for JCR Use</p>
<pre dir="ltr"> ojcr:xmlContent <span class="italic">(nt:unstructured)</span>
   Address <span class="italic">(nt:unstructured)</span>
     country=&#34;US&#34; (String)
     name <span class="italic">(nt:unstructured)</span>
       jcr:xmltext<span class="italic">(ojcr:xmltext)</span>
         jcr:xmlcharacters=&#34;Alice Smith&#34; <span class="italic">(String)</span>
     street <span class="italic">(nt:unstructured)</span>
       jcr:xmltext<span class="italic">(ojcr:xmltext)</span>
         jcr:xmlcharacters=&#34;123 Maple Street&#34; <span class="italic">(String)</span>
     city <span class="italic">(nt:unstructured)</span>
       jcr:xmltext<span class="italic">(ojcr:xmltext)</span>
         jcr:xmlcharacters=&#34;Mill Valley&#34; <span class="italic">(String)</span>
     state <span class="italic">(nt:unstructured)</span>
       jcr:xmltext<span class="italic">(ojcr:xmltext)</span>
         jcr:xmlcharacters=&#34;CA&#34; <span class="italic">(String)</span>
     zip <span class="italic">(nt:unstructured)</span>
       jcr:xmltext <span class="italic">(ojcr:xmltext)</span>
         jcr:xmlcharacters=&#34;90952&#34; <span class="italic">(String)</span>
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-1493D71F-6617-4719-9F8E-34569D7F2053__BABBCDHA">
<p class="titleinexample">Example 31-8 JCR Representation of XML Content Registered for JCR Use</p>
<pre dir="ltr">ojcr:xmlContent <span class="italic">(nt:unstructured)</span>
  Address <span class="italic">(USAddress)</span>
    country=&#34;US&#34; <span class="italic">(String)</span>
    name <span class="italic">(xsd:string)</span>
      jcr:xmltext<span class="italic">(ojcr:xmltext)</span>
        jcr:xmlcharacters=&#34;Alice Smith&#34; <span class="italic">(String)</span>
    street <span class="italic">(xsd:string)</span>
      jcr:xmltext<span class="italic">(ojcr:xmltext)</span>
        jcr:xmlcharacters=&#34;123 Maple Street&#34; <span class="italic">(String)</span>
    city <span class="italic">(xsd:string)</span>
      jcr:xmltext<span class="italic">(ojcr:xmltext)</span>
        jcr:xmlcharacters=&#34;Mill Valley&#34; <span class="italic">(String)</span>
    state <span class="italic">(xsd:string)</span>
      jcr:xmltext<span class="italic">(ojcr:xmltext)</span>
        jcr:xmlcharacters=&#34;CA&#34; <span class="italic">(String)</span>
    zip <span class="italic">(xsd:long)</span>
      jcr:xmltext <span class="italic">(ojcr:xmltext)</span>
        jcr:xmlcharacters=&#34;90952&#34; <span class="italic">(Long)</span>
</pre></div>
<!-- class="example" --></div>
</div>
<a id="ADXDB5651"></a><a id="ADXDB5652"></a><a id="ADXDB5650"></a>
<div class="props_rev_3"><a id="GUID-AF06141F-4A04-40BD-9E8A-7ABA85D39EA9"></a>
<h3 id="ADXDB-GUID-AF06141F-4A04-40BD-9E8A-7ABA85D39EA9" class="sect3"><span class="enumeration_section">31.11.2</span> How to Register an XML Schema with JCR</h3>
<div>
<p>Before you register an XML schema for use with JCR, you must register it for use with Oracle XML&nbsp;DB, using PL/SQL procedure <code>DBMS_XMLSCHEMA</code>.<code>registerSchema</code>. Examples of both kinds of registration are provided.</p>
<div class="section">
<p>For example, to register an XML schema with location <code>http://www.example.com/Address</code>, first register it for use with Oracle XML&nbsp;DB, as shown in <a href="xdb_jcr.htm#GUID-AF06141F-4A04-40BD-9E8A-7ABA85D39EA9__BABEBHGE">Example 31-9</a>. Then, register it for use with JCR, using Oracle XML DB Content Connector Java APIs, as shown in <a href="xdb_jcr.htm#GUID-AF06141F-4A04-40BD-9E8A-7ABA85D39EA9__BABEHAEI">Example 31-10</a>.</p>
<div class="infobox-note" id="GUID-AF06141F-4A04-40BD-9E8A-7ABA85D39EA9__GUID-097BA31F-3360-410C-BE58-8AE858166111">
<p class="notep1">Note:</p>
<p>You can use only globally registered XML schemas (<code>local =&gt; false</code>) with JCR.</p>
</div>
<p>The list of XML schemas registered for use with JCR is stored in the <code>OracleRepository</code> object. You can save this registration data by storing the <code>OracleRepository</code> object in a JNDI directory, as recommended by the JCR specification.</p>
<p>JCR requires that each node type have a unique name. By default, Oracle XML DB Content Connector generates JCR nodes types that correspond to a registered XML schema in the target namespace of the XML schema. If you wish to register two XML schemas with the same namespace, and the XML schemas declare types with the same names, you can avoid a name clash by overriding the namespace into which the JCR node types are generated. Refer to the Javadoc of method <code>registerXMLSchema()</code> for details.</p>
<div class="infoboxnotealso" id="GUID-AF06141F-4A04-40BD-9E8A-7ABA85D39EA9__GUID-F890B3A7-A87A-4EDE-A07F-14B6A6FD2E6B">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xdb05sto.htm#GUID-E27F30C8-3081-403B-B75C-4A84C3F256EF" title="Before an XML schema can be used by Oracle XML&nbsp;DB, you must register it. It can then be used to create XMLType tables and columns and to validate XML documents. If schema registration fails then the database is restored to the state it had prior to the registration attempt.">XML Schema Registration with Oracle XML&nbsp;DB</a>&#34;</span> for information about registering XML schemas with Oracle XML&nbsp;DB</p>
</li>
<li>
<p><a class="olink JAXML" target="_blank" href="../JAXML/toc.htm"><span class="italic">Oracle Database XML Java API Reference</span></a>, package <code>oracle.jcr</code>, for information on Java method <code>registerXMLSchema()</code></p>
</li>
</ul>
</div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-AF06141F-4A04-40BD-9E8A-7ABA85D39EA9__BABEBHGE">
<p class="titleinexample">Example 31-9 Registering an XML Schema for Use with Oracle XML&nbsp;DB</p>
<pre dir="ltr">BEGIN
  DBMS_XMLSCHEMA.registerSchema(
    SCHEMAURL       =&gt; &#39;http://www.example.com/Address&#39;,
    SCHEMADOC       =&gt; <span class="italic">bfileContainingSchema</span>,
    LOCAL           =&gt; FALSE,
    ENABLEHIERARCHY =&gt; DBMS_XMLSCHEMA.ENABLE_HIERARCHY_RESMETADATA);
END;
/
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-AF06141F-4A04-40BD-9E8A-7ABA85D39EA9__BABEHAEI">
<p class="titleinexample">Example 31-10 Registering an XML Schema for Use with JCR</p>
<pre dir="ltr"> 
import oracle.jcr.nodetype.OracleNodeTypeManager;...
OracleNodeTypeManager ntm = (OracleNodeTypeManager)
  session.getWorkspace().getNodeTypeManager();
 
ntm.registerXMLSchema(&#34;http://www.example.com/Address&#34;, null);
</pre></div>
<!-- class="example" --></div>
</div>
<a id="ADXDB5653"></a>
<div class="props_rev_3"><a id="GUID-A4CBF14F-4749-4A78-855C-3B31A4700F10"></a>
<h3 id="ADXDB-GUID-A4CBF14F-4749-4A78-855C-3B31A4700F10" class="sect3"><span class="enumeration_section">31.11.3</span> How JCR Node Types are Generated from XML Schemas</h3>
<div>
<p>Oracle XML DB Content Connector generates JCR node types from XML schemas that are registered for JCR use.</p>
<p>The type models of JCR and XML Schema are similar but not equivalent. Some aspects of XML Schema have no representation in JCR. For example, some constraining facets of an XML-schema simple type are not discoverable through JCR. They are enforced by Oracle XML DB Content Connector nonetheless.</p>
<p>More generally, the JCR node types generated from an XML schema do not augment, detract, or alter the XML schema validation performed when XML data that conforms to that XML schema is created or updated, whether through JCR or other interfaces.</p>
</div>
<a id="ADXDB5655"></a><a id="ADXDB5654"></a>
<div class="props_rev_3"><a id="GUID-32FD8206-3F0D-44A6-A0C9-90731E31218A"></a>
<h4 id="ADXDB-GUID-32FD8206-3F0D-44A6-A0C9-90731E31218A" class="sect4"><span class="enumeration_section">31.11.3.1</span> JCR and XML Schema Built-In Simple Types</h4>
<div>
<p>A JCR node type is provided for each XML Schema built-in type. For example, JCR node type <code>xsd:decimal</code> corresponds to XML Schema built-in type <code>xsd:decimal</code>. The inheritance hierarchy of the JCR node types follows that of the built-in types. For example, <code>xsd:integer</code> is a subtype of <code>xsd:decimal</code>.</p>
<div class="section">
<p>Each XML Schema built-in type maps to a JCR property value type, which is used to represent values of that type in JCR.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-32FD8206-3F0D-44A6-A0C9-90731E31218A__CHDFEEDH">
<p class="titleintable">Table 31-2 &nbsp;XML Schema Built-In Types Mapped to JCR Property Value Types</p>
<table class="cellalignment3420" title="&nbsp;XML Schema Built-In Types Mapped to JCR Property Value Types" summary="Rows are types. First column are XML Schema Built-In Types and second column are corresponding JCR Property Types">
<thead>
<tr class="cellalignment3411">
<th class="cellalignment3425" id="d148073e2369">XML Schema Built-in Type</th>
<th class="cellalignment3425" id="d148073e2372">JCR Property Value Type</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2377" headers="d148073e2369">
<p><code>xsd:anySimpleType</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2377 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2386" headers="d148073e2369">
<p><code>xsd:anyURI</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2386 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2395" headers="d148073e2369">
<p><code>xsd:base64Binary</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2395 d148073e2372">
<p><code>BINARY</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2404" headers="d148073e2369">
<p><code>xsd:boolean</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2404 d148073e2372">
<p><code>BOOLEAN</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2413" headers="d148073e2369">
<p><code>xsd:byte</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2413 d148073e2372">
<p><code>LONG</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2422" headers="d148073e2369">
<p><code>xsd:date</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2422 d148073e2372">
<p><code>DATE</code> (<a href="xdb_jcr.htm#GUID-32FD8206-3F0D-44A6-A0C9-90731E31218A__CHDFIBBF">1</a>)</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2435" headers="d148073e2369">
<p><code>xsd:dateTime</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2435 d148073e2372">
<p><code>DATE</code> (<a href="xdb_jcr.htm#GUID-32FD8206-3F0D-44A6-A0C9-90731E31218A__CHDFIBBF">1</a>)</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2448" headers="d148073e2369">
<p><code>xsd:decimal</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2448 d148073e2372">
<p><code>DOUBLE</code> (<a href="xdb_jcr.htm#GUID-32FD8206-3F0D-44A6-A0C9-90731E31218A__CHDFJFDH">2</a>)</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2461" headers="d148073e2369">
<p><code>xsd:double</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2461 d148073e2372">
<p><code>DOUBLE</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2470" headers="d148073e2369">
<p><code>xsd:duration</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2470 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2479" headers="d148073e2369">
<p><code>xsd:ENTITIES</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2479 d148073e2372">
<p><code>STRING</code> (<a href="xdb_jcr.htm#GUID-32FD8206-3F0D-44A6-A0C9-90731E31218A__CHDGFFFG">3</a>)</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2493" headers="d148073e2369">
<p><code>xsd:ENTITY</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2493 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2502" headers="d148073e2369">
<p><code>xsd:float</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2502 d148073e2372">
<p><code>DOUBLE</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2511" headers="d148073e2369">
<p><code>xsd:gDay</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2511 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2520" headers="d148073e2369">
<p><code>xsd:gMonth</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2520 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2529" headers="d148073e2369">
<p><code>xsd:gMonthDay</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2529 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2538" headers="d148073e2369">
<p><code>xsd:gYear</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2538 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2547" headers="d148073e2369">
<p><code>xsd:gYearMonth</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2547 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2556" headers="d148073e2369">
<p><code>xsd:hexBinary</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2556 d148073e2372">
<p><code>BINARY</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2565" headers="d148073e2369">
<p><code>xsd:ID</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2565 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2574" headers="d148073e2369">
<p><code>xsd:IDREF</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2574 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2583" headers="d148073e2369">
<p><code>xsd:IDREFS</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2583 d148073e2372">
<p><code>STRING</code> (<a href="xdb_jcr.htm#GUID-32FD8206-3F0D-44A6-A0C9-90731E31218A__CHDGFFFG">3</a>)</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2597" headers="d148073e2369">
<p><code>xsd:int</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2597 d148073e2372">
<p><code>LONG</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2606" headers="d148073e2369">
<p><code>xsd:integer</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2606 d148073e2372">
<p><code>LONG</code> (<a href="xdb_jcr.htm#GUID-32FD8206-3F0D-44A6-A0C9-90731E31218A__CHDFJFDH">2</a>)</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2619" headers="d148073e2369">
<p><code>xsd:language</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2619 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2628" headers="d148073e2369">
<p><code>xsd:long</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2628 d148073e2372">
<p><code>LONG</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2637" headers="d148073e2369">
<p><code>xsd:Name</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2637 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2646" headers="d148073e2369">
<p><code>xsd:NCName</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2646 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2655" headers="d148073e2369">
<p><code>xsd:negativeInteger</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2655 d148073e2372">
<p><code>LONG</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2664" headers="d148073e2369">
<p><code>xsd:NMTOKEN</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2664 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2673" headers="d148073e2369">
<p><code>xsd:NMTOKENS</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2673 d148073e2372">
<p><code>STRING</code> (<a href="xdb_jcr.htm#GUID-32FD8206-3F0D-44A6-A0C9-90731E31218A__CHDGFFFG">3</a>)</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2686" headers="d148073e2369">
<p><code>xsd:nonNegativeInteger</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2686 d148073e2372">
<p><code>LONG</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2695" headers="d148073e2369">
<p><code>xsd:nonPositiveInteger</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2695 d148073e2372">
<p><code>LONG</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2705" headers="d148073e2369">
<p><code>xsd:normalizedString</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2705 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2714" headers="d148073e2369">
<p><code>xsd:NOTATION</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2714 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2723" headers="d148073e2369">
<p><code>xsd:positiveInteger</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2723 d148073e2372">
<p><code>LONG</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2732" headers="d148073e2369">
<p><code>xsd:QName</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2732 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2741" headers="d148073e2369">
<p><code>xsd:short</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2741 d148073e2372">
<p><code>LONG</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2750" headers="d148073e2369">
<p><code>xsd:string</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2750 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2759" headers="d148073e2369">
<p><code>xsd:time</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2759 d148073e2372">
<p><code>DATE</code> (<a href="xdb_jcr.htm#GUID-32FD8206-3F0D-44A6-A0C9-90731E31218A__CHDFIBBF">1</a>)</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2772" headers="d148073e2369">
<p><code>xsd:token</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2772 d148073e2372">
<p><code>STRING</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2781" headers="d148073e2369">
<p><code>xsd:unsignedByte</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2781 d148073e2372">
<p><code>LONG</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2790" headers="d148073e2369">
<p><code>xsd:unsignedInt</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2790 d148073e2372">
<p><code>LONG</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2799" headers="d148073e2369">
<p><code>xsd:unsignedLong</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2799 d148073e2372">
<p><code>LONG</code></p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3426" id="d148073e2809" headers="d148073e2369">
<p><code>xsd:unsignedShort</code></p>
</td>
<td class="cellalignment3426" headers="d148073e2809 d148073e2372">
<p><code>LONG</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p>Notes for <a href="xdb_jcr.htm#GUID-32FD8206-3F0D-44A6-A0C9-90731E31218A__CHDFEEDH" title="Rows are types. First column are XML Schema Built-In Types and second column are corresponding JCR Property Types">Table 31-2</a>:</p>
<ol>
<li id="GUID-32FD8206-3F0D-44A6-A0C9-90731E31218A__CHDFIBBF">
<p>The JCR <code>DATE</code> property type is accessed using <code>java.util.Calendar</code> objects. Since <code>Calendar</code> requires all fields to be set, a mask of <code>1970-01-01T00:00:00.000+00:00</code> is used to supply default values for missing fields when <code>Property.getDate()</code> or <code>Value.getDate()</code> is called. This includes omitted hour/minute/second values (for <code>xsd:date</code>), year/month/day values (for <code>xsd:time</code>), or time-zone values (for <code>xsd:date</code>, <code>xsd:time</code>, and <code>xsd:dateTime</code>). Calling <code>Property.getString()</code> or <code>Value.getString()</code> returns the unparsed string representation. Similarly, <code>Property.setValue(String)</code> or <code>Property.setValue(valueFactory.createValue(String))</code> may be used to set <code>DATE</code> properties without applying the mask.</p>
</li>
<li id="GUID-32FD8206-3F0D-44A6-A0C9-90731E31218A__CHDFJFDH">
<p>The value space of <code>xsd:decimal</code> and <code>xsd:integer</code> exceeds that of the corresponding JCR types, <code>DOUBLE</code> and <code>LONG</code> (accessed as Java <code>double</code> and <code>long</code> values). Consequently, some <code>xsd:decimal</code> and <code>xsd:integer</code> values can only be accessed in JCR as strings. For example, <code>bigIntegerProperty.getLong()</code> throws a <code>javax.jcr.ValueFormatException</code>, but <code>bigIntegerProperty.getString()</code> returns the unparsed string representation. Similarly, <code>Property.setValue(String)</code> or <code>Property.setValue(valueFactory.createValue(String))</code> may be used to set <code>DOUBLE</code> or <code>LONG</code> properties to values outside the JCR value space.</p>
</li>
<li id="GUID-32FD8206-3F0D-44A6-A0C9-90731E31218A__CHDGFFFG">
<p><code>xsd:ENTITIES</code>, <code>xsd:IDREFS</code>, and <code>xsd:NMTOKENS</code> are represented in JCR as multi-valued <code>STRING</code> properties.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="ADXDB5656"></a>
<div class="props_rev_3"><a id="GUID-910CAE60-1A75-4975-B6EE-8A3C02CBC13B"></a>
<h4 id="ADXDB-GUID-910CAE60-1A75-4975-B6EE-8A3C02CBC13B" class="sect4"><span class="enumeration_section">31.11.3.2</span> JCR and Simple Types Defined by XML Schema</h4>
<div>
<p>A JCR node type is created for each simple type defined in an XML schema. The inheritance hierarchy of the JCR node types follows that of the XML Schema types.</p>
<p>A derived-by-list simple type is represented by a multi-valued JCR property definition.</p>
<p>A derived-by-union simple type is represented by a JCR property definition with property type <code>UNDEFINED</code>.</p>
<p>The JCR node type corresponding to an anonymous simple type has a synthetic name <code>anonymousNodeType#</code><span class="italic"><code>sequenceNumber</code></span>. Your application should not rely on the synthesized name. It is not guaranteed to be the same across sessions, and it may change when an XML schema is registered or unregistered for JCR use or the definition of a registered XML schema is changed.</p>
</div>
</div>
<a id="ADXDB5657"></a>
<div class="props_rev_3"><a id="GUID-0B1AC6D4-713A-4536-83BF-FB5688AFB574"></a>
<h4 id="ADXDB-GUID-0B1AC6D4-713A-4536-83BF-FB5688AFB574" class="sect4"><span class="enumeration_section">31.11.3.3</span> JCR and Complex Types Defined by XML Schema</h4>
<div>
<p>A JCR node type is created for each complex type defined in an XML schema. The inheritance hierarchy of the JCR node types follows that of the XML Schema types.</p>
<p>For a JCR node type corresponding to an XML Schema complex type:</p>
<ul style="list-style-type: disc;">
<li>
<p>A property definition is created for each attribute declaration of the complex type. Attribute declarations or attribute groups referenced by name in a complex type are treated as though they were defined in line.</p>
</li>
<li>
<p>A residual property definition is created if the complex type has an attribute wildcard.</p>
</li>
<li>
<p>A child node definition is created for each uniquely-named element declaration in the complex type&#39;s content model. Element declarations or module groups referenced by name are treated as though they were defined in line. If an element declaration is the head of a substitution group, a child node definition is also created for each element declaration within the substitution group.</p>
</li>
<li>
<p>A residual child node definition is created if the complex type has an element wildcard.</p>
</li>
<li>
<p>A <code>jcr:xmltext</code> child node definition is created if the complex type permits XML text, either because <code>xsd:mixed = &#34;true&#34;</code> or it is an <code>xsd:simpleContent</code> definition.</p>
</li>
</ul>
<p>The JCR node type for a complex type supports child node ordering.</p>
<p>It is not possible to determine whether a type was derived by extension or restriction using JCR.</p>
<p>The JCR node type corresponding to an anonymous complex type has a synthetic name <code>anonymousNodeType#</code><span class="italic"><code>sequenceNumber</code></span>. Your application should not rely on the synthesized name. It is not guaranteed to be the same across sessions, and it may change when an XML schema is registered or deregistered for JCR use or the definition of a registered XML schema is changed.</p>
</div>
</div>
<a id="ADXDB5658"></a>
<div class="props_rev_3"><a id="GUID-4B792BDD-AB64-45C8-A5F7-37B6049FE8C2"></a>
<h4 id="ADXDB-GUID-4B792BDD-AB64-45C8-A5F7-37B6049FE8C2" class="sect4"><span class="enumeration_section">31.11.3.4</span> JCR and Global XML Element Declarations</h4>
<div>
<p>A JCR node type is created for each global element declaration in an XML schema. The local name of the generated node type is formed by prepending an underscore (<code>_</code>) to the local name of the global element declaration. For example, in a namespace-qualified purchase-order XML schema, a node type named <code>po:_purchaseOrder</code> is created for global element named <code>po:purchaseOrder</code>.</p>
</div>
</div>
</div>
</div>
<hr/>
<br/>
<p style="text-decoration:underline">Footnote Legend</p>
Footnote&nbsp;1:
<p>This statement is split across two lines for the purpose of documentation.</p>
<br/></div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3410">
<tr>
<td class="cellalignment3417">
<table class="cellalignment3415">
<tr>
<td class="cellalignment3414"><a href="xdb_repos_events.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3414"><a href="xdb23jv1.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3419">
<table class="cellalignment3413">
<tr>
<td class="cellalignment3414"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3414"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3414"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3414"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3414"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3414"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>


</body></html>