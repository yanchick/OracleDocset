<html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-1615"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Access%20to%20Oracle%20XML%C2%A0DB%20Repository%20Data"></a><title>Access to Oracle XML&nbsp;DB Repository Data</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW."/>
<meta name="keywords" content="foldering, WebDAV, definition, resource, access, XDB database schema (user account), resource document, repository, Oracle XML DB, Repository, , See, folder, directory, path name, path component of a resource path name, component of a resource path name, resource name, link name, resource content, definition, content of a resource, XDBBinary element, ACL, access control list, data storage, Oracle ASM virtual folder, resolution, repository link, link, folder link, folder, document link, document, hard link, hard, weak link, weak, path-based access to repository resources, navigational access to repository resources, protocols, access to repository resources, HTTP, accessing repository resources, Oracle ASM files, accessing, query-based access to resources, using SQL, linking, repository, link-properties document, servlets, accessing repository data, folder-restricted query, hierarchical repository index, index, hierarchical repository, hierarchical index"/>
<meta name="dcterms.created" content="2016-12-08T13:53:25Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="XML DB Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41152-15"/>
<meta name="dcterms.isVersionOf" content="ADXDB"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="partpg5.htm" title="Previous" type="text/html"/>
<link rel="Next" href="xdb_repos_config.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41152-15.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39"></a> <span id="PAGE" style="display:none;">34/61</span> <!-- End Header -->
<script>
//<![CDATA[
window.name='xdb16fol'
//]]>
</script> <script>
    function footdisplay(footnum,footnote) {
    var msg = window.open('', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');

    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">');
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>');
    msg.document.write('Footnote&amp;nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('');
    msg.document.write('<style> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
</script><noscript>
<p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
</noscript><a id="ADXDB2000"></a>
<h1 id="ADXDB-GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" class="sect1"><span class="enumeration_chapter">21</span> Access to Oracle XML&nbsp;DB Repository Data</h1>
<div>
<p>There are several ways to access and manipulate data in Oracle XML&nbsp;DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML&nbsp;DB resource Application Program Interfaces (APIs); and the repository views <code>RESOURCE_VIEW</code> and <code>PATH_VIEW</code>.</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="xdb16fol.htm#GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921" title="Using Oracle XML&nbsp;DB Repository you can store content in the database in hierarchical structures, as opposed to traditional relational database structures. Although the repository can manage any kind of content, it provides specialized capabilities and optimizations related to managing resources with XML content.">Overview of Oracle XML&nbsp;DB Repository</a></p>
</li>
<li>
<p><a href="xdb16fol.htm#GUID-FD3B8650-EFA3-474E-9DA6-A0A78161DAA0" title="Oracle XML&nbsp;DB Repository can be thought of as a file system of database objects rather than files. It is a hierarchical set of database objects, across all XML and database schemas, that are mapped to path names.">Repository Terminology and Supplied Resources</a></p>
</li>
<li>
<p><a href="xdb16fol.htm#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" title="Oracle XML&nbsp;DB Repository resources conform to the Oracle XML&nbsp;DB XML schema XDBResource.xsd. The elements in a resource include those needed to persistently store WebDAV-defined properties, such as creation date, modification date, WebDAV locks, owner, ACL, language, and character set.">Oracle XML&nbsp;DB Repository Resources</a></p>
</li>
<li>
<p><a href="xdb16fol.htm#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6" title="Oracle XML&nbsp;DB Repository folders support the same protocol standards used by many operating systems. This lets a repository folder act like a native folder (directory) in supported operating-system environments.">Navigational or Path Access to Repository Resources</a></p>
</li>
<li>
<p><a href="xdb16fol.htm#GUID-00093774-B340-4178-9E9C-080EC8592098" title="PL/SQL package DBMS_XDB_REPOS provides subprograms that act on Oracle XML&nbsp;DB Repository resources. This API is based on the public views RESOURCE_VIEW and PATH_VIEW, which enable SQL access to repository data through protocols such as FTP and HTTP(S)/WebDAV.">Query-Based Access to Repository Resources</a></p>
</li>
<li>
<p><a href="xdb16fol.htm#GUID-B663D1C9-894E-4518-B66B-B9D9484819BC" title="Oracle XML&nbsp;DB implements Java Servlet API, version 2.2.">Servlet Access to Repository Resources</a></p>
</li>
<li>
<p><a href="xdb16fol.htm#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83" title="You can operate on data stored in Oracle XML&nbsp;DB Repository resources using Java, PL/SQL, Internet protocols, and Oracle XML DB Content Connector. The most common operations are described, along with the required database permissions to use them.">Operations on Repository Resources</a></p>
</li>
<li>
<p><a href="xdb16fol.htm#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75" title="In SQL you can access the content of a document in Oracle XML&nbsp;DB Repository using PL/SQL constructor XDBURIType or using RESOURCE_VIEW and the corresponding resource document.">Accessing the Content of Repository Resources Using SQL</a></p>
</li>
<li>
<p><a href="xdb16fol.htm#GUID-F11DE6D9-61DC-4A55-A3A5-74A3590928A3" title="You can access the content of an XML Schema-based document in the same way as for a non-schema-based document: use the corresponding resource document. Or you can access it as a row in the default table that was defined when the XML schema was registered with Oracle XML&nbsp;DB.">Access to the Content of XML Schema-Based Documents</a></p>
</li>
<li>
<p><a href="xdb16fol.htm#GUID-DE0B24FB-D864-4657-B03C-49442F516DA7" title="You can update the content of documents stored in Oracle XML&nbsp;DB Repository using Internet protocols or SQL.">Update of the Content of Repository Documents</a></p>
</li>
<li>
<p><a href="xdb16fol.htm#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B" title="Examples here illustrate folder-restricted queries of the repository using RESOURCE_VIEW and PATH_VIEW together with Oracle SQL functions equals_path and under_path.">Querying Resources in RESOURCE_VIEW and PATH_VIEW</a></p>
</li>
<li>
<p><a href="xdb16fol.htm#GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D" title="Oracle XML&nbsp;DB uses a hierarchical index for Oracle XML&nbsp;DB Repository, to optimize the performance of path-based and folder-restricted queries of the repository. It is implemented as an Oracle domain index.">Oracle XML&nbsp;DB Hierarchical Repository Index</a></p>
</li>
</ul>
</div>
<a id="ADXDB5286"></a><a id="ADXDB5285"></a>
<div class="props_rev_3"><a id="GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921"></a>
<h2 id="ADXDB-GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921" class="sect2"><span class="enumeration_section">21.1</span> Overview of Oracle XML&nbsp;DB Repository</h2>
<div>
<p>Using Oracle XML&nbsp;DB Repository you can store content in the database in hierarchical structures, as opposed to traditional relational database structures. Although the repository can manage any kind of content, it provides specialized capabilities and optimizations related to managing resources with XML content.</p>
<p>Relational databases are traditionally poor at managing hierarchical structures and traversing a path or a URL. Oracle XML&nbsp;DB Repository provides you with a hierarchical organization of XML content in the database. You can query and manage it as if it were organized using files and folders.</p>
<p>The relational table-row-column metaphor is an effective model for managing highly structured data. It can be less effective for managing semi-structured and unstructured data, such as document-oriented XML data.</p>
<p>For example, a book is not easily represented as a set of rows in a table. It might be more natural to represent a book as a hierarchy, book&thinsp;&mdash;&thinsp;chapter&thinsp;&mdash;&thinsp;section&thinsp;&mdash;&thinsp;paragraph, and to represent the hierarchy as a set of folders and subfolders.</p>
<p>A hierarchical repository index speeds up folder and path traversals. Oracle XML&nbsp;DB includes a patented hierarchical index that speeds up folder and path traversals in Oracle XML&nbsp;DB Repository. The hierarchical repository index is transparent to end users, and lets Oracle XML&nbsp;DB perform folder and path traversals at speeds comparable to or faster than conventional file systems.</p>
<p><a href="xdb16fol.htm#GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921__i1044265">Figure 21-1</a> is an example of a hierarchical structure that shows a typical tree of folders and files in Oracle XML&nbsp;DB Repository. The top of the tree shows <code>/</code>, the <a id="d109278e199" class="indexterm-anchor"></a>root folder.</p>
<div class="figure" id="GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921__i1044265">
<p class="titleinfigure">Figure 21-1 A Folder Tree, Showing Hierarchical Structures in the Repository</p>
<img width="665" height="533" src="img/GUID-7216CA1C-668D-40D5-8A5F-D2B075337565-default.gif" alt="Description of Figure 21-1 follows" title="Description of Figure 21-1 follows"/><br/>
<a href="img_text/GUID-7216CA1C-668D-40D5-8A5F-D2B075337565-print.htm">Description of &#34;Figure 21-1 A Folder Tree, Showing Hierarchical Structures in the Repository&#34;</a></div>
<!-- class="figure" -->
<div class="infobox-note" id="GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921__GUID-2FFD4B23-3914-4D25-B3F2-BBFE00859E30">
<p class="notep1">Caution:</p>
<p>Folder <code>/sys</code> is used by Oracle XML&nbsp;DB to maintain <span class="italic">system-defined</span> XML schemas, access control lists (ACLs), and so on. Do <span class="italic">not</span> add or modify any data in folder <code>/sys</code>.</p>
</div>
<p>Your applications can access content in Oracle XML&nbsp;DB Repository using standard connect-access protocols such as FTP, HTTP(S), and WebDAV, in addition to languages SQL, PL/SQL, Java, and C. Oracle XML&nbsp;DB adds native support to Oracle Database for these protocols, which were designed for document-centric operations. By providing support for these protocols, Oracle XML&nbsp;DB lets Microsoft Windows Explorer, Microsoft Office, and products from vendors such as Altova and Adobe work directly with XML content stored in the repository.</p>
<p>The repository gives you direct access to XML content stored in Oracle Database, as if it were stored in a file system. You can set access control privileges on repository files and folders.</p>
<p>These features are available because the repository is modeled on <strong class="term">WebDAV</strong>, an IETF standard that defines a set of extensions to the HTTP protocol. WebDAV lets an HTTP server act as a file server for a DAV-enabled client. For example, a WebDAV-enabled editor can interact with an HTTP/WebDAV server as if it were a file system.</p>
<p>The WebDAV standard uses the term <strong class="term">resource</strong> to describe a file or a folder. Each resource managed by a WebDAV server is identified by a URL. A resource has not only content but also associated metadata.</p>
<p>The following topics cover how to access data in Oracle XML&nbsp;DB Repository folders using the standard protocols. They discuss APIs that you can use to access the repository object hierarchy using Java, SQL, and PL/SQL.</p>
<div class="infoboxnotealso" id="GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921__GUID-46ECB94A-C0F9-44E5-98AE-3EF5208D7165">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="xdb18res.htm#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">Repository Access Using RESOURCE_VIEW and PATH_VIEW</a></p>
</li>
<li>
<p><a href="xdb19rpl.htm#GUID-04D3270F-1AC3-407B-B730-6B5A93AA5D7C" title="PL/SQL packages DBMS_XDB_CONFIG and DBMS_XDB_REPOS together provide the Oracle XML&nbsp;DB resource application program interface (API) for PL/SQL. You use the former to configure Oracle XML&nbsp;DB and its repository. You use the latter to perform other, non-configuration operations on the repository.">PL/SQL Access to Oracle XML&nbsp;DB Repository</a></p>
</li>
<li>
<p><a href="xdb21sec.htm#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a></p>
</li>
<li>
<p><a href="xdb22pro.htm#GUID-0476309D-E3DF-4C56-BF21-68CD04D00C98" title="You can access Oracle XML&nbsp;DB Repository data using protocols FTP and HTTP(S)/WebDAV.">Repository Access Using Protocols</a></p>
</li>
</ul>
</div>
</div>
<a id="ADXDB4176"></a>
<div class="props_rev_3"><a id="GUID-C0C5F058-2CCE-4B11-9A79-4FD45D71AB7B"></a>
<h3 id="ADXDB-GUID-C0C5F058-2CCE-4B11-9A79-4FD45D71AB7B" class="sect3"><span class="enumeration_section">21.1.1</span> Oracle XML&nbsp;DB Provides Name-Level Locking</h3>
<div>
<p>One key advantage of Oracle XML&nbsp;DB Repository is the ability to use SQL for repository operations in the context of a logical transaction. Applications can create long-running transactions that include updates to multiple folders. To provide high levels of concurrency, the repository uses name-level locking rather than folder-level locking</p>
<p>When using a relational database to maintain hierarchical folder structures, ensuring a high degree of concurrency when adding and removing items in a folder is a challenge. In conventional file systems there is no concept of a transaction. Each operation (add a file, create a subfolder, rename a file, delete a file, and so on) is treated as an atomic transaction. Once the operation has completed the change is immediately available to all other users of the file system.</p>
<p>In this situation, a conventional locking strategy that takes an exclusive lock on each updated folder or directory tree would quickly result in significant concurrency problems. Oracle XML&nbsp;DB solves this by providing for name-level locking rather than folder-level locking. Repository operations such as creating, renaming, moving, or deleting a sub-folder or file do not require that your operation be granted an exclusive write lock on the target folder. The repository manages concurrent folder operations by locking the name within the folder rather than the folder itself. The name and the modification type are put on a queue.</p>
<p>Only when the transaction is committed is the folder locked and its contents modified. Hence Oracle XML&nbsp;DB lets multiple applications perform concurrent updates on the contents of a folder. The queue is also used to manage folder concurrency by preventing two applications from creating objects with the same name.</p>
<p>Queuing folder modifications until commit time also minimizes I/O when a number of changes are made to a single folder in the same transaction. This is useful when several applications generate files quickly in the same directory, for example when generating trace or log files, or when maintaining a spool directory for printing or e-mail delivery.</p>
<div class="infobox-note" id="GUID-C0C5F058-2CCE-4B11-9A79-4FD45D71AB7B__GUID-27AF7B30-1106-4299-9252-E5960404ECB8">
<p class="notep1">Note:</p>
<p>As a consequence of transactional semantics enforced by the database, folders created using SQL statements are <span class="italic">not</span> visible to other database users until the transaction is committed. <span class="italic">Concurrent</span> access to Oracle XML&nbsp;DB Repository is controlled by the same mechanism used to control concurrency in Oracle Database. The integration of the repository with Oracle Database provides <span class="italic">strong management options for XML content</span>.</p>
</div>
</div>
</div>
<a id="ADXDB5287"></a>
<div class="props_rev_3"><a id="GUID-8DB9F05C-269A-48B2-BAE3-0B3FAA25B8D7"></a>
<h3 id="ADXDB-GUID-8DB9F05C-269A-48B2-BAE3-0B3FAA25B8D7" class="sect3"><span class="enumeration_section">21.1.2</span> Two Ways to Access Oracle XML&nbsp;DB Repository Resources</h3>
<div>
<p>You can access and manipulate Oracle XML&nbsp;DB Repository resources using SQL with special views or by navigating paths using a hierarchical index.</p>
<ul style="list-style-type: disc;">
<li>
<p>SQL access. This is done using special views that expose resource properties and path names, and map hierarchical access operators onto the Oracle XML&nbsp;DB schema. See <span class="q">&#34;<a href="xdb16fol.htm#GUID-00093774-B340-4178-9E9C-080EC8592098" title="PL/SQL package DBMS_XDB_REPOS provides subprograms that act on Oracle XML&nbsp;DB Repository resources. This API is based on the public views RESOURCE_VIEW and PATH_VIEW, which enable SQL access to repository data through protocols such as FTP and HTTP(S)/WebDAV.">Query-Based Access to Repository Resources</a>&#34;</span>.</p>
</li>
<li>
<p>Navigational or path-based access. This uses a hierarchical index of resources. Each resource has one or more unique path names that reflect its location in the hierarchy. You can navigate, using XPath expressions, to any repository resource.</p>
<p>A repository resource can be created as a reference to an existing <code>XMLType</code> object in the database. You can navigate to any such database object using XPath. See <span class="q">&#34;<a href="xdb16fol.htm#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6" title="Oracle XML&nbsp;DB Repository folders support the same protocol standards used by many operating systems. This lets a repository folder act like a native folder (directory) in supported operating-system environments.">Navigational or Path Access to Repository Resources</a>&#34;</span>.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-8DB9F05C-269A-48B2-BAE3-0B3FAA25B8D7__GUID-7B275F75-705A-44FE-BB10-D5862A7FF627">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xdb02rep.htm#GUID-BE3A92AD-5962-4E4B-A2BB-10DE5D5F1013" title="Design considerations for applications that use Oracle XML&nbsp;DB Repository include access method, security needs, and whether you need versioning.">Oracle XML&nbsp;DB Repository Access</a>&#34;</span> for guidance on selecting an access method</p>
</li>
<li>
<p><a href="xdb16fol.htm#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI" title="This table describes the API options for accessing Oracle XML DB Repository.">Table 21-3</a> for a summary comparison of the access methods</p>
</li>
</ul>
</div>
<p>A Uniform Resource Locator (URL) is used to access an Oracle XML&nbsp;DB resource. A URL includes the host name, protocol information, path name, and resource name of the object.</p>
</div>
</div>
<a id="ADXDB6114"></a>
<div class="props_rev_3"><a id="GUID-D2F0823F-0677-45D1-B51C-485E0A48D309"></a>
<h3 id="ADXDB-GUID-D2F0823F-0677-45D1-B51C-485E0A48D309" class="sect3"><span class="enumeration_section">21.1.3</span> Database Schema (User Account) XDB and Oracle XML&nbsp;DB Repository</h3>
<div>
<p>Database schema (user account) <code>XDB</code> owns <code>XMLType</code> table <code>XDB$RESOURCE</code>, which contains all of the resources (files and folders) in Oracle XML&nbsp;DB Repository. It also contains all of the <span class="italic">metadata</span> for managing the repository.</p>
<p>Database schema <code>XDB</code> is created during Oracle XML&nbsp;DB installation. The primary table in this schema is an <code>XMLType</code> table called <code>XDB$RESOURCE</code>, which contains one row for each resource (file or folder) in Oracle XML&nbsp;DB Repository. Documents in this table are referred to as <strong class="term">resource documents</strong>. The XML schema that defines the structure of an Oracle XML&nbsp;DB resource document is registered under URL <code>&#34;http://xmlns.oracle.com/xdb/XDBResource.xsd</code>.</p>
<p>The tables owned by database schema (user) <code>XDB</code> are <span class="italic">internal</span>. Oracle recommends the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Create a <span class="italic">dedicated tablespace</span> for use only by user <code>XDB</code>, which means also for Oracle XML&nbsp;DB Repository. Ensure that the tablespace is <span class="italic">not</span> read-only.</p>
</li>
<li>
<p>Do <span class="italic">not</span> directly manipulate any tables or data owned by user <code>XDB</code>. For example, do not compress or uncompress them.</p>
<p>Use only the PL/SQL subprograms and database views provided by Oracle XML&nbsp;DB to carry out operations on any tables or data owned by user <code>XDB</code>.</p>
</li>
<li>
<p><span class="italic">Never unlock</span> user <code>XDB</code>, under any circumstance.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-D2F0823F-0677-45D1-B51C-485E0A48D309__GUID-1A8340AF-DFF6-4392-A85E-1724909C3AF2">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="appaman.htm#GUID-F5072D79-E37E-4A44-B6EE-6CA8951CA232" title="PL/SQL package DBMS_XDB_ADMIN has subprograms for managing and configuring Oracle XML&nbsp;DB and Oracle XML&nbsp;DB Repository.">Package DBMS_XDB_ADMIN</a>,&#34;</span> for information about creating a dedicated tablespace for user <code>XDB</code> and the repository</p>
</li>
<li>
<p><a class="olink TDPSG20030" target="_blank" href="../TDPSG/GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm#TDPSG20030"><span class="italic">Oracle Database 2 Day + Security Guide</span></a> for information about database schema <code>XDB</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="ADXDB5288"></a>
<div class="props_rev_3"><a id="GUID-FD3B8650-EFA3-474E-9DA6-A0A78161DAA0"></a>
<h2 id="ADXDB-GUID-FD3B8650-EFA3-474E-9DA6-A0A78161DAA0" class="sect2"><span class="enumeration_section">21.2</span> Repository Terminology and Supplied Resources</h2>
<div>
<p>Oracle XML&nbsp;DB Repository can be thought of as a file system of database objects rather than files. It is a hierarchical set of database objects, across all XML and database schemas, that are mapped to path names.</p>
<p>The repository is a connected, directed, acyclic<a id="fn_1" href="#fn_1" onclick="footdisplay(1,&#34;The graph is established by the hard links that define the repository structure, and cycles are not permitted using hard links. You can, however, introduce cycles using weak links. See \&#34;Hard Links and Weak Links\&#34;. &#34;)"><sup>Foot&nbsp;1</sup></a> graph of resources, with a single root node (<code>/</code>). Each resource in the graph has one or more associated path names: the repository supports multiple links to a given resource.</p>
</div>
<a id="ADXDB5290"></a><a id="ADXDB5289"></a>
<div class="props_rev_3"><a id="GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5"></a>
<h3 id="ADXDB-GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5" class="sect3"><span class="enumeration_section">21.2.1</span> Repository Terminology</h3>
<div>
<p>Some terms that apply to Oracle XML&nbsp;DB Repository include resource, resource name, resource content, folder or directory, path name, path components, link name, access control list (ACL), and XDBBinary element. Some of these terms have common synonyms in other contexts.</p>
<ul style="list-style-type: disc;">
<li>
<p><strong class="term">resource</strong> &ndash; Any object or node in the repository hierarchy. A resource is identified by a Uniform Resource Locator (URL), which includes the path name and resource name of the object.</p>
<div class="infoboxnotealso" id="GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5__GUID-7DDDE82E-46C8-4576-9E64-CCFD6928317C">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xdb01int.htm#GUID-760E25BD-7270-433B-9515-D3DE68748CEC" title="Oracle XML&nbsp;DB Repository is a component of Oracle Database that lets you handle XML data using a file/folder/URL metaphor.">Oracle XML&nbsp;DB Repository: Overview</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="xdb16fol.htm#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" title="Oracle XML&nbsp;DB Repository resources conform to the Oracle XML&nbsp;DB XML schema XDBResource.xsd. The elements in a resource include those needed to persistently store WebDAV-defined properties, such as creation date, modification date, WebDAV locks, owner, ACL, language, and character set.">Oracle XML&nbsp;DB Repository Resources</a>&#34;</span></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong class="term">folder</strong> &ndash; A resource that can contain other resources. Sometimes called a <strong class="term">directory</strong>.</p>
</li>
<li>
<p><strong class="term">path name</strong> &ndash; A hierarchical name representing an absolute path to a resource. It is composed of a slash (<code>/</code>) representing the repository root, followed by zero or more <strong class="term">path components</strong> separated by slashes. A path component cannot be only <code>.</code> or <code>..</code>, but a period (<code>.</code>) can otherwise be used in a path component. A path component is composed of any characters in the database character set <span class="italic">except</span> slash (<code>/</code>), backslash (<code>\</code>), and those characters specified in the Oracle XML&nbsp;DB configuration file, <code>xdbconfig.xml</code>, by configuration parameter <code>/xdbconfig/sysconfig/invalid-pathname-chars</code>.</p>
</li>
<li>
<p><strong class="term">resource name</strong> (or <strong class="term">link name</strong>) &ndash; The name of a resource within its parent folder. This is the rightmost path component of a path name. Resource names must be unique within their immediately containing folder, and they are case-sensitive.</p>
</li>
<li>
<p><strong class="term">resource content</strong> &ndash; The body, or data, of a resource. This is what you get when you treat the resource as a file and ask for its content. This is always of type <code>XMLType</code>.</p>
</li>
<li>
<p><strong class="term">access control list</strong> (ACL) &ndash; An ordered list of rules that specify access privileges for principals (users or roles) to one or more repository resources.</p>
<div class="infoboxnotealso" id="GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5__GUID-73D9AE2D-3DDC-4B31-B791-71842C259834">
<p class="notep1">See Also:</p>
<p><a href="xdb21sec.htm#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a></p>
</div>
</li>
<li>
<p><strong class="term">XDBBinary element</strong> &ndash; An XML element that contains binary data. It is defined by the Oracle XML&nbsp;DB XML schema. <code>XDBBinary</code> elements are stored in the repository whenever unstructured binary data is uploaded into Oracle XML&nbsp;DB.</p>
</li>
</ul>
<p>Many terms used by Oracle XML&nbsp;DB have common synonyms in other contexts, as shown in <a href="xdb16fol.htm#GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5__g1046594" title="This table lists the Oracle XML DB foldering term synonyms.">Table 21-1</a>.</p>
<div class="tblformal" id="GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5__g1046594">
<p class="titleintable">Table 21-1 Synonyms for Oracle XML&nbsp;DB Repository Terms</p>
<table class="cellalignment3420" title="Synonyms for Oracle XML&nbsp;DB Repository Terms " summary="This table lists the Oracle XML DB foldering term synonyms.">
<thead>
<tr class="cellalignment3411">
<th class="cellalignment3480" id="d109278e815">Synonym</th>
<th class="cellalignment3480" id="d109278e818">Repository Term</th>
<th class="cellalignment3466" id="d109278e821">Usage</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3411">
<td class="cellalignment3483" id="d109278e826" headers="d109278e815">
<p>collection</p>
</td>
<td class="cellalignment3483" headers="d109278e826 d109278e818">
<p>folder</p>
</td>
<td class="cellalignment3469" headers="d109278e826 d109278e821">
<p>WebDAV</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3483" id="d109278e836" headers="d109278e815">
<p>directory</p>
</td>
<td class="cellalignment3483" headers="d109278e836 d109278e818">
<p>folder</p>
</td>
<td class="cellalignment3469" headers="d109278e836 d109278e821">
<p>operating systems</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3483" id="d109278e846" headers="d109278e815">
<p>privilege</p>
</td>
<td class="cellalignment3483" headers="d109278e846 d109278e818">
<p>privilege</p>
</td>
<td class="cellalignment3469" headers="d109278e846 d109278e821">
<p>permission</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3483" id="d109278e856" headers="d109278e815">
<p>right</p>
</td>
<td class="cellalignment3483" headers="d109278e856 d109278e818">
<p>privilege</p>
</td>
<td class="cellalignment3469" headers="d109278e856 d109278e821">
<p>various</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3483" id="d109278e866" headers="d109278e815">
<p>WebDAV folder</p>
</td>
<td class="cellalignment3483" headers="d109278e866 d109278e818">
<p>folder</p>
</td>
<td class="cellalignment3469" headers="d109278e866 d109278e821">
<p>Web folder</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3483" id="d109278e876" headers="d109278e815">
<p>role</p>
</td>
<td class="cellalignment3483" headers="d109278e876 d109278e818">
<p>group</p>
</td>
<td class="cellalignment3469" headers="d109278e876 d109278e821">
<p>access control</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3483" id="d109278e886" headers="d109278e815">
<p>revision</p>
</td>
<td class="cellalignment3483" headers="d109278e886 d109278e818">
<p>version</p>
</td>
<td class="cellalignment3469" headers="d109278e886 d109278e821">
<p>RCS, CVS</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3483" id="d109278e896" headers="d109278e815">
<p>file system</p>
</td>
<td class="cellalignment3483" headers="d109278e896 d109278e818">
<p>repository</p>
</td>
<td class="cellalignment3469" headers="d109278e896 d109278e821">
<p>operating systems</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3483" id="d109278e906" headers="d109278e815">
<p>hierarchy</p>
</td>
<td class="cellalignment3483" headers="d109278e906 d109278e818">
<p>repository</p>
</td>
<td class="cellalignment3469" headers="d109278e906 d109278e821">
<p>various</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3483" id="d109278e916" headers="d109278e815">
<p>file</p>
</td>
<td class="cellalignment3483" headers="d109278e916 d109278e818">
<p>resource</p>
</td>
<td class="cellalignment3469" headers="d109278e916 d109278e821">
<p>operating systems</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3483" id="d109278e926" headers="d109278e815">
<p>binding</p>
</td>
<td class="cellalignment3483" headers="d109278e926 d109278e818">
<p>link</p>
</td>
<td class="cellalignment3469" headers="d109278e926 d109278e821">
<p>WebDAV</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="ADXDB5291"></a>
<div class="props_rev_3"><a id="GUID-AC561AD3-D956-4A6C-9A7B-9DF803799FCC"></a>
<h3 id="ADXDB-GUID-AC561AD3-D956-4A6C-9A7B-9DF803799FCC" class="sect3"><span class="enumeration_section">21.2.2</span> Predefined Repository Files and Folders</h3>
<div>
<p>Certain files and folders are predefined for Oracle XML&nbsp;DB Repository. You can create additional ones for your own use.</p>
<div class="section">
<p>These are the predefined Oracle XML&nbsp;DB Repository files and folders:</p>
<pre>/dbfs<a id="fn_2" href="#fn_2" onclick="footdisplay(2,"><sup>Foot 2</sup></a>
/public
/sys
/sys/acls
/sys/acls/all_all_acl.xml
/sys/acls/all_owner_acl.xml
/sys/acls/bootstrap_acl.xml
/sys/acls/ro_all_acl.xml
/sys/apps
/sys/asm
/sys/log
/sys/schemas
/sys/schemas/PUBLIC
/sys/schemas/PUBLIC/www.w3.org
/sys/schemas/PUBLIC/www.w3.org/2001
/sys/schemas/PUBLIC/www.w3.org/2001/xml.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBResource.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBSchema.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBStandard.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/acl.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/dav.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/log
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/stats.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/xdbconfig.xsd
/xdbconfig.xml
</pre></div>
<!-- class="section" --></div>
</div>
</div>
<a id="ADXDB5292"></a>
<div class="props_rev_3"><a id="GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD"></a>
<h2 id="ADXDB-GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" class="sect2"><span class="enumeration_section">21.3</span> Oracle XML&nbsp;DB Repository Resources</h2>
<div>
<p>Oracle XML&nbsp;DB Repository resources conform to the Oracle XML&nbsp;DB XML schema <code>XDBResource.xsd</code>. The elements in a resource include those needed to persistently store WebDAV-defined properties, such as creation date, modification date, WebDAV locks, owner, ACL, language, and character set.</p>
<div class="infoboxnotealso" id="GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD__GUID-49B9F549-9824-437E-9ED7-3E266D3560AF">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="apphxdb.htm#GUID-939CFC41-A851-40F3-9D27-AA56C7259019" title="A full listing is presented of the Oracle XML&nbsp;DB-supplied XML schema XDBResource.xsd, which is used to represent Oracle XML&nbsp;DB resources.">XDBResource.xsd: XML Schema for Oracle XML&nbsp;DB Resources</a>&#34;</span></p>
</div>
<p>A resource index has a special element called <span class="bold"><code>Contents</code></span> that contains the contents of the resource.</p>
<p>The XML schema for a resource also defines an <span class="bold"><code>any</code></span> element, with <code>maxOccurs</code> attribute unbounded. An <code>any</code> element can contain any element outside of the Oracle XML&nbsp;DB XML namespace. Arbitrary instance-defined properties can be associated with the resource.</p>
</div>
<a id="ADXDB5295"></a>
<div class="props_rev_3"><a id="GUID-EF87A8A1-F762-49CE-BB56-0CA915E3CDC5"></a>
<h3 id="ADXDB-GUID-EF87A8A1-F762-49CE-BB56-0CA915E3CDC5" class="sect3"><span class="enumeration_section">21.3.1</span> Where Is Repository Data Stored?</h3>
<div>
<p>Oracle XML&nbsp;DB stores Oracle XML&nbsp;DB Repository data in a set of tables and indexes to which you have access.</p>
<p>If you register an XML schema and request that the tables be generated by Oracle XML&nbsp;DB, then the tables are created in your database schema. You are then able to see or modify them. Other users cannot see your tables unless you grant them permission to do so.</p>
</div>
<a id="ADXDB5296"></a>
<div class="props_rev_3"><a id="GUID-7B4BDF20-C0B4-448B-BB12-92158DDEB477"></a>
<h4 id="ADXDB-GUID-7B4BDF20-C0B4-448B-BB12-92158DDEB477" class="sect4"><span class="enumeration_section">21.3.1.1</span> Names of Generated Tables</h4>
<div>
<p>The names of generated tables are assigned by Oracle XML&nbsp;DB. They can be obtained by finding the <code>xdb:defaultTable</code> attribute in your XML schema document (or in the default XML schema document).</p>
<p>When you register an XML schema, you can alternatively provide your own table name, instead of using the default name supplied by Oracle XML&nbsp;DB. If the table specifies binary XML storage, then a document is encoded in binary XML format before storing it in the table.</p>
<div class="infoboxnotealso" id="GUID-7B4BDF20-C0B4-448B-BB12-92158DDEB477__GUID-B833AA9E-66F4-4640-91D4-6D52594D5571">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="xdb06stt.htm#GUID-54A3CBE8-19BE-43BB-8979-7769116B6F53" title="You can create default tables as part of XML schema registration. Default tables are most useful when documents are inserted using APIs and protocols such as FTP and HTTP(S), which do not provide any table specification.">Default Tables Created during XML Schema Registration</a> &#34;</span></p>
</div>
</div>
</div>
<a id="ADXDB5297"></a>
<div class="props_rev_3"><a id="GUID-26919CAE-E6D6-4F4C-8CE4-94E6EBD4B62B"></a>
<h4 id="ADXDB-GUID-26919CAE-E6D6-4F4C-8CE4-94E6EBD4B62B" class="sect4"><span class="enumeration_section">21.3.1.2</span> How Object-Relational Storage Is Defined for Repository Resources</h4>
<div>
<p>You can define object-relational storage for repository resources by subclassing or by storing data that conforms to a registered XML schema.</p>
<p>Applications that need to define object-relational storage for repository resources can do so in either of these ways:</p>
<ul style="list-style-type: disc;">
<li>
<p>Subclass the Oracle XML&nbsp;DB resource type. Subclassing Oracle XML&nbsp;DB resources requires privileges on the table <code>XDB$RESOURCE</code>.</p>
</li>
<li>
<p>Store data that conforms to a visible, registered XML schema.</p>
<div class="infoboxnotealso" id="GUID-26919CAE-E6D6-4F4C-8CE4-94E6EBD4B62B__GUID-9C264E48-21DC-4FDF-9B82-6609BAD69EFC">
<p class="notep1">See Also:</p>
<p><a href="xdb05sto.htm#GUID-C09824C1-6B02-4556-A265-B1749DEE8DE1" title="XML Schema is a standard for describing the content and structure of XML documents. You can register, update, and delete an XML schema used with Oracle XML&nbsp;DB. You can define storage structures to use for your XML schema-based data and map XML Schema data types to SQL data types.">XML Schema Storage and Query: Basic</a></p>
</div>
</li>
</ul>
</div>
</div>
<a id="ADXDB5298"></a>
<div class="props_rev_3"><a id="GUID-671B7B5E-1BC7-4F5D-8006-5C209113D9CF"></a>
<h4 id="ADXDB-GUID-671B7B5E-1BC7-4F5D-8006-5C209113D9CF" class="sect4"><span class="enumeration_section">21.3.1.3</span> Oracle ASM Virtual Folder</h4>
<div>
<p>The contents of the Oracle Automatic Storage Management (Oracle ASM) virtual folder, <code>/sys/asm</code> are Oracle ASM files and folders that are managed automatically by Oracle ASM.</p>
<div class="infoboxnotealso" id="GUID-671B7B5E-1BC7-4F5D-8006-5C209113D9CF__GUID-A925CB1A-E635-4611-A6B9-F1A6B62AB85F">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xdb16fol.htm#GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56" title="Oracle Automatic Storage Management (Oracle ASM) organizes database files into disk groups for simplified management, database mirroring, and I/O balancing. Repository access extends to Oracle ASM files, in the virtual repository folder /sys/asm. This access is reserved for database administrators (DBAs). It is not intended for developers.">Access to Oracle ASM Files Using Protocols and Resource APIs &ndash; For DBAs</a>&#34;</span></p>
</li>
<li>
<p><a class="olink OSTMG" target="_blank" href="../OSTMG/toc.htm"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="ADXDB4223"></a>
<div class="props_rev_3"><a id="GUID-40E826C1-DCDD-45B0-B960-C2020125A013"></a>
<h3 id="ADXDB-GUID-40E826C1-DCDD-45B0-B960-C2020125A013" class="sect3"><span class="enumeration_section">21.3.2</span> How Documents are Stored in Oracle XML&nbsp;DB Repository</h3>
<div>
<p>When an XML document that is based on a registered XML schema is loaded into the repository, the document is parsed and decomposed according to the schema into a set of SQL objects; and a corresponding resource document is created to provide repository access for the source XML document.</p>
<p>Oracle XML&nbsp;DB provides special handling for XML documents. The rules for storing the contents of an XML Schema-based XML document are defined by its XML schema. The content of the document is stored in the default table associated with the global element definition.</p>
<p>Oracle XML&nbsp;DB Repository also stores files that do not contain XML data, such as JPEG images or Word documents. The XML schema for each resource defines which elements are allowed, and specifies whether the content of these files is to be stored as <code>BLOB</code> or <code>CLOB</code> instances. The content of a non-schema-based XML document is stored as a <code>CLOB</code> instance in the repository.</p>
<p>There is one resource and one link-properties document for each file or folder in the repository. If there are multiple access paths to a given document then there is a link-properties document for each possible link. Both the resource document and the link-properties are stored as XML documents. All these documents are stored in tables in the repository.</p>
<p>When an XML file is loaded into the repository, the following sequence of events takes place:</p>
<ol>
<li>
<p>Oracle XML&nbsp;DB examines the root element of the XML document to see if it is associated with a known (registered) XML schema. This involves looking to see if the document includes a namespace declaration for the <code>XMLSchema-instance</code> namespace, and then looking for a <code>schemaLocation</code> or <code>noNamespaceSchemaLocation</code> attribute that identifies which XML schema the document is associated with.</p>
</li>
<li>
<p>If the document is based on a known XML schema, then the metadata for the XML schema is loaded from the XML schema cache.</p>
</li>
<li>
<p>The XML document is parsed and decomposed into a set of SQL objects derived from the XML schema.</p>
</li>
<li>
<p>The SQL objects created from the XML file are stored in the default table defined when the XML schema was registered with the database.</p>
</li>
<li>
<p>A resource document is created for each document processed. This lets the content of the document be accessed using the repository. The resource document for an XML Schema-based <code>XMLType</code> instance includes an <code>XMLRef</code> element. This element contains a <code>REF</code> of <code>XMLType</code> that can be used to locate the row in the default table containing the content associated with the resource.</p>
</li>
</ol>
</div>
</div>
<a id="ADXDB4209"></a>
<div class="props_rev_3"><a id="GUID-B20A2200-477D-48DE-AFF9-5EF5DE8BF554"></a>
<h3 id="ADXDB-GUID-B20A2200-477D-48DE-AFF9-5EF5DE8BF554" class="sect3"><span class="enumeration_section">21.3.3</span> Repository Data Access Control</h3>
<div>
<p>You can control access to the resources in Oracle XML&nbsp;DB Repository by using access control lists (ACLs), which are composed of access control entries (ACEs). An ACE grants or denies a set of privileges to a specific principal.</p>
<p>A principal can be a database user, a database role, an LDAP user, an LDAP group or the special principal <code>DAV::owner</code>, which refers to the owner of the resource. Each resource in the repository is protected by an ACL. The ACL determines which privileges, such as <code>read-properties</code> and <code>update</code>, a user has on the resource. Each repository operation includes a check of the ACL to determine if the current user is allowed to perform the operation.</p>
<p>By default, a new resource inherits the ACL of its parent folder. But you can set the ACL of a resource using PL/SQL procedure <code>DBMS_XDB_REPOS.setACL</code>. For more details on Oracle XML&nbsp;DB resource security, see <a href="xdb21sec.htm#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a>.</p>
<p>In the following example, the current user is <code>QUINE</code>. The query gives the number of resources in the folder <code>/public</code>. Assume that there are only two resources in this folder: <code>f1</code> and <code>f2</code>. Also assume that the ACL on <code>f1</code> grants the <code>read-properties</code> privilege to <code>QUINE</code> while the ACL on <code>f2</code> does not grant <code>QUINE</code> any privileges. A user needs the <code>read-properties</code> privilege on a resource for it to be visible to the user. The result of the query is <code>1</code>, because only <code>f1</code> is visible to <code>QUINE</code>.</p>
<pre dir="ltr">SELECT count(*) FROM RESOURCE_VIEW r WHERE under_path(r.res, &#39;/public&#39;) = 1;
 
COUNT(*)
--------
       1
</pre></div>
</div>
<a id="ADXDB5299"></a>
<div class="props_rev_3"><a id="GUID-B6979F05-B095-48A6-B78D-E20222138051"></a>
<h3 id="ADXDB-GUID-B6979F05-B095-48A6-B78D-E20222138051" class="sect3"><span class="enumeration_section">21.3.4</span> Repository Path-Name Resolution</h3>
<div>
<p>The data relating a folder to its contents is managed by the Oracle XML&nbsp;DB hierarchical repository index. This provides a fast mechanism for evaluating path names which is similar to the directory mechanisms that are used by operating-system file systems. You need certain privileges to resolve a path name.</p>
<p>Resources that are folders have the <code>Container</code> attribute of element <code>Resource</code> set to <code>true</code>.</p>
<p>To resolve a resource name in a folder, the current user must have the following privileges:</p>
<ul style="list-style-type: disc;">
<li>
<p><code>resolve</code> privilege on the folder</p>
</li>
<li>
<p><code>read-properties</code> on the resource in that folder</p>
</li>
</ul>
<p>If the user does not have these privileges, then the user receives an <code>access denied</code> error. Folder listings and other queries do not return a row when the <code>read-properties</code> privilege is denied on its resource.</p>
<div class="infobox-note" id="GUID-B6979F05-B095-48A6-B78D-E20222138051__GUID-A52D7021-F3C2-46D2-A2B5-0259BD44AC39">
<p class="notep1">Caution:</p>
<p>Error handling in path-name resolution differentiates between invalid resource names and resources that are not folders, for compatibility with file systems. Because Oracle XML&nbsp;DB resources are accessible from outside Oracle XML&nbsp;DB Repository (using SQL), denying read access on a folder that contains a resource does <span class="italic">not prevent</span> read access to that resource.</p>
</div>
<div class="infoboxnotealso" id="GUID-B6979F05-B095-48A6-B78D-E20222138051__GUID-FEADA446-C217-480F-95EF-9C61413986A5">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="apphxdb.htm#GUID-939CFC41-A851-40F3-9D27-AA56C7259019" title="A full listing is presented of the Oracle XML&nbsp;DB-supplied XML schema XDBResource.xsd, which is used to represent Oracle XML&nbsp;DB resources.">XDBResource.xsd: XML Schema for Oracle XML&nbsp;DB Resources</a>&#34;</span> for the definition of element <code>Resource</code> and its attribute <code>Container</code></p>
</div>
</div>
</div>
<a id="ADXDB2030"></a>
<div class="props_rev_3"><a id="GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655"></a>
<h3 id="ADXDB-GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655" class="sect3"><span class="enumeration_section">21.3.5</span> Link Types</h3>
<div>
<p>Links in Oracle XML&nbsp;DB can be repository links or document links. Repository links can be hard links or weak links. Document links can also be hard links or weak links, when their targets are repository resources.</p>
</div>
<a id="ADXDB5300"></a>
<div class="props_rev_3"><a id="GUID-7692F7E3-8C53-4A2C-BB26-807B32D63176"></a>
<h4 id="ADXDB-GUID-7692F7E3-8C53-4A2C-BB26-807B32D63176" class="sect4"><span class="enumeration_section">21.3.5.1</span> Repository Links and Document Links</h4>
<div>
<p>In addition to containing resources, a folder resource can contain links to other resources (files or folders). These repository links represent hierarchical repository relationships. By contrast, document links are arbitrary links among XML documents that are not necessarily repository resources.</p>
<p><strong class="term">Repository links</strong> are sometimes called <strong class="term">folder links</strong>. They are not to be confused with <strong class="term">document links</strong>, which correspond to the links provided by the XLink and XInclude standards, and which are also supported by Oracle XML&nbsp;DB. Repository links are navigational, folder&ndash;child links among repository resources. Document links are arbitrary links among documents that are not necessarily repository resources.</p>
<p>Repository links represent repository hierarchical relationships. Document links represent arbitrary relationships whose semantics derives from the applications that use them. Because they represent repository hierarchical relationships, repository links can be navigated using file system-related protocols. This is not true of document links. Because document links can represent arbitrary relationships, they can also represent repository relationships. When document links thus target resources, they can also be hard or weak.</p>
<div class="infoboxnotealso" id="GUID-7692F7E3-8C53-4A2C-BB26-807B32D63176__GUID-2593B60C-57AC-497E-9AC7-7C3B80C309B2">
<p class="notep1">See Also:</p>
<p><a href="xdb_xlink.htm#GUID-5731BA64-7DEB-44A2-925E-D07014372B66" title="You can use XLink and XInclude with resources in Oracle XML&nbsp;DB Repository.">How To Use XLink and XInclude with Oracle XML&nbsp;DB</a> for information about document links</p>
</div>
</div>
</div>
<a id="ADXDB5302"></a><a id="ADXDB5301"></a>
<div class="props_rev_3"><a id="GUID-72981E53-0B60-4096-80E0-06A139086DED"></a>
<h4 id="ADXDB-GUID-72981E53-0B60-4096-80E0-06A139086DED" class="sect4"><span class="enumeration_section">21.3.5.2</span> Hard Links and Weak Links</h4>
<div>
<p>Links that target repository resources can be hard or weak. Hard and weak links have different dependencies with respect to the resources that they target. Hard links cannot target ancestor folders; weak links can. You can query the repository path view, <code>PATH_VIEW</code>, to determine the type of a repository link.</p>
<p>Both <strong class="term">hard links</strong> and <strong class="term">weak links</strong> are references, or pointers, to physical data&thinsp;&mdash;&thinsp;(internal) repository resource identifiers. They do not point to symbolic names or paths to other links. Their targets are resolved at the time of link creation. Because they point directly to resource identifiers, hard and weak links cannot dangle: they remain valid even when their targets are renamed or moved. You need the same privileges to create or delete hard and weak links.</p>
<p>The difference between hard and weak links lies in their relationship to target resource deletion. A target resource is dependent on its hard links, in the sense that it cannot be deleted as long as it remains the target of a hard link. Deletion of a hard link also deletes the <a id="d109278e1607" class="indexterm-anchor"></a>resource targeted by the link, if the following are both true:</p>
<ul style="list-style-type: disc;">
<li>
<p>The resource is not versioned.</p>
</li>
<li>
<p>The hard link that was deleted was the last (that is, the only) hard link to the resource.</p>
</li>
</ul>
<p>A weak link has no such hold on a resource: you can delete a resource, even if it is the target of a weak link (as long as it is not the target of a hard link). Because of this, weak links can be used as shortcuts to frequently accessed resources, without impacting deletion of those resources.</p>
<p>There is a dependency in the other direction, however: If you delete a resource that is the target of one or more weak links, then those links are automatically deleted, as well. In this sense, too, weak links cannot dangle. Both hard and weak links provide referential integrity: if a link exists, then so does its target.</p>
<p>Another difference between hard and weak links is this: Hard links to ancestor folders are not permitted, because they introduce cycles. There is no such restriction for weak links: a weak link can target any folder, possibly creating a cycle. It is the set of hard links that define the (acyclic) structure of Oracle XML&nbsp;DB Repository. Weak links represent an additional mapping on top of that basic structure.</p>
<p>You can query the repository path view, <code>PATH_VIEW</code>, to determine the type of a repository link: the link information contains the link type. <code>XMLType</code> column <code>LINK</code> of <code>PATH_VIEW</code> contains this information in element <code>LinkType</code>, which is a child of the root element, <code>LINK</code>. <a href="xdb16fol.htm#GUID-72981E53-0B60-4096-80E0-06A139086DED__BABHBGFG">Example 21-1</a> illustrates this. You can also determine the type of a repository link by using the <code>getLink()</code> callback function on an event handler (<code>LinkIn</code>, <code>LinkTo</code>, <code>UnlinkIn</code>, or <code>UnlinkFrom</code>).</p>
<div class="infoboxnotealso" id="GUID-72981E53-0B60-4096-80E0-06A139086DED__GUID-B78C7485-CF76-470D-970F-079D16D904C2">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xdb18res.htm#GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F" title="Examples here illustrate how to delete Oracle XML&nbsp;DB Repository resources and paths.">Deleting Repository Resources: Examples</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="xdb16fol.htm#GUID-00093774-B340-4178-9E9C-080EC8592098" title="PL/SQL package DBMS_XDB_REPOS provides subprograms that act on Oracle XML&nbsp;DB Repository resources. This API is based on the public views RESOURCE_VIEW and PATH_VIEW, which enable SQL access to repository data through protocols such as FTP and HTTP(S)/WebDAV.">Query-Based Access to Repository Resources</a>&#34;</span> for information about <code>PATH_VIEW</code></p>
</li>
<li>
<p><a class="olink ARPLS69526" target="_blank" href="../ARPLS/d_xevent.htm#ARPLS69526"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information on PL/SQL function <code>getLink</code></p>
</li>
</ul>
</div>
<div class="example" id="GUID-72981E53-0B60-4096-80E0-06A139086DED__BABHBGFG">
<p class="titleinexample">Example 21-1 Querying PATH_VIEW to Determine Link Type</p>
<pre dir="ltr">SELECT RESID, XMLCast(XMLQuery(&#39;<span class="bold">/LINK/LinkType</span>&#39; PASSING <span class="bold">LINK</span> RETURNING CONTENT)
                      AS VARCHAR2(24)) link_type
  FROM PATH_VIEW WHERE equals_path(RES, &#39;/home/QUINE/purchaseOrder.xml&#39;) = 1;

RESID                              LINK_TYPE
--------------------------------   ---------
DF9856CF2FE0829EE030578CCE0639C5   <span class="bold">Weak</span>
</pre></div>
<!-- class="example" --></div>
</div>
<a id="ADXDB5304"></a><a id="ADXDB5305"></a><a id="ADXDB5303"></a>
<div class="props_rev_3"><a id="GUID-80B23444-3A16-4D36-A225-12D8485F9373"></a>
<h4 id="ADXDB-GUID-80B23444-3A16-4D36-A225-12D8485F9373" class="sect4"><span class="enumeration_section">21.3.5.3</span> Creating a Weak Link with No Knowledge of Folder Hierarchy</h4>
<div>
<p>Weak links represent a mapping on top of the repository structure, which is determined by hard links. You can create a weak link to a resource using its OID rather than its path. You can use weak links to access a resource without having access to the folders containing it.</p>
<div class="section">
<p>Suppose that you want to read a file resource that belongs to one of your colleagues. You cannot create a hard link to that resource, to make it accessible for your use, unless you have the privilege <code>&lt;xdb:resolve&gt;</code> on <span class="italic">all</span> of the ancestor folders of that file. Having that privilege would mean that you could see all of your colleague&#39;s folder names and the structure of the hierarchy down to the target resource.</p>
<p>However, because weak links essentially represent a mapping on top of the real repository structure, which structure is determined by the set of hard links, you can create a weak link to a resource using just its OID rather than its full, named path (URL). Your colleague can determine the OID path to the file, send you that instead of the named path, and you can create a weak link to the document using that OID path. <a href="xdb16fol.htm#GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABEHAED">Example 21-2</a> and <a href="xdb16fol.htm#GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABFFEED">Example 21-3</a> illustrate this.</p>
<p><a href="xdb16fol.htm#GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABEHAED">Example 21-2</a> prints the OID path for the file resource <code>/home/QUINE/purchaseOrder.xml</code>. User <code>quine</code> can use this to obtain the OID path to the resource, and then send that path to user <code>curry</code>, who can create a weak link to the resource (<a href="xdb16fol.htm#GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABFFEED">Example 21-3</a>).</p>
<p>In <a href="xdb16fol.htm#GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABFFEED">Example 21-3</a>, user <code>curry</code> creates a weak link named <code>quinePurchaseOrder.xml</code> in folder <code>/home/CURRY</code>. The target of the link is the OID path that corresponds to the URL <code>/home/QUINE/purchaseOrder.xml</code>. User <code>curry</code> need not be aware of the repository structure that is visible to user <code>quine</code>.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABEHAED">
<p class="titleinexample">Example 21-2 Obtaining the OID Path of a Resource</p>
<pre dir="ltr">DECLARE
  resoid  RAW(16);
  oidpath VARCHAR2(100);
BEGIN
  SELECT RESID INTO resoid FROM RESOURCE_VIEW
    WHERE equals_path(RES, &#39;/home/QUINE/purchaseOrder.xml&#39;) = 1;
    oidpath := DBMS_XDB_REPOS.<span class="bold">createOIDPath</span>(resoid);
  DBMS_OUTPUT.put_line(oidpath);
END;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABFFEED">
<p class="titleinexample">Example 21-3 Creating a Weak Link Using an OID Path</p>
<pre dir="ltr">CALL DBMS_XDB_REPOS.link(<span class="bold">/sys/oid/1BDCB46477B59C20E040578CCE0623D3</span>
                         &#39;/home/CURRY&#39;, &#39;quinePurchaseOrder.xml&#39;,
                         DBMS_XDB_REPOS.LINK_TYPE_WEAK);
</pre></div>
<!-- class="example" --></div>
</div>
<a id="ADXDB5306"></a>
<div class="props_rev_3"><a id="GUID-D96FB86C-DC05-4DAE-96B2-4E4307CB76C1"></a>
<h4 id="ADXDB-GUID-D96FB86C-DC05-4DAE-96B2-4E4307CB76C1" class="sect4"><span class="enumeration_section">21.3.5.4</span> How and When to Prevent Multiple Hard Links</h4>
<div>
<p>You can restrict the creation of hard links, disallowing multiple hard links to folders or files (or both). Allowing multiple hard links to file resources, but disallowing multiple hard links to folder resources, provides behavior that is similar to that for some file systems, including UNIX and Linux.</p>
<p>This can simplify application design, by, in effect, ensuring that each file resource has a unique, canonical hard-link path to it. In addition, preventing multiple hard links to a resource can lead to query performance improvements.</p>
<p>You can configure the prevention of multiple hard links using the following Boolean parameters in configuration file <code>xdbconfig.xml</code>. The default value of each parameter is <code>true</code>, meaning that multiple hard links can be created.</p>
<ul style="list-style-type: disc;">
<li>
<p><code>folder-hard-links</code> &ndash; Prevent the creation of multiple hard links to a folder resource, if <code>false</code>.</p>
</li>
<li>
<p><code>non-folder-hard-links</code> &ndash; Prevent the creation of multiple hard links to a file resource, if <code>false</code>.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-D96FB86C-DC05-4DAE-96B2-4E4307CB76C1__GUID-097AE096-BBDF-4352-9BE1-4C1E4E19A8CD">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="appaman.htm#GUID-D1551B64-4A75-44CD-AA04-0A68018410AE" title="Oracle XML&nbsp;DB is managed internally through a configuration file, xdbconfig.xml, which is stored as a resource in Oracle XML&nbsp;DB Repository. As an alternative to using Oracle Enterprise Manager to configure Oracle XML&nbsp;DB, you can configure it directly using the Oracle XML&nbsp;DB configuration file.">Configuration of Oracle XML&nbsp;DB Using xdbconfig.xml</a>&#34;</span></p>
</div>
</div>
</div>
</div>
</div>
<a id="ADXDB5308"></a><a id="ADXDB5309"></a><a id="ADXDB4183"></a><a id="ADXDB5307"></a>
<div class="props_rev_3"><a id="GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6"></a>
<h2 id="ADXDB-GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6" class="sect2"><span class="enumeration_section">21.4</span> Navigational or Path Access to Repository Resources</h2>
<div>
<p>Oracle XML&nbsp;DB Repository folders support the same protocol standards used by many operating systems. This lets a repository folder act like a native folder (directory) in supported operating-system environments.</p>
<p>For example:</p>
<ul style="list-style-type: disc;">
<li>
<p>You can use Windows Explorer to open and access repository files and folders (resources) the same way you access other files and folders in the file system, as shown in <a href="xdb16fol.htm#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__i1045917">Figure 21-2</a>.</p>
</li>
<li>
<p>You can access repository data using HTTP(S)/WebDAV from a Web browser, as shown in <a href="xdb16fol.htm#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__i1045938">Figure 21-3</a> and <a href="xdb16fol.htm#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__CEGICACC">Figure 21-4</a>.</p>
<p><a href="xdb16fol.htm#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__i1045938">Figure 21-3</a> shows a browser visiting URL <code>http://xdbdemo:8080/</code>. The server it is connected to is <code>xdbdemo</code>, and its HTTP port number is <code>8080</code>.</p>
<p><a href="xdb16fol.htm#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__CEGICACC">Figure 21-4</a> shows a browser using HTTP to visit an XML document (an XSL stylesheet) stored in the database. The URL is http://localhost:8080/home/SCOTT/poSource/xsl/purchaseOrder.xsl.</p>
</li>
</ul>
<div class="figure" id="GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__i1045917">
<p class="titleinfigure">Figure 21-2 Oracle XML&nbsp;DB Folders in Windows Explorer</p>
<img width="1024" height="768" src="img/GUID-17EABACE-3855-4676-A806-8C107D619A51-default.jpg" alt="Description of Figure 21-2 follows" title="Description of Figure 21-2 follows"/><br/>
<a href="img_text/GUID-17EABACE-3855-4676-A806-8C107D619A51-default.htm">Description of &#34;Figure 21-2 Oracle XML&nbsp;DB Folders in Windows Explorer&#34;</a></div>
<!-- class="figure" -->
<div class="figure" id="GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__i1045938">
<p class="titleinfigure">Figure 21-3 Accessing Repository Data Using HTTP(S)/WebDAV and a Web Browser</p>
<img width="663" height="441" src="img/GUID-533A5789-99EF-4E9B-B761-CB29131E9D0B-default.png" alt="Description of Figure 21-3 follows" title="Description of Figure 21-3 follows"/><br/>
<a href="img_text/GUID-533A5789-99EF-4E9B-B761-CB29131E9D0B-print.htm">Description of &#34;Figure 21-3 Accessing Repository Data Using HTTP(S)/WebDAV and a Web Browser&#34;</a></div>
<!-- class="figure" -->
<div class="figure" id="GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__CEGICACC">
<p class="titleinfigure">Figure 21-4 Path-Based Access Using HTTP and a URL</p>
<img width="665" height="551" src="img/GUID-AB5D422C-6AE5-421C-87A5-83778A1F640A-default.gif" alt="Description of Figure 21-4 follows" title="Description of Figure 21-4 follows"/><br/>
<a href="img_text/GUID-AB5D422C-6AE5-421C-87A5-83778A1F640A-default.htm">Description of &#34;Figure 21-4 Path-Based Access Using HTTP and a URL&#34;</a></div>
<!-- class="figure" --></div>
<a id="ADXDB5310"></a>
<div class="props_rev_3"><a id="GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926"></a>
<h3 id="ADXDB-GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926" class="sect3"><span class="enumeration_section">21.4.1</span> Access to Oracle XML&nbsp;DB Resources Using Internet Protocols</h3>
<div>
<p>Oracle Net Services provides one way of accessing database resources. Oracle XML&nbsp;DB support for Internet protocols provides another way of accessing database resources.</p>
</div>
<a id="ADXDB5311"></a>
<div class="props_rev_3"><a id="GUID-BAD95E12-1D8F-4456-BCC7-CC72685BAD2E"></a>
<h4 id="ADXDB-GUID-BAD95E12-1D8F-4456-BCC7-CC72685BAD2E" class="sect4"><span class="enumeration_section">21.4.1.1</span> Where You Can Use Oracle XML&nbsp;DB Protocol Access</h4>
<div>
<p>Oracle Net Services is optimized for record-oriented data. Internet protocols are designed for stream-oriented data, such as binary files or XML text documents. Oracle XML&nbsp;DB protocol access is a valuable alternative to Net Services in certain scenarios.</p>
<ul style="list-style-type: disc;">
<li>
<p>Direct database access from file-oriented applications using the database like a file system</p>
</li>
<li>
<p>Heterogeneous application server environments that require a uniform data access method (such as XML over HTTP, which is supported by most data servers, including MS SQL Server, Exchange, Notes, many XML databases, stock quote services and news feeds)</p>
</li>
<li>
<p>Application server environments that require data in the form of XML text</p>
</li>
<li>
<p>Web applications that use client-side XSL to format datagrams that do not need much application processing</p>
</li>
<li>
<p>Web applications that use Java servlets that run inside the database</p>
</li>
<li>
<p>Web access to XML-oriented stored procedures</p>
</li>
</ul>
</div>
</div>
<a id="ADXDB5312"></a>
<div class="props_rev_3"><a id="GUID-1BEEFCCD-0283-4D61-961A-1B050296F128"></a>
<h4 id="ADXDB-GUID-1BEEFCCD-0283-4D61-961A-1B050296F128" class="sect4"><span class="enumeration_section">21.4.1.2</span> Overview of Protocol Access to Oracle XML&nbsp;DB</h4>
<div>
<p>Protocol access to Oracle XML&nbsp;DB involves connecting, authenticating a user, parsing the request, and perhaps invoking a Java servlet.</p>
<p>Accessing Oracle XML&nbsp;DB using a protocol proceeds as follows:</p>
<ol>
<li>
<p>A connection object is established, and the protocol might read part of the request.</p>
</li>
<li>
<p>The protocol decides whether the user is already authenticated and wants to reuse an existing session or the connection must be re-authenticated (the latter is more common).</p>
</li>
<li>
<p>An existing session is pulled from the session pool, or else a new one is created.</p>
</li>
<li>
<p>If authentication has not been provided, and the request is HTTP <code>get</code> or <code>head</code>, then the session is run as the <code>ANONYMOUS</code> user. If the session has already been authenticated as the <code>ANONYMOUS</code> user, then there is no cost to reuse the existing session. If authentication has been provided, then the database re-authentication routines are used to authenticate the connection.</p>
</li>
<li>
<p>The request is parsed.</p>
</li>
<li>
<p>(HTTP only) If the requested path name maps to a servlet, then the servlet is invoked using Java Virtual Machine (JVM). The servlet code writes the response to a response stream or asks <code>XMLType</code> instances to do so.</p>
</li>
</ol>
</div>
</div>
<a id="ADXDB5313"></a>
<div class="props_rev_3"><a id="GUID-CB8BB43E-B2F2-4D64-A632-F410BC071C79"></a>
<h4 id="ADXDB-GUID-CB8BB43E-B2F2-4D64-A632-F410BC071C79" class="sect4"><span class="enumeration_section">21.4.1.3</span> Retrieval of Oracle XML&nbsp;DB Resources</h4>
<div>
<p>When a protocol indicates that a resource is to be retrieved, the path name to the resource is resolved and the resource is fetched, by streaming it as either XML data or in <code>RAW</code> form.</p>
<p>Resources being fetched are streamed as XML data, except for those containing element <code>XDBBinary</code>, which is the XML binary data type, which have their contents streamed out in <code>RAW</code> form.</p>
</div>
</div>
<a id="ADXDB5314"></a>
<div class="props_rev_3"><a id="GUID-421C24B7-EC44-49E6-BCE9-A6803D521623"></a>
<h4 id="ADXDB-GUID-421C24B7-EC44-49E6-BCE9-A6803D521623" class="sect4"><span class="enumeration_section">21.4.1.4</span> Storage of Oracle XML&nbsp;DB Resources</h4>
<div>
<p>When a protocol indicates that a resource that is an XML document is to be stored, its associated XML schema, if any, is consulted to determine the default table in which to store the document.</p>
<p>Oracle XML&nbsp;DB checks the document file name extension for <code>.xml</code>, <code>.xsl</code>, <code>.xsd</code>, and so on. If the document is XML then a pre-parse step is done, whereby enough of the resource is read to determine the XML <code>schemaLocation</code> and <code>namespace</code> of the root element in the document. If a registered schema is located at the <code>schemaLocation</code> URL, and it has a definition for the root element of the current document, then the default table specified for that root element is used to store the contents of the resource.</p>
</div>
</div>
<a id="ADXDB5315"></a>
<div class="props_rev_3"><a id="GUID-18142142-B1B1-4A5F-8F63-59C5FA3E7D74"></a>
<h4 id="ADXDB-GUID-18142142-B1B1-4A5F-8F63-59C5FA3E7D74" class="sect4"><span class="enumeration_section">21.4.1.5</span> Internet Protocols and XMLType: XMLType Direct Stream Write</h4>
<div>
<p>Oracle XML&nbsp;DB supports Internet protocols at the <code>XMLType</code> level by using Java <code>XMLType</code> method <code>writeToStream()</code>. This method is implemented natively and writes <code>XMLType</code> data directly to the protocol request stream.</p>
<p>This avoids Java VM execution costs and the overhead of converting database data through Java data types and creating Java objects, resulting in significantly higher performance. Performance is further enhanced if the Java code deals only with XML element trees that are close to the root, and does not traverse too many of the leaf elements, so that relatively few Java objects are created.</p>
<div class="infoboxnotealso" id="GUID-18142142-B1B1-4A5F-8F63-59C5FA3E7D74__GUID-D4D17B80-377C-45E1-A11E-895F2B2C059B">
<p class="notep1">See Also:</p>
<p><a href="xdb22pro.htm#GUID-0476309D-E3DF-4C56-BF21-68CD04D00C98" title="You can access Oracle XML&nbsp;DB Repository data using protocols FTP and HTTP(S)/WebDAV.">Repository Access Using Protocols</a></p>
</div>
</div>
</div>
</div>
<a id="ADXDB5317"></a><a id="ADXDB5316"></a>
<div class="props_rev_3"><a id="GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56"></a>
<h3 id="ADXDB-GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56" class="sect3"><span class="enumeration_section">21.4.2</span> Access to Oracle ASM Files Using Protocols and Resource APIs &ndash; For DBAs</h3>
<div>
<p>Oracle Automatic Storage Management (Oracle ASM) organizes database files into <span class="italic">disk groups</span> for simplified management, database mirroring, and I/O balancing. Repository access extends to Oracle ASM files, in the <span class="italic">virtual</span> repository folder <code>/sys/asm</code>. This access is reserved for database administrators (DBAs). It is <span class="italic">not</span> intended for developers.</p>
<p>A typical use of such access is to copy Oracle ASM files from one database instance to another. For example, a DBA can view folder <code>/sys/asm</code> in a graphical user interface using the WebDAV protocol, and then drag-and-drop a copy of a data-pump dump set from an Oracle ASM disk group to an operating-system file system.</p>
<p>Virtual folder <code>/sys/asm</code> is created by default during Oracle XML&nbsp;DB installation. If the database is not configured to use Oracle ASM, the folder is empty and no operations are permitted on it.</p>
<p>Folder <code>/sys/asm</code> contains folders and subfolders that follow the hierarchy defined by the structure of an Oracle ASM <span class="italic">fully qualified filename</span>:</p>
<ul style="list-style-type: disc;">
<li>
<p>It contains a subfolder for each mounted <span class="italic">disk group</span>.</p>
</li>
<li>
<p>A disk-group folder contains a subfolder for each <span class="italic">database</span> that uses that disk group. In addition, a disk-group folder may contain files and folders corresponding to Oracle ASM <span class="italic">aliases</span> created by the administrator.</p>
</li>
<li>
<p>A database folder contains file-type folders.</p>
</li>
<li>
<p>A file-type folder contains Oracle ASM files, which are binary.</p>
</li>
</ul>
<p>This hierarchy is shown in <a href="xdb16fol.htm#GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56__BABIGDBA">Figure 21-5</a>, which omits directories created for aliases, for simplicity.</p>
<div class="figure" id="GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56__BABIGDBA">
<p class="titleinfigure">Figure 21-5 Oracle ASM Virtual Folder Hierarchy</p>
<img width="662" height="402" src="img/GUID-C7B925ED-5796-4E7B-98D0-5E2F4B8B146E-default.gif" alt="Description of Figure 21-5 follows" title="Description of Figure 21-5 follows"/><br/>
<a href="img_text/GUID-C7B925ED-5796-4E7B-98D0-5E2F4B8B146E-print.htm">Description of &#34;Figure 21-5 Oracle ASM Virtual Folder Hierarchy&#34;</a></div>
<!-- class="figure" -->
<p>The following usage restrictions apply to virtual folder <code>/sys/asm</code>. You <span class="italic">cannot</span>:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic">query</span> <code>/sys/asm</code> using SQL</p>
</li>
<li>
<p>put regular files under <code>/sys/asm</code> (you can put only Oracle ASM files there)</p>
</li>
<li>
<p><span class="italic">move</span> (rename) an Oracle ASM file to a different Oracle ASM disk group or to a folder outside Oracle ASM</p>
</li>
<li>
<p>create <span class="italic">hard links</span> to existing Oracle ASM files or directories</p>
</li>
</ul>
<p>In addition:</p>
<ul style="list-style-type: disc;">
<li>
<p>You must have the privileges of role <code>DBA</code> to view folder <code>/sys/asm</code>.</p>
</li>
<li>
<p>To access <code>/sys/asm</code> using Oracle XML&nbsp;DB protocols, you must log in as a user other than <code>SYS</code>.</p>
</li>
</ul>
<p>Again, Oracle ASM virtual-folder operations are intended only for <span class="italic">database administrators</span>, not developers.</p>
<div class="infoboxnotealso" id="GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56__GUID-323094DE-A48F-43E9-8AF8-6604E330148E">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xdb22pro.htm#GUID-8A69CB6C-5136-4ACD-8291-2EAE667CC19D" title="Oracle Automatic Storage Management (Oracle ASM) organizes database files into disk groups for simplified management and added benefits such as database mirroring and I/O balancing. You can use protocols and resource APIs to access Oracle ASM files in repository virtual folder /sys/asm. All files in /sys/asm are binary.">Using FTP with Oracle ASM Files</a>&#34;</span> for an example of using protocol FTP with <code>/sys/asm</code></p>
</li>
<li>
<p><a class="olink OSTMG" target="_blank" href="../OSTMG/toc.htm"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for information about the syntax of a fully qualified Oracle ASM filename and details on the virtual folder structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="ADXDB5319"></a><a id="ADXDB5318"></a>
<div class="props_rev_3"><a id="GUID-00093774-B340-4178-9E9C-080EC8592098"></a>
<h2 id="ADXDB-GUID-00093774-B340-4178-9E9C-080EC8592098" class="sect2"><span class="enumeration_section">21.5</span> Query-Based Access to Repository Resources</h2>
<div>
<p>PL/SQL package <code>DBMS_XDB_REPOS</code> provides subprograms that act on Oracle XML&nbsp;DB Repository resources. This API is based on the public views <code>RESOURCE_VIEW</code> and <code>PATH_VIEW</code>, which enable SQL access to repository data through protocols such as FTP and HTTP(S)/WebDAV.</p>
<ul style="list-style-type: disc;">
<li>
<p><code>PATH_VIEW</code> &ndash; Has one row for each unique repository path</p>
</li>
<li>
<p><code>RESOURCE_VIEW</code> &ndash; Has one row for each resource</p>
</li>
</ul>
<p>Through these views, you can access and update both the metadata and the content of documents stored in the repository. Operations on the views use underlying repository tables such as <code>XDB$RESOURCE</code>.</p>
<p>Each view contains virtual column <code>RES</code>. You use column <code>RES</code> to access and update resource documents using SQL statements that accept a repository path notation.</p>
<p>View <code>RESOURCE_VIEW</code> contains column <code>ANY_PATH</code>. Column <code>ANY_PATH</code> contains a valid URL that the current user can pass to PL/SQL constructor <code>XDBURIType</code> to access the resource content. If this content is not binary data, then the resource itself also contains the content.</p>
<p><a href="xdb16fol.htm#GUID-00093774-B340-4178-9E9C-080EC8592098__g1046678" title="This table describes differences between RESOURCE_VIEW and PATH_VIEW. It has three rows and two columns.">Table 21-2</a> summarizes the differences between the views.</p>
<div class="tblformal" id="GUID-00093774-B340-4178-9E9C-080EC8592098__g1046678">
<p class="titleintable">Table 21-2 Differences Between PATH_VIEW and RESOURCE_VIEW</p>
<table class="cellalignment3420" title="Differences Between PATH_VIEW and RESOURCE_VIEW" summary="This table describes differences between RESOURCE_VIEW and PATH_VIEW. It has three rows and two columns.">
<thead>
<tr class="cellalignment3411">
<th class="cellalignment3449" id="d109278e2483">PATH_VIEW</th>
<th class="cellalignment3448" id="d109278e2486">RESOURCE_VIEW</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3411">
<td class="cellalignment3451" id="d109278e2491" headers="d109278e2483">
<p>Contains link properties</p>
</td>
<td class="cellalignment3450" headers="d109278e2491 d109278e2486">
<p>No link properties</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3451" id="d109278e2498" headers="d109278e2483">
<p>Has one row for each unique <span class="italic">path</span> in repository</p>
</td>
<td class="cellalignment3450" headers="d109278e2498 d109278e2486">
<p>Has one row for each <span class="italic">resource</span> in repository</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Rows in these views are of data type <code>XMLType</code>. In the <code>RESOURCE_VIEW</code>, the single path associated with a resource is arbitrarily chosen from among the possible paths that refer to the resource. Oracle XML&nbsp;DB provides SQL functions, such as <code>under_path</code>, that let applications search for the resources contained within a particular folder (recursively), obtain the resource depth, and so on.</p>
<p>DML code can be used on the repository views to insert, rename, delete, and update resource properties and contents. Programmatic APIs must be used for other operations, such as creating links to existing resources.</p>
<p>Oracle XML&nbsp;DB supports the concept of <strong class="term">linking</strong>. Linking makes it possible to define multiple paths to a given document. A separate XML document, called the <strong class="term">link-properties document</strong>, maintains metadata properties that are specific to the path, rather than to the resource. Whenever a resource is created, an initial link is also created.</p>
<p><code>PATH_VIEW</code> exposes the link-properties documents. There is one entry in <code>PATH_VIEW</code> for each possible path to a document. Column <code>RES</code> of <code>PATH_VIEW</code> contains the resource document pointed to by this link. Column <code>PATH</code> contains the path that the link lets you use to access the resource. Column <code>LINK</code> contains the link-properties document (metadata) for this <code>PATH</code>.</p>
<div class="infoboxnotealso" id="GUID-00093774-B340-4178-9E9C-080EC8592098__GUID-0FDACE1A-C3C7-4791-9AC8-523EBA2C243C">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xdb16fol.htm#GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655" title="Links in Oracle XML&nbsp;DB can be repository links or document links. Repository links can be hard links or weak links. Document links can also be hard links or weak links, when their targets are repository resources.">Link Types</a>&#34;</span></p>
</li>
<li>
<p><a href="xdb18res.htm#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">Repository Access Using RESOURCE_VIEW and PATH_VIEW</a></p>
</li>
<li>
<p><a href="xdb21sec.htm#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a></p>
</li>
<li>
<p><a class="olink REFRN29079" target="_blank" href="../REFRN/GUID-33DBD6B2-6DE6-426E-9169-AA4CE59A5D45.htm#REFRN29079"><span class="italic">Oracle Database Reference</span></a> for more information about view <code>PATH_VIEW</code></p>
</li>
<li>
<p><a class="olink REFRN29080" target="_blank" href="../REFRN/GUID-5F69D817-EF39-4B1B-89FF-439952B8CCD0.htm#REFRN29080"><span class="italic">Oracle Database Reference</span></a> for more information about view <code>RESOURCE_VIEW</code></p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADXDB5320"></a>
<div class="props_rev_3"><a id="GUID-B663D1C9-894E-4518-B66B-B9D9484819BC"></a>
<h2 id="ADXDB-GUID-B663D1C9-894E-4518-B66B-B9D9484819BC" class="sect2"><span class="enumeration_section">21.6</span> Servlet Access to Repository Resources</h2>
<div>
<p>Oracle XML&nbsp;DB implements Java Servlet API, version 2.2.</p>
<p>Support is limited by these restrictions:</p>
<ul style="list-style-type: disc;">
<li>
<p>All servlets must be distributable. They must expect to run in different virtual machines.</p>
</li>
<li>
<p>WAR and <code>web.xml</code> files are not supported. Oracle XML&nbsp;DB supports a subset of the XML configurations in this file. An XSLT stylesheet can be applied to the <code>web.xml</code> to generate servlet definitions. An external tool must be used to create database roles for those defined in the <code>web.xml</code> file.</p>
</li>
<li>
<p>JSP (Java Server Pages) support can be installed as a servlet and configured manually.</p>
</li>
<li>
<p><code>HTTPSession</code> and related classes are not supported.</p>
</li>
<li>
<p>Only one servlet context (that is, one Web application) is supported.</p>
<div class="infoboxnotealso" id="GUID-B663D1C9-894E-4518-B66B-B9D9484819BC__GUID-55D8ACB0-5CB9-40FC-9893-6528F9AC3959">
<p class="notep1">See Also:</p>
<p><a href="xdb23jv1.htm#GUID-C6EABC36-3FA8-4A82-B940-C20A01D8F586" title="Design guidelines are presented for writing Oracle XML&nbsp;DB applications in Java. This includes guidelines for writing and configuring Java servlets for Oracle XML&nbsp;DB.">How to Write Oracle XML&nbsp;DB Applications in Java</a></p>
</div>
</li>
</ul>
</div>
</div>
<a id="ADXDB5322"></a><a id="ADXDB5321"></a>
<div class="props_rev_3"><a id="GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83"></a>
<h2 id="ADXDB-GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83" class="sect2"><span class="enumeration_section">21.7</span> Operations on Repository Resources</h2>
<div>
<p>You can operate on data stored in Oracle XML&nbsp;DB Repository resources using Java, PL/SQL, Internet protocols, and Oracle XML DB Content Connector. The most common operations are described, along with the required database permissions to use them.</p>
<p>You can access repository data in any of these ways:</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle XML&nbsp;DB resource APIs for Java</p>
</li>
<li>
<p>A combination of Oracle XML&nbsp;DB resource views API and Oracle XML&nbsp;DB resource API for PL/SQL</p>
</li>
<li>
<p>Internet protocols (HTTP(S)/WebDAV and FTP) and Oracle XML&nbsp;DB protocol server</p>
</li>
<li>
<p>Oracle XML DB Content Connector and, through it, the standard Content Repository API for Java (JCR).</p>
</li>
</ul>
<p>These access methods can be used equivalently. It does not matter how you add content to the repository or retrieve it from there. For example, you can add content to the repository using SQL or PL/SQL and then retrieve it using an Internet protocol,&thinsp;or the other way around.</p>
<p><a href="xdb16fol.htm#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI" title="This table describes the API options for accessing Oracle XML DB Repository.">Table 21-3</a> lists common Oracle XML&nbsp;DB Repository operations, and describes how these operations can be accomplished using each of several access methods. The table shows functionality common to the different methods, but not all of the methods are equally suited to any particular task. Unless mentioned otherwise, &#34;resource&#34; in this table can be either a file resource or a folder resource.</p>
<p><a href="xdb16fol.htm#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI" title="This table describes the API options for accessing Oracle XML DB Repository.">Table 21-3</a> also shows the resource privileges that are required for each operation.</p>
<div class="tblformalwide" id="GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI">
<p class="titleintable">Table 21-3 Accessing Oracle XML&nbsp;DB Repository: API Options</p>
<table class="cellalignment3431" title="Accessing Oracle XML&nbsp;DB Repository: API Options" summary="This table describes the API options for accessing Oracle XML DB Repository.">
<thead>
<tr class="cellalignment3411">
<th class="cellalignment3534" id="d109278e2748">Data Access</th>
<th class="cellalignment3535" id="d109278e2751">SQL and PL/SQL</th>
<th class="cellalignment3534" id="d109278e2754">Protocols</th>
<th class="cellalignment3472" id="d109278e2757">Resource Privileges Required</th>
<th class="cellalignment3536" id="d109278e2760">JCR Support</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e2765" headers="d109278e2748">
<p>Create resource</p>
</td>
<td class="cellalignment3538" headers="d109278e2765 d109278e2751">
<pre dir="ltr">DBMS_XDB_REPOS.createResource(
  &#39;/public/T1/testcase.txt&#39;,
  &#39;ORIGINAL text&#39;);
INSERT INTO RESOURCE_VIEW (ANY_PATH, RES)
SELECT &#39;/public/T1/copy1.txt&#39;, RES
  FROM RESOURCE_VIEW
  WHERE equals_path(RES, 
                    &#39;/public/T1/testcase.txt&#39;)
        = 1;
</pre></td>
<td class="cellalignment3537" headers="d109278e2765 d109278e2754">
<p>HTTP:<code>PUT;</code></p>
<p>FTP: <code>PUT</code></p>
</td>
<td class="cellalignment3473" headers="d109278e2765 d109278e2757">
<p><code>DAV::bind</code> on parent folder</p>
</td>
<td class="cellalignment3539" headers="d109278e2765 d109278e2760">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e2789" headers="d109278e2748">
<p>Update resource contents</p>
</td>
<td class="cellalignment3538" headers="d109278e2789 d109278e2751">
<pre dir="ltr">UPDATE RESOURCE_VIEW
SET RES =
XMLQuery(
  &#39;declare default element namespace
   &#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;; (: :)
   copy $i := $p1 modify
     (for $j in $i/Resource/Contents/text
      return replace value of node $j with $p2)
   return $i&#39;
  PASSING RES AS &#34;p1&#34;, &#39;NEW text&#39; AS &#34;p2&#34;
  RETURNING CONTENT)
WHERE equals_path(RES, &#39;/public/T1/copy1.txt&#39;) = 1
</pre></td>
<td class="cellalignment3537" headers="d109278e2789 d109278e2754">
<p>HTTP: <code>PUT;</code></p>
<p>FTP: <code>PUT</code></p>
</td>
<td class="cellalignment3473" headers="d109278e2789 d109278e2757">
<p><code>xdb:write-content</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e2789 d109278e2760">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e2813" headers="d109278e2748">
<p>Update resource properties</p>
</td>
<td class="cellalignment3538" headers="d109278e2813 d109278e2751">
<pre dir="ltr">UPDATE RESOURCE_VIEW
SET RES =
XMLQuery(
  &#39;declare default element namespace
&#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;; (: :)
   copy $i := $p1 modify
     (for $j in $i/Resource/DisplayName
      return replace value of node $j with $p2)
   return $i&#39;
  PASSING RES AS &#34;p1&#34;, &#39;NewName1.txt&#39; AS &#34;p2&#34; RETURNING CONTENT)
WHERE equals_path(RES, &#39;/public/T1/copy1.txt&#39;) = 1;
</pre></td>
<td class="cellalignment3537" headers="d109278e2813 d109278e2754">
<p>WebDAV:</p>
<p><code>PROPPATCH;</code></p>
</td>
<td class="cellalignment3473" headers="d109278e2813 d109278e2757">
<p><code>DAV::write-properties</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e2813 d109278e2760">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e2834" headers="d109278e2748">
<p>Update resource ACL</p>
</td>
<td class="cellalignment3538" headers="d109278e2834 d109278e2751">
<pre dir="ltr">EXEC DBMS_XDB_REPOS.setACL(
  &#39;/public/T1/copy1.txt&#39;,
  &#39;/sys/acls/all_owner_acl.xml&#39;);
</pre></td>
<td class="cellalignment3537" headers="d109278e2834 d109278e2754">
<p>not applicable</p>
</td>
<td class="cellalignment3473" headers="d109278e2834 d109278e2757">
<p><code>DAV::write-acl</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e2834 d109278e2760">
<p>No</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e2852" headers="d109278e2748">
<p>Unlink resource (delete if last link)</p>
</td>
<td class="cellalignment3538" headers="d109278e2852 d109278e2751">
<pre dir="ltr">EXEC DBMS_XDB_REPOS.deleteResource()
</pre>
<p>or</p>
<pre dir="ltr">DELETE FROM RESOURCE_VIEW
  WHERE equals_path(RES, path) &gt; 0
</pre></td>
<td class="cellalignment3537" headers="d109278e2852 d109278e2754">
<p>HTTP:</p>
<p><code>DELETE;</code></p>
<p>FTP: <code>delete</code></p>
</td>
<td class="cellalignment3473" headers="d109278e2852 d109278e2757">
<p><code>DAV::unbind</code> on parent folder</p>
<p><code>xdb:unlink-from</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e2852 d109278e2760">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e2885" headers="d109278e2748">
<p>Forcibly remove all links to resource</p>
</td>
<td class="cellalignment3538" headers="d109278e2885 d109278e2751">
<pre dir="ltr">DBMS_XDB_REPOS.deleteResource()
</pre>
<p>or</p>
<pre dir="ltr">DELETE FROM PATH_VIEW
WHERE
XMLCast(
XMLQuery(
  &#39;declare namespace n1=
&#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;; (: :)
   //n1:DisplayName&#39;
  PASSING RES RETURNING CONTENT)
AS VARCHAR2(256))
= &#39;My resource&#39;
</pre></td>
<td class="cellalignment3537" headers="d109278e2885 d109278e2754">
<p>FTP:</p>
<p><code>quote</code></p>
<p><code>rm_rf</code></p>
<p><span class="italic"><code>resource</code></span></p>
</td>
<td class="cellalignment3473" headers="d109278e2885 d109278e2757">
<p><code>DAV::unbind</code> on all parent folders</p>
<p><code>xdb:unlink-from</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e2885 d109278e2760">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e2922" headers="d109278e2748">
<p>Move resource</p>
</td>
<td class="cellalignment3538" headers="d109278e2922 d109278e2751">
<pre dir="ltr">UPDATE PATH_VIEW
  SET path = &#39;/public/T1/copy2.txt&#39;
  WHERE equals_path(RES,
                    &#39;/public/T1/copy1.txt&#39;)
        = 1;
</pre></td>
<td class="cellalignment3537" headers="d109278e2922 d109278e2754">
<p>WebDAV:</p>
<p><code>MOVE;</code></p>
<p>FTP: <code>rename</code></p>
</td>
<td class="cellalignment3473" headers="d109278e2922 d109278e2757">
<p><code>DAV::unbind</code> on source parent folder</p>
<p><code>DAV::bind</code> on target parent folder</p>
<p><code>xdb:unlink-from</code> and <code>xdb:link-to</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e2922 d109278e2760">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e2959" headers="d109278e2748">
<p>Copy resource</p>
</td>
<td class="cellalignment3538" headers="d109278e2959 d109278e2751">
<pre dir="ltr">INSERT INTO PATH_VIEW (path, RES, link)
  SELECT &#39;/public/T1/copy3.txt&#39;, RES, link
    FROM PATH_VIEW
    WHERE equals_path(RES,
                      &#39;/public/T1/copy2.txt&#39;)
          = 1;
</pre></td>
<td class="cellalignment3537" headers="d109278e2959 d109278e2754">
<p>WebDAV:</p>
<p><code>COPY;</code></p>
</td>
<td class="cellalignment3473" headers="d109278e2959 d109278e2757">
<p>Copy to new:</p>
<p><code>DAV::bind</code> on target parent folder</p>
<p><code>DAV::read</code> on resource</p>
<p>Copy to existing (replacement):</p>
<p><code>DAV::read</code> on resource</p>
<p><code>DAV::write-properties</code> and <code>DAV::write-content</code> on existing target resource</p>
</td>
<td class="cellalignment3539" headers="d109278e2959 d109278e2760">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e2999" headers="d109278e2748">
<p>Create hard link to existing resource</p>
</td>
<td class="cellalignment3538" headers="d109278e2999 d109278e2751">
<pre dir="ltr">EXEC DBMS_XDB_REPOS.link(&#39;/public/T1/copy3.txt&#39;, 
                         &#39;/public/T1&#39;,
                         &#39;myhardlink&#39;);
</pre></td>
<td class="cellalignment3537" headers="d109278e2999 d109278e2754">
<p>not applicable</p>
</td>
<td class="cellalignment3473" headers="d109278e2999 d109278e2757">
<p><code>DAV::bind</code> on parent folder</p>
<p><code>xdb:link-to</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e2999 d109278e2760">
<p>No</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3021" headers="d109278e2748">
<p>Create weak link to existing resource</p>
</td>
<td class="cellalignment3538" headers="d109278e3021 d109278e2751">
<pre dir="ltr">EXEC DBMS_XDB_REPOS.link(
  &#39;/public/T1/copy3.txt&#39;, 
  &#39;/public/T1&#39;,
  &#39;myweaklink&#39;,
  DBMS_XDB_REPOS.LINK_TYPE_WEAK);
</pre></td>
<td class="cellalignment3537" headers="d109278e3021 d109278e2754">
<p>not applicable</p>
</td>
<td class="cellalignment3473" headers="d109278e3021 d109278e2757">
<p><code>DAV::bind</code> on parent folder</p>
<p><code>xdb:link-to</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e3021 d109278e2760">
<p>No</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3043" headers="d109278e2748">
<p>Change owner of resource</p>
</td>
<td class="cellalignment3538" headers="d109278e3043 d109278e2751">
<pre dir="ltr">UPDATE RESOURCE_VIEW
SET RES =
XMLQuery(
  &#39;copy $i := $p1 modify
     (for $j in $i/Resource/Owner
      return replace value of node $j with $p2)
   return $i&#39;
  PASSING RES AS &#34;p1&#34;, &#39;U2&#39; AS &#34;p2&#34; RETURNING CONTENT)
WHERE equals_path(RES, &#39;/public/T1/copy3.txt&#39;) = 1;
</pre></td>
<td class="cellalignment3537" headers="d109278e3043 d109278e2754">
<p>not applicable</p>
</td>
<td class="cellalignment3473" headers="d109278e3043 d109278e2757">
<p><code>DAV::take-ownership</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e3043 d109278e2760">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3062" headers="d109278e2748">
<p>Get binary or text representation of resource contents</p>
</td>
<td class="cellalignment3538" headers="d109278e3062 d109278e2751">
<pre dir="ltr">SELECT XDBURIType(path).getBLOB()
  FROM DUAL;

SELECT
XMLQuery(
&#39;declare default element namespace
&#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;;(: :)
 $r/Resource/Contents&#39;
PASSING RES AS &#34;r&#34; RETURNING CONTENT)
FROM RESOURCE_VIEW
WHERE equals_path(RES, &#39;/public/T1/copy2.text&#39;) = 1;
</pre></td>
<td class="cellalignment3537" headers="d109278e3062 d109278e2754">
<p>HTTP: <code>GET;</code></p>
<p>FTP: <code>get</code></p>
</td>
<td class="cellalignment3473" headers="d109278e3062 d109278e2757">
<p><code>xdb:read-contents</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e3062 d109278e2760">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3086" headers="d109278e2748">
<p>Get <code>XMLType</code> representation of resource contents</p>
</td>
<td class="cellalignment3538" headers="d109278e3086 d109278e2751">
<pre dir="ltr">SELECT XDBURIType(&#39;/public/T1/res.xml&#39;).getXML
  FROM DUAL;
</pre>
<pre dir="ltr">SELECT 
XMLQuery(
</pre>
<pre dir="ltr">&#39;declare default element namespace
&#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;;(: :)
</pre>
<pre dir="ltr"> $r/Resource/Contents/*&#39;
PASSING RES AS &#34;r&#34; RETURNING CONTENT)
FROM RESOURCE_VIEW 
WHERE equals_path(RES, &#39;/public/T1/res.xml&#39;) = 1;
</pre></td>
<td class="cellalignment3537" headers="d109278e3086 d109278e2754">
<p>not applicable</p>
</td>
<td class="cellalignment3473" headers="d109278e3086 d109278e2757">
<p><code>xdb:read-contents</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e3086 d109278e2760">
<p>No</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3113" headers="d109278e2748">
<p>Get resource properties</p>
</td>
<td class="cellalignment3538" headers="d109278e3113 d109278e2751">
<pre dir="ltr">SELECT
XMLCast(
XMLQuery(
</pre>
<pre dir="ltr">&#39;declare default element namespace
&#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;;(: :)
</pre>
<pre dir="ltr">$r/Resource/LastModifier&#39;
PASSING RES AS &#34;r&#34; RETURNING CONTENT)
AS VARCHAR2(128))
</pre>
<pre dir="ltr">FROM RESOURCE_VIEW
WHERE equals_path(RES, &#39;/public/T1/res.xml&#39;) = 1;
</pre></td>
<td class="cellalignment3537" headers="d109278e3113 d109278e2754">
<p>WebDAV:</p>
<p><code>PROPFIND</code></p>
<p><code>(depth = 0);</code></p>
</td>
<td class="cellalignment3473" headers="d109278e3113 d109278e2757">
<p><code>xdb:read-properties</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e3113 d109278e2760">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3143" headers="d109278e2748">
<p>List resources in folder</p>
</td>
<td class="cellalignment3538" headers="d109278e3143 d109278e2751">
<pre dir="ltr">SELECT PATH FROM PATH_VIEW
  WHERE under_path(res, &#39;/public/T1&#39;) = 1;
</pre></td>
<td class="cellalignment3537" headers="d109278e3143 d109278e2754">
<p>WebDAV:</p>
<p><code>PROPFIND</code></p>
<p><code>(depth = 0);</code></p>
</td>
<td class="cellalignment3473" headers="d109278e3143 d109278e2757">
<p><code>xdb:read-contents</code> on folder</p>
</td>
<td class="cellalignment3539" headers="d109278e3143 d109278e2760">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3167" headers="d109278e2748">
<p>Create folder</p>
</td>
<td class="cellalignment3538" headers="d109278e3167 d109278e2751">
<pre dir="ltr">Call DBMS_XDB_REPOS.createFolder(&#39;/public/T2&#39;);
</pre></td>
<td class="cellalignment3537" headers="d109278e3167 d109278e2754">
<p>WebDAV:</p>
<p><code>MKCOL;</code></p>
<p>FTP: <code>mkdir</code></p>
</td>
<td class="cellalignment3473" headers="d109278e3167 d109278e2757">
<p><code>DAV::bind</code> on parent folder</p>
</td>
<td class="cellalignment3539" headers="d109278e3167 d109278e2760">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3192" headers="d109278e2748">
<p>Unlink empty folder</p>
</td>
<td class="cellalignment3538" headers="d109278e3192 d109278e2751">
<pre dir="ltr">DBMS_XDB_REPOS.deleteResource(&#39;/public/T2&#39;)
</pre></td>
<td class="cellalignment3537" headers="d109278e3192 d109278e2754">
<p>HTTP:</p>
<p><code>DELETE;</code></p>
<p>FTP: <code>rmdir</code></p>
</td>
<td class="cellalignment3473" headers="d109278e3192 d109278e2757">
<p><code>DAV::unbind</code> on parent folder</p>
<p><code>xdb:unlink-from</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e3192 d109278e2760">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3221" headers="d109278e2748">
<p>Forcibly delete folder and all links to it</p>
</td>
<td class="cellalignment3538" headers="d109278e3221 d109278e2751">
<pre dir="ltr">DBMS_XDB_REPOS.deleteResource(
  &#39;/public/T2&#39;,
  DBMS_XDB.DELETE_RECURSIVE_FORCE);
</pre></td>
<td class="cellalignment3537" headers="d109278e3221 d109278e2754">
<p>not applicable</p>
</td>
<td class="cellalignment3473" headers="d109278e3221 d109278e2757">
<p><code>DAV::unbind</code> on all parent folders</p>
<p><code>xdb:unlink-from</code> on folder resource</p>
</td>
<td class="cellalignment3539" headers="d109278e3221 d109278e2760">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3243" headers="d109278e2748">
<p>Get resource with a row lock</p>
</td>
<td class="cellalignment3538" headers="d109278e3243 d109278e2751">
<pre dir="ltr">SELECT ... 
  FROM RESOURCE_VIEW
  FOR UPDATE ...;
</pre></td>
<td class="cellalignment3537" headers="d109278e3243 d109278e2754">
<p>not applicable</p>
</td>
<td class="cellalignment3473" headers="d109278e3243 d109278e2757">
<p><code>xdb:read-properties</code> and <code>xdb:read-contents</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e3243 d109278e2760">
<p>No</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3264" headers="d109278e2748">
<p>Add WebDAV lock on resource</p>
</td>
<td class="cellalignment3538" headers="d109278e3264 d109278e2751">
<pre dir="ltr">EXEC DBMS_XDB_REPOS.LockResource(
  &#39;/public/T1/res.xml&#39;,
  TRUE,
  TRUE);
</pre></td>
<td class="cellalignment3537" headers="d109278e3264 d109278e2754">
<p>WebDAV:</p>
<p><code>LOCK;</code></p>
<p>FTP:</p>
<p><code>quote lock</code></p>
</td>
<td class="cellalignment3473" headers="d109278e3264 d109278e2757">
<p><code>DAV::write-properties</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e3264 d109278e2760">
<p>No</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3291" headers="d109278e2748">
<p>Remove WebDAV lock</p>
</td>
<td class="cellalignment3538" headers="d109278e3291 d109278e2751">
<pre dir="ltr">DECLARE...
</pre>
<pre dir="ltr">BEGIN 
  DBMS_XDB_REPOS.GetLockToken(&#39;/public/T1/res.xml&#39;, 
                              locktoken); 
  DBMS_XDB_REPOS.UnlockResource(
    &#39;/public/T1/res.xml&#39;,
    locktoken);
END; 
</pre></td>
<td class="cellalignment3537" headers="d109278e3291 d109278e2754">
<p>WebDAV: <code>UNLOCK;</code></p>
<p>FTP:</p>
<p><code>quote unlock</code></p>
</td>
<td class="cellalignment3473" headers="d109278e3291 d109278e2757">
<p><code>DAV::write-properties</code> and <code>DAV::unlock</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e3291 d109278e2760">
<p>No</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3321" headers="d109278e2748">
<p>Check out file resource</p>
</td>
<td class="cellalignment3538" headers="d109278e3321 d109278e2751">
<pre dir="ltr">EXEC DBMS_XDB_VERSION.checkOut(
  &#39;/public/T1/res.xml&#39;);
</pre></td>
<td class="cellalignment3537" headers="d109278e3321 d109278e2754">
<p>not applicable</p>
</td>
<td class="cellalignment3473" headers="d109278e3321 d109278e2757">
<p><code>DAV::write-properties</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e3321 d109278e2760">
<p>No</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3340" headers="d109278e2748">
<p>Check in file resource</p>
</td>
<td class="cellalignment3538" headers="d109278e3340 d109278e2751">
<pre dir="ltr">EXEC DBMS_XDB_VERSION.checkIn(
  &#39;/public/T1/res.xml&#39;);
</pre></td>
<td class="cellalignment3537" headers="d109278e3340 d109278e2754">
<p>not applicable</p>
</td>
<td class="cellalignment3473" headers="d109278e3340 d109278e2757">
<p><code>DAV::write-properties</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e3340 d109278e2760">
<p>No</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3358" headers="d109278e2748">
<p>Uncheck out file resource</p>
</td>
<td class="cellalignment3538" headers="d109278e3358 d109278e2751">
<pre dir="ltr">EXEC DBMS_XDB_VERSION.unCheckOut(
  &#39;/public/T1/res.xml&#39;);
</pre></td>
<td class="cellalignment3537" headers="d109278e3358 d109278e2754">
<p>not applicable</p>
</td>
<td class="cellalignment3473" headers="d109278e3358 d109278e2757">
<p><code>DAV::write-properties</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e3358 d109278e2760">
<p>No</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3376" headers="d109278e2748">
<p>Make file resource versioned</p>
</td>
<td class="cellalignment3538" headers="d109278e3376 d109278e2751">
<pre dir="ltr">EXEC DBMS_XDB_VERSION.makeVersioned(
  &#39;/public/T1/res.xml&#39;);
</pre></td>
<td class="cellalignment3537" headers="d109278e3376 d109278e2754">
<p>not applicable</p>
</td>
<td class="cellalignment3473" headers="d109278e3376 d109278e2757">
<p><code>DAV::write-properties</code> on resource</p>
</td>
<td class="cellalignment3539" headers="d109278e3376 d109278e2760">
<p>No</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3394" headers="d109278e2748">
<p>Remove an event handler</p>
</td>
<td class="cellalignment3538" headers="d109278e3394 d109278e2751">
<p><code>DBMS_XEVENT.remove</code></p>
</td>
<td class="cellalignment3537" headers="d109278e3394 d109278e2754">
<p>not applicable</p>
</td>
<td class="cellalignment3473" headers="d109278e3394 d109278e2757">
<p><code>xdb:write-config</code> on resource or parent folder (depending on the context)</p>
</td>
<td class="cellalignment3539" headers="d109278e3394 d109278e2760">
<p>No</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3413" headers="d109278e2748">
<p>Commit changes</p>
</td>
<td class="cellalignment3538" headers="d109278e3413 d109278e2751">
<pre dir="ltr">COMMIT;
</pre></td>
<td class="cellalignment3537" headers="d109278e3413 d109278e2754">
<p>Automatic commit after each request</p>
</td>
<td class="cellalignment3473" headers="d109278e3413 d109278e2757">
<p>not applicable</p>
</td>
<td class="cellalignment3539" headers="d109278e3413 d109278e2760">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment3411">
<td class="cellalignment3537" id="d109278e3429" headers="d109278e2748">
<p>Rollback changes</p>
</td>
<td class="cellalignment3538" headers="d109278e3429 d109278e2751">
<pre dir="ltr">ROLLBACK;
</pre></td>
<td class="cellalignment3537" headers="d109278e3429 d109278e2754">
<p>not applicable</p>
</td>
<td class="cellalignment3473" headers="d109278e3429 d109278e2757">
<p>not applicable</p>
</td>
<td class="cellalignment3539" headers="d109278e3429 d109278e2760">
<p>Yes</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>In addition to the privileges listed in <a href="xdb16fol.htm#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI" title="This table describes the API options for accessing Oracle XML DB Repository.">Table 21-3</a>, privilege <code>xdb:read-properties</code> is required on each resource affected by an operation. Operations that affect the parent folder of a resource, in addition to the resource targeted by the operation, also require privilege <code>xdb:read-properties</code> on that parent folder. For example, deleting a resource affects both the resource to delete and its parent folder, so you need privilege <code>xdb:read-properties</code> on both the resource and its parent folder.</p>
<div class="infoboxnotealso" id="GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__GUID-07C931D5-F05B-4E55-AAEE-82ABAD44BC9E">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="xdb18res.htm#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">Repository Access Using RESOURCE_VIEW and PATH_VIEW</a></p>
</li>
<li>
<p><a href="xdb19rpl.htm#GUID-04D3270F-1AC3-407B-B730-6B5A93AA5D7C" title="PL/SQL packages DBMS_XDB_CONFIG and DBMS_XDB_REPOS together provide the Oracle XML&nbsp;DB resource application program interface (API) for PL/SQL. You use the former to configure Oracle XML&nbsp;DB and its repository. You use the latter to perform other, non-configuration operations on the repository.">PL/SQL Access to Oracle XML&nbsp;DB Repository</a></p>
</li>
<li>
<p><a href="xdb22pro.htm#GUID-0476309D-E3DF-4C56-BF21-68CD04D00C98" title="You can access Oracle XML&nbsp;DB Repository data using protocols FTP and HTTP(S)/WebDAV.">Repository Access Using Protocols</a></p>
</li>
<li>
<p><a href="xdb_jcr.htm#GUID-F0007175-676B-4187-AF1F-FC24D5ADCDBF" title="Oracle XML DB Content Connector implements Content Repository API for Java (also known as JCR), a Java API standard developed by the Java community as JSR-170. You can access Oracle XML&nbsp;DB Repository using Oracle XML DB Content Connector.">Oracle XML DB Content Connector</a></p>
</li>
<li>
<p><a class="olink ARPLS74188" target="_blank" href="../ARPLS/d_xdb_repos.htm#ARPLS74188"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about PL/SQL package <code>DBMS_XDB_REPOS</code></p>
</li>
<li>
<p><a class="olink ARPLS373" target="_blank" href="../ARPLS/d_xdb_ver.htm#ARPLS373"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about PL/SQL package <code>DBMS_XDB_VERSION</code></p>
</li>
<li>
<p><a class="olink ARPLS210" target="_blank" href="../ARPLS/d_xevent.htm#ARPLS210"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about PL/SQL package <code>DBMS_XEVENT</code></p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADXDB4194"></a><a id="ADXDB4195"></a><a id="ADXDB4196"></a><a id="ADXDB4193"></a>
<div class="props_rev_3"><a id="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75"></a>
<h2 id="ADXDB-GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75" class="sect2"><span class="enumeration_section">21.8</span> Accessing the Content of Repository Resources Using SQL</h2>
<div>
<p>In SQL you can access the content of a document in Oracle XML&nbsp;DB Repository using PL/SQL constructor <code>XDBURIType</code> or using <code>RESOURCE_VIEW</code> and the corresponding resource document.</p>
<div class="section">
<p>The easiest way is to use <code>XDBURIType</code>. You pass a URL to this constructor to specify which resource to access. The URL is assumed to start at the root of the repository. Object type <code>XDBURIType</code> provides methods <code>getBLOB()</code>, <code>getCLOB()</code>, and <code>getXML()</code>, to access the different kinds of content that can be associated with a resource.</p>
<p><a href="xdb16fol.htm#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFIEFDJ">Example 21-4</a> uses constructor <code>XDBURIType</code> to access the content of a text document.</p>
<p>The content of a document can also be accessed using <code>RESOURCE_VIEW</code> and the corresponding resource document. <a href="xdb16fol.htm#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFHICEA">Example 21-5</a> does this to access the content of a text document.</p>
<p>The content of XML documents (XML Schema-based or non-schema-based) can also be accessed this way. <a href="xdb16fol.htm#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFGFIAD">Example 21-6</a> uses an XPath expression that includes nodes from an XML document and nodes from the corresponding resource document to access the contents of a <code>PurchaseOrder</code> document.</p>
<p>In <a href="xdb16fol.htm#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFGFIAD">Example 21-6</a>, the namespace prefix, <code>r</code> identifies which nodes in the XPath expression are members of the resource namespace. Namespace prefix <code>r</code> is defined using the <code>XMLNAMESPACES</code> clause of SQL/XML function <code>XMLTable</code>. The namespace declaration is needed here because the purchase-order XML schema does not define a namespace, and it is not possible to apply a namespace prefix to nodes in the <code>PurchaseOrder</code> document.</p>
<div class="infoboxnotealso" id="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__GUID-9760D64A-61A7-4F21-B2F4-7AAF9E4035B8">
<p class="notep1">See Also:</p>
<p><a href="xdb_xquery.htm#GUID-4F83A835-C94B-4D62-999B-111AB5E8A8F1" title="The XQuery language is one of the main ways that you interact with XML data in Oracle XML&nbsp;DB. Support for the language includes SQL*Plus commandXQUERY and SQL/XML functions XMLQuery, XMLTable, XMLExists, and XMLCast.">XQuery and Oracle XML&nbsp;DB</a> for more information about the <code>XMLNAMESPACES</code> clause of <code>XMLTable</code></p>
</div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFIEFDJ">
<p class="titleinexample">Example 21-4 Accessing a Text Document in the Repository Using XDBURITYPE</p>
<pre dir="ltr">SELECT XDBURIType(&#39;/home/QUINE/NurseryRhyme.txt&#39;).getCLOB() FROM DUAL;
 
XDBURITYPE(&#39;/HOME/QUINE/NURSERYRHYME.TXT&#39;).GETCLOB()
----------------------------------------------------
Mary had a little lamb
Its fleece was white as snow
and everywhere that Mary went
that lamb was sure to go
 
1 row selected.
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFHICEA">
<p class="titleinexample">Example 21-5 Accessing Resource Content Using RESOURCE_VIEW</p>
<pre dir="ltr">SELECT CONTENT
  FROM RESOURCE_VIEW,
       XMLTable(XMLNAMESPACES (default &#39;http://xmlns.oracle.com/xdb/XDBResource.xsd&#39;),
                &#39;/Resource/Contents&#39; PASSING RES
                COLUMNS content CLOB PATH &#39;text&#39;)
  WHERE equals_path(RES, &#39;/home/QUINE/NurseryRhyme.txt&#39;) = 1;
 
CONTENT
-------
Mary had a little lamb
Its fleece was white as snow
and everywhere that Mary went
that lamb was sure to go
 
1 row selected.
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFGFIAD">
<p class="titleinexample">Example 21-6 Accessing XML Documents Using Resource and Namespace Prefixes</p>
<pre dir="ltr">SELECT des.description
  FROM RESOURCE_VIEW rv,
       XMLTable(<span class="bold">XMLNAMESPACES (&#39;http://xmlns.oracle.com/xdb/XDBResource.xsd&#39; AS &#34;r&#34;</span>),
                &#39;<span class="bold">/r:Resource/r:Contents/PurchaseOrder/LineItems/LineItem</span>&#39;
                PASSING rv.RES
                COLUMNS description VARCHAR2(256) PATH &#39;Description&#39;) des
  WHERE 
    equals_path(rv.RES, &#39;/home/QUINE/PurchaseOrders/2002/Mar/SBELL-2002100912333601PDT.xml&#39;) = 1;

DES.DESCRIPTION
---------------------------------
A Night to Remember
The Unbearable Lightness Of Being
The Wizard of Oz
 
3 rows selected.
</pre></div>
<!-- class="example" --></div>
</div>
<a id="ADXDB4197"></a>
<div class="props_rev_3"><a id="GUID-F11DE6D9-61DC-4A55-A3A5-74A3590928A3"></a>
<h2 id="ADXDB-GUID-F11DE6D9-61DC-4A55-A3A5-74A3590928A3" class="sect2"><span class="enumeration_section">21.9</span> Access to the Content of XML Schema-Based Documents</h2>
<div>
<p>You can access the content of an XML Schema-based document in the same way as for a non-schema-based document: use the corresponding resource document. Or you can access it as a row in the default table that was defined when the XML schema was registered with Oracle XML&nbsp;DB.</p>
<p>In the first case, you can use <code>RESOURCE_VIEW</code> to query different types of XML Schema-based documents with a single SQL statement.</p>
</div>
<a id="ADXDB4199"></a><a id="ADXDB4200"></a><a id="ADXDB4198"></a>
<div class="props_rev_3"><a id="GUID-254A0380-101C-4A85-92ED-80D892E7FC8C"></a>
<h3 id="ADXDB-GUID-254A0380-101C-4A85-92ED-80D892E7FC8C" class="sect3"><span class="enumeration_section">21.9.1</span> Accessing Resource Content Using Element XMLRef in Joins</h3>
<div>
<p>Element <code>XMLRef</code> in a resource document provides the join key required when a SQL statement needs to access or update metadata and content as part of a single operation.</p>
<div class="section">
<p>Examples here show queries that access resource content using joins based on the value of element <code>XMLRef</code>.</p>
<p><a href="xdb16fol.htm#GUID-254A0380-101C-4A85-92ED-80D892E7FC8C__BJFBDEJE">Example 21-7</a> locates a row in the <code>defaultTable</code> based on a path in Oracle XML&nbsp;DB Repository. SQL function <code>ref</code> locates the target row in the default table, based on the value of the <code>XMLRef</code> element in the resource document, <code>RES</code>.</p>
<p><a href="xdb16fol.htm#GUID-254A0380-101C-4A85-92ED-80D892E7FC8C__BJFFGBIB">Example 21-8</a> shows how to select fragments from XML documents based on metadata, path, and content. The query returns the value of element <code>Reference</code> for documents under <code>/home/QUINE/PurchaseOrders/2002/Mar</code> that contain orders for part number 715515009058.</p>
<p>In general, when accessing the content of schema-based XML documents, joining <code>RESOURCE_VIEW</code> or <code>PATH_VIEW</code> with the default table is more efficient than using <code>RESOURCE_VIEW</code> or <code>PATH_VIEW</code> on its own. An explicit join between the resource document and the default table tells Oracle XML&nbsp;DB that the SQL statement works on only one type of XML document. XPath rewrite can thus be used to optimize operations on the default table and the resource.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-254A0380-101C-4A85-92ED-80D892E7FC8C__BJFBDEJE">
<p class="titleinexample">Example 21-7 Querying Repository Resource Data Using SQL Function REF and Element XMLRef</p>
<pre dir="ltr">SELECT des.description
  FROM RESOURCE_VIEW rv,
       purchaseorder p,
       XMLTable(&#39;$p/PurchaseOrder/LineItems/LineItem&#39; PASSING p.OBJECT_VALUE AS &#34;p&#34;
                COLUMNS description VARCHAR2(256) PATH &#39;Description&#39;) des
  WHERE equals_path(rv.RES, &#39;/home/QUINE/PurchaseOrders/2002/Mar/SBELL-2002100912333601PDT.xml&#39;)
        = 1
    AND <span class="bold">ref</span>(p) = XMLCast(XMLQuery(&#39;declare default element namespace
                                  &#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;; (: :)
                                  fn:data(/Resource/<span class="bold">XMLRef</span>)&#39; PASSING rv.RES RETURNING CONTENT)
                         AS REF XMLType);
 
DES.DESCRIPTION
---------------------------------
A Night to Remember
The Unbearable Lightness Of Being
The Wizard of Oz
 
3 rows selected.
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-254A0380-101C-4A85-92ED-80D892E7FC8C__BJFFGBIB">
<p class="titleinexample">Example 21-8 Selecting XML Document Fragments Based on Metadata, Path, and Content</p>
<pre dir="ltr">SELECT XMLCast(XMLQuery(&#39;$p/PurchaseOrder/Reference&#39;
                        PASSING po.OBJECT_VALUE AS &#34;p&#34; RETURNING CONTENT)
               AS VARCHAR2(30))
  FROM RESOURCE_VIEW rv, purchaseorder po
  WHERE under_path(rv.RES, &#39;/home/QUINE/PurchaseOrders/2002/Mar&#39;) = 1
    AND ref(po) = XMLCast(
                    XMLQuery(&#39;declare default element namespace
                              &#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;; (: :)
                              fn:data(/Resource/XMLRef)&#39;
                             PASSING rv.RES RETURNING CONTENT)
                          AS REF XMLType)
    AND XMLExists(&#39;$p/PurchaseOrder/LineItems/LineItem/Part[@Id=&#34;715515009058&#34;]&#39;
                  PASSING po.OBJECT_VALUE AS &#34;p&#34;);

XMLCAST(XMLQUERY(&#39;$P/PURCHASEO
------------------------------
CJOHNSON-20021009123335851PDT
LSMITH-2002100912333661PDT
SBELL-2002100912333601PDT
 
3 rows selected.
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="ADXDB4201"></a>
<div class="props_rev_3"><a id="GUID-DE0B24FB-D864-4657-B03C-49442F516DA7"></a>
<h2 id="ADXDB-GUID-DE0B24FB-D864-4657-B03C-49442F516DA7" class="sect2"><span class="enumeration_section">21.10</span> Update of the Content of Repository Documents</h2>
<div>
<p>You can update the content of documents stored in Oracle XML&nbsp;DB Repository using Internet protocols or SQL.</p>
</div>
<a id="ADXDB4203"></a><a id="ADXDB4202"></a>
<div class="props_rev_3"><a id="GUID-B195A5C3-1844-4EE1-9671-4224CD808AC4"></a>
<h3 id="ADXDB-GUID-B195A5C3-1844-4EE1-9671-4224CD808AC4" class="sect3"><span class="enumeration_section">21.10.1</span> Update of Repository Content Using Internet Protocols</h3>
<div>
<p>The most popular content authoring tools support HTTP, FTP, and WebDAV protocols. Given appropriate access permissions, a simple URL targeting a document to update is all you need, to access and edit content stored in Oracle XML&nbsp;DB Repository.</p>
<p>Popular content authoring tools can use HTTP verb <code>get</code> to access the content of a document, given a URL to it, and they can use HTTP verb <code>put</code> to save the updated content.</p>
<p><a href="xdb16fol.htm#GUID-B195A5C3-1844-4EE1-9671-4224CD808AC4__CHDGFBEC">Figure 21-6</a> shows how, with the WebDAV support included in Microsoft Word, you can use Microsoft Word to update and edit a document stored in Oracle XML&nbsp;DB Repository.</p>
<div class="figure" id="GUID-B195A5C3-1844-4EE1-9671-4224CD808AC4__CHDGFBEC">
<p class="titleinfigure">Figure 21-6 Updating and Editing Content Stored in Oracle XML&nbsp;DB Using Microsoft Word</p>
<img width="862" height="678" src="img/GUID-77D6B0F1-BB78-4694-B06C-58846309F184-default.gif" alt="Description of Figure 21-6 follows" title="Description of Figure 21-6 follows"/><br/>
<a href="img_text/GUID-77D6B0F1-BB78-4694-B06C-58846309F184-default.htm">Description of &#34;Figure 21-6 Updating and Editing Content Stored in Oracle XML&nbsp;DB Using Microsoft Word&#34;</a></div>
<!-- class="figure" -->
<p>When an editing application such as Microsoft Word updates an XML document that is stored in Oracle XML&nbsp;DB, the database receives an input stream containing the new content of the document. Unfortunately, applications such as Word do not provide Oracle XML&nbsp;DB with any way of identifying which changes have taken place in the document. Partial updates are thus impossible. It is necessary to parse the entire document again, replacing all of the objects derived from the original document with objects derived from the new content.</p>
</div>
</div>
<a id="ADXDB4204"></a>
<div class="props_rev_3"><a id="GUID-868458A8-5FDD-42ED-A4B3-C648778DDCFA"></a>
<h3 id="ADXDB-GUID-868458A8-5FDD-42ED-A4B3-C648778DDCFA" class="sect3"><span class="enumeration_section">21.10.2</span> Update of Repository Content Using SQL</h3>
<div>
<p>You can use XQuery Update to update the content of any document stored in Oracle XML&nbsp;DB Repository. The content of the document can be modified by updating the resource document or by updating the default table that holds the content of the document.</p>
</div>
<a id="ADXDB4205"></a><a id="ADXDB4206"></a><a id="ADXDB6417"></a>
<div class="props_rev_3"><a id="GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E"></a>
<h4 id="ADXDB-GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E" class="sect4"><span class="enumeration_section">21.10.2.1</span> Updating a Document in the Repository by Updating Its Resource Document</h4>
<div>
<p>You can update the content of a document using a SQL <code>UPDATE</code> statement and SQL function <code>XMLQuery</code> with XQuery Update. An XQuery expression is passed to <code>XMLQuery</code> as the target of the update operation.</p>
<div class="section">
<p><a href="xdb16fol.htm#GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E__BJFEDJDH">Example 21-9</a> updates the content of a simple text document. The XQuery expression passed to <code>XMLQuery</code> as the target of the update operation identifies the text node as belonging to element <code>/Resource/Contents/text</code>.</p>
<p>This technique for updating the content of a document by updating the associated resource has the advantage that it can be used to update any kind of document stored in Oracle XML&nbsp;DB Repository.</p>
<p><a href="xdb16fol.htm#GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E__BJFEFBEC">Example 21-10</a> updates a node in an XML document by performing a SQL <code>UPDATE</code> operation on the corresponding resource document. Here, XQuery Update is used to change the value of the text node associated with element <code>User</code>.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E__BJFEDJDH">
<p class="titleinexample">Example 21-9 Updating a Text Document Using UPDATE and XQuery Update on the Resource</p>
<pre dir="ltr">DECLARE
  file         BFILE;
  contents     CLOB;
  dest_offset  NUMBER := 1;
  src_offset   NUMBER := 1;
  lang_context NUMBER := 0;
  conv_warning NUMBER := 0;
BEGIN
  file := bfilename(&#39;XMLDIR&#39;, &#39;tdadxdb-03-02.txt&#39;);
  DBMS_LOB.createTemporary(contents, true, DBMS_LOB.SESSION);
  DBMS_LOB.fileopen(file, DBMS_LOB.file_readonly);
  DBMS_LOB.loadClobfromFile(contents,
                            file,
                            DBMS_LOB.getLength(file),
                            dest_offset,
                            src_offset,
                            nls_charset_id(&#39;AL32UTF8&#39;),
                            lang_context,
                            conv_warning);
  DBMS_LOB.fileclose(file);
  UPDATE RESOURCE_VIEW
    SET RES =
      XMLQuery(&#39;declare default element namespace 
                  &#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;; (: :)
                copy $i := $p1 modify
                  (for $j in $i/Resource/Contents/text
                   return replace value of node $j with $p2)
                return $i&#39;
               PASSING RES AS &#34;p1&#34;, contents AS &#34;p2&#34; RETURNING CONTENT)
    WHERE equals_path(res, &#39;/home/QUINE/NurseryRhyme.txt&#39;) = 1;
  DBMS_LOB.freeTemporary(contents);
END;
/
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E__BJFEFBEC">
<p class="titleinexample">Example 21-10 Updating an XML Node Using UPDATE and XQuery Update on the Resource</p>
<pre dir="ltr">UPDATE RESOURCE_VIEW
  SET RES =
    XMLQuery(&#39;declare namespace r=&#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;;
              copy $i := $p1 modify
                (for $j in $i/r:Resource/r:Contents/PurchaseOrder/<span class="bold">User</span>
                 return replace value of node $j with $p2)
              return $i&#39;
             PASSING RES AS &#34;p1&#34;, &#39;SKING&#39; AS &#34;p2&#34; RETURNING CONTENT)
    WHERE equals_path(res, &#39;/home/QUINE/PurchaseOrders/2002/Mar/SBELL-2002100912333601PDT.xml&#39;)
          = 1;
 
1 row updated.

SELECT XMLCast(XMLQuery(
                 &#39;declare namespace ns=&#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;; (: :)
                  $r/ns:Resource/ns:Contents/PurchaseOrder/<span class="bold">User/text()</span>&#39;
                 PASSING RES AS &#34;r&#34; RETURNING CONTENT)
               AS VARCHAR2(32))
  FROM RESOURCE_VIEW
  WHERE equals_path(RES,
                    &#39;/home/QUINE/PurchaseOrders/2002/Mar/SBELL-2002100912333601PDT.xml&#39;)
        = 1;

XMLCAST(XMLQUERY(&#39;DECLARENAMESPA
--------------------------------
<span class="bold">SKING</span>

1 row selected.
</pre></div>
<!-- class="example" --></div>
</div>
<a id="ADXDB4208"></a><a id="ADXDB4207"></a>
<div class="props_rev_3"><a id="GUID-C8F8174D-5375-4E1A-9ED3-84A8238D2212"></a>
<h4 id="ADXDB-GUID-C8F8174D-5375-4E1A-9ED3-84A8238D2212" class="sect4"><span class="enumeration_section">21.10.2.2</span> Updating an XML Schema-Based Document in the Repository by Updating the Default Table</h4>
<div>
<p>You can update XML Schema-based documents by performing an update operation directly on the default table that is used to manage the content of the document.</p>
<div class="section">
<p>If the document must be located by a <code>WHERE</code> clause that includes a path or conditions based on metadata, then the SQL <code>UPDATE</code> statement must use a join between the resource and the default table.</p>
<p>In general, when updating the content of XML Schema-based documents, joining the <code>RESOURCE_VIEW</code> or <code>PATH_VIEW</code> with the default table is more efficient than using the <code>RESOURCE_VIEW</code> or <code>PATH_VIEW</code> on its own. The explicit join between the resource document and the default table tells Oracle XML&nbsp;DB that the SQL statement works on only one type of XML document. This lets a partial update be used on the default table and resource.</p>
<p>In <a href="xdb16fol.htm#GUID-C8F8174D-5375-4E1A-9ED3-84A8238D2212__BJFDCAEH">Example 21-11</a>, XQuery Update is used on the default table, with the target row identified by a path. The row to be updated is identified by a <code>REF</code>. The <code>REF</code> is identified by a repository path using Oracle SQL function <code>equals_path</code>. This limits the update to the row corresponding to the resource identified by the specified path.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-C8F8174D-5375-4E1A-9ED3-84A8238D2212__BJFDCAEH">
<p class="titleinexample">Example 21-11 Updating XML Schema-Based Documents in the Repository</p>
<pre dir="ltr">UPDATE purchaseorder p
  SET p.OBJECT_VALUE =
    XMLQuery(&#39;copy $i := $p1 modify
                (for $j in $i/PurchaseOrder/<span class="bold">User</span>
                 return replace value of node $j with $p2)
              return $i&#39;
             PASSING p.OBJECT_VALUE AS &#34;p1&#34;, &#39;<span class="bold">SBELL</span>&#39; AS &#34;p2&#34; RETURNING CONTENT)
    WHERE <span class="bold">ref(p)</span> =
      (SELECT XMLCast(XMLQuery(&#39;declare default element namespace
                                  &#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;; (: :)
                                fn:data(/Resource/XMLRef)&#39;
                               PASSING rv.RES RETURNING CONTENT) AS REF XMLType)
         FROM RESOURCE_VIEW rv
         WHERE <span class="bold">equals_path</span>(rv.RES,
                           &#39;/home/QUINE/PurchaseOrders/2002/Mar/SBELL-2002100912333601PDT.xml&#39;)
               = 1);

SELECT XMLCast(XMLQuery(&#39;$p/PurchaseOrder/<span class="bold">User/text()</span>&#39;
                        PASSING p.OBJECT_VALUE AS &#34;p&#34; RETURNING CONTENT)
               AS VARCHAR2(32))
  FROM purchaseorder p, RESOURCE_VIEW rv
  WHERE ref(p) = XMLCast(XMLQuery(&#39;declare default element namespace
                                &#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;; (: :)
                                fn:data(/Resource/XMLRef)&#39; PASSING rv.RES RETURNING CONTENT)
                      AS REF XMLType)
    AND equals_path(rv.RES, &#39;/home/QUINE/PurchaseOrders/2002/Mar/SBELL-2002100912333601PDT.xml&#39;)
        = 1;

XMLCAST(XMLQUERY(&#39;$P/PURCHASEO
------------------------------
<span class="bold">SBELL</span>
</pre></div>
<!-- class="example" --></div>
</div>
</div>
</div>
<a id="ADXDB4215"></a><a id="ADXDB4216"></a><a id="ADXDB4217"></a><a id="ADXDB4218"></a><a id="ADXDB4219"></a><a id="ADXDB4220"></a><a id="ADXDB4211"></a>
<div class="props_rev_3"><a id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B"></a>
<h2 id="ADXDB-GUID-01E1ED75-26DF-440E-8751-E00FEED2544B" class="sect2"><span class="enumeration_section">21.11</span> Querying Resources in RESOURCE_VIEW and PATH_VIEW</h2>
<div>
<p>Examples here illustrate folder-restricted queries of the repository using <code>RESOURCE_VIEW</code> and <code>PATH_VIEW</code> together with Oracle SQL functions <code>equals_path</code> and <code>under_path</code>.</p>
<div class="section">
<p>Oracle XML&nbsp;DB provides two Oracle SQL functions, <code>equals_path</code> and <code>under_path</code>, that you can use to perform <strong class="term">folder-restricted queries</strong>. Such queries limit SQL statements that operate on the <code>RESOURCE_VIEW</code> or <code>PATH_VIEW</code> to documents that are at a particular location in Oracle XML&nbsp;DB folder hierarchy.</p>
<p>Function <code>equals_path</code> restricts the statement to a single document identified by the specified path. Function <code>under_path</code> restricts the statement to those documents that exist beneath a certain point in the hierarchy.</p>
<p>Examples here demonstrate simple folder-restricted queries against resource documents stored in <code>RESOURCE_VIEW</code> and <code>PATH_VIEW</code>.</p>
<p>The query in <a href="xdb16fol.htm#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__CHDHIAJB">Example 21-12</a> uses SQL function <code>equals_path</code> and <code>RESOURCE_VIEW</code> to access a resource. The resource queried is that which results from the update operation of <a href="xdb16fol.htm#GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E__BJFEDJDH">Example 21-9</a>: the original resource text shown in <a href="xdb16fol.htm#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFIEFDJ">Example 21-4</a> and <a href="xdb16fol.htm#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFHICEA">Example 21-5</a> has been replaced by a different nursery rhyme, &#34;Hickory Dickory Dock...&#34;</p>
<p>As <a href="xdb16fol.htm#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__CHDHIAJB">Example 21-12</a> shows, a resource document is an XML document that captures the set of metadata defined by the DAV standard. The metadata includes information such as <code>CreationDate</code>, <code>Creator</code>, <code>Owner</code>, <code>ModificationDate</code>, and <code>DisplayName</code>. The content of the resource document can be queried and updated just like any other XML document, using SQL/XML access and query functions.</p>
<p>The query in <a href="xdb16fol.htm#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFBCHAC">Example 21-13</a> finds a path to each of the XSL stylesheets stored in Oracle XML&nbsp;DB Repository. It performs a search based on the <code>DisplayName</code> ending in <code>.xsl</code>.</p>
<p>The query in <a href="xdb16fol.htm#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFGFGHC">Example 21-14</a> counts the number of resources (files and folders) under the path <code>/home/QUINE/PurchaseOrders</code>. Using <code>RESOURCE_VIEW</code> rather than <code>PATH_VIEW</code> ensures that any resources that are the target of multiple links are only counted once. SQL function <code>under_path</code> restricts the result set to documents that can be accessed using a path that starts from <code>/home/QUINE/PurchaseOrders</code>.</p>
<p>The query in <a href="xdb16fol.htm#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFFIEGC">Example 21-15</a> lists the contents of the folder identified by path <code>/home/QUINE/PurchaseOrders/2002/Apr</code>. This is effectively a directory listing of the folder.</p>
<p>The query in <a href="xdb16fol.htm#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFEJJHH">Example 21-16</a> lists the set of links contained in the folder identified by the path <code>/home/QUINE/PurchaseOrders/2002/Apr</code> where the <code>DisplayName</code> element in the associated resource starts with <code>S</code>.</p>
<p>The query in <a href="xdb16fol.htm#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFEFHEJ">Example 21-17</a> finds a path to each resource in Oracle XML&nbsp;DB Repository that contains a <code>PurchaseOrder</code> document. The documents are identified based on the metadata property <code>SchemaElement</code> that identifies the XML schema URL and global element for schema-based XML data stored in the repository.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__CHDHIAJB">
<p class="titleinexample">Example 21-12 Accessing Resources Using EQUALS_PATH and RESOURCE_VIEW</p>
<pre dir="ltr">SELECT XMLSerialize(DOCUMENT r.res AS CLOB)
  FROM RESOURCE_VIEW r
  WHERE equals_path(res, &#39;/home/QUINE/NurseryRhyme.txt&#39;) = 1;
 
XMLSERIALIZE(DOCUMENTR.RESASCLOB)
--------------------------------------------------------------------------------
&lt;Resource xmlns=&#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34; 
          Hidden=&#34;false&#34; 
          Invalid=&#34;false&#34; 
          Container=&#34;false&#34; 
          CustomRslv=&#34;false&#34; 
          VersionHistory=&#34;false&#34; 
          StickyRef=&#34;true&#34;&gt;
  &lt;CreationDate&gt;2005-06-13T13:19:20.566623&lt;/CreationDate&gt;
  &lt;ModificationDate&gt;2005-06-13T13:19:22.997831&lt;/ModificationDate&gt;
  &lt;DisplayName&gt;NurseryRhyme.txt&lt;/DisplayName&gt;
  &lt;Language&gt;en-US&lt;/Language&gt;
  &lt;CharacterSet&gt;UTF-8&lt;/CharacterSet&gt;
  &lt;ContentType&gt;text/plain&lt;/ContentType&gt;
  &lt;RefCount&gt;1&lt;/RefCount&gt;
  &lt;ACL&gt;
    &lt;acl description=
         &#34;Private:All privileges to OWNER only and not accessible to others&#34;
         xmlns=&#34;http://xmlns.oracle.com/xdb/acl.xsd&#34; xmlns:dav=&#34;DAV:&#34;
         xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; 
         xsi:schemaLocation=&#34;http://xmlns.oracle.com/xdb/acl.xsd
         http://xmlns.oracle.com/xdb/acl.xsd&#34;
         shared=&#34;true&#34;&gt;
      &lt;ace&gt;
        &lt;grant&gt;true&lt;/grant&gt;
        &lt;principal&gt;dav:owner&lt;/principal&gt;
        &lt;privilege&gt;
          &lt;all/&gt;
        &lt;/privilege&gt;
      &lt;/ace&gt;
    &lt;/acl&gt;
  &lt;/ACL&gt;
  &lt;Owner&gt;QUINE&lt;/Owner&gt;
  &lt;Creator&gt;QUINE&lt;/Creator&gt;
  &lt;LastModifier&gt;QUINE&lt;/LastModifier&gt;
  &lt;SchemaElement&gt;http://xmlns.oracle.com/xdb/XDBSchema.xsd#text&lt;/SchemaElement&gt;
  &lt;Contents&gt;
    &lt;text&gt;Hickory Dickory Dock
The Mouse ran up the clock
The clock struck one
The Mouse ran down
Hickory Dickory Dock
    &lt;/text&gt;
  &lt;/Contents&gt;
&lt;/Resource&gt;
 
1 row selected.
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFBCHAC">
<p class="titleinexample">Example 21-13 Determining the Path to XSLT Stylesheets Stored in the Repository</p>
<pre dir="ltr">SELECT ANY_PATH FROM RESOURCE_VIEW
  WHERE XMLCast(XMLQuery(
                  &#39;declare namespace ns=&#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;; (: :)
                   $r/ns:Resource/ns:DisplayName&#39;
                  PASSING RES AS &#34;r&#34; RETURNING CONTENT)
                AS VARCHAR2(100))
        LIKE &#39;%.xsl&#39;;
 
ANY_PATH
-------------------------------------------
/home/MDSYS/epsg/sdoepsggrid2nadcon.xsl
/home/MDSYS/epsg/sdoepsggrid2ntv2/xsl
/source/schemas/poSource/xsl/empdept.xsl
/source/schemas/poSource/xsl/purchaseOrder.xsl
 
4 rows selected.
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFGFGHC">
<p class="titleinexample">Example 21-14 Counting Resources Under a Path</p>
<pre dir="ltr">SELECT count(*)
   FROM RESOURCE_VIEW
   WHERE under_path(RES, &#39;/home/QUINE/PurchaseOrders&#39;) = 1;
 
  COUNT(*)
----------
       145

1 row selected.
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFFIEGC">
<p class="titleinexample">Example 21-15 Listing the Folder Contents in a Path</p>
<pre dir="ltr">SELECT PATH
  FROM PATH_VIEW
  WHERE under_path(RES, &#39;/home/QUINE/PurchaseOrders/2002/Apr&#39;) = 1;
 
PATH
----------------------------------------------------------------------
/home/QUINE/PurchaseOrders/2002/Apr/AMCEWEN-20021009123336171PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/AMCEWEN-20021009123336271PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/EABEL-20021009123336251PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/PTUCKER-20021009123336191PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/PTUCKER-20021009123336291PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SBELL-20021009123336231PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SBELL-20021009123336331PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SKING-20021009123336321PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SMCCAIN-20021009123336151PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SMCCAIN-20021009123336341PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/VJONES-20021009123336301PDT.xml
 
11 rows selected.
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFEJJHH">
<p class="titleinexample">Example 21-16 Listing the Links Contained in a Folder</p>
<pre dir="ltr">SELECT PATH
  FROM PATH_VIEW
  WHERE XMLCast(XMLQuery(
                  &#39;declare namespace ns=&#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;; (: :)
                   $r/ns:Resource/ns:DisplayName&#39;
                  PASSING RES AS &#34;r&#34; RETURNING CONTENT)
                AS VARCHAR2(100))
        LIKE &#39;S%&#39;
    AND under_path(RES, &#39;/home/QUINE/PurchaseOrders/2002/Apr&#39;) = 1;
 
PATH
----------------------------------------------------------------------
/home/QUINE/PurchaseOrders/2002/Apr/SBELL-20021009123336231PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SBELL-20021009123336331PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SKING-20021009123336321PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SMCCAIN-20021009123336151PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/SMCCAIN-20021009123336341PDT.xml
 
5 rows selected.
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFEFHEJ">
<p class="titleinexample">Example 21-17 Finding Paths to Resources that Contain Purchase-Order XML Documents</p>
<pre dir="ltr">SELECT ANY_PATH
  FROM RESOURCE_VIEW
 WHERE XMLExists(
         &#39;declare namespace ns=&#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;; (: :)
          $r/ns:Resource[ns:SchemaElement=
          &#34;http://localhost:8080/source/schemas/poSource/xsd/purchaseOrder.xsd#PurchaseOrder&#34;]&#39;
         PASSING RES AS &#34;r&#34;);
</pre>
<p>The query returns the following paths, each of which contains a <code>PurchaseOrder</code> document:</p>
<pre dir="ltr">ANY_PATH
-----------------------------------------------------------------------
/home/QUINE/PurchaseOrders/2002/Apr/AMCEWEN-20021009123336171PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/AMCEWEN-20021009123336271PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/EABEL-20021009123336251PDT.xml
/home/QUINE/PurchaseOrders/2002/Apr/PTUCKER-20021009123336191PDT.xml

<span class="bold">...</span>

132 rows selected.
</pre></div>
<!-- class="example" --></div>
</div>
<a id="ADXDB4222"></a><a id="ADXDB4221"></a>
<div class="props_rev_3"><a id="GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D"></a>
<h2 id="ADXDB-GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D" class="sect2"><span class="enumeration_section">21.12</span> Oracle XML&nbsp;DB Hierarchical Repository Index</h2>
<div>
<p>Oracle XML&nbsp;DB uses a hierarchical index for Oracle XML&nbsp;DB Repository, to optimize the performance of path-based and folder-restricted queries of the repository. It is implemented as an Oracle domain index.</p>
<p>In a conventional relational database, path-based access and folder-restricted queries are implemented using <code>CONNECT BY</code> operations. Such queries are expensive, so path-based access and folder-restricted queries can become inefficient as the number of documents and depth of the folder hierarchy increases.</p>
<p>To address this issue, Oracle XML&nbsp;DB introduces a new index type, the <strong class="term">hierarchical repository index</strong>. This lets the database resolve folder-restricted queries without relying on a <code>CONNECT BY</code> operation. Because of this, Oracle XML&nbsp;DB can execute path-based and folder-restricted queries efficiently. The hierarchical repository index is implemented as an Oracle domain index. This is the same technique used to add Oracle Text indexing support and many other advanced index types to the database.</p>
<p><a href="xdb16fol.htm#GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D__BJFBDFAI">Example 21-18</a> shows the execution plan output generated for a folder-restricted query. As shown, the hierarchical repository index <code>XDBHI_IDX</code> is used to resolve the query.</p>
<div class="example" id="GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D__BJFBDFAI">
<p class="titleinexample">Example 21-18 Execution Plan Output for a Folder-Restricted Query</p>
<pre dir="ltr">SELECT PATH
  FROM PATH_VIEW
  WHERE XMLCast(
          XMLQuery(
            &#39;declare namespace ns=&#34;http://xmlns.oracle.com/xdb/XDBResource.xsd&#34;; (: :)
             $r/ns:Resource/ns:DisplayName&#39;
            PASSING RES AS &#34;r&#34; RETURNING CONTENT)
          AS VARCHAR2(100))
        LIKE &#39;S%&#39;
    AND under_path(RES, &#39;/home/QUINE/PurchaseOrders/2002/Apr&#39;) = 1;
</pre>
<pre dir="ltr"> 
PLAN_TABLE_OUTPUT
------------------------------------------------------------------------------------------------------
Plan hash value: 2568289845
 
------------------------------------------------------------------------------------------------------
| Id  | Operation                            | Name          | Rows  | Bytes | Cost (%CPU)| Time     |
------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                     |               |    17 |  3111 |    34   (6)| 00:00:01 |
|   1 |  NESTED LOOPS                        |               |    17 |  3111 |    34   (6)| 00:00:01 |
|   2 |   NESTED LOOPS                       |               |    17 |  2822 |    34   (6)| 00:00:01 |
|   3 |    NESTED LOOPS                      |               |   466 | 63842 |    34   (6)| 00:00:01 |
|*  4 |     TABLE ACCESS BY INDEX ROWID      | XDB$RESOURCE  |     1 |   135 |     3   (0)| 00:00:01 |
|*  5 |      DOMAIN INDEX                    | <span class="bold">XDBHI_IDX</span>     |       |       |            |          |
|   6 |     COLLECTION ITERATOR PICKLER FETCH|               |       |       |            |          |
|*  7 |    INDEX UNIQUE SCAN                 | XDB_PK_H_LINK |     1 |    28 |     0   (0)| 00:00:01 |
|*  8 |   INDEX UNIQUE SCAN                  | SYS_C003900   |     1 |    17 |     0   (0)| 00:00:01 |
------------------------------------------------------------------------------------------------------
 
Predicate Information (identified by operation id):
---------------------------------------------------
 
   4 - filter(CAST(&#34;P&#34;.&#34;SYS_NC00011$&#34; AS VARCHAR2(100)) LIKE &#39;S%&#39;)
   5 - access(&#34;XDB&#34;.&#34;UNDER_PATH&#34;(SYS_MAKEXML(&#39;8758D485E6004793E034080020B242C6&#39;,734,&#34;XMLEXTRA&#34;
              ,&#34;XMLDATA&#34;),&#39;/home/QUINE/PurchaseOrders/2002/Apr&#39;,9999)=1)
   7 - access(&#34;H&#34;.&#34;PARENT_OID&#34;=SYS_OP_ATG(VALUE(KOKBF$),3,4,2) AND
              &#34;H&#34;.&#34;NAME&#34;=SYS_OP_ATG(VALUE(KOKBF$),2,3,2))
   8 - access(&#34;R2&#34;.&#34;SYS_NC_OID$&#34;=SYS_OP_ATG(VALUE(KOKBF$),3,4,2))
 
25 rows selected.
</pre></div>
<!-- class="example" --></div>
</div>
<hr/>
<br/>
<p style="text-decoration:underline">Footnote Legend</p>
Footnote&nbsp;1:
<p>The graph is established by the hard links that define the repository structure, and cycles are not permitted using hard links. You can, however, introduce cycles using weak links. See <span class="q">&#34;<a href="xdb16fol.htm#GUID-72981E53-0B60-4096-80E0-06A139086DED" title="Links that target repository resources can be hard or weak. Hard and weak links have different dependencies with respect to the resources that they target. Hard links cannot target ancestor folders; weak links can. You can query the repository path view, PATH_VIEW, to determine the type of a repository link.">Hard Links and Weak Links</a>&#34;</span>.</p>
<br/>
Footnote&nbsp;2:
<p>Repository folder <code>/dbfs</code> gives you protocol access to your DBFS content. See <a class="olink ADLOB0006" target="_blank" href="../ADLOB/adlob_client.htm#ADLOB0006"><span class="italic">Oracle Database SecureFiles and Large Objects Developer&#39;s Guide</span></a> for information about DBFS.</p>
<br/></div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3410">
<tr>
<td class="cellalignment3417">
<table class="cellalignment3415">
<tr>
<td class="cellalignment3414"><a href="partpg5.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3414"><a href="xdb_repos_config.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3419">
<table class="cellalignment3413">
<tr>
<td class="cellalignment3414"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3414"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3414"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3414"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3414"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3414"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>


</body></html>