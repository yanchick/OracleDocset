<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-1636"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Use%20of%20XLink%20and%20XInclude%20with%20Oracle%20XML%C2%A0DB"></a><title>Use of XLink and XInclude with Oracle XML&nbsp;DB</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="You can use XLink and XInclude with resources in Oracle XML&nbsp;DB Repository."/>
<meta name="keywords" content="XInclude, content-management application, definition, XLink, compound XML document, document link, simple XLink link, complex XLink link, extended XLink link, third-party XLink link, link types, simple link, extended link, complex link, third-party link, weak link, deletion, unresolved XLink and XInclude links, unresolved link"/>
<meta name="dcterms.created" content="2016-12-08T13:53:25Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="XML DB Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41152-15"/>
<meta name="dcterms.isVersionOf" content="ADXDB"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="xdb_repos_config.htm" title="Previous" type="text/html"/>
<link rel="Next" href="xdb18res.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41152-15.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-5731BA64-7DEB-44A2-925E-D07014372B66"></a> <span id="PAGE" style="display:none;">36/61</span> <!-- End Header -->
<a id="ADXDB3800"></a>
<h1 id="ADXDB-GUID-5731BA64-7DEB-44A2-925E-D07014372B66" class="sect1"><span class="enumeration_chapter">23</span> Use of XLink and XInclude with Oracle XML&nbsp;DB</h1>
<div>
<p>You can use XLink and XInclude with resources in Oracle XML&nbsp;DB Repository.</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="xdb_xlink.htm#GUID-3CD58619-90F5-4E59-8CF6-E6D6EDAD0D93" title="A document-oriented, or content-management, application often tracks relationships, between documents, and those relationships are often represented and manipulated as links of various kinds. Such links can affect application behavior in various ways, including affecting the document content and the response to user operations such as mouse clicks.">Overview of XLink and XInclude</a></p>
</li>
<li>
<p><a href="xdb_xlink.htm#GUID-13BF9F9B-2BEC-474F-821E-93B8B40325DD" title="XLink and XInclude link types are described, as well as the relation between these and Oracle XML&nbsp;DB Repository links. XLink links are more general than repository links. XLink links can be simple or extended. Oracle XML&nbsp;DB supports only simple, not extended, XLink links.">Link Types for XLink and XInclude</a></p>
</li>
<li>
<p><a href="xdb_xlink.htm#GUID-CFE8785E-0D57-4077-8044-95BF1495052C" title="XInclude is the W3C recommendation for the syntax and processing model for merging the infosets of multiple XML documents into a single infoset. Element xi:include is used to include another document, specifying its URI as the value of an href attribute. Element xi:include can be nested, so that an included document can itself include other documents.">XInclude: Compound Documents</a></p>
</li>
<li>
<p><a href="xdb_xlink.htm#GUID-FE4BC710-4837-4C04-8998-095A88859D4D" title="You can configure Oracle XML&nbsp;DB Repository resources so that XLink links are ignored, or so that they are mapped to Oracle XML&nbsp;DB document links.">Oracle XML&nbsp;DB Support for XLink</a></p>
</li>
<li>
<p><a href="xdb_xlink.htm#GUID-29969882-74DD-4865-A4E2-4CEB2DCCF81E" title="Oracle XML&nbsp;DB supports XInclude 1.0 as the standard mechanism for managing compound documents. It does not support attribute xpointer and the inclusion of document fragments, however. Only complete documents can be included (using attribute href).">Oracle XML&nbsp;DB Support for XInclude</a></p>
</li>
<li>
<p><a href="xdb_xlink.htm#GUID-B9EAFB57-6F16-4BD0-B664-957359B4263E" title="You can query the read-only public view DOCUMENT_LINKS to obtain system information about document links derived from both XLink and XInclude links. The information in this view includes the following columns, for each link:">Use DOCUMENT_LINKS View to Examine XLink and XInclude Links</a></p>
</li>
<li>
<p><a href="xdb_xlink.htm#GUID-CC5F92B5-4718-4E29-B407-544C960AE5BE" title="The resource configuration file that you use as a resource to configure XLink and XInclude processing for other resources is described.">Configuration of Repository Resources for XLink and XInclude</a></p>
</li>
<li>
<p><a href="xdb_xlink.htm#GUID-67A0D8D0-7A95-443E-B108-D403AB882F10" title="You can use PL/SQL procedure DBMS_XDB_REPOS.processLinks to manually process all XLink and XInclude links in a single document or in all documents of a folder.">Manage XLink and XInclude Links Using DBMS_XDB_REPOS.processLinks</a></p>
</li>
</ul>
</div>
<a id="ADXDB5331"></a>
<div class="props_rev_3"><a id="GUID-3CD58619-90F5-4E59-8CF6-E6D6EDAD0D93"></a>
<h2 id="ADXDB-GUID-3CD58619-90F5-4E59-8CF6-E6D6EDAD0D93" class="sect2"><span class="enumeration_section">23.1</span> Overview of XLink and XInclude</h2>
<div>
<p>A document-oriented, or <strong class="term">content-management</strong>, application often tracks relationships, between documents, and those relationships are often represented and manipulated as links of various kinds. Such links can affect application behavior in various ways, including affecting the document content and the response to user operations such as mouse clicks.</p>
<p>W3C has two recommendations that are pertinent in this context, for documents that are managed in XML repositories:</p>
<ul style="list-style-type: disc;">
<li>
<p><strong class="term">XLink &ndash;</strong> Defines various types of links between resources. These links can model arbitrary relationships between documents. Those documents can reside inside or outside the repository.</p>
</li>
<li>
<p><strong class="term">XInclude &ndash;</strong> Defines ways to include the content of multiple XML documents or fragments in a single infoset. This provides for compound documents, which model inclusion relationships. <strong class="term">Compound documents</strong> are documents that contain other documents. More precisely, they are file resources that include documents or document fragments. The included objects can be file resources in the same repository or documents or fragments outside the repository.</p>
</li>
</ul>
<p>Each of these standards is very general, and it is not limited to modeling relationships between XML documents. There is no requirement that the documents linked using XLink or included in an XML document using XInclude be XML documents.</p>
<p>Using XLink and XInclude to represent document relationships provides flexibility for applications, facilitates reuse of component documents, and enables their fine-grained manipulation (access control, versioning, metadata, and so on). Whereas using XML data structure (an ancestor&ndash;descendents hierarchy) to model relationships requires those relationships to be relatively fixed, using XLink and XInclude to model relationships can easily allow for change in those relationships.</p>
<div class="infobox-note" id="GUID-3CD58619-90F5-4E59-8CF6-E6D6EDAD0D93__GUID-3908226E-7750-4C72-8C21-AF498FF204CE">
<p class="notep1">Note:</p>
<p>For XML schema-based documents to be able to use XLink and XInclude attributes, the XML schema must either explicitly declare those attributes or allow any attributes.</p>
</div>
<div class="infoboxnotealso" id="GUID-3CD58619-90F5-4E59-8CF6-E6D6EDAD0D93__GUID-51875976-34A8-4F94-868A-525A184F7EA3">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="http://www.w3.org/TR/xlink" target="_blank"><code>http://www.w3.org/TR/xlink</code></a> for information about the XLink standard</p>
</li>
<li>
<p><a href="http://www.w3.org/TR/xinclude" target="_blank"><code>http://www.w3.org/TR/xinclude</code></a> for information about the XInclude standard</p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADXDB5332"></a>
<div class="props_rev_3"><a id="GUID-13BF9F9B-2BEC-474F-821E-93B8B40325DD"></a>
<h2 id="ADXDB-GUID-13BF9F9B-2BEC-474F-821E-93B8B40325DD" class="sect2"><span class="enumeration_section">23.2</span> Link Types for XLink and XInclude</h2>
<div>
<p>XLink and XInclude link types are described, as well as the relation between these and Oracle XML&nbsp;DB Repository links. XLink links are more general than repository links. XLink links can be simple or extended. Oracle XML&nbsp;DB supports only simple, not extended, XLink links.</p>
</div>
<a id="ADXDB5333"></a>
<div class="props_rev_3"><a id="GUID-FD53E432-6D87-44F7-BCF6-E6F65290FFEB"></a>
<h3 id="ADXDB-GUID-FD53E432-6D87-44F7-BCF6-E6F65290FFEB" class="sect3"><span class="enumeration_section">23.2.1</span> XLink and XInclude Links Model Document Relationships</h3>
<div>
<p>XLink and XInclude links model arbitrary relationships among documents. The meaning and behavior of a relationship are determined by the applications that use the link. They are not inherent in the link itself. XLink and XInclude links can be mapped to Oracle XML&nbsp;DB <strong class="term">document links</strong>.</p>
<p>When document links target Oracle XML&nbsp;DB Repository resources, they can (according to a configuration option) be hard or weak links. In this, they are similar to repository links in that context. Repository links can be navigated using file system-related protocols such as FTP and HTTP. Document links cannot, but they can be navigated using the XPath 2.0 function <code>fn:doc</code>.</p>
<div class="infoboxnotealso" id="GUID-FD53E432-6D87-44F7-BCF6-E6F65290FFEB__GUID-FB3A457F-46C5-41F0-B740-377A87AE2232">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="xdb16fol.htm#GUID-72981E53-0B60-4096-80E0-06A139086DED" title="Links that target repository resources can be hard or weak. Hard and weak links have different dependencies with respect to the resources that they target. Hard links cannot target ancestor folders; weak links can. You can query the repository path view, PATH_VIEW, to determine the type of a repository link.">Hard Links and Weak Links</a>&#34;</span></p>
</div>
</div>
</div>
<a id="ADXDB5334"></a>
<div class="props_rev_3"><a id="GUID-B330AAB4-20C3-44C8-B0DD-E2370E6D07A0"></a>
<h3 id="ADXDB-GUID-B330AAB4-20C3-44C8-B0DD-E2370E6D07A0" class="sect3"><span class="enumeration_section">23.2.2</span> XLink Link Types and XInclude Link Types</h3>
<div>
<p>XLink and XInclude can provide links to other documents. In the case of XInclude, attributes <code>href</code> and <code>xpointer</code> are used to specify the target document.</p>
<p>Xlink links can be simple or extended. <strong class="term">Simple</strong> links are unidirectional, from a source to a target. <strong class="term">Extended</strong> links (sometimes called <strong class="term">complex</strong>) can model relationships between multiple documents, with different directionalities. Both simple and extended links can include link metadata. XLink links are represented in XML data using various attributes of the namespace <code>http://www.w3.org/1999/xlink</code>, which has the predefined prefix <code>xlink</code>. Simple links are represented in XML data using attribute <code>type</code> with value <code>simple</code>, that is, <code>xlink:type = &#34;simple&#34;</code>. Extended Xlink links are represented using <code>xlink:type = &#34;extended&#34;</code>.</p>
<p><strong class="term">Third-party</strong> extended Xlink links are not contained in any of the documents whose relationships they model. Third-party links can thus be used to relate documents, such as binary files, that, themselves, have no way of representing a link.</p>
<p>The source end of a simple Xlink link (that is, the document containing the link) must be an XML document. The target end of a simple link can be any document. There are no such restrictions for extended links. <a href="xdb_xlink.htm#GUID-CB94F44C-3059-4776-A4DE-00F72249A9E0__CIHBJGJB">Example 23-3</a> shows examples of simple links. The link targets are represented using attribute <code>xlink:href</code>.</p>
</div>
</div>
</div>
<a id="ADXDB5336"></a><a id="ADXDB5335"></a>
<div class="props_rev_3"><a id="GUID-CFE8785E-0D57-4077-8044-95BF1495052C"></a>
<h2 id="ADXDB-GUID-CFE8785E-0D57-4077-8044-95BF1495052C" class="sect2"><span class="enumeration_section">23.3</span> XInclude: Compound Documents</h2>
<div>
<p>XInclude is the W3C recommendation for the syntax and processing model for merging the infosets of multiple XML documents into a single infoset. Element <code>xi:include</code> is used to include another document, specifying its URI as the value of an <code>href</code> attribute. Element <code>xi:include</code> can be nested, so that an included document can itself include other documents.</p>
<p>(However, an inclusion cycle raises an error in Oracle XML&nbsp;DB. The resources are created, but an error is raised when the inclusions are expanded.)</p>
<p>XInclude thus provides for <span class="italic">compound</span> documents: repository file resources that include other XML documents or fragments. The included objects can be file resources in the same repository or documents or fragments outside the repository.</p>
<p>A book might be an example of a typical compound document, as managed by a content-management system. Each book includes chapter documents, which can each be managed as separate objects, with their own URLs. A chapter document can have its own metadata and access control, and it can be versioned. A book can include (reference) a specific version of a chapter document. The same chapter document can be included in multiple book documents, for reuse. Because inclusion is modeled using XInclude, content management is simplified. It is easy, for example, to replace one chapter in a book by another.</p>
<p><a href="xdb_xlink.htm#GUID-CFE8785E-0D57-4077-8044-95BF1495052C__CIHBIICH">Example 23-1</a> illustrates an XML <code>Book</code> element that includes four documents. One of those documents, <code>part1.xml</code>, is also shown. Document <code>part1.xml</code> includes other documents, representing chapters.</p>
<p>These are some additional features of XInclude:</p>
<ul style="list-style-type: disc;">
<li>
<p>Inclusion of plain text &ndash; You can include unparsed, non-XML text using attribute <code>parse</code> with a value of <code>text</code>: <code>parse = &#34;text&#34;</code>.</p>
</li>
<li>
<p>Inclusion of XML fragments &ndash; You can use an <code>xpointer</code> attribute in an <code>xi:include</code> element to specify an XML fragment to include, instead of an entire document.</p>
</li>
<li>
<p>Fallback processing &ndash; In case of error, such as inability to access the URI of an included document, an <code>xi:include</code> syntax error, or an <code>xpointer</code> reference that returns null, XInclude performs the treatment specified by element <code>xi:fallback</code>. This generally specifies an alternative element to be included. The alternative element can itself use <code>xi:include</code> to include other documents.</p>
</li>
</ul>
<div class="example" id="GUID-CFE8785E-0D57-4077-8044-95BF1495052C__CIHBIICH">
<p class="titleinexample">Example 23-1 XInclude Used in a Book Document to Include Parts and Chapters</p>
<p>The top-level document representing a book contains element <code>Book</code>.</p>
<pre dir="ltr">&lt;Book xmlns:xi=&#34;http://www.w3.org/2001/XInclude&#34;&gt;
  &lt;xi:include href=toc.xml&#34;/&gt;
  &lt;xi:include href=part1.xml&#34;/&gt;
  &lt;xi:include href=part2.xml&#34;/&gt;
  &lt;xi:include href=index.xml&#34;/&gt;
&lt;/Book&gt;
</pre>
<p>A major book part, file (resource) <code>part2.xml</code>, contains a <code>Part</code> element, which includes multiple chapter documents.</p>
<pre dir="ltr">&lt;?xml version=&#34;1.0&#34;?&gt;
&lt;Part xmlns:xi=&#34;http://www.w3.org/2001/XInclude&#34;&gt;
  &lt;xi:include href=&#34;chapter5.xml&#34;/&gt;
  &lt;xi:include href=&#34;chapter6.xml&#34;/&gt;
  &lt;xi:include href=&#34;chapter8.xml&#34;/&gt;
  &lt;xi:include href=&#34;chapter9.xml&#34;/&gt;
&lt;/Part&gt;
</pre></div>
<!-- class="example" --></div>
</div>
<a id="ADXDB5337"></a>
<div class="props_rev_3"><a id="GUID-FE4BC710-4837-4C04-8998-095A88859D4D"></a>
<h2 id="ADXDB-GUID-FE4BC710-4837-4C04-8998-095A88859D4D" class="sect2"><span class="enumeration_section">23.4</span> Oracle XML&nbsp;DB Support for XLink</h2>
<div>
<p>You can configure Oracle XML&nbsp;DB Repository resources so that XLink links are ignored, or so that they are mapped to Oracle XML&nbsp;DB document links.</p>
<p>Oracle XML&nbsp;DB supports only simple XLink links, not extended XLink links.</p>
<p>When an XML document containing XLink attributes is added to Oracle XML&nbsp;DB Repository, either as resource content or as user-defined resource metadata, special processing can occur, depending on how the repository or individual repository resources are configured. Element <code>XLinkConfig</code> of the resource configuration document, <code>XDBResConfig.xsd</code>, determines this behavior.</p>
<p>If you configure resources so that XLink links are mapped to Oracle XML&nbsp;DB document links, you can specify that the document links are to be hard or weak. Hard and weak document links have the same properties as hard and weak repository links.</p>
<p>The privileges needed to create or update document links are the same as those needed to create or update repository links. Even partially updating a document requires the same privileges needed to delete the entire document and reinsert it. In particular, even if you update just one document link you must have delete and insert privileges for <span class="italic">each</span> of the documents linked by the document containing the link.</p>
<p>If configuration maps XLink links to document links, then, whenever a document containing XLink links is added to the repository, the XLink information is extracted and stored in a system link table. Link target (destination) locations are replaced by direct paths that are based on the resource OIDs. Configuration can also specify whether OID paths are to be replaced by named paths (URLs) upon document retrieval. Using OID paths instead of named paths generally offers a performance advantage when links are processed, including when resource contents are retrieved.</p>
<p>You can use XLink within resource content, but not within resource metadata.</p>
<div class="infoboxnotealso" id="GUID-FE4BC710-4837-4C04-8998-095A88859D4D__GUID-E3F01335-85E2-451B-85BB-444903D9C3D5">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xdb_xlink.htm#GUID-B9EAFB57-6F16-4BD0-B664-957359B4263E" title="You can query the read-only public view DOCUMENT_LINKS to obtain system information about document links derived from both XLink and XInclude links. The information in this view includes the following columns, for each link:">Use DOCUMENT_LINKS View to Examine XLink and XInclude Links</a>&#34;</span></p>
</li>
<li>
<p><a href="xdb_repos_meta.htm#GUID-74BCC51E-2E7C-4DB6-8DCF-F65122FE132E" title="You can create your own metadata to associate with XML data stored in Oracle XML&nbsp;DB Repository.">User-Defined Repository Metadata</a></p>
</li>
<li>
<p><span class="q">&#34;<a href="xdb16fol.htm#GUID-72981E53-0B60-4096-80E0-06A139086DED" title="Links that target repository resources can be hard or weak. Hard and weak links have different dependencies with respect to the resources that they target. Hard links cannot target ancestor folders; weak links can. You can query the repository path view, PATH_VIEW, to determine the type of a repository link.">Hard Links and Weak Links</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="xdb_xlink.htm#GUID-CC5F92B5-4718-4E29-B407-544C960AE5BE" title="The resource configuration file that you use as a resource to configure XLink and XInclude processing for other resources is described.">Configuration of Repository Resources for XLink and XInclude</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="apphxdb.htm#GUID-B33E058B-0660-4879-A6A2-64B45423BA1C" title="A full listing is presented of the Oracle XML&nbsp;DB-supplied XML schema used to configure repository resources. It is accessible in Oracle XML&nbsp;DB Repository at path /sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBResConfig.xsd.">XDBResConfig.xsd: XML Schema for Resource Configuration</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADXDB5338"></a>
<div class="props_rev_3"><a id="GUID-29969882-74DD-4865-A4E2-4CEB2DCCF81E"></a>
<h2 id="ADXDB-GUID-29969882-74DD-4865-A4E2-4CEB2DCCF81E" class="sect2"><span class="enumeration_section">23.5</span> Oracle XML&nbsp;DB Support for XInclude</h2>
<div>
<p>Oracle XML&nbsp;DB supports XInclude 1.0 as the standard mechanism for managing compound documents. It does not support attribute <code>xpointer</code> and the inclusion of document fragments, however. Only complete documents can be included (using attribute <code>href</code>).</p>
<p>You can use XInclude to create XML documents that include existing content. You can also configure the implicit decomposition of non-schema-based XML documents, creating a set of repository resources that contain XInclude inclusion references.</p>
<p>The content of included documents must be XML data or plain text (with attribute <code>parse = &#34;text&#34;</code>). You cannot include binary content directly using XInclude, but you can use XLink to link to binary content.</p>
<p>You can use XInclude within resource content, but not within resource metadata.</p>
<div class="infoboxnotealso" id="GUID-29969882-74DD-4865-A4E2-4CEB2DCCF81E__GUID-7D9BEB33-EE96-43D2-AFA3-17700C5A2DCE">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="xdb_xlink.htm#GUID-B9EAFB57-6F16-4BD0-B664-957359B4263E" title="You can query the read-only public view DOCUMENT_LINKS to obtain system information about document links derived from both XLink and XInclude links. The information in this view includes the following columns, for each link:">Use DOCUMENT_LINKS View to Examine XLink and XInclude Links</a>&#34;</span></p>
</div>
</div>
<a id="ADXDB5340"></a><a id="ADXDB5339"></a>
<div class="props_rev_3"><a id="GUID-A2B5A064-7522-42EB-9EDC-1B52FC883F07"></a>
<h3 id="ADXDB-GUID-A2B5A064-7522-42EB-9EDC-1B52FC883F07" class="sect3"><span class="enumeration_section">23.5.1</span> Expanding Compound-Document Inclusions</h3>
<div>
<p>You can optionally expand <code>xi:include</code> elements with their targets when you retrieve a compound document from Oracle XML&nbsp;DB Repository.</p>
<div class="section">
<p>When you retrieve a compound document you have a choice:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Retrieve it as is, with the <code>xi:include</code> elements remaining as such. This is the default behavior.</p>
</li>
<li>
<p>Retrieve it after replacing the <code>xi:include</code> elements with their targets, recursively, that is, after expansion of all inclusions. An error is raised if any <code>xi:include</code> element cannot be resolved.</p>
</li>
</ul>
<p>To retrieve the document in expanded form, use PL/SQL constructor <code>XDBURIType</code>, passing a value of <code>&#39;1&#39;</code> or <code>&#39;3&#39;</code> as the second argument (flags). <a href="xdb_xlink.htm#GUID-A2B5A064-7522-42EB-9EDC-1B52FC883F07__CIHHFJDC">Example 23-2</a> illustrates this. These are the possible values for the second argument of constructor <code>XDBURIType</code>:</p>
<ul style="list-style-type: disc;">
<li>
<p><code>1</code> &ndash; Expand all XInclude inclusions before returning the result. If any such inclusion cannot be resolved according to the XInclude standard fallback semantics, then raise an error.</p>
</li>
<li>
<p><code>2</code> &ndash; Suppress all errors that might occur during document retrieval. This includes dangling <code>href</code> pointers.</p>
</li>
<li>
<p><code>3</code> &ndash; Same as <code>1</code> and <code>2</code> together.</p>
</li>
</ul>
<p><a href="xdb_xlink.htm#GUID-A2B5A064-7522-42EB-9EDC-1B52FC883F07__CIHHFJDC">Example 23-2</a> retrieves all documents that are under repository folder <code>public/bookdir</code>, expanding each inclusion:</p>
<p>(The result shown here corresponds to the resource <code>bookfile.xml</code> shown in <a href="xdb_xlink.htm#GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHJIACF">Example 23-8</a>, together with its included resources, <code>chap1.xml</code> and <code>chap2.xml</code>.)</p>
<div class="infoboxnotealso" id="GUID-A2B5A064-7522-42EB-9EDC-1B52FC883F07__GUID-07F16B0C-FC4B-4C98-AC31-C13FAFD3FA5C">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xdb_xlink.htm#GUID-DE1FFEAA-8790-4DEE-AD9A-085835850344" title="The components of a compound document are separate resources. They are versioned and locked independently, and their access is controlled independently.">Compound Document Versioning_ Locking_ and Access Control</a>&#34;</span> for information about access control during expansion</p>
</li>
<li>
<p><a class="olink ARPLS800" target="_blank" href="../ARPLS/t_dburi.htm#ARPLS800"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about <code>XDBURIType</code></p>
</li>
</ul>
</div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-A2B5A064-7522-42EB-9EDC-1B52FC883F07__CIHHFJDC">
<p class="titleinexample">Example 23-2 Expanding Document Inclusions Using XDBURIType</p>
<pre dir="ltr">SELECT XDBURIType(ANY_PATH, <span class="bold">&#39;1&#39;</span>).getXML() FROM RESOURCE_VIEW
  WHERE under_path(RES, &#39;/public/bookdir&#39;) = 1;

XDBURITYPE(ANY_PATH,&#39;1&#39;).GETXML()
---------------------------------
&lt;Book&gt;
  &lt;Title&gt;A book&lt;/Title&gt;
  &lt;Chapter id=&#34;1&#34;&gt;
    &lt;Title&gt;Introduction&lt;/Title&gt;
    &lt;Body&gt;
      &lt;Para&gt;blah blah&lt;/Para&gt;
      &lt;Para&gt;foo bar&lt;/Para&gt;
    &lt;/Body&gt;
  &lt;/Chapter&gt;
  &lt;Chapter id=&#34;2&#34;&gt;
    &lt;Title&gt;Conclusion&lt;/Title&gt;
    &lt;Body&gt;
      &lt;Para&gt;xyz xyz&lt;/Para&gt;
      &lt;Para&gt;abc abc&lt;/Para&gt;
    &lt;/Body&gt;
  &lt;/Chapter&gt;
&lt;/Book&gt;
 
&lt;Chapter id=&#34;1&#34;&gt;
  &lt;Title&gt;Introduction&lt;/Title&gt;
  &lt;Body&gt;
    &lt;Para&gt;blah blah&lt;/Para&gt;
    &lt;Para&gt;foo bar&lt;/Para&gt;
  &lt;/Body&gt;
&lt;/Chapter&gt;
 
&lt;Chapter id=&#34;2&#34;&gt;
  &lt;Title&gt;Conclusion&lt;/Title&gt;
  &lt;Body&gt;
    &lt;Para&gt;xyz xyz&lt;/Para&gt;
    &lt;Para&gt;abc abc&lt;/Para&gt;
  &lt;/Body&gt;
&lt;/Chapter&gt;
 
3 rows selected.
</pre></div>
<!-- class="example" --></div>
</div>
<a id="ADXDB5341"></a>
<div class="props_rev_3"><a id="GUID-5C1ED7E6-FB07-4F95-905F-413ABA8346F2"></a>
<h3 id="ADXDB-GUID-5C1ED7E6-FB07-4F95-905F-413ABA8346F2" class="sect3"><span class="enumeration_section">23.5.2</span> Validation of Compound Documents</h3>
<div>
<p>You validate a compound document the way you would any XML document. However, you can choose to validate it in either form: with <code>xi:include</code> elements as is or after replacing them with their targets.</p>
<p>You can also choose to use one XML schema to validate the unexpanded form, and another to validate the expanded form. For example, you might use one XML schema to validate without first expanding, in order to set up storage structures, and then use another XML schema to validate the expanded document after it is stored.</p>
</div>
</div>
<a id="ADXDB5342"></a>
<div class="props_rev_3"><a id="GUID-28FFAB0F-7034-4D28-AD9D-1E3B5AEB4C2C"></a>
<h3 id="ADXDB-GUID-28FFAB0F-7034-4D28-AD9D-1E3B5AEB4C2C" class="sect3"><span class="enumeration_section">23.5.3</span> Update of a Compound Document</h3>
<div>
<p>You can update a compound document just as you would update any resource. This replaces the resource with a new value.</p>
<p>It thus corresponds to a resource deletion followed by a resource insertion. This means, in particular, that any <code>xi:include</code> elements in the original resource are deleted. Any <code>xi:include</code> elements in the replacement (inserted) document are processed as usual, according to the configuration defined at the time of insertion.</p>
</div>
</div>
<a id="ADXDB5343"></a>
<div class="props_rev_3"><a id="GUID-DE1FFEAA-8790-4DEE-AD9A-085835850344"></a>
<h3 id="ADXDB-GUID-DE1FFEAA-8790-4DEE-AD9A-085835850344" class="sect3"><span class="enumeration_section">23.5.4</span> Compound Document Versioning, Locking, and Access Control</h3>
<div>
<p>The components of a compound document are separate resources. They are versioned and locked independently, and their access is controlled independently.</p>
<ul style="list-style-type: disc;">
<li>
<p>Document links to version-controlled resources (VCRs) always resolve to the latest version of the target resource, or the selected version within the current workspace. You can, however, explicitly refer to any specific version, by identifying the target resource by its OID-based path.</p>
</li>
<li>
<p>Locking a document that contains <code>xi:include</code> elements does not also lock the included documents. Locking an included document does not also lock documents that include it.</p>
</li>
<li>
<p>The access control list (ACL) on each referenced document is checked whenever you retrieve a compound document with expansion. This is done using the privileges of the current user (invoker&#39;s rights). If privileges are insufficient for any of the included documents, the expansion is canceled and an error is raised.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-DE1FFEAA-8790-4DEE-AD9A-085835850344__GUID-5C16E1C1-6D70-43D6-9A46-AAF4D0E91DB6">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xdb_xlink.htm#GUID-A2B5A064-7522-42EB-9EDC-1B52FC883F07" title="You can optionally expand xi:include elements with their targets when you retrieve a compound document from Oracle XML&nbsp;DB Repository.">Expanding Compound-Document Inclusions</a>&#34;</span></p>
</li>
<li>
<p><a href="xdb17ver.htm#GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA" title="Oracle XML&nbsp;DB Repository resources can be versioned. A record is kept of all changes to a resource that is under version control.">Resource Versions</a> for information about VCRs</p>
</li>
<li>
<p><a href="xdb21sec.htm#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a> for information about resource ACLs</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="ADXDB5344"></a>
<div class="props_rev_3"><a id="GUID-B9EAFB57-6F16-4BD0-B664-957359B4263E"></a>
<h2 id="ADXDB-GUID-B9EAFB57-6F16-4BD0-B664-957359B4263E" class="sect2"><span class="enumeration_section">23.6</span> Use View DOCUMENT_LINKS to Examine XLink and XInclude Links</h2>
<div>
<p>You can query the read-only public view <code>DOCUMENT_LINKS</code> to obtain system information about document links derived from both XLink and XInclude links. The information in this view includes the following columns, for each link:</p>
<ul style="list-style-type: disc;">
<li>
<p><code>SOURCE_ID</code> &ndash; The source resource OID. <code>RAW(16)</code>.</p>
</li>
<li>
<p><code>TARGET_ID</code> &ndash; The target resource OID. <code>RAW(16)</code>.</p>
</li>
<li>
<p><code>TARGET_PATH</code> &ndash; Always <code>NULL</code>. Reserved for future use. <code>VARCHAR2(4000)</code>.</p>
</li>
<li>
<p><code>LINK_TYPE</code> &ndash; The document link type: <code>Hard</code> or <code>Weak</code>. <code>VARCHAR2(8)</code>.</p>
</li>
<li>
<p><code>LINK_FORM</code> &ndash; Whether the original link was of form <code>XLink</code> or <code>XInclude</code>. <code>VARCHAR2(8)</code>.</p>
</li>
<li>
<p><code>SOURCE_TYPE</code> &ndash; Always <code>Resource Content</code>. <code>VARCHAR2(17)</code>.</p>
</li>
</ul>
<p>You can obtain information about a resource from this view only if one of the following conditions holds:</p>
<ul style="list-style-type: disc;">
<li>
<p>The resource is a link source, and you have the privilege <code>read-contents</code> or <code>read-properties</code> on it.</p>
</li>
<li>
<p>The resource is a link target, and you have the privilege <code>read-properties</code> on it.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-B9EAFB57-6F16-4BD0-B664-957359B4263E__GUID-B661AD46-FCC3-470D-9A94-87F3C0212973">
<p class="notep1">See Also:</p>
<p><a class="olink REFRN29078" target="_blank" href="../REFRN/GUID-D9413419-8793-47B1-BDF7-0FDE0D869AA0.htm#REFRN29078"><span class="italic">Oracle Database Reference</span></a> for more information on public view <code>DOCUMENT_LINKS</code></p>
</div>
</div>
<a id="ADXDB5346"></a><a id="ADXDB5345"></a>
<div class="props_rev_3"><a id="GUID-CB94F44C-3059-4776-A4DE-00F72249A9E0"></a>
<h3 id="ADXDB-GUID-CB94F44C-3059-4776-A4DE-00F72249A9E0" class="sect3"><span class="enumeration_section">23.6.1</span> Querying DOCUMENT_LINKS for XLink Information</h3>
<div>
<p>If the folder containing a given resource has been configured to map XLink links to document hard links then you can query public view <code>DOCUMENT_LINKS</code> to obtain system information about the document links.</p>
<div class="section">
<p><a href="xdb_xlink.htm#GUID-CB94F44C-3059-4776-A4DE-00F72249A9E0__CIHBJGJB">Example 23-3</a> shows how XLink links are treated when resources are created, and how to obtain system information about document links from view <code>DOCUMENT_LINKS</code>. It assumes that the folder containing the resource has been configured to map XLink links to document hard links.</p>
<div class="infoboxnotealso" id="GUID-CB94F44C-3059-4776-A4DE-00F72249A9E0__GUID-C89283B1-6BCE-4360-8696-DCB85F1213E8">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="xdb_xlink.htm#GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHGBEAB">Example 23-5</a>&#34;</span> for an example of configuring a folder to map XLink links to hard links</p>
</div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-CB94F44C-3059-4776-A4DE-00F72249A9E0__CIHBJGJB">
<p class="titleinexample">Example 23-3 Querying Document Links Mapped From XLink Links</p>
<pre dir="ltr">DECLARE
  b BOOLEAN;
BEGIN
  b := DBMS_XDB_REPOS.createResource(
         &#39;/public/hardlinkdir/po101.xml&#39;, 
         &#39;&lt;PurchaseOrder id=&#34;101&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34;&gt;
            &lt;Company xlink:type=&#34;simple&#34; 
                     xlink:href=&#34;/public/hardlinkdir/oracle.xml&#34;&gt;Oracle Corporation&lt;/Company&gt;
            &lt;Approver xlink:type=&#34;simple&#34;
                      xlink:href=&#34;/public/hardlinkdir/quine.xml&#34;&gt;Willard Quine&lt;/Approver&gt;
          &lt;/PurchaseOrder&gt;&#39;);
 
  b := DBMS_XDB_REPOS.createResource(
         &#39;/public/hardlinkdir/po102.xml&#39;, 
         &#39;&lt;PurchaseOrder id=&#34;102&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34;&gt;
            &lt;Company xlink:type=&#34;simple&#34; 
                     xlink:href=&#34;/public/hardlinkdir/oracle.xml&#34;&gt;Oracle Corporation&lt;/Company&gt;
            &lt;Approver xlink:type=&#34;simple&#34; 
                      xlink:href=&#34;/public/hardlinkdir/curry.xml&#34;&gt;Haskell Curry&lt;/Approver&gt;
            &lt;ReferencePO xlink:type=&#34;simple&#34;
                         xlink:href=&#34;/public/hardlinkdir/po101.xml&#34;/&gt;
          &lt;/PurchaseOrder&gt;&#39;);
END;
/
</pre>
<pre dir="ltr">SELECT r1.ANY_PATH source, r2.ANY_PATH target, dl.LINK_TYPE, dl.LINK_FORM
  FROM DOCUMENT_LINKS dl, RESOURCE_VIEW r1, RESOURCE_VIEW r2 
  WHERE dl.SOURCE_ID = r1.RESID and dl.TARGET_ID = r2.RESID;
</pre>
<pre dir="ltr">SOURCE                        TARGET                         LINK_TYPE LINK_FORM
----------------------------- ------------------------------ --------- ---------
/public/hardlinkdir/po101.xml /public/hardlinkdir/oracle.xml Hard      XLink
/public/hardlinkdir/po101.xml /public/hardlinkdir/quine.xml  Hard      XLink
/public/hardlinkdir/po102.xml /public/hardlinkdir/oracle.xml Hard      XLink
/public/hardlinkdir/po102.xml /public/hardlinkdir/curry.xml  Hard      XLink
/public/hardlinkdir/po102.xml /public/hardlinkdir/po101.xml  Hard      XLink
</pre></div>
<!-- class="example" --></div>
</div>
<a id="ADXDB5348"></a><a id="ADXDB5347"></a>
<div class="props_rev_3"><a id="GUID-93B0AA6C-DB20-4C63-BABE-3D23949D2836"></a>
<h3 id="ADXDB-GUID-93B0AA6C-DB20-4C63-BABE-3D23949D2836" class="sect3"><span class="enumeration_section">23.6.2</span> Querying DOCUMENT_LINKS for XInclude Information</h3>
<div>
<p>You can query view <code>DOCUMENT_LINKS</code> to show the document links that are mapped from XInclude links.</p>
<div class="section">
<p><a href="xdb_xlink.htm#GUID-93B0AA6C-DB20-4C63-BABE-3D23949D2836__CIHDHGAE">Example 23-4</a> queries view <code>DOCUMENT_LINKS</code> to show all document links.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-93B0AA6C-DB20-4C63-BABE-3D23949D2836__CIHDHGAE">
<p class="titleinexample">Example 23-4 Querying Document Links Mapped From XInclude Links</p>
<pre dir="ltr">DECLARE
  ret BOOLEAN;
BEGIN
  ret := DBMS_XDB_REPOS.createResource(
           &#39;/public/hardlinkdir/book.xml&#39;,
           &#39;&lt;Book xmlns:xi=&#34;http://www.w3.org/2001/XInclude&#34;&gt;
              &lt;xi:include href=&#34;/public/hardlinkdir/toc.xml&#34;/&gt;
              &lt;xi:include href=&#34;/public/hardlinkdir/part1.xml&#34;/&gt;
              &lt;xi:include href=&#34;/public/hardlinkdir/part2.xml&#34;/&gt;
              &lt;xi:include href=&#34;/public/hardlinkdir/index.xml&#34;/&gt;
            &lt;/Book&gt;&#39;);
END;

SELECT r1.ANY_PATH source, r2.ANY_PATH target, dl.LINK_TYPE, dl.LINK_FORM
  FROM DOCUMENT_LINKS dl, RESOURCE_VIEW r1, RESOURCE_VIEW r2
  WHERE dl.SOURCE_ID = r1.RESID and dl.TARGET_ID = r2.RESID;

SOURCE                       TARGET                        LINK_TYPE LINK_FORM
------                       ------                        --------- ---------
/public/hardlinkdir/book.xml /public/hardlinkdir/toc.xml   Hard      XInclude
/public/hardlinkdir/book.xml /public/hardlinkdir/part1.xml Hard      XInclude
/public/hardlinkdir/book.xml /public/hardlinkdir/part2.xml Hard      XInclude
/public/hardlinkdir/book.xml /public/hardlinkdir/index.xml Hard      XInclude
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="ADXDB5349"></a>
<div class="props_rev_3"><a id="GUID-CC5F92B5-4718-4E29-B407-544C960AE5BE"></a>
<h2 id="ADXDB-GUID-CC5F92B5-4718-4E29-B407-544C960AE5BE" class="sect2"><span class="enumeration_section">23.7</span> Configuration of Repository Resources for XLink and XInclude</h2>
<div>
<p>The resource configuration file that you use as a resource to configure XLink and XInclude processing for other resources is described.</p>
<p>You configure XLink and XInclude treatment for Oracle XML&nbsp;DB Repository resources as you would configure any other treatment of repository resources: using a resource configuration file. See <span class="q">&#34;<a href="xdb_repos_config.htm#GUID-AB3B6205-AE7B-4A12-A6B9-C3CC0C1108D3" title="Configuring an Oracle XML&nbsp;DB Repository resource involves creating a configuration file, adding that file to the repository as a configuration resource, and mapping the configuration resource to the resources it configures or to the entire repository.">Configuring a Resource</a>&#34;</span> for an example.</p>
<p>A resource configuration file is an XML file that conforms to the XML schema <code>XDBResConfig.xsd</code>, which is accessible in Oracle XML&nbsp;DB Repository at path <code>/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBResConfig.xsd</code>.</p>
<p>You use elements <code>XLinkConfig</code> and <code>XIncludeConfig</code>, children of element <code>ResConfig</code>, to configure XLink and XInclude treatment, respectively. If one of these elements is absent, then there is no treatment of the corresponding type of links.</p>
<p>Both <code>XLinkConfig</code> and <code>XIncludeConfig</code> can have attribute <code>UnresolvedLink</code> and child elements <code>LinkType</code> and <code>PathFormat</code>. Element <code>XIncludeConfig</code> can also have child element <code>ConflictRule</code>. If the <code>LinkType</code> element content is <code>None</code>, however, then there must be no <code>PathFormat</code> or <code>ConflictRule</code> element.</p>
<p>You cannot define any preconditions for <code>XLinkConfig</code> or <code>XIncludeConfig</code>. During repository resource creation, the <code>ResConfig</code> element of the parent folder determines the treatment of XLink and XInclude links for the new resource. If the parent folder has no <code>ResConfig</code> element, then the repository-wide configuration applies.</p>
<p>Any change to the resource configuration file applies only to documents that are created or updated after the configuration-file change. To process links in existing documents, use PL/SQL procedure <code>DBMS_XDB_REPOS.processLinks</code>, after specifying the appropriate resource configuration parameters.</p>
<div class="infoboxnotealso" id="GUID-CC5F92B5-4718-4E29-B407-544C960AE5BE__GUID-460DF951-E431-4004-B3BA-5A030DEDE41A">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xdb_xlink.htm#GUID-67A0D8D0-7A95-443E-B108-D403AB882F10" title="You can use PL/SQL procedure DBMS_XDB_REPOS.processLinks to manually process all XLink and XInclude links in a single document or in all documents of a folder.">Manage XLink and XInclude Links Using DBMS_XDB_REPOS.processLinks</a>&#34;</span></p>
</li>
<li>
<p><a href="xdb_repos_config.htm#GUID-E44B59D4-7A7E-4303-ACE3-B801797B06AF" title="Overall configuration of Oracle XML&nbsp;DB Repository applies to all repository resources. It does not include configuring parameters for handling events or managing XLink and XInclude processing. You use resource configuration files to configure resources.">Configuration of Oracle XML&nbsp;DB Repository</a></p>
</li>
</ul>
</div>
</div>
<a id="ADXDB5350"></a>
<div class="props_rev_3"><a id="GUID-8861A6DC-E0AF-42FE-B3BD-D7523535A061"></a>
<h3 id="ADXDB-GUID-8861A6DC-E0AF-42FE-B3BD-D7523535A061" class="sect3"><span class="enumeration_section">23.7.1</span> Configure the Treatment of Unresolved Links: Attribute UnresolvedLink</h3>
<div>
<p>A <code>LinkConfig</code> element can have an <code>UnresolvedLink</code> attribute with a value of <code>Error</code> (default value) or <code>Skip</code>. This determines what happens if an XLink or XInclude link cannot be resolved at the time of document insertion into the repository (resource creation).</p>
<p><code>Error</code> means raise an error and roll back the current operation. <code>Skip</code> means skip any treatment of the XLink or XInclude link. Skipping treatment creates the resource with no corresponding document links, and sets the resource&#39;s <code>HasUnresolvedLinks</code> attribute to <code>true</code>, to indicate that the resource has unresolved links.</p>
<p>Using <code>Skip</code> as the value of attribute <code>UnresolvedLink</code> can be especially useful when you create a resource that contains a cycle of weak links, which would otherwise lead to unresolved-link errors during resource creation. After the resource and all of its linked resources have been created, you can use PL/SQL procedure <code>DBMS_XDB_REPOS.processLinks</code> to process the skipped links. If all XLink and XInclude links have been resolved by this procedure, then attribute <code>HasUnresolvedLinks</code> is set to <code>false</code>.</p>
<p>Resource attribute <code>HasUnresolvedLinks</code> is also set to <code>true</code> for a resource that has a weak link to a resource that has been deleted. Deleting a resource thus effectively also deletes any weak links pointing to that resource. In particular, whenever the last hard link to a resource is deleted, the resource is itself deleted, and all resources that point to the deleted resource with a weak link have attribute <code>HasUnresolvedLinks</code> set to <code>true</code>.</p>
<div class="infoboxnotealso" id="GUID-8861A6DC-E0AF-42FE-B3BD-D7523535A061__GUID-0C8AABB3-8B2E-47DB-8E8A-AFBEDB522149">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xdb16fol.htm#GUID-72981E53-0B60-4096-80E0-06A139086DED" title="Links that target repository resources can be hard or weak. Hard and weak links have different dependencies with respect to the resources that they target. Hard links cannot target ancestor folders; weak links can. You can query the repository path view, PATH_VIEW, to determine the type of a repository link.">Hard Links and Weak Links</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="xdb_xlink.htm#GUID-67A0D8D0-7A95-443E-B108-D403AB882F10" title="You can use PL/SQL procedure DBMS_XDB_REPOS.processLinks to manually process all XLink and XInclude links in a single document or in all documents of a folder.">Manage XLink and XInclude Links Using DBMS_XDB_REPOS.processLinks</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADXDB5351"></a>
<div class="props_rev_3"><a id="GUID-A92064DA-E4E5-4EDF-AD2E-1A96FBA87297"></a>
<h3 id="ADXDB-GUID-A92064DA-E4E5-4EDF-AD2E-1A96FBA87297" class="sect3"><span class="enumeration_section">23.7.2</span> Configure the Type of Document Links to Create: Element LinkType</h3>
<div>
<p>You use the <code>LinkType</code> element of a resource configuration file to specify the type of document link to be created whenever an XLink or XInclude link is encountered when a document is stored in Oracle XML&nbsp;DB Repository. The <code>LinkType</code> element has these possible values (element content):</p>
<ul style="list-style-type: disc;">
<li>
<p><code>None</code> (default) &ndash; Ignore XLink or XInclude links: create no corresponding document links.</p>
</li>
<li>
<p><code>Hard</code> &ndash; Map XLink or XInclude links to hard document links in repository documents.</p>
</li>
<li>
<p><code>Weak</code> &ndash; Map XLink or XInclude links to weak document links in repository documents.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-A92064DA-E4E5-4EDF-AD2E-1A96FBA87297__GUID-08110A96-1E47-428F-A709-7056B230C19F">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="xdb_xlink.htm#GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHGBEAB">Example 23-5</a></p>
</li>
<li>
<p><a href="xdb_xlink.htm#GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHIAGIB">Example 23-6</a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADXDB5352"></a>
<div class="props_rev_3"><a id="GUID-DE100A1F-B473-42D7-B328-46176E17E40D"></a>
<h3 id="ADXDB-GUID-DE100A1F-B473-42D7-B328-46176E17E40D" class="sect3"><span class="enumeration_section">23.7.3</span> Configure the Path Format for Retrieval: Element PathFormat</h3>
<div>
<p>You use the <code>PathFormat</code> element of a resource configuration file to specify the path format to be used when retrieving documents with <code>xlink:href</code> or <code>xi:include:href</code> attributes.</p>
<p>The <code>PathFormat</code> element has these possible values (element content) for hard and weak document links:</p>
<ul style="list-style-type: disc;">
<li>
<p><code>OID</code> (default) &ndash; Map XLink or XInclude <code>href</code> paths to OID-based paths in repository documents&thinsp;&mdash;&thinsp;that is, use OIDs directly.</p>
</li>
<li>
<p><code>Named</code> &ndash; Map XLink or XInclude <code>href</code> paths to named paths (URLs) in repository documents. The path is computed from the internal OID when the document is retrieved, so retrieval can be slower than in the case of using OID paths directly.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-DE100A1F-B473-42D7-B328-46176E17E40D__GUID-EAF546CA-6FEE-4616-80A0-D22A8F7CFF82">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="xdb_xlink.htm#GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHGBEAB">Example 23-5</a></p>
</li>
<li>
<p><a href="xdb_xlink.htm#GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHIAGIB">Example 23-6</a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADXDB5354"></a>
<div class="props_rev_3"><a id="GUID-B7FCFD1A-4E88-4917-A08A-7BFD2D93DDB7"></a>
<h3 id="ADXDB-GUID-B7FCFD1A-4E88-4917-A08A-7BFD2D93DDB7" class="sect3"><span class="enumeration_section">23.7.4</span> Configure Conflict-Resolution for XInclude: Element ConflictRule</h3>
<div>
<p>You use the <code>ConflictRule</code> element of a resource configuration file to specify the conflict-resolution rules to use if the path computed for a component document is already present in Oracle XML&nbsp;DB Repository. The <code>ConflictRule</code> element has these possible values (element content):</p>
<ul style="list-style-type: disc;">
<li>
<p><code>Error</code> (default) &ndash; Raise an error.</p>
</li>
<li>
<p><code>Overwrite</code> &ndash; Update the document targeted by the existing repository path, replacing it with the document to be included. If the existing document is a version-controlled resource, then it must already be checked out, unless it is autoversioned. Otherwise, an error is raised.</p>
</li>
<li>
<p><code>Syspath</code> &ndash; Change the path to the included document to a new, system-defined path.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-B7FCFD1A-4E88-4917-A08A-7BFD2D93DDB7__GUID-2A093EC7-9ADA-4EE1-B648-2E0CDA536823">
<p class="notep1">See Also:</p>
<p><a href="xdb17ver.htm#GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA" title="Oracle XML&nbsp;DB Repository resources can be versioned. A record is kept of all changes to a resource that is under version control.">Resource Versions</a> for information about version-controlled resources</p>
</div>
</div>
</div>
<a id="ADXDB5355"></a>
<div class="props_rev_3"><a id="GUID-89A69D24-7561-455A-ABBE-EAE814C94F65"></a>
<h3 id="ADXDB-GUID-89A69D24-7561-455A-ABBE-EAE814C94F65" class="sect3"><span class="enumeration_section">23.7.5</span> Configure the Decomposition of Documents Using XInclude: Element SectionConfig</h3>
<div>
<p>You use element <code>SectionConfig</code> of a resource configuration file to specify how non-schema-based XML documents are to be decomposed when they are added to Oracle XML&nbsp;DB Repository to create a set of resources that contain XInclude inclusion references.</p>
<p>You use simple XPath expressions in the resource configuration file to identify which parts of a document to map to separate resources, and which resources to map them to.</p>
<p>Element <code>SectionConfig</code> contains one or more <code>Section</code> elements, each of which contains the following child elements:</p>
<ul style="list-style-type: disc;">
<li>
<p><code>sectionPath</code> &ndash; Simple XPath 1.0 expression that identifies a section root. This must use only child and descendant axes, and it must not use wildcards.</p>
</li>
<li>
<p><code>documentPath</code> (optional) &ndash; Simple XPath 1.0 expression that is evaluated to identify the resources to be created from decomposing the document according to <code>sectionPath</code>. The XPath expression must use only child, descendant, and attribute axes.</p>
</li>
<li>
<p><code>namespace</code> (optional) &ndash; Namespace in effect for <code>sectionPath</code> and <code>documentPath</code>.</p>
</li>
</ul>
<p>Element <code>Section</code> also has a <code>type</code> attribute that specifies the type of section to be created. Value <code>Document</code> means create a document. The default value, <code>None</code>, means do not create anything. Using <code>None</code> is equivalent to removing the <code>SectionConfig</code> element. You can thus set the <code>type</code> attribute to <code>None</code> to disable a <code>SectionConfig</code> element temporarily, without removing it, and then set it back to <code>Document</code> to enable it again.</p>
<p>If an element in the document being added to the repository matches more than one <code>sectionPath</code> value, only the first such expression (in document order) is used.</p>
<p>If no <code>documentPath</code> element is present, then the resource created has a system-defined name, and is put into the folder specified for the original document.</p>
<div class="infoboxnotealso" id="GUID-89A69D24-7561-455A-ABBE-EAE814C94F65__GUID-DE11D06E-6DF4-4F6F-B2A9-BB39B2B59105">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="xdb_xlink.htm#GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHFEBIG">Example 23-7</a></p>
</li>
<li>
<p><a href="xdb_xlink.htm#GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHJIACF">Example 23-8</a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADXDB5357"></a><a id="ADXDB5358"></a><a id="ADXDB5359"></a><a id="ADXDB5360"></a><a id="ADXDB5356"></a>
<div class="props_rev_3"><a id="GUID-BF27F901-7D62-4D87-AE29-90241E25A062"></a>
<h3 id="ADXDB-GUID-BF27F901-7D62-4D87-AE29-90241E25A062" class="sect3"><span class="enumeration_section">23.7.6</span> XLink and XInclude Configuration Examples</h3>
<div>
<p>Examples show how XLink and XInclude are to be related to Oracle XML&nbsp;DB Repository resources and links.</p>
<div class="section">
<p><a href="xdb_xlink.htm#GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHGBEAB">Example 23-5</a> shows a configuration-file section that configures XInclude treatment, mapping XInclude attributes to Oracle XML&nbsp;DB Repository hard document links. Repository paths in retrieved resources are configured to be based on resource OIDs.</p>
<p><a href="xdb_xlink.htm#GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHIAGIB">Example 23-6</a> shows an <code>XLinkConfig</code> section that maps XLink links to weak document links in the repository. In this case, retrieval of a document uses named paths (URLs).</p>
<p><a href="xdb_xlink.htm#GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHFEBIG">Example 23-7</a> shows a <code>SectionConfig</code> section that specifies that each <code>Chapter</code> element in an input document is to become a separate repository file, when the input document is added to Oracle XML&nbsp;DB Repository. The repository path for the resulting file is specified using configuration element <code>documentPath</code>, and this path is relative to the location of the resource configuration file of <a href="xdb_xlink.htm#GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHIAGIB">Example 23-6</a>.</p>
<p>The XPath expression here uses XPath function <code>concat</code> to concatenate the following strings to produce the resulting repository path to use:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><code>chap</code> &ndash; (prefix) <code>chap</code>.</p>
</li>
<li>
<p>The value of attribute <code>id</code> of element <code>Chapter</code> in the input document.</p>
</li>
<li>
<p><code>.xml</code> as a file extension.</p>
</li>
</ul>
<p>For example, a repository path of <code>chap27.xml</code> would result from an input document with a <code>Chapter</code> element that has an <code>id</code> attribute with value <code>27</code>:</p>
<pre dir="ltr">&lt;Chapter id=&#34;27&#34;&gt; ... &lt;/Chapter&gt;
</pre>
<p>If the configuration document of <a href="xdb_xlink.htm#GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHIAGIB">Example 23-6</a> and the book document that contains the <code>XInclude</code> elements are in repository folder <code>/public/bookdir</code>, then the individual chapter files generated from <code>XInclude</code> decomposition are in files <code>/public/bookdir/chap</code><span class="italic"><code>N</code></span><code>.xml</code>, where the values of <span class="italic"><code>N</code></span> are the values of the <code>id</code> attributes of <code>Chapter</code> elements.</p>
<p>The book document that is added to the repository is derived from the input book document. The embedded <code>Chapter</code> elements in the input book document are replaced by <code>xi:include</code> elements that reference the generated chapter documents&thinsp;&mdash;&thinsp;<a href="xdb_xlink.htm#GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHJIACF">Example 23-8</a> illustrates this.</p>
<div class="infoboxnotealso" id="GUID-BF27F901-7D62-4D87-AE29-90241E25A062__GUID-BB3CDFCB-4578-4C73-B3A0-2590789829DA">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="xdb_repos_config.htm#GUID-E44B59D4-7A7E-4303-ACE3-B801797B06AF" title="Overall configuration of Oracle XML&nbsp;DB Repository applies to all repository resources. It does not include configuring parameters for handling events or managing XLink and XInclude processing. You use resource configuration files to configure resources.">Configuration of Oracle XML&nbsp;DB Repository</a></p>
</li>
<li>
<p><a href="apphxdb.htm#GUID-B33E058B-0660-4879-A6A2-64B45423BA1C" title="A full listing is presented of the Oracle XML&nbsp;DB-supplied XML schema used to configure repository resources. It is accessible in Oracle XML&nbsp;DB Repository at path /sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBResConfig.xsd.">XDBResConfig.xsd: XML Schema for Resource Configuration</a></p>
</li>
<li>
<p><span class="q">&#34;<a href="xdb_xlink.htm#GUID-89A69D24-7561-455A-ABBE-EAE814C94F65" title="You use element SectionConfig of a resource configuration file to specify how non-schema-based XML documents are to be decomposed when they are added to Oracle XML&nbsp;DB Repository to create a set of resources that contain XInclude inclusion references.">Configure the Decomposition of Documents Using XInclude: Element SectionConfig</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHGBEAB">
<p class="titleinexample">Example 23-5 Mapping XInclude Links to Hard Document Links, with OID Retrieval</p>
<pre dir="ltr">&lt;ResConfig&gt;
  . . .
  &lt;XIncludeConfig UnresolvedLink=&#34;Skip&#34;&gt;
    &lt;LinkType&gt;<span class="bold">Hard</span>&lt;/LinkType&gt;
    &lt;PathFormat&gt;<span class="bold">OID</span>&lt;/PathFormat&gt;
  &lt;/XIncludeConfig&gt;
  . . .
&lt;/ResConfig&gt;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHIAGIB">
<p class="titleinexample">Example 23-6 Mapping XLInk Links to Weak Links, with Named-Path Retrieval</p>
<pre dir="ltr">&lt;ResConfig&gt;
  . . .
  &lt;XLinkConfig UnresolvedLink=&#34;Skip&#34;&gt;
    &lt;LinkType&gt;<span class="bold">Weak</span>&lt;/LinkType&gt;
    &lt;PathFormat&gt;<span class="bold">Named</span>&lt;/PathFormat&gt;
  &lt;/XLinkConfig&gt;
  . . .
&lt;/ResConfig&gt;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHFEBIG">
<p class="titleinexample">Example 23-7 Configuring XInclude Document Decomposition</p>
<pre dir="ltr">&lt;ResConfig&gt;
  . . .
  &lt;SectionConfig&gt;
    &lt;Section type = &#34;Document&#34;&gt;
      &lt;sectionPath&gt;//Chapter&lt;/sectionPath&gt;
      &lt;documentPath&gt;concat(&#34;chap&#34;, @id, &#34;.xml&#34;)&lt;/documentPath&gt;
    &lt;/Section&gt;
  &lt;/SectionConfig&gt;
  . . .
&lt;/ResConfig&gt;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-BF27F901-7D62-4D87-AE29-90241E25A062__CIHJIACF">
<p class="titleinexample">Example 23-8 Repository Document, Showing Generated xi:include Elements</p>
<pre dir="ltr">SELECT XDBURIType(&#39;/public/bookdir/bookfile.xml&#39;).getclob() FROM DUAL;
 
XDBURITYPE(&#39;/PUBLIC/BOOKDIR/BOOKFILE.XML&#39;).GETCLOB()
--------------------------------------------------------------------------------
&lt;Book&gt;
  &lt;Title&gt;A book&lt;/Title&gt;
  &lt;xi:include xmlns:xi=&#34;http://www.w3.org/2001/XInclude&#34; href=&#34;/public/bookdir/chap1.xml&#34;/&gt;
  &lt;xi:include xmlns:xi=&#34;http://www.w3.org/2001/XInclude&#34; href=&#34;/public/bookdir/chap2.xml&#34;/&gt;
&lt;/Book&gt;
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="ADXDB5361"></a>
<div class="props_rev_3"><a id="GUID-67A0D8D0-7A95-443E-B108-D403AB882F10"></a>
<h2 id="ADXDB-GUID-67A0D8D0-7A95-443E-B108-D403AB882F10" class="sect2"><span class="enumeration_section">23.8</span> Manage XLink and XInclude Links Using DBMS_XDB_REPOS.processLinks</h2>
<div>
<p>You can use PL/SQL procedure <code>DBMS_XDB_REPOS.processLinks</code> to manually process all XLink and XInclude links in a single document or in all documents of a folder.</p>
<p>Pass <code>RECURSIVE</code> as the mode argument to this procedure, if you want to process all hard-linked subfolders recursively. All XLink and XInclude links are processed according to the corresponding configuration parameters. If any of the links within a resource cannot be resolved, the resource&#39;s <code>HasUnresolvedLinks</code> attribute is set to <code>true</code>, to indicate that the resource has unresolved links. The default value of attribute <code>HasUnresolvedLinks</code> is <code>false</code>.</p>
<div class="infoboxnotealso" id="GUID-67A0D8D0-7A95-443E-B108-D403AB882F10__GUID-91465970-91AB-4028-A79B-C3E29F1197EA">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="xdb_xlink.htm#GUID-8861A6DC-E0AF-42FE-B3BD-D7523535A061" title="A LinkConfig element can have an UnresolvedLink attribute with a value of Error (default value) or Skip. This determines what happens if an XLink or XInclude link cannot be resolved at the time of document insertion into the repository (resource creation).">Configure the Treatment of Unresolved Links: Attribute UnresolvedLink</a>&#34;</span></p>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3410">
<tr>
<td class="cellalignment3417">
<table class="cellalignment3415">
<tr>
<td class="cellalignment3414"><a href="xdb_repos_config.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3414"><a href="xdb18res.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3419">
<table class="cellalignment3413">
<tr>
<td class="cellalignment3414"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3414"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3414"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3414"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3414"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3414"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>