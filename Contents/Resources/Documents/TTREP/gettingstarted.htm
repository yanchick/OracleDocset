<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-114021"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Getting%20Started"></a><title>Getting Started</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 726"/>
<meta name="dcterms.created" content="2014-09-29T11:11:55Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="TimesTen In-Memory Database Replication Guide"/>
<meta name="dcterms.identifier" content="E21635-11"/>
<meta name="dcterms.isVersionOf" content="TTREP"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2012, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="overview.htm" title="Previous" type="text/html"/>
<link rel="Next" href="definepair.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E21635-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">6/21</span> <!-- End Header -->
<div id="TTREP153" class="chapter"><a id="CHDCBIHE"></a>
<h1 class="chapter"><span class="secnum">2</span> Getting Started</h1>
<p>The following sections describe how to configure and start up sample replication schemes:</p>
<ul>
<li>
<p><a href="#CHDFACGC">Configuring an active standby pair with one subscriber</a></p>
</li>
<li>
<p><a href="#CHDJGIFJ">Configuring a replication scheme with one master and one subscriber</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must have the <code>ADMIN</code> privilege to complete the procedures in this chapter.</div>
<a id="CHDFACGC"></a>
<div id="TTREP154" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Configuring an active standby pair with one subscriber</h2>
<p>This section describes how to create an active standby pair with one subscriber. The active database is <code>master1</code>. The standby database is <code>master2</code>. The subscriber database is <code>subscriber1</code>. To keep the example simple, all databases reside on the same computer, <code>server1</code>.</p>
<p><a href="#CHDCCHJB">Figure 2-1</a> shows this configuration.</p>
<div id="TTREP155" class="figure">
<p class="titleinfigure"><a id="CHDCCHJB"></a>Figure 2-1 Active standby pair with one subscriber</p>
<img width="252" height="431" src="img/activestandby_sub.gif" alt="Description of Figure 2-1 follows"/><br/>
<a id="sthref78" href="img_text/activestandby_sub.htm">Description of &#34;Figure 2-1 Active standby pair with one subscriber&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#CHDHFBED">Step 1: Create the DSNs for the master and the subscriber databases</a></p>
</li>
<li>
<p><a href="#CHDBBIFI">Step 2: Create a table in one of the master databases</a></p>
</li>
<li>
<p><a href="#CHDFDCBH">Step 3: Define the active standby pair</a></p>
</li>
<li>
<p><a href="#CHDIFJDI">Step 4: Start the replication agent on a master database</a></p>
</li>
<li>
<p><a href="#CHDIDIAE">Step 5: Set the state of a master database to &#39;ACTIVE&#39;</a></p>
</li>
<li>
<p><a href="#CHDJHDJA">Step 6. Create a user on the active database</a></p>
</li>
<li>
<p><a href="#CHDCIEIC">Step 7: Duplicate the active database to the standby database</a></p>
</li>
<li>
<p><a href="#CHDDECJE">Step 8: Start the replication agent on the standby database</a></p>
</li>
<li>
<p><a href="#CHDCFJAA">Step 9. Duplicate the standby database to the subscriber</a></p>
</li>
<li>
<p><a href="#CHDDJGBB">Step 10: Start the replication agent on the subscriber</a></p>
</li>
<li>
<p><a href="#CHDCEEHI">Step 11: Insert data into the table on the active database</a></p>
</li>
<li>
<p><a href="#CHDJBIBI">Step 12: Drop the active standby pair and the table</a></p>
</li>
</ul>
<a id="CHDHFBED"></a>
<div id="TTREP156" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 1: Create the DSNs for the master and the subscriber databases</h3>
<p>Create DSNs named <code>master1</code>, <code>master2</code> and <code>subscriber1</code> as described in <a class="olink TTOPR120" href="../TTOPR/using.htm#TTOPR120">&#34;Managing TimesTen Databases&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
<p>On UNIX systems, use a text editor to create the following <code>odbc.ini</code> file:</p>
<pre>[master1]
DRIVER=<span class="italic">install_dir</span>/lib/libtten.so
DataStore=/tmp/master1
DatabaseCharacterSet=AL32UTF8
ConnectionCharacterSet=AL32UTF8

[master2]
DRIVER=<span class="italic">install_dir</span>/lib/libtten.so
DataStore=/tmp/master2
DatabaseCharacterSet=AL32UTF8
ConnectionCharacterSet=AL32UTF8

[subscriber1]
DRIVER=<span class="italic">install_dir</span>/lib/libtten.so
DataStore=/tmp/subscriber1
DatabaseCharacterSet=AL32UTF8
ConnectionCharacterSet=AL32UTF8
</pre>
<p>On Windows, use the ODBC Administrator to set the same connection attributes. Use defaults for all other settings.</p>
</div>
<!-- class="sect2" -->
<a id="CHDBBIFI"></a>
<div id="TTREP157" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 2: Create a table in one of the master databases</h3>
<p>Use the <code>ttIsql</code> utility to connect to the <code>master1</code> database:</p>
<pre>% ttIsql master1
 
Copyright (c) 1996-2011, Oracle.  All rights reserved.
Type ? or &#34;help&#34; for help, type &#34;exit&#34; to quit ttIsql.
 
connect &#34;DSN=master1&#34;;
Connection successful: DSN=master1;UID=timesten;DataStore=/tmp/master1;
DatabaseCharacterSet=AL32UTF8;ConnectionCharacterSet=AL32UTF8;TypeMode=0;
(Default setting AutoCommit=1)
Command&gt;
</pre>
<p>Create the <code>employees</code> table;</p>
<pre>Command&gt; CREATE TABLE employees
 &gt;   ( employee_id   NUMBER(6) PRIMARY KEY,
 &gt;    first_name     VARCHAR2(20),
 &gt;    last_name      VARCHAR2(25) NOT NULL,
 &gt;    email          VARCHAR2(25) NOT NULL UNIQUE,
 &gt;    phone_number   VARCHAR2(20),
 &gt;    hire_date      DATE NOT NULL,
 &gt;    job_id         VARCHAR2(10) NOT NULL,
 &gt;    salary         NUMBER(8,2),
 &gt;    commission_pct NUMBER(2,2),
 &gt;    manager_id     NUMBER(6),
 &gt;    department_id  NUMBER(4)
 &gt; ) ;
</pre></div>
<!-- class="sect2" -->
<a id="CHDFDCBH"></a>
<div id="TTREP158" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 3: Define the active standby pair</h3>
<p>Define the active standby pair on <code>master1</code>:</p>
<pre>Command&gt; CREATE ACTIVE STANDBY PAIR master1, master2
       &gt; SUBSCRIBER subscriber1;
</pre>
<p>For more information about defining an active standby pair, see <a href="definepair.htm#CHDJBJAI">Chapter 3, &#34;Defining an Active Standby Pair Replication Scheme&#34;</a>.</p>
</div>
<!-- class="sect2" -->
<a id="CHDIFJDI"></a>
<div id="TTREP159" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 4: Start the replication agent on a master database</h3>
<p>Start the replication agent on <code>master1</code>:</p>
<pre>Command&gt; CALL ttRepStart;
</pre></div>
<!-- class="sect2" -->
<a id="CHDIDIAE"></a>
<div id="TTREP160" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 5: Set the state of a master database to &#39;ACTIVE&#39;</h3>
<p>The state of a new database in an active standby pair is <code>&#39;IDLE&#39;</code> until the active database has been set.</p>
<p>Use the <code>ttRepStateSet</code> built-in procedure to designate <code>master1</code> as the active database:</p>
<pre>Command&gt; CALL ttRepStateSet(&#39;ACTIVE&#39;);
</pre>
<p>Verify the state of <code>master1</code>:</p>
<pre>Command&gt; CALL ttRepStateGet;
&lt; ACTIVE, NO GRID &gt;
1 row found.
</pre></div>
<!-- class="sect2" -->
<a id="CHDJHDJA"></a>
<div id="TTREP161" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 6. Create a user on the active database</h3>
<p>Create a user <code>ttuser</code> with a password of <code>ttuser</code> and grant <code>ttuser</code> the <code>ADMIN</code> privilege. Creating a user with the <code>ADMIN</code> privilege is required by Access Control for the next step.</p>
<pre>Command&gt; CREATE USER ttuser IDENTIFIED BY ttuser;
User created.
Command&gt; GRANT ADMIN TO ttuser;
</pre></div>
<!-- class="sect2" -->
<a id="CHDCIEIC"></a>
<div id="TTREP162" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 7: Duplicate the active database to the standby database</h3>
<p>Exit <code>ttIsql</code> and use the <code>ttRepAdmin</code> utility as the <code>ttuser</code> (the user created with the <code>ADMIN</code> privilege) with the <code>-duplicate</code> option to duplicate the active database to the standby database. If you are using two different hosts, enter the <code>ttRepAdmin</code> command from the target host.</p>
<pre>% ttRepAdmin -duplicate -from master1 -host server1 -uid ttuser -pwd ttuser 
master2
</pre></div>
<!-- class="sect2" -->
<a id="CHDDECJE"></a>
<div id="TTREP163" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 8: Start the replication agent on the standby database</h3>
<p>Use <code>ttIsql</code> to connect to the <code>master2</code> database and start the replication agent:</p>
<pre>% ttIsql master2
Copyright (c) 1996-2011, Oracle.  All rights reserved.
Type ? or &#34;help&#34; for help, type &#34;exit&#34; to quit ttIsql.
 
connect &#34;DSN=master2&#34;;
Connection successful: DSN=master2;UID=timesten;DataStore=/tmp/master2;
DatabaseCharacterSet=AL32UTF8;ConnectionCharacterSet=AL32UTF8;TypeMode=0;
(Default setting AutoCommit=1)

Command&gt; CALL ttRepStart;
</pre>
<p>Starting the replication agent for the standby database automatically sets its state to <code>&#39;STANDBY&#39;</code>. Verify the state of <code>master2</code>:</p>
<pre>Command&gt; CALL ttRepStateGet;
&lt; STANDBY, NO GRID &gt;
1 row found.
</pre></div>
<!-- class="sect2" -->
<a id="CHDCFJAA"></a>
<div id="TTREP164" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 9. Duplicate the standby database to the subscriber</h3>
<p>Exit <code>ttIsql</code> and use the <code>ttRepAdmin</code> utility as the <code>ttuser</code> (the user created with the <code>ADMIN</code> privilege) to duplicate the standby database to the subscriber database:</p>
<pre>% ttRepAdmin -duplicate -from master2 -host server1 -uid ttuser -pwd ttuser 
subscriber1
</pre></div>
<!-- class="sect2" -->
<a id="CHDDJGBB"></a>
<div id="TTREP165" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 10: Start the replication agent on the subscriber</h3>
<p>Use <code>ttIsql</code> to connect to <code>subscriber1</code> and start the replication agent. Verify the state of <code>subscriber1</code>. Starting the replication agent for the subscriber database automatically sets its state to <code>&#39;IDLE&#39;</code>. All subscriber databases have their state set to <code>&#39;IDLE&#39;</code>.</p>
<pre>% ttIsql subscriber1
 
Copyright (c) 1996-2011, Oracle.  All rights reserved.
Type ? or &#34;help&#34; for help, type &#34;exit&#34; to quit ttIsql.
 
connect &#34;DSN=subscriber1&#34;;
Connection successful: DSN=subscriber1;UID=timesten;DataStore=/stmp/subscriber1;
DatabaseCharacterSet=AL32UTF8;ConnectionCharacterSet=AL32UTF8;TypeMode=0;
(Default setting AutoCommit=1)

Command&gt; CALL ttRepStart;

Command&gt; call ttRepStateGet;
&lt; IDLE, NO GRID &gt;
1 row found.
</pre></div>
<!-- class="sect2" -->
<a id="CHDCEEHI"></a>
<div id="TTREP166" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 11: Insert data into the table on the active database</h3>
<p>Use the <code>ttIsql</code> utility to connect to the <code>master1</code> database:</p>
<pre>% ttIsql master1
 
Copyright (c) 1996-2011, Oracle.  All rights reserved.
Type ? or &#34;help&#34; for help, type &#34;exit&#34; to quit ttIsql.
 
connect &#34;DSN=master1&#34;;
Connection successful: DSN=master1;UID=timesten;DataStore=/tmp/master1;
DatabaseCharacterSet=AL32UTF8;ConnectionCharacterSet=AL32UTF8;TypeMode=0;
(Default setting AutoCommit=1)
Command&gt;
</pre>
<p>Insert a row into the <code>employees</code> table on <code>master1</code>.</p>
<pre>Command&gt; INSERT INTO employees VALUES
     &gt; ( 202, 
     &gt;   &#39;Pat&#39;, 
     &gt;   &#39;Fay&#39;,
     &gt;   &#39;PFAY&#39;,
     &gt;   &#39;603-123-7777&#39;,
     &gt;   TO_DATE(&#39;17-AUG-1997&#39;, &#39;dd-MON-yyyy&#39;),
     &gt;   &#39;MK_REP&#39;,
     &gt;   6000,
     &gt;   NULL,
     &gt;   201,
     &gt;   20
   );
1 row inserted.
Command&gt; SELECT * FROM employees;
&lt; 202, Pat, Fay, PFAY, 603-123-7777, 1997-08-17 00:00:00, MK_REP, 
 6000, &lt;NULL&gt;, 201, 20 &gt;
1 row found.
</pre>
<p>Verify that the insert is replicated to <code>master2</code> and <code>subscriber1</code>. Use <code>ttIsql</code> to connect to <code>master2</code>:</p>
<pre>% ttIsql master2
Copyright (c) 1996-2011, Oracle.  All rights reserved.
Type ? or &#34;help&#34; for help, type &#34;exit&#34; to quit ttIsql.
 
connect &#34;DSN=master2&#34;;
Connection successful: DSN=master2;UID=timesten;DataStore=/tmp/master2;
DatabaseCharacterSet=AL32UTF8;ConnectionCharacterSet=AL32UTF8;TypeMode=0;
(Default setting AutoCommit=1)
</pre>
<p>Verify that the data is replicated to <code>master2</code>:</p>
<pre>Command&gt; SELECT * FROM employees;
&lt; 202, Pat, Fay, PFAY, 603-123-7777, 1997-08-17 00:00:00, MK_REP, 
6000, &lt;NULL&gt;, 201, 20 &gt;
1 row found.
</pre>
<p>Perform the same step on <code>subscriber1</code> to verify the data is replicated to the subscriber.</p>
</div>
<!-- class="sect2" -->
<a id="CHDJBIBI"></a>
<div id="TTREP167" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 12: Drop the active standby pair and the table</h3>
<p>Connect to each database using <code>ttIsql</code> and stop the replication agents on each database:</p>
<pre>Command&gt; CALL ttRepStop;
</pre>
<p>Drop the active standby pair on each database. You can then drop the <code>employees</code> table on any database in which you have dropped the active standby pair.</p>
<pre>Command&gt; DROP ACTIVE STANDBY PAIR;
</pre>
<pre>Command&gt; DROP TABLE employees;
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDJGIFJ"></a>
<div id="TTREP168" class="sect1">
<h2 class="sect1">Configuring a replication scheme with one master and one subscriber</h2>
<p>This section describes how to configure a replication scheme that replicates the contents of a single table in a master database (<code>masterds</code>) to a table in a subscriber database (<code>subscriberds</code>). To keep the example simple, both databases reside on the same computer.</p>
<div id="TTREP169" class="figure">
<p class="titleinfigure"><a id="sthref79"></a>Figure 2-2 Simple replication scheme</p>
<img width="422" height="247" src="img/scheme0.gif" alt="Description of Figure 2-2 follows"/><br/>
<a id="sthref80" href="img_text/scheme0.htm">Description of &#34;Figure 2-2 Simple replication scheme&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#CHDIECBB">Step 1: Create the DSNs for the master and the subscriber</a></p>
</li>
<li>
<p><a href="#CHDDGJIB">Step 2: Create a table and replication scheme on the master database</a></p>
</li>
<li>
<p><a href="#CHDEFCJF">Step 3: Create a table and replication scheme on the subscriber database</a></p>
</li>
<li>
<p><a href="#CHDECCIF">Step 4: Start the replication agent on each database</a></p>
</li>
<li>
<p><a href="#CHDHAAJI">Step 5: Insert data into the table on the master database</a></p>
</li>
<li>
<p><a href="#CHDHGACB">Step 6: Drop the replication scheme and table</a></p>
</li>
</ul>
<a id="CHDIECBB"></a>
<div id="TTREP170" class="sect2">
<h3 class="sect2">Step 1: Create the DSNs for the master and the subscriber<a id="sthref81"></a></h3>
<p>Create DSNs named <code>masterds</code> and <code>subscriberds</code> as described in <a class="olink TTOPR120" href="../TTOPR/using.htm#TTOPR120">&#34;Managing TimesTen Databases&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
<p>On UNIX systems, use a text editor to create the following <code>odbc.ini</code> file on each database:</p>
<pre>[masterds]
DataStore=/tmp/masterds
DatabaseCharacterSet=AL32UTF8
ConnectionCharacterSet=AL32UTF8

[subscriberds]
DataStore=/tmp/subscriberds
DatabaseCharacterSet=AL32UTF8
ConnectionCharacterSet=AL32UTF8
</pre>
<p>On Windows, use the ODBC Administrator to set the same connection attributes. Use defaults for all other settings.</p>
</div>
<!-- class="sect2" -->
<a id="CHDDGJIB"></a>
<div id="TTREP171" class="sect2">
<h3 class="sect2">Step 2: Create a table and replication scheme on the master database</h3>
<p>Connect to <code>masterds</code> with the <code>ttIsql</code> utility:</p>
<pre>% ttIsql masterds
Copyright (c) 1996-2011, Oracle.  All rights reserved.
Type ? or &#34;help&#34; for help, type &#34;exit&#34; to quit ttIsql.

connect &#34;DSN=masterds&#34;;
Connection successful: DSN=masterds;UID=timesten;
DataStore=/tmp/masterds;DatabaseCharacterSet=AL32UTF8;
ConnectionCharacterSet=AL32UTF8;TypeMode=0;
(Default setting AutoCommit=1)
Command&gt;
</pre>
<p>Create the <code>employees</code> table:</p>
<pre>Command&gt; CREATE TABLE employees
 &gt;   ( employee_id   NUMBER(6) PRIMARY KEY,
 &gt;    first_name     VARCHAR2(20),
 &gt;    last_name      VARCHAR2(25) NOT NULL,
 &gt;    email          VARCHAR2(25) NOT NULL UNIQUE,
 &gt;    phone_number   VARCHAR2(20),
 &gt;    hire_date      DATE NOT NULL,
 &gt;    job_id         VARCHAR2(10) NOT NULL,
 &gt;    salary         NUMBER(8,2),
 &gt;    commission_pct NUMBER(2,2),
 &gt;    manager_id     NUMBER(6),
 &gt;    department_id  NUMBER(4)
 &gt; ) ;
</pre>
<p>Create a replication scheme called <code>repscheme</code> to replicate the <code>employees</code> table from <code>masterds</code> to <code>subscriberds</code>.</p>
<pre>Command&gt; CREATE REPLICATION repscheme
       &gt; ELEMENT e TABLE employees
       &gt; MASTER masterds
       &gt; SUBSCRIBER subscriberds;
</pre></div>
<!-- class="sect2" -->
<a id="CHDEFCJF"></a>
<div id="TTREP172" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 3: Create a table and replication scheme on the subscriber database</h3>
<p>Connect to <code>subscriberds</code> and create the same table and replication scheme, using the same procedure described in Step 2.</p>
</div>
<!-- class="sect2" -->
<a id="CHDECCIF"></a>
<div id="TTREP173" class="sect2">
<h3 class="sect2">Step 4: Start the replication agent on each database<a id="sthref82"></a><a id="sthref83"></a></h3>
<p>Start the replication agents on <code>masterds</code> and <code>subscriberds</code>:</p>
<pre>Command&gt; call ttRepStart;
</pre>
<p>Exit <code>ttIsql</code>. Use the <code>ttStatus</code> utility to verify that the replication agents are running for both databases:</p>
<pre>% ttStatus
TimesTen status report as of Thu Aug 11 17:05:23 2011
 
Daemon pid 18373 port 4134 instance ttuser
TimesTen server pid 18381 started on port 4136
------------------------------------------------------------------------
Data store /tmp/masterds
There are 16 connections to the data store
Shared Memory KEY 0x0201ab43 ID 5242889
PL/SQL Memory KEY 0x0301ab43 ID 5275658 Address 0x10000000
Type            PID     Context     Connection Name              ConnID
Process         20564   0x081338c0  masterds                          1
Replication     20676   0x08996738  LOGFORCE                          5
Replication     20676   0x089b69a0  REPHOLD                           2
Replication     20676   0x08a11a58  FAILOVER                          3
Replication     20676   0x08a7cd70  REPLISTENER                       4
Replication     20676   0x08ad7e28  TRANSMITTER                       6
Subdaemon       18379   0x080a11f0  Manager                        2032
Subdaemon       18379   0x080fe258  Rollback                       2033
Subdaemon       18379   0x081cb818  Checkpoint                     2036
Subdaemon       18379   0x081e6940  Log Marker                     2035
Subdaemon       18379   0x08261e70  Deadlock Detector              2038
Subdaemon       18379   0xae100470  AsyncMV                        2040
Subdaemon       18379   0xae11b508  HistGC                         2041
Subdaemon       18379   0xae300470  Aging                          2039
Subdaemon       18379   0xae500470  Flusher                        2034
Subdaemon       18379   0xae55b738  Monitor                        2037
Replication policy  : Manual
<span class="bold">Replication agent is running.</span>
Cache Agent policy  : Manual
PL/SQL enabled.
------------------------------------------------------------------------
Data store /tmp/subscriberds
There are 16 connections to the data store
Shared Memory KEY 0x0201ab41 ID 5177351
PL/SQL Memory KEY 0x0301ab41 ID 5210120 Address 0x10000000
Type            PID     Context     Connection Name              ConnID
Process         20594   0x081338f8  subscriberds                      1
Replication     20691   0x0893c550  LOGFORCE                          5
Replication     20691   0x089b6978  REPHOLD                           2
Replication     20691   0x08a11a30  FAILOVER                          3
Replication     20691   0x08a6cae8  REPLISTENER                       4
Replication     20691   0x08ad7ba8  RECEIVER                          6
Subdaemon       18376   0x080b1450  Manager                        2032
Subdaemon       18376   0x0810e4a8  Rollback                       2033
Subdaemon       18376   0x081cb8b0  Flusher                        2034
Subdaemon       18376   0x08246de0  Monitor                        2035
Subdaemon       18376   0x082a20a8  Deadlock Detector              2036
Subdaemon       18376   0x082fd370  Checkpoint                     2037
Subdaemon       18376   0x08358638  Aging                          2038
Subdaemon       18376   0x083b3900  Log Marker                     2040
Subdaemon       18376   0x083ce998  AsyncMV                        2039
Subdaemon       18376   0x08469e90  HistGC                         2041
Replication policy  : Manual
<span class="bold">Replication agent is running.</span>
Cache Agent policy  : Manual
PL/SQL enabled.
</pre></div>
<!-- class="sect2" -->
<a id="CHDHAAJI"></a>
<div id="TTREP174" class="sect2">
<h3 class="sect2">Step 5: Insert data into the table on the master database</h3>
<p>Use <code>ttIsql</code> to connect to the master database and insert some rows into the <code>employees</code> table:</p>
<pre>% ttIsql masterds
Command&gt; INSERT INTO employees VALUES
     &gt; ( 202, 
     &gt;   &#39;Pat&#39;, 
     &gt;   &#39;Fay&#39;,
     &gt;   &#39;PFAY&#39;,
     &gt;   &#39;603-123-7777&#39;,
     &gt;   TO_DATE(&#39;17-AUG-1997&#39;, &#39;dd-MON-yyyy&#39;),
     &gt;   &#39;MK_REP&#39;,
     &gt;   6000,
     &gt;   NULL,
     &gt;   201,
     &gt;   20
   );
1 row inserted.
</pre>
<p>Open a second command prompt window for the subscriber. Connect to the subscriber database and check the contents of the <code>employees</code> table:</p>
<pre>% ttIsql subscriberds
Command&gt; SELECT * FROM employees;
&lt; 202, Pat, Fay, PFAY, 603-123-7777, 1997-08-17 00:00:00, MK_REP, 
6000, &lt;NULL&gt;, 201, 20 &gt;
1 row found.
</pre>
<p><a href="#CHDJFDBD">Figure 2-3</a> shows that the rows that are inserted into <code>masterds</code> are replicated to <code>subscriberds</code>.</p>
<div id="TTREP175" class="figure">
<p class="titleinfigure"><a id="CHDJFDBD"></a>Figure 2-3 Replicating changes to the subscriber database</p>
<img width="324" height="164" src="img/scheme3.gif" alt="Description of Figure 2-3 follows"/><br/>
<a id="sthref84" href="img_text/scheme3.htm">Description of &#34;Figure 2-3 Replicating changes to the subscriber database&#34;</a><br/>
<br/></div>
<!-- class="figure" --></div>
<!-- class="sect2" -->
<a id="CHDHGACB"></a>
<div id="TTREP176" class="sect2">
<h3 class="sect2">Step 6: Drop the replication scheme and table<a id="sthref85"></a><a id="sthref86"></a><a id="sthref87"></a><a id="sthref88"></a></h3>
<p>After you have completed your replication tests, stop the replication agents on both <code>masterds</code> and <code>subscriberds</code>:</p>
<pre>Command&gt; CALL ttRepStop;
</pre>
<p>To remove the <code>employees</code> table and <code>repscheme</code> replication scheme from the master and subscriber databases, enter these statements on each database:</p>
<pre>Command&gt; DROP REPLICATION repscheme;
Command&gt; DROP TABLE employees;
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5803">
<tr>
<td class="cellalignment5812">
<table class="cellalignment5808">
<tr>
<td class="cellalignment5807"><a href="overview.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5807"><a href="definepair.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2012, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5814">
<table class="cellalignment5806">
<tr>
<td class="cellalignment5807"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5807"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5807"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5807"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5807"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5807"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>