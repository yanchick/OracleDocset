<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-114013"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Altering%20an%20Active%20Standby%20Pair"></a><title>Altering an Active Standby Pair</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 726"/>
<meta name="dcterms.created" content="2014-09-29T11:11:55Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="TimesTen In-Memory Database Replication Guide"/>
<meta name="dcterms.identifier" content="E21635-11"/>
<meta name="dcterms.isVersionOf" content="TTREP"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2012, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="standbycache.htm" title="Previous" type="text/html"/>
<link rel="Next" href="cluster.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E21635-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/21</span> <!-- End Header -->
<div id="TTREP680" class="chapter"><a id="CHDFEIDH"></a>
<h1 class="chapter"><span class="secnum">7</span> Altering an Active Standby Pair</h1>
<p>This chapter includes the following sections:</p>
<ul>
<li>
<p><a href="#BABCAHEB">Making DDL changes in an active standby pair</a></p>
</li>
<li>
<p><a href="#BABJAICG">Making other changes to an active standby pair</a></p>
</li>
</ul>
<a id="BABCAHEB"></a>
<div id="TTREP693" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Making DDL changes in an active standby pair<a id="sthref336"></a><a id="sthref337"></a><a id="sthref338"></a><a id="sthref339"></a><a id="sthref340"></a></h2>
<p>The following sections describe how you can configure automatic replication of certain DDL statements. That is, when you execute a supported DDL statement on the active master, it is automatically replicated to all databases in the active standby pair replication scheme.</p>
<ul>
<li>
<p><a href="#CHDCDEGB">Controlling replication of objects to all databases in an active standby pair</a></p>
</li>
<li>
<p><a href="#CHDBIHAG">DDL statements that can be automatically replicated</a></p>
</li>
<li>
<p><a href="#BABJAJCB">Creating a new PL/SQL object in an existing active standby pair</a></p>
</li>
<li>
<p><a href="#CHDCCGDE">Restrictions on making DDL changes in an active standby pair</a></p>
</li>
<li>
<p><a href="#CHDEIEFE">Examples: Making DDL changes in an active standby pair</a></p>
</li>
<li>
<p><a href="#BABBEDED">Examples: Altering an active standby pair</a></p>
</li>
</ul>
<a id="CHDCDEGB"></a>
<div id="TTREP827" class="sect2">
<h3 class="sect2">Controlling replication of objects to all databases in an active standby pair<a id="sthref341"></a><a id="sthref342"></a></h3>
<p>Use the <code><a id="sthref343"></a>DDLReplicationLevel</code> and <a id="sthref344"></a><code>DDLReplicationAction</code> connection attributes to control what objects that are created or dropped by DDL statements are replicated to the databases involved in an active standby pair replication scheme. For more information on connection attributes, see <a class="olink TTOPR124" href="../TTOPR/using.htm#TTOPR124">&#34;Specifying Data Source Names to identify TimesTen databases&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span></p>
<p>The <code>DDLReplicationLevel</code> connection attribute controls what DDL statements are replicated.</p>
<ul>
<li>
<p><code>DDLReplicationLevel=1</code>. <code>CREATE</code> or <code>DROP</code> statements for tables, indexes, or synonyms are not replicated to the standby database. However, you can add or drop columns to or from a replicated table, and those actions are replicated to the standby database.</p>
</li>
<li>
<p><code>DDLReplicationLevel=2</code> (the default) enables replication of creating and dropping of tables, indexes, and synonyms.</p>
<p>To include tables in the replication scheme, the <code>DDLReplicationAction</code> connection attribute must be set to <code>&#39;INCLUDE&#39;</code> (the default) before creating the table. If <code>DDLReplicationAction=&#39;EXCLUDE&#39;</code>, then the table is not included in the replication scheme. If the table is excluded from the replication scheme, then the DDL statements for creating and dropping tables are replicated to the standby master; however, any DML statements executed on the table are not replicated.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You may want to exclude a table from a replication scheme if:
<ul>
<li>
<p>You want to create a table in the replication scheme without either a primary key or a unique index on non-nullable columns.</p>
</li>
<li>
<p>You want to create a temporary table where the data is only used locally and you do not want to replicate updates for this table.</p>
</li>
</ul>
</div>
<p>To add an existing table to an active standby pair, use the <code>ALTER ACTIVE STANDBY PAIR INCLUDE TABLE</code> statement. The table must be empty.</p>
<p>However, you cannot alter a table to add a <code>NOT NULL</code> column to a table that is part of a replication scheme with the <code>ALTER TABLE ... ADD COLUMN NOT NULL DEFAULT</code> statement. You must remove the table from the replication scheme first before you can add a <code>NOT NULL</code> column to it.</p>
</li>
<li>
<p><code>DDLReplicationLevel=3</code> enables the following:</p>
<ul>
<li>
<p>Replication to all databases in the replication scheme of the same objects that are replicated when <code>DDLReplicationLevel=2</code>.</p>
</li>
<li>
<p>Replication of creating and dropping of views to all databases in the replication scheme.</p>
</li>
<li>
<p>Replication of creating and dropping of sequences to all databases in the replication scheme, as long as <code>DDLReplicationAction=&#39;INCLUDE&#39;</code> (the default) before creation. If <code>DDLReplicationAction=&#39;EXCLUDE&#39;</code>, then the sequence is not included in the replication scheme. If the sequence is excluded from the replication scheme, then the DDL statements for creating and dropping sequences are replicated to the standby master; however, each sequence on the active master and standby master are separate objects.</p>
</li>
<li>
<p>Replication of the results to the standby master when you set the cache administration user name and password on the active master with the <code>ttCacheUidPwdSet</code> built-in procedure. You do not need to stop and restart the cache agent or replication agent in order to execute the <code>ttCacheUidPwdSet</code> built-in procedure on the active master. See <a href="standbycache.htm#BABHHHHH">&#34;Changing user names or passwords used by replication&#34;</a> for more details.</p>
</li>
<li>
<p>With this level, you can alter a table to add a <code>NOT NULL</code> column to a table that is part of a replication scheme with the <code>ALTER TABLE ... ADD COLUMN NOT NULL DEFAULT</code> statement.</p>
</li>
</ul>
</li>
</ul>
<p>You can set the <code>DDLReplicationLevel</code> attribute as part of the connection string or after the connection starts with the <code>ALTER SESSION</code> statement:</p>
<pre>ALTER SESSION SET DDL_REPLICATION_LEVEL=3;
</pre>
<p>You can set the <code>DDLReplicationAction</code> attribute as part of the connection string or after the connection starts with the <code>ALTER SESSION</code> statement:</p>
<pre>ALTER SESSION SET ddl_replication_action=&#39;EXCLUDE&#39;;
</pre>
<p>For more information, see <a class="olink TTSQL285" href="../TTSQL/state.htm#TTSQL285">&#34;ALTER SESSION&#34;</a> and <a class="olink TTSQL279" href="../TTSQL/state.htm#TTSQL279">&#34;ALTER ACTIVE STANDBY PAIR&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database SQL Reference</span>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When <code>DDLCommitBehavior=0</code> (the default), DDL operations are automatically committed. When <code>RETURN TWOSAFE</code> has been specified, errors and timeouts may occur as described in <a href="attrib.htm#CHDHIGDF">&#34;RETURN TWOSAFE&#34;</a>. If a <code>RETURN TWOSAFE</code> timeout occurs, the DDL transaction is committed locally regardless of the <code><a href="attrib.htm#CHDEDGGB">LOCAL COMMIT ACTION</a></code> that has been specified.</div>
</div>
<!-- class="sect2" -->
<a id="CHDBIHAG"></a>
<div id="TTREP828" class="sect2">
<h3 class="sect2">DDL statements that can be automatically replicated</h3>
<p>You can execute the following DDL statements in an active standby pair without stopping the replication agent. In addition, these statements are replicated to all databases in the replication scheme. The following statements are automatically replicated when <code>DDLReplicationLevel</code> is 2 or 3 (the default is 2):</p>
<ul>
<li>
<p>Create, alter, or drop a user with the <code>CREATE USER</code>, <code>ALTER USER</code>, or <code>DROP USER</code> statements.</p>
</li>
<li>
<p>Grant or revoke privileges from a user with the <code>GRANT</code> or <code>REVOKE</code> statements.</p>
</li>
<li>
<p>Alter a table to add or drop a column with the <code>ALTER TABLE ... ADD COLUMN</code> or <code>ALTER TABLE ... DROP COLUMN</code> statements. These are the only <code>ALTER TABLE</code> clauses that are replicated. However, when <code>DDLReplicationLevel=2</code>, you cannot alter a table to add a <code>NOT NULL</code> column to a table that is part of a replication scheme with the <code>ALTER TABLE ... ADD COLUMN NOT NULL DEFAULT</code> statement. You can execute this statement if <code>DDLReplicationLevel=3</code>.</p>
</li>
<li>
<p>Create or drop a table, including global temporary tables with the <code>CREATE TABLE</code> or <code>DROP TABLE</code> statements. The new table is also included in the active standby pair.</p>
</li>
<li>
<p>Create or drop a synonym with the <code>CREATE SYNONYM</code> or <code>DROP SYNONYM</code> statements.</p>
</li>
<li>
<p>Create or drop an index with the <code>CREATE INDEX</code> or <code>DROP INDEX</code> statements.</p>
</li>
</ul>
<p>You can perform the following tasks in an active standby pair without stopping the replication agent. In addition, these statements are replicated to all databases in the replication scheme. The following statements are automatically replicated when <code>DDLReplicationLevel</code> is set to 3:</p>
<ul>
<li>
<p>Create or drop a view with the <code>CREATE VIEW</code> or <code>DROP VIEW</code> statements.</p>
</li>
<li>
<p>Create or drop a sequence with the <code>CREATE SEQUENCE</code> or <code>DROP SEQUENCE</code> statements. These statements are automatically replicated to all databases in the replication scheme and included in the active standby pair when the <code>DDLReplicationAction</code> connection attribute is set to <code>INCLUDE</code> (the default) before creating the sequence; the sequence is not included in the replication scheme if the <code>DDLReplicationAction</code> connection attribute is set to <code>EXCLUDE</code>.</p>
</li>
</ul>
<p>You do not have to stop the cache agent or replication agent when you set the user name and password for the cache administration user on the active master with the <code>ttCacheUidPwdSet</code> built-in procedure. When <code>DDLReplicationLevel=3</code>, then this information is automatically replicated to the standby master. See <a href="standbycache.htm#BABHHHHH">&#34;Changing user names or passwords used by replication&#34;</a> for more information.</p>
<p>You can perform the following tasks in an active standby pair only after stopping the replication agents. These statements are not replicated to the standby master, so you must ensure that the changes are propagated to the standby master and any subscribers by either performing a duplicate or executing these statements on all nodes in the replication scheme after the replication agents are stopped. After execution, restart the replication agents on all nodes.</p>
<ul>
<li>
<p>The DDL statements for creating, dropping, or altering a materialized view.</p>
</li>
<li>
<p>Changing the autorefresh mode or interval using the <code>ALTER CACHE GROUP</code> ... <code>SET AUTOREFRESH MODE</code> or <code>ALTER CACHE GROUP</code> ... <code>SET AUTOREFRESH INTERVAL</code> statements.</p>
</li>
</ul>
<p>You can perform the following tasks in an active standby pair without stopping the replication agent. However, these statements are not replicated to the standby master, so you must ensure that the changes are propagated to the standby master and any subscribers by either performing a duplicate or executing these statements on all nodes in the replication scheme.</p>
<ul>
<li>
<p>Changing the autorefresh state of a cache group using the <code>ALTER CACHE GROUP</code> ... <code>SET AUTOREFRESH STATE</code> statement. However, you cannot set a cache group autorefresh state to <code>OFF</code> on the active master.</p>
</li>
<li>
<p>Create or drop a PL/SQL function, PL/SQL procedure, PL/SQL package, or PL/SQL package body. You do not need to stop the replication agents for these objects. See <a href="#BABJAJCB">&#34;Creating a new PL/SQL object in an existing active standby pair&#34;</a> for more information on PL/SQL objects.</p>
</li>
<li>
<p>Any other DDL statements that are not replicated (except for materialized views).</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BABJAJCB"></a>
<div id="TTREP744" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Creating a new PL/SQL object in an existing active standby pair<a id="sthref345"></a></h3>
<p>To add a new PL/SQL procedure, package, package body or function to an existing active standby pair, complete these tasks:</p>
<ol>
<li>
<p>Create the PL/SQL object on the active database. The <code>CREATE</code> statement is not replicated to the standby database.</p>
</li>
<li>
<p>Create the PL/SQL object on the standby database and any subscribers.</p>
</li>
<li>
<p>Grant privileges to the new PL/SQL object on the active database. The <code>GRANT</code> statement is replicated to the standby database and any subscribers.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDCCGDE"></a>
<div id="TTREP694" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Restrictions on making DDL changes in an active standby pair</h3>
<p>When <code>DDLReplicationLevel</code>=2 or 3:</p>
<ul>
<li>
<p><code>CREATE TABLE ... AS SELECT</code>, <code>ALTER TABLE ... ADD CONSTRAINT</code>, <code>ALTER TABLE ... ADD UNIQUE</code> and <code>ALTER TABLE ... MODIFY</code> statements are not replicated.</p>
</li>
<li>
<p>The <code>CREATE INDEX</code> statement is replicated only when the index is created on an empty table. To create a new index on populated tables, set <code>DDLReplicationLevel</code> to a value less than 2 and create the index manually on both the active and standby.</p>
</li>
<li>
<p>These statements cannot be executed on the standby database when <code>DDLReplicationLevel</code>=2 or 3:</p>
<ul>
<li>
<p><code>CREATE USER</code>, <code>ALTER USER</code>, <code>DROP USER</code></p>
</li>
<li>
<p><code>CREATE TABLE</code>, <code>DROP TABLE</code></p>
</li>
<li>
<p><code>CREATE INDEX</code>, <code>DROP INDEX</code></p>
</li>
<li>
<p><code>GRANT</code>, <code>REVOKE</code></p>
</li>
<li>
<p><code>CREATE SYNONYM</code>, <code>DROP SYNONYM</code></p>
</li>
</ul>
</li>
</ul>
<p>When <code>DDLReplicationLevel</code>=3:</p>
<ul>
<li>
<p><code>CREATE SEQUENCE ... CYCLE</code> statements are not replicated.</p>
</li>
<li>
<p>These statements cannot be executed on the standby database when <code>DDLReplicationLevel=3</code>:</p>
<ul>
<li>
<p><code>CREATE INDEX</code>, <code>DROP INDEX</code></p>
</li>
<li>
<p><code>CREATE SEQUENCE</code>, <code>DROP SEQUENCE</code> when <code>DDLReplicationAction=&#39;INCLUDE&#39;</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
However, you can create or drop a sequence on the standby master when <code>DDLReplicationLevel=3</code> if <code>DDLReplicationAction=&#39;EXCLUDE&#39;</code>.</div>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDEIEFE"></a>
<div id="TTREP695" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Examples: Making DDL changes in an active standby pair</h3>
<div id="TTREP696" class="example">
<p class="titleinexample"><a id="sthref346"></a>Example 7-1 Create a table and include it in the active standby pair</p>
<p>On the active database, set <code>DDLReplicationLevel</code> to <code>2</code> and <code>DDLReplicationAction</code> to <code>&#39;INCLUDE&#39;</code>.</p>
<pre>Command &gt; ALTER SESSION SET ddl_replication_level=2;
Session altered.
Command &gt; ALTER SESSION SET ddl_replication_action=&#39;INCLUDE&#39;;
Session altered.
</pre>
<p>Create a table. The table must have a primary key or index.</p>
<pre>Command &gt; CREATE TABLE tabinclude (col1 NUMBER NOT NULL PRIMARY KEY);
Table created.
</pre>
<p>Insert a row into <code>tabinclude</code>.</p>
<pre>Command &gt; INSERT INTO tabinclude VALUES (55);
1 row inserted.
</pre>
<p>On the standby database, verify that the <code>INSERT</code> statement has been replicated. This indicates that the <code>tabinclude</code> table has been included in the active standby pair.</p>
<pre>Command &gt; SELECT * FROM tabinclude;
&lt; 55 &gt;
1 row found.
</pre>
<p>Alternatively, use the <code>ttIsql</code> <code>repschemes</code> command to see what tables are included in the active standby pair.</p>
</div>
<!-- class="example" -->
<div id="TTREP697" class="example">
<p class="titleinexample"><a id="sthref347"></a>Example 7-2 Create a table and add it to the active standby pair later</p>
<p>On the active database, set <code>DDLReplicationLevel</code> to <code>2</code> and <code>DDLReplicationAction</code> to <code>&#39;EXCLUDE&#39;</code>.</p>
<pre>Command&gt; ALTER SESSION SET ddl_replication_level=2;
Session altered.
Command&gt; ALTER SESSION SET ddl_replication_action=&#39;exclude&#39;;
Session altered.
</pre>
<p>Create a table that does not have a primary key or index. Try to include it in the active standby pair.</p>
<pre>Command&gt; CREATE TABLE newtab (a NUMBER NOT NULL);
Command&gt; ALTER ACTIVE STANDBY PAIR INCLUDE TABLE newtab;
 8000: No primary or unique index on non-nullable column found for replicated 
 table TERRY.NEWTAB
The command failed.
</pre>
<p>Create an index on the table. Include the table in the active standby pair.</p>
<pre>Command&gt; CREATE UNIQUE INDEX ixnewtab ON newtab(a);
Command&gt; ALTER ACTIVE STANDBY PAIR INCLUDE TABLE newtab;
</pre>
<p>Insert a row into the table.</p>
<pre>Command&gt; INSERT INTO newtab VALUES (5);
1 row inserted.
</pre>
<p>On the standby database, verify that the row was inserted.</p>
<pre>Command&gt; SELECT * FROM newtab;
&lt; 5 &gt;
1 row found.
</pre>
<p>This example illustrates that a table does not need a primary key to be part of an active standby pair.</p>
</div>
<!-- class="example" -->
<div id="TTREP698" class="example">
<p class="titleinexample"><a id="sthref348"></a>Example 7-3 CREATE INDEX is replicated</p>
<p>On the active database, set <code>DDLReplicationLevel=2</code> and <code>DDLReplicationAction=&#39;INCLUDE&#39;</code>.</p>
<pre>Command&gt; ALTER SESSION SET ddl_replication_level=2;
Session altered.
Command&gt; ALTER SESSION SET ddl_replication_action=&#39;include&#39;;
Session altered.
</pre>
<p>Create a table with a primary key. The table is automatically included in the active standby pair.</p>
<pre>Command&gt; CREATE TABLE tab2 (a NUMBER NOT NULL, b NUMBER NOT NULL, 
       &gt; PRIMARY KEY (a));
</pre>
<p>Create an index on the table.</p>
<pre>Command&gt; CREATE UNIQUE INDEX ixtab2 ON tab2 (b);
</pre>
<p>On the standby database, verify that the <code>CREATE INDEX</code> statement has been replicated.</p>
<pre>Command&gt; indexes;
 
Indexes on table TERRY.TAB2:
  IXTAB2: unique T-tree index on columns:
    B
  TAB2: unique T-tree index on columns:
    A
  2 indexes found.
 
Indexes on table TERRY.NEWTAB:
  NEWTAB: unique T-tree index on columns:
    A
  1 index found.
 
Indexes on table TERRY.TABINCLUDE:
  TABINCLUDE: unique T-tree index on columns:
    A
  1 index found.
4 indexes found on 3 tables.
</pre></div>
<!-- class="example" -->
<div id="TTREP832" class="example">
<p class="titleinexample"><a id="sthref349"></a>Example 7-4 CREATE SYNONYM is replicated</p>
<p>The <code>DDLReplicationLevel</code> is already set to <code>2</code>, since it is the default. Create a synonym for <code>tabinclude</code>.</p>
<pre>Command&gt; CREATE SYNONYM syntabinclude FOR tabinclude;
Synonym created.
</pre>
<p>On the standby database, use the <code>ttIsql</code> <code>synonyms</code> command to verify that the <code>CREATE SYNONYM</code> statement has been replicated.</p>
<pre>Command&gt; synonyms;
TERRY.SYNTABINCLUDE
1 synonym found.
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABJAICG"></a>
<div id="TTREP674" class="sect1">
<h2 class="sect1">Making other changes to an active standby pair<a id="sthref350"></a><a id="sthref351"></a><a id="sthref352"></a><a id="sthref353"></a><a id="sthref354"></a><a id="sthref355"></a></h2>
<p>You must stop the replication agent to make these changes to an active standby pair:</p>
<ul>
<li>
<p>Include or exclude a cache group.</p>
</li>
<li>
<p>Add or drop a subscriber.</p>
</li>
<li>
<p>Change values in the <code>STORE</code> clause.</p>
</li>
<li>
<p>Change network operations (<code>ADD ROUTE</code> or <code>DROP ROUTE</code> clause).</p>
</li>
</ul>
<p>To alter an active standby pair according to the preceding list, complete the following tasks:</p>
<ol>
<li>
<p>Stop the replication agent on the active database. See <a href="setup.htm#CEGIIJEB">&#34;Starting and stopping the replication agents&#34;</a>.</p>
</li>
<li>
<p>If the active standby pair includes cache groups, stop the cache agent on the active database.</p>
</li>
<li>
<p>Use the <code>ALTER ACTIVE STANDBY PAIR</code> statement to make changes to the replication scheme. See <a href="#BABBEDED">&#34;Examples: Altering an active standby pair&#34;</a>.</p>
</li>
<li>
<p>Start the replication agent on the active database. See <a href="setup.htm#CEGIIJEB">&#34;Starting and stopping the replication agents&#34;</a>.</p>
</li>
<li>
<p>If the active standby pair includes cache groups, start the cache agent on the active database.</p>
</li>
<li>
<p>Destroy the standby database and the subscribers.</p>
</li>
<li>
<p>Duplicate the active database to the standby database. You can use either the <code>ttRepAdmin</code> <code>-duplicate</code> utility or the <code>ttRepDuplicateEx</code> C function to duplicate a database. If the active standby pair includes cache groups, use the <code>-keepCG</code> command line option with <code>ttRepAdmin</code> to preserve the cache group. See <a href="definepair.htm#CBAGAJGF">&#34;Duplicating a database&#34;</a>.</p>
</li>
<li>
<p>Set up the replication agent policy on the standby database and start the replication agent. See <a href="setup.htm#CEGIIJEB">&#34;Starting and stopping the replication agents&#34;</a>.</p>
</li>
<li>
<p>Wait for the standby database to enter the <code>STANDBY</code> state. Use the <code>ttRepStateGet</code> built-in procedure to check the state.</p>
</li>
<li>
<p>If the active standby pair includes cache groups, start the cache agent for the standby database using the <code>ttCacheStart</code> built-in procedure or the <code>ttAdmin</code> <code>-cacheStart</code> utility.</p>
</li>
<li>
<p>Duplicate all of the subscribers from the standby database. See <a href="setup.htm#BABFEEFF">&#34;Duplicating a master database to a subscriber&#34;</a>. If the active standby pair includes cache groups, use the <code>-noKeepCG</code> command line option with <code>ttRepAdmin</code> in order to convert the cache group to regular TimesTen tables on the subscribers. See <a href="definepair.htm#CBAGAJGF">&#34;Duplicating a database&#34;</a>.</p>
</li>
<li>
<p>Set up the replication agent policy on the subscribers and start the agent on each of the subscriber databases. See <a href="setup.htm#CEGIIJEB">&#34;Starting and stopping the replication agents&#34;</a>.</p>
</li>
</ol>
<a id="BABBEDED"></a>
<div id="TTREP675" class="sect2">
<h3 class="sect2">Examples: Altering <a id="sthref356"></a>an active standby pair</h3>
<div id="TTREP676" class="example">
<p class="titleinexample"><a id="sthref357"></a>Example 7-5 Adding a subscriber to an active standby pair</p>
<p>Add a subscriber database to the active standby pair.</p>
<pre>ALTER ACTIVE STANDBY PAIR
  ADD SUBSCRIBER sub1;
</pre></div>
<!-- class="example" -->
<div id="TTREP677" class="example">
<p class="titleinexample"><a id="sthref358"></a>Example 7-6 Dropping subscribers from an active standby pair</p>
<p>Drop subscriber databases from the active standby pair.</p>
<pre>ALTER ACTIVE STANDBY PAIR
  DROP SUBSCRIBER sub1
  DROP SUBSCRIBER sub2;
</pre></div>
<!-- class="example" -->
<div id="TTREP678" class="example">
<p class="titleinexample"><a id="sthref359"></a>Example 7-7 Changing the PORT and TIMEOUT settings for subscribers</p>
<p>Alter the <code>PORT</code> and <code>TIMEOUT</code> settings for subscribers <code>sub1</code> and <code>sub2</code>.</p>
<pre>ALTER ACTIVE STANDBY PAIR
  ALTER STORE sub1 SET PORT 23000 TIMEOUT 180
  ALTER STORE sub2 SET PORT 23000 TIMEOUT 180;
</pre></div>
<!-- class="example" -->
<div id="TTREP679" class="example">
<p class="titleinexample"><a id="sthref360"></a>Example 7-8 Adding a cache group to an active standby pair</p>
<p>Add a cache group to the active standby pair.</p>
<pre>ALTER ACTIVE STANDBY PAIR
  INCLUDE CACHE GROUP cg0;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5803">
<tr>
<td class="cellalignment5812">
<table class="cellalignment5808">
<tr>
<td class="cellalignment5807"><a href="standbycache.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5807"><a href="cluster.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2012, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5814">
<table class="cellalignment5806">
<tr>
<td class="cellalignment5807"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5807"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5807"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5807"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5807"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5807"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>