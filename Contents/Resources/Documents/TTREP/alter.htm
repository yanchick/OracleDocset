<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-114012"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Altering%20a%20Classic%20Replication%20Scheme"></a><title>Altering a Classic Replication Scheme</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 726"/>
<meta name="dcterms.created" content="2014-09-29T11:11:56Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="TimesTen In-Memory Database Replication Guide"/>
<meta name="dcterms.identifier" content="E21635-11"/>
<meta name="dcterms.isVersionOf" content="TTREP"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2012, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="design.htm" title="Previous" type="text/html"/>
<link rel="Next" href="setup.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E21635-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">14/21</span> <!-- End Header -->
<div id="TTREP481" class="chapter"><a id="BABDFABA"></a>
<h1 class="chapter"><span class="secnum">10</span> Altering a Classic Replication Scheme</h1>
<p>This chapter describes how to alter an existing classic replication system.</p>
<ul>
<li>
<p><a href="#BGBIIDIG">Altering a classic replication scheme</a></p>
</li>
<li>
<p><a href="#BGBBEDIF">Altering a replicated table in a classic replication scheme</a></p>
</li>
<li>
<p><a href="#BGBCGIDJ">Truncating a replicated table in a classic replication scheme</a></p>
</li>
<li>
<p><a href="#BGBHEFEH">Dropping a classic replication scheme</a></p>
</li>
</ul>
<p><a href="#CHDCJABG">Table 10-1</a> lists the tasks often performed on an existing classic replicated system.</p>
<div id="TTREP482" class="tblhruleformal">
<p class="titleintable"><a id="sthref628"></a><a id="CHDCJABG"></a>Table 10-1 Tasks performed on an existing classic replicated system</p>
<table class="cellalignment5810" title="Tasks performed on an existing classic replicated system" summary="Task table" dir="ltr">
<thead>
<tr class="cellalignment5804">
<th class="cellalignment5811" id="r1c1-t2">Task</th>
<th class="cellalignment5811" id="r1c2-t2">What to do</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5804">
<td class="cellalignment5812" id="r2c1-t2" headers="r1c1-t2">
<p>Alter or drop a classic replication scheme</p>
</td>
<td class="cellalignment5812" headers="r2c1-t2 r1c2-t2">
<p>See<a href="#BGBIIDIG">&#34;Altering a classic replication scheme&#34;</a> and <a href="#BGBHEFEH">&#34;Dropping a classic replication scheme&#34;</a>.</p>
</td>
</tr>
<tr class="cellalignment5804">
<td class="cellalignment5812" id="r3c1-t2" headers="r1c1-t2">
<p>Alter a table used in a replication scheme</p>
</td>
<td class="cellalignment5812" headers="r3c1-t2 r1c2-t2">
<p>See <a href="#BGBBEDIF">&#34;Altering a replicated table in a classic replication scheme&#34;</a>.</p>
</td>
</tr>
<tr class="cellalignment5804">
<td class="cellalignment5812" id="r4c1-t2" headers="r1c1-t2">
<p>Truncate a table used in a replication scheme</p>
</td>
<td class="cellalignment5812" headers="r4c1-t2 r1c2-t2">
<p>See <a href="#BGBCGIDJ">&#34;Truncating a replicated table in a classic replication scheme&#34;</a>.</p>
</td>
</tr>
<tr class="cellalignment5804">
<td class="cellalignment5812" id="r5c1-t2" headers="r1c1-t2">
<p>Change the replication state of a subscriber database</p>
</td>
<td class="cellalignment5812" headers="r5c1-t2 r1c2-t2">
<p>See <a href="setup.htm#CEGFHBDD">&#34;Setting the replication state of subscribers&#34;</a>.</p>
</td>
</tr>
<tr class="cellalignment5804">
<td class="cellalignment5812" id="r6c1-t2" headers="r1c1-t2">
<p>Resolve update conflicts</p>
</td>
<td class="cellalignment5812" headers="r6c1-t2 r1c2-t2">
<p>See <a href="conflict.htm#BABGABJH">Chapter 13, &#34;Resolving Replication Conflicts&#34;</a>.</p>
</td>
</tr>
<tr class="cellalignment5804">
<td class="cellalignment5812" id="r7c1-t2" headers="r1c1-t2">
<p>Recover from failures</p>
</td>
<td class="cellalignment5812" headers="r7c1-t2 r1c2-t2">
<p>See <a href="failure.htm#CFHGEGCJ">Chapter 15, &#34;Managing Database Failover and Recovery&#34;</a>.</p>
</td>
</tr>
<tr class="cellalignment5804">
<td class="cellalignment5812" id="r8c1-t2" headers="r1c1-t2">
<p>Upgrade database</p>
</td>
<td class="cellalignment5812" headers="r8c1-t2 r1c2-t2">
<p>Use the <code>ttMigrate</code> and <code>ttRepAdmin</code> utilities, as described in <a class="olink TTINS199" href="../TTINS/upgrade.htm#TTINS199">&#34;Database Upgrades&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Installation Guide</span>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" -->
<a id="BGBIIDIG"></a>
<div id="TTREP483" class="sect1">
<h2 class="sect1">Altering a classic replication scheme<a id="sthref629"></a></h2>
<p>You can perform the following tasks without stopping the replication agent:</p>
<ul>
<li>
<p>Create, alter or drop a user. These statements are replicated.<a id="sthref630"></a><a id="sthref631"></a><a id="sthref632"></a></p>
</li>
<li>
<p>Grant or revoke privileges from a user. These statements are replicated.<a id="sthref633"></a><a id="sthref634"></a></p>
</li>
<li>
<p>Add a subscriber to the replication scheme. See <a href="#BGBGJHGE">&#34;Creating and adding a subscriber database to a classic replication scheme&#34;</a>.</p>
</li>
<li>
<p>Add a PL/SQL object to the master database and implement its replication on subscribers. See <a href="#BABDHICJ">&#34;Adding a PL/SQL object to an existing classic replication scheme&#34;</a>.</p>
</li>
</ul>
<p>Use <code>ALTER REPLICATION</code> to alter the classic replication scheme on the master and subscriber databases. Any alterations on the master database must also be made on its subscribers.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must have the <code>ADMIN</code> privilege to use the <code>ALTER REPLICATION</code> statement.</div>
<p>Most <code>ALTER REPLICATION</code> operations are supported only when the replication agent is stopped (<code>ttAdmin</code> <code>-repStop</code>). The procedure for <code>ALTER REPLICATION</code> operations that require the replication agents to be stopped is:</p>
<ol>
<li>
<p>Use the <a id="sthref635"></a><code>ttRepStop</code> built-in procedure or <code>ttAdmin</code> <code>-repStop</code> to stop the replication agent for the master and subscriber databases. While the replication agents are stopped, changes to the master database are stored in the log.</p>
</li>
<li>
<p>Issue the same <code>ALTER REPLICATION</code> statement on both master and subscriber databases.</p>
</li>
<li>
<p>Use the<a id="sthref636"></a> <code>ttRepStart</code> built-in procedure or <code>ttAdmin</code> <code>-repStart</code> to restart the replication agent for the master and subscriber databases. The changes stored in the master database log are sent to the subscriber database.</p>
</li>
</ol>
<p>If you use <code>ALTER REPLICATION</code> to change a classic replication scheme that specifies a <code>DATASTORE</code> element, then:</p>
<ul>
<li>
<p>You cannot use <code>SET NAME</code> to change the name of the <code>DATASTORE</code> element.</p>
</li>
<li>
<p>You cannot use <code>SET CHECK CONFLICTS</code> to enable conflict resolution.</p>
</li>
</ul>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#BGBIHBCB">Adding a table or sequence to an existing classic replication scheme</a></p>
</li>
<li>
<p><a href="#BABDHICJ">Adding a PL/SQL object to an existing classic replication scheme</a></p>
</li>
<li>
<p><a href="#BGBHHIHA">Adding a DATASTORE element to an existing classic replication scheme</a></p>
</li>
<li>
<p><a href="#BGBBECJH">Dropping a table or sequence from a classic replication scheme</a></p>
</li>
<li>
<p><a href="#BGBGJHGE">Creating and adding a subscriber database to a classic replication scheme</a></p>
</li>
<li>
<p><a href="#BGBCJAII">Dropping a subscriber database from a classic replication scheme</a></p>
</li>
<li>
<p><a href="#BGBECGEI">Changing a TABLE or SEQUENCE element name in a classic replication scheme</a></p>
</li>
<li>
<p><a href="#BGBIAADA">Replacing a master database in a classic replication scheme</a></p>
</li>
<li>
<p><a href="#BGBJGBFH">Eliminating conflict detection in a classic replication scheme</a></p>
</li>
<li>
<p><a href="#BGBIGJCG">Eliminating the return receipt service in a classic replication scheme</a></p>
</li>
<li>
<p><a href="#BGBCEFBA">Changing the port number for a classic replication scheme</a></p>
</li>
<li>
<p><a href="#BGBGFIIE">Changing the replication route</a></p>
</li>
<li>
<p><a href="#CHDEIIDE">Changing the log failure threshold</a></p>
</li>
</ul>
<a id="BGBIHBCB"></a>
<div id="TTREP484" class="sect2">
<h3 class="sect2">Adding a table or sequence to an existing classic replication scheme<a id="sthref637"></a><a id="sthref638"></a></h3>
<p>There are two ways to add a table or sequence to an existing classic replication scheme:</p>
<ul>
<li>
<p>When the element level of the classic replication scheme is <code>TABLE</code> or <code>SEQUENCE</code>, use the <code>ALTER REPLICATION</code> statement with the <code>ADD ELEMENT</code> clause to add a table or sequence. See <a href="#BGBGJIDJ">Example 10-1</a>.</p>
</li>
<li>
<p>When the element level of the classic replication scheme is <code>DATASTORE</code>, use the <code>ALTER REPLICATION</code> statement with the <a id="sthref639"></a><code>ALTER ELEMENT</code> clause to include a table or sequence. See <a href="#BGBGCFFE">Example 10-2</a>.</p>
</li>
</ul>
<div id="TTREP485" class="example">
<p class="titleinexample"><a id="BGBGJIDJ"></a>Example 10-1 Adding a sequence and a table to a classic replication scheme</p>
<p>This example uses the classic replication scheme <code>r1</code> that was defined in <a href="design.htm#CHDGIFDF">Example 9-10</a>. It alters replication scheme <code>r1</code> to add sequence <code>seq</code> and table <code>westleads</code>, which are updated on database <code>westds</code> and replicated to database <code>eastds</code>.</p>
<pre>ALTER REPLICATION r1
  ADD ELEMENT elem_seq SEQUENCE seq
    MASTER westds ON &#34;westcoast&#34;
    SUBSCRIBER eastds ON &#34;eastcoast&#34;
  ADD ELEMENT elem_westleads TABLE westleads
    MASTER westds ON &#34;westcoast&#34;
    SUBSCRIBER eastds ON &#34;eastcoast&#34;;
</pre></div>
<!-- class="example" -->
<div id="TTREP486" class="example">
<p class="titleinexample"><a id="BGBGCFFE"></a>Example 10-2 Adding a sequence and a table to a DATASTORE element</p>
<p>Add the sequence <code>my.seq</code> and the table <code>my.tab1</code> to the <code>ds1</code> <code>DATASTORE</code> element in <code>my.rep1</code> replication scheme.</p>
<pre>ALTER REPLICATION my.rep1
  ALTER ELEMENT ds1 DATASTORE
    INCLUDE SEQUENCE my.seq
  ALTER ELEMENT ds1 DATASTORE
    INCLUDE TABLE my.tab1;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BABDHICJ"></a>
<div id="TTREP745" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Adding a PL/SQL object to an existing classic replication scheme<a id="sthref640"></a></h3>
<p>To add a new PL/SQL procedure, package, package body or function to an existing replication scheme, complete these tasks:</p>
<ol>
<li>
<p>Create the PL/SQL object on a master database. The <code>CREATE</code> statement is not replicated to subscribers.</p>
</li>
<li>
<p>Create the PL/SQL object on the subscribers</p>
</li>
<li>
<p>Grant privileges to the new PL/SQL object on the master database. The <code>GRANT</code> statement is replicated to the subscribers.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BGBHHIHA"></a>
<div id="TTREP487" class="sect2">
<h3 class="sect2">Adding a <a id="sthref641"></a><a id="sthref642"></a>DATASTORE element to an existing classic replication scheme</h3>
<p>You can add a <code>DATASTORE</code> element to an existing classic replication scheme by using the <code>ALTER REPLICATION</code> statement with the <code>ADD ELEMENT</code> clause. All tables except temporary tables, materialized views, and nonmaterialized views are included in the replication scheme if you do not use the <code>INCLUDE</code> or <code>EXCLUDE</code> clauses. See <a href="#BABCGHDG">&#34;Including tables or sequences when you add a DATASTORE element&#34;</a> and <a href="#BABJIEHE">&#34;Excluding a table or sequence when you add a DATASTORE element&#34;</a>.</p>
<div id="TTREP488" class="example">
<p class="titleinexample"><a id="sthref643"></a>Example 10-3 Adding a DATASTORE element to a classic replication scheme</p>
<p>Add a <code>DATASTORE</code> element to an existing classic replication scheme.</p>
<pre>ALTER REPLICATION my.rep1
  ADD ELEMENT ds1 DATASTORE
       MASTER rep2
       SUBSCRIBER rep1, rep3;
</pre></div>
<!-- class="example" -->
<a id="BABCGHDG"></a>
<div id="TTREP489" class="sect3">
<h4 class="sect3">Including tables or sequences when you add a DATASTORE element<a id="sthref644"></a></h4>
<p>You can restrict replication to specific tables or sequences when you add a database to an existing classic replication scheme. Use the <code>ALTER REPLICATION</code> statement with the <code>ADD ELEMENT</code> clause and the <code><a id="sthref645"></a>INCLUDE TABLE</code> clause or <code><a id="sthref646"></a>INCLUDE SEQUENCE</code> clause. You can have one <code>INCLUDE</code> clause for each table or sequence in the same <code>ALTER REPLICATION</code> statement.</p>
<div id="TTREP490" class="example">
<p class="titleinexample"><a id="sthref647"></a>Example 10-4 Including a table and sequence in a DATASTORE element</p>
<p>Add the <code>ds1</code> <code>DATASTORE</code> element to <code>my.rep1</code> replication scheme. Include the table <code>my.tab2</code> and the sequence <code>my.seq</code> in the <code>DATASTORE</code> element.</p>
<pre>ALTER REPLICATION my.rep1
ADD ELEMENT ds1 DATASTORE
MASTER rep2
SUBSCRIBER rep1, rep3
INCLUDE TABLE my.tab2
INCLUDE SEQUENCE my.seq;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" -->
<a id="BABJIEHE"></a>
<div id="TTREP491" class="sect3">
<h4 class="sect3">Excluding a table or sequence when you add a DATASTORE element</h4>
<p>You can exclude <a id="sthref648"></a>tables or sequences when you add a <code>DATASTORE</code> element to an existing classic replication scheme. Use the <code>ALTER REPLICATION</code> statement with the <code>ADD ELEMENT</code> clause and the <a id="sthref649"></a><code>EXCLUDE TABLE</code> clause or <a id="sthref650"></a><code>EXCLUDE SEQUENCE</code> clause. You can have one <code>EXCLUDE</code> clause for each table or sequence in the same <code>ALTER REPLICATION</code> statement.</p>
<div id="TTREP492" class="example">
<p class="titleinexample"><a id="sthref651"></a>Example 10-5 Excluding a table or sequence from a DATASTORE element</p>
<p>Add the <code>ds2</code> <code>DATASTORE</code> element to a replication scheme, but exclude the table <code>my.tab1</code> and the sequence <code>my.seq</code>.</p>
<pre>ALTER REPLICATION my.rep1
ADD ELEMENT ds2 DATASTORE
MASTER rep2
SUBSCRIBER rep1
EXCLUDE TABLE my.tab1
EXCLUDE SEQUENCE my.seq;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BGBBECJH"></a>
<div id="TTREP493" class="sect2">
<h3 class="sect2">Dropping a <a id="sthref652"></a><a id="sthref653"></a>table or sequence from a classic replication scheme</h3>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#BGBGHHDD">Dropping a table or sequence that is replicated as part of a DATASTORE element</a></p>
</li>
<li>
<p><a href="#BGBBDEGJ">Dropping a table or sequence that is replicated as a TABLE or SEQUENCE element</a></p>
</li>
</ul>
<a id="BGBGHHDD"></a>
<div id="TTREP494" class="sect3">
<h4 class="sect3">Dropping a table or sequence that is replicated as part of a DATASTORE element</h4>
<p>To drop a table or sequence that is part of a classic replication scheme at the <code>DATASTORE</code> level, complete the following tasks:</p>
<ol>
<li>
<p>Stop the replication agent.</p>
</li>
<li>
<p>Exclude the table or sequence from the <code>DATASTORE</code> element in the classic replication scheme.</p>
</li>
<li>
<p>Drop the table or sequence.</p>
</li>
</ol>
<p>If you have more than one <code>DATASTORE</code> element that contains the table or sequence, then you must exclude the table or sequence from each element before you drop it.</p>
<div id="TTREP495" class="example">
<p class="titleinexample"><a id="sthref654"></a>Example 10-6 Excluding a table from a DATASTORE element and then dropping the table</p>
<p>Exclude the table <code>my.tab1</code> from the <code>ds1</code> <code>DATASTORE</code> element in the <code>my.rep1</code> replication scheme. Then drop the table.</p>
<pre>ALTER REPLICATION my.rep1
  ALTER ELEMENT ds1 DATASTORE
    EXCLUDE TABLE my.tab1;
DROP TABLE my.tab1;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" -->
<a id="BGBBDEGJ"></a>
<div id="TTREP496" class="sect3">
<h4 class="sect3">Dropping a table or sequence that is replicated as a TABLE or SEQUENCE element</h4>
<p>To drop a table that is part of a classic replication scheme at the <code>TABLE</code> or <code>SEQUENCE</code> level, complete the following tasks:</p>
<ol>
<li>
<p>Stop the replication agent.</p>
</li>
<li>
<p>Drop the element from the classic replication scheme.</p>
</li>
<li>
<p>Drop the table or sequence.</p>
</li>
</ol>
<div id="TTREP497" class="example">
<p class="titleinexample"><a id="sthref655"></a>Example 10-7 Dropping an element from a classic replication scheme and then dropping the sequence</p>
<p>Drop the <code>SEQUENCE</code> element <code>elem_seq</code> from the classic replication scheme <code>r1</code>. Then drop the sequence <code>seq</code>.</p>
<pre>ALTER REPLICATION r1
  DROP ELEMENT elem_seq;
DROP SEQUENCE seq;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BGBGJHGE"></a>
<div id="TTREP498" class="sect2">
<h3 class="sect2">Creating and adding a subscriber database to a classic replication scheme<a id="sthref656"></a></h3>
<p>You can add a new subscriber database while the replication agents are running. To add a database to a classic replication scheme, do the following:</p>
<ol>
<li>
<p>Make sure the new subscriber database does not exist.</p>
</li>
<li>
<p>Apply the appropriate statements to all participating databases:</p>
<pre>ALTER REPLICATION ...
  ALTER ELEMENT ...
    ADD SUBSCRIBER ...
</pre></li>
<li>
<p>On the source database (the master), create a user and grant the <code>ADMIN</code> privilege to the user:</p>
<pre>CREATE USER ttuser IDENTIFIED BY ttuser;
User created.

GRANT admin TO ttuser;
</pre></li>
<li>
<p>Logged in as the instance administrator, run the <code>ttRepAdmin</code> <code>-duplicate</code> command to copy the contents of the master database to the newly created subscriber. You can use the <code>-setMasterRepStart</code> option to ensure that any updates made to the master after the duplicate operation has started are also copied to the subscriber.</p>
</li>
<li>
<p>Start the replication agent on the newly created database (<code>ttAdmin</code> <code>-repStart</code>).</p>
</li>
</ol>
<div id="TTREP499" class="example">
<p class="titleinexample"><a id="sthref657"></a>Example 10-8 Adding a subscriber to a replicated table</p>
<p>This example alters the <code>r1</code> replication scheme to add a subscriber (<code>backup3</code>) to the <code>westleads</code> table (step 2 above):</p>
<pre>ALTER REPLICATION r1
  ALTER ELEMENT elem_westleads
    ADD SUBSCRIBER backup3 ON &#34;backupserver&#34;;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BGBCJAII"></a>
<div id="TTREP500" class="sect2">
<h3 class="sect2">Dropping a subscriber database from a classic replication scheme<a id="sthref658"></a></h3>
<p>Stop the replication agent before you drop a subscriber database.</p>
<p>This example alters the <code>r1</code> replication scheme to drop the <code>backup3</code> subscriber for the <code>westleads</code> table:</p>
<div id="TTREP501" class="example">
<p class="titleinexample"><a id="sthref659"></a>Example 10-9 Dropping a subscriber for a replicated table</p>
<pre>ALTER REPLICATION r1
  ALTER ELEMENT elem_westleads
    DROP SUBSCRIBER backup3 ON &#34;backupserver&#34;;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BGBECGEI"></a>
<div id="TTREP502" class="sect2">
<h3 class="sect2">Changing a TABLE or SEQUENCE element name in a classic replication scheme<a id="sthref660"></a><a id="sthref661"></a></h3>
<p>Stop the replication agent before you change a <code>TABLE</code> or <code>SEQUENCE</code> element name in a classic replication scheme.</p>
<p>Change the element name of the <code>westleads</code> table from <code>elem_westleads</code> to <code>newelname</code>:</p>
<div id="TTREP503" class="example">
<p class="titleinexample"><a id="sthref662"></a>Example 10-10 Changing a table name</p>
<pre>ALTER REPLICATION r1
  ALTER ELEMENT Eelem_westleads
    SET NAME newelname;
</pre></div>
<!-- class="example" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot use the <code>SET NAME</code> clause to change the name of a <code>DATASTORE</code> element.</div>
</div>
<!-- class="sect2" -->
<a id="BGBIAADA"></a>
<div id="TTREP504" class="sect2">
<h3 class="sect2">Replacing a master database in a classic replication scheme</h3>
<p>Stop the replication agent before you replace a master database in a classic replication scheme.</p>
<p>In this example, <code>newwestds</code> is made the new master for all elements currently configured for the master, <code>westds</code>:</p>
<div id="TTREP505" class="example">
<p class="titleinexample"><a id="sthref663"></a>Example 10-11 Replacing a master database in a classic replication scheme</p>
<pre>ALTER REPLICATION r1
  ALTER ELEMENT * IN westds
    SET MASTER newwestds;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BGBJGBFH"></a>
<div id="TTREP506" class="sect2">
<h3 class="sect2">Eliminating conflict detection in a classic replication scheme</h3>
<p>In this example, conflict detection configured by the <code>CHECK CONFLICTS</code> clause in the classic replication scheme shown in <a href="conflict.htm#BABEADAD">Example 13-2</a> is eliminated for the <code>elem_accounts_1</code> table:</p>
<div id="TTREP507" class="example">
<p class="titleinexample"><a id="sthref664"></a>Example 10-12 Eliminating conflict detection for a table</p>
<pre>ALTER REPLICATION r1
  ALTER ELEMENT elem_accounts_1
    SET NO CHECK;
</pre>
<p>See <a href="conflict.htm#BABGABJH">Chapter 13, &#34;Resolving Replication Conflicts&#34;</a> for a detailed discussion on conflict checking.</p>
</div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BGBIGJCG"></a>
<div id="TTREP508" class="sect2">
<h3 class="sect2">Eliminating the return receipt service in a classic replication scheme</h3>
<p>In this example, the return receipt service is eliminated for the first subscriber in the classic replication scheme shown in <a href="design.htm#CHDGIFDF">Example 9-10</a>:</p>
<div id="TTREP509" class="example">
<p class="titleinexample"><a id="BABHIBIH"></a>Example 10-13 Eliminating return receipt service for a subscriber</p>
<pre>ALTER REPLICATION r1
  ALTER ELEMENT elem_waccounts
    ALTER SUBSCRIBER eastds ON &#34;eastcoast&#34;
      SET NO RETURN;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BGBCEFBA"></a>
<div id="TTREP510" class="sect2">
<h3 class="sect2">Changing the port number for a classic replication scheme</h3>
<p>The <span class="italic">port number</span> is the TCP/IP port number on which the replication agent of a subscriber database accepts connection requests from the master replication agent. See <a href="attrib.htm#CHDFGAEC">&#34;Port assignments&#34;</a> for details on how to assign port to the replication agents.</p>
<p>In this example, the <code>r1</code> replication scheme is altered to change the port number of the <code>eastds</code> to 22251:</p>
<div id="TTREP511" class="example">
<p class="titleinexample"><a id="sthref665"></a>Example 10-14 Changing a port number for a database</p>
<pre>ALTER REPLICATION r1
  ALTER STORE eastds ON &#34;eastcoast&#34;
    SET PORT 22251;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BGBGFIIE"></a>
<div id="TTREP512" class="sect2">
<h3 class="sect2">Changing the replication route</h3>
<p>If a replication host has multiple network interfaces, you may specify which interfaces are used for replication traffic using the <code>ROUTE</code> clause. If you need to change which interfaces are used by replication, you may do so by dropping and adding IP addresses from or to a <code>ROUTE</code> clause. See <a href="attrib.htm#CHDBICJF">&#34;Configuring network interfaces with the ROUTE clause&#34;</a> for more information.</p>
</div>
<!-- class="sect2" -->
<a id="CHDEIIDE"></a>
<div id="TTREP660" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Changing the log failure threshold<a id="sthref666"></a></h3>
<p>Use the <code>FAILTHRESHOLD</code> attribute of the <code>STORE</code> parameter to reset the log failure threshold. Stop the replication agents before using <code>ALTER REPLICATION</code> to define a new threshold value, and then restart the replication agents.</p>
<p>See <a href="attrib.htm#CHDBACFH">&#34;Setting the transaction log failure threshold&#34;</a> for more information about the log failure threshold.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BGBBEDIF"></a>
<div id="TTREP514" class="sect1">
<h2 class="sect1">Altering a replicated table in a classic replication scheme<a id="sthref667"></a><a id="sthref668"></a></h2>
<p>You can use <code>ALTER TABLE ... ADD COLUMN</code> or <code>ALTER TABLE ... DROP COLUMN</code> statements to add or drop columns on the master database in a classic replication scheme. The <code>ALTER TABLE</code> operation is replicated to alter the subscriber databases. These are the only <code>ALTER TABLE</code> clauses that are replicated in a classic replication scheme.</p>
<p>If you use <code>ALTER TABLE</code> on a database configured for bidirectional replication, first stop updates to the table on all of the replicated databases and confirm all replicated updates to the table have been received by the databases before issuing the <code>ALTER TABLE</code> statement. Do not resume updates until the <code>ALTER TABLE</code> operation has been replicated to all databases. This is necessary to ensure that there are no write operations until after the table is altered on all databases.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can use the <code>ttRepSubscriberWait</code> built-in procedure or monitoring tools described in <a href="monitor.htm#CHDFJDCJ">Chapter 12, &#34;Monitoring Replication&#34;</a> to confirm the updates have been received and committed on the databases.</div>
<p>Also, if you are executing a number of successive <code>ALTER TABLE</code> operations on a database, you should only proceed with the next <code>ALTER TABLE</code> after you have confirmed the previous <code>ALTER TABLE</code> has reached all of the subscribers.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can use the <code>ALTER TABLE</code> statement to change <a id="sthref669"></a>default column values, but the <code>ALTER TABLE</code> statement is not replicated. Thus, default column values need not be identical on all nodes.</div>
</div>
<!-- class="sect1" -->
<a id="BGBCGIDJ"></a>
<div id="TTREP515" class="sect1">
<h2 class="sect1">Truncating a replicated <a id="sthref670"></a><a id="sthref671"></a>table in a classic replication scheme</h2>
<p>You can use <code>TRUNCATE TABLE</code> to delete all of the rows of a table without dropping the table itself. Truncating a table is faster than using a <code>DELETE FROM</code> table statement.</p>
<p>Truncate operations on replicated tables are replicated and result in truncating the table on the subscriber database. Unlike delete operations, however, the individual rows are not deleted. Even if the contents of the tables do not match at the time of the truncate operation, the rows on the subscriber database are deleted anyway.</p>
<p>The <code>TRUNCATE</code> statement replicates to the subscriber, even when no rows are operated upon.</p>
<p>When tables are being replicated with timestamp conflict checking enabled, conflicts are not reported.</p>
</div>
<!-- class="sect1" -->
<a id="BGBHEFEH"></a>
<div id="TTREP516" class="sect1">
<h2 class="sect1">Dropping a classic replication scheme</h2>
<p>You can use the <a id="sthref672"></a><a id="sthref673"></a><code>DROP REPLICATION</code> statement to remove a replication scheme from a database. You cannot drop a classic replication scheme when master catchup is required unless it is the only classic replication scheme in the database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must have the <code>ADMIN</code> privilege to use the <code>DROP REPLICATION</code> statement.</div>
<p>You must stop the replication agent before you drop a classic replication scheme.</p>
<div id="TTREP517" class="example">
<p class="titleinexample"><a id="sthref674"></a>Example 10-15 Dropping a replication scheme</p>
<p>To remove the <code>repscheme</code> replication scheme from a database, enter the following:</p>
<pre>DROP REPLICATION repscheme;
</pre>
<p>If you are dropping replicated tables, you must drop the classic replication scheme <span class="italic">before</span> dropping the replicated tables. Otherwise, you receive an error indicating that you have attempted to drop a replicated table or index.</p>
</div>
<!-- class="example" -->
<div id="TTREP518" class="example">
<p class="titleinexample"><a id="sthref675"></a>Example 10-16 Removing a table and a classic replication scheme from a database</p>
<p>To remove the <code>tab</code> table and <code>repscheme</code> replication scheme from a database, enter the following:</p>
<pre>DROP REPLICATION repscheme;
DROP TABLE tab;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5803">
<tr>
<td class="cellalignment5812">
<table class="cellalignment5808">
<tr>
<td class="cellalignment5807"><a href="design.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5807"><a href="setup.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2012, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5814">
<table class="cellalignment5806">
<tr>
<td class="cellalignment5807"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5807"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5807"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5807"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5807"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5807"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>