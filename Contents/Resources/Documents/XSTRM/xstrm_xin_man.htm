<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-114717"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Managing%20XStream%20In"></a><title>Managing XStream In</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="You can manage an XStream In configuration."/>
<meta name="keywords" content="XStream, managing, XStream In, apply user, ALTER_INBOUND procedure, inbound servers, changing, eager errors, XStream Out, dropping components, DROP_INBOUND procedure, dropping"/>
<meta name="dcterms.created" content="2017-06-13T10:02:49Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database XStream Guide"/>
<meta name="dcterms.identifier" content="E53119-03"/>
<meta name="dcterms.isVersionOf" content="XSTRM"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2009, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="xstrm_xin_config.htm" title="Previous" type="text/html"/>
<link rel="Next" href="xstrm_xin_mon.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E53119-03.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD"></a> <span id="PAGE" style="display:none;">17/24</span> <!-- End Header -->
<a id="XSTRM72715"></a>
<h1 id="XSTRM-GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD" class="sect1"><span class="enumeration_chapter">10</span> Managing XStream In</h1>
<div>
<p>You can manage an XStream In configuration.</p>
<p>This chapter does not cover using rules, rule sets, or rule-based transformations with inbound servers. By default, an inbound server does not use rules or rule sets. Therefore, an inbound server applies all of the logical change records (LCRs) sent to it by an XStream client application. However, to filter the LCRs sent to an inbound server, you can add rules and rule sets to an inbound server using the <code class="codeph">DBMS_XSTREAM_ADM</code> and <code class="codeph">DBMS_RULE_ADM</code> packages. You can also specify rule-based transformations using the <code class="codeph">DBMS_XSTREAM_ADM</code> package.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="xstrm_xin_man.htm#GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A">About Managing XStream In</a></strong><br/>
You can modify the database components that are part of an XStream In configuration, such as inbound servers.</li>
<li class="ulchildlink"><strong><a href="xstrm_xin_man.htm#GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE">Starting an Inbound Server</a></strong><br/>
A inbound server must be enabled for it to receive logical change records (LCRs) from an XStream client application and apply the LCRs. You run the <code class="codeph">START_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to start an existing inbound server.</li>
<li class="ulchildlink"><strong><a href="xstrm_xin_man.htm#GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B">Stopping an Inbound Server</a></strong><br/>
You run the <code class="codeph">STOP_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to stop an existing inbound server. You might stop an inbound server when you are troubleshooting a problem in an XStream configuration.</li>
<li class="ulchildlink"><strong><a href="xstrm_xin_man.htm#GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5">Setting an Apply Parameter for an Inbound Server</a></strong><br/>
Apply parameters control the way an inbound server operates. You set an apply parameter for an inbound server using the <code class="codeph">SET_PARAMETER</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package.</li>
<li class="ulchildlink"><strong><a href="xstrm_xin_man.htm#GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4">Changing the Apply User for an Inbound Server</a></strong><br/>
An inbound server applies LCRs in the security domain of its apply user, and the client application must attach to the inbound server as the apply user. You can change the apply user for an inbound server with the <code class="codeph">ALTER_INBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package.</li>
<li class="ulchildlink"><strong><a href="xstrm_xin_man.htm#GUID-52AE0882-647F-4C68-89DD-E1D658569BA7">Managing Apply Errors</a></strong><br/>
Apply errors result when an inbound server tries to apply an LCR, and an error is raised.</li>
<li class="ulchildlink"><strong><a href="xstrm_xin_man.htm#GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4">Dropping Components in an XStream In Configuration</a></strong><br/>
You can drop an inbound server with the <code class="codeph">DROP_INBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package.</li>
</ul>
<div class="infoboxnotealso" id="GUID-2B8DC100-B638-4AAA-8501-B322E3C72FDD__GUID-F8B9D8F9-E68D-4A5B-94FB-468E8EFA6CFE">
<p class="notep1">See Also:</p>
<p><a class="olink STRMS006" target="_blank" href="../STRMS/strms_rules.htm#STRMS006"><span><cite>Oracle Streams Concepts and Administration</cite></span></a> for information about using rules, rule sets, and rule-based transformations</p>
</div>
</div>
<a id="XSTRM72882"></a>
<div class="props_rev_3"><a id="GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A"></a>
<h2 id="XSTRM-GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A" class="sect2"><span class="enumeration_section">10.1</span> About Managing XStream In</h2>
<div>
<p>You can modify the database components that are part of an XStream In configuration, such as inbound servers.</p>
<p>The main interface for managing XStream In database components is PL/SQL. Specifically, use the following Oracle supplied PL/SQL packages to manage XStream In:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">DBMS_XSTREAM_ADM</code></p>
<p>The <code class="codeph">DBMS_XSTREAM_ADM</code> package is the main package for managing XStream In. This package includes subprograms that enable you to configure, modify, or drop inbound servers. This package also enables you modify the rules, rule sets, and rule-based transformations used by inbound servers.</p>
<p>See <a class="olink ARPLS73643" target="_blank" href="../ARPLS/d_xstrm_adm.htm#ARPLS73643"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for detailed information about this package.</p>
</li>
<li>
<p><code class="codeph">DBMS_XSTREAM_AUTH</code></p>
<p>The <code class="codeph">DBMS_XSTREAM_AUTH</code> package enables you to configure and modify XStream administrators.</p>
<p>See <span class="q">&#34;<a href="xstrm_xin_config.htm#GUID-445DEEE0-6449-490B-8264-87CDB0183E1F" title="An XStream administrator configures and manages XStream components in an XStream In environment.">Configure an XStream Administrator</a>&#34;</span> for information about using this package to create an XStream administrator. See <a class="olink ARPLS73647" target="_blank" href="../ARPLS/d_xstrm_auth.htm#ARPLS73647"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for detailed information about this package.</p>
</li>
<li>
<p><code class="codeph">DBMS_APPLY_ADM</code></p>
<p>The <code class="codeph">DBMS_APPLY_ADM</code> package enables you modify inbound servers.</p>
<p>See <a class="olink ARPLS300" target="_blank" href="../ARPLS/d_apply.htm#ARPLS300"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for detailed information about this package.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-640BBF15-C680-489D-BE08-F9A4DF29D16A__GUID-6B0F9B34-4AFA-42DF-BD5C-8E057A5B3E61">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xstrm_xin_cncpt.htm#GUID-D2C787E8-E16F-4286-921E-93195265E4F7" title="Become familiar with the concepts related to XStream In.">XStream In Concepts</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="xstrm_xin_config.htm#GUID-B0F20D2D-7F63-4CE6-B15F-435B5A3DFBED" title="You can configure the Oracle Database components that are used by XStream.">Configuring XStream In</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="xstrm_xin_mon.htm#GUID-46B54351-BA11-412B-A23F-92F44739A8F6" title="You can monitor an XStream In configuration.">Monitoring XStream In</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="XSTRM72884"></a><a id="XSTRM72883"></a>
<div class="props_rev_3"><a id="GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE"></a>
<h2 id="XSTRM-GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE" class="sect2"><span class="enumeration_section">10.2</span> Starting an Inbound Server</h2>
<div>
<p>A inbound server must be enabled for it to receive logical change records (LCRs) from an XStream client application and apply the LCRs. You run the <code class="codeph">START_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to start an existing inbound server.</p>
<div class="section">
<p class="subhead2">To start an inbound server:</p>
<ol>
<li>
<p>Connect to the inbound server database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the <code class="codeph">START_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package, and specify the inbound server for the <code class="codeph">apply_name</code> parameter.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p>The following example starts an inbound server named <code class="codeph">xin</code>.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE__GUID-13ECC923-4A79-4B03-81CC-6BC832BD0EDE">
<p class="titleinexample">Example 10-1 Starting an Outbound Server Named xout</p>
<pre dir="ltr">BEGIN
  DBMS_APPLY_ADM.START_APPLY(
    apply_name =&gt; &#39;xin&#39;);
END;
/
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE__GUID-2F225028-543A-4999-968C-8C75A65AE0B9">
<p class="notep1">See Also:</p>
<p>The Oracle Enterprise Manager Cloud Control online help for instructions about starting an apply process or an inbound server with Oracle Enterprise Manager Cloud Control</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="XSTRM72886"></a><a id="XSTRM72885"></a>
<div class="props_rev_3"><a id="GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B"></a>
<h2 id="XSTRM-GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B" class="sect2"><span class="enumeration_section">10.3</span> Stopping an Inbound Server</h2>
<div>
<p>You run the <code class="codeph">STOP_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to stop an existing inbound server. You might stop an inbound server when you are troubleshooting a problem in an XStream configuration.</p>
<div class="section">
<p class="subhead2">To stop an inbound server:</p>
<ol>
<li>
<p>Connect to the inbound server database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the <code class="codeph">STOP_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package, and specify the inbound server for the <code class="codeph">apply_name</code> parameter.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p>The following example stops an inbound server named <code class="codeph">xin</code>.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B__GUID-E4817B7B-8096-407E-BFE0-9F2042FA0A1A">
<p class="titleinexample">Example 10-2 Stopping an Inbound Server Named xout</p>
<pre dir="ltr">BEGIN
  DBMS_APPLY_ADM.STOP_APPLY(
    apply_name =&gt; &#39;xin&#39;);
END;
/
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-E7E63AE8-46C8-4F65-A11C-55B04F044E9B__GUID-92BB6399-D0EB-4C09-A190-230E79782679">
<p class="notep1">See Also:</p>
<p>The Oracle Enterprise Manager Cloud Control online help for instructions about stopping an apply process or an inbound server with Oracle Enterprise Manager Cloud Control</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="XSTRM72888"></a><a id="XSTRM72887"></a>
<div class="props_rev_3"><a id="GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5"></a>
<h2 id="XSTRM-GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5" class="sect2"><span class="enumeration_section">10.4</span> Setting an Apply Parameter for an Inbound Server</h2>
<div>
<p>Apply parameters control the way an inbound server operates. You set an apply parameter for an inbound server using the <code class="codeph">SET_PARAMETER</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package.</p>
<div class="section">
<p class="subhead2">To set an inbound server apply parameter:</p>
<ol>
<li>
<p>Connect to the outbound server database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the <code class="codeph">SET_PARAMETER</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package, and specify the following parameters:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">streams_name</code> - Specify the name of the inbound server.</p>
</li>
<li>
<p><code class="codeph">streams_type</code> - Specify <code class="codeph">apply</code>.</p>
</li>
<li>
<p><code class="codeph">parameter</code> - Specify the name of the apply parameter.</p>
</li>
<li>
<p><code class="codeph">value</code> - Specify the value for the apply parameter.</p>
</li>
</ul>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p>The following example sets the <code class="codeph">parallelism</code> parameter for an inbound server named <code class="codeph">xin</code> to <code class="codeph">4</code>.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5__GUID-5EAA9BA2-148C-4125-B212-B5176885B28A">
<p class="titleinexample">Example 10-3 Setting an Outbound Server Parameter</p>
<pre dir="ltr">BEGIN
  DBMS_XSTREAM_ADM.SET_PARAMETER(
    streams_name =&gt; &#39;xin&#39;,
    streams_type =&gt; &#39;apply&#39;,
    parameter    =&gt; &#39;parallelism&#39;,
    value        =&gt; &#39;4&#39;);
END;
/
</pre>
<div class="infobox-note" id="GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5__GUID-0503D6FB-42FD-4EFB-B351-807DF018EC49">
<p class="notep1">Note:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">value</code> parameter is always entered as a <code class="codeph">VARCHAR2</code> value, even if the parameter value is a number.</p>
</li>
<li>
<p>If the <code class="codeph">value</code> parameter is set to <code class="codeph">NULL</code> or is not specified, then the parameter is set to its default value.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso" id="GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5__GUID-6454E987-A745-4789-B494-0DF73B2D7CBA">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p>The Oracle Enterprise Manager Cloud Control online help for instructions about setting an apply parameter with Oracle Enterprise Manager Cloud Control</p>
</li>
<li>
<p><a class="olink ARPLS314" target="_blank" href="../ARPLS/d_apply.htm#ARPLS314"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about apply parameters</p>
</li>
</ul>
</div>
</div>
<!-- class="example" --></div>
</div>
<a id="XSTRM72605"></a><a id="XSTRM1591"></a>
<div class="props_rev_3"><a id="GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4"></a>
<h2 id="XSTRM-GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4" class="sect2"><span class="enumeration_section">10.5</span> Changing the Apply User for an Inbound Server</h2>
<div>
<p>An inbound server applies LCRs in the security domain of its apply user, and the client application must attach to the inbound server as the apply user. You can change the apply user for an inbound server with the <code class="codeph">ALTER_INBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package.</p>
<div class="section">
<p>You can change the apply user when a client application must connect to an inbound server as a different user or when you want to apply changes using the privileges associated with a different user. Ensure that the apply user is granted the required privileges.</p>
<div class="infoboxnotealso" id="GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4__GUID-9A524E14-A8C5-4F7C-9AC7-E3C45AB789D7">
<p class="notep1">See Also:</p>
<p><a class="olink ARPLS70196" target="_blank" href="../ARPLS/d_xstrm_adm.htm#ARPLS70196"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the privileges required by an apply user.</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">To change the apply user for an inbound server:</p>
<ol>
<li>
<p>Connect to the inbound server database as the XStream administrator.</p>
<p>The XStream administrator must be granted the <code class="codeph">DBA</code> role to change the apply user for an inbound server.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the <code class="codeph">ALTER_INBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package, and specify the following parameters:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">server_name</code> - Specify the name of the inbound server.</p>
</li>
<li>
<p><code class="codeph">apply_user</code> - Specify the new apply user.</p>
</li>
</ul>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="example" id="GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4__GUID-12385B3F-A3DE-4C25-8004-B9F1EFA269EB">
<p class="titleinexample">Example 10-4 Changing the Apply User for an Inbound Server</p>
<p>To change the apply user to <code class="codeph">hr</code> for an inbound server named <code class="codeph">xin</code>, run the following procedure:</p>
<pre dir="ltr">BEGIN
  DBMS_XSTREAM_ADM.ALTER_INBOUND(
    server_name =&gt; &#39;xin&#39;,
    apply_user  =&gt; &#39;hr&#39;);
END;
/
</pre>
<div class="infoboxnotealso" id="GUID-C34DBCAC-F217-4752-856B-F4811BEA81F4__GUID-E0E7C1A6-3A5E-4E9B-A74F-0C2FC09F9DD7">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xstrm_xin_cncpt.htm#GUID-7020188C-8108-44E6-B6EF-9AFA035786C7" title="Understand security related to the client application and XStream components, as well as the privileges required by the apply user for an inbound server.">XStream In and Security</a>&#34;</span></p>
</li>
<li>
<p><a class="olink ARPLS70192" target="_blank" href="../ARPLS/d_xstrm_adm.htm#ARPLS70192"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="example" --></div>
</div>
<a id="XSTRM72889"></a>
<div class="props_rev_3"><a id="GUID-52AE0882-647F-4C68-89DD-E1D658569BA7"></a>
<h2 id="XSTRM-GUID-52AE0882-647F-4C68-89DD-E1D658569BA7" class="sect2"><span class="enumeration_section">10.6</span> Managing Apply Errors</h2>
<div>
<p>Apply errors result when an inbound server tries to apply an LCR, and an error is raised.</p>
<p>When an apply error occurs, the LCR that caused the error and all of the other LCRs in the same transaction are moved to the error queue.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="xstrm_xin_man.htm#GUID-FCD1CE21-0A24-4A32-B22A-784605237D86">Retrying Apply Error Transactions</a></strong><br/>
You can retry a specific error transaction, or you can retry all error transactions for an inbound server.</li>
<li class="ulchildlink"><strong><a href="xstrm_xin_man.htm#GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8">Deleting Apply Error Transactions</a></strong><br/>
You can delete a specific error transaction, or you can delete all error transactions for an inbound server.</li>
<li class="ulchildlink"><strong><a href="xstrm_xin_man.htm#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024">Managing Eager Errors Encountered by an Inbound Server</a></strong><br/>
As a performance optimization, an inbound server can use eager apply to begin to apply large transactions before it receives the commit LCR.</li>
</ul>
<div class="infoboxnotealso" id="GUID-52AE0882-647F-4C68-89DD-E1D658569BA7__GUID-6C973AE8-454B-4BFB-99CB-4467D83E8218">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xstrm_xin_cncpt.htm#GUID-5602248A-8DE3-495B-B1E9-F1F61CC798C3" title="The error queue contains all of the current apply errors for a database. If there are multiple inbound servers in a database, then the error queue contains the apply errors for each inbound server.">The Error Queue for an Inbound Server</a>&#34;</span></p>
</li>
<li>
<p>The Oracle Enterprise Manager Cloud Control online help for instructions on managing apply errors in Oracle Enterprise Manager Cloud Control</p>
</li>
</ul>
</div>
</div>
<a id="XSTRM72890"></a>
<div class="props_rev_3"><a id="GUID-FCD1CE21-0A24-4A32-B22A-784605237D86"></a>
<h3 id="XSTRM-GUID-FCD1CE21-0A24-4A32-B22A-784605237D86" class="sect3"><span class="enumeration_section">10.6.1</span> Retrying Apply Error Transactions</h3>
<div>
<p>You can retry a specific error transaction, or you can retry all error transactions for an inbound server.</p>
<p>Before you retry error transactions, you might need to make DML or DDL changes to database objects to correct the conditions that caused one or more apply errors.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="xstrm_xin_man.htm#GUID-046F8CA3-28DD-4C32-B156-0381B436D214">Retrying a Specific Apply Error Transaction</a></strong><br/>
When you retry an error transaction, you can execute it immediately or send the error transaction to a user procedure for modifications before executing it.</li>
<li class="ulchildlink"><strong><a href="xstrm_xin_man.htm#GUID-80868F53-ABE2-4B2C-8F3A-62B35BB872C4">Retrying All Error Transactions for an Inbound Server</a></strong><br/>
After you correct the conditions that caused all of the apply errors for an inbound server, you can retry all of the error transactions by running the <code class="codeph">EXECUTE_ALL_ERRORS</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.</li>
</ul>
<div class="infoboxnotealso" id="GUID-FCD1CE21-0A24-4A32-B22A-784605237D86__GUID-FD64B63F-20AD-4068-B5F3-D5B4E0419F05">
<p class="notep1">See Also:</p>
<p><a class="olink STREP120" target="_blank" href="../STREP/rep_tags.htm#STREP120"><span><cite>Oracle Streams Replication Administrator&#39;s Guide</cite></span></a>for more information about setting tag values generated by the current session</p>
</div>
</div>
<a id="XSTRM72891"></a>
<div class="props_rev_3"><a id="GUID-046F8CA3-28DD-4C32-B156-0381B436D214"></a>
<h4 id="XSTRM-GUID-046F8CA3-28DD-4C32-B156-0381B436D214" class="sect4"><span class="enumeration_section">10.6.1.1</span> Retrying a Specific Apply Error Transaction</h4>
<div>
<p>When you retry an error transaction, you can execute it immediately or send the error transaction to a user procedure for modifications before executing it.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="xstrm_xin_man.htm#GUID-20F05939-9C6A-46C1-8011-08AB8F30E025">Retrying a Specific Apply Error Transaction Without a User Procedure</a></strong><br/>
After you correct the conditions that caused an apply error, you can retry the transaction by running the <code class="codeph">EXECUTE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package without specifying a user procedure. In this case, the transaction executes without any custom processing.</li>
<li class="ulchildlink"><strong><a href="xstrm_xin_man.htm#GUID-1164A87A-9E6E-4F74-AFB9-67CEDD70BFE9">Retrying a Specific Apply Error Transaction With a User Procedure</a></strong><br/>
You can retry an error transaction by running the <code class="codeph">EXECUTE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package and specify a user procedure to modify one or more LCRs in the transaction before the transaction is executed.</li>
</ul>
<div class="infoboxnotealso" id="GUID-046F8CA3-28DD-4C32-B156-0381B436D214__GUID-E4622AF3-8A6A-4D94-A51F-DA509616D40F">
<p class="notep1">See Also:</p>
<p><a class="olink ARPLS326" target="_blank" href="../ARPLS/d_apply.htm#ARPLS326"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information about the <code class="codeph">EXECUTE_ERROR</code> procedure</p>
</div>
</div>
<a id="XSTRM72892"></a>
<div class="props_rev_3"><a id="GUID-20F05939-9C6A-46C1-8011-08AB8F30E025"></a>
<h5 id="XSTRM-GUID-20F05939-9C6A-46C1-8011-08AB8F30E025" class="sect5"><span class="enumeration_section">10.6.1.1.1</span> Retrying a Specific Apply Error Transaction Without a User Procedure</h5>
<div>
<p>After you correct the conditions that caused an apply error, you can retry the transaction by running the <code class="codeph">EXECUTE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package without specifying a user procedure. In this case, the transaction executes without any custom processing.</p>
<div class="section">
<p>When there are multiple error transactions, transaction ordering might be important when you execute them. In general, it is best practice to execute the oldest transaction first, and then each later transaction in order until you reach the newest transaction. The <code class="codeph">SOURCE_COMMIT_POSITION</code> column in the <code class="codeph">DBA_APPLY_ERROR</code> view shows the transaction time.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To retry a specific apply error transaction without a user procedure:</p>
<ol>
<li>
<p>In SQL*Plus, connect to the database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the <code class="codeph">EXECUTE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package, and specify the transaction identifier.</p>
<p>To retry a transaction with the transaction identifier <code class="codeph">5.4.312</code>, run the following procedure:</p>
<pre dir="ltr">BEGIN
  DBMS_APPLY_ADM.EXECUTE_ERROR(
    local_transaction_id =&gt; &#39;5.4.312&#39;,
    execute_as_user      =&gt; FALSE,
    user_procedure       =&gt; NULL);
END;
/
</pre></li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p>If <code class="codeph">execute_as_user</code> is <code class="codeph">TRUE</code>, then the inbound server executes the transaction in the security context of the current user. If <code class="codeph">execute_as_user</code> is <code class="codeph">FALSE</code>, then the inbound server executes the transaction in the security context of the original receiver of the transaction. The original receiver is the user who was processing the transaction when the error was raised.</p>
<p>In either case, the user who executes the transaction must have privileges to perform DML and DDL changes on the apply objects and to run any apply handlers.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="XSTRM72893"></a>
<div class="props_rev_3"><a id="GUID-1164A87A-9E6E-4F74-AFB9-67CEDD70BFE9"></a>
<h5 id="XSTRM-GUID-1164A87A-9E6E-4F74-AFB9-67CEDD70BFE9" class="sect5"><span class="enumeration_section">10.6.1.1.2</span> Retrying a Specific Apply Error Transaction With a User Procedure</h5>
<div>
<p>You can retry an error transaction by running the <code class="codeph">EXECUTE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package and specify a user procedure to modify one or more LCRs in the transaction before the transaction is executed.</p>
<div class="section">
<p>The modifications should enable successful execution of the transaction.</p>
<p>For example, consider a case in which a conflict caused an apply error. Examination of the error transaction reveals that the old value for the <code class="codeph">salary</code> column in a row LCR contained the wrong value. Specifically, the current value of the salary of the employee with <code class="codeph">employee_id</code> of <code class="codeph">197</code> in the <code class="codeph">hr.employees</code> table did not match the old value of the salary for this employee in the row LCR. Assume that the current value for this employee is <code class="codeph">3250</code> in the <code class="codeph">hr.employees</code> table. The example in this section creates a procedure to resolve the error.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To retry a specific apply error transaction with a user procedure:</p>
<ol>
<li>
<p>In SQL*Plus, connect to the database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Given this scenario described previously, create the following user procedure to modify the salary in the row LCR that caused the error:</p>
<pre dir="ltr">CREATE OR REPLACE PROCEDURE xstrmadmin.modify_emp_salary(
  in_any                        IN      ANYDATA,
  error_record                  IN      ALL_APPLY_ERROR%ROWTYPE,
  error_message_number          IN      NUMBER,
  messaging_default_processing  IN OUT  BOOLEAN,
  out_any                       OUT     ANYDATA)
AS
  row_lcr          SYS.LCR$_ROW_RECORD;
  row_lcr_changed  BOOLEAN := FALSE;
  res              NUMBER;
  ob_owner         VARCHAR2(32);
  ob_name          VARCHAR2(32);
  cmd_type         VARCHAR2(30);
  employee_id      NUMBER;
BEGIN
  IF in_any.getTypeName() = &#39;SYS.LCR$_ROW_RECORD&#39; THEN
    -- Access the LCR
    res := in_any.GETOBJECT(row_lcr);
    -- Determine the owner of the database object for the LCR
    ob_owner := row_lcr.GET_OBJECT_OWNER;
    -- Determine the name of the database object for the LCR
    ob_name := row_lcr.GET_OBJECT_NAME;
    -- Determine the type of DML change
    cmd_type := row_lcr.GET_COMMAND_TYPE;
    IF (ob_owner = &#39;HR&#39; AND ob_name = &#39;EMPLOYEES&#39; AND cmd_type = &#39;UPDATE&#39;) THEN
      -- Determine the employee_id of the row change
      IF row_lcr.GET_VALUE(&#39;old&#39;, &#39;employee_id&#39;) IS NOT NULL THEN
        employee_id := row_lcr.GET_VALUE(&#39;old&#39;, &#39;employee_id&#39;).ACCESSNUMBER();
        IF (employee_id = 197) THEN
          -- error_record.message_number should equal error_message_number
          row_lcr.SET_VALUE(
          value_type =&gt; &#39;OLD&#39;,
          column_name =&gt; &#39;salary&#39;,
          column_value =&gt; ANYDATA.ConvertNumber(3250));
          row_lcr_changed := TRUE;
        END IF;
      END IF;
    END IF;
  END IF;
  -- Specify that the inbound server continues to process the current message
  messaging_default_processing := TRUE;
  -- assign out_any appropriately
  IF row_lcr_changed THEN
    out_any := ANYDATA.ConvertObject(row_lcr);
  ELSE
    out_any := in_any;
  END IF;
END;
/
</pre></li>
<li>
<p>Run the <code class="codeph">EXECUTE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package, and specify the transaction identifier and the user procedure.</p>
<p>To retry a transaction with the transaction identifier <code class="codeph">5.6.924</code> and process the transaction with the <code class="codeph">modify_emp_salary</code> procedure in the <code class="codeph">xstrmadmin</code> schema before execution, run the following procedure:</p>
<pre dir="ltr">BEGIN
  DBMS_APPLY_ADM.EXECUTE_ERROR(
    local_transaction_id =&gt; &#39;5.6.924&#39;,
    execute_as_user      =&gt; FALSE,
    user_procedure       =&gt; &#39;xstrmadmin.modify_emp_salary&#39;);
END;
/
</pre></li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<div class="infobox-note" id="GUID-1164A87A-9E6E-4F74-AFB9-67CEDD70BFE9__GUID-796F94FC-15FF-4F5F-98B4-BE9AF86535D1">
<p class="notep1">Note:</p>
<p>The user who runs the procedure must have <code class="codeph">SELECT</code> privilege on the <code class="codeph">ALL_APPLY_ERROR</code> data dictionary view.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="XSTRM72894"></a>
<div class="props_rev_3"><a id="GUID-80868F53-ABE2-4B2C-8F3A-62B35BB872C4"></a>
<h4 id="XSTRM-GUID-80868F53-ABE2-4B2C-8F3A-62B35BB872C4" class="sect4"><span class="enumeration_section">10.6.1.2</span> Retrying All Error Transactions for an Inbound Server</h4>
<div>
<p>After you correct the conditions that caused all of the apply errors for an inbound server, you can retry all of the error transactions by running the <code class="codeph">EXECUTE_ALL_ERRORS</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.</p>
<div class="section">
<p class="subhead3">To retry all error transactions for an inbound server:</p>
<p>When there are multiple error transactions, the <code class="codeph">EXECUTE_ALL_ERRORS</code> procedure executes the oldest transaction first, and then executes each later transaction in order up to the newest transaction.</p>
<ol>
<li>
<p>In SQL*Plus, connect to the database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the <code class="codeph">EXECUTE_ALL_ERRORS</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package, and specify the name of the inbound server.</p>
<p>To retry all of the error transactions for an inbound server named <code class="codeph">xin</code>, run the following procedure:</p>
<pre dir="ltr">BEGIN
  DBMS_APPLY_ADM.EXECUTE_ALL_ERRORS(
    apply_name       =&gt; &#39;xin&#39;,
    execute_as_user  =&gt; FALSE);
END;
/
</pre></li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<div class="infobox-note" id="GUID-80868F53-ABE2-4B2C-8F3A-62B35BB872C4__GUID-3E18443F-0F5E-45C1-90BC-0B955677F0AD">
<p class="notep1">Note:</p>
<p>If you specify <code class="codeph">NULL</code> for the <code class="codeph">apply_name</code> parameter, and you have multiple inbound servers, then all of the apply errors are retried for all of the inbound servers.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="XSTRM72895"></a>
<div class="props_rev_3"><a id="GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8"></a>
<h3 id="XSTRM-GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8" class="sect3"><span class="enumeration_section">10.6.2</span> Deleting Apply Error Transactions</h3>
<p>You can delete a specific error transaction, or you can delete all error transactions for an inbound server.</p>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="xstrm_xin_man.htm#GUID-3174E901-8DE8-4965-85FA-D3FA83B0012D">Deleting a Specific Apply Error Transaction</a></strong><br/>
If an error transaction should not be applied, then you can delete the transaction from the error queue using the <code class="codeph">DELETE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.</li>
<li class="ulchildlink"><strong><a href="xstrm_xin_man.htm#GUID-8636319B-1B7B-4B3E-AD6C-C612D32C2030">Deleting All Error Transactions for an Inbound Server</a></strong><br/>
If none of the error transactions should be applied, then you can delete all of the error transactions by running the <code class="codeph">DELETE_ALL_ERRORS</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.</li>
</ul>
</div>
<a id="XSTRM72896"></a>
<div class="props_rev_3"><a id="GUID-3174E901-8DE8-4965-85FA-D3FA83B0012D"></a>
<h4 id="XSTRM-GUID-3174E901-8DE8-4965-85FA-D3FA83B0012D" class="sect4"><span class="enumeration_section">10.6.2.1</span> Deleting a Specific Apply Error Transaction</h4>
<div>
<p>If an error transaction should not be applied, then you can delete the transaction from the error queue using the <code class="codeph">DELETE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.</p>
<div class="section">
<p class="subhead3">To delete a specific apply error transaction:</p>
<ol>
<li>
<p>In SQL*Plus, connect to the database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Identify the transaction ID of the error transaction you want to delete.</p>
<p>For example, run the following query to list the local apply error transactions:</p>
<pre dir="ltr">COLUMN APPLY_NAME FORMAT A11
COLUMN SOURCE_DATABASE&#39; FORMAT A10
COLUMN LOCAL_TRANSACTION_ID FORMAT A11
COLUMN ERROR_NUMBER FORMAT 99999999
COLUMN ERROR_MESSAGE FORMAT A20
COLUMN MESSAGE_COUNT FORMAT 99999999

SELECT APPLY_NAME, 
       SOURCE_DATABASE, 
       LOCAL_TRANSACTION_ID, 
       ERROR_NUMBER,
       ERROR_MESSAGE,
       MESSAGE_COUNT
  FROM DBA_APPLY_ERROR;
</pre></li>
<li>
<p>Run the <code class="codeph">DELETE_ERROR</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package, and specify the transaction identifier.</p>
<p>To delete a transaction with the transaction identifier <code class="codeph">5.4.312</code>, run the following procedure:</p>
<pre dir="ltr">EXEC DBMS_APPLY_ADM.DELETE_ERROR(local_transaction_id =&gt; &#39;5.4.312&#39;);
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="XSTRM72897"></a>
<div class="props_rev_3"><a id="GUID-8636319B-1B7B-4B3E-AD6C-C612D32C2030"></a>
<h4 id="XSTRM-GUID-8636319B-1B7B-4B3E-AD6C-C612D32C2030" class="sect4"><span class="enumeration_section">10.6.2.2</span> Deleting All Error Transactions for an Inbound Server</h4>
<div>
<p>If none of the error transactions should be applied, then you can delete all of the error transactions by running the <code class="codeph">DELETE_ALL_ERRORS</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.</p>
<div class="section">
<p class="subhead3">To delete all error transactions for an inbound server:</p>
<ol>
<li>
<p>In SQL*Plus, connect to the database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the <code class="codeph">DELETE_ALL_ERRORS</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package, and specify the name of the inbound server.</p>
<p>To delete all of the error transactions for an inbound server named <code class="codeph">xin</code>, run the following procedure:</p>
<pre dir="ltr">EXEC DBMS_APPLY_ADM.DELETE_ALL_ERRORS(apply_name =&gt; &#39;xin&#39;);
</pre></li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<div class="infobox-note" id="GUID-8636319B-1B7B-4B3E-AD6C-C612D32C2030__GUID-1583AEAC-1808-4706-BC97-E57063AFFFA9">
<p class="notep1">Note:</p>
<p>If you specify <code class="codeph">NULL</code> for the <code class="codeph">apply_name</code> parameter, and you have multiple inbound servers, then all of the apply errors are deleted for all of the inbound servers.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="XSTRM72578"></a><a id="XSTRM72579"></a><a id="XSTRM72565"></a>
<div class="props_rev_3"><a id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024"></a>
<h3 id="XSTRM-GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024" class="sect3"><span class="enumeration_section">10.6.3</span> Managing Eager Errors Encountered by an Inbound Server</h3>
<div>
<p>As a performance optimization, an inbound server can use eager apply to begin to apply large transactions before it receives the commit LCR.</p>
<div class="section">
<p>See <span class="q">&#34;<a href="xstrm_xin_cncpt.htm#GUID-F4C53B30-8D18-4E52-BC9A-91F5A4A422A8" title="For small transactions, XStream In does not begin to apply the logical change records (LCRs) until the inbound server receives a commit LCR for the transaction from the source. As a performance optimization, an inbound server can use eager apply to begin to apply large transactions before it receives the commit LCR.">Optimizing XStream In Performance for Large Transactions</a>&#34;</span> for information about eager apply.</p>
<p>An inbound server can encounter an error while eagerly applying a transaction. Because all of the LCRs are not available for the transaction, an <code class="codeph">EAGER</code> <code class="codeph">ERROR</code> is recorded for this failed transaction. In this case, an entry in the <code class="codeph">ALL_APPLY_ERROR</code> view shows an eager error for the transaction, but the LCRs are not recorded in the error queue. If an error transaction is not an eager error transaction, then it is referred to as a normal error transaction.</p>
<p>Normal error transactions and eager error transactions must be managed differently. An inbound server moves a normal error transaction, including all of its LCRs, to the error queue, but an inbound server does not move an eager error transaction to the error queue.</p>
<p>An eager error causes the inbound server to stop. When it restarts, if the error queue has an <code class="codeph">EAGER</code> <code class="codeph">ERROR</code> for the restarting transaction, then the transaction is started as a normal transaction. That is, the LCRs in the large transaction spill to disk, and the inbound server begins to apply them only after the commit LCR is received.</p>
<p>The following statements apply to both normal error transactions and eager error transactions:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">ALL_APPLY_ERROR</code> and <code class="codeph">ALL_APPLY_ERROR_MESSAGES</code> views contain information (metadata) about the error transaction.</p>
</li>
<li>
<p>The inbound server does not apply the error transaction.</p>
</li>
</ul>
<p><a href="xstrm_xin_man.htm#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJHFIBE" title="This table describes the available actions for a normal error transaction, the mechanisms for performing the actions, and a description of each action.">Table 10-1</a> explains the options for managing a normal error transaction.</p>
<div class="tblformal" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJHFIBE">
<p class="titleintable">Table 10-1 Options Available for Managing a Normal Error Transaction</p>
<table class="cellalignment5158" title="Options Available for Managing a Normal Error Transaction" summary="This table describes the available actions for a normal error transaction, the mechanisms for performing the actions, and a description of each action.">
<thead>
<tr class="cellalignment5144">
<th class="cellalignment5170" id="d46321e2094">Action</th>
<th class="cellalignment5192" id="d46321e2097">Mechanisms</th>
<th class="cellalignment5193" id="d46321e2100">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5144">
<td class="cellalignment5172" id="d46321e2105" headers="d46321e2094">
<p>Delete the error transaction</p>
</td>
<td class="cellalignment5194" headers="d46321e2105 d46321e2097">
<p><code class="codeph">DBMS_APPLY_ADM.DELETE_ERROR</code></p>
<p><code class="codeph">DBMS_APPLY_ADM.DELETE_ALL_ERRORS</code></p>
<p>Oracle Enterprise Manager Cloud Control</p>
</td>
<td class="cellalignment5195" headers="d46321e2105 d46321e2100">
<p>The error transaction is deleted from the error queue, and the metadata about the error transaction is deleted. An inbound server does not try to reexecute the transaction when the inbound server is restarted. The transaction is not applied.</p>
</td>
</tr>
<tr class="cellalignment5144">
<td class="cellalignment5172" id="d46321e2121" headers="d46321e2094">
<p>Execute the error transaction</p>
</td>
<td class="cellalignment5194" headers="d46321e2121 d46321e2097">
<p><code class="codeph">DBMS_APPLY_ADM.EXECUTE_ERROR</code></p>
<p><code class="codeph">DBMS_APPLY_ADM.EXECUTE_ALL_ERRORS</code></p>
<p>Oracle Enterprise Manager Cloud Control</p>
</td>
<td class="cellalignment5195" headers="d46321e2121 d46321e2100">
<p>The error transaction in the error queue is executed. If there are no errors during execution, then the transaction is applied. If an LCR raises an error during execution, then the normal error transaction is moved back to the error queue.</p>
</td>
</tr>
<tr class="cellalignment5144">
<td class="cellalignment5172" id="d46321e2137" headers="d46321e2094">
<p>Retain the error transaction</p>
</td>
<td class="cellalignment5194" headers="d46321e2137 d46321e2097">
<p>None. (The error transaction is retained automatically.)</p>
</td>
<td class="cellalignment5195" headers="d46321e2137 d46321e2100">
<p>The error transaction remains in the error queue even if the inbound server is restarted. The metadata about the error transaction is also retained. The transaction is not applied.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p><a href="xstrm_xin_man.htm#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJIGGEC" title="This table describes the available actions for an eager error transaction, the mechanisms for performing the actions, and a description of each action.">Table 10-2</a> explains the options for managing an eager error transaction.</p>
<div class="tblformal" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJIGGEC">
<p class="titleintable">Table 10-2 Options Available for Managing an Eager Error Transaction</p>
<table class="cellalignment5158" title="Options Available for Managing an Eager Error Transaction" summary="This table describes the available actions for an eager error transaction, the mechanisms for performing the actions, and a description of each action.">
<thead>
<tr class="cellalignment5144">
<th class="cellalignment5170" id="d46321e2163">Action</th>
<th class="cellalignment5160" id="d46321e2166">Mechanisms</th>
<th class="cellalignment5196" id="d46321e2169">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5144">
<td class="cellalignment5172" id="d46321e2174" headers="d46321e2163">
<p>Delete error transaction</p>
</td>
<td class="cellalignment5162" headers="d46321e2174 d46321e2166">
<p><code class="codeph">DBMS_APPLY_ADM.DELETE_ERROR</code></p>
<p><code class="codeph">DBMS_APPLY_ADM.DELETE_ALL_ERRORS</code></p>
<p>Oracle Enterprise Manager Cloud Control</p>
</td>
<td class="cellalignment5197" headers="d46321e2174 d46321e2169">
<p>The metadata about the eager error transaction is deleted. When the inbound server is restarted, it attempts to execute the transaction as an eager transaction. If the inbound server does not encounter an error during execution, then the transaction is applied successfully. If the inbound server encounters an error during execution, then the eager error transaction is recorded.</p>
</td>
</tr>
<tr class="cellalignment5144">
<td class="cellalignment5172" id="d46321e2190" headers="d46321e2163">
<p>Retain error transaction</p>
</td>
<td class="cellalignment5162" headers="d46321e2190 d46321e2166">
<p>None. (The metadata about the error transaction is retained automatically.)</p>
</td>
<td class="cellalignment5197" headers="d46321e2190 d46321e2169">
<p>The metadata about the eager error transaction is retained. When the inbound server is restarted, it attempts to execute the transaction as a normal transaction.</p>
<p>Specifically, the inbound server spills the transaction to disk and attempts to execute the transaction. If the inbound server does not encounter an error during execution, then the transaction is applied successfully. If the inbound server encounters an error during execution, then the transaction becomes a normal error transaction. In this case, the LCR that raised the error and all of the other LCRs in the transaction are moved to the error queue. After the normal error transaction is moved to the error queue, you must manage the error transaction as a normal error transaction (not an eager error transaction).</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-note" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-4C447526-C60F-4DAC-A782-B212E68FC698">
<p class="notep1">Note:</p>
<p>If you attempt to execute an eager error transaction manually using the <code class="codeph">DBMS_APPLY_ADM</code> package or Oracle Enterprise Manager Cloud Control, then the following error is raised:</p>
<pre dir="ltr">ORA-26909: cannot reexecute an eager error
</pre>
<p>An eager error transaction cannot be executed manually. Instead, it is executed automatically when the inbound server is enabled.</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To manage an eager error transaction encountered by an inbound server:</p>
<ol>
<li>
<p>Connect to the inbound server database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Query the <code class="codeph">ERROR_TYPE</code> column in the <code class="codeph">ALL_APPLY_ERROR</code> data dictionary view:</p>
<pre dir="ltr">SELECT APPLY_NAME, ERROR_TYPE FROM ALL_APPLY_ERROR;
</pre>
<p>Follow the appropriate instructions based on the error type:</p>
<ul style="list-style-type: disc;">
<li>
<p>If the <code class="codeph">ERROR_TYPE</code> column shows <code class="codeph">EAGER</code> <code class="codeph">ERROR</code>, then proceed to Step&nbsp;<a href="xstrm_xin_man.htm#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJJFFBG">3</a>.</p>
</li>
<li>
<p>If the <code class="codeph">ERROR_TYPE</code> column shows <code class="codeph">NULL</code>, then the apply error is not an eager error, and you cannot use the instructions in this section to manage it. Instead, use the instructions in <span class="q">&#34;<a href="xstrm_xin_man.htm#GUID-FCD1CE21-0A24-4A32-B22A-784605237D86" title="You can retry a specific error transaction, or you can retry all error transactions for an inbound server.">Retrying Apply Error Transactions</a>&#34;</span> and <span class="q">&#34;<a href="xstrm_xin_man.htm#GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8" title="You can delete a specific error transaction, or you can delete all error transactions for an inbound server.">Deleting Apply Error Transactions</a>&#34;</span>.</p>
</li>
</ul>
</li>
<li id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJJFFBG">
<p>Examine the error message raised by the LCR, and determine the cause of the error.</p>
<p>See <span class="q">&#34;<a href="xstrm_xin_mon.htm#GUID-43A987B4-7F6C-4BC3-A813-F6E062175207" title="An example illustrates checking for apply errors.">Checking for Apply Errors</a>&#34;</span> and <span class="q">&#34;<a href="xstrm_xin_mon.htm#GUID-505C729C-5893-4B22-A981-33BF3084C67B" title="SQL scripts display detailed information about the error transactions in the error queue in a database.">Displaying Detailed Information About Apply Errors</a>&#34;</span> for information about checking for apply errors using data dictionary views.</p>
<p>See Oracle Enterprise Manager Cloud Control online help for information about checking for apply errors using Oracle Enterprise Manager Cloud Control.</p>
</li>
<li>
<p>If possible, determine how to avoid the error, and make any changes necessary to avoid the error.</p>
<p>See <span class="q">&#34;<a href="xstrm_xin_trouble.htm#GUID-5A6A993B-2196-4D5A-BB8A-9E5A8E2B641D" title="You can diagnose and correct problems with an XStream In configuration.">Troubleshooting XStream In</a>&#34;</span> for information about common apply errors and solutions for them.</p>
</li>
<li id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJECFGC">
<p>Either retain the error transaction or delete the error transaction:</p>
<ul style="list-style-type: disc;">
<li>
<p>Delete the error transaction only if you have corrected the problem. The inbound server reexecutes the transaction when it is enabled.</p>
<p>For example, to delete a transaction with the transaction identifier <code class="codeph">5.4.312</code>, run the following procedure:</p>
<pre dir="ltr">EXEC DBMS_APPLY_ADM.DELETE_ERROR(local_transaction_id =&gt; &#39;5.4.312&#39;);
</pre></li>
<li>
<p>Retain the error transaction if you cannot correct the problem now or if you plan to reexecute it in the future. No action is necessary to retain the error transaction. It remains in the error queue until it is reexecuted or deleted.</p>
</li>
</ul>
<p>See <a href="xstrm_xin_man.htm#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJIGGEC" title="This table describes the available actions for an eager error transaction, the mechanisms for performing the actions, and a description of each action.">Table 10-2</a> for more information about these choices.</p>
<div class="infobox-note" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-BA4360FA-8DBD-4826-B054-67F8F1A80311">
<p class="notep1">Note:</p>
<p>It might not be possible to recover a normal error transaction that is deleted. Before deleting the error transaction, ensure that the error type is <code class="codeph">EAGER</code> <code class="codeph">ERROR</code>.</p>
</div>
<p>See <span class="q">&#34;<a href="xstrm_xin_man.htm#GUID-83E8407F-3E92-4AB4-86D1-457DBF45B7F8" title="You can delete a specific error transaction, or you can delete all error transactions for an inbound server.">Deleting Apply Error Transactions</a>&#34;</span> for more information about deleting an error transaction using the <code class="codeph">DBMS_APPLY_ADM</code> package.</p>
<p>See the Oracle Enterprise Manager Cloud Control online help for information about deleting an error transaction using Oracle Enterprise Manager Cloud Control.</p>
</li>
<li>
<p>If the inbound server is disabled, then start the inbound server.</p>
<p>Query the <code class="codeph">STATUS</code> column in the <code class="codeph">ALL_APPLY_ERROR</code> view to determine whether the inbound server is enabled or disabled.</p>
<p>If the <code class="codeph">disable_on_error</code> apply parameter is set to <code class="codeph">Y</code> for the inbound server, then the inbound server becomes disabled when it encounters the error and remains disabled.</p>
<p>If the <code class="codeph">disable_on_error</code> apply parameter is set to <code class="codeph">N</code> for the inbound server, then the inbound server stops and restarts automatically when it encounters the error.</p>
<p>See <a href="xstrm_xin_man.htm#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJIGGEC" title="This table describes the available actions for an eager error transaction, the mechanisms for performing the actions, and a description of each action.">Table 10-2</a> for information about how the inbound server handles the error transaction based on your choice in Step <a href="xstrm_xin_man.htm#GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__BAJECFGC">5</a>.</p>
<p>See <span class="q">&#34;<a href="xstrm_xin_man.htm#GUID-13A0167E-0DD4-47D5-B3D4-D970741584BE" title="A inbound server must be enabled for it to receive logical change records (LCRs) from an XStream client application and apply the LCRs. You run the START_APPLY procedure in the DBMS_APPLY_ADM package to start an existing inbound server.">Starting an Inbound Server</a>&#34;</span> for information about starting an inbound server or apply process using the <code class="codeph">DBMS_APPLY_ADM</code> package.</p>
<p>See the Oracle Enterprise Manager Cloud Control online help for information about starting an inbound server or apply process using Oracle Enterprise Manager Cloud Control.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<div class="infobox-note" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-AF2E7F0D-ADC3-4F34-A91A-ED3ACC11DB3B">
<p class="notep1">Note:</p>
<p>If you have both purchased a license for the Oracle GoldenGate product and have enabled the XStream optimizations for Oracle Streams by running the <code class="codeph">DBMS_XSTREAM_ADM.ENABLE_GG_XSTREAM_FOR_STREAMS</code> procedure, then an apply process in an Oracle Streams configuration can encounter errors of the <code class="codeph">EAGER</code> <code class="codeph">ERROR</code> type. Use the instructions in this section to manage eager apply process errors. When the XStream optimizations for Oracle Streams are not enabled, apply processes cannot encounter eager errors.</p>
</div>
<div class="infoboxnotealso" id="GUID-0C9A2E32-C6CF-4EBD-AF77-254043F82024__GUID-FE92B8FF-5E3A-48C2-90CB-80AA0D734415">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink REFRN20008" target="_blank" href="../REFRN/GUID-EE6FC0AF-DAC7-4D4B-8828-789A2361B5EB.htm#REFRN20008"><span><cite>Oracle Database Reference</cite></span></a></p>
</li>
<li>
<p><a class="olink ARPLS73644" target="_blank" href="../ARPLS/d_xstrm_adm.htm#ARPLS73644"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="XSTRM72606"></a><a id="XSTRM72984"></a><a id="XSTRM1592"></a>
<div class="props_rev_3"><a id="GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4"></a>
<h2 id="XSTRM-GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4" class="sect2"><span class="enumeration_section">10.7</span> Dropping Components in an XStream In Configuration</h2>
<div>
<p>You can drop an inbound server with the <code class="codeph">DROP_INBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package.</p>
<div class="section">
<p>This procedure always drops the specified inbound server. This procedure also drops the queue for the inbound server if both of the following conditions are met:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>One call to the <code class="codeph">CREATE_INBOUND</code> procedure created the inbound server and the queue.</p>
</li>
<li>
<p>The inbound server is the only subscriber to the queue.</p>
</li>
</ul>
<p>If either one of the preceding conditions is not met, then the <code class="codeph">DROP_INBOUND</code> procedure only drops the inbound server. It does not drop the queue.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">To drop an inbound server:</p>
<ol>
<li>
<p>Connect to the inbound server database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the <code class="codeph">DROP_INBOUND</code> procedure.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p>If the inbound server&#39;s queue is not dropped automatically, then run the <code class="codeph">REMOVE_QUEUE</code> procedure to drop it.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4__GUID-2B58322E-2FE7-4D6C-BFF7-20F127B317A3">
<p class="titleinexample">Example 10-5 Dropping an Inbound Server</p>
<p>To drop an inbound server named <code class="codeph">xin</code>, run the following procedure:</p>
<pre dir="ltr">exec DBMS_XSTREAM_ADM.DROP_INBOUND(&#39;xin&#39;);
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4__GUID-DA403B94-5198-43A3-BB45-A1303E87559C">
<p class="titleinexample">Example 10-6 Dropping an Inbound Server&#39;s Queue</p>
<p>To drop a queue named <code class="codeph">xin_queue</code>, run the following procedure:</p>
<pre dir="ltr">exec DBMS_XSTREAM_ADM.REMOVE_QUEUE(&#39;xin_queue&#39;);
</pre>
<div class="infoboxnotealso" id="GUID-B8E56CAE-98A6-4EEC-9BCB-5A7317D542C4__GUID-451C1154-5961-4C84-9EE2-15745DB53691">
<p class="notep1">See Also:</p>
<p><a class="olink ARPLS70200" target="_blank" href="../ARPLS/d_xstrm_adm.htm#ARPLS70200"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></p>
</div>
</div>
<!-- class="example" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5143">
<tr>
<td class="cellalignment5150">
<table class="cellalignment5148">
<tr>
<td class="cellalignment5147"><a href="xstrm_xin_config.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5147"><a href="xstrm_xin_mon.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2009, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5152">
<table class="cellalignment5146">
<tr>
<td class="cellalignment5147"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5147"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5147"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5147"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5147"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5147"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>