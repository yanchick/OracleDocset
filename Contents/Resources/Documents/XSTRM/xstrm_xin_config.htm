<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-114716"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Configuring%20XStream%20In"></a><title>Configuring XStream In</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="You can configure the Oracle Database components that are used by XStream."/>
<meta name="keywords" content="XStream, configuring, XStream In, preparing for, inbound servers, initialization parameters, Streams pool, CREATE_INBOUND procedure"/>
<meta name="dcterms.created" content="2017-06-13T10:02:49Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database XStream Guide"/>
<meta name="dcterms.identifier" content="E53119-03"/>
<meta name="dcterms.isVersionOf" content="XSTRM"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2009, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="xstrm_xin_cncpt.htm" title="Previous" type="text/html"/>
<link rel="Next" href="xstrm_xin_man.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E53119-03.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-B0F20D2D-7F63-4CE6-B15F-435B5A3DFBED"></a> <span id="PAGE" style="display:none;">16/24</span> <!-- End Header -->
<a id="XSTRM72713"></a>
<h1 id="XSTRM-GUID-B0F20D2D-7F63-4CE6-B15F-435B5A3DFBED" class="sect1"><span class="enumeration_chapter">9</span> Configuring XStream In</h1>
<div>
<p>You can configure the Oracle Database components that are used by XStream.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="xstrm_xin_config.htm#GUID-46DD1410-EDB2-447B-BF02-350CEED7C088">Preparing for XStream In</a></strong><br/>
Prerequisites must be met before configuring XStream In.</li>
<li class="ulchildlink"><strong><a href="xstrm_xin_config.htm#GUID-AB865A69-45EE-4B21-939F-BFE15EF28AF1">Configuring XStream In</a></strong><br/>
The <code class="codeph">CREATE_INBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package creates an inbound server. You must create the client application that communicates with the inbound server and sends LCRs to the inbound server.</li>
</ul>
<div class="infoboxnotealso" id="GUID-B0F20D2D-7F63-4CE6-B15F-435B5A3DFBED__GUID-5120B758-AC87-4676-B229-E3C7675F37C2">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xstrm_xout_cncpt.htm#GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6" title="Become familiar with concepts related to XStream Out.">XStream Out Concepts</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="xstrm_intro.htm#GUID-21FC23DF-2881-4CFD-AF74-9A1173D768FF" title="There are several common XStream use cases.">XStream Use Cases</a>&#34;</span></p>
</li>
<li>
<p><a class="olink LNOCI72903" target="_blank" href="../LNOCI/oci25xstrmint.htm#LNOCI72903"><span><cite>Oracle Call Interface Programmer&#39;s Guide</cite></span></a></p>
</li>
<li>
<p><a class="olink STXJV" target="_blank" href="../STXJV/toc.htm"><span><cite>Oracle Database XStream Java API Reference</cite></span></a></p>
</li>
</ul>
</div>
</div>
<a id="XSTRM1502"></a>
<div class="props_rev_3"><a id="GUID-46DD1410-EDB2-447B-BF02-350CEED7C088"></a>
<h2 id="XSTRM-GUID-46DD1410-EDB2-447B-BF02-350CEED7C088" class="sect2"><span class="enumeration_section">9.1</span> Preparing for XStream In</h2>
<p>Prerequisites must be met before configuring XStream In.</p>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="xstrm_xin_config.htm#GUID-445DEEE0-6449-490B-8264-87CDB0183E1F">Configure an XStream Administrator</a></strong><br/>
An XStream administrator configures and manages XStream components in an XStream In environment.</li>
<li class="ulchildlink"><strong><a href="xstrm_xin_config.htm#GUID-87F931F3-1D62-44B7-BCAD-240CA24EA4A9">Set the Relevant Initialization Parameters</a></strong><br/>
Some initialization parameters are important for the configuration, operation, reliability, and performance of XStream inbound servers. Set these parameters appropriately.</li>
<li class="ulchildlink"><strong><a href="xstrm_xin_config.htm#GUID-75239A64-29D2-4364-9F8D-2E6CF7156E9C">Configure the Streams pool</a></strong><br/>
The Streams pool is a portion of memory in the System Global Area (SGA) that is used by both Oracle Streams and XStream components. The Streams pool stores buffered queue LCRs in memory, and it provides memory for inbound servers.</li>
<li class="ulchildlink"><strong><a href="xstrm_xin_config.htm#GUID-E1D311AD-9B1C-49B5-B6AE-59A49C15B996">If Required, Specify Supplemental Logging at the Source Database</a></strong><br/>
In an XStream configuration in which an inbound server applies changes captured by a capture process in an XStream Out configuration, supplemental logging might be required at the source database on columns in the tables for which an inbound server applies changes.</li>
</ul>
</div>
<a id="XSTRM72880"></a><a id="XSTRM72881"></a><a id="XSTRM73006"></a><a id="XSTRM73007"></a><a id="XSTRM73008"></a><a id="XSTRM73009"></a><a id="XSTRM73010"></a><a id="XSTRM1564"></a>
<div class="props_rev_3"><a id="GUID-445DEEE0-6449-490B-8264-87CDB0183E1F"></a>
<h3 id="XSTRM-GUID-445DEEE0-6449-490B-8264-87CDB0183E1F" class="sect3"><span class="enumeration_section">9.1.1</span> Configure an XStream Administrator</h3>
<div>
<p>An XStream administrator configures and manages XStream components in an XStream In environment.</p>
<div class="section">
<p>You can configure an XStream administrator by granting a user the appropriate privileges. You must configure an XStream administrator in each Oracle database included in the XStream configuration.</p>
<p>If you are configuring XStream In in a multitenant container database (CDB), then configure the XStream administrator in the container that will run the inbound server. This container can be the root or a pluggable database (PDB). See <span class="q">&#34;<a href="xstrm_xin_cncpt.htm#GUID-4E7FDA7C-002C-41D3-8E7C-2918913C2B13" title="A multitenant environment enables an Oracle database to contain a portable set of schemas, objects, and related structures that appears logically to an application as a separate database.">XStream In and a Multitenant Environment</a>&#34;</span> for information about using XStream In in a CDB.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Prerequisites</p>
</div>
<!-- class="section" -->
<div class="section">
<p>Before configuring an XStream administrator, ensure that the following prerequisites are met:</p>
<ul style="list-style-type: disc;">
<li>
<p>Ensure that you can log in to each database in the XStream configuration as an administrative user who can create users, grant privileges, and create tablespaces.</p>
</li>
<li>
<p>Decide between the trusted user model and untrusted user model for security. See <span class="q">&#34;<a href="xstrm_intro.htm#GUID-E7C2EC43-186F-4163-AAEB-1D119C9D1DF1" title="With XStream, you can implement the security model that best fits with your organization&#39;s requirements.">XStream Security Models</a>&#34;</span> for more information.</p>
</li>
<li>
<p>Identify a user who will be the XStream administrator. Either create a new user with the appropriate privileges or grant these privileges to an existing user.</p>
<p>Do not use the <code class="codeph">SYS</code> or <code class="codeph">SYSTEM</code> user as an XStream administrator, and ensure that the XStream administrator does not use the <code class="codeph">SYSTEM</code> tablespace as its default tablespace.</p>
</li>
<li>
<p>If a new tablespace is required for the XStream administrator, then ensure that there is enough disk space on each computer system in the XStream configuration for the tablespace. The recommended size of the tablespace is 25 MB.</p>
</li>
<li>
<p>The user executing the subprograms in the <code class="codeph">DBMS_XSTREAM_AUTH</code> package must have <code class="codeph">SYSDBA</code> administrative privilege, and the user must exercise the privilege using <code class="codeph">AS SYSDBA</code> at connect time.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Assumptions</p>
</div>
<!-- class="section" -->
<div class="section">
<p>This section makes the following assumptions:</p>
<ul style="list-style-type: disc;">
<li>
<p>The user name of the XStream administrator is <code class="codeph">xstrmadmin</code> for a non-CDB. In a CDB, when the XStream administrator is a common user, the user name of the XStream administrator is <code class="codeph">c##xstrmadmin</code>. When the XStream administrator in a CDB is a local user in a PDB, the user name of the XStream administrator is <code class="codeph">xstrmadmin</code>.</p>
</li>
<li>
<p>The tablespace used by the XStream administrator is <code class="codeph">xstream_tbs</code>.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To configure an XStream administrator:</p>
<ol>
<li>
<p>In SQL*Plus, connect as an administrative user who can create users, grant privileges, and create tablespaces. Remain connected as this administrative user for all subsequent steps.</p>
<div class="infoboxnotealso" id="GUID-445DEEE0-6449-490B-8264-87CDB0183E1F__GUID-E5C20EDE-33AB-4E70-A1C3-35454C80704B">
<p class="notep1">See Also:</p>
<p><a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus</p>
</div>
</li>
<li>
<p>Either create a tablespace for the XStream administrator or use an existing tablespace.</p>
<p>This tablespace stores any objects created in the XStream administrator&#39;s schema.</p>
<p>For example, the following statement creates a new tablespace for the XStream administrator:</p>
<pre dir="ltr">CREATE TABLESPACE xstream_tbs DATAFILE &#39;/usr/oracle/dbs/xstream_tbs.dbf&#39; 
  SIZE 25M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED;
</pre>
<p>If you are creating an XStream administrator as a common user in a CDB, then you must create the tablespace in the root and in all PDBs. The tablespace is required in all PDBs because a common user must have access to the tablespace in any PDB.</p>
</li>
<li>
<p>Create a new user to act as the XStream administrator or identify an existing user.</p>
<p>For example, to create a user named <code class="codeph">xstrmadmin</code> and specify that this user uses the <code class="codeph">xstream_tbs</code> tablespace, run the following statement:</p>
<pre dir="ltr">CREATE USER xstrmadmin IDENTIFIED BY <span class="italic">password</span> 
  DEFAULT TABLESPACE xstream_tbs
  QUOTA UNLIMITED ON xstream_tbs;
</pre>
<p>If you are creating an XStream administrator in a CDB and the inbound server is in the root, then the XStream administrator must be a common user.</p>
<p>If you are creating an XStream administrator in a CDB and the inbound server is in a PDB, then the XStream administrator can be a common user or a local user. Oracle recommends configuring a common user as the XStream administrator even when the inbound server is in a PDB.</p>
<p>To create a common user, include the <code class="codeph">CONTAINER=ALL</code> clause in the <code class="codeph">CREATE</code> <code class="codeph">USER</code> statement when the current container is the root:</p>
<pre dir="ltr">CREATE USER c##xstrmadmin IDENTIFIED BY <span class="italic">password</span> 
  DEFAULT TABLESPACE xstream_tbs
  QUOTA UNLIMITED ON xstream_tbs
  CONTAINER=ALL;
</pre>
<div class="infobox-note" id="GUID-445DEEE0-6449-490B-8264-87CDB0183E1F__GUID-14624C2C-9B33-44D3-BCAE-A1CD71E54095">
<p class="notep1">Note:</p>
<p>Enter an appropriate password for the administrative user.</p>
</div>
<div class="infoboxnotealso" id="GUID-445DEEE0-6449-490B-8264-87CDB0183E1F__GUID-85C111D8-3346-4140-AEA2-96E80B8C3DE9">
<p class="notep1">See Also:</p>
<p><a class="olink DBSEG33223" target="_blank" href="../DBSEG/authentication.htm#DBSEG33223"><span><cite>Oracle Database Security Guide</cite></span></a> for guidelines about choosing passwords</p>
</div>
</li>
<li>
<p>Grant <code class="codeph">CREATE</code> <code class="codeph">SESSION</code> privilege to the XStream administrator.</p>
<p>If you created a new user to act as the XStream administrator, then grant this user <code class="codeph">CREATE</code> <code class="codeph">SESSION</code> privilege.</p>
<p>For example, to grant <code class="codeph">CREATE</code> <code class="codeph">SESSION</code> privilege to user <code class="codeph">xstrmadmin</code>, run the following statement:</p>
<pre dir="ltr">GRANT CREATE SESSION TO xstrmadmin;
</pre>
<p>If you are creating an XStream administrator as a common user in a CDB, then grant <code class="codeph">CREATE</code> <code class="codeph">SESSION</code> privilege and <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> privilege to the XStream administrator, and include the <code class="codeph">CONTAINER=ALL</code> clause in the statement.</p>
<p>For example, to grant these privileges to user <code class="codeph">xstrmadmin</code> in a CDB, run the following statement:</p>
<pre dir="ltr">GRANT CREATE SESSION, SET CONTAINER TO c##xstrmadmin CONTAINER=ALL;
</pre></li>
<li>
<p>Run the <code class="codeph">GRANT_ADMIN_PRIVILEGE</code> procedure in the <code class="codeph">DBMS_XSTREAM_AUTH</code> package.</p>
<p>A user must have been explicitly granted <code class="codeph">EXECUTE</code> privilege on a package to execute a subprogram in the package inside of a user-created subprogram, and a user must have explicit <code class="codeph">READ</code> or <code class="codeph">SELECT</code> privilege on a data dictionary view to query the view inside of a user-created subprogram. These privileges cannot be granted through a role. You can run the <code class="codeph">GRANT_ADMIN_PRIVILEGE</code> procedure to grant such privileges to the XStream administrator, or you can grant them directly.</p>
<p>Depending on the parameter settings for the <code class="codeph">GRANT_ADMIN_PRIVILEGE</code> procedure, it can grant the appropriate privileges for a trusted or untrusted XStream administrator, and it can grant privileges in a non-CDB or a CDB. <a href="xstrm_xin_config.htm#GUID-445DEEE0-6449-490B-8264-87CDB0183E1F__CEGCDGAD" title="This table shows the required setting for each parameter based on the type XStream administrator being configured.">Table 9-1</a> describes key parameter settings for each case.</p>
<div class="tblformal" id="GUID-445DEEE0-6449-490B-8264-87CDB0183E1F__CEGCDGAD">
<p class="titleintable">Table 9-1 Key Parameter Settings for GRANT_ADMIN_PRIVILEGE</p>
<table class="cellalignment5153" title="Key Parameter Settings for GRANT_ADMIN_PRIVILEGE" summary="This table shows the required setting for each parameter based on the type XStream administrator being configured.">
<thead>
<tr class="cellalignment5144">
<th class="cellalignment5154" id="d44533e571">Type of XStream Administrator</th>
<th class="cellalignment5155" id="d44533e574">grant_select_privileges Parameter Setting</th>
<th class="cellalignment5155" id="d44533e577">container Parameter Setting</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5144">
<td class="cellalignment5156" id="d44533e582" headers="d44533e571">
<p>Trusted in a non-CDB</p>
</td>
<td class="cellalignment5157" headers="d44533e582 d44533e574">
<p><code class="codeph">TRUE</code></p>
</td>
<td class="cellalignment5157" headers="d44533e582 d44533e577">
<p><code class="codeph">CURRENT</code> (default)</p>
</td>
</tr>
<tr class="cellalignment5144">
<td class="cellalignment5156" id="d44533e595" headers="d44533e571">
<p>Untrusted in a non-CDB</p>
</td>
<td class="cellalignment5157" headers="d44533e595 d44533e574">
<p><code class="codeph">FALSE</code> (default)</p>
</td>
<td class="cellalignment5157" headers="d44533e595 d44533e577">
<p><code class="codeph">CURRENT</code> (default)</p>
</td>
</tr>
<tr class="cellalignment5144">
<td class="cellalignment5156" id="d44533e609" headers="d44533e571">
<p>Trusted in a CDB</p>
</td>
<td class="cellalignment5157" headers="d44533e609 d44533e574">
<p><code class="codeph">TRUE</code></p>
</td>
<td class="cellalignment5157" headers="d44533e609 d44533e577">
<p><code class="codeph">ALL</code> or <code class="codeph">CURRENT</code></p>
</td>
</tr>
<tr class="cellalignment5144">
<td class="cellalignment5156" id="d44533e624" headers="d44533e571">
<p>Untrusted in a CDB</p>
</td>
<td class="cellalignment5157" headers="d44533e624 d44533e574">
<p><code class="codeph">FALSE</code> (default)</p>
</td>
<td class="cellalignment5157" headers="d44533e624 d44533e577">
<p><code class="codeph">ALL</code> or <code class="codeph">CURRENT</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-note" id="GUID-445DEEE0-6449-490B-8264-87CDB0183E1F__GUID-1316BE98-C028-4802-805F-D4DFF2617C30">
<p class="notep1">Note:</p>
<p>For any scenario, when the XStream administrator must manage both an XStream Out and an XStream In configuration on the database, specify <code class="codeph">*</code> for the <code class="codeph">privilege_type</code> parameter.</p>
</div>
<div class="infoboxnotealso" id="GUID-445DEEE0-6449-490B-8264-87CDB0183E1F__GUID-80D6EA59-6260-4643-AD0E-9A07F4B3E924">
<p class="notep1">See Also:</p>
<p><a class="olink ARPLS73653" target="_blank" href="../ARPLS/d_xstrm_auth.htm#ARPLS73653"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></p>
</div>
</li>
<li>
<p>If necessary, grant additional privileges to the XStream administrator.</p>
<p>See <span class="q">&#34;<a href="xstrm_xin_config.htm#GUID-B3CD06A1-D923-4A30-9B03-71AA8CA6020C" title="Additional privileges might be required for the XStream administrator.">Granting Additional Privileges to the XStream Administrator</a>&#34;</span>.</p>
</li>
<li>
<p>Repeat all of the previous steps at each Oracle database in the environment that will use XStream.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="example" id="GUID-445DEEE0-6449-490B-8264-87CDB0183E1F__GUID-3AFF5175-F821-4F1A-A316-64A45DD76703">
<p class="titleinexample">Example 9-1 Granting Privileges to a Trusted XStream Administrator in a Non-CDB Without Generating a Script</p>
<pre dir="ltr">BEGIN
   DBMS_XSTREAM_AUTH.GRANT_ADMIN_PRIVILEGE(
      grantee                 =&gt; &#39;xstrmadmin&#39;,
      privilege_type          =&gt; &#39;APPLY&#39;,
      grant_select_privileges =&gt; TRUE);
END;
/
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-445DEEE0-6449-490B-8264-87CDB0183E1F__GUID-C0EC60C2-38AF-47C1-BD6E-2F15A59873E1">
<p class="titleinexample">Example 9-2 Granting Privileges to a Trusted XStream Administrator in a Non-CDB and Generating a Script</p>
<p>The directory specified in the <code class="codeph">directory_name</code> parameter must exist and must be accessible to the current user.</p>
<pre dir="ltr">BEGIN
   DBMS_XSTREAM_AUTH.GRANT_ADMIN_PRIVILEGE(
      grantee                 =&gt; &#39;xstrmadmin&#39;,
      privilege_type          =&gt; &#39;APPLY&#39;,
      grant_select_privileges =&gt; TRUE,
      do_grants               =&gt; TRUE,
      file_name               =&gt; &#39;grant_xstrm_privs.sql&#39;,
      directory_name          =&gt; &#39;xstrm_dir&#39;);
END;
/
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-445DEEE0-6449-490B-8264-87CDB0183E1F__GUID-4059702A-87BF-4E46-80EE-62D5DBD0A020">
<p class="titleinexample">Example 9-3 Granting Privileges to an Untrusted XStream Administrator in a Non-CDB Without Generating a Script</p>
<pre dir="ltr">BEGIN
   DBMS_XSTREAM_AUTH.GRANT_ADMIN_PRIVILEGE(
      grantee                 =&gt; &#39;xstrmadmin&#39;,
      privilege_type          =&gt; &#39;APPLY&#39;,
      grant_select_privileges =&gt; FALSE);
END;
/
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-445DEEE0-6449-490B-8264-87CDB0183E1F__GUID-68E6ED7C-E927-4999-86A1-297E00B582EA">
<p class="titleinexample">Example 9-4 Granting Privileges to a Trusted XStream Administrator in a CDB Without Generating a Script</p>
<p>In this example, the XStream administrator is a common user.</p>
<pre dir="ltr">BEGIN
   DBMS_XSTREAM_AUTH.GRANT_ADMIN_PRIVILEGE(
      grantee                 =&gt; &#39;c##xstrmadmin&#39;,
      privilege_type          =&gt; &#39;APPLY&#39;,
      grant_select_privileges =&gt; TRUE,
      container               =&gt; &#39;ALL&#39;);
END;
/
</pre></div>
<!-- class="example" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="xstrm_xin_config.htm#GUID-B3CD06A1-D923-4A30-9B03-71AA8CA6020C">Granting Additional Privileges to the XStream Administrator</a></strong><br/>
Additional privileges might be required for the XStream administrator.</li>
</ul>
</div>
<a id="XSTRM72983"></a>
<div class="props_rev_3"><a id="GUID-B3CD06A1-D923-4A30-9B03-71AA8CA6020C"></a>
<h4 id="XSTRM-GUID-B3CD06A1-D923-4A30-9B03-71AA8CA6020C" class="sect4"><span class="enumeration_section">9.1.1.1</span> Granting Additional Privileges to the XStream Administrator</h4>
<div>
<p>Additional privileges might be required for the XStream administrator.</p>
<div class="section">
<p>Grant any of the following additional privileges to the XStream Administrator if necessary:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>If you plan to use Oracle Enterprise Manager Cloud Control to manage databases with XStream components, then the XStream administrator must be trusted and must be granted <code class="codeph">DBA</code> role. You must also configure the XStream administrator to be an Oracle Enterprise Manager administrative user. Doing so grants additional privileges required by Oracle Enterprise Manager Cloud Control, such as the privileges required to run Oracle Enterprise Manager Cloud Control jobs. See the Oracle Enterprise Manager Cloud Control online help for information about creating Oracle Enterprise Manager administrative users.</p>
</li>
<li>
<p>If no apply user is specified for an inbound server, then grant the XStream administrator the necessary privileges to perform DML and DDL changes on the apply objects owned by other users. If an apply user is specified, then the apply user must have these privileges. These privileges can be granted directly or through a role.</p>
</li>
<li>
<p>If no apply user is specified for an inbound server, then grant the XStream administrator <code class="codeph">EXECUTE</code> privilege on any PL/SQL subprogram owned by another user that is executed by an inbound server. These subprograms can be used in apply handlers or error handlers. If an apply user is specified, then the apply user must have these privileges. These privileges must be granted directly. They cannot be granted through a role.</p>
</li>
<li>
<p>Grant the XStream administrator <code class="codeph">EXECUTE</code> privilege on any PL/SQL function owned by another user that is specified in a custom rule-based transformation for a rule used by an inbound server. For an inbound server, if an apply user is specified, then the apply user must have these privileges. These privileges must be granted directly. They cannot be granted through a role.</p>
</li>
<li>
<p>If the XStream administrator does not own the queue used by an inbound server and is not specified as the queue user for the queue when the queue is created, then the XStream administrator must be configured as a secure queue user of the queue if you want the XStream administrator to be able to enqueue LCRs into or dequeue LCRs from the queue. The XStream administrator might also need <code class="codeph">ENQUEUE</code> or <code class="codeph">DEQUEUE</code> privileges on the queue, or both. See <a class="olink STRMS101" target="_blank" href="../STRMS/strms_mprop.htm#STRMS101"><span><cite>Oracle Streams Concepts and Administration</cite></span></a> for information about managing queues.</p>
</li>
<li>
<p>Grant the XStream administrator <code class="codeph">EXECUTE</code> privilege on any object types that the XStream administrator might need to access. These privileges can be granted directly or through a role.</p>
</li>
<li>
<p>If you are using Oracle Database Vault, then the following additional privileges are required:</p>
<ul style="list-style-type: disc;">
<li>
<p>The apply user for an inbound server must be authorized to apply changes to realms that include replicated database objects. The replicated database objects are the objects to which the inbound server applies changes.</p>
<p>To authorize an apply user for a realm, run the <code class="codeph">DVSYS.DBMS_MACADM.ADD_AUTH_TO_REALM</code> procedure and specify the realm and the apply user. For example, to authorize apply user <code class="codeph">xstrmadmin</code> for the <code class="codeph">sales</code> realm, run the following procedure:</p>
<pre dir="ltr">BEGIN
  DVSYS.DBMS_MACADM.ADD_AUTH_TO_REALM(
    realm_name  =&gt; &#39;sales&#39;, 
    grantee     =&gt; &#39;xstrmadmin&#39;);
END;
/
</pre></li>
<li>
<p>The user who creates or alters an inbound server must be granted the <code class="codeph">BECOME</code> <code class="codeph">USER</code> system privilege.</p>
<p>Granting the <code class="codeph">BECOME</code> <code class="codeph">USER</code> system privilege to the user who performs these actions is not required if Oracle Database Vault is not installed. You can revoke the <code class="codeph">BECOME</code> <code class="codeph">USER</code> system privilege from the user after the completing one of these actions, if necessary.</p>
<p>See <a class="olink DVADM70351" target="_blank" href="../DVADM/db_objects.htm#DVADM70351"><span><cite>Oracle Database Vault Administrator&rsquo;s Guide</cite></span></a>.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="XSTRM1565"></a>
<div class="props_rev_3"><a id="GUID-87F931F3-1D62-44B7-BCAD-240CA24EA4A9"></a>
<h3 id="XSTRM-GUID-87F931F3-1D62-44B7-BCAD-240CA24EA4A9" class="sect3"><span class="enumeration_section">9.1.2</span> Set the Relevant Initialization Parameters</h3>
<div>
<p>Some initialization parameters are important for the configuration, operation, reliability, and performance of XStream inbound servers. Set these parameters appropriately.</p>
<div class="section">
<p>The following requirements apply to XStream inbound servers:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Ensure that the <code class="codeph">PROCESSES</code> initialization parameter is set to a value large enough to accommodate the inbound server background processes and all of the other Oracle Database background processes.</p>
</li>
<li>
<p>Ensure that the <code class="codeph">SESSIONS</code> initialization parameter is set to a value large enough to accommodate the sessions used by the inbound server background processes and all of the other Oracle Database sessions.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="XSTRM1566"></a>
<div class="props_rev_3"><a id="GUID-75239A64-29D2-4364-9F8D-2E6CF7156E9C"></a>
<h3 id="XSTRM-GUID-75239A64-29D2-4364-9F8D-2E6CF7156E9C" class="sect3"><span class="enumeration_section">9.1.3</span> Configure the Streams pool</h3>
<div>
<p>The Streams pool is a portion of memory in the System Global Area (SGA) that is used by both Oracle Streams and XStream components. The Streams pool stores buffered queue LCRs in memory, and it provides memory for inbound servers.</p>
<div class="section">
<p>The following are considerations for configuring the Streams pool:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>At least 300 MB of memory is required for the Streams pool.</p>
</li>
<li>
<p>The best practice is to set the <code class="codeph">STREAMS_POOL_SIZE</code> initialization parameter explicitly to the desired Streams pool size.</p>
</li>
<li>
<p>After XStream In is configured, you can use the <code class="codeph">max_sga_size</code> apply parameter to control the amount of SGA memory allocated specifically to an inbound server.</p>
</li>
<li>
<p>Ensure that there is enough space in the Streams pool at each database to run XStream components and to store LCRs and run the components properly.</p>
</li>
<li>
<p>The Streams pool is initialized the first time an inbound server is started.</p>
</li>
</ul>
<p>The Streams pool size is the value specified by the <code class="codeph">STREAMS_POOL_SIZE</code> parameter, in bytes, if the following conditions are met:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">MEMORY_TARGET</code>, <code class="codeph">MEMORY_MAX_TARGET</code>, and <code class="codeph">SGA_TARGET</code> initialization parameters are all set to <code class="codeph">0</code> (zero).</p>
</li>
<li>
<p>The <code class="codeph">STREAMS_POOL_SIZE</code> initialization parameter is set to a nonzero value.</p>
</li>
</ul>
<p>The Automatic Shared Memory Management feature automatically manages the size of the Streams pool when the following conditions are met:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">MEMORY_TARGET</code> and <code class="codeph">MEMORY_MAX_TARGET</code> initialization parameters are both set to <code class="codeph">0</code> (zero).</p>
</li>
<li>
<p>The <code class="codeph">SGA_TARGET</code> initialization parameter is set to a nonzero value.</p>
</li>
</ul>
<p>If you are using Automatic Shared Memory Management, and if the <code class="codeph">STREAMS_POOL_SIZE</code> initialization parameter also is set to a nonzero value, then Automatic Shared Memory Management uses this value as a minimum for the Oracle Streams pool. If your environment needs a minimum amount of memory in the Oracle Streams pool to function properly, then you can set a minimum size. To view the current memory allocated to Oracle Streams pool by Automatic Shared Memory Management, query the <code class="codeph">V$SGA_DYNAMIC_COMPONENTS</code> view. In addition, you can query the <code class="codeph">V$STREAMS_POOL_STATISTICS</code> view to view the current usage of the Oracle Streams pool.</p>
<div class="infoboxnotealso" id="GUID-75239A64-29D2-4364-9F8D-2E6CF7156E9C__GUID-C446883D-0EBA-42C5-BF1B-8AC0B672F112">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink ARPLS314" target="_blank" href="../ARPLS/d_apply.htm#ARPLS314"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information about the <code class="codeph">max_sga_size</code> apply parameter</p>
</li>
<li>
<p><a class="olink ADMIN00207" target="_blank" href="../ADMIN/memory.htm#ADMIN00207"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a></p>
</li>
<li>
<p><a class="olink REFRN10256" target="_blank" href="../REFRN/GUID-4702FDB7-BADC-4997-BC49-1B91088234AE.htm#REFRN10256"><span><cite>Oracle Database Reference</cite></span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="XSTRM73028"></a>
<div class="props_rev_3"><a id="GUID-E1D311AD-9B1C-49B5-B6AE-59A49C15B996"></a>
<h3 id="XSTRM-GUID-E1D311AD-9B1C-49B5-B6AE-59A49C15B996" class="sect3"><span class="enumeration_section">9.1.4</span> If Required, Specify Supplemental Logging at the Source Database</h3>
<div>
<p>In an XStream configuration in which an inbound server applies changes captured by a capture process in an XStream Out configuration, supplemental logging might be required at the source database on columns in the tables for which an inbound server applies changes.</p>
<div class="section">
<p>The required supplemental logging depends on the configuration of the inbound server you create.</p>
<div class="infoboxnotealso" id="GUID-E1D311AD-9B1C-49B5-B6AE-59A49C15B996__GUID-CBFF674C-6A35-493C-A9EA-74DBAF6AADB8">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="xstrm_xout_config.htm#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="When you use a capture process to capture changes, supplemental logging must be specified for certain columns at a source database for changes to the columns to be applied successfully at a destination database.">If Required, Configure Supplemental Logging</a>&#34;</span></p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="XSTRM72593"></a><a id="XSTRM72594"></a><a id="XSTRM72714"></a><a id="XSTRM1501"></a>
<div class="props_rev_3"><a id="GUID-AB865A69-45EE-4B21-939F-BFE15EF28AF1"></a>
<h2 id="XSTRM-GUID-AB865A69-45EE-4B21-939F-BFE15EF28AF1" class="sect2"><span class="enumeration_section">9.2</span> Configuring XStream In</h2>
<div>
<p>The <code class="codeph">CREATE_INBOUND</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package creates an inbound server. You must create the client application that communicates with the inbound server and sends LCRs to the inbound server.</p>
<div class="section">
<p>An inbound server in an XStream In configuration receives a stream of changes from a client application. The inbound server can apply these changes to database objects in an Oracle database, or it can process the changes in a customized way. A client application can attach to an inbound server and send row changes and DDL changes encapsulated in LCRs using the OCI or Java interface.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Prerequisites</p>
</div>
<!-- class="section" -->
<div class="section">
<p>Before configuring XStream In, ensure that the following prerequisite is met:</p>
<ul style="list-style-type: disc;">
<li>
<p>Complete the tasks described in <span class="q">&#34;<a href="xstrm_xin_config.htm#GUID-46DD1410-EDB2-447B-BF02-350CEED7C088" title="Prerequisites must be met before configuring XStream In.">Preparing for XStream In</a>&#34;</span>.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Assumptions</p>
</div>
<!-- class="section" -->
<div class="section">
<p>This section makes the following assumptions:</p>
<ul style="list-style-type: disc;">
<li>
<p>The name of the inbound server is <code class="codeph">xin</code>.</p>
</li>
<li>
<p>The inbound server applies all of the changes it receives from the XStream client application.</p>
</li>
<li>
<p>The queue used by the inbound server is <code class="codeph">xstrmadmin.xin_queue</code>.</p>
</li>
</ul>
<p><a href="xstrm_xin_config.htm#GUID-AB865A69-45EE-4B21-939F-BFE15EF28AF1__CEGEAGCJ">Figure 9-1</a> provides an overview of this XStream In configuration.</p>
<div class="figure" id="GUID-AB865A69-45EE-4B21-939F-BFE15EF28AF1__CEGEAGCJ">
<p class="titleinfigure">Figure 9-1 Sample XStream In Configuration</p>
<img width="401" height="356" src="img/GUID-909DB7CB-C111-4F26-8D14-1BACE61B12B1-default.gif" alt="Description of Figure 9-1 follows" title="Description of Figure 9-1 follows"/><br/>
<a href="img_text/GUID-909DB7CB-C111-4F26-8D14-1BACE61B12B1-print.htm">Description of &#34;Figure 9-1 Sample XStream In Configuration&#34;</a></div>
<!-- class="figure" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">To create an inbound server:</p>
<ol>
<li>
<p>In SQL*Plus, connect to the database that will run the inbound server as the XStream administrator. See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
<p>If you are configuring XStream In in a CDB, then connect to the container to which the inbound server will apply changes. The container can be the root or a PDB. An inbound server can apply changes only in its own container. See <a class="olink ADMIN13607" target="_blank" href="../ADMIN/cdb_admin.htm#ADMIN13607"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a container in a CDB in SQL*Plus. Also, see <span class="q">&#34;<a href="xstrm_xin_cncpt.htm#GUID-4E7FDA7C-002C-41D3-8E7C-2918913C2B13" title="A multitenant environment enables an Oracle database to contain a portable set of schemas, objects, and related structures that appears logically to an application as a separate database.">XStream In and a Multitenant Environment</a>&#34;</span> for information about using XStream In in a CDB.</p>
</li>
<li>
<p>Run the <code class="codeph">CREATE_INBOUND</code> procedure.</p>
<p>For example, the following <code class="codeph">CREATE_INBOUND</code> procedure configures an inbound server named <code class="codeph">xin</code>:</p>
<pre dir="ltr">BEGIN
  DBMS_XSTREAM_ADM.CREATE_INBOUND(
    server_name =&gt; &#39;xin&#39;,
    queue_name  =&gt; &#39;xin_queue&#39;);
END;
/
</pre>
<p>Running this procedure performs the following actions:</p>
<ul style="list-style-type: disc;">
<li>
<p>Creates an inbound server named <code class="codeph">xin</code>.</p>
</li>
<li>
<p>Sets the queue with the name <code class="codeph">xin_queue</code> as the inbound server&#39;s queue, and creates this queue if it does not exist. This queue does not store LCRs sent by the client application. Instead, the queue stores error transactions if an LCR raises an error. The current user is the queue owner. In this example, the current user is the XStream administrator.</p>
</li>
<li>
<p>Sets the current user as the apply user for the inbound server. In this example, the current user is the XStream administrator. The client application must connect to the database as the apply user to interact with the inbound server.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-AB865A69-45EE-4B21-939F-BFE15EF28AF1__GUID-2462D5E6-CB5F-4674-94BA-4B19EAF36941">
<p class="notep1">Tip:</p>
<p>By default, an inbound server does not use rules or rule sets. Therefore, it processes all LCRs sent to it by the client application. To add rules and rule sets, use the <code class="codeph">DBMS_XSTREAM_ADM</code> package or the <code class="codeph">DBMS_RULE_ADM</code> package. See <a class="olink ARPLS73643" target="_blank" href="../ARPLS/d_xstrm_adm.htm#ARPLS73643"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a>.</p>
</div>
</li>
<li>
<p>If necessary, create apply handlers for the inbound server.</p>
<p>Apply handlers are optional. Apply handlers process LCRs sent to an inbound server in a customized way.</p>
<div class="infoboxnotealso" id="GUID-AB865A69-45EE-4B21-939F-BFE15EF28AF1__GUID-F67B7888-A9B6-4B9B-8EE9-1E399471E5C8">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="xstrm_xin_cncpt.htm#GUID-B075A397-158F-4187-A9EB-6AEA14BB9755" title="An inbound server can either apply LCRs directly or send LCRs to an apply handler for processing. Your options for LCR processing depend on whether the LCR received by an inbound server is a row LCR or a DDL LCR.">LCR Processing Options for Inbound Servers</a>&#34;</span></p>
</div>
</li>
<li>
<p>Create and run the client application that will connect to the inbound server and send LCRs to it.</p>
<p>See <span class="q">&#34;<a href="xstrm_ap_sample_appl.htm#GUID-B914FF75-92AA-4270-BF71-E9A5AA9228F8" title="Examples illustrate how to configure the Oracle Database components that are used by XStream. The examples configure sample client applications that communicate with an XStream outbound server and inbound server.">Sample XStream Client Application</a>&#34;</span> for a sample application.</p>
</li>
<li>
<p>If the inbound server is disabled, then start the inbound server.</p>
<p>For example, enter the following:</p>
<pre dir="ltr">exec DBMS_APPLY_ADM.START_APPLY(&#39;xin&#39;);
</pre>
<div class="infoboxnotealso" id="GUID-AB865A69-45EE-4B21-939F-BFE15EF28AF1__GUID-FF9A3D11-D554-4B45-A994-8F87E5456BC1">
<p class="notep1">See Also:</p>
<p><a class="olink ARPLS70196" target="_blank" href="../ARPLS/d_xstrm_adm.htm#ARPLS70196"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></p>
</div>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5143">
<tr>
<td class="cellalignment5150">
<table class="cellalignment5148">
<tr>
<td class="cellalignment5147"><a href="xstrm_xin_cncpt.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5147"><a href="xstrm_xin_man.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2009, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5152">
<table class="cellalignment5146">
<tr>
<td class="cellalignment5147"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5147"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5147"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5147"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5147"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5147"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>