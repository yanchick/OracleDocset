<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-114724"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Troubleshooting%20XStream%20Out"></a><title>Troubleshooting XStream Out</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="You can diagnose and correct problems with an XStream Out configuration."/>
<meta name="keywords" content="XStream, troubleshooting, diagnosing problems, capture process, trace files, apply process, client application, OCIXStreamOutAttach(), missing LCRs, logical change records (LCRs), missing, V$XSTREAM_CAPTURE view, rule-based transformations, SET_MESSAGE_TRACKING procedure, missing LCR attributes, missing attributes, ALL_CAPTURE_EXTRA_ATTRIBUTES view, INCLUDE_EXTRA_ATTRIBUTE procedure, Streams pool, V$PROPAGATION_RECEIVER view, V$STREAMS_POOL_STATISTICS view, V$STREAMS_CAPTURE view"/>
<meta name="dcterms.created" content="2017-06-13T10:02:49Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database XStream Guide"/>
<meta name="dcterms.identifier" content="E53119-03"/>
<meta name="dcterms.isVersionOf" content="XSTRM"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2009, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="xstrm_xout_mon.htm" title="Previous" type="text/html"/>
<link rel="Next" href="xstrm_pt_xin.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E53119-03.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-59CACCB8-8127-4C3F-9C15-E1899DFD3DD1"></a> <span id="PAGE" style="display:none;">13/24</span> <!-- End Header -->
<a id="XSTRM1641"></a>
<h1 id="XSTRM-GUID-59CACCB8-8127-4C3F-9C15-E1899DFD3DD1" class="sect1"><span class="enumeration_chapter">7</span> Troubleshooting XStream Out</h1>
<div>
<p>You can diagnose and correct problems with an XStream Out configuration.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="xstrm_xout_trouble.htm#GUID-638514F3-FF2B-487D-AF78-F83ADCD03A2C">Diagnosing Problems with XStream Out</a></strong><br/>
You can diagnose problems with XStream Out by using several different techniques.</li>
<li class="ulchildlink"><strong><a href="xstrm_xout_trouble.htm#GUID-7D01008F-B652-483D-B30D-44825CBE868F">Problems and Solutions for XStream Out</a></strong><br/>
You can implement solutions for common problems with XStream Out.</li>
<li class="ulchildlink"><strong><a href="xstrm_xout_trouble.htm#GUID-BCE5DDD7-44FB-4EBE-B855-8850ADE9CAEB">How to Get More Help with XStream Out</a></strong><br/>
Oracle Support can provide more help with XStream Out.</li>
</ul>
<div class="infoboxnotealso" id="GUID-59CACCB8-8127-4C3F-9C15-E1899DFD3DD1__GUID-3ADD9B3E-44AD-4152-A4FA-B08B028E2360">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xstrm_xout_cncpt.htm#GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6" title="Become familiar with concepts related to XStream Out.">XStream Out Concepts</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="xstrm_intro.htm#GUID-21FC23DF-2881-4CFD-AF74-9A1173D768FF" title="There are several common XStream use cases.">XStream Use Cases</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="xstrm_xout_config.htm#GUID-1338E648-E214-4666-98A1-8B8D0085EB23" title="You can configure the Oracle Database components that are used by XStream Out.">Configuring XStream Out</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
<a id="XSTRM72610"></a>
<div class="props_rev_3"><a id="GUID-638514F3-FF2B-487D-AF78-F83ADCD03A2C"></a>
<h2 id="XSTRM-GUID-638514F3-FF2B-487D-AF78-F83ADCD03A2C" class="sect2"><span class="enumeration_section">7.1</span> Diagnosing Problems with XStream Out</h2>
<p>You can diagnose problems with XStream Out by using several different techniques.</p>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="xstrm_xout_trouble.htm#GUID-F6B50FEB-2E08-4494-8676-D271EF0350B3">Viewing Alerts</a></strong><br/>
An <span class="bold">alert</span> is a warning about a potential problem or an indication that a critical threshold has been crossed.</li>
<li class="ulchildlink"><strong><a href="xstrm_xout_trouble.htm#GUID-D73FD162-E62F-4B03-98BC-7D5D697E4C58">Using the Streams Configuration Report and Health Check Script</a></strong><br/>
The Streams Configuration Report and Health Check Script was designed for Oracle Streams, but it can provide important information about the XStream components in an XStream Out configuration. The report is useful to confirm that the prerequisites for XStream are met and to identify the database objects of interest for XStream.</li>
<li class="ulchildlink"><strong><a href="xstrm_xout_trouble.htm#GUID-C6B58766-8DCF-4ACD-9B2C-3E8A8C6F4106">Checking the Trace File and Alert Log for Problems</a></strong><br/>
Messages about each capture process and outbound server are recorded in trace files for the database in which the process is running.</li>
</ul>
</div>
<a id="XSTRM72856"></a>
<div class="props_rev_3"><a id="GUID-F6B50FEB-2E08-4494-8676-D271EF0350B3"></a>
<h3 id="XSTRM-GUID-F6B50FEB-2E08-4494-8676-D271EF0350B3" class="sect3"><span class="enumeration_section">7.1.1</span> Viewing Alerts</h3>
<div>
<p>An <span class="bold">alert</span> is a warning about a potential problem or an indication that a critical threshold has been crossed.</p>
<div class="section">
<p>There are two types of alerts:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Stateless:</span> Alerts that indicate single events that are not necessarily tied to the system state. For example, an alert that indicates that a capture aborted with a specific error is a stateless alert.</p>
</li>
<li>
<p><span class="bold">Stateful:</span> Alerts that are associated with a specific system state. Stateful alerts are usually based on a numeric value, with thresholds defined at warning and critical levels. For example, an alert on the current Streams pool memory usage percentage, with the warning level at 85% and the critical level at 95%, is a stateful alert.</p>
</li>
</ul>
<p>An Oracle database generates a stateless alert under the following conditions:</p>
<ul style="list-style-type: disc;">
<li>
<p>A capture process aborts.</p>
</li>
<li>
<p>An outbound server aborts.</p>
</li>
</ul>
<p>An Oracle database generates a stateful XStream alert when the Streams pool memory usage exceeds the percentage specified by the <code class="codeph">STREAMS_POOL_USED_PCT</code> metric. You can manage this metric with the <code class="codeph">SET_THRESHOLD</code> procedure in the <code class="codeph">DBMS_SERVER_ALERT</code> package.</p>
<p>You can view alerts in Oracle Enterprise Manager Cloud Control, or you can query the following data dictionary views:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">DBA_OUTSTANDING_ALERTS</code> view records current stateful alerts. The <code class="codeph">DBA_ALERT_HISTORY</code> view records stateless alerts and stateful alerts that have been cleared. For example, if the memory usage in the Streams pool exceeds the specified threshold, then a stateful alert is recorded in the <code class="codeph">DBA_OUTSTANDING_ALERTS</code> view.</p>
</li>
<li>
<p>The <code class="codeph">DBA_ALERT_HISTORY</code> data dictionary view shows alerts that have been cleared from the <code class="codeph">DBA_OUTSTANDING_ALERTS</code> view. For example, if the memory usage in the streams pool falls below the specified threshold, then the alert recorded in the <code class="codeph">DBA_OUTSTANDING_ALERTS</code> view is cleared and moved to the <code class="codeph">DBA_ALERT_HISTORY</code> view.</p>
</li>
</ul>
<p>For example, to list the current stateful alerts, run the following query on the <code class="codeph">DBA_OUTSTANDING_ALERTS</code> view:</p>
<pre dir="ltr">COLUMN REASON HEADING &#39;Reason for Alert&#39; FORMAT A35
COLUMN SUGGESTED_ACTION HEADING &#39;Suggested Response&#39; FORMAT A35
 
SELECT REASON, SUGGESTED_ACTION 
   FROM DBA_OUTSTANDING_ALERTS
   WHERE MODULE_ID LIKE &#39;%XSTREAM%&#39;;
</pre>
<p>To list the stateless alerts and cleared XStream stateful alerts, run the following query on the <code class="codeph">DBA_ALERT_HISTORY</code> view:</p>
<pre dir="ltr">COLUMN REASON HEADING &#39;Reason for Alert&#39; FORMAT A35
COLUMN SUGGESTED_ACTION HEADING &#39;Suggested Response&#39; FORMAT A35
 
SELECT REASON, SUGGESTED_ACTION 
   FROM DBA_ALERT_HISTORY 
   WHERE MODULE_ID LIKE &#39;%XSTREAM%&#39;;
</pre>
<p>Most alerts are cleared automatically when the cause of the problem disappears or is acknowledged by the database administrator. See <a class="olink TDPPT048" target="_blank" href="../TDPPT/tdppt_alerts.htm#TDPPT048"><span><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></a> for more information on clearing and purging alerts with Oracle Enterprise Manager Cloud Control.</p>
<div class="infoboxnotealso" id="GUID-F6B50FEB-2E08-4494-8676-D271EF0350B3__GUID-CCB6E845-63BB-4245-850C-C50099D2D73D">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink ADMIN005" target="_blank" href="../ADMIN/monitoring.htm#ADMIN005"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about alerts and for information about subscribing to the <code class="codeph">ALERT_QUE</code> queue to receive notifications when new alerts are generated</p>
</li>
<li>
<p><a class="olink ARPLS016" target="_blank" href="../ARPLS/d_server_alert.htm#ARPLS016"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information about the <code class="codeph">DBMS_SERVER_ALERT</code> package</p>
</li>
<li>
<p><span class="q">&#34;<a href="xstrm_xout_config.htm#GUID-41E37368-E434-4AD7-A5E8-4786E41C8C94" title="The Streams pool is a portion of memory in the System Global Area (SGA) that is used by both Oracle Streams and XStream components.">Configure the Streams pool</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="XSTRM73005"></a>
<div class="props_rev_3"><a id="GUID-D73FD162-E62F-4B03-98BC-7D5D697E4C58"></a>
<h3 id="XSTRM-GUID-D73FD162-E62F-4B03-98BC-7D5D697E4C58" class="sect3"><span class="enumeration_section">7.1.2</span> Using the Streams Configuration Report and Health Check Script</h3>
<div>
<p>The Streams Configuration Report and Health Check Script was designed for Oracle Streams, but it can provide important information about the XStream components in an XStream Out configuration. The report is useful to confirm that the prerequisites for XStream are met and to identify the database objects of interest for XStream.</p>
<div class="section">
<p>The report also analyzes the rules in the database to identify common problems with XStream rules.</p>
<p>The Streams Configuration Report and Health Check Script is available on the My Oracle Support (formerly Oracle MetaLink) Web site. To run the script, complete the following steps:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Using a Web browser, go to the My Oracle Support Web site:</span>
<div>
<p><a href="http://support.oracle.com/" target="_blank"><code class="codeph">http://support.oracle.com/</code></a></p>
</div>
</li>
<li class="stepexpand"><span>Log in to My Oracle Support.</span>
<div>
<div class="infobox-note" id="GUID-D73FD162-E62F-4B03-98BC-7D5D697E4C58__GUID-A3559190-B590-4B46-B8E3-4AF46DDF3B8F">
<p class="notep1">Note:</p>
<p>If you are not a My Oracle Support registered user, then click <span class="bold">Register Here</span> and register.</p>
</div>
</div>
</li>
<li class="stepexpand"><span>Find the database bulletin with the following title:</span>
<div>
<pre dir="ltr">Streams Configuration Report and Health Check Script
</pre>
<p>The doc ID for this bulletin is 273674.1.</p>
</div>
</li>
<li class="stepexpand"><span>Follow the instructions to download the script for your release, run the script, and analyze the results.</span></li>
</ol>
</div>
</div>
<a id="XSTRM72857"></a>
<div class="props_rev_3"><a id="GUID-C6B58766-8DCF-4ACD-9B2C-3E8A8C6F4106"></a>
<h3 id="XSTRM-GUID-C6B58766-8DCF-4ACD-9B2C-3E8A8C6F4106" class="sect3"><span class="enumeration_section">7.1.3</span> Checking the Trace File and Alert Log for Problems</h3>
<div>
<p>Messages about each capture process and outbound server are recorded in trace files for the database in which the process is running.</p>
<p>A local capture process runs on a source database and a downstream capture process runs on a downstream database. These trace file messages can help you to identify and resolve problems in an XStream Out configuration.</p>
<p>All trace files for background processes are written to the Automatic Diagnostic Repository. The names of trace files are operating system specific, but each file usually includes the name of the process writing the file.</p>
<p>For example, on some operating systems, the trace file name for a process is <span class="italic"><code class="codeph">sid_xxxx_iiiii</code></span><code class="codeph">.trc</code>, where:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">sid</code></span> is the system identifier for the database</p>
</li>
<li>
<p><span class="italic"><code class="codeph">xxxx</code></span> is the name of the process</p>
</li>
<li>
<p><span class="italic"><code class="codeph">iiiii</code></span> is the operating system process number</p>
</li>
</ul>
<p>Also, you can set the <code class="codeph">write_alert_log</code> parameter to <code class="codeph">y</code> for both a capture process and an outbound server. When this parameter is set to <code class="codeph">y</code>, which is the default setting, the alert log for the database contains messages about why the capture process or outbound server stopped.</p>
<p>You can control the information in the trace files by setting the <code class="codeph">trace_level</code> capture process or outbound server apply parameter using the <code class="codeph">SET_PARAMETER</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="xstrm_xout_trouble.htm#GUID-0EA16DF9-4354-4501-B9E5-23683733FDF2">Capture Process Trace Files</a></strong><br/>
A capture process is an Oracle background process named <code class="codeph">CP</code><span class="italic"><code class="codeph">nn</code></span>, where <span class="italic"><code class="codeph">nn</code></span> can include letters and numbers.</li>
<li class="ulchildlink"><strong><a href="xstrm_xout_trouble.htm#GUID-D695AC64-6A0F-45A5-8B00-B626DE44D601">Logminer Trace Files</a></strong><br/>
Logminer trace files are useful in understanding issues with XStream Out.</li>
<li class="ulchildlink"><strong><a href="xstrm_xout_trouble.htm#GUID-23E487D1-D176-4885-B8F1-D3B085F60F3C">Outbound Server Trace File</a></strong><br/>
An outbound server is an Oracle background process named <code class="codeph">AP</code><span class="italic"><code class="codeph">nn</code></span>, where <span class="italic"><code class="codeph">nn</code></span> can include letters and numbers.</li>
<li class="ulchildlink"><strong><a href="xstrm_xout_trouble.htm#GUID-78743ED9-A127-4670-AB88-B3570D5A4D2A">Client Application Trace Files</a></strong><br/>
Client application trace files can help to isolate a problem with XStream Out.</li>
</ul>
<div class="infoboxnotealso" id="GUID-C6B58766-8DCF-4ACD-9B2C-3E8A8C6F4106__GUID-04F91DFB-F894-4B3C-91BA-DE0DE3A0E2BD">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink ADMIN11007" target="_blank" href="../ADMIN/diag.htm#ADMIN11007"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a>for more information about trace files and the alert log, and for more information about their names and locations</p>
</li>
<li>
<p><a class="olink ARPLS" target="_blank" href="../ARPLS/toc.htm"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a>for more information about setting the <a class="olink ARPLS306" target="_blank" href="../ARPLS/d_cap_a.htm#ARPLS306"><code class="codeph">trace_level</code> capture process parameter</a> and the <a class="olink ARPLS314" target="_blank" href="../ARPLS/d_apply.htm#ARPLS314"><code class="codeph">trace_level</code> apply parameter</a></p>
</li>
<li>
<p>Your operating system specific Oracle documentation for more information about the names and locations of trace files</p>
</li>
</ul>
</div>
</div>
<a id="XSTRM72858"></a>
<div class="props_rev_3"><a id="GUID-0EA16DF9-4354-4501-B9E5-23683733FDF2"></a>
<h4 id="XSTRM-GUID-0EA16DF9-4354-4501-B9E5-23683733FDF2" class="sect4"><span class="enumeration_section">7.1.3.1</span> Capture Process Trace Files</h4>
<div>
<p>A capture process is an Oracle background process named <code class="codeph">CP</code><span class="italic"><code class="codeph">nn</code></span>, where <span class="italic"><code class="codeph">nn</code></span> can include letters and numbers.</p>
<p>For example, on some operating systems, if the system identifier for a database running a capture process is <code class="codeph">hqdb</code> and the capture process number is <code class="codeph">01</code>, then the trace file for the capture process starts with <code class="codeph">hqdb_CP01</code>.</p>
<div class="infoboxnotealso" id="GUID-0EA16DF9-4354-4501-B9E5-23683733FDF2__GUID-FC70A314-5E97-46A3-924D-38B8F0F71E75">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="xstrm_xout_mon.htm#GUID-60927BCC-BAD0-46BC-BA71-717277D5D29D" title="A sample query illustrates how to display change capture information about each capture process.">Displaying Change Capture Information About Each Capture Process</a>&#34;</span> for a query that displays the capture process number of a capture process</p>
</div>
</div>
</div>
<a id="XSTRM72949"></a>
<div class="props_rev_3"><a id="GUID-D695AC64-6A0F-45A5-8B00-B626DE44D601"></a>
<h4 id="XSTRM-GUID-D695AC64-6A0F-45A5-8B00-B626DE44D601" class="sect4"><span class="enumeration_section">7.1.3.2</span> Logminer Trace Files</h4>
<div>
<p>Logminer trace files are useful in understanding issues with XStream Out.</p>
<p>The logminer trace files are created when the parallelism capture process parameter is set to a value greater than 0. There are at least 3 logminer trace files that are generated and written to the Automated Diagnostic Repository.</p>
</div>
</div>
<a id="XSTRM72859"></a>
<div class="props_rev_3"><a id="GUID-23E487D1-D176-4885-B8F1-D3B085F60F3C"></a>
<h4 id="XSTRM-GUID-23E487D1-D176-4885-B8F1-D3B085F60F3C" class="sect4"><span class="enumeration_section">7.1.3.3</span> Outbound Server Trace File</h4>
<div>
<p>An outbound server is an Oracle background process named <code class="codeph">AP</code><span class="italic"><code class="codeph">nn</code></span>, where <span class="italic"><code class="codeph">nn</code></span> can include letters and numbers.</p>
<p>For example, on some operating systems, if the system identifier for a database running an outbound server is <code class="codeph">hqdb</code> and the outbound server number is <code class="codeph">01</code>, then the trace file for the outbound server starts with <code class="codeph">hqdb_ap01_xxxx.trc</code>.</p>
<p>An outbound server also uses other processes. Information about an outbound server might be recorded in the trace file for one or more of these processes. The process name of the reader server and apply servers is <code class="codeph">AS</code><span class="italic"><code class="codeph">nn</code></span>, where <span class="italic"><code class="codeph">nn</code></span> can include letters and numbers. So, on some operating systems, if the system identifier for a database running an outbound server is <code class="codeph">hqdb</code> and the process number is <code class="codeph">01</code>, then the trace file that contains information about a process used by an outbound server starts with <code class="codeph">hqdb_AS01</code>.</p>
<div class="infoboxnotealso" id="GUID-23E487D1-D176-4885-B8F1-D3B085F60F3C__GUID-863B7897-C2C8-40FE-AE23-C28A2D93CDF3">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="xstrm_xout_mon.htm#GUID-AAD5D552-A91B-4842-AA3A-95FD9356D2D9" title="An example illustrates monitoring session information about XStream Out components.">Monitoring Session Information About XStream Out Components</a>&#34;</span></p>
</div>
</div>
</div>
<a id="XSTRM72950"></a>
<div class="props_rev_3"><a id="GUID-78743ED9-A127-4670-AB88-B3570D5A4D2A"></a>
<h4 id="XSTRM-GUID-78743ED9-A127-4670-AB88-B3570D5A4D2A" class="sect4"><span class="enumeration_section">7.1.3.4</span> Client Application Trace Files</h4>
<div>
<p>Client application trace files can help to isolate a problem with XStream Out.</p>
<p>When troubleshooting errors, isolating a problem to a key component, or identifying potential performance issues, it is a good idea to examine the trace files from all of the key sources in your XStream environment. One key source to check is the client application trace files. The client trace files are located in the directory: <code class="codeph">$ORACLE_HOME/diag/clients/</code>.</p>
</div>
</div>
</div>
</div>
<a id="XSTRM72611"></a>
<div class="props_rev_3"><a id="GUID-7D01008F-B652-483D-B30D-44825CBE868F"></a>
<h2 id="XSTRM-GUID-7D01008F-B652-483D-B30D-44825CBE868F" class="sect2"><span class="enumeration_section">7.2</span> Problems and Solutions for XStream Out</h2>
<div>
<p>You can implement solutions for common problems with XStream Out.</p>
<p>In general, you can troubleshoot XStream outbound servers in the same way that you troubleshoot Oracle Streams apply processes. In addition, an XStream Out environment includes capture processes and queues, and might include other components, such as propagations, rules, and rule-based transformations. To troubleshoot these components, see the troubleshooting documentation in <a class="olink STRMS1016" target="_blank" href="../STRMS/pt_trouble.htm#STRMS1016"><span><cite>Oracle Streams Concepts and Administration</cite></span></a>.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="xstrm_xout_trouble.htm#GUID-5D4E37D6-025F-4C2C-85B7-931FB7F0A921">An OCI Client Application Cannot Attach to the Outbound Server</a></strong><br/>
An XStream client application cannot attach to an outbound server using the Oracle Call Interface (OCI) <code class="codeph">OCIXStreamOutAttach()</code> function.</li>
<li class="ulchildlink"><strong><a href="xstrm_xout_trouble.htm#GUID-CD511489-D916-4153-8F04-9946798F22F4">Changes Are Failing to Reach the Client Application in XStream Out</a></strong><br/>
In an XStream Out configuration, database changes that should be captured and streamed to the XStream client application are not reaching the client application.</li>
<li class="ulchildlink"><strong><a href="xstrm_xout_trouble.htm#GUID-8A83ECFA-00A1-4B0C-9BC7-AD1E06C3D282">The Capture Process Is Missing Required Redo Log Files</a></strong><br/>
When a capture process is started or stopped and restarted, it might need to scan redo log files that were generated before the log file that contains the SCN that corresponds to the required checkpoint SCN, and these files might have been removed.</li>
<li class="ulchildlink"><strong><a href="xstrm_xout_trouble.htm#GUID-4E6239CC-E633-45B9-8081-A1FEB5A64012">LCRs Streaming from an Outbound Server Are Missing Extra Attributes</a></strong><br/>
LCRs streaming from an outbound server are expected to include extra attributes, but these attributes are not included in the LCRs.</li>
<li class="ulchildlink"><strong><a href="xstrm_xout_trouble.htm#GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5">The XStream Out Client Application Is Unresponsive</a></strong><br/>
The XStream client application in an XStream Out configuration is unresponsive.</li>
</ul>
</div>
<a id="XSTRM72612"></a><a id="XSTRM72613"></a><a id="XSTRM72614"></a><a id="XSTRM72615"></a><a id="XSTRM1643"></a>
<div class="props_rev_3"><a id="GUID-5D4E37D6-025F-4C2C-85B7-931FB7F0A921"></a>
<h3 id="XSTRM-GUID-5D4E37D6-025F-4C2C-85B7-931FB7F0A921" class="sect3"><span class="enumeration_section">7.2.1</span> An OCI Client Application Cannot Attach to the Outbound Server</h3>
<div>
<p>An XStream client application cannot attach to an outbound server using the Oracle Call Interface (OCI) <code class="codeph">OCIXStreamOutAttach()</code> function.</p>
<div class="section">
<p>The following sections describe possible problems and their solutions.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Problem 1: Client Application Not Connected as Connect User</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The client application is not connected as the outbound server&#39;s connect user to the outbound server&#39;s database. The client application connected to the database as a different user.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To display information about the XStream Out servers that are accessible to the connect user:</p>
<ol>
<li>
<p>Connect to the outbound server database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the following query to determine the connect user:</p>
<pre dir="ltr">SELECT SERVER_NAME, 
       CONNECT_USER, 
       CAPTURE_NAME, 
       SOURCE_DATABASE,
       CAPTURE_USER,
       QUEUE_OWNER
  FROM ALL_XSTREAM_OUTBOUND;
</pre>
<p>This query displays the name of the user (<code class="codeph">connect_user</code>) who can connect to the outbound server and process the outbound LCRs.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Solution 1</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To correct problem 1:</p>
<ul style="list-style-type: disc;">
<li>
<p>Modify the client application to connect to the database as the connect user before attaching to the outbound server.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Problem 2: Client Application Not Passing Service Handle</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The client application is not passing a service handle to the outbound server.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Solution 2</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To correct problem 2:</p>
<ul style="list-style-type: disc;">
<li>
<p>Modify the client application so that it passes a service handle using <code class="codeph">OCISvcCtx</code> and not <code class="codeph">OCIServer</code>.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-5D4E37D6-025F-4C2C-85B7-931FB7F0A921__GUID-EE647C1A-19A6-48BA-BEF9-807C9113A468">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xstrm_xout_cncpt.htm#GUID-42DE906D-2E9E-4CD5-960A-02741B73D564" title="Understand security related to the client application and XStream components, as well as the privileges required by the capture user and the connect user.">XStream Out and Security</a>&#34;</span></p>
</li>
<li>
<p><a class="olink LNOCI72963" target="_blank" href="../LNOCI/oci26xstrm001.htm#LNOCI72963"><span><cite>Oracle Call Interface Programmer&#39;s Guide</cite></span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="XSTRM72616"></a><a id="XSTRM72617"></a><a id="XSTRM72618"></a><a id="XSTRM72619"></a><a id="XSTRM72620"></a><a id="XSTRM72621"></a><a id="XSTRM1644"></a>
<div class="props_rev_3"><a id="GUID-CD511489-D916-4153-8F04-9946798F22F4"></a>
<h3 id="XSTRM-GUID-CD511489-D916-4153-8F04-9946798F22F4" class="sect3"><span class="enumeration_section">7.2.2</span> Changes Are Failing to Reach the Client Application in XStream Out</h3>
<div>
<p>In an XStream Out configuration, database changes that should be captured and streamed to the XStream client application are not reaching the client application.</p>
<div class="section">
<p>The following sections describe possible problems and their solutions.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Problem 1: Capture Process Has Fallen Behind</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The capture process has fallen behind.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To determine whether the capture process has fallen behind:</p>
<ol>
<li>
<p>Connect to the outbound server database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the following query:</p>
<pre dir="ltr">COLUMN CAPTURE_NAME HEADING &#39;Capture|Name&#39; FORMAT A15
COLUMN STATE HEADING &#39;State&#39; FORMAT A15
COLUMN CREATE_MESSAGE HEADING &#39;Last LCR|Create Time&#39;
COLUMN ENQUEUE_MESSAGE HEADING &#39;Last|Enqueue Time&#39;

SELECT CAPTURE_NAME, STATE,
       TO_CHAR(CAPTURE_MESSAGE_CREATE_TIME, &#39;HH24:MI:SS MM/DD/YY&#39;) CREATE_MESSAGE,
       TO_CHAR(ENQUEUE_MESSAGE_CREATE_TIME, &#39;HH24:MI:SS MM/DD/YY&#39;) ENQUEUE_MESSAGE
  FROM V$XSTREAM_CAPTURE;
</pre>
<p>This query shows the current state of the capture process. This query also displays the time when the capture process last created a logical change record (LCR) and the time when the capture process last enqueued an LCR. If the times returned are before the time when the database changes were made, then the capture process must catch up and capture the changes.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Solution 1</p>
</div>
<!-- class="section" -->
<div class="section">
<p>No action is required. Normally, the capture process will catch up on its own without the need for intervention.</p>
<div class="infoboxnotealso" id="GUID-CD511489-D916-4153-8F04-9946798F22F4__GUID-CB08F898-47AB-4F60-805E-1EFDFD999A58">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink REFRN30639" target="_blank" href="../REFRN/GUID-A33A69B7-0260-4961-A1E2-089467D46740.htm#REFRN30639"><span><cite>Oracle Database Reference</cite></span></a></p>
</li>
<li>
<p><a class="olink STREP145" target="_blank" href="../STREP/man_gen_rep.htm#STREP145"><span><cite>Oracle Streams Replication Administrator&#39;s Guide</cite></span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Problem 2: Rules or Rule-Based Transformation Excluding Changes</p>
</div>
<!-- class="section" -->
<div class="section">
<p>Rules or rule-based transformations are excluding the changes that should be captured.</p>
<p>Rules determine which LCRs are captured by a capture process, sent from a source queue to a destination queue by a propagation, and sent to an XStream client application by an outbound server. If the rules are not configured properly, then the client application might not receive the LCRs it should receive. The client application might also receive LCRs that it should not receive.</p>
<p>Rule-based transformations modify the contents of LCRs. Therefore, if the expected change data is not reaching the client application, it might be because a rule-based transformation modified the data or deleted the data. For example, a <code class="codeph">DELETE_COLUMN</code> declarative rule-based transformation removes a column from an LCR.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Solution 2</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To correct problem 2:</p>
<ul style="list-style-type: disc;">
<li>
<p>Check the rules and rule-based transformations that are configured for each component in the stream from the capture process to the client application, and correct any problems.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-CD511489-D916-4153-8F04-9946798F22F4__GUID-F7D4670E-561B-47D5-8AAE-EE83419BBAF6">
<p class="notep1">See Also:</p>
<p><a class="olink STRMS006" target="_blank" href="../STRMS/strms_rules.htm#STRMS006"><span><cite>Oracle Streams Concepts and Administration</cite></span></a></p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Problem 3: LCRs Blocked in the Stream</p>
</div>
<!-- class="section" -->
<div class="section">
<p>If the capture process has not fallen behind, and there are no problems with rules or rule-based transformations, then LCRs might be blocked in the stream for some other reason. For example, a propagation or outbound server might be disabled, a database link might be broken, or there might be another problem.</p>
<p>You can track an LCR through a stream using one of the following methods:</p>
<ul style="list-style-type: disc;">
<li>
<p>Setting the <code class="codeph">message_tracking_frequency</code> capture process parameter to <code class="codeph">1</code> or another relatively low value</p>
<p>To disable LCR tracking when you use this method, set the <code class="codeph">message_tracking_frequency</code> capture process parameter to <code class="codeph">NULL</code> or exit the session.</p>
</li>
<li>
<p>Running the <code class="codeph">SET_MESSAGE_TRACKING</code> procedure in the <code class="codeph">DBMS_XSTREAM_ADM</code> package</p>
<p>To disable LCR tracking when you use this method, set the <code class="codeph">tracking_label</code> parameter to <code class="codeph">NULL</code> in the <code class="codeph">SET_MESSAGE_TRACKING</code> procedure or exit the session.</p>
</li>
</ul>
<p>After using one of these methods, use the <code class="codeph">V$XSTREAM_MESSAGE_TRACKING</code> view to monitor the progress of LCRs through a stream. By tracking an LCR through the stream, you can determine where the LCR is blocked.</p>
<p>In addition, if a propagation is used to send LCRs in the configuration, then you can check the current state of the propagation sender by running the following query:</p>
<pre dir="ltr">SELECT STATE FROM V$PROPAGATION_SENDER;
</pre>
<p>You can check the current state of an outbound server by running the following query:</p>
<pre dir="ltr">SELECT SERVER_NAME, STATE FROM V$XSTREAM_OUTBOUND_SERVER;
</pre>
<p>You can verify that the client application is attached to the outbound server by running the following query:</p>
<pre dir="ltr">COLUMN SERVER_NAME HEADING &#39;Capture|Name&#39; FORMAT A30
COLUMN STATUS HEADING &#39;Status&#39; FORMAT A8

SELECT SERVER_NAME, STATUS FROM ALL_XSTREAM_OUTBOUND;
</pre>
<p>The <code class="codeph">STATUS</code> column shows <code class="codeph">ATTACHED</code> when the client application is attached to the outbound server.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Solution 3</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To correct problem 3:</p>
<ul style="list-style-type: disc;">
<li>
<p>Take the appropriate action based on the reason that the LCR is blocked. For example, if a propagation is disabled, then enable it.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-CD511489-D916-4153-8F04-9946798F22F4__GUID-BFC7B999-F8A1-45F8-8984-F84E90171290">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink STREP145" target="_blank" href="../STREP/man_gen_rep.htm#STREP145"><span><cite>Oracle Streams Replication Administrator&#39;s Guide</cite></span></a> for more information about tracking LCRs through a stream</p>
</li>
<li>
<p><a class="olink ARPLS306" target="_blank" href="../ARPLS/d_cap_a.htm#ARPLS306"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">message_tracking_frequency</code> capture process parameter</p>
</li>
<li>
<p><a class="olink STRMS1016" target="_blank" href="../STRMS/pt_trouble.htm#STRMS1016"><span><cite>Oracle Streams Concepts and Administration</cite></span></a> about troubleshooting Oracle Streams components</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="XSTRM72861"></a><a id="XSTRM72862"></a><a id="XSTRM72860"></a>
<div class="props_rev_3"><a id="GUID-8A83ECFA-00A1-4B0C-9BC7-AD1E06C3D282"></a>
<h3 id="XSTRM-GUID-8A83ECFA-00A1-4B0C-9BC7-AD1E06C3D282" class="sect3"><span class="enumeration_section">7.2.3</span> The Capture Process Is Missing Required Redo Log Files</h3>
<div>
<p>When a capture process is started or stopped and restarted, it might need to scan redo log files that were generated before the log file that contains the SCN that corresponds to the required checkpoint SCN, and these files might have been removed.</p>
<div class="section">
<p>You can query the <code class="codeph">ALL_CAPTURE</code> data dictionary view to determine the required checkpoint SCN for a capture process. It is also helpful to query the <code class="codeph">V$XSTREAM_CAPTURE</code> and check the <code class="codeph">STATE</code> column. The state of a capture process describes what the capture process is doing currently. In this case, you can gain additional insight as to why the capture process is missing or waiting for redo log files.</p>
<pre dir="ltr">COLUMN CAPTURE_NAME HEADING &#39;Capture Name&#39; FORMAT A30
COLUMN STATE HEADING &#39;State&#39; FORMAT A30

SELECT CAPTURE_NAME, STATE FROM V$XSTREAM_CAPTURE;

CAPTURE_NAME            STATE
------------------      -----------------
XOUT_SRC_CAPTURE        WAITING FOR REDO
</pre>
<p>Additional information might be displayed along with the state information when you query the <code class="codeph">V$XSTREAM_CAPTURE</code> view. The additional information can help you to determine why the capture process is waiting for redo. For example, a statement similar to the following might appear for the <code class="codeph">STATE</code> column when you query the view:</p>
<pre dir="ltr">WAITING FOR REDO: LAST SCN MINED 6700345
</pre>
<p>In this case, the output shows the last system change number (SCN) scanned by the capture process. In other cases, the output might display the redo log file name explicitly. Either way, the additional information can help you identify the redo log file for which the capture process is waiting. To correct the problem, make any missing redo log files available to the capture process.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Problem: Required Redo Log Files Were Removed</p>
</div>
<!-- class="section" -->
<div class="section">
<p>Removing required redo log files before they are scanned by a capture process causes the capture process to abort and results in the following error in a capture process trace file:</p>
<pre dir="ltr">ORA-01291: missing logfile
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Solution: Restore Missing Redo Log Files and Prevent Future Problems</p>
</div>
<!-- class="section" -->
<div class="section">
<p>If you see this error, then try restoring any missing redo log files and restarting the capture process. You can check the <code class="codeph">V$LOGMNR_LOGS</code> dynamic performance view to determine the missing SCN range, and add the relevant redo log files. A capture process needs the redo log file that includes the required checkpoint SCN and all subsequent redo log files. You can query the <code class="codeph">REQUIRED_CHECKPOINT_SCN</code> column in the <code class="codeph">ALL_CAPTURE</code> data dictionary view to determine the required checkpoint SCN for a capture process.</p>
<p>If the capture process is disabled for longer than the amount of time specified in the <code class="codeph">CONTROL_FILE_RECORD_KEEP_TIME</code> initialization parameter, then information about the missing redo log files might have been replaced in the control file. You can query the <code class="codeph">V$ARCHIVE_LOG</code> view to see if the log file names are listed. If they are not listed, then you can register them with a <code class="codeph">ALTER DATABASE REGISTER OR REPLACE LOGFILE</code> SQL statement.</p>
<p>If you are using the fast recovery area feature of Recovery Manager (RMAN) on a source database in an XStream environment, then RMAN might delete archived redo log files that are required by a capture process. RMAN might delete these files when the disk space used by the recovery-related files is nearing the specified disk quota for the fast recovery area. To prevent this problem in the future, complete one or more of the following actions:</p>
<ul style="list-style-type: disc;">
<li>
<p>Increase the disk quota for the fast recovery area. Increasing the disk quota makes it less likely that RMAN will delete a required archived redo log file, but it will not always prevent the problem.</p>
</li>
<li>
<p>Configure the source database to store archived redo log files in a location other than the fast recovery area. A local capture process will be able to use the log files in the other location if the required log files are missing in the fast recovery area. In this case, a database administrator must manage the log files manually in the other location.</p>
</li>
</ul>
<p>RMAN always ensures that archived redo log files are backed up before it deletes them. If RMAN deletes an archived redo log file that is required by a capture process, then RMAN records this action in the alert log.</p>
<div class="infoboxnotealso" id="GUID-8A83ECFA-00A1-4B0C-9BC7-AD1E06C3D282__GUID-6371C771-E904-4D0E-9F32-BAD8D2344207">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="xstrm_xout_cncpt.htm#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="Become familiar with concepts related to capture processes.">Capture Processes</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="xstrm_xout_cncpt.htm#GUID-00269B9D-DBB8-4EC5-ADAB-87FFCC462372" title="RMAN deletion policies can affect capture processes.">XStream Out and Recovery Manager</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="xstrm_xout_mon.htm#GUID-68AF1BB9-C49E-4CCB-AB2B-346E57B4CFF5" title="A sample query illustrates how to display redo log files that are required by each capture process.">Displaying Redo Log Files That Are Required by Each Capture Process</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="XSTRM72622"></a><a id="XSTRM72623"></a><a id="XSTRM72624"></a><a id="XSTRM1647"></a>
<div class="props_rev_3"><a id="GUID-4E6239CC-E633-45B9-8081-A1FEB5A64012"></a>
<h3 id="XSTRM-GUID-4E6239CC-E633-45B9-8081-A1FEB5A64012" class="sect3"><span class="enumeration_section">7.2.4</span> LCRs Streaming from an Outbound Server Are Missing Extra Attributes</h3>
<div>
<p>LCRs streaming from an outbound server are expected to include extra attributes, but these attributes are not included in the LCRs.</p>
<div class="section">
<p>LCRs can contain the following extra attributes related to database changes:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">row_id</code></p>
</li>
<li>
<p><code class="codeph">serial#</code></p>
</li>
<li>
<p><code class="codeph">session#</code></p>
</li>
<li>
<p><code class="codeph">thread#</code></p>
</li>
<li>
<p><code class="codeph">tx_name</code></p>
</li>
<li>
<p><code class="codeph">username</code></p>
</li>
</ul>
<p>By default, a capture process does not capture these extra attributes. If you want extra attributes to be included in LCRs streamed from an outbound server to an XStream client application, but the LCRs do not contain values for extra attributes, then make sure the capture process that captures changes for the outbound server is configured to capture values for the extra attributes.</p>
<p>The following sections describe the possible problem and its solution.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Problem: Capture Process Not Configured to Capture Extra Attributes</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The capture process is not configured to capture the required extra attributes.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To display the extra attributes currently being captured by the capture processes in a database:</p>
<ol>
<li>
<p>Connect to the database running the capture process as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the following query:</p>
<pre dir="ltr">COLUMN CAPTURE_NAME HEADING &#39;Capture Process&#39; FORMAT A30
COLUMN ATTRIBUTE_NAME HEADING &#39;Attribute Name&#39; FORMAT A30
 
SELECT CAPTURE_NAME, ATTRIBUTE_NAME
  FROM ALL_CAPTURE_EXTRA_ATTRIBUTES
  WHERE INCLUDE = &#39;YES&#39;
  ORDER BY CAPTURE_NAME;
</pre>
<p>If an extra attribute is not displayed by this query, then it is not being captured.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Solution</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To solve the problem, configure the capture process to capture the required extra attributes:</p>
<ol>
<li>
<p>Connect to the outbound server database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the <code class="codeph">INCLUDE_EXTRA_ATTRIBUTE</code> procedure in the <code class="codeph">DBMS_CAPTURE_ADM</code> package.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="example" id="GUID-4E6239CC-E633-45B9-8081-A1FEB5A64012__GUID-141A55D1-ABB3-42B1-8417-3095948AF624">
<p class="titleinexample">Example 7-1 Including the tx_name Attribute for the Capture Process xcapture</p>
<pre dir="ltr">BEGIN
  DBMS_CAPTURE_ADM.INCLUDE_EXTRA_ATTRIBUTE(
    capture_name   =&gt; &#39;xcapture&#39;,
    attribute_name =&gt; &#39;tx_name&#39;,
    include        =&gt; TRUE);
END;
/
</pre>
<div class="infoboxnotealso" id="GUID-4E6239CC-E633-45B9-8081-A1FEB5A64012__GUID-327CC9F3-9358-4052-8E3C-678887AB9600">
<p class="notep1">See Also:</p>
<p><a class="olink STRMS302" target="_blank" href="../STRMS/strms_capture.htm#STRMS302"><span><cite>Oracle Streams Concepts and Administration</cite></span></a></p>
</div>
</div>
<!-- class="example" --></div>
</div>
<a id="XSTRM72625"></a><a id="XSTRM72626"></a><a id="XSTRM72980"></a><a id="XSTRM72981"></a><a id="XSTRM72627"></a><a id="XSTRM72628"></a><a id="XSTRM1648"></a>
<div class="props_rev_3"><a id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5"></a>
<h3 id="XSTRM-GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5" class="sect3"><span class="enumeration_section">7.2.5</span> The XStream Out Client Application Is Unresponsive</h3>
<div>
<p>The XStream client application in an XStream Out configuration is unresponsive.</p>
<div class="section">
<p>The following sections describe the possible problem and its solution.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Problem 1: Streams Pool Size Is Too Small</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The Streams pool size might be too small.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To determine whether the Streams pool size is too small:</p>
<ol>
<li>
<p>Connect to the outbound server database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the following queries at the database that contains the outbound server:</p>
<ul style="list-style-type: disc;">
<li>
<p>Query the <code class="codeph">V$PROPAGATION_RECEIVER</code> view.:</p>
<pre dir="ltr">SELECT STATE FROM V$PROPAGATION_RECEIVER;
</pre>
<p>If the state is <code class="codeph">WAITING</code> <code class="codeph">FOR</code> <code class="codeph">MEMORY</code>, then consider increasing the Streams pool size.</p>
</li>
<li>
<p>Query the <code class="codeph">V$STREAMS_POOL_STATISTICS</code> view.:</p>
<pre dir="ltr">SELECT TOTAL_MEMORY_ALLOCATED/CURRENT_SIZE FROM V$STREAMS_POOL_STATISTICS;
</pre>
<p>If the value returned is.90 or greater, then consider increasing the Streams pool size.</p>
</li>
</ul>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Solution 1</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To correct problem 1:</p>
<ul style="list-style-type: disc;">
<li>
<p>Increase the Streams pool size by modifying the <code class="codeph">STREAMS_POOL_SIZE</code> initialization parameter or by modifying other initialization parameters related to memory.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5__GUID-562C7F8D-41DB-4CFC-903D-75E55116D0AD">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink REFRN30639" target="_blank" href="../REFRN/GUID-A33A69B7-0260-4961-A1E2-089467D46740.htm#REFRN30639"><span><cite>Oracle Database Reference</cite></span></a></p>
</li>
<li>
<p><a class="olink STREP202" target="_blank" href="../STREP/prep_rep.htm#STREP202"><span><cite>Oracle Streams Replication Administrator&#39;s Guide</cite></span></a></p>
</li>
<li>
<p><a class="olink ADMIN00202" target="_blank" href="../ADMIN/create.htm#ADMIN00202"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about setting initialization parameters</p>
</li>
</ul>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Problem 2: The Maximum SGA Size for the Capture Process Is Too Small</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The <code class="codeph">max_sga_size</code> capture process parameter controls the amount of system global area (SGA) memory allocated specifically to the capture process, in megabytes.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To determine whether the maximum SGA size for the capture process is too small:</p>
<ol>
<li>
<p>Connect to the database running the XStream component as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the following queries at the database:</p>
<ul style="list-style-type: disc;">
<li>
<p>Query the <code class="codeph">V$XSTREAM_CAPTURE</code> view:</p>
<pre dir="ltr">SELECT CAPTURE_NAME AS CAP,
        SGA_USED/(1024*1024) AS USED, 
        SGA_ALLOCATED/(1024*1024) AS ALLOCATED, 
        TOTAL_MESSAGES_CAPTURED AS CAPTURED, 
        TOTAL_MESSAGES_ENQUEUED AS ENQUEUED 
  FROM V$XSTREAM_CAPTURE;
</pre>
<p>If the <code class="codeph">USED</code> field is equal to or almost equal to the <code class="codeph">ALLOCATED</code> field in the output, then you might need to increase the maximum SGA size for the capture process.</p>
</li>
<li>
<p>Query the <code class="codeph">V$LOGMNR_SESSION</code> view:</p>
<pre dir="ltr">SELECT SESSION_NAME AS CAP, 
        MAX_MEMORY_SIZE/(1024*1024) AS LMMAX, 
        USED_MEMORY_SIZE/(1024*1024) AS LMUSED, 
        USED_MEMORY_SIZE/MAX_MEMORY_SIZE AS PCT 
  FROM V$LOGMNR_SESSION;
</pre>
<p>If the <code class="codeph">PCT</code> field is equal to or almost equal to 1 in the output, then you might need to increase the maximum SGA size for the capture process.</p>
</li>
</ul>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Solution 2</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To correct problem 2:</p>
<ul style="list-style-type: disc;">
<li>
<p>Increase the maximum SGA size for the capture process by modifying the <code class="codeph">max_sga_size</code> capture process parameter.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5__GUID-667EDEBD-89D6-4C48-A18E-2047AB81FEDF">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="xstrm_xout_man.htm#GUID-AB998819-B851-478E-8412-3E30EBFC8FD4" title="Capture process parameters control the way a capture process operates. You set a capture process parameter using the SET_PARAMETER procedure in the DBMS_CAPTURE_ADM package.">Setting a Capture Process Parameter</a>&#34;</span></p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Problem 3: Programming Errors</p>
</div>
<!-- class="section" -->
<div class="section">
<p>If there is enough memory in the Streams pool and the <code class="codeph">MAX_SGA_SIZE</code> capture process parameter and apply parameter are set correctly, then check your client application for programming errors.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Solution 3</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To correct problem 3:</p>
<ul style="list-style-type: disc;">
<li>
<p>Correct the programming errors.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="XSTRM72631"></a>
<div class="props_rev_3"><a id="GUID-BCE5DDD7-44FB-4EBE-B855-8850ADE9CAEB"></a>
<h2 id="XSTRM-GUID-BCE5DDD7-44FB-4EBE-B855-8850ADE9CAEB" class="sect2"><span class="enumeration_section">7.3</span> How to Get More Help with XStream Out</h2>
<div>
<p>Oracle Support can provide more help with XStream Out.</p>
<p>You can check My Oracle Support at <a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a> for more solutions to your problem.</p>
<p>You can visit <a href="http://www.oracle.com/support/contact.html" target="_blank"><code class="codeph">http://www.oracle.com/support/contact.html</code></a> for more information about Oracle Support.</p>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5143">
<tr>
<td class="cellalignment5150">
<table class="cellalignment5148">
<tr>
<td class="cellalignment5147"><a href="xstrm_xout_mon.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5147"><a href="xstrm_pt_xin.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2009, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5152">
<table class="cellalignment5146">
<tr>
<td class="cellalignment5147"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5147"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5147"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5147"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5147"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5147"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>