<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-114497"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Data%20Type%20Conversions"></a><title>Data Type Conversions</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2016-07-20T13:00:08Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database VLDB and Partitioning Guide"/>
<meta name="dcterms.identifier" content="E41057-12"/>
<meta name="dcterms.isVersionOf" content="VLDBG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2008, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-6C660105-8ECE-4426-A795-5884E84B0A48.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-C3CEB8F8-064E-45C5-97EE-E3BF1D00D517.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41057-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-B3D411C4-FC7B-4630-ACB0-E49BFA540053"></a> <span id="PAGE" style="display:none;">65/481</span> <!-- End Header --><a id="VLDBG1238"></a>
<h1 id="VLDBG-GUID-B3D411C4-FC7B-4630-ACB0-E49BFA540053" class="sect1">Data Type Conversions</h1>
<div>
<p><a id="d14671e61" class="indexterm-anchor"></a>To get the maximum performance benefit from partition pruning, you should avoid constructs that require the database to convert the data type you specify. Data type conversions typically result in dynamic pruning when static pruning would have otherwise been possible. SQL statements that benefit from static pruning perform better than statements that benefit from dynamic pruning.</p>
<p>A common case of data type conversions occurs when using the Oracle <code>DATE</code> data type. An Oracle <code>DATE</code> data type is not a character string but is only represented as such when querying the database; the format of the representation is defined by the NLS setting of the instance or the session. Consequently, the same reverse conversion has to happen when inserting data into a <code>DATE</code> field or when specifying a predicate on such a field.</p>
<p>A conversion can either happen implicitly or explicitly by specifying a <code>TO_DATE</code> conversion. Only a properly applied <code>TO_DATE</code> function guarantees that the database can uniquely determine the date value and using it potentially for static pruning, which is especially beneficial for single partition access.</p>
<p>Consider the following example that runs against the sample <code>SH</code> schema in Oracle Database. You would like to know the total revenue number for the year 2000. There are multiple ways you can retrieve the answer to the query, but not every method is equally efficient.</p>
<pre dir="ltr">explain plan for SELECT SUM(amount_sold) total_revenue
FROM sales,
WHERE time_id between &#39;01-JAN-00&#39; and &#39;31-DEC-00&#39;;
</pre>
<p>The plan should now be similar to the following:</p>
<pre dir="ltr">----------------------------------------------------------------------------------------------------
| Id  | Operation                  | Name  | Rows  | Bytes | Cost (%CPU)| Time     | Pstart| Pstop |
----------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT           |       |     1 |    13 |   525   (8)| 00:00:07 |       |       |
|   1 |  SORT AGGREGATE            |       |     1 |    13 |            |          |       |       |
|*  2 |   FILTER                   |       |       |       |            |          |       |       |
|   3 |    PARTITION RANGE ITERATOR|       |   230K|  2932K|   525   (8)| 00:00:07 |   KEY |   KEY |
|*  4 |     TABLE ACCESS FULL      | SALES |   230K|  2932K|   525   (8)| 00:00:07 |   KEY |   KEY |
----------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - filter(TO_DATE(&#39;01-JAN-00&#39;)&lt;=TO_DATE(&#39;31-DEC-00&#39;))
   4 - filter(&#34;TIME_ID&#34;&gt;=&#39;01-JAN-00&#39; AND &#34;TIME_ID&#34;&lt;=&#39;31-DEC-00&#39;) 
</pre>
<p>In this case, the keyword <code>KEY</code> for both <code>PSTART</code> and <code>PSTOP</code> means that dynamic partition pruning occurs at run-time. Consider the following case.</p>
<pre dir="ltr">explain plan for select sum(amount_sold)
from sales
where time_id between &#39;01-JAN-2000&#39; and &#39;31-DEC-2000&#39; ;
</pre>
<p>The execution plan now shows the following:</p>
<pre dir="ltr">----------------------------------------------------------------------------------------
| Id  | Operation                 | Name  | Rows  | Bytes | Cost (%CPU)| Pstart| Pstop |
----------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT          |       |     1 |    13 |   127   (4)|       |       |
|   1 |  SORT AGGREGATE           |       |     1 |    13 |            |       |       |
|   2 |   PARTITION RANGE ITERATOR|       |   230K|  2932K|   127   (4)|    13 |    16 |
|*  3 |    TABLE ACCESS FULL      | SALES |   230K|  2932K|   127   (4)|    13 |    16 |
----------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------

   3 - filter(&#34;TIME_ID&#34;&lt;=TO_DATE(&#39; 2000-12-31 00:00:00&#39;, &#34;syyyy-mm-dd hh24:mi:ss&#39;))
</pre>
<div class="infobox-note" id="GUID-B3D411C4-FC7B-4630-ACB0-E49BFA540053__GUID-FB2F8EAD-76AB-486E-96B8-3BF0FFFE0A7F">
<p class="notep1">Note:</p>
<p>The <code>Time</code> column was removed from the execution plan.</p>
</div>
<p>The execution plan shows static partition pruning. The query accesses a contiguous list of partitions 13 to 16. In this particular case, the way the date format was specified matches the NLS date format setting. Though this example shows the most efficient execution plan, you cannot rely on the NLS date format setting to define a certain format.</p>
<pre dir="ltr">alter session set nls_date_format=&#39;fmdd Month yyyy&#39;;

explain plan for select sum(amount_sold)
from sales
where time_id between &#39;01-JAN-2000&#39; and &#39;31-DEC-2000&#39; ;
</pre>
<p>The execution plan now shows the following:</p>
<pre dir="ltr">-----------------------------------------------------------------------------------------
| Id  | Operation                  | Name  | Rows  | Bytes | Cost (%CPU)| Pstart| Pstop |
-----------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT           |       |     1 |    13 |   525   (8)|       |       |
|   1 |  SORT AGGREGATE            |       |     1 |    13 |            |       |       |
|*  2 |   FILTER                   |       |       |       |            |       |       |
|   3 |    PARTITION RANGE ITERATOR|       |   230K|  2932K|   525   (8)|   KEY |   KEY |
|*  4 |     TABLE ACCESS FULL      | SALES |   230K|  2932K|   525   (8)|   KEY |   KEY |
-----------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - filter(TO_DATE(&#39;01-JAN-2000&#39;)&lt;=TO_DATE(&#39;31-DEC-2000&#39;))
   4 - filter(&#34;TIME_ID&#34;&gt;=&#39;01-JAN-2000&#39; AND &#34;TIME_ID&#34;&lt;=&#39;31-DEC-2000&#39;)
</pre>
<div class="infobox-note" id="GUID-B3D411C4-FC7B-4630-ACB0-E49BFA540053__GUID-30F3D909-0B3C-4EC0-BD99-0CCB55DFB40C">
<p class="notep1">Note:</p>
<p>The <code>Time</code> column was removed from the execution plan.</p>
</div>
<p>This plan, which uses dynamic pruning, again is less efficient than the static pruning execution plan. To guarantee a static partition pruning plan, you should explicitly convert data types to match the partition column data type. For example:</p>
<pre dir="ltr">explain plan for select sum(amount_sold)
from sales
where time_id between to_date(&#39;01-JAN-2000&#39;,&#39;dd-MON-yyyy&#39;)
  and to_date(&#39;31-DEC-2000&#39;,&#39;dd-MON-yyyy&#39;) ;


----------------------------------------------------------------------------------------
| Id  | Operation                 | Name  | Rows  | Bytes | Cost (%CPU)| Pstart| Pstop |
----------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT          |       |     1 |    13 |   127   (4)|       |       |
|   1 |  SORT AGGREGATE           |       |     1 |    13 |            |       |       |
|   2 |   PARTITION RANGE ITERATOR|       |   230K|  2932K|   127   (4)|    13 |    16 |
|*  3 |    TABLE ACCESS FULL      | SALES |   230K|  2932K|   127   (4)|    13 |    16 |
----------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   3 - filter(&#34;TIME_ID&#34;&lt;=TO_DATE(&#39; 2000-12-31 00:00:00&#39;, &#39;syyyy-mm-dd hh24:mi:ss&#39;))
</pre>
<div class="infobox-note" id="GUID-B3D411C4-FC7B-4630-ACB0-E49BFA540053__GUID-9EB6FF49-D906-49F2-9FAC-07B8377D61BC">
<p class="notep1">Note:</p>
<p>The <code>Time</code> column was removed from the execution plan.</p>
</div>
<div class="infoboxnotealso" id="GUID-B3D411C4-FC7B-4630-ACB0-E49BFA540053__GUID-E02543A1-66EF-46A1-A7CD-7281826AC601">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF00202" target="_blank" href="../SQLRF/sql_elements001.htm#SQLRF00202"><span class="italic">Oracle Database SQL Language Reference</span></a> for details about the <code>DATE</code> data type</p>
</li>
<li>
<p><a class="olink NLSPG003" target="_blank" href="../NLSPG/ch3globenv.htm#NLSPG003"><span class="italic">Oracle Database Globalization Support Guide</span></a> for details about NLS settings and globalization issues</p>
</li>
</ul>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2957">
<tr>
<td class="cellalignment2964">
<table class="cellalignment2962">
<tr>
<td class="cellalignment2961"><a href="GUID-6C660105-8ECE-4426-A795-5884E84B0A48.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2961"><a href="GUID-C3CEB8F8-064E-45C5-97EE-E3BF1D00D517.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2008, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2966">
<table class="cellalignment2960">
<tr>
<td class="cellalignment2961"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2961"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2961"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2961"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2961"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2961"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>