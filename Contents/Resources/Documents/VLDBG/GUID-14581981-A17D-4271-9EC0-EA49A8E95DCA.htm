<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-114193"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Parameters%20Affecting%20Resource%20Consumption%20for%20Parallel%20DML%20and%20Parallel%20DDL"></a><title>Parameters Affecting Resource Consumption for Parallel DML and Parallel DDL</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2016-07-20T13:00:08Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database VLDB and Partitioning Guide"/>
<meta name="dcterms.identifier" content="E41057-12"/>
<meta name="dcterms.isVersionOf" content="VLDBG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2008, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-7B21CE94-D1A9-4167-97A8-CE86BFB92192.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-E9E2FCBA-8345-4D10-BDF2-3842866A1D11.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41057-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-14581981-A17D-4271-9EC0-EA49A8E95DCA"></a> <span id="PAGE" style="display:none;">432/481</span> <!-- End Header --><a id="VLDBG1502"></a>
<h1 id="VLDBG-GUID-14581981-A17D-4271-9EC0-EA49A8E95DCA" class="sect1">Parameters Affecting Resource Consumption for Parallel DML and Parallel DDL</h1>
<div>
<p>The parameters that affect parallel DML and parallel DDL resource consumption are:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-14581981-A17D-4271-9EC0-EA49A8E95DCA.htm#GUID-5322BB7B-FBDB-4FD8-9ABC-C11ADD9BFD6B">TRANSACTIONS</a></p>
</li>
<li>
<p><a href="GUID-14581981-A17D-4271-9EC0-EA49A8E95DCA.htm#GUID-B0FA30D6-8F34-4BBA-BC99-B1040CAB42E0">FAST_START_PARALLEL_ROLLBACK</a></p>
</li>
<li>
<p><a href="GUID-14581981-A17D-4271-9EC0-EA49A8E95DCA.htm#GUID-C9A03D1A-66DA-4C73-813A-8AD5BC38952B">DML_LOCKS</a></p>
</li>
</ul>
<p><a id="d69866e79" class="indexterm-anchor"></a>Parallel insert, update, and delete operations require more resources than serial DML operations. Similarly, <code>PARALLEL</code> <code>CREATE</code> <code>TABLE</code> <code>AS</code> <code>SELECT</code> and <code>PARALLEL</code> <code>CREATE</code> <code>INDEX</code> can require more resources. For this reason, you may need to increase the value of several additional initialization parameters. These parameters do <span class="italic">not</span> affect resources for queries.</p>
<div class="infoboxnotealso" id="GUID-14581981-A17D-4271-9EC0-EA49A8E95DCA__GUID-5426F85D-C5EB-40E5-AA61-A83BDC2A9662">
<p class="notep1">See Also:</p>
<p><a class="olink REFRN001" target="_blank" href="../REFRN/GUID-6F1C3203-0AA0-4AF1-921C-A027DD7CB6A9.htm#REFRN001"><span class="italic">Oracle Database Reference</span></a> for information about initialization parameters</p>
</div>
</div>
<a id="VLDBG1503"></a>
<div class="props_rev_3"><a id="GUID-5322BB7B-FBDB-4FD8-9ABC-C11ADD9BFD6B"></a>
<h2 id="VLDBG-GUID-5322BB7B-FBDB-4FD8-9ABC-C11ADD9BFD6B" class="sect2">TRANSACTIONS</h2>
<div>
<div class="section">
<p>For parallel DML and DDL, each query server process starts a transaction. The parallel execution coordinator uses the <a id="d69866e184" class="indexterm-anchor"></a>two-phase commit protocol to commit transactions; therefore, the number of transactions being processed increases by the DOP. Consequently, you might need to increase the value of the <code>TRANSACTIONS</code> initialization parameter.</p>
<p>The <code>TRANSACTIONS</code> parameter specifies the maximum number of concurrent transactions. The default assumes no parallelism. For example, if you have a DOP of 20, you have 20 more new server transactions (or 40, if you have two server sets) and 1 coordinator transaction. In this case, you should increase <code>TRANSACTIONS</code> by 21 (or 41) if the transactions are running in the same instance. If you do not set this parameter, Oracle Database sets it to a value equal to 1.1 x <code>SESSIONS</code>. This discussion does not apply if you are using server-managed undo.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="VLDBG1504"></a>
<div class="props_rev_3"><a id="GUID-B0FA30D6-8F34-4BBA-BC99-B1040CAB42E0"></a>
<h2 id="VLDBG-GUID-B0FA30D6-8F34-4BBA-BC99-B1040CAB42E0" class="sect2">FAST_START_PARALLEL_ROLLBACK</h2>
<div>
<div class="section">
<p>If a system fails when there are uncommitted parallel DML or DDL transactions, you can speed up transaction recovery during startup by using the <code>FAST_START_PARALLEL_ROLLBACK</code> parameter.</p>
<p>This parameter controls the DOP used when recovering terminated transactions. Terminated transactions are transactions that are active before a system failure. By default, the DOP is chosen to be at most two times the value of the <code>CPU_COUNT</code> parameter.</p>
<p>If the default DOP is insufficient, set the parameter to <code>HIGH</code>. This gives a maximum DOP of at most four times the value of the <code>CPU_COUNT</code> parameter. This feature is available by default.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="VLDBG1506"></a><a id="VLDBG1505"></a>
<div class="props_rev_3"><a id="GUID-C9A03D1A-66DA-4C73-813A-8AD5BC38952B"></a>
<h2 id="VLDBG-GUID-C9A03D1A-66DA-4C73-813A-8AD5BC38952B" class="sect2">DML_LOCKS</h2>
<div>
<div class="section">
<p>This parameter specifies the maximum number of DML locks. Its value should equal the total number of locks on all tables referenced by all users. A parallel DML operation&#39;s lock requirement is very different from serial DML. Parallel DML holds many more locks, so you should increase the value of the <code>DML_LOCKS</code> parameter by equal amounts.</p>
<div class="infobox-note" id="GUID-C9A03D1A-66DA-4C73-813A-8AD5BC38952B__GUID-1DA504CF-11C7-4FB4-A5CF-DD55B074F01F">
<p class="notep1">Note:</p>
<p>Parallel DML operations are not performed when the table lock of the target table is disabled.</p>
</div>
<p><a href="GUID-14581981-A17D-4271-9EC0-EA49A8E95DCA.htm#GUID-C9A03D1A-66DA-4C73-813A-8AD5BC38952B__CACCBCJH" title="Locks Acquired by Parallel DML Statements">Table 8-4</a> shows the types of locks acquired by coordinator and parallel execution server processes for different types of parallel DML statements. Using this information, you can determine the value required for these parameters.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-C9A03D1A-66DA-4C73-813A-8AD5BC38952B__CACCBCJH">
<hr/>
<p class="titleintable">Table 8-4 Locks Acquired by Parallel DML Statements</p>
<table class="cellalignment2967" title="Locks Acquired by Parallel DML Statements" summary="Locks Acquired by Parallel DML Statements">
<thead align="left">
<tr>
<th class="cellalignment2968" id="d69866e372">Type of Statement</th>
<th class="cellalignment2969" id="d69866e375">Coordinator Process Acquires:</th>
<th class="cellalignment2970" id="d69866e378">Each Parallel Execution Server Acquires:</th>
</tr>
</thead>
<tbody>
<tr>
<td class="cellalignment2968" id="d69866e383" headers="d69866e372">
<p>Parallel <code>UPDATE</code> or <code>DELETE</code> into partitioned table; <code>WHERE</code> clause pruned to a subset of partitions or subpartitions</p>
</td>
<td class="cellalignment2969" headers="d69866e383 d69866e375">
<p>1 table lock SX</p>
<p>1 partition lock X for each pruned partition or subpartition</p>
</td>
<td class="cellalignment2970" headers="d69866e383 d69866e378">
<p>1 table lock SX</p>
<p>1 partition lock <code>NULL</code> for each pruned partition or subpartition owned by the query server process</p>
<p>1 partition-wait lock S for each pruned partition or subpartition owned by the query server process</p>
</td>
</tr>
<tr>
<td class="cellalignment2968" id="d69866e411" headers="d69866e372">
<p>Parallel row-migrating <code>UPDATE</code> into partitioned table; <code>WHERE</code> clause pruned to a subset of partitions or subpartitions</p>
</td>
<td class="cellalignment2969" headers="d69866e411 d69866e375">
<p>1 table lock SX</p>
<p>1 partition X lock for each pruned partition or subpartition</p>
<p>1 partition lock SX for all other partitions or subpartitions</p>
</td>
<td class="cellalignment2970" headers="d69866e411 d69866e378">
<p>1 table lock SX</p>
<p>1 partition lock <code>NULL</code> for each pruned partition or subpartition owned by the query server process</p>
<p>1 partition-wait lock S for each pruned partition owned by the query server process</p>
<p>1 partition lock SX for all other partitions or subpartitions</p>
</td>
</tr>
<tr>
<td class="cellalignment2968" id="d69866e440" headers="d69866e372">
<p>Parallel <code>UPDATE</code>, <code>MERGE</code>, <code>DELETE</code>, or <code>INSERT</code> into partitioned table</p>
</td>
<td class="cellalignment2969" headers="d69866e440 d69866e375">
<p>1 table lock SX</p>
<p>Partition locks X for all partitions or subpartitions</p>
</td>
<td class="cellalignment2970" headers="d69866e440 d69866e378">
<p>1 table lock SX</p>
<p>1 partition lock <code>NULL</code> for each partition or subpartition</p>
<p>1 partition-wait lock S for each partition or subpartition</p>
</td>
</tr>
<tr>
<td class="cellalignment2968" id="d69866e471" headers="d69866e372">
<p>Parallel <code>INSERT</code> into partitioned table; destination table with partition or subpartition clause</p>
</td>
<td class="cellalignment2969" headers="d69866e471 d69866e375">
<p>1 table lock SX</p>
<p>1 partition lock X for each specified partition or subpartition</p>
</td>
<td class="cellalignment2970" headers="d69866e471 d69866e378">
<p>1 table lock SX</p>
<p>1 partition lock <code>NULL</code> for each specified partition or subpartition</p>
<p>1 partition-wait lock S for each specified partition or subpartition</p>
</td>
</tr>
<tr>
<td class="cellalignment2968" id="d69866e493" headers="d69866e372">
<p>Parallel <code>INSERT</code> into nonpartitioned table</p>
</td>
<td class="cellalignment2969" headers="d69866e493 d69866e375">
<p>1 table lock X</p>
</td>
<td class="cellalignment2970" headers="d69866e493 d69866e378">
<p>None</p>
</td>
</tr>
</tbody>
</table>
<hr/></div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<div class="infobox-note" id="GUID-C9A03D1A-66DA-4C73-813A-8AD5BC38952B__GUID-06C70411-AADB-49B9-BD90-DF4BFBA91643">
<p class="notep1">Note:</p>
<p>Table, partition, and partition-wait DML locks all appear as TM locks in the <code>V$LOCK</code> view.</p>
</div>
<p>Consider a table with 600 partitions running with a DOP of 100. Assume all partitions are involved in a parallel <code>UPDATE</code> or <code>DELETE</code> statement with no row-migrations.</p>
<p>The coordinator acquires:</p>
<ul style="list-style-type: disc;">
<li>
<p>1 table lock SX</p>
</li>
<li>
<p>600 partition locks X</p>
</li>
</ul>
<p>Total server processes acquire:</p>
<ul style="list-style-type: disc;">
<li>
<p>100 table locks SX</p>
</li>
<li>
<p>600 partition locks NULL</p>
</li>
<li>
<p>600 partition-wait locks S</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2957">
<tr>
<td class="cellalignment2964">
<table class="cellalignment2962">
<tr>
<td class="cellalignment2961"><a href="GUID-7B21CE94-D1A9-4167-97A8-CE86BFB92192.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2961"><a href="GUID-E9E2FCBA-8345-4D10-BDF2-3842866A1D11.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2008, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2966">
<table class="cellalignment2960">
<tr>
<td class="cellalignment2961"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2961"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2961"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2961"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2961"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2961"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>