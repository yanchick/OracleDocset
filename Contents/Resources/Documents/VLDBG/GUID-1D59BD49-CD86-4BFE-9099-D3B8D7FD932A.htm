<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-114205"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Updating%20Indexes%20Automatically"></a><title>Updating Indexes Automatically</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2016-07-20T13:00:08Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database VLDB and Partitioning Guide"/>
<meta name="dcterms.identifier" content="E41057-12"/>
<meta name="dcterms.isVersionOf" content="VLDBG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2008, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-79391819-DCEF-46AC-977D-199BD2044DA2.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-087B87A6-959A-40C6-82AF-36E401FD089B.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41057-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-1D59BD49-CD86-4BFE-9099-D3B8D7FD932A"></a> <span id="PAGE" style="display:none;">164/481</span> <!-- End Header --><a id="VLDBG1123"></a><a id="VLDBG1124"></a><a id="VLDBG1122"></a>
<h1 id="VLDBG-GUID-1D59BD49-CD86-4BFE-9099-D3B8D7FD932A" class="sect1">Updating Indexes Automatically</h1>
<div>
<p><a id="d33047e63" class="indexterm-anchor"></a><a id="d33047e67" class="indexterm-anchor"></a>Before discussing the individual maintenance operations for partitioned tables and indexes, it is important to discuss the effects of the <code>UPDATE</code> <code>INDEXES</code> clause that can be specified in the <code>ALTER</code> <code>TABLE</code> statement.</p>
<p>By default, many table maintenance operations on partitioned tables invalidate (mark <code>UNUSABLE</code>) the corresponding indexes or index partitions. You must then rebuild the entire index or, for a global index, each of its partitions. The database lets you override this default behavior if you specify <a id="d33047e87" class="indexterm-anchor"></a><a id="d33047e91" class="indexterm-anchor"></a><a id="d33047e95" class="indexterm-anchor"></a><code>UPDATE</code> <code>INDEXES</code> in your <code>ALTER</code> <code>TABLE</code> statement for the maintenance operation. Specifying this clause tells the database to update the indexes at the time it executes the maintenance operation DDL statement. This provides the following benefits:</p>
<ul style="list-style-type: disc;">
<li>
<p>The indexes are updated with the base table operation. You are not required to update later and independently rebuild the indexes.</p>
</li>
<li>
<p>The global indexes are more highly available, because they are not marked <code>UNUSABLE</code>. These indexes remain available even while the partition DDL is executing and can access unaffected partitions in the table.</p>
</li>
<li>
<p>You need not look up the names of all invalid indexes to rebuild them.</p>
</li>
</ul>
<p>Optional clauses for local indexes let you specify physical and storage characteristics for updated local indexes and their partitions.</p>
<ul style="list-style-type: disc;">
<li>
<p>You can specify physical attributes, tablespace storage, and logging for each partition of each local index. Alternatively, you can specify only the <code>PARTITION</code> keyword and let the database update the partition attributes as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>For operations on a single table partition (such as <code>MOVE</code> <code>PARTITION</code> and <code>SPLIT</code> <code>PARTITION</code>), the corresponding index partition inherits the attributes of the affected index partition. The database does not generate names for new index partitions, so any new index partitions resulting from this operation inherit their names from the corresponding new table partition.</p>
</li>
<li>
<p>For <code>MERGE</code> <code>PARTITION</code> operations, the resulting local index partition inherits its name from the resulting table partition and inherits its attributes from the local index.</p>
</li>
</ul>
</li>
<li>
<p>For a composite-partitioned index, you can specify tablespace storage for each subpartition.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-1D59BD49-CD86-4BFE-9099-D3B8D7FD932A__GUID-5EF73AC3-C2F7-417E-8C49-1FFAFCA42185">
<p class="notep1">See Also:</p>
<p>The <span class="italic"><code>update_all_indexes_clause</code></span> of <a class="olink SQLRF01001" target="_blank" href="../SQLRF/statements_3001.htm#SQLRF01001"><code>ALTER TABLE</code></a> for the syntax for updating indexes</p>
</div>
<p>The following operations support the <code>UPDATE</code> <code>INDEXES</code> clause:</p>
<ul style="list-style-type: disc;">
<li>
<p><code>ADD</code> <code>PARTITION</code> | <code>SUBPARTITION</code></p>
</li>
<li>
<p><code>COALESCE</code> <code>PARTITION</code> | <code>SUBPARTITION</code></p>
</li>
<li>
<p><code>DROP</code> <code>PARTITION</code> | <code>SUBPARTITION</code></p>
</li>
<li>
<p><code>EXCHANGE</code> <code>PARTITION</code> | <code>SUBPARTITION</code></p>
</li>
<li>
<p><code>MERGE</code> <code>PARTITION</code> | <code>SUBPARTITION</code></p>
</li>
<li>
<p><code>MOVE</code> <code>PARTITION</code> | <code>SUBPARTITION</code></p>
</li>
<li>
<p><code>SPLIT</code> <code>PARTITION</code> | <code>SUBPARTITION</code></p>
</li>
<li>
<p><code>TRUNCATE</code> <code>PARTITION</code> | <code>SUBPARTITION</code></p>
</li>
</ul>
<div class="section">
<p class="subhead1">SKIP_UNUSABLE_INDEXES Initialization Parameter</p>
</div>
<!-- class="section" -->
<div class="section">
<p><code>SKIP_UNUSABLE_INDEXES</code> is an initialization parameter with a default value of <code>TRUE</code>. This setting disables error reporting of indexes and index partitions marked <code>UNUSABLE</code>. If you do not want the database to choose an alternative execution plan to avoid the unusable elements, then you should set this parameter to <code>FALSE</code>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Considerations when Updating Indexes Automatically</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The following implications are worth noting when you specify <code>UPDATE</code> <code>INDEXES</code>:</p>
<ul style="list-style-type: disc;">
<li>
<p>The partition DDL statement can take longer to execute, because indexes that were previously marked <code>UNUSABLE</code> are updated. However, you must compare this increase with the time it takes to execute DDL without updating indexes, and then rebuild all indexes. A rule of thumb is that it is faster to update indexes if the size of the partition is less that 5% of the size of the table.</p>
</li>
<li>
<p>The <code>EXCHANGE</code> operation is no longer a fast operation. Again, you must compare the time it takes to do the DDL and then rebuild all indexes.</p>
</li>
<li>
<p>When you update a table with a global index:</p>
<ul style="list-style-type: disc;">
<li>
<p>The index is updated in place. The updates to the index are logged, and redo and undo records are generated. In contrast, if you rebuild an entire global index, you can do so in <code>NOLOGGING</code> mode.</p>
</li>
<li>
<p>Rebuilding the entire index manually creates a more efficient index, because it is more compact with better space utilization.</p>
</li>
</ul>
</li>
<li>
<p>The <code>UPDATE INDEXES</code> clause is not supported for index-organized tables. However, the <code>UPDATE GLOBAL INDEXES</code> clause may be used with <code>DROP</code> <code>PARTITION</code>, <code>TRUNCATE</code> <code>PARTITION</code>, and <code>EXCHANGE</code> <code>PARTITION</code> operations to keep the global indexes on index-organized tables usable. For the remaining operations in the above list, global indexes on index-organized tables remain usable. In addition, local index partitions on index-organized tables remain usable after a <code>MOVE</code> <code>PARTITION</code> operation.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2957">
<tr>
<td class="cellalignment2964">
<table class="cellalignment2962">
<tr>
<td class="cellalignment2961"><a href="GUID-79391819-DCEF-46AC-977D-199BD2044DA2.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2961"><a href="GUID-087B87A6-959A-40C6-82AF-36E401FD089B.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2008, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2966">
<table class="cellalignment2960">
<tr>
<td class="cellalignment2961"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2961"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2961"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2961"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2961"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2961"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>