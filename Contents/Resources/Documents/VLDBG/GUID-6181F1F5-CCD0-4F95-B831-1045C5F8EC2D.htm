<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-114325"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Additional%20Considerations%20for%20Parallel%20DML"></a><title>Additional Considerations for Parallel DML</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2016-07-20T13:00:08Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database VLDB and Partitioning Guide"/>
<meta name="dcterms.identifier" content="E41057-12"/>
<meta name="dcterms.isVersionOf" content="VLDBG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2008, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-F9F7C98A-9EA2-42D8-8AA5-46454C64E901.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-5A52793F-15AE-4C86-B8A4-4D7965575BB0.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41057-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-6181F1F5-CCD0-4F95-B831-1045C5F8EC2D"></a> <span id="PAGE" style="display:none;">442/481</span> <!-- End Header --><a id="VLDBG1529"></a>
<h1 id="VLDBG-GUID-6181F1F5-CCD0-4F95-B831-1045C5F8EC2D" class="sect1">Additional Considerations for Parallel DML</h1>
<div>
<p><a id="d72133e61" class="indexterm-anchor"></a><a id="d72133e65" class="indexterm-anchor"></a>When you want to refresh your data warehouse database using parallel insert, update, or delete operations on a data warehouse, there are additional issues to consider when designing the physical database. These considerations do not affect parallel execution operations. These issues are:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-6181F1F5-CCD0-4F95-B831-1045C5F8EC2D.htm#GUID-6035BB6E-D223-4087-AB01-6AA4003B7777">Parallel DML and Direct-Path Restrictions</a></p>
</li>
<li>
<p><a href="GUID-6181F1F5-CCD0-4F95-B831-1045C5F8EC2D.htm#GUID-FEE610A3-F12C-47F6-9571-ADBB08096B06">Limitation on the Degree of Parallelism</a></p>
</li>
<li>
<p><a href="GUID-6181F1F5-CCD0-4F95-B831-1045C5F8EC2D.htm#GUID-1FE0C03C-C70A-4109-B574-51A8ADC7DE86">When to Increase INITRANS</a></p>
</li>
<li>
<p><a href="GUID-6181F1F5-CCD0-4F95-B831-1045C5F8EC2D.htm#GUID-17D58575-D0F4-4031-AF07-F67B1769C336">Limitation on Available Number of Transaction Free Lists for Segments</a></p>
</li>
<li>
<p><a href="GUID-6181F1F5-CCD0-4F95-B831-1045C5F8EC2D.htm#GUID-8628A98F-CA94-4D52-B3B8-DE3CF8AB2E91">Multiple Archivers for Large Numbers of Redo Logs</a></p>
</li>
<li>
<p><a href="GUID-6181F1F5-CCD0-4F95-B831-1045C5F8EC2D.htm#GUID-E042C446-AFFF-4343-9F22-39081EAD0E34">Database Writer Process (DBWn) Workload</a></p>
</li>
<li>
<p><a href="GUID-6181F1F5-CCD0-4F95-B831-1045C5F8EC2D.htm#GUID-05CE9FD6-3A3E-4441-B2D2-57040F7CA815">[NO]LOGGING Clause</a></p>
</li>
</ul>
</div>
<a id="VLDBG1530"></a>
<div class="props_rev_3"><a id="GUID-6035BB6E-D223-4087-AB01-6AA4003B7777"></a>
<h2 id="VLDBG-GUID-6035BB6E-D223-4087-AB01-6AA4003B7777" class="sect2">Parallel DML and Direct-Path Restrictions</h2>
<div>
<p>If a parallel restriction is violated, the operation is simply performed serially. If a direct-path <code>INSERT</code> restriction is violated, then the <code>APPEND</code> hint is ignored and a conventional insert operation is performed. No error message is returned.</p>
</div>
</div>
<a id="VLDBG1531"></a>
<div class="props_rev_3"><a id="GUID-FEE610A3-F12C-47F6-9571-ADBB08096B06"></a>
<h2 id="VLDBG-GUID-FEE610A3-F12C-47F6-9571-ADBB08096B06" class="sect2">Limitation on the Degree of Parallelism</h2>
<div>
<p>For tables that do not have the parallel DML <code>itl</code> invariant property (tables created before Oracle9<span class="italic">i</span> Release 2 (9.2) or tables that were created with the <code>COMPATIBLE</code> initialization parameter set to less than <code>9.2</code>), the degree of parallelism (DOP) equals the number of partitions or subpartitions. That means that, if the table is not partitioned, the query runs serially. To see what tables do not have this property, issue the following statement:</p>
<pre dir="ltr">SELECT u.name, o.name FROM obj$ o, tab$ t, user$ u
WHERE o.obj# = t.obj# AND o.owner# = u.user#
 AND bitand(t.property,536870912) != 536870912;
</pre>
<p>For information about the interested transaction list (ITL), also called the transaction table, refer to <a class="olink CNCPT88965" target="_blank" href="../CNCPT/consist.htm#CNCPT88965"><span class="italic">Oracle Database Concepts</span></a>.</p>
</div>
</div>
<a id="VLDBG1532"></a>
<div class="props_rev_3"><a id="GUID-1FE0C03C-C70A-4109-B574-51A8ADC7DE86"></a>
<h2 id="VLDBG-GUID-1FE0C03C-C70A-4109-B574-51A8ADC7DE86" class="sect2">When to Increase INITRANS</h2>
<div>
<p>If you have global indexes, a global index segment and global index blocks are shared by server processes of the same parallel DML statement. Even if the operations are not performed against the same row, the server processes can share the same index blocks. Each server transaction needs one transaction entry in the index block header before it can make changes to a block. Therefore, in the <code>CREATE</code> <code>INDEX</code> or <code>ALTER</code> <code>INDEX</code> statements, you should set <code>INITRANS</code>, the initial number of transactions allocated within each data block, to a large value, such as the maximum DOP against this index.</p>
</div>
</div>
<a id="VLDBG1533"></a>
<div class="props_rev_3"><a id="GUID-17D58575-D0F4-4031-AF07-F67B1769C336"></a>
<h2 id="VLDBG-GUID-17D58575-D0F4-4031-AF07-F67B1769C336" class="sect2">Limitation on Available Number of Transaction Free Lists for Segments</h2>
<div>
<p>There is a limitation on the available number of transaction free lists for segments in dictionary-managed tablespaces. After a segment has been created, the number of process and transaction free lists is fixed and cannot be altered. If you specify a large number of process free lists in the segment header, you might find that this limits the number of transaction free lists that are available. You can abate this limitation the next time you re-create the segment header by decreasing the number of process free lists; this leaves more room for transaction free lists in the segment header.</p>
<p>For <code>UPDATE</code> and <code>DELETE</code> operations, each server process can require its own transaction free list. The parallel DML DOP is thus effectively limited by the smallest number of transaction free lists available on the table and on any of the global indexes the DML statement must maintain. For example, if the table has 25 transaction free lists and the table has two global indexes, one with 50 transaction free lists and one with 30 transaction free lists, the DOP is limited to 25. If the table had 40 transaction free lists, the DOP would have been limited to 30.</p>
<p>The <code>FREELISTS</code> parameter of the <code>STORAGE</code> clause is used to set the number of process free lists. By default, no process free lists are created.</p>
<p>The default number of transaction free lists depends on the block size. For example, if the number of process free lists is not set explicitly, a 4 KB block has about 80 transaction free lists by default. The minimum number of transaction free lists is 25.</p>
</div>
</div>
<a id="VLDBG1534"></a>
<div class="props_rev_3"><a id="GUID-8628A98F-CA94-4D52-B3B8-DE3CF8AB2E91"></a>
<h2 id="VLDBG-GUID-8628A98F-CA94-4D52-B3B8-DE3CF8AB2E91" class="sect2">Multiple Archivers for Large Numbers of Redo Logs</h2>
<div>
<p>Parallel DDL and parallel DML operations can generate a large number of redo logs. A single <code>ARCH</code> process to archive these<a id="d72133e490" class="indexterm-anchor"></a> redo logs might not be able to keep up. To avoid this problem, you can spawn multiple archiver processes manually or by using a job queue.</p>
</div>
</div>
<a id="VLDBG1535"></a>
<div class="props_rev_3"><a id="GUID-E042C446-AFFF-4343-9F22-39081EAD0E34"></a>
<h2 id="VLDBG-GUID-E042C446-AFFF-4343-9F22-39081EAD0E34" class="sect2">Database Writer Process (DBWn) Workload</h2>
<div>
<p>Parallel DML operations use a large number of data, index, and undo blocks in the buffer cache during a short interval. For example, suppose you see a high number of <code>free_buffer_waits</code> after querying the <a id="d72133e561" class="indexterm-anchor"></a><a id="d72133e563" class="indexterm-anchor"></a><code>V$SYSTEM_EVENT</code> view, as in the following syntax:</p>
<pre dir="ltr">SELECT TOTAL_WAITS FROM V$SYSTEM_EVENT WHERE EVENT = &#39;FREE BUFFER WAITS&#39;;
</pre>
<p>In this case, you should consider increasing the <a id="d72133e574" class="indexterm-anchor"></a>DBW<span class="italic">n</span> processes. If there are no waits for free buffers, the query does not return any rows.</p>
</div>
</div>
<a id="VLDBG1536"></a>
<div class="props_rev_3"><a id="GUID-05CE9FD6-3A3E-4441-B2D2-57040F7CA815"></a>
<h2 id="VLDBG-GUID-05CE9FD6-3A3E-4441-B2D2-57040F7CA815" class="sect2">[NO]LOGGING Clause</h2>
<div>
<div class="section">
<p>The <code>[NO]LOGGING</code> clause applies to tables, partitions, tablespaces, and indexes. Virtually no log is generated for certain operations (such as direct-path <code>INSERT</code>) if the <code>NOLOGGING</code> clause is used. The <a id="d72133e656" class="indexterm-anchor"></a><a id="d72133e658" class="indexterm-anchor"></a><code>NOLOGGING</code> attribute is not specified at the <code>INSERT</code> statement level but is instead specified when using the <code>ALTER</code> or <code>CREATE</code> statement for a table, partition, index, or tablespace.</p>
<p>When a table or index has <code>NOLOGGING</code> set, neither parallel nor serial direct-path <code>INSERT</code> operations generate redo logs. Processes running with the <code>NOLOGGING</code> option set run faster because no redo is generated. However, after a <code>NOLOGGING</code> operation against a table, partition, or index, if a media failure occurs before a backup is performed, then all tables, partitions, and indexes that have been modified might be corrupted.</p>
<p>Direct-path <code>INSERT</code> operations (except for dictionary updates) never generate redo logs if the <code>NOLOGGING</code> clause is used. The <code>NOLOGGING</code> attribute does not affect undo, only redo. To be precise, <code>NOLOGGING</code> allows the direct-path <code>INSERT</code> operation to generate a negligible amount of redo (range-invalidation redo, as opposed to full image redo).</p>
<p>For backward compatibility, <code>[UN]RECOVERABLE</code> is still supported as an alternate keyword with the <code>CREATE</code> <code>TABLE</code> statement. This alternate keyword might not be supported, however, in future releases.</p>
<p>At the tablespace level, the logging clause specifies the default logging attribute for all tables, indexes, and partitions created in the tablespace. When an existing tablespace logging attribute is changed by the <code>ALTER</code> <code>TABLESPACE</code> statement, then all tables, indexes, and partitions created after the <code>ALTER</code> statement have the new logging attribute; existing ones do not change their logging attributes. The tablespace-level logging attribute can be overridden by the specifications at the table, index, or partition level.</p>
<p>The default logging attribute is <code>LOGGING</code>. However, if you have put the database in <code>NOARCHIVELOG</code> mode, by issuing <code>ALTER</code> <code>DATABASE</code> <code>NOARCHIVELOG</code>, then all operations that can be done without logging do not generate logs, regardless of the specified logging attribute.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2957">
<tr>
<td class="cellalignment2964">
<table class="cellalignment2962">
<tr>
<td class="cellalignment2961"><a href="GUID-F9F7C98A-9EA2-42D8-8AA5-46454C64E901.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2961"><a href="GUID-5A52793F-15AE-4C86-B8A4-4D7965575BB0.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2008, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2966">
<table class="cellalignment2960">
<tr>
<td class="cellalignment2961"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2961"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2961"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2961"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2961"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2961"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>