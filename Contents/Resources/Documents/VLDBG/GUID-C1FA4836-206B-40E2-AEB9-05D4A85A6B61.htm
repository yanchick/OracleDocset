<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-114518"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Creating%20Composite%20Range-Range%20Partitioned%20Tables"></a><title>Creating Composite Range-Range Partitioned Tables</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="composite partitioning, range-range, range-range partitioning, creating tables using, partitioning"/>
<meta name="dcterms.created" content="2016-07-20T13:00:08Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database VLDB and Partitioning Guide"/>
<meta name="dcterms.identifier" content="E41057-12"/>
<meta name="dcterms.isVersionOf" content="VLDBG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2008, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-9028BE6A-9CC3-4625-83D6-7A6233477176.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-795E1D0E-A298-404B-B66C-4832A63264F1.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41057-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-C1FA4836-206B-40E2-AEB9-05D4A85A6B61"></a> <span id="PAGE" style="display:none;">131/481</span> <!-- End Header --><a id="VLDBG14050"></a><a id="VLDBG1097"></a>
<h1 id="VLDBG-GUID-C1FA4836-206B-40E2-AEB9-05D4A85A6B61" class="sect1">Creating Composite Range-Range Partitioned Tables</h1>
<div>
<div class="section">
<p><a id="d23466e77" class="indexterm-anchor"></a><a id="d23466e81" class="indexterm-anchor"></a><a id="d23466e85" class="indexterm-anchor"></a><a id="d23466e89" class="indexterm-anchor"></a>The range partitions of a range-range composite partitioned table are similar to non-composite range partitioned tables. This organization enables optional subclauses of a <code>PARTITION</code> clause to specify physical and other attributes, including tablespace, specific to a partition segment. If not overridden at the partition level, then partitions inherit the attributes of their underlying table.</p>
<p>The range subpartition descriptions, in the <code>SUBPARTITION</code> clauses, are similar to non-composite range partitions, except the only physical attribute that can be specified is an optional tablespace. Subpartitions inherit all other physical attributes from the partition description.</p>
<p><a href="GUID-C1FA4836-206B-40E2-AEB9-05D4A85A6B61.htm#GUID-C1FA4836-206B-40E2-AEB9-05D4A85A6B61__CHDJIIEB">Example 4-11</a> illustrates how range-range partitioning might be used. The example tracks shipments. The service level agreement with the customer states that every order is delivered in the calendar month after the order was placed. The following types of orders are identified:</p>
<p>A row is mapped to a partition by checking whether the value of the partitioning column for a row falls within a specific partition range. The row is then mapped to a subpartition within that partition by identifying whether the value of the subpartitioning column falls within a specific range. For example, a shipment with an order date in September 2006 and a delivery date of October 28, 2006 falls in partition <code>p06_oct_a</code>.</p>
<p>To learn how using a subpartition template can simplify the specification of a composite partitioned table, see <span class="q">&#34;<a href="GUID-03D5C9BE-54AE-4156-B462-90E41757AE93.htm">Specifying Subpartition Templates to Describe Composite Partitioned Tables</a>&#34;</span>.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>E (EARLY): orders that are delivered before the middle of the next month after the order was placed. These orders likely exceed customers&#39; expectations.</p>
</li>
<li>
<p>A (AGREED): orders that are delivered in the calendar month after the order was placed (but not early orders).</p>
</li>
<li>
<p>L (LATE): orders that were only delivered starting the second calendar month after the order was placed.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="example" id="GUID-C1FA4836-206B-40E2-AEB9-05D4A85A6B61__CHDJIIEB">
<p class="titleinexample">Example 4-11 Creating a composite range-range partitioned table</p>
<pre dir="ltr">CREATE TABLE shipments
( order_id      NUMBER NOT NULL
, order_date    DATE NOT NULL
, delivery_date DATE NOT NULL
, customer_id   NUMBER NOT NULL
, sales_amount  NUMBER NOT NULL
)
PARTITION BY RANGE (order_date)
SUBPARTITION BY RANGE (delivery_date)
( PARTITION p_2006_jul VALUES LESS THAN (TO_DATE(&#39;01-AUG-2006&#39;,&#39;dd-MON-yyyy&#39;))
  ( SUBPARTITION p06_jul_e VALUES LESS THAN (TO_DATE(&#39;15-AUG-2006&#39;,&#39;dd-MON-yyyy&#39;))
  , SUBPARTITION p06_jul_a VALUES LESS THAN (TO_DATE(&#39;01-SEP-2006&#39;,&#39;dd-MON-yyyy&#39;))
  , SUBPARTITION p06_jul_l VALUES LESS THAN (MAXVALUE)
  )
, PARTITION p_2006_aug VALUES LESS THAN (TO_DATE(&#39;01-SEP-2006&#39;,&#39;dd-MON-yyyy&#39;))
  ( SUBPARTITION p06_aug_e VALUES LESS THAN (TO_DATE(&#39;15-SEP-2006&#39;,&#39;dd-MON-yyyy&#39;))
  , SUBPARTITION p06_aug_a VALUES LESS THAN (TO_DATE(&#39;01-OCT-2006&#39;,&#39;dd-MON-yyyy&#39;))
  , SUBPARTITION p06_aug_l VALUES LESS THAN (MAXVALUE)
  )
, PARTITION p_2006_sep VALUES LESS THAN (TO_DATE(&#39;01-OCT-2006&#39;,&#39;dd-MON-yyyy&#39;))
  ( SUBPARTITION p06_sep_e VALUES LESS THAN (TO_DATE(&#39;15-OCT-2006&#39;,&#39;dd-MON-yyyy&#39;))
  , SUBPARTITION p06_sep_a VALUES LESS THAN (TO_DATE(&#39;01-NOV-2006&#39;,&#39;dd-MON-yyyy&#39;))
  , SUBPARTITION p06_sep_l VALUES LESS THAN (MAXVALUE)
  )
, PARTITION p_2006_oct VALUES LESS THAN (TO_DATE(&#39;01-NOV-2006&#39;,&#39;dd-MON-yyyy&#39;))
  ( SUBPARTITION p06_oct_e VALUES LESS THAN (TO_DATE(&#39;15-NOV-2006&#39;,&#39;dd-MON-yyyy&#39;))
  , SUBPARTITION p06_oct_a VALUES LESS THAN (TO_DATE(&#39;01-DEC-2006&#39;,&#39;dd-MON-yyyy&#39;))
  , SUBPARTITION p06_oct_l VALUES LESS THAN (MAXVALUE)
  )
, PARTITION p_2006_nov VALUES LESS THAN (TO_DATE(&#39;01-DEC-2006&#39;,&#39;dd-MON-yyyy&#39;))
  ( SUBPARTITION p06_nov_e VALUES LESS THAN (TO_DATE(&#39;15-DEC-2006&#39;,&#39;dd-MON-yyyy&#39;))
  , SUBPARTITION p06_nov_a VALUES LESS THAN (TO_DATE(&#39;01-JAN-2007&#39;,&#39;dd-MON-yyyy&#39;))
  , SUBPARTITION p06_nov_l VALUES LESS THAN (MAXVALUE)
  )
, PARTITION p_2006_dec VALUES LESS THAN (TO_DATE(&#39;01-JAN-2007&#39;,&#39;dd-MON-yyyy&#39;))
  ( SUBPARTITION p06_dec_e VALUES LESS THAN (TO_DATE(&#39;15-JAN-2007&#39;,&#39;dd-MON-yyyy&#39;))
  , SUBPARTITION p06_dec_a VALUES LESS THAN (TO_DATE(&#39;01-FEB-2007&#39;,&#39;dd-MON-yyyy&#39;))
  , SUBPARTITION p06_dec_l VALUES LESS THAN (MAXVALUE)
  )
);
</pre></div>
<!-- class="example" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2957">
<tr>
<td class="cellalignment2964">
<table class="cellalignment2962">
<tr>
<td class="cellalignment2961"><a href="GUID-9028BE6A-9CC3-4625-83D6-7A6233477176.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2961"><a href="GUID-795E1D0E-A298-404B-B66C-4832A63264F1.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2008, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2966">
<table class="cellalignment2960">
<tr>
<td class="cellalignment2961"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2961"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2961"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2961"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2961"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2961"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>