<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-5855"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Performing%20Basic%20DMU%20Tasks"></a><title>Performing Basic DMU Tasks</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1067"/>
<meta name="dcterms.created" content="2015-08-21T21:34:33Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Migration Assistant for Unicode Guide"/>
<meta name="dcterms.identifier" content="E48475-07"/>
<meta name="dcterms.isVersionOf" content="DUMAG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="ch3tasks.htm" title="Previous" type="text/html"/>
<link rel="Next" href="ch5advanced.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48475-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">7/11</span> <!-- End Header -->
<div id="DUMAG240" class="chapter"><a id="BACBJJCG"></a>
<h1 class="chapter"><span class="secnum">4</span> Performing Basic DMU Tasks</h1>
<p>This chapter shows the step-by-step use of the Database Migration Assistant for Unicode in a few typical scenarios of the character set migration process. If you follow the examples presented here, you can then use the tool to migrate your database. Most of the steps in this chapter are common throughout all scenarios.</p>
<p>This chapter contains the following sections:</p>
<ul>
<li>
<p><a href="#BACDIGIE">Initializing the Database</a></p>
</li>
<li>
<p><a href="#BACIGCJF">Refreshing or Reinstalling the Migration Repository</a></p>
</li>
<li>
<p><a href="#BACDJBCF">Uninstalling the Migration Repository</a></p>
</li>
<li>
<p><a href="#BACEAEHJ">Scanning the Database</a></p>
</li>
<li>
<p><a href="#CIHJDHHI">Cleansing the Data</a></p>
</li>
<li>
<p><a href="#CIHIEFDC">Converting the Database</a></p>
</li>
<li>
<p><a href="#CIHJJEJD">Validating Data as Unicode</a></p>
</li>
<li>
<p><a href="#CIHDAIIC">Creating a Diagnostic Package</a></p>
</li>
</ul>
<a id="BACDIGIE"></a>
<div id="DUMAG243" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Initializing the Database</h2>
<p>The initialization of a database for use with the DMU includes the following tasks:</p>
<ul>
<li>
<p><a href="#BACICHCD">Installing Required Patches</a></p>
</li>
<li>
<p><a href="#BACCGHFG">Installing Supporting Packages</a></p>
</li>
<li>
<p><a href="#BACICEDG">Creating a Tablespace for the Migration Repository</a></p>
</li>
<li>
<p><a href="#BACBAGCB">Creating a Database Connection</a></p>
</li>
</ul>
<a id="BACICHCD"></a>
<div id="DUMAG244" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Installing Required Patches</h3>
<p class="subhead2"><a id="DUMAG332"></a>To install required patches:</p>
<ol>
<li>
<p>In the downloaded, newest DMU <a id="sthref104"></a>release notes, check if any database patches are required for your database release to work with the DMU. Then use the <code dir="ltr">opatch</code> utility to check if the required patches are already installed. Finally, set the <code dir="ltr">ORACLE_HOME</code> environment variable to the Oracle home directory of the database, change the current directory to the <code dir="ltr">OPatch</code> subdirectory of the Oracle home, and issue the following statement:</p>
<pre dir="ltr">opatch lsinventory &ndash;patch
</pre>
<p>If the <code dir="ltr">opatch</code> utility identifies the lack of a valid <code dir="ltr">oraInst.loc</code> file, locate the file in the Oracle home of the database and pass its location in the <code dir="ltr">-invPtrLoc</code> parameter, as shown in the following example:</p>
<pre dir="ltr">opatch lsinventory &ndash;patch &ndash;invPtrLoc ../oraInst.loc
</pre>
<p>The output from the <code dir="ltr">opatch</code> utility will resemble the following:</p>
<pre dir="ltr">Invoking OPatch 10.2.0.5.0
 
 
Oracle interim Patch Installer version 10.2.0.5.0
Copyright (c) 2005, Oracle Corporation.  All rights reserved..
 
 
Oracle Home       : C:\oracle\product\10.2.0\db_1
Central Inventory : C:\Program Files\Oracle\Inventory
   from           : n/a
OPatch version    : 10.2.0.5.0
OUI version       : 10.2.0.5.0
OUI location      : C:\oracle\product\10.2.0\db_1\oui
Log file location : C:\oracle\product\10.2.0\db_1\cfgtoollogs\opatch\opatch2010-05-17_22-50-28PM.log
 
Lsinventory Output file location : C:\oracle\product\10.2.0\db_1\cfgtoollogs\opatch\lsinv\lsinventory2010-05-17_22-50-28PM.txt
 
--------------------------------------------------------------------------
 
Interim patches (2) :
 
Patch  5556081      : applied on Mon Feb 08 15:50:52 CET 2010
   Created on 9 Nov 2006, 22:20:50 hrs PST8PDT
   Bugs fixed:
     5556081
 
Patch  5557962      : applied on Mon Feb 08 15:50:45 CET 2010
   Created on 9 Nov 2006, 23:23:06 hrs PST8PDT
   Bugs fixed:
     4269423, 5557962, 5528974
 
--------------------------------------------------------------------------

OPatch succeeded.
</pre></li>
<li>
<p>Check if the required database patches are listed among interim patches. Download any missing patches from the My Oracle Support site and install them. Then review the documentation that is part of the patches for installation instructions. These patches can be found at:</p>
<p><code dir="ltr"><a href="https://support.oracle.com">https://support.oracle.com</a></code></p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BACCGHFG"></a>
<div id="DUMAG245" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Installing Supporting Packages</h3>
<p>If your database has not been initialized<a id="sthref105"></a> for the DMU yet, it will not contain the necessary PL/SQL supporting packages to access its dedicated database kernel functions.</p>
<p class="subhead2"><a id="DUMAG333"></a>To install supporting packages:</p>
<ol>
<li>
<p>Connect to the database server host as an operating system user who can run the SQL*Plus utility from the Oracle home directory of the database.</p>
</li>
<li>
<p>Start the SQL*Plus utility and connect as a user with the <code dir="ltr">SYSDBA</code> privilege. For example, on Linux or Microsoft Windows, enter the following command:</p>
<pre dir="ltr">sqlplus / as sysdba
</pre></li>
<li>
<p>After you have logged in, execute the following command:</p>
<pre dir="ltr">SQL&gt; @?/rdbms/admin/prvtdumi.plb
</pre>
<p>The output from the script should resemble the following:</p>
<pre dir="ltr">Library created.
 
Package created.
 
No errors.
 
Package body created.
 
No errors.
</pre></li>
</ol>
<p>In addition, you should perform the preceding steps if installation documentation from any installed database patches requires them.</p>
</div>
<!-- class="sect2" -->
<a id="BACICEDG"></a>
<div id="DUMAG246" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Creating a Tablespace for the Migration Repository</h3>
<p>For ease of maintenance and to avoid fragmentation of other production tablespaces, Oracle recommends that a separate tablespace be used for database objects (tables and indexes) forming the migration repository of the DMU. In order to follow this recommendation, create a suitable tablespace now, so that you can select it for the migration repository in the following steps. See <a class="olink ADMQS12053" href="../ADMQS/GUID-F05EE514-FFC6-4E86-A592-802BA5A49254.htm#ADMQS12053"><span class="italic">Oracle Database 2 Day DBA</span></a> or <a class="olink ADMIN11073" href="../ADMIN/create.htm#ADMIN11073"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for instructions about creating a tablespace.</p>
<p class="subhead2"><a id="DUMAG334"></a>To create a tablespace for the Migration Repository:</p>
<p>Oracle recommends that the tablespace be locally managed with the default extent allocation policy and with the autoextension feature switched on.</p>
<ol>
<li>
<p>Use the result of the following SQL query (run as <code dir="ltr">SYSDBA</code>) as the initial size of the tablespace:</p>
<pre dir="ltr">SELECT CEIL((t.cnt*300+c.cnt*1000)/1048576)||&#39; MB&#39;
           &#34;Initial Size&#34;
  FROM (SELECT COUNT(*) cnt FROM sys.tab$) t,
        (SELECT COUNT(*) cnt
           FROM sys.col$
          WHERE obj# IN (SELECT obj# FROM sys.tab$)
             AND BITAND(property,65536)=0
             AND type# IN (1,8,58,96,112)
             AND charsetform=1) c
</pre>
<p>The size of the tablespace could grow significantly if you collect a lot of rowids for use by the Cleansing Editor or if you apply the &#34;Convert only updatable rows&#34; conversion method to many tables with large numbers of convertible cells. Therefore, Oracle recommends that the autoextend feature be switched on to allow the tablespace to grow as necessary.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BACBAGCB"></a>
<div id="DUMAG247" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Creating a Database Connection</h3>
<p>See <a href="ch2migrasteps.htm#CHDDGEAD">&#34;Creating a Database Connection&#34;</a>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BACIGCJF"></a>
<div id="DUMAG341" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Refreshing or Reinstalling the Migration Repository</h2>
<p>After a repository has been inst<a id="sthref106"></a>alled, it is a<a id="sthref107"></a><a id="sthref108"></a><a id="sthref109"></a>utomatically refreshed at predefined points in the DMU workflow to account for any objects containing character data that may have been added to, altered in, or removed from the database. In addition, you can refresh or reinstall the repository by selecting from the Migration menu.</p>
<p class="subhead2"><a id="DUMAG342"></a>To refresh the Migration Repository:</p>
<ol>
<li>
<p>You can explicitly refresh the repository to immediately include any recent changes to the database objects by selecting <span class="bold">Refresh</span> <span class="bold">DMU</span> <span class="bold">Repository</span> from the Migration menu or from the context menu of the database node in the Navigator pane. After the refresh has finished, a confirmation message appears announcing that the repository has been successfully refreshed.</p>
</li>
</ol>
<p class="subhead2"><a id="DUMAG1489"></a>To reinstall the Migration Repository:</p>
<ol>
<li>
<p>You can explicitly reinstall the repository by selecting <span class="bold">Configure</span> <span class="bold">DMU</span> <span class="bold">Repository</span> from the Migration or Validation menu. <a href="#BACFFCDI">Figure 4-1, &#34;Repository Configuration Wizard - Reinstallation&#34;</a> appears.</p>
<div id="DUMAG1490" class="figure">
<p class="titleinfigure"><a id="BACFFCDI"></a>Figure 4-1 Repository Configuration Wizard - Reinstallation</p>
<img width="638" height="477" src="img/repconwizrei.gif" alt="Description of Figure 4-1 follows"/><br/>
<a id="sthref110" href="img_text/repconwizrei.htm">Description of &#34;Figure 4-1 Repository Configuration Wizard - Reinstallation&#34;</a><br/>
<br/></div>
<!-- class="figure" --></li>
<li>
<p>Choose either migration mode or validation mode. Then click <span class="bold">Next</span>. <a href="#BACCDHAC">Figure 4-2, &#34;Repository Configuration Wizard - Reinstallation/Archiving&#34;</a> appears.</p>
<div id="DUMAG1491" class="figure">
<p class="titleinfigure"><a id="BACCDHAC"></a>Figure 4-2 Repository Configuration Wizard - Reinstallation/Archiving</p>
<img width="641" height="478" src="img/repconwizvalb.gif" alt="Description of Figure 4-2 follows"/><br/>
<a id="sthref111" href="img_text/repconwizvalb.htm">Description of &#34;Figure 4-2 Repository Configuration Wizard - Reinstallation/Archiving&#34;</a><br/>
<br/></div>
<!-- class="figure" --></li>
<li>
<p>Ensure that &#34;Archive the existing repository for diagnostic purpose&#34; is selected and click <span class="bold">Next</span>. <a href="#BACBHHBA">Figure 4-3, &#34;Repository Configuration Wizard - Select Tablespace&#34;</a> appears.</p>
<div id="DUMAG1492" class="figure">
<p class="titleinfigure"><a id="BACBHHBA"></a>Figure 4-3 Repository Configuration Wizard - Select Tablespace</p>
<img width="638" height="478" src="img/repconc.gif" alt="Description of Figure 4-3 follows"/><br/>
<a id="sthref112" href="img_text/repconc.htm">Description of &#34;Figure 4-3 Repository Configuration Wizard - Select Tablespace&#34;</a><br/>
<br/></div>
<!-- class="figure" --></li>
<li>
<p>Click <span class="bold">Finish</span>. The repository is reinstalled.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BACDJBCF"></a>
<div id="DUMAG343" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Uninstalling the Migration Repository</h2>
<p class="subhead2"><a id="DUMAG344"></a>To uninstall the Migration Repository:</p>
<ol>
<li>
<p>To remove a repository, from the Migration m<a id="sthref113"></a>enu or the context menu of the database node in t<a id="sthref114"></a>he Navigator pane, select <span class="bold">Configure</span> <span class="bold">DMU</span> <span class="bold">Repository</span>. A dialog box will appear that offers you the option to uninstall the repository. If you select <span class="bold">Uninstall</span> <span class="bold">the</span> <span class="bold">repository</span> and click <span class="bold">Next</span>, the repository is uninstalled. When the repository has been uninstalled, a confirmation message appears to confirm the success of the operation.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BACEAEHJ"></a>
<div id="DUMAG252" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Scanning the Database</h2>
<p>The next step is to scan your cu<a id="sthref115"></a><a id="sthref116"></a><a id="sthref117"></a>rrent data. In general, what you want to achieve in this step is to analyze what is causing problems and to choose a cleansing strategy to resolve the data issues.</p>
<p>Scanning is the process of reading character values from the database, converting them to the target character set, and counting how many values change in conversion, do not fit into their columns, do not fit into their data types, or contain invalid character codes. Additional statistics, such as the maximum post-conversion length of values in a column, are calculated as well. The DMU stores the calculated counts and statistics in the migration repository as scan results. The character values resulting from the test conversion are themselves discarded. They are not stored permanently in the database.</p>
<p>Before a database can be converted to Unicode, the character data in the <code dir="ltr">VARCHAR2</code>, <code dir="ltr">CHAR</code>, <code dir="ltr">LONG</code>, and <code dir="ltr">CLOB</code> table columns must be analyzed to assess if any issues could prevent the conversion from finishing successfully without causing data corruption. The DMU analyzes the data by converting character column values in the database from their declared character set to the target Unicode character set, and checking each value to determine if:</p>
<ul>
<li>
<p>The conversion result differs from the original value</p>
</li>
<li>
<p>The conversion result fits into the length limit of its column</p>
</li>
<li>
<p>The conversion result fits into its data type</p>
</li>
<li>
<p>The conversion result does not contain any replacement characters, that is, each converted source character code is valid in the declared character set of the column</p>
</li>
</ul>
<p>This section discusses:</p>
<ul>
<li>
<p><a href="#BACFICHJ">Setting Database Properties</a></p>
</li>
<li>
<p><a href="#BACBGACC">Scanning the Database with the Scan Wizard</a></p>
</li>
<li>
<p><a href="#BACJEJJF">Monitoring the Progress of a Scan</a></p>
</li>
<li>
<p><a href="#BACCJGHC">Viewing the Database Scan Report</a></p>
</li>
<li>
<p><a href="#BACGFIHF">Overview of the Database Scan Report</a></p>
</li>
</ul>
<a id="BACFICHJ"></a>
<div id="DUMAG253" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Setting Database Properties</h3>
<p>Before you start scanning th<a id="sthref118"></a>e database, you should provide the DMU with the language and character set information that you collected while preparing the migration process, as described in <a href="ch2migrasteps.htm#CHDCCJDI">&#34;Review Your Preparations for Migration&#34;</a>.</p>
<p class="subhead2"><a id="DUMAG335"></a>To set database properties:</p>
<ol>
<li>
<p>Open the Database Properties tab, which is illustrated in <a href="#BACGBHEC">Figure 4-4</a>. This tab is automatically opened in the client pane of the DMU window when you connect to a database. The title of the tab is the name of the connection.</p>
<p>You can also view this tab by right-clicking the database node in the Navigator pane and selecting <span class="bold">Properties</span> from the context menu. From the left sidebar of the tab, choose the General subtab. On the subtab, set the Assumed Database Character Set property to the identified real character set of data in the database. If your database is used in a correct character set configuration, as opposed to the pass-through configuration, this property should remain equal to the Current Database Character Set property.</p>
<div id="DUMAG254" class="figure">
<p class="titleinfigure"><a id="BACGBHEC"></a>Figure 4-4 Database Properties Tab - General</p>
<img width="646" height="414" src="img/dbpropgen.gif" alt="Description of Figure 4-4 follows"/><br/>
<a id="sthref119" href="img_text/dbpropgen.htm">Description of &#34;Figure 4-4 Database Properties Tab - General&#34;</a><br/>
<br/></div>
<!-- class="figure" --></li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="ch3tasks.htm#BABEJGJB">Chapter 3, &#34;Viewing and Setting Object Properties in the DMU&#34;</a> for more details about database and other properties</div>
</div>
<!-- class="sect2" -->
<a id="BACBGACC"></a>
<div id="DUMAG255" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Scanning the Database with the Scan Wizard</h3>
<p>You are now ready to <a id="sthref120"></a><a id="sthref121"></a>run the first scan of the database contents. This process is started through the Scan Wizard. The scan results inform you if any data needs cleansing before it can be converted permanently without data loss. Also, the DMU uses the scan results to select the most effective conversion method for each table.</p>
<p>Three elements of the DMU user interface let you control the scanning process and view the scan results. You use the Scan Wizard to start the scanning process, the Scan Progress tab to monitor this process (See <a href="#BACJEJJF">&#34;Monitoring the Progress of a Scan&#34;</a>), and the Database Scan Report tab to view the scan results (See <a href="#BACGFIHF">&#34;Overview of the Database Scan Report&#34;</a>).</p>
<p>The DMU might collect during scanning the rowid addresses of column cells that contain convertible values or values with expansion or invalid binary representation issues.</p>
<p><code dir="ltr">CLOB</code> columns are not scanned or even listed in the Navigator pane in a multibyte database. Any multibyte database, including databases in AL32UTF8 and UTF8 character sets, store <code dir="ltr">CLOB</code> values in the same internal storage character set (Unicode UTF-16), and so <code dir="ltr">CLOB</code> values need no conversion when the database character set is migrated from one multibyte character set to another.</p>
<p>The source character set used for the test conversion of column values is the assumed character set of the column. See <a href="#CIHJDHHI">&#34;Cleansing the Data&#34;</a>.</p>
<p class="subhead2"><a id="DUMAG336"></a>To scan the database using the Scan Wizard:</p>
<ol>
<li>
<p>To open the Sca<a id="sthref122"></a>n Wizard, select <span class="bold">Scan</span> <span class="bold">Database</span> from the Migration menu or <span class="bold">Scan</span> <span class="bold">Database</span>, <span class="bold">Scan</span> <span class="bold">Schema</span>, <span class="bold">Scan</span> <span class="bold">Table</span>, or <span class="bold">Scan</span> <span class="bold">Column</span> from the context menu of the corresponding object node in the Navigator pane. The Scan Wizard is displayed, as in <a href="#BACJGDDJ">Figure 4-5, &#34;Scan Wizard - Welcome&#34;</a>.</p>
<div id="DUMAG380" class="figure">
<p class="titleinfigure"><a id="BACJGDDJ"></a>Figure 4-5 Scan Wizard - Welcome</p>
<img width="640" height="478" src="img/wizarda.gif" alt="Description of Figure 4-5 follows"/><br/>
<a id="sthref123" href="img_text/wizarda.htm">Description of &#34;Figure 4-5 Scan Wizard - Welcome&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>The DMU might also open the Scan Wizard after you start the conversion process from the Conversion Details tab. The DMU opens the wizard if one or more tables in the database are to be converted using the conversion method &#34;Update only convertible rows&#34;. The additional scan collects rowid addresses that this conversion method requires. The Scan Wizard opened during the conversion phase has a different first page, as shown in <a href="#BACBCJEG">Figure 4-6, &#34;Scan Wizard - Welcome: Rowid Collection&#34;</a>. It also lacks the object selection page. See <a href="#CIHIEFDC">&#34;Converting the Database&#34;</a> for more information about the conversion phase.</p>
<div id="DUMAG381" class="figure">
<p class="titleinfigure"><a id="BACBCJEG"></a>Figure 4-6 Scan Wizard - Welcome: Rowid Collection</p>
<img width="584" height="440" src="img/threec.jpg" alt="Description of Figure 4-6 follows"/><br/>
<a id="sthref124" href="img_text/threec.htm">Description of &#34;Figure 4-6 Scan Wizard - Welcome: Rowid Collection&#34;</a><br/>
<br/></div>
<!-- class="figure" --></li>
<li>
<p>Click <span class="bold">Next</span> to skip the Welcome page.</p>
</li>
<li>
<p>The second page of the wizard lets you set general parameters for the scanning process, as shown in <a href="#BACEFJFD">Figure 4-7, &#34;Scan Wizard - Set Parameters&#34;</a>.</p>
<p>The Number of Scanning Processes is the number of threads that the DMU spawns to perform the scanning process. Each thread opens a separate database connection. The DMU assigns a set of tables to each thread to scan independently. Larger tables might be split into chunks and scanned by multiple threads. Smaller tables are scanned entirely by one thread. The default value for this parameter is the value of the <code dir="ltr">CPU_COUNT</code> initialization parameter of the database. You can increase the parameter to see if the scanning time decreases, leveraging the parallel processing of CPUs and disks of the database server, or you can decrease the parameter to limit the negative impact that the scanning process might have on the performance of a busy production database.</p>
<div id="DUMAG382" class="figure">
<p class="titleinfigure"><a id="BACEFJFD"></a>Figure 4-7 Scan Wizard - Set Parameters</p>
<img width="641" height="477" src="img/threed.gif" alt="Description of Figure 4-7 follows"/><br/>
<a id="sthref125" href="img_text/threed.htm">Description of &#34;Figure 4-7 Scan Wizard - Set Parameters&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>The parameter Scan Buffer Size controls the size in bytes of a buffer that the DMU allocates in each database server session to scan a table. The default value is 1000 kilobytes. The total buffer space used in a single scan is the number of scanning processes times the value of this property. Increasing the value of the property could speed up scanning, but only for as long as the allocated buffer memory fits into the available RAM on the database server.</p>
<p>The three radio buttons let you define the initial rowid collection level for tables selected for this scan. This initial level can be subsequently changed on the Scan Details page of the wizard, as described in point 5 below. The option &#34;Collect rowids only according to &#39;Rowids to Collect&#39; table property&#34; tells the DMU to use the value of the table property &#39;Rowids to Collect&#39; as the initial rowid collection level for each table. See <a href="ch3tasks.htm#BABJAAAF">&#34;Table Properties: Scanning&#34;</a> for more details about this property.</p>
<p>The option &#34;Collect also rowids for Update Convertible Rows conversion method&#34; can be selected to let the DMU pre-collect rowid addresses for the &#34;Update only convertible rows&#34; conversion method. The option causes the initial rowid collection level to be set to &#34;All to Convert&#34; for all selected tables that have been assigned this conversion method and to the value of the property Rowids to Collect for all other selected tables. Usually, the rowids for this conversion method are collected by the already mentioned additional scan that starts automatically at the beginning of the conversion phase.</p>
<p>Pre-collection of rowids removes the need for this additional scan, shortening the required downtime window and enabling the database to be closed for business for a shorter time. However, if any additional convertible rows are added to a table after the last scan that pre-collected rowids for the table has been performed, these rows will not be converted during the conversion phase and will become incorrectly encoded data after the migration. Therefore, use the pre-collection feature sparingly, only on large tables confirmed to have static contents. The option &#34;Collect also rowids for Update Convertible Rows conversion method&#34; has no effect during the first scan of a table as no conversion method has been assigned yet to the table.</p>
<p>The last option, &#34;Do not collect rowids&#34;, enables you to switch off rowid collection during the current scan. This may be useful if you just want to count the number of convertible cells and cells with convertibility issues, and you do not plan to use the filtering option of the Cleansing Editor on any of the scanned tables. The rowid collection cannot be switched off for a few special data dictionary tables in the <code dir="ltr">SYS</code> schema, which have their property &#34;Rowids to Collect&#34; fixed to &#34;All to Convert&#34;.</p>
<p>In the Scan Wizard that the DMU opens in the conversion phase for collection of rowids, the Scan Parameters page changes as shown in <a href="#BACIIECC">Figure 4-8, &#34;Scan Wizard - Set Parameters: Rowid Collection&#34;</a>. The check box &#34;Collect rowids for Update Convertible Rows conversion method&#34; is automatically selected and the additional parameter Maximum Age is present on the page. This parameter enables you to skip rescanning of tables for which rowids have already been pre-collected in the recent Maximum Age hours. It also enables you to discard pre-collected rowids that you consider too old.</p>
<div id="DUMAG383" class="figure">
<p class="titleinfigure"><a id="BACIIECC"></a>Figure 4-8 Scan Wizard - Set Parameters: Rowid Collection</p>
<img width="606" height="480" src="img/lastminute.jpg" alt="Description of Figure 4-8 follows"/><br/>
<a id="sthref126" href="img_text/lastminute.htm">Description of &#34;Figure 4-8 Scan Wizard - Set Parameters: Rowid Collection&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>See <a href="#CIHIEFDC">&#34;Converting the Database&#34;</a> for more information about the conversion process.</p>
<p>Click <span class="bold">Next</span> to accept the scan parameters and open the Object Selection page.</p>
</li>
<li>
<p>For the first scan, you usually select all tables in the database by opening the Scan Wizard from the Migration menu. For subsequent scans, you can select a subset of database objects for which you want the scan results to be refreshed, for example, because they have been invalidated by cleansing actions, or because you want recent DML activity on the objects to be analyzed in the context of possibly introduced conversion issues.</p>
<p>If you want only invalidated scan results to be recalculated, you can select all columns in the database, by selecting the database node, and then click <span class="bold">Exclude</span> <span class="bold">Scanned</span>. When this option is selected, the DMU automatically deselects all columns that already have valid scan results. Now, you can manually select additional tables and columns for which you want existing scan results to be refreshed.</p>
<p>If the &#34;Collect rowids for Update Convertible Rows conversion method&#34; option is selected, the Exclude Scanned option does not exclude tables that do not have required rowids collected by previous scans.</p>
<p>Oracle strongly recommends that you refresh all scan results in the database before you start the conversion, preferably in the downtime window, when no new data can be added to the database. This ensures that all data requiring conversion is accounted for.</p>
<div id="DUMAG384" class="figure">
<p class="titleinfigure"><a id="sthref127"></a>Figure 4-9 Scan Wizard - Select Scan Objects</p>
<img width="638" height="479" src="img/wizardb.gif" alt="Description of Figure 4-9 follows"/><br/>
<a id="sthref128" href="img_text/wizardb.htm">Description of &#34;Figure 4-9 Scan Wizard - Select Scan Objects&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>Click <span class="bold">Next</span> to accept the object selection and open the Scan Details page. It might take a while to display the page, because, first, the wizard has to prepare a scanning plan for all the selected objects.</p>
</li>
<li>
<p>On the Scan Details page, shown in <a href="#BACEFAIG">Figure 4-10, &#34;Scan Wizard - Scan Details&#34;</a>, you can verify that all objects you wanted to be scanned are included. You can also set the rowid collection level in the drop-down lists that can be opened by selecting fields in the Rowids to Collect column. The choices for the rowid collection level are None (no collection is performed), All to Convert (collects rowids for all data that is not classified as needing no conversion), and With Issues (collects rowids for data with conversion issues only). Finding data that requires cleansing using the filtering and search features of the Cleansing Editor will be faster if rowids for problematic data cells are collected during scanning. See <a href="ch6cleansing.htm#BBBBBBBB">Chapter 6, &#34;Using the DMU to Cleanse Data&#34;</a> for more information about the Cleansing Editor.</p>
<p>The rowid collection level set in the Scan Wizard is valid only for the current scan. It does not modify the table property &#34;Rowids to Collect&#34; and it does not persist across invocations of the Scan Wizard.</p>
<p>The DMU automatically handles splitting of large tables into chunks for parallel scanning by multiple scanning processes. However, if necessary, you can prevent a table from being split by deselecting the corresponding check box in the Split column.</p>
<p>Clicking <span class="bold">Finish</span> will start the scan.</p>
<div id="DUMAG385" class="figure">
<p class="titleinfigure"><a id="BACEFAIG"></a>Figure 4-10 Scan Wizard - Scan Details</p>
<img width="636" height="477" src="img/wizardc.gif" alt="Description of Figure 4-10 follows"/><br/>
<a id="sthref129" href="img_text/wizardc.htm">Description of &#34;Figure 4-10 Scan Wizard - Scan Details&#34;</a><br/>
<br/></div>
<!-- class="figure" --></li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BACJEJJF"></a>
<div id="DUMAG386" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring the Progress of a Scan</h3>
<p>When the scanning starts, the DMU automatically opens the Scan Progress tab, shown in <a href="#BACDIHHE">Figure 4-11</a>. You can use this tab to monitor the progress of the scanning task.</p>
<div id="DUMAG387" class="figure">
<p class="titleinfigure"><a id="BACDIHHE"></a>Figure 4-11 Scan Progress Tab</p>
<img width="844" height="536" src="img/scanprogr.gif" alt="Description of Figure 4-11 follows"/><br/>
<a id="sthref130" href="img_text/scanprogr.htm">Description of &#34;Figure 4-11 Scan Progress Tab&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>The Scan Progress tab contains a grid that displays scan information for all tables in the scanned set. The columns of the tab grid are as follows:</p>
<ul>
<li>
<p>Name</p>
<p>The column shows the name of the table that is described by the corresponding row of the grid. The icon to the left of the name shows the scan status. A green check mark shows that the table has already been scanned. A green sprocket-like icon marks tables that are currently being scanned. A clock marks tables that are waiting to be scanned.</p>
<p>If a table is split into multiple chunks, you can click the plus sign to the left of the status icon to show information for all chunks to which the table has been split.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The meaning of the green check mark icon differs between the Scan Progress tab and the Navigator pane/Scan Report tab (see <a href="#BACGFIHF">&#34;Overview of the Database Scan Report&#34;</a>). On the Scan Progress tab, the icon shows that a table has been successfully scanned, but without indicating if it contains any problematic data. In the Navigator pane or on a Scan Report tab, the icon means that a table, a schema or database has been scanned and also that its contents does not have any issues that might prevent successful conversion to Unicode.</div>
</li>
<li>
<p>Split</p>
<p>The number shown is the number of chunks to which the corresponding table has been split. The column is empty in grid rows showing chunk information.</p>
</li>
<li>
<p>Size</p>
<p>The column shows the size of the corresponding table or table chunk. The topmost row of the grid shows the added size of all tables in the scanned set.</p>
</li>
<li>
<p>Min <code dir="ltr">ROWID</code></p>
<p>For chunks, the column shows the rowid of the first row in the chunk. It is empty for tables.</p>
</li>
<li>
<p>Max <code dir="ltr">ROWID</code></p>
<p>For chunks, the column shows the rowid of the last row in the chunk. It is empty for tables.</p>
</li>
<li>
<p>Thread ID</p>
<p>The number shown in this column is the ID of a particular thread that is scanning or that has scanned the corresponding table or table chunk.</p>
</li>
<li>
<p>Start Time</p>
<p>The column shows the time when scanning of the corresponding table or table chunk started. If a table has been split, its row shows the earliest (minimum) start time for all its chunks. The topmost row of the grid shows the start time of the whole scanning task.</p>
</li>
<li>
<p>End Time</p>
<p>The column shows the time when the scanning of the corresponding table or table chunk finished. If a table has been split, its row shows the latest (maximum) end time for all its chunks. The topmost row of the grid shows the end time of the whole scanning task.</p>
</li>
<li>
<p>Progress</p>
<p>The column displays a progress bar and a percentage that indicate how much of the corresponding table or table chunk has already been scanned. The topmost row of the grid shows the overall progress of the scanning task.</p>
<p>If a database error is encountered during the scanning of a table, the grid row corresponding to the table displays a prefix of the reported error message in this column. You can click the prefix to open a dialog box with the full message text.</p>
</li>
</ul>
<p>The DMU scrolls down the tab grid automatically to bring new grid rows into view when the corresponding tables are assigned to scanning threads. You can suspend the automatic scrolling by clicking the <span class="bold">Scroll</span> <span class="bold">Lock</span> icon in the top right-hand corner of the Scan Progress tab. This enables you to monitor the overall progress of the scanning by looking at the progress indicators in the topmost row of the grid. To resume automatic scrolling, click the <span class="bold">Scroll</span> <span class="bold">Lock</span> icon again.</p>
<p>You can suspend the scanning process by clicking <span class="bold">Stop</span> on the bottom of the Scan Progress tab. The button will change to Continue. Click <span class="bold">Continue</span> to resume scanning. See <a href="#CIHFDJAJ">&#34;Database Scan Report: Stopping the Scan&#34;</a> for more information.</p>
<p>After the scan finishes, the DMU shows an information dialog box. You can now analyze the scan results on the Database Scan Report tab.</p>
</div>
<!-- class="sect2" -->
<a id="BACCJGHC"></a>
<div id="DUMAG1493" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Viewing the Database Scan Report</h3>
<p>After the scan is completed, you can view the most current scan results either on the Scanning subtabs of<a id="sthref131"></a> various Properties tabs, described in <a href="ch3tasks.htm#BABEJGJB">Chapter 3, &#34;Viewing and Setting Object Properties in the DMU&#34;</a>, or, in a much more convenient way, on the Database Scan Report tab.</p>
<p>Depending on what the scan r<a id="sthref132"></a>esults are, you should follow one of the migration scenarios described in <a href="ch6cleansing.htm#BCGHJDFD">&#34;Cleansing Scenario 1: A Database with No Issues&#34;</a>, <a href="ch6cleansing.htm#BCGBABGJ">&#34;Cleansing Scenario 2: Cleansing Expansion Issues&#34;</a>, or <a href="ch6cleansing.htm#BCGCHIBB">&#34;Cleansing Scenario 3: Cleansing Invalid Representation Issues&#34;</a>.</p>
<p class="subhead2"><a id="DUMAG337"></a>To view the Database Scan Report:</p>
<ol>
<li>
<p>Open the Database Scan Report tab with scan results for the whole database by selecting <span class="bold">Database</span> <span class="bold">Scan</span> <span class="bold">Report</span> from the Migration menu. You can open a Database Scan Report tab for tables in a single schema, for a single table, or for a single column, by selecting <span class="bold">Scan</span> <span class="bold">Report</span> from the context menu of the corresponding schema, table, or column node in the Navigator pane.</p>
<p>A Database Scan Report tab for the whole database is shown in <a href="#BABFGACA">Figure 4-12, &#34;Database Scan Report&#34;</a>.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BACGFIHF"></a>
<div id="DUMAG388" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Overview of the Database Scan Report</h3>
<p>The Database Scan Report tab contains a toolbar on the top and a result grid under the toolbar. You can use three methods to quickly locate scan results in the Database Scan Report in which you are interested, and, in addition, export the Report:</p>
<ul>
<li>
<p><a href="#BABBBDIH">Database Scan Report: Navigating by Status Icons</a></p>
</li>
<li>
<p><a href="#BABCGFIJ">Database Scan Report: Filtering</a></p>
</li>
<li>
<p><a href="#BABFCAAG">Database Scan Report: Searching</a></p>
</li>
<li>
<p><a href="#BABDFGBC">Database Scan Report: Exporting to HTML</a></p>
</li>
<li>
<p><a href="#CIHFDJAJ">Database Scan Report: Stopping the Scan</a></p>
</li>
</ul>
<div id="DUMAG195" class="figure">
<p class="titleinfigure"><a id="BABFGACA"></a>Figure 4-12 Database Scan Report</p>
<img width="873" height="554" src="img/scanrepa.gif" alt="Description of Figure 4-12 follows"/><br/>
<a id="sthref133" href="img_text/scanrepa.htm">Description of &#34;Figure 4-12 Database Scan Report&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<div id="DUMAG196" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref134"></a>
<h4 class="sect3">Database Scan Report: Result Grid</h4>
<p>The result grid is a user interface item, in form of a tree table, that displays scan results and, optionally, other properties of database objects. The first column of the grid contains a database object tree that has the same appearance as the tree on the Navigator pane (see <a href="ch2migrasteps.htm#CHDGFFDC">&#34;Introduction to the DMU User Interface&#34;</a>). The root of the tree is the database, schema, table, or column for which the Database Scan Report has been opened. Each node of the tree is associated with a row of the grid. This row shows various properties of the database object corresponding to the node.</p>
<p>The status icon to the left of the name of the node shows the convertibility status for the database object described by the node. The meaning of icons is defined in <a href="ch2migrasteps.htm#CHDHBJFH">Table 2-1, &#34;Database Migration Assistant for Unicode Icons&#34;</a>.</p>
<p>A node can be expanded and collapsed to show or hide results of its child nodes by clicking the plus icon to the left of the node. You can expand all descendants of a node at once by selecting the row containing the node and clicking <span class="bold">Expand</span> <span class="bold">All</span>, the second icon on the toolbar (see <a href="ch2migrasteps.htm#CHDHBJFH">Table 2-1, &#34;Database Migration Assistant for Unicode Icons&#34;</a>). You can collapse all descendants by selecting the node and clicking <span class="bold">Collapse</span> <span class="bold">All</span>, the third icon on the toolbar.</p>
<p>When the Database Scan Report tab is opened, the columns displayed in the grid by default are: Need No Change (Scheduled), Need Conversion (Scheduled), Invalid Binary Representation (Scheduled), Over Column Limit (Scheduled), and Over Type Limit (Scheduled). The values shown in these columns are equal to scan results shown under the heading &#34;Including Effects of Scheduled Cleansing&#34; on the Scanning subtab of the Properties tab for the corresponding node. Those scan results are described in <a href="ch3tasks.htm#BABEJGJB">Chapter 3, &#34;Viewing and Setting Object Properties in the DMU&#34;</a>.</p>
<p>By clicking on <span class="bold">Customize</span> <span class="bold">Report</span>, the fourth icon on the toolbar, you can open the Customize Scan Report dialog box. In this dialog box, you can select further property columns to display along the default ones. You can also hide the default columns. The available columns correspond to properties described in <a href="ch3tasks.htm#BABEJGJB">Chapter 3, &#34;Viewing and Setting Object Properties in the DMU&#34;</a>. The columns Need No Change, Need Conversion, Invalid Binary Representation, Over Column Limit, and Over Type Limit, without the suffix &#34;(Scheduled)&#34;, correspond to scan results presented on Scanning subtabs under the heading &#34;Current Data&#34;.</p>
<p>If a property displayed in the Database Scan Report grid column is valid only for certain types of nodes, the grid column displays no text in rows corresponding to other types of nodes. For example, the Conversion Method property is valid only for tables. Grid rows for the database, schemas, and columns do not show anything in the Conversion Method column, if it is added to the Database Scan Report tab.</p>
<p>If you right-click a row in the Database Scan Report grid, you can select <span class="bold">Scan</span>, <span class="bold">Cleansing</span> <span class="bold">Editor</span>, or <span class="bold">Properties</span> from the context menu. The Scan menu item opens the Scan Wizard in which only the object described by the current grid row is selected for scanning. This way you can quickly instruct the DMU to refresh scan results for this object. Cleansing Editor opens the Cleansing Editor tab for the selected table or table column. See <a href="ch6cleansing.htm#BBBBBBBB">Chapter 6, &#34;Using the DMU to Cleanse Data&#34;</a> for the description of the Cleansing Editor tab. Clicking <span class="bold">Properties</span> opens the Properties tab of the object described by the selected grid row (see <a href="ch3tasks.htm#BABEJGJB">Chapter 3, &#34;Viewing and Setting Object Properties in the DMU&#34;</a>).</p>
<p>The context menu for data dictionary tables contains the Data Viewer instead of the Cleansing Editor. The Data Viewer tab, opened by clicking <span class="bold">Data</span> <span class="bold">Viewer</span>, is a read-only version of the Cleansing Editor.</p>
</div>
<!-- class="sect3" -->
<a id="BABBBDIH"></a>
<div id="DUMAG197" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Database Scan Report: Navigating by Status Icons</h4>
<p>You can locate database columns that contain data with convertibility issues by expanding Database Scan Report nodes that are marked with the yellow triangle icon. This icon signals that one or more columns among descendants of the node have some convertibility issues. Expand a node marked with such an icon, then look through its children to locate child nodes marked with the same icon, expand those nodes, and so on, until you reach the column nodes. The column nodes marked with a yellow triangle icon describe database columns that must be cleansed. Nonzero counts in the grid columns Invalid Binary Representation (Scheduled), Over Column Limit (Scheduled), and Over Type Limit (Scheduled) show how many issues of each type have been found in the given database column. The counters are displayed as links that you can click to directly open the Cleansing Editor or the Data Viewer tab to take a closer look at the issues.</p>
</div>
<!-- class="sect3" -->
<a id="BABCGFIJ"></a>
<div id="DUMAG198" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Database Scan Report: Filtering</h4>
<p>A useful feature of the Database Scan Report tab is the filtering function. You can open the drop-down filter list on the toolbar of the tab, as shown in <a href="#BABHEEFH">Figure 4-13, &#34;Database Scan Report: Filtering&#34;</a>, and select which type of results you would like to see in the report.</p>
<div id="DUMAG199" class="figure">
<p class="titleinfigure"><a id="BABHEEFH"></a>Figure 4-13 Database Scan Report: Filtering</p>
<img width="814" height="206" src="img/scanrepnoth.gif" alt="Description of Figure 4-13 follows"/><br/>
<a id="sthref135" href="img_text/scanrepnoth.htm">Description of &#34;Figure 4-13 Database Scan Report: Filtering&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>The available filters are:</p>
<ul>
<li>
<p>All</p>
<p>Switches the filtering off. All objects are displayed.</p>
</li>
<li>
<p>Scanned</p>
<p>Displays only objects with valid scan results.</p>
</li>
<li>
<p>Scan Failed</p>
<p>Displays objects that could not be scanned, because a database error was reported.</p>
</li>
<li>
<p>Not Scanned</p>
<p>Displays objects without valid scan results. An object might have no valid scan results because it has never been scanned, its scan results have been invalidated by a cleansing action or a DDL, or the last scan of the object failed.</p>
</li>
<li>
<p>Requiring No Conversion</p>
<p>Displays objects that have valid scan results and contain only changeless data that requires no conversion.</p>
</li>
<li>
<p>Requiring Conversion, Without Issues</p>
<p>Displays objects that have valid scan results and contain a mixture of changeless data that requires no conversion and convertible data that requires conversion. No issues are expected during conversion of these objects.</p>
</li>
<li>
<p>Blocking Conversion</p>
<p>Displays objects with unresolved convertibility issues that must be acted upon before the database can be successfully converted.</p>
</li>
<li>
<p>With Invalid Representation</p>
<p>Displays objects that have valid scan results and contain some data with invalid binary representation, that is, with character codes that are not valid in the declared column character set.</p>
</li>
<li>
<p>Exceed Dataytpe Limit</p>
<p>Displays objects that have valid scan results and contain some data that exceeds its data type limit after conversion.</p>
</li>
<li>
<p>Exceed Column Limit</p>
<p>Displays objects that have valid scan results and contain some data that exceeds its column limit after conversion.</p>
</li>
<li>
<p>With Length Issues</p>
<p>Displays objects that have valid scan results and contain some data that exceeds its column limit or its data type limit after conversion.</p>
</li>
<li>
<p>Not Changeless</p>
<p>Displays objects that have valid scan results and contain some data that will require conversion. The data may or may not have convertibility issues. That is, it may belong to any of the categories: &#34;Need Conversion&#34;, &#34;Invalid Representation&#34;, &#34;Over Column Limit&#34;, or &#34;Over Type Limit&#34;.</p>
</li>
<li>
<p>With Some Issues</p>
<p>Displays objects that have valid scan results and contain data with any of the possible problems for which the DMU searches. For data dictionary schemas, this includes convertible data in columns that the DMU cannot convert.</p>
</li>
</ul>
<p>After a filter is selected, all nodes and associated grid rows for database columns whose scan results do not fulfill the filtering condition are hidden. If all children of a node are hidden, the node is hidden as well. The exception is the root node of the report, which is never hidden.</p>
<p>Filtering is useless and thus disabled in Database Scan Report tabs opened for a single database column.</p>
<p>You can also rescan only the filtered objects in the scan report by selecting the first icon of the toolbar, which is the Rescan Filtered Objects button. As an example, if the the &#34;Exceed Column Limit&#34; filter is set in the scan report, then the Rescan Filtered Objects button will select all tables with &#34;Over Column Limit&#34; issues for the rescan.</p>
</div>
<!-- class="sect3" -->
<a id="BABFCAAG"></a>
<div id="DUMAG200" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Database Scan Report: Searching</h4>
<p>Another feature of the Database Scan Report tab that makes analyzing scan results easier in large scan reports is the search feature. You initiate a search by clicking one of the following toolbar buttons:</p>
<ul>
<li>
<p>Find</p>
<p>The fifth button on the toolbar opens a dialog box that enables you specify the search criteria for objects.</p>
</li>
<li>
<p>Find Previous</p>
<p>The sixth button on the toolbar highlights the previous instance of the originally searched item.</p>
</li>
<li>
<p>Find Next</p>
<p>The seventh button on the toolbar highlights the next instance of the originally searched item.</p>
</li>
</ul>
<p>If you select <span class="bold">Find</span>, a dialog box such as that shown in <a href="#BABIGJEE">Figure 4-14, &#34;Database Scan Report: Searching&#34;</a> is displayed.</p>
<div id="DUMAG201" class="figure">
<p class="titleinfigure"><a id="BABIGJEE"></a>Figure 4-14 Database Scan Report: Searching</p>
<img width="662" height="436" src="img/scanreportfind.gif" alt="Description of Figure 4-14 follows"/><br/>
<a id="sthref136" href="img_text/scanreportfind.htm">Description of &#34;Figure 4-14 Database Scan Report: Searching&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>You can specify the following search criteria in the dialog box to describe objects that you want located:</p>
<ul>
<li>
<p>Name</p>
<p>Specify a string that should be contained in the name of the object (case-insensitive).</p>
</li>
<li>
<p>Scan Status</p>
<p>Specify the scan status of the object.</p>
</li>
<li>
<p>Object Type</p>
<p>Specify if you want to search among schemas, tables, or columns. Only one type can be selected.</p>
</li>
<li>
<p>Include effects of scheduled cleansing</p>
<p>Select this option if the results for which to search should include effects of the scheduled cleansing action. If the option is selected, the compared results are those displayed in grid columns with the phrase &#34;(Scheduled)&#34; in heading.</p>
</li>
<li>
<p>Requiring No Conversion</p>
<p>Select the comparison operator and the value to compare with the Need No Change results.</p>
</li>
<li>
<p>Requiring Conversion</p>
<p>Select the comparison operator and the value to compare with the Need Conversion results.</p>
</li>
<li>
<p>With Invalid Representation</p>
<p>Select the comparison operator and the value to compare with the Invalid Binary Representation results.</p>
</li>
<li>
<p>Exceeding Column Limit</p>
<p>Select the comparison operator and the value to compare with the Over Column Limit results.</p>
</li>
<li>
<p>Exceeding Data Type Limit</p>
<p>Select the comparison operator and the value to compare with the Over Type Limit results.</p>
</li>
</ul>
<p>After you select <span class="bold">OK</span>, the grid row for the first schema, table, or column, as selected in Object Type, that fulfills all the specified criteria is highlighted in the scan report. You can select the <span class="bold">Find</span> <span class="bold">Previous</span> or the <span class="bold">Find</span> <span class="bold">Next</span> toolbar button to highlight the previous or the next row of the same type that fulfills the criteria.</p>
</div>
<!-- class="sect3" -->
<a id="BABDFGBC"></a>
<div id="DUMAG202" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Database Scan Report: Exporting to HTML</h4>
<p>If you want to save the scan results for future reference, you can export them to an HTML file. Select <span class="bold">Export</span> <span class="bold">as</span> <span class="bold">HTML</span>, the last button on the toolbar. This will open the Export Scan Report dialog box, as shown in <a href="#BABFBEHJ">Figure 4-15, &#34;Export Scan Report&#34;</a>.</p>
<div id="DUMAG203" class="figure">
<p class="titleinfigure"><a id="BABFBEHJ"></a>Figure 4-15 Export Scan Report</p>
<img width="398" height="240" src="img/scanreportexp.gif" alt="Description of Figure 4-15 follows"/><br/>
<a id="sthref137" href="img_text/scanreportexp.htm">Description of &#34;Figure 4-15 Export Scan Report&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>Specify the name and directory (folder) for the HTML file. By choosing one of the options in the Export Type group, specify if you want to export, correspondingly, any one of the following:</p>
<ul>
<li>
<p>Only grid rows for columns and their parent objects that require conversion or have data with convertibility issues</p>
</li>
<li>
<p>The entire content of the scan report</p>
</li>
<li>
<p>Only those rows and columns of the result grid that are visible on the report tab (not hidden or collapsed)</p>
</li>
</ul>
<p>Click <span class="bold">Export</span> to create the HTML report.</p>
</div>
<!-- class="sect3" -->
<a id="CIHFDJAJ"></a>
<div id="DUMAG1494" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Database Scan Report: Stopping the Scan</h4>
<p>You can stop a scan in progress by clicking <span class="bold">Stop</span>, in which case a warning dialog appears. You have a choice of selecting <span class="bold">Yes</span> to abort the scan immediately, <span class="bold">No</span> to stop the scanning process after the current process finishes, or <span class="bold">Cancel</span> to go back to the scanning.</p>
<div id="DUMAG1495" class="figure">
<p class="titleinfigure"><a id="sthref138"></a>Figure 4-16 Stopping a Scan</p>
<img width="683" height="513" src="img/dbscanb.gif" alt="Description of Figure 4-16 follows"/><br/>
<a id="sthref139" href="img_text/dbscanb.htm">Description of &#34;Figure 4-16 Stopping a Scan&#34;</a><br/>
<br/></div>
<!-- class="figure" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHJDHHI"></a>
<div id="DUMAG1496" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Cleansing the Data</h2>
<p>Data issues that have be<a id="sthref140"></a><a id="sthref141"></a>en identified in the scanning process must be resolved before the database can be converted. The DMU does not allow the conversion process to start until all issues have been resolved or explicitly marked as ignorable. The actions that you can take to resolve the convertibility issues are called cleansing actions.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="ch6cleansing.htm#BBBBBBBB">Chapter 6, &#34;Using the DMU to Cleanse Data&#34;</a> for details regarding cleansing</p>
</li>
<li>
<p><a href="https://support.oracle.com/epmos/faces/DocumentDisplay?id=124721.1">My Oracle Support Note #124721.1</a> for data cleansing instructions for migrating an Oracle E-Business Suite database to Unicode</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="CIHIEFDC"></a>
<div id="DUMAG1497" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Converting the Database</h2>
<p>The final step is the actu<a id="sthref142"></a><a id="sthref143"></a>al conversion of your database character data, which you can perform after all issues in the database have been resolved, and the Migration Status tab resembles what is shown in <a href="#CIHCFFDJ">Figure 4-17, &#34;Migration Status Tab - No Unresolved Issues&#34;</a>.</p>
<div id="DUMAG1498" class="figure">
<p class="titleinfigure"><a id="CIHCFFDJ"></a>Figure 4-17 Migration Status Tab - No Unresolved Issues</p>
<img width="610" height="141" src="img/threem.gif" alt="Description of Figure 4-17 follows"/><br/>
<a id="sthref144" href="img_text/threem.htm">Description of &#34;Figure 4-17 Migration Status Tab - No Unresolved Issues&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p class="subhead2"><a id="DUMAG1499"></a>To convert the database:</p>
<ol>
<li>
<p>To begin the conversion process, select <span class="bold">Convert</span> <span class="bold">Database</span> from the Migration menu or the context menu of the database node in the Navigator pane. The DMU generates a conversion plan, which is a list of SQL statements to run in the conversion phase, and shows it on the Conversion Details tab in the client pane of the DMU window, as shown in <a href="#CIHJFAIF">Figure 4-18, &#34;Conversion Details Tab&#34;</a>. The Conversion Steps area on the tab lists the successive steps of the conversion process. When you click a step in the list, the Step Details area shows the list of SQL statements to be executed as part of the step. For a more detailed explanation of this tab&#39;s capabilities, see <a href="#CIHJFAIF">&#34;Conversion Details Tab&#34;</a>.</p>
<div id="DUMAG1500" class="figure">
<p class="titleinfigure"><a id="CIHJFAIF"></a>Figure 4-18 Conversion Details Tab</p>
<img width="570" height="494" src="img/convsteps.gif" alt="Description of Figure 4-18 follows"/><br/>
<a id="sthref145" href="img_text/convsteps.htm">Description of &#34;Figure 4-18 Conversion Details Tab&#34;</a><br/>
<br/></div>
<!-- class="figure" --></li>
<li>
<p>Click <span class="bold">Edit</span> <span class="bold">Database</span> <span class="bold">Conversion</span> <span class="bold">Parameters</span> to display the Converting subtab of the Database Properties tab. See <a href="ch3tasks.htm#BABJCIEG">&#34;Viewing and Setting Database Properties&#34;</a> for a description of parameters that you can set on this subtab.</p>
</li>
<li>
<p>Click <span class="bold">Edit</span> <span class="bold">Table</span> <span class="bold">Conversion</span> <span class="bold">Plan</span> to show the conversion plan details for application tables. The upper part of the displayed dialog box contains a list of all tables that will be processed during the conversion. When you select a table from the list, the lower part shows the SQL statements that will be used to process the table and its dependent objects. You can customize this list by setting the properties Conversion Method, Target Tablespace, Preserve LONG Position, and Parallel Execution. See <a href="ch3tasks.htm#BABGGAFB">&#34;Viewing and Setting Table Properties&#34;</a> for a description of these parameters.</p>
<div id="DUMAG1501" class="figure">
<p class="titleinfigure"><a id="sthref146"></a>Figure 4-19 Edit Table Conversion Plan Details: Example 1</p>
<img width="530" height="471" src="img/edittabledet.gif" alt="Description of Figure 4-19 follows"/><br/>
<a id="sthref147" href="img_text/edittabledet.htm">Description of &#34;Figure 4-19 Edit Table Conversion Plan Details: Example 1&#34;</a><br/>
<br/></div>
<!-- class="figure" --></li>
<li>
<p>Click the <span class="bold">Convert</span> button on the Conversion Details tab to start the conversion process. The DMU might display warnings about unexpected sessions present in the database and about the age of the oldest scan results. Review the warnings as described below. Accept the warning messages to continue.</p>
</li>
</ol>
<p>The SQL statement <code dir="ltr">ALTER</code> <code dir="ltr">DATABASE</code> <code dir="ltr">CHARACTER</code> <code dir="ltr">SET</code>, which the DMU uses in the conversion phase, succeeds only if the session executing the statement is the only user session logged into the database. Therefore, before starting the conversion, the DMU warns you about any user sessions logged into the database that are not opened by the DMU itself. You may use the following SQL statement in SQL*Plus or SQL Developer to find out the details of the offending sessions:</p>
<pre dir="ltr">SELECT sid, serial#, username, status,
       osuser, machine, process, program
FROM v$session
WHERE username IS NOT NULL
AND program &lt;&gt; &#39;Database Migration Assistant for Unicode&#39;;
</pre>
<p>If the column <code dir="ltr">V$SESSION.PROGRAM</code> in a row returned by the above query contains the name of the Oracle Database executable, in an operating system dependent format, followed by &#34;(J<span class="italic">nnn</span>)&#34;, where <span class="italic">nnn</span> are three decimal digits, for example &#34;ORACLE.EXE (J000)&#34;, then the user session described by the row has been created by the database server itself to execute a job submitted through the PL/SQL package <code dir="ltr">DBMS_JOB</code> or <code dir="ltr">DBMS_SCHEDULER</code>. You can query the Data Dictionary views <code dir="ltr">DBA_JOBS_RUNNING</code> and <code dir="ltr">DBA_SCHEDULER_RUNNING_JOBS</code> to identify jobs currently running in the database. Before continuing with conversion, ensure that all the jobs have finished their work and that their sessions have disappeared from <code dir="ltr">V$SESSION</code>.</p>
<p>To prevent further jobs from starting, issue the following SQL statement:</p>
<pre dir="ltr">ALTER SYSTEM SET job_queue_processes=0 SCOPE=MEMORY
</pre>
<p>You can stop an already running <code dir="ltr">DBMS_SCHEDULER</code> job using the procedure <code dir="ltr">DBMS_SCHEDULER.STOP_JOB</code>. You cannot stop a <code dir="ltr">DBMS_JOB</code> job unless you shut down the database in immediate mode.</p>
<p>If you accept the warning message about unexpected sessions without disconnecting the sessions, the conversion will start but the step <code dir="ltr">ALTER</code> <code dir="ltr">DATABASE</code> <code dir="ltr">CHARACTER</code> <code dir="ltr">SET</code> <code dir="ltr">TO</code> <code dir="ltr"><span class="codeinlineitalic">target_character_set</span></code> will fail reporting &#34;ORA-12721: operation cannot execute when other sessions are active&#34;. At this moment, you can still disconnect the offending sessions and resume the conversion as described in the next section.</p>
<p>The warning message about the oldest scan result in the database lets you estimate the staleness of scan results. The DMU does not monitor DML changes to table data and it does not know if there are any data convertibility issues or any columns requiring conversion introduced into the database beyond those identified in the existing scan results. If the scan results are too old, you risk that some recently added data will remain unconverted or will be converted incorrectly. Oracle recommends that you perform a full database scan just before starting conversion, already in the migration downtime window, after all applications have been shut down and no new data comes into the database. If the database is very large and a full database scan takes long time, you may identify all large tables that are known to always contain only changeless data and deselect them in the Scan Wizard.</p>
<p>After you accept all warnings, if there are tables to be converted using the conversion method &#34;Update only convertible rows&#34; in the database, the DMU opens the Scan Wizard to rescan those tables. This is to ensure that the required rowid information for the tables is available and up-to-date. If you have just performed a full database scan in the downtime window or you have scanned all affected tables individually with the &#34;All to Convert&#34; rowid collection level, according to an time-optimized schedule, you may prefer to accept existing rowid information for the tables. Use the &#34;Maximum age&#34; parameter on the Scan Parameters page of the Scan Wizard to tell the DMU that it should accept available rowid information that is not older than the specified value in hours. After the scan has finished, the conversion process starts.</p>
<p>When the conversion starts, the Conversion Details tab changes its form and begins to display progress information for the conversion process. The link Edit Table Conversion Plan becomes View Table Conversion Progress. Clicking <span class="bold">View</span> <span class="bold">Table</span> <span class="bold">Conversion</span> <span class="bold">Progress</span> opens a table conversion progress dialog box, where you can view the detailed conversion progress of application tables.</p>
<p>When the conversion is completed, the DMU displays a confirmation message. If there is an error caused by any of the conversion SQL statements, it is signaled by a red icon next to the name of the step on the Conversion Steps list and next to the affected SQL statement in the Step Details list. Error details are displayed at the bottom of the Conversion Details tab, after you click the failed statement.</p>
<div id="DUMAG1502" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref148"></a>
<h3 class="sect2">Conversion Details Tab</h3>
<p>The Conversion Details tab work<a id="sthref149"></a>s in two modes. Immediately after you open the tab by selecting <span class="bold">Convert</span> <span class="bold">Database</span>, the tab works in the planning mode. The tab contains a list of SQL statements that the DMU plans to execute to convert the database to the target character set. The statements are grouped into steps listed in the Conversion Steps area. When you click a conversion step, the DMU displays the SQL statements associated with the step in the Step Details area. If a plus icon is shown to the left of a SQL statement, you can click the icon to expand the area to show the full text of the statement.</p>
<div id="DUMAG1503" class="figure">
<p class="titleinfigure"><a id="sthref150"></a>Figure 4-20 Conversion Details Tab: Planning Mode</p>
<img width="593" height="550" src="img/threep.gif" alt="Description of Figure 4-20 follows"/><br/>
<a id="sthref151" href="img_text/threep.htm">Description of &#34;Figure 4-20 Conversion Details Tab: Planning Mode&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>If you click the link <span class="bold">Edit</span> <span class="bold">Database</span> <span class="bold">Conversion</span> <span class="bold">Parameters</span>, the Converting subtab of the Database Properties tab is opened in a dialog box. See <a href="ch3tasks.htm#BABEBIEH">&#34;Column Properties: Converting&#34;</a> for a description of available parameters.</p>
<p>If you click the link <span class="bold">Edit</span> <span class="bold">Table</span> <span class="bold">Conversion</span> <span class="bold">Plan</span>, the DMU opens the Edit Table Conversion Plan Details dialog box, described in <a href="#CIHGCEBJ">&#34;Edit Table Conversion Plan Details Dialog&#34;</a>.</p>
<p>When you are ready to start conversion, click <span class="bold">Convert</span> at the bottom of the tab. The Conversion Details tab switches to monitoring mode, as shown in <a href="#CIHBHCJC">Figure 4-21, &#34;Conversion Details Tab: Monitoring Mode&#34;</a>.</p>
<div id="DUMAG1504" class="figure">
<p class="titleinfigure"><a id="CIHBHCJC"></a>Figure 4-21 Conversion Details Tab: Monitoring Mode</p>
<img width="675" height="573" src="img/convprog.gif" alt="Description of Figure 4-21 follows"/><br/>
<a id="sthref152" href="img_text/convprog.htm">Description of &#34;Figure 4-21 Conversion Details Tab: Monitoring Mode&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>In the monitoring mode, the Convert button is replaced with a Stop button. If you click <span class="bold">Stop</span>, a warning dialog is displayed. In this dialog, you have the options of aborting the conversion process immediately (<span class="bold">Yes</span>), stopping the conversion process after the current running process finishes (<span class="bold">No</span>), or returning to the conversion operation (<span class="bold">Cancel</span>).</p>
<p>In the monitoring mode, the link Edit Table Conversion Plan changes to View Table Conversion Progress. The link opens the View Table Conversion Progression dialog box in the monitoring mode.</p>
<p>The green check mark marks the steps and the SQL statements that have already been successfully executed. The animated circle icon marks the currently executed step, while the sprocket-like icon marks the currently executed SQL statement.</p>
<p>If the database reports an error during the conversion process, the currently executed step and the statement that caused the error are marked with the red X error icon, as shown in <a href="#CIHFEAFC">Figure 4-22, &#34;Conversion Errors Tab&#34;</a>. The conversion process is suspended.</p>
<div id="DUMAG1505" class="figure">
<p class="titleinfigure"><a id="CIHFEAFC"></a>Figure 4-22 Conversion Errors Tab</p>
<img width="664" height="567" src="img/converr.gif" alt="Description of Figure 4-22 follows"/><br/>
<a id="sthref153" href="img_text/converr.htm">Description of &#34;Figure 4-22 Conversion Errors Tab&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>If you click the failing statement, the reported database error messages are displayed in the Statement Execution Status field. You can tell the DMU to retry or skip the statement by selecting the corresponding option from the drop-down list in the Action column of the SQL Statement area. Use the Skip option very cautiously because leaving a statement out of the conversion process could leave the database in an inconsistent state. After you select how to proceed with the failing statement, click <span class="bold">Continue</span> to resume the conversion process.</p>
<p>When the conversion process finishes, the DMU displays a confirmation dialog box. Status icons are removed from the Navigator pane. You can now reinstall the repository in Unicode Validation Mode by selecting <span class="bold">Configure</span> <span class="bold">DMU</span> <span class="bold">Repository</span> from the Migration menu.</p>
</div>
<!-- class="sect2" -->
<a id="CIHGCEBJ"></a>
<div id="DUMAG1506" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Edit Table Conversion Plan Details Dialog</h3>
<p>The Edit Table Conversion Plan Details dialog box, show in <a href="#CIHHFACE">Figure 4-23</a>, enables you to modify conversion parameters for individual tables. To modify a parameter for a table, click the corresponding cell in the upper grid of the dialog box. The cell can then be edited, if the conversion method of the table allows this. When you click a row of a table in the upper grid of the dialog box, the lower grid displays the SQL statements associated with conversion of the table.</p>
<div id="DUMAG1507" class="figure">
<p class="titleinfigure"><a id="CIHHFACE"></a>Figure 4-23 Edit Table Conversion Plan Details: Example 2</p>
<img width="599" height="531" src="img/threes.gif" alt="Description of Figure 4-23 follows"/><br/>
<a id="sthref154" href="img_text/threes.htm">Description of &#34;Figure 4-23 Edit Table Conversion Plan Details: Example 2&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>The conversion parameters that you can set for an individual table are:</p>
<ul>
<li>
<p>Conversion Method</p>
</li>
<li>
<p>Target Tablespace</p>
</li>
<li>
<p>Preserve LONG Position</p>
</li>
<li>
<p>Parallel Execution</p>
</li>
</ul>
<p>The first three parameters are described in <a href="ch3tasks.htm#BABIEDIB">&#34;Table Properties: Converting&#34;</a>. The Parallel Execution parameter specifies if parallel hints are added to the SQL statements for the given table to use the Parallel DDL and Parallel DML features of the database.</p>
<p>The search toolbar on the top of the dialog box enables you to quickly locate tables with a particular substring in their names. Enter the substring into the search box and press <span class="bold">ENTER</span>. If the substring is found in some names, the arrow icons are enabled to let you navigate between those names. If you click the marker pen icon, the matching tables are highlighted.</p>
<p>When you are ready, click <span class="bold">OK</span> to accept parameter changes and close the dialog box. Click <span class="bold">Apply</span> if you want to accept the changes but leave the dialog box open. When <span class="bold">Apply</span> or <span class="bold">OK</span> is clicked, the SQL statements for the changed tables are regenerated.</p>
<p>The Edit Table Conversion Plan Details dialog box can also be opened in monitoring mode during the conversion process by clicking the link <span class="bold">View</span> <span class="bold">Table</span> <span class="bold">Conversion</span> <span class="bold">Progress</span>. In the monitoring mode, the upper grid of the dialog box gets two additional columns: Elapsed Time and Progress, which show the time used to convert individual tables and progress bars reporting the percentage of the already processed table data. The lower grid also gets two additional columns: Elapsed Time and Action, which show the time used to execute individual SQL statements and an action to select if a statement fails, either <span class="bold">Retry</span> or <span class="bold">Skip</span>.</p>
</div>
<!-- class="sect2" -->
<div id="DUMAG1508" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref155"></a>
<h3 class="sect2">Stopping a Conversion</h3>
<p>You can stop a conversion when it is in progress by clicking <span class="bold">Stop</span>, in which case, a warning dialog appears. In this dialog, you have the options of aborting the conversion process immediately (<span class="bold">Yes</span>), stopping the conversion process after the current running process finishes (<span class="bold">No</span>), or returning to the conversion operation (<span class="bold">Cancel</span>).</p>
<div id="DUMAG1509" class="figure">
<p class="titleinfigure"><a id="sthref156"></a>Figure 4-24 Stopping a Conversion</p>
<img width="749" height="650" src="img/convstopc.gif" alt="Description of Figure 4-24 follows"/><br/>
<a id="sthref157" href="img_text/convstopc.htm">Description of &#34;Figure 4-24 Stopping a Conversion&#34;</a><br/>
<br/></div>
<!-- class="figure" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHJJEJD"></a>
<div id="DUMAG1510" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Validating Data as Unicode</h2>
<p>In addition to migrating a dat<a id="sthref158"></a><a id="sthref159"></a>abase to Unicode, the DMU can validate the contents of an existing AL32UTF8 or UTF8 database. Such a database might have been converted in the past or initially created in the Unicode character set. In either case, you can use the DMU to check the data you have now.</p>
<p>The Database Migration Assistant for Unicode can be used with databases already converted to AL32UTF8 or UTF8, or with new databases in these character sets, to verify that all data is indeed in the declared database character set. Because the processes to validate and migrate data differ, the DMU user interface differs for the two usage types as well. The type of the user interface presented by the DMU is decided at the repository installation time. The DMU activates the migration mode automatically, if the current database character set is neither AL32UTF8 nor UTF8. It activates the validation mode, if the current database character set is AL32UTF8. If the current database character set is UTF8, the first page of the Repository Configuration Wizard (see <a href="ch2migrasteps.htm#CHDFCFCF">&#34;Installing the Migration Repository&#34;</a>) gives you the choice between migration to AL32UTF8, the recommended Unicode character set, and activation of the validation mode. To activate the validation mode after you have migrated your database to Unicode, reinstall the migration repository.</p>
<p>You can perform the validation of current character data by performing a scan, and see if any problems occur in the Database Scan report. The report shows which table columns contain sequences of bytes that do not form valid UTF-8 character codes. If any invalid data is reported, you can view the data and analyze where the problem is in the GUI. The DMU also offers you the means to correct the data in the Cleansing Editor. You can repeat the process of scanning and fixing the issues until no more invalid data is reported.</p>
<p>Fixing the data should usually be accompanied by fixing an application configuration problem that caused the invalid data to be stored in the database. Client configuration issues, usually a pass-through configuration one, are the most common reason for incorrectly encoded character data being stored in an AL32UTF8 or UTF8 database. You should periodically scan your AL32UTF8 and UTF8 databases in validation mode to discover any encoding issues as early as possible.</p>
<div id="DUMAG1511" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref160"></a>
<h3 class="sect2">Introduction to the User Interface in Validation Mode</h3>
<p>The DMU user interfaces in va<a id="sthref161"></a>lidation and migration modes are similar. The following are the main differences:</p>
<ul>
<li>
<p>The Migration Status tab becomes the Validation Status tab, shown in <a href="#CIHBEGHF">Figure 4-25</a>.</p>
</li>
<li>
<p>The Migration menu becomes the Validation menu.</p>
</li>
<li>
<p>The Convert Database item in the Migration menu becomes the Convert Invalid Columns item in the Validation menu &ndash; the item invokes the procedure to convert columns from their assumed character set to the database character set.</p>
</li>
<li>
<p>The Database Scan Report shows only the database object name, scan results for current database contents and the Assumed Character Set property. Other report columns are not available.</p>
<div id="DUMAG1512" class="figure">
<p class="titleinfigure"><a id="CIHBEGHF"></a>Figure 4-25 Validation Status Tab</p>
<img width="727" height="494" src="img/valstaterr.gif" alt="Description of Figure 4-25 follows"/><br/>
<a id="sthref162" href="img_text/valstaterr.htm">Description of &#34;Figure 4-25 Validation Status Tab&#34;</a><br/>
<br/></div>
<!-- class="figure" --></li>
<li>
<p>Context menus in the Cleansing Editor tab do not have options to open Schedule Column Modification and Schedule Attribute Modification dialog boxes. Only the immediate operations Modify Column and Modify Attribute are possible.</p>
</li>
<li>
<p>The button Show Impact of Scheduled Cleansing is absent from the toolbar of the Cleansing Editor.</p>
</li>
<li>
<p>The Conversion Details tab for the Convert Invalid Columns process is very similar to the user interface for the conversion step of the migration mode, except that fewer conversion steps are present.</p>
</li>
<li>
<p>The Table Conversion Plan dialog box is simplified compared to the migration mode. It shows the tables and columns to be converted and the associated SQL statements but it does not allow you to set any table-level conversion parameters. Also, this version of the dialog box does not show conversion progress. You can monitor conversion progress only on the Conversion Details tab.</p>
</li>
<li>
<p>You can find any remaining issues preventing the conversion of the invalid columns under the &#34;Status&#34; field of step 3 on the Validation Status Panel. The reported issues need to be reviewed and resolved until the status indicates there are no more unresolved convertibility issues, at which point you can proceed to convert the columns tagged with assumed character sets to Unicode.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<div id="DUMAG1513" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref163"></a>
<h3 class="sect2">How to Validate Data</h3>
<p class="subhead2"><a id="DUMAG1514"></a>To validate data as Unicode:</p>
<ol>
<li>
<p>Install the repository</p>
<p>The DMU repository is installed in the validation mode, as described previously. After installation, the repository can be used many times in repeated application of the validation process. The repository must be reinstalled only if you upgrade the database or the DMU.</p>
</li>
<li>
<p>Scan the database</p>
<p>The whole database or selected schemas, tables, or columns are scanned to look for illegal codes. Scanning of the whole database is highly recommended but you can choose to scan only a subset of objects if the database is too large to be scanned regularly without affecting production work and a preceding migration process revealed that only a small set of tables actually contains non-ASCII data.</p>
<p>If the scan result shows only columns with data not requiring conversion, the contents of the database are correct and this part of the validation process is finished.</p>
<p>The value of the property &#34;Report U+FFFD as an invalid character&#34; on the Scanning sub-tab of the Database Properties tab determines how the DMU interprets the Unicode default replacement character U+FFFD (the byte sequence 0xEF 0xBF 0xBD in AL32UTF8 and UTF8). If the property value is &#34;Yes&#34;, the character is treated as invalid data. This is the default behavior, because the presence of this character in data usually indicates that the data is the result of character set conversion of some input that was not properly tagged with its real character set. If you use the character U+FFFD for some internal processing purposes and you do not want the DMU to report it as invalid, change the property value to &#34;No&#34;.</p>
<p>You initiate scanning and view the results as they were in the migration mode. See <a href="#BACEAEHJ">&#34;Scanning the Database&#34;</a> for more details.</p>
</li>
<li>
<p>Cleanse the data</p>
<p>If the scan results show any columns with data having invalid binary representation, you must diagnose the source of this data and fix the associated application or configuration problem. See <a href="ch6cleansing.htm#BCGCHIBB">&#34;Cleansing Scenario 3: Cleansing Invalid Representation Issues&#34;</a> for information about possible reasons for data having invalid binary representation.</p>
<p>You have two options to cleanse invalid representation issues: migrating a column to a binary data type, if its contents is binary, or converting it in the database character set, if it is encoded in some other character set. The first step to convert column data is to tag it with its proper character set by setting the column&#39;s Assumed Character Set property. Refer to <a href="ch6cleansing.htm#BCGCHIBB">&#34;Cleansing Scenario 3: Cleansing Invalid Representation Issues&#34;</a> and <a href="ch6cleansing.htm#BCGGBIEJ">&#34;Setting the Assumed Character Set&#34;</a> for more information.</p>
<p>If none of the columns has its Assumed Character Set property changed, the scan results never show any data length issues. However, if you change this property for a column and rescan the column, cells exceeding column limit or data type limit might be reported. You must resolve the length issues before you proceed to the next step. You can lengthen columns or migrate them to another data type in immediate mode, the same way you do this in migration mode. See <a href="ch6cleansing.htm#BBBBBBBB">Chapter 6, &#34;Using the DMU to Cleanse Data&#34;</a> and in particular <a href="ch6cleansing.htm#BCGDDJFJ">&#34;Modifying Columns&#34;</a> for more information.</p>
<p>All cleansing actions are immediate in validation mode. Setting the Assumed Character Set property is immediate in that the new value immediately affects scan results and data display, but the character set conversion is not performed at the time of setting. The character set conversion must be performed in a separate conversion step. After the Assumed Character Set of a column has been set properly, the column is reported in scanning as not having invalid binary representation issues. Go to the Validation Status tab to see if the conversion step is needed to convert any column from its assumed character set to the database character set. Before the conversion step is performed, the database is not yet clean.</p>
<p>Cleansing actions invalidate scan results of affected tables. Rescan the tables to confirm that the cleansing actions were successful. If you have set the Assumed Character Set property of a column, rescanning will tell you if column data can be converted from the assumed character set to the database character set without truncation issues.</p>
</li>
<li>
<p>Convert incorrectly encoded data</p>
<p>If any column had its Assumed Character Set property set during cleansing, this step should be executed to convert content of the column from the assumed character set to the database character set. In this step, all columns marked with an Assumed Character Set different from the database character set are physically converted to the database character set. The conversion is performed with SQL <code dir="ltr">UPDATE</code> statements. You start the process by selecting <span class="bold">Convert</span> <span class="bold">Invalid</span> <span class="bold">Columns</span> from the Validation menu or from the context menu of the database node in the Navigator pane, and then by clicking <span class="bold">Convert</span> on the displayed Conversion Details tab.</p>
<p>After the column content is converted, the Assumed Character Set property is reset to the database character set. You can rescan the converted columns to confirm that the conversion was successful.</p>
</li>
</ol>
<p>Reapply the validation process regularly, but at least after each change to the configuration of your system, for example, upgrade of an application or the database, addition of a new application, or addition of new application users, especially from a new country. Let some time pass between the configuration change and the scanning so that there is high probability that some scanned data has been stored in the database already in the new configuration.</p>
<p>If the database character set is UTF8, the DMU repository is installed in the validation mode and if you decide to migrate the database to AL32UTF8, you must uninstall the repository and install it again, selecting the migration mode.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHDAIIC"></a>
<div id="DUMAG1515" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Creating a Diagnostic Package</h2>
<p>You can create a diagnostic packag<a id="sthref164"></a><a id="sthref165"></a>e for later analysis by Oracle to help resolve any problems that occurred while using the DMU. This package is a jar file that contains a project log file, a scan report, and a datapump dump file containing current and any archived DMU repository tables.</p>
<p class="subhead2"><a id="DUMAG1516"></a>To create a diagnostic package:</p>
<ol>
<li>
<p>From the Migration menu, click <span class="bold">Create</span> <span class="bold">Diagnostic</span> <span class="bold">Package</span>. <a href="#CIHBJHFH">Figure 4-26, &#34;Diagnostic Package Wizard&#34;</a> is displayed.</p>
<div id="DUMAG1517" class="figure">
<p class="titleinfigure"><a id="CIHBJHFH"></a>Figure 4-26 Diagnostic Package Wizard</p>
<img width="638" height="478" src="img/diagpacka.gif" alt="Description of Figure 4-26 follows"/><br/>
<a id="sthref166" href="img_text/diagpacka.htm">Description of &#34;Figure 4-26 Diagnostic Package Wizard&#34;</a><br/>
<br/></div>
<!-- class="figure" --></li>
<li>
<p>Click <span class="bold">Next</span>. <a href="#CIHBHDHI">Figure 4-27, &#34;Diagnostic Package Wizard - Package Content&#34;</a> is displayed.</p>
<div id="DUMAG1518" class="figure">
<p class="titleinfigure"><a id="CIHBHDHI"></a>Figure 4-27 Diagnostic Package Wizard - Package Content</p>
<img width="640" height="480" src="img/diag.jpg" alt="Description of Figure 4-27 follows"/><br/>
<a id="sthref167" href="img_text/diag.htm">Description of &#34;Figure 4-27 Diagnostic Package Wizard - Package Content&#34;</a><br/>
<br/></div>
<!-- class="figure" --></li>
<li>
<p>Click <span class="bold">Next</span>. <a href="#CIHICCBD">Figure 4-28, &#34;Diagnostic Package Wizard - Package File&#34;</a> is displayed.</p>
<div id="DUMAG1519" class="figure">
<p class="titleinfigure"><a id="CIHICCBD"></a>Figure 4-28 Diagnostic Package Wizard - Package File</p>
<img width="638" height="477" src="img/diagpackc.gif" alt="Description of Figure 4-28 follows"/><br/>
<a id="sthref168" href="img_text/diagpackc.htm">Description of &#34;Figure 4-28 Diagnostic Package Wizard - Package File&#34;</a><br/>
<br/></div>
<!-- class="figure" --></li>
<li>
<p>After clicking <span class="bold">Finish</span>, the diagnostic jar file is created in the path chosen.</p>
</li>
</ol>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3209">
<tr>
<td class="cellalignment3216">
<table class="cellalignment3214">
<tr>
<td class="cellalignment3213"><a href="ch3tasks.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3213"><a href="ch5advanced.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3218">
<table class="cellalignment3212">
<tr>
<td class="cellalignment3213"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3213"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3213"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3213"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3213"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3213"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>