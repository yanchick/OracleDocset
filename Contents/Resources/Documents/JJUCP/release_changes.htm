<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-72356"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Changes%20in%20This%20Release%20for%20Oracle%20Universal%20Connection%20Pool%20for%20JDBC%20Developer%27s%20Guide"></a><title>Changes in This Release for Oracle Universal Connection Pool for JDBC Developer&#39;s Guide</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023"/>
<meta name="description" content="This guide provides instructions for using Oracle Universal Connection Pooling API. The API is JDBC driver agnostic."/>
<meta name="dcterms.created" content="2014-06-29T23:47:52Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Universal Connection Pool for JDBC Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49541-01"/>
<meta name="dcterms.isVersionOf" content="JJUCP"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="preface.htm" title="Previous" type="text/html"/>
<link rel="Next" href="intro.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49541-01.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">4/16</span> <!-- End Header -->
<script>
<!-- // <![CDATA[
window.name='release_changes'
// ]]> -->
</script> <script>
// <![CDATA[
function footdisplay(footnum,footnote) {
    var msg = window.open('', 'NewWindow' + footnum,
        'directories=no,height=120,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');

    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">');
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>');
    msg.document.write('Footnote ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('');
    msg.document.write('<style> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><h1>Footnote ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/body><\/html>');
    msg.document.close();
    msg.focus();
}
// ]]>
</script> <noscript>
<p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
</noscript>
<div id="JJUCP8284" class="preface"><a id="sthref8"></a>
<h1 class="preface">Changes in This Release for Oracle Universal Connection Pool for JDBC Developer&#39;s Guide</h1>
<p>This preface contains:</p>
<ul>
<li>
<p><a href="#CJAJEECB">Changes in Oracle Database 12<span class="italic">c</span> Release 1 (12.1)</a></p>
</li>
</ul>
<div id="JJUCP8285" class="prefsect1"><a id="CJAJEECB"></a>
<h2 class="prefsect1">Changes in Oracle Database 12<span class="italic">c</span> Release 1 (12.1)</h2>
<p>The following are changes in <span class="italic">Oracle Universal Connection Pool for JDBC Developer&#39;s Guide</span> for Oracle Database 12<span class="italic">c</span> Release 1 (12.1).</p>
<div id="JJUCP8286" class="prefsect2"><a id="sthref9"></a>
<h3 class="prefsect2">New Features</h3>
<p>The following features are new in this release:</p>
<ul>
<li>
<p>Support for Application Continuity</p>
<p>See <a href="app_cont.htm#CHDIGIEC">Chapter 9, &#34;Ensuring Application Continuity&#34;</a></p>
</li>
<li>
<p>Support for Global Data Services</p>
<p>See <a href="rac.htm#BABGJFHI">&#34;Using Global Data Services&#34;</a></p>
</li>
<li>
<p>Support for Database Resident Connection Pool</p>
<p>Database Resident Connection Pool (DRCP) is a connection pool in the server that is shared across many clients. You should use DRCP in connection pools where the number of active connections is fairly less than the number of open connections. Universal Connection Pool for JDBC completely supports DRCP feature.</p>
<p>See <a href="label.htm#CIHDBFAF">&#34;Using UCP with DRCP&#34;</a></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink JJDBC29023" href="../JJDBC/drcp.htm#JJDBC29023"><span class="italic">Oracle Database JDBC Developer&#39;s Guide</span></a> for more information about Database Resident Connection Pool</div>
</li>
<li>
<p>Support for graceful draining for planned outages</p>
<p>See <a href="rac.htm#BABGFIFI">&#34;Planned Shutdown Scenarios&#34;</a></p>
</li>
</ul>
</div>
<!-- class="prefsect2" -->
<div class="prefsect2"><a id="sthref10"></a>
<h3 class="prefsect2">Multitenant Data Source for Java</h3>
<p>To enable sharing a common pool of connections across multiple PDBs (pluggable databases) or tenants, Oracle JDBC and UCP furnish the multitenant data source for Java. In Oracle Database 12<span class="italic">c</span> Release 1 (12.1), it is based on a combination of the following:</p>
<ul>
<li>
<p>Global database user with access privileges to any PDB</p>
</li>
<li>
<p>UCP connection labeling</p>
</li>
<li>
<p>The new <code>SET CONTAINER</code> statement within a callback function:</p>
<p>The advantage of the <code>SET CONTAINER</code> statement is that the pool does not have to create a new connection to a PDB, if there is an existing connection to a different PDB. The pool can use the existing connection and can connect to the desired PDB through the <code>SET CONTAINER</code> statement. Use the following command to achieve this:</p>
<p><code>ALTER SESSION SET CONTAINER</code>=<span class="italic">&lt;PDB Name&gt;</span></p>
<p>This avoids the need to create a new connection from scratch.</p>
</li>
<li>
<p>The UCP connection labeling callback interface</p>
</li>
</ul>
<p>Following is an illustration of how multitenant data source for Java works:</p>
<ol>
<li>
<p><code>Tenant1</code> asks for a connection to <code>PDB1</code>, by calling the <code>getConnection()</code> method with the corresponding label that is mapped to a database ID.</p>
</li>
<li>
<p>UCP searches the pool for a free connection, tentatively with the specified label.</p>
</li>
<li>
<p>If <code>Conn1</code> label reads <code>PDB1</code>, then the connection is handed to JDBC, and then to <code>Tenant1</code> for use.</p>
<p>Otherwise, if <code>Conn1</code> label does not read <code>PDB1</code>, then the following occur:</p>
<ol>
<li>
<p>UCP uses the <code>ALTER SESSION SET CONTAINER</code> statement and invokes the user-implemented callback <code>configure</code> method to set <code>Conn1</code> to <code>PDB1</code>.</p>
</li>
<li>
<p>The <code>SET CONTAINER</code> statement is passed to the server and parsed.</p>
</li>
<li>
<p>The server executes the statement, and assigns the PDB-specific role to <code>Tenant1</code><a id="sthref11" href="#sthref11" onclick="footdisplay(1,&#34;If you are a global user in a PDB, then you cannot perform many tasks without a password-protected role.&#34;)"><sup class="tablefootnote">Foot&nbsp;1&nbsp;</sup></a>.</p>
</li>
<li>
<p>The server then connects <code>Conn1</code> to <code>PDB1</code>, and then returns the corresponding database ID (<code>dbid</code>) and other properties to JDBC.</p>
</li>
<li>
<p>JDBC notifies UCP and hands <code>Conn1</code> to <code>Tenant1</code> for use.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The multitenant data source for Java white paper posted on Oracle Technology Network:
<p><code><a href="http://www.oracle.com/technetwork/database/application-development/index-099369.html">http://www.oracle.com/technetwork/database/application-development/index-099369.html</a></code></p>
</div>
</li>
</ol>
</li>
</ol>
</div>
<!-- class="prefsect2" --></div>
<!-- class="prefsect1" --></div>
<!-- class="preface" -->
<hr/>
<br/>
<p style="text-decoration:underline">Footnote Legend</p>
Footnote&nbsp;1:&nbsp;If you are a global user in a PDB, then you cannot perform many tasks without a password-protected role.<br/></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4234">
<tr>
<td class="cellalignment4243">
<table class="cellalignment4239">
<tr>
<td class="cellalignment4238"><a href="preface.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4238"><a href="intro.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4246">
<table class="cellalignment4237">
<tr>
<td class="cellalignment4238"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4238"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4238"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4238"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4238"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4238"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>


</body></html>