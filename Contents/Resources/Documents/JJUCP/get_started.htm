<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-72347"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Getting%20Started"></a><title>Getting Started</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023"/>
<meta name="description" content="This guide provides instructions for using Oracle Universal Connection Pooling API. The API is JDBC driver agnostic."/>
<meta name="dcterms.created" content="2014-06-29T23:47:52Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Universal Connection Pool for JDBC Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49541-01"/>
<meta name="dcterms.isVersionOf" content="JJUCP"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="intro.htm" title="Previous" type="text/html"/>
<link rel="Next" href="connect.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49541-01.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">6/16</span> <!-- End Header -->
<div id="JJUCP8118" class="chapter"><a id="sthref39"></a>
<h1 class="chapter"><span class="secnum">2</span> Getting Started</h1>
<p>The following sections are included in this chapter:</p>
<ul>
<li>
<p><a href="#CIHIDJIF">Requirements for using UCP</a></p>
</li>
<li>
<p><a href="#CIHIDJJI">Basic Connection Steps in UCP</a></p>
</li>
<li>
<p><a href="#CIHEBGFG">Basic Connection Example Using UCP</a></p>
</li>
<li>
<p><a href="#CIHIBAEG">UCP for JDBC API Overview</a></p>
</li>
</ul>
<a id="CIHIDJIF"></a>
<div id="JJUCP8119" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Requirements for using UCP</h2>
<p><a id="sthref40"></a>UCP for JDBC has the following design-time and run-time requirements:</p>
<ul>
<li>
<p><a id="sthref41"></a>JRE 1.5 or higher</p>
</li>
<li>
<p><a id="sthref42"></a><a id="sthref43"></a>A JDBC diver or a connection factory class capable of returning a <code>java.sql.Connection</code> and <code>javax.sql.XAConnection</code> object</p>
<p><a id="sthref44"></a>Oracle drivers from releases 10.1 or higher are supported. Advanced Oracle Database features, such as Oracle RAC and Fast Connection Failover, require the Oracle Notification Service library (<code>ons.jar</code>) that is included with the Oracle Client software.</p>
</li>
<li>
<p>The <code>ucp.jar</code> library included in the classpath of the application.</p>
</li>
<li>
<p><a id="sthref45"></a>A database that supports SQL. Advanced features, such as Oracle RAC and Fast Connection Failover, require an Oracle Database.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CIHIDJJI"></a>
<div id="JJUCP8120" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Basic Connection Steps in UCP</h2>
<p><a id="sthref46"></a><a id="sthref47"></a>UCP for JDBC provides a pool-enabled data source that is used by applications to borrow connections from a UCP JDBC connection pool. A connection pool is not explicitly defined for the most basic use case. Instead, a default connection pool is implicitly created when the connection is borrowed.</p>
<p><a id="sthref48"></a><a id="sthref49"></a><a id="sthref50"></a><a id="sthref51"></a><a id="sthref52"></a>The following steps describe how to get a connection from a UCP for JDBC pool-enabled data source in order to access a database. The complete example is provided in <a href="#CIHHFHAG">Example 2-1, &#34;Basic Connection Example&#34;</a>:</p>
<ol>
<li>
<p>Use the UCP for JDBC data source factory (<code>oracle.ucp.jdbc.PoolDataSourceFactory</code>) to get an instance of a pool-enabled data source using the <code>getPoolDataSource</code> method. The data source instance must be of the type <code>PoolDataSource</code>. For example:</p>
<pre>PoolDataSource  pds = PoolDataSourceFactory.getPoolDataSource();
</pre></li>
<li>
<p><a id="sthref53"></a><a id="sthref54"></a><a id="sthref55"></a><a id="sthref56"></a>Set the connection properties that are required to get a physical connection to a database. These properties are set on the data source instance and include: the URL, the user name, and password to connect to the database and the connection factory used to get the physical connection. These properties are specific to a JDBC driver and database. For example:</p>
<pre>pds.setConnectionFactoryClassName(&#34;oracle.jdbc.pool.OracleDataSource&#34;);
pds.setURL(&#34;jdbc:oracle:thin:@//localhost:1521/XE&#34;);
pds.setUser(&#34;<span class="italic">&lt;user&gt;</span>&#34;);
pds.setPassword(&#34;<span class="italic">&lt;password&gt;</span>&#34;);
</pre></li>
<li>
<p>Set any pool properties in order to override the connection pool&#39;s default behavior. the pool properties are set on the data source instance. For example:</p>
<pre>pds.setInitialPoolSize(5);
</pre></li>
<li>
<p>Get a connection using the data source instance. The returned connection is a logical handle to a physical connection in the data source&#39;s connection pool. For example:</p>
<pre>Connection conn = pds.getConnection();
</pre></li>
<li>
<p>Use the connection to perform some work on the database:</p>
<pre>Statement stmt = conn.createStatement ();
stmt.execute(&#34;SELECT * FROM foo&#34;);
</pre></li>
<li>
<p>Close the connection and return it to the pool.</p>
<pre>conn.close();
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CIHEBGFG"></a>
<div id="JJUCP8121" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Basic Connection Example Using UCP</h2>
<p><a id="sthref57"></a><a id="sthref58"></a><a id="sthref59"></a>The following example is a program that connects to a database to do some work and then exits. The example is simple and in some cases not very practical; however, it does demonstrate the basic steps required to get a connection from a UCP for JDBC pooled-enabled data source in order to access a database.</p>
<div id="JJUCP8122" class="example">
<p class="titleinexample"><a id="CIHHFHAG"></a>Example 2-1 Basic Connection Example</p>
<pre>import java.sql.Connection;
import java.sql.SQLException;
import java.sql.Statement;
import oracle.ucp.jdbc.PoolDataSourceFactory;
import oracle.ucp.jdbc.PoolDataSource;

public class BasicConnectionExample {
   public static void main(String args[]) throws SQLException {
      try 
      {
         //Create pool-enabled data source instance.
         
         PoolDataSource  pds = PoolDataSourceFactory.getPoolDataSource();
         
         //set the connection properties on the data source.
         
         pds.setConnectionFactoryClassName(&#34;oracle.jdbc.pool.OracleDataSource&#34;);
         pds.setURL(&#34;jdbc:oracle:thin:@//localhost:1521/XE&#34;);
         pds.setUser(&#34;<span class="italic">&lt;user&gt;</span>&#34;);
         pds.setPassword(&#34;<span class="italic">&lt;password&gt;</span>&#34;);     
         
         //Override any pool properties.
         
         pds.setInitialPoolSize(5);
         
         //Get a database connection from the datasource.
         
         Connection conn = pds.getConnection();
         
         System.out.println(&#34;\nConnection obtained from &#34; +
          &#34;UniversalConnectionPool\n&#34;);
         
         //do some work with the connection.
         Statement stmt = conn.createStatement();
         stmt.execute(&#34;select * from foo&#34;);
         
         //Close the Connection.
         
         conn.close();
         conn=null;
         
         System.out.println(&#34;Connection returned to the &#34; +
          &#34;UniversalConnectionPool\n&#34;);
         
      }
      catch(SQLException e)
      {
         System.out.println(&#34;BasicConnectionExample - &#34; +
          &#34;main()-SQLException occurred : &#34;
              + e.getMessage());
      }
   }
}
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CIHIBAEG"></a>
<div id="JJUCP8123" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">UCP for JDBC API Overview</h2>
<p><a id="sthref60"></a><a id="sthref61"></a><a id="sthref62"></a>The following section provides a quick overview of the most commonly used packages of the UCP for JDBC API. Refer to the <a class="olink JJUAR" href="../JJUAR/toc.htm"><span class="italic">Oracle Universal Connection Pool Java API Reference</span></a> for complete details on the API.</p>
<p class="subhead2"><a id="JJUCP8124"></a>oracle.ucp.jdbc</p>
<p><a id="sthref63"></a>This package includes various interfaces and classes that are used by applications to work with JDBC connections and a connection pool. Among the interfaces found in this package, the <code>PoolDataSource</code> and <code>PoolXADataSource</code> data source interfaces are used by an application to get connections as well as get and set connection pool properties. Data source instances implementing these two interfaces automatically create a connection pool.</p>
<p class="subhead2"><a id="JJUCP8125"></a>oracle.ucp.admin</p>
<p><a id="sthref64"></a>This package includes interfaces for using a connection pool manager as well as MBeans that allow users to access connection pool and the connection pool manager operations and attributes using JMX operations. Among the interfaces, the <code>UniversalConnectionPoolManager</code> interface provides methods for creating and maintaining connection pool instances.</p>
<p class="subhead2"><a id="JJUCP8126"></a><a id="sthref65"></a>oracle.ucp</p>
<p>This package includes both required and optional callback interfaces that are used to implement connection pool features. For example, the <code>ConnectionAffinityCallback</code> interface is used to create a callback that enables or disables connection affinity and can also be used to customize connection affinity behavior. This package also contains statistics classes, UCP specific exception classes, and the logic to use the UCP directly, without using data sources.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4234">
<tr>
<td class="cellalignment4243">
<table class="cellalignment4239">
<tr>
<td class="cellalignment4238"><a href="intro.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4238"><a href="connect.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4246">
<table class="cellalignment4237">
<tr>
<td class="cellalignment4238"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4238"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4238"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4238"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4238"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4238"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>