<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-72342"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Ensuring%20Application%20Continuity"></a><title>Ensuring Application Continuity</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023"/>
<meta name="description" content="This guide provides instructions for using Oracle Universal Connection Pooling API. The API is JDBC driver agnostic."/>
<meta name="dcterms.created" content="2014-06-29T23:47:52Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Universal Connection Pool for JDBC Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49541-01"/>
<meta name="dcterms.isVersionOf" content="JJUCP"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="rac.htm" title="Previous" type="text/html"/>
<link rel="Next" href="dgn_conpool.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49541-01.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">13/16</span> <!-- End Header -->
<div id="JJUCP8254" class="chapter"><a id="CHDIGIEC"></a>
<h1 class="chapter"><span class="secnum">9</span> Ensuring Application Continuity</h1>
<p>Oracle Database 12<span class="italic">c</span> Release 1 (12.1) introduces the <a id="sthref369"></a>Application Continuity feature that provides a general purpose, application-independent infrastructure. Application Continuity enables recovery of work from an application perspective, after the occurrence of a planned or unplanned outage that can be related to system, communication, or hardware following a repair, a configuration change, or a patch application.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADFNS1058" href="../ADFNS/adfns_app_continuity.htm#ADFNS1058"><span class="italic">Oracle Database Development Guide</span></a> for more information about Application Continuity</div>
<p>For using Application Continuity, you must first configure your data source as described in <a href="#CHDDFEGB">&#34;Data Source Configuration&#34;</a>. After that, use one of the following two features for implementing Application Continuity in your applications using Universal Connection Pool (UCP) for JDBC:</p>
<ul>
<li>
<p><a href="#CHDECJCA">Connection Labeling</a></p>
</li>
<li>
<p><a href="#CHDDDJJG">Connection Initialization Callback</a></p>
</li>
</ul>
<a id="CHDDFEGB"></a>
<div id="JJUCP8261" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref370"></a>Data Source Configuration</h2>
<p>To utilize the Application Continuity feature on a pool-enabled data source, the application must make the following call on <code>oracle.ucp.jdbc.PoolDataSource</code> interface:</p>
<pre>// pds is a PoolDataSource
pds.setConnectionFactoryClassName(&#34;oracle.jdbc.replay.OracleDataSourceImpl&#34;);
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="connect.htm#CBBFDBBH">&#34;Using the Pool-Enabled Data Source&#34;</a></div>
<p>Always connect to a service, instead of using SID. Application Continuity is not supported when connecting in the SID syntax.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADFNS1058" href="../ADFNS/adfns_app_continuity.htm#ADFNS1058"><span class="italic">Oracle Database Development Guide</span></a> for more information about Application Continuity</div>
<p>When running against Oracle Real Application Clusters (Oracle RAC) or Data Guard, the application should also enable Fast Connection Failover (FCF) as shown in the following code snippet:</p>
<pre>pds.setFastConnectionFailoverEnabled(true);
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="rac.htm#BABBFJGJ">&#34;Enabling Fast Connection Failover&#34;</a> for more information</div>
</div>
<!-- class="sect1" -->
<a id="CHDECJCA"></a>
<div id="JJUCP8255" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref371"></a>Connection Labeling</h2>
<p>Connection labeling enables an application to attach arbitrary name/value pairs to a connection. The application can request a connection with the desired label from the connection pool.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="label.htm#BABGJEEA">&#34;Labeling Connections in UCP&#34;</a> for more information labeling connections</div>
<p>Connection labeling sets the initial state for each connection request. If the application uses connection labeling or benefits from labeling connections, then a labeling callback should be registered for Application Continuity to initialize clean connections at failover.</p>
<p>Every time Application Continuity gets a new connection from the underlying data source, the labeling callback executes. The callback executes during normal connection check-out and also during replay. So, the state that is created at run time is exactly re-created during replay. The initialization must be idempotent.</p>
<p>It is legal for the callback to execute a transaction as long as the transaction completes (either it commits or rolls back) at the end of callback invocation. Application Continuity repeats any action coded within the callback implementation, including such transaction. If an outage occurs during the execution of a UCP labeling callback, then Application Continuity may execute the callback more than once as part of the replay attempt. Again, it is important for the callback actions to be idempotent.</p>
</div>
<!-- class="sect1" -->
<a id="CHDDDJJG"></a>
<div id="JJUCP8256" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref372"></a>Connection Initialization Callback</h2>
<p>If an application cannot use connection labeling because it cannot be changed, then the connection initialization callback is provided for such an application.</p>
<p>When registered, the initialization callback is executed every time a connection is borrowed from the pool and at each successful reconnection following a recoverable error. For more information about using connection initialization callback, refer to <a href="connect.htm#CBBEJDEJ">&#34;Connection Initialization Callback&#34;</a>.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4234">
<tr>
<td class="cellalignment4243">
<table class="cellalignment4239">
<tr>
<td class="cellalignment4238"><a href="rac.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4238"><a href="dgn_conpool.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4246">
<table class="cellalignment4237">
<tr>
<td class="cellalignment4238"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4238"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4238"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4238"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4238"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4238"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>