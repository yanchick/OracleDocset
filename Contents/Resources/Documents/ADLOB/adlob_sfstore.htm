<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-146"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBFS%20SecureFiles%20Store"></a><title>DBFS SecureFiles Store</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="There are certain procedures for setting up and using a DBFS SecureFiles Store."/>
<meta name="keywords" content="SecureFiles Store, setting up, DBFS, DBFS SecureFiles Store, setting up permissions, creating SecureFiles File System Store, SecureFiles Store File Systems, initializing, INITFS, using a SecureFiles Store File System, DBFS Content API, using, SecureFiles Store File Systems, dropping, DBFS SecureFiles Store Package, DBMS_DBFS_SFS"/>
<meta name="dcterms.created" content="2017-03-16T22:27:47Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database SecureFiles and Large Objects Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E17605-12"/>
<meta name="dcterms.isVersionOf" content="ADLOB"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2015, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="adlob_fs.htm" title="Previous" type="text/html"/>
<link rel="Next" href="adlob_hierarch.htm" title="Next" type="text/html"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-F71C0B85-F08D-4CD0-9EB3-AB84C9B355AE"></a> <span id="PAGE" style="display:none;">12/34</span> <!-- End Header -->
<a id="ADLOB4594"></a>
<h1 id="ADLOB-GUID-F71C0B85-F08D-4CD0-9EB3-AB84C9B355AE" class="sect1"><span class="enumeration_chapter">6</span> DBFS SecureFiles Store</h1>
<div>
<p>There are certain procedures for setting up and using a DBFS SecureFiles Store.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="adlob_sfstore.htm#GUID-8DC871AC-95D6-496B-A277-AA47DA94BF64" title="There are several aspects to setting up a SecureFiles Store.">Setting Up a SecureFiles Store</a></p>
</li>
<li>
<p><a href="adlob_sfstore.htm#GUID-D25B94D8-8B78-443D-9167-45B0F9EFC378" title="The DBFS Content API provides methods to populate a SecureFiles Store file system and otherwise manage it.">Using a DBFS SecureFiles Store File System</a></p>
</li>
<li>
<p><a href="adlob_sfstore.htm#GUID-CE03355D-56C2-4497-9BD7-AD170EFD9615" title="The DBFS SecureFiles Store package (DBMS_DBFS_SFS) is a store provider for DBMS_DBFS_CONTENT that supports SecureFiles LOB storage for DBFS content.">About DBFS SecureFiles Store Package_ DBMS_DBFS_SFS</a></p>
</li>
</ul>
</div>
<a id="ADLOB46057"></a>
<div class="props_rev_3"><a id="GUID-8DC871AC-95D6-496B-A277-AA47DA94BF64"></a>
<h2 id="ADLOB-GUID-8DC871AC-95D6-496B-A277-AA47DA94BF64" class="sect2">Setting Up a SecureFiles Store</h2>
<div>
<p>There are several aspects to setting up a SecureFiles Store.</p>
<p>This section shows how to set up a SecureFiles Store.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="adlob_sfstore.htm#GUID-C971D674-D133-40E2-9B03-503002DDB20C" title="You must use a regular database user for all operational access to the Content API and stores.">About Managing Permissions</a></p>
</li>
<li>
<p><a href="adlob_sfstore.htm#GUID-F6A9C96C-C527-4A42-A3DA-CD95DDEFE8C8" title="You must grant the DBFS_ROLE role to any user that needs to use the DBFS content API.">Creating or Setting Permissions</a></p>
</li>
<li>
<p><a href="adlob_sfstore.htm#GUID-31709BF1-B980-4252-9428-7E6FE86612A5" title="You must create the SecureFiles file system stores that the DBFS Content API accesses.">Creating a SecureFiles File System Store</a></p>
</li>
<li>
<p><a href="adlob_sfstore.htm#GUID-21EEB659-373D-4101-B276-071928FBBFD5" title="You should never directly access tables that hold data for a SecureFiles Store file systems, even through the DBMS_DBFS_SFS package methods.">Accessing Tables that Hold SecureFiles System Store Data</a></p>
</li>
<li>
<p><a href="adlob_sfstore.htm#GUID-30782F65-0AC4-46FE-94D3-8E2A195D2327" title="You can truncate and re-initialize tables associated with an SecureFiles Store.">Initializing SecureFiles Store File Systems</a></p>
</li>
<li>
<p><a href="adlob_sfstore.htm#GUID-63980D61-CA18-4D58-8B87-E6AD1ECA969A" title="SecureFiles LOBs are only available in Oracle Database 11g Release 1 and higher. They are not available in earlier releases.">Comparison of SecureFiles LOBs to BasicFiles LOBs</a></p>
</li>
</ul>
</div>
<a id="ADLOB46062"></a>
<div class="props_rev_3"><a id="GUID-C971D674-D133-40E2-9B03-503002DDB20C"></a>
<h3 id="ADLOB-GUID-C971D674-D133-40E2-9B03-503002DDB20C" class="sect3">About Managing Permissions</h3>
<div>
<p>You must use a regular database user for all operational access to the Content API and stores.</p>
<p>Do not use <code class="codeph">SYS</code> or <code class="codeph">SYSTEM</code> users or <code class="codeph">SYSDBA</code> or <code class="codeph">SYSOPER</code> system privileges. For better security and separation of duty, only allow specific trusted users the ability to manage DBFS Content API operations.</p>
<p>You must grant each user the <code class="codeph">DBFS_ROLE</code> role. Otherwise, the user is not authorized to use the DBFS Content API. A user with suitable administrative privileges (or <code class="codeph">SYSDBA</code>) can grant the role to additional users as needed.</p>
<p>Because of the way roles, access control, and definer and invoker rights interact in the database, it may be necessary to explicitly grant various permissions (typically execute permissions) on DBFS Content API types (SQL types with the <code class="codeph">DBMS_DBFS_CONTENT_</code> <span class="italic"><code class="codeph">xxx</code></span> prefix) and packages (typically only <code class="codeph">DBMS_DBFS_CONTENT</code> and <code class="codeph">DBMS_DBFS_SFS</code>) to users who might otherwise have the <code class="codeph">DBFS_ROLE</code> role.</p>
<p>These explicit, direct grants are normal and to be expected, and can be provided as needed and on demand.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-F6A9C96C-C527-4A42-A3DA-CD95DDEFE8C8"></a>
<h3 id="ADLOB-GUID-F6A9C96C-C527-4A42-A3DA-CD95DDEFE8C8" class="sect3">Creating or Setting Permissions</h3>
<div>
<p>You must grant the <code class="codeph">DBFS_ROLE</code> role to any user that needs to use the DBFS content API.</p>
<ol>
<li class="stepexpand"><span>Create or determine DBFS Content API target users.</span>
<div>
<p>This example uses this user and password: <code class="codeph">sfs_demo/</code><span class="italic"><code class="codeph">password</code></span></p>
<p>At minimum, this database user must have the <code class="codeph">CREATE SESSION</code>, <code class="codeph">CREATE RESOURCE</code>, and <code class="codeph">CREATE VIEW</code> privileges.</p>
</div>
</li>
<li class="stepexpand"><span>Grant the <code class="codeph">DBFS_ROLE</code> role to the user.</span>
<div>
<pre dir="ltr">CONNECT / as sysdba
GRANT dbfs_role TO sfs_demo;
</pre></div>
</li>
</ol>
<div class="section">
<p>This sets up the DBFS Content API for any database user who has the <code class="codeph">DBFS_ROLE</code> role.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADLOB46157"></a><a id="ADLOB46063"></a>
<div class="props_rev_3"><a id="GUID-31709BF1-B980-4252-9428-7E6FE86612A5"></a>
<h3 id="ADLOB-GUID-31709BF1-B980-4252-9428-7E6FE86612A5" class="sect3">Creating a SecureFiles File System Store</h3>
<div>
<p>You must create the SecureFiles file system stores that the DBFS Content API accesses.</p>
<div class="section">
<p>The <code class="codeph">CREATEFILESYSTEM</code> procedure auto-commits before and after its execution (like a DDL). The method <code class="codeph">CREATESTORE</code> is a wrapper around <code class="codeph">CREATEFILESYSTEM</code>.</p>
<p>See <a class="olink ARPLS72079" target="_blank" href="../ARPLS/d_dbfs_sfs.htm#ARPLS72079"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for <code class="codeph">DBMS_DBFS_SFS</code> syntax details.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To create a SecureFiles File System Store:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Create the necessary stores to be accessed using the DBFS Content API:</span>
<div>
<pre dir="ltr">DECLARE
  BEGIN
    DBMS_DBFS_SFS.CREATEFILESYSTEM(
      store_name =&gt; &#39;FS1&#39;,
      tbl_name =&gt; &#39;T1&#39;,
      tbl_tbs =&gt; null,
      use_bf =&gt; false 
    );
    COMMIT;
  END;
/
</pre>
<p>where:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">store_name</code> is any arbitrary, user-unique name.</p>
</li>
<li>
<p><code class="codeph">tbl_name</code> is a valid table name, created in the current schema.</p>
</li>
<li>
<p><code class="codeph">tbl_tbs</code> is a valid tablespace name used for the store table and its dependent segments, such as indexes, LOBs, or nested tables. The default is <code class="codeph">NULL</code> and specifies a tablespace of the current schema.</p>
</li>
<li>
<p><code class="codeph">use_bf</code> specifies that BasicFiles LOBs should be used, if <code class="codeph">true</code>, or not used, if <code class="codeph">false</code>.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Register this store with the DBFS Content API as a new store managed by the SecureFiles Store provider.</span>
<div>
<pre dir="ltr">CONNECT sfs_demo
Enter password:<span class="italic">password</span>
DECLARE
  BEGIN
    DBMS_DBFS_CONTENT.REGISTERSTORE(
      store_name    =&gt; &#39;FS1&#39;,
      provider_name =&gt; &#39;anything&#39;,
      provider_package =&gt; &#39;<span class="bold">dbms_dbfs_sfs</span>&#39;
    );
    COMMIT;
  END;
/
</pre>
<p>where:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">store_name</code> is SecureFiles Store <code class="codeph">FS1</code>, which uses table <code class="codeph">SFS_DEMO.T1</code>.</p>
</li>
<li>
<p><code class="codeph">provider_name</code> is ignored.</p>
</li>
<li>
<p><code class="codeph">provider_package</code> is <code class="codeph">DBMS_DBFS_SFS</code>, for SecureFiles Store reference provider.</p>
</li>
</ul>
<p>This operation associates the SecureFiles Store <code class="codeph">FS1</code> with the <code class="codeph">DBMS_DBFS_SFS</code> provider.</p>
</div>
</li>
<li class="stepexpand"><span>Mount the store at suitable a mount-point.</span>
<div>
<pre dir="ltr">CONNECT sfs_demo
Enter password: <span class="italic">password</span>
DECLARE
  BEGIN
    DBMS_DBFS_CONTENT.MOUNTSTORE(
      store_name    =&gt; &#39;FS1&#39;,
      store_mount   =&gt; &#39;mnt1&#39;
    );
    COMMIT;
  END;
/
</pre>
<p>where:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">store_name</code> is SecureFiles Store <code class="codeph">FS1</code>, which uses table <code class="codeph">SFS_DEMO.T1</code>.</p>
</li>
<li>
<p><code class="codeph">store_mount</code> is the <a href="glossary.htm#GUID-D2894DED-27C9-4846-A980-D51E22388EC7"><span class="xrefglossterm">mount point</span></a>.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>[Optional] To see the results of the preceding steps, you can use the following statements.</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>To verify SecureFiles Store tables and file systems:</p>
<pre dir="ltr">SELECT * FROM TABLE(DBMS_DBFS_SFS.LISTTABLES);
SELECT * FROM TABLE(DBMS_DBFS_SFS.LISTFILESYSTEMS);
</pre></li>
<li>
<p>To verify ContentAPI Stores and mounts:</p>
<pre dir="ltr">SELECT * FROM TABLE(DBMS_DBFS_CONTENT.LISTSTORES);
SELECT * FROM TABLE(DBMS_DBFS_CONTENT.LISTMOUNTS);
 
</pre></li>
<li>
<p>To verify SecureFiles Store features:</p>
<pre dir="ltr">var fs1f number;
exec :fs1f := dbms_dbfs_content.getFeaturesByName(&#39;FS1&#39;);
select * from table(dbms_dbfs_content.decodeFeatures(:fs1f)); 
</pre></li>
<li>
<p>To verify resource and property views:</p>
<pre dir="ltr">SELECT * FROM DBFS_CONTENT;
SELECT * FROM DBFS_CONTENT_PROPERTIES;
</pre></li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="props_rev_3"><a id="GUID-21EEB659-373D-4101-B276-071928FBBFD5"></a>
<h3 id="ADLOB-GUID-21EEB659-373D-4101-B276-071928FBBFD5" class="sect3">Accessing Tables that Hold SecureFiles System Store Data</h3>
<div>
<p>You should never directly access tables that hold data for a SecureFiles Store file systems, even through the <code class="codeph">DBMS_DBFS_SFS</code> package methods.</p>
<div class="section">
<p>This is the correct way to access the file systems.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>For procedural operations: Use the DBFS Content API (<code class="codeph">DBMS_DBFS_CONTENT</code> methods).</p>
</li>
<li>
<p>For SQL operations: Use the resource and property views (<code class="codeph">DBFS_CONTENT</code> and <code class="codeph">DBFS_CONTENT_PROPERTIES</code>).</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="ADLOB46065"></a>
<div class="props_rev_3"><a id="GUID-30782F65-0AC4-46FE-94D3-8E2A195D2327"></a>
<h3 id="ADLOB-GUID-30782F65-0AC4-46FE-94D3-8E2A195D2327" class="sect3">Initializing SecureFiles Store File Systems</h3>
<div>
<p>You can truncate and re-initialize tables associated with an SecureFiles Store.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Use the procedure <code class="codeph">INITFS()</code>.</p>
<p>The procedure executes like a DDL, auto-committing before and after its execution.</p>
</li>
</ul>
<p>The following example uses file system <code class="codeph">FS1</code> and table <code class="codeph">SFS_DEMO</code>.<code class="codeph">T1</code>, which is associated with the SecureFiles Store <code class="codeph">store_name</code>.</p>
<pre dir="ltr">CONNECT sfs_demo;
Enter password: <span class="italic">password</span>
EXEC DBMS_DBFS_SFS.INITFS(<span class="italic">store_name</span> =&gt; &#39;FS1&#39;);
</pre></div>
<!-- class="section" --></div>
</div>
<a id="ADLOB46064"></a>
<div class="props_rev_3"><a id="GUID-63980D61-CA18-4D58-8B87-E6AD1ECA969A"></a>
<h3 id="ADLOB-GUID-63980D61-CA18-4D58-8B87-E6AD1ECA969A" class="sect3">Comparison of SecureFiles LOBs to BasicFiles LOBs</h3>
<div>
<p>SecureFiles LOBs are only available in Oracle Database 11<span class="italic">g</span> Release 1 and higher. They are not available in earlier releases.</p>
<p>You must use BasicFiles LOB storage for LOB storage in tablespaces that are not managed with Automatic Segment Space Management (ASSM).</p>
<p>Compatibility must be at least 11.1.0.0 to use SecureFiles LOBs.</p>
<p>Additionally, you need to specify the following in <code class="codeph">DBMS_DBFS_SFS.CREATEFILESYSTEM:</code></p>
<ul style="list-style-type: disc;">
<li>
<p>To use SecureFiles LOBs (the default), specify <code class="codeph">use_bf =&gt; false.</code></p>
</li>
<li>
<p>To use BasicFiles LOBs, specify <code class="codeph">use_bf =&gt; true</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADLOB46061"></a>
<div class="props_rev_3"><a id="GUID-D25B94D8-8B78-443D-9167-45B0F9EFC378"></a>
<h2 id="ADLOB-GUID-D25B94D8-8B78-443D-9167-45B0F9EFC378" class="sect2">Using a DBFS SecureFiles Store File System</h2>
<div>
<p>The DBFS Content API provides methods to populate a SecureFiles Store file system and otherwise manage it.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="adlob_sfstore.htm#GUID-CCD4D723-3998-47DD-9A77-56F629E5C119" title="You can create new file and directory elements to populate a SecureFiles Store file system.">DBFS Content API Working Example</a></p>
</li>
<li>
<p><a href="adlob_sfstore.htm#GUID-9EA41230-B03F-4B36-BB14-687DABB295B1" title="You can use the unmountStore method to drop SecureFiles Store file systems.">Dropping SecureFiles Store File Systems</a></p>
</li>
</ul>
</div>
<a id="ADLOB46159"></a><a id="ADLOB46067"></a>
<div class="props_rev_3"><a id="GUID-CCD4D723-3998-47DD-9A77-56F629E5C119"></a>
<h3 id="ADLOB-GUID-CCD4D723-3998-47DD-9A77-56F629E5C119" class="sect3">DBFS Content API Working Example</h3>
<div>
<p>You can create new file and directory elements to populate a SecureFiles Store file system.</p>
<p>If you have executed the steps in <span class="q">&#34;<a href="adlob_sfstore.htm#GUID-8DC871AC-95D6-496B-A277-AA47DA94BF64" title="There are several aspects to setting up a SecureFiles Store.">Setting Up a SecureFiles Store</a>&#34;</span>, set the DBFS Content API permissions, created at least one SecureFiles Store reference file system, and mounted it under the mount point <code class="codeph">/mnt1</code>, then you can create a new file and directory elements as demonstrated in <a href="adlob_sfstore.htm#GUID-CCD4D723-3998-47DD-9A77-56F629E5C119__BABHCECE">Example 6-1</a>.</p>
<div class="example" id="GUID-CCD4D723-3998-47DD-9A77-56F629E5C119__BABHCECE">
<p class="titleinexample">Example 6-1 Working with DBFS Content API</p>
<pre dir="ltr">CONNECT tjones
Enter password: <span class="bold">password</span>
 
DECLARE
   ret integer;
   b   blob;
   str varchar2(1000)  := &#39;&#39; || chr(10) ||
 
&#39;#include &lt;stdio.h&gt;&#39; || chr(10) ||
&#39;&#39; || chr(10) ||
&#39;int main(int argc, char** argv)&#39; || chr(10) ||
&#39;{&#39; || chr(10) ||
&#39;    (void) printf(&#34;hello world\n&#34;);&#39; || chr(10) ||
&#39;    RETURN 0;&#39; || chr(10) ||
&#39;}&#39; || chr(10) ||
&#39;&#39;;
 
    BEGIN
        ret := dbms_fuse.fs_mkdir(&#39;/mnt1/<span class="bold">FS1</span>&#39;);
        ret := dbms_fuse.fs_creat(&#39;/mnt1/FS1/hello.c&#39;, content =&gt; b);
        dbms_lob.writeappend(b, length(str), utl_raw.cast_to_raw(str));
        COMMIT;
    END;
    /
    SHOW ERRORS;
 
    -- verify newly created directory and file
    SELECT pathname, pathtype, length(filedata),
        utl_raw.cast_to_varchar2(filedata)
        FROM dbfs_content
            WHERE pathname LIKE &#39;/mnt1/<span class="bold">FS1</span>%&#39;
            ORDER BY pathname;
</pre>
<p>The file system can be populated and accessed from PL/SQL with <code class="codeph">DBMS_DBFS_CONTENT</code>. The file system can be accessed read-only from SQL using the <code class="codeph">dbfs_content</code> and <code class="codeph">dbfs_content_properties</code> views.</p>
<p>The file system can also be populated and accessed using regular file system APIs and UNIX utilities when mounted using FUSE, or by the standalone <code class="codeph">dbfs_client</code> tool (in environments where <code class="codeph">FUSE</code> is either unavailable or not set up).</p>
</div>
<!-- class="example" --></div>
</div>
<a id="ADLOB46066"></a>
<div class="props_rev_3"><a id="GUID-9EA41230-B03F-4B36-BB14-687DABB295B1"></a>
<h3 id="ADLOB-GUID-9EA41230-B03F-4B36-BB14-687DABB295B1" class="sect3">Dropping SecureFiles Store File Systems</h3>
<div>
<p>You can use the <code class="codeph">unmountStore</code> method to drop SecureFiles Store file systems.</p>
<div class="section">
<p>This method removes all stores referring to the file system from the metadata tables, and drops the underlying file system table. The procedure executes like a DDL, auto-committing before and after its execution.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Unmount the store.</span>
<div>
<pre dir="ltr">CONNECT sfs_demo
Enter password: <span class="italic">password</span>
DECLARE
  BEGIN
    DBMS_DBFS_CONTENT.UNMOUNTSTORE(
      store_name    =&gt; &#39;<span class="bold">FS1</span>&#39;,
      store_mount   =&gt; &#39;mntl&#39;;
    );
    COMMIT;
END;
/
</pre>
<p>where:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">store_name</code> is SecureFiles Store <code class="codeph">FS1</code>, which uses table <code class="codeph">SFS_DEMO.T1</code>.</p>
</li>
<li>
<p><code class="codeph">store_mount</code> is the mount point.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Unregister the stores.</span>
<div>
<pre dir="ltr">CONNECT sfs_demo
Enter password: <span class="italic">password</span>
EXEC DBMS_DBFS_CONTENT.UNREGISTERSTORE(store_name =&gt; &#39;FS1&#39;);
COMMIT;
</pre>
<p>where <code class="codeph">store_name</code> is SecureFiles Store <code class="codeph">FS1</code>, which uses table <code class="codeph">SFS_DEMO.T1</code>.</p>
</div>
</li>
<li class="stepexpand"><span>Drop the file system.</span>
<div>
<pre dir="ltr">CONNECT sfs_demo/******;
EXEC DBMS_DBFS_SFS.DROPFILESYSTEM(store_name =&gt; &#39;FS1&#39;);
COMMIT;
</pre>
<p>where <code class="codeph">store_name</code> is SecureFiles Store <code class="codeph">FS1</code>, which uses table <code class="codeph">SFS_DEMO.T1</code>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<a id="ADLOB46184"></a>
<div class="props_rev_3"><a id="GUID-CE03355D-56C2-4497-9BD7-AD170EFD9615"></a>
<h2 id="ADLOB-GUID-CE03355D-56C2-4497-9BD7-AD170EFD9615" class="sect2">About DBFS SecureFiles Store Package, DBMS_DBFS_SFS</h2>
<div>
<p>The DBFS SecureFiles Store package (<code class="codeph">DBMS_DBFS_SFS</code>) is a store provider for <code class="codeph">DBMS_DBFS_CONTENT</code> that supports SecureFiles LOB storage for DBFS content.</p>
<p>To use the <code class="codeph">DBMS_DBFS_SFS</code> package, you must be granted the <code class="codeph">DBFS_ROLE</code> role.</p>
<p>The SecureFiles Store provider is a default implementation of the DBFS Content API (and is a standard example of a store provider that conforms to the Provider SPI) that enables applications that already use LOBs as columns in their schema, to access the <code class="codeph">BLOB</code> columns. This enables existing applications to easily add PL/SQL provider implementations and provide access through the DBFS Content API without changing their schemas or their business logic.</p>
<p>Applications can also read and write content that is stored in other (third party) stores through the standard DBFS Content API interface. See <a href="adlob_dbstore.htm#GUID-01819696-9FE0-41AB-9388-A0ECA1F72E52" title="In order to customize a DBFS store, you must implement the DBFS Content SPI (DBMS_DBFS_CONTENT_SPI). It is the basis for existing stores such as the DBFS SecureFiles Store and the DFFS Hierarchical Store, as well as any user-defined DBFS stores that you create.The DBFS Content SPI (Store Provider Interface) is a specification only and has no package body.You can use this example store provider for DBFS, TaBleFileSystem Store Provider (&#34;tbfs&#34;), as a skeleton for custom providers or as a learning tool, to become familiar with the DBFS and its SPI.These are the mechanics of the example store provider for DBFS, TaBleFileSystem Store Provider (&#34;tbfs&#34;).You will need certain files for installation and setup of the DBFS TaBleFileSystem Store Provider (&#34;tbfs&#34;).Once the example store provider for DBFS, TaBleFileSystem Store Provider (&#34;tbfs&#34;) is installed, files can be added or removed in several different ways and other changes can be made to the TBFS.The TBFS is simple because its primary purpose is to serve as a teaching and learning example.The TBFS.SQL script is the top level driver script.The TBL.SQL script creates a test user, a tablespace, the table that backs the filesystem and so on.The spec.sql script provide the SPI specification of the tbfs.The body.sql script provides the SPI implementation of the tbfs.The capi.sql script registers and mounts the DBFS.">Creating Your Own DBFS Store</a> and <a class="olink ARPLS72231" target="_blank" href="../ARPLS/d_dbfs_content_spi.htm#ARPLS72231"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the Provider SPI defined in <code class="codeph">DBMS_DBFS_CONTENT_SPI</code>.</p>
<p>In a SecureFiles Store, the underlying user data is stored in SecureFiles LOBs and metadata such as pathnames, IDs, and properties are stored as columns in relational tables. See <span class="q">&#34;<a href="adlob_smart.htm#GUID-A65C0BA7-BA2A-4DDE-A577-4670CCCC60C0" title="SecureFiles LOBs can only be created in tablespaces managed with Automatic Segment Space Management (ASSM), unlike BasicFiles LOB storage.">SecureFiles LOB Storage</a>&#34;</span> for advanced features of SecureFiles LOBs.</p>
<p>See <a class="olink ARPLS72180" target="_blank" href="../ARPLS/d_dbfs_sfs.htm#ARPLS72180"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code class="codeph">DBMS_DBFS_SFS</code> package.</p>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2782">
<tr>
<td class="cellalignment2794">
<table class="cellalignment2787">
<tr>
<td class="cellalignment2786"><a href="adlob_fs.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2786"><a href="adlob_hierarch.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2015, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2796">
<table class="cellalignment2785">
<tr>
<td class="cellalignment2786"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2786"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2786"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2786"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2786"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2786"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>