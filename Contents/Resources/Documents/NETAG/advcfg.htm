<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-78406"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Enabling%20Advanced%20Features%20of%20Oracle%20Net%20Services"></a><title>Enabling Advanced Features of Oracle Net Services</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-11T8:0:56Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Net Services Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E17610-12"/>
<meta name="dcterms.isVersionOf" content="NETAG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="profile.htm" title="Previous" type="text/html"/>
<link rel="Next" href="performance.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17610-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">22/28</span> <!-- End Header -->
<script>
<!-- // <![CDATA[
window.name='advcfg'
// ]]> -->
</script> <script>
// <![CDATA[
function footdisplay(footnum,footnote) {
    var msg = window.open('', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');

    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">');
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>');
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('');
    msg.document.write('<style> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() { var height = msg.document.getElementById('footnote').offsetHeight; msg.resizeTo(598, height + 100); }, 100);
    msg.focus();
}
// ]]>
</script> <noscript>
<p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
</noscript>
<div id="NETAG013" class="chapter"><a id="i476388"></a>
<h1 class="chapter"><span class="secnum">13</span> Enabling Advanced Features of Oracle Net Services</h1>
<p>This chapter describes how to configure the advanced features of Oracle Net Services, including advanced connect data parameters, <a href="glossary.htm#BGBCDAAB"><span class="xrefglossterm">load balancing</span></a>, <a href="glossary.htm#BGBBFHIE"><span class="xrefglossterm">failover</span></a>, and connections to non-database services.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#i469492">Configuring Advanced Network Address and Connect Data Information</a></p>
</li>
<li>
<p><a href="#i475648">Understanding Connection Load Balancing</a></p>
</li>
<li>
<p><a href="#i473297">Configuring Transparent Application Failover</a></p>
</li>
<li>
<p><a href="#i480772">Specifying the Instance Role for Primary and Secondary Instance Configurations</a></p>
</li>
<li>
<p><a href="#CEGEDFCH">Understanding Static Service Registration</a></p>
</li>
<li>
<p><a href="#i463776">Configuring Connections to Third-party Database Services</a></p>
</li>
</ul>
<a id="i469492"></a>
<div id="NETAG328" class="sect1">
<h2 class="sect1">Configuring Advanced Network Address and Connect Data Information</h2>
<p>A database service can be accessed by several routes and protocol addresses. You configure which routes to use by setting the list of protocol addresses. You configure the order addresses are used by specifying the address parameters. This section contains the following topics:</p>
<ul>
<li>
<p><a href="#i457717">Creating a List of Listener Protocol Addresses</a></p>
</li>
<li>
<p><a href="#i465213">About the Address List Parameters</a></p>
</li>
<li>
<p><a href="#i463916">About the Advanced Connect Data Parameters</a></p>
</li>
</ul>
<a id="i457717"></a>
<div id="NETAG329" class="sect2">
<h3 class="sect2">Creating a List of Listener Protocol Addresses<a id="sthref798"></a><a id="sthref799"></a><a id="sthref800"></a><a id="sthref801"></a><a id="sthref802"></a><a id="sthref803"></a><a id="sthref804"></a></h3>
<p>A database service may be accessed by more than one network route, or protocol address. In the following example, <code>sales.us.example.com</code> can connect to the <code dir="ltr">sales.us.example.com</code> service using listeners on either <code dir="ltr">sales1-server</code> or <code dir="ltr">sales2-server</code>.</p>
<pre dir="ltr">sales.us.example.com=
 (DESCRIPTION=
  <span class="bold">(ADDRESS_LIST=</span>
    <span class="bold">(ADDRESS=(PROTOCOL=tcp)(HOST=sales1-server)(PORT=1521)</span>)
    <span class="bold">(ADDRESS=(PROTOCOL=tcp)(HOST=sales2-server)(PORT=1521)</span>))
  (CONNECT_DATA=
    (SERVICE_NAME=sales.us.example.com)))
</pre>
<p>To add a network protocol address to an existing network service name or database service, use one of the following procedures:</p>
<ul>
<li>
<p><a href="#BABBICDC">Adding a Network Protocol Using Oracle Enterprise Manager Cloud Control</a></p>
</li>
<li>
<p><a href="#BABGBHBG">Adding a Network Protocol Using Oracle Net Manager</a></p>
</li>
</ul>
<p class="subhead2"><a id="BABBICDC"></a><a id="NETAG1171"></a>Adding a Network Protocol Using Oracle Enterprise Manager Cloud Control</p>
<p>The following procedure describes how to add a network protocol to an existing network service name or database service using Oracle Enterprise Manager Cloud Control:</p>
<ol>
<li>
<p>Access the Directory Naming or Local Naming page in Oracle Enterprise Manager Cloud Control:</p>
<ol>
<li>
<p>Access the Net Services Administration page in Oracle Enterprise Manager Cloud Control.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="admintools.htm#i491701">&#34;Using Oracle Enterprise Manager Cloud Control to Configure Oracle Net Services&#34;</a></div>
</li>
<li>
<p>Select <span class="bold">Local Naming</span> or <span class="bold">Directory Naming</span> from the Administer list, and then select the Oracle home for the directory server or the location of the local configuration files.</p>
</li>
<li>
<p>Click <span class="bold">Go</span>.</p>
<p>The Local Naming or Directory Naming page appears.</p>
</li>
</ol>
</li>
<li>
<p>Select the directory service or network service name.</p>
<ul>
<li>
<p>For Local Naming, select a network service from the list, and then click <span class="bold">Edit</span>.</p>
</li>
<li>
<p>For Directory Naming, perform a search of the network service name in the Simple Search section, then select the network service or database service from the Results list, and then click <span class="bold">Edit</span>.</p>
</li>
</ul>
</li>
<li id="i486303">
<p>In the Addresses section, click <span class="bold">Add</span>.</p>
<p>The Add Address page appears.</p>
</li>
<li>
<p>From the Protocol list, select the protocol which the listener is configured to listen. This protocol must also be installed on the client.</p>
</li>
<li>
<p>Enter the appropriate parameter information for the selected protocol in the fields provided.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETRF004" href="../NETRF/protocoladd.htm#NETRF004"><span class="italic">Oracle Database Net Services Reference</span></a> for protocol parameter settings</div>
</li>
<li>
<p>(Optional) In the Advanced Parameters section, specify the I/O buffer space limit for send and receive operations of sessions in the Total Send Buffer Size and Total Receive Buffer Size fields.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="performance.htm#i1007572">&#34;Configuring I/O Buffer Space&#34;</a> for additional information about buffer space</div>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The protocol address is added to the Addresses section.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to update the address information.</p>
</li>
</ol>
<p class="subhead2"><a id="BABGBHBG"></a><a id="NETAG1172"></a>Adding a Network Protocol Using Oracle Net Manager</p>
<p>The following procedure describes how to add a network protocol to an existing network service name or database service using Oracle Net Manager:</p>
<ol>
<li>
<p>Start Oracle Net Manager.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="admintools.htm#i483238">&#34;Using Oracle Net Manager to Configure Oracle Net Services&#34;</a></div>
</li>
<li>
<p>In the navigator pane, select <span class="bold">Service Naming</span> from the Directory or Local menus.</p>
</li>
<li>
<p>Select either the network service name or a database service.</p>
<p>The right pane displays the current destination service and address list.</p>
</li>
<li id="i486084">
<p>In the Address Configuration box, click the plus sign (+) to add a new address.</p>
<p>A new Address tab appears:</p>
<ol>
<li>
<p>Select the protocol and enter appropriate address information.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETRF0041" href="../NETRF/protocoladd.htm#NETRF0041"><span class="italic">Oracle Database Net Services Reference</span></a> for details about protocol address parameters</div>
</li>
<li>
<p>(Optional) On the Address tab, click <span class="bold">Advanced</span> to specify the I/O buffer space limit for send and receive operations of sessions in the Total Send Buffer Size and Total Receive Buffer Size fields.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="performance.htm#i1007572">&#34;Configuring I/O Buffer Space&#34;</a> for additional information about buffer space</div>
</li>
<li>
<p>Order the protocol addresses using the left-arrow and right-arrow buttons. This will order the addresses in the protocol address list. Unless multiple address options are configured, the first address in the list is contacted.</p>
</li>
</ol>
</li>
<li>
<p>Select <span class="bold">Save Network Configuration</span> from the File menu.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="i465213"></a>
<div id="NETAG332" class="sect2">
<h3 class="sect2">About the <a id="sthref805"></a><a id="sthref806"></a><a id="sthref807"></a>Address List <a id="sthref808"></a><a id="sthref809"></a><a id="sthref810"></a><a id="sthref811"></a>Parameters<a id="sthref812"></a><a id="sthref813"></a><a id="sthref814"></a></h3>
<p>When a database service is accessible by multiple listener protocol addresses, specify the order in which the addresses are to be used, such as chosen randomly or tried sequentially. <a href="#g492599">Table 13-1</a> lists the parameters used with multiple protocol addresses.</p>
<div id="NETAG1173" class="tblruleformal">
<p class="titleintable"><a id="sthref815"></a><a id="g492599"></a>Table 13-1 Address List Parameters in the tnsnames.ora File</p>
<table class="cellalignment6129" title="Address List Parameters in the tnsnames.ora File" summary="Address List Parameters" dir="ltr">
<thead>
<tr class="cellalignment6123">
<th class="cellalignment6130" id="r1c1-t8">Parameter</th>
<th class="cellalignment6130" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r2c1-t8" headers="r1c1-t8">
<p>FAILOVER<a id="sthref816"></a><a id="sthref817"></a><a id="sthref818"></a><a id="sthref819"></a><a id="sthref820"></a><a id="sthref821"></a></p>
</td>
<td class="cellalignment6131" headers="r2c1-t8 r1c2-t8">
<p>At connect time, this parameter instructs Oracle Net to fail over to a different listener if the first listener fails when set to <code dir="ltr">on</code>. The number of addresses in the list determines how many addresses are tried. When set to <code dir="ltr">off</code>, instructs Oracle Net to try one address.</p>
<p>Connect-time failover is turned <code dir="ltr">on</code> by default for multiple address lists (ADDRESS_LIST), connect descriptors (DESCRIPTION), and multiple connect descriptors (DESCRIPTION_LIST).</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r3c1-t8" headers="r1c1-t8">
<p>LOAD_BALANCE<a id="sthref822"></a><a id="sthref823"></a><a id="sthref824"></a></p>
</td>
<td class="cellalignment6131" headers="r3c1-t8 r1c2-t8">
<p>When set to <code dir="ltr">on</code>, this parameter instructs Oracle Net to progress through the list of protocol addresses in a random sequence, balancing the load on the various listeners. When set to <code dir="ltr">off</code>, instructs Oracle Net to try the addresses sequentially until one succeeds.</p>
<p>Client load balancing is turned <code dir="ltr">on</code> by default for multiple connect descriptors (DESCRIPTION_LIST).</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r4c1-t8" headers="r1c1-t8">
<p>SOURCE_ROUTE<a id="sthref825"></a><a id="sthref826"></a></p>
</td>
<td class="cellalignment6131" headers="r4c1-t8 r1c2-t8">
<p>When set to <code dir="ltr">on</code>, this parameter instructs Oracle Net to use each address in the order presented until the destination is reached. This parameter is required for reaching the destination using a specific route, that is, by specific computers. This parameter is used to enable connections to <a href="glossary.htm#BGBIIEEG"><span class="xrefglossterm">Oracle Connection Manager</span></a>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblruleformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot set source routing (SOURCE_ROUTE) at the same level as connect-time failover (FAILOVER) or client load balancing (LOAD_BALANCE). Source routing connects to each address in the list sequentially whereas connect-time failover and client load balancing select a single address from a list.
<p>When a connect descriptor in a <code dir="ltr">tnsnames.ora</code> file contains at least two protocol addresses for an Oracle Connection Manager hop, then parameters for connect-time failover and load balancing within the hop can be included in the file.</p>
</div>
<p><a href="#g492573">Table 13-2</a> describes the <a id="sthref827"></a><a id="sthref828"></a>address list options.</p>
<div id="NETAG1174" class="tblruleformal">
<p class="titleintable"><a id="sthref829"></a><a id="g492573"></a>Table 13-2 Address List Options Dialog Box</p>
<table class="cellalignment6129" title="Address List Options Dialog Box" summary="Address List Options Dialog Box" dir="ltr">
<thead>
<tr class="cellalignment6123">
<th class="cellalignment6130" id="r1c1-t10">Option<a id="sthref830"></a><a id="sthref831"></a></th>
<th class="cellalignment6130" id="r1c2-t10">Parameter Setting</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r2c1-t10" headers="r1c1-t10">
<p>Try each address, in order, until one succeeds.</p>
</td>
<td class="cellalignment6131" headers="r2c1-t10 r1c2-t10">
<p>FAILOVER=on<a id="sthref832"></a><a id="sthref833"></a></p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r3c1-t10" headers="r1c1-t10">
<p>Try each address, randomly, until one succeeds.</p>
</td>
<td class="cellalignment6131" headers="r3c1-t10 r1c2-t10">
<p>LOAD_BALANCE=on</p>
<p><a id="i486157"></a>FAILOVER=on</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r4c1-t10" headers="r1c1-t10">
<p>Try one address, selected at random.</p>
</td>
<td class="cellalignment6131" headers="r4c1-t10 r1c2-t10">
<p>LOAD_BALANCE=on</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r5c1-t10" headers="r1c1-t10">
<p>Use each address in order until destination reached.</p>
</td>
<td class="cellalignment6131" headers="r5c1-t10 r1c2-t10">
<p>SOURCE_ROUTE=on</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r6c1-t10" headers="r1c1-t10">
<p>Use only the first address.</p>
</td>
<td class="cellalignment6131" headers="r6c1-t10 r1c2-t10">
<p>LOAD_BALANCE=off</p>
<p>FAILOVER=off</p>
<p>SOURCE_ROUTE=off</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblruleformal" -->
<p>The following example shows a <code dir="ltr">tnsnames.ora</code> file configured for client load balancing:</p>
<pre dir="ltr">sales.us.example.com=
 (DESCRIPTION=
  (ADDRESS_LIST=
  <span class="bold">(LOAD_BALANCE=on)</span>
   (ADDRESS=(PROTOCOL=tcp)(HOST=sales1-server)(PORT=1521)) 
   (ADDRESS=(PROTOCOL=tcp)(HOST=sales2-server)(PORT=1521)))
  (CONNECT_DATA=
    (SERVICE_NAME=sales.us.example.com))) 
</pre>
<p>The following example shows a <code dir="ltr">tnsnames.ora</code> file configured for connect-time failover:</p>
<pre dir="ltr">sales.us.example.com=
 (DESCRIPTION=
  (ADDRESS_LIST=
   <span class="bold">(LOAD_BALANCE=off)</span>
   <span class="bold">(FAILOVER=on)</span>
   (ADDRESS=(PROTOCOL=tcp)(HOST=sales1-server)(PORT=1521)) 
   (ADDRESS=(PROTOCOL=tcp)(HOST=sales2-server)(PORT=1521)))
  (CONNECT_DATA=
   (SERVICE_NAME=sales.us.example.com)))
</pre>
<p>The following example shows a tnsnames.ora file configured for Oracle Connection Manager and load balancing:</p>
<pre dir="ltr">sales.us.example.com=
(DESCRIPTION=
   (SOURCE_ROUTE=ON)
   (ADDRESS=(PROTOCOL=tcp)(HOST=cman-pc1)(PORT=1630))
   (ADDRESS=
     (LOAD_BALANCE=ON)
     (ADDRESS=(PROTOCOL=tcp)(HOST=cman-pc2)(PORT=1521))
     (ADDRESS=(PROTOCOL=tcp)(HOST=cman-pc3)(PORT=1521)))
   (CONNECT_DATA=
     (SERVICE_NAME=sales.us.example.com)))
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="cman.htm#i484544">&#34;Configuring Clients for Oracle Connection Manager&#34;</a> for additional information about configuring clients for source routing</div>
<div id="NETAG1586" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref834"></a>
<h4 class="sect3">Configuring Address List Parameters</h4>
<p>The following procedure describes how to configure address list parameters:</p>
<ol>
<li>
<p>Perform the procedure in <a href="#i457717">&#34;Creating a List of Listener Protocol Addresses&#34;</a>.</p>
</li>
<li>
<p>Use Oracle Enterprise Manager Cloud Control or Oracle Net Manager to configure address list options.</p>
<ul>
<li>
<p>For Oracle Enterprise Manager Cloud Control, select the appropriate option in the Connect-time Failover and Client Load Balancing section.</p>
</li>
<li>
<p>For Oracle Net Manager, click <span class="bold">Advanced</span> in the Address Configuration box. The Address List Options dialog box appears. Select the appropriate option.</p>
</li>
</ul>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i463916"></a>
<div id="NETAG0131" class="sect2">
<h3 class="sect2">About the Advanced Connect Data Parameters</h3>
<p>Starting with Oracle Database 12<span class="italic">c</span> Release 1 (12.1), data compression can be set in the <code dir="ltr">sqlnet.ora</code> file. The parameters that set compression are SQLNET.COMPRESSION and SQLNET.COMPRESSION_LEVELS. Setting these parameters in the <code dir="ltr">sqlnet.ora</code> file affects all the connections using the <code dir="ltr">sqlnet.ora</code> file, except for Oracle Data Guard streaming redo and SecureFiles LOBs (Large Objects). The following example shows how to set compression:</p>
<pre dir="ltr">SQLNET.COMPRESSION = yes
SQLNET.COMPRESSION_LEVELS =(low,high)
</pre>
<p>The CONNECT_DATA section of a connect descriptor in the <code dir="ltr">tnsnames.ora</code> file defines the destination database service. In the following example, SERVICE_NAME defines a service called <code dir="ltr">sales.us.example.com</code>:</p>
<pre dir="ltr">sales.us.example.com=
 (DESCRIPTION=
   (ADDRESS=(PROTOCOL=tcp)(HOST=sales-server)(PORT=1521))
   <span class="bold">(CONNECT_DATA=</span>
<span class="bold">    (SERVICE_NAME=sales.us.example.com)</span>)) 
</pre>
<p>In addition to the service name, you can optionally configure the connect data information with the parameters described in <a href="#g492533">Table 13-3</a>.</p>
<div id="NETAG1175" class="tblruleformalwide">
<p class="titleintable"><a id="sthref835"></a><a id="g492533"></a>Table 13-3 Advanced Connect Data Settings in the tnsnames.ora File</p>
<table class="cellalignment6129" title="Advanced Connect Data Settings in the tnsnames.ora File" summary="Advanced Connect Data Settings" dir="ltr">
<thead>
<tr class="cellalignment6123">
<th class="cellalignment6130" id="r1c1-t12">Oracle Enterprise Manager Cloud Control/Oracle Net Manager Option</th>
<th class="cellalignment6130" id="r1c2-t12">tnsnames.ora File Parameter</th>
<th class="cellalignment6130" id="r1c3-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r2c1-t12" headers="r1c1-t12">
<p>Instance Name</p>
</td>
<td class="cellalignment6131" headers="r2c1-t12 r1c2-t12">
<p><a id="sthref836"></a><a id="sthref837"></a>INSTANCE_NAME<a id="sthref838"></a><a id="sthref839"></a></p>
</td>
<td class="cellalignment6131" headers="r2c1-t12 r1c3-t12">
<p>The database instance to access. The instance name can be obtained from the INSTANCE_NAME parameter in the initialization parameter file.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r3c1-t12" headers="r1c1-t12">
<p>Session Data Unit Size</p>
</td>
<td class="cellalignment6131" headers="r3c1-t12 r1c2-t12">
<p><a id="sthref840"></a><a id="sthref841"></a>SDU<a id="sthref842"></a><a id="sthref843"></a><a id="sthref844"></a></p>
</td>
<td class="cellalignment6131" headers="r3c1-t12 r1c3-t12">
<p>The transfer rate of data packets being sent across the network. You can specify the <a href="glossary.htm#BGBBHCJF"><span class="xrefglossterm">session data unit (SDU)</span></a> size to change the performance characteristics having to do with the packets sent across the network. The SDU size limit is 2 MB.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r4c1-t12" headers="r1c1-t12">
<p>Use for Heterogeneous Services</p>
</td>
<td class="cellalignment6131" headers="r4c1-t12 r1c2-t12">
<p><a id="sthref845"></a><a id="sthref846"></a>HS<a id="sthref847"></a><a id="sthref848"></a></p>
</td>
<td class="cellalignment6131" headers="r4c1-t12 r1c3-t12">
<p>If you want an Oracle database server to access a third-party system through <a href="glossary.htm#BGBFFBHG"><span class="xrefglossterm">Heterogeneous Services</span></a>, then set this option to <code dir="ltr">on</code>.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r5c1-t12" headers="r1c1-t12">
<p><a id="sthref849"></a><a id="sthref850"></a>Oracle RDB Database</p>
</td>
<td class="cellalignment6131" headers="r5c1-t12 r1c2-t12">
<p>RDB_DATABASE<a id="sthref851"></a><a id="sthref852"></a></p>
</td>
<td class="cellalignment6131" headers="r5c1-t12 r1c3-t12">
<p>The file name of the Oracle Rdb database.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r6c1-t12" headers="r1c1-t12">
<p><a id="sthref853"></a><a id="sthref854"></a>Type of Service</p>
</td>
<td class="cellalignment6131" headers="r6c1-t12 r1c2-t12">
<p>TYPE_OF_SERVICE<a id="sthref855"></a><a id="sthref856"></a></p>
</td>
<td class="cellalignment6131" headers="r6c1-t12 r1c3-t12">
<p>The type of service to use for the Oracle Rdb database.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r7c1-t12" headers="r1c1-t12">
<p><a id="sthref857"></a><a id="sthref858"></a>Global Database Name</p>
</td>
<td class="cellalignment6131" headers="r7c1-t12 r1c2-t12">
<p>GLOBAL_NAME<a id="sthref859"></a><a id="sthref860"></a></p>
</td>
<td class="cellalignment6131" headers="r7c1-t12 r1c3-t12">
<p>Oracle Rdb database identifier.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblruleformalwide" -->
<p>In the following example, the transfer rate for data packets is set:</p>
<pre dir="ltr">sales.us.example.com=
 (DESCRIPTION=
   (ADDRESS=(PROTOCOL=tcp)(HOST=sales-server)(PORT=1521))
   <span class="bold">(CONNECT_DATA=</span>
<span class="bold">    (SERVICE_NAME=sales.us.example.com)</span>
    <span class="codeinlinebold">(SDU=8192)</span>)) 
</pre>
<p>Use Oracle Enterprise Manager Cloud Control or Oracle Net Manager to configure advanced CONNECT_DATA parameters for either a network service name or a database service.</p>
<p class="subhead2"><a id="NETAG1176"></a>Configuring Advanced Connect Descriptor Parameters Using Oracle Enterprise Manager Cloud Control</p>
<p>The following procedure describes how to configure advanced connect descriptor parameters using Oracle Enterprise Manager Cloud Control:</p>
<ol>
<li>
<p>Access the Directory Naming or Local Naming page in Oracle Enterprise Manager Cloud Control, as follows:</p>
<ol>
<li>
<p>Access the Net Services Administration page in Oracle Enterprise Manager Cloud Control.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="admintools.htm#i491701">&#34;Using Oracle Enterprise Manager Cloud Control to Configure Oracle Net Services&#34;</a></div>
</li>
<li>
<p>Select <span class="bold">Local Naming</span> or <span class="bold">Directory Naming</span> from the <span class="bold">Administer</span> list, and then select the Oracle home for the directory server or the location of the local configuration files.</p>
</li>
<li>
<p>Click <span class="bold">Go</span>.</p>
<p>The Directory Naming or Local Naming pages appear.</p>
</li>
</ol>
</li>
<li>
<p>Select the directory service or network service name.</p>
<ul>
<li>
<p>For Local Naming, select a network service from the list, and then click <span class="bold">Edit</span>.</p>
</li>
<li>
<p>For Directory Naming, search the network service name in the Simple Search section by selecting the network service or database service from the Results list, and then clicking <span class="bold">Edit</span>.</p>
</li>
</ul>
</li>
<li>
<p>Click the <span class="bold">Advanced</span> tab.</p>
</li>
<li>
<p>Enter fields or select options as appropriate, and then click <span class="bold">OK</span>.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to update the connect data information.</p>
</li>
</ol>
<p class="subhead2"><a id="NETAG1177"></a>Configuring Advanced Connect Descriptor Parameters Using Oracle Net Manager</p>
<p>The following procedure describes how to configure advanced connect descriptor parameters using Oracle Net Manager:</p>
<ol>
<li>
<p>Start Oracle Net Manager.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="admintools.htm#i483238">&#34;Using Oracle Net Manager to Configure Oracle Net Services&#34;</a></div>
</li>
<li>
<p>In the navigator pane, select <span class="bold">Service Naming</span> from Directory or Local menus.</p>
</li>
<li>
<p>Select either the network service name or a database service.</p>
<p>The right pane displays the current destination service and address list.</p>
</li>
<li>
<p>In the Service Identification box, click <span class="bold">Advanced</span>.</p>
<p>The Advanced Service Options dialog box appears.</p>
</li>
<li>
<p>Enter fields or select options as appropriate, and then click <span class="bold">OK</span>.</p>
</li>
<li>
<p>If you are making these changes to the Local folder, then select <span class="bold">Save Network Configuration</span> from the File menu. Changes to the Directory folder are saved automatically.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i475648"></a>
<div id="NETAG335" class="sect1">
<h2 class="sect1">Understanding <a id="ABC494278"></a>Connection Load Balancing<a id="sthref861"></a><a id="sthref862"></a><a id="sthref863"></a><a id="sthref864"></a><a id="sthref865"></a></h2>
<p>The <a href="glossary.htm#i434051"><span class="xrefglossterm">connection load balancing</span></a> feature improves connection performance by balancing the number of active connections among multiple <a href="glossary.htm#BGBHHIEG"><span class="xrefglossterm">dispatcher</span></a>s. In an <a href="glossary.htm#BGBDEDJB"><span class="xrefglossterm">Oracle Real Application Clusters (Oracle RAC)</span></a> environment, connection load balancing can also balance the number of active connections among multiple instances.</p>
<p>Because the Listener Registration (LREG) process can register with remote listeners, a listener can always be aware of all instances and dispatchers, regardless of their location. Depending on the load information, a listener decides which instance and, if shared server is configured, which dispatcher to send the incoming client request.</p>
<p>In a <a href="glossary.htm#BGBEAGCH"><span class="xrefglossterm">shared server</span></a> configuration, a listener selects a dispatcher in the following order:</p>
<ol>
<li>
<p>Least loaded node.</p>
</li>
<li>
<p>Least loaded instance.</p>
</li>
<li>
<p>Least loaded dispatcher for that instance.</p>
</li>
</ol>
<p>In a <a href="glossary.htm#BGBFDHGE"><span class="xrefglossterm">dedicated server</span></a> configuration, a listener selects an instance in the following order:</p>
<ol>
<li>
<p>Least loaded node.</p>
</li>
<li>
<p>Least loaded instance.</p>
</li>
</ol>
<p>If a database service has multiple instances on multiple nodes, then the listener selects the least loaded instance on the least loaded node. If shared server is configured, then the least loaded dispatcher of the selected instance is chosen.</p>
<p>An Oracle RAC environment requires that the dispatchers on each instance be cross-registered with the other listeners on the other nodes. This is achieved by the use of the <code dir="ltr">LISTENER</code> attribute of the DISPATCHERS parameter.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
For optimum connection load balancing results, the instances that belong to the same database service should be on equivalent hardware and software configurations.</div>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<ul>
<li>
<p><a href="listenercfg.htm#i490371">&#34;Registering Information with a Remote Listener&#34;</a> for additional information about cross-registration</p>
</li>
<li>
<p><a class="olink REFRN001" href="../REFRN/GUID-6F1C3203-0AA0-4AF1-921C-A027DD7CB6A9.htm#REFRN001"><span class="italic">Oracle Database Reference</span></a> for complete information about the SERVICE_NAMES and INSTANCE_NAME parameters</p>
</li>
<li>
<p><a href="dispatcher.htm#g458957">Chapter 11, &#34;Configuring a Shared Server Architecture&#34;</a> for additional information about the <code dir="ltr">LISTENER</code> attribute</p>
</li>
<li>
<p><a class="olink GSMUG" href="../GSMUG/toc.htm"><span class="italic">Oracle Database Global Data Services Concepts and Administration Guide</span></a> for information about management of global services</p>
</li>
</ul>
</div>
<a id="BABHFJJF"></a>
<div id="NETAG336" class="sect2">
<h3 class="sect2">Example of Connection Load Balancing for Shared Server Configuration<a id="sthref866"></a></h3>
<p><a href="#BABHIHIA">Figure 13-1</a> shows an Oracle RAC shared server database with two instances, <code dir="ltr">sales1</code> and <code dir="ltr">sales2</code>, of the same service, <code dir="ltr">sales.us.example.com</code>. The instances <code dir="ltr">sales1</code> and <code dir="ltr">sales2</code> reside on computers <code dir="ltr">sales1-server</code> and <code dir="ltr">sales2-server</code>, respectively. Instance <code dir="ltr">sales1</code> has one dispatcher and instance <code dir="ltr">sales2</code> has two dispatchers. Listeners named <code dir="ltr">listener</code> run on nodes 1 and 2. The <code dir="ltr">listener</code> attribute in the DISPATCHERS parameter has been configured to allow for service registration of information to both listeners.</p>
<div id="NETAG1178" class="figure">
<p class="titleinfigure"><a id="BABHIHIA"></a>Figure 13-1 Load Balancing Environment for a Shared Server Configuration</p>
<img width="488" height="492" src="img/netag034.gif" alt="Description of Figure 13-1 follows"/><br/>
<a id="sthref867" href="img_text/netag034.htm">Description of &#39;&#39;Figure 13-1 Load Balancing Environment for a Shared Server Configuration&#39;&#39;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>In this example, <code dir="ltr">sales2-server</code> is the least loaded node, <code dir="ltr">sales2</code> is the least loaded instance, and <code dir="ltr">dispatcher2</code> is the least loaded dispatcher. The following load information is registered.</p>
<ul>
<li>
<p>The one minute load average for each instance is 600 for <code dir="ltr">sales1</code> and 400 for <code dir="ltr">sales2</code>. This can happen if more processing is required on <code dir="ltr">sales1-server</code>.</p>
</li>
<li>
<p>The number of connections to each instance is 200 for <code dir="ltr">sales1</code> and 300 for <code dir="ltr">sales2</code>.</p>
</li>
<li>
<p>The number of dispatcher connections to each instance is 200 for <code dir="ltr">dispatcher1</code>, 100 for <code dir="ltr">dispatcher2</code>, and 200 for <code dir="ltr">dispatcher3</code>.</p>
</li>
<li>
<p>The number of connections to <code dir="ltr">sales1</code> (200) is the same as that of its only dispatcher, <code dir="ltr">dispatcher1</code>.</p>
</li>
<li>
<p>The number of connections on <code dir="ltr">sales2</code> (300) is the sum of the connections on its two dispatchers, <code dir="ltr">dispatcher2</code> (100) and <code dir="ltr">dispatcher3</code> (200).</p>
</li>
</ul>
<p>The <code dir="ltr">listeners_sales</code> value in <code dir="ltr">(LISTENER=listeners_sales)</code> is resolved through a local <code dir="ltr">tnsnames.ora</code> file on both servers as follows:</p>
<pre dir="ltr">listeners_sales= 
 (DESCRIPTION= 
   (ADDRESS_LIST=
     (ADDRESS=(PROTOCOL=tcp)(HOST=sales1-server)(PORT=1521))
     (ADDRESS=(PROTOCOL=tcp)(HOST=sales2-server)(PORT=1521))))
</pre>
<p>Based on the environment, the following actions occur. The numbered actions correspond to the arrows shown in <a href="#BABEFIEE">Figure 13-2</a>:</p>
<ol>
<li>
<p>LREG processes for instances <code dir="ltr">sales1</code> and <code dir="ltr">sales2</code> register with both listeners. The listeners are updated dynamically on the load of the instances and dispatchers.</p>
</li>
<li>
<p>The client sends a connect request. A connect descriptor is configured to try each protocol address randomly until one succeeds:</p>
<pre dir="ltr">sales.us.example.com= 
 (DESCRIPTION= 
  (<span class="codeinlinebold">LOAD_BALANCE=on</span>)
  (<span class="codeinlinebold">F<a id="sthref868"></a>AILOVER=on</span>)
  (ADDRESS=(PROTOCOL=tcp)(HOST=sales1-server)(PORT=1521))
  (ADDRESS=(PROTOCOL=tcp)(HOST=sales2-server)(PORT=1521))
  (CONNECT_DATA=(SERVICE_NAME=sales.us.example.com)))
</pre>
<p>The listener on <code dir="ltr">sales1-server</code> was randomly chosen to receive the client connect request.</p>
<p>The listener on <code dir="ltr">sales1-server</code> compares the load of the instances <code dir="ltr">sales1</code> and <code dir="ltr">sales2</code>. The comparison takes into account the load on nodes <code dir="ltr">sales1-server</code> and <code dir="ltr">sales2-server</code>, respectively. Because <code dir="ltr">sales2-server</code> is less loaded than <code dir="ltr">sales1-server</code>, the listener selects <code dir="ltr">sales2-server</code> over <code dir="ltr">sales1-server</code>.</p>
</li>
<li>
<p>The listener compares the load on dispatchers <code dir="ltr">dispatcher2</code> and <code dir="ltr">dispatcher3</code>. Because <code dir="ltr">dispatcher2</code> is less loaded than <code dir="ltr">dispatcher3</code>, the listener redirects the client connect request to <code dir="ltr">dispatcher2</code>.</p>
</li>
<li>
<p>The client connects directly to <code dir="ltr">dispatcher2</code>.</p>
</li>
</ol>
<div id="NETAG1179" class="figure">
<p class="titleinfigure"><a id="BABEFIEE"></a>Figure 13-2 Load Balancing Example for a Shared Server Configuration</p>
<img width="636" height="288" src="img/netag033.gif" alt="Description of Figure 13-2 follows"/><br/>
<a id="sthref869" href="img_text/netag033.htm">Description of &#39;&#39;Figure 13-2 Load Balancing Example for a Shared Server Configuration&#39;&#39;</a><br/>
<br/></div>
<!-- class="figure" --></div>
<!-- class="sect2" -->
<a id="BABBHHBG"></a>
<div id="NETAG337" class="sect2">
<h3 class="sect2">Example of Connection Load Balancing for Dedicated Server Configuration<a id="sthref870"></a></h3>
<p><a href="#i480663">Figure 13-3</a> shows an Oracle RAC dedicated server database with two instances, <code dir="ltr">sales1</code> and <code dir="ltr">sales2</code>, of the same service, <code dir="ltr">sales.us.example.com</code>. The instances <code dir="ltr">sales1</code> and <code dir="ltr">sales2</code> reside on computers <code dir="ltr">sales1-server</code> and <code dir="ltr">sales2-server</code>, respectively. Listeners named <code dir="ltr">listener</code> run on nodes 1 and 2. The REMOTE_LISTENER initialization parameter has been configured to allow for service registration of information to both listeners.</p>
<div id="NETAG1180" class="figure">
<p class="titleinfigure"><a id="i480663"></a>Figure 13-3 Load Balancing Environment for a Dedicated Server Configuration</p>
<img width="489" height="419" src="img/netag125.gif" alt="Description of Figure 13-3 follows"/><br/>
<a id="sthref871" href="img_text/netag125.htm">Description of &#39;&#39;Figure 13-3 Load Balancing Environment for a Dedicated Server Configuration&#39;&#39;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>In this example, the following load information is registered:</p>
<ul>
<li>
<p><code dir="ltr">sales1-server</code> has a node load average of 450 per minute.</p>
</li>
<li>
<p><code dir="ltr">sales2-server</code> has a node load average of 200 per minute.</p>
</li>
<li>
<p><code dir="ltr">sales1</code> has 200 connections.</p>
</li>
<li>
<p><code dir="ltr">sales2</code> has 150 connections.</p>
</li>
</ul>
<p>The <code dir="ltr">listener_sales1</code> value in <code dir="ltr">(REMOTE_LISTENER=listener_sales1)</code> is resolved through a local <code dir="ltr">tnsnames.ora</code> file on the <code dir="ltr">sales2-server</code> as follows:</p>
<pre dir="ltr">listener_sales1= 
 (DESCRIPTION= 
   (ADDRESS=(PROTOCOL=tcp)(HOST=sales1-server)(PORT=1521)))
</pre>
<p>The <code dir="ltr">listener_sales2</code> value in <code dir="ltr">(REMOTE_LISTENER=listener_sales2)</code> is resolved through a local <code dir="ltr">tnsnames.ora</code> file on the <code dir="ltr">sales1-server</code> as follows:</p>
<pre dir="ltr">listener_sales2= 
 (DESCRIPTION= 
   (ADDRESS=(PROTOCOL=tcp)(HOST=sales2-server)(PORT=1521)))
</pre>
<p>Based on the environment, the following actions occur. The numbered actions correspond to the arrows shown in <a href="#BABBAEAD">Figure 13-4</a>:</p>
<ol>
<li>
<p>LREG processes for instances <code dir="ltr">sales1</code> and <code dir="ltr">sales2</code> register with both listeners. The listeners are dynamically updated on the load of the instances.</p>
<p>Based on the preceding information, <code dir="ltr">sales2-server</code> is the least loaded node and <code dir="ltr">sales2</code> is the least loaded instance.</p>
</li>
<li>
<p>The client sends a connect request.</p>
<p>A connect descriptor is configured to try each protocol address randomly until one succeeds:</p>
<pre dir="ltr">sales.us.example.com= 
 (DESCRIPTION= 
  (ADDRESS_LIST=
    (<span class="codeinlinebold">LOAD_BALANCE=on</span>)
<a id="sthref872"></a><span class="codeinlinebold">    (FAILOVER=on)</span>
    (ADDRESS=(PROTOCOL=tcp)(HOST=sales1-server)(PORT=1521))
    (ADDRESS=(PROTOCOL=tcp)(HOST=sales2-server)(PORT=1521)))
    (CONNECT_DATA=(SERVICE_NAME=sales.us.example.com)))
</pre>
<p>The listener on <code dir="ltr">sales1-server</code> was randomly chosen to receive the client connect request.</p>
<p>The listener on <code dir="ltr">sales1-server</code> compares the load of the instances <code dir="ltr">sales1</code> and <code dir="ltr">sales2</code>. The comparison takes into account the load on nodes <code dir="ltr">sales1-server</code> and <code dir="ltr">sales2-server</code>, respectively. Because <code dir="ltr">sales2-server</code> is less loaded than <code dir="ltr">sales1-server</code>, the listener selects <code dir="ltr">sales2-server</code> over <code dir="ltr">sales1-server</code>.</p>
</li>
<li>
<p>The listener on <code dir="ltr">sales1-server</code> redirects the client connect request to the listener on <code dir="ltr">sales2-server</code>.</p>
</li>
<li>
<p>The client connects to the listener on <code dir="ltr">sale2-server</code>. The listener starts a dedicated server process, and the dedicated server process inherits the connection request from the listener.<a id="sthref873"></a></p>
</li>
</ol>
<div id="NETAG1182" class="figure">
<p class="titleinfigure"><a id="BABBAEAD"></a>Figure 13-4 Load Balancing Example for a Dedicated Server Configuration</p>
<img width="690" height="312" src="img/netag126.gif" alt="Description of Figure 13-4 follows"/><br/>
<a id="sthref874" href="img_text/netag126.htm">Description of &#39;&#39;Figure 13-4 Load Balancing Example for a Dedicated Server Configuration&#39;&#39;</a><br/>
<br/></div>
<!-- class="figure" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i473297"></a>
<div id="NETAG455" class="sect1">
<h2 class="sect1">Configuring Transparent Application Failover<a id="sthref875"></a><a id="sthref876"></a><a id="sthref877"></a></h2>
<p>Transparent Application Failover (TAF) instructs Oracle Net to fail over a failed connection to a different listener. This enables the user to continue to work using the new connection as if the original connection had never failed.</p>
<p>TAF involves manual configuration of a network service name that includes the <a id="sthref878"></a>FAILOVER_MODE parameter included in the CONNECT_DATA section of the connect descriptor.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BABDIEJF">About Transparent Application Failover</a></p>
</li>
<li>
<p><a href="#i478731">What Transparent Application Failover Restores</a></p>
</li>
<li>
<p><a href="#i478634">About the FAILOVER_MODE Parameters</a></p>
</li>
<li>
<p><a href="#i465137">Implementing Transparent Application Failover</a></p>
</li>
<li>
<p><a href="#i465201">Verifying Transparent Application Failover</a></p>
</li>
</ul>
<a id="BABDIEJF"></a>
<div id="NETAG338" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Transparent Application Failover</h3>
<p>TAF is a client-side feature that allows clients to reconnect to surviving databases in the event of a failure of a database instance. Notifications are used by the server to trigger TAF callbacks on the client-side.</p>
<p>TAF is configured using either client-side specified TNS (Transparent Network Substrate) connect string or using server-side service attributes. If both methods are used to configure TAF, then the server-side service attributes supersede the client-side settings. Server-side service attributes are the preferred way to set up TAF.</p>
<p>TAF can operate in one of two modes, Session Failover and Select Failover. Session Failover re-creates lost connections and sessions. Select Failover replays queries that were in progress.</p>
<p>When there is a failure, callback functions are initiated on the client-side using Oracle Call Interface (OCI) callbacks. This works with standard OCI connections as well as connection pool and session pool connections.</p>
<p>TAF operates with Oracle Data Guard to provide automatic failover. TAF works with the following database configurations to effectively mask a database failure:</p>
<ul>
<li>
<p>Oracle Real Application Clusters</p>
</li>
<li>
<p>Replicated systems</p>
</li>
<li>
<p>Standby databases</p>
</li>
<li>
<p>Single instance Oracle database</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink RACAD" href="../RACAD/toc.htm"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a></p>
</li>
<li>
<p><a class="olink LNOCI" href="../LNOCI/toc.htm"><span class="italic">Oracle Call Interface Programmer&#39;s Guide</span></a> for more details on callbacks, and session pools</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="i478731"></a>
<div id="NETAG339" class="sect2">
<h3 class="sect2">What Transparent Application Failover Restores</h3>
<p>TAF automatically restores some or all of the following elements associated with active database connections. Other elements may need to be embedded in the application code to enable TAF to recover the connection.</p>
<ul>
<li>
<p>Client-server database connections: TAF automatically reestablishes the connection using the same connect string or an alternate connect string that you specify when configuring failover.</p>
</li>
<li>
<p>Users&#39; database sessions: TAF automatically logs a user in with the same user ID as was used before the failure. If multiple users were using the connection, then TAF automatically logs them in as they attempt to process database commands. Unfortunately, TAF cannot automatically restore other session properties. These properties can be restored by invoking a callback function.</p>
</li>
<li id="BABDJBGG">
<p>Completed commands: If a command was completed at the time of connection failure, and it changed the state of the database, then TAF does not resend the command. If TAF reconnects in response to a command that may have changed the database, then TAF issues an error message to the application.</p>
</li>
<li id="i478663">
<p>Open cursors used for fetching: TAF allows applications that began fetching rows from a cursor before failover to continue fetching rows after failover. This is called select failover. It is accomplished by re-running a <code dir="ltr">SELECT</code> statement using the same snapshot, discarding those rows already fetched and retrieving those rows that were not fetched initially. TAF verifies that the discarded rows are those that were returned initially, or it returns an error message.</p>
</li>
<li id="BABBFCFF">
<p>Active transactions: Any active transactions are rolled back at the time of failure because TAF cannot preserve active transactions after failover. The application instead receives an error message until a <code dir="ltr">ROLLBACK</code> command is submitted.</p>
</li>
<li id="BABDBJIJ">
<p>Server-side program variables: Server-side program variables, such as PL/SQL package states, are lost during failures, and TAF cannot recover them. They can be initialized by making a call from the failover callback.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink LNOCI090" href="../LNOCI/oci09adv.htm#LNOCI090"><span class="italic">Oracle Call Interface Programmer&#39;s Guide</span></a></div>
</div>
<!-- class="sect2" -->
<a id="i478634"></a>
<div id="NETAG347" class="sect2">
<h3 class="sect2">About the FAILOVER_MODE Parameters<a id="sthref879"></a><a id="sthref880"></a><a id="sthref881"></a></h3>
<p>The FAILOVER_MODE parameter must be included in the CONNECT_DATA section of a connect descriptor. The FAILOVER_MODE parameter can contain the parameters described in <a href="#CEGIJFCA">Table 13-4</a>.</p>
<div id="NETAG1183" class="tblruleformal">
<p class="titleintable"><a id="sthref882"></a><a id="CEGIJFCA"></a>Table 13-4 Additional Parameters of the FAILOVER_MODE Parameter</p>
<table class="cellalignment6129" title="Additional Parameters of the FAILOVER_MODE Parameter" summary="Subparameters of the FAILOVER_MODE Parameter" dir="ltr">
<thead>
<tr class="cellalignment6123">
<th class="cellalignment6130" id="r1c1-t19">FAILOVER_MODE Parameters</th>
<th class="cellalignment6130" id="r1c2-t19">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r2c1-t19" headers="r1c1-t19">
<p><a id="sthref883"></a><a id="sthref884"></a>BACKUP</p>
</td>
<td class="cellalignment6131" headers="r2c1-t19 r1c2-t19">
<p>A different network service name for backup connections. A backup should be specified when using <code dir="ltr">preconnect</code> to pre-establish connections.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r3c1-t19" headers="r1c1-t19">
<p>DELAY</p>
</td>
<td class="cellalignment6131" headers="r3c1-t19 r1c2-t19">
<p>The amount of time in seconds to wait between connect attempts. If RETRIES is specified, then DELAY defaults to one second.</p>
<p>If a callback function is registered, then this parameter is ignored.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r4c1-t19" headers="r1c1-t19">
<p><a id="sthref885"></a><a id="sthref886"></a>METHOD</p>
</td>
<td class="cellalignment6131" headers="r4c1-t19 r1c2-t19">
<p>The setting for fast failover from the primary node to the backup node:</p>
<ul>
<li>
<p><code dir="ltr">basic</code>: Set to establish connections at failover time. This option requires almost no work on the backup server until failover time.</p>
</li>
<li>
<p><code dir="ltr">preconnect</code>: Set to pre-established connections. This provides faster failover but requires that the backup instance be able to support all connections from every supported instance.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r5c1-t19" headers="r1c1-t19">
<p>RETRIES</p>
</td>
<td class="cellalignment6131" headers="r5c1-t19 r1c2-t19">
<p>The number of times to attempt to connect after a failover. If DELAY is specified, then RETRIES defaults to five retry attempts.</p>
<p>If a callback function is registered, then this parameter is ignored.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r6c1-t19" headers="r1c1-t19">
<p>TRANSACTION</p>
</td>
<td class="cellalignment6131" headers="r6c1-t19 r1c2-t19">
<p>The ability for a transaction to complete after a recoverable database error. This parameter is set using the SRVCTL utility or the DBMS_SERVICE package.</p>
<p>This parameter is used with <code dir="ltr">COMMIT_OUTCOME=TRUE</code>.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r7c1-t19" headers="r1c1-t19">
<p><a id="sthref887"></a><a id="sthref888"></a>TYPE</p>
</td>
<td class="cellalignment6131" headers="r7c1-t19 r1c2-t19">
<p>The type of failover. Three types of Oracle Net failover functionality are available by default to Oracle Call Interface (OCI) applications:</p>
<ul>
<li>
<p><code dir="ltr">session</code>: Set to fail over the session. If the user&#39;s connection is lost, then a new session is automatically created for the user on the backup. This type of failover does not attempt to recover select operations.</p>
</li>
<li>
<p><code dir="ltr">select</code>: Set to enable users with open cursors to continue fetching on them after failure. However, this mode involves overhead on the client side in normal select operations.</p>
</li>
<li>
<p><code dir="ltr">none</code>: This is the default. No failover functionality is used. This can also be explicitly specified to prevent failover from happening.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblruleformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle Net Manager does not provide support for TAF parameters. These parameters must be set manually.</div>
</div>
<!-- class="sect2" -->
<a id="i465137"></a>
<div id="NETAG348" class="sect2">
<h3 class="sect2">Implementing Transparent Application Failover</h3>
<p>Depending on the FAILOVER_MODE parameters, you can implement TAF in several ways. Oracle recommends the following methods:</p>
<ul>
<li>
<p><a href="#i465148">TAF with Connect-Time Failover and Client Load Balancing</a></p>
</li>
<li>
<p><a href="#i471200">TAF Retrying a Connection</a></p>
</li>
<li>
<p><a href="#i465171">TAF Pre-establishing a Connection</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">Important:</p>
Do not set the GLOBAL_DBNAME parameter in the SID_LIST_<span class="italic">listener_name</span> section of the <code dir="ltr">listener.ora</code> file. A statically configured global database name disables TAF.<a id="sthref889"></a></div>
<a id="i465148"></a>
<div id="NETAG349" class="sect3">
<h4 class="sect3">TAF with Connect-Time Failover and Client Load Balancing</h4>
<p>Implement TAF with connect-time failover and client load balancing for multiple addresses. In the following example, Oracle Net connects randomly to one of the protocol addresses on <code dir="ltr">sales1-server</code> or <code dir="ltr">sales2-server</code>. If the instance fails after the connection, then the TAF application fails over to the other node&#39;s listener, reserving any <code dir="ltr">SELECT</code> statements in progress.</p>
<pre dir="ltr">sales.us.example.com=
 (DESCRIPTION=
  <span class="bold">(LOAD_BALANCE=on)</span> 
  <span class="bold">(FAILOVER=on) </span>
  (ADDRESS=
       (PROTOCOL=tcp)  
       (HOST=sales1-server)  
       (PORT=1521)) 
  (ADDRESS=
       (PROTOCOL=tcp)  
       (HOST=sales2-server)  
       (PORT=1521)) 
  (CONNECT_DATA=
     (SERVICE_NAME=sales.us.example.com) 
     <span class="bold">(FAILOVER_MODE=</span>
       <span class="bold">(TYPE=select) </span>
       <span class="bold">(METHOD=basic))</span>))
</pre>
<p>Although the preceding example has multiple addresses, the <code dir="ltr">ADDRESS_LIST</code> parameter was not used. This is because the <code dir="ltr">ADDRESS_LIST</code> parameter is not mandatory.</p>
</div>
<!-- class="sect3" -->
<a id="i471200"></a>
<div id="NETAG350" class="sect3">
<h4 class="sect3">TAF Retrying a Connection</h4>
<p>TAF also provides the ability to automatically retry connecting if the first connection attempt fails with the RETRIES and DELAY parameters. In the following example, Oracle Net tries to reconnect to the listener on <code dir="ltr">sales1-server</code>. If the failover connection fails, then Oracle Net waits 15 seconds before trying to reconnect again. Oracle Net attempts to reconnect up to 20 times.</p>
<pre dir="ltr">sales.us.example.com=
 (DESCRIPTION=
  (ADDRESS=
       (PROTOCOL=tcp)  
       (HOST=sales1-server)  
       (PORT=1521)) 
  (CONNECT_DATA=
     (SERVICE_NAME=sales.us.example.com) 
     <span class="bold">(FAILOVER_MODE=</span>
       <span class="bold">(TYPE=select) </span>
       <span class="bold">(METHOD=basic)</span>
       <span class="bold">(RETRIES=20)</span>
       <span class="bold">(DELAY=15))</span>))
</pre></div>
<!-- class="sect3" -->
<a id="i465171"></a>
<div id="NETAG351" class="sect3">
<h4 class="sect3">TAF Pre-establishing a Connection</h4>
<p>A backup connection can be pre-established. The initial and backup connections must be explicitly specified. In the following example, clients that use network service name <code dir="ltr">sales1.us.example.com</code> to connect to the listener on <code dir="ltr">sales1-server</code> are also preconnected to <code dir="ltr">sales2-server</code>. If <code dir="ltr">sales1-server</code> fails after the connection, then Oracle Net fails over to <code dir="ltr">sales2-server</code>, preserving any <code dir="ltr">SELECT</code> statements in progress. Similarly, Oracle Net preconnects to <code dir="ltr">sales1-server</code> for those clients that use <code dir="ltr">sales2.us.example.com</code> to connect to the listener on <code dir="ltr">sales2-server</code>.</p>
<pre dir="ltr">sales1.us.example.com=
 (DESCRIPTION=
  (ADDRESS=
       (PROTOCOL=tcp)  
       (HOST=sales1-server)  
       (PORT=1521)) 
  (CONNECT_DATA=
     (SERVICE_NAME=sales.us.example.com) 
     (INSTANCE_NAME=sales1) 
     <span class="bold">(FAILOVER_MODE=</span>
       <span class="bold">(BACKUP=sales2.us.example.com)</span> 
       <span class="bold">(TYPE=select) </span>
       <span class="bold">(METHOD=preconnect))</span>))
sales2.us.example.com=
 (DESCRIPTION=
  (ADDRESS=
       (PROTOCOL=tcp)  
       (HOST=sales2-server)  
       (PORT=1521)) 
  (CONNECT_DATA=
     (SERVICE_NAME=sales.us.example.com) 
     (INSTANCE_NAME=sales2)
     <span class="bold">(FAILOVER_MODE=</span>
       <span class="bold">(BACKUP=sales1.us.example.com)</span> 
       <span class="bold">(TYPE=select) </span>
       <span class="bold">(METHOD=preconnect))</span>))
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i465201"></a>
<div id="NETAG352" class="sect2">
<h3 class="sect2">Verifying Transparent Application Failover</h3>
<p>You can query the FAILOVER_TYPE, FAILOVER_METHOD, and FAILED_OVER columns in the V$SESSION view to verify that TAF is correctly configured. To view the columns, use a query similar to the following:</p>
<pre dir="ltr">SELECT MACHINE, FAILOVER_TYPE, FAILOVER_METHOD, FAILED_OVER, COUNT(*)
FROM V$SESSION
GROUP BY MACHINE, FAILOVER_TYPE, FAILOVER_METHOD, FAILED_OVER;
</pre>
<p>The output before failover looks similar to the following:</p>
<pre dir="ltr">MACHINE              FAILOVER_TYPE FAILOVER_METHOD FAILED_OVER   COUNT(*)
-------------------- ------------- ----------      ---           ----------
sales1               NONE          NONE            NO            11
sales2               SELECT        PRECONNECT      NO             1
</pre>
<p>The output after failover looks similar to the following:</p>
<pre dir="ltr">MACHINE              FAILOVER_TYPE FAILOVER_METHOD FAILED_OVER   COUNT(*)
-------------------- ------------- ----------      ---           ----------
sales2               NONE          NONE            NO            10
sales2               SELECT        PRECONNECT      YES            1
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can monitor each step of TAF using an appropriately configured <code dir="ltr">OCI TAF CALLBACK</code> function.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink LNOCI16679" href="../LNOCI/oci09adv.htm#LNOCI16679"><span class="italic">Oracle Call Interface Programmer&#39;s Guide</span></a></p>
</li>
<li>
<p><a class="olink REFRN30223" href="../REFRN/GUID-28E2DC75-E157-4C0A-94AB-117C205789B9.htm#REFRN30223"><span class="italic">Oracle Database Reference</span></a> for additional information about the <a id="sthref890"></a>V$SESSION view</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i480772"></a>
<div id="NETAG353" class="sect1">
<h2 class="sect1">Specifying the Instance Role for Primary and Secondary Instance Configurations<a id="sthref891"></a><a id="sthref892"></a><a id="sthref893"></a><a id="sthref894"></a></h2>
<p>The INSTANCE_ROLE<a id="sthref895"></a><a id="sthref896"></a> parameter is an optional parameter for the CONNECT_DATA section of a connect descriptor. It enables you to specify a connection to the primary or secondary instance of Oracle RAC configurations.</p>
<p>This parameter is useful when:</p>
<ul>
<li>
<p>You want to explicitly connect to a primary or secondary instance. The default is the primary instance.</p>
</li>
<li>
<p>You want to use TAF to preconnect to a secondary instance.</p>
</li>
</ul>
<p><a href="#CEGCCJGC">Table 13-5</a> describes the INSTANCE_ROLE parameters.</p>
<div id="NETAG1594" class="tblruleformal">
<p class="titleintable"><a id="sthref897"></a><a id="CEGCCJGC"></a>Table 13-5 INSTANCE_ROLE Parameters</p>
<table class="cellalignment6129" title="INSTANCE_ROLE Parameters" summary="INSTANCE_ROLE parameters" dir="ltr">
<thead>
<tr class="cellalignment6123">
<th class="cellalignment6130" id="r1c1-t24">INSTANCE_ROLE Parameter</th>
<th class="cellalignment6130" id="r1c2-t24">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r2c1-t24" headers="r1c1-t24">
<p>PRIMARY</p>
</td>
<td class="cellalignment6131" headers="r2c1-t24 r1c2-t24">
<p>Specifies a connection to the primary instance.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r3c1-t24" headers="r1c1-t24">
<p>SECONDARY</p>
</td>
<td class="cellalignment6131" headers="r3c1-t24 r1c2-t24">
<p>Specifies a connection to the secondary instance.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r4c1-t24" headers="r1c1-t24">
<p>ANY</p>
</td>
<td class="cellalignment6131" headers="r4c1-t24 r1c2-t24">
<p>Specifies a connection to whichever instance has the lowest load, regardless of primary or secondary instance role.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblruleformal" -->
<p class="subhead1"><a id="NETAG1184"></a>Connection to Instance Role Type<a id="sthref898"></a></p>
<p>In the following example of the <code dir="ltr">tnsnames.ora</code> file, network service name <code dir="ltr">sales_primary</code> enables connections to the primary instance, and network service name <code dir="ltr">sales_secondary</code> enables connections to the secondary instance.</p>
<pre dir="ltr">sales_primary=
 (DESCRIPTION=
  (ADDRESS_LIST=
    (ADDRESS=
       (PROTOCOL=tcp)  
       (HOST=sales1-server)  
       (PORT=1521)) 
    (ADDRESS=
       (PROTOCOL=tcp)  
       (HOST=sales2-server)  
       (PORT=1521))) 
  (CONNECT_DATA=
     (SERVICE_NAME=sales.us.example.com) 
     <span class="bold">(INSTANCE_ROLE=primary)</span>))
sales_secondary=
 (DESCRIPTION=
  (ADDRESS_LIST=
    (ADDRESS=
       (PROTOCOL=tcp)  
       (HOST=sales1-server)  
       (PORT=1521)) 
    (ADDRESS=
       (PROTOCOL=tcp)  
       (HOST=sales2-server)  
       (PORT=1521))) 
  (CONNECT_DATA=
     (SERVICE_NAME=sales.us.example.com) 
     <span class="bold">(INSTANCE_ROLE=secondary)</span>))
</pre>
<p class="subhead1"><a id="NETAG1185"></a>Connection to a Specific Instance<a id="sthref899"></a></p>
<p>There are times when Oracle Enterprise Manager Cloud Control and other system management products need to connect to a specific instance regardless of its role to perform administrative tasks. For these types of connections, configure (<code dir="ltr">INSTANCE_NAME=</code><code dir="ltr"><span class="codeinlineitalic">instance_name</span></code><code dir="ltr">)</code> and (<code dir="ltr">INSTANCE_ROLE=any)</code> to connect to the instance regardless of its role.</p>
<p>In the following example, network service name <code dir="ltr">sales1</code> enables connections to the instance on <code dir="ltr">sales1-server</code> and <code dir="ltr">sales2</code> enables connections to the instance on <code dir="ltr">sales2-server</code>. <code dir="ltr">(SERVER=dedicated)</code> is specified to force a dedicated server connection.</p>
<pre dir="ltr">sales1=
 (DESCRIPTION=
  (ADDRESS=
       (PROTOCOL=tcp)  
       (HOST=sales1-server)  
       (PORT=1521)) 
  (CONNECT_DATA=
     (SERVICE_NAME=sales.us.example.com) 
     <span class="bold">(INSTANCE_ROLE=any)</span>
     (INSTANCE_NAME=sales1)
     <span class="codeinlinebold">(SERVER=dedicated)</span>))
sales2=
 (DESCRIPTION=
  (ADDRESS=
       (PROTOCOL=tcp)  
       (HOST=sales2-server)  
       (PORT=1521)) 
  (CONNECT_DATA=
     (SERVICE_NAME=sales.us.example.com) 
     <span class="bold">(INSTANCE_ROLE=any)</span>
     (INSTANCE_NAME=sales2)
     <span class="codeinlinebold">(SERVER=dedicated)</span>))
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Failover is incompatible with the preceding settings.</div>
<p class="subhead1"><a id="NETAG1186"></a>TAF Pre-establishing a Connection<a id="sthref900"></a><a id="sthref901"></a></p>
<p>If TAF is configured, then a backup connection can be pre-established to the secondary instance. The initial and backup connections must be explicitly specified. In the following example, Oracle Net connects to the listener on <code dir="ltr">sales1-server</code> and preconnects to <code dir="ltr">sales2-server</code>, the secondary instance. If <code dir="ltr">sales1-server</code> fails after the connection, then the TAF application fails over to <code dir="ltr">sales2-server</code>, the secondary instance, preserving any <code dir="ltr">SELECT</code> statements in progress.</p>
<pre dir="ltr">sales1.example.com=
 (DESCRIPTION=
  (ADDRESS=
       (PROTOCOL=tcp)  
       (HOST=sales1-server)  
       (PORT=1521)) 
  (CONNECT_DATA=
     (SERVICE_NAME=sales.us.example.com) 
     <span class="bold">(INSTANCE_ROLE=primary) </span>
     <span class="codeinlinebold">(FAILOVER_MODE=</span>
       <span class="codeinlinebold">(BACKUP=sales2.example.com) </span>
       <span class="codeinlinebold">(TYPE=select)</span>
       <span class="codeinlinebold">(METHOD=preconnect))</span>))
sales2.example.com=
 (DESCRIPTION=
  (ADDRESS=
       (PROTOCOL=tcp)  
       (HOST=sales2-server)  
       (PORT=1521)) 
  (CONNECT_DATA=
     (SERVICE_NAME=sales.us.example.com) 
     <span class="bold">(INSTANCE_ROLE=secondary)</span>))
</pre></div>
<!-- class="sect1" -->
<a id="CEGEDFCH"></a>
<div id="NETAG1589" class="sect1">
<h2 class="sect1">Understanding <a id="sthref902"></a>Static Service Registration<a id="sthref903"></a><a id="sthref904"></a><a id="sthref905"></a></h2>
<p>The listener uses the dynamic service information about the database and instance before using statically configured information in the <code dir="ltr">listener.ora</code> file. Configuration of static service information is necessary in the following cases:</p>
<ul>
<li>
<p>Use of external procedure calls</p>
</li>
<li>
<p>Use of Oracle Heterogeneous Services</p>
</li>
<li>
<p>Use of Oracle Data Guard</p>
</li>
<li>
<p>Remote database startup from a tool other than Oracle Enterprise Manager Cloud Control</p>
</li>
<li>
<p>Connections to Oracle databases earlier than Oracle8<span class="italic">i</span> release 2 (8.1)</p>
</li>
</ul>
<p><a href="#CEGIHJEE">Example 13-1</a> shows a <code dir="ltr">listener.ora</code> file configured for static service registration. The LISTENER entry defines the listening protocol address for a listener named Listener, and the <a id="sthref906"></a>SID_LIST_LISTENER entry provides information about the external services statically supported by the Listener listener.</p>
<div id="NETAG1590" class="example">
<p class="titleinexample"><a id="CEGIHJEE"></a>Example 13-1 Example listener.ora File</p>
<pre dir="ltr"><span class="bold">LISTENER</span>=
  (DESCRIPTION=
    (ADDRESS_LIST=
      (ADDRESS=(PROTOCOL=tcp)(HOST=sales-server)(PORT=1521))
      (ADDRESS=(PROTOCOL=ipc)(KEY=extproc) (queuesize=50))))
<span class="bold">SID_LIST_listener</span>=
  (SID_LIST=
    (SID_DESC=
      (SID_NAME=plsextproc)
      (ORACLE_HOME=/oracle8)
      (PROGRAM=extproc)))
</pre></div>
<!-- class="example" -->
<p>The SID_LIST_<span class="italic">listener_name</span> parameter setting in the <code dir="ltr">listener.ora</code> file specifies information about the databases served by the listener. When services are configured statically, a listener starts a dedicated server process when it receives a client request. If the instance is not up, then the server returns an <code dir="ltr">Oracle not available</code> error message.</p>
<p>If a database cannot find the listener, then configure the <code dir="ltr">listener.ora</code> file with the <a id="sthref907"></a>GLOBAL_DBNAME parameter, as shown in the following example</p>
<pre dir="ltr">SID_LIST_listener=
(SID_LIST=
 (SID_DESC=
  (<span class="codeinlinebold">GLOBAL_DBNAME</span>=sales.example.com)
  (SID_NAME=sales)
  (ORACLE_HOME=/u01/app/oracle))
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
A statically-configured global database name disables TAF.<a id="sthref908"></a> To use TAF, do not set the GLOBAL_DBNAME parameter in the SID_LIST_<span class="italic">listener_name</span> section of the <code dir="ltr">listener.ora</code> file.</div>
<p><a href="#CEGGAGIE">Table 13-6</a> describes static service settings in the <code dir="ltr">listener.ora</code> file.</p>
<div id="NETAG1591" class="tblruleformalwide">
<p class="titleintable"><a id="sthref909"></a><a id="CEGGAGIE"></a>Table 13-6 Static Service Settings in listener.ora</p>
<table class="cellalignment6129" title="Static Service Settings in listener.ora" summary="Static Service Settings in sqlnet.ora" dir="ltr">
<thead>
<tr class="cellalignment6123">
<th class="cellalignment6130" id="r1c1-t27">Oracle Net Manager Field</th>
<th class="cellalignment6130" id="r1c2-t27">listener.ora File Parameter</th>
<th class="cellalignment6130" id="r1c3-t27">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r2c1-t27" headers="r1c1-t27">
<p><a id="sthref910"></a><a id="sthref911"></a>SID</p>
</td>
<td class="cellalignment6131" headers="r2c1-t27 r1c2-t27">
<p><a id="sthref912"></a><a id="sthref913"></a>SID_NAME</p>
</td>
<td class="cellalignment6131" headers="r2c1-t27 r1c3-t27">
<p>The <a id="sthref914"></a><a id="sthref915"></a><a id="sthref916"></a><a id="sthref917"></a><a href="glossary.htm#BGBFBBAI"><span class="xrefglossterm">Oracle system identifier (SID)</span></a> of the instance. You can obtain the SID value from the INSTANCE_NAME parameter in the initialization parameter file.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r3c1-t27" headers="r1c1-t27">
<p><a id="sthref918"></a><a id="sthref919"></a>Service Name</p>
</td>
<td class="cellalignment6131" headers="r3c1-t27 r1c2-t27">
<p><a id="sthref920"></a><a id="sthref921"></a>GLOBAL_DBNAME</p>
</td>
<td class="cellalignment6131" headers="r3c1-t27 r1c3-t27">
<p>The database service.</p>
<p>While processing a client connection request, the listener tries to match the value of this parameter with the value of the SERVICE_NAME parameter in the client connect descriptor. If the client connect descriptor uses the SID parameter, then the listener does not attempt to map the values. This parameter is primarily intended for configurations with Oracle8 databases (where dynamic service registration is not supported for dedicated servers). This parameter may also be required for use with Oracle8<span class="italic">i</span> and later database services by some configurations.</p>
<p>The value for this parameter is typically obtained from the combination of the DB_NAME and DB_DOMAIN parameters (DB_NAME.DB_DOMAIN) in the initialization parameter file, but the value can also contain any valid name used by clients to identify the service.</p>
<p>When using a connect descriptor with a SERVICE_NAME parameter, ensure that any SID_DESC entry does not have the value <code dir="ltr">GLOBAL_DBNAME</code>.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r4c1-t27" headers="r1c1-t27">
<p><a id="sthref922"></a><a id="sthref923"></a>Oracle Home Directory</p>
</td>
<td class="cellalignment6131" headers="r4c1-t27 r1c2-t27">
<p><a id="sthref924"></a><a id="sthref925"></a>ORACLE_HOME</p>
</td>
<td class="cellalignment6131" headers="r4c1-t27 r1c3-t27">
<p>The Oracle home location of the instance. Without this setting, the listener assumes its Oracle home for the instance.</p>
<p>On Linux and UNIX, this setting is optional.</p>
<p>On Microsoft Windows, this setting is ignored. The Oracle home specified by the ORACLE_HOME parameter in <code dir="ltr">HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\HOME</code><code dir="ltr"><span class="codeinlineitalic">ID</span></code> of the Microsoft Windows registry is used.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r5c1-t27" headers="r1c1-t27">
<p>Not applicable</p>
</td>
<td class="cellalignment6131" headers="r5c1-t27 r1c2-t27">
<p>SID_LIST_<span class="italic">listener_name</span></p>
</td>
<td class="cellalignment6131" headers="r5c1-t27 r1c3-t27">
<p>The section of the <code dir="ltr">listener.ora</code> file that defines the database served by the listener.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblruleformalwide" -->
<a id="CEGDBIGJ"></a>
<div id="NETAG1592" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Configuring Static Registration for the Listener</h3>
<p>The following procedure describes how to statically configure the listener:</p>
<div class="infobox-note">
<p class="notep1">Important:</p>
<a id="sthref926"></a>If you are <a id="sthref927"></a><a id="sthref928"></a>using connect-time failover or TAF, such as in an Oracle Real Application Clusters environment, then do not set the GLOBAL_DBNAME parameter.</div>
<ol>
<li>
<p>Access the Net Services Administration page in Oracle Enterprise Manager Cloud Control.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="admintools.htm#i491701">&#34;Using Oracle Enterprise Manager Cloud Control to Configure Oracle Net Services&#34;</a></div>
</li>
<li>
<p>Select <span class="bold">Listeners</span> from the Administer list, and then select the Oracle home that contains the configuration files.</p>
</li>
<li>
<p>Click <span class="bold">Go</span>. You may be prompted to log in to the database server.</p>
<p>The Listeners page appears.</p>
</li>
<li>
<p>Select a listener, and then click <span class="bold">Edit</span>.</p>
<p>The Edit Listener page appears.</p>
</li>
<li>
<p>Click the <span class="bold">Static Database Registration</span> tab, and then click <span class="bold">Add</span>.</p>
<p>The Add Database Service page appears. Enter the required information in the fields.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also configure static service information with Oracle Net Manager. See <span class="bold">Statically Configure Database Service Information</span> in the online help for additional information.</div>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="listenercfg.htm#i490264">&#34;Configuring Dynamic Service Registration&#34;</a> for additional information about configuring dynamic service registration Oracle Databases</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i463776"></a>
<div id="NETAG888" class="sect1">
<h2 class="sect1">Configuring Connections to Third-party Database Services</h2>
<p>The following topics describe how to configure connections to third-party database services:</p>
<ul>
<li>
<p><a href="#i443234">Default Configuration for External Procedures</a></p>
</li>
<li>
<p><a href="#i474074">About Oracle Net Services for Oracle Heterogeneous Services</a></p>
</li>
<li>
<p><a href="#i449411">Configuring Oracle Net Services for an Oracle Rdb Database</a></p>
</li>
</ul>
<a id="i443234"></a>
<div id="NETAG0132" class="sect2">
<h3 class="sect2">Default Configuration for External Procedures</h3>
<p>An <a id="sthref929"></a><a href="glossary.htm#BGBFGBHI"><span class="xrefglossterm">external procedure</span></a><a id="sthref930"></a><a id="sthref931"></a><a id="sthref932"></a><a id="sthref933"></a> is a procedure called from another program, written in a different language. An example would be a PL/SQL program calling one or more C routines that are required to perform special-purpose processing.</p>
<p>When an application calls an external procedure<a id="sthref934"></a>, Oracle Database starts an external procedure agent named <a id="sthref935"></a><a id="sthref936"></a>extproc. Using the network connection established by Oracle Database, the application passes the following information to the agent:</p>
<ul>
<li>
<p>DLL or shared library name</p>
</li>
<li>
<p>External procedure name</p>
</li>
<li>
<p>Any parameters</p>
</li>
</ul>
<p>The agent then loads the DLL or the shared library, and runs the external procedure and passes back to the application any values returned by the external procedure. The agent must reside on the same computer as the application making the external procedure call.</p>
<p>When you use the default configuration for external procedures, the extproc agent is spawned directly by Oracle Database. There are no configuration changes required for either the <code dir="ltr">listener.ora</code> or <code dir="ltr">tnsnames.ora</code> file. However, you must define the environment variables to be used by external procedures in the <code dir="ltr">extproc.ora</code> file located in the <code dir="ltr">ORACLE_HOME/hs/admin</code> directory. If the default configuration for external procedures is not used, then the parameters listed in <a href="#g508505">Table 13-7</a> must be set.</p>
<div id="NETAG1189" class="tblruleformalwide">
<p class="titleintable"><a id="sthref937"></a><a id="g508505"></a>Table 13-7 External Procedures Settings in listener.ora</p>
<table class="cellalignment6129" title="External Procedures Settings in listener.ora" summary="External Procedures Settings in listener.ora" dir="ltr">
<thead>
<tr class="cellalignment6123">
<th class="cellalignment6130" id="r1c1-t32">Oracle Enterprise Manager Cloud Control Field</th>
<th class="cellalignment6130" id="r1c2-t32">listener.ora Parameter</th>
<th class="cellalignment6130" id="r1c3-t32">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r2c1-t32" headers="r1c1-t32">
<p><a id="sthref938"></a><a id="sthref939"></a>Program Name</p>
</td>
<td class="cellalignment6131" headers="r2c1-t32 r1c2-t32">
<p><a id="sthref940"></a><a id="sthref941"></a>PROGRAM</p>
</td>
<td class="cellalignment6131" headers="r2c1-t32 r1c3-t32">
<p>The name of the external procedure agent executable.</p>
<p><span class="bold">Note:</span> On Microsoft Windows, the executable must reside in the <code dir="ltr">ORACLE_HOME\bin</code> directory.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r3c1-t32" headers="r1c1-t32">
<p><a id="sthref942"></a><a id="sthref943"></a>Environment Variables</p>
</td>
<td class="cellalignment6131" headers="r3c1-t32 r1c2-t32">
<p><a id="sthref944"></a><a id="sthref945"></a>ENVS</p>
</td>
<td class="cellalignment6131" headers="r3c1-t32 r1c3-t32">
<p>The environment variables to be used by external procedures in the <code dir="ltr">extproc.ora</code> file located in the <code dir="ltr">ORACLE_HOME/hs/admin</code> directory.</p>
<p><span class="bold">Note:</span> When <code dir="ltr">extproc.ora</code> is in use, it precedes the same environment variables of <code dir="ltr">ENVS</code> in <code dir="ltr">listener.ora</code>.</p>
<p><span class="bold">Syntax:</span> <code dir="ltr">SET</code> <code dir="ltr"><span class="codeinlineitalic">name=</span></code><code dir="ltr"><span class="codeinlineitalic">value</span></code></p>
<p><span class="bold">Example:</span> <code dir="ltr">SET EXTPROC_DLLS=ANY</code></p>
<p>Specify the <a id="sthref946"></a>EXTPROC_DLLS environment variable to restrict the DLLs that the extproc agent is allowed to load. Without the EXTPROC_DLLS environment variable, the extproc agent loads DLLs from the <code dir="ltr">ORACLE_HOME/lib</code> directory on UNIX operating systems and the <code dir="ltr">ORACLE_HOME\bin</code> directory on Microsoft Windows.</p>
<p>Set EXTPROC_DLLS to one of the following values:</p>
<ul>
<li>
<p>Colon-separated list of DLLs<a id="CEGIAGDJ" href="#CEGIAGDJ" onclick="footdisplay(1,&#34;The DLLs are separated by semi-colons (;) on Microsoft Windows.&#34;)"><sup class="tablefootnote">Foot&nbsp;1&nbsp;</sup></a></p>
<p><span class="bold">Syntax:</span> <code dir="ltr">&#34;</code><code dir="ltr"><span class="codeinlineitalic">DLL</span></code><code dir="ltr">:</code><code dir="ltr"><span class="codeinlineitalic">DLL</span></code><code dir="ltr">&#34;</code></p>
<p>This value allows the extproc agent to load the specified DLLs and the DLLs from the <code dir="ltr">ORACLE_HOME/lib</code> directory on UNIX operating systems and the <code dir="ltr">ORACLE_HOME\bin</code> directory on Microsoft Windows. You must enter the complete directory path and file name of the DLLs.</p>
</li>
<li>
<p><code dir="ltr">ONLY</code> (Recommended for maximum security)<a id="sthref947" href="#sthref947" onclick="footdisplay(1,&#34;The DLLs are separated by semi-colons (;) on Microsoft Windows.&#34;)"><sup class="footnotenumber">Footref&nbsp;1</sup></a></p>
<p><span class="bold">Syntax:</span> <code dir="ltr">&#34;ONLY:</code><code dir="ltr"><span class="codeinlineitalic">DLL</span></code><code dir="ltr">:</code><code dir="ltr"><span class="codeinlineitalic">DLL</span></code><code dir="ltr">&#34;</code></p>
<p>This value allows the extproc agent to load only the specified DLLs. You must enter the complete directory path and file name of the DLLs.</p>
</li>
<li>
<p><code dir="ltr">ANY</code></p>
<p><span class="bold">Syntax:</span> <code dir="ltr">&#34;ANY&#34;</code></p>
<p><span class="bold">Description:</span> This value allows the extproc agent to load any DLL. <code dir="ltr">ANY</code> disables DLL checking.</p>
</li>
</ul>
<p><span class="bold">Examples:</span></p>
<pre dir="ltr">&#34;EXTPROC_DLLS=/home/xyz/mylib.so:/home/abc/urlib.so,
LD_LIBRARY_PATH=/private/xpm/lib:/private/mylibs, 
MYPATH=/usr/ucb:/usr/local/packages,APL_ENV_FILE=/apl/conf/env.txt&#34;

&#34;EXTPROC_DLLS=ONLY:/home/xyz/mylib.so:/home/abc/urlib.so,
LD_LIBRARY_PATH=/private/xpm/lib:/private/mylibs, 
MYPATH=/usr/ucb:/usr/local/packages,APL_ENV_FILE=/apl/conf/env.txt&#34;

&#34;EXTPROC_DLLS=ANY,LD_LIBRARY_PATH=/private/xpm/lib:/private/mylibs, 
MYPATH=/usr/ucb:/usr/local/packages,APL_ENV_FILE=/apl/conf/env.txt&#34;
</pre></td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r4c1-t32" headers="r1c1-t32">
<p><a id="sthref948"></a><a id="sthref949"></a>Oracle Home Directory</p>
</td>
<td class="cellalignment6131" headers="r4c1-t32 r1c2-t32">
<p><a id="sthref950"></a><a id="sthref951"></a>ORACLE_HOME</p>
</td>
<td class="cellalignment6131" headers="r4c1-t32 r1c3-t32">
<p>The Oracle home location of the agent.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r5c1-t32" headers="r1c1-t32">
<p>Oracle System Identifier (<a id="sthref952"></a><a id="sthref953"></a>SID)</p>
</td>
<td class="cellalignment6131" headers="r5c1-t32 r1c2-t32">
<p><a id="sthref954"></a><a id="sthref955"></a>SID_NAME</p>
</td>
<td class="cellalignment6131" headers="r5c1-t32 r1c3-t32">
<p>A system identifier for the external procedure agent by any name.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblruleformalwide" -->
<p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1&nbsp;</sup>The DLLs are separated by semi-colons (;) on Microsoft Windows.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The default configuration for external procedures does not require a network listener to work with Oracle Database and the extproc agent. The extproc agent is spawned directly by Oracle Database and eliminates the risks that the extproc agent might be spawned by Oracle Listener unexpectedly. This default configuration is recommended for maximum security.
<p>You can change the default configuration for external procedures and have the extproc agent spawned by Oracle Listener. To do this, you must perform additional network configuration steps.</p>
<p>Having the extproc agent spawned by Oracle Listener is necessary if you use:</p>
<ul>
<li>
<p>Multi-threaded agent</p>
</li>
<li>
<p>Oracle Database in MTS mode on Microsoft Windows</p>
</li>
<li>
<p>The AGENT clause of the LIBRARY specification or the AGENT IN clause of the PROCEDURE specification such that you can redirect external procedures to a different extproc agent.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DBSEG656" href="../DBSEG/app_devs.htm#DBSEG656"><span class="italic">Oracle Database Security Guide</span></a> for additional information about securing external procedures</div>
<a id="i483932"></a>
<div id="NETAG354" class="sect3">
<h4 class="sect3">Configuring Oracle Net Services for External Procedures</h4>
<p>You can change the default configuration for external procedures and have the extproc agent spawned by the listener similar to earlier releases of Oracle Database.</p>
<p><a href="#CEGGJBFC">Example 13-2</a> shows a sample configuration in the <code dir="ltr">listener.ora</code> file.</p>
<div id="NETAG1187" class="example">
<p class="titleinexample"><a id="CEGGJBFC"></a><a id="i482847"></a>Example 13-2 listener.ora File with an External Procedure</p>
<pre dir="ltr">LISTENER=
  (DESCRIPTION=
    (ADDRESS_LIST=
      (ADDRESS=(PROTOCOL=tcp)(HOST=sale-server)(PORT=1521))
      <span class="bold">(ADDRESS=(PROTOCOL=ipc)(KEY=extproc)</span>)))
</pre></div>
<!-- class="example" -->
<p><a href="#CEGBICIC">Example 13-3</a> shows a sample configuration in the <code dir="ltr">tnsnames.ora</code> file.</p>
<div id="NETAG1188" class="example">
<p class="titleinexample"><a id="CEGBICIC"></a><a id="i483627"></a>Example 13-3 tnsnames.ora File with an External Procedure</p>
<pre dir="ltr">EXTPROC_CONNECTION_DATA=            
 (DESCRIPTION=                     
   (ADDRESS=(PROTOCOL=ipc)<span class="codeinlinebold">(KEY=extproc)</span>)                      
   (CONNECT_DATA=
    <span class="codeinlinebold">(SID=plsextproc)</span>))
</pre></div>
<!-- class="example" -->
<p>The listener for external procedures should have a user account that does not have general access to the files owned by the <code dir="ltr">oracle</code> user. Specifically, this user should not have permission to read or write to database files or to the Oracle server address space. In addition, this user should have read access to the <code dir="ltr">listener.ora</code> file, but must not have write access to it.</p>
<p>Running the listener with lower privileges also prevents using the Listener Control <code dir="ltr">SET</code> commands to alter the configuration of the listener in the <code dir="ltr">listener.ora</code> file. For this reason, Oracle recommends that you complete <code dir="ltr">listener.ora</code> file configuration before running the listener.</p>
<div id="NETAG1473" class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref956"></a>
<h5 class="sect4">Modifying the Default Configuration for External Procedures:</h5>
<p><a id="sthref957"></a><a id="sthref958"></a>To modify the default configuration for external procedures, configure and run a separate or existing listener to serve external procedures. The following procedure describes how to modify the default configuration:</p>
<ol>
<li>
<p>Configure an existing listener to serve external procedures using Oracle Net Configuration Assistant as follows. For most installation types, this listener is named <code dir="ltr">LISTENER</code>.</p>
<ol>
<li>
<p>Access the Net Services Administration page in Oracle Enterprise Manager Cloud Control.</p>
</li>
<li>
<p>Select <span class="bold">Listeners</span> from the Administer list, and then select the Oracle home that contains the location of the configuration files.</p>
</li>
<li>
<p>Click <span class="bold">Go</span>.</p>
<p>The Listeners page appears.</p>
</li>
<li>
<p>Select the existing listener created by Oracle Net Configuration Assistant, and then click <span class="bold">Edit</span>.</p>
<p>The Edit Listeners page appears.</p>
</li>
<li>
<p>In the Addresses section, select the protocol address for external procedures, and then click <span class="bold">Add</span>.</p>
</li>
<li>
<p>Click the <span class="bold">Other Services</span> tab.</p>
</li>
<li>
<p>Select the row representing the service information for external procedures, and then click <span class="bold">Add</span>.</p>
</li>
</ol>
</li>
<li>
<p>Add service information about the extproc agent in the <code dir="ltr">listener.ora</code> file, including the parameters described in <a href="#g508505">Table 13-7</a>.</p>
</li>
</ol>
</div>
<!-- class="sect4" -->
<div id="NETAG1474" class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref959"></a>
<h5 class="sect4">Creating a New Listener to Run External Procedures:</h5>
<p>To configure and run a separate listener to serve external procedures, create the external procedure entries for a different listener using Oracle Net Configuration Assistant. The following procedure describes how to create a new listener:</p>
<ol>
<li>
<p>Create a listener to exclusively handle external procedures, as follows:</p>
<ol>
<li>
<p>Navigate to the Listeners page.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The Create Listener page appears.</p>
</li>
<li>
<p>In the Listener Name field, enter a unique listener name, such as <code dir="ltr">LISTENEREXTPROC</code>, in the Listener Name field.</p>
</li>
</ol>
</li>
<li>
<p>In the Addresses section, configure an IPC protocol address, as follows:</p>
<ol>
<li>
<p>Click <span class="bold">Add</span>.</p>
<p>The Add Address page appears.</p>
</li>
<li>
<p>From the Protocol list, select <span class="bold">IPC</span>.</p>
</li>
<li>
<p>In the Key field, enter a key value of the extproc agent.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="listenercfg.htm#i467654">&#34;Configuring Listening Protocol Addresses&#34;</a> for additional information about configuring listener protocol addresses</div>
</li>
</ol>
</li>
<li>
<p>Add service information about the extproc agent in the <code dir="ltr">listener.ora</code> file, including the parameters described in <a href="#g508505">Table 13-7</a>, as follows:<a id="sthref960"></a></p>
<ol>
<li>
<p>Click the <span class="bold">Other Services</span> tab.</p>
</li>
<li>
<p>Click <span class="bold">Add</span>.</p>
<p>The Create Other Service page appears.</p>
</li>
<li>
<p>Enter the following values in the fields:</p>
<ul>
<li>
<p><code dir="ltr">extproc</code> in the Program Name field.</p>
</li>
<li>
<p>The Oracle home where the <code dir="ltr">extproc</code> executable resides in the Oracle Home Directory field.</p>
</li>
<li>
<p>System identifier, such as <code dir="ltr">extproc</code>, in the SID field.</p>
</li>
</ul>
</li>
<li>
<p>In the Environment Variables section, click <span class="bold">Add Another Row</span>.</p>
</li>
<li>
<p>Enter the EXTPROC_DLLS environment variable in the Name field, and the directory path and file name of the DLLs in the Value field.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The Create Listener page appears.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to add the listener.</p>
<p>The listener is added to the Listeners page.</p>
<p>The <code dir="ltr">listener.ora</code> file updates with information for external procedures, as shown in the following output:</p>
<pre dir="ltr">LISTENEREXTPROC=
 (DESCRIPTION=
  (ADDRESS=
     (PROTOCOL=ipc)(KEY=extproc)))
</pre></li>
</ol>
</li>
<li>
<p>Start the listener for external procedures from a user account with lower privileges than the <code dir="ltr">oracle</code> user.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="gettingstart.htm#i484556">&#34;Starting Oracle Net Listener and the Oracle Database Server&#34;</a> for instructions on using the Listener Control utility <code dir="ltr">START</code> command to start the listener</p>
</li>
<li>
<p><a class="olink ADFNS010" href="../ADFNS/adfns_externproc.htm#ADFNS010"><span class="italic">Oracle Database Development Guide</span></a> for instruction on enabling external procedure calls</p>
</li>
</ul>
</div>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i474074"></a>
<div id="NETAG0133" class="sect2">
<h3 class="sect2">About Oracle Net Services for Oracle Heterogeneous Services<a id="sthref961"></a><a id="sthref962"></a><a id="sthref963"></a><a id="sthref964"></a></h3>
<p><a id="sthref965"></a>Heterogeneous Services is an integrated component within the Oracle database server, and provides the generic technology for accessing third-party systems from the Oracle database server. Heterogeneous Services enables you to:</p>
<ul>
<li>
<p>Use Oracle SQL to transparently access data stored in third-party systems as if the data resides within an Oracle database server.</p>
</li>
<li>
<p>Use Oracle procedure calls to transparently access third-party systems, services, or application programming interfaces (APIs) from your Oracle distributed environment.</p>
</li>
</ul>
<p>While Heterogeneous Services provides the generic technology in the Oracle database server, a Heterogeneous Services agent is required to access a particular third-party system.</p>
<div id="NETAG1587" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref966"></a>
<h4 class="sect3">Configuring Oracle Database to Connect to Agents</h4>
<p>To initiate a connection to the third-party system, the Oracle database server starts an agent process through the listener on the gateway. The following procedure describes how to configure the Oracle database server to be able to connect to the agents:</p>
<ol>
<li>
<p><a id="sthref967"></a><a id="sthref968"></a>Configure the listener on the gateway to listen for incoming requests from the Oracle database server and spawn Heterogeneous Services agents by configuring the following parameters in the <code dir="ltr">listener.ora</code> file:</p>
<ul>
<li>
<p><a id="sthref969"></a><a id="sthref970"></a>PROGRAM: The name of the agent executable</p>
</li>
<li>
<p><a id="sthref971"></a><a id="sthref972"></a>ORACLE_HOME: The Oracle home location of the agent executable</p>
</li>
<li>
<p><a id="sthref973"></a><a id="sthref974"></a>SID_NAME: The Oracle system identifier (SID)</p>
</li>
</ul>
</li>
<li>
<p>Configure the PROGRAM, ORACLE_HOME, and SID parameters in Oracle Enterprise Manager Cloud Control.</p>
<ol>
<li>
<p>Access the Net Services Administration page in Oracle Enterprise Manager Cloud Control.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="admintools.htm#i491701">&#34;Using Oracle Enterprise Manager Cloud Control to Configure Oracle Net Services&#34;</a></div>
</li>
<li>
<p>Select <span class="bold">Listeners</span> from the Administer list, and then select the Oracle home that contains the location of the configuration files.</p>
</li>
<li>
<p>Click <span class="bold">Go</span>.</p>
<p>The Listeners page appears.</p>
</li>
<li>
<p>Select the listener created by Oracle Net Configuration Assistant, and then click <span class="bold">Edit</span>.</p>
<p>The Edit Listeners page appears.</p>
</li>
<li>
<p>Click the <span class="bold">Other Services</span> tab.</p>
</li>
<li>
<p>Click <span class="bold">Add</span>.</p>
<p>The Create Other Service page appears.</p>
</li>
<li>
<p>Enter the program name in the Program Name field that will be run to create a gateway, the Oracle home where the agent executable resides in the Oracle Home Directory field, and the Oracle System Identifier (SID) or service name of the third-party system in the SID field.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The Edit Listener page appears.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to modify the listener.</p>
<p>The Listeners page appears.</p>
<p>The <code dir="ltr">listener.ora</code> file updates information about the Heterogeneous Services, as shown in the following:</p>
<pre dir="ltr">SID_LIST_LISTENER=
 (SID_LIST=
<span class="bold">  (SID_DESC=</span>
<span class="bold">   (SID_NAME=sybasegw)</span>
<span class="bold">   (ORACLE_HOME=/oracle12c)</span>
<span class="bold">   (PROGRAM=tg4sybs))</span>)
</pre></li>
</ol>
</li>
<li>
<p>On the computer where the Oracle database resides, set up a network service name to connect to the listener on the gateway. The connect descriptor must include the <code dir="ltr">HS=ok</code> clause to ensure the connection uses Heterogeneous Services, as follows:</p>
<ol>
<li>
<p>Create a network service name that can be used for connections from the Oracle database server to a third-party system.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="naming.htm#BABJBJBE">Task 1, &#34;Configure Net Services Names&#34;</a> for local naming instructions and <a href="naming.htm#BABGIEFF">Task 2, &#34;Create Net Service Names in the Directory&#34;</a> for directory naming instructions</div>
</li>
<li>
<p>Use either Oracle Enterprise Manager Cloud Control or Oracle Net Manager to configure <code dir="ltr">HS=ok</code>.</p>
<ul>
<li>
<p>For Oracle Enterprise Manager Cloud Control, access the <span class="bold">Net Services Administration</span> page, select Local Naming for the listener, and then click the <span class="bold">Advanced</span> tab in the Create Net Service Name page. Next, click <span class="bold">Use for Heterogeneous Services</span>.</p>
</li>
<li>
<p>For Oracle Net Manager, click <span class="bold">Advanced</span> in the Service Identification box. The Advanced Service Options dialog box appears. Click <a id="sthref975"></a><a id="sthref976"></a><span class="bold">Use for Heterogeneous Services</span>.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span> to confirm the change.</p>
<p>The <code dir="ltr">tnsnames.ora</code> file updates with the new network service name configured for Heterogeneous Services, as shown in the following:</p>
<pre dir="ltr">sybase_gtw=
 (DESCRIPTION=
  (ADDRESS=(PROTOCOL=tcp)(HOST=gate-server)(PORT=1521))
  (CONNECT_DATA=
    (SERVICE_NAME=sybasegw)
  )
    <span class="bold">(HS=ok)</span>))
 )
</pre></li>
</ol>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink HETER" href="../HETER/toc.htm"><span class="italic">Oracle Database Heterogeneous Connectivity Administrator&#39;s Guide</span></a></div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i449411"></a>
<div id="NETAG356" class="sect2">
<h3 class="sect2">Configuring Oracle Net Services for an Oracle Rdb Database<a id="sthref977"></a><a id="sthref978"></a><a id="sthref979"></a><a id="sthref980"></a></h3>
<p>Oracle Rdb is a database for Digital 64-bit operating systems. Because Oracle Rdb has its own listener, the client interacts with Rdb in the same manner as it does with an Oracle database.</p>
<p>To initiate a connection to an Oracle Rdb, set up a network service name to connect to the Oracle Rdb database using the parameters described in <a href="#g510382">Table 13-8</a>.</p>
<div id="NETAG1190" class="tblruleformalwide">
<p class="titleintable"><a id="sthref981"></a><a id="g510382"></a>Table 13-8 Oracle RDB Database Settings in a Connect Descriptor</p>
<table class="cellalignment6129" title="Oracle RDB Database Settings in a Connect Descriptor" summary="Oracle RDB Database Settings in a Connect Descriptor" dir="ltr">
<thead>
<tr class="cellalignment6123">
<th class="cellalignment6130" id="r1c1-t40">Oracle Enterprise Manager Cloud Control Field</th>
<th class="cellalignment6130" id="r1c2-t40">tnsnames.ora Parameter</th>
<th class="cellalignment6130" id="r1c3-t40">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r2c1-t40" headers="r1c1-t40">
<p><a id="sthref982"></a><a id="sthref983"></a>Rdb Database</p>
</td>
<td class="cellalignment6131" headers="r2c1-t40 r1c2-t40">
<p><a id="sthref984"></a>RDB_DATABASE</p>
</td>
<td class="cellalignment6131" headers="r2c1-t40 r1c3-t40">
<p>The file name of an Oracle Rdb database.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r3c1-t40" headers="r1c1-t40">
<p><a id="sthref985"></a><a id="sthref986"></a>Type of Service</p>
</td>
<td class="cellalignment6131" headers="r3c1-t40 r1c2-t40">
<p><a id="sthref987"></a>TYPE_OF_SERVICE</p>
</td>
<td class="cellalignment6131" headers="r3c1-t40 r1c3-t40">
<p>The type of service to use for an Oracle Rdb database. It is used by Rdb interface tools. This feature should only be used if the application supports both Oracle Rdb and Oracle database services, and you want the application to load balance between the two.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r4c1-t40" headers="r1c1-t40">
<p><a id="sthref988"></a><a id="sthref989"></a>Global Database Name</p>
</td>
<td class="cellalignment6131" headers="r4c1-t40 r1c2-t40">
<p><a id="sthref990"></a>GLOBAL_NAME</p>
</td>
<td class="cellalignment6131" headers="r4c1-t40 r1c3-t40">
<p>The Oracle Rdb database. Optional.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblruleformalwide" -->
<p><a id="sthref991"></a>The following procedure describes how to configure a client for an Oracle Rdb database:<a id="sthref992"></a></p>
<ol>
<li>
<p>Create a network service name that can be used for connections from the Oracle server to a third-party system.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="naming.htm#BABJBJBE">Task 1, &#34;Configure Net Services Names&#34;</a> for local naming instructions and <a href="naming.htm#BABGIEFF">Task 2, &#34;Create Net Service Names in the Directory&#34;</a> for directory naming instructions</div>
</li>
<li>
<p>Use either Oracle Enterprise Manager Cloud Control or Oracle Net Manager to set the Oracle Rdb parameters.</p>
<ul>
<li>
<p>For Oracle Enterprise Manager Cloud Control, access the <span class="bold">Net Services Administration</span> page, select Local Naming for the listener, and then click the <span class="bold">Advanced</span> tab in the Create Net Service Name page.</p>
</li>
<li>
<p>For Oracle Net Manager, click <span class="bold">Advanced</span> in the Service Identification section. The Advanced Service Options dialog box appears.</p>
</li>
</ul>
</li>
<li>
<p>Enter the file name of an Oracle Rdb database in the Rdb Database field.</p>
</li>
<li>
<p>(Optional) Specify the type of service in the Type of Service field, if needed, and enter the global database name in the Global Database Name field, and then click <span class="bold">OK.</span></p>
<p>The <code dir="ltr">tnsnames.ora</code> file updates with the new network service name configured for the Oracle Rdb database, similar to the following:</p>
<pre dir="ltr">alpha5=
  (DESCRIPTION=
    (ADDRESS=...)
    (CONNECT_DATA=
      (SERVICE_NAME=generic)
      <span class="bold">(RDB_DATABASE=[.mf]mf_personnel.rdb)</span>
<span class="bold">     (GLOBAL_NAME=alpha5)))</span>
</pre>
<p>In the following example, the TYPE_OF_SERVICE parameter is used to load balance between an Oracle Rdb database service and an Oracle database service:</p>
<pre dir="ltr">alpha5=
 (DESCRIPTION_LIST=
  (DESCRIPTION=
    (ADDRESS=...)
    (CONNECT_DATA=
     (SERVICE_NAME=generic)
     <span class="bold">(RDB_DATABASE=[.mf]mf_personnel.rdb)</span>
     <span class="bold">(GLOBAL_NAME=alpha5)</span>))
  (DESCRIPTION=
   (ADDRESS=...)
    (CONNECT_DATA=
     (SERVICE_NAME=sales.us.example.com))
  <span class="bold"> (TYPE_OF_SERVICE=oracle_database))</span>
</pre></li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment6122">
<tr>
<td class="cellalignment6131">
<table class="cellalignment6127">
<tr>
<td class="cellalignment6126"><a href="profile.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment6126"><a href="performance.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment6133">
<table class="cellalignment6125">
<tr>
<td class="cellalignment6126"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment6126"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment6126"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment6126"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment6126"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment6126"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>


</body></html>