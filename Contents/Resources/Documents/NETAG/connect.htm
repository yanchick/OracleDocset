<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-78411"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Testing%20Connections"></a><title>Testing Connections</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-11T8:0:57Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Net Services Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E17610-12"/>
<meta name="dcterms.isVersionOf" content="NETAG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="part3.htm" title="Previous" type="text/html"/>
<link rel="Next" href="trouble.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17610-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">25/28</span> <!-- End Header -->
<div id="NETAG357" class="chapter"><a id="BHAJACHJ"></a>
<h1 class="chapter"><span class="secnum">15</span> Testing Connections</h1>
<p>After you have configured the network, you should connect and test each component to ensure that the network is functioning properly. Oracle Net Services provides tools to help you test the listener, database, and Oracle Connection Manager.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#i429243">Testing the Network</a></p>
</li>
<li>
<p><a href="#i427276">Using the TNSPING Utility to Test Connectivity from the Client</a></p>
</li>
<li>
<p><a href="#i430588">Using the TRCROUTE Utility to Test Connectivity from the Client</a></p>
</li>
</ul>
<a id="i429243"></a>
<div id="NETAG373" class="sect1">
<h2 class="sect1">Testing the Network</h2>
<p>The following is the recommended sequence for testing the network:</p>
<ol>
<li>
<p>Start and test each listener. To start the listener, use the procedure described in <a href="gettingstart.htm#i484556">&#34;Starting Oracle Net Listener and the Oracle Database Server&#34;</a>.</p>
<p>To test a listener, initiate a connection from a client to any active database controlled by that listener.</p>
</li>
<li>
<p>Start and test each Oracle Connection Manager, if included in your network. To start Oracle Connection Manager, use the procedure described in <a href="gettingstart.htm#CIHBEDAD">&#34;Starting Oracle Connection Manager&#34;</a>.</p>
<p>To test Oracle Connection Manager, initiate a connection from a client to any active database that has been registered with Oracle Connection Manager.</p>
</li>
<li>
<p>Test the server with a loopback test or Oracle Net Manager.</p>
<p>A <a href="glossary.htm#BGBJHGDF"><span class="xrefglossterm">loopback test</span></a> uses Oracle Net to go from the database server back to itself, bypassing the Interprocess Communication (IPC). Performing a successful loopback verifies that Oracle Net is functioning on the database server. The following procedure describes how to perform a loopback test using Oracle Net Manager:</p>
<ol>
<li>
<p>Start Oracle Net Manager.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="admintools.htm#i483238">&#34;Using Oracle Net Manager to Configure Oracle Net Services&#34;</a></div>
</li>
<li>
<p>In the navigator, expand <span class="bold">Directory</span> or <span class="bold">Local</span>, and then select <span class="bold">Service Naming</span>.</p>
</li>
<li>
<p>Select the network service name or database service.</p>
</li>
<li>
<p>Choose <span class="bold">Command</span>, and then select <span class="bold">Test Net Service</span>.</p>
<p>Testing assumes the listener and database are running. If they are not, then see <a href="gettingstart.htm#i484556">&#34;Starting Oracle Net Listener and the Oracle Database Server&#34;</a> to start components.</p>
<p>During testing, a Connection Test dialog box appears, providing status and test results. A successful test results in the following message:</p>
<pre dir="ltr">The connection test was successful.
</pre>
<p>If the test was successful, then proceed to step <a href="#BABDCIJD">e</a>.</p>
<p>If the test was not successful, then use the error message to determine further action. For example, if the error message is the following:</p>
<pre dir="ltr">Attempting to connect using userid:  scott
The test did not succeed.
ORA-28000: the account is locked
 
There may be an error in the fields entered,
or the server may not be ready for a connection.
</pre>
<p>Change the user name to an account known to be unlocked. To change the user name, click <span class="bold">Change Login</span>. You are prompted for the password.</p>
</li>
<li id="BABDCIJD">
<p>Click <span class="bold">Close</span> to close the Connect Test dialog box.</p>
</li>
</ol>
</li>
<li>
<p>Test client with a connection.</p>
<p>To test several different clients in your network, initiate a connection to a database server from each of them using the following command:</p>
<pre dir="ltr">CONNECT <span class="codeinlineitalic">username</span>@<span class="codeinlineitalic">connect_identifier</span>
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i427276"></a>
<div id="NETAG378" class="sect1">
<h2 class="sect1">Using the TNSPING<a id="sthref1029"></a><a id="sthref1030"></a> Utility to Test Connectivity from the Client</h2>
<p>The TNSPING utility determines whether the listener for a service on an Oracle Net network can be reached successfully.</p>
<p>If you can connect successfully from a client to a server (or a server to another server) using the TNSPING utility, then it displays an estimate of the round trip time (in milliseconds) it takes to reach the Oracle Net service.</p>
<p>If it fails, then it displays a message describing the error that occurred. This enables you to see the network error that is occurring without the overhead of a database connection.</p>
<p>Use the following command to test connectivity:</p>
<pre dir="ltr">tnsping <span class="codeinlineitalic">net_service_name</span> count
</pre>
<p>In the preceding command, the following arguments are used:</p>
<ul>
<li>
<p><span class="italic">net_service_name</span> must exist in <code dir="ltr">tnsnames.ora</code> file or the name service in use, such as NIS.</p>
</li>
<li>
<p><span class="italic">count</span> determines how many times the program attempts to reach the server. This argument is optional.</p>
</li>
</ul>
<p>If the network service name specified is a database name, then TNSPING attempts to contact the corresponding listener. It does not actually determine whether the database is running. Use SQL*Plus to attempt a connection to the database.</p>
<p>The following are some examples of TNSPING:</p>
<ul>
<li>
<p><a href="#BABJAGAG">Example 15-1, &#34;Checking a Listener with TNSPING&#34;</a></p>
</li>
<li>
<p><a href="#BABHBEAD">Example 15-2, &#34;Checking an Invalid Net Service Name with TNSPING&#34;</a></p>
</li>
<li>
<p><a href="#BABIBDJA">Example 15-3, &#34;Checking Valid Net Service Name but No Listener with TNSPING&#34;</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Different platforms may have different interfaces, but the program accepts the same arguments. Invoke TNSPING for the display of the proper interface requirements.</div>
<p><a href="#BABJAGAG">Example 15-1</a> is an example of checking a listener for a database using a network service name of <code dir="ltr">sales</code> using the <code dir="ltr">TNSPING</code> command.</p>
<div id="NETAG380" class="example">
<p class="titleinexample"><a id="BABJAGAG"></a>Example 15-1 Checking a Listener with TNSPING</p>
<pre dir="ltr">TNSPING sales
</pre>
<p>This produces the following message:</p>
<pre dir="ltr">TNS Ping Utility for Linux: Version 12.1.0.1.0 - Production on 21-NOV-2012 

Copyright (c) 1997, 2012 Oracle Corporation.  All rights reserved.

Used parameter files:
Used TNSNAMES adapter to resolve the alias
Attempting to contact (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL =
TCP)(HOST = sales-server)(PORT = 1521))) (CONNECT_DATA = (SERVICE_NAME =
sales.us.example.com)))
OK (10 msec)
</pre>
<p>To determine whether the listener for the <code dir="ltr">sales</code> database is available, and to specify that TNSPING try to connect eight times and then give up, use the following syntax:</p>
<pre dir="ltr">tnsping sales 8
</pre>
<p>This command produces the following message:</p>
<pre dir="ltr">TNS Ping Utility for Linux: Version 12.1.0.1.0 - Production on 21-NOV-2012 

Copyright (c) 1997, 2012 Oracle Corporation.  All rights reserved.

Used parameter files:

Used TNSNAMES adapter to resolve the alias
Attempting to contact (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL =
TCP)(HOST = sales-server)(PORT = 1521))) (CONNECT_DATA = (SERVICE_NAME =
sales.us.example.com)))
OK (10 msec)
OK (0 msec)
OK (10 msec)
OK (0 msec)
OK (10 msec)
OK (10 msec)
OK (10 msec)
OK (0 msec)
</pre></div>
<!-- class="example" -->
<p><a id="sthref1031"></a><a href="#BABHBEAD">Example 15-2</a> is an example of TNSPING attempting to check using an invalid network service name.</p>
<div id="NETAG381" class="example">
<p class="titleinexample"><a id="BABHBEAD"></a>Example 15-2 Checking an Invalid Net Service Name with TNSPING</p>
<pre dir="ltr">tnsping badname
</pre>
<p>This attempt produces the following message:</p>
<pre dir="ltr">TNS Ping Utility for Linux: Version 12.1.0.1.0 - Production on 21-NOV-2012 

Copyright (c) 1997, 2012 Oracle Corporation.  All rights reserved.

Used parameter files:

TNS-03505: Failed to resolve name
</pre></div>
<!-- class="example" -->
<p><a id="sthref1032"></a><a href="#BABIBDJA">Example 15-3</a> is an example of output when using TNSPING to check a name that is valid, but resolves to an address where no listener is located, for example, the listener may not be started.</p>
<div id="NETAG382" class="example">
<p class="titleinexample"><a id="BABIBDJA"></a>Example 15-3 Checking Valid Net Service Name but No Listener with TNSPING</p>
<pre dir="ltr">tnsping sales

TNS Ping Utility for Linux: Version 12.1.0.1.0 - Production on 21-NOV-2012 

Copyright (c) 1997, 2012 Oracle Corporation.  All rights reserved.

Used parameter files:
Used TNSNAMES adapter to resolve the alias
Attempting to contact (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL =
TCP)(HOST = sales-server)(PORT = 1521))) (CONNECT_DATA = (SERVICE_NAME =
sales.us.example.com)))
TNS-12541: TNS:no listener 
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="i430588"></a>
<div id="NETAG383" class="sect1">
<h2 class="sect1">Using the TRCROUTE Utility to Test Connectivity from the Client</h2>
<p>The Trace Route Utility (<a id="sthref1033"></a>TRCROUTE), in Linux and UNIX environments, enables administrators to discover the path or route a connection takes from a client to a server. If TRCROUTE encounters a problem, then it returns an error stack to the client instead of a single error. These additional error messages make troubleshooting easier.</p>
<p><a id="sthref1034"></a><a id="sthref1035"></a>TRCROUTE is different from TNSPING in that it travels as a special type of connect packet, and is routed as such. As it travels toward its destination, the TRCROUTE connect packet collects the TNS addresses of every node it travels through. If an error occurs, then TRCROUTE collects error information that shows where the error occurred. The TRCROUTE displays the information collected on the client screen. You can redirect the TRCROUTE output to a file, and print it.</p>
<p>The TRCROUTE uses minimal resources. It gathers information in the connect data of a special connect packet. Standard connect packets are not affected.</p>
<p>The server is not affected by TRCROUTE. The listener receives and processes the TRCROUTE connect packet. It returns the information to the client by putting it into a refuse packet. The server does not need to start any new processes or deal with dummy connections.</p>
<p>To use the TRCROUTE utility, enter the following command:</p>
<pre dir="ltr">trcroute <span class="codeinlineitalic">net_service_name</span>
</pre>
<p><a href="#BABHDFGJ">Example 15-4</a> shows a successful trace route packet that traveled from a client to a listener.</p>
<div id="NETAG1484" class="example">
<p class="titleinexample"><a id="BABHDFGJ"></a>Example 15-4 Successful Trace Route</p>
<pre dir="ltr">trcroute sales

Trace Route Utility for Linux: Version 12.1.0.1.0 - Production on 21-NOV-2012 

Copyright (c) 1999, 2012 Oracle Corporation.  All rights reserved.

Route of TrcRoute:
------------------
 
Node: Client            Time and address of entry into node:
-------------------------------------------------------------
09-NOV-2012 21:48:48 ADDRESS= PROTOCOL=TCP  HOST=10.150.21.136  PORT=14001
 
Node: Server            Time and address of entry into node:
-------------------------------------------------------------
09-NOV-2012 21:48:05 ADDRESS= PROTOCOL=TCP  HOST=10.150.21.136  PORT=14001 

</pre></div>
<!-- class="example" -->
<p><a href="#BABIJACA">Example 15-5</a> shows an unsuccessful trace route packet that could not reach the listener because the listener was not up.</p>
<div id="NETAG1485" class="example">
<p class="titleinexample"><a id="BABIJACA"></a>Example 15-5 Trace Route with Error</p>
<pre dir="ltr">trcroute sales

Trace Route Utility for Linux: Version 12.1.0.1.0 - Production on 21-NOV-2012 

Copyright (c) 1999, 2012 Oracle Corporation.  All rights reserved.

Route of TrcRoute:
------------------

Node: Client            Time and address of entry into node:
-------------------------------------------------------------
25-FEB-2012 14:43:05 ADDRESS= PROTOCOL=TCP  HOST=sales-server  PORT=1521

TNS-12543: TNS:unable to connect to destination
TNS-12541: TNS:no listener
TNS-12560: TNS:protocol adapter error
TNS-03601: Failed in route information collection
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment6122">
<tr>
<td class="cellalignment6131">
<table class="cellalignment6127">
<tr>
<td class="cellalignment6126"><a href="part3.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment6126"><a href="trouble.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment6133">
<table class="cellalignment6125">
<tr>
<td class="cellalignment6126"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment6126"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment6126"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment6126"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment6126"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment6126"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>