<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-78475"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Configuring%20and%20Administering%20Oracle%20Net%20Listener"></a><title>Configuring and Administering Oracle Net Listener</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-11T8:0:56Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Net Services Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E17610-12"/>
<meta name="dcterms.isVersionOf" content="NETAG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="naming.htm" title="Previous" type="text/html"/>
<link rel="Next" href="cman.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17610-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">18/28</span> <!-- End Header -->
<div id="NETAG010" class="chapter"><a id="i486171"></a>
<h1 class="chapter"><span class="secnum">9</span> <a id="ABC497690"></a><a id="ABC497690SRI1"></a>Configuring and Administering Oracle Net Listener</h1>
<p>Oracle Net Listener is a separate process that runs on the database server. It receives incoming client connection requests and manages the traffic of these requests to the database server. This chapter describes how to configure the listener to accept client connections.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#i454523">Overview of Oracle Net Listener</a></p>
</li>
<li>
<p><a href="#i490264">Configuring Dynamic Service Registration</a></p>
</li>
<li>
<p><a href="#i486599">Configuring Oracle Net Listener During Installation</a></p>
</li>
<li>
<p><a href="#i483130">Customizing Oracle Net Listener Configuration</a></p>
</li>
<li>
<p><a href="#i483142">Administering the Listener</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Notes:</p>
In Oracle Database 12<span class="italic">c</span> Release 1 (12.1), the listener password feature is no longer supported. This does not cause a loss of security because authentication is enforced through local operating system authentication. Refer to <a class="olink NETRF1971" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=NETRF1971"><span class="italic">Oracle Database Net Services Reference</span></a> for additional information.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="concepts.htm#CIHGGHEE">Chapter 2, &#34;Identifying and Accessing the Database&#34;</a> for a description of how the listener is used during an initial connection request</p>
</li>
<li>
<p><a href="layers.htm#g1052760">Chapter 4, &#34;Understanding the Communication Layers&#34;</a> for an architectural overview of the listener</p>
</li>
</ul>
</div>
<a id="i454523"></a>
<div id="NETAG292" class="sect1">
<h2 class="sect1">Overview of Oracle Net Listener</h2>
<div class="infobox-note">
<p class="notep1">Note:</p>
The release of the listener must be the same as or later than the latest release of all Oracle databases being serviced through the listener.</div>
<p>A listener is configured with one or more listening protocol addresses, information about supported services, and parameters that control its runtime behavior. The listener configuration is stored in a configuration file named <code dir="ltr">listener.ora</code>.</p>
<p>Because the configuration parameters have default values, it is possible to start and use a listener with no configuration. This default listener has a name of <code dir="ltr">LISTENER</code>, supports no services on startup, and listens on the following TCP/IP protocol address:</p>
<pre dir="ltr">(ADDRESS=(PROTOCOL=tcp)(HOST=<span class="codeinlineitalic">host_name</span>)(PORT=1521))
</pre>
<pre dir="ltr"></pre>
<p>The listener forwards client requests to supported services. These services are dynamically registered with the listener. This dynamic registration feature is called <a href="glossary.htm#BGBFDJHF"><span class="xrefglossterm">service registration</span></a>. The registration is performed by the <a id="sthref552"></a>Listener Registration (LREG) process. Dynamic service registration does not require any manual configuration in the <code dir="ltr">listener.ora</code> file.</p>
<p><a id="sthref553"></a>Service registration offers the following benefits:</p>
<ul>
<li>
<p>Connect-time failover<a id="sthref554"></a><a id="sthref555"></a></p>
<p>Because the listener always monitors the state of the instances, service registration facilitates automatic failover of a client connect request to a different instance if one instance is down.</p>
</li>
<li>
<p>Connection load balancing<a id="sthref556"></a><a id="sthref557"></a></p>
<p>Service registration enables the listener to forward client connect requests to the least-loaded instance and <a href="glossary.htm#BGBHHIEG"><span class="xrefglossterm">dispatcher</span></a> or <a href="glossary.htm#BGBFDHGE"><span class="xrefglossterm">dedicated server</span></a>. Service registration balances the load across the <a href="glossary.htm#BGBEHBBG"><span class="xrefglossterm">service handler</span></a>s and nodes.</p>
</li>
<li>
<p>High-availability for Oracle Real Application Clusters and Oracle Data Guard</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="net_arch.htm#CEGBHDJB">&#34;Understanding Oracle Net Architecture&#34;</a></p>
</li>
<li>
<p><a href="#i490264">&#34;Configuring Dynamic Service Registration&#34;</a></p>
</li>
<li>
<p><a href="advcfg.htm#i465213">&#34;About the Address List Parameters&#34;</a></p>
</li>
<li>
<p><a href="advcfg.htm#i475648">&#34;Understanding Connection Load Balancing&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="i490264"></a>
<div id="NETAG298" class="sect1">
<h2 class="sect1">Configuring Dynamic Service Registration</h2>
<p>Service registration allows processes, such as an Oracle database, to identify their available services to the listener, which then acts as a port mapper for those services. The listener uses the dynamic service information about the database and instance received through service registration.</p>
<p>Dynamic service registration is configured in the database initialization file. It does not require any configuration in the <code dir="ltr">listener.ora</code> file. However, listener configuration must be set to listen on the ports named in the database initialization file, and must not have parameters set that prevent automatic registration, such as COST parameters.</p>
<p>This section contains the following configuration topics related to service registration:</p>
<ul>
<li>
<p><a href="#i490287">Setting Initialization Parameters for Service Registration</a></p>
</li>
<li>
<p><a href="#CHDCCHIC">Registering Information with a Local Listener</a></p>
</li>
<li>
<p><a href="#i490371">Registering Information with a Remote Listener</a></p>
</li>
<li>
<p><a href="#CHDCBFGE">Registering Information with All Listeners in a Network</a></p>
</li>
<li>
<p><a href="#i490439">Configuring a Naming Method</a></p>
</li>
</ul>
<a id="i490287"></a>
<div id="NETAG299" class="sect2">
<h3 class="sect2">Setting Initialization Parameters for Service Registration</h3>
<p>To ensure service registration works properly, the initialization parameter file should contain the following parameters:</p>
<ul>
<li>
<p>SERVICE_NAMES for the database service name</p>
</li>
<li>
<p>INSTANCE_NAME for the instance name</p>
</li>
<li>
<p>LOCAL_LISTENER for the local listener</p>
</li>
<li>
<p>REMOTE_LISTENER for the remote listener, if any</p>
</li>
</ul>
<p>For example:</p>
<pre dir="ltr">SERVICE_NAMES=sales.us.example.com
INSTANCE_NAME=sales
</pre>
<p>The value for the SERVICE_NAMES parameter defaults to the <a id="sthref558"></a><a id="sthref559"></a><a id="sthref560"></a><a href="glossary.htm#BGBDDFCC"><span class="xrefglossterm">global database name</span></a>, a name comprising the DB_NAME and DB_DOMAIN parameters in the initialization parameter file. The value for the INSTANCE_NAME parameter defaults to the Oracle system identifier (SID).</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for additional information about the SERVICE_NAMES and INSTANCE_NAME parameters</div>
</div>
<!-- class="sect2" -->
<a id="CHDCCHIC"></a>
<div id="NETAG1154" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Registering Information with a Local Listener</h3>
<p><a id="sthref561"></a><a id="sthref562"></a><a id="sthref563"></a><a id="sthref564"></a>By default, the LREG process registers service information with its local listener on the default local address of TCP/IP, port 1521. If the listener configuration is synchronized with the database configuration, then LREG can register service information with a nondefault local listener or a remote listener on another node. Synchronization occurs when the protocol address of the listener is specified in the <code dir="ltr">listener.ora</code> file and the location of the listener is specified in the initialization parameter file.</p>
<p>To have the LREG process register with a local listener that does not use TCP/IP, port 1521, configure the LOCAL_LISTENER parameter in the initialization parameter file to locate the local listener.</p>
<p>For a shared server environment, you can use the <a id="sthref565"></a><a id="sthref566"></a><code dir="ltr">LISTENER</code> attribute of the DISPATCHERS parameter in the initialization parameter file to register the dispatchers with a nondefault local listener. Because the LOCAL_LISTENER parameter and the <code dir="ltr">LISTENER</code> attribute enable LREG to register dispatcher information with the listener, it is not necessary to specify both the parameter and the attribute if the listener values are the same.</p>
<p>LOCAL_LISTENER is a comma-delimited list parameter. If a comma appears in the string, then the entire string must be enclosed in double quotation marks. Set the <a id="sthref567"></a><a id="sthref568"></a>LOCAL_LISTENER parameter as follows:</p>
<pre dir="ltr">ALTER SYSTEM SET LOCAL LISTENER=[&#34;]<span class="italic">listener_address</span>[&#34;][,...];
</pre>
<p>For example, if the listener address <code dir="ltr">&#34;ab,cd&#34;</code> is entered, then it resolves to one listener address. If the address is entered as <code dir="ltr">ab,cd</code>, then it resolves to two listener addresses, <code dir="ltr">ab</code> and <code dir="ltr">cd</code>.</p>
<p>For shared server connections, set the <code dir="ltr">LISTENER</code> attribute as follows:</p>
<pre dir="ltr">ALTER SYSTEM SET DISPATCHERS=&#34;(PROTOCOL=tcp)(LISTENER=<span class="italic">listener_address</span>)&#34;;
</pre>
<p>In the preceding command, <span class="italic">listener_address</span> is resolved to the listener protocol addresses through a naming method, such as a <code dir="ltr">tnsnames.ora</code> file on the database server.</p>
<div class="infobox-note">
<p class="notep1">Notes:</p>
<ul>
<li>
<p>To dynamically update the LOCAL_LISTENER parameter, use the SQL statement <code dir="ltr">ALTER SYSTEM</code> as follows:</p>
<pre dir="ltr">ALTER SYSTEM SET LOCAL_LISTENER=[&#34;]<span class="italic">listener_address</span>[&#34;][,...]
</pre>
<p>If you set the parameter to null using the following statement, then the default local address of TCP/IP, port 1521 is assumed:</p>
<pre dir="ltr">ALTER SYSTEM SET LOCAL_LISTENER=&#39;&#39;
</pre></li>
</ul>
<ul>
<li>
<p>The <code dir="ltr">LISTENER</code> attribute overrides the LOCAL_LISTENER parameter. As a result, the SQL statement <code dir="ltr">ALTER SYSTEM SET LOCAL_LISTENER</code> does not affect the setting of this attribute.</p>
</li>
</ul>
</div>
<p>In <a href="#CHDJIEAC">Example 9-1</a>, a database resides on host <code dir="ltr">sales1-server</code>. The listener on this host is named <code dir="ltr">listener_sales1</code> and is configured to listen on port 1421 instead of port 1521.</p>
<div id="NETAG1467" class="example">
<p class="titleinexample"><a id="CHDJIEAC"></a>Example 9-1 Registering a Local Listener in a Dedicated Server Environment</p>
<ol>
<li>
<p>On the host where the local listener resides, configure the <code dir="ltr">listener.ora</code> file with the protocol address of the listener using Oracle Net Manager.</p>
</li>
<li>
<p>On the database, set the LOCAL_LISTENER parameter in the database initialization parameter file to the alias of the local listener. For example:</p>
<pre dir="ltr">ALTER SYSTEM SET LOCAL_LISTENER=listener_sales1;
</pre>
<p>If the database is configured for shared server connections, then you could set the <code dir="ltr">LISTENER</code> attribute as follows:</p>
<pre dir="ltr">ALTER SYSTEM SET DISPATCHERS=&#34;(PROTOCOL=tcp)(LISTENER=listener_sales1)&#34;;
</pre></li>
<li>
<p>Resolve the listener name alias for the <code dir="ltr">LOCAL_LISTENER</code> setting through a <code dir="ltr">tnsnames.ora</code> file on the database host using a text editor, as follows:</p>
<pre dir="ltr">listener_sales1= 
 (DESCRIPTION = 
  (ADDRESS = (PROTOCOL=tcp)(HOST=sales-server)(PORT=1421)))
</pre>
<div class="infobox-note">
<p class="notep1">Notes:</p>
<ul>
<li>
<p>If you are registering a local listener and use Oracle Connection Manager, then do not include <code dir="ltr">(DESCRIPTION =</code> or its closing parenthesis.</p>
</li>
<li>
<p>A network service name entry can be created for the protocol address without the CONNECT_DATA section of the connect descriptor.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>See <a class="olink SQLRF00902" href="../SQLRF/statements_2017.htm#SQLRF00902"><span class="italic">Oracle Database SQL Reference</span></a> for additional information about the <code dir="ltr">ALTER SYSTEM</code> statement.</p>
</li>
<li>
<p><a href="#i467654">&#34;Configuring Listening Protocol Addresses&#34;</a></p>
</li>
<li>
<p><a href="#i490439">&#34;Configuring a Naming Method&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="i490371"></a>
<div id="NETAG302" class="sect2">
<h3 class="sect2">Registering Information with a Remote Listener</h3>
<p>A <span class="bold">remote listener</span> is a listener residing on one computer that redirects connections to a database instance on another computer. Remote listeners are typically used in an Oracle Real Application Clusters (Oracle RAC) environment. You can configure registration to remote listeners, such as with Oracle RAC, for dedicated or shared server environments.</p>
<p>In a dedicated server environment, you must enable the LREG background process to register with a remote listener. You do this by configuring the REMOTE_LISTENER parameter, which is a comma-delimited list parameter, in the initialization parameter file. The syntax of REMOTE_LISTENER is as follows:</p>
<pre dir="ltr"><a id="sthref569"></a>ALTER SYSTEM SET REMOTE_LISTENER=[&#34;]<span class="italic">listener_address</span>[&#34;][,...];
</pre>
<p>In the preceding command, <span class="italic">listener_address</span> is resolved to the listener protocol addresses through a naming method such as a <code dir="ltr">tnsnames.ora</code> file on the database host. If a comma appears in the listener address, then the entire string must be enclosed in quotation marks.</p>
<p>In a shared server environment, you can use the same registration technique as for a dedicated server environment. Alternatively, you can set the <a id="sthref570"></a><a id="sthref571"></a><code dir="ltr">LISTENER</code> attribute of the DISPATCHERS parameter in the initialization parameter file to register the dispatchers with any listener. The syntax of the <code dir="ltr">LISTENER</code> attribute is as follows:</p>
<pre dir="ltr">ALTER SYSTEM SET DISPATCHERS=&#34;(PROTOCOL=tcp)(LISTENER=<span class="italic">listener_address</span>)&#34;;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code dir="ltr">LISTENER</code> attribute overrides the REMOTE_LISTENER initialization parameter. Because the REMOTE_LISTENER initialization parameter and the <code dir="ltr">LISTENER</code> attribute enable LREG to register dispatcher information with the listener, you do not need specify both the parameter and the attribute if the listener values are the same.</div>
<p>For example, assume that a remote listener named <code dir="ltr">listener-sales2</code> listens on port 1521 on host <code dir="ltr">sales2-server</code>, and a database resides on host <code dir="ltr">sales1-server</code>. You want the listener on <code dir="ltr">sales2-server</code> to redirect connection requests to this database. <a href="#CHDBCEHC">Figure 9-1</a> illustrates this scenario.</p>
<div id="NETAG1468" class="figure">
<p class="titleinfigure"><a id="CHDBCEHC"></a>Figure 9-1 Remote Listener</p>
<img width="488" height="251" src="img/netag141.gif" alt="Description of Figure 9-1 follows"/><br/>
<a id="sthref572" href="img_text/netag141.htm">Description of &#39;&#39;Figure 9-1 Remote Listener&#39;&#39;</a><br/>
<br/></div>
<!-- class="figure" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SQLRF" href="../SQLRF/toc.htm"><span class="italic">Oracle Database SQL Reference</span></a> for additional information about the <code dir="ltr">ALTER SYSTEM SET</code> statement</div>
<p><a href="#CHDHFAAE">Example 9-2</a> shows how to register a remote listener in a dedicated server environment. In the example, the remote listener is <code dir="ltr">sales2-server</code>.</p>
<div id="NETAG1469" class="example">
<p class="titleinexample"><a id="CHDHFAAE"></a>Example 9-2 Registering a Remote Listener in a Dedicated Server Environment</p>
<ol>
<li>
<p>On the host where the remote listener resides, use Oracle Net Manager to configure the <code dir="ltr">listener.ora</code> file with the protocol addresses of the remote listener.</p>
</li>
<li>
<p>On the database to which you want requests to be redirected, set the REMOTE_LISTENER parameter in the database initialization parameter file to the alias of the remote listener, for example:</p>
<pre dir="ltr">ALTER SYSTEM SET REMOTE_LISTENER=listener_sales2;
</pre>
<p>For shared server connections, set the DISPATCHER parameter in the initialization file for the database on host <code dir="ltr">sales1-server</code> as follows:</p>
<pre dir="ltr">ALTER SYSTEM SET DISPATCHERS=&#34;(PROTOCOL=tcp)(LISTENER=listeners_sales2)&#34;;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
To statically update the REMOTE_LISTENER initialization parameter, use a text editor to de-register the information with the remote listener which it had previously registered information.</div>
</li>
<li>
<p>Resolve the listener name alias for the remote listener through a <code dir="ltr">tnsnames.ora</code> file on the database host. For example:</p>
<pre dir="ltr">listener_sales2= 
 (DESCRIPTION= 
   (ADDRESS=(PROTOCOL=tcp)(HOST=sales2-server)(PORT=1521)))
</pre></li>
</ol>
</div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#i490439">&#34;Configuring a Naming Method&#34;</a></p>
</li>
<li>
<p><a href="#i467654">&#34;Configuring Listening Protocol Addresses&#34;</a></p>
</li>
<li>
<p><a class="olink REFRN10183" href="../REFRN/GUID-FEE2E8B5-CE02-4158-A6B4-030E59316756.htm#REFRN10183"><span class="italic">Oracle Database Reference</span></a> to learn about the REMOTE_LISTENER initialization parameter</p>
</li>
<li>
<p><a class="olink RACAD" href="../RACAD/toc.htm"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> to learn how to configure remote listeners (also called SCAN listeners) in an Oracle RAC environment</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDCBFGE"></a>
<div id="NETAG1470" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Registering Information with All Listeners in a Network</h3>
<p>A network may contain multiple local and remote listeners. By default, all listeners are cross-registered with each other. By specifying a set of listeners in the LISTENER_NETWORKS initialization parameter, you can designate a subset of local listeners with a subset of remote listeners. Listeners specified by the LISTENER_NETWORKS parameter should not be specified by the LOCAL_LISTENER and REMOTE_LISTENER parameters.</p>
<p>The syntax of LISTENER_NETWORKS parameter is as follows:</p>
<pre dir="ltr"><a id="sthref573"></a>LISTENER_NETWORKS = &#39;((NAME=<span class="italic">network_name</span>)
                      (LOCAL_LISTENER=[&#34;]<span class="italic">listener_address</span>[,...][&#34;])
                      [(REMOTE_LISTENER=[&#34;]<span class="italic">listener_address</span>[,...][&#34;])])&#39;
</pre>
<p>In the preceding syntax, <span class="italic">listener_address</span> is resolved according to the rules of LOCAL_LISTENER and REMOTE_LISTENER.</p>
<div id="NETAG1520" class="example">
<p class="titleinexample"><a id="sthref574"></a>Example 9-3 Using Two Networks on a Subnet</p>
<p>Assume there are two distinct networks, <code dir="ltr">network1</code> and <code dir="ltr">network2</code>. On <code dir="ltr">network1</code>, there is a local listener named <code dir="ltr">local1</code>, and a remote listener named <code dir="ltr">remote1</code>. On <code dir="ltr">network2</code>, there is a local listener named <code dir="ltr">local2</code>, and a remote listener named <code dir="ltr">remote2</code>. The following syntax sets up registration so that the listeners only redirect connections to listeners on the same network.</p>
<pre dir="ltr">LISTENER_NETWORKS = 
    &#39;((NAME=network1) (LOCAL_LISTENER=local1) (REMOTE_LISTENER=remote1))&#39;,
    &#39;((NAME=network2) (LOCAL_LISTENER=local2) (REMOTE_LISTENER=remote2))&#39;
</pre>
<p>In the preceding example, <code dir="ltr">local1</code> is registered only with <code dir="ltr">remote1</code>, and <code dir="ltr">remote1</code> only redirects connections to <code dir="ltr">local1</code>. The listener <code dir="ltr">local2</code> is registered only with <code dir="ltr">remote2</code>, and <code dir="ltr">remote2</code> only redirects connections to <code dir="ltr">local2</code>.</p>
</div>
<!-- class="example" -->
<div id="NETAG1521" class="example">
<p class="titleinexample"><a id="sthref575"></a>Example 9-4 Configuring Multiple Listeners</p>
<p>Assume that multiple listeners are listening on a network named <code dir="ltr">sales-network</code>. The following conditions are true:</p>
<ul>
<li>
<p>A database configured for dedicated server connections resides on host <code dir="ltr">sales1-server</code>. It is the only database in the network.</p>
</li>
<li>
<p>A local listener resides on <code dir="ltr">sales1-server</code> and listens on nondefault port 1421.</p>
</li>
<li>
<p>A remote listener named resides on host <code dir="ltr">sales2-server</code> and listens on port 1521.</p>
</li>
<li>
<p>Another remote listener resides on host <code dir="ltr">sales3-server</code> and listens on port 1521.</p>
</li>
</ul>
<p>The following procedure describes how to register information with all listeners in a dedicated server environment:</p>
<ol>
<li>
<p>On the hosts where the remote listeners reside (in this example, <code dir="ltr">sales2-server</code> and <code dir="ltr">sales3-server</code>), configure the <code dir="ltr">listener.ora</code> file with the protocol addresses of the remote listener.</p>
</li>
<li>
<p>On the database to which you want requests to be redirected, set the REMOTE_LISTENER parameter in the database initialization parameter file to the alias of the remote listeners, and the LOCAL_LISTENER parameter to the alias of the local listener.</p>
<p>Set the parameters in the initialization file for the database on host <code dir="ltr">sales1-server</code> as follows:</p>
<pre dir="ltr">REMOTE_LISTENER=&#34;listener_sales2,listener_sales3&#34;
LOCAL_LISTENER=listener_sales1
</pre></li>
<li>
<p>Resolve the listener name alias for the LOCAL_LISTENER and REMOTE_LISTENER setting through a <code dir="ltr">tnsnames.ora</code> file on the database host.</p>
<p>In the <code dir="ltr">tnsnames.ora</code> on <code dir="ltr">sales1-server</code>, resolve the local listener alias and remote listener aliases <code dir="ltr">listener_sales1</code>, <code dir="ltr">listener_sales2</code>, and <code dir="ltr">listener_sales3</code> as follows:</p>
<pre dir="ltr">listener_sales1=
 (DESCRIPTION=
  (ADDRESS=(PROTOCOL=TCP)(HOST=sales1-server)(PORT=1421)))

listener_sales2=
 (DESCRIPTION=
  (ADDRESS=(PROTOCOL=TCP)(HOST=sales2-server)(PORT=1521)))

listener_sales3=
 (DESCRIPTION=
  (ADDRESS=(PROTOCOL=TCP)(HOST=sales3-server)(PORT=1521)))

listener_sales_local= 
 (DESCRIPTION= 
  (ADDRESS=(PROTOCOL=tcp)(HOST=salesl-server)(PORT=1421)))

listener_sales_remote= 
(DESCRIPTION_LIST=
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=sales2-server)(PORT=1521))) 
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=sales3-server)(PORT=1521))))
</pre></li>
</ol>
</div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#i490439">&#34;Configuring a Naming Method&#34;</a></p>
</li>
<li>
<p><a href="#i467654">&#34;Configuring Listening Protocol Addresses&#34;</a></p>
</li>
<li>
<p><a class="olink REFRN10183" href="../REFRN/GUID-FEE2E8B5-CE02-4158-A6B4-030E59316756.htm#REFRN10183"><span class="italic">Oracle Database Reference</span></a> for additional information about the REMOTE_LISTENER initialization parameter</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="i490439"></a>
<div id="NETAG303" class="sect2">
<h3 class="sect2">Configuring a Naming Method</h3>
<p>The listener name alias specified for the LOCAL_LISTENER or REMOTE_LISTENER initialization parameters, or <code dir="ltr">LISTENER</code> attribute can be resolved using a <code dir="ltr">tnsnames.ora</code> file. For example, a listener can be defined in the <code dir="ltr">init.ora</code> file as the following:</p>
<pre dir="ltr">LOCAL_LISTENER = (ADDRESS=(PROTOCOL=tcp)(HOST=sales-server)(PORT=1421)) 
</pre>
<p>To use an alias for the listener, it can be defined in the <code dir="ltr">init.ora</code> and the <code dir="ltr">tnsnames.ora</code> files as follows:</p>
<ul>
<li>
<p>In the <code dir="ltr">init.ora</code> file:</p>
<pre dir="ltr">LOCAL_LISTENER = listener_sales1 
</pre></li>
<li>
<p>In the <code dir="ltr">tnsnames.ora</code> file:</p>
<pre dir="ltr">listener_sales1 = (ADDRESS=(PROTOCOL=tcp)(HOST=sales-server)(PORT=1421)) 
</pre></li>
</ul>
<p>The CONNECT_DATA information should not be included in the network service entry in the <code dir="ltr">tnsnames.ora</code> file. However, Oracle Enterprise Manager Cloud Control and Oracle Net Manager cannot configure a <code dir="ltr">tnsnames.ora</code> file without the CONNECT_DATA information. To use listener name aliases, Oracle recommends you modify the <code dir="ltr">tnsnames.ora</code> file using a text editor.</p>
<div class="infobox-note">
<p class="notep1">Notes:</p>
<ul>
<li>
<p>Multiple addresses are supported, but connect-time failover and client load balancing features are not supported.</p>
</li>
<li>
<p>If the listener alias specified in the LOCAL_LISTENER parameter is invalid or not resolved, then the LREG process does not allow the database to start. The following errors occur:</p>
<pre dir="ltr">ORA-00119: invalid specification for system parameter 
           LOCAL_LISTENER
ORA-00132: syntax error or unresolved network name &#39;%s&#39;
</pre></li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="advcfg.htm#i476388">Chapter 13, &#34;Enabling Advanced Features of Oracle Net Services&#34;</a> for additional information about multiple address configuration</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i486599"></a>
<div id="NETAG293" class="sect1">
<h2 class="sect1">Configuring Oracle Net Listener During Installation<a id="sthref576"></a><a id="sthref577"></a></h2>
<p>Oracle Universal Installer launches <a href="glossary.htm#BGBIFGDG"><span class="xrefglossterm">Oracle Net Configuration Assistant</span></a> during installation. Oracle Net Configuration Assistant configures the listening protocol address and service information for Oracle Database.</p>
<p>During an Enterprise Edition or Standard Edition installation on the database server, Oracle Net Configuration Assistant automatically configures a listener with a name of <code dir="ltr">LISTENER</code> that has a TCP/IP listening protocol address for Oracle Database. During a Custom installation, Oracle Net Configuration Assistant prompts for the listener name and protocol address.</p>
<p>A listening IPC protocol address for <a href="glossary.htm#BGBFGBHI"><span class="xrefglossterm">external procedure</span></a> calls is automatically configured, regardless of the installation type. <a id="sthref578"></a>Oracle Net Configuration Assistant also automatically configures service information for the external procedures in the <code dir="ltr">listener.ora</code> file.</p>
<p>If you are using the IPC protocol, then you can improve performance by specifying the maximum number of concurrent IPC connection requests to match your expected connection requests.</p>
</div>
<!-- class="sect1" -->
<a id="i483130"></a>
<div id="NETAG294" class="sect1">
<h2 class="sect1">Customizing Oracle Net Listener Configuration</h2>
<p>If the default or installed configuration is not adequate for a particular environment, then you can use <a href="glossary.htm#BGBFBIJD"><span class="xrefglossterm">Oracle Net Manager</span></a> to customize the <code dir="ltr">listener.ora</code> configuration.</p>
<p>This section contains the following configuration topics:</p>
<ul>
<li>
<p><a href="#i467654">Configuring Listening Protocol Addresses</a></p>
</li>
<li>
<p><a href="#CHDEBAJE">Handling Large Volumes of Concurrent Connection Requests</a></p>
</li>
<li>
<p><a href="#CHDIDGID">Managing Oracle Net Listener Security</a></p>
</li>
</ul>
<a id="i467654"></a>
<div id="NETAG295" class="sect2">
<h3 class="sect2">Configuring Listening Protocol Addresses<a id="sthref579"></a><a id="sthref580"></a><a id="sthref581"></a></h3>
<p>Oracle Enterprise Manager Cloud Control and Oracle Net Manager can be used to configure protocol support for the listener.</p>
<p>The Oracle Net Listener endpoint address configuration accepts both IPv6 addresses and host names that resolve to IPv6 addresses, as explained in <a href="layers.htm#CACGCEAG">&#34;IPv6 Interface and Address Configurations&#34;</a>. This technique can create listening endpoints that service IPv6 clients.</p>
<div id="NETAG1518" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref582"></a>
<h4 class="sect3">Configuring Listening Protocol Addresses Using Oracle Enterprise Manager Cloud Control</h4>
<p>The following procedure describes how to configure protocol addresses for the listener using Oracle Enterprise Manager Cloud Control:</p>
<ol>
<li>
<p>Access the Net Services Administration page in Oracle Enterprise Manager Cloud Control.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="admintools.htm#BABFCHHH">&#34;Accessing the Net Services Administration Page&#34;</a></div>
</li>
<li>
<p>Click <span class="bold">Edit</span>. You may be prompted to log in to the database server.</p>
<p>The Edit Listener page appears.</p>
</li>
<li id="i492917">
<p>In the Addresses section, configure protocol support:</p>
<ol>
<li>
<p>Click <span class="bold">Add</span>.</p>
<p>The Add Address page appears.</p>
</li>
<li>
<p>From the Protocol list, select the protocol on which the listener is configured to listen.</p>
<p>For TCP/IP, if the computer has more than one IP address and you want the listener to listen on all available IP addresses, then select <span class="bold">TCP/IP</span> or <span class="bold">TCP/IP with SSL</span> and enter the host name of the computer in the Host field.</p>
</li>
<li>
<p>In Port, enter the port number.</p>
<p>When configuring the listener to listen on TCP/IP, enter the default port of <a id="sthref583"></a>1521. Otherwise, you must configure the LOCAL_LISTENER parameter<a id="sthref584"></a><a id="sthref585"></a> in the initialization parameter file and the non-default port number must be specified for use by any naming method.</p>
</li>
<li>
<p>In Host, enter the host address.</p>
</li>
<li>
<p>(Optional) In the Advanced Parameters section, specify the I/O buffer space limit for send and receive operations of sessions in the Total Send Buffer Size and Total Receive Buffer Size fields.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The protocol address is added to the Addresses section.</p>
</li>
</ol>
</li>
<li>
<p>Repeat Step <a href="#i492917">3</a> for additional protocols.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink NETRF004" href="../NETRF/protocoladd.htm#NETRF004"><span class="italic">Oracle Database Net Services Reference</span></a> for additional information about protocol addresses and TCP/IP <a id="sthref586"></a><a id="sthref587"></a>privileged ports</p>
</li>
<li>
<p><a href="performance.htm#i1007572">&#34;Configuring I/O Buffer Space&#34;</a> for additional information</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<div id="NETAG1519" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref588"></a>
<h4 class="sect3">Configuring Listening Protocol Addresses Using Oracle Net Manager</h4>
<p>The following procedure describes how to configure protocol addresses for the listener using Oracle Net Manager:</p>
<ol>
<li>
<p>Start Oracle Net Manager.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="admintools.htm#i483238">&#34;Using Oracle Net Manager to Configure Oracle Net Services&#34;</a></div>
</li>
<li>
<p>In the navigator pane, expand <span class="bold">Local</span>, and then select <span class="bold">Listeners</span>.</p>
</li>
<li>
<p>Select the listener.</p>
</li>
<li>
<p>From the list in the right pane, select <span class="bold">Listener Locations</span>.</p>
</li>
<li>
<p>Select the protocol from the Protocol list.</p>
</li>
<li>
<p>Enter the host name for the listener in the Host field.</p>
</li>
<li>
<p>Enter the port number in the Port field.</p>
</li>
<li>
<p>If you want to set send and receive buffer sizes, then click <span class="bold">Show Advanced</span>, and then enter the sizes in the appropriate fields.</p>
</li>
<li>
<p>Select <span class="bold">Save Network Configuration</span> from the File menu to save the changes.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDEBAJE"></a>
<div id="NETAG0101" class="sect2">
<h3 class="sect2">Handling Large Volumes of Concurrent Connection Requests<a id="sthref589"></a><a id="sthref590"></a><a id="sthref591"></a><a id="sthref592"></a><a id="sthref593"></a></h3>
<p><a id="sthref594"></a><a id="sthref595"></a><a id="sthref596"></a>If you expect the listener to handle large volumes of concurrent connection requests, then you can specify a listener queue size for its TCP/IP or IPC listening endpoints.</p>
<p>To specify the listener queue size, do the following:</p>
<ul>
<li>
<p>Specify the <a id="sthref597"></a>QUEUESIZE parameter at the end of the protocol address with its value set to the expected number of concurrent requests.</p>
<p>The following example sets the queue size to 20:</p>
<pre dir="ltr"><a id="CHDBBFAE"></a>
LISTENER=
 (DESCRIPTION=
  (ADDRESS=(PROTOCOL=tcp)(HOST=sales-server)(PORT=1521)<span class="bold">(QUEUESIZE=20)</span>))
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The default number of concurrent connection requests is operating system-specific. The defaults for TCP/IP on the Linux operating system and Microsoft Windows follow:
<ul>
<li>
<p>Linux operating system: 128</p>
</li>
<li>
<p>Microsoft Windows XP Professional SP2: 10</p>
</li>
<li>
<p>Microsoft Windows Server Enterprise Edition: 200</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDIDGID"></a>
<div id="NETAG0102" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Managing Oracle Net Listener Security</h3>
<p>By default, Oracle Net Listener permits only local administration for security reasons. As a policy, the listener can be administered only by the user who started it. This is enforced through local operating system authentication. For example, if <code dir="ltr">user1</code> starts the listener, then only <code dir="ltr">user1</code> can administer it. Any other user trying to administer the listener gets an error. The super user is the only exception.</p>
<p>Oracle recommends that you perform listener administration in the default mode (secure by means of local operating system authentication), and access the system remotely using a remote login. Oracle Enterprise Manager Cloud Control can also be used for remote administration.</p>
<div id="NETAG1588" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref598"></a>
<h4 class="sect3">Specifying Valid Nodes and Subnets</h4>
<p>Listener registration should be restricted to valid nodes and subnets. Valid nodes and subnets can be specified for registration, and excluded nodes can also be specified for registration. By default, every incoming connection for registration at the listener is subjected to IP-based filtering. A connection is only allowed if it originates from the local machine. If the other nodes and subnets are specified for registration, then the local machine and the ones specified are allowed. The following parameters can be set in the <code dir="ltr">listener.ora</code> file to specify valid and restricted nodes and subnets:</p>
<ul>
<li>
<p>REGISTRATION_INVITED_NODES_<span class="italic">listener_name</span>: Specifies the nodes that can register with the listener. The list can be host names, or CIDR notation for IPv4 and IPv6 addresses. Presence of a host name in the list results in all IP addresses mapped to it being invited.</p>
</li>
<li>
<p>REGISTRATION_EXCLUDED_NODES_<span class="italic">listener_name</span>: Specifies the nodes that cannot register with the listener. Nodes not specified on the list are allowed to register with the listener.</p>
</li>
</ul>
<p>If both parameters are set, then REGISTRATION_EXCLUDED_NODES_<span class="italic">listener_name</span> is ignored.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETRF1996" href="../NETRF/listener.htm#NETRF1996"><span class="italic">Oracle Database Net Services Reference</span></a> for additional information about valid node registration checking.</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i483142"></a>
<div id="NETAG304" class="sect1">
<h2 class="sect1">Administering the Listener</h2>
<p>After the listener is configured, you can administer it with the Listener Control utility, Oracle Enterprise Manager Cloud Control, and the Server Control utility (SRVCTL). This section describes some of the administrative tasks for the listener. It contains the following topics:</p>
<ul>
<li>
<p><a href="#i485371">Starting and Stopping a Listener</a></p>
</li>
<li>
<p><a href="#CHDBFIDD">Managing a Listener in an Oracle Restart Configuration</a></p>
</li>
<li>
<p><a href="#i493526">Determining the Current Status of a Listener</a></p>
</li>
<li>
<p><a href="#i486814">Monitoring Services of a Listener</a></p>
</li>
<li>
<p><a href="#i485576">Monitoring Listener Log Files</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<ul>
<li>
<p><a class="olink NETRF001" href="../NETRF/lsnrctl.htm#NETRF001"><span class="italic">Oracle Database Net Services Reference</span></a> for a complete list of the Listener Control utility commands</p>
</li>
<li>
<p>Oracle Enterprise Manager Cloud Control online help</p>
</li>
</ul>
</div>
<a id="i485371"></a>
<div id="NETAG305" class="sect2">
<h3 class="sect2">Starting and Stopping a Listener</h3>
<p>To stop or start a listener, use one of the following methods:</p>
<ul>
<li>
<p><a href="#CHDBJAEG">Starting or Stopping a Listener Using the Listener Control Utility</a></p>
</li>
<li>
<p><a href="#CHDJDEHB">Starting or Stopping a Listener Using Oracle Enterprise Manager Cloud Control</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
<a id="sthref599"></a><a id="sthref600"></a>You can configure the listener to start automatically whenever the computer is running or is restarted. Refer to <a href="#CHDBFIDD">&#34;Managing a Listener in an Oracle Restart Configuration&#34;</a> for additional information.</div>
<a id="CHDBJAEG"></a>
<div id="NETAG1522" class="sect3">
<h4 class="sect3">Starting or Stopping a Listener Using the Listener Control Utility</h4>
<p>To start the listener from the command line, enter:</p>
<pre dir="ltr"><a id="sthref601"></a><a id="sthref602"></a>lsnrctl <a id="sthref603"></a>START [<span class="italic">listener_name</span>]
</pre>
<p>In the preceding command, <span class="italic">listener_name</span> is the name of the listener defined in the <code dir="ltr">listener.ora</code> file. It is not necessary to identify the listener if you are using the default listener name <code dir="ltr">LISTENER</code>.</p>
<p>In addition to starting the listener, the Listener Control utility verifies connectivity to the listener.</p>
<p>To stop a listener from the command line, enter:</p>
<pre dir="ltr">lsnrctl <a id="sthref604"></a>STOP [<span class="italic">listener_name</span>]
</pre>
<p>In the preceding command, <span class="italic">listener_name</span> is the name of the listener defined in the <code dir="ltr">listener.ora</code> file. It is not necessary to identify the listener if you are using the default listener name <code dir="ltr">LISTENER</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When using the Oracle Home User, the listener control utility prompts for a password on Microsoft Windows systems. This password is the operating system password for the Oracle Home User. The password prompt is displayed only if the listener service does not exist and needs to be created as part of starting the listener.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NTQRF" href="../NTQRF/toc.htm"><span class="italic">Oracle Database Platform Guide for Microsoft Windows</span></a> for information about the Oracle Home User</div>
</div>
<!-- class="sect3" -->
<a id="CHDJDEHB"></a>
<div id="NETAG1523" class="sect3">
<h4 class="sect3">Starting or Stopping a Listener Using Oracle Enterprise Manager Cloud Control</h4>
<p>The following procedure describes how to start or stop a listener from Oracle Enterprise Manager Cloud Control:</p>
<ol>
<li>
<p>Access the Net Services Administration page in Oracle Enterprise Manager Cloud Control.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="admintools.htm#i491701">&#34;Using Oracle Enterprise Manager Cloud Control to Configure Oracle Net Services&#34;</a></div>
</li>
<li>
<p>Select <span class="bold">Listeners</span> from the Administer list, and then select the Oracle home that contains the location of the configuration files.</p>
</li>
<li>
<p>Click <span class="bold">Go</span>.</p>
<p>The Listeners page appears.</p>
</li>
<li>
<p>Select the listener.</p>
</li>
<li>
<p>From the Actions list, select <span class="bold">Start/Stop</span>.</p>
</li>
<li>
<p>Click <span class="bold">Go</span>.</p>
<p>The Start/Stop page appears.</p>
</li>
<li>
<p>Depending on the current status of the selected listener, select either <span class="bold">Stop</span> or <span class="bold">Start</span>, and then click <span class="bold">OK</span>.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDBFIDD"></a>
<div id="NETAG777" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Managing a Listener in an Oracle Restart Configuration</h3>
<p>The Oracle Restart feature enhances availability for the processes and applications in a single-instance database environment. The Oracle Restart agents monitor the health of added components by periodically running check operations and restarting the components when necessary.</p>
<p>You can add the listener as a component to the Oracle Restart configuration. The listener is then automatically started by Oracle Restart when it fails or is not running. For example, if you restart the database instance after a planned restart of the computer, then Oracle Restart restarts the listener. Server Control (SRVCTL) is a command-line interface that you can use to manage listeners in an Oracle Restart configuration.</p>
<div id="NETAG1581" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref605"></a>
<h4 class="sect3">Viewing Configured Listeners Using the SRVCTL Utility</h4>
<p>To view all configured listeners, use the following command:</p>
<pre dir="ltr">% srvctl config listener
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN12708" href="../ADMIN/restart.htm#ADMIN12708"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> to learn how to configure Oracle Restart and for SRVCTL syntax and semantics</div>
</div>
<!-- class="sect3" -->
<div id="NETAG778" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref606"></a>
<h4 class="sect3">Adding or Removing a Listener Using the SRVCTL Utility</h4>
<p>Adding a listener as an entry to the grid infrastructure enables the agent to monitor the listener. Similarly, removing a listener removes as an entry. Use the <code dir="ltr">srvctl</code> command at the operating system command line as follows:</p>
<ul>
<li>
<p>To add the listener, enter <code dir="ltr">srvctl add listener</code></p>
<p>The following command adds an entry for <code dir="ltr">listener_sales1</code> to the grid infrastructure:</p>
<pre dir="ltr">% srvctl add listener -listener listener_sales1
</pre></li>
<li>
<p>To remove the listener, enter <code dir="ltr">srvctl remove listener</code></p>
<p>The following command removes the entry for <code dir="ltr">listener_sales1</code> from the grid infrastructure:</p>
<pre dir="ltr">% srvctl remove listener -listener listener_sales1
</pre></li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CHDGJJBC"></a>
<div id="NETAG779" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Starting or Stopping a Listener Using the SRVCTL Utility</h4>
<p>The SRVCTL utility enables you to stop and start the listener. If you do not specify the <code dir="ltr">-listener</code> parameter, then the SRVCTL utility starts and stops the default listener.</p>
<ul>
<li>
<p>To start a listener, enter <code dir="ltr">srvctl start listener</code></p>
<p>In the following example, the first command starts the default listener, and the second command starts <code dir="ltr">listener1</code> and <code dir="ltr">listener2</code>:</p>
<pre dir="ltr">% srvctl start listener
% srvctl start listener -listener listener1,listener2
</pre></li>
<li>
<p>To stop a listener, enter <code dir="ltr">srvctl stop listener</code></p>
<p>In the following example, the first command stops the default listener, and the second command stops <code dir="ltr">listener1</code> and <code dir="ltr">listener2</code>:</p>
<pre dir="ltr">% srvctl stop listener
% srvctl stop listener -listener listener1,listener2
</pre></li>
</ul>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i493526"></a>
<div id="NETAG306" class="sect2">
<h3 class="sect2">Determining the Current Status of a Listener</h3>
<p>To show the current status of a listener, use either the <code dir="ltr">STATUS</code> command of the Listener Control utility or Oracle Enterprise Manager Cloud Control. The status output provides basic status information about a listener, a summary of listener configuration settings, the listening protocol addresses, and a summary of services registered with the listener.</p>
<div id="NETAG1471" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref607"></a>
<h4 class="sect3">Showing Status Using Listener Control</h4>
<p><a id="sthref608"></a><a id="sthref609"></a><a id="sthref610"></a>To show the status the listener from the command line, enter the following command:</p>
<pre dir="ltr">lsnrctl <a id="sthref611"></a>STATUS [<span class="italic">listener_name</span>]
</pre>
<p>In the preceding command, <span class="italic">listener_name</span> is the name of the listener defined in the <code dir="ltr">listener.ora</code> file. It is not necessary to identify the listener if you are using the default listener name <code dir="ltr">LISTENER</code>.</p>
<p><a href="#CEGEHHDJ">Example 9-5</a> shows example output of the <code dir="ltr">STATUS</code> command.</p>
<div id="NETAG1162" class="example">
<p class="titleinexample"><a id="CEGEHHDJ"></a><a id="i488315"></a>Example 9-5 Listener Control Utility&#39;s STATUS Command Output</p>
<pre dir="ltr">Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=net)))
STATUS of the LISTENER
------------------------
Alias                     LISTENER
Version                   TNSLSNR for Linux: Version 12.1.0.1.0
Start Date                15-NOV-2012 20:22:00
Uptime                    65 days 10 hr. 5 min. 22 sec
Trace Level               support
Security                  OFF
Listener Parameter File   /oracle/admin/listener.ora
Listener Log File         /oracle/network/log/listener.log
Listener Trace File       /oracle/network/trace/listener.trc
Listening Endpoints Summary...
  (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=net)))
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=sales-server)(PORT=1521)))
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcps)(HOST=sales-server)(PORT=2484)))
 
Services Summary...
Service &#34;sales.us.example.com&#34; has 1 instance(s).
  Instance &#34;sales&#34;, status READY, has 3 handler(s) for this service...
Service &#34;hr.us.example.com&#34; has 1 instance(s).
  Instance &#34;hr&#34;, status READY, has 2 handler(s) for this service...
The command completed successfully
</pre></div>
<!-- class="example" -->
<p>The <code dir="ltr">STATUS</code> command output includes the sections described in <a href="#g511554">Table 9-1</a>.</p>
<div id="NETAG1161" class="tblruleformal">
<p class="titleintable"><a id="sthref612"></a><a id="g511554"></a>Table 9-1 Listener Control Utility STATUS Command</p>
<table class="cellalignment6129" title="Listener Control Utility STATUS Command" summary="Listener Control Utility STATUS Command" dir="ltr">
<thead>
<tr class="cellalignment6123">
<th class="cellalignment6130" id="r1c1-t28">Output Section</th>
<th class="cellalignment6130" id="r1c2-t28">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r2c1-t28" headers="r1c1-t28">
<p>STATUS of the LISTENER</p>
</td>
<td class="cellalignment6131" headers="r2c1-t28 r1c2-t28">
<p>Status of the listener, including the following:</p>
<ul>
<li>
<p>Alias of the listener</p>
</li>
<li>
<p>Version of listener</p>
</li>
<li>
<p>Start time and up time</p>
</li>
<li>
<p>Trace level</p>
</li>
<li>
<p><code dir="ltr">listener.ora</code> file being used</p>
</li>
<li>
<p>Logging and tracing configuration settings</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r3c1-t28" headers="r1c1-t28">
<p>Listening Endpoints Summary</p>
</td>
<td class="cellalignment6131" headers="r3c1-t28 r1c2-t28">
<p>The protocol addresses the listener is configured to listen on.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r4c1-t28" headers="r1c1-t28">
<p>Services Summary</p>
</td>
<td class="cellalignment6131" headers="r4c1-t28 r1c2-t28">
<p>A summary of the services registered with the listener and the service handlers allocated to each service.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r5c1-t28" headers="r1c1-t28">
<p>Service</p>
</td>
<td class="cellalignment6131" headers="r5c1-t28 r1c2-t28">
<p>The registered service.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r6c1-t28" headers="r1c1-t28">
<p>Instance</p>
</td>
<td class="cellalignment6131" headers="r6c1-t28 r1c2-t28">
<p>The name of the instance associated with the service.</p>
<p>The status field indicates if the instance can accept connections.</p>
<ul>
<li>
<p><code dir="ltr">READY</code> means that the instance can accept connections.</p>
</li>
<li>
<p><code dir="ltr">BLOCKED</code> means that the instance cannot accept connections.</p>
</li>
<li>
<p><code dir="ltr">READY/SECONDARY</code> means that this is a secondary instance in an Oracle Real Application Clusters primary/secondary configuration, and is ready to accept connections.</p>
</li>
<li>
<p><code dir="ltr">RESTRICTED</code> means the instance is in restricted mode. The listener blocks all connections to this instance.</p>
</li>
<li>
<p><code dir="ltr">UNKNOWN</code> means that the instance is registered statically in the <code dir="ltr">listener.ora</code> file rather than dynamically with service registration. Therefore, the status is not known.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblruleformal" --></div>
<!-- class="sect3" -->
<div id="NETAG1472" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref613"></a>
<h4 class="sect3">Showing Status Using Oracle Enterprise Manager Cloud Control</h4>
<p>The following procedure describes how to show the status of a listener using Oracle Enterprise Manager Cloud Control:</p>
<ol>
<li>
<p>Access the Net Services Administration page in Oracle Enterprise Manager Cloud Control.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="admintools.htm#i491701">&#34;Using Oracle Enterprise Manager Cloud Control to Configure Oracle Net Services&#34;</a></div>
</li>
<li>
<p>Select <span class="bold">Listeners</span> from the Administer list, and then select the Oracle home that contains the location of the configuration files.</p>
</li>
<li>
<p>Click <span class="bold">Go</span>. You may be prompted to log in to the database server.</p>
<p>The Listeners page appears.</p>
</li>
<li>
<p>Select a listener.</p>
</li>
<li>
<p>From the Actions list, select <span class="bold">Show Listener Control Status</span>.</p>
</li>
<li>
<p>Click <span class="bold">Go</span>.</p>
<p>The Listener Control Status page appears.</p>
</li>
<li>
<p>After viewing the content, click the listener link at the top of the page.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i486814"></a>
<div id="NETAG307" class="sect2">
<h3 class="sect2">Monitoring Services of a Listener</h3>
<p>The <a id="sthref614"></a><a id="sthref615"></a><a id="sthref616"></a><code dir="ltr">SERVICES</code> command of the Listener Control utility provides detailed information about the services and instances registered with a listener and the service handlers allocated to each instance. To show information about the services and instances from the command line, enter:</p>
<pre dir="ltr">lsnrctl <a id="sthref617"></a>SERVICES [<span class="italic">listener_name</span>]
</pre>
<p><a href="#CEGJCAIJ">Example 9-6</a> shows example output of the <code dir="ltr">SERVICES</code> command.</p>
<div id="NETAG1164" class="example">
<p class="titleinexample"><a id="CEGJCAIJ"></a><a id="i488321"></a>Example 9-6 Listener Control Utility&#39;s SERVICES Command Output</p>
<pre dir="ltr">Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=net)))
Services Summary...
Service &#34;sales.us.example.com&#34; has 1 instance(s).
  Instance &#34;sales&#34;, status READY, has 3 handler(s) for this service...
    Handler(s):
      &#34;DEDICATED&#34; established:0 refused:0 state:ready
         LOCAL SERVER
      &#34;D000&#34; established:0 refused:0 current:0 max:10000 state:ready
         DISPATCHER &lt;machine: sales-server, pid: 1689&gt;
         (ADDRESS=(PROTOCOL=tcp)(HOST=sales-server)(PORT=52414))
      &#34;D001&#34; established:0 refused:0 current:0 max:10000 state:ready
         DISPATCHER &lt;machine: sales-server, pid: 1691&gt;
         (ADDRESS=(PROTOCOL=tcp)(HOST=sales-server)(PORT=52415))
Service &#34;hr.us.example.com&#34; has 1 instance(s).
  Instance &#34;hr&#34;, status READY, has 2 handler(s) for this service...
    Handler(s):
      &#34;DEDICATED&#34; established:0 refused:0 state:ready
         LOCAL SERVER
      &#34;D000&#34; established:0 refused:0 current:0 max:10000 state:ready
         DISPATCHER &lt;machine: sales-server, pid: 11326&gt;
         (ADDRESS=(PROTOCOL=tcp)(HOST=sales-server)(PORT=58361))
The command completed successfully
</pre></div>
<!-- class="example" -->
<p>This output shows that two database services, <code dir="ltr">sales.us.example.com</code> and <code dir="ltr">hr.us.example.com</code>, are registered with the listener.</p>
<p>Client connection requests to <code dir="ltr">sales.us.example.com</code> are handled by two dispatchers named <code dir="ltr">D000</code> and <code dir="ltr">D001</code> and one dedicated server. All handlers have a status of <code dir="ltr">ready</code>, indicating that they are ready to receive connections.</p>
<p>Client connection requests to <code dir="ltr">hr.us.example.com</code> are handled by one dispatcher named <code dir="ltr">D001</code> and one dedicated server.</p>
<p>The <code dir="ltr">SERVICES</code> command generates output with the following information as described in <a href="#g513213">Table 9-2</a>.</p>
<div id="NETAG1163" class="tblruleformal">
<p class="titleintable"><a id="sthref618"></a><a id="g513213"></a>Table 9-2 Listener Control Utility SERVICES Command</p>
<table class="cellalignment6129" title="Listener Control Utility SERVICES Command" summary="Listener Control Utility SERVICES Command" dir="ltr">
<thead>
<tr class="cellalignment6123">
<th class="cellalignment6130" id="r1c1-t30">Output Section</th>
<th class="cellalignment6130" id="r1c2-t30">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r2c1-t30" headers="r1c1-t30">
<p>Services</p>
</td>
<td class="cellalignment6131" headers="r2c1-t30 r1c2-t30">
<p>The registered service.</p>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r3c1-t30" headers="r1c1-t30">
<p>Instance</p>
</td>
<td class="cellalignment6131" headers="r3c1-t30 r1c2-t30">
<p>The name of the instance associated with the service</p>
<p>The status field indicates if the instance can accept connections.</p>
<ul>
<li>
<p><code dir="ltr">READY</code> means the instance can accept connections.</p>
</li>
<li>
<p><code dir="ltr">BLOCKED</code> means the instance cannot accept connections.</p>
</li>
<li>
<p><code dir="ltr">READY/SECONDARY</code> means the is a secondary instance in an Oracle Real Application Clusters primary/secondary configuration and is ready to accept connections.</p>
</li>
<li>
<p><code dir="ltr">RESTRICTED</code> means the instance is in restricted mode. The listener blocks all connections to this instance.</p>
</li>
<li>
<p><code dir="ltr">UNKNOWN</code> means the instance is registered statically in the <code dir="ltr">listener.ora</code> file rather than dynamically with service registration. Therefore, the status is non known.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment6123">
<td class="cellalignment6131" id="r4c1-t30" headers="r1c1-t30">
<p>Handlers</p>
</td>
<td class="cellalignment6131" headers="r4c1-t30 r1c2-t30">
<p>The name of the service handler. Dispatchers are named <code dir="ltr">D000</code> through <code dir="ltr">D999</code>. Dedicated servers have the name of <code dir="ltr">DEDICATED</code>.</p>
<p>This section also identifies the following about the service handler:</p>
<ul>
<li>
<p><code dir="ltr">established</code>: The number of client connections this service handler has established.</p>
</li>
<li>
<p><code dir="ltr">refused</code>: The number of client connections it has refused.</p>
</li>
<li>
<p><code dir="ltr">current</code>: The number of client connections it is handling, that is, its current load.</p>
</li>
<li>
<p><code dir="ltr">max</code>: The maximum number of connections for the service handler, that is, its maximum load.</p>
</li>
<li>
<p><code dir="ltr">state</code>: The state of the handler:</p>
<p>- <code dir="ltr">READY</code> means the service handler can accept new connections.</p>
<p>- <code dir="ltr">BLOCKED</code> means the service handler cannot accept new connections.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblruleformal" --></div>
<!-- class="sect2" -->
<a id="i485576"></a>
<div id="NETAG308" class="sect2">
<h3 class="sect2">Monitoring Listener Log Files<a id="sthref619"></a><a id="sthref620"></a><a id="sthref621"></a></h3>
<p>When you notice any of the following conditions, review the listener log file for error information:</p>
<ul>
<li>
<p>Long connection establishment times</p>
</li>
<li>
<p>Connectivity problems and refusals</p>
</li>
<li>
<p>Unexpected shutdown of the listener that could indicate a denial-of-service attack<a id="sthref622"></a><a id="sthref623"></a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="trouble.htm#i448512">&#34;Analyzing Listener Log Files&#34;</a></div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment6122">
<tr>
<td class="cellalignment6131">
<table class="cellalignment6127">
<tr>
<td class="cellalignment6126"><a href="naming.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment6126"><a href="cman.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment6133">
<table class="cellalignment6125">
<tr>
<td class="cellalignment6126"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment6126"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment6126"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment6126"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment6126"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment6126"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>