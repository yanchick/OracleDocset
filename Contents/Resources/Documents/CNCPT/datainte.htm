<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-3922"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Data%20Integrity"></a><title>Data Integrity</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="This chapter explains how integrity constraints enforce the business rules associated with a database and prevent the entry of invalid information into tables."/>
<meta name="keywords" content="integrity constraints, tables, data integrity, enforcing, advantages, business rules, enforcing, foreign key constraints, constraints, integrity, foreign key, primary key constraints, primary key, unique key constraints, unique key, NOT NULL constraints, NOT NULL, keys, values, check constraints, check, REF constraints, REF, nulls, prohibiting, columns, prohibiting nulls in, composite keys, NOT NULL constraints and, unique, deferrable, primary keys, constraints, CREATE UNIQUE INDEX statement, sequences, surrogate keys, surrogate, natural, natural keys, indexes, enforced with indexes, enforcing integrity constraints, foreign keys, composite, foreign, parent, referenced, self-referential, self-referential integrity constraints, cascading deletions, deletions, cascading, changes in parent key values, updating parent key tables, referential, update no action constraint, DML (data manipulation language), referential actions, indexing, state of, validating, enabling and disabling, nondeferrable, referential integrity, examples of, mechanisms of enforcement, self-referential constraints, default values, effect of constraints, updates of foreign and parent keys, views, constraints indirectly affect, synonyms"/>
<meta name="dcterms.created" content="2017-07-10T11:33:29Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Concepts"/>
<meta name="dcterms.identifier" content="E41396-15"/>
<meta name="dcterms.isVersionOf" content="CNCPT"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1993, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="schemaob.htm" title="Previous" type="text/html"/>
<link rel="Next" href="datadict.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41396-15.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-6A89FF39-AD42-4399-BD1B-E51ECEE50B4E"></a> <span id="PAGE" style="display:none;">10/34</span> <!-- End Header -->
<a id="CNCPT021"></a>
<h1 id="CNCPT-GUID-6A89FF39-AD42-4399-BD1B-E51ECEE50B4E" class="sect1"><span class="enumeration_chapter">5</span> Data Integrity</h1>
<div>
<p>This chapter explains how integrity constraints enforce the business rules associated with a database and prevent the entry of invalid information into tables.</p>
<p>This chapter contains the following sections:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="datainte.htm#GUID-A8893CD7-8B19-42AA-8550-9713071FA679" title="It is important that data maintain data integrity, which is adherence to business rules determined by the database administrator or application developer.">Introduction to Data Integrity</a></p>
</li>
<li>
<p><a href="datainte.htm#GUID-1C9665AD-A444-4AFB-984F-6385FCBEA64E" title="Oracle Database enables you to apply constraints both at the table and column level.">Types of Integrity Constraints</a></p>
</li>
<li>
<p><a href="datainte.htm#GUID-97D4BB23-FD4B-4FB6-BE21-E5F8C43BD94F" title="As part of constraint definition, you can specify how and when Oracle Database should enforce the constraint, thereby determining the constraint state.">States of Integrity Constraints</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-6A89FF39-AD42-4399-BD1B-E51ECEE50B4E__GUID-05504E74-A476-4D7B-A386-2B9EFF90156A">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="tablecls.htm#GUID-F845B1A7-71E3-4312-B66D-BC16C198ECE5" title="A table is the basic unit of data organization in an Oracle database.">Overview of Tables</a>&#34;</span></p>
</div>
</div>
<a id="CNCPT122"></a>
<div class="props_rev_3"><a id="GUID-A8893CD7-8B19-42AA-8550-9713071FA679"></a>
<h2 id="CNCPT-GUID-A8893CD7-8B19-42AA-8550-9713071FA679" class="sect2">Introduction to Data Integrity</h2>
<div>
<p>It is important that data maintain <span class="bold">data integrity</span>, which is adherence to business rules determined by the database administrator or application developer.</p>
<p>Business rules specify conditions and relationships that must always be true or must always be false. For example, each company defines its own policies about salaries, employee numbers, inventory tracking, and so on.</p>
</div>
<a id="CNCPT33333"></a>
<div class="props_rev_3"><a id="GUID-724DD096-39F4-4A0B-9C76-5360D46C1686"></a>
<h3 id="CNCPT-GUID-724DD096-39F4-4A0B-9C76-5360D46C1686" class="sect3">Techniques for Guaranteeing Data Integrity</h3>
<div>
<p>When designing a database application, developers have various options for guaranteeing the integrity of data stored in the database.</p>
<p>These options include:</p>
<ul style="list-style-type: disc;">
<li>
<p>Enforcing business rules with triggered stored database procedures, as described in <span class="q">&#34;<a href="srvrside.htm#GUID-40297ADF-0968-42F8-B8B9-84AD6ADCBE63" title="A database trigger is a compiled stored program unit, written in either PL/SQL or Java, that Oracle Database invokes (&#34;fires&#34;) automatically in certain situations.">Overview of Triggers</a>&#34;</span></p>
</li>
<li>
<p>Using stored procedures to completely control access to data, as described in <span class="q">&#34;<a href="srvrside.htm#GUID-6B5D98B7-A25D-4187-B3A9-43629E214635" title="In a nonprocedural language such as SQL, the set of data to be operated on is specified, but not the operations to be performed or the manner in which they are to be carried out.">Introduction to Server-Side Programming</a>&#34;</span></p>
</li>
<li>
<p>Enforcing business rules in the code of a database application</p>
</li>
<li>
<p>Using Oracle Database integrity constraints, which are rules defined at the column or object level that restrict values in the database</p>
</li>
</ul>
</div>
</div>
<a id="CNCPT33334"></a>
<div class="props_rev_3"><a id="GUID-FBAEAD76-CC71-40BF-B133-6EBCC2AA5A9D"></a>
<h3 id="CNCPT-GUID-FBAEAD76-CC71-40BF-B133-6EBCC2AA5A9D" class="sect3">Advantages of Integrity Constraints</h3>
<div>
<p>An integrity constraint is a schema object that is created and dropped using SQL. To enforce data integrity, use integrity constraints whenever possible.</p>
<p>Advantages of integrity constraints over alternatives for enforcing data integrity include:</p>
<ul style="list-style-type: disc;">
<li>
<p>Declarative ease</p>
<p>Because you define integrity constraints using SQL statements, no additional programming is required when you define or alter a table. The SQL statements are easy to write and eliminate programming errors.</p>
</li>
<li>
<p>Centralized rules</p>
<p>Integrity constraints are defined for tables and are stored in the <a href="glossary.htm#GUID-D6A3934F-BA6D-464F-9612-C683E20514A4"><span class="xrefglossterm">data dictionary</span></a>. Thus, data entered by all applications must adhere to the same integrity constraints. If the rules change at the table level, then applications need not change. Also, applications can use metadata in the data dictionary to immediately inform users of violations, even before the database checks the SQL statement.</p>
</li>
<li>
<p>Flexibility when loading data</p>
<p>You can disable integrity constraints temporarily to avoid performance overhead when loading large amounts of data. When the data load is complete, you can re-enable the integrity constraints.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-FBAEAD76-CC71-40BF-B133-6EBCC2AA5A9D__GUID-B98886C5-41C9-4F6C-9987-F066974F8147">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="datadict.htm#GUID-9B9ABE1C-A1E3-464F-8936-978250DC3E1F" title="An important part of an Oracle database is its data dictionary, which is a read-only set of tables that provides administrative metadata about the database.">Overview of the Data Dictionary</a>&#34;</span></p>
</li>
<li>
<p><a class="olink TDDDG32200" target="_blank" href="../TDDDG/tdddg_objects.htm#TDDDG32200"><span><cite>Oracle Database 2 Day Developer&#39;s Guide</cite></span></a> and <a class="olink ADFNS004" target="_blank" href="../ADFNS/adfns_constraints.htm#ADFNS004"><span><cite>Oracle Database Development Guide</cite></span></a> to learn how to maintain data integrity</p>
</li>
<li>
<p><a class="olink ADMIN11537" target="_blank" href="../ADMIN/general.htm#ADMIN11537"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> to learn how to manage integrity constraints</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="CNCPT88884"></a><a id="CNCPT322"></a>
<div class="props_rev_3"><a id="GUID-1C9665AD-A444-4AFB-984F-6385FCBEA64E"></a>
<h2 id="CNCPT-GUID-1C9665AD-A444-4AFB-984F-6385FCBEA64E" class="sect2">Types of Integrity Constraints</h2>
<div>
<p>Oracle Database enables you to apply constraints both at the table and column level.</p>
<p>A constraint specified as part of the definition of a column or attribute is an inline specification. A constraint specified as part of the table definition is an out-of-line specification.</p>
<p>A <a href="glossary.htm#GUID-E0D85C39-5CB4-4E85-A9AB-3834FA6F09C7"><span class="xrefglossterm">key</span></a> is the column or set of columns included in the definition of certain types of integrity constraints. Keys describe the relationships between the tables and columns of a relational database. Individual values in a key are called <a href="glossary.htm#GUID-034BA760-3056-4791-A624-03BB28B82AFD"><span class="xrefglossterm">key values</span></a>.</p>
<p>The following table describes the types of constraints. Each can be specified either inline or out-of-line, except for <code class="codeph">NOT NULL</code>, which must be inline.</p>
<div class="tblformal" id="GUID-1C9665AD-A444-4AFB-984F-6385FCBEA64E__TYPESOFCONSTRAINTSCONSTRAINTTYPEDES-185E6EB1">
<p class="titleintable">Table 5-1 Types of Integrity Constraints</p>
<table class="cellalignment1206" title="Types of Integrity Constraints" summary="This table describes the types of integrity constraints.">
<thead>
<tr class="cellalignment1197">
<th class="cellalignment1222" id="d29482e1387">Constraint Type</th>
<th class="cellalignment1222" id="d29482e1389">Description</th>
<th class="cellalignment1222" id="d29482e1391">See Also</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d29482e1395" headers="d29482e1387">
<p><code class="codeph">NOT NULL</code></p>
</td>
<td class="cellalignment1223" headers="d29482e1395 d29482e1389">
<p>Allows or disallows inserts or updates of rows containing a <a href="glossary.htm#GUID-8854502F-2B8F-4ABC-98FA-BBFC3695A964"><span class="xrefglossterm">null</span></a> in a specified column.</p>
</td>
<td class="cellalignment1223" headers="d29482e1395 d29482e1391">
<p><span class="q">&#34;<a href="datainte.htm#GUID-CF2E06A6-6A35-46CE-808E-305A459457CC" title="A NOT NULL constraint requires that a column of a table contain no null values. A null is the absence of a value. By default, all columns in a table allow nulls.">NOT NULL Integrity Constraints</a>&#34;</span></p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d29482e1423" headers="d29482e1387">
<p>Unique key</p>
</td>
<td class="cellalignment1223" headers="d29482e1423 d29482e1389">
<p>Prohibits multiple rows from having the same value in the same column or combination of columns but allows some values to be null.</p>
</td>
<td class="cellalignment1223" headers="d29482e1423 d29482e1391">
<p><span class="q">&#34;<a href="datainte.htm#GUID-077C26A1-49C3-4E72-AE1D-7CEDD997917A" title="A unique key constraint requires that every value in a column or set of columns be unique. No rows of a table may have duplicate values in a single column (the unique key) or set of columns (the composite unique key) with a unique key constraint.">Unique Constraints</a>&#34;</span></p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d29482e1447" headers="d29482e1387">
<p>Primary key</p>
</td>
<td class="cellalignment1223" headers="d29482e1447 d29482e1389">
<p>Combines a <code class="codeph">NOT NULL</code> constraint and a unique constraint. It prohibits multiple rows from having the same value in the same column or combination of columns and prohibits values from being null.</p>
</td>
<td class="cellalignment1223" headers="d29482e1447 d29482e1391">
<p><span class="q">&#34;<a href="datainte.htm#GUID-E1033BB9-0F67-4E59-82AC-B8B572FD82BB" title="In a primary key constraint, the values in the group of one or more columns subject to the constraint uniquely identify the row. Each table can have one primary key, which in effect names the row and ensures that no duplicate rows exist.">Primary Key Constraints</a>&#34;</span></p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d29482e1471" headers="d29482e1387">
<p>Foreign key</p>
</td>
<td class="cellalignment1223" headers="d29482e1471 d29482e1389">
<p>Designates a column as the foreign key and establishes a relationship between the foreign key and a primary or unique key, called the <a href="glossary.htm#GUID-B1E1A035-9C29-43EB-84AA-0A9CD4482530"><span class="xrefglossterm">referenced key</span></a>.</p>
</td>
<td class="cellalignment1223" headers="d29482e1471 d29482e1391">
<p><span class="q">&#34;<a href="datainte.htm#GUID-7CD73D16-EA1A-4AA8-AA7D-4288557395B8" title="Whenever two tables contain one or more common columns, Oracle Database can enforce the relationship between the two tables through a foreign key constraint, also called a referential integrity constraint.">Foreign Key Constraints</a>&#34;</span></p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d29482e1495" headers="d29482e1387">
<p>Check</p>
</td>
<td class="cellalignment1223" headers="d29482e1495 d29482e1389">
<p>Requires a database value to obey a specified condition.</p>
</td>
<td class="cellalignment1223" headers="d29482e1495 d29482e1391">
<p><span class="q">&#34;<a href="datainte.htm#GUID-5AF9C206-0139-4506-96DE-F6AD1D41CD41" title="A check constraint on a column or set of columns requires that a specified condition be true or unknown for every row. If DML results in the condition of the constraint evaluating to false, then the SQL statement is rolled back.">Check Constraints</a>&#34;</span></p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d29482e1516" headers="d29482e1387">
<p><code class="codeph">REF</code></p>
</td>
<td class="cellalignment1223" headers="d29482e1516 d29482e1389">
<p>Dictates types of data manipulation allowed on values in a <code class="codeph">REF</code> column and how these actions affect dependent values. In an object-relational database, a built-in data type called a <code class="codeph">REF</code> encapsulates a reference to a row object of a specified object type. Referential integrity constraints on <code class="codeph">REF</code> columns ensure that there is a row object for the <code class="codeph">REF</code>.</p>
</td>
<td class="cellalignment1223" headers="d29482e1516 d29482e1391">
<p><a class="olink ADOBJ00805" target="_blank" href="../ADOBJ/adobjdes.htm#ADOBJ00805"><span><cite>Oracle Database Object-Relational Developer&#39;s Guide</cite></span></a> to learn about <code class="codeph">REF</code> constraints</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso" id="GUID-1C9665AD-A444-4AFB-984F-6385FCBEA64E__GUID-E0B96DBC-119F-469C-BE1E-D64959821440">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="tablecls.htm#GUID-F845B1A7-71E3-4312-B66D-BC16C198ECE5" title="A table is the basic unit of data organization in an Oracle database.">Overview of Tables</a>&#34;</span></p>
</li>
<li>
<p><a class="olink SQLRF52180" target="_blank" href="../SQLRF/clauses002.htm#SQLRF52180"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about the types of constraints</p>
</li>
</ul>
</div>
</div>
<a id="CNCPT1641"></a>
<div class="props_rev_3"><a id="GUID-CF2E06A6-6A35-46CE-808E-305A459457CC"></a>
<h3 id="CNCPT-GUID-CF2E06A6-6A35-46CE-808E-305A459457CC" class="sect3">NOT NULL Integrity Constraints</h3>
<div>
<p>A <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraint requires that a column of a table contain no null values. A <span class="bold">null</span> is the absence of a value. By default, all columns in a table allow nulls.</p>
<p><code class="codeph">NOT NULL</code> constraints are intended for columns that must not lack values. For example, the <code class="codeph">hr.employees</code> table requires a value in the <code class="codeph">email</code> column. An attempt to insert an employee row without an email address generates an error:</p>
<pre dir="ltr">SQL&gt; INSERT INTO hr.employees (employee_id, last_name) values (999, &#39;Smith&#39;);
.
.
.
ERROR at line 1:
ORA-01400: cannot insert NULL into (&#34;HR&#34;.&#34;EMPLOYEES&#34;.&#34;EMAIL&#34;)
</pre>
<p>You can only add a column with a <code class="codeph">NOT NULL</code> constraint if the table does not contain any rows or if you specify a default value.</p>
<div class="infoboxnotealso" id="GUID-CF2E06A6-6A35-46CE-808E-305A459457CC__GUID-D27843C7-6BD5-4F3F-BEDF-88D1B9D0AD79">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink TDDDG32220" target="_blank" href="../TDDDG/tdddg_objects.htm#TDDDG32220"><span class="italic">Oracle Database 2 Day Developer&#39;s Guide</span></a> for examples of adding <code class="codeph">NOT NULL</code> constraints to a table</p>
</li>
<li>
<p><a class="olink SQLRF30038" target="_blank" href="../SQLRF/clauses002.htm#SQLRF30038"><span class="italic">Oracle Database SQL Language Reference</span></a> for restrictions on using <code class="codeph">NOT NULL</code> constraints</p>
</li>
<li>
<p><a class="olink ADFNS265" target="_blank" href="../ADFNS/adfns_constraints.htm#ADFNS265"><span class="italic">Oracle Database Development Guide</span></a> to learn when to use the <code class="codeph">NOT NULL</code> constraint</p>
</li>
</ul>
</div>
</div>
</div>
<a id="CNCPT88885"></a><a id="CNCPT1642"></a>
<div class="props_rev_3"><a id="GUID-077C26A1-49C3-4E72-AE1D-7CEDD997917A"></a>
<h3 id="CNCPT-GUID-077C26A1-49C3-4E72-AE1D-7CEDD997917A" class="sect3">Unique Constraints</h3>
<div>
<p>A <span class="bold">unique key constraint</span> requires that every value in a column or set of columns be unique. No rows of a table may have duplicate values in a single column (the <span class="bold">unique key</span>) or set of columns (the <span class="bold">composite unique key</span>) with a unique key constraint.</p>
<div class="infobox-note" id="GUID-077C26A1-49C3-4E72-AE1D-7CEDD997917A__GUID-82F8DFCF-4E8D-4E6B-8DE7-7809977FAB3A">
<p class="notep1">Note:</p>
<p>The term <span class="italic">key</span> refers only to the columns defined in the integrity constraint. Because the database enforces a unique constraint by implicitly creating or reusing an <a href="glossary.htm#GUID-3CDC5A7E-10A5-4F63-9ED3-49A74D001CA5"><span class="xrefglossterm">index</span></a> on the key columns, the term <span class="italic">unique key</span> is sometimes incorrectly used as a synonym for <span class="italic">unique key constraint</span> or <span class="italic">unique index</span>.</p>
</div>
<p>Unique key constraints are appropriate for any column where duplicate values are not allowed. Unique constraints differ from primary key constraints, whose purpose is to identify each table row uniquely, and typically contain values that have no significance other than being unique. Examples of unique keys include:</p>
<ul style="list-style-type: disc;">
<li>
<p>A customer phone number, where the primary key is the customer number</p>
</li>
<li>
<p>A department name, where the primary key is the department number</p>
</li>
</ul>
<p>As shown in <a href="tablecls.htm#GUID-B0DFC5A7-E482-4E17-A6F5-FF476A92DC73__CBBEHJCH">Example 2-1</a>, a unique key constraint exists on the <code class="codeph">email</code> column of the <code class="codeph">hr.employees</code> table. The relevant part of the statement is as follows:</p>
<pre dir="ltr">CREATE TABLE employees    ( ...
    , email          VARCHAR2(25)
        CONSTRAINT   emp_email_nn  NOT NULL ...
    , CONSTRAINT     emp_email_uk  UNIQUE (email) ... );
</pre>
<p>The <code class="codeph">emp_email_uk</code> constraint ensures that no two employees have the same email address, as shown in the following example:</p>
<pre dir="ltr">SQL&gt; SELECT employee_id, last_name, email FROM employees WHERE email = &#39;PFAY&#39;;
 
EMPLOYEE_ID LAST_NAME                 EMAIL
----------- ------------------------- -------------------------
        202 Fay                       PFAY

SQL&gt; INSERT INTO employees (employee_id, last_name, email, hire_date, job_id)    
  1  VALUES (999,&#39;Fay&#39;,&#39;PFAY&#39;,SYSDATE,&#39;ST_CLERK&#39;);
.
.
.
ERROR at line 1:
ORA-00001: unique constraint (HR.EMP_EMAIL_UK) violated
</pre>
<p>Unless a <code class="codeph">NOT NULL</code> constraint is also defined, a null always satisfies a unique key constraint. Thus, columns with both unique key constraints and <code class="codeph">NOT NULL</code> constraints are typical. This combination forces the user to enter values in the unique key and eliminates the possibility that new row data conflicts with existing row data.</p>
<div class="infobox-note" id="GUID-077C26A1-49C3-4E72-AE1D-7CEDD997917A__GUID-007A291C-6A61-4701-BF8E-DB9C6B6EEC1D">
<p class="notep1">Note:</p>
<p>Because of the search mechanism for unique key constraints on multiple columns, you cannot have identical values in the non-null columns of a partially null composite unique key constraint.</p>
</div>
<div class="example" id="GUID-077C26A1-49C3-4E72-AE1D-7CEDD997917A__CHDJJAJA">
<p class="titleinexample">Example 5-1 Unique Constraint</p>
<pre dir="ltr">SQL&gt; SELECT employee_id, last_name, email FROM employees WHERE email = &#39;PFAY&#39;;
 
EMPLOYEE_ID LAST_NAME                 EMAIL
----------- ------------------------- -------------------------
        202 Fay                       PFAY

SQL&gt; INSERT INTO employees (employee_id, last_name, email, hire_date, job_id)    
  1  VALUES (999,&#39;Fay&#39;,&#39;PFAY&#39;,SYSDATE,&#39;ST_CLERK&#39;);
.
.
.
ERROR at line 1:
ORA-00001: unique constraint (HR.EMP_EMAIL_UK) violated
</pre>
<div class="infoboxnotealso" id="GUID-077C26A1-49C3-4E72-AE1D-7CEDD997917A__GUID-C28D471F-0F36-4116-9DE9-6E04C5381ED2">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="indexiot.htm#GUID-F6EFE752-18FA-4BCE-BDE0-F2C386361187" title="Indexes can be unique or nonunique. Unique indexes guarantee that no two rows of a table have duplicate values in the key column or columns.">Unique and Nonunique Indexes</a>&#34;</span></p>
</li>
<li>
<p><a class="olink TDDDG192" target="_blank" href="../TDDDG/tdddg_objects.htm#TDDDG192"><span class="italic">Oracle Database 2 Day Developer&#39;s Guide</span></a> for examples of adding <code class="codeph">UNIQUE</code> constraints to a table</p>
</li>
</ul>
</div>
</div>
<!-- class="example" --></div>
</div>
<a id="CNCPT1646"></a>
<div class="props_rev_3"><a id="GUID-E1033BB9-0F67-4E59-82AC-B8B572FD82BB"></a>
<h3 id="CNCPT-GUID-E1033BB9-0F67-4E59-82AC-B8B572FD82BB" class="sect3">Primary Key Constraints</h3>
<div>
<p>In a <span class="bold">primary key constraint</span>, the values in the group of one or more columns subject to the constraint uniquely identify the row. Each table can have one <span class="bold">primary key</span>, which in effect names the row and ensures that no duplicate rows exist.</p>
<p>A primary key can be natural or a surrogate. A <a href="glossary.htm#GUID-C697AA5E-12D3-40DC-A5D2-BC7DFDF3E945"><span class="xrefglossterm">natural key</span></a> is a meaningful identifier made of existing attributes in a table. For example, a natural key could be a postal code in a lookup table. In contrast, a <a href="glossary.htm#GUID-615CBF3E-BEBE-40A1-AE81-5B2F3275ABF3"><span class="xrefglossterm">surrogate key</span></a> is a system-generated incrementing identifier that ensures uniqueness within a table. Typically, a <a href="glossary.htm#GUID-E55254A3-D483-4311-8637-1FFEB6BD25BF"><span class="xrefglossterm">sequence</span></a> generates surrogate keys.</p>
<p>The Oracle Database implementation of the primary key constraint guarantees that the following statements are true:</p>
<ul style="list-style-type: disc;">
<li>
<p>No two rows have duplicate values in the specified column or set of columns.</p>
</li>
<li>
<p>The primary key columns do not allow nulls.</p>
</li>
</ul>
<p>A typical situation calling for a primary key is the numeric identifier for an employee. Each employee must have a unique ID. A employee must be described by one and only one row in the <code class="codeph">employees</code> table.</p>
<p>The example in <a href="datainte.htm#GUID-077C26A1-49C3-4E72-AE1D-7CEDD997917A" title="A unique key constraint requires that every value in a column or set of columns be unique. No rows of a table may have duplicate values in a single column (the unique key) or set of columns (the composite unique key) with a unique key constraint.">Unique Constraints</a> indicates that an existing employee has the employee ID of 202, where the employee ID is the primary key. The following example shows an attempt to add an employee with the same employee ID and an employee with no ID:</p>
<pre dir="ltr">SQL&gt; INSERT INTO employees (employee_id, last_name, email, hire_date, job_id)    
  1  VALUES (202,&#39;Chan&#39;,&#39;JCHAN&#39;,SYSDATE,&#39;ST_CLERK&#39;);
.
.
.
ERROR at line 1:
ORA-00001: unique constraint (HR.EMP_EMP_ID_PK) violated

SQL&gt; INSERT INTO employees (last_name) VALUES (&#39;Chan&#39;);
.
.
.
ERROR at line 1:
ORA-01400: cannot insert NULL into (&#34;HR&#34;.&#34;EMPLOYEES&#34;.&#34;EMPLOYEE_ID&#34;)
</pre>
<p>The database enforces primary key constraints with an <a href="glossary.htm#GUID-3CDC5A7E-10A5-4F63-9ED3-49A74D001CA5"><span class="xrefglossterm">index</span></a>. Usually, a primary key constraint created for a column implicitly creates a unique index and a <code class="codeph">NOT NULL</code> constraint. Note the following exceptions to this rule:</p>
<ul style="list-style-type: disc;">
<li>
<p>In some cases, as when you create a primary key with a <a href="glossary.htm#GUID-19E5560E-9730-4A50-9C26-4E95C4AD81AE"><span class="xrefglossterm">deferrable constraint</span></a>, the generated index is not unique.</p>
<div class="infobox-note" id="GUID-E1033BB9-0F67-4E59-82AC-B8B572FD82BB__GUID-50F5F6AA-7332-46B9-ABAC-9DD5174EB994">
<p class="notep1">Note:</p>
<p>You can explicitly create a unique index with the <code class="codeph">CREATE UNIQUE INDEX</code> statement.</p>
</div>
</li>
<li>
<p>If a usable index exists when a primary key constraint is created, then the constraint reuses this index and does not implicitly create one.</p>
</li>
</ul>
<p>By default the name of the implicitly created index is the name of the primary key constraint. You can also specify a user-defined name for an index. You can specify storage options for the index by including the <code class="codeph">ENABLE</code> clause in the <code class="codeph">CREATE TABLE</code> or <code class="codeph">ALTER TABLE</code> statement used to create the constraint.</p>
<div class="infoboxnotealso" id="GUID-E1033BB9-0F67-4E59-82AC-B8B572FD82BB__GUID-C0584FA5-D66D-4E1F-A18E-CAB21E418F0F">
<p class="notep1">See Also:</p>
<p><a class="olink TDDDG193" target="_blank" href="../TDDDG/tdddg_objects.htm#TDDDG193"><span class="italic">Oracle Database 2 Day Developer&#39;s Guide</span></a> and <a class="olink ADFNS00607" target="_blank" href="../ADFNS/adfns_constraints.htm#ADFNS00607"><span class="italic">Oracle Database Development Guide</span></a> to learn how to add primary key constraints to a table</p>
</div>
</div>
</div>
<a id="CNCPT88886"></a><a id="CNCPT88887"></a><a id="CNCPT1649"></a>
<div class="props_rev_3"><a id="GUID-7CD73D16-EA1A-4AA8-AA7D-4288557395B8"></a>
<h3 id="CNCPT-GUID-7CD73D16-EA1A-4AA8-AA7D-4288557395B8" class="sect3">Foreign Key Constraints</h3>
<div>
<p>Whenever two tables contain one or more common columns, Oracle Database can enforce the relationship between the two tables through a <span class="bold">foreign key constraint</span>, also called a <span class="italic">referential integrity constraint</span>.</p>
<p>A foreign key constraint requires that for each value in the column on which the constraint is defined, the value in the other specified other table and column must match. An example of a referential integrity rule is an employee can work for only an existing department.</p>
<p>The following table lists terms associated with referential integrity constraints.</p>
<div class="tblformal" id="GUID-7CD73D16-EA1A-4AA8-AA7D-4288557395B8__BABHECEH">
<p class="titleintable">Table 5-2 Referential Integrity Constraint Terms</p>
<table class="cellalignment1243" title="Referential Integrity Constraint Terms" summary="This table lists terms associated with referential integrity constraints.">
<thead>
<tr class="cellalignment1197">
<th class="cellalignment1224" id="d29482e2886">Term</th>
<th class="cellalignment1224" id="d29482e2889">Definition</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1197">
<td class="cellalignment1197" id="d29482e2894" headers="d29482e2886">
<p>Foreign key</p>
</td>
<td class="cellalignment1197" headers="d29482e2894 d29482e2889">
<p>The column or set of columns included in the definition of the constraint that reference a referenced key. For example, the <code class="codeph">department_id</code> column in <code class="codeph">employees</code> is a foreign key that references the <code class="codeph">department_id</code> column in <code class="codeph">departments</code>.</p>
<p>Foreign keys may be defined as multiple columns. However, a composite foreign key must reference a composite primary or unique key with the same number of columns and the same data types.</p>
<p>The value of foreign keys can match either the referenced primary or unique key value, or be null. If any column of a composite foreign key is null, then the non-null portions of the key do not have to match any corresponding portion of a parent key.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1197" id="d29482e2917" headers="d29482e2886">
<p>Referenced key</p>
</td>
<td class="cellalignment1197" headers="d29482e2917 d29482e2889">
<p>The unique key or primary key of the table referenced by a foreign key. For example, the <code class="codeph">department_id</code> column in <code class="codeph">departments</code> is the referenced key for the <code class="codeph">department_id</code> column in <code class="codeph">employees</code>.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1197" id="d29482e2936" headers="d29482e2886">
<p>Dependent or child table</p>
</td>
<td class="cellalignment1197" headers="d29482e2936 d29482e2889">
<p>The table that includes the foreign key. This table depends on the values present in the referenced unique or primary key. For example, the <code class="codeph">employees</code> table is a child of <code class="codeph">departments</code>.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1197" id="d29482e2949" headers="d29482e2886">
<p>Referenced or parent table</p>
</td>
<td class="cellalignment1197" headers="d29482e2949 d29482e2889">
<p>The table that is referenced by the foreign key of the child table. It is this table&#39;s referenced key that determines whether specific inserts or updates are allowed in the child table. For example, the <code class="codeph">departments</code> table is a parent of <code class="codeph">employees</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p><a href="datainte.htm#GUID-7CD73D16-EA1A-4AA8-AA7D-4288557395B8__I3773">Figure 5-1</a> shows a foreign key on the <code class="codeph">employees.department_id</code> column. It guarantees that every value in this column must match a value in the <code class="codeph">departments.department_id</code> column. Thus, no erroneous department numbers can exist in the <code class="codeph">employees.department_id</code> column.</p>
<div class="figure" id="GUID-7CD73D16-EA1A-4AA8-AA7D-4288557395B8__I3773">
<p class="titleinfigure">Figure 5-1 Referential Integrity Constraints</p>
<img width="668" height="666" src="img/GUID-AB835673-07EF-4BF1-94C6-73F494E604EB-default.gif" alt="Description of Figure 5-1 follows" title="Description of Figure 5-1 follows"/><br/>
<a href="img_text/GUID-AB835673-07EF-4BF1-94C6-73F494E604EB-print.htm">Description of &#34;Figure 5-1 Referential Integrity Constraints&#34;</a></div>
<!-- class="figure" -->
<div class="infoboxnotealso" id="GUID-7CD73D16-EA1A-4AA8-AA7D-4288557395B8__GUID-ACB57F63-6FC8-4978-B5FA-AE0E2EC14470">
<p class="notep1">See Also:</p>
<p><a class="olink TDDDG195" target="_blank" href="../TDDDG/tdddg_objects.htm#TDDDG195"><span><cite>Oracle Database 2 Day Developer&#39;s Guide</cite></span></a> and <a class="olink ADFNS00611" target="_blank" href="../ADFNS/adfns_constraints.htm#ADFNS00611"><span><cite>Oracle Database Development Guide</cite></span></a> to learn how to add foreign key constraints to a table</p>
</div>
</div>
<a id="CNCPT88888"></a><a id="CNCPT1650"></a>
<div class="props_rev_3"><a id="GUID-EF16D0D5-EB95-440A-9FFA-E890DFBB7C64"></a>
<h4 id="CNCPT-GUID-EF16D0D5-EB95-440A-9FFA-E890DFBB7C64" class="sect4">Self-Referential Integrity Constraints</h4>
<div>
<p>A <span class="bold">self-referential integrity constraint</span> is a foreign key that references a parent key in the same table.</p>
<p>In the following figure, a self-referential constraint ensures that every value in the <code class="codeph">employees.manager_id</code> column corresponds to an existing value in the <code class="codeph">employees.employee_id</code> column. For example, the manager for employee 102 must exist in the <code class="codeph">employees</code> table. This constraint eliminates the possibility of erroneous employee numbers in the <code class="codeph">manager_id</code> column.</p>
<div class="figure" id="GUID-EF16D0D5-EB95-440A-9FFA-E890DFBB7C64__I3776">
<p class="titleinfigure">Figure 5-2 Single Table Referential Constraints</p>
<img width="668" height="380" src="img/GUID-7B206CA2-BB19-405C-B155-C7D00193A912-default.gif" alt="Description of Figure 5-2 follows" title="Description of Figure 5-2 follows"/><br/>
<a href="img_text/GUID-7B206CA2-BB19-405C-B155-C7D00193A912-print.htm">Description of &#34;Figure 5-2 Single Table Referential Constraints&#34;</a></div>
<!-- class="figure" --></div>
</div>
<a id="CNCPT33335"></a>
<div class="props_rev_3"><a id="GUID-147E2168-6739-481F-9703-3DC95D93B611"></a>
<h4 id="CNCPT-GUID-147E2168-6739-481F-9703-3DC95D93B611" class="sect4">Nulls and Foreign Keys</h4>
<div>
<p>The relational model permits the value of foreign keys to match either the referenced primary or unique key value, or be null. For example, a user could insert a row into <code class="codeph">hr.employees</code> without specifying a department ID.</p>
<p>If any column of a composite foreign key is null, then the non-null portions of the key do not have to match any corresponding portion of a parent key.</p>
</div>
</div>
<a id="CNCPT88889"></a><a id="CNCPT33336"></a>
<div class="props_rev_3"><a id="GUID-FB419C3E-7C1E-4881-B77D-D09A57C741A6"></a>
<h4 id="CNCPT-GUID-FB419C3E-7C1E-4881-B77D-D09A57C741A6" class="sect4">Parent Key Modifications and Foreign Keys</h4>
<div>
<p>The relationship between foreign key and parent key has implications for deletion of parent keys. For example, if a user attempts to delete the record for this department, then what happens to the records for employees in this department?</p>
<p>When a parent key is modified, referential integrity constraints can specify the following actions to be performed on dependent rows in a child table:</p>
<ul style="list-style-type: disc;">
<li>
<p>No action on deletion or update</p>
<p>In the normal case, users cannot modify referenced key values if the results would violate referential integrity. For example, if <code class="codeph">employees.department_id</code> is a foreign key to <code class="codeph">departments</code>, and if employees belong to a particular department, then an attempt to delete the row for this department violates the constraint.</p>
</li>
<li>
<p>Cascading deletions</p>
<p>A deletion cascades (<code class="codeph">DELETE CASCADE</code>) when rows containing referenced key values are deleted, causing all rows in child tables with dependent foreign key values to also be deleted. For example, the deletion of a row in <code class="codeph">departments</code> causes rows for all employees in this department to be deleted.</p>
</li>
<li>
<p>Deletions that set null</p>
<p>A deletion sets null (<code class="codeph">DELETE SET NULL</code>) when rows containing referenced key values are deleted, causing all rows in child tables with dependent foreign key values to set those values to null. For example, the deletion of a department row sets the <code class="codeph">department_id</code> column value to null for employees in this department.</p>
</li>
</ul>
<p><a href="datainte.htm#GUID-FB419C3E-7C1E-4881-B77D-D09A57C741A6__G14265" title="This table shows the DML Statements allowed by the different referential actions on the key values in the parent table, and the foreign key values in the child table.">Table 5-3</a> outlines the DML statements allowed by the different referential actions on the key values in the parent table, and the foreign key values in the child table.</p>
<div class="tblformal" id="GUID-FB419C3E-7C1E-4881-B77D-D09A57C741A6__G14265">
<p class="titleintable">Table 5-3 DML Statements Allowed by Update and Delete No Action</p>
<table class="cellalignment1206" title="DML Statements Allowed by Update and Delete No Action" summary="This table shows the DML Statements allowed by the different referential actions on the key values in the parent table, and the foreign key values in the child table.">
<thead>
<tr class="cellalignment1197">
<th class="cellalignment1244" id="d29482e3810">DML Statement</th>
<th class="cellalignment1245" id="d29482e3813">Issued Against Parent Table</th>
<th class="cellalignment1245" id="d29482e3816">Issued Against Child Table</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1197">
<td class="cellalignment1246" id="d29482e3821" headers="d29482e3810">
<p><code class="codeph">INSERT</code></p>
</td>
<td class="cellalignment1247" headers="d29482e3821 d29482e3813">
<p>Always OK if the parent key value is unique</p>
</td>
<td class="cellalignment1247" headers="d29482e3821 d29482e3816">
<p>OK only if the foreign key value exists in the parent key or is partially or all null</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1246" id="d29482e3832" headers="d29482e3810">
<p><code class="codeph">UPDATE NO</code> <code class="codeph">ACTION</code></p>
</td>
<td class="cellalignment1247" headers="d29482e3832 d29482e3813">
<p>Allowed if the statement does not leave any rows in the child table without a referenced parent key value</p>
</td>
<td class="cellalignment1247" headers="d29482e3832 d29482e3816">
<p>Allowed if the new foreign key value still references a referenced key value</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1246" id="d29482e3846" headers="d29482e3810">
<p><code class="codeph">DELETE NO</code> <code class="codeph">ACTION</code></p>
</td>
<td class="cellalignment1247" headers="d29482e3846 d29482e3813">
<p>Allowed if no rows in the child table reference the parent key value</p>
</td>
<td class="cellalignment1247" headers="d29482e3846 d29482e3816">
<p>Always OK</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1246" id="d29482e3860" headers="d29482e3810">
<p><code class="codeph">DELETE CASCADE</code></p>
</td>
<td class="cellalignment1247" headers="d29482e3860 d29482e3813">
<p>Always OK</p>
</td>
<td class="cellalignment1247" headers="d29482e3860 d29482e3816">
<p>Always OK</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1246" id="d29482e3871" headers="d29482e3810">
<p><code class="codeph">DELETE SET</code> <code class="codeph">NULL</code></p>
</td>
<td class="cellalignment1247" headers="d29482e3871 d29482e3813">
<p>Always OK</p>
</td>
<td class="cellalignment1247" headers="d29482e3871 d29482e3816">
<p>Always OK</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-note" id="GUID-FB419C3E-7C1E-4881-B77D-D09A57C741A6__GUID-E26077A0-8038-4595-AE42-A371EBB2B81E">
<p class="notep1">Note:</p>
<p>Other referential actions not supported by <code class="codeph">FOREIGN KEY</code> integrity constraints of Oracle Database can be enforced using database triggers. See <span class="q">&#34;<a href="srvrside.htm#GUID-40297ADF-0968-42F8-B8B9-84AD6ADCBE63" title="A database trigger is a compiled stored program unit, written in either PL/SQL or Java, that Oracle Database invokes (&#34;fires&#34;) automatically in certain situations.">Overview of Triggers</a>&#34;</span>.</p>
</div>
<div class="infoboxnotealso" id="GUID-FB419C3E-7C1E-4881-B77D-D09A57C741A6__GUID-97A95BE1-E246-4E76-98C0-70CBAF8300E9">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF52202" target="_blank" href="../SQLRF/clauses002.htm#SQLRF52202"><span class="italic">Oracle Database SQL Language Reference</span></a> to learn about the <code class="codeph">ON DELETE</code> clause</p>
</div>
</div>
</div>
<a id="CNCPT1657"></a>
<div class="props_rev_3"><a id="GUID-8D485547-5304-4FE7-A1B3-8A4009484A6A"></a>
<h4 id="CNCPT-GUID-8D485547-5304-4FE7-A1B3-8A4009484A6A" class="sect4">Indexes and Foreign Keys</h4>
<div>
<p>As a rule, foreign keys should be indexed. The only exception is when the matching unique or primary key is never updated or deleted.</p>
<p>Indexing the foreign keys in child tables provides the following benefits:</p>
<ul style="list-style-type: disc;">
<li>
<p>Prevents a full table lock on the child table. Instead, the database acquires a row lock on the index.</p>
</li>
<li>
<p>Removes the need for a <a href="glossary.htm#GUID-BF9B54D6-892E-4C3B-8536-38958ACC069D"><span class="xrefglossterm">full table scan</span></a> of the child table. As an illustration, assume that a user removes the record for department 10 from the <code class="codeph">departments</code> table. If <code class="codeph">employees.department_id</code> is not indexed, then the database must scan <code class="codeph">employees</code> to see if any employees exist in department 10.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-8D485547-5304-4FE7-A1B3-8A4009484A6A__GUID-35C81A3C-5431-40E9-84CA-ECD23109E318">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="consist.htm#GUID-261F98F8-F7B4-49A9-9BE8-11F2B1F4609B" title="Oracle Database maximizes the concurrency control of parent keys in relation to dependent foreign keys.">Locks and Foreign Keys</a>&#34;</span> and <span class="q">&#34;<a href="indexiot.htm#GUID-DE7A95BC-6E4A-47EA-9FC5-B85B54F8CF41" title="An index is an optional structure, associated with a table or table cluster, that can sometimes speed data access. Indexes are schema objects that are logically and physically independent of the data in the objects with which they are associated. Thus, you can drop or create an index without physically affecting the indexed table.">Introduction to Indexes</a>&#34;</span></p>
</div>
</div>
</div>
</div>
<a id="CNCPT1660"></a>
<div class="props_rev_3"><a id="GUID-5AF9C206-0139-4506-96DE-F6AD1D41CD41"></a>
<h3 id="CNCPT-GUID-5AF9C206-0139-4506-96DE-F6AD1D41CD41" class="sect3">Check Constraints</h3>
<div>
<p>A <span class="bold">check constraint</span> on a column or set of columns requires that a specified <span class="bold">condition</span> be true or unknown for every row. If DML results in the condition of the constraint evaluating to false, then the SQL statement is rolled back.</p>
<p>The chief benefit of check constraints is the ability to enforce very specific integrity rules. For example, you could use check constraints to enforce the following rules in the <code class="codeph">hr.employees</code> table:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">salary</code> column must not have a value greater than 10000.</p>
</li>
<li>
<p>The <code class="codeph">commission</code> column must have a value that is not greater than the salary.</p>
</li>
</ul>
<p>The following example creates a maximum salary constraint on <code class="codeph">employees</code> and demonstrates what happens when a statement attempts to insert a row containing a salary that exceeds the maximum:</p>
<pre dir="ltr">SQL&gt; ALTER TABLE employees ADD CONSTRAINT max_emp_sal CHECK (salary &lt; 10001);
SQL&gt; INSERT INTO employees (employee_id,last_name,email,hire_date,job_id,salary)
  1  VALUES (999,&#39;Green&#39;,&#39;BGREEN&#39;,SYSDATE,&#39;ST_CLERK&#39;,20000);
.
.
.
ERROR at line 1:
ORA-02290: check constraint (HR.MAX_EMP_SAL) violated
</pre>
<p>A single column can have multiple check constraints that reference the column in its definition. For example, the <code class="codeph">salary</code> column could have one constraint that prevents values over 10000 and a separate constraint that prevents values less than 500.</p>
<p>If multiple check constraints exist for a column, then they must be designed so their purposes do not conflict. No order of evaluation of the conditions can be assumed. The database does not verify that check conditions are not mutually exclusive.</p>
<div class="infoboxnotealso" id="GUID-5AF9C206-0139-4506-96DE-F6AD1D41CD41__GUID-EFEF075C-5872-494B-B888-C66C63915053">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF52204" target="_blank" href="../SQLRF/clauses002.htm#SQLRF52204"><span class="italic">Oracle Database SQL Language Reference</span></a> to learn about restrictions for check constraints</p>
</div>
</div>
</div>
</div>
<a id="CNCPT33337"></a>
<div class="props_rev_3"><a id="GUID-97D4BB23-FD4B-4FB6-BE21-E5F8C43BD94F"></a>
<h2 id="CNCPT-GUID-97D4BB23-FD4B-4FB6-BE21-E5F8C43BD94F" class="sect2">States of Integrity Constraints</h2>
<div>
<p>As part of constraint definition, you can specify how and when Oracle Database should enforce the constraint, thereby determining the constraint state.</p>
</div>
<a id="CNCPT88890"></a><a id="CNCPT33339"></a>
<div class="props_rev_3"><a id="GUID-F9E519B3-6DE9-47EC-9B6B-527E2D78349E"></a>
<h3 id="CNCPT-GUID-F9E519B3-6DE9-47EC-9B6B-527E2D78349E" class="sect3">Checks for Modified and Existing Data</h3>
<div>
<p>The database enables you to specify whether a constraint applies to existing data or future data. If a constraint is enabled, then the database checks new data as it is entered or updated. Data that does not conform to the constraint cannot enter the database.</p>
<p>For example, enabling a <code class="codeph">NOT NULL</code> constraint on <code class="codeph">employees.department_id</code> guarantees that every future row has a department ID. If a constraint is disabled, then the table can contain rows that violate the constraint.</p>
<p>You can set constraints to validate (<code class="codeph">VALIDATE</code>) or not validate (<code class="codeph">NOVALIDATE</code>) existing data. If <code class="codeph">VALIDATE</code> is specified, then existing data must conform to the constraint. For example, enabling a <code class="codeph">NOT NULL</code> constraint on <code class="codeph">employees.department_id</code> and setting it to <code class="codeph">VALIDATE</code> checks that every existing row has a department ID. If <code class="codeph">NOVALIDATE</code> is specified, then existing data need not conform to the constraint.</p>
<p>The behavior of <code class="codeph">VALIDATE</code> and <code class="codeph">NOVALIDATE</code> always depends on whether the constraint is enabled or disabled. The following table summarizes the relationships.</p>
<div class="tblformal" id="GUID-F9E519B3-6DE9-47EC-9B6B-527E2D78349E__CHDEAFJA">
<p class="titleintable">Table 5-4 Checks on Modified and Existing Data</p>
<table class="cellalignment1206" title="Checks on Modified and Existing Data" summary="This table summarized the checks on modified and existing data.">
<thead>
<tr class="cellalignment1197">
<th class="cellalignment1222" id="d29482e5028">Modified Data</th>
<th class="cellalignment1222" id="d29482e5031">Existing Data</th>
<th class="cellalignment1248" id="d29482e5034">Summary</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d29482e5039" headers="d29482e5028">
<p><code class="codeph">ENABLE</code></p>
</td>
<td class="cellalignment1223" headers="d29482e5039 d29482e5031">
<p><code class="codeph">VALIDATE</code></p>
</td>
<td class="cellalignment1249" headers="d29482e5039 d29482e5034">
<p>Existing and future data must obey the constraint. An attempt to apply a new constraint to a populated table results in an error if existing rows violate the constraint.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d29482e5051" headers="d29482e5028">
<p><code class="codeph">ENABLE</code></p>
</td>
<td class="cellalignment1223" headers="d29482e5051 d29482e5031">
<p><code class="codeph">NOVALIDATE</code></p>
</td>
<td class="cellalignment1249" headers="d29482e5051 d29482e5034">
<p>The database checks the constraint, but it need not be true for all rows. Thus, existing rows can violate the constraint, but new or modified rows must conform to the rules.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d29482e5063" headers="d29482e5028">
<p><code class="codeph">DISABLE</code></p>
</td>
<td class="cellalignment1223" headers="d29482e5063 d29482e5031">
<p><code class="codeph">VALIDATE</code></p>
</td>
<td class="cellalignment1249" headers="d29482e5063 d29482e5034">
<p>The database disables the constraint, drops its index, and prevents modification of the constrained columns.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d29482e5075" headers="d29482e5028">
<p><code class="codeph">DISABLE</code></p>
</td>
<td class="cellalignment1223" headers="d29482e5075 d29482e5031">
<p><code class="codeph">NOVALIDATE</code></p>
</td>
<td class="cellalignment1249" headers="d29482e5075 d29482e5034">
<p>The constraint is not checked and is not necessarily true.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso" id="GUID-F9E519B3-6DE9-47EC-9B6B-527E2D78349E__GUID-AD053996-8713-455A-8D5B-DEC99CA1D305">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF52214" target="_blank" href="../SQLRF/clauses002.htm#SQLRF52214"><span class="italic">Oracle Database SQL Language Reference</span></a> to learn about constraint states</p>
</div>
</div>
</div>
<a id="CNCPT522"></a>
<div class="props_rev_3"><a id="GUID-ED1E9D21-EDFB-4AAD-9193-87D576F67761"></a>
<h3 id="CNCPT-GUID-ED1E9D21-EDFB-4AAD-9193-87D576F67761" class="sect3">When the Database Checks Constraints for Validity</h3>
<div>
<p>Every constraint is either in a not deferrable (default) or deferrable state. This state determines when Oracle Database checks the constraint for validity.</p>
<p>The following graphic shows the options for deferrable constraints.</p>
<div class="figure" id="GUID-ED1E9D21-EDFB-4AAD-9193-87D576F67761__GUID-93E99346-78E4-48C1-8B3A-74CC84B0B63E">
<p class="titleinfigure">Figure 5-3 Options for Deferrable Constraints</p>
<img width="399" height="152" src="img/GUID-C9384A5E-E713-46BB-B998-B56A7CA08600-default.gif" alt="Description of Figure 5-3 follows" title="Description of Figure 5-3 follows"/><br/>
<a href="img_text/GUID-C9384A5E-E713-46BB-B998-B56A7CA08600-print.htm">Description of &#34;Figure 5-3 Options for Deferrable Constraints&#34;</a></div>
<!-- class="figure" --></div>
<a id="CNCPT88891"></a>
<div class="props_rev_3"><a id="GUID-6E6E9B10-620E-4211-A47E-B587B987BFF9"></a>
<h4 id="CNCPT-GUID-6E6E9B10-620E-4211-A47E-B587B987BFF9" class="sect4">Nondeferrable Constraints</h4>
<div>
<p>In a <span class="bold">nondeferrable constraint</span>, Oracle Database never defers the validity check of the constraint to the end of the transaction. Instead, the database checks the constraint at the end of each statement. If the constraint is violated, then the statement rolls back.</p>
<p>For example, a nondeferrable <code class="codeph">NOT NULL</code> constraint exists for the <code class="codeph">employees.last_name</code> column. If a session attempts to insert a row with no last name, then the database immediately rolls back the statement because the <code class="codeph">NOT NULL</code> constraint is violated. No row is inserted.</p>
</div>
</div>
<a id="CNCPT88892"></a>
<div class="props_rev_3"><a id="GUID-2C8FE035-70C8-454A-BB32-F6361A15DF96"></a>
<h4 id="CNCPT-GUID-2C8FE035-70C8-454A-BB32-F6361A15DF96" class="sect4">Deferrable Constraints</h4>
<div>
<p>A <span class="bold">deferrable constraint</span> permits a transaction to use the <code class="codeph">SET CONSTRAINT</code> clause to defer checking of this constraint until a <code class="codeph">COMMIT</code> statement is issued. If you make changes to the database that might violate the constraint, then this setting effectively enables you to disable the constraint until all changes are complete.</p>
<p>You can set the default behavior for when the database checks the deferrable constraint. You can specify either of the following attributes:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">INITIALLY IMMEDIATE</code></p>
<p>The database checks the constraint immediately after each statement executes. If the constraint is violated, then the database rolls back the statement.</p>
</li>
<li>
<p><code class="codeph">INITIALLY DEFERRED</code></p>
<p>The database checks the constraint when a <code class="codeph">COMMIT</code> is issued. If the constraint is violated, then the database rolls back the transaction.</p>
</li>
</ul>
<p>Assume that a deferrable <code class="codeph">NOT NULL</code> constraint on <code class="codeph">employees.last_name</code> is set to <code class="codeph">INITIALLY DEFERRED</code>. A user creates a transaction with 100 <code class="codeph">INSERT</code> statements, some of which have null values for <code class="codeph">last_name</code>. When the user attempts to commit, the database rolls back all 100 statements. However, if this constraint were set to <code class="codeph">INITIALLY IMMEDIATE</code>, then the database would not roll back the transaction.</p>
<p>If a constraint causes an action, then the database considers this action as part of the statement that caused it, whether the constraint is deferred or immediate. For example, deleting a row in <code class="codeph">departments</code> causes the deletion of all rows in <code class="codeph">employees</code> that reference the deleted department row. In this case, the deletion from <code class="codeph">employees</code> is considered part of the <code class="codeph">DELETE</code> statement executed against <code class="codeph">departments</code>.</p>
<div class="infoboxnotealso" id="GUID-2C8FE035-70C8-454A-BB32-F6361A15DF96__GUID-97AEABFA-0331-4A0C-A9F5-56F6E6995154">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF52216" target="_blank" href="../SQLRF/clauses002.htm#SQLRF52216"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about constraint attributes and their default values</p>
</div>
</div>
</div>
</div>
<a id="CNCPT422"></a>
<div class="props_rev_3"><a id="GUID-7E8D0D6D-E7D8-4329-9C36-67A0A79851A1"></a>
<h3 id="CNCPT-GUID-7E8D0D6D-E7D8-4329-9C36-67A0A79851A1" class="sect3">Examples of Constraint Checking</h3>
<div>
<p>The following examples help illustrate when Oracle Database performs the checking of constraints.</p>
<p>Assume the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">employees</code> table has the structure shown in <span class="q">&#34;<a href="datainte.htm#GUID-EF16D0D5-EB95-440A-9FFA-E890DFBB7C64" title="A self-referential integrity constraint is a foreign key that references a parent key in the same table.">Self-Referential Integrity Constraints</a>&#34;</span>.</p>
</li>
<li>
<p>The self-referential constraint makes entries in the <code class="codeph">manager_id</code> column dependent on the values of the <code class="codeph">employee_id</code> column.</p>
</li>
</ul>
</div>
<a id="CNCPT33341"></a>
<div class="props_rev_3"><a id="GUID-6A309B2D-42B1-4886-AAAF-DD51760A8103"></a>
<h4 id="CNCPT-GUID-6A309B2D-42B1-4886-AAAF-DD51760A8103" class="sect4">Example: Insertion of a Value in a Foreign Key Column When No Parent Key Value Exists</h4>
<div>
<p>This example concerns the insertion of the first row into the <code class="codeph">employees</code> table. No rows currently exist, so how can a row be entered if the value in the <code class="codeph">manager_id</code> column cannot reference an existing value in the <code class="codeph">employee_id</code> column?</p>
<div class="example" id="GUID-6A309B2D-42B1-4886-AAAF-DD51760A8103__GUID-A64C6438-3348-432D-90FB-32C528358D8C">
<p>Some possibilities are:</p>
<ul style="list-style-type: disc;">
<li>
<p>If the <code class="codeph">manager_id</code> column does not have a <code class="codeph">NOT NULL</code> constraint defined on&nbsp;it, then you can enter a null for the <code class="codeph">manager_id</code> column of the first row.</p>
<p>Because nulls are allowed in foreign keys, Oracle Database inserts this row into the table.</p>
</li>
<li>
<p>You can enter the same value in the <code class="codeph">employee_id</code> and <code class="codeph">manager_id</code> columns, specifying that the employee is his or her own manager.</p>
<p>This case reveals that Oracle Database performs its constraint checking <span class="italic">after</span> the statement executes. To allow a row to be entered with the same values in the parent key and the foreign key, the database must first insert the new row, and then determine whether any row in the table has an <code class="codeph">employee_id</code> that corresponds to the <code class="codeph">manager_id</code> of the new row.</p>
</li>
<li>
<p>A multiple row <code class="codeph">INSERT</code> statement, such as an <code class="codeph">INSERT</code> statement with nested <code class="codeph">SELECT</code> statements, can insert rows that reference one another.</p>
<p>For example, the first row might have 200 for employee ID and 300 for manager ID, while the second row has 300 for employee ID and 200 for manager. Constraint checking is deferred until the complete execution of the <code class="codeph">INSERT</code> statement. The database inserts all rows, and then checks all rows for constraint violations.</p>
</li>
</ul>
<p>Default values are included as part of an <code class="codeph">INSERT</code> statement before the statement is parsed. Thus, default column values are subject to all integrity constraint checking.</p>
</div>
<!-- class="example" --></div>
</div>
<a id="CNCPT88893"></a><a id="CNCPT88894"></a><a id="CNCPT33342"></a>
<div class="props_rev_3"><a id="GUID-8AA33487-F1D7-4EC8-ADC1-04A4EEF7974B"></a>
<h4 id="CNCPT-GUID-8AA33487-F1D7-4EC8-ADC1-04A4EEF7974B" class="sect4">Example: Update of All Foreign Key and Parent Key Values</h4>
<div>
<p>In this example, a self-referential constraint makes entries in the <code class="codeph">manager_id</code> column of <code class="codeph">employees</code> dependent on the values of the <code class="codeph">employee_id</code> column.</p>
<div class="example" id="GUID-8AA33487-F1D7-4EC8-ADC1-04A4EEF7974B__GUID-1319D7AE-3357-4B72-B48E-A43C3184D5A1">
<p>The company has been sold. Because of this sale, all employee numbers must be updated to be the current value plus 5000 to coordinate with the employee numbers of the new company. As shown in the following graphic, some employees are also managers:</p>
<div class="figure" id="GUID-8AA33487-F1D7-4EC8-ADC1-04A4EEF7974B__I3782">
<p class="titleinfigure">Figure 5-4 The employees Table Before Updates</p>
<img width="206" height="98" src="img/GUID-926EC9C5-F7A3-4273-890B-10A4BACDB5CA-default.gif" alt="Description of Figure 5-4 follows" title="Description of Figure 5-4 follows"/><br/>
<a href="img_text/GUID-926EC9C5-F7A3-4273-890B-10A4BACDB5CA-print.htm">Description of &#34;Figure 5-4 The employees Table Before Updates&#34;</a></div>
<!-- class="figure" -->
<p>Because manager numbers are also employee numbers, the manager numbers must also increase by 5000. You could execute the following SQL statement to update the values:</p>
<pre dir="ltr">UPDATE employees SET employee_id = employee_id + 5000,
  manager_id = manager_id + 5000;
</pre>
<p>Although a constraint is defined to verify that each <code class="codeph">manager_id</code> value matches an <code class="codeph">employee_id</code> value, the preceding statement is valid because the database effectively checks constraints after the statement completes. <a href="datainte.htm#GUID-8AA33487-F1D7-4EC8-ADC1-04A4EEF7974B__I3784">Figure 5-5</a> shows that the database performs the actions of the entire SQL statement before checking constraints.</p>
<div class="figure" id="GUID-8AA33487-F1D7-4EC8-ADC1-04A4EEF7974B__I3784">
<p class="titleinfigure">Figure 5-5 Constraint Checking</p>
<img width="668" height="137" src="img/GUID-89B62C01-CD9B-44C3-92BE-A881BC92B3A2-default.gif" alt="Description of Figure 5-5 follows" title="Description of Figure 5-5 follows"/><br/>
<a href="img_text/GUID-89B62C01-CD9B-44C3-92BE-A881BC92B3A2-print.htm">Description of &#34;Figure 5-5 Constraint Checking&#34;</a></div>
<!-- class="figure" -->
<p>The examples in this section illustrate the constraint checking mechanism during <code class="codeph">INSERT</code> and <code class="codeph">UPDATE</code> statements, but the database uses the same mechanism for all types of DML statements. The database uses the same mechanism for all types of constraints, not just self-referential constraints.</p>
<div class="infobox-note" id="GUID-8AA33487-F1D7-4EC8-ADC1-04A4EEF7974B__GUID-3F0F4661-F1EC-4DDA-AAEF-657FBD9D1EDC">
<p class="notep1">Note:</p>
<p>Operations on a <a href="glossary.htm#GUID-1274BCF5-2EC1-4752-B9CE-998A85A83307"><span class="xrefglossterm">view</span></a> or <a href="glossary.htm#GUID-FBC00D26-94DC-4BA6-82D0-60A7F29CB81D"><span class="xrefglossterm">synonym</span></a> are subject to the integrity constraints defined on the base tables.</p>
</div>
</div>
<!-- class="example" --></div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1196">
<tr>
<td class="cellalignment1203">
<table class="cellalignment1201">
<tr>
<td class="cellalignment1200"><a href="schemaob.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1200"><a href="datadict.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1993, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1205">
<table class="cellalignment1199">
<tr>
<td class="cellalignment1200"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1200"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1200"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1200"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1200"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1200"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>