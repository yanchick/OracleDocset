<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-4105"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Server-Side%20Programming%3A%20PL%2FSQL%20and%20Java"></a><title>Server-Side Programming: PL/SQL and Java</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="SQL explains the Structured Query Language (SQL) language and how the database processes SQL statements. This chapter explains how Procedural Language/SQL (PL/SQL) or Java programs stored in the database can use SQL."/>
<meta name="keywords" content="server-side programming, overview, triggers, precompilers, client-side programming, programming, server-side, anonymous PL/SQL blocks, PL/SQL, anonymous blocks, stored procedures, procedures, SQL, PL/SQL and, program units, functions, security, definer&rsquo;s rights, invoker&rsquo;s rights, SGA (system global area), shared pool, advantages, rights, definer&rsquo;s and invoker&rsquo;s, privileges, PL/SQL procedures and, memory, memory allocation, data dictionary, stored subprograms, subprograms, PL/SQL, execution of subprograms, EXECUTE statement, execution, UTL_HTTP package, packages, performance, private, public, advantages of, package creation, creation, subprograms, execution in a PL/SQL package, subprogram executions, SQL*Plus, executing a package, Enterprise Manager, dynamic SQL, DBMS_SQL package, embedded, cursors, explicit, language constructs, exceptions, PL/SQL, exceptions, collections, records, PL/SQL, records, collections, PL/SQL, external, external procedures, compiled, compiled PL/SQL, executing, PL/SQL engine, Oracle Net Services Connection Manager, Java, virtual machine, APIs (application program interfaces), Oracle JVM, main components, application servers, SQLJ, JDBC, accessing SQL, driver types, drivers, embedded SQL, SQLJ standard, SQLJ translator, auditing, cascading, uses of, DML (data manipulation language), INSTEAD OF triggers, INSTEAD OF, updates, updatability of views, views, statement, row, rows, timing, simple, compound, simple triggers, compound triggers, BOOLEAN data type, data types, BOOLEAN, restrictions, UNKNOWN does not fire, components of, firing (executing), privileges required, storage, storage of, pseudocode"/>
<meta name="dcterms.created" content="2017-07-10T11:33:29Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Concepts"/>
<meta name="dcterms.identifier" content="E41396-15"/>
<meta name="dcterms.isVersionOf" content="CNCPT"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1993, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="sqllangu.htm" title="Previous" type="text/html"/>
<link rel="Next" href="part_txn.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41396-15.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-D4A154D2-DF56-45DA-863C-BED5DA6BDA34"></a> <span id="PAGE" style="display:none;">14/34</span> <!-- End Header -->
<a id="CNCPT036"></a>
<h1 id="CNCPT-GUID-D4A154D2-DF56-45DA-863C-BED5DA6BDA34" class="sect1"><span class="enumeration_chapter">8</span> Server-Side Programming: PL/SQL and Java</h1>
<div>
<p><span class="bold">SQL</span> explains the Structured Query Language (SQL) language and how the database processes SQL statements. This chapter explains how Procedural Language/SQL (PL/SQL) or Java programs stored in the database can use SQL.</p>
<p>This chapter includes the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="srvrside.htm#GUID-6B5D98B7-A25D-4187-B3A9-43629E214635" title="In a nonprocedural language such as SQL, the set of data to be operated on is specified, but not the operations to be performed or the manner in which they are to be carried out.">Introduction to Server-Side Programming</a></p>
</li>
<li>
<p><a href="srvrside.htm#GUID-1E17CED5-73C6-4C10-85F1-A2CB4D5F9855" title="PL/SQL provides a server-side, stored procedural language that is easy-to-use, seamless with SQL, robust, portable, and secure. You can access and manipulate database data using procedural schema objects called PL/SQL program units.">Overview of PL/SQL</a></p>
</li>
<li>
<p><a href="srvrside.htm#GUID-DDFED855-D1F3-4AB2-8FD3-B2A1B3C922D7" title="Java has emerged as the object-oriented programming language of choice.">Overview of Java in Oracle Database</a></p>
</li>
<li>
<p><a href="srvrside.htm#GUID-40297ADF-0968-42F8-B8B9-84AD6ADCBE63" title="A database trigger is a compiled stored program unit, written in either PL/SQL or Java, that Oracle Database invokes (&#34;fires&#34;) automatically in certain situations.">Overview of Triggers</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-D4A154D2-DF56-45DA-863C-BED5DA6BDA34__GUID-E8018424-A5DC-43F5-9CFF-E7C8FD41C575">
<p class="notep1">See Also:</p>
<p><a href="sqllangu.htm#GUID-DA48618A-A6BB-421A-A10A-02859D8ED9AD" title="This chapter provides an overview of the Structured Query Language (SQL) and how Oracle Database processes SQL statements.">SQL</a></p>
</div>
</div>
<a id="CNCPT1758"></a>
<div class="props_rev_3"><a id="GUID-6B5D98B7-A25D-4187-B3A9-43629E214635"></a>
<h2 id="CNCPT-GUID-6B5D98B7-A25D-4187-B3A9-43629E214635" class="sect2">Introduction to Server-Side Programming</h2>
<div>
<p>In a nonprocedural language such as SQL, the set of data to be operated on is specified, but not the operations to be performed or the manner in which they are to be carried out.</p>
<p>In a procedural language program, most statement execution depends on previous or subsequent statements and on control structures, such as loops or conditional branches, that are not available in SQL. For an illustration of the difference between procedural and nonprocedural languages, suppose that the following SQL statement queries the <code class="codeph">employees</code> table:</p>
<pre dir="ltr">SELECT employee_id, department_id, last_name, salary FROM employees;
</pre>
<p>The preceding statement requests data, but does not apply logic to the data. However, suppose you want an application to determine whether each employee in the data set deserves a raise based on salary and department performance. A necessary condition of a raise is that the employee did not receive more than three raises in the last five years. If a raise is called for, then the application must adjust the salary and email the manager; otherwise, the application must update a report.</p>
<p>The problem is how procedural database applications requiring conditional logic and program flow control can use SQL. The basic development approaches are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Use client-side programming to embed SQL statements in applications written in procedural languages such as C, C++, or Java</p>
<p>You can place SQL statements in source code and submit it to a <a href="glossary.htm#GUID-FDCF892E-6AD5-4AC9-9D1D-A9C7D106D21D"><span class="xrefglossterm">precompiler</span></a> or Java translator before compilation. Alternatively, you can eliminate the precompilation step and use an API such as Java Database Connectivity (JDBC) or Oracle Call Interface (OCI) to enable the application to interact with the database.</p>
</li>
<li>
<p>Use server-side programming to develop data logic that resides in the database</p>
<p>An application can explicitly invoke stored subprograms (procedures and functions), written in PL/SQL (pronounced <span class="italic">P L sequel</span>) or Java. You can also create a <a href="glossary.htm#GUID-8BA32C58-ACF3-4B6B-941F-586DE399D22A"><span class="xrefglossterm">trigger</span></a>, which is named program unit that is stored in the database and invoked in response to a specified event.</p>
</li>
</ul>
<p>This chapter explains the second approach. The principal benefit of server-side programming is that functionality built into the database can be deployed anywhere. The database and not the application determines the best way to perform tasks on a given operating system. Also, subprograms increase scalability by centralizing application processing on the server, enabling clients to reuse code. Because subprogram calls are quick and efficient, a single call can start a compute-intensive stored subprogram, reducing network traffic.</p>
<p>You can use the following languages to store data logic in Oracle Database:</p>
<ul style="list-style-type: disc;">
<li>
<p>PL/SQL</p>
<p>PL/SQL is the Oracle Database procedural extension to SQL. PL/SQL is integrated with the database, supporting all Oracle SQL statements, functions, and data types. Applications written in database APIs can invoke PL/SQL stored subprograms and send PL/SQL code blocks to the database for execution.</p>
</li>
<li>
<p>Java</p>
<p>Oracle Database also provides support for developing, storing, and deploying Java applications. Java stored subprograms run in the database and are independent of programs that run in the middle tier. Java stored subprograms interface with SQL using a similar execution model to PL/SQL.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-6B5D98B7-A25D-4187-B3A9-43629E214635__GUID-7663186E-29A6-4904-B7B0-7435318534A7">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="cncptdev.htm#GUID-87F23274-B506-486B-8775-880016095EF5" title="Client/server programs are typically written using an Oracle precompiler, which is a programming tool that enables you to embed SQL statements in high-level programs.SQLJ is an ANSI SQL-1999 standard for embedding SQL statements in Java source code. SQLJ provides a simpler alternative to the Java Database Connectivity (JDBC) API for client-side SQL data access from Java.As an alternative to precompilers, Oracle provides the OCI and OCCI APIs.ODBC is a standard API that enables applications to connect to a database and then prepare and run SQL statements.">Client-Side Database Programming</a>&#34;</span> to learn about embedding SQL with precompilers and APIs</p>
</li>
<li>
<p><a class="olink TDDDG10000" target="_blank" href="../TDDDG/tdddg_intro.htm#TDDDG10000"><span><cite>Oracle Database 2 Day Developer&#39;s Guide</cite></span></a> for an introduction to Oracle Database application development</p>
</li>
<li>
<p><a class="olink ADFNS00109" target="_blank" href="../ADFNS/adfns_environments.htm#ADFNS00109"><span><cite>Oracle Database Development Guide</cite></span></a> to learn how to choose a programming environment</p>
</li>
</ul>
</div>
</div>
</div>
<a id="CNCPT416"></a>
<div class="props_rev_3"><a id="GUID-1E17CED5-73C6-4C10-85F1-A2CB4D5F9855"></a>
<h2 id="CNCPT-GUID-1E17CED5-73C6-4C10-85F1-A2CB4D5F9855" class="sect2">Overview of PL/SQL</h2>
<div>
<p>PL/SQL provides a server-side, stored procedural language that is easy-to-use, seamless with SQL, robust, portable, and secure. You can access and manipulate database data using procedural schema objects called <span class="italic">PL/SQL program units</span>.</p>
<p>PL/SQL program units generally are categorized as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>A <a href="glossary.htm#GUID-4BF65C07-E5DD-454C-8AD0-E38EF5672CE4"><span class="xrefglossterm">PL/SQL subprogram</span></a> is a PL/SQL block that is stored in the database and can be called by name from an application. When you create a subprogram, the database parses the subprogram and stores its parsed representation in the database. You can declare a subprogram as a procedure or a function.</p>
</li>
<li>
<p>A <a href="glossary.htm#GUID-97C2CD46-CE4D-4A23-B44D-815A1E8F0906"><span class="xrefglossterm">PL/SQL anonymous block</span></a> is a PL/SQL block that appears in your application and is not named or stored in the database. In many applications, PL/SQL blocks can appear wherever SQL statements can appear.</p>
</li>
</ul>
<p>The PL/SQL compiler and interpreter are embedded in Oracle SQL Developer, giving developers a consistent and leveraged development model on both client and server. Also, PL/SQL stored procedures can be called from several database clients, such as Pro*C, JDBC, ODBC, or OCI, and from Oracle Reports and Oracle Forms.</p>
<div class="infoboxnotealso" id="GUID-1E17CED5-73C6-4C10-85F1-A2CB4D5F9855__GUID-9582AD50-F0BC-40DA-9E70-09D4B64431F4">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="cncptdev.htm#GUID-D1C1BC1D-03C7-4A18-BB88-0D76F311DAF0" title="Oracle provides several tools for use in developing database applications. This section describes some commonly used development tools.">Tools for Database Developers</a>&#34;</span></p>
</li>
<li>
<p><a class="olink LNPLS001" target="_blank" href="../LNPLS/overview.htm#LNPLS001"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a> for complete information about PL/SQL, including packages</p>
</li>
</ul>
</div>
</div>
<a id="CNCPT1776"></a>
<div class="props_rev_3"><a id="GUID-7C398775-F4FB-47A2-AED5-458E00FB1E35"></a>
<h3 id="CNCPT-GUID-7C398775-F4FB-47A2-AED5-458E00FB1E35" class="sect3">PL/SQL Subprograms</h3>
<div>
<p>A PL/SQL subprogram is a named PL/SQL block that permits the caller to supply parameters that can be input only, output only, or input and output values.</p>
<p>A subprogram solves a specific problem or performs related tasks and serves as a building block for modular, maintainable database applications. A subprogram is either a <a href="glossary.htm#GUID-D2210901-18F2-43C0-B0CC-6953E94CD7EF"><span class="xrefglossterm">PL/SQL procedure</span></a> or a <a href="glossary.htm#GUID-1DBC272B-41F6-43A9-A894-D7E714017E2B"><span class="xrefglossterm">PL/SQL function</span></a>. Procedures and functions are identical except that functions always return a single value to the caller, whereas procedures do not. The term <span class="italic">PL/SQL procedure</span> in this chapter refers to either a procedure or a function.</p>
<div class="infoboxnotealso" id="GUID-7C398775-F4FB-47A2-AED5-458E00FB1E35__GUID-9FD5B2CC-EB41-4A46-9D75-A9E0DF550A82">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink GUID-2F2833F4-62F3-4FC7-8FC1-B742E44727B0" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=GUID-2F2833F4-62F3-4FC7-8FC1-B742E44727B0"><span><cite>Pro*C/C++ Programmer&#39;s Guide</cite></span></a> and <a class="olink LNPCB006" target="_blank" href="../LNPCB/pco06pls.htm#LNPCB006"><span><cite>Pro*COBOL Programmer&#39;s Guide</cite></span></a> to learn about stored procedures in these languages</p>
</li>
<li>
<p><a class="olink LNPLS174" target="_blank" href="../LNPLS/overview.htm#LNPLS174"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a></p>
</li>
</ul>
</div>
</div>
<a id="CNCPT1777"></a>
<div class="props_rev_3"><a id="GUID-BC90E680-65D8-4CD4-BCE2-A6A2FE732D59"></a>
<h4 id="CNCPT-GUID-BC90E680-65D8-4CD4-BCE2-A6A2FE732D59" class="sect4">Advantages of PL/SQL Subprograms</h4>
<div>
<p>Server-side programming has many advantages over client-side programming.</p>
<p>Advantages include:</p>
<ul style="list-style-type: disc;">
<li>
<p>Improved performance</p>
<ul style="list-style-type: disc;">
<li>
<p>The amount of information that an application must send over a network is small compared with issuing individual SQL statements or sending the text of an entire PL/SQL block to Oracle Database, because the information is sent only once and thereafter invoked when it is used.</p>
</li>
<li>
<p>The compiled form of a procedure is readily available in the database, so no compilation is required at execution time.</p>
</li>
<li>
<p>If the procedure is present in the <a href="glossary.htm#GUID-64AFFF3A-C836-44F9-A25C-86CE4B9B16A8"><span class="xrefglossterm">shared pool</span></a> of the <a href="glossary.htm#GUID-3F87437B-614A-472E-B691-F09D4A310DE4"><span class="xrefglossterm">SGA</span></a>, then the database need not retrieve it from disk and can begin execution immediately.</p>
</li>
</ul>
</li>
<li>
<p>Memory allocation</p>
<p>Because stored procedures take advantage of the shared memory capabilities of Oracle Database, it must load only a single copy of the procedure into memory for execution by multiple users. Sharing code among users results in a substantial reduction in database memory requirements for applications.</p>
</li>
<li>
<p>Improved productivity</p>
<p>Stored procedures increase development productivity. By designing applications around a common set of procedures, you can avoid redundant coding. For example, you can write procedures to manipulate rows in the <code class="codeph">employees</code> table. Any application can call these procedures without requiring SQL statements to be rewritten. If the methods of data management change, then only the procedures must be modified, not the applications that use the procedures.</p>
<p>Stored procedures are perhaps the best way to achieve code reuse. Because any client application written in any language that connects to the database can invoke stored procedures, they provide maximum code reuse in all environments.</p>
</li>
<li>
<p>Integrity</p>
<p>Stored procedures improve the integrity and consistency of your applications. By developing applications around a common group of procedures, you reduce the likelihood of coding errors.</p>
<p>For example, you can test a subprogram to guarantee that it returns an accurate result and, after it is verified, reuse it in any number of applications without retesting. If the data structures referenced by the procedure are altered, then you must only recompile the procedure. Applications that call the procedure do not necessarily require modifications.</p>
</li>
<li>
<p>Security with definer&#39;s rights procedures</p>
<p>Stored procedures can help enforce data security. A <a href="glossary.htm#GUID-743039B9-002B-48D5-AE43-001BCDBEAA3E"><span class="xrefglossterm">definer&#39;s rights PL/SQL procedure</span></a> executes with the <a href="glossary.htm#GUID-197053D8-1AA8-4B0F-BEE1-8C8AD2DBD0C6"><span class="xrefglossterm">privilege</span></a> of its owner, not its current user. Thus, you can restrict the database tasks that users perform by allowing them to access data only through procedures and functions that run with the definer&#39;s privileges.</p>
<p>For example, you can grant users access to a procedure that updates a table but not grant access to the table itself. When a user invokes the procedure, it runs with the privileges of its owner. Users who have only the privilege to run the procedure (but not privileges to query, update, or delete from the underlying tables) can invoke the procedure but not manipulate table data in any other way.</p>
</li>
<li>
<p>Inherited privileges and schema context with invoker&#39;s rights procedures</p>
<p>An <a href="glossary.htm#GUID-25256D39-4B45-410E-8CEA-2463E6934152"><span class="xrefglossterm">invoker&#39;s rights PL/SQL procedure</span></a> executes in the current user&#39;s schema with the current user&#39;s privileges. In other words, an invoker&#39;s rights procedure is not tied to a particular user or schema. Invoker&#39;s rights procedures make it easy for application developers to centralize application logic, even when the underlying data is divided among user schemas.</p>
<p>For example, an <code class="codeph">hr_manager</code> user who runs an update procedure on the <code class="codeph">hr.employees</code> table can update salaries, whereas an <code class="codeph">hr_clerk</code> who runs the same procedure is restricted to updating address data.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-BC90E680-65D8-4CD4-BCE2-A6A2FE732D59__GUID-4D946D74-A5A8-4FB2-86E1-A824B1EAB4B5">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="cmntopc.htm#GUID-4D6D2B67-1B65-476D-852A-976E9D153EEC" title="In general, database security involves user authentication, encryption, access control, and monitoring.">Overview of Database Security</a>&#34;</span></p>
</li>
<li>
<p><a class="olink LNPLS008" target="_blank" href="../LNPLS/overview.htm#LNPLS008"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a> for an overview of PL/SQL subprograms</p>
</li>
<li>
<p><a class="olink DBSEG50010" target="_blank" href="../DBSEG/authorization.htm#DBSEG50010"><span><cite>Oracle Database Security Guide</cite></span></a> to learn more about definer&#39;s and invoker&#39;s rights</p>
</li>
</ul>
</div>
</div>
</div>
<a id="CNCPT88932"></a><a id="CNCPT88931"></a>
<div class="props_rev_3"><a id="GUID-07E0EC3E-2629-4673-9762-202B8074CB52"></a>
<h4 id="CNCPT-GUID-07E0EC3E-2629-4673-9762-202B8074CB52" class="sect4">Creation of PL/SQL Subprograms</h4>
<div>
<p>A standalone stored subprogram is a subprogram created at the schema level with the <code class="codeph">CREATE PROCEDURE</code> or <code class="codeph">CREATE FUNCTION</code> statement. Subprograms defined in a package are called <span class="bold">package subprograms</span> and are considered a part of the package.</p>
<p>The database stores subprograms in the data dictionary as schema objects. A subprogram has a specification, which includes descriptions of any parameters, and a body.</p>
<div class="example" id="GUID-07E0EC3E-2629-4673-9762-202B8074CB52__BABIAJHG">
<p class="titleinexample">Example 8-1 PL/SQL Procedure</p>
This example shows part of a creation statement for the standalone PL/SQL procedure <code class="codeph">hire_employees</code>. The procedure inserts a row into the <code class="codeph">employees</code> table.
<pre dir="ltr">CREATE PROCEDURE hire_employees 
  (p_last_name VARCHAR2, p_job_id VARCHAR2, p_manager_id NUMBER, 
   p_hire_date DATE, p_salary NUMBER, p_commission_pct NUMBER, 
   p_department_id NUMBER)
IS 
BEGIN
.
.
.
  INSERT INTO employees (employee_id, last_name, job_id, manager_id, hire_date, 
    salary, commission_pct, department_id)
  VALUES (emp_sequence.NEXTVAL, p_last_name, p_job_id, p_manager_id, 
          p_hire_date, p_salary, p_commission_pct, p_department_id);
.
.
.
END;
</pre>
<div class="infoboxnotealso" id="GUID-07E0EC3E-2629-4673-9762-202B8074CB52__GUID-631AA004-1EFF-4F80-9559-6B808C3C5337">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink TDDDG41000" target="_blank" href="../TDDDG/tdddg_subprograms.htm#TDDDG41000"><span><cite>Oracle Database 2 Day Developer&#39;s Guide</cite></span></a> to learn how to create subprograms</p>
</li>
<li>
<p><a class="olink LNPLS01373" target="_blank" href="../LNPLS/create_procedure.htm#LNPLS01373"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a> to learn about the <code class="codeph">CREATE PROCEDURE</code> statement</p>
</li>
</ul>
</div>
</div>
<!-- class="example" --></div>
</div>
<a id="CNCPT88934"></a><a id="CNCPT88933"></a>
<div class="props_rev_3"><a id="GUID-E94C8618-0464-45DA-AA90-07BA9EB4458C"></a>
<h4 id="CNCPT-GUID-E94C8618-0464-45DA-AA90-07BA9EB4458C" class="sect4">Execution of PL/SQL Subprograms</h4>
<div>
<p>Users can execute a subprogram interactively in multiple ways.</p>
<p>The options are:</p>
<ul style="list-style-type: disc;">
<li>
<p>Using an Oracle tool, such as SQL*Plus or SQL Developer (see <span class="q">&#34;<a href="cncptdev.htm#GUID-D1C1BC1D-03C7-4A18-BB88-0D76F311DAF0" title="Oracle provides several tools for use in developing database applications. This section describes some commonly used development tools.">Tools for Database Developers</a>&#34;</span>)</p>
</li>
<li>
<p>Calling it explicitly in the code of a database application, such as an Oracle Forms or precompiler application (see <span class="q">&#34;<a href="cncptdev.htm#GUID-87F23274-B506-486B-8775-880016095EF5" title="Client/server programs are typically written using an Oracle precompiler, which is a programming tool that enables you to embed SQL statements in high-level programs.SQLJ is an ANSI SQL-1999 standard for embedding SQL statements in Java source code. SQLJ provides a simpler alternative to the Java Database Connectivity (JDBC) API for client-side SQL data access from Java.As an alternative to precompilers, Oracle provides the OCI and OCCI APIs.ODBC is a standard API that enables applications to connect to a database and then prepare and run SQL statements.">Client-Side Database Programming</a>&#34;</span>)</p>
</li>
<li>
<p>Calling it explicitly in the code of another procedure or trigger</p>
</li>
</ul>
<p><a href="srvrside.htm#GUID-E94C8618-0464-45DA-AA90-07BA9EB4458C__FIG-124-16F280AE">Figure 8-1</a> shows different database applications calling <code class="codeph">hire_employees</code>.</p>
<div class="figure" id="GUID-E94C8618-0464-45DA-AA90-07BA9EB4458C__FIG-124-16F280AE">
<p class="titleinfigure">Figure 8-1 Multiple Executions of a Stored Procedure</p>
<img width="470" height="338" src="img/GUID-8CE71325-FB61-4206-BA40-5B88EA47CC08-default.gif" alt="Description of Figure 8-1 follows" title="Description of Figure 8-1 follows"/><br/>
<a href="img_text/GUID-8CE71325-FB61-4206-BA40-5B88EA47CC08-print.htm">Description of &#34;Figure 8-1 Multiple Executions of a Stored Procedure&#34;</a></div>
<!-- class="figure" -->
<p>Alternatively, a privileged user can use Oracle Enterprise Manager or SQL*Plus to run the <code class="codeph">hire_employees</code> procedure using a statement such as the following:</p>
<pre dir="ltr">EXECUTE hire_employees (&#39;TSMITH&#39;, &#39;CLERK&#39;, 1037, SYSDATE, 500, NULL, 20); 
</pre>
<p>The preceding statement inserts a new record for <code class="codeph">TSMITH</code> in the <code class="codeph">employees</code> table.</p>
<p>A stored procedure depends on the objects referenced in its body. The database automatically tracks and manages these dependencies. For example, if you alter the definition of the <code class="codeph">employees</code> table referenced by the <code class="codeph">hire_employees</code> procedure in a manner that would affect this procedure, then the procedure must be recompiled to validate that it still works as designed. Usually, the database automatically administers such dependency management.</p>
<div class="infoboxnotealso" id="GUID-E94C8618-0464-45DA-AA90-07BA9EB4458C__GUID-FFA83CB7-EAD2-4F20-8084-56F8E7F995B1">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink LNPLS008" target="_blank" href="../LNPLS/overview.htm#LNPLS008"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a> to learn how to use PL/SQL subprograms</p>
</li>
<li>
<p><a class="olink SQPUG043" target="_blank" href="../SQPUG/ch_twelve022.htm#SQPUG043"><span><cite>SQL*Plus User&#39;s Guide and Reference</cite></span></a> to learn about the <code class="codeph">EXECUTE</code> command</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="CNCPT1784"></a>
<div class="props_rev_3"><a id="GUID-87FA8137-A449-4542-8869-441C63810C63"></a>
<h3 id="CNCPT-GUID-87FA8137-A449-4542-8869-441C63810C63" class="sect3">PL/SQL Packages</h3>
<div>
<p>A <span class="bold">PL/SQL package</span> is a group of related subprograms, along with the cursors and variables they use, stored together in the database for continued use as a unit. Packaged subprograms can be called explicitly by applications or users.</p>
<p>Oracle Database includes many supplied packages that extend database functionality and provide PL/SQL access to SQL features. For example, the <code class="codeph">UTL_HTTP</code> package enables HTTP callouts from PL/SQL and SQL to access data on the Internet or to call Oracle Web Server Cartridges. You can use the supplied packages when creating applications or as a source of ideas when creating your own stored procedures.</p>
</div>
<a id="CNCPT1785"></a>
<div class="props_rev_3"><a id="GUID-C7F00F30-5D7F-47F2-856F-CEE8E6465820"></a>
<h4 id="CNCPT-GUID-C7F00F30-5D7F-47F2-856F-CEE8E6465820" class="sect4">Advantages of PL/SQL Packages</h4>
<div>
<p>PL/SQL packages provide a number of advantages to the application developer.</p>
<p>Advantages include:</p>
<ul style="list-style-type: disc;">
<li>
<p>Encapsulation</p>
<p>Packages enable you to encapsulate or group stored procedures, variables, data types, and so on in a named, stored unit. Encapsulation provides better organization during development and also more flexibility. You can create specifications and reference public procedures without actually creating the package body. Encapsulation simplifies privilege management. Granting the privilege for a package makes package constructs accessible to the grantee.</p>
</li>
<li>
<p>Data security</p>
<p>The methods of package definition enable you to specify which variables, cursors, and procedures are public and private. Public means that it is directly accessible to the user of a package. Private means that it is hidden from the user of a package.</p>
<p>For example, a package can contain 10 procedures. You can define the package so that only three procedures are public and therefore available for execution by a user of the package. The remaining procedures are private and can only be accessed by the procedures within the package. Do not confuse public and private package variables with grants to <code class="codeph">PUBLIC</code>.</p>
</li>
<li>
<p>Better performance</p>
<p>An entire package is loaded into memory in small chunks when a procedure in the package is called for the first time. This load is completed in one operation, as opposed to the separate loads required for standalone procedures. When calls to related packaged procedures occur, no disk I/O is needed to run the compiled code in memory.</p>
<p>A package body can be replaced and recompiled without affecting the specification. Consequently, schema objects that reference a package&#39;s constructs (always through the specification) need not be recompiled unless the package specification is also replaced. By using packages, unnecessary recompilations can be minimized, resulting in less impact on overall database performance.</p>
</li>
</ul>
</div>
</div>
<a id="CNCPT88936"></a><a id="CNCPT88935"></a>
<div class="props_rev_3"><a id="GUID-1CB910EF-09B4-43FD-AEC5-7450296AC58C"></a>
<h4 id="CNCPT-GUID-1CB910EF-09B4-43FD-AEC5-7450296AC58C" class="sect4">Creation of PL/SQL Packages</h4>
<div>
<p>You create a package in two parts: the specification and the body. The package specification declares all public constructs of the package, whereas the package body defines all constructs (public and private) of the package.</p>
<p>The following example shows part of a statement that creates the package specification for <code class="codeph">employees_management</code>, which encapsulates several subprograms used to manage an employee database. Each part of the package is created with a different statement.</p>
<pre dir="ltr">CREATE PACKAGE employees_management AS 
  FUNCTION hire_employees (last_name VARCHAR2, job_id VARCHAR2, manager_id NUMBER, 
    salary NUMBER, commission_pct NUMBER, department_id NUMBER) RETURN NUMBER; 
  PROCEDURE fire_employees(employee_id NUMBER); 
  PROCEDURE salary_raise(employee_id NUMBER, salary_incr NUMBER); 
.
.
.
  no_sal EXCEPTION;
END employees_management;
</pre>
<p>The specification declares the function <code class="codeph">hire_employees</code>, the procedures <code class="codeph">fire_employees</code> and <code class="codeph">salary_raise</code>, and the exception <code class="codeph">no_sal</code>. All of these public program objects are available to users who have access to the package.</p>
<p>The <code class="codeph">CREATE PACKAGE BODY</code> statement defines objects declared in the specification. The package body must be created in the same schema as the package. After creating the package, you can develop applications that call any of these public procedures or functions or raise any of the public exceptions of the package.</p>
<div class="infoboxnotealso" id="GUID-1CB910EF-09B4-43FD-AEC5-7450296AC58C__GUID-0E9E3A46-FE7F-4067-B814-DCEBD37F6E15">
<p class="notep1">See Also:</p>
<p><a class="olink LNPLS01371" target="_blank" href="../LNPLS/create_package.htm#LNPLS01371"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a> to learn about the <code class="codeph">CREATE PACKAGE</code> statement</p>
</div>
</div>
</div>
<a id="CNCPT88938"></a><a id="CNCPT88937"></a>
<div class="props_rev_3"><a id="GUID-82299071-97A1-47B6-A0AB-202F65F3F865"></a>
<h4 id="CNCPT-GUID-82299071-97A1-47B6-A0AB-202F65F3F865" class="sect4">Execution of PL/SQL Package Subprograms</h4>
<div>
<p>Database triggers, stored subprograms, 3GL application programs, and Oracle tools can reference package contents.</p>
<p>The following graphic shows database applications invoking procedures and functions in the <code class="codeph">employees_management</code> package.</p>
<div class="figure" id="GUID-82299071-97A1-47B6-A0AB-202F65F3F865__I18841">
<p class="titleinfigure">Figure 8-2 Calling Subprograms in a PL/SQL Package</p>
<img width="668" height="417" src="img/GUID-AA5363B4-FC45-48BB-B9A7-D50A07B97C55-default.gif" alt="Description of Figure 8-2 follows" title="Description of Figure 8-2 follows"/><br/>
<a href="img_text/GUID-AA5363B4-FC45-48BB-B9A7-D50A07B97C55-print.htm">Description of &#34;Figure 8-2 Calling Subprograms in a PL/SQL Package&#34;</a></div>
<!-- class="figure" -->
<p>Database applications explicitly call packaged procedures as necessary. After being granted the privileges for the <code class="codeph">employees_management</code> package, a user can explicitly run any of the procedures contained in it. For example, SQL*Plus can issue the following statement to run the <code class="codeph">hire_employees</code> package procedure:</p>
<pre dir="ltr">EXECUTE employees_management.hire_employees (&#39;TSMITH&#39;, &#39;CLERK&#39;, 1037, SYSDATE, 500, NULL, 20);
</pre>
<div class="infoboxnotealso" id="GUID-82299071-97A1-47B6-A0AB-202F65F3F865__GUID-4EB5C854-FCD7-4E1E-8937-02E52D926F6C">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink LNPLS009" target="_blank" href="../LNPLS/overview.htm#LNPLS009"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a> for an introduction to PL/SQL packages</p>
</li>
<li>
<p><a class="olink ADFNS009" target="_blank" href="../ADFNS/adfns_packages.htm#ADFNS009"><span><cite>Oracle Database Development Guide</cite></span></a> to learn how to code PL/SQL packages</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="CNCPT88939"></a><a id="CNCPT1779"></a>
<div class="props_rev_3"><a id="GUID-76EA9A76-8D25-4FF5-A6D1-4F358B0651AA"></a>
<h3 id="CNCPT-GUID-76EA9A76-8D25-4FF5-A6D1-4F358B0651AA" class="sect3">PL/SQL Anonymous Blocks</h3>
<div>
<p>A PLSQL anonymous block is an unnamed, nonpersistent PL/SQL unit.</p>
<p>Typical uses for anonymous blocks include:</p>
<ul style="list-style-type: disc;">
<li>
<p>Initiating calls to subprograms and package constructs</p>
</li>
<li>
<p>Isolating exception handling</p>
</li>
<li>
<p>Managing control by nesting code within other PL/SQL blocks</p>
</li>
</ul>
<p>Anonymous blocks do not have the code reuse advantages of stored subprograms. <a href="srvrside.htm#GUID-76EA9A76-8D25-4FF5-A6D1-4F358B0651AA__CHDJGEBD" title="This table summarizes the differences between anonymous blocks and subprograms.">Table 8-1</a> summarizes the differences between the two types of program units.</p>
<div class="tblformal" id="GUID-76EA9A76-8D25-4FF5-A6D1-4F358B0651AA__CHDJGEBD">
<p class="titleintable">Table 8-1 Differences Between Anonymous Blocks and Subprograms</p>
<table class="cellalignment1206" title="Differences Between Anonymous Blocks and Subprograms" summary="This table summarizes the differences between anonymous blocks and subprograms.">
<thead>
<tr class="cellalignment1197">
<th class="cellalignment1241" id="d37821e3556">Is the PL/SQL Unit ...</th>
<th class="cellalignment1231" id="d37821e3559">Anonymous Blocks</th>
<th class="cellalignment1231" id="d37821e3562">Subprograms</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1197">
<td class="cellalignment1242" id="d37821e3567" headers="d37821e3556">
<p>Specified with a name?</p>
</td>
<td class="cellalignment1232" headers="d37821e3567 d37821e3559">
<p>No</p>
</td>
<td class="cellalignment1232" headers="d37821e3567 d37821e3562">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1242" id="d37821e3577" headers="d37821e3556">
<p>Compiled with every reuse?</p>
</td>
<td class="cellalignment1232" headers="d37821e3577 d37821e3559">
<p>No</p>
</td>
<td class="cellalignment1232" headers="d37821e3577 d37821e3562">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1242" id="d37821e3587" headers="d37821e3556">
<p>Stored in the database?</p>
</td>
<td class="cellalignment1232" headers="d37821e3587 d37821e3559">
<p>No</p>
</td>
<td class="cellalignment1232" headers="d37821e3587 d37821e3562">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1242" id="d37821e3597" headers="d37821e3556">
<p>Invocable by other applications?</p>
</td>
<td class="cellalignment1232" headers="d37821e3597 d37821e3559">
<p>No</p>
</td>
<td class="cellalignment1232" headers="d37821e3597 d37821e3562">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1242" id="d37821e3607" headers="d37821e3556">
<p>Capable of returning bind variable values?</p>
</td>
<td class="cellalignment1232" headers="d37821e3607 d37821e3559">
<p>Yes</p>
</td>
<td class="cellalignment1232" headers="d37821e3607 d37821e3562">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1242" id="d37821e3617" headers="d37821e3556">
<p>Capable of returning function values?</p>
</td>
<td class="cellalignment1232" headers="d37821e3617 d37821e3559">
<p>No</p>
</td>
<td class="cellalignment1232" headers="d37821e3617 d37821e3562">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1242" id="d37821e3627" headers="d37821e3556">
<p>Capable of accepting parameters?</p>
</td>
<td class="cellalignment1232" headers="d37821e3627 d37821e3559">
<p>No</p>
</td>
<td class="cellalignment1232" headers="d37821e3627 d37821e3562">
<p>Yes</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>An anonymous block consists of an optional declarative part, an executable part, and one or more optional exception handlers. The following sample anonymous block selects an employee last name into a variable and prints the name:</p>
<pre dir="ltr">DECLARE
  v_lname VARCHAR2(25);
BEGIN
  SELECT last_name 
    INTO v_lname
  FROM employees
  WHERE employee_id = 101;
  DBMS_OUTPUT.PUT_LINE(&#39;Employee last name is &#39;||v_lname);
END;
</pre>
<p>Oracle Database compiles the PL/SQL block and places it in the shared pool of the SGA, but it does not store the source code or compiled version in the database for reuse beyond the current instance. Unlike triggers, an anonymous block is compiled each time it is loaded into memory. Shared SQL allows anonymous PL/SQL blocks in the shared pool to be reused and shared until they are flushed out of the shared pool.</p>
<div class="infoboxnotealso" id="GUID-76EA9A76-8D25-4FF5-A6D1-4F358B0651AA__GUID-4D91FDC9-6046-4771-AC6B-BC9324CDA94B">
<p class="notep1">See Also:</p>
<p><a class="olink ADFNS311" target="_blank" href="../ADFNS/adfns_packages.htm#ADFNS311"><span><cite>Oracle Database Development Guide</cite></span></a> to learn more about anonymous PL/SQL blocks</p>
</div>
</div>
</div>
<a id="CNCPT1770"></a>
<div class="props_rev_3"><a id="GUID-0C8B57A4-9717-4E9A-8401-D817E2F0A308"></a>
<h3 id="CNCPT-GUID-0C8B57A4-9717-4E9A-8401-D817E2F0A308" class="sect3">PL/SQL Language Constructs</h3>
<div>
<p>PL/SQL blocks can include a variety of different PL/SQL language constructs.</p>
<p>These constructs including the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Variables and constants</p>
<p>You can declare these constructs within a procedure, function, or package. You can use a variable or constant in a SQL or PL/SQL statement to capture or provide a value when one is needed.</p>
</li>
<li>
<p>Cursors</p>
<p>You can declare a <a href="glossary.htm#GUID-D1D3E8DD-CD5C-4C0D-93E4-DE0BF0BD53A3"><span class="xrefglossterm">cursor</span></a> explicitly within a procedure, function, or package to facilitate record-oriented processing of Oracle Database data. The PL/SQL engine can also declare cursors implicitly.</p>
</li>
<li>
<p>Exceptions</p>
<p>PL/SQL lets you explicitly handle internal and user-defined error conditions, called <span class="italic">exceptions</span>, that arise during processing of PL/SQL code.</p>
</li>
</ul>
<p>PL/SQL can run <a href="glossary.htm#GUID-4962BC92-A7FC-471D-BE50-4650A791E3E7"><span class="xrefglossterm">dynamic SQL</span></a> statements whose complete text is not known until run time. Dynamic SQL statements are stored in character strings that are entered into, or built by, the program at run time. This technique enables you to create general purpose procedures. For example, you can create a procedure that operates on a table whose name is not known until run time.</p>
<div class="infoboxnotealso" id="GUID-0C8B57A4-9717-4E9A-8401-D817E2F0A308__GUID-0E7BF886-54C0-4F4C-A75A-F1AE955DDDA0">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink LNPLS011" target="_blank" href="../LNPLS/dynamic.htm#LNPLS011"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for details about dynamic SQL</p>
</li>
<li>
<p><a class="olink ARPLS058" target="_blank" href="../ARPLS/d_sql.htm#ARPLS058"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn how to use dynamic SQL in the <code class="codeph">DBMS_SQL</code> package</p>
</li>
</ul>
</div>
</div>
</div>
<a id="CNCPT1786"></a>
<div class="props_rev_3"><a id="GUID-BE22C508-16F7-4D82-B7DE-DA10D9210F78"></a>
<h3 id="CNCPT-GUID-BE22C508-16F7-4D82-B7DE-DA10D9210F78" class="sect3">PL/SQL Collections and Records</h3>
<div>
<p>Many programming techniques use collection types such as arrays, bags, lists, nested tables, sets, and trees. To support these techniques in database applications, PL/SQL provides the data types <code class="codeph">TABLE</code> and <code class="codeph">VARRAY</code>, which enable you to declare associative arrays, nested tables, and variable-size arrays.</p>
</div>
<a id="CNCPT1787"></a>
<div class="props_rev_3"><a id="GUID-9E35FAD6-6C27-479B-AC42-0A1B83E66882"></a>
<h4 id="CNCPT-GUID-9E35FAD6-6C27-479B-AC42-0A1B83E66882" class="sect4">Collections</h4>
<div>
<p>A <span class="bold">PL/SQL collection</span> is an ordered group of elements, all of the same type.</p>
<p>Each element has a unique subscript that determines its position in the collection. To create a collection, you first define a collection type, and then declare a variable of that type.</p>
<p>Collections work like the arrays found in most third-generation programming languages. Also, collections can be passed as parameters. So, you can use them to move columns of data into and out of database tables or between client-side applications and stored subprograms.</p>
</div>
</div>
<a id="CNCPT1788"></a>
<div class="props_rev_3"><a id="GUID-689D64D1-5BAA-437B-847D-16B6D09AB032"></a>
<h4 id="CNCPT-GUID-689D64D1-5BAA-437B-847D-16B6D09AB032" class="sect4">Records</h4>
<div>
<p>A <span class="bold">PL/SQL record</span> is a composite variable that can store data values of different types, similar to a struct type in C, C++, or Java. Records are useful for holding data from table rows, or certain columns from table rows.</p>
<p>Suppose you have data about an employee such as name, salary, and hire date. These items are dissimilar in type but logically related. A record containing a field for each item lets you treat the data as a logical unit.</p>
<p>You can use the <code class="codeph">%ROWTYPE</code> attribute to declare a record that represents a table row or row fetched from a cursor. With user-defined records, you can declare your own fields.</p>
<div class="infoboxnotealso" id="GUID-689D64D1-5BAA-437B-847D-16B6D09AB032__GUID-12732388-5988-4909-A43F-B02041E68410">
<p class="notep1">See Also:</p>
<p><a class="olink LNPLS005" target="_blank" href="../LNPLS/composites.htm#LNPLS005"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a> to learn how to use PL/SQL records</p>
</div>
</div>
</div>
</div>
<a id="CNCPT88940"></a><a id="CNCPT1767"></a>
<div class="props_rev_3"><a id="GUID-D8D5CA8C-4D62-4EEF-B891-6D9C3CFA3D3F"></a>
<h3 id="CNCPT-GUID-D8D5CA8C-4D62-4EEF-B891-6D9C3CFA3D3F" class="sect3">How PL/SQL Runs</h3>
<div>
<p>PL/SQL supports both interpreted execution and native execution.</p>
<p>In interpreted execution, PL/SQL source code is compiled into a so-called bytecode representation. A portable virtual computer implemented as part of Oracle Database runs this bytecode.</p>
<p>Native execution offers the best performance on computationally intensive program units. In this case, the source code of PL/SQL program units is compiled directly to object code for the given platform. This object code is linked into Oracle Database.</p>
<p>The <a href="glossary.htm#GUID-DA886C43-D6F7-41D4-9CD8-63770DA864B1"><span class="xrefglossterm">PL/SQL engine</span></a> defines, compiles, and runs PL/SQL program units. This engine is a special component of many Oracle products, including Oracle Database. While many Oracle products have PL/SQL components, this topic specifically covers the program units that can be stored in Oracle Database and processed using Oracle Database PL/SQL engine. The documentation for each Oracle tool describes its PL/SQL capabilities.</p>
<p>The following graphic illustrates the PL/SQL engine contained in Oracle Database.</p>
<div class="figure" id="GUID-D8D5CA8C-4D62-4EEF-B891-6D9C3CFA3D3F__BABFIHDH">
<p class="titleinfigure">Figure 8-3 The PL/SQL Engine and Oracle Database</p>
<img width="540" height="375" src="img/GUID-749375B2-32B5-47F1-927C-C134BE863B9E-default.gif" alt="Description of Figure 8-3 follows" title="Description of Figure 8-3 follows"/><br/>
<a href="img_text/GUID-749375B2-32B5-47F1-927C-C134BE863B9E-print.htm">Description of &#34;Figure 8-3 The PL/SQL Engine and Oracle Database&#34;</a></div>
<!-- class="figure" -->
<p>The program unit is stored in a database. When an application calls a stored procedure, the database loads the compiled program unit into the <a href="glossary.htm#GUID-64AFFF3A-C836-44F9-A25C-86CE4B9B16A8"><span class="xrefglossterm">shared pool</span></a> in the <a href="glossary.htm#GUID-78C0E867-233A-4857-B9FE-A3852A9B7BDF"><span class="xrefglossterm">system global area (SGA)</span></a> (see <span class="q">&#34;<a href="memory.htm#GUID-1CB2BA23-4386-46DA-9146-5FE0E4599AC6" title="The shared pool caches various types of program data.">Shared Pool</a>&#34;</span>). The PL/SQL and SQL statement executors work together to process the statements in the procedure.</p>
<p>You can call a stored procedure from another PL/SQL block, which can be either an anonymous block or another stored procedure. For example, you can call a stored procedure from Oracle Forms.</p>
<p>A PL/SQL procedure executing on Oracle Database can call an external procedure or function written in the C programming language and stored in a shared library. The C routine runs in a separate address space from that of Oracle Database.</p>
<div class="infoboxnotealso" id="GUID-D8D5CA8C-4D62-4EEF-B891-6D9C3CFA3D3F__GUID-0F2F1705-348A-4E0B-B0CA-7B05837E163D">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink LNPLS00103" target="_blank" href="../LNPLS/overview.htm#LNPLS00103"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a> to learn about PL/SQL architecture</p>
</li>
<li>
<p><a class="olink ADFNS1402" target="_blank" href="../ADFNS/adfns_externproc.htm#ADFNS1402"><span><cite>Oracle Database Development Guide</cite></span></a> to learn more about external procedures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="CNCPT88941"></a><a id="CNCPT616"></a>
<div class="props_rev_3"><a id="GUID-DDFED855-D1F3-4AB2-8FD3-B2A1B3C922D7"></a>
<h2 id="CNCPT-GUID-DDFED855-D1F3-4AB2-8FD3-B2A1B3C922D7" class="sect2">Overview of Java in Oracle Database</h2>
<div>
<p>Java has emerged as the object-oriented programming language of choice.</p>
<p>Java includes the following features:</p>
<ul style="list-style-type: disc;">
<li>
<p>A Java Virtual Machine (JVM), which provides the basis for platform independence</p>
</li>
<li>
<p>Automated storage management techniques, such as garbage collection</p>
</li>
<li>
<p>Language syntax that borrows from C and enforces strong typing</p>
</li>
</ul>
<div class="infobox-note" id="GUID-DDFED855-D1F3-4AB2-8FD3-B2A1B3C922D7__GUID-00A7F2DE-530D-48A2-97CF-D1459D4ED5FE">
<p class="notep1">Note:</p>
<p>This chapter assumes that you have some familiarity with the Java language.</p>
</div>
<p>The database provides Java programs with a dynamic data-processing engine that supports complex queries and multiple views of data. Client requests are assembled as data queries for immediate processing. Query results are generated dynamically.</p>
<p>The combination of Java and Oracle Database helps you create component-based, network-centric applications that can be easily updated as business needs change. In addition, you can move applications and data stores off the desktop and onto intelligent networks and network-centric servers. More importantly, you can access these applications and data stores from any client device.</p>
<p>The following figure shows a traditional two-tier, client/server configuration in which clients call Java stored procedures in the same way that they call PL/SQL subprograms.</p>
<div class="figure" id="GUID-DDFED855-D1F3-4AB2-8FD3-B2A1B3C922D7__BABECJGF">
<p class="titleinfigure">Figure 8-4 Two-Tier Client/Server Configuration</p>
<img width="432" height="306" src="img/GUID-42CFD019-F733-4ADD-BFA5-5E366373E991-default.gif" alt="Description of Figure 8-4 follows" title="Description of Figure 8-4 follows"/><br/>
<a href="img_text/GUID-42CFD019-F733-4ADD-BFA5-5E366373E991-print.htm">Description of &#34;Figure 8-4 Two-Tier Client/Server Configuration&#34;</a></div>
<!-- class="figure" -->
<div class="infoboxnotealso" id="GUID-DDFED855-D1F3-4AB2-8FD3-B2A1B3C922D7__GUID-2B7609D1-BFA5-432A-AEAE-012F03A1C1A4">
<p class="notep1">See Also:</p>
<p><a class="olink TDPJD101" target="_blank" href="../TDPJD/introduction.htm#TDPJD101"><span><cite>Oracle Database 2 Day + Java Developer&#39;s Guide</cite></span></a> for an introduction to using Java with Oracle Database</p>
</div>
</div>
<a id="CNCPT1797"></a>
<div class="props_rev_3"><a id="GUID-F754E0BC-5C62-4D65-91BD-96314493EB2F"></a>
<h3 id="CNCPT-GUID-F754E0BC-5C62-4D65-91BD-96314493EB2F" class="sect3">Overview of the Java Virtual Machine (JVM)</h3>
<div>
<p>A <span class="bold">JVM</span> is a virtual processor that runs compiled Java code.</p>
<p>Java source code compiles to low-level machine instructions, known as <span class="italic">bytecodes</span>, that are platform independent. The Java bytecodes are interpreted through the JVM into platform-dependent actions.</p>
</div>
<a id="CNCPT88942"></a><a id="CNCPT820"></a>
<div class="props_rev_3"><a id="GUID-ACAF8922-A3D5-4260-9935-9D92BBA578A5"></a>
<h4 id="CNCPT-GUID-ACAF8922-A3D5-4260-9935-9D92BBA578A5" class="sect4">Overview of Oracle JVM</h4>
<div>
<p>The <span class="bold">Oracle JVM</span> is a standard, Java-compatible environment that runs any pure Java application. It is compatible with the JLS and the JVM specifications.</p>
<p>The Oracle JVM supports the standard Java binary format and APIs. In addition, Oracle Database adheres to standard Java language semantics, including dynamic class loading at run time.</p>
<p>The following figure illustrates how Oracle Java applications reside on top of the Java core class libraries, which reside on top of the Oracle JVM. Because the Oracle Java support system is located within the database, the JVM interacts with database libraries, instead of directly interacting with the operating system.</p>
<div class="figure" id="GUID-ACAF8922-A3D5-4260-9935-9D92BBA578A5__I21492">
<p class="titleinfigure">Figure 8-5 Java Component Structure</p>
<img width="204" height="387" src="img/GUID-A1E4C366-D5D8-49FF-8574-D91104098247-default.gif" alt="Description of Figure 8-5 follows" title="Description of Figure 8-5 follows"/><br/>
<a href="img_text/GUID-A1E4C366-D5D8-49FF-8574-D91104098247-print.htm">Description of &#34;Figure 8-5 Java Component Structure&#34;</a></div>
<!-- class="figure" -->
<p>Unlike other Java environments, Oracle JVM is embedded within Oracle Database. Some important differences exist between Oracle JVM and typical client JVMs. For example, in a standard Java environment, you run a Java application through the interpreter by issuing the following command on the command line, where <span class="italic"><code class="codeph">classname</code></span> is the name of the class that the JVM interprets first:</p>
<pre dir="ltr">java <span class="italic">classname</span>
</pre>
<p>The preceding command causes the application to run within a process on your operating system. However, if you are not using the command-line interface, then you must load the application into the database, publish the interface, and then run the application within a database <a href="glossary.htm#GUID-D6A3934F-BA6D-464F-9612-C683E20514A4"><span class="xrefglossterm">data dictionary</span></a>.</p>
<div class="infoboxnotealso" id="GUID-ACAF8922-A3D5-4260-9935-9D92BBA578A5__GUID-F0C5092E-A66C-4525-9A50-6A54586DB228">
<p class="notep1">See Also:</p>
<p>See <a class="olink JJDEV01300" target="_blank" href="../JJDEV/chone.htm#JJDEV01300"><span><cite>Oracle Database Java Developer&rsquo;s Guide</cite></span></a> for a description of other differences between the Oracle JVM and typical client JVMs</p>
</div>
</div>
</div>
<a id="CNCPT88943"></a><a id="CNCPT821"></a>
<div class="props_rev_3"><a id="GUID-50C3A528-351E-4DF4-9C76-1EB238973120"></a>
<h4 id="CNCPT-GUID-50C3A528-351E-4DF4-9C76-1EB238973120" class="sect4">Main Components of Oracle JVM</h4>
<div>
<p>Oracle JVM runs in the same process space and address space as the database kernel by sharing its memory heaps and directly accessing its relational data. This design optimizes memory use and increases throughput.</p>
<p>Oracle JVM provides a run-time environment for Java objects. It fully supports Java data structures, method dispatch, exception handling, and language-level threads. It also supports all the core Java class libraries, including <code class="codeph">java.lang</code>, <code class="codeph">java.io</code>, <code class="codeph">java.net</code>, <code class="codeph">java.math</code>, and <code class="codeph">java.util</code>.</p>
<p>The following illustration shows the main components of Oracle JVM.</p>
<div class="figure" id="GUID-50C3A528-351E-4DF4-9C76-1EB238973120__BABJJHIA">
<p class="titleinfigure">Figure 8-6 Main Components of Oracle JVM</p>
<img width="480" height="269" src="img/GUID-2BCA7A07-5003-4E1E-B73C-B65A64D8DEF7-default.gif" alt="Description of Figure 8-6 follows" title="Description of Figure 8-6 follows"/><br/>
<a href="img_text/GUID-2BCA7A07-5003-4E1E-B73C-B65A64D8DEF7-print.htm">Description of &#34;Figure 8-6 Main Components of Oracle JVM&#34;</a></div>
<!-- class="figure" -->
<p>Oracle JVM embeds the standard Java namespace in the database schemas. This feature lets Java programs access Java objects stored in Oracle Database and application servers across the enterprise.</p>
<p>In addition, Oracle JVM is tightly integrated with the scalable, shared memory architecture of the database. Java programs use call, session, and object lifetimes efficiently without user intervention. Consequently, Oracle JVM and middle-tier Java business objects can be scaled, even when they have session-long state.</p>
<div class="infoboxnotealso" id="GUID-50C3A528-351E-4DF4-9C76-1EB238973120__GUID-2036FC3C-F815-41C9-AD61-3718EE6454B5">
<p class="notep1">See Also:</p>
<p><a class="olink JJDEV01300" target="_blank" href="../JJDEV/chone.htm#JJDEV01300"><span><cite>Oracle Database Java Developer&rsquo;s Guide</cite></span></a> for a description of the main components of Oracle JVM</p>
</div>
</div>
</div>
</div>
<a id="CNCPT1804"></a>
<div class="props_rev_3"><a id="GUID-2F70C608-849D-4E54-BC09-BDE53E01012E"></a>
<h3 id="CNCPT-GUID-2F70C608-849D-4E54-BC09-BDE53E01012E" class="sect3">Java Programming Environment</h3>
<div>
<p>Oracle furnishes enterprise application developers with an end-to-end Java solution for creating, deploying, and managing Java applications.</p>
<p>The solution consists of client-side and server-side programmatic interfaces, tools to support Java development, and a Java Virtual Machine integrated with Oracle Database. All these products are compatible with Java standards.</p>
<p>The Java programming environment consists of the following additional features:</p>
<ul style="list-style-type: disc;">
<li>
<p>Java stored procedures as the Java equivalent and companion for PL/SQL. Java stored procedures are tightly integrated with PL/SQL. You can call Java stored procedures from PL/SQL packages and procedures from Java stored procedures.</p>
</li>
<li>
<p>The JDBC and SQLJ programming interfaces for accessing SQL data.</p>
</li>
<li>
<p>Tools and scripts that assist in developing, loading, and managing classes.</p>
</li>
</ul>
</div>
<a id="CNCPT1805"></a>
<div class="props_rev_3"><a id="GUID-48434C99-5806-4174-A2E1-DC07ADA0CCBC"></a>
<h4 id="CNCPT-GUID-48434C99-5806-4174-A2E1-DC07ADA0CCBC" class="sect4">Java Stored Procedures</h4>
<div>
<p>A <span class="bold">Java stored procedure</span> is a Java method published to SQL and stored in the database.</p>
<p>Like a PL/SQL subprogram, a Java procedure can be invoked directly with products like SQL*Plus or indirectly with a trigger. You can access it from any Oracle Net client&mdash;OCI, precompiler, or JDBC.</p>
<p>To publish Java methods, you write call specifications, which map Java method names, parameter types, and return types to their SQL counterparts. When called by client applications, a Java stored procedure can accept arguments, reference Java classes, and return Java result values.</p>
<p>Applications calling the Java method by referencing the name of the call specification. The run-time system looks up the call specification definition in the Oracle data dictionary and runs the corresponding Java method.</p>
<p>In addition, you can use Java to develop powerful programs independently of PL/SQL. Oracle Database provides a fully compliant implementation of the Java programming language and JVM.</p>
<div class="infoboxnotealso" id="GUID-48434C99-5806-4174-A2E1-DC07ADA0CCBC__GUID-5BFDF774-1865-4E72-85B5-80D6498FC1EA">
<p class="notep1">See Also:</p>
<p><a class="olink GUID-AE1E5C4B-A077-4D1E-8821-6A7142BF1FEA" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=GUID-AE1E5C4B-A077-4D1E-8821-6A7142BF1FEA"><span><cite>Oracle Database Java Developer&rsquo;s Guide</cite></span></a> explains how to write stored procedures in Java, how to access them from PL/SQL, and how to access PL/SQL functionality from Java</p>
</div>
</div>
</div>
<a id="CNCPT823"></a>
<div class="props_rev_3"><a id="GUID-A7135BCC-A366-428F-BC69-23CD20914DF5"></a>
<h4 id="CNCPT-GUID-A7135BCC-A366-428F-BC69-23CD20914DF5" class="sect4">Java and PL/SQL Integration</h4>
<div>
<p>You can call existing PL/SQL programs from Java and Java programs from PL/SQL. This solution protects and leverages your PL/SQL and Java code.</p>
<p>Oracle Database offers two different approaches for accessing SQL data from Java, JDBC and SQLJ. Both approaches are available on the client and server. Consequently, you can deploy applications on the client and server without modifying the code.</p>
</div>
<a id="CNCPT825"></a>
<div class="props_rev_3"><a id="GUID-174E853D-233D-4202-AC5D-E76637A2AA44"></a>
<h5 id="CNCPT-GUID-174E853D-233D-4202-AC5D-E76637A2AA44" class="sect5">JDBC Drivers</h5>
<div>
<p>JDBC is a database access protocol that enables you to connect to a database and run SQL statements and queries to the database.</p>
<p>The core Java class libraries provide only one JDBC API, <code class="codeph">java.sql</code>. However, JDBC is designed to enable vendors to supply drivers that offer the necessary specialization for a particular database. Oracle provides the distinct JDBC drivers shown in the following table.</p>
<div class="tblformal" id="GUID-174E853D-233D-4202-AC5D-E76637A2AA44__GUID-69263B4E-8D8F-4A25-A6D1-570DE44532B4">
<p class="titleintable">Table 8-2 JDBC Drivers</p>
<table class="cellalignment1206" title="JDBC Drivers" summary="This table is a list and description of provided JDBC drivers.">
<thead>
<tr class="cellalignment1197">
<th class="cellalignment1224" id="d37821e7136">Driver</th>
<th class="cellalignment1224" id="d37821e7139">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1197">
<td class="cellalignment1197" id="d37821e7144" headers="d37821e7136">
<p>JDBC Thin driver</p>
</td>
<td class="cellalignment1197" headers="d37821e7144 d37821e7139">
<p>You can use the JDBC Thin driver to write pure Java applications and applets that access Oracle SQL data. The JDBC Thin driver is especially well-suited for Web-based applications and applets, because you can dynamically download it from a Web page, similar to any other Java applet.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1197" id="d37821e7151" headers="d37821e7136">
<p>JDBC OCI driver</p>
</td>
<td class="cellalignment1197" headers="d37821e7151 d37821e7139">
<p>The JDBC OCI driver accesses Oracle-specific native code, that is, non-Java code, and libraries on the client or middle tier, providing a performance boost compared to the JDBC Thin driver, at the cost of significantly larger size and client-side installation.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1197" id="d37821e7158" headers="d37821e7136">
<p>JDBC server-side internal driver</p>
</td>
<td class="cellalignment1197" headers="d37821e7158 d37821e7139">
<p>Oracle Database uses the server-side internal driver when the Java code runs on the server. It allows Java applications running in Oracle JVM on the server to access locally defined data, that is, data on the same system and in the same process, with JDBC. It provides a performance boost, because of its ability to use the underlying Oracle RDBMS libraries directly, without the overhead of an intervening network connection between the Java code and SQL data. By supporting the same Java-SQL interface on the server, Oracle Database does not require you to rework code when deploying it.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso" id="GUID-174E853D-233D-4202-AC5D-E76637A2AA44__GUID-31D8041A-7029-4E39-93B8-44043A2BE52D">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="cncptdev.htm#GUID-C5A31D66-F743-4BAC-9698-4B2058E3D8A9" title="ODBC is a standard API that enables applications to connect to a database and then prepare and run SQL statements.">ODBC and JDBC</a>&#34;</span></p>
</li>
<li>
<p><a class="olink TDPJD136" target="_blank" href="../TDPJD/getconn.htm#TDPJD136"><span><cite>Oracle Database 2 Day + Java Developer&#39;s Guide</cite></span></a> and <a class="olink GUID-D6975767-9F5A-4B30-8910-9298DDD7FEF0" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=GUID-D6975767-9F5A-4B30-8910-9298DDD7FEF0"><span><cite>Oracle Database JDBC Developer&rsquo;s Guide</cite></span></a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="CNCPT826"></a>
<div class="props_rev_3"><a id="GUID-BCCC0B04-0B9C-45BA-A34A-46051F0643E1"></a>
<h5 id="CNCPT-GUID-BCCC0B04-0B9C-45BA-A34A-46051F0643E1" class="sect5">SQLJ</h5>
<div>
<p><span class="bold">SQLJ</span> is an ANSI standard for embedding SQL statements in Java programs.</p>
<p>You can use SQLJ in stored procedures, triggers, and methods within the Oracle Database environment. In addition, you can combine SQLJ programs with JDBC.</p>
<p>SQLJ provides a simple, but powerful, way to develop client-side and middle-tier applications that access databases from Java. A developer writes a program using SQLJ and then uses the SQLJ translator to translate embedded SQL to pure JDBC-based Java code. At run time, the program can communicate with multi-vendor databases using standard JDBC drivers.</p>
<p>The following example shows a simple SQLJ executable statement:</p>
<pre dir="ltr">String name;
#sql  { SELECT first_name INTO :name FROM employees WHERE employee_id=112 };
System.out.println(&#34;Name is &#34; + name + &#34;, employee number = &#34; + employee_id);
</pre>
<p>Because Oracle Database provides a complete Java environment, you cannot compile SQLJ programs on a client that will run on the database. Instead, you can compile them directly on the server.</p>
<div class="infoboxnotealso" id="GUID-BCCC0B04-0B9C-45BA-A34A-46051F0643E1__GUID-6F096BBC-3733-4FC4-9A9E-8A70A63EC57A">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="cncptdev.htm#GUID-575F8325-3839-45ED-B370-2292D208D9C3" title="SQLJ is an ANSI SQL-1999 standard for embedding SQL statements in Java source code. SQLJ provides a simpler alternative to the Java Database Connectivity (JDBC) API for client-side SQL data access from Java.">SQLJ</a>&#34;</span></p>
</li>
<li>
<p><a class="olink GUID-B3A3C319-5C61-40C6-B3FB-37C2BD98AD48" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=GUID-B3A3C319-5C61-40C6-B3FB-37C2BD98AD48"><span><cite>Oracle Database SQLJ Developer&rsquo;s Guide</cite></span></a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<a id="CNCPT118"></a>
<div class="props_rev_3"><a id="GUID-40297ADF-0968-42F8-B8B9-84AD6ADCBE63"></a>
<h2 id="CNCPT-GUID-40297ADF-0968-42F8-B8B9-84AD6ADCBE63" class="sect2">Overview of Triggers</h2>
<div>
<p>A database <span class="bold">trigger</span> is a compiled stored program unit, written in either PL/SQL or Java, that Oracle Database invokes (&#34;fires&#34;) automatically in certain situations.</p>
<p>A trigger fires whenever one of the following operations occurs:</p>
<ol>
<li>
<p><a href="glossary.htm#GUID-B5F2F112-1B33-41B5-B63D-9DC8F99A369D"><span class="xrefglossterm">DML</span></a> statements on a particular table or view, issued by any user</p>
<p>DML statements modify data in schema objects. For example, inserting and deleting rows are DML operations.</p>
</li>
<li>
<p><a href="glossary.htm#GUID-64F19D78-A73F-44A5-AA2E-60EBC800CB22"><span class="xrefglossterm">DDL</span></a> statements issued either by a particular user or any user</p>
<p>DDL statements define schema objects. For example, creating a table and adding a column are DDL operations.</p>
</li>
<li>
<p>Database events</p>
<p>User login or logoff, errors, and database startup or shutdown are events that can invoke triggers.</p>
</li>
</ol>
<p>Triggers are schema objects that are similar to subprograms but differ in the way they are invoked. A subprogram is explicitly run by a user, application, or trigger. Triggers are implicitly invoked by the database when a triggering event occurs.</p>
<div class="infoboxnotealso" id="GUID-40297ADF-0968-42F8-B8B9-84AD6ADCBE63__GUID-4D2869DE-CDF1-4430-A0E7-EBCCFD3859DB">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="sqllangu.htm#GUID-662EE4B0-7D5E-43F5-806D-A2AE404D77BF" title="All operations performed on the information in an Oracle database are run using SQL statements. A SQL statement is a computer program or instruction that consists of identifiers, parameters, variables, names, data types, and SQL reserved words.">Overview of SQL Statements</a>&#34;</span> to learn about DML and DDL</p>
</li>
<li>
<p><span class="q">&#34;<a href="startup.htm#GUID-5FCFB104-8365-4E7B-87A1-736E65D6658F" title="A database instance provides user access to a database. The instance and the database can be in various states.">Overview of Database Instance Startup and Shutdown</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
<a id="CNCPT88945"></a>
<div class="props_rev_3"><a id="GUID-F1177761-342B-468C-BE5B-943A1ABC7B7C"></a>
<h3 id="CNCPT-GUID-F1177761-342B-468C-BE5B-943A1ABC7B7C" class="sect3">Advantages of Triggers</h3>
<div>
<p>The correct use of triggers enables you to build and deploy applications that are more robust and that use the database more effectively.</p>
<p>You can use triggers to:</p>
<ul style="list-style-type: disc;">
<li>
<p>Automatically generate derived column values</p>
</li>
<li>
<p>Prevent invalid transactions</p>
</li>
<li>
<p>Provide auditing and event logging</p>
</li>
<li>
<p>Record information about table access</p>
</li>
</ul>
<p>You can use triggers to enforce low-level business rules common for all client applications. For example, several applications may access the <code class="codeph">employees</code> table. If a trigger on this table ensures the format of inserted data, then this business logic does not need to be reproduced in every client. Because the trigger cannot be circumvented by the application, the business logic in the trigger is used automatically.</p>
<p>You can use both triggers and integrity constraints to define and enforce any type of integrity rule. However, Oracle strongly recommends that you only use triggers to enforce complex business rules not definable using an <a href="glossary.htm#GUID-67F8FE8C-EBA5-4796-820A-8919982A1411"><span class="xrefglossterm">integrity constraint</span></a>.</p>
<p>Excessive use of triggers can result in complex interdependencies that can be difficult to maintain in a large application. For example, when a trigger is invoked, a SQL statement within its trigger action potentially can fire other triggers, resulting in cascading triggers that can produce unintended effects.</p>
<div class="infoboxnotealso" id="GUID-F1177761-342B-468C-BE5B-943A1ABC7B7C__GUID-A5182620-E802-41C6-98FD-F6FD3E3E6142">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="datainte.htm#GUID-A8893CD7-8B19-42AA-8550-9713071FA679" title="It is important that data maintain data integrity, which is adherence to business rules determined by the database administrator or application developer.">Introduction to Data Integrity</a>&#34;</span></p>
</li>
<li>
<p><a class="olink TDDDG50000" target="_blank" href="../TDDDG/tdddg_triggers.htm#TDDDG50000"><span><cite>Oracle Database 2 Day Developer&#39;s Guide</cite></span></a></p>
</li>
<li>
<p><a class="olink LNPLS2002" target="_blank" href="../LNPLS/triggers.htm#LNPLS2002"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a> for guidelines and restrictions when planning triggers for your application</p>
</li>
</ul>
</div>
</div>
</div>
<a id="CNCPT318"></a>
<div class="props_rev_3"><a id="GUID-02E647D9-D55E-4C74-993A-65FCE1AFE6AA"></a>
<h3 id="CNCPT-GUID-02E647D9-D55E-4C74-993A-65FCE1AFE6AA" class="sect3">Types of Triggers</h3>
<div>
<p>Triggers can be categorized according to their means of invocation and the type of actions they perform.</p>
<p>Oracle Database supports the following types of triggers:</p>
<ul style="list-style-type: disc;">
<li>
<p>Row triggers</p>
<p>A <a href="glossary.htm#GUID-24EF0C74-72E4-4455-8C95-C52A1CDDF81C"><span class="xrefglossterm">row trigger</span></a> fires each time the table is affected by the triggering statement. For example, if a statement updates multiple rows, then a row trigger fires once for each row affected by the <code class="codeph">UPDATE</code>. If a triggering statement affects no rows, then a row trigger is not run. Row triggers are useful if the code in the trigger action depends on data provided by the triggering statement or rows that are affected.</p>
</li>
<li>
<p>Statement triggers</p>
<p>A <a href="glossary.htm#GUID-85D25BFF-A802-4DAB-B86C-A41EFCA11B6E"><span class="xrefglossterm">statement trigger</span></a> is fired once on behalf of the triggering statement, regardless of the number of rows affected by the triggering statement. For example, if a statement deletes 100 rows from a table, a statement-level <code class="codeph">DELETE</code> trigger is fired only once. Statement triggers are useful if the code in the trigger action does not depend on the data provided by the triggering statement or the rows affected.</p>
</li>
<li>
<p><code class="codeph">INSTEAD OF</code> triggers</p>
<p>An <a href="glossary.htm#GUID-9BB0F932-40F0-4727-85A1-904E162405D0"><span class="xrefglossterm">INSTEAD OF trigger</span></a> is fired by Oracle Database instead of executing the triggering statement. These triggers are useful for transparently modifying views that cannot be modified directly through DML statements.</p>
</li>
<li>
<p>Event triggers</p>
<p>You can use triggers to publish information about database events to subscribers. Event triggers are divided into the following categories:</p>
<ul style="list-style-type: disc;">
<li>
<p>A <a href="glossary.htm#GUID-EFE577C5-037A-4974-8358-F3761AC70601"><span class="xrefglossterm">system event trigger</span></a> can be caused by events such as database instance startup and shutdown or error messages.</p>
</li>
<li>
<p>A <a href="glossary.htm#GUID-54BD71CF-7D44-4CB2-9FC4-90F5CA8EF110"><span class="xrefglossterm">user event trigger</span></a> is fired because of events related to user logon and logoff, DDL statements, and DML statements.</p>
</li>
</ul>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-02E647D9-D55E-4C74-993A-65FCE1AFE6AA__GUID-2C35DBFE-34BB-461E-A13F-A4F34C3D3C7E">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink TDDDG51000" target="_blank" href="../TDDDG/tdddg_triggers.htm#TDDDG51000"><span><cite>Oracle Database 2 Day Developer&#39;s Guide</cite></span></a></p>
</li>
<li>
<p><a class="olink LNPLS2005" target="_blank" href="../LNPLS/triggers.htm#LNPLS2005"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="CNCPT88946"></a>
<div class="props_rev_3"><a id="GUID-A29549A3-AB75-4CCD-9093-559F8B5DA9B2"></a>
<h3 id="CNCPT-GUID-A29549A3-AB75-4CCD-9093-559F8B5DA9B2" class="sect3">Timing for Triggers</h3>
<div>
<p>You can define the trigger timing&mdash;whether the trigger action is to be run before or after the triggering statement.</p>
<p>A <a href="glossary.htm#GUID-2B4F37A3-7EB0-455F-8704-32C072C25198"><span class="xrefglossterm">simple trigger</span></a> is a single trigger on a table that enables you to specify actions for exactly one of the following timing points:</p>
<ul style="list-style-type: disc;">
<li>
<p>Before the firing statement</p>
</li>
<li>
<p>Before each row affected by the firing statement</p>
</li>
<li>
<p>After each row affected by the firing statement</p>
</li>
<li>
<p>After the firing statement</p>
</li>
</ul>
<p>For statement and row triggers, a <code class="codeph">BEFORE</code> trigger can enhance security and enable business rules before making changes to the database. The <code class="codeph">AFTER</code> trigger is ideal for logging actions.</p>
<p>A <a href="glossary.htm#GUID-AE8C3B7A-EF80-4452-9C4D-4094E21BFC9E"><span class="xrefglossterm">compound trigger</span></a> can fire at multiple timing points. Compound triggers help program an approach in which the actions that you implement for various timing points share common data.</p>
<div class="infoboxnotealso" id="GUID-A29549A3-AB75-4CCD-9093-559F8B5DA9B2__GUID-2DFB36FF-EEA0-49F7-92E3-02A53665E5EB">
<p class="notep1">See Also:</p>
<p><a class="olink LNPLS2005" target="_blank" href="../LNPLS/triggers.htm#LNPLS2005"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a> to learn about compound triggers</p>
</div>
</div>
</div>
<a id="CNCPT88948"></a><a id="CNCPT88947"></a><a id="CNCPT218"></a>
<div class="props_rev_3"><a id="GUID-146A5161-0BEA-4556-B0BC-DB29306FACFA"></a>
<h3 id="CNCPT-GUID-146A5161-0BEA-4556-B0BC-DB29306FACFA" class="sect3">Creation of Triggers</h3>
<div>
<p>The <code class="codeph">CREATE TRIGGER</code> statement creates or replaces a database trigger.</p>
<p>A PL/SQL trigger has the following general syntactic form:</p>
<pre dir="ltr">CREATE TRIGGER <span class="italic">trigger_name</span>
  <span class="italic">triggering_statement</span>
  [<span class="italic">trigger_restriction</span>]
BEGIN
 <span class="italic">triggered_action</span>;
END;
</pre>
<p>A PL/SQL trigger has the following basic components:</p>
<ul style="list-style-type: disc;">
<li>
<p>Trigger name</p>
<p>The name must be unique among other trigger names in the same schema. For example, the name may be <code class="codeph">part_reorder_trigger</code>.</p>
</li>
<li>
<p>The trigger event or statement</p>
<p>A triggering event or statement is the SQL statement, database event, or user event that causes a trigger to be invoked. For example, a user updates a table.</p>
</li>
<li>
<p>Trigger restriction</p>
<p>A trigger restriction specifies a Boolean <a href="glossary.htm#GUID-E2141FFA-A7B2-4113-BEEE-2401FC38AB2E"><span class="xrefglossterm">expression</span></a> that must be <code class="codeph">true</code> for the trigger to fire. For example, the trigger is not invoked unless the number of available parts is less than a present reorder amount.</p>
</li>
<li>
<p>Triggered action</p>
<p>A triggered action is the procedure that contains the SQL statements and code to be run when a triggering statement is issued and the trigger restriction evaluates to true. For example, a user inserts a row into a pending orders table.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-146A5161-0BEA-4556-B0BC-DB29306FACFA__GUID-AA1B80EE-D949-46E9-AF54-604B974722C0">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink TDDDG52000" target="_blank" href="../TDDDG/tdddg_triggers.htm#TDDDG52000"><span><cite>Oracle Database 2 Day Developer&#39;s Guide</cite></span></a> and <a class="olink LNPLS2004" target="_blank" href="../LNPLS/create_procedure.htm#LNPLS2004"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a> to learn how to create triggers</p>
</li>
<li>
<p><a class="olink GUID-EE0DF3AA-7ADC-4171-B8E8-138BE9224E3B" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=GUID-EE0DF3AA-7ADC-4171-B8E8-138BE9224E3B"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn about the <code class="codeph">CREATE TRIGGER</code> statement</p>
</li>
</ul>
</div>
</div>
<div class="sect4"><a id="GUID-355D97A1-A490-477F-9888-278624393ABF"></a>
<h4 id="CNCPT-GUID-355D97A1-A490-477F-9888-278624393ABF" class="sect4">Example: CREATE TRIGGER Statement</h4>
<div>
<p>This example creates a trigger that fires when an <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, or <code class="codeph">DELETE</code> statement executes on a line items table.</p>
<div class="example" id="GUID-355D97A1-A490-477F-9888-278624393ABF__GUID-AE3458EA-D92C-4D1D-B59D-5052C751E1FE">
<p>Suppose that you create the <code class="codeph">orders</code> and <code class="codeph">lineitems</code> tables with the following statements. The <code class="codeph">orders</code> table contains a row for each unique order, whereas the <code class="codeph">lineitems</code> table contains a row for each item in an order.</p>
<pre dir="ltr">CREATE TABLE orders
( order_id NUMBER PRIMARY KEY,
  /* other attributes */
  line_items_count NUMBER DEFAULT 0 );

CREATE TABLE lineitems
( order_id REFERENCES orders,
  seq_no   NUMBER,
  /* other attributes */
  CONSTRAINT lineitems PRIMARY KEY(order_id,seq_no) );
</pre>
<p>The following statement creates a sample trigger that automatically updates the <code class="codeph">orders</code> table with the number of items in an order:</p>
<pre dir="ltr">CREATE OR REPLACE TRIGGER lineitems_trigger
  AFTER INSERT OR UPDATE OR DELETE ON lineitems 
  FOR EACH ROW
BEGIN
  IF (INSERTING OR UPDATING)
  THEN
    UPDATE orders SET line_items_count = NVL(line_items_count,0)+1
    WHERE order_id = :new.order_id;
  END IF;
  IF (DELETING OR UPDATING)
  THEN
    UPDATE orders SET line_items_count = NVL(line_items_count,0)-1
    WHERE order_id = :old.order_id;
  END IF;
END;
/
</pre>
<p>In <code class="codeph">lineitems_trigger</code>, the triggering statement is an <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, or <code class="codeph">DELETE</code> on the <code class="codeph">lineitems</code> table. No triggering restriction exists. The trigger is invoked for each row changed. The trigger has access to the old and new column values of the current row affected by the triggering statement. Two correlation names exist for every column of the table being modified: the old value (<code class="codeph">:old</code>), and the new value (<code class="codeph">:new</code>). If a session updates or inserts rows in <code class="codeph">lineitems</code> for an order, then after the action the trigger calculates the number of items in this order and updates the <code class="codeph">orders</code> table with the count.</p>
</div>
<!-- class="example" --></div>
</div>
<div class="sect4"><a id="GUID-787A32DF-959F-4821-AFAD-3B3424769D25"></a>
<h4 id="CNCPT-GUID-787A32DF-959F-4821-AFAD-3B3424769D25" class="sect4">Example: Invoking a Row-Level Trigger</h4>
<div>
<p>In this scenario, a customer initiates two orders and adds and removes line items from the orders.</p>
<div class="example" id="GUID-787A32DF-959F-4821-AFAD-3B3424769D25__GUID-BEC423E0-5961-4151-9B6A-BA6A53BCF4DA">
<p>The scenario is based on the trigger created in <a href="srvrside.htm#GUID-355D97A1-A490-477F-9888-278624393ABF" title="This example creates a trigger that fires when an INSERT, UPDATE, or DELETE statement executes on a line items table.">Example: CREATE TRIGGER Statement</a>.</p>
<div class="tblformalwide" id="GUID-787A32DF-959F-4821-AFAD-3B3424769D25__GUID-94121B35-F6AD-4813-A58F-C13FCA364DD0">
<p class="titleintable">Table 8-3 Row-Level Trigger Scenario</p>
<table class="cellalignment1211" title="Row-Level Trigger Scenario" summary="This table describes a scenario where a customer initiates two orders and adds and removes line items from the orders.">
<thead>
<tr class="cellalignment1197">
<th class="cellalignment1222" id="d37821e9559">SQL Statement</th>
<th class="cellalignment1222" id="d37821e9562">Triggered SQL Statement</th>
<th class="cellalignment1222" id="d37821e9565">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d37821e9570" headers="d37821e9559">
<pre dir="ltr">SQL&gt; INSERT INTO orders
  (order_id) VALUES (78);
 
1 row created. 
</pre></td>
<td class="cellalignment1223" headers="d37821e9570 d37821e9562">&nbsp;</td>
<td class="cellalignment1223" headers="d37821e9570 d37821e9565">
<p>The customer creates an order with ID 78. At this point the customer has no items in the order.</p>
<p>Because no action is performed on the <code class="codeph">lineitems</code> table, the trigger is not invoked.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d37821e9583" headers="d37821e9559">
<pre dir="ltr">SQL&gt; INSERT INTO orders
  (order_id) VALUES (92);
 
1 row created. 
</pre></td>
<td class="cellalignment1223" headers="d37821e9583 d37821e9562">&nbsp;</td>
<td class="cellalignment1223" headers="d37821e9583 d37821e9565">
<p>The customer creates a separate order with ID 92. At this point the customer has no items in the order.</p>
<p>Because no action is performed on the <code class="codeph">lineitems</code> table, the trigger is not invoked.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d37821e9596" headers="d37821e9559">
<pre dir="ltr">SQL&gt; INSERT INTO lineitems 
 (order_id, seq_no)
 VALUES (78,1);
 
1 row created. 
</pre></td>
<td class="cellalignment1223" headers="d37821e9596 d37821e9562">
<pre dir="ltr">UPDATE orders 
  SET line_items_count = 
    NVL(NULL,0)+1
  WHERE order_id = 78;
</pre></td>
<td class="cellalignment1223" headers="d37821e9596 d37821e9565">
<p>The customer adds an item to order 78.</p>
<p>The <code class="codeph">INSERT</code> invokes the trigger. The triggered statement increases the line item count for order 78 from 0 to 1.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d37821e9611" headers="d37821e9559">
<pre dir="ltr">SQL&gt; INSERT INTO lineitems 
  (order_id, seq_no) 
  VALUES (78,2);
 
1 row created. 
</pre></td>
<td class="cellalignment1223" headers="d37821e9611 d37821e9562">
<pre dir="ltr">UPDATE orders 
  SET line_items_count = 
    NVL(1,0)+1
  WHERE order_id = 78;
</pre></td>
<td class="cellalignment1223" headers="d37821e9611 d37821e9565">
<p>The customer adds an additional item to order 78.</p>
<p>The <code class="codeph">INSERT</code> invokes the trigger. The triggered statement increases the line item count for order 78 from 1 to 2.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d37821e9626" headers="d37821e9559">
<pre dir="ltr">SQL&gt; SELECT * FROM orders;

 ORDER_ID LINE_ITEMS_COUNT
--------- ----------------
      78                2
      92                0
</pre></td>
<td class="cellalignment1223" headers="d37821e9626 d37821e9562">&nbsp;</td>
<td class="cellalignment1223" headers="d37821e9626 d37821e9565">
<p>The customer queries the status of the two orders. Order 78 contains two items. Order 92 contains no items.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d37821e9634" headers="d37821e9559">
<pre dir="ltr">SQL&gt; SELECT * FROM lineitems;
 
  ORDER_ID     SEQ_NO
---------- ----------
        78          1
        78          2
</pre></td>
<td class="cellalignment1223" headers="d37821e9634 d37821e9562">&nbsp;</td>
<td class="cellalignment1223" headers="d37821e9634 d37821e9565">
<p>The customer queries the status of the line items. Each item is uniquely identified by the order ID and the sequence number.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d37821e9642" headers="d37821e9559">
<pre dir="ltr">SQL&gt; UPDATE lineitems 
  SET order_id = 92;

2 rows updated.
</pre></td>
<td class="cellalignment1223" headers="d37821e9642 d37821e9562">
<pre dir="ltr">UPDATE orders 
  SET line_items_count = 
    NVL(NULL,0)+1
  WHERE order_id = 92;

UPDATE orders 
  SET line_items_count = 
    NVL(2,0)-1
  WHERE order_id = 78;
</pre>
<pre dir="ltr">UPDATE orders 
  SET line_items_count = 
    NVL(1,0)+1
  WHERE order_id = 92;

UPDATE orders 
  SET line_items_count = 
    NVL(1,0)-1
  WHERE order_id = 78;
</pre></td>
<td class="cellalignment1223" headers="d37821e9642 d37821e9565">
<p>The customer moves the line items that were in order 78 to order 92.</p>
<p>The <code class="codeph">UPDATE</code> statement changes 2 rows in the <code class="codeph">lineitems</code> tables, which invokes the trigger once for each row.</p>
<p>Each time the trigger is invoked, both <code class="codeph">IF</code> conditions in the trigger are met. The first condition increments the count for order 92, whereas the second condition decreases the count for order 78. Thus, four total <code class="codeph">UPDATE</code> statements are run.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d37821e9670" headers="d37821e9559">
<pre dir="ltr">SQL&gt; SELECT * FROM orders;

 ORDER_ID LINE_ITEMS_COUNT
--------- ----------------
       78                0
       92                2
</pre></td>
<td class="cellalignment1223" headers="d37821e9670 d37821e9562">&nbsp;</td>
<td class="cellalignment1223" headers="d37821e9670 d37821e9565">
<p>The customer queries the status of the two orders. The net effect is that the line item count for order 92 has increased from 0 to 2, whereas the count for order 78 has decreased from 2 to 0.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d37821e9678" headers="d37821e9559">
<pre dir="ltr">SQL&gt; SELECT * FROM lineitems;
 
  ORDER_ID     SEQ_NO
---------- ----------
        92          1
        92          2
</pre></td>
<td class="cellalignment1223" headers="d37821e9678 d37821e9562">&nbsp;</td>
<td class="cellalignment1223" headers="d37821e9678 d37821e9565">
<p>The customer queries the status of the line items. Each item is uniquely identified by the order ID and the sequence number.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d37821e9686" headers="d37821e9559">
<pre dir="ltr">SQL&gt; DELETE FROM lineitems;
 
2 rows deleted.
</pre></td>
<td class="cellalignment1223" headers="d37821e9686 d37821e9562">
<pre dir="ltr">UPDATE orders 
  SET line_items_count = 
    NVL(2,0)-1
  WHERE order_id = 92;
 
UPDATE orders 
  SET line_items_count = 
    NVL(1,0)-1
  WHERE order_id = 92;
</pre></td>
<td class="cellalignment1223" headers="d37821e9686 d37821e9565">
<p>The customer now removes all line items from all orders.</p>
<p>The <code class="codeph">DELETE</code> statement changes 2 rows in the <code class="codeph">lineitems</code> tables, which invokes the trigger once for each row. For each trigger invocation, only one <code class="codeph">IF</code> condition in the trigger is met. Each time the condition decreases the count for order 92 by 1. Thus, two total <code class="codeph">UPDATE</code> statements are run.</p>
</td>
</tr>
<tr class="cellalignment1197">
<td class="cellalignment1223" id="d37821e9710" headers="d37821e9559">
<pre dir="ltr">SQL&gt; SELECT * FROM orders;

 ORDER_ID LINE_ITEMS_COUNT
--------- ----------------
       78                0
       92                0

SQL&gt; SELECT * FROM lineitems;
 
no rows selected
</pre></td>
<td class="cellalignment1223" headers="d37821e9710 d37821e9562">&nbsp;</td>
<td class="cellalignment1223" headers="d37821e9710 d37821e9565">
<p>The customer queries the status of the two orders. Neither order contains line items.</p>
<p>The customer also queries the status of the line items. No items exist.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="example" --></div>
</div>
</div>
<a id="CNCPT1697"></a>
<div class="props_rev_3"><a id="GUID-F5B4011B-AA09-4D61-A409-6AB290A9025F"></a>
<h3 id="CNCPT-GUID-F5B4011B-AA09-4D61-A409-6AB290A9025F" class="sect3">Execution of Triggers</h3>
<div>
<p>Oracle Database executes a trigger internally using the same steps as for subprogram execution.</p>
<p>The only subtle difference is that a user account has the right to fire a trigger if it has the privilege to run the triggering statement. With this exception, the database validates and runs triggers the same way as stored subprograms.</p>
<div class="infoboxnotealso" id="GUID-F5B4011B-AA09-4D61-A409-6AB290A9025F__GUID-ADC3DCE9-FC22-4342-9967-BDC3475C475B">
<p class="notep1">See Also:</p>
<p><a class="olink LNPLS020" target="_blank" href="../LNPLS/overview.htm#LNPLS020"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a> to learn more about trigger execution</p>
</div>
</div>
</div>
<a id="CNCPT88949"></a><a id="CNCPT1696"></a>
<div class="props_rev_3"><a id="GUID-D54C348D-BFC6-41B6-AEDD-C081C1089208"></a>
<h3 id="CNCPT-GUID-D54C348D-BFC6-41B6-AEDD-C081C1089208" class="sect3">Storage of Triggers</h3>
<div>
<p>Oracle Database stores PL/SQL triggers in compiled form in a database schema, just like PL/SQL stored procedures.</p>
<p>When a <code class="codeph">CREATE TRIGGER</code> statement commits, the compiled PL/SQL code is stored in the database. The shared pool removes the source code of the PL/SQL trigger.</p>
<p>The following graphic shows a database application with SQL statements that implicitly invoke PL/SQL triggers. The triggers are stored separately from their associated tables.</p>
<div class="figure" id="GUID-D54C348D-BFC6-41B6-AEDD-C081C1089208__BABJAIBB">
<p class="titleinfigure">Figure 8-7 Triggers</p>
<img width="576" height="339" src="img/GUID-9017A953-FC26-4CAB-A8E8-006072382642-default.gif" alt="Description of Figure 8-7 follows" title="Description of Figure 8-7 follows"/><br/>
<a href="img_text/GUID-9017A953-FC26-4CAB-A8E8-006072382642-print.htm">Description of &#34;Figure 8-7 Triggers&#34;</a></div>
<!-- class="figure" -->
<p>Java triggers are stored in the same manner as PL/SQL triggers. However, a Java trigger references Java code that was separately compiled with a <code class="codeph">CALL</code> statement. Thus, creating a Java trigger involves creating Java code and creating the trigger that references this Java code.</p>
<div class="infoboxnotealso" id="GUID-D54C348D-BFC6-41B6-AEDD-C081C1089208__GUID-AF279AA8-4118-4B89-B4FD-B5E68A3B2C0D">
<p class="notep1">See Also:</p>
<p><a class="olink LNPLS2007" target="_blank" href="../LNPLS/triggers.htm#LNPLS2007"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a> to learn about compiling and storing triggers</p>
</div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1196">
<tr>
<td class="cellalignment1203">
<table class="cellalignment1201">
<tr>
<td class="cellalignment1200"><a href="sqllangu.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1200"><a href="part_txn.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1993, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1205">
<table class="cellalignment1199">
<tr>
<td class="cellalignment1200"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1200"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1200"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1200"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1200"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1200"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>