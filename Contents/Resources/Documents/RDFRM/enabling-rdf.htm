<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-88531"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Enabling%2C%20Downgrading%2C%20or%20Removing%20RDF%20Semantic%20Graph%20Support"></a><title>Enabling, Downgrading, or Removing RDF Semantic Graph Support</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="semantic technologies support, enabling, catsem.sql script, upgrading from Release 11.1, upgrading, semantic technologies support from Release 11.1, downgrading to Release 11.1, downgrading, semantic technologies support to Release 11.1, RDF Semantic Graph support, removing, removing RDF Semantic Graph, uninstalling RDF Semantic Graph support"/>
<meta name="dcterms.created" content="2017-06-29T10:38:43Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Spatial and Graph RDF Semantic Graph Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E51611-08"/>
<meta name="dcterms.isVersionOf" content="RDFRM"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2005, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="sem-rdfsa-ref.htm" title="Previous" type="text/html"/>
<link rel="Next" href="sem-match-spatial.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E51611-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-D2F1EC6E-09A6-4845-A9E2-5EA2633F318E"></a> <span id="PAGE" style="display:none;">24/28</span> <!-- End Header -->
<a id="RDFRM118"></a>
<h1 id="RDFRM-GUID-D2F1EC6E-09A6-4845-A9E2-5EA2633F318E" class="sect1"><span class="enumeration_chapter">A</span> Enabling, Downgrading, or Removing RDF Semantic Graph Support</h1>
<div>
<p>This appendix describes the required steps that you must perform before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release. You must run one or more scripts, and you must ensure that Spatial and Graph is installed and the Partitioning option is enabled. These requirements are explained in <a href="enabling-rdf.htm#GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF">Enabling RDF Semantic Graph Support</a>.</p>
<p>This appendix also describes the steps if, after enabling RDF Semantic Graph support, you need to do any of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Downgrade the RDF Semantic Graph support to that provided with a previous Oracle Database release, as explained in <a href="enabling-rdf.htm#GUID-8481C6C2-CA52-460A-9F82-A3F8EB1B2280">Downgrading RDF Semantic Graph Support to a Previous Release</a>.</p>
</li>
<li>
<p>Remove all support for RDF Semantic Graph from the database, as explained in <a href="enabling-rdf.htm#GUID-8E9F92BA-442C-4BA7-98AE-BE3D12D9E845">Removing RDF Semantic Graph Support</a>.</p>
</li>
</ul>
</div>
<a id="RDFRM119"></a>
<div class="props_rev_3"><a id="GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF"></a>
<h2 id="RDFRM-GUID-8B3D00C9-E2B8-4074-BE88-055DD5E157BF" class="sect2"><span class="enumeration_section">A.1</span> Enabling RDF Semantic Graph Support</h2>
<div>
<p>Before you can use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support in the current Oracle Database release, you must either install the capabilities in a new Oracle Database installation or upgrade the capabilities from a previous release, following the steps in whichever of the following sections applies to your situation:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="enabling-rdf.htm#GUID-5A3B7879-ADD8-4E4F-8063-BD4BF68F4726">Enabling RDF Semantic Graph Support in a New Database Installation</a></p>
</li>
<li>
<p><a href="enabling-rdf.htm#GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427">Upgrading RDF Semantic Graph Support from Release 11.1 or 11.2</a></p>
</li>
</ul>
<p>In addition, you must ensure that Spatial and Graph is installed and the Partitioning option is enabled, as explained in <a href="enabling-rdf.htm#GUID-6CBAD6C8-C041-4C22-8FB7-5E638E56061E">Spatial and Partitioning Requirements</a>.</p>
</div>
<a id="RDFRM120"></a>
<div class="props_rev_3"><a id="GUID-5A3B7879-ADD8-4E4F-8063-BD4BF68F4726"></a>
<h3 id="RDFRM-GUID-5A3B7879-ADD8-4E4F-8063-BD4BF68F4726" class="sect3"><span class="enumeration_section">A.1.1</span> Enabling RDF Semantic Graph Support in a New Database Installation</h3>
<div>
<p>To enable RDF Semantic Graph support in a new installation of Oracle Database Release 11.2 or later, follow these steps:</p>
<ol>
<li>
<p>Connect to the database as the SYS user with SYSDBA privileges (SYS AS SYSDBA, and enter the SYS account password when prompted).</p>
</li>
<li>
<p>For Release 12.1.0.2 only (not Release 12.1.0.1 or earlier, and not later than Release 12.1.0.2), if you have not already enabled the Oracle Spatial and Graph GeoRaster feature, enter the following:</p>
<pre dir="ltr">EXECUTE mdsys.enableGeoRaster;
</pre>
<p>If the Oracle Spatial and Graph GeoRaster feature has not been enabled, Oracle Spatial and Graph RDF Semantic Graph may be misconfigured in Release 12.1.0.2.0 because a system trigger for DDL operations on application tables associated with semantic models will not exist. That system trigger is created when GeoRaster is enabled; and so for users who chose not to enable GeoRaster, the trigger will not exist.</p>
<p>or more details, including how to check for data corruption and what to do if corruption has occurred, see the Release 12.1.0.2&ndash;specific material later in this topic.</p>
</li>
<li>
<p>Start SQL*Plus, and enter the following statement:</p>
<ul style="list-style-type: disc;">
<li>
<p>Linux: <code class="codeph">@$ORACLE_HOME/md/admin/catsem.sql</code></p>
</li>
<li>
<p>Windows: <code class="codeph">@%ORACLE_HOME%\md\admin\catsem.sql</code></p>
</li>
</ul>
</li>
</ol>
<p>If a semantic network already exists, or if any RDF Semantic Graph types, tables, or PL/SQL packages already exist, the <code class="codeph">catsem.sql</code> script exits with an error.</p>
<p>If the script completes successfully, a row with the following column values is inserted into the MDSYS.RDF_PARAMETER table:</p>
<ul style="list-style-type: disc;">
<li>
<p>NAMESPACE: <code class="codeph">MDSYS</code></p>
</li>
<li>
<p>ATTRIBUTE: <code class="codeph">SEM_VERSION</code></p>
</li>
<li>
<p>VALUE: (string starting with <code class="codeph">12.1</code>)</p>
</li>
<li>
<p>DESCRIPTION: <code class="codeph">VALID</code></p>
</li>
</ul>
<p>If you use Workspace Manager with RDF data, you must also run the appropriate script <span class="italic">after</span> you run <code class="codeph">catsem.sql</code>, as explained in <a href="wm-rdf.htm#GUID-8C88A1ED-942B-450E-9A0A-91AC191AA2C2">Enabling Workspace Manager Support for RDF Data</a>.</p>
<p><span class="bold">In Release 12.1.0.2 only</span>, if the Oracle Spatial and Graph GeoRaster feature has not been enabled, Oracle Spatial and Graph RDF Semantic Graph may be misconfigured because a system trigger for DDL operations on application tables associated with semantic models will not exist. To create this trigger, you must execute <code class="codeph">mdsys.enableGeoRaster</code> as SYS.</p>
<p>This problem affects both new Oracle Database version 12.1.0.2.0 installations and databases that have been upgraded to version 12.1.0.2.0.</p>
<p>If this DDL trigger is not present, TRUNCATE operations on an application table will remove all rows from the application table, but the associated triples stored in MDSYS.RDF_LINK$ will not be removed. In this case, there will be a mismatch between the application table and its associated semantic model, and you must correct this mismatch.</p>
<p>Use SQL queries in the following form to check for a data mismatch (for example, on an application table named ATAB associated with a semantic model named M):</p>
<pre dir="ltr">SELECT COUNT(*) FROM ATAB;
SELECT SUM(COST) FROM MDSYS.RDFM_M;
</pre>
<p>If the two queries return identical results, then there is no data mismatch, and no further action beyond executing <code class="codeph">mdsys.enableGeoRaster</code> is required.</p>
<p>However, if the two queries return different results, in addition to executing <code class="codeph">mdsys.enableGeoRaster</code>,you should take further action with each corrupted model. If the model is security enabled with an OLS policy, contact Oracle Support. For other models, you should take one of the following actions:</p>
<ul style="list-style-type: disc;">
<li>
<p>Re-create the model, as follows:</p>
<ol>
<li>
<p>Build a staging table from the contents of the application table. For example, build staging table STAB from the contents of application table ATAB with SDO_RDF_TRIPLE_S column TRI, as follows:</p>
<pre dir="ltr">create table stab as
select
  a.tri.get_subject() rdf$stc_sub,
  a.tri.get_property() rdf$stc_pred,
  a.tri.get_object() rdf$stc_obj,
  (case when(instr(a.tri.get_model(),&#39;:&#39;) &gt; 0) then
          substr(a.tri.get_model(),instr(a.tri.get_model(),&#39;:&#39;)+1)
        else null
   end) rdf$stc_graph
from atab a;
</pre>
<p>Alternatively, for very large models, you can use queries similar to the following to fill two staging tables (one for VARCHAR object terms and one for CLOB object terms). Note that a degree of parallelism of 4 (<code class="codeph">/*+ parallel(4) */</code>) is used in the CREATE TABLE statements in the following example; the degree of parallelism should be customized for your particular hardware setup.</p>
<pre dir="ltr">-- for varchar literals
create /*+ parallel(4) */ table stab_vc as
select /*+ parallel */
  (case when vs.value_type = &#39;UR&#39; then &#39;&lt;&#39; || vs.value_name || &#39;&gt;&#39;
        else vs.value_name
   end) rdf$stc_sub,
  (&#39;&lt;&#39; || vp.value_name || &#39;&gt;&#39;) rdf$stc_pred,
  (case when vo.value_type = &#39;UR&#39; then &#39;&lt;&#39; || vo.value_name || &#39;&gt;&#39;
        when vo.value_type = &#39;BN&#39; then vo.value_name
        else &#39;&#34;&#39; || vo.value_name || &#39;&#34;&#39; ||
             nvl2(vo.language_type,&#39;@&#39; || vo.language_type,&#39;&#39;) ||
             nvl2(vo.literal_type,&#39;^^&lt;&#39; || vo.literal_type || &#39;&gt;&#39;, &#39;&#39;)
   end) rdf$stc_obj,
  (nvl2(vg.value_name,(&#39;&lt;&#39; || vg.value_name || &#39;&gt;&#39;),&#39;&#39;)) rdf$stc_graph
from atab a, mdsys.rdf_value$ vs, mdsys.rdf_value$ vp, mdsys.rdf_value$ vo, mdsys.rdf_value$ vg
where
  (a.tri.rdf_s_id = vs.value_id) and
  (a.tri.rdf_p_id = vp.value_id) and
  (a.tri.rdf_c_id = vo.value_id) and
  ((bitand(a.tri.rdf_m_id, 79228162514264337593543950335-4294967295)/4294967296) = vg.value_id(+)) and
  (vo.long_value is null);
 
-- for clob literals
create /*+ parallel(4) */ table stab_clob as
select /*+ parallel */
  (case when vs.value_type = &#39;UR&#39; then &#39;&lt;&#39; || vs.value_name || &#39;&gt;&#39;
        else vs.value_name
   end) rdf$stc_sub,
  (&#39;&lt;&#39; || vp.value_name || &#39;&gt;&#39;) rdf$stc_pred,
  (sem_apis.compose_rdf_term(vo.value_name, vo.value_type, vo.literal_type, vo.language_type, vo.long_value)) as rdf$stc_obj,
  (nvl2(vg.value_name,(&#39;&lt;&#39; || vg.value_name || &#39;&gt;&#39;),&#39;&#39;)) rdf$stc_graph
from atab a, mdsys.rdf_value$ vs, mdsys.rdf_value$ vp, mdsys.rdf_value$ vo, mdsys.rdf_value$ vg
where
  (a.tri.rdf_s_id = vs.value_id) and
  (a.tri.rdf_p_id = vp.value_id) and
  (a.tri.rdf_c_id = vo.value_id) and
  ((bitand(a.tri.rdf_m_id, 79228162514264337593543950335-4294967295)/4294967296) = vg.value_id(+)) and
  (vo.long_value is not null);
</pre></li>
<li>Drop the model. For example, drop model M, as follows:
<div class="p">
<pre dir="ltr">exec sem_apis.drop_sem_model(&#39;m&#39;);
</pre></div>
</li>
<li>
<p>Truncate the application table. For example, truncate ATAB, as follows:</p>
<pre dir="ltr">truncate table atab;
</pre></li>
<li>
<p>Create the model with the application table. For example, create model M from application table ATAB, as follows:</p>
<pre dir="ltr">exec sem_apis.create_sem_model(&#39;m&#39;,&#39;atab&#39;,&#39;tri&#39;);
</pre></li>
<li>
<p>Load the triples or quads from the staging table into the model. For example, load the triples or quads from STAB into model M, as follows. (For larger models, you can instead use the <a href="sem-apis-ref.htm#GUID-AB6697BF-C840-4F48-8C81-FACB3CA54B1A">SEM_APIS.BULK_LOAD_FROM_STAGING_TABLE</a> procedure.)</p>
<pre dir="ltr">insert into atab(tri)
select sdo_rdf_triple_s(&#39;m1&#39; || nvl2(s.rdf$stc_graph,&#39;:&#39;||s.rdf$stc_graph,&#39;&#39;), s.rdf$stc_sub, s.rdf$stc_pred, s.rdf$stc_obj)
from stab s;
</pre>
<p>Or, referring to the alternative example in step 1, when using two staging tables for very large models, use the <a href="sem-apis-ref.htm#GUID-AB6697BF-C840-4F48-8C81-FACB3CA54B1A">SEM_APIS.BULK_LOAD_FROM_STAGING_TABLE</a> procedure to load data from the VARCHAR table (<code class="codeph">stab_vc</code>) and use INSERT AS SELECT to load data from the CLOB table (<code class="codeph">stab_clob</code>).</p>
</li>
</ol>
</li>
<li>
<p>Or, contact Oracle Support.</p>
</li>
</ul>
</div>
</div>
<a id="RDFRM121"></a>
<div class="props_rev_3"><a id="GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427"></a>
<h3 id="RDFRM-GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427" class="sect3"><span class="enumeration_section">A.1.2</span> Upgrading RDF Semantic Graph Support from Release 11.1 or 11.2</h3>
<div>
<p>If you are upgrading from Oracle Database Release 11.1 or 11.2 that includes the semantic technologies support, the semantic technologies support is automatically upgraded to Release 12.1 or later when the database is upgraded.</p>
<p>However, you may also need to migrate RDF data if you have an existing Release 11.1 or 11.2 RDF network containing triples that include typed literal values of type xsd:float, xsd:double, xsd:boolean, or xsd:time.</p>
<p>To check if you need to migrate RDF data, connect to the database as a user with DBA privileges and query the MDSYS.RDF_PARAMETER table, as follows:</p>
<pre dir="ltr">SELECT namespace, attribute, value FROM mdsys.rdf_parameter
  WHERE namespace=&#39;MDSYS&#39; 
  AND attribute IN (&#39;FLOAT_DOUBLE_DECIMAL&#39;,
                    &#39;XSD_TIME&#39;, &#39;XSD_BOOLEAN&#39;, 
                    &#39;DATA_CONVERSION_CHECK&#39;);
</pre>
<p>If the FLOAT_DOUBLE_DECIMAL, XSD_TIME, or XSD_BOOLEAN attributes have the string value <code class="codeph">INVALID</code> or if the DATA_CONVERSION_CHECK attribute has the string value <code class="codeph">FAILED_UNABLE_TO_LOCK_APPLICATION_TABLES</code>, <code class="codeph">FAILED_INSUFFICIENT_WORKSPACE_PRIVILEGES</code>, or <code class="codeph">FAILED_OLS_POLICIES_ARE_ENABLED</code>, you need to migrate RDF data.</p>
<p>However, if the FLOAT_DOUBLE_DECIMAL, XSD_TIME, and XSD_BOOLEAN attributes do not exist or have the string value <code class="codeph">VALID</code> and if the DATA_CONVERSION_CHECK attribute does not exist, you do <span class="italic">not</span> need to migrate RDF data. However, if your semantic network may have any empty RDF literals, see <a href="enabling-rdf.htm#GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7">Handling of Empty RDF Literals</a>; and if you choose to migrate existing empty literals to the new format, follow the steps in this section.</p>
<p>To migrate RDF data, follow these steps:</p>
<ol>
<li>
<p>Connect to the database as the SYS user with SYSDBA privileges (SYS AS SYSDBA, and enter the SYS account password when prompted), and enter: <code class="codeph">SET CURRENT_SCHEMA=MDSYS</code></p>
</li>
<li>
<p>Ensure that the user MDSYS has the following privileges:</p>
<ul style="list-style-type: disc;">
<li>
<p>INSERT privilege on all application tables in the semantic network</p>
</li>
<li>
<p>ALTER ANY INDEX privilege (optional: only necessary if Semantic Indexing for Documents is being used)</p>
</li>
<li>
<p>ACCESS privilege for any workspace in which version-enabled application tables have been modified (optional: only necessary if Workspace Manager is being used for RDF data)</p>
</li>
</ul>
</li>
<li>
<p>Ensure that any OLS policies for RDF data are temporarily disabled (optional: only necessary if OLS for RDF Data is being used). OLS policies can be re-enabled after running convert_old_rdf_data.</p>
</li>
<li>
<p><a id="d70480e421" class="indexterm-anchor"></a><a id="d70480e423" class="indexterm-anchor"></a>Start SQL*Plus. If you want to migrate the RDF data without converting existing empty literals to the new format (see <a href="enabling-rdf.htm#GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7">Handling of Empty RDF Literals</a>), enter the following statement:</p>
<pre dir="ltr">EXECUTE sdo_rdf_internal.convert_old_rdf_data;
</pre>
<p>If you want to migrate the RDF data and also convert existing empty literals to the new format, call <code class="codeph">convert_old_rdf_data</code> with the <code class="codeph">flags</code> parameter set to <code class="codeph">&#39;CONVERT_ORARDF_NULL&#39;</code>. In addition, you can use an optional <code class="codeph">tablespace_name</code> parameter to specify the tablespace to use when creating intermediate tables during data migration. For example, the following statement migrates old semantic data, converts existing <code class="codeph">&#34;orardf:null &#34;</code> values to &#34;&#34;, and uses the MY_TBS tablespace for any intermediate tables:</p>
<pre dir="ltr">EXECUTE sdo_rdf_internal.convert_old_rdf_data(
  flags=&gt;&#39;CONVERT_ORARDF_NULL&#39;, 
  tablespace_name=&gt;&#39;MY_TBS&#39;);
</pre>
<p>The <code class="codeph">sdo_rdf_internal.convert_old_rdf_data</code> procedure may take a significant amount of time to run if the semantic network contains many triples that are using (or affected by use of) xsd:float, xsd:double, xsd:time, or xsd:boolean typed literals.</p>
</li>
<li>
<p><a id="d70480e458" class="indexterm-anchor"></a>Enter the following statement:</p>
<ul style="list-style-type: disc;">
<li>
<p>Linux: <code class="codeph">@$ORACLE_HOME/md/admin/semrelod.sql</code></p>
</li>
<li>
<p>Windows: <code class="codeph">@%ORACLE_HOME%\md\admin\semrelod.sql</code></p>
</li>
</ul>
</li>
</ol>
<div class="infobox-note" id="GUID-BCCAA7B3-3B0E-4B65-B54F-BDB8F2C4B427__GUID-FC089C76-2E00-4817-8D4B-9CC8879983B7">
<p class="notep1">Note:</p>
<p>You may encounter the ORA-00904 (invalid identifier) error when executing a SEM_MATCH query if the <code class="codeph">sdo_rdf_internal.convert_old_rdf_data</code> procedure and the <code class="codeph">semrelod.sql</code> script were not run after the upgrade to Release 12.1 or later.</p>
</div>
</div>
<a id="RDFRM398"></a>
<div class="props_rev_3"><a id="GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7"></a>
<h4 id="RDFRM-GUID-E58678DE-F2C3-4B5B-B0A8-4745633A0CD7" class="sect4"><span class="enumeration_section">A.1.2.1</span> Handling of Empty RDF Literals</h4>
<div>
<p>The way empty-valued RDF literals are handled was changed in Release 11.2. Before this release, the values of empty-valued literals were converted to <code class="codeph">&#34;orardf:null&#34;</code>. In Release 11.2 and later, such values are stored without modification (that is, as &#34;&#34;). However, whether you migrate existing <code class="codeph">&#34;orardf:null&#34;</code> values to &#34;&#34; is optional.</p>
<p>To check if <code class="codeph">&#34;orardf:null&#34;</code> values exist in your semantic network, connect to the database as a user with DBA privileges and query the MDSYS.RDF_PARAMETER table, as follows:</p>
<pre dir="ltr">SELECT namespace, attribute, value FROM mdsys.rdf_parameter
  WHERE namespace=&#39;MDSYS&#39; 
  AND attribute = &#39;NULL_LITERAL&#39;;
</pre>
<p>If the NULL_LITERAL attribute has the value <code class="codeph">EXISTS</code>, then <code class="codeph">&#34;orardf:null&#34;</code> values are present in your semantic network.</p>
</div>
</div>
</div>
<a id="RDFRM123"></a>
<div class="props_rev_3"><a id="GUID-6CBAD6C8-C041-4C22-8FB7-5E638E56061E"></a>
<h3 id="RDFRM-GUID-6CBAD6C8-C041-4C22-8FB7-5E638E56061E" class="sect3"><span class="enumeration_section">A.1.3</span> Spatial and Partitioning Requirements</h3>
<div>
<p>Oracle <a id="d70480e582" class="indexterm-anchor"></a><a id="d70480e586" class="indexterm-anchor"></a><a id="d70480e590" class="indexterm-anchor"></a>Spatial and Graph must be installed before you can use any of the RDF and OWL capabilities. Oracle Locator is not sufficient. For information about Spatial and Graph and Locator, see <a class="olink SPATL" target="_blank" href="../SPATL/toc.htm"><span class="italic">Oracle Spatial and Graph Developer&#39;s Guide</span></a>.</p>
<p>The Partitioning option must be enabled before you can use any of the RDF and OWL capabilities. For licensing information about the Partitioning option, see <a class="olink DBLIC" target="_blank" href="../DBLIC/toc.htm"><span class="italic">Oracle Database Licensing Information</span></a>. For usage information about partitioning, see <a class="olink VLDBG" target="_blank" href="../VLDBG/toc.htm"><span class="italic">Oracle Database VLDB and Partitioning Guide</span></a>.</p>
</div>
</div>
</div>
<a id="RDFRM124"></a>
<div class="props_rev_3"><a id="GUID-8481C6C2-CA52-460A-9F82-A3F8EB1B2280"></a>
<h2 id="RDFRM-GUID-8481C6C2-CA52-460A-9F82-A3F8EB1B2280" class="sect2"><span class="enumeration_section">A.2</span> Downgrading RDF Semantic Graph Support to a Previous Release</h2>
<div>
<p>This section explains how to downgrade the RDF Semantic Graph support, in conjunction with an Oracle Database downgrade to Release 11.2.</p>
<p>Downgrading is <span class="italic"><span class="bold">strongly discouraged</span></span>, except for rare cases where it is necessary. If you downgrade to a previous release, you will not benefit from bug fixes and enhancements that have been made in intervening releases.</p>
<p>If you have enabled Workspace Manager support for RDF data, you must remove that support <span class="italic">before</span> you downgrade RDF Semantic Graph support in the database, as explained in <a href="wm-rdf.htm#GUID-F90801CE-3DA8-47B4-BB00-E4F6E713431A">Removing Workspace Manager Support for RDF Data</a>.</p>
</div>
<a id="RDFRM125"></a>
<div class="props_rev_3"><a id="GUID-5CA0C2D8-C775-4A65-A12D-1BADC29D7ABF"></a>
<h3 id="RDFRM-GUID-5CA0C2D8-C775-4A65-A12D-1BADC29D7ABF" class="sect3"><span class="enumeration_section">A.2.1</span> Downgrading to Release 11.2 Semantic Technologies Support</h3>
<div>
<p>If you need to downgrade to Oracle Database Release 11.2, the semantic technologies component will be downgraded automatically when you downgrade the database. However, any RDF or OWL data that is specific to Release 12 (that is, Release 12 or later RDF/OWL persistent structures that are not supported in previous versions) must be dropped <span class="italic">before</span> you perform the downgrade, so that the database is compatible with Release 11.2.</p>
<p>To check if any Release 12.1 or later RDF data is incompatible with Release 11.2, perform the following steps:</p>
<ol>
<li>
<p>Connect to the database (Release 12.1 or later) as the SYS user with SYSDBA privileges (SYS AS SYSDBA, and enter the SYS account password when prompted).</p>
</li>
<li>
<p>Start SQL*Plus, and enter the following statements:</p>
<pre dir="ltr">SET SERVEROUT ON
EXECUTE SDO_SEM_DOWNGRADE.CHECK_112_COMPATIBLE;
</pre></li>
</ol>
<p><a id="d70480e730" class="indexterm-anchor"></a>If any RDF data is incompatible with Release 11.2, the procedure generates an error and displays a list of the incompatible data. In this case, you must perform the following steps:</p>
<ol>
<li>
<p>Remove any Release 12.1 or later release-specific RDF or OWL data if you have not already done so, as explained earlier in this section.</p>
</li>
<li>
<p>Perform the database downgrade.</p>
</li>
<li>
<p>Connect to the Release 11.2 database as the SYS user with SYSDBA privileges (SYS AS SYSDBA, and enter the SYS account password when prompted).</p>
</li>
<li>
<p>Start SQL*Plus, and enter the following statement:</p>
<ul style="list-style-type: disc;">
<li>
<p>Linux: <code class="codeph">@$ORACLE_HOME/md/admin/semrelod.sql</code></p>
</li>
<li>
<p>Windows: <code class="codeph">@%ORACLE_HOME%\md\admin\semrelod.sql</code></p>
</li>
</ul>
<p>If the script completes successfully, a row with the following column values is inserted into the MDSYS.RDF_PARAMETER table:</p>
<ul style="list-style-type: disc;">
<li>
<p>NAMESPACE: <code class="codeph">MDSYS</code></p>
</li>
<li>
<p>ATTRIBUTE: <code class="codeph">SEM_VERSION</code></p>
</li>
<li>
<p>VALUE: (string starting with <code class="codeph">112</code>)</p>
</li>
<li>
<p>DESCRIPTION: <code class="codeph">VALID</code></p>
</li>
</ul>
<p>After the <code class="codeph">semrelod.sql</code> script completes successfully, Oracle semantic technologies support for Release 11.2 is enabled and ready to use, and all Release 11.2-compatible data is preserved.</p>
</li>
</ol>
</div>
</div>
</div>
<a id="RDFRM127"></a>
<div class="props_rev_3"><a id="GUID-8E9F92BA-442C-4BA7-98AE-BE3D12D9E845"></a>
<h2 id="RDFRM-GUID-8E9F92BA-442C-4BA7-98AE-BE3D12D9E845" class="sect2"><span class="enumeration_section">A.3</span> Removing RDF Semantic Graph Support</h2>
<div>
<p>This section explains how to remove the RDF Semantic Graph support from the database. Removing this support is <span class="italic"><span class="bold">strongly discouraged</span></span>, unless you have a strong reason for doing it. After you remove this support, no applications or database users will be able to use any types, synonyms, or PL/SQL packages related to RDF Semantic Graph support.</p>
<p>If you have enabled Workspace Manager support for RDF data, you must remove that support <span class="italic">before</span> you remove RDF Semantic Graph support from the database, as explained in <a href="wm-rdf.htm#GUID-F90801CE-3DA8-47B4-BB00-E4F6E713431A">Removing Workspace Manager Support for RDF Data</a>.</p>
<p>To remove the RDF Semantic Graph support from the database, perform the following steps:</p>
<ol>
<li>
<p>Connect to the database as the SYS user with SYSDBA privileges (SYS AS SYSDBA, and enter the SYS account password when prompted).</p>
</li>
<li>
<p><a id="d70480e858" class="indexterm-anchor"></a>Start SQL*Plus, and enter the following statement:</p>
<ul style="list-style-type: disc;">
<li>
<p>Linux: <code class="codeph">@$ORACLE_HOME/md/admin/semremov.sql</code></p>
</li>
<li>
<p>Windows: <code class="codeph">@%ORACLE_HOME%\md\admin\semremov.sql</code></p>
</li>
</ul>
</li>
</ol>
<p>The <code class="codeph">semremov.sql</code> script drops the semantic network and removes any RDF Semantic Graph types, tables, and PL/SQL packages:</p>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4500">
<tr>
<td class="cellalignment4507">
<table class="cellalignment4505">
<tr>
<td class="cellalignment4504"><a href="sem-rdfsa-ref.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4504"><a href="sem-match-spatial.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2005, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4509">
<table class="cellalignment4503">
<tr>
<td class="cellalignment4504"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4504"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4504"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4504"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4504"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4504"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>