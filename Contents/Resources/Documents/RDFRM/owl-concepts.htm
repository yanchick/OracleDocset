<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-88553"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/OWL%20Concepts"></a><title>OWL Concepts</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="OWL, SameAs, optimizing inference, cliques (sameAs), sameAs, optimizing inference (OWL), incremental inference, parallel inference, named graph based inference, global, NGGI (named graph based global inference), local, NGLI (named graph based local inference), SEM_RELATED operator, queries using the SEM_RELATED operator, queries, using the SEM_RELATED operator, SEM_DISTANCE ancillary operator, queries using the SEM_DISTANCE ancillary operator, using the SEM_DISTANCE ancillary operator, semantic index, creating (MDSYS.SEM_INDEXTYPE), SEM_INDEXTYPE index type, inverseOf keyword, using to force use of semantic index, URIPREFIX keyword, URI prefix, using when values are not stored as URIs"/>
<meta name="dcterms.created" content="2017-06-29T10:38:43Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Spatial and Graph RDF Semantic Graph Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E51611-08"/>
<meta name="dcterms.isVersionOf" content="RDFRM"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2005, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="rdf-overview.htm" title="Previous" type="text/html"/>
<link rel="Next" href="skos.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E51611-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-3EC5F30E-9175-4B7B-946C-3117BC30610A"></a> <span id="PAGE" style="display:none;">9/28</span> <!-- End Header -->
<a id="RDFRM200"></a>
<h1 id="RDFRM-GUID-3EC5F30E-9175-4B7B-946C-3117BC30610A" class="sect1"><span class="enumeration_chapter">2</span> OWL Concepts</h1>
<div>
<p>This chapter describes concepts related to the support for a subset of the Web Ontology Language (OWL). It builds on the information in <a href="rdf-overview.htm#GUID-F422BB9F-8473-4980-9D6C-848F708C10E0">RDF Semantic Graph Overview</a>, and it assumes that you are familiar with the major concepts associated with OWL, such as ontologies, properties, and relationships. For detailed information about OWL, see the <span class="italic">OWL Web Ontology Language Reference</span> at <a href="http://www.w3.org/TR/owl-ref/" target="_blank"><code class="codeph">http://www.w3.org/TR/owl-ref/</code></a>.</p>
<p>This chapter contains the following major sections:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="owl-concepts.htm#GUID-3471DB36-45BB-4274-8E74-39DC8EF83C99">Ontologies</a></p>
</li>
<li>
<p><a href="owl-concepts.htm#GUID-30145814-CB5E-45ED-B220-677515F91AA9">Using OWL Inferencing</a></p>
</li>
<li>
<p><a href="owl-concepts.htm#GUID-91E180EF-CCF0-4E56-859E-D25C019A31A0">Using Semantic Operators to Query Relational Data</a></p>
</li>
</ul>
</div>
<a id="RDFRM614"></a>
<div class="props_rev_3"><a id="GUID-3471DB36-45BB-4274-8E74-39DC8EF83C99"></a>
<h2 id="RDFRM-GUID-3471DB36-45BB-4274-8E74-39DC8EF83C99" class="sect2"><span class="enumeration_section">2.1</span> Ontologies</h2>
<div>
<p>An <span class="bold">ontology</span> is a shared conceptualization of knowledge in a particular domain. It consists of a collection of classes, properties, and optionally instances. Classes are typically related by class hierarchy (subclass/ superclass relationship). Similarly, the properties can be related by property hierarchy (subproperty/ superproperty relationship). Properties can be symmetric or transitive, or both. Properties can also have domain, ranges, and cardinality constraints specified for them.</p>
<p>RDFS-based ontologies only allow specification of class hierarchies, property hierarchies, <code class="codeph">instanceOf</code> relationships, and a domain and a range for properties.</p>
<p>OWL ontologies build on RDFS-based ontologies by additionally allowing specification of property characteristics. OWL ontologies can be further classified as OWL-Lite, OWL-DL, and OWL Full. OWL-Lite restricts the cardinality minimum and maximum values to 0 or 1. OWL-DL relaxes this restriction by allowing minimum and maximum values. OWL Full allows instances to be also defined as a class, which is not allowed in OWL-DL and OWL-Lite ontologies.</p>
<p><a href="owl-concepts.htm#GUID-3BAE05B2-16B5-46A2-8223-EC01BB752BA1">Supported OWL Subsets</a> describes OWL capabilities that are supported and not supported with semantic data.</p>
</div>
<a id="RDFRM616"></a><a id="RDFRM617"></a><a id="RDFRM615"></a>
<div class="props_rev_3"><a id="GUID-EC20AEB0-4D89-4CC3-9A95-B5BBD9C25ECF"></a>
<h3 id="RDFRM-GUID-EC20AEB0-4D89-4CC3-9A95-B5BBD9C25ECF" class="sect3"><span class="enumeration_section">2.1.1</span> Example: Cancer Ontology</h3>
<div>
<p><a href="owl-concepts.htm#GUID-EC20AEB0-4D89-4CC3-9A95-B5BBD9C25ECF__CHDDIAHC">Figure 2-1</a> shows part of a cancer ontology, which describes the classes and properties related to cancer. One requirement is to have a PATIENTS data table with a column named DIAGNOSIS, which must contain a value from the <code class="codeph">Diseases_and_Disorders</code> class hierarchy.</p>
<div class="figure" id="GUID-EC20AEB0-4D89-4CC3-9A95-B5BBD9C25ECF__CHDDIAHC">
<p class="titleinfigure">Figure 2-1 Cancer Ontology Example</p>
<img width="367" height="289" src="img/GUID-F5B123BF-48E5-41C0-ABFD-9DDAF3A2BE81-default.gif" alt="Description of Figure 2-1 follows" title="Description of Figure 2-1 follows"/><br/>
<a href="img_text/GUID-F5B123BF-48E5-41C0-ABFD-9DDAF3A2BE81-print.htm">Description of &#34;Figure 2-1 Cancer Ontology Example&#34;</a></div>
<!-- class="figure" -->
<p>In the cancer ontology shown in <a href="owl-concepts.htm#GUID-EC20AEB0-4D89-4CC3-9A95-B5BBD9C25ECF__CHDDIAHC">Figure 2-1</a>, the diagnosis <code class="codeph">Immune_System_Disorder</code> includes two subclasses, <code class="codeph">Autoimmune_Disease</code> and <code class="codeph">Immunodeficiency_Syndrome</code>. The <code class="codeph">Autoimmune_Disease</code> diagnosis includes the subclass <code class="codeph">Rheumatoid_Arthritis</code>; and the <code class="codeph">Immunodeficiency_Syndrome</code> diagnosis includes the subclass <code class="codeph">T_Cell_Immunodeficiency</code>, which includes the subclass <code class="codeph">AIDS</code>.</p>
<p>The data in the PATIENTS table might include the PATIENT_ID and DIAGNOSIS column values shown in <a href="owl-concepts.htm#GUID-EC20AEB0-4D89-4CC3-9A95-B5BBD9C25ECF__CHDEEGAC" title="PATIENTS table example data">Table 2-1</a>.</p>
<div class="tblformal" id="GUID-EC20AEB0-4D89-4CC3-9A95-B5BBD9C25ECF__CHDEEGAC">
<p class="titleintable">Table 2-1 PATIENTS Table Example Data</p>
<table class="cellalignment4510" title="PATIENTS Table Example Data" summary="PATIENTS table example data">
<thead>
<tr class="cellalignment4501">
<th class="cellalignment4520" id="d29298e217">PATIENT_ID</th>
<th class="cellalignment4521" id="d29298e220">DIAGNOSIS</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4501">
<td class="cellalignment4522" id="d29298e225" headers="d29298e217">
<p>1234</p>
</td>
<td class="cellalignment4523" headers="d29298e225 d29298e220">
<p>Rheumatoid_Arthritis</p>
</td>
</tr>
<tr class="cellalignment4501">
<td class="cellalignment4522" id="d29298e232" headers="d29298e217">
<p>2345</p>
</td>
<td class="cellalignment4523" headers="d29298e232 d29298e220">
<p>Immunodeficiency_Syndrome</p>
</td>
</tr>
<tr class="cellalignment4501">
<td class="cellalignment4522" id="d29298e239" headers="d29298e217">
<p>3456</p>
</td>
<td class="cellalignment4523" headers="d29298e239 d29298e220">
<p>AIDS</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>To query ontologies, you can use the SEM_MATCH table function (described in <a href="rdf-overview.htm#GUID-71464CC4-1C03-48A4-9A4C-0E671FF8F16E">Using the SEM_MATCH Table Function to Query Semantic Data</a>) or the SEM_RELATED operator and its ancillary operators (described in <a href="owl-concepts.htm#GUID-91E180EF-CCF0-4E56-859E-D25C019A31A0">Using Semantic Operators to Query Relational Data</a>).</p>
</div>
</div>
<a id="RDFRM619"></a><a id="RDFRM618"></a>
<div class="props_rev_3"><a id="GUID-3BAE05B2-16B5-46A2-8223-EC01BB752BA1"></a>
<h3 id="RDFRM-GUID-3BAE05B2-16B5-46A2-8223-EC01BB752BA1" class="sect3"><span class="enumeration_section">2.1.2</span> Supported OWL Subsets</h3>
<div>
<p>This section describes OWL vocabulary subsets that are supported.</p>
<p>Oracle Database supports the RDFS++, OWLSIF, and OWLPrime vocabularies, which have increasing expressivity, as well as OWL 2 RL. Each supported vocabulary has a corresponding rulebase; however, these rulebases do not need to be populated because the underlying entailment rules of these three vocabularies are internally implemented. The supported vocabularies are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>RDFS++: A minimal extension to RDFS; which is RDFS plus <code class="codeph">owl:sameAs</code> and <code class="codeph">owl:InverseFunctionalProperty</code>.</p>
</li>
<li>
<p>OWLSIF: OWL with IF Semantic, with the vocabulary and semantics proposed for pD* semantics in <span class="italic">Completeness, decidability and complexity of entailment for RDF Schema and a semantic extension involving the OWL vocabulary</span>, by H.J. Horst, Journal of Web Semantics 3, 2 (2005), 79&ndash;115.</p>
</li>
<li>
<p>OWLPrime: The following OWL capabilities:</p>
<ul style="list-style-type: disc;">
<li>
<p>Basics: class, subclass, property, subproperty, domain, range, type</p>
</li>
<li>
<p>Property characteristics: transitive, symmetric, functional, inverse functional, inverse</p>
</li>
<li>
<p>Class comparisons: equivalence, disjointness</p>
</li>
<li>
<p>Property comparisons: equivalence</p>
</li>
<li>
<p>Individual comparisons: same, different</p>
</li>
<li>
<p>Class expressions: complement</p>
</li>
<li>
<p>Property restrictions: <code class="codeph">hasValue</code>, <code class="codeph">someValuesFrom</code>, <code class="codeph">allValuesFrom</code></p>
<p>As with pD*, the supported semantics for these value restrictions are only intensional (IF semantics).</p>
</li>
</ul>
</li>
<li>
<p><a id="d29298e350" class="indexterm-anchor"></a><a id="d29298e352" class="indexterm-anchor"></a>OWL 2 RL: Described in the &#34;OWL 2 RL&#34; section of the W3C <span class="italic">OWL 2 Web Ontology Language Profiles</span> recommendation (<a href="http://www.w3.org/TR/owl2-profiles/#OWL_2_RL" target="_blank"><code class="codeph">http://www.w3.org/TR/owl2-profiles/#OWL_2_RL</code></a>) as: &#34;The OWL 2 RL profile is aimed at applications that require scalable reasoning without sacrificing too much expressive power. It is designed to accommodate both OWL 2 applications that can trade the full expressivity of the language for efficiency, and RDF(S) applications that need some added expressivity from OWL 2.&#34;</p>
<p>The system-defined rulebase <code class="codeph">OWL2RL</code> supports all the standard production rules defined for OWL 2 RL. As with <code class="codeph">OWLPRIME</code>, users will not see any rules in this OWL2RL rulebase. The rulebase <code class="codeph">OWL2RL</code> will be created automatically if it does not already exist.</p>
<p>The following code excerpt uses the OWL2RL rulebase:</p>
<pre dir="ltr">CREATE TABLE m1_tpl (triple SDO_RDF_TRIPLE_S) COMPRESS;
EXECUTE sem_apis.create_sem_model(&#39;m1&#39;,&#39;m1_tpl&#39;,&#39;triple&#39;);
-- Insert data into model M1. Details omitted
...
-- Now run inference using the OWL2RL rulebase
EXECUTE sem_apis.create_entailment(&#39;m1_inf&#39;,sem_models(&#39;m1&#39;),<span class="bold">sem_rulebases(&#39;owl2rl&#39;)</span>);
</pre>
<p>Note that inference-related optimizations, such as parallel inference and RAW8, are all applicable when the <code class="codeph">OWL2RL</code> rulebase is used.</p>
</li>
<li>
<p><a id="d29298e388" class="indexterm-anchor"></a><a id="d29298e390" class="indexterm-anchor"></a>OWL 2 EL: Described in the &#34;OWL 2 EL&#34; section of the W3C <span class="italic">OWL 2 Web Ontology Language Profiles</span> recommendation (<a href="http://www.w3.org/TR/owl2-profiles/#OWL_2_EL" target="_blank"><code class="codeph">http://www.w3.org/TR/owl2-profiles/#OWL_2_EL</code></a>) as: &#34;The OWL 2 EL profile is designed as a subset of OWL 2 that</p>
<ul style="list-style-type: disc;">
<li>
<p>is particularly suitable for applications employing ontologies that define very large numbers of classes and/or properties,</p>
</li>
<li>
<p>captures the expressive power used by many such ontologies, and</p>
</li>
<li>
<p>for which ontology consistency, class expression subsumption, and instance checking can be decided in polynomial time.&#34;</p>
</li>
</ul>
<p>A prime example of OWL 2 EL ontology is the biomedical ontology SNOMED Clinical Terms (SNOMED CT). For information about SNOMED CT, see: <a href="http://www.ihtsdo.org/snomed-ct/" target="_blank"><code class="codeph">http://www.ihtsdo.org/snomed-ct/</code></a></p>
<p>The system-defined rulebase <code class="codeph">OWL2EL</code> supports the EL syntax.</p>
<p>As with <code class="codeph">OWLPRIME</code> and <code class="codeph">OWL2RL</code>, users will not see any rules in this <code class="codeph">OWL2EL</code> rulebase, and the <code class="codeph">OWL2EL</code> rulebase will be created automatically if it does not already exist.</p>
<p>The following code excerpt uses the <code class="codeph">OWL2EL</code> rulebase against the well known SNOMED ontology:</p>
<pre dir="ltr">CREATE TABLE snomed_tpl (triple SDO_RDF_TRIPLE_S) COMPRESS;
EXECUTE sem_apis.create_sem_model(&#39;snomed&#39;,&#39;snomed_tpl&#39;,&#39;triple&#39;) compress;
-- Insert data into model SNOMED. Details omitted
...
-- Now run inference using the OWL2EL rulebase
EXECUTE sem_apis.create_entailment(&#39;snomed_inf&#39;,sem_models(&#39;snomed&#39;),<span class="bold">sem_rulebases(&#39;owl2el&#39;)</span>);
</pre>
<p>Note that the <code class="codeph">OWL2EL</code> rulebase support does not include reflexive object properties (<code class="codeph">ReflexiveObjectProperty</code>) simply because a reflexive object property will link every individual with itself, which would probably cause an unnecessary and costly expansion of the inference graph.</p>
</li>
</ul>
<p><a href="owl-concepts.htm#GUID-3BAE05B2-16B5-46A2-8223-EC01BB752BA1__CIHDFACE" title="RDFS/OWL Vocabulary Constructs Included in Each Supported Rulebase">Table 2-2</a> lists the RDFS/OWL vocabulary constructs included in each supported rulebase.</p>
<div class="tblformal" id="GUID-3BAE05B2-16B5-46A2-8223-EC01BB752BA1__CIHDFACE">
<p class="titleintable">Table 2-2 RDFS/OWL Vocabulary Constructs Included in Each Supported Rulebase</p>
<table class="cellalignment4510" title="RDFS/OWL Vocabulary Constructs Included in Each Supported Rulebase" summary="RDFS/OWL Vocabulary Constructs Included in Each Supported Rulebase">
<thead>
<tr class="cellalignment4501">
<th class="cellalignment4528" id="d29298e470">Rulebase Name</th>
<th class="cellalignment4529" id="d29298e473">RDFS/OWL Constructs Included</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4501">
<td class="cellalignment4530" id="d29298e478" headers="d29298e470">
<p>RDFS++</p>
</td>
<td class="cellalignment4531" headers="d29298e478 d29298e473">
<p>all RDFS vocabulary constructs</p>
<p>owl:InverseFunctionalProperty</p>
<p>owl:sameAs</p>
</td>
</tr>
<tr class="cellalignment4501">
<td class="cellalignment4530" id="d29298e489" headers="d29298e470">
<p>OWLSIF</p>
</td>
<td class="cellalignment4531" headers="d29298e489 d29298e473">
<p>all RDFS vocabulary constructs</p>
<p>owl:FunctionalProperty</p>
<p>owl:InverseFunctionalProperty</p>
<p>owl:SymmetricProperty</p>
<p>owl:TransitiveProperty</p>
<p>owl:sameAs</p>
<p>owl:inverseOf</p>
<p>owl:equivalentClass</p>
<p>owl:equivalentProperty</p>
<p>owl:hasValue</p>
<p>owl:someValuesFrom</p>
<p>owl:allValuesFrom</p>
</td>
</tr>
<tr class="cellalignment4501">
<td class="cellalignment4530" id="d29298e519" headers="d29298e470">
<p>OWLPrime</p>
</td>
<td class="cellalignment4531" headers="d29298e519 d29298e473">
<p>rdfs:subClassOf</p>
<p>rdfs:subPropertyOf</p>
<p>rdfs:domain</p>
<p>rdfs:range</p>
<p>owl:FunctionalProperty</p>
<p>owl:InverseFunctionalProperty</p>
<p>owl:SymmetricProperty</p>
<p>owl:TransitiveProperty</p>
<p>owl:sameAs</p>
<p>owl:inverseOf</p>
<p>owl:equivalentClass</p>
<p>owl:equivalentProperty</p>
<p>owl:hasValue</p>
<p>owl:someValuesFrom</p>
<p>owl:allValuesFrom</p>
<p>owl:differentFrom</p>
<p>owl:disjointWith</p>
<p>owl:complementOf</p>
</td>
</tr>
<tr class="cellalignment4501">
<td class="cellalignment4530" id="d29298e561" headers="d29298e470">
<p>OWL2RL</p>
</td>
<td class="cellalignment4531" headers="d29298e561 d29298e473">
<p>(As described in <a href="http://www.w3.org/TR/owl2-profiles/#OWL_2_RL" target="_blank"><code class="codeph">http://www.w3.org/TR/owl2-profiles/#OWL_2_RL</code></a>)</p>
</td>
</tr>
<tr class="cellalignment4501">
<td class="cellalignment4530" id="d29298e573" headers="d29298e470">
<p>OWL2EL</p>
</td>
<td class="cellalignment4531" headers="d29298e573 d29298e473">
<p>(As described in <a href="http://www.w3.org/TR/owl2-profiles/#OWL_2_EL" target="_blank"><code class="codeph">http://www.w3.org/TR/owl2-profiles/#OWL_2_EL</code></a>)</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
</div>
<a id="RDFRM620"></a>
<div class="props_rev_3"><a id="GUID-30145814-CB5E-45ED-B220-677515F91AA9"></a>
<h2 id="RDFRM-GUID-30145814-CB5E-45ED-B220-677515F91AA9" class="sect2"><span class="enumeration_section">2.2</span> Using OWL Inferencing</h2>
<div>
<p>You can use entailment rules to perform native OWL inferencing. This section creates a simple ontology, performs native inferencing, and illustrates some more advanced features.</p>
</div>
<a id="RDFRM622"></a><a id="RDFRM621"></a>
<div class="props_rev_3"><a id="GUID-F300ED36-CF2E-4E89-BB27-71C2012B5759"></a>
<h3 id="RDFRM-GUID-F300ED36-CF2E-4E89-BB27-71C2012B5759" class="sect3"><span class="enumeration_section">2.2.1</span> Creating a Simple OWL Ontology</h3>
<div>
<div class="section">
<p><a href="owl-concepts.htm#GUID-F300ED36-CF2E-4E89-BB27-71C2012B5759__CIHFBIAG">Example 2-1</a> creates a simple OWL ontology, inserts one statement that two URIs refer to the same entity, and performs a query using the SEM_MATCH table function.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-F300ED36-CF2E-4E89-BB27-71C2012B5759__CIHFBIAG">
<p class="titleinexample">Example 2-1 Creating a Simple OWL Ontology</p>
<pre dir="ltr">SQL&gt; CREATE TABLE owltst(id number, triple sdo_rdf_triple_s);
Table created.
 
SQL&gt; EXECUTE sem_apis.create_sem_model(&#39;owltst&#39;,&#39;owltst&#39;,&#39;triple&#39;);
PL/SQL procedure successfully completed.
 
SQL&gt; INSERT INTO owltst VALUES (1, sdo_rdf_triple_s(&#39;owltst&#39;,
       &#39;http://example.com/name/John&#39;, &#39;http://www.w3.org/2002/07/owl#sameAs&#39;, 
       &#39;http://example.com/name/JohnQ&#39;));
1 row created.
 
SQL&gt; commit;
 
SQL&gt; -- Use SEM_MATCH to perform a simple query.
SQL&gt; select s,p,o from table(SEM_MATCH(&#39;(?s ?p  ?o)&#39;, SEM_Models(&#39;OWLTST&#39;),
           null,  null, null ));
</pre></div>
<!-- class="example" --></div>
</div>
<a id="RDFRM624"></a><a id="RDFRM623"></a>
<div class="props_rev_3"><a id="GUID-BDFD6F1F-E828-483E-BFEE-3E7ED6A363A4"></a>
<h3 id="RDFRM-GUID-BDFD6F1F-E828-483E-BFEE-3E7ED6A363A4" class="sect3"><span class="enumeration_section">2.2.2</span> Performing Native OWL inferencing</h3>
<div>
<div class="section">
<p><a href="owl-concepts.htm#GUID-BDFD6F1F-E828-483E-BFEE-3E7ED6A363A4__CIHBIEIC">Example 2-2</a> calls the <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a> procedure. You do not need to create the rulebase and add rules to it, because the OWL rules are already built into the RDF Semantic Graph inferencing engine.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-BDFD6F1F-E828-483E-BFEE-3E7ED6A363A4__CIHBIEIC">
<p class="titleinexample">Example 2-2 Performing Native OWL Inferencing</p>
<pre dir="ltr">SQL&gt; -- Invoke the following command to run native OWL inferencing that
SQL&gt; -- understands the vocabulary defined in the preceding section.
SQL&gt;
SQL&gt;  EXECUTE sem_apis.create_entailment(&#39;owltst_idx&#39;, sem_models(&#39;owltst&#39;), sem_rulebases(&#39;OWLPRIME&#39;));
PL/SQL procedure successfully completed.
 
SQL&gt; -- The following view is generated to represent the entailed graph (rules index).
SQL&gt; desc mdsys.semi_owltst_idx;
 
SQL&gt; -- Run the preceding query with an additional rulebase parameter to list
SQL&gt; -- the original graph plus the inferred triples.
SQL&gt; SELECT s,p,o FROM table(SEM_MATCH(&#39;(?s ?p  ?o)&#39;, SEM_MODELS(&#39;OWLTST&#39;),
           SEM_RULEBASES(&#39;OWLPRIME&#39;),  null, null ));
</pre></div>
<!-- class="example" --></div>
</div>
<a id="RDFRM626"></a><a id="RDFRM625"></a>
<div class="props_rev_3"><a id="GUID-58FDB6A7-6040-45D9-8834-C09261A858B6"></a>
<h3 id="RDFRM-GUID-58FDB6A7-6040-45D9-8834-C09261A858B6" class="sect3"><span class="enumeration_section">2.2.3</span> Performing OWL and User-Defined Rules Inferencing</h3>
<div>
<div class="section">
<p><a href="owl-concepts.htm#GUID-58FDB6A7-6040-45D9-8834-C09261A858B6__CIHCAHEI">Example 2-3</a> creates a user-defined rulebase, inserts a simplified <code class="codeph">uncleOf</code> rule (stating that the brother of one&#39;s father is one&#39;s uncle), and calls the <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a> procedure.</p>
<p>For performance, the inference engine by default executes each user rule without checking the syntax legality of inferred triples (for example, literal value as a subject, blank node as a predicate) until after the last round of entailment. After completing the last entailment round, the inference engine removes all syntactically illegal triples without throwing any errors for these triples. However, because triples with illegal syntax may exist during multiple rounds of inference, rules can use these triples as part of their antecedents. For example, consider the following user-defined rules:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Rule 1:</p>
<pre dir="ltr">(?s :account ?y)
(?s :country :Spain) --&gt; (?y rdf:type :SpanishAccount)
</pre></li>
<li>
<p>Rule 2:</p>
<pre dir="ltr">(?s :account ?y)
(?y rdf:type :SpanishAccount) --&gt; (?s :language &#34;es_ES&#34;)
</pre></li>
</ul>
<p>Rule 1 finds all Spanish users and designates their accounts as Spanish accounts. Rule 2 sets the language for all users with Spanish accounts to <code class="codeph">es_ES</code> (Spanish). Consider the following data, displayed in Turtle format:</p>
<pre dir="ltr">:Juan      :account &#34;123ABC4Z&#34;
           :country :Spain
 
:Alejandro :account &#34;5678DEF9Y&#34;
           :country :Spain
</pre>
<p>Applying Rule 1 and Rule 2 produces the following inferred triples:</p>
<pre dir="ltr">(:Juan      :language &#34;es_ES&#34;)
(:Alejandro :language &#34;es_ES&#34;)
</pre>
<p>Note there are no triples specifying which accounts are of type <code class="codeph">:SpanishAccount</code>. The user-defined rules infer those triples during creation of the entailment, but the inference engine removes them after the last round of inference because they contain illegal syntax. The accounts are the literal values, which cannot be used as subjects in an RDF triple.</p>
<p><a id="d29298e802" class="indexterm-anchor"></a>To force the checking of syntax legality of inferred triples, add the <code class="codeph">/*+ ENABLE_SYNTAX_CHECKING */</code> optimizer hint to the beginning of the rule&#39;s FILTER expression. Forcing syntax checking for a rule can result in a performance penalty and will throw an exception for any syntactically illegal triples. The following example, similar to Rule 1, forces syntax checking. (In addition, merely to illustrate the use of a filter expression, the example restricts accounts to those that do not end with the letter &#39;<code class="codeph">Z</code>&#39;.)</p>
<pre dir="ltr">INSERT INTO mdsys.semr_user_rulebase VALUES (
  &#39;spanish_account_rule&#39;,
  &#39;(?s &lt;http://example.com/account&gt; ?y)(?y &lt;http://example.com/account&gt; &lt;http://example.com/Spain&gt;)&#39;,
  &#39;<span class="bold">/*+ ENABLE_SYNTAX_CHECKING */</span> <span class="bold">y not like &#39;&#39;%Z&#39;&#39;</span> &#39;,
  &#39;(?y &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://example.com/SpanishAccount&gt;)&#39;,
  NULL
);
</pre></div>
<!-- class="section" -->
<div class="example" id="GUID-58FDB6A7-6040-45D9-8834-C09261A858B6__CIHCAHEI">
<p class="titleinexample">Example 2-3 Performing OWL and User-Defined Rules Inferencing</p>
<pre dir="ltr">SQL&gt; -- First, insert the following assertions.
 
SQL&gt; INSERT INTO owltst VALUES (1, sdo_rdf_triple_s(&#39;owltst&#39;,
       &#39;http://example.com/name/John&#39;, &#39;http://example.com/rel/fatherOf&#39;,
       &#39;http://example.com/name/Mary&#39;));
 
 
SQL&gt; INSERT INTO owltst VALUES (1, sdo_rdf_triple_s(&#39;owltst&#39;,
       &#39;http://example.com/name/Jack&#39;, &#39;http://example.com/rel/brotherOf&#39;,
       &#39;http://example.com/name/John&#39;));
 
SQL&gt; -- Create a user-defined rulebase.
 
SQL&gt; EXECUTE sem_apis.create_rulebase(&#39;user_rulebase&#39;);
 
SQL&gt; -- Insert a simple &#34;uncle&#34; rule.
 
SQL&gt; INSERT INTO mdsys.semr_user_rulebase VALUES (&#39;uncle_rule&#39;, 
&#39;(?x &lt;http://example.com/rel/brotherOf&gt; ?y)(?y &lt;http://example.com/rel/fatherOf&gt; ?z)&#39;,
NULL, &#39;(?x &lt;http://example.com/rel/uncleOf&gt; ?z)&#39;, null);
 
SQL&gt;  -- In the following statement, &#39;USER_RULES=T&#39; is required, to
SQL&gt; --  include the original graph plus the inferred triples.
SQL&gt; EXECUTE sem_apis.create_entailment(&#39;owltst2_idx&#39;, sem_models(&#39;owltst&#39;),
          sem_rulebases(&#39;OWLPRIME&#39;,&#39;USER_RULEBASE&#39;), 
          SEM_APIS.REACH_CLOSURE, null, &#39;USER_RULES=T&#39;);
 
SQL&gt; -- In the result of the following query, :Jack :uncleOf :Mary is inferred.
SQL&gt; SELECT s,p,o FROM table(SEM_MATCH(&#39;(?s ?p  ?o)&#39;,
           SEM_MODELS(&#39;OWLTST&#39;),
           SEM_RULEBASES(&#39;OWLPRIME&#39;,&#39;USER_RULEBASE&#39;),  null, null ));
</pre></div>
<!-- class="example" --></div>
</div>
<a id="RDFRM628"></a><a id="RDFRM627"></a>
<div class="props_rev_3"><a id="GUID-8DD3C24A-1BA9-400A-BE19-733620254391"></a>
<h3 id="RDFRM-GUID-8DD3C24A-1BA9-400A-BE19-733620254391" class="sect3"><span class="enumeration_section">2.2.4</span> Generating OWL inferencing Proofs</h3>
<div>
<p>OWL inference can be complex, depending on the size of the ontology, the actual vocabulary (set of language constructs) used, and the interactions among those language constructs. To enable you to find out how a triple is derived, you can use proof generation during inference. (Proof generation does require additional CPU time and disk resources.)</p>
<p>To generate the information required for proof, specify <code class="codeph">PROOF=T</code> in the call to the <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a> procedure, as shown in the following example:</p>
<pre dir="ltr">EXECUTE sem_apis.create_entailment(&#39;owltst_idx&#39;, sem_models(&#39;owltst&#39;), -
  sem_rulebases(&#39;owlprime&#39;), SEM_APIS.REACH_CLOSURE, &#39;SAM&#39;, &#39;PROOF=T&#39;);
</pre>
<p>Specifying <code class="codeph">PROOF=T</code> causes a view to be created containing proof for each inferred triple. The view name is the entailment name prefixed by <code class="codeph">MDSYS.SEMI_</code>. Two relevant columns in this view are LINK_ID and EXPLAIN (the proof). The following example displays the LINK_ID value and proof of each generated triple (with LINK_ID values shortened for simplicity):</p>
<pre dir="ltr">SELECT link_id || &#39; generated by &#39; || explain as 
          triple_and_its_proof FROM mdsys.semi_owltst_idx;
 
TRIPLE_AND_ITS_PROOF
--------------------------------------------------------------------
8_5_5_4 generated by 4_D_5_5 : SYMM_SAMH_SYMM
8_4_5_4 generated by 8_5_5_4 4_D_5_5 : SAM_SAMH
. . .
</pre>
<p>A proof consists of one or more triple (link) ID values and the name of the rule that is applied on those triples:</p>
<p><span class="italic"><code class="codeph">link-id1</code></span> [<span class="italic"><code class="codeph">link-id2</code></span> ... l<span class="italic"><code class="codeph">ink-idn</code></span>] : <span class="italic"><code class="codeph">rule-name</code></span></p>
<div class="example" id="GUID-8DD3C24A-1BA9-400A-BE19-733620254391__CIHGAGID">
<p class="titleinexample">Example 2-4 Displaying Proof Information</p>
<p>To get the full subject, predicate, and object URIs for proofs, you can query the model view and the entailment (rules index) view. <a href="owl-concepts.htm#GUID-8DD3C24A-1BA9-400A-BE19-733620254391__CIHGAGID">Example 2-4</a> displays the LINK_ID value and associated triple contents using the model view MDSYS.SEMM_OWLTST and the entailment view MDSYS.SEMI_OWLTST_IDX.</p>
<pre dir="ltr">SELECT to_char(x.triple.rdf_m_id, &#39;FMXXXXXXXXXXXXXXXX&#39;) ||&#39;_&#39;||
       to_char(x.triple.rdf_s_id, &#39;FMXXXXXXXXXXXXXXXX&#39;) ||&#39;_&#39;||
       to_char(x.triple.rdf_p_id, &#39;FMXXXXXXXXXXXXXXXX&#39;) ||&#39;_&#39;||
       to_char(x.triple.rdf_c_id, &#39;FMXXXXXXXXXXXXXXXX&#39;),
       x.triple.get_triple()
  FROM (
   SELECT sdo_rdf_triple_s(
           t.canon_end_node_id,
           t.model_id, 
           t.start_node_id,
           t.p_value_id,
           t.end_node_id) triple
     FROM (select * from mdsys.semm_owltst union all
           select * from mdsys.semi_owltst_idx
          ) t  
    WHERE t.link_id IN (&#39;4_D_5_5&#39;,&#39;8_5_5_4&#39;)
  ) x;
 
   LINK_ID  X.TRIPLE.GET_TRIPLE()(SUBJECT, PROPERTY, OBJECT)
----------  --------------------------------------------------------------
4_D_5_5 SDO_RDF_TRIPLE(&#39;&lt;http://example.com/name/John&gt;&#39;, &#39;&lt;http://www.w3.org/2002/07/owl#sameAs&gt;&#39;, &#39;&lt;http://example.com/name/JohnQ&gt;&#39;)
8_5_5_4 SDO_RDF_TRIPLE(&#39;&lt;http://example.com/name/JohnQ&gt;&#39;, &#39;&lt;http://www.w3.org/2002/07/owl#sameAs&gt;&#39;, &#39;&lt;http://example.com/name/John&gt;&#39;)
</pre>
<p>In <a href="owl-concepts.htm#GUID-8DD3C24A-1BA9-400A-BE19-733620254391__CIHGAGID">Example 2-4</a>, for the proof entry 8_5_5_4 generated by 4_D_5_5 : SYMM_SAMH_SYMM for the triple with LINK_ID = 8_5_5_4, it is inferred from the triple with 4_D_5_5 using the symmetricity of <code class="codeph">owl:sameAs</code>.</p>
<p>If the entailment status is INCOMPLETE and if the last entailment was generated without proof information, you cannot invoke <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a> with <code class="codeph">PROOF=T</code>. In this case, you must first drop the entailment and create it again specifying <code class="codeph">PROOF=T</code>.</p>
</div>
<!-- class="example" --></div>
</div>
<a id="RDFRM630"></a><a id="RDFRM629"></a>
<div class="props_rev_3"><a id="GUID-7BD80B7A-0EAB-4665-A792-9091D61012BB"></a>
<h3 id="RDFRM-GUID-7BD80B7A-0EAB-4665-A792-9091D61012BB" class="sect3"><span class="enumeration_section">2.2.5</span> Validating OWL Models and Entailments</h3>
<div>
<p>An OWL ontology may contain errors, such as unsatisfiable classes, instances belonging to unsatisfiable classes, and two individuals asserted to be same and different at the same time. You can use the <a href="sem-apis-ref.htm#GUID-C0E8A98A-47BE-4EE6-A0A7-5F618575502E">SEM_APIS.VALIDATE_MODEL</a> and <a href="sem-apis-ref.htm#GUID-B51E53FC-1651-44C1-95EC-7799C481F65B">SEM_APIS.VALIDATE_ENTAILMENT</a> functions to detect inconsistencies in the original data model and in the entailment, respectively.</p>
<div class="example" id="GUID-7BD80B7A-0EAB-4665-A792-9091D61012BB__CIHIJDFA">
<p class="titleinexample">Example 2-5 Validating an Entailment</p>
<p><a href="owl-concepts.htm#GUID-7BD80B7A-0EAB-4665-A792-9091D61012BB__CIHIJDFA">Example 2-5</a> shows uses the <a href="sem-apis-ref.htm#GUID-B51E53FC-1651-44C1-95EC-7799C481F65B">SEM_APIS.VALIDATE_ENTAILMENT</a> function, which returns a null value if no errors are detected or a VARRAY of strings if any errors are detected.</p>
<pre dir="ltr">SQL&gt;  -- Insert an offending triple.
SQL&gt;  insert into owltst values (1, sdo_rdf_triple_s(&#39;owltst&#39;,
             &#39;urn:C1&#39;, &#39;http://www.w3.org/2000/01/rdf-schema#subClassOf&#39;, &#39;http://www.w3.org/2002/07/owl#Nothing&#39;));
 
SQL&gt; -- Drop entailment first.
SQL&gt;  exec sem_apis.drop_entailment(&#39;owltst_idx&#39;);
PL/SQL procedure successfully completed.
 
SQL&gt; -- Perform OWL inferencing.
SQL&gt; exec sem_apis.create_entailment(&#39;owltst_idx&#39;, sem_models(&#39;OWLTST&#39;), sem_rulebases(&#39;OWLPRIME&#39;));
PL/SQL procedure successfully completed.
 
SQL &gt; set serveroutput on; 
SQL &gt; -- Now invoke validation API: sem_apis.validate_entailment
SQL &gt; 
declare 
  lva mdsys.rdf_longVarcharArray; 
  idx int; 
begin 
  lva := sem_apis.validate_entailment(sem_models(&#39;OWLTST&#39;), sem_rulebases(&#39;OWLPRIME&#39;)) ; 
 
  if (lva is null) then
   dbms_output.put_line(&#39;No errors found.&#39;);
  else 
    for idx in 1..lva.count loop 
      dbms_output.put_line(&#39;Offending entry := &#39; || lva(idx)) ; 
    end loop ; 
  end if;
end ; 
/ 
 
SQL&gt; -- NOTE: The LINK_ID value and the numbers in the following
SQL&gt; -- line are shortened for simplicity in this example. -- 

          Offending entry  := <span class="bold">1 10001 (4_2_4_8 2 4 8) Unsatisfiable class.</span>
</pre>
<p>Each item in the validation report array includes the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p>Number of triples that cause this error (<code class="codeph">1</code> in <a href="owl-concepts.htm#GUID-7BD80B7A-0EAB-4665-A792-9091D61012BB__CIHIJDFA">Example 2-5</a>)</p>
</li>
<li>
<p>Error code (<code class="codeph">10001</code> <a href="owl-concepts.htm#GUID-7BD80B7A-0EAB-4665-A792-9091D61012BB__CIHIJDFA">Example 2-5</a>)</p>
</li>
<li>
<p>One or more triples (shown in parentheses in the output; <code class="codeph">(4_2_4_8 2 4 8)</code> in <a href="owl-concepts.htm#GUID-7BD80B7A-0EAB-4665-A792-9091D61012BB__CIHIJDFA">Example 2-5</a>).</p>
<p>These numbers are the LINK_ID value and the ID values of the subject, predicate, and object.</p>
</li>
<li>
<p>Descriptive error message (<code class="codeph">Unsatisfiable class.</code> in <a href="owl-concepts.htm#GUID-7BD80B7A-0EAB-4665-A792-9091D61012BB__CIHIJDFA">Example 2-5</a>)</p>
</li>
</ul>
<p>The output in <a href="owl-concepts.htm#GUID-7BD80B7A-0EAB-4665-A792-9091D61012BB__CIHIJDFA">Example 2-5</a> indicates that the error is caused by one triple that asserts that a class is a subclass of an empty class <code class="codeph">owl:Nothing</code>.</p>
</div>
<!-- class="example" --></div>
</div>
<a id="RDFRM631"></a>
<div class="props_rev_3"><a id="GUID-1384707B-53DE-4DB2-8421-998EF27DA832"></a>
<h3 id="RDFRM-GUID-1384707B-53DE-4DB2-8421-998EF27DA832" class="sect3"><span class="enumeration_section">2.2.6</span> Using SEM_APIS.CREATE_ENTAILMENT for RDFS Inference</h3>
<div>
<p>In addition to accepting OWL vocabularies, the <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a> procedure accepts RDFS rulebases. The following example shows RDFS inference (all standard RDFS rules are defined in <code class="codeph">http://www.w3.org/TR/rdf-mt/</code>):</p>
<pre dir="ltr">EXECUTE sem_apis.create_entailment(&#39;rdfstst_idx&#39;, sem_models(&#39;my_model&#39;), sem_rulebases(&#39;RDFS&#39;));
</pre>
<p>Because rules RDFS4A, RDFS4B, RDFS6, RDFS8, RDFS10, RDFS13 may not generate meaningful inference for your applications, you can deselect those components for faster inference. The following example deselects these rules.</p>
<pre dir="ltr">EXECUTE sem_apis.create_entailment(&#39;rdfstst_idx&#39;, sem_models(&#39;my_model&#39;), sem_rulebases(&#39;RDFS&#39;), SEM_APIS.REACH_CLOSURE, -
 <span class="bold">&#39;RDFS4A-, RDFS4B-, RDFS6-, RDFS8-, RDFS10-, RDFS13-&#39;</span>);
</pre></div>
</div>
<a id="RDFRM632"></a>
<div class="props_rev_3"><a id="GUID-4B58B83D-8464-488A-9EDE-F9C01A0637A3"></a>
<h3 id="RDFRM-GUID-4B58B83D-8464-488A-9EDE-F9C01A0637A3" class="sect3"><span class="enumeration_section">2.2.7</span> Enhancing Inference Performance</h3>
<div>
<p>This section describes suggestions for improving the performance of inference operations.</p>
<ul style="list-style-type: disc;">
<li>
<p>Collect statistics before inferencing. After you load a large RDF/OWL data model, you should execute the <a href="sem-perf-ref.htm#GUID-285D5640-9DF4-460B-B27E-7671711EFA18">SEM_PERF.GATHER_STATS</a> procedure. See the Usage Notes for that procedure (in <a href="sem-perf-ref.htm#GUID-5F5DD10C-4DF9-453B-88F8-3DA16C3B17CA">SEM_PERF Package Subprograms</a>) for important usage information.</p>
</li>
<li>
<p>Allocate sufficient temporary tablespace for inference operations. OWL inference support in Oracle relies heavily on table joins, and therefore uses significant temporary tablespace.</p>
</li>
<li>
<p>Use the appropriate implementations of the SVFH and AVFH inference components.</p>
<p>The default implementations of the SVFH and AVFH inference components work best when the number of restriction classes defined by <code class="codeph">owl:someValuesFrom</code> and/or <code class="codeph">owl:allValuesFrom</code> is low (as in the LUBM data sets). However, when the number of such classes is high (as in the Gene Ontology <a href="http://www.geneontology.org/" target="_blank"><code class="codeph">http://www.geneontology.org/</code></a>), using non-procedural implementations of SVFH and AVFH may significantly improve performance.</p>
<p><a id="d29298e1166" class="indexterm-anchor"></a><a id="d29298e1168" class="indexterm-anchor"></a>To disable the procedural implementations and to select the non-procedural implementations of SVFH and AVFH, include <code class="codeph">&#39;PROCSVFH=F&#39;</code> and/or <code class="codeph">&#39;PROCAVFH=F&#39;</code> in the options to <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a>. Using the appropriate implementation for an ontology can provide significant performance benefits. For example, selecting the non-procedural implementation of SVFH for the NCI Thesaurus ontology (see <a href="http://www.cancer.gov/research/resources/terminology" target="_blank"><code class="codeph">http://www.cancer.gov/research/resources/terminology</code></a>) produced a 960% performance improvement for the SVFH inference component (tested on a dual-core, 8GB RAM desktop system with 3 SATA disks tied together with Oracle ASM).</p>
</li>
</ul>
<p>See also <a href="owl-concepts.htm#GUID-8C2819B1-1EBA-4D71-A463-5179AA4A929E">Optimizing owl:sameAs Inference</a>.</p>
</div>
</div>
<a id="RDFRM99907"></a><a id="RDFRM99906"></a>
<div class="props_rev_3"><a id="GUID-8C2819B1-1EBA-4D71-A463-5179AA4A929E"></a>
<h3 id="RDFRM-GUID-8C2819B1-1EBA-4D71-A463-5179AA4A929E" class="sect3"><span class="enumeration_section">2.2.8</span> Optimizing owl:sameAs Inference</h3>
<div>
<p>You can optimize inference performance for large <code class="codeph">owl:sameAs</code> cliques by specifying <code class="codeph">&#39;OPT_SAMEAS=T&#39;</code> in the <code class="codeph">options</code> parameter when performing OWLPrime entailment. (A <span class="bold">clique</span> is a graph in which every node of it is connected to, bidirectionally, every other node in the same graph.)</p>
<p>According to OWL semantics, the <code class="codeph">owl:sameAs</code> construct is treated as an equivalence relation, so it is reflexive, symmetric, and transitive. As a result, during inference a full materialization of <code class="codeph">owl:sameAs</code>-related entailments could significantly increase the size of the inferred graph. Consider the following example triple set:</p>
<pre dir="ltr">:John  owl:sameAs  :John1 .
:John  owl:sameAs  :John2 .
:John2 :hasAge     &#34;32&#34; .
</pre>
<p>Applying OWLPrime inference (with the <code class="codeph">SAM</code> component specified) to this set would generate the following new triples:</p>
<pre dir="ltr">:John1  owl:sameAs  :John .
:John2  owl:sameAs  :John .
:John1  owl:sameAs  :John2 .
:John2  owl:sameAs  :John1 .
:John   owl:sameAs  :John .
:John1  owl:sameAs  :John1 .
:John2  owl:sameAs  :John2 .
:John   :hasAge     &#34;32&#34; . 
:John1  :hasAge     &#34;32&#34; .
</pre>
<p>In the preceding example, <code class="codeph">:John</code>, <code class="codeph">:John1</code> and <code class="codeph">:John2</code> are connected to each other with the <code class="codeph">owl:sameAs</code> relationship; that is, they are members of an <code class="codeph">owl:sameAs</code> <span class="bold">clique</span>. To provide optimized inference for large <code class="codeph">owl:sameAs</code> cliques, you can consolidate <code class="codeph">owl:sameAs</code> triples without sacrificing correctness by specifying <code class="codeph">&#39;OPT_SAMEAS=T&#39;</code> in the <code class="codeph">options</code> parameter when performing OWLPrime entailment. For example:</p>
<pre dir="ltr">EXECUTE sem_apis.create_entailment(&#39;M_IDX&#39;,sem_models(&#39;M&#39;),
   sem_rulebases(&#39;OWLPRIME&#39;),null,null,<span class="bold">&#39;OPT_SAMEAS=T&#39;</span>);
</pre>
<p>When you specify this option, for each <code class="codeph">owl:sameAs</code> clique, one resource from the clique is chosen as a canonical representative and all of the inferences for that clique are consolidated around that resource. Using the preceding example, if <code class="codeph">:John1</code> is the clique representative, after consolidation the inferred graph would contain only the following triples:</p>
<pre dir="ltr">:John1 owl:sameAs :John1 .
:John1 :hasAge    &#34;32&#34; .
</pre>
<p>Some overhead is incurred with <code class="codeph">owl:sameAs</code> consolidation. During inference, all asserted models are copied into the inference partition, where they are consolidated together with the inferred triples. Additionally, for very large asserted graphs, consolidating and removing duplicate triples incurs a large runtime overhead, so the <code class="codeph">OPT_SAMEAS=T</code> option is recommended only for ontologies that have a large number of <code class="codeph">owl:sameAs</code> relationships and large clique sizes.</p>
<p>After the OPT_SAMEAS=T option has been used for an entailment, all subsequent uses of <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a> for that entailment must also use <code class="codeph">OPT_SAMEAS=T</code>, or an error will be reported. To disable optimized <code class="codeph">sameAs</code> handling, you must first drop the entailment.</p>
<p><a id="d29298e1348" class="indexterm-anchor"></a><a id="d29298e1350" class="indexterm-anchor"></a>Clique membership information is stored in a view named MDSYS.SEMC_<span class="italic">entailment-name</span>, where <span class="italic">entailment-name</span> is the name of the entailment (rules index). Each MDSYS.SEMC_<span class="italic">entailment-name</span> view has the columns shown in <a href="owl-concepts.htm#GUID-8C2819B1-1EBA-4D71-A463-5179AA4A929E__CIHBBCBA" title="RDF_VALUE$ table columns">Table 2-3</a>.</p>
<div class="tblformal" id="GUID-8C2819B1-1EBA-4D71-A463-5179AA4A929E__CIHBBCBA">
<p class="titleintable">Table 2-3 MDSYS.SEMC_entailment_name View Columns</p>
<table class="cellalignment4510" title="MDSYS.SEMC_entailment_name View Columns" summary="RDF_VALUE$ table columns">
<thead>
<tr class="cellalignment4501">
<th class="cellalignment4511" id="d29298e1382">Column Name</th>
<th class="cellalignment4512" id="d29298e1385">Data Type</th>
<th class="cellalignment4513" id="d29298e1388">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4501">
<td class="cellalignment4514" id="d29298e1393" headers="d29298e1382">
<p>MODEL_ID</p>
</td>
<td class="cellalignment4515" headers="d29298e1393 d29298e1385">
<p>NUMBER</p>
</td>
<td class="cellalignment4516" headers="d29298e1393 d29298e1388">
<p>ID number of the inferred model</p>
</td>
</tr>
<tr class="cellalignment4501">
<td class="cellalignment4514" id="d29298e1403" headers="d29298e1382">
<p>VALUE_ID</p>
</td>
<td class="cellalignment4515" headers="d29298e1403 d29298e1385">
<p>NUMBER)</p>
</td>
<td class="cellalignment4516" headers="d29298e1403 d29298e1388">
<p>ID number of a resource that is a member of the <code class="codeph">owl:sameAs</code> clique identified by CLIQUE_ID</p>
</td>
</tr>
<tr class="cellalignment4501">
<td class="cellalignment4514" id="d29298e1416" headers="d29298e1382">
<p>CLIQUE_ID</p>
</td>
<td class="cellalignment4515" headers="d29298e1416 d29298e1385">
<p>NUMBER</p>
</td>
<td class="cellalignment4516" headers="d29298e1416 d29298e1388">
<p>ID number of the clique representative for the VALUE_ID resource</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>To save space, the MDSYS.SEMC_<span class="italic">entailment-name</span> view does not contain reflexive rows like (CLIQUE_ID, CLIQUE_ID).</p>
</div>
<a id="RDFRM99908"></a>
<div class="props_rev_3"><a id="GUID-C68E4791-623C-4BBD-8883-EED323A88FD5"></a>
<h4 id="RDFRM-GUID-C68E4791-623C-4BBD-8883-EED323A88FD5" class="sect4"><span class="enumeration_section">2.2.8.1</span> Querying owl:sameAs Consolidated Inference Graphs</h4>
<div>
<p>At query time, if the entailment queried was created using the <code class="codeph">OPT_SAMEAS=T</code> option, the results are returned from an <code class="codeph">owl:sameAs</code>-consolidated inference partition. The query results are not expanded to include the full <code class="codeph">owl:sameAs</code> closure.</p>
<p>In the following example query, the only result returned would be <code class="codeph">:John1</code>, which is the canonical clique representative.</p>
<pre dir="ltr">SELECT A FROM TABLE (
  SEM_MATCH (&#39;(?A :hasAge &#34;32&#34;)&#39;,SEM_MODELS(&#39;M&#39;),  
    SEM_RULEBASES(&#39;OWLPRIME&#39;),NULL, NULL));
</pre>
<p>With the preceding example, even though <code class="codeph">:John2 :hasAge &#34;32&#34;</code> occurs in the model, it has been replaced during the inference consolidation phase where redundant triples are removed. However, you can expand the query results by performing a join with the MDSYS.SEMC_<span class="italic">rules-index-name</span> view that contains the consolidated <code class="codeph">owl:sameAs</code> information. For example, to get expanded result set for the preceding SEM_MATCH query, you can use the following expanded query:</p>
<pre dir="ltr">SELECT V.VALUE_NAME A_VAL FROM TABLE (
  SEM_MATCH (&#39;(?A :hasAge &#34;32&#34;)&#39;,SEM_MODELS(&#39;M&#39;), 
    SEM_RULEBASES(&#39;OWLPRIME&#39;), NULL, NULL)) Q,
    MDSYS.RDF_VALUE$ V, MDSYS.SEMC_M_IDX C
  WHERE V.VALUE_ID  = C.VALUE_ID 
     AND C.CLIQUE_ID = Q.A$RDFVID
  UNION ALL
    SELECT A A_VAL FROM TABLE (
      SEM_MATCH (&#39;(?A :hasAge &#34;32&#34;)&#39;,SEM_MODELS(&#39;M&#39;),  
        SEM_RULEBASES(&#39;OWLPRIME&#39;),NULL, NULL));
</pre>
<p>Or, you could rewrite the preceding expanded query using a left outer join, as follows:</p>
<pre dir="ltr">SELECT V.VALUE_NAME A_VAL FROM TABLE (
  SEM_MATCH (&#39;(?A &lt;http://hasAge&gt; &#34;33&#34;)&#39;,SEM_MODELS(&#39;M&#39;), 
   SEM_RULEBASES(&#39;OWLPRIME&#39;), NULL, NULL)) Q,
  MDSYS.RDF_VALUE$ V, 
   (SELECT value_id, clique_id FROM MDSYS.SEMC_M_IDX 
  UNION ALL
    SELECT DISTINCT clique_id, clique_id 
      FROM MDSYS.SEMC_M_IDX) C
 WHERE Q.A$RDFVID  = c.clique_id  (+)
   AND V.VALUE_ID  = nvl(C.VALUE_ID, Q.A$RDFVID);
</pre></div>
</div>
</div>
<a id="RDFRM99909"></a>
<div class="props_rev_3"><a id="GUID-7D4174E1-5B57-40B9-AFBE-B8EA40D9A7E6"></a>
<h3 id="RDFRM-GUID-7D4174E1-5B57-40B9-AFBE-B8EA40D9A7E6" class="sect3"><span class="enumeration_section">2.2.9</span> Performing Incremental Inference</h3>
<div>
<p>Incremental inference can be used to update entailments (rules indexes) efficiently after triple additions. There are two ways to enable incremental inference for an entailment:</p>
<ul style="list-style-type: disc;">
<li>
<p>Specify the <code class="codeph">options</code> parameter value <code class="codeph">INC=T</code> when creating the entailment. For example:</p>
<pre dir="ltr">EXECUTE sem_apis.create_entailment (&#39;M_IDX&#39;,sem_models(&#39;M&#39;),
  sem_rulebases(&#39;OWLPRIME&#39;),null,null, <span class="bold">&#39;INC=T&#39;</span>);
</pre></li>
<li>
<p>Use the <a href="sem-apis-ref.htm#GUID-A86CE6D3-0B0A-4757-AEDD-D23E45FCEA42">SEM_APIS.ENABLE_INC_INFERENCE</a> procedure.</p>
<p>If you use this procedure, the entailment must have a VALID status. Before calling the procedure, if you do not own the models involved in the entailment, you must ensure that the respective model owners have used the <a href="sem-apis-ref.htm#GUID-51071E54-1BE4-4949-AAED-0F1AA66DC963">SEM_APIS.ENABLE_CHANGE_TRACKING</a> procedure to enable change tracking for those models.</p>
</li>
</ul>
<p>When incremental inference is enabled for an entailment, the parameter <code class="codeph">INC=T</code> must be specified when invoking the <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a> procedure for that entailment.</p>
<p>Incremental inference for an entailment depends on triggers for the application tables of the models involved in creating the entailment. This means that incremental inference works only when triples are inserted in the application tables underlying the entailment using conventional path loads, unless you specify the triples by using the <code class="codeph">delta_in</code> parameter in the call to the <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a> procedure, as in the following example, in which the triples from model <code class="codeph">M_NEW</code> will be added to model <code class="codeph">M</code>, and entailment <code class="codeph">M_IDX</code> will be updated with the new inferences:</p>
<pre dir="ltr">EXECUTE sem_apis.create_entailment(&#39;M_IDX&#39;, sem_models(&#39;M&#39;),
  sem_rulebases(&#39;OWLPRIME&#39;&#39;), SEM_APIS.REACH_CLOSURE, null, null,
  <span class="bold">sem_models(&#39;M_NEW&#39;));</span>
</pre>
<p>If multiple models are involved in the incremental inference call, then to specify the destination model to which the <code class="codeph">delta_in</code> model or models are to be added, specify <code class="codeph">DEST_MODEL=</code><span class="italic"><code class="codeph">&lt;model_name&gt;</code></span> in the <code class="codeph">options</code> parameter. For example, the following causes the semantic data in model <code class="codeph">M_NEW</code> to be added to model <code class="codeph">M2</code>:</p>
<pre dir="ltr">EXECUTE sem_apis.create_entailment(&#39;M_IDX&#39;, sem_models(&#39;M1&#39;,&#39;M2&#39;,&#39;M3&#39;),
sem_rulebases(&#39;OWLPRIME&#39;&#39;), SEM_APIS.REACH_CLOSURE, null, &#39;DEST_MODEL=M2&#39;, <span class="bold">sem_models(&#39;M_NEW&#39;)</span>);
</pre>
<p>Another way to bypass the conventional path loading requirement when using incremental inference is to set the UNDO_RETENTION parameter to cover the intervals between entailments when you perform bulk loading. For example, if the last entailment was created 6 hours ago, the UNDO_RETENTION value should be set to greater than 6 hours; if it is less than that, then (given a heavy workload and limited undo space) it is not guaranteed that all relevant undo information will be preserved for incremental inference to apply. In such cases, the <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a> procedure falls back to regular (non-incremental) inference.</p>
<p>To check if change tracking is enabled on a model, use the <a href="sem-apis-ref.htm#GUID-667CB7BD-CC64-4AC0-A198-1DFB7D6A4E97">SEM_APIS.GET_CHANGE_TRACKING_INFO</a> procedure. To get additional information about incremental inference for an entailment, use the <a href="sem-apis-ref.htm#GUID-4A7FD368-E164-4058-AC4B-DEFBC07646F0">SEM_APIS.GET_INC_INF_INFO</a> procedure.</p>
<p>The following restrictions apply to incremental inference:</p>
<ul style="list-style-type: disc;">
<li>
<p>It does not work with optimized <code class="codeph">owl:sameAs</code> handling (<code class="codeph">OPT_SAMEAS</code>), user-defined rules, VPD-enabled models, or version-enabled models.</p>
</li>
<li>
<p>It supports only the addition of triples. With updates or deletions, the entailment will be completely rebuilt.</p>
</li>
<li>
<p>It depends on triggers on application tables.</p>
</li>
<li>
<p>Column types (RAW8 or NUMBER) used in incremental inference must be consistent. For instance, if <code class="codeph">RAW8=T</code> is used to build the entailment initially, then for every subsequent <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a> call the same option must be used. To change the column type to NUMBER, you must drop and rebuild the entailment.</p>
</li>
</ul>
</div>
</div>
<a id="RDFRM99910"></a>
<div class="props_rev_3"><a id="GUID-F8252895-82F0-4C77-94BF-4C278EE93A15"></a>
<h3 id="RDFRM-GUID-F8252895-82F0-4C77-94BF-4C278EE93A15" class="sect3"><span class="enumeration_section">2.2.10</span> Using Parallel Inference</h3>
<div>
<p>Parallel inference can improve inference performance by taking advantage of the capabilities of a multi-core or multi-CPU architectures. To use parallel inference, specify the <code class="codeph">DOP</code> (degree of parallelism) keyword and an appropriate value when using the <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a> procedure. For example:</p>
<pre dir="ltr">EXECUTE sem_apis.create_entailment(&#39;M_IDX&#39;,sem_models(&#39;M&#39;), 
      sem_rulebases(&#39;OWLPRIME&#39;), sem_apis.REACH_CLOSURE, null, <span class="bold">&#39;DOP=4&#39;</span>);
</pre>
<p>Specifying the DOP keyword causes parallel execution to be enabled for an Oracle-chosen set of inference components</p>
<p>The success of parallel inference depends heavily on a good hardware configuration of the system on which the database is running. The key is to have a &#34;balanced&#34; system that implements the best practices for database performance tuning and Oracle SQL parallel execution. For example, do not use a single 1 TB disk for an 800 GB database, because executing SQL statements in parallel on a single physical disk can even be slower than executing SQL statements in serial mode. Parallel inference requires ample memory; for each CPU core, you should have at least 4 GB of memory.</p>
<p>Parallel inference is best suited for large ontologies; however, inference performance can also improve for small ontologies.</p>
<p>There is some transient storage overhead associated with using parallel inference. Parallel inference builds a source table that includes all triples based on all the source RDF/OWL models and existing inferred graph. This table might use an additional 10 to 30 percent of storage compared to the space required for storing data and index of the source models.</p>
</div>
</div>
<a id="RDFRM214"></a>
<div class="props_rev_3"><a id="GUID-6353E485-A0A0-4F81-8D69-1B26DF227050"></a>
<h3 id="RDFRM-GUID-6353E485-A0A0-4F81-8D69-1B26DF227050" class="sect3"><span class="enumeration_section">2.2.11</span> Using Named Graph Based Inferencing (Global and Local)</h3>
<div>
<p>The default inferencing in Oracle Database takes all asserted triples from all the source model or models provided and applies semantic rules on top of all the asserted triples until an inference closure is reached. Even if the given source models contain one or more multiple named graphs, it makes no difference because all assertions, whether part of a named graph or not, are treated the same as if they come from a single graph. (For an introduction to named graph support in RDF Semantic Graph, see <a href="rdf-overview.htm#GUID-5409C3FE-2DF1-4D95-BF90-6FF8424D3A21">Named Graphs</a>.)</p>
<p>This default inferencing can be thought of as completely &#34;global&#34; in that it does not consider named graphs at all.</p>
<p>However, if you use named graphs, you can override the default inferencing and have named graphs be considered by using either of the following features:</p>
<ul style="list-style-type: disc;">
<li>
<p>Named graph based <span class="italic">global</span> inference (NGGI), which treats all specified named graphs as a unified graph. NGGI lets you narrow the scope of triples to be considered, while enabling great flexibility; it is explained in <a href="owl-concepts.htm#GUID-49284988-BDD2-4696-A5F8-0792495AAE8D">Named Graph Based Global Inference (NGGI)</a>.</p>
</li>
<li>
<p>Named graph based <span class="italic">local</span> inference (NGLI), which treats each specified named graph as a separate entity. NGLI is explained in <a href="owl-concepts.htm#GUID-1C7CAF17-945F-4452-97A3-5F2E1D7A2C84">Named Graph Based Local Inference (NGLI)</a>.</p>
</li>
</ul>
<p>For using NGGI and NGLI together, see a recommended usage flow in <a href="owl-concepts.htm#GUID-956051F8-7A51-41E2-ACC9-5860E3AAC9FE">Using NGGI and NGLI Together</a>.</p>
<p>You specify NGGI or NGLI through certain parameters and options to the <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a> procedure when you create an entailment (rules index).</p>
</div>
<a id="RDFRM216"></a><a id="RDFRM215"></a>
<div class="props_rev_3"><a id="GUID-49284988-BDD2-4696-A5F8-0792495AAE8D"></a>
<h4 id="RDFRM-GUID-49284988-BDD2-4696-A5F8-0792495AAE8D" class="sect4"><span class="enumeration_section">2.2.11.1</span> Named Graph Based Global Inference (NGGI)</h4>
<div>
<p>Named graph based global inference (NGGI) enables you to narrow the scope of triples used for inferencing at the named graph level (as opposed to the model level). It also enables great flexibility in selecting the scope; for example, you can include triples from zero or more named graphs and/or from the default graph, and you can include all triples with a null graph name from specified models.</p>
<p>For example, in a hospital application you may only want to apply the inference rules on all the information contained in a set of named graphs describing patients of a particular hospital. If the patient-related named graphs contains only instance-related assertions (ABox), you can specify one or multiple additional schema related-models (TBox), as in <a href="owl-concepts.htm#GUID-49284988-BDD2-4696-A5F8-0792495AAE8D__CIHCDCCD">Example 2-6</a>.</p>
<div class="example" id="GUID-49284988-BDD2-4696-A5F8-0792495AAE8D__CIHCDCCD">
<p class="titleinexample">Example 2-6 Named Graph Based Global Inference</p>
<pre dir="ltr">EXECUTE sem_apis.create_entailment(
  &#39;patients_inf&#39;,
  models_in         =&gt; sem_models(<span class="bold">&#39;patients&#39;,&#39;hospital_ontology&#39;</span>),
  rulebases_in      =&gt; sem_rulebases(&#39;owl2rl&#39;),
  passes            =&gt; SEM_APIS.REACH_CLOSURE,
  inf_components_in =&gt; null,
  options           =&gt; &#39;DOP=4,RAW8=T&#39;,
  <span class="bold">include_default_g</span> =&gt; sem_models(&#39;hospital_ontology&#39;),
  <span class="bold">include_named_g</span>   =&gt; sem_graphs(&#39;&lt;urn:hospital1_patient1&gt;&#39;,&#39;&lt;urn:hospital1_patient2&gt;&#39;),
  <span class="bold">inf_ng_name</span>       =&gt; &#39;&lt;urn:inf_graph_for_hospital1&gt;&#39;
  );
</pre>
<p>In <a href="owl-concepts.htm#GUID-49284988-BDD2-4696-A5F8-0792495AAE8D__CIHCDCCD">Example 2-6</a>:</p>
<ul style="list-style-type: disc;">
<li>
<p>Two models are involved: <code class="codeph">patients</code> contains a set of named graphs where each named graph holds triples relevant to a particular patient, and <code class="codeph">hospital_ontology</code> contains schema information describing concepts and relationships that are defined for hospitals. These two models together are the source models, and they set up an overall scope for the inference.</p>
</li>
<li>
<p>The <code class="codeph">include_default_g</code> parameter causes all triples with a NULL graph name in the specified models to participate in NGGI. In this example, all triples with a NULL graph name in model <code class="codeph">hospital_ontology</code> will be included in NGGI.</p>
</li>
<li>
<p>The <code class="codeph">include_named_g</code> parameter causes all triples from the specified named graphs (across all source models) to participate in NGGI. In this example, triples from named graphs <code class="codeph">&lt;urn:hospital1_patient1&gt;</code> and <code class="codeph">&lt;urn:hospital1_patient2&gt;</code> will be included in NGGI.</p>
</li>
<li>
<p>The <code class="codeph">inf_ng_name</code> parameter assigns graph name <code class="codeph">&lt;urn:inf_graph_for_hospital1&gt;</code> to all the new triples inferred by NGGI.</p>
</li>
</ul>
</div>
<!-- class="example" --></div>
</div>
<a id="RDFRM218"></a><a id="RDFRM217"></a>
<div class="props_rev_3"><a id="GUID-1C7CAF17-945F-4452-97A3-5F2E1D7A2C84"></a>
<h4 id="RDFRM-GUID-1C7CAF17-945F-4452-97A3-5F2E1D7A2C84" class="sect4"><span class="enumeration_section">2.2.11.2</span> Named Graph Based Local Inference (NGLI)</h4>
<div>
<p>Named graph based local inference (NGLI) treats each named graph as a separate entity instead of viewing the graphs as a single unified graph. Inference logic is performed within the boundary of each entity. You can specify schema-related assertions (TBox) in a default graph, and that default graph will participate the inference of each named graph. For example, inferred triples based on a graph with name <code class="codeph">G1</code> will be assigned the same graph name <code class="codeph">G1</code> in the inferred data partition.</p>
<p>Assertions from any two separate named graphs will never jointly produce any new assertions.</p>
<p>For example, assume the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Graph <code class="codeph">G1</code> includes the following assertion:</p>
<pre dir="ltr">:John  :hasBirthMother  :Mary .
</pre></li>
<li>
<p>Graph <code class="codeph">G2</code> includes the following assertion:</p>
<pre dir="ltr">:John  :hasBirthMother  :Bella .
</pre></li>
<li>
<p>The default graph includes the assertion that <code class="codeph">:hasBirthMother</code> is an <code class="codeph">owl:FunctionalProperty</code>. (This assertion has a null graph name.)</p>
</li>
</ul>
<p>In this example, named graph based <span class="italic">local</span> inference (NGLI) will <span class="italic"><span class="bold">not</span></span> infer that <code class="codeph">:Mary</code> is <code class="codeph">owl:sameAs :Bella</code> because the two assertions are from two distinct graphs, <code class="codeph">G1</code> and <code class="codeph">G2</code>. By contrast, a named graph based <span class="italic">global</span> inference (NGGI) that includes <code class="codeph">G1</code>, <code class="codeph">G2</code>, and the functional property definition <span class="italic">would</span> be able to infer that <code class="codeph">:Mary</code> is <code class="codeph">owl:sameAs :Bella</code>.</p>
<p>NGLI currently does not work together with proof generation, user-defined rules, optimized <code class="codeph">owl:sameAs</code> handling, or incremental inference.</p>
<div class="example" id="GUID-1C7CAF17-945F-4452-97A3-5F2E1D7A2C84__CIHCAGBF">
<p class="titleinexample">Example 2-7 Named Graph Based Local Inference</p>
<p><a href="owl-concepts.htm#GUID-1C7CAF17-945F-4452-97A3-5F2E1D7A2C84__CIHCAGBF">Example 2-7</a> shows NGLI.</p>
<pre dir="ltr">EXECUTE sem_apis.create_entailment(
  &#39;patients_inf&#39;,
  models_in         =&gt; sem_models(<span class="bold">&#39;patients&#39;,&#39;hospital_ontology&#39;</span>),
  rulebases_in      =&gt; sem_rulebases(&#39;owl2rl&#39;),
  passes            =&gt; SEM_APIS.REACH_CLOSURE,
  inf_components_in =&gt; null,
  <span class="bold">options           =&gt; &#39;LOCAL_NG_INF=T&#39;</span>
);
</pre>
<p>In <a href="owl-concepts.htm#GUID-1C7CAF17-945F-4452-97A3-5F2E1D7A2C84__CIHCAGBF">Example 2-7</a>:</p>
<ul style="list-style-type: disc;">
<li>
<p>The two models patients and hospital_ontology together are the source models, and they set up an overall scope for the inference, similar to the case of global inference in <a href="owl-concepts.htm#GUID-49284988-BDD2-4696-A5F8-0792495AAE8D__CIHCDCCD">Example 2-6</a>. All triples with a null graph name are treated as part of the common schema (TBox). Inference is performed within the boundary of every single named graph combined with the common schema.</p>
</li>
<li>
<p>Then <code class="codeph">options</code> parameter keyword-value pair <code class="codeph">LOCAL_NG_INF=T</code> specifies that named graph based local inference (NGLI) is to be performed.</p>
</li>
</ul>
<p>Note that, by design, NGLI does not apply to the default graph itself. However, you can easily apply named graph based global inference (NGGI) on the default graph and set the <code class="codeph">inf_ng_name</code> parameter to null. In this way, the TBox inference is precomputed, improving the overall performance and storage consumption.</p>
<p>NGLI does not allow the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Inferring new relationships based on a mix of triples from multiple named graphs</p>
</li>
<li>
<p>Inferring new relationships using only triples from the default graph.</p>
</li>
</ul>
<p>To get the inference that you would normally expect, you should keep schema assertions and instance assertions separate. Schema assertions (for example, <code class="codeph">:A rdfs:subClassOf :B</code> and <code class="codeph">:p1 rdfs:subPropertyOf :p2</code>) should be stored in the default graph as unnamed triples (with null graph names). By contrast, instance assertions (for example, <code class="codeph">:X :friendOf :Y</code>) should be stored in one of the named graphs.</p>
<p>For a discussion and example of using NGLI to perform document-centric inference with semantically indexed documents, see <a href="semantic-indexing-docs.htm#GUID-9E82A191-0B7B-4508-BE78-E10D3CB19234">Performing Document-Centric Inference</a>.</p>
</div>
<!-- class="example" --></div>
</div>
<a id="RDFRM219"></a>
<div class="props_rev_3"><a id="GUID-956051F8-7A51-41E2-ACC9-5860E3AAC9FE"></a>
<h4 id="RDFRM-GUID-956051F8-7A51-41E2-ACC9-5860E3AAC9FE" class="sect4"><span class="enumeration_section">2.2.11.3</span> Using NGGI and NGLI Together</h4>
<div>
<div class="section">
<p>The following is a recommended usage flow for using NGGI and NGLI together. It assumes that TBox and ABox are stored in two separate models, that TBox contains schema definitions and all triples in the TBox have a null graph name, but that ABox consists of a set of named graphs describing instance-related data.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Invoke NGGI on the TBox by itself. For example:</span>
<div>
<pre dir="ltr">EXECUTE sem_apis.create_entailment(
    &#39;TEST_INF&#39;,
    sem_models(&#39;abox&#39;,&#39;tbox&#39;),
    sem_rulebases(&#39;owl2rl&#39;),
    SEM_APIS.REACH_CLOSURE,
    <span class="bold">include_default_g=&gt;sem_models(&#39;tbox&#39;)</span>
);
</pre></div>
</li>
<li class="stepexpand"><span>Invoke NGLI for all named graphs. For example:</span>
<div>
<pre dir="ltr">EXECUTE sem_apis.create_entailment(
    &#39;TEST_INF&#39;,
    sem_models(&#39;abox&#39;,&#39;tbox&#39;),
    sem_rulebases(&#39;owl2rl&#39;),
    SEM_APIS.REACH_CLOSURE,
    <span class="bold">options =&gt; &#39;LOCAL_NG_INF=T,ENTAIL_ANYWAY=T&#39;</span>
);
</pre>
<p><code class="codeph">ENTAIL_ANYWAY=T</code> is specified because the NGGI call in step 1will set the status of inferred graph to <code class="codeph">VALID</code>, and the <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a> procedure call in step 2 will quit immediately unless <code class="codeph">ENTAIL_ANYWAY=T</code> is specified.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<a id="RDFRM634"></a><a id="RDFRM633"></a>
<div class="props_rev_3"><a id="GUID-8B653FD8-FE25-465A-BA47-D05CBD87D4FF"></a>
<h3 id="RDFRM-GUID-8B653FD8-FE25-465A-BA47-D05CBD87D4FF" class="sect3"><span class="enumeration_section">2.2.12</span> Performing Selective Inferencing (Advanced Information)</h3>
<div>
<p>Selective inferencing is component-based inferencing, in which you limit the inferencing to specific OWL components that you are interested in. To perform selective inferencing, use the <code class="codeph">inf_components_in</code> parameter to the <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a> procedure to specify a comma-delimited list of components. The final inferencing is determined by the <span class="italic">union</span> of rulebases specified and the components specified.</p>
<div class="example" id="GUID-8B653FD8-FE25-465A-BA47-D05CBD87D4FF__CIHHGFBA">
<p class="titleinexample">Example 2-8 Performing Selective Inferencing</p>
<p><a href="owl-concepts.htm#GUID-8B653FD8-FE25-465A-BA47-D05CBD87D4FF__CIHHGFBA">Example 2-8</a> limits the inferencing to the class hierarchy from subclass (SCOH) relationship and the property hierarchy from subproperty (SPOH) relationship. This example creates an empty rulebase and then specifies the two components (<code class="codeph">&#39;SCOH,SPOH&#39;</code>) in the call to the <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a> procedure.</p>
<pre dir="ltr">EXECUTE sem_apis.create_rulebase(&#39;my_rulebase&#39;);
 
EXECUTE sem_apis.create_entailment(&#39;owltst_idx&#39;, sem_models(&#39;owltst&#39;), sem_rulebases(&#39;my_rulebase&#39;), SEM_APIS.REACH_CLOSURE, <span class="bold">&#39;SCOH,SPOH&#39;</span>);
</pre>
<p>The following component codes are available: <code class="codeph">SCOH</code>, <code class="codeph">COMPH</code>, <code class="codeph">DISJH</code>, <code class="codeph">SYMMH</code>, <code class="codeph">INVH</code>, <code class="codeph">SPIH</code>, <code class="codeph">MBRH</code>, <code class="codeph">SPOH</code>, <code class="codeph">DOMH</code>, <code class="codeph">RANH</code>, <code class="codeph">EQCH</code>, <code class="codeph">EQPH</code>, <code class="codeph">FPH</code>, <code class="codeph">IFPH</code>, <code class="codeph">DOM</code>, <code class="codeph">RAN</code>, <code class="codeph">SCO</code>, <code class="codeph">DISJ</code>, <code class="codeph">COMP</code>, <code class="codeph">INV</code>, <code class="codeph">SPO</code>, <code class="codeph">FP</code>, <code class="codeph">IFP</code>, <code class="codeph">SYMM</code>, <code class="codeph">TRANS</code>, <code class="codeph">DIF</code>, <code class="codeph">SAM</code>, <code class="codeph">CHAIN</code>, <code class="codeph">HASKEY</code>, <code class="codeph">ONEOF</code>, <code class="codeph">INTERSECT</code>, <code class="codeph">INTERSECTSCOH</code>, <code class="codeph">MBRLST</code>, <code class="codeph">PROPDISJH</code>, <code class="codeph">SKOSAXIOMS</code>, <code class="codeph">SNOMED</code>, <code class="codeph">SVFH</code>, <code class="codeph">THINGH</code>, <code class="codeph">THINGSAM</code>, <code class="codeph">UNION</code>, <code class="codeph">RDFP1</code>, <code class="codeph">RDFP2</code>, <code class="codeph">RDFP3</code>, <code class="codeph">RDFP4</code>, <code class="codeph">RDFP6</code>, <code class="codeph">RDFP7</code>, <code class="codeph">RDFP8AX</code>, <code class="codeph">RDFP8BX</code>, <code class="codeph">RDFP9</code>, <code class="codeph">RDFP10</code>, <code class="codeph">RDFP11</code>, <code class="codeph">RDFP12A</code>, <code class="codeph">RDFP12B</code>, <code class="codeph">RDFP12C</code>, <code class="codeph">RDFP13A</code>, <code class="codeph">RDFP13B</code>, <code class="codeph">RDFP13C</code>, <code class="codeph">RDFP14A</code>, <code class="codeph">RDFP14BX</code>, <code class="codeph">RDFP15</code>, <code class="codeph">RDFP16</code>, <code class="codeph">RDFS2</code>, <code class="codeph">RDFS3</code>, <code class="codeph">RDFS4a</code>, <code class="codeph">RDFS4b</code>, <code class="codeph">RDFS5</code>, <code class="codeph">RDFS6</code>, <code class="codeph">RDFS7</code>, <code class="codeph">RDFS8</code>, <code class="codeph">RDFS9</code>, <code class="codeph">RDFS10</code>, <code class="codeph">RDFS11</code>, <code class="codeph">RDFS12</code>, <code class="codeph">RDFS13</code></p>
<p>The rules corresponding to components with a prefix of <span class="italic">RDFP</span> can be found in <span class="italic">Completeness, decidability and complexity of entailment for RDF Schema and a semantic extension involving the OWL vocabulary</span>, by H.J. Horst.</p>
<p>The syntax for deselecting a component is <span class="italic">component_name</span> followed by a minus (-) sign. For example, the following statement performs OWLPrime inference without calculating the <code class="codeph">subClassOf</code> hierarchy:</p>
<pre dir="ltr">EXECUTE sem_apis.create_entailment(&#39;owltst_idx&#39;, sem_models(&#39;owltst&#39;), sem_rulebases(&#39;OWLPRIME&#39;), SEM_APIS.REACH_CLOSURE, <span class="bold">&#39;SCOH-&#39;</span>);
</pre>
<p>By default, the OWLPrime rulebase implements the transitive semantics of owl:sameAs. OWLPrime does not include the following rules (semantics):</p>
<pre dir="ltr">U   owl:sameAs   V  .
U     p    X  .        ==&gt;   V  p   X   .
 
U   owl:sameAs   V  .
X     p    U  .        ==&gt;   X   p   V   .
</pre>
<p>The reason for not including these rules is that they tend to generate many assertions. If you need to include these assertions, you can include the <code class="codeph">SAM</code> component code in the call to the <a href="sem-apis-ref.htm#GUID-BF52CEC0-1BD9-4908-9EF1-F001B0527257">SEM_APIS.CREATE_ENTAILMENT</a> procedure.</p>
</div>
<!-- class="example" --></div>
</div>
</div>
<a id="RDFRM635"></a>
<div class="props_rev_3"><a id="GUID-91E180EF-CCF0-4E56-859E-D25C019A31A0"></a>
<h2 id="RDFRM-GUID-91E180EF-CCF0-4E56-859E-D25C019A31A0" class="sect2"><span class="enumeration_section">2.3</span> Using Semantic Operators to Query Relational Data</h2>
<div>
<p>You can use semantic operators to query relational data in an ontology-assisted manner, based on the semantic relationship between the data in a table column and terms in an ontology. The SEM_RELATED semantic operator retrieves rows based on semantic relatedness. The SEM_DISTANCE semantic operator returns distance measures for the semantic relatedness, so that rows returned by the SEM_RELATED operator can be ordered or restricted using the distance measure. The index type MDSYS.SEM_INDEXTYPE allows efficient execution of such queries, enabling scalable performance over large data sets.</p>
</div>
<a id="RDFRM637"></a><a id="RDFRM636"></a>
<div class="props_rev_3"><a id="GUID-9CB133FE-232F-4B46-8672-CCA3E3ACCF47"></a>
<h3 id="RDFRM-GUID-9CB133FE-232F-4B46-8672-CCA3E3ACCF47" class="sect3"><span class="enumeration_section">2.3.1</span> Using the SEM_RELATED Operator</h3>
<div>
<p>Referring to the cancer ontology example in <a href="owl-concepts.htm#GUID-EC20AEB0-4D89-4CC3-9A95-B5BBD9C25ECF">Example: Cancer Ontology</a>, consider the following query that requires semantic matching: <span class="italic">Find all patients whose diagnosis is of the type &#39;Immune_System_Disorder&#39;.</span> A typical database query of the PATIENTS table (described in <a href="owl-concepts.htm#GUID-EC20AEB0-4D89-4CC3-9A95-B5BBD9C25ECF">Example: Cancer Ontology</a>) involving syntactic match will not return any rows, because no rows have a DIAGNOSIS column containing the exact value <code class="codeph">Immune_System_Disorder</code>. For example the following query will not return any rows:</p>
<pre dir="ltr">SELECT diagnosis FROM patients WHERE diagnosis = &#39;Immune_System_Disorder&#39;;
</pre>
<div class="example" id="GUID-9CB133FE-232F-4B46-8672-CCA3E3ACCF47__CHDEDECJ">
<p class="titleinexample">Example 2-9 SEM_RELATED Operator</p>
<p>However, many rows in the patient data table are relevant, because their diagnoses fall under this class. <a href="owl-concepts.htm#GUID-9CB133FE-232F-4B46-8672-CCA3E3ACCF47__CHDEDECJ">Example 2-9</a> uses the SEM_RELATED operator (instead of lexical equality) to retrieve all the relevant rows from the patient data table. (In this example, the term <code class="codeph">Immune_System_Disorder</code> is prefixed with a namespace, and the default assumption is that the values in the table column also have a namespace prefix. However, that might not always be the case, as explained in <a href="owl-concepts.htm#GUID-E806C828-1803-49A7-BACD-0E42F4F81CE4">Using URIPREFIX When Values Are Not Stored as URIs</a>.)</p>
<pre dir="ltr">SELECT diagnosis FROM patients 
  WHERE SEM_RELATED (diagnosis, 
    &#39;&lt;http://www.w3.org/2000/01/rdf-schema#subClassOf&gt;&#39;,
    &#39;&lt;http://www.example.org/medical_terms/Immune_System_Disorder&gt;&#39;, 
    sem_models(&#39;medical_ontology&#39;), sem_rulebases(&#39;owlprime&#39;)) = 1;
</pre>
<p>The SEM_RELATED operator has the following attributes:</p>
<pre dir="ltr">SEM_RELATED(
  sub  VARCHAR2,
  predExpr  VARCHAR2,
  obj  VARCHAR2,
  ontologyName  SEM_MODELS,
  ruleBases  SEM_RULEBASES,
  index_status  VARCHAR2,
  lower_bound INTEGER,
  upper_bound INTEGER
 ) RETURN INTEGER;
</pre>
<p>The <code class="codeph">sub</code> attribute is the name of table column that is being searched. The terms in the table column are typically the subject in a &lt;subject, predicate, object&gt; triple pattern.</p>
<p>The <code class="codeph">predExpr</code> attribute represents the predicate that can appear as a label of the edge on the path from the subject node to the object node.</p>
<p>The <code class="codeph">obj</code> attribute represents the term in the ontology for which related terms (related by the <code class="codeph">predExpr</code> attribute) have to be found in the table (in the column specified by the <code class="codeph">sub</code> attribute). This term is typically the object in a &lt;subject, predicate, object&gt; triple pattern. (In a query with the equality operator, this would be the query term.)</p>
<p>The <code class="codeph">ontologyName</code> attribute is the name of the ontology that contains the relationships between terms.</p>
<p><a id="d29298e2690" class="indexterm-anchor"></a>The <code class="codeph">rulebases</code> attribute identifies one or more rulebases whose rules have been applied to the ontology to infer new relationships. The query will be answered based both on relationships from the ontology and the inferred new relationships when this attribute is specified.</p>
<p><a id="d29298e2699" class="indexterm-anchor"></a><a id="d29298e2703" class="indexterm-anchor"></a><a id="d29298e2707" class="indexterm-anchor"></a>The <code class="codeph">index_status</code> optional attribute lets you query the data even when the relevant entailment (created when the specified rulebase was applied to the ontology) does not have a valid status. If this attribute is null, the query returns an error if the entailment does not have a valid status. If this attribute is not null, it must be the string <code class="codeph">VALID</code>, <code class="codeph">INCOMPLETE</code>, or <code class="codeph">INVALID</code>, to specify the minimum status of the entailment for the query to succeed. Because OWL does not guarantee monotonicity, the value <code class="codeph">INCOMPLETE</code> should not be used when an OWL Rulebase is specified.</p>
<p>The <code class="codeph">lower_bound</code> and <code class="codeph">upper_bound</code> optional attributes let you specify a bound on the distance measure of the relationship between terms that are related. See <a href="owl-concepts.htm#GUID-77413E87-40DE-4D84-985A-82F2466EF95D">Using the SEM_DISTANCE Ancillary Operator</a> for the description of the distance measure.</p>
<p>The SEM_RELATED operator returns 1 if the two input terms are related with respect to the specified <code class="codeph">predExpr</code> relationship within the ontology, and it returns 0 if the two input terms are not related. If the lower and upper bounds are specified, it returns 1 if the two input terms are related with a distance measure that is greater than or equal to <code class="codeph">lower_bound</code> and less than or equal to <code class="codeph">upper_bound</code>.</p>
</div>
<!-- class="example" --></div>
</div>
<a id="RDFRM639"></a><a id="RDFRM640"></a><a id="RDFRM638"></a>
<div class="props_rev_3"><a id="GUID-77413E87-40DE-4D84-985A-82F2466EF95D"></a>
<h3 id="RDFRM-GUID-77413E87-40DE-4D84-985A-82F2466EF95D" class="sect3"><span class="enumeration_section">2.3.2</span> Using the SEM_DISTANCE Ancillary Operator</h3>
<div>
<p>The SEM_DISTANCE ancillary operator computes the distance measure for the rows filtered using the SEM_RELATED operator. The SEM_DISTANCE operator has the following format:</p>
<pre dir="ltr">SEM_DISTANCE (number) RETURN NUMBER;
</pre>
<p>The <code class="codeph">number</code> attribute can be any number, as long as it matches the number that is the last attribute specified in the call to the SEM_RELATED operator (see <a href="owl-concepts.htm#GUID-77413E87-40DE-4D84-985A-82F2466EF95D__CHDGDECA">Example 2-10</a>). The number is used to match the invocation of the ancillary operator SEM_DISTANCE with a specific SEM_RELATED (primary operator) invocation, because a query can have multiple invocations of primary and ancillary operators.</p>
<div class="example" id="GUID-77413E87-40DE-4D84-985A-82F2466EF95D__CHDGDECA">
<p class="titleinexample">Example 2-10 SEM_DISTANCE Ancillary Operator</p>
<p><a href="owl-concepts.htm#GUID-77413E87-40DE-4D84-985A-82F2466EF95D__CHDGDECA">Example 2-10</a> expands <a href="owl-concepts.htm#GUID-9CB133FE-232F-4B46-8672-CCA3E3ACCF47__CHDEDECJ">Example 2-9</a> to show several statements that include the SEM_DISTANCE ancillary operator, which gives a measure of how closely the two terms (here, a patient&#39;s diagnosis and the term <code class="codeph">Immune_System_Disorder</code>) are related by measuring the distance between the terms. Using the cancer ontology described in <a href="owl-concepts.htm#GUID-EC20AEB0-4D89-4CC3-9A95-B5BBD9C25ECF">Example: Cancer Ontology</a>, the distance between <code class="codeph">AIDS</code> and <code class="codeph">Immune_System_Disorder</code> is 3.</p>
<pre dir="ltr">SELECT diagnosis, SEM_DISTANCE(123) FROM patients 
  WHERE SEM_RELATED (diagnosis, 
    &#39;&lt;http://www.w3.org/2000/01/rdf-schema#subClassOf&gt;&#39;,
    &#39;&lt;http://www.example.org/medical_terms/Immune_System_Disorder&gt;&#39;, 
    sem_models(&#39;medical_ontology&#39;), sem_rulebases(&#39;owlprime&#39;), 123) = 1;
 
SELECT diagnosis FROM patients 
  WHERE SEM_RELATED (diagnosis,
    &#39;&lt;http://www.w3.org/2000/01/rdf-schema#subClassOf&gt;&#39;,
    &#39;&lt;http://www.example.org/medical_terms/Immune_System_Disorder&gt;&#39;, 
    sem_models(&#39;medical_ontology&#39;), sem_rulebases(&#39;owlprime&#39;), 123) = 1
  ORDER BY SEM_DISTANCE(123);
 
SELECT diagnosis, SEM_DISTANCE(123) FROM patients 
  WHERE SEM_RELATED (diagnosis,
    &#39;&lt;http://www.w3.org/2000/01/rdf-schema#subClassOf&gt;&#39;,
    &#39;&lt;http://www.example.org/medical_terms/Immune_System_Disorder&gt;&#39;, 
    sem_models(&#39;medical_ontology&#39;), sem_rulebases(&#39;owlprime&#39;), 123) = 1 
  AND SEM_DISTANCE(123) &lt;= 3;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-77413E87-40DE-4D84-985A-82F2466EF95D__CIHBEGEJ">
<p class="titleinexample">Example 2-11 Using SEM_DISTANCE to Restrict the Number of Rows Returned</p>
<p><a href="owl-concepts.htm#GUID-77413E87-40DE-4D84-985A-82F2466EF95D__CIHBEGEJ">Example 2-11</a> uses distance information to restrict the number of rows returned by the primary operator. All rows with a term related to the object attribute specified in the SEM_RELATED invocation, but with a distance of greater than or equal to 2 and less than or equal to 4, are retrieved.</p>
<pre dir="ltr">SELECT diagnosis FROM patients 
  WHERE SEM_RELATED (diagnosis,
    &#39;&lt;http://www.w3.org/2000/01/rdf-schema#subClassOf&gt;&#39;,
    &#39;&lt;http://www.example.org/medical_terms/Immune_System_Disorder&gt;&#39;, 
    sem_models(&#39;medical_ontology&#39;), sem_rulebases(&#39;owlprime&#39;), 2, 4) = 1;
</pre>
<p>In <a href="owl-concepts.htm#GUID-77413E87-40DE-4D84-985A-82F2466EF95D__CIHBEGEJ">Example 2-11</a>, the lower and upper bounds are specified using the <code class="codeph">lower_bound</code> and <code class="codeph">upper_bound</code> parameters in the SEM_RELATED operator instead of using the SEM_DISTANCE operator. The SEM_DISTANCE operator can be also be used for restricting the rows returned, as shown in the last SELECT statement in <a href="owl-concepts.htm#GUID-77413E87-40DE-4D84-985A-82F2466EF95D__CHDGDECA">Example 2-10</a>.</p>
</div>
<!-- class="example" --></div>
<a id="RDFRM641"></a>
<div class="props_rev_3"><a id="GUID-94D66BA9-0C43-4362-A1CD-6A5BD4A9D645"></a>
<h4 id="RDFRM-GUID-94D66BA9-0C43-4362-A1CD-6A5BD4A9D645" class="sect4"><span class="enumeration_section">2.3.2.1</span> Computation of Distance Information</h4>
<div>
<p>Distances are generated for the following properties during inference (entailment): OWL properties defined as transitive properties, and RDFS <code class="codeph">subClassOf</code> and RDFS <code class="codeph">subPropertyOf</code> properties. The distance between two terms linked through these properties is computed as the shortest distance between them in a hierarchical class structure. Distances of two terms linked through other properties are undefined and therefore set to null.</p>
<p>Each transitive property link in the original model (viewed as a hierarchical class structure) has a distance of 1, and the distance of an inferred triple is generated according to the number of links between the two terms. Consider the following hypothetical sample scenarios:</p>
<ul style="list-style-type: disc;">
<li>
<p>If the original graph contains <code class="codeph">C1 rdfs:subClassOf C2</code> and <code class="codeph">C2 rdfs:subClassOf C3</code>, then <code class="codeph">C1 rdfs:subClassof of C3</code> will be derived. In this case:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">C1 rdfs:subClassOf C2</code>: distance = 1, because it exists in the model.</p>
</li>
<li>
<p><code class="codeph">C2 rdfs:subClassOf C3</code>: distance = 1, because it exists in the model.</p>
</li>
<li>
<p><code class="codeph">C1 rdfs:subClassOf C3</code>: distance = 2, because it is generated during inference.</p>
</li>
</ul>
</li>
<li>
<p>If the original graph contains <code class="codeph">P1 rdfs:subPropertyOf P2</code> and <code class="codeph">P2 rdfs:subPropertyOf P3</code>, then P1 rdfs:subPropertyOf P3 will be derived. In this case:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">P1 rdfs:subPropertyOf P2</code>: distance = 1, because it exists in the model.</p>
</li>
<li>
<p><code class="codeph">P2 rdfs:subPropertyOf P3</code>: distance = 1, because it exists in the model.</p>
</li>
<li>
<p><code class="codeph">P1 rdfs:subPropertyOf P3</code>: distance = 2, because it is generated during inference.</p>
</li>
</ul>
</li>
<li>
<p>If the original graph contains <code class="codeph">C1 owl:equivalentClass C2</code> and <code class="codeph">C2 owl:equivalentClass C3</code>, then <code class="codeph">C1 owl:equivalentClass C3</code> will be derived. In this case:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">C1 owl:equivalentClass C2</code>: distance = 1, because it exists in the model.</p>
</li>
<li>
<p><code class="codeph">C2 owl:equivalentClass C3</code>: distance = 1, because it exists in the model.</p>
</li>
<li>
<p><code class="codeph">C1 owl:equivalentClass C3</code>: distance = 2, because it is generated during inference.</p>
</li>
</ul>
</li>
</ul>
<p>The SEM_RELATED operator works with user-defined rulebases. However, using the SEM_DISTANCE operator with a user-defined rulebase is not yet supported, and will raise an error.</p>
</div>
</div>
</div>
<a id="RDFRM643"></a><a id="RDFRM644"></a><a id="RDFRM645"></a><a id="RDFRM642"></a>
<div class="props_rev_3"><a id="GUID-4B9871E6-48AD-46D5-8FF4-0033369A3CE0"></a>
<h3 id="RDFRM-GUID-4B9871E6-48AD-46D5-8FF4-0033369A3CE0" class="sect3"><span class="enumeration_section">2.3.3</span> Creating a Semantic Index of Type MDSYS.SEM_INDEXTYPE</h3>
<div>
<p>When using the SEM_RELATED operator, you can create a semantic index of type MDSYS.SEM_INDEXTYPE on the column that contains the ontology terms. Creating such an index will result in more efficient execution of the queries. The CREATE INDEX statement must contain the <code class="codeph">INDEXTYPE IS MDSYS.SEM_INDEXTYPE</code> clause, to specify the type of index being created.</p>
<div class="example" id="GUID-4B9871E6-48AD-46D5-8FF4-0033369A3CE0__CHDIHJGC">
<p class="titleinexample">Example 2-12 Creating a Semantic Index</p>
<p><a href="owl-concepts.htm#GUID-4B9871E6-48AD-46D5-8FF4-0033369A3CE0__CHDIHJGC">Example 2-12</a> creates a semantic index named DIAGNOSIS_SEM_IDX on the DIAGNOSIS column of the PATIENTS table using the <code class="codeph">Cancer_Ontology</code> ontology.</p>
<pre dir="ltr">CREATE INDEX diagnosis_sem_idx
  ON patients (diagnosis) 
  INDEXTYPE IS MDSYS.SEM_INDEXTYPE;
</pre>
<p>The column on which the index is built (DIAGNOSIS in <a href="owl-concepts.htm#GUID-4B9871E6-48AD-46D5-8FF4-0033369A3CE0__CHDIHJGC">Example 2-12</a>) must be the first parameter to the SEM_RELATED operator, in order for the index to be used. If it not the first parameter, the index is not used during the execution of the query.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-4B9871E6-48AD-46D5-8FF4-0033369A3CE0__CIHHDGDE">
<p class="titleinexample">Example 2-13 Creating a Semantic Index Specifying a Model and Rulebase</p>
<p>To improve the performance of certain semantic queries, you can cause statistical information to be generated for the semantic index by specifying one or more models and rulebases when you create the index. <a href="owl-concepts.htm#GUID-4B9871E6-48AD-46D5-8FF4-0033369A3CE0__CIHHDGDE">Example 2-13</a> creates an index that will also generate statistics information for the specified model and rulebase. The index can be used with other models and rulebases during query, but the statistical information will be used only if the model and rulebase specified during the creation of the index are the same model and rulebase specified in the query.</p>
<pre dir="ltr">CREATE INDEX diagnosis_sem_idx
  ON patients (diagnosis) 
  INDEXTYPE IS <span class="bold">MDSYS.SEM_INDEXTYPE(&#39;ONTOLOGY_MODEL(medical_ontology),</span> 
    <span class="bold">RULEBASE(OWLPrime)&#39;)</span>;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-4B9871E6-48AD-46D5-8FF4-0033369A3CE0__CIHGAFIE">
<p class="titleinexample">Example 2-14 Query Benefitting from Generation of Statistical Information</p>
<p>The statistical information is useful for queries that return top-k results sorted by semantic distance. <a href="owl-concepts.htm#GUID-4B9871E6-48AD-46D5-8FF4-0033369A3CE0__CIHGAFIE">Example 2-14</a> shows such a query.</p>
<pre dir="ltr">SELECT /*+ FIRST_ROWS */ diagnosis FROM patients 
  WHERE SEM_RELATED (diagnosis,
    &#39;&lt;http://www.w3.org/2000/01/rdf-schema#subClassOf&gt;&#39;,
    &#39;&lt;http://www.example.org/medical_terms/Immune_System_Disorder&gt;&#39;, 
    sem_models(&#39;medical_ontology&#39;), sem_rulebases(&#39;owlprime&#39;), 123) = 1
  ORDER BY SEM_DISTANCE(123);
</pre></div>
<!-- class="example" --></div>
</div>
<a id="RDFRM646"></a>
<div class="props_rev_3"><a id="GUID-C22BFE56-B8D3-4204-B02A-2FF510CBFBF0"></a>
<h3 id="RDFRM-GUID-C22BFE56-B8D3-4204-B02A-2FF510CBFBF0" class="sect3"><span class="enumeration_section">2.3.4</span> Using SEM_RELATED and SEM_DISTANCE When the Indexed Column Is Not the First Parameter</h3>
<div>
<p>If an index of type MDSYS.SEM_INDEXTYPE has been created on a table column that is the first parameter to the SEM_RELATED operator, the index will be used. For example, the following query retrieves all rows that have a value in the DIAGNOSIS column that is a subclass of (<code class="codeph">rdfs:subClassOf</code>) <code class="codeph">Immune_System_Disorder</code>.</p>
<pre dir="ltr">SELECT diagnosis FROM patients 
  WHERE SEM_RELATED (diagnosis, 
    &#39;&lt;http://www.w3.org/2000/01/rdf-schema#subClassOf&gt;&#39;,
    &#39;&lt;http://www.example.org/medical_terms/Immune_System_Disorder&gt;&#39;, 
    sem_models(&#39;medical_ontology&#39;), sem_rulebases(&#39;owlprime&#39;)) = 1;
</pre>
<p>Assume, however, that this query instead needs to retrieve all rows that have a value in the DIAGNOSIS column for which <code class="codeph">Immune_System_Disorder</code> is a subclass. You could rewrite the query as follows:</p>
<pre dir="ltr">SELECT diagnosis FROM patients 
  WHERE SEM_RELATED
    (&#39;&lt;http://www.example.org/medical_terms/Immune_System_Disorder&gt;&#39;, 
    &#39;&lt;http://www.w3.org/2000/01/rdf-schema#subClassOf&gt;&#39;, 
    diagnosis, 
    sem_models(&#39;medical_ontology&#39;), sem_rulebases(&#39;owlprime&#39;)) = 1;
</pre>
<p>However, in this case a semantic index on the DIAGNOSIS column will not be used, because it is not the first parameter to the SEM_RELATED operator. To cause the index to be used, you can change the preceding query to use the <code class="codeph">inverseOf</code> keyword, as follows:</p>
<pre dir="ltr">SELECT diagnosis FROM patients 
  WHERE SEM_RELATED (diagnosis,
    &#39;inverseOf(http://www.w3.org/2000/01/rdf-schema#subClassOf)&#39;,
    &#39;&lt;http://www.example.org/medical_terms/Immune_System_Disorder&gt;&#39;, 
    sem_models(&#39;medical_ontology&#39;), sem_rulebases(&#39;owlprime&#39;)) = 1;
</pre>
<p>This form causes the table column (on which the index is built) to be the first parameter to the SEM_RELATED operator, and it retrieves all rows that have a value in the DIAGNOSIS column for which <code class="codeph">Immune_System_Disorder</code> is a subclass.</p>
</div>
</div>
<a id="RDFRM648"></a><a id="RDFRM647"></a>
<div class="props_rev_3"><a id="GUID-E806C828-1803-49A7-BACD-0E42F4F81CE4"></a>
<h3 id="RDFRM-GUID-E806C828-1803-49A7-BACD-0E42F4F81CE4" class="sect3"><span class="enumeration_section">2.3.5</span> Using URIPREFIX When Values Are Not Stored as URIs</h3>
<div>
<p>By default, the semantic operator support assumes that the values stored in the table are URIs. These URIs can be from different namespaces. However, if the values in the table do not have URIs, you can use the URIPREFIX keyword to specify a URI when you create the semantic index. In this case, the specified URI is prefixed to the value in the table and stored in the index structure. (One implication is that multiple URIs cannot be used).</p>
<p><a href="owl-concepts.htm#GUID-E806C828-1803-49A7-BACD-0E42F4F81CE4__CIHEBGEI">Example 2-15</a> creates a semantic index that uses a URI prefix.</p>
<div class="example" id="GUID-E806C828-1803-49A7-BACD-0E42F4F81CE4__CIHEBGEI">
<p class="titleinexample">Example 2-15 Specifying a URI Prefix During Semantic Index Creation</p>
<pre dir="ltr">CREATE INDEX diagnosis_sem_idx
  ON patients (diagnosis) 
  INDEXTYPE IS MDSYS.SEM_INDEXTYPE
  PARAMETERS(&#39;URIPREFIX(&lt;http://www.example.org/medical/&gt;)&#39;);
</pre>
<p>The slash (/) character at the end of the URI is important, because the URI is prefixed to the table value (in the index structure) without any parsing.</p>
</div>
<!-- class="example" --></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4500">
<tr>
<td class="cellalignment4507">
<table class="cellalignment4505">
<tr>
<td class="cellalignment4504"><a href="rdf-overview.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4504"><a href="skos.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2005, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4509">
<table class="cellalignment4503">
<tr>
<td class="cellalignment4504"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4504"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4504"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4504"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4504"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4504"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>