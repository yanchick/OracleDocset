<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-88441"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/REPLACE%20SCRIPT"></a><title>REPLACE SCRIPT</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="scripts, replacing, recovery catalog, replacing scripts, REPLACE SCRIPT command, replaceScript clause, syntax diagram"/>
<meta name="dcterms.created" content="2017-06-08T22:24:36Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Backup and Recovery Reference"/>
<meta name="dcterms.identifier" content="E50791-08"/>
<meta name="dcterms.isVersionOf" content="RCMRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="rcmsynta2004.htm" title="Previous" type="text/html"/>
<link rel="Next" href="rcmsynta2006.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E50791-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF"></a> <span id="PAGE" style="display:none;">41/152</span> <!-- End Header -->
<a id="RCMRF90271"></a><a id="RCMRF90272"></a><a id="RCMRF90273"></a><a id="RCMRF145"></a>
<h1 class="sect1">REPLACE SCRIPT</h1>
<div>
<div class="section">
<p class="subhead1">Purpose</p>
<p>Use the <code class="codeph">REPLACE SCRIPT</code> command to replace an existing script stored in the recovery catalog. If the script does not exist, then <code class="codeph">REPLACE SCRIPT</code> creates it.</p>
<div class="infoboxnotealso" id="GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF__GUID-E580DB0A-0D83-4E9A-9CC5-FE5153008E37">
<p class="notep1">See Also:</p>
<p><code class="codeph"><a href="rcmsynta013.htm#GUID-4741C1E1-C365-4597-BF2F-8679145B4946">CREATE SCRIPT</a></code> to learn how to create stored scripts</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Prerequisites</p>
<p>Execute <code class="codeph">REPLACE SCRIPT</code> only at the RMAN prompt. RMAN must be connected to a target database and a recovery catalog. The recovery catalog database must be open.</p>
<p>If you are replacing a local script, then you must be connected to the target database that you connected to when you created the script.</p>
<p><span class="bold">Substitution Variables in Stored Scripts</span></p>
<p><a id="d72417e131" class="indexterm-anchor"></a>RMAN supports the use of substitution variables in a stored script. <code class="codeph">&amp;1</code> indicates where to place the first value, <code class="codeph">&amp;2</code> indicate where to place the second value, and so on. Special characters must be quoted.</p>
<p>The substitution variable syntax is <code class="codeph">&amp;</code><span class="italic"><code class="codeph">integer</code></span> followed by an optional period, for example, <code class="codeph">&amp;1.3</code>. The optional period is part of the variable and replaced with the value, thus enabling the substitution text to be immediately followed by another integer. For example, if you pass the value <code class="codeph">mybackup</code> to a command file that contains the substitution variable <code class="codeph">&amp;1.3</code>, then the result of the substitution is <code class="codeph">mybackup3</code>. To create the result <code class="codeph">mybackup.3</code>, you use two periods in <code class="codeph">&amp;1..3</code>.</p>
<p>When you create a stored script with substitution variables, you must provide example values at create time. You can provide these values with the <code class="codeph">USING</code> clause when starting RMAN (see <code class="codeph"><a href="rcmsynta2011.htm#GUID-E5514ACB-59F6-4DB0-B4DB-64DF4C87CDE7">RMAN</a></code>) or enter them when prompted (see <a href="rcmsynta013.htm#GUID-4741C1E1-C365-4597-BF2F-8679145B4946__CHDBBABA">Example 2-72</a>).</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Syntax</p>
<p><span class="bold"><span class="italic">replaceScript</span>::=</span></p>
<div class="figure" id="GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF__GUID-3A49F2C3-5D7C-4F8B-A408-B502D3FD5FAE"><img width="590" height="206" src="img/GUID-3A80592E-C59A-4650-996A-58DF3DEA866C-default.gif" alt="Description of GUID-3A80592E-C59A-4650-996A-58DF3DEA866C-print.eps follows" title="Description of GUID-3A80592E-C59A-4650-996A-58DF3DEA866C-print.eps follows"/><br/>
<a href="img_text/GUID-3A80592E-C59A-4650-996A-58DF3DEA866C-print.htm">Description of the illustration GUID-3A80592E-C59A-4650-996A-58DF3DEA866C-print.eps</a></div>
<!-- class="figure" -->
<p>(<span class="italic"><a href="rcmsynta2012.htm#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B__CHDIDAJB">backupCommands::=</a></span>, <span class="italic"><a href="rcmsynta2012.htm#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B__CHDHAGID">maintenanceCommands::=</a></span>, <span class="italic"><a href="rcmsynta2012.htm#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B__CHDJFJFH">miscellaneousCommands::=</a></span>, <span class="italic"><a href="rcmsynta2012.htm#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B__CHDIFJGG">restoreCommands::=</a></span>)</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Semantics</p>
<div class="tblformalwide" id="GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF__GUID-4456E1AE-9741-44FB-8F37-54A3B35DE6DB">
<table class="cellalignment1044" summary="Describes REPLACE SCRIPT command parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d72417e221">Syntax Element</th>
<th class="cellalignment1052" id="d72417e224">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d72417e229" headers="d72417e221">
<p><code class="codeph">GLOBAL</code></p>
</td>
<td class="cellalignment1053" headers="d72417e229 d72417e224">
<p>Identifies the script as global.</p>
<p><span class="bold">Note:</span> A virtual private catalog has read-only access to global scripts. Creating or updating global scripts must be done while RMAN is connected to the base recovery catalog.</p>
<p><span class="bold">See Also:</span> <span class="q">&#34;<a href="rcmsynta013.htm#GUID-4741C1E1-C365-4597-BF2F-8679145B4946__CHDBJHHH">Usage Notes</a>&#34;</span> for an explanation of the difference between global and local scripts</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d72417e248" headers="d72417e221">
<p><code class="codeph">SCRIPT</code><span class="italic"><code class="codeph">&nbsp;script_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d72417e248 d72417e224">
<p>Identifies the local or global script being replaced.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d72417e259" headers="d72417e221">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;COMMENT</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">comment</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment1053" headers="d72417e259 d72417e224">
<p>Associates an explanatory comment with the stored script in the recovery catalog. The comment is shown in the output of <code class="codeph"><a href="rcmsynta027.htm#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">SCRIPT NAMES</code>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d72417e283" headers="d72417e221"><span class="italic"><code class="codeph">backupCommands</code></span>
<p><span class="italic"><code class="codeph">maintenanceCommands</code></span></p>
<p><span class="italic"><code class="codeph">restoreCommands</code></span></p>
<p><span class="italic"><code class="codeph">miscellaneousCommands</code></span></p>
</td>
<td class="cellalignment1053" headers="d72417e283 d72417e224">
<p>Specifies commands to include in the stored script. The commands allowable within the brackets of the <code class="codeph">REPLACE SCRIPT</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">script_name</code></span> <code class="codeph">&#39;</code> <code class="codeph">{...}</code> command are the same commands supported within a <code class="codeph"><a href="rcmsynta2012.htm#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code> block. Any command that is valid within a <code class="codeph">RUN</code> command is permitted in the stored script. The following commands are not permitted within stored scripts: <code class="codeph"><a href="rcmsynta2012.htm#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code>, <code class="codeph"><a href="rcmsynta001.htm#GUID-7A3919FE-140B-4F50-BA2F-3CEE3285E771">@ (at sign)</a></code>, and <code class="codeph"><a href="rcmsynta002.htm#GUID-E2B8B99B-73CB-4D4E-8065-0B9F44AF8A52">@@ (double at sign)</a></code>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d72417e344" headers="d72417e221">
<p><code class="codeph">FROM FILE</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment1053" headers="d72417e344 d72417e224">
<p>Reads the sequence of commands to define the script from the specified file.</p>
<p>The file resembles the body of a valid stored script. The first line of the file must be a left brace (<code class="codeph">{</code>) and the last line must contain a right brace (<code class="codeph">}</code>). The RMAN commands in the file must be valid in a stored script.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Example</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF__CHDEEAED">
<p class="titleinexample">Example 3-16 Replacing a Recovery Catalog Script</p>
<p>Assume that you start the RMAN client and connect to database <code class="codeph">prod</code> as <code class="codeph">TARGET</code> and then connect to a recovery catalog. You use <code class="codeph"><a href="rcmsynta013.htm#GUID-4741C1E1-C365-4597-BF2F-8679145B4946">CREATE SCRIPT</a></code> to create a global script named <code class="codeph">backup_db</code> as follows:</p>
<pre dir="ltr">CREATE GLOBAL SCRIPT backup_db
COMMENT &#34;back up any database from the recovery catalog, with logs&#34;
{
    BACKUP DATABASE;
}
</pre>
<p>You then use <code class="codeph"><a href="rcmsynta027.htm#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">SCRIPT NAMES</code> to list all scripts known to the recovery catalog:</p>
<pre dir="ltr">RMAN&gt; LIST SCRIPT NAMES;
 
List of Stored Scripts in Recovery Catalog
 
 
    Global Scripts
 
 
       Script Name
       Description
       -----------------------------------------------------------------------
       backup_db
       back up any database from the recovery catalog, with logs
</pre>
<p>You then run the following <code class="codeph">REPLACE SCRIPT</code> command with the intention of editing the <code class="codeph">backup_db</code> global script:</p>
<pre dir="ltr">RMAN&gt; REPLACE SCRIPT backup_db { BACKUP DATABASE PLUS ARCHIVELOG; }
 
replaced script backup_db
</pre>
<p>Because you did not specify the <code class="codeph">GLOBAL</code> keyword, RMAN creates a local script named <code class="codeph">backup_db</code> in addition to the global script named <code class="codeph">backup_db</code>. <code class="codeph"><a href="rcmsynta027.htm#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">SCRIPT NAMES</code> shows both the global and local script recorded in the recovery catalog:</p>
<pre dir="ltr">RMAN&gt; LIST SCRIPT NAMES;
 
List of Stored Scripts in Recovery Catalog
 
 
    Scripts of Target Database PROD
 
       Script Name
       Description
       -----------------------------------------------------------------------
       backup_db
 
 
    Global Scripts
 
 
       Script Name
       Description
       -----------------------------------------------------------------------
       backup_db
       back up any database from the recovery catalog, with logs
</pre>
<p>You can then delete the local script named <code class="codeph">backup_db</code> with <code class="codeph"><a href="rcmsynta016.htm#GUID-FD104F0A-1A3E-45BA-A37E-648A1B0DADA0">DELETE SCRIPT</a></code> and replace the global script as follows:</p>
<pre dir="ltr">RMAN&gt; DELETE SCRIPT backup_db;
 
deleted script: backup_db
 
RMAN&gt; REPLACE GLOBAL SCRIPT backup_db { BACKUP DATABASE PLUS ARCHIVELOG; }
 
replaced global script backup_db
</pre>
<p>The <code class="codeph">LIST SCRIPT NAMES</code> command now shows that only one script named <code class="codeph">backup_db</code> exists in the catalog:</p>
<pre dir="ltr">RMAN&gt; LIST SCRIPT NAMES;

List of Stored Scripts in Recovery Catalog
 
    Global Scripts
 
       Script Name
       Description
       -----------------------------------------------------------------------
       backup_db
</pre>
<p>The <code class="codeph"><a href="rcmsynta028.htm#GUID-FB2882A0-48C0-4D00-8ED6-9F6B2CD15FEC">PRINT SCRIPT</a></code> command confirms the changes to the global script:</p>
<pre dir="ltr">RMAN&gt; PRINT GLOBAL SCRIPT backup_db;
 
printing stored global script: backup_db
 { BACKUP DATABASE PLUS ARCHIVELOG; }
</pre></div>
<!-- class="example" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1037">
<tr>
<td class="cellalignment1049">
<table class="cellalignment1042">
<tr>
<td class="cellalignment1041"><a href="rcmsynta2004.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1041"><a href="rcmsynta2006.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1051">
<table class="cellalignment1040">
<tr>
<td class="cellalignment1041"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1041"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1041"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1041"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1041"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1041"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>