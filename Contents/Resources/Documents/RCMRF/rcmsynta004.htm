<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-88410"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/ALLOCATE%20CHANNEL"></a><title>ALLOCATE CHANNEL</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-06-08T22:24:36Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Backup and Recovery Reference"/>
<meta name="dcterms.identifier" content="E50791-08"/>
<meta name="dcterms.isVersionOf" content="RCMRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="rcmsynta003.htm" title="Previous" type="text/html"/>
<link rel="Next" href="rcmsynta005.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E50791-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE"></a> <span id="PAGE" style="display:none;">10/152</span> <!-- End Header -->
<a id="RCMRF89991"></a><a id="RCMRF89992"></a><a id="RCMRF89993"></a><a id="RCMRF89994"></a><a id="RCMRF89995"></a><a id="RCMRF89996"></a><a id="RCMRF89997"></a><a id="RCMRF102"></a>
<h1 class="sect1">ALLOCATE CHANNEL</h1>
<div>
<div class="section">
<p class="subhead1">Purpose</p>
<p><a id="d10190e86" class="indexterm-anchor"></a><a id="d10190e90" class="indexterm-anchor"></a><a id="d10190e94" class="indexterm-anchor"></a><a id="d10190e98" class="indexterm-anchor"></a><code class="codeph">ALLOCATE CHANNEL</code> manually allocates a <strong class="term">channel</strong>, which is a connection between RMAN and a database instance. The <code class="codeph">ALLOCATE CHANNEL</code> command must be issued within a <code class="codeph"><a href="rcmsynta2012.htm#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code> block. It allocates a channel only in the block where the command is issued.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Prerequisites</p>
<p>The target instance must be started.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Usage Notes</p>
<p>Manually allocated channels are distinct from automatically allocated channels specified with <code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code>. Automatic channels apply to any RMAN job in which you do <span class="italic">not</span> manually allocate channels. You can override automatic channel configurations by manually allocating channels within a <code class="codeph">RUN</code> command, but you cannot use <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> <code class="codeph">DEVICE TYPE</code> or <code class="codeph"><a href="rcmsynta2008.htm#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code> <code class="codeph">DEVICE TYPE</code> to use automatic channels after specifying manual channels with <code class="codeph">ALLOCATE CHANNEL</code>.</p>
<p><span class="bold">Multiple Channels</span></p>
<p><a id="d10190e159" class="indexterm-anchor"></a><a id="d10190e163" class="indexterm-anchor"></a><a id="d10190e167" class="indexterm-anchor"></a><a id="d10190e171" class="indexterm-anchor"></a><a id="d10190e173" class="indexterm-anchor"></a>You can allocate up to 255 channels; each channel can read up to 64 files in parallel. You can control the degree of parallelism within a job by the number of channels that you allocate. Allocating multiple channels simultaneously allows a single job to read or write multiple backup sets or disk copies in parallel, with each channel operating on a separate backup set or copy.</p>
<p>When making backups to disk, the guideline is to allocate one channel for each output device (see <a href="rcmsynta004.htm#GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__CHDCDCFF">Example 2-7</a>). If RMAN is writing to a striped file system or an ASM disk group, however, then multiple channels can improve performance. When backing up to tape, the guideline is that the number of tape channels equals the number of tape devices divided by the number of duplexed copies (see <a href="rcmsynta004.htm#GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__CHDGCEDF">Example 2-8</a>).</p>
<p><span class="bold">Channels in an Oracle RAC Environment</span></p>
<p><a id="d10190e186" class="indexterm-anchor"></a><a id="d10190e190" class="indexterm-anchor"></a><a id="d10190e194" class="indexterm-anchor"></a>If the password for the <code class="codeph">SYS</code> and <code class="codeph">SYSBACKUP</code> users all Oracle RAC instances is the same, then you do not need to put passwords in the <code class="codeph">CONNECT</code> option of the <code class="codeph">ALLOCATE</code> or <code class="codeph">CONFIGURE</code> command. If you use a connect string of the form <span class="italic"><code class="codeph">user</code></span><code class="codeph">@</code><span class="italic"><code class="codeph">database</code></span>, then RMAN automatically uses the same password that was used for the <code class="codeph">TARGET</code> connection when the RMAN session was started.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Syntax</p>
<p><span class="bold"><span class="italic">allocate::=</span></span></p>
<div class="figure" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__GUID-DE12AD08-3F42-4BC2-88DA-AE48B346A0AE"><img width="416" height="102" src="img/GUID-F2C08803-EA7B-486C-ABCC-2DB26624CD94-default.gif" alt="Description of GUID-F2C08803-EA7B-486C-ABCC-2DB26624CD94-print.eps follows" title="Description of GUID-F2C08803-EA7B-486C-ABCC-2DB26624CD94-print.eps follows"/><br/>
<a href="img_text/GUID-F2C08803-EA7B-486C-ABCC-2DB26624CD94-print.htm">Description of the illustration GUID-F2C08803-EA7B-486C-ABCC-2DB26624CD94-print.eps</a></div>
<!-- class="figure" -->
<p>(<span class="italic"><a href="rcmsubcl007.htm#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier::=</a></span>, <span class="italic"><a href="rcmsubcl001.htm#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA__BABFFJCH">allocOperandList::=</a></span>)</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Semantics</p>
<div class="tblformalwide" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__GUID-0333354E-30B8-4C1E-A8C3-2157DDEC9B78">
<table class="cellalignment1044" summary="Describes ALLOCATE command parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1054" id="d10190e258">Syntax Element</th>
<th class="cellalignment1055" id="d10190e261">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1056" id="d10190e266" headers="d10190e258">
<p><code class="codeph">AUXILIARY</code></p>
</td>
<td class="cellalignment1057" headers="d10190e266 d10190e261">
<p>Specifies a connection between RMAN and an auxiliary database instance.</p>
<p>An auxiliary instance is used when executing the <code class="codeph"><a href="rcmsynta020.htm#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4">DUPLICATE</a></code> or <code class="codeph"><a href="rcmsynta2022.htm#GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D">TRANSPORT TABLESPACE</a></code> command, and when performing TSPITR with <code class="codeph"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code> <code class="codeph">TABLESPACE</code> (see <a href="rcmsynta004.htm#GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__CHDIHDBD">Example 2-9</a>). When specifying this option, the auxiliary instance must be started but not mounted.</p>
<p><span class="bold">See Also:</span> <code class="codeph"><a href="rcmsynta020.htm#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4">DUPLICATE</a></code> to learn how to duplicate a database, and <code class="codeph"><a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code> to learn how to connect to a duplicate database instance</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1056" id="d10190e310" headers="d10190e258">
<p><code class="codeph">CHANNEL</code> <span class="italic"><code class="codeph">channel_id</code></span></p>
</td>
<td class="cellalignment1057" headers="d10190e310 d10190e261">
<p><a id="d10190e320" class="indexterm-anchor"></a>Specifies a connection between RMAN and the target database instance. The <span class="italic"><code class="codeph">channel_id</code></span> is the case-sensitive name of the channel. The database uses the <span class="italic"><code class="codeph">channel_id</code></span> to report I/O errors.</p>
<p>Each connection initiates a database server session on the target or auxiliary instance: this session performs the work of backing up, restoring, or recovering RMAN backups. You cannot make a connection to a shared server session.</p>
<p>Whether <code class="codeph">ALLOCATE CHANNEL</code> allocates operating system resources immediately depends on the operating system. On some platforms, operating system resources are allocated at the time the command is issued. On other platforms, operating system resources are not allocated until you open a file for reading or writing.</p>
<p>Each channel operates on one backup set or image copy at a time. RMAN automatically releases the channel at the end of the job.</p>
<p><span class="bold">Note:</span> You cannot prefix <code class="codeph">ORA_</code> to a channel name. RMAN reserves channel names beginning with the <code class="codeph">ORA_</code> prefix for its own use.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1056" id="d10190e351" headers="d10190e258">
<p><code class="codeph">DEVICE&nbsp;TYPE</code> <span class="italic"><a href="rcmsubcl007.htm#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></span></p>
</td>
<td class="cellalignment1057" headers="d10190e351 d10190e261">
<p>Specifies the type of storage for a backup. Query the <a id="d10190e362" class="indexterm-anchor"></a><code class="codeph">V$BACKUP_DEVICE</code> view for information about available device types and names.</p>
<p><span class="bold">Note:</span> When you specify <code class="codeph">DEVICE TYPE DISK</code>, no operating system resources are allocated other than for the creation of the server session.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsubcl007.htm#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1056" id="d10190e384" headers="d10190e258">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;</code><span class="italic"><a href="rcmsubcl001.htm#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA">allocOperandList</a></span></p>
</td>
<td class="cellalignment1057" headers="d10190e384 d10190e261">
<p>Specifies control options for the allocated channel. The channel parameters for sequential I/O devices are platform-specific (see <a href="rcmsynta004.htm#GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__CHDIEGIA">Example 2-6</a>).</p>
<p><span class="bold">See Also:</span> <code class="codeph"><span class="codeinlineitalic"><a href="rcmsubcl001.htm#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA">allocOperandList</a></span></code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Examples</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__CHDIEGIA">
<p class="titleinexample">Example 2-6 Manually Allocating a Channel for a Backup</p>
<p>This example allocates a single tape channel for a whole database and archived redo log backup. The <code class="codeph">PARMS</code> parameter specifies the Oracle Secure Backup media family named <code class="codeph">wholedb_mf</code>.</p>
<pre dir="ltr">RUN
{
  ALLOCATE CHANNEL c1 DEVICE TYPE sbt
    PARMS &#39;ENV=(OB_MEDIA_FAMILY=wholedb_mf)&#39;;
  BACKUP DATABASE;
  BACKUP ARCHIVELOG ALL NOT BACKED UP;
}
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__CHDCDCFF">
<p class="titleinexample">Example 2-7 Distributing a Backup Across Multiple Disks</p>
<p><a id="d10190e426" class="indexterm-anchor"></a>When backing up to disk, you can spread the backup across several disk drives. Allocate one <code class="codeph">DEVICE TYPE DISK</code> channel for each disk drive and specify the format string so that the output files are on different disks.</p>
<pre dir="ltr">RUN
{
  ALLOCATE CHANNEL disk1 DEVICE TYPE DISK FORMAT &#39;/disk1/%U&#39;; 
  ALLOCATE CHANNEL disk2 DEVICE TYPE DISK FORMAT &#39;/disk2/%U&#39;; 
  BACKUP DATABASE PLUS ARCHIVELOG;
}
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__CHDGCEDF">
<p class="titleinexample">Example 2-8 Creating Multiple Copies of a Backup on Tape</p>
<p><a id="d10190e438" class="indexterm-anchor"></a><a id="d10190e440" class="indexterm-anchor"></a>In this example, four tape drives are available for writing: <code class="codeph">stape1</code>, <code class="codeph">stape2</code>, <code class="codeph">stape3</code>, and <code class="codeph">stape4</code>. You use the <code class="codeph"><a href="rcmsynta2014.htm#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">BACKUP COPIES</code> command to instruct RMAN to create two identical copies of the database backup. Because the guideline is that the number of tape channels equals the number of tape devices divided by the number of duplexed copies, you allocate two channels. In this case the <code class="codeph">BACKUP_TAPE_IO_SLAVES</code> initialization parameter must be set to <code class="codeph">TRUE</code>.</p>
<p>In the <code class="codeph">OB_DEVICE_</code><span class="italic"><code class="codeph">n</code></span> parameter for Oracle Secure Backup, the <span class="italic"><code class="codeph">n</code></span> specifies the copy number of the backup piece. RMAN writes copy 1 of each backup piece to tape drives <code class="codeph">stape1</code> and <code class="codeph">stape2</code> and writes copy 2 of each backup piece to drives <code class="codeph">stape3</code> and <code class="codeph">stape4</code>. Thus, each copy of the database backup is distributed between two tape drives, so that part of the data is on each drive.</p>
<pre dir="ltr">RUN
{
  ALLOCATE CHANNEL t1 DEVICE TYPE sbt 
    PARMS &#39;ENV=(OB_DEVICE_1=stape1,OB_DEVICE_2=stape3)&#39;;
  ALLOCATE CHANNEL t2 DEVICE TYPE sbt 
    PARMS &#39;ENV=(OB_DEVICE_1=stape2,OB_DEVICE_2=stape4)&#39;;
  SET BACKUP COPIES 2;
  BACKUP DATABASE;
}
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__CHDIHDBD">
<p class="titleinexample">Example 2-9 Allocating an Auxiliary Channel for Database Duplication</p>
<p><a id="d10190e503" class="indexterm-anchor"></a><a id="d10190e507" class="indexterm-anchor"></a>This example creates a duplicate database from backups. RMAN can use configured channels for duplication even if they do not specify the <code class="codeph">AUXILIARY</code> option. In this example, no SBT channel is preconfigured, so an auxiliary SBT channel is manually allocated.</p>
<pre dir="ltr">RUN
{ 
  ALLOCATE AUXILIARY CHANNEL c1 DEVICE TYPE sbt;
  DUPLICATE TARGET DATABASE
    TO dupdb   
  DB_FILE_NAME_CONVERT &#39;/disk2/dbs/&#39;,&#39;/disk1/&#39;
  SPFILE 
    PARAMETER_VALUE_CONVERT   &#39;/disk2/dbs/&#39;,
                              &#39;/disk1/&#39;
    SET LOG_FILE_NAME_CONVERT &#39;/disk2/dbs/&#39;,
                              &#39;/disk1/&#39;;
}
</pre></div>
<!-- class="example" -->
<div class="infoboxnotealso" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__GUID-2D5840F4-E646-4DE9-9C48-94B3CCA04ED1">
<p class="notep1">See Also:</p>
<p><a class="olink REFRN" target="_blank" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for more information on the parameter <code class="codeph">DB_FILE_NAME_CONVERT</code></p>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1037">
<tr>
<td class="cellalignment1049">
<table class="cellalignment1042">
<tr>
<td class="cellalignment1041"><a href="rcmsynta003.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1041"><a href="rcmsynta005.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1051">
<table class="cellalignment1040">
<tr>
<td class="cellalignment1041"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1041"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1041"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1041"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1041"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1041"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>