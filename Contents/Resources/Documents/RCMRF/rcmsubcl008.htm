<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-88391"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/fileNameConversionSpec"></a><title>fileNameConversionSpec</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="fileNameConversionSpec subclause, file names, generating new"/>
<meta name="dcterms.created" content="2017-06-08T22:24:36Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Backup and Recovery Reference"/>
<meta name="dcterms.identifier" content="E50791-08"/>
<meta name="dcterms.isVersionOf" content="RCMRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="rcmsubcl007.htm" title="Previous" type="text/html"/>
<link rel="Next" href="rcmsubcl009.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E50791-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3"></a> <span id="PAGE" style="display:none;">70/152</span> <!-- End Header -->
<a id="RCMRF90439"></a><a id="RCMRF90440"></a><a id="RCMRF90441"></a><a id="RCMRF196"></a>
<h1 class="sect1">fileNameConversionSpec</h1>
<div>
<div class="section">
<p class="subhead1">Purpose</p>
<p>Use the <span class="italic"><code class="codeph">fileNameConversionSpec</code></span> subclause to specify one or more patterns to be used in generating new file names based on old file names. Used with <a id="d110609e95" class="indexterm-anchor"></a><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code>, <a id="d110609e104" class="indexterm-anchor"></a><code class="codeph"><a href="rcmsynta011.htm#GUID-AD252F46-DD9E-4E2C-BF0E-DF2A4C7590C9">CONVERT</a></code>, and <a id="d110609e113" class="indexterm-anchor"></a><code class="codeph"><a href="rcmsynta020.htm#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4">DUPLICATE</a></code> as one way of generating output file names.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Usage Notes</p>
<p>The rules for string patterns and how they affect file naming equal those for the initialization parameter <a id="d110609e127" class="indexterm-anchor"></a><a id="d110609e129" class="indexterm-anchor"></a><code class="codeph">DB_FILE_NAME_CONVERT</code>. In parentheses, provide an even number of string patterns.</p>
<p>When RMAN generates a new file name based on an old one, it compares the original file name to the first member of each pair of string patterns. The first time that RMAN finds a pattern that is a substring of the original file name, RMAN generates the new file name by substituting the second member of the pair for the substring that matched.</p>
<p>The pattern does not have to match at the beginning of the file name. The following command creates an image copy of data file <code class="codeph">/disk1/dbs/users.dbf</code> as <code class="codeph">/disk1/newdbs/users.dbf</code>:</p>
<pre dir="ltr">BACKUP AS COPY
    DB_FILE_NAME_CONVERT = (&#39;dbs&#39;,&#39;newdbs&#39;);
    TABLESPACE users;
</pre>
<p>When multiple possible matches exist for a given file name being converted, RMAN uses the first match in the list of patterns to generate the new file name. The following command has the same effect as the previous example because the pattern <code class="codeph">dbs</code> matches the file name, so that the file name is never compared to the second pattern <code class="codeph">/disk1</code>:</p>
<pre dir="ltr">BACKUP AS COPY
    DB_FILE_NAME_CONVERT = (&#39;dbs&#39;,&#39;newdbs&#39;,&#39;/disk1&#39;,&#39;/newdisk&#39;)
    TABLESPACE users;
</pre>
<p>For the <code class="codeph"><a href="rcmsynta011.htm#GUID-AD252F46-DD9E-4E2C-BF0E-DF2A4C7590C9">CONVERT</a></code> <code class="codeph">TABLESPACE</code>, <code class="codeph">CONVERT DATABASE</code>, and <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> <code class="codeph">AS COPY</code> commands, if the source files for these operations are Oracle-managed files, then you cannot use <span class="italic"><code class="codeph">fileNameConversionSpec</code></span> to convert the source file names into new output file names. For Oracle-managed files, either in Automated Storage Management (ASM) or in ordinary file system storage, the database must be allowed to generate the file names for the output files. For example, an OMF file name for a data file in non-ASM storage might be of the following form:</p>
<pre dir="ltr">/private/boston/datafile/01_mf_system_ab12554_.dbf
</pre>
<p>An <a id="d110609e188" class="indexterm-anchor"></a>OMF file name in ASM storage might be of the following form:</p>
<pre dir="ltr">+DISK/boston/datafile/system.256.4543080
</pre>
<p>Only the database can generate and manage OMF file names. Typically, substituting the name of a different disk group or a different OMF location into an OMF file name does not produce a valid file name in the new destination. To convert OMF file names for storage in another OMF location, use an alternative such as a <code class="codeph">FORMAT</code> clause with these commands to specify the new output location and allow the database to manage the specific output file names.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Syntax</p>
<p id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__BABBJGBH"><span class="bold"><span class="italic">fileNameConversionSpec</span>::=</span></p>
<div class="figure" id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__GUID-2CB5374C-2833-41B7-8F46-10E82593BEBE"><img width="456" height="67" src="img/GUID-81415C50-C639-438A-8236-D25CC145BE61-default.gif" alt="Description of GUID-81415C50-C639-438A-8236-D25CC145BE61-print.eps follows" title="Description of GUID-81415C50-C639-438A-8236-D25CC145BE61-print.eps follows"/><br/>
<a href="img_text/GUID-81415C50-C639-438A-8236-D25CC145BE61-print.htm">Description of the illustration GUID-81415C50-C639-438A-8236-D25CC145BE61-print.eps</a></div>
<!-- class="figure" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Semantics</p>
<div class="tblformalwide" id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__GUID-45B1828E-DDCD-4177-BA27-C1E70C3C0597">
<table class="cellalignment1044" summary="Describes fileNameConversionSpec subclause parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1097" id="d110609e221">Syntax Element</th>
<th class="cellalignment1098" id="d110609e224">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1099" id="d110609e229" headers="d110609e221">
<p><span class="italic"><code class="codeph">string_pattern</code></span></p>
</td>
<td class="cellalignment1100" headers="d110609e229 d110609e224">
<p>Specifies pairs of strings used to convert the file names. You can use as many pairs of primary and standby replacement strings as required. For example, you could set the string pattern to a value such as:</p>
<p><code class="codeph">DB_FILE_NAME_CONVERT = (&#39;str1&#39;,&#39;str2&#39;,&#39;str3&#39;, &#39;str4&#39; ...)</code></p>
<p>In this example, <code class="codeph">str1</code> is a pattern matching the original file name, <code class="codeph">str2</code> is the pattern replacing <code class="codeph">str1</code> in the generated file name, <code class="codeph">str3</code> is a pattern matching the original file name, and <code class="codeph">str4</code> is the pattern replacing <code class="codeph">str3</code> in the generated file name.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Examples</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__BABGHJIA">
<p class="titleinexample">Example 4-17 Using DB_FILE_NAME_CONVERT with a Single Conversion Pair</p>
<p>In this example, the tablespace <code class="codeph">users</code> contains data files in directory <code class="codeph">/disk1/oradata/prod/</code>, whereas tablespace <code class="codeph">tools</code> contains data files in <code class="codeph">/disk1/oradata/prod/</code>. For each data file to be converted, if <code class="codeph">disk1/oradata/prod</code> is a substring of the data file name, then the image copy name is created by replacing the string with <code class="codeph">disk2</code>.</p>
<pre dir="ltr">BACKUP AS COPY 
  DB_FILE_NAME_CONVERT = (&#39;disk1/oradata/prod&#39;,&#39;disk2&#39;)
  TABLESPACE users, tools;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__GUID-2CD5B739-FE1E-4780-9096-684E4E627AE3">
<p class="titleinexample">Example 4-18 Using DB_FILE_NAME_CONVERT with Multiple Conversion Pairs</p>
<p>This example creates image copies of the same data files described in <a href="rcmsubcl008.htm#GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__BABGHJIA">Example 4-17</a>. The first string in each pair specifies a pattern to match in the name of the source data files. The second string in each pair is the substitution pattern to use when generating the names of the image copies.</p>
<pre dir="ltr">BACKUP AS COPY 
    DB_FILE_NAME_CONVERT=(&#39;/disk1/oradata/prod/users&#39;,&#39;/disk2/users&#39;,
                          &#39;/disk1/oradata/prod/tools&#39;,&#39;/tmp/tools&#39;)
    TABLESPACE tools, users;
</pre>
<p>The following sample output for this command demonstrates how RMAN uses the conversion pairs to name the output image copies:</p>
<pre dir="ltr">Starting backup at 08-MAR-13
using channel ORA_DISK_1
channel ORA_DISK_1: starting datafile copy
input datafile file number=00027 name=/disk1/oradata/prod/tools01.dbf
output file name=/tmp/tools01.dbf tag=TAG20130308T143300 RECID=33 STAMP=616689181
channel ORA_DISK_1: datafile copy complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting datafile copy
input datafile file number=00028 name=/disk1/oradata/prod/users01.dbf
output file name=/disk2/users01.dbf tag=TAG20130308T143300 RECID=34 STAMP=616689182
channel ORA_DISK_1: datafile copy complete, elapsed time: 00:00:01
Finished backup at 08-MAR-13
 
Starting Control File and SPFILE Autobackup at 08-MAR-13
piece handle=/disk2/PROD/autobackup/2013_03_08/o1_mf_s_616689184_2z13s1kx_.bkp comment=NONE
Finished Control File and SPFILE Autobackup at 08-MAR-13
</pre></div>
<!-- class="example" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1037">
<tr>
<td class="cellalignment1049">
<table class="cellalignment1042">
<tr>
<td class="cellalignment1041"><a href="rcmsubcl007.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1041"><a href="rcmsubcl009.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1051">
<table class="cellalignment1040">
<tr>
<td class="cellalignment1041"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1041"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1041"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1041"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1041"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1041"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>