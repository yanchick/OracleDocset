<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-88437"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/RECOVER"></a><title>RECOVER</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="databases, recovering, data files, database point-in-time recovery (DBPITR), tablespace point-in-time recovery (TSPITR), RECOVER command, recover clause, parameter descriptions, recoverSpec subclause, recoverObject subclause, dbObject subclause, RECOVER command, blockObject subclause, recoverOptionList subclause"/>
<meta name="dcterms.created" content="2017-06-08T22:24:36Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Backup and Recovery Reference"/>
<meta name="dcterms.identifier" content="E50791-08"/>
<meta name="dcterms.isVersionOf" content="RCMRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="rcmsynta2.htm" title="Previous" type="text/html"/>
<link rel="Next" href="rcmsynta2002.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E50791-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95"></a> <span id="PAGE" style="display:none;">37/152</span> <!-- End Header -->
<a id="RCMRF90237"></a><a id="RCMRF90238"></a><a id="RCMRF90613"></a><a id="RCMRF90239"></a><a id="RCMRF90614"></a><a id="RCMRF90240"></a><a id="RCMRF90241"></a><a id="RCMRF90242"></a><a id="RCMRF90615"></a><a id="RCMRF90244"></a><a id="RCMRF90245"></a><a id="RCMRF90616"></a><a id="RCMRF90247"></a><a id="RCMRF90248"></a><a id="RCMRF90249"></a><a id="RCMRF90617"></a><a id="RCMRF90251"></a><a id="RCMRF90252"></a><a id="RCMRF90618"></a><a id="RCMRF90253"></a><a id="RCMRF90254"></a><a id="RCMRF90255"></a><a id="RCMRF90256"></a><a id="RCMRF90257"></a><a id="RCMRF90258"></a><a id="RCMRF90259"></a><a id="RCMRF90619"></a><a id="RCMRF90620"></a><a id="RCMRF90621"></a><a id="RCMRF140"></a>
<h1 class="sect1">RECOVER</h1>
<div>
<div class="section">
<p class="subhead1">Purpose</p>
<p><a id="d65533e175" class="indexterm-anchor"></a><a id="d65533e177" class="indexterm-anchor"></a><a id="d65533e181" class="indexterm-anchor"></a><a id="d65533e185" class="indexterm-anchor"></a><a id="d65533e189" class="indexterm-anchor"></a>Use the <code class="codeph">RECOVER</code> command to perform one of the following distinct tasks:</p>
<ul style="list-style-type: disc;">
<li>
<p>Perform complete recovery of the whole database or one or more restored data files</p>
</li>
<li>
<p>Perform point-in-time recovery of a database (DBPITR), pluggable database (PDB), tablespace (TSPITR), table, or table partition</p>
</li>
<li>
<p>Apply incremental backups to a data file image copy (<span class="italic">not</span> a restored data file) to roll it forward in time</p>
</li>
<li>
<p>Recover a corrupt data block or set of data blocks within a data file</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-CABC3DC6-1EE1-421F-BACB-D2E12B7000AF">
<p class="notep1">See Also:</p>
<p><a class="olink BRADV8005" target="_blank" href="../BRADV/rcmcomre.htm#BRADV8005"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> to learn how to recover data files</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Prerequisites</p>
<p>All redo or incremental changes required for the recovery must exist on disk or in SBT. If RMAN needs to restore incremental backups or archived redo log files during recovery, then you must either have automatic channels configured or manually allocate channels of the same type that created these backups.</p>
<p><a id="d65533e226" class="indexterm-anchor"></a>If you perform media recovery on an encrypted tablespace, then the Oracle keystore must be open when performing media recovery of this tablespace. See <a class="olink ADMIN12327" target="_blank" href="../ADMIN/tspaces.htm#ADMIN12327"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> to learn about encrypted tablespaces.</p>
<p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBDFJFG"><span class="bold">Prerequisites Specific to RECOVER BLOCK</span></p>
<p>The following prerequisites apply to <code class="codeph">RECOVER BLOCK</code>:</p>
<ul style="list-style-type: disc;">
<li>
<p><a id="d65533e247" class="indexterm-anchor"></a><a id="d65533e249" class="indexterm-anchor"></a><a id="d65533e253" class="indexterm-anchor"></a>The target database must run in <code class="codeph">ARCHIVELOG</code> mode and be open or mounted with a current control file.</p>
</li>
<li>
<p>RMAN can only recover blocks marked media corrupt. The <a id="d65533e264" class="indexterm-anchor"></a><a id="d65533e266" class="indexterm-anchor"></a><code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> view indicates which blocks in a file were marked corrupt since the most recent <code class="codeph">BACKUP</code> or <code class="codeph">BACKUP ... VALIDATE</code> command was run against the file.</p>
</li>
<li>
<p><a id="d65533e281" class="indexterm-anchor"></a>The backups of the data files containing the corrupt blocks must be full backups and not proxy backups. If only proxy backups exist, then you can restore them to a nondefault location on disk, in which case RMAN considers them data file copies. You can then use the data file copies for block media recovery.</p>
</li>
<li>
<p>RMAN can use only archived redo log files for recovery. Block media recovery cannot survive a missing or inaccessible log, although it can sometimes survive missing or inaccessible records (see <a class="olink BRADV118" target="_blank" href="../BRADV/rcmblock.htm#BRADV118"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a>).</p>
</li>
<li>
<p>For RMAN to be able to search the flashback logs for good copies of corrupt blocks, Flashback Database must be enabled on the target database.</p>
</li>
<li>
<p>For RMAN to be able to search a standby database for good copies of corrupt blocks, the target database must be associated with a physical standby database in a Data Guard environment. In addition, the physical standby database must be open read-only in managed recovery.</p>
</li>
</ul>
<div class="infobox-note" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-0795BA20-1B1D-457C-9356-41EA26EB01DE">
<p class="notep1">Note:</p>
<p>An active Data Guard license is required for this operation.</p>
</div>
</div>
<!-- class="section" -->
<div class="section" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDJBACD">
<p class="subhead1">Usage Notes</p>
<p>By default, RMAN performs complete recovery. For point-in-time recovery, the best practice is to enter a <code class="codeph"><a href="rcmsynta2014.htm#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">UNTIL</code> command before both the <code class="codeph"><a href="rcmsynta2008.htm#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code> and <code class="codeph">RECOVER</code> commands in a <code class="codeph"><a href="rcmsynta2012.htm#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code> command so that the <code class="codeph">UNTIL</code> time applies to both commands. If you run <code class="codeph">SET UNTIL</code> after restoring the database, then you may not be able to recover the database to the target time because the restored files may have timestamps later than the target time.</p>
<div class="infobox-note" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-2BB576D3-8963-4E72-9060-A02160E5639E">
<p class="notep1">Note:</p>
<p>You must open the database with the <code class="codeph">RESETLOGS</code> option after incomplete recovery or recovery with a backup control file.</p>
</div>
<p><span class="bold">Incremental Backups and Archived Redo Log Files</span></p>
<p><a id="d65533e344" class="indexterm-anchor"></a>Except for <code class="codeph">RECOVER BLOCK</code>, RMAN can use both incremental backups and archived redo log files for recovery. RMAN uses the following search order:</p>
<ol>
<li>
<p>Incremental backup sets on disk or tape</p>
</li>
<li>
<p>Archived redo log files on disk</p>
</li>
<li>
<p>Archived redo log backups on disk</p>
</li>
<li>
<p>Archived redo log backup sets on tape</p>
</li>
</ol>
<p>When RMAN chooses a destination to restore archived redo log files, it uses the following order of precedence:</p>
<ol>
<li>
<p><code class="codeph"><a href="rcmsynta2014.htm#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">ARCHIVELOG DESTINATION</code></p>
</li>
<li>
<p>The <a id="d65533e380" class="indexterm-anchor"></a><code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter whose value is set to <code class="codeph">LOCATION=USE_DB_RECOVERY_FILE_DEST</code></p>
</li>
<li>
<p><code class="codeph">LOG_ARCHIVE_DEST_1</code></p>
</li>
</ol>
<p>RMAN can apply incremental backups to data files that were not restored from an incremental backup. If overlapping levels of incremental backup exist, then RMAN automatically chooses the level covering the longest period of time.</p>
<p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAJHAJF"><span class="bold">Recovery Using Storage Snapshots</span><a id="d65533e399" class="indexterm-anchor"></a><a id="d65533e403" class="indexterm-anchor"></a></p>
<p>Storage Snapshot Optimization enables you to use third-party technologies to take storage snapshots without putting the database or associated data files in <code class="codeph">BACKUP</code> mode. When recovering the database using a storage snapshot, specify the <code class="codeph">SNAPSHOT TIME</code> option.</p>
<div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-D74FCC5A-A06C-42D6-A992-32DE427071AC">
<p class="notep1">See Also:</p>
<p><a class="olink BRADV727" target="_blank" href="../BRADV/osrecvry.htm#BRADV727"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for information about specifying the snapshot time</p>
</div>
<p>To be usable in recovery operations, the snapshots must conform to the following requirements. Ask your vendor for a guarantee of compliance.</p>
<ul style="list-style-type: disc;">
<li>
<p>The database is crash consistent during the snapshot.</p>
</li>
<li>
<p>The snapshot preserves write order for each file.</p>
</li>
<li>
<p>The snapshot technology stores the time at which the snapshot is completed.</p>
</li>
</ul>
<div class="infobox-note" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-534F440E-B7A4-4B28-B13A-146304135AA7">
<p class="notep1">Caution:</p>
<p>Take care that the database snapshots are usable. Oracle Database does not use a snapshot for recovery if structural changes were made during the snapshot. Some SQL operations can make database structural changes and should not be used during a snapshot. A few examples of such operations include the <code class="codeph">OFFLINE</code>, <code class="codeph">ONLINE</code>, <code class="codeph">READONLY</code>, <code class="codeph">DROP</code>, <code class="codeph">RENAME</code>, <code class="codeph">SHRINK</code>, and <code class="codeph">ADD</code> clauses.</p>
</div>
<div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-0E8A6B09-3A17-4A69-B93A-D8DC78ACCF18">
<p class="notep1">See Also:</p>
<p><code class="codeph">ALTER DATABASE</code> and <code class="codeph">ALTER TABLESPACE</code> commands in <a class="olink SQLRF01402" target="_blank" href="../SQLRF/statements_7002.htm#SQLRF01402"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about clauses that make database structural changes</p>
</div>
<p><span class="bold">Recovery Through RESETLOGS</span></p>
<p>You must <code class="codeph"><a href="rcmsynta2008.htm#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code> data files before you can recover them. RMAN can recover through <code class="codeph">RESETLOGS</code> operations transparently if the data files to be recovered are from a parent incarnation. If required, the <code class="codeph">RECOVER</code> command can also restore and apply archived redo log files and incremental backups from previous database incarnations, even if those logs were generated in previous releases of Oracle Database.</p>
<p>When recovering through an <code class="codeph">OPEN RESETLOGS</code>, ensure that you have all logs needed for recovery. In a previous database incarnation, you must have the logs from the time of the backup until the SCN that is 1 less than the <code class="codeph">RESETLOGS SCN</code>. The incarnation table must have a complete history of <code class="codeph">RESETLOGS</code> operations from the creation time of the database backup. If the complete metadata is not found in <code class="codeph">V$DATABASE_INCARNATION</code>, then you can re-create this metadata by using <code class="codeph"><a href="rcmsynta007.htm#GUID-6E337759-9860-463A-BF7C-8512B272B8E1">CATALOG</a></code> for the archived redo log files from the missing incarnations.</p>
<div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-F1C84C0F-5BF0-45A0-866C-0D7EFD208082">
<p class="notep1">See Also:</p>
<p><code class="codeph"><a href="rcmsynta2008.htm#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code> command for explanation of the default location for restoring archived redo log files. RMAN automatically specifies the <code class="codeph">MAXSIZE</code> option when staging logs in the fast recovery area.</p>
</div>
<p><span class="bold">Recovery of CDBs and PDBs</span><a id="d65533e521" class="indexterm-anchor"></a><a id="d65533e525" class="indexterm-anchor"></a><a id="d65533e529" class="indexterm-anchor"></a><a id="d65533e533" class="indexterm-anchor"></a></p>
<p>RMAN enables you to recover a whole multitenant container database (CDB), the root, one or more PDBs, and tablespaces in a root or PDB. You can perform complete recovery or point-in-time recovery for PDBs and CDBs. However, you cannot recover the root to a specified point in time.</p>
<p>The process of recovering CDBs and PDBs is similar to that of non-CDBs. The difference is in the process of connecting to the CDB or PDB and in the commands used. To recover the whole CDB, the root, or multiple PDBs, you connect to the root. To recover a particular PDB, connect to that PDB. To recover PDBs, you use the <code class="codeph">RECOVER PLUGGABLE DATABASE</code> command. To recover a whole CDB, use the <code class="codeph">RECOVER DATABASE</code> command and to recover the root, use the <code class="codeph">RECOVER DATABASE ROOT</code> command.</p>
<div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-57812173-E962-49EE-A77D-A3CD12866D9D">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a>&#34;</span> for information about connecting to CDBs and PDBs</p>
</div>
<div class="infoboxnotealso" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-6F472BF4-CDDF-477F-B334-85ECFE12C039">
<p class="notep1">See Also:</p>
<p><a class="olink BRADV" target="_blank" href="../BRADV/toc.htm"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for information about performing recovery of CDBs and PDBs</p>
</div>
<p>In a Data Guard environment, you may need to restore the entire CDB after the point-in-time recovery of a primary database, for the standby database to follow the primary database.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Syntax</p>
<p><a id="d65533e571" class="indexterm-anchor"></a><a id="d65533e575" class="indexterm-anchor"></a><span class="bold"><span class="italic">recover</span>::=</span></p>
<div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-626816AA-492D-40F4-823E-F18B2E559D2B"><img width="409" height="64" src="img/GUID-B0C02F16-077C-471A-BFC7-77448F879B78-default.gif" alt="Description of GUID-B0C02F16-077C-471A-BFC7-77448F879B78-print.eps follows" title="Description of GUID-B0C02F16-077C-471A-BFC7-77448F879B78-print.eps follows"/><br/>
<a href="img_text/GUID-B0C02F16-077C-471A-BFC7-77448F879B78-print.htm">Description of the illustration GUID-B0C02F16-077C-471A-BFC7-77448F879B78-print.eps</a></div>
<!-- class="figure" -->
<p>(<span class="italic"><a href="rcmsubcl007.htm#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier::=</a></span>, <span class="italic"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDECJGE">recoverObject::=</a></span>, <span class="italic"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIIEGB">recoverOptionList::=</a></span>)</p>
<p><a id="d65533e601" class="indexterm-anchor"></a><a id="d65533e605" class="indexterm-anchor"></a><span class="bold"><span class="italic">recoverSpec</span>::=</span></p>
<div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-95C09C81-4D2A-469A-92D9-5406587262FB"><img width="270" height="107" src="img/GUID-DC01C95D-2F3B-4444-BF4C-CAE836BBC4BC-default.gif" alt="Description of GUID-DC01C95D-2F3B-4444-BF4C-CAE836BBC4BC-print.eps follows" title="Description of GUID-DC01C95D-2F3B-4444-BF4C-CAE836BBC4BC-print.eps follows"/><br/>
<a href="img_text/GUID-DC01C95D-2F3B-4444-BF4C-CAE836BBC4BC-print.htm">Description of the illustration GUID-DC01C95D-2F3B-4444-BF4C-CAE836BBC4BC-print.eps</a></div>
<!-- class="figure" -->
<p>(<span class="italic"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDECJGE">recoverObject::=</a></span>, <span class="italic"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIDHBB">blockObject::=</a></span>, <span class="italic"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIIEGB">recoverOptionList::=</a></span>)</p>
<p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDECJGE"><a id="d65533e631" class="indexterm-anchor"></a><a id="d65533e635" class="indexterm-anchor"></a><span class="bold"><span class="italic">recoverObject</span>::=</span></p>
<div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-8DCC3752-98AF-42A1-9424-BB3AA7E55921"><img width="626" height="421" src="img/GUID-5DB380A7-9329-45A9-89F5-3C3906971002-default.gif" alt="Description of GUID-5DB380A7-9329-45A9-89F5-3C3906971002-print.eps follows" title="Description of GUID-5DB380A7-9329-45A9-89F5-3C3906971002-print.eps follows"/><br/>
<a href="img_text/GUID-5DB380A7-9329-45A9-89F5-3C3906971002-print.htm">Description of the illustration GUID-5DB380A7-9329-45A9-89F5-3C3906971002-print.eps</a></div>
<!-- class="figure" -->
<p>(<span class="italic"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAFEGJI">dbObject</a></span>, <span class="italic"><a href="rcmsubcl022.htm#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__BABEDABD">untilClause::=</a></span>)</p>
<p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAJHCII"><a id="d65533e657" class="indexterm-anchor"></a><span class="bold"><span class="italic">dbObject</span>::=</span></p>
<div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-A5F60A2C-39AF-436E-8DED-C75012D2568B"><img width="444" height="204" src="img/GUID-2019A0F8-3C0F-47D4-8512-3A3D8E33B579-default.gif" alt="Description of GUID-2019A0F8-3C0F-47D4-8512-3A3D8E33B579-print.eps follows" title="Description of GUID-2019A0F8-3C0F-47D4-8512-3A3D8E33B579-print.eps follows"/><br/>
<a href="img_text/GUID-2019A0F8-3C0F-47D4-8512-3A3D8E33B579-print.htm">Description of the illustration GUID-2019A0F8-3C0F-47D4-8512-3A3D8E33B579-print.eps</a></div>
<!-- class="figure" -->
<p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIDHBB"><a id="d65533e670" class="indexterm-anchor"></a><a id="d65533e674" class="indexterm-anchor"></a><span class="bold"><span class="italic">blockObject</span>::=</span></p>
<div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-67388E93-D8D6-47B6-BDA5-0AED88D2E424"><img width="534" height="138" src="img/GUID-C2E37654-1AB6-4B49-8A50-2C968BE4B7CF-default.gif" alt="Description of GUID-C2E37654-1AB6-4B49-8A50-2C968BE4B7CF-print.eps follows" title="Description of GUID-C2E37654-1AB6-4B49-8A50-2C968BE4B7CF-print.eps follows"/><br/>
<a href="img_text/GUID-C2E37654-1AB6-4B49-8A50-2C968BE4B7CF-print.htm">Description of the illustration GUID-C2E37654-1AB6-4B49-8A50-2C968BE4B7CF-print.eps</a></div>
<!-- class="figure" -->
<p>(<span class="italic"><a href="rcmsubcl005.htm#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220__BABCCBBJ">datafileSpec::=</a></span>)</p>
<p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIIEGB"><a id="d65533e692" class="indexterm-anchor"></a><a id="d65533e696" class="indexterm-anchor"></a><span class="bold"><span class="italic">recoverOptionList</span>::=</span></p>
<div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-5918B74D-F768-40DF-A974-DF6569C81C7E"><img width="680" height="829" src="img/GUID-AC4D94FA-9C1B-4B80-9798-7686C34C60C0-default.gif" alt="Description of GUID-AC4D94FA-9C1B-4B80-9798-7686C34C60C0-print.eps follows" title="Description of GUID-AC4D94FA-9C1B-4B80-9798-7686C34C60C0-print.eps follows"/><br/>
<a href="img_text/GUID-AC4D94FA-9C1B-4B80-9798-7686C34C60C0-print.htm">Description of the illustration GUID-AC4D94FA-9C1B-4B80-9798-7686C34C60C0-print.eps</a></div>
<!-- class="figure" -->
<p>(<span class="italic"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFADCCJE">remapTableList::=</a></span>, <span class="italic"><a href="rcmsubcl019.htm#GUID-146EDBEE-BCED-4BD4-A720-8E51AA8DC577__BABHAICB">sizeSpec::=</a></span>)</p>
<p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFADCCJE"><span class="bold"><span class="italic">remapTableList</span>::=</span></p>
<div class="figure" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-F3F8F791-01F9-4786-988A-59C86673D5FF"><img width="763" height="77" src="img/GUID-D3878820-F94A-4431-93AA-215E40B150E3-default.gif" alt="Description of GUID-D3878820-F94A-4431-93AA-215E40B150E3-print.eps follows" title="Description of GUID-D3878820-F94A-4431-93AA-215E40B150E3-print.eps follows"/><br/>
<a href="img_text/GUID-D3878820-F94A-4431-93AA-215E40B150E3-print.htm">Description of the illustration GUID-D3878820-F94A-4431-93AA-215E40B150E3-print.eps</a></div>
<!-- class="figure" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Semantics</p>
<p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBHDECB"><span class="bold"><span class="italic">recover</span></span></p>
<div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-BAD26656-02EE-4DAC-8BA0-8CBFF972BBF7">
<table class="cellalignment1044" summary="Describes RECOVER command parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d65533e740">Syntax Element</th>
<th class="cellalignment1052" id="d65533e743">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e748" headers="d65533e740">
<p><code class="codeph">DEVICE&nbsp;TYPE</code> <span class="italic"><code class="codeph"><a href="rcmsubcl007.htm#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e748 d65533e743">
<p>Allocates automatic channels for the specified device type only. For example, if you configure automatic disk and tape channels, and if you issue <code class="codeph">RECOVER DEVICE TYPE DISK</code>, then RMAN allocates only disk channels.</p>
<p>You configure a device type with the <code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> <code class="codeph">DEVICE TYPE</code> command (except for <code class="codeph">DISK</code>, which is preconfigured) before specifying the <code class="codeph">DEVICE TYPE</code> option.</p>
<p><span class="bold">Note:</span> You cannot manually allocate channels and then run <code class="codeph">RECOVER DEVICE TYPE</code>.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsubcl007.htm#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e797" headers="d65533e740">
<p><span class="italic"><code class="codeph"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDBIFBF">recoverSpec</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e797 d65533e743">
<p>Specifies the type of object being recovered.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDBIFBF"><span class="bold"><span class="italic">recoverSpec</span></span></p>
<div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-5CA85DE2-B4F2-4844-9C6E-32A85D645F06">
<table class="cellalignment1044" summary="Describes RECOVER command recoverSpec parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d65533e818">Syntax Element</th>
<th class="cellalignment1052" id="d65533e821">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e826" headers="d65533e818">
<p><span class="italic"><code class="codeph"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBIGJEH">recoverObject</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e826 d65533e821">
<p>Specifies the type of object being recovered.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e836" headers="d65533e818">
<p><span class="italic"><code class="codeph"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDCAGGA">blockObject</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e836 d65533e821">
<p>Specifies the blocks to be recovered with block media recovery.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e846" headers="d65533e818">
<p><span class="italic"><code class="codeph"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__I999383">recoverOptionList</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e846 d65533e821">
<p>Specifies recovery options.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBIGJEH"><span class="bold"><span class="italic">recoverObject</span></span></p>
<p>This subclause specifies which files to recover. Refer to <span class="italic"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDECJGE">recoverObject::=</a></span> for the syntax diagram.</p>
<div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-F4C3820B-534E-4F16-BF3C-768698D33D91">
<table class="cellalignment1044" summary="Describes RECOVER command recoverObject parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d65533e873">Syntax Element</th>
<th class="cellalignment1052" id="d65533e876">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e881" headers="d65533e873">
<p><code class="codeph">COPY&nbsp;OF</code> <span class="italic"><code class="codeph"><a href="rcmsubcl006.htm#GUID-C5C5EC3A-1B4E-4591-8E70-715E4BDC9FF8">dbObject</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e881 d65533e876">
<p>Applies incremental backups to the specified image copy to roll it forward to any time equal to or before the most recent incremental backup of the file. The existing image copy is overwritten and remains in a fuzzy state during the recovery. RMAN makes an autobackup after recovering the image copy.</p>
<p>This command updates a data file copy and is <span class="italic">not</span> a media recovery of a current database file. This command is meant to be used with the <code class="codeph">BACKUP ... FOR RECOVER OF COPY</code> syntax to implement a strategy using incrementally updated backups.</p>
<p>The following requirements must be met:</p>
<ul style="list-style-type: disc;">
<li>
<p>At least one copy of each data file that you are recovering must exist.</p>
</li>
<li>
<p>Incremental backups taken after the image copy that you are recovering must exist.</p>
</li>
</ul>
<p>RMAN selects one suitable copy if there are multiple possible copies to which the incremental backups can be applied to carry out the operation.</p>
<p><span class="bold">Note:</span> RMAN issues a warning (not an error) if it cannot recover to the specified time because no incremental backups are available.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e919" headers="d65533e873">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;WITH TAG</code> <span class="italic"><code class="codeph">tag_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e919 d65533e876">
<p>Specifies a tag name to identify the image copy to be rolled forward.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e931" headers="d65533e873">
<p><code class="codeph">DATAFILECOPY</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment1053" headers="d65533e931 d65533e876">
<p>Applies incremental backups to the specified data file image copy (see <a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDFCFJI">Example 3-4</a>). Refer to description of <code class="codeph">RECOVER COPY OF</code>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e952" headers="d65533e873">
<p><span class="italic"><code class="codeph"><a href="rcmsubcl006.htm#GUID-C5C5EC3A-1B4E-4591-8E70-715E4BDC9FF8">dbObject</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e952 d65533e876">
<p>Specifies the data blocks that require recovery.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e963" headers="d65533e873">
<p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAIFDBG"><code class="codeph">FOREIGN DATAFILECOPY</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment1053" headers="d65533e963 d65533e876">
<p>Specifies the name of the foreign data file copies that need to be made consistent by applying incremental backups. These foreign data file copies were created during an inconsistent cross-platform backup by using either the <code class="codeph">CONVERT</code> or <code class="codeph">BACKUP</code> command with the <code class="codeph">ALLOW INCONSISTENT</code> clause.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e987" headers="d65533e873">
<p><code class="codeph">FROM BACKUPSET</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment1053" headers="d65533e987 d65533e876">
<p>Specifies the name of the backup set containing the cross-platform incremental backup that must be applied to the foreign data file copies specified using the <a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAIFDBG">FOREIGN DATAFILECOPY &#39;filename&#39;</a> clause.</p>
<p>The following conditions must be satisfied for a cross-platform incremental backup to be applied:</p>
<ul style="list-style-type: disc;">
<li>
<p>The start SCN of each data file in the cross-platform incremental backup must be less than the current checkpoint SCN of the foreign data file copy.</p>
</li>
<li>
<p>The foreign data file copy must not be modified.</p>
<p>For example, it should not have been plugged in to the target database, changed to read-write mode, and then changed back to read-only mode. This changes the database ID and file number in the foreign data file copy header.</p>
</li>
</ul>
<p>If these conditions are not met, an error occurs and the cross-platform incremental backup is not applied to the foreign data file copies.</p>
<p><span class="bold">Note:</span> You cannot apply an incremental backup consisting of multiple backup sets to a set of foreign data files.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1024" headers="d65533e873">
<p><code class="codeph">TABLE</code> <span class="italic"><code class="codeph">schema.table</code></span><code class="codeph">[:</code><span class="italic"><code class="codeph">partition</code></span><code class="codeph">]</code></p>
</td>
<td class="cellalignment1053" headers="d65533e1024 d65533e876">
<p>Specifies the tables or table partitions that must be recovered. The target database must be in read-write mode.</p>
<p>You can assign new names for recovered tables or table partitions in the target database by using the <code class="codeph">REMAP TABLE</code> option.</p>
<p>When the recovered tables are imported into the target database, if a table with the same name exists in the target database, an error message is displayed indicating that the <code class="codeph">REMAP TABLE</code> clause must be used to rename the tables.</p>
<p>When you recover only certain partitions from a partitioned table, each partition is imported into the target database as separate table. If <code class="codeph">REMAP TABLE</code> is not used to rename recovered objects, RMAN names each table by using a concatenation of the table name and partition name. The table names of the recovered objects are in the format <span class="italic"><code class="codeph">tablename_partitionname</code></span>. If a table with this name exists in the target database, RMAN appends _1 to the generated table name. If a table with this name too exists, RMAN appends _2 to the table name, and so on.</p>
<p>See <a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAFEEDH">Example 3-8</a></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1065" headers="d65533e873">
<p><code class="codeph">OF PLUGGABLE DATABASE</code> <span class="italic"><code class="codeph">pdb_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e1065 d65533e876">
<p>In a CDB, the name of a <a id="d65533e1076" class="indexterm-anchor"></a><a id="d65533e1082" class="indexterm-anchor"></a>PDB in which the table or table partition that must be recovered resides. To recover tables or table partitions in a PDB, you must connect to the root as described in <span class="q">&#34;<a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>&#34;</span>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1092" headers="d65533e873">
<p><code class="codeph">SKIP</code></p>
</td>
<td class="cellalignment1053" headers="d65533e1092 d65533e876">
<p>Takes the data files in the specified tablespaces offline before starting media recovery. These files are left offline after the media recovery is complete.</p>
<p>This option is useful for avoiding recovery of tablespaces containing only temporary data or for postponing recovery of some tablespaces.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1102" headers="d65533e873">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;FOREVER</code></p>
</td>
<td class="cellalignment1053" headers="d65533e1102 d65533e876">
<p>Takes the data files offline with the <code class="codeph">DROP</code> option (see <a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDGFJAD">Example 3-3</a>). Use <code class="codeph">SKIP FOREVER TABLESPACE</code> when you intend to drop the specified tablespaces after opening the database with the <code class="codeph">RESETLOGS</code> option.</p>
<p><span class="bold">Note:</span> If you perform incomplete recovery, then <code class="codeph">SKIP</code> requires the <code class="codeph">FOREVER</code> option.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1131" headers="d65533e873"><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></td>
<td class="cellalignment1053" headers="d65533e1131 d65533e876">
<p>Specifies the name of the tablespace to take offline.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1143" headers="d65533e873">
<p><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">pdb_name</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">tablespace_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e1143 d65533e876">
<p>The name of a tablespace in a PDB.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1160" headers="d65533e873">
<p><code class="codeph">SNAPSHOT TIME</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">date_string</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment1053" headers="d65533e1160 d65533e876">
<p>Specifies time-based recovery from a snapshot backup that was created using Storage Snapshot Optimization. date_string is the time at which the snapshot was completed and is specified in RMAN <code class="codeph">TIME</code> format (defined by <code class="codeph">NLS_DATE_FORMAT</code> environment variable).</p>
<p>You can combine <code class="codeph">SNAPSHOT TIME</code> with <code class="codeph">UNTIL TIME</code> or <code class="codeph">UNTIL SCN</code> to do a database point-in-time recovery (DBPITR). However, you can only do a DBPITR to a time or an SCN greater than specified snapshot completion time.</p>
<p><span class="bold">See Also:</span> <span class="q">&#34;<a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAJHAJF">Recovery Using Storage Snapshots</a>&#34;</span> for information about the requirements of the snapshot system and how to specify the snapshot time.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1201" headers="d65533e873"><a id="d65533e1202" class="indexterm-anchor"></a><a id="d65533e1206" class="indexterm-anchor"></a><code class="codeph">TO&nbsp;RESTORE&nbsp;POINT</code> <span class="italic"><code class="codeph">restore_point_name</code></span></td>
<td class="cellalignment1053" headers="d65533e1201 d65533e876">
<p>Specifies a restore point for termination of the <code class="codeph">RECOVER</code> command, with the SCN at which the restore point was created as the upper, inclusive limit. Because the limit is inclusive, RMAN selects only files that it can use to recover up to <span class="italic">and including</span> the SCN corresponding to the restore point.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1226" headers="d65533e873">
<p><span class="italic"><code class="codeph"><a href="rcmsubcl022.htm#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A">untilClause</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e1226 d65533e876">
<p>Specifies a past time, SCN, or log sequence number for termination of the <code class="codeph">RECOVER</code> command.</p>
<p>When used with one or more tablespaces, the clause indicates a tablespace point-in-time recovery (TSPITR) operation for the named tablespaces. Do not use this clause with <code class="codeph">RECOVER DATAFILE</code> or for <code class="codeph">RECOVER DATABASE</code> (see <span class="q">&#34;<a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDJBACD">Usage Notes</a>&#34;</span>). After database point-in-time recovery (DBPITR), you must open the database with the <code class="codeph">RESETLOGS</code> option.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsubcl022.htm#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A">untilClause</a></code></span></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAFEGJI"><span class="bold"><span class="italic">dbObject</span></span></p>
<p>This subclause specifies whether to recover the database or a subset of the database. Refer to <span class="italic"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAJHCII">dbObject::=</a></span> for the syntax diagram.</p>
<div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-C00879F3-38C3-4D79-ADBD-DB07E23AA9C9">
<table class="cellalignment1044" summary="Describes dbObject subclause parameters of RECOVER command">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d65533e1281">Syntax Element</th>
<th class="cellalignment1052" id="d65533e1284">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1289" headers="d65533e1281">
<p><code class="codeph">DATABASE</code></p>
</td>
<td class="cellalignment1053" headers="d65533e1289 d65533e1284">
<p>Specifies the entire database (see <a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDGFJAD">Example 3-3</a>). For CDBs, it specifies the entire CDB.</p>
<p>In a CDB, recovers the entire CDB. You connect to the root to backup the whole CDB as described in <span class="q">&#34;<a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>&#34;</span>.</p>
<p>By default, the <code class="codeph">RECOVER DATABASE</code> command does not recover files that are offline normal at the point in time to which the files are being recovered. RMAN omits offline normal files with no further checking.</p>
<p>When recovering after the loss of control files, RMAN automatically updates the control file to point to the actual location of the data files on disk (see <a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDEAEGH">Example 3-5</a>).</p>
<p>If RMAN encounters redo for adding a data file, then RMAN automatically creates a new data file unless the tablespace containing the added data file is skipped during recovery. This situation can arise when a backup control file is restored before recovery and the backup control file does not contain a record of the recently-added data file.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1316" headers="d65533e1281">
<p><code class="codeph">DATABASE ROOT</code></p>
</td>
<td class="cellalignment1053" headers="d65533e1316 d65533e1284">
<p>Specifies only <a id="d65533e1323" class="indexterm-anchor"></a><a id="d65533e1327" class="indexterm-anchor"></a>the root in a CDB. Connect to the root as described in <span class="q">&#34;<a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>&#34;</span>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1337" headers="d65533e1281">
<p><code class="codeph">PLUGGABLE DATABASE</code> <span class="italic"><code class="codeph">pdb_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e1337 d65533e1284">
<p>Specifies one or more <a id="d65533e1349" class="indexterm-anchor"></a><a id="d65533e1353" class="indexterm-anchor"></a>PDBs in a CDB. No other PDBs are affected; they can remain open and operational. Use a comma-delimited list to specify multiple PDBs. To use this clause, you must connect to the root.</p>
<p>Performing complete recovery does not require you to connect to the root. You connect to the root to perform any of the following operations for PDBs: point-in-time recovery, table recovery, TSPITR, or duplication. To connect to the root or a PDB, see <span class="q">&#34;<a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>&#34;</span>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1365" headers="d65533e1281">
<p><code class="codeph">DATAFILE</code> <span class="italic"><code class="codeph"><span class="codeinlineitalic"><a href="rcmsubcl005.htm#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></span></code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e1365 d65533e1284">
<p>Specifies a list of one or more data files by either file name or absolute data file number.</p>
<p>The target database must be mounted or open. If the database is open, then the data files to be recovered must be offline.</p>
<p>If you are not using a recovery catalog, then the file name must be the name of the data file as recorded in the control file. If you are using a recovery catalog, then the file name of the data file must be the most recent name recorded in the catalog, even if the name in the control file has been updated more recently. For example, assume that a data file was renamed in the control file, but the instance fails before you resynchronize the catalog. Specify the old name of the data file in the <code class="codeph"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code> command because this is the name recorded in the catalog.</p>
<p><span class="bold">Note:</span> You cannot arbitrarily recover individual data files to different points in time, although you can recover the whole database to a single point in time or recover wholly contained tablespaces to a point in time different from the rest of the database (TSPITR). For more information on TSPITR, see the procedure described in <a class="olink BRADV009" target="_blank" href="../BRADV/rcmtspit.htm#BRADV009"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a>.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsubcl005.htm#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1407" headers="d65533e1281"><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></td>
<td class="cellalignment1053" headers="d65533e1407 d65533e1284">
<p>Specifies a list of one or more tablespaces. The target database must be mounted or open. If the database is open, then the tablespaces to be recovered must be offline.</p>
<p>When connected to the root in a <a id="d65533e1419" class="indexterm-anchor"></a><a id="d65533e1425" class="indexterm-anchor"></a>CDB, specifies the tablespaces in the root. Specifies the names of tablespaces in a PDB when connected to a PDB.</p>
<p>In a CDB, specifies the name of a tablespace in the root when connected to the root, and specifies the name of a tablespace in a PDB when connected to a PDB.</p>
<p><span class="bold">Note:</span> If the RMAN encounters redo for adding a data file, then RMAN automatically creates a new data file. This situation can arise when a backup control file is restored before recovery and the backup control file does not contain a record of the recently-added data file.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1439" headers="d65533e1281">
<p><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">pdb-name</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">tablespace_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e1439 d65533e1284">
<p>The name of the tablespace in a PDB. Multiple PDBs can have tablespaces with the same name. A qualifier before the name uniquely identifies the tablespace. This syntax is needed only when connected to the root. When connected directly to a PDB, use <code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span>. <span class="italic"><code class="codeph">pdb-name</code></span> is the name of a PDB.</p>
<p>See the previous description for <code class="codeph">TABLESPACE</code> for general information.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDCAGGA"><span class="bold"><span class="italic">blockObject</span></span></p>
<p>This subclause specifies the data blocks that require recovery. Refer to <span class="italic"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIDHBB">blockObject::=</a></span> for the syntax diagram. Refer to <span class="q">&#34;<a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBDFJFG">Prerequisites Specific to RECOVER BLOCK</a>&#34;</span> for prerequisites specific to block media recovery.</p>
<p>You can either use <code class="codeph">RECOVER CORRUPTION LIST</code> to recover all blocks reported in the <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> view, or specify the data file number and block number or the tablespace and data block address (DBA). RMAN can only perform complete recovery of individual blocks.</p>
<p>By default, if Flashback Database is enabled, then RMAN searches the flashback logs for good copies of corrupt blocks. By default, if the target database exists in a Data Guard environment, then <code class="codeph">RECOVER BLOCK</code> command can automatically retrieve blocks from a physical standby database to a primary database and vice-versa.</p>
<div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-FEA4B081-D317-4180-81E6-9054E16ACA7B">
<table class="cellalignment1044" summary="Describes RECOVER command blockObject parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d65533e1506">Syntax Element</th>
<th class="cellalignment1052" id="d65533e1509">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1514" headers="d65533e1506">
<p><a id="d65533e1516" class="indexterm-anchor"></a><a id="d65533e1518" class="indexterm-anchor"></a><code class="codeph">CORRUPTION&nbsp;LIST</code></p>
</td>
<td class="cellalignment1053" headers="d65533e1514 d65533e1509">
<p>Recovers all physically corrupt blocks listed in the <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> view. Block media recovery may not be able to repair all listed logically corrupt blocks. In these cases, alternate recovery methods, such as tablespace point-in-time recovery, or dropping and recreating the affected objects, may repair the corruption.</p>
<p>The <a id="d65533e1532" class="indexterm-anchor"></a><a id="d65533e1534" class="indexterm-anchor"></a><code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> view displays blocks marked corrupt by Oracle Database components such as RMAN commands, <code class="codeph">ANALYZE</code>, SQL queries, and so on. In short, any process that encounters an <a id="d65533e1544" class="indexterm-anchor"></a><a id="d65533e1546" class="indexterm-anchor"></a><code class="codeph">ORA-1578</code> error records the block corruption in this view. The following types of corruption result in rows added to this view:</p>
<ul style="list-style-type: disc;">
<li>
<p>Physical corruption (sometimes called media corruption). The database does not recognize the block at all: the checksum is invalid, the block contains all zeros, or the header and footer of the block do not match.</p>
</li>
<li>
<p>Logical corruption. The block has a valid checksum, the header and footer match, and so forth, but the contents are logically inconsistent.</p>
</li>
</ul>
<p>The view does not record corruptions that can be detected by validating relationships between blocks and segments, but cannot be detected by a check of an individual block.</p>
<p><span class="bold">Note:</span> Any RMAN command that fixes or detects that a block is repaired updates <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>. For example, RMAN updates the repository at the end of successful block media recovery. If a <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code>, <code class="codeph"><a href="rcmsynta2008.htm#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code>, or <code class="codeph"><a href="rcmsynta2025.htm#GUID-ECE57997-40CE-4029-A434-320441D2AD1E">VALIDATE</a></code> command detects that a block is no longer corrupted, then it removes the repaired block from the view.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1585" headers="d65533e1506">
<p><code class="codeph">DATAFILE&nbsp;</code><span class="italic"><code class="codeph"><a href="rcmsubcl005.htm#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span></p>
<p><code class="codeph">BLOCK</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">TO</code> <span class="italic"><code class="codeph">integer</code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e1585 d65533e1509">
<p>Recovers an individual data block or set of data blocks within a data file. It can copy blocks from either a standby or a primary database. The <code class="codeph">TO</code> range is inclusive, so that <code class="codeph">BLOCK 10 TO BLOCK 20</code> includes both block 10 and block 20.</p>
<p>Block media recovery is useful when the data loss or corruption applies to a small number of blocks rather than to an entire data file. Typically, block corruption is reported in error messages in trace files or by the <code class="codeph"><a href="rcmsynta003.htm#GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C">ADVISE FAILURE</a></code> command. Block-level data loss usually results from:</p>
<ul style="list-style-type: disc;">
<li>
<p>I/O errors causing minor data loss</p>
</li>
<li>
<p>Memory corruptions that get written to disk</p>
</li>
</ul>
<p>If you do not specify an option from <span class="italic"><code class="codeph"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__I999383">recoverOptionList</a></code></span>, and if Flashback Database is enabled on the database, then <code class="codeph">RECOVER BLOCK</code> first searches the flashback logs and then the backups for a good version of the block to restore.</p>
<p>Blocks marked media corrupt are not accessible until recovery completes.</p>
<p><span class="bold">Note:</span> You can only perform complete recovery of individual blocks. In other words, you cannot stop recovery before all redo has been applied to the block.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsubcl005.htm#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1658" headers="d65533e1506"><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span> <code class="codeph">DBA</code> <span class="italic"><code class="codeph">integer</code></span></td>
<td class="cellalignment1053" headers="d65533e1658 d65533e1509">
<p>Specifies the tablespace name or number containing the corrupt blocks and the data block address (DBA) of the corrupt block. You can only perform block media recovery on corrupt blocks.</p>
<p><span class="bold">Note:</span> The data file header block (block 1) cannot be recovered.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1680" headers="d65533e1506">
<p><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">pdb-name</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">tablespace_name</code></span> <code class="codeph">DBA</code> <span class="italic"><code class="codeph">integer</code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e1680 d65533e1509">
<p>The name of the tablespace in a PDB. Multiple PDBs can have tablespaces with the same name. A qualifier before the name uniquely identifies the tablespace. <span class="italic"><code class="codeph">pdb-name</code></span> is the name of a PDB.</p>
<p>See the previous description of <code class="codeph">TABLESPACE</code> for general information.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__I999383"><span class="bold"><span class="italic">recoverOptionList</span></span></p>
<p>This subclause specifies various recovery options. Refer to <span class="italic"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDIIEGB">recoverOptionList::=</a></span> for the syntax diagram.</p>
<div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-B6882697-4195-4B85-8FB3-E38351AF4A86">
<table class="cellalignment1044" summary="Describes RECOVER command recoverOptionList parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d65533e1730">Syntax Element</th>
<th class="cellalignment1052" id="d65533e1733">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1738" headers="d65533e1730">
<p><code class="codeph">ALLOW</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">CORRUPTION</code></p>
</td>
<td class="cellalignment1053" headers="d65533e1738 d65533e1733">
<p>Specifies the number of corrupt blocks that can be tolerated while allowing recovery to proceed. You can set this parameter in case of redo log corruption.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1753" headers="d65533e1730">
<p><code class="codeph">ARCHIVELOG&nbsp;TAG</code> <span class="italic"><code class="codeph">tag_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e1753 d65533e1733">
<p>Specifies the tag for an archived log backup to be used during recovery. Tag names are not case sensitive and display in all uppercase. If the tagged backup does not contain all the necessary archived redo log files for recovery, then RMAN uses logs or incremental backups as needed from whatever is available.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1765" headers="d65533e1730"><code class="codeph">AUXILIARY&nbsp;DESTINATION</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">location</code></span><code class="codeph">&#39;</code></td>
<td class="cellalignment1053" headers="d65533e1765 d65533e1733">
<p>Specifies a location where auxiliary set data files, control files, and online redo logs are created during TSPITR if another location for an individual file is not explicitly specified.</p>
<p>If you do not specify <code class="codeph">AUXILIARY DESTINATION</code> for a TSPITR, then you must specify the naming of individual auxiliary set data files, control files, and online redo logs before executing <code class="codeph">RECOVER TABLESPACE</code> with the <code class="codeph">UNTIL</code> clause. Otherwise, TSPITR fails.</p>
<p>While performing point-in-time recovery of PDBs, if no auxiliary destination is specified, then the fast recovery area is used as the auxiliary destination. When an auxiliary destination is not specified and a fast recovery area is not configured, the recovery of the PDB fails.</p>
<p><span class="bold">See also:</span> The chapter on TSPITR in <a class="olink BRADV009" target="_blank" href="../BRADV/rcmtspit.htm#BRADV009"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for more details about the auxiliary destination</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1802" headers="d65533e1730">
<p><code class="codeph">CHECK&nbsp;LOGICAL</code></p>
</td>
<td class="cellalignment1053" headers="d65533e1802 d65533e1733">
<p>Tests data and index blocks that pass physical corruption checks for logical corruption, for example, corruption of a row piece or index entry. If RMAN finds logical corruption, then it logs the block in the <code class="codeph">alert.log</code> and server session trace file.</p>
<p>The <code class="codeph"><a href="rcmsynta2014.htm#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">MAXCORRUPT</code> setting represents the total number of physical and logical corruptions permitted on a file. By default, <code class="codeph">MAXCORRUPT</code> is <code class="codeph">0</code>, so that if any corrupt blocks exist, media recovery fails. If recovery including corrupt blocks is permissible, then set <code class="codeph">MAXCORRUPT</code> to the smallest number of corrupt blocks that causes media recovery to fail. For example, to tolerate one corrupt block, set <code class="codeph">MAXCORRUPT</code> to 1.</p>
<p>If the total number of physical and logical corruptions detected for a file is less than its <code class="codeph">MAXCORRUPT</code> setting, then the RMAN command completes and the database populates <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> with corrupt block ranges. Otherwise, the command terminates without populating <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1847" headers="d65533e1730">
<p><code class="codeph">DATAPUMP DESTINATION</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">datapump_destination</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment1053" headers="d65533e1847 d65533e1733">
<p>Specifies the location of the Data Pump export dump file that contains the tables or table partitions that are recovered from an RMAN backup.</p>
<p>If you do not specify a Data Pump destination, RMAN creates the export dump file in the destination indicated by <code class="codeph">AUXILARY DESTINATION</code>. If no auxiliary destination is specified, RMAN creates the dump file in a default operating system-specific location. On Linux, the default location is <code class="codeph">$ORACLE_HOME/dbs</code>. On Windows the default location is <code class="codeph">%ORACLE_HOME\database</code>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1874" headers="d65533e1730">
<p><code class="codeph">DELETE&nbsp;ARCHIVELOG</code></p>
</td>
<td class="cellalignment1053" headers="d65533e1874 d65533e1733">
<p>Deletes archived redo log files restored from backups or copies that are no longer needed. RMAN does not delete archived redo log files that were on disk before the <code class="codeph">RESTORE</code> command started. If you do not specify <code class="codeph">MAXSIZE</code>, then RMAN deletes restored archived redo log files as they are applied.</p>
<p><span class="bold">Note:</span> If archived redo log files are restored to the fast recovery area, then the <code class="codeph">DELETE ARCHIVELOG</code> option is enabled by default.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1895" headers="d65533e1730">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;MAXSIZE</code> <span class="italic"><code class="codeph">sizeSpec</code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e1895 d65533e1733">
<p>Does not use more than <span class="italic"><code class="codeph">sizeSpec</code></span> amount of disk space for restored archived redo log files. If recovery requires the restore of a log larger than the <code class="codeph">MAXSIZE</code> value, then RMAN reports an error indicating that you must increase the <code class="codeph">MAXSIZE</code> value. If <code class="codeph">MAXSIZE</code> is smaller than the backup set containing the logs, then RMAN must read the backup set more than once to extract the logs. In this situation, RMAN issues a warning to increase <code class="codeph">MAXSIZE</code>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1923" headers="d65533e1730">
<p><code class="codeph">DUMP FILE</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment1053" headers="d65533e1923 d65533e1733">
<p>Specifies the name of the Data Pump export dump file that contains the recovered tables or table partitions. If you do not specify a name for the dump file, RMAN assigns a default name based on the operating system of the target database. The default name is <code class="codeph">tspitr_</code><span class="italic"><code class="codeph">SID-of-clone_n.dmp</code></span> where <span class="italic"><code class="codeph">SID-of-clone</code></span> is the Oracle SID of the auxiliary database used by RMAN for recovery and <span class="italic"><code class="codeph">n</code></span> is a randomly-generated number. The dump file is created in the location specified by <code class="codeph">DATAPUMP DESTINATION</code>.</p>
<p>If <code class="codeph">DATAPUMP DESTINATION</code> contains a file with the name specified in <code class="codeph">DUMP FILE</code>, the recovery process fails.</p>
<p><span class="bold">See Also:</span> <a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBHIFDB">DATAPUMP DESTINATION</a></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1970" headers="d65533e1730">
<p><code class="codeph">EXCLUDE&nbsp;FLASHBACK&nbsp;LOG</code></p>
</td>
<td class="cellalignment1053" headers="d65533e1970 d65533e1733">
<p>Does not search the flashback logs for blocks to restore. By default, RMAN searches the flashback logs if Flashback Database is enabled.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1978" headers="d65533e1730">
<p><code class="codeph">EXCLUDE&nbsp;STANDBY</code></p>
</td>
<td class="cellalignment1053" headers="d65533e1978 d65533e1733">
<p>Does not search a physical standby database for blocks to restore. By default, in a Data Guard environment RMAN searches the blocks from a physical standby database.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1986" headers="d65533e1730">
<p><code class="codeph">FROM&nbsp;BACKUPSET</code></p>
</td>
<td class="cellalignment1053" headers="d65533e1986 d65533e1733">
<p>Specifies that only backup sets are restored.This clause is supported only while performing block media recovery. The <code class="codeph">RECOVER ... BLOCK</code> command is used to perform block media recovery.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e1998" headers="d65533e1730">
<p><code class="codeph">FROM&nbsp;DATAFILECOPY</code></p>
</td>
<td class="cellalignment1053" headers="d65533e1998 d65533e1733">
<p>Restores only data file image copies.</p>
<p>This clause is supported only while performing block media recovery. The <code class="codeph">RECOVER ...</code> <code class="codeph">BLOCK</code> command is used to perform block media recovery.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2013" headers="d65533e1730">
<p><code class="codeph">FROM PLATFORM</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">platform</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment1053" headers="d65533e2013 d65533e1733">
<p>Specifies the name of the source platform on which the cross-platform backup was created. The platform name specified must match the platform identifier stored in the cross-platform backup header.</p>
<p>This clause is required when conversion is performed on the destination database. If conversion is performed on the source database (by using the <code class="codeph">TO PLATFORM</code> clause in the <code class="codeph">BACKUP</code> command), then this clause is optional. When this clause is omitted, you can still recover a cross-platform backup by specifying the <code class="codeph">FOREIGN DATAFILECOPY</code> clause with the <code class="codeph">FROM BACKUPSET</code> clause.</p>
<p><span class="bold">Note:</span> Cross-platform data transportation using backup sets is supported starting with Oracle Database 12<span class="italic">c</span> Release 1 (12.1).</p>
<p>See <a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAIFDBG">FOREIGN DATAFILECOPY &#39;filename&#39;</a>.</p>
<p><span class="bold">See Also:</span> <a class="olink BRADV" target="_blank" href="../BRADV/toc.htm"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for more information about source and destination platform conversion.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2064" headers="d65533e1730">
<p><code class="codeph">FROM SERVICE</code> <span class="italic"><code class="codeph">service_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e2064 d65533e1733">
<p>Recovers data files using backup sets that are transferred, over the network, from a remote database. <span class="italic"><code class="codeph">service_name</code></span> specifies the service name of the remote database.</p>
<p>See <span class="q">&#34;<a href="rcmsynta2008.htm#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CFAFGIJJ">Restoring Data Files and Control Files Using Files from a Remote Host</a>&#34;</span>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2086" headers="d65533e1730">
<p><code class="codeph">FROM TAG</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">tag_name</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment1053" headers="d65533e2086 d65533e1733">
<p>Specifies the tag for an incremental backup to be used during recovery. If the tagged backup does not contain all the necessary incrementals for recovery, then RMAN uses logs or incremental backups as needed from whatever is available. Tag names are not case sensitive and display in all uppercase.</p>
<p><span class="bold">See Also:</span> <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> to learn how a tag can be applied to an individual copy of a duplexed backup set, and to learn about the default file name format for backup tags</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2111" headers="d65533e1730">
<p><code class="codeph">NOPARALLEL</code></p>
</td>
<td class="cellalignment1053" headers="d65533e2111 d65533e1733">
<p>Does not perform media recovery in parallel. Parallel execution is the default for <code class="codeph">RECOVER</code> (see the description of the <code class="codeph">RECOVER ... PARALLEL</code> option).</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2125" headers="d65533e1730">
<p><code class="codeph">NOREDO</code></p>
</td>
<td class="cellalignment1053" headers="d65533e2125 d65533e1733">
<p>Suppresses the application of redo logs during recovery. Only incremental backups are applied.</p>
<p>One use of this option is to use incremental backups to update full backups of <code class="codeph">NOARCHIVELOG</code> databases (see <a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDHFBFI">Example 3-6</a>). The <code class="codeph">NOREDO</code> options is required if redo logs are not available. If you do not specify <code class="codeph">NOREDO</code> when recovering a <code class="codeph">NOARCHIVELOG</code> database, then RMAN ends recovery and issues an error.</p>
<p><span class="bold">Note:</span> Incremental backups of <code class="codeph">NOARCHIVELOG</code> databases can only be taken after a consistent shutdown.</p>
<p>Another use is to update standby or duplicate databases. Incremental backups created with the <code class="codeph">BACKUP INCREMENTAL FROM SCN</code> command can be applied at a standby or duplicate database. The standby database procedure is described in <a class="olink SBYDB04700" target="_blank" href="../SBYDB/rman.htm#SBYDB04700"><span class="italic">Oracle Data Guard Concepts and Administration</span>.</a></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2166" headers="d65533e1730">
<p><code class="codeph">NOTABLEIMPORT</code></p>
</td>
<td class="cellalignment1053" headers="d65533e2166 d65533e1733">
<p>Specifies that RMAN must not import recovered tables or table partitions into the target database.</p>
<p>The recovered objects are stored in an Data Pump export dump file that is specified using <code class="codeph">DUMP FILE</code> and <code class="codeph" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__BGBHIFDB">DATAPUMP DESTINATION</code>. If these clauses are omitted, the export dump file is created in a default location.</p>
<p>When required, you need to explicitly import the tables or table partitions contained in the export dump file into the target database. Use the Data Pump import utility to import the recovered objects.</p>
<p><span class="bold">Note:</span> You cannot use <code class="codeph">NOTABLEIMPORT</code> with the <code class="codeph">REMAP TABLE</code> or <code class="codeph">REMAP TABLESPACE</code> clauses.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2197" headers="d65533e1730">
<p><code class="codeph">PARALLEL</code></p>
</td>
<td class="cellalignment1053" headers="d65533e2197 d65533e1733">
<p>Specifies parallel recovery (default).</p>
<p>By default, the database uses parallel media recovery to improve performance of the roll forward phase of media recovery. To override the default behavior of performing parallel recovery, use the <code class="codeph">RECOVER</code> with the <code class="codeph">NOPARALLEL</code> option, or <code class="codeph">RECOVER PARALLEL 0</code>.</p>
<p>In parallel media recovery, the database uses a &#34;division of labor&#34; approach to allocate different processes to different data blocks while rolling forward, thereby making the operation more efficient. The number of processes is derived from the <a id="d65533e2217" class="indexterm-anchor"></a><a id="d65533e2219" class="indexterm-anchor"></a><code class="codeph">CPU_COUNT</code> initialization parameter, which by default equals the number of CPUs on the system. For example, if parallel recovery is performed on a system where <code class="codeph">CPU_COUNT</code> is 4, and only one data file is recovered, then four spawned processes read blocks from the data file and apply redo.</p>
<p>Typically, recovery is I/O-bound on reads from and writes to data blocks. Parallelism at the block level may only help recovery performance if it increases total I/Os, for example, by bypassing operating system restrictions on asynchronous I/Os. Systems with efficient asynchronous I/O see little benefit from parallel media recovery.</p>
<p><span class="bold">Note:</span> The <a id="d65533e2235" class="indexterm-anchor"></a><a id="d65533e2237" class="indexterm-anchor"></a><code class="codeph">RECOVERY_PARALLELISM</code> initialization parameter controls instance or crash recovery only. Media recovery is not affected by the value used for <code class="codeph">RECOVERY_PARALLELISM</code>.</p>
<p><span class="bold">See Also:</span> The description of the <code class="codeph">PARALLEL</code> clause in the discussion of <code class="codeph">CREATE TABLE</code> in <a class="olink SQLRF01402" target="_blank" href="../SQLRF/statements_7002.htm#SQLRF01402"><span class="italic">Oracle Database SQL Language Reference</span></a></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2262" headers="d65533e1730">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;</code><span class="italic"><code class="codeph">integer</code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e2262 d65533e1733">
<p>Specifies the <span class="italic"><code class="codeph">integer</code></span> degree of parallelism.</p>
<p>Each parallel thread may use one or two parallel execution servers. Optional.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2279" headers="d65533e1730">
<p><code class="codeph">REMAP TABLE</code></p>
</td>
<td class="cellalignment1053" headers="d65533e2279 d65533e1733">
<p>Renames recovered tables or table partitions in the target database. You cannot remap a table or partition that is not listed in the <code class="codeph">TABLE</code> clause of the <code class="codeph">RECOVER</code> command.</p>
<p>When a recover a partitioned table, if you remap only some partitions in the table, then all the table partitions are imported as separate tables.</p>
<p>Named constraints and indexes are not imported when you use the REMAP option.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2297" headers="d65533e1730">
<p><code class="codeph">REMAP TABLESPACE</code> <span class="italic"><code class="codeph">source_tablespace_name:target_tablespace_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e2297 d65533e1733">
<p>Imports the recovered tables or table partitions into a tablespace that is different from the one to which they belonged in the source database.</p>
<p><code class="codeph">source_tablespace_name</code> refers to the name of the tablespace in which the tables or partitions resided in the source database and <code class="codeph">target_tablespace_name</code> refers to the name of the tablespace into which the tables or table partitions must be imported.</p>
<p>Named constraints and indexes are not imported when you use the REMAP option.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2319" headers="d65533e1730">
<p><code class="codeph">SECTION SIZE</code> <span class="italic"><code class="codeph">sizeSpec</code></span></p>
</td>
<td class="cellalignment1053" headers="d65533e2319 d65533e1733">
<p>Parallelizes the validation by dividing each file into the specified section size.</p>
<p>See <span class="q">&#34;<a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBJCAHI">SECTION&nbsp;SIZE sizeSpec</a>&#34;</span>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2337" headers="d65533e1730">
<p><code class="codeph">SKIP&nbsp;READONLY</code></p>
</td>
<td class="cellalignment1053" headers="d65533e2337 d65533e1733">
<p>Omits read-only files from the recovery.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2345" headers="d65533e1730">
<p><code class="codeph">TEST</code></p>
</td>
<td class="cellalignment1053" headers="d65533e2345 d65533e1733">
<p>Initiates a trial recovery.</p>
<p>A trial recovery is useful if a normal recovery procedure has encountered a problem. It enables the database to look ahead into the redo stream to detect possible problems. The trial recovery applies redo in a way similar to normal recovery, but it does not write changes to disk and it rolls back its changes at the end of the trial recovery.</p>
<p><span class="bold">Note:</span> You can use this clause only if you have restored a backup taken since the last <code class="codeph">RESETLOGS</code> operation. Otherwise, the database returns an error.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2362" headers="d65533e1730"><code class="codeph">UNDO&nbsp;TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></td>
<td class="cellalignment1053" headers="d65533e2362 d65533e1733">
<p>Specifies a list of tablespaces with undo segments at the target time. Only for use with <code class="codeph">RECOVER TABLESPACE</code>.</p>
<p>During TSPITR, RMAN needs information about which tablespaces had undo segments at the TSPITR target time. This information is usually available in the recovery catalog, if one is used.</p>
<p>If there is no recovery catalog, or if the information is not found in the recovery catalog, then RMAN proceeds if the set of tablespaces with undo segments at the target time equals the set of tablespaces with undo segments now. If this assumption is not correct, then TSPITR fails with an error. In such a case, you can use <code class="codeph">UNDO TABLESPACE</code>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2383" headers="d65533e1730">
<p><code class="codeph">USING [COMPRESSED] BACKUPSET</code></p>
</td>
<td class="cellalignment1053" headers="d65533e2383 d65533e1733">
<p>Specifies that the files being recovered must be transferred from the remote database as compressed backup sets, if <code class="codeph">USING COMPRESSED BACKUPSET</code> is used. By default, RMAN transfers files as backup sets. Therefore, even if you do not use the <code class="codeph">USING BACKUPSET</code> clause, the files are transferred as backup sets.The compression algorithm from the RMAN configuration is used to perform compression. You can use a different compression algorithm by running the <code class="codeph">SET COMPRESSION ALGORITHM</code> before your <code class="codeph">RECOVER</code> command.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2403" headers="d65533e1730">
<p><code class="codeph">VALIDATE&nbsp;HEADER</code></p>
</td>
<td class="cellalignment1053" headers="d65533e2403 d65533e1733">
<p>Reports and validates&mdash;but does not restore&mdash;the backups that RMAN could use to restore files needed for the recovery.</p>
<p>When you run <code class="codeph">RECOVER</code> with <code class="codeph">VALIDATE HEADER</code>, RMAN performs the same functions as when you specify the <code class="codeph">RESTORE ...</code> <code class="codeph"><a href="rcmsynta2008.htm#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFAJFI">PREVIEW</a></code> option. However, in addition to listing the files needed for restore and recovery, RMAN validates the backup file headers to determine whether the files on disk or in the media management catalog correspond to the metadata in the RMAN repository.</p>
<p><span class="bold">See Also:</span> The description of the <code class="codeph">RESTORE ...</code> <code class="codeph"><a href="rcmsynta2008.htm#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFAJFI">PREVIEW</a></code> option</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAGEBEI">
<p class="subhead1"><span class="italic">remapTableList</span></p>
</div>
<!-- class="section" -->
<div class="tblformalwide" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-170D876A-CABB-4A02-BC24-C35E8DE2C371">
<table class="cellalignment1044" summary="Element descriptions for RECOVER remapTableList">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d65533e2448">Syntax Element</th>
<th class="cellalignment1052" id="d65533e2451">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2456" headers="d65533e2448">
<p><code class="codeph">schema</code></p>
</td>
<td class="cellalignment1053" headers="d65533e2456 d65533e2451">
<p>Name of the schema in the source database</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2464" headers="d65533e2448">
<p><code class="codeph">old_tablename</code></p>
</td>
<td class="cellalignment1053" headers="d65533e2464 d65533e2451">
<p>Name of the table in the source database</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2472" headers="d65533e2448">
<p><code class="codeph">partition</code></p>
</td>
<td class="cellalignment1053" headers="d65533e2472 d65533e2451">
<p>Name of the table partition in the source database</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d65533e2480" headers="d65533e2448">
<p><code class="codeph">new_tablename</code></p>
</td>
<td class="cellalignment1053" headers="d65533e2480 d65533e2451">
<p>Name of the table in the target database, after the table has been recovered</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p class="subhead1">Examples</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-BA087714-AD22-48A1-AA29-8D55298AFE99">
<p class="titleinexample">Example 3-1 Recovering a Tablespace in an Open Database</p>
<p><a id="d65533e2494" class="indexterm-anchor"></a><a id="d65533e2496" class="indexterm-anchor"></a>Assume that the disk containing the data files for tablespace <code class="codeph">users</code> becomes unavailable because of a hardware error, but is repaired after a few minutes. This example takes tablespace <code class="codeph">users</code> offline, uses automatic channels to restore the data files to their default location and recover them (deleting the logs that it restored from tape), then brings the tablespace back online.</p>
<pre dir="ltr">ALTER TABLESPACE users OFFLINE IMMEDIATE;
RESTORE TABLESPACE users;
RECOVER TABLESPACE users DELETE ARCHIVELOG MAXSIZE 2M;
ALTER TABLESPACE users ONLINE;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-A03F2C8D-C33B-4E77-8D25-F5DCE6646BB6">
<p class="titleinexample">Example 3-2 Recovering Data Files Restored to New Locations</p>
<p><a id="d65533e2511" class="indexterm-anchor"></a>This example uses the preconfigured disk channel and manually allocates one media management channel to use data file copies on disk and backups on tape, and restores a data file in tablespace <code class="codeph">USERS</code> to a different location.</p>
<pre dir="ltr">RUN
{  
  ALLOCATE CHANNEL ch1 DEVICE TYPE sbt;  
  ALTER TABLESPACE users OFFLINE IMMEDIATE;  
  SET NEWNAME FOR DATAFILE &#39;/disk1/oradata/prod/users01.dbf&#39; 
    TO &#39;/disk2/users01.dbf&#39;;
  RESTORE TABLESPACE users;
  SWITCH DATAFILE ALL;
  RECOVER TABLESPACE users;
  ALTER TABLESPACE users ONLINE;
}
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDGFJAD">
<p class="titleinexample">Example 3-3 Performing DBPITR with a Backup Control File and Recovery Catalog</p>
<p><a id="d65533e2525" class="indexterm-anchor"></a>Assume that all data files, all control files, and archived redo log 58 were lost due to a disk failure. Also assume that you do not have incremental backups. You must recover the database with available archived redo log files. You do not need to restore tablespace <code class="codeph">TOOLS</code> because it has been read-only since before the most recent backup. After connecting RMAN to the target database and recovery catalog, issue the following commands:</p>
<pre dir="ltr">STARTUP FORCE NOMOUNT;
RUN
{  
  SET UNTIL SEQUENCE 40 THREAD 1;  # Recover database until log sequence 40 
  RESTORE CONTROLFILE;
  ALTER DATABASE MOUNT;
  RESTORE DATABASE SKIP TABLESPACE tools;
  RECOVER DATABASE SKIP TABLESPACE tools;
}
ALTER DATABASE OPEN RESETLOGS;
</pre>
<p>RMAN automatically skips the restore and recovery of data file <code class="codeph">8</code>, which is the data file in the read-only tablespace. The following portion of sample output indicates the skip:</p>
<pre dir="ltr">using channel ORA_DISK_1
allocated channel: ORA_SBT_TAPE_1
channel ORA_SBT_TAPE_1: SID=104 device type=SBT_TAPE
channel ORA_SBT_TAPE_1: Oracle Secure Backup
 
skipping datafile 8; already restored to file /disk1/oradata/prod/tools01.dbf
channel ORA_DISK_1: starting datafile backup set restore
.
.
.
Finished restore at 19-FEB-13 

Starting recover at 19-FEB-13
using channel ORA_DISK_1
using channel ORA_SBT_TAPE_1
datafile 8 not processed because file is read-only
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDFCFJI">
<p class="titleinexample">Example 3-4 Incrementally Updating Backups</p>
<p><a id="d65533e2547" class="indexterm-anchor"></a><a id="d65533e2551" class="indexterm-anchor"></a>By incrementally updating backups, you can avoid the overhead of making full image copy backups of data files, while also minimizing time required for media recovery of your database. This example enables you to recover to any SCN within the previous week, but enables you to avoid having to apply more than one day of redo.</p>
<p>Assume you run the following script daily. On first execution, the script creates an image copy backup of the database on disk with the specified tag. On the second through the seventh executions, the script creates a level 1 differential backup of the database. On the eighth and all subsequent executions, RMAN applies the level 1 incremental to the data file copy made 7 days ago and then makes a new level 1 backup with the changes from the previous day.</p>
<pre dir="ltr">RUN
{
  RECOVER COPY OF DATABASE 
    WITH TAG &#39;incr_update&#39; 
    UNTIL TIME &#39;SYSDATE - 7&#39;;
  BACKUP
    INCREMENTAL LEVEL 1 
    FOR RECOVER OF COPY WITH TAG &#39;incr_update&#39;
    DATABASE;
}
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDEAEGH">
<p class="titleinexample">Example 3-5 Recovery from Loss of a Control File on a Standby Database</p>
<p><a id="d65533e2564" class="indexterm-anchor"></a>Assume that the standby database <code class="codeph">dgprod3</code> control files are lost because of a media failure. The primary and standby database share SBT storage. A backup of the primary database control file exists on tape.</p>
<p>You start the RMAN client and connect to <code class="codeph">dgprod3</code> as <code class="codeph">TARGET</code> and connect to the recovery catalog. The following RMAN commands restore a control file that is usable by the standby database, update the file names to existing files on disk, and recover the standby database:</p>
<pre dir="ltr">RESTORE CONTROLFILE;
ALTER DATABASE MOUNT;
RECOVER DATABASE;
</pre>
<p>You can then start redo apply on the standby database.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CHDHFBFI">
<p class="titleinexample">Example 3-6 Recovering a NOARCHIVELOG Database</p>
<p><a id="d65533e2588" class="indexterm-anchor"></a><a id="d65533e2592" class="indexterm-anchor"></a><a id="d65533e2596" class="indexterm-anchor"></a>You can perform limited recovery of changes to a database running in <code class="codeph">NOARCHIVELOG</code> mode by applying incremental backups. The incremental backups must be consistent, like all backups of a database run in <code class="codeph">NOARCHIVELOG</code> mode, so you cannot back up the database when it is open.</p>
<p>Assume that you run database <code class="codeph">prod</code> in <code class="codeph">NOARCHIVELOG</code> mode with a recovery catalog. You shut down the database consistently and make a level 0 backup of database <code class="codeph">prod</code> to tape on Sunday afternoon. You shut down the database consistently and make a level 1 differential incremental backup to tape at 3:00 a.m. on Wednesday and Friday.</p>
<p>On Saturday, a media failure destroys half of the data files and all the online redo logs. Because the online logs are lost, you must specify the <code class="codeph">NOREDO</code> option in the <code class="codeph">RECOVER</code> command. Otherwise, RMAN searches for the redo logs after applying the Friday incremental backup and issues an error message when it does not find them.</p>
<p>After connecting RMAN to <code class="codeph">prod</code> and the catalog database, recover as follows:</p>
<pre dir="ltr">STARTUP FORCE NOMOUNT;
RESTORE CONTROLFILE;      # restore control file from consistent backup
ALTER DATABASE MOUNT;
RESTORE DATABASE;         # restore data files from consistent backup
RECOVER DATABASE NOREDO;  # specify NOREDO because online redo logs are lost
ALTER DATABASE OPEN RESETLOGS;
</pre>
<p>The recovered database reflects only changes up through the time of the Friday incremental backup. Because there are no archived redo log files, there is no way to recover changes made after the incremental backup.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-A154A3CC-90CE-4DE1-AF19-54D705893DA6">
<p class="titleinexample">Example 3-7 Recovering All Block Corruption in the Database</p>
<p>This example runs a backup validation to populate the <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> view, then recovers any corrupt blocks recorded in the view. Sample output is included for both commands.</p>
<pre dir="ltr">RMAN&gt; <span class="bold">VALIDATE DATABASE;</span>
 
Starting validate at 19-FEB-13
using channel ORA_DISK_1
channel ORA_DISK_1: starting validation of datafile
channel ORA_DISK_1: specifying datafile(s) for validation
.
.
.
List of Datafiles
=================
File Status Marked Corrupt Empty Blocks Blocks Examined High SCN
---- ------ -------------- ------------ --------------- ----------
1    FAILED 0              4070         57600           555975
  File Name: /disk1/oradata/prod/system01.dbf
  Block Type Blocks Failing Blocks Processed
  ---------- -------------- ----------------
  Data       1              41550
  Index      0              7677
  Other      0              4303
.
.
.
RMAN&gt; <span class="bold">RECOVER CORRUPTION LIST;</span>
 
Starting recover at 19-FEB-13
using channel ORA_DISK_1
allocated channel: ORA_SBT_TAPE_1
channel ORA_SBT_TAPE_1: SID=104 device type=SBT_TAPE
channel ORA_SBT_TAPE_1: Oracle Secure Backup
searching flashback logs for block images until SCN 547548
finished flashback log search, restored 1 blocks
 
starting media recovery
media recovery complete, elapsed time: 00:00:03
 
Finished recover at 19-FEB-13
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__CFAFEEDH">
<p class="titleinexample">Example 3-8 Recovering Tables Partitions from a Backup</p>
<p>This example recovers the partitions <code class="codeph">sales_2009</code> and <code class="codeph">sales_2010</code> from the table <code class="codeph">SALES</code> to the time when the SCN of the target database was 34582. In the source database, the tables are owned by the schema <code class="codeph">SH</code>. While importing these partitions into the target database, the partitions are created as tables named <code class="codeph">historic_sales_2009</code> and <code class="codeph">historic_sales_2010</code>.</p>
<pre dir="ltr">RECOVER TABLE SH.SALES:SALES_2009, SH.SALES:SALES_2010
     UNTIL SCN 34582
     AUXILIARY DESTINATION &#39;/tmp/oracle/recover&#39;
     REMAP TABLE &#39;SH&#39;.&#39;SALES&#39;:&#39;SALES_2009&#39;:&#39;HISTORIC_SALES_2009&#39;, &#39;SH&#39;.&#39;SALES&#39;:&#39;SALES_2010&#39;:&#39;HISTORIC_SALES_2010&#39;;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-9C3F590D-6BC1-481C-BA17-C6F8B8432D2E">
<p class="titleinexample">Example 3-9 Recovering Tables to a Specified Log Sequence and Renaming the Tables</p>
<p>This example uses an auxiliary instance to recover the table <code class="codeph">EMP</code> from the <code class="codeph">SCOTT</code> schema to the time when the log sequence number of the database was 5466. After the <code class="codeph">EMP</code> table is recovered, it is imported into the target database using the name <code class="codeph">MY_EMP</code>.</p>
<pre dir="ltr">RECOVER TABLE SCOTT.EMP
     UNTIL SEQUENCE 5466
     AUXILARY DESTINATION &#39;/tmp/recover&#39;
     REMAP TABLE &#39;SCOTT&#39;.&#39;EMP&#39;:&#39;MY_EMP&#39;;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-CA98040F-9865-4F4F-BAF2-91C518612E95__GUID-12B467A8-372A-4797-AE0D-123DA9C862C0">
<p class="titleinexample">Example 3-10 Recovering Tables to a Specified Time and Into a Different Tablespace</p>
<p>This example recovers tables <code class="codeph">EMP</code> and <code class="codeph">DEPT</code> to the point in time specified by the <code class="codeph">UNTIL TIME</code> clause. The tables were originally part of the <code class="codeph">EXAMPLE</code> tablespace. However, after the recovery operation, they are mapped to the tablespace <code class="codeph">MY_TBS</code> in the target database.</p>
<pre dir="ltr">RECOVER TABLE SCOTT.EMP, SCOTT.DEPT
      UNTIL TIME &#34;TO_CHAR(&#39;12/23/2012 12:00:00&#39;,&#39;mm/dd/yyyy hh24:mi:ss&#39;)&#34;
      AUXILIARY DESTINATION &#39;/tmp/oracle/recover&#39;
      REMAP TABLESPACE &#39;EXAMPLE&#39;:&#39;MY_TBS&#39;;
</pre></div>
<!-- class="example" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1037">
<tr>
<td class="cellalignment1049">
<table class="cellalignment1042">
<tr>
<td class="cellalignment1041"><a href="rcmsynta2.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1041"><a href="rcmsynta2002.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1051">
<table class="cellalignment1040">
<tr>
<td class="cellalignment1041"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1041"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1041"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1041"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1041"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1041"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>