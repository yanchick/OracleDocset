<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-88409"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/ADVISE%20FAILURE"></a><title>ADVISE FAILURE</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="ADVISE FAILURE command, repair options"/>
<meta name="dcterms.created" content="2017-06-08T22:24:36Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Backup and Recovery Reference"/>
<meta name="dcterms.identifier" content="E50791-08"/>
<meta name="dcterms.isVersionOf" content="RCMRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="rcmsynta002.htm" title="Previous" type="text/html"/>
<link rel="Next" href="rcmsynta004.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E50791-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C"></a> <span id="PAGE" style="display:none;">9/152</span> <!-- End Header -->
<a id="RCMRF89984"></a><a id="RCMRF89985"></a><a id="RCMRF89986"></a><a id="RCMRF89987"></a><a id="RCMRF89988"></a><a id="RCMRF89989"></a><a id="RCMRF89990"></a><a id="RCMRF166"></a>
<h1 class="sect1">ADVISE FAILURE</h1>
<div>
<div class="section">
<p class="subhead1">Purpose</p>
<p><a id="d9212e92" class="indexterm-anchor"></a><a id="d9212e94" class="indexterm-anchor"></a><a id="d9212e96" class="indexterm-anchor"></a><a id="d9212e98" class="indexterm-anchor"></a>Use the <code class="codeph">ADVISE FAILURE</code> command to display repair options for the specified failures. This command prints a summary of the failures identified by the Data Recovery Advisor and implicitly closes all open failures that are fixed.</p>
<p>The recommended workflow is to run the following commands in an RMAN session: <code class="codeph"><a href="rcmsynta027.htm#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">FAILURE</code> to display failures, <code class="codeph">ADVISE FAILURE</code> to display repair options, and <code class="codeph"><a href="rcmsynta2004.htm#GUID-8BF5A460-940A-41D0-9A8B-C14A303DEA98">REPAIR FAILURE</a></code> to fix the failures.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Prerequisites</p>
<p>RMAN must be connected to a target database. See the <code class="codeph"><a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code> and <code class="codeph"><a href="rcmsynta2011.htm#GUID-E5514ACB-59F6-4DB0-B4DB-64DF4C87CDE7">RMAN</a></code> commands to learn how to connect to a database as <code class="codeph">TARGET</code>.</p>
<p>The target database instance must be started. The target database must be a single-instance database and must not be a physical standby database, although it can be a logical standby database.</p>
<p>In the current release, Data Recovery Advisor only supports single-instance databases. Oracle Real Application Clusters (Oracle RAC) databases are not supported.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Usage Notes</p>
<p>Data Recovery Advisor verifies repair feasibility before proposing a repair strategy. For example, Data Recovery Advisor checks that all backups and archived redo log files needed for media recovery are available. The <code class="codeph">ADVISE FAILURE</code> output indicates the repair strategy that Data Recovery Advisor considers optimal for a given set of failures. The <code class="codeph">ADVISE FAILURE</code> command can generate both manual and automated repair options.</p>
<p><span class="bold">Manual Repair Options</span></p>
<p>Manual repair options are either mandatory or optional. The optional actions may fix the failures more quickly or easily than automated repairs. For example, Data Recovery Advisor may recommend a failover to a standby database as an alternative to a primary database repair.</p>
<p>In other cases, the only options are manual because automated repairs are not feasible. For example, I/O failures often cannot be repaired automatically. Also, it is sometimes impossible to diagnose a failure because insufficient data is returned by the operating system or the disk subsystem.</p>
<p><span class="bold">Automated Repair Options</span></p>
<p>Each automated repair option is either a single repair or a set of repair steps (see <a href="rcmsynta003.htm#GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__CHDFDEEA" title="Describes the tabular output of the ADVISE FAILURE command">Table 2-1</a> for a description of command output). When a repair option has a script that contains multiple repair steps, <code class="codeph">ADVISE FAILURE</code> generates the script so that the repair steps are in the correct order. A single repair always fixes critical failures together. You must repair critical failures, but you can also repair noncritical failures at the same time. You can repair noncritical failures in a random order, one by one, or in groups.</p>
<p id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__CHDECAJH"><span class="bold">Oracle RAC and Data Recovery Advisor</span></p>
<p>If a data failure brings down all instances of an Oracle RAC database, then you can mount the database in single-instance mode and use Data Recovery Advisor to detect and repair control file, <code class="codeph">SYSTEM</code> data file, and dictionary failures. You can also initiate health checks to test other database components for data failures. This approach does not detect data failures that are local to other cluster instances, for example, an inaccessible data file.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Syntax</p>
<p><span class="bold"><span class="italic">advise::=</span></span></p>
<div class="figure" id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__GUID-19CB6A08-29EC-4C4F-9A13-CD7BD1DFC873"><img width="555" height="197" src="img/GUID-AA8317A8-B493-42D8-887A-8D0A85799761-default.gif" alt="Description of GUID-AA8317A8-B493-42D8-887A-8D0A85799761-print.eps follows" title="Description of GUID-AA8317A8-B493-42D8-887A-8D0A85799761-print.eps follows"/><br/>
<a href="img_text/GUID-AA8317A8-B493-42D8-887A-8D0A85799761-print.htm">Description of the illustration GUID-AA8317A8-B493-42D8-887A-8D0A85799761-print.eps</a></div>
<!-- class="figure" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Semantics</p>
<p id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__CHDFAGJC"><span class="bold"><span class="italic">advise</span></span></p>
<div class="tblformalwide" id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__GUID-1140B04A-81FA-4DBC-B1B6-093C0A4B0A66">
<table class="cellalignment1044" summary="Describes ADVISE FAILURE command parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d9212e208">Syntax Element</th>
<th class="cellalignment1052" id="d9212e211">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d9212e216" headers="d9212e208">
<p><code class="codeph">ADVISE&nbsp;FAILURE</code></p>
</td>
<td class="cellalignment1053" headers="d9212e216 d9212e211">
<p><a id="d9212e222" class="indexterm-anchor"></a><a id="d9212e224" class="indexterm-anchor"></a>Displays information for all <code class="codeph">CRITICAL</code> and <code class="codeph">HIGH</code> priority failures recorded in the automatic diagnostic repository.</p>
<p>You can only use <code class="codeph">ADVISE FAILURE</code> with no options when a <code class="codeph">LIST FAILURE</code> command was previously executed in the current session.</p>
<p><span class="bold">Note:</span> If a new failure has been recorded in the diagnostic repository since the last <code class="codeph"><a href="rcmsynta027.htm#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">FAILURE</code> command in the current RMAN session, then RMAN issues a warning before advising on <code class="codeph">CRITICAL</code> and <code class="codeph">HIGH</code> failures.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d9212e260" headers="d9212e208">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;ALL</code></p>
</td>
<td class="cellalignment1053" headers="d9212e260 d9212e211">
<p>Lists options that repair all open failures together.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d9212e268" headers="d9212e208">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;CRITICAL</code></p>
</td>
<td class="cellalignment1053" headers="d9212e268 d9212e211">
<p>Lists options that repair only critical failures.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d9212e276" headers="d9212e208">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;HIGH</code></p>
</td>
<td class="cellalignment1053" headers="d9212e276 d9212e211">
<p>Lists options that repair only failures with <code class="codeph">HIGH</code> priority.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d9212e287" headers="d9212e208">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;LOW</code></p>
</td>
<td class="cellalignment1053" headers="d9212e287 d9212e211">
<p>Lists options that repair only failures with <code class="codeph">LOW</code> priority.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d9212e298" headers="d9212e208">
<p><code class="codeph">UNKNOWN</code></p>
</td>
<td class="cellalignment1053" headers="d9212e298 d9212e211">
<p>Lists options that repair only failures whose priority cannot be determined until the database is mounted.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d9212e306" headers="d9212e208">
<p><span class="italic"><code class="codeph">&nbsp;&nbsp;&nbsp;failureNumber</code></span></p>
</td>
<td class="cellalignment1053" headers="d9212e306 d9212e211">
<p>Lists options that repair only the specified failures.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d9212e315" headers="d9212e208"><code class="codeph">&nbsp;&nbsp;&nbsp;EXCLUDE&nbsp;FAILURE</code> <span class="italic"><code class="codeph">failureNumber</code></span></td>
<td class="cellalignment1053" headers="d9212e315 d9212e211">
<p>Excludes the specified failures from the list.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">ADVISE FAILURE Command Output</p>
<p>The <code class="codeph">ADVISE FAILURE</code> output includes the <code class="codeph"><a href="rcmsynta027.htm#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">FAILURE</code> output, which is described in <a href="rcmsynta027.htm#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E__CHDIJEIG" title="Describes LIST output for failures">Table 2-27</a>. See <a href="rcmsynta003.htm#GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__CHDICJCI">Example 2-5</a> for sample output.</p>
<p>RMAN presents mandatory and optional manual actions in an unordered list. If manual options exist, then they appear before automated options. <a href="rcmsynta003.htm#GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__CHDFDEEA" title="Describes the tabular output of the ADVISE FAILURE command">Table 2-1</a> describes the output for automated repair options.</p>
<div class="tblformalwide" id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__CHDFDEEA">
<p class="titleintable">Table 2-1 Automated Repair Options</p>
<table class="cellalignment1044" title="Automated Repair Options" summary="Describes the tabular output of the ADVISE FAILURE command">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1072" id="d9212e365">Column</th>
<th class="cellalignment1073" id="d9212e368">Indicates</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1074" id="d9212e373" headers="d9212e365">
<p><code class="codeph">Option</code></p>
</td>
<td class="cellalignment1075" headers="d9212e373 d9212e368">
<p>The identifier for the automated repair option.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1074" id="d9212e381" headers="d9212e365">
<p><code class="codeph">Strategy</code></p>
</td>
<td class="cellalignment1075" headers="d9212e381 d9212e368">
<p>A strategy to fix the failure with the <code class="codeph"><a href="rcmsynta2004.htm#GUID-8BF5A460-940A-41D0-9A8B-C14A303DEA98">REPAIR FAILURE</a></code> command.</p>
<p>The Data Recovery Advisor always presents an automated repair option with no data loss when possible. Automated repair options fall into the following basic categories:</p>
<ul style="list-style-type: disc;">
<li>
<p>Repair with no data loss</p>
</li>
<li>
<p>Repair with data loss, for example, Flashback Database</p>
</li>
</ul>
<p><span class="bold">Note:</span> The <code class="codeph">ADVISE</code> command maps a set of failures to the set of repair steps that Data Recovery Advisor considers to be optimal. When possible, Data Recovery Advisor consolidates multiple repair steps into a single repair. For example, if the database has corrupted data file, missing control file, and lost current redo log group, then Data Recovery Advisor would recommend a single, consolidated repair plan to restore the database and perform point-in-time recovery.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1074" id="d9212e410" headers="d9212e365">
<p><code class="codeph">Repair Description</code></p>
</td>
<td class="cellalignment1075" headers="d9212e410 d9212e368">
<p>A description of the proposed repair. For example, the proposed repair could be to restore and recover data file 17.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1074" id="d9212e418" headers="d9212e365">
<p><code class="codeph">Repair Script</code></p>
</td>
<td class="cellalignment1075" headers="d9212e418 d9212e368">
<p>The location of an editable script with all repair actions and comments. If you do not choose an automated repair, then you can review this script and edit it for use in a manual recovery strategy.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Examples</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__CHDICJCI">
<p class="titleinexample">Example 2-5 Displaying Repair Options for All Failures</p>
<p>This example shows repair options for all failures known to the Recovery Data Advisor. The example indicates two failures: missing data files and a data file with corrupt blocks.</p>
<pre dir="ltr">RMAN&gt; LIST FAILURE;
 
List of Database Failures
=========================
 
Failure ID Priority Status    Time Detected Summary
---------- -------- --------- ------------- -------
142        HIGH     OPEN      23-APR-13     One or more non-system datafiles are missing
101        HIGH     OPEN      23-APR-13     Datafile 1: &#39;/disk1/oradata/prod/system01.dbf&#39; 
                                            contains one or more corrupt blocks
 
RMAN&gt; ADVISE FAILURE;
 
List of Database Failures
=========================
 
Failure ID Priority Status    Time Detected Summary
---------- -------- --------- ------------- -------
142        HIGH     OPEN      23-APR-13     One or more non-system datafiles 
                                            are missing
101        HIGH     OPEN      23-APR-13     Datafile 1: &#39;/disk1/oradata/prod/system01.dbf&#39; 
                                            contains one or more corrupt blocks
 
analyzing automatic repair options; this may take some time
using channel ORA_DISK_1
analyzing automatic repair options complete
 
Mandatory Manual Actions
========================
no manual actions available
 
Optional Manual Actions
=======================
1. If file /disk1/oradata/prod/users01.dbf was unintentionally renamed or moved, restore it
 
Automated Repair Options
========================
Option Repair Description
------ ------------------
1      Restore and recover datafile 28; Perform block media recovery of 
       block 56416 in file 1
  Strategy: The repair includes complete media recovery with no data loss
  Repair script: /disk1/oracle/log/diag/rdbms/prod/prod/hm/reco_660500184.hm
</pre></div>
<!-- class="example" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1037">
<tr>
<td class="cellalignment1049">
<table class="cellalignment1042">
<tr>
<td class="cellalignment1041"><a href="rcmsynta002.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1041"><a href="rcmsynta004.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1051">
<table class="cellalignment1040">
<tr>
<td class="cellalignment1041"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1041"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1041"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1041"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1041"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1041"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>