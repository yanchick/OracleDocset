<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-88460"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/UPGRADE%20CATALOG"></a><title>UPGRADE CATALOG</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="recovery catalog, upgrading versions, UPGRADE CATALOG command"/>
<meta name="dcterms.created" content="2017-06-08T22:24:36Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Backup and Recovery Reference"/>
<meta name="dcterms.identifier" content="E50791-08"/>
<meta name="dcterms.isVersionOf" content="RCMRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="rcmsynta2023.htm" title="Previous" type="text/html"/>
<link rel="Next" href="rcmsynta2025.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E50791-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-E6080FD7-5C15-4659-8D4E-C56E6D9004D1"></a> <span id="PAGE" style="display:none;">60/152</span> <!-- End Header -->
<a id="RCMRF90391"></a><a id="RCMRF90392"></a><a id="RCMRF161"></a>
<h1 class="sect1">UPGRADE CATALOG</h1>
<div>
<div class="section">
<p class="subhead1">Purpose</p>
<p>Use the <code class="codeph">UPGRADE CATALOG</code> command to upgrade a recovery catalog schema from an older version to the version required by the RMAN client.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Prerequisites</p>
<p>RMAN must be connected to the recovery catalog database, which must be open, as the owner of the recovery catalog. You cannot use the <code class="codeph">UPGRADE CATALOG</code> command while connected to a virtual private catalog (see <code class="codeph"><a href="rcmsynta012.htm#GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC">CREATE CATALOG</a></code> command). Only the base catalog can be upgraded.</p>
<p>The recovery catalog must not already be at a version greater than needed by the RMAN executable; otherwise, RMAN issues an error. RMAN displays all error messages generated during the upgrade in the message log.</p>
<p>The Oracle Database 10<span class="italic">g</span>R1 version of the recovery catalog schema requires the <a id="d99218e113" class="indexterm-anchor"></a><a id="d99218e115" class="indexterm-anchor"></a><code class="codeph">CREATE TYPE</code> privilege. If you created the recovery catalog owner in a release before 10<span class="italic">g</span>R1, and if you granted the <a id="d99218e125" class="indexterm-anchor"></a><a id="d99218e127" class="indexterm-anchor"></a><code class="codeph">RECOVERY_CATALOG_OWNER</code> role to this user when the role did not include the <code class="codeph">CREATE TYPE</code> privilege, then you must grant <code class="codeph">CREATE TYPE</code> to this user explicitly before performing the upgrade.</p>
<p>If you are upgrading a recovery catalog to Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2), then you must run the <code class="codeph">dbmsrmansys.sql</code> script that manages recovery catalog privileges. Additionally, if virtual private catalogs are used, then you must run the <code class="codeph">dbmsrmanvpc.sql</code> script that upgrades virtual private catalogs. Starting with Oracle Database 12c Release 1 (12.1.0.2), the recovery catalog database must use Oracle Database Enterprise Edition.</p>
<div class="infoboxnotealso" id="GUID-E6080FD7-5C15-4659-8D4E-C56E6D9004D1__GUID-B53A71C8-0FDE-44A4-94F3-8C8FF2DEF24E">
<p class="notep1">See Also:</p>
<p><a class="olink BRADV" target="_blank" href="../BRADV/toc.htm"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for the steps to upgrade a recovery catalog to Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2)</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Usage Notes</p>
<p>You must enter the <code class="codeph">UPGRADE CATALOG</code> command two consecutive times to confirm the upgrade.</p>
<p>RMAN permits the command to be run if the recovery catalog is already current so that the packages can be re-created if necessary.</p>
<p>If an upgrade to a base recovery catalog requires changes to an existing virtual private catalog, then RMAN makes these changes automatically the next time RMAN connects to that virtual private catalog.</p>
<p>The <code class="codeph">UPGRADE CATALOG</code> command does not run scripts to perform an upgrade. Instead, RMAN sends various SQL DDL statements to the recovery catalog to update the recovery catalog schema with new tables, views, columns, and so on.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Syntax</p>
<p><span class="bold"><span class="italic">upgradeCatalog</span>::=</span></p>
<div class="figure" id="GUID-E6080FD7-5C15-4659-8D4E-C56E6D9004D1__GUID-D2A5C413-B1F7-468B-9978-658B6026A497"><img width="185" height="37" src="img/GUID-20FAB1F5-D2FB-4AC0-9B75-738601B73B7D-default.gif" alt="Description of GUID-20FAB1F5-D2FB-4AC0-9B75-738601B73B7D-print.eps follows" title="Description of GUID-20FAB1F5-D2FB-4AC0-9B75-738601B73B7D-print.eps follows"/><br/>
<a href="img_text/GUID-20FAB1F5-D2FB-4AC0-9B75-738601B73B7D-print.htm">Description of the illustration GUID-20FAB1F5-D2FB-4AC0-9B75-738601B73B7D-print.eps</a></div>
<!-- class="figure" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Semantics</p>
<p>None.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Example</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-E6080FD7-5C15-4659-8D4E-C56E6D9004D1__GUID-57B62991-7867-4C47-9652-B05DF5BF4394">
<p class="titleinexample">Example 3-77 Upgrading a Recovery Catalog</p>
<p>This example connects RMAN to recovery catalog database <code class="codeph">catdb</code> and then upgrades it to a more current version:</p>
<pre dir="ltr">RMAN&gt; CONNECT CATALOG rco@catdb

recovery catalog database Password: <span class="italic">password</span>
connected to recovery catalog database 
PL/SQL package rman.DBMS_RCVCAT version 10.01.00 in RCVCAT database is too old

RMAN&gt; UPGRADE CATALOG;

recovery catalog owner is RCO 
enter UPGRADE CATALOG command again to confirm catalog upgrade 

RMAN&gt; UPGRADE CATALOG;

recovery catalog upgraded to version 11.01.00
DBMS_RCVMAN package upgraded to version 11.01.00
DBMS_RCVCAT package upgraded to version 11.01.00
</pre></div>
<!-- class="example" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1037">
<tr>
<td class="cellalignment1049">
<table class="cellalignment1042">
<tr>
<td class="cellalignment1041"><a href="rcmsynta2023.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1041"><a href="rcmsynta2025.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1051">
<table class="cellalignment1040">
<tr>
<td class="cellalignment1041"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1041"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1041"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1041"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1041"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1041"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>