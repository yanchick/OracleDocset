<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-88420"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/CROSSCHECK"></a><title>CROSSCHECK</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="repositories, validating contents, backups, validating in repository, copies, metadata, CROSSCHECK command, maintSpec subclause, syntax diagram"/>
<meta name="dcterms.created" content="2017-06-08T22:24:36Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Backup and Recovery Reference"/>
<meta name="dcterms.identifier" content="E50791-08"/>
<meta name="dcterms.isVersionOf" content="RCMRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="rcmsynta013.htm" title="Previous" type="text/html"/>
<link rel="Next" href="rcmsynta015.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E50791-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D"></a> <span id="PAGE" style="display:none;">20/152</span> <!-- End Header -->
<a id="RCMRF90126"></a><a id="RCMRF90127"></a><a id="RCMRF90128"></a><a id="RCMRF90129"></a><a id="RCMRF90130"></a><a id="RCMRF90131"></a><a id="RCMRF90132"></a><a id="RCMRF119"></a>
<h1 class="sect1">CROSSCHECK</h1>
<div>
<div class="section">
<p class="subhead1">Purpose</p>
<p>Use the <code class="codeph">CROSSCHECK</code> command to synchronize the physical reality of backups and copies with their logical records in the RMAN repository.</p>
<div class="infoboxnotealso" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-264DD691-3044-47DB-A6FF-944444C8B5CA">
<p class="notep1">See Also:</p>
<p><a class="olink BRADV8171" target="_blank" href="../BRADV/rcmmaint.htm#BRADV8171"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> to learn how to manage database records in the recovery catalog</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Prerequisites</p>
<p>RMAN must be connected to a target database instance, which must be started.</p>
<p>A maintenance channel is not required for a disk cross-check. If you use a media manager and have not configured automatic channels for it, then you must use run <code class="codeph"><a href="rcmsynta005.htm#GUID-6F9887A0-1D48-4332-8E59-6FA2EFE67824">ALLOCATE CHANNEL FOR MAINTENANCE</a></code> before <code class="codeph">CROSSCHECK</code>. For example, if you created a backup on an SBT channel, but have not configured automatic SBT channels for this device, then you must manually allocate an SBT channel before <code class="codeph">CROSSCHECK</code> can check the backup. Furthermore, if you performed backups with different media manager options (pools, servers, libraries, and so on), then you must allocate maintenance channels for each combination.</p>
<p><code class="codeph">CROSSCHECK</code> validates all specified backups and copies, even if they were created in previous database incarnations.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Usage Notes</p>
<p>RMAN always maintains metadata about backups in the control file of every target database on which it performs operations. If you use RMAN with a recovery catalog, then RMAN also maintains the metadata from every registered database in the recovery catalog.</p>
<p>If a backup is on disk, then <code class="codeph">CROSSCHECK</code> determines whether the header of the file is valid. If a backup is on tape, then RMAN queries the RMAN repository for the names and locations of the backup pieces to be checked. RMAN sends this metadata to the target database server, which queries the media management software about the backups. The media management software then checks its media catalog and reports back to the server with the status of the backups.</p>
<p><span class="bold">EXPIRED and AVAILABLE Status</span></p>
<p>You can view the status of <a id="d38298e162" class="indexterm-anchor"></a><a id="d38298e166" class="indexterm-anchor"></a>backup sets and copies recorded in the RMAN repository through <code class="codeph"><a href="rcmsynta027.htm#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code>, <code class="codeph">V$</code> views, or recovery catalog views (if you use RMAN with a catalog). <a href="rcmsynta014.htm#GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__g1039376" title="Describes the status types reported by the CROSSCHECK command">Table 2-4</a> describes the meaning of each status.</p>
<p>The <code class="codeph">CROSSCHECK</code> command only processes files created on the same device type as the channels used for the cross-check. The <code class="codeph">CROSSCHECK</code> command checks only objects marked <code class="codeph">AVAILABLE</code> or <code class="codeph">EXPIRED</code> in the repository by examining the files on disk for <code class="codeph">DISK</code> channels or by querying the <a id="d38298e202" class="indexterm-anchor"></a>media manager for <code class="codeph">sbt</code> channels.</p>
<div class="tblformalwide" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__g1039376">
<p class="titleintable">Table 2-4 Meaning of CROSSCHECK Status</p>
<table class="cellalignment1044" title="Meaning of CROSSCHECK Status" summary="Describes the status types reported by the CROSSCHECK command">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1068" id="d38298e220">Status</th>
<th class="cellalignment1069" id="d38298e223">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1070" id="d38298e228" headers="d38298e220">
<p><code class="codeph">EXPIRED</code></p>
</td>
<td class="cellalignment1071" headers="d38298e228 d38298e223">
<p>Object is not found either in file system (for <code class="codeph">DISK</code>) or in the media manager (for <code class="codeph">sbt</code>). A backup set is <code class="codeph">EXPIRED</code> if any backup piece in the set is <code class="codeph">EXPIRED</code>.</p>
<p>The <code class="codeph">CROSSCHECK</code> command does not delete the repository records of files that it does not find, but updates their repository records to <code class="codeph">EXPIRED</code>. You can run <code class="codeph"><a href="rcmsynta015.htm#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code> <code class="codeph">EXPIRED</code> to remove the repository records for expired files and any existing physical files whose status is <code class="codeph">EXPIRED</code>.</p>
<p>If backups are <code class="codeph">EXPIRED</code>, then you can reexecute the cross-check later and determine whether expired backups are available. This precaution is especially useful when you use RMAN with a media manager. For example, if some backup pieces or copies were erroneously marked as <code class="codeph">EXPIRED</code> because the <code class="codeph">PARMS</code> channel settings were incorrect, then after ensuring that the files really do exist in the media manager, run the <code class="codeph">CROSSCHECK BACKUP</code> command again to restore those files to <code class="codeph">AVAILABLE</code> status.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1070" id="d38298e284" headers="d38298e220">
<p><code class="codeph">AVAILABLE</code></p>
</td>
<td class="cellalignment1071" headers="d38298e284 d38298e223">
<p>Object is available for use by RMAN. For a backup set to be <code class="codeph">AVAILABLE</code>, all backup pieces in the set must have the status <code class="codeph">AVAILABLE</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p><span class="bold">Cross-Checks in a Data Guard Environment</span></p>
<p><span class="q">&#34;<a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJIIGD">RMAN Backups in a Data Guard Environment</a>&#34;</span> explains the difference between the association and accessibility of a backup. In a Data Guard environment, the database that creates a backup or copy is associated with the file. You can use maintenance commands such as <code class="codeph">CHANGE</code>, <code class="codeph"><a href="rcmsynta015.htm#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code>, and <code class="codeph"><a href="rcmsynta014.htm#GUID-07E07E7E-9A29-4901-9739-FFC472029A7D">CROSSCHECK</a></code> for backups when connected to any database in the Data Guard environment if the backups are accessible. In general, RMAN considers tape backups created on any database as accessible to all databases in the environment, whereas disk backups are accessible only to the database that created them.</p>
<p><a id="d38298e319" class="indexterm-anchor"></a>RMAN can only update the status of a backup from <code class="codeph">AVAILABLE</code> to <code class="codeph">EXPIRED</code> or <code class="codeph">DELETED</code> when connected as <code class="codeph">TARGET</code> to the database associated with the backup. If RMAN cannot delete a backup because it is not associated with the target database, then RMAN prompts you to perform the same <code class="codeph">CROSSCHECK</code> operation for the file at the database with which it is associated. In this way RMAN protects against unwanted status changes that result from incorrect SBT configurations.</p>
<p>For example, assume that you connect RMAN as <code class="codeph">TARGET</code> to standby database <code class="codeph">standby1</code> and back it up to tape. If the backup is manually removed from the tape, and if you perform a cross-check of the backup on <code class="codeph">standby2</code>, then RMAN prompts you to run the cross-check on <code class="codeph">standby1</code>. A cross-check on <code class="codeph">standby1</code> updates the status of the tape backup to <code class="codeph">EXPIRED</code> when the media manager reports that the backup has been deleted.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Syntax</p>
<p><span class="bold"><span class="italic">crosscheck</span>::=</span></p>
<div class="figure" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-A4D262E0-E767-43CE-8EE3-91739627781A"><img width="195" height="24" src="img/GUID-BD12C37E-FE02-4529-A932-790E6694C5C2-default.gif" alt="Description of GUID-BD12C37E-FE02-4529-A932-790E6694C5C2-print.eps follows" title="Description of GUID-BD12C37E-FE02-4529-A932-790E6694C5C2-print.eps follows"/><br/>
<a href="img_text/GUID-BD12C37E-FE02-4529-A932-790E6694C5C2-print.htm">Description of the illustration GUID-BD12C37E-FE02-4529-A932-790E6694C5C2-print.eps</a></div>
<!-- class="figure" -->
<p><span class="bold"><span class="italic">maintSpec</span>::=</span></p>
<div class="figure" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-1ADAF578-5647-4856-AE78-2C10C6AC1DCE"><img width="362" height="194" src="img/GUID-78CE780B-74FE-47F7-A520-154DEE1A91E4-default.gif" alt="Description of GUID-78CE780B-74FE-47F7-A520-154DEE1A91E4-print.eps follows" title="Description of GUID-78CE780B-74FE-47F7-A520-154DEE1A91E4-print.eps follows"/><br/>
<a href="img_text/GUID-78CE780B-74FE-47F7-A520-154DEE1A91E4-print.htm">Description of the illustration GUID-78CE780B-74FE-47F7-A520-154DEE1A91E4-print.eps</a></div>
<!-- class="figure" -->
<p>(<span class="italic"><a href="rcmsubcl014.htm#GUID-73596ED4-99FE-45B8-B333-FECC698E1374__BABBEIIJ">listObjList::=</a></span>, <span class="italic"><a href="rcmsubcl002.htm#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__BABJGBFG">archivelogRecordSpecifier::=</a></span>, <span class="italic"><a href="rcmsubcl011.htm#GUID-122E19A7-5BCC-434C-BE2A-9D4F248EA02C__BABHBICI">foreignlogRecordSpecifier::=</a></span>, <span class="italic"><a href="rcmsubcl015.htm#GUID-6AF4DA92-BBBD-4931-96D2-766D9D29EA3F__BABEEGAJ">maintQualifier::=</a></span>, <span class="italic"><a href="rcmsubcl018.htm#GUID-92F09EC0-5E30-47C0-834E-5A24FAE98F14__BABEIAEB">recordSpec::=</a></span>, <span class="italic"><a href="rcmsubcl007.htm#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier::=</a></span>)</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Semantics</p>
<div class="tblformalwide" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-7B928660-5AEB-4F2B-9DE2-94B1A4CF0E65">
<table class="cellalignment1044" summary="Describes the CROSSCHECK command parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1068" id="d38298e417">Syntax Element</th>
<th class="cellalignment1069" id="d38298e420">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1070" id="d38298e425" headers="d38298e417">
<p><span class="italic"><code class="codeph"><a href="rcmsubcl016.htm#GUID-933AD976-5FCC-4684-80BB-264F6FC8A06B">maintSpec</a></code></span></p>
</td>
<td class="cellalignment1071" headers="d38298e425 d38298e420">
<p>Cross-checks backups. For <span class="italic"><code class="codeph">maintSpec</code></span> options, refer to the parameter descriptions in <span class="italic"><code class="codeph"><a href="rcmsubcl016.htm#GUID-933AD976-5FCC-4684-80BB-264F6FC8A06B">maintSpec</a></code></span>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Examples</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-45DD22C0-B5B0-40FE-B993-63E4AD58B1C6">
<p class="titleinexample">Example 2-73 Cross-Checking All Backups and Copies</p>
<p>This example, which assumes that the default configured channel is <code class="codeph">DEVICE TYPE sbt</code>, cross-checks all backups and disk (partial output is included). Because RMAN preconfigures a disk channel, you do not need to manually allocate a disk channel.</p>
<pre dir="ltr">RMAN&gt; CROSSCHECK BACKUP;

allocated channel: ORA_SBT_TAPE_1
channel ORA_SBT_TAPE_1: SID=84 device type=SBT_TAPE
channel ORA_SBT_TAPE_1: Oracle Secure Backup
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=86 device type=DISK
backup piece handle=/disk2/backup/08i9umon_1_1 RECID=7 STAMP=614423319
crosschecked backup piece: found to be &#39;EXPIRED&#39;
backup piece handle=/disk2/backup/09i9umso_1_1 RECID=8 STAMP=614423448
crosschecked backup piece: found to be &#39;EXPIRED&#39;
backup piece handle=/disk1/cfauto/c-26213402-20130213-00 RECID=9 STAMP=614423452
crosschecked backup piece: found to be &#39;AVAILABLE&#39;
backup piece handle=0bi9uo81_1_1 RECID=10 STAMP=614424833
crosschecked backup piece: found to be &#39;AVAILABLE&#39;
backup piece handle=c-26213402-20130213-01 RECID=11 STAMP=614424851
crosschecked backup piece: found to be &#39;AVAILABLE&#39;
.
.
.
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-07E07E7E-9A29-4901-9739-FFC472029A7D__GUID-AF03260C-40DB-4E85-8A07-7BE38F3FB678">
<p class="titleinexample">Example 2-74 Cross-Checking Within a Range of Dates</p>
<p><a id="d38298e464" class="indexterm-anchor"></a><a id="d38298e468" class="indexterm-anchor"></a>This example queries the media manager for the status of the backup sets in a given six week range. RMAN uses the date format specified in the <code class="codeph">NLS_DATE_FORMAT</code> parameter, which is &#39;<code class="codeph">DD-MON-YY</code>&#39; in this example. The first command cross-checks backups on tape only:</p>
<pre dir="ltr">ALLOCATE CHANNEL FOR MAINTENANCE DEVICE TYPE sbt;
CROSSCHECK BACKUP 
  COMPLETED BETWEEN &#39;01-JAN-13&#39; AND &#39;14-FEB-13&#39;;
RELEASE CHANNEL;
</pre>
<p>The following command specifies <code class="codeph">DEVICE TYPE DISK</code> to cross-check only disk:</p>
<pre dir="ltr">CROSSCHECK BACKUP DEVICE TYPE DISK 
  COMPLETED BETWEEN &#39;01-JAN-13&#39; AND &#39;14-FEB-13&#39;;
</pre>
<p>If the default channel is SBT, then you can cross-check both disk and SBT backups by running <code class="codeph">CROSSCHECK</code> with the default channels:</p>
<pre dir="ltr">CROSSCHECK BACKUP COMPLETED BETWEEN &#39;01-JAN-13&#39; AND &#39;14-FEB-13&#39;;
</pre></div>
<!-- class="example" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1037">
<tr>
<td class="cellalignment1049">
<table class="cellalignment1042">
<tr>
<td class="cellalignment1041"><a href="rcmsynta013.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1041"><a href="rcmsynta015.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1051">
<table class="cellalignment1040">
<tr>
<td class="cellalignment1041"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1041"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1041"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1041"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1041"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1041"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>