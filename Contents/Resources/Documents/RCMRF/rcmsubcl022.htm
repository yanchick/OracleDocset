<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-88405"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/untilClause"></a><title>untilClause</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="untilClause subclause, windows, time limits"/>
<meta name="dcterms.created" content="2017-06-08T22:24:36Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Backup and Recovery Reference"/>
<meta name="dcterms.identifier" content="E50791-08"/>
<meta name="dcterms.isVersionOf" content="RCMRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="rcmsubcl021.htm" title="Previous" type="text/html"/>
<link rel="Next" href="rcviews.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E50791-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A"></a> <span id="PAGE" style="display:none;">84/152</span> <!-- End Header -->
<a id="RCMRF90482"></a><a id="RCMRF90483"></a><a id="RCMRF90484"></a><a id="RCMRF160"></a>
<h1 class="sect1">untilClause</h1>
<div>
<div class="section">
<p class="subhead1">Purpose</p>
<p>Use the <span class="italic"><code class="codeph">untilClause</code></span> subclause to specify an upper limit by time, SCN, or log sequence number for various RMAN operations.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Usage Notes</p>
<p>To specify a restore point, use the <code class="codeph">TO</code> <code class="codeph">RESTORE</code> <code class="codeph">POINT</code> clause. See <span class="q">&#34;<a href="rcmsynta2014.htm#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a>&#34;</span> for an example.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Syntax</p>
<p id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__BABEDABD"><span class="bold"><span class="italic">untilClause</span>::=</span></p>
<div class="figure" id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__GUID-9586D297-DDC2-4629-BDC0-787BD2533632"><img width="334" height="88" src="img/GUID-99560FE6-DDB4-4B88-BDE3-F02E1DA1352A-default.gif" alt="Description of GUID-99560FE6-DDB4-4B88-BDE3-F02E1DA1352A-print.eps follows" title="Description of GUID-99560FE6-DDB4-4B88-BDE3-F02E1DA1352A-print.eps follows"/><br/>
<a href="img_text/GUID-99560FE6-DDB4-4B88-BDE3-F02E1DA1352A-print.htm">Description of the illustration GUID-99560FE6-DDB4-4B88-BDE3-F02E1DA1352A-print.eps</a></div>
<!-- class="figure" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Semantics</p>
<div class="tblformalwide" id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__GUID-E6A80DF9-9152-4C4A-A64A-CD08B8DF0763">
<table class="cellalignment1044" summary="Describes untilClause subclause parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1058" id="d118254e136">Syntax Element</th>
<th class="cellalignment1059" id="d118254e139">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1060" id="d118254e144" headers="d118254e136">
<p><a id="d118254e146" class="indexterm-anchor"></a><code class="codeph">UNTIL SCN</code> <span class="italic"><code class="codeph">integer</code></span></p>
</td>
<td class="cellalignment1061" headers="d118254e144 d118254e139">
<p>Specifies an SCN as an upper, noninclusive limit.</p>
<p>RMAN selects only files that it can use to restore or recover up to but not including the specified SCN (see <a href="rcmsubcl022.htm#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__BABHACEC">Example 4-41</a>). For example, <code class="codeph"><a href="rcmsynta2008.htm#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code> <code class="codeph">DATABASE UNTIL SCN 1000</code> chooses only backups that could be used to recover to SCN 1000.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1060" id="d118254e172" headers="d118254e136">
<p><a id="d118254e174" class="indexterm-anchor"></a><code class="codeph">UNTIL SEQUENCE</code> <span class="italic"><code class="codeph">integer</code></span></p>
</td>
<td class="cellalignment1061" headers="d118254e172 d118254e139">
<p>Specifies a redo log sequence number and thread as an upper, noninclusive limit.</p>
<p>RMAN selects only files that it can use to restore or recover up to but not including the specified sequence number. For example, <code class="codeph"><a href="rcmsynta2006.htm#GUID-8352987F-533A-4146-A157-F091103169B0">REPORT</a></code> <code class="codeph">OBSOLETE UNTIL SEQUENCE 8000</code> reports only backups that could be used to recover through log sequence 7999.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1060" id="d118254e198" headers="d118254e136">
<p><a id="d118254e200" class="indexterm-anchor"></a><code class="codeph">&nbsp;&nbsp;&nbsp;THREAD</code>&nbsp;<span class="italic"><code class="codeph">integer</code></span></p>
</td>
<td class="cellalignment1061" headers="d118254e198 d118254e139">
<p>Specifies the number of the redo thread.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1060" id="d118254e212" headers="d118254e136">
<p><a id="d118254e214" class="indexterm-anchor"></a><code class="codeph">UNTIL&nbsp;TIME</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">date_string</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment1061" headers="d118254e212 d118254e139">
<p>Specifies a time as an upper, noninclusive limit (see <a href="rcmsubcl022.htm#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__BABBCFAJ">Example 4-42</a>).</p>
<p>RMAN selects only files that it can use to restore and recover up to but not including the specified time. For example, <code class="codeph"><a href="rcmsynta027.htm#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">BACKUP</code> <code class="codeph">UNTIL</code> <code class="codeph">TIME</code> <code class="codeph">&#39;SYSDATE-7&#39;</code> lists all backups that could be used to recover to a point one week ago.</p>
<p><a id="d118254e253" class="indexterm-anchor"></a><a id="d118254e255" class="indexterm-anchor"></a>When specifying dates in RMAN commands, the date string must be either:</p>
<ul style="list-style-type: disc;">
<li>
<p>A literal string whose format matches the <code class="codeph">NLS_DATE_FORMAT</code> setting.</p>
</li>
<li>
<p>A SQL expression of type <code class="codeph">DATE</code>, for example, <code class="codeph">&#39;SYSDATE-10&#39;</code> or <code class="codeph">&#34;TO_DATE(&#39;01/30/2013&#39;,</code> <code class="codeph">&#39;MM/DD/YYYY&#39;)&#34;</code>. The second example includes its own date format mask and so is independent of the current <code class="codeph">NLS_DATE_FORMAT</code> setting.</p>
</li>
</ul>
<p>Following are examples of typical date settings in RMAN commands:</p>
<pre dir="ltr">BACKUP ARCHIVELOG FROM TIME &#39;SYSDATE-31&#39; UNTIL TIME &#39;SYSDATE-14&#39;;
RESTORE DATABASE UNTIL TIME &#34;TO_DATE(&#39;09/20/06&#39;,&#39;MM/DD/YY&#39;)&#34;;
</pre>
<p><span class="bold">Note:</span> The granularity of time-based recovery is dependent on time stamps in the redo log. For example, suppose that you specify the following command:</p>
<pre dir="ltr">RECOVER DATABASE UNTIL TIME &#39;2013-07-26 17:45:00&#39;;
</pre>
<p>If no redo was written with a time stamp of <code class="codeph">17:45:00</code>, then recovery proceeds until it finds the next redo time stamp that is higher. For example, the next redo time stamp may be <code class="codeph">17:45:04</code>. You can check for the nearest time for a specific SCN by querying the <code class="codeph">FIRST_TIME</code> and <code class="codeph">FIRST_CHANGE#</code> columns in <code class="codeph">V$LOG_HISTORY TABLE</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Examples</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__BABHACEC">
<p class="titleinexample">Example 4-41 Performing Incomplete Recovery to a Specified SCN</p>
<p>This example, which assumes a mounted database, recovers the database up to (but not including) the specified SCN:</p>
<pre dir="ltr">STARTUP FORCE MOUNT
RUN
{
  SET UNTIL SCN 1418901;  # set to 1418901 to recover database through SCN 1418900
  RESTORE DATABASE;
  RECOVER DATABASE;
}
ALTER DATABASE OPEN RESETLOGS;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__BABBCFAJ">
<p class="titleinexample">Example 4-42 Reporting Obsolete Backups</p>
<p>This example assumes that you want to be able to recover to any point within the last week. It considers as obsolete all backups that could be used to recover the database to a point one week ago:</p>
<pre dir="ltr">REPORT OBSOLETE UNTIL TIME &#39;SYSDATE-7&#39;;
</pre></div>
<!-- class="example" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1037">
<tr>
<td class="cellalignment1049">
<table class="cellalignment1042">
<tr>
<td class="cellalignment1041"><a href="rcmsubcl021.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1041"><a href="rcviews.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1051">
<table class="cellalignment1040">
<tr>
<td class="cellalignment1041"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1041"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1041"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1041"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1041"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1041"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>