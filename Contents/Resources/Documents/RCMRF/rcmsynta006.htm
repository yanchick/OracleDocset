<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-88412"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/BACKUP"></a><title>BACKUP</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="primary databases, backing up, standby databases, BACKUP command, databases, tablespaces, data files, parameter files, server parameter files, redo logs, backup sets, backupOperand subclause, parameter descriptions, backupSpec subclause, backupSpecOperand subclause, backupTypeSpec subclause, copyOfSpec subclause, datafileCopySpec subclause, duration subclause, forRecoveryOfSpec subclause, notBackedUpSpec subclause, skipSpec subclause"/>
<meta name="dcterms.created" content="2017-06-08T22:24:36Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Backup and Recovery Reference"/>
<meta name="dcterms.identifier" content="E50791-08"/>
<meta name="dcterms.isVersionOf" content="RCMRF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="rcmsynta005.htm" title="Previous" type="text/html"/>
<link rel="Next" href="rcmsynta007.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E50791-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50"></a> <span id="PAGE" style="display:none;">12/152</span> <!-- End Header -->
<a id="RCMRF90006"></a><a id="RCMRF90591"></a><a id="RCMRF90007"></a><a id="RCMRF90008"></a><a id="RCMRF90009"></a><a id="RCMRF90592"></a><a id="RCMRF90010"></a><a id="RCMRF90593"></a><a id="RCMRF90011"></a><a id="RCMRF90594"></a><a id="RCMRF90595"></a><a id="RCMRF90012"></a><a id="RCMRF90013"></a><a id="RCMRF90014"></a><a id="RCMRF90015"></a><a id="RCMRF90016"></a><a id="RCMRF90017"></a><a id="RCMRF90018"></a><a id="RCMRF90019"></a><a id="RCMRF90020"></a><a id="RCMRF90021"></a><a id="RCMRF90023"></a><a id="RCMRF90024"></a><a id="RCMRF90025"></a><a id="RCMRF90026"></a><a id="RCMRF90027"></a><a id="RCMRF90028"></a><a id="RCMRF90029"></a><a id="RCMRF90030"></a><a id="RCMRF90031"></a><a id="RCMRF90032"></a><a id="RCMRF90033"></a><a id="RCMRF90035"></a><a id="RCMRF90036"></a><a id="RCMRF90596"></a><a id="RCMRF90037"></a><a id="RCMRF90038"></a><a id="RCMRF90039"></a><a id="RCMRF90040"></a><a id="RCMRF90041"></a><a id="RCMRF90042"></a><a id="RCMRF90043"></a><a id="RCMRF90044"></a><a id="RCMRF90045"></a><a id="RCMRF90046"></a><a id="RCMRF90047"></a><a id="RCMRF90048"></a><a id="RCMRF90049"></a><a id="RCMRF90050"></a><a id="RCMRF90513"></a><a id="RCMRF90597"></a><a id="RCMRF90598"></a><a id="RCMRF90599"></a><a id="RCMRF90600"></a><a id="RCMRF90601"></a><a id="RCMRF90602"></a><a id="RCMRF90603"></a><a id="RCMRF90604"></a><a id="RCMRF90605"></a><a id="RCMRF107"></a>
<h1 class="sect1">BACKUP</h1>
<div>
<div class="section">
<p class="subhead1">Purpose</p>
<p>Use the <code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDDJJAJ">BACKUP</code> command to back up a primary or standby database, tablespace, data file (current or copy), control file (current or copy), server parameter file, archived redo log file, or backup set.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Additional Topics</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBIAHI">Prerequisites</a></p>
</li>
<li>
<p><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCBIDC">Usage Notes</a></p>
</li>
<li>
<p><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIJGIJ">Syntax</a></p>
</li>
<li>
<p><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCFGEI">Semantics</a></p>
</li>
<li>
<p><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBGAJB">Examples</a></p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBIAHI">
<p class="subhead1">Prerequisites</p>
<p>RMAN must be connected to a target database. See the <code class="codeph"><a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code> and <code class="codeph"><a href="rcmsynta2011.htm#GUID-E5514ACB-59F6-4DB0-B4DB-64DF4C87CDE7">RMAN</a></code> commands to learn how to connect to a database as <code class="codeph">TARGET</code>.</p>
<p><span class="bold">Database Archiving Modes</span></p>
<p><a id="d11486e323" class="indexterm-anchor"></a><a id="d11486e325" class="indexterm-anchor"></a><a id="d11486e329" class="indexterm-anchor"></a><a id="d11486e331" class="indexterm-anchor"></a><a id="d11486e333" class="indexterm-anchor"></a><a id="d11486e335" class="indexterm-anchor"></a><a id="d11486e337" class="indexterm-anchor"></a>If the target database is in <code class="codeph">ARCHIVELOG</code> mode, then the database must be mounted or open with a current control file. Backups made while the database is open are inconsistent. You must apply redo log files after restoring an inconsistent backup to make the database consistent.</p>
<p>If the target database is in <code class="codeph">NOARCHIVELOG</code> mode, then the database must be mounted after a consistent shutdown when you make the backup. The shutdown is only consistent if you successfully execute the <code class="codeph">SHUTDOWN</code> command with the <code class="codeph">NORMAL</code>, <code class="codeph">IMMEDIATE</code>, or <code class="codeph">TRANSACTIONAL</code> options. You cannot use RMAN to back up a <code class="codeph">NOARCHIVELOG</code> database after an instance failure or <code class="codeph">SHUTDOWN ABORT</code>.</p>
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBBBHIB"><span class="bold">Backing Up Data for Cross-Platform Transportation</span><a id="d11486e370" class="indexterm-anchor"></a><a id="d11486e374" class="indexterm-anchor"></a></p>
<p>To create backup sets that transport data to another platform, the <code class="codeph">COMPATIBLE</code> parameter in the target database must be 12.0.0 or higher.</p>
<p>To backup the entire database for cross-platform transport, the source and destination platform must use the same endian format. The source database must be open in read-only mode.</p>
<p>While backing up tablespaces for cross-platform transport, if the <code class="codeph">ALLOW INCONSISTENT</code> clause is not used, the tablespaces must be in read-only mode</p>
<p><span class="bold">Backup Media</span></p>
<p>RMAN can only back up files onto valid media. If you specify <code class="codeph">DEVICE TYPE DISK</code>, then RMAN makes backups to random access disks. You can make a backup on any device that can store a data file. If the statement <code class="codeph">CREATE TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span> <code class="codeph">DATAFILE</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">&#39;</code> works, then <code class="codeph">&#39;</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">&#39;</code> is a valid backup path name. If you specify <code class="codeph">DEVICE TYPE sbt</code>, then you can back up files to any media supported by the media manager.</p>
<p><a id="d11486e430" class="indexterm-anchor"></a><a id="d11486e432" class="indexterm-anchor"></a><a id="d11486e434" class="indexterm-anchor"></a><a id="d11486e436" class="indexterm-anchor"></a>When backing up Oracle Database files to disk, the logical block size of the files must be an even multiple of the physical block size of the destination device. For example, a disk device with a block size of 2 KB can only be used as a destination for backups of Oracle files with logical block sizes of 2 KB, 4 KB, 6 KB and so on. In practice, most disk drives have physical block sizes of 512 bytes, so this limitation rarely affects backup. However, you can encounter this limitation when using <code class="codeph">BACKUP ... DEVICE TYPE DISK</code> to back your database up to a writeable CD or DVD, or some other device that has a larger physical block size.</p>
<p><span class="bold">Channels</span></p>
<p>If no automatic channel is configured for the specified device type, then you must manually allocate a channel for each <code class="codeph">BACKUP</code> execution. If no manual channel is allocated, then RMAN uses the default channels set with the <code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> command. RMAN has a <code class="codeph">DISK</code> channel preconfigured but no preconfigured <code class="codeph">sbt</code> channels.</p>
<div class="infobox-note" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-7F901989-E225-44CC-91DE-1F3F22320C60">
<p class="notep1">Note:</p>
<p>Backups that use the disk test API are not supported for production backups. Instead, use the preconfigured <code class="codeph">DISK</code> channel or manually allocate a <code class="codeph">DISK</code> channel.</p>
</div>
</div>
<!-- class="section" -->
<div class="section" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCBIDC">
<p class="subhead1">Usage Notes</p>
<p><a id="d11486e474" class="indexterm-anchor"></a><a id="d11486e476" class="indexterm-anchor"></a><a id="d11486e478" class="indexterm-anchor"></a><a id="d11486e482" class="indexterm-anchor"></a><a id="d11486e486" class="indexterm-anchor"></a><a id="d11486e488" class="indexterm-anchor"></a><a id="d11486e492" class="indexterm-anchor"></a><a id="d11486e494" class="indexterm-anchor"></a>RMAN can only back up data files, control files, server parameter files, archived redo log files, and RMAN backups of these files. RMAN cannot make backups of other database-related files such as network configuration files, password files, the block change tracking file, and the contents of the Oracle home directory. Likewise, some features of Oracle Database, such as external tables or the <code class="codeph">BFILE</code> data type, store data in files other than those in the preceding list. RMAN cannot back up these files.</p>
<div class="infobox-note" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-E8BFCACD-E0A5-48F4-88BC-800CDF20FDD0">
<p class="notep1">Note:</p>
<p>Backups of a non-CDB are not usable after the non-CDB is plugged in, as a pluggable database (PDB), into another multitenant container database (CDB).</p>
</div>
<p><a id="d11486e504" class="indexterm-anchor"></a><a id="d11486e506" class="indexterm-anchor"></a>RMAN decomposes a <code class="codeph">BACKUP</code> command into multiple independent backup steps. RMAN can execute each independent step on any channel allocated for a specific device. If multiple channels are allocated, and if one channel fails or encounters a problem during a backup step, then RMAN attempts to complete the work on another channel. RMAN reports a message in <code class="codeph">V$RMAN_OUTPUT</code> and in the output to the interactive session or log file when channel failover occurs.</p>
<p><a id="d11486e518" class="indexterm-anchor"></a><a id="d11486e520" class="indexterm-anchor"></a><a id="d11486e524" class="indexterm-anchor"></a>RMAN backups made on one platform can be transported to a different platform only if you use either the <code class="codeph">FOR TRANSPORT</code> or <code class="codeph">TO PLATFORM</code> clause while creating the backup.</p>
<p>RMAN backups made in a previous release of Oracle Database are usable after a database migration or upgrade. See My Oracle Support Note 790559.1 at <a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=790559.1" target="_blank"><code class="codeph">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=790559.1</code></a> for information about this procedure.</p>
<p><a id="d11486e541" class="indexterm-anchor"></a><a id="d11486e543" class="indexterm-anchor"></a><a id="d11486e547" class="indexterm-anchor"></a>If you change the <code class="codeph">DB_NAME</code> for a database, but not its DBID, then RMAN considers backups made of the database with the previous <code class="codeph">DB_NAME</code> as eligible to be restored.</p>
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBHABHH"><span class="bold">Incremental Backups</span></p>
<p><a id="d11486e562" class="indexterm-anchor"></a><a id="d11486e564" class="indexterm-anchor"></a><a id="d11486e568" class="indexterm-anchor"></a><a id="d11486e570" class="indexterm-anchor"></a><a id="d11486e572" class="indexterm-anchor"></a>An <code class="codeph">INCREMENTAL</code> backup at level 0 backs up all data blocks in data files being backed up. An incremental backup at level 0 is identical in content to a <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBDFGF">FULL</a></code> backup, but unlike a full backup the level 0 backup is a part of the incremental backup strategy.</p>
<p>A level 1 backup copies only changed blocks. A level 1 incremental backup is either differential or <code class="codeph">CUMULATIVE</code>. If cumulative, RMAN backs up all blocks changed since the most recent level 0 backup. If differential, RMAN backs up blocks updated since the most recent level 0 or level 1 incremental backup. You can apply a level 1 backup of a standby database to a level 0 backup of a primary database, and also apply a level 1 backup of a primary database to a level 0 backup of a standby database.</p>
<p>Incremental backups at level 0 can be either backup sets or image copies, but incremental backups at level 1 can only be backup sets.</p>
<p>The database performs checks when attempting to create a level 1 incremental backup to ensure that the incremental backup is usable by a subsequent <code class="codeph"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code> command. Among the checks performed are:</p>
<ul style="list-style-type: disc;">
<li>
<p>A level 0 backup must exist for each data file in the <code class="codeph">BACKUP</code> command as the base backup for an incremental strategy. Level 0 backups must not have status <code class="codeph">UNAVAILABLE</code>. If no level 0 backup exists, then RMAN makes a level 0 backup automatically.</p>
</li>
<li>
<p>Sufficient incremental backups taken since level 0 must exist and be available such that the incremental backup to be created is usable.</p>
</li>
</ul>
<div class="infobox-note" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-A53A4C1B-A188-4C29-BC1A-BC561D6702FA">
<p class="notep1">Note:</p>
<p>When creating an incremental backup, RMAN considers backups from parent incarnations as valid. For example, assume you make a level 0 backup and then <code class="codeph">OPEN RESETLOGS</code>. If you make a level 1 incremental backup, then RMAN backs up all blocks changed since the pre-<code class="codeph">RESETLOGS</code> level 0 backup. When making a level 1 backup, RMAN only makes a new level 0 backup if no level 0 is available in either the current or parent database incarnation.</p>
</div>
<p><a id="d11486e622" class="indexterm-anchor"></a><a id="d11486e626" class="indexterm-anchor"></a><a id="d11486e630" class="indexterm-anchor"></a>You can improve incremental backup performance by enabling <span class="bold">block change tracking</span> on a primary or standby database. In this case, RMAN keeps a record of which blocks have changed in the block change tracking file.</p>
<p>The change tracking file maintains bitmaps that mark changes in the data files between backups. The database performs a bitmap switch before each backup. Oracle Database automatically manages space in the change tracking file to retain block change data that covers the 8 most recent backups. After the maximum of 8 bitmaps is reached, the most recent bitmap is overwritten by the bitmap that tracks the current changes.</p>
<p>The first level 0 incremental backup scans the entire data file. Subsequent incremental backups use the block change tracking file to scan only the blocks that have been marked as changed since the last backup. An incremental backup can be optimized only when it is based on a parent backup that was made after the start of the oldest bitmap in the block change tracking file.</p>
<p>Consider the 8-bitmap limit when developing your incremental backup strategy. For example, if you make a level 0 database backup followed by 7 differential incremental backups, then the block change tracking file now includes 8 bitmaps. If you then make a cumulative level 1 incremental backup, RMAN cannot optimize the backup because the bitmap corresponding to the parent level 0 backup is overwritten with the bitmap that tracks the current changes.</p>
<div class="infoboxnotealso" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-680D7F8E-10F8-4C9A-A912-370E4E9009A9">
<p class="notep1">See Also:</p>
<p><a class="olink BRADV8125" target="_blank" href="../BRADV/rcmbckba.htm#BRADV8125"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for details about block change tracking</p>
</div>
<p><span class="bold">Backups of CDBs and PDBs</span><a id="d11486e655" class="indexterm-anchor"></a><a id="d11486e659" class="indexterm-anchor"></a><a id="d11486e663" class="indexterm-anchor"></a><a id="d11486e667" class="indexterm-anchor"></a><a id="d11486e671" class="indexterm-anchor"></a><a id="d11486e673" class="indexterm-anchor"></a></p>
<p>RMAN enables you to back up a whole CDB, the root, one or more PDBs, and one or more tablespaces in a PDB. Backups can be in the form of image copies or backup sets. You can also create backup sets for cross-platform data transport by using the <code class="codeph">BACKUP</code> command.</p>
<p>See <span class="q">&#34;<a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>&#34;</span> for information about how to connect to CDB and PDBs before you perform backup operations.</p>
<div class="infoboxnotealso" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-9C523144-C32A-406D-A497-9844BA6612F6">
<p class="notep1">See Also:</p>
<p><a class="olink BRADV428" target="_blank" href="../BRADV/rcmbckba.htm#BRADV428"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for information about backing up CDBs and PDBs</p>
</div>
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIHIGD"><span class="bold">Encryption of Backup Sets</span></p>
<p><a id="d11486e698" class="indexterm-anchor"></a><a id="d11486e702" class="indexterm-anchor"></a><a id="d11486e706" class="indexterm-anchor"></a><a id="d11486e708" class="indexterm-anchor"></a><a id="d11486e712" class="indexterm-anchor"></a><a id="d11486e716" class="indexterm-anchor"></a><a id="d11486e718" class="indexterm-anchor"></a><a id="d11486e720" class="indexterm-anchor"></a>RMAN can transparently encrypt data written to backup sets and decrypt those backup sets when they are needed in a <code class="codeph">RESTORE</code> operation. To create encrypted backups on disk, the database must use the Advanced Security Option. To create encrypted backups directly on tape, RMAN must use the Oracle Secure Backup SBT interface, but does not require the Advanced Security Option. RMAN issues an <a id="d11486e729" class="indexterm-anchor"></a><a id="d11486e731" class="indexterm-anchor"></a><code class="codeph">ORA-19916</code> error if you attempt to create encrypted RMAN backups using an SBT library other than Oracle Secure Backup.</p>
<p><a id="d11486e739" class="indexterm-anchor"></a><a id="d11486e741" class="indexterm-anchor"></a><a id="d11486e743" class="indexterm-anchor"></a><a id="d11486e745" class="indexterm-anchor"></a><a id="d11486e747" class="indexterm-anchor"></a><a id="d11486e749" class="indexterm-anchor"></a><a id="d11486e751" class="indexterm-anchor"></a>RMAN can encrypt backups by using several different encryption algorithms, which are listed in <code class="codeph">V$RMAN_ENCRYPTION_ALGORITHMS</code>. RMAN supports three modes of encryption for backups:</p>
<ul style="list-style-type: disc;">
<li>
<p><span>Transparent encryption</span>, in which RMAN can create and restore encrypted backups with no special DBA intervention if the data is already protected with Transparent Data Encryption (TDE) in the Oracle Database</p>
</li>
<li>
<p><span>Password-based encryption</span>, where a password is specified during the backup, and the same password must be supplied to restore the backup</p>
</li>
<li>
<p><span>Dual-mode encryption</span>, where backups can be created using either as with transparent encryption or password-based encryption, and where decryption can be performed based upon either the Oracle software keystore, or a password the DBA supplies at decryption time</p>
</li>
</ul>
<div class="infobox-note" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-E0B2269C-846E-447A-B049-AB3B8977E9B2">
<p class="notep1">Note:</p>
<p>Keystore-based encryption is more secure than password-based encryption because no passwords are involved. Use password-based encryption only when absolutely necessary because your backups must be transportable.</p>
</div>
<p><a id="d11486e779" class="indexterm-anchor"></a><a id="d11486e783" class="indexterm-anchor"></a>The <code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> and <code class="codeph"><a href="rcmsynta2014.htm#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> commands manage the encryption settings for database backups. See the reference entries for those commands for more details. Backup sets containing archived redo log files are encrypted if any of the following is true:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph"><a href="rcmsynta2014.htm#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">ENCRYPTION ON</code> is in effect when the backup is being created.</p>
</li>
<li>
<p>Encryption is configured for the whole database or at least one tablespace.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-2C6A5888-DADE-4D96-BAD5-19D885EB6C17">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span>for an overview of the backup encryption, a guide to its use, and information on choosing among different modes of encryption</p>
</li>
<li>
<p><a class="olink ASOAG10139" target="_blank" href="../ASOAG/introduction-to-transparent-data-encryption.htm#ASOAG10139"><span class="italic">Oracle Database Advanced Security Guide</span></a> to learn about TDE tablespace encryption and Oracle software keystores</p>
</li>
</ul>
</div>
<p><span class="bold">Backing Up Standby Databases</span></p>
<p>The RMAN <code class="codeph">BACKUP</code> command backs up the standby database exactly the same as a primary database, except that the backup takes place on the standby site. The primary database has no influence on the backup of the standby database.</p>
<p>When you connect to the standby database to perform the backup, use the <code class="codeph">TARGET</code> keyword and not the <code class="codeph">AUXILIARY</code> keyword.</p>
<p>The state of the standby database when the backup is made determines whether the backup is consistent or inconsistent. To make a consistent backup, the standby database must shutdown cleanly and be mounted, but not placed in recovery mode. Any other status results in an inconsistent backup and must be restored using media recovery.</p>
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJIIGD"><span class="bold">RMAN Backups in a Data Guard Environment</span></p>
<p><a id="d11486e849" class="indexterm-anchor"></a><a id="d11486e853" class="indexterm-anchor"></a><a id="d11486e857" class="indexterm-anchor"></a>A recovery catalog is required when you are performing RMAN operations in a Data Guard environment. The catalog enables all RMAN operations to be transparently executable at any primary or standby database. You can offload primary database backups onto any standby database in the environment; the RMAN backups are interchangeable. If you use RMAN in <code class="codeph">NOCATALOG</code> mode, then RMAN uses only the metadata in the mounted control file.</p>
<p>In a Data Guard environment, the database that creates a backup or copy is associated with the file. For example, if RMAN connects as <code class="codeph">TARGET</code> to database <code class="codeph">prod</code> and backs it up, then this database backup is associated with <code class="codeph">prod</code>. A backup remains associated with the database that created in unless you use the <code class="codeph"><a href="rcmsynta008.htm#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2">CHANGE</a></code> <code class="codeph">... RESET DB_UNIQUE_NAME</code> to associate the backup with a different database.</p>
<p><a id="d11486e882" class="indexterm-anchor"></a>The association of a backup is different from its accessibility. The recovery catalog considers disk backups as accessible only to the database in the Data Guard environment on which it was created, whereas tape backups created on one database are considered accessible to all databases. If a backup file is not associated with any database, then the row describing it in the recovery catalog view shows <code class="codeph">null</code> for the <code class="codeph">SITE_KEY</code> column. By default, RMAN associates files whose <code class="codeph">SITE_KEY</code> is <code class="codeph">null</code> with the database to which RMAN is connected as <code class="codeph">TARGET</code>.</p>
<p>In a Data Guard environment, RMAN commands can operate on any backups that are accessible. For example, assume that databases <code class="codeph">prod</code> and <code class="codeph">standby1</code> reside on different hosts. RMAN backs up data file 1 on <code class="codeph">prod</code> to <code class="codeph">/prodhst/disk1/df1.dbf</code> on the production host and also to tape. RMAN backs up data file 1 on <code class="codeph">standby1</code> to <code class="codeph">/sby1hst/disk2/df1.dbf</code> on the standby host and also to tape. If RMAN is connected to database <code class="codeph">prod</code> as <code class="codeph">TARGET</code>, then you cannot use RMAN to perform operations with the <code class="codeph">/sby1hst/disk2/df1.dbf</code> backup located on the standby host. However, RMAN considers the tape backup made on <code class="codeph">standby1</code> as eligible to be restored.</p>
<div class="infobox-note" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-B1AD5B14-7A17-4355-8CA8-79049FDB25E4">
<p class="notep1">Note:</p>
<p><a id="d11486e935" class="indexterm-anchor"></a><a id="d11486e937" class="indexterm-anchor"></a><a id="d11486e939" class="indexterm-anchor"></a>You can FTP a backup from a standby host to a primary host or vice versa and then <code class="codeph"><a href="rcmsynta007.htm#GUID-6E337759-9860-463A-BF7C-8512B272B8E1">CATALOG</a></code> it. After a file is cataloged by the target database, the file is associated with the target database.</p>
</div>
<p>If backups are accessible to RMAN, you can use RMAN maintenance commands such as <code class="codeph"><a href="rcmsynta008.htm#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2">CHANGE</a></code>, <code class="codeph"><a href="rcmsynta014.htm#GUID-07E07E7E-9A29-4901-9739-FFC472029A7D">CROSSCHECK</a></code>, and <code class="codeph"><a href="rcmsynta015.htm#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code> for backups when connected to any primary or standby database.</p>
<div class="infoboxnotealso" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-35E34F8F-4F41-4ED0-90D4-D7D5ECC0AF8A">
<p class="notep1">See Also:</p>
<p><a class="olink SBYDB04700" target="_blank" href="../SBYDB/rman.htm#SBYDB04700"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> to learn how to use RMAN to back up and restore files in a Data Guard environment</p>
</div>
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBCCDEA"><span class="bold">Backing Up Data for Cross-Platform Transport</span><a id="d11486e974" class="indexterm-anchor"></a><a id="d11486e978" class="indexterm-anchor"></a></p>
<p>The <code class="codeph">BACKUP</code> command can create backup sets that are used to transport an entire database, data files, or tablespaces from one platform to another. To create cross-platform backups, use either the <code class="codeph">FOR TRANSPORT</code> or <code class="codeph">TO PLATFORM</code> clause in the <code class="codeph">BACKUP</code> command. The <code class="codeph">V$TRANSPORT_TABLESPACE</code> view contains the list of platforms supported for cross-platform transport</p>
<div class="infoboxnotealso" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-3083DB4D-6EAB-4012-9C87-CB0A24FA27DE">
<p class="notep1">See Also:</p>
<p><a class="olink BRADV05432" target="_blank" href="../BRADV/rcmxplat.htm#BRADV05432"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for information about how to create backup sets for cross-platform data transportation</p>
</div>
<p><span class="bold">List of Clauses Incompatible with TO PLATFORM and FOR TRANSPORT</span><a id="d11486e1010" class="indexterm-anchor"></a><a id="d11486e1014" class="indexterm-anchor"></a></p>
<p>You can use the <code class="codeph">BACKUP</code> command to create backup sets for cross-platform data transportation. To indicate that a backup is for cross-platform transportation, use either the <code class="codeph">FOR TRANSPORT</code> or <code class="codeph">TO PLATFORM</code> clauses.</p>
<p>When you use either the <code class="codeph">FOR TRANSPORT</code> or <code class="codeph">TO PLATFORM</code> clause, you cannot use the following clauses of the <code class="codeph">BACKUP</code> command:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">CUMULATIVE</code></p>
</li>
<li>
<p><span class="italic">forRecoveryOfSpec</span></p>
</li>
<li>
<p><span class="italic">keepOption</span></p>
</li>
<li>
<p><span class="italic">notBackedUpSpec</span></p>
</li>
<li>
<p><code class="codeph">PROXY</code></p>
</li>
<li>
<p><code class="codeph">SECTION SIZE</code></p>
</li>
<li>
<p><code class="codeph">TAG</code></p>
</li>
<li>
<p><code class="codeph">VALIDATE</code></p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIJGIJ">
<p class="subhead1">Syntax</p>
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDDBGEA"><a id="d11486e1077" class="indexterm-anchor"></a><a id="d11486e1081" class="indexterm-anchor"></a><span class="bold"><span class="italic">backup</span>::=</span></p>
<div class="figure" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-C67DEC48-2782-4469-8E8D-2F88C3B895D4"><img width="345" height="129" src="img/GUID-A3AFD8C6-7FFD-4CFB-8074-E5A1D3C8B418-default.gif" alt="Description of GUID-A3AFD8C6-7FFD-4CFB-8074-E5A1D3C8B418-print.eps follows" title="Description of GUID-A3AFD8C6-7FFD-4CFB-8074-E5A1D3C8B418-print.eps follows"/><br/>
<a href="img_text/GUID-A3AFD8C6-7FFD-4CFB-8074-E5A1D3C8B418-print.htm">Description of the illustration GUID-A3AFD8C6-7FFD-4CFB-8074-E5A1D3C8B418-print.eps</a></div>
<!-- class="figure" -->
<p>(<span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBCEDG">backupOperand::=</a></span>, <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCBGDA">backupSpec::=</a></span>, <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDDCEFI">backupSpecOperand::=</a></span>)</p>
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBCEDG"><a id="d11486e1107" class="indexterm-anchor"></a><a id="d11486e1111" class="indexterm-anchor"></a><span class="bold"><span class="italic">backupOperand</span>::=</span></p>
<div class="figure" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-C766810B-B357-42F4-A5B6-EA12DB08DD48"><img width="388" height="1003" src="img/GUID-CEE28EBD-6395-43AE-A6E8-6DE6B3D0844B-default.gif" alt="Description of GUID-CEE28EBD-6395-43AE-A6E8-6DE6B3D0844B-print.eps follows" title="Description of GUID-CEE28EBD-6395-43AE-A6E8-6DE6B3D0844B-print.eps follows"/><br/>
<a href="img_text/GUID-CEE28EBD-6395-43AE-A6E8-6DE6B3D0844B-print.htm">Description of the illustration GUID-CEE28EBD-6395-43AE-A6E8-6DE6B3D0844B-print.eps</a></div>
<!-- class="figure" -->
<p>(<span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDHHDGG">backupTypeSpec::=</a></span>, <span class="italic"><a href="rcmsubcl007.htm#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier::=</a></span>, <span class="italic"><a href="rcmsubcl008.htm#GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3__BABBJGBH">fileNameConversionSpec::=</a></span>, <span class="italic"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABHCHAG">formatSpec::=</a></span>, <span class="italic"><a href="rcmsubcl021.htm#GUID-A37AAC9F-1522-44F7-BECE-4ADA562A8BB7__CIHBDIGE">toDestSpec::=</a></span>, <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDEHIDJ">forRecoveryOfSpec::=</a></span>, <span class="italic"><a href="rcmsubcl013.htm#GUID-36E9008E-48A5-4AB9-8C9D-2D477342594B__BABGDGCC">keepOption::=</a></span>, <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCFHEA">notBackedUpSpec::=</a></span>, <span class="italic"><a href="rcmsubcl019.htm#GUID-146EDBEE-BCED-4BD4-A720-8E51AA8DC577__BABHAICB">sizeSpec::=</a></span>, <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDGFJFB">skipSpec::=</a></span>)</p>
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCBGDA"><a id="d11486e1166" class="indexterm-anchor"></a><a id="d11486e1170" class="indexterm-anchor"></a><span class="bold"><span class="italic">backupSpec</span>::=</span></p>
<div class="figure" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-EC53024D-EDBD-4FD8-9057-A4F40D18406F"><img width="669" height="741" src="img/GUID-FD0D2248-68E8-40C2-8DFB-2A2566FF9447-default.gif" alt="Description of GUID-FD0D2248-68E8-40C2-8DFB-2A2566FF9447-print.eps follows" title="Description of GUID-FD0D2248-68E8-40C2-8DFB-2A2566FF9447-print.eps follows"/><br/>
<a href="img_text/GUID-FD0D2248-68E8-40C2-8DFB-2A2566FF9447-print.htm">Description of the illustration GUID-FD0D2248-68E8-40C2-8DFB-2A2566FF9447-print.eps</a></div>
<!-- class="figure" -->
<p>(<span class="italic"><a href="rcmsubcl002.htm#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__BABJGBFG">archivelogRecordSpecifier::=</a></span>, <span class="italic"><a href="rcmsubcl003.htm#GUID-BC83D915-FF57-467D-A606-5B699F2EF4DE__BABGAJEH">completedTimeSpec::=</a></span>, <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFEBDC">copyOfSpec::=</a></span>, <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDHEJEG">datafileCopySpec::=</a></span>, <span class="italic"><a href="rcmsubcl005.htm#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220__BABCCBBJ">datafileSpec::=</a></span>, <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDDCEFI">backupSpecOperand::=</a></span>)</p>
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDDCEFI"><a id="d11486e1209" class="indexterm-anchor"></a><a id="d11486e1213" class="indexterm-anchor"></a><span class="bold"><span class="italic">backupSpecOperand</span>::=</span></p>
<div class="figure" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-37D7E87B-5B57-4C3C-BE26-8FADE8BC9AD4"><img width="281" height="636" src="img/GUID-281EECA2-3FE6-4BD3-B4CD-A4D700D23B1C-default.gif" alt="Description of GUID-281EECA2-3FE6-4BD3-B4CD-A4D700D23B1C-print.eps follows" title="Description of GUID-281EECA2-3FE6-4BD3-B4CD-A4D700D23B1C-print.eps follows"/><br/>
<a href="img_text/GUID-281EECA2-3FE6-4BD3-B4CD-A4D700D23B1C-print.htm">Description of the illustration GUID-281EECA2-3FE6-4BD3-B4CD-A4D700D23B1C-print.eps</a></div>
<!-- class="figure" -->
<p>(<span class="italic"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABHCHAG">formatSpec::=</a></span>, <span class="italic"><a href="rcmsubcl021.htm#GUID-A37AAC9F-1522-44F7-BECE-4ADA562A8BB7__CIHBDIGE">toDestSpec::=</a></span> <span class="italic"><a href="rcmsubcl013.htm#GUID-36E9008E-48A5-4AB9-8C9D-2D477342594B__BABGDGCC">keepOption::=</a></span>, <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCFHEA">notBackedUpSpec::=</a></span>, <span class="italic"><a href="rcmsubcl019.htm#GUID-146EDBEE-BCED-4BD4-A720-8E51AA8DC577__BABHAICB">sizeSpec::=</a></span>, <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDGFJFB">skipSpec::=</a></span>)</p>
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDHHDGG"><a id="d11486e1253" class="indexterm-anchor"></a><a id="d11486e1257" class="indexterm-anchor"></a><span class="bold"><span class="italic">backupTypeSpec::=</span></span></p>
<div class="figure" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-A626182C-0EAC-49F7-985A-20D6B8469251"><img width="267" height="64" src="img/GUID-CE4B94A3-3DEC-46AC-85BE-A9CD606F91FA-default.gif" alt="Description of GUID-CE4B94A3-3DEC-46AC-85BE-A9CD606F91FA-print.eps follows" title="Description of GUID-CE4B94A3-3DEC-46AC-85BE-A9CD606F91FA-print.eps follows"/><br/>
<a href="img_text/GUID-CE4B94A3-3DEC-46AC-85BE-A9CD606F91FA-print.htm">Description of the illustration GUID-CE4B94A3-3DEC-46AC-85BE-A9CD606F91FA-print.eps</a></div>
<!-- class="figure" -->
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFEBDC"><a id="d11486e1268" class="indexterm-anchor"></a><a id="d11486e1272" class="indexterm-anchor"></a><span class="bold"><span class="italic">copyOfSpec</span>::=</span></p>
<div class="figure" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-D458C3EF-6158-4CAC-8C29-4F223F98AB45"><img width="397" height="204" src="img/GUID-25F586A8-4264-479C-96C9-2A2E3FFD0FF7-default.gif" alt="Description of GUID-25F586A8-4264-479C-96C9-2A2E3FFD0FF7-print.eps follows" title="Description of GUID-25F586A8-4264-479C-96C9-2A2E3FFD0FF7-print.eps follows"/><br/>
<a href="img_text/GUID-25F586A8-4264-479C-96C9-2A2E3FFD0FF7-print.htm">Description of the illustration GUID-25F586A8-4264-479C-96C9-2A2E3FFD0FF7-print.eps</a></div>
<!-- class="figure" -->
<p>(<span class="italic"><a href="rcmsubcl005.htm#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220__BABCCBBJ">datafileSpec::=</a></span>)</p>
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDHEJEG"><a id="d11486e1290" class="indexterm-anchor"></a><a id="d11486e1294" class="indexterm-anchor"></a><span class="bold"><span class="italic">datafileCopySpec</span>::=</span></p>
<div class="figure" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-3ECF2C3C-697F-44B0-BDA4-D76C6B15C43C"><img width="527" height="164" src="img/GUID-9D0E22B1-EA23-4E99-8272-45E069D9F711-default.gif" alt="Description of GUID-9D0E22B1-EA23-4E99-8272-45E069D9F711-print.eps follows" title="Description of GUID-9D0E22B1-EA23-4E99-8272-45E069D9F711-print.eps follows"/><br/>
<a href="img_text/GUID-9D0E22B1-EA23-4E99-8272-45E069D9F711-print.htm">Description of the illustration GUID-9D0E22B1-EA23-4E99-8272-45E069D9F711-print.eps</a></div>
<!-- class="figure" -->
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIFHEH"><a id="d11486e1306" class="indexterm-anchor"></a><a id="d11486e1310" class="indexterm-anchor"></a><span class="bold"><span class="italic">duration</span>::=</span></p>
<div class="figure" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-ADDA19EC-BA25-4677-B596-C6C34B6949A4"><img width="397" height="96" src="img/GUID-0EBD3077-3F0E-4FD8-B00D-9EF3B2F0003F-default.gif" alt="Description of GUID-0EBD3077-3F0E-4FD8-B00D-9EF3B2F0003F-print.eps follows" title="Description of GUID-0EBD3077-3F0E-4FD8-B00D-9EF3B2F0003F-print.eps follows"/><br/>
<a href="img_text/GUID-0EBD3077-3F0E-4FD8-B00D-9EF3B2F0003F-print.htm">Description of the illustration GUID-0EBD3077-3F0E-4FD8-B00D-9EF3B2F0003F-print.eps</a></div>
<!-- class="figure" -->
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDEHIDJ"><a id="d11486e1323" class="indexterm-anchor"></a><a id="d11486e1327" class="indexterm-anchor"></a><span class="bold"><span class="italic">forRecoveryOfSpec</span>::=</span></p>
<div class="figure" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-A219F470-4B33-451F-8B23-55003CF48666"><img width="482" height="126" src="img/GUID-D1AA57E1-A471-4EC7-A9B8-5F04FE324E8A-default.gif" alt="Description of GUID-D1AA57E1-A471-4EC7-A9B8-5F04FE324E8A-print.eps follows" title="Description of GUID-D1AA57E1-A471-4EC7-A9B8-5F04FE324E8A-print.eps follows"/><br/>
<a href="img_text/GUID-D1AA57E1-A471-4EC7-A9B8-5F04FE324E8A-print.htm">Description of the illustration GUID-D1AA57E1-A471-4EC7-A9B8-5F04FE324E8A-print.eps</a></div>
<!-- class="figure" -->
<p>(<span class="italic"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABHCHAG">formatSpec::=</a></span>)</p>
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCFHEA"><a id="d11486e1345" class="indexterm-anchor"></a><a id="d11486e1349" class="indexterm-anchor"></a><span class="bold"><span class="italic">notBackedUpSpec</span>::=</span></p>
<div class="figure" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-550CB35F-518D-4B3A-8B47-5A77868F1199"><img width="352" height="64" src="img/GUID-9C496381-2757-48E4-88A2-C7360ECA7154-default.gif" alt="Description of GUID-9C496381-2757-48E4-88A2-C7360ECA7154-print.eps follows" title="Description of GUID-9C496381-2757-48E4-88A2-C7360ECA7154-print.eps follows"/><br/>
<a href="img_text/GUID-9C496381-2757-48E4-88A2-C7360ECA7154-print.htm">Description of the illustration GUID-9C496381-2757-48E4-88A2-C7360ECA7154-print.eps</a></div>
<!-- class="figure" -->
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDGFJFB"><a id="d11486e1361" class="indexterm-anchor"></a><a id="d11486e1365" class="indexterm-anchor"></a><span class="bold"><span class="italic">skipSpec</span>::=</span></p>
<div class="figure" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-A5E144FB-CA25-44DF-9F28-2F9216C9BC99"><img width="169" height="74" src="img/GUID-5CC0E22B-3C55-422D-9A8A-1508AD2D6D3F-default.gif" alt="Description of GUID-5CC0E22B-3C55-422D-9A8A-1508AD2D6D3F-print.eps follows" title="Description of GUID-5CC0E22B-3C55-422D-9A8A-1508AD2D6D3F-print.eps follows"/><br/>
<a href="img_text/GUID-5CC0E22B-3C55-422D-9A8A-1508AD2D6D3F-print.htm">Description of the illustration GUID-5CC0E22B-3C55-422D-9A8A-1508AD2D6D3F-print.eps</a></div>
<!-- class="figure" --></div>
<!-- class="section" -->
<div class="section" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCFGEI">
<p class="subhead1">Semantics</p>
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1016992"><a id="d11486e1380" class="indexterm-anchor"></a><a id="d11486e1384" class="indexterm-anchor"></a> <span class="bold"><span class="italic">backup</span></span></p>
<p>This clause specifies the objects to be backed up and the options to control the backup. Refer to <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBCEDG">backupOperand::=</a></span> for the syntax diagram.</p>
<div class="tblformalwide" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-8EFBFA10-FB72-44D0-974C-A110792C6EB8">
<table class="cellalignment1044" summary="Describes BACKUP command parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d11486e1406">Syntax Element</th>
<th class="cellalignment1052" id="d11486e1409">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e1414" headers="d11486e1406">
<p><span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1009966">backupOperand</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e1414 d11486e1409">
<p>Specifies various options for the <code class="codeph">BACKUP</code> command.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e1427" headers="d11486e1406">
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1035382"><span class="italic"><code class="codeph"><span class="codeinlineitalic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBGHJEH">backupSpec</a></span></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e1427 d11486e1409">
<p>Specifies one or more objects to be backed up.</p>
<p>Each <span class="italic"><code class="codeph">backupSpec</code></span> clause generates one or more backup sets (<code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBGAJI">AS&nbsp;BACKUPSET</a></code>) or image copies (<code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDEHBEJ">AS&nbsp;COPY</a></code>). For <code class="codeph">AS BACKUPSET</code>, the <span class="italic"><code class="codeph">backupSpec</code></span> clause generates multiple backup sets if the number of data files specified in or implied by its list of objects exceeds the <code class="codeph">FILESPERSET</code> limit.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e1463" headers="d11486e1406">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;PLUS&nbsp;ARCHIVELOG</code></p>
</td>
<td class="cellalignment1053" headers="d11486e1463 d11486e1409">
<p><a id="d11486e1469" class="indexterm-anchor"></a>Includes archived redo log files in the backup (see <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFHAHB">Example 2-13</a>). Causes RMAN to perform the following steps:</p>
<ol>
<li>
<p>Run an <code class="codeph">ALTER SYSTEM ARCHIVE LOG CURRENT</code> statement.</p>
</li>
<li>
<p>Run the <code class="codeph">BACKUP ARCHIVELOG ALL</code> command. If backup optimization is enabled, then RMAN only backs up logs that have not yet been backed up.</p>
</li>
<li>
<p>Back up the files specified in the <code class="codeph">BACKUP</code> command.</p>
</li>
<li>
<p>Run an <code class="codeph">ALTER SYSTEM ARCHIVE LOG CURRENT</code> statement.</p>
</li>
<li>
<p>Back up any remaining archived redo log files. If backup optimization is not enabled, then RMAN backs up the logs generated in step 1 plus all the logs generated during the backup.</p>
</li>
</ol>
<p>In a CDB, <a id="d11486e1506" class="indexterm-anchor"></a><a id="d11486e1510" class="indexterm-anchor"></a>you can backup archived redo logs only when you connect to the root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege. You cannot include archive logs in the backup when connected to a PDB. See <span class="q">&#34;<a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>&#34;</span>.</p>
<p><span class="bold">Note:</span> You cannot specify <code class="codeph">PLUS ARCHIVELOG</code> on the <code class="codeph">BACKUP ARCHIVELOG</code> command or <code class="codeph">BACKUP AS COPY INCREMENTAL</code> command (or <code class="codeph">BACKUP INCREMENTAL</code> command when the default backup type is <code class="codeph">COPY</code>). You cannot specify <code class="codeph">PLUS ARCHIVELOG</code> when also specifying <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFFDAG">INCREMENTAL FROM SCN</a></code>.</p>
<p><span class="bold">Note:</span> Unless the online redo log is archived at the end of the backup, <code class="codeph">DUPLICATE</code> is not possible with this backup.</p>
<p><span class="bold">Note:</span> This clause cannot be used with the <code class="codeph">KEEP UNTIL</code> clause.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e1569" headers="d11486e1406">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;</code>&nbsp;<span class="italic"><code class="codeph"><span class="codeinlineitalic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1017449">backupSpecOperand</a></span></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e1569 d11486e1409">
<p>Specifies a variety of options and parameters that affect the <span class="italic"><code class="codeph"><span class="codeinlineitalic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBGHJEH">backupSpec</a></span></code></span> clause.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1009966"><span class="bold"><span class="italic">backupOperand</span></span></p>
<p>This subclause specifies options such as the device type and output format. Refer to <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBCEDG">backupOperand::=</a></span> for the syntax diagram.</p>
<div class="tblformalwide" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-C679377C-8C01-4A1C-B0CD-3EFC2333B841">
<table class="cellalignment1044" summary="Describes BACKUP command backupOperand parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d11486e1606">Syntax Element</th>
<th class="cellalignment1052" id="d11486e1609">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e1614" headers="d11486e1606">
<p><span class="italic"><code class="codeph"><span class="codeinlineitalic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1015382">backupTypeSpec</a></span></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e1614 d11486e1609">
<p>Specifies the type of backup being created, either backup sets (<code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBGAJI">AS&nbsp;BACKUPSET</a></code>) or image copies (<code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDEHBEJ">AS&nbsp;COPY</a></code>).</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><span class="codeinlineitalic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1015382">backupTypeSpec</a></span></code></span> for details</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e1643" headers="d11486e1606">
<p><code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDDCCAA">CHANNEL</code>&nbsp;<span class="italic"><code class="codeph">channel_id</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e1643 d11486e1609">
<p>Specifies the case-sensitive name of a channel to use when creating backups. Use any meaningful name, for example <code class="codeph">ch1</code> or <code class="codeph">dev1</code>. The database uses the channel ID to report I/O errors. If you do not set this parameter, then RMAN dynamically assigns the backup sets to any available channels during execution.</p>
<p>As shown in <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCJHFH">Example 2-22</a>, you can use <code class="codeph">CHANNEL</code> to specify which channels back up which files.</p>
<p><span class="bold">Note:</span> You can also specify this parameter in the <span class="italic"><code class="codeph"><span class="codeinlineitalic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBGHJEH">backupSpec</a></span></code></span> clause.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e1678" headers="d11486e1606">
<p><code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBHECJ">CHECK&nbsp;LOGICAL</code></p>
</td>
<td class="cellalignment1053" headers="d11486e1678 d11486e1609">
<p>Tests data and index blocks that pass physical corruption checks for logical corruption (see <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFIFDI">Example 2-24</a>). This option typically adds 1-3% overhead.</p>
<p>Examples of logical corruption are corruption of a row piece or index entry. If RMAN finds logical corruption, then it logs the block in the alert log and server session trace file. The <code class="codeph"><a href="rcmsynta2014.htm#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">MAXCORRUPT</code> command specifies the total number of physical and logical corruptions permitted in a data file.</p>
<p>By default, the <code class="codeph">BACKUP</code> command computes a checksum for each block and stores it in the backup. If you specify the <code class="codeph">NOCHECKSUM</code> option, then RMAN does not perform a checksum of the blocks when writing the backup.</p>
<p>If <code class="codeph">SET MAXCORRUPT</code> and <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCHHBH">NOCHECKSUM</a></code> are not set, then <code class="codeph">CHECK</code> <code class="codeph">LOGICAL</code> detects all types of corruption that are possible to detect during a backup.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e1721" headers="d11486e1606">
<p><code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJAEBG">COPIES</code> <span class="italic"><code class="codeph">integer</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e1721 d11486e1609">
<p>Sets the number of identical backups (<code class="codeph">1</code> - <code class="codeph">4</code>) that RMAN creates. The default value is <code class="codeph">1</code>.</p>
<p>You can use multiple format strings to specify different names and locations for the copies. <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJIJDH">Example 2-21</a> illustrates a duplexed backup to different locations on disk.</p>
<p>RMAN can duplex backups to either disk or tape, but cannot duplex backups to tape and disk simultaneously. When backing up to tape, ensure that the number of copies does not exceed the number of available tape devices. Also, if <code class="codeph">COPIES</code> is greater than 1, then the <code class="codeph">BACKUP_TAPE_IO_SLAVES</code> initialization parameter must be enabled on the target database.</p>
<p>You can specify duplexing in multiple commands. The order of precedence is as follows, with settings higher on the list overriding lower settings:</p>
<ol>
<li>
<p><code class="codeph">BACKUP</code> <code class="codeph">COPIES</code></p>
</li>
<li>
<p><code class="codeph"><a href="rcmsynta2014.htm#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">BACKUP</code> <code class="codeph">COPIES</code></p>
</li>
<li>
<p><code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> <code class="codeph">...</code> <code class="codeph">BACKUP</code> <code class="codeph">COPIES</code></p>
</li>
</ol>
<p><span class="bold">Note:</span> This option does not apply with <code class="codeph">AS COPY</code> and results in an error message.</p>
<p><span class="bold">Note:</span> Duplexing cannot be used when creating files in the fast recovery area.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e1802" headers="d11486e1606">
<p><code class="codeph">CUMULATIVE</code></p>
</td>
<td class="cellalignment1053" headers="d11486e1802 d11486e1609">
<p>Copies the data blocks used since the most recent level 0 backup (see <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDECGDC">Example 2-15</a>).</p>
<p><span class="bold">Note:</span> This option does not apply with <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDEHBEJ">AS&nbsp;COPY</a></code> and results in an error message.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e1820" headers="d11486e1606">
<p><code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDGBFGF">DEVICE&nbsp;TYPE</code> <span class="italic"><code class="codeph"><span class="codeinlineitalic"><a href="rcmsubcl007.htm#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></span></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e1820 d11486e1609">
<p>Allocates automatic channels for the specified device type only. For example, if you configure disk and tape channels, then configure <code class="codeph">sbt</code> as the default device type, then the following command allocates disk channels only:</p>
<pre dir="ltr">BACKUP DEVICE TYPE DISK DATABASE;
</pre>
<p>The <code class="codeph">DEVICE TYPE</code> option is valid only for automatic channels and is not valid for manually allocated channels. You cannot use the <code class="codeph">DEVICE TYPE</code> option for a device other than <code class="codeph">DISK</code> if you have not run <code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> <code class="codeph">DEVICE TYPE</code> for this device.</p>
<p><span class="bold">Note:</span> To specify a disk channel for the <code class="codeph">BACKUP RECOVERY AREA</code> command, you must use the <code class="codeph">TO DESTINATION</code> of the subclause <a href="rcmsubcl001.htm#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA__CIHHJFBD">toDestSpec</a>.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><span class="codeinlineitalic"><a href="rcmsubcl007.htm#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></span></code></span></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e1882" headers="d11486e1606">
<p><code class="codeph">DISKRATIO</code> <span class="italic"><code class="codeph">integer</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e1882 d11486e1609">
<p>Directs RMAN to populate each backup set with data files from at least <span class="italic">integer</span> disks.</p>
<p>This parameter is only enabled when you are backing up data files or control files, and when the operating system can give RMAN disk contention and node affinity data. To manually disable this feature, set <code class="codeph">DISKRATIO</code> to <code class="codeph">0</code>.</p>
<p>For example, assume that data files are distributed across 10 disks. If the disks supply data at 10 bytes/second, and if the tape drive requires 50 bytes/second to keep streaming, then set <code class="codeph">DISKRATIO</code> to <code class="codeph">5</code> to direct RMAN to include data files from at least 5 disks in each backup set.</p>
<p>If you set <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDEECJA">FILESPERSET</a></code> but not <code class="codeph">DISKRATIO</code>, then <code class="codeph">DISKRATIO</code> defaults to the same value as <code class="codeph">FILESPERSET</code>. If you specify neither parameter, then <code class="codeph">DISKRATIO</code> defaults to 4. RMAN compares the <code class="codeph">DISKRATIO</code> value to the actual number of devices involved in the backup and uses the lowest value. For example, if <code class="codeph">DISKRATIO</code> is 4 and the data files are located on three disks, then RMAN attempts to include data files from three disks in each backup set.</p>
<p>The <code class="codeph">DISKRATIO</code> parameter is easier for data file backups when the data files are striped or reside on separate disk spindles and you either:</p>
<ul style="list-style-type: disc;">
<li>
<p>Use a high-bandwidth tape drive that requires several data files to be multiplexed to keep the tape drive streaming.</p>
</li>
<li>
<p>Make backups while the database is open and spread the I/O load across several disk spindles to leave bandwidth for online operations.</p>
</li>
</ul>
<p><span class="bold">Note:</span> Do not spread I/O over more than the minimum number of disks required to keep the tape streaming. Otherwise, you increase restore time for a file without increasing performance.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e1954" headers="d11486e1606">
<p><span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1010261">duration</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e1954 d11486e1609">
<p>Specifies options related to the maximum time for a backup command to run.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1010261">duration</a></code></span></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e1972" headers="d11486e1606">
<p><span class="italic"><code class="codeph"><span class="codeinlineitalic"><a href="rcmsubcl008.htm#GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3">fileNameConversionSpec</a></span></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e1972 d11486e1609">
<p>This option is valid only when <code class="codeph">BACKUP</code> is creating image copies. Files being copied are renamed according to the specified patterns. If a file being backed up has a name that does not match any of the specified rename patterns, then RMAN uses <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJFEHD">FORMAT</a></code> to name the output image copies. If no <code class="codeph">FORMAT</code> is specified, then RMAN uses the default format <code class="codeph"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABGHHGH">%U</a></code>.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><span class="codeinlineitalic"><a href="rcmsubcl008.htm#GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3">fileNameConversionSpec</a></span></code></span> for file renaming patterns</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2009" headers="d11486e1606">
<p><code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDEECJA">FILESPERSET</code> <span class="italic"><code class="codeph">integer</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e2009 d11486e1609">
<p>Specifies the maximum number of input files to include in each output backup set. This parameter is only relevant when <code class="codeph">BACKUP</code> generates backup sets.</p>
<p>RMAN backs up the files in each <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBGHJEH">backupSpec</a></code></span> as one or more backup sets. When the number of files in each <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBGHJEH">backupSpec</a></code></span> exceeds the <code class="codeph">FILESPERSET</code> setting, then RMAN splits the files into multiple backup sets accordingly. The default value for <code class="codeph">FILESPERSET</code> is <code class="codeph">64</code>.</p>
<p>The RMAN behavior is illustrated by the following <code class="codeph">BACKUP</code> commands:</p>
<pre dir="ltr">BACKUP AS BACKUPSET (DATAFILE 3, 4, 5, 6, 7) (DATAFILE 8, 9);
BACKUP AS BACKUPSET DATAFILE 3, 4, 5, 6, 7, 8, 9;
BACKUP AS BACKUPSET DATAFILE 3, ... 72;
</pre>
<p>In the first command, RMAN places data files 3, 4, 5, 6, and 7 into one backup set and data files 8 and 9 into another backup set. In the second command, RMAN places all data files into one backup set. In the third command, the ellipses indicate data files 3 through 72. Because in this case RMAN is backing up 70 data files, RMAN places 64 files in one backup set and 6 in another.</p>
<p>By default, RMAN divides files among backup sets to make optimal use of channel resources. The number of files to be backed up is divided by the number of channels. If the result is less than 64, then this number is the <code class="codeph">FILESPERSET</code> value. Otherwise, <code class="codeph">FILESPERSET</code> defaults to 64.</p>
<p><span class="bold">Note:</span> You cannot specify the number of backup pieces that are in a backup set.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2066" headers="d11486e1606">
<p><code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDGFFBB">FORCE</code></p>
</td>
<td class="cellalignment1053" headers="d11486e2066 d11486e1609">
<p>Forces RMAN to ignore backup optimization. That is, even if <code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> <code class="codeph">BACKUP OPTIMIZATION</code> is set to <code class="codeph">ON</code>, RMAN backs up all specified files.</p>
<p><span class="bold">Note:</span> You can also specify this option in the <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1017449">backupSpecOperand</a></code></span> clause.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2095" headers="d11486e1606">
<p><code class="codeph">AUXILIARY&nbsp;FORMAT</code></p>
</td>
<td class="cellalignment1053" headers="d11486e2095 d11486e1609">
<p>Copies the files on the target database to the specified location on the auxiliary instance. RMAN can only generate image copies when <code class="codeph">AUXILIARY FORMAT</code> is specified. RMAN must be connected to both <code class="codeph">TARGET</code> and <code class="codeph">AUXILIARY</code> instances and have access to auxiliary channels.</p>
<p>You can use the <code class="codeph">BACKUP AUXILIARY FORMAT</code> command to copy data files, archived logs, controlfile, and server parameter file (spfile) over the network between primary and standby databases. For example, if a data file on a primary database was lost, you could <code class="codeph"><a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code> to the standby database as <code class="codeph">TARGET</code> and the primary database as <code class="codeph">AUXILIARY</code>, and copy an intact data file from the standby host to the primary host.</p>
<p><span class="bold">See Also:</span> <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBCEHII">Example 2-29</a></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2132" headers="d11486e1606">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;</code><span class="italic"><code class="codeph"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED">formatSpec</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e2132 d11486e1609">
<p>Specifies a pattern for naming the output image copies on an auxiliary instance. The path must be valid on the auxiliary host.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED">formatSpec</a></code></span> for valid substitution variables</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2156" headers="d11486e1606">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;NEW</code></p>
</td>
<td class="cellalignment1053" headers="d11486e2156 d11486e1609">
<p>Creates an image copy in the directory specified in the <code class="codeph">DB_CREATE_FILE_DEST</code> initialization parameter of the auxiliary instance. The image copy is an Oracle-managed file.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2167" headers="d11486e1606">
<p><code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJFEHD">FORMAT</code> <span class="italic"><code class="codeph"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED">formatSpec</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e2167 d11486e1609">
<p>Specifies a pattern for naming the output backup pieces or image copies (see <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDHAGDD">Example 2-16</a>). For <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDEHBEJ">AS&nbsp;COPY</a></code>, if one or more of the directories mentioned in the specified format does not exist, then RMAN signals an error.</p>
<p>The default location for disk backups depends on whether a fast recovery area is enabled and whether <code class="codeph">FORMAT</code> is specified:</p>
<ul style="list-style-type: disc;">
<li>
<p>If a fast recovery area is enabled, and if you <span class="italic">do</span> specify <code class="codeph">FORMAT</code>, then RMAN names the output files according to the <code class="codeph">FORMAT</code> setting. If no location is specified in <code class="codeph">FORMAT</code>, then RMAN creates the backup in a platform-specific location&mdash;not in the recovery area.</p>
</li>
<li>
<p>If a fast recovery area is enabled, and if you do <span class="italic">not</span> specify <code class="codeph">FORMAT</code>, then RMAN creates the backup in the recovery area and uses the substitution variable <code class="codeph"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABGHHGH">%U</a></code> to name the backup.</p>
</li>
<li>
<p>If a fast recovery area is <span class="italic">not</span> enabled, and if you do <span class="italic">not</span> specify <code class="codeph">FORMAT</code>, then RMAN creates the backup in a platform-specific location and uses <code class="codeph"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABGHHGH">%U</a></code> to name the backup.</p>
</li>
</ul>
<p>To create RMAN backups in the fast recovery area with names in Oracle Managed Files format, do not specify the <code class="codeph">FORMAT</code> clause on the <code class="codeph">BACKUP</code> command or channel.</p>
<p><span class="bold">Note:</span> You cannot specify an Oracle Managed Files file name as the format for a backup. For example, if <code class="codeph">+DISK1/datafile/system.732.609791431</code> is an OMF file name, then you cannot specify this file name in the <code class="codeph">FORMAT</code> parameter.</p>
<p>Backup pieces must have unique names. The maximum length of a backup piece file name is platform-specific. For backups to a media manager, the length is also limited by the limit in the supported version of the media management API. Vendors supporting SBT 1.1 must support file names up to 14 characters. Some SBT 1.1 vendors may support longer file names. Vendors supporting SBT 2.0 must support file names up to 512 characters. Some SBT 2.0 vendors may support longer file names.</p>
<p>You cannot specify multiple, identical <code class="codeph">FORMAT</code> strings within a single <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBGHJEH">backupSpec</a></code></span> (for example, <code class="codeph">BACKUP DATAFILE 3 TO &#39;/tmp/df3.f&#39;, DATAFILE 4 TO &#39;/tmp/df4.f&#39;</code>). However, RMAN permits a single <code class="codeph">FORMAT</code> string to exist in multiple <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBGHJEH">backupSpec</a></code></span> clauses.</p>
<p><span class="bold">Note:</span> If you are making an archival backup with the <code class="codeph">KEEP</code> option (see <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCIBCJ">Example 2-25</a>), then the format string must contain <code class="codeph">%U</code>. The autobackup also uses this format string.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED">formatSpec</a></code></span> for valid substitution variables</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2300" headers="d11486e1606">
<p><code class="codeph">TO DESTINATION</code> <span class="italic"><code class="codeph"><a href="rcmsubcl001.htm#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA__CIHHJFBD">toDestSpec</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e2300 d11486e1609">
<p>Specifies the directory where the backup is created. This parameter is valid for disk and not SBT channels. The backup files are created in an Oracle Managed Files (OMF) directory. Backup skips the files only when backups do not exist in the specified <code class="codeph">TO DESTINATION</code>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2316" headers="d11486e1606">
<p><span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1015480">forRecoveryOfSpec</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e2316 d11486e1609">
<p>Identifies the backup being created as an incremental backup to be used in rolling forward an image copy.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1015480">forRecoveryOfSpec</a></code></span></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2334" headers="d11486e1606">
<p><code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBFDFJE">FOR TRANSPORT</code></p>
</td>
<td class="cellalignment1053" headers="d11486e2334 d11486e1609">
<p>Creates a <a id="d11486e2341" class="indexterm-anchor"></a><a id="d11486e2345" class="indexterm-anchor"></a>cross-platform backup using backup sets. You can back up data files, tablespaces, or an entire database. While creating a cross-platform tablespace backup, use the <code class="codeph">DATAPUMP</code> clause to back up the metadata of the transported tablespaces. This metadata is used on the destination database to plug in the transported tablespaces.</p>
<p>Backup sets created by a cross-platform backup are not catalogued in the control file.</p>
<p>Before you backup the whole database for cross-platform transport, ensure that the database is in read-only mode. You can transport a database only if the source and destination use the same endian format.</p>
<p>While backing up tablespaces, the tablespaces being backed must be in read-only mode, unless the <code class="codeph">ALLOW INCONSISTENT</code> clause is used. To transport tablespaces, the source and destination can use different endian formats. When <code class="codeph">FOR TRANSPORT</code> is used, endian conversion is performed on the destination database.</p>
<p><span class="bold">See Also:</span> <span class="q">&#34;<a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBCCDEA">Backing Up Data for Cross-Platform Transport</a>&#34;</span></p>
<p><span class="bold">Note:</span> Cross-platform backups using backup sets are supported from Oracle Database 12<span class="italic">c</span> Release 1 (12.1).</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2380" headers="d11486e1606">
<p><code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBIFHAH">ALLOW INCONSISTENT</code></p>
</td>
<td class="cellalignment1053" headers="d11486e2380 d11486e1609">
<p>Enables you to backup tablespaces that are not in read-only mode.</p>
<p>You cannot use <code class="codeph">ALLOW INCONSISTENT</code> for cross-platform whole database backups.</p>
<p>Although the backup is created, you cannot plug these tablespaces directly into the target database because they are inconsistent. You must later create an incremental backup of the tablespaces when they are in read-only mode. This incremental backup must contain the <code class="codeph">DATAPUMP</code> clause, which is used to create a backup set containing an export dump file of the tablespace metadata.</p>
<p><span class="bold">See Also:</span> <a class="olink BRADV05432" target="_blank" href="../BRADV/rcmxplat.htm#BRADV05432"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for more information about creating an restoring inconsistent tablespace backups.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2408" headers="d11486e1606">
<p><code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBDFGF">FULL</code></p>
</td>
<td class="cellalignment1053" headers="d11486e2408 d11486e1609">
<p>Creates a backup of all blocks of data files included in the backup. <code class="codeph">FULL</code> is the opposite of <code class="codeph">INCREMENTAL</code>. RMAN makes full backups by default if neither <code class="codeph">FULL</code> nor <code class="codeph">INCREMENTAL</code> is specified.</p>
<p>A full backup has no effect on subsequent incremental backups and is not considered a part of any incremental backup strategy. A full image copy backup can be incrementally updated, however, by applying incremental backups with the <code class="codeph"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code> command.</p>
<p><span class="bold">Note:</span> Unused block compression, which is described in the entry for <code class="codeph">BACKUP</code> <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIHCHG">AS&nbsp;BACKUPSET</a></code>, causes some data file blocks to be skipped during full backups.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2446" headers="d11486e1606">
<p><code class="codeph">INCREMENTAL&nbsp;LEVEL</code> <span class="italic"><code class="codeph">integer</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e2446 d11486e1609">
<p>Copies only those data blocks that have changed since the last incremental <span class="italic"><code class="codeph">integer</code></span> backup, where <span class="italic"><code class="codeph">integer</code></span> is <code class="codeph">0</code> or <code class="codeph">1</code> (see <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDECGDC">Example 2-15</a>).</p>
<p>See <span class="q">&#34;<a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBHABHH">Incremental Backups</a>&#34;</span> for an explanation of incremental backups.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2480" headers="d11486e1606">
<p><code class="codeph">INCREMENTAL&nbsp;FROM&nbsp;SCN</code> <span class="italic"><code class="codeph">integer</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e2480 d11486e1609">
<p>Creates an incremental backup of all specified data files that includes all data file blocks changed at SCNs greater than or equal to the specified SCN.</p>
<p>One use of this option is to refresh a standby database with changes from the primary database (see <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDECIJB">Example 2-23</a>, and the chapter on RMAN backups in <a class="olink SBYDB04700" target="_blank" href="../SBYDB/rman.htm#SBYDB04700"><span class="italic">Oracle Data Guard Concepts and Administration</span></a>). This backup contains all changed blocks since the standby database was created or last synchronized. At the standby database, you can use <code class="codeph"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code> with <code class="codeph">NOREDO</code> to apply the incremental backup. All changed blocks captured in the incremental backup are applied at the standby database, bringing it current with the primary database.</p>
<p><a id="d11486e2509" class="indexterm-anchor"></a><a id="d11486e2511" class="indexterm-anchor"></a>If you are <span class="italic">not</span> making incremental backups based on Volume Shadow Copy Service (VSS) snapshots, then specify <span class="italic"><code class="codeph"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED">formatSpec</a></code></span> when you specify <code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFFDAG">INCREMENTAL FROM SCN</code>. The <code class="codeph">FORMAT</code> string should include substitution variables such as <code class="codeph"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABGHHGH">%U</a></code> because RMAN generates a control file backup.</p>
<p>If you specify <code class="codeph">FROM SCN</code> with the <code class="codeph">NOKEEP</code> option, and if you do <span class="italic">not</span> specify <span class="italic"><code class="codeph"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED">formatSpec</a></code></span> when you specify <code class="codeph">INCREMENTAL FROM SCN</code>, then RMAN creates incremental backups in the fast recovery area so that you can create incremental backups based on VSS snapshots in a Windows environment. In this way, you can use incremental backup sets and VSS shadow copies in conjunction. The checkpoint SCN value specified in the <code class="codeph">FROM SCN</code> parameter should be same as the <code class="codeph">BACKUP_CHECKPOINT</code> value in the VSS backup metadata document. If block change tracking is enabled, then the backups use the change tracking mechanism, which significantly reduces the time taken to create incremental backups. RMAN can apply incremental backups from the fast recovery area during recovery transparently.</p>
<p><span class="bold">Note:</span> You cannot use <code class="codeph">PLUS ARCHIVELOG</code> when also specifying <code class="codeph">INCREMENTAL FROM SCN</code>.</p>
<p><span class="bold">See Also:</span> <a class="olink NTQRF280" target="_blank" href="../NTQRF/vss.htm#NTQRF280"><span class="italic">Oracle Database Platform Guide for Microsoft Windows</span></a> to learn about making backups with VSS</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2584" headers="d11486e1606">
<p><span class="italic"><code class="codeph"><a href="rcmsubcl013.htm#GUID-36E9008E-48A5-4AB9-8C9D-2D477342594B">keepOption</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e2584 d11486e1609">
<p><a id="d11486e2593" class="indexterm-anchor"></a><a id="d11486e2597" class="indexterm-anchor"></a>Overrides any configured retention policy for this backup so that the backup is not considered obsolete, as shown in <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCIBCJ">Example 2-25</a>.</p>
<p>You can use the <code class="codeph">KEEP</code> syntax to generate archival database backups that satisfy business or legal requirements. The <code class="codeph">KEEP</code> setting is an attribute of the backup set (not individual backup piece) or image copy.</p>
<p><span class="bold">Note:</span> You cannot use <code class="codeph">KEEP</code> with <code class="codeph">BACKUP BACKUPSET</code>.</p>
<p>With the <code class="codeph">KEEP</code> syntax, you can keep the backups so that they are considered obsolete after a specified time (<code class="codeph">KEEP UNTIL</code>), or make them never obsolete (<code class="codeph">KEEP FOREVER</code>). As shown in <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJJIJG">Example 2-26</a>, you must be connected to a recovery catalog when you specify <code class="codeph">KEEP FOREVER</code>.</p>
<p><span class="bold">Note:</span> You can use <code class="codeph"><a href="rcmsynta008.htm#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2">CHANGE</a></code> to alter the status of a backup generated with <code class="codeph">KEEP</code>.</p>
<p><span class="bold">Note:</span> You cannot use <code class="codeph">KEEP UNTIL</code> with <code class="codeph">PLUS ARCHIVELOG</code>.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsubcl013.htm#GUID-36E9008E-48A5-4AB9-8C9D-2D477342594B">keepOption</a></code></span> for more information about backups made with the <code class="codeph">KEEP</code> option</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2674" headers="d11486e1606">
<p><code class="codeph">MAXSETSIZE</code> <span class="italic"><code class="codeph"><a href="rcmsubcl019.htm#GUID-146EDBEE-BCED-4BD4-A720-8E51AA8DC577">sizeSpec</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e2674 d11486e1609">
<p><a id="d11486e2686" class="indexterm-anchor"></a>Specifies a maximum size for a backup set (as shown in <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDHAGDD">Example 2-16</a>). RMAN limits all backup sets to this size.</p>
<p>It is possible for a backup set to span multiple tapes, so blocks from each data file are written to multiple tapes. If one tape of a multivolume backup set fails, then you lose the data on all the tapes rather than just one. Because a backup set always includes a whole file rather than part of a file, you can use <code class="codeph">MAXSETSIZE</code> to specify that each backup set can fit on one tape.</p>
<p>Specify size in bytes (default), kilobytes (<code class="codeph">K</code>), megabytes (<code class="codeph">M</code>), or gigabytes (<code class="codeph">G</code>). For example, to limit a backup set to 3 MB, specify <code class="codeph">MAXSETSIZE 3M</code>. The default size is in bytes, rounded down from kilobytes. For example, <code class="codeph">MAXSETSIZE 3000</code> is rounded down to 2 KB (2048 bytes). The minimum value must be greater than or equal to the database block size.</p>
<p>The default number of files in each backup set is determined by <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDEECJA">FILESPERSET</a></code>, which defaults to 64. When you specify <code class="codeph">MAXSETSIZE</code>, RMAN attempts to limit the size in bytes of the backup sets according to the <code class="codeph">MAXSETSIZE</code> parameter. The limit on the number of files in a backup set applies even if the total size of the resulting backup set is less than <code class="codeph">MAXSETSIZE</code>.</p>
<p><span class="bold">Note:</span> This option results in an error message if used with <code class="codeph">BACKUP</code> <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFDFEH">AS&nbsp;COPY</a></code>. If you run <code class="codeph">BACKUP AS COPY</code> on a channel that has <code class="codeph">MAXSETSIZE</code> set, then <code class="codeph">MAXSETSIZE</code> is silently ignored.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2751" headers="d11486e1606">
<p><span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1017236">notBackedUpSpec</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e2751 d11486e1609">
<p><a id="d11486e2759" class="indexterm-anchor"></a>Limits the set of archived redo log files to be backed up according to whether a specified number of backups are present (and not obsolete), or whether the logs have been backed up since a specified date.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1017236">notBackedUpSpec</a></code></span></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2773" headers="d11486e1606">
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCHHBH"><code class="codeph">NOCHECKSUM</code></p>
</td>
<td class="cellalignment1053" headers="d11486e2773 d11486e1609">
<p><a id="d11486e2779" class="indexterm-anchor"></a><a id="d11486e2781" class="indexterm-anchor"></a>Suppresses block checksums during the backup.</p>
<p>A checksum is a number that is computed from the contents of a data block. <code class="codeph">DB_BLOCK_CHECKSUM</code> is a database initialization parameter that controls the writing of checksums for the blocks in data files in the database (not backups). If <code class="codeph">DB_BLOCK_CHECKSUM</code> is <code class="codeph">typical</code>, then the database computes a checksum for each block during normal operations and stores it in the block before writing it to disk. When the database reads the block from disk later, it recomputes the checksum and compares it to the stored value. If they do not match, then the block is damaged.</p>
<p><span class="bold">Note:</span> You cannot disable checksums for data files in the <code class="codeph">SYSTEM</code> tablespace even if <code class="codeph">DB_BLOCK_CHECKSUM=false</code>.</p>
<p>By default, the <code class="codeph">BACKUP</code> command computes a checksum for each block and stores it in the backup. The <code class="codeph">BACKUP</code> command ignores the values of <code class="codeph">DB_BLOCK_CHECKSUM</code> because this initialization parameter applies to data files in the database, not backups. If you specify the <code class="codeph">NOCHECKSUM</code> option, then RMAN does not perform a checksum of the blocks when writing the backup.</p>
<p>When restoring a backup data file, RMAN honors the <a id="d11486e2821" class="indexterm-anchor"></a><a id="d11486e2823" class="indexterm-anchor"></a><code class="codeph">DB_BLOCK_CHECKSUM</code> initialization parameter setting. RMAN clears the checksum if <code class="codeph">DB_BLOCK_CHECKSUM</code> is set to <code class="codeph">false</code>. If set to <code class="codeph">typical</code>, then RMAN verifies the checksum when restoring from the backup and writing to the data file.</p>
<p><span class="bold">Note:</span> You can turn off checksum checking by specifying <code class="codeph">NOCHECKSUM</code>, but other physical consistency checks, such as checks of the block headers and footers, cannot be disabled.</p>
<p><span class="bold">See Also:</span> <a class="olink REFRN" target="_blank" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for more information about the <code class="codeph">DB_BLOCK_CHECKSUM</code> initialization parameter</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2859" headers="d11486e1606">
<p><code class="codeph">NOEXCLUDE</code></p>
</td>
<td class="cellalignment1053" headers="d11486e2859 d11486e1609">
<p>When specified on a <code class="codeph">BACKUP</code> <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFCICI">DATABASE</a></code> or <code class="codeph">BACKUP COPY OF DATABASE</code> command, RMAN backs up all tablespaces, including any for which a <code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> <code class="codeph">EXCLUDE</code> command has been entered. This option does not override <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJJJCB">SKIP</a></code> <code class="codeph">OFFLINE</code> or <code class="codeph">SKIP READONLY</code>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2896" headers="d11486e1606">
<p><code class="codeph">POOL</code> <span class="italic"><code class="codeph">integer</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e2896 d11486e1609">
<p><a id="d11486e2906" class="indexterm-anchor"></a>Specifies the media pool in which the backup is stored. Consult your media management documentation to see whether <code class="codeph">POOL</code> is supported.</p>
<p><span class="bold">Note:</span> This option does not work with <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFDFEH">AS&nbsp;COPY</a></code> and results in an error.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2921" headers="d11486e1606">
<p><code class="codeph">PROXY</code></p>
</td>
<td class="cellalignment1053" headers="d11486e2921 d11486e1609">
<p><a id="d11486e2927" class="indexterm-anchor"></a><a id="d11486e2931" class="indexterm-anchor"></a><a id="d11486e2935" class="indexterm-anchor"></a>Backs up the specified files with the proxy copy functionality, which gives the media management software control over the data transfer between storage devices and the data files on disk. The media manager&mdash;not RMAN&mdash;decides how and when to move data.</p>
<p>When you run <code class="codeph">BACKUP</code> with the <code class="codeph">PROXY</code> option, RMAN performs these steps:</p>
<ol>
<li>
<p>Searches for a channel of the specified device type that is proxy-capable. If no such channel is found, then RMAN issues a warning and attempts a a conventional (that is, non-proxy) backup of the specified files.</p>
</li>
<li>
<p>If RMAN locates a proxy-capable channel, then it calls the media manager to check if it can proxy copy the files. If the media manager cannot proxy copy, then RMAN uses conventional backup sets to back up the files.</p>
</li>
</ol>
<p><span class="bold">Note:</span> If you specify <code class="codeph">PROXY</code>, then the <code class="codeph">%p</code> variable must be included in the <code class="codeph">FORMAT</code> string either explicitly or implicitly within <code class="codeph"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABGHHGH">%U</a></code>.</p>
<p><span class="bold">Note:</span> This option does not work with <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFDFEH">AS&nbsp;COPY</a></code> and results in an error.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2981" headers="d11486e1606">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;ONLY</code></p>
</td>
<td class="cellalignment1053" headers="d11486e2981 d11486e1609">
<p>Causes the database to issue an error message when it cannot proxy copy rather than creating conventional backup sets. If you do not want RMAN to try a conventional copy when a proxy copy fails, use the <code class="codeph">ONLY</code> option.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e2992" headers="d11486e1606">
<p><code class="codeph">REUSE</code></p>
</td>
<td class="cellalignment1053" headers="d11486e2992 d11486e1609">
<p><a id="d11486e2998" class="indexterm-anchor"></a><a id="d11486e3000" class="indexterm-anchor"></a><a id="d11486e3004" class="indexterm-anchor"></a>Enables RMAN to overwrite an existing backup or copy with the same name as the file that <code class="codeph">BACKUP</code> is currently creating.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3013" headers="d11486e1606">
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBJCAHI"><code class="codeph">SECTION&nbsp;SIZE</code> <span class="italic"><code class="codeph"><span class="codeinlineitalic"><a href="rcmsubcl019.htm#GUID-146EDBEE-BCED-4BD4-A720-8E51AA8DC577">sizeSpec</a></span></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e3013 d11486e1609">
<p><a id="d11486e3026" class="indexterm-anchor"></a><a id="d11486e3028" class="indexterm-anchor"></a><a id="d11486e3030" class="indexterm-anchor"></a><a id="d11486e3034" class="indexterm-anchor"></a><a id="d11486e3038" class="indexterm-anchor"></a>Specifies the size of each backup section produced during a data file or data file copy backup.</p>
<p>By setting this parameter, RMAN can create a <span class="bold">multisection backup</span>. In a multisection backup, RMAN creates a backup piece that contains one <span class="bold">file section</span>, which is a contiguous range of blocks in a file. All sections of a multisection backup are the same size.</p>
<p>File sections enable RMAN to create multiple steps for the backup of a single large data file. RMAN channels can process each step independently and in parallel, with each channel producing one section of a multisection backup set.</p>
<p>Multisection backups can be stored either as image copies or backup sets (both full and incremental). To create multisection image copies or incremental backups, the <code class="codeph">COMPATIBLE</code> parameter must be 12.0.0 or higher.</p>
<p><span class="bold">See Also:</span> <a class="olink BRADV665" target="_blank" href="../BRADV/rcmbckba.htm#BRADV665"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for more information about multisection image copies.</p>
<p><span class="bold">Note:</span> RMAN always creates multisection backups with <code class="codeph">FILESPERSET</code> set to 1.</p>
<p>If you specify a section size that is larger than the size of the file, then RMAN does not use multisection backup for the file. If you specify a small section size that would produce more than 256 sections, then RMAN increases the section size to a value that results in exactly 256 sections.</p>
<p><span class="bold">Note:</span> Depending on where you specify this parameter in the RMAN syntax, you can specify different section sizes for different files in the same backup job.</p>
<p><span class="bold">Note:</span> You cannot use <code class="codeph">SECTION SIZE</code> with <code class="codeph">MAXPIECESIZE</code>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3089" headers="d11486e1606">
<p><span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1017259">skipSpec</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e3089 d11486e1609">
<p><a id="d11486e3097" class="indexterm-anchor"></a><a id="d11486e3101" class="indexterm-anchor"></a>Excludes data files or archived redo log files from the backup if they are inaccessible, offline, or read-only.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1017259">skipSpec</a></code></span> for details.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3117" headers="d11486e1606">
<p><code class="codeph">TAG</code> <span class="italic"><code class="codeph">tag_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e3117 d11486e1609">
<p><a id="d11486e3127" class="indexterm-anchor"></a><a id="d11486e3131" class="indexterm-anchor"></a><a id="d11486e3135" class="indexterm-anchor"></a><a id="d11486e3139" class="indexterm-anchor"></a><a id="d11486e3143" class="indexterm-anchor"></a>Specifies a user-specified tag name for a backup set, proxy copy, data file copy, or control file copy. The tag is applied to the output files generated by the <code class="codeph">BACKUP</code> command.</p>
<p>The tag name is not case-sensitive. The name must be 30 characters or less. The characters are limited to the characters that are valid in file names on the target file system. For example, ASM does not support the use of the hyphen (<code class="codeph">-</code>) character in the file names it uses internally, so <code class="codeph">weekly-incremental</code> is not a valid tag name for backups in ASM disk groups. Environment variables are not valid in the <code class="codeph">TAG</code> parameter.</p>
<p>Typically, a tag name is a meaningful name such as <code class="codeph">MON_PM_BKUP</code> or <code class="codeph">WEEKLY_FULL_BKUP</code>. Tags are reusable, so that backup set 100 can have the tag <code class="codeph">MON_PM_BKUP</code> one week while backup set 105 has the same tag the next week.</p>
<p>If you do not specify a tag name, then by default RMAN creates a tag for backups (except for control file autobackups). The default tag uses the format <code class="codeph">TAG</code><span class="italic"><code class="codeph">YYYYMMDDTHHMMSS</code></span>, where <span class="italic"><code class="codeph">YYYY</code></span> is the year, <span class="italic"><code class="codeph">MM</code></span> is the month, <span class="italic"><code class="codeph">DD</code></span> is the day, <span class="italic"><code class="codeph">HH</code></span> is the hour (in 24-hour format), <span class="italic"><code class="codeph">MM</code></span> is the minutes, and <span class="italic"><code class="codeph">SS</code></span> is the seconds. For example, a backup of data file <code class="codeph">1</code> might receive the tag <code class="codeph">TAG20130208T133437</code>. The date and time refer to when RMAN started the backup. If multiple backup sets are created by one <code class="codeph">BACKUP</code> <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIHCHG">AS&nbsp;BACKUPSET</a></code> command, then each backup piece is assigned the same default tag.</p>
<p>You can also specify the tag at the <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBGHJEH">backupSpec</a></code></span> level. If you specify the tag at:</p>
<ul style="list-style-type: disc;">
<li>
<p>The command level, then all backup sets created by the command have the tag.</p>
</li>
<li>
<p>The <span class="italic"><code class="codeph">backupSpec</code></span> level, then backup sets created with different backup specifications can have different tags.</p>
</li>
<li>
<p>Both levels, then the tag in the <span class="italic"><code class="codeph">backupSpec</code></span> takes precedence.</p>
</li>
</ul>
<p><span class="bold">Note:</span> A tag is an attribute of each backup piece in a given copy of a backup set (for <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIHCHG">AS&nbsp;BACKUPSET</a></code>) or each image copy (for <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFDFEH">AS&nbsp;COPY</a></code>). For example, if you run <code class="codeph">BACKUP AS BACKUPSET COPIES 1 DATABASE TAG TUE_PM</code>, then only one copy of the backup set exists and each backup piece has tag <code class="codeph">TUE_PM</code>. Assume that this backup set has primary key <code class="codeph">1234</code>. If you then run <code class="codeph">BACKUP BACKUPSET 1234 TAG WED_PM</code>, then the first copy of the backup set has tag <code class="codeph">TUE_PM</code> and the second copy of the backup set has tag <code class="codeph">WED_PM</code>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3276" headers="d11486e1606">
<p><code class="codeph">TO PLATFORM &#39;</code><span class="italic"><code class="codeph">platform</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment1053" headers="d11486e3276 d11486e1609">
<p>Specifies <a id="d11486e3288" class="indexterm-anchor"></a><a id="d11486e3292" class="indexterm-anchor"></a>the full name of the destination platform to which the cross-platform backup will be transported. If you omit <code class="codeph">TO PLATFORM</code>, RMAN assumes that the destination platform is the same as the source platform.</p>
<p>Backup sets created by a cross-platform backup are not catalogued in the control file.</p>
<p>You can use either <code class="codeph">FOR TRANSPORT</code> or <code class="codeph">TO PLATFORM</code> to indicate that a backup is a cross-platform backup. If you specify a platform name using <code class="codeph">TO PLATFORM</code>, endianess conversion, if required, is performed on the source platform. Therefore, you can restore this cross-platform backup only on the specified platform. If you omit <code class="codeph">TO PLATFORM</code>, you can restore this cross-platform backup on any supported platform. The <code class="codeph">V$TRANSPORTABLE_PLATFORM</code> view provides information about the supported platforms.</p>
<p><span class="bold">See Also:</span> <span class="q">&#34;<a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBFDFJE">FOR TRANSPORT</a>&#34;</span></p>
<p><span class="bold">See Also:</span> <span class="q">&#34;<a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBBBHIB">Backing Up Data for Cross-Platform Transportation</a>&#34;</span> for information about the mode in which the database or tablespace is opened before creating a cross-platform backup</p>
<p><span class="bold">Note:</span> Cross-platform backups using backup sets are supported from Oracle Database 12<span class="italic">c</span> Release 1 (12.1).</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3342" headers="d11486e1606">
<p><code class="codeph">ALLOW INCONSISTENT</code></p>
</td>
<td class="cellalignment1053" headers="d11486e3342 d11486e1609">
<p>Enables you to backup tablespaces that are not in read-only mode.</p>
<p>You cannot use <code class="codeph">ALLOW INCONSISTENT</code> for cross-platform whole database backups.</p>
<p><span class="bold">See Also:</span> <span class="q">&#34;<a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBIFHAH">ALLOW INCONSISTENT</a>&#34;</span></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3363" headers="d11486e1606">
<p><code class="codeph">VALIDATE</code></p>
</td>
<td class="cellalignment1053" headers="d11486e3363 d11486e1609">
<p><a id="d11486e3369" class="indexterm-anchor"></a><a id="d11486e3373" class="indexterm-anchor"></a><a id="d11486e3377" class="indexterm-anchor"></a><a id="d11486e3379" class="indexterm-anchor"></a>Scans the specified files and verifies their contents, testing whether this file can be backed up and whether the data blocks are corrupt.</p>
<p>RMAN creates no output files. This option is equivalent to using the <code class="codeph"><a href="rcmsynta2025.htm#GUID-ECE57997-40CE-4029-A434-320441D2AD1E">VALIDATE</a></code> command on the database files specified in the backup.</p>
<p>If you do not specify <code class="codeph">CHECK LOGICAL</code>, then <code class="codeph">BACKUP VALIDATE</code> checks for physical corruption only. If you specify <code class="codeph">CHECK LOGICAL</code>, then <code class="codeph">BACKUP VALIDATE</code> checks for both physical and logical corruption. RMAN populates the <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code> view with any corruptions that it finds.</p>
<p>You can use the <code class="codeph"><a href="rcmsynta2014.htm#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">MAXCORRUPT</code> command to set a limit for the number of corrupt blocks tolerated during the backup validation. The default is zero.</p>
<p>If you execute <code class="codeph">BACKUP INCREMENTAL</code> with <code class="codeph">VALIDATE</code>, then the behavior depends on whether block change tracking is enabled. If change tracking is enabled, then RMAN validates only changed blocks; otherwise, RMAN validates all blocks in the files included in the backup.</p>
<p><span class="bold">Note:</span> You cannot validate backups of backup sets.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBGHJEH"><span class="bold"><span class="italic">backupSpec</span></span></p>
<p>This subclause specifies a list of one or more objects to be backed up. Each <span class="italic">backupSpec</span> clause generates one or more backup sets (<code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIHCHG">AS&nbsp;BACKUPSET</a></code>) or image copies (<code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFDFEH">AS&nbsp;COPY</a></code>). For <code class="codeph">AS BACKUPSET</code>, the <span class="italic">backupSpec</span> clause generates multiple backup sets if the number of data files specified in or implied by its list of objects exceeds the default limit of 4 data files or 16 archived redo log files in each backup set. Refer to <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCBGDA">backupSpec::=</a></span> for the syntax diagram.</p>
<div class="tblformalwide" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-11122EF8-7256-4D05-BF59-73835A56A970">
<table class="cellalignment1044" summary="Describes BACKUP command backupSpec parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d11486e3466">Syntax Element</th>
<th class="cellalignment1052" id="d11486e3469">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3474" headers="d11486e3466">
<p><span class="italic"><code class="codeph"><a href="rcmsubcl002.htm#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703">archivelogRecordSpecifier</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e3474 d11486e3469">
<p><a id="d11486e3483" class="indexterm-anchor"></a><a id="d11486e3487" class="indexterm-anchor"></a>Specifies a range of archived redo log files to be backed up.</p>
<p>To back up archived redo logs in a <a id="d11486e3492" class="indexterm-anchor"></a><a id="d11486e3496" class="indexterm-anchor"></a>CDB, connect to the root as a common user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege. You cannot back up archived redo logs when connected to a PDB. See <span class="q">&#34;<a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>&#34;</span>.</p>
<p>When backing up archived redo log files, RMAN can perform archived log failover automatically. RMAN backs up the log when at least one archived log corresponding to a given log sequence number and thread is available. Also, if the copy that RMAN is backing up contains corrupt blocks, then it searches for good copies of these blocks in other copies of the same archived redo log files.</p>
<p>RMAN does not signal an error if the command finds no logs to back up, since this situation probably exists because no new logs were generated after the previous <code class="codeph">BACKUP ARCHIVELOG ALL</code> <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIEAIE">DELETE INPUT</a></code> command. The only exception to this behavior is when the <code class="codeph">SEQUENCE</code> number clause is specified. In this scenario, RMAN signals the <code class="codeph">RMAN-06004</code> error if an archived redo log file of the specified sequence is not found.</p>
<p>If you specify <code class="codeph">BACKUP ARCHIVELOG ALL</code>, then RMAN backs up exactly one copy of each distinct log sequence number. For example, if you archive to multiple destinations, RMAN backs up <span class="italic">one</span> copy of each log sequence number&mdash;not each copy of each log sequence number. For other commands, such as <code class="codeph"><a href="rcmsynta015.htm#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code> <code class="codeph">ALL</code> does refer to every log, even duplicate log sequences.</p>
<p>If the database is open when you run <code class="codeph">BACKUP ARCHIVELOG</code>, and if the <code class="codeph">UNTIL</code> clause or <code class="codeph">SEQUENCE</code> parameter is not specified, then RMAN runs <code class="codeph">ALTER SYSTEM ARCHIVE LOG CURRENT</code>.</p>
<p><span class="bold">Note:</span> If you run <code class="codeph">BACKUP ARCHIVELOG ALL</code>, or if the specified log range includes logs from prior incarnations, then RMAN backs up logs from prior incarnations to ensure availability of all logs that may be required for recovery through an <code class="codeph">OPEN RESETLOGS</code>.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsubcl002.htm#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703">archivelogRecordSpecifier</a></code></span> for syntax, and <a class="olink BRADV" target="_blank" href="../BRADV/toc.htm"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> explanations of backup failover for logs and automatic log switching</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3586" headers="d11486e3466">
<p><code class="codeph">BACKUPSET</code></p>
</td>
<td class="cellalignment1053" headers="d11486e3586 d11486e3469">
<p>Specifies a backup of backup sets. Use this parameter with the <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDGBFGF">DEVICE&nbsp;TYPE</a></code> <code class="codeph">sbt</code> clause to offload backups on disk to tape (as shown in <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDGAGID">Example 2-20</a>). You cannot back up from tape to tape or from tape to disk: only from disk to disk or disk to tape.</p>
<p>If you specify the <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIEAIE">DELETE INPUT</a></code> option on the <code class="codeph">BACKUP BACKUPSET</code> command, then RMAN deletes all copies of the backup set that exist on disk. For example, if you duplexed a backup to 4 locations, then RMAN deletes all 4 backup sets. The <code class="codeph">ALL</code> option does not add any functionality.</p>
<p>RMAN performs <a id="d11486e3616" class="indexterm-anchor"></a><a id="d11486e3618" class="indexterm-anchor"></a><a id="d11486e3622" class="indexterm-anchor"></a><strong class="term">backup set failover</strong> when backing up backup sets. RMAN searches for all available backup copies when the copy that it is trying to back up is corrupted or missing. This behavior is similar to RMAN&#39;s behavior when backing up archived redo log files that exist in multiple archiving destinations.</p>
<p>If <strong class="term">backup optimization</strong> is enabled when you back up a backup set, and if the identical backup set has been backed up to the same device type, then RMAN skips the backup of this backup set.</p>
<p><span class="bold">Note:</span> You can duplex backups of backup sets with <code class="codeph">BACKUP COPIES</code> and <code class="codeph"><a href="rcmsynta2014.htm#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">BACKUP COPIES</code>.</p>
<p><span class="bold">Note:</span> When you use <code class="codeph">BACKUP BACKUPSET</code> command with encrypted backup sets, the backup sets are backed up in their encrypted form. Because <code class="codeph">BACKUP BACKUPSET</code> just copies the encrypted backup set to disk or tape, no decryption key is needed during a <code class="codeph">BACKUP BACKUPSET</code> operation. The data is never decrypted during any part of the operation. The <code class="codeph">BACKUP BACKUPSET</code> command can neither encrypt nor decrypt backup sets.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3666" headers="d11486e3466">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;ALL</code></p>
</td>
<td class="cellalignment1053" headers="d11486e3666 d11486e3469">
<p>Specifies all backup sets.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3674" headers="d11486e3466">
<p><code class="codeph">&nbsp;</code><span class="italic"><code class="codeph"><a href="rcmsubcl003.htm#GUID-BC83D915-FF57-467D-A606-5B699F2EF4DE">completedTimeSpec</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e3674 d11486e3469">
<p>Identifies backup sets according to completion time.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsubcl003.htm#GUID-BC83D915-FF57-467D-A606-5B699F2EF4DE">completedTimeSpec</a></code></span></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3696" headers="d11486e3466">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;</code><span class="italic"><code class="codeph">integer</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e3696 d11486e3469">
<p>Specifies backup sets according to primary key. You can obtain the primary keys for backup sets from the output of the <code class="codeph"><a href="rcmsynta027.htm#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">BACKUP</code> command.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3715" headers="d11486e3466">
<p><code class="codeph">FROM TAG</code> <span class="italic"><code class="codeph">tag_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e3715 d11486e3469">
<p>Identifies one or more backup sets by tag name. If multiple backup sets have the same tag name, then they are all are backed up. The <span class="italic"><code class="codeph">tag_name</code></span> is not case-sensitive.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3733" headers="d11486e3466">
<p><code class="codeph">CONTROLFILECOPY</code></p>
</td>
<td class="cellalignment1053" headers="d11486e3733 d11486e3469">
<p>Specifies one or more control file copies for backups.</p>
<p><a id="d11486e3741" class="indexterm-anchor"></a>A control file copy can be created with the <code class="codeph">BACKUP AS COPY CURRENT CONTROLFILE</code> command or the SQL <code class="codeph">ALTER DATABASE BACKUP CONTROLFILE TO &#39;...&#39;</code> command.</p>
<p><span class="bold">Note:</span> A control file autobackup is not a control file copy.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3755" headers="d11486e3466">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;&#39;</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment1053" headers="d11486e3755 d11486e3469">
<p>Specifies a control file copy by file name.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3768" headers="d11486e3466">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;ALL</code></p>
</td>
<td class="cellalignment1053" headers="d11486e3768 d11486e3469">
<p>Specifies all control file copies.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3776" headers="d11486e3466">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;LIKE</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">string_pattern</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment1053" headers="d11486e3776 d11486e3469">
<p>Specifies a control file copy by a file name pattern. The percent sign (<code class="codeph">%</code>) as a wildcard meaning 0 o r more characters; an underscore (<code class="codeph">_</code>) is a wildcard meaning 1 character.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3797" headers="d11486e3466">
<p><span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1017172">copyOfSpec</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e3797 d11486e3469">
<p>Makes a backup of previous image copies of data files and possibly control files.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1017172">copyOfSpec</a></code></span></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3816" headers="d11486e3466">
<p><code class="codeph">CURRENT&nbsp;CONTROLFILE</code></p>
</td>
<td class="cellalignment1053" headers="d11486e3816 d11486e3469">
<p>Specifies the current control file. When backing up as a backup set, RMAN first creates a snapshot control file for read consistency. You can configure the location of the snapshot control file with the <code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> command. In an Oracle Real Application Clusters (Oracle RAC) environment, the following restrictions apply:</p>
<ul style="list-style-type: disc;">
<li>
<p>The snapshot control file location must be on shared storage&mdash;that is, storage that is accessible by all Oracle RAC instances.</p>
</li>
<li>
<p>The destination of an image copy of the current control file must be shared storage.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3836" headers="d11486e3466">
<p><code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFCICI">DATABASE</code></p>
</td>
<td class="cellalignment1053" headers="d11486e3836 d11486e3469">
<p>Creates a backup of all data files in the database. If generating a backup set, then RMAN can include only data files and control files: it cannot include archived redo log files.</p>
<p>In a <a id="d11486e3845" class="indexterm-anchor"></a><a id="d11486e3849" class="indexterm-anchor"></a>CDB, creates a backup of all data files in the whole CDB. You connect to the root to backup the whole CDB. In a PDB, creates a backup of all data files in the PDB. To backup a PDB, connect to that PDB. See <span class="q">&#34;<a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>&#34;</span>.</p>
<p>If the <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBGHJEH">backupSpec</a></code></span> includes data file 1, and if <a id="d11486e3865" class="indexterm-anchor"></a><code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a> <a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDDCAHE">CONTROLFILE&nbsp;AUTOBACKUP</a></code> is <code class="codeph">OFF</code>, then RMAN automatically includes the control file in the backup. If the instance is started with a server parameter file, then RMAN also includes this parameter file in the backup.</p>
<p>If the <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBGHJEH">backupSpec</a></code></span> includes data file 1, and if <code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a> <a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDDCAHE">CONTROLFILE&nbsp;AUTOBACKUP</a></code> is <code class="codeph">ON</code>, then RMAN does <span class="italic">not</span> automatically include the control file in the output. Instead, RMAN generates a separate control file autobackup piece. If the instance is started with a server parameter file, then RMAN includes this parameter file in the autobackup piece.</p>
<p>Full database backups are usually either image copies or compressed backup sets. Image copies are more flexible than backup sets for some purposes (such as use in an incrementally updated backups strategy), and compressed backup sets make more efficient use of storage space, if the CPU overhead involved in creating them is tolerable.</p>
<p><span class="bold">Note:</span> To force RMAN to include the current control file in the backup when <code class="codeph">CONTROLFILE AUTOBACKUP</code> is <code class="codeph">ON</code>, specify the <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCIAAH">INCLUDE CURRENT CONTROLFILE</a></code> clause.</p>
<p><span class="bold">See Also:</span> The <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDECCGE">TABLESPACE</a></code> description to learn about backup behavior when the database includes bigfile tablespaces</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3925" headers="d11486e3466">
<p><code class="codeph">DATABASE ROOT</code></p>
</td>
<td class="cellalignment1053" headers="d11486e3925 d11486e3469">
<p>In a CDB, <a id="d11486e3932" class="indexterm-anchor"></a><a id="d11486e3936" class="indexterm-anchor"></a>creates a backup of the data files in the root. Connect to the root as a common user with the common <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.</p>
<p>See the previous description of <code class="codeph">DATABASE</code>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3953" headers="d11486e3466">
<p><code class="codeph">PLUGGABLE DATABASE</code> <span class="italic"><code class="codeph">pdb_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e3953 d11486e3469">
<p>Creates a <a id="d11486e3964" class="indexterm-anchor"></a><a id="d11486e3968" class="indexterm-anchor"></a>backup of the data files in one or more PDBs specified in a comma-delimited list. Connect to the root as described in <span class="q">&#34;<a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>&#34;</span>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e3978" headers="d11486e3466">
<p><span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1017077">datafileCopySpec</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e3978 d11486e3469">
<p><a id="d11486e3986" class="indexterm-anchor"></a>Specifies the file names of one or more data file image copies.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1017077">datafileCopySpec</a></code></span> for details</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4001" headers="d11486e3466">
<p><code class="codeph">DATAFILE</code> <span class="italic"><code class="codeph"><a href="rcmsubcl005.htm#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e4001 d11486e3469">
<p>Specifies a list of one or more data files. Refer to description of <code class="codeph">BACKUP</code> <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFCICI">DATABASE</a></code> for RMAN behavior when data file 1 is backed up.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsubcl005.htm#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4031" headers="d11486e3466">
<p><code class="codeph">DATAPUMP</code></p>
</td>
<td class="cellalignment1053" headers="d11486e4031 d11486e3469">
<p>Specifies that a <a id="d11486e4038" class="indexterm-anchor"></a>Data Pump export dump file is created while performing a cross-platform tablespace backup.</p>
<p>The export dump file contains the metadata of the read-only tablespaces being transported. You need this metadata to plug in the tablespaces at the destination database. The dump file is created in s separate backup set. If you use the <code class="codeph">DATAPUMP</code> clause with the <code class="codeph">INCREMENTAL FROM SCN</code>, then the tablespace must be in read-only mode.</p>
<p>This clause cannot be used with the <code class="codeph">ALLOW INCONSISTENT</code> clause.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4057" headers="d11486e3466">
<p><code class="codeph">FORMAT</code> <span class="italic"><code class="codeph"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED">formatSpec</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e4057 d11486e3469">
<p>Specifies the pattern used to store the backup piece that contains the export dump file. If the <code class="codeph">FORMAT</code> is omitted, then the format provided in the <code class="codeph">BACKUP</code> command is used. If no <code class="codeph">FORMAT</code> clause was used for the <code class="codeph">BACKUP</code> command too, the default format is used for the backup pieces.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4083" headers="d11486e3466">
<p><code class="codeph">RECOVERY&nbsp;AREA</code></p>
</td>
<td class="cellalignment1053" headers="d11486e4083 d11486e3469">
<p><a id="d11486e4089" class="indexterm-anchor"></a>Backs up recovery files created in the current and all previous fast recovery area destinations. Backups can go to SBT and disk. To backup to disk, you must use the <code class="codeph">TO DESTINATION</code> syntax outlined in <span class="italic"><a href="rcmsubcl001.htm#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA__CIHHJFBD">toDestSpec</a></span>.</p>
<p>Recovery files are full and incremental backup sets, control file autobackups, data file copies, and archived redo log files. If an archived redo log file is missing or corrupted, then RMAN looks outside of the recovery area for a good copy of the log that it can use for the backup. Flashback logs, the current control file, and online redo log files are <span class="italic">not</span> backed up.</p>
<p>By default, backup optimization is enabled for this command even if the <code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> <code class="codeph">BACKUP OPTIMIZATION</code> setting is <code class="codeph">OFF</code>. You can disable backup optimization for <code class="codeph">BACKUP RECOVERY AREA</code> by specifying <code class="codeph">FORCE</code>.</p>
<p><span class="bold">Note:</span> If the fast recovery area is not enabled but was enabled previously, then files created in the previous fast recovery area location are backed up.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4128" headers="d11486e3466">
<p><code class="codeph">DB_RECOVERY_FILE_DEST</code></p>
</td>
<td class="cellalignment1053" headers="d11486e4128 d11486e3469">
<p><code class="codeph">RECOVERY AREA</code> and <code class="codeph">DB_RECOVERY_FILE_DEST</code> are synonyms.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4141" headers="d11486e3466">
<p><code class="codeph">RECOVERY&nbsp;FILES</code></p>
</td>
<td class="cellalignment1053" headers="d11486e4141 d11486e3469">
<p><a id="d11486e4147" class="indexterm-anchor"></a><a id="d11486e4149" class="indexterm-anchor"></a>Backs up <span class="italic">all</span> recovery files on disk, whether they are stored in the fast recovery area or other locations on disk. The backups can go to SBT or disk. To backup to disk, you must use the <code class="codeph">TO DESTINATION</code> syntax outlined in <span class="italic"><a href="rcmsubcl001.htm#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA__CIHHJFBD">toDestSpec</a></span>.</p>
<p>Recovery files include full and incremental backup sets, control file autobackups, archived redo log files, and data file copies.</p>
<p>By default, backup optimization is enabled for this command even if the <code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> <code class="codeph">BACKUP OPTIMIZATION</code> setting is <code class="codeph">OFF</code>. You can disable backup optimization for <code class="codeph">RECOVERY FILES</code> by specifying <code class="codeph">FORCE</code>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4185" headers="d11486e3466">
<p><code class="codeph">SPFILE</code></p>
</td>
<td class="cellalignment1053" headers="d11486e4185 d11486e3469">
<p><a id="d11486e4191" class="indexterm-anchor"></a><a id="d11486e4195" class="indexterm-anchor"></a>Includes the server parameter file in a backup set. The <code class="codeph">AS COPY</code> option is not supported for server parameter file backups.</p>
<p>RMAN backs up the server parameter file currently in use by the target database. RMAN cannot back up the server parameter file when the instance was started with an initialization parameter file. RMAN cannot make incremental backups of the <code class="codeph">SPFILE</code>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4209" headers="d11486e3466"><code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDECCGE">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></td>
<td class="cellalignment1053" headers="d11486e4209 d11486e3469">
<p>Specifies the names of one or more tablespaces. RMAN translates tablespace names internally into a list of data files, then backs up all data files that are currently part of the tablespaces. If the <code class="codeph">SYSTEM</code> tablespace (and thus data file&nbsp;1) is included in the backup, and if <code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDDCAHE">CONTROLFILE&nbsp;AUTOBACKUP</a></code> is not configured, then RMAN also creates a copy of the control file.</p>
<p>When <a id="d11486e4228" class="indexterm-anchor"></a><a id="d11486e4232" class="indexterm-anchor"></a>connected to the root in a CDB, refers to tablespaces in the root. Refers to tablespaces in a PDB when connected directly to a PDB. See <span class="q">&#34;<a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>&#34;</span> for information about connecting to CDBs or PDBs.</p>
<p>You cannot back up locally-managed <a id="d11486e4245" class="indexterm-anchor"></a>temporary tablespaces, although you can back up dictionary-managed tablespaces.</p>
<p>If the following conditions are met, then RMAN can back up <a id="d11486e4250" class="indexterm-anchor"></a>transportable tablespaces that have <span class="italic">not</span> been made read/write after being transported:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">COMPATIBLE</code> initialization parameter is set to 11.0.0 or higher.</p>
</li>
<li>
<p>You are using an Oracle Database 11<span class="italic">g</span> RMAN client.</p>
</li>
</ul>
<p>If any of the preceding conditions is not met, then RMAN automatically skips transportable tablespaces that have not yet been made read/write. If you specify a transportable tablespace explicitly when any of the conditions is not met, then RMAN issues an error saying that the tablespace does not exist.</p>
<p><span class="bold">Note:</span> <a id="d11486e4277" class="indexterm-anchor"></a>If you rename a tablespace, then RMAN detects that the tablespace has changed its name and updates the recovery catalog on the next resynchronization.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4283" headers="d11486e3466">
<p><span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1017449">backupSpecOperand</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e4283 d11486e3469">
<p>The <span class="italic"><code class="codeph">backupSpecOperand</code></span> that follows a <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBGHJEH">backupSpec</a></code></span> specifies options that apply to the <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBGHJEH">backupSpec</a></code></span>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1017449"><span class="bold"><span class="italic">backupSpecOperand</span></span></p>
<p>This subclause specifies a variety of options and parameters that affect the <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBGHJEH">backupSpec</a></code></span> clause. Many subclauses are also used with <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1009966">backupOperand</a></code></span>. Options that are not shared in common with <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1009966">backupOperand</a></code></span> are listed here. Refer to <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDDCEFI">backupSpecOperand::=</a></span> for the syntax diagram.</p>
<div class="tblformalwide" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-AEF14607-9C91-42D1-91AC-10E2ECBBB14C">
<table class="cellalignment1044" summary="Describes BACKUP command backupSpecOperand parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d11486e4340">Syntax Element</th>
<th class="cellalignment1052" id="d11486e4343">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4348" headers="d11486e4340">
<p><code class="codeph">DELETE&nbsp;[ALL]&nbsp;INPUT</code></p>
</td>
<td class="cellalignment1053" headers="d11486e4348 d11486e4343">
<p><a id="d11486e4354" class="indexterm-anchor"></a><a id="d11486e4356" class="indexterm-anchor"></a><a id="d11486e4360" class="indexterm-anchor"></a><a id="d11486e4364" class="indexterm-anchor"></a>Deletes the input files after successfully backing them up.</p>
<p>Specify this option only when backing up archived redo log files, data file copies (<code class="codeph">COPY OF</code> or <code class="codeph">DATAFILECOPY</code>), or backup sets. The <code class="codeph">BACKUP ARCHIVELOG</code> command only backs up one copy of each distinct log sequence number, so if the <code class="codeph">DELETE INPUT</code> option is used <span class="italic">without</span> the <code class="codeph">ALL</code> keyword, RMAN only deletes the copy of the file that it backs up.</p>
<p>Specifying the <code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIEAIE">DELETE INPUT</code> option is equivalent to issuing the <code class="codeph"><a href="rcmsynta015.htm#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code> command for the input files. When backing up archived redo log files, RMAN uses the configured settings to determine whether an archived redo log can be deleted (<code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a> <a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHCEEH">ARCHIVELOG&nbsp;DELETION&nbsp;POLICY</a> TO BACKED UP</code>).</p>
<p>The <code class="codeph">ALL</code> option applies only to archived redo log files. If you run <code class="codeph">DELETE ALL INPUT</code>, then the command deletes all copies of corresponding archived redo log files or data file copies that match the selection criteria in the <code class="codeph">BACKUP</code> command (as shown in <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJGDDC">Example 2-18</a>). For example, if you specify the <code class="codeph">SEQUENCE</code> <span class="italic"><code class="codeph">n</code></span> clause, then RMAN deletes all archived redo log files with same sequence number <span class="italic"><code class="codeph">n</code></span>.</p>
<p><span class="bold">Note:</span> The database retains archived redo log files in the fast recovery area if possible and deletes them automatically when disk space is required. You can use the <code class="codeph">BACKUP DELETE INPUT</code>, <code class="codeph"><a href="rcmsynta015.htm#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code> <code class="codeph">ARCHIVELOG</code>, and <code class="codeph">DELETE OBSOLETE</code> commands to delete log files manually from inside or outside the recovery area. You do not need to specify <code class="codeph">BACKUP DELETE INPUT</code> when backing up the recovery area because the database automatically deletes log files based on the archived redo log deletion policy and other fast recovery area rules.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4456" headers="d11486e4340">
<p><code class="codeph">FROM&nbsp;TAG</code> <span class="italic"><code class="codeph">tag_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e4456 d11486e4343">
<p>Identifies files by tag name (see <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFGJJH">Example 2-17</a>). Only the files that match the tag_name are backed up. Defined in context with several other commands.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4470" headers="d11486e4340">
<p><code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCIAAH">INCLUDE CURRENT CONTROLFILE</code></p>
</td>
<td class="cellalignment1053" headers="d11486e4470 d11486e4343">
<p><a id="d11486e4476" class="indexterm-anchor"></a><a id="d11486e4480" class="indexterm-anchor"></a>Creates a snapshot of the current control file and places it into one of backup sets produced by the <code class="codeph">BACKUP</code> command.</p>
<p><span class="bold">Note:</span> This option does not apply with <code class="codeph">AS COPY</code> and results in an error message.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1015382"><span class="bold"><span class="italic">backupTypeSpec</span></span></p>
<p>This subclause specifies the form of the <code class="codeph">BACKUP</code> command output: backup set or image copy. Refer to <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDHHDGG">backupTypeSpec::=</a></span> for the syntax diagram.</p>
<div class="tblformalwide" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-DB2CEFF8-6876-4986-A4A4-9FD9782E882B">
<table class="cellalignment1044" summary="Describes BACKUP command backupTypeSpec parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d11486e4516">Syntax Element</th>
<th class="cellalignment1052" id="d11486e4519">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4524" headers="d11486e4516">
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBGAJI"><code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIHCHG">AS&nbsp;BACKUPSET</code></p>
</td>
<td class="cellalignment1053" headers="d11486e4524 d11486e4519">
<p>Creates backup sets on the specified device. This is the default backup type.</p>
<p><code class="codeph">AS</code> <code class="codeph">BACKUPSET</code> is the only possibility when backing up to tape, and for creating level 1 incremental backups to any destination. Backup sets are RMAN-specific logical structures. The backup set is the smallest unit of a backup.</p>
<p>The <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDEECJA">FILESPERSET</a></code> parameter of the <code class="codeph">BACKUP</code> command determines the maximum number of files in each backup set. Archived redo log files and data files are never combined into a single backup set.</p>
<p>When using encrypted backups (see <span class="q">&#34;<a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIHIGD">Encryption of Backup Sets</a>&#34;</span>), data files from tablespaces with different encryption settings are never written into the same backup set.</p>
<p>RMAN cannot back up files with different block sizes into the same backup set. RMAN can back up tablespaces with different block sizes, but puts each differently sized data file into its own backup set.</p>
<p><a id="d11486e4556" class="indexterm-anchor"></a><a id="d11486e4560" class="indexterm-anchor"></a><a id="d11486e4564" class="indexterm-anchor"></a><a id="d11486e4566" class="indexterm-anchor"></a><a id="d11486e4570" class="indexterm-anchor"></a><a id="d11486e4574" class="indexterm-anchor"></a><a id="d11486e4578" class="indexterm-anchor"></a><a id="d11486e4580" class="indexterm-anchor"></a>When <span class="bold">unused block compression</span> is applied, RMAN reads only the blocks that are currently allocated to a table. RMAN still checks each of the blocks to see whether the header has marked the block as unused. If a block has been unused, it is not written to the backup.</p>
<p>Unused block compression is turned on automatically when all of the following five conditions are true:</p>
<ol>
<li>
<p>The <code class="codeph">COMPATIBLE</code> initialization parameter is set to 10.2 or higher.</p>
<p><span class="bold">Note:</span> If <code class="codeph">COMPATIBLE</code> is set to 10.2, then only tablespaces created with 10.2 compatibility are optimized to exclude blocks that do not currently contain data. If <code class="codeph">COMPATIBLE</code> is set to 11.0.0 or higher, however, then the first backup that produces backup sets after COMPATIBLE is set to 11.0.0 or higher updates the headers of all locally managed data files so that all locally managed data files can be optimized.</p>
</li>
<li>
<p>There are currently no guaranteed <a id="d11486e4610" class="indexterm-anchor"></a>restore points defined for the database.</p>
</li>
<li>
<p>The data file is locally managed</p>
</li>
<li>
<p>The data file is being backed up to a backup set as part of a full backup or a level 0 incremental backup</p>
</li>
<li>
<p>The backup set is created on disk or <a id="d11486e4622" class="indexterm-anchor"></a><a id="d11486e4624" class="indexterm-anchor"></a><a id="d11486e4626" class="indexterm-anchor"></a>Oracle Secure Backup is the media manager.</p>
<p><span class="bold">Note:</span> When backing up to a media manager that is not Oracle Secure Backup, RMAN copies all the blocks regardless of whether they contain data or not.</p>
</li>
</ol>
<p><span class="bold">Note:</span> A corrupt unused block is not harmful. This is because when a block is corrupt and RMAN does not read it because of unused block compression, RMAN does not detect the corruption.</p>
<p><span class="bold">See Also:</span> <a class="olink BRADV" target="_blank" href="../BRADV/toc.htm"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for a discussion of null block compression and unused block compression.</p>
<p><a id="d11486e4647" class="indexterm-anchor"></a><a id="d11486e4651" class="indexterm-anchor"></a><a id="d11486e4655" class="indexterm-anchor"></a>Each backup set contains at least one <strong class="term">backup piece</strong>, which is an RMAN-specific physical file containing the backed up data. You can also use the <code class="codeph">BACKUP</code> command to generate a <strong class="term">proxy copy</strong>, which is a backup in which the entire data transfer is conducted by a media manager.</p>
<p>RMAN only records complete backup sets in the RMAN repository. There are no partial backup sets. When a <code class="codeph">BACKUP</code> command creates backup pieces but does not produce a complete backup set, the backup pieces are discarded.</p>
<p><span class="bold">Note:</span> You cannot stripe a single backup set across multiple channels. You also cannot stripe a single input file across multiple backup sets.</p>
<p><span class="bold">See Also:</span> <a class="olink OBADM183" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=OBADM183"><span class="italic">Oracle Secure Backup Administrator&#39;s Guide</span></a> to learn how to use Oracle Secure Backup with RMAN</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4687" headers="d11486e4516">
<p><code class="codeph">AS COMPRESSED BACKUPSET</code></p>
</td>
<td class="cellalignment1053" headers="d11486e4687 d11486e4519">
<p><a id="d11486e4693" class="indexterm-anchor"></a><a id="d11486e4695" class="indexterm-anchor"></a><a id="d11486e4697" class="indexterm-anchor"></a><a id="d11486e4699" class="indexterm-anchor"></a><a id="d11486e4703" class="indexterm-anchor"></a><a id="d11486e4707" class="indexterm-anchor"></a>Enables binary compression.</p>
<p>RMAN compresses the data written into the backup set to reduce the overall size of the backup set. All backups that create backup sets can create compressed backup sets. Restoring compressed backup sets is no different from restoring uncompressed backup sets.</p>
<p>RMAN applies a binary compression algorithm as it writes data to backup sets. This compression is similar to the compression provided by many media manager vendors. When backing up to a <span class="italic">locally attached</span> tape device, compression provided by the media management vendor is usually preferable to the binary compression provided by <code class="codeph">BACKUP AS COMPRESSED BACKUPSET</code>. Therefore, use uncompressed backup sets and turn on the compression provided by the media management vendor when backing up to locally attached tape devices. Do not use RMAN binary compression and media manager compression together.</p>
<p>Some CPU overhead is associated with compressing backup sets. If the target database is running at or near its maximum load, then you may find the overhead unacceptable. In most other circumstances, compressing backup sets saves enough disk space to be worth the CPU overhead.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4725" headers="d11486e4516">
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDEHBEJ"><code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFDFEH">AS&nbsp;COPY</code></p>
</td>
<td class="cellalignment1053" headers="d11486e4725 d11486e4519">
<p><a id="d11486e4731" class="indexterm-anchor"></a><a id="d11486e4735" class="indexterm-anchor"></a><a id="d11486e4737" class="indexterm-anchor"></a><a id="d11486e4739" class="indexterm-anchor"></a><a id="d11486e4741" class="indexterm-anchor"></a><a id="d11486e4745" class="indexterm-anchor"></a><a id="d11486e4749" class="indexterm-anchor"></a>Creates image copies (rather than backup sets).</p>
<p>An image copy is a byte-for-byte identical copy of the original file. You can create image copy backups of data files, control files, data file copies, control file copies, and archived redo log files. Image copy files can only exist on disk. When using incrementally updated backups, the level 0 incremental must be an image copy backup.</p>
<p>By default, <code class="codeph">BACKUP</code> generates backup sets. You can change the default backup type for disk backups to image copies using the <code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> <code class="codeph">DEVICE TYPE ... BACKUP TYPE TO COPY</code> command.</p>
<p>RMAN chooses a location for the copy according to the following rules, listed in order of precedence:</p>
<ol>
<li>
<p><code class="codeph">FORMAT</code> specified on <code class="codeph">BACKUP</code> command for the object being backed up</p>
</li>
<li>
<p><code class="codeph">FORMAT</code> specified for the <code class="codeph">BACKUP</code> command</p>
</li>
<li>
<p><span class="italic"><code class="codeph"><a href="rcmsubcl008.htm#GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3">fileNameConversionSpec</a></code></span> setting for <code class="codeph">BACKUP</code> command</p>
</li>
<li>
<p><code class="codeph">CONFIGURE CHANNEL</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">... FORMAT</code></p>
</li>
<li>
<p><code class="codeph">CONFIGURE CHANNEL DEVICE TYPE ... FORMAT</code></p>
</li>
<li>
<p>Platform-specific default <code class="codeph">FORMAT</code> (which includes a <code class="codeph"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABGHHGH">%U</a></code> for generating a unique file name)</p>
</li>
</ol>
<p>You can create and restore image copy backups with RMAN or use a native operating system command for copying files. When you use RMAN, copies are recorded in the RMAN repository and are more easily available for use in restore and recovery. Otherwise, you must use the <code class="codeph"><a href="rcmsynta007.htm#GUID-6E337759-9860-463A-BF7C-8512B272B8E1">CATALOG</a></code> command to add the user-managed copies to the RMAN repository so that RMAN can use them.</p>
<p>You cannot make a copy of a backup set, although you can make an image copy of an image copy. To back up a backup set, use <code class="codeph">BACKUP BACKUPSET</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1017172"><span class="bold"><span class="italic">copyOfSpec</span></span></p>
<p>This subclause specifies the form of the <code class="codeph">BACKUP</code> command output: backup set or image copy. Refer to <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFEBDC">copyOfSpec::=</a></span> for the syntax diagram.</p>
<div class="tblformalwide" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-FE1208B4-E302-45A3-B144-91C5966B4C04">
<table class="cellalignment1044" summary="Describes BACKUP command copyOfSpec parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d11486e4855">Syntax Element</th>
<th class="cellalignment1052" id="d11486e4858">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4863" headers="d11486e4855">
<p><a id="d11486e4865" class="indexterm-anchor"></a><code class="codeph">COPY&nbsp;OF&nbsp;DATABASE</code></p>
</td>
<td class="cellalignment1053" headers="d11486e4863 d11486e4858">
<p><a id="d11486e4873" class="indexterm-anchor"></a><a id="d11486e4877" class="indexterm-anchor"></a><a id="d11486e4881" class="indexterm-anchor"></a>Makes a backup of previous image copies of all data files and control files in the database. All data files that would normally be included by <code class="codeph">BACKUP</code> <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFCICI">DATABASE</a></code> are expected to have copies: if not, RMAN signals an error. It is not necessary for all copies to have been produced by a single <code class="codeph">BACKUP</code> command. If multiple copies exist of data file, then RMAN backs up the latest. Optionally, specify the copies by tag name (for example, <code class="codeph">FULL_COLD_COPY</code>).</p>
<p>In a <a id="d11486e4901" class="indexterm-anchor"></a><a id="d11486e4907" class="indexterm-anchor"></a>CDB, creates a backup of previous image copies of all data files and control files in the CDB. You connect to the root to backup the whole CDB. In a PDB, creates a backup of previous image copies of all data files and control files in the PDB. To backup a PDB, connect to that PDB. See <span class="q">&#34;<a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>&#34;</span>.</p>
<p><span class="bold">Note</span>: The output of this command can be image copies or backup sets.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4923" headers="d11486e4855">
<p><code class="codeph">COPY OF DATABASE ROOT</code></p>
</td>
<td class="cellalignment1053" headers="d11486e4923 d11486e4858">
<p>In a CDB, <a id="d11486e4930" class="indexterm-anchor"></a><a id="d11486e4934" class="indexterm-anchor"></a>makes a backup of previous image copies of the data files and control files in the root. See the previous description of <code class="codeph">COPY OF DATABASE</code>. See <span class="q">&#34;<a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>&#34;</span>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4947" headers="d11486e4855">
<p><code class="codeph">COPY OF PLUGGABLE DATABASE</code> <span class="italic"><code class="codeph">pdb_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e4947 d11486e4858">
<p>In a CDB, <a id="d11486e4957" class="indexterm-anchor"></a><a id="d11486e4961" class="indexterm-anchor"></a>makes a backup of previous image copies of the data files and controls files in one or more PDBs. Use a comma-delimited list to specify multiple PDBs. Connect to the root as described in <span class="q">&#34;<a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">Connecting to CDBs and PDBs</a>&#34;</span>.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e4971" headers="d11486e4855">
<p><code class="codeph">COPY&nbsp;OF&nbsp;DATAFILE</code> <span class="italic"><code class="codeph"><a href="rcmsubcl005.htm#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e4971 d11486e4858">
<p>Makes a backup of a previous image copy of one or more data files. Specify the data file by file number (<code class="codeph">DATAFILE 3</code>) or file name (<code class="codeph">DATAFILE &#39;?/oradata/trgt/users01.dbf&#39;</code>). You specify the data file name and <span class="italic">not</span> the file name of the copy of the data file. If multiple copies of a data file exist, then RMAN backs up the most recent copy.</p>
<p><span class="bold">Note:</span> It is not necessary for the image copies that you are backing up to have been created by a single <code class="codeph">BACKUP</code> command.</p>
<p><span class="bold">Note</span>: The output of this command can be image copies or backup sets.</p>
<p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="rcmsubcl005.htm#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span></p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5014" headers="d11486e4855">
<p><code class="codeph">COPY&nbsp;OF&nbsp;TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e5014 d11486e4858">
<p>Makes a backup of previous image copies of the data files in one or more specified tablespaces. All data files that are normally included by <code class="codeph">BACKUP</code> <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDECCGE">TABLESPACE</a></code> should have copies: if not, then RMAN signals an error. It is not necessary for all copies to have been produced by a single <code class="codeph">BACKUP</code> command. If multiple copies exist of data file, then RMAN backs up the latest.</p>
<p>Specify the tablespaces in the list by tablespace name (for example, <code class="codeph">users</code>) or specify a particular copy by tag name (for example, <code class="codeph">0403_CPY_OF_USERS</code>). If you do not specify <code class="codeph">TAG</code>, then RMAN backs up the most recent data file copy for each data file in the tablespace.</p>
<p><span class="bold">Note</span>: The output of this command can be image copies or backup sets.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1017077"><span class="bold"><span class="italic">datafileCopySpec</span></span></p>
<p>This subclause specifies data file copies. Refer to <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDHEJEG">datafileCopySpec::=</a></span> for the syntax diagram.</p>
<div class="tblformalwide" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-42A791B7-2DE5-458F-8855-121262751210">
<table class="cellalignment1044" summary="Describes BACKUP command datafileCopySpec parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d11486e5068">Syntax Element</th>
<th class="cellalignment1052" id="d11486e5071">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5076" headers="d11486e5068">
<p><code class="codeph">&#39;</code><span class="italic"><code class="codeph">filename</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment1053" headers="d11486e5076 d11486e5071">
<p>Specifies the file names of one or more data file image copies.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5089" headers="d11486e5068">
<p><code class="codeph">ALL</code></p>
</td>
<td class="cellalignment1053" headers="d11486e5089 d11486e5071">
<p>Specifies all data file image copies for back up.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5097" headers="d11486e5068">
<p><code class="codeph">LIKE</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">string_pattern</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment1053" headers="d11486e5097 d11486e5071">
<p>Specifies a file name pattern. The percent sign (<code class="codeph">%</code>) is a wildcard that means zero or more characters; an underscore (<code class="codeph">_</code>) is a wildcard that means one character.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5119" headers="d11486e5068">
<p><code class="codeph">FROM TAG</code> <span class="italic"><code class="codeph">tag_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e5119 d11486e5071">
<p>Specifies a list of one or more data file copies, identified by the tag name. If multiple data file copies with this tag exist, then RMAN backs up only the most current data file copy of any particular data file. Tags are not case sensitive.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5131" headers="d11486e5068">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;NODUPLICATES</code></p>
</td>
<td class="cellalignment1053" headers="d11486e5131 d11486e5071">
<p>Prevents the inclusion of identical data file copies in a backup operation (<a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDHIAJB">Example 2-28</a>). For each set of duplicate data file copies, the file with the most recent timestamp is selected.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1010261"><span class="bold"><span class="italic">duration</span></span></p>
<p>This subclause specifies data file copies. Refer to <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIFHEH">duration::=</a></span> for the syntax diagram.</p>
<div class="tblformalwide" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-AAF7331E-B32B-4BD5-AFBF-A9C76E7841E4">
<table class="cellalignment1044" summary="Describes BACKUP command duration parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d11486e5159">Syntax Element</th>
<th class="cellalignment1052" id="d11486e5162">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5167" headers="d11486e5159">
<p><code class="codeph">DURATION</code> <span class="italic"><code class="codeph">hh:mm</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e5167 d11486e5162">
<p><a id="d11486e5177" class="indexterm-anchor"></a><a id="d11486e5181" class="indexterm-anchor"></a><a id="d11486e5185" class="indexterm-anchor"></a><a id="d11486e5187" class="indexterm-anchor"></a>Specifies a maximum time for a backup command to run. If a backup command does not complete in the specified duration, then the backup stops.</p>
<p>Without the <code class="codeph">PARTIAL</code> option, the backup command is considered to have failed if it does not complete in the specified duration, and RMAN reports an error. If the backup command is part of a <code class="codeph"><a href="rcmsynta2012.htm#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code> block, then subsequent commands in the <code class="codeph">RUN</code> block do not execute.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5206" headers="d11486e5159"><code class="codeph">&nbsp;&nbsp;&nbsp;MINIMIZE</code> <code class="codeph">{LOAD&nbsp;|&nbsp;TIME}</code></td>
<td class="cellalignment1053" headers="d11486e5206 d11486e5162">
<p>With disk backups, you can use <code class="codeph">MINIMIZE TIME</code> run the backup at maximum speed (default), or <code class="codeph">MINIMIZE LOAD</code> to slow the rate of backup to lessen the load on the system. With <code class="codeph">MINIMIZE LOAD</code> the backup takes the full specified duration.</p>
<p>If you specify <code class="codeph">TIME</code>, then file most recently backed up is given the lowest priority to back up. This scheduling mechanism provides for the eventual complete backup of the database during successive backup windows, as different data files are backed up in round-robin fashion.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5230" headers="d11486e5159">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;PARTIAL</code></p>
</td>
<td class="cellalignment1053" headers="d11486e5230 d11486e5162">
<p><a id="d11486e5236" class="indexterm-anchor"></a><a id="d11486e5238" class="indexterm-anchor"></a><a id="d11486e5242" class="indexterm-anchor"></a>With the <code class="codeph">PARTIAL</code> option, the command is considered to have completed successfully and no error is reported by RMAN even if the whole backup is not completed in the specified duration.</p>
<p>Without the <code class="codeph">PARTIAL</code> option, the backup command is considered to have failed if it does not complete in the specified duration, and RMAN reports an error. If the backup command is part of a <code class="codeph"><a href="rcmsynta2012.htm#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code> block, then subsequent commands in the <code class="codeph">RUN</code> block do not execute.</p>
<p>Whether <code class="codeph">PARTIAL</code> is used or not, all backup sets completed before the backup is interrupted are retained and can be used in <code class="codeph"><a href="rcmsynta2008.htm#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code> and <code class="codeph"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code> operations.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1015480"><span class="bold"><span class="italic">forRecoveryOfSpec</span></span></p>
<p>This subclause specifies a backup for use in an incrementally updated backup strategy. You must specify <code class="codeph">INCREMENTAL LEVEL 1</code> when specifying <code class="codeph">FOR RECOVER OF</code>. Refer to <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDEHIDJ">forRecoveryOfSpec::=</a></span> for the syntax diagram.</p>
<div class="tblformalwide" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-9C064CBD-EF06-4E26-B72A-B69985F03601">
<table class="cellalignment1044" summary="Describes BACKUP command forRecoveryOfSpec parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d11486e5302">Syntax Element</th>
<th class="cellalignment1052" id="d11486e5305">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5310" headers="d11486e5302">
<p><code class="codeph">FOR&nbsp;RECOVER&nbsp;OF&nbsp;COPY</code></p>
</td>
<td class="cellalignment1053" headers="d11486e5310 d11486e5305">
<p><a id="d11486e5316" class="indexterm-anchor"></a><a id="d11486e5318" class="indexterm-anchor"></a>Specifies that this incremental backup contains all changes since a previous data file copy or incremental backup. By default, RMAN creates a differential incremental backup. You must specify <code class="codeph">CUMULATIVE</code> to force RMAN to create cumulative backups.</p>
<p>Use the <code class="codeph">WITH TAG</code> clause to separate this incremental backup strategy from the rest of your backup strategies. If you do <span class="italic">not</span> specify <code class="codeph">WITH TAG</code>, then RMAN uses the most recent data file copy as the basis for the incremental backup.</p>
<p>A <code class="codeph">BACKUP INCREMENTAL LEVEL 1 FOR RECOVER OF COPY</code> command can create image copies or backup sets. RMAN creates level 0 image copies if no such copies exist, but otherwise creates backup sets.</p>
<p><span class="bold">See Also:</span> <a class="olink BRADV8186" target="_blank" href="../BRADV/rcmbckba.htm#BRADV8186"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> to learn how to make incrementally updated backups</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5352" headers="d11486e5302">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;WITH TAG</code> <span class="italic"><code class="codeph">tag_name</code></span></p>
</td>
<td class="cellalignment1053" headers="d11486e5352 d11486e5305">
<p>Specifies the tag of the level 0 incremental backup serving as the basis of the backup strategy (see <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBJCAJ">Example 2-19</a>).</p>
<p>By using the <code class="codeph">BACKUP INCREMENTAL ... WITH TAG</code> syntax, you can create level 1 incremental backups suitable for rolling forward a level 0 image copy. You can then use <code class="codeph"><a href="rcmsynta2001.htm#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code> <code class="codeph">COPY OF ... WITH TAG</code> to apply level 1 backups to this copy. In this way, the strategy continues to roll forward the data file copy so that media recovery does not need to apply as many changes. This technique is the basis for the Enterprise Manager strategy for disk backups.</p>
<p>When <code class="codeph">WITH TAG</code> is specified, RMAN automatically assigns all new incremental backups in the strategy the same tag as the level 0 data file copy. RMAN decides which blocks to include in the level 1 backup based on the available incremental backups that have this tag.</p>
<p><span class="bold">Note:</span> If the <code class="codeph">BACKUP</code> command has both the <code class="codeph">TAG</code> and <code class="codeph">WITH TAG</code> options, then RMAN issues a warning stating that the <code class="codeph">TAG</code> option is ignored and that incremental backups receive the tag specified by <code class="codeph">WITH TAG</code>.</p>
<p>If no level 0 backup with the tag specified in the <code class="codeph">WITH TAG</code> parameter exists in either the current or parent database incarnation, then <code class="codeph">FOR RECOVER OF COPY</code> option creates a level 0 data file copy tagged with the value specified in the <code class="codeph">WITH TAG</code> parameter.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5413" headers="d11486e5302"><code class="codeph">&nbsp;&nbsp;&nbsp;DATAFILECOPY &nbsp;FORMAT</code> <span class="italic"><code class="codeph"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED">formatSpec</a></code></span></td>
<td class="cellalignment1053" headers="d11486e5413 d11486e5305">
<p>Specifies a pattern for naming the output image copies.</p>
<p>If you add a data file to the database, then you do not need to change the backup script because RMAN automatically creates the level 0 data file copy required by the incrementally updated backup strategy for the newly created file.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5429" headers="d11486e5302"><code class="codeph">FOR&nbsp;RECOVER&nbsp;OF&nbsp;TAG</code> <span class="italic"><code class="codeph">tag_name</code></span></td>
<td class="cellalignment1053" headers="d11486e5429 d11486e5305">
<p>Backs up the archived redo log files or incremental backups that are intended to recover the level 0 incremental backup specified by <span class="italic"><code class="codeph">tag_name</code></span>.</p>
<p>For example, the <code class="codeph">BACKUP INCREMENTAL LEVEL 1 FOR RECOVER OF TAG wholedb ARCHIVELOG ALL</code> command backs up all archived redo log files needed to recover the level 0 incremental backup tagged <code class="codeph">wholedb</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1017236"><span class="bold"><span class="italic">notBackedUpSpec</span></span></p>
<p>This subclause specifies that RMAN only backs up files that have not yet been backed up to the same device type. Refer to <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCFHEA">notBackedUpSpec::=</a></span> for the syntax diagram.</p>
<div class="tblformalwide" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-798CC7C0-2B8D-43DD-B825-58C5931A8D55">
<table class="cellalignment1044" summary="Describes BACKUP command notBackedUpSpec parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d11486e5469">Syntax Element</th>
<th class="cellalignment1052" id="d11486e5472">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5477" headers="d11486e5469">
<p><code class="codeph">NOT&nbsp;BACKED&nbsp;UP</code></p>
</td>
<td class="cellalignment1053" headers="d11486e5477 d11486e5472">
<p><a id="d11486e5483" class="indexterm-anchor"></a><a id="d11486e5485" class="indexterm-anchor"></a><a id="d11486e5489" class="indexterm-anchor"></a>Backs up only those files&mdash;of the files specified on the <code class="codeph">BACKUP</code> command&mdash;that RMAN has never backed up for the same device type (see <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIJDDE">Example 2-27</a>).</p>
<p>This subclause is a convenient way to back up new data files after adding them to the database. RMAN does not examine data file checkpoints, but backs up any data file that is not already backed up. You can also specify <code class="codeph">NOT BACKED UP</code> when backing up backup sets.</p>
<p>Using <code class="codeph">BACKUP</code> with this clause does manually what an archived redo log deletion policy can do automatically. If you specify the <code class="codeph">CONFIGURE</code> <code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHCEEH">ARCHIVELOG&nbsp;DELETION&nbsp;POLICY</a> TO BACKED UP</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">TIMES</code> command, then a <code class="codeph">BACKUP ARCHIVELOG ALL</code> command copies all logs unless <span class="italic"><code class="codeph">integer</code></span> backups exist on the specified device type. If <span class="italic"><code class="codeph">integer</code></span> backups of the logs exist, then the <code class="codeph">BACKUP</code> command skips the logs. In this way, the archived log deletion policy functions as a default <code class="codeph">NOT BACKED UP</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">TIMES</code> clause on the <code class="codeph">BACKUP</code> command.</p>
<p>Archival backups created with the <code class="codeph">KEEP</code> option are not counted when evaluating the <code class="codeph">NOT BACKED UP</code> subclause. For example, if you issue the command</p>
<pre dir="ltr">BACKUP ARCHIVELOG SEQUENCE 345 NOT BACKED UP 3 TIMES
</pre>
<p>and the specified log is already backed up into two non-<code class="codeph">KEEP</code> backup sets and one <code class="codeph">KEEP</code> backup set, then that command backs up the log one more time.</p>
<p><span class="bold">Note:</span> This clause overrides backup optimization (<code class="codeph"><a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a> BACKUP OPTIMIZATION</code>) and archived redo log file deletion policies (<code class="codeph">CONFIGURE <a href="rcmsynta009.htm#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A__CHDHCEEH">ARCHIVELOG&nbsp;DELETION&nbsp;POLICY</a></code>).</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5587" headers="d11486e5469">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;</code><span class="italic"><code class="codeph">integer</code></span> <code class="codeph">TIMES</code></p>
</td>
<td class="cellalignment1053" headers="d11486e5587 d11486e5472">
<p><a id="d11486e5599" class="indexterm-anchor"></a>Backs up only those archived redo log files that have not been backed up at least <span class="italic"><code class="codeph">integer</code></span> times.</p>
<p><span class="bold">Note:</span> You can only specify <code class="codeph">NOT BACKED UP</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">TIMES</code> when backing up archived redo log files into backup sets.</p>
<p>To determine the number of backups for a file, RMAN only considers backups created on the same device type as the current backup.</p>
<p>This option is a convenient way to back up archived redo log files on a specified media. For example, you want to keep at least three copies of each log on tape.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5627" headers="d11486e5469"><code class="codeph">&nbsp;&nbsp;&nbsp;SINCE&nbsp;TIME</code> <code class="codeph">&#39;</code> <span class="italic"><code class="codeph">date_string</code></span> <code class="codeph">&#39;</code></td>
<td class="cellalignment1053" headers="d11486e5627 d11486e5472">
<p><a id="d11486e5642" class="indexterm-anchor"></a><a id="d11486e5646" class="indexterm-anchor"></a><a id="d11486e5648" class="indexterm-anchor"></a>Specifies the date after which RMAN backs up files that have no backups.</p>
<p>The <span class="italic"><code class="codeph">date_string</code></span> is either a date in the current <code class="codeph">NLS_DATE_FORMAT</code> or a SQL date expression such as <code class="codeph">&#39;SYSDATE-1&#39;</code>. When calculating the number of backups for a file, RMAN only considers backups created on the same device type as the current backup.</p>
<p>This option is a convenient way to back up data files that were not backed up during a previous failed backup. For example, you back up the database, but the instance fails halfway through. You can restart the backup with the <code class="codeph">NOT BACKED UP SINCE TIME</code> clause and avoid backing up those files that are already backed up. If <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIHCHG">AS&nbsp;BACKUPSET</a></code> is specified, then this feature is only useful if RMAN generates multiple backup sets during the backup.</p>
<p>When determining whether a file has been backed up, the <code class="codeph">SINCE</code> date is compared with the completion time of the most recent backup. For <code class="codeph">BACKUP AS BACKUPSET</code>, the completion time for a file in a backup set is the completion time of the entire backup set. In other words, all files in the same backup set have the same completion time.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__I1017259"><span class="bold"><span class="italic">skipSpec</span></span></p>
<p>This subclause specifies which files to exclude from the backup. Refer to <span class="italic"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDGFJFB">skipSpec::=</a></span> for the syntax diagram.</p>
<div class="tblformalwide" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-199F8A3F-7C4C-4846-A0C6-E99D038FE763">
<table class="cellalignment1044" summary="Describes BACKUP command skipSpec parameters">
<thead>
<tr class="cellalignment1038">
<th class="cellalignment1045" id="d11486e5699">Syntax Element</th>
<th class="cellalignment1052" id="d11486e5702">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5707" headers="d11486e5699">
<p><code class="codeph" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJJJCB">SKIP</code></p>
</td>
<td class="cellalignment1053" headers="d11486e5707 d11486e5702">
<p><a id="d11486e5713" class="indexterm-anchor"></a><a id="d11486e5717" class="indexterm-anchor"></a><a id="d11486e5721" class="indexterm-anchor"></a><a id="d11486e5725" class="indexterm-anchor"></a>Excludes data files or archived redo log files according to the criteria specified by the following keywords.</p>
<p><span class="bold">Note:</span> You can also specify this option in the <span class="italic"><code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBGHJEH">backupSpec</a></code></span> clause.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5740" headers="d11486e5699">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;INACCESSIBLE</code></p>
</td>
<td class="cellalignment1053" headers="d11486e5740 d11486e5702">
<p>Excludes data files or archived redo log files that cannot be read due to I/O errors.</p>
<p>A data file is only considered inaccessible if it cannot be read. Some offline data files can still be read because they still exist on disk. Others have been deleted or moved and so cannot be read, making them inaccessible.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5750" headers="d11486e5699">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;OFFLINE</code></p>
</td>
<td class="cellalignment1053" headers="d11486e5750 d11486e5702">
<p>Excludes offline data files.</p>
</td>
</tr>
<tr class="cellalignment1038">
<td class="cellalignment1047" id="d11486e5758" headers="d11486e5699">
<p><code class="codeph">&nbsp;&nbsp;&nbsp;READONLY</code></p>
</td>
<td class="cellalignment1053" headers="d11486e5758 d11486e5702">
<p>Excludes read-only data files.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBGAJB">
<p class="subhead1">Examples</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFHAHB">
<p class="titleinexample">Example 2-13 Backing Up a Database</p>
<p>This example starts the RMAN client from the operating system command line and then connects to a target database using operating system authentication. The <code class="codeph">BACKUP</code> command backs up all data files, the current control file, the server parameter file, and archived redo log files to the default storage device:</p>
<pre dir="ltr">% rman
RMAN&gt; CONNECT TARGET /
RMAN&gt; BACKUP DATABASE PLUS ARCHIVELOG;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-E9F8DCFD-2CAD-46E2-A57E-C293FBEC547D">
<p class="titleinexample">Example 2-14 Backing Up Multiple PDBs</p>
<p>This example connects to the root using operating system authentication and then creates backups of the PDBs <code class="codeph">hr_pdb</code> an <code class="codeph">sales_pdb</code>.</p>
<pre dir="ltr">%rman
RMAN&gt; CONNECT TARGET /
RMAN&gt; BACKUP PLUGGABLE DATABASE hr_pdb, sales_pdb;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDECGDC">
<p class="titleinexample">Example 2-15 Performing a Cumulative Incremental Backup</p>
<p>This example backs up all blocks changed in the database since the most recent level 0 incremental backup. If no level 0 backup exists when you run a level 1 backup, then RMAN makes a level 0 backup automatically. Any inaccessible files are skipped.</p>
<pre dir="ltr">BACKUP 
  INCREMENTAL LEVEL 1 CUMULATIVE
  SKIP INACCESSIBLE 
  DATABASE;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDHAGDD">
<p class="titleinexample">Example 2-16 Distributing a Backup Across Multiple Disks</p>
<p><a id="d11486e5802" class="indexterm-anchor"></a><a id="d11486e5806" class="indexterm-anchor"></a><a id="d11486e5810" class="indexterm-anchor"></a>This example backs up tablespaces to two different disks and lets RMAN perform automatic parallelization of the backup. The <code class="codeph"><a href="rcmsubcl012.htm#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED__BABGHHGH">%U</a></code> in the <code class="codeph">FORMAT</code> string is a substitution variable that generates a unique file name for each output image copy.</p>
<pre dir="ltr">RUN
{
  ALLOCATE CHANNEL dev1 DEVICE TYPE DISK FORMAT &#39;/disk1/%U&#39;;
  ALLOCATE CHANNEL dev2 DEVICE TYPE DISK FORMAT &#39;/disk2/%U&#39;; 
  BACKUP AS COPY
    TABLESPACE SYSTEM, tools, users, undotbs;
}
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFGJJH">
<p class="titleinexample">Example 2-17 Identifying Data File Copies by Tag</p>
<p>In this example, you back up data file image copies to tape. The <code class="codeph">BACKUP</code> command locates all data file copies with the tag <code class="codeph">LATESTCOPY</code>, backs them up to tape, and names the backups using substitution variables. The variable <code class="codeph">%f</code> specifies the absolute file number, whereas <code class="codeph">%d</code> specifies the name of the database. After the data file copies are on tape, the example deletes all image copies with the tag <code class="codeph">LATESTCOPY</code>.</p>
<pre dir="ltr">BACKUP 
  DEVICE TYPE sbt
  DATAFILECOPY 
    FROM TAG &#39;LATESTCOPY&#39;
  FORMAT &#39;Datafile%f_Database%d&#39;;
DELETE COPY TAG &#39;LATESTCOPY&#39;;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJGDDC">
<p class="titleinexample">Example 2-18 Backing Up and Deleting Archived Redo Log Files</p>
<p>This example assumes that you have two archiving destinations set: <code class="codeph">/disk2/PROD/archivelog/</code> and <code class="codeph">/disk1/arch/</code>. The command backs up one archived redo log for each unique sequence number. For example, if archived redo log 1000 is in both directories, then RMAN only backs up one copy this log. The <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIEAIE">DELETE INPUT</a></code> clause with the <code class="codeph">ALL</code> keyword deletes all archived redo log files from both archiving directories after the backup.</p>
<pre dir="ltr">BACKUP DEVICE TYPE sbt
  ARCHIVELOG LIKE &#39;/disk%arc%&#39;
  DELETE ALL INPUT;
</pre>
<p>Sample output for the preceding command appears as follows:</p>
<pre dir="ltr">Starting backup at 12-MAR-13
allocated channel: ORA_SBT_TAPE_1
channel ORA_SBT_TAPE_1: SID=150 device type=SBT_TAPE
channel ORA_SBT_TAPE_1: Oracle Secure Backup
channel ORA_SBT_TAPE_1: starting archived log backup set
channel ORA_SBT_TAPE_1: specifying archived log(s) in backup set
input archived log thread=1 sequence=4 RECID=4 STAMP=616789551
input archived log thread=1 sequence=5 RECID=5 STAMP=616789551
input archived log thread=1 sequence=6 RECID=6 STAMP=616789554
input archived log thread=1 sequence=7 RECID=7 STAMP=616789731
input archived log thread=1 sequence=8 RECID=8 STAMP=616789825
input archived log thread=1 sequence=9 RECID=10 STAMP=616789901
input archived log thread=1 sequence=10 RECID=12 STAMP=616789985
channel ORA_SBT_TAPE_1: starting piece 1 at 12-MAR-13
channel ORA_SBT_TAPE_1: finished piece 1 at 12-MAR-13
piece handle=0vice0g7_1_1 tag=TAG20130312T105917 comment=API Version 2.0,MMS Version 10.1.0.3
channel ORA_SBT_TAPE_1: backup set complete, elapsed time: 00:00:25
channel ORA_SBT_TAPE_1: deleting archived log(s)
archived log file name=/disk2/PROD/archivelog/2013_03_09/o1_mf_1_4_2z45sgrc_.arc RECID=4 STAMP=616789551
archived log file name=/disk2/PROD/archivelog/2013_03_09/o1_mf_1_5_2z45sgrc_.arc RECID=5 STAMP=616789551
archived log file name=/disk2/PROD/archivelog/2013_03_09/o1_mf_1_6_2z45sl3g_.arc RECID=6 STAMP=616789554
archived log file name=/disk2/PROD/archivelog/2013_03_09/o1_mf_1_7_2z45z2kt_.arc RECID=7 STAMP=616789731
archived log file name=/disk2/PROD/archivelog/2013_03_09/o1_mf_1_8_2z4620sk_.arc RECID=8 STAMP=616789825
archived log file name=/disk1/arch/archiver_1_8_616789153.arc RECID=9 STAMP=616789825
archived log file name=/disk2/PROD/archivelog/2013_03_09/o1_mf_1_9_2z464dhk_.arc RECID=10 STAMP=616789901
archived log file name=/disk1/arch/archiver_1_9_616789153.arc RECID=11 STAMP=616789901
archived log file name=/disk2/PROD/archivelog/2013_03_09/o1_mf_1_10_2z4670gr_.arc RECID=12 STAMP=616789985
archived log file name=/disk1/arch/archiver_1_10_616789153.arc RECID=13 STAMP=616789985
Finished backup at 12-MAR-13
 
Starting Control File and SPFILE Autobackup at 12-MAR-13
piece handle=c-28643857-20130312-02 comment=API Version 2.0,MMS Version 10.1.0.3
Finished Control File and SPFILE Autobackup at 12-MAR-13
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBJCAJ">
<p class="titleinexample">Example 2-19 Scripting Incrementally Updated Backups</p>
<p><a id="d11486e5875" class="indexterm-anchor"></a>By incrementally updating backups, you can avoid the overhead of making full image copy backups of data files, while also minimizing media recovery time. For example, if you run a daily backup script, then you never have more than one day of redo to apply for media recovery.</p>
<p>Assume you run the following script daily. On first execution, the script creates an image copy backup of the database on disk with the specified tag. On second execution, the script creates a level 1 differential incremental backup of the database. On every subsequent execution, RMAN applies the level 1 incremental backup to the data file copy and then makes a new level 1 backup.</p>
<pre dir="ltr">RUN
{
  RECOVER COPY OF DATABASE 
    WITH TAG &#39;incr_update&#39;;
  BACKUP
    INCREMENTAL LEVEL 1
    FOR RECOVER OF COPY WITH TAG &#39;incr_update&#39;
    DATABASE;
}
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDGAGID">
<p class="titleinexample">Example 2-20 Backing Up Disk-Based Backup Sets to Tape</p>
<p>Assume your goal is to keep recent backup sets on disk and older backup sets on tape. Also, you want to avoid keeping copies of the same backup set on disk and tape simultaneously. This example backs up backup sets created more than two weeks ago to tape and then deletes the backup pieces from disk.</p>
<pre dir="ltr">BACKUP
  DEVICE TYPE sbt 
  BACKUPSET
    COMPLETED BEFORE &#39;SYSDATE-14&#39; 
  DELETE INPUT;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJIJDH">
<p class="titleinexample">Example 2-21 Duplexing a Database Backup</p>
<p>This example uses the <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJAEBG">COPIES</a></code> parameter to create two compressed backups of the database, with each backup on a separate disk. The output locations are specified in the <code class="codeph">FORMAT</code> parameter.</p>
<pre dir="ltr">BACKUP AS COMPRESSED BACKUPSET
  DEVICE TYPE DISK 
  COPIES 2
  DATABASE
  FORMAT &#39;/disk1/db_%U&#39;, &#39;/disk2/db_%U&#39;;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCJHFH">
<p class="titleinexample">Example 2-22 Specifying How Channels Divide Workload</p>
<p><a id="d11486e5909" class="indexterm-anchor"></a>This example explicitly parallelizes a backup by using the <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDDCCAA">CHANNEL</a></code> parameter to specify which channels back up which files and to which locations.</p>
<pre dir="ltr">RUN
{
  ALLOCATE CHANNEL ch1 DEVICE TYPE sbt
    PARMS &#39;ENV=(OB_DEVICE_1=stape1)&#39;;
  ALLOCATE CHANNEL ch2 DEVICE TYPE sbt
    PARMS &#39;ENV=(OB_DEVICE_1=stape2)&#39;;
  BACKUP 
    (DATABASE        # ch1 backs up database to tape drive stape1
      CHANNEL ch1)
    (ARCHIVELOG ALL
      CHANNEL ch2);  # ch2 backs up archived redo log files to tape drive stape2
}
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDECIJB">
<p class="titleinexample">Example 2-23 Creating an Incremental Backup for Refresh of a Standby Database</p>
<p><a id="d11486e5924" class="indexterm-anchor"></a>In this example, your goal is make an incremental backup of the primary database and use it to update an associated standby database. You start the RMAN client, <code class="codeph"><a href="rcmsynta010.htm#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code> to the primary database as <code class="codeph">TARGET</code>, and then connect to the recovery catalog. The <code class="codeph">BACKUP</code> command creates an incremental backup of the primary database that can be applied at a standby database to update it with changes since the specified SCN.</p>
<pre dir="ltr">RMAN&gt; CONNECT TARGET /

connected to target database: PROD (DBID=39525561)

RMAN&gt; CONNECT CATALOG rco@catdb

recovery catalog database Password: <span class="italic">password</span>
connected to recovery catalog database

RMAN&gt; BACKUP DEVICE TYPE DISK
2&gt; INCREMENTAL FROM SCN 404128 DATABASE
3&gt;  FORMAT &#39;/disk1/incr_standby_%U&#39;;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDFIFDI">
<p class="titleinexample">Example 2-24 Specifying Corruption Tolerance for Data File Backups</p>
<p><a id="d11486e5949" class="indexterm-anchor"></a><a id="d11486e5953" class="indexterm-anchor"></a><a id="d11486e5957" class="indexterm-anchor"></a><a id="d11486e5959" class="indexterm-anchor"></a>This example assumes a database that contains five data files. It uses the <code class="codeph"><a href="rcmsynta2014.htm#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">MAXCORRUPT</code> command to indicate than only one corruption is tolerated in each data file. Because the <code class="codeph"><a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDBHECJ">CHECK&nbsp;LOGICAL</a></code> option is specified on the <code class="codeph">BACKUP</code> command, RMAN checks for both physical and logical corruption.</p>
<pre dir="ltr">RUN
{
  SET MAXCORRUPT FOR DATAFILE 1,2,3,4,5 TO 1;
  BACKUP CHECK LOGICAL
    DATABASE;
}
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDCIBCJ">
<p class="titleinexample">Example 2-25 Creating a Consistent Database Backup for Archival Purposes</p>
<p>This example uses a <span class="italic"><code class="codeph"><a href="rcmsubcl013.htm#GUID-36E9008E-48A5-4AB9-8C9D-2D477342594B">keepOption</a></code></span> to create an archival backup set that cannot be considered obsolete for one year. The example backs up the database, archives the redo in the current online logs to ensure that this new backup is consistent, and backs up only those archived redo log files needed to restore the data file backup to a consistent state.</p>
<p>The <code class="codeph">BACKUP</code> command also creates a restore point to match the SCN at which this backup is consistent. The <code class="codeph">FORMAT</code> parameter must be capable of creating multiple backup pieces in multiple backup sets.</p>
<pre dir="ltr">BACKUP DATABASE
  FORMAT &#39;/disk1/archival_backups/db_%U.bck&#39; 
  TAG quarterly
  KEEP UNTIL TIME &#39;SYSDATE + 365&#39;
  RESTORE POINT Q1FY06;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJJIJG">
<p class="titleinexample">Example 2-26 Exempting Copies from the Retention Policy</p>
<p><a id="d11486e6007" class="indexterm-anchor"></a>The following example copies two data files and exempts them from the retention policy forever. The control file and server parameter file are also backed up, even with autobackup off.</p>
<p><code class="codeph">KEEP</code> <code class="codeph">FOREVER</code> requires a recovery catalog.</p>
<pre dir="ltr">SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
BACKUP
  KEEP FOREVER
  FORMAT &#39;?/dbs/%U_longterm.cpy&#39;
  TAG LONGTERM_BCK
  DATAFILE 1 DATAFILE 2;
ALTER DATABASE OPEN;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIJDDE">
<p class="titleinexample">Example 2-27 Backing Up Files That Need Backups</p>
<p>Assume that you back up the database and archived redo log files every night to tape by running the following command.</p>
<pre dir="ltr">BACKUP
  MAXSETSIZE 500M
  DATABASE PLUS ARCHIVELOG;
</pre>
<p>The preceding command sets an upper limit to the size of each backup set so that RMAN produces multiple backup sets. Assume that the media management device fails halfway through the backup and is then restarted. The next day you discover that only half the backup sets completed. In this case, you can run the following command in the evening:</p>
<pre dir="ltr">BACKUP 
  NOT BACKED UP SINCE TIME &#39;SYSDATE-1&#39;
  MAXSETSIZE 500M
  DATABASE PLUS ARCHIVELOG;
</pre>
<p>With the preceding command, RMAN backs up only files not backed up during in the previous 24 hours. When RMAN determines that a backup from the specified time window is available, it displays output like the following:</p>
<pre dir="ltr">skipping datafile 1; already backed up on 18-JAN-13
skipping datafile 2; already backed up on 18-JAN-13
skipping datafile 3; already backed up on 18-JAN-13
</pre>
<p>If you place the <code class="codeph">NOT</code> <code class="codeph">BACKED</code> <code class="codeph">UP</code> <code class="codeph">SINCE</code> clause immediately after the <code class="codeph">BACKUP</code> command, then it affects all objects to be backed up. You can also place it after individual <span class="italic"><code class="codeph">backupSpec</code></span> clauses to cause only backups for those objects described by the <span class="italic"><code class="codeph">backupSpec</code></span> to be subject to the limitation.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDHIAJB">
<p class="titleinexample">Example 2-28 Using NODUPLICATES To Back Up Data File Copies</p>
<p>This example creates a data file copy of data file 2 named <code class="codeph">/disk2/df2.cpy</code>. The example then backs up this data file copy to the <code class="codeph">/disk1</code> and <code class="codeph">/disk3</code> directories. The <code class="codeph">NODUPLICATES</code> option on the final <code class="codeph">BACKUP</code> command indicates that only one copy of data file <code class="codeph">2</code> is backed up.</p>
<pre dir="ltr">BACKUP AS COPY
  DATAFILE 2
  FORMAT &#39;/disk2/df2.cpy&#39; TAG my_tag;
BACKUP AS COPY
  DATAFILECOPY &#39;/disk2/df2.cpy&#39; 
  FORMAT &#39;/disk1/df2.cpy&#39;;
BACKUP AS COPY
  DATAFILECOPY &#39;/disk1/df2.cpy&#39; 
  FORMAT &#39;/disk3/df2.cpy&#39;;
BACKUP
  DEVICE TYPE sbt
  DATAFILECOPY ALL NODUPLICATES; # backs up only copy of data file 2
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBCEHII">
<p class="titleinexample">Example 2-29 Copying Archived Log From Operating System File to ASM</p>
<pre dir="ltr">BACKUP AS COPY REUSE 
ARCHIVELOG LIKE &#34;/ade/b/369893928/oracle/work/arc_dest/arcr_1_11_686060575.arc&#34;
AUXILIARY FORMAT &#34;+RCVAREA&#34;;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-64CCCFBF-621C-43A1-99E0-D4F052DDBF0C">
<p class="titleinexample">Example 2-30 Multisection Backup of Data Files as Image Copies</p>
<p>This example creates a multisection backup of the data file <code class="codeph">users_df.dbf</code>. The backup is created as image copies and each backup piece cannot exceed 150MB.</p>
<pre dir="ltr">BACKUP AS COPY
SECTION SIZE 150M
DATAFILE &#39;/oradata/dbs/users_df.dbf&#39;;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-DF7E6EDD-BD34-4066-A680-6492AC676F8E">
<p class="titleinexample">Example 2-31 Multisection Incremental Backup of Database as Backup Sets</p>
<p>This example creates a multisection incremental backup of the database as backup sets. The incremental backup includes all data file blocks that changed at SCN greater than or equal to 8564. The <code class="codeph">FORMAT</code> clause is mandatory when you use <code class="codeph">INCREMENTAL FROM SCN</code> to create a multisection incremental backup.</p>
<pre dir="ltr">BACKUP
FORMAT &#39;/tmp/datafiles/db_incr_ms_%U&#39;
INCREMENTAL FROM SCN 8564
SECTION SIZE 400M
DATABASE;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__GUID-72C66D4E-13F6-4D5C-BBAD-E86062080315">
<p class="titleinexample">Example 2-32 Multisection Incremental Backup of Tablespaces</p>
<p>This example creates a multisection incremental backup of the tablespace <code class="codeph">orders</code> as backup sets. Before creating the backup, three channels are explicitly allocated using the <code class="codeph">ALLOCATE CHANNEL</code> command. Therefore, RMAN uses these channels to write, in parallel, to the backup pieces.</p>
<pre dir="ltr">run {
   ALLOCATE CHANNEL MY_CH1 TYPE DISK;
   ALLOCATE CHANNEL MY_CH2 TYPE DISK;
   ALLOCATE CHANNEL MY_CH3 TYPE DISK;
   BACKUP
     INCREMENTAL LEVEL 1
     AS COMPRESSED BACKUPSET
     SECTION SIZE 100M
     TABLESPACE sales;
    };
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBECGFG">
<p class="titleinexample">Example 2-33 Cross-Platform Backup of the Entire Database</p>
<p>This example creates a cross-platform backup of the entire database for transport to the Linux x86 64-bit platform. The source platform is Microsoft Windows IA (32-bit) and the backup is stored in a backup set named <code class="codeph">full_db.bck</code>. The database must be placed in read-only mode before the backup is created.</p>
<pre dir="ltr">BACKUP
    TO PLATFORM=&#39;Linux x86 64-bit&#39;
    FORMAT &#39;/tmp/xplat_backups/full_db.bck&#39;
    DATABASE;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBJFJAC">
<p class="titleinexample">Example 2-34 Cross-Platform Backup of a Consistent Tablespace</p>
<p>This example backs up the tablespace <code class="codeph">example</code> for cross-platform transport. The tablespace must be placed in read-only mode before the backup is performed. The backup set containing the tablespace data is called <code class="codeph">example_readonly.bck</code>. The metadata required to plug this tablespace into the target database is stored in the backup set <code class="codeph">example_dmp.bck</code>.</p>
<pre dir="ltr">BACKUP
   FOR TRANSPORT
   FORMAT &#39;/tmp/xplat_backups/example_readonly.bck&#39;
   TABLESPACE example
   DATAPUMP FORMAT &#39;/tmp/xplat_backups/example_dmp.bck&#39;;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBFJIGG">
<p class="titleinexample">Example 2-35 Cross-Platform Backup of a Tablespace Using Multiple Backup Sets</p>
<p>This example creates a cross-platform backup of the tablespace <code class="codeph">example</code> using multiple backup sets. Ensure that the tablespace is read-only before you create the backup. Because <code class="codeph">FILESPERSET</code> is set to 1, each backup set contains only one input file. The backup sets use unique names that begin with <code class="codeph">db_multiple_</code>.</p>
<pre dir="ltr">BACKUP
   FOR TRANSPORT
   FILESPERSET 1
   FORMAT &#39;/tmp/xplat_backups/db_multiple_%U&#39;
   TABLESPACE example
   DATAPUMP FORMAT &#39;/tmp/xplat_backups/db_multiple.dmp&#39;;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBCECEE">
<p class="titleinexample">Example 2-36 Cross-Platform Backup of a Tablespace Using Multiple Backup Pieces</p>
<p>This example creates a cross-platform backup of the tablespace <code class="codeph">example</code>. The backup uses multiple backup pieces because <code class="codeph">MAXPIECESIZE</code> is set in the <code class="codeph">ALLOCATE CHANNEL</code> command. Ensure that the tablespace is in read-only mode before the backup is created.</p>
<pre dir="ltr">RUN
{
   ALLOCATE CHANNEL c1 DEVICE TYPE disk MAXPIECESIZE 301464;
   BACKUP
      FOR TRANSPORT
      FORMAT &#39;/tmp/xplat_backups/example_multi-piece.bck&#39;
      TABLESPACE example
      DATAPUMP FORMAT &#39;/tmp/xplat_backups/example_multi-piece_dmp.bck&#39;;}
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBEJBGF">
<p class="titleinexample">Example 2-37 Cross-Platform Inconsistent Backup of a Tablespace</p>
<p>This example creates a cross-platform level 0 incremental backup of the tablespace <code class="codeph">example</code>. The tablespace is in read-write mode at the time of creating the backup and, therefore, you use <code class="codeph">ALLOW INCONSISTENT</code> to create an inconsistent backup.</p>
<p>Note that inconsistent backups of tablespaces cannot be used to directly plug the tablespace into the destination database. You must use an incremental backup of the tablespace that is created when the tablespace is read-only to make the tablespace consistent. <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBBFFBI">Example 2-38</a> describes how to create a cross-platform incremental backup.</p>
<pre dir="ltr">BACKUP
    FOR TRANSPORT
    ALLOW INCONSISTENT
    INCREMENTAL LEVEL 0
    FORMAT &#39;/tmp/xplat_backups/example_inconsist.bck&#39;
    TABLESPACE example;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBBFFBI">
<p class="titleinexample">Example 2-38 Cross-Platform Incremental Backup of a Tablespace</p>
<p>This example creates a cross-platform level 1 incremental backup of the tablespace <code class="codeph">example</code>. The tablespace is placed in read-only mode before this backup is created. This backup contains changes made to the tablespace after the most recent incremental backup was created. The backup is stored in a backup set called <code class="codeph">example_inconsist_incr.bck</code>. The metadata required to plug the tablespace into the destination database is stored in the backup set <code class="codeph">example_incr_dmp.bck</code>.</p>
<p>You can use this level 1 incremental backup, along with the level 0 incremental backup created in <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBEJBGF">Example 2-37</a>, to transport the tablespace example to a different platform. On the destination database, you first restore the level 0 incremental backup created in <a href="rcmsynta006.htm#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBEJBGF">Example 2-37</a> to create a set of foreign data files. These foreign data files are inconsistent because the tablespace was in read/write mode when the level 0 incremental backup was created. You then apply a level 1 incremental backup to the foreign data files. Next, you plug the tablespace in to the destination database by restoring the backup set specified in the <code class="codeph">DATAPUMP</code> clause. See <a class="olink BRADV783" target="_blank" href="../BRADV/rcmxplat.htm#BRADV783"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for a complete example of performing cross-platform inconsistent tablespace transport using backup sets.</p>
<p>In most scenarios, after creating the level 0 incremental backup, you create multiple level 1 incremental backups with the tablespace is placed in read/write mode. The final incremental level 1 backup is created with the tablespace placed in read-only mode. These incremental backups that are created and applied over time help minimize the data divergence between the source and destination database.</p>
<pre dir="ltr">BACKUP
   FOR TRANSPORT
   INCREMENTAL LEVEL 1
   TABLESPACE example
   FORMAT &#39;/tmp/xplat_backups/example_inconsist_incr.bck&#39;
   DATAPUMP FORMAT &#39;/tmp/xplat_backups/example_incr_dmp.bck&#39;;
</pre></div>
<!-- class="example" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1037">
<tr>
<td class="cellalignment1049">
<table class="cellalignment1042">
<tr>
<td class="cellalignment1041"><a href="rcmsynta005.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1041"><a href="rcmsynta007.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1051">
<table class="cellalignment1040">
<tr>
<td class="cellalignment1041"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1041"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1041"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1041"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1041"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1041"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>