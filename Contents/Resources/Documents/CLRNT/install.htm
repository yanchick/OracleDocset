<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-3909"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Installation%20and%20Configuration"></a><title>Installation and Configuration</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023"/>
<meta name="dcterms.created" content="2014-08-21T13:54:23Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Extensions for .NET Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E18596-03"/>
<meta name="dcterms.isVersionOf" content="CLRNT"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="intro.htm" title="Previous" type="text/html"/>
<link rel="Next" href="devdeploy.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E18596-03.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">6/12</span> <!-- End Header -->
<div id="CLRNT0002" class="chapter"><a id="CBHBHBJC"></a>
<h1 class="chapter"><span class="secnum">2</span> Installation and Configuration</h1>
<p>This chapter describes the installation of Oracle Database Extensions for .NET, system requirements, and file locations.</p>
<p>This chapter contains these topics:</p>
<ul>
<li>
<p><a href="#CBHCDJJF">System Requirements</a></p>
</li>
<li>
<p><a href="#CIHCGBFD">Requirements for .NET Stored Procedures and Functions</a></p>
</li>
<li>
<p><a href="#CHDBIBAB">Installation</a></p>
</li>
<li>
<p><a href="#CHDGBICJ">Configuring Extproc Agent Using Windows Service</a></p>
</li>
<li>
<p><a href="#i1006247">File Locations after Installation</a></p>
</li>
<li>
<p><a href="#CHDIBCGD">Listener and Tnsnames Files</a></p>
</li>
<li>
<p><a href="#CHDBJDDE">Migrating .NET Stored Procedures from Oracle Database 11.2 to Oracle Database 12.1</a></p>
</li>
<li>
<p><a href="#CHDHIEGJ">Mandatory Migration of .NET 1.x Stored Procedures to .NET 2.0 or Later</a></p>
</li>
<li>
<p><a href="#CHDFBBEA">Oracle Database Extensions for .NET Registry Options</a></p>
</li>
<li>
<p><a href="#CHDICFEJ">Unhandled Exceptions</a></p>
</li>
</ul>
<a id="CBHCDJJF"></a>
<div id="CLRNT126" class="sect1">
<h2 class="sect1">System Requirements<a id="sthref48"></a><a id="sthref49"></a><a id="sthref50"></a><a id="sthref51"></a><a id="sthref52"></a><a id="sthref53"></a><a id="sthref54"></a><a id="sthref55"></a><a id="sthref56"></a><a id="sthref57"></a><a id="sthref58"></a><a id="sthref59"></a><a id="sthref60"></a><a id="sthref61"></a><a id="sthref62"></a></h2>
<p>Each release of Oracle Database Extensions for .NET has very specific version requirements. The following system requirements only apply to Oracle Database Extensions for .NET version 12.1. If you are using a different version, please see the documentation specific to your version:</p>
<ul>
<li>
<p>Oracle Database 12.1 on Windows.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle Database Extensions for .NET is only supported on the Windows Platform.</div>
</li>
<li>
<p>Microsoft .NET Framework</p>
<ul>
<li>
<p>Oracle Database Extensions for .NET Framework 2.0 is only supported with Microsoft .NET Framework 2.0, 3.0, 3.5, 4, 4.5, and .NET Framework 4 Client Profile</p>
</li>
<li>
<p>Oracle Database Extensions for .NET Framework 4 is only supported with Microsoft .NET Framework 4, 4.5, and .NET Framework 4 Client Profile</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Microsoft Framework 1.x is no longer supported as of Oracle Database Extensions for .NET version 11.1.0.7.20. If you have stored procedures that require .NET Framework 1.x, you will need to take some special steps to make them work with this release. For more information see <a href="#CHDHIEGJ">&#34;Mandatory Migration of .NET 1.x Stored Procedures to .NET 2.0 or Later&#34;</a>.</div>
</li>
<li>
<p>Oracle Data Provider for .NET version 12.1 or higher (if data access in stored procedures is required).</p>
</li>
<li>
<p>Oracle Developer Tools for Visual Studio 11.2 or higher is required for .NET stored procedure deployment.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle Developer Tools for Visual Studio is not released with Oracle Database. It can be obtained from the Oracle .NET Developer Center at OTN.</div>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CIHCGBFD"></a>
<div id="CLRNT127" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Requirements for .NET Stored Procedures and Functions<a id="sthref63"></a><a id="sthref64"></a></h2>
<p>A .NET stored procedure or function must meet the following requirements:</p>
<ul>
<li>
<p>Be declared a public static method.</p>
</li>
<li>
<p>Not be a constructor or a destructor.</p>
</li>
<li>
<p>Use parameter types that are compatible with the Oracle native database types.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CHDBIBAB"></a>
<div id="CLRNT190" class="sect1">
<h2 class="sect1">Installation</h2>
<p>This section discusses many of the results of Oracle Database Extensions for .NET installation.</p>
<p>It covers these topics:</p>
<ul>
<li>
<p><a href="#CBHBEIID">Installation and First Use</a></p>
</li>
<li>
<p><a href="#i1006247">File Locations after Installation</a></p>
</li>
<li>
<p><a href="#CHDHHBBG">Oracle CLR Services and the Oracle Home User Account</a></p>
</li>
<li>
<p><a href="#CHDDIFEI">Using the OraClrCtl Utility to Create and Run OraClrAgent Services</a></p>
</li>
</ul>
<a id="CBHBEIID"></a>
<div id="CLRNT129" class="sect2">
<h3 class="sect2">Installation and First Use<a id="sthref65"></a><a id="sthref66"></a><a id="sthref67"></a><a id="sthref68"></a><a id="sthref69"></a><a id="sthref70"></a><a id="sthref71"></a></h3>
<p>In earlier releases of Oracle Database, Oracle Database Extensions for .NET required a custom installation. Beginning in Oracle Database 12<span class="italic">c</span>, Oracle Database Extensions for .NET is always installed, however it is not enabled, and Windows services for it are not created.</p>
<p><span class="bold">Before the first use of Oracle Database Extensions for .NET, do the following:</span></p>
<ol>
<li>
<p>Install Oracle Database 12<span class="italic">c</span> and either allow the installer to create the database for you, or install the database software only and use Database Configuration Assistant to create a database afterwards.</p>
</li>
<li>
<p>After installation and database creation, execute the following to enable Oracle Database Extensions for .NET. <a id="sthref72"></a></p>
<pre>chopt enable ode_net
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Database Installation Guide for Microsoft Windows</span></div>
</li>
<li>
<p>Execute the following to create the Oracle Database Extensions for .NET windows service.</p>
<pre>oraclrctl -new
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDDIFEI">&#34;Using the OraClrCtl Utility to Create and Run OraClrAgent Services&#34;</a></div>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDHHBBG"></a>
<div id="CLRNT191" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Oracle CLR Services and the Oracle Home User Account</h3>
<p>Beginning with Oracle Database 12<span class="italic">c</span>, the Oracle CLR services run as the Oracle Home User. Database installations now provide a way for users to specify at installation time a Oracle Home User account under which the various Oracle services are run. This non-privileged account can be a local user or a domain user without administrative privileges.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Database Platform Guide for Microsoft Windows</span></div>
<p>In earlier versions of Oracle Database, these CLR services were created automatically by the installer. Now, they are created manually, after installation, using the <code>OraClrCtl.exe</code> utility.</p>
<p>The database installation does not create the Oracle CLR service but still performs the necessary configuration in the database for Oracle Database Extensions for .NET to function properly. This includes the following:</p>
<ul>
<li>
<p>Creating the <code>listener.ora</code> entries for <code>extproc</code>.</p>
</li>
<li>
<p>Creating a <code>clr</code> folder under <code><span class="codeinlineitalic">ORACLE_BASE\\ORACLE_HOME</span></code><code>\bin</code>.</p>
</li>
<li>
<p>Installing the <code>OraClrCtl.exe</code> utility described in <a href="#CHDDIFEI">&#34;Using the OraClrCtl Utility to Create and Run OraClrAgent Services&#34;</a>.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDDIFEI"></a>
<div id="CLRNT192" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Using the OraClrCtl Utility to Create and Run OraClrAgent Services</h3>
<p>The <code>OraClrCtl.exe</code> utility creates the <code>OraClrAgnt</code> service in the <code><span class="codeinlineitalic">ORACLE_BASE\\ORACLE_HOME</span></code><code>\bin</code> directory and configures it to run using the Oracle Home User account specified during database installation. The service can be accessed through the Service Control Panel, as <code>Oracle</code>ORACLE_HOME<code>ClrAgent</code>, where <code><span class="codeinlineitalic">ORACLE_HOME</span></code> represents your Oracle home.</p>
<p><code>OraClrCtl.exe</code> can also start, stop, and delete the <code>OraClrAgnt</code> service.</p>
<p><span class="bold">Example</span></p>
<pre>oraclrctl.exe -start -host computer-pc5
</pre>
<p><code>OraClrCtl.exe</code> accepts these arguments:</p>
<p><code>-new</code>: Create and start new service.</p>
<p><code>-delete</code>: Delete service.</p>
<p><code>-start</code>: Start Service.</p>
<p><code>-stop</code>: Stop service.</p>
<p><code>-host</code> <code><span class="codeinlineitalic">hostname</span></code>: Execute the operation on the specified host. If no host is specified, defaults to local host.</p>
<p><code>OraClrCtl.exe</code> returns <code>TRUE</code> (1) or <code>FALSE</code> (0), and displays a <code>SUCCESS</code> or <code>FAILURE</code> message. Upon a failure, the message displays the OS error number and the corresponding message.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDGBICJ"></a>
<div id="CLRNT130" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Configuring Extproc Agent Using Windows Service<a id="sthref73"></a><a id="sthref74"></a><a id="sthref75"></a></h2>
<p><code>OraClrAgnt</code> is created by <code>OraClrCtl.exe</code> as described in <a href="#CHDHHBBG">&#34;Oracle CLR Services and the Oracle Home User Account&#34;</a>. The service can be accessed through the Service Control Panel, as <code>Oracle</code><code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>ClrAgent</code>, where <code><span class="codeinlineitalic">ORACLE_HOME</span></code> represents your Oracle home.</p>
<p>This service accepts these parameters listed in <a href="#CHDEDCBE">Table 2-1, &#34;OraClrAgnt Service Parameters&#34;</a>.</p>
<p>These parameter values can be specified as part of the Start Parameters in the properties window of the Control Panel Service. In this case, the parameter values are not saved and the values must be supplied again if the service is restarted later.</p>
<p>To persist the parameter values, you can change the Windows registry entry for this service and provide the parameter values as command line parameters to <code>OraClrAgnt.exe</code>. To do this, set the Windows registry key, <code>ImagePath</code>, located at</p>
<p><code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\ Oracle</code><code><span class="codeinlineitalic">OracleHome</span></code><code>ClrAgent</code></p>
<p>The value should be something similar to the following:</p>
<p><code><span class="codeinlineitalic">ORACLE_BASE\\ORACLE_HOME</span></code><code>\bin\OraClrAgnt.exe agent_sid=CLRExtProc</code> <code>max_dispatchers=2 tcp_dispatchers=0 max_task_threads=6 max_sessions=25</code> <code>ENVS=&#34;EXTPROC_DLLS=ONLY:</code><code><span class="codeinlineitalic">ORACLE_BASE\\ORACLE_HOME</span></code><code>\bin\oraclr12.dll&#34;</code></p>
<p>If the service cannot be started or stopped, the error messages are logged in the Application Log of the Event Viewer, with the service name as the event source name.</p>
<div id="CLRNT193" class="sect2"><a id="sthref76"></a>
<h3 class="sect2">OraClrAgnt Service Parameters<a id="sthref77"></a><a id="sthref78"></a><a id="sthref79"></a><a id="sthref80"></a><a id="sthref81"></a><a id="sthref82"></a><a id="sthref83"></a><a id="sthref84"></a><a id="sthref85"></a></h3>
<p><a href="#CHDEDCBE">Table 2-1</a> lists the parameters which can be configured using this service.</p>
<div id="CLRNT132" class="tblformal">
<p class="titleintable"><a id="sthref86"></a><a id="CHDEDCBE"></a>Table 2-1 OraClrAgnt Service Parameters</p>
<table class="cellalignment1819" title="OraClrAgnt Service Parameters" summary="OraClrAgnt Service Parameters" dir="ltr">
<thead>
<tr class="cellalignment1813">
<th class="cellalignment1820" id="r1c1-t8">Parameters</th>
<th class="cellalignment1820" id="r1c2-t8">Descriptions</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r2c1-t8" headers="r1c1-t8">
<p><code>agent_sid</code></p>
</td>
<td class="cellalignment1821" headers="r2c1-t8 r1c2-t8">
<p>This represents the <code>SID</code> of the <code>extproc</code> process. The default value is <code>CLRExtProc</code>. This is a mandatory parameter. If this parameter value is changed, appropriate changes need to be made in <code>tnsnames.ora</code> and <code>listener.ora</code> files.</p>
</td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r3c1-t8" headers="r1c1-t8">
<p><code>ENVS</code></p>
</td>
<td class="cellalignment1821" headers="r3c1-t8 r1c2-t8">
<p>Variable that specifies the <code>EXTPROC_DLLS</code> environment variable, which restricts the DLLs that <code>extproc</code> can load.</p>
<p>This is similar to setting environment variables to external procedures using <code>listener.ora</code>.</p>
<p>Refer to &#34;Table 13&ndash;5 External Procedures Settings in listener.ora&#34; in <span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span> for more information.</p>
</td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r4c1-t8" headers="r1c1-t8">
<p><code>listener_address</code></p>
</td>
<td class="cellalignment1821" headers="r4c1-t8 r1c2-t8">
<p>Address on which the listener is listening. This is an optional parameter. If it is not specified, then this is set to the default value.</p>
</td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r5c1-t8" headers="r1c1-t8">
<p><code>max_dispatchers</code></p>
</td>
<td class="cellalignment1821" headers="r5c1-t8 r1c2-t8">
<p>Number of maximum dispatchers in the <code>extproc</code> process. This is an optional parameter. If it is not specified, then this number is set to a default value.</p>
</td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r6c1-t8" headers="r1c1-t8">
<p><code>max_sessions</code></p>
</td>
<td class="cellalignment1821" headers="r6c1-t8 r1c2-t8">
<p>Number of maximum sessions in the <code>extproc</code> process. This is an optional parameter. If it is not specified, then this number is set to a default value.</p>
</td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r7c1-t8" headers="r1c1-t8">
<p><code>max_task_threads</code></p>
</td>
<td class="cellalignment1821" headers="r7c1-t8 r1c2-t8">
<p>Number of maximum task threads in the <code>extproc</code> process. This is an optional parameter. If it is not specified, then this number is set to a default value.</p>
</td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r8c1-t8" headers="r1c1-t8">
<p><code>shutdown_address</code></p>
</td>
<td class="cellalignment1821" headers="r8c1-t8 r1c2-t8">
<p>Address on which the agent should listen for shutdown messages from <code>agtctl</code>. This is an optional parameter. If it is not specified, then this is set to the default value.</p>
</td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r9c1-t8" headers="r1c1-t8">
<p><code>tcp_dispatchers</code></p>
</td>
<td class="cellalignment1821" headers="r9c1-t8 r1c2-t8">
<p>Number of TCP dispatchers in the <code>extproc</code> process. This is an optional parameter. If it is not specified, then this number is set to a default value.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Call Interface Programmer&#39;s Guide,</span> Table F-2, Configuration Parameters for <code>agtctl</code></div>
</div>
<!-- class="sect2" -->
<div id="CLRNT194" class="sect2"><a id="sthref87"></a>
<h3 class="sect2">Tuning OraClrAgnt for Performance<a id="sthref88"></a><a id="sthref89"></a><a id="sthref90"></a><a id="sthref91"></a></h3>
<p>You should tune the <code>OraClrAgnt</code> to match the expected load on your system.</p>
<p>Excessive <code>extproc.exe</code> processes being spawned is a sign that you have set the configuration values too low.</p>
<p>Start with the following values and increase as you test your system for performance:</p>
<div class="inftblinformal">
<table class="cellalignment1822" summary="Rows are OraClrAgnt Parameters. First column is name, second column is initial value" dir="ltr">
<thead>
<tr class="cellalignment1813">
<th class="cellalignment1820" id="r1c1-t10">OraClrAgnt Parameter</th>
<th class="cellalignment1820" id="r1c2-t10">Initial Value</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r2c1-t10" headers="r1c1-t10"><code>max_sessions</code></td>
<td class="cellalignment1821" headers="r2c1-t10 r1c2-t10"><code>25</code></td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r3c1-t10" headers="r1c1-t10"><code>max_task_threads</code></td>
<td class="cellalignment1821" headers="r3c1-t10 r1c2-t10"><code>6</code></td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r4c1-t10" headers="r1c1-t10"><code>max_dispatchers</code></td>
<td class="cellalignment1821" headers="r4c1-t10 r1c2-t10"><code>2</code></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1006247"></a>
<div id="CLRNT128" class="sect1">
<h2 class="sect1">File Locations after Installation<a id="sthref92"></a><a id="sthref93"></a><a id="sthref94"></a><a id="sthref95"></a></h2>
<p><code>OraClr12.dll</code> is installed in the <code><span class="codeinlineitalic">ORACLE_BASE\\ORACLE_HOME</span></code>\<code>bin</code> directory.</p>
<p><code>Oracle.Database.Extensions.dll</code> is installed to the following locations:</p>
<ul>
<li>
<p>.NET Framework 2.0:</p>
<p><code><span class="codeinlineitalic">ORACLE_BASE\\ORACLE_HOME</span></code><code>\ODE.NET</code><code>\bin\2.</code><code><span class="codeinlineitalic">x</span></code></p>
</li>
<li>
<p>.NET Framework 4:</p>
<p><code><span class="codeinlineitalic">ORACLE_BASE\\ORACLE_HOME</span></code><code>\ODE.NET</code><code>\bin\4</code></p>
</li>
</ul>
<p>The readme file, <code>readme.html</code>, is installed in the <code><span class="codeinlineitalic">ORACLE_BASE\\ORACLE_HOME</span></code><code>\ODE.NET\DOC</code> directory.</p>
<p>.NET assemblies deployed by developers are copied into the <code><span class="codeinlineitalic"><a id="sthref96"></a>ORACLE_BASE</span></code><code>\</code><code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>\</code><code>bin\CLR</code> directory (or its subdirectory) by the Oracle Deployment Wizard for .NET.</p>
</div>
<!-- class="sect1" -->
<a id="CHDIBCGD"></a>
<div id="CLRNT120" class="sect1">
<h2 class="sect1">Listener and Tnsnames Files<a id="sthref97"></a><a id="sthref98"></a><a id="sthref99"></a><a id="sthref100"></a></h2>
<p>The following are typical examples of the <code>listener.ora</code> and <code>tnsnames.ora</code> files configured for Oracle Database Extensions for .NET. By default, Oracle Database Extensions for .NET uses <code>CLRExtProc</code> as the SID, but this can be changed using the Database Configuration Assistant (DBCA).</p>
<p class="subhead2"><a id="CLRNT121"></a>Listener.ora file</p>
<pre>SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = PLSExtProc)
      (ORACLE_HOME = C:\oracle\database_1)
      (PROGRAM = extproc)
    )
    (SID_DESC =
      (SID_NAME = CLRExtProc)
      (ORACLE_HOME = C:\oracle\database_1)
      (PROGRAM = extproc)
      (ENVS=&#34;EXTPROC_DLLS=ONLY:C:\oracle\database_1\bin\oraclr12.dll&#34;)
    )
  )
 
LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
     
    )
  )
</pre>
<p class="subhead2"><a id="CLRNT122"></a>Tnsnames.ora File</p>
<pre>ORACLE =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = user.us.oracle.com)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = oracle.us.oracle.com)
    )
  )
 
ORACLR_CONNECTION_DATA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
    )
    (CONNECT_DATA =
      (SID = CLRExtProc)
      (PRESENTATION = RO)
    )
  )
 
EXTPROC_CONNECTION_DATA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
    )
    (CONNECT_DATA =
      (SID = PLSExtProc)
      (PRESENTATION = RO)
    )
  )
</pre></div>
<!-- class="sect1" -->
<a id="CHDBJDDE"></a>
<div id="CLRNT134" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Migrating .NET Stored Procedures from Oracle Database 11.2 to Oracle Database 12.1<a id="sthref101"></a></h2>
<p>You can migrate .NET stored procedures from Oracle Database release 11.2 to release 12.1 as follows:</p>
<ol>
<li>
<p>Select the libraries that are used by .NET stored procedures from the Oracle Database 11<span class="italic">g</span> release 2 (11.2) database. For example,</p>
<p><code>SELECT library_name, file_spec FROM ALL_LIBRARIES WHERE OWNER=&#39;SYS&#39;</code> and <code>FILE_SPEC LIKE &#39;$ORACLE_HOME\bin\clr\%&#39;;</code></p>
<p><code>library_name</code> is usually in the format <code>dll_name_DLL</code>. For example, the <code>library_name</code> for <code>Project1.dll</code> would be <code>PROJECT1_DLL</code>.</p>
</li>
<li>
<p>Create a SQL file manually (for example, <code>DotNetSP_Grant.sql</code>) with the following SQL statements:</p>
<pre>CREATE LIBRARY &#34;SYS&#34;.&#34;library_name&#34; AS &#39;file_spec&#39;
GRANT EXECUTE ON &#34;SYS&#34;.&#34;library_name&#34; TO &#34;schema_name&#34;
GRANT EXECUTE ON &#34;SYS&#34;.&#34;DBMS_CLR&#34; TO &#34;schema_name&#34;
GRANT EXECUTE ON &#34;SYS&#34;.&#34;DBMS_CLRTYPE&#34; TO &#34;schema_name&#34;
GRANT EXECUTE ON &#34;SYS&#34;.&#34;DBMS_CLRPARAMTABLE&#34; TO &#34;schema_name&#34;
</pre></li>
<li>
<p>Run Oracle Data Pump Export utility for the Oracle Database 11<span class="italic">g</span> release 2 (11.2).</p>
<pre>Expdp system schemas=&#34;schema_name&#34; directory=ORACLECLRDIR dumpfile=DotNetSP.dmp include=PROCEDURE,FUNCTION
</pre></li>
<li>
<p>Copy .NET stored procedure assemblies from Oracle Database 11<span class="italic">g</span> release 2 (11.2) <code><span class="codeinlineitalic"><code><span class="codeinlineitalic">ORACLE_BASE\\ORACLE_HOME</span></code></span></code><code>\bin\clr</code> folder and its subfolders to the same directory structure in Oracle Database 12<span class="italic">c</span> release 1 (12.1).</p>
</li>
<li>
<p>Run <code>DotNetSP_Grant.sql</code> as <code>SYSDBA</code> against the Oracle Database 12<span class="italic">c</span> release 1 (12.1) database.</p>
</li>
<li>
<p>If you are migrating to a pluggable database:</p>
<ol>
<li id="CHDCHFFF">
<p>Create directory <code><span class="codeinlineitalic">name</span></code> as the path to <code>DotNetSP.dmp</code> on the server.</p>
<pre>create directory <span class="italic">name</span> as &#39;<span class="italic">path to DotNetSP.dmp on the server</span>&#39;; 
</pre></li>
<li>
<p>Run Oracle Data Pump Import utility for the Oracle Database 12<span class="italic">c</span> release 1 (12.1) database.</p>
<pre>impdp system@<span class="italic">TNS alias for pluggable database</span> schemas=&#34;schema_name&#34; directory=<span class="italic">name</span>          // name provided in step a 
dumpfile=DotNetSP.dmp 
</pre></li>
<li>
<p>Drop the directory <code><span class="codeinlineitalic">name</span></code> provided in Step <a href="#CHDCHFFF">a</a>.</p>
<pre>drop directory <span class="italic">name</span>           // name provided in step a
</pre></li>
</ol>
</li>
<li>
<p>If you are NOT migrating to a pluggable database:</p>
<p>Run Oracle Data Pump Import utility for the Oracle Database 12<span class="italic">c</span> release 1 (12.1) database.</p>
<pre>impdp system schemas=&#34;schema_name&#34; directory=ORACLECLRDIR
dumpfile=DotNetSP.dmp
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Do NOT drop directory <code>ORACLECLRDIR</code>.</div>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CHDHIEGJ"></a>
<div id="CLRNT195" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Mandatory Migration of .NET 1.x Stored Procedures to .NET 2.0 or Later</h2>
<p>Beginning with Oracle Database Extensions for .NET version 11.1.0.7.20, .NET 1.x stored procedures are no longer supported. Specifically, Oracle Database Extensions for .NET 1.x and Oracle Data Provider for .NET 1.x are no longer included in this release. If you have existing .NET 1.x stored procedures from an earlier release, you will need to take special migration steps to ensure that they work in this release.</p>
<div class="infoboxnotewarn">
<p class="notep1">WARNING:</p>
<p class="warnsp">In some cases, this migration will require code changes. You should not install this release in a production environment if you have .NET 1.x stored procedures until you have verified in a test environment that your stored procedures have been successfully migrated. If you have already installed this release and are encountering errors in your .NET 1.x stored procedures, you should downgrade to an earlier version of Oracle Database Extensions for .NET until you are able to make any required code changes to your stored procedures.</p>
</div>
<div id="CLRNT196" class="sect2"><a id="sthref102"></a>
<h3 class="sect2">Determining if Code Changes are Needed</h3>
<p>You will need to analyze your .NET 1.x stored procedures to determine if code changes are required to migrate to this release. Specifically you should investigate:</p>
<ul>
<li>
<p>Code incompatibilities between ODP.NET for .NET 1.x and ODP.NET for .NET 2.0 (or later).</p>
<p>See <a href="#CHDFJJGI">&#34;Addressing Code Incompatibilities Between ODP.NET for .NET 1.x and ODP.NET for .NET 2.0 or Later&#34;</a> .</p>
</li>
<li>
<p>Code incompatibilities between Oracle Database Extensions for .NET 1.x and Oracle Database Extensions for .NET 2.0 (or later).</p>
<p>See <a href="#CHDCADCD">&#34;Addressing Code Incompatibilities Between Oracle Database Extensions for .NET Versions 1.x and 2.0 or Later&#34;</a></p>
</li>
<li>
<p>ADO.NET 1.x and ADO.NET 2.0 migration issues</p>
<p>See Microsoft documentation for more details:</p>
<p><a href="http://msdn.microsoft.com/en-us/netframework/aa570326.aspx"><code>http://msdn.microsoft.com/en-us/netframework/aa570326.aspx</code></a></p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<div id="CLRNT197" class="sect2"><a id="sthref103"></a>
<h3 class="sect2">Migration Approaches</h3>
<p>There are two possible approaches to allow your .NET 1.x stored procedures to work with this release:</p>
<ul>
<li>
<p>Recompile and redeploy your .NET 1.x stored procedures using ODP.NET for .NET 2.0 (or later). Oracle strongly recommends this approach and it is required if there are incompatibilities that require code changes. See <a href="#CHDECDFF">&#34;Recompile and Redeploy .NET 1.x Stored Procedures Using ODP.NET for .NET 2.0 or Later&#34;</a>.</p>
</li>
<li>
<p>Configure your .NET 1.x stored procedures to run using ODP.NET for .NET 2.0 (or later). This does not require recompilation but introduces the possibility of run-time errors if there are unaddressed incompatibilities. See <a href="#CHDFJBHH">&#34;Configure .NET 1.x Stored Procedures Using ODP.NET for .NET 2.0 or Later&#34;</a>.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDFJJGI"></a>
<div id="CLRNT198" class="sect2">
<h3 class="sect2">Addressing Code Incompatibilities Between ODP.NET for .NET 1.x and ODP.NET for .NET 2.0 or Later</h3>
<p>You may need to address the following code incompatibilities related to ODP.NET in your .NET 1.x stored procedures:</p>
<ul>
<li>
<p>In ODP.NET for .NET 2.0 (or later), <code>OracleParameter.Value</code> returns <code>OracleDecimal</code> instead of .NET native types when <code>OracleParameter.OracleDbType</code> is set to a number type, such as <code>Int32</code>, <code>Double</code>. This behavior change is summarized in the following table:</p>
<div class="inftblinformal">
<table class="cellalignment1822" summary="Rows indicate OracleParameter.OracleDbTypes. Columns are names, Value returned in .NET 1.x , Value returned in .NET 2.x" dir="ltr">
<thead>
<tr class="cellalignment1813">
<th class="cellalignment1820" id="r1c1-t13">OracleParameter.OracleDbType</th>
<th class="cellalignment1820" id="r1c2-t13">OracleParameter.Value Returned in .NET 1.x</th>
<th class="cellalignment1820" id="r1c3-t13">OracleParameter.Value Returned in .NET 2.x</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r2c1-t13" headers="r1c1-t13"><code>OracleDbType.Byte</code></td>
<td class="cellalignment1821" headers="r2c1-t13 r1c2-t13"><code>System.Byte</code></td>
<td class="cellalignment1821" headers="r2c1-t13 r1c3-t13"><code>OracleDecimal</code></td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r3c1-t13" headers="r1c1-t13"><code>OracleDbType.Double</code></td>
<td class="cellalignment1821" headers="r3c1-t13 r1c2-t13"><code>System.Double</code></td>
<td class="cellalignment1821" headers="r3c1-t13 r1c3-t13"><code>OracleDecimal</code></td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r4c1-t13" headers="r1c1-t13"><code>OracleDbType.BinaryDouble</code></td>
<td class="cellalignment1821" headers="r4c1-t13 r1c2-t13"><code>System.Double</code></td>
<td class="cellalignment1821" headers="r4c1-t13 r1c3-t13"><code>OracleDecimal</code></td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r5c1-t13" headers="r1c1-t13"><code>OracleDbType.Int16</code></td>
<td class="cellalignment1821" headers="r5c1-t13 r1c2-t13"><code>System.Int16</code></td>
<td class="cellalignment1821" headers="r5c1-t13 r1c3-t13"><code>OracleDecimal</code></td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r6c1-t13" headers="r1c1-t13"><code>OracleDbType.Int32</code></td>
<td class="cellalignment1821" headers="r6c1-t13 r1c2-t13"><code>System.Int32</code></td>
<td class="cellalignment1821" headers="r6c1-t13 r1c3-t13"><code>OracleDecimal</code></td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r7c1-t13" headers="r1c1-t13"><code>OracleDbType.Int64</code></td>
<td class="cellalignment1821" headers="r7c1-t13 r1c2-t13"><code>System.Int64</code></td>
<td class="cellalignment1821" headers="r7c1-t13 r1c3-t13"><code>OracleDecimal</code></td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r8c1-t13" headers="r1c1-t13"><code>OracleDbType.Single</code></td>
<td class="cellalignment1821" headers="r8c1-t13 r1c2-t13"><code>System.Single</code></td>
<td class="cellalignment1821" headers="r8c1-t13 r1c3-t13"><code>OracleDecimal</code></td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r9c1-t13" headers="r1c1-t13"><code>OracleDbType.BinaryFloat</code></td>
<td class="cellalignment1821" headers="r9c1-t13 r1c2-t13"><code>System.Single</code></td>
<td class="cellalignment1821" headers="r9c1-t13 r1c3-t13"><code>OracleDecimal</code></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" -->
<p>If any of the preceding <code>OracleDbType</code> enumeration values are used by your .NET 1.x stored procedure for an <code>out</code> or <code>in/out</code> <code>OracleParameter</code>, then it may need to be modified.</p>
</li>
<li>
<p>In ODP.NET for .NET 2.0 (or later), <code>OracleParameter.Value</code> returns provider-type specific <code>null</code> value (<code>OracleClob.Null</code>) instead of <code>DBNull.Value</code> when <code>OracleParameter.OracleDbType</code> is set for connected types. For example, if <code>OracleParameter.OracleDbType</code> is set to <code>OracleDbType.Clob</code>, then <code>OracleParameter.Value</code> represents a <code>null</code> value by returning <code>OracleClob.Null</code> instead of <code>DBNull.Value</code>, which is the case in ODP.NET for .NET 1.x.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDCADCD"></a>
<div id="CLRNT199" class="sect2">
<h3 class="sect2">Addressing Code Incompatibilities Between Oracle Database Extensions for .NET Versions 1.x and 2.0 or Later</h3>
<p>If any of the connected types are passed as parameters to your .NET 1.x stored procedure, and if the procedure checks for <code>null</code> values, then you may need to modify the procedure. Oracle Database Extensions for .NET 1.x uses a .NET <code>null</code> to represent a <code>null</code> value when the parameter happens to be a connected type. Oracle Database Extensions for .NET 2.0 (or later) uses provider-type specific <code>null</code> value, such as <code>OracleBFile.Null</code>, in these cases.</p>
<p>You can configure Oracle Database Extensions for .NET 2.0 (or later) to use .NET <code>null</code> values for connected type <code>null</code> values in place of provider-specific type <code>null</code> values. To do this, create and set the following registry value to 0:</p>
<p><code>HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\KEY_ORACLE_HOME\ODE\ProviderNull</code></p>
<p>You can find the documentation about this registry value in the section &#34;Backward Compatibility for Nullable ODP.NET Connected Types&#34; in <span class="italic">Oracle Data Provider for .NET Developer&#39;s Guide for Microsoft Windows</span>.</p>
</div>
<!-- class="sect2" -->
<a id="CHDECDFF"></a>
<div id="CLRNT200" class="sect2">
<h3 class="sect2">Recompile and Redeploy .NET 1.x Stored Procedures Using ODP.NET for .NET 2.0 or Later</h3>
<p>If you find code incompatibilities, you will need to recompile your .NET 1.x stored procedures using ODP.NET for .NET 2.0 (or later).</p>
<p>Even if you do not find code incompatibilities, Oracle recommends that you recompile and redeploy your .NET 1.x stored procedures. Recompiling ensures that you do not get run-time errors, if there are any unaddressed compatibility issues. Redeploy the stored procedures after successful recompilation.</p>
</div>
<!-- class="sect2" -->
<a id="CHDFJBHH"></a>
<div id="CLRNT201" class="sect2">
<h3 class="sect2">Configure .NET 1.x Stored Procedures Using ODP.NET for .NET 2.0 or Later</h3>
<p>Alternatively, if there are no code incompatibilities, you can configure the .NET 1.x stored procedures to run with ODP.NET for .NET 2.0 (or later). This approach does not require you to recompile and redeploy the .NET stored procedures. However, you might get run-time errors, if there are any unaddressed incompatibilities between versions 1.x and 2.0 of Oracle Database Extensions for .NET, ODP.NET, and ADO.NET. Use the following steps to configure the .NET 1.x stored procedures to run with ODP.NET for .NET 2.0 (or later) without recompiling and redeploying them:</p>
<ol>
<li>
<p>Follow steps similar to those given in <a href="#CHDBJDDE">&#34;Migrating .NET Stored Procedures from Oracle Database 11.2 to Oracle Database 12.1&#34;</a> to migrate your stored procedures to Oracle Database 12.1.</p>
</li>
<li>
<p>Modify or create the <code>extproc.exe.config</code> file in the <code><span class="codeinlineitalic">NewOracleHome</span></code><code>\bin</code> folder to redirect ODP.NET (<code>Oracle.DataAccess.dll</code>) 1.x references to the installed version of ODP.NET for .NET 2.0 (or later). For example, to redirect ODP.NET 1.111.6.20 references to ODP.NET 2.111.7.20, the <code>extproc.exe.config</code> file should include the following configuration section:</p>
<pre>&lt;configuration&gt; 
  &lt;runtime&gt; 
    &lt;legacyUnhandledExceptionPolicy enabled=&#34;1&#34;/&gt; 
    &lt;assemblyBinding xmlns=&#34;urn:schemas-microsoft-com:asm.v1&#34;&gt;
      &lt;dependentAssembly&gt;
        &lt;assemblyIdentity name=&#34;Oracle.DataAccess&#34;
                          publicKeyToken=&#34;89b483f429c47342&#34;
                          culture=&#34;neutral&#34; /&gt;
        &lt;bindingRedirect oldVersion=&#34;1.111.6.20&#34;
                         newVersion=&#34;2.111.7.20&#34;/&gt;
      &lt;/dependentAssembly&gt;
    &lt;/assemblyBinding&gt;
  &lt;/runtime&gt;
&lt;/configuration&gt;
</pre></li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDFBBEA"></a>
<div id="CLRNT135" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Oracle Database Extensions for .NET Registry Options<a id="sthref104"></a><a id="sthref105"></a><a id="sthref106"></a></h2>
<p>You can add functionality to Oracle Database Extensions for .NET using Windows registry entries that are located at</p>
<p><code>HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\KEY_</code><code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>\ODE</code></p>
<p><a href="#BABJDHII">Table 2-2</a> lists registry keys that add functionality to Oracle Database Extensions for .NET and the sections where the keys are discussed.</p>
<div id="CLRNT136" class="tblformal">
<p class="titleintable"><a id="sthref107"></a><a id="BABJDHII"></a>Table 2-2 Registry Options</p>
<table class="cellalignment1819" title="Registry Options" summary="rows are registry keys, first column isname, second column is documentation section" dir="ltr">
<thead>
<tr class="cellalignment1813">
<th class="cellalignment1820" id="r1c1-t14">Registry Key</th>
<th class="cellalignment1820" id="r1c2-t14">Section</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r2c1-t14" headers="r1c1-t14">
<p>.<code>NETFramework</code></p>
</td>
<td class="cellalignment1821" headers="r2c1-t14 r1c2-t14">
<p><a href="#CHDCACDE">&#34;Selecting a .NET Run Time Version&#34;</a></p>
</td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r3c1-t14" headers="r1c1-t14">
<p><code>ProviderNull</code></p>
</td>
<td class="cellalignment1821" headers="r3c1-t14 r1c2-t14">
<p><a href="#CHDCEGCG">&#34;Backward Compatibility for Nullable ODP.NET Connected Types&#34;</a></p>
</td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r4c1-t14" headers="r1c1-t14">
<p><code>RecreateAppDomain</code></p>
</td>
<td class="cellalignment1821" headers="r4c1-t14 r1c2-t14">
<p><a href="#CHDHBDBH">&#34;Unloading .NET Assemblies for Easy Redeployment&#34;</a></p>
</td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r5c1-t14" headers="r1c1-t14">
<p><code>TraceFileName</code></p>
</td>
<td class="cellalignment1821" headers="r5c1-t14 r1c2-t14">
<p><a href="#CHDCCFAI">&#34;TraceFileName&#34;</a></p>
</td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r6c1-t14" headers="r1c1-t14">
<p><code>TraceOption</code></p>
</td>
<td class="cellalignment1821" headers="r6c1-t14 r1c2-t14">
<p><a href="#CHDGGAGD">&#34;TraceOption&#34;</a></p>
</td>
</tr>
<tr class="cellalignment1813">
<td class="cellalignment1821" id="r7c1-t14" headers="r1c1-t14">
<p><code>TraceLevel</code></p>
</td>
<td class="cellalignment1821" headers="r7c1-t14 r1c2-t14">
<p><a href="#CHDGABEC">&#34;TraceLevel&#34;</a></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<a id="CHDHBDBH"></a>
<div id="CLRNT137" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Unloading .NET Assemblies for Easy Redeployment<a id="sthref108"></a><a id="sthref109"></a><a id="sthref110"></a></h3>
<p>From release 11.1.0.6.20, you can unload .NET assemblies when .NET stored procedure execution completes. This makes it easier to repeatedly test your code during development. If this registry key is not enabled, the <code>exproc.exe</code> process must be stopped and started with each redeployment.</p>
<p>This feature should not be used during performance testing or for production, as it has a negative effect on performance.</p>
<p>To define assembly loading behavior, set the registry value <code>RecreateAppDomain</code> of type <code>REG_SZ</code> under this registry key:</p>
<p><code>HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\KEY_</code><code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>\ODE</code></p>
<p>The valid values for <code>RecreateAppDomain</code> are:</p>
<p><code>0</code> = .NET Assembly remains loaded when the .NET stored procedure execution completes.</p>
<p><code>1</code> = .NET Assembly is unloaded when the .NET stored procedure execution completes.</p>
</div>
<!-- class="sect2" -->
<a id="CHDCEGCG"></a>
<div id="CLRNT138" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Backward Compatibility for Nullable ODP.NET Connected Types<a id="sthref111"></a><a id="sthref112"></a><a id="sthref113"></a><a id="sthref114"></a></h3>
<p>ODP.NET for .NET 2.0 (or later) supports a static <code>Null</code> property in ODP.NET Connected Types, in addition to the existing support for disconnected types such as <code>OracleDecimal</code>. It also supports a public property, <code>IsNull</code>, for each of these types to check whether or not objects of these types have been assigned a value.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Data Provider for .NET Developer&#39;s Guide for Microsoft Windows</span> for more information on nullable types</div>
<p>This enables <code>Null</code> objects of ODP.NET Connected Types to be propagated to and from a .NET stored procedure. The list of these connected types follows:</p>
<ul>
<li>
<p><code>OracleBlob</code></p>
</li>
<li>
<p><code>OracleClob</code></p>
</li>
<li>
<p><code>OracleBFile</code></p>
</li>
<li>
<p><code>OracleXmlType</code></p>
</li>
</ul>
<p>Previous versions of .NET stored procedures expected ODP.NET connected type parameters to be passed as <code>NULL</code> rather than a <code>Type.Null</code> object. In order to support backward compatibility, the registry string <code>ProviderNull</code> can be used to retain the old behavior.</p>
<p>To determine how Oracle Database Extensions for .NET handles passing a <code>NULL</code> value to an ODP.NET connected type parameter in a .NET stored procedure, set the registry string <code>ProviderNull</code> under this registry key:</p>
<p><code>HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\KEY_</code><code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>\ODE</code></p>
<p>The valid values for <code>ProviderNull</code> are:</p>
<p><code>0</code> = ODP.NET connected-type parameters are passed as <code>NULL</code> rather than <code>Type.Null</code> object.</p>
<p><code>1</code> = Oracle Database Extensions for .NET passes a <code>Type.Null</code> object to the .NET stored procedure in the case of a null value.</p>
</div>
<!-- class="sect2" -->
<a id="CHDCACDE"></a>
<div id="CLRNT139" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Selecting a .NET Run Time Version<a id="sthref115"></a><a id="sthref116"></a></h3>
<p>If multiple .NET run time versions are installed on the database computer, then Oracle Database Extensions for .NET defaults to the latest .NET run time available. However, you can configure Oracle Database Extensions for .NET to load a particular .NET run time by setting a registry value.</p>
<p>To specify .NET run time version, set the registry value, <code>.NETFramework</code> under this registry key:</p>
<p><code>HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\KEY_</code><code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>\ODE</code></p>
<p>Set the registry value to the appropriate .NET run time version, for example, v2.0.50727.</p>
<p>Note: .NET framework 1.x is not supported in this release. For more information see: <a href="#CHDHIEGJ">Mandatory Migration of .NET 1.x Stored Procedures to .NET 2.0 or Later</a>.</p>
</div>
<!-- class="sect2" -->
<a id="CHDDFIAA"></a>
<div id="CLRNT140" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Debug Tracing<a id="sthref117"></a><a id="sthref118"></a><a id="sthref119"></a><a id="sthref120"></a></h3>
<p>Oracle Database Extensions for .NET provides debug tracing support, which allows logging of all the Oracle Database Extensions for .NET activities into a trace file. Different levels of tracing are available.</p>
<p>The following registry settings should be configured under</p>
<p><code>HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\KEY_</code><code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>\ODE</code></p>
<a id="CHDGGAGD"></a>
<div id="CLRNT141" class="sect3">
<h4 class="sect3">TraceOption</h4>
<p><code>TraceOption</code> specifies whether to log trace information in single or multiple files for different threads. If a single trace file is specified, the filename specified in <code>TraceFileName</code> is used. If the multiple trace files option is requested, a Thread ID is appended to the file name provided to create a trace file for each thread.</p>
<p>The valid values for <code>TraceOption</code> are:</p>
<p><code>0</code> = Single trace file</p>
<p><code>1</code> = Multiple trace files</p>
<p>Note: You can use Oracle Data Provider for .NET tracing mechanism to troubleshoot ODP.NET specific issues.</p>
</div>
<!-- class="sect3" -->
<a id="CHDCCFAI"></a>
<div id="CLRNT142" class="sect3">
<h4 class="sect3">TraceFileName</h4>
<p><code>TraceFileName</code> specifies the file name that is to be used for logging trace information. If <code>TraceOption</code> is set to <code>0</code>, the name is used as is. However, if <code>TraceOption</code> is <code>1</code>, the Thread ID is appended to the file name provided.</p>
<p>The valid values for <code>TraceFileName</code> are: any valid path name and file name.</p>
</div>
<!-- class="sect3" -->
<a id="CHDGABEC"></a>
<div id="CLRNT143" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">TraceLevel</h4>
<p><code>TraceLevel</code> specifies the level of tracing in Oracle Database Extensions for .NET.</p>
<p>The valid values for <code>TraceLevel</code> are:</p>
<p><code>0</code> = None</p>
<p><code>1</code> = Entry and exit information</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Debug Tracing section in <span class="italic">Oracle Data Provider for .NET Developer&#39;s Guide for Microsoft Windows</span></div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDICFEJ"></a>
<div id="CLRNT144" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Unhandled Exceptions<a id="sthref121"></a></h2>
<p>.NET stored procedures are hosted inside the external procedure agent <code>extproc.exe</code>. .NET run time version 2.0 (or later) allows most unhandled exceptions in threads to proceed, which might cause an unhandled exception to terminate <code>extproc.exe</code>. This behavior is different from .NET run time versions 1.0 and 1.1, which provide a backstop for many unhandled exceptions.</p>
<div id="CLRNT145" class="sect2"><a id="sthref122"></a>
<h3 class="sect2">extproc.exe Config File<a id="sthref123"></a></h3>
<p>Oracle Database Extensions for .NET installs <code>extproc.exe.config</code> file in the <code><span class="codeinlineitalic"><code><span class="codeinlineitalic">ORACLE_BASE\\ORACLE_HOME</span></code></span></code><code>\Bin</code> directory to force .NET run time version 2.0 (or later) to use the behavior of .NET run time version 1.1. If the Garbage Collector or a thread created inside the .NET stored procedures throws an exception, and if this exception is not handled by the .NET stored procedure, then the tracing mechanism reports the exception.</p>
<p>The following is an example <code>extproc.exe.config</code> file:</p>
<pre>&lt;configuration&gt;
  &lt;runtime&gt;
    &lt;legacyUnhandledExceptionPolicy enabled=&#34;1&#34;/&gt;
  &lt;/runtime&gt;
&lt;/configuration&gt;
</pre>
<p>You can change this file to revert back to .NET 2.0 (or later) behavior by modifying the <code>extproc.exe.config</code> file as follows:</p>
<pre>&lt;configuration&gt;
  &lt;runtime&gt;
   &lt;legacyUnhandledExceptionPolicy enabled=&#34;0&#34;/&gt;
  &lt;/runtime&gt;
&lt;/configuration&gt;
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1812">
<tr>
<td class="cellalignment1821">
<table class="cellalignment1817">
<tr>
<td class="cellalignment1816"><a href="intro.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1816"><a href="devdeploy.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1824">
<table class="cellalignment1815">
<tr>
<td class="cellalignment1816"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1816"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1816"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1816"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1816"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1816"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>