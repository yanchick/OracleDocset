<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-103738"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/SQL%2APlus%20Security"></a><title>SQL*Plus Security</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737"/>
<meta name="dcterms.created" content="2013-07-17T10:55:16Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="SQL*Plus&reg; User&#39;s Guide and Reference"/>
<meta name="dcterms.identifier" content="E18404-12"/>
<meta name="dcterms.isVersionOf" content="SQPUG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="ch_eight.htm" title="Previous" type="text/html"/>
<link rel="Next" href="ch_ten.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E18404-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">18/82</span> <!-- End Header -->
<div id="SQPUG019" class="chapter"><a id="CEGIDFFB"></a><a id="i1058699"></a>
<h1 class="chapter"><span class="secnum">9</span> SQL*Plus Security</h1>
<p>This chapter describes the available methods for controlling access to database tables, and SQL*Plus commands. It covers the following topics:</p>
<ul>
<li>
<p><a href="#i1058732">PRODUCT_USER_PROFILE Table</a></p>
</li>
<li>
<p><a href="#i1058852">Disabling SQL*Plus, SQL, and PL/SQL Commands</a></p>
</li>
<li>
<p><a href="#i1059130">Creating and Controlling Roles</a></p>
</li>
<li>
<p><a href="#i1059216">Disabling Commands with SQLPLUS -RESTRICT</a></p>
</li>
<li>
<p><a href="#BCEBCHFH">Program Argument Security</a></p>
</li>
</ul>
<a id="i1058732"></a>
<div id="SQPUG563" class="sect1">
<h2 class="sect1">PRODUCT_USER_PROFILE Table<a id="sthref983"></a></h2>
<p>SQL*Plus uses the PRODUCT_USER_PROFILE (PUP) table, a table in the SYSTEM account, to provide product-level <a id="sthref984"></a>security that supplements the user-level security provided by the SQL <a id="sthref985"></a>GRANT and <a id="sthref986"></a>REVOKE commands and user roles.</p>
<p>DBAs can use the PUP table to disable <a id="sthref987"></a>certain SQL and SQL*Plus commands in the SQL*Plus environment on a per-user basis. SQL*Plus&mdash;not Oracle Database&mdash;enforces this security. DBAs can even restrict access to the GRANT, REVOKE, and SET ROLE commands to control users&#39; ability to change their database privileges.</p>
<p>SQL*Plus reads restrictions from the PUP table when a user logs in to SQL*Plus and maintains those restrictions for the duration of the session. Changes to the PUP table will only take effect the next time the affected users log in to SQL*Plus.</p>
<p>When SYSTEM, SYS, or a user authenticating with SYSBACKUP, SYSDBA, SYSDG, SYSKM or SYSOPER privileges connects or logs in, SQL*Plus does not read the PUP table. Therefore, no restrictions apply to these users.</p>
<p>The PUP table applies only to the local database. If accessing objects on a remote database through a database link, the PUP table for the remote database does not apply. The remote database cannot extract the username and password from the database link in order to determine that user&#39;s profile and privileges.</p>
<div id="SQPUG564" class="sect2"><a id="sthref988"></a>
<h3 class="sect2">Creating the PUP Table</h3>
<p>You can create <a id="sthref989"></a>the PUP table by running the script named <a id="sthref990"></a>PUPBLD with the extension SQL as SYSTEM. The exact format of the file extension and the location of the file are system dependent. See your DBA for more information.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the table is created incorrectly, all users other than privileged users will see a warning when connecting to Oracle Database that the PUP table information is not loaded.</div>
</div>
<!-- class="sect2" -->
<div id="SQPUG565" class="sect2"><a id="sthref991"></a>
<h3 class="sect2">PUP Table Structure</h3>
<p>The PUP table has the following columns:</p>
<pre>PRODUCT                 NOT NULL VARCHAR2 (30)
USERID                  VARCHAR2(30)
ATTRIBUTE               VARCHAR2(240)
SCOPE                   VARCHAR2(240)
NUMERIC_VALUE           NUMBER(15,2)
CHAR_VALUE              VARCHAR2(240)
DATE_VALUE              DATE
LONG_VALUE              LONG
</pre></div>
<!-- class="sect2" -->
<div id="SQPUG566" class="sect2"><a id="sthref992"></a>
<h3 class="sect2">Description and Use of PUP Columns</h3>
<p>The following list describes each column in the PUP table:</p>
<div class="inftblinformal">
<table class="cellalignment1443" title="Description of PUP Table Columns" summary="2 column table showing the 8 columns in the PUP table and their descriptions. The column headings are PUP Column, and Description." dir="ltr">
<thead>
<tr class="cellalignment1437">
<th class="cellalignment1448" id="r1c1-t3">PUP Column</th>
<th class="cellalignment1448" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r2c1-t3" headers="r1c1-t3">PRODUCT</td>
<td class="cellalignment1444" headers="r2c1-t3 r1c2-t3">Must contain the product name (in this case &#34;SQL*Plus&#34;). You cannot enter wildcards or NULL in this column.</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r3c1-t3" headers="r1c1-t3">USERID</td>
<td class="cellalignment1444" headers="r3c1-t3 r1c2-t3">Must contain the username (uppercase) of the user for whom you wish to disable the command. To disable the command for more than one user, use SQL wild cards (%) or make multiple entries. Thus, all of the following entries are valid:
<ul>
<li>
<p>HR</p>
</li>
<li>
<p>CLASS1</p>
</li>
<li>
<p>CLASS% (all users whose names start with CLASS)</p>
</li>
<li>
<p>% (all users)</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1437">
<td>&nbsp;</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r5c1-t3" headers="r1c1-t3">ATTRIBUTE</td>
<td class="cellalignment1444" headers="r5c1-t3 r1c2-t3">Must contain the name (in uppercase) of the SQL, SQL*Plus, or PL/SQL command to disable (for example, RUN). If you are disabling a role, it must contain the character string &#34;ROLES&#34;. You cannot enter a wildcard. See <a href="#i1058849">PUP Table Administration</a> for a list of SQL and SQL*Plus commands you can disable. See <a href="#i1059130">Creating and Controlling Roles</a> for information on how to disable a role.</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r6c1-t3" headers="r1c1-t3">SCOPE</td>
<td class="cellalignment1444" headers="r6c1-t3 r1c2-t3">Not used, it is recommended that you enter NULL. Other products may store specific file restrictions or other data in this column.</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r7c1-t3" headers="r1c1-t3">NUMERIC_VALUE</td>
<td class="cellalignment1444" headers="r7c1-t3 r1c2-t3">Not used, it is recommended that you enter NULL. Other products may store numeric values in this column.</td>
</tr>
<tr class="cellalignment1437">
<td>&nbsp;</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r9c1-t3" headers="r1c1-t3">CHAR_VALUE</td>
<td class="cellalignment1444" headers="r9c1-t3 r1c2-t3">Must contain the character string<a id="sthref993"></a> &#34;DISABLED&#34; to disable a SQL, SQL*Plus, or PL/SQL command. If you are disabling a role, it must contain the name of the role you wish to disable. You cannot use a wildcard. See <a href="#i1059216">Disabling Commands with SQLPLUS -RESTRICT</a> for information on disabling a role.</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r10c1-t3" headers="r1c1-t3">DATE_VALUE</td>
<td class="cellalignment1444" headers="r10c1-t3 r1c2-t3">Not used, it is recommended that you enter NULL. Other products may store DATE values in this column.</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r11c1-t3" headers="r1c1-t3">LONG_VALUE</td>
<td class="cellalignment1444" headers="r11c1-t3 r1c2-t3">Not used, it is recommended that you enter NULL. Other products may store LONG values in this column.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" --></div>
<!-- class="sect2" -->
<a id="i1058849"></a>
<div id="SQPUG567" class="sect2">
<h3 class="sect2">PUP Table Administration</h3>
<p>The DBA username SYSTEM owns and has all privileges on the PUP table. Other Oracle Database usernames should have only SELECT access to this table, which enables a view of restrictions for that username and those restrictions assigned to PUBLIC. The script PUPBLD.SQL, when run, grants SELECT access on the PUP table to PUBLIC.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1058852"></a>
<div id="SQPUG568" class="sect1">
<h2 class="sect1">Disabling SQL*Plus, SQL, and PL/SQL Commands</h2>
<p><a id="sthref994"></a><a id="sthref995"></a>To <a id="sthref996"></a>disable a SQL or SQL*Plus command for a given user, insert a row containing the user&#39;s username in the Userid column, the command name in the Attribute column, and DISABLED in the Char_Value column. The Scope, Numeric_Value, and Date_Value columns should contain NULL. For example:</p>
<pre>PRODUCT    USERID  ATTRIBUTE  SCOPE   NUMBERIC    CHAR       DATE    LONG
                                      VALUE       VALUE      VALUE   VALUE
-------    ------  ---------  -----   --------    ------     -----   -----
SQL*Plus   HR      HOST                           DISABLED
SQL*Plus   %       INSERT                         DISABLED
SQL*Plus   %       UPDATE                         DISABLED
SQL*Plus   %       DELETE                         DISABLED
</pre>
<p>To <a id="sthref997"></a>re-enable commands, delete the row containing the restriction.</p>
<div class="inftblinformal">
<table class="cellalignment1443" title="SQL*Plus Commands that can be Disabled" summary="4 column table showing SQL*Plus commands that can be disabled in the PUP table." dir="ltr">
<thead>
<tr class="cellalignment1437">
<th class="cellalignment1448" id="r1c1-t4" colspan="4">SQL*Plus Commands That Can Be Disabled</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r2c1-t4" headers="r1c1-t4">ACCEPT</td>
<td class="cellalignment1444" headers="r2c1-t4 r1c1-t4">DEFINE</td>
<td class="cellalignment1444" headers="r2c1-t4 r1c1-t4">PASSWORD</td>
<td class="cellalignment1444" headers="r2c1-t4 r1c1-t4">SHUTDOWN</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r3c1-t4" headers="r1c1-t4">APPEND</td>
<td class="cellalignment1444" headers="r3c1-t4 r1c1-t4">DEL</td>
<td class="cellalignment1444" headers="r3c1-t4 r1c1-t4">PAUSE</td>
<td class="cellalignment1444" headers="r3c1-t4 r1c1-t4">SPOOL</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r4c1-t4" headers="r1c1-t4">ARCHIVE LOG</td>
<td class="cellalignment1444" headers="r4c1-t4 r1c1-t4">DESCRIBE</td>
<td class="cellalignment1444" headers="r4c1-t4 r1c1-t4">PRINT</td>
<td class="cellalignment1444" headers="r4c1-t4 r1c1-t4">START (@, @@)</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r5c1-t4" headers="r1c1-t4">ATTRIBUTE</td>
<td class="cellalignment1444" headers="r5c1-t4 r1c1-t4">DISCONNECT</td>
<td class="cellalignment1444" headers="r5c1-t4 r1c1-t4">PROMPT</td>
<td class="cellalignment1444" headers="r5c1-t4 r1c1-t4">STARTUP</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r6c1-t4" headers="r1c1-t4">BREAK</td>
<td class="cellalignment1444" headers="r6c1-t4 r1c1-t4">EDIT</td>
<td class="cellalignment1444" headers="r6c1-t4 r1c1-t4">RECOVER</td>
<td class="cellalignment1444" headers="r6c1-t4 r1c1-t4">STORE</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r7c1-t4" headers="r1c1-t4">BTITLE</td>
<td class="cellalignment1444" headers="r7c1-t4 r1c1-t4">EXECUTE</td>
<td class="cellalignment1444" headers="r7c1-t4 r1c1-t4">REMARK</td>
<td class="cellalignment1444" headers="r7c1-t4 r1c1-t4">TIMING</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r8c1-t4" headers="r1c1-t4">CHANGE</td>
<td class="cellalignment1444" headers="r8c1-t4 r1c1-t4">EXIT/QUIT</td>
<td class="cellalignment1444" headers="r8c1-t4 r1c1-t4">REPFOOTER</td>
<td class="cellalignment1444" headers="r8c1-t4 r1c1-t4">TTITLE</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r9c1-t4" headers="r1c1-t4">CLEAR</td>
<td class="cellalignment1444" headers="r9c1-t4 r1c1-t4">GET</td>
<td class="cellalignment1444" headers="r9c1-t4 r1c1-t4">REPHEADER</td>
<td class="cellalignment1444" headers="r9c1-t4 r1c1-t4">UNDEFINE</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r10c1-t4" headers="r1c1-t4">COLUMN</td>
<td class="cellalignment1444" headers="r10c1-t4 r1c1-t4">HELP (?)</td>
<td class="cellalignment1444" headers="r10c1-t4 r1c1-t4">RUN</td>
<td class="cellalignment1444" headers="r10c1-t4 r1c1-t4">VARIABLE</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r11c1-t4" headers="r1c1-t4">COMPUTE</td>
<td class="cellalignment1444" headers="r11c1-t4 r1c1-t4">HOST</td>
<td class="cellalignment1444" headers="r11c1-t4 r1c1-t4">SAVE</td>
<td class="cellalignment1444" headers="r11c1-t4 r1c1-t4">WHENEVER OSERROR</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r12c1-t4" headers="r1c1-t4">CONNECT</td>
<td class="cellalignment1444" headers="r12c1-t4 r1c1-t4">INPUT</td>
<td class="cellalignment1444" headers="r12c1-t4 r1c1-t4">SET</td>
<td class="cellalignment1444" headers="r12c1-t4 r1c1-t4">WHENEVER SQLERROR</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r13c1-t4" headers="r1c1-t4">COPY</td>
<td class="cellalignment1444" headers="r13c1-t4 r1c1-t4">LIST (;)</td>
<td class="cellalignment1444" headers="r13c1-t4 r1c1-t4">SHOW</td>
<td class="cellalignment1444" headers="r13c1-t4 r1c1-t4">XQUERY</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" -->
<div class="inftblinformal">
<table class="cellalignment1443" title="SQL*Plus Commands that can be Disabled" summary="4 column table showing SQL*Plus commands that can be disabled in the PUP table." dir="ltr">
<thead>
<tr class="cellalignment1437">
<th class="cellalignment1448" id="r1c1-t5" colspan="4">SQL Commands That Can Be Disabled</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r2c1-t5" headers="r1c1-t5"><a id="sthref998"></a>ALTER</td>
<td class="cellalignment1444" headers="r2c1-t5 r1c1-t5"><a id="sthref999"></a>DELETE</td>
<td class="cellalignment1444" headers="r2c1-t5 r1c1-t5"><a id="sthref1000"></a>MERGE</td>
<td class="cellalignment1444" headers="r2c1-t5 r1c1-t5"><a id="sthref1001"></a>SET CONSTRAINTS</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r3c1-t5" headers="r1c1-t5"><a id="sthref1002"></a>ANALYZE</td>
<td class="cellalignment1444" headers="r3c1-t5 r1c1-t5"><a id="sthref1003"></a>DISASSOCIATE</td>
<td class="cellalignment1444" headers="r3c1-t5 r1c1-t5"><a id="sthref1004"></a>NOAUDIT</td>
<td class="cellalignment1444" headers="r3c1-t5 r1c1-t5"><a id="sthref1005"></a>SET ROLE</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r4c1-t5" headers="r1c1-t5"><a id="sthref1006"></a>ASSOCIATE</td>
<td class="cellalignment1444" headers="r4c1-t5 r1c1-t5"><a id="sthref1007"></a>DROP</td>
<td class="cellalignment1444" headers="r4c1-t5 r1c1-t5"><a id="sthref1008"></a>PURGE</td>
<td class="cellalignment1444" headers="r4c1-t5 r1c1-t5"><a id="sthref1009"></a>SET TRANSACTION</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r5c1-t5" headers="r1c1-t5"><a id="sthref1010"></a>AUDIT</td>
<td class="cellalignment1444" headers="r5c1-t5 r1c1-t5"><a id="sthref1011"></a>EXPLAIN</td>
<td class="cellalignment1444" headers="r5c1-t5 r1c1-t5"><a id="sthref1012"></a>RENAME</td>
<td class="cellalignment1444" headers="r5c1-t5 r1c1-t5"><a id="sthref1013"></a>TRUNCATE</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r6c1-t5" headers="r1c1-t5"><a id="sthref1014"></a>CALL</td>
<td class="cellalignment1444" headers="r6c1-t5 r1c1-t5"><a id="sthref1015"></a>FLASHBACK</td>
<td class="cellalignment1444" headers="r6c1-t5 r1c1-t5"><a id="sthref1016"></a>REVOKE</td>
<td class="cellalignment1444" headers="r6c1-t5 r1c1-t5"><a id="sthref1017"></a>UPDATE</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r7c1-t5" headers="r1c1-t5"><a id="sthref1018"></a>COMMENT</td>
<td class="cellalignment1444" headers="r7c1-t5 r1c1-t5"><a id="sthref1019"></a>GRANT</td>
<td class="cellalignment1444" headers="r7c1-t5 r1c1-t5"><a id="sthref1020"></a>ROLLBACK</td>
<td class="cellalignment1444" headers="r7c1-t5 r1c1-t5"><a id="sthref1021"></a>VALIDATE</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r8c1-t5" headers="r1c1-t5"><a id="sthref1022"></a>COMMIT</td>
<td class="cellalignment1444" headers="r8c1-t5 r1c1-t5"><a id="sthref1023"></a>INSERT</td>
<td class="cellalignment1444" headers="r8c1-t5 r1c1-t5"><a id="sthref1024"></a>SAVEPOINT</td>
<td class="cellalignment1444" headers="r8c1-t5 r1c1-t5">na</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r9c1-t5" headers="r1c1-t5"><a id="sthref1025"></a>CREATE</td>
<td class="cellalignment1444" headers="r9c1-t5 r1c1-t5"><a id="sthref1026"></a>LOCK</td>
<td class="cellalignment1444" headers="r9c1-t5 r1c1-t5"><a id="sthref1027"></a>SELECT</td>
<td class="cellalignment1444" headers="r9c1-t5 r1c1-t5">na</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" -->
<p>You can disable the following PL/SQL commands:<a id="sthref1028"></a></p>
<div class="inftblinformal">
<table class="cellalignment1443" title="SQL*Plus Commands that can be Disabled" summary="4 column table showing SQL*Plus commands that can be disabled in the PUP table." dir="ltr">
<thead>
<tr class="cellalignment1437">
<th class="cellalignment1448" id="r1c1-t6" colspan="4">PL/SQL Commands That Can Be Disabled</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r2c1-t6" headers="r1c1-t6"><a id="sthref1029"></a>BEGIN</td>
<td class="cellalignment1444" headers="r2c1-t6 r1c1-t6"><a id="sthref1030"></a>DECLARE</td>
<td class="cellalignment1444" headers="r2c1-t6 r1c1-t6">na</td>
<td class="cellalignment1444" headers="r2c1-t6 r1c1-t6">na</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>Disabling HOST disables the operating system alias for HOST, such as $ on Windows, and ! on UNIX.</p>
</li>
<li>
<p>Disabling LIST disables ; and numbers (numbers entered to go to that line in a script).</p>
</li>
<li>
<p>You must disable HELP and ? separately to disable access to command-line help.</p>
</li>
<li>
<p>Disabling the SQL*Plus SET command also disables SQL SET CONSTRAINTS, SET ROLE and SET TRANSACTION.</p>
</li>
<li>
<p>Disabling SQL*Plus START also disables @ and @@.</p>
</li>
<li>
<p>Disabling BEGIN and DECLARE does not prevent the use of SQL*Plus EXECUTE to run PL/SQL. EXECUTE must be disabled separately.</p>
</li>
<li>
<p>Disabling EXIT/QUIT is not recommended. If disabled, terminate a command-line session by sending an EOF character such as Ctrl+D in UNIX or Ctrl+Z in Windows. Otherwise, terminate a session by terminating the SQL*Plus process. If disabled, the EXIT operation in WHENEVER OSERROR and WHENEVER SQLERROR is also disabled.</p>
</li>
</ul>
</div>
<div id="SQPUG569" class="example">
<p class="titleinexample"><a id="sthref1031"></a>Example 9-1 Setting Restrictions in the PUP Table</p>
<p>This is an example of how to insert a row into the PUP table to restrict the user HR from using the SELECT statement:</p>
</div>
<!-- class="example" -->
<ol>
<li>
<p>Log in as SYSTEM with the command</p>
<pre>SQLPLUS SYSTEM
</pre></li>
<li>
<p>Insert a row into the PUP table with the command:</p>
<pre>INSERT INTO PRODUCT_USER_PROFILE
VALUES (&#39;SQL*Plus&#39;, &#39;HR&#39;, &#39;SELECT&#39;, NULL, NULL, &#39;DISABLED&#39;, NULL, NULL);
</pre></li>
<li>
<p>Connect as HR and try to SELECT something:</p>
<pre>CONNECT HR 
SELECT * FROM EMP_DETAILS_VIEW; 
</pre>
<p>This command causes the following error message:</p>
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 9-1" summary="Shows output from example 9-1 after restricted SELECT." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t8">
<pre>SP2-0544: Command SELECT disabled in Product User Profile
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" --></li>
<li>
<p>To delete this row and remove the restriction from the user HR, CONNECT again as SYSTEM and enter:</p>
<pre>DELETE FROM PRODUCT_USER_PROFILE WHERE USERID = &#39;HR&#39;; 
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i1059130"></a>
<div id="SQPUG570" class="sect1">
<h2 class="sect1">Creating and Controlling Roles<a id="sthref1032"></a></h2>
<p>You can use SQL commands to create and control access to roles to provide security for your database tables. By creating a role and then controlling who has access to it, you can ensure that only certain users have access to particular database privileges.</p>
<p>Roles are created and used with the SQL CREATE, GRANT, and SET commands:</p>
<ul>
<li>
<p>To create a role, you use the CREATE command. You can create roles with or without passwords.</p>
</li>
<li>
<p>To grant access to roles, you use the GRANT command. In this way, you can control who has access to the privileges associated with the role.</p>
</li>
<li>
<p>To access roles, you use the SET ROLE command. If you created the role with a password, the user must know the password in order to access the role.</p>
</li>
</ul>
<p>For more information about roles, see your <a class="olink SQLRF" href="../SQLRF/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a>, your <a class="olink ADMIN" href="../ADMIN/toc.htm"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a>, and your <a class="olink CNCPT" href="../CNCPT/toc.htm"><span class="italic">Oracle Database Concepts</span></a> manual.</p>
<a id="i1059154"></a>
<div id="SQPUG571" class="sect2">
<h3 class="sect2">Disabling SET ROLE</h3>
<p>From SQL*Plus, users can submit any SQL command. In certain situations, this can cause security problems. Unless you take proper precautions, a user could use SET ROLE to access privileges obtained through an application role. With these privileges, they might issue SQL statements from SQL*Plus that could wrongly change database tables.</p>
<p>To prevent application users from accessing application roles in SQL*Plus, you can use the PUP table to disable the SET ROLE command. You also need to disable the BEGIN and SQL*Plus EXECUTE commands to prevent application users setting application roles through a PL/SQL block. This gives a SQL*Plus user only those privileges associated with the roles enabled when they started SQL*Plus. For more information about the creation and usage of user roles, see your <a class="olink SQLRF" href="../SQLRF/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a> and <a class="olink ADMIN" href="../ADMIN/toc.htm"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a>.</p>
</div>
<!-- class="sect2" -->
<div id="SQPUG572" class="sect2"><a id="sthref1033"></a>
<h3 class="sect2">Disabling User Roles</h3>
<p>To <a id="sthref1034"></a>disable a role for a given user, insert a row in the PUP table containing the user&#39;s username in the Userid column, &#34;ROLES&#34; in the Attribute column, and the role name in the Char_Value column.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When you enter &#34;PUBLIC&#34; or &#34;%&#34; for the Userid column, you disable the role for all users. You should only use &#34;%&#34; or &#34;PUBLIC&#34; for roles which are granted to &#34;PUBLIC&#34;. If you try to disable a role that has not been granted to a user, none of the roles for that user are disabled.</div>
<p>The Scope, Numeric_Value, and Date_Value columns should contain NULL. For example:</p>
<pre>PRODUCT    USERID  ATTRIBUTE  SCOPE   NUMERIC     CHAR      DATE     LONG
                                      VALUE       VALUE     VALUE    VALUE
-------    ------  ---------  -----   --------    ------    -----    -----
SQL*Plus   HR      ROLES                          ROLE1
SQL*Plus   PUBLIC  ROLES                          ROLE2
</pre>
<p>During login, these table rows are translated into the command</p>
<pre>SET ROLE ALL EXCEPT ROLE1, ROLE2
</pre>
<p>To ensure that the user does not use the SET ROLE command to change their roles after login, you can disable the SET ROLE command.</p>
<p>To <a id="sthref1035"></a>re-enable roles, delete the row containing the restriction.</p>
<p>See <a href="#i1059154">Disabling SET ROLE</a> for more information.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1059216"></a>
<div id="SQPUG573" class="sect1">
<h2 class="sect1">Disabling Commands with SQLPLUS -RESTRICT<a id="sthref1036"></a><a id="sthref1037"></a><a id="sthref1038"></a></h2>
<p>Like the Product User Profile table, the RESTRICT option enables you to disable certain commands that interact with the operating system. However, commands disabled with the -RESTRICT option are disabled even when no connection to a server exists, and remain disabled until SQL*Plus terminates.</p>
<p>The following table shows which commands are disabled in each restriction level.</p>
<div class="inftblinformal">
<table class="cellalignment1443" title="SQL*Plus -Restrict Restriction Levels" summary="4 column table showing the commands that are restricted at each of the 3 restriction levels. The column headings are, Command, Level 1, Level 2, and Level 3." dir="ltr">
<thead>
<tr class="cellalignment1437">
<th class="cellalignment1448" id="r1c1-t10">Command</th>
<th class="cellalignment1448" id="r1c2-t10">Level 1</th>
<th class="cellalignment1448" id="r1c3-t10">Level 2</th>
<th class="cellalignment1448" id="r1c4-t10">Level 3</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r2c1-t10" headers="r1c1-t10">EDIT</td>
<td class="cellalignment1444" headers="r2c1-t10 r1c2-t10">disabled</td>
<td class="cellalignment1444" headers="r2c1-t10 r1c3-t10">disabled</td>
<td class="cellalignment1444" headers="r2c1-t10 r1c4-t10">disabled</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r3c1-t10" headers="r1c1-t10">GET</td>
<td class="cellalignment1444" headers="r3c1-t10 r1c2-t10">&nbsp;</td>
<td class="cellalignment1444" headers="r3c1-t10 r1c3-t10">&nbsp;</td>
<td class="cellalignment1444" headers="r3c1-t10 r1c4-t10">disabled</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r4c1-t10" headers="r1c1-t10">HOST</td>
<td class="cellalignment1444" headers="r4c1-t10 r1c2-t10">disabled</td>
<td class="cellalignment1444" headers="r4c1-t10 r1c3-t10">disabled</td>
<td class="cellalignment1444" headers="r4c1-t10 r1c4-t10">disabled</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r5c1-t10" headers="r1c1-t10">SAVE</td>
<td class="cellalignment1444" headers="r5c1-t10 r1c2-t10">&nbsp;</td>
<td class="cellalignment1444" headers="r5c1-t10 r1c3-t10">disabled</td>
<td class="cellalignment1444" headers="r5c1-t10 r1c4-t10">disabled</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r6c1-t10" headers="r1c1-t10">SPOOL</td>
<td class="cellalignment1444" headers="r6c1-t10 r1c2-t10">&nbsp;</td>
<td class="cellalignment1444" headers="r6c1-t10 r1c3-t10">disabled</td>
<td class="cellalignment1444" headers="r6c1-t10 r1c4-t10">disabled</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r7c1-t10" headers="r1c1-t10">START</td>
<td class="cellalignment1444" headers="r7c1-t10 r1c2-t10">&nbsp;</td>
<td class="cellalignment1444" headers="r7c1-t10 r1c3-t10">&nbsp;</td>
<td class="cellalignment1444" headers="r7c1-t10 r1c4-t10">disabled</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r8c1-t10" headers="r1c1-t10">STORE</td>
<td class="cellalignment1444" headers="r8c1-t10 r1c2-t10">&nbsp;</td>
<td class="cellalignment1444" headers="r8c1-t10 r1c3-t10">disabled</td>
<td class="cellalignment1444" headers="r8c1-t10 r1c4-t10">disabled</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>Disabling HOST also disables your operating system&#39;s alias for HOST, such as $ on Windows, and ! on UNIX.</p>
</li>
<li>
<p>Disabling the SQL*Plus START command will also disable the SQL*Plus @ and @@ commands.</p>
</li>
</ul>
</div>
<p>For more information about the RESTRICT option, see the SQLPLUS <a href="ch_three.htm#i1169742">RESTRICT Option</a>.</p>
</div>
<!-- class="sect1" -->
<a id="BCEBCHFH"></a>
<div id="SQPUG574" class="sect1">
<h2 class="sect1">Program Argument Security</h2>
<p>Some operating systems allow any user to see what programs are being run. If the display also shows command-line arguments, it may be possible to view the usernames and passwords of other SQL*Plus users.</p>
<p>For example, on many UNIX or Linux systems the ps command shows program arguments. To stop passwords being displayed depends on how you use SQL*Plus.</p>
<ul>
<li>
<p>To run SQL*Plus interactively, always wait for SQL*Plus to prompt for connection information, particularly your password.</p>
</li>
<li>
<p>To run a batch SQL script from a UNIX shell script, set environment variables MYUSERNAME and MYPASSWORD to the appropriate values. Run a shell script containing:</p>
<pre>sqlplus /nolog &lt;&lt;EOF
connect $MYUSERNAME/$MYPASSWORD
select ...
EOF
</pre></li>
<li>
<p>To run a batch SQL script, hard code the username and password as the first line of the SQL script. Then call the script with:</p>
<pre>sqlplus @myscript.sql
</pre></li>
</ul>
<p>When SQL*Plus is started like this, it uses the first line of the script as the username/password@connection_identifier string.</p>
<p>Avoid storing your username and password in files or scripts. If you do store your username and password in a file or script, ensure that the file or script is secured from non-authorized access.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1436">
<tr>
<td class="cellalignment1444">
<table class="cellalignment1441">
<tr>
<td class="cellalignment1440"><a href="ch_eight.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1440"><a href="ch_ten.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1446">
<table class="cellalignment1439">
<tr>
<td class="cellalignment1440"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1440"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1440"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1440"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1440"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1440"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>