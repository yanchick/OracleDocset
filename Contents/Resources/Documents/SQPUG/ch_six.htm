<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-103741"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Formatting%20SQL%2APlus%20Reports"></a><title>Formatting SQL*Plus Reports</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737"/>
<meta name="dcterms.created" content="2013-07-17T10:55:16Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="SQL*Plus&reg; User&#39;s Guide and Reference"/>
<meta name="dcterms.identifier" content="E18404-12"/>
<meta name="dcterms.isVersionOf" content="SQPUG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="ch_five.htm" title="Previous" type="text/html"/>
<link rel="Next" href="ch_seven.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E18404-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">15/82</span> <!-- End Header -->
<div id="SQPUG016" class="chapter"><a id="CHDBEAAB"></a><a id="i1081008"></a>
<h1 class="chapter"><span class="secnum">6</span> Formatting SQL*Plus Reports</h1>
<p>This chapter explains how to format your query results to produce a finished report. This chapter does not discuss HTML output, but covers the following topics:</p>
<ul>
<li>
<p><a href="#i1081036">Formatting Columns</a></p>
</li>
<li>
<p><a href="#i1081534">Clarifying Your Report with Spacing and Summary Lines</a></p>
</li>
<li>
<p><a href="#i1082069">Defining Page and Report Titles and Dimensions</a></p>
</li>
<li>
<p><a href="#i1082570">Storing and Printing Query Results</a></p>
</li>
</ul>
<p>Read this chapter while sitting at your computer and try out the examples shown. Before beginning, make sure you have access to the HR <a id="sthref543"></a><a id="sthref544"></a>sample schema described in <a href="qstart.htm#BABGEHJF">SQL*Plus Quick Start</a>.</p>
<a id="i1081036"></a>
<div id="SQPUG462" class="sect1">
<h2 class="sect1">Formatting Columns</h2>
<p>Through the SQL*Plus COLUMN<a id="sthref545"></a> command, you can change the column headings and reformat the column<a id="sthref546"></a> data in your query results.</p>
<div id="SQPUG463" class="sect2"><a id="sthref547"></a>
<h3 class="sect2">Changing Column Headings</h3>
<p>When displaying column headings, you can either use the default heading or you can change it using the COLUMN command. The following sections describe how default headings are derived and how to alter them using the COLUMN command. See the <a href="ch_twelve013.htm#BACHCABF">COLUMN</a> command for more details.</p>
<div id="SQPUG464" class="sect3"><a id="sthref548"></a>
<h4 class="sect3">Default Headings</h4>
<p>SQL*Plus uses column or expression names as default column headings<a id="sthref549"></a> when displaying query results. Column names are often short and cryptic, however, and expressions can be hard to understand.</p>
</div>
<!-- class="sect3" -->
<div id="SQPUG465" class="sect3"><a id="sthref550"></a>
<h4 class="sect3">Changing Default Headings</h4>
<p>You<a id="sthref551"></a> can define a more useful column heading with the HEADING<a id="sthref552"></a> clause of the COLUMN<a id="sthref553"></a> command, in the following format:</p>
<pre>COLUMN column_name HEADING column_heading
</pre>
<div id="SQPUG466" class="example">
<p class="titleinexample"><a id="sthref554"></a>Example 6-1 Changing a Column Heading</p>
<p>To produce a report from EMP_DETAILS_VIEW with new headings specified for LAST_NAME, SALARY, and COMMISSION_PCT, enter the following commands:</p>
<pre>COLUMN LAST_NAME        HEADING &#39;LAST NAME&#39;
COLUMN SALARY           HEADING &#39;MONTHLY SALARY&#39;
COLUMN COMMISSION_PCT   HEADING COMMISSION
SELECT LAST_NAME, SALARY, COMMISSION_PCT
FROM EMP_DETAILS_VIEW
WHERE JOB_ID=&#39;SA_MAN&#39;;
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-1" summary="Shows output from example 6-1, COLUMN and SELECT statements." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t2">
<pre>LAST NAME                 MONTHLY SALARY COMMISSION
------------------------- -------------- ----------
Russell                            14000         .4
Partners                           13500         .3
Errazuriz                          12000         .3
Cambrault                          11000         .3
Zlotkey                            10500         .2
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
The new headings will remain in effect until you enter different headings, reset each column&#39;s format, or exit from SQL*Plus.</div>
<p>To change a column heading<a id="sthref555"></a> to two or more words, enclose the new heading in single or double quotation marks when you enter the COLUMN command. To display a column heading<a id="sthref556"></a> on more than one line, use a vertical bar (|) where you want to begin a new line. (You can use a character other than a vertical bar by changing the setting of the HEADSEP<a id="sthref557"></a> variable of the SET<a id="sthref558"></a> command. See the <a href="ch_twelve039.htm#i2698538">SET</a> command for more information.)</p>
<div id="SQPUG467" class="example">
<p class="titleinexample"><a id="sthref559"></a>Example 6-2 Splitting a Column Heading</p>
<p>To give the columns SALARY and LAST_NAME the headings MONTHLY SALARY and LAST NAME respectively, and to split the new headings onto two lines, enter</p>
<pre>COLUMN SALARY HEADING &#39;MONTHLY|SALARY&#39;
COLUMN LAST_NAME HEADING &#39;LAST|NAME&#39;
</pre>
<p>Now rerun the query with the slash (/) command:</p>
<pre> /
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-2" summary="Shows output from example 6-2, with new COLUMN headings." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t4">
<pre>LAST                         MONTHLY
NAME                          SALARY COMMISSION
------------------------- ---------- ----------
Russell                        14000         .4
Partners                       13500         .3
Errazuriz                      12000         .3
Cambrault                      11000         .3
Zlotkey                        10500         .2
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<div id="SQPUG468" class="example">
<p class="titleinexample"><a id="sthref560"></a>Example 6-3 Setting the Underline Character</p>
<p>To change the character used to underline headings to an equal sign and rerun the query, enter the following commands:</p>
<pre>SET UNDERLINE =
/
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-3" summary="Shows output from example 6-3, with new underline setting." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t5">
<pre>LAST                         MONTHLY
NAME                          SALARY COMMISSION
========================= ========== ==========
Russell                        14000         .4
Partners                       13500         .3
Errazuriz                      12000         .3
Cambrault                      11000         .3
Zlotkey                        10500         .2
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>Now change the underline character back to a dash:</p>
<pre>SET UNDERLINE &#39;-&#39;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must enclose the dash in quotation marks; otherwise, SQL*Plus interprets the dash as a hyphen indicating that you wish to continue the command on another line.</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="SQPUG469" class="sect2"><a id="sthref561"></a>
<h3 class="sect2">Formatting NUMBER Columns</h3>
<p>When displaying NUMBER columns, you can either accept the SQL*Plus default display width or you can change it using the COLUMN command. Later sections describe the default display and how you can alter it with the COLUMN command. The format model will stay in effect until you enter a new one, reset the column&#39;s format with</p>
<pre>COLUMN <span class="italic">column_name</span> CLEAR
</pre>
<p>or exit from SQL*Plus.</p>
<div id="SQPUG470" class="sect3"><a id="sthref562"></a>
<h4 class="sect3">Default Display</h4>
<p>A NUMBER <a id="sthref563"></a>column&#39;s width equals the width of the heading or the width of the FORMAT plus one space for the sign<a id="sthref564"></a>, whichever is greater. If you do not explicitly use FORMAT, then the column&#39;s width will always be at least the value of SET NUMWIDTH<a id="sthref565"></a><a id="sthref566"></a><a id="sthref567"></a>.</p>
<p>SQL*Plus normally displays numbers with as many digits as are required for accuracy, up to a standard display width determined by the value of the NUMWIDTH variable of the SET command (normally 10). If a number is larger than the value of SET NUMWIDTH, SQL*Plus rounds the number up or down to the maximum number of characters allowed if possible, or displays hashes if the number is too large.</p>
<p>You can choose a different format for any NUMBER<a id="sthref568"></a> column<a id="sthref569"></a> by using a format model in a COLUMN<a id="sthref570"></a> command. A format model is a representation of the way you want the numbers in the column to appear, using 9s to represent digits.</p>
</div>
<!-- class="sect3" -->
<div id="SQPUG471" class="sect3"><a id="sthref571"></a>
<h4 class="sect3">Changing the Default Display</h4>
<p>The COLUMN command identifies the column you want to format and the model you want to use, as shown:</p>
<pre>COLUMN<a id="sthref572"></a> <span class="italic">column_name</span> FORMAT<a id="sthref573"></a> <span class="italic">model</span>
</pre>
<p>Use format models<a id="sthref574"></a> to add commas, dollar signs, angle brackets (around negative values), and leading zeros to numbers in a given column. You can also round the values to a given number of decimal places, display minus signs to the right of negative values (instead of to the left), and display values in exponential notation.</p>
<p>To use more than one format model for a single column, combine the desired models in one COLUMN command (see <a href="#i1081201">Example 6-4</a>). See <a href="ch_twelve013.htm#BACHCABF">COLUMN</a> for a complete list of format models and further details.</p>
<div id="SQPUG472" class="example">
<p class="titleinexample"><a id="i1081201"></a>Example 6-4 Formatting a NUMBER Column</p>
<p>To display SALARY with a dollar<a id="sthref575"></a> sign<a id="sthref576"></a>, a<a id="sthref577"></a> comma<a id="sthref578"></a>, and the numeral<a id="sthref579"></a> zero<a id="sthref580"></a> instead of a blank for any zero values, enter the following<a id="sthref581"></a> command:<a id="sthref582"></a></p>
<pre>COLUMN SALARY FORMAT $99,990
</pre>
<p>Now rerun the current query:</p>
<pre>/
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-4" summary="Shows output from example 6-4, with formating of a number colum." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t7">
<pre>LAST                       MONTHLY
NAME                        SALARY COMMISSION
------------------------- -------- ----------
Russell                    $14,000         .4
Partners                   $13,500         .3
Errazuriz                  $12,000         .3
Cambrault                  $11,000         .3
Zlotkey                    $10,500         .2
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>Use a zero in your format model, as shown, when you use other formats such as a dollar sign and wish to display a zero in place of a blank for zero values.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1081228"></a>
<div id="SQPUG473" class="sect2">
<h3 class="sect2">Formatting Datatypes</h3>
<p>When displaying datatypes, you can either accept the SQL*Plus default display width or you can change it using the COLUMN command. The format model will stay in effect until you enter a new one, reset the column&#39;s format with</p>
<pre>COLUMN <span class="italic">column_name</span> CLEAR
</pre>
<p>or exit from SQL*Plus. Datatypes, in this manual, include the following types:</p>
<ul>
<li>
<p>CHAR</p>
</li>
<li>
<p>NCHAR</p>
</li>
<li>
<p>VARCHAR2 (VARCHAR)</p>
</li>
<li>
<p>NVARCHAR2 (NCHAR VARYING)</p>
</li>
<li>
<p>DATE</p>
</li>
<li>
<p>LONG</p>
</li>
<li>
<p>BLOB</p>
<p>BFILE<a id="sthref583"></a></p>
</li>
<li>
<p>CLOB</p>
</li>
<li>
<p>NCLOB</p>
</li>
<li>
<p>XMLType<a id="sthref584"></a></p>
</li>
</ul>
<div id="SQPUG474" class="sect3"><a id="sthref585"></a>
<h4 class="sect3">Default Display</h4>
<p>The default width of <a id="sthref586"></a><a id="sthref587"></a><a id="sthref588"></a><a id="sthref589"></a><a id="sthref590"></a><a id="sthref591"></a><a id="sthref592"></a>datatype columns is the width of the column in the database. The column width of a LONG, BLOB, BFILE, CLOB, NCLOB or XMLType<a id="sthref593"></a><a id="sthref594"></a> defaults to the value of SET <a id="sthref595"></a>LONGCHUNKSIZE or SET LONG, whichever is the smaller.</p>
<p>The default width and format of unformatted DATE columns in SQL*Plus<a id="sthref596"></a> is determined by the database NLS_DATE_FORMAT parameter. Otherwise, the default format width is A9. See the FORMAT clause of the <a href="ch_twelve013.htm#BACHCABF">COLUMN</a> command for more information on formatting DATE columns.</p>
<p>Left justification is the default for datatypes.</p>
</div>
<!-- class="sect3" -->
<div id="SQPUG475" class="sect3"><a id="sthref597"></a>
<h4 class="sect3">Changing the Default Display</h4>
<p>You can change the displayed width of a datatype or DATE, by using the COLUMN command with a format model consisting of the letter A (for alphanumeric) followed by a number representing the width of the column in characters.</p>
<p>Within the COLUMN command, identify the column you want to format and the model you want to use:</p>
<pre>COLUMN<a id="sthref598"></a> <span class="italic">column_name</span> FORMAT<a id="sthref599"></a> <span class="italic">model</span>
</pre>
<p>If you specify a width shorter than the column<a id="sthref600"></a> heading<a id="sthref601"></a>, SQL*Plus truncates the heading. See the <a href="ch_twelve013.htm#BACHCABF">COLUMN</a> command for more details.</p>
<div id="SQPUG476" class="example">
<p class="titleinexample"><a id="i1081303"></a>Example 6-5 Formatting a Character Column</p>
<p>To set the width of the column LAST_NAME to four characters and rerun the current query, enter</p>
<pre>COLUMN LAST_NAME FORMAT A4
/
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-5" summary="Shows output from example 6-5 with formating of a text COLUMN" dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t8">
<pre>LAST  MONTHLY
NAME   SALARY COMMISSION
---- -------- ----------
Russ  $14,000         .4
ell

Part  $13,500         .3
ners

Erra  $12,000         .3
zuri
z


LAST  MONTHLY
NAME   SALARY COMMISSION
---- -------- ----------
Camb  $11,000         .3
raul
t

Zlot  $10,500         .2
key
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>If the WRAP<a id="sthref602"></a> variable of the SET<a id="sthref603"></a> command is set to ON (its default value), the employee names<a id="sthref604"></a> wrap to the next line after the fourth character, as shown in <a href="#i1081303">Example 6-5, &#34;Formatting a Character Column&#34;</a>. If WRAP is set to OFF, the names<a id="sthref605"></a> are truncated (cut off) after the fourth character.</p>
<p>The system variable WRAP controls all columns; you can override the setting of WRAP for a given column through the<a id="sthref606"></a> WRAPPED<a id="sthref607"></a>, WORD_WRAPPED<a id="sthref608"></a>, and<a id="sthref609"></a> TRUNCATED<a id="sthref610"></a> clauses of the<a id="sthref611"></a> COLUMN<a id="sthref612"></a><a id="sthref613"></a> command. See the <a href="ch_twelve013.htm#BACHCABF">COLUMN</a> command for more information on these clauses. You will use the WORD_WRAPPED clause of COLUMN later in this chapter.</p>
<p>NCLOB, BLOB, BFILE or multibyte CLOB columns cannot be formatted with the WORD_WRAPPED option. If you format an NCLOB, BLOB, BFILE or multibyte CLOB column with COLUMN WORD_WRAPPED, the column data behaves as though COLUMN WRAPPED was applied instead.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The column heading is truncated regardless of the setting of WRAP or any COLUMN command clauses.</div>
<p>Now return the column to its previous format:</p>
<pre>COLUMN LAST_NAME FORMAT A10
</pre>
<div id="SQPUG477" class="example">
<p class="titleinexample"><a id="sthref614"></a>Example 6-6 Formatting an XMLType Column</p>
<p><a id="sthref615"></a><a id="sthref616"></a><a id="sthref617"></a><a id="sthref618"></a>Before illustrating how to format an XMLType column, you must create a table with an XMLType column definition, and insert some data into the table. You can create an XMLType column like any other user-defined column. To create a table containing an XMLType column, enter</p>
<pre>CREATE TABLE warehouses (
  warehouse_id  NUMBER(3),
  warehouse_spec  SYS.XMLTYPE,
  warehouse_name  VARCHAR2 (35),
  location_id  NUMBER(4));
</pre>
<p>To insert a new record containing warehouse_id and warehouse_spec values into the new warehouses table, enter</p>
<pre>INSERT into warehouses (warehouse_id, warehouse_spec)
  VALUES (100, sys.XMLTYPE.createXML(
  &#39;&lt;Warehouse whNo=&#34;100&#34;&gt;
    &lt;Building&gt;Owned&lt;/Building&gt;
  &lt;/Warehouse&gt;&#39;));
</pre>
<p>To set the XMLType column width to 20 characters and then select the XMLType column, enter</p>
<pre>COLUMN Building FORMAT A20
SELECT
  w.warehouse_spec.extract(&#39;/Warehouse/Building/text()&#39;).getStringVal()
  &#34;Building&#34;
  FROM warehouses w;
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-6" summary="Shows output from example 6-6 with formating of a column width." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t10">
<pre>Building
--------------------
Owned
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>For more information about the createXML, extract, text and getStringVal functions, and about creating and manipulating XMLType data, see <a class="olink ARPLS" href="../ARPLS/toc.htm"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="SQPUG478" class="sect2"><a id="sthref619"></a>
<h3 class="sect2">Copying Column Display Attributes</h3>
<p>When you want to give more than one column<a id="sthref620"></a> the same display attributes, you can reduce the length of the commands you must enter by using the LIKE<a id="sthref621"></a> clause of the COLUMN<a id="sthref622"></a> command. The LIKE clause tells SQL*Plus to copy the display attributes of a previously defined column to the new column, except for changes made by other clauses in the same command.</p>
<div id="SQPUG479" class="example">
<p class="titleinexample"><a id="sthref623"></a>Example 6-7 Copying a Column&#39;s Display Attributes</p>
<p>To give the column COMMISSION_PCT the same display attributes you gave to SALARY, but to specify a different heading, enter the following command:</p>
<pre>COLUMN COMMISSION_PCT LIKE SALARY HEADING BONUS
</pre>
<p>Rerun the query:</p>
<pre>/
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-7" summary="Shows output from example 6-7 with column formating using COLUMN LIKE." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t11">
<pre>LAST        MONTHLY
NAME         SALARY    BONUS
---------- -------- --------
Russell     $14,000       $0
Partners    $13,500       $0
Errazuriz   $12,000       $0
Cambrault   $11,000       $0
Zlotkey     $10,500       $0
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" --></div>
<!-- class="sect2" -->
<div id="SQPUG480" class="sect2"><a id="sthref624"></a>
<h3 class="sect2">Listing and Resetting Column Display Attributes</h3>
<p>To list the current display attributes for a given column<a id="sthref625"></a>, use the COLUMN<a id="sthref626"></a> command followed by the column name only, as shown:</p>
<pre>COLUMN <span class="italic">column_name</span>
</pre>
<p>To list the current display attributes for all columns<a id="sthref627"></a>, enter the COLUMN<a id="sthref628"></a> command with no column names or clauses after it:</p>
<pre>COLUMN
</pre>
<p>To reset the display attributes for a column<a id="sthref629"></a> to their default values, use the CLEAR<a id="sthref630"></a> clause of the <a id="sthref631"></a>COLUMN<a id="sthref632"></a> command as shown:</p>
<pre>COLUMN <span class="italic">column_name</span> CLEAR
</pre>
<div id="SQPUG481" class="example">
<p class="titleinexample"><a id="sthref633"></a>Example 6-8 Resetting Column Display Attributes to their Defaults</p>
<p>To reset all column display attributes to their default values, enter:</p>
<pre>CLEAR COLUMNS
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-8" summary="Shows output from example 6-8, CLEAR COLUMNS." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t12">
<pre>columns cleared
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" --></div>
<!-- class="sect2" -->
<div id="SQPUG482" class="sect2"><a id="sthref634"></a>
<h3 class="sect2">Suppressing and Restoring Column Display Attributes</h3>
<p>You can suppress and restore the display attributes you have given a specific column. To suppress a column&#39;s<a id="sthref635"></a> display attributes, enter a COLUMN<a id="sthref636"></a> command in the following form:</p>
<pre>COLUMN<a id="sthref637"></a> <span class="italic">column_name</span> OFF<a id="sthref638"></a>
</pre>
<p>OFF tells SQL*Plus to use the default display attributes for the column, but does not remove the attributes you have defined through the COLUMN command. To restore the attributes you defined through<a id="sthref639"></a> COLUMN<a id="sthref640"></a>, use the ON clause:</p>
<pre>COLUMN<a id="sthref641"></a> <span class="italic">column_name</span> ON<a id="sthref642"></a>
</pre></div>
<!-- class="sect2" -->
<div id="SQPUG483" class="sect2"><a id="sthref643"></a>
<h3 class="sect2">Printing a Line of Characters after Wrapped Column Values</h3>
<p>As you have seen, by default SQL*Plus wraps column values to additional lines when the value does not fit the column width. If you want to insert a record separator<a id="sthref644"></a> (a line of characters<a id="sthref645"></a> or a blank line) after each wrapped line of output (or after every row), use the RECSEP<a id="sthref646"></a> and RECSEPCHAR<a id="sthref647"></a> variables of the <a id="sthref648"></a>SET<a id="sthref649"></a> command.</p>
<p>RECSEP determines when the line of characters is printed; you set RECSEP to EACH to print after every line, to WRAPPED to print after wrapped lines, and to OFF to suppress printing. The default setting of RECSEP is WRAPPED.</p>
<p>RECSEPCHAR sets the character printed in each line. You can set RECSEPCHAR to any character.</p>
<p>You may wish to wrap whole words to additional lines when a column<a id="sthref650"></a> value wraps to additional lines. To do so, use the WORD_WRAPPED<a id="sthref651"></a> clause of the COLUMN<a id="sthref652"></a> command as shown:</p>
<pre>COLUMN <span class="italic">column_name</span> WORD_WRAPPED
</pre>
<div id="SQPUG484" class="example">
<p class="titleinexample"><a id="sthref653"></a>Example 6-9 Printing a Line of Characters after Wrapped Column Values</p>
<p>To print a line of dashes after each wrapped column value, enter the commands:</p>
<pre>SET RECSEP WRAPPED
SET RECSEPCHAR &#34;-&#34;
</pre>
<p>Finally, enter the following query:</p>
<pre>SELECT LAST_NAME, JOB_TITLE, CITY
FROM EMP_DETAILS_VIEW
WHERE SALARY&gt;12000;
</pre>
<p>Now restrict the width of the column JOB_TITLE and tell SQL*Plus to wrap whole words to additional lines when necessary:</p>
<pre>COLUMN JOB_TITLE FORMAT A20 WORD_WRAPPED
</pre>
<p>Run the query:</p>
<pre>/
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-9" summary="Shows output from example 6-9, using COLUMN and WORD_WRAPPED." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t13">
<pre>LAST_NAME                 JOB_TITLE            CITY
------------------------- -------------------- --------
King                      President            Seattle
Kochhar                   Administration Vice  Seattle
                          President
-------------------------------------------------------
De Haan                   Administration Vice  Seattle
                          President
-------------------------------------------------------
Russell                   Sales Manager        Oxford
Partners                  Sales Manager        Oxford
Hartstein                 Marketing Manager    Toronto

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>If you set RECSEP to EACH, SQL*Plus prints a line of characters after every row (after every department, for the above example).</p>
<p>Before continuing, set RECSEP to OFF to suppress the printing of record separators:</p>
<pre>SET RECSEP OFF
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1081534"></a>
<div id="SQPUG485" class="sect1">
<h2 class="sect1">Clarifying Your Report with Spacing and Summary Lines</h2>
<p>When you use an ORDER BY<a id="sthref654"></a> clause in your SQL<a id="sthref655"></a> <a id="sthref656"></a>SELECT<a id="sthref657"></a> command, rows with the same value in the ordered column (or expression) are displayed together in your output. You can make this output<a id="sthref658"></a> more useful to the user by using the SQL*Plus BREAK<a id="sthref659"></a> and COMPUTE commands to create subsets of records and add space or summary lines after each subset.</p>
<p>The column you specify in a BREAK<a id="sthref660"></a> command is called a break column.<a id="sthref661"></a> By including the break column in your ORDER BY clause, you create meaningful subsets of records in your output. You can then add formatting to the subsets within the same BREAK command, and add a summary line (containing totals, averages, and so on) by specifying the break column in a COMPUTE<a id="sthref662"></a> command.</p>
<pre>SELECT DEPARTMENT_ID, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE SALARY &gt; 12000
ORDER BY DEPARTMENT_ID;
</pre>
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from spacing and summary example" summary="Shows output from SELECT with ORDER BY." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t14">
<pre>DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           20 Hartstein                      13000
           80 Russell                        14000
           80 Partners                       13500
           90 King                           24000
           90 Kochhar                        17000
           90 De Haan                        17000

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>To make this report more useful, you would use BREAK to establish DEPARTMENT_ID as the break column. Through BREAK you could suppress duplicate values in DEPARTMENT_ID and place blank lines or begin a new page between departments. You could use BREAK in conjunction with COMPUTE to calculate and print summary lines containing the total salary for each department and for all departments. You could also print summary lines containing the average, maximum, minimum, standard deviation, variance, or row count.</p>
<div id="SQPUG486" class="sect2"><a id="sthref663"></a>
<h3 class="sect2">Suppressing Duplicate Values in Break Columns</h3>
<p>The BREAK<a id="sthref664"></a> command suppresses<a id="sthref665"></a> duplicate values by default in the column or expression you name. Thus, to suppress the duplicate values in a column specified in an ORDER BY clause, use the BREAK command in its simplest form:</p>
<pre>BREAK<a id="sthref666"></a> ON <span class="italic">break_column</span>
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Whenever you specify a column or expression in a BREAK<a id="sthref667"></a> command, use an ORDER BY clause specifying the same column or expression. If you do not do this, breaks occur every time the column value changes.</div>
<div id="SQPUG487" class="example">
<p class="titleinexample"><a id="sthref668"></a>Example 6-10 Suppressing Duplicate Values in a Break Column</p>
<p>To suppress the display of duplicate department numbers in the query results shown, enter the following commands:</p>
<pre>BREAK ON DEPARTMENT_ID;
</pre>
<p>For the following query (which is the current query stored in the buffer):</p>
<pre>SELECT DEPARTMENT_ID, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE SALARY &gt; 12000
ORDER BY DEPARTMENT_ID;
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-10" summary="Shows output from example 6-10, with ORDER BY and BREAK." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t16">
<pre>DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           20 Hartstein                      13000
           80 Russell                        14000
              Partners                       13500
           90 King                           24000
              Kochhar                        17000
              De Haan                        17000

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" --></div>
<!-- class="sect2" -->
<div id="SQPUG488" class="sect2"><a id="sthref669"></a>
<h3 class="sect2">Inserting Space when a Break Column&#39;s Value Changes</h3>
<p>You can insert blank lines or begin a new page each time the value changes in the break column<a id="sthref670"></a>. To insert <span class="italic">n</span> blank lines, use the BREAK<a id="sthref671"></a> command in the following form:</p>
<pre>BREAK<a id="sthref672"></a> ON <span class="italic">break_column</span> SKIP<a id="sthref673"></a> <span class="italic">n</span>
</pre>
<p>To skip a page, use the command in this form:</p>
<pre>BREAK<a id="sthref674"></a> ON <span class="italic">break_column</span> SKIP PAGE<a id="sthref675"></a>
</pre>
<div id="SQPUG489" class="example">
<p class="titleinexample"><a id="sthref676"></a>Example 6-11 Inserting Space when a Break Column&#39;s Value Changes</p>
<p>To place one blank line between departments, enter the following command:</p>
<pre>BREAK ON DEPARTMENT_ID SKIP 1
</pre>
<p>Now rerun the query:</p>
<pre>/
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-11" summary="Shows output from example 6-11, with BREAK and SKIP." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t17">
<pre>DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           20 Hartstein                      13000

           80 Russell                        14000
              Partners                       13500

           90 King                           24000
              Kochhar                        17000
              De Haan                        17000

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" --></div>
<!-- class="sect2" -->
<div id="SQPUG490" class="sect2"><a id="sthref677"></a>
<h3 class="sect2">Inserting Space after Every Row</h3>
<p>You may wish to insert blank lines or a blank page after every row. To skip n lines after every row, use BREAK<a id="sthref678"></a> in the following form:</p>
<pre>BREAK<a id="sthref679"></a><a id="sthref680"></a> ON ROW<a id="sthref681"></a> SKIP<a id="sthref682"></a> <span class="italic">n</span>
</pre>
<p>To skip a page after every row, use</p>
<pre>BREAK<a id="sthref683"></a> ON ROW SKIP PAGE<a id="sthref684"></a>
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
SKIP PAGE does not cause a physical page break character to be generated unless you have also specified NEWPAGE 0.</div>
</div>
<!-- class="sect2" -->
<div id="SQPUG491" class="sect2"><a id="sthref685"></a>
<h3 class="sect2">Using Multiple Spacing Techniques</h3>
<p>Suppose<a id="sthref686"></a> you have more than one column in your ORDER BY clause and wish to insert space when each column&#39;s value changes. Each BREAK<a id="sthref687"></a> command you enter replaces the previous one. Thus, if you want to use different spacing techniques in one report or insert space after the value changes in more than one ordered column, you must specify multiple columns and actions in a single BREAK<a id="sthref688"></a> command.</p>
<div id="SQPUG492" class="example">
<p class="titleinexample"><a id="sthref689"></a>Example 6-12 Combining Spacing Techniques</p>
<p>Type the following:</p>
<pre>SELECT DEPARTMENT_ID, JOB_ID, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE SALARY&gt;12000
ORDER BY DEPARTMENT_ID, JOB_ID;
</pre>
<p>Now, to skip a page when the value of DEPARTMENT_ID changes and one line when the value of JOB_ID changes, enter the following command:</p>
<pre>BREAK ON DEPARTMENT_ID SKIP PAGE ON JOB_ID SKIP 1
</pre>
<p>To show that SKIP PAGE has taken effect, create a TTITLE with a <a id="sthref690"></a>page number:</p>
<pre>TTITLE COL 35 FORMAT 9 &#39;Page:&#39; SQL.PNO
</pre>
<p>Run the new query to see the results:</p>
</div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-12" summary="Shows output from example 6-12, with BREAK, SKIP and TTITLE." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t19">
<pre>                                  Page: 1
DEPARTMENT_ID JOB_ID     LAST_NAME                     SALARY
------------- ---------- ------------------------- ----------
           20 MK_MAN     Hartstein                      13000

                                  Page: 2
DEPARTMENT_ID JOB_ID     LAST_NAME                     SALARY
------------- ---------- ------------------------- ----------
           80 SA_MAN     Russell                        14000
                         Partners                       13500

                                  Page: 3
DEPARTMENT_ID JOB_ID     LAST_NAME                     SALARY
------------- ---------- ------------------------- ----------
           90 AD_PRES    King                           24000

              AD_VP      Kochhar                        17000
                         De Haan                        17000

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" --></div>
<!-- class="sect2" -->
<div id="SQPUG493" class="sect2"><a id="sthref691"></a>
<h3 class="sect2">Listing and Removing Break Definitions</h3>
<p>Before continuing, turn off the top title display without changing its definition:</p>
<pre>TTITLE OFF
</pre>
<p>You can list your current break definition<a id="sthref692"></a> by entering the BREAK<a id="sthref693"></a> command with no clauses:</p>
<pre>BREAK
</pre>
<p>You can remove<a id="sthref694"></a> the current break definition by entering the CLEAR<a id="sthref695"></a> command with the BREAKS<a id="sthref696"></a> clause:</p>
<pre>CLEAR BREAKS
</pre>
<p>You may wish to place the command <a id="sthref697"></a>CLEAR BREAKS at the beginning of every script to ensure that previously entered BREAK commands will not affect queries you run in a given file.</p>
</div>
<!-- class="sect2" -->
<div id="SQPUG494" class="sect2"><a id="sthref698"></a>
<h3 class="sect2">Computing Summary Lines when a Break Column&#39;s Value Changes</h3>
<p>If you<a id="sthref699"></a> organize the rows of a report into subsets with the BREAK<a id="sthref700"></a> command, you can perform various computations on the rows<a id="sthref701"></a> in each subset. You do this with the functions of the SQL*Plus COMPUTE<a id="sthref702"></a> command. Use the BREAK and COMPUTE<a id="sthref703"></a> commands together in the following forms:</p>
<pre>BREAK ON <span class="italic">break_column</span>
COMPUTE<a id="sthref704"></a> function LABEL <span class="italic">label_name</span> OF<a id="sthref705"></a> <span class="italic">column</span> <span class="italic">column</span> <span class="italic">column</span><a id="sthref706"></a>
... ON<a id="sthref707"></a> <span class="italic">break_column</span>
</pre>
<p>You can include multiple break columns and actions, such as skipping lines in the BREAK command, as long as the column you name after ON in the COMPUTE command also appears after ON in the BREAK command. To include multiple break columns and actions in BREAK when using it in conjunction with COMPUTE, use these commands in the following forms:</p>
<pre>BREAK ON <span class="italic">break_column_1</span> SKIP PAGE ON <span class="italic">break_column_2</span> SKIP 1
COMPUTE function LABEL <span class="italic">label_name</span> OF <span class="italic">column</span> <span class="italic">column</span> <span class="italic">column</span>
... ON <span class="italic">break_column_2</span>
</pre>
<p>The COMPUTE command has no effect without a corresponding BREAK command.</p>
<p>You can COMPUTE on NUMBER columns and, in certain cases, on all types of columns. For more information see the <a href="ch_twelve014.htm#BACEDBGF">COMPUTE</a> command.</p>
<p>The following table lists compute functions and their effects</p>
<div id="SQPUG495" class="tblformal">
<p class="titleintable"><a id="sthref708"></a><a id="sthref709"></a>Table 6-1 Compute Functions</p>
<table class="cellalignment1447" title="Compute Functions" summary="Shows the COMPUTE functions and descriptions." dir="ltr">
<thead>
<tr class="cellalignment1437">
<th class="cellalignment1448" id="r1c1-t20">Function...</th>
<th class="cellalignment1448" id="r1c2-t20">Computes the...</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r2c1-t20" headers="r1c1-t20">
<pre>SUM
</pre></td>
<td class="cellalignment1444" headers="r2c1-t20 r1c2-t20">
<p><a id="sthref710"></a>Sum of the values in the column.</p>
</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r3c1-t20" headers="r1c1-t20">
<pre>MINIMUM
</pre></td>
<td class="cellalignment1444" headers="r3c1-t20 r1c2-t20">
<p>Minimum value in the column.</p>
</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r4c1-t20" headers="r1c1-t20">
<pre>MAXIMUM
</pre></td>
<td class="cellalignment1444" headers="r4c1-t20 r1c2-t20">
<p>Maximum value in the column.</p>
</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r5c1-t20" headers="r1c1-t20">
<pre>AVG
</pre></td>
<td class="cellalignment1444" headers="r5c1-t20 r1c2-t20">
<p>Average of the values in the column.</p>
</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r6c1-t20" headers="r1c1-t20">
<pre>STD
</pre></td>
<td class="cellalignment1444" headers="r6c1-t20 r1c2-t20">
<p>Standard deviation of the values in the column.</p>
</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r7c1-t20" headers="r1c1-t20">
<pre>VARIANCE
</pre></td>
<td class="cellalignment1444" headers="r7c1-t20 r1c2-t20">
<p>Variance of the values in the column.</p>
</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r8c1-t20" headers="r1c1-t20">
<pre>COUNT
</pre></td>
<td class="cellalignment1444" headers="r8c1-t20 r1c2-t20">
<p>Number of non-null values in the column.</p>
</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r9c1-t20" headers="r1c1-t20">
<pre>NUMBER
</pre></td>
<td class="cellalignment1444" headers="r9c1-t20 r1c2-t20">
<p>Number of rows in the column.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p>The function you specify in the COMPUTE command applies to all columns you enter after OF and before ON. The computed values print on a separate line when the value of the ordered column changes.</p>
<p>Labels for ON REPORT and ON ROW computations appear in the first column; otherwise, they appear in the column specified in the ON clause.</p>
<p>You can change the compute label by using <a id="sthref711"></a>COMPUTE LABEL. If you do not <a id="sthref712"></a>define a label for the computed value, SQL*Plus prints the unabbreviated function keyword.</p>
<p>The compute label can be suppressed by using the <a id="sthref713"></a>NOPRINT option of the COLUMN command on the break column. See the <a href="ch_twelve014.htm#BACEDBGF">COMPUTE</a> command for more details. If you use the NOPRINT option for the column on which the COMPUTE is being performed, the COMPUTE result is also suppressed.</p>
<div id="SQPUG496" class="example">
<p class="titleinexample"><a id="sthref714"></a>Example 6-13 Computing and Printing Subtotals</p>
<p>To compute the total of SALARY by department, first list the current BREAK definition:</p>
<pre>BREAK
</pre>
<p>which displays current BREAK definitions:</p>
</div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-13" summary="Shows output from example 6-13, current BREAK settings." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t21">
<pre>break on DEPARTMENT_ID page  nodup
          on JOB_ID skip 1 nodup
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>Now enter the following COMPUTE command and run the current query:</p>
<pre>COMPUTE SUM OF SALARY ON DEPARTMENT_ID
/
</pre>
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-13" summary="Shows output from example 6-13, with BREAK and COMPUTE." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t22">
<pre>DEPARTMENT_ID JOB_ID     LAST_NAME                     SALARY
------------- ---------- ------------------------- ----------
           20 MK_MAN     Hartstein                      13000
************* **********                           ----------
sum                                                     13000

DEPARTMENT_ID JOB_ID     LAST_NAME                     SALARY
------------- ---------- ------------------------- ----------
           80 SA_MAN     Russell                        14000
                         Partners                       13500

************* **********                           ----------
sum                                                     27500

DEPARTMENT_ID JOB_ID     LAST_NAME                     SALARY
------------- ---------- ------------------------- ----------
           90 AD_PRES    King                           24000

              AD_VP      Kochhar                        17000
                         De Haan                        17000

************* **********                           ----------
sum                                                     58000

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>To compute the sum of salaries for departments 10 and 20 without printing the compute label:</p>
<pre>COLUMN DUMMY NOPRINT;
COMPUTE SUM OF SALARY ON DUMMY;
BREAK ON DUMMY SKIP 1;
SELECT DEPARTMENT_ID DUMMY,DEPARTMENT_ID, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE SALARY&gt;12000
ORDER BY DEPARTMENT_ID;
</pre>
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-13" summary="Shows output from example 6-13, COMPUTE SUM." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t23">
<pre>DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           20 Hartstein                      13000
                                        ----------
                                             13000

           80 Russell                        14000
           80 Partners                       13500
                                        ----------
                                             27500

           90 King                           24000
           90 Kochhar                        17000
           90 De Haan                        17000
                                        ----------
                                             58000

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>To compute the salaries just at the end of the report:</p>
<pre>COLUMN DUMMY NOPRINT;
COMPUTE SUM OF SALARY ON DUMMY;
BREAK ON DUMMY;
SELECT NULL DUMMY,DEPARTMENT_ID, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE SALARY&gt;12000
ORDER BY DEPARTMENT_ID;
</pre>
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-13" summary="Shows output from example 6-13, BREAK, COMPUTE SUM." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t24">
<pre>DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           20 Hartstein                      13000
           80 Russell                        14000
           80 Partners                       13500
           90 King                           24000
           90 Kochhar                        17000
           90 De Haan                        17000
                                        ----------
                                             98500

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>When you establish the format of a NUMBER column, you must allow for the size of the sums included in the report.</p>
</div>
<!-- class="sect2" -->
<div id="SQPUG497" class="sect2"><a id="sthref715"></a>
<h3 class="sect2">Computing Summary Lines at the End of the Report</h3>
<p>You can calculate and print summary lines<a id="sthref716"></a> based on all values in a column by using BREAK<a id="sthref717"></a> and COMPUTE<a id="sthref718"></a> in the following forms:</p>
<pre>BREAK<a id="sthref719"></a> ON REPORT<a id="sthref720"></a>
COMPUTE<a id="sthref721"></a> function LABEL <span class="italic">label_name</span> OF <span class="italic">column</span> <span class="italic">column</span> <span class="italic">column</span>
... ON REPORT<a id="sthref722"></a>
</pre>
<div id="SQPUG498" class="example">
<p class="titleinexample"><a id="i1081949"></a>Example 6-14 Computing and Printing a Grand Total</p>
<p>To calculate and print the grand total of salaries for all sales people and change the compute label, first enter the following BREAK and <a id="sthref723"></a>COMPUTE commands:</p>
<pre>BREAK ON REPORT
COMPUTE SUM LABEL TOTAL OF SALARY ON REPORT
</pre>
<p>Next, enter and run a new query:</p>
<pre>SELECT LAST_NAME, SALARY 
FROM EMP_DETAILS_VIEW
WHERE JOB_ID=&#39;SA_MAN&#39;;
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-14" summary="Shows output from example 6-14, COMPUTE GRAND TOTAL." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t25">
<pre>LAST_NAME                     SALARY
------------------------- ----------
Russell                        14000
Partners                       13500
Errazuriz                      12000
Cambrault                      11000
Zlotkey                        10500
                          ----------
TOTAL                          61000
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>To print<a id="sthref724"></a> a grand total (or grand average, grand maximum, and so on) in addition to subtotals (or sub-averages, and so on), include a break column and an ON REPORT clause in your BREAK<a id="sthref725"></a> command. Then, enter one COMPUTE<a id="sthref726"></a> command for the break column and another to compute ON REPORT:</p>
<pre>BREAK ON break_column ON REPORT
COMPUTE function LABEL label_name OF column ON break_column
COMPUTE function LABEL label_name OF column ON REPORT
</pre></div>
<!-- class="sect2" -->
<div id="SQPUG499" class="sect2"><a id="sthref727"></a>
<h3 class="sect2">Computing Multiple Summary Values and Lines</h3>
<p>You can compute and print the same type of summary<a id="sthref728"></a> value on different columns. To do so, enter a separate COMPUTE<a id="sthref729"></a> command for each column.</p>
<div id="SQPUG500" class="example">
<p class="titleinexample"><a id="sthref730"></a>Example 6-15 Computing the Same Type of Summary Value on Different Columns</p>
<p>To print the total of salaries and commissions for all sales people, first enter the following COMPUTE command:</p>
<pre>COMPUTE SUM OF SALARY COMMISSION_PCT ON REPORT
</pre>
<p>You do not have to enter a BREAK command; the BREAK you entered in <a href="#i1081949">Example 6-14, &#34;Computing and Printing a Grand Total&#34;</a> is still in effect. Now, change the first line of the select query to include COMMISSION_PCT:</p>
<pre>1 
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-15" summary="Shows output from example 6-15, display line 1." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t26">
<pre>1* SELECT LAST_NAME, SALARY
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<pre>APPEND , COMMISSION_PCT;
</pre>
<p>Finally, run the revised query to see the results:</p>
<pre>/
</pre>
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-15" summary="Shows output from example 6-15, add a column." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t27">
<pre>LAST_NAME                     SALARY COMMISSION_PCT
------------------------- ---------- --------------
Russell                        14000             .4
Partners                       13500             .3
Errazuriz                      12000             .3
Cambrault                      11000             .3
Zlotkey                        10500             .2
                          ---------- --------------
sum                            61000            1.5
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>You can also print multiple summary lines<a id="sthref731"></a> on the same break column. To do so, include the function for each summary line in the COMPUTE<a id="sthref732"></a> command as follows:</p>
<pre>COMPUTE <span class="italic">function</span> LABEL <span class="italic">label_name</span> <span class="italic">function</span>
  LABEL <span class="italic">label_name</span> <span class="italic">function</span> LABEL <span class="italic">label_name</span> ...
  OF column ON <span class="italic">break_column</span>
</pre>
<p>If you include multiple columns after OF and before ON, COMPUTE calculates and prints values for each column you specify.</p>
<div id="SQPUG501" class="example">
<p class="titleinexample"><a id="sthref733"></a>Example 6-16 Computing Multiple Summary Lines on the Same Break Column</p>
<p>To compute the average and sum of salaries for the sales department, first enter the following BREAK and COMPUTE commands:</p>
<pre>BREAK ON DEPARTMENT_ID
COMPUTE AVG SUM OF SALARY ON DEPARTMENT_ID
</pre>
<p>Now, enter and run the following query:</p>
<pre>SELECT DEPARTMENT_ID, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE DEPARTMENT_ID = 30
ORDER BY DEPARTMENT_ID, SALARY;
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-16" summary="Shows output from example 6-16, COMPUTE AVERAGE and SUM." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t28">
<pre>DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           30 Colmenares                      2500
              Himuro                          2600
              Tobias                          2800
              Baida                           2900
              Khoo                            3100
              Raphaely                       11000
*************                           ----------
avg                                           4150
sum                                          24900

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" --></div>
<!-- class="sect2" -->
<div id="SQPUG502" class="sect2"><a id="sthref734"></a>
<h3 class="sect2">Listing and Removing COMPUTE Definitions</h3>
<p>You can list your current COMPUTE<a id="sthref735"></a> definitions by entering the COMPUTE command with no clauses:</p>
<pre>COMPUTE
</pre>
<div id="SQPUG503" class="example">
<p class="titleinexample"><a id="sthref736"></a>Example 6-17 Removing COMPUTE Definitions</p>
<p>To remove all COMPUTE<a id="sthref737"></a> definitions and the accompanying BREAK definition, enter the following commands:</p>
<pre>CLEAR BREAKS
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-17" summary="Shows output from example 6-17, CLEAR BREAKS." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t29">
<pre>breaks cleared
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<pre>CLEAR COMPUTES
</pre>
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-17" summary="Shows output from example 6-17, CLEAR COMPUTES." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t30">
<pre>computes cleared
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>You may wish to place the commands CLEAR BREAKS and CLEAR COMPUTES at the beginning of every script to ensure that previously entered BREAK and COMPUTE commands will not affect queries you run in a given file.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1082069"></a>
<div id="SQPUG504" class="sect1">
<h2 class="sect1">Defining Page and Report Titles and Dimensions</h2>
<p><a id="sthref738"></a>The <a id="sthref739"></a>word <a id="sthref740"></a>page refers to a screen full of information on your display or a page of a spooled (printed) report. You can place <a id="sthref741"></a>top and <a id="sthref742"></a>bottom titles on each page, set the number of lines per page, and determine the width of each line.</p>
<p><a id="sthref743"></a><a id="sthref744"></a><a id="sthref745"></a><a id="sthref746"></a>The word report refers to the complete results of a query. You can also place headers and footers on each report and format them in the same way as top and bottom titles on pages.</p>
<div id="SQPUG505" class="sect2"><a id="sthref747"></a>
<h3 class="sect2">Setting the Top and Bottom Titles and Headers and Footers</h3>
<p>As you have already seen, you can set a title to display at the top of each page of a report. You can also set a title to display at the bottom of each page. The TTITLE<a id="sthref748"></a> command defines the top title; the BTITLE<a id="sthref749"></a> command defines the bottom title.</p>
<p>You can also set a header and footer for each report. The <a id="sthref750"></a>REPHEADER command defines the report header; the <a id="sthref751"></a>REPFOOTER command defines the report footer.</p>
<p>A TTITLE, BTITLE, REPHEADER or REPFOOTER command consists of the command name followed by one or more clauses specifying a position or format and a CHAR value you wish to place in that position or give that format. You can include multiple sets of clauses and CHAR values:</p>
<pre>TTITLE <span class="italic">position_clause</span>(s) <span class="italic">char_value</span> <span class="italic">position_clause</span>(s) <span class="italic">char_value</span> ...
BTITLE <span class="italic">position_clause</span>(s) <span class="italic">char_value</span> <span class="italic">position_clause</span>(s) <span class="italic">char_value</span> ...
REPHEADER <span class="italic">position_clause</span>(s) <span class="italic">char_value</span> <span class="italic">position_clause</span>(s) <span class="italic">char_value</span> ...
REPFOOTER <span class="italic">position_clause</span>(s) <span class="italic">char_value</span> <span class="italic">position_clause</span>(s) <span class="italic">char_value</span> ...
</pre>
<p>For descriptions of all TTITLE, BTITLE, REPHEADER and REPFOOTER clauses, see the <a href="ch_twelve048.htm#BACDJHHE">TTITLE</a> command and the <a href="ch_twelve036.htm#BACHCGDF">REPHEADER</a> command.</p>
<div id="SQPUG506" class="example">
<p class="titleinexample"><a id="sthref752"></a>Example 6-18 Placing a Top and Bottom Title on a Page</p>
<p>To put titles at the top and bottom of each page of a report, enter</p>
<pre>TTITLE CENTER -
&#34;ACME SALES DEPARTMENT PERSONNEL REPORT&#34;
BTITLE CENTER &#34;COMPANY CONFIDENTIAL&#34;
</pre>
<p>Now run the current query:</p>
<pre>/
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-18" summary="Shows output from example 6-18 using TTITLE." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t31">
<pre>                  ACME SALES DEPARTMENT PERSONNEL REPORT
DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           30 Colmenares                      2500
           30 Himuro                          2600
           30 Tobias                          2800
           30 Baida                           2900
           30 Khoo                            3100
           30 Raphaely                       11000


                         COMPANY CONFIDENTIAL

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<div id="SQPUG507" class="example">
<p class="titleinexample"><a id="sthref753"></a>Example 6-19 Placing a Header on a Report</p>
<p>To put a report header on a separate page, and to center it, enter</p>
<pre>REPHEADER PAGE CENTER &#39;PERFECT WIDGETS&#39;
</pre>
<p>Now run the current query:</p>
<pre>/
</pre>
<p>which displays the following two pages of output, with the new REPHEADER displayed on the first page:</p>
</div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-19" summary="Shows output from example 6-19 using REPHEADER." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t32">
<pre>                ACME SALES DEPARTMENT PERSONNEL REPORT
                            PERFECT WIDGETS


                         COMPANY CONFIDENTIAL

                ACME SALES DEPARTMENT PERSONNEL REPORT
DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           30 Colmenares                      2500
           30 Himuro                          2600
           30 Tobias                          2800
           30 Baida                           2900
           30 Khoo                            3100
           30 Raphaely                       11000

                         COMPANY CONFIDENTIAL

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>To<a id="sthref754"></a> suppress the report header without changing its definition, enter</p>
<pre>REPHEADER OFF
</pre>
<div id="SQPUG508" class="sect3"><a id="sthref755"></a>
<h4 class="sect3">Positioning Title Elements</h4>
<p>The report in the preceding exercises might look more attractive if you give the company name more emphasis and place the type of report and the department name on either end of a separate line. It may also help to reduce the line size and thus center the titles<a id="sthref756"></a><a id="sthref757"></a> more closely around the data.</p>
<p>You can accomplish these changes by adding some clauses to the TTITLE<a id="sthref758"></a> command and by resetting the system variable <a id="sthref759"></a>LINESIZE<a id="sthref760"></a>, as the following example shows.</p>
<p>You can format report headers and footers in the same way as BTITLE and TTITLE using the <a id="sthref761"></a>REPHEADER and REPFOOTER commands.</p>
<div id="SQPUG509" class="example">
<p class="titleinexample"><a id="sthref762"></a>Example 6-20 Positioning Title Elements</p>
<p>To redisplay the personnel report with a repositioned top title, enter the following commands:</p>
<pre>TTITLE CENTER &#39;A C M E  W I D G E T&#39; SKIP 1 -
CENTER ==================== SKIP 1 LEFT &#39;PERSONNEL REPORT&#39; -
RIGHT &#39;SALES DEPARTMENT&#39; SKIP 2
SET LINESIZE 60
/
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-20" summary="Shows output from example 6-20, TTITLE layout." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t33">
<pre>                    A C M E  W I D G E T
                    ====================
PERSONNEL REPORT                  SALES DEPARTMENT

DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           30 Colmenares                      2500
           30 Himuro                          2600
           30 Tobias                          2800
           30 Baida                           2900
           30 Khoo                            3100
           30 Raphaely                       11000
                    COMPANY CONFIDENTIAL

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>The <a id="sthref763"></a>LEFT<a id="sthref764"></a>, <a id="sthref765"></a>RIGHT<a id="sthref766"></a>, and <a id="sthref767"></a>CENTER<a id="sthref768"></a> clauses place the following values at the beginning, end, and center of the line. The <a id="sthref769"></a>SKIP<a id="sthref770"></a> clause tells SQL*Plus to move down one or more lines.</p>
<p>Note that there is no longer any space between the last row of the results and the bottom title. The last line of the bottom title prints on the last line of the page. The amount of space between the last row of the report and the bottom title<a id="sthref771"></a> depends on the overall page size, the number of lines occupied by the top title, and the number of rows in a given page. In the above example, the top title occupies three more lines than the top title in the previous example. You will learn to set the number of lines per page later in this chapter.</p>
<p>To always print n blank lines before the bottom title, use the SKIP<a id="sthref772"></a> n clause at the beginning of the BTITLE<a id="sthref773"></a> command. For example, to skip one line before the bottom title in the example above, you could enter the following command:</p>
<pre>BTITLE SKIP 1 CENTER &#39;COMPANY CONFIDENTIAL&#39;
</pre></div>
<!-- class="sect3" -->
<div id="SQPUG510" class="sect3"><a id="sthref774"></a>
<h4 class="sect3">Indenting a Title Element</h4>
<p>You can use the COL<a id="sthref775"></a> clause in <a id="sthref776"></a>TTITLE<a id="sthref777"></a> or BTITLE to indent the title<a id="sthref778"></a> element a specific number of spaces. For example, COL 1 places the following values in the first character position, and so is equivalent to LEFT, or an indent of zero. COL 15 places the title element in the 15th character position, indenting it 14 spaces.</p>
<div id="SQPUG511" class="example">
<p class="titleinexample"><a id="sthref779"></a>Example 6-21 Indenting a Title Element</p>
<p>To print the company name left-aligned with the report name indented five spaces on the next line, enter</p>
<pre>TTITLE LEFT &#39;ACME WIDGET&#39; SKIP 1 -
COL 6 &#39;SALES DEPARTMENT PERSONNEL REPORT&#39; SKIP 2
</pre>
<p>Now rerun the current query to see the results:</p>
<pre>/
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-21" summary="Shows output from example 6-21, TTITLE layout." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t34">
<pre>ACME WIDGET
     SALES DEPARTMENT PERSONNEL REPORT

DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           30 Colmenares                      2500
           30 Himuro                          2600
           30 Tobias                          2800
           30 Baida                           2900
           30 Khoo                            3100
           30 Raphaely                       11000

                    COMPANY CONFIDENTIAL

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" --></div>
<!-- class="sect3" -->
<div id="SQPUG512" class="sect3"><a id="sthref780"></a>
<h4 class="sect3">Entering Long Titles</h4>
<p>If you need to enter a title greater than 500 characters in length, you can use the SQL*Plus command DEFINE to place the text of each line of the title in a separate substitution variable:</p>
<pre>DEFINE LINE1 = &#39;This is the first line...&#39;
DEFINE LINE2 = &#39;This is the second line...&#39;
DEFINE LINE3 = &#39;This is the third line...&#39;
</pre>
<p>Then, reference the variables in your TTITLE or BTITLE command as follows:</p>
<pre>TTITLE CENTER LINE1 SKIP 1 CENTER LINE2 SKIP 1 -
CENTER LINE3
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="SQPUG513" class="sect2"><a id="sthref781"></a>
<h3 class="sect2">Displaying System-Maintained Values in Titles</h3>
<p>You can display the current page number<a id="sthref782"></a> and other system-maintained<a id="sthref783"></a> values in your<a id="sthref784"></a> title<a id="sthref785"></a> by entering a system value name as a title element, for example:</p>
<pre>TTITLE LEFT <span class="italic">system-maintained_value_name</span>
</pre>
<p>There are five system-maintained values you can display in titles, the most commonly used of which is SQL.PNO<a id="sthref786"></a> (the current page number). See <a href="ch_twelve048.htm#BACDJHHE">TTITLE</a> for a list of system-maintained values you can display in titles.</p>
<div id="SQPUG514" class="example">
<p class="titleinexample"><a id="sthref787"></a>Example 6-22 Displaying the Current Page Number in a Title</p>
<p>To display the current page number at the top of each page, along with the company name, enter the following command:</p>
<pre>TTITLE LEFT &#39;ACME WIDGET&#39; RIGHT &#39;PAGE:&#39; SQL.PNO SKIP 2
</pre>
<p>Now rerun the current query:</p>
<pre>/
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-22" summary="Shows output from example 6-22, page number in TTITLE." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t35">
<pre>ACMEWIDGET                                  PAGE:         1

DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           30 Colmenares                      2500
           30 Himuro                          2600
           30 Tobias                          2800
           30 Baida                           2900
           30 Khoo                            3100
           30 Raphaely                       11000


                    COMPANY CONFIDENTIAL

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>Note that SQL.PNO has a format ten spaces wide. You can change this format with the FORMAT<a id="sthref788"></a> clause of TTITLE<a id="sthref789"></a> (or BTITLE).</p>
<div id="SQPUG515" class="example">
<p class="titleinexample"><a id="sthref790"></a>Example 6-23 Formatting a System-Maintained Value in a Title</p>
<p>To<a id="sthref791"></a> close<a id="sthref792"></a> up the space between the word PAGE: and the page number, reenter the TTITLE command as shown:</p>
<pre>TTITLE LEFT &#39;ACME WIDGET&#39; RIGHT &#39;PAGE:&#39; FORMAT 999 -
SQL.PNO SKIP 2
</pre>
<p>Now rerun the query:</p>
<pre>/
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-23" summary="Shows output from example 6-23, using a system value in TTITLE." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t36">
<pre>ACME WIDGET                                     &#39;PAGE:&#39;   1

DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           30 Colmenares                      2500
           30 Himuro                          2600
           30 Tobias                          2800
           30 Baida                           2900
           30 Khoo                            3100
           30 Raphaely                       11000


                    COMPANY CONFIDENTIAL

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" --></div>
<!-- class="sect2" -->
<div id="SQPUG516" class="sect2"><a id="sthref793"></a>
<h3 class="sect2">Listing, Suppressing, and Restoring Page Title Definitions</h3>
<p>To list a page title<a id="sthref794"></a> definition, enter the appropriate title command with no clauses:</p>
<pre>TTITLE<a id="sthref795"></a>
BTITLE
</pre>
<p>To suppress a title<a id="sthref796"></a> definition, enter:</p>
<pre>TTITLE<a id="sthref797"></a> <a id="sthref798"></a>OFF<a id="sthref799"></a>
BTITLE OFF
</pre>
<p>These commands cause SQL*Plus to cease displaying titles on reports, but do not clear the current definitions of the titles.<a id="sthref800"></a> You may restore the current definitions by entering:</p>
<pre>TTITLE<a id="sthref801"></a> <a id="sthref802"></a>ON<a id="sthref803"></a>
BTITLE ON
</pre></div>
<!-- class="sect2" -->
<div id="SQPUG517" class="sect2"><a id="sthref804"></a>
<h3 class="sect2">Displaying Column Values in Titles</h3>
<p>You<a id="sthref805"></a> may wish to create a master/detail report<a id="sthref806"></a> that displays a changing master column<a id="sthref807"></a> value at the top of each page with the detail query results for that value underneath. You can reference a column value in a top title by storing the desired value in a variable and referencing the variable in a TTITLE<a id="sthref808"></a> command. Use the following form of the <a id="sthref809"></a>COLUMN<a id="sthref810"></a><a id="sthref811"></a> command to define the variable:</p>
<pre>COLUMN <span class="italic">column_name</span> NEW_VALUE<a id="sthref812"></a> <span class="italic">variable_name</span>
</pre>
<p>You must include the master column in an ORDER BY<a id="sthref813"></a> clause and in a BREAK<a id="sthref814"></a> command using the SKIP PAGE clause.</p>
<div id="SQPUG518" class="example">
<p class="titleinexample"><a id="sthref815"></a>Example 6-24 Creating a Master/Detail Report</p>
<p>Suppose you want to create a report that displays two different managers&#39; employee numbers, each at the top of a separate page, and the people reporting to the manager on the same page as the manager&#39;s employee number. First create a variable, MGRVAR, to hold the value of the current manager&#39;s employee number:</p>
<pre>COLUMN MANAGER_ID NEW_VALUE MGRVAR NOPRINT
</pre>
<p>Because you will only display the managers&#39; employee numbers in the title, you do not want them to print as part of the detail. The <a id="sthref816"></a>NOPRINT<a id="sthref817"></a> clause you entered above tells SQL*Plus not to print the column<a id="sthref818"></a> MANAGER_ID.</p>
<p>Next, include a label and the value in your page title, enter the proper BREAK command, and suppress the bottom title from the last example:</p>
<pre>TTITLE LEFT &#39;Manager: &#39; MGRVAR SKIP 2
BREAK ON MANAGER_ID SKIP PAGE
BTITLE OFF
</pre>
<p>Finally, enter and run the following query:</p>
<pre>SELECT MANAGER_ID, DEPARTMENT_ID, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE MANAGER_ID IN (101, 201)
ORDER BY MANAGER_ID, DEPARTMENT_ID;
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-24" summary="Shows output from example 6-24, using variable with BREAK and TTITLE." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t37">
<pre>Manager:       101

DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           10 Whalen                          4400
           40 Mavris                          6500
           70 Baer                           10000
          100 Greenberg                      12000
          110 Higgins                        12000

Manager:       201

DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           20 Fay                             6000

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>If you want to print the value of a column<a id="sthref819"></a> at the bottom of the page, you can use the COLUMN<a id="sthref820"></a> command in the following form:</p>
<pre>COLUMN<a id="sthref821"></a> <span class="italic">column_name</span> OLD_VALUE<a id="sthref822"></a> <span class="italic">variable_name</span>
</pre>
<p>SQL*Plus prints the bottom title as part of the process of breaking to a new page&mdash;after finding the new value for the master column. Therefore, if you simply referenced the NEW_VALUE of the master column, you would get the value for the next set of details. OLD_VALUE remembers the value of the master column that was in effect before the page break began.</p>
</div>
<!-- class="sect2" -->
<a id="i1082423"></a>
<div id="SQPUG519" class="sect2">
<h3 class="sect2">Displaying the Current Date in Titles</h3>
<p>You can, of course, date<a id="sthref823"></a> your reports by simply typing a value in the title<a id="sthref824"></a>. This is satisfactory for ad hoc reports, but if you want to run the same report repeatedly, you would probably prefer to have the date automatically appear when the report is run. You can do this by creating a variable to hold the current date.</p>
<p>You can reference the predefined substitution variable _DATE to display the current date in a title as you would any other variable.</p>
<p>The date format model you include in your LOGIN file or in your SELECT statement determines the format in which SQL*Plus displays the date. See your <a class="olink SQLRF" href="../SQLRF/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information on date format models. See <a href="ch_two.htm#i1133133">Modifying Your LOGIN File</a> for more information about the LOGIN file.</p>
<p>You can also enter these commands interactively. See <a href="ch_twelve013.htm#BACHCABF">COLUMN</a> for more information.</p>
</div>
<!-- class="sect2" -->
<a id="i1082471"></a>
<div id="SQPUG520" class="sect2">
<h3 class="sect2">Setting Page Dimensions</h3>
<p>Typically, a page of a report contains the number of blank line(s) set in the NEWPAGE variable of the SET command, a top title, column headings, your query results, and a bottom title. SQL*Plus displays a report that is too long to fit on one page on several consecutive pages, each with its own titles and column headings. The amount of data SQL*Plus displays on each page depends on the current page dimensions.</p>
<p>The default page<a id="sthref825"></a> dimensions<a id="sthref826"></a> used by SQL*Plus are shown underneath:</p>
<ul>
<li>
<p>number of lines before the top title: 1</p>
</li>
<li>
<p>number of lines per page, from the top title to the bottom of the page: 14</p>
</li>
<li>
<p>number of characters per line: 80</p>
</li>
</ul>
<p>You<a id="sthref827"></a> can change these settings to match the size of your computer screen or, for printing, the size of a sheet of paper.</p>
<p>You can change the page length<a id="sthref828"></a> with the system variable PAGESIZE. For example, you may wish to do so when you print a report.</p>
<p>To set the number of lines between the beginning of each page and the top title<a id="sthref829"></a>, use the NEWPAGE<a id="sthref830"></a> variable of the SET<a id="sthref831"></a> command:</p>
<pre>SET NEWPAGE <span class="italic">number_of_lines</span>
</pre>
<p>If you set NEWPAGE to zero, SQL*Plus skips zero lines and displays and prints a formfeed<a id="sthref832"></a> character to begin a new page. On most types of computer screens, the formfeed character clears the screen and moves the cursor to the beginning of the first line. When you print a report, the formfeed character makes the printer move to the top of a new sheet of paper, even if the overall page length is less than that of the paper. If you set NEWPAGE to NONE, SQL*Plus does not print a blank line or formfeed between report pages.</p>
<p>To set the number of lines on a page, use the PAGESIZE<a id="sthref833"></a> variable of the SET<a id="sthref834"></a> command:</p>
<pre>SET PAGESIZE <span class="italic">number_of_lines</span>
</pre>
<p>You may wish to reduce the line size to center a title properly over your output, or you may want to increase line size for printing on wide paper. You can change the line<a id="sthref835"></a> width using the LINESIZE<a id="sthref836"></a> variable of the SET<a id="sthref837"></a> command:</p>
<pre>SET LINESIZE <span class="italic">number_of_characters</span>
</pre>
<div id="SQPUG521" class="example">
<p class="titleinexample"><a id="sthref838"></a>Example 6-25 Setting Page Dimensions</p>
<p>To set the page size to 66 lines, clear the screen (or advance the printer to a new sheet of paper) at the start of each page, and set the line size to 70, enter the following commands:</p>
<pre>SET PAGESIZE 66
SET NEWPAGE 0
SET LINESIZE 70
</pre>
<p>Now enter and run the following commands to see the results:</p>
<pre>TTITLE CENTER &#39;ACME WIDGET PERSONNEL REPORT&#39; SKIP 1 -
CENTER &#39;01-JAN-2001&#39; SKIP 2
</pre>
<p>Now run the following query:</p>
<pre>COLUMN FIRST_NAME HEADING &#39;FIRST|NAME&#39;;
COLUMN LAST_NAME HEADING &#39;LAST|NAME&#39;;
COLUMN SALARY  HEADING &#39;MONTHLY|SALARY&#39; FORMAT $99,999;
SELECT DEPARTMENT_ID, FIRST_NAME, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE SALARY&gt;12000;
</pre></div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-25" summary="Shows output from example 6-25, setting page size." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t38">
<pre>                    ACME WIDGET PERSONNEL REPORT
                              01-JAN-2001

              FIRST                LAST                      MONTHLY
DEPARTMENT_ID NAME                 NAME                       SALARY
------------- -------------------- ------------------------- --------
           90 Steven               King                       $24,000
           90 Neena                Kochhar                    $17,000
           90 Lex                  De Haan                    $17,000
           80 John                 Russell                    $14,000
           80 Karen                Partners                   $13,500
           20 Michael              Hartstein                  $13,000

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>Now reset PAGESIZE, NEWPAGE, and LINESIZE to their default values:</p>
<pre>SET PAGESIZE 14
SET NEWPAGE 1
SET LINESIZE 80
</pre>
<p>To list the current values of these variables, use the SHOW<a id="sthref839"></a> command:</p>
<pre>SHOW PAGESIZE
SHOW NEWPAGE
SHOW LINESIZE
</pre>
<p>Through the SQL*Plus command SPOOL<a id="sthref840"></a>, you can store your query results in a file or print them on your computer&#39;s default printer.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1082570"></a>
<div id="SQPUG522" class="sect1">
<h2 class="sect1">Storing and Printing Query Results</h2>
<p>Send your query results to a file when you want to edit them with a word processor before printing or include them in a letter, email, or other document.</p>
<p>To store the results of a query in a file&mdash;and still display them on the screen&mdash;enter the SPOOL command in the following form:</p>
<pre>SPOOL <span class="italic">file_name</span>
</pre>
<p>If you do not follow the filename with a period and an extension, SPOOL adds a default file extension to the filename to identify it as an output file. The default varies with the operating system; on most hosts it is LST or LIS. The extension is not appended when you spool to system generated files such as /dev/null and /dev/stderr. See the platform-specific Oracle documentation provided for your operating system for more information.</p>
<p>SQL*Plus continues to spool information to the file until you turn spooling off, using the following form of SPOOL<a id="sthref841"></a>:</p>
<pre>SPOOL<a id="sthref842"></a> OFF<a id="sthref843"></a>
</pre>
<div id="SQPUG523" class="sect2"><a id="sthref844"></a>
<h3 class="sect2">Creating a Flat File</h3>
<p><a id="sthref845"></a><a id="sthref846"></a><a id="sthref847"></a>When moving data between different software products, it is sometimes necessary to use a &#34;flat&#34; file (an operating system file with no escape characters, headings, or extra characters embedded). For example, if you do not have Oracle Net, you need to create a flat file for use with SQL*Loader when moving data from Oracle9<span class="italic">i</span> to Oracle Database 10<span class="italic">g</span>.</p>
<p>To create a flat file with SQL*Plus, you first must enter the following SET commands:</p>
<pre>SET NEWPAGE 0
SET SPACE 0
SET LINESIZE 80
SET PAGESIZE 0
SET ECHO OFF
SET FEEDBACK OFF
SET VERIFY OFF
SET HEADING OFF
SET MARKUP HTML OFF SPOOL OFF
</pre>
<p>After entering these commands, you use the SPOOL command as shown in the previous section to create the flat file.</p>
<p>The <a id="sthref848"></a>SET COLSEP command may be useful to delineate the columns. For more information, see the <a href="ch_twelve039.htm#i2698538">SET</a> command.</p>
</div>
<!-- class="sect2" -->
<div id="SQPUG524" class="sect2"><a id="sthref849"></a>
<h3 class="sect2">Sending Results to a File</h3>
<p>To store the results<a id="sthref850"></a> of a query in a file&mdash;and still display them on the screen&mdash;enter the SPOOL command in the following form:</p>
<pre>SPOOL<a id="sthref851"></a> <span class="italic">file_name</span><a id="sthref852"></a>
</pre>
<p>SQL*Plus stores all information displayed on the screen after you enter the SPOOL command in the file you specify.</p>
</div>
<!-- class="sect2" -->
<div id="SQPUG525" class="sect2"><a id="sthref853"></a>
<h3 class="sect2">Sending Results to a Printer</h3>
<p>To print query results<a id="sthref854"></a>, spool them to a file as described in the previous section. Then, instead of using SPOOL OFF, enter the command in the following form:</p>
<pre>SPOOL<a id="sthref855"></a> OUT<a id="sthref856"></a>
</pre>
<p>SQL*Plus stops spooling and copies the contents of the spooled file to your computer&#39;s standard (default) printer. SPOOL OUT does not delete the spool file after printing.</p>
<div id="SQPUG526" class="example">
<p class="titleinexample"><a id="sthref857"></a>Example 6-26 Sending Query Results to a Printer</p>
<p>To generate a final report and spool and print the results, create a script named EMPRPT containing the following commands.</p>
<p>First, use EDIT to create the script with your operating system text editor.</p>
<pre>EDIT EMPRPT
</pre>
<p>Next, enter the following commands into the file, using your text editor:</p>
<pre>SPOOL TEMP
CLEAR COLUMNS
CLEAR BREAKS
CLEAR COMPUTES

COLUMN DEPARTMENT_ID HEADING DEPARTMENT
COLUMN LAST_NAME HEADING &#39;LAST NAME&#39;
COLUMN SALARY HEADING &#39;MONTHLY SALARY&#39; FORMAT $99,999

BREAK ON DEPARTMENT_ID SKIP 1 ON REPORT
COMPUTE SUM OF SALARY ON DEPARTMENT_ID
COMPUTE SUM OF SALARY ON REPORT

SET PAGESIZE 24
SET NEWPAGE 0
SET LINESIZE 70

TTITLE CENTER &#39;A C M E  W I D G E T&#39; SKIP 2 -
LEFT &#39;EMPLOYEE REPORT&#39; RIGHT &#39;PAGE:&#39; -
FORMAT 999 SQL.PNO SKIP 2
BTITLE CENTER &#39;COMPANY CONFIDENTIAL&#39;

SELECT DEPARTMENT_ID, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE SALARY&gt;12000
ORDER BY DEPARTMENT_ID;

SPOOL OFF
</pre>
<p>If you do not want to see the output on your screen, you can also add SET TERMOUT OFF to the beginning of the file and SET TERMOUT ON to the end of the file. Save and close the file in your text editor (you will automatically return to SQL*Plus). Now, run the script EMPRPT:</p>
<pre>@EMPRPT
</pre>
<p>SQL*Plus displays the output on your screen (unless you set TERMOUT to OFF), and spools it to the file TEMP:</p>
</div>
<!-- class="example" -->
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Output from example 6-26" summary="Shows output from example 6-26, SPOOL output to file." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t39">
<pre>                         A C M E  W I D G E T

EMPLOYEE REPORT                                              PAGE: 1

DEPARTMENT LAST NAME                 MONTHLY SALARY
---------- ------------------------- --------------
        20 Hartstein                        $13,000
**********                           --------------
sum                                         $13,000

        80 Russell                          $14,000
           Partners                         $13,500
**********                           --------------
sum                                         $27,500

        90 King                             $24,000
           Kochhar                          $17,000
           De Haan                          $17,000
**********                           --------------
sum                                         $58,000

                                     --------------
sum                                         $98,500
                         COMPANY CONFIDENTIAL

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1436">
<tr>
<td class="cellalignment1444">
<table class="cellalignment1441">
<tr>
<td class="cellalignment1440"><a href="ch_five.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1440"><a href="ch_seven.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1446">
<table class="cellalignment1439">
<tr>
<td class="cellalignment1440"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1440"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1440"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1440"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1440"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1440"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>