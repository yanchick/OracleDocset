<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-104079"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/COMPUTE"></a><title>COMPUTE</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737"/>
<meta name="dcterms.created" content="2013-07-17T10:55:19Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="SQL*Plus&reg; User&#39;s Guide and Reference"/>
<meta name="dcterms.identifier" content="E18404-12"/>
<meta name="dcterms.isVersionOf" content="SQPUG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="ch_twelve013.htm" title="Previous" type="text/html"/>
<link rel="Next" href="ch_twelve015.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E18404-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">36/82</span> <!-- End Header --><a id="BACEDBGF"></a>
<hr/>
<div id="SQPUG035" class="refsect1"><!-- infolevel="all" infotype="General" --><a id="i2697257"></a>
<h1 class="refsect1">COMPUTE<a id="sthref1405"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1406"></a>Syntax</p>
<p class="synopsis">COMP[UTE] [<span class="italic">function</span> [LAB[EL] <span class="italic">text</span>] ... OF {<span class="italic">expr</span> | <span class="italic">column</span> | <span class="italic">alias</span>} ... ON {<span class="italic">expr</span> | <span class="italic">column</span> | <span class="italic">alias</span> | REPORT | ROW} ...]</p>
<p>In combination with the BREAK command, calculates<a id="sthref1407"></a> and prints summary lines<a id="sthref1408"></a>, using various standard computations on subsets of selected rows.<a id="sthref1409"></a> It also lists all COMPUTE definitions. For details on how to create summaries, see <a href="ch_six.htm#i1081534"><span class="xreftitlebold">Clarifying Your Report with Spacing and Summary Lines</span></a>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1410"></a>Terms</p>
<p class="synopsis"><span class="italic">function</span> ...</p>
<p>Represents one of the functions listed in <a href="#BACGEJEB">Table 12-2, &#34;COMPUTE Functions&#34;</a>. If you specify more than one function, use spaces to separate the functions.</p>
<p>COMPUTE command functions are always executed in the sequence AVG, COUNT, MINIMUM, MAXIMUM, NUMBER, SUM, STD, VARIANCE, regardless of their order in the COMPUTE command.</p>
<div id="SQPUG600" class="tblformal">
<p class="titleintable"><a id="sthref1411"></a><a id="BACGEJEB"></a>Table 12-2 COMPUTE Functions</p>
<table class="cellalignment1447" title="COMPUTE Functions" summary="Shows the COMPUTE functions, their description, and the applicable datatypes." dir="ltr">
<thead>
<tr class="cellalignment1437">
<th class="cellalignment1448" id="r1c1-t21">Function</th>
<th class="cellalignment1448" id="r1c2-t21">Computes</th>
<th class="cellalignment1448" id="r1c3-t21">Applies to Datatypes</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r2c1-t21" headers="r1c1-t21">
<pre>AVG
</pre></td>
<td class="cellalignment1444" headers="r2c1-t21 r1c2-t21">
<p>Average of non-null values</p>
</td>
<td class="cellalignment1444" headers="r2c1-t21 r1c3-t21">
<p>NUMBER</p>
</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r3c1-t21" headers="r1c1-t21">
<pre>COU[NT]
</pre></td>
<td class="cellalignment1444" headers="r3c1-t21 r1c2-t21">
<p>Count of non-null values</p>
</td>
<td class="cellalignment1444" headers="r3c1-t21 r1c3-t21">
<p>all types</p>
</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r4c1-t21" headers="r1c1-t21">
<pre>MIN[IMUM]
</pre></td>
<td class="cellalignment1444" headers="r4c1-t21 r1c2-t21">
<p>Minimum value</p>
</td>
<td class="cellalignment1444" headers="r4c1-t21 r1c3-t21">
<p>NUMBER, CHAR, NCHAR, VARCHAR2 (VARCHAR), NVARCHAR2 (NCHAR VARYING)</p>
</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r5c1-t21" headers="r1c1-t21">
<pre>MAX[IMUM]
</pre></td>
<td class="cellalignment1444" headers="r5c1-t21 r1c2-t21">
<p>Maximum value</p>
</td>
<td class="cellalignment1444" headers="r5c1-t21 r1c3-t21">
<p>NUMBER, CHAR, NCHAR, VARCHAR2 (VARCHAR), NVARCHAR2 (NCHAR VARYING)</p>
</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r6c1-t21" headers="r1c1-t21">
<pre>NUM[BER]
</pre></td>
<td class="cellalignment1444" headers="r6c1-t21 r1c2-t21">
<p>Count of rows</p>
</td>
<td class="cellalignment1444" headers="r6c1-t21 r1c3-t21">
<p>all types</p>
</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r7c1-t21" headers="r1c1-t21">
<pre>SUM
</pre></td>
<td class="cellalignment1444" headers="r7c1-t21 r1c2-t21">
<p>Sum of non-null values</p>
</td>
<td class="cellalignment1444" headers="r7c1-t21 r1c3-t21">
<p>NUMBER</p>
</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r8c1-t21" headers="r1c1-t21">
<pre>STD
</pre></td>
<td class="cellalignment1444" headers="r8c1-t21 r1c2-t21">
<p>Standard deviation of non-null values</p>
</td>
<td class="cellalignment1444" headers="r8c1-t21 r1c3-t21">
<p>NUMBER</p>
</td>
</tr>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r9c1-t21" headers="r1c1-t21">
<pre>VAR[IANCE]
</pre></td>
<td class="cellalignment1444" headers="r9c1-t21 r1c2-t21">
<p>Variance of non-null values</p>
</td>
<td class="cellalignment1444" headers="r9c1-t21 r1c3-t21">
<p>NUMBER</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p class="synopsis">LAB[EL] <span class="italic">text</span></p>
<p><a id="sthref1412"></a>Defines the label to be printed for the computed value. If no <a id="sthref1413"></a>LABEL clause is used, <span class="italic">text</span> defaults to the unabbreviated function keyword. You must place single quotes around <span class="italic">text</span> containing spaces or punctuation. The label prints left justified and truncates to the column width or linesize, whichever is smaller. The maximum label length is <a id="sthref1414"></a>500 characters.</p>
<p>The label for the computed value appears in the break column specified. To suppress the label, use the NOPRINT option of the COLUMN command on the break column.</p>
<p>If you repeat a function in a COMPUTE command, SQL*Plus issues a warning and uses the first occurrence of the function.</p>
<p>With ON REPORT and ON ROW computations, the label appears in the first column listed in the SELECT statement. The label can be suppressed by using a NOPRINT column first in the SELECT statement. When you compute a function of the first column in the SELECT statement ON REPORT or ON ROW, then the computed value appears in the first column and the label is not displayed. To see the label, select a dummy column first in the SELECT list.</p>
<p class="synopsis">OF {<span class="italic">expr</span> | <span class="italic">column</span> | <span class="italic">alias</span>} ...</p>
<p>In the OF clause,<a id="sthref1415"></a> you can refer to an expression or function reference in the SELECT statement by placing the expression or function reference in double quotes. Column names and aliases do not need quotes.</p>
<p class="synopsis">ON {<span class="italic">expr</span> | <span class="italic">column</span> | <span class="italic">alias</span> | REPORT | ROW} ...</p>
<p>If multiple COMPUTE<a id="sthref1416"></a><a id="sthref1417"></a><a id="sthref1418"></a><a id="sthref1419"></a><a id="sthref1420"></a><a id="sthref1421"></a><a id="sthref1422"></a><a id="sthref1423"></a> commands reference the same column in the ON clause, only the last COMPUTE command applies.</p>
<p>To reference a<a id="sthref1424"></a> SQL SELECT expression or function reference in an ON clause, place the expression or function reference in quotes. Column names and aliases do not need quotes.</p>
<p>Enter COMPUTE without clauses to list all <a id="sthref1425"></a>COMPUTE definitions.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1426"></a>Usage</p>
<p>In order for the computations to occur, the following conditions must all be true:</p>
<ul>
<li>
<p>One or more of the expressions, columns, or column aliases you reference in the OF clause must also be in the SELECT command.</p>
</li>
<li>
<p>The expression, column, or column alias you reference in the ON clause must occur in the SELECT command and in the most recent BREAK<a id="sthref1427"></a> command.</p>
</li>
<li>
<p>If you reference either ROW or REPORT in the ON clause, also reference ROW or REPORT in the most recent BREAK command.</p>
</li>
</ul>
<p>To remove all COMPUTE definitions, use the CLEAR COMPUTES command.</p>
<p>Note that if you use the NOPRINT option for the column on which the COMPUTE is being performed, the COMPUTE result is also suppressed.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1428"></a>Examples</p>
<p>To subtotal the salary for the &#34;account manager&#34;, AC_MGR, and &#34;salesman&#34;, SA_MAN, job classifications with a compute label of &#34;TOTAL&#34;, enter</p>
<pre>BREAK ON JOB_ID SKIP 1;
COMPUTE SUM LABEL &#39;TOTAL&#39; OF SALARY ON JOB_ID;
SELECT JOB_ID, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE JOB_ID IN (&#39;AC_MGR&#39;, &#39;SA_MAN&#39;)
ORDER BY JOB_ID, SALARY;
</pre>
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Example output from COMPUTE" summary="Shows output after using COMPUTE to total salary." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t22">
<pre>JOB_ID     LAST_NAME                     SALARY
---------- ------------------------- ----------
AC_MGR     Higgins                        12000
**********                           ----------
TOTAL                                     12000
SA_MAN     Zlotkey                        10500
           Cambrault                      11000
           Errazuriz                      12000
           Partners                       13500
           Russell                        14000
**********                           ----------
TOTAL                                     61000

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>To calculate the total of salaries greater than 12,000 on a report, enter</p>
<pre>COMPUTE SUM OF SALARY ON REPORT
BREAK ON REPORT
COLUMN DUMMY HEADING &#39;&#39;
SELECT &#39;   &#39; DUMMY, SALARY, EMPLOYEE_ID
FROM EMP_DETAILS_VIEW
WHERE SALARY &gt; 12000
ORDER BY SALARY;
</pre>
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Example output from COMPUTE" summary="Shows output after using COMPUTE to total selected salaries." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t23">
<pre>        SALARY EMPLOYEE_ID
--- ---------- -----------
         13000         201
         13500         146
         14000         145
         17000         101
         17000         102
         24000         100
    ----------
sum      98500

6 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>To calculate the average and maximum salary for the executive and accounting departments, enter</p>
<pre>BREAK ON DEPARTMENT_NAME SKIP 1
COMPUTE AVG LABEL &#39;Dept Average&#39; -
        MAX LABEL &#39;Dept Maximum&#39; -
        OF SALARY ON DEPARTMENT_NAME
SELECT DEPARTMENT_NAME, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE DEPARTMENT_NAME IN (&#39;Executive&#39;, &#39;Accounting&#39;)
ORDER BY DEPARTMENT_NAME;
</pre>
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Example output from COMPUTE" summary="Shows output after using COMPUTE to calculate average and maximum saleries for selected departments." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t24">
<pre>DEPARTMENT_NAME                LAST_NAME                     SALARY
------------------------------ ------------------------- ----------
Accounting                     Higgins                        12000
                               Gietz                           8300
******************************                           ----------
Dept Average                                                  10150
Dept Maximum                                                  12000

Executive                      King                           24000
                               Kochhar                        17000
                               De Haan                        17000
******************************                           ----------
Dept Average                                             19333.3333
Dept Maximum                                                  24000
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>To sum salaries for departments &lt;= 20 without printing the compute label, enter</p>
<pre>COLUMN DUMMY NOPRINT
COMPUTE SUM OF SALARY ON DUMMY
BREAK ON DUMMY SKIP 1
SELECT DEPARTMENT_ID DUMMY, DEPARTMENT_ID, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE DEPARTMENT_ID &lt;= 20
ORDER BY DEPARTMENT_ID;
</pre>
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Example output from COMPUTE" summary="Shows output after using COMPUTE to sum salaries for selected departments and without printing the compute label." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t25">
<pre>DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           10 Whalen                          4400
                                        ----------
                                              4400

           20 Hartstein                      13000
           20 Fay                             6000
                                        ----------
                                             19000
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>To total the salary at the end of the report without printing the compute label, enter</p>
<pre>COLUMN DUMMY NOPRINT
COMPUTE SUM OF SALARY ON DUMMY
BREAK ON DUMMY
SELECT NULL DUMMY, DEPARTMENT_ID, LAST_NAME, SALARY
FROM EMP_DETAILS_VIEW
WHERE DEPARTMENT_ID &lt;= 30
ORDER BY DEPARTMENT_ID;
</pre>
<div class="inftblruleinformal">
<table class="cellalignment1443" title="Example output from COMPUTE" summary="Shows output after using COMPUTE to total salariy without printing the compute label." dir="ltr">
<tbody>
<tr class="cellalignment1437">
<td class="cellalignment1444" id="r1c1-t26">
<pre>DEPARTMENT_ID LAST_NAME                     SALARY
------------- ------------------------- ----------
           10 Whalen                          4400
           20 Hartstein                      13000
           20 Fay                             6000
           30 Raphaely                       11000
           30 Khoo                            3100
           30 Baida                           2900
           30 Tobias                          2800
           30 Himuro                          2600
           30 Colmenares                      2500
                                        ----------
                                             48300

9 rows selected.
</pre></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1436">
<tr>
<td class="cellalignment1444">
<table class="cellalignment1441">
<tr>
<td class="cellalignment1440"><a href="ch_twelve013.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1440"><a href="ch_twelve015.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1446">
<table class="cellalignment1439">
<tr>
<td class="cellalignment1440"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1440"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1440"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1440"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1440"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1440"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>