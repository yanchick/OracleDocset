<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-5132"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Configuring%20Application%20Users%20and%20Application%20Roles"></a><title>Configuring Application Users and Application Roles</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="configuring, application users, application users, about, general procedure, creating, application user accounts, users, modifying, simple application user account, direct login users, XS_PRINCIPAL PL/SQL package, CREATE_USER, SET_PASSWORD, SET_PROFILE, direct application user accounts, setting password verifiers, password verifiers, setting, password verifiers, SET_VERIFIER, validating, using, XS_DIAG.VALIDATE_PRINCIPAL function, XS_DIAG PL/SQL package, VALIDATE_PRINCIPAL, application roles, application roles, roles, creating dynamic role, dynamic application role, dynamic application role, an application role, CREATE_ROLE, creating regular role, regular application role, dynamic application roles, predefined, predefined objects, dynamic application roles, granting, application privileges to principles, application privileges, granting to principles, granting to another application role, application role, to new application role, GRANT_ROLES"/>
<meta name="dcterms.created" content="2017-02-17T18:31:46Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Real Application Security Administrator&#39;s and Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E48189-13"/>
<meta name="dcterms.isVersionOf" content="DBFSG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2012, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="intro.htm" title="Previous" type="text/html"/>
<link rel="Next" href="sessions.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48189-13.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-D6986696-8068-418F-914C-F33B9AD165DF"></a> <span id="PAGE" style="display:none;">9/25</span> <!-- End Header -->
<a id="DBFSG20000"></a>
<h1 id="DBFSG-GUID-D6986696-8068-418F-914C-F33B9AD165DF" class="sect1"><span class="enumeration_chapter">2</span> Configuring Application Users and Application Roles</h1>
<div>
<div class="p">This chapter contains:
<ul style="list-style-type: disc;">
<li>
<p><a href="users_roles.htm#GUID-A0929CEA-1456-46A1-B182-C877C79CF9DC">About Configuring Application Users</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-349C89E8-DC1D-4641-898D-F8B8B94B79B8">About Configuring Application Roles</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-AF9250D6-C579-4F8A-B210-AF357F42FA6F">Effective Dates for Application Users and Application Roles</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-413EB606-55E3-4339-9247-F7814E1ACA31">About Granting Application Privileges to Principals</a></p>
</li>
</ul>
</div>
<div class="infoboxnotealso" id="GUID-D6986696-8068-418F-914C-F33B9AD165DF__GUID-0CF9C0A6-C02B-41B3-9D16-FBA4DE2D093E">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="plsql_pkg.htm#GUID-50D04FCD-BB85-42A5-851D-559D5D537325">XS_PRINCIPAL Package</a>&#34;</span></p>
</div>
</div>
<a id="DBFSG20021"></a>
<div class="props_rev_3"><a id="GUID-A0929CEA-1456-46A1-B182-C877C79CF9DC"></a>
<h2 id="DBFSG-GUID-A0929CEA-1456-46A1-B182-C877C79CF9DC" class="sect2">About Configuring Application Users</h2>
<div>
<div class="p">This section contains the following topics:
<ul style="list-style-type: disc;">
<li>
<p><a href="users_roles.htm#GUID-2F1A1A87-633B-4F45-99B1-CFFCEAFD73AB">About Application User Accounts</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-7FAC6DD4-6D98-4EBB-A68E-101E1C576D0D">Creating a Simple Application User Account</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-BADE624E-3134-47BC-8949-FCE7E3086A4B">About Creating a Direct Login Application User Account</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-7940BF68-53EA-4068-89CB-679A63C412D9">Resetting the Application User&#39;s Password with the SQL*Plus PASSWORD Command</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-B5204FD3-0048-4A5D-A2C1-0E7996FF25BE">Configuring an Application User Switch</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-C9D5D045-7604-4771-AA58-A5F7DE702EC1">Validating an Application User</a></p>
</li>
</ul>
</div>
</div>
<a id="DBFSG99050"></a>
<div class="props_rev_3"><a id="GUID-2F1A1A87-633B-4F45-99B1-CFFCEAFD73AB"></a>
<h3 id="DBFSG-GUID-2F1A1A87-633B-4F45-99B1-CFFCEAFD73AB" class="sect3">About Application User Accounts</h3>
<div>
<p>Traditional database users own database schemas and can create traditional heavyweight database sessions to those schemas. Application users do not own database schemas, but can create application sessions in the database.</p>
<p>You can either attach or connect application users to the database through the direct login to use application sessions.</p>
<p>This section contains: <a href="users_roles.htm#GUID-FE5E0C6A-7452-444E-A28F-B54518972EC6">General Procedures for Creating Application User Accounts</a>.</p>
</div>
<a id="DBFSG99803"></a><a id="DBFSG99802"></a>
<div class="props_rev_3"><a id="GUID-FE5E0C6A-7452-444E-A28F-B54518972EC6"></a>
<h4 id="DBFSG-GUID-FE5E0C6A-7452-444E-A28F-B54518972EC6" class="sect4">General Procedures for Creating Application User Accounts</h4>
<div>
<div class="section">
<p>The general procedure for creating an application user account is as follows:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Create a security manager user, <code class="codeph">sec_mgr</code>, as follows and grant this user <code class="codeph">dba</code> and <code class="codeph">xs_session_admin</code> privileges. As the security manager, you can now create users and roles, set passwords, and so forth, and administer sessions.</span>
<div>
<pre dir="ltr">sqlplus /nolog
SQL&gt; connect sys/password as sysdba
SQL&gt; grant dba, xs_session_admin to sec_mgr identified by password;
</pre></div>
</li>
<li class="stepexpand"><span>Log in to SQL*Plus as a user who has the <code class="codeph">CREATE USER</code> system privilege.</span>
<div>
<pre dir="ltr">sqlplus sec_mgr
Enter password: password
Connected. 
</pre>
<p>See <span class="q">&#34;<a href="plsql_pkg.htm#GUID-50D04FCD-BB85-42A5-851D-559D5D537325">XS_PRINCIPAL Package</a>&#34;</span> for more information about the <code class="codeph">XS_PRINCIPAL</code> package and specifically the <span class="q">&#34;<a href="plsql_pkg.htm#GUID-03D147A5-36A8-4ACE-BDEA-2D7A5D8F046D">CREATE_USER Procedure</a>&#34;</span>.</p>
<p>You must have the privileges required to create, modify, or drop application users and roles. These privileges are governed by the same system privileges required to create, modify, or drop database users and roles. For more information about these and other SQL statements, see <a class="olink SQLRF01503" target="_blank" href="../SQLRF/statements_8003.htm#SQLRF01503"><span><cite>Oracle Database SQL Language Reference</cite></span></a>.</p>
</div>
</li>
<li class="stepexpand"><span>Create the application users with the <code class="codeph">XS_PRINCIPAL.CREATE_USER</code> procedure.</span>
<div>
<p>Select the appropriate type, and follow the instructions in these sections:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="users_roles.htm#GUID-7FAC6DD4-6D98-4EBB-A68E-101E1C576D0D">Creating a Simple Application User Account</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="users_roles.htm#GUID-BADE624E-3134-47BC-8949-FCE7E3086A4B">About Creating a Direct Login Application User Account</a>&#34;</span></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="sect5"><a id="OTHERTASKS-F989C668"></a>
<h5 id="DBFSG-OTHERTASKS-F989C668" class="sect5">Other Tasks</h5>
<div>
<div class="section">
<p>After you create the application user account, you can grant the account a role, which provides privileges for the application users. For more information, see <span class="q">&#34;<a href="users_roles.htm#GUID-D40E9BEE-7EB1-4CDF-BF78-828050C4C469">Granting an Application Role to an Existing Application User</a>&#34;</span>.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<a id="DBFSG99052"></a>
<div class="props_rev_3"><a id="GUID-7FAC6DD4-6D98-4EBB-A68E-101E1C576D0D"></a>
<h3 id="DBFSG-GUID-7FAC6DD4-6D98-4EBB-A68E-101E1C576D0D" class="sect3">Creating a Simple Application User Account</h3>
<div>
<div class="section">
<div class="infobox-note" id="GUID-7FAC6DD4-6D98-4EBB-A68E-101E1C576D0D__GUID-A9972B3E-67D6-4BE2-8409-4809CA0200F1">
<p class="notep1">Note:</p>
<p>In SQL*Plus, case sensitivity is an issue for lower case characters and special characters, so keep these guidelines in mind.</p>
<ul style="list-style-type: disc;">
<li>
<p>An application user whose name contains lower case or special characters must connect to SQL*Plus with the account name in double quotation marks:</p>
<p>For example:</p>
<pre dir="ltr">CONNECT &#34;lwuser1&#34;
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
<li>
<p>The name of an application role that contains lower case or special characters must be entered in SQL*Plus enclosed in double quotation marks.</p>
<p>For example:</p>
<pre dir="ltr">GRANT cust_role TO &#34;app_regular_role&#34;;
</pre></li>
</ul>
</div>
<p>When you create a simple application user account, the schema argument specifies the schema name to use to resolve unqualified names. This does not give you any privileges, and it is just used for name resolution purposes. If the schema name is not specified, <code class="codeph">XS$NULL</code>, is used.</p>
<p>To create a simple application user account, do the following:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Log in.</span>
<div>
<p>For example, if <code class="codeph">sec_mgr</code> has the <code class="codeph">CREATE USER</code> privilege, log in as follows:</p>
<pre dir="ltr">sqlplus sec_mgr
Enter password: <span class="italic">password</span>
Connected. 
</pre></div>
</li>
<li class="stepexpand"><span>Create the application user account.</span>
<div>
<p>For example:</p>
<pre dir="ltr">BEGIN
  SYS.XS_PRINCIPAL.CREATE_USER(&#39;lwuser1&#39;);
END;
/
</pre>
<p>As a user with <code class="codeph">DBA</code> role, you can check the user creation by querying the <code class="codeph">DBA_XS_USERS</code> data dictionary view as follows. See <span class="q">&#34;<a href="parm_views.htm#GUID-97B36DFE-DA8F-41E3-9141-37C8B0E6E2ED">DBA_XS_USERS</a>&#34;</span> for more information.</p>
<pre dir="ltr">SELECT NAME FROM DBA_XS_USERS;
 
NAME
--------------------------
XSGUEST
LWUSER1
</pre>
<p>This output displays the existing application user accounts. The <code class="codeph">XSGUEST</code> user account is an already existing or predefined system created user account.</p>
<p>For detailed information about the <code class="codeph">XS_PRINCIPAL.CREATE_USER</code> procedure, see <span class="q">&#34;<a href="plsql_pkg.htm#GUID-03D147A5-36A8-4ACE-BDEA-2D7A5D8F046D">CREATE_USER Procedure</a>&#34;</span>.</p>
<p>You can delete an application user account using the <code class="codeph">XS_PRINCIPAL.DELETE_PRINCIPAL</code> procedure, see <span class="q">&#34;<a href="plsql_pkg.htm#GUID-15266CE7-B956-438F-87BB-F5D88EF47DE8">DELETE_PRINCIPAL Procedure</a>&#34;</span>.</p>
</div>
</li>
</ol>
</div>
</div>
<a id="DBFSG99054"></a>
<div class="props_rev_3"><a id="GUID-BADE624E-3134-47BC-8949-FCE7E3086A4B"></a>
<h3 id="DBFSG-GUID-BADE624E-3134-47BC-8949-FCE7E3086A4B" class="sect3">About Creating a Direct Login Application User Account</h3>
<div>
<p>This section contains:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="users_roles.htm#GUID-7D8FB729-6855-4599-BEB8-348D26418684">Creating Direct Login Application User Accounts</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-4463501E-6F61-445B-A028-44ED33C6F084">Procedure for Creating the Direct Login Application User Account</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-6BA62709-3BF9-4DE1-829C-3C4C6EE1B992">Setting a Password Verifier for Direct Application User Accounts</a></p>
</li>
</ul>
</div>
<a id="DBFSG99804"></a>
<div class="props_rev_3"><a id="GUID-7D8FB729-6855-4599-BEB8-348D26418684"></a>
<h4 id="DBFSG-GUID-7D8FB729-6855-4599-BEB8-348D26418684" class="sect4">Creating Direct Login Application User Accounts</h4>
<div>
<div class="section">
<p>You <a id="d7581e1023" class="indexterm-anchor"></a><a id="d7581e1027" class="indexterm-anchor"></a>can use an application user account to directly log into the database. This is useful for users who need to perform functions such as logging directly into SQL*Plus without logging in through SSO or a Web interface. The direct login user must have a password.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="DBFSG99805"></a>
<div class="props_rev_3"><a id="GUID-4463501E-6F61-445B-A028-44ED33C6F084"></a>
<h4 id="DBFSG-GUID-4463501E-6F61-445B-A028-44ED33C6F084" class="sect4">Procedure for Creating the Direct Login Application User Account</h4>
<div>
<div class="section">
<p>To create a direct login application user account:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Log in as described in <span class="q">&#34;<a href="users_roles.htm#GUID-FE5E0C6A-7452-444E-A28F-B54518972EC6">General Procedures for Creating Application User Accounts</a>&#34;</span>.</span>
<div>
<pre dir="ltr">sqlplus sec_mgr
Enter password: password
Connected. 
</pre></div>
</li>
<li class="stepexpand"><span>Create the application user account.</span>
<div>
<p>For example, to create an application user account, <code class="codeph">lwuser1</code>, whose default database schema is <code class="codeph">HR</code>:</p>
<pre dir="ltr">BEGIN
  SYS.XS_PRINCIPAL.CREATE_USER
      (name       =&gt; &#39;lwuser1&#39;,
       schema     =&gt; &#39;HR&#39;);
END;/
</pre>
<div class="infobox-note" id="GUID-4463501E-6F61-445B-A028-44ED33C6F084__GUID-88250F73-E313-489E-9267-1B2775AE9427">
<p class="notep1">Note:</p>
<p>If the schema does not exist, the direct login fails.</p>
</div>
<p>When this Real Application user directly connects to the database for name resolution of unqualified database objects in queries, <code class="codeph">HR</code> schema is used as the default schema. For example:</p>
<pre dir="ltr">SELECT COUNT(*) FROM EMPLOYEES;
</pre></div>
</li>
<li class="stepexpand"><span>Create a password for the application user account.</span>
<div>
<p>For example:</p>
<pre dir="ltr">BEGIN
      SYS.XS_PRINCIPAL.SET_PASSWORD(&#39;lwuser1&#39;, &#39;<span class="italic">password</span>&#39;);
END;
/
</pre>
<p>Set the password as described in <span class="q">&#34;<a href="plsql_pkg.htm#GUID-AB88CD3F-89B0-4C25-A404-D5C8D7FEB1AD">SET_PASSWORD Procedure</a>&#34;</span>. When you use the <code class="codeph">SET_PASSWORD</code> procedure, it creates a verifier for you based on the password and the <code class="codeph">type</code> parameter, and then inserts the verifier and the value of the <code class="codeph">type</code> parameter into the dictionary table.</p>
<div class="infobox-note" id="GUID-4463501E-6F61-445B-A028-44ED33C6F084__GUID-D06E1E06-BBEE-47F2-970E-3364884AA96E">
<p class="notep1">Note:</p>
<p>Replace <span class="italic"><code class="codeph">password</code></span> with a secure password. See <a class="olink DBSEG10005" target="_blank" href="../DBSEG/guidelines.htm#DBSEG10005"><span><cite>Oracle Database Security Guide</cite></span></a> for more information about password guidelines.</p>
</div>
</div>
</li>
<li class="stepexpand"><span>Create a profile named <code class="codeph">prof</code> and assign this profile to the application user account.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CREATE PROFILE prof LIMIT PASSWORD_REUSE_TIME 1/1440 PASSWORD_REUSE_MAX 3 PASSWORD_VERIFY_FUNCTION Verify_Pass;

BEGIN
  SYS.XS_PRINCIPAL.SET_PROFILE(&#39;lwuser1&#39;,&#39;prof&#39;);
END;
</pre>
<p>The user assigning the profile must have <code class="codeph">ALTER_USER</code> privilege. See the <span class="q">&#34;<a href="plsql_pkg.htm#GUID-610D3138-94AF-42FD-B738-B0E86EB7D07F">SET_PROFILE Procedure</a>&#34;</span> for more information.</p>
</div>
</li>
<li class="stepexpand"><span>Grant the role <code class="codeph">XSCONNECT</code> to the user to allow access to the database.</span>
<div>
<div class="p">For example:
<pre dir="ltr">BEGIN
      SYS.XS_PRINCIPAL.GRANT_ROLES(&#39;lwuser1&#39;, &#39;XSCONNECT&#39;);
END;
/
</pre></div>
</div>
</li>
</ol>
<div class="section">
<p>Next, you are ready to assign privileges to the application user account. Go to <span class="q">&#34;<a href="users_roles.htm#GUID-413EB606-55E3-4339-9247-F7814E1ACA31">About Granting Application Privileges to Principals</a>&#34;</span>.</p>
<p>Afterward, the user can connect to the database as follows. For example:</p>
<pre dir="ltr">CONNECT lwuser1
Password: <span class="italic">password</span>
</pre></div>
<!-- class="section" --></div>
</div>
<a id="DBFSG234"></a><a id="DBFSG99806"></a>
<div class="props_rev_3"><a id="GUID-6BA62709-3BF9-4DE1-829C-3C4C6EE1B992"></a>
<h4 id="DBFSG-GUID-6BA62709-3BF9-4DE1-829C-3C4C6EE1B992" class="sect4">Setting a Password Verifier for Direct Application User Accounts</h4>
<div>
<div class="section">
<p>Optionally, you can set a <a href="glossary.htm#GUID-706241A2-7285-4781-9DF2-4B6783B9457B"><span class="xrefglossterm">password verifier</span></a> for this password (a hash transformed password), enabling administrators to migrate users into Real Application Security with knowledge of the verifier and not the password. If you do not set a password verifier, the default hashing algorithm is <code class="codeph">XS_SHA512</code>. For more information, see the <span class="q">&#34;<a href="plsql_pkg.htm#GUID-3AF5137E-08F5-44D3-8045-E8CED5AD892A">SET_VERIFIER Procedure</a>&#34;</span>.</p>
<p><a href="users_roles.htm#GUID-6BA62709-3BF9-4DE1-829C-3C4C6EE1B992__CJAFIGFF">Example 2-1</a> uses the <code class="codeph">XS_PRINCIPAL.SET_VERIFIER</code> procedure to set the password verifier to the value <code class="codeph">6DFF060084ECE67F</code>, using the hashing algorithm <code class="codeph">XS_SHA512</code> for the application user account <code class="codeph">LWUSER1</code>.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-6BA62709-3BF9-4DE1-829C-3C4C6EE1B992__CJAFIGFF">
<p class="titleinexample">Example 2-1 Setting the Password Verifier Using the Hash Algorithm XS_SHA512</p>
<pre dir="ltr">sqlplus sec_mgr
Enter password: password
Connected. 
</pre>
<pre dir="ltr">BEGIN
SYS.XS_PRINCIPAL.SET_VERIFIER(&#39;lwuser1&#39;,
 &#39;<span class="bold">6DFF060084ECE67F</span>&#39;,
  XS_PRINCIPAL.XS_SHA512);
END;
/
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="DBFSG839"></a><a id="DBFSG840"></a><a id="DBFSG841"></a><a id="DBFSG838"></a>
<div class="props_rev_3"><a id="GUID-7940BF68-53EA-4068-89CB-679A63C412D9"></a>
<h3 id="DBFSG-GUID-7940BF68-53EA-4068-89CB-679A63C412D9" class="sect3">Resetting the Application User&#39;s Password with the SQL*Plus PASSWORD Command</h3>
<div>
<div class="section">
<p>As the security administrator, <code class="codeph">sec_mgr</code>, you have the <code class="codeph">dba</code> and <code class="codeph">xs_session_admin</code> privileges. <a href="users_roles.htm#GUID-7940BF68-53EA-4068-89CB-679A63C412D9__CHDIFGDC">Example 2-2</a> shows how the security administrator can reset the password for user <code class="codeph">lwuser2</code> using the SQL*Plus <code class="codeph">PASSWORD</code> command.</p>
<p>However, if you as user <code class="codeph">lwuser2</code>, perform a self password change using the SQL*Plus <code class="codeph">PASSWORD</code> command invoked from an explicitly attached session (a session attached using the <code class="codeph">ATTACH_SESSION</code> procedure or the <code class="codeph">attachSession()</code> method in Java), the session must have the <code class="codeph">ALTER USER</code> privilege and the user name must be provided with the <code class="codeph">PASSWORD</code> command.</p>
<p><a href="users_roles.htm#GUID-7940BF68-53EA-4068-89CB-679A63C412D9__CHDJBAEB">Example 2-3</a> shows how the application user <code class="codeph">lwuser2</code> explicitly attached to a session, performs a self password change that fails because the users session does not have the <code class="codeph">ALTER USER</code> privilege.</p>
<p><a href="users_roles.htm#GUID-7940BF68-53EA-4068-89CB-679A63C412D9__CHDEDDAA">Example 2-4</a> shows how an application user <code class="codeph">lwuser2</code> explicitly attached to a session having the <code class="codeph">ALTER USER</code> privilege can perform a self password change. The user&#39;s self password change is successful.</p>
<p>If the user&#39;s session has the <code class="codeph">ALTER USER</code> privilege, you can reset the password for any application user from any application user&#39;s session (including an explicitly attached and a direct logon session) or the database user session if that session has the <code class="codeph">ALTER USER</code> privilege. The <code class="codeph">PASSWORD</code> command never prompts for the old password if you are changing another application user&#39;s password.</p>
<p>An application user can also change his or her own password using the <code class="codeph">SET_PASSWORD</code> procedure. The <code class="codeph">SET_PASSWORD</code> procedure will always prompt for the old password for a self password change.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-7940BF68-53EA-4068-89CB-679A63C412D9__CHDIFGDC">
<p class="titleinexample">Example 2-2 DBA Resets the Password with a Password Change Operation for User lwuser2 When Not Explicitly Attached to a Session</p>
<pre dir="ltr">sqlplus sec_mgr
Enter password: <span class="italic">password</span>
Connected. 
SQL&gt; BEGIN
  2 SYS.XS_PRINCIPAL.CREATE_USER(&#39;lwuser2&#39;);
  3 END;
  4/

PL/SQL orocedure successfully completed.

SQL&gt; PASSWORD lwuser2
Changing password for lwuser2
New password: <span class="italic">password</span>
Retype new password: <span class="italic">password</span>
Password changed
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-7940BF68-53EA-4068-89CB-679A63C412D9__CHDJBAEB">
<p class="titleinexample">Example 2-3 User lwuser2 Performs a Self Password Change that Fails When Explicitly Attached to a Session Because the Session Lacks the ALTER USER Privilege</p>
<pre dir="ltr">sqlplus sec_mgr
Enter password: <span class="italic">password</span>
Connected. 
SQL&gt; DECLARE
  2 SESSIONID RAW(16);
  3 BEGIN
  4 SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser2&#39;, sessionid);
  5 SYS.DBMS_XS_SESSIONS.ATTACH_SESSION(sessionid);
  6 END;
  7 /
 
PL/SQL procedure successfully completed.

SQL&gt; CONNECT lwuser2
Enter password: <span class="italic">password</span>
Connected.
SQL&gt; SELECT SYS.XS_SYS_CONTEXT(&#39;XS$SESSION&#39;,&#39;USERNAME&#39;) FROM DUAL;
 
XS_SYS_CONTEXT(&#39;XS$SESSION&#39;,&#39;USERNAME&#39;)
--------------------------------------------------------------------------------
LWUSER2
 
SQL&gt; PASSWORD lwuser2
Changing password for lwuser2

Old password: <span class="italic">password</span>
New password: <span class="italic">password</span>
Retype new password: <span class="italic">password</span>
ERROR:
ORA-01031: insufficient privileges


Password unchanged
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-7940BF68-53EA-4068-89CB-679A63C412D9__CHDEDDAA">
<p class="titleinexample">Example 2-4 A Self Password Change Succeeds When Explicitly Attached to a Session and User lwuser2&#39;s Session Has the ALTER USER Privilege</p>
<pre dir="ltr">sqlplus sec_mgr
Enter password: <span class="italic">password</span>
Connected. 
SQL&gt; CREATE ROLE pwdchg;
 
Role created.
 
SQL&gt; GRANT ALTER USER TO pwdchg;
 
Grant succeeded.
 
SQL&gt; EXEC SYS.XS_PRINCIPAL.CREATE_ROLE(NAME =&gt; &#39;resetpwd_role&#39;, ENABLED =&gt; TRUE);
 
PL/SQL procedure successfully completed.
 
SQL&gt; GRANT pwdchg TO resetpwd_role;
 
Grant succeeded.
 
SQL&gt;  EXEC SYS.XS_PRINCIPAL.GRANT_ROLES(&#39;lwuser2&#39;,&#39;resetpwd_role&#39;);
 
PL/SQL procedure successfully completed.
 
SQL&gt; CONNECT lwuser2
Enter password: <span class="italic">password</span>
Connected.

SQL&gt; SELECT SYS.XS_SYS_CONTEXT(&#39;XS$SESSION&#39;,&#39;USERNAME&#39;) FROM DUAL;
 
SYS.XS_SYS_CONTEXT(&#39;XS$SESSION&#39;,&#39;USERNAME&#39;)
--------------------------------------------------------------------------------
LWUSER2

SQL&gt; PASSWORD lwuser2
Changing password for lwuser2
Old password: <span class="italic">password</span>
New password: <span class="italic">password</span>
Retype new password: <span class="italic">password</span>
Password changed
SQL&gt;
</pre></div>
<!-- class="example" --></div>
</div>
<a id="DBFSG252"></a><a id="DBFSG254"></a><a id="DBFSG99055"></a>
<div class="props_rev_3"><a id="GUID-B5204FD3-0048-4A5D-A2C1-0E7996FF25BE"></a>
<h3 id="DBFSG-GUID-B5204FD3-0048-4A5D-A2C1-0E7996FF25BE" class="sect3">Configuring an Application User Switch</h3>
<div>
<div class="section">
<p>Using the <code class="codeph">XS_PRINCIPAL.ADD_PROXY_USER</code> procedure, you <a id="d7581e1791" class="indexterm-anchor"></a>can add an application user to proxy another <a id="d7581e1796" class="indexterm-anchor"></a>application user and assume the application roles of that application user. You can use the <code class="codeph">DBMS_XS_SESSIONS.SWITCH_USER</code> procedure to switch application users in a session if the user has been added as a proxy.</p>
<p>Assume <code class="codeph">app_user1</code> has application roles <code class="codeph">role1</code> and <code class="codeph">role2</code>. <a href="users_roles.htm#GUID-B5204FD3-0048-4A5D-A2C1-0E7996FF25BE__CJAEJEEG">Example 2-5</a> allows you to proxy the application roles <code class="codeph">role1</code> and <code class="codeph">role2</code> of <code class="codeph">app_user1</code> to <code class="codeph">app_user2</code>. The call <code class="codeph">add_proxy_user(&#39;app_user1&#39;, &#39;app_user2&#39;, pxy_roles)</code> allows <code class="codeph">app_user2</code> to switch to <code class="codeph">app_user1</code> and assume <code class="codeph">app_user1</code>&#39;s roles, <code class="codeph">role1</code> and <code class="codeph">role2</code>. It does not grant the roles to <code class="codeph">app_user2</code>.</p>
<p>The query of view <code class="codeph">DBA_XS_ROLE_GRANTS</code> shows that roles, <code class="codeph">roles1</code> and <code class="codeph">roles2</code> are still only granted to <code class="codeph">app_user1</code> and not to <code class="codeph">app_user2</code>, and that <code class="codeph">app_user2</code> only assumed these roles as a proxy user.</p>
<p>The query of view <code class="codeph">DBA_XS_PROXY_ROLES</code> shows that <code class="codeph">app_user2</code> is the proxy user, <code class="codeph">app_user1</code> is the target user, and the target roles are <code class="codeph">role1</code> and <code class="codeph">role2</code>.</p>
<p>The query of view <code class="codeph">DBA_XS_SESSIONS</code> also shows that <code class="codeph">app_user2</code> is the proxy user in this session.</p>
<p>As the application user with DBA role, you can create a session for <code class="codeph">app_user2</code> and switch <a id="d7581e1905" class="indexterm-anchor"></a>application user to <code class="codeph">app_user1</code>, as shown in <a href="users_roles.htm#GUID-B5204FD3-0048-4A5D-A2C1-0E7996FF25BE__CJACEJBC">Example 2-6</a>.</p>
<p>This example first creates a session with <code class="codeph">app_user2</code> and attaches to it. Then <code class="codeph">app_user2</code> switches to <code class="codeph">app_user1</code> and assumes <code class="codeph">app_user1</code>&#39;s roles, <code class="codeph">role1</code> and <code class="codeph">role2</code>.</p>
<p>The query of view <code class="codeph">DBA_XS_ROLE_GRANTS</code> shows that roles, <code class="codeph">roles1</code> and <code class="codeph">roles2</code> are still only granted to <code class="codeph">app_user1</code> and not to <code class="codeph">app_user2</code>, and that <code class="codeph">app_user2</code> only assumed these roles as a proxy user.</p>
<p>The query of view <code class="codeph">DBA_XS_SESSION_ROLES</code> shows that roles <code class="codeph">role1</code> and <code class="codeph">role2</code> are associated with the same session ID in which <code class="codeph">app_user1</code> was switched with <code class="codeph">app_user2</code>.</p>
<p>The query of view <code class="codeph">DBA_XS_SESSIONS</code> also shows that <code class="codeph">app_user2</code> is the proxy user in this session.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-B5204FD3-0048-4A5D-A2C1-0E7996FF25BE__CJAEJEEG">
<p class="titleinexample">Example 2-5 Configuring a Proxy Application User</p>
<pre dir="ltr">sqlplus sec_mgr
Enter password: password
Connected. 
</pre>
<pre dir="ltr">SQL&gt; EXEC SYS.XS_PRINCIPAL.CREATE_ROLE(&#39;role1&#39;,true);
SQL&gt; EXEC SYS.XS_PRINCIPAL.CREATE_ROLE(&#39;role2&#39;,true);
</pre>
<pre dir="ltr">SQL&gt; EXEC SYS.XS_PRINCIPAL.CREATE_USER(&#39;app_user1&#39;,&#39;HR&#39;);
SQL&gt; EXEC SYS.XS_PRINCIPAL.SET_PASSWORD(&#39;app_user1&#39;, &#39;password&#39;);
SQL&gt; EXEC SYS.XS_PRINCIPAL.CREATE_USER(&#39;app_user2&#39;,&#39;HR&#39;);
SQL&gt; EXEC SYS.XS_PRINCIPAL.SET_PASSWORD(&#39;app_user2&#39;, &#39;password&#39;);
</pre>
<pre dir="ltr">SQL&gt; EXEC SYS.XS_PRINCIPAL.GRANT_ROLES(&#39;app_user1&#39;, &#39;role1&#39;);
SQL&gt; EXEC SYS.XS_PRINCIPAL.GRANT_ROLES(&#39;app_user1&#39;, &#39;role2&#39;);
</pre>
<pre dir="ltr">DECLARE
  pxy_roles XS$NAME_LIST; 
begin
  pxy_roles := XS$NAME_LIST(&#39;role1&#39;,&#39;role2&#39;);
  sys.xs_principal.add_proxy_user(target_user =&gt; &#39;app_user1&#39;, proxy_user =&gt; &#39;app_user2&#39;, target_roles =&gt; pxy_roles);
end;
/
</pre>
<pre dir="ltr">SQL&gt; SELECT grantee, granted_role FROM DBA_XS_ROLE_GRANTS;
</pre>
<pre dir="ltr">SQL&gt; SELECT proxy_user, target_user, target_role FROM DBA_XS_PROXY_ROLES;
</pre>
<pre dir="ltr">SQL&gt; SELECT user_name, sessionid, proxy_user FROM DBA_XS_SESSIONS;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-B5204FD3-0048-4A5D-A2C1-0E7996FF25BE__CJACEJBC">
<p class="titleinexample">Example 2-6 Creating a Session and Switching an Application User</p>
<pre dir="ltr">sqlplus sec_mgr
Enter password: password
Connected. 
SQL&gt; EXEC SYS.XS_PRINCIPAL.CREATE_USER(&#39;app_user1&#39;,&#39;HR&#39;);
SQL&gt; EXEC SYS.XS_PRINCIPAL.SET_PASSWORD(&#39;app_user1&#39;, &#39;password&#39;);
SQL&gt; EXEC SYS.XS_PRINCIPAL.CREATE_USER(&#39;app_user2&#39;,&#39;HR&#39;);
SQL&gt; EXEC SYS.XS_PRINCIPAL.SET_PASSWORD(&#39;app_user2&#39;, &#39;password&#39;);
</pre>
<pre dir="ltr">SQL&gt; EXEC SYS.XS_PRINCIPAL.CREATE_ROLE(&#39;role1&#39;,true);
SQL&gt; EXEC SYS.XS_PRINCIPAL.CREATE_ROLE(&#39;role2&#39;,true);
</pre>
<pre dir="ltr">SQL&gt; EXEC SYS.XS_PRINCIPAL.CREATE_USER(&#39;app_user1&#39;,&#39;HR&#39;);
SQL&gt; EXEC SYS.XS_PRINCIPAL.SET_PASSWORD(&#39;app_user1&#39;, &#39;password&#39;);
SQL&gt; EXEC SYS.XS_PRINCIPAL.CREATE_USER(&#39;app_user2&#39;,&#39;HR&#39;);
SQL&gt; EXEC SYS.XS_PRINCIPAL.SET_PASSWORD(&#39;app_user2&#39;, &#39;password&#39;);
</pre>
<pre dir="ltr">SQL&gt; EXEC SYS.XS_PRINCIPAL.GRANT_ROLES(&#39;app_user1&#39;, &#39;role1&#39;);
SQL&gt; EXEC SYS.XS_PRINCIPAL.GRANT_ROLES(&#39;app_user1&#39;, &#39;role2&#39;);
</pre>
<pre dir="ltr">declare
  sessionid raw(16);
begin
  sys.dbms_xs_sessions.create_session(&#39;app_user2&#39;, sessionid);
  sys.dbms_xs_sessions.attach_session(sessionid);
  sys.dbms_xs_sessions.switch_user(&#39;app_user1&#39;);
end;
/
</pre>
<pre dir="ltr">SQL&gt; SELECT grantee, granted_role FROM DBA_XS_ROLE_GRANTS;
</pre>
<pre dir="ltr">SQL&gt; SELECT sessionid, role FROM DBA_XS_SESSION_ROLES;
</pre>
<pre dir="ltr">SQL&gt; SELECT user_name, sessionid, proxy_user FROM DBA_XS_SESSIONS;
</pre></div>
<!-- class="example" --></div>
</div>
<a id="DBFSG99058"></a>
<div class="props_rev_3"><a id="GUID-C9D5D045-7604-4771-AA58-A5F7DE702EC1"></a>
<h3 id="DBFSG-GUID-C9D5D045-7604-4771-AA58-A5F7DE702EC1" class="sect3">Validating an Application User</h3>
<div>
<div class="section">
<p>Oracle recommends that you always validate the Real Application Security objects after administrative configuration changes. The <code class="codeph">XS_DIAG</code> package provides a set of validation APIs to help ensure that these changes do not damage the complicated relationships among your Real Application Security objects. To validate an application user account, use the <code class="codeph">XS_DIAG.VALIDATE_PRINCIPAL</code> function. The caller has invoker&#39;s rights on this package and must have <code class="codeph">ADMIN_ANY_SEC_SECURITY</code> privilege to run the <code class="codeph">XS_DIAG</code> package.</p>
<p>See the <span class="q">&#34;<a href="plsql_pkg.htm#GUID-5E0D77E1-EF27-49B6-AF38-C5C2F94C0AB1">VALIDATE_PRINCIPAL Function</a>&#34;</span> for more information.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="DBFSG20022"></a>
<div class="props_rev_3"><a id="GUID-349C89E8-DC1D-4641-898D-F8B8B94B79B8"></a>
<h2 id="DBFSG-GUID-349C89E8-DC1D-4641-898D-F8B8B94B79B8" class="sect2">About Configuring Application Roles</h2>
<div>
<p>This section contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="users_roles.htm#GUID-9AF42A31-752B-4020-B3C1-BBDBF31537CA">About Application Roles</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-06D95E44-F752-44CB-B8AC-89CBD5405053">Regular and Dynamic Application Roles</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-70AF6228-27BB-4F50-8FBE-20277F5875DA">About Configuring an Application Role</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-D627A919-536B-4F3A-B6A3-911791B91566">Predefined Regular Application Roles and Dynamic Application Roles</a></p>
</li>
</ul>
</div>
<a id="DBFSG99061"></a>
<div class="props_rev_3"><a id="GUID-9AF42A31-752B-4020-B3C1-BBDBF31537CA"></a>
<h3 id="DBFSG-GUID-9AF42A31-752B-4020-B3C1-BBDBF31537CA" class="sect3">About Application Roles</h3>
<div>
<p>An application role is a role that can only be granted to an application user or to another application role. Application roles provide a way to group application users who must have a common application privilege, identified within an ACL, in order to access an application. The <code class="codeph">XS_PRINCIPAL.CREATE_ROLE</code> procedure can create regular application roles. The <code class="codeph">XS_PRINCIPAL.CREATE_DYNAMIC_ROLE</code> procedure can create dynamic application roles (one type of application role).</p>
<p>Application roles are conceptually similar to enterprise roles. An enterprise role can only be granted to an enterprise user and that grant occurs outside the database. Similarly, an application role can only be granted to an application user or application role, and that grant occurs outside of the standard database grant mechanisms. Dynamic roles cannot be granted to an application user or another application role, but can only be enabled in an application session as a parameter in an attach session call as described in <span class="q">&#34;<a href="users_roles.htm#GUID-B2ED6DE8-38B8-4E57-A360-E44007ACCB7D">Dynamic Application Roles</a>&#34;</span>.</p>
<div class="infoboxnotealso" id="GUID-9AF42A31-752B-4020-B3C1-BBDBF31537CA__GUID-AD2E7177-B848-441D-9EDB-710496F66EFB">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF01311" target="_blank" href="../SQLRF/statements_6014.htm#SQLRF01311"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for more information about SQL</p>
</li>
<li>
<p><a class="olink LNPLS-GUID-285DFAEE-1A34-4248-BA4B-2591476A0C3C" target="_blank" href="../LNPLS/langelems.htm#LNPLS-GUID-285DFAEE-1A34-4248-BA4B-2591476A0C3C"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a> for more information about PL/SQL APIs</p>
</li>
</ul>
</div>
</div>
</div>
<a id="DBFSG255"></a>
<div class="props_rev_3"><a id="GUID-06D95E44-F752-44CB-B8AC-89CBD5405053"></a>
<h3 id="DBFSG-GUID-06D95E44-F752-44CB-B8AC-89CBD5405053" class="sect3">Regular and Dynamic Application Roles</h3>
<div>
<p>Real Application Security allows regular and dynamic application roles.</p>
<div class="p">This section contains the following topics:
<ul style="list-style-type: disc;">
<li>
<p><a href="users_roles.htm#GUID-5C540286-12E2-4D49-87FE-3BE0764820FE">Regular Application Roles</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-B2ED6DE8-38B8-4E57-A360-E44007ACCB7D">Dynamic Application Roles</a></p>
</li>
</ul>
</div>
</div>
<a id="DBFSG288"></a>
<div class="props_rev_3"><a id="GUID-5C540286-12E2-4D49-87FE-3BE0764820FE"></a>
<h4 id="DBFSG-GUID-5C540286-12E2-4D49-87FE-3BE0764820FE" class="sect4">Regular Application Roles</h4>
<div>
<p>A <a id="d7581e2664" class="indexterm-anchor"></a><a id="d7581e2668" class="indexterm-anchor"></a><a id="d7581e2670" class="indexterm-anchor"></a>regular application role is an application role that you can grant to an application user or another application role (regular or dynamic). You can specify if you want the regular application role to be enabled by default or not.</p>
</div>
</div>
<a id="DBFSG289"></a>
<div class="props_rev_3"><a id="GUID-B2ED6DE8-38B8-4E57-A360-E44007ACCB7D"></a>
<h4 id="DBFSG-GUID-B2ED6DE8-38B8-4E57-A360-E44007ACCB7D" class="sect4">Dynamic Application Roles</h4>
<div>
<p>A dynamic application role is an application role that is enabled only under certain situations, for example, when a user has logged on using SSL, or during a specific period of time, and so on. Dynamic application roles might be used, for example, if there is some application privilege granted to all application users connecting during weekdays. If that criterion is met, then the application enables those application roles.</p>
<p>The application determines the criteria for enabling a dynamic application role, however the criteria can be evaluated by the application or by the database at the request of the application.</p>
<ul style="list-style-type: disc;">
<li>
<p>When the Application Evaluates the Criteria</p>
<p>If the application evaluates the criteria and the application role meets it, then the application, if it is attached to an application session, can enable dynamic application roles for application users. When the application detaches from the application session, the dynamic application role is automatically disabled.</p>
<p>For security reasons, you cannot disable dynamic application roles during the session. This is especially important because they may infer negative application privileges.</p>
</li>
<li>
<p>When the Database Evaluates the Criteria</p>
<p>If the database evaluates the criteria and the application role meets it, then the database can enable application roles for the application user. The database can disable dynamic application roles based on two types of time-outs: one from the last time the session was accessed, and one from the last time the session was authenticated. Oracle Database checks these time-outs when the session is first attached.</p>
</li>
</ul>
<p>You do not need to grant the dynamic application role formally to a user beforehand. There is no way to enable or disable a dynamic application role through the standard enable and disable APIs. You cannot grant dynamic application roles to other application roles, but you can grant other application roles to dynamic roles.</p>
<div class="infoboxnotealso" id="GUID-B2ED6DE8-38B8-4E57-A360-E44007ACCB7D__GUID-6B2162F7-C6E5-4842-8C27-05C5D9D0FE7C">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="users_roles.htm#GUID-D627A919-536B-4F3A-B6A3-911791B91566">Predefined Regular Application Roles and Dynamic Application Roles</a>&#34;</span></p>
</div>
</div>
</div>
</div>
<a id="DBFSG99063"></a>
<div class="props_rev_3"><a id="GUID-70AF6228-27BB-4F50-8FBE-20277F5875DA"></a>
<h3 id="DBFSG-GUID-70AF6228-27BB-4F50-8FBE-20277F5875DA" class="sect3">About Configuring an Application Role</h3>
<div>
<div class="p">This section contains the following topics:
<ul style="list-style-type: disc;">
<li>
<p><a href="users_roles.htm#GUID-863E8BD2-B07C-4E1B-B473-DF490D75F7DF">Creating a Regular Application Role</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-8493761A-71A2-4602-9909-9B46208E41BA">Creating a Dynamic Application Role</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-25776BDE-57D3-4057-B39E-3E769D7176F0">Validating an Application Role</a></p>
</li>
</ul>
</div>
</div>
<a id="DBFSG99065"></a><a id="DBFSG99064"></a>
<div class="props_rev_3"><a id="GUID-863E8BD2-B07C-4E1B-B473-DF490D75F7DF"></a>
<h4 id="DBFSG-GUID-863E8BD2-B07C-4E1B-B473-DF490D75F7DF" class="sect4">Creating a Regular Application Role</h4>
<div>
<div class="section">
<p>To create a regular application role, log into SQL*Plus as user <code class="codeph">sec_mgr</code> with the <code class="codeph">CREATE ROLE</code> system privilege, and then use the <code class="codeph">XS_PRINCIPAL.CREATE_ROLE</code> procedure.</p>
<p><a href="users_roles.htm#GUID-863E8BD2-B07C-4E1B-B473-DF490D75F7DF__CIHFBFAG">Example 2-7</a> shows how to create a regular application role called <code class="codeph">app_regular_role</code>. The <code class="codeph">start_date</code> and <code class="codeph">end_date</code> parameters specify the active start and end times for this application role. The <code class="codeph">enable</code> parameter is set to <code class="codeph">TRUE</code>.</p>
<p>After you create the regular application role, you are ready to grant it to one or more application users or application roles. See the following section:</p>
<p><span class="q">&#34;<a href="users_roles.htm#GUID-6D1B34A7-28D4-4334-BAEE-975E4701969D">About Granting an Application Role to an Application User</a>&#34;</span></p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-863E8BD2-B07C-4E1B-B473-DF490D75F7DF__CIHFBFAG">
<p class="titleinexample">Example 2-7 Creating a Regular Application Role</p>
<pre dir="ltr">sqlplus sec_mgr
Enter password: password
Connected. 
</pre>
<pre dir="ltr">DECLARE 
  st_date TIMESTAMP WITH TIME ZONE;
  ed_date TIMESTAMP WITH TIME ZONE;
BEGIN
  st_date := SYSTIMESTAMP;
  ed_date := TO_TIMESTAMP_TZ(&#39;2013-06-18 11:00:00 -5:00&#39;,&#39;YYYY-MM-DD HH:MI:SS&#39;);
  SYS.XS_PRINCIPAL.CREATE_ROLE 
    <span class="bold">  (name        =&gt; &#39;app_regular_role&#39;,</span>
      enabled      =&gt;  TRUE,
      start_date   =&gt;  st_date,
      end_date     =&gt;  ed_date);
END;
/
</pre></div>
<!-- class="example" --></div>
</div>
<a id="DBFSG99067"></a><a id="DBFSG99066"></a>
<div class="props_rev_3"><a id="GUID-8493761A-71A2-4602-9909-9B46208E41BA"></a>
<h4 id="DBFSG-GUID-8493761A-71A2-4602-9909-9B46208E41BA" class="sect4">Creating a Dynamic Application Role</h4>
<div>
<div class="section">
<p>To create a <a id="d7581e3214" class="indexterm-anchor"></a><a id="d7581e3218" class="indexterm-anchor"></a>dynamic application role, log into SQL*Plus as user <code class="codeph">sec_mgr</code> with the <code class="codeph">CREATE ROLE</code> system privilege and then <a id="d7581e3229" class="indexterm-anchor"></a>use the <code class="codeph">XS_PRINCIPAL.CREATE_DYNAMIC_ROLE</code> procedure.</p>
<p><a href="users_roles.htm#GUID-8493761A-71A2-4602-9909-9B46208E41BA__CIHCFJIE">Example 2-8</a> shows how to create a dynamic application role called <code class="codeph">app_dynamic_role</code>. The optional <code class="codeph">duration</code> parameter specifies the period of time (in minutes) the application role is active. The <code class="codeph">scope</code> parameter specifies the scope for this role, which can be either <code class="codeph">SESSION_SCOPE</code> (the default value) or <code class="codeph">REQUEST_SCOPE</code>. <code class="codeph">SESSION_SCOPE</code> means the enabled dynamic role is still enabled when you detach the session and attach to the session again, unless you explicitly specify that it be disabled in the session reattach. <code class="codeph">REQUEST_SCOPE</code> means that the role is disabled after the session is detached.</p>
<p>In this example, the dynamic application role is active for 40 minutes, and the scope is set to <code class="codeph">SESSION_SCOPE</code> for the current application session. So the dynamic application role is active even when you detach the session and attach to the session again as long as the time limit has not exceeded 40 minutes after having created the dynamic application role.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-8493761A-71A2-4602-9909-9B46208E41BA__CIHCFJIE">
<p class="titleinexample">Example 2-8 Creating a Dynamic Application Role</p>
<pre dir="ltr">sqlplus sec_mgr
Enter password: password
Connected. 
</pre>
<pre dir="ltr">BEGIN
  <span class="bold">SYS.XS_PRINCIPAL.CREATE_DYNAMIC_ROLE</span>
      <span class="bold">(name         =&gt; &#39;app_dynamic_role&#39;</span>,
      duration      =&gt; 40,
      scope         =&gt; XS_PRINCIPAL.SESSION_SCOPE);
END;
/
</pre></div>
<!-- class="example" --></div>
</div>
<a id="DBFSG99068"></a>
<div class="props_rev_3"><a id="GUID-25776BDE-57D3-4057-B39E-3E769D7176F0"></a>
<h4 id="DBFSG-GUID-25776BDE-57D3-4057-B39E-3E769D7176F0" class="sect4">Validating an Application Role</h4>
<div>
<div class="section">
<p>Oracle recommends that you should always validate Real Application Security objects after administrative configuration changes. The <code class="codeph">XS_DIAG</code> package provides a set of validation APIs to help ensure that these changes do not damage the complicated relationships among your Real Application Security objects. To validate an application role, use the <code class="codeph">XS_DIAG.VALIDATE_PRINCIPAL</code> function. See the <span class="q">&#34;<a href="plsql_pkg.htm#GUID-5E0D77E1-EF27-49B6-AF38-C5C2F94C0AB1">VALIDATE_PRINCIPAL Function</a>&#34;</span> for more information.</p>
<p>See <a href="troubleshooting.htm#GUID-B5B42EA3-D8A1-4F84-9C39-727A473733D0">Troubleshooting Oracle Database Real Application Security</a> for troubleshooting advice.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="DBFSG290"></a>
<div class="props_rev_3"><a id="GUID-D627A919-536B-4F3A-B6A3-911791B91566"></a>
<h3 id="DBFSG-GUID-D627A919-536B-4F3A-B6A3-911791B91566" class="sect3">Predefined Regular Application Roles and Dynamic Application Roles</h3>
<div>
<p>Using predefined dynamic application roles in a Real Application Security session, application users can acquire application privileges based on their run-time states. These application roles cannot be acquired by grants.</p>
<p>As an example, an application role may be enabled for application users connecting from within the corporate firewall, which grants application users more application privileges than connecting from outside the firewall.</p>
<p>See <span class="q">&#34;<a href="predefined_components.htm#GUID-FC441B5C-2741-48BA-940E-DC1EFC2FD450">Roles</a>&#34;</span> for a description of Real Application Security predefined regular application roles, dynamic application roles, and database roles.</p>
<p>Regular application roles can be granted to an application user, but dynamic application roles cannot. Dynamic application roles are enabled based on user state.</p>
<p>See <span class="q">&#34;<a href="users_roles.htm#GUID-06D95E44-F752-44CB-B8AC-89CBD5405053">Regular and Dynamic Application Roles</a>&#34;</span> for descriptions.</p>
</div>
</div>
</div>
<a id="DBFSG99078"></a><a id="DBFSG99079"></a><a id="DBFSG99077"></a>
<div class="props_rev_3"><a id="GUID-AF9250D6-C579-4F8A-B210-AF357F42FA6F"></a>
<h2 id="DBFSG-GUID-AF9250D6-C579-4F8A-B210-AF357F42FA6F" class="sect2">Effective Dates for Application Users and Application Roles</h2>
<div>
<div class="section">
<p>You can specify effective dates for application users, application roles, and role grants. The application user or <a id="d7581e3667" class="indexterm-anchor"></a><a id="d7581e3671" class="indexterm-anchor"></a>application role is available only within the period defined by the effective start and end date. <a href="users_roles.htm#GUID-AF9250D6-C579-4F8A-B210-AF357F42FA6F__CJAEIHCH">Example 2-9</a> shows <a id="d7581e3678" class="indexterm-anchor"></a>how effective dates are specified for an application user.</p>
<p>Sometimes the effective date restriction does not need to be an attribute of an application user or application role. Instead, it is only needed to restrict the effective dates on a per role grant basis. In this case, you can specify beginning and ending effective dates for an application role grant. This only constrains that particular application role grant and allows for implementing fine-grained access control policy. <a href="users_roles.htm#GUID-AF9250D6-C579-4F8A-B210-AF357F42FA6F__CJAGFABH">Example 2-10</a> shows how effective dates are specified for an application role.</p>
<p>These are the most direct consequences of effective date restrictions:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>If an application user is not currently effective (that is, within the period defined by its start and end date), the session for the particular application user cannot be created.</p>
</li>
<li>
<p>If an application role is not currently effective, the application role (and any descendants) is not be available to the application user in the session.</p>
</li>
<li>
<p>For application roles that are shared children of multiple application roles, the child application roles are available as long as there is at least one parent that is effective.</p>
</li>
<li>
<p>If the application role grant of an application role is not currently effective, the application role (and any descendants) is not available to the application user or application role to which it is granted.</p>
</li>
</ul>
<div class="infobox-note" id="GUID-AF9250D6-C579-4F8A-B210-AF357F42FA6F__GUID-740A4879-866E-4553-8FEC-819F75BF8ED4">
<p class="notep1">Note:</p>
<p>The effective dates should be used in the policy after a careful consideration of the nature of the restrictions that they impose on the use of application users and application roles.</p>
</div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-AF9250D6-C579-4F8A-B210-AF357F42FA6F__CJAEIHCH">
<p class="titleinexample">Example 2-9 Setting Effective Dates for an Application User</p>
<pre dir="ltr">sqlplus sec_mgr
Enter password: password
Connected. 
</pre>
<pre dir="ltr">DECLARE
 startDate TIMESTAMP := TO_TIMESTAMP (
      &#39;2012-01-01 11:00:00&#39;,&#39;YYYY-MM-DD HH:MI:SS&#39;);
 endDate TIMESTAMP := TO_TIMESTAMP (
      &#39;2013-01-01 11:00:00&#39;,&#39;YYYY-MM-DD HH:MI:SS&#39;);

BEGIN
  SYS.XS_PRINCIPAL.CREATE_USER
      (name        =&gt; &#39;lwuser1&#39;,
      start_date   =&gt; startDate,
      end_date     =&gt; endDate);
END;
/
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-AF9250D6-C579-4F8A-B210-AF357F42FA6F__CJAGFABH">
<p class="titleinexample">Example 2-10 Setting Effective Dates for an Application Role of an Application User</p>
<pre dir="ltr">sqlplus sec_mgr
Enter password: password
Connected. 
</pre>
<pre dir="ltr">DECLARE
 startDate TIMESTAMP := TO_TIMESTAMP (&#39;2012-01-01 11:00:00&#39;,&#39;YYYY-MM-DD
 HH:MI:SS&#39;);
 endDate TIMESTAMP := TO_TIMESTAMP (&#39;2013-01-01 11:00:00&#39;,&#39;YYYY-MM-DD
 HH:MI:SS&#39;);
BEGIN
  SYS.XS_PRINCIPAL.GRANT_ROLES
    (grantee      =&gt; &#39;lwuser1&#39;,
     role         =&gt; &#39;app_regular_role&#39;,
     start_date   =&gt; startDate,
     end_date     =&gt; endDate);
END;
/
</pre></div>
<!-- class="example" --></div>
</div>
<a id="DBFSG99080"></a>
<div class="props_rev_3"><a id="GUID-413EB606-55E3-4339-9247-F7814E1ACA31"></a>
<h2 id="DBFSG-GUID-413EB606-55E3-4339-9247-F7814E1ACA31" class="sect2">About Granting Application Privileges to Principals</h2>
<div>
<div class="p">This section contains the following topics:
<ul style="list-style-type: disc;">
<li>
<p><a href="users_roles.htm#GUID-6D1B34A7-28D4-4334-BAEE-975E4701969D">About Granting an Application Role to an Application User</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-DAD55007-5D55-4034-A8C8-A913FD1165FA">Granting an Application Role to Another Application Role</a></p>
</li>
<li>
<p><a href="users_roles.htm#GUID-A94AF3CD-8E27-4F26-8306-7A477F0DDA5F">Granting a Database Role to an Application Role</a></p>
</li>
</ul>
</div>
</div>
<a id="DBFSG99081"></a>
<div class="props_rev_3"><a id="GUID-6D1B34A7-28D4-4334-BAEE-975E4701969D"></a>
<h3 id="DBFSG-GUID-6D1B34A7-28D4-4334-BAEE-975E4701969D" class="sect3">About Granting an Application Role to an Application User</h3>
<div>
<p>This section contains the following topics:</p>
</div>
<a id="DBFSG99083"></a><a id="DBFSG99082"></a>
<div class="props_rev_3"><a id="GUID-F5596DD1-46BB-4D12-8826-E2AE214EB849"></a>
<h4 id="DBFSG-GUID-F5596DD1-46BB-4D12-8826-E2AE214EB849" class="sect4">Creating a New Application User and Granting This User an Application Role</h4>
<div>
<div class="section">
<p><a href="users_roles.htm#GUID-F5596DD1-46BB-4D12-8826-E2AE214EB849__CIHFJCCH">Example 2-11</a> <a id="d7581e4063" class="indexterm-anchor"></a><a id="d7581e4067" class="indexterm-anchor"></a>shows how to grant an application role, <code class="codeph">appl1_regular_role</code>, to an application user, <code class="codeph">lwuser1</code>, when the application user account is created.</p>
<p>To find a listing of existing application roles, query the <code class="codeph">DBA_XS_ROLES</code> data dictionary view.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-F5596DD1-46BB-4D12-8826-E2AE214EB849__CIHFJCCH">
<p class="titleinexample">Example 2-11 Creating a New Application User and Granting This User an Application Role</p>
<pre dir="ltr">sqlplus sec_mgr
Enter password: password
Connected. 
</pre>
<pre dir="ltr">BEGIN
  SYS.XS_PRINCIPAL.CREATE_USER(&#39;lwuser1&#39;);
  SYS.XS_PRINCIPAL.GRANT_ROLES(&#39;lwuser1&#39;, &#39;appl1_regular_role&#39;);
END;
/
</pre></div>
<!-- class="example" --></div>
</div>
<a id="DBFSG99085"></a><a id="DBFSG99084"></a>
<div class="props_rev_3"><a id="GUID-D40E9BEE-7EB1-4CDF-BF78-828050C4C469"></a>
<h4 id="DBFSG-GUID-D40E9BEE-7EB1-4CDF-BF78-828050C4C469" class="sect4">Granting an Application Role to an Existing Application User</h4>
<div>
<div class="section">
<p><a href="users_roles.htm#GUID-D40E9BEE-7EB1-4CDF-BF78-828050C4C469__CIHJAFAJ">Example 2-12</a> shows how to grant an application role, <code class="codeph">appl1_regular_role</code>, to an existing <a id="d7581e4204" class="indexterm-anchor"></a><a id="d7581e4208" class="indexterm-anchor"></a>application user, <code class="codeph">lwuser1</code>. You cannot grant dynamic application roles to an existing application user.</p>
<p>You can find a listing of existing <a id="d7581e4220" class="indexterm-anchor"></a>application user accounts by querying the <code class="codeph">DBA_XS_USERS</code> view.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-D40E9BEE-7EB1-4CDF-BF78-828050C4C469__CIHJAFAJ">
<p class="titleinexample">Example 2-12 Granting an Application Role to an Existing Application User</p>
<pre dir="ltr">sqlplus sec_mgr
Enter password: password
Connected. 
</pre>
<pre dir="ltr">BEGIN
  SYS.XS_PRINCIPAL.GRANT_ROLES(&#39;lwuser1&#39;, &#39;appl1_regular_role&#39;);
END;
/
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="DBFSG99087"></a><a id="DBFSG99086"></a>
<div class="props_rev_3"><a id="GUID-DAD55007-5D55-4034-A8C8-A913FD1165FA"></a>
<h3 id="DBFSG-GUID-DAD55007-5D55-4034-A8C8-A913FD1165FA" class="sect3">Granting an Application Role to Another Application Role</h3>
<div>
<div class="section">
<p><a href="users_roles.htm#GUID-DAD55007-5D55-4034-A8C8-A913FD1165FA__CIHDEJCG">Example 2-13</a> shows how to grant a regular application role to another regular application role. You cannot grant dynamic application roles to other regular application roles, but you can grant other regular application roles to dynamic application roles. To find a listing of existing application roles, query the <code class="codeph">DBA_XS_ROLES</code> view (see <span class="q">&#34;<a href="parm_views.htm#GUID-05DD81BD-98F4-4409-B42A-CA76EA4CED76">DBA_XS_ROLES</a>&#34;</span>).</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-DAD55007-5D55-4034-A8C8-A913FD1165FA__CIHDEJCG">
<p class="titleinexample">Example 2-13 Granting a Regular Application Role to Another Regular Application Role</p>
<pre dir="ltr">sqlplus sec_mgr
Enter password: password
Connected. 
</pre>
<pre dir="ltr">BEGIN
  SYS.XS_PRINCIPAL.GRANT_ROLES(grantee =&gt; &#39;app_regular_role&#39;, role =&gt; &#39;appl1_regular_role&#39;);
END;
/
</pre></div>
<!-- class="example" --></div>
</div>
<a id="DBFSG99089"></a><a id="DBFSG99088"></a>
<div class="props_rev_3"><a id="GUID-A94AF3CD-8E27-4F26-8306-7A477F0DDA5F"></a>
<h3 id="DBFSG-GUID-A94AF3CD-8E27-4F26-8306-7A477F0DDA5F" class="sect3">Granting a Database Role to an Application Role</h3>
<div>
<div class="section">
<p>To<a id="d7581e4483" class="indexterm-anchor"></a><a id="d7581e4487" class="indexterm-anchor"></a> grant a database role to an application role, use the SQL <code class="codeph">GRANT</code> statement. You can find a listing of existing database roles by querying the <code class="codeph">DBA_ROLES</code> data dictionary view.</p>
<p><a href="users_roles.htm#GUID-A94AF3CD-8E27-4F26-8306-7A477F0DDA5F__CIHIJEIF">Example 2-14</a> shows how to grant the database role, <code class="codeph">cust_role</code>, to the application role <code class="codeph">app_regular_role</code>.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-A94AF3CD-8E27-4F26-8306-7A477F0DDA5F__CIHIJEIF">
<p class="titleinexample">Example 2-14 Granting a Database Role to an Application Role</p>
<pre dir="ltr">sqlplus sec_mgr
Enter password: password
Connected. 
</pre>
<pre dir="ltr">GRANT cust_role TO app_regular_role;
</pre></div>
<!-- class="example" --></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5198">
<tr>
<td class="cellalignment5287">
<table class="cellalignment5203">
<tr>
<td class="cellalignment5202"><a href="intro.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5202"><a href="sessions.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2012, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5289">
<table class="cellalignment5201">
<tr>
<td class="cellalignment5202"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5202"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5202"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5202"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5202"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5202"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>