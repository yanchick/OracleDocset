<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-5128"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Configuring%20Application%20Sessions"></a><title>Configuring Application Sessions</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="session, application sessions, user sessions, about, creating, application sessions, creating anonymous application session, anonymous application session, attaching, an application session, cookies, setting for, cookies, application sessions, setting for, setting, a cookie for an application session, users, assigning to, application users, application sessions, assigning to, assigning, an application user to an anonymous application session, users, switching to, application sessions, switching to, switching, application users, in current application session, callback event handler procedure, global callback events, configuring, global callback event handlers, for an application session, DBMS_XS_SESSIONS PL/SQL package, DELETE_GLOBAL_CALLBACK, global callback events, using, event handling, SAVE_SESSION, users, detaching from, application sessions, detaching from, detaching, application session, from a traditional database session, DETACH_SESSION, users, destroying, application sessions, destroying, destroying, DESTROY_SESSION, session state manipulating, namespaces, using namespace templates, users, creating namespace templates, application sessions, creating namespace templates, namespace templates, XS_NAMESPACE PL/SQL package, CREATE_TEMPLATE, CREATE_SESSION, users, initializing namespaces, application sessions, initializing namespaces, initializing, namespace, when session is created, ATTACH_SESSION, namaspace, when session is attached, ASSIGN_USER, SWITCH_USER, application user is switched in application session, users, initializing namespaces explicitly, application sessions, initializing namespaces explicitly, explicitly, CREATE_NAMESPACE, explicitly, namespaces, attributes, setting, session attributes, in application session, SET_ATTRIBUTE, attributes, getting, application sessions, getting, GET_ATTRIBUTE, users, custom attributes, application users, application sessions, custom attributes, custom attributes, CREATE_ATTRIBUTE, deleting, DELETE_NAMESPACE, roles, enabling for session, application user roles, application sessions, enabling for, enabling, application roles, for application session, ENABLE_ROLE, roles, disabling from session, application sessions, disabling from, disabling, DISABLE_ROLE"/>
<meta name="dcterms.created" content="2017-02-17T18:31:46Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Real Application Security Administrator&#39;s and Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E48189-13"/>
<meta name="dcterms.isVersionOf" content="DBFSG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2012, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="users_roles.htm" title="Previous" type="text/html"/>
<link rel="Next" href="acls_sec_classes.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48189-13.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-B44ACBB0-AC90-439D-9CDE-541285C31328"></a> <span id="PAGE" style="display:none;">10/25</span> <!-- End Header -->
<a id="DBFSG30000"></a>
<h1 id="DBFSG-GUID-B44ACBB0-AC90-439D-9CDE-541285C31328" class="sect1"><span class="enumeration_chapter">3</span> Configuring Application Sessions</h1>
<div>
<p>This chapter contains:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="sessions.htm#GUID-EE4F1485-2F88-41B7-A82D-A33E705B3278">About Application Sessions</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-4646E40B-780C-4373-BC04-2214FC2F1B8B">About Creating and Maintaining Application Sessions</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-1678A791-8C84-4AAF-A6C4-259F8CBB8A87">About Manipulating the Application Session State</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-828BD9A7-E7E6-4A24-A69B-4E939FEA7167">About Administrative APIs for External Users and Roles</a></p>
</li>
</ul>
</div>
<a id="DBFSG99091"></a>
<div class="props_rev_3"><a id="GUID-EE4F1485-2F88-41B7-A82D-A33E705B3278"></a>
<h2 id="DBFSG-GUID-EE4F1485-2F88-41B7-A82D-A33E705B3278" class="sect2">About Application Sessions</h2>
<div>
<p>An application session contains information relevant to the application and its user. An application session stores application session state as a collection of attribute-value pairs. These attribute value pairs are divided into namespaces. Unlike traditional <span class="italic">heavyweight</span> database sessions, an application session does not hold its own database resources, such as transactions and cursors. Because application sessions consume far fewer server resources than heavyweight sessions, an application session can be dedicated to each end application user. An application session can persist in the database and resume later with minimal cost.</p>
<p>To configure an application session, you work in two phases:</p>
<ol>
<li>
<p>You create and maintain the application session.</p>
</li>
<li>
<p>You can manipulate the session state during the life of the session.</p>
</li>
</ol>
<p>You can use either PL/SQL APIs or Java APIs to configure application sessions. This chapter describes the programmatic creation, use, and maintenance of application sessions in PL/SQL, and includes specific links to comparable Java information.</p>
<div class="infoboxnotealso" id="GUID-EE4F1485-2F88-41B7-A82D-A33E705B3278__GUID-DF49DDC3-CCEF-48FD-B8C1-8E924A12A6B8">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_fun.htm#GUID-35DB088C-AA74-4F99-A1F6-9BF187F6E0EB">Oracle Database Real Application Security SQL&nbsp;Functions</a> and <a href="plsql_pkg.htm#GUID-42EF8B2A-31E4-4EE9-8963-5BDE681193A5">Oracle Database Real Application Security PL/SQL&nbsp;Packages</a> for information about PL/SQL API syntax</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about Java API syntax (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-2FCEEFB5-83DC-4D5A-982A-690C8DCC4181">Using Real Application Security in Java Applications</a> for information about performing tasks with Java APIs</p>
</li>
</ul>
</div>
<div class="p">This section contains:
<ul style="list-style-type: disc;">
<li>
<p><a href="sessions.htm#GUID-2505F742-4533-4E91-AA41-53AE4DD2BE23">About Application Sessions in Real Application Security</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-247C2449-A52E-47D0-8D56-85047E700751">Advantages of Application Sessions</a></p>
</li>
</ul>
</div>
</div>
<a id="DBFSG99092"></a><a id="DBFSG301"></a>
<div class="props_rev_3"><a id="GUID-2505F742-4533-4E91-AA41-53AE4DD2BE23"></a>
<h3 id="DBFSG-GUID-2505F742-4533-4E91-AA41-53AE4DD2BE23" class="sect3">About Application Sessions in Real Application Security</h3>
<div>
<p><a href="sessions.htm#GUID-2505F742-4533-4E91-AA41-53AE4DD2BE23__CJAJIBHB">Figure 3-1</a> shows a Real Application Security architecture diagram and indicates how application sessions fit into it. The figure shows applications<a id="d9984e399" class="indexterm-anchor"></a><a id="d9984e403" class="indexterm-anchor"></a> creating application sessions in the database. Some of these application sessions are associated with traditional database (DB) sessions.</p>
<p><a href="sessions.htm#GUID-2505F742-4533-4E91-AA41-53AE4DD2BE23__CJAJIBHB">Figure 3-1</a> also shows other components of Real Application Security such as ACLs, application privileges, application users, and application roles.</p>
<div class="figure" id="GUID-2505F742-4533-4E91-AA41-53AE4DD2BE23__CJAJIBHB">
<p class="titleinfigure">Figure 3-1 Real Application Security Architecture</p>
<img width="674" height="657" src="img/GUID-2B84308D-8783-492D-AE70-7D08CABDF2C1-default.png" alt="Description of Figure 3-1 follows" title="Description of Figure 3-1 follows"/><br/>
<a href="img_text/GUID-2B84308D-8783-492D-AE70-7D08CABDF2C1-print.htm">Description of &#34;Figure 3-1 Real Application Security Architecture&#34;</a></div>
<!-- class="figure" --></div>
</div>
<a id="DBFSG302"></a>
<div class="props_rev_3"><a id="GUID-247C2449-A52E-47D0-8D56-85047E700751"></a>
<h3 id="DBFSG-GUID-247C2449-A52E-47D0-8D56-85047E700751" class="sect3">Advantages of Application Sessions</h3>
<div>
<p>Application sessions<a id="d9984e521" class="indexterm-anchor"></a> have functional advantages over traditional database sessions. For example, traditional database sessions are typically unaware of the end user identities or the security policies for those end users. On the contrary:</p>
<ul style="list-style-type: disc;">
<li>
<p>Application sessions encapsulate end user&#39;s security context. They enable applications to use database authorization mechanisms for access control based on the end user identity.</p>
</li>
<li>
<p>An application session can be associated with multiple database sessions simultaneously.</p>
</li>
<li>
<p>They are accessible by all nodes in an Oracle Real Application Clusters (Oracle RAC) environment.</p>
</li>
</ul>
<p>Application sessions have these performance advantages over traditional database sessions:</p>
<ul style="list-style-type: disc;">
<li>
<p>They can be created with less overhead than traditional database sessions.</p>
</li>
<li>
<p>They can persist in the database and resume later with minimal cost.</p>
</li>
<li>
<p>Real Application Security can collect session attribute changes and session states on the client, using caches. Then, these changes are appended to the database until the next database roundtrip, reducing the number of database roundtrips.</p>
</li>
</ul>
</div>
</div>
</div>
<a id="DBFSG99093"></a>
<div class="props_rev_3"><a id="GUID-4646E40B-780C-4373-BC04-2214FC2F1B8B"></a>
<h2 id="DBFSG-GUID-4646E40B-780C-4373-BC04-2214FC2F1B8B" class="sect2">About Creating and Maintaining Application Sessions</h2>
<div>
<div class="p">This section contains:
<ul style="list-style-type: disc;">
<li>
<p><a href="sessions.htm#GUID-155B8167-8FF4-41AF-A4AD-AB4576D54D39">Creating an Application Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-AD6FDD39-B8B9-4838-BBD5-89094D86321F">Creating an Anonymous Application Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-C5889D1C-AE40-4FAE-A453-B65157155D17">Attaching an Application Session to a Traditional Database Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-97CA5620-0D2F-436D-94BE-55D57953A05E">Setting a Cookie for an Application Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-33B7BE0C-7E2E-4FEE-AD52-F1041B8042DA">Assigning an Application User to an Anonymous Application Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-CC76B226-1A50-4E2E-9569-8970B1EA2EF3">Switching Current Application User to Another Application User in Current Application Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-EC9AEA9F-C552-4123-8789-122ADB283D86">About Creating a Global Callback Event Handler Procedure</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14">Configuring Global Callback Event Handlers for an Application Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-B853A9A3-DDF7-4D00-92C1-7724312C0C99">Saving an Application Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80">Detaching an Application Session from a Traditional Database Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-9E4AF526-8BE7-4A31-8062-47D46BF77446">Destroying an Application Session</a></p>
</li>
</ul>
</div>
</div>
<a id="DBFSG99095"></a><a id="DBFSG99094"></a>
<div class="props_rev_3"><a id="GUID-155B8167-8FF4-41AF-A4AD-AB4576D54D39"></a>
<h3 id="DBFSG-GUID-155B8167-8FF4-41AF-A4AD-AB4576D54D39" class="sect3">Creating an Application Session</h3>
<div>
<div class="section">
<p>You can create an application session using the <code class="codeph">DBMS_XS_SESSIONS.CREATE_SESSION</code> procedure in PL/SQL or using the <code class="codeph">createSession</code> method of the <code class="codeph">XSSessionManager</code> class in Java. To create an application session, the invoking user needs <code class="codeph">CREATE_SESSION</code> application privilege. This privilege can be obtained through <code class="codeph">XS_SESSION_ADMIN</code> Database role or by <code class="codeph">XS_ADMIN_UTIL.GRANT_SYSTEM_PRIVILEGE</code> API call (see <span class="q">&#34;<a href="plsql_pkg.htm#GUID-7F29B504-8BEA-43C6-B791-A01899B66FB9">GRANT_SYSTEM_PRIVILEGE Procedure</a>&#34;</span> for more information). <code class="codeph">CREATE_SESSION</code> procedure populates the unique identifier of the newly created session in <code class="codeph">sessionid</code> out parameter. This unique identifier can be used to refer to the session in future calls. The <code class="codeph">DBA_XS_SESSIONS</code> data dictionary view displays all the application sessions in the database.</p>
<p>You can also specify a list of namespaces to be created when the session is created. If you specify namespaces during creation of the session, the caller must have application privileges <code class="codeph">MODIFY_NAMESPACE</code> or <code class="codeph">MODIFY_ATTRIBUTE</code> on the namespaces, or the <code class="codeph">ADMIN_NAMESPACE</code> system privilege.</p>
<p><a href="sessions.htm#GUID-155B8167-8FF4-41AF-A4AD-AB4576D54D39__CHDBJIJC">Example 3-1</a> shows how to create an application session with <code class="codeph">lwuser1</code>.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-155B8167-8FF4-41AF-A4AD-AB4576D54D39__CHDBJIJC">
<p class="titleinexample">Example 3-1 Creating an Application Session</p>
<pre dir="ltr">DECLARE
  sessionid RAW(16);
BEGIN
<span class="bold">  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid);</span>
END;
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-155B8167-8FF4-41AF-A4AD-AB4576D54D39__GUID-585C7C23-6081-417D-B2BB-EE6E38A1157A">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-9C80BEC1-29EA-430D-B597-3CA6182A7DFB">CREATE_SESSION Procedure</a> for information about the syntax of this PL/SQL procedure</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">createSession</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E__BGBJJCCB">Example 6-2</a> for information about a Java example of this task</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBFSG352"></a><a id="DBFSG303"></a>
<div class="props_rev_3"><a id="GUID-AD6FDD39-B8B9-4838-BBD5-89094D86321F"></a>
<h3 id="DBFSG-GUID-AD6FDD39-B8B9-4838-BBD5-89094D86321F" class="sect3">Creating an Anonymous Application Session</h3>
<div>
<div class="section">
<p>You can also create an anonymous application session using the <code class="codeph">DBMS_XS_SESSIONS.CREATE_SESSION</code> procedure in PL/SQL or using the <code class="codeph">createAnonymousSession</code> method of the <code class="codeph">XSSessionManager</code> class in Java. To create an anonymous session through the PL/SQL API, you must specify the predefined user name <code class="codeph">XSGUEST</code>.</p>
<p><a href="sessions.htm#GUID-AD6FDD39-B8B9-4838-BBD5-89094D86321F__BABHBJGI">Example 3-2</a> shows how to create an anonymous session with the predefined user <code class="codeph">XSGUEST</code>.</p>
<p>After creating an anonymous application session, you can assign a named user to the session.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-AD6FDD39-B8B9-4838-BBD5-89094D86321F__BABHBJGI">
<p class="titleinexample">Example 3-2 Creating an Anonymous Application Session</p>
<pre dir="ltr">DECLARE
  sessionid RAW(16);
BEGIN
<span class="bold">  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;XSGUEST&#39;, sessionid);</span>
END;
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-AD6FDD39-B8B9-4838-BBD5-89094D86321F__GUID-F838604E-1B64-4FD3-A675-02B639BA66F0">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-9C80BEC1-29EA-430D-B597-3CA6182A7DFB">CREATE_SESSION Procedure</a> for information about the syntax of this PL/SQL procedure</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">createAnonymousSession</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E__BGBJJCCB">Example 6-2</a> for information about a Java example of this task</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBFSG99098"></a><a id="DBFSG99097"></a>
<div class="props_rev_3"><a id="GUID-C5889D1C-AE40-4FAE-A453-B65157155D17"></a>
<h3 id="DBFSG-GUID-C5889D1C-AE40-4FAE-A453-B65157155D17" class="sect3">Attaching an Application Session to a Traditional Database Session</h3>
<div>
<div class="section">
<p>To use an application session, it must be associated with a database session. This operation is called <code class="codeph">attach</code>. You can attach an application session to a traditional database session using the <code class="codeph">DBMS_XS_SESSIONS.ATTACH_SESSION</code> procedure in PL/SQL or the <code class="codeph">attachSession</code> method of the <code class="codeph">XSSessionManager</code> class in Java. A database session can only attach one application session at a time. The <code class="codeph">DBA_XS_ACTIVE_SESSIONS</code> dynamic data dictionary view displays all attached application sessions in the database.</p>
<p>To execute this procedure, the traditional session user must have the <code class="codeph">ATTACH_SESSION</code> application privilege. This privilege can be obtained through the <code class="codeph">XS_SESSION_ADMIN</code> Database role or by the <code class="codeph">XS_ADMIN_UTIL.GRANT_SYSTEM_PRIVILEGE</code> API call. If you specify namespaces, then the user is required to have the application privileges <code class="codeph">MODIFY_NAMESPACE</code> or <code class="codeph">MODIFY_ATTRIBUTE</code> on the namespaces, or <code class="codeph">ADMIN_NAMESPACE</code> system privilege.</p>
<p><a href="sessions.htm#GUID-C5889D1C-AE40-4FAE-A453-B65157155D17__CHDFDGIA">Example 3-3</a> shows how to attach an application session to a database session.</p>
<p>To attach a session with dynamic roles, a list of dynamic roles can be passed in <code class="codeph">attach</code>.</p>
<div class="infobox-note" id="GUID-C5889D1C-AE40-4FAE-A453-B65157155D17__GUID-2BC0C37A-A46F-43D3-B8B5-3E85D01DFABE">
<p class="notep1">Note:</p>
<p>When developing the application, ensure that all application end user actions are captured within an <code class="codeph">ATTACH_SESSION</code> ... <code class="codeph">DETACH_SESSION</code> programming block. (For more information, see <span class="q">&#34;<a href="sessions.htm#GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80">Detaching an Application Session from a Traditional Database Session</a>&#34;</span>).</p>
</div>
<p>The following table provides links to additional information about this topic.</p>
<div class="tblformal" id="GUID-C5889D1C-AE40-4FAE-A453-B65157155D17__GUID-1A32F6B8-E33F-4A1E-B321-0DB07E6567BD">
<table class="cellalignment5205" summary="List of cross references where you can find more information about attaching an application session.">
<thead>
<tr class="cellalignment5199">
<th class="cellalignment5255" id="d9984e1251">For...</th>
<th class="cellalignment5256" id="d9984e1254">See Also</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5199">
<td class="cellalignment5257" id="d9984e1259" headers="d9984e1251">
<p>The syntax of this PL/SQL procedure</p>
</td>
<td class="cellalignment5258" headers="d9984e1259 d9984e1254">
<p><span class="q">&#34;<a href="plsql_pkg.htm#GUID-2CCDFDD1-F3B4-4EE5-A261-7871B18A0A91">ATTACH_SESSION Procedure</a>&#34;</span></p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5257" id="d9984e1268" headers="d9984e1251">
<p>The syntax of the Java <code class="codeph">attachSession</code> method (in Javadoc format)</p>
</td>
<td class="cellalignment5258" headers="d9984e1268 d9984e1254">
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a></p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5257" id="d9984e1282" headers="d9984e1251">
<p>A Java example of this task</p>
</td>
<td class="cellalignment5258" headers="d9984e1282 d9984e1254">
<p><span class="q">&#34;<a href="midtierjava.htm#GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A__BABJCJBI">Example 6-3</a>&#34;</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="example" id="GUID-C5889D1C-AE40-4FAE-A453-B65157155D17__CHDFDGIA">
<p class="titleinexample">Example 3-3 Attaching an Application Session</p>
<pre dir="ltr">DECLARE
  sessionid raw(16);
BEGIN
  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid);
<span class="bold">  SYS.DBMS_XS_SESSIONS.ATTACH_SESSION(sessionid);</span>
END;
</pre></div>
<!-- class="example" --></div>
</div>
<a id="DBFSG99101"></a><a id="DBFSG99100"></a>
<div class="props_rev_3"><a id="GUID-97CA5620-0D2F-436D-94BE-55D57953A05E"></a>
<h3 id="DBFSG-GUID-97CA5620-0D2F-436D-94BE-55D57953A05E" class="sect3">Setting a Cookie for an Application Session</h3>
<div>
<div class="section">
<p>You can associate a specific cookie with an application session using the <code class="codeph">DBMS_XS_SESSIONS.SET_SESSION_COOKIE</code> procedure in PL/SQL or the <code class="codeph">setCookie</code> method of the <code class="codeph">XSSessionManager</code> class in Java. The cookie can also be associated at the time of creation of the session through the <code class="codeph">CREATE_SESSION</code> PL/SQL API. A cookie is a token embedded in a user&rsquo;s session by a web site during an application session. So the next time the same user requests something from that web site, it sends the cookie to the application session, which allows the server to associate the session with that user.</p>
<p>To execute this procedure, the user must be granted the <code class="codeph">MODIFY_SESSION</code> application privilege. This privilege can be obtained through the <code class="codeph">XS_SESSION_ADMIN</code> Database role or by the <code class="codeph">XS_ADMIN_UTIL.GRANT_SYSTEM_PRIVILEGE</code> API call.</p>
<p><a href="sessions.htm#GUID-97CA5620-0D2F-436D-94BE-55D57953A05E__CHDBFGIE">Example 3-4</a> shows how to set a cookie for an application session.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-97CA5620-0D2F-436D-94BE-55D57953A05E__CHDBFGIE">
<p class="titleinexample">Example 3-4 Setting a Cookie for an Application Session</p>
<pre dir="ltr">DECLARE
  sessionid raw(16);
BEGIN
  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid);
<span class="bold">  SYS.DBMS_XS_SESSIONS.SET_SESSION_COOKIE(&#39;Cookie1&#39;, sessionid);</span>
END;
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-97CA5620-0D2F-436D-94BE-55D57953A05E__GUID-C233AB56-336A-4E65-8555-1C97F77B0BF4">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-AEA590DF-3C7C-4A50-A38E-53DB54266BF2">SET_SESSION_COOKIE Procedure</a> for information about the syntax of this PL/SQL procedure</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">setCookie</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-23E01854-C532-4A86-AB09-B4C10342410D__BABJJBHF">Example 6-20</a> for information about a Java example of this task</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBFSG99104"></a><a id="DBFSG99103"></a>
<div class="props_rev_3"><a id="GUID-33B7BE0C-7E2E-4FEE-AD52-F1041B8042DA"></a>
<h3 id="DBFSG-GUID-33B7BE0C-7E2E-4FEE-AD52-F1041B8042DA" class="sect3">Assigning an Application User to an Anonymous Application Session</h3>
<div>
<div class="section">
<p>You can assign a named application user to a currently attached anonymous application session using the <code class="codeph">DBMS_XS_SESSIONS.ASSIGN_USER</code> procedure in PL/SQL or the <code class="codeph">assignUser</code> method of the <code class="codeph">XSSessionManager</code> class in Java. Assigning a user changes the user session from anonymous to a named user.</p>
<p>To execute this procedure, the dispatcher or connection user must have the <code class="codeph">ASSIGN_USER</code> application privilege. This privilege can be obtained through the <code class="codeph">XS_SESSION_ADMIN</code> Database role or by the <code class="codeph">XS_ADMIN_UTIL.GRANT_SYSTEM_PRIVILEGE</code> API call. If you specify namespaces, then the user is required to be granted application privileges <code class="codeph">MODIFY_NAMESPACE</code> or <code class="codeph">MODIFY_ATTRIBUTE</code> on the namespaces, or <code class="codeph">ADMIN_NAMESPACE</code> system privilege. A list of dynamic roles can also be enabled using the <code class="codeph">DBMS_XS_SESSIONS.ASSIGN_USER</code> procedure.</p>
<p><a href="sessions.htm#GUID-33B7BE0C-7E2E-4FEE-AD52-F1041B8042DA__CJABGBAF">Example 3-5</a> shows how to assign the application user <code class="codeph">lwuser1</code> to an application session.</p>
<p>The following table provides links to additional information about this topic.</p>
<div class="tblformal" id="GUID-33B7BE0C-7E2E-4FEE-AD52-F1041B8042DA__GUID-F5B44EB8-3320-4D8E-8B78-7872FB176050">
<table class="cellalignment5205" summary="List of cross references where you can find more information about assigning a user to an application session.">
<thead>
<tr class="cellalignment5199">
<th class="cellalignment5255" id="d9984e1647">For...</th>
<th class="cellalignment5256" id="d9984e1650">See Also</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5199">
<td class="cellalignment5257" id="d9984e1655" headers="d9984e1647">
<p>The syntax of this PL/SQL procedure</p>
</td>
<td class="cellalignment5258" headers="d9984e1655 d9984e1650">
<p><span class="q">&#34;<a href="plsql_pkg.htm#GUID-C93E0B47-6F3E-44E0-8A3F-5EE868050923">ASSIGN_USER Procedure</a>&#34;</span></p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5257" id="d9984e1664" headers="d9984e1647">
<p>The syntax of the Java <code class="codeph">assignUser</code> method (in Javadoc format)</p>
</td>
<td class="cellalignment5258" headers="d9984e1664 d9984e1650">
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a></p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5257" id="d9984e1678" headers="d9984e1647">
<p>A Java example of this task</p>
</td>
<td class="cellalignment5258" headers="d9984e1678 d9984e1650">
<p><span class="q">&#34;<a href="midtierjava.htm#GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9__BABJABAB">Example 6-5</a>&#34;</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="example" id="GUID-33B7BE0C-7E2E-4FEE-AD52-F1041B8042DA__CJABGBAF">
<p class="titleinexample">Example 3-5 Assigning an Application User to an Application Session</p>
<pre dir="ltr">DECLARE
  sessionid raw(16);
BEGIN
  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;XSGUEST&#39;, sessionid);
  SYS.DBMS_XS_SESSIONS.ATTACH_SESSION(sessionid);
  <span class="bold">SYS.DBMS_XS_SESSIONS.ASSIGN_USER(&#39;lwuser1&#39;);</span>
END;
</pre></div>
<!-- class="example" --></div>
</div>
<a id="DBFSG116"></a><a id="DBFSG115"></a>
<div class="props_rev_3"><a id="GUID-CC76B226-1A50-4E2E-9569-8970B1EA2EF3"></a>
<h3 id="DBFSG-GUID-CC76B226-1A50-4E2E-9569-8970B1EA2EF3" class="sect3">Switching Current Application User to Another Application User in Current Application Session</h3>
<div>
<div class="section">
<p>You can switch or proxy the security context of the current application session to a newly initialized security context for a specified application user using the <code class="codeph">DBMS_XS_SESSIONS.SWITCH_USER</code> procedure in PL/SQL or the <code class="codeph">switchUser</code> method of the <code class="codeph">Session</code> interface in Java. To proxy another application user, the current application session user must be set up as a proxy user for the target user before performing the switch operation. This is performed through the <code class="codeph">XS_PRINCIPAL.ADD_PROXY_USER</code> PL/SQL API.</p>
<p>Switching a user changes the user session between two named users.</p>
<p>If the target application user of the proxy operation has a list of filtering roles (proxy roles) set up for the proxy user, they are enabled in the session.</p>
<p>You can either retain or clear the application namespace and attributes after a switch operation. When the <code class="codeph">keep_state</code> parameter is set to <code class="codeph">TRUE</code>, all application namespaces and attributes are retained; otherwise, all previous state in the session is cleared.</p>
<p>If you specify namespaces, then the user is required to be granted application privileges <code class="codeph">MODIFY_NAMESPACE</code> or <code class="codeph">MODIFY_ATTRIBUTE</code> on the namespaces, or the <code class="codeph">ADMIN_NAMESPACE</code> system privilege.</p>
<p><a href="sessions.htm#GUID-CC76B226-1A50-4E2E-9569-8970B1EA2EF3__CIHJIGIE">Example 3-6</a> shows how to switch the application user <code class="codeph">lwuser1</code> to application user <code class="codeph">lwuser2</code> in the current application session. Note that namespace templates <code class="codeph">ns1</code> and <code class="codeph">ns2</code> should have already have been created by <code class="codeph">SYSDBA</code>.</p>
<p>The following table provides links to additional information about this topic.</p>
<div class="tblformal" id="GUID-CC76B226-1A50-4E2E-9569-8970B1EA2EF3__GUID-EC3BE88D-9169-4DBB-A918-072D3F03F980">
<table class="cellalignment5205" summary="List of cross references where you can find more information about switching an application user to another application user in the current session.">
<thead>
<tr class="cellalignment5199">
<th class="cellalignment5290" id="d9984e1881">For...</th>
<th class="cellalignment5291" id="d9984e1884">See Also</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5199">
<td class="cellalignment5292" id="d9984e1889" headers="d9984e1881">
<p>The syntax of this PL/SQL procedure</p>
</td>
<td class="cellalignment5293" headers="d9984e1889 d9984e1884">
<p><span class="q">&#34;<a href="plsql_pkg.htm#GUID-6F9F4CE9-A434-4F43-9141-48E3F7B0A800">SWITCH_USER Procedure</a>&#34;</span></p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5292" id="d9984e1898" headers="d9984e1881">
<p>The syntax of the Java <code class="codeph">assignUser</code> method (in Javadoc format)</p>
</td>
<td class="cellalignment5293" headers="d9984e1898 d9984e1884">
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a></p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5292" id="d9984e1912" headers="d9984e1881">
<p>A Java example of this task</p>
</td>
<td class="cellalignment5293" headers="d9984e1912 d9984e1884">
<p><span class="q">&#34;<a href="midtierjava.htm#GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9__BABDIGAE">Example 6-6</a>&#34;</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="example" id="GUID-CC76B226-1A50-4E2E-9569-8970B1EA2EF3__CIHJIGIE">
<p class="titleinexample">Example 3-6 Switching an Application User to Another Application User in the Current Application Session</p>
<pre dir="ltr">DECLARE
  sessionid RAW(16);
  nsList DBMS_XS_NSATTRLIST;
BEGIN 
  nsList := DBMS_XS_NSATTRLIST(DBMS_XS_NSATTR(&#39;ns1&#39;),DBMS_XS_NSATTR(&#39;ns2&#39;));
  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid);
  SYS.DBMS_XS_SESSIONS.ATTACH_SESSION(sessionid);
<span class="bold">  SYS.DBMS_XS_SESSIONS.SWITCH_USER(username =&gt; &#39;lwuser2&#39;,</span>
<span class="bold">                               keep_state =&gt; TRUE,</span>
<span class="bold">                               namespaces =&gt; nsList);</span>
END;
</pre></div>
<!-- class="example" --></div>
</div>
<div class="props_rev_3"><a id="GUID-EC9AEA9F-C552-4123-8789-122ADB283D86"></a>
<h3 id="DBFSG-GUID-EC9AEA9F-C552-4123-8789-122ADB283D86" class="sect3">About Creating a Global Callback Event Handler Procedure</h3>
<div>
<p>The callback event handler procedure must adhere to the prototype, which includes a specified set of arguments.</p>
<p>For example, the following <code class="codeph">callback_procedure</code> specifies an existing PL/SQL procedure, which is the event handler and shows its two possible forms.</p>
<pre dir="ltr">PROCEDURE callback_procedure (sessionid in raw, error out pls_integer)
</pre>
<p>This first form includes two parameters, the <code class="codeph">sessionid</code> in <code class="codeph">RAW</code> and the out parameter <code class="codeph">error</code>, which is used for the purpose of setting the error. The <code class="codeph">sessionid</code> contains the session ID of the session in which the event was triggered. The out <code class="codeph">error</code> parameter can be used in the event handler code to display the error.</p>
<pre dir="ltr">PROCEDURE callback_procedure (sessionid in raw, user in varchar2, error out pls_integer)
</pre>
<p>This second form includes an additional parameter <code class="codeph">user</code> in <code class="codeph">VARCHAR2</code> to specify the user who triggered this event.</p>
<div class="infobox-note" id="GUID-EC9AEA9F-C552-4123-8789-122ADB283D86__GUID-EA10EF55-6296-43E8-B6E9-A280AF32AA83">
<p class="notep1">Note:</p>
<p>The error value must be explicitly set to a value in the PL/SQL body or in the exception block as follows, <code class="codeph">error:= 0;</code>.</p>
<p>Otherwise, the following error is raised, <code class="codeph">ORA-46071: Error occured in event handler &lt;name-of-event-handler&gt;</code> followed by another error, <code class="codeph">ORA-1405: fetched column value is NULL</code>, indicating that the error value is <code class="codeph">NULL</code>.</p>
</div>
<p>The following example shows the explicit setting of the error value using the second form of the callback procedure.</p>
<pre dir="ltr">CREATE OR REPLACE PACKAGE CALLBACK_PACKAGE AS
PROCEDURE CALLBACK_PROCEDURE (sessionid in RAW, user in VARCHAR2, error out PLS_INTEGER);
END CALLBACK_PACKAGE;
/

CREATE OR REPLACE PACKAGE BODY CALLBACK_PACKAGE AS
PROCEDURE CALLBACK_PROCEDURE (sessionid in RAW, user in VARCHAR2, error out PLS_INTEGER) IS
BEGIN
  error := 0;
  dbms_output.put_line(&#39;Inside callback procedure&#39;);
EXCEPTION
WHEN OTHERS THEN
        error:=0;
        dbms_output.put_line(&#39;Error&#39;);
END CALLBACK_PROCEDURE;
END CALLBACK_PACKAGE;
</pre>
<div class="infoboxnotealso" id="GUID-EC9AEA9F-C552-4123-8789-122ADB283D86__GUID-48976A13-BCB0-4C33-AEB7-7EB4C5751244">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="sessions.htm#GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14">Configuring Global Callback Event Handlers for an Application Session</a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="DBFSG353"></a><a id="DBFSG99107"></a><a id="DBFSG99106"></a>
<div class="props_rev_3"><a id="GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14"></a>
<h3 id="DBFSG-GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14" class="sect3">Configuring Global Callback Event Handlers for an Application Session</h3>
<div>
<div class="section">
<p>A global callback event handler is a predefined PL/SQL procedure that can be invoked to inspect, log, and modify the session state when certain session events of interest occur. You can add multiple global callback event handlers on a session event. After you create the PL/SQL procedure, you can register or deregister, or enable or disable it using these procedures, respectively:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">DBMS_XS_SESSIONS.ADD_GLOBAL_CALLBACK</code></p>
<p>Use this procedure to register a callback event handler.</p>
</li>
<li>
<p><code class="codeph">DBMS_XS_SESSIONS.DELETE_GLOBAL_CALLBACK</code></p>
<p>Use this procedure to deregister a global callback.</p>
</li>
<li>
<p><code class="codeph">DBMS_XS_SESSIONS.ENABLE_GLOBAL_CALLBACK</code></p>
<p>Use this procedure to enable or disable a global callback procedure by specifying a value of <code class="codeph">TRUE</code> for enable or <code class="codeph">FALSE</code> for disable.</p>
</li>
</ul>
<p>To execute these APIs the user must have the <code class="codeph">CALLBACK</code> application privilege. This can be obtained through the <code class="codeph">XSPROVISIONER</code> application role or by calling the <code class="codeph">XS_ADMIN_UTIL.GRANT_SYSTEM_PRIVILEGE</code> API. You can configure one or more global callback event handlers for use in an application session. If you configure multiple callback event handlers, Oracle Database executes the handlers in the order in which they were created.</p>
<p>Optionally, you can follow these steps to change the execution order:</p>
</div>
<!-- class="section" -->
<ol>
<li><span>Run the <code class="codeph">DBMS_XS_SESSIONS.DELETE_GLOBAL_CALLBACK</code> procedure to deregister any existing callback.</span></li>
<li><span>Run the <code class="codeph">DBMS_XS_SESSIONS.ADD_GLOBAL_CALLBACK</code> procedure to register the callback.</span></li>
</ol>
<div class="example" id="GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14__BABJFGEH">
<p class="titleinexample">Example 3-7 Registering a Global Callback in an Application Session</p>
<pre dir="ltr">BEGIN
  <span class="bold">SYS.DBMS_XS_SESSIONS.ADD_GLOBAL_CALLBACK</span> 
   (DBMS_XS_SESSIONS.CREATE_SESSION_EVENT, 
   &#39;CALLBACK_SCHM&#39;,&#39;CALLBACK_PKG&#39;,&#39;CALLBACK_PROC&#39;);
END;
/
</pre>
<p><a href="sessions.htm#GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14__CJAIBHEF" title="This table has 2 columns, Column 1 is session event and column 2 is when the callback will be executed.">Table 3-1</a> lists session events that can use callback event handlers.</p>
<div class="tblformal" id="GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14__CJAIBHEF">
<p class="titleintable">Table 3-1 Session Events That Can Use Callback Event Handlers</p>
<table class="cellalignment5205" title="Session Events That Can Use Callback Event Handlers" summary="This table has 2 columns, Column 1 is session event and column 2 is when the callback will be executed.">
<thead>
<tr class="cellalignment5199">
<th class="cellalignment5212" id="d9984e2313">Session Event</th>
<th class="cellalignment5211" id="d9984e2316">When the Callback Will Be Executed</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5199">
<td class="cellalignment5214" id="d9984e2321" headers="d9984e2313">
<p>Creating a new application session</p>
</td>
<td class="cellalignment5213" headers="d9984e2321 d9984e2316">
<p>After the session is created.</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5214" id="d9984e2328" headers="d9984e2313">
<p>Attaching to an existing application session</p>
</td>
<td class="cellalignment5213" headers="d9984e2328 d9984e2316">
<p>After the session is attached.</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5214" id="d9984e2335" headers="d9984e2313">
<p>Enabling a dynamic application role</p>
</td>
<td class="cellalignment5213" headers="d9984e2335 d9984e2316">
<p>After a dynamic application role is enabled.</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5214" id="d9984e2342" headers="d9984e2313">
<p>Disabling a dynamic application role</p>
</td>
<td class="cellalignment5213" headers="d9984e2342 d9984e2316">
<p>After a dynamic application role is disabled.</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5214" id="d9984e2349" headers="d9984e2313">
<p>Direct login of an application session</p>
</td>
<td class="cellalignment5213" headers="d9984e2349 d9984e2316">
<p>After the session is attached (if the session attach is called as part of the direct logon of an application session).</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5214" id="d9984e2356" headers="d9984e2313">
<p>Assigning a named application user to an anonymous application session</p>
</td>
<td class="cellalignment5213" headers="d9984e2356 d9984e2316">
<p>After the named user is assigned to the anonymous application session.</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5214" id="d9984e2363" headers="d9984e2313">
<p>Proxying from one named application user to another named application user</p>
</td>
<td class="cellalignment5213" headers="d9984e2363 d9984e2316">
<p>After the application user is switched (if the application user is not proxying back to the original application user).</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5214" id="d9984e2370" headers="d9984e2313">
<p>Proxying back from a named application user to the original application user</p>
</td>
<td class="cellalignment5213" headers="d9984e2370 d9984e2316">
<p>After the application user is switched (if the application user is proxying back to the original application user).</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5214" id="d9984e2377" headers="d9984e2313">
<p>Enabling a regular application role</p>
</td>
<td class="cellalignment5213" headers="d9984e2377 d9984e2316">
<p>After the application role is enabled.</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5214" id="d9984e2384" headers="d9984e2313">
<p>Disabling a regular application role</p>
</td>
<td class="cellalignment5213" headers="d9984e2384 d9984e2316">
<p>After the application role is disabled.</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5214" id="d9984e2391" headers="d9984e2313">
<p>Detaching from an existing application session or database session</p>
</td>
<td class="cellalignment5213" headers="d9984e2391 d9984e2316">
<p>Before the session is detached.</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5214" id="d9984e2399" headers="d9984e2313">
<p>Terminating an existing application session or database session</p>
</td>
<td class="cellalignment5213" headers="d9984e2399 d9984e2316">
<p>Before the session is destroyed.</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5214" id="d9984e2406" headers="d9984e2313">
<p>Direct logoff of an application session or database session</p>
</td>
<td class="cellalignment5213" headers="d9984e2406 d9984e2316">
<p>Before the session is detached (if the session detach is called as part of the direct logoff of an application session).</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Suppose you want to initialize certain application-specific states after creating a session. <a href="sessions.htm#GUID-7CCB11E2-73B2-44DC-ABD7-F3C89C93AD14__BABJFGEH">Example 3-7</a> shows how to register a global callback that sets up the state <code class="codeph">CALLBACK_PROC</code>, which is defined in the package <code class="codeph">CALLBACK_PKG</code> and owned by the schema <code class="codeph">CALLBACK_SCHM</code>.</p>
<p>The state <code class="codeph">CALLBACK_PROC</code> is registered as a global callback for the event <code class="codeph">CREATE_SESSION_EVENT</code>.</p>
<p>For more examples, and for details about the syntax of these procedures, see the following:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="plsql_pkg.htm#GUID-A26E667D-741A-4371-9BE3-CCE27BE99FB6">ADD_GLOBAL_CALLBACK Procedure</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="plsql_pkg.htm#GUID-EE158701-CDD0-4C6E-8225-EA300F9FC352">DELETE_GLOBAL_CALLBACK Procedure</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="plsql_pkg.htm#GUID-5C06BDE3-60A1-4EAF-8D16-4DB7931C779F">ENABLE_GLOBAL_CALLBACK Procedure</a>&#34;</span></p>
</li>
</ul>
</div>
<!-- class="example" --></div>
</div>
<a id="DBFSG118"></a><a id="DBFSG117"></a>
<div class="props_rev_3"><a id="GUID-B853A9A3-DDF7-4D00-92C1-7724312C0C99"></a>
<h3 id="DBFSG-GUID-B853A9A3-DDF7-4D00-92C1-7724312C0C99" class="sect3">Saving an Application Session</h3>
<div>
<div class="section">
<p>You can save the current user application session using the <code class="codeph">DBMS_XS_SESSIONS.SAVE_SESSION</code> procedure in PL/SQL or the <code class="codeph">saveSession</code> method of the <code class="codeph">XSSessionManager</code> class in Java. Use the save operation when session changes need to be propagated immediately to other sessions using the same session as this one. If the save operation is not used, then the session changes would be reflected in other sessions only after this session is detached.</p>
<p>The calling user requires no privileges to perform this operation.</p>
<p><a href="sessions.htm#GUID-B853A9A3-DDF7-4D00-92C1-7724312C0C99__CIHCIDEF">Example 3-8</a> shows how to save the current user application session.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-B853A9A3-DDF7-4D00-92C1-7724312C0C99__CIHCIDEF">
<p class="titleinexample">Example 3-8 Saving the Current User Application Session</p>
<pre dir="ltr">BEGIN
 SYS.DBMS_XS_SESSIONS.SAVE_SESSION;
END;
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-B853A9A3-DDF7-4D00-92C1-7724312C0C99__GUID-EA1CE3D1-5F2C-4D3A-95BF-AE781E7411DA">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-0F69D39A-CA89-4F88-9268-BABEED216B9D">SAVE_SESSION Procedure</a> for information about the syntax of these PL/SQL procedures</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">detachSession</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="external_roles.htm#GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857__CHDEGGGJ">Example 7-4</a> for information about a Java example of this task</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBFSG99114"></a><a id="DBFSG99115"></a><a id="DBFSG99113"></a>
<div class="props_rev_3"><a id="GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80"></a>
<h3 id="DBFSG-GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80" class="sect3">Detaching an Application Session from a Traditional Database Session</h3>
<div>
<div class="section">
<p>You can detach an application session from the traditional database session using either of these procedures:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">DBMS_XS_SESSIONS.DETACH_SESSION(abort =&gt; FALSE)</code></p>
<p>Use this procedure to detach the session and commit any changes that were made since the last time session changes were saved. When you specify the <code class="codeph">abort</code> parameter as <code class="codeph">FALSE</code> (the default value), all changes performed in the current session are persisted. The currently attached user can perform this operation without any additional privileges.</p>
<p><code class="codeph">DETACH_SESSION</code> is always performed on the currently attached session.</p>
</li>
<li>
<p><code class="codeph">DBMS_XS_SESSIONS.DETACH_SESSION(abort =&gt; TRUE)</code></p>
<p>Use this procedure to detach the session without saving the changes. When you specify the <code class="codeph">abort</code> parameter as <code class="codeph">TRUE</code>, it rolls back the changes performed in the current session. The role and namespace changes made to the session since the attach are discarded.</p>
</li>
</ul>
<p><a href="sessions.htm#GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80__CHDHCGFJ">Example 3-9</a> shows how to detach an application session from a database session and commit the changes. Note that you can call <code class="codeph">DETACH_SESSION</code> anywhere to detach the currently attached session.</p>
<p>You can use the <code class="codeph">detachSession</code> method of the <code class="codeph">XSSessionManager</code> class in Java.</p>
<p><a href="sessions.htm#GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80__CJAEGIAB">Example 3-10</a> shows how to detach a database session from an application session without saving any changes.</p>
<div class="infobox-note" id="GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80__GUID-A73D40C7-7A20-410F-AB44-AD85935BF8E0">
<p class="notep1">Note:</p>
<p>When developing the application, ensure that all application end user actions are captured within an <code class="codeph">ATTACH_SESSION</code> ... <code class="codeph">DETACH_SESSION</code> programming block. (For more information, see <span class="q">&#34;<a href="sessions.htm#GUID-C5889D1C-AE40-4FAE-A453-B65157155D17">Attaching an Application Session to a Traditional Database Session</a>&#34;</span>)</p>
</div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80__CHDHCGFJ">
<p class="titleinexample">Example 3-9 Detaching and Committing an Application Session</p>
<pre dir="ltr">DECLARE
  sessionid RAW(16);
BEGIN
  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid);
  SYS.DBMS_XS_SESSIONS.ATTACH_SESSION(sessionid);
...
  <span class="bold">SYS.DBMS_XS_SESSIONS.DETACH_SESSION;</span>
...
END;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80__CJAEGIAB">
<p class="titleinexample">Example 3-10 Detaching and Not Committing an Application Session</p>
<pre dir="ltr">DECLARE
  sessionid RAW(16);
BEGIN
  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid);
  SYS.DBMS_XS_SESSIONS.ATTACH_SESSION(sessionid);
...
  <span class="bold">SYS.DBMS_XS_SESSIONS.DETACH_SESSION(TRUE)</span>;
END;
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-B8AE0932-F484-4FD3-BEBF-8C82820B6A80__GUID-DCF0E3B5-EBAE-4C71-A9FA-FC073AA0CFE8">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-E991C805-AFFF-432D-877B-262EE8E9FA32">DETACH_SESSION Procedure</a> for information about the syntax of these PL/SQL procedures</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">detachSession</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-1644F4CF-90DE-40BE-AC5C-341372A0DB3B__BABJFIGH">Example 6-21</a> for information about a Java example of this task</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBFSG99119"></a><a id="DBFSG99118"></a>
<div class="props_rev_3"><a id="GUID-9E4AF526-8BE7-4A31-8062-47D46BF77446"></a>
<h3 id="DBFSG-GUID-9E4AF526-8BE7-4A31-8062-47D46BF77446" class="sect3">Destroying an Application Session</h3>
<div>
<div class="section">
<p>You can terminate an application session using the <code class="codeph">DBMS_XS_SESSIONS.DESTROY_SESSION</code> procedure in PL/SQL or using the <code class="codeph">destroySession</code> method of the <code class="codeph">XSSessionManager</code> class in Java. This procedure also detaches all traditional sessions from the application session.</p>
<p>To execute this procedure, the invoking user must have the <code class="codeph">TERMINATE_SESSION</code> application privilege. This privilege can be obtained through the <code class="codeph">XS_SESSION_ADMIN</code> Database role or by the <code class="codeph">XS_ADMIN_UTIL.GRANT_SYSTEM_PRIVILEGE</code> API call.</p>
<p><a href="sessions.htm#GUID-9E4AF526-8BE7-4A31-8062-47D46BF77446__CHDJJCFI">Example 3-11</a> shows how to destroy an application session.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-9E4AF526-8BE7-4A31-8062-47D46BF77446__CHDJJCFI">
<p class="titleinexample">Example 3-11 Destroying an Application Session</p>
<pre dir="ltr">DECLARE
  sessionid RAW(16);
BEGIN
  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid);
  SYS.DBMS_XS_SESSIONS.ATTACH_SESSION(sessionid);
  SYS.DBMS_XS_SESSIONS.DETACH_SESSION;
<span class="bold">  SYS.DBMS_XS_SESSIONS.DESTROY_SESSION(sessionid);</span>
END;
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-9E4AF526-8BE7-4A31-8062-47D46BF77446__GUID-465383DF-344D-4E42-8D55-13BEBD50AD30">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-65D575BD-FE85-4DA6-9C0D-8A3C9BD31E2A">DESTROY_SESSION Procedure</a> for information about the syntax of this PL/SQL procedure</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">destroySession</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-6DACB579-26F2-4641-A4D5-E7DE2A1B0004__BGBIJIFH">Example 6-22</a> for information about a Java example of this task</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="DBFSG99121"></a>
<div class="props_rev_3"><a id="GUID-1678A791-8C84-4AAF-A6C4-259F8CBB8A87"></a>
<h2 id="DBFSG-GUID-1678A791-8C84-4AAF-A6C4-259F8CBB8A87" class="sect2">About Manipulating the Application Session State</h2>
<div>
<div class="p">This section contains:
<ul style="list-style-type: disc;">
<li>
<p><a href="sessions.htm#GUID-0B1ED666-0401-4050-BE4E-EF375752A39B">About Using Namespace Templates to Create Namespaces</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-28231539-41C0-41DE-A0CE-AE7E682B51CB">Initializing a Namespace in an Application Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-B47E38D2-1C6F-41C8-8733-D72B93DCA96F">Setting Session Attributes in an Application Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-A0CE910F-1FEC-42A4-A736-FA2DF663D5BA">Getting Session Attributes in an Application Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-367C8369-8532-4C69-8C15-F514C3363DEC">Creating Custom Attributes in an Application Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-0F371814-BD59-4918-B0B3-6BEFDB4A8916">Deleting a Namespace in an Application Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-56469A83-DD02-4A99-B220-43AB653E7316">Enabling Application Roles for a Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-76CA3EEB-02C9-47C6-A6CB-9194340C65BD">Disabling Application Roles for a Session</a></p>
</li>
</ul>
</div>
</div>
<a id="DBFSG99122"></a>
<div class="props_rev_3"><a id="GUID-0B1ED666-0401-4050-BE4E-EF375752A39B"></a>
<h3 id="DBFSG-GUID-0B1ED666-0401-4050-BE4E-EF375752A39B" class="sect3">About Using Namespace Templates to Create Namespaces</h3>
<div>
<p>An application uses a namespace to store application defined attribute-value pairs. Often, an application needs to use the same namespace across different application sessions. A namespace template provides a way to define and initialize a namespace.</p>
<p>A namespace template defines the namespace and its properties. It is used to initialize the namespace in an application session. The namespace name must be the same as the template that defines it.</p>
<div class="p">This section contains:
<ul style="list-style-type: disc;">
<li>
<p><a href="sessions.htm#GUID-BF0AACF5-D06C-47E1-B83C-1D354C2CF2F3">Components of a Namespace Template</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-472A5EFF-EFE3-49FD-8103-1EDD4C841947">About Namespace Views</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-C98B0185-2F23-4C30-A3F0-B32DBD09CEC2">Creating a Namespace Template for an Application Session</a></p>
</li>
</ul>
</div>
</div>
<a id="DBFSG354"></a>
<div class="props_rev_3"><a id="GUID-BF0AACF5-D06C-47E1-B83C-1D354C2CF2F3"></a>
<h4 id="DBFSG-GUID-BF0AACF5-D06C-47E1-B83C-1D354C2CF2F3" class="sect4">Components of a Namespace Template</h4>
<div>
<p>A namespace template includes the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Name of the namespace</p>
<p>The name of the application namespace uniquely identifies the namespace. This name is used when creating the namespace in an application session.</p>
</li>
<li>
<p>Namespace handler</p>
<p>The namespace handler is called when an attribute value is set or retrieved. Specifying a handler is optional.</p>
<p>Namespaces can be associated with an event handling function. The server invokes this function whenever an operation on an attribute registered for event handling is performed. The event handling function is provided with the attribute name, attribute value, and the event code as arguments. For example:</p>
<pre dir="ltr">FUNCTION event_handling_function_name(
         session_id IN RAW,
         namespace  IN VARCHAR2,
         attribute  IN VARCHAR2,
         old_value  IN VARCHAR2,
         new_value  IN VARCHAR2,
         event_code IN PLS_INTEGER)
RETURNS PLS_INTEGER;
</pre></li>
<li>
<p>Attribute List</p>
<p>The attribute list includes the attributes defined for the namespace. These attributes are created in the session when the namespace is created.</p>
<p>You can specify the following optional data for attributes:</p>
<ul style="list-style-type: disc;">
<li>
<p>The default value</p>
<p>The attribute is initialized with the default value when the namespace is created in the application session. The default value and the event types <code class="codeph">FIRSTREAD_EVENT</code> and <code class="codeph">FIRSTREAD_PLUS_UPDATE_EVENT</code> cannot exist at the same time.</p>
</li>
<li>
<p>Event types</p>
<p>You can specify the following event types for an attribute:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">FIRSTREAD_EVENT</code></p>
<p>Specify this event type to call the namespace handler when an attribute whose value has not been set is read for the first time. You can specify this event type only if a default value has not been set for the attribute.</p>
</li>
<li>
<p><code class="codeph">UPDATE_EVENT</code></p>
<p>Specify this event type to call the namespace handler when the attribute value is updated.</p>
</li>
<li>
<p><code class="codeph">FIRSTREAD_PLUS_UPDATE_EVENT</code></p>
<p>Specify this event type to call the namespace handler when an attribute whose value has not been set is read for the first time, or when its value is updated. You can specify this event type only if a default value has not been set for the attribute.</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Namespace ACL</p>
<p>The privilege model for namespace operations. Namespace operations are protected by the ACL set on the template. By default, <code class="codeph">NS_UNRESTRICTED_ACL</code> is set on a template, which allows unrestricted operation on namespaces created from the templates.</p>
</li>
</ul>
</div>
</div>
<a id="DBFSG355"></a>
<div class="props_rev_3"><a id="GUID-472A5EFF-EFE3-49FD-8103-1EDD4C841947"></a>
<h4 id="DBFSG-GUID-472A5EFF-EFE3-49FD-8103-1EDD4C841947" class="sect4">About Namespace Views</h4>
<div>
<p>You can find information about namespace templates, namespace template attributes, and namespace attributes in current and all application sessions by querying these data dictionary views:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="parm_views.htm#GUID-F09A3547-CD7F-4F77-AFE9-2177C750D586">DBA_XS_NS_TEMPLATES</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="parm_views.htm#GUID-8B005814-5098-4FB7-AED2-A85787449044">DBA_XS_NS_TEMPLATE_ATTRIBUTES</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="parm_views.htm#GUID-EA10A73F-B1EA-4E70-9E6A-5659ABCC97A1">DBA_XS_SESSION_NS_ATTRIBUTES</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="parm_views.htm#GUID-D22D4EF6-5C79-4056-AF9B-64EAA7D94BFE">V$XS_SESSION_NS_ATTRIBUTES</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
<a id="DBFSG389"></a><a id="DBFSG388"></a>
<div class="props_rev_3"><a id="GUID-C98B0185-2F23-4C30-A3F0-B32DBD09CEC2"></a>
<h4 id="DBFSG-GUID-C98B0185-2F23-4C30-A3F0-B32DBD09CEC2" class="sect4">Creating a Namespace Template for an Application Session</h4>
<div>
<div class="section">
<p>You can create a namespace template using the <code class="codeph">XS_NAMESPACE.CREATE_TEMPLATE</code> procedure in PL/SQL or the <code class="codeph">createNamespace</code> method of the <code class="codeph">Session</code> interface in Java.</p>
<p><a href="sessions.htm#GUID-C98B0185-2F23-4C30-A3F0-B32DBD09CEC2__BABDDIJA">Example 3-12</a> shows how to create the namespace template <code class="codeph">ns1</code> for an application session. It defines the attributes for this namespace using the list of attributes <code class="codeph">attrs</code>. Because this namespace template has <code class="codeph">NS_UNRESTRICTED_ACL</code> set on the template, this allows unrestricted operation on namespaces created from the template.</p>
<p>The calling user must have the <code class="codeph">ADMIN_ANY_SEC_POLICY</code> application privilege, which allows it to administer namespace templates and attributes.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-C98B0185-2F23-4C30-A3F0-B32DBD09CEC2__BABDDIJA">
<p class="titleinexample">Example 3-12 Creating a Namespace Template</p>
<pre dir="ltr">DECLARE
  attrs XS$NS_ATTRIBUTE_LIST;
BEGIN
  attrs := XS$NS_ATTRIBUTE_LIST();
  attrs.extend(3);
 
  attrs(1) := XS$NS_ATTRIBUTE(&#39;attr1&#39;,&#39;value1&#39;,
    XS_NAMESPACE.UPDATE_EVENT);
  attrs(2) := XS$NS_ATTRIBUTE(&#39;attr2&#39;,null,
    XS_NAMESPACE.FIRSTREAD_PLUS_UPDATE_EVENT);
  attrs(3) := XS$NS_ATTRIBUTE(&#39;attr3&#39;,&#39;value3&#39;);
 
  <span class="bold">SYS.XS_NAMESPACE.CREATE_TEMPLATE(name=&gt;&#39;ns1&#39;,</span>
                               <span class="bold">description=&gt;&#39;namespace template 1&#39;,</span>
                               <span class="bold">attr_list=&gt;attrs,</span>
                               <span class="bold">schema=&gt;&#39;SCOTT&#39;,</span>
                               <span class="bold">package=&gt;&#39;PKG1&#39;,</span>
                               <span class="bold">function=&gt;&#39;FN1&#39;,</span>
                               <span class="bold">acl=&gt;&#39;SYS.NS_UNRESTRICTED_ACL&#39;);</span>
END;
/
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-C98B0185-2F23-4C30-A3F0-B32DBD09CEC2__GUID-ECEE8106-A0FA-4A9E-A32D-D6456FACD0C9">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-2ECCB0F0-0B24-4538-8B15-DEA704931B3E">CREATE_TEMPLATE Procedure</a> for information about the syntax of this PL/SQL procedure</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">createNamespace</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304__BGBEFDHB">Example 6-10</a> for information about a Java example of this task</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="DBFSG99125"></a>
<div class="props_rev_3"><a id="GUID-28231539-41C0-41DE-A0CE-AE7E682B51CB"></a>
<h3 id="DBFSG-GUID-28231539-41C0-41DE-A0CE-AE7E682B51CB" class="sect3">Initializing a Namespace in an Application Session</h3>
<div>
<div class="section">
<p>A namespace can be initialized, using a namespace template, during any of the following events, as described in this section:</p>
<div class="p">This section contains:
<ul style="list-style-type: disc;">
<li>
<p><a href="sessions.htm#GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252">Initializing a Namespace When the Session Is Created</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464">Initializing a Namespace When the Session Is Attached</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD">Initializing a Namespace When a Named Application User Is Assigned to an Anonymous Application Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2">Initializing a Namespace When the Application User Is Switched in an Application Session</a></p>
</li>
<li>
<p><a href="sessions.htm#GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73">Initializing a Namespace Explicitly</a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" -->
<div class="section"></div>
<!-- class="section" --></div>
<a id="DBFSG99812"></a><a id="DBFSG99126"></a>
<div class="props_rev_3"><a id="GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252"></a>
<h4 id="DBFSG-GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252" class="sect4">Initializing a Namespace When the Session Is Created</h4>
<div>
<div class="section">
<p>When you create an application session using the <code class="codeph">DBMS_XS_SESSIONS.CREATE_SESSION</code> procedure in PL/SQL or the <code class="codeph">createSession</code> method of the <code class="codeph">XSSessionManager</code> class in Java, you can specify a list of namespaces to initialize.</p>
<p><a href="sessions.htm#GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252__BABJDCJB">Example 3-13</a> shows how to initialize two namespaces, <code class="codeph">ns1</code> and <code class="codeph">ns2</code>, while creating an application session.</p>
<p>If you specify namespaces during creation of the session, the caller is required to be granted application privileges <code class="codeph">MODIFY_NAMESPACE</code> or <code class="codeph">MODIFY_ATTRIBUTE</code> on the namespaces, or be granted the <code class="codeph">ADMIN_NAMESPACE</code> system privilege.</p>
<div class="infobox-note" id="GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252__GUID-152C3C4E-943B-4E86-87CC-9CC2B57B9C7C">
<p class="notep1">Note:</p>
<p>The namespaces used in <a href="sessions.htm#GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252__BABJDCJB">Example 3-13</a> must already have corresponding namespace templates defined.</p>
</div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252__BABJDCJB">
<p class="titleinexample">Example 3-13 Initializing Namespaces When Creating an Application Session</p>
<pre dir="ltr">DECLARE
  nsList DBMS_XS_NSATTRLIST;
  sessionid RAW(16);
BEGIN
    nsList := DBMS_XS_NSATTRLIST(DBMS_XS_NSATTR(&#39;ns1&#39;),DBMS_XS_NSATTR(&#39;ns2&#39;));
    SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid, FALSE, FALSE, nsList);
END;
/
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-5059E579-574A-4B5D-BBA5-B1ED5186B252__GUID-DF0BFFB9-9FCD-466F-B895-3061161654BA">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-9C80BEC1-29EA-430D-B597-3CA6182A7DFB">CREATE_SESSION Procedure</a> for information about the syntax of this PL/SQL procedure</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">createSession</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E__BGBJJCCB">Example 6-2</a> for information about a Java example of this task</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBFSG99813"></a><a id="DBFSG99127"></a>
<div class="props_rev_3"><a id="GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464"></a>
<h4 id="DBFSG-GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464" class="sect4">Initializing a Namespace When the Session Is Attached</h4>
<div>
<div class="section">
<p>When you attach the session using the <code class="codeph">DBMS_XS_SESSIONS.ATTACH_SESSION</code> procedure in PL/SQL or using the <code class="codeph">attachSession</code> method of the <code class="codeph">XSSessionManager</code> class in Java, you can specify a list of namespaces to initialize.</p>
<p><a href="sessions.htm#GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464__BABICEAC">Example 3-14</a> shows how to initialize two namespaces, <code class="codeph">ns1</code> and <code class="codeph">ns2</code>, while attaching an application session.</p>
<p>If you specify namespaces, then the user is required to be granted application privileges <code class="codeph">MODIFY_NAMESPACE</code> or <code class="codeph">MODIFY_ATTRIBUTE</code> on the namespaces, or the <code class="codeph">ADMIN_NAMESPACE</code> system privilege.</p>
<div class="infobox-note" id="GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464__GUID-6EC4A435-DDB9-4584-BCCF-A08EFEC4D4C5">
<p class="notep1">Note:</p>
<p>The namespaces used in <a href="sessions.htm#GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464__BABICEAC">Example 3-14</a> must already have corresponding namespace templates defined.</p>
</div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464__BABICEAC">
<p class="titleinexample">Example 3-14 Initializing Namespaces When Attaching an Application Session</p>
<pre dir="ltr">DECLARE
  nsList DBMS_XS_NSATTRLIST;
  sessionid RAW(16);
BEGIN
    nsList := DBMS_XS_NSATTRLIST(DBMS_XS_NSATTR(&#39;ns1&#39;),DBMS_XS_NSATTR(&#39;ns2&#39;));
    SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid);
<span class="bold">    SYS.DBMS_XS_SESSIONS.ATTACH_SESSION(sessionid, NULL, NULL, NULL, NULL, nsList);</span>
END;
/
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-1DED671F-762A-4869-9CD3-95D5D1CDC464__GUID-219BDF9C-7053-4C52-A13F-C9B9A4313F3E">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-2CCDFDD1-F3B4-4EE5-A261-7871B18A0A91">ATTACH_SESSION Procedure</a> for information about the syntax of this PL/SQL procedure</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">attachSession</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A__BABJCJBI">Example 6-3</a> for information about a Java example of this task</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBFSG99814"></a><a id="DBFSG99128"></a>
<div class="props_rev_3"><a id="GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD"></a>
<h4 id="DBFSG-GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD" class="sect4">Initializing a Namespace When a Named Application User Is Assigned to an Anonymous Application Session</h4>
<div>
<div class="section">
<p>When you assign an application user to an application session using the <code class="codeph">DBMS_XS_SESSIONS.ASSIGN_USER</code> procedure in PL/SQL or the <code class="codeph">assignUser</code> method of the <code class="codeph">XSSessionManager</code> class in Java, you can specify a list of namespaces to initialize.</p>
<p>If you specify namespaces, then the user is required to be granted application privileges <code class="codeph">MODIFY_NAMESPACE</code> or <code class="codeph">MODIFY_ATTRIBUTE</code> on the namespaces, or <code class="codeph">ADMIN_NAMESPACE</code> system privilege.</p>
<p><a href="sessions.htm#GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD__BABBECBI">Example 3-15</a> shows how to initialize two namespaces, <code class="codeph">ns1</code> and <code class="codeph">ns2</code>, while assigning an application user to an application session.</p>
<div class="infobox-note" id="GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD__GUID-F87E68B8-A580-414D-99E4-C183D6FCD371">
<p class="notep1">Note:</p>
<p>The namespaces used in <a href="sessions.htm#GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD__BABBECBI">Example 3-15</a> must already have corresponding namespace templates defined.</p>
</div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD__BABBECBI">
<p class="titleinexample">Example 3-15 Initializing Namespaces When Assigning an Application User to an Application Session</p>
<pre dir="ltr">DECLARE
  sessionid RAW(30);
  nsList DBMS_XS_NSATTRLIST;
BEGIN 
  nsList := DBMS_XS_NSATTRLIST(DBMS_XS_NSATTR(&#39;ns1&#39;),DBMS_XS_NSATTR(&#39;ns2&#39;));
  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;XSGUEST&#39;, sessionid);
<span class="bold">  SYS.DBMS_XS_SESSIONS.ASSIGN_USER(username =&gt; &#39;lwuser2&#39;,</span>
<span class="bold">                               sessionid =&gt; sessionid,</span>
<span class="bold">                               namespaces =&gt; nsList);</span>
END;
/
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-F2A52945-6DEC-4618-9829-A128E62C5EDD__GUID-C833669E-B59D-4E12-A759-6A28FDEC3C61">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-C93E0B47-6F3E-44E0-8A3F-5EE868050923">ASSIGN_USER Procedure</a> for information about the syntax of this PL/SQL procedure</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">assignUser</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9__BABJABAB">Example 6-5</a> for information about a Java example of this task</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBFSG99815"></a><a id="DBFSG99129"></a>
<div class="props_rev_3"><a id="GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2"></a>
<h4 id="DBFSG-GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2" class="sect4">Initializing a Namespace When the Application User Is Switched in an Application Session</h4>
<div>
<div class="section">
<p>When you switch an application user in an application session using the <code class="codeph">DBMS_XS_SESSIONS.SWITCH_USER</code> procedure in PL/SQL or using the <code class="codeph">switchUser</code> method of the <code class="codeph">Session</code> interface in Java, you can specify a list of namespaces to initialize.</p>
<p>If you specify namespaces, then the user is required to be granted application privileges <code class="codeph">MODIFY_NAMESPACE</code> or <code class="codeph">MODIFY_ATTRIBUTE</code> on the namespaces, or the <code class="codeph">ADMIN_NAMESPACE</code> system privilege.</p>
<div class="infobox-note" id="GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2__GUID-CE819E65-16E4-4219-882E-5063208C1E56">
<p class="notep1">Note:</p>
<p>To enable the switch from <code class="codeph">lwuser1</code> to <code class="codeph">lwuser2</code> after attaching the session, you must first define <code class="codeph">lwuser2</code> as the target user for <code class="codeph">lwuser1</code>, as follows:</p>
<pre dir="ltr">exec XS_PRINCIPAL.ADD_PROXY_USER(&#39;lwuser2&#39;, &#39;lwuser1&#39;);
</pre></div>
<p><a href="sessions.htm#GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2__BABDDJGE">Example 3-16</a> shows how to initialize two namespaces, <code class="codeph">ns1</code> and <code class="codeph">ns2</code>, while switching an application user in an application session.</p>
<div class="infobox-note" id="GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2__GUID-673BE5C3-1EDE-498E-A654-BDBDE531CD02">
<p class="notep1">Note:</p>
<p>The namespaces used in <a href="sessions.htm#GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2__BABDDJGE">Example 3-16</a> must already have corresponding namespace templates defined.</p>
</div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2__BABDDJGE">
<p class="titleinexample">Example 3-16 Initializing Namespaces When Switching an Application User in an Application Session</p>
<pre dir="ltr">DECLARE
  sessionid RAW(30);
  nsList DBMS_XS_NSATTRLIST;
BEGIN 
  nsList := DBMS_XS_NSATTRLIST(DBMS_XS_NSATTR(&#39;ns1&#39;),DBMS_XS_NSATTR(&#39;ns2&#39;));
 SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid);
 SYS. DBMS_XS_SESSIONS.ATTACH_SESSION(sessionid);
<span class="bold">  SYS.DBMS_XS_SESSIONS.SWITCH_USER(username =&gt; &#39;lwuser2&#39;,</span>
<span class="bold">                               namespaces =&gt; nsList);</span>
END;
/
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-8E3E9E18-BEDC-48DB-97CD-3558FB9992C2__GUID-AF2B6D7E-A764-4C05-80DA-211F78427445">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-6F9F4CE9-A434-4F43-9141-48E3F7B0A800">SWITCH_USER Procedure</a> for information about the syntax of this PL/SQL procedure</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">switchUser</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9__BABDIGAE">Example 6-6</a> for information about a Java example of this task</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBFSG99816"></a><a id="DBFSG99130"></a>
<div class="props_rev_3"><a id="GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73"></a>
<h4 id="DBFSG-GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73" class="sect4">Initializing a Namespace Explicitly</h4>
<div>
<div class="section">
<p>You can explicitly initialize a namespace in an application session using the <code class="codeph">DBMS_XS_SESSIONS.CREATE_NAMESPACE</code> procedure in PL/SQL or the <code class="codeph">createNamespace</code> method of the <code class="codeph">Session</code> interface in Java.</p>
<p>To execute the <code class="codeph">DBMS_XS_SESSIONS.CREATE_NAMESPACE</code> procedure, the calling user must have the <code class="codeph">MODIFY_NAMESPACE</code> application privilege on the namespace or the <code class="codeph">ADMIN_NAMESPACE</code> system privilege.</p>
<p><a href="sessions.htm#GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73__BABEHAHF">Example 3-17</a> shows how to explicitly initialize a namespace, <code class="codeph">ns1</code>, in an application session.</p>
<div class="infobox-note" id="GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73__GUID-D30577AA-90BA-4F49-8287-DEABBA3F81BA">
<p class="notep1">Note:</p>
<p>The namespace used in <a href="sessions.htm#GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73__BABEHAHF">Example 3-17</a> must already have a corresponding namespace template defined.</p>
</div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73__BABEHAHF">
<p class="titleinexample">Example 3-17 Initializing a Namespace Explicitly in an Application Session</p>
<pre dir="ltr">DECLARE
  sessionid RAW(30);
BEGIN
  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid);
  SYS.DBMS_XS_SESSIONS.ATTACH_SESSION(sessionid);
<span class="bold">  SYS.DBMS_XS_SESSIONS.CREATE_NAMESPACE(&#39;ns1&#39;);</span>
END;
/
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-8DCF6892-9681-4D63-AC45-CC516C4FEB73__GUID-0A66FEF0-24A5-4DC2-8D2E-93A63849CF8F">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-0D41166C-98B5-4043-8A20-E524A2AE8BA6">CREATE_NAMESPACE Procedure</a> for information about the syntax of this PL/SQL procedure</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">createNamespace</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304__BGBEFDHB">Example 6-10</a> for information about a Java example of this task</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="DBFSG99133"></a><a id="DBFSG99132"></a>
<div class="props_rev_3"><a id="GUID-B47E38D2-1C6F-41C8-8733-D72B93DCA96F"></a>
<h3 id="DBFSG-GUID-B47E38D2-1C6F-41C8-8733-D72B93DCA96F" class="sect3">Setting Session Attributes in an Application Session</h3>
<div>
<div class="section">
<p>You can set the value of a specific session attribute using the <code class="codeph">DBMS_XS_SESSIONS.SET_ATTRIBUTE</code> procedure in PL/SQL or the <code class="codeph">setAttribute</code> method of the <code class="codeph">SessionNamespace</code> interface method in Java.</p>
<p>The calling user is required to be granted the <code class="codeph">MODIFY_ATTRIBUTE</code> application privilege on the namespace or the <code class="codeph">ADMIN_NAMESPACE</code> system privilege.</p>
<div class="infobox-note" id="GUID-B47E38D2-1C6F-41C8-8733-D72B93DCA96F__GUID-31FB6AFB-B9BC-4114-B5BC-358947588039">
<p class="notep1">Note:</p>
<p>An attribute can store a string value up to 4000 characters long.</p>
</div>
<p><a href="sessions.htm#GUID-B47E38D2-1C6F-41C8-8733-D72B93DCA96F__CJABGGGE">Example 3-18</a> shows how to set a value, <code class="codeph">val1</code>, for an attribute, <code class="codeph">attr1</code>, of the application session.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-B47E38D2-1C6F-41C8-8733-D72B93DCA96F__CJABGGGE">
<p class="titleinexample">Example 3-18 Setting a Namespace Attribute for an Application Session</p>
<pre dir="ltr">DECLARE
  sessionid RAW(16);
BEGIN
  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid);
  SYS.DBMS_XS_SESSIONS.ATTACH_SESSION(sessionid);
  SYS.DBS_XS_SESSIONS.CREATE_NAMESPACE(&#39;ns1&#39;);
<span class="bold">  SYS.DBMS_XS_SESSIONS.SET_ATTRIBUTE(&#39;ns1&#39;, &#39;attr1&#39;, &#39;val1&#39;);</span>
  SYS.DBMS_XS_SESSIONS.DETACH_SESSION;
  SYS.DBMS_XS_SESSIONS.DESTROY_SESSION(sessionid);
END;
/
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-B47E38D2-1C6F-41C8-8733-D72B93DCA96F__GUID-3FAEFABC-E90B-4567-8B3B-BCFC506A16E2">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-D82F1CAA-EE0A-4A75-A1B9-4BFCD301FDC4">SET_ATTRIBUTE Procedure</a> for more information about the syntax of this PL/SQL procedure</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">setAttribute</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-BEF803A4-9CE4-4F82-B31A-FFC5C1C0E567">About Setting a Session Namespace Attributes</a> for information about this task in Java</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBFSG99136"></a><a id="DBFSG99135"></a>
<div class="props_rev_3"><a id="GUID-A0CE910F-1FEC-42A4-A736-FA2DF663D5BA"></a>
<h3 id="DBFSG-GUID-A0CE910F-1FEC-42A4-A736-FA2DF663D5BA" class="sect3">Getting Session Attributes in an Application Session</h3>
<div>
<div class="section">
<p>You can retrieve the value of a specific session attribute using the <code class="codeph">DBMS_XS_SESSIONS.GET_ATTRIBUTE</code> procedure in PL/SQL or using the <code class="codeph">getAttribute</code> method of the <code class="codeph">SessionNamespace</code> interface method in Java.</p>
<p>The calling user is not required to be granted any privileges to get attributes using the <code class="codeph">DBMS_XS_SESSIONS.GET_ATTRIBUTE</code> procedure.</p>
<div class="infobox-note" id="GUID-A0CE910F-1FEC-42A4-A736-FA2DF663D5BA__GUID-57A9B4F1-15F1-454B-B765-B0E70166E144">
<p class="notep1">Note:</p>
<p>If an attribute value has not been set, and the <code class="codeph">FIRSTREAD_EVENT</code> has been specified for the attribute, then an attempt to read the the attribute value triggers a call to the namespace event handler. The namespace event handler procedure typically sets a value for the attribute, and performs other application-specific processing tasks.</p>
</div>
<p><a href="sessions.htm#GUID-A0CE910F-1FEC-42A4-A736-FA2DF663D5BA__CHDGJHAC">Example 3-19</a> shows how to retrieve an attribute, <code class="codeph">attr1</code>, of the application session.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-A0CE910F-1FEC-42A4-A736-FA2DF663D5BA__CHDGJHAC">
<p class="titleinexample">Example 3-19 Getting a Namespace Attribute for an Application Session</p>
<pre dir="ltr">DECLARE
  sessionid RAW(16);
  attrib_out_val VARCHAR2(4000);
BEGIN
  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid);
  SYS.DBMS_XS_SESSIONS.ATTACH_SESSION(sessionid);
  SYS.DBMS_XS_SESSIONS.CREATE_NAMESPACE(&#39;ns1&#39;);
  SYS.DBMS_XS_SESSIONS.SET_ATTRIBUTE(&#39;ns1&#39;, &#39;attr1&#39;, &#39;val1&#39;);
<span class="bold">  SYS.DBMS_XS_SESSIONS.GET_ATTRIBUTE(&#39;ns1&#39;, &#39;attr1&#39;, attrib_out_val);</span>
  SYS.DBMS_XS_SESSIONS.DETACH_SESSION;
  SYS.DBMS_XS_SESSIONS.DESTROY_SESSION(sessionid);
END;
/
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-A0CE910F-1FEC-42A4-A736-FA2DF663D5BA__GUID-55FC55FC-A213-4480-8393-81EB4A9B60EC">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-9A541912-E165-4204-A1A4-4E044628E8AE">GET_ATTRIBUTE Procedure</a> for information about the syntax of this PL/SQL procedure</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">getAttribute</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-B1C5CF5C-A134-4FE8-922C-A64292895DB2">Getting a Session Namespace Attributes</a> for information about this task in Java</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBFSG99139"></a><a id="DBFSG99138"></a>
<div class="props_rev_3"><a id="GUID-367C8369-8532-4C69-8C15-F514C3363DEC"></a>
<h3 id="DBFSG-GUID-367C8369-8532-4C69-8C15-F514C3363DEC" class="sect3">Creating Custom Attributes in an Application Session</h3>
<div>
<div class="section">
<p>You can create custom attributes in a namespace using the <code class="codeph">DBMS_XS_SESSIONS.CREATE_ATTRIBUTE</code> procedure in PL/SQL or the <code class="codeph">createAttribute</code> method of the <code class="codeph">SessionNamespace</code> interface method in Java.</p>
<p>Custom attributes differ from template attributes. Template attributes are part of the namespace template, and are automatically created in the session when the namespace is created. Custom attributes are programmatically created in a namespace, using the <code class="codeph">CREATE_ATTRIBUTE</code> procedure.</p>
<p>The calling application is required to be granted the <code class="codeph">MODIFY_ATTRIBUTE</code> application privilege on the namespace or the <code class="codeph">ADMIN_NAMESPACE</code> system privilege.</p>
<p><a href="sessions.htm#GUID-367C8369-8532-4C69-8C15-F514C3363DEC__CJAIGCFB">Example 3-20</a> shows how to create a custom attribute, <code class="codeph">customattr</code>, in a namespace of the application session.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-367C8369-8532-4C69-8C15-F514C3363DEC__CJAIGCFB">
<p class="titleinexample">Example 3-20 Creating a Custom Namespace Attribute for an Application Session</p>
<pre dir="ltr">DECLARE
  sessionid RAW(16);
  attrib_out_val VARCHAR2(4000);
BEGIN
  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid);
  SYS.DBMS_XS_SESSIONS.ATTACH_SESSION(sessionid);
  SYS.DBMS_XS_SESSIONS.CREATE_NAMESPACE(&#39;ns1&#39;);
<span class="bold">  SYS.DBMS_XS_SESSIONS.CREATE_ATTRIBUTE(&#39;ns1&#39;,&#39;customattr&#39;,&#39;default_value_custom&#39;,NULL);</span>
  SYS.DBMS_XS_SESSIONS.SET_ATTRIBUTE(&#39;ns1&#39;,&#39;customattr&#39;,&#39;newvalue&#39;);
  SYS.DBMS_XS_SESSIONS.GET_ATTRIBUTE(&#39;ns1&#39;, &#39;customattr&#39;, attrib_out_val);
  SYS.DBMS_XS_SESSIONS.DETACH_SESSION;
  SYS.DBMS_XS_SESSIONS.DESTROY_SESSION(sessionid);
END;
/
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-367C8369-8532-4C69-8C15-F514C3363DEC__GUID-D9BBE61A-551C-4CFD-8F22-30737C013DB2">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-60C4E4D8-714F-4732-815F-2261F8B5D022">CREATE_ATTRIBUTE Procedure</a> for information about the syntax of this PL/SQL procedure</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">createAttribute</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-941BB32F-DCE5-42EE-AA1A-576BC0577E57__BGBGEEGH">Example 6-13</a> for information about a Java example of this task</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBFSG99148"></a><a id="DBFSG99147"></a>
<div class="props_rev_3"><a id="GUID-0F371814-BD59-4918-B0B3-6BEFDB4A8916"></a>
<h3 id="DBFSG-GUID-0F371814-BD59-4918-B0B3-6BEFDB4A8916" class="sect3">Deleting a Namespace in an Application Session</h3>
<div>
<div class="section">
<p>You can delete a namespace and all attributes identified by it from an application session using the <code class="codeph">DBMS_XS_SESSIONS.DELETE_NAMESPACE</code> procedure in PL/SQL or the <code class="codeph">deleteAttribute</code> method of the <code class="codeph">SessionNamespace</code> interface method in Java.</p>
<p>The calling user must have the <code class="codeph">MODIFY_NAMESPACE</code> application privilege on the namespace or the <code class="codeph">ADMIN_NAMESPACE</code> system privilege.</p>
<p><a href="sessions.htm#GUID-0F371814-BD59-4918-B0B3-6BEFDB4A8916__CJABDJCE">Example 3-21</a> shows how to delete a namespace <code class="codeph">ns1</code> from an application session.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-0F371814-BD59-4918-B0B3-6BEFDB4A8916__CJABDJCE">
<p class="titleinexample">Example 3-21 Deleting a Namespace in an Application Session</p>
<pre dir="ltr">DECLARE
  sessionid RAW(16);
  out_value VARCHAR2(4000);
BEGIN
  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid);
  SYS.DBS_XS_SESSIONS.ATTACH_SESSION(sessionid);
  SYS.DBMS_XS_SESSIONS.CREATE_NAMESPACE(&#39;ns1&#39;);
  SYS.DBMS_XS_SESSIONS.SET_ATTRIBUTE(&#39;ns1&#39;, &#39;attr1&#39;, &#39;val1&#39;);
  SYS.DBMS_XS_SESSIONS.GET_ATTRIBUTE(&#39;ns1&#39;, &#39;attr1&#39;, out_value);
  <span class="bold">SYS.DBMS_XS_SESSIONS.DELETE_NAMESPACE(&#39;ns1&#39;);</span>
  SYS.DBMS_XS_SESSIONS.DETACH_SESSION;
  SYS.DBMS_XS_SESSIONS.DESTROY_SESSION(sessionid);
END;
/
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-0F371814-BD59-4918-B0B3-6BEFDB4A8916__GUID-349FAE0D-72FC-4F95-866E-A7F96BE1576F">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-E1FEF449-B93D-46A8-9319-63DB225C0BF6">DELETE_NAMESPACE Procedure</a> for information about the syntax of this PL/SQL procedure</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">deleteNamespace</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-07954A29-1F53-4609-9F69-7A883972E6D0__BGBEIACD">Example 6-11</a> for information about a Java example of this task</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBFSG99142"></a><a id="DBFSG99141"></a>
<div class="props_rev_3"><a id="GUID-56469A83-DD02-4A99-B220-43AB653E7316"></a>
<h3 id="DBFSG-GUID-56469A83-DD02-4A99-B220-43AB653E7316" class="sect3">Enabling Application Roles for a Session</h3>
<div>
<div class="section">
<p>You can enable only directly granted regular application roles of an application session user using the <code class="codeph">DBMS_XS_SESSIONS.ENABLE_ROLE</code> procedure in PL/SQL or the <code class="codeph">enableRole</code> method of the <code class="codeph">Session</code> interface in Java.</p>
<p>The <code class="codeph">DBA_XS_SESSION_ROLES</code> dynamic data dictionary view lists application roles enabled in all application sessions. The <code class="codeph">V$XS_SESSION_ROLES</code> dynamic data dictionary view lists application roles enabled in the currently attached application session.</p>
<p><a href="sessions.htm#GUID-56469A83-DD02-4A99-B220-43AB653E7316__CHDHIAAG">Example 3-22</a> shows how to enable a role in an application session.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-56469A83-DD02-4A99-B220-43AB653E7316__CHDHIAAG">
<p class="titleinexample">Example 3-22 Enabling a Role in an Application Session</p>
<pre dir="ltr">DECLARE
  sessionid RAW(16);
BEGIN
  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid);
  SYS.DBMS_XS_SESSIONS.ATTACH_SESSION(sessionid);
<span class="bold">  SYS.DBMS_XS_SESSIONS.ENABLE_ROLE(&#39;auth1_role&#39;);</span>
  SYS.DBMS_XS_SESSIONS.DETACH_SESSION;
  SYS.DBMS_XS_SESSIONS.DESTROY_SESSION(sessionid);
END;
/
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-56469A83-DD02-4A99-B220-43AB653E7316__GUID-5B869A6D-C94E-477B-86C7-94479D72096F">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-7EB3339F-E06A-4F0C-8615-D049CA3D9AD2">ENABLE_ROLE Procedure</a> for information about the syntax of this PL/SQL procedure</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about the syntax of the Java <code class="codeph">enableRole</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-51C12565-C2CE-4406-8152-3D67D4001A9B__BABIFEGI">Example 6-7</a> for information about a Java example of this task</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBFSG99145"></a><a id="DBFSG99144"></a>
<div class="props_rev_3"><a id="GUID-76CA3EEB-02C9-47C6-A6CB-9194340C65BD"></a>
<h3 id="DBFSG-GUID-76CA3EEB-02C9-47C6-A6CB-9194340C65BD" class="sect3">Disabling Application Roles for a Session</h3>
<div>
<div class="section">
<p>You can disable application roles for a specific session using the <code class="codeph">DBMS_XS_SESSIONS.DISABLE_ROLE</code> procedure in PL/SQL or the <code class="codeph">disableRole</code> method of the <code class="codeph">Session</code> interface in Java.</p>
<p><a href="sessions.htm#GUID-76CA3EEB-02C9-47C6-A6CB-9194340C65BD__CJAGGGDE">Example 3-23</a> shows how to disable a role in an application session.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-76CA3EEB-02C9-47C6-A6CB-9194340C65BD__CJAGGGDE">
<p class="titleinexample">Example 3-23 Disabling a Role in an Application Session</p>
<pre dir="ltr">DECLARE
  sessionid RAW(16);
BEGIN
  SYS.DBMS_XS_SESSIONS.CREATE_SESSION(&#39;lwuser1&#39;, sessionid);
  SYS.DBMS_XS_SESSIONS.ATTACH_SESSION(sessionid);
  SYS.DBMS_XS_SESSIONS.ENABLE_ROLE(&#39;auth1_role&#39;);
  <span class="bold">SYS.DBMS_XS_SESSIONS.DISABLE_ROLE(&#39;auth1_role&#39;);</span>
  SYS.DBMS_XS_SESSIONS.DETACH_SESSION;
  SYS.DBMS_XS_SESSIONS.DESTROY_SESSION(sessionid);
END;
/
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-76CA3EEB-02C9-47C6-A6CB-9194340C65BD__GUID-7764C2F7-FCAA-40F2-A3D7-D379291DBA75">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-4EC230A2-6155-420F-B995-0D9C4B5C3B38">DISABLE_ROLE Procedure</a> for information about the syntax of this PL/SQL procedure</p>
</li>
<li>
<p><a class="olink JADFS" target="_blank" href="../JADFS/toc.htm"><span><cite>Oracle Database Real Application Security Java API Reference</cite></span></a> for information about t he syntax of the Java <code class="codeph">disableRole</code> method (in Javadoc format)</p>
</li>
<li>
<p><a href="midtierjava.htm#GUID-A56BB20C-9ED7-440E-8B44-3F7ECD55C4D9__BABJJGHA">Example 6-8</a> for information about a Java example of this task</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="DBFSG127"></a>
<div class="props_rev_3"><a id="GUID-828BD9A7-E7E6-4A24-A69B-4E939FEA7167"></a>
<h2 id="DBFSG-GUID-828BD9A7-E7E6-4A24-A69B-4E939FEA7167" class="sect2">About Administrative APIs for External Users and Roles</h2>
<div>
<div class="p">This section describes the following administrative APIs that are required for external users and roles:
<ul style="list-style-type: disc;">
<li>
<p><a href="plsql_pkg.htm#GUID-9C80BEC1-29EA-430D-B597-3CA6182A7DFB">CREATE_SESSION Procedure</a></p>
</li>
<li>
<p><a href="plsql_pkg.htm#GUID-2CCDFDD1-F3B4-4EE5-A261-7871B18A0A91">ATTACH_SESSION Procedure</a></p>
</li>
<li>
<p><a href="plsql_pkg.htm#GUID-C93E0B47-6F3E-44E0-8A3F-5EE868050923">ASSIGN_USER Procedure</a></p>
</li>
<li>
<p><a href="plsql_pkg.htm#GUID-0F69D39A-CA89-4F88-9268-BABEED216B9D">SAVE_SESSION Procedure</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5198">
<tr>
<td class="cellalignment5287">
<table class="cellalignment5203">
<tr>
<td class="cellalignment5202"><a href="users_roles.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5202"><a href="acls_sec_classes.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2012, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5289">
<table class="cellalignment5201">
<tr>
<td class="cellalignment5202"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5202"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5202"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5202"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5202"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5202"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>