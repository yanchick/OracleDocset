<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-5092"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Oracle%20Fusion%20Middleware%20Integration%20with%20Real%20Application%20Security"></a><title>Oracle Fusion Middleware Integration with Real Application Security</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="external users and external roles, for application integration, application integration, support for external users and roles, external users, session modes, anonymous user, external roles, secure mode, trusted mode, session APIs for, namespaces for"/>
<meta name="dcterms.created" content="2017-02-17T18:31:46Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Real Application Security Administrator&#39;s and Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E48189-13"/>
<meta name="dcterms.isVersionOf" content="DBFSG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2012, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="midtierjava.htm" title="Previous" type="text/html"/>
<link rel="Next" href="session_service.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48189-13.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-BDA0279D-FB0F-4704-9605-BFC8A24F0056"></a> <span id="PAGE" style="display:none;">14/25</span> <!-- End Header -->
<a id="DBFSG507"></a>
<h1 id="DBFSG-GUID-BDA0279D-FB0F-4704-9605-BFC8A24F0056" class="sect1"><span class="enumeration_chapter">7</span> Oracle Fusion Middleware Integration with Real Application Security</h1>
<div>
<p>Real Application Security adds external user and role support for application integration, that can be used, for example, with Oracle Fusion Middleware. For Oracle Fusion Middleware, the users and roles are also externalized to a common, single repository with centralized management and single authentication of the user interface using the Authorization Policy Manager. From a Real Application Security perspective, the integrated users and roles (including application roles) are externalized principals because Oracle Fusion Middleware manages them externally. The mid-tier initialization and authorization operations are the same as those described in <a href="midtierjava.htm#GUID-2FCEEFB5-83DC-4D5A-982A-690C8DCC4181">Using Real Application Security in Java Applications</a>.</p>
<div class="p">This chapter describes the following topics:
<ul style="list-style-type: disc;">
<li>
<p><a href="external_roles.htm#GUID-796C340D-4116-4766-83A9-12F1F728C613">About External Users and External Roles</a></p>
</li>
<li>
<p><a href="external_roles.htm#GUID-50BBC5C8-94D6-48DF-8CB0-62F2DA863A44">Session APIs for External Users and Roles</a></p>
</li>
</ul>
</div>
</div>
<a id="DBFSG509"></a><a id="DBFSG508"></a>
<div class="props_rev_3"><a id="GUID-796C340D-4116-4766-83A9-12F1F728C613"></a>
<h2 id="DBFSG-GUID-796C340D-4116-4766-83A9-12F1F728C613" class="sect2">About External Users and External Roles</h2>
<div>
<p>An external user is an end-user accessing a service. User information is stored in the identity store, typically instantiated by the WebLogic Authenticator. This user is neither a database user nor a Real Application Security application user. An external user does not have any footprint in the database. But, an external user needs to access the database for application data. Therefore, a Real Application Security context (session) is established for such a user to control the user&#39;s access to the required data.</p>
<p>An anonymous user is an unauthenticated user, or a user whose credentials have not been validated. An anonymous user is permitted to access only unprotected resources such as public data from a database. An application can enable or disable the use of anonymous users.</p>
<p>An external role or group is a collection of users and other groups, which can be hierarchical. For example, a group can include arbitrarily nested groups.</p>
<p>An external application role is a collection of users, groups, and application roles, which can be hierarchical. This role is specific to the application, defined by the application policy, and may not be known to the J2EE container. Application roles are scoped because they are visible only when the application runs. They can be mapped to other application roles defined in the same application scope and also to enterprise users or groups. Application roles are used in authorization decisions.</p>
<p>Similar to external users, external roles and application roles have no footprint in the Real Application Security system. They are used to control the way the Real Application Security ACLs grant data access to an application.</p>
<p>External roles and application roles also enforce the details of data access. External users need some basic database privileges, typically the object privilege to run SELECT on an application table. These privileges can be granted through a Real Application Security dynamic application role, which is enabled when a user session is attached. For example, to grant privileges to an external user or role, specify the principal type as <code class="codeph">XS_ACL.PTYPE_EXTERNAL</code> in an ACE list when creating an ACL. See the <span class="q">&#34;<a href="plsql_pkg.htm#GUID-9390C2EF-6A28-4BA0-A338-8E9A95A04F21">CREATE_ACL Procedure</a>&#34;</span> for more information.</p>
<div class="section">
<p class="subhead2">Session Modes for External Users</p>
</div>
<!-- class="section" -->
<div class="section">
<p>Real Application Security supports the following two modes of operation for sessions:</p>
<ul style="list-style-type: disc;">
<li>
<p>Secure Mode</p>
<p>In secure mode, data security is enforced at the database server. By default, a session is created in a secure mode for all users.</p>
</li>
<li>
<p>Trusted mode</p>
<p>A trusted mode is a mode in which data security is enforced at the middle tier and not at the database server. In such a mode, the data security implemented by Real Application Security is bypassed. So, creating a session in trusted mode is a privileged operation.</p>
<p>Trusted mode is allowed only for external users, and only when the dispatcher has <code class="codeph">CREATE_TRUSTED_SESSION</code> privilege. This privilege can be granted to the dispatcher user as follows:</p>
<pre dir="ltr">XS_ADMIN_UTIL.grant_system_privilege(&#39;CREATE_TRUSTED_SESSION&#39;,&#39;dispatcher&#39;, XS_ADMIN_UTIL.PTYPE_XS); 
</pre></li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="DBFSG510"></a>
<div class="props_rev_3"><a id="GUID-50BBC5C8-94D6-48DF-8CB0-62F2DA863A44"></a>
<h2 id="DBFSG-GUID-50BBC5C8-94D6-48DF-8CB0-62F2DA863A44" class="sect2">Session APIs for External Users and Roles</h2>
<div>
<div class="p">This section describes the following topics for external users and roles:
<ul style="list-style-type: disc;">
<li>
<p><a href="external_roles.htm#GUID-6A036ECB-88B3-4E02-A437-D5995855ADC9">Namespace for External Users</a></p>
</li>
<li>
<p><a href="external_roles.htm#GUID-76668177-81BF-47DB-A053-3B18DD1676BD">Creating a Session</a></p>
</li>
<li>
<p><a href="external_roles.htm#GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D">Attaching a Session</a></p>
</li>
<li>
<p><a href="external_roles.htm#GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76">Assigning a User to a Session</a></p>
</li>
<li>
<p><a href="external_roles.htm#GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857">Saving a Session and Aborting a Session</a></p>
</li>
</ul>
</div>
</div>
<a id="DBFSG511"></a>
<div class="props_rev_3"><a id="GUID-6A036ECB-88B3-4E02-A437-D5995855ADC9"></a>
<h3 id="DBFSG-GUID-6A036ECB-88B3-4E02-A437-D5995855ADC9" class="sect3">Namespace for External Users</h3>
<div>
<p>The namespaces for external users are enhanced with attribute manipulation features during creating, attaching, and assigning a session. External users are able to perform the following activities:</p>
<ul style="list-style-type: disc;">
<li>
<p>Creating namespace with attributes while creating a session</p>
</li>
<li>
<p>Setting namespace attributes while attaching a session and assigning a user</p>
</li>
<li>
<p>Saving a session and leaving it as attached</p>
</li>
</ul>
</div>
</div>
<a id="DBFSG513"></a><a id="DBFSG514"></a><a id="DBFSG515"></a><a id="DBFSG516"></a><a id="DBFSG512"></a>
<div class="props_rev_3"><a id="GUID-76668177-81BF-47DB-A053-3B18DD1676BD"></a>
<h3 id="DBFSG-GUID-76668177-81BF-47DB-A053-3B18DD1676BD" class="sect3">Creating a Session</h3>
<div>
<div class="section">
<p>To create a Real Application Security application<a id="d29127e663" class="indexterm-anchor"></a> session, use the <a id="d29127e668" class="indexterm-anchor"></a><code class="codeph">createSession</code> method of the <code class="codeph">XSSessionManager</code> class.</p>
<p>For external users, this method creates a Session object on the server as well as its corresponding middle-tier representation with namespaces and attributes. This method also creates the Namespaces and sets corresponding attributes given in the Namespace/AttributeValue. The cookie can be used to identify the newly created Real Application Security application session in future calls, until the cookie value is changed or the session is destroyed.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Syntax</p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">public abstract Session <span class="bold">createSession(</span>java.sql.Connection conn,
                                      ExternalUser eUser,
                                      java.lang.String cookie,
                                      java.util.Collection&lt;NamespaceValue&gt; nav<span class="bold">)</span>
                                      throws InvalidXSUserException,
                                             AccessDeniedException,
                                             java.sql.SQLException,
                                             XSSessionException,
                                             InvalidXSNamespaceException
</pre>
<pre dir="ltr">public abstract Session <span class="bold">createSessionTrusted(</span>java.sql.Connection conn,
                             ExternalUser externalUser,
                             java.lang.String cookie,
                             java.util.Collection&lt;NamespaceValue&gt; nameSpaceValues<span class="bold">)</span>
                             throws InvalidXSUserException,
                             AccessDeniedException,
                             java.sql.SQLException,
                             SQLException,
                             XSException,
                             InvalidXSNamespaceException
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Parameter</p>
</div>
<!-- class="section" -->
<div class="section">
<div class="tblformal" id="GUID-76668177-81BF-47DB-A053-3B18DD1676BD__GUID-B244E1E8-853D-404A-AD01-BB7731ED015F">
<table class="cellalignment5205" summary="Parameter description for createSession method for external users">
<thead>
<tr class="cellalignment5199">
<th class="cellalignment5294" id="d29127e712">Parameter</th>
<th class="cellalignment5333" id="d29127e715">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5199">
<td class="cellalignment5297" id="d29127e720" headers="d29127e712">
<p><code class="codeph">conn</code></p>
</td>
<td class="cellalignment5334" headers="d29127e720 d29127e715">
<p>The JDBC connection for database server roundtrip</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5297" id="d29127e728" headers="d29127e712">
<p><code class="codeph">eUser</code> or <code class="codeph">externalUser</code></p>
</td>
<td class="cellalignment5334" headers="d29127e728 d29127e715">
<p>The external user associated with the session</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5297" id="d29127e739" headers="d29127e712">
<p><code class="codeph">cookie</code></p>
</td>
<td class="cellalignment5334" headers="d29127e739 d29127e715">
<p>The session cookie used to identify the external user</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5297" id="d29127e747" headers="d29127e712">
<p><code class="codeph">nav</code> or <code class="codeph">nameSpaceValues</code></p>
</td>
<td class="cellalignment5334" headers="d29127e747 d29127e715">
<p>A list of namespaces with corresponding attributes to be created for the namespaces</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Example</p>
</div>
<!-- class="section" -->
<div class="section">
<p><a href="external_roles.htm#GUID-76668177-81BF-47DB-A053-3B18DD1676BD__CHDHBCDJ">Example 7-1</a> demonstrates how to create a Real Application Security session for external users. The <code class="codeph">createSession</code> method is in bold typeface.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-76668177-81BF-47DB-A053-3B18DD1676BD__CHDHBCDJ">
<p class="titleinexample">Example 7-1 Creating a Real Application Security Session for External Users</p>
<pre dir="ltr">.
.
.
static Connection lws_conn =null;
static XSSessionManager sm = null;
lws_conn = DriverManager.getConnection(lws_conn_string, username, password);
sm = XSSessionManager.getSessionManager(privConn,20,29999999);
.
.
.
String trituser = &#34;TUSER01&#34;;
String cookie = &#34;some_cookie&#34;;
String extuser = &#34;ExtPrincp&#34;;
String extuuid = &#34;ExtPrincp&#34;;

Session lws = null;

List&lt;AttributeValue&gt; nsavList = new ArrayList&lt;AttributeValue&gt;();
AttributeValue nsav1 = new AttributeValue(&#34;ATTR01&#34;,&#34;value1&#34;);
nsavList.add(nsav1);
AttributeValue nsav2 = new AttributeValue(&#34;ATTR02&#34;,&#34;value2&#34;);
nsavList.add(nsav2);
NamespaceValue nav = new NamespaceValue(&#34;NST01&#34;,nsavList);
List&lt;NamespaceValue&gt; nsList = new ArrayList();
nsList.add(nav);

/* create session with external user name in secure mode with namespace attr-vals and cookie */
<span class="bold">lws = sm.createSession(lws_conn, new ExternalUser(extuser, extuuid), cookie, nsList);</span>
sm.destroySession(lws_conn, lws);

/*Create external user session in secure mode*/
<span class="bold">lws = sm.createSession(lws_conn, new ExternalUser(extuser, extuuid), null, null);</span>
sm.destroySession(lws_conn, lws);

/*Create external user session in secure mode with namespace attribute values */
<span class="bold">lws = sm.createSession(lws_conn, new ExternalUser(extuser, extuuid), null, nsList);</span>
sm.destroySession(lws_conn, lws);

/* create session with external user name in secure mode with cookie */
<span class="bold">lws = sm.createSession(lws_conn, new ExternalUser(extuser, extuuid), cookie, null);</span>
sm.destroySession(lws_conn, lws);

/* create trusted session with only external user name */
<span class="bold">lws = sm.createSessionTrusted(lws_conn, new ExternalUser(extuser, extuuid), null, null);</span>
sm.destroySession(lws_conn, lws);

/* create session with RAS user name in secure mode with namespace and cookie */
<span class="bold">lws = sm.createSession(lws_conn, trituser, cookie, nsList);</span>
sm.destroySession(lws_conn, lws);
</pre></div>
<!-- class="example" --></div>
</div>
<a id="DBFSG518"></a><a id="DBFSG519"></a><a id="DBFSG520"></a><a id="DBFSG522"></a><a id="DBFSG521"></a><a id="DBFSG517"></a>
<div class="props_rev_3"><a id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D"></a>
<h3 id="DBFSG-GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D" class="sect3">Attaching a Session</h3>
<div>
<div class="section">
<p>To attach an <a id="d29127e904" class="indexterm-anchor"></a>application session, use the <code class="codeph">attachSession</code> method of the <code class="codeph">XSSessionManager</code> class.</p>
<p>For external users, this method attaches the JDBC connection to the specified session object. This method also sets the dynamic application roles, external roles, authentication time, and creates namespaces for the session. It also gives a list of a namespace and its corresponding namespace attributes to be created and set. If the namespace does not exist, then this method creates the namespace, and then sets the corresponding attributes.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Syntax</p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">public abstract void <span class="bold">attachSession(</span>
             java.sql.Connection conn,
             Session session,
             java.util.Collection&lt;java.lang.String&gt; enabledDynamicRoles,
             java.util.Collection&lt;java.lang.String&gt; disabledDynamicRoles,
             java.util.Collection&lt;ExternalRole&gt; externalRoles,
             java.util.Collection&lt;NamespaceValue&gt; nav,
             java.sql.Timestamp authenticationTime<span class="bold">)</span>
             throws java.sql.SQLException,
                    AccessDeniedException,
             InvalidSessionException,
             XSSessionException,
             InvalidXSNamespaceException

public abstract Session <span class="bold">attachSessionByCookie(</span>
          java.sql.Connection conn,
          java.lang.String cookie,
          java.util.Collection&lt;java.lang.String&gt; enabledDynamicRoles,
          java.util.Collection&lt;java.lang.String&gt; disabledDynamicRoles,
          java.util.Collection&lt;oracle.security.xs.ExternalRole&gt; externalRoles,
          java.util.Collection&lt;oracle.security.xs.NamespaceValue&gt; namespaceValues,
          java.sql.Timestamp authenticationTime<span class="bold">)</span>
          throws java.sql.SQLException,
                 AccessDeniedException,
                 InvalidSessionException,
                 XSException,
                 InvalidXSNamespaceException

public abstract Session <span class="bold">attachSessionByID</span><span class="bold">(</span>
          java.sql.Connection conn,
          java.lang.String id,
          java.util.Collection&lt;java.lang.String&gt; enabledDynamicRoles,
          java.util.Collection&lt;java.lang.String&gt; disabledDynamicRoles,
          java.util.Collection&lt;oracle.security.xs.ExternalRole&gt; externalRoles,
          java.util.Collection&lt;oracle.security.xs.NamespaceValue&gt; namespaceValues,
          java.sql.Timestamp authenticationTime<span class="bold">)</span>
          throws java.sql.SQLException,
                 AccessDeniedException,
                 InvalidSessionException,
                 XSException,
                 InvalidXSNamespaceException
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Parameters</p>
</div>
<!-- class="section" -->
<div class="section">
<div class="tblformal" id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__GUID-4944A0A1-8FF8-4C21-A312-C469A991D023">
<table class="cellalignment5205" summary="Parameter description for attachSessionByID method for external users">
<thead>
<tr class="cellalignment5199">
<th class="cellalignment5316" id="d29127e956">Parameter</th>
<th class="cellalignment5335" id="d29127e959">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5199">
<td class="cellalignment5317" id="d29127e964" headers="d29127e956">
<p><code class="codeph">conn</code></p>
</td>
<td class="cellalignment5336" headers="d29127e964 d29127e959">
<p>The database connection to be attached to the application session</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5317" id="d29127e972" headers="d29127e956">
<p><code class="codeph">session</code></p>
</td>
<td class="cellalignment5336" headers="d29127e972 d29127e959">
<p>The Session object to be attached</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5317" id="d29127e980" headers="d29127e956">
<p><code class="codeph">cookie</code></p>
</td>
<td class="cellalignment5336" headers="d29127e980 d29127e959">
<p>The session cookie</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5317" id="d29127e988" headers="d29127e956">
<p><code class="codeph">id</code></p>
</td>
<td class="cellalignment5336" headers="d29127e988 d29127e959">
<p>The session identifier</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5317" id="d29127e996" headers="d29127e956">
<p><code class="codeph">enabledDynamicRoles</code></p>
</td>
<td class="cellalignment5336" headers="d29127e996 d29127e959">
<p>A collection of dynamic application role names to be enabled</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5317" id="d29127e1004" headers="d29127e956">
<p><code class="codeph">disabledDynamicRoles</code></p>
</td>
<td class="cellalignment5336" headers="d29127e1004 d29127e959">
<p>A collection of dynamic application role names to be disabled</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5317" id="d29127e1012" headers="d29127e956">
<p><code class="codeph">externalRoles</code></p>
</td>
<td class="cellalignment5336" headers="d29127e1012 d29127e959">
<p>A collection of external roles to be enabled</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5317" id="d29127e1020" headers="d29127e956">
<p><code class="codeph">nav</code> or <code class="codeph">namespaceValues</code></p>
</td>
<td class="cellalignment5336" headers="d29127e1020 d29127e959">
<p>A list of namespaces with corresponding attributes to be set</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5317" id="d29127e1031" headers="d29127e956">
<p><code class="codeph">authenticationTime</code></p>
</td>
<td class="cellalignment5336" headers="d29127e1031 d29127e959">
<p>The authentication time to be sent to the database server</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Example</p>
</div>
<!-- class="section" -->
<div class="section">
<p><a href="external_roles.htm#GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__CHDBGHHC">Example 7-2</a> demonstrates how to attach a Real Application Security session for external users. The <code class="codeph">attachSession</code> method is in bold typeface.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">External Role Behavior while Attaching a Session</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>After an external <a id="d29127e1056" class="indexterm-anchor"></a>role is enabled for a session, it is stored as part of the session context as an ID. This role ID is used in access control, when you call the <code class="codeph">checkAcl</code> method on both middle tier and database server. This is same as regular Real Application Security application role or dynamic application role.</p>
</li>
<li>
<p>A Real Application Security ID is assigned for every external role passed while attaching a session, whether the role is referred by ACL or not.</p>
</li>
<li>
<p>The scope of the external role is within the boundary of attaching or detaching a session. An external role cannot be enabled for attaching multiple sessions, and it does not need to be explicitly disabled. So, the roles assigned for attaching the first session will not be automatically enabled while attaching the next session, unless the roles are assigned again.</p>
<p>This behavior is completely different from the behavior of regular Real Application Security application roles or dynamic application roles, where the application roles assigned for attaching the first session are automatically enabled while attaching the next session.</p>
</li>
<li>
<p>After a session is attached, the external role remains consistent till detaching and reattach the session. The role may even be revoked for the user.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="example" id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__CHDBGHHC">
<p class="titleinexample">Example 7-2 Attaching a Real Application Security Session for External Users</p>
<pre dir="ltr">.
.
.
static Connection lws_conn =null;
static XSSessionManager sm = null;
.
.
.
lws_conn = DriverManager.getConnection(lws_conn_string, username, password);
sm = XSSessionManager.getSessionManager(privConn,20,29999999);
.
.
.
String cookie = &#34;some_cookie&#34;;
String extuser = &#34;ExtPrincp&#34;;
String extuuid = &#34;ExtPrincp&#34;;

Session lws = null;
Session lws2 = null

List&lt;AttributeValue&gt; nsavList = new ArrayList&lt;AttributeValue&gt;();

AttributeValue nsav1 = new AttributeValue(&#34;ATTR01&#34;,&#34;value1&#34;);
nsavList.add(nsav1);
AttributeValue nsav2 = new AttributeValue(&#34;ATTR02&#34;,&#34;value2&#34;);
nsavList.add(nsav2);

NamespaceValue nav = new NamespaceValue(&#34;NST01&#34;,nsavList);

List&lt;NamespaceValue&gt; nsList = new ArrayList();
nsList.add(nav);

List &lt;String&gt; dynamicRoles = new ArrayList &lt;String&gt;();
dynamicRoles.add(&#34;DYNROLE001&#34;);
dynamicRoles.add(&#34;DYNROLE002&#34;);

List &lt;ExternalRole&gt; extRoles = new ArrayList &lt;ExternalRole&gt;();
extRoles.add(new ExternalRole(&#34;EXTPRIN01&#34;));
extRoles.add(new ExternalRole(&#34;MYEXTPRIN02&#34;));

lws = sm.createSession(lws_conn, new ExternalUser(extuser, extuuid), cookie + &#34;secure&#34;, nsList, false);
<span class="bold">sm.attachSession(lws_conn, lws, enabledDynamicRoles, disabledDynamicRoles, extRoles, null, null);</span>
sm.detachSession(lws);
<span class="bold">sm.attachSession(lws_conn, lws, enabledDynamicRoles, disabledDynamicRoles, extRoles, null, new Timestamp(System.currentTimeMillis()));</span>
sm.detachSession(lws);
<span class="bold">sm.attachSession(lws_conn, lws, enabledDynamicRoles, disabledDynamicRoles, extRoles, nsList, null);</span>
sm.detachSession(lws);
<span class="bold">sm.attachSession(lws_conn, lws, enabledDynamicRoles, disabledDynamicRoles, extRoles, nsList, new Timestamp(System.currentTimeMillis())); </span>
sm.detachSession(lws);

lws2 = sm.createSession(lws_conn, new ExternalUser(extuser, extuuid), cookie + &#34;trusted&#34;, nsList, true);
<span class="bold">lws2 = sm.attachSessionByCookie(lws_conn, lws.getSessionCookie(), null, enabledDynamicRoles, disabledDynamicRoles, extRoles, null, null);</span>
sm.detachSession(lws2);
<span class="bold">lws2 = sm.attachSessionByCookie(lws_conn, lws.getSessionCookie(), null, enabledDynamicRoles, disabledDynamicRoles, extRoles, nsList, new Timestamp(System.currentTimeMillis()));</span>
sm.detachSession(lws2);
</pre></div>
<!-- class="example" --></div>
</div>
<a id="DBFSG524"></a><a id="DBFSG525"></a><a id="DBFSG526"></a><a id="DBFSG527"></a><a id="DBFSG523"></a>
<div class="props_rev_3"><a id="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76"></a>
<h3 id="DBFSG-GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76" class="sect3">Assigning a User to a Session</h3>
<div>
<div class="section">
<p>To assign a name to a <a id="d29127e1212" class="indexterm-anchor"></a>previously anonymous user, use the <code class="codeph">assignUser</code> method of the <code class="codeph">XSSessionManager</code> class.</p>
<p>For external users, this method assigns a named user to a previously anonymous user, sets the dynamic application roles, external role, and authentication time. If a list of Namespace/Attribute values is given, this method creates each namespace that does not exist, and sets the corresponding attributes.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Syntax</p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">public abstract void <span class="bold">assignUser(</span>
                      Session session,
                      ExternalUser targetUser,
                      java.util.Collection&lt;java.lang.String&gt; enabledDynamicRoles,
                      java.util.Collection&lt;java.lang.String&gt; disabledDynamicRoles,
                      java.util.Collection&lt;ExternalRole&gt; externalRoles,
                      java.util.Collection&lt;NamespaceValue&gt; naValues,
                      java.sql.Timestamp authenticationTime<span class="bold">)</span>
                      throws java.sql.SQLException,
                             AccessDeniedException,
                             InvalidSessionException,
                             XSSessionException,
                             InvalidXSNamespaceException
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Parameters</p>
</div>
<!-- class="section" -->
<div class="section">
<div class="tblformal" id="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76__GUID-1B7CA592-138C-4505-9325-F826B5676E8B">
<table class="cellalignment5205" summary="Parameter description for assignUser method for external users">
<thead>
<tr class="cellalignment5199">
<th class="cellalignment5279" id="d29127e1249">Parameters</th>
<th class="cellalignment5280" id="d29127e1252">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5199">
<td class="cellalignment5281" id="d29127e1257" headers="d29127e1249">
<p><code class="codeph">session</code></p>
</td>
<td class="cellalignment5282" headers="d29127e1257 d29127e1252">
<p>The session object to assign the user to</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5281" id="d29127e1265" headers="d29127e1249">
<p><code class="codeph">targetUser</code></p>
</td>
<td class="cellalignment5282" headers="d29127e1265 d29127e1252">
<p>An <code class="codeph">ExternalUser</code> object initialized based on authentication</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5281" id="d29127e1276" headers="d29127e1249">
<p><code class="codeph">enabledDynamicRoles</code></p>
</td>
<td class="cellalignment5282" headers="d29127e1276 d29127e1252">
<p>A list of dynamic application role names to be enabled</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5281" id="d29127e1284" headers="d29127e1249">
<p><code class="codeph">disabledDynamicRoles</code></p>
</td>
<td class="cellalignment5282" headers="d29127e1284 d29127e1252">
<p>A list of dynamic application role names to be disabled</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5281" id="d29127e1292" headers="d29127e1249">
<p><code class="codeph">externalRoles</code></p>
</td>
<td class="cellalignment5282" headers="d29127e1292 d29127e1252">
<p>A collection of external roles to be enabled</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5281" id="d29127e1300" headers="d29127e1249">
<p><code class="codeph">namespaceValues</code></p>
</td>
<td class="cellalignment5282" headers="d29127e1300 d29127e1252">
<p>A list of namespaces with corresponding attributes to be set</p>
</td>
</tr>
<tr class="cellalignment5199">
<td class="cellalignment5281" id="d29127e1308" headers="d29127e1249">
<p><code class="codeph">authenticationTime</code></p>
</td>
<td class="cellalignment5282" headers="d29127e1308 d29127e1252">
<p>The a timestamp indicated when the user authenticated</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Example</p>
</div>
<!-- class="section" -->
<div class="section">
<p><a href="external_roles.htm#GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76__CHDBCHAD">Example 7-3</a> demonstrates how to assign a Real Application Security session to external users. The <code class="codeph">assignUser</code> method is in bold typeface.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76__CHDBCHAD">
<p class="titleinexample">Example 7-3 How to Assign a Real Application Security Session to External Users</p>
<pre dir="ltr">.
.
.
static Connection lws_conn =null;
static XSSessionManager sm = null;
.
.
.
lws_conn = DriverManager.getConnection(lws_conn_string, username, password);
sm = XSSessionManager.getSessionManager(privConn,20,29999999);
.
.
.
String cookie = &#34;some_cookie&#34;;
String extuser = &#34;ExtPrincp&#34;;
String extuuid = &#34;ExtPrincp&#34;;

Session lws = null;

List&lt;AttributeValue&gt; nsavList = new ArrayList&lt;AttributeValue&gt;();

AttributeValue nsav1 = new AttributeValue(&#34;ATTR01&#34;,&#34;value1&#34;);
nsavList.add(nsav1);
AttributeValue nsav2 = new AttributeValue(&#34;ATTR02&#34;,&#34;value2&#34;);
nsavList.add(nsav2);

NamespaceValue nav = new NamespaceValue(&#34;NST01&#34;,nsavList);

List&lt;NamespaceValue&gt; nsList = new ArrayList();
nsList.add(nav);

List &lt;String&gt; dynamicRoles = new ArrayList &lt;String&gt;();
dynamicRoles.add(&#34;DYNROLE001&#34;);
dynamicRoles.add(&#34;DYNROLE002&#34;);

List &lt;ExternalRole&gt; extRoles = new ArrayList &lt;ExternalRole&gt;();
extRoles.add(new ExternalRole(&#34;EXTPRIN01&#34;));
extRoles.add(new ExternalRole(&#34;MYEXTPRIN02&#34;));

lws = sm.createAnonymousSession(lws_conn, cookie + &#34;trusted&#34;, nsList, true);
sm.attachSession(lws_conn, lws, null, null, null, null, null);
<span class="bold">sm.assignUser(lws, euser, dynamicRoles, dynamicRoles, extRoles, null, null);</span>
sm.detachSession(lws);

lws = sm.createAnonymousSession(lws_conn, cookie + &#34;secure&#34;, nsList, false);
sm.attachSession(lws_conn, lws, null, null, null, null, null);
<span class="bold">sm.assignUser(lws, euser, dynamicRoles, dynamicRoles, extRoles, null, new Timestamp(System.currentTimeMillis()));</span>
sm.detachSession(lws);


lws = sm.createAnonymousSession(lws_conn, cookie + &#34;trusted&#34;, nsList, true);
sm.attachSession(lws_conn, lws, null, null, null, null, null);
<span class="bold">sm.assignUser(lws, euser, dynamicRoles, dynamicRoles, null, nsList, null);</span>
sm.detachSession(lws);
</pre></div>
<!-- class="example" --></div>
</div>
<a id="DBFSG529"></a><a id="DBFSG530"></a><a id="DBFSG531"></a><a id="DBFSG528"></a>
<div class="props_rev_3"><a id="GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857"></a>
<h3 id="DBFSG-GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857" class="sect3">Saving a Session and Aborting a Session</h3>
<div>
<div class="section">
<p>To save the changes <a id="d29127e1449" class="indexterm-anchor"></a>of a session at the database server and keep the session still attached, use the <code class="codeph">saveSession</code> method of the <code class="codeph">XSSessionManager</code> class.</p>
<p>For external users, this method saves the current session. Similar to the <code class="codeph">detachSession</code> method, this method commits all session changes to the back end and a database roundtrip is required to perform this operation. But, unlike the <code class="codeph">detachSession</code> method, this method keeps the session attached. This method is mainly used to save an application context (namespace).</p>
<p>To abort the changes <a id="d29127e1470" class="indexterm-anchor"></a>of a session at the database server and detach from the session, use the <code class="codeph">abortSession</code> method of the <code class="codeph">XSSessionManager</code> class.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Syntax</p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">public abstract void <span class="bold">saveSession(</span>Session session<span class="bold">)</span>
                          throws java.sql.SQLException,
                                 NotAttachedException,
                                 XSSessionException

public abstract void <span class="bold">abortSession(</span>Session session<span class="bold">)</span>
                          throws java.sql.SQLException,
                                 NotAttachedException,
                                 XSException
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Example</p>
</div>
<!-- class="section" -->
<div class="section">
<p><a href="external_roles.htm#GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857__CHDEGGGJ">Example 7-4</a> demonstrates how to save a Real Application Security external user session. The <code class="codeph">saveSession</code> method is in bold typeface.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857__CHDEGGGJ">
<p class="titleinexample">Example 7-4 How to Save a Real Application Security External User Session</p>
<pre dir="ltr">.
.
.
static Connection lws_conn =null;
static XSSessionManager sm = null;
.
.
.
lws_conn = DriverManager.getConnection(lws_conn_string, username, password);
sm = XSSessionManager.getSessionManager(privConn,20,29999999);
.
.
.
String cookie = &#34;some_cookie&#34;;
String extuser = &#34;ExtPrincp&#34;;
String extuuid = &#34;ExtPrincp&#34;;

Session lws = null;

List&lt;AttributeValue&gt; nsavList = new ArrayList&lt;AttributeValue&gt;();

AttributeValue nsav1 = new AttributeValue(&#34;ATTR01&#34;,&#34;value1&#34;);
nsavList.add(nsav1);
AttributeValue nsav2 = new AttributeValue(&#34;ATTR02&#34;,&#34;value2&#34;);
nsavList.add(nsav2);

NamespaceValue nav = new NamespaceValue(&#34;NST01&#34;,nsavList);

List&lt;NamespaceValue&gt; nsList = new ArrayList();
nsList.add(nav);

List &lt;String&gt; dynamicRoles = new ArrayList &lt;String&gt;();
dynamicRoles.add(&#34;DYNROLE001&#34;);
dynamicRoles.add(&#34;DYNROLE002&#34;);

List &lt;ExternalRole&gt; extRoles = new ArrayList &lt;ExternalRole&gt;();
extRoles.add(new ExternalRole(&#34;EXTPRIN01&#34;));
extRoles.add(new ExternalRole(&#34;MYEXTPRIN02&#34;));

lws = sm.createAnonymousSession(lws_conn, cookie + &#34;trusted&#34;, nsList, true);
sm.attachSession(lws_conn, lws, null, null, null, null, null);
sm.assignUser(lws, euser, dynamicRoles, dynamicRoles, extRoles, null, null);
lws.deleteNamespace(&#34;NST01&#34;);
<span class="bold">sm.saveSession(lws);</span>
</pre></div>
<!-- class="example" --></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5198">
<tr>
<td class="cellalignment5287">
<table class="cellalignment5203">
<tr>
<td class="cellalignment5202"><a href="midtierjava.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5202"><a href="session_service.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2012, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5289">
<table class="cellalignment5201">
<tr>
<td class="cellalignment5202"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5202"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5202"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5202"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5202"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5202"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>