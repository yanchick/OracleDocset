<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-1755"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Managing%20Schemas"></a><title>Managing Schemas</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 073"/>
<meta name="dcterms.created" content="2013-05-24T12:42:55Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Application Express Administration Guide"/>
<meta name="dcterms.identifier" content="E17965-08"/>
<meta name="dcterms.isVersionOf" content="AEADM"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="adm_mg_service_set.htm" title="Previous" type="text/html"/>
<link rel="Next" href="adm_create_wkspc.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17965-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">27/34</span> <!-- End Header --><a id="CIHIEEDI"></a><a id="AEADM230"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h1 class="sect1"><span class="secnum">2.5</span> Managing Schemas</h1>
<p>This section describes how to manage the schemas within an Oracle Application Express instance.</p>
<p class="subhead2"><a id="AEADM417"></a>Topics:</p>
<ul>
<li>
<p><a href="#BEJEDCEJ">Determining the Oracle Application Express Engine Schema</a></p>
</li>
<li>
<p><a href="#BEJEFJAE">Understanding Oracle Default Schema Restrictions</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="adm_mg_wrkspc.htm#CHDBDAJI">&#34;Viewing the Parsing Schemas Report&#34;</a> and <a href="adm_mg_wrkspc.htm#CHDBDCCJ">&#34;Managing Workspace to Schema Assignments&#34;</a></div>
<a id="BEJEDCEJ"></a><a id="AEADM231"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h2 class="sect2"><span class="secnum">2.5.1</span> Determining the Oracle Application Express Engine <a id="sthref352"></a><a id="sthref353"></a>Schema</h2>
<p>A schema is a logical container for the database objects. Instance administrators may need to perform certain actions within the Application Express engine schema. For example, in order for an Instance administrator to have the ability to assign Oracle default schemas, the database administrator (DBA) must explicitly grant the privilege by running the <code>APEX_SITE_ADMIN.UNRESTRICT_SCHEMA</code> procedure within the Application Express engine.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BEJEFJAE">&#34;Understanding Oracle Default Schema Restrictions&#34;</a> for information about the <code>APEX_SITE_ADMIN.UNRESTRICT_SCHEMA</code> procedure</div>
<p>To determine the current Application Express engine schema for your Oracle Application Express instance:</p>
<ol>
<li>
<p>Use SQL*Plus to connect to the database.</p>
</li>
<li>
<p>Run the following query in a schema with DBA privileges (for example, <code>SYSTEM</code>).</p>
<pre>SELECT DISTINCT TABLE_OWNER FROM all_synonyms
WHERE SYNONYM_NAME = &#39;WWV_FLOW&#39; and OWNER = &#39;PUBLIC&#39;
</pre></li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BEJEFJAE"></a><a id="AEADM232"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h2 class="sect2"><span class="secnum">2.5.2</span> Understanding Oracle Default Schema <a id="sthref354"></a><a id="sthref355"></a><a id="sthref356"></a><a id="sthref357"></a>Restrictions</h2>
<p>When Oracle Application Express installs, the Instance administrator does not have the ability to assign Oracle default schemas to workspaces. Default schemas such as <code>SYS</code>, <code>SYSTEM</code>, and <code>RMAN</code> are reserved by Oracle for various product features and for internal use. Access to a default schema can be a very powerful privilege. For example, a workspace with access to the default schema <code>SYSTEM</code> can run applications that parse as the <code>SYSTEM</code> user.</p>
<p>In order for an Instance administrator to have the ability to assign most Oracle default schemas to workspaces, the database administrator (DBA) must explicitly grant the privilege using SQL*Plus to run a procedure within the <code>APEX_ SITE_ADMIN_PRIVS</code> package. Note, however, that beginning with Oracle Application Express release 3.1, the <code>SYS</code> and <code>SYSTEM</code> schemas may no longer be used by workspaces as parsing schemas.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
All schema and workspace names used as arguments to procedures in the <code>APEX_SITE_ADMIN_PRIVS</code> package are used exactly as they are provided by the caller.
<p>For example, if you pass an argument value such as <code>p_schema =&gt;&#39;system&#39;</code>, the lower-case schema name <code>&#39;system&#39;</code> is recorded and referenced. This example could return unexpected results if you really meant to reference the common schema name SYSTEM, which would be referenced using upper case.</p>
</div>
<p class="subhead2"><a id="AEADM418"></a>Topics:</p>
<ul>
<li>
<p><a href="#CIHFHFIF">Granting the Privilege to Assign Oracle Default Schemas</a></p>
</li>
<li>
<p><a href="#CIHBHFJA">Revoking the Privilege to Assign Oracle Default Schemas</a></p>
</li>
<li>
<p><a href="#CIHIHAFD">Working with Restricted Schemas</a></p>
</li>
<li>
<p><a href="#CIHFDFGD">Determining the Privilege Status</a></p>
</li>
</ul>
<a id="CIHFHFIF"></a><a id="AEADM233"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h3 class="sect3"><span class="secnum">2.5.2.1</span> Granting the Privilege to Assign Oracle Default Schemas</h3>
<p>The DBA can grant an Instance administrator the ability to assign Oracle schemas to workspaces by using SQL*Plus to run the <a id="sthref358"></a><code>APEX_SITE_ADMIN_PRIVS.UNRESTRICT_SCHEMA</code> procedure from within the Application Express engine schema. For example:</p>
<pre>EXEC APEX_040200.APEX_SITE_ADMIN_PRIVS.UNRESTRICT_SCHEMA(p_schema =&gt; &#39;RMAN&#39;);
COMMIT;
</pre>
<p>This example would enable the Instance administrator to assign the <code>RMAN</code> schema to any workspace.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BEJEDCEJ">&#34;Determining the Oracle Application Express Engine Schema&#34;</a></div>
</div>
<!-- class="sect3" -->
<a id="CIHBHFJA"></a><a id="AEADM234"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h3 class="sect3"><span class="secnum">2.5.2.2</span> Revoking the Privilege to Assign Oracle Default Schemas</h3>
<p>The DBA can revoke this privilege using SQL*Plus to run the <code><a id="sthref359"></a>APEX_SITE_ADMIN_PRIVS.RESTRICT_SCHEMA</code> procedure from within the Application Express engine schema. For example:</p>
<pre>EXEC APEX_040200.APEX_SITE_ADMIN_PRIVS.RESTRICT_SCHEMA(p_schema =&gt; &#39;RMAN&#39;);
COMMIT;
</pre>
<p>This example would prevent the Instance administrator from assigning the <code>RMAN</code> schema to any workspace. It does not, however, prevent workspaces that have already had the <code>RMAN</code> schema assigned to them from using the <code>RMAN</code> schema.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BEJEDCEJ">&#34;Determining the Oracle Application Express Engine Schema&#34;</a></div>
</div>
<!-- class="sect3" -->
<a id="CIHIHAFD"></a><a id="AEADM235"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h3 class="sect3"><span class="secnum">2.5.2.3</span> Working with Restricted Schemas</h3>
<p>If a schema has been designated as restricted using the <code>RESTRICT_SCHEMA</code> procedure, the DBA can designate specific workspaces as exceptions by running the <code><a id="sthref360"></a>APEX_SITE_ADMIN_PRIVS.CREATE_EXCEPTION</code> procedure. For example:</p>
<pre>EXEC APEX_040200.APEX_SITE_ADMIN_PRIVS.CREATE_EXCEPTION(p_schema =&gt; &#39;RMAN&#39;, p_workspace=&gt; &#39;DBA_WORKSPACE&#39;);
EXEC APEX_040200.APEX_SITE_ADMIN_PRIVS.CREATE_EXCEPTION(p_schema =&gt; &#39;RMAN&#39;, p_workspace  =&gt; &#39;AUDITOR_WORKSPACE&#39;);
COMMIT;
</pre>
<p>This example would prevent the Instance administrator from assigning the <code>RMAN</code> schema to the workspace named AUDITOR_WORKSPACE. However this restriction only applies to workspace provisioning requests processed after the <code>REMOVE_EXCEPTION</code> procedure has been run. If the AUDITOR_WORKSPACE has the <code>RMAN</code> schema assigned to it, this method would not prevent that workspace from continuing to use the schema.</p>
<a id="AEADM236"></a>
<div class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref361"></a>
<h4 class="sect4"><span class="secnum">2.5.2.3.1</span> Removing Workspace Exceptions for a Schema</h4>
<p>The DBA can remove all workspace exceptions for a schema by using SQL*Plus to run the <a id="sthref362"></a><a id="sthref363"></a><code>APEX_SITE_ADMIN_PRIVS.REMOVE_SCHEMA_EXCEPTIONS</code> procedure from within the Application Express engine schema. For example:</p>
<pre>EXEC APEX_040200.APEX_SITE_ADMIN_PRIVS.REMOVE_SCHEMA_EXCEPTIONS(p_schema =&gt; &#39;RMAN&#39;);
COMMIT;
</pre>
<p>This example would prevent the Instance administrator from assigning the <code>RMAN</code> schema to any workspaces if the <code>RMAN</code> schema were already restricted, but had one or more exceptions previously created for it.</p>
</div>
<!-- class="sect4" -->
<a id="AEADM237"></a>
<div class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref364"></a>
<h4 class="sect4"><span class="secnum">2.5.2.3.2</span> Removing Schema Exceptions for a Workspace</h4>
<p>The DBA can remove all schema exceptions for a workspace by using SQL*Plus to run the <a id="sthref365"></a><code>APEX_SITE_ADMIN_PRIVS.REMOVE_WORKSPACE_EXCEPTIONS</code> procedure from within the Application Express engine schema. For example:</p>
<pre>EXEC APEX_040200.APEX_SITE_ADMIN_PRIVS.REMOVE_WORKSPACE_EXCEPTIONS(p_workspace =&gt; &#39;AUDITOR_WORKSPACE&#39;);
COMMIT;
</pre>
<p>This example would prevent the Instance administrator from assigning any restricted schemas to the workspace named AUDITOR_WORKSPACE if that workspace had exceptions previously created for it with respect to any restricted schemas.</p>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<a id="CIHFDFGD"></a><a id="AEADM238"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h3 class="sect3"><span class="secnum">2.5.2.4</span> Determining the Privilege Status</h3>
<p>The DBA can determine the current status of the privilege by using SQL*Plus to run the <a id="sthref366"></a><code>APEX_SITE_ADMIN_PRIVS.REPORT</code> procedure. For example:</p>
<pre>SET SERVEROUTPUT ON
EXEC APEX_040200.APEX_SITE_ADMIN_PRIVS.REPORT;
</pre>
<p>This example would display the text of a query that dumps the tables that defines the schema and workspace restrictions.</p>
<pre>SELECT a.schema &#34;SCHEMA&#34;,b.workspace_name &#34;WORKSPACE&#34; FROM WWV_FLOW_RESTRICTED_SCHEMAS a, WWV_FLOW_RSCHEMA_EXCEPTIONS b WHERE b.schema_id (+)= a.id;
</pre>
<p>When reviewing the output of this query, remember the following:</p>
<ul>
<li>
<p>A schema name in the SCHEMA column indicates that the schema is restricted.</p>
</li>
<li>
<p>Schemas that are not listed are not restricted and may be assigned to any workspace.</p>
</li>
<li>
<p>A workspace name next to a schema name means that an exception exists for the schema for the named workspace.</p>
</li>
</ul>
<p>You can run this query in SQL*Plus as shown above, or you can change it and format the output.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1773">
<tr>
<td class="cellalignment1780">
<table class="cellalignment1778">
<tr>
<td class="cellalignment1777"><a href="adm_mg_service_set.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1777"><a href="adm_create_wkspc.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1782">
<table class="cellalignment1776">
<tr>
<td class="cellalignment1777"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1777"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1777"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1777"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1777"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1777"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>