<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-87224"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Configuring%20Oracle%20Database%20Gateway%20for%20DRDA"></a><title>Configuring Oracle Database Gateway for DRDA</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1090"/>
<meta name="dcterms.created" content="2017-06-08T18:11:24Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Gateway Installation and Configuration Guide"/>
<meta name="dcterms.identifier" content="E17927-11"/>
<meta name="dcterms.isVersionOf" content="OTGIS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="configdrda_server.htm" title="Previous" type="text/html"/>
<link rel="Next" href="security.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17927-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">25/35</span> <!-- End Header -->
<div id="OTGIS140" class="chapter"><a id="BIHEDIEI"></a>
<h1 class="chapter"><span class="secnum">14</span> Configuring Oracle Database Gateway for DRDA</h1>
<p>After installing the gateway, perform the following tasks to configure Oracle Database Gateway for DRDA:</p>
<ol>
<li>
<p><a href="#BIHDCJAG">Configure the Gateway Initialization Parameter File</a></p>
</li>
<li>
<p><a href="#BIHIFGBH">Configure Oracle Net for the Gateway</a></p>
</li>
<li>
<p><a href="#BIHCBBEC">Configure Two-Phase Commit</a></p>
</li>
<li>
<p><a href="#BIHCJACE">Create Tables and Views for Data Dictionary Support</a></p>
</li>
<li>
<p><a href="#BIHBABEG">Configure the Oracle Database for Gateway Access</a></p>
</li>
<li>
<p><a href="#BIHJCHCD">Create Database Links</a></p>
</li>
<li>
<p><a href="#BIHCDIHH">Configure the Gateway to Access Multiple DRDA Databases</a></p>
</li>
</ol>
<p>SQL scripts are provided to perform steps such as creating the <code dir="ltr">HS_TRANSACTION_LOG</code> table, removing obsolete tables and views, and creating tables and views to provide <a id="sthref316"></a>data dictionary support.</p>
<p>These scripts must be run on the DRDA Server platform using a database native tool (such as <a id="sthref317"></a>SPUFI on DB2 UDB for z/OS), because no tool is provided with the gateway to execute these scripts. Note that when running these scripts, the user&nbsp;ID used must be suitably authorized.</p>
<p>SQL scripts are located in the <code dir="ltr">dg4db2/admin</code> directory. Appropriate platform scripts are designated by having the DB2 platform identifiers (eg: &#34;zos&#34;, &#34;as400&#34; and &#34;luw&#34;) and version specific numbers (eg: vw7, vw8) in their file names.</p>
<a id="BIHDCJAG"></a>
<div id="OTGIS1074" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Configure the Gateway Initialization Parameter File</h2>
<p>Perform the following tasks to configure the gateway initialization parameter file:</p>
<ol>
<li>
<p><a href="#BIHGDDGH">Choose a System Identifier for the Gateway</a></p>
</li>
<li>
<p><a href="#BIHHCFFJ">Customize the Initialization Parameter File</a></p>
</li>
</ol>
<a id="BIHGDDGH"></a>
<div id="OTGIS1075" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Choose a System Identifier for the Gateway</h3>
<p>The gateway system identifier (SID) is an alphanumeric character string that identifies a gateway instance. You need one gateway instance, and therefore one gateway SID, for each DRDA database you are accessing. However, if you want to access two DRDA databases, you need two gateway SIDs, one for each instance of the gateway. If you have one DRDA database and want to access it sometimes with one set of gateway parameter settings, and other times with different gateway parameter settings, you can do that by having multiple gateway SIDs for the single DRDA database. The SID is used as part of the file name for the initialization parameter file.</p>
</div>
<!-- class="sect2" -->
<a id="BIHHCFFJ"></a>
<div id="OTGIS1076" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Customize the Initialization Parameter File</h3>
<p><a id="sthref318"></a>Tailor the parameter file with additional parameters as needed. Refer to <a href="app_initparam.htm#g636253">Appendix C, &#34;Initialization Parameters&#34;</a> for a list of supported initialization parameters. Also refer to <a href="security.htm#g7230">Chapter 15, &#34;Security Considerations&#34;</a> for security aspects to tailoring the parameter file.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BIHIFGBH"></a>
<div id="OTGIS1077" class="sect1">
<h2 class="sect1">Configure Oracle Net for the Gateway<a id="sthref319"></a></h2>
<p>The gateway requires Oracle Net to communicate with the Oracle database. After configuring the gateway, perform the following tasks to configure Oracle Net to work with the gateway:</p>
<ol>
<li>
<p><a href="#BIHGHECG">Configure Oracle Net Listener for the Gateway</a></p>
</li>
<li>
<p><a href="#BIHGCFHF">Stop and Start the Oracle Net Listener for the Gateway</a></p>
</li>
</ol>
<a id="BIHGHECG"></a>
<div id="OTGIS1078" class="sect2">
<h3 class="sect2">Configure Oracle Net Listener for the Gateway</h3>
<p>The Oracle Net Listener listens for incoming requests from the Oracle database. For the Oracle Net Listener to listen for the gateway, information about the gateway must be added to the Oracle Net Listener configuration file, <code dir="ltr"><a id="sthref320"></a>listener.ora</code>. This file by default is located in <code dir="ltr">$ORACLE_HOME/network/admin</code>, where <code dir="ltr">$ORACLE_HOME</code> is the directory under which the gateway is installed.</p>
<p>The following entries must be added to the <code dir="ltr">listener.ora</code> file:</p>
<ul>
<li>
<p>A list of Oracle Net addresses on which the Oracle Net Listener listens</p>
</li>
<li>
<p>The executable name of the gateway that the Oracle Net Listener starts in response to incoming connection requests</p>
</li>
</ul>
<p>A sample of the <code dir="ltr">listener.ora</code> entry (<code dir="ltr">listener.ora.sample</code>) is available in the <code dir="ltr">$ORACLE_HOME/dg4db2/admin</code> directory where <code dir="ltr">$</code><code dir="ltr">ORACLE_HOME</code> is the directory under which the gateway is installed.</p>
<a id="BIHJJEJH"></a>
<div id="OTGIS1079" class="sect3">
<h4 class="sect3">Syntax of listener.ora File Entries</h4>
<p>The Oracle database communicates with the gateway using Oracle Net and any supported protocol adapters. The syntax of the address on which the Oracle Net Listener listens using the TCP/IP protocol adapter is as follows:</p>
<pre dir="ltr">LISTENER=
        (ADDRESS= 
          (PROTOCOL=TCP)
          (HOST=<span class="italic">host_name</span>)
          (PORT=<span class="italic">port_number</span>))
</pre>
<p>Where:</p>
<div class="inftblinformal">
<table class="cellalignment3603" title="variable definition" summary="variable definition" dir="ltr">
<thead>
<tr class="cellalignment3594">
<th class="cellalignment3604" id="r1c1-t2">Variable</th>
<th class="cellalignment3604" id="r1c2-t2">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r2c1-t2" headers="r1c1-t2"><code dir="ltr"><span class="codeinlineitalic">host_name</span></code></td>
<td class="cellalignment3600" headers="r2c1-t2 r1c2-t2">is the name of the machine on which the gateway is installed. IPv6 format is supported with this release. Refer to <a class="olink NETRF" href="../NETRF/toc.htm"><span class="italic">Oracle Database Net Services Reference</span></a> for detail.</td>
</tr>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r3c1-t2" headers="r1c1-t2"><code dir="ltr"><span class="codeinlineitalic">port_number</span></code></td>
<td class="cellalignment3600" headers="r3c1-t2 r1c2-t2">specifies the port number used by the Oracle Net Listener. If you have other listeners running on the same machine, then the value of <span class="italic">port_number</span> must be different from the other listeners&#39; port numbers.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" -->
<p>To direct the Oracle Net Listener to start the gateway in response to incoming connection requests, add an entry to the <code dir="ltr"><a id="sthref321"></a>listener.ora</code> file.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must use the same SID value in the <code dir="ltr">listener.ora</code> file and the <code dir="ltr">tnsnames.ora</code> file that will be configured in the next step.</div>
<pre dir="ltr">SID_LIST_LISTENER=
   (SID_LIST=
      (SID_DESC= 
         (SID_NAME=<span class="italic">gateway_sid</span>)
         (ORACLE_HOME=<span class="italic">oracle_home_directory</span>)
         (PROGRAM=dg4db2)
      )
   )
</pre>
<p>Where:</p>
<div class="inftblinformal">
<table class="cellalignment3603" title="variable definition" summary="variable definition" dir="ltr">
<thead>
<tr class="cellalignment3594">
<th class="cellalignment3604" id="r1c1-t4">Variable</th>
<th class="cellalignment3604" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r2c1-t4" headers="r1c1-t4"><code dir="ltr"><span class="codeinlineitalic">gateway_sid</span></code></td>
<td class="cellalignment3600" headers="r2c1-t4 r1c2-t4">specifies the SID of the gateway and matches the gateway SID specified in the connect descriptor entry in the <code dir="ltr">tnsnames.ora</code> file.</td>
</tr>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r3c1-t4" headers="r1c1-t4"><code dir="ltr"><span class="codeinlineitalic">oracle_home_directory</span></code></td>
<td class="cellalignment3600" headers="r3c1-t4 r1c2-t4">specifies the Oracle home directory where the gateway resides.</td>
</tr>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r4c1-t4" headers="r1c1-t4"><code dir="ltr">dg4db2</code></td>
<td class="cellalignment3600" headers="r4c1-t4 r1c2-t4">specifies the executable name of the Oracle Database Gateway for DRDA.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" -->
<p>If you are already running a Oracle Net Listener that listens on multiple database SIDs, add only the following syntax to <code dir="ltr">SID_LIST</code> in the existing <code dir="ltr">listener.ora</code> file:</p>
<pre dir="ltr">SID_LIST_LISTENER=
(SID_LIST= 
   (SID_DESC=.
     .
   )
   (SID_DESC=.
     .
   )
   (SID_DESC=
      (SID_NAME=<span class="italic">gateway_sid</span>)
      (ORACLE_HOME=<span class="italic">oracle_home_directory</span>)
      (PROGRAM=dg4db2)
   )
)
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG" href="../NETAG/toc.htm"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for information about changing the <code dir="ltr">listener.ora</code> file.</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BIHGCFHF"></a>
<div id="OTGIS1080" class="sect2">
<h3 class="sect2">Stop and Start the Oracle Net Listener for the Gateway</h3>
<p>You must stop and restart the Oracle Net Listener to initiate the new settings, as follows:</p>
<ol>
<li>
<p>Set the <code dir="ltr">PATH</code> environment variable to <code dir="ltr">$ORACLE_HOME/bin</code> where <code dir="ltr">$ORACLE_HOME</code> is the directory in which the gateway is installed. If you have the Bourne or Korn Shell, enter the following:</p>
<pre dir="ltr">$ PATH=$ORACLE_HOME/bin:$PATH;export PATH
$ LD_LIBRARY_PATH=$ORACLE_HOME/lib:$LD_LIBRARY_PATH; export LD_LIBRARY_PATH
</pre>
<p>If you have the C Shell, enter the following:</p>
<pre dir="ltr">$ setenv PATH $ORACLE_HOME/bin:$PATH
$ setenv LD_LIBRARY_PATH $ORACLE_HOME/lib:$LD_LIBRARY_PATH
</pre>
<p><a href="#BIHEEFHE">Table 14-1</a> specifies which parameter value to use for the different platforms:</p>
<div id="OTGIS1239" class="tblformal">
<p class="titleintable"><a id="sthref322"></a><a id="BIHEEFHE"></a>Table 14-1 Parameter Values for UNIX Based Platforms</p>
<table class="cellalignment3605" title="Parameter Values for UNIX Based Platforms" summary="summary" dir="ltr">
<thead>
<tr class="cellalignment3594">
<th class="cellalignment3604" id="r1c1-t6">Platform</th>
<th class="cellalignment3604" id="r1c2-t6">Parameter Value</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r2c1-t6" headers="r1c1-t6">
<p>Oracle Solaris (SPARC) 64 bit and Oracle Solaris on x86-64 (64-Bit)</p>
</td>
<td class="cellalignment3600" headers="r2c1-t6 r1c2-t6">
<p><code dir="ltr">LD_LIBRARY_PATH_64=$ORACLE_HOME/lib</code></p>
</td>
</tr>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r3c1-t6" headers="r1c1-t6">
<p>HP-UX Itanium</p>
</td>
<td class="cellalignment3600" headers="r3c1-t6 r1c2-t6">
<p><code dir="ltr">LD_LIBRARY_PATH=$ORACLE_HOME/lib</code></p>
</td>
</tr>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r4c1-t6" headers="r1c1-t6">
<p>Linux x86 64 bit</p>
</td>
<td class="cellalignment3600" headers="r4c1-t6 r1c2-t6">
<p><code dir="ltr">LD_LIBRARY_PATH=$ORACLE_HOME/lib</code></p>
</td>
</tr>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r5c1-t6" headers="r1c1-t6">
<p>IBM AIX on POWER Systems (64-Bit)</p>
</td>
<td class="cellalignment3600" headers="r5c1-t6 r1c2-t6">
<p><code dir="ltr">LIBPATH=$ORACLE_HOME/lib</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></li>
<li>
<p>If the listener is already running, use the <code dir="ltr">lsnrctl</code> command to stop the listener and then start it with the new settings, as follows:</p>
<pre dir="ltr">$ lsnrctl stop
$ lsnrctl start 
</pre></li>
<li>
<p>Check the status of the listener with the new settings, as follows:</p>
<pre dir="ltr">$ lsnrctl status
</pre>
<p>The following is a partial output from a <code dir="ltr">lsnrctl</code> status check:</p>
</li>
</ol>
<pre dir="ltr">.
.
.
Listening Endpoints Summary...
  (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=204.179.99.15)(PORT=1551)))
Services Summary...
Service &#34;dg4db2&#34; has 1 instance(s).
  Instance &#34;dg4db2&#34;, status UNKNOWN, has 1 handler(s) for this service...
The command completed successfully
</pre>
<p>In this example, the service name is <code dir="ltr">dg4db2</code>, which is the default SID value assigned during installation.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must use the same SID value in the <code dir="ltr">tnsnames.ora</code> file and the <code dir="ltr">listener.ora</code> file.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BIHCBBEC"></a>
<div id="OTGIS1081" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Configure Two-Phase Commit</h2>
<p>Support for Two-Phase Commit requires running the <code dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_tx.sql</code> script on the DB2 server. This script will create objects used by the gateway for Two-Phase Commit. Edit the script and replace the default recover account schema (<code dir="ltr">RECOVER</code>) with the account name specified for the <code dir="ltr">HS_FDS_RECOVERY_ACCOUNT</code> initialization parameter. Refer to <a href="app_initparam.htm#g636253">Appendix C, &#34;Initialization Parameters&#34;</a> for more details..</p>
</div>
<!-- class="sect1" -->
<a id="BIHCJACE"></a>
<div id="OTGIS1085" class="sect1">
<h2 class="sect1"><a id="sthref323"></a>Create Tables and Views for Data Dictionary Support</h2>
<p>To enable data dictionary translation support, data dictionary tables and views have to be created on each non-Oracle system that you want to access through the gateway.</p>
<p>Perform the following steps to create the data dictionary tables and views using database native tools:</p>
<ol>
<li>
<p>Upgrade from a previous gateway release</p>
<p>If you are upgrading from a previous version of the gateway then run the appropriate script to drop the old data dictionary definitions.</p>
<ul>
<li>
<p>If connecting to DB2 UDB for Linux, Unix, and Windows, then run</p>
<pre dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_luw_drop.sql
</pre></li>
<li>
<p>If connecting to DB2 UDB for z/OS, then run</p>
<pre dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_zos_drop.sql
</pre></li>
<li>
<p>If connecting to DB2 UDB for iSeries, then run</p>
<pre dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_as400_drop.sql
</pre></li>
</ul>
</li>
<li>
<p>Create the data dictionary tables</p>
<p>Run the appropriate script to create the data dictionary tables.</p>
<ul>
<li>
<p>If connecting to DB2 UDB for Linux, Unix, and Windows, then run</p>
<pre dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_luw_tab.sql
</pre></li>
<li>
<p>If connecting to DB2 UDB for z/OS, then run</p>
<pre dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_zos_tab.sql
</pre></li>
<li>
<p>If connecting to DB2 UDB for iSeries, then run</p>
<pre dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_as400_tab.sql
</pre></li>
</ul>
</li>
<li>
<p>Create the data dictionary views</p>
<p>Run the appropriate script to create the data dictionary views.</p>
<ul>
<li>
<p>If connecting to DB2 UDB for Linux, Unix, and Windows, then run</p>
<p>For DB2 UDB for Linux, Unix, and Windows V7:</p>
<pre dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_luw_vw7.sql
</pre>
<p>For DB2 UDB for Linux, Unix, and Windows V8 and V9:</p>
<pre dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_luw_vw8.sql         
</pre></li>
<li>
<p>If connecting to DB2 UDB for z/OS then run</p>
<p>For DB2 UDB for z/OS V7 (RACF security):</p>
<pre dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_zos_vw7r.sql
</pre>
<p>For DB2 UDB for z/OS V7 (DB2 security):</p>
<pre dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_zos_vw7s.sql
</pre>
<p>For DB2 UDB for z/OS V8 and V9 (RACF security):</p>
<pre dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_zos_vw8r.sql
</pre>
<p>For DB2 UDB for z/OS V8 and V9 (DB2 security):</p>
<pre dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_zos_vw8s.sql
</pre></li>
<li>
<p>If connecting to DB2 UDB for iSeries, then run</p>
<p>For DB2 UDB for iSeries V5.1:</p>
<pre dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_as400_vw51.sql
</pre>
<p>For DB2 UDB for iSeries V5.2:</p>
<pre dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_as400_vw52.sql
</pre>
<p>For DB2 UDB for iSeries V5.3 or higher:</p>
<pre dir="ltr">$ORACLE_HOME/dg4db2/admin/dg4db2_as400_vw53.sql
</pre></li>
</ul>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BIHBABEG"></a>
<div id="OTGIS1087" class="sect1">
<h2 class="sect1">Configure the Oracle Database for Gateway Access</h2>
<p>Before you use the gateway to access DB2 data you must configure the Oracle database to enable communication with the gateway over Oracle Net.</p>
<p>To configure the Oracle database you must add connect descriptors to the <code dir="ltr">tnsnames.ora</code> file. By default, this file is in <code dir="ltr">$ORACLE_HOME/network/admin</code>, where <code dir="ltr">$ORACLE_HOME</code> is the directory in which the Oracle database is installed. You cannot use the Oracle Net Assistant or the Oracle Net Easy Config tools to configure the <code dir="ltr">tnsnames.ora</code> file. You must edit the file manually.</p>
<p>A sample of the <code dir="ltr">tnsnames.ora</code> entry (<code dir="ltr">tnsnames.ora.sample</code>) is available in the <code dir="ltr">$ORACLE_HOME/dg4db2/admin</code> directory where <code dir="ltr">$</code><code dir="ltr">ORACLE_HOME</code> is the directory under which the gateway is installed.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN" href="../ADMIN/toc.htm"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for information about editing the <code dir="ltr">tnsnames.ora</code> file.</div>
<div id="OTGIS1088" class="sect2"><a id="sthref324"></a>
<h3 class="sect2">Configuring tnsnames.ora</h3>
<p>Edit the <code dir="ltr">tnsnames.ora</code> file to add a connect descriptor for the gateway. The following is the syntax of the Oracle Net entry using the TCP/IP protocol:</p>
<pre dir="ltr"><span class="italic">connect_descriptor</span>=
   (DESCRIPTION=
      (ADDRESS=
         (PROTOCOL=TCP)
         (HOST=<span class="italic">host_name</span>)
         (PORT=<span class="italic">port_number</span>)
      )
      (CONNECT_DATA=
         (SID=<span class="italic">gateway_sid</span>))
      (HS=OK))
</pre>
<p>Where:</p>
<div class="inftblinformal">
<table class="cellalignment3603" title="variable definition" summary="variable definition" dir="ltr">
<thead>
<tr class="cellalignment3594">
<th class="cellalignment3604" id="r1c1-t9">Variable</th>
<th class="cellalignment3604" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r2c1-t9" headers="r1c1-t9"><code dir="ltr"><span class="codeinlineitalic">connect_descriptor</span></code></td>
<td class="cellalignment3600" headers="r2c1-t9 r1c2-t9">is the description of the object to connect to as specified when creating the database link, such as <code dir="ltr">dg4db2</code>.
<p>Check the sqlnet.ora file for the following parameter setting:</p>
<ul>
<li>
<p><code dir="ltr">names.directory_path = (TNSNAMES)</code></p>
</li>
</ul>
<p><span class="bold">Note</span>: The sqlnet.ora file is typically stored in <code dir="ltr">$ORACLE_HOME/network/admin</code>.</p>
</td>
</tr>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r3c1-t9" headers="r1c1-t9"><code dir="ltr">TCP</code></td>
<td class="cellalignment3600" headers="r3c1-t9 r1c2-t9">is the TCP protocol used for TCP/IP connections.</td>
</tr>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r4c1-t9" headers="r1c1-t9"><code dir="ltr"><span class="codeinlineitalic">host_name</span></code></td>
<td class="cellalignment3600" headers="r4c1-t9 r1c2-t9">specifies the machine where the gateway is running.</td>
</tr>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r5c1-t9" headers="r1c1-t9"><code dir="ltr"><span class="codeinlineitalic">port_number</span></code></td>
<td class="cellalignment3600" headers="r5c1-t9 r1c2-t9">matches the port number used by the Oracle Net Listener that is listening for the gateway. The Oracle Net Listener&#39;s port number can be found in the <code dir="ltr">listener.ora</code> file used by the Oracle Net Listener. See <a href="#BIHJJEJH">&#34;Syntax of listener.ora File Entries&#34;</a>.</td>
</tr>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r6c1-t9" headers="r1c1-t9"><code dir="ltr"><span class="codeinlineitalic">gateway_sid</span></code></td>
<td class="cellalignment3600" headers="r6c1-t9 r1c2-t9">specifies the SID of the gateway and matches the SID specified in the <code dir="ltr">listener.ora</code> file of the Oracle Net Listener that is listening for the gateway. See <a href="#BIHGHECG">&#34;Configure Oracle Net Listener for the Gateway&#34;</a> for more information.</td>
</tr>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r7c1-t9" headers="r1c1-t9"><code dir="ltr">(HS=OK)</code></td>
<td class="cellalignment3600" headers="r7c1-t9 r1c2-t9">specifies that this connect descriptor connects to a non-Oracle system.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" --></div>
<!-- class="sect2" -->
<div id="OTGIS1282" class="sect2"><a id="sthref325"></a>
<h3 class="sect2">Configuring <a id="sthref326"></a><a id="sthref327"></a><a id="sthref328"></a>tnsnames.ora for Multiple Listeners</h3>
<p>To ensure higher availability, you can specify multiple <a id="sthref329"></a>listeners within the connect de<a id="sthref330"></a>scriptor.</p>
<pre dir="ltr"> <a id="sthref331"></a><span class="italic">connect_descriptor</span>=
    (DESCRIPTION=
       (ADDRESS=
          (PROTOCOL=TCP)
          (HOST=<span class="italic">host_name_1</span>)
          (PORT=<span class="italic">port_number_1</span>)
       )
       (ADDRESS=
          (PROTOCOL=TCP)
          (HOST=<span class="italic">host_name_2</span>)
          (PORT=<span class="italic">port_number_2</span>)
       )
       (CONNECT_DATA=
          (SID=<span class="italic">gateway_sid</span>))
       (HS=OK))
</pre>
<p>This indicates that, if the listener for <code dir="ltr"><span class="codeinlineitalic">host_name_1</span></code> and <code dir="ltr"><span class="codeinlineitalic">port_number_1</span></code> is not available, then the second listener for <code dir="ltr"><span class="codeinlineitalic">host_name_2</span></code> and <code dir="ltr"><span class="codeinlineitalic">port_number_2</span></code> will take over.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Database Administrator&#39;s Guide</span> for information about editing the <code dir="ltr">tnsnames.ora</code> file.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BIHJCHCD"></a>
<div id="OTGIS1089" class="sect1">
<h2 class="sect1">Create Database Links<a id="sthref332"></a></h2>
<p>Any Oracle client connected to the Oracle database can access DB2 data through the gateway. The Oracle client and the Oracle database can reside on different machines. The gateway accepts connections only from the Oracle database.</p>
<p>A connection to the gateway is established through a database link when it is first used in an Oracle session. In this context, a connection refers to the connection between the Oracle database and the gateway. The connection remains established until the Oracle session ends. Another session or user can access the same database link and get a distinct connection to the gateway and DRDA database.</p>
<p>Database links are active for the duration of a gateway session. If you want to close a database link during a session, you can do so with the <code dir="ltr">ALTER SESSION</code> statement.</p>
<p>To access the DRDA server, you must create a database link. A public database link is the most common of database links.</p>
<pre dir="ltr">SQL&gt; CREATE PUBLIC DATABASE LINK <span class="italic">dblink</span> CONNECT TO
2  &#34;<span class="italic">user&#34;</span> IDENTIFIED BY <span class="italic">&#34;password&#34;</span> USING <span class="italic">&#39;tns_name_entry</span>&#39;;
</pre>
<p>Where:</p>
<div class="inftblinformal">
<table class="cellalignment3603" title="variable definition" summary="variable definition" dir="ltr">
<thead>
<tr class="cellalignment3594">
<th class="cellalignment3604" id="r1c1-t11">Variable</th>
<th class="cellalignment3604" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r2c1-t11" headers="r1c1-t11"><code dir="ltr"><span class="codeinlineitalic">dblink</span></code></td>
<td class="cellalignment3600" headers="r2c1-t11 r1c2-t11">is the complete database link name.</td>
</tr>
<tr class="cellalignment3594">
<td class="cellalignment3600" id="r3c1-t11" headers="r1c1-t11"><code dir="ltr"><span class="codeinlineitalic">tns_name_entry</span></code></td>
<td class="cellalignment3600" headers="r3c1-t11 r1c2-t11">specifies the Oracle Net connect descriptor specified in the <code dir="ltr">tnsnames.ora</code> file that identifies the gateway</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" -->
<p>After the database link is created you can verify the connection to the DRDA database, as follows:</p>
<pre dir="ltr">SQL&gt; SELECT * FROM DUAL@dblink;
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN" href="../ADMIN/toc.htm"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> and <a class="olink HETER" href="../HETER/toc.htm"><span class="italic">Oracle Database Heterogeneous Connectivity User&#39;s Guide</span></a> for more information about using database links.</div>
</div>
<!-- class="sect1" -->
<a id="BIHCDIHH"></a>
<div id="OTGIS1090" class="sect1">
<h2 class="sect1">Configure the Gateway to Access Multiple DRDA Databases</h2>
<p>The tasks for configuring the gateway to access multiple DRDA databases are similar to the tasks for configuring the gateway for a single database. The configuration example assumes the following:</p>
<ul>
<li>
<p>The gateway is installed and configured with the default SID of <code dir="ltr">dg4db2</code></p>
</li>
<li>
<p>The <code dir="ltr">ORACLE_HOME</code> environment variable is set to the directory where the gateway is installed</p>
</li>
<li>
<p>The gateway is configured for one DRDA database named <code dir="ltr">db1</code></p>
</li>
<li>
<p>Two DRDA databases named <code dir="ltr">db2</code> and <code dir="ltr">db3</code> on a host with IP Address 204.179.79.15 are being added</p>
</li>
</ul>
<div id="OTGIS1091" class="sect2"><a id="sthref333"></a>
<h3 class="sect2">Multiple DRDA Databases Example: Configuring the Gateway</h3>
<p class="subhead2"><a id="OTGIS1240"></a>Choose One System ID for Each DRDA Database</p>
<p>A separate instance of the gateway is needed for each DRDA database. Each instance needs its own gateway System ID (SID). For this example, the gateway SIDs are chosen for the instances that access the DRDA databases:</p>
<ul>
<li>
<p><code dir="ltr">dg4db22</code> for the gateway accessing database <code dir="ltr">db2</code></p>
</li>
<li>
<p><code dir="ltr">dg4db23</code> for the gateway accessing database <code dir="ltr">db3</code></p>
</li>
</ul>
<p class="subhead2"><a id="OTGIS1241"></a>Create Two Initialization Parameter Files</p>
<p>Create an initialization parameter file for each instance of the gateway by copying the original initialization parameter file, <code dir="ltr">$ORACLE_HOME/dg4db2/admin/initdg4db2.ora</code>, twice, naming one with the gateway SID for <code dir="ltr">db2</code> and the other with the gateway SID for <code dir="ltr">db3</code>:</p>
<pre dir="ltr">$ cd $ORACLE_HOME/dg4db2/admin
$ cp initdg4db2.ora initdg4db22.ora
$ cp initdg4db2.ora initdg4db23.ora
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you have multiple gateway SIDs for the same DRDA database because you want to use different gateway parameter settings at different times, follow the same procedure. You create several initialization parameter files, each with different SIDs and different parameter settings.</div>
</div>
<!-- class="sect2" -->
<div id="OTGIS1092" class="sect2"><a id="sthref334"></a>
<h3 class="sect2">Multiple DRDA Databases Example: Configuring Oracle Net Listener</h3>
<p class="subhead2"><a id="OTGIS1242"></a>Add Entries to <a id="sthref335"></a>listener.ora</p>
<p>Add two new entries to the Oracle Net Listener configuration file, <code dir="ltr">listener.ora</code>. You must have an entry for each gateway instance, even when multiple gateway instances access the same database.</p>
<p>The following example shows the entry for the original installed gateway first, followed by the new entries:</p>
<pre dir="ltr">SID_LIST_LISTENER=
(SID_LIST=
   (SID_DESC=
      (SID_NAME=dg4db2)
      (ORACLE_HOME=<span class="italic">oracle_home_directory</span>)
      (PROGRAM=dg4db2)
   )
   (SID_DESC=
      (SID_NAME=dg4db22)
      (ORACLE_HOME=<span class="italic">oracle_home_directory</span>)
      (PROGRAM=dg4db2)
   )
   (SID_DESC=
      (SID_NAME=dg4db23)
      (ORACLE_HOME=<span class="italic">oracle_home_directory</span>)
      (PROGRAM=dg4db2)
   )
)
</pre>
<p>where, <code dir="ltr">oracle_home_directory</code> is the directory where the gateway resides.</p>
</div>
<!-- class="sect2" -->
<div id="OTGIS1093" class="sect2"><a id="sthref336"></a>
<h3 class="sect2">Multiple DRDA Databases Example: Stopping and Starting the Oracle Net Listener</h3>
<p>If the listener is already running, use the <code dir="ltr">lsnrctl</code> command to stop the listener and then start it with the new settings, as follows:</p>
<pre dir="ltr">$ lsnrctl stop
$ lsnrctl start
</pre></div>
<!-- class="sect2" -->
<div id="OTGIS1094" class="sect2"><a id="sthref337"></a>
<h3 class="sect2">Multiple Databases Example: Configuring Oracle Database for Gateway Access</h3>
<div id="OTGIS1095" class="sect3"><a id="sthref338"></a>
<h4 class="sect3">Configuring Oracle Net for Multiple Gateway Instances</h4>
<p>Add two connect descriptor entries to the <code dir="ltr">tnsnames.ora</code> file. You must have an entry for each gateway instance, even if the gateway instances access the same database.</p>
<p>The following DRDA example shows the entry for the original installed gateway first, followed by the two entries for the new gateway instances:</p>
<pre dir="ltr"><span class="italic">old_db_using</span>=(DESCRIPTION=
              (ADDRESS=
                (PROTOCOL=TCP)
                (PORT=port_number)
                (HOST=host_name))
                (CONNECT_DATA=
                    (SID=dg4db2))
               (HS=OK))
<span class="italic">new_db2_using</span>=(DESCRIPTION=
              (ADDRESS=
                (PROTOCOL=TCP)
                (PORT=port_number)
                (HOST=host_name))
                (CONNECT_DATA=
                    (SID=dg4db22))
                (HS=OK))
<span class="italic">new_db3_using</span>=(DESCRIPTION=
              (ADDRESS=
                (PROTOCOL=TCP)
                (PORT=port_number)
                (HOST=host_name))
                (CONNECT_DATA=
                    (SID=dg4db23))
                (HS=OK)) 
</pre>
<p>The value for <code dir="ltr">PORT</code> is the TCP/IP port number of the Oracle Net Listener that is listening for the gateway. The number can be found in the <code dir="ltr">listener.ora</code> file used by the Oracle Net Listener. The value for <code dir="ltr">HOST</code> is the name of the machine on which the gateway is running. The name also can be found in the <code dir="ltr">listener.ora</code> file used by the Oracle Net Listener.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="OTGIS1096" class="sect2"><a id="sthref339"></a>
<h3 class="sect2">Multiple DRDA Databases Example: Accessing DB2 Data</h3>
<p>Enter the following to create a database link for the <code dir="ltr">dg4db22</code> gateway:</p>
<pre dir="ltr">SQL&gt; CREATE PUBLIC DATABASE LINK DRDA2 CONNECT TO
  2  <span class="italic">&#34;user2&#34;</span> IDENTIFIED BY <span class="italic">&#34;password2&#34;</span> USING &#39;new_db2_using&#39;;
</pre>
<p>Enter the following to create a database link for the <code dir="ltr">dg4db23</code> gateway:</p>
<pre dir="ltr">SQL&gt; CREATE PUBLIC DATABASE LINK DRDA3 CONNECT TO
  2  <span class="italic">&#34;user3&#34;</span> IDENTIFIED BY <span class="italic">&#34;password3&#34;</span> USING &#39;new_db3_using&#39;;
</pre>
<p>After the database links are created, you can verify the connection to the new DRDA databases, as in the following:</p>
<pre dir="ltr">SQL&gt; SELECT * FROM ALL_USERS@DRDA2;
</pre>
<pre dir="ltr">SQL&gt; SELECT * FROM ALL_USERS@DRDA3;
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3593">
<tr>
<td class="cellalignment3600">
<table class="cellalignment3598">
<tr>
<td class="cellalignment3597"><a href="configdrda_server.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3597"><a href="security.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3602">
<table class="cellalignment3596">
<tr>
<td class="cellalignment3597"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3597"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3597"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3597"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3597"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3597"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>