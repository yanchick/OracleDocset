<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-45872"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/SDO_GEOR_RA%20Package%20Reference"></a><title>SDO_GEOR_RA Package Reference</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="SDO_GEOR_AGGR package, reference information, aggregate subprograms, GeoRaster, classify procedure, SDO_GEOR_RA package, classify, findCells procedure, findCells, isOverlap function, isOverlap, rasterMathOp procedure, rasterMathOp, rasterUpdate procedure, rasterUpdate"/>
<meta name="dcterms.created" content="2017-03-13T13:19:47Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Spatial and Graph GeoRaster Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49118-05"/>
<meta name="dcterms.isVersionOf" content="GEORS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="geor_aggr_ref.htm" title="Previous" type="text/html"/>
<link rel="Next" href="geor_util_ref.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49118-05.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333"></a> <span id="PAGE" style="display:none;">15/18</span> <!-- End Header -->
<a id="GEORS1226"></a>
<h1 id="GEORS-GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333" class="sect1"><span class="enumeration_chapter">9</span> SDO_GEOR_RA Package Reference</h1>
<div>
<p>The SDO_GEOR_RA package contains subprograms (functions and procedures) for raster algebra and analytic operations related to GeoRaster. This chapter presents reference information, with one or more examples, for each subprogram.</p>
</div>
<a id="GEORS1227"></a>
<div class="props_rev_3"><a id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9"></a>
<h2 id="GEORS-GUID-D9DA6608-7D97-4428-B1B2-002C371846E9" class="sect2"><span class="enumeration_section">9.1</span> SDO_GEOR_RA.classify</h2>
<div>
<div class="section">
<p class="subhead2">Format</p>
<pre dir="ltr">SDO_GEOR_RA.classify(
     inGeoRaster   IN SDO_GEORASTER, 
     expresssion   IN VARCHAR2, 
     rangeArray    IN SDO_NUMBER_ARRAY, 
     valueArray    IN SDO_NUMBER_ARRAY, 
     storageParam  IN VARCHAR2, 
     outGeoRaster  IN OUT SDO_GEORASTER, 
     nodata        IN VARCHAR2 DEFAULT &#39;FALSE&#39;, 
     nodataValue   IN NUMBER DEFAULT 0, 
     parallelParam IN VARCHAR2 DEFAULT NULL);
</pre>
<p>or</p>
<pre dir="ltr">SDO_GEOR_RA.classify(
     georArray     IN SDO_GEORASTER_ARRAY, 
     expresssion   IN VARCHAR2, 
     rangeArray    IN SDO_NUMBER_ARRAY, 
     valueArray    IN SDO_NUMBER_ARRAY, 
     storageParam  IN VARCHAR2, 
     outGeoRaster  IN OUT SDO_GEORASTER, 
     nodata        IN VARCHAR2 DEFAULT &#39;FALSE&#39;, 
     nodataValue   IN NUMBER DEFAULT 0, 
     parallelParam IN VARCHAR2 DEFAULT NULL);
</pre>
<p>or</p>
<pre dir="ltr">SDO_GEOR_RA.classify(
     inGeoRasters  IN SYS_REFCURSOR, 
     expresssion   IN VARCHAR2, 
     rangeArray    IN SDO_NUMBER_ARRAY, 
     valueArray    IN SDO_NUMBER_ARRAY, 
     storageParam  IN VARCHAR2, 
     outGeoRaster  IN OUT SDO_GEORASTER, 
     nodata        IN VARCHAR2 DEFAULT &#39;FALSE&#39;, 
     nodataValue   IN NUMBER DEFAULT 0, 
     parallelParam IN VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Description</p>
<p>Generates a new GeoRaster object after applying the specified classification operation on the input GeoRaster object or objects.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45828"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-693D8A39-F1B4-4E79-B0A2-33A12576A464"><!-- --></a>inGeoRaster</dt>
<dd>
<p>Input GeoRaster object.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45829"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-6A2DF0F1-682D-40CD-8F3C-A727B54A2639"><!-- --></a>georArray</dt>
<dd>
<p>An array of GeoRaster objects. The data type is SDO_GEOR_ARRAY, which is defined as <code class="codeph">VARRAY(10485760) OF SDO_GEORASTER</code>. The maximum number of GeoRaster objects in the array is 8, but there is no limit on the total number of layers for all the GeoRaster objects.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45830"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-0C04F9CF-A191-4F19-A298-F28E9D377F09"><!-- --></a>inGeoRasters</dt>
<dd>
<p>Cursor (SYS_REFCURSOR type) for the input GeoRaster objects. The maximum number of GeoRaster objects in the cursor is 8, but there is no limit on the total number of layers for all the GeoRaster objects.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45831"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-AF7A14C3-3625-4AB3-992D-C9A19F1FBC43"><!-- --></a>expression</dt>
<dd>
<p>An arithmetic expression used to classify cell values. See the Usage Notes for more information about specifying this parameter.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45832"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-3084B735-53CF-47E7-BA66-59A2ECF28B1C"><!-- --></a>rangeArray</dt>
<dd>
<p>A number array that defines ranges for classifying cell values. The array must contain at least one element.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45833"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-FF212AD5-AFED-49E9-8AB0-498CE6B7328F"><!-- --></a>valueArray</dt>
<dd>
<p>A number array that defines the target cell value for each range. The number of elements must be 1 greater than the elements in <code class="codeph">rangeArray</code> (that is, its length must be <code class="codeph">rangeArray</code>+1).</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45834"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-E1DC61E2-EE21-4BED-A926-792BDC5FD9F2"><!-- --></a>storageParam</dt>
<dd>
<p>A string specifying storage parameters, as explained in <a href="geor_intro.htm#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45835"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-53512AF6-CE93-4F42-922A-492F0A1B333A"><!-- --></a>outGeoRaster</dt>
<dd>
<p>Output GeoRaster object.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45836"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-44D0AC19-1985-43E5-9FEB-85ECCB201F65"><!-- --></a>nodata</dt>
<dd>
<p>The string <code class="codeph">TRUE</code> specifies that for any NODATA cells in an input GeoRaster object, the corresponding cells in the output GeoRaster object are to be set to the value specified for the <code class="codeph">nodataValue</code> parameter. The string <code class="codeph">FALSE</code> (the default) causes cells with NODATA values to be considered as regular data. NODATA values and value ranges are discussed in <a href="geor_intro.htm#GUID-3F2FCF41-FDE6-434F-A318-93E0667C927D">NODATA Values and Value Ranges</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45837"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-58624E6C-2C3D-4A69-B567-6FFC3D4AE4B9"><!-- --></a>nodataValue</dt>
<dd>
<p>The value used to set NODATA cells if the <code class="codeph">nodata</code> parameter value is the string <code class="codeph">TRUE</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45838"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-9DEE29EA-EA28-4CCD-8830-A1963B598F10"><!-- --></a>parallelParam</dt>
<dd>
<p>Specifies the degree of parallelism for the operation. If specified, must be in the form <code class="codeph">parallel=</code><span class="italic">n</span>, where <span class="italic">n</span> is greater than 1. The database optimizer uses the degree of parallelism specified by this parameter. If not specified, then by default there is no parallel processing. (For more information, see <a href="geor_intro.htm#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C">Parallel Processing in GeoRaster</a>.)</p>
<p>Specifying <code class="codeph">parallelParam</code> means that you cannot roll back the results of this procedure, as explained in the Usage Notes.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Usage Notes</p>
<p>This procedure generates a one-layer GeoRaster object based on the input GeoRaster object or objects and the <code class="codeph">expression</code> parameter, which is an arithmetic expression string. For each cell in the output GeoRaster object, <code class="codeph">expression</code> is evaluated against corresponding cell values in the input GeoRaster object, and the following algorithm is used to calculate cell values of the output GeoRaster object:</p>
<pre dir="ltr">if  (value of <span class="italic">expression</span> &lt; rangeArray[0])
    cellValue=valueArray[0]
else if (value of <span class="italic">expression</span> &gt;= rangeArray[n-1])
    cellValue=valueArray[n]
else if rangeArray[m-1] &lt;= value of <span class="italic">expression</span> &lt; rangeArray[m]
     cellValue=valueArray[m]
</pre>
<p>In the <code class="codeph">expression</code> calculation:</p>
<ul style="list-style-type: disc;">
<li>
<p>Length of <code class="codeph">rangeArray</code> is <span class="italic">n</span></p>
</li>
<li>
<p>Length of <code class="codeph">valueArray</code> is <span class="italic">n</span>+1</p>
</li>
<li>
<p>0 &lt; <span class="italic">m</span> &lt; <span class="italic">n</span>-1</p>
</li>
</ul>
<p>For more information, see <a href="geor_raster_algebra.htm#GUID-A6F087DC-1E7E-4426-B778-8554A25B3494">Raster Algebra Language</a>.</p>
<p>If you specify <code class="codeph">parallelParam</code>, some execution units of the procedure run as autonomous transactions, which means that some changes are committed while the procedure is running and therefore you cannot roll back those changes. If you do not specify this parameter, you can roll back all changes.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Examples</p>
<p>The following example classifies cell values based on the cell values of the first layer.</p>
<pre dir="ltr">DECLARE 
  geor       SDO_GEORASTER;
  geor1      SDO_GEORASTER;
  rangeArray SDO_NUMBER_ARRAY;
  valueArray SDO_NUMBER_ARRAY;
BEGIN
  rangeArray:=sdo_number_array(70,80,90,100,110,120,130,140,150,160,170,180);
  valueArray:=sdo_number_array(70,80,90,100,110,120,130,140,150,160,170,180,190);
  select georaster into geor from georaster_table where georid = 1;
  insert into georaster_table values (5, sdo_geor.init(&#39;rdt_1&#39;, 5)) returning georaster into geor1;
  sdo_geor_ra.classify(geor,&#39;{0}&#39;,rangeArray,valueArray,null,geor1);
  update georaster_table set georaster = geor1 where georid = 5;
  commit;
END;
/
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GEORS1294"></a>
<div class="props_rev_3"><a id="GUID-67FDA0FA-D055-4821-964F-600660861A72"></a>
<h2 id="GEORS-GUID-67FDA0FA-D055-4821-964F-600660861A72" class="sect2"><span class="enumeration_section">9.2</span> SDO_GEOR_RA.findCells</h2>
<div>
<div class="section">
<p class="subhead2">Format</p>
<pre dir="ltr">SDO_GEOR_AGGR.findCells(
     inGeoRaster   IN SDO_GEORASTER, 
     condition     IN VARCHAR2, 
     storageParam  IN VARCHAR2 
     outGeoRaster  OUT SDO_GEORASTER, 
     bgValues      IN SDO_NUMBER_ARRAY DEFAULT NULL, 
     nodata        IN VARCHAR2 DEFAULT &#39;FALSE&#39;, 
     parallelParam IN VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Description</p>
<p>Generates a new GeoRaster object based on the input GeoRaster object, but masking all cells that do not satisfy the <code class="codeph">condition</code> parameter specification.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45839"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-778D82D4-875C-42EC-97B3-E7B6A09DEDC8"><!-- --></a>inGeoRaster</dt>
<dd>
<p>Input GeoRaster object.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45840"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-CFAD9C6B-5FE5-4D8C-AE0D-67A41FBE7AAC"><!-- --></a>condition</dt>
<dd>
<p>An expression string used to filter out cells. (See the Usage Notes for more information.).</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45841"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-DE82A0CD-F11E-4B9B-8312-801255EAD576"><!-- --></a>storageParam</dt>
<dd>
<p>A string specifying storage parameters, as explained in <a href="geor_intro.htm#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45842"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-E1AF2B45-3B78-479C-BCA6-E47458ABFCFB"><!-- --></a>outGeoRaster</dt>
<dd>
<p>Output GeoRaster object.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45843"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-24E253C7-7805-4A16-8FE8-96A390EAC9C5"><!-- --></a>bgValues</dt>
<dd>
<p>Background values to represent values of cells in the empty raster blocks of the input GeoRaster object. The number of elements in the SDO_NUMBER_ARRAY object must be either one (same filling value used for all bands) or the band dimension size (a different filling value for each band, respectively). For example, <code class="codeph">SDO_NUMBER_ARRAY(1,5,10)</code> fills the first band with 1, the second band with 5, and the third band with 10. The default <code class="codeph">bgValues</code> are zero (0).</p>
<p>The filling values must be valid cell values as specified by the target cell depth background values for filling sparse data.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45844"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-5AE7F4ED-F7DE-4B86-9954-ED85379156F3"><!-- --></a>nodata</dt>
<dd>
<p>The string <code class="codeph">TRUE</code> specifies to keep the original values for any NODATA cells in the GeoRaster object. The string <code class="codeph">FALSE</code> (the default) causes cells with NODATA values to be considered as regular data. NODATA values and value ranges are discussed in <a href="geor_intro.htm#GUID-3F2FCF41-FDE6-434F-A318-93E0667C927D">NODATA Values and Value Ranges</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45845"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-238E953C-E244-4260-A1AD-DA665626E2A4"><!-- --></a>parallelParam</dt>
<dd>
<p>Specifies the degree of parallelism for the operation. If specified, must be in the form <code class="codeph">parallel=</code><span class="italic">n</span>, where <span class="italic">n</span> is greater than 1. The database optimizer uses the degree of parallelism specified by this parameter. If not specified, then by default there is no parallel processing. (For more information, see <a href="geor_intro.htm#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C">Parallel Processing in GeoRaster</a>.)</p>
<p>Specifying <code class="codeph">parallelParam</code> means that you cannot roll back the results of this procedure, as explained in the Usage Notes.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Usage Notes</p>
<p>This procedure generates a new GeoRaster object based on the input GeoRaster object and the <code class="codeph">condition</code> parameter, which is <code class="codeph">booleanExpr</code>, a Boolean expression string. For each cell in the output GeoRaster object, condition is evaluated against corresponding cell values in the input GeoRaster object. If <code class="codeph">condition</code> is true for a cell, the original cell value is kept in the output GeoRaster object; otherwise, <code class="codeph">bgValues</code> are filled for the cell in the output GeoRaster object</p>
<p>For more information, see <a href="geor_raster_algebra.htm#GUID-A6F087DC-1E7E-4426-B778-8554A25B3494">Raster Algebra Language</a>.</p>
<p>If you specify <code class="codeph">parallelParam</code>, some execution units of the procedure run as autonomous transactions, which means that some changes are committed while the procedure is running and therefore you cannot roll back those changes. If you do not specify this parameter, you can roll back all changes.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Examples</p>
<p>The following example changes cell values to default background values 0, if cell value of the second layer is less than or equal to 200.</p>
<pre dir="ltr">DECLARE
  geor  SDO_GEORASTER;
  geor1 SDO_GEORASTER;
BEGIN
  select georaster into geor from georaster_table where georid = 1;
  insert into georaster_table values (5, sdo_geor.init(&#39;rdt_1&#39;, 5)) returning georaster into geor1;
  sdo_geor_ra.findcells(geor, &#39;{1}&gt;200&#39;,null,geor1);
  update georaster_table set georaster = geor1 where georid = 5;
  commit;
END;
/
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GEORS1295"></a>
<div class="props_rev_3"><a id="GUID-B64A8557-B92D-4588-812D-2F767338EA68"></a>
<h2 id="GEORS-GUID-B64A8557-B92D-4588-812D-2F767338EA68" class="sect2"><span class="enumeration_section">9.3</span> SDO_GEOR_RA.isOverlap</h2>
<div>
<div class="section">
<p class="subhead2">Format</p>
<pre dir="ltr">SDO_GEOR.isOverlap(
     georaster1 IN SDO_GEORASTER, 
     georaster2 IN SDO_GEORASTER, 
     tolerance     IN NUMBER DEFAULT 0.5 
     ) RETURN VARCHAR2;
</pre>
<p>or</p>
<pre dir="ltr">SDO_GEOR_RA.isOverlap(
     georArray IN SDO_GEORASTER_ARRAY, 
     tolerance IN NUMBER DEFAULT 0.5 
     ) RETURN VARCHAR2;
</pre>
<p>or</p>
<pre dir="ltr">SDO_GEOR_RA.isOverlap(
     geor_cur  IN SYS_REFCURSOR, 
     tolerance IN NUMBER DEFAULT 0.5 
     ) RETURN VARCHAR2;
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Description</p>
<p>Returns the string <code class="codeph">TRUE</code> if two or more GeoRaster objects overlap, or <code class="codeph">FALSE</code> if two or more GeoRaster objects do not overlap. (See the Usage Notes for the logic used to determine of two GeoRaster objects, whether georeferenced or not, overlap.)</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45846"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-B64A8557-B92D-4588-812D-2F767338EA68__GUID-741AC0AD-EDFD-44A9-911F-96CB15461061"><!-- --></a>georaster1</dt>
<dd>
<p>GeoRaster object.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45847"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-B64A8557-B92D-4588-812D-2F767338EA68__GUID-1DF4D5B0-6546-4960-88EC-DB3A09B25683"><!-- --></a>georaster2</dt>
<dd>
<p>GeoRaster object.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45848"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-B64A8557-B92D-4588-812D-2F767338EA68__GUID-D63A6B19-4496-4156-866C-3F3FBA2EBF4A"><!-- --></a>georArray</dt>
<dd>
<p>An array of GeoRaster objects. The data type is SDO_GEOR_ARRAY, which is defined as <code class="codeph">VARRAY(10485760) OF SDO_GEORASTER</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45849"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-B64A8557-B92D-4588-812D-2F767338EA68__GUID-12B41B56-8A47-4CF8-929C-8E1D651E26EC"><!-- --></a>geor_cur</dt>
<dd>
<p>Cursor (SYS_REFCURSOR type) for the input GeoRaster objects.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45850"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-B64A8557-B92D-4588-812D-2F767338EA68__GUID-A6CE2104-AC15-4F24-A42C-AC6359EBC1F7"><!-- --></a>tolerance</dt>
<dd>
<p>Tolerance value used to determine if two cells in the cell space overlap in the model space. The value should be between 0 and 1, and the unit is cell. For example, 0.5 (the default) means one-half cell, namely, that two cells overlap if the distance between them in 0.5 cell or less.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Usage Notes</p>
<p>The GeoRaster objects being compared for overlap must be either all georeferenced or all non-georeferenced.</p>
<p>The following logic is applied to determine if two GeoRaster objects overlap:</p>
<ol>
<li>
<p>If the row or column dimension size of two GeoRaster objects is different, then return <code class="codeph">&#39;FALSE&#39;</code>. Otherwise, continue to the next step.</p>
</li>
<li>
<p>Check if both GeoRaster objects are georeferenced.</p>
<ol>
<li>
<p>If one is georeferenced and the other one is not, then return <code class="codeph">&#39;FALSE&#39;</code>.</p>
</li>
<li>
<p>If both are non-georeferenced, and if the <code class="codeph">ultCoordinate</code> of both GeoRaster objects is the same, then return <code class="codeph">&#39;TRUE&#39;</code>; else, return <code class="codeph">&#39;FALSE&#39;</code>.</p>
</li>
<li>
<p>If both are georeferenced, go to the next step.</p>
</li>
</ol>
</li>
<li>
<p>Check the <code class="codeph">pType</code>, <code class="codeph">nVars</code>, <code class="codeph">order</code>, and <code class="codeph">nCoefficients</code> values (explained in <a href="geor_intro.htm#GUID-D07DEFFD-F25A-4D8D-8A94-9AFD05CE4256">Functional Fitting Georeferencing Model</a>) of the <code class="codeph">p</code>, <code class="codeph">q</code>, <code class="codeph">r</code>, and <code class="codeph">s</code> polynomials. If any are different, then return &#39;FALSE&#39;; else, go to the next step.</p>
</li>
<li>
<p>Calculate the upper-left, upper-right, lower-left, and lower-right four points from cell space to model space. If the distance of corresponding points of the two GeoRaster objects is within the tolerance value (converted from cell space to model space), then return <code class="codeph">&#39;TRUE&#39;</code>; else, return <code class="codeph">&#39;FALSE</code>&#39;.</p>
</li>
</ol>
<p>The raster algebra functions of GeoRaster require the raster layers from different GeoRaster objects have the same size and completely overlap each other. Before you apply raster algebra operations over two or more GeoRaster objects or perform other operations, you can use the SDO_GEOR_RA.isOverlap function to determine if the GeoRaster objects are of the same size and cover the same ground area.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Examples</p>
<p>The following examples check if two GeoRaster objects overlap. (They use two different formats of the function.)</p>
<pre dir="ltr">DECLARE 
  geor       MDSYS.SDO_GEORASTER;
  geor1      MDSYS.SDO_GEORASTER;
BEGIN
 
  SELECT georaster INTO geor FROM georaster_table WHERE georid = 1;
  SELECT georaster INTO geor1 FROM georaster_table WHERE georid = 30;
  dbms_output.put_line(sdo_geor_ra.isOverlap(geor,geor1,0.5));
END;
/
 
DECLARE 
  mycursor  sys_refcursor;
BEGIN
  OPEN mycursor FOR
    SELECT georaster FROM georaster_table WHERE georid = 1 or georid=30;
  dbms_output.put_line(sdo_geor_ra.isOverlap(mycursor,0.5));
END;
/
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GEORS1296"></a>
<div class="props_rev_3"><a id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333"></a>
<h2 id="GEORS-GUID-BB7A762E-E615-43AD-9D74-5E917D29F333" class="sect2"><span class="enumeration_section">9.4</span> SDO_GEOR_RA.rasterMathOp</h2>
<div>
<div class="section">
<p class="subhead2">Format</p>
<pre dir="ltr">SDO_GEOR_RA.rasterMathOp(
     inGeoRaster   IN SDO_GEORASTER, 
     operation     IN SDO_STRING2_ARRAY, 
     storageParam  IN VARCHAR2, 
     outGeoRaster  IN OUT SDO_GEORASTER, 
     nodata        IN VARCHAR2 DEFAULT &#39;FALSE&#39;, 
     nodataValue   IN NUMBER DEFAULT 0, 
     parallelParam IN VARCHAR2 DEFAULT NULL);
</pre>
<p>or</p>
<pre dir="ltr">SDO_GEOR_RA.rasterMathOp(
     georArray     IN SDO_GEORASTER_ARRAY, 
     operation     IN SDO_STRING2_ARRAY, 
     storageParam  IN VARCHAR2, 
     outGeoRaster  IN OUT SDO_GEORASTER, 
     nodata        IN VARCHAR2 DEFAULT &#39;FALSE&#39;, 
     nodataValue   IN NUMBER DEFAULT 0, 
     parallelParam IN VARCHAR2 DEFAULT NULL);
</pre>
<p>or</p>
<pre dir="ltr">SDO_GEOR_RA.rasterMathOp(
     inGeoRasters  IN SYS_REFCURSOR, 
     operation     IN SDO_STRING2_ARRAY, 
     storageParam  IN VARCHAR2, 
     outGeoRaster  IN OUT SDO_GEORASTER, 
     nodata        IN VARCHAR2 DEFAULT &#39;FALSE&#39;, 
     nodataValue   IN NUMBER DEFAULT 0, 
     parallelParam IN VARCHAR2 DEFAULT NULL);
</pre>
<p>or</p>
<pre dir="ltr">SDO_GEOR_RA.rasterMathOp(
     georaster0    IN SDO_GEORASTER, 
     georaster1    IN SDO_GEORASTER, 
     constant      IN NUMBER, 
     operator      IN PLS_INTEGER, 
     storageParam  IN VARCHAR2, 
     outGeoRaster  IN OUT SDO_GEORASTER, 
     bgValues      IN SDO_NUMBER_ARRAY DEFAULT NULL, 
     nodata        IN VARCHAR2 DEFAULT &#39;FALSE&#39;, 
     nodataValue   IN NUMBER DEFAULT 0, 
     parallelParam IN VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Description</p>
<p>The first three formats generate a new GeoRaster object from layers of one or more input GeoRaster objects based on the <code class="codeph">operation</code> parameter specification. The last format applies a mathematical operation on all corresponding cells of each layer of one or two input GeoRaster objects.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45851"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-22D94268-5AA0-40DA-953C-94524EE40E62"><!-- --></a>inGeoRaster</dt>
<dd>
<p>Input GeoRaster object.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45852"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-2CEBAA2E-4C50-4ADB-897C-2AE3E2818BFF"><!-- --></a>georArray</dt>
<dd>
<p>An array of GeoRaster objects. The data type is SDO_GEOR_ARRAY, which is defined as <code class="codeph">VARRAY(10485760) OF SDO_GEORASTER</code>. The maximum number of GeoRaster objects in the array is 8, but there is no limit on the total number of layers for all the GeoRaster objects.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45853"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-8F19EE44-0BEA-4832-ACD7-A0142901641B"><!-- --></a>inGeoRasters</dt>
<dd>
<p>Cursor (SYS_REFCURSOR type) for the input GeoRaster objects. The maximum number of GeoRaster objects in the cursor is 8, but there is no limit on the total number of layers for all the GeoRaster objects.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45854"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-BCB8F2A8-7DDA-4A8B-9581-EB9E03064BB8"><!-- --></a>georaster0</dt>
<dd>
<p>The left operand.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45855"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-BBB4027A-EB3C-4095-872C-346E2E361E32"><!-- --></a>georaster1</dt>
<dd>
<p>The right operand.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45856"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-312E4152-1D2E-40F2-90E1-ADCAB5F4A3FF"><!-- --></a>operation</dt>
<dd>
<p>An array of <code class="codeph">arithmeticExpr</code> expression strings used to calculate raster cell values in the output GeoRaster object. Each element of the array corresponds to a layer in the output GeoRaster object. The data type is SDO_STRING2_ARRAY, which is defined as <code class="codeph">VARRAY(2147483647) OF VARCHAR2(4096)</code>.</p>
<p>The syntax for the <code class="codeph">arithmeticExpr</code> expressions is explained in <a href="geor_raster_algebra.htm#GUID-A6F087DC-1E7E-4426-B778-8554A25B3494">Raster Algebra Language</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45857"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-DD05E2F6-B769-4EA4-9BFB-D6EF3F67E7F5"><!-- --></a>constant</dt>
<dd>
<p>Constant value for some operators (see the <code class="codeph">operator</code> parameter), such as <code class="codeph">addConst</code> and <code class="codeph">divConstant</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45858"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-1E2C9197-5248-43AB-8328-671AA0E5A3F5"><!-- --></a>operator</dt>
<dd>
<p>One of the following math operators, which are defined in the SDO_GEOR_RA package:</p>
<pre dir="ltr">OPERATOR_ABSOLUTE      
OPERATOR_ADD               
OPERATOR_ADDCONST  
OPERATOR_DIVIDE           
OPERATOR_DIVIDECONST
OPERATOR_EXP
OPERATOR_INVERT            
OPERATOR_LOG             
OPERATOR_MULTIPLY         
OPERATOR_MULTIPLYCONST 
OPERATOR_SUBTRACT   
OPERATOR_SUBTRACTCONST  
</pre>
<p>For the definitions of these operators, see the Usage Notes.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45859"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-98BEDC58-6815-4F2E-9369-FD4E4B213543"><!-- --></a>storageParam</dt>
<dd>
<p>A string specifying storage parameters, as explained in <a href="geor_intro.htm#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">Storage Parameters</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45860"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-03C5E0B3-905C-4FED-8269-418E260EFEFC"><!-- --></a>outGeoRaster</dt>
<dd>
<p>Output GeoRaster object.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45861"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-E8C55E16-FF3B-4384-A265-0FD326F966E2"><!-- --></a>bgValues</dt>
<dd>
<p>Background values to represent values of cells in the empty raster blocks of the input GeoRaster object. The number of elements in the SDO_NUMBER_ARRAY object must be either one (same filling value used for all bands) or the band dimension size (a different filling value for each band, respectively). For example, <code class="codeph">SDO_NUMBER_ARRAY(1,5,10)</code> fills the first band with 1, the second band with 5, and the third band with 10. The default <code class="codeph">bgValues</code> are zero (0).</p>
<p>The filling values must be valid cell values as specified by the target cell depth background values for filling sparse data.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45862"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-FCB707BF-0A53-4280-82C1-63A0881CB25D"><!-- --></a>nodata</dt>
<dd>
<p>The string <code class="codeph">TRUE</code> specifies that for any NODATA cells in an input GeoRaster object, the corresponding cells in the output GeoRaster object are to be set to the value specified for the <code class="codeph">nodataValue</code> parameter. The string <code class="codeph">FALSE</code> (the default) causes cells with NODATA values to be considered as regular data. NODATA values and value ranges are discussed in <a href="geor_intro.htm#GUID-3F2FCF41-FDE6-434F-A318-93E0667C927D">NODATA Values and Value Ranges</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45863"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-457439AA-DF55-4E2D-B089-4E6D237499FC"><!-- --></a>nodataValue</dt>
<dd>
<p>The value used to set NODATA cells if the <code class="codeph">nodata</code> parameter value is the string <code class="codeph">TRUE</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45864"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-A80C5DCD-24DB-474D-8956-D5004788F3FF"><!-- --></a>parallelParam</dt>
<dd>
<p>Specifies the degree of parallelism for the operation. If specified, must be in the form <code class="codeph">parallel=</code><span class="italic">n</span>, where <span class="italic">n</span> is greater than 1. The database optimizer uses the degree of parallelism specified by this parameter. If not specified, then by default there is no parallel processing. (For more information, see <a href="geor_intro.htm#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C">Parallel Processing in GeoRaster</a>.)</p>
<p>Specifying <code class="codeph">parallelParam</code> means that you cannot roll back the results of this procedure, as explained in the Usage Notes.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Usage Notes</p>
<p>The first three formats are used to generate a new GeoRaster object from layers of one or more input GeoRaster objects based on the <code class="codeph">operation</code> parameter. For example, the following example generates a new GeoRaster object that has three layers, and each layer&#39;s value is the cell value of the input GeoRaster object minus 10:</p>
<pre dir="ltr">sdo_geor_ra.rasterMathOp(geor,SDO_STRING2_ARRAY(&#39;{0,0}-10&#39;,&#39;{0,1}-10&#39;,&#39;{0,2}-10&#39;),null,geor1);
</pre>
<p>The fourth format applies a mathematical operation on all corresponding cells of each layer of input GeoRaster objects, and generates a new GeoRaster object with the same dimension size as the first input GeoRaster object (<code class="codeph">geoRaster0</code>). The two input GeoRaster objects must have same row/column/band dimension size.</p>
<p>For the fourth format, all pyramids are removed in the resulting GeoRaster object, but masks of the first input GeoRaster object are kept in the resulting GeoRaster object.</p>
<p>For the <code class="codeph">operator</code> parameter, the operators have the following definitions:</p>
<pre dir="ltr">OPERATOR_ABSOLUTE  : 
 if (src[x][y][b] &lt; 0) {
     dst[x][y][b] = -src[x][y][b];
 } else {
     dst[x][y][b] =  src[x][y][b];
 }

OPERATOR_ADD               
   dst[x][y][b]=src1[x][y][b]+src2[x][y][b]
OPERATOR_ADDCONST  
   dst[x][y][b]=src[x][y][b] +constant   --constant is the third parameter 
 
OPERATOR_DIVIDE           
   dst[x][y][b]=src1[x][y][b]/src2[x][y][b]
 
OPERATOR_DIVIDECONST
   dst[x][y][b]=src[x][y][b]/constant   --constant is the third parameter 
 
OPERATOR_EXP
   dst[x][y][b]=exp(src[x][y][b])
 
OPERATOR_INVERT        :
   Inverts the cell values: dst[x][y][b]=-src[x][y][b] 

OPERATOR_LOG           :  
   dst[x][y][b]=log(src[x][y][b])
 
OPERATOR_MULTIPLY         
   dst[x][y][b]=src1[x][y][b]*src2[x][y][b]
 
OPERATOR_MULTIPLYCONST 
   dst[x][y][b]=src[x][y][b]*constant   --constant is the third parameter 
 
OPERATOR_SUBTRACT   
   dst[x][y][b]=src1[x][y][b]-src2[x][y][b]
 
OPERATOR_SUBTRACTCONST
   dst[x][y][b]=src[x][y][b]-constant   --constant is the third parameter
</pre>
<p>For more information about the raster algebra language, see <a href="geor_raster_algebra.htm#GUID-A6F087DC-1E7E-4426-B778-8554A25B3494">Raster Algebra Language</a>.</p>
<p>If you specify <code class="codeph">parallelParam</code>, some execution units of the procedure run as autonomous transactions, which means that some changes are committed while the procedure is running and therefore you cannot roll back those changes. If you do not specify this parameter, you can roll back all changes.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Examples</p>
<p>The following example adds the constant 10 to all cell values of the input GeoRaster object.</p>
<pre dir="ltr">DECLARE 
  geor       SDO_GEORASTER;
  geor1      SDO_GEORASTER;
BEGIN
 
  select georaster into geor from georaster_table where georid = 1;
  insert into georaster_table values (5, sdo_geor.init(&#39;rdt_1&#39;, 5)) returning georaster into geor1;
  sdo_geor_ra.rasterMathOp(geor,null,10,sdo_geor_ra.OPERATOR_ADDCONST,null,geor1);
  update georaster_table set georaster = geor1 where georid = 5;
  commit;
END;
/
</pre>
<p>The following example generates a new three-layer GeoRaster object from three layers of the input GeoRaster object, and each cell value in the new GeoRaster object is the value of the corresponding &#34;old&#34; cell divided by 2.</p>
<pre dir="ltr">DECLARE 
  geor       SDO_GEORASTER;
  geor1      SDO_GEORASTER;
  geo_array  SDO_GEORASTER_ARRAY;
BEGIN
  select georaster into geor from georaster_table where georid = 2;
  insert into georaster_table values (20, sdo_geor.init(&#39;rdt_1&#39;, 20)) returning georaster into geor1;
  geo_array:=SDO_GEORASTER_ARRAY(geor);
  sdo_geor_ra.rasterMathOp(geo_array,SDO_STRING2_ARRAY(&#39;{0,0}/2&#39;,&#39;{0,1}/2&#39;,&#39;{0,2}/2&#39;),null,geor1);
  update georaster_table set georaster = geor1 where georid = 20;
  commit;
END;
/
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GEORS1297"></a>
<div class="props_rev_3"><a id="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E"></a>
<h2 id="GEORS-GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E" class="sect2"><span class="enumeration_section">9.5</span> SDO_GEOR_RA.rasterUpdate</h2>
<div>
<div class="section">
<p class="subhead2">Format</p>
<pre dir="ltr">SDO_GEOR_RA.rasterUpdate(
     geoRaster     IN OUT SDO_GEORASTER, 
     pyramidLevel  IN NUMBER, 
     conditions    IN SDO_STRING2_ARRAY, 
     vals          IN SDO_STRING2_ARRAYSET, 
     bgValues      IN SDO_NUMBER_ARRAY DEFAULT NULL, 
     nodata        IN VARCHAR2 DEFAULT &#39;FALSE&#39;, 
     parallelParam IN VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Description</p>
<p>Updates all cells for which the <code class="codeph">conditions</code> specification is true, using values calculated from the <code class="codeph">vals</code> specification.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45865"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-B5F738B1-EBFC-49C4-81A5-1C9EE5DED040"><!-- --></a>geoRaster</dt>
<dd>
<p>GeoRaster object that is used for input and for output (updating based on specified conditions).</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45866"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-3E8963CC-B637-48AF-8E88-02716F2EF13B"><!-- --></a>pyramidLevel</dt>
<dd>
<p>Pyramid level to be updated. If this parameter is null, all pyramid levels are updated.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45867"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-77803075-AC56-40BE-95DF-C1CC508C7252"><!-- --></a>conditions</dt>
<dd>
<p>An array of <code class="codeph">booleanExpr</code> expression strings used to select cells. (See the Usage Notes for more information.) The data type is SDO_STRING2_ARRAY, which is defined as <code class="codeph">VARRAY(2147483647) OF VARCHAR2(4096)</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45868"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-47495912-8B7D-49D7-A29F-B86352A6B328"><!-- --></a>vals</dt>
<dd>
<p>An array or arrays of <code class="codeph">arithmeticExpr</code> expressions, with the outer array corresponding to each condition and the inner array corresponding to each layer. The data type is SDO_STRING2_ARRAYSET, which is defined as <code class="codeph">VARRAY(2147483647) OF SDO_STRING2_ARRAY</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45869"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-F71BC178-A4A4-4CE3-A5DB-B4B88EF494F0"><!-- --></a>bgValues</dt>
<dd>
<p>Background values to represent values of cells in the empty raster blocks of the input GeoRaster object. The number of elements in the SDO_NUMBER_ARRAY object must be either one (same filling value used for all bands) or the band dimension size (a different filling value for each band, respectively). For example, <code class="codeph">SDO_NUMBER_ARRAY(1,5,10)</code> fills the first band with 1, the second band with 5, and the third band with 10. The default <code class="codeph">bgValues</code> are zero (0).</p>
<p>The filling values must be valid cell values as specified by the target cell depth background values for filling sparse data.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45870"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-683EC230-CAC7-4ECF-ADA1-3BA8E97C0AA0"><!-- --></a>nodata</dt>
<dd>
<p>The string <code class="codeph">TRUE</code> specifies that any NODATA cells in the GeoRaster object are not to be updated. The string <code class="codeph">FALSE</code> (the default) causes cells with NODATA values to be considered as regular cells and thus eligible for updating. NODATA values and value ranges are discussed in <a href="geor_intro.htm#GUID-3F2FCF41-FDE6-434F-A318-93E0667C927D">NODATA Values and Value Ranges</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-45871"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-88C3B8EB-1A76-49F5-986B-30E1E563C3BC"><!-- --></a>parallelParam</dt>
<dd>
<p>Specifies the degree of parallelism for the operation. If specified, must be in the form <code class="codeph">parallel=</code><span class="italic">n</span>, where <span class="italic">n</span> is greater than 1. The database optimizer uses the degree of parallelism specified by this parameter. If not specified, then by default there is no parallel processing. (For more information, see <a href="geor_intro.htm#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C">Parallel Processing in GeoRaster</a>.)</p>
<p>Specifying <code class="codeph">parallelParam</code> means that you cannot roll back the results of this procedure, as explained in the Usage Notes.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Usage Notes</p>
<p>Because this procedure overwrites data in the input GeoRaster object, you should make a copy of the original GeoRaster object and use this procedure on the copied object. After you are satisfied with the result of this procedure, you can discard the original GeoRaster object if you wish.</p>
<p>This procedure selects cells from the specified GeoRaster object based on <code class="codeph">booleanExpr</code> strings specified in the <code class="codeph">conditions</code> parameter, and updates corresponding cell values by calculating <code class="codeph">arithmeticExpr</code> expression strings specified in the <span class="bold">vals</span> parameter. For example, if:</p>
<pre dir="ltr">conditions = SDO_STRING2_ARRAY(&#39;{0}=48&#39;,&#39;{0}=108&#39;)
vals = SDO_STRING2_ARRAYSET(SDO_STRING2_ARRAY(&#39;123&#39;,&#39;54&#39;,&#39;89&#39;),SDO_STRING2_ARRAY(&#39;98&#39;,&#39;56&#39;,&#39;123&#39;))
</pre>
<p>Then:</p>
<ul style="list-style-type: disc;">
<li>
<p>For all cells whose first layer value equals 48, their first, second, and third layer values are set to 123,54,89, respectively.</p>
</li>
<li>
<p>For all cells whose first layer value equals 108, their first, second, and third layer values are set to 98,56,123, respectively.</p>
</li>
</ul>
<p>For more information, see <a href="geor_raster_algebra.htm#GUID-A6F087DC-1E7E-4426-B778-8554A25B3494">Raster Algebra Language</a>.</p>
<p>If you specify <code class="codeph">parallelParam</code>, some execution units of the procedure run as autonomous transactions, which means that some changes are committed while the procedure is running and therefore you cannot roll back those changes. If you do not specify this parameter, you can roll back all changes.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Examples</p>
<p>The following example updates all cells for which the <code class="codeph">conditions</code> specification is true, using values calculated from the <code class="codeph">vals</code> specification.</p>
<pre dir="ltr">DECLARE 
  geor SDO_GEORASTER;
BEGIN
  select georaster into geor from georaster_table where georid = 1;
  sdo_geor_ra.rasterUpdate(geor,0,SDO_STRING2_ARRAY(&#39;(abs({0}-{1})=48)&amp;({2}-{1}=-101)&#39;,&#39;2*{0}-{1}/3=108&#39;),SDO_STRING2_ARRAYSET(SDO_STRING2_ARRAY(&#39;123&#39;,&#39;54&#39;,&#39;89&#39;),SDO_STRING2_ARRAY(&#39;98&#39;,&#39;56&#39;,&#39;123&#39;)));
END;
/
</pre></div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4336">
<tr>
<td class="cellalignment4343">
<table class="cellalignment4341">
<tr>
<td class="cellalignment4340"><a href="geor_aggr_ref.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4340"><a href="geor_util_ref.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4345">
<table class="cellalignment4339">
<tr>
<td class="cellalignment4340"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4340"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4340"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4340"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4340"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4340"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>