<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-5474"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Managing%20Broker%20Configurations"></a><title>Managing Broker Configurations</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="broker configurations, supported, starting, Data Guard monitor (DMON), life cycle, creating, a standby database, standby databases, constructing from backups, primary database, constructing a standby database, states, status, configuration, status modes"/>
<meta name="dcterms.created" content="2017-07-21T13:32:49Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Data Guard Broker"/>
<meta name="dcterms.identifier" content="E48241-09"/>
<meta name="dcterms.isVersionOf" content="DGBKR"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="install.htm" title="Previous" type="text/html"/>
<link rel="Next" href="dbresource.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48241-09.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-FCCDC53A-C6F4-4AFB-A220-9D6622474027"></a> <span id="PAGE" style="display:none;">8/17</span> <!-- End Header -->
<a id="DGBKR095"></a>
<h1 id="DGBKR-GUID-FCCDC53A-C6F4-4AFB-A220-9D6622474027" class="sect1"><span class="enumeration_chapter">3</span> Managing Broker Configurations</h1>
<div>
<p>The following topics describe how to manage the broker configuration itself; for information about managing the components of a broker configuration, see <a href="dbresource.htm#GUID-0CD70A29-4F51-4CC1-88EB-2D8AA29F75D7">Managing the Members of a Broker Configuration</a>. <a id="d5980e24" class="indexterm-anchor"></a></p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configure.htm#GUID-7E2D5B71-4052-4EC9-AA18-3BB4645B1696">Configuration Support</a></p>
</li>
<li>
<p><a href="configure.htm#GUID-BF708883-519A-428D-A1A1-BDCDCE272D64">Configuration Properties</a></p>
</li>
<li>
<p><a href="configure.htm#GUID-E4EE9680-63B7-4483-843B-47E33FC41B20">Setting Up the Broker Configuration Files</a></p>
</li>
<li>
<p><a href="configure.htm#GUID-BAAE6C51-C29F-4950-A885-EB1289A230B2">Starting the Data Guard Broker</a></p>
</li>
<li>
<p><a href="configure.htm#GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE">Management Cycle of a Broker Configuration</a></p>
</li>
<li>
<p><a href="configure.htm#GUID-C2D3075F-FEA6-4C38-93F5-36E945D6C931">Enable and Disable Operations</a></p>
</li>
<li>
<p><a href="configure.htm#GUID-92632C7B-BFF3-4678-9F4F-CC0B72ED6A35">Configuration Status</a></p>
</li>
</ul>
</div>
<a id="DGBKR3518"></a><a id="DGBKR100"></a>
<div class="props_rev_3"><a id="GUID-7E2D5B71-4052-4EC9-AA18-3BB4645B1696"></a>
<h2 id="DGBKR-GUID-7E2D5B71-4052-4EC9-AA18-3BB4645B1696" class="sect2"><span class="enumeration_section">3.1</span> Configuration Support</h2>
<div>
<p>Oracle Data Guard broker enables you to create a broker configuration consisting of up to 253 members, including one primary database and a combination of standby databases and far sync instances that receive redo directly from the primary database. The broker controls the member of the configuration, monitors the health of the configuration, and reports health and other operational characteristics through the Oracle Enterprise Management notification mechanisms if you are using Oracle Enterprise Manager Cloud Control, or through <code class="codeph">SHOW</code> commands if you are using DGMGRL.</p>
<p><a id="d5980e97" class="indexterm-anchor"></a>A supported Oracle Data Guard configuration contains the following components:</p>
<ul style="list-style-type: disc;">
<li>
<p>A <a id="d5980e106" class="indexterm-anchor"></a>primary database (Oracle RAC or non-Oracle RAC)</p>
</li>
<li>
<p>A combination of standby databases and far sync instances that receive redo directly from the primary database.</p>
</li>
<li>
<p><a id="d5980e116" class="indexterm-anchor"></a>Oracle Net Services <a id="d5980e121" class="indexterm-anchor"></a>network configuration that defines a connection between the databases</p>
</li>
<li>
<p>Standby <a id="d5980e129" class="indexterm-anchor"></a>(archived redo log files) <a id="d5980e134" class="indexterm-anchor"></a>destination parameters and configuration properties</p>
</li>
<li>
<p><a id="d5980e141" class="indexterm-anchor"></a>Redo transport services that transmit the redo data from the primary database to the standbys and far sync instances</p>
</li>
<li>
<p><a id="d5980e148" class="indexterm-anchor"></a>Log apply services that apply redo data to the standby databases from the archived redo log files or standby redo log files</p>
</li>
</ul>
<p><a id="d5980e154" class="indexterm-anchor"></a><a id="d5980e158" class="indexterm-anchor"></a>The Oracle Data Guard log apply services update standby databases with redo data that is transmitted automatically from the primary database by redo transport services. The archived redo log files and standby redo log files contain all of the database changes except for <span class="italic">unrecoverable</span> or <span class="italic">unlogged</span> changes.</p>
<ul style="list-style-type: disc;">
<li>
<p>On physical standby databases, <a id="d5980e173" class="indexterm-anchor"></a>Redo Apply applies the redo data to keep the standby consistent with the primary database.</p>
</li>
<li>
<p>On logical standby databases, <a id="d5980e179" class="indexterm-anchor"></a>SQL Apply applies the redo data to keep the standby consistent with the primary database.</p>
</li>
<li>
<p>On snapshot standby databases, the redo data is received but not applied until the snapshot standby database is converted back to a physical standby database.</p>
</li>
<li>
<p>On far sync instances, the redo data is received and then forwarded to a physical standby database. A far sync instance does not have data files and does not apply any of the redo data it has received.</p>
</li>
</ul>
<p>The broker&#39;s Oracle Data Guard monitor (DMON) process configures and maintains the broker configuration as a group of <a id="d5980e190" class="indexterm-anchor"></a><a id="d5980e194" class="indexterm-anchor"></a>objects that you can manage and monitor as a single unit. Thus, when you enter a command that affects multiple databases, the DMON process:</p>
<ul style="list-style-type: disc;">
<li>
<p>Carries out your request on the primary database</p>
</li>
<li>
<p>Coordinates with the DMON process for each of the other databases, as required for your request</p>
</li>
<li>
<p>Updates the configuration file on the local system</p>
</li>
<li>
<p>Communicates with the DMON process for each of the other databases to update their copies of the configuration file</p>
</li>
</ul>
<p>Through the DMON process, you can configure, monitor, and control the databases and the configuration together as a unit. If you disable the configuration, broker management of all of the databases in the configuration is also disabled. If you later enable the configuration, broker management is enabled for each database in the configuration.</p>
<p><a href="configure.htm#GUID-7E2D5B71-4052-4EC9-AA18-3BB4645B1696__I1016374">Figure 3-1</a> shows a broker configuration with a primary database and physical standby database.</p>
<p>On the primary database, the figure shows the redo transport services in addition to the following main components: the primary database, DMON, the online redo log files, and the archived redo log files. The figure also shows standby redo log files in outline form on the primary side; the standby redo logs are outlined to indicate they are currently inactive but have been configured in preparation for a switchover or failover to the standby role.The physical standby database includes the following components: a standby database, log apply services, DMON, archived redo log files, and standby redo log files. The online redo log files on the physical standby database are outlined to indicate they are currently inactive but have been configured in preparation for a switchover or failover to the primary role.</p>
<div class="infoboxnotealso" id="GUID-7E2D5B71-4052-4EC9-AA18-3BB4645B1696__GUID-337C8B0D-FF7C-44EB-B9B1-256571504A47">
<p class="notep1">See Also:</p>
<p><a class="olink SBYDB4703" target="_blank" href="../SBYDB/concepts.htm#SBYDB4703"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for more information about standby databases</p>
</div>
<div class="figure" id="GUID-7E2D5B71-4052-4EC9-AA18-3BB4645B1696__I1016374">
<p class="titleinfigure">Figure 3-1 Oracle Data Guard Broker Configuration</p>
<img width="654" height="560" src="img/GUID-C508D07F-09A6-4F62-8923-E464AC31744B-default.gif" alt="Description of Figure 3-1 follows" title="Description of Figure 3-1 follows"/><br/>
<a href="img_text/GUID-C508D07F-09A6-4F62-8923-E464AC31744B-print.htm">Description of &#34;Figure 3-1 Oracle Data Guard Broker Configuration&#34;</a></div>
<!-- class="figure" --></div>
</div>
<a id="DGBKR3659"></a>
<div class="props_rev_3"><a id="GUID-BF708883-519A-428D-A1A1-BDCDCE272D64"></a>
<h2 id="DGBKR-GUID-BF708883-519A-428D-A1A1-BDCDCE272D64" class="sect2"><span class="enumeration_section">3.2</span> Configuration Properties</h2>
<div>
<p>Configuration properties control the behavior of the broker configuration. You can view and dynamically update the values of these properties using either DGMGRL or Cloud Control. However, some properties can only be updated through DGMGRL.</p>
<p>A configuration property has configuration-wide scope; meaning that the value you set for the property applies uniformly to each database in the configuration.</p>
<div class="infoboxnotealso" id="GUID-BF708883-519A-428D-A1A1-BDCDCE272D64__GUID-AD8C6BA7-0B37-4AEA-9F6A-FCEBA2E1F2CA">
<p class="notep1">See Also:</p>
<p><a href="dbpropref.htm#GUID-1966A317-DD75-4385-8A64-ADEC75662F7E">Oracle Data Guard Broker Properties</a> for complete descriptions of all broker configuration properties</p>
</div>
</div>
</div>
<a id="DGBKR105"></a>
<div class="props_rev_3"><a id="GUID-E4EE9680-63B7-4483-843B-47E33FC41B20"></a>
<h2 id="DGBKR-GUID-E4EE9680-63B7-4483-843B-47E33FC41B20" class="sect2"><span class="enumeration_section">3.3</span> Setting Up the Broker Configuration Files</h2>
<div>
<div class="section">
<p>Two <a id="d5980e286" class="indexterm-anchor"></a>copies of the configuration file are maintained for each database so as to always have a record of the last known <span class="italic">valid</span> state of the configuration. When the broker is started for the first time, the configuration files are automatically created and named using a default path name and filename that is operating-system specific. You can override this default path name and filename by setting the following initialization parameters for that database:</p>
<pre dir="ltr">DG_BROKER_CONFIG_FILE1
DG_BROKER_CONFIG_FILE2
</pre>
<p>Note the following restrictions when setting the <code class="codeph">DG_BROKER_CONFIG_FILE1</code> and <code class="codeph">DG_BROKER_CONFIG_FILE2</code> initialization parameters:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>These parameters can only be set or changed when the Oracle Data Guard broker is not running (<code class="codeph">DG_BROKER_START=FALSE</code>).</p>
</li>
<li>
<p>These parameters must specify an Oracle ASM, Oracle OCFS, or NFS that is shared for all Oracle RAC instances.</p>
</li>
</ul>
<p>The Oracle Data Guard broker works with databases that use either Oracle managed or user managed datafiles. These datafiles can reside on a file system or an Oracle ASM disk group. The following section contains these topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configure.htm#GUID-73036514-7061-4B0D-83E5-C257EE59D791">Renaming the Broker Configuration Files</a></p>
</li>
<li>
<p><a href="configure.htm#GUID-DFCBAD5E-221E-45E8-8D05-3B782E99B74F">Managing Broker Configuration Files in an Oracle RAC Environment</a></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
<a id="DGBKR3391"></a>
<div class="props_rev_3"><a id="GUID-73036514-7061-4B0D-83E5-C257EE59D791"></a>
<h3 id="DGBKR-GUID-73036514-7061-4B0D-83E5-C257EE59D791" class="sect3"><span class="enumeration_section">3.3.1</span> Renaming the Broker Configuration Files</h3>
<div>
<div class="section">
<p>You can change the configuration filenames dynamically by issuing the <code class="codeph">ALTER SYSTEM</code> SQL statement. However, you cannot alter these parameters when the broker&#39;s DMON process is running. To change the names of these configuration files for a given database, perform the following steps:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Disable the broker configuration using the DGMGRL <code class="codeph">DISABLE</code> command. See <a href="configure.htm#GUID-C2D3075F-FEA6-4C38-93F5-36E945D6C931">Enable and Disable Operations</a>.</span></li>
<li class="stepexpand"><span>Stop the Oracle Data Guard broker DMON process using the following SQL statement:</span>
<div>
<pre dir="ltr">SQL&gt; ALTER SYSTEM SET DG_BROKER_START=FALSE;
</pre></div>
</li>
<li class="stepexpand"><span>Change the configuration filenames for the database:</span>
<div>
<pre dir="ltr">SQL&gt; ALTER SYSTEM SET DG_BROKER_CONFIG_FILE1=<span class="italic">filespec1</span>;
SQL&gt; ALTER SYSTEM SET DG_BROKER_CONFIG_FILE2=<span class="italic">filespec2</span>;
</pre>
<div class="infobox-note" id="GUID-73036514-7061-4B0D-83E5-C257EE59D791__GUID-9CBF1377-2E1D-44F6-8F98-8C52F072C449">
<p class="notep1">Note:</p>
<p>If the broker is managing an Oracle RAC database, the value of <code class="codeph">DG_BROKER_CONFIG_FILE1</code> and the value of <code class="codeph">DG_BROKER_CONFIG_FILE2</code> for each of the instances must point to the same set of physical files.</p>
</div>
</div>
</li>
<li class="stepexpand"><span>The method of moving the files depends upon where they currently reside and where you want to move them to:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>If the files reside on an operating system file system, use operating system commands to move the files to their new location.</p>
</li>
<li>
<p>If the old or new location is an Oracle ASM disk group, use the <code class="codeph">DBMS_FILE_TRANSFER.COPY_FILE</code> function to transfer the files to their new location.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Restart the Oracle Data Guard broker DMON process, as follows:</span>
<div>
<pre dir="ltr">SQL&gt; ALTER SYSTEM SET DG_BROKER_START=TRUE;
</pre></div>
</li>
<li class="stepexpand"><span>Enable the broker configuration using the DGMGRL <code class="codeph">ENABLE</code> command or the Enable operation in the Oracle Data Guard management pages of Cloud Control.</span></li>
</ol>
<div class="section">
<div class="infobox-note" id="GUID-73036514-7061-4B0D-83E5-C257EE59D791__GUID-73AFF704-60F5-48BA-A7EA-C0817E4E8C1A">
<p class="notep1">Note:</p>
<p>As of Release 11.2, the files can reside on disks having any supported sector size (physical block size) up to and including 4KB sectors. Configuration files that were generated by a release prior to 11.2 are restricted to reside only on disks having the same sector size as was used at the time the files were first created. These files must first be upgraded to Release 11.2 before they can be moved to a location having a different sector size, or are otherwise expected to reside across a mixture of sector sizes in a given broker configuration. See <a href="upgrade_appx.htm#GUID-9B424C49-A005-4106-9EF8-CB7479F9ACB8">Upgrading from Oracle Database 10g and Oracle Database 11g to Oracle Database 12c Release 1 (12.1)</a> for more information.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DGBKR3392"></a>
<div class="props_rev_3"><a id="GUID-DFCBAD5E-221E-45E8-8D05-3B782E99B74F"></a>
<h3 id="DGBKR-GUID-DFCBAD5E-221E-45E8-8D05-3B782E99B74F" class="sect3"><span class="enumeration_section">3.3.2</span> Managing Broker Configuration Files in an Oracle RAC Environment</h3>
<div>
<p>If the broker is managing an<a id="d5980e448" class="indexterm-anchor"></a> Oracle RAC database, the value of <a id="d5980e453" class="indexterm-anchor"></a><a id="d5980e455" class="indexterm-anchor"></a><code class="codeph">DG_BROKER_CONFIG_FILE1</code> and the value of <code class="codeph">DG_BROKER_CONFIG_FILE2</code> for each of the instances must point to the same set of physical files. In other words, all instances of the database must reference the same set of configuration files. The configuration files can be deployed using one of the following methods:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configure.htm#GUID-DA58B12D-65A3-439E-8919-AF56F28DD2FD">Using Cluster File System (CFS) for Configuration Files</a></p>
</li>
<li>
<p><a href="configure.htm#GUID-72586D45-4E5D-409B-B594-8B00FBF91507">Using Oracle ASM Disk Groups for Configuration Files</a></p>
</li>
</ul>
</div>
<a id="DGBKR3519"></a><a id="DGBKR3393"></a>
<div class="props_rev_3"><a id="GUID-DA58B12D-65A3-439E-8919-AF56F28DD2FD"></a>
<h4 id="DGBKR-GUID-DA58B12D-65A3-439E-8919-AF56F28DD2FD" class="sect4"><span class="enumeration_section">3.3.2.1</span> Using Cluster File System (CFS) for Configuration Files</h4>
<div>
<p>If <a id="d5980e499" class="indexterm-anchor"></a>cluster file system (CFS) is available, and the configuration files reside there, the <code class="codeph">DG_BROKER_CONFIG_FILE</code><span class="variable">n</span> parameters on all of the instances must be set to these files including the path to the CFS area. <a href="configure.htm#GUID-DA58B12D-65A3-439E-8919-AF56F28DD2FD__CFHBJHIG">Figure 3-2</a> shows the set up for the broker configuration files on <a id="d5980e511" class="indexterm-anchor"></a><a id="d5980e515" class="indexterm-anchor"></a><a id="d5980e519" class="indexterm-anchor"></a>CFS. In this scenario, the parameters and value for all instances would be:</p>
<pre dir="ltr">DG_BROKER_CONFIG_FILE1=$ORACLE_BASE/admin/<span class="italic">db_unique_name</span>/dr1<span class="italic">db_unique_name</span>.dat
DG_BROKER_CONFIG_FILE2=$ORACLE_BASE/admin/<span class="italic">db_unique_name</span>/dr2<span class="italic">db_unique_name</span>.dat
</pre>
<div class="figure" id="GUID-DA58B12D-65A3-439E-8919-AF56F28DD2FD__CFHBJHIG">
<p class="titleinfigure">Figure 3-2 Broker Configuration Setup in a CFS Area</p>
<img width="662" height="320" src="img/GUID-24B28112-55F3-4F0C-B339-22BA249F260B-default.gif" alt="Description of Figure 3-2 follows" title="Description of Figure 3-2 follows"/><br/>
<a href="img_text/GUID-24B28112-55F3-4F0C-B339-22BA249F260B-print.htm">Description of &#34;Figure 3-2 Broker Configuration Setup in a CFS Area&#34;</a></div>
<!-- class="figure" --></div>
</div>
<a id="DGBKR3520"></a><a id="DGBKR3394"></a>
<div class="props_rev_3"><a id="GUID-72586D45-4E5D-409B-B594-8B00FBF91507"></a>
<h4 id="DGBKR-GUID-72586D45-4E5D-409B-B594-8B00FBF91507" class="sect4"><span class="enumeration_section">3.3.2.2</span> Using Oracle ASM Disk Groups for Configuration Files</h4>
<div>
<p>The broker&#39;s configuration files can also reside on an Oracle ASM disk group. <a href="configure.htm#GUID-72586D45-4E5D-409B-B594-8B00FBF91507__CFHBJBDE">Figure 3-3</a> shows the setup for the broker configuration files on Oracle ASM devices. In this scenario, the parameters and values would be specified, as follows:</p>
<pre dir="ltr">ALTER SYSTEM SET DG_BROKER_CONFIG_FILE1 = &#39;+DG/DIRECTORY/DR1.DAT&#39; SCOPE=BOTH;
ALTER SYSTEM SET DG_BROKER_CONFIG_FILE2 = &#39;+DG/DIRECTORY/DR2.DAT&#39; SCOPE=BOTH;
</pre>
<div class="figure" id="GUID-72586D45-4E5D-409B-B594-8B00FBF91507__CFHBJBDE">
<p class="titleinfigure">Figure 3-3 Broker Configuration Setup with Oracle ASM</p>
<img width="554" height="321" src="img/GUID-12E0A6A7-D462-446D-83B3-96046AA127C7-default.gif" alt="Description of Figure 3-3 follows" title="Description of Figure 3-3 follows"/><br/>
<a href="img_text/GUID-12E0A6A7-D462-446D-83B3-96046AA127C7-print.htm">Description of &#34;Figure 3-3 Broker Configuration Setup with Oracle ASM&#34;</a></div>
<!-- class="figure" -->
<p>Because the configuration files must be explicitly named by the user, these configuration files are not Oracle Managed Files (OMF).To create the broker&#39;s configuration files on an Oracle ASM disk group, set the <code class="codeph">DG_BROKER_CONFIG_FILE1</code> and <code class="codeph">DG_BROKER_CONFIG_FILE2</code> initialization parameters to a string value that includes the name of an existing Oracle ASM disk group, an existing directory in that disk group, and the name of the configuration file itself.</p>
</div>
</div>
</div>
</div>
<a id="DGBKR115"></a>
<div class="props_rev_3"><a id="GUID-BAAE6C51-C29F-4950-A885-EB1289A230B2"></a>
<h2 id="DGBKR-GUID-BAAE6C51-C29F-4950-A885-EB1289A230B2" class="sect2"><span class="enumeration_section">3.4</span> Starting the Data Guard Broker</h2>
<div>
<div class="section">
<p>After setting up the configuration files, the <code class="codeph">DG_BROKER_START</code> initialization parameter must be set to <code class="codeph">TRUE</code> for each database to start the DMON processes.</p>
<p>By default, the <code class="codeph">DG_BROKER_START</code> initialization parameter is set to <code class="codeph">FALSE</code>. However, you can set the value in the following ways:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>If you are using Cloud Control, it automatically sets the <code class="codeph">DG_BROKER_START</code> initialization parameter to <code class="codeph">TRUE</code> for new standby databases that it creates.</p>
</li>
<li>
<p>If you are using DGMGRL, you must explicitly set the <code class="codeph">DG_BROKER_START</code> initialization parameter to <code class="codeph">TRUE</code>; otherwise, the broker will not start. You can set the <code class="codeph">DG_BROKER_START</code> initialization parameter with the following SQL statement:</p>
<pre dir="ltr">SQL&gt; ALTER SYSTEM SET DG_BROKER_START=TRUE;

System altered.

SQL&gt; SHOW PARAMETER DG_BROKER_START

NAME               TYPE      VALUE
------------------------------------  
dg_broker_start    boolean   TRUE
</pre></li>
</ul>
<p>Whether you use Cloud Control or DGMGRL, set the value of the <code class="codeph">DG_BROKER_START</code> initialization parameter to TRUE in the server parameter file on each primary and standby database. Doing so ensures that Oracle Data Guard broker will start automatically the next time you start any instance of the database.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="DGBKR3522"></a><a id="DGBKR3523"></a><a id="DGBKR3524"></a><a id="DGBKR3525"></a><a id="DGBKR3634"></a><a id="DGBKR3526"></a><a id="DGBKR3527"></a><a id="DGBKR3528"></a><a id="DGBKR3529"></a><a id="DGBKR120"></a>
<div class="props_rev_3"><a id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE"></a>
<h2 id="DGBKR-GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE" class="sect2"><span class="enumeration_section">3.5</span> Management Cycle of a Broker Configuration</h2>
<div>
<p>The broker helps you to create a new configuration or manage an existing configuration. <a href="configure.htm#GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__I1019110">Figure 3-4</a> shows the <a id="d5980e708" class="indexterm-anchor"></a>life cycle of a broker configuration.</p>
<div class="figure" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__I1019110">
<p class="titleinfigure">Figure 3-4 Life Cycle of a Broker Configuration and Its Databases</p>
<img width="275" height="386" src="img/GUID-B3A7767F-5038-4374-8485-FF7190C50108-default.gif" alt="Description of Figure 3-4 follows" title="Description of Figure 3-4 follows"/><br/>
<a href="img_text/GUID-B3A7767F-5038-4374-8485-FF7190C50108-print.htm">Description of &#34;Figure 3-4 Life Cycle of a Broker Configuration and Its Databases&#34;</a></div>
<!-- class="figure" -->
<div class="section">
<p class="subhead2">Create the Broker Configuration</p>
</div>
<!-- class="section" -->
<div class="section">
<p>When using Cloud Control, the <a id="d5980e722" class="indexterm-anchor"></a><a id="d5980e728" class="indexterm-anchor"></a>Add Standby Database wizard can either add an existing (Oracle RAC or non-Oracle RAC) standby database into the configuration or create a new (Oracle RAC or non-Oracle RAC) standby database and add it to the configuration. The standby database can be a physical, logical, or snapshot database.</p>
<p>When using DGMGRL, the primary database and a standby database must already exist. You construct the standby database from backups of the primary database control files and datafiles, and then prepare it for recovery.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Enable the Broker Configuration</p>
</div>
<!-- class="section" -->
<div class="section">
<p>An Oracle Data Guard configuration must be enabled to be managed or monitored by the broker. Conversely, you disable a configuration if you no longer want to manage it with the broker. When you disable a configuration, broker management of all of its databases is also disabled.</p>
<div class="infobox-note" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-5DAAC317-7C65-43A5-88AA-9BE073906F4B">
<p class="notep1">Note:</p>
<p>You can enable or disable the configuration using DGMGRL. You cannot disable the configuration using Cloud Control. You can enable the configuration using Cloud Control in the event that it was previously disabled using DGMGRL.</p>
</div>
<p>A broker configuration, when first created using Cloud Control, is automatically enabled as soon as the Add Standby Database wizard completes.</p>
<p>A broker configuration, when first created using DGMGRL, is in a disabled condition. This means its constituent databases are not yet under active control of the broker. When you finish <a id="d5980e748" class="indexterm-anchor"></a>configuring the databases into a broker configuration with DGMGRL, you must <a id="d5980e753" class="indexterm-anchor"></a><a id="d5980e757" class="indexterm-anchor"></a>enable the configuration to allow the broker to manage the configuration.</p>
<p>You can enable:</p>
<ul style="list-style-type: disc;">
<li>
<p>The entire configuration, including all of its databases</p>
</li>
<li>
<p>An individual standby database</p>
</li>
</ul>
<p>You can easily disable a database if a problem occurs such that it cannot function properly in a broker configuration. Note that you cannot disable the primary database. You must disable the entire configuration to disable the primary database.</p>
<p>You may also want to disable a configuration temporarily, and then change some properties in the broker configuration without affecting the actual database properties. The changed properties will take effect when the configuration is enabled again for management by the broker.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Make Role Changes Within the Broker Configuration, As Needed</p>
</div>
<!-- class="section" -->
<div class="section">
<p>At any <a id="d5980e781" class="indexterm-anchor"></a><a id="d5980e787" class="indexterm-anchor"></a><a id="d5980e791" class="indexterm-anchor"></a>time, you can issue a single command to change the roles of the databases in the configuration. If some event renders the primary database unusable, you can fail over one of the standby databases to become the new primary database.</p>
<p>If Flashback Database was enabled on the former primary database, then after failover has completed, you can reinstate the former primary database as a standby database for the new primary database.</p>
<p>In addition, planned downtime for maintenance can be reduced because you can quickly switch over production processing from the current primary database to a standby database, and then switch back again after the planned maintenance.</p>
<div class="infoboxnotealso" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-C45B43F6-BAEC-49F0-815E-2A45BC0B11D7">
<p class="notep1">See Also:</p>
<p><a href="sofo.htm#GUID-44E7A982-7CD4-4A51-B00E-62C0698C5CD6">Switchover and Failover Operations</a> for more information about role changes</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Convert to Snapshot Standby Database</p>
</div>
<!-- class="section" -->
<div class="section">
<p>At any time, you can issue a single command to convert a physical standby database to a snapshot standby database. The snapshot standby database is a fully updatable database that receives redo data generated from the primary database, but does not apply it.</p>
<p>Once you are done using the snapshot standby database, you can again issue a single command to convert it to a physical standby database. After the conversion to a physical standby has completed, Redo Apply services will start (assuming the state is <code class="codeph">APPLY-ON</code>) and apply all of the accumulated redo data.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Make State Changes to the Databases, As Needed</p>
</div>
<!-- class="section" -->
<div class="section">
<p>When you enable a configuration for the first time, the broker, by default, starts redo transport services on the primary and starts log apply services on the standby (except for a snapshot standby).</p>
<p>At any time, you can issue a single command through Cloud Control or DGMGRL to change the state of the database. For example, you could bring the primary database into the <code class="codeph">TRANSPORT-OFF</code> state to temporarily stop sending redo data to the standby databases. Then, to resume sending redo data to the standbys, you could bring the primary database into the <code class="codeph">TRANSPORT-ON</code> state.</p>
<div class="infoboxnotealso" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-14FF7D1D-3856-4DD9-8A3A-F56D27BDE0B2">
<p class="notep1">See Also:</p>
<p><a href="dbresource.htm#GUID-0CD70A29-4F51-4CC1-88EB-2D8AA29F75D7">Managing the Members of a Broker Configuration</a> for more information about database state changes</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Update Database Properties, As Needed</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The broker enables you to set <a id="d5980e844" class="indexterm-anchor"></a><a id="d5980e850" class="indexterm-anchor"></a>database properties, some of which correspond to database initialization parameters. You can change these properties to dynamically control such things as redo transport, standby file management, log apply, and to support the overall configuration protection mode. The broker records the changes in the broker configuration file for each database in the Oracle Data Guard configuration and propagates the changes to the related initialization parameters in the server parameter files, if needed.</p>
<div class="infoboxnotealso" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-907D046A-BFBA-4137-9407-0F667DB953A4">
<p class="notep1">See Also:</p>
<p><a href="dbresource.htm#GUID-0CD70A29-4F51-4CC1-88EB-2D8AA29F75D7">Managing the Members of a Broker Configuration</a> and <a href="dbpropref.htm#GUID-1966A317-DD75-4385-8A64-ADEC75662F7E">Oracle Data Guard Broker Properties</a> for complete information about database properties</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Set Data Protection Modes, As Needed</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The broker enables you to set the data protection mode for the configuration. You can configure the <a id="d5980e871" class="indexterm-anchor"></a>protection mode to <a id="d5980e876" class="indexterm-anchor"></a>maximize data protection, <a id="d5980e879" class="indexterm-anchor"></a>maximize availability, or <a id="d5980e882" class="indexterm-anchor"></a>maximize performance.</p>
<div class="infobox-note" id="GUID-1CB8734A-B5D9-4B65-A950-72ADDF632DCE__GUID-7CBFAA08-843F-43E7-9693-F95397CA7669">
<p class="notep1">Note:</p>
<p><a href="dbresource.htm#GUID-994BE350-859F-41DC-A1D3-B6E8D5EEF2C8">Managing Data Protection Modes</a> for information about managing data protection modes</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Monitor the Configuration</p>
</div>
<!-- class="section" -->
<div class="section">
<p>You can check the health of the configuration, display and update the properties of the databases, and set Cloud Control events.</p>
<p>Cloud Control also provides a dynamic <a id="d5980e899" class="indexterm-anchor"></a>performance page that automatically and dynamically refreshes chart data and status at specified intervals. The performance chart shows a graphical summary of how far behind and how much redo data is being generated and applied.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="DGBKR125"></a>
<div class="props_rev_3"><a id="GUID-C2D3075F-FEA6-4C38-93F5-36E945D6C931"></a>
<h2 id="DGBKR-GUID-C2D3075F-FEA6-4C38-93F5-36E945D6C931" class="sect2"><span class="enumeration_section">3.6</span> Enable and Disable Operations</h2>
<div>
<p>A key concept of management with the broker is the notion of enabling and disabling broker management of the <a id="d5980e931" class="indexterm-anchor"></a><a id="d5980e935" class="indexterm-anchor"></a><a id="d5980e939" class="indexterm-anchor"></a><a id="d5980e943" class="indexterm-anchor"></a>databases in a broker configuration. The enable and disable operations are defined for databases that are in a broker configuration; you cannot perform these broker operations on databases that are not part of the broker configuration. This is because when you enable or disable a database in the broker configuration, you are effectively enabling or disabling the ability of the broker to manage and monitor the specified database.</p>
<p>However, disabling a broker configuration does not affect current services and operations in the actual Oracle Data Guard configuration. For example, when you disable a broker configuration, redo transport services and log apply services in the Oracle Data Guard configuration continue to function unchanged, but you can no longer manage them through the broker interfaces.</p>
<p>In addition, disabling a database <span class="italic">does not</span> remove or delete it from the broker configuration file. You can still change the properties of a disabled database and later reenable your ability to manage with the broker using the DGMGRL <code class="codeph">ENABLE CONFIGURATION</code> or <code class="codeph">ENABLE DATABASE</code> commands, or the Enable option in the Oracle Data Guard management pages of Cloud Control.</p>
<div class="infobox-note" id="GUID-C2D3075F-FEA6-4C38-93F5-36E945D6C931__GUID-2A215DA6-F271-449D-9833-747D0285658E">
<p class="notep1">Note:</p>
<p>If you disable broker management of a standby database in the broker configuration, that standby database cannot be used by the broker as a failover target in the event of loss of the primary database.</p>
</div>
<p>Disabling broker management of the configuration may be useful to do even though you are removing the broker&#39;s ability to monitor and control the databases. For example, it may be advantageous to disable a configuration temporarily in order to change one or more properties in the broker configuration all at the same time. When you change properties in a disabled configuration, it does not affect the actual database properties underneath because the changes are not applied to the running database until you reenable the configuration. For example, you might want to change the overall configuration protection mode and the redo transport services properties on a disabled configuration so that all changes are applied to the configuration at the same time upon the next enable operation.</p>
<div class="infoboxnotealso" id="GUID-C2D3075F-FEA6-4C38-93F5-36E945D6C931__GUID-BF131332-12FD-4F4E-81BC-246C9CD448D6">
<p class="notep1">See Also:</p>
<p><a href="dbresource.htm#GUID-4F9446D8-AB6E-4917-BED2-058126654DA0">How the Protection Modes Influence Broker Operations</a></p>
</div>
</div>
</div>
<a id="DGBKR130"></a>
<div class="props_rev_3"><a id="GUID-92632C7B-BFF3-4678-9F4F-CC0B72ED6A35"></a>
<h2 id="DGBKR-GUID-92632C7B-BFF3-4678-9F4F-CC0B72ED6A35" class="sect2"><span class="enumeration_section">3.7</span> Configuration Status</h2>
<div>
<p>A configuration status reveals the overall <a id="d5980e1003" class="indexterm-anchor"></a>health of the configuration. Status of the configuration is acquired from the status of all of its databases.<a id="d5980e1008" class="indexterm-anchor"></a><a id="d5980e1012" class="indexterm-anchor"></a></p>
<p>The following list describes the possible status modes for a configuration:</p>
<ul style="list-style-type: disc;">
<li>
<p><a id="d5980e1022" class="indexterm-anchor"></a>Success</p>
<p>The configuration, including all of the databases configured in it, is operating as specified by the user without any warnings or errors.</p>
</li>
<li>
<p><a id="d5980e1029" class="indexterm-anchor"></a>Warning</p>
<p>One or more of the databases in the configuration are not operating as specified by the user. To obtain more information, use the DGMGRL <code class="codeph">SHOW DATABASE &lt;db-unique-name&gt;</code> command or the Cloud Control display to locate each database and examine its status to reveal the source of the problem.</p>
</li>
<li>
<p><a id="d5980e1039" class="indexterm-anchor"></a><a id="d5980e1041" class="indexterm-anchor"></a>Error</p>
<p>One or more of the databases in the configuration failed or may no longer be operating as specified by the user. To obtain more information, use the DGMGRL <code class="codeph">SHOW DATABASE &lt;db-unique-name&gt;</code> command or the Cloud Control display to locate each database and examine its status to reveal the source of the problem.</p>
</li>
<li>
<p>Unknown/Disabled</p>
<p>Broker management of the configuration is disabled and the broker is not monitoring the status of the databases in the configuration.</p>
</li>
</ul>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5444">
<tr>
<td class="cellalignment5451">
<table class="cellalignment5449">
<tr>
<td class="cellalignment5448"><a href="install.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5448"><a href="dbresource.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5453">
<table class="cellalignment5447">
<tr>
<td class="cellalignment5448"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5448"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5448"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5448"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5448"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5448"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>