<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-114679"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Gateway%20Running%20Environment"></a><title>Gateway Running Environment</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1090"/>
<meta name="dcterms.created" content="2017-06-09T14:12:29Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Gateway for WebSphere MQ Installation and User&#39;s Guide"/>
<meta name="dcterms.identifier" content="E17930-06"/>
<meta name="dcterms.isVersionOf" content="WSMQG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2005, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="config.htm" title="Previous" type="text/html"/>
<link rel="Next" href="ap_pgm8.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17930-06.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">14/18</span> <!-- End Header -->
<div id="WSMQG209" class="chapter"><a id="BABBAEEB"></a>
<h1 class="chapter"><span class="secnum">8</span> Gateway Running Environment</h1>
<p>This chapter describes the <a id="sthref348"></a>gateway running environment. It contains the following sections:</p>
<ul>
<li>
<p><a href="#i1019489">Security Models</a></p>
</li>
<li>
<p><a href="#i1019590">Transaction Support</a></p>
</li>
<li>
<p><a href="#i1019621">Troubleshooting</a></p>
</li>
</ul>
<a id="i1019489"></a>
<div id="WSMQG210" class="sect1">
<h2 class="sect1">Security <a id="sthref349"></a>Models</h2>
<p>WebSphere MQ has its own authorization mechanism.&nbsp;Applications are allowed to perform certain operations on queues or queue managers only when their effective user&nbsp;ID has authorization for each operation.&nbsp;The effective user&nbsp;ID, typically the operating system user, depends on the WebSphere MQ environment and the platform it runs on.</p>
<p>The effective user&nbsp;ID in an Oracle environment is not dependent on an operating system account or the platform.&nbsp;Because of this difference, the gateway provides two authorization models for Oracle applications to work with WebSphere MQ:</p>
<ul>
<li>
<p>Relaxed</p>
</li>
<li>
<p>Strict</p>
</li>
</ul>
<p>Although Oracle and operating system user&nbsp;IDs can be longer than 12&nbsp;characters, the length of user&nbsp;IDs used for either model cannot exceed 12&nbsp;characters.&nbsp;Oracle user accounts do not have a minimum number of characters required for their passwords, but some platforms and operating systems do.&nbsp;Take their requirements into consideration when deciding on a password or user&nbsp;ID.</p>
<p>The authorization model is configured with the <code dir="ltr">AUTHORIZATION_MODEL</code> parameter in the gateway <a id="sthref350"></a><a id="sthref351"></a>initialization file.&nbsp;Refer to <a href="ap_gip.htm#BEHHEICJ">Appendix C, &#34;Gateway Initialization Parameters&#34;</a> for more information about the <code dir="ltr">AUTHORIZATION_MODEL</code> parameter.</p>
<div id="WSMQG211" class="sect2"><a id="sthref352"></a>
<h3 class="sect2">Relaxed Model<a id="sthref353"></a></h3>
<p>This model discards the Oracle user name and password.&nbsp;The authorizations granted to the effective user&nbsp;ID of the gateway by the queue manager are the only associations an Oracle application has.&nbsp;For example, if the gateway user&nbsp;ID is granted permission to open or read messages, or place messages on a queue, then all Oracle applications that access the gateway can request those operations.</p>
<p>The effective user&nbsp;ID is determined by how the gateway runs:</p>
<ul>
<li>
<p>If the gateway runs as an MQI client application, then the user&nbsp;ID is determined by the MQI channel definition.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Refer to IBM publications for more information about channel definitions</div>
</li>
<li>
<p>If the gateway runs as an MQI server application, then the effective user&nbsp;ID of the gateway is the user account that started the Oracle Net listener and has authorization to all the WebSphere MQ objects that the Oracle application wants to access.&nbsp;Refer to <a href="#i1019547">&#34;Authorization for WebSphere MQ Objects&#34;</a> for more information.</p>
</li>
</ul>
<p>Oracle recommends using the relaxed model only if your application has minimal security requirements.</p>
</div>
<!-- class="sect2" -->
<a id="i1019521"></a>
<div id="WSMQG212" class="sect2">
<h3 class="sect2">Strict Model<a id="sthref354"></a></h3>
<p>This model uses the Oracle user&nbsp;ID and password provided in the <a id="sthref355"></a><code dir="ltr">CREATE DATABASE LINK</code> <a id="sthref356"></a>statement when a database link is created, or the current Oracle user&nbsp;ID and password if none was provided with <code dir="ltr">CREATE DATABASE LINK</code>.</p>
<p>The Oracle user&nbsp;ID:</p>
<ul>
<li>
<p>Must match a user account for the system that runs the gateway and for the system that runs the WebSphere MQ queue manager</p>
</li>
<li>
<p>Must have authorization for all the accessed WebSphere MQ objects.&nbsp;Refer to <a href="#i1019547">&#34;Authorization for WebSphere MQ Objects&#34;</a> for more information.</p>
</li>
</ul>
<p>The authorization process to verify the Oracle user&nbsp;ID and password varies, depending on how the gateway runs.</p>
<div id="WSMQG213" class="sect3"><a id="sthref357"></a>
<h4 class="sect3">Authorization Process for a WebSphere MQ Server Application</h4>
<p>If the gateway runs as a WebSphere MQ server application, then the authorization process checks the user&nbsp;ID and password against the local or network password file. If they match, then the gateway performs a SET-UID for the user&nbsp;ID and continues to run under this user&nbsp;ID.&nbsp;Further WebSphere MQ authorization checks happen for this user&nbsp;ID.</p>
</div>
<!-- class="sect3" -->
<div id="WSMQG214" class="sect3"><a id="sthref358"></a>
<h4 class="sect3">Authorization Process for a WebSphere MQ Client Application</h4>
<p>If the gateway runs as a WebSphere MQ client application, then the authorization process checks the user&nbsp;ID and password against the local or network password file.&nbsp;If they match, then the <a id="sthref359"></a><a id="sthref360"></a><a id="sthref361"></a><code dir="ltr">MQ_USER_ID</code> and <a id="sthref362"></a><a id="sthref363"></a><a id="sthref364"></a><code dir="ltr">MQ_PASSWORD</code> WebSphere MQ environment variables are set to the values of the user&nbsp;ID and password. If the channel definition specifies the <code dir="ltr">MCAUSER</code> WebSphere MQ environment variable <a id="sthref365"></a><a id="sthref366"></a><a id="sthref367"></a>as blank characters, then WebSphere MQ authorization checks are performed for the user&nbsp;ID.</p>
<p>If MCAUSER is set, not set, or security exits are defined for the MQI channel, then these override the gateway efforts.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Refer to IBM publications for more information about WebSphere MQ environment variables.</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1019547"></a>
<div id="WSMQG215" class="sect2">
<h3 class="sect2">Authorization for WebSphere MQ Objects</h3>
<p><a id="sthref368"></a>The effective user&nbsp;ID for the relaxed model and the Oracle user&nbsp;ID for the strict model require the <a id="sthref369"></a>WebSphere MQ authorizations described in <a href="#CEGGCCJD">Table 8-1</a>.</p>
<div id="WSMQG340" class="tblhruleformal">
<p class="titleintable"><a id="sthref370"></a><a id="CEGGCCJD"></a>Table 8-1 WebSphere MQ Access Authorization</p>
<table class="cellalignment5005" title="WebSphere MQ Access Authorization" summary="This table describes access authorization." dir="ltr">
<thead>
<tr class="cellalignment4994">
<th class="cellalignment5001" id="r1c1-t4">Type of Access</th>
<th class="cellalignment5001" id="r1c2-t4">WebSphere MQ Authorization Keywords</th>
<th class="cellalignment5001" id="r1c3-t4">Alternate WebSphere MQ Authorization Keywords</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4994">
<td class="cellalignment5002" id="r2c1-t4" headers="r1c1-t4">
<p>Permission to access the WebSphere MQ queue manager</p>
</td>
<td class="cellalignment5002" headers="r2c1-t4 r1c2-t4">
<p><code dir="ltr">all</code> or <code dir="ltr">allmqi</code></p>
</td>
<td class="cellalignment5002" headers="r2c1-t4 r1c3-t4">
<p><code dir="ltr">connect</code></p>
<p><code dir="ltr">setid</code></p>
</td>
</tr>
<tr class="cellalignment4994">
<td class="cellalignment5002" id="r3c1-t4" headers="r1c1-t4">
<p>Permission to send messages to a WebSphere MQ queue</p>
</td>
<td class="cellalignment5002" headers="r3c1-t4 r1c2-t4">
<p><code dir="ltr">all</code> or <code dir="ltr">allmqi</code></p>
</td>
<td class="cellalignment5002" headers="r3c1-t4 r1c3-t4">
<p><code dir="ltr">passall</code></p>
<p><code dir="ltr">passid</code></p>
<p><code dir="ltr">put</code></p>
<p><code dir="ltr">setid</code></p>
</td>
</tr>
<tr class="cellalignment4994">
<td class="cellalignment5002" id="r4c1-t4" headers="r1c1-t4">
<p>Permission to receive messages from a WebSphere MQ queue</p>
</td>
<td class="cellalignment5002" headers="r4c1-t4 r1c2-t4">
<p><code dir="ltr">all</code> or <code dir="ltr">allmqi</code></p>
</td>
<td class="cellalignment5002" headers="r4c1-t4 r1c3-t4">
<p><code dir="ltr">browse</code></p>
<p><code dir="ltr">get</code></p>
<p><code dir="ltr">passall</code></p>
<p><code dir="ltr">passid</code></p>
<p><code dir="ltr">setid</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Refer to IBM publications for more information about WebSphere MQ authorizations.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1019590"></a>
<div id="WSMQG216" class="sect1">
<h2 class="sect1">Transaction Support</h2>
<p>Transactions from an Oracle application that use the gateway and invoke WebSphere MQ message queue operations are managed by the transaction coordinator at the Oracle database where the transaction originates.</p>
<div id="WSMQG217" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref371"></a>
<h3 class="sect2">Non-Oracle Data Sources and Distributed Transactions</h3>
<p>When an Oracle distributed database contains a gateway, the gateway must be properly configured to take part in a distributed transaction.&nbsp;The outcome of a distributed transaction involving a gateway should be that all participating sites roll back or commit their parts of the distributed transaction.&nbsp;All participating sites, including gateway sites, that are updated during a distributed transaction must be protected against failure and must be able to take part in the two-phase commit mechanism.</p>
<p>A gateway that updates a target system as part of a distributed transaction must be able to take part in the automatic recovery mechanism, which might require that recovery information be recorded in transaction memory at the target system.</p>
<p>If a SQL-based gateway is involved in a distributed transaction, the distributed database must be in a consistent state after the distributed transaction is committed.</p>
<p>A database gateway or a SQL-based gateway with the procedural option translates remote procedure calls into target system calls.&nbsp;From the viewpoint of the Oracle transaction model, the gateway is like an Oracle database executing a PL/SQL block containing SQL statements that are used to access an Oracle database.</p>
<p>For a database gateway, it is unknown if a target system call alters data.&nbsp;To ensure the consistency of a distributed database, it must be assumed that a database gateway updates the target system.&nbsp;Accordingly, all remote procedure calls sent to a database gateway take part in a distributed transaction and must be protected by the two-phase commit protocol.&nbsp;For example, you could issue the following SQL*Plus statements:</p>
<pre dir="ltr">EXECUTE REMOTE_PROC@FACTORY;
INSERT INTO DEBIT@FINANCE
ROLLBACK;
</pre>
<p>In this example, <code dir="ltr">REMOTE_PROC</code> is a remote procedure call to access a database gateway, <code dir="ltr">DEBIT</code> is an Oracle table residing in an Oracle database, and <code dir="ltr">FACTORY</code> and <code dir="ltr">FINANCE</code> are database links used to access the remote sites.</p>
</div>
<!-- class="sect2" -->
<div id="WSMQG218" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref372"></a>
<h3 class="sect2">Transaction Capab<a id="sthref373"></a>ility Types</h3>
<p>When gateways are involved in a distributed transaction, the transaction capabilities of the non-Oracle data source determine whether the data source can participate in two-phase commit operations or distributed transactions.</p>
<p>Depending on the capabilities of the non-Oracle data source, transactions can be classified as one of the following types:</p>
<div class="inftblinformal">
<table class="cellalignment5005" title="Transaction types" summary="This table describes transaction capability types." dir="ltr">
<thead>
<tr class="cellalignment4994">
<th class="cellalignment5001" id="r1c1-t6">Type</th>
<th class="cellalignment5001" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4994">
<td class="cellalignment5002" id="r2c1-t6" headers="r1c1-t6">Read-only</td>
<td class="cellalignment5002" headers="r2c1-t6 r1c2-t6">During a distributed transaction, the gateway provides read-only access to the data source, so the gateway can only be queried. A Read-only is used for target systems that use the presumed-commit model or do not support rollback mechanisms.</td>
</tr>
<tr class="cellalignment4994">
<td class="cellalignment5002" id="r3c1-t6" headers="r1c1-t6">Single-site</td>
<td class="cellalignment5002" headers="r3c1-t6 r1c2-t6">During a distributed transaction, the target system is either read-only (other sites can be updated) or the only site updated (can participate in remote transactions). Single-site is used for target systems that support rollback, commit, and presumed-abort, but cannot prepare or commit-confirm as they have no distributed transaction memory, the ability to remember what happened during and after a distributed transaction.</td>
</tr>
<tr class="cellalignment4994">
<td class="cellalignment5002" id="r4c1-t6" headers="r1c1-t6">Commit-confirm</td>
<td class="cellalignment5002" headers="r4c1-t6 r1c2-t6">The gateway is a partial partner in the Oracle transaction mode. During a distributed transaction in which it is updated, the gateway must be the commit point site. Commit-confirm is used for target systems that support rollback, commit, presumed-abort, and commit-confirm, but do not support prepare. The commit-confirm capability requires distributed transaction memory.</td>
</tr>
<tr class="cellalignment4994">
<td class="cellalignment5002" id="r5c1-t6" headers="r1c1-t6">Two-phase commit</td>
<td class="cellalignment5002" headers="r5c1-t6 r1c2-t6">The gateway is a partial partner in the Oracle transaction model. During a distributed transaction, the gateway cannot be the commit point site.Two-phase commit is used for target systems that support rollback, commit, presumed-abort, and prepare, but do not support commit-confirm, because they have no distributed transaction memory.</td>
</tr>
<tr class="cellalignment4994">
<td class="cellalignment5002" id="r6c1-t6" headers="r1c1-t6">Two-phase commit-commit confirm</td>
<td class="cellalignment5002" headers="r6c1-t6 r1c2-t6">The gateway is a full partner in the Oracle transaction model. During a distributed transaction, the gateway can be the commit point site, depending on the commit point strength defined in the gateway initialization file.This transaction type is used for target systems that support a full two-phased commit transaction model. That is, the target system supports rollback, commit, presumed-abort, prepare, and commit-confirm.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" --></div>
<!-- class="sect2" -->
<div id="WSMQG219" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref374"></a>
<h3 class="sect2">Transaction Capability Types of Oracle Database Gateway for WebSphere MQ</h3>
<p>Transactions from an Oracle application (that invoke WebSphere MQ message queue operations and that are using the gateway) are managed by the Oracle transaction coordinator at the Oracle database where the transaction originates.&nbsp;The Oracle Database Gateway for WebSphere MQ provides the following transaction types:</p>
<ul>
<li>
<p>Single-site</p>
</li>
<li>
<p>Commit-confirm</p>
</li>
</ul>
<div id="WSMQG220" class="sect3"><a id="sthref375"></a>
<h4 class="sect3">Single-Site Transactions<a id="sthref376"></a></h4>
<p><a id="sthref377"></a>Single-site transactions are supported for all WebSphere MQ environments and platforms. Single-Site means that the gateway can participate in a transaction only when queues belonging to the same WebSphere MQ queue manager are updated.&nbsp;An Oracle application can select, but not update, data on any Oracle database within the same transaction that sends to, or receives a message from, a WebSphere MQ queue. To update objects in the Oracle database, the transaction involving the WebSphere MQ queue should first be committed or rolled back.</p>
<p>This default mode of the gateway is implemented using WebSphere MQ single-phase, where the queue manager acts as the synchronizing point coordinator.</p>
</div>
<!-- class="sect3" -->
<a id="i1019604"></a>
<div id="WSMQG221" class="sect3">
<h4 class="sect3">Commit-Confirm Transactions<a id="sthref378"></a></h4>
<p><a id="sthref379"></a>Commit-Confirm transactions are enhanced forms of single-site transactions and are supported for all WebSphere MQ environments and platforms.&nbsp;<a id="sthref380"></a>Commit-confirm means that the gateway can participate in transactions when queues belonging to the same WebSphere MQ queue manager are updated and, at the same time, any number of Oracle databases are updated.&nbsp;Only one gateway with the commit-confirm model can join the distributed transaction because the gateway operates as the focal point of the transaction.&nbsp;To apply changes to queues of more than one queue manager, updates applied to one queue manager need to be committed before a new transaction is started for the next queue manager.</p>
<p>As with single-site transactions, commit-confirm transactions are implemented using WebSphere MQ single-phase, but it requires a dedicated recovery queue at the queue manager to log the transaction&nbsp;ID.&nbsp;At commit time, the gateway places a message in this queue with the message&nbsp;ID set to the Oracle transaction&nbsp;ID.&nbsp;After the gateway calls the queue manager to commit the transaction, the extra message on the transaction log queue becomes part of the overall transaction.&nbsp;This makes it possible to determine the outcome of the transaction in case of system failure, allowing the gateway to recover a failed transaction.&nbsp;When a transaction completes successfully, the gateway removes the associated message from the queue.</p>
<p>The WebSphere MQ administrator must create a reserved queue at the queue manager.&nbsp;The name of this queue is specified in the gateway <a id="sthref381"></a><a id="sthref382"></a>initialization file with the <a id="sthref383"></a><a id="sthref384"></a><code dir="ltr">TRANSACTION_LOG_QUEUE</code> parameter.&nbsp;All Oracle users that access WebSphere MQ through the gateway should have full authorization for this queue.&nbsp;The transaction log queue is reserved for transaction logging only and must not be used, accessed, or updated other than by the gateway.&nbsp;When a system failure occurs, the Oracle recovery process checks the transaction log queue to determine the recovery strategy.</p>
<p>Two gateway initialization parameters, <a id="sthref385"></a><a id="sthref386"></a><code dir="ltr">TRANSACTION_RECOVERY_USER</code> and <a id="sthref387"></a><a id="sthref388"></a><code dir="ltr">TRANSACTION_RECOVERY_PASSWORD</code>, are set in the gateway initialization file to specify the user&nbsp;ID and password for recovery purposes. When set, the gateway uses this user&nbsp;ID and password combination for recovery work. The recovery user&nbsp;ID should have full authorization for the transaction log queue.</p>
<p>Refer to <a href="ap_gip.htm#BEHHEICJ">Appendix C, &#34;Gateway Initialization Parameters&#34;</a> for more information about configuring the gateway for commit-confirm transactions.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1019621"></a>
<div id="WSMQG222" class="sect1">
<h2 class="sect1">Troubleshooting</h2>
<p>This section includes information about messages, error codes, gateway tracing, and gateway operations.</p>
<a id="i1019623"></a>
<div id="WSMQG223" class="sect2">
<h3 class="sect2">Message and Error Code Processing</h3>
<p>The gateway architecture includes a number of components.&nbsp;Any of these components can detect and report an error condition while processing PL/SQL code. An error condition can be complex, involving error codes and supporting data from multiple components.&nbsp;In all cases, the Oracle application receives a single Oracle error code on which to act.</p>
<p>Error conditions are represented in the following ways:</p>
<ul>
<li>
<p><a id="sthref389"></a>Errors from the <a id="sthref390"></a>Oracle database</p>
<p>Messages from the Oracle database are in the format ORA-<span class="italic">xxxxx</span> or PLS-<span class="italic">xxxxx,</span> where <span class="italic">xxxxx</span> is a code number.&nbsp; ORA-<span class="italic">xxxxx</span> is followed by text explaining the error code.&nbsp;Refer to the <a class="olink ERRMG" href="../ERRMG/toc.htm"><span class="italic">Oracle Database Error Messages</span></a> for explanations of these errors.</p>
<p>For example:</p>
<pre dir="ltr">PLS-00306: wrong number or types of arguments in call to &#39;MQOPEN&#39;
ORA-06550: line7, column 3:
PL/SQL: Statement ignored
</pre></li>
<li>
<p>Gateway and <a id="sthref391"></a>WebSphere MQ <a id="sthref392"></a>errors<a id="sthref393"></a></p>
<p>When possible, a WebSphere MQ error code is converted to an Oracle error code.&nbsp;If that is not possible, then the Oracle <a id="sthref394"></a>error <a id="sthref395"></a>ORA-29400 with the corresponding WebSphere MQ error code is returned.&nbsp;Refer to <a href="#i1019730">&#34;Common Error Codes&#34;</a> for more information.</p>
<p>For Example:</p>
<pre dir="ltr">ORA-29400: data cartridge error
MQI MQCONNX failed. completion code=2, reason code=2058
</pre>
<div class="infobox-note">
<p class="notep1"><span class="bold">Note</span>:</p>
Because the Oracle database distinguishes only between a successful or failed outcome of all user operations, MQI calls that return a warning are reported as a successful operation.</div>
</li>
</ul>
<a id="i1019691"></a>
<div id="WSMQG224" class="sect3">
<h4 class="sect3">Interpreting Gateway Messages</h4>
<p><a id="sthref396"></a>Error codes are<a id="sthref397"></a> generally accompanied by additional message text, beyond the text associated with the Oracle message number.&nbsp;The additional text includes details about the error.</p>
<p>Gateway messages have the following format:</p>
<pre dir="ltr">ORA-nnnnn:<span class="italic">error_message_text</span>
<span class="italic">gateway_message_line</span>
</pre>
<p>where:</p>
<ul>
<li>
<p>nnnn is an Oracle error number.</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">error_message_text</span></code> is the text of the message associated with the error.</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">gateway_message_line</span></code> is additional message text generated by the gateway.</p>
</li>
</ul>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1019730"></a>
<div id="WSMQG225" class="sect2">
<h3 class="sect2">Common Error<a id="sthref398"></a><a id="sthref399"></a><a id="sthref400"></a> Codes</h3>
<p>The error conditions that are described in this section are common error conditions that an application might receive while using the gateway. However, do not cover all error situations.</p>
<div class="msgset"><a id="tahiti588130"></a>
<div class="msgentry">
<dl>
<dt><span class="msg"><a class="dashingAutolink" name="autolink-114677"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="sthref401"></a>ORA-01017:&nbsp;invalid username/password; logon denied</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> Invalid username or password</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Logon denied</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<a id="tahiti588360"></a>
<div class="msgentry">
<dl>
<dt><span class="msg"><a class="dashingAutolink" name="autolink-114678"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="sthref402"></a>ORA-29400:&nbsp;The MQSeries MQI call &#34;call_name&#34; fails with reason code mqi_code</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> An MQI call to a WebSphere MQ queue manager failed.&nbsp;The gateway could not complete the current operation.</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> If <code dir="ltr"><span class="codeinlineitalic">call_name</span></code> is <a id="sthref403"></a><a id="sthref404"></a><code dir="ltr">MQOPEN</code> and <code dir="ltr"><span class="codeinlineitalic">mqi_code</span></code> is 2035, then do the following:
<ul>
<li>
<p>If the gateway is configured for the relaxed security model, then use the WebSphere MQ administrative command interface to grant sufficient message privileges to the user account that started the Oracle Net listener.&nbsp;These privileges allow the user to send and receive messages for the specified WebSphere MQ queue.&nbsp;Refer to IBM publications for more information.</p>
</li>
<li>
<p>If the gateway is configured for the strict security model, use the WebSphere MQ administrative command interface to grant message privileges to the user name specified in the <a id="sthref405"></a><code dir="ltr">CREATE DATABASE LINK</code> <a id="sthref406"></a>statement.&nbsp;If no user name was specified in the <code dir="ltr">CREATE DATABASE LINK</code> statement, the privileges are granted to the current Oracle user&nbsp;ID.&nbsp;These privileges enable the user to send and receive messages for the specified WebSphere MQ queue.&nbsp;Refer to IBM publications for more information.</p>
</li>
</ul>
<p>If <code dir="ltr"><span class="codeinlineitalic">call_name</span></code> is <a id="sthref407"></a><code dir="ltr">MQOPEN</code><a id="sthref408"></a>, and if <code dir="ltr"><span class="codeinlineitalic">mqi_code</span></code> is&nbsp;2085, then verify that the queue that is specified in the WebSphere MQ profile exists at the WebSphere MQ queue manager that you are trying to access and that the queue name is correctly spelled and in the correct letter case.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Refer to IBM publications for more information on <code dir="ltr">mqi_codes</code> other than 2035 and 2085..</div>
</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" --></div>
<!-- class="msgset" --></div>
<!-- class="sect2" -->
<div id="WSMQG226" class="sect2"><a id="sthref409"></a>
<h3 class="sect2">Gateway Tracing</h3>
<p><a id="sthref410"></a>The gateway has a <a id="sthref411"></a>trace feature for testing and debugging purposes.&nbsp;The trace feature collects information about the gateway running environment, MQI calls, and parameter values of the MQI calls.&nbsp;The amount of trace data to collect is based on the tracing level selected with the <a id="sthref412"></a><a id="sthref413"></a><code dir="ltr">TRACE_LEVEL</code> parameter. Refer to <a href="ap_gip.htm#BEHHEICJ">Appendix C, &#34;Gateway Initialization Parameters&#34;</a> for more information about enabling tracing.</p>
<div class="infobox-note">
<p class="notep1"><span class="bold">Note</span>:</p>
Do not enable tracing when your application is running in a production environment because it reduces gateway performance.</div>
<p>The trace data is written to the directory and file specified by the <a id="sthref414"></a><a id="sthref415"></a><code dir="ltr">LOG_DESTINATION</code> parameter.</p>
<div id="WSMQG227" class="sect3"><a id="sthref416"></a>
<h4 class="sect3">LOG_DESTINATION Parameter</h4>
<p>This is a gateway initialization parameter.</p>
<div id="WSMQG228" class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref417"></a>
<h5 class="sect4">Gateway:</h5>
<p>&nbsp;SQL-based and procedural</p>
</div>
<!-- class="sect4" -->
<div id="WSMQG229" class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref418"></a>
<h5 class="sect4">Default Value:</h5>
<p>&nbsp;The default value is <code dir="ltr">SID_agt_PID.trc</code>.</p>
</div>
<!-- class="sect4" -->
<div id="WSMQG230" class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref419"></a>
<h5 class="sect4">Range of Values:</h5>
<p>&nbsp;None</p>
</div>
<!-- class="sect4" -->
<div id="WSMQG231" class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref420"></a>
<h5 class="sect4">Syntax:</h5>
<p>&nbsp;<code dir="ltr">LOG_DESTINATION =</code> <code dir="ltr"><span class="codeinlineitalic">log_file</span></code></p>
<p class="subhead2"><a id="WSMQG341"></a>Parameter Description</p>
<pre dir="ltr">LOG_DESTINATION = <span class="italic">log_file</span>
</pre>
<p><code dir="ltr">LOG_DESTINATION</code> specifies the file name or directory where the gateway writes logging information.&nbsp;When <code dir="ltr">log_file</code> already exists, logging information is written to the end of file.</p>
<p>If you do not specify <code dir="ltr">LOG_DESTINATION</code>, then the default log file is created each time that the gateway starts up.</p>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="WSMQG232" class="sect2"><a id="sthref421"></a>
<h3 class="sect2">Verifying Gateway <a id="sthref422"></a>Operation</h3>
<p>If your application cannot connect to the gateway, then rerun the application with the gateway trace feature enabled.&nbsp;If no trace information is written to the log file specified by <code dir="ltr">LOG_DESTINATION</code>, or if the log file is not created at all, then verify that:</p>
<ul>
<li>
<p>The Oracle Net configuration for the gateway and the Oracle database is set up properly (refer to <a href="config.htm#i1019812">&#34;Configuring Oracle Net for the Gateway&#34;</a>)</p>
</li>
<li>
<p>A database link exists between the Oracle database and the gateway was created (<a href="config.htm#i1020239">&#34;Administering the Database Links Alias Library&#34;</a>)</p>
</li>
</ul>
<p>If the Oracle Net configuration and database link are set up correctly, then check the operation of the gateway with the <code dir="ltr">test.sql</code> script:</p>
<ol>
<li>
<p>Change directory to the gateway sample directory by entering:</p>
<p>For Microsoft Windows:</p>
<pre dir="ltr">&gt; cd %ORACLE_HOME%\dg4mq\sample
</pre>
<p>For UNIX based systems:</p>
<pre dir="ltr">$ cd $ORACLE_HOME/dg4mq/sample
</pre></li>
<li>
<p>Using an editor, modify the <a id="sthref423"></a><a id="sthref424"></a><code dir="ltr">test.sql</code> script as follows:</p>
<ol>
<li>
<p>Specify the database link name that you created for the gateway.&nbsp;To do this, replace the characters <code dir="ltr">@dg4mq</code> with <code dir="ltr">@</code><code dir="ltr"><span class="codeinlineitalic">dblink</span></code>, where <code dir="ltr"><span class="codeinlineitalic">dblink</span></code> is the name you chose when the database link was created.</p>
</li>
<li>
<p>Replace the characters <code dir="ltr"><span class="codeinlineitalic">YOUR_QUEUE_NAME</span></code> with a valid WebSphere MQ queue name.</p>
</li>
</ol>
</li>
<li>
<p>Using SQL*Plus, connect to your Oracle database as a valid user.</p>
</li>
<li>
<p>Run <code dir="ltr">test.sql</code>, a script that sends and retrieves a message from a WebSphere MQ queue. A successful completion displays the following output:</p>
<pre dir="ltr">SQL&gt; @test.sql
message put on queue = 10203040506070809000
MQPUT: CorrelId length = 24
MQPUT: MsgId length = 24
MQPUT returned with reason code 0
MQGET returned with reason code 0
message read back = 10203040506070809000
</pre>
<p>An unsuccessful test displays the following output:</p>
<pre dir="ltr">SQL&gt; @test.sql
message put on queue = 10203040506070809000
Error: Oracle Database Gateway for WebSphere MQ verification script failed.
ORA-29400: data cartridge error
MQI MQOPEN failed. completion code=2, reason code=2085
</pre></li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4993">
<tr>
<td class="cellalignment5002">
<table class="cellalignment4998">
<tr>
<td class="cellalignment4997"><a href="config.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4997"><a href="ap_pgm8.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2005, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5004">
<table class="cellalignment4996">
<tr>
<td class="cellalignment4997"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4997"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4997"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4997"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4997"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4997"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>