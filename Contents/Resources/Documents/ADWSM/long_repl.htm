<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-1463"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Using%20Replication%20with%20Workspace%20Manager"></a><title>Using Replication with Workspace Manager</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023"/>
<meta name="description" content="Provides usage and reference information about Oracle Workspace Manager, which enables applications to create workspaces and group different versions of table row values in different workspaces."/>
<meta name="dcterms.created" content="2014-06-30T13:47:25Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Workspace Manager Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49170-01"/>
<meta name="dcterms.isVersionOf" content="ADWSM"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2000, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="long_migrate.htm" title="Previous" type="text/html"/>
<link rel="Next" href="long_msg.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49170-01.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">18/21</span> <!-- End Header -->
<div id="ADWSM300" class="appendix"><a id="g635775"></a> <a id="i634199"></a>
<h1 class="appendix"><span class="secnum">C</span> Using <a id="sthref1287"></a>Replication with Workspace Manager</h1>
<p>Workspace Manager supports replication of all workspace-related entities (such as workspaces and savepoints), operations (such as <a href="long_ref.htm#i78729">CreateWorkspace</a> and <a href="long_ref.htm#i89452">MergeWorkspace</a>), and DML and DDL operations on version-enabled tables. To use replication in a Workspace Manager environment, you must understand the major replication concepts and techniques, as documented in <a class="olink REPLN" href="../REPLN/toc.htm"><span class="italic">Oracle Database Advanced Replication</span></a> and <a class="olink REPMA" href="../REPMA/toc.htm"><span class="italic">Oracle Database Advanced Replication Management API Reference</span></a>. However, some special guidelines and procedures apply to replication with Workspace Manager, as described in this appendix.</p>
<p>Workspace Manager supports multimaster replication in an asynchronous mode with certain restrictions. The main restriction imposed on the replication sites is that only the master definition site in the multimaster setup can perform workspace operations and DML and DDL operations on version-enabled tables. All other sites are disallowed from performing any write operations. All read operations, such as <a href="long_ref.htm#i78730">GotoWorkspace</a> or SELECT queries on version-enabled tables, are allowed on all sites in the replication environment.</p>
<p><a id="sthref1288"></a><a id="sthref1289"></a><a id="sthref1290"></a>In a Workspace Manager replication environment, the master definition site is referred to as the <span class="bold">writer site</span>, and all other master sites in the multimaster group are referred to as <span class="bold">nonwriter sites</span>.</p>
<p>To call any of the Workspace Manager replication support subprograms, you must be the replication administrator at all the master sites. You must also be registered as the receiver for all groups at the local master definition site. If the master definition site is changed using the <a href="long_ref.htm#i99822">RelocateWriterSite</a> procedure, you must be registered as the receiver for all groups at the new writer site.</p>
<a id="i634523"></a>
<div id="ADWSM99437" class="sect1">
<h2 class="sect1"><span class="secnum">C.1</span> Setting Up Replication with Workspace Manager</h2>
<p>This section describes the typical steps for setting up a replication environment for a database with workspaces and version-enabled tables.</p>
<ol>
<li>
<p>Set up users and database links for replication, according to the guidelines and procedures in <a class="olink REPLN" href="../REPLN/toc.htm"><span class="italic">Oracle Database Advanced Replication</span></a>.</p>
</li>
<li>
<p>Generate replication support for the Workspace Manager environment by executing the <a href="long_ref.htm#i99479">GenerateReplicationSupport</a> procedure at the site chosen to be the writer site. The following example creates a replication group named <code>OWM-GROUP</code> and designates <code>BACKUP-SITE1.EXAMPLE.COM</code> and <code>BACKUP-SITE2.EXAMPLE.COM</code> as nonwriter sites.</p>
<pre>DBMS_WM.GenerateReplicationSupport(
   mastersites       =&gt;  &#39;BACKUP-SITE1.EXAMPLE.COM, BACKUP-SITE2.EXAMPLE.COM&#39;),
   groupname         =&gt;  &#39;OWM-GROUP&#39;,
   groupdescription  =&gt;  &#39;OWM Replication group for Example Corp.&#39;);
</pre>
<p>If you need to drop replication support for the Workspace Manager environment, execute the <a href="long_ref.htm#i99531">DropReplicationSupport</a> procedure.</p>
<p>For reference and usage information about these procedures, see the sections on the <a href="long_ref.htm#i99479">GenerateReplicationSupport</a> and <a href="long_ref.htm#i99531">DropReplicationSupport</a> procedures in <a href="long_ref.htm#g1035446">Chapter 4</a>.</p>
<p>After replication is set up, the specified group appears as a regular group in the Replication catalog. In addition, for each version-enabled table at the local master definition site, Workspace Manager creates a group with a name in the form WM$<span class="italic">&lt;object-id&gt;</span>, where <span class="italic">&lt;object-id&gt;</span> is the object ID of the table <span class="italic">&lt;table-name&gt;</span>_LT at the local site. The groups that you specify and the groups created by Workspace Manager can be managed using standard the replication API or Oracle Enterprise Manager.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i634687"></a>
<div id="ADWSM99438" class="sect1">
<h2 class="sect1"><span class="secnum">C.2</span> Enabling and Disabling Versioning of Tables with Replication Support</h2>
<p>After Workspace Manager replication support has been set up (as described in <a href="#i634523">Section C.1</a>), you can version-enable a table to be replicated by executing the <a href="long_ref.htm#i80309">EnableVersioning</a> procedure on the writer site, as long as the table is defined in exactly the same way on all the nonwriter sites. For example, to enable versioning on the <code>SCOTT.EMP</code> table on all master sites, execute the following as the replication administrator on the writer site:</p>
<pre>SQL&gt; EXECUTE DBMS_WM.EnableVersioning(&#39;SCOTT.EMP&#39;);
 
</pre>
<p>This example performs the following operations:</p>
<ul>
<li>
<p>Version-enables <code>SCOTT.EMP</code> at the local (writer) site and at all remote (nonwriter) sites.</p>
</li>
<li>
<p>Creates a new master group for this table. The group name is in the format WM$&lt;obj#&gt;, where &lt;obj#&gt; is the Oracle object ID for the table <code>SCOTT.EMP_LT</code>. This is a regular replication group that can be managed through the Oracle Enterprise Manager Replication tool.</p>
</li>
<li>
<p>Starts the master activity for the newly created master group.</p>
</li>
</ul>
<p>To disable versioning on a table in a Workspace Manager replication environment, execute the <a href="long_ref.htm#i78994">DisableVersioning</a> procedure on the writer site. For example, to disable versioning on the <code>SCOTT.EMP</code> table on all master sites, execute the following as the replication administrator on the writer site:</p>
<pre>SQL&gt; EXECUTE DBMS_WM.DisableVersioning(&#39;SCOTT.EMP&#39;);
 
</pre>
<p>This example performs the following operations:</p>
<ul>
<li>
<p>Version-disables <code>SCOTT.EMP</code> at the local (writer) site and at all remote (nonwriter) sites.</p>
</li>
<li>
<p>Drops the master group that was created for this table.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="i634767"></a>
<div id="ADWSM99439" class="sect1">
<h2 class="sect1"><span class="secnum">C.3</span> DDL Operations with Replicated Version-Enabled Tables</h2>
<p>To perform DDL operations on any version-enabled table, you must follow the guidelines in <a href="long_intro.htm#i1009427">Section 1.8</a>. If the version-enabled table is replicated, the following additional guidelines apply:</p>
<ul>
<li>
<p>If a version-enabled table is replicated, <a href="long_ref.htm#i113441">BeginDDL</a>, <a href="long_ref.htm#i98106">CommitDDL</a>, and <a href="long_ref.htm#i98109">RollbackDDL</a> operations on the table can be done only by the replication administrator and only at the writer site.</p>
</li>
<li>
<p>The replication group associated with a version-enabled table must be quiesced before a <a href="long_ref.htm#i98106">CommitDDL</a> operation on the table, and unquiesced after a <a href="long_ref.htm#i98106">CommitDDL</a> operation on the table.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<div id="ADWSM99440" class="sect1"><a id="sthref1291"></a>
<h2 class="sect1"><span class="secnum">C.4</span> Relocating the Writer Site</h2>
<p>The writer site in a Workspace Manager replication environment can be changed after the environment is set up without quiescing the master groups. Relocating the writer site is especially useful when the writer site becomes unavailable and a new writer site needs to be specified.</p>
<p>To relocate the writer site, execute the <a href="long_ref.htm#i99822">RelocateWriterSite</a> procedure. For guidelines and an example, see the reference information about the <a href="long_ref.htm#i99822">RelocateWriterSite</a> procedure in <a href="long_ref.htm#g1035446">Chapter 4</a>.</p>
<p>If the old writer site is not available when you relocate the writer site, you must execute the <a href="long_ref.htm#i99848">SynchronizeSite</a> procedure after the old writer site becomes available. For guidelines and an example, see the reference information about the <a href="long_ref.htm#i99848">SynchronizeSite</a> procedure in <a href="long_ref.htm#g1035446">Chapter 4</a>.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="appendix" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5779">
<tr>
<td class="cellalignment5788">
<table class="cellalignment5784">
<tr>
<td class="cellalignment5783"><a href="long_migrate.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5783"><a href="long_msg.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2000, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5790">
<table class="cellalignment5782">
<tr>
<td class="cellalignment5783"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5783"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5783"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5783"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5783"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5783"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>