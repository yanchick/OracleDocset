<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-1084"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Migrating%20to%20Another%20Workspace%20Manager%20Release"></a><title>Migrating to Another Workspace Manager Release</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023"/>
<meta name="description" content="Provides usage and reference information about Oracle Workspace Manager, which enables applications to create workspaces and group different versions of table row values in different workspaces."/>
<meta name="dcterms.created" content="2014-06-30T13:47:25Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Workspace Manager Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49170-01"/>
<meta name="dcterms.isVersionOf" content="ADWSM"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2000, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="long_inst.htm" title="Previous" type="text/html"/>
<link rel="Next" href="long_repl.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49170-01.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">17/21</span> <!-- End Header -->
<div id="ADWSM200" class="appendix"><a id="g637568"></a> <a id="i633623"></a>
<h1 class="appendix"><span class="secnum">B</span> Migrating <a id="sthref1277"></a><a id="sthref1278"></a><a id="sthref1279"></a>to Another Workspace Manager Release</h1>
<p>This appendix describes how to migrate version-enabled tables from one release of Workspace Manager to another release. You can either upgrade to the current release or downgrade to a previous major release (no earlier than release 9.0.1). For example:</p>
<ul>
<li>
<p>If you have been working with version-enabled tables with a previous Oracle Workspace Manager release (9.0.1.0.0 or higher), you can upgrade to release 11.1 to preserve your existing work and then continue working with release 11.1. (Note that an Oracle Workspace Manager release lower than 11.1 could have been installed on a release 8.1.6.0.0 or higher Oracle database.)</p>
</li>
<li>
<p>If you are using Workspace Manager with Oracle Database 11<span class="italic">g</span> but need to go back to release 10.2 or 10.1, you can downgrade to release 10.2 or 10.1 to preserve your existing work and then continue working with release 10.2 or 10.1.</p>
</li>
</ul>
<p>For an upgrade or downgrade operation, the tables can remain version-enabled. You do not need to disable versioning before performing an upgrade or downgrade.</p>
<a id="i634929"></a>
<div id="ADWSM99434" class="sect1">
<h2 class="sect1"><span class="secnum">B.1</span> Upgrading Workspace Manager</h2>
<p>To upgrade Workspace Manager from an earlier release to the highest current release number for a given major release, ensure that you have the appropriate patch set for the release to which you want to upgrade. You can find the latest patch set on My Oracle Support (formerly called MetaLink). To perform the upgrade, follow these steps.</p>
<ol>
<li>
<p>At a system prompt, change to the installation directory of the release to which you are upgrading. If you are upgrading to the Workspace Manager release that is included in the current Oracle Database 11<span class="italic">g</span> installation, change to <code>$ORACLE_HOME/rdbms/admin</code>.</p>
</li>
<li>
<p>Start SQL*Plus.</p>
</li>
<li>
<p>Connect to the database instance as a user with <code>SYSDBA</code> privileges.</p>
</li>
<li>
<p>Shut down the instance:</p>
<pre>SQL&gt; SHUTDOWN IMMEDIATE
</pre></li>
<li>
<p>Start the instance in RESTRICT mode:</p>
<pre>SQL&gt; STARTUP RESTRICT
</pre></li>
<li>
<p>Determine the current release of the Workspace Manager software by finding the value of <code>OWM_VERSION</code> in the <a href="long_views.htm#i89275">WM_INSTALLATION</a> view:</p>
<pre>SQL&gt; SELECT * FROM wm_installation;
</pre>
<p>If the <code>OWM_VERSION</code> value is <code>NOT_INSTALLED</code>, Workspace Manager is not currently installed.</p>
<p>If the <code>OWM_VERSION</code> value is <code>BETA_RELEASE</code>, the upgrade is not supported. Use <a href="long_ref.htm#i78994">DisableVersioning</a> on all version-enabled tables, uninstall the old release of Workspace Manager using the old uninstall script, and install the new release of the Workspace Manager software.</p>
<p>If the <a href="long_views.htm#i89275">WM_INSTALLATION</a> view does not exist, run the following script to create the view.</p>
<pre>SQL&gt; @owmcmdv.plb
</pre></li>
<li>
<p>Set the system to spool results to a log file for later verification of success. For example:</p>
<pre>SQL&gt; SPOOL catoutowmu.log
</pre></li>
<li>
<p>Run the <code>owmupgrd.plb</code> upgrade script:</p>
<pre>SQL&gt; @owmupgrd.plb
</pre></li>
<li>
<p>Verify whether or not the upgrade was successful:</p>
<pre>SELECT * FROM all_wm_vt_errors;
</pre>
<p>This view should be empty. If it has any rows, the upgrade did not complete successfully. To recover one or more tables that were left in an inconsistent state because of the upgrade failure, use the <a href="long_ref.htm#i100181">RecoverAllMigratingTables</a> or <a href="long_ref.htm#i100181">RecoverAllMigratingTables</a> procedure, both of which are described in <a href="long_ref.htm#g1035446">Chapter 4</a>.</p>
</li>
<li>
<p>Verify the current version of Workspace Manager:</p>
<pre>SELECT * FROM wm_installation;
</pre>
<p>The value of <code>OWM_VERSION</code> is the new version of Workspace Manager.</p>
</li>
<li>
<p>Turn off the spooling of script results to the log file:</p>
<pre>SQL&gt; SPOOL OFF
</pre></li>
<li>
<p>Disable the <code>RESTRICTED SESSION</code> feature for the instance:</p>
<pre>SQL&gt; ALTER SYSTEM DISABLE RESTRICTED SESSION;  
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<div id="ADWSM99435" class="sect1"><a id="sthref1280"></a>
<h2 class="sect1"><span class="secnum">B.2</span> Downgrading to a Previous Release</h2>
<p>Downgrading is <span class="bolditalic">strongly discouraged</span>, except for rare cases where it is necessary. If you downgrade to a previous release, you will not benefit from bug fixes and enhancements that have been made in intervening releases.</p>
<p>To downgrade from the current Workspace Manager release to a previous major release, ensure that you have the appropriate patch set for the release to which you want to downgrade. You can find Workspace Manager patch sets on My Oracle Support (formerly called MetaLink). The following downgrade options are supported:</p>
<ul>
<li>
<p>Downgrading from a release to the base release of the same major version (for example, from Workspace Manager 9.2.0.x to Workspace Manager 9.2.0.1). If you need to downgrade to a release other than the base release, you must downgrade to the base release and then upgrade to the desired release number.</p>
</li>
<li>
<p>Downgrading from any release to the base release of the previous major version (for example, from Workspace Manager 10.1.0 to Workspace Manager 9.2.0.1)</p>
</li>
</ul>
<p>To perform a Workspace Manager downgrade, follow these steps. (The main steps are running the appropriate <code>.sql</code> and <code>.plb</code> files.)</p>
<ol>
<li>
<p>Copy the appropriate <code>.plb</code> file from the patch set for the latest installed Workspace Manager release to the <code>$ORACLE_HOME/rdbms/admin</code> directory for the patch set of the Workspace Manager release to which you want to downgrade.</p>
<p>This file has a name in the form <code>owmd</code><code><span class="codeinlineitalic">nnn</span></code><code>.plb</code>, where <code><span class="codeinlineitalic">nnn</span></code> reflects the number of the latest installed Workspace Manager release. For example, for downgrading from release 9.2.0.5.1, the name of the file is <code>owmd920.plb</code>.</p>
</li>
<li>
<p>Note the location (under where you unzipped the patch set for the latest installed Workspace Manager release) of the appropriate <code>owme</code><code><span class="codeinlineitalic">nnn</span></code><code>.sql</code> file, where <code><span class="codeinlineitalic">nnn</span></code> reflects the number of the latest installed Workspace Manager release. For example, for downgrading from release 9.2.0.5.1, the name of the file is <code>owme920.sql</code>.</p>
</li>
<li>
<p>Start SQL*Plus, and connect as <code>SYS AS SYSDBA</code>. (You can connect as another user, but it must be <code>AS SYSDBA</code>.)</p>
</li>
<li>
<p>Shut down the instance, and restart it in <code>RESTRICT</code> mode:</p>
<pre>SQL&gt; SHUTDOWN IMMEDIATE
SQL&gt; STARTUP RESTRICT
</pre></li>
<li>
<p>Optionally, set the system to spool results to a log file for later verification of success. For example:</p>
<pre>SQL&gt; SPOOL catoutowmd.log
</pre></li>
<li>
<p>Run the <code>.sql</code> file that you noted in step 2. For example:</p>
<pre>SQL&gt; @C:\my_patches\92051_OWM\owme920.sql
</pre></li>
<li>
<p>Run the <code>.plb</code> file that you copied in step 1. For example:</p>
<pre>SQL&gt; @<span class="codeinlineitalic">$ORACLE_HOME</span>\rdbms\admin\owmd920.plb
</pre></li>
<li>
<p>Verify whether or not the downgrade was successful:</p>
<pre>SELECT * FROM wm_downgrade_tables;
</pre>
<p>This table should not exist. If it exists and has any rows, the downgrade did not complete successfully; contact Oracle Support Services.</p>
</li>
<li>
<p>Verify the current version of Workspace Manager:</p>
<pre>SELECT * FROM wm_installation;
</pre>
<p>The value of <code>OWM_VERSION</code> is the new version of Workspace Manager.</p>
</li>
<li>
<p>If you enabled spooling in step 5, turn off the spooling of script results to the log file:</p>
<pre>SQL&gt; SPOOL OFF
</pre></li>
<li>
<p>Disable the <code>RESTRICTED SESSION</code> feature for the instance:</p>
<pre>SQL&gt; ALTER SYSTEM DISABLE RESTRICTED SESSION;  
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i636100"></a>
<div id="ADWSM99436" class="sect1">
<h2 class="sect1"><span class="secnum">B.3</span> <a id="sthref1281"></a><a id="sthref1282"></a><a id="sthref1283"></a>History Management Changes Effective With Release 10.1</h2>
<p>For Oracle Database release 10.1, Workspace Manager implemented history management changes that are especially of interest if you want to perform an upgrade or downgrade operation. Workspace Manager uses the <code>TIMESTAMP WITH TIME ZONE</code> type with history data, whereas before release 10.1 it used the <code>DATE</code> type.</p>
<p>Using a timestamp with a time zone has several benefits:</p>
<ul>
<li>
<p>Finer granularity. Workspace Manager uses a time granularity of microseconds, whereas for the <code>DATE</code> type the granularity is seconds.</p>
</li>
<li>
<p>Correct interpretation of times when information is imported, exported, or replicated across time zones.</p>
</li>
</ul>
<p>The following considerations apply to the history management changes for release 10.1:</p>
<ul>
<li>
<p>The <code>TIMESTAMP WITH TIME ZONE</code> type is used only in Oracle9<span class="italic">i</span> and higher releases. In release 8.1.7, Workspace Manager uses the DATE type for history management.</p>
</li>
<li>
<p>The <a href="long_ref.htm#i90546">GotoDate</a> procedure has a format (with the <code>fmt</code> parameter) that enables you to specify a timestamp or a date, with the same options as for the <code>TO_DATE</code> function, described in <a class="olink SQLRF" href="../SQLRF/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a>. The <code>in_date</code> parameter is of type <code>VARCHAR2</code> to support Workspace Manager on all relevant Oracle releases (because the <code>TIMESTAMP WITH TIME ZONE</code> type is not available on Oracle releases before Oracle9<span class="italic">i</span>).</p>
</li>
<li>
<p>Workspace Manager allows tables with history columns of <code>DATE</code> and <code>TIMESTAMP WITH TIME ZONE</code> types to coexist, so that data exported from release 8.1.7 can be imported into Oracle9<span class="italic">i</span>. Tables that are version-enabled using the release 10.1 or higher will use the <code>TIMESTAMP WITH TIME ZONE</code> type for history management.</p>
</li>
<li>
<p><a id="sthref1284"></a><a id="sthref1285"></a><a id="sthref1286"></a>You can upgrade the history columns of either all version-enabled tables or an individual version-enabled table:</p>
<p><code>WMSYS.OWM_MIG_PKG.UpgradeHistoryColumns</code> with no parameters upgrades the history columns of all version-enabled tables</p>
<p><code>WMSYS.OWM_MIG_PKG.UpgradeHistoryColumns(owner_var VARCHAR2, table_name_var VARCHAR2)</code>upgrades the history column of a specified version-enabled table.</p>
</li>
<li>
<p>Downgrading to an earlier version of Workspace Manager changes the history columns back to the DATE type.</p>
</li>
</ul>
</div>
<!-- class="sect1" --></div>
<!-- class="appendix" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5779">
<tr>
<td class="cellalignment5788">
<table class="cellalignment5784">
<tr>
<td class="cellalignment5783"><a href="long_inst.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5783"><a href="long_repl.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2000, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5790">
<table class="cellalignment5782">
<tr>
<td class="cellalignment5783"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5783"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5783"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5783"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5783"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5783"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>