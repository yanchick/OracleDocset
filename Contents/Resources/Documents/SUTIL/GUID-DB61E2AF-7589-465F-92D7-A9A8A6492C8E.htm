<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-105904"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Unscoped%20REF%20Columns%20That%20Allow%20Primary%20Keys"></a><title>Unscoped REF Columns That Allow Primary Keys</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-10T17:06:49Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Utilities"/>
<meta name="dcterms.identifier" content="E41528-09"/>
<meta name="dcterms.isVersionOf" content="SUTIL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-99A7B7BD-B555-4457-975C-C4E038632B54.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-3637F462-436A-4F6B-B243-03FB3177CA80.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41528-09.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-DB61E2AF-7589-465F-92D7-A9A8A6492C8E"></a> <span id="PAGE" style="display:none;">457/1019</span> <!-- End Header -->
<a id="SUTIL1262"></a>
<h1 id="SUTIL-GUID-DB61E2AF-7589-465F-92D7-A9A8A6492C8E" class="sect1">Unscoped REF Columns That Allow Primary Keys</h1>
<div>
<p>An unscoped <code class="codeph">REF</code> column that allows primary keys can reference both system-generated and primary key <code class="codeph">REF</code>s. The syntax for loading into such a <code class="codeph">REF</code> column is the same as if you were loading into a system-generated OID <code class="codeph">REF</code> column or into a primary-key-based <code class="codeph">REF</code> column. See <a href="GUID-1531532E-0BED-484D-A7C7-B6A3454EF48E.htm#GUID-1531532E-0BED-484D-A7C7-B6A3454EF48E__i1006751">Example 11-13</a> and <a href="GUID-99A7B7BD-B555-4457-975C-C4E038632B54.htm#GUID-99A7B7BD-B555-4457-975C-C4E038632B54__i1006786">Example 11-14</a>.</p>
<p>The following restrictions apply when loading into an unscoped <code class="codeph">REF</code> column that allows primary keys:</p>
<ul style="list-style-type: disc;">
<li>
<p>Only one type of <code class="codeph">REF</code> can be referenced by this column during a single-table load, either system-generated or primary key, but not both. If you try to reference both types, then the data row will be rejected with an error message indicating that the referenced table name is invalid.</p>
</li>
<li>
<p>If you are loading unscoped primary key <code class="codeph">REF</code>s to this column, then only one object table can be referenced during a single-table load. That is, to load unscoped primary key <code class="codeph">REF</code>s, some pointing to object table X and some pointing to object table Y, you would have to do one of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Perform two single-table loads.</p>
</li>
<li>
<p>Perform a single load using multiple <code class="codeph">INTO</code> <code class="codeph">TABLE</code> clauses for which the <code class="codeph">WHEN</code> clause keys off some aspect of the data, such as the object table name for the unscoped primary key <code class="codeph">REF</code>. For example:</p>
<pre dir="ltr">LOAD DATA 
INFILE &#39;data.dat&#39; 

INTO TABLE orders_apk 
APPEND 
when CUST_TBL = &#34;CUSTOMERS_PK&#34; 
fields terminated by &#34;,&#34; 
( 
  order_no   position(1)  char, 
  cust_tbl FILLER     char, 
  cust_no  FILLER     char, 
  cust   REF (cust_tbl, cust_no) NULLIF order_no=&#39;0&#39; 
) 

INTO TABLE orders_apk 
APPEND 
when CUST_TBL = &#34;CUSTOMERS_PK2&#34; 
fields terminated by &#34;,&#34; 
( 
  order_no  position(1)  char, 
  cust_tbl FILLER     char, 
  cust_no  FILLER     char, 
  cust   REF (cust_tbl, cust_no) NULLIF order_no=&#39;0&#39; 
) 
</pre></li>
</ul>
<p>If you do not use either of these methods, then the data row will be rejected with an error message indicating that the referenced table name is invalid.</p>
</li>
<li>
<p>Unscoped primary key <code class="codeph">REF</code>s in collections are not supported by SQL*Loader.</p>
</li>
<li>
<p>If you are loading system-generated <code class="codeph">REF</code>s into this <code class="codeph">REF</code> column, then any limitations described in <span class="q">&#34;<a href="GUID-1531532E-0BED-484D-A7C7-B6A3454EF48E.htm">System-Generated OID REF Columns</a>&#34;</span> also apply here.</p>
</li>
<li>
<p>If you are loading primary key <code class="codeph">REF</code>s into this <code class="codeph">REF</code> column, then any limitations described in <span class="q">&#34;<a href="GUID-99A7B7BD-B555-4457-975C-C4E038632B54.htm">Primary Key REF Columns</a>&#34;</span> also apply here.</p>
<div class="infobox-note" id="GUID-DB61E2AF-7589-465F-92D7-A9A8A6492C8E__GUID-812DC3BE-E73D-468F-A047-6A7CAC5DC4A7">
<p class="notep1">Note:</p>
<p>For an unscoped <code class="codeph">REF</code> column that allows primary keys, SQL*Loader takes the first valid object table parsed (either from the <code class="codeph">REF</code> directive or from the data rows) and uses that object table&#39;s OID type to determine the <code class="codeph">REF</code> type that can be referenced in that single-table load.</p>
</div>
</li>
</ul>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2015">
<tr>
<td class="cellalignment2022">
<table class="cellalignment2020">
<tr>
<td class="cellalignment2019"><a href="GUID-99A7B7BD-B555-4457-975C-C4E038632B54.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2019"><a href="GUID-3637F462-436A-4F6B-B243-03FB3177CA80.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2024">
<table class="cellalignment2018">
<tr>
<td class="cellalignment2019"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2019"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2019"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2019"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2019"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2019"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>