<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-105453"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Showing%20Only%20Committed%20Transactions"></a><title>Showing Only Committed Transactions</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-10T17:06:49Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Utilities"/>
<meta name="dcterms.identifier" content="E41528-09"/>
<meta name="dcterms.isVersionOf" content="SUTIL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-5C07C445-8977-4A16-9641-C204C603CD03.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-FAA95EFA-4AC0-4F5B-BE30-D79A9AC4C6B9.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41528-09.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-6A2398F7-D484-495A-8AD2-0A6B34C03536"></a> <span id="PAGE" style="display:none;">761/1019</span> <!-- End Header -->
<a id="SUTIL1574"></a>
<h1 id="SUTIL-GUID-6A2398F7-D484-495A-8AD2-0A6B34C03536" class="sect1">Showing Only Committed Transactions</h1>
<div>
<p>When you use the <code class="codeph">COMMITTED_DATA_ONLY</code> option to <a id="d154125e33" class="indexterm-anchor"></a><code class="codeph">DBMS_LOGMNR.START_LOGMNR</code>, only rows belonging to committed transactions are shown in the <a id="d154125e40" class="indexterm-anchor"></a><code class="codeph">V$LOGMNR_CONTENTS</code> view. This enables you to filter out rolled back transactions, transactions that are in progress, and internal operations.</p>
<p>To enable this option, specify it when you start LogMiner, as follows:</p>
<pre dir="ltr">EXECUTE DBMS_LOGMNR.START_LOGMNR(OPTIONS =&gt; -
  DBMS_LOGMNR.COMMITTED_DATA_ONLY);
</pre>
<p>When you specify the <code class="codeph">COMMITTED_DATA_ONLY</code> option, LogMiner groups together all DML operations that belong to the same transaction. Transactions are returned in the order in which they were committed.</p>
<div class="infobox-note" id="GUID-6A2398F7-D484-495A-8AD2-0A6B34C03536__GUID-CE11261A-B2D4-4D23-8B7D-798BFFEBF9DE">
<p class="notep1">Note:</p>
<p>If the <code class="codeph">COMMITTED_DATA_ONLY</code> option is specified and you issue a query, then LogMiner stages all redo records within a single transaction in memory until LogMiner finds the commit record for that transaction. Therefore, it is possible to exhaust memory, in which case an &#34;Out of Memory&#34; error will be returned. If this occurs, then you must restart LogMiner without the <code class="codeph">COMMITTED_DATA_ONLY</code> option specified and reissue the query.</p>
</div>
<p>The default is for LogMiner to show rows corresponding to all transactions and to return them in the order in which they are encountered in the redo log files.</p>
<p>For example, suppose you start LogMiner without specifying the <code class="codeph">COMMITTED_DATA_ONLY</code> option and you execute the following query:</p>
<pre dir="ltr">SELECT (XIDUSN || &#39;.&#39; || XIDSLT || &#39;.&#39; || XIDSQN) AS XID, 
   USERNAME, SQL_REDO FROM V$LOGMNR_CONTENTS WHERE USERNAME != &#39;SYS&#39; 
   AND SEG_OWNER IS NULL OR SEG_OWNER NOT IN (&#39;SYS&#39;, &#39;SYSTEM&#39;);
</pre>
<p>The output is as follows. Both committed and uncommitted transactions are returned and rows from different transactions are interwoven.</p>
<pre dir="ltr">XID         USERNAME  SQL_REDO

1.15.3045   RON       set transaction read write;
1.15.3045   RON       insert into &#34;HR&#34;.&#34;JOBS&#34;(&#34;JOB_ID&#34;,&#34;JOB_TITLE&#34;,
                      &#34;MIN_SALARY&#34;,&#34;MAX_SALARY&#34;) values (&#39;9782&#39;,
                      &#39;HR_ENTRY&#39;,NULL,NULL);
1.18.3046   JANE      set transaction read write;
1.18.3046   JANE      insert into &#34;OE&#34;.&#34;CUSTOMERS&#34;(&#34;CUSTOMER_ID&#34;,
                      &#34;CUST_FIRST_NAME&#34;,&#34;CUST_LAST_NAME&#34;,
                      &#34;CUST_ADDRESS&#34;,&#34;PHONE_NUMBERS&#34;,&#34;NLS_LANGUAGE&#34;,
                      &#34;NLS_TERRITORY&#34;,&#34;CREDIT_LIMIT&#34;,&#34;CUST_EMAIL&#34;,
                      &#34;ACCOUNT_MGR_ID&#34;) values (&#39;9839&#39;,&#39;Edgar&#39;,
                      &#39;Cummings&#39;,NULL,NULL,NULL,NULL,
                       NULL,NULL,NULL);
1.9.3041    RAJIV      set transaction read write;
1.9.3041    RAJIV      insert into &#34;OE&#34;.&#34;CUSTOMERS&#34;(&#34;CUSTOMER_ID&#34;,
                       &#34;CUST_FIRST_NAME&#34;,&#34;CUST_LAST_NAME&#34;,&#34;CUST_ADDRESS&#34;,
                       &#34;PHONE_NUMBERS&#34;,&#34;NLS_LANGUAGE&#34;,&#34;NLS_TERRITORY&#34;,
                       &#34;CREDIT_LIMIT&#34;,&#34;CUST_EMAIL&#34;,&#34;ACCOUNT_MGR_ID&#34;) 
                       values (&#39;9499&#39;,&#39;Rodney&#39;,&#39;Emerson&#39;,NULL,NULL,NULL,NULL,
                       NULL,NULL,NULL);
1.15.3045    RON       commit;
1.8.3054     RON       set transaction read write;
1.8.3054     RON       insert into &#34;HR&#34;.&#34;JOBS&#34;(&#34;JOB_ID&#34;,&#34;JOB_TITLE&#34;,
                       &#34;MIN_SALARY&#34;,&#34;MAX_SALARY&#34;) values (&#39;9566&#39;,
                       &#39;FI_ENTRY&#39;,NULL,NULL);
1.18.3046    JANE      commit;
1.11.3047    JANE      set transaction read write;
1.11.3047    JANE      insert into &#34;OE&#34;.&#34;CUSTOMERS&#34;(&#34;CUSTOMER_ID&#34;,
                       &#34;CUST_FIRST_NAME&#34;,&#34;CUST_LAST_NAME&#34;,
                       &#34;CUST_ADDRESS&#34;,&#34;PHONE_NUMBERS&#34;,&#34;NLS_LANGUAGE&#34;,
                       &#34;NLS_TERRITORY&#34;,&#34;CREDIT_LIMIT&#34;,&#34;CUST_EMAIL&#34;,
                       &#34;ACCOUNT_MGR_ID&#34;) values (&#39;8933&#39;,&#39;Ronald&#39;,
                       &#39;Frost&#39;,NULL,NULL,NULL,NULL,NULL,NULL,NULL);
1.11.3047    JANE      commit;
1.8.3054     RON       commit;
</pre>
<p>Now suppose you start LogMiner, but this time you specify the <code class="codeph">COMMITTED_DATA_ONLY</code> option. If you execute the previous query again, then the output is as follows:</p>
<pre dir="ltr">1.15.3045   RON       set transaction read write;
1.15.3045   RON       insert into &#34;HR&#34;.&#34;JOBS&#34;(&#34;JOB_ID&#34;,&#34;JOB_TITLE&#34;,
                      &#34;MIN_SALARY&#34;,&#34;MAX_SALARY&#34;) values (&#39;9782&#39;,
                      &#39;HR_ENTRY&#39;,NULL,NULL);
1.15.3045    RON       commit;
1.18.3046   JANE      set transaction read write;
1.18.3046   JANE      insert into &#34;OE&#34;.&#34;CUSTOMERS&#34;(&#34;CUSTOMER_ID&#34;,
                      &#34;CUST_FIRST_NAME&#34;,&#34;CUST_LAST_NAME&#34;,
                      &#34;CUST_ADDRESS&#34;,&#34;PHONE_NUMBERS&#34;,&#34;NLS_LANGUAGE&#34;,
                      &#34;NLS_TERRITORY&#34;,&#34;CREDIT_LIMIT&#34;,&#34;CUST_EMAIL&#34;,
                      &#34;ACCOUNT_MGR_ID&#34;) values (&#39;9839&#39;,&#39;Edgar&#39;,
                      &#39;Cummings&#39;,NULL,NULL,NULL,NULL,
                       NULL,NULL,NULL);
1.18.3046    JANE      commit;
1.11.3047    JANE      set transaction read write;
1.11.3047    JANE      insert into &#34;OE&#34;.&#34;CUSTOMERS&#34;(&#34;CUSTOMER_ID&#34;,
                       &#34;CUST_FIRST_NAME&#34;,&#34;CUST_LAST_NAME&#34;,
                       &#34;CUST_ADDRESS&#34;,&#34;PHONE_NUMBERS&#34;,&#34;NLS_LANGUAGE&#34;,
                       &#34;NLS_TERRITORY&#34;,&#34;CREDIT_LIMIT&#34;,&#34;CUST_EMAIL&#34;,
                       &#34;ACCOUNT_MGR_ID&#34;) values (&#39;8933&#39;,&#39;Ronald&#39;,
                       &#39;Frost&#39;,NULL,NULL,NULL,NULL,NULL,NULL,NULL);
1.11.3047    JANE      commit;
1.8.3054     RON       set transaction read write;
1.8.3054     RON       insert into &#34;HR&#34;.&#34;JOBS&#34;(&#34;JOB_ID&#34;,&#34;JOB_TITLE&#34;,
                       &#34;MIN_SALARY&#34;,&#34;MAX_SALARY&#34;) values (&#39;9566&#39;,
                       &#39;FI_ENTRY&#39;,NULL,NULL);
1.8.3054     RON       commit;
</pre>
<p>Because the <code class="codeph">COMMIT</code> statement for the 1.15.3045 transaction was issued before the <code class="codeph">COMMIT</code> statement for the 1.18.3046 transaction, the entire 1.15.3045 transaction is returned first. This is true even though the 1.18.3046 transaction started before the 1.15.3045 transaction. None of the 1.9.3041 transaction is returned because a <code class="codeph">COMMIT</code> statement was never issued for it.</p>
<div class="infoboxnotealso" id="GUID-6A2398F7-D484-495A-8AD2-0A6B34C03536__GUID-4B3D4439-E8C6-4D0E-8BED-311A4CAC7272">
<p class="notep1">See Also:</p>
<p>See <span class="q">&#34;<a href="GUID-40619B3B-8BDF-4D90-B924-5A0F8A631F98.htm">Examples Using LogMiner</a>&#34;</span> for a complete example that uses the <code class="codeph">COMMITTED_DATA_ONLY</code> option</p>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2015">
<tr>
<td class="cellalignment2022">
<table class="cellalignment2020">
<tr>
<td class="cellalignment2019"><a href="GUID-5C07C445-8977-4A16-9641-C204C603CD03.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2019"><a href="GUID-FAA95EFA-4AC0-4F5B-BE30-D79A9AC4C6B9.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2024">
<table class="cellalignment2018">
<tr>
<td class="cellalignment2019"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2019"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2019"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2019"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2019"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2019"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>