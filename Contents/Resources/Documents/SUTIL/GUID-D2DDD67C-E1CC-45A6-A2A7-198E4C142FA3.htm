<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-105870"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Database-Level%20Supplemental%20Logging"></a><title>Database-Level Supplemental Logging</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-10T17:06:49Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Utilities"/>
<meta name="dcterms.identifier" content="E41528-09"/>
<meta name="dcterms.isVersionOf" content="SUTIL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-D857AF96-AC24-4CA1-B620-8EA3DF30D72E.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-64EB9DC1-CC04-40E4-B5ED-4568D4D7C473.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41528-09.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-D2DDD67C-E1CC-45A6-A2A7-198E4C142FA3"></a> <span id="PAGE" style="display:none;">770/1019</span> <!-- End Header -->
<a id="SUTIL1583"></a>
<h1 id="SUTIL-GUID-D2DDD67C-E1CC-45A6-A2A7-198E4C142FA3" class="sect1">Database-Level Supplemental Logging</h1>
<div>
<p><a id="d155235e29" class="indexterm-anchor"></a>There are two types of database-level supplemental logging: minimal supplemental logging and identification key logging, as described in the following sections. Minimal supplemental logging does not impose significant overhead on the database generating the redo log files. However, enabling database-wide identification key logging can impose overhead on the database generating the redo log files. Oracle recommends that you at least enable minimal supplemental logging for LogMiner.</p>
</div>
<a id="SUTIL1584"></a>
<div class="props_rev_3"><a id="GUID-82A335B2-9F8F-4A95-A314-2EECDB0B3D2D"></a>
<h2 id="SUTIL-GUID-82A335B2-9F8F-4A95-A314-2EECDB0B3D2D" class="sect2">Minimal Supplemental Logging</h2>
<div>
<p><a id="d155235e67" class="indexterm-anchor"></a>Minimal supplemental logging logs the minimal amount of information needed for LogMiner to identify, group, and merge the redo operations associated with DML changes. It ensures that LogMiner (and any product building on LogMiner technology) has sufficient information to support chained rows and various storage arrangements, such as cluster tables and index-organized tables. To enable minimal supplemental logging, execute the following SQL statement:</p>
<pre dir="ltr">ALTER DATABASE ADD SUPPLEMENTAL LOG DATA;
</pre></div>
</div>
<a id="SUTIL1585"></a>
<div class="props_rev_3"><a id="GUID-E3E015C4-B0EB-4072-92A6-FD3079C68242"></a>
<h2 id="SUTIL-GUID-E3E015C4-B0EB-4072-92A6-FD3079C68242" class="sect2">Database-Level Identification Key Logging</h2>
<div>
<p><a id="d155235e107" class="indexterm-anchor"></a><a id="d155235e113" class="indexterm-anchor"></a>Identification key logging is necessary when redo log files will not be mined at the source database instance, for example, when the redo log files will be mined at a logical standby database.</p>
<p>Using database identification key logging, you can enable database-wide before-image logging for all updates by specifying one or more of the following options to the SQL <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> statement:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">ALL</code> system-generated unconditional supplemental log group</p>
<p>This option specifies that when a row is updated, all columns of that row (except for LOBs, <code class="codeph">LONGS</code>, and <code class="codeph">ADT</code>s) are placed in the redo log file.</p>
<p>To enable all column logging at the database level, execute the following statement:</p>
<pre dir="ltr">SQL&gt; ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;
</pre></li>
<li>
<p><code class="codeph">PRIMARY KEY</code> system-generated unconditional supplemental log group</p>
<p>This option causes the database to place all columns of a row&#39;s primary key in the redo log file whenever a row containing a primary key is updated (even if no value in the primary key has changed).</p>
<p>If a table does not have a primary key, but has one or more non-null unique index key constraints or index keys, then one of the unique index keys is chosen for logging as a means of uniquely identifying the row being updated.</p>
<p>If the table has neither a primary key nor a non-null unique index key, then all columns except <code class="codeph">LONG</code> and LOB are supplementally logged; this is equivalent to specifying <code class="codeph">ALL</code> supplemental logging for that row. Therefore, Oracle recommends that when you use database-level primary key supplemental logging, all or most tables be defined to have primary or unique index keys.</p>
<p>To enable primary key logging at the database level, execute the following statement:</p>
<pre dir="ltr">SQL&gt; ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (PRIMARY KEY) COLUMNS;
</pre></li>
<li>
<p>UNIQUE system-generated conditional supplemental log group</p>
<p>This option causes the database to place all columns of a row&#39;s composite unique key or bitmap index in the redo log file if any column belonging to the composite unique key or bitmap index is modified. The unique key can be due to either a unique constraint or a unique index.</p>
<p>To enable unique index key and bitmap index logging at the database level, execute the following statement:</p>
<pre dir="ltr">SQL&gt; ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (UNIQUE) COLUMNS;
</pre></li>
<li>
<p><code class="codeph">FOREIGN KEY</code> system-generated conditional supplemental log group</p>
<p>This option causes the database to place all columns of a row&#39;s foreign key in the redo log file if any column belonging to the foreign key is modified.</p>
<p>To enable foreign key logging at the database level, execute the following SQL statement:</p>
<pre dir="ltr">ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (FOREIGN KEY) COLUMNS;
</pre>
<div class="infobox-note" id="GUID-E3E015C4-B0EB-4072-92A6-FD3079C68242__GUID-BEA69A5E-779D-4BDE-8B3C-9F4D3995765D">
<p class="notep1">Note:</p>
<p>Regardless of whether identification key logging is enabled, the SQL statements returned by LogMiner always contain the <code class="codeph">ROWID</code> clause. You can filter out the <code class="codeph">ROWID</code> clause by using the <code class="codeph">NO_ROWID_IN_STMT</code> option to the <code class="codeph">DBMS_LOGMNR.START_LOGMNR</code> procedure call. See <span class="q">&#34;<a href="GUID-C2B8C741-9544-4A46-818E-16B233570599.htm">Formatting Reconstructed SQL Statements for Re-execution</a>&#34;</span> for details.</p>
</div>
</li>
</ul>
<p>Keep the following in mind when you use identification key logging:</p>
<ul style="list-style-type: disc;">
<li>
<p>If the database is open when you enable identification key logging, then all DML cursors in the cursor cache are invalidated. This can affect performance until the cursor cache is repopulated.</p>
</li>
<li>
<p>When you enable identification key logging at the database level, minimal supplemental logging is enabled implicitly.</p>
</li>
<li>
<p>Supplemental logging statements are cumulative. If you issue the following SQL statements, then both primary key and unique key supplemental logging is enabled:</p>
<pre dir="ltr">ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (PRIMARY KEY) COLUMNS;
ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (UNIQUE) COLUMNS;
</pre></li>
</ul>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2015">
<tr>
<td class="cellalignment2022">
<table class="cellalignment2020">
<tr>
<td class="cellalignment2019"><a href="GUID-D857AF96-AC24-4CA1-B620-8EA3DF30D72E.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2019"><a href="GUID-64EB9DC1-CC04-40E4-B5ED-4568D4D7C473.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2024">
<table class="cellalignment2018">
<tr>
<td class="cellalignment2019"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2019"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2019"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2019"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2019"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2019"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>