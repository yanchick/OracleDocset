<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-105063"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Querying%20V%24LOGMNR_CONTENTS%20for%20Redo%20Data%20of%20Interest"></a><title>Querying V$LOGMNR_CONTENTS for Redo Data of Interest</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-10T17:06:49Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Utilities"/>
<meta name="dcterms.identifier" content="E41528-09"/>
<meta name="dcterms.isVersionOf" content="SUTIL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-A5A1E94C-45AA-4B6A-B7B3-E1AD2F8675B5.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-CD389496-1D82-4E39-881F-C0C18355C573.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41528-09.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-0522DC84-11A9-44FE-A4AB-DE5D1EA4605E"></a> <span id="PAGE" style="display:none;">754/1019</span> <!-- End Header -->
<a id="SUTIL3615"></a><a id="SUTIL1565"></a>
<h1 id="SUTIL-GUID-0522DC84-11A9-44FE-A4AB-DE5D1EA4605E" class="sect1">Querying V$LOGMNR_CONTENTS for Redo Data of Interest</h1>
<div>
<p>You access the <a id="d152791e31" class="indexterm-anchor"></a>redo data of interest by querying the <a id="d152791e36" class="indexterm-anchor"></a><code class="codeph">V$LOGMNR_CONTENTS</code> view. (Note that you must have either the <code class="codeph">SYSDBA</code> or <code class="codeph">LOGMINING</code> privilege to query <code class="codeph">V$LOGMNR_CONTENTS</code>.) This view provides historical information about changes made to the database, including (but not limited to) the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>The type of change made to the database: <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, or <code class="codeph">DDL</code> (<code class="codeph">OPERATION</code> column).</p>
</li>
<li>
<p>The SCN at which a change was made (<code class="codeph">SCN</code> column).</p>
</li>
<li>
<p>The SCN at which a change was committed (<code class="codeph">COMMIT_SCN</code> column).</p>
</li>
<li>
<p>The transaction to which a change belongs (<code class="codeph">XIDUSN</code>, <code class="codeph">XIDSLT</code>, and <code class="codeph">XIDSQN</code> columns).</p>
</li>
<li>
<p>The table and schema name of the modified object (<code class="codeph">SEG_NAME</code> and <code class="codeph">SEG_OWNER</code> columns).</p>
</li>
<li>
<p>The name of the user who issued the DDL or DML statement to make the change (<code class="codeph">USERNAME</code> column).</p>
</li>
<li>
<p>If the change was due to a SQL DML statement, the reconstructed SQL statements showing SQL DML that is equivalent (but not necessarily identical) to the SQL DML used to generate the redo records (<code class="codeph">SQL_REDO</code> column).</p>
</li>
<li>
<p>If a password is part of the statement in a <code class="codeph">SQL_REDO</code> column, then the password is encrypted. <code class="codeph">SQL_REDO</code> column values that correspond to DDL statements are always identical to the SQL DDL used to generate the redo records.</p>
</li>
<li>
<p>If the change was due to a SQL DML change, the reconstructed SQL statements showing the SQL DML statements needed to undo the change (<code class="codeph">SQL_UNDO</code> column).</p>
<p><code class="codeph">SQL_UNDO</code> columns that correspond to DDL statements are always <code class="codeph">NULL</code>. The <code class="codeph">SQL_UNDO</code> column may be <code class="codeph">NULL</code> also for some data types and for rolled back operations.</p>
</li>
</ul>
<div class="infobox-note" id="GUID-0522DC84-11A9-44FE-A4AB-DE5D1EA4605E__GUID-FB11EDFA-910A-47A7-BA8F-89B80E2CFB73">
<p class="notep1">Note:</p>
<p>LogMiner supports<a id="d152791e147" class="indexterm-anchor"></a> <a id="d152791e152" class="indexterm-anchor"></a>Transparent Data Encryption (TDE) in that <code class="codeph">V$LOGMNR_CONTENTS</code> shows DML operations performed on tables with encrypted columns (including the encrypted columns being updated), provided the LogMiner data dictionary contains the metadata for the object in question and provided the appropriate master key is in the Oracle wallet. The wallet must be open or <code class="codeph">V$LOGMNR_CONTENTS</code> cannot interpret the associated redo records. TDE support is not available if the database is not open (either read-only or read-write). See <a class="olink ASOAG600" target="_blank" href="../ASOAG/asopart1.htm#ASOAG600"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information about TDE.</p>
</div>
<div class="section">
<p class="subhead1">Example of Querying V$LOGMNR_CONTENTS</p>
</div>
<!-- class="section" -->
<div class="section">
<p>Suppose you wanted to find out about any delete operations that a user named Ron had performed on the <code class="codeph">oe.orders</code> table. You could issue a SQL query similar to the following:</p>
<pre dir="ltr">SELECT OPERATION, SQL_REDO, SQL_UNDO
   FROM V$LOGMNR_CONTENTS
   WHERE SEG_OWNER = &#39;OE&#39; AND SEG_NAME = &#39;ORDERS&#39; AND
   OPERATION = &#39;DELETE&#39; AND USERNAME = &#39;RON&#39;;
</pre>
<p>The following output would be produced. The formatting may be different on your display than that shown here.</p>
<pre dir="ltr">OPERATION   SQL_REDO                        SQL_UNDO

DELETE      delete from &#34;OE&#34;.&#34;ORDERS&#34;       insert into &#34;OE&#34;.&#34;ORDERS&#34;        
            where &#34;ORDER_ID&#34; = &#39;2413&#39;       (&#34;ORDER_ID&#34;,&#34;ORDER_MODE&#34;,
            and &#34;ORDER_MODE&#34; = &#39;direct&#39;      &#34;CUSTOMER_ID&#34;,&#34;ORDER_STATUS&#34;,
            and &#34;CUSTOMER_ID&#34; = &#39;101&#39;        &#34;ORDER_TOTAL&#34;,&#34;SALES_REP_ID&#34;,
            and &#34;ORDER_STATUS&#34; = &#39;5&#39;         &#34;PROMOTION_ID&#34;)
            and &#34;ORDER_TOTAL&#34; = &#39;48552&#39;      values (&#39;2413&#39;,&#39;direct&#39;,&#39;101&#39;,
            and &#34;SALES_REP_ID&#34; = &#39;161&#39;       &#39;5&#39;,&#39;48552&#39;,&#39;161&#39;,NULL);     
            and &#34;PROMOTION_ID&#34; IS NULL  
            and ROWID = &#39;AAAHTCAABAAAZAPAAN&#39;;

DELETE      delete from &#34;OE&#34;.&#34;ORDERS&#34;        insert into &#34;OE&#34;.&#34;ORDERS&#34;
            where &#34;ORDER_ID&#34; = &#39;2430&#39;        (&#34;ORDER_ID&#34;,&#34;ORDER_MODE&#34;,
            and &#34;ORDER_MODE&#34; = &#39;direct&#39;       &#34;CUSTOMER_ID&#34;,&#34;ORDER_STATUS&#34;,
            and &#34;CUSTOMER_ID&#34; = &#39;101&#39;         &#34;ORDER_TOTAL&#34;,&#34;SALES_REP_ID&#34;,
            and &#34;ORDER_STATUS&#34; = &#39;8&#39;          &#34;PROMOTION_ID&#34;)
            and &#34;ORDER_TOTAL&#34; = &#39;29669.9&#39;     values(&#39;2430&#39;,&#39;direct&#39;,&#39;101&#39;,
            and &#34;SALES_REP_ID&#34; = &#39;159&#39;        &#39;8&#39;,&#39;29669.9&#39;,&#39;159&#39;,NULL);
            and &#34;PROMOTION_ID&#34; IS NULL 
            and ROWID = &#39;AAAHTCAABAAAZAPAAe&#39;;
</pre>
<p>This output shows that user Ron deleted two rows from the <code class="codeph">oe.orders</code> table. The reconstructed SQL statements are equivalent, but not necessarily identical, to the actual statement that Ron issued. The reason for this is that the original <code class="codeph">WHERE</code> clause is not logged in the redo log files, so LogMiner can only show deleted (or updated or inserted) rows individually.</p>
<p>Therefore, even though a single <code class="codeph">DELETE</code> statement may have been responsible for the deletion of both rows, the output in <code class="codeph">V$LOGMNR_CONTENTS</code> does not reflect that. Thus, the actual <code class="codeph">DELETE</code> statement may have been <code class="codeph">DELETE FROM OE.ORDERS WHERE CUSTOMER_ID =&#39;101</code>&#39; or it might have been <code class="codeph">DELETE FROM OE.ORDERS WHERE PROMOTION_ID = NULL.</code></p>
</div>
<!-- class="section" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2015">
<tr>
<td class="cellalignment2022">
<table class="cellalignment2020">
<tr>
<td class="cellalignment2019"><a href="GUID-A5A1E94C-45AA-4B6A-B7B3-E1AD2F8675B5.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2019"><a href="GUID-CD389496-1D82-4E39-881F-C0C18355C573.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2024">
<table class="cellalignment2018">
<tr>
<td class="cellalignment2019"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2019"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2019"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2019"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2019"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2019"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>