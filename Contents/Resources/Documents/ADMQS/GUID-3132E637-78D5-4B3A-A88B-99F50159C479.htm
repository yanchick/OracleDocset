<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-409"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Performing%20a%20Flashback%20Table%20Operation"></a><title>Performing a Flashback Table Operation</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-01-17T07:25:11Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database 2 Day DBA"/>
<meta name="dcterms.identifier" content="E51671-10"/>
<meta name="dcterms.isVersionOf" content="ADMQS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2004, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-64C48A91-42DF-4E07-834A-987802E1130D.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-5A842A1B-4A32-46D1-9269-3F51244BBEB9.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E51671-10.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-3132E637-78D5-4B3A-A88B-99F50159C479"></a> <span id="PAGE" style="display:none;">275/340</span> <!-- End Header -->
<a id="ADMQS12237"></a><a id="ADMQS09432"></a>
<h1 id="ADMQS-GUID-3132E637-78D5-4B3A-A88B-99F50159C479" class="sect1"><span class="enumeration_section">9.8.1.2</span> Performing a Flashback Table Operation</h1>
<div>
<div class="section">
<p><a id="d48802e23" class="indexterm-anchor"></a>In this example, you rewind the <code>hr.employees</code> table and its dependent tables to a previous point in time.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">To perform the Flashback Table operation:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Connect Oracle Recovery Manager (RMAN) to the target database as described in <span class="q">&#34;<a href="GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903.htm">Connecting to the Target Database Using RMAN</a>.&#34;</span></span></li>
<li class="stepexpand"><span>Determine whether the table that you intend to flash back has dependencies on other tables.</span>
<div>
<p>Use the following SQL query to determine the dependencies for the <code>hr.employees</code>:</p>
<pre dir="ltr">SELECT other.owner, other.table_name 
    FROM sys.all_constraints this, sys.all_constraints other
    WHERE this.owner = &#39;HR&#39;
      AND this.table_name = &#39;EMPLOYEES&#39;
      AND this.r_owner = other.owner
      AND this.r_constraint_name = other.constraint_name
      AND this.constraint_type=&#39;R&#39;;

OWNER                          TABLE_NAME
------------------------------ ------------------------------
HR                             EMPLOYEES
HR                             JOBS
HR                             DEPARTMENTS
</pre></div>
</li>
<li class="stepexpand"><span>Ensure that row movement is enabled for the table that you want to flash back and its dependent tables.</span>
<div>
<p>In this example, row movement must be enabled for the tables <code>hr.employees</code>, <code>hr.jobs</code>, and <code>hr.departments</code> using the steps described in <span class="q">&#34;<a href="GUID-64C48A91-42DF-4E07-834A-987802E1130D.htm#GUID-64C48A91-42DF-4E07-834A-987802E1130D">Enabling Row Movement on a Table</a>.&#34;</span></p>
</div>
</li>
<li class="stepexpand"><span>Identify the time, SCN, or restore point to which you want to return the table.</span>
<div>
<p>In this example, we assume that the rows were accidentally inserted 5 minutes ago. Therefore, you must rollback to a timestamp that is 5 minutes before the current time.</p>
<div class="infobox-note" id="GUID-3132E637-78D5-4B3A-A88B-99F50159C479__GUID-39FE8A50-36DF-47F8-846E-0C356D5B0BF0">
<p class="notep1">Note:</p>
<p>If you do not know the time at which the unwanted changes occurred, you can use the Oracle Flashback Version Query to review all recent changes to the target table. Use of this feature is beyond the scope of this documentation.</p>
</div>
</div>
</li>
<li class="stepexpand"><span>Verify that enough undo data exists to rewind the table to the specified target.</span>
<div>
<p>Use the following query to determine how long undo data is being retained:</p>
<pre dir="ltr">SELECT NAME, VALUE/60 MINUTES_RETAINED 
    FROM V$PARAMETER
    WHERE NAME = &#39;undo_retention&#39;;

NAME             MINUTES_RETAINED
---------------  ----------------
undo_retention               15
</pre></div>
</li>
<li class="stepexpand"><span>Use the <code>FLASHBACK TABLE</code> statement to perform a flashback operation for the required tables.</span>
<div>
<p>The following SQL statements return the tables <code>hr.employees</code>, <code>hr.jobs</code>, and <code>hr.departments</code> to the specified time:</p>
<pre dir="ltr">FLASHBACK TABLE hr.employees TO TIMESTAMP TO_TIMESTAMP(&#39;2012-03-27 09:30:00&#39;, &#39;YYYY-MM-DD HH:MI:SS&#39;);

FLASHBACK TABLE hr.jobs TO TIMESTAMP TO_TIMESTAMP(&#39;2012-03-27 09:30:00&#39;, &#39;YYYY-MM-DD HH:MI:SS&#39;);

FLASHBACK TABLE hr.departments TO TIMESTAMP TO_TIMESTAMP(&#39;2012-03-27 09:30:00&#39;, &#39;YYYY-MM-DD HH:MI:SS&#39;);
</pre></div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-3132E637-78D5-4B3A-A88B-99F50159C479__GUID-848A203C-265E-4D82-8C63-DC928FF63B00">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="GUID-18074BFE-AC22-4169-B321-774F1D1D5325.htm">Rewinding a Table Using Oracle Flashback Table</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="GUID-E04D3223-BEB0-4212-97E1-BA2A236C3523.htm">Performing Oracle Advised Recovery</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4647">
<tr>
<td class="cellalignment4654">
<table class="cellalignment4652">
<tr>
<td class="cellalignment4651"><a href="GUID-64C48A91-42DF-4E07-834A-987802E1130D.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4651"><a href="GUID-5A842A1B-4A32-46D1-9269-3F51244BBEB9.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2004, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4656">
<table class="cellalignment4650">
<tr>
<td class="cellalignment4651"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4651"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4651"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4651"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4651"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4651"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>