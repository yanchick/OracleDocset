<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-643"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Enabling%20Automatic%20Memory%20Management"></a><title>Enabling Automatic Memory Management</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-01-17T07:25:11Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database 2 Day DBA"/>
<meta name="dcterms.identifier" content="E51671-10"/>
<meta name="dcterms.isVersionOf" content="ADMQS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2004, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-2D1989A3-0922-48D6-8B97-3721141CC3BA.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-6ADFFF05-1FFC-42CB-91FD-679A7B767C0D.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E51671-10.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-E6784230-0A0C-443D-8537-36FFA08A7E75"></a> <span id="PAGE" style="display:none;">96/340</span> <!-- End Header -->
<a id="ADMQS12155"></a><a id="ADMQS12039"></a>
<h1 id="ADMQS-GUID-E6784230-0A0C-443D-8537-36FFA08A7E75" class="sect1"><span class="enumeration_section">5.4.2</span> Enabling Automatic Memory Management</h1>
<div>
<div class="section">
<p><a id="d18834e23" class="indexterm-anchor"></a><a id="d18834e27" class="indexterm-anchor"></a>If you did not enable automatic memory management when you installed and configured your database, then Oracle recommends that you do so after installation, unless you are an experienced DBA with specific reasons to manually tune memory sizes. With automatic memory management, the Oracle instance dynamically tunes all memory components to optimize performance as the workload changes.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">To enable automatic memory management:</p>
</div>
<!-- class="section" -->
<div class="section">
<ol>
<li>
<p>Start SQL*Plus and connect to the database as <code>SYSDBA</code>.</p>
</li>
<li id="GUID-E6784230-0A0C-443D-8537-36FFA08A7E75__CACDDFGE">
<p>Calculate the minimum value for <code>MEMORY_TARGET</code> as follows:</p>
<ol>
<li>
<p>Determine the current sizes of <code>SGA_TARGET</code> and <code>PGA_AGGREGATE_TARGET</code> by entering the following SQL*Plus command:</p>
<pre dir="ltr">SHOW PARAMETER TARGET
</pre>
<p>SQL*Plus displays the values of all initialization parameters with the string TARGET in the parameter name.</p>
<pre dir="ltr">NAME                          TYPE        VALUE
------------------------------ ----------- ----------------
archive_lag_target             integer     0
db_flashback_retention_target  integer     1440
fast_start_io_target           integer     0
fast_start_mttr_target         integer     0
memory_max_target              big integer 0
memory_target                  big integer 0
parallel_servers_target        integer     32
pga_aggregate_target           big integer 29M
sga_target                     big integer 356M
</pre>
<p>Or, on the Initialization Parameters page in Oracle Enterprise Manager Database Express (EM Express), you can enter &#34;TARGET&#34; in the Search field to display the values of all the initialization parameters with the string TARGET in the parameter name, as described in <span class="q">&#34;<a href="GUID-358561B0-EF88-4092-B447-562E2F7AA209.htm">Viewing and Modifying Initialization Parameters</a>.&#34;</span></p>
</li>
<li id="GUID-E6784230-0A0C-443D-8537-36FFA08A7E75__CACBGIAG">
<p>Run the following query to determine the maximum instance Program Global Area (PGA) allocated since the database was started:</p>
<pre dir="ltr">SQL&gt; select value from v$pgastat where name=&#39;maximum PGA allocated&#39;;
      
           VALUE
      ----------
       246844416
</pre>
<p>246844416 bytes is approximately 235M.</p>
</li>
<li>
<p>Compute the maximum value between the query result from step <a href="GUID-E6784230-0A0C-443D-8537-36FFA08A7E75.htm#GUID-E6784230-0A0C-443D-8537-36FFA08A7E75__CACBGIAG">2.b</a> and <code>PGA_AGGREGATE_TARGET</code>. Add <code>SGA_TARGET</code> to this value.</p>
<pre dir="ltr">memory_target = sga_target + max(pga_aggregate_target, maximum PGA allocated)
</pre>
<p>For example, if <code>SGA_TARGET</code> is 356M and <code>PGA_AGGREGATE_TARGET</code> is 29M as shown above, and if the maximum PGA allocated is determined to be 235M, then <code>MEMORY_TARGET</code> should be at least 591M (356M + 235M).</p>
</li>
</ol>
</li>
<li id="GUID-E6784230-0A0C-443D-8537-36FFA08A7E75__CACJBDIG">
<p>Choose the value for <code>MEMORY_TARGET</code> that you want to use.</p>
<p>This can be the minimum value that you computed in step <a href="GUID-E6784230-0A0C-443D-8537-36FFA08A7E75.htm#GUID-E6784230-0A0C-443D-8537-36FFA08A7E75__CACDDFGE">2</a>, or you can choose to use a larger value if you have enough physical memory available.</p>
</li>
<li id="GUID-E6784230-0A0C-443D-8537-36FFA08A7E75__CACGICDB">
<p>For the <code>MEMORY_MAX_TARGET</code> initialization parameter, decide on a maximum amount of memory that you would want to allocate to the database for the foreseeable future. That is, determine the maximum value for the sum of the System Global Area (SGA) and instance PGA sizes. This number can be larger than or the same as the <code>MEMORY_TARGET</code> value that you chose in the previous step.</p>
</li>
<li>
<p>Do one of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>If you started your Oracle Database instance with a server parameter file, which is the default if you created the database with the Database Configuration Assistant (DBCA), enter the following SQL*Plus command:</p>
<pre dir="ltr">ALTER SYSTEM SET MEMORY_MAX_TARGET = <span class="italic">n</span>M SCOPE = SPFILE;
</pre>
<p>where <span class="italic">n</span> is the value that you computed in step <a href="GUID-E6784230-0A0C-443D-8537-36FFA08A7E75.htm#GUID-E6784230-0A0C-443D-8537-36FFA08A7E75__CACGICDB">4</a>.</p>
<p>The <code>SCOPE = SPFILE</code> clause sets the value only in the server parameter file, and not for the running instance. You must include this <code>SCOPE</code> clause because <code>MEMORY_MAX_TARGET</code> is not a dynamic initialization parameter.</p>
<p>Or, you can also select the <code>MEMORY_MAX_TARGET</code> initialization parameter on the Initialization Parameters page in EM Express, click Set, specify a Scope of SPFile, and set a new value, as described in <span class="q">&#34;<a href="GUID-358561B0-EF88-4092-B447-562E2F7AA209.htm">Viewing and Modifying Initialization Parameters</a>.&#34;</span></p>
</li>
<li>
<p>If you started your instance with a text initialization parameter file, manually edit the file so that it contains the following statements:</p>
<pre dir="ltr">memory_max_target = <span class="italic">n</span>M (650M for this example)
memory_target = <span class="italic">m</span>M (591M for this example)
</pre>
<p>where <span class="italic">n</span> is the value that you determined in step <a href="GUID-E6784230-0A0C-443D-8537-36FFA08A7E75.htm#GUID-E6784230-0A0C-443D-8537-36FFA08A7E75__CACGICDB">4</a>, and <span class="italic">m</span> is the value that you determined in step <a href="GUID-E6784230-0A0C-443D-8537-36FFA08A7E75.htm#GUID-E6784230-0A0C-443D-8537-36FFA08A7E75__CACJBDIG">3</a>.</p>
<div class="infobox-note" id="GUID-E6784230-0A0C-443D-8537-36FFA08A7E75__GUID-2F0C3D33-D9DB-4C1B-B990-A6AFB54F4493">
<p class="notep1">Note:</p>
<p>In a text initialization parameter file, if you omit the line for <code>MEMORY_MAX_TARGET</code> and include a value for <code>MEMORY_TARGET</code>, the database automatically sets <code>MEMORY_MAX_TARGET</code> to the value of <code>MEMORY_TARGET</code>. If you omit the line for <code>MEMORY_TARGET</code> and include a value for <code>MEMORY_MAX_TARGET</code>, the <code>MEMORY_TARGET</code> parameter defaults to zero. After startup, you can then dynamically change <code>MEMORY_TARGET</code> to a nonzero value, provided that it does not exceed the value of <code>MEMORY_MAX_TARGET</code>.</p>
</div>
</li>
</ul>
</li>
<li>
<p>Shut down and restart the database.</p>
<p>See <span class="q">&#34;<a href="GUID-C2CFFCE3-95F7-4D3D-B388-294DBBF25793.htm">Shutting Down and Starting Up the Oracle Instance</a>&#34;</span>.</p>
</li>
<li>
<p>In EM Express, from the <span class="bold">Configuration</span> menu, select <span class="bold">Memory</span>.</p>
<p>The Memory Management page appears. In the Memory Settings section, the <span class="bold">Memory Management</span> value is <span class="bold">Auto</span>. This indicates that Automatic Memory Management is enabled for the database. The initialization parameter values shown on this page are the ones that have been specified in addition to <code>MEMORY_MAX_TARGET</code>.</p>
<div class="figure" id="GUID-E6784230-0A0C-443D-8537-36FFA08A7E75__GUID-E5045CA6-60C2-41B0-BF99-841EE8CAEBFF"><img width="358" height="317" src="img/GUID-0C605DFC-4922-4AA9-A2CD-2E995CDE66E0-default.gif" alt="Description of GUID-0C605DFC-4922-4AA9-A2CD-2E995CDE66E0-default.gif follows" title="Description of GUID-0C605DFC-4922-4AA9-A2CD-2E995CDE66E0-default.gif follows"/><br/>
<a href="img_text/GUID-0C605DFC-4922-4AA9-A2CD-2E995CDE66E0-default.htm">Description of the illustration GUID-0C605DFC-4922-4AA9-A2CD-2E995CDE66E0-default.gif</a></div>
<!-- class="figure" --></li>
<li>
<p>If you started your Oracle Database instance with a server parameter file, make these changes to the following initialization parameter values:</p>
<pre dir="ltr">MEMORY_TARGET = <span class="italic">n</span>M; (591M for this example)
SGA_TARGET = 0;
PGA_AGGREGATE_TARGET = 0;
</pre>
<p>You can also set these initialization parameter values using the Initialization Parameters page in EM Express, specifying a scope of SPFile. See <span class="q">&#34;<a href="GUID-358561B0-EF88-4092-B447-562E2F7AA209.htm">Viewing and Modifying Initialization Parameters</a>&#34;</span>for more information.</p>
<div class="infobox-note" id="GUID-E6784230-0A0C-443D-8537-36FFA08A7E75__GUID-F7FA156A-A599-4820-BC1D-36B0CB3434B4">
<p class="notep1">Note:</p>
<p>The preceding steps instruct you to set <code>SGA_TARGET</code> and <code>PGA_AGGREGATE_TARGET</code> to zero so that the sizes of the SGA and instance PGA are tuned up and down as required, without restrictions. You can omit the statements that set these parameter values to zero and leave either or both of the values as positive numbers. In this case, the values act as minimum values for the sizes of the SGA or instance PGA.</p>
</div>
</li>
</ol>
<div class="infoboxnotealso" id="GUID-E6784230-0A0C-443D-8537-36FFA08A7E75__GUID-5521992D-E193-4E9A-A783-49381D4F69BA">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="GUID-2D1989A3-0922-48D6-8B97-3721141CC3BA.htm">About Memory Management</a>&#34;</span></p>
</div>
</div>
<!-- class="section" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4647">
<tr>
<td class="cellalignment4654">
<table class="cellalignment4652">
<tr>
<td class="cellalignment4651"><a href="GUID-2D1989A3-0922-48D6-8B97-3721141CC3BA.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4651"><a href="GUID-6ADFFF05-1FFC-42CB-91FD-679A7B767C0D.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2004, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4656">
<table class="cellalignment4650">
<tr>
<td class="cellalignment4651"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4651"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4651"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4651"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4651"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4651"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>