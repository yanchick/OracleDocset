<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-91901"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Deploying%20Oracle%20RAC%20Databases%20with%20Rapid%20Home%20Provisioning"></a><title>Deploying Oracle RAC Databases with Rapid Home Provisioning</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-11T1:47:14Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Real Application Clusters Installation Guide"/>
<meta name="dcterms.identifier" content="E48917-13"/>
<meta name="dcterms.isVersionOf" content="RILIN"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2013, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="dbcacrea.htm" title="Previous" type="text/html"/>
<link rel="Next" href="postinst.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48917-13.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">9/19</span> <!-- End Header -->
<script>
<!-- // <![CDATA[
window.name='racrhp'
// ]]> -->
</script> <script>
// <![CDATA[
function footdisplay(footnum,footnote) {
    var msg = window.open('', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');

    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">');
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>');
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('');
    msg.document.write('<style> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() { var height = msg.document.getElementById('footnote').offsetHeight; msg.resizeTo(598, height + 100); }, 100);
    msg.focus();
}
// ]]>
</script> <noscript>
<p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
</noscript>
<div id="RILIN0006" class="chapter"><a id="BCEGBFJH"></a>
<h1 class="chapter"><span class="secnum">4</span> Deploying Oracle RAC Databases with Rapid Home Provisioning</h1>
<p>This chapter describes how to deploy Oracle Real Application Clusters (Oracle RAC) databases using Rapid Home Provisioning and contains the following sections:</p>
<ul>
<li>
<p><a href="#CHDJEHBE">Understanding Rapid Home Provisioning for Oracle RAC</a></p>
</li>
<li>
<p><a href="#CHDJHIJA">Using Rapid Home Provisioning to Deploy Oracle RAC Database Software</a></p>
</li>
<li>
<p><a href="#BCEDAFFI">Deploying Database Software and Creating Databases</a></p>
</li>
<li>
<p><a href="#CHDEDDCC">Patching Databases</a></p>
</li>
</ul>
<a id="CHDJEHBE"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.1</span> Understanding <a id="sthref187"></a>Rapid Home Provisioning for Oracle RAC</h2>
<p>Rapid Home Provisioning is a method of deploying software homes and databases to nodes in a cloud computing environment from a single cluster where you store templates of Oracle homes as images (called gold images) of Oracle software, such as databases, middleware, and applications. Using a working copy, which is a writeable Oracle Automatic Storage Management Cluster File System (Oracle ACFS) snapshot of the gold image, you can deploy an Oracle home, for example, to the Oracle Grid Infrastructure once and then use that home from any node in the cloud, without needing to provision the home each time you add a node to the cloud.</p>
<p>Gold images can be deployed in the same cluster as the <a id="sthref188"></a>Rapid Home Provisioning Server (RHPS) or a different cluster where a <a id="sthref189"></a>Rapid Home Provisioning Client (RHPC) is installed.</p>
<p><a href="#CHDCCHHA">Table 4-1</a> indicates the various supported database releases and storage options for the database software for different releases:</p>
<div class="tblformal">
<p class="titleintable"><a id="sthref190"></a><a id="CHDCCHHA"></a>Table 4-1 Supported Database Releases and Software Storage Options</p>
<table class="cellalignment4795" title="Supported Database Releases and Software Storage Options" summary="Database software storage options">
<thead>
<tr class="cellalignment4786">
<th class="cellalignment4793" id="r1c1-t2">Supported Release</th>
<th class="cellalignment4793" id="r1c2-t2">Local file system</th>
<th class="cellalignment4793" id="r1c3-t2">Network file system (NFS)</th>
<th class="cellalignment4793" id="r1c4-t2">RHP_MANAGED<a id="sthref191" href="#sthref191" onclick="footdisplay(1,&#34;Storage provided by the Rapid Home Provisioning infrastructure&#34;)"><sup class="tablefootnote">Foot&nbsp;1&nbsp;</sup></a> (Oracle ACFS)</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r2c1-t2" headers="r1c1-t2">
<p>12.1.0.x</p>
</td>
<td class="cellalignment4794" headers="r2c1-t2 r1c2-t2">
<p>Yes</p>
</td>
<td class="cellalignment4794" headers="r2c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment4794" headers="r2c1-t2 r1c4-t2">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r3c1-t2" headers="r1c1-t2">
<p>11.2.0.x</p>
</td>
<td class="cellalignment4794" headers="r3c1-t2 r1c2-t2">
<p>Yes</p>
</td>
<td class="cellalignment4794" headers="r3c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment4794" headers="r3c1-t2 r1c4-t2">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r4c1-t2" headers="r1c1-t2">
<p>10.2.0.5</p>
</td>
<td class="cellalignment4794" headers="r4c1-t2 r1c2-t2">
<p>Yes</p>
</td>
<td class="cellalignment4794" headers="r4c1-t2 r1c3-t2">
<p>No</p>
</td>
<td class="cellalignment4794" headers="r4c1-t2 r1c4-t2">
<p>No</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1&nbsp;</sup>Storage provided by the Rapid Home Provisioning infrastructure</p>
</div>
<!-- class="sect1" -->
<a id="CHDJHIJA"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.2</span> Using Rapid Home Provisioning to Deploy Oracle RAC Database Software</h2>
<p>To provision Oracle RAC databases using Rapid Home Provisioning Server, the Rapid Home Provisioning Server must be configured and running in the Oracle Grid Infrastructure home, either on the cluster where the Oracle RAC database needs to be provisioned, or on a remote cluster. In the latter case, the cluster where the Oracle RAC database is to be provisioned, should be configured and running the Rapid Home Provisioning Client daemon.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CWADD92589" href="../CWADD/GUID-33FC643F-0A2C-4EFF-A13A-D3054D945119.htm#CWADD92589"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about how to configure Rapid Home Provisioning</p>
</li>
<li>
<p><a class="olink CWADD93074" href="../CWADD/GUID-F2CBA060-E4F2-4EB1-A0A7-11144D68A26A.htm#CWADD93074"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about <code dir="ltr">srvctl</code> commands and Rapid Home Provisioning</p>
</li>
</ul>
</div>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDDHCEB">Creating the Gold Image</a></p>
</li>
<li>
<p><a href="#BCEBCFIJ">Provisioning Oracle Homes Using Database Software</a></p>
</li>
</ul>
<a id="CHDDHCEB"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.2.1</span> <a id="sthref192"></a><a id="sthref193"></a>Creating the Gold Image</h3>
<p>To provision an Oracle RAC database, the database software must be available as a gold image in the Rapid Home Provisioning Server cluster. To import the gold image, perform the following steps:</p>
<ol>
<li>
<p>On any node in the Rapid Home Provisioning Server or Rapid Home Provisioning Client, run the Oracle Universal Installer and complete a software-only install of Oracle Database software. Download and install any required patches from My Oracle Support.</p>
</li>
<li>
<p>On the same node, create a gold image as follows:</p>
<pre dir="ltr">$ rhpctl import image -image <span class="codeinlineitalic">image_name</span> -path <span class="codeinlineitalic">path</span>
</pre></li>
</ol>
<p>where <code dir="ltr"><span class="codeinlineitalic">image_name</span></code> is the name of the gold image created by this command, and <code dir="ltr">path</code> is the top-level directory path where the Oracle RAC database software was installed in step 1.</p>
<p>After the above steps are completed, the image is available for provisioning of Oracle RAC databases.</p>
</div>
<!-- class="sect2" -->
<a id="BCEBCFIJ"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.2.2</span> Provisioning Oracle Homes Using Database Software</h3>
<p>After creating a gold image on the Rapid Home Provisioning Server cluster, you can use the gold images to provision working copies on the server cluster or on remote clusters that are configured with the Rapid Home Provisioning Client daemon.</p>
<p>You can allow Rapid Home Provisioning Server to provide the storage space for the Oracle Home software or specify shared or non-shared storage path for the Oracle Database software.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BCEDAFFI"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.3</span> Deploying Database Software and Creating Databases</h2>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDIJCAI">Creating Databases Using Templates</a></p>
</li>
<li>
<p><a href="#CHDBEGJG">Use Cases for Provisioning Databases</a></p>
</li>
<li>
<p><a href="#CHDFCIHA">Specifying Passwords for Provisioned Databases</a></p>
</li>
<li>
<p><a href="#CHDDJIJC">Deleting Databases on Provisioned Homes</a></p>
</li>
</ul>
<a id="CHDIJCAI"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.1</span> <a id="sthref194"></a>Creating<a id="sthref195"></a> Databases Using Templates</h3>
<p>You can use templates to create new databases and duplicate existing databases. The information in templates includes database options, initialization parameters, and storage attributes (for data files, tablespaces, control files, and online redo log files).</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li><a class="olink ADMQS02351" href="../ADMQS/GUID-2BE4A2D6-E2DA-47B9-A708-6329CDAB42D9.htm#ADMQS02351"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about templates</li>
<li>
<p><a href="dbcacrea.htm#BABJEAFA">Section 3.1, &#34;Using DBCA with Oracle RAC or Oracle RAC One Node&#34;</a></p>
</li>
</ul>
</div>
<p>To specify a template for the database creation, use the &#39;<code dir="ltr">-dbtemplate</code>&#39; option. You can specify the template location in any of the following ways:</p>
<ul>
<li>
<p><span class="bold">An absolute path and filename</span>: In this case, the template file should be available on all nodes in the target cluster.</p>
<p><code dir="ltr">-dbtemplate /u01/dbtemplates/db12/general_template.dbt</code></p>
</li>
<li>
<p><span class="bold">An image name and a relative path in the form of image-name:relative-path:</span> This form is useful where the administrator might designate a single image as a holder of all database templates. In this case, the template is available on the Rapid Home Provisioning Server cluster, and is copied to the target cluster during the database creation.</p>
<p><code dir="ltr">-dbtemplate TEMPLATE_IMAGE:db12/general_template.dbt</code></p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDBEGJG"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.2</span> Use Cases for <a id="sthref196"></a>Provisioning Databases</h3>
<p>This section explains how to use <code dir="ltr">rhpctl</code> commands to provision database software and create databases. For information about <code dir="ltr">rhpctl</code> command options, see <a href="#BCEJBJBE">Table 4-2</a>.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BCEFEAHD">Provisioning Oracle Database Locally and Remotely</a></p>
</li>
<li>
<p><a href="#BCEJECDE">Provisioning Policy-Managed Databases Using Gold Images</a></p>
</li>
<li>
<p><a href="#BCEBIEAH">Provisioning Oracle RAC One Node Database</a></p>
</li>
<li>
<p><a href="#BCECDFII">Provisioning Multitenant Container Database</a></p>
</li>
<li>
<p><a href="#BCEBBIBF">Provisioning Administrator-Managed Databases from Gold Images</a></p>
</li>
<li>
<p><a href="#BCEIAFJH">Provisioning Databases Using Templates</a></p>
</li>
<li>
<p><a href="#BCEHFHEF">Provisioning Database in an Existing Oracle Home</a></p>
</li>
<li>
<p><a href="#BCEEHAFB">Provisioning Database in Oracle Flex Cluster Environment</a></p>
</li>
</ul>
<a id="BCEFEAHD"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.3.2.1</span> Provisioning Oracle Database Locally and Remotely</h4>
<p>Use the <code dir="ltr">rhpctl add workingcopy</code> command to provision database software and Oracle Database. You can run this command on the Rapid Home Provisioning Server or on the Rapid Home Provisioning Client. If you run the command on the Rapid Home Provisioning Server, you can provision an Oracle RAC database either locally on the Rapid Home Provisioning Server, or remotely on any Rapid Home Provisioning Client. When you run the <code dir="ltr">rhpctl</code> command on the Rapid Home Provisioning Server, use the <code dir="ltr">-client</code> option to specify the remote cluster. Refer to <a href="#BCEJBJBE">Table 4-2</a> for default values for the <code dir="ltr">add workingcopy</code> options.</p>
<p><a href="#BCEFJEBA">Example 4-1</a> and <a href="#BCEIJAGC">Example 4-2</a> show local and remote provisioning of databases.</p>
<div class="example">
<p class="titleinexample"><a id="BCEFJEBA"></a>Example 4-1 Provision Oracle Database Software Home Locally</p>
<pre dir="ltr">rhpctl add workingcopy -workingcopy myDBHome1 -image ORACLEDB12 -oraclebase /u01/app/product/12.1.0/obase
</pre></div>
<!-- class="example" -->
<div class="example">
<p class="titleinexample"><a id="BCEIJAGC"></a>Example 4-2 Provision Oracle Database Software Home Remotely</p>
<pre dir="ltr">rhpctl add workingcopy -workingcopy myDBHome1 -image ORACLEDB12 -oraclebase /u01/app/product/12.1.0/obase
-client payrollCluster -user payuser
</pre></div>
<!-- class="example" -->
<p>When you run the command from Rapid Home Provisioning Server or Rapid Home Provisioning Client, it provisions Oracle Database software on the cluster for the user executing the command, with the default values for <code dir="ltr">-storagetype</code> and <code dir="ltr">-path</code>, if not specified, as explained in <a href="#BCEJBJBE">Table 4-2</a>.</p>
<p>For more information about the options for this use case, see the context-sensitive help for <code dir="ltr">rhpctl add workingcopy -help REMOTEPROVISIONING</code> on the command line.</p>
</div>
<!-- class="sect3" -->
<a id="BCEJECDE"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.3.2.2</span> Provisioning Policy-Managed Databases Using Gold Images</h4>
<p>To provision Oracle Database software and create a policy-managed database from a gold image on an existing server pool, specify the server pool name using the <code dir="ltr">-serverpool</code> option. You can also provision Oracle Database software and create a policy-managed database on a new server pool using the <code dir="ltr">-newpool</code> option. In this case, specify the <code dir="ltr">-cardinality</code> option with a number to indicate the number of instances to be configured and started for this policy-managed database. The allocation of servers to this new pool depends on the current server and server pool configuration on the target cluster and CRS policies. Ensure that the Free server pool contains sufficient number of servers, otherwise other databases running on the nodes may be stopped to accommodate this database. The new pool is created for the Oracle Grid Infrastructure user (<code dir="ltr">grid</code>) with the minimum and maximum size set to the specified cardinality, and uses the default values for all other parameters.</p>
<p><a href="#BCECFEFH">Example 4-3</a>, <a href="#BCECABHJ">Example 4-4</a>, and <a href="#BCEEHCJI">Example 4-5</a> show how to create policy-managed databases.</p>
<div class="example">
<p class="titleinexample"><a id="BCECFEFH"></a>Example 4-3 Create a Policy-Managed Database from a Gold Image on an Existing Server Pool</p>
<pre dir="ltr">rhpctl add workingcopy -workingcopy myDBHome1 -image ORACLEDB12 -oraclebase /u01/app/product/12.1.0/obase 
-dbname proddb -datafileDestination PAYDG1 -serverpool proddbpool1
</pre></div>
<!-- class="example" -->
<div class="example">
<p class="titleinexample"><a id="BCECABHJ"></a>Example 4-4 Create Policy-Managed Database from a Gold Image on a New Server Pool</p>
<pre dir="ltr">rhpctl add workingcopy -workingcopy myDBHome1 -image ORACLEDB12 -oraclebase /u01/app/product/12.1.0/obase
-dbname proddb - datafileDestination PAYDG1 
-newpool proddbpool1 -cardinality 4
</pre></div>
<!-- class="example" -->
<div class="example">
<p class="titleinexample"><a id="BCEEHCJI"></a>Example 4-5 Create a Policy-Managed Database in LOCAL or User-Specified Location</p>
<pre dir="ltr">rhpctl add workingcopy -workingcopy myDBHome1 -image ORACLEDB12 -oraclebase /u01/app/product/12.1.0/obase
-storagetype LOCAL -path /u01/app/product/12.1.0/dbhome -dbname proddb -datafileDestination PAYDG1
-newpool proddbpool1<span class="codeinlineitalic"> </span>-cardinality 4
</pre></div>
<!-- class="example" -->
<p>When you run the command from Rapid Home Provisioning Server or Rapid Home Provisioning Client, it provisions Oracle Database software on the cluster for the user executing the command with the default values for <code dir="ltr">-storagetype</code> and <code dir="ltr">-path</code>, if not specified, as explained in <a href="#BCEJBJBE">Table 4-2</a>. It also creates a policy-managed Oracle RAC database on the specified server pool with database files located in the <code dir="ltr">-datafileDestination</code> path.</p>
<p>For more information about the options for this use case, see the context-sensitive help for <code dir="ltr">rhpctl add workingcopy -help POLICYDB</code> and <code dir="ltr">rhpctl add workingcopy -help STORAGETYPE</code> on the command line.</p>
</div>
<!-- class="sect3" -->
<a id="BCEBIEAH"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.3.2.3</span> Provisioning Oracle RAC One Node Database</h4>
<p>To specify the type of database to provision, use the <code dir="ltr">-dbtype</code> option. For example, to provision Oracle Database software and create a policy-managed Oracle RAC One Node database from a gold image:</p>
<pre dir="ltr">rhpctl add workingcopy -workingcopy myDBHome1 -image ORACLEDB12 -oraclebase /u01/app/product/12.1.0/obase
-dbtype RACONENODE -dbname proddb -datafileDestination PAYDG1
-serverpool proddbpool1
</pre></div>
<!-- class="sect3" -->
<a id="BCECDFII"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.3.2.4</span> Provisioning Multitenant Container Database</h4>
<p>To provision Oracle Database software and create a policy-managed multitenant container database (<a id="sthref197"></a>CDB), specify the server pool name, the database files location, and the name and number of pluggable databases (PDBs):</p>
<pre dir="ltr">rhpctl add workingcopy -workingcopy myDBHome1 -image ORACLEDB12 -oraclebase /u01/app/product/12.1.0/obase 
-dbname proddb -datafileDestination PAYDG1
-serverpool proddbpool1
-cdb -pdbName prodpdb -numberOfPDBs 10
</pre>
<p>When you run the command from Rapid Home Provisioning Server or Rapid Home Provisioning Client, it provisions Oracle Database software on the cluster for the user executing the command with the default values for <code dir="ltr">-storagetype</code> and <code dir="ltr">-path</code>, if not specified, as explained in <a href="#BCEJBJBE">Table 4-2</a>. It also creates a policy-managed Oracle RAC multitenant container database (CDB) on the server pool and ten PDBs named <code dir="ltr">prodpdb1</code>, <code dir="ltr">prodpdb2</code>, and so on. The database files are located in the <code dir="ltr">-datafileDestination</code> path.</p>
<p>For more information about the options for this use case, see the context-sensitive help for <code dir="ltr">rhpctl add workingcopy -help PDB</code> on the command line.</p>
</div>
<!-- class="sect3" -->
<a id="BCEBBIBF"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.3.2.5</span> Provisioning Administrator-Managed Databases from Gold Images</h4>
<p>To provision Oracle Database software and create an administrator-managed database from a gold image, specify the list of nodes where the Oracle RAC database instances need to be configured and started, using the <code dir="ltr">-node</code> option. You must specify existing nodes on the target cluster in the list of nodes. Ensure that the nodes are in the Free or Generic server pool on the target cluster. If you specify nodes that are not in the Free or Generic pool, then policy-managed databases running on the nodes may be stopped to accommodate this database. Specify the type of database to provision using the <code dir="ltr">-dbtype</code> option.</p>
<p><a href="#BCECAJHD">Example 4-6</a>, <a href="#BCECCDHE">Example 4-7</a>, and <a href="#BCEEGJBD">Example 4-8</a> show how to create administrator-managed databases.</p>
<div class="example">
<p class="titleinexample"><a id="BCECAJHD"></a>Example 4-6 Create a Administrator-Managed Oracle RAC Database from a Gold Image</p>
<pre dir="ltr">rhpctl add workingcopy -workingcopy myDBHome1 -image ORACLEDB12 -oraclebase /u01/app/product/12.1.0/obase
-dbname proddb -datafileDestination PAYDG1 -node prodsrvr1,prodsrvr2,prodsrvr3
</pre></div>
<!-- class="example" -->
<div class="example">
<p class="titleinexample"><a id="BCECCDHE"></a>Example 4-7 Create a Administrator-Managed Oracle RAC One Node Database from a Gold Image</p>
<pre dir="ltr">rhpctl add workingcopy -workingcopy myDBHome1 -image ORACLEDB12 -oraclebase /u01/app/product/12.1.0/obase 
-dbtype RACONENODE -dbname proddb -datafileDestination PAYDG1 -node prodsrvr1,prodsrvr2,prodsrvr3
</pre></div>
<!-- class="example" -->
<div class="example">
<p class="titleinexample"><a id="BCEEGJBD"></a>Example 4-8 Create a Single-Instance Oracle Database from a Gold Image</p>
<pre dir="ltr">rhpctl add workingcopy -workingcopy myDBHome1 -image ORACLEDB12 -oraclebase /u01/app/product/12.1.0/obase 
-dbtype SINGLE -dbname proddb -datafileDestination PAYDG1 -node prodsrvr1
</pre></div>
<!-- class="example" -->
<p>When you run the command from Rapid Home Provisioning Server or Rapid Home Provisioning Client, Oracle Database software is provisioned on the cluster for the user executing the command with the default values for <code dir="ltr">-storagetype</code> and <code dir="ltr">-path</code>, if not specified, as explained in <a href="#BCEJBJBE">Table 4-2</a>. It also creates administrator-managed databases, single-instance, Oracle RAC, or Oracle RAC One Node, as per the <code dir="ltr">-dbtype</code> option on the specified nodes, with database files located in the <code dir="ltr">-datafileDestination</code> path.</p>
<p>For more information about the options for this use case, see the context-sensitive help for <code dir="ltr">rhpctl add workingcopy -help ADMINDB</code> on the command line.</p>
</div>
<!-- class="sect3" -->
<a id="BCEIAFJH"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.3.2.6</span> Provisioning Databases Using Templates</h4>
<p>To provision Oracle Database software and create a database from a database template image, specify the template location using the <code dir="ltr">-dbtemplate</code> option with the absolute file path of the template file or the relative path to the image home directory on the Rapid Home Provisioning Server. To specify an absolute file path for the template, the template must exist in the target cluster, on all nodes for a policy-managed database and on the nodes you specify in the command-line for administrator-managed database.</p>
<p><a href="#BCEJJAIA">Example 4-9</a> and <a href="#BCEEHIBJ">Example 4-10</a> show how to provision databases using templates.</p>
<div class="example">
<p class="titleinexample"><a id="BCEJJAIA"></a>Example 4-9 Create a Policy-Managed Database using Rapid Home Provisioning Server (RHPS) Image</p>
<pre dir="ltr">rhpctl add workingcopy -workingcopy myDBHome1 -image ORACLEDB12 -oraclebase /u01/app/product/12.1.0/obase
-dbname proddb -datafileDestination PAYDG1 -serverpool proddbpool1
 -dbtemplate DBTMPLTIMG:templates/database/12.1.0/warehouse.dbt
</pre></div>
<!-- class="example" -->
<div class="example">
<p class="titleinexample"><a id="BCEEHIBJ"></a>Example 4-10 Create a Policy-Managed Database using Template Stored in a User-Defined Location</p>
<pre dir="ltr">rhpctl add workingcopy -workingcopy myDBHome1 -image ORACLEDB12  -oraclebase /u01/app/product/12.1.0/obase 
-dbname proddb<span class="codeinlineitalic"> </span> -datafileDestination PAYDG1 -serverpool proddbpool1
-dbtemplate /templates/database/12.1.0/warehouse.dbt
</pre></div>
<!-- class="example" -->
<p>When you run the command from Rapid Home Provisioning Server or Rapid Home Provisioning Client, it provisions Oracle Database software on the cluster for the user executing the command with the default values for <code dir="ltr">-storagetype</code> and <code dir="ltr">-path</code>, if not specified, as explained in <a href="#BCEJBJBE">Table 4-2</a>. It also creates a database on the specified server pool from the database template.</p>
<p>For more information about the options for this use case, see the context-sensitive help for <code dir="ltr">rhpctl add workingcopy -help DBTEMPLATE</code> on the command line.</p>
</div>
<!-- class="sect3" -->
<a id="BCEHFHEF"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.3.2.7</span> Provisioning Database in an Existing Oracle Home</h4>
<p>Use the <code dir="ltr">rhpctl add database</code> command to provision a new database in an existing provisioned database software home and server pool. For example:</p>
<pre dir="ltr">$ rhpctl add database -workingcopy mydbhome -dbname ORCL2
-datafileDestination PAYDG1 -serverpool pool2
</pre>
<p>The command creates a new database ORCL2 and starts it on all nodes that are active in the server pool pool2.</p>
</div>
<!-- class="sect3" -->
<a id="BCEEHAFB"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.3.2.8</span> Provisioning Database in Oracle Flex Cluster Environment</h4>
<p>Provision Oracle Database software and create a database in an existing server pool and pqpool in Oracle Flex Cluster environment:</p>
<pre dir="ltr">rhpctl add workingcopy -workingcopy myDBHome1 -image ORACLEDB12 -oraclebase /u01/app/product/12.1.0/obase
-dbname proddb  -dbtype RAC -datafileDestination PAYDG1 -serverpool proddbpool1 -pqpool proddbpool2
</pre>
<p>For more information about the options for this use case, see the context-sensitive help for <code dir="ltr">rhpctl add workingcopy -help DBWITHPQPOOLS</code> on the command line.</p>
<p><a href="#BCEJBJBE">Table 4-2</a> lists the parameters for the <code dir="ltr">rhpctl</code> command.</p>
<div class="tblformal">
<p class="titleintable"><a id="sthref198"></a><a id="BCEJBJBE"></a>Table 4-2 rhpctl Parameters for Provisioning Databases</p>
<table class="cellalignment4795" title="rhpctl Parameters for Provisioning Databases" summary="This table lists the parameters in the rhpctl command and their description." dir="ltr">
<thead>
<tr class="cellalignment4786">
<th class="cellalignment4793" id="r1c1-t5">Option</th>
<th class="cellalignment4793" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r2c1-t5" headers="r1c1-t5">
<p><code dir="ltr">-workingcopy</code> <code dir="ltr"><span class="codeinlineitalic">workingcopy_name</span></code></p>
</td>
<td class="cellalignment4794" headers="r2c1-t5 r1c2-t5">
<p>Working copy to provision the database</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r3c1-t5" headers="r1c1-t5">
<p><code dir="ltr">-image</code> <code dir="ltr"><span class="codeinlineitalic">image_name</span></code></p>
</td>
<td class="cellalignment4794" headers="r3c1-t5 r1c2-t5">
<p>Image name</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r4c1-t5" headers="r1c1-t5">
<p><code dir="ltr">-oraclebase</code> <code dir="ltr"><span class="codeinlineitalic">oraclebase_path</span></code></p>
</td>
<td class="cellalignment4794" headers="r4c1-t5 r1c2-t5">
<p>Oracle base location for provisioning Oracle Database home</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r5c1-t5" headers="r1c1-t5">
<p><code dir="ltr">-dbname</code> <code dir="ltr"><span class="codeinlineitalic">unique_db_name</span></code></p>
</td>
<td class="cellalignment4794" headers="r5c1-t5 r1c2-t5">
<p>Unique name for the database</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r6c1-t5" headers="r1c1-t5">
<p><code dir="ltr">-datafileDestination</code> <code dir="ltr"><span class="codeinlineitalic">datafile_destination_path</span></code></p>
</td>
<td class="cellalignment4794" headers="r6c1-t5 r1c2-t5">
<p>Path to store database data files or Oracle ASM disk group name.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r7c1-t5" headers="r1c1-t5">
<p><code dir="ltr">-serverpool</code> <code dir="ltr"><span class="codeinlineitalic">pool_name</span></code></p>
</td>
<td class="cellalignment4794" headers="r7c1-t5 r1c2-t5">
<p>Server pool in which the policy-managed database is provisioned</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r8c1-t5" headers="r1c1-t5">
<p><code dir="ltr">-node</code> <code dir="ltr"><span class="codeinlineitalic">node_list</span></code></p>
</td>
<td class="cellalignment4794" headers="r8c1-t5 r1c2-t5">
<p>A node or comma-delimited list of several nodes on which to create the administrator-managed database</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r9c1-t5" headers="r1c1-t5">
<p><code dir="ltr">-pdbName</code> <code dir="ltr"><span class="codeinlineitalic">pdb_prefix</span></code></p>
</td>
<td class="cellalignment4794" headers="r9c1-t5 r1c2-t5">
<p>The PDB name prefix if one or more PDBs need to be created.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r10c1-t5" headers="r1c1-t5">
<p><code dir="ltr">-numberOfPDBs</code> <code dir="ltr"><span class="codeinlineitalic">pdb_count</span></code></p>
</td>
<td class="cellalignment4794" headers="r10c1-t5 r1c2-t5">
<p>Number of PDBs</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r11c1-t5" headers="r1c1-t5">
<p><code dir="ltr">-dbTemplate</code> <code dir="ltr"><span class="codeinlineitalic">file_path</span></code> or <code dir="ltr">-dbTemplate</code> <code dir="ltr"><span class="codeinlineitalic">image-name:relative_file_path</span></code></p>
</td>
<td class="cellalignment4794" headers="r11c1-t5 r1c2-t5">
<p>Absolute file path for the template file or the relative path to the image home directory on Rapid Home Provisioning Server. If this option is not specified on the command line, then a new General Purpose Database is created.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r12c1-t5" headers="r1c1-t5">
<p><code dir="ltr">-storagetype {NFS|LOCAL|RHP_MANAGED}</code></p>
</td>
<td class="cellalignment4794" headers="r12c1-t5 r1c2-t5">
<p>Type of storage used for the provisioned Oracle home. The possible values are:</p>
<ul>
<li>
<p><code dir="ltr">RHP_MANAGED</code>: Storage provided by the Rapid Home Provisioning infrastructure, that is Oracle ACFS.</p>
</li>
<li>
<p><code dir="ltr">LOCAL:</code> Storage that you specify on a file system on the target cluster.</p>
</li>
<li>
<p><code dir="ltr">NFS:</code> Storage provided by Rapid Home Provisioning infrastructure on the server cluster and NFS-mounted on the target cluster.</p>
</li>
</ul>
<p>If both <code dir="ltr">-storagetype</code> and <code dir="ltr">-path</code> options are not specified, then Rapid Home Provisioning will attempt to use <code dir="ltr">RHP_MANAGED</code> storage.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r13c1-t5" headers="r1c1-t5">
<p><code dir="ltr">-path</code> <code dir="ltr"><span class="codeinlineitalic">storage_path</span></code></p>
</td>
<td class="cellalignment4794" headers="r13c1-t5 r1c2-t5">
<p>Path where Oracle Database software is provisioned when using the LOCAL/NFS storage type.</p>
<p>If the <code dir="ltr">-path</code> option is not specified, then there are two possibilities:</p>
<ul>
<li>
<p>If Rapid Home Provisioning Client is configured with a disk group, then Oracle Database software is provisioned on <code dir="ltr">RHP_MANAGED</code> storage, that is, Oracle ACFS.</p>
</li>
<li>
<p>If Rapid Home Provisioning Client is not configured with a disk group, then a default Oracle home path, such as <code dir="ltr"><span class="codeinlineitalic">oracle_base_path/</span></code><code dir="ltr">product</code><code dir="ltr"><span class="codeinlineitalic">/db_version/workingcopy_name</span></code>, based on the value of the <code dir="ltr">-oraclebase</code> option is used to provision the database software. This path could be shared or non-shared.</p>
</li>
</ul>
<p><span class="bold">Note:</span> To determine whether the Rapid Home Provisioning Client is configured with a disk group, run the <code dir="ltr">srvctl config rhpclient</code> command on the target cluster.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r14c1-t5" headers="r1c1-t5">
<p><code dir="ltr">-client</code> <code dir="ltr"><span class="codeinlineitalic">cluster_name</span></code></p>
</td>
<td class="cellalignment4794" headers="r14c1-t5 r1c2-t5">
<p>Name of the client cluster. If this option is not specified on the command line, then the provisioning operation is performed on the cluster from where the <code dir="ltr">rhpctl</code> command is run.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r15c1-t5" headers="r1c1-t5">
<p><code dir="ltr">-user</code> <code dir="ltr"><span class="codeinlineitalic">user_name</span></code></p>
</td>
<td class="cellalignment4794" headers="r15c1-t5 r1c2-t5">
<p>Owner of the provisioned Oracle Database software. If this option is not specified on the command line, then the provisioning operation is performed for the user executing the <code dir="ltr">rhpctl</code> command. When provisioning remotely, use the <code dir="ltr">-client</code> option to specify the client cluster and the <code dir="ltr">-user</code> option to specify the user on the client cluster.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r16c1-t5" headers="r1c1-t5">
<p><code dir="ltr">-dbtype {RACONENODE|RAC|SINGLE}</code></p>
</td>
<td class="cellalignment4794" headers="r16c1-t5 r1c2-t5">
<p>Type of database to provision on the local Rapid Home Provisioning Server or remote Rapid Home Provisioning Clients. This can be <code dir="ltr">RAC</code>, <code dir="ltr">RACONENODE</code>, or <code dir="ltr">SINGLE</code>. If the <code dir="ltr">-dbtype</code> option is not specified on the command line, then an Oracle RAC database is created.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r17c1-t5" headers="r1c1-t5">
<p><code dir="ltr">-pqpool</code> <code dir="ltr"><span class="codeinlineitalic">server_pool_name</span></code></p>
</td>
<td class="cellalignment4794" headers="r17c1-t5 r1c2-t5">
<p>Name of an existing server pool.</p>
<p><span class="bold">Note:</span> This parameter is only applicable in an Oracle Flex Cluster environment and refers to server pools (either already defined as in this case, or to be created when you use the <code dir="ltr">-newpqpool</code> parameter) running on Leaf Nodes. If you create a new server pool, then you must specify a cardinality value for the server pool using the <code dir="ltr">-pqcardinality</code> parameter.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li><a class="olink CWADD92621" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=CWADD92621"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about <code dir="ltr">rhpctl</code> commands for Rapid Home Provisioning</li>
<li>
<p><a class="olink CWADD91116" href="../CWADD/GUID-3D052F0B-D699-41FC-A882-0E445F0751DD.htm#CWADD91116"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about server allocation to server pools</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDFCIHA"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.3</span> Specifying Passwords for Provisioned Databases</h3>
<p>There is no mechanism to specify passwords for the schemas of a provisioned database. If the password needs to be known, it is recommended that the DBA user connects to the database using OS authentication on the node where the database instance is running, and reset the password to the desired value for each schema.</p>
</div>
<!-- class="sect2" -->
<a id="CHDDJIJC"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.4</span> Deleting Databases on Provisioned Homes</h3>
<p>Use the command <code dir="ltr">rhpctl delete database</code> to remove an existing database from a provisioned database software home. To ensure successful deletion, the database should not be running.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDEDDCC"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">4.4</span> <a id="sthref199"></a>Patching Databases</h2>
<p>You can patch databases in one of the following ways:</p>
<ul>
<li>
<p>Patching the software</p>
</li>
<li>
<p>Patching either the data dictionary or schemas in the database, or both</p>
</li>
</ul>
<p>See the following sections for more information:</p>
<ul>
<li>
<p><a href="#BCEBCDFE">Creating an Image for Database Patching</a></p>
</li>
<li>
<p><a href="#BCEGBCBC">Use Cases for Patching</a></p>
</li>
</ul>
<a id="BCEBCDFE"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.4.1</span> Creating an Image for Database Patching</h3>
<p>Patching database software requires a one-time creation of a new image that includes the patched software. Follow these steps to create a database image:</p>
<ol>
<li id="CHDEEBAC">
<p>Create a working copy of an existing database image that needs to be patched.</p>
</li>
<li id="CHDFBCJH">
<p>On the provisioned <code dir="ltr">ORACLE_HOME</code> which is the working copy, apply the necessary set of patches using OPatch or other mechanism.</p>
</li>
<li>
<p>Run the command <code dir="ltr">rhpctl add image</code> to create a new image from the updated working copy. This image is the patched version of the original image.</p>
<pre dir="ltr">$ rhpctl add image -image <span class="codeinlineitalic">image_name</span> -workingcopy <span class="codeinlineitalic">workingcopy_name</span>
</pre></li>
<li>
<p>To include the image as part of an existing image series:</p>
<pre dir="ltr">$ rhpctl add image -image <span class="codeinlineitalic">image_name</span> -workingcopy <span class="codeinlineitalic">workingcopy_name</span> -series <span class="codeinlineitalic">series_name</span>
</pre></li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BCEGBCBC"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.4.2</span> Use Cases for <a id="sthref200"></a>Patching</h3>
<p>To patch a database, run the command <code dir="ltr">rhpctl move database</code> which creates a new <code dir="ltr">ORACLE_HOME</code> based on a patched image, if it does not exist, and also makes the database run from this new location instead of its current <code dir="ltr">ORACLE_HOME</code> location.</p>
<p>By default, patching is performed in rolling mode. Use the <code dir="ltr">-nonrolling</code> option to perform patching in non-rolling mode. The database is then completely stopped on the old <code dir="ltr">ORACLE_HOME</code>, and then restarted to make it run from the newly patched <code dir="ltr">ORACLE_HOME</code>.</p>
<p>For databases versions 12.1.0.1 or higher, the command <code dir="ltr">rhpctl move database</code> also executes SQL commands required for database patching. For database versions earlier than 12.1, a message is displayed asking the user to run the SQL commands for database patching manually.</p>
<p>This section contains the following use cases for patching:</p>
<ul>
<li>
<p><a href="#BCEBAAIG">Moving Databases from Source Working Copy to Target Working Copy</a></p>
</li>
<li>
<p><a href="#BCEDGDEH">Creating a Working Copy Using a Database Image</a></p>
</li>
<li>
<p><a href="#BCEJDHBG">Moving Databases to an Oracle Home Managed by Rapid Home Provisioning Server</a></p>
</li>
</ul>
<a id="BCEBAAIG"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.4.2.1</span> Moving Databases from Source Working Copy to Target Working Copy</h4>
<p>To move all databases running from a source working copy to a target working copy in rolling mode:</p>
<pre dir="ltr">rhpctl move database -sourcewc myDBHome1 -patchedwc myDBHome2
</pre>
<p>To move a specific database running from a source working copy to a target working copy in rolling mode:</p>
<pre dir="ltr">rhpctl move database -sourcewc myDBHome1 -patchedwc myDBHome2 -dbname proddb
</pre>
<p>When you run the command from Rapid Home Provisioning Server or Rapid Home Provisioning Client, it moves one or all databases from the cluster and Oracle home in the source working copy to the Oracle home in the target working copy in rolling mode.</p>
</div>
<!-- class="sect3" -->
<a id="BCEDGDEH"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.4.2.2</span> Creating a Working Copy Using a Database Image</h4>
<p>You can also specify an image to create a working copy. For example, to create a target working copy and move all databases running from the source working copy to the target working copy in rolling mode:</p>
<pre dir="ltr">rhpctl move database -sourcewc myDBHome1 -patchedwc myDBHome2 -image ORACLEDB12
</pre>
<p>When you run the command from Rapid Home Provisioning Server or Rapid Home Provisioning Client, it creates a target working copy from the values specified in the image, and moves all databases running on the cluster from the Oracle home in the source working copy to the Oracle home in the target working copy in rolling mode. The storage type of the newly-created target Oracle home is the same as the source Oracle home and the storage path has the default value mentioned for the <code dir="ltr">-path</code> option in <a href="#BCEJBJBE">Table 4-2</a>. For a Rapid Home Provisioning Client operation, the default storage type is <code dir="ltr">LOCAL</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can move a source working copy from a non-shared Oracle home location to a target working copy in a shared Oracle home, but you cannot move a source working copy from a shared Oracle home location to a target working copy in a non-shared Oracle home.</div>
</div>
<!-- class="sect3" -->
<a id="BCEJDHBG"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.4.2.3</span> Moving Databases to an Oracle Home Managed by Rapid Home Provisioning Server</h4>
<p>You can move databases from an Oracle home that was not provisioned using Rapid Home Provisioning (unmanaged Oracle home) to an Oracle home provisioned and managed by Rapid Home Provisioning Server. Run the following command to bring Oracle Databases within the purview of the Rapid Home Provisioning server:</p>
<pre dir="ltr">rhpctl move database -sourcehome /u01/app/product/12.1.0/dbhome -oraclebase /u01/app/product/12.1.0/obase
-client payrollCluster -patchedwc myDBHome1 -image ORACLEDB12
</pre>
<p>When you run the command from Rapid Home Provisioning Server, it creates a new working copy <code dir="ltr">myDBHome1</code> from the database software gold image <code dir="ltr">ORACLEDB12</code> and moves all databases currently configured or running in the Oracle home <code dir="ltr">/u01/app/product/12.1.0/dbhome</code> to the new Oracle home.</p>
<p><a href="#BCEBDEAD">Table 4-3</a> lists the parameters for the <code dir="ltr">rhpctl</code> commands for patching databases.</p>
<div class="tblformal">
<p class="titleintable"><a id="sthref201"></a><a id="BCEBDEAD"></a>Table 4-3 rhpctl Parameters for Patching Databases</p>
<table class="cellalignment4795" title="rhpctl Parameters for Patching Databases" summary="This table lists the parameters in the rhpctl command and their description." dir="ltr">
<thead>
<tr class="cellalignment4786">
<th class="cellalignment4793" id="r1c1-t8">Option</th>
<th class="cellalignment4793" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r2c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-sourcewc</code> <code dir="ltr"><span class="codeinlineitalic">oracle_home_path</span></code></p>
</td>
<td class="cellalignment4794" headers="r2c1-t8 r1c2-t8">
<p>Name of the old working copy from which the database needs to be moved</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r3c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-patchedwc</code> <code dir="ltr"><span class="codeinlineitalic">oracle_home_path</span></code></p>
</td>
<td class="cellalignment4794" headers="r3c1-t8 r1c2-t8">
<p>Name of the new working copy to which the database needs to be moved</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r4c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-image</code> <code dir="ltr"><span class="codeinlineitalic">image_name</span></code></p>
</td>
<td class="cellalignment4794" headers="r4c1-t8 r1c2-t8">
<p>Name of the image</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r5c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-dbname</code> <code dir="ltr"><span class="codeinlineitalic">unique_db_name</span></code></p>
</td>
<td class="cellalignment4794" headers="r5c1-t8 r1c2-t8">
<p>Name of the database to be provisioned</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r6c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-oraclebase</code> <code dir="ltr"><span class="codeinlineitalic">oraclebase_path</span></code></p>
</td>
<td class="cellalignment4794" headers="r6c1-t8 r1c2-t8">
<p>Oracle base path for provisioning Oracle database home (Required only for ORACLEDBSOFTWARE image type)</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r7c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-client</code> <code dir="ltr"><span class="codeinlineitalic">client_cluster_name</span></code></p>
</td>
<td class="cellalignment4794" headers="r7c1-t8 r1c2-t8">
<p>Name of the client cluster</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r8c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-sourcehome</code> <code dir="ltr"><span class="codeinlineitalic">oracle_home_path</span></code></p>
</td>
<td class="cellalignment4794" headers="r8c1-t8 r1c2-t8">
<p>Source Oracle home path</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD92621" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=CWADD92621"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about <code dir="ltr">rhpctl</code> commands for Rapid Home Provisioning</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4785">
<tr>
<td class="cellalignment4794">
<table class="cellalignment4790">
<tr>
<td class="cellalignment4789"><a href="dbcacrea.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4789"><a href="postinst.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4797">
<table class="cellalignment4788">
<tr>
<td class="cellalignment4789"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4789"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4789"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4789"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4789"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4789"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>


</body></html>