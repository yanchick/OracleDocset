<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-91928"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Understanding%20the%20Oracle%20RAC%20Installed%20Configuration"></a><title>Understanding the Oracle RAC Installed Configuration</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-11T1:47:15Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Real Application Clusters Installation Guide"/>
<meta name="dcterms.identifier" content="E48917-13"/>
<meta name="dcterms.isVersionOf" content="RILIN"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2013, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="srvpool.htm" title="Previous" type="text/html"/>
<link rel="Next" href="rem_orcl.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48917-13.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">12/19</span> <!-- End Header -->
<div id="RILIN006" class="chapter"><a id="BEIHEFDB"></a>
<h1 class="chapter"><span class="secnum">7</span> <a id="sthref230"></a>Understanding the Oracle RAC Installed Configuration</h1>
<p>This chapter describes the Oracle Real Application Clusters (Oracle RAC) installed configuration. This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BEIGJCAD">Understanding the Configured Environment in Oracle RAC</a></p>
</li>
<li>
<p><a href="#CIHJBJJC">Understanding Operating System Privileges Groups</a></p>
</li>
<li>
<p><a href="#CIHEBJEB">Understanding Time Zone Settings on Cluster Nodes</a></p>
</li>
<li>
<p><a href="#CIHCFDCE">Understanding the Server Parameter File for Oracle RAC</a></p>
</li>
<li>
<p><a href="#BEIFCJBA">ORATAB Configuration for Oracle RAC</a></p>
</li>
<li>
<p><a href="#BEIBFAIE">Database Components Created Using Database Configuration Assistant</a></p>
</li>
<li>
<p><a href="#BEIHICJC">Managing Undo Tablespaces in Oracle RAC</a></p>
</li>
<li>
<p><a href="#BEIIADCC">Initialization Parameter Files</a></p>
</li>
<li>
<p><a href="#CIHIABFE">Oracle Net Services Configuration for Oracle RAC Databases</a></p>
</li>
<li>
<p><a href="#CIHFIHFJ">Performance Features of Oracle Net Services and Oracle RAC</a></p>
</li>
<li>
<p><a href="#CIHDABEE">Oracle Net Services Configuration Files and Parameters</a></p>
</li>
</ul>
<a id="BEIGJCAD"></a>
<div id="RILIN601" class="sect1">
<h2 class="sect1"><span class="secnum">7.1</span> Understanding the Configured Environment in Oracle RAC</h2>
<p>Oracle Net Configuration Assistant (NETCA) and Database Configuration Assistant (DBCA) configure your environment to meet the requirements for database creation and Oracle Enterprise Manager discovery of Oracle RAC databases.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Configuration files are created on each node in your cluster database.</div>
<p>Avoid changing host names<a id="sthref231"></a><a id="sthref232"></a> after you complete your Oracle RAC installation, including adding or deleting domain qualifications. Node names are created from the host names during an Oracle Clusterware installation and are used extensively with database processes. Nodes with changed host names must be deleted from the cluster and added back with the new host names.</p>
</div>
<!-- class="sect1" -->
<a id="CIHJBJJC"></a>
<div id="RILIN1253" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">7.2</span> Understanding Operating System Privileges Groups<a id="sthref233"></a><a id="sthref234"></a><a id="sthref235"></a><a id="sthref236"></a><a id="sthref237"></a><a id="sthref238"></a><a id="sthref239"></a><a id="sthref240"></a><a id="sthref241"></a><a id="sthref242"></a><a id="sthref243"></a><a id="sthref244"></a></h2>
<p>As an administrator, you often perform special operations such as shutting down or starting up a database, or configuring storage. Because only an administrator responsible for these administration decisions should perform these operations, system privileges for Oracle Database or Oracle Automatic Storage Management (Oracle ASM) administration require a secure authentication scheme.</p>
<p>Membership in special operating system groups enables administrators to authenticate to Oracle Database or Oracle ASM through the operating system rather than with a user name and password. This is known as <span class="bold">operating system authentication</span>. Each Oracle Database in a cluster can have its own operating system privileges groups, so that operating system authentication can be separated for each Oracle Database on a cluster. Because there can be only one Oracle Grid Infrastructure installation on a cluster, there can be only one set of operating system privileges groups for Oracle ASM.</p>
<p>During installation of Oracle Grid Infrastructure and Oracle Database, you provide the group names of operating system groups. These operating system groups are designated with the logical role of granting operating system group authentication for administration system privilege for Oracle Database and Oracle ASM.</p>
<p>In an Oracle RAC cluster, the group ID number (GID) for system privileges groups must be identical on each cluster member node. One operating system group can be designated the logical group whose members are granted all system privileges for Oracle Database and Oracle ASM, including the OINSTALL system privileges for installation owners. You can also delegate logical system privileges to two or more actual operating system groups. Oracle recommends that you designate separate operating system groups for each logical system privilege. This enables you to grant one or more subsets of administrator system privileges to database administrators. These database administrators can then perform standard database administration tasks without requiring the SYSDBA system privileges.</p>
<p>System privileges groups are listed in <a href="#CIHFGIJC">Table 7-1</a>:</p>
<div id="RILIN1254" class="tblhruleformalwide">
<p class="titleintable"><a id="sthref245"></a><a id="CIHFGIJC"></a>Table 7-1 Role-Allocated Oracle System Privileges Operating System Groups</p>
<table class="cellalignment4792" title="Role-Allocated Oracle System Privileges Operating System Groups" summary="Operating system groups whose members are granted system privileges for Oracle Database and Oracle ASM" dir="ltr">
<thead>
<tr class="cellalignment4786">
<th class="cellalignment4793" id="r1c1-t3">Logical Operating System Group Name</th>
<th class="cellalignment4793" id="r1c2-t3">Default Actual UNIX or Linux Group Name</th>
<th class="cellalignment4793" id="r1c3-t3">System Privileges Authenticated By Group Membership</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r2c1-t3" headers="r1c1-t3">
<p>OINSTALL</p>
</td>
<td class="cellalignment4794" headers="r2c1-t3 r1c2-t3">
<p><code dir="ltr">oinstall</code></p>
</td>
<td class="cellalignment4794" headers="r2c1-t3 r1c3-t3">
<p>Install system privileges for installation owners, which includes privileges to write to the central oraInventory directory for each server, and other privileges granted to Oracle binary installation owner users.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r3c1-t3" headers="r1c1-t3">
<p>OSDBA</p>
</td>
<td class="cellalignment4794" headers="r3c1-t3 r1c2-t3">
<p><code dir="ltr">dba</code></p>
</td>
<td class="cellalignment4794" headers="r3c1-t3 r1c3-t3">
<p>SYSDBA system privileges for an Oracle Database, which includes all system privileges for the database.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r4c1-t3" headers="r1c1-t3">
<p>OSOPER</p>
</td>
<td class="cellalignment4794" headers="r4c1-t3 r1c2-t3">
<p><code dir="ltr">oper</code></p>
</td>
<td class="cellalignment4794" headers="r4c1-t3 r1c3-t3">
<p>SYSOPER startup and shutdown system privileges for an Oracle Database.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r5c1-t3" headers="r1c1-t3">
<p>OSBACKUPDBA</p>
</td>
<td class="cellalignment4794" headers="r5c1-t3 r1c2-t3">
<p><code dir="ltr">backupdba</code></p>
</td>
<td class="cellalignment4794" headers="r5c1-t3 r1c3-t3">
<p>SYSBACKUP backup and recovery system privileges for an Oracle Database.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r6c1-t3" headers="r1c1-t3">
<p>OSDGDBA</p>
</td>
<td class="cellalignment4794" headers="r6c1-t3 r1c2-t3">
<p><code dir="ltr">dgdba</code></p>
</td>
<td class="cellalignment4794" headers="r6c1-t3 r1c3-t3">
<p>SYSDG system privileges to administer and monitor Oracle Data Guard.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r7c1-t3" headers="r1c1-t3">
<p>OSKMDBA</p>
</td>
<td class="cellalignment4794" headers="r7c1-t3 r1c2-t3">
<p><code dir="ltr">kmdba</code></p>
</td>
<td class="cellalignment4794" headers="r7c1-t3 r1c3-t3">
<p>SYSKM system privileges for encryption key management for applications such as Oracle Wallet Manager.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r8c1-t3" headers="r1c1-t3">
<p>OSASM</p>
</td>
<td class="cellalignment4794" headers="r8c1-t3 r1c2-t3">
<p><code dir="ltr">asmadmin</code></p>
</td>
<td class="cellalignment4794" headers="r8c1-t3 r1c3-t3">
<p>SYSASM system privileges for Oracle ASM on a cluster, which includes all system privileges for Oracle ASM storage.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r9c1-t3" headers="r1c1-t3">
<p>OSOPER for ASM</p>
</td>
<td class="cellalignment4794" headers="r9c1-t3 r1c2-t3">
<p><code dir="ltr">asmoper</code></p>
</td>
<td class="cellalignment4794" headers="r9c1-t3 r1c3-t3">
<p>SYSOPER startup and shutdown system privileges for Oracle ASM on the cluster.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r10c1-t3" headers="r1c1-t3">
<p>OSDBA for ASM</p>
</td>
<td class="cellalignment4794" headers="r10c1-t3 r1c2-t3">
<p><code dir="ltr">asmdba</code></p>
</td>
<td class="cellalignment4794" headers="r10c1-t3 r1c3-t3">
<p>SYSDBA for ASM system privileges to obtain read and write access to files managed by Oracle ASM; all Oracle Database software owners must be a member of this group.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformalwide" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN11052" href="../ADMIN/dba.htm#ADMIN11052"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information about operating system groups and Oracle Database system privileges</p>
</li>
<li>
<p><a class="olink OSTMG02600" href="../OSTMG/GUID-1A4E79BE-7D26-4FAC-BC11-B6C2F677A41F.htm#OSTMG02600"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for more information about operating system groups and Oracle ASM system privileges</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="CIHEBJEB"></a>
<div id="RILIN1083" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">7.3</span> Understanding Time Zone Settings on Cluster Nodes</h2>
<p>Oracle RAC requires that all cluster nodes have the same time zone setting. During an Oracle Grid Infrastructure for a cluster installation, the installation process determines the time zone setting of the Grid installation owner on the node where Oracle Universal Installer (OUI) runs. OUI uses that time zone value on all of the nodes as the default time zone setting for all processes that Oracle Clusterware manages. This default setting is used for databases, Oracle ASM, and any other managed processes. However, if you start an instance with SQL*Plus, you must ensure that the time zone value that Oracle RAC uses is the same as the Oracle Clusterware time zone. You can change the time zone that Oracle Clusterware uses for a database by running the command <code dir="ltr">srvctl setenv database -env &#39;TZ=</code><code dir="ltr"><span class="codeinlineitalic">time zone</span></code><code dir="ltr">&#39;</code></p>
</div>
<!-- class="sect1" -->
<a id="CIHCFDCE"></a>
<div id="RILIN1255" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">7.4</span> Understanding the Server Parameter File for Oracle RAC</h2>
<p>When you create the database, Oracle Database creates an SPFILE in the file location that you specify. This location can be either an Oracle ASM disk group or a cluster file system.</p>
<p>All instances in the cluster database use the same SPFILE at startup. Because the SPFILE is a binary file, do not directly edit the SPFILE with an editor. Instead, change SPFILE parameter settings using Oracle Enterprise Manager or ALTER SYSTEM SQL statements.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RACAD020" href="../RACAD/GUID-395DE0A5-6892-4988-B7F0-19D621DF2EB3.htm#RACAD020"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for information about creating and modifying SPFILE</div>
</div>
<!-- class="sect1" -->
<a id="BEIFCJBA"></a>
<div id="RILIN603" class="sect1">
<h2 class="sect1"><span class="secnum">7.5</span> ORATAB Configuration for Oracle RAC</h2>
<p>Oracle creates an entry for each Oracle RAC database in the <a id="sthref246"></a><code dir="ltr">oratab</code> configuration file. The <code dir="ltr">oratab</code> file is created by the <code dir="ltr">root.sh</code> script during installation, and it is updated by the Database Configuration Assistant when creating or deleting a database. The <code dir="ltr">oratab</code> file entry is also created automatically by the Database Agent when a database is first started on a node where it has not run previously. Oracle ASM Agent creates Oracle ASM <code dir="ltr">oratab</code> entries.</p>
<p>Oracle Enterprise Manager uses the <code dir="ltr">oratab</code> file during service discovery to determine the name of the Oracle RAC database, and to determine if the database should be started automatically when the system is restarted.</p>
<p>The database entry has the following syntax:</p>
<pre dir="ltr">$DB_UNIQUE_NAME:$ORACLE_HOME:N
</pre>
<p>A colon (:) is used as the field terminator. A new line terminates the entry. Lines beginning with a pound sign (#) are comments. Because all the instances of an Oracle RAC database have the same <code dir="ltr">DB_UNIQUE_NAME</code>, but each instance has its own <code dir="ltr">ORACLE_SID</code>, use the <code dir="ltr">$DB_UNIQUE_NAME</code> environment variable in the <code dir="ltr">oratab</code> file as the database entry.</p>
<p>The <code dir="ltr">$DB_UNIQUE_NAME</code> identifier for your Oracle RAC database must be unique across your enterprise. <code dir="ltr">$ORACLE_HOME</code> is the directory path to the database, and <code dir="ltr">N</code> indicates that the database should not be started at restart time. The following is an example entry for a database named <code dir="ltr">sales</code>:</p>
<pre dir="ltr">sales:/u01/app/oracle/sales:N
</pre></div>
<!-- class="sect1" -->
<a id="BEIBFAIE"></a>
<div id="RILIN604" class="sect1">
<h2 class="sect1"><span class="secnum">7.6</span> Database Components Created Using Database Configuration Assistant</h2>
<p><a id="sthref247"></a>This section describes the <a id="sthref248"></a>database components that DBCA creates, which <a id="sthref249"></a>include:</p>
<ul>
<li>
<p><a href="#BEIEGGAD">Tablespaces and Data files</a></p>
</li>
<li>
<p><a href="#BEIFGBJG">Control Files</a></p>
</li>
<li>
<p><a href="#BEIBFCJE">Online Redo Log Files</a></p>
</li>
</ul>
<a id="BEIEGGAD"></a>
<div id="RILIN1084" class="sect2">
<h3 class="sect2"><span class="secnum">7.6.1</span> Tablespaces and Data files<a id="sthref250"></a><a id="sthref251"></a><a id="sthref252"></a></h3>
<p>For both single-instance and <a id="sthref253"></a>cluster database environments, Oracle Database is divided into smaller logical areas of space known as tablespaces. Each <a id="sthref254"></a>tablespace corresponds to one or more <a id="sthref255"></a>data files on the shared storage. <a href="#CIHIHJAD">Table 7-2</a> shows the tablespace names used by an Oracle RAC database and the types of data they contain.</p>
<div id="RILIN1085" class="tblformalwide">
<p class="titleintable"><a id="sthref256"></a><a id="CIHIHJAD"></a>Table 7-2 Tablespace Names Used with Oracle Real Application Clusters Databases</p>
<table class="cellalignment4792" title=" Tablespace Names Used with Oracle Real Application Clusters Databases" summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment4786">
<th class="cellalignment4793" id="r1c1-t6">Tablespace Name</th>
<th class="cellalignment4793" id="r1c2-t6">Contents</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r2c1-t6" headers="r1c1-t6">
<p><code dir="ltr">SYSAUX</code></p>
</td>
<td class="cellalignment4794" headers="r2c1-t6 r1c2-t6">
<p>An auxiliary system tablespace that contains the <code dir="ltr">DRSYS</code> (contains data for Oracle Text), <code dir="ltr">CWMLITE</code> (contains the OLAP schemas), <code dir="ltr">XDB</code> (for XML features), <code dir="ltr">ODM</code> (for Oracle Data Mining), <code dir="ltr">INDEX</code> and <code dir="ltr">EXAMPLE</code> schemas.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r3c1-t6" headers="r1c1-t6">
<p><code dir="ltr">SYSTEM</code><a id="sthref257"></a><a id="sthref258"></a></p>
</td>
<td class="cellalignment4794" headers="r3c1-t6 r1c2-t6">
<p>Consists of the data dictionary, including definitions of tables, views, and stored procedures needed by the database. Oracle Database automatically maintains information in this tablespace.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r4c1-t6" headers="r1c1-t6">
<p><code dir="ltr">TEMP</code> <a id="sthref259"></a><a id="sthref260"></a><a id="sthref261"></a></p>
</td>
<td class="cellalignment4794" headers="r4c1-t6 r1c2-t6">
<p>Contains temporary tables and indexes created during SQL statement processing. You may need to expand this tablespace if you run a SQL statement that involves significant sorting, such as <code dir="ltr">ANALYZE COMPUTE STATISTICS</code> on a very large table, or the constructs <code dir="ltr">GROUP BY,</code> <code dir="ltr">ORDER</code> <code dir="ltr">BY</code>, or <code dir="ltr">DISTINCT</code>.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r5c1-t6" headers="r1c1-t6">
<p><code dir="ltr">UNDOTBS<a id="sthref262"></a></code><span class="italic">n</span></p>
</td>
<td class="cellalignment4794" headers="r5c1-t6 r1c2-t6">
<p>Contains undo tablespaces for each instance that DBCA creates for automatic undo management.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r6c1-t6" headers="r1c1-t6">
<p><code dir="ltr">USERS<a id="sthref263"></a><a id="sthref264"></a></code></p>
</td>
<td class="cellalignment4794" headers="r6c1-t6 r1c2-t6">
<p>Consists of application data. As you create and enter data into tables, Oracle Database fills this space with your data.</p>
</td>
</tr>
<tr class="cellalignment4786">
<td class="cellalignment4794" id="r7c1-t6" headers="r1c1-t6">
<p><code dir="ltr">EXAMPLE<a id="sthref265"></a><a id="sthref266"></a></code></p>
</td>
<td class="cellalignment4794" headers="r7c1-t6 r1c2-t6">
<p>Stores the sample schemas, if you opted to include them during database creation.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformalwide" -->
<p>You cannot alter these tablespace names when using the preconfigured database configuration option from OUI. However, you can change the names of the tablespaces if you use the advanced database creation method.</p>
<p>As mentioned, each tablespace has one or more data files on shared file systems. The data file names created by the preconfigured database configuration options vary by storage type such as Oracle ASM, or a cluster file system.</p>
</div>
<!-- class="sect2" -->
<a id="BEIFGBJG"></a>
<div id="RILIN1086" class="sect2">
<h3 class="sect2"><span class="secnum">7.6.2</span> Control Files<a id="sthref267"></a><a id="sthref268"></a></h3>
<p>The database is configured with two control files that must be stored on shared storage. Every database must have one unique control file; any additional control files configured for the database are identical copies of the original control file.</p>
<p>If a control file becomes unusable, then the database instance fails when it attempts to access the damaged control file. By multiplexing (creating multiple copies of) a control file on different disks, the database can achieve redundancy and thereby avoid a single point of failure.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CNCPT404" href="../CNCPT/physical.htm#CNCPT404"><span class="italic">Oracle Database Concepts</span></a></p>
</li>
<li>
<p><a class="olink ADMIN006" href="../ADMIN/control.htm#ADMIN006"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BEIBFCJE"></a>
<div id="RILIN1087" class="sect2">
<h3 class="sect2"><span class="secnum">7.6.3</span> Online Redo Log Files<a id="sthref269"></a><a id="sthref270"></a></h3>
<p><a id="sthref271"></a><a id="sthref272"></a>Each database instance must have at least two online <a id="sthref273"></a>redo log files. The online redo log files for a database instance are called the <span class="bold">redo thread</span>. Each Oracle RAC database instance has its own redo thread to avoid contention for a single set of online redo log files. In case of instance failure, the online redo log files must be accessible by the surviving instances. Therefore, the online redo log files for an Oracle RAC database must be placed on shared storage or Oracle ASM. If you use a file system for storage, then the file system must be a shared or cluster file system.</p>
<p>The file names of the redo log files that are created with the preconfigured database configuration option vary by storage type.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CNCPT11302" href="../CNCPT/physical.htm#CNCPT11302"><span class="italic">Oracle Database Concepts</span></a> for more information about the online redo log files</p>
</li>
<li>
<p><a class="olink RACAD704" href="../RACAD/GUID-4E4EF420-6E22-4A95-B9AB-B9C6E33D31A5.htm#RACAD704"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about storage for online redo log files</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BEIHICJC"></a>
<div id="RILIN605" class="sect1">
<h2 class="sect1"><span class="secnum">7.7</span> Managing Undo Tablespaces in Oracle RAC</h2>
<p><a id="sthref274"></a><a id="sthref275"></a>Oracle Database stores rollback or undo information in <a id="sthref276"></a>undo tablespaces. To manage undo tablespaces, Oracle recommends that you use <a id="sthref277"></a>Automatic Undo Management. Automatic Undo Management is an automated management mode for undo tablespaces that is easier to administer than manual undo management.</p>
<p>When Oracle ASM and Oracle Managed Files are used along with Automatic Undo Management, an instance that is started for the first time, and thus does not have an undo tablespace, has its undo tablespace created for it by another instance automatically. The same is also true for redo logs.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN11461" href="../ADMIN/undo.htm#ADMIN11461"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information about automatic undo management</p>
</li>
<li>
<p><a class="olink RACAD705" href="../RACAD/GUID-486BF5F7-870D-4723-BA95-35AEF4CBF9C7.htm#RACAD705"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about managing undo tablespaces</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BEIIADCC"></a>
<div id="RILIN606" class="sect1">
<h2 class="sect1"><span class="secnum">7.8</span> Initialization Parameter Files<a id="sthref278"></a></h2>
<p><a id="sthref279"></a>Oracle recommends using the <a id="sthref280"></a>server parameter file (SPFILE) for storing Oracle Database initialization parameters. Oracle recommends that you store all SPFILEs on Oracle ASM, including the Oracle ASM SPFILE. SPFILEs must be located on shared storage; all instances in a cluster database can access this parameter file.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RACAD020" href="../RACAD/GUID-395DE0A5-6892-4988-B7F0-19D621DF2EB3.htm#RACAD020"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about the creation and use of parameter files</div>
</div>
<!-- class="sect1" -->
<a id="CIHIABFE"></a>
<div id="RILIN1257" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">7.9</span> Oracle Net Services Configuration for Oracle RAC Databases</h2>
<p>Users can access an Oracle RAC database using a client/server configuration or through one or more middle tiers, with or without connection pooling. When connecting to an Oracle Database, you can use a connect descriptor or a net service name. For Oracle RAC databases, you can also use the Single Client Access Name (SCAN) to connect to any available instance of the Oracle RAC database.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CIHIHGJH">Database Services for an Oracle RAC Database</a></p>
</li>
<li>
<p><a href="#CIHFICEB">Naming Methods and Connect Descriptors</a></p>
</li>
<li>
<p><a href="#CIHEHIBJ">Easy Connect Naming Method</a></p>
</li>
<li>
<p><a href="#CIHGEGGC">Understanding SCANs</a></p>
</li>
<li>
<p><a href="#CIHDIJEG">How to Connect to an Oracle RAC Database Using SCANs</a></p>
</li>
<li>
<p><a href="#CIHEHDBF">Listener Configuration for an Oracle RAC Database</a></p>
</li>
<li>
<p><a href="#CIHCCAFC">Service Registration for an Oracle RAC Database</a></p>
</li>
<li>
<p><a href="#CIHDHIFH">How Database Connections are Created When Using SCANs</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG151" href="../NETAG/intro.htm#NETAG151"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for more information about Oracle Net Services concepts</div>
<a id="CIHIHGJH"></a>
<div id="RILIN1258" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">7.9.1</span> Database Services for an Oracle RAC Database</h3>
<p><a id="sthref281"></a>Each database is represented by one or more services. A service is identified by a service name, such as <code dir="ltr">sales.example.com</code>. A client uses a service name to identify the database it must access. During installation, Oracle RAC databases are configured with a default database service that has the same name as the database. This service can be used for performing database management tasks. Additional services should be created for client and application connections to the database.</p>
<p>A service name can be associated with multiple database instances, and an instance can be associated with multiple services. The listener acts as a mediator between the client and database instances and routes the connection request to the appropriate instance. Clients connecting to a service do not have to specify which instance they want to connect to.</p>
</div>
<!-- class="sect2" -->
<a id="CIHFICEB"></a>
<div id="RILIN1259" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">7.9.2</span> Naming Methods and Connect Descriptors</h3>
<p><a id="sthref282"></a><a id="sthref283"></a>Each net service name is associated with a connect descriptor. A <span class="bold">connect descriptor</span> provides the location of the database and the name of the database service. A connect descriptor is comprised of one or more protocol addresses of the listener and the connect information for the destination service.</p>
<p>The information needed to use a service name to create a database connection can be stored in a repository, which is represented by one or more naming methods. A <span class="bold">naming method</span> is a resolution method used by a client application to resolve a service name to a connect descriptor. Oracle Net Services offers several types of naming methods that support localized configuration on each client, or centralized configuration that can be accessed by all clients in the network.</p>
</div>
<!-- class="sect2" -->
<a id="CIHEHIBJ"></a>
<div id="RILIN1260" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">7.9.3</span> Easy Connect Naming Method</h3>
<p>The Easy Connect naming method eliminates the need to look up service names in the <code dir="ltr">tnsnames.ora</code> file or other repository for TCP/IP environments. With Easy Connect, clients use a connect string for a simple TCP/IP address, which consists of a host name, and an optional port and service name. If you use this method, then no naming or directory system is required. See <a href="#CIHJHJGE">Example 7-1, &#34;Connecting to Oracle RAC Using the Easy Connect Naming Method&#34;</a> for an example.</p>
<p>Networking elements for the Oracle Database server and clients are preconfigured for most environments. The Easy Connect naming method is enabled by default and does not require a repository. If you use a naming method other than Easy Connect, then additional configuration of Oracle Net Services may be required.</p>
</div>
<!-- class="sect2" -->
<a id="CIHGEGGC"></a>
<div id="RILIN1261" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">7.9.4</span> Understanding SCANs</h3>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CIHJEIFC">About the SCAN</a></p>
</li>
<li>
<p><a href="#CIHCBCBJ">SCAN VIP Addresses</a></p>
</li>
<li>
<p><a href="#CIHGHBFG">SCAN Listeners</a></p>
</li>
</ul>
<a id="CIHJEIFC"></a>
<div id="RILIN1262" class="sect3">
<h4 class="sect3"><span class="secnum">7.9.4.1</span> About the SCAN</h4>
<p>The SCAN is a domain name registered to at least one and up to three IP addresses, either in domain name service (DNS) or in Grid Naming Service (GNS). During the installation of Oracle Grid Infrastructure, several Oracle Clusterware resources are created for the SCAN:</p>
<ul>
<li>
<p>A SCAN virtual IP (VIP) is created for each IP address that SCAN resolves to</p>
</li>
<li>
<p>A SCAN listener is created for each SCAN VIP</p>
</li>
<li>
<p>A dependency on the SCAN VIP is configured for the SCAN listener</p>
</li>
</ul>
<p>SCANs are defined using one of two options:</p>
<ul>
<li>
<p>The SCAN is defined in DNS</p>
<p>If you configure a SCAN manually, and use DNS for name resolution, then your network administrator should create a single name for the SCAN that resolves to three IP addresses on the same network as the public network for the cluster. The SCAN name must be resolvable without the domain suffix (for example, the address <code dir="ltr">sales1-scan.example.com</code> must be resolvable using <code dir="ltr">sales1-scan</code>). The SCAN must not be assigned to a network interface, because Oracle Clusterware resolves the SCAN.</p>
<p>The default SCAN is <code dir="ltr"><span class="codeinlineitalic">cluster_name</span></code><code dir="ltr">-scan.</code><code dir="ltr"><span class="codeinlineitalic">domain_name</span></code>. For example, in a cluster that does not use GNS, if your cluster name is <code dir="ltr">sales1</code>, and your domain is <code dir="ltr">example.com</code>, then the default SCAN address is <code dir="ltr">sales1-scan.example.com:1521</code>.</p>
</li>
<li>
<p>The SCAN is defined in GNS</p>
<p>When using GNS and DHCP, Oracle Clusterware configures the VIP addresses for the SCAN name that is provided during cluster configuration. The node VIP and the three SCAN VIPs are obtained from the DHCP server when using GNS. If a new server joins the cluster, then Oracle Clusterware dynamically obtains the required VIP address from the DHCP server, updates the cluster resource, and makes the server accessible through GNS.</p>
</li>
</ul>
<p>Oracle recommends that you configure clients connecting to the cluster to use the SCAN name, rather than node VIPs used in releases before Oracle Grid Infrastructure 11<span class="italic">g</span> Release 2 (11.2). Clients connecting to Oracle RAC databases using SCANs do not have to be configured with addresses of each node that hosts a particular database or database instance. For example, if you configure policy-managed server pools for a cluster, then connecting to the database using a SCAN enables connections to server pools in that database, regardless of which nodes are allocated to the server pool. You can add or remove nodes from the database without having to reconfigure clients connecting to the database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWGEN" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=CWGEN"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for your platform for more information about SCAN configuration and requirements</div>
</div>
<!-- class="sect3" -->
<a id="CIHCBCBJ"></a>
<div id="RILIN1263" class="sect3">
<h4 class="sect3"><span class="secnum">7.9.4.2</span> SCAN VIP Addresses</h4>
<p><a id="sthref284"></a><a id="sthref285"></a><a id="sthref286"></a>SCAN virtual IP addresses (VIPs) function like node VIPs. However, unlike node VIPs, SCAN VIPs can run on any node in the cluster. Clients (users or applications) that connect using a SCAN instead of a node VIP name or address do not have to update the list of node names or addresses in their local <code dir="ltr">tnsnames.ora</code> file when nodes are added to or removed from the cluster, or when a database instance runs on a different node.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Configuring three SCAN VIPs in DNS does not by itself ensure failover of connections. Instead, the Oracle Client uses the returned SCAN VIPs to failover the connection request to a different SCAN listener. If the connection attempt to a SCAN VIP fails, then the client uses the next returned SCAN VIP address to connect. For this reason, Oracle recommends that you use Oracle Client 11<span class="italic">g</span> Release 2 or later clients for connections that use the SCAN.</div>
<p>If you use GNS for name resolution, then you only provide the SCAN name during installation (for example, <code dir="ltr">sales1-scan</code>). GNS obtains DHCP address leases for three IP addresses and resolves these addresses to the SCAN. The GNS daemon listens for registrations. When a SCAN VIP starts on a node, it registers its addresses with GNS.</p>
<p>Service requests to the cluster domain that GNS manages are routed to the GNS VIP address, which routes these requests to the GNS daemon for the cluster. When GNS receives a request from a DNS for the SCAN, it returns the registered addresses of the SCAN listeners to the DNS. The DNS then returns the three SCAN VIP addresses to the client.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD11847" href="../CWADD/GUID-494167AF-9BDC-4E61-B6EE-21B95B881272.htm#CWADD11847"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about SCAN names, listeners, and client service requests</div>
</div>
<!-- class="sect3" -->
<a id="CIHGHBFG"></a>
<div id="RILIN1264" class="sect3">
<h4 class="sect3"><span class="secnum">7.9.4.3</span> SCAN Listeners</h4>
<p><a id="sthref287"></a>During Oracle Grid Infrastructure installation, SCAN listeners are created for as many IP addresses as there are SCAN VIP addresses assigned to resolve to the SCAN. Oracle recommends that the SCAN resolves to three VIP addresses, to provide high availability and scalability. If the SCAN resolves to three addresses, then three SCAN VIPs and three SCAN listeners are created.</p>
<p>Each SCAN listener depends on its corresponding SCAN VIP. The SCAN listeners cannot start until the SCAN VIP is available on a node.</p>
<p>The addresses for the SCAN listeners resolve either through an external domain name service (DNS), or through the Grid Naming Service (GNS) within the cluster. SCAN listeners and SCAN VIPs can run on any node in the cluster. If a node where a SCAN VIP is running fails, then the SCAN VIP and its associated listener fails over to another node in the cluster. If the number of available nodes within the cluster falls to less than three, then one server hosts two SCAN VIPs and SCAN listeners.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD11847" href="../CWADD/GUID-494167AF-9BDC-4E61-B6EE-21B95B881272.htm#CWADD11847"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about SCAN listeners</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CIHDIJEG"></a>
<div id="RILIN1265" class="sect2">
<h3 class="sect2"><span class="secnum">7.9.5</span> How to Connect to an Oracle RAC Database Using SCANs</h3>
<p>Oracle recommends that you configure Oracle RAC database clients to use the SCAN and the Easy Connect naming method to connect to the database instead of configuring the <code dir="ltr">tnsnames.ora</code> file.</p>
<p><a id="sthref288"></a>Clients configured to connect to the cluster using node VIP addresses for Oracle RAC releases earlier than Oracle Database 11<span class="italic">g</span> Release 2 can continue to use their existing connection addresses; using the SCAN is not required. When an earlier release of Oracle Database is upgraded, the database is not only registered with the local listeners, but is also registered with the SCAN listeners, allowing clients to start using the SCAN to connect to that database.</p>
<div id="RILIN1266" class="example">
<p class="titleinexample"><a id="CIHJHJGE"></a>Example 7-1 Connecting to Oracle RAC Using the Easy Connect Naming Method</p>
<p>If the Oracle RAC database runs on a cluster for which the SCAN is <code dir="ltr">sales1-scan.mycluster.example.com</code>, then you can submit a connection request for the database service <code dir="ltr">oltp.example.com</code> by using a connect descriptor similar to the following:</p>
<pre dir="ltr">sqlplus system/manager@sales1-scan.mycluster.example.com:1521/oltp
</pre></div>
<!-- class="example" -->
<p>If the SCAN is resolved by DNS, then DNS returns all three SCAN VIP addresses in round-robin order to the client. If the SCAN is resolved by GNS, then DNS zone delegation sends the lookup request to GNS, which then returns all three SCAN VIP addresses in round-robin order to the client.</p>
<p>The client then uses one of the returned SCAN VIP addresses to contact a SCAN listener. When a SCAN listener receives a connection request from a client, the SCAN listener identifies the least loaded instance in the cluster that provides the requested service. It then redirects the connection request to the local listener on the node where the least loaded instance is running, and the client is given the local listener address. The local listener then creates the connection to the database instance.</p>
</div>
<!-- class="sect2" -->
<a id="CIHEHDBF"></a>
<div id="RILIN1267" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">7.9.6</span> Listener Configuration for an Oracle RAC Database</h3>
<p>An Oracle database receives connection requests through the local listener. The local listener brokers a client request, handing off the request to the server. The listener is configured with a protocol address, and clients configured with the same protocol address can send connection requests to the listener. When a connection is established, the client and Oracle database communicate directly with one another.</p>
<p><a id="sthref289"></a><a id="sthref290"></a><a id="sthref291"></a><a id="sthref292"></a><a id="sthref293"></a><a id="sthref294"></a><a id="sthref295"></a>The local listener, or default listener, is located in the Grid home when you have Oracle Grid Infrastructure installed. Local listeners are configured to respond to database connection requests, and to non-database connection requests, such as external procedures or Oracle XML Database (XDB) requests. <a id="sthref296"></a><a id="sthref297"></a>When the database starts, the Database Agent process (<code dir="ltr">oraagent</code>, previously known as <code dir="ltr">racgimon</code>) sets the <code dir="ltr">LOCAL_LISTENER</code> parameter to a connect descriptor that does not require an Oracle Net service name. The value for <code dir="ltr">LOCAL_LISTENER</code> is computed to be the endpoints of the Grid home listeners.</p>
<p>You can configure multiple Oracle Database listeners, each with a unique name, in one <code dir="ltr">listener.ora</code> file. Multiple listener configurations for database listeners are possible because each of the top-level configuration parameters has a suffix of the listener name or is the listener name itself. To configure a database to register with multiple local listeners, you must manually modify the <code dir="ltr">LOCAL_LISTENER</code> parameter.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends running only one listener for each node in most customer environments.</div>
<p>For an Oracle RAC database, the database parameter <code dir="ltr">REMOTE_LISTENER</code> identifies the SCAN listeners. <a id="sthref298"></a>The database registers with the local and SCAN listeners by using the connect description information contained in these parameters. Oracle Database 11<span class="italic">g</span> Release 2 and later instances only register with SCAN listeners as remote listeners. Upgraded databases register with SCAN listeners as remote listeners, and also continue to register with all node listeners.</p>
<p>The <code dir="ltr">REMOTE_LISTENER</code> parameter for an Oracle RAC database is always set to the SCAN address. For example, if the SCAN for the cluster is <code dir="ltr">myscan</code>, and the GNS subdomain for the cluster is <code dir="ltr">mycluster.example.com</code>, then the <code dir="ltr">REMOTE_LISTENER</code> parameter has the following value:</p>
<pre dir="ltr">myscan.mycluster.example.com:1521
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Do not set the <code dir="ltr">REMOTE_LISTENER</code> parameter for an Oracle RAC database to an Oracle Net alias that has a single address that uses the SCAN for the host name (<code dir="ltr">HOST=</code><code dir="ltr"><span class="codeinlineitalic">scan</span></code>).</div>
</div>
<!-- class="sect2" -->
<a id="CIHCCAFC"></a>
<div id="RILIN1268" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">7.9.7</span> Service Registration for an Oracle RAC Database</h3>
<p><a id="sthref299"></a><a id="sthref300"></a>An Oracle Database 12<span class="italic">c</span> Release 1 (12.1) database service automatically registers with the listeners specified in the database initialization parameters <code dir="ltr">LOCAL_LISTENER</code> and <code dir="ltr">REMOTE_LISTENER</code>. During registration, the listener registration (LREG) process sends information such as the service name, instance names, and workload information to the listeners. This feature is called <span class="bold">service registration</span>.</p>
<p>When a <a id="sthref301"></a><a id="sthref302"></a>listener starts after the Oracle instance starts, and the listener is available for service registration, registration does not occur until the next time the Oracle Database LREG process starts its discovery routine. By default, the LREG discovery routine is started every 60 seconds. To override the 60-second delay, use the SQL statement <code dir="ltr">ALTER SYSTEM REGISTER</code>. This statement forces LREG to register the service immediately.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that you create a script to run the <code dir="ltr">ALTER SYSTEM REGISTER</code> statement immediately after starting the listener. If you run this statement when the instance is registered and all services are currently registered, or while the listener is down, then the statement has no effect.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG1080" href="../NETAG/net_arch.htm#NETAG1080"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for more information about service registration</div>
</div>
<!-- class="sect2" -->
<a id="CIHDHIFH"></a>
<div id="RILIN1269" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">7.9.8</span> How Database Connections are Created When Using SCANs</h3>
<p>Based on the environment, the following actions occur when you use a SCAN to connect to an Oracle RAC database using a service name. The numbered actions correspond to the arrows shown in <a href="#CIHBAHCC">Figure 7-1</a>.</p>
<ol>
<li>
<p>The LREG process of each instance registers the database services with the default listener on the local node and with each SCAN listener, which is specified by the <code dir="ltr">REMOTE_LISTENER</code> database parameter. The listeners are dynamically updated on the amount of work being handled by the instances and dispatchers.</p>
</li>
<li>
<p>The client issues a database connection request using a connect descriptor of the form:</p>
<pre dir="ltr">orausr/@<span class="italic">scan_name</span>:1521/webapp
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you use the Easy Connect naming method, then ensure that the <code dir="ltr">sqlnet.ora</code> file on the client contains <code dir="ltr">EZCONNECT</code> in the list of naming methods specified by the <code dir="ltr">NAMES.DIRECTORY_PATH</code> parameter.</div>
</li>
<li>
<p>The client uses DNS to resolve <code dir="ltr"><span class="codeinlineitalic">scan_name</span></code>. After DNS returns the three addresses assigned to the SCAN, the client sends a connect request to the first IP address. If the connect request fails, then the client attempts to connect using the next IP address.</p>
</li>
<li>
<p>When the connect request is successful, the client connects to a SCAN listener for the cluster that hosts the <code dir="ltr">sales</code> database and has an instance offering the <code dir="ltr">webapp</code> service, which in this example is <code dir="ltr">sales1</code> and <code dir="ltr">sales2</code>. The SCAN listener compares the workload of the instances <code dir="ltr">sales1</code> and <code dir="ltr">sales2</code> and the workload of the nodes on which they run. If the SCAN listener determines that <code dir="ltr">node2</code> is less loaded than <code dir="ltr">node1</code>, then the SCAN listener selects <code dir="ltr">node2</code> and sends the address for the local listener on that node back to the client.</p>
</li>
<li>
<p>The client connects to the local listener on <code dir="ltr">node2</code>. The local listener starts a dedicated server process for the connection to the database.</p>
</li>
<li>
<p>The client connects directly to the dedicated server process on <code dir="ltr">node2</code> and accesses the <code dir="ltr">sales2</code> database instance.</p>
</li>
</ol>
<div id="RILIN1270" class="figure">
<p class="titleinfigure"><a id="CIHBAHCC"></a>Figure 7-1 Load Balancing Actions for Oracle RAC Connections That Use SCAN</p>
<img width="773" height="511" src="img/scancnpt.png" alt="Description of Figure 7-1 follows"/><br/>
<a id="sthref303" href="img_text/scancnpt.htm">Description of &#39;&#39;Figure 7-1 Load Balancing Actions for Oracle RAC Connections That Use SCAN&#39;&#39;</a><br/>
<br/></div>
<!-- class="figure" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHFIHFJ"></a>
<div id="RILIN1271" class="sect1">
<h2 class="sect1"><span class="secnum">7.10</span> Performance Features of Oracle Net Services and Oracle RAC</h2>
<p><a id="sthref304"></a>Oracle RAC databases provide the important benefits of <a id="sthref305"></a>connection load balancing and failover.</p>
<ul>
<li>
<p><a href="#CIHCEIEA">Load Balancing of Connections to Oracle RAC Databases</a></p>
</li>
<li>
<p><a href="#CIHICHAF">Connection Failover for Oracle RAC Databases</a></p>
</li>
<li>
<p><a href="#CIHHAAGJ">Shared Server Configuration for an Oracle RAC Database</a></p>
</li>
</ul>
<a id="CIHCEIEA"></a>
<div id="RILIN1272" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">7.10.1</span> Load Balancing of Connections to Oracle RAC Databases</h3>
<p>Services coordinate their sessions by registering their <span class="bold">workload</span>, or the amount of work they are currently handling, with the local listener and the SCAN listeners. Clients are redirected by the SCAN listener to a local listener on the least-loaded node that is running the instance for a particular service. This feature is called <span class="bold">load balancing</span>. The local listener either directs the client to a dispatcher process (if you configured the database to use shared servers), or directs the client to a dedicated server process.</p>
<p>There are two types of load balancing that you can implement for an Oracle RAC database: client-side and server-side load balancing. Client-side load balancing balances the connection requests across the listeners. With server-side load balancing, the SCAN listener directs a connection request to the best instance currently providing the service by using the load balancing advisory.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CWGEN" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=CWGEN"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for more information about SCAN and its configuration</p>
</li>
<li>
<p><a class="olink RACAD076" href="../RACAD/GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5.htm#RACAD076"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about failover, load balancing, and the load balancing advisory</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CIHICHAF"></a>
<div id="RILIN1273" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">7.10.2</span> Connection Failover for Oracle RAC Databases</h3>
<p>When a client issues a connection request using SCAN, the three SCAN addresses are returned to the client. If the first address fails, then the connection request to the SCAN fails over to the next address. Using multiple addresses allows a client to connect to an instance of the database even if the initial instance has failed.</p>
<p>Oracle RAC provides <a id="sthref306"></a>failover with the node VIP addresses by configuring multiple listeners on multiple nodes to manage client connection requests for the same database service. If a node fails, then the service connecting to the VIP is relocated transparently to a surviving node, enabling fast notification of the failure to the clients connecting through the VIP. If the application and client are configured with transparent application failover options, then the client is reconnected to the surviving node.</p>
</div>
<!-- class="sect2" -->
<a id="CIHHAAGJ"></a>
<div id="RILIN1274" class="sect2">
<h3 class="sect2"><span class="secnum">7.10.3</span> Shared Server Configuration for an Oracle RAC Database</h3>
<p>Standalone Oracle databases perform <a id="sthref307"></a>load balancing by distributing connections among the shared server dispatcher processes. By default, DBCA configures your Oracle RAC database with <a id="sthref308"></a>dedicated servers, not shared servers. <a id="sthref309"></a>However, if you select the <a id="sthref310"></a>shared server option when using DBCA, then DBCA configures shared servers. Oracle RAC uses both dedicated and shared server processing when shared servers are configured.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG335" href="../NETAG/advcfg.htm#NETAG335"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for more information about shared and dedicated server configurations</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHDABEE"></a>
<div id="RILIN1275" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">7.11</span> Oracle Net Services Configuration Files and Parameters</h2>
<p>Networking elements for the Oracle Database server and clients are preconfigured for most environments. The Easy Connect naming method is enabled by default and does not require a repository. If you use a naming method other than Easy Connect, then additional configuration of Oracle Net Services may be required.</p>
<p>The following sections describe the Oracle Net Services configuration files and parameters for an Oracle RAC database:</p>
<ul>
<li>
<p><a href="#CIHDJGCE">Database Initialization Parameters for Database Service Registration</a></p>
</li>
<li>
<p><a href="#BEICCHHC">Net Service Names and the tnsnames.ora File</a></p>
</li>
<li>
<p><a href="#CIHGCHEI">Net Service Names Created by DBCA</a></p>
</li>
<li>
<p><a href="#CIHICCEC">Listener Configuration and the listener.ora File</a></p>
</li>
<li>
<p><a href="#CIHFHEBA">Net Services Profile File (sqlnet.ora)</a></p>
</li>
</ul>
<a id="CIHDJGCE"></a>
<div id="RILIN1276" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">7.11.1</span> Database Initialization Parameters for Database Service Registration</h3>
<p><a id="sthref311"></a><a id="sthref312"></a>An Oracle Database 12<span class="italic">c</span> Release 1 (12.1) database service automatically registers with the listeners specified in the <code dir="ltr">LOCAL_LISTENER</code> and <code dir="ltr">REMOTE_LISTENER</code> parameters. During registration, the listener registration (LREG) process sends information such as the service name, instance names, and workload information to the listeners.</p>
<p>When a <a id="sthref313"></a><a id="sthref314"></a>listener starts after the Oracle instance starts, and the listener is available for service registration, registration does not occur until the next time the Oracle Database LREG process starts its discovery routine. By default, the LREG discovery routine is started every 60 seconds. To override the 60-second delay, use the SQL statement <code dir="ltr">ALTER SYSTEM REGISTER</code>. This statement forces LREG to register the service immediately.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that you create a script to run the <code dir="ltr">ALTER SYSTEM REGISTER</code> statement immediately after starting the listener. If you run this statement when the instance is registered and all services are currently registered, or while the listener is down, then the statement has no effect.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG1080" href="../NETAG/net_arch.htm#NETAG1080"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for more information about service registration</div>
</div>
<!-- class="sect2" -->
<a id="BEICCHHC"></a>
<div id="RILIN610" class="sect2">
<h3 class="sect2"><span class="secnum">7.11.2</span> Net Service Names and the tnsnames.ora File<a id="sthref315"></a><a id="sthref316"></a></h3>
<p><a id="sthref317"></a><a id="sthref318"></a>The installation process creates a <code dir="ltr">tnsnames.ora</code> file on each node. This file acts as a repository of net service names. Each net service name is associated with a connect identifier. A <span class="bold">connect identifier</span> is an identifier that maps a user-defined name to a connect descriptor. A connect descriptor contains the following information:</p>
<ul>
<li>
<p>The network route to the service, including the location of the listener through a protocol address</p>
</li>
<li>
<p>The <code dir="ltr">SERVICE_NAME</code> parameter, with the value set to the name of a database service</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code dir="ltr">SERVICE_NAME</code> parameter that you use in the <code dir="ltr">tnsnames.ora</code> file is singular, because you can specify only one service name. The <code dir="ltr">SERVICE_NAME</code> parameter is not the same as the <code dir="ltr">service_names</code> database initialization parameter. The <code dir="ltr">service_names</code> database parameter defaults to the global database name, a name comprising the <code dir="ltr">db_name</code> and <code dir="ltr">db_domain</code> parameters in the initialization parameter file. When you add service names using SRVCTL or Oracle Enterprise Manager Cloud Control, it lists additional cluster-managed services for the database.</div>
</li>
</ul>
<p>The <code dir="ltr">tnsnames.ora</code> file is located in both the <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">/network/admin</code> and <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code><code dir="ltr">/network/admin</code> directories. By default, the <code dir="ltr">tnsnames.ora</code> file is read from the Grid home when Oracle Grid Infrastructure is installed.</p>
<p><a id="sthref319"></a>With <a id="sthref320"></a><a id="sthref321"></a>Oracle Clusterware 11<span class="italic">g</span> Release 2 and later, the listener association no longer requires <code dir="ltr">tnsnames.ora</code> file entries. The listener associations are configured as follows:</p>
<ul>
<li>
<p>DBCA no longer sets the <code dir="ltr">LOCAL_LISTENER</code> parameter. The Oracle Clusterware agent that starts the database sets the <code dir="ltr">LOCAL_LISTENER</code> parameter dynamically, and it sets it to the actual value, not an alias. So <code dir="ltr">listener_</code><code dir="ltr"><span class="codeinlineitalic">alias</span></code> entries are no longer needed in the <code dir="ltr">tnsnames.ora</code> file.</p>
</li>
<li>
<p>The <code dir="ltr">REMOTE_LISTENER</code> parameter is configured by DBCA to reference the SCAN and SCAN port, without any need for a <code dir="ltr">tnsnames.ora</code> entry. Oracle Clusterware uses the Easy Connect naming method with <code dir="ltr"><span class="codeinlineitalic">scanname</span></code>:<code dir="ltr"><span class="codeinlineitalic">scanport</span></code>, so no listener associations for the <code dir="ltr">REMOTE_LISTENER</code> parameter are needed in the <code dir="ltr">tnsnames.ora</code> file.</p>
</li>
</ul>
<p>For example, after you create the database, to add a second listener, listening on port 2012, use a command similar to the following command to have the database register with both listeners on startup:</p>
<pre dir="ltr">SQL&gt; alter system set local_listener=&#39;(DESCRIPTION=
(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=192.168.0.61)(PORT=1521))
(ADDRESS=(PROTOCOL=TCP)(HOST=192.168.0.61)(PORT=2012))))&#39; 
scope=BOTH SID=&#39;OCRL1&#39;;
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN11120" href="../ADMIN/create.htm#ADMIN11120"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a></p>
</li>
<li>
<p><a class="olink NETAG302" href="../NETAG/listenercfg.htm#NETAG302"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for more information about the <code dir="ltr">tnsnames.ora</code> file</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CIHGCHEI"></a>
<div id="RILIN1277" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">7.11.3</span> Net Service Names Created by DBCA</h3>
<p><a id="sthref322"></a>DBCA creates net service names for connections as described in the following sections:</p>
<ul>
<li>
<p><a href="#BEIGCIJF">Net Service Names for Database Connections</a></p>
</li>
<li>
<p><a href="#BEIBHCIG">Net Service Names for Instance Connections</a></p>
</li>
</ul>
<a id="BEIGCIJF"></a>
<div id="RILIN1096" class="sect3">
<h4 class="sect3"><span class="secnum">7.11.3.1</span> Net Service Names for Database Connections</h4>
<p>Clients that connect to any instance of Oracle RAC use the SCAN in the connect descriptor. You can also use net service names to connect to Oracle RAC. The default database service created by DBCA enables Oracle Enterprise Manager to discover an Oracle RAC database, and should not be used for client connections.</p>
<p>If you use DBCA to create an Oracle RAC database that is a multitenant container database (CDB), then DBCA creates a database service that has the same name as the database. Clients that use this database service can connect to any database instance for the Oracle RAC CDB. However, if you use DBCA to add a pluggable database (PDB) to an existing CDB, then DBCA does not create a database service for the new PDB.</p>
<div id="RILIN1278" class="example">
<p class="titleinexample"><a id="sthref323"></a>Example 7-2 Example Net Service Name Entry for a Database Connection</p>
<p>This example shows a connect descriptor that is used in a <code dir="ltr">tnsnames.ora</code> file. The connect identifier in this case is the same as the cluster domain, <code dir="ltr">mycluster.example.com</code>. Instead of specifying the address for an individual server, virtual Internet Protocol (VIP) address, or a cluster node name, the connect descriptor uses the SCAN, which is <code dir="ltr">myscan.mycluster.example.com</code>.</p>
<pre dir="ltr">mycluster.example.com =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = host=myscan.mycluster.example.com)
      (PORT = 1522))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = myApp)
    )
  )
</pre>
<p>Oracle Clusterware resolves connection requests that use the net service name <code dir="ltr">mycluster.example.com</code> to any of the database instances of the <code dir="ltr">mycluster</code> database that run the <code dir="ltr">myApp</code> database service. The specific cluster node on which the instance is running is invisible to the client.</p>
</div>
<!-- class="example" -->
<p>The net service name does not require a fully qualified domain name for the server on which a database, database instance, or listener runs. SCANs are resolved by the DNS or GNS, which returns three addresses to the client. The client then submits connection requests to each address in succession until a connection is made.</p>
</div>
<!-- class="sect3" -->
<a id="BEIBHCIG"></a>
<div id="RILIN1097" class="sect3">
<h4 class="sect3"><span class="secnum">7.11.3.2</span> Net Service Names for Instance Connections</h4>
<p>Clients that connect to a particular instance of the database use the net service name for the instance.</p>
<div id="RILIN1279" class="example">
<p class="titleinexample"><a id="CIHHIBEC"></a>Example 7-3 Example Net Service Name Entry for an Instance Connection</p>
<p>In this example, the connect identifier is the same as the instance name, <code dir="ltr">mycluster1.example.com</code>. The connect descriptor uses the SCAN to locate the instance within the cluster. Clients connecting to the net service name <code dir="ltr">mycluster1.example.com</code> are connected to the <code dir="ltr">mycluster1</code> database instance of the <code dir="ltr">mycluster</code> database. Oracle Clusterware resolves that connection to the cluster node on which the instance is running. The specific cluster node on which the instance is running is invisible to the client.</p>
<pre dir="ltr">mycluster1.example.com=
  (DESCRIPTION=
    (ADDRESS=(PROTOCOL=TCP)(HOST=myscan.mycluster.example.com)(PORT=1521))
    (CONNECT_DATA=
      (SERVICE_NAME=mycluster.example.com)
      (INSTANCE_NAME=mycluster1)
    )
  )
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CIHICCEC"></a>
<div id="RILIN1280" class="sect2">
<h3 class="sect2"><span class="secnum">7.11.4</span> Listener Configuration and the listener.ora File</h3>
<p>In Oracle RAC environments, Oracle recommends that you let the Oracle Agent manage Oracle listeners for Oracle Databases. The following sections describe Oracle Net listener configuration:</p>
<ul>
<li>
<p><a href="#CIHFHJHF">Local Listener for an Oracle RAC Database</a></p>
</li>
<li>
<p><a href="#CIHCBAFI">Remote Listeners for an Oracle RAC Database</a></p>
</li>
<li>
<p><a href="#CIHEJHGE">Managing Multiple Listeners for an Oracle RAC Database</a></p>
</li>
<li>
<p><a href="#CIHBCIBH">How Oracle Database Uses the Listener File (listener.ora)</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you enable GNS, then you do not have to manually configure the listener.</div>
<a id="CIHFHJHF"></a>
<div id="RILIN1281" class="sect3">
<h4 class="sect3"><span class="secnum">7.11.4.1</span> Local Listener for an Oracle RAC Database</h4>
<p><a id="sthref324"></a><a id="sthref325"></a><a id="sthref326"></a>The local listener, or default listener, is located in the Grid home when you have Oracle Grid Infrastructure installed. The <code dir="ltr">listener.ora</code> file is located in the <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">/network/admin</code> directory. If needed, you can edit the <code dir="ltr">listener.ora</code> file for the Grid home listeners to define listener parameters for node and SCAN listeners. Do not modify the endpoints because these are automatically managed by the listener agent.</p>
<p><a id="sthref327"></a><a id="sthref328"></a>During Oracle Database creation, the <code dir="ltr">LOCAL_LISTENER</code> parameter is automatically configured to point to the local listener for the database. You can set a value manually for <code dir="ltr">LOCAL_LISTENER</code>. If you modify the value of the <code dir="ltr">LOCAL_LISTENER</code> parameter, then the Database Agent process does not automatically update this value. Oracle recommends that you leave the parameter unset so that the Database Agent process can maintain it automatically. If you do not set <code dir="ltr">LOCAL_LISTENER</code>, then the Database Agent process automatically updates the database associated with the local listener in the Grid home, even when the ports or IP address of that listener are changed.<a id="sthref329"></a></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BEICCHHC">&#34;Net Service Names and the tnsnames.ora File&#34;</a> for more information about listener associations defined in the <code dir="ltr">tnsnames.ora</code> file</p>
</li>
<li>
<p><a class="olink NETRF292" href="../NETRF/listener.htm#NETRF292"><span class="italic">Oracle Database Net Services Reference</span></a> for more information about the <code dir="ltr">listener.ora</code> file</p>
</li>
<li>
<p><a class="olink NETAG010" href="../NETAG/listenercfg.htm#NETAG010"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for information about understanding and configuring listeners</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CIHCBAFI"></a>
<div id="RILIN1282" class="sect3">
<h4 class="sect3"><span class="secnum">7.11.4.2</span> Remote Listeners for an Oracle RAC Database</h4>
<p>A <span class="bold">remote listener</span> is a listener residing on one computer that redirects connections to a database instance on another computer. For example, SCAN listeners are remote listeners. In Oracle RAC environments, Oracle recommends that you let the Oracle Agent manage the Oracle listeners for the databases.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BEICCHHC">&#34;Net Service Names and the tnsnames.ora File&#34;</a> for more information about listener associations defined in the <code dir="ltr">tnsnames.ora</code> file</p>
</li>
<li>
<p><a class="olink NETRF292" href="../NETRF/listener.htm#NETRF292"><span class="italic">Oracle Database Net Services Reference</span></a> for more information about the <code dir="ltr">listener.ora</code> file</p>
</li>
<li>
<p><a class="olink NETRF292" href="../NETRF/listener.htm#NETRF292"><span class="italic">Oracle Database Net Services Reference</span></a> for an overview of listeners</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CIHEJHGE"></a>
<div id="RILIN1283" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">7.11.4.3</span> Managing Multiple Listeners for an Oracle RAC Database</h4>
<p>To administer Oracle Database 12<span class="italic">c</span> Release 1 (12.1) local and SCAN listeners using the <code dir="ltr">lsnrctl</code> command, set your <code dir="ltr">ORACLE_HOME</code> environment variable to the path for the Grid home. Do not attempt to use the <code dir="ltr">lsnrctl</code> commands from Oracle home locations for earlier releases, because they cannot be used with Oracle Database 12<span class="italic">c</span> Release 1 (12.1).</p>
<p>For listeners not managed by Oracle Clusterware, you can use a non-default location for the <code dir="ltr">listener.ora</code> file by setting the <code dir="ltr">TNS_ADMIN</code> environment variable or registry value to point to the directory that contains the Oracle Net Services configuration files. To use a non-default location for a listener managed by Oracle Clusterware, you must use SRVCTL and the <code dir="ltr">setenv</code> command to modify the value of <code dir="ltr">TNS_ADMIN</code> for each listener.</p>
</div>
<!-- class="sect3" -->
<a id="CIHBCIBH"></a>
<div id="RILIN1284" class="sect3">
<h4 class="sect3"><span class="secnum">7.11.4.4</span> How Oracle Database Uses the Listener File (listener.ora)</h4>
<p>The <code dir="ltr">listener.ora</code> file is the configuration file for a listener. It can include the protocol addresses it is accepting connection requests on, a list of the database and other services it is listening for, and control parameters used by the listener. You can modify the configuration of the listeners used by Oracle Clusterware and Oracle RAC with Server Control Utility (SRVCTL) commands, or by using NETCA. Manual editing of the <code dir="ltr">listener.ora</code> file is not required.</p>
<p>Each listener is configured with one or more protocol addresses that specify its listening endpoints. The listener agent dynamically updates endpoints with the listener. Starting with Oracle Database 11<span class="italic">g</span> Release 2, the <code dir="ltr">listener.ora</code> file now only contains an IPC key and the following information:</p>
<p><code dir="ltr">(ADDRESS = (PROTOCOL=TCP)(HOST=)(PORT=1521))</code></p>
<p>In the previous example, the protocol <code dir="ltr">ADDRESS</code> refers implicitly to the <code dir="ltr">HOST</code> endpoint of the local node. The <code dir="ltr">listener.ora</code> file is the same on every node for an Oracle RAC database. Listening endpoints, such as the port numbers, are dynamically registered with the listener.</p>
<p>Before you install Oracle RAC, during the Oracle Grid Infrastructure installation, NETCA creates and starts a default listener in the Grid home called <code dir="ltr">LISTENER</code>. The listener is configured with default protocol listening addresses. The listener is configured to respond to connection requests that are directed to one protocol address specified during installation.</p>
<p><a id="sthref330"></a><a id="sthref331"></a>During the Oracle RAC installation, the Oracle RAC database uses the listener in the Grid home, and configures service information about the Oracle RAC database. The database services automatically register their information with the listener, such as the service name, instance names, and load information. Dynamic service registration eliminates the need for static configuration of database services. However, static service configuration is required if you plan to use Oracle Enterprise Manager.</p>
<div id="RILIN1285" class="example">
<p class="titleinexample"><a id="sthref332"></a>Example 7-4 Example listener.ora File for an Oracle RAC Node</p>
<p>The following is an example <code dir="ltr">listener.ora</code> file as it would appear after installation, with an entry for a node named <code dir="ltr">node1</code> and a SCAN listener.</p>
<pre dir="ltr">LISTENER_SCAN1=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=IPC)(KEY=LISTENER_
SCAN1))))               # line added by Agent
LISTENER_NODE1=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=IPC) (KEY=LISTENER))))
          # line added by Agent
# listener.ora.mycluster Network Configuration File:
/u01/app/oracle/product/12.1.0/dbhome_1/network/admin/listener.ora.mycluster
# Generated by Oracle configuration tools.
 
LISTENER_NODE1 =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
    )
  )
 
ENABLE_GLOBAL_DYNAMIC_ENDPOINT_LISTENER_NODE1=ON              # line added by Agent
ENABLE_GLOBAL_DYNAMIC_ENDPOINT_LISTENER_SCAN2=ON              # line added by Agent
ENABLE_GLOBAL_DYNAMIC_ENDPOINT_LISTENER_SCAN1=ON              # line added by Agent
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CIHFHEBA"></a>
<div id="RILIN1286" class="sect2">
<h3 class="sect2"><span class="secnum">7.11.5</span> Net Services Profile File (sqlnet.ora)</h3>
<p><a id="sthref333"></a><a id="sthref334"></a><a id="sthref335"></a><a id="sthref336"></a><a id="sthref337"></a>Oracle Universal Installer starts Oracle Net Configuration Assistant (NETCA) after the database software is installed. NETCA creates the Oracle Net Services profile, or the <code dir="ltr">sqlnet.ora</code> file. In an Oracle Grid Infrastructure installation, the <code dir="ltr">sqlnet.ora</code> file is located in the following directory by default:</p>
<pre dir="ltr"><span class="italic">Grid_home</span>/network/admin
</pre>
<p>For the local listener for the Oracle RAC database instance, the default location of the <code dir="ltr">sqlnet.ora</code> file is <code dir="ltr">$ORACLE_HOME/network/admin</code> directory. In this directory there is a default <code dir="ltr">sqlnet.ora</code> file. Also, you can find a sample <code dir="ltr">sqlnet.ora</code> file in the subdirectory <code dir="ltr">sample</code>.</p>
<p>During installation of the Oracle RAC software, NETCA creates the following entry in the <code dir="ltr">sqlnet.ora</code> file, where <code dir="ltr">$ORACLE_BASE</code> is the path to the Oracle base directory for the Oracle RAC installation:</p>
<pre dir="ltr">NAMES.DIRECTORY_PATH=(TNSNAMES, EZCONNECT)
ADR_BASE =$ORACLE_BASE
</pre>
<p><a id="sthref338"></a><a id="sthref339"></a><a id="sthref340"></a><a id="sthref341"></a><a id="sthref342"></a><a id="sthref343"></a>The parameter <code dir="ltr">NAMES.DIRECTORY_PATH</code> specifies the priority order of the naming methods to use to resolve connect identifiers to connect descriptors.</p>
<p>The <code dir="ltr">ADR_BASE</code> parameter specifies the base directory into which tracing and logging incidents are stored when Automatic Diagnostic Repository (ADR) is enabled for the database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink NETAG091" href="../NETAG/profile.htm#NETAG091"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for more information about the <code dir="ltr">sqlnet.ora</code> file</p>
</li>
<li>
<p><a class="olink CNCPT1556" href="../CNCPT/cmntopc.htm#CNCPT1556"><span class="italic">Oracle Database Concepts</span></a> for more information about authentication</p>
</li>
<li>
<p><a class="olink ADMIN11261" href="../ADMIN/diag.htm#ADMIN11261"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information about ADR</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4785">
<tr>
<td class="cellalignment4794">
<table class="cellalignment4790">
<tr>
<td class="cellalignment4789"><a href="srvpool.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4789"><a href="rem_orcl.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4797">
<table class="cellalignment4788">
<tr>
<td class="cellalignment4789"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4789"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4789"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4789"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4789"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4789"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>