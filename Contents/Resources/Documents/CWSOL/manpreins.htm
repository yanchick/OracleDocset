<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-5022"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/How%20to%20Complete%20Installation%20Prerequisite%20Tasks%20Manually"></a><title>How to Complete Installation Prerequisite Tasks Manually</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-11T3:24:51Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Grid Infrastructure Installation Guide"/>
<meta name="dcterms.identifier" content="E51120-13"/>
<meta name="dcterms.isVersionOf" content="CWSOL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2013, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="concepts.htm" title="Previous" type="text/html"/>
<link rel="Next" href="index.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E51120-13.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">19/20</span> <!-- End Header -->
<div id="CWSOL515" class="appendix"><a id="CJAGEJCF"></a>
<h1 class="appendix"><span class="secnum">E</span> How to Complete Installation Prerequisite Tasks Manually</h1>
<p>This appendix provides instructions for how to complete configuration tasks manually that Cluster Verification Utility (CVU) and the installer (OUI) normally complete during installation. Use this appendix as a guide if you cannot use the fixup script.</p>
<p>This appendix contains the following information:</p>
<ul>
<li>
<p><a href="#BABJBAEB">Configuring SSH Manually on All Cluster Nodes</a></p>
</li>
<li>
<p><a href="#BABCHAED">Configuring Kernel Parameters on Oracle Solaris</a></p>
</li>
<li>
<p><a href="#BABEDHHJ">Configuring Shell Limits for Oracle Solaris</a></p>
</li>
<li>
<p><a href="#BABBIFCH">Setting UDP and TCP Kernel Parameters</a></p>
</li>
</ul>
<a id="BABJBAEB"></a>
<div id="CWSOL364" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">E.1</span> Configuring SSH Manually on All Cluster Nodes<a id="sthref785"></a></h2>
<p>Passwordless SSH configuration is a mandatory installation requirement. SSH is used during installation to configure cluster member nodes, and SSH is used after installation by configuration assistants, Oracle Enterprise Manager, OPatch, and other features.</p>
<p>Automatic Passwordless SSH configuration using OUI creates RSA encryption keys on all nodes of the cluster. If you have system restrictions that require you to set up SSH manually, such as using DSA keys, then use this procedure as a guide to set up passwordless SSH.</p>
<p>In the examples that follow, the Oracle software owner listed is the <code dir="ltr">grid</code> user.</p>
<p>This section contains the following:</p>
<ul>
<li>
<p><a href="#BABDAIGB">Checking Existing SSH Configuration on the System</a></p>
</li>
<li>
<p><a href="#BABFIDDD">Configuring SSH on Cluster Nodes</a></p>
</li>
<li>
<p><a href="#BABHDEIC">Enabling SSH User Equivalency on Cluster Nodes</a></p>
</li>
</ul>
<a id="BABDAIGB"></a>
<div id="CWSOL365" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">E.1.1</span> Checking Existing SSH Configuration on the System<a id="sthref786"></a><a id="sthref787"></a></h3>
<p>To determine if SSH is running, enter the following command:</p>
<pre dir="ltr">$ pgrep sshd
</pre>
<p>If SSH is running, then the response to this command is one or more process ID numbers. In the home directory of the installation software owner (<code dir="ltr">grid</code>, <code dir="ltr">oracle</code>), use the command <code dir="ltr">ls -al</code> to ensure that the <code dir="ltr">.ssh</code> directory is owned and writable only by the user.</p>
<p>You need either an RSA or a DSA key for the SSH protocol. RSA is used with the SSH 1.5 protocol, while DSA is the default for the SSH 2.0 protocol. With OpenSSH, you can use either RSA or DSA. The instructions that follow are for SSH1. If you have an SSH2 installation, and you cannot use SSH1, then refer to your SSH distribution documentation to configure SSH1 compatibility or to configure SSH2 with DSA.</p>
</div>
<!-- class="sect2" -->
<a id="BABFIDDD"></a>
<div id="CWSOL366" class="sect2">
<h3 class="sect2"><span class="secnum">E.1.2</span> Configuring SSH on Cluster Nodes</h3>
<p>To configure SSH, you must first create RSA or DSA keys on each cluster node, and then copy all the keys generated on all cluster node members into an authorized keys file that is identical on each node. Note that the SSH files must be readable only by <code dir="ltr">root</code> and by the software installation user (<code dir="ltr">oracle</code>, <code dir="ltr">grid</code>), as SSH ignores a private key file if it is accessible by others. In the examples that follow, the DSA key is used.</p>
<p>You must configure SSH separately for each Oracle software installation owner that you intend to use for installation.</p>
<p>To configure SSH, complete the following:</p>
<div id="CWSOL367" class="sect3"><a id="sthref788"></a>
<h4 class="sect3"><span class="secnum">E.1.2.1</span> Create SSH Directory, and Create SSH Keys On Each Node</h4>
<p>Complete the following steps on each node:</p>
<ol>
<li>
<p>Log in as the software owner (in this example, the <code dir="ltr">grid</code> user).</p>
</li>
<li>
<p>To ensure that you are logged in as <code dir="ltr">grid</code>, and to verify that the user ID matches the expected user ID you have assigned to the <code dir="ltr">grid</code> user, enter the commands <code dir="ltr">id</code> and <code dir="ltr">id grid</code>. Ensure that Oracle user group and user and the user terminal window process you are using have group and user IDs are identical. For example:</p>
<pre dir="ltr">$ id 
uid=502(grid) gid=501(oinstall) groups=501(oinstall),502(grid,asmadmin,asmdba)
$ id grid
uid=502(grid) gid=501(oinstall) groups=501(oinstall),502(grid,asmadmin,asmdba)
</pre></li>
<li>
<p>If necessary, create the <code dir="ltr">.ssh</code> directory in the <code dir="ltr">grid</code> user&#39;s home directory, and set permissions on it to ensure that only the oracle user has read and write permissions:</p>
<pre dir="ltr">$ mkdir ~/.ssh
$ chmod 700 ~/.ssh
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
<a id="sthref789"></a>SSH configuration will fail if the permissions are not set to 700.</div>
</li>
<li>
<p>Enter the following command:</p>
<pre dir="ltr">$ /usr/bin/ssh-keygen -t dsa
</pre>
<p>At the prompts, accept the default location for the key file (press <span class="bold">Enter</span>).</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
SSH with passphrase is not supported for Oracle Clusterware 11<span class="italic">g</span> Release 2 and later releases.</div>
<p>This command writes the DSA public key to the <code dir="ltr">~/.ssh/id_dsa.pub</code> file and the private key to the <code dir="ltr">~/.ssh/id_dsa</code> file.</p>
<p>Never distribute the private key to anyone not authorized to perform Oracle software installations.</p>
</li>
<li>
<p>Repeat steps 1 through 4 on each node that you intend to make a member of the cluster, using the DSA key.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<div id="CWSOL368" class="sect3"><a id="sthref790"></a>
<h4 class="sect3"><span class="secnum">E.1.2.2</span> Add All Keys to a Common authorized_keys File</h4>
<p>Complete the following steps:</p>
<ol>
<li>
<p>On the local node, change directories to the <code dir="ltr">.ssh</code> directory in the Oracle Grid Infrastructure owner&#39;s home directory (typically, either <code dir="ltr">grid</code> or <code dir="ltr">oracle</code>).</p>
<p>Then, add the DSA key to the <code dir="ltr">authorized_keys</code> file using the following commands:</p>
<pre dir="ltr">$ cat id_dsa.pub  authorized_keys
$ ls
</pre>
<p>In the <code dir="ltr">.ssh</code> directory, you should see the <code dir="ltr">id_dsa.pub</code> keys that you have created, and the file <code dir="ltr">authorized_keys</code>.</p>
</li>
<li id="BABJHBEF">
<p>On the local node, use SCP (Secure Copy) or SFTP (Secure FTP) to copy the <code dir="ltr">authorized_keys</code> file to the <code dir="ltr">oracle</code> user <code dir="ltr">.ssh</code> directory on a remote node. The following example is with SCP, on a node called node2, with the Oracle Grid Infrastructure owner <code dir="ltr">grid</code>, where the <code dir="ltr">grid</code> user path is <code dir="ltr">/home/grid</code>:</p>
<pre dir="ltr">[grid@node1 .ssh]$ scp authorized_keys node2:/home/grid/.ssh/
</pre>
<p>You are prompted to accept a DSA key. Enter Yes, and you see that the node you are copying to is added to the <code dir="ltr">known_hosts</code> file.</p>
<p>When prompted, provide the password for the grid user, which should be the same on all nodes in the cluster. The <code dir="ltr">authorized_keys</code> file is copied to the remote node.</p>
<p>Your output should be similar to the following, where <code dir="ltr">xxx</code> represents parts of a valid IP address:</p>
<pre dir="ltr">[grid@node1 .ssh]$ scp authorized_keys node2:/home/grid/.ssh/
The authenticity of host &#39;node2 (xxx.xxx.173.152) can&#39;t be established.
DSA key fingerprint is 7e:60:60:ae:40:40:d1:a6:f7:4e:zz:me:a7:48:ae:f6:7e.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added &#39;node1,xxx.xxx.173.152&#39; (dsa) to the list
of known hosts
grid@node2&#39;s password:
authorized_keys       100%             828             7.5MB/s      00:00
</pre></li>
<li id="BABCIEDC">
<p>Using SSH, log in to the node where you copied the <code dir="ltr">authorized_keys</code> file. Then change to the <code dir="ltr">.ssh</code> directory, and using the <code dir="ltr">cat</code> command, add the DSA keys for the second node to the <code dir="ltr">authorized_keys</code> file, clicking <span class="bold">Enter</span> when you are prompted for a password, so that passwordless SSH is set up:</p>
<pre dir="ltr">[grid@node1 .ssh]$ ssh node2
[grid@node2 grid]$ cd .ssh
[grid@node2 ssh]$ cat id_dsa.pub   authorized_keys
</pre>
<p>Repeat steps 2 and 3 from each node to each other member node in the cluster.</p>
<p>When you have added keys from each cluster node member to the <code dir="ltr">authorized_keys</code> file on the last node you want to have as a cluster node member, then use <code dir="ltr">scp</code> to copy the <code dir="ltr">authorized_keys</code> file with the keys from all nodes back to each cluster node member, overwriting the existing version on the other nodes.</p>
<p>To confirm that you have all nodes in the <code dir="ltr">authorized_keys</code> file, enter the command <code dir="ltr">more authorized_keys</code>, and determine if there is a DSA key for each member node. The file lists the type of key (<code dir="ltr">ssh-dsa</code>), followed by the key, and then followed by the user and server. For example:</p>
<pre dir="ltr">ssh-dsa AAAABBBB . . . = grid@node1
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code dir="ltr">grid</code> user&#39;s <code dir="ltr">/.ssh/authorized_keys</code> file on every node must contain the contents from all of the <code dir="ltr">/.ssh/id_dsa.pub</code> files that you generated on all cluster nodes.</div>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BABHDEIC"></a>
<div id="CWSOL369" class="sect2">
<h3 class="sect2"><span class="secnum">E.1.3</span> Enabling SSH User Equivalency on Cluster Nodes</h3>
<p>After you have copied the <code dir="ltr">authorized_keys</code> file that contains all keys to each node in the cluster, complete the following procedure, in the order listed. In this example, the Oracle Grid Infrastructure software owner is named <code dir="ltr">grid</code>:</p>
<ol>
<li>
<p>On the system where you want to run OUI, log in as the <code dir="ltr">grid</code> user.</p>
</li>
<li id="BABDDIEI">
<p>Use the following command syntax, where <code dir="ltr"><span class="codeinlineitalic">hostname1</span></code>, <code dir="ltr"><span class="codeinlineitalic">hostname2</span></code>, and so on, are the public host names (alias and fully qualified domain name) of nodes in the cluster to run SSH from the local node to each node, including from the local node to itself, and from each node to each other node:</p>
<pre dir="ltr">[grid@<span class="italic">nodename</span>]$ ssh <span class="italic">hostname1</span> date
[grid@<span class="italic">nodename</span>]$ ssh <span class="italic">hostname2</span> date
    .
    .
    .
</pre>
<p>For example:</p>
<pre dir="ltr">[grid@node1 grid]$ ssh node1 date
The authenticity of host &#39;node1 (xxx.xxx.100.101)&#39; can&#39;t be established.
DSA key fingerprint is 7z:60:60:zz:48:48:z1:a0:f7:4e.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added &#39;node1,xxx.xxx.100.101&#39; (DSA) to the list of
known hosts.
Mon Dec 4 11:08:13 PST 2006
[grid@node1 grid]$ ssh node1.example.com date
The authenticity of host &#39;node1.example.com (xxx.xxx.100.101)&#39; can&#39;t be
established.
DSA key fingerprint is 7z:60:60:zz:48:48:z1:a0:f7:4e.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added &#39;node1.example.com,xxx.xxx.100.101&#39; (DSA) to the
list of known hosts.
Mon Dec 4 11:08:13 PST 2006
[grid@node1 grid]$ ssh node2 date
Mon Dec 4 11:08:35 PST 2006
.
.
.
</pre>
<p>At the end of this process, the public host name for each member node should be registered in the <code dir="ltr">known_hosts</code> file for all other cluster nodes.</p>
<p>If you are using a remote client to connect to the local node, and you see a message similar to &#34;Warning: No xauth data; using fake authentication data for <a id="sthref791"></a><a id="sthref792"></a>X11 forwarding,&#34; then this means that your authorized keys file is configured correctly, but your SSH configuration has X11 forwarding enabled. To correct this issue, proceed to <a href="usrgrps.htm#CHDHFJEA">Section 5.2.4, &#34;Setting Remote Display and X11 Forwarding Configuration.&#34;</a></p>
</li>
<li>
<p>Repeat step 2 on each cluster node member.</p>
</li>
</ol>
<p>If you have configured SSH correctly, then you can now use the <code dir="ltr">ssh</code> or <code dir="ltr">scp</code> commands without being prompted for a password. For example:</p>
<pre dir="ltr">[grid@node1 ~]$ ssh node2 date
Mon Feb 26 23:34:42 UTC 2009
[grid@node1 ~]$ ssh node1 date
Mon Feb 26 23:34:48 UTC 2009
</pre>
<p>If any node prompts for a password, then verify that the <code dir="ltr">~/.ssh/authorized_keys</code> file on that node contains the correct public keys, and that you have created an Oracle software owner with identical group membership and IDs.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABCHAED"></a>
<div id="CWSOL370" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">E.2</span> Configuring Kernel Parameters on Oracle Solaris <a id="sthref793"></a><a id="sthref794"></a><a id="sthref795"></a><a id="sthref796"></a><a id="sthref797"></a></h2>
<p>This section contains the following:</p>
<ul>
<li>
<p><a href="#BABGDIEE">Minimum Parameter Settings for Installation</a></p>
</li>
<li>
<p><a href="#CHDFIHFB">Requirements for Shared Memory Resources on Oracle Solaris</a></p>
</li>
<li>
<p><a href="#CHDDIDGD">Checking Shared Memory Resource Controls on Oracle Solaris</a></p>
</li>
<li>
<p><a href="#BABCGJAJ">Viewing and Modifying Kernel Parameter Values</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
The kernel parameter and shell limit values shown in the following section are minimum installation values only. For production database systems, Oracle recommends that you tune kernel resources to optimize the performance of the system.
<p>See <span class="italic">Managing System Information, Processes, and Performance in Oracle Solaris 11.1</span> for more information about kernel resource management at the following URL:</p>
<p><code dir="ltr"><a href="http://docs.oracle.com/cd/E26502_01/index.html">http://docs.oracle.com/cd/E26502_01/index.html</a></code></p>
</div>
<a id="BABGDIEE"></a>
<div id="CWSOL881" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">E.2.1</span> Minimum Parameter Settings for Installation</h3>
<p>During installation, you can generate and run the Fixup script to check and set the kernel parameter values required for successful installation of the database. This script updates required kernel parameters if necessary to minimum values.</p>
<p>If you cannot use the fixup script, then review the following table to set the values manually. On Oracle Solaris 10, verify that the kernel parameters shown in the following table are set to values greater than or equal to the minimum value shown.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
On Oracle Solaris 10, you are not required to make changes to the /etc/system file to implement the System V IPC. Oracle Solaris 10 uses the resource control facility for its implementation.</div>
<div class="inftblinformal">
<table class="cellalignment1401" title="Resource Control Recommended Values for Solaris 10" summary="Kernel parameters and their resource control counterparts, with recommended resource control values" dir="ltr">
<thead>
<tr class="cellalignment1392">
<th class="cellalignment1402" id="r1c1-t7">Resource Control</th>
<th class="cellalignment1402" id="r1c2-t7">Minimum Value</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1392">
<td class="cellalignment1398" id="r2c1-t7" headers="r1c1-t7"><a id="sthref798"></a><a id="sthref799"></a><code dir="ltr">project.max-sem-ids</code></td>
<td class="cellalignment1398" headers="r2c1-t7 r1c2-t7">100</td>
</tr>
<tr class="cellalignment1392">
<td class="cellalignment1398" id="r3c1-t7" headers="r1c1-t7"><code dir="ltr">process.max-sem-nsems</code><a id="sthref800"></a><a id="sthref801"></a></td>
<td class="cellalignment1398" headers="r3c1-t7 r1c2-t7">256</td>
</tr>
<tr class="cellalignment1392">
<td class="cellalignment1398" id="r4c1-t7" headers="r1c1-t7"><code dir="ltr">project.max-shm-memory</code><a id="sthref802"></a><a id="sthref803"></a></td>
<td class="cellalignment1398" headers="r4c1-t7 r1c2-t7">This value varies according to the size of the RAM. See <a href="#CHDFIHFB">Section E.2.2</a> for minimum values.</td>
</tr>
<tr class="cellalignment1392">
<td class="cellalignment1398" id="r5c1-t7" headers="r1c1-t7"><code dir="ltr">project.max-shm-ids</code><a id="sthref804"></a><a id="sthref805"></a></td>
<td class="cellalignment1398" headers="r5c1-t7 r1c2-t7">100</td>
</tr>
<tr class="cellalignment1392">
<td class="cellalignment1398" id="r6c1-t7" headers="r1c1-t7"><code dir="ltr"><a id="sthref806"></a>tcp_smallest_anon_port</code></td>
<td class="cellalignment1398" headers="r6c1-t7 r1c2-t7">9000</td>
</tr>
<tr class="cellalignment1392">
<td class="cellalignment1398" id="r7c1-t7" headers="r1c1-t7"><a id="sthref807"></a><code dir="ltr">tcp_largest_anon_port</code></td>
<td class="cellalignment1398" headers="r7c1-t7 r1c2-t7">65500</td>
</tr>
<tr class="cellalignment1392">
<td class="cellalignment1398" id="r8c1-t7" headers="r1c1-t7"><code dir="ltr">udp_smallest_anon_port</code></td>
<td class="cellalignment1398" headers="r8c1-t7 r1c2-t7">9000</td>
</tr>
<tr class="cellalignment1392">
<td class="cellalignment1398" id="r9c1-t7" headers="r1c1-t7"><code dir="ltr">udp_largest_anon_port</code></td>
<td class="cellalignment1398" headers="r9c1-t7 r1c2-t7">65500</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li><code dir="ltr">project.max-shm-memory</code> resource control = cumulative sum of all shared memory allocated on each Oracle Database instance started under the corresponding project</li>
<li>
<p>The <code dir="ltr">project.max-shm-memory</code> resource control value assumes that no other application is using the shared memory segment from this project other than the Oracle instances. If applications, other than the Oracle instances are using the shared memory segment, then you must add that shared memory usage to the <code dir="ltr">project.max-shm-memory</code> resource control value.</p>
</li>
<li>
<p>Ensure that <code dir="ltr">memory_target</code> (or <code dir="ltr">max_sga_size</code>) does not exceed <code dir="ltr">process.max-address-space</code> and <code dir="ltr">project.max-shm-memory</code>. For more information, see My Oracle Support Note 1370537.1 at:</p>
<p><code dir="ltr"><a href="https://support.oracle.com">https://support.oracle.com</a></code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDFIHFB"></a>
<div id="CWSOL882" class="sect2">
<h3 class="sect2"><span class="secnum">E.2.2</span> <a id="sthref808"></a>Requirements for Shared Memory Resources on Oracle Solaris</h3>
<p>The resource control <code dir="ltr">project.max-shm-memory</code> enables you to set the maximum shared memory for a project.</p>
<p><a href="#CHDGGDJD">Table E-1</a> shows the installation minimum settings for project.max-shm-memory:</p>
<div id="CWSOL883" class="tblformal">
<p class="titleintable"><a id="sthref809"></a><a id="CHDGGDJD"></a>Table E-1 Requirement for Resource Control project.max-shm-memory</p>
<table class="cellalignment1405" title="Requirement for Resource Control project.max-shm-memory" summary="Table containing memory requirement for project.max-shm-memory" dir="ltr">
<thead>
<tr class="cellalignment1392">
<th class="cellalignment1402" id="r1c1-t9">RAM</th>
<th class="cellalignment1402" id="r1c2-t9">project.max-shm-memory setting</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1392">
<td class="cellalignment1398" id="r2c1-t9" headers="r1c1-t9">
<p>1 GB to 16 GB</p>
</td>
<td class="cellalignment1398" headers="r2c1-t9 r1c2-t9">
<p>Half the size of the physical memory</p>
</td>
</tr>
<tr class="cellalignment1392">
<td class="cellalignment1398" id="r3c1-t9" headers="r1c1-t9">
<p>Greater than 16 GB</p>
</td>
<td class="cellalignment1398" headers="r3c1-t9 r1c2-t9">
<p>At least 8 GB</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" -->
<a id="CHDDIDGD"></a>
<div id="CWSOL818" class="sect2">
<h3 class="sect2"><span class="secnum">E.2.3</span> Checking Shared Memory Resource Controls on Oracle Solaris</h3>
<p>Use the <code dir="ltr">prctl</code> command to make runtime interrogations of and modifications to the resource controls associated with an active process, task, or project on the system.</p>
<p>To view the current value of <code dir="ltr">project.max-shm-memory</code> set for a project and system-wide, enter the following command:</p>
<pre dir="ltr"># prctl -n project.max-shm-memory -i project <span class="codeinlineitalic">default</span>
</pre>
<p>where <code dir="ltr">default</code> is the project ID, which you can obtain by running the command <code dir="ltr">id -p</code></p>
<p>For example, to change the setting for <code dir="ltr">project.max-shm-memory</code> to 6 GB for the project default without a system reboot, enter:</p>
<pre dir="ltr">prctl -n project.max-shm-memory -v 6gb -r -i project default
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Administering Oracle Solaris 11</span> at:
<p><code dir="ltr"><a href="http://docs.oracle.com/cd/E26502_01/index.html">http://docs.oracle.com/cd/E26502_01/index.html</a></code></p>
</div>
</div>
<!-- class="sect2" -->
<a id="BABCGJAJ"></a>
<div id="CWSOL371" class="sect2">
<h3 class="sect2"><span class="secnum">E.2.4</span> Viewing and Modifying Kernel Parameter Values</h3>
<p>On Oracle Solaris 10 and later releases, use the following procedure to view the current value specified for resource controls, and to change them if necessary:</p>
<ol>
<li>
<p>To view the current values of the resource control, enter the following commands:</p>
<pre dir="ltr">$ id -p // to verify the project id
uid=100(oracle) gid=100(dba) projid=1 (group.dba)
$ prctl -n project.max-shm-memory -i project group.dba
$ prctl -n project.max-sem-ids -i project group.dba
</pre></li>
<li>
<p>If you must change any of the current values, then:</p>
<ol>
<li>
<p>To modify the value of max-shm-memory to 6 GB:</p>
<pre dir="ltr"># prctl -n project.max-shm-memory -v 6gb -r -i project group.dba 
</pre></li>
<li>
<p>To modify the value of max-sem-ids to 256:</p>
<pre dir="ltr"># prctl -n project.max-sem-ids -v 256 -r -i project group.dba
</pre></li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
When you use the command <code dir="ltr">prctl</code> (Resource Control) to change system parameters, you do not need to restart the system for these parameter changes to take effect. However, the changed parameters do not persist after a system restart.</div>
</li>
</ol>
<p>Use the following procedure to modify the resource control project settings, so that they persist after a system restart:</p>
<ol>
<li>
<p>By default, Oracle instances are run as the <code dir="ltr">oracle</code> user of the <code dir="ltr">dba</code> group. A project with the name <code dir="ltr">group.dba</code> is created to serve as the default project for the oracle user. Run the command <code dir="ltr">id</code> to verify the default project for the <code dir="ltr">oracle</code> user:</p>
<pre dir="ltr"># su - oracle
$ id -p
uid=100(oracle) gid=100(dba) projid=100(group.dba)
$ exit
</pre></li>
<li>
<p>To set the maximum shared memory size to 4 GB, run the <code dir="ltr">projmod</code> command:</p>
<pre dir="ltr"># projmod -sK &#34;project.max-shm-memory=(privileged,4G,deny)&#34; group.dba
</pre>
<p>Alternatively, add the resource control value <code dir="ltr">project.max-shm-memory=(privileged,4294967295,deny)</code> to the last field of the project entries for the Oracle project.</p>
</li>
<li>
<p>After these steps are complete, check the values for the <code dir="ltr">/etc/project</code> file using the following command:</p>
<pre dir="ltr"># cat /etc/project
</pre>
<p>The output should be similar to the following:</p>
<pre dir="ltr">system:0::::
user.root:1::::
noproject:2::::
default:3::::
group.staff:10::::
group.dba:100:Oracle default project:::project.max-shmmemory=(privileged,4294967295,deny)
</pre></li>
<li>
<p>To verify that the resource control is active, check process ownership, and run the commands <code dir="ltr">id</code> and <code dir="ltr">prctl</code>, as in the following example:</p>
<pre dir="ltr"># su - oracle
$ id -p
uid=100(oracle) gid=100(dba) projid=100(group.dba)
$ prctl -n project.max-shm-memory -i process $$
process: 5754: -bash
NAME     PRIVILEGE     VALUE     FLAG     ACTION    RECIPIENT
project.max-shm-memory
               privileged         4.00GB     -             deny
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The value for the maximum shared memory depends on the SGA requirements and should be set to a value greater than the SGA size.
<p>For additional information, see the <span class="italic">Oracle Solaris Tunable Parameters Reference Manual</span>.</p>
</div>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABEDHHJ"></a>
<div id="CWSOL884" class="sect1">
<h2 class="sect1"><span class="secnum">E.3</span> Configuring Shell Limits for Oracle Solaris</h2>
<p>Oracle recommends that you set shell limits and system configuration parameters as described in this section.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The shell limit values in this section are minimum values only. For production database systems, Oracle recommends that you tune these values to optimize the performance of the system. See your operating system documentation for more information about configuring shell limits.</div>
<p>The <code dir="ltr">ulimit</code> settings determine process memory related resource limits. Verify that the shell limits displayed in the following table are set to the values shown:</p>
<div class="inftblinformal">
<table class="cellalignment1401" summary="Shell limits for STACK and NOFILES" dir="ltr">
<thead>
<tr class="cellalignment1392">
<th class="cellalignment1402" id="r1c1-t14">Shell Limit</th>
<th class="cellalignment1402" id="r1c2-t14">Description</th>
<th class="cellalignment1402" id="r1c3-t14">Soft Limit (KB)</th>
<th class="cellalignment1402" id="r1c4-t14">Hard Limit (KB)</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1392">
<td class="cellalignment1398" id="r2c1-t14" headers="r1c1-t14"><code dir="ltr">STACK</code></td>
<td class="cellalignment1398" headers="r2c1-t14 r1c2-t14">Size of the stack segment of the process</td>
<td class="cellalignment1398" headers="r2c1-t14 r1c3-t14">at most 10240</td>
<td class="cellalignment1398" headers="r2c1-t14 r1c4-t14">at most 32768</td>
</tr>
<tr class="cellalignment1392">
<td class="cellalignment1398" id="r3c1-t14" headers="r1c1-t14"><code dir="ltr">NOFILES</code></td>
<td class="cellalignment1398" headers="r3c1-t14 r1c2-t14">Open file descriptors</td>
<td class="cellalignment1398" headers="r3c1-t14 r1c3-t14">at least 1024</td>
<td class="cellalignment1398" headers="r3c1-t14 r1c4-t14">at least 65536</td>
</tr>
<tr class="cellalignment1392">
<td class="cellalignment1398" id="r4c1-t14" headers="r1c1-t14"><code dir="ltr">MAXUPRC</code> or <code dir="ltr">MAXPROC</code></td>
<td class="cellalignment1398" headers="r4c1-t14 r1c2-t14">Maximum user processes</td>
<td class="cellalignment1398" headers="r4c1-t14 r1c3-t14">at least 2047</td>
<td class="cellalignment1398" headers="r4c1-t14 r1c4-t14">at least 16384</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" -->
<p>To display the current value specified for these shell limits enter the following commands:</p>
<pre dir="ltr">ulimit -s
ulimit -n
</pre>
<p>You can also use the following command:</p>
<pre dir="ltr">ulimit -a
</pre>
<p>In the above command, <code dir="ltr">-a</code> lists all current resource limits.</p>
</div>
<!-- class="sect1" -->
<a id="BABBIFCH"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">E.4</span> Setting UDP and TCP Kernel Parameters<a id="sthref810"></a><a id="sthref811"></a><a id="sthref812"></a><a id="sthref813"></a></h2>
<p>Use NDD to ensure that the Oracle Solaris kernel TCP/IP ephemeral port range is broad enough to provide enough ephemeral ports for the anticipated server workload. Ensure that the lower range is set to at least 9000 or higher, to avoid Well Known ports, and to avoid ports in the Registered Ports range commonly used by Oracle and other server ports. Set the port range high enough to avoid reserved ports for any applications you may intend to use. If the lower value of the range you have is greater than 9000, and the range is large enough for your anticipated workload, then you can ignore OUI warnings regarding the ephemeral port range.</p>
<p>Use the following command to check your current range for ephemeral ports:</p>
<p>On Oracle Solaris 10, use the following <code dir="ltr">ndd</code> command:</p>
<pre dir="ltr"># /usr/sbin/ndd /dev/tcp tcp_smallest_anon_port tcp_largest_anon_port
32768
 
65535
</pre>
<p>On Oracle Solaris 11, use the following <code dir="ltr">ipadm</code> command:</p>
<pre dir="ltr"># ipadm show-prop -p smallest_anon_port,largest_anon_port tcp
PROTO PROPERTY           PERM CURRENT PERSISTENT DEFAULT POSSIBLE
tcp   smallest_anon_port rw   32768       --     32768   1024-65535
tcp   largest_anon_port  rw   65500       --     65535   32768-65535

</pre>
<p>In the preceding examples, the ephemeral ports are set to the default range (32768-65500).</p>
<p>If necessary for your anticipated workload or number of servers, update the UDP and TCP ephemeral port range to a broader range. For example, on Oracle Solaris 11:</p>
<pre dir="ltr"># ipadm set-prop -p smallest_anon_port=9000 tcp
# ipadm set-prop -p largest_anon_port=65500 tcp
# ipadm set-prop -p smallest_anon_port=9000 udp
# ipadm set-prop -p largest_anon_port=65500 udp
</pre>
<p>Oracle recommends that you make these settings permanent. Refer to your Oracle Solaris system administration documentation for information about how to automate this ephemeral port range alteration on system restarts.</p>
<div class="infobox-note">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Solaris Tunable Parameters Reference Manual</span> available at the following link:
<p><code dir="ltr"><a href="http://docs.oracle.com/cd/E26505_01/html/E37386/chapter4-57.html">http://docs.oracle.com/cd/E26505_01/html/E37386/chapter4-57.html</a></code></p>
</div>
</div>
<!-- class="sect1" --></div>
<!-- class="appendix" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1391">
<tr>
<td class="cellalignment1398">
<table class="cellalignment1396">
<tr>
<td class="cellalignment1395"><a href="concepts.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1395"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1400">
<table class="cellalignment1394">
<tr>
<td class="cellalignment1395"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1395"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1395"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1395"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1395"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1395"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>