<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-3029"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/SDATA%20Section"></a><title>SDATA Section</title>
<meta name="generator" content="DITA Open Toolkit version 1.7.5"/>
<meta name="dcterms.created" content="2015-05-15T00:35:11Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Text Application Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41398-07"/>
<meta name="dcterms.isVersionOf" content="CCAPP"/>
<meta name="dcterms.rights" content="Copyright &nbsp;&copy;&nbsp;2001, 2015, Oracle and/or its affiliates. All rights reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-22EEA9FE-6051-4314-92B2-9C67CE0D167D.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-CD1BE817-6122-4EF7-A664-DEB7667C4B5F.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41398-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-F71A270E-4AFB-4B2C-B374-538566E5C403"></a> <span id="PAGE" style="display:none;">240/321</span> <!-- End Header --><a id="CCAPP9472"></a>
<h1 id="CCAPP-GUID-F71A270E-4AFB-4B2C-B374-538566E5C403" class="sect1">SDATA Section</h1>
<div>
<p>The <a id="d37063e53" class="indexterm-anchor"></a><a id="d37063e55" class="indexterm-anchor"></a><a id="d37063e57" class="indexterm-anchor"></a><a id="d37063e61" class="indexterm-anchor"></a><a id="d37063e65" class="indexterm-anchor"></a><a id="d37063e69" class="indexterm-anchor"></a><a id="d37063e71" class="indexterm-anchor"></a><a id="d37063e75" class="indexterm-anchor"></a><a id="d37063e79" class="indexterm-anchor"></a><a id="d37063e83" class="indexterm-anchor"></a>value of an <code>SDATA</code> section is extracted from the document text like other sections, but is indexed as structured data, also referred to as <code>SDATA</code>. Using <code>SDATA</code> sections supports operations such as projection, range searches, and ordering. It also enables <code>SDATA</code> indexing of section data such as embedded tags, and detail table or function invocations. This enables you to perform various combinations of text and structured searches in one single SQL statement.</p>
<p><code>SDATA</code> operators should be used only as descendants of <code>AND</code> operators that also have non-<code>SDATA</code> children. <code>SDATA</code> operators are meant to be used as secondary, checking or non-driving, criteria. For instance, &#34;find documents with DOG that also have price &gt; 5&#34;, rather than &#34;find documents with rating &gt; 4&#34;.</p>
<p>Use <code>CTX_DDL.ADD_SDATA_SECTION</code> to add an <code>SDATA</code> section to a section group. Use <code>CTX_DDL.UPDATE_SDATA</code> to update the values of an existing <code>SDATA</code> section. When querying within an <code>SDATA</code> section, you must use the <code>CONTAINS</code> operator. The following example creates a table called <code>items</code>, and adds an <code>SDATA</code> section called <code>my_sec_group</code>, and then queries <code>SDATA</code> in the section.</p>
<p>After you create an <code>SDATA</code> section, you can further modify the attributes of the <code>SDATA</code> section using <code>CTX_DDL.SET_SECTION_ATTRIBUTE</code>.</p>
<p>Create the table <code>items</code>:</p>
<pre>CREATE TABLE items 
(id  NUMBER PRIMARY KEY, 
 doc VARCHAR2(4000));
 
INSERT INTO items VALUES (1, &#39;&lt;description&gt; Honda Pilot &lt;/description&gt;
                              &lt;category&gt; Cars &amp; Trucks &lt;/category&gt;
                              &lt;price&gt; 27000 &lt;/price&gt;&#39;);
INSERT INTO items VALUES (2, &#39;&lt;description&gt; Toyota Sequoia &lt;/description&gt;
                              &lt;category&gt; Cars &amp; Trucks &lt;/category&gt;
                              &lt;price&gt; 35000 &lt;/price&gt;&#39;);
INSERT INTO items VALUES (3, &#39;&lt;description&gt; Toyota Land Cruiser &lt;/description&gt;
                              &lt;category&gt; Cars &amp; Trucks &lt;/category&gt;
                              &lt;price&gt; 45000 &lt;/price&gt;&#39;);
INSERT INTO items VALUES (4, &#39;&lt;description&gt; Palm Pilot &lt;/description&gt;
                              &lt;category&gt; Electronics &lt;/category&gt;
                              &lt;price&gt; 5 &lt;/price&gt;&#39;);
INSERT INTO items VALUES (5, &#39;&lt;description&gt; Toyota Land Cruiser Grill &lt;/description&gt;
                              &lt;category&gt; Parts &amp; Accessories &lt;/category&gt;
                              &lt;price&gt; 100 &lt;/price&gt;&#39;);
COMMIT;
</pre>
<p>Add <code>SDATA</code> section <code>my_sec_group</code>:</p>
<pre>BEGIN
  CTX_DDL.CREATE_SECTION_GROUP(&#39;my_sec_group&#39;, &#39;BASIC_SECTION_GROUP&#39;);
  CTX_DDL.ADD_SDATA_SECTION(&#39;my_sec_group&#39;, &#39;category&#39;, &#39;category&#39;, &#39;VARCHAR2&#39;);
  CTX_DDL.ADD_SDATA_SECTION(&#39;my_sec_group&#39;, &#39;price&#39;, &#39;price&#39;, &#39;NUMBER&#39;);
END;
 
</pre>
<p>Create the <code>CONTEXT</code> index:</p>
<pre>CREATE INDEX items$doc 
  ON items(doc) 
  INDEXTYPE IS CTXSYS.CONTEXT
  PARAMETERS(&#39;SECTION GROUP my_sec_group&#39;);
 
</pre>
<p>Run a query:</p>
<pre>SELECT id, doc
  FROM items
  WHERE contains(doc, &#39;Toyota 
                       AND SDATA(category = &#39;&#39;Cars &amp; Trucks&#39;&#39;) 
                       AND SDATA(price &lt;= 40000 )&#39;) &gt; 0;
</pre>
<p>Return the results:</p>
<pre>  ID DOC
---- ----------------------------------------------------------------------
   2 &lt;description&gt; Toyota Sequoia &lt;/description&gt;
                                   &lt;category&gt; Cars &amp; Trucks &lt;/category&gt;
                                   &lt;price&gt; 35000 &lt;/price&gt;
</pre>
<p>The following example updates the value of the SDATA section <code>price</code> for a document having the rowid of 1, to a new value of 30000.</p>
<pre>BEGIN
    SELECT ROWID INTO rowid_to_update FROM items WHERE id=1;

    CTX_DDL.UPDATE_SDATA(&#39;items$doc&#39;, 
                         &#39;price&#39;,
                         SYS.ANYDATA.CONVERTVARCHAR2(&#39;30000&#39;),
                         rowid_to_update);
END;
</pre>
<p>After executing the above query, the price of <code>Honda Pilot</code> is changed from 27000 to 30000.</p>
<div class="infobox-note" id="GUID-F71A270E-4AFB-4B2C-B374-538566E5C403__GUID-5B810B7C-79CC-4234-94C1-5B8EC2747E83">
<p class="notep1"><a id="GUID-5B810B7C-79CC-4234-94C1-5B8EC2747E83"></a>Note:</p>
<p>You can also add an <code>SDATA</code> section to an existing index, without rebuilding the index, using the <code>ADD SDATA SECTION</code> parameter of the <code>ALTER INDEX PARAMETERS</code> statement. See &#34;ALTER INDEX&#34; section of the <a class="olink CCREF" target="_blank" href="../CCREF/toc.htm"><span class="italic">Oracle Text Reference</span></a> for more information.</p>
</div>
<div class="infoboxnotealso" id="GUID-F71A270E-4AFB-4B2C-B374-538566E5C403__GUID-BAC8590F-7D24-4D69-BBF7-AAF83041C8D9">
<p class="notep1"><a id="GUID-BAC8590F-7D24-4D69-BBF7-AAF83041C8D9"></a>See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p>The &#34;CONTAINS&#34; query section of the <a class="olink CCREF0300" target="_blank" href="../CCREF/cqoper.htm#CCREF0300"><span class="italic">Oracle Text Reference</span></a> for information on the <code>SDATA</code> operator</p>
</li>
<li>
<p>The &#34;CTX_DDL&#34; package section of the <a class="olink CCREF0600" target="_blank" href="../CCREF/cddlpkg.htm#CCREF0600"><span class="italic">Oracle Text Reference</span></a> for information on adding and updating the <code>SDATA</code> sections and changing their attributes using the <code>ADD_SDATA_SECTION</code>, <code>SET_SECTION_ATTRIBUTE</code>, and the <code>UPDATE_SDATA</code> procedures</p>
</li>
</ul>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment6351">
<tr>
<td class="cellalignment6358">
<table class="cellalignment6356">
<tr>
<td class="cellalignment6355"><a href="GUID-22EEA9FE-6051-4314-92B2-9C67CE0D167D.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment6355"><a href="GUID-CD1BE817-6122-4EF7-A664-DEB7667C4B5F.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright &nbsp;&copy;&nbsp;2001, 2015, Oracle and/or its affiliates. All rights reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment6360">
<table class="cellalignment6354">
<tr>
<td class="cellalignment6355"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment6355"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment6355"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment6355"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment6355"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment6355"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>