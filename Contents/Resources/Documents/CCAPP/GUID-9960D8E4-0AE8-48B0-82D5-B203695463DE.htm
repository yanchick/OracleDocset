<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-2909"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Optimizing%20the%20Index"></a><title>Optimizing the Index</title>
<meta name="generator" content="DITA Open Toolkit version 1.7.5"/>
<meta name="keywords" content="optimizing index, index, optimizing, structure, structure of index, fragmentation, fragmentation of index, garbage collection, document invalidation, single token, viewing, CTX_REPORT, INDEX_STATS procedure, example"/>
<meta name="dcterms.created" content="2015-05-15T00:35:11Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Text Application Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41398-07"/>
<meta name="dcterms.isVersionOf" content="CCAPP"/>
<meta name="dcterms.rights" content="Copyright &nbsp;&copy;&nbsp;2001, 2015, Oracle and/or its affiliates. All rights reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-99981916-B970-4AF0-AB50-0CFE78067F7E.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-7310390A-4E76-45D3-99E8-070692043E6B.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41398-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-9960D8E4-0AE8-48B0-82D5-B203695463DE"></a> <span id="PAGE" style="display:none;">118/321</span> <!-- End Header --><a id="CCAPP9128"></a>
<h1 id="CCAPP-GUID-9960D8E4-0AE8-48B0-82D5-B203695463DE" class="sect1">Optimizing the Index</h1>
<div>
<p>Frequent index synchronization ultimately causes fragmentation of your <code>CONTEXT</code> index. Index fragmentation can adversely affect query response time. You should, therefore, allow time to optimize your <code>CONTEXT</code> index in order to reduce fragmentation and index size and to ensure optimal query performance. To understand index optimization, you must understand the structure of the index and what happens when it is synchronized.</p>
<p>This section contains the following topics.</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-9960D8E4-0AE8-48B0-82D5-B203695463DE.htm#GUID-845E153D-5A0C-4D39-B240-4D805DDC7F8C">CONTEXT Index Structure</a></p>
</li>
<li>
<p><a href="GUID-9960D8E4-0AE8-48B0-82D5-B203695463DE.htm#GUID-10809D0D-D0F4-42E4-9876-FD1C25C9994B">Index Fragmentation</a></p>
</li>
<li>
<p><a href="GUID-9960D8E4-0AE8-48B0-82D5-B203695463DE.htm#GUID-30862B68-353D-4F6F-81D2-CFBC182DAF56">Document Invalidation and Garbage Collection</a></p>
</li>
<li>
<p><a href="GUID-9960D8E4-0AE8-48B0-82D5-B203695463DE.htm#GUID-8EB38F1A-E696-462D-8CBC-7A2B1BA031E7">Single Token Optimization</a></p>
</li>
<li>
<p><a href="GUID-9960D8E4-0AE8-48B0-82D5-B203695463DE.htm#GUID-61C45205-0D97-47BB-9128-0AA2CECCE56A">Viewing Index Fragmentation and Garbage Data</a></p>
</li>
<li>
<p><a href="GUID-9960D8E4-0AE8-48B0-82D5-B203695463DE.htm#GUID-5E03AAD1-287D-466D-BB9A-C0A211BB650D">Example: Optimizing the Index</a></p>
</li>
</ul>
</div>
<a id="CCAPP9129"></a>
<div class="props_rev_3" lang="en-US" id="GUID-845E153D-5A0C-4D39-B240-4D805DDC7F8C"><a name="GUID-845E153D-5A0C-4D39-B240-4D805DDC7F8C"></a>
<h2 id="CCAPP-GUID-845E153D-5A0C-4D39-B240-4D805DDC7F8C" class="sect2">CONTEXT Index Structure</h2>
<div>
<p>The <code>CONTEXT</code> index is an inverted index where each word contains the list of documents that contain that word. For example, after a single initial indexing operation, the word DOG might have an entry as follows:</p>
<pre>DOG DOC1 DOC3 DOC5
</pre></div>
</div>
<a id="CCAPP9130"></a>
<div class="props_rev_3" lang="en-US" id="GUID-10809D0D-D0F4-42E4-9876-FD1C25C9994B"><a name="GUID-10809D0D-D0F4-42E4-9876-FD1C25C9994B"></a>
<h2 id="CCAPP-GUID-10809D0D-D0F4-42E4-9876-FD1C25C9994B" class="sect2">Index Fragmentation</h2>
<div>
<p>When new documents are added to the base table, the index is synchronized by adding new rows. Thus, if you add a new document (for example, DOC 7) with the word <span class="italic">dog</span> to the base table and synchronize the index, you now have:</p>
<pre>DOG DOC1 DOC3 DOC5
DOG DOC7
</pre>
<p>Subsequent DML will also create new rows as follows:</p>
<pre>DOG DOC1 DOC3 DOC5
DOG DOC7
DOG DOC9
DOG DOC11
</pre>
<p>Adding new documents and synchronizing the index causes index fragmentation. In particular, background DML, which synchronizes the index frequently, generally produces more fragmentation than synchronizing in batch mode.</p>
<p>Less frequent batch processing results in longer document lists, reducing the number of rows in the index and thus reducing fragmentation.</p>
<p>You can reduce <a id="d18816e240" class="indexterm-anchor"></a>index fragmentation by optimizing the index in either <a id="d18816e245" class="indexterm-anchor"></a><code>FULL</code> or <a id="d18816e250" class="indexterm-anchor"></a><code>FAST</code> mode with <code>CTX_DDL.OPTIMIZE_INDEX</code>.</p>
</div>
</div>
<a id="CCAPP9131"></a>
<div class="props_rev_3" lang="en-US" id="GUID-30862B68-353D-4F6F-81D2-CFBC182DAF56"><a name="GUID-30862B68-353D-4F6F-81D2-CFBC182DAF56"></a>
<h2 id="CCAPP-GUID-30862B68-353D-4F6F-81D2-CFBC182DAF56" class="sect2">Document Invalidation and Garbage Collection</h2>
<div>
<p>When documents are removed from the base table, Oracle Text marks the document as removed but does not immediately alter the index.</p>
<p>Because the old information takes up space and can cause extra overhead at query time, you must remove the old information from the index by optimizing it in <code>FULL</code> mode. This is called <span class="bold">garbage collection</span>. Optimizing in <code>FULL</code> mode for garbage collection is necessary when you have frequent updates or deletes to the base table.</p>
</div>
</div>
<a id="CCAPP9132"></a>
<div class="props_rev_3" lang="en-US" id="GUID-8EB38F1A-E696-462D-8CBC-7A2B1BA031E7"><a name="GUID-8EB38F1A-E696-462D-8CBC-7A2B1BA031E7"></a>
<h2 id="CCAPP-GUID-8EB38F1A-E696-462D-8CBC-7A2B1BA031E7" class="sect2">Single Token Optimization</h2>
<div>
<p>In addition to optimizing the entire index, you can optimize single tokens. You can use token mode to optimize index tokens that are frequently searched, without spending time on optimizing tokens that are rarely referenced.</p>
<p>For example, you can specify that only the token <span class="italic">DOG</span> be optimized in the index, if you know that this token is updated and queried frequently.</p>
<p>An optimized token can improve query response time for the token.</p>
<p>To optimize an index in token mode, use <code>CTX_DDL.OPTIMIZE_INDEX</code>.</p>
</div>
</div>
<a id="CCAPP9133"></a>
<div class="props_rev_3" lang="en-US" id="GUID-61C45205-0D97-47BB-9128-0AA2CECCE56A"><a name="GUID-61C45205-0D97-47BB-9128-0AA2CECCE56A"></a>
<h2 id="CCAPP-GUID-61C45205-0D97-47BB-9128-0AA2CECCE56A" class="sect2">Viewing Index Fragmentation and Garbage Data</h2>
<div>
<p>With the <code>CTX_REPORT.INDEX_STATS</code> procedure, you can create a statistical report on your index. The report includes information on optimal row fragmentation, a list of most fragmented tokens, and the amount of garbage data in your index. Although this report might take a long time to run for large indexes, it can help you decide whether to optimize your index.</p>
<div class="infoboxnotealso" id="GUID-61C45205-0D97-47BB-9128-0AA2CECCE56A__GUID-5ABC20F0-ED7D-4E91-8496-D3237B271DB3">
<p class="notep1"><a id="GUID-5ABC20F0-ED7D-4E91-8496-D3237B271DB3"></a>See Also:</p>
<p><a class="olink CCREF1100" target="_blank" href="../CCREF/crptpkg.htm#CCREF1100"><span class="italic">Oracle Text Reference</span></a> to learn more about using the <code>CTX_REPORT.INDEX_STATS</code> procedure</p>
</div>
</div>
</div>
<a id="CCAPP9134"></a>
<div class="props_rev_3" lang="en-US" id="GUID-5E03AAD1-287D-466D-BB9A-C0A211BB650D"><a name="GUID-5E03AAD1-287D-466D-BB9A-C0A211BB650D"></a>
<h2 id="CCAPP-GUID-5E03AAD1-287D-466D-BB9A-C0A211BB650D" class="sect2">Example: Optimizing the Index</h2>
<div>
<p>To optimize an index, Oracle recommends that you use <code>CTX_DDL.OPTIMIZE_INDEX</code>.</p>
<div class="infoboxnotealso" id="GUID-5E03AAD1-287D-466D-BB9A-C0A211BB650D__GUID-82C4F9C1-0D93-4D3C-8C89-64AD86DE9CBB">
<p class="notep1"><a id="GUID-82C4F9C1-0D93-4D3C-8C89-64AD86DE9CBB"></a>See Also:</p>
<p><a class="olink CCREF0638" target="_blank" href="../CCREF/cddlpkg.htm#CCREF0638"><span class="italic">Oracle Text Reference</span></a> for the <code>CTX_DDL.OPTIMIZE_INDEX</code> statement syntax and examples</p>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment6351">
<tr>
<td class="cellalignment6358">
<table class="cellalignment6356">
<tr>
<td class="cellalignment6355"><a href="GUID-99981916-B970-4AF0-AB50-0CFE78067F7E.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment6355"><a href="GUID-7310390A-4E76-45D3-99E8-070692043E6B.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright &nbsp;&copy;&nbsp;2001, 2015, Oracle and/or its affiliates. All rights reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment6360">
<table class="cellalignment6354">
<tr>
<td class="cellalignment6355"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment6355"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment6355"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment6355"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment6355"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment6355"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>