<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-2897"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Frequently%20Asked%20Questions%20About%20Query%20Performance"></a><title>Frequently Asked Questions About Query Performance</title>
<meta name="generator" content="DITA Open Toolkit version 1.7.5"/>
<meta name="keywords" content="query performance, FAQs, performance tuning, querying, query optimization, optimizing queries, document format, affect on performance, functional lookup, indexed lookup, memory allocation, SORT_AREA_SIZE, out of line LOB storage, improving performance, LOB columns, improving query performance, multiple CONTAINS, wildcard operator, stemming, local partitioned index, partitioned index, parallel queries, CTXCAT index, about performance"/>
<meta name="dcterms.created" content="2015-05-15T00:35:11Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Text Application Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41398-07"/>
<meta name="dcterms.isVersionOf" content="CCAPP"/>
<meta name="dcterms.rights" content="Copyright &nbsp;&copy;&nbsp;2001, 2015, Oracle and/or its affiliates. All rights reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-45AA18EF-710D-4A32-8A6C-3522054B10A8.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-82000645-74B9-407E-A9C0-C1ACEE319BD9.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41398-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3"></a> <span id="PAGE" style="display:none;">223/321</span> <!-- End Header --><a id="CCAPP9252"></a>
<h1 id="CCAPP-GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3" class="sect1">Frequently Asked Questions About Query Performance</h1>
<div>
<p>This section answers some of the frequently asked questions about query performance.</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-2522997E-2CCB-4AED-8EC8-D10CEC7293FE">What is Query Performance?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-124913E6-83D6-4525-8856-2EF87B32FD8F">What is the fastest type of text query?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-9896CBA2-946B-4202-952F-A891DA944DF9">Should I collect statistics on my tables?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-461B30DE-424D-40D8-A25F-5EF08A24D670">How does the size of my data affect queries?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-E0B29AC4-AB3C-489C-B7E8-FD972D5399A8">How does the format of my data affect queries?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-BAC89AA2-829C-4A96-8266-85960EE837E4">What is a functional versus an indexed lookup?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-C2AC7280-37D9-4F16-8618-67FD1B97BAC7">What tables are involved in queries?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-99E8D918-EB5B-4835-81E0-D7C533DA9E4A">Does sorting the results slow a text-only query?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-76416A9B-F4A8-47D4-874E-3E8FABD8ECB1">How do I make an ORDER BY score query faster?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-AFB7B3D3-0B03-4BE4-834F-BF1295CD11CD">Which memory settings affect querying?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-19431FDB-AD40-4DCF-A235-D372F7C9B33B">Does out-of-line LOB storage of wide base table columns improve performance?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-9F51A472-C8F5-4F1F-A17B-8A21BB38CBC5">How can I make a CONTAINS query on more than one column faster?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-7E174101-D66D-43E9-9A8B-69EBA73F6502">Is it OK to have many expansions in a query?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-3E1CF9FB-60EE-4FA7-98CC-C0C895BEF2B8">How can local partition indexes help?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-D278E686-664A-4083-AF02-F3F27DE973E1">Should I query in parallel?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-AB3F280E-4FBE-417C-BA1E-5FEFBE731906">Should I index themes?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-BC4B11B8-348C-47AF-A49D-99EE0312F73F">When should I use a CTXCAT index?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-7844B5A5-E096-4B6E-91D0-59D23B46B375">When is a CTXCAT index NOT suitable?</a></p>
</li>
<li>
<p><a href="GUID-90312BBE-00D7-4200-B6AF-77CAFAA5D2F3.htm#GUID-6AC6C18F-2F28-4DAA-ACDF-F59615B1CFD9">What optimizer hints are available_ and what do they do?</a></p>
</li>
</ul>
</div>
<a id="CCAPP9253"></a>
<div class="props_rev_3" lang="en-US" id="GUID-2522997E-2CCB-4AED-8EC8-D10CEC7293FE"><a name="GUID-2522997E-2CCB-4AED-8EC8-D10CEC7293FE"></a>
<h2 id="CCAPP-GUID-2522997E-2CCB-4AED-8EC8-D10CEC7293FE" class="sect2">What is Query Performance?</h2>
<div>
<p><span class="bold">Answer:</span> There are generally two measures of query performance:</p>
<ul style="list-style-type: disc;">
<li>
<p>Response time, the time to get an answer to an individual query, and</p>
</li>
<li>
<p>Throughput, the number of queries that can be run in any time period; for example, queries each second.</p>
</li>
</ul>
<p>These two are related, but are not the same. In a heavily loaded system, you normally want maximum throughput, whereas in a relatively lightly loaded system, you probably want minimum response time. Also, some applications require a query to deliver all its hits to the user, whereas others might only require the first 20 hits from an ordered set. It is important to distinguish between these two scenarios.</p>
</div>
</div>
<a id="CCAPP9254"></a>
<div class="props_rev_3" lang="en-US" id="GUID-124913E6-83D6-4525-8856-2EF87B32FD8F"><a name="GUID-124913E6-83D6-4525-8856-2EF87B32FD8F"></a>
<h2 id="CCAPP-GUID-124913E6-83D6-4525-8856-2EF87B32FD8F" class="sect2">What is the fastest type of text query?</h2>
<div>
<p><span class="bold">Answer:</span> The fastest type of query will meet the following conditions:</p>
<ul style="list-style-type: disc;">
<li>
<p>Single <code>CONTAINS</code> clause</p>
</li>
<li>
<p>No other conditions in the <code>WHERE</code> clause</p>
</li>
<li>
<p>No <code>ORDER</code> <code>BY</code> clause at all</p>
</li>
<li>
<p>Only the first page of results is returned (for example, the first 10 or 20 hits).</p>
</li>
</ul>
</div>
</div>
<a id="CCAPP9255"></a>
<div class="props_rev_3" lang="en-US" id="GUID-9896CBA2-946B-4202-952F-A891DA944DF9"><a name="GUID-9896CBA2-946B-4202-952F-A891DA944DF9"></a>
<h2 id="CCAPP-GUID-9896CBA2-946B-4202-952F-A891DA944DF9" class="sect2">Should I collect statistics on my tables?</h2>
<div>
<p><span class="bold">Answer:</span> Yes. Collecting statistics on your tables enables Oracle Text to do cost-based analysis. This helps Oracle Text choose the most efficient execution plan for your queries.</p>
<p>If your queries are always pure text queries (no structured predicate and no joins), you should delete statistics on your Oracle Text index.</p>
</div>
</div>
<a id="CCAPP9256"></a>
<div class="props_rev_3" lang="en-US" id="GUID-461B30DE-424D-40D8-A25F-5EF08A24D670"><a name="GUID-461B30DE-424D-40D8-A25F-5EF08A24D670"></a>
<h2 id="CCAPP-GUID-461B30DE-424D-40D8-A25F-5EF08A24D670" class="sect2">How does the size of my data affect queries?</h2>
<div>
<p><span class="bold">Answer:</span> The speed at which the text index can deliver ROWIDs is not affected by the actual size of the data. Text query speed will be related to the number of rows that must be fetched from the index table, number of hits requested, number of hits produced by the query, and the presence or absence of sorting.</p>
</div>
</div>
<a id="CCAPP9257"></a>
<div class="props_rev_3" lang="en-US" id="GUID-E0B29AC4-AB3C-489C-B7E8-FD972D5399A8"><a name="GUID-E0B29AC4-AB3C-489C-B7E8-FD972D5399A8"></a>
<h2 id="CCAPP-GUID-E0B29AC4-AB3C-489C-B7E8-FD972D5399A8" class="sect2">How does the format of my data affect queries?</h2>
<div>
<p><span class="bold">Answer:</span> The format of the documents (plain ASCII text, HTML or Microsoft Word) should make no difference to query speed. The documents are filtered to plain text at indexing time, not query time.</p>
<p>The cleanliness of the data will make a difference. Spell-checked and sub-edited text for publication tends to have a much smaller total vocabulary (and therefore size of the index table) than informal text such as e-mails, which will contain many spelling errors and abbreviations. For a given index memory setting, the extra text takes up more memory, which can lead to more fragmented rows than in the cleaner text, which can adversely affect query response time.</p>
</div>
</div>
<a id="CCAPP9258"></a>
<div class="props_rev_3" lang="en-US" id="GUID-BAC89AA2-829C-4A96-8266-85960EE837E4"><a name="GUID-BAC89AA2-829C-4A96-8266-85960EE837E4"></a>
<h2 id="CCAPP-GUID-BAC89AA2-829C-4A96-8266-85960EE837E4" class="sect2">What is a <span class="italic">functional</span> versus an <span class="italic">indexed</span> lookup?</h2>
<div>
<p><span class="bold">Answer:</span> There are two ways the kernel can query the text index. In the first and most common case, the kernel asks the text index for all the rowids that satisfy a particular text search. These rowids are returned in batches. In the second, the kernel passes individual rowids to the text index, and asks whether that particular rowid satisfies a certain text criterion.</p>
<p>The second is known as a functional lookup, and is most commonly done where there is a very selective structured clause, so that only a few rowids must be checked against the text index. An example of a search where a functional lookup may be used:</p>
<pre>SELECT ID, SCORE(1), TEXT FROM MYTABLE
</pre>
<pre>WHERE START_DATE = &#39;21 Oct 1992&#39;         &lt;- highly selective
AND CONTAINS (TEXT, &#39;commonword&#39;) &gt; 0    &lt;- unselective
</pre>
<p>Functional invocation is also used for text query ordered by structured column (for example date, price) and text query is unselective.</p>
</div>
</div>
<a id="CCAPP9259"></a>
<div class="props_rev_3" lang="en-US" id="GUID-C2AC7280-37D9-4F16-8618-67FD1B97BAC7"><a name="GUID-C2AC7280-37D9-4F16-8618-67FD1B97BAC7"></a>
<h2 id="CCAPP-GUID-C2AC7280-37D9-4F16-8618-67FD1B97BAC7" class="sect2">What tables are involved in queries?</h2>
<div>
<p><span class="bold">Answer:</span> All queries look at the index token table. Its name has the form <code>DR$indexname$I</code>. This contains the list of tokens (column <code>TOKEN_TEXT</code>) and the information about the row and word positions where the token occurs (column <code>TOKEN_INFO</code>).</p>
<p>The row information is stored as internal DOCID values. These must be translated into external ROWID values. The table used for this depends on the type of lookup: For functional lookups, the <code>$K</code> table, <code>DR$indexname$K</code>, is used. This is a simple Index Organized Table (IOT) which contains a row for each DOCID/ROWID pair.</p>
<p>For indexed lookups, the <code>$R</code> table, <code>DR$indexname$R</code>, is used. This holds the complete list of ROWIDs in a BLOB column.</p>
<p>Hence we can easily find out whether a functional or indexed lookup is being used by examining a SQL trace, and looking for the $K or $R tables.</p>
<div class="infobox-note" id="GUID-C2AC7280-37D9-4F16-8618-67FD1B97BAC7__GUID-8BD69135-5AA9-4FE5-AB2C-E11D0DA0B729">
<p class="notep1"><a id="GUID-8BD69135-5AA9-4FE5-AB2C-E11D0DA0B729"></a>Note:</p>
<p>These internal index tables are subject to change from release to release. Oracle recommends that you do not directly access these tables in your application.</p>
</div>
</div>
</div>
<a id="CCAPP9260"></a>
<div class="props_rev_3" lang="en-US" id="GUID-99E8D918-EB5B-4835-81E0-D7C533DA9E4A"><a name="GUID-99E8D918-EB5B-4835-81E0-D7C533DA9E4A"></a>
<h2 id="CCAPP-GUID-99E8D918-EB5B-4835-81E0-D7C533DA9E4A" class="sect2">Does sorting the results slow a text-only query?</h2>
<div>
<p><span class="bold">Answer:</span> Yes, it certainly does.</p>
<p>If there is no sorting, then Oracle Text can return results as it finds them, which is quicker in the common case where the application needs to display only a page of results at a time.</p>
</div>
</div>
<a id="CCAPP9261"></a>
<div class="props_rev_3" lang="en-US" id="GUID-76416A9B-F4A8-47D4-874E-3E8FABD8ECB1"><a name="GUID-76416A9B-F4A8-47D4-874E-3E8FABD8ECB1"></a>
<h2 id="CCAPP-GUID-76416A9B-F4A8-47D4-874E-3E8FABD8ECB1" class="sect2">How do I make an ORDER BY score query faster?</h2>
<div>
<p><span class="bold">Answer:</span> Sorting by relevance (<code>SCORE(n)</code>) can be extremely quick if the <code>FIRST_ROWS(n)</code> hint is used. In this case, Oracle Text performs a high speed internal sort when fetching from the text index tables.</p>
<p>An example of such a query:</p>
<pre>              SELECT /*+ FIRST_ROWS(10) */ ID, SCORE(1), TEXT FROM mytable
                WHERE CONTAINS (TEXT, &#39;searchterm&#39;, 1) &gt; 0
                ORDER BY SCORE(1) DESC;
</pre>
<p>Note that for this to work efficiently, there must be no other criteria in the <code>WHERE</code> clause other than a single <code>CONTAINS</code>.</p>
</div>
</div>
<a id="CCAPP9262"></a>
<div class="props_rev_3" lang="en-US" id="GUID-AFB7B3D3-0B03-4BE4-834F-BF1295CD11CD"><a name="GUID-AFB7B3D3-0B03-4BE4-834F-BF1295CD11CD"></a>
<h2 id="CCAPP-GUID-AFB7B3D3-0B03-4BE4-834F-BF1295CD11CD" class="sect2">Which memory settings affect querying?</h2>
<div>
<p><span class="bold">Answer:</span> For querying, you want to strive for a large system global area (SGA). You can set these parameters related to SGA in your Oracle Database initialization file. You can also set these parameters dynamically.</p>
<p>The <code>SORT_AREA_SIZE</code> parameter controls the memory available for sorting for <code>ORDER BY</code> queries. You should increase the size of this parameter if you frequently order by structured columns.</p>
<div class="infoboxnotealso" id="GUID-AFB7B3D3-0B03-4BE4-834F-BF1295CD11CD__GUID-A7175F29-6BD8-4A4F-9D2C-4DA29B181E06">
<p class="notep1"><a id="GUID-A7175F29-6BD8-4A4F-9D2C-4DA29B181E06"></a>See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink ADMIN" target="_blank" href="../ADMIN/toc.htm"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information on setting SGA related parameters</p>
</li>
<li>
<p><a class="olink TGDBA" target="_blank" href="../TGDBA/toc.htm"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for more information on memory allocation and setting the <code>SORT_AREA_SIZE</code> parameter</p>
</li>
</ul>
</div>
</div>
</div>
<a id="CCAPP9263"></a>
<div class="props_rev_3" lang="en-US" id="GUID-19431FDB-AD40-4DCF-A235-D372F7C9B33B"><a name="GUID-19431FDB-AD40-4DCF-A235-D372F7C9B33B"></a>
<h2 id="CCAPP-GUID-19431FDB-AD40-4DCF-A235-D372F7C9B33B" class="sect2">Does out-of-line LOB storage of wide base table columns improve performance?</h2>
<div>
<p><span class="bold">Answer:</span> Yes. Typically, a <code>SELECT</code> statement selects more than one column from your base table. Because Oracle Text fetches columns to memory, it is more efficient to store wide base table columns such as LOBs out of line, especially when these columns are rarely updated but frequently selected.</p>
<p>When LOBs are stored out of line, only the LOB locators need to be fetched to memory during querying. Out of line storage reduces the effective size of the base table making it easier for Oracle Text to cache the entire table to memory. This reduces the cost of selecting columns from the base table, and hence speeds up text queries.</p>
<p>In addition, having smaller base tables cached in memory enables more index table data to be cached during querying, which improves performance.</p>
</div>
</div>
<a id="CCAPP9264"></a>
<div class="props_rev_3" lang="en-US" id="GUID-9F51A472-C8F5-4F1F-A17B-8A21BB38CBC5"><a name="GUID-9F51A472-C8F5-4F1F-A17B-8A21BB38CBC5"></a>
<h2 id="CCAPP-GUID-9F51A472-C8F5-4F1F-A17B-8A21BB38CBC5" class="sect2">How can I make a CONTAINS query on more than one column faster?</h2>
<div>
<p><span class="bold">Answer:</span> The fastest type of query is one where there is only a single <code>CONTAINS</code> clause, and no other conditions in the <code>WHERE</code> clause.</p>
<p>Consider the following multiple <code>CONTAINS</code> query:</p>
<pre>              SELECT title, isbn FROM booklist
                WHERE CONTAINS (title, &#39;horse&#39;) &gt; 0
                  AND CONTAINS (abstract, &#39;racing&#39;) &gt; 0
</pre>
<p>We can obtain the same result with section searching and the <code>WITHIN</code> operator as follows:</p>
<pre>              SELECT title, isbn FROM booklist
                WHERE CONTAINS (alltext, 
                  &#39;horse WITHIN title AND racing WITHIN abstract&#39;)&gt;0
</pre>
<p>This query completes more quickly. To use a query like this, we must copy all the data into a single text column for indexing, with section tags around each column&#39;s data. This can be done with PL/SQL procedures before indexing, or by making use of the <code>USER_DATASTORE</code> datastore during indexing to synthesize structured columns with the text column into one document.</p>
</div>
</div>
<a id="CCAPP9265"></a>
<div class="props_rev_3" lang="en-US" id="GUID-7E174101-D66D-43E9-9A8B-69EBA73F6502"><a name="GUID-7E174101-D66D-43E9-9A8B-69EBA73F6502"></a>
<h2 id="CCAPP-GUID-7E174101-D66D-43E9-9A8B-69EBA73F6502" class="sect2">Is it OK to have many expansions in a query?</h2>
<div>
<p><span class="bold">Answer:</span> Each distinct word used in a query requires at least one row to be fetched from the index table. It is therefore best to keep the number of expansions down as much as possible.</p>
<p>You should not use expansions such as wild cards, thesaurus, stemming and fuzzy matching unless they are necessary to the task. In general, a few expansions (for example, 10 to 20) does not cause difficulty, but avoid having large numbers of explansions (80 or 100) in a query. The query feedback mechanism can be used to determine the number of expansions for any particular query expression.</p>
<p>In addition for wildcard and stem queries, you can remove the cost of term expansion from query time to index time by creating prefix, substring or stem indexes. Query performance increases at the cost of longer indexing time and added disk space.</p>
<p>Prefix and substring indexes can improve wildcard performance. You enable prefix and substring indexing with the <code>BASIC_WORDLIST</code> preference. The following example sets the wordlist preference for prefix and substring indexing. For prefix indexing, it specifies that Oracle Text create token prefixes between 3 and 4 characters long:</p>
<pre>begin 
</pre>
<pre>ctx_ddl.create_preference(&#39;mywordlist&#39;, &#39;BASIC_WORDLIST&#39;); 
ctx_ddl.set_attribute(&#39;mywordlist&#39;,&#39;PREFIX_INDEX&#39;,&#39;TRUE&#39;);
ctx_ddl.set_attribute(&#39;mywordlist&#39;,&#39;PREFIX_MIN_LENGTH&#39;, &#39;3&#39;);
ctx_ddl.set_attribute(&#39;mywordlist&#39;,&#39;PREFIX_MAX_LENGTH&#39;, &#39;4&#39;);
ctx_ddl.set_attribute(&#39;mywordlist&#39;,&#39;SUBSTRING_INDEX&#39;, &#39;YES&#39;);
</pre>
<pre>end
</pre>
<p>You enable stem indexing with the <code>BASIC_LEXER</code> preference:</p>
<pre>begin
</pre>
<pre>ctx_ddl.create_preference(&#39;mylex&#39;, &#39;BASIC_LEXER&#39;);
ctx_ddl.set_attribute ( &#39;mylex&#39;, &#39;index_stems&#39;, &#39;ENGLISH&#39;);
</pre>
<pre>end;
</pre></div>
</div>
<a id="CCAPP9266"></a>
<div class="props_rev_3" lang="en-US" id="GUID-3E1CF9FB-60EE-4FA7-98CC-C0C895BEF2B8"><a name="GUID-3E1CF9FB-60EE-4FA7-98CC-C0C895BEF2B8"></a>
<h2 id="CCAPP-GUID-3E1CF9FB-60EE-4FA7-98CC-C0C895BEF2B8" class="sect2">How can local partition indexes help?</h2>
<div>
<p><span class="bold">Answer:</span> You can create local partitioned <code>CONTEXT</code> indexes on partitioned tables. This means that on a partitioned table, each partition has its own set of index tables. Effectively, there are multiple indexes, but the results from each are combined as necessary to produce the final result set.</p>
<p>The index is created using the <code>LOCAL</code> keyword:</p>
<pre>CREATE INDEX index_name ON table_name (column_name) 
INDEXTYPE IS ctxsys.context
PARAMETERS (&#39;...&#39;)
LOCAL
</pre>
<p>With partitioned tables and local indexes, you can improve performance of the following types of <code>CONTAINS</code> queries:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-DE0B4638-A760-47C4-8593-F68ECEBFD370.htm#GUID-11DC7D61-E6FB-4775-8427-8DF0C462CBEF">Range Search on Partition Key Column</a></p>
<p>This is a query that restricts the search to a particular range of values on a column that is also the partition key.</p>
</li>
<li>
<p><a href="GUID-DE0B4638-A760-47C4-8593-F68ECEBFD370.htm#GUID-DAA9ED42-32AE-4DD8-B1A8-2E1F04136399">ORDER BY Partition Key Column</a></p>
<p>This is a query that requires only the first <code>n</code> hits and the <code>ORDER BY</code> clause names the partition key</p>
<div class="infoboxnotealso" id="GUID-3E1CF9FB-60EE-4FA7-98CC-C0C895BEF2B8__GUID-DBF5C15E-932A-44E2-8C04-55EA59A9B0EE">
<p class="notep1"><a id="GUID-DBF5C15E-932A-44E2-8C04-55EA59A9B0EE"></a>See Also:</p>
<p><span class="q">&#34;<a href="GUID-DE0B4638-A760-47C4-8593-F68ECEBFD370.htm#GUID-DE0B4638-A760-47C4-8593-F68ECEBFD370">Improved Response Time using Local Partitioned CONTEXT Index</a>&#34;</span></p>
</div>
</li>
</ul>
</div>
</div>
<a id="CCAPP9267"></a>
<div class="props_rev_3" lang="en-US" id="GUID-D278E686-664A-4083-AF02-F3F27DE973E1"><a name="GUID-D278E686-664A-4083-AF02-F3F27DE973E1"></a>
<h2 id="CCAPP-GUID-D278E686-664A-4083-AF02-F3F27DE973E1" class="sect2">Should I query in parallel?</h2>
<div>
<p><span class="bold">Answer:</span> It depends on system load and server capacity. Even though parallel querying is the default behavior for indexes created in parallel, it usually results in degrading overall query throughput on heavily loaded systems.</p>
<p>In general, parallel queries are particularly appropriate for DSS or analytical systems with large data collections, multiple CPUs, and low number of concurrent users.</p>
<div class="infoboxnotealso" id="GUID-D278E686-664A-4083-AF02-F3F27DE973E1__GUID-E7D43ECB-6788-49A4-8412-19C31BCCD9AF">
<p class="notep1"><a id="GUID-E7D43ECB-6788-49A4-8412-19C31BCCD9AF"></a>See Also:</p>
<p><span class="q">&#34;<a href="GUID-51F4ABF4-83A1-44EA-80FB-EF72430D3A1A.htm">Using Parallel Queries</a>&#34;</span></p>
</div>
</div>
</div>
<a id="CCAPP9268"></a>
<div class="props_rev_3" lang="en-US" id="GUID-AB3F280E-4FBE-417C-BA1E-5FEFBE731906"><a name="GUID-AB3F280E-4FBE-417C-BA1E-5FEFBE731906"></a>
<h2 id="CCAPP-GUID-AB3F280E-4FBE-417C-BA1E-5FEFBE731906" class="sect2">Should I index themes?</h2>
<div>
<p><span class="bold">Answer:</span> Indexing theme information with a <code>CONTEXT</code> index takes longer and also increases the size of your index. However, theme indexes enable <code>ABOUT</code> queries to be more precise by using the knowledge base. If your application uses <code>ABOUT</code> queries heavily, it might be worthwhile to create a theme component to the index, despite the extra indexing time and extra storage space required.</p>
<div class="infoboxnotealso" id="GUID-AB3F280E-4FBE-417C-BA1E-5FEFBE731906__GUID-6FBB9B06-ACD1-46E9-9B5F-568868F40775">
<p class="notep1"><a id="GUID-6FBB9B06-ACD1-46E9-9B5F-568868F40775"></a>See Also:</p>
<p><span class="q">&#34;<a href="GUID-E3ED0880-E919-43BE-BC10-1837D76F0E8F.htm">ABOUT Queries and Themes</a>&#34;</span></p>
</div>
</div>
</div>
<a id="CCAPP9269"></a>
<div class="props_rev_3" lang="en-US" id="GUID-BC4B11B8-348C-47AF-A49D-99EE0312F73F"><a name="GUID-BC4B11B8-348C-47AF-A49D-99EE0312F73F"></a>
<h2 id="CCAPP-GUID-BC4B11B8-348C-47AF-A49D-99EE0312F73F" class="sect2">When should I use a CTXCAT index?</h2>
<div>
<p><span class="bold">Answer:</span> <code>CTXCAT</code> indexes work best when text is in small chunks, maybe a few lines maximum, and searches need to restrict or sort the result set according to certain structured criteria, usually numbers or dates.</p>
<p>For example, consider an on-line auction site. Each item for sale has a short description, a current bid price, and dates for the start and end of the auction. A user might want to see all the records with <span class="italic">antique cabinet</span> in the description, with a current bid price less than $500. Because he is particularly interested in newly posted items, he wants the results sorted by auction start time.</p>
<p>Such a search is not always efficient with a <code>CONTAINS</code> structured query on a <code>CONTEXT</code> index, where the response time can vary significantly depending on the structured and <code>CONTAINS</code> clauses. This is because the intersection of structured and <code>CONTAINS</code> clauses or the ordering of text query is computed during query time.</p>
<p>By including structured information such as price and date within the <code>CTXCAT</code> index, query response time is always in an optimal range regardless of search criteria. This is because the interaction between text and structured query is pre-computed during indexing. Consequently query response time is optimum.</p>
</div>
</div>
<a id="CCAPP9270"></a>
<div class="props_rev_3" lang="en-US" id="GUID-7844B5A5-E096-4B6E-91D0-59D23B46B375"><a name="GUID-7844B5A5-E096-4B6E-91D0-59D23B46B375"></a>
<h2 id="CCAPP-GUID-7844B5A5-E096-4B6E-91D0-59D23B46B375" class="sect2">When is a CTXCAT index NOT suitable?</h2>
<div>
<p><span class="bold">Answer:</span> There are differences in the time and space needed to create the index. <code>CTXCAT</code> indexes take a bit longer to create and use considerably more disk space than <code>CONTEXT</code> indexes. If you are tight on disk space, you should consider carefully whether <code>CTXCAT</code> indexes are appropriate for you.</p>
<p>With respect to query operators, you can now use the richer <code>CONTEXT</code> grammar in <code>CATSEARCH</code> queries with query templates. The older restriction of a single <code>CATSEARCH</code> query grammar no longer holds.</p>
</div>
</div>
<a id="CCAPP9271"></a>
<div class="props_rev_3" lang="en-US" id="GUID-6AC6C18F-2F28-4DAA-ACDF-F59615B1CFD9"><a name="GUID-6AC6C18F-2F28-4DAA-ACDF-F59615B1CFD9"></a>
<h2 id="CCAPP-GUID-6AC6C18F-2F28-4DAA-ACDF-F59615B1CFD9" class="sect2">What optimizer hints are available, and what do they do?</h2>
<div>
<p><span class="bold">Answer:</span> The optimizer hint <code>INDEX(table column)</code> can be used in the usual way to drive the query with a text or b-tree index.</p>
<p>You can also use the <code>NO_INDEX(table column)</code> hint to disable a specific index.</p>
<p>Additionally, the <code>FIRST_ROWS(n)</code> hint has a special meaning for text queries and should be used when you need the first <code>n</code> hits to a query. Use of the <code>DOMAIN_INDEX_SORT</code> hint in conjunction with <code>ORDER BY SCORE(n) DESC</code> tells the Oracle optimizer to accept a sorted set from the text index, and not to do a further sort.</p>
<div class="infoboxnotealso" id="GUID-6AC6C18F-2F28-4DAA-ACDF-F59615B1CFD9__GUID-8288AFDF-74A9-407C-B349-9A322DAA1274">
<p class="notep1"><a id="GUID-8288AFDF-74A9-407C-B349-9A322DAA1274"></a>See Also:</p>
<p><span class="q">&#34;<a href="GUID-3B8371B5-F7AC-4A94-80EE-510B7820EE6D.htm">Optimizing Queries for Response Time</a>&#34;</span></p>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment6351">
<tr>
<td class="cellalignment6358">
<table class="cellalignment6356">
<tr>
<td class="cellalignment6355"><a href="GUID-45AA18EF-710D-4A32-8A6C-3522054B10A8.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment6355"><a href="GUID-82000645-74B9-407E-A9C0-C1ACEE319BD9.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright &nbsp;&copy;&nbsp;2001, 2015, Oracle and/or its affiliates. All rights reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment6360">
<table class="cellalignment6354">
<tr>
<td class="cellalignment6355"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment6355"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment6355"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment6355"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment6355"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment6355"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>