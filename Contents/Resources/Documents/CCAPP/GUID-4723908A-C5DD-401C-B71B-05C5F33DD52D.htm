<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-2803"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Improved%20Response%20Time%20with%20Local%20Partitioned%20Index%20for%20Order%20by%20Score"></a><title>Improved Response Time with Local Partitioned Index for Order by Score</title>
<meta name="generator" content="DITA Open Toolkit version 1.7.5"/>
<meta name="dcterms.created" content="2015-05-15T00:35:11Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Text Application Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41398-07"/>
<meta name="dcterms.isVersionOf" content="CCAPP"/>
<meta name="dcterms.rights" content="Copyright &nbsp;&copy;&nbsp;2001, 2015, Oracle and/or its affiliates. All rights reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-DE0B4638-A760-47C4-8593-F68ECEBFD370.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-8D490B4B-9A28-4FEA-AD73-9B91CD213542.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41398-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-4723908A-C5DD-401C-B71B-05C5F33DD52D"></a> <span id="PAGE" style="display:none;">210/321</span> <!-- End Header --><a id="CCAPP9241"></a>
<h1 id="CCAPP-GUID-4723908A-C5DD-401C-B71B-05C5F33DD52D" class="sect1">Improved Response Time with Local Partitioned Index for Order by Score</h1>
<div>
<p>Using the <code>DOMAIN_INDEX_SORT</code> hint on a local partitioned index might result in poor performance, especially when you order by score. This is because all hits to the query across all partitions must be obtained before the results can be sorted.</p>
<p>You can work around this by using an inline view when you use the <code>DOMAIN_INDEX_SORT</code> hint. Specifically, you can use the <code>DOMAIN_INDEX_SORT</code> hint to improve query performance on a local partitioned index under the following conditions:</p>
<ul style="list-style-type: disc;">
<li>
<p>The text query itself including the order by <code>SCORE</code>() clause is expressed as an in-line view.</p>
</li>
<li>
<p>The text query inside the in-line view contains the <code>DOMAIN_INDEX_SORT</code> hint.</p>
</li>
<li>
<p>The query on the in-line view has <code>ROWNUM</code> predicate limiting number of rows to fetch from the view.</p>
</li>
</ul>
<p>For example, if you have the following text query and local text index created on a partitioned table <code>doc_tab</code>:</p>
<pre>     select doc_id, score(1) from doc_tab 
        where contains(doc, &#39;oracle&#39;, 1)&gt;0 
        order by score(1) desc;
</pre>
<p>and you are only interested in fetching top 20 rows, you can rewrite the query to</p>
<pre>     select * from 
          (select /*+ DOMAIN_INDEX_SORT */ doc_id, score(1) from doc_tab 
              where contains(doc, &#39;oracle&#39;, 1)&gt;0 order by score(1) desc) 
      where rownum &lt; 21;
</pre>
<div class="infoboxnotealso" id="GUID-4723908A-C5DD-401C-B71B-05C5F33DD52D__GUID-AA5F204B-8CE7-43D3-9DD9-EB184DF03B3B">
<p class="notep1"><a id="GUID-AA5F204B-8CE7-43D3-9DD9-EB184DF03B3B"></a>See Also:</p>
<p><a class="olink SQLRF" target="_blank" href="../SQLRF/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code>EXPLAIN PLAN</code> statement</p>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment6351">
<tr>
<td class="cellalignment6358">
<table class="cellalignment6356">
<tr>
<td class="cellalignment6355"><a href="GUID-DE0B4638-A760-47C4-8593-F68ECEBFD370.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment6355"><a href="GUID-8D490B4B-9A28-4FEA-AD73-9B91CD213542.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright &nbsp;&copy;&nbsp;2001, 2015, Oracle and/or its affiliates. All rights reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment6360">
<table class="cellalignment6354">
<tr>
<td class="cellalignment6355"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment6355"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment6355"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment6355"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment6355"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment6355"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>