<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-2940"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Re-creating%20an%20Index"></a><title>Re-creating an Index</title>
<meta name="generator" content="DITA Open Toolkit version 1.7.5"/>
<meta name="keywords" content="index, online recreation, recreating a local partitioned index online, scheduled swap, all-at-once swap, scheduling local index re-creation with all-at-once swap, per-partition swap"/>
<meta name="dcterms.created" content="2015-05-15T00:35:11Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Text Application Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41398-07"/>
<meta name="dcterms.isVersionOf" content="CCAPP"/>
<meta name="dcterms.rights" content="Copyright &nbsp;&copy;&nbsp;2001, 2015, Oracle and/or its affiliates. All rights reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-8BC1BF13-762C-4A03-8BB9-F3198909EFF0.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-10365262-8B48-40AA-B1F3-DE3268EA9B39.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41398-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-BA511205-6725-4DE1-A990-EE936ABF7A22"></a> <span id="PAGE" style="display:none;">112/321</span> <!-- End Header --><a id="CCAPP9460"></a>
<h1 id="CCAPP-GUID-BA511205-6725-4DE1-A990-EE936ABF7A22" class="sect1">Re-creating an Index</h1>
<div>
<p>This section describes the procedures available for <a id="d17707e51" class="indexterm-anchor"></a>re-creating an index, which enable index settings to be changed. During the re-creation process, the index can be queried normally.</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-BA511205-6725-4DE1-A990-EE936ABF7A22.htm#GUID-03DAC3D9-55FB-41CC-96FC-C477D7747976">Re-creating a Global Index</a></p>
</li>
<li>
<p><a href="GUID-BA511205-6725-4DE1-A990-EE936ABF7A22.htm#GUID-63760C07-72B7-4BD9-B203-0C8019F505D5">Re-creating a Local Partitioned Index</a></p>
</li>
<li>
<p><a href="GUID-BA511205-6725-4DE1-A990-EE936ABF7A22.htm#GUID-A1D6E9F5-6C2E-456F-B2A8-FE683BF6408A">Re-creating a Global Index with Time Limit for Synch</a></p>
</li>
<li>
<p><a href="GUID-BA511205-6725-4DE1-A990-EE936ABF7A22.htm#GUID-EC426B06-CBD5-4115-97B5-169FB8BC3D19">Re-creating a Global Index with Scheduled Swap</a></p>
</li>
<li>
<p><a href="GUID-BA511205-6725-4DE1-A990-EE936ABF7A22.htm#GUID-B3073FC1-D377-427C-8A86-000430D57E93">Re-creating a Local Index with All-at-Once Swap</a></p>
</li>
<li>
<p><a href="GUID-BA511205-6725-4DE1-A990-EE936ABF7A22.htm#GUID-A104EBE4-DFF3-4BF7-9741-BCF2B293A986">Scheduling Local Index Re-creation with All-at-Once Swap</a></p>
</li>
<li>
<p><a href="GUID-BA511205-6725-4DE1-A990-EE936ABF7A22.htm#GUID-8360A5CA-2380-40C9-AFD1-82081027DB4C">Re-creating a Local Index with Per-Partition Swap</a></p>
</li>
</ul>
</div>
<a id="CCAPP9461"></a>
<div class="props_rev_3" lang="en-US" id="GUID-03DAC3D9-55FB-41CC-96FC-C477D7747976"><a name="GUID-03DAC3D9-55FB-41CC-96FC-C477D7747976"></a>
<h2 id="CCAPP-GUID-03DAC3D9-55FB-41CC-96FC-C477D7747976" class="sect2">Re-creating a Global Index</h2>
<div>
<p><a id="d17707e149" class="indexterm-anchor"></a>Oracle Text provides <a id="d17707e152" class="indexterm-anchor"></a><code>RECREATE_INDEX_ONLINE</code> to <a id="d17707e157" class="indexterm-anchor"></a>re-create a <code>CONTEXT</code> index with new preferences, while preserving the base table DML and query capability during the re-create process. You can use <a id="d17707e165" class="indexterm-anchor"></a><code>RECREATE_INDEX_ONLINE</code> in a one step procedure to re-create a <code>CONTEXT</code> index online for global indexes. Because the new index is created alongside the existing index, this operation requires storage roughly equal to the size of the existing index. Also, because the <code>RECREATE_INDEX_ONLINE</code> operation is performed online, you may issue DML on the base table during the operation. All DML that occurs during re-creation is logged into an online pending queue.</p>
<ul style="list-style-type: disc;">
<li>
<p>After the re-create index operation is complete, any new information resulting from DML during the re-creation process may not be immediately reflected. As with creating an index online, the index should be synchronized after the re-create index operation is complete in order to bring it fully up-to-date.</p>
</li>
<li>
<p><a id="d17707e185" class="indexterm-anchor"></a>Synchronizations issued against the index during the re-creation are processed against the old, existing data. Synchronizations are blocked during this time when queries return errors.</p>
</li>
<li>
<p>Optimize commands issued against the index during the re-creation return immediately without error and without processing.</p>
</li>
<li>
<p>During <code>RECREATE_INDEX_ONLINE</code>, the index can be queried normally most of the time. Queries return results based on the existing index and policy until after the final swap. Also, if you issue DML statements and synchronize them, then you will be able to see the new rows when you query on the existing index.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-03DAC3D9-55FB-41CC-96FC-C477D7747976__GUID-8499D1D9-1E0E-4CD8-85FB-AD41B96922D6">
<p class="notep1"><a id="GUID-8499D1D9-1E0E-4CD8-85FB-AD41B96922D6"></a>See Also:</p>
<p><a class="olink CCREF2111" target="_blank" href="../CCREF/cddlpkg.htm#CCREF2111"><span class="italic">Oracle Text Reference</span></a> to learn more about the <code>RECREATE_INDEX_ONLINE</code> procedure</p>
</div>
<div class="infobox-note" id="GUID-03DAC3D9-55FB-41CC-96FC-C477D7747976__GUID-AB2A54AF-B5A9-41B7-BA14-C75838DC754C">
<p class="notep1"><a id="GUID-AB2A54AF-B5A9-41B7-BA14-C75838DC754C"></a>Note:</p>
<p>Transactional query is not supported with <code>RECREATE_INDEX_ONLINE</code>.</p>
</div>
</div>
</div>
<a id="CCAPP9681"></a>
<div class="props_rev_3" lang="en-US" id="GUID-63760C07-72B7-4BD9-B203-0C8019F505D5"><a name="GUID-63760C07-72B7-4BD9-B203-0C8019F505D5"></a>
<h2 id="CCAPP-GUID-63760C07-72B7-4BD9-B203-0C8019F505D5" class="sect2">Re-creating a Local Partitioned Index</h2>
<div>
<p>If the index is locally partitioned, you cannot re-create the index in one step. You must first create a shadow policy, and then run the <a id="d17707e270" class="indexterm-anchor"></a><a id="d17707e272" class="indexterm-anchor"></a><code>RECREATE_INDEX_ONLINE</code> procedure for every partition. You can specify <code>SWAP</code> or <code>NOSWAP</code>, which indicates whether re-creating the index for the partition will swap the index partition data and index partition metadata.</p>
<p>This procedure can also be used to update the metadata (for example the storage preference) of each partition when you specify <a id="d17707e287" class="indexterm-anchor"></a><a id="d17707e289" class="indexterm-anchor"></a><code>NOPOPULATE</code> in the parameter string. This is useful for incremental building of a shadow index through time-limited synchronization. If <code>NOPOPULATE</code> is specified, then <code>NOSWAP</code> is silently enforced.</p>
<ul style="list-style-type: disc;">
<li>
<p>When all of the partitions use <code>NOSWAP</code>, the storage requirement is approximately equal to the size of the existing index. During the re-creation of the index partition, since no swapping is performed, queries on the partition are processed normally. Queries spanning multiple partitions return consistent results across partitions until the swapping stage is reached.</p>
</li>
<li>
<p>When the partitions are rebuilt with <code>SWAP</code>, the storage requirement for the operation is equal to the size of the existing index partition. Since index partition data and metadata are swapped after re-creation, queries spanning multiple partitions will not return consistent results from partition to partition, but will always be correct with respect to each index partition.</p>
</li>
<li>
<p>If <code>SWAP</code> is specified, then DML and synchronization on the partition are blocked during the swap process.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-63760C07-72B7-4BD9-B203-0C8019F505D5__GUID-C184AC61-531A-4131-BD61-946328FB54E2">
<p class="notep1"><a id="GUID-C184AC61-531A-4131-BD61-946328FB54E2"></a>See Also:</p>
<p><a class="olink CCREF0101" target="_blank" href="../CCREF/csql.htm#CCREF0101"><span class="italic">Oracle Text Reference</span></a> for complete information about <code>RECREATE_INDEX_ONLINE</code></p>
</div>
</div>
</div>
<a id="CCAPP9682"></a>
<div class="props_rev_3" lang="en-US" id="GUID-A1D6E9F5-6C2E-456F-B2A8-FE683BF6408A"><a name="GUID-A1D6E9F5-6C2E-456F-B2A8-FE683BF6408A"></a>
<h2 id="CCAPP-GUID-A1D6E9F5-6C2E-456F-B2A8-FE683BF6408A" class="sect2">Re-creating a Global Index with Time Limit for Synch</h2>
<div>
<p>You can control index re-creation to set a <a id="d17707e384" class="indexterm-anchor"></a>time limit for <code>SYNC_INDEX</code> during non-business hours and incrementally re-create the index. You use the <a class="olink CCREF2106" target="_blank" href="../CCREF/cddlpkg.htm#CCREF2106"><code>CREATE_SHADOW_INDEX</code></a> procedure with <code>POPULATE_PENDING</code> and maxtime.</p>
<div class="infoboxnotealso" id="GUID-A1D6E9F5-6C2E-456F-B2A8-FE683BF6408A__GUID-418A7C00-03CE-4DAF-AD92-CB4B42886541">
<p class="notep1"><a id="GUID-418A7C00-03CE-4DAF-AD92-CB4B42886541"></a>See Also:</p>
<p><a class="olink CCREF2106" target="_blank" href="../CCREF/cddlpkg.htm#CCREF2106"><span class="italic">Oracle Text Reference</span></a> for information and examples for <code>CREATE_SHADOW_INDEX</code></p>
</div>
</div>
</div>
<a id="CCAPP9683"></a>
<div class="props_rev_3" lang="en-US" id="GUID-EC426B06-CBD5-4115-97B5-169FB8BC3D19"><a name="GUID-EC426B06-CBD5-4115-97B5-169FB8BC3D19"></a>
<h2 id="CCAPP-GUID-EC426B06-CBD5-4115-97B5-169FB8BC3D19" class="sect2">Re-creating a Global Index with Scheduled Swap</h2>
<div>
<p>With <a id="d17707e466" class="indexterm-anchor"></a><code>CTX_DDL.EXCHANGE_SHADOW_INDEX</code> you can perform index re-creation during non-business hours when query failures and DML blocking can be tolerated.</p>
<div class="infoboxnotealso" id="GUID-EC426B06-CBD5-4115-97B5-169FB8BC3D19__GUID-4D4D9C34-33CD-4248-9032-DC314128CAE5">
<p class="notep1"><a id="GUID-4D4D9C34-33CD-4248-9032-DC314128CAE5"></a>See Also:</p>
<p><a class="olink CCREF2109" target="_blank" href="../CCREF/cddlpkg.htm#CCREF2109"><span class="italic">Oracle Text Reference</span></a> for information and examples for <code>CTX_DDL.EXCHANGE_SHADOW_INDEX</code></p>
</div>
</div>
</div>
<a id="CCAPP9684"></a>
<div class="props_rev_3" lang="en-US" id="GUID-B3073FC1-D377-427C-8A86-000430D57E93"><a name="GUID-B3073FC1-D377-427C-8A86-000430D57E93"></a>
<h2 id="CCAPP-GUID-B3073FC1-D377-427C-8A86-000430D57E93" class="sect2">Re-creating a Local Index with All-at-Once Swap</h2>
<div>
<p>You can re-create a local partitioned index online to create or change preferences. The swapping of the index and partition metadata occurs at the end of the process. Queries spanning multiple partitions return consistent results across partitions when re-create is in process, except at the end when <a id="d17707e537" class="indexterm-anchor"></a><a class="olink CCREF2109" target="_blank" href="../CCREF/cddlpkg.htm#CCREF2109"><code>EXCHANGE_SHADOW_INDEX</code></a> is running.</p>
</div>
</div>
<a id="CCAPP9501"></a>
<div class="props_rev_3" lang="en-US" id="GUID-A104EBE4-DFF3-4BF7-9741-BCF2B293A986"><a name="GUID-A104EBE4-DFF3-4BF7-9741-BCF2B293A986"></a>
<h2 id="CCAPP-GUID-A104EBE4-DFF3-4BF7-9741-BCF2B293A986" class="sect2">Scheduling Local Index Re-creation with All-at-Once Swap</h2>
<div>
<p>With <code>RECREATE_INDEX_ONLINE</code> of the <code>CTX.DDL</code> package, you can incrementally re-create a local partitioned index, where partitions are all swapped at the end.</p>
<div class="infoboxnotealso" id="GUID-A104EBE4-DFF3-4BF7-9741-BCF2B293A986__GUID-A87DA9B6-650B-45B3-A03B-557A2F67D07A">
<p class="notep1"><a id="GUID-A87DA9B6-650B-45B3-A03B-557A2F67D07A"></a>See Also:</p>
<p><a class="olink CCREF0101" target="_blank" href="../CCREF/csql.htm#CCREF0101"><span class="italic">Oracle Text Reference</span></a> for complete information and the example for this process with <code>RECREATE_INDEX_ONLINE</code></p>
</div>
</div>
</div>
<a id="CCAPP9502"></a>
<div class="props_rev_3" lang="en-US" id="GUID-8360A5CA-2380-40C9-AFD1-82081027DB4C"><a name="GUID-8360A5CA-2380-40C9-AFD1-82081027DB4C"></a>
<h2 id="CCAPP-GUID-8360A5CA-2380-40C9-AFD1-82081027DB4C" class="sect2">Re-creating a Local Index with Per-Partition Swap</h2>
<div>
<p>Instead of swapping all partitions at once, you can re-create the index online with new preferences, with each partition being swapped as it is completed. Queries across all partitions may return inconsistent results during this process. This procedure uses <code>CREATE_SHADOW_INDEX</code> with <code>RECREATE_INDEX_ONLINE</code>.</p>
<div class="infoboxnotealso" id="GUID-8360A5CA-2380-40C9-AFD1-82081027DB4C__GUID-EFEA55B7-0927-4B1E-AC9D-C1C9DEB72DC5">
<p class="notep1"><a id="GUID-EFEA55B7-0927-4B1E-AC9D-C1C9DEB72DC5"></a>See Also:</p>
<p><a class="olink CCREF2111" target="_blank" href="../CCREF/cddlpkg.htm#CCREF2111"><span class="italic">Oracle Text Reference</span></a> for an example of swapping index partitions with the <code>RECREATE_INDEX_ONLINE</code> procedure</p>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment6351">
<tr>
<td class="cellalignment6358">
<table class="cellalignment6356">
<tr>
<td class="cellalignment6355"><a href="GUID-8BC1BF13-762C-4A03-8BB9-F3198909EFF0.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment6355"><a href="GUID-10365262-8B48-40AA-B1F3-DE3268EA9B39.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright &nbsp;&copy;&nbsp;2001, 2015, Oracle and/or its affiliates. All rights reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment6360">
<table class="cellalignment6354">
<tr>
<td class="cellalignment6355"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment6355"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment6355"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment6355"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment6355"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment6355"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>