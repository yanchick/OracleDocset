<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-2970"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/JSP%20Web%20Application%20Sample%20Code"></a><title>JSP Web Application Sample Code</title>
<meta name="generator" content="DITA Open Toolkit version 1.7.5"/>
<meta name="dcterms.created" content="2015-05-15T00:35:11Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Text Application Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41398-07"/>
<meta name="dcterms.isVersionOf" content="CCAPP"/>
<meta name="dcterms.rights" content="Copyright &nbsp;&copy;&nbsp;2001, 2015, Oracle and/or its affiliates. All rights reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-3749D0FF-0B93-4224-AD99-0AC17FDF4A01.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-72F18A97-92D7-411D-871A-27AD749D6141.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41398-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-CC35F085-B0A1-450D-B5C5-1E16C747AF0A"></a> <span id="PAGE" style="display:none;">311/321</span> <!-- End Header --><a id="CCAPP9382"></a>
<h1 id="CCAPP-GUID-CC35F085-B0A1-450D-B5C5-1E16C747AF0A" class="sect1">JSP Web Application Sample Code</h1>
<div>
<p>This section lists the Java code used to build the example Web application, as shown in the <code>TextSearchApp.jsp</code> file.</p>
<pre>&lt;%@page language=&#34;java&#34; pageEncoding=&#34;utf-8&#34; contentType=&#34;text/html; charset=utf-8&#34; %&gt;
&lt;%@ page import=&#34;java.sql.*, java.util.*, java.net.*, 
   oracle.jdbc.*, oracle.sql.*, oracle.jsp.dbutil.*&#34; %&gt;
 
&lt;%
// Change these details to suit your database and user details
 
String connStr = &#34;jdbc:oracle:thin:@//servername:1521/pdb1&#34;;
String dbUser  = &#34;scott&#34;;
String dbPass  = &#34;tiger&#34;;
 
// The table we&#39;re running queries against is called SEARCH_TABLE.
// It must have columns:
//  tk     number  primary key,     (primary key is important for document services)
//  title  varchar2(2000),
//  text   clob
// There must be a CONTEXT index called IDX_SEARCH_TABLE on the text column
 
request.setCharacterEncoding(&#34;UTF-8&#34;);
 
java.util.Properties info=new java.util.Properties();
Connection conn  = null;
ResultSet rset   = null;
OracleCallableStatement callStmt = null;
Statement stmt   = null;
String userQuery = null;
String myQuery   = null;
String action    = null;
String theTk     = null;
URLEncoder myEncoder;
int count=0;
int loopNum=0;
int startNum=0;
 
userQuery     =   request.getParameter(&#34;query&#34;);
action        =   request.getParameter(&#34;action&#34;);
theTk         =   request.getParameter(&#34;tk&#34;);
 
if (action == null)  action = &#34;&#34;;
 
// Connect to database
 
try {
  DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver() );
  info.put (&#34;user&#34;,     dbUser);
  info.put (&#34;password&#34;, dbPass);
  conn      = DriverManager.getConnection(connStr,info);
}
  catch (SQLException e) {
%&gt;    &lt;b&gt;Error: &lt;/b&gt; &lt;%= e %&gt;&lt;p&gt;  &lt;%
  } 
 
if ( action.equals(&#34;doHTML&#34;) ) {
  // Directly display the text of the document
  try {
 
    // not attempting to share the output table for this example, we&#39;ll truncate it each time
    conn.createStatement().execute(&#34;truncate table OUTPUT_TABLE&#34;);
 
    String sql = &#34;{ call ctx_doc.filter( index_name=&gt;&#39;IDX_SEARCH_TABLE&#39;, textkey=&gt; &#39;&#34; + theTk + &#34;&#39;, restab=&gt;&#39;OUTPUT_TABLE&#39;, plaintext=&gt;false ) }&#34;;
    PreparedStatement s = conn.prepareCall( sql );
    s.execute();
 
    sql = &#34;select document from output_table where rownum = 1&#34;;
    stmt = conn.createStatement();
    rset = stmt.executeQuery(sql);
 
    rset.next();
    oracle.sql.CLOB res = (oracle.sql.CLOB) rset.getClob(1);
    // should fetch from clob piecewise, but to keep it simple we&#39;ll just fetch 32K to a string
    String txt = res.getSubString(1, 32767);
    out.println(txt);
  }
  catch (SQLException e) {
%&gt;    &lt;b&gt;Error: &lt;/b&gt; &lt;%= e %&gt;&lt;p&gt; &lt;%
  }
}
else if ( action.equals(&#34;doHighlight&#34;) ) {
  // Display the text of the document with highlighting from the &#34;markup&#34; function
  try {
 
    // not attempting to share the output table for this example, we&#39;ll truncate it each time
    conn.createStatement().execute(&#34;truncate table OUTPUT_TABLE&#34;);
 
    String sql = &#34;{ call ctx_doc.markup( index_name=&gt;&#39;IDX_SEARCH_TABLE&#39;, textkey=&gt; &#39;&#34; + theTk + &#34;&#39;, text_query =&gt; &#39;&#34; + userQuery + &#34;&#39;, restab=&gt;&#39;OUTPUT_TABLE&#39;, plaintext=&gt;false, starttag =&gt; &#39;&lt;i&gt;&lt;font color=\&#34;red\&#34;&gt;&#39;, endtag =&gt; &#39;&lt;/font&gt;&lt;/i&gt;&#39; ) }&#34;;
    PreparedStatement s = conn.prepareCall( sql );
    s.execute();
 
    sql = &#34;select document from output_table where rownum = 1&#34;;
    stmt = conn.createStatement();
    rset = stmt.executeQuery(sql);
 
    rset.next();
    oracle.sql.CLOB res = (oracle.sql.CLOB) rset.getClob(1);
    // should fetch from clob piecewise, but to keep it simple we&#39;ll just fetch 32K to a string
    String txt = res.getSubString(1, 32767);
    out.println(txt);
  }
  catch (SQLException e) {
%&gt;    &lt;b&gt;Error: &lt;/b&gt; &lt;%= e %&gt;&lt;p&gt; &lt;%
  }
}
 
else if ( action.equals(&#34;doThemes&#34;) ) {
  // Display the text of the document with highlighting from the &#34;markup&#34; function
  try {
 
    // not attempting to share the output table for this example, we&#39;ll truncate it each time
    conn.createStatement().execute(&#34;truncate table THEME_TABLE&#34;);
 
    String sql = &#34;{ call ctx_doc.themes( index_name=&gt;&#39;IDX_SEARCH_TABLE&#39;, textkey=&gt; &#39;&#34; + theTk + &#34;&#39;, restab=&gt;&#39;THEME_TABLE&#39;) }&#34;;
    PreparedStatement s = conn.prepareCall( sql );
    s.execute();
 
    sql = &#34;select * from ( select theme, weight from theme_table order by weight desc ) where rownum &lt;= 20&#34;;
    stmt = conn.createStatement();
    rset = stmt.executeQuery(sql);
    int    weight = 0;
    String theme  = &#34;&#34;;
%&gt;
    &lt;h2&gt;The top 20 themes of the document&lt;/h2&gt;
    &lt;table BORDER=1 CELLSPACING=0 CELLPADDING=0&#34;
       &lt;tr bgcolor=&#34;#CCCC99&#34;&gt;
       &lt;th&gt;&lt;font face=&#34;arial&#34; color=&#34;#336699&#34;&gt;Theme&lt;/th&gt;
       &lt;th&gt;&lt;font face=&#34;arial&#34; color=&#34;#336699&#34;&gt;Weight&lt;/th&gt;
       &lt;/tr&gt;
&lt;%
    while ( rset.next() ) {
 
      theme  = rset.getString(1); 
      weight = (int)rset.getInt(2);
%&gt;
       &lt;tr bgcolor=&#34;ffffe0&#34;&gt;
         &lt;td align=&#34;center&#34;&gt;&lt;font face=&#34;arial&#34;&gt;&lt;b&gt; &lt;%= theme  %&gt; &lt;/b&gt;&lt;/font&gt;&lt;/td&gt;
         &lt;td align=&#34;center&#34;&gt;&lt;font face=&#34;arial&#34;&gt; &lt;%= weight %&gt;&lt;/font&gt;&lt;/td&gt;
       &lt;/tr&gt;
&lt;%
    }
 
%&gt;
&lt;/table&gt;
&lt;%
  }
  catch (SQLException e) {
%&gt;    &lt;b&gt;Error: &lt;/b&gt; &lt;%= e %&gt;&lt;p&gt; &lt;%
  }
}
else if ( action.equals(&#34;doGists&#34;) ) {
  // Display the text of the document with highlighting from the &#34;markup&#34; function
  try {
 
    // not attempting to share the output table for this example, we&#39;ll truncate it each time
    conn.createStatement().execute(&#34;truncate table GIST_TABLE&#34;);
 
    String sql = &#34;{ call ctx_doc.gist( index_name=&gt;&#39;IDX_SEARCH_TABLE&#39;, textkey=&gt; &#39;&#34; + theTk + &#34;&#39;, restab=&gt;&#39;GIST_TABLE&#39;, query_id=&gt;1) }&#34;;
    PreparedStatement s = conn.prepareCall( sql );
    s.execute();
 
    sql = &#34;select pov, gist from gist_table where pov = &#39;GENERIC&#39; and query_id = 1&#34;;
    stmt = conn.createStatement();
    rset = stmt.executeQuery(sql);
    String pov   = &#34;&#34;;
    String gist  = &#34;&#34;;
 
    while ( rset.next() ) {
 
      pov   = rset.getString(1); 
      oracle.sql.CLOB gistClob = (oracle.sql.CLOB) rset.getClob(2);
 
      out.println(&#34;&lt;h3&gt;Document Gist for Point of View: &#34; + pov + &#34;&lt;/h3&gt;&#34;);
      gist = gistClob.getSubString(1, 32767);
      out.println(gist);
 
    }
 
%&gt;
&lt;/table&gt;
&lt;%
  }
  catch (SQLException e) {
%&gt;    &lt;b&gt;Error: &lt;/b&gt; &lt;%= e %&gt;&lt;p&gt; &lt;%
  }
}
 
if ( (action.equals(&#34;&#34;)) &amp;&amp; ( (userQuery == null) || (userQuery.length() == 0) ) ) {
%&gt;
  &lt;html&gt;
    &lt;title&gt;Text Search&lt;/title&gt;
    &lt;body&gt;
      &lt;table width=&#34;100%&#34;&gt;
        &lt;tr bgcolor=&#34;#336699&#34;&gt;
          &lt;td&gt;&lt;font face=&#34;arial&#34; align=&#34;left&#34; 
          color=&#34;#CCCC99&#34; size=&#34;+2&#34;&gt;Text Search&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
    &lt;center&gt;
      &lt;form method = post&gt;
      Search for:
      &lt;input type=&#34;text&#34; name=&#34;query&#34; size = &#34;30&#34;&gt;
      &lt;input type=&#34;submit&#34; value=&#34;Search&#34;&gt;
      &lt;/form&gt;
    &lt;/center&gt;
    &lt;/body&gt;
  &lt;/html&gt;
&lt;%
}
else if (action.equals(&#34;&#34;) ) {
%&gt;
  &lt;html&gt;
    &lt;title&gt;Text Search Result Page&lt;/title&gt;
    &lt;body text=&#34;#000000&#34; bgcolor=&#34;#FFFFFF&#34; link=&#34;#663300&#34; 
          vlink=&#34;#996633&#34; alink=&#34;#ff6600&#34;&gt;
      &lt;table width=&#34;100%&#34;&gt;
        &lt;tr bgcolor=&#34;#336699&#34;&gt;
          &lt;td&gt;&lt;font face=&#34;arial&#34; align=&#34;left&#34; 
                 color=&#34;#CCCC99&#34; size=+2&gt;Text Search&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
    &lt;center&gt;
      &lt;form method = post action=&#34;TextSearchApp.jsp&#34;&gt;
      Search for:
      &lt;input type=text name=&#34;query&#34; value=&#34;&lt;%= userQuery %&gt;&#34; size = 30&gt;
      &lt;input type=submit value=&#34;Search&#34;&gt;
      &lt;/form&gt;
    &lt;/center&gt;
&lt;%
  myQuery   =   URLEncoder.encode(userQuery);
  try {
 
    stmt      = conn.createStatement();
 
    String numStr =   request.getParameter(&#34;sn&#34;);
    if(numStr!=null)
      startNum=Integer.parseInt(numStr);
    String theQuery =   translate(userQuery);
 
    callStmt =(OracleCallableStatement)conn.prepareCall(&#34;begin &#34;+
         &#34;?:=ctx_query.count_hits(index_name=&gt;&#39;IDX_SEARCH_TABLE&#39;, &#34;+
         &#34;text_query=&gt;?&#34;+
         &#34;); &#34; +
         &#34;end; &#34;);
    callStmt.setString(2,theQuery);
    callStmt.registerOutParameter(1, OracleTypes.NUMBER);
    callStmt.execute();
    count=((OracleCallableStatement)callStmt).getNUMBER(1).intValue();
    if(count&gt;=(startNum+20)){
%&gt;
    &lt;font color=&#34;#336699&#34; FACE=&#34;Arial&#34; SIZE=+1&gt;Results
           &lt;%=startNum+1%&gt; - &lt;%=startNum+20%&gt; of &lt;%=count%&gt; matches
&lt;%
    }
    else if(count&gt;0){
%&gt;
    &lt;font color=&#34;#336699&#34; FACE=&#34;Arial&#34; SIZE=+1&gt;Results
           &lt;%=startNum+1%&gt; - &lt;%=count%&gt; of &lt;%=count%&gt; matches
&lt;%
    }
    else {
%&gt;
    &lt;font color=&#34;#336699&#34; FACE=&#34;Arial&#34; SIZE=+1&gt;No match found
&lt;%
    }
%&gt;
  &lt;table width=&#34;100%&#34;&gt;
  &lt;TR ALIGN=&#34;RIGHT&#34;&gt;
&lt;%
  if((startNum&gt;0)&amp;(count&lt;=startNum+20))
  {
%&gt;
    &lt;TD ALIGN=&#34;RIGHT&#34;&gt;
    &lt;a href=&#34;TextSearchApp.jsp?sn=&lt;%=startNum-20 %&gt;&amp;query=
            &lt;%=myQuery %&gt;&#34;&gt;previous20&lt;/a&gt;
    &lt;/TD&gt;
&lt;%
  }
  else if((count&gt;startNum+20)&amp;(startNum==0))
  {
%&gt;
    &lt;TD ALIGN=&#34;RIGHT&#34;&gt;
    &lt;a href=&#34;TextSearchApp.jsp?sn=&lt;%=startNum+20 
          %&gt;&amp;query=&lt;%=myQuery %&gt;&#34;&gt;next20&lt;/a&gt;
    &lt;/TD&gt;
&lt;%
  }
  else if((count&gt;startNum+20)&amp;(startNum&gt;0))
  {
%&gt;
    &lt;TD ALIGN=&#34;RIGHT&#34;&gt;
    &lt;a href=&#34;TextSearchApp.jsp?sn=&lt;%=startNum-20 %&gt;&amp;query=
              &lt;%=myQuery %&gt;&#34;&gt;previous20&lt;/a&gt;
    &lt;a href=&#34;TextSearchApp.jsp?sn=&lt;%=startNum+20 %&gt;&amp;query=
              &lt;%=myQuery %&gt;&#34;&gt;next20&lt;/a&gt;
    &lt;/TD&gt;
&lt;%
  }
%&gt;
  &lt;/TR&gt;
  &lt;/table&gt;
&lt;%
    String ctxQuery = 
        &#34; select /*+ FIRST_ROWS */ &#34; + 
        &#34;   tk, TITLE, score(1) scr, &#34; +
        &#34;   ctx_doc.snippet (&#39;IDX_SEARCH_TABLE&#39;, tk, &#39;&#34; + theQuery + &#34;&#39;) &#34; + 
        &#34; from search_table &#34; + 
        &#34; where contains(TEXT, &#39;&#34;+theQuery+&#34;&#39;,1 ) &gt; 0 &#34; +
        &#34; order by score(1) desc&#34;; 
    rset = stmt.executeQuery(ctxQuery);
    String   tk           = null;
    String[] colToDisplay = new String[1];
    int      myScore      = 0;
    String   snippet      = &#34;&#34;;
    int      items        = 0;
    while (rset.next()&amp;&amp;items&lt; 20) {
      if(loopNum&gt;=startNum)
      {
        tk = rset.getString(1);
        colToDisplay[0] = rset.getString(2);
        myScore         = (int)rset.getInt(3);
        snippet         = rset.getString(4);
        items++;
        if (items == 1) {
%&gt;
        &lt;center&gt;
          &lt;table BORDER=1 CELLSPACING=0 CELLPADDING=0 width=&#34;100%&#34;
            &lt;tr bgcolor=&#34;#CCCC99&#34;&gt;
              &lt;th&gt;&lt;font face=&#34;arial&#34; color=&#34;#336699&#34;&gt;Score&lt;/th&gt;
              &lt;th&gt;&lt;font face=&#34;arial&#34; color=&#34;#336699&#34;&gt;TITLE&lt;/th&gt;
              &lt;th&gt;&lt;font face=&#34;arial&#34; color=&#34;#336699&#34;&gt;Snippet&lt;/th&gt;
              &lt;th&gt; &lt;font face=&#34;arial&#34; 
                       color=&#34;#336699&#34;&gt;Document Services&lt;/th&gt;
            &lt;/tr&gt;
&lt;%   } %&gt;
      &lt;tr bgcolor=&#34;#FFFFE0&#34;&gt;
        &lt;td ALIGN=&#34;CENTER&#34;&gt; &lt;%= myScore %&gt;%&lt;/td&gt;
        &lt;td&gt; &lt;%= colToDisplay[0] %&gt; &lt;/td&gt;
        &lt;td&gt; &lt;%= snippet %&gt; &lt;/td&gt;
        &lt;td&gt;
          &lt;a href=&#34;TextSearchApp.jsp?action=doHTML&amp;tk=&lt;%= tk %&gt;&#34;&gt;HTML&lt;/a&gt; &amp;nbsp;
          &lt;a href=&#34;TextSearchApp.jsp?action=doHighlight&amp;tk=&lt;%= tk %&gt;&amp;query=&lt;%= theQuery %&gt;&#34;&gt;Highlight&lt;/a&gt; &amp;nbsp;
          &lt;a href=&#34;TextSearchApp.jsp?action=doThemes&amp;tk=&lt;%= tk %&gt;&amp;query=&lt;%= theQuery %&gt;&#34;&gt;Themes&lt;/a&gt; &amp;nbsp;
          &lt;a href=&#34;TextSearchApp.jsp?action=doGists&amp;tk=&lt;%= tk %&gt;&#34;&gt;Gist&lt;/a&gt; &amp;nbsp;
        &lt;/td&gt;
      &lt;/tr&gt;
&lt;%
      }
      loopNum++;
    }
} catch (SQLException e) {
%&gt;
    &lt;b&gt;Error: &lt;/b&gt; &lt;%= e %&gt;&lt;p&gt;
&lt;%
} finally {
  if (conn != null) conn.close();
  if (stmt != null) stmt.close();
  if (rset != null) rset.close();
  }
%&gt;
  &lt;/table&gt;
  &lt;/center&gt;
  &lt;table width=&#34;100%&#34;&gt;
  &lt;TR ALIGN=&#34;RIGHT&#34;&gt;
&lt;%
  if((startNum&gt;0)&amp;(count&lt;=startNum+20))
  {
%&gt;
    &lt;TD ALIGN=&#34;RIGHT&#34;&gt;
    &lt;a href=&#34;TextSearchApp.jsp?sn=&lt;%=startNum-20 %&gt;&amp;query=
               &lt;%=myQuery %&gt;&#34;&gt;previous20&lt;/a&gt;
    &lt;/TD&gt;
&lt;%
  }
  else if((count&gt;startNum+20)&amp;(startNum==0))
  {
%&gt;
    &lt;TD ALIGN=&#34;RIGHT&#34;&gt;
    &lt;a href=&#34;TextSearchApp.jsp?sn=&lt;%=startNum+20 %&gt;&amp;query=
          &lt;%=myQuery %&gt;&#34;&gt;next20&lt;/a&gt;
    &lt;/TD&gt;
&lt;%
  }
  else if((count&gt;startNum+20)&amp;(startNum&gt;0))
  {
%&gt;
    &lt;TD ALIGN=&#34;RIGHT&#34;&gt;
    &lt;a href=&#34;TextSearchApp.jsp?sn=&lt;%=startNum-20 %&gt;&amp;query=
          &lt;%=myQuery %&gt;&#34;&gt;previous20&lt;/a&gt;
    &lt;a href=&#34;TextSearchApp.jsp?sn=&lt;%=startNum+20 %&gt;&amp;query=
          &lt;%=myQuery %&gt;&#34;&gt;next20&lt;/a&gt;
    &lt;/TD&gt;
&lt;%
  }
%&gt;
  &lt;/TR&gt;
  &lt;/table&gt;
  &lt;/body&gt;&lt;/html&gt;
&lt;%}
 
%&gt;
&lt;%!
   public String translate (String input)
   {
      Vector reqWords = new Vector();
      StringTokenizer st = new StringTokenizer(input, &#34; &#39;&#34;, true);
      while (st.hasMoreTokens())
      {
        String token = st.nextToken();
        if (token.equals(&#34;&#39;&#34;))
        {
           String phrase = getQuotedPhrase(st);
           if (phrase != null)
           {
              reqWords.addElement(phrase);
           }
        }
        else if (!token.equals(&#34; &#34;))
        {
           reqWords.addElement(token);
        }
      }
      return getQueryString(reqWords);
   }
 
   private String getQuotedPhrase(StringTokenizer st)
   {
      StringBuffer phrase = new StringBuffer();
      String token = null;
      while (st.hasMoreTokens() &amp;&amp; (!(token = st.nextToken()).equals(&#34;&#39;&#34;)))
      {
        phrase.append(token);
      }
      return phrase.toString();
   }
  
   private String getQueryString(Vector reqWords)
   {
      StringBuffer query = new StringBuffer(&#34;&#34;);
      int length = (reqWords == null) ? 0 : reqWords.size();
      for (int ii=0; ii &lt; length; ii++)
      {
         if (ii != 0)
         {
           query.append(&#34; &amp; &#34;);
         }
         query.append(&#34;{&#34;);
         query.append(reqWords.elementAt(ii));
         query.append(&#34;}&#34;);
      }
      return query.toString();
   }
%&gt;
</pre></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment6351">
<tr>
<td class="cellalignment6358">
<table class="cellalignment6356">
<tr>
<td class="cellalignment6355"><a href="GUID-3749D0FF-0B93-4224-AD99-0AC17FDF4A01.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment6355"><a href="GUID-72F18A97-92D7-411D-871A-27AD749D6141.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright &nbsp;&copy;&nbsp;2001, 2015, Oracle and/or its affiliates. All rights reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment6360">
<table class="cellalignment6354">
<tr>
<td class="cellalignment6355"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment6355"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment6355"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment6355"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment6355"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment6355"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>