<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-2682"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Creating%20Transportable%20Tablespace%20Sets"></a><title>Creating Transportable Tablespace Sets</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-06-07T23:52:16Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Backup and Recovery User&#39;s Guide"/>
<meta name="dcterms.identifier" content="E50658-09"/>
<meta name="dcterms.isVersionOf" content="BRADV"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="rcmdupad.htm" title="Previous" type="text/html"/>
<link rel="Next" href="rcmxplat.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E50658-09.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-123F4E45-0324-4D1D-980F-E176A9E22C87"></a> <span id="PAGE" style="display:none;">41/48</span> <!-- End Header -->
<a id="BRADV05141"></a>
<h1 id="BRADV-GUID-123F4E45-0324-4D1D-980F-E176A9E22C87" class="sect1"><span class="enumeration_chapter">27</span> Creating Transportable Tablespace Sets</h1>
<div>
<p><a id="d107977e67" class="indexterm-anchor"></a>This <a id="d107977e70" class="indexterm-anchor"></a>chapter explains how to use RMAN to create transportable tablespace sets by restoring backups. This discussion assumes that you are familiar with the <a href="glossary.htm#GUID-E843F9DE-6FCC-4614-BA56-486F6D9BBD25"><span class="xrefglossterm">transportable tablespace</span></a> procedure described in <a class="olink ADMIN01101" target="_blank" href="../ADMIN/transport.htm#ADMIN01101"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a>. The procedure in this chapter is an alternative technique for generating transportable tablespace sets.This chapter contains the following sections:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmttbsb.htm#GUID-E118186B-AF31-4CD1-ABA7-2C9F1A07EB98">Overview of Creating Transportable Tablespace Sets</a></p>
</li>
<li>
<p><a href="rcmttbsb.htm#GUID-2FE8ECB5-8D0F-490F-889D-3B867D3F29ED">Customizing Initialization Parameters for the Auxiliary Instance</a></p>
</li>
<li>
<p><a href="rcmttbsb.htm#GUID-B52E4D68-4F7F-4E4F-9F9E-53EEB1982047">Creating a Transportable Tablespace Set</a></p>
</li>
<li>
<p><a href="rcmttbsb.htm#GUID-4486B94F-E39B-4E40-8D7D-9F6C65904E01">Troubleshooting the Creation of Transportable Tablespace Sets</a></p>
</li>
<li>
<p><a href="rcmttbsb.htm#GUID-8692A076-0EF0-4B98-8381-957D143D2CDC">Transportable Tablespace Set Scenarios</a></p>
</li>
</ul>
</div>
<a id="BRADV89959"></a>
<div class="props_rev_3"><a id="GUID-E118186B-AF31-4CD1-ABA7-2C9F1A07EB98"></a>
<h2 id="BRADV-GUID-E118186B-AF31-4CD1-ABA7-2C9F1A07EB98" class="sect2">Overview of Creating Transportable Tablespace Sets</h2>
<div>
<p>This section explains the basic concepts and tasks involved in creating transportable tablespace sets from RMAN backups.</p>
</div>
<a id="BRADV89960"></a>
<div class="props_rev_3"><a id="GUID-BA6B8057-FC2C-429F-BF76-E17245231E47"></a>
<h3 id="BRADV-GUID-BA6B8057-FC2C-429F-BF76-E17245231E47" class="sect3">Purpose of Creating Transportable Tablespace Sets</h3>
<div>
<p>A <a href="glossary.htm#GUID-B242A9F0-1B31-4646-A873-CBF72E8A12E7"><span class="xrefglossterm">transportable tablespace set</span></a> contains data files for a set of tablespaces and an export file containing structural metadata for the set of tablespaces. The export file is generated by Data Pump Export.</p>
<p>One use of transportable tablespace sets is to create a tablespace repository. For example, if you have a database with some tablespaces used for quarterly reporting, you can create transportable sets for these tablespaces for storage in a tablespace repository. Subsequently, versions of the tablespace can be requested from the repository and attached to another database for use in generating reports.</p>
<p>Another use for transportable tablespaces is in an Oracle Streams environment. When preparing to use Oracle Streams to keep a destination database synchronized with a source database, you must perform Oracle Streams instantiation. You must bring the destination database up to a given SCN at which the two databases were known to be synchronized before you can use Oracle Streams to move subsequent updates from the source database to the destination database. You can create transportable tablespace sets from backups as part of the Oracle Streams instantiation.</p>
<p>A key benefit of the RMAN <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> command is that it does not need access to the live data files from the tablespaces to be transported. <a id="d107977e266" class="indexterm-anchor"></a>In contrast, the transportable tablespace technique described in <a class="olink ADMIN01101" target="_blank" href="../ADMIN/transport.htm#ADMIN01101"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> requires that the tablespaces to be transported are open read-only during the transport. Thus, transporting from backups improves database availability, especially for large tablespaces, because the tablespaces to be transported can remain open for writes during the operation. Also, placing a tablespace in read-only mode can take a long time, depending on current database activity.</p>
<p>The RMAN <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> command also enables you to specify a target point in time, SCN, or restore point during your recovery window and transport tablespace data as it existed at that time (see <span class="q">&#34;<a href="rcmttbsb.htm#GUID-6AE347E4-5364-4C67-B18D-EE30282F566D">Creating a Transportable Tablespace Set at a Specified Time or SCN</a>&#34;</span>). For example, if your <a href="glossary.htm#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">backup retention policy</span></a> guarantees a 1 week recovery window, and if you want to create transportable tablespaces based on the contents of the database on the last day of the month, then RMAN can perform this task at any time during the first week of the next month.</p>
<div class="infoboxnotealso" id="GUID-BA6B8057-FC2C-429F-BF76-E17245231E47__GUID-B0745DC8-700D-4534-9E2E-FA2795CD2CB8">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink RCMRF1919" target="_blank" href="../RCMRF/rcmsynta2022.htm#RCMRF1919"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for reference information about the <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> command</p>
</li>
<li>
<p><a class="olink STREP" target="_blank" href="../STREP/toc.htm"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for more details on RMAN and tablespace repositories</p>
</li>
<li>
<p><a class="olink STREP139" target="_blank" href="../STREP/instant.htm#STREP139"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for more details on RMAN and Oracle Streams instantiations</p>
</li>
</ul>
</div>
</div>
</div>
<a id="BRADV464"></a><a id="BRADV89961"></a>
<div class="props_rev_3"><a id="GUID-07595E7B-3712-4AEF-A5EC-EBF05B623B75"></a>
<h3 id="BRADV-GUID-07595E7B-3712-4AEF-A5EC-EBF05B623B75" class="sect3">Basic Concepts of Transportable Tablespace Sets</h3>
<div>
<p>You create a transportable tablespace set by connecting RMAN to a source database as <code class="codeph">TARGET</code> and then executing the <code class="codeph">TRANSPORT TABLESPACE</code> command. The source database contains the tablespaces to be transported.</p>
<p>You must have a backup of all needed tablespaces and archived redo log files available for use by RMAN that can be recovered to the target point in time for the <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> operation. <a href="rcmttbsb.htm#GUID-07595E7B-3712-4AEF-A5EC-EBF05B623B75__CHDBFHBE">Figure 27-1</a> illustrates the basic process of transportable tablespace creation.</p>
<div class="figure" id="GUID-07595E7B-3712-4AEF-A5EC-EBF05B623B75__CHDBFHBE">
<p class="titleinfigure">Figure 27-1 RMAN Transportable Tablespace from Backup: Architecture</p>
<img width="462" height="521" src="img/GUID-A7B3AB70-9552-4502-992E-A4CF0356439A-default.gif" alt="Description of Figure 27-1 follows" title="Description of Figure 27-1 follows"/><br/>
<a href="img_text/GUID-A7B3AB70-9552-4502-992E-A4CF0356439A-print.htm">Description of &#34;Figure 27-1 RMAN Transportable Tablespace from Backup: Architecture&#34;</a></div>
<!-- class="figure" -->
<p>The process shown in <a href="rcmttbsb.htm#GUID-07595E7B-3712-4AEF-A5EC-EBF05B623B75__CHDBFHBE">Figure 27-1</a> occurs in the following phases:</p>
<ol>
<li>
<p>RMAN starts an <a href="glossary.htm#GUID-4B8BBEA0-2F0F-4C5E-AE69-F1EE4DBA1B46"><span class="xrefglossterm">auxiliary instance</span></a>.</p>
<p>An auxiliary instance is created by RMAN on the same host as the source database to perform the restore and recovery of the tablespaces. RMAN automatically creates an initialization parameter file for the auxiliary instance and starts it <code class="codeph">NOMOUNT</code>.</p>
</li>
<li>
<p>RMAN restores a backup of the source database control file to serve as the auxiliary instance control file and mounts this control file.</p>
</li>
<li>
<p>RMAN restores <a href="glossary.htm#GUID-C83736EA-941E-40D5-9BC4-04AD86D5CDB2"><span class="xrefglossterm">auxiliary set</span></a> and transportable set data files from the backups of the source database.</p>
<p>The <a href="glossary.htm#GUID-C83736EA-941E-40D5-9BC4-04AD86D5CDB2"><span class="xrefglossterm">auxiliary set</span></a> includes data files and other files required for the tablespace transport but which are not themselves part of the transportable tablespace set. The auxiliary set typically includes the <code class="codeph">SYSTEM</code> and <code class="codeph">SYSAUX</code> tablespaces, temp files, and data files containing rollback or undo segments. The auxiliary instance has other files associated with it, such as its own control file, parameter file, and online logs, but they are not part of the auxiliary set.</p>
<p>RMAN stores the auxiliary data files in the selected <a href="glossary.htm#GUID-84F742CC-9172-4616-90AA-43CED507D4BB"><span class="xrefglossterm">auxiliary destination</span></a>. The auxiliary destination<a id="d107977e459" class="indexterm-anchor"></a> is a disk location where RMAN can store auxiliary set files such as the parameter file, data files (other than those in the transportable set), control files, and online logs of the auxiliary instance during the transport. If the transport succeeds, then RMAN deletes these files.</p>
<p>RMAN stores the transportable set files in the <a href="glossary.htm#GUID-D4C76365-E59D-4B5B-B62F-7E20F259BAA0"><span class="xrefglossterm">tablespace destination</span></a>. The tablespace destination is a disk location that by default contains the data file copies and other output files when the tablespace transport command completes.</p>
</li>
<li>
<p>RMAN performs <a href="glossary.htm#GUID-FCC8BB91-79B6-4AF1-974A-43E75CD161E3"><span class="xrefglossterm">database point-in-time recovery (DBPITR)</span></a> at the auxiliary instance.</p>
<p>The recovery updates auxiliary and transportable set data files to their contents as of the target time specified for the <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> command. If no target time is specified, then RMAN recovers with all available redo. RMAN restores archived redo logs from backup as necessary at the auxiliary destination (or other location) and deletes them after they are applied.</p>
</li>
<li>
<p>RMAN opens the auxiliary database with the <code class="codeph">RESETLOGS</code> option.</p>
<p>The data files now reflect the tablespace contents as of the target SCN for the tablespace transport operation.</p>
</li>
<li>
<p>RMAN places the transportable set tablespaces of the auxiliary instance into read-only mode. RMAN also invokes Data Pump Export in transportable tablespace mode to create the <a href="glossary.htm#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> for the transportable set.</p>
<p>By default, the dump file is located in the tablespace destination. To specify the dump file location, see <span class="q">&#34;<a href="rcmttbsb.htm#GUID-4F402748-9F8E-4067-A579-F58A3399FE9A">Specifying Locations for Data Pump Files</a>&#34;</span>.</p>
<p>RMAN also generates the sample Data Pump import script for use when plugging in the transported tablespaces at a target database. The contents of this script are written to a file named <code class="codeph">impscript.sql</code> in the tablespace destination. The commands for the script are also included in the RMAN command output.</p>
</li>
<li>
<p>If the preceding steps are successful, then RMAN shuts down the auxiliary instance and deletes all files created during the <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> operation except for the transportable set files, the Data Pump Export file, and the sample import script.</p>
</li>
</ol>
</div>
</div>
<a id="BRADV89962"></a>
<div class="props_rev_3"><a id="GUID-C558C7F8-9620-4E89-AC34-E65FEEF06D9F"></a>
<h3 id="BRADV-GUID-C558C7F8-9620-4E89-AC34-E65FEEF06D9F" class="sect3">Basic Steps of Creating Transportable Tablespace Sets</h3>
<div>
<div class="section">
<p>Before creating transportable tablespace sets you must meet several prerequisites. These prerequisites are described in the <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> entry in <a class="olink RCMRF1919" target="_blank" href="../RCMRF/rcmsynta2022.htm#RCMRF1919"><span class="italic">Oracle Database Backup and Recovery Reference</span></a>.</p>
<p>The basic steps of creating transportable tablespace sets are as follows:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Start the RMAN client and connect to the source database and, if used, the recovery catalog.</span></li>
<li class="stepexpand"><span>If necessary, set additional parameters in the auxiliary instance parameter file.</span>
<div>
<p>This task is described in <span class="q">&#34;<a href="rcmttbsb.htm#GUID-2FE8ECB5-8D0F-490F-889D-3B867D3F29ED">Customizing Initialization Parameters for the Auxiliary Instance</a>&#34;</span>.</p>
</div>
</li>
<li class="stepexpand"><span>Execute the <code class="codeph">TRANSPORT TABLESPACE</code> command.</span>
<div>
<p>This basic technique is described in <span class="q">&#34;<a href="rcmttbsb.htm#GUID-B52E4D68-4F7F-4E4F-9F9E-53EEB1982047">Creating a Transportable Tablespace Set</a>&#34;</span>. Variations on this technique are described in <span class="q">&#34;<a href="rcmttbsb.htm#GUID-8692A076-0EF0-4B98-8381-957D143D2CDC">Transportable Tablespace Set Scenarios</a>&#34;</span>.</p>
</div>
</li>
<li class="stepexpand"><span>If the <code class="codeph">TRANSPORT TABLESPACE</code> command fails, troubleshoot the problem and then retry the command until it succeeds.</span>
<div>
<p>This technique is described in <span class="q">&#34;<a href="rcmttbsb.htm#GUID-4486B94F-E39B-4E40-8D7D-9F6C65904E01">Troubleshooting the Creation of Transportable Tablespace Sets</a>&#34;</span>.</p>
</div>
</li>
<li class="stepexpand"><span>Return to the procedure for transporting tablespaces described in <a class="olink ADMIN01101" target="_blank" href="../ADMIN/transport.htm#ADMIN01101"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a>.</span></li>
</ol>
</div>
</div>
</div>
<a id="BRADV89963"></a>
<div class="props_rev_3"><a id="GUID-2FE8ECB5-8D0F-490F-889D-3B867D3F29ED"></a>
<h2 id="BRADV-GUID-2FE8ECB5-8D0F-490F-889D-3B867D3F29ED" class="sect2">Customizing Initialization Parameters for the Auxiliary Instance</h2>
<div>
<div class="section">
<p><a id="d107977e734" class="indexterm-anchor"></a><a id="d107977e738" class="indexterm-anchor"></a>When RMAN creates the auxiliary instance, it creates an initialization parameter file. The default values work for most <code class="codeph">TRANSPORT TABLESPACE</code> cases, especially if you specify the <code class="codeph">AUXILIARY DESTINATION</code> option on the <code class="codeph">TRANSPORT TABLESPACE</code> command.</p>
<p>RMAN can also use an auxiliary instance parameter file that contains values for additional initialization parameters. These values override the values of parameters defined in the default initialization parameter file. You might use an auxiliary instance parameter file for the following reasons:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>To increase <code class="codeph">STREAMS_POOL_SIZE</code> and <code class="codeph">SHARED_POOL_SIZE</code> if needed for Data Pump Export.</p>
</li>
<li>
<p>To manage locations for auxiliary instance data files (see <span class="q">&#34;<a href="rcmttbsb.htm#GUID-E141DED6-91FA-4E3B-ABE5-E5E57BF43602">Using Initialization Parameters to Name Auxiliary Files</a>&#34;</span>). For example, you do not want all auxiliary instance data files stored in the same location on disk, but you do not want to specify the location of every file individually.</p>
</li>
<li>
<p>To specify names for online redo logs with <code class="codeph">LOG_FILE_NAME_CONVERT</code> (see <span class="q">&#34;<a href="rcmttbsb.htm#GUID-E141DED6-91FA-4E3B-ABE5-E5E57BF43602">Using Initialization Parameters to Name Auxiliary Files</a>&#34;</span>).</p>
</li>
</ul>
<p>The auxiliary instance parameter file is not intended to be a complete initialization parameter file for the auxiliary instance. Any parameters specified are added to or override the default parameters for the auxiliary instance. It is not necessary to specify parameters in the initialization file that you do not intend to override.</p>
<p>This section contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmttbsb.htm#GUID-F7869B4D-4187-4B36-B34B-9938A581B4BF">About Setting Initialization Parameters for the RMAN Auxiliary Instance</a></p>
</li>
<li>
<p><a href="rcmttbsb.htm#GUID-C5E00663-30F6-40BA-8076-B6994B26B8DE">Setting the Location of the Auxiliary Instance Parameter File</a></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
<a id="BRADV465"></a><a id="BRADV89964"></a>
<div class="props_rev_3"><a id="GUID-F7869B4D-4187-4B36-B34B-9938A581B4BF"></a>
<h3 id="BRADV-GUID-F7869B4D-4187-4B36-B34B-9938A581B4BF" class="sect3">About Setting Initialization Parameters for the RMAN Auxiliary Instance</h3>
<div>
<p><a id="d107977e871" class="indexterm-anchor"></a>RMAN defines the basic initialization parameters in <a href="rcmttbsb.htm#GUID-F7869B4D-4187-4B36-B34B-9938A581B4BF__CHDDBDEH" title="Default initialization parameters">Table 27-1</a> for the automatic auxiliary instance.</p>
<div class="tblformal" id="GUID-F7869B4D-4187-4B36-B34B-9938A581B4BF__CHDDBDEH">
<p class="titleintable">Table 27-1 Default Initialization Parameters for the Auxiliary Instance</p>
<table class="cellalignment515" title="Default Initialization Parameters for the Auxiliary Instance" summary="Default initialization parameters">
<thead>
<tr class="cellalignment501">
<th class="cellalignment532" id="d107977e893">Initialization Parameter</th>
<th class="cellalignment543" id="d107977e896">Value</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment501">
<td class="cellalignment535" id="d107977e901" headers="d107977e893">
<p><code class="codeph">DB_NAME</code></p>
</td>
<td class="cellalignment544" headers="d107977e901 d107977e896">
<p>Same as <code class="codeph">DB_NAME</code> of the source database.</p>
</td>
</tr>
<tr class="cellalignment501">
<td class="cellalignment535" id="d107977e913" headers="d107977e893">
<p><code class="codeph">COMPATIBLE</code></p>
</td>
<td class="cellalignment544" headers="d107977e913 d107977e896">
<p>Same as the compatible setting of the source database.</p>
</td>
</tr>
<tr class="cellalignment501">
<td class="cellalignment535" id="d107977e921" headers="d107977e893">
<p><code class="codeph">DB_UNIQUE_NAME</code></p>
</td>
<td class="cellalignment544" headers="d107977e921 d107977e896">
<p>Generated unique value based on <code class="codeph">DB_NAME</code>.</p>
</td>
</tr>
<tr class="cellalignment501">
<td class="cellalignment535" id="d107977e932" headers="d107977e893">
<p><code class="codeph">DB_BLOCK_SIZE</code></p>
</td>
<td class="cellalignment544" headers="d107977e932 d107977e896">
<p>Same as the <code class="codeph">DB_BLOCK_SIZE</code> of the source database.</p>
</td>
</tr>
<tr class="cellalignment501">
<td class="cellalignment535" id="d107977e943" headers="d107977e893">
<p><code class="codeph">DB_FILES</code></p>
</td>
<td class="cellalignment544" headers="d107977e943 d107977e896">
<p>Same value as <code class="codeph">DB_FILES</code> for the source database</p>
</td>
</tr>
<tr class="cellalignment501">
<td class="cellalignment535" id="d107977e954" headers="d107977e893">
<p><code class="codeph">SGA_TARGET</code></p>
</td>
<td class="cellalignment544" headers="d107977e954 d107977e896">
<p>280M recommended value.</p>
</td>
</tr>
<tr class="cellalignment501">
<td class="cellalignment535" id="d107977e962" headers="d107977e893">
<p><code class="codeph">DB_CREATE_FILE_DEST</code></p>
</td>
<td class="cellalignment544" headers="d107977e962 d107977e896">
<p>Auxiliary destination (only if the <code class="codeph">AUXILIARY DESTINATION</code> argument to <code class="codeph">TRANSPORT TABLESPACE</code> is set). RMAN creates Oracle managed control files and online logs in this location.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Overriding a basic initialization parameter in <a href="rcmttbsb.htm#GUID-F7869B4D-4187-4B36-B34B-9938A581B4BF__CHDDBDEH" title="Default initialization parameters">Table 27-1</a> with an inappropriate value in the auxiliary instance parameter file can cause <code class="codeph">TRANSPORT TABLESPACE</code> to fail. If you encounter a problem, then try returning the initialization parameter to its default value.</p>
<div class="infoboxnotealso" id="GUID-F7869B4D-4187-4B36-B34B-9938A581B4BF__GUID-B534B6E2-EF72-4A06-8703-95C9A6235097">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmttbsb.htm#GUID-E141DED6-91FA-4E3B-ABE5-E5E57BF43602">Using Initialization Parameters to Name Auxiliary Files</a>&#34;</span> to learn how to use <code class="codeph">DB_FILE_NAME_CONVERT</code> and <code class="codeph">LOG_FILE_NAME_CONVERT</code> to name files</p>
</div>
</div>
</div>
<a id="BRADV466"></a><a id="BRADV89965"></a>
<div class="props_rev_3"><a id="GUID-C5E00663-30F6-40BA-8076-B6994B26B8DE"></a>
<h3 id="BRADV-GUID-C5E00663-30F6-40BA-8076-B6994B26B8DE" class="sect3">Setting the Location of the Auxiliary Instance Parameter File</h3>
<div>
<div class="section">
<p><a id="d107977e1069" class="indexterm-anchor"></a>By default, RMAN looks for the auxiliary initialization parameter file at an operating system-dependent location on the host running the RMAN client. This location may not be on the host running the auxiliary instance. For UNIX systems, this location is <code class="codeph">?/rdbms/admin/params_auxint.ora</code>, where the question mark (<code class="codeph">?</code>) stands for <code class="codeph">ORACLE_HOME</code> on the host running RMAN. If no file is found in the default location, then RMAN does not generate an error.</p>
<p>If you use the default initialization parameters for the auxiliary instance, then check whether an auxiliary instance parameter file exists before running <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code>.</p>
<p>To specify a different location for the auxiliary instance parameter file, you can use the RMAN <code class="codeph">SET</code> <code class="codeph">AUXILIARY</code> <code class="codeph">INSTANCE</code> <code class="codeph">PARAMETER</code> <code class="codeph">FILE</code> command in a <code class="codeph">RUN</code> block before the <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> command. As with the default location of the auxiliary instance parameter file, the path specified when using the <code class="codeph">SET AUXILIARY INSTANCE PARAMETER FILE</code> command is a client-side path.</p>
<p>Assume that you create a file named <code class="codeph">/tmp/auxinstparams.ora</code> on the host running the RMAN client. This file contains the following initialization parameter:</p>
<pre dir="ltr">SHARED_POOL_SIZE=150M;
</pre>
<p>You can then use the initialization parameter file with <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> as shown in <a href="rcmttbsb.htm#GUID-C5E00663-30F6-40BA-8076-B6994B26B8DE__CHDJBFEI">Example 27-1</a>. The <code class="codeph">SHARED_POOL_SIZE</code> parameter in <code class="codeph">/tmp/auxinstparams.ora</code> overrides the default value used for <code class="codeph">SHARED_POOL_SIZE</code> when RMAN creates the auxiliary instance.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-C5E00663-30F6-40BA-8076-B6994B26B8DE__CHDJBFEI">
<p class="titleinexample">Example 27-1 Specifying an Auxiliary Instance Parameter File</p>
<pre dir="ltr">RUN
{
  SET AUXILIARY INSTANCE PARAMETER FILE TO &#39;/tmp/auxinstparams.ora&#39;;
  TRANSPORT TABLESPACE tbs_2 
    TABLESPACE DESTINATION &#39;/disk1/transportdest&#39; 
    AUXILIARY DESTINATION &#39;/disk1/auxdest&#39;;
}
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="BRADV467"></a><a id="BRADV89966"></a>
<div class="props_rev_3"><a id="GUID-B52E4D68-4F7F-4E4F-9F9E-53EEB1982047"></a>
<h2 id="BRADV-GUID-B52E4D68-4F7F-4E4F-9F9E-53EEB1982047" class="sect2">Creating a Transportable Tablespace Set</h2>
<div>
<div class="section">
<p>This section describes the use of <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> in the most basic and automated case. See <span class="q">&#34;<a href="rcmttbsb.htm#GUID-8692A076-0EF0-4B98-8381-957D143D2CDC">Transportable Tablespace Set Scenarios</a>&#34;</span> for variations on the basic case.</p>
<p>It is assumed that you have met the prerequisites described in the <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> entry in <a class="olink RCMRF1919" target="_blank" href="../RCMRF/rcmsynta2022.htm#RCMRF1919"><span class="italic">Oracle Database Backup and Recovery Reference</span></a>. It is also assumed that you have met the requirements described in <a class="olink ADMIN01101" target="_blank" href="../ADMIN/transport.htm#ADMIN01101"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a>:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Confirmed that tablespace transport is supported between your source and destination platforms</p>
</li>
<li>
<p>Identified a self-contained set of tablespaces to include in the transportable set</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">To create a transportable tablespace set:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Start the RMAN client and connect to the source database and, if used, the recovery catalog database.</span></li>
<li class="stepexpand"><span>Run the <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> command in RMAN.</span>
<div>
<p>In the most basic case, you specify an <code class="codeph">AUXILIARY</code> <code class="codeph">DESTINATION</code> clause, which is optional but recommended. RMAN uses default values that work for most cases. If you do not specify an auxiliary location, then ensure that locations are specified for all auxiliary instance files. See the rules described in <span class="q">&#34;<a href="rcmttbsb.htm#GUID-079E02A9-C25B-4520-9B8B-E2D16526A1DC">Specifying Auxiliary File Locations with Transportable Tablespaces</a>&#34;</span> to learn how to name auxiliary files.</p>
<p>The following example creates a transportable tablespace set that includes tablespaces <code class="codeph">tbs_2</code> and <code class="codeph">tbs_3</code>.</p>
<pre dir="ltr">TRANSPORT TABLESPACE tbs_2, tbs_3
   TABLESPACE DESTINATION &#39;/disk1/transportdest&#39;
   AUXILIARY DESTINATION &#39;/disk1/auxdest&#39;;
</pre>
<p>After the command completes successfully, note the following results:</p>
<ul style="list-style-type: disc;">
<li>
<p>The transportable set data files are left in the location <code class="codeph">/disk1/transportdest</code> with their original names. The transportable tablespace set data files are not automatically converted to the endian format of the destination database by <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code>. If necessary, use the RMAN <code class="codeph">CONVERT</code> command to convert the data files to the endian format of the destination database after creating the transportable set.</p>
</li>
<li>
<p>The Data Pump <a href="glossary.htm#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> for the transportable set is named <code class="codeph">dmpfile.dmp</code>, the export log is named <code class="codeph">explog.log</code>, and the sample import script is named <code class="codeph">impscrpt.sql</code>.</p>
<p>All files are created in <code class="codeph">/disk1/transportdest</code>. If a file under the name of the <a href="glossary.htm#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> already exists in the tablespace destination, then <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> fails when it calls Data Pump Export. If you are repeating a previous <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> operation, delete the previous output files, including the <a href="glossary.htm#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a>.</p>
</li>
<li>
<p>The auxiliary set files are removed from <code class="codeph">/disk1/auxdest</code>.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>If necessary, edit the sample import script.</span>
<div>
<p>The sample import script assumes that the files used to import the tablespaces into the destination database are stored in the same locations where they were created by <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code>. If files have been moved to new disk locations before being plugged in, then you must update the sample script with the new locations of the files before using the script to plug in the transported tablespaces.</p>
</div>
</li>
<li class="stepexpand"><span>Return to the process for transporting tablespaces described in <a class="olink ADMIN01101" target="_blank" href="../ADMIN/transport.htm#ADMIN01101"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a>.</span></li>
</ol>
</div>
</div>
<a id="BRADV89967"></a>
<div class="props_rev_3"><a id="GUID-4486B94F-E39B-4E40-8D7D-9F6C65904E01"></a>
<h2 id="BRADV-GUID-4486B94F-E39B-4E40-8D7D-9F6C65904E01" class="sect2">Troubleshooting the Creation of Transportable Tablespace Sets</h2>
<div>
<div class="section">
<p>When the RMAN <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> command fails, the failed auxiliary instance files are left intact in the auxiliary instance destination for troubleshooting.</p>
<p>If your <code class="codeph">SET NEWNAME</code>, <code class="codeph">CONFIGURE AUXNAME</code>, and <code class="codeph">DB_FILE_NAME_CONVERT</code> settings cause multiple files in the auxiliary or transportable tablespace sets to have the same name, then RMAN reports an error during the <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> command. To correct the problem, use different values for these parameters to ensure that duplicate file names are not created. Naming techniques are described in <span class="q">&#34;<a href="rcmttbsb.htm#GUID-079E02A9-C25B-4520-9B8B-E2D16526A1DC">Specifying Auxiliary File Locations with Transportable Tablespaces</a>&#34;</span>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="BRADV89968"></a>
<div class="props_rev_3"><a id="GUID-8692A076-0EF0-4B98-8381-957D143D2CDC"></a>
<h2 id="BRADV-GUID-8692A076-0EF0-4B98-8381-957D143D2CDC" class="sect2">Transportable Tablespace Set Scenarios</h2>
<div>
<p>This section contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmttbsb.htm#GUID-6AE347E4-5364-4C67-B18D-EE30282F566D">Creating a Transportable Tablespace Set at a Specified Time or SCN</a></p>
</li>
<li>
<p><a href="rcmttbsb.htm#GUID-4F402748-9F8E-4067-A579-F58A3399FE9A">Specifying Locations for Data Pump Files</a></p>
</li>
<li>
<p><a href="rcmttbsb.htm#GUID-079E02A9-C25B-4520-9B8B-E2D16526A1DC">Specifying Auxiliary File Locations with Transportable Tablespaces</a></p>
</li>
</ul>
</div>
<a id="BRADV469"></a><a id="BRADV470"></a><a id="BRADV471"></a><a id="BRADV89969"></a>
<div class="props_rev_3"><a id="GUID-6AE347E4-5364-4C67-B18D-EE30282F566D"></a>
<h3 id="BRADV-GUID-6AE347E4-5364-4C67-B18D-EE30282F566D" class="sect3">Creating a Transportable Tablespace Set at a Specified Time or SCN</h3>
<div>
<div class="section">
<p><a id="d107977e1650" class="indexterm-anchor"></a>You can specify a target time or SCN with the <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> command. During the tablespace transport operation, RMAN restores the tablespace at the auxiliary instance with backups from before the target time and performs point-in-time recovery on the auxiliary database to the specified target time. Backups and archived redo logs needed for this point-in-time recovery must be available.</p>
<p>You can specify the target time with an SCN (in the current incarnation or its ancestors) as shown in <a href="rcmttbsb.htm#GUID-6AE347E4-5364-4C67-B18D-EE30282F566D__CHDJEAGI">Example 27-2</a>.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-6AE347E4-5364-4C67-B18D-EE30282F566D__CHDJEAGI">
<p class="titleinexample">Example 27-2 Specifying an End SCN</p>
<pre dir="ltr">TRANSPORT TABLESPACE tbs_2 
   TABLESPACE DESTINATION &#39;/disk1/transportdest&#39; 
   AUXILIARY DESTINATION &#39;/disk1/auxdest&#39;
   UNTIL SCN 11379;
</pre>
<p>You can also specify a restore point as shown in <a href="rcmttbsb.htm#GUID-6AE347E4-5364-4C67-B18D-EE30282F566D__CHDGCBFH">Example 27-3</a>.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-6AE347E4-5364-4C67-B18D-EE30282F566D__CHDGCBFH">
<p class="titleinexample">Example 27-3 Specifying an End Restore Point</p>
<pre dir="ltr">TRANSPORT TABLESPACE tbs_2 
   TABLESPACE DESTINATION &#39;/disk1/transportdest&#39; 
   AUXILIARY DESTINATION &#39;/disk1/auxdest&#39;
   TO RESTORE POINT &#39;before_upgrade&#39;;
</pre>
<p>You can also specify an end time as shown in <a href="rcmttbsb.htm#GUID-6AE347E4-5364-4C67-B18D-EE30282F566D__CHDGAHBA">Example 27-4</a>.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-6AE347E4-5364-4C67-B18D-EE30282F566D__CHDGAHBA">
<p class="titleinexample">Example 27-4 Specifying an End Time</p>
<pre dir="ltr">TRANSPORT TABLESPACE tbs_2 
   TABLESPACE DESTINATION &#39;/disk1/transportdest&#39; 
   AUXILIARY DESTINATION &#39;/disk1/auxdest&#39;
   UNTIL TIME &#39;SYSDATE-1&#39;;
</pre></div>
<!-- class="example" --></div>
</div>
<a id="BRADV472"></a><a id="BRADV89970"></a>
<div class="props_rev_3"><a id="GUID-4F402748-9F8E-4067-A579-F58A3399FE9A"></a>
<h3 id="BRADV-GUID-4F402748-9F8E-4067-A579-F58A3399FE9A" class="sect3">Specifying Locations for Data Pump Files</h3>
<div>
<div class="section">
<p><a id="d107977e1761" class="indexterm-anchor"></a>You can change the names of the Data Pump <a href="glossary.htm#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> for the transportable set, the sample import script for use at the target database, the log file generated by Data Pump Export, and the directory to which they are written.</p>
<p>By default, these files are stored in the tablespace destination and named as follows:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>The Data Pump <a href="glossary.htm#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> is named <code class="codeph">dmpfile.dmp</code>.</p>
</li>
<li>
<p>The export log file is named <code class="codeph">explog.log</code>.</p>
</li>
<li>
<p>The sample import script is named <code class="codeph">impscrpt.sql</code>.</p>
</li>
</ul>
<p>You can place the dump file and the export log in a different directory by using the <code class="codeph">DATAPUMP</code> <code class="codeph">DIRECTORY</code> clause of the <code class="codeph">TRANSPORT TABLESPACE</code> command, passing in the name of a database directory object. The database directory object used by the <code class="codeph">DATAPUMP</code> <code class="codeph">DIRECTORY</code> clause is not the directory path of an actual file system directory. The value passed corresponds to the <code class="codeph">DIRECTORY</code> command-line argument of Data Pump Export.</p>
<div class="infoboxnotealso" id="GUID-4F402748-9F8E-4067-A579-F58A3399FE9A__GUID-540F8926-C3E1-44B3-9FF6-F25D910D3216">
<p class="notep1">See Also:</p>
<p><a class="olink SUTIL100" target="_blank" href="../SUTIL/GUID-17FAE261-0972-4220-A2E4-44D479F519D4.htm#SUTIL100"><span class="italic">Oracle Database Utilities</span></a> for more details on the use of directory objects with Data Pump Export</p>
</div>
<p>You can rename these files with the <code class="codeph">DUMP</code> <code class="codeph">FILE</code>, <code class="codeph">EXPORT</code> <code class="codeph">LOG</code>, and <code class="codeph">IMPORT</code> <code class="codeph">SCRIPT</code> clauses of <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code>. The file names cannot contain full file paths with directory names. If the <code class="codeph">DUMP</code> <code class="codeph">FILE</code> or <code class="codeph">EXPORT</code> <code class="codeph">LOG</code> file names specify file paths, then <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> fails when it attempts to generate the export dump files. Use the <code class="codeph">DATAPUMP</code> <code class="codeph">DIRECTORY</code> clause to specify a database directory object that identifies a location for the outputs of Data Pump Export.</p>
<p>The following scenario illustrates the use of <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> with the <code class="codeph">DATAPUMP</code> <code class="codeph">DIRECTORY</code>, <code class="codeph">DUMP</code> <code class="codeph">FILE</code>, <code class="codeph">EXPORT</code> <code class="codeph">LOG</code>, and <code class="codeph">IMPORT</code> <code class="codeph">SCRIPT</code> file names specified. Assume that you create a database directory object as follows for use with Data Pump Export:</p>
<pre dir="ltr">CREATE OR REPLACE DIRECTORY mypumpdir as &#39;/datapumpdest&#39;;
</pre>
<p><a href="rcmttbsb.htm#GUID-4F402748-9F8E-4067-A579-F58A3399FE9A__CHDDBJCG">Example 27-5</a> shows a <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> command with optional arguments that specify output file locations.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-4F402748-9F8E-4067-A579-F58A3399FE9A__CHDDBJCG">
<p class="titleinexample">Example 27-5 Specifying Output File Locations</p>
<pre dir="ltr">TRANSPORT TABLESPACE tbs_2
   TABLESPACE DESTINATION &#39;/transportdest&#39;
   AUXILIARY DESTINATION &#39;/auxdest&#39;
   DATAPUMP DIRECTORY  mypumpdir
   DUMP FILE &#39;mydumpfile.dmp&#39;
   IMPORT SCRIPT &#39;myimportscript.sql&#39;
   EXPORT LOG &#39;myexportlog.log&#39;;
   
</pre>
<p>After a successful run, RMAN cleans up the auxiliary destination, creates the Data Pump <a href="glossary.htm#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> and the export log in the directory referenced by <code class="codeph">DATAPUMP</code> <code class="codeph">DIRECTORY</code> (<code class="codeph">/datapumpdest/mydumpfile.dmp</code> and <code class="codeph">/datapumpdest/myexportlog.log</code>), and stores the transportable set data files in <code class="codeph">/transportdest</code>.</p>
</div>
<!-- class="example" --></div>
</div>
<a id="BRADV39711"></a>
<div class="props_rev_3"><a id="GUID-079E02A9-C25B-4520-9B8B-E2D16526A1DC"></a>
<h3 id="BRADV-GUID-079E02A9-C25B-4520-9B8B-E2D16526A1DC" class="sect3">Specifying Auxiliary File Locations with Transportable Tablespaces</h3>
<div>
<div class="section">
<p><a id="d107977e2020" class="indexterm-anchor"></a>Several rules affect the location of auxiliary instance files created during the transport.</p>
<p>If RMAN determines that any of the auxiliary files, designated by any of the methods for specifying auxiliary file locations, contain a data file copy that is suitable to be used for the desired point in time for this transport operation, then that data file copy is used instead of restoring the data file.</p>
<p>Any data file copies that are present, but not suitable for this transport operation, because they are more recent than the requested point in time, or are not recognized as part of the target database, are overwritten when the data files are restored.</p>
<p>The simplest technique is to use the <code class="codeph">AUXILIARY</code> <code class="codeph">DESTINATION</code> clause of the <code class="codeph">TRANSPORT TABLESPACE</code> command and let RMAN manage all file locations automatically. To relocate some or all auxiliary instance files, the following options for specifying file locations appear in order of precedence:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span><code class="codeph">SET NEWNAME FOR DATAFILES</code></span>
<div>
<p><code class="codeph">SET NEWNAME FOR TABLESPACE</code></p>
<p><code class="codeph">SET NEWNAME FOR DATABASE</code></p>
<p>See <span class="q">&#34;<a href="rcmttbsb.htm#GUID-F0AB00E6-0C3F-4302-9D4D-06FD3C417A69">Using SET NEWNAME for Auxiliary Data Files</a>&#34;</span>.</p>
</div>
</li>
<li class="stepexpand"><span><code class="codeph">CONFIGURE AUXNAME</code></span>
<div>
<p>As described in <span class="q">&#34;<a href="rcmttbsb.htm#GUID-1B04CB7B-39BF-4910-9925-8927BBB68FFD">Using CONFIGURE AUXNAME for Auxiliary Data Files</a>&#34;</span>, you can use this command to specify names for data files.</p>
</div>
</li>
<li class="stepexpand"><span><code class="codeph">AUXILIARY DESTINATION</code> clause of the <code class="codeph">TRANSPORT TABLESPACE</code> command</span>
<div>
<p>As described in <span class="q">&#34;<a href="rcmttbsb.htm#GUID-F9075274-D1B0-49AF-BB7C-E8D21482D232">Using AUXILIARY DESTINATION to Specify a Location for Auxiliary Files</a>&#34;</span>, you can use this option to specify a location for auxiliary files.</p>
</div>
</li>
<li class="stepexpand"><span><code class="codeph">LOG_FILE_NAME_CONVERT</code> and <code class="codeph">DB_FILE_NAME_CONVERT</code> in the initialization parameter file</span>
<div>
<p>As described in <span class="q">&#34;<a href="rcmttbsb.htm#GUID-E141DED6-91FA-4E3B-ABE5-E5E57BF43602">Using Initialization Parameters to Name Auxiliary Files</a>&#34;</span>, you can use these initialization parameters to specify a location for auxiliary files.</p>
</div>
</li>
</ol>
<div class="section">
<p>If you use several of these options, then the first option in the list that applies to a file determines the file name.</p>
</div>
<!-- class="section" --></div>
<a id="BRADV473"></a><a id="BRADV89972"></a>
<div class="props_rev_3"><a id="GUID-F0AB00E6-0C3F-4302-9D4D-06FD3C417A69"></a>
<h4 id="BRADV-GUID-F0AB00E6-0C3F-4302-9D4D-06FD3C417A69" class="sect4">Using SET NEWNAME for Auxiliary Data Files</h4>
<div>
<div class="section">
<p>You can use the following <code class="codeph">SET</code> <code class="codeph">NEWNAME</code> commands in a <code class="codeph">RUN</code> block to specify file names for use in the <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> command:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">SET NEWNAME FOR DATAFILE</code></p>
</li>
<li>
<p><code class="codeph">SET NEWNAME FOR DATABASE</code></p>
</li>
<li>
<p><code class="codeph">SET NEWNAME FOR TABLESPACE</code></p>
</li>
</ul>
<p>The <code class="codeph">SET</code> <code class="codeph">NEWNAME FOR DATAFILE</code> commands in <a href="rcmttbsb.htm#GUID-F0AB00E6-0C3F-4302-9D4D-06FD3C417A69__CHDDGAID">Example 27-6</a> cause the auxiliary instance data files to be restored to the locations named instead of to <code class="codeph">/disk1/auxdest</code>.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-F0AB00E6-0C3F-4302-9D4D-06FD3C417A69__CHDDGAID">
<p class="titleinexample">Example 27-6 Using SET NEWNAME FOR DATAFILE to Name Auxiliary Data Files</p>
<pre dir="ltr">RUN
{
  SET NEWNAME FOR DATAFILE &#39;/oracle/dbs/tbs_12.f&#39; 
    TO &#39;/bigdrive/auxdest/tbs_12.f&#39;;
  SET NEWNAME FOR DATAFILE &#39;/oracle/dbs/tbs_11.f&#39;
    TO &#39;/bigdrive/auxdest/tbs_11.f&#39;;
  TRANSPORT TABLESPACE tbs_2 
    TABLESPACE DESTINATION &#39;/disk1/transportdest&#39; 
    AUXILIARY DESTINATION &#39;/disk1/auxdest&#39;;
}
</pre>
<p><code class="codeph">SET</code> <code class="codeph">NEWNAME</code> is best used with one-time operations. If you expect to create transportable tablespaces from backup regularly for a particular set of tablespaces, then consider using <code class="codeph">CONFIGURE</code> <code class="codeph">AUXNAME</code> instead of <code class="codeph">SET</code> <code class="codeph">NEWNAME</code> to make persistent settings for the location of the auxiliary instance data files.</p>
</div>
<!-- class="example" --></div>
</div>
<a id="BRADV89973"></a>
<div class="props_rev_3"><a id="GUID-1B04CB7B-39BF-4910-9925-8927BBB68FFD"></a>
<h4 id="BRADV-GUID-1B04CB7B-39BF-4910-9925-8927BBB68FFD" class="sect4">Using CONFIGURE AUXNAME for Auxiliary Data Files</h4>
<div>
<div class="section">
<p>You can use the <code class="codeph">CONFIGURE</code> <code class="codeph">AUXNAME</code> command to specify persistent locations for transportable tablespace set or auxiliary set data files. RMAN restores each data file for which a <code class="codeph">CONFIGURE</code> <code class="codeph">AUXNAME</code> command has been used to the specified location before recovery. RMAN deletes auxiliary set data files when the operation is complete, unless the operation failed.</p>
<p>An example illustrates the relationship between the <code class="codeph">CONFIGURE AUXNAME</code> and <code class="codeph">TRANSPORT ... AUXILIARY DESTINATION</code> commands. Suppose that you want to transport tablespace <code class="codeph">tbs_11</code>. The tablespace <code class="codeph">tbs_12</code>, which contains data file <code class="codeph">tbs_12.f</code>, is part of the auxiliary set. You execute the following steps:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>You use the <code class="codeph">CONFIGURE</code> <code class="codeph">AUXNAME</code> statement to set a persistent nondefault location for the auxiliary set data file <code class="codeph">/oracle/dbs/tbs_12.f</code>.</span>
<div>
<p>For example, you enter the following command:</p>
<pre dir="ltr">CONFIGURE AUXNAME FOR DATAFILE &#39;/oracle/dbs/tbs_12.f&#39; 
                   TO &#39;/disk1/auxdest/tbs_12.f&#39;; 
</pre></div>
</li>
<li class="stepexpand"><span>You execute the <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> command with the <code class="codeph">AUXILIARY DESTINATION</code> and <code class="codeph">TABLESPACE DESTINATION</code> parameters.</span>
<div>
<p>For example, you enter the following command:</p>
<pre dir="ltr">TRANSPORT TABLESPACE tbs_11
  AUXILIARY DESTINATION &#39;/myauxdest&#39;
  TABLESPACE DESTINATION &#39;/disk1/transportdest&#39;;
</pre></div>
</li>
</ol>
<div class="section">
<p>In the preceding scenario, RMAN restores the auxiliary set copy of data file <code class="codeph">/oracle/dbs/tbs_12.f</code> to <code class="codeph">/disk1/auxdest/tbs_12.f</code> instead of the location specified by <code class="codeph">AUXILIARY</code> <code class="codeph">DESTINATION</code>. The <code class="codeph">CONFIGURE AUXNAME</code> setting is higher in the order of precedence than <code class="codeph">AUXILIARY DESTINATION</code>.</p>
<div class="infobox-note" id="GUID-1B04CB7B-39BF-4910-9925-8927BBB68FFD__GUID-56D4BC4A-545B-402E-9327-F8B0FB65866F">
<p class="notep1">Note:</p>
<p>You can view any current <code class="codeph">CONFIGURE</code> <code class="codeph">AUXNAME</code> settings by executing the <code class="codeph">SHOW</code> <code class="codeph">AUXNAME</code> command, which is described in <a class="olink RCMRF154" target="_blank" href="../RCMRF/rcmsynta2015.htm#RCMRF154"><span class="italic">Oracle Database Backup and Recovery Reference</span></a>.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="BRADV89974"></a>
<div class="props_rev_3"><a id="GUID-F9075274-D1B0-49AF-BB7C-E8D21482D232"></a>
<h4 id="BRADV-GUID-F9075274-D1B0-49AF-BB7C-E8D21482D232" class="sect4">Using AUXILIARY DESTINATION to Specify a Location for Auxiliary Files</h4>
<div>
<div class="section">
<p>If you use an <code class="codeph">AUXILIARY</code> <code class="codeph">DESTINATION</code> argument with <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code>, then any auxiliary set file that is not moved to another location using a <code class="codeph">SET NEWNAME</code> or <code class="codeph">CONFIGURE AUXNAME</code> command is stored in the auxiliary destination during the <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> operation.</p>
<p>If you do not use <code class="codeph">AUXILIARY</code> <code class="codeph">DESTINATION</code>, then you must use <code class="codeph">LOG_FILE_NAME_CONVERT</code> to specify the location of the online redo log files for the auxiliary instance. Neither <code class="codeph">SET</code> <code class="codeph">NEWNAME</code> nor <code class="codeph">CONFIGURE</code> <code class="codeph">AUXNAME</code> can affect the location of the auxiliary instance online redo logs. Thus, if you do not use <code class="codeph">AUXILIARY</code> <code class="codeph">DESTINATION</code> or <code class="codeph">LOG_FILE_NAME_CONVERT</code>, then RMAN has no information about where to create the online redo logs.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="BRADV89975"></a>
<div class="props_rev_3"><a id="GUID-E141DED6-91FA-4E3B-ABE5-E5E57BF43602"></a>
<h4 id="BRADV-GUID-E141DED6-91FA-4E3B-ABE5-E5E57BF43602" class="sect4">Using Initialization Parameters to Name Auxiliary Files</h4>
<div>
<div class="section">
<p>You can use the <code class="codeph">LOG_FILE_NAME_CONVERT</code> and <code class="codeph">DB_FILE_NAME_CONVERT</code> initialization parameters in an auxiliary instance parameter file to determine the names for online redo logs and other database files at the auxiliary instance. If no <code class="codeph">AUXILIARY</code> <code class="codeph">DESTINATION</code> clause is specified on the <code class="codeph">TRANSPORT</code> <code class="codeph">TABLESPACE</code> command, then these parameters determine the location of any files for which no <code class="codeph">CONFIGURE AUXNAME</code> or <code class="codeph">SET NEWNAME</code> command was run.</p>
<p>You cannot use <code class="codeph">LOG_FILE_NAME_CONVERT</code> or <code class="codeph">DB_FILE_NAME_CONVERT</code> to generate new Oracle Managed Files (OMF) names for files at the auxiliary instance when the original files are OMF files. The database manages the generation of unique file names in each OMF destination. You must use an <code class="codeph">AUXILIARY</code> <code class="codeph">DESTINATION</code> clause to control the location of the online redo log files. You must use the <code class="codeph">AUXILIARY</code> <code class="codeph">DESTINATION</code> clause, <code class="codeph">SET</code> <code class="codeph">NEWNAME</code> or <code class="codeph">CONFIGURE</code> <code class="codeph">AUXNAME</code> commands, or <code class="codeph">DB_CREATE_FILE_DEST</code> initialization parameter to specify the location for OMF data files.</p>
<div class="infoboxnotealso" id="GUID-E141DED6-91FA-4E3B-ABE5-E5E57BF43602__GUID-8DF269C6-9FF3-4F52-BD63-7AB07E6A86F9">
<p class="notep1">See Also:</p>
<p><a class="olink REFRN" target="_blank" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for more details on the <a class="olink REFRN10098" target="_blank" href="../REFRN/GUID-3D5894EF-C33D-4687-978F-F640174F6FCC.htm#REFRN10098"><code class="codeph">LOG_FILE_NAME_CONVERT</code></a> and <a class="olink REFRN10038" target="_blank" href="../REFRN/GUID-E8B4E0EA-B073-4349-9EA9-E053F499FB9E.htm#REFRN10038"><code class="codeph">DB_FILE_NAME_CONVERT</code></a> initialization parameters</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment500">
<tr>
<td class="cellalignment512">
<table class="cellalignment505">
<tr>
<td class="cellalignment504"><a href="rcmdupad.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment504"><a href="rcmxplat.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment514">
<table class="cellalignment503">
<tr>
<td class="cellalignment504"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment504"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment504"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment504"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment504"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment504"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>