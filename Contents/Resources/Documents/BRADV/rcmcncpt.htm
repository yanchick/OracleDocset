<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-2665"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/RMAN%20Backup%20Concepts"></a><title>RMAN Backup Concepts</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="Recovery Manager, fractured block detection in, fractured blocks, detection, size of backup sets, setting, backup sets, specifying maximum size, types of backups, server parameter files, autobackups, autobackups, control file"/>
<meta name="dcterms.created" content="2017-06-07T23:52:16Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Backup and Recovery User&#39;s Guide"/>
<meta name="dcterms.identifier" content="E50658-09"/>
<meta name="dcterms.isVersionOf" content="BRADV"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="part_bak.htm" title="Previous" type="text/html"/>
<link rel="Next" href="rcmbckba.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E50658-09.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-B3380142-ABCD-437F-9E06-B219D74E6738"></a> <span id="PAGE" style="display:none;">18/48</span> <!-- End Header -->
<a id="BRADV002"></a>
<h1 id="BRADV-GUID-B3380142-ABCD-437F-9E06-B219D74E6738" class="sect1"><span class="enumeration_chapter">8</span> RMAN Backup Concepts</h1>
<div>
<p>This chapter describes the general concepts that you must understand to make any type of RMAN backup. This chapter contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmcncpt.htm#GUID-3FD1F547-74C0-434A-98D0-5D85A851FCC0">About Consistent and Inconsistent RMAN Backups</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C">About Online Backups and Backup Mode</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-74FF41AF-D1EE-4DB1-AC0D-56FC83CAA91D">About Backup Sets</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-3580BA12-463A-4A61-939D-58C51E81FF12">About RMAN Image Copies</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-763A9C75-90A5-48FD-9CB6-707D030A00F5">About Multiple Copies of RMAN Backups</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-95840C84-1595-49AC-923D-310DA750676B">About RMAN Control File and Server Parameter File Autobackups</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023">About RMAN Incremental Backups</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-3F68F554-FBC9-4375-85DE-7F844C48C8FF">About Backup Retention Policies</a></p>
</li>
</ul>
</div>
<a id="BRADV89477"></a>
<div class="props_rev_3"><a id="GUID-3FD1F547-74C0-434A-98D0-5D85A851FCC0"></a>
<h2 id="BRADV-GUID-3FD1F547-74C0-434A-98D0-5D85A851FCC0" class="sect2">About Consistent and Inconsistent RMAN Backups</h2>
<div>
<p><a id="d34189e178" class="indexterm-anchor"></a><a id="d34189e182" class="indexterm-anchor"></a><a id="d34189e184" class="indexterm-anchor"></a>The RMAN command for making backups is <a class="olink RCMRF107" target="_blank" href="../RCMRF/rcmsynta006.htm#RCMRF107"><code class="codeph">BACKUP</code></a>. The RMAN <code class="codeph">BACKUP</code> command supports backing up the following types of files:</p>
<ul style="list-style-type: disc;">
<li>
<p>Data files and control files</p>
</li>
<li>
<p>Server parameter file</p>
</li>
<li>
<p>Archived redo logs</p>
</li>
<li>
<p>RMAN backups</p>
</li>
</ul>
<p>Although the database depends on other types of files, such as network configuration files, password files, and the contents of the Oracle home, you cannot back up these files with RMAN. Likewise, some features of Oracle Database, such as external tables, may depend upon files other than the data files, control files, and redo log. RMAN cannot back up these files. Use general-purpose backup software such as Oracle Secure Backup to protect files that RMAN does not support.</p>
<p>When you execute the <code class="codeph">BACKUP</code> command in RMAN, the output is always either one or more backup sets or one or more image copies. A <a id="d34189e215" class="indexterm-anchor"></a><a href="glossary.htm#GUID-6AA43E7D-9946-4C41-A62F-01E5BACEB8A7"><span class="xrefglossterm">backup set</span></a> is an RMAN-specific proprietary format, whereas an <a id="d34189e221" class="indexterm-anchor"></a><a href="glossary.htm#GUID-397CB99E-3F07-4980-96B3-9D0D0ABBABEA"><span class="xrefglossterm">image copy</span></a> is a bit-for-bit copy of a file. By default, RMAN creates backup sets.</p>
<div class="infoboxnotealso" id="GUID-3FD1F547-74C0-434A-98D0-5D85A851FCC0__GUID-5A6CD23D-6A3C-4E15-B343-E5F8861DDC3A">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmcncpt.htm#GUID-10871A83-DD0B-49FB-9601-A598D367ECD3">About Consistent RMAN Backups</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-23606AAD-40E3-4198-BC70-B3D0FE698C9C">About Inconsistent RMAN Backups</a></p>
</li>
</ul>
</div>
</div>
<a id="BRADV99964"></a>
<div class="props_rev_3"><a id="GUID-10871A83-DD0B-49FB-9601-A598D367ECD3"></a>
<h3 id="BRADV-GUID-10871A83-DD0B-49FB-9601-A598D367ECD3" class="sect3">About Consistent RMAN Backups</h3>
<div>
<p><a id="d34189e308" class="indexterm-anchor"></a><a id="d34189e312" class="indexterm-anchor"></a><a id="d34189e318" class="indexterm-anchor"></a><a id="d34189e324" class="indexterm-anchor"></a>You can use the <a class="olink RCMRF107" target="_blank" href="../RCMRF/rcmsynta006.htm#RCMRF107"><code class="codeph">BACKUP</code></a> command to make consistent and inconsistent backups of the database. A <a id="d34189e334" class="indexterm-anchor"></a><a href="glossary.htm#GUID-D11D736A-3513-48E5-8738-64DBE60725D1"><span class="xrefglossterm">consistent backup</span></a> occurs when the database is in a consistent state. A database is in a consistent state after being shut down with the <a class="olink RCMRF155" target="_blank" href="../RCMRF/rcmsynta2016.htm#RCMRF155"><code class="codeph">SHUTDOWN</code></a> <code class="codeph">NORMAL</code>, <code class="codeph">SHUTDOWN IMMEDIATE</code>, or <code class="codeph">SHUTDOWN TRANSACTIONAL</code> commands. A consistent shutdown guarantees that all redo has been applied to the data files. If you mount the database and make a backup at this point, then you can restore the database backup later and open it without performing media recovery. But you will, of course, lose all transactions that occurred after the backup was created.</p>
</div>
</div>
<a id="BRADV99965"></a>
<div class="props_rev_3"><a id="GUID-23606AAD-40E3-4198-BC70-B3D0FE698C9C"></a>
<h3 id="BRADV-GUID-23606AAD-40E3-4198-BC70-B3D0FE698C9C" class="sect3">About Inconsistent RMAN Backups</h3>
<div>
<p>Any database backup that is not consistent is an <a id="d34189e425" class="indexterm-anchor"></a><a href="glossary.htm#GUID-BE64D1D8-34E7-4295-BDFC-2E99B1BC454D"><span class="xrefglossterm">inconsistent backup</span></a>. A backup made when the database is open is inconsistent, as is a backup made after an instance failure or <code class="codeph">SHUTDOWN ABORT</code> command. When a database is restored from an inconsistent backup, Oracle Database must perform media recovery before the database can be opened, applying changes from the redo logs that took place after the backup was created.</p>
<div class="infobox-note" id="GUID-23606AAD-40E3-4198-BC70-B3D0FE698C9C__GUID-4EFE7E16-3939-4EAD-A8D4-579546927B87">
<p class="notep1">Note:</p>
<p>RMAN does not permit you to make inconsistent backups when the database is in <code class="codeph">NOARCHIVELOG</code> mode. If you employ user-managed backup techniques for a <code class="codeph">NOARCHIVELOG</code> database, then you must not make inconsistent backups of this database.</p>
</div>
<p>If the database runs in <code class="codeph">ARCHIVELOG</code> mode, and you back up the archived redo logs and data files, inconsistent backups can be the foundation for a sound backup and recovery strategy. Inconsistent backups offer superior availability because you do not have to shut down the database to make backups that fully protect the database.</p>
</div>
</div>
</div>
<a id="BRADV89479"></a>
<div class="props_rev_3"><a id="GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C"></a>
<h2 id="BRADV-GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C" class="sect2">About Online Backups and Backup Mode</h2>
<div>
<p>When performing a <a id="d34189e528" class="indexterm-anchor"></a><a href="glossary.htm#GUID-F4A66D43-CA48-412E-98E8-B25CE1C7B065"><span class="xrefglossterm">user-managed backup</span></a> of an online tablespace or database, an operating system utility can back up a data file at the same time that the database writer (DBWR) is updating the file. It is possible for the utility to read a block in a half-updated state, so that the block that is copied to the backup media is updated in its first half, while the second half contains older data. This type of <a href="glossary.htm#GUID-E55A74E5-8AD7-478F-A458-E4CB2E389009"><span class="xrefglossterm">logical corruption</span></a> is known as a <a id="d34189e540" class="indexterm-anchor"></a><a href="glossary.htm#GUID-9999D934-31A1-44D5-995F-EC5B92583B17"><span class="xrefglossterm">fractured block</span></a>, that is, a block that is not consistent with an SCN. If this backup must be restored and the block requires recovery, then recovery fails because the block is not usable.</p>
<p>For third-party snapshot technologies, you must use one of the following techniques to eliminate the risk of creating fractured blocks:</p>
<ul style="list-style-type: disc;">
<li>
<p>Ensure that the snapshot technology complies with Oracle requirements for online backups</p>
</li>
<li>
<p>Take the database or data files offline</p>
</li>
<li>
<p>Place the database in backup mode before using a third-party snapshot backup</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C__GUID-EAD87694-A55A-4E23-AAE6-341EF6AC2416">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="osbackup.htm#GUID-A1112F2C-D0ED-4C2F-BA24-A614F99F0FCA">Making Backups with Third-Party Snapshot Technologies</a>&#34;</span>.</p>
</li>
<li>
<p><span class="q">&#34;<a href="osrecvry.htm#GUID-5A3BB8EE-291F-41C6-976C-1F304069FF0B">Recovery Using Storage Snapshot Optimization</a>&#34;</span></p>
</li>
</ul>
</div>
<p>Unlike user-managed tools, RMAN does not require extra logging or backup mode because it knows the format of data blocks. RMAN is guaranteed not to back up fractured blocks. During an RMAN backup, a database server session reads each data block and checks whether it is fractured by comparing the block header and footer. If a block is fractured, then the session rereads the block. If the same fracture is found, then the block is considered permanently corrupt. Also, RMAN does not need to freeze the data file header checkpoint because it knows the order in which the blocks are read, which enables it to capture a known good checkpoint for the file.</p>
<div class="infoboxnotealso" id="GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C__GUID-D0B338C8-E6E6-4F4A-8D20-D5C8161A6A1B">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="osbackup.htm#GUID-57387AB6-1204-44F0-826A-F9B638453935">Making User-Managed Backups of Online Tablespaces and Data Files</a>&#34;</span> to learn how to back up online tablespaces when not using RMAN</p>
</div>
</div>
</div>
<a id="BRADV106"></a>
<div class="props_rev_3"><a id="GUID-74FF41AF-D1EE-4DB1-AC0D-56FC83CAA91D"></a>
<h2 id="BRADV-GUID-74FF41AF-D1EE-4DB1-AC0D-56FC83CAA91D" class="sect2">About Backup Sets</h2>
<div>
<p><a id="d34189e653" class="indexterm-anchor"></a><a id="d34189e657" class="indexterm-anchor"></a>When you execute the <a class="olink RCMRF107" target="_blank" href="../RCMRF/rcmsynta006.htm#RCMRF107"><code class="codeph">BACKUP</code></a> command in RMAN, you create one or more backup sets or image copies. By default, RMAN creates <a id="d34189e665" class="indexterm-anchor"></a>backup sets regardless of whether the destination is disk or a media manager.</p>
<div class="infobox-note" id="GUID-74FF41AF-D1EE-4DB1-AC0D-56FC83CAA91D__GUID-A2E6EAE1-8A44-4967-9E06-8BC9BC74B382">
<p class="notep1">Note:</p>
<p>Data file backup sets are typically smaller than data file image copies and take less time to write.</p>
</div>
<p>This section contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmcncpt.htm#GUID-1C871377-D8A7-4414-B0F0-884403666E8C">About Backup Sets and Backup Pieces</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-073C85A4-E28C-4FE2-A089-1EABF3D00070">About RMAN Block Compression for Backup Sets</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-2AFCD551-95CB-4F9F-946E-550E89613974">About Binary Compression for RMAN Backup Sets</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-1AD870B1-4D49-4056-A7C0-9B10BC3EE005">About RMAN Backup Undo Optimization</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF">About Encryption for RMAN Backup Sets</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9">About File Names for RMAN Backup Pieces</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-DD7E7E32-B0F7-4FA0-91C3-0811610A13D9">About Number and Size of RMAN Backup Pieces</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-5A5E1735-A8D6-4481-BED9-105144E9B39A">About Number and Size of RMAN Backup Sets</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97">About Multiplexed RMAN Backup Sets</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-2F6EBF71-E699-4C9C-832B-9AA8566E3F47">About RMAN Proxy Copies</a></p>
</li>
</ul>
</div>
<a id="BRADV89480"></a>
<div class="props_rev_3"><a id="GUID-1C871377-D8A7-4414-B0F0-884403666E8C"></a>
<h3 id="BRADV-GUID-1C871377-D8A7-4414-B0F0-884403666E8C" class="sect3">About Backup Sets and Backup Pieces</h3>
<div>
<p>RMAN can store backup data in a logical structure called a <a href="glossary.htm#GUID-6AA43E7D-9946-4C41-A62F-01E5BACEB8A7"><span class="xrefglossterm">backup set</span></a>, which is the smallest unit of an RMAN backup. A backup set contains the data from one or more data files, archived redo logs, control files, or server parameter file. Backup sets, which are only created and accessed through RMAN, are the only form in which RMAN can write backups to media managers such as tape drives and tape libraries.</p>
<p>A backup set contains one or more binary files in an RMAN-specific format. Each of these files is known as a <a id="d34189e802" class="indexterm-anchor"></a><a href="glossary.htm#GUID-AED62318-D45A-49FA-B4B4-DAD98647FCF6"><span class="xrefglossterm">backup piece</span></a>. A backup set can contain multiple data files. For example, you can back up 10 data files into a single backup set consisting of a single backup piece. In this case, RMAN creates one backup piece as output. The backup set contains only this backup piece.</p>
<p><a id="d34189e809" class="indexterm-anchor"></a><a id="d34189e813" class="indexterm-anchor"></a>If you specify the <code class="codeph">SECTION SIZE</code> parameter on the <code class="codeph">BACKUP</code> command, then RMAN produces a <a id="d34189e824" class="indexterm-anchor"></a><a id="d34189e826" class="indexterm-anchor"></a><a href="glossary.htm#GUID-6D6DDA5E-F1EF-4273-8649-137F1FC89EB6"><span class="xrefglossterm">multisection backup</span></a>. This is a backup of a single large file, produced by multiple channels in parallel, each of which produces one backup piece. Each backup piece contains one <a href="glossary.htm#GUID-FDECFF77-1833-4BD3-A23C-AA4806E28241"><span class="xrefglossterm">file section</span></a> of the file being backed up.</p>
<p>For non-multisection backups, RMAN only records backup sets in the repository that complete successfully. There is no such thing as a partial backup set. This differs from an unsuccessful multisection backup, where it is possible for RMAN metadata to contain a record for a partial backup set. In the latter case, you must use the <code class="codeph">DELETE</code> command to delete the partial backup set.</p>
<div class="infobox-note" id="GUID-1C871377-D8A7-4414-B0F0-884403666E8C__GUID-E6714636-A1C2-428D-ACDD-36AA384045F2">
<p class="notep1">Note:</p>
<p>RMAN never considers partial backups as candidates for restore and recovery.</p>
</div>
<div class="infoboxnotealso" id="GUID-1C871377-D8A7-4414-B0F0-884403666E8C__GUID-0AB0FE3D-9617-44F7-ABE0-A21A2180368F">
<p class="notep1">See Also:</p>
<p><a href="rcmbckba.htm#GUID-93BAB347-063F-439E-BDF3-109AB8D1F8E7" title="To create incremental backups for use in an incrementally updated backup strategy, use the BACKUP ... FOR RECOVER OF COPY WITH TAG form of the BACKUP command. The command is best understood in a sample script that implements the strategy.">Backing Up the Database</a></p>
</div>
</div>
</div>
<a id="BRADV89481"></a>
<div class="props_rev_3"><a id="GUID-073C85A4-E28C-4FE2-A089-1EABF3D00070"></a>
<h3 id="BRADV-GUID-073C85A4-E28C-4FE2-A089-1EABF3D00070" class="sect3">About RMAN Block Compression for Backup Sets</h3>
<div>
<p>RMAN uses two types of block compression when creating backup sets:</p>
<ul style="list-style-type: disc;">
<li>
<p>Unused Block Compression (Supports disk backup and Oracle Secure Backup tape backup)</p>
</li>
<li>
<p>Null Block Compression (Supports all backups)</p>
</li>
</ul>
<p>RMAN block compression is not traditional binary compression. Rather, it is a set of techniques that RMAN uses to altogether avoid backing up certain blocks that are not needed in this backup.</p>
</div>
<a id="BRADV193"></a>
<div class="props_rev_3"><a id="GUID-50F8DBCD-C285-491F-B8E7-E1B2140E1B51"></a>
<h4 id="BRADV-GUID-50F8DBCD-C285-491F-B8E7-E1B2140E1B51" class="sect4">About Unused Block Compression</h4>
<div>
<p>When employing <a href="glossary.htm#GUID-0AA7EB43-FEA6-405F-9443-A4A2B43FFF96"><span class="xrefglossterm">unused block compression</span></a>, RMAN skips reading, and backing up, any database blocks that are not currently allocated to some database object. This is regardless of whether those blocks had previously been allocated. So if a database table is dropped, RMAN will not back up the space that was occupied by that table until new objects are created in that space. Unused block compression is used automatically when the following conditions are true:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">COMPATIBLE</code> initialization parameter is set to 10.2 or higher.</p>
</li>
<li>
<p>There are currently no guaranteed restore points defined for the database.</p>
</li>
<li>
<p>The data file is locally managed.</p>
</li>
<li>
<p>The data file is being backed up to a backup set as part of a full backup or a level 0 incremental backup.</p>
</li>
<li>
<p>The backup set is created on disk, or Oracle Secure Backup is the media manager.</p>
</li>
</ul>
</div>
</div>
<a id="BRADV192"></a>
<div class="props_rev_3"><a id="GUID-89D85BBF-C0F2-4393-A1BF-7D6C8D9A6C87"></a>
<h4 id="BRADV-GUID-89D85BBF-C0F2-4393-A1BF-7D6C8D9A6C87" class="sect4">About Null Block Compression</h4>
<div>
<p>When employing null block compression, RMAN omits from its output any block that has never contained data. Null block compression is always used with level 0 or full backups that are created in backup set format.</p>
</div>
</div>
</div>
<a id="BRADV194"></a>
<div class="props_rev_3"><a id="GUID-2AFCD551-95CB-4F9F-946E-550E89613974"></a>
<h3 id="BRADV-GUID-2AFCD551-95CB-4F9F-946E-550E89613974" class="sect3">About Binary Compression for RMAN Backup Sets</h3>
<div>
<p>RMAN supports <a href="glossary.htm#GUID-90E07DCF-D038-4770-8A1A-06AF137C3762"><span class="xrefglossterm">binary compression</span></a> of backup sets. Binary compression is only enabled when you specify <code class="codeph">AS COMPRESSED BACKUPSET</code> in the <code class="codeph">BACKUP</code> command, or one-time with the <code class="codeph">CONFIGURE DEVICE TYPE &lt;DISK | SBT&gt; BACKUP TYPE TO COMPRESSED BACKUPSET</code> command.You have two binary compression options:</p>
<ul style="list-style-type: disc;">
<li>
<p>You can use the <code class="codeph">BASIC</code> compression algorithm, which does not require the Oracle Advanced Compression option. This setting offers a compression ratio comparable to <code class="codeph">MEDIUM</code>, at the expense of additional CPU consumption.</p>
</li>
<li>
<p>If you have enabled the Oracle Advanced Compression option, you can choose from the compression levels outlined in <span class="q">&#34;<a href="rcmconfa.htm#GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45">About Oracle Advanced Compression Option</a>&#34;</span>.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-2AFCD551-95CB-4F9F-946E-550E89613974__GUID-E9A27EB7-A169-4973-8402-BEBAB927D5AB">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="rcmconfa.htm#GUID-3117DA93-EC34-488D-A4FB-29E6CD4D168A">Configuring Compression Options</a>&#34;</span></p>
</li>
<li>
<p><a class="olink RCMRF107" target="_blank" href="../RCMRF/rcmsynta006.htm#RCMRF107"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> to learn about <code class="codeph">BACKUP AS BACKUPSET</code> and <code class="codeph">CONFIGURE COMPRESSION ALGORITHM</code></p>
</li>
</ul>
</div>
</div>
</div>
<a id="BRADV417"></a>
<div class="props_rev_3"><a id="GUID-1AD870B1-4D49-4056-A7C0-9B10BC3EE005"></a>
<h3 id="BRADV-GUID-1AD870B1-4D49-4056-A7C0-9B10BC3EE005" class="sect3">About RMAN Backup Undo Optimization</h3>
<div>
<p><a id="d34189e1313" class="indexterm-anchor"></a>In <a href="glossary.htm#GUID-06FF333B-92A2-4190-BF2C-09EBBEFA114D"><span class="xrefglossterm">backup undo optimization</span></a>, RMAN excludes undo not needed for recovery of a backup, that is, for transactions that have been committed. Backup undo optimization works for disk backups and Oracle Secure Backup (OSB) tape backups. Unlike <a href="glossary.htm#GUID-C75B395F-CA6E-4286-826B-67AABE99606A"><span class="xrefglossterm">backup optimization</span></a>, backup undo optimization is not configurable.</p>
</div>
</div>
<a id="BRADV89482"></a>
<div class="props_rev_3"><a id="GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF"></a>
<h3 id="BRADV-GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF" class="sect3">About Encryption for RMAN Backup Sets</h3>
<div>
<p>RMAN supports <a id="d34189e1394" class="indexterm-anchor"></a><a href="glossary.htm#GUID-65A13E9F-7391-4A6A-8379-B2EA64D0EA9E"><span class="xrefglossterm">backup encryption</span></a> for backup sets. You can use keystore-based transparent encryption, password-based encryption, or both. You can use the <a class="olink RCMRF113" target="_blank" href="../RCMRF/rcmsynta009.htm#RCMRF113"><code class="codeph">CONFIGURE ENCRYPTION</code></a> command to configure persistent transparent encryption. Use the <a class="olink RCMRF153" target="_blank" href="../RCMRF/rcmsynta2014.htm#RCMRF153"><code class="codeph">SET ENCRYPTION</code></a> command at the <a href="glossary.htm#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN session</span></a> level to specify password-based encryption.</p>
<div class="infobox-note" id="GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF__GUID-C34AC04A-0343-460B-9496-444AC6E04E9A">
<p class="notep1">Note:</p>
<p>Keystore-based encryption is more secure than password-based encryption because no passwords are involved. Use password-based encryption only when it is absolutely necessary because your backups must be transportable.</p>
</div>
<p>To create encrypted backups on disk with RMAN, the database must use the <a id="d34189e1419" class="indexterm-anchor"></a>Advanced Security Option. For encrypted RMAN backups directly to tape, the <a href="glossary.htm#GUID-8879C26C-4DF5-4040-BC7A-37CF7C482C56"><span class="xrefglossterm">Oracle Secure Backup</span></a> <a href="glossary.htm#GUID-2E48CE71-9547-4196-B715-5CE59033262E"><span class="xrefglossterm">SBT</span></a> is the only supported interface.</p>
<div class="infoboxnotealso" id="GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF__GUID-0F6E14DB-917F-44C9-8075-294A3027AACA">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="rcmconfa.htm#GUID-21D5FCCE-7AF1-4CF8-BC53-2496ECE3C56E">Configuring Backup Encryption</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="rcmbckad.htm#GUID-ECBE4965-57F7-49F0-BECD-734196F417F5">Encrypting RMAN Backups</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="BRADV89483"></a>
<div class="props_rev_3"><a id="GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9"></a>
<h3 id="BRADV-GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9" class="sect3">About File Names for RMAN Backup Pieces</h3>
<div>
<p><a id="d34189e1514" class="indexterm-anchor"></a><a id="d34189e1516" class="indexterm-anchor"></a><a id="d34189e1520" class="indexterm-anchor"></a>You can either let RMAN determine a unique name for <a id="d34189e1525" class="indexterm-anchor"></a>backup pieces or use the <a class="olink RCMRF195" target="_blank" href="../RCMRF/rcmsubcl012.htm#RCMRF195"><code class="codeph">FORMAT</code></a> clause to specify a name. If you do not specify the <code class="codeph">FORMAT</code> parameter, then RMAN automatically generates a unique file name with the <code class="codeph">%U</code> <a id="d34189e1542" class="indexterm-anchor"></a>substitution variable in the default backup location.</p>
<p>An example of RMAN generating an SBT backup piece name by <code class="codeph">%U</code> is:</p>
<pre dir="ltr">2i1nk47_1_1
</pre>
<p>An example of a non- Oracle Managed File (OMF) backup piece on disk is:</p>
<pre dir="ltr">/backups/TEST/2i1nk47_1_1
</pre>
<p>The <code class="codeph">FORMAT</code> clause supports substitution variables other than <code class="codeph">%U</code> for generating unique file names. For example, you can use <code class="codeph">%d</code> to generate the name of the database, <code class="codeph">%I</code> for the DBID, <code class="codeph">%t</code> for the time stamp, and so on.</p>
<p>You can specify up to four <code class="codeph">FORMAT</code> parameters. If you specify multiple <code class="codeph">FORMAT</code> parameters, then RMAN uses the multiple <code class="codeph">FORMAT</code> parameters only when you specify multiple copies. You can create multiple copies by using the <code class="codeph">BACKUP ...</code> <code class="codeph">COPIES</code>, <a class="olink RCMRF153" target="_blank" href="../RCMRF/rcmsynta2014.htm#RCMRF153"><code class="codeph">SET BACKUP COPIES</code></a>, or <a class="olink RCMRF113" target="_blank" href="../RCMRF/rcmsynta009.htm#RCMRF113"><code class="codeph">CONFIGURE ... BACKUP COPIES</code></a> commands.</p>
<div class="infobox-note" id="GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9__GUID-19CC7970-0D5B-4B70-977A-092FC189D732">
<p class="notep1">Note:</p>
<p>If you use a media manager, then check your vendor documentation for restrictions on <code class="codeph">FORMAT</code>, such as the size of the name, the naming conventions, and so on.</p>
</div>
<div class="infoboxnotealso" id="GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9__GUID-68F4AC4E-0297-419C-9E6F-0769116E7081">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="rcmbckba.htm#GUID-A733BDFC-8239-4610-8D26-40B6F2D07091">Specifying a Format for RMAN Backups</a>&#34;</span></p>
</li>
<li>
<p><a class="olink RCMRF107" target="_blank" href="../RCMRF/rcmsynta006.htm#RCMRF107"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for descriptions of the <code class="codeph">FORMAT</code> clause and the substitution variables</p>
</li>
</ul>
</div>
</div>
</div>
<a id="BRADV89484"></a>
<div class="props_rev_3"><a id="GUID-DD7E7E32-B0F7-4FA0-91C3-0811610A13D9"></a>
<h3 id="BRADV-GUID-DD7E7E32-B0F7-4FA0-91C3-0811610A13D9" class="sect3">About Number and Size of RMAN Backup Pieces</h3>
<div>
<p>By default a backup set contains one backup piece. To restrict the size of each backup piece, specify the <code class="codeph">MAXPIECESIZE</code> option of the <a class="olink RCMRF113" target="_blank" href="../RCMRF/rcmsynta009.htm#RCMRF113"><code class="codeph">CONFIGURE CHANNEL</code></a> or <a class="olink RCMRF102" target="_blank" href="../RCMRF/rcmsynta004.htm#RCMRF102"><code class="codeph">ALLOCATE CHANNEL</code></a> commands. This option limits backup piece size to the specified number of bytes. If the total size of the backup set is greater than the specified backup piece size, then RMAN creates multiple physical pieces to hold the backup set contents.</p>
<p>You can use this option for media managers that cannot manage a backup piece that spans multiple tapes. For example, if a tape can hold 10 GB, but the backup set being created must hold 80 GB of data, then you must instruct RMAN to create backup pieces of 10 GB, small enough to fit on the tapes used with the media manager. In this case, the backup set media consists of eight tapes. Media managers supporting SBT 2.0 can return a value to RMAN indicating the largest supported backup piece size, which RMAN uses in planning backup activities.</p>
<p>If you specify the <code class="codeph">SECTION SIZE</code> parameter on the <code class="codeph">BACKUP</code> command, then RMAN can create a <a id="d34189e1725" class="indexterm-anchor"></a><a href="glossary.htm#GUID-6D6DDA5E-F1EF-4273-8649-137F1FC89EB6"><span class="xrefglossterm">multisection backup</span></a>. In this case, a single backup set can contain multiple backup pieces, each containing a <a id="d34189e1731" class="indexterm-anchor"></a><a href="glossary.htm#GUID-FDECFF77-1833-4BD3-A23C-AA4806E28241"><span class="xrefglossterm">file section</span></a>. The purpose of multisection backups is to enable multiple channels to back up a large file in parallel.</p>
<div class="infoboxnotealso" id="GUID-DD7E7E32-B0F7-4FA0-91C3-0811610A13D9__GUID-1B03D6AC-4A72-4BC0-AFFB-6B9B9FA1B862">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="rcmconfa.htm#GUID-B5C38414-33DD-4A0F-B0FD-B63F1AC74B33">Configuring the Maximum Size of Backup Pieces</a>&#34;</span></p>
</li>
<li>
<p><a class="olink RCMRF102" target="_blank" href="../RCMRF/rcmsynta004.htm#RCMRF102"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">ALLOCATE</code> <code class="codeph">CHANNEL</code> syntax</p>
</li>
<li>
<p><a class="olink RCMRF113" target="_blank" href="../RCMRF/rcmsynta009.htm#RCMRF113"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">CONFIGURE</code> syntax</p>
</li>
</ul>
</div>
</div>
</div>
<a id="BRADV89485"></a>
<div class="props_rev_3"><a id="GUID-5A5E1735-A8D6-4481-BED9-105144E9B39A"></a>
<h3 id="BRADV-GUID-5A5E1735-A8D6-4481-BED9-105144E9B39A" class="sect3">About Number and Size of RMAN Backup Sets</h3>
<div>
<p><a id="d34189e1837" class="indexterm-anchor"></a><a id="d34189e1841" class="indexterm-anchor"></a><a id="d34189e1845" class="indexterm-anchor"></a>You use the <a class="olink RCMRF90026" target="_blank" href="../RCMRF/rcmsynta006.htm#RCMRF90026"><span class="italic"><code class="codeph">backupSpec</code></span></a> clause of the <code class="codeph">BACKUP</code> command to specify the objects to be backed up. Each <span class="italic"><code class="codeph">backupSpec</code></span> clause produces at least one backup set.</p>
<p>The total number and size of backup sets depends mostly on an internal RMAN algorithm. However, you can influence RMAN behavior with the <code class="codeph">MAXSETSIZE</code> parameter in the <code class="codeph">CONFIGURE</code> or <code class="codeph">BACKUP</code> command. By limiting the size of the backup set, the parameter indirectly limits the number of files in the set and can possibly force RMAN to create additional backup sets. Also, you can specify <code class="codeph">BACKUP ... FILESPERSET</code> to specify the maximum number of files in each backup set.</p>
<div class="infoboxnotealso" id="GUID-5A5E1735-A8D6-4481-BED9-105144E9B39A__GUID-757856C9-A548-4205-9623-BBF1EAE042C5">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="rcmbckad.htm#GUID-04C958FE-A0D3-41A2-B777-73868CDAD4B7">About Backup Set Size</a>&#34;</span></p>
</li>
<li>
<p><a href="rcmtunin.htm#GUID-33D81037-2310-4021-8039-1A2C579AAA5A">Tuning RMAN Performance</a> to learn about RMAN buffer management</p>
</li>
<li>
<p><a class="olink RCMRF107" target="_blank" href="../RCMRF/rcmsynta006.htm#RCMRF107"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> to learn the syntax for the <span class="italic"><code class="codeph">backupSpec</code></span> clause</p>
</li>
</ul>
</div>
</div>
</div>
<a id="BRADV196"></a><a id="BRADV89486"></a>
<div class="props_rev_3"><a id="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97"></a>
<h3 id="BRADV-GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97" class="sect3">About Multiplexed RMAN Backup Sets</h3>
<div>
<p><a id="d34189e1973" class="indexterm-anchor"></a><a id="d34189e1975" class="indexterm-anchor"></a>When creating backup sets, RMAN can simultaneously read multiple files from disk and then write their blocks into the same backup set. For example, RMAN can read from two data files simultaneously, and then combine the blocks from these data files into a single backup piece. The combination of blocks from multiple files is called backup <a href="glossary.htm#GUID-635043F8-78E2-4B43-A3C4-E27AFEAF363C"><span class="xrefglossterm">multiplexing</span></a>. Image copies, by contrast, are never multiplexed.</p>
<div class="infobox-note" id="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97__GUID-10CE3FAB-D691-4ECD-9857-11AB637004E5">
<p class="notep1">Note:</p>
<p>If RMAN creates a <a id="d34189e1987" class="indexterm-anchor"></a><a href="glossary.htm#GUID-6D6DDA5E-F1EF-4273-8649-137F1FC89EB6"><span class="xrefglossterm">multisection backup</span></a> of a data file, then the data file is not multiplexed with any other data file or <a id="d34189e1993" class="indexterm-anchor"></a><a href="glossary.htm#GUID-FDECFF77-1833-4BD3-A23C-AA4806E28241"><span class="xrefglossterm">file section</span></a>.</p>
</div>
<p>As <a href="rcmcncpt.htm#GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97__i1018026">Figure 8-1</a> illustrates, RMAN can back up three data files into a backup set that contains only one backup piece. This backup piece contains the intermingled data blocks of the three input data files.</p>
<div class="figure" id="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97__i1018026">
<p class="titleinfigure">Figure 8-1 Data File Multiplexing</p>
<img width="496" height="316" src="img/GUID-DC411CF4-B94E-4097-8C3D-D0709F24AE8B-default.gif" alt="Description of Figure 8-1 follows" title="Description of Figure 8-1 follows"/><br/>
<a href="img_text/GUID-DC411CF4-B94E-4097-8C3D-D0709F24AE8B-print.htm">Description of &#34;Figure 8-1 Data File Multiplexing&#34;</a></div>
<!-- class="figure" -->
<p>RMAN multiplexing is determined by several factors. For example, <a id="d34189e2010" class="indexterm-anchor"></a><a id="d34189e2014" class="indexterm-anchor"></a>the <code class="codeph">FILESPERSET</code> parameter of the <code class="codeph">BACKUP</code> command determines how many data files to put in each backup set. The <code class="codeph">MAXOPENFILES</code> parameter of <code class="codeph">ALLOCATE CHANNEL</code> or <code class="codeph">CONFIGURE CHANNEL</code> defines how many data files RMAN can read from simultaneously. The basic multiplexing algorithm is as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Number of files in each backup set</p>
<p>This number is the minimum of the <code class="codeph">FILESPERSET</code> setting and the number of files read by each channel. The <code class="codeph">FILESPERSET</code> default is 64.</p>
</li>
<li>
<p>The <a href="glossary.htm#GUID-648D7B2D-7AB2-40C0-AFFD-0A6FE569F3D7"><span class="xrefglossterm">level of multiplexing</span></a></p>
<p>This is the number of input files simultaneously read and then written into the same backup piece. The level of multiplexing is the minimum of <code class="codeph">MAXOPENFILES</code> and the number of files in each backup set. The <code class="codeph">MAXOPENFILES</code> default is 8.</p>
</li>
</ul>
<p>Suppose that you back up 12 data files with one channel when <code class="codeph">FILEPERSET</code> is set to 4. The level of multiplexing is the lesser of this number and 8. Thus, the channel simultaneously writes blocks from 4 data files into each backup piece.</p>
<p>Now suppose that you back up 50 data files with one channel. The number of files in each backup set is 50. The level of multiplexing is the lesser of this number and 8. Thus, the channel simultaneously writes blocks from 8 data files into each backup piece.</p>
<p>RMAN multiplexing of backup sets is different from <a id="d34189e2070" class="indexterm-anchor"></a><a href="glossary.htm#GUID-C40B78A9-99C9-4B49-85D0-8174FD1E271B"><span class="xrefglossterm">media manager multiplexing</span></a>. One type of media manager multiplexing occurs when the media manager writes the concurrent output from multiple RMAN channels to a single sequential device. Another type occurs when a backup mixes database files and non-database files on the same tape.</p>
<div class="infobox-note" id="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97__GUID-E4DAF1D6-C569-4440-A486-DEBA713A4C37">
<p class="notep1">Note:</p>
<p>Oracle recommends that you never use media manager multiplexing for RMAN backups.</p>
</div>
<div class="infoboxnotealso" id="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97__GUID-23DF9C1B-2AA3-460D-834F-D14D63550319">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="rcmtunin.htm#GUID-59FBFBBE-78F0-4035-8FAC-818DB539576B">Allocation of Input Disk Buffers</a>&#34;</span> to learn how multiplexing affects allocation of disk buffers during backups</p>
</li>
<li>
<p><a class="olink RCMRF107" target="_blank" href="../RCMRF/rcmsynta006.htm#RCMRF107"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">BACKUP</code> syntax</p>
</li>
</ul>
</div>
</div>
</div>
<a id="BRADV89487"></a>
<div class="props_rev_3"><a id="GUID-2F6EBF71-E699-4C9C-832B-9AA8566E3F47"></a>
<h3 id="BRADV-GUID-2F6EBF71-E699-4C9C-832B-9AA8566E3F47" class="sect3">About RMAN Proxy Copies</h3>
<div>
<p>During a <a id="d34189e2172" class="indexterm-anchor"></a><a href="glossary.htm#GUID-C4A7D804-0F77-4FA3-AA77-85D3C7E78E2B"><span class="xrefglossterm">proxy copy</span></a>, RMAN turns over control of the data transfer to a media manager that supports this feature. Proxy copy can only be used with media managers that support it and cannot be used with channels of type <code class="codeph">DISK</code>. The <code class="codeph">PROXY</code> option of<a id="d34189e2184" class="indexterm-anchor"></a><a id="d34189e2188" class="indexterm-anchor"></a> the <code class="codeph">BACKUP</code> command specifies that a backup is a proxy copy.</p>
<p>For each file that you attempt to back up with the <a id="d34189e2199" class="indexterm-anchor"></a><a id="d34189e2203" class="indexterm-anchor"></a><a id="d34189e2207" class="indexterm-anchor"></a><a id="d34189e2213" class="indexterm-anchor"></a><code class="codeph">BACKUP</code> <code class="codeph">PROXY</code> command, RMAN queries the media manager to determine whether it can perform a proxy copy. If the media manager cannot proxy copy the file, then RMAN backs up the file as if the <code class="codeph">PROXY</code> option had not been used. (Use the <a id="d34189e2227" class="indexterm-anchor"></a><a id="d34189e2233" class="indexterm-anchor"></a><a id="d34189e2237" class="indexterm-anchor"></a><code class="codeph">PROXY</code> <code class="codeph">ONLY</code> option to force RMAN to fail if a proxy copy cannot be performed.)</p>
<p>Control files are never backed up with proxy copy. If the <code class="codeph">PROXY</code> option is specified on an operation backing up a control file, then it is silently ignored for the purposes of backing up the control file.</p>
<div class="infoboxnotealso" id="GUID-2F6EBF71-E699-4C9C-832B-9AA8566E3F47__GUID-53D434D4-1052-40A7-9D65-D21EC89FFF83">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink REFRN" target="_blank" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for more information about the views <code class="codeph">V$PROXY_DATAFILE</code> and <code class="codeph">V$PROXY_ARCHIVEDLOG</code></p>
</li>
<li>
<p><a class="olink RCMRF107" target="_blank" href="../RCMRF/rcmsynta006.htm#RCMRF107"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for the <code class="codeph">BACKUP</code> command and the <code class="codeph">PROXY</code> option</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="BRADV89488"></a>
<div class="props_rev_3"><a id="GUID-3580BA12-463A-4A61-939D-58C51E81FF12"></a>
<h2 id="BRADV-GUID-3580BA12-463A-4A61-939D-58C51E81FF12" class="sect2">About RMAN Image Copies</h2>
<div>
<p><a id="d34189e2354" class="indexterm-anchor"></a><a id="d34189e2358" class="indexterm-anchor"></a><a id="d34189e2360" class="indexterm-anchor"></a><a id="d34189e2364" class="indexterm-anchor"></a>An <a id="d34189e2371" class="indexterm-anchor"></a><a href="glossary.htm#GUID-397CB99E-3F07-4980-96B3-9D0D0ABBABEA"><span class="xrefglossterm">image copy</span></a> is an exact copy of a single data file, archived redo log file, or control file. Image copies are not stored in an RMAN-specific format. They are identical to the results of copying a file with operating system commands. RMAN can use image copies during RMAN restore and recover operations, and you can also use image copies with non-RMAN restore and recovery techniques.</p>
<p>This section contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmcncpt.htm#GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4">About RMAN-Created Image Copies</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-C0BD0706-29EF-44C6-AF53-401522B4BDD0">About User-Managed Image Copies</a></p>
</li>
</ul>
</div>
<a id="BRADV197"></a><a id="BRADV89489"></a>
<div class="props_rev_3"><a id="GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4"></a>
<h3 id="BRADV-GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4" class="sect3">About RMAN-Created Image Copies</h3>
<div>
<p>To create image copies and have them recorded in the RMAN repository, you run the <a id="d34189e2463" class="indexterm-anchor"></a><a id="d34189e2467" class="indexterm-anchor"></a><a id="d34189e2471" class="indexterm-anchor"></a>RMAN <code class="codeph">BACKUP</code> <code class="codeph">AS</code> <code class="codeph">COPY</code> command. Alternatively, you can configure the default backup type for disk as image copies. A database server session is used to create the copy. The server session also performs actions such as validating the blocks in the file and recording the image copy in the RMAN repository.</p>
<p><a id="d34189e2486" class="indexterm-anchor"></a>As with backup pieces, <a class="olink RCMRF195" target="_blank" href="../RCMRF/rcmsubcl012.htm#RCMRF195"><code class="codeph">FORMAT</code></a> variables are used to specify the names of image copies. The default format <code class="codeph">%U</code>, which was explained in <span class="q">&#34;<a href="rcmcncpt.htm#GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9">About File Names for RMAN Backup Pieces</a>&#34;</span>, is defined differently for image copies. The following example shows the name for data file <code class="codeph">2</code> generated by <code class="codeph">%U</code>:</p>
<pre dir="ltr">/d1/oracle/work/orcva/RDBMS/datafile/o1_mf_sysaux_2qylngm3_.dbf
</pre>
<p>When creating image copies, you can also name the output copies with the <code class="codeph">DB_FILE_NAME_CONVERT</code> parameter of the<a id="d34189e2515" class="indexterm-anchor"></a><a id="d34189e2519" class="indexterm-anchor"></a> <code class="codeph">BACKUP</code> command. This parameter works identically to the <a class="olink REFRN10038" target="_blank" href="../REFRN/GUID-E8B4E0EA-B073-4349-9EA9-E053F499FB9E.htm#REFRN10038"><code class="codeph">DB_FILE_NAME_CONVERT</code></a> initialization parameter. Pairs of file name prefixes are provided to change the names of the output files. If a file is not converted by any of the pairs, then RMAN uses the <code class="codeph">FORMAT</code> specification: if no <code class="codeph">FORMAT</code> is specified, then RMAN uses the default format <code class="codeph">%U</code>.</p>
<div class="example" id="GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4__CHDFBHHA">
<p class="titleinexample">Example 8-1 Specifying File Names with DB_FILE_NAME_CONVERT</p>
<p>This example copies the data files whose file name is prefixed with <code class="codeph">/maindisk/oradata/users</code> so that they are prefixed with <code class="codeph">/backups/users_ts</code>.</p>
<pre dir="ltr">BACKUP AS COPY 
  DB_FILE_NAME_CONVERT (&#39;/maindisk/oradata/users&#39;,
                        &#39;/backups/users_ts&#39;)
  TABLESPACE users;
</pre></div>
<!-- class="example" -->
<div class="section">
<p>If you run a <code class="codeph">RESTORE</code> command, then by default RMAN restores a data file or control file to its original location by copying an image copy backup to that location. Image copies are chosen over backup sets because of the extra overhead of reading through an entire backup set in search of files to be restored.</p>
<p>If you must restore and recover a current data file, and if you have an image copy available on disk, then you do not need to have RMAN copy the image copy back to its old location. Instead, you can use the image copy in place as a replacement for the data file to be restored. <span class="q">&#34;<a href="rcmcomre.htm#GUID-19A07A76-AE1E-41EE-8B7D-7C4EF1FD3137">Performing Complete Recovery After Switching to a Copy</a>&#34;</span> explains how to perform this task.</p>
<div class="infoboxnotealso" id="GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4__GUID-4B1FF3CA-8C95-42D6-9849-ED5D8E2A449C">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="rcmconfb.htm#GUID-BC37B3E4-3338-4452-A363-DB882F2E9415">Configuring the Default Type for Backups: Backup Sets or Copies</a>&#34;</span> to learn how to make either backup sets or image copies the default type of RMAN backups</p>
</li>
<li>
<p><span class="q">&#34;<a href="rcmbckba.htm#GUID-030BA0C5-832E-42A1-A63A-5E2D768BABB9">Specifying Backup Set or Copy for an RMAN Backup to Disk</a>&#34;</span></p>
</li>
<li>
<p><a class="olink RCMRF195" target="_blank" href="../RCMRF/rcmsubcl012.htm#RCMRF195"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> to learn about the meaning of <code class="codeph">%U</code> for image copies</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="BRADV89490"></a>
<div class="props_rev_3"><a id="GUID-C0BD0706-29EF-44C6-AF53-401522B4BDD0"></a>
<h3 id="BRADV-GUID-C0BD0706-29EF-44C6-AF53-401522B4BDD0" class="sect3">About User-Managed Image Copies</h3>
<div>
<p><a id="d34189e2662" class="indexterm-anchor"></a>RMAN can use image copies created by mechanisms outside of RMAN, such as native operating system file copy commands or third-party utilities that leave image copies of files on disk. This type of copy is known as a <a href="glossary.htm#GUID-F4A66D43-CA48-412E-98E8-B25CE1C7B065"><span class="xrefglossterm">user-managed backup</span></a> or <a href="glossary.htm#GUID-8E947868-63C3-4199-A29C-FE376DB38D1C"><span class="xrefglossterm">operating system backup</span></a>.</p>
<p>You can use the <a class="olink RCMRF109" target="_blank" href="../RCMRF/rcmsynta007.htm#RCMRF109"><code class="codeph">CATALOG</code></a> command to inspect an existing image copy and enter its metadata into the RMAN repository. However, the <code class="codeph">CATALOG</code> command does not do the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Read all blocks in the data file copy to ensure there are no corruptions</p>
</li>
<li>
<p>Guarantee that the image copy was correctly made in <a id="d34189e2692" class="indexterm-anchor"></a><a href="glossary.htm#GUID-BD2A12D3-A995-49B8-AE99-B8DDDF4FE7E7"><span class="xrefglossterm">backup mode</span></a></p>
</li>
</ul>
<p>After you catalog these files, you can use them with the <a class="olink RCMRF149" target="_blank" href="../RCMRF/rcmsynta2008.htm#RCMRF149"><code class="codeph">RESTORE</code></a> or <a class="olink RCMRF159" target="_blank" href="../RCMRF/rcmsynta2021.htm#RCMRF159"><code class="codeph">SWITCH</code></a> commands just as you can for RMAN-generated image copies.</p>
<p><a id="d34189e2710" class="indexterm-anchor"></a>Some sites store their data files on mirrored disk volumes, which permit the creation of image copies by <a href="glossary.htm#GUID-4810DFC7-CC25-4CD9-8D04-79EE7DAF061D"><span class="xrefglossterm">breaking a mirror</span></a>. After you have broken the mirror, you can notify RMAN of the existence of a new user-managed copy, thus making it eligible for a backup. You must notify RMAN when the copy is no longer available by using the <a class="olink RCMRF110" target="_blank" href="../RCMRF/rcmsynta008.htm#RCMRF110"><code class="codeph">CHANGE</code></a> <code class="codeph">...</code> <code class="codeph">UNCATALOG</code> command.</p>
<div class="infoboxnotealso" id="GUID-C0BD0706-29EF-44C6-AF53-401522B4BDD0__GUID-CAA82815-C2C1-43AC-800B-90579187BAA2">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="osbackup.htm#GUID-2193FAD0-F62C-4671-9272-55E8BD7367DC">Making User-Managed Database Backups</a></p>
</li>
<li>
<p><span class="q">&#34;<a href="rcmmaint.htm#GUID-3FC88C14-C9CC-445D-8922-C92659004FA4">Adding Backup Records to the RMAN Repository</a>&#34;</span> to learn how to catalog data file and archived log image copies</p>
</li>
<li>
<p><span class="q">&#34;<a href="rcmbckad.htm#GUID-EEA8D192-E7CD-4457-A0E3-5062EA2E8D0C">Making Split Mirror Backups with RMAN</a>&#34;</span></p>
</li>
<li>
<p><a class="olink RCMRF110" target="_blank" href="../RCMRF/rcmsynta008.htm#RCMRF110"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">CHANGE</code> syntax</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="BRADV107"></a>
<div class="props_rev_3"><a id="GUID-763A9C75-90A5-48FD-9CB6-707D030A00F5"></a>
<h2 id="BRADV-GUID-763A9C75-90A5-48FD-9CB6-707D030A00F5" class="sect2">About Multiple Copies of RMAN Backups</h2>
<div>
<p>In RMAN, you can make multiple, identical copies of backups in the following ways:</p>
<ul style="list-style-type: disc;">
<li>
<p><a id="d34189e2835" class="indexterm-anchor"></a><a id="d34189e2839" class="indexterm-anchor"></a>Duplex backups with the <code class="codeph">BACKUP</code> <code class="codeph">... COPIES</code> command, in which case RMAN creates multiple copies of each backup set</p>
<p>See <a href="rcmcncpt.htm#GUID-7BDEDD51-33B0-4B95-8D62-B11C225C490A">About Duplexed Backup Sets</a>.</p>
</li>
<li>
<p>Back up your files as backup sets or image copies, and then back up the backup sets or image copies with the <a id="d34189e2859" class="indexterm-anchor"></a><a id="d34189e2863" class="indexterm-anchor"></a><a id="d34189e2867" class="indexterm-anchor"></a>RMAN <code class="codeph">BACKUP</code> <code class="codeph">BACKUPSET</code> or <code class="codeph">BACKUP</code> <code class="codeph">COPY OF</code> commands</p>
<p>See <a href="rcmcncpt.htm#GUID-3F8EDAFC-8A29-4E7B-BFEC-087AE10EDC91">About Backups of Backups</a>.</p>
</li>
</ul>
</div>
<a id="BRADV89491"></a>
<div class="props_rev_3"><a id="GUID-7BDEDD51-33B0-4B95-8D62-B11C225C490A"></a>
<h3 id="BRADV-GUID-7BDEDD51-33B0-4B95-8D62-B11C225C490A" class="sect3">About Duplexed Backup Sets</h3>
<div>
<p><a id="d34189e2958" class="indexterm-anchor"></a><a id="d34189e2960" class="indexterm-anchor"></a>When backing up data files, archived redo log files, server parameter files, and control files into backup pieces, RMAN can create a <a href="glossary.htm#GUID-614D6594-1A1A-46EE-A041-312ADAB7E151"><span class="xrefglossterm">duplexed backup set</span></a>, producing up to four identical copies of each backup piece in the backup set on different backup destinations with one <code class="codeph">BACKUP</code> command. Duplexing is not supported for backup operations that produce image copies.</p>
<p>You can use the <code class="codeph">COPIES</code> parameter in the <code class="codeph">CONFIGURE</code>, <code class="codeph">SET</code>, or<a id="d34189e2985" class="indexterm-anchor"></a><a id="d34189e2989" class="indexterm-anchor"></a> <code class="codeph">BACKUP</code> commands to specify duplexing of backup sets when using the <code class="codeph">BACKUP</code> command. RMAN can duplex backups to either disk or tape, but cannot duplex backups to tape and disk simultaneously. When backing up to tape, ensure that the number of copies does not exceed the number of available tape devices.</p>
<p><a id="d34189e3002" class="indexterm-anchor"></a><a id="d34189e3006" class="indexterm-anchor"></a>The <code class="codeph">FORMAT</code> parameter of the <code class="codeph">BACKUP</code> command specifies the destinations for duplexed backups. The following example creates three copies of the backup of data file 7:</p>
<pre dir="ltr">BACKUP DEVICE TYPE DISK COPIES 3 DATAFILE 7 
  FORMAT &#39;/disk1/%U&#39;,&#39;?/oradata/%U&#39;,&#39;?/%U&#39;;
</pre>
<p>RMAN places the first copy of each backup piece in <code class="codeph">/disk1</code>, the second in <code class="codeph">?/oradata</code>, and the third in the Oracle home. RMAN does not produce three backup sets, each with a different unique backup set key. Rather, RMAN produces one backup set with a unique key, and generates three identical copies of each backup piece in the set.</p>
<div class="infoboxnotealso" id="GUID-7BDEDD51-33B0-4B95-8D62-B11C225C490A__GUID-E86A1E9C-6391-414B-B664-6785ED7B1BDB">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="rcmconfa.htm#GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B">Configuring Backup Duplexing</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="rcmbckad.htm#GUID-4CFE9BA0-E298-42B8-9FB6-D36751C09D54">Duplexing Backup Sets</a>&#34;</span></p>
</li>
<li>
<p><a class="olink RCMRF113" target="_blank" href="../RCMRF/rcmsynta009.htm#RCMRF113"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">CONFIGURE</code> syntax</p>
</li>
<li>
<p><a class="olink RCMRF153" target="_blank" href="../RCMRF/rcmsynta2014.htm#RCMRF153"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">SET</code> syntax</p>
</li>
</ul>
</div>
</div>
</div>
<a id="BRADV89492"></a>
<div class="props_rev_3"><a id="GUID-3F8EDAFC-8A29-4E7B-BFEC-087AE10EDC91"></a>
<h3 id="BRADV-GUID-3F8EDAFC-8A29-4E7B-BFEC-087AE10EDC91" class="sect3">About Backups of RMAN Backups</h3>
<div>
<p>You can use the <code class="codeph">BACKUP</code> command to back up existing backup sets and image copies. Backing up existing backups enables you to make multiple, identical copies of RMAN backups.</p>
<p>The following sections provide more information about the methods of creating backups up backups:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmcncpt.htm#GUID-27161367-1F36-403A-9862-F7C69DA24642">Backups of Backup Sets</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-FEBF71D7-0FD8-4BB4-8B71-6485165C8C01">Backups of Image Copies</a></p>
</li>
</ul>
</div>
<a id="BRADV607"></a><a id="BRADV203"></a><a id="BRADV89493"></a>
<div class="props_rev_3"><a id="GUID-27161367-1F36-403A-9862-F7C69DA24642"></a>
<h4 id="BRADV-GUID-27161367-1F36-403A-9862-F7C69DA24642" class="sect4">Backups of Backup Sets</h4>
<div>
<p><a id="d34189e3218" class="indexterm-anchor"></a><a id="d34189e3222" class="indexterm-anchor"></a><a id="d34189e3226" class="indexterm-anchor"></a><a id="d34189e3230" class="indexterm-anchor"></a>The RMAN <code class="codeph">BACKUP</code> <code class="codeph">BACKUPSET</code> command backs up backup sets that were created on disk. <a id="d34189e3241" class="indexterm-anchor"></a><a id="d34189e3245" class="indexterm-anchor"></a><a id="d34189e3250" class="indexterm-anchor"></a><a id="d34189e3254" class="indexterm-anchor"></a>The command is a useful way to spread backups among multiple media.</p>
<p>If RMAN discovers that one copy of a backup set is corrupted or missing, then it searches for other copies of the same backup set. This behavior is similar to the behavior of RMAN when backing up archived redo logs that exist in multiple archiving destinations.</p>
<div class="example" id="GUID-27161367-1F36-403A-9862-F7C69DA24642__CHDHGCFI">
<p class="titleinexample">Example 8-2 Backing Up Backup Sets to Tape</p>
<p>This example shows how you might run the <code class="codeph">BACKUP</code> command weekly as part of the production backup schedule. In this way, you ensure that all your backups exist on both disk and tape.</p>
<pre dir="ltr">BACKUP DEVICE TYPE DISK AS BACKUPSET 
  DATABASE PLUS ARCHIVELOG; 
BACKUP 
  DEVICE TYPE sbt 
  BACKUPSET ALL; # copies backup sets on disk to tape
</pre>
<div class="infobox-note" id="GUID-27161367-1F36-403A-9862-F7C69DA24642__GUID-4A312AF8-5FB7-44B5-A2C4-63CD32486337">
<p class="notep1">Note:</p>
<p>Backups to <code class="codeph">sbt</code> that use automatic channels require that you first run the <code class="codeph">CONFIGURE</code> <code class="codeph">DEVICE</code> <code class="codeph">TYPE</code> <code class="codeph">sbt</code> command.</p>
</div>
</div>
<!-- class="example" -->
<div class="example" id="GUID-27161367-1F36-403A-9862-F7C69DA24642__CHDFIGIE">
<p class="titleinexample">Example 8-3 Managing Space Allocation</p>
<p>You can also use <code class="codeph">BACKUP</code> <code class="codeph">BACKUPSET</code> to manage backup space allocation. This example backs up backup sets that were created more than a week ago from disk to tape, and then deletes them from disk.</p>
<pre dir="ltr">BACKUP 
  DEVICE TYPE sbt 
  BACKUPSET COMPLETED BEFORE &#39;SYSDATE-7&#39; 
  DELETE INPUT;
</pre>
<p><code class="codeph">DELETE</code> <code class="codeph">INPUT</code> here is equivalent to <code class="codeph">DELETE</code> <code class="codeph">ALL</code> <code class="codeph">INPUT</code>: RMAN deletes all existing copies of the backup set. If you duplexed a backup to four locations, then RMAN deletes all four copies of the pieces in the backup set.</p>
<div class="infoboxnotealso" id="GUID-27161367-1F36-403A-9862-F7C69DA24642__GUID-A8948460-5FB1-41A4-9C8D-57660ACBF89F">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmbckba.htm#GUID-731ADA67-235E-481D-AC17-9F9067AD55BF">Backing Up RMAN Backups</a>&#34;</span></p>
</div>
</div>
<!-- class="example" --></div>
</div>
<a id="BRADV89494"></a>
<div class="props_rev_3"><a id="GUID-FEBF71D7-0FD8-4BB4-8B71-6485165C8C01"></a>
<h4 id="BRADV-GUID-FEBF71D7-0FD8-4BB4-8B71-6485165C8C01" class="sect4">Backups of Image Copies</h4>
<div>
<p><a id="d34189e3395" class="indexterm-anchor"></a><a id="d34189e3399" class="indexterm-anchor"></a>You can use the <code class="codeph">BACKUP COPY OF</code> command to back up existing image copies of database files either as backup sets or as image copies. When using this command, an image copy of every data file specified in the command must exist. If there are multiple copies of a data file, then the latest one is used. If you specify a tablespace or the whole database, then RMAN issues an error if there are data files in the database or tablespace for which there are no image copy backups.</p>
</div>
</div>
</div>
</div>
<a id="BRADV111"></a>
<div class="props_rev_3"><a id="GUID-95840C84-1595-49AC-923D-310DA750676B"></a>
<h2 id="BRADV-GUID-95840C84-1595-49AC-923D-310DA750676B" class="sect2">About RMAN Control File and Server Parameter File Autobackups</h2>
<div>
<p><a id="d34189e3487" class="indexterm-anchor"></a><a id="d34189e3491" class="indexterm-anchor"></a><a id="d34189e3495" class="indexterm-anchor"></a><a id="d34189e3499" class="indexterm-anchor"></a><a id="d34189e3503" class="indexterm-anchor"></a>Having recent backups of your control file and server parameter file is extremely valuable in many recovery situations. To ensure that you have backups of these files, the database supports control file and server parameter file autobackups. The autobackup occurs independently of any backup of the current control file explicitly requested as part of your <code class="codeph">BACKUP</code> command.</p>
<p>With a <a href="glossary.htm#GUID-7CDA6567-DFB0-450D-8771-B033E9872AF7"><span class="xrefglossterm">control file autobackup</span></a>, RMAN can recover the database even if the current control file, recovery catalog, and server parameter file are inaccessible. Because the path used to store the autobackup follows a well-known format, RMAN can search for and restore the server parameter file from that autobackup. After you have started the instance with the restored server parameter file, RMAN can restore the control file from the autobackup. After you mount the control file, use the RMAN repository in the mounted control file to restore the data files.</p>
<p>It is recommended that you turn on control file autobackups. Otherwise, RMAN database point-in-time recovery (DBPITR) and point-in-time recovery (PITR) for <a href="glossary.htm#GUID-993BFB3F-3305-481C-999D-26132095DEC9"><span class="xrefglossterm">PDB</span></a>s may not work effectively when PITR needs to undo data file additions or deletions.</p>
<p>This section contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmcncpt.htm#GUID-05C3D461-EF32-4605-959A-DAF03C7C4CC2">When RMAN Performs Control File Autobackups</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F">How RMAN Performs Control File Autobackups</a></p>
</li>
</ul>
</div>
<a id="BRADV89495"></a>
<div class="props_rev_3"><a id="GUID-05C3D461-EF32-4605-959A-DAF03C7C4CC2"></a>
<h3 id="BRADV-GUID-05C3D461-EF32-4605-959A-DAF03C7C4CC2" class="sect3">When RMAN Performs Control File Autobackups</h3>
<div>
<p>For <a href="glossary.htm#GUID-62A96A52-3B97-455A-A443-75B999DCAC94"><span class="xrefglossterm">non-CDB</span></a>s, <a id="d34189e3610" class="indexterm-anchor"></a>if <code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP</code> is <code class="codeph">ON</code>, then RMAN automatically backs up the control file and the current server parameter file (if used to start the database) after a successful <code class="codeph">BACKUP</code> command. For <a href="glossary.htm#GUID-3D253996-C2C0-449A-AFA2-85A9DA323FD3"><span class="xrefglossterm">CDB</span></a>s, by default, the control file autobackup is turned on. If the database runs in <code class="codeph">ARCHIVELOG</code> level, RMAN makes control file autobackups when a structural change to the database affects the contents of the control file.</p>
<div class="infobox-note" id="GUID-05C3D461-EF32-4605-959A-DAF03C7C4CC2__GUID-FD13ECCC-B9EF-4E08-96F4-FCB5A89CCDBF">
<p class="notep1">Note:</p>
<p>Beginning with Oracle Database Release 11<span class="italic">g</span> Release 2, RMAN takes only one control file autobackup when multiple structural changes contained in a script (for example, adding tablespaces, altering the state of a tablespace or data file, adding a new online redo log, renaming a file, and so on) have been applied.</p>
</div>
</div>
</div>
<a id="BRADV89496"></a>
<div class="props_rev_3"><a id="GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F"></a>
<h3 id="BRADV-GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F" class="sect3">How RMAN Performs Control File Autobackups</h3>
<div>
<p>The first channel allocated during the backup job creates the autobackup and places it into its own backup set. For autobackups after database structural changes, the server process associated with the structural change makes the backup.</p>
<p>If a server parameter file is in use by the database, then RMAN backs it up in the same backup set as the control file autobackup. After the autobackup completes, the database writes a message containing the complete path of the backup piece and the device type to the alert log located in the <a id="d34189e3710" class="indexterm-anchor"></a><a href="glossary.htm#GUID-BDCE90D1-13B7-4D2C-A761-1583A238A247"><span class="xrefglossterm">Automatic Diagnostic Repository (ADR)</span></a>.</p>
<div class="infobox-note" id="GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F__GUID-D20BCECC-CFD2-472C-87D3-EF83B039D85D">
<p class="notep1">Note:</p>
<p>Control file autobackups are never duplexed.</p>
</div>
<p><a id="d34189e3720" class="indexterm-anchor"></a>The control file autobackup file name has a default format of <code class="codeph">%F</code> for all device types, so that RMAN can determine the file location and restore it without a repository. You can specify a different format with the <code class="codeph">CONFIGURE</code> <code class="codeph">CONTROLFILE</code> <code class="codeph">AUTOBACKUP</code> <code class="codeph">FORMAT</code> command, but all autobackup formats must include the <code class="codeph">%F</code> variable. If you do not use the default format, then during disaster recovery you must specify the format that was used to generate the autobackups. Otherwise, RMAN cannot restore the autobackup.</p>
<div class="infoboxnotealso" id="GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F__GUID-FAB4770C-BD14-4909-A759-94D224954DC0">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="rcmconfb.htm#GUID-98BA7492-7108-4DF9-B5A2-21957072E308">Configuring Control File and Server Parameter File Autobackups</a>&#34;</span></p>
</li>
<li>
<p><a class="olink RCMRF113" target="_blank" href="../RCMRF/rcmsynta009.htm#RCMRF113"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">CONFIGURE</code> syntax</p>
</li>
<li>
<p><a class="olink RCMRF107" target="_blank" href="../RCMRF/rcmsynta006.htm#RCMRF107"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">BACKUP</code> syntax</p>
</li>
<li>
<p><a class="olink RCMRF195" target="_blank" href="../RCMRF/rcmsubcl012.htm#RCMRF195"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> to learn about the substitution variable <code class="codeph">%F</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="BRADV109"></a>
<div class="props_rev_3"><a id="GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023"></a>
<h2 id="BRADV-GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023" class="sect2">About RMAN Incremental Backups</h2>
<div>
<p>By default, RMAN makes <a id="d34189e3851" class="indexterm-anchor"></a>full backups. A <a href="glossary.htm#GUID-D47BE9B3-BAE1-4415-B4B4-4D577B6CB493"><span class="xrefglossterm">full backup</span></a> of a data file includes every allocated block in the file being backed up. A full backup of a data file can be an image copy, in which case every data block is backed up. It can also be stored in a backup set, in which case data file blocks not in use may be skipped.</p>
<p>A full backup is the default type of RMAN backup. A full backup has no effect on subsequent incremental backups and is not considered a part of an <a href="glossary.htm#GUID-31E3AC05-E73E-4E44-A9AA-915988B9A6A3"><span class="xrefglossterm">incremental backup</span></a> strategy. Image copies are always full backups because they include every data block in a data file. A backup set is by default a full backup because it can potentially include every data block in a data file, although <a href="glossary.htm#GUID-0AA7EB43-FEA6-405F-9443-A4A2B43FFF96"><span class="xrefglossterm">unused block compression</span></a> means that blocks never used are excluded and, in some cases, currently unused blocks are excluded (see <span class="q">&#34;<a href="rcmcncpt.htm#GUID-073C85A4-E28C-4FE2-A089-1EABF3D00070">About RMAN Block Compression for Backup Sets</a>&#34;</span>).</p>
<p>In contrast to a full backup, an incremental backup copies only those data blocks that have changed since a previous backup. You can use RMAN to create incremental backups of data files, tablespaces, or the whole database. A full backup cannot be part of an incremental backup strategy; that is, it cannot be the parent for a subsequent incremental backup.</p>
<div class="infoboxnotealso" id="GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023__GUID-9396A789-0FFE-4DE0-9FC2-DC28188F90E7">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmcncpt.htm#GUID-0E273817-1EE0-40FD-BD92-51C4A0CAAF79">About Multilevel Incremental Backups</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-4F871762-2D64-4709-910A-1880D39A4B99">About the Incremental Backup Algorithm</a></p>
</li>
</ul>
</div>
</div>
<a id="BRADV89499"></a>
<div class="props_rev_3"><a id="GUID-0E273817-1EE0-40FD-BD92-51C4A0CAAF79"></a>
<h3 id="BRADV-GUID-0E273817-1EE0-40FD-BD92-51C4A0CAAF79" class="sect3">About Multilevel Incremental Backups</h3>
<div>
<p>RMAN can create multilevel incremental backups. Each incremental level is denoted by a value of 0 or 1. <a id="d34189e3957" class="indexterm-anchor"></a><a id="d34189e3963" class="indexterm-anchor"></a>A <a id="d34189e3966" class="indexterm-anchor"></a><a href="glossary.htm#GUID-DF84C185-E97D-4D3C-BF4E-41A9090C5F4C"><span class="xrefglossterm">level 0 incremental backup</span></a>, which is the base for subsequent incremental backups, copies all blocks containing data.</p>
<p>The only difference between a level 0 incremental backup and a full backup is that a full backup is never included in an incremental strategy. Thus, an incremental level 0 backup is a full backup that happens to be the parent of incremental backups whose level is greater than 0.</p>
<p>A level 1 incremental backup can be either of the following types:</p>
<ul style="list-style-type: disc;">
<li>
<p>A <a id="d34189e3980" class="indexterm-anchor"></a><a href="glossary.htm#GUID-353B6668-6BA5-4815-8F08-1CD5B446FBD6"><span class="xrefglossterm">differential incremental backup</span></a>, which backs up all blocks changed after the most recent incremental backup at level 1 or 0</p>
<p>See <a href="rcmcncpt.htm#GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2">About Differential Incremental Backups</a>.</p>
</li>
<li>
<p>A <a id="d34189e3995" class="indexterm-anchor"></a><a href="glossary.htm#GUID-8BABFB51-EA47-4204-9A44-E1695A9F9FBF"><span class="xrefglossterm">cumulative incremental backup</span></a>, which backs up all blocks changed after the most recent incremental backup at level 0</p>
<p>See <a href="rcmcncpt.htm#GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859">About Cumulative Incremental Backups</a>.</p>
</li>
</ul>
<p>Incremental backups are differential by default.</p>
<p>Incremental backups at level 0 can be either backup sets or image copies, but incremental backups at level 1 can only be backup sets.</p>
<div class="infobox-note" id="GUID-0E273817-1EE0-40FD-BD92-51C4A0CAAF79__GUID-2C755C08-D6E9-4822-AD53-A29EB3762F30">
<p class="notep1">Note:</p>
<p>Cumulative backups are preferable to differential backups when recovery time is more important than disk space, because fewer incremental backups must be applied during recovery.</p>
</div>
<p>The size of the backup file depends solely upon the number of blocks modified, the incremental backup level, and the type of incremental backup (differential or cumulative).</p>
</div>
<a id="BRADV207"></a><a id="BRADV89500"></a>
<div class="props_rev_3"><a id="GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2"></a>
<h4 id="BRADV-GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2" class="sect4">About Differential Incremental Backups</h4>
<div>
<p><a id="d34189e4086" class="indexterm-anchor"></a><a id="d34189e4092" class="indexterm-anchor"></a><a id="d34189e4096" class="indexterm-anchor"></a><a id="d34189e4100" class="indexterm-anchor"></a>In a differential <a id="d34189e4103" class="indexterm-anchor"></a>level 1 backup, RMAN backs up all blocks that have changed since the most recent incremental backup at level 1 (cumulative or differential) or level 0. For example, in a differential level 1 backup, RMAN determines which level 1 backup occurred most recently and backs up all blocks modified after that backup. If no level 1 is available, then RMAN copies all blocks changed since the base level 0 backup.</p>
<p>If no level 0 backup is available in either the current or parent <a href="glossary.htm#GUID-4CCAB7DD-FEA7-4237-AF2C-304BA3BD52B1"><span class="xrefglossterm">incarnation</span></a>, then the behavior varies with the compatibility mode setting. If compatibility is &gt;=10.0.0, RMAN copies all blocks that have been changed since the file was created. Otherwise, RMAN generates a level 0 backup.</p>
<div class="figure" id="GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2__BABFJCBH">
<p class="titleinfigure">Figure 8-2 Differential Incremental Backups</p>
<img width="600" height="339" src="img/GUID-2F8CC969-E4E8-450A-A805-25D0F63F30E4-default.gif" alt="Description of Figure 8-2 follows" title="Description of Figure 8-2 follows"/><br/>
<a href="img_text/GUID-2F8CC969-E4E8-450A-A805-25D0F63F30E4-print.htm">Description of &#34;Figure 8-2 Differential Incremental Backups&#34;</a></div>
<!-- class="figure" -->
<p>In the example shown in <a href="rcmcncpt.htm#GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2__BABFJCBH">Figure 8-2</a>, the following activity occurs each week:</p>
<ul style="list-style-type: disc;">
<li>
<p>Sunday</p>
<p>An incremental level 0 backup backs up <span class="italic">all</span> blocks that have ever been in use in this database.</p>
</li>
<li>
<p>Monday through Saturday</p>
<p>On each day from Monday through Saturday, a differential incremental level 1 backup backs up all blocks that have changed since the most recent incremental backup at level 1 or 0. The Monday backup copies blocks changed since Sunday level 0 backup, the Tuesday backup copies blocks changed since the Monday level 1 backup, and so forth.</p>
</li>
</ul>
</div>
</div>
<a id="BRADV208"></a><a id="BRADV89501"></a>
<div class="props_rev_3"><a id="GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859"></a>
<h4 id="BRADV-GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859" class="sect4">About Cumulative Incremental Backups</h4>
<div>
<p><a id="d34189e4205" class="indexterm-anchor"></a><a id="d34189e4211" class="indexterm-anchor"></a><a id="d34189e4213" class="indexterm-anchor"></a>In a cumulative <a id="d34189e4218" class="indexterm-anchor"></a>level 1 backup, RMAN backs up all blocks used since the most recent level 0 incremental backup in either the current or parent incarnation. Cumulative incremental backups reduce the work needed for a restore operation by ensuring that you only need one incremental backup from any particular level. Cumulative backups require more space and time than differential backups because they duplicate the work done by previous backups at the same level.</p>
<p>In the example shown in <a href="rcmcncpt.htm#GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859__BABHEJFE">Figure 8-3</a>, the following occurs each week:</p>
<ul style="list-style-type: disc;">
<li>
<p>Sunday</p>
<p>An incremental level 0 backup backs up <span class="italic">all</span> blocks that have ever been in use in this database.</p>
</li>
<li>
<p>Monday - Saturday</p>
<p>A cumulative incremental level 1 backup copies all blocks changed since the most recent level 0 backup. Because the most recent level 0 backup was created on Sunday, the level 1 backup on each day Monday through Saturday backs up all blocks changed since the Sunday backup.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859__GUID-059641F8-F35E-4CD7-A2BA-7731466DCE33">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmbckba.htm#GUID-2AF8EE74-CEB2-468D-A3B2-DD6AD8E41304" title="To create incremental backups for use in an incrementally updated backup strategy, use the BACKUP ... FOR RECOVER OF COPY WITH TAG form of the BACKUP command. The command is best understood in a sample script that implements the strategy.">Making and Updating RMAN Incremental Backups</a>&#34;</span></p>
</div>
<div class="figure" id="GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859__BABHEJFE">
<p class="titleinfigure">Figure 8-3 Cumulative Incremental Backups</p>
<img width="600" height="352" src="img/GUID-E2171C5C-C4C3-43AC-957A-0CB0B311E272-default.gif" alt="Description of Figure 8-3 follows" title="Description of Figure 8-3 follows"/><br/>
<a href="img_text/GUID-E2171C5C-C4C3-43AC-957A-0CB0B311E272-print.htm">Description of &#34;Figure 8-3 Cumulative Incremental Backups&#34;</a></div>
<!-- class="figure" --></div>
</div>
</div>
<a id="BRADV90078"></a>
<div class="props_rev_3"><a id="GUID-16069217-F44A-45BF-BAE6-774B99155E3A"></a>
<h3 id="BRADV-GUID-16069217-F44A-45BF-BAE6-774B99155E3A" class="sect3">About Block Change Tracking</h3>
<div>
<p>The <a id="d34189e4348" class="indexterm-anchor"></a><a href="glossary.htm#GUID-C80ACD57-9170-4FA5-A61F-81A05E77A1A4"><span class="xrefglossterm">block change tracking</span></a> feature for incremental backups improves incremental backup performance by recording changed blocks in each data file in a <a href="glossary.htm#GUID-67A48E71-6A0D-4590-A2BC-C9DE6DAEA3A5"><span class="xrefglossterm">block change tracking file</span></a>. This file is a small binary file stored in the <a href="glossary.htm#GUID-B2954743-3455-4045-9200-891927E38048"><span class="xrefglossterm">database area</span></a>. RMAN tracks changed blocks as redo is generated.</p>
<p>If block change tracking is enabled, then RMAN uses the change tracking file to identify changed blocks for incremental backups, thus avoiding the need to scan every block in the data file. RMAN only uses block change tracking when the incremental level is greater than 0, because a <a id="d34189e4364" class="indexterm-anchor"></a><a href="glossary.htm#GUID-DF84C185-E97D-4D3C-BF4E-41A9090C5F4C"><span class="xrefglossterm">level 0 incremental backup</span></a> includes all blocks.</p>
<div class="infoboxnotealso" id="GUID-16069217-F44A-45BF-BAE6-774B99155E3A__GUID-5C91A0AD-884F-4CDF-9A9D-982EEE49E19A">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmbckba.htm#GUID-4E1F605A-76A7-48D0-9D9B-7343B4327E2A">Using Block Change Tracking to Improve Incremental Backup Performance</a>&#34;</span></p>
</div>
</div>
</div>
<a id="BRADV89498"></a>
<div class="props_rev_3"><a id="GUID-4F871762-2D64-4709-910A-1880D39A4B99"></a>
<h3 id="BRADV-GUID-4F871762-2D64-4709-910A-1880D39A4B99" class="sect3">About the Incremental Backup Algorithm</h3>
<div>
<p>The following concepts are essential for understanding the algorithm that RMAN uses to make incremental backups:</p>
<ul style="list-style-type: disc;">
<li>
<p>Checkpoint SCN</p>
<p>Every data file has a <a href="glossary.htm#GUID-22212AAE-6F3C-4E84-B940-5AB2261A7EDA"><span class="xrefglossterm">data file checkpoint</span></a> SCN, which you can view in <code class="codeph">V$DATAFILE.CHECKPOINT_CHANGE#</code>. All changes with an SCN <span class="italic">lower</span> than this SCN are guaranteed to be in the file. When a level 0 incremental backup is restored, the restored data file contains the checkpoint SCN that it had when the level 0 was created. When a level 1 incremental backup is applied to a file, the checkpoint SCN of the file is advanced to the checkpoint SCN that the file had when the incremental level 1 backup was created.</p>
</li>
<li>
<p>Incremental start SCN</p>
<p>This SCN applies only to level 1 incremental backups. All blocks whose SCN is greater than or equal to the incremental start SCN are included in the backup. Blocks whose SCN is lower than the incremental start SCN are not included in the backup. The incremental start SCN is most often the checkpoint SCN of the parent of the level 1 backup.</p>
</li>
<li>
<p>Block SCN</p>
<p>Every data block in a data file records the SCN at which the most recent change was made to the block.</p>
</li>
</ul>
<p>When RMAN makes a level 1 incremental backup of a file, RMAN reads the file, examines the SCN of every block, and backs up blocks whose SCN is greater than or equal to the incremental start SCN for this backup. If the backup is differential, then the incremental start SCN is the checkpoint SCN of the most recent level 1 backup. If the backup is cumulative, then the incremental start SCN is the checkpoint SCN of the most recent level 0 backup.</p>
<p>When block change tracking is enabled, RMAN uses bitmaps to avoid reading blocks that have not changed during the range from incremental start SCN to checkpoint SCN. RMAN still examines every block that is read and uses the SCN in the block to decide which blocks to include in the backup.</p>
<p>One consequence of the incremental backup algorithm is that RMAN applies all blocks containing changed data during recovery, even if the change is to an object created with the <code class="codeph">NOLOGGING</code> option. Thus, if you restore a backup made before <code class="codeph">NOLOGGING</code> changes were made, then incremental backups are the only way to recover these changes.</p>
<div class="infoboxnotealso" id="GUID-4F871762-2D64-4709-910A-1880D39A4B99__GUID-7B611092-F8FA-4FBF-9D0E-11FC1879A554">
<p class="notep1">See Also:</p>
<p><a class="olink CNCPT" target="_blank" href="../CNCPT/toc.htm"><span class="italic">Oracle Database Concepts</span></a> for more information about <code class="codeph">NOLOGGING</code> mode</p>
</div>
</div>
</div>
<a id="BRADV89497"></a>
<div class="props_rev_3"><a id="GUID-D3BD53B8-91F3-474C-BD10-00AE9B30E610"></a>
<h3 id="BRADV-GUID-D3BD53B8-91F3-474C-BD10-00AE9B30E610" class="sect3">About Recovery with Incremental Backups</h3>
<div>
<p>During <a id="d34189e4565" class="indexterm-anchor"></a><a href="glossary.htm#GUID-5FEE9C7C-AD8F-4CFB-BAF2-E6B52EDC67AB"><span class="xrefglossterm">media recovery</span></a>, RMAN examines the restored files to determine whether it can recover them with an incremental backup. If it has a choice, then RMAN always chooses incremental backups over archived redo logs because applying changes at a block level is faster than applying redo.</p>
<p>RMAN does not need to restore a base incremental backup of a data file to apply incremental backups to the data file during recovery. For example, you can restore data file image copies and recover them with incremental backups.</p>
<div class="infoboxnotealso" id="GUID-D3BD53B8-91F3-474C-BD10-00AE9B30E610__GUID-FB2DD143-9EA7-41E5-A74D-1357F41DFC72">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmrvcon.htm#GUID-EC33413A-79B8-4ECF-A77B-DF91957D76FF">About Selection of Incremental Backups and Archived Redo Logs</a>&#34;</span></p>
</div>
</div>
</div>
<a id="BRADV567"></a>
<div class="props_rev_3"><a id="GUID-819CED6A-55E4-4606-BCA4-3B395FCD30C6"></a>
<h3 id="BRADV-GUID-819CED6A-55E4-4606-BCA4-3B395FCD30C6" class="sect3">About the Incremental-Forever Backup Strategy for Recovery Appliance</h3>
<div>
<p>When backing up to <a href="glossary.htm#GUID-238433D1-4ED8-412E-978F-24197B953D94"><span class="xrefglossterm">Zero Data Loss Recovery Appliance (Recovery Appliance)</span></a>, you can use the incremental-forever backup strategy to eliminate the need for creating recurring full backups. With the incremental-forever backup strategy, you need to create only one initial level 0 full backup and subsequent level 1 incremental backups. The initial backup and the subsequent incrementals must be RMAN backup sets and not image copies.</p>
<p>Note that the Recovery Appliance incremental-forever backup strategy is different from the incrementally updated backup strategy in a conventional RMAN setup. With RMAN, incrementally updated backups use an initial image copy, followed by incremental backups which are eventually merged into the full backup. Therefore, there is always at least one full image copy, a few incremental backups, and some archived redo logs.</p>
<p>Although Recovery Appliance supports other RMAN backup strategies, the recommended method for ongoing backups is the incremental-forever backup strategy.</p>
<div class="infoboxnotealso" id="GUID-819CED6A-55E4-4606-BCA4-3B395FCD30C6__GUID-ED558961-9446-4E59-B910-E094E321A212">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="rcmcomre.htm#GUID-C192C448-0D8A-4366-91AB-BE62ED5B12ED">About Real-Time Redo Transport for Recovery Appliance</a>&#34;</span></p>
</li>
<li>
<p><a class="olink AMPDB768" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=AMPDB768"><span class="italic">Zero Data Loss Recovery Appliance Protected Database Configuration Guide</span></a> for information about the incremental-forever backup strategy</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="BRADV99966"></a>
<div class="props_rev_3"><a id="GUID-3F68F554-FBC9-4375-85DE-7F844C48C8FF"></a>
<h2 id="BRADV-GUID-3F68F554-FBC9-4375-85DE-7F844C48C8FF" class="sect2">About Backup Retention Policies</h2>
<div>
<p><a id="d34189e4741" class="indexterm-anchor"></a>You can use the<a id="d34189e4746" class="indexterm-anchor"></a> <a class="olink RCMRF113" target="_blank" href="../RCMRF/rcmsynta009.htm#RCMRF113"><code class="codeph">CONFIGURE RETENTION POLICY</code></a> command to create a persistent and automatic <a href="glossary.htm#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">backup retention policy</span></a>. When a backup retention policy is in effect, RMAN considers a backup of data files or control files as an <a id="d34189e4760" class="indexterm-anchor"></a><a href="glossary.htm#GUID-A4D8B0BE-D3B9-4DD9-A7B3-BC0D88D25DC0"><span class="xrefglossterm">obsolete backup</span></a>, that is, no longer needed for recovery, according to criteria specified in the <code class="codeph">CONFIGURE</code> command. You can use the <a class="olink RCMRF147" target="_blank" href="../RCMRF/rcmsynta2006.htm#RCMRF147"><code class="codeph">REPORT OBSOLETE</code></a> command to view obsolete files and the <a class="olink RCMRF121" target="_blank" href="../RCMRF/rcmsynta015.htm#RCMRF121"><code class="codeph">DELETE OBSOLETE</code></a> command to delete them.</p>
<p>As you produce backups over time, older backups become obsolete as they are no longer needed to satisfy the retention policy. RMAN can identify the obsolete files for you, but it does not automatically delete them. You must use the <code class="codeph">DELETE</code> <code class="codeph">OBSOLETE</code> command to delete files that are no longer needed to satisfy the retention policy.</p>
<p>If a fast recovery area is configured, then the database automatically deletes files that are either obsolete or backed up to tape when more recovery area space is needed for new files. The disk quota rules are distinct from the retention policy rules, but the database never deletes files in violation of the retention policy to satisfy the disk quota. Refer to <span class="q">&#34;<a href="rcmmaint.htm#GUID-3F11ECB5-1321-45F5-A557-BB1A5BAF011F">Responding to a Full Fast Recovery Area</a>&#34;</span>.</p>
<p><a id="d34189e4796" class="indexterm-anchor"></a>A backup is obsolete when <code class="codeph">REPORT</code> <code class="codeph">OBSOLETE</code> or <code class="codeph">DELETE</code> <code class="codeph">OBSOLETE</code> determines, based on the user-defined retention policy, that it is not needed for recovery. A backup is considered an <a id="d34189e4813" class="indexterm-anchor"></a><a href="glossary.htm#GUID-A8547B27-5415-4AAA-B2B4-C0998EB62E47"><span class="xrefglossterm">expired backup</span></a> only when RMAN performs a crosscheck and cannot find the file. In short, <span class="italic">obsolete</span> means a file is not needed, whereas <span class="italic">expired</span> means it is not found.</p>
<p>A backup retention policy applies only to full or level 0 data file and control file backups. For data file copies and proxy copies, if RMAN determines that the copy or proxy copy is not needed, then the copy or proxy copy can be deleted. For data file backup sets, RMAN cannot delete the backup set until all data file backups within the backup set are obsolete.</p>
<p>The retention policy is not responsible for deleting or rendering obsolete archived redo logs and incremental level 1 backups. Rather, these files become obsolete when no full backups exist that need them. Besides affecting full or level 0 data file and control file backups, the retention policy affects archived redo logs and level 1 incremental backups. First, RMAN decides which data file and control file backups are obsolete. Then, RMAN considers as obsolete all archived logs and incremental level 1 backups that are not needed to recover the oldest data file or control file backup that must be retained.</p>
<div class="infobox-note" id="GUID-3F68F554-FBC9-4375-85DE-7F844C48C8FF__GUID-4F6CC500-7BC2-43B6-86E1-603D8F983494">
<p class="notep1">Note:</p>
<p>RMAN cannot implement an automatic retention policy if backups are deleted by non-RMAN techniques, for example, through the media manager&#39;s tape retention policy. The media manager must never expire a tape until all RMAN backups on that tape have been removed from the media manager&#39;s catalog.</p>
</div>
<p><a id="d34189e4834" class="indexterm-anchor"></a><a id="d34189e4838" class="indexterm-anchor"></a>There are two mutually exclusive options for implementing a retention policy: <a href="glossary.htm#GUID-57A71B9A-2353-4669-A152-EFAD9AFF3ED3"><span class="xrefglossterm">redundancy</span></a> and <a href="glossary.htm#GUID-1C595EF7-B8A1-4AA3-8C45-44E9FC8BAB9E"><span class="xrefglossterm">recovery window</span></a>.</p>
<p>This section contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmcncpt.htm#GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED">About the Recovery Window</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-5AA05D2C-79E0-4BE7-8834-F0DB40186EB9">About Backup Redundancy</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-52F6659C-BA57-400F-8E61-4FD5E18AFB4A">About Batch Deletes of Obsolete Backups</a></p>
</li>
<li>
<p><a href="rcmcncpt.htm#GUID-C55C7DC1-57DB-4E6B-B56E-006C8472054A">About Backup Retention Policy and Fast Recovery Area Deletion Rules</a></p>
</li>
</ul>
</div>
<a id="BRADV209"></a><a id="BRADV608"></a><a id="BRADV89502"></a>
<div class="props_rev_3"><a id="GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED"></a>
<h3 id="BRADV-GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED" class="sect3">About the Recovery Window</h3>
<div>
<p><a id="d34189e4945" class="indexterm-anchor"></a><a id="d34189e4949" class="indexterm-anchor"></a>A recovery window is a period that begins with the current time and extends backward in time to the <a id="d34189e4954" class="indexterm-anchor"></a><strong class="term">point of recoverability</strong>. The point of recoverability is the earliest time for a hypothetical point-in-time recovery, that is, the earliest point to which you can recover following a media failure. For example, if you implement a recovery window of 1 week, then RMAN retains full backups and required incremental backups and archived logs so that the database can be recovered up to 7 days in the past. You implement this retention policy as follows:</p>
<pre dir="ltr">CONFIGURE RETENTION POLICY TO RECOVERY WINDOW OF 7 DAYS;
</pre>
<p>This command ensures that for each data file, one backup that is older than the point of recoverability is retained. For example, if the recovery window is <code class="codeph">7</code>, then there must always exist one backup of each data file that satisfies the following condition:</p>
<pre dir="ltr">SYSDATE - BACKUP CHECKPOINT TIME &gt;= 7
</pre>
<p>All backups older than the most recent backup that satisfied this condition are obsolete.</p>
<p>Assume the retention policy illustrated in <a href="rcmcncpt.htm#GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__i1018027">Figure 8-4</a>. The retention policy has the following aspects:</p>
<ul style="list-style-type: disc;">
<li>
<p>The recovery window is 7 days.</p>
</li>
<li>
<p>Database backups are scheduled every two weeks on these days:</p>
<ul style="list-style-type: disc;">
<li>
<p>January 1</p>
</li>
<li>
<p>January 15</p>
</li>
<li>
<p>January 29</p>
</li>
<li>
<p>February 12</p>
</li>
</ul>
</li>
<li>
<p>The database runs in <code class="codeph">ARCHIVELOG</code> mode, and archived logs are saved on disk only if needed for the retention policy.</p>
</li>
</ul>
<div class="figure" id="GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__i1018027">
<p class="titleinfigure">Figure 8-4 Recovery Window, Part 1</p>
<img width="504" height="327" src="img/GUID-46759BCE-B4FB-4A0A-A543-D794EA29B062-default.gif" alt="Description of Figure 8-4 follows" title="Description of Figure 8-4 follows"/><br/>
<a href="img_text/GUID-46759BCE-B4FB-4A0A-A543-D794EA29B062-print.htm">Description of &#34;Figure 8-4 Recovery Window, Part 1&#34;</a></div>
<!-- class="figure" -->
<p>As illustrated in <a href="rcmcncpt.htm#GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__i1018027">Figure 8-4</a>, the current time is January 23 and the point of recoverability is January 16. Hence, the January 14 backup is needed for recovery, and so are the archived logs from log sequence 500 through 850. The logs before 500 and the January 1 backup are obsolete because they are not needed for recovery to a point within the window.</p>
<p>Assume the same scenario a week later, as depicted in <a href="rcmcncpt.htm#GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__i1018028">Figure 8-5</a>.</p>
<div class="figure" id="GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__i1018028">
<p class="titleinfigure">Figure 8-5 Recovery Window, Part 2</p>
<img width="600" height="314" src="img/GUID-D35E96C7-99B3-42EA-AA4E-A839072A8863-default.gif" alt="Description of Figure 8-5 follows" title="Description of Figure 8-5 follows"/><br/>
<a href="img_text/GUID-D35E96C7-99B3-42EA-AA4E-A839072A8863-print.htm">Description of &#34;Figure 8-5 Recovery Window, Part 2&#34;</a></div>
<!-- class="figure" -->
<p>In this scenario, the current time is January 30 and the point of recoverability is January 23. Note how the January 14 backup is <span class="italic">not</span> obsolete even though a more recent backup (January 28) exists in the recovery window. This situation occurs because restoring the January 28 backup does not enable you to recover to the earliest time in the window, January 23. To ensure recoverability to any point in the window, you must save the January 14 backup and all archived logs from sequence 500 to 1150.</p>
<div class="infoboxnotealso" id="GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__GUID-E17A29E0-6A1B-45B3-9C68-A3F61AEF6AF6">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmconfb.htm#GUID-95ABBB30-713E-4781-B5C3-6ADBEB658DE3">Configuring a Recovery Window-Based Retention Policy</a>&#34;</span></p>
</div>
</div>
</div>
<a id="BRADV89503"></a>
<div class="props_rev_3"><a id="GUID-5AA05D2C-79E0-4BE7-8834-F0DB40186EB9"></a>
<h3 id="BRADV-GUID-5AA05D2C-79E0-4BE7-8834-F0DB40186EB9" class="sect3">About Backup Redundancy</h3>
<div>
<p><a id="d34189e5101" class="indexterm-anchor"></a>In some cases using a recovery window can complicate disk space planning because the number of backups that must be retained is not constant and depends on the backup schedule. In contrast, a redundancy-based retention policy specifies how many backups of each data file must be retained. For example, you can configure a redundancy of 2 as follows:</p>
<pre dir="ltr">CONFIGURE RETENTION POLICY TO REDUNDANCY 2;
</pre>
<p>The default retention policy is configured to <code class="codeph">REDUNDANCY</code> <code class="codeph">1</code>.</p>
<div class="infoboxnotealso" id="GUID-5AA05D2C-79E0-4BE7-8834-F0DB40186EB9__GUID-D1B32A62-734C-48E6-B67C-6B2E43D02001">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmconfb.htm#GUID-E9AEAC34-6C40-40A1-BAF5-3EAE20417715">Configuring a Redundancy-Based Retention Policy</a>&#34;</span></p>
</div>
</div>
</div>
<a id="BRADV89504"></a>
<div class="props_rev_3"><a id="GUID-52F6659C-BA57-400F-8E61-4FD5E18AFB4A"></a>
<h3 id="BRADV-GUID-52F6659C-BA57-400F-8E61-4FD5E18AFB4A" class="sect3">About Batch Deletes of Obsolete Backups</h3>
<div>
<p><a id="d34189e5192" class="indexterm-anchor"></a><a id="d34189e5196" class="indexterm-anchor"></a><a id="d34189e5200" class="indexterm-anchor"></a>You can run <a id="d34189e5207" class="indexterm-anchor"></a>the <a id="d34189e5212" class="indexterm-anchor"></a><code class="codeph">REPORT</code> <code class="codeph">OBSOLETE</code> command to determine which backups are currently obsolete according to the retention policy. A companion command, <code class="codeph">DELETE</code> <code class="codeph">OBSOLETE</code>, deletes all files that are obsolete according to the retention policy. You can run <a id="d34189e5231" class="indexterm-anchor"></a><code class="codeph">DELETE</code> <code class="codeph">OBSOLETE</code> periodically to minimize space wasted by storing obsolete backups. For example, you can <a id="d34189e5241" class="indexterm-anchor"></a>run <code class="codeph">DELETE</code> <code class="codeph">OBSOLETE</code> in a weekly script.</p>
<p>You can also override the configured retention policy by specifying the <code class="codeph">REDUNDANCY</code> or <code class="codeph">RECOVERY</code> <code class="codeph">WINDOW</code> options on the <code class="codeph">REPORT</code> or <code class="codeph">DELETE</code> commands. Using <code class="codeph">DELETE OBSOLETE</code> with a recovery window shorter than the configured recovery window effectively reduces the window of recoverability. For example, if the configured window is 14 days, but you execute <code class="codeph">DELETE OBSOLETE RECOVERY WINDOW OF 7 DAYS</code>, then you no longer have the ability to recover to a time between 7 and 14 days ago.</p>
<div class="infoboxnotealso" id="GUID-52F6659C-BA57-400F-8E61-4FD5E18AFB4A__GUID-EA814556-9A91-4E69-91ED-457FA7107112">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmreprt.htm#GUID-550638CC-0D16-4B1A-83C7-5D10181DC7C1" title="The primary purpose of the LIST command is to list backup and copies. The REPORT command provides various reports of RMAN backups.">Reporting on RMAN Operations</a>to learn how to generate reports and delete backups</p>
</li>
<li>
<p><a class="olink RCMRF121" target="_blank" href="../RCMRF/rcmsynta015.htm#RCMRF121"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">DELETE</code> syntax</p>
</li>
<li>
<p><a class="olink RCMRF147" target="_blank" href="../RCMRF/rcmsynta2006.htm#RCMRF147"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">REPORT</code> syntax</p>
</li>
</ul>
</div>
</div>
</div>
<a id="BRADV89505"></a>
<div class="props_rev_3"><a id="GUID-C55C7DC1-57DB-4E6B-B56E-006C8472054A"></a>
<h3 id="BRADV-GUID-C55C7DC1-57DB-4E6B-B56E-006C8472054A" class="sect3">About Backup Retention Policy and Fast Recovery Area Deletion Rules</h3>
<div>
<p>The RMAN status <code class="codeph">OBSOLETE</code> is always determined in reference to a retention policy. For example, if a database backup is considered <code class="codeph">OBSOLETE</code> in the RMAN repository, then it is because it is either not needed for recovery to a point within the recovery window, or it is redundant.</p>
<p>If you configure a <a id="d34189e5392" class="indexterm-anchor"></a><a href="glossary.htm#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">fast recovery area</span></a>, then the database uses an internal algorithm to select files in the fast recovery area that are no longer needed to meet the configured retention policy. These backups have status <code class="codeph">OBSOLETE</code> and are eligible for deletion to satisfy the <a href="glossary.htm#GUID-925AC655-2953-4F1F-9E5A-F8EA6D9DA552"><span class="xrefglossterm">disk quota</span></a> rules. The retention policy is never violated when determining which files to delete from the fast recovery area to satisfy the disk quota rules.</p>
<p>There is one important difference between the fast recovery area rules for <code class="codeph">OBSOLETE</code> status and the disk quota rules for deletion eligibility. Assume that archived logs 1000 through 2000, which are on disk, are needed for the current recovery window and so are not obsolete. If you back up these logs to tape, then the retention policy considers the disk logs as required, that is, not obsolete. Nevertheless, the fast recovery area disk quota algorithm considers the logs on disk as eligible for deletion because they have been backed up to tape. The logs on disk do not have <code class="codeph">OBSOLETE</code> status in the repository, but they are eligible for deletion by the fast recovery area.</p>
<div class="infoboxnotealso" id="GUID-C55C7DC1-57DB-4E6B-B56E-006C8472054A__GUID-445086E2-9643-4162-AA09-F83404107818">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmmaint.htm#GUID-2D7B9EF4-C306-4377-82F2-DDE3549FB63C">Deletion Rules for the Fast Recovery Area</a>&#34;</span></p>
</div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment500">
<tr>
<td class="cellalignment512">
<table class="cellalignment505">
<tr>
<td class="cellalignment504"><a href="part_bak.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment504"><a href="rcmbckba.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment514">
<table class="cellalignment503">
<tr>
<td class="cellalignment504"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment504"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment504"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment504"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment504"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment504"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>