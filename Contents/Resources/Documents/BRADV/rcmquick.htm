<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-2675"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Getting%20Started%20with%20RMAN"></a><title>Getting Started with RMAN</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-06-07T23:52:16Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Backup and Recovery User&#39;s Guide"/>
<meta name="dcterms.identifier" content="E50658-09"/>
<meta name="dcterms.isVersionOf" content="BRADV"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="rcmintro.htm" title="Previous" type="text/html"/>
<link rel="Next" href="part_pln.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E50658-09.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-871FF5B2-C82B-462E-8182-FA28CF7B3E3B"></a> <span id="PAGE" style="display:none;">10/48</span> <!-- End Header -->
<a id="BRADV89346"></a>
<h1 id="BRADV-GUID-871FF5B2-C82B-462E-8182-FA28CF7B3E3B" class="sect1"><span class="enumeration_chapter">2</span> Getting Started with RMAN</h1>
<div>
<p>This chapter is intended for new users who want to start using RMAN right away without first reading the more detailed chapters in this book. This chapter provides the briefest possible digest of the most important RMAN concepts and tasks. It is not a substitute for the rest of the backup and recovery documentation set.</p>
<p>This chapter contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmquick.htm#GUID-8B307A7B-5040-4950-B349-E7DE59413CBE">Overview of the RMAN Environment</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D">Starting RMAN and Connecting to a Database</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E">Showing the Default RMAN Configuration</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022">Backing Up a Database</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8">Reporting on RMAN Operations</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415">Maintaining RMAN Backups</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-F24568FC-0546-4CB0-B843-87F0A95D1649">Diagnosing and Repairing Failures with Data Recovery Advisor</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1">Rewinding a Database with Flashback Database</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205">Restoring and Recovering Database Files</a></p>
</li>
</ul>
</div>
<a id="BRADV89347"></a>
<div class="props_rev_3"><a id="GUID-8B307A7B-5040-4950-B349-E7DE59413CBE"></a>
<h2 id="BRADV-GUID-8B307A7B-5040-4950-B349-E7DE59413CBE" class="sect2">Overview of the RMAN Environment</h2>
<div>
<p><a id="d11681e185" class="indexterm-anchor"></a>Recovery Manager (RMAN) is an Oracle Database client that performs backup and recovery tasks on your databases and automates administration of your backup strategies. It greatly simplifies backing up, restoring, and recovering database files.</p>
<p><a id="d11681e191" class="indexterm-anchor"></a>The RMAN environment consists of the utilities and databases that play a role in backing up your data. At a minimum, the environment for RMAN must include the following components:</p>
<ul style="list-style-type: disc;">
<li>
<p>A <a id="d11681e200" class="indexterm-anchor"></a><a href="glossary.htm#GUID-272C4366-303F-4629-9679-1379AAC3FBC1"><span class="xrefglossterm">target database</span></a></p>
<p>An Oracle Database to which RMAN is connected with the <code class="codeph">TARGET</code> keyword. A target database is a database on which RMAN is performing backup and recovery operations. RMAN always maintains metadata about its operations on a database in the control file of the database. The RMAN metadata is known as the <a id="d11681e212" class="indexterm-anchor"></a><a href="glossary.htm#GUID-F5643EDD-CE1B-4A9F-9E6E-ADDFD6452341"><span class="xrefglossterm">RMAN repository</span></a>.</p>
</li>
<li>
<p>The <a id="d11681e221" class="indexterm-anchor"></a><a id="d11681e223" class="indexterm-anchor"></a><a id="d11681e227" class="indexterm-anchor"></a><a href="glossary.htm#GUID-BAF6F6F1-D4F1-4F46-B1B6-9F662B7AB35D"><span class="xrefglossterm">RMAN client</span></a></p>
<p>An Oracle Database executable that interprets commands, directs server sessions to execute those commands, and records its activity in the target database control file. The RMAN executable is automatically installed with the database and is typically located in the same directory as the other database executables. For example, the RMAN client on Linux is located in <code class="codeph">$ORACLE_HOME/bin</code>.</p>
</li>
</ul>
<p>Some environments use the following optional components:</p>
<ul style="list-style-type: disc;">
<li>
<p>A <a id="d11681e243" class="indexterm-anchor"></a><a href="glossary.htm#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">fast recovery area</span></a></p>
<p>A disk location in which the database can store and manage files related to backup and recovery. You set the fast recovery area location and size with the<a id="d11681e252" class="indexterm-anchor"></a><a id="d11681e254" class="indexterm-anchor"></a> <a class="olink REFRN10234" target="_blank" href="../REFRN/GUID-A137E048-DFBA-49D8-97F2-3A657F4FD84C.htm#REFRN10234"><code class="codeph">DB_RECOVERY_FILE_DEST</code></a> and <a class="olink REFRN10235" target="_blank" href="../REFRN/GUID-FA2F9735-DD0E-4026-96F0-80AF0E5E6E64.htm#REFRN10235"><code class="codeph">DB_RECOVERY_FILE_DEST_SIZE</code></a> initialization parameters.</p>
</li>
<li>
<p>A <a id="d11681e270" class="indexterm-anchor"></a><a href="glossary.htm#GUID-26FF62D0-5938-481D-B7B9-929BC971813E"><span class="xrefglossterm">media management software</span></a></p>
<p>An application required for RMAN to interact with sequential media devices such as tape libraries. A media manager controls these devices during backup and recovery, managing the loading, labeling, and unloading of media. Media management devices are sometimes called <a href="glossary.htm#GUID-2E48CE71-9547-4196-B715-5CE59033262E"><span class="xrefglossterm">SBT</span></a> (system backup to tape) devices.</p>
</li>
<li>
<p>A <a id="d11681e286" class="indexterm-anchor"></a><a href="glossary.htm#GUID-CBFA8015-2DFF-42B1-A818-D6C5B92C608F"><span class="xrefglossterm">recovery catalog</span></a></p>
<p>A separate database schema used to record RMAN activity against one or more target databases. A recovery catalog preserves RMAN repository metadata if the control file is lost, making it much easier to restore and recover following the loss of the control file. The database may overwrite older records in the control file, but RMAN maintains records forever in the catalog unless the records are deleted by the user.</p>
</li>
</ul>
<p>This chapter explains how to use RMAN in the most basic configuration, which is <span class="italic">without</span> a recovery catalog or media manager.</p>
<div class="infoboxnotealso" id="GUID-8B307A7B-5040-4950-B349-E7DE59413CBE__GUID-33AC8CAF-28BD-4CC0-B11E-0874228CC4C1">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmarchi.htm#GUID-8ECC1FB0-7D25-4883-B9A6-2593FDB35940">Recovery Manager Architecture</a> for a more detailed overview of the RMAN environment</p>
</li>
<li>
<p><a class="olink RCMRF107" target="_blank" href="../RCMRF/rcmsynta006.htm#RCMRF107"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">BACKUP</code> command syntax and semantics</p>
</li>
</ul>
</div>
</div>
</div>
<a id="BRADV549"></a><a id="BRADV89348"></a>
<div class="props_rev_3"><a id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D"></a>
<h2 id="BRADV-GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D" class="sect2">Starting RMAN and Connecting to a Database</h2>
<div>
<div class="section">
<p><a id="d11681e389" class="indexterm-anchor"></a><a id="d11681e393" class="indexterm-anchor"></a><a id="d11681e397" class="indexterm-anchor"></a>The RMAN client is started by issuing the <code class="codeph">rman</code> command at the command prompt of your operating system. RMAN displays a prompt for your commands as shown in the following example:</p>
<pre dir="ltr">% rman
RMAN&gt;
</pre>
<p>RMAN connections to a database are specified and authenticated in the same way as SQL*Plus connections to a database. The only difference is that RMAN connections to a target or auxiliary database require either the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege. Any user can be granted this privilege.</p>
<div class="infobox-note" id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D__GUID-2023C49E-B271-4D88-B962-102239DBA5DC">
<p class="notep1">Caution:</p>
<p>Good security practice requires that you not enter passwords in plain text on the command line. Enter passwords in RMAN only when requested by an RMAN prompt. See <a class="olink DBSEG0032" target="_blank" href="../DBSEG/authentication.htm#DBSEG0032"><span class="italic">Oracle Database Security Guide</span></a> to learn about password protection.</p>
</div>
<p>You can connect to a database with command-line options or by using the <a class="olink RCMRF114" target="_blank" href="../RCMRF/rcmsynta010.htm#RCMRF114"><code class="codeph">CONNECT TARGET</code></a> command. The following example starts RMAN and then connects to a target database through Oracle Net as user <code class="codeph">sbu</code>, which is created with the <code class="codeph">SYSBACKUP</code> privilege. RMAN prompts for a password.</p>
<pre dir="ltr">% rman
RMAN&gt; CONNECT TARGET &#34;sbu@prod AS SYSBACKUP&#34;

target database Password: <span class="italic">password</span>
connected to target database: PROD (DBID=39525561)
</pre>
<p>When using the <a href="glossary.htm#GUID-665B741C-5624-40B5-81FF-93B1EC67FC56"><span class="xrefglossterm">multitenant architecture</span></a>, you can connect to the <a href="glossary.htm#GUID-EA3DB8F4-F68E-4FC5-A599-32A4886FFF8A"><span class="xrefglossterm">root</span></a> or to a specified <a href="glossary.htm#GUID-D4239448-A344-41EF-9566-0B7716FEAE72"><span class="xrefglossterm">pluggable database (PDB)</span></a> as described in <span class="q">&#34;<a href="rcmcnctg.htm#GUID-B397ADD8-D9CF-4DDA-B6AC-8C5FF04447AD">Making RMAN Connections to a CDB</a>&#34;</span>.</p>
<p>To quit the RMAN client, enter <code class="codeph">EXIT</code> at the RMAN prompt:</p>
<pre dir="ltr">RMAN&gt; EXIT
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax of Common RMAN Command-line Options</p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">RMAN 
[ TARGET <span class="italic">connectStringSpec</span> 
| { CATALOG <span class="italic">connectStringSpec</span> } 
| LOG [&#39;] <span class="italic">filename</span> [&#39;] [ APPEND ]
.
.
. 
]...

connectStringSpec::=
[&#39;] [<span class="italic">userid</span>] [/ [<span class="italic">password</span>]] [@<span class="italic">net_service_name</span>] [&#39;]
</pre>
<p><a id="d11681e493" class="indexterm-anchor"></a><a id="d11681e495" class="indexterm-anchor"></a><a id="d11681e499" class="indexterm-anchor"></a><a id="d11681e503" class="indexterm-anchor"></a><a id="d11681e505" class="indexterm-anchor"></a><a id="d11681e507" class="indexterm-anchor"></a><a id="d11681e511" class="indexterm-anchor"></a>The following example appends the output from an <a href="glossary.htm#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN session</span></a> to a text file at <code class="codeph">/tmp/msglog.log</code></p>
<pre dir="ltr">% rman TARGET / LOG /tmp/msglog.log APPEND
</pre>
<div class="infoboxnotealso" id="GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D__GUID-C695D47B-3E10-4D41-8E89-B50F6FD73377">
<p class="notep1">See Also:</p>
<p><a href="rcmcnctg.htm#GUID-E4E287F5-5F36-431A-B069-F360A5B4BC7C">Starting and Interacting with the RMAN&nbsp;Client</a>, to learn more about starting and using the RMAN client</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="BRADV550"></a><a id="BRADV89349"></a>
<div class="props_rev_3"><a id="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E"></a>
<h2 id="BRADV-GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E" class="sect2">Showing the Default RMAN Configuration</h2>
<div>
<div class="section">
<p>The RMAN backup and recovery environment is preconfigured for each target database. The configuration is persistent and applies to all subsequent operations on this target database, even if you exit and restart RMAN.</p>
<p>RMAN configuration settings can specify backup devices, set up connections to those devices (known as <a href="glossary.htm#GUID-D7D8E7D7-3CD3-4FCF-AF75-AF2BE11A366F"><span class="xrefglossterm">channel</span></a>s), set policies affecting backup strategy, and more.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">To show the current configuration for a database:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">&#34;<a href="rcmquick.htm#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D">Starting RMAN and Connecting to a Database</a>&#34;</span>.</span></li>
<li class="stepexpand"><span>Run the <code class="codeph">SHOW ALL</code> command.</span>
<div>
<p><a id="d11681e627" class="indexterm-anchor"></a><a id="d11681e631" class="indexterm-anchor"></a><a id="d11681e633" class="indexterm-anchor"></a>For example, enter the command at the RMAN prompt as follows:</p>
<pre dir="ltr">RMAN&gt; SHOW ALL;
</pre></div>
</li>
</ol>
<div class="section">
<p>The output lists the <code class="codeph">CONFIGURE</code> commands to re-create this configuration.</p>
<div class="infoboxnotealso" id="GUID-72A34428-3C57-4F3D-A5BA-334B16FA707E__GUID-0A6ED498-21EB-40CA-9276-40A1786B32C6">
<p class="notep1">See Also:</p>
<p><a href="rcmconfb.htm#GUID-5155F8E6-6E35-4261-9CC1-F12DAA9FAC5B">Configuring the RMAN Environment</a>, and <a href="rcmconfa.htm#GUID-2210B194-FDA8-4BB4-BC1E-DBE7DBEACB4A">Configuring the RMAN Environment: Advanced Topics</a>, to learn how to configure the RMAN environment</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="BRADV89350"></a>
<div class="props_rev_3"><a id="GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022"></a>
<h2 id="BRADV-GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022" class="sect2">Backing Up a Database</h2>
<div>
<p><a id="d11681e723" class="indexterm-anchor"></a><a id="d11681e727" class="indexterm-anchor"></a>Use the <a class="olink RCMRF107" target="_blank" href="../RCMRF/rcmsynta006.htm#RCMRF107"><code class="codeph">BACKUP</code></a> command to back up files. RMAN backs up data to the configured default device for the type of backup requested. By default, RMAN creates backups on disk. If a fast recovery area is enabled, and if you do not specify the <code class="codeph">FORMAT</code> parameter (see <a href="rcmquick.htm#GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__BABHIEIJ" title="Common BACKUP options">Table 2-1</a>), then RMAN creates backups in the recovery area and automatically gives them unique names.</p>
<p>By default, RMAN creates backup sets rather than image copies. A <a id="d11681e745" class="indexterm-anchor"></a><a href="glossary.htm#GUID-6AA43E7D-9946-4C41-A62F-01E5BACEB8A7"><span class="xrefglossterm">backup set</span></a> consists of one or more <a id="d11681e751" class="indexterm-anchor"></a>backup pieces, which are physical files written in a format that only RMAN can access. A <a id="d11681e756" class="indexterm-anchor"></a><a href="glossary.htm#GUID-EA6CE3E8-6986-4512-AF66-710D80376093"><span class="xrefglossterm">multiplexed backup set</span></a> contains the blocks from multiple input files. RMAN can write backup sets to disk or tape.</p>
<p><a id="d11681e765" class="indexterm-anchor"></a><a id="d11681e769" class="indexterm-anchor"></a>If you specify <code class="codeph">BACKUP</code> <code class="codeph">AS</code> <code class="codeph">COPY</code>, then RMAN copies each file as an <a id="d11681e783" class="indexterm-anchor"></a><a href="glossary.htm#GUID-397CB99E-3F07-4980-96B3-9D0D0ABBABEA"><span class="xrefglossterm">image copy</span></a>, which is a bit-for-bit copy of a database file created on disk. Image copies are identical to copies created with operating system commands like <code class="codeph">cp</code> on Linux or <code class="codeph">COPY</code> on Windows, but are recorded in the RMAN repository and so are usable by RMAN. You can use RMAN to make image copies while the database is open.</p>
<p>The following sections describe backing up databases in different modes:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmquick.htm#GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A">Backing Up a Database in ARCHIVELOG Mode</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255">Backing Up a Database in NOARCHIVELOG Mode</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-DBA25637-179F-4AA5-9658-74EABF458FCC">About Typical RMAN Backup Options</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-0B997E06-7881-444D-A910-CFC37C25DF72">Making Incremental Backups</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-24321560-D43E-4E25-8A32-99E4C5A3F940">Scripting RMAN Operations</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-096D8191-5DB3-4F49-83EF-14DC13DEA022__GUID-604D4F5F-5BD6-46E8-9793-355357A945AE">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmcncpt.htm#GUID-B3380142-ABCD-437F-9E06-B219D74E6738">RMAN Backup Concepts</a>, to learn concepts relating to RMAN backups</p>
</li>
<li>
<p><a href="rcmbckba.htm#GUID-93BAB347-063F-439E-BDF3-109AB8D1F8E7" title="To create incremental backups for use in an incrementally updated backup strategy, use the BACKUP ... FOR RECOVER OF COPY WITH TAG form of the BACKUP command. The command is best understood in a sample script that implements the strategy.">Backing Up the Database</a>, to learn how to back up database files with RMAN</p>
</li>
<li>
<p><a class="olink RCMRF107" target="_blank" href="../RCMRF/rcmsynta006.htm#RCMRF107"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">BACKUP</code> command syntax and semantics</p>
</li>
</ul>
</div>
</div>
<a id="BRADV119"></a><a id="BRADV90058"></a>
<div class="props_rev_3"><a id="GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A"></a>
<h3 id="BRADV-GUID-86E99CAA-199F-4E48-AA2E-EF112D62C22A" class="sect3">Backing Up a Database in ARCHIVELOG Mode</h3>
<div>
<div class="section">
<p>If a database runs in <a id="d11681e948" class="indexterm-anchor"></a><code class="codeph">ARCHIVELOG</code> mode, then you can back up the database while it is open. A backup is called an <a id="d11681e955" class="indexterm-anchor"></a><a href="glossary.htm#GUID-BE64D1D8-34E7-4295-BDFC-2E99B1BC454D"><span class="xrefglossterm">inconsistent backup</span></a> if it contains changes after its checkpoint. If you have the archived redo logs needed to recover the backup, open database backups are as effective for data protection as consistent backups.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To back up the database and archived redo logs while the database is open:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">&#34;<a href="rcmquick.htm#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D">Starting RMAN and Connecting to a Database</a>&#34;</span>.</span></li>
<li class="stepexpand"><span><a id="d11681e977" class="indexterm-anchor"></a><a id="d11681e981" class="indexterm-anchor"></a>Run the <code class="codeph">BACKUP DATABASE</code> command.</span>
<div>
<p>For example, enter the following command at the RMAN prompt to back up the database and all archived redo log files to the default backup device:</p>
<pre dir="ltr">RMAN&gt; BACKUP DATABASE PLUS ARCHIVELOG;
</pre></div>
</li>
</ol>
</div>
</div>
<a id="BRADV120"></a><a id="BRADV90059"></a>
<div class="props_rev_3"><a id="GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255"></a>
<h3 id="BRADV-GUID-1E20E535-43BF-4E7D-ABC6-A21D4B91E255" class="sect3">Backing Up a Database in NOARCHIVELOG Mode</h3>
<div>
<div class="section">
<p>If a database runs in <code class="codeph">NOARCHIVELOG</code> mode, then the only valid database backup is a <a href="glossary.htm#GUID-D11D736A-3513-48E5-8738-64DBE60725D1"><span class="xrefglossterm">consistent backup</span></a>. For the backup to be consistent, the database must be mounted after a consistent shutdown. Recovery is not specifically required after restoring the backup, but you would lose any transactions made after the backup. You can recover with archived logs from a consistent backup to minimize data loss.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To make a consistent database backup:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">&#34;<a href="rcmquick.htm#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D">Starting RMAN and Connecting to a Database</a>&#34;</span>.</span></li>
<li class="stepexpand"><span>Shut down the database consistently and then mount it.</span>
<div>
<p>For example, enter the following commands to <span class="italic">guarantee</span> that the database is in a consistent state for a backup:</p>
<pre dir="ltr">RMAN&gt; SHUTDOWN IMMEDIATE;
RMAN&gt; STARTUP FORCE DBA;
RMAN&gt; SHUTDOWN IMMEDIATE;
RMAN&gt; STARTUP MOUNT;
</pre></div>
</li>
<li class="stepexpand"><span><a id="d11681e1096" class="indexterm-anchor"></a><a id="d11681e1100" class="indexterm-anchor"></a>Run the <code class="codeph">BACKUP DATABASE</code> command.</span>
<div>
<p>For example, enter the following command at the RMAN prompt to back up the database to the default backup device:</p>
<pre dir="ltr">RMAN&gt; BACKUP DATABASE;
</pre>
<p>The following variation of the command creates image copy backups of all data files in the database:</p>
<pre dir="ltr">RMAN&gt; BACKUP AS COPY DATABASE;
</pre></div>
</li>
<li class="stepexpand"><span>Open the database and resume normal operations.</span>
<div>
<p>The following command opens the database:</p>
<pre dir="ltr">RMAN&gt; ALTER DATABASE OPEN;
</pre></div>
</li>
</ol>
</div>
</div>
<a id="BRADV121"></a><a id="BRADV89352"></a>
<div class="props_rev_3"><a id="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC"></a>
<h3 id="BRADV-GUID-DBA25637-179F-4AA5-9658-74EABF458FCC" class="sect3">About Typical RMAN Backup Options</h3>
<div>
<p><a id="d11681e1194" class="indexterm-anchor"></a><a id="d11681e1198" class="indexterm-anchor"></a><a id="d11681e1202" class="indexterm-anchor"></a>The <code class="codeph">BACKUP</code> command includes a host of options, parameters, and clauses that control backup output. <a href="rcmquick.htm#GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__BABHIEIJ" title="Common BACKUP options">Table 2-1</a> lists some typical backup options.</p>
<div class="tblformal" id="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__BABHIEIJ">
<p class="titleintable">Table 2-1 Common Backup Options</p>
<table class="cellalignment515" title="Common Backup Options" summary="Common BACKUP options">
<thead>
<tr class="cellalignment501">
<th class="cellalignment531" id="d11681e1226">Option</th>
<th class="cellalignment533" id="d11681e1229">Description</th>
<th class="cellalignment532" id="d11681e1232">Example</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment501">
<td class="cellalignment534" id="d11681e1237" headers="d11681e1226">
<p><code class="codeph">FORMAT</code></p>
</td>
<td class="cellalignment536" headers="d11681e1237 d11681e1229">
<p>Specifies a location and name for backup pieces and copies. You must use substitution variables to generate unique file names.</p>
<p>The most common substitution variable is <a id="d11681e1246" class="indexterm-anchor"></a><code class="codeph">%U</code>, which generates a unique name. Others include <a id="d11681e1253" class="indexterm-anchor"></a><code class="codeph">%d</code> for the DB_NAME, <a id="d11681e1260" class="indexterm-anchor"></a><code class="codeph">%t</code> for the backup set time stamp, <a id="d11681e1267" class="indexterm-anchor"></a><code class="codeph">%s</code> for the backup set number, and <a id="d11681e1275" class="indexterm-anchor"></a><code class="codeph">%p</code> for the backup piece number.</p>
</td>
<td class="cellalignment535" headers="d11681e1237 d11681e1232">
<pre dir="ltr">BACKUP 
  FORMAT &#39;AL_%d/%t/%s/%p&#39; 
  ARCHIVELOG LIKE &#39;%arc_dest%&#39;;
</pre></td>
</tr>
<tr class="cellalignment501">
<td class="cellalignment534" id="d11681e1286" headers="d11681e1226">
<p><code class="codeph">TAG</code></p>
</td>
<td class="cellalignment536" headers="d11681e1286 d11681e1229">
<p>Specifies a user-defined string as a label for the backup. If you do not specify a <a href="glossary.htm#GUID-7679D8DB-B41A-4DDC-A1DD-20CEDC0BCA8E"><span class="xrefglossterm">tag</span></a> , then RMAN assigns a default tag with the date and time. Tags are always stored in the RMAN repository in uppercase.</p>
</td>
<td class="cellalignment535" headers="d11681e1286 d11681e1232">
<pre dir="ltr">BACKUP
  TAG &#39;weekly_full_db_bkup&#39; 
  DATABASE MAXSETSIZE 10M;
</pre></td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso" id="GUID-DBA25637-179F-4AA5-9658-74EABF458FCC__GUID-B13D0E9D-1874-481D-84A1-D0B14CB46542">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="rcmbckba.htm#GUID-FCD2EDB0-817F-4E92-A318-6E4BEC35B467">Specifying Backup Output Options</a>&#34;</span></p>
</li>
<li>
<p><a class="olink RCMRF195" target="_blank" href="../RCMRF/rcmsubcl012.htm#RCMRF195"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for information about the format options</p>
</li>
</ul>
</div>
</div>
</div>
<a id="BRADV122"></a><a id="BRADV89353"></a>
<div class="props_rev_3"><a id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72"></a>
<h3 id="BRADV-GUID-0B997E06-7881-444D-A910-CFC37C25DF72" class="sect3">Making Incremental Backups</h3>
<div>
<div class="section">
<p>If you specify<a id="d11681e1387" class="indexterm-anchor"></a><a id="d11681e1391" class="indexterm-anchor"></a> <code class="codeph">BACKUP</code> <code class="codeph">INCREMENTAL</code>, then RMAN creates an <a href="glossary.htm#GUID-31E3AC05-E73E-4E44-A9AA-915988B9A6A3"><span class="xrefglossterm">incremental backup</span></a> of a database. Incremental backups capture block-level changes to a database made after a previous <a id="d11681e1406" class="indexterm-anchor"></a>incremental backup. Incremental backups are generally smaller and faster to make than full database backups. Recovery with incremental backups is faster than using redo logs alone.</p>
<p>The starting point for an incremental backup strategy is a <a id="d11681e1411" class="indexterm-anchor"></a><a href="glossary.htm#GUID-DF84C185-E97D-4D3C-BF4E-41A9090C5F4C"><span class="xrefglossterm">level 0 incremental backup</span></a>, which backs up all blocks in the database. An incremental backup at level 0 is identical in content to a <a id="d11681e1417" class="indexterm-anchor"></a><a href="glossary.htm#GUID-D47BE9B3-BAE1-4415-B4B4-4D577B6CB493"><span class="xrefglossterm">full backup</span></a>, however, unlike a full backup the level 0 backup is considered a part of the incremental backup strategy.</p>
<p>A level 1 incremental backup contains only blocks changed after a previous incremental backup. If no level 0 backup exists in either the current or parent database <a href="glossary.htm#GUID-4CCAB7DD-FEA7-4237-AF2C-304BA3BD52B1"><span class="xrefglossterm">incarnation</span></a> when you run a level 1 backup, then RMAN makes a level 0 backup automatically.</p>
<div class="infobox-note" id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72__GUID-180C27FC-9FFD-4B96-8BDD-97BF36194F95">
<p class="notep1">Note:</p>
<p>You cannot make incremental backups when a <code class="codeph">NOARCHIVELOG</code> database is open, although you can make incremental backups when the database is mounted after a consistent shutdown.</p>
</div>
<p>A level 1 backup can be a <a id="d11681e1439" class="indexterm-anchor"></a><a href="glossary.htm#GUID-8BABFB51-EA47-4204-9A44-E1695A9F9FBF"><span class="xrefglossterm">cumulative incremental backup</span></a>, which includes all blocks changed since the most recent level 0 backup, or a <a id="d11681e1445" class="indexterm-anchor"></a><a href="glossary.htm#GUID-353B6668-6BA5-4815-8F08-1CD5B446FBD6"><span class="xrefglossterm">differential incremental backup</span></a>, which includes only blocks changed since the most recent incremental backup. Incremental backups are differential by default.</p>
<p>During a restore operation, RMAN will first restore a level 0 backup, then automatically apply incremental backups and redo logs as needed. This will re-apply the changes that were made to the database since the start of the backup.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To make incremental backups of the database:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">&#34;<a href="rcmquick.htm#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D">Starting RMAN and Connecting to a Database</a>&#34;</span>.</span></li>
<li class="stepexpand"><span><a id="d11681e1467" class="indexterm-anchor"></a><a id="d11681e1471" class="indexterm-anchor"></a>Run the <code class="codeph">BACKUP INCREMENTAL</code> command.</span>
<div>
<p>The following example creates a level 0 incremental backup to serve as a base for an incremental backup strategy:</p>
<pre dir="ltr">BACKUP INCREMENTAL LEVEL 0 DATABASE;
</pre>
<p>The following example creates a level 1 cumulative incremental backup:</p>
<pre dir="ltr">BACKUP INCREMENTAL LEVEL 1 CUMULATIVE DATABASE;
</pre>
<p>The following example creates a level 1 differential incremental backup:</p>
<pre dir="ltr">BACKUP INCREMENTAL LEVEL 1 DATABASE;
</pre></div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-0B997E06-7881-444D-A910-CFC37C25DF72__GUID-61666EC7-63CC-4A22-9D0A-362C8E51E384">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmcncpt.htm#GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023">About RMAN Incremental Backups</a>&#34;</span> for a more detailed conceptual overview of incremental backups and <span class="q">&#34;<a href="rcmbckba.htm#GUID-2AF8EE74-CEB2-468D-A3B2-DD6AD8E41304" title="To create incremental backups for use in an incrementally updated backup strategy, use the BACKUP ... FOR RECOVER OF COPY WITH TAG form of the BACKUP command. The command is best understood in a sample script that implements the strategy.">Making and Updating RMAN Incremental Backups</a>&#34;</span></p>
</div>
</div>
<!-- class="section" --></div>
<a id="BRADV123"></a><a id="BRADV124"></a><a id="BRADV89354"></a>
<div class="props_rev_3"><a id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB"></a>
<h4 id="BRADV-GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB" class="sect4">Making Incrementally Updated Backups</h4>
<div>
<p>The RMAN <a id="d11681e1604" class="indexterm-anchor"></a><a href="glossary.htm#GUID-A641BB91-65FB-4300-8A7A-066F019B8A20"><span class="xrefglossterm">incrementally updated backup</span></a> feature is an efficient incremental forever backup strategy. The strategy has the following main features:</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>The strategy requires a level 0 data file copy as a base. This copy has either a system-defined or user-defined tag.</p>
</li>
<li>
<p>Periodically, level 1 differential backups are created with the same tag as the level 0 data file copy. The <code class="codeph">BACKUP FOR RECOVER OF COPY</code> command specifies that an incremental backup contains <span class="italic">only</span> blocks changed since the most recent incremental backup with the same tag.</p>
</li>
<li>
<p>Periodically, the incremental backups are applied to the level 0 data file copy. Because the data file copy has been updated with more recent changes, it now requires less media recovery.</p>
</li>
</ul>
<p><a href="rcmquick.htm#GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__CIHDBFFF" title="FOR RECOVER OF COPY options">Table 2-2</a> explains which options to use with <code class="codeph">FOR RECOVER OF COPY</code> to implement an incrementally updated backup strategy.</p>
<div class="tblformalwide" id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__CIHDBFFF">
<p class="titleintable">Table 2-2 FOR RECOVER OF COPY Options</p>
<table class="cellalignment553" title="FOR RECOVER OF COPY Options" summary="FOR RECOVER OF COPY options">
<thead>
<tr class="cellalignment501">
<th class="cellalignment531" id="d11681e1647">BACKUP Option</th>
<th class="cellalignment533" id="d11681e1650">Description</th>
<th class="cellalignment532" id="d11681e1653">Example</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment501">
<td class="cellalignment534" id="d11681e1658" headers="d11681e1647">
<p><code class="codeph">FOR RECOVER OF COPY WITH TAG</code> <code class="codeph">&#39;</code><span class="italic"><code class="codeph">tag_name</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment536" headers="d11681e1658 d11681e1650">
<p>Use <code class="codeph">TAG</code> to identify the tag of the data file copy serving as basis for the backup strategy. RMAN automatically assigns the same tag to every level 1 backup of this copy.</p>
<p>If no level 0 data file copy with the specified tag exists in either the current or parent database <a href="glossary.htm#GUID-4CCAB7DD-FEA7-4237-AF2C-304BA3BD52B1"><span class="xrefglossterm">incarnation</span></a>, then RMAN creates a level 0 data file copy with the specified tag.</p>
</td>
<td class="cellalignment535" headers="d11681e1658 d11681e1653">
<pre dir="ltr">BACKUP 
  INCREMENTAL LEVEL 1
  FOR RECOVER OF COPY 
  WITH TAG &#39;incr_update&#39;
  DATABASE;
</pre></td>
</tr>
<tr class="cellalignment501">
<td class="cellalignment534" id="d11681e1685" headers="d11681e1647">
<p><code class="codeph">FOR RECOVER OF COPY DATAFILECOPY FORMAT &#39;</code><span class="italic"><code class="codeph">format</code></span><code class="codeph">&#39;</code></p>
</td>
<td class="cellalignment536" headers="d11681e1685 d11681e1650">
<p>Specifies where RMAN creates the data file copy if a copy does not exist. If you add a new data file to the database, then you do not need to change your script, because RMAN automatically creates the level 0 copy required by the incremental backup routine.</p>
</td>
<td class="cellalignment535" headers="d11681e1685 d11681e1653">
<pre dir="ltr">BACKUP 
  INCREMENTAL LEVEL 1
  FOR RECOVER OF COPY
  DATAFILECOPY FORMAT
  &#39;/disk2/df1.cpy&#39;
  DATABASE;
</pre></td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To implement an incrementally updated backup strategy:</p>
</div>
<!-- class="section" -->
<ol>
<li>
<p>Start RMAN and connect to a target database as described in <span class="q">&#34;<a href="rcmquick.htm#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D">Starting RMAN and Connecting to a Database</a>&#34;</span>.</p>
</li>
<li>
<p><a id="d11681e1714" class="indexterm-anchor"></a><a id="d11681e1718" class="indexterm-anchor"></a>Run the <code class="codeph">RECOVER COPY</code> and <code class="codeph">BACKUP INCREMENTAL</code> commands.</p>
<p>The following script, run on a regular basis, is all that is required to implement a strategy based on incrementally updated backups.</p>
<pre dir="ltr">RECOVER COPY OF DATABASE 
  WITH TAG &#39;incr_update&#39;;
BACKUP 
  INCREMENTAL LEVEL 1
  FOR RECOVER OF COPY WITH TAG &#39;incr_update&#39;
  DATABASE;
</pre></li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-F3E3B64C-E9B5-4493-83B1-5F7564A526EB__GUID-A3267B85-CB7B-4C7C-9435-B2DCC05139D4">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmbckba.htm#GUID-AF130A6B-06D1-4D52-87AC-BB8F4B30C9F9" title="To create incremental backups for use in an incrementally updated backup strategy, use the BACKUP ... FOR RECOVER OF COPY WITH TAG form of the BACKUP command. The command is best understood in a sample script that implements the strategy.">Incrementally Updating Backups</a>&#34;</span></p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="BRADV125"></a><a id="BRADV89355"></a>
<div class="props_rev_3"><a id="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9"></a>
<h3 id="BRADV-GUID-32746671-9162-4FCD-9878-4DC241B6ABF9" class="sect3">Validating Database Files and Backups</h3>
<div>
<div class="section">
<p>You can use the <code class="codeph">VALIDATE</code> command to confirm that all <a id="d11681e1843" class="indexterm-anchor"></a>database files exist, are in their correct location, and are free of physical corruption. The <code class="codeph">CHECK LOGICAL</code> option also checks for logical block corruption.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To validate database files:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">&#34;<a href="rcmquick.htm#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D">Starting RMAN and Connecting to a Database</a>&#34;</span>.</span></li>
<li class="stepexpand"><span><a id="d11681e1865" class="indexterm-anchor"></a><a id="d11681e1869" class="indexterm-anchor"></a>Run the <code class="codeph">BACKUP VALIDATE ...</code> command for the desired files.</span>
<div>
<p>For example, enter the following commands to validate all database files and archived redo log files for physical and logical corruption:</p>
<pre dir="ltr">BACKUP VALIDATE CHECK LOGICAL
  DATABASE ARCHIVELOG ALL;
</pre>
<p>You can also use the <a class="olink RCMRF162" target="_blank" href="../RCMRF/rcmsynta2025.htm#RCMRF162"><code class="codeph">VALIDATE</code></a> command to check individual data blocks, as shown in the following example:</p>
<pre dir="ltr">VALIDATE DATAFILE 4 BLOCK 10 TO 13;
</pre>
<p>You can also validate <a id="d11681e1893" class="indexterm-anchor"></a>backup sets, as shown in the following example:</p>
<pre dir="ltr">VALIDATE BACKUPSET 3;
</pre>
<p>You specify backup sets by primary key, which is shown in the output of the <code class="codeph">LIST BACKUP</code> command.</p>
</div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-32746671-9162-4FCD-9878-4DC241B6ABF9__GUID-716E8554-ECF2-4945-A55E-0FF92951534A">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmvalid.htm#GUID-CC967929-9610-410D-B881-66E71353D84C">Validating Database Files and Backups</a></p>
</li>
<li>
<p><a class="olink RCMRF107" target="_blank" href="../RCMRF/rcmsynta006.htm#RCMRF107"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">VALIDATE</code> command syntax and semantics</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="BRADV126"></a><a id="BRADV89356"></a>
<div class="props_rev_3"><a id="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940"></a>
<h3 id="BRADV-GUID-24321560-D43E-4E25-8A32-99E4C5A3F940" class="sect3">Scripting RMAN Operations</h3>
<div>
<div class="section">
<p><a id="d11681e1995" class="indexterm-anchor"></a>RMAN supports the use of command files to manage recurring tasks such as weekly backups. A <a id="d11681e1998" class="indexterm-anchor"></a><a href="glossary.htm#GUID-71012407-A78E-40C4-9B0E-971C6E38EED0"><span class="xrefglossterm">command file</span></a> is a client-side text file containing RMAN commands, exactly as you enter them at the RMAN prompt. You can use any file extension.</p>
<p>Stored scripts are an alternative to command files that allow scripts to be available to any RMAN client that can connect to the target database and its recovery catalog.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To create and run a command file:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Use a text editor to create a command file.</span>
<div>
<p>For example, create a command file with the following contents:</p>
<pre dir="ltr"># my_command_file.txt
CONNECT TARGET /
BACKUP DATABASE PLUS ARCHIVELOG;
LIST BACKUP;
EXIT;
</pre></div>
</li>
<li class="stepexpand"><span>Start RMAN and then execute the contents of a command file by running the <a class="olink RCMRF100" target="_blank" href="../RCMRF/rcmsynta001.htm#RCMRF100"><code class="codeph">@</code></a> command at the RMAN prompt:</span>
<div>
<pre dir="ltr">@/<span class="italic">my_dir</span>/<span class="italic">my_command_file.txt</span>  # runs specified command file
</pre>
<p>You can also start RMAN with a command file to run, as shown here:</p>
<pre dir="ltr">% rman @/<span class="italic">my_dir</span>/<span class="italic">my_command_file.txt</span>
</pre></div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-24321560-D43E-4E25-8A32-99E4C5A3F940__GUID-9B3C8D32-AB7F-4BD2-BC26-C5225AAD76B5">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmcnctg.htm#GUID-5FF51A4E-BC27-41A9-AA83-FF6E761C2535">Using Command Files with RMAN</a>&#34;</span> to learn more about command files, and <span class="q">&#34;<a href="rcmcnctg.htm#GUID-A9321B2D-6CFF-4616-B629-67960A8F87DD">Using Substitution Variables in Command Files</a>&#34;</span> to learn how to use substitution variables in command files and pass parameters at run time</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="BRADV89357"></a>
<div class="props_rev_3"><a id="GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8"></a>
<h2 id="BRADV-GUID-AEE6F3BF-4EFD-467A-8E29-9963BC7DEDD8" class="sect2">Reporting on RMAN Operations</h2>
<div>
<p><a id="d11681e2131" class="indexterm-anchor"></a>The RMAN <a class="olink RCMRF132" target="_blank" href="../RCMRF/rcmsynta027.htm#RCMRF132"><code class="codeph">LIST</code></a> and <a class="olink RCMRF147" target="_blank" href="../RCMRF/rcmsynta2006.htm#RCMRF147"><code class="codeph">REPORT</code></a> commands generate reports on backup activities based on the RMAN repository. Use the <a class="olink RCMRF154" target="_blank" href="../RCMRF/rcmsynta2015.htm#RCMRF154"><code class="codeph">SHOW ALL</code></a> command to display the current RMAN configuration. In addition, RMAN provides a comprehensive set of views for generating custom reports.</p>
<p>This section contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmquick.htm#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352">Listing Backups</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-2DFA0B10-38BD-435F-981D-A665D81243F3">Reporting on Database Files and Backups</a></p>
</li>
</ul>
</div>
<a id="BRADV127"></a><a id="BRADV130"></a><a id="BRADV131"></a><a id="BRADV89358"></a>
<div class="props_rev_3"><a id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352"></a>
<h3 id="BRADV-GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352" class="sect3">Listing Backups</h3>
<div>
<div class="section">
<p><a id="d11681e2235" class="indexterm-anchor"></a><a id="d11681e2239" class="indexterm-anchor"></a><a id="d11681e2243" class="indexterm-anchor"></a>Run the <code class="codeph">LIST</code> <code class="codeph">BACKUP</code> and <code class="codeph">LIST</code> <code class="codeph">COPY</code> commands to display information about backups and data file copies listed in the repository. For backups, you can control the format of <code class="codeph">LIST</code> output with the options in <a href="rcmquick.htm#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHEECHB" title="Describes the BY BACKUP, BY FILE, and SUMMARY options">Table 2-3</a> and <a href="rcmquick.htm#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHCGGEI" title="Describes the EXPIRED and RECOVERABLE options">Table 2-4</a></p>
<div class="tblformal" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHEECHB">
<p class="titleintable">Table 2-3 LIST Options for Backups</p>
<table class="cellalignment515" title="LIST Options for Backups" summary="Describes the BY BACKUP, BY FILE, and SUMMARY options">
<thead>
<tr class="cellalignment501">
<th class="cellalignment554" id="d11681e2282">Option</th>
<th class="cellalignment558" id="d11681e2285">Example</th>
<th class="cellalignment517" id="d11681e2288">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment501">
<td class="cellalignment556" id="d11681e2293" headers="d11681e2282">
<p><code class="codeph">BY</code> <code class="codeph">BACKUP</code></p>
</td>
<td class="cellalignment559" headers="d11681e2293 d11681e2285">
<p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code> <code class="codeph">OF</code> <code class="codeph">DATABASE</code> <code class="codeph">BY</code> <code class="codeph">BACKUP</code></p>
</td>
<td class="cellalignment519" headers="d11681e2293 d11681e2288">
<p>Organizes the output by backup set. This is the default mode of presentation.</p>
</td>
</tr>
<tr class="cellalignment501">
<td class="cellalignment556" id="d11681e2323" headers="d11681e2282">
<p><code class="codeph">BY</code> <code class="codeph">FILE</code></p>
</td>
<td class="cellalignment559" headers="d11681e2323 d11681e2285">
<p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code> <code class="codeph">BY</code> <code class="codeph">FILE</code></p>
</td>
<td class="cellalignment519" headers="d11681e2323 d11681e2288">
<p>Lists the backups according to which file was backed up.</p>
</td>
</tr>
<tr class="cellalignment501">
<td class="cellalignment556" id="d11681e2347" headers="d11681e2282">
<p><code class="codeph">SUMMARY</code></p>
</td>
<td class="cellalignment559" headers="d11681e2347 d11681e2285">
<p><code class="codeph">LIST</code> <code class="codeph">BACKUP</code> <code class="codeph">SUMMARY</code></p>
</td>
<td class="cellalignment519" headers="d11681e2347 d11681e2288">
<p>Displays summary output.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>For both backups and copies you have additional options shown in <a href="rcmquick.htm#GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHCGGEI" title="Describes the EXPIRED and RECOVERABLE options">Table 2-4</a>.</p>
<div class="tblformal" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__CIHCGGEI">
<p class="titleintable">Table 2-4 Additional LIST Options</p>
<table class="cellalignment515" title="Additional LIST Options" summary="Describes the EXPIRED and RECOVERABLE options">
<thead>
<tr class="cellalignment501">
<th class="cellalignment560" id="d11681e2382">Option</th>
<th class="cellalignment561" id="d11681e2385">Example</th>
<th class="cellalignment550" id="d11681e2388">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment501">
<td class="cellalignment562" id="d11681e2393" headers="d11681e2382">
<p><code class="codeph">EXPIRED</code></p>
</td>
<td class="cellalignment563" headers="d11681e2393 d11681e2385">
<p><code class="codeph">LIST</code> <code class="codeph">EXPIRED</code> <code class="codeph">COPY</code></p>
</td>
<td class="cellalignment552" headers="d11681e2393 d11681e2388">
<p>Lists backups that are recorded in the RMAN repository but that were not present at the expected location on disk or tape during the last <code class="codeph">CROSSCHECK</code> command. An <a href="glossary.htm#GUID-A8547B27-5415-4AAA-B2B4-C0998EB62E47"><span class="xrefglossterm">expired backup</span></a> may have been deleted by an operating system utility.</p>
</td>
</tr>
<tr class="cellalignment501">
<td class="cellalignment562" id="d11681e2418" headers="d11681e2382">
<p><code class="codeph">RECOVERABLE</code></p>
</td>
<td class="cellalignment563" headers="d11681e2418 d11681e2385">
<p><code class="codeph">LIST</code> <code class="codeph">BACKUP RECOVERABLE</code></p>
</td>
<td class="cellalignment552" headers="d11681e2418 d11681e2388">
<p>Lists data file backups or copies that have status <code class="codeph">AVAILABLE</code> in the RMAN repository and that can be restored and recovered.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To list backups and copies:</p>
</div>
<!-- class="section" -->
<ol>
<li>
<p>Start RMAN and connect to a target database as described in <span class="q">&#34;<a href="rcmquick.htm#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D">Starting RMAN and Connecting to a Database</a>&#34;</span>.</p>
</li>
<li>
<p>Run the <code class="codeph">LIST</code> command at the RMAN prompt.</p>
<p>You can display specific objects, as in the following examples:</p>
<pre dir="ltr">LIST BACKUP OF DATABASE;
LIST COPY OF DATAFILE 1, 2;
LIST BACKUP OF ARCHIVELOG FROM SEQUENCE 10;
LIST BACKUPSET OF DATAFILE 1;
</pre></li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-9E70EEA0-A79F-4139-A341-108BD7EA8352__GUID-7F54E77B-161E-4CAF-9841-517B665550BF">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="rcmreprt.htm#GUID-1B911001-C106-4267-9265-F649946DBF52" title="The primary purpose of the LIST command is to list backup and copies.">Listing Backups and Recovery-Related Objects</a>&#34;</span> to learn more about the <code class="codeph">LIST</code> command</p>
</li>
<li>
<p><a class="olink RCMRF132" target="_blank" href="../RCMRF/rcmsynta027.htm#RCMRF132"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">LIST</code> command syntax</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="BRADV551"></a><a id="BRADV133"></a><a id="BRADV89359"></a>
<div class="props_rev_3"><a id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3"></a>
<h3 id="BRADV-GUID-2DFA0B10-38BD-435F-981D-A665D81243F3" class="sect3">Reporting on Database Files and Backups</h3>
<div>
<div class="section">
<p><a id="d11681e2558" class="indexterm-anchor"></a><a id="d11681e2562" class="indexterm-anchor"></a>The <code class="codeph">REPORT</code> command performs more complex analysis than the <code class="codeph">LIST</code>. Some main options are shown in <a href="rcmquick.htm#GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__CIHBJGBG" title="Describes the NEED BACKUP, OBSOLETE, UNRECOVERABLE, and SCHEMA options">Table 2-5</a>.</p>
<div class="tblformal" id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__CIHBJGBG">
<p class="titleintable">Table 2-5 REPORT Options</p>
<table class="cellalignment515" title="REPORT Options" summary="Describes the NEED BACKUP, OBSOLETE, UNRECOVERABLE, and SCHEMA options">
<thead>
<tr class="cellalignment501">
<th class="cellalignment531" id="d11681e2587">Option</th>
<th class="cellalignment532" id="d11681e2590">Example</th>
<th class="cellalignment533" id="d11681e2593">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment501">
<td class="cellalignment534" id="d11681e2598" headers="d11681e2587">
<p><code class="codeph">NEED</code> <code class="codeph">BACKUP</code></p>
</td>
<td class="cellalignment535" headers="d11681e2598 d11681e2590">
<p><code class="codeph">REPORT</code> <code class="codeph">NEED</code> <code class="codeph">BACKUP DATABASE</code></p>
</td>
<td class="cellalignment536" headers="d11681e2598 d11681e2593">
<p>Shows which files need backing up under current retention policy. Use optional <code class="codeph">REDUNDANCY</code> and <code class="codeph">RECOVERY</code> <code class="codeph">WINDOW</code> parameters to specify different criteria.</p>
</td>
</tr>
<tr class="cellalignment501">
<td class="cellalignment534" id="d11681e2628" headers="d11681e2587">
<p><code class="codeph">OBSOLETE</code></p>
</td>
<td class="cellalignment535" headers="d11681e2628 d11681e2590">
<p><code class="codeph">REPORT</code> <code class="codeph">OBSOLETE</code></p>
</td>
<td class="cellalignment536" headers="d11681e2628 d11681e2593">
<p>Lists backups that are obsolete under the configured <a href="glossary.htm#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">backup retention policy</span></a>. Use the optional <code class="codeph">REDUNDANCY</code> and <code class="codeph">RECOVERY</code> <code class="codeph">WINDOW</code> parameters to override the default.</p>
</td>
</tr>
<tr class="cellalignment501">
<td class="cellalignment534" id="d11681e2656" headers="d11681e2587">
<p><code class="codeph">SCHEMA</code></p>
</td>
<td class="cellalignment535" headers="d11681e2656 d11681e2590">
<p><code class="codeph">REPORT</code> <code class="codeph">SCHEMA</code></p>
</td>
<td class="cellalignment536" headers="d11681e2656 d11681e2593">
<p>Reports the tablespaces and data files in the database at the current time (default) or a different time.</p>
</td>
</tr>
<tr class="cellalignment501">
<td class="cellalignment534" id="d11681e2671" headers="d11681e2587">
<p><code class="codeph">UNRECOVERABLE</code></p>
</td>
<td class="cellalignment535" headers="d11681e2671 d11681e2590">
<p><code class="codeph">REPORT</code> <code class="codeph">UNRECOVERABLE</code></p>
</td>
<td class="cellalignment536" headers="d11681e2671 d11681e2593">
<p>Lists all data files for which an unrecoverable operation has been performed against an object in the data file since the last backup of the data file.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To generate reports of database files and backups:</p>
</div>
<!-- class="section" -->
<ol>
<li>
<p>Start RMAN and connect to a target database as described in <span class="q">&#34;<a href="rcmquick.htm#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D">Starting RMAN and Connecting to a Database</a>&#34;</span>.</p>
</li>
<li>
<p>Run the <code class="codeph">REPORT</code> command at the RMAN prompt.</p>
<p>The following example reports backups that are obsolete according to the currently configured backup retention policy:</p>
<pre dir="ltr">REPORT OBSOLETE;
</pre>
<p>The following example reports the data files and temp files in the database:</p>
<pre dir="ltr">REPORT SCHEMA;
</pre></li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-2DFA0B10-38BD-435F-981D-A665D81243F3__GUID-2E55EC8F-D02B-4269-B417-7EA6ACB79D8D">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmreprt.htm#GUID-A1FDD9FE-74B8-4146-AFC4-6BD5402C8B5D" title="The REPORT command provides various reports of RMAN backups.">Reporting on Backups and Database Schema</a>&#34;</span> to learn how to use the <code class="codeph">REPORT</code> command for RMAN reporting</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="BRADV89360"></a>
<div class="props_rev_3"><a id="GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415"></a>
<h2 id="BRADV-GUID-F4FBE633-ADBC-475F-813F-1F64F66D7415" class="sect2">Maintaining RMAN Backups</h2>
<div>
<p><a id="d11681e2798" class="indexterm-anchor"></a>RMAN repository metadata is always stored in the control file of the target database. <a id="d11681e2801" class="indexterm-anchor"></a><a id="d11681e2803" class="indexterm-anchor"></a>The <a href="glossary.htm#GUID-F89B6EF7-3067-45B0-A45C-DE5247E0C326"><span class="xrefglossterm">RMAN maintenance commands</span></a> use this metadata when managing backups.</p>
<p>This section contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmquick.htm#GUID-44223141-56C9-4F89-BD6D-474373EC1094">Cross-checking Backups</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10">Deleting Obsolete Backups</a></p>
</li>
</ul>
</div>
<a id="BRADV552"></a><a id="BRADV89362"></a>
<div class="props_rev_3"><a id="GUID-44223141-56C9-4F89-BD6D-474373EC1094"></a>
<h3 id="BRADV-GUID-44223141-56C9-4F89-BD6D-474373EC1094" class="sect3">Cross-checking Backups</h3>
<div>
<div class="section">
<p>The <a class="olink RCMRF119" target="_blank" href="../RCMRF/rcmsynta014.htm#RCMRF119"><code class="codeph">CROSSCHECK</code></a> command synchronizes the logical records of RMAN backups and copies with the files on storage media. If a backup is on disk, then <code class="codeph">CROSSCHECK</code> determines whether the header of the file is valid. If a backup is on tape, then RMAN queries the RMAN repository for the names and locations of the backup pieces. It is a good idea to crosscheck backups and copies before deleting them.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To crosscheck all backups and copies on disk:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">&#34;<a href="rcmquick.htm#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D">Starting RMAN and Connecting to a Database</a>&#34;</span>.</span></li>
<li class="stepexpand"><span>Run the <code class="codeph">CROSSCHECK</code> command, as shown in the following example:</span>
<div>
<pre dir="ltr">CROSSCHECK BACKUP;
CROSSCHECK COPY;
</pre></div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-44223141-56C9-4F89-BD6D-474373EC1094__GUID-45633A88-BF22-4A6E-9232-F8A1079D6253">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmmaint.htm#GUID-EFF8F8D1-D67C-4202-9C8E-DE74ADFF1FFB">Crosschecking the RMAN Repository</a>&#34;</span> to learn how to crosscheck RMAN backups</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="BRADV135"></a><a id="BRADV89363"></a>
<div class="props_rev_3"><a id="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10"></a>
<h3 id="BRADV-GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10" class="sect3">Deleting Obsolete Backups</h3>
<div>
<div class="section">
<p><a id="d11681e3005" class="indexterm-anchor"></a>The <a class="olink RCMRF121" target="_blank" href="../RCMRF/rcmsynta015.htm#RCMRF121"><code class="codeph">DELETE</code></a> command removes RMAN backups and copies from disk and tape, updates the status of the files to <code class="codeph">DELETED</code> in the control file repository, and removes the records from the recovery catalog (if you use a catalog). If you run RMAN interactively, and if you do not specify the <code class="codeph">NOPROMPT</code> option, then <code class="codeph">DELETE</code> displays a list of files and prompts for confirmation before deleting any file in the list.</p>
<p><a id="d11681e3023" class="indexterm-anchor"></a>The <code class="codeph">DELETE OBSOLETE</code> command is particular useful because RMAN deletes backups and data file copies recorded in the RMAN repository that are obsolete, that is, no longer needed. You can use options on the <code class="codeph">DELETE</code> command to specify what is obsolete or use the configured <a href="glossary.htm#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">backup retention policy</span></a>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To delete obsolete backups and copies:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">&#34;<a href="rcmquick.htm#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D">Starting RMAN and Connecting to a Database</a>&#34;</span>.</span></li>
<li class="stepexpand"><span>Run the <code class="codeph">DELETE OBSOLETE</code> command, as shown in the following example:</span>
<div>
<pre dir="ltr">DELETE OBSOLETE;
</pre></div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-CBDFA5AE-C98D-45CB-B9D5-1B70CABEEA10__GUID-D3D3BBF9-E840-477D-BA13-615213CAEBB5">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmmaint.htm#GUID-8C4B395D-7C24-485F-BEA0-A355821FB93D" title="You can delete backups and recovery catalog records for backups.">Deleting RMAN Backups and Archived Redo Logs</a>&#34;</span> to learn how to use the <code class="codeph">DELETE</code> command</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="BRADV89364"></a>
<div class="props_rev_3"><a id="GUID-F24568FC-0546-4CB0-B843-87F0A95D1649"></a>
<h2 id="BRADV-GUID-F24568FC-0546-4CB0-B843-87F0A95D1649" class="sect2">Diagnosing and Repairing Failures with Data Recovery Advisor</h2>
<div>
<p>The simplest way to diagnose and repair database problems is to use the <a id="d11681e3143" class="indexterm-anchor"></a><a href="glossary.htm#GUID-5E618F7B-127F-4BE2-9ED5-E9D1B828434D"><span class="xrefglossterm">Data Recovery Advisor</span></a>. This Oracle Database tool provides an infrastructure for diagnosing persistent data failures, presenting repair options to the user, and automatically executing repairs.</p>
<p>This section contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmquick.htm#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752">Listing Failures and Determining Repair Options</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C">Repairing Failures</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-F24568FC-0546-4CB0-B843-87F0A95D1649__GUID-8F591ECE-3F72-4F8A-ABCB-6D5DC767F396">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmrepai.htm#GUID-636EA9BE-2DFB-4FA0-959E-B1290C774ABD">Overview of Data Recovery Advisor</a>&#34;</span></p>
</div>
</div>
<a id="BRADV136"></a><a id="BRADV89365"></a>
<div class="props_rev_3"><a id="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752"></a>
<h3 id="BRADV-GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752" class="sect3">Listing Failures and Determining Repair Options</h3>
<div>
<div class="section">
<p>A <a href="glossary.htm#GUID-046A9407-B78B-4BBA-BE2F-55D74EF4F2D8"><span class="xrefglossterm">failure</span></a> is a persistent data corruption detected by the Health Monitor. Examples include physical and logical <a id="d11681e3244" class="indexterm-anchor"></a>data block corruptions and missing data files. Each failure has a <a href="glossary.htm#GUID-AFA532F1-81A1-433F-95BE-730178DD900D"><span class="xrefglossterm">failure priority</span></a> and <a href="glossary.htm#GUID-7881F5D7-5E80-49BF-A369-DC4B670EF8EB"><span class="xrefglossterm">failure status</span></a>. The priority can be <code class="codeph">CRITICAL</code>, <code class="codeph">HIGH</code>, or <code class="codeph">LOW</code>. The status can be <code class="codeph">OPEN</code> or <code class="codeph">CLOSED</code>.</p>
<p>You can run the <a class="olink RCMRF132" target="_blank" href="../RCMRF/rcmsynta027.htm#RCMRF132"><code class="codeph">LIST</code></a> <code class="codeph">FAILURE</code> command to show all known failures. If failures exist, then run the <a class="olink RCMRF166" target="_blank" href="../RCMRF/rcmsynta003.htm#RCMRF166"><code class="codeph">ADVISE FAILURE</code></a> command in the same session to determine repair options. The <code class="codeph">ADVISE FAILURE</code> output shows both manual and automated repair options. First try to fix the problem manually. If you cannot fix the problem manually, then review the automated repair section.</p>
<p>An automated <a href="glossary.htm#GUID-76EA30CA-A51E-44C9-AB25-E1D89AF711B2"><span class="xrefglossterm">repair option</span></a> describes a server-managed repair for one or more failures. Repairs are consolidated when possible so that a single repair can fix multiple failures. The repair option indicates which repair is performed and whether data is lost by performing the repair operation.</p>
<div class="infoboxnotealso" id="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__GUID-B0297116-EC2B-4D6A-928D-906242300B51">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmrepai.htm#GUID-05C2861A-4EC0-4F0C-8860-42AC2BC4CC17">Listing Failures</a>&#34;</span> and <span class="q">&#34;<a href="rcmrepai.htm#GUID-13944F9E-545E-480A-A47B-CE0A73FED3C7">Determining Repair Options</a>&#34;</span></p>
</div>
<p><a href="rcmquick.htm#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">Example 2-1</a> illustrates the commands to list failures and determine repair options. The output indicates the file name of a repair script containing RMAN commands. If you do not want to use Data Recovery Advisor to repair the failure automatically, then you can use the script as the basis of your own recovery strategy.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">
<p class="titleinexample">Example 2-1 LIST FAILURE and ADVISE FAILURE</p>
<pre dir="ltr">RMAN&gt; <span class="bold">LIST FAILURE;</span>
 
Database Role: PRIMARY
List of Database Failures
=========================
 
Failure ID Priority Status    Time Detected Summary
---------- -------- --------- ------------- -------
142        HIGH     OPEN      23-APR-13     One or more non-system datafiles are missing
101        HIGH     OPEN      23-APR-13     Datafile 1: &#39;/disk1/oradata/prod/system01.dbf&#39; 
                                            contains one or more corrupt blocks

RMAN&gt; <span class="bold">ADVISE FAILURE;</span>
 
Database Role: PRIMARY
List of Database Failures
=========================
 
Failure ID Priority Status    Time Detected Summary
---------- -------- --------- ------------- -------
142        HIGH     OPEN      23-APR-13     One or more non-system datafiles are missing
101        HIGH     OPEN      23-APR-13     Datafile 1: &#39;/disk1/oradata/prod/system01.dbf&#39; 
                                            contains one or more corrupt blocks
 
analyzing automatic repair options; this may take some time
using channel ORA_DISK_1
analyzing automatic repair options complete
 
Mandatory Manual Actions
========================
no manual actions available
 
Optional Manual Actions
=======================
1. If file /disk1/oradata/prod/users01.dbf was unintentionally renamed or moved, restore it
 
Automated Repair Options
========================
Option Repair Description
------ ------------------
1      Restore and recover datafile 28; Perform block media recovery of 
       block 56416 in file 1
  Strategy: The repair includes complete media recovery with no data loss
  Repair script: /disk1/oracle/log/diag/rdbms/prod/prod/hm/reco_660500184.hm
</pre></div>
<!-- class="example" --></div>
</div>
<a id="BRADV553"></a><a id="BRADV89366"></a>
<div class="props_rev_3"><a id="GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C"></a>
<h3 id="BRADV-GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C" class="sect3">Repairing Failures</h3>
<div>
<div class="section">
<p>After running <code class="codeph">LIST FAILURE</code> and <code class="codeph">ADVISE FAILURE</code> in an <a id="d11681e3398" class="indexterm-anchor"></a><a href="glossary.htm#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN session</span></a>, you can run <a class="olink RCMRF199" target="_blank" href="../RCMRF/rcmsynta2004.htm#RCMRF199"><code class="codeph">REPAIR FAILURE</code></a> to execute a repair option. If you execute <code class="codeph">REPAIR FAILURE</code> with no other command options, then RMAN uses the first repair option of the most recent <code class="codeph">ADVISE FAILURE</code> command in the current session. Alternatively, specify the repair option number obtained from the most recent <code class="codeph">ADVISE FAILURE</code> command. The following example illustrates how to repair the failures identified in <a href="rcmquick.htm#GUID-FE4B9634-05AE-43AF-9053-CE19B2ED5752__BABIEHJH">Example 2-1</a>.</p>
<pre dir="ltr">RMAN&gt; REPAIR FAILURE;
</pre>
<p>By default, <code class="codeph">REPAIR FAILURE</code> prompts for confirmation before it begins executing. After executing a repair, Data Recovery Advisor reevaluates all existing failures on the possibility that they may also have been fixed. Data Recovery Advisor always verifies that failures are still relevant and automatically closes fixed failures. If a repair fails to complete because of an error, then the error triggers a new assessment and re-evaluation of existing failures and repairs.</p>
<div class="infoboxnotealso" id="GUID-44F746DC-C8B1-48D4-BC97-01E2B0F1A75C__GUID-E43E6851-0927-4D18-ACA8-A63216B3266C">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmrepai.htm#GUID-31DF1037-325F-4FED-8A37-23216EFF9526">Repairing Failures</a>&#34;</span></p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="BRADV554"></a><a id="BRADV89367"></a>
<div class="props_rev_3"><a id="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1"></a>
<h2 id="BRADV-GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1" class="sect2">Rewinding a Database with Flashback Database</h2>
<div>
<div class="section">
<p>You can use the <a id="d11681e3506" class="indexterm-anchor"></a><a href="glossary.htm#GUID-DD883C9B-0441-48D3-9DDC-755597782971"><span class="xrefglossterm">Oracle Flashback Database</span></a> to rewind the whole database to a past time. Unlike media recovery, you do not need to restore data files to return the database to a past state.</p>
<p>To use the RMAN <a class="olink RCMRF194" target="_blank" href="../RCMRF/rcmsynta023.htm#RCMRF194"><code class="codeph">FLASHBACK DATABASE</code></a> command, your database must have been previously configured to generate <a id="d11681e3519" class="indexterm-anchor"></a><a href="glossary.htm#GUID-725ED3D7-5077-4F16-85AA-CDAD5BFCE554"><span class="xrefglossterm">flashback logs</span></a>. This configuration task is described in <span class="q">&#34;<a href="flashdb.htm#GUID-509FB7A6-4CB2-4730-80CA-7B2D68F50773">About Flashback Database</a>&#34;</span>. Flashback Database works by rewinding changes to the data files that exist at the moment that you run the command. You cannot use the flashback database to repair media failures or missing data files.</p>
<p>The database must be mounted when you issue <code class="codeph">FLASHBACK DATABASE</code>. You can flashback to any time within the <a href="glossary.htm#GUID-C25BCFCE-4DE2-499A-A5E3-407A774FE9F3"><span class="xrefglossterm">flashback database window</span></a>. If you have previously created a <a id="d11681e3539" class="indexterm-anchor"></a><a href="glossary.htm#GUID-A5A5E7B1-72B6-4F50-8E11-04C03EB5FFAE"><span class="xrefglossterm">restore point</span></a>, that is a convenience, but not required.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">To rewind a database with Flashback Database:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Start RMAN and connect to a target database as described in <span class="q">&#34;<a href="rcmquick.htm#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D">Starting RMAN and Connecting to a Database</a>&#34;</span>.</span></li>
<li class="stepexpand"><span>Ensure that the database is in a mounted state.</span>
<div>
<p>The following commands shut down and then mount the database:</p>
<pre dir="ltr">SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
</pre></div>
</li>
<li class="stepexpand"><span>Run the <code class="codeph">FLASHBACK DATABASE</code> command.</span>
<div>
<p>The following examples illustrate different forms of the command:</p>
<pre dir="ltr">FLASHBACK DATABASE TO SCN 861150;

FLASHBACK DATABASE 
  TO RESTORE POINT BEFORE_CHANGES;

FLASHBACK DATABASE    
  TO TIMESTAMP TO_DATE(04-DEC-2009  03:30:00&#39;,&#39;DD-MON-YYYY HH24:MI:SS&#39;);
</pre></div>
</li>
<li class="stepexpand"><span>After performing the Flashback Database, open the database read-only in SQL*Plus and run some queries to verify the database contents.</span>
<div>
<p>Open the database read-only as follows:</p>
<pre dir="ltr">ALTER DATABASE OPEN READ ONLY;
</pre></div>
</li>
<li class="stepexpand"><span>If satisfied with the results, then issue the following sequence of commands to shut down and then open the database:</span>
<div>
<pre dir="ltr">SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
ALTER DATABASE OPEN RESETLOGS;
</pre></div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-852BB34C-0F26-49C8-A282-EEF1FBF92FC1__GUID-EE8D0C47-C8AB-4D21-AED0-B117B8C8CBF1">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="rcmflash.htm#GUID-953FA30D-BED2-4DBA-8361-9DA1B8FF073F">Rewinding a Database with Flashback Database</a>&#34;</span></p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="BRADV89368"></a>
<div class="props_rev_3"><a id="GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205"></a>
<h2 id="BRADV-GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205" class="sect2">Restoring and Recovering Database Files</h2>
<div>
<p>Use the <a class="olink RCMRF149" target="_blank" href="../RCMRF/rcmsynta2008.htm#RCMRF149"><code class="codeph">RESTORE</code></a> and <a class="olink RCMRF140" target="_blank" href="../RCMRF/rcmsynta2001.htm#RCMRF140"><code class="codeph">RECOVER</code></a> commands for RMAN restore and recovery of physical database files. Restoring data files is retrieving them from backups as needed for a recovery operation. Media recovery is the application of changes from redo logs and incremental backups to a restored data file to bring the data file forward to a desired SCN or point in time.</p>
<p>This section contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="rcmquick.htm#GUID-F05FE79E-7C36-402B-8785-961F793AA710">Preparing to Restore and Recover Database Files</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8">Recovering the Whole Database</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8">Recovering Tablespaces</a></p>
</li>
<li>
<p><a href="rcmquick.htm#GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E">Recovering Individual Data Blocks</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-DF1E7501-30F1-45FB-B7FA-52DC53F03205__GUID-727878EF-123D-4A82-8CDF-6A90790E86F3">
<p class="notep1">See Also:</p>
<p><a href="rcmcomre.htm#GUID-D908719C-9D46-4084-850C-0F81C25094EB">Performing Complete Database Recovery</a></p>
</div>
</div>
<a id="BRADV555"></a><a id="BRADV99956"></a>
<div class="props_rev_3"><a id="GUID-F05FE79E-7C36-402B-8785-961F793AA710"></a>
<h3 id="BRADV-GUID-F05FE79E-7C36-402B-8785-961F793AA710" class="sect3">Preparing to Restore and Recover Database Files</h3>
<div>
<div class="section">
<p>If you must recover the database because a media failure damages database files, then first ensure that you have the necessary backups. You can use the <code class="codeph">RESTORE ... PREVIEW</code> command to report, but not restore, the backups that RMAN can use to restore to the specified time. RMAN queries the metadata and does not actually read the backup files. The database can be open when you run this command.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To preview a database restore and recovery:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Start RMAN and connect to the target database as described in <span class="q">&#34;<a href="rcmquick.htm#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D">Starting RMAN and Connecting to a Database</a>&#34;</span>.</span></li>
<li class="stepexpand"><span>Optionally, list the current tablespaces and data files, as shown in the following command:</span>
<div>
<pre dir="ltr">RMAN&gt; REPORT SCHEMA;
</pre></div>
</li>
<li class="stepexpand"><span>Run the <code class="codeph">RESTORE DATABASE</code> command with the <code class="codeph">PREVIEW</code> option.</span>
<div>
<p>The following command specifies <code class="codeph">SUMMARY</code> so that the backup metadata is not displayed in verbose mode (sample output included):</p>
<pre dir="ltr">RMAN&gt; RESTORE DATABASE PREVIEW SUMMARY;
 
Starting restore at 21-MAY-13
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=80 device type=DISK
 
List of Backups
===============
Key     TY LV S Device Type Completion Time #Pieces #Copies Compressed Tag
------- -- -- - ----------- --------------- ------- ------- ---------- ---
11      B  F  A DISK        18-MAY-13       1       2       NO         TAG20070518T181114
13      B  F  A DISK        18-MAY-13       1       2       NO         TAG20070518T181114
using channel ORA_DISK_1
 
List of Archived Log Copies for database with db_unique_name PROD
=====================================================================
 
Key     Thrd Seq     S Low Time
------- ---- ------- - ---------
47      1    18      A 18-MAY-13
        Name: /disk1/oracle/dbs/db1r_60ffa882_1_18_0622902157.arc
 
Media recovery start SCN is 586534
Recovery must be done beyond SCN 587194 to clear datafile fuzziness
validation succeeded for backup piece
Finished restore at 21-MAY-13
</pre></div>
</li>
</ol>
</div>
</div>
<a id="BRADV556"></a><a id="BRADV89369"></a>
<div class="props_rev_3"><a id="GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8"></a>
<h3 id="BRADV-GUID-6EE4754E-DA8C-4F30-A9D6-57475BFF34D8" class="sect3">Recovering the Whole Database</h3>
<div>
<div class="section">
<p>Use the <code class="codeph">RESTORE</code> <code class="codeph">DATABASE</code> and <code class="codeph">RECOVER</code> <code class="codeph">DATABASE</code> commands to recover the whole database. You must have previously made backups of all needed files. This scenario assumes that you can restore all data files to their original locations. If the original locations are inaccessible, then use the <code class="codeph">SET NEWNAME</code> command as described in <span class="q">&#34;<a href="rcmcomre.htm#GUID-A3DE37A6-3983-4834-858E-A2BCC3804681">About Restoring Data Files to a Nondefault Location</a>&#34;</span>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To recover the whole database:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Prepare for recovery as explained in <span class="q">&#34;<a href="rcmquick.htm#GUID-F05FE79E-7C36-402B-8785-961F793AA710">Preparing to Restore and Recover Database Files</a>&#34;</span>.</span></li>
<li class="stepexpand"><span>Place the database in a mounted state.</span>
<div>
<p>The following example terminates the database instance (if it is started) and mounts the database:</p>
<pre dir="ltr">RMAN&gt; STARTUP FORCE MOUNT;
</pre></div>
</li>
<li class="stepexpand"><span>Restore the database.</span>
<div>
<p>The following example uses the preconfigured disk channel to restore the database:</p>
<pre dir="ltr">RMAN&gt; RESTORE DATABASE;
</pre></div>
</li>
<li class="stepexpand"><span>Recover the database, as shown in the following example:</span>
<div>
<pre dir="ltr">RMAN&gt; RECOVER DATABASE;
</pre></div>
</li>
<li class="stepexpand"><span>Open the database, as shown in the following example:</span>
<div>
<pre dir="ltr">RMAN&gt; ALTER DATABASE OPEN;
</pre></div>
</li>
</ol>
</div>
</div>
<a id="BRADV557"></a><a id="BRADV89370"></a>
<div class="props_rev_3"><a id="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8"></a>
<h3 id="BRADV-GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8" class="sect3">Recovering Tablespaces</h3>
<div>
<div class="section">
<p>Use the <code class="codeph">RESTORE</code> <code class="codeph">TABLESPACE</code> and <code class="codeph">RECOVER</code> <code class="codeph">TABLESPACE</code> commands on individual tablespaces when the database is open. In this case, you must take the tablespace that needs recovery offline, restore and then recover the tablespace, and bring the recovered tablespace online.</p>
<p>If you cannot restore a data file to its original location, then use the RMAN <code class="codeph">SET NEWNAME</code> command within a <code class="codeph">RUN</code> block to specify the new file name and location. Afterward, use a <code class="codeph">SWITCH DATAFILE ALL</code> command, which is equivalent to using the SQL statement <code class="codeph">ALTER DATABASE RENAME FILE</code>, to update the control file to reflect the new names for all data files for which a <code class="codeph">SET NEWNAME</code> has been issued in the <code class="codeph">RUN</code> command.</p>
<p>Unlike user-managed media recovery, you do <span class="italic">not</span> place an online tablespace in <a href="glossary.htm#GUID-BD2A12D3-A995-49B8-AE99-B8DDDF4FE7E7"><span class="xrefglossterm">backup mode</span></a>. RMAN does not require extra logging or backup mode because it knows the format of data blocks.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To recover an individual tablespace when the database is open:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Prepare for recovery as explained in <span class="q">&#34;<a href="rcmquick.htm#GUID-F05FE79E-7C36-402B-8785-961F793AA710">Preparing to Restore and Recover Database Files</a>&#34;</span>.</span></li>
<li class="stepexpand"><span>Take the tablespace to be recovered offline.</span>
<div>
<p>The following example takes the <code class="codeph">USERS</code> tablespace offline:</p>
<pre dir="ltr">RMAN&gt; ALTER TABLESPACE users OFFLINE;
</pre></div>
</li>
<li class="stepexpand"><span>Restore and recover the tablespace.</span>
<div>
<p>The following <code class="codeph">RUN</code> command, which you execute at the RMAN prompt, sets a new name for the data file in the <code class="codeph">USERS</code> tablespace:</p>
<pre dir="ltr">RUN
{
  SET NEWNAME FOR DATAFILE &#39;/disk1/oradata/prod/users01.dbf&#39; 
    TO &#39;/disk2/users01.dbf&#39;;
  RESTORE TABLESPACE users;
  SWITCH DATAFILE ALL;   # update control file with new file names
  RECOVER TABLESPACE users;
}
</pre></div>
</li>
<li class="stepexpand"><span>Bring the tablespace online, as shown in the following example:</span>
<div>
<pre dir="ltr">RMAN&gt; ALTER TABLESPACE users ONLINE;
</pre></div>
</li>
</ol>
<div class="section">
<p>You can also use <code class="codeph">RESTORE DATAFILE</code> and <code class="codeph">RECOVER DATAFILE</code> for recovery at the data file level.</p>
<div class="infoboxnotealso" id="GUID-40B5AD33-B638-47AC-B150-73F3490BF3D8__GUID-0C9261C3-70BF-4D9B-A4E3-6A1053132540">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="rcmcomre.htm#GUID-4EBD9D56-9700-45A1-B233-1F5506A04532">Performing Complete Recovery of a Tablespace</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="rcmcncpt.htm#GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C">About Online Backups and Backup Mode</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="BRADV558"></a><a id="BRADV89371"></a>
<div class="props_rev_3"><a id="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E"></a>
<h3 id="BRADV-GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E" class="sect3">Recovering Individual Data Blocks</h3>
<div>
<div class="section">
<p>RMAN can recover individual corrupted data file <a id="d11681e4202" class="indexterm-anchor"></a>blocks. When RMAN performs a complete scan of a file for a backup, any corrupted blocks are listed in<a id="d11681e4205" class="indexterm-anchor"></a> <code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>. Corruption is usually reported in alert logs, trace files, or results of SQL queries.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To recover data blocks:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Start RMAN and connect to the target database as described in <span class="q">&#34;<a href="rcmquick.htm#GUID-3DAE7BA3-C367-4BFF-A5B2-28B3EC67BB2D">Starting RMAN and Connecting to a Database</a>&#34;</span>.</span></li>
<li class="stepexpand"><span>Obtain the block numbers of the corrupted blocks if you do not have this information.</span>
<div>
<pre dir="ltr">RMAN&gt; SELECT NAME, VALUE FROM V$DIAG_INFO;
</pre></div>
</li>
<li class="stepexpand"><span>Run the <code class="codeph">RECOVER</code> command to repair the blocks.</span>
<div>
<p>The following RMAN command recovers all corrupted blocks:</p>
<pre dir="ltr">RMAN&gt; RECOVER CORRUPTION LIST;
</pre>
<p>You can also recover individual blocks, as shown in the following example:</p>
<pre dir="ltr">RMAN&gt; RECOVER DATAFILE 1 BLOCK 233, 235 DATAFILE 2 BLOCK 100 TO 200;
</pre></div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-52E7DA70-AF05-4551-A4AF-31FA6788AA4E__GUID-641C5748-E11B-4796-9E60-902DCE0C2551">
<p class="notep1">See Also:</p>
<p><a href="rcmblock.htm#GUID-1E226393-17D0-4AB0-A05D-91210255D8FF">Performing Block Media Recovery</a></p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment500">
<tr>
<td class="cellalignment512">
<table class="cellalignment505">
<tr>
<td class="cellalignment504"><a href="rcmintro.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment504"><a href="part_pln.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment514">
<table class="cellalignment503">
<tr>
<td class="cellalignment504"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment504"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment504"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment504"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment504"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment504"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>