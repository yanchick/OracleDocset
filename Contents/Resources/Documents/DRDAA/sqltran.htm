<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-5807"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/SQL%20Translation%20of%20JDBC%20and%20ODBC%20Applications"></a><title>SQL Translation of JDBC and ODBC Applications</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 748"/>
<meta name="description" content="Describes the installation, configuration, and administration tasks for all activities related to migrating applications to Oracle Database from other databases, including DB2, MySQL, and Sybase."/>
<meta name="dcterms.created" content="2014-03-14T22:35:9Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Migration Guide"/>
<meta name="dcterms.identifier" content="E22508-11"/>
<meta name="dcterms.isVersionOf" content="DRDAA"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="sql_transl_install.htm" title="Previous" type="text/html"/>
<link rel="Next" href="sql_transl_ex.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E22508-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">10/16</span> <!-- End Header -->
<div id="DRDAA29157" class="chapter"><a id="BABBJJBE"></a>
<h1 class="chapter"><span class="secnum">4</span> <a id="sthref68"></a><a id="sthref69"></a>SQL Translation of JDBC and ODBC Applications</h1>
<p>This chapter discusses the following topics:</p>
<ul>
<li>
<p><a href="#BABIGFFC">SQL Translation of JDBC Applications</a></p>
</li>
<li>
<p><a href="#BABBEBFE">SQL Translation of ODBC Applications</a></p>
</li>
</ul>
<a id="BABIGFFC"></a>
<div id="DRDAA29158" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref70"></a>SQL Translation of JDBC Applications</h2>
<p>This section describes the following concepts that you must understand to use a SQL Translator with a JDBC application:</p>
<ul>
<li>
<p><a href="#BABCFAIB">SQL Translation Profile</a></p>
</li>
<li>
<p><a href="#BABFJGCI">Error Message Translation</a></p>
</li>
<li>
<p><a href="#BABIIEHA">Converting JDBC Standard Parameter Markers</a></p>
</li>
<li>
<p><a href="#BABBEFEC">Executing the Translated Oracle Dialect Query</a></p>
</li>
<li>
<p><a href="#BABEEGJD">Error Translation</a></p>
</li>
</ul>
<a id="BABCFAIB"></a>
<div id="DRDAA29113" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref71"></a>SQL Translation Profile</h3>
<p>A SQL Translation Profile is a database schema object that directs how SQL statements in non-Oracle dialects are translated into Oracle SQL dialects. It also directs how Oracle error codes and <code>SQLSTATES</code> are translated into the SQL dialect of other vendors.</p>
<p>When you want to migrate a client application written for a non-Oracle SQL database to Oracle, you can create a SQL Translation Profile and configure it to translate the SQL statements and errors for the application. At runtime, the application sets the profile for the connection in Oracle Database to translate its SQL statements and errors. This profile is set using the <code>oracle.jdbc.sqlTranslationProfile</code> property.</p>
<p>When necessary, you can register custom translations of SQL statements and errors with the SQL Translation Profile on the Server. When a SQL statement or error is translated, then first, the custom translation is looked up and then, the translator is invoked only if no match is found.</p>
<p>See <a href="sql_transl_arch.htm#BABGHAEC">&#34;Architecture of SQL Translation Framework&#34;</a> and <a href="sql_transl_install.htm#BABHEAGJ">&#34;Setting up a SQL Translation Profile&#34;</a>.</p>
</div>
<!-- class="sect2" -->
<a id="BABFJGCI"></a>
<div id="DRDAA29114" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref72"></a>Error Message Translation</h3>
<p>You may prefer receiving error messages in the form of messages that used to be thrown by the native database. You must then use the error message translation file, which translates error messages when there is no valid connection to the database. Once a connection to the database is established, the JDBC driver bypasses this file completely and all errors are handled by the translator on the server. Similar to query translation, you can also register custom error translations on the server.</p>
<p>The error message translation file is not written by a specific component. You must provide the file for translation and specify the name of the file. You can also provide the file path as the value of the corresponding connection property.</p>
<p>The error message translation file is in XML format; it contains a series of error translations. Each error translation contains the following information:</p>
<div class="inftblinformal">
<table class="cellalignment495" summary="Error translation XML file details" dir="ltr">
<thead>
<tr class="cellalignment486">
<th class="cellalignment496" id="r1c1-t2">Translation Error</th>
<th class="cellalignment496" id="r1c2-t2">Type</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment486">
<td class="cellalignment492" id="r2c1-t2" headers="r1c1-t2">ORA error number</td>
<td class="cellalignment492" headers="r2c1-t2 r1c2-t2">positive integer</td>
</tr>
<tr class="cellalignment486">
<td class="cellalignment492" id="r3c1-t2" headers="r1c1-t2">Oracle error message</td>
<td class="cellalignment492" headers="r3c1-t2 r1c2-t2">String</td>
</tr>
<tr class="cellalignment486">
<td class="cellalignment492" id="r4c1-t2" headers="r1c1-t2">Translated error code</td>
<td class="cellalignment492" headers="r4c1-t2 r1c2-t2">positive integer</td>
</tr>
<tr class="cellalignment486">
<td class="cellalignment492" id="r5c1-t2" headers="r1c1-t2">Translated SQL State</td>
<td class="cellalignment492" headers="r5c1-t2 r1c2-t2">positive integer</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" --></div>
<!-- class="sect2" -->
<a id="BABIIEHA"></a>
<div id="DRDAA29115" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref73"></a>Converting JDBC Standard Parameter Markers</h3>
<p>The JDBC driver internally converts the JDBC standard parameter markers (<code>?</code>) into Oracle style parameter markers of the format <code>:b&lt;n&gt;</code>, before submitting the SQL statements for translation. Here, the naming format for the parameter markers is <code>:b&lt;n&gt;</code>, where, <code>n</code> is an incremental number to specify the position of the (<code>?</code>) marker in the JDBC <code>PreparedStatement</code>. For example, consider the <code>UPDATE employees SET salary = salary * ? WHERE employee_id = ?</code> <code>PreparedStatement</code> statement, where, the first parameter marker (<code>?</code>) will become <code>:b1</code> and the second parameter marker (<code>?</code>) will become <code>:b2</code>. So, after conversion, the driver sends the following query to the server for translation:</p>
<pre>UPDATE employees SET salary = salary * :b1 WHERE employee_id = :b2
</pre>
<p>Note that any query that contains &#34;?&#34; as a parameter marker fails during the connection translation phase if you change the value of the <code>processEscapes</code> property to <code>FALSE</code>. For a successful translation, you must retain the default value of the <code>processEscapes</code> property.</p>
<p>Conversion of parameter markers helps the driver to automatically reorder any parameter changes that occurred at translation. During the conversion, if any custom translation must be registered on the server, then it should be registered from the Oracle style parameter marker version, in which the server receives the statements, and not from the JDBC style parameter marker version. Also, the custom translation must have the same number of parameter markers in the Oracle style as the number of parameter markers in the original query.</p>
<p>For more information about supported JDBC APIs, <a href="jdbc_api_ref.htm#CHDJBIAH">Chapter 8, &#34;API Reference for SQL Translation of JDBC Applications&#34;</a>.</p>
</div>
<!-- class="sect2" -->
<a id="BABBEFEC"></a>
<div id="DRDAA29116" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref74"></a>Executing the Translated Oracle Dialect Query</h3>
<p>After the JDBC standard parameter markers are converted into Oracle style parameter markers, the driver makes a round-trip to the server for translating the query into Oracle dialect. Once the translated query is received by the server, any reordering in the parameters in handled transparently by the driver, and the query is executed as a normal query.</p>
<p>If a query cannot be translated due to the unavailability of translation, then the server can either raise an error or return a <code>NULL</code>, based on the value of the <a id="sthref75"></a><code>DBMS_SQL_TRANSLATOR.ATTR_RAISE_TRANSLATION_ERROR</code> profile attribute. If the server returns a <code>NULL</code>, then the original untranslated query is assumed to be the query translated by the driver and executed.</p>
<p>The driver keeps the translation in the local caches to save the future round-trip.</p>
<p>Note that the JDBC driver can support the translation errors (when the query cannot be translated due to the unavailability of translation) set by either value of the <code>DBMS_SQL_TRANSLATOR.ATTR_RAISE_TRANSLATION_ERROR</code> attribute. However, the value must be set on the server before the connection is established. Because a change in the value of this attribute in the middle of a session may result in inconsistent behavior, Oracle recommends that you do not flip the value of this attribute during a session. See <a class="olink ARPLS73958" href="../ARPLS/d_sql_trans.htm#ARPLS73958"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code>TRANSLATE_SQL</code> procedure.</p>
</div>
<!-- class="sect2" -->
<a id="BABEEGJD"></a>
<div id="DRDAA29117" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref76"></a>Error Translation</h3>
<p>If any <code>SQLException</code> is thrown during the query execution, the driver transparently makes a trip to the server and translates the exception from Oracle codes to the original vendor-specific code. So, the resulting <code>SQLException</code> has both vendor-specific code and <code>SQLSTATE</code> along with the Oracle-specific <code>SQLException</code> as the cause.</p>
<p>Similar to query translation, custom error translations can also be registered on the server and given priority over standard translation. The <code>DBMS_SQL_TRANSLATOR.ATTR_RAISE_TRANSLATION_ERROR</code> attribute has the same effect on custom error translation as on query translation.</p>
<p>Note that the errors are translated only after a connection to the server is established. So, for errors that occur before the connection to the server is established, <a href="#BABFJGCI">Error Message Translation</a> is used.</p>
</div>
<!-- class="sect2" -->
<div id="DRDAA29458" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref77"></a>
<h3 class="sect2">SQL Translation Using a JDBC Driver</h3>
<p><a href="#BABDEGHA">Example 4-1</a> demonstrates how to use a JDBC driver for SQL translation. You must first grant the <code>CREATE SQL TRANSLATION PROFILE</code> privilege to <code>HR</code> as follows:</p>
<pre>conn system/manager;
grant create sql translation profile to HR;
exit
</pre>
<p>Now, connect to the database as <code>HR</code> and execute the following SQL statements:</p>
<pre>drop table sample_tab;
create table sample_tab (c1 number, c2 varchar2(100));
insert into sample_tab values (1, &#39;A&#39;);
insert into sample_tab values (1, &#39;A&#39;);
insert into sample_tab values (1, &#39;A&#39;);
commit;
exec dbms_sql_translator.drop_profile(&#39;FOO&#39;);
exec  dbms_sql_translator.create_profile(&#39;FOO&#39;);
exec  dbms_sql_translator.register_sql_translation(&#39;FOO&#39;,&#39;select row of select c1, c2 from sample_tab 
where c1=:b1 and c2=:b2&#39;,&#39;select c1, c2 from sample_tab where c1=:b1 and c2=:b2&#39;);
</pre>
<p>Now, you can run the following program that translates SQL statements that use JDBC standard parameter markers.</p>
<div id="DRDAA29159" class="example">
<p class="titleinexample"><a id="BABDEGHA"></a>Example 4-1 Translating Non-Oracle SQL Statements to Oracle SQL Dialect Using JDBC Driver</p>
<pre>public class SQLTransPstmt 
{
  static String url=&#34;jdbc:oracle:thin:@localhost:5521:jvx1&#34;;
  static String user=&#34;HR&#34;, pwd=&#34;hr&#34;;  
  static String PROFILE = &#34;FOO&#34;;
  static String primitiveSql = &#34;select row of select c1, c2 from sample_tab where c1=? and c2=?&#34;;
  
// Note that this query contains JDBC style parameter markers
// But the preceding custom translation registered in SQL is using Oracle style markers
 
  public static void main(String[] args) throws Exception
  {       
    OracleDataSource ods = new OracleDataSource();
    ods.setURL(url);
        
    Properties props = new Properties();
    props.put(&#34;user&#34;, user);
    props.put(&#34;password&#34;, pwd);
 
    // The Following connection property makes the connection translating    
    props.put(OracleConnection.CONNECTION_PROPERTY_SQL_TRANSLATION_PROFILE, PROFILE);
    ods.setConnectionProperties(props);
    Connection conn = ods.getConnection();
    System.out.println(&#34;connection for SQL translation: &#34;+conn);
    
    try{
      // Any statements created using a translating connection are
      // automatically translating. If you want to get a non-translating
      // statement out of a translating connection please have a look at
      // the oracle.jdbc.OracleTranslatingConnection Interface.
      // Refer to <a href="jdbc_api_ref.htm#CACJGFJB">&#34;OracleTranslatingConnection Interface&#34;</a>
      // for more information
      PreparedStatement trStmt = conn.prepareStatement(primitiveSql);
      trStmt.setInt(1, 1);
      trStmt.setString(2, &#34;A&#34;);      
      System.out.println(&#34;executeQuery for: &#34;+primitiveSql);
      ResultSet trRs = trStmt.executeQuery();
      while (trRs.next())
        System.out.println(&#34;C1:&#34;+trRs.getInt(1)+&#34;, C2:&#34;+trRs.getString(2));
      trRs.close();
      
      trStmt.close();
    }catch (Exception e) {
      e.printStackTrace();
    }
    
    
    conn.close();
  }
}
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABBEBFE"></a>
<div id="DRDAA29459" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref78"></a>SQL Translation of ODBC Applications</h2>
<p>This section describes the following concepts that you must to know to use a SQL Translator with an ODBC application:</p>
<ul>
<li>
<p><a href="#BABICAAG">SQL Translation profile</a></p>
</li>
<li>
<p><a href="#BABJJECI">Error Message Translation</a></p>
</li>
<li>
<p><a href="#BABCIIAF">Translating Error Messages</a></p>
</li>
</ul>
<a id="BABICAAG"></a>
<div id="DRDAA29460" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref79"></a>SQL Translation profile</h3>
<p>For ODBC applications, the SQL Translation Profile is set at the service level. So, you do not require to set it in the <code>.odbc.ini</code> file.</p>
</div>
<!-- class="sect2" -->
<a id="BABJJECI"></a>
<div id="DRDAA29461" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref80"></a>Error Message Translation</h3>
<p>You may prefer receiving error messages in the form of messages that used to be thrown by the native database. In such cases, when the application is set to run on Oracle Database, you must set the <code>SQLTranslateErrors=T</code> entry in the <code>.odbc.ini</code> file to translate the <code>ORA</code> errors to their native form.</p>
</div>
<!-- class="sect2" -->
<a id="BABCIIAF"></a>
<div id="DRDAA29462" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Translating Error Messages</h3>
<p><a href="#BABBDIHF">Example 4-2</a> demonstrates how to use the ODBC driver in SQL translation. The SQL statement used in the example uses Sybase <code>TOP N</code> syntax.</p>
<p>Note that you must set the <code>ServerName=</code> entry in the <code>.odbc.ini</code> file with the Database service name created in <a href="sql_transl_arch.htm#BABDBCFG">&#34;How to Use SQL Translation Framework&#34;</a> section. Also, set the &#39;<code>SQLTranslateErros=T</code> entry in the <code>.odbc.ini</code> file, if you require translation of Oracle errors to native database errors.</p>
<div id="DRDAA29463" class="example">
<p class="titleinexample"><a id="BABBDIHF"></a>Example 4-2 Translating Non-Oracle SQL to Oracle SQL Dialect Using ODBC Driver</p>
<pre>int main()
{
 HENV m_henv;          /* environment handle */
 HDBC m_hdbc;          /* connection handle */
 HSTMT m_hstmt;        /* statement handle */
 int retCode;          /* return code */
 char dbdsn[100];      /* Initialize with the DSN name of connection */
 const  char szUID[10];/*Initialize with appropriate Username of DB */
 const char szPWD[10]; /* Initialize with appropriate Password */
 
 char query1[100]=&#34;select top 3 col1 from babel_tab3 order by col1&#34;;
 SQLLEN paramInd = SQL_NTS;
 SQLUINTEGER   no = 0;
 
 //Allocate HENV, HDBC, HSTMT handles
 retCode = SQLAllocHandle (SQL_HANDLE_ENV, SQL_NULL_HANDLE, &amp;m_henv);
 if (retCode != SQL_SUCCESS &amp;&amp; retCode != SQL_SUCCESS_WITH_INFO)
 {
    printf (&#34;SQLAllocHandle failed \n&#34;);
    printSQLError (1, m_henv);
 }
 
 retCode = SQLSetEnvAttr (m_henv, SQL_ATTR_ODBC_VERSION, (void *) SQL_OV_ODBC3,
           SQL_IS_INTEGER);
 if (retCode != SQL_SUCCESS &amp;&amp; retCode != SQL_SUCCESS_WITH_INFO)
 {
    printf (&#34;SQLSetEnvAttr failed\n&#34;);
    printSQLError (1, m_henv);
 }
 
 retCode = SQLAllocHandle (SQL_HANDLE_DBC, m_henv, &amp;m_hdbc);
 if (retCode != SQL_SUCCESS &amp;&amp; retCode != SQL_SUCCESS_WITH_INFO)
 {
    printf (&#34;SQLAllocHandle failed\n&#34;);
    printSQLError (2, m_hdbc);
 }
 
 retCode = SQLConnect (m_hdbc, (SQLCHAR *) dbdsn,SQL_NTS,
                       (SQLCHAR *) szUID, SQL_NTS,
                       (SQLCHAR *) szPWD, SQL_NTS);
 if (retCode != SQL_SUCCESS &amp;&amp; retCode != SQL_SUCCESS_WITH_INFO)
 {
    printf (&#34;SQLConnect failed to connect\n&#34;);
    printSQLError (2, m_hdbc);
 }
 
 retCode = SQLAllocHandle (SQL_HANDLE_STMT, m_hdbc, &amp;m_hstmt);
 if (retCode != SQL_SUCCESS &amp;&amp; retCode != SQL_SUCCESS_WITH_INFO)
 {
    printf (&#34;SQLAllocHandle with SQL_HANDLE_STMT failed\n&#34;);
    printSQLError (3, m_hstmt);
 }
 
 /* Prepare and Execute the Sybase Top-N syntax SQL statements */
 
 retCode = SQLPrepare (m_hstmt, (SQLCHAR *) query1, SQL_NTS);
 if (retCode != SQL_SUCCESS &amp;&amp; retCode != SQL_SUCCESS_WITH_INFO)
 {
    printf (&#34;SQLPrepare failed\n&#34;);
    printSQLError (3, m_hstmt);
 }
 
 retCode=SQLExecute(m_hstmt);
 if (retCode != SQL_SUCCESS &amp;&amp; retCode != SQL_SUCCESS_WITH_INFO)
 {
    printf (&#34;SQLExecute-failed\n&#34;);
    printSQLError (3, m_hstmt);
 }
 
 while (retCode = SQLFetch(m_hstmt)!=SQL_NO_DATA)
 {
    retCode=SQLGetData(m_hstmt,1,SQL_C_ULONG, &amp;no, 0, &amp;paramInd);
    if (retCode != SQL_SUCCESS &amp;&amp; retCode != SQL_SUCCESS_WITH_INFO)
    {
       printf (&#34;SQLFetch failed\n&#34;);
       printSQLError (3, m_hstmt);
    }
    printf(&#34;Value is %d\n&#34;,no);
 }
 
 retCode = SQLCloseCursor (m_hstmt);
 if (retCode != SQL_SUCCESS &amp;&amp; retCode != SQL_SUCCESS_WITH_INFO)
    printf (&#34;SQLCloseCursor failed\n&#34;);
 
 printf (&#34;cleanup()\n&#34;);
 retCode = SQLFreeHandle (SQL_HANDLE_STMT, m_hstmt);
 if (retCode != SQL_SUCCESS &amp;&amp; retCode != SQL_SUCCESS_WITH_INFO)
 {
    printf (&#34;SQLFreeHandle failed\n&#34;);
    printSQLError (3, m_hstmt);
 }
 
 retCode = SQLDisconnect (m_hdbc);
 if (retCode != SQL_SUCCESS &amp;&amp; retCode != SQL_SUCCESS_WITH_INFO)
 {
    printf (&#34;SQLDisconnect failed\n&#34;);
    printSQLError (2, m_hdbc);
 }
 
 retCode = SQLFreeHandle (SQL_HANDLE_DBC, m_hdbc);
 if (retCode != SQL_SUCCESS &amp;&amp; retCode != SQL_SUCCESS_WITH_INFO)
 {
    printf (&#34;SQLFreeHandle failed\n&#34;);
    printSQLError (2, m_hdbc);
 }
 
 retCode = SQLFreeHandle (SQL_HANDLE_ENV, m_henv);
 if (retCode != SQL_SUCCESS &amp;&amp; retCode != SQL_SUCCESS_WITH_INFO)
 {
    printf (&#34;SQLFreeHandle failed\n&#34;);
    printSQLError (1, m_henv);
 }
}
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment485">
<tr>
<td class="cellalignment492">
<table class="cellalignment490">
<tr>
<td class="cellalignment489"><a href="sql_transl_install.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment489"><a href="sql_transl_ex.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment494">
<table class="cellalignment488">
<tr>
<td class="cellalignment489"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment489"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment489"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment489"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment489"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment489"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>