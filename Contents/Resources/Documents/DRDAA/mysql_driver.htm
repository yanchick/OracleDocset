<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-5802"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/MySQL%20Client%20Library%20Driver%20for%20Oracle"></a><title>MySQL Client Library Driver for Oracle</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 748"/>
<meta name="description" content="Describes the installation, configuration, and administration tasks for all activities related to migrating applications to Oracle Database from other databases, including DB2, MySQL, and Sybase."/>
<meta name="dcterms.created" content="2014-03-14T22:35:10Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Migration Guide"/>
<meta name="dcterms.identifier" content="E22508-11"/>
<meta name="dcterms.isVersionOf" content="DRDAA"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="sql_transl_ex.htm" title="Previous" type="text/html"/>
<link rel="Next" href="mysql_api_ref.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E22508-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">12/16</span> <!-- End Header -->
<div id="DRDAA29191" class="chapter"><a id="BGBDEAFH"></a>
<h1 class="chapter"><span class="secnum">6</span> MySQL Client Library Driver for Oracle</h1>
<p>This chapter discusses MySQL Client Library Driver for Oracle Database, and its use in migrating applications from MySQL to Oracle.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BGBDGDEC">Introduction to MySQL Client Library Driver for Oracle</a></p>
</li>
<li>
<p><a href="#BGBDFHED">Overview of Migration with MySQL Client Library Driver for Oracle</a></p>
</li>
<li>
<p><a href="#BGBJAECC">Using MySQL Client Library Driver for Oracle</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="mysql_api_ref.htm#CHEGHBHC">Chapter 7, &#34;API Reference for Oracle MySQL Client Library Driver&#34;</a> for more information about MySQL programmatic support</div>
<a id="BGBDGDEC"></a>
<div id="DRDAA29192" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Introduction to MySQL Client Library Driver for Oracle</h2>
<p>MySQL Client Library Driver for Oracle Database 12<span class="italic">c</span> Release 1, <code>liboramysql</code>, is a drop-in replacement for MySQL Commercial Connector/C 6.0 client library. The <a id="sthref90"></a><code>liboramysql</code> driver implements a similar API, enabling C-based applications and tools developed for MySQL to connect to Oracle Database. The driver may be used to migrate applications from MySQL to Oracle Database with minimal changes to the application code.</p>
<p>The <code>liboramysql</code> driver uses Oracle Call Interface (OCI) to connect to Oracle Database.</p>
<div id="DRDAA29465" class="figure">
<p class="titleinfigure"><a id="sthref91"></a>Figure 6-1 MySQL Application Code Using liboramysql Driver to Connect to Oracle</p>
<img width="285" height="264" src="img/liboramysql_arch.png" alt="Description of Figure 6-1 follows"/><br/>
<a id="sthref92" href="img_text/liboramysql_arch.htm">Description of &#34;Figure 6-1 MySQL Application Code Using liboramysql Driver to Connect to Oracle&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>The C code snippet in <a href="#BGBFJADC">Example 6-1</a> demonstrates how to connect to MySQL and how to insert a row into a table. After updating the connection credentials, this code can run unchanged against Oracle Database when the executable is linked using the <code>liboramysql</code> library, instead of the <code>libmysqlclient</code> library.</p>
<div id="DRDAA29194" class="example">
<p class="titleinexample"><a id="BGBFJADC"></a>Example 6-1 <a id="sthref93"></a>Connecting to MySQL and Inserting a New Row</p>
<pre>c = mysql_init(NULL);
mysql_real_connect(c, &#34;myhost&#34;, &#34;myun&#34;, &#34;mypw&#34;, &#34;mydb&#34;, 0, NULL, 0);
mysql_query(c, &#34;insert into mytable values (1,2)&#34;);
mysql_close(c);
</pre></div>
<!-- class="example" -->
<p>Although the database schema and data must be migrated to Oracle separately, and although the <code>liboramysql</code> library does not translate SQL statements, considerable amount of effort is conserved when migrating to Oracle Database because no changes have to be made to the application code.</p>
<p>Custom C applications can use the <code>liboramysql</code> library to easily migrate to Oracle Database.</p>
</div>
<!-- class="sect1" -->
<div id="DRDAA29466" class="sect1"><!-- infolevel="all" infotype="General" --><a id="sthref94"></a>
<h2 class="sect1"><a id="sthref95"></a>Installation and First Use of MySQL Client Library Driver for Oracle</h2>
<p>The MySQL Client Library Driver for Oracle is provided as a file in the <code>liboramysql.so</code> shared library for Linux and as the <code>oramysql.dll</code> dynamic link library (DLL) for Windows. The driver is also packaged as part of the Oracle Instant Client <code>Basic</code> and <code>Basic Lite</code> packages for download from OTN. See <code><a href="http://www.oracle.com/technetwork/topics/linuxsoft-082809.html">http://www.oracle.com/technetwork/topics/linuxsoft-082809.html</a></code> and <code><a href="http://www.oracle.com/technetwork/topics/winsoft-085727.html">http://www.oracle.com/technetwork/topics/winsoft-085727.html</a></code>.</p>
<p>The driver must be installed in the same directory as the Oracle Client Shared Library, that is, <code>libclntsh.so</code> for Linux and <code>oci.dll</code> for Windows. Typically, you must set the operating system environment variable (<code>LD_LIBRARY_PATH</code> on Linux or <code>PATH</code> on Windows) to include this installation directory.</p>
<p>For <code>ORACLE_HOME</code> installations, the driver library is installed in the <code>$ORACLE_HOME/lib</code> directory for Linux and the <code>%ORACLE_HOME%\bin</code> directory for Windows. For Instant Client ZIP files, the library is in the <code>instantclient_12_1</code> directory. For Instant Client RPM installations, the library is in the <code>/usr/lib/oracle/12.1/client/lib</code> or <code>/usr/lib/oracle/12.1/client64/lib</code> directory on 32-bit and 64-bit Linux platforms, respectively.</p>
</div>
<!-- class="sect1" -->
<a id="BGBDFHED"></a>
<div id="DRDAA29195" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref96"></a>Overview of Migration with MySQL Client Library Driver for Oracle</h2>
<p>Migrating a C-based MySQL application to Oracle Database involves the following steps:</p>
<ol>
<li>
<p><span class="bold">Confirm that the application runs against MySQL Database.</span></p>
<p>This ensures that the migration process starts at a known baseline of functionality.</p>
</li>
<li>
<p><span class="bold">Replace the</span> <code><span class="codeinlinebold">libmysqlclient</span></code> <span class="bold">library with the</span> <code><span class="codeinlinebold">liboramysql</span></code> <span class="bold">library</span>.</p>
<p>The application must be relinked to use the <code>liboramysql</code> library instead of the <code>libmysqlclient</code> library.</p>
</li>
<li>
<p><span class="bold">Migrate the application schema to Oracle Database.</span></p>
<p>The schema must be migrated to use Oracle DDL and types. Oracle SQL Developer assists in this process.</p>
<p>See <a class="olink RPTUG41514" href="../RPTUG/migration.htm#RPTUG41514"><span class="italic">Oracle SQL Developer User&#39;s Guide</span></a> for further details.</p>
</li>
<li>
<p><span class="bold">Review all SQL statements used by the application.</span></p>
<p>If necessary, change the SQL statements of the application to use Oracle syntax, or implement a SQL Translator to automatically perform the conversion at application run time. Rewrite any logic that depends on MySQL features that are not supported by Oracle Database.</p>
<p>See <a href="sqltran.htm#BABBJJBE">Chapter 4, &#34;SQL Translation of JDBC and ODBC Applications&#34;</a>.</p>
</li>
<li>
<p><span class="bold">Update the connection string of the application to connect to Oracle Database.</span></p>
<p>Use Oracle Easy Connect syntax or a <code>tnsnames.ora</code> connect identifier in the <code><span class="codeinlineitalic">host</span></code> parameter of the connection call.</p>
</li>
<li>
<p><span class="bold">Test the application with Oracle Database.</span></p>
<p>Verify the application against Oracle Database.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BGBJAECC"></a>
<div id="DRDAA29196" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="sthref97"></a>Using MySQL Client Library Driver for Oracle</h2>
<p>The <code>liboramysql</code> API is compatible with MySQL Commercial Connector/C 6.0. MySQL Driver for Oracle Database, liboramysql, translates MySQL API calls to Oracle Call Interface (OCI) calls, and between Oracle and MySQL data types.</p>
<p>Existing MySQL-based applications may be relinked to use the <code>liboramysql</code> driver, making Oracle Database the new data source. Note that the <code>liboramysql</code> driver supports connections only to Oracle Database. Simultaneous connections to both MySQL Database and Oracle Database in the same application are not possible.</p>
<p>See <a href="mysql_api_ref.htm#CHEGHBHC">Chapter 7, &#34;API Reference for Oracle MySQL Client Library Driver&#34;</a> for details on data type mapping and API compatibility. Additional information may also be found in <a class="olink RPTUG41461" href="../RPTUG/intro.htm#RPTUG41461"><span class="italic">Oracle SQL Developer User&#39;s Guide</span></a>.</p>
<p>The <code>liboramysql</code> driver does not translate SQL statements. You must rewrite the statements that are not valid for Oracle Database. You can do this directly in the application, or by using a SQL Translator. The application schema and data must also be migrated separately. Oracle SQL Developer automates this process.</p>
<p>Whenever cross-version OCI connectivity exists for older versions of Oracle Database, you can use the <code>liboramysql</code> driver to connect to these older versions.</p>
<p>The following sections discusses these topics:</p>
<ul>
<li>
<p><a href="#CHDJBEHH">Relinking the Application with the liboramysql Driver</a></p>
</li>
<li>
<p><a href="#CHDJJDHC">Connecting to Oracle Database</a></p>
</li>
<li>
<p><a href="#CHDIBIFA">Supported Platforms</a></p>
</li>
<li>
<p><a href="#CHDFHFFI">Error Handling</a></p>
</li>
<li>
<p><a href="#CHDEDDDG">Globalization</a></p>
</li>
<li>
<p><a href="#CHDHEHEJ">Expected Differences</a></p>
</li>
</ul>
<a id="CHDJBEHH"></a>
<div id="DRDAA29197" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Relinking the Application with the liboramysql Driver</h3>
<p>The fundamental step of using the <code>liboramysql</code> library is to relink the application to use the new library. The <code>liboramysql</code> library is compatible with the <code>libmysqlclient.so</code> library from MySQL Commercial Connector/C 6.0.2 package, so you must build and verify version-sensitive applications with MySQL Commercial Connector/C 6.0.2 before migrating to Oracle Database.</p>
<p>The installation scripts of public software compiled from source code typically expect MySQL components to follow a predefined system directory structure. You can use the <code>setuporamysql.sh</code> script in the <code>demo</code> directory of Instant Client SDK to achieve this.</p>
<p>Depending on the application, you can use one or more of the following ways to relink the application with the <code>liboramysql</code> library:</p>
<ul>
<li>
<p><span class="bold">Build directly with the</span> <code><span class="codeinlinebold">liboramysql</span></code> <span class="bold">library.</span></p>
<p>You can update your build scripts to use the <code>liboramysql</code> library and build custom applications directly with this Oracle library.</p>
</li>
<li>
<p><span class="bold">Use the</span> <code><span class="codeinlinebold">liboramysql</span></code> <span class="bold">library to emulate a MySQL Commercial Connector/C directory</span></p>
<p>The <code>setuporamysql.sh</code> library in the Instant Client SDK shows how a directory structure emulating a MySQL Commercial Connector/C installation can be created. You may build applications using this emulated directory.</p>
</li>
<li>
<p><span class="bold">Use the</span> <code><span class="codeinlinebold">LD_PRELOAD</span></code> <span class="bold">environment variable</span>.</p>
<p>Preconfigured programs may be able to use the <code>LD_PRELOAD</code> environment variable to link with the <code>liboramysql</code> library. However, changing the value of this environment variable may not work if the program uses the <code>dlopen()</code> method.</p>
</li>
<li>
<p><span class="bold">Duplicate the</span> <code><span class="codeinlinebold">liboramysql</span></code> <span class="bold">library.</span></p>
<p>Perform the following steps to rename the <code>liboramysql</code> library to the MySQL client library name used by the application:</p>
<ol>
<li>
<p>Use the <code>ldd</code> command to identify the MySQL library with which the application is linked:</p>
<pre>$ ldd yourprogram
...
libmysqlclient.so.16 =&gt; /usr/lib/libmysqlclient.so.16 (0x00007f9004e7f000)
...
</pre></li>
<li>
<p>Create the following symbolic link as the Oracle software owner user:</p>
<pre>$ ln -s $ORACLE_HOME/lib/liboramysql12.so $ORACLE_HOME/lib/libmysqlclient.so.16
</pre></li>
<li>
<p>Add <code>$ORACLE_HOME/lib</code> to the <code>LD_LIBRARY_PATH</code> environment variable for any application that formerly used the <code>libmysqlclient</code> library:</p>
<pre>$ export LD_LIBRARY_PATH=$ORACLE_HOME/lib
</pre></li>
</ol>
</li>
<li>
<p><span class="bold">Replace the system MySQL client library.</span></p>
<p>Rename the target system MySQL client library and link the new library in its place. Because this option affects every application on the system that uses MySQL, and should be done only if absolutely necessary.</p>
<pre># mv /usr/lib64/libmysqlclient.so.16 /usr/lib64/libmysqlclient.so.16.backup
# ln -s $ORACLE_HOME/lib/liboramysql12.so /usr/lib64/libmysqlclient.so.16
</pre></li>
</ul>
<p>If MySQL applications are not rebuilt from the source code, then you must first link the applications against the <code>libmysqlclient.so</code> library from MySQL Commercial Connector/C 6.0.2 package. This ensures binary compatibility with the data structures in the <code>liboramysql</code> library.</p>
</div>
<!-- class="sect2" -->
<a id="CHDJJDHC"></a>
<div id="DRDAA29198" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref98"></a>Connecting to Oracle Database</h3>
<p>To connect to Oracle Database with the <code>liboramysql</code> library, use Oracle Easy Connect syntax or a <code>tnsnames.ora</code> connect identifier in the <code><span class="codeinlineitalic">host</span></code> parameter of the connection call:</p>
<pre>mysql_real_connect(c, &#34;localhost/pdborcl&#34;, &#34;myun&#34;, &#34;mypw&#34;, NULL, 0, NULL, 0);
</pre></div>
<!-- class="sect2" -->
<a id="CHDIBIFA"></a>
<div id="DRDAA29199" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref99"></a>Supported Platforms</h3>
<p>MySQL Client Library Driver for Oracle is available on platforms that support the Oracle Instant Client.</p>
<p>See the list of supported platforms on the Oracle Support Certification site: <code><a href="https://support.oracle.com">https://support.oracle.com</a></code></p>
</div>
<!-- class="sect2" -->
<a id="CHDFHFFI"></a>
<div id="DRDAA29200" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref100"></a>Error Handling</h3>
<p>All errors generated by OCI client code or the Oracle server are passed to the application when either the <code>mysql_errno()</code> method or the <code>mysql_error()</code> method is invoked after an error.</p>
</div>
<!-- class="sect2" -->
<a id="CHDEDDDG"></a>
<div id="DRDAA29201" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref101"></a>Globalization</h3>
<p>The date format expected by the application may be set using <code>NLS_DATE_FORMAT</code> environment variable of Oracle Database, or changed with the equivalent <code>ALTER SESSION</code> command after connecting. The <code>NLS_DATE_FORMAT</code> environment variable is only used if <code>NLS_LANG</code> is also set in the environment.</p>
</div>
<!-- class="sect2" -->
<a id="CHDHEHEJ"></a>
<div id="DRDAA29202" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref102"></a>Expected Differences</h3>
<p>Some APIs in the <code>liboramysql</code> library necessarily return different results because of the underlying differences between MySQL Database and Oracle Database. Existing applications that use these APIs may require logic changes. For details of these differences, see <a href="mysql_api_ref.htm#CHEGHBHC">Chapter 7, &#34;API Reference for Oracle MySQL Client Library Driver&#34;</a>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment485">
<tr>
<td class="cellalignment492">
<table class="cellalignment490">
<tr>
<td class="cellalignment489"><a href="sql_transl_ex.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment489"><a href="mysql_api_ref.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment494">
<table class="cellalignment488">
<tr>
<td class="cellalignment489"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment489"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment489"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment489"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment489"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment489"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>