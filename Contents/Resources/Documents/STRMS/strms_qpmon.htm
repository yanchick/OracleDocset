<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-104475"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Monitoring%20Oracle%20Streams%20Queues%20and%20Propagations"></a><title>Monitoring Oracle Streams Queues and Propagations</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1032"/>
<meta name="dcterms.created" content="2014-12-23T13:28:7Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Streams Concepts and Administration"/>
<meta name="dcterms.identifier" content="E53116-02"/>
<meta name="dcterms.isVersionOf" content="STRMS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="strms_glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="strms_cpmon.htm" title="Previous" type="text/html"/>
<link rel="Next" href="strms_apmon.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E53116-02.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">35/57</span> <!-- End Header -->
<div id="STRMS906" class="chapter"><a id="CFFJDFFI"></a> <a id="CFFFHIAD"></a>
<h1 class="chapter"><span class="secnum">25</span> Monitoring Oracle Streams Queues and Propagations</h1>
<p><a id="sthref1112"></a><a id="sthref1113"></a><a id="sthref1114"></a><a id="sthref1115"></a>The following topics describe monitoring Oracle Streams <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a>s and <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>s:</p>
<ul>
<li>
<p><a href="#i1006780">Monitoring Queues and Messaging</a></p>
</li>
<li>
<p><a href="#i1013925">Monitoring Buffered Queues</a></p>
</li>
<li>
<p><a href="#i1006969">Monitoring Oracle Streams Propagations and Propagation Jobs</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1"><span class="bold">Note</span>:</p>
The Oracle Streams tool in Oracle Enterprise Manager Cloud Control is also an excellent way to monitor an Oracle Streams environment. See the online help for the Oracle Streams tool for more information.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_prop.htm#g1016256">Chapter 3, &#34;Oracle Streams Staging and Propagation&#34;</a></p>
</li>
<li>
<p><a href="strms_mprop.htm#g1025168">Chapter 16, &#34;Managing Staging and Propagation&#34;</a></p>
</li>
<li>
<p><a class="olink REFRN" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for information about the data dictionary views described in this chapter</p>
</li>
</ul>
</div>
<a id="i1006780"></a>
<div id="STRMS907" class="sect1"><a id="CFFJHIDC"></a>
<h2 class="sect1">Monitoring Queues and Messaging<a id="sthref1116"></a><a id="sthref1117"></a></h2>
<p>The following topics describe displaying information about <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a>s and messaging:</p>
<ul>
<li>
<p><a href="#i1006815">Displaying the ANYDATA Queues in a Database</a></p>
</li>
<li>
<p><a href="#i1012359">Viewing the Messaging Clients in a Database</a></p>
</li>
<li>
<p><a href="#i1012484">Viewing Message Notifications</a></p>
</li>
<li>
<p><a href="#i1012364">Determining the Consumer of Each Message in a Persistent Queue</a></p>
</li>
<li>
<p><a href="#i1006894">Viewing the Contents of Messages in a Persistent Queue</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_prop.htm#g1016256">Chapter 3, &#34;Oracle Streams Staging and Propagation&#34;</a></p>
</li>
<li>
<p><a href="strms_mprop.htm#g1025168">Chapter 16, &#34;Managing Staging and Propagation&#34;</a></p>
</li>
</ul>
</div>
<a id="i1006815"></a>
<div id="STRMS908" class="sect2">
<h3 class="sect2">Displaying the ANYDATA Queues in a Database<a id="sthref1118"></a><a id="sthref1119"></a></h3>
<p>To display all of the <code dir="ltr">ANYDATA</code> queues in a database, run the following query:</p>
<pre dir="ltr">COLUMN OWNER HEADING &#39;Owner&#39; FORMAT A10
COLUMN NAME HEADING &#39;Queue Name&#39; FORMAT A28
COLUMN QUEUE_TABLE HEADING &#39;Queue Table&#39; FORMAT A22
COLUMN USER_COMMENT HEADING &#39;Comment&#39; FORMAT A15

SELECT q.OWNER, q.NAME, t.QUEUE_TABLE, q.USER_COMMENT
  FROM DBA_QUEUES q, DBA_QUEUE_TABLES t
  WHERE t.OBJECT_TYPE = &#39;SYS.ANYDATA&#39; AND
        q.QUEUE_TABLE = t.QUEUE_TABLE AND
        q.OWNER       = t.OWNER;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Owner      Queue Name                   Queue Table            Comment
---------- ---------------------------- ---------------------- ---------------
STRMADMIN  DB$APPQ                      DB$APPQT
STRMADMIN  AQ$_DB$APPQT_E               DB$APPQT               exception queue
STRMADMIN  DA$CAPQ                      DA$CAPQT
STRMADMIN  AQ$_DA$CAPQT_E               DA$CAPQT               exception queue
IX         STREAMS_QUEUE                STREAMS_QUEUE_TABLE
IX         AQ$_STREAMS_QUEUE_TABLE_E    STREAMS_QUEUE_TABLE    exception queue
</pre>
<p>An <a href="strms_glossary.htm#CHDCIBDJ"><span class="xrefglossterm">exception queue</span></a> is created automatically when you create an <code dir="ltr">ANYDATA</code> queue.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_mprop.htm#i1006123">&#34;Managing Queues&#34;</a></div>
</div>
<!-- class="sect2" -->
<a id="i1012359"></a>
<div id="STRMS917" class="sect2">
<h3 class="sect2">Viewing the Messaging Clients in a Database</h3>
<p>You can view the <a href="strms_glossary.htm#CHDDGHHB"><span class="xrefglossterm">messaging client</span></a>s in a database by querying the <code dir="ltr">DBA_STREAMS_MESSAGE_CONSUMERS</code> data dictionary view. The query in this section displays the following information about each messaging client:</p>
<ul>
<li>
<p>The name of the messaging client</p>
</li>
<li>
<p>The <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> used by the messaging client</p>
</li>
<li>
<p>The <a href="strms_glossary.htm#CHDEEDIJ"><span class="xrefglossterm">positive rule set</span></a> used by the messaging client</p>
</li>
<li>
<p>The <a href="strms_glossary.htm#CHDBHJHI"><span class="xrefglossterm">negative rule set</span></a> used by the messaging client</p>
</li>
</ul>
<p>Run the following query to view this information about messaging clients:</p>
<pre dir="ltr">COLUMN STREAMS_NAME HEADING &#39;Messaging|Client&#39; FORMAT A25
COLUMN QUEUE_OWNER HEADING &#39;Queue|Owner&#39; FORMAT A10
COLUMN QUEUE_NAME HEADING &#39;Queue Name&#39; FORMAT A18
COLUMN RULE_SET_NAME HEADING &#39;Positive|Rule Set&#39; FORMAT A11
COLUMN NEGATIVE_RULE_SET_NAME HEADING &#39;Negative|Rule Set&#39; FORMAT A11

SELECT STREAMS_NAME, 
       QUEUE_OWNER, 
       QUEUE_NAME, 
       RULE_SET_NAME, 
       NEGATIVE_RULE_SET_NAME 
  FROM DBA_STREAMS_MESSAGE_CONSUMERS;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Messaging                 Queue                         Positive    Negative
Client                    Owner      Queue Name         Rule Set    Rule Set
------------------------- ---------- ------------------ ----------- -----------
SCHEDULER_PICKUP          SYS        SCHEDULER$_JOBQ    RULESET$_8
SCHEDULER_COORDINATOR     SYS        SCHEDULER$_JOBQ    RULESET$_4
HR                        STRMADMIN  STREAMS_QUEUE      RULESET$_15
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_prop.htm#g1016256">Chapter 3, &#34;Oracle Streams Staging and Propagation&#34;</a> for more information about messaging clients</div>
</div>
<!-- class="sect2" -->
<a id="i1012484"></a>
<div id="STRMS918" class="sect2">
<h3 class="sect2">Viewing Message Notifications</h3>
<p>You can configure a <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a> notification to send a notification when a message that can be dequeued by a <a href="strms_glossary.htm#CHDDGHHB"><span class="xrefglossterm">messaging client</span></a> is enqueued into a <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a>. The notification can be sent to an e-mail address, to an HTTP URL, or to a PL/SQL procedure. Run the following query to view the message notifications configured in a database:</p>
<pre dir="ltr">COLUMN STREAMS_NAME HEADING &#39;Messaging|Client&#39; FORMAT A10
COLUMN QUEUE_OWNER HEADING &#39;Queue|Owner&#39; FORMAT A5
COLUMN QUEUE_NAME HEADING &#39;Queue Name&#39; FORMAT A20
COLUMN NOTIFICATION_TYPE HEADING &#39;Notification|Type&#39; FORMAT A15
COLUMN NOTIFICATION_ACTION HEADING &#39;Notification|Action&#39; FORMAT A25

SELECT STREAMS_NAME, 
       QUEUE_OWNER, 
       QUEUE_NAME, 
       NOTIFICATION_TYPE, 
       NOTIFICATION_ACTION 
  FROM DBA_STREAMS_MESSAGE_CONSUMERS
  WHERE NOTIFICATION_TYPE IS NOT NULL;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Messaging  Queue                      Notification    Notification
Client     Owner Queue Name           Type            Action
---------- ----- -------------------- --------------- -------------------------
OE         OE    NOTIFICATION_QUEUE   MAIL            mary.smith@example.com
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADQUE" href="../ADQUE/toc.htm"><span class="italic">Oracle Database Advanced Queuing User&#39;s Guide</span></a></div>
</div>
<!-- class="sect2" -->
<a id="i1012364"></a>
<div id="STRMS919" class="sect2">
<h3 class="sect2">Determining the Consumer of Each Message in a Persistent Queue<a id="sthref1120"></a></h3>
<p>To determine the consumer for each <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a> in a <a href="strms_glossary.htm#CBAEIBGJ"><span class="xrefglossterm">persistent queue</span></a>, query <code dir="ltr">AQ$</code><code dir="ltr"><span class="codeinlineitalic">queue_table_name</span></code> in the queue owner&#39;s schema, where <code dir="ltr"><span class="codeinlineitalic">queue_table_name</span></code> is the name of the <a href="strms_glossary.htm#CHDFFJJB"><span class="xrefglossterm">queue table</span></a>. For example, to find the consumers of the messages in the <code dir="ltr">oe_q_table_any</code> queue table, run the following query:</p>
<pre dir="ltr">COLUMN MSG_ID HEADING &#39;Message ID&#39; FORMAT 9999
COLUMN MSG_STATE HEADING &#39;Message State&#39; FORMAT A13
COLUMN CONSUMER_NAME HEADING &#39;Consumer&#39; FORMAT A30

SELECT MSG_ID, MSG_STATE, CONSUMER_NAME FROM AQ$OE_Q_TABLE_ANY;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Message ID                       Message State Consumer
-------------------------------- ------------- ------------------------------
B79AC412AE6E08CAE034080020AE3E0A PROCESSED     OE
B79AC412AE6F08CAE034080020AE3E0A PROCESSED     OE
B79AC412AE7008CAE034080020AE3E0A PROCESSED     OE
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
This query lists only messages in a persistent queue, not <a href="strms_glossary.htm#CHDCHEJI"><span class="xrefglossterm">captured LCR</span></a>s or other messages in a <a href="strms_glossary.htm#CHDFJFED"><span class="xrefglossterm">buffered queue</span></a>.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADQUE025" href="../ADQUE/aq_demo.htm#ADQUE025"><span class="italic">Oracle Database Advanced Queuing User&#39;s Guide</span></a> for an example that enqueues messages into an <code dir="ltr">ANYDATA</code> queue</div>
</div>
<!-- class="sect2" -->
<a id="i1006894"></a>
<div id="STRMS920" class="sect2">
<h3 class="sect2">Viewing the Contents of Messages in a Persistent Queue<a id="sthref1121"></a></h3>
<p>In an <code dir="ltr">ANYDATA</code> queue, to view the contents of a payload that is encapsulated within an <code dir="ltr">ANYDATA</code> payload, you query the <a href="strms_glossary.htm#CHDFFJJB"><span class="xrefglossterm">queue table</span></a> using the <code dir="ltr">Access</code><code dir="ltr"><span class="codeinlineitalic">data_type</span></code> static functions of the <code dir="ltr">ANYDATA</code> type, where <code dir="ltr"><span class="codeinlineitalic">data_type</span></code> is the type of payload to view.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADQUE2100" href="../ADQUE/mg_trble.htm#ADQUE2100"><span class="italic">Oracle Database Advanced Queuing User&#39;s Guide</span></a> for an example that enqueues the <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s shown in the queries in this section into an <code dir="ltr">ANYDATA</code> queue</div>
<p>For example, to view the contents of payload of type <code dir="ltr">NUMBER</code> in a <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> with a queue table named <code dir="ltr">oe_queue_table</code>, run the following query as the queue owner:</p>
<pre dir="ltr">SELECT qt.user_data.AccessNumber() &#34;Numbers in Queue&#34; 
  FROM strmadmin.oe_q_table_any qt;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Numbers in Queue
----------------
              16
</pre>
<p>Similarly, to view the contents of a payload of type <code dir="ltr">VARCHAR2</code> in a queue with a queue table named <code dir="ltr">oe_q_table_any</code>, run the following query:</p>
<pre dir="ltr">SELECT qt.user_data.AccessVarchar2() &#34;Varchar2s in Queue&#34;
   FROM strmadmin.oe_q_table_any qt;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Varchar2s in Queue
--------------------------------------------------------------------------------
Chemicals - SW
</pre>
<p>To view the contents of a user-defined data type, you query the queue table using a custom function that you create. For example, to view the contents of a payload of <code dir="ltr">oe.cust_address_typ</code>, create a function similar to the following:</p>
<pre dir="ltr">CREATE OR REPLACE FUNCTION oe.view_cust_address_typ(
in_any IN ANYDATA) 
RETURN oe.cust_address_typ
IS
  address   oe.cust_address_typ;
  num_var   NUMBER;
BEGIN
  IF (in_any.GetTypeName() = &#39;OE.CUST_ADDRESS_TYP&#39;) THEN
    num_var := in_any.GetObject(address);
    RETURN address;
  ELSE RETURN NULL;
  END IF;
END;
/

GRANT EXECUTE ON oe.view_cust_address_typ TO strmadmin;

GRANT EXECUTE ON oe.cust_address_typ TO strmadmin;
</pre>
<p>Query the queue table using the function, as in the following example:</p>
<pre dir="ltr">SELECT oe.view_cust_address_typ(qt.user_data) &#34;Customer Addresses&#34;
  FROM strmadmin.oe_q_table_any qt 
  WHERE qt.user_data.GetTypeName() = &#39;OE.CUST_ADDRESS_TYP&#39;;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Customer Addresses(STREET_ADDRESS, POSTAL_CODE, CITY, STATE_PROVINCE, COUNTRY_ID
--------------------------------------------------------------------------------
CUST_ADDRESS_TYP(&#39;1646 Brazil Blvd&#39;, &#39;361168&#39;, &#39;Chennai&#39;, &#39;Tam&#39;, &#39;IN&#39;)
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1013925"></a>
<div id="STRMS163" class="sect1">
<h2 class="sect1">Monitoring Buffered Queues<a id="sthref1122"></a><a id="sthref1123"></a></h2>
<p>A <a href="strms_glossary.htm#CHDFJFED"><span class="xrefglossterm">buffered queue</span></a> includes the following storage areas:</p>
<ul>
<li>
<p>System Global Area (SGA) memory associated with a <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a></p>
</li>
<li>
<p>Part of the <a href="strms_glossary.htm#CHDFFJJB"><span class="xrefglossterm">queue table</span></a> for a queue that stores <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s that have spilled from memory</p>
</li>
</ul>
<p>Buffered queues are stored in the <a href="strms_glossary.htm#CHDHGDCA"><span class="xrefglossterm">Oracle Streams pool</span></a>, and the Oracle Streams pool is a portion of memory in the SGA that is used by Oracle Streams. In an Oracle Streams environment, LCRs captured by a <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a> always are stored in the buffered queue of an <code dir="ltr">ANYDATA</code> queue. Users and application can also enqueue messages into buffered queues, and these buffered queues be part of <code dir="ltr">ANYDATA</code> queues or part of <a href="strms_glossary.htm#CHDBGAAH"><span class="xrefglossterm">typed queue</span></a>s.</p>
<p>Buffered queues enable Oracle databases to optimize messages by storing them in the SGA instead of always storing them in a queue table. Captured LCRs always are stored in buffered queues, but other types of messages can be stored in buffered queues or persistently in queue tables. Messages in a buffered queue can spill from memory if they have been staged in the buffered queue for a period of time without being dequeued, or if there is not enough space in memory to hold all of the messages. Messages that spill from memory are stored in the appropriate queue table.</p>
<p>The following sections describe queries that monitor buffered queues:</p>
<ul>
<li>
<p><a href="#i1013971">Determining the Number of Messages in Each Buffered Queue</a></p>
</li>
<li>
<p><a href="#i1018476">Viewing the Capture Processes for the LCRs in Each Buffered Queue</a></p>
</li>
<li>
<p><a href="#i1019775">Displaying Information About Propagations that Send Buffered Messages</a></p>
</li>
<li>
<p><a href="#i1019776">Displaying the Number of Messages and Bytes Sent By Propagations</a></p>
</li>
<li>
<p><a href="#i1019777">Displaying Performance Statistics for Propagations that Send Buffered Messages</a></p>
</li>
<li>
<p><a href="#i1013999">Viewing the Propagations Dequeuing Messages from Each Buffered Queue</a></p>
</li>
<li>
<p><a href="#i1019778">Displaying Performance Statistics for Propagations That Receive Buffered Messages</a></p>
</li>
<li>
<p><a href="#i1019487">Viewing the Apply Processes Dequeuing Messages from Each Buffered Queue</a></p>
</li>
</ul>
<a id="i1013971"></a>
<div id="STRMS921" class="sect2">
<h3 class="sect2">Determining the Number of Messages in Each Buffered Queue<a id="sthref1124"></a></h3>
<p>The <code dir="ltr">V$BUFFERED_QUEUES</code> dynamic performance view contains information about the number of <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s in a <a href="strms_glossary.htm#CHDFJFED"><span class="xrefglossterm">buffered queue</span></a>. The messages can be <a href="strms_glossary.htm#CHDCHEJI"><span class="xrefglossterm">captured LCR</span></a>s, <a href="strms_glossary.htm#CBABHDGA"><span class="xrefglossterm">buffered LCR</span></a>s, or <a href="strms_glossary.htm#CBAGGFJH"><span class="xrefglossterm">buffered user message</span></a>s.</p>
<p>You can determine the following information about each buffered queue in a database by running the query in this section:</p>
<ul>
<li>
<p>The <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> owner</p>
</li>
<li>
<p>The queue name</p>
</li>
<li>
<p>The number of messages currently in memory</p>
</li>
<li>
<p>The number of messages that have spilled from memory into the <a href="strms_glossary.htm#CHDFFJJB"><span class="xrefglossterm">queue table</span></a></p>
</li>
<li>
<p>The total number of messages in the buffered queue, which includes the messages in memory and the messages spilled to the queue table</p>
</li>
</ul>
<p>To display this information, run the following query:</p>
<pre dir="ltr">COLUMN QUEUE_SCHEMA HEADING &#39;Queue Owner&#39; FORMAT A15
COLUMN QUEUE_NAME HEADING &#39;Queue Name&#39; FORMAT A15
COLUMN MEM_MSG HEADING &#39;Messages|in Memory&#39; FORMAT 99999999
COLUMN SPILL_MSGS HEADING &#39;Messages|Spilled&#39; FORMAT 99999999
COLUMN NUM_MSGS HEADING &#39;Total Messages|in Buffered Queue&#39; FORMAT 99999999

SELECT QUEUE_SCHEMA, 
       QUEUE_NAME, 
       (NUM_MSGS - SPILL_MSGS) MEM_MSG, 
       SPILL_MSGS, 
       NUM_MSGS
  FROM V$BUFFERED_QUEUES;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                                     Messages      Messages      Total Messages
Queue Owner     Queue Name          in Memory       Spilled   in Buffered Queue
--------------- --------------- ------------- ------------- -------------------
STRMADMIN       STREAMS_QUEUE             534            21                 555
</pre></div>
<!-- class="sect2" -->
<a id="i1018476"></a>
<div id="STRMS922" class="sect2">
<h3 class="sect2">Viewing the Capture Processes for the LCRs in Each Buffered Queue<a id="sthref1125"></a><a id="sthref1126"></a></h3>
<p>A <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a> is a <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> publisher that enqueues <a href="strms_glossary.htm#CHDCHEJI"><span class="xrefglossterm">captured LCR</span></a>s into a <a href="strms_glossary.htm#CHDFJFED"><span class="xrefglossterm">buffered queue</span></a>. These LCRs can be propagated to other queues subsequently. By querying the <code dir="ltr">V$BUFFERED_PUBLISHERS</code> dynamic performance view, you can display each capture process that captured the LCRs in the buffered queue. These LCRs might have been captured at the local database, or they might have been captured at a remote database and propagated to the queue specified in the query.</p>
<p>The query in this section assumes that the buffered queues in the local database only store captured LCRs, not <a href="strms_glossary.htm#CBABHDGA"><span class="xrefglossterm">buffered LCR</span></a>s or <a href="strms_glossary.htm#CBAGGFJH"><span class="xrefglossterm">buffered user message</span></a>s. The query displays the following information about each capture process:</p>
<ul>
<li>
<p>The name of a capture process that captured the LCRs in the buffered queue</p>
</li>
<li>
<p>If the capture process is running on a remote database, and the captured LCRs have been propagated to the local queue, then the name of the queue and database from which the captured LCRs were last propagated</p>
</li>
<li>
<p>The name of the local queue staging the captured LCRs</p>
</li>
<li>
<p>The total number of LCRs captured by a capture process that have been staged in the buffered queue since the database instance was last started</p>
</li>
<li>
<p>The message number of the LCR last enqueued into the buffered queue from the sender</p>
</li>
<li>
<p>The percentage of the Streams pool used at the capture process database</p>
</li>
<li>
<p>The state of the publisher. The capture process is the publisher, and the following states are possible:</p>
<ul>
<li>
<p><code dir="ltr">PUBLISHING</code> <code dir="ltr">MESSAGES</code></p>
</li>
<li>
<p><code dir="ltr">IN</code> <code dir="ltr">FLOW</code> <code dir="ltr">CONTROL:</code> <code dir="ltr">TOO</code> <code dir="ltr">MANY</code> <code dir="ltr">UNBROWSED</code> <code dir="ltr">MESSAGES</code></p>
</li>
<li>
<p><code dir="ltr">IN</code> <code dir="ltr">FLOW</code> <code dir="ltr">CONTROL:</code> <code dir="ltr">OVERSPILLED</code> <code dir="ltr">MESSAGES</code></p>
</li>
<li>
<p><code dir="ltr">IN</code> <code dir="ltr">FLOW</code> <code dir="ltr">CONTROL:</code> <code dir="ltr">INSUFFICIENT</code> <code dir="ltr">MEMORY</code> <code dir="ltr">AND</code> <code dir="ltr">UNBROWSED</code> <code dir="ltr">MESSAGES</code></p>
</li>
</ul>
</li>
</ul>
<p>To display this information, run the following query:</p>
<pre dir="ltr">COLUMN SENDER_NAME HEADING &#39;Capture|Process&#39; FORMAT A10
COLUMN SENDER_ADDRESS HEADING &#39;Sender Queue&#39; FORMAT A15
COLUMN QUEUE_NAME HEADING &#39;Queue Name&#39; FORMAT A10
COLUMN CNUM_MSGS HEADING &#39;Number|of LCRs|Enqueued&#39; FORMAT 99999999
COLUMN LAST_ENQUEUED_MSG HEADING &#39;Last|Enqueued|LCR&#39; FORMAT 9999999999
COLUMN MEMORY_USAGE HEADING &#39;Percent|Streams|Pool|Used&#39; FORMAT 999
COLUMN PUBLISHER_STATE HEADING &#39;Publisher|State&#39; FORMAT A10
 
SELECT SENDER_NAME,
       SENDER_ADDRESS,
       QUEUE_NAME,        
       CNUM_MSGS, 
       LAST_ENQUEUED_MSG,
       MEMORY_USAGE,
       PUBLISHER_STATE
  FROM V$BUFFERED_PUBLISHERS;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                                                            Percent
                                         Number        Last Streams
Capture                                 of LCRs    Enqueued    Pool Publisher
Process    Sender Queue    Queue Name  Enqueued         LCR    Used State
---------- --------------- ---------- --------- ----------- ------- ----------
DB1$CAP                    DB1$CAPQ        3670     1002253      21 PUBLISHING
                                                                     MESSAGES
 
DB2$CAP    &#34;STRMADMIN&#34;.&#34;DB DB2$APPQ        3427      981066      21 PUBLISHING
           2$CAPQ&#34;@DB2.EXA                                           MESSAGES
           MPLE.COM
</pre>
<p>This output shows following:</p>
<ul>
<li>
<p><code dir="ltr">3670</code> LCRs from the local <code dir="ltr">db1$cap</code> capture process were enqueued into the local queue named <code dir="ltr">db1$capq</code>. The capture process is local because the <code dir="ltr">Sender</code> <code dir="ltr">Queue</code> column is <code dir="ltr">NULL</code>. The message number of the last enqueued LCR from this capture process was <code dir="ltr">1002253</code>. 21% of the Streams pool is used at the capture process database, and the capture process is publishing messages normally.</p>
</li>
<li>
<p><code dir="ltr">3427</code> LCRs from the <code dir="ltr">db2$cap</code> capture process running on a remote database were propagated from a queue named <code dir="ltr">db2$capq</code> on database <code dir="ltr">db2.example.com</code> to the local queue named <code dir="ltr">db2$appq</code>. The message number of the last enqueued LCR from this sender was <code dir="ltr">961066</code>. 21% of the Streams pool is used at the remote capture process database, and the capture process is publishing messages normally.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="i1019775"></a>
<div id="STRMS923" class="sect2">
<h3 class="sect2">Displaying Information About Propagations that Send Buffered Messages<a id="sthref1127"></a><a id="sthref1128"></a><a id="sthref1129"></a></h3>
<p>The query in this section displays the following information about each <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a> that sends buffered <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s from a <a href="strms_glossary.htm#CHDFJFED"><span class="xrefglossterm">buffered queue</span></a> in the local database:</p>
<ul>
<li>
<p>The name of the propagation</p>
</li>
<li>
<p>The <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> owner</p>
</li>
<li>
<p>The queue name</p>
</li>
<li>
<p>The name of the database link used by the propagation</p>
</li>
<li>
<p>The status of the <a href="strms_glossary.htm#CBADGHAI"><span class="xrefglossterm">propagation schedule</span></a></p>
</li>
</ul>
<p>To display this information, run the following query:</p>
<pre dir="ltr">COLUMN PROPAGATION_NAME HEADING &#39;Propagation&#39; FORMAT A15
COLUMN QUEUE_SCHEMA HEADING &#39;Queue|Owner&#39; FORMAT A10
COLUMN QUEUE_NAME HEADING &#39;Queue|Name&#39; FORMAT A15
COLUMN DBLINK HEADING &#39;Database|Link&#39; FORMAT A10
COLUMN SCHEDULE_STATUS HEADING &#39;Schedule Status&#39; FORMAT A20

SELECT p.PROPAGATION_NAME,
       s.QUEUE_SCHEMA,
       s.QUEUE_NAME,
       s.DBLINK,
       s.SCHEDULE_STATUS
  FROM DBA_PROPAGATION p, V$PROPAGATION_SENDER s
  WHERE p.SOURCE_QUEUE_OWNER      = s.QUEUE_SCHEMA AND
        p.SOURCE_QUEUE_NAME       = s.QUEUE_NAME AND
        p.DESTINATION_QUEUE_OWNER = s.DST_QUEUE_SCHEMA AND
        p.DESTINATION_QUEUE_NAME  = s.DST_QUEUE_NAME;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                Queue      Queue           Database
Propagation     Owner      Name            Link       Schedule Status
--------------- ---------- --------------- ---------- --------------------
PROPAGATION$_6  STRMADMIN  DB1$CAPQ        &#34;STRMADMIN SCHEDULE OPTIMIZED
                                           &#34;.&#34;DB1$APP
                                           Q&#34;@DB2.EXA
                                           MPLE.COM
</pre>
<p>When the <code dir="ltr">SCHEDULE_STATUS</code> column in the <code dir="ltr">V$PROPAGATION_SENDER</code> view shows <code dir="ltr">SCHEDULE</code> <code dir="ltr">OPTIMIZED</code> for a propagation, it means that the propagation is part of a combined capture and apply optimization.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_adcca.htm#BGBJBDHJ">Chapter 12, &#34;Combined Capture and Apply Optimization&#34;</a></div>
</div>
<!-- class="sect2" -->
<a id="i1019776"></a>
<div id="STRMS924" class="sect2">
<h3 class="sect2">Displaying the Number of Messages and Bytes Sent By Propagations<a id="sthref1130"></a><a id="sthref1131"></a><a id="sthref1132"></a></h3>
<p>The query in this section displays the number of <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s and the number of bytes sent by each <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a> that sends buffered messages from a <a href="strms_glossary.htm#CHDFJFED"><span class="xrefglossterm">buffered queue</span></a> in the local database:</p>
<ul>
<li>
<p>The name of the propagation</p>
</li>
<li>
<p>The <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> name</p>
</li>
<li>
<p>The name of the database link used by the propagation</p>
</li>
<li>
<p>The total number of messages sent since the database instance was last started</p>
</li>
<li>
<p>The total number of bytes sent since the database instance was last started</p>
</li>
</ul>
<p>To display this information, run the following query:</p>
<pre dir="ltr">COLUMN PROPAGATION_NAME HEADING &#39;Propagation&#39; FORMAT A15
COLUMN QUEUE_NAME HEADING &#39;Queue|Name&#39; FORMAT A15
COLUMN DBLINK HEADING &#39;Database|Link&#39; FORMAT A20
COLUMN TOTAL_MSGS HEADING &#39;Total|Messages&#39; FORMAT 99999999
COLUMN TOTAL_BYTES HEADING &#39;Total|Bytes&#39; FORMAT 999999999999

SELECT p.PROPAGATION_NAME,
       s.QUEUE_NAME,
       s.DBLINK,
       s.TOTAL_MSGS,
       s.TOTAL_BYTES
  FROM DBA_PROPAGATION p, V$PROPAGATION_SENDER s
  WHERE p.SOURCE_QUEUE_OWNER      = s.QUEUE_SCHEMA AND
        p.SOURCE_QUEUE_NAME       = s.QUEUE_NAME AND
        p.DESTINATION_QUEUE_OWNER = s.DST_QUEUE_SCHEMA AND
        p.DESTINATION_QUEUE_NAME  = s.DST_QUEUE_NAME;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                Queue           Database            Total     Total
Propagation     Name            Link                 Messages     Bytes
--------------- --------------- -------------------- --------- ---------
MULT1_TO_MULT3  STREAMS_QUEUE   MULT3.EXAMPLE.COM           79     71467
MULT1_TO_MULT2  STREAMS_QUEUE   MULT2.EXAMPLE.COM           79     71467
</pre></div>
<!-- class="sect2" -->
<a id="i1019777"></a>
<div id="STRMS925" class="sect2">
<h3 class="sect2">Displaying Performance Statistics for Propagations that Send Buffered Messages<a id="sthref1133"></a><a id="sthref1134"></a><a id="sthref1135"></a></h3>
<p>The query in this section displays the amount of time that a <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a> sending buffered <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s spends performing various tasks. Each propagation sends messages from the <a href="strms_glossary.htm#CHDCGACA"><span class="xrefglossterm">source queue</span></a> to the <a href="strms_glossary.htm#CHDHJHJD"><span class="xrefglossterm">destination queue</span></a>. Specifically, the query displays the following information:</p>
<ul>
<li>
<p>The name of the propagation</p>
</li>
<li>
<p>The <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> name</p>
</li>
<li>
<p>The name of the database link used by the propagation</p>
</li>
<li>
<p>The amount of time spent dequeuing messages from the queue since the database instance was last started, in seconds</p>
</li>
<li>
<p>The amount of time spent pickling messages since the database instance was last started, in seconds. Pickling involves changing a message in memory into a series of bytes that can be sent over a network.</p>
</li>
<li>
<p>The amount of time spent propagating messages since the database instance was last started, in seconds</p>
</li>
</ul>
<p>To display this information, run the following query:</p>
<pre dir="ltr">COLUMN PROPAGATION_NAME HEADING &#39;Propagation&#39; FORMAT A15
COLUMN QUEUE_NAME HEADING &#39;Queue|Name&#39; FORMAT A13
COLUMN DBLINK HEADING &#39;Database|Link&#39; FORMAT A9
COLUMN ELAPSED_DEQUEUE_TIME HEADING &#39;Dequeue|Time&#39; FORMAT 99999999.99
COLUMN ELAPSED_PICKLE_TIME HEADING &#39;Pickle|Time&#39; FORMAT 99999999.99
COLUMN ELAPSED_PROPAGATION_TIME HEADING &#39;Propagation|Time&#39; FORMAT 99999999.99

SELECT p.PROPAGATION_NAME,
       s.QUEUE_NAME,
       s.DBLINK,
       (s.ELAPSED_DEQUEUE_TIME / 100) ELAPSED_DEQUEUE_TIME,
       (s.ELAPSED_PICKLE_TIME / 100) ELAPSED_PICKLE_TIME,
       (s.ELAPSED_PROPAGATION_TIME / 100) ELAPSED_PROPAGATION_TIME
  FROM DBA_PROPAGATION p, V$PROPAGATION_SENDER s
  WHERE p.SOURCE_QUEUE_OWNER      = s.QUEUE_SCHEMA AND
        p.SOURCE_QUEUE_NAME       = s.QUEUE_NAME AND
        p.DESTINATION_QUEUE_OWNER = s.DST_QUEUE_SCHEMA AND
        p.DESTINATION_QUEUE_NAME  = s.DST_QUEUE_NAME;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                Queue         Database       Dequeue       Pickle  Propagation
Propagation     Name          Link              Time         Time         Time
--------------- ------------- --------- ------------ ------------ ------------
MULT1_TO_MULT2  STREAMS_QUEUE MULT2.EXA        30.65        45.10        10.91
                              MPLE.COM
MULT1_TO_MULT3  STREAMS_QUEUE MULT3.EXA        25.36        37.07         8.35
                              MPLE.COM
</pre></div>
<!-- class="sect2" -->
<a id="i1013999"></a>
<div id="STRMS164" class="sect2">
<h3 class="sect2">Viewing the Propagations Dequeuing Messages from Each Buffered Queue<a id="sthref1136"></a><a id="sthref1137"></a><a id="sthref1138"></a><a id="sthref1139"></a></h3>
<p>Propagations are <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> subscribers that can dequeue <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s. By querying the <code dir="ltr">V$BUFFERED_SUBSCRIBERS</code> dynamic performance view, you can display all the <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>s that can dequeue buffered messages.</p>
<p>Apply processes also are queue subscribers. This query joins with the <code dir="ltr">DBA_PROPAGATION</code> and <code dir="ltr">V$BUFFERED_QUEUES</code> views to limit the output to propagations only and to show the propagation name of each propagation.</p>
<p>The query in this section displays the following information about each propagation that can dequeue messages from queues:</p>
<ul>
<li>
<p>The name of the propagation.</p>
</li>
<li>
<p>The owner and name of the queue to which the propagation subscribes</p>
<p>This queue is the <a href="strms_glossary.htm#CHDCGACA"><span class="xrefglossterm">source queue</span></a> for the propagation.</p>
</li>
<li>
<p>The subscriber address</p>
<p>For a propagation, the subscriber address is the propagation&#39;s <a href="strms_glossary.htm#CHDHJHJD"><span class="xrefglossterm">destination queue</span></a> and <a href="strms_glossary.htm#CHDGCAJA"><span class="xrefglossterm">destination database</span></a></p>
</li>
<li>
<p>The time when the propagation last started</p>
</li>
<li>
<p>The cumulative number of messages dequeued by the propagation since the database last started</p>
</li>
<li>
<p>The total number of messages dequeued by the propagation since the propagation last started</p>
</li>
<li>
<p>The message number of the message most recently dequeued by the propagation</p>
</li>
</ul>
<p>To display this information, run the following query:</p>
<pre dir="ltr">COLUMN PROPAGATION_NAME HEADING &#39;Propagation&#39; FORMAT A11
COLUMN QUEUE_SCHEMA HEADING &#39;Queue|Owner&#39; FORMAT A5
COLUMN QUEUE_NAME HEADING &#39;Queue|Name&#39; FORMAT A5
COLUMN SUBSCRIBER_ADDRESS HEADING &#39;Subscriber|Address&#39; FORMAT A15
COLUMN STARTUP_TIME HEADING &#39;Startup|Time&#39; FORMAT A9
COLUMN CNUM_MSGS HEADING &#39;Cumulative|Messages&#39; FORMAT 99999999
COLUMN TOTAL_DEQUEUED_MSG HEADING &#39;Total|Messages&#39; FORMAT 99999999
COLUMN LAST_DEQUEUED_NUM HEADING &#39;Last|Dequeued|Message|Number&#39; FORMAT 99999999
 
SELECT p.PROPAGATION_NAME,
       s.QUEUE_SCHEMA,
       s.QUEUE_NAME,
       s.SUBSCRIBER_ADDRESS,
       s.STARTUP_TIME,
       s.CNUM_MSGS,          
       s.TOTAL_DEQUEUED_MSG,
       s.LAST_DEQUEUED_NUM
FROM DBA_PROPAGATION p, V$BUFFERED_SUBSCRIBERS s
WHERE p.SOURCE_QUEUE_OWNER = s.QUEUE_SCHEMA AND
      p.SOURCE_QUEUE_NAME  = s.QUEUE_NAME AND 
      p.PROPAGATION_NAME   = s.SUBSCRIBER_NAME AND
      s.SUBSCRIBER_ADDRESS LIKE &#39;%&#39; || p.DESTINATION_DBLINK;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                                                                            Last
                                                                        Dequeued
            Queue Queue Subscriber      Startup   Cumulative     Total   Message
Propagation Owner Name  Address         Time        Messages  Messages    Number
----------- ----- ----- --------------- --------- ---------- --------- ---------
PROPAGATION STRMA DB1$C &#34;STRMADMIN&#34;.&#34;DB 25-JUN-09      11079     11079   1525762
$_5         DMIN  APQ   1$APPQ&#34;@DB2.EXA
                        MPLE.COM
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If there are multiple propagations using the same database link but propagating messages to different queues at the destination database, then the statistics returned by this query are approximate rather than accurate.</div>
</div>
<!-- class="sect2" -->
<a id="i1019778"></a>
<div id="STRMS926" class="sect2">
<h3 class="sect2">Displaying Performance Statistics for Propagations That Receive Buffered Messages<a id="sthref1140"></a><a id="sthref1141"></a></h3>
<p>The query in this section displays the amount of time that each <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a> receiving buffered <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s spends performing various tasks. Each propagation receives the messages and enqueues them into the <a href="strms_glossary.htm#CHDHJHJD"><span class="xrefglossterm">destination queue</span></a> for the propagation. Specifically, the query displays the following information:</p>
<ul>
<li>
<p>The name of the <a href="strms_glossary.htm#CHDCGACA"><span class="xrefglossterm">source queue</span></a> from which messages are propagated.</p>
</li>
<li>
<p>The name of the <a href="strms_glossary.htm#CHDHFBJG"><span class="xrefglossterm">source database</span></a>.</p>
</li>
<li>
<p>The amount of time spent unpickling messages since the database instance was last started, in seconds. Unpickling involves changing a series of bytes that can be sent over a network back into a buffered message in memory.</p>
</li>
<li>
<p>The amount of time spent evaluating <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s for propagated messages since the database instance was last started, in seconds.</p>
</li>
<li>
<p>The amount of time spent enqueuing messages into the destination queue for the propagation since the database instance was last started, in seconds.</p>
</li>
</ul>
<p>To display this information, run the following query:</p>
<pre dir="ltr">COLUMN SRC_QUEUE_NAME HEADING &#39;Source|Queue|Name&#39; FORMAT A20
COLUMN SRC_DBNAME HEADING &#39;Source|Database&#39; FORMAT A20
COLUMN ELAPSED_UNPICKLE_TIME HEADING &#39;Unpickle|Time&#39; FORMAT 99999999.99
COLUMN ELAPSED_RULE_TIME HEADING &#39;Rule|Evaluation|Time&#39; FORMAT 99999999.99
COLUMN ELAPSED_ENQUEUE_TIME HEADING &#39;Enqueue|Time&#39; FORMAT 99999999.99

SELECT SRC_QUEUE_NAME,
       SRC_DBNAME,
       (ELAPSED_UNPICKLE_TIME / 100) ELAPSED_UNPICKLE_TIME,
       (ELAPSED_RULE_TIME / 100) ELAPSED_RULE_TIME,
       (ELAPSED_ENQUEUE_TIME / 100) ELAPSED_ENQUEUE_TIME
  FROM V$PROPAGATION_RECEIVER;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Source                                                    Rule
Queue                Source              Unpickle   Evaluation      Enqueue
Name                 Database                Time         Time         Time
-------------------- -------------------- ------------ ------------ ------------
STREAMS_QUEUE        MULT2.EXAMPLE.COM           45.65         5.44        45.85
STREAMS_QUEUE        MULT3.EXAMPLE.COM           53.35         8.01        50.41
</pre></div>
<!-- class="sect2" -->
<a id="i1019487"></a>
<div id="STRMS927" class="sect2">
<h3 class="sect2">Viewing the Apply Processes Dequeuing Messages from Each Buffered Queue<a id="sthref1142"></a><a id="sthref1143"></a><a id="sthref1144"></a></h3>
<p>Apply processes are <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> subscribers that can dequeue <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s. By querying the <code dir="ltr">V$BUFFERED_SUBSCRIBERS</code> dynamic performance view, you can display all the apply processes that can dequeue messages.</p>
<p>This query joins with the <code dir="ltr">V$BUFFERED_QUEUES</code> views to show the name of the queue. In addition, <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>s also are queue subscribers, and this query limits the output to subscribers where the <code dir="ltr">SUBSCRIBER_ADDRESS</code> is <code dir="ltr">NULL</code> to return only apply processes.</p>
<p>The query in this section displays the following information about the apply processes that can dequeue messages from queues:</p>
<ul>
<li>
<p>The name of the apply process</p>
</li>
<li>
<p>The queue owner</p>
</li>
<li>
<p>The queue name</p>
</li>
<li>
<p>The time when the apply process last started</p>
</li>
<li>
<p>The cumulative number of messages dequeued by the apply process since the database last started</p>
</li>
<li>
<p>The total number of messages dequeued by the apply process since the apply process last started</p>
</li>
<li>
<p>The message number of the message most recently dequeued by the apply process</p>
</li>
</ul>
<p>To display this information, run the following query:</p>
<pre dir="ltr">COLUMN SUBSCRIBER_NAME HEADING &#39;Apply Process&#39; FORMAT A16
COLUMN QUEUE_SCHEMA HEADING &#39;Queue|Owner&#39; FORMAT A5
COLUMN QUEUE_NAME HEADING &#39;Queue|Name&#39; FORMAT A5
COLUMN STARTUP_TIME HEADING &#39;Startup|Time&#39; FORMAT A9
COLUMN CNUM_MSGS HEADING &#39;Cumulative|Messages&#39; FORMAT 99999999
COLUMN TOTAL_DEQUEUED_MSG HEADING &#39;Number of|Dequeued|Messages&#39; 
  FORMAT 99999999
COLUMN LAST_DEQUEUED_NUM HEADING &#39;Last|Dequeued|Message|Number&#39; FORMAT 99999999

SELECT s.SUBSCRIBER_NAME,
       q.QUEUE_SCHEMA,
       q.QUEUE_NAME, 
       s.STARTUP_TIME,
       s.CNUM_MSGS,          
       s.TOTAL_DEQUEUED_MSG,
       s.LAST_DEQUEUED_NUM
FROM V$BUFFERED_QUEUES q, V$BUFFERED_SUBSCRIBERS s, DBA_APPLY a
WHERE q.QUEUE_ID = s.QUEUE_ID AND 
      s.SUBSCRIBER_ADDRESS IS NULL AND
      s.SUBSCRIBER_NAME = a.APPLY_NAME;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                                                                  Last
                                                   Number of  Dequeued
                 Queue Queue Startup   Cumulative   Dequeued   Message
Apply Process    Owner Name  Time        Messages   Messages    Number
---------------- ----- ----- --------- ---------- ---------- ---------
APPLY$_DB2_2     STRMA DB2$A 25-JUN-09      11039      11039   1509859
                 DMIN  PPQ
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1006969"></a>
<div id="STRMS928" class="sect1">
<h2 class="sect1">Monitoring Oracle Streams Propagations and Propagation Jobs<a id="sthref1145"></a><a id="sthref1146"></a><a id="sthref1147"></a><a id="sthref1148"></a></h2>
<p>The following topics describe monitoring <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>s and <a href="strms_glossary.htm#CHDHGEHC"><span class="xrefglossterm">propagation job</span></a>s:</p>
<ul>
<li>
<p><a href="#CHDHJHEE">Displaying the Queues and Database Link for Each Propagation</a></p>
</li>
<li>
<p><a href="#i1007008">Determining the Source Queue and Destination Queue for Each Propagation</a></p>
</li>
<li>
<p><a href="#i1007035">Determining the Rule Sets for Each Propagation</a></p>
</li>
<li>
<p><a href="#i1007050">Displaying Information About the Schedules for Propagation Jobs</a></p>
</li>
<li>
<p><a href="#i1007127">Determining the Total Number of Messages and Bytes Propagated</a></p>
</li>
<li>
<p><a href="#CFFJGHDI">Displaying Information About Propagation Senders</a></p>
</li>
<li>
<p><a href="#CFFEJFIE">Displaying Information About Propagation Receivers</a></p>
</li>
<li>
<p><a href="#CHDFFDAG">Displaying Session Information About Each Propagation</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_prop.htm#g1016256">Chapter 3, &#34;Oracle Streams Staging and Propagation&#34;</a></p>
</li>
<li>
<p><a href="strms_mprop.htm#i1011128">&#34;Managing Oracle Streams Propagations and Propagation Jobs&#34;</a></p>
</li>
<li>
<p><a href="strms_trprop.htm#BCEJCHJJ">Chapter 32, &#34;Troubleshooting Propagation&#34;</a></p>
</li>
</ul>
</div>
<a id="CHDHJHEE"></a>
<div id="STRMS933" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Displaying the Queues and Database Link for Each Propagation<a id="sthref1149"></a><a id="sthref1150"></a><a id="sthref1151"></a></h3>
<p>You can display information about each <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a> by querying the <code dir="ltr">DBA_PROPAGATION</code> data dictionary view. This view contains information about each propagation with a <a href="strms_glossary.htm#CHDCGACA"><span class="xrefglossterm">source queue</span></a> is at the local database.</p>
<p>The query in this section displays the following information about each propagation:</p>
<ul>
<li>
<p>The propagation name</p>
</li>
<li>
<p>The source <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> name</p>
</li>
<li>
<p>The database link used by the propagation</p>
</li>
<li>
<p>The <a href="strms_glossary.htm#CHDHJHJD"><span class="xrefglossterm">destination queue</span></a> name</p>
</li>
<li>
<p>The status of the propagation, either <code dir="ltr">ENABLED</code>, <code dir="ltr">DISABLED</code>, or <code dir="ltr">ABORTED</code></p>
</li>
<li>
<p>Whether the propagation is a queue-to-queue propagation</p>
</li>
</ul>
<p>To display this information about each propagation in a database, run the following query:</p>
<pre dir="ltr">COLUMN PROPAGATION_NAME        HEADING &#39;Propagation|Name&#39;   FORMAT A19
COLUMN SOURCE_QUEUE_NAME       HEADING &#39;Source|Queue|Name&#39;  FORMAT A17
COLUMN DESTINATION_DBLINK      HEADING &#39;Database|Link&#39;      FORMAT A9
COLUMN DESTINATION_QUEUE_NAME  HEADING &#39;Dest|Queue|Name&#39;    FORMAT A15
COLUMN STATUS                  HEADING &#39;Status&#39;             FORMAT A8
COLUMN QUEUE_TO_QUEUE          HEADING &#39;Queue-|to-|Queue?&#39;  FORMAT A6
 
SELECT PROPAGATION_NAME,
       SOURCE_QUEUE_NAME,
       DESTINATION_DBLINK, 
       DESTINATION_QUEUE_NAME,
       STATUS,
       QUEUE_TO_QUEUE
  FROM DBA_PROPAGATION;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                    Source                      Dest                     Queue-
Propagation         Queue             Database  Queue                    to-
Name                Name              Link      Name            Status   Queue?
------------------- ----------------- --------- --------------- -------- ------
PROPAGATION$_6      DA$CAPQ           DB.EXAMPL DA$APPQ         ENABLED  TRUE
                                      E.COM
</pre></div>
<!-- class="sect2" -->
<a id="i1007008"></a>
<div id="STRMS934" class="sect2">
<h3 class="sect2">Determining the Source Queue and Destination Queue for Each Propagation<a id="sthref1152"></a></h3>
<p>You can determine the <a href="strms_glossary.htm#CHDCGACA"><span class="xrefglossterm">source queue</span></a> and <a href="strms_glossary.htm#CHDHJHJD"><span class="xrefglossterm">destination queue</span></a> for each <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a> by querying the <code dir="ltr">DBA_PROPAGATION</code> data dictionary view.</p>
<p>The query in this section displays the following information about each propagation:</p>
<ul>
<li>
<p>The propagation name</p>
</li>
<li>
<p>The source <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> owner</p>
</li>
<li>
<p>The source queue name</p>
</li>
<li>
<p>The database that contains the source queue</p>
</li>
<li>
<p>The destination queue owner</p>
</li>
<li>
<p>The destination queue name</p>
</li>
<li>
<p>The database that contains the destination queue</p>
</li>
</ul>
<p>To display this information about each propagation in a database, run the following query:</p>
<pre dir="ltr">COLUMN PROPAGATION_NAME HEADING &#39;Propagation|Name&#39; FORMAT A20
COLUMN SOURCE_QUEUE_OWNER HEADING &#39;Source|Queue|Owner&#39; FORMAT A10
COLUMN &#39;Source Queue&#39; HEADING &#39;Source|Queue&#39; FORMAT A15
COLUMN DESTINATION_QUEUE_OWNER HEADING &#39;Dest|Queue|Owner&#39;   FORMAT A10
COLUMN &#39;Destination Queue&#39; HEADING &#39;Destination|Queue&#39; FORMAT A15

SELECT p.PROPAGATION_NAME,
       p.SOURCE_QUEUE_OWNER,
       p.SOURCE_QUEUE_NAME ||&#39;@&#39;|| 
       g.GLOBAL_NAME &#34;Source Queue&#34;,
       p.DESTINATION_QUEUE_OWNER,
       p.DESTINATION_QUEUE_NAME ||&#39;@&#39;|| 
       p.DESTINATION_DBLINK &#34;Destination Queue&#34;
  FROM DBA_PROPAGATION p, GLOBAL_NAME g;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                     Source                     Dest
Propagation          Queue      Source          Queue      Destination
Name                 Owner      Queue           Owner      Queue
-------------------- ---------- --------------- ---------- ---------------
PROPAGATION$_6       STRMADMIN  DA$CAPQ@DA.EXAM STRMADMIN  DA$APPQ@DB.EXAM
                                PLE.COM                    PLE.COM
</pre></div>
<!-- class="sect2" -->
<a id="i1007035"></a>
<div id="STRMS935" class="sect2">
<h3 class="sect2">Determining the Rule Sets for Each Propagation<a id="sthref1153"></a></h3>
<p>The query in this section displays the following information for each <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>:</p>
<ul>
<li>
<p>The propagation name</p>
</li>
<li>
<p>The owner of the <a href="strms_glossary.htm#CHDEEDIJ"><span class="xrefglossterm">positive rule set</span></a> for the propagation</p>
</li>
<li>
<p>The name of the positive rule set used by the propagation</p>
</li>
<li>
<p>The owner of the <a href="strms_glossary.htm#CHDBHJHI"><span class="xrefglossterm">negative rule set</span></a> used by the propagation</p>
</li>
<li>
<p>The name of the negative rule set used by the propagation</p>
</li>
</ul>
<p>To display this general information about each propagation in a database, run the following query:</p>
<pre dir="ltr">COLUMN PROPAGATION_NAME HEADING &#39;Propagation|Name&#39; FORMAT A20
COLUMN RULE_SET_OWNER HEADING &#39;Positive|Rule Set|Owner&#39; FORMAT A10
COLUMN RULE_SET_NAME HEADING &#39;Positive Rule|Set Name&#39; FORMAT A15
COLUMN NEGATIVE_RULE_SET_OWNER HEADING &#39;Negative|Rule Set|Owner&#39; FORMAT A10
COLUMN NEGATIVE_RULE_SET_NAME HEADING &#39;Negative Rule|Set Name&#39; FORMAT A15

SELECT PROPAGATION_NAME, 
       RULE_SET_OWNER, 
       RULE_SET_NAME, 
       NEGATIVE_RULE_SET_OWNER, 
       NEGATIVE_RULE_SET_NAME
  FROM DBA_PROPAGATION;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                     Positive                   Negative
Propagation          Rule Set   Positive Rule   Rule Set   Negative Rule
Name                 Owner      Set Name        Owner      Set Name
-------------------- ---------- --------------- ---------- ---------------
PROPAGATION$_6       STRMADMIN  RULESET$_7      STRMADMIN  RULESET$_9
</pre></div>
<!-- class="sect2" -->
<a id="i1007050"></a>
<div id="STRMS936" class="sect2">
<h3 class="sect2">Displaying Information About the Schedules for Propagation Job<a id="sthref1154"></a><a id="sthref1155"></a>s</h3>
<p>The query in this section displays the following information about the <a href="strms_glossary.htm#CBADGHAI"><span class="xrefglossterm">propagation schedule</span></a>s for each <a href="strms_glossary.htm#CHDHGEHC"><span class="xrefglossterm">propagation job</span></a> used by a <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a> in the database:</p>
<ul>
<li>
<p>The name of the propagation</p>
</li>
<li>
<p>The latency of the propagation job, which is the maximum wait time to propagate a new message during the duration, when all other messages in the <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> to the relevant destination have been propagated</p>
</li>
<li>
<p>Whether the propagation job is enabled</p>
</li>
<li>
<p>The name of the process that most recently executed the schedule</p>
</li>
<li>
<p>The number of consecutive times schedule execution has failed, if any</p>
<p>After 16 consecutive failures, a propagation job is aborted automatically.</p>
</li>
<li>
<p>Whether the propagation is queue-to-queue or queue-to-dblink</p>
</li>
<li>
<p>The error message text of the last unsuccessful propagation execution</p>
</li>
</ul>
<p>Run this query at the database that contains the <a href="strms_glossary.htm#CHDCGACA"><span class="xrefglossterm">source queue</span></a>:</p>
<pre dir="ltr">COLUMN PROPAGATION_NAME HEADING &#39;Propagation&#39; FORMAT A15
COLUMN LATENCY HEADING &#39;Latency|in Seconds&#39; FORMAT 99999
COLUMN SCHEDULE_DISABLED HEADING &#39;Status&#39; FORMAT A8
COLUMN PROCESS_NAME HEADING &#39;Process&#39; FORMAT A8
COLUMN FAILURES HEADING &#39;Failures&#39; FORMAT 999
COLUMN QUEUE_TO_QUEUE HEADING &#39;Queue|to|Queue&#39;
COLUMN LAST_ERROR_MSG HEADING &#39;Last Error|Message&#39; FORMAT A15
 
SELECT p.PROPAGATION_NAME,
       s.LATENCY,
       DECODE(s.SCHEDULE_DISABLED,
                &#39;Y&#39;, &#39;Disabled&#39;,
                &#39;N&#39;, &#39;Enabled&#39;) SCHEDULE_DISABLED,
       s.PROCESS_NAME,
       s.FAILURES,
       p.QUEUE_TO_QUEUE,
       s.LAST_ERROR_MSG
  FROM DBA_QUEUE_SCHEDULES s, DBA_PROPAGATION p
  WHERE s.MESSAGE_DELIVERY_MODE = &#39;BUFFERED&#39;
    AND s.DESTINATION LIKE &#39;%&#39; || p.DESTINATION_DBLINK
    AND s.SCHEMA = p.SOURCE_QUEUE_OWNER
    AND s.QNAME  = p.SOURCE_QUEUE_NAME
  ORDER BY PROPAGATION_NAME;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                                                      Queue
                   Latency                            to     Last Error
Propagation     in Seconds Status   Process  Failures Queue  Message
--------------- ---------- -------- -------- -------- ------ ---------------
PROPAGATION$_6          19 Enabled  CS00            0 TRUE
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_adprop.htm#i1006953">&#34;Propagation Scheduling and Oracle Streams Propagations&#34;</a> for more information about the default propagation schedule for an Oracle Streams propagation job</p>
</li>
<li>
<p><a href="strms_prop.htm#CHDCJIJF">&#34;Queue-to-Queue Propagations&#34;</a></p>
</li>
<li>
<p><a href="strms_trprop.htm#i1006308">&#34;Is the Propagation Enabled?&#34;</a> if the propagation job is disabled</p>
</li>
<li>
<p><a class="olink ADQUE0900" href="../ADQUE/aq_views.htm#ADQUE0900"><span class="italic">Oracle Database Advanced Queuing User&#39;s Guide</span></a> and <a class="olink REFRN23174" href="../REFRN/GUID-63790F71-99A6-48F4-8D24-3FECF685FFBC.htm#REFRN23174"><span class="italic">Oracle Database Reference</span></a> for more information about the <code dir="ltr">DBA_QUEUE_SCHEDULES</code> data dictionary view</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="i1007127"></a>
<div id="STRMS937" class="sect2">
<h3 class="sect2">Determining the Total Number of Messages and Bytes Propagated<a id="sthref1156"></a><a id="sthref1157"></a></h3>
<p>A <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a> can be queue-to-queue or queue-to-database link (queue-to-dblink). A queue-to-queue propagation always has its own exclusive <a href="strms_glossary.htm#CHDHGEHC"><span class="xrefglossterm">propagation job</span></a> to propagate <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s from the <a href="strms_glossary.htm#CHDCGACA"><span class="xrefglossterm">source queue</span></a> to the <a href="strms_glossary.htm#CHDHJHJD"><span class="xrefglossterm">destination queue</span></a>. Because each propagation job has its own <a href="strms_glossary.htm#CBADGHAI"><span class="xrefglossterm">propagation schedule</span></a>, the propagation schedule of each queue-to-queue propagation can be managed separately. All queue-to-dblink propagations that share the same database link have a single propagation schedule.</p>
<p>The query in this section displays the following information for each propagation:</p>
<ul>
<li>
<p>The name of the propagation</p>
</li>
<li>
<p>The total time spent by the system executing the propagation schedule</p>
</li>
<li>
<p>The total number of <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s propagated by the propagation schedule</p>
</li>
<li>
<p>The total number of bytes propagated by the propagation schedule</p>
</li>
</ul>
<p>Run the following query to display this information for each propagation with a source queue at the local database:</p>
<pre dir="ltr">COLUMN PROPAGATION_NAME HEADING &#39;Propagation|Name&#39; FORMAT A20
COLUMN TOTAL_TIME HEADING &#39;Total Time|Executing|in Seconds&#39; FORMAT 999999
COLUMN TOTAL_NUMBER HEADING &#39;Total Messages|Propagated&#39; FORMAT 999999999
COLUMN TOTAL_BYTES HEADING &#39;Total Bytes|Propagated&#39; FORMAT 9999999999999

SELECT p.PROPAGATION_NAME, s.TOTAL_TIME, s.TOTAL_NUMBER, s.TOTAL_BYTES 
  FROM DBA_QUEUE_SCHEDULES s, DBA_PROPAGATION p
  WHERE s.DESTINATION LIKE &#39;%&#39; || p.DESTINATION_DBLINK
    AND s.SCHEMA = p.SOURCE_QUEUE_OWNER
    AND s.QNAME  = p.SOURCE_QUEUE_NAME
    AND s.MESSAGE_DELIVERY_MODE = &#39;BUFFERED&#39;;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                     Total Time
Propagation           Executing Total Messages    Total Bytes
Name                 in Seconds     Propagated     Propagated
-------------------- ---------- -------------- --------------
PROPAGATION$_6                0         432615       94751013
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADQUE0900" href="../ADQUE/aq_views.htm#ADQUE0900"><span class="italic">Oracle Database Advanced Queuing User&#39;s Guide</span></a> and <a class="olink REFRN23174" href="../REFRN/GUID-63790F71-99A6-48F4-8D24-3FECF685FFBC.htm#REFRN23174"><span class="italic">Oracle Database Reference</span></a> for more information about the <code dir="ltr">DBA_QUEUE_SCHEDULES</code> data dictionary view</div>
</div>
<!-- class="sect2" -->
<a id="CFFJGHDI"></a>
<div id="STRMS938" class="sect2">
<h3 class="sect2">Displaying Information About Propagation Senders<a id="sthref1158"></a><a id="sthref1159"></a><a id="sthref1160"></a><a id="sthref1161"></a></h3>
<p>A propagation sender sends <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s from a <a href="strms_glossary.htm#CHDCGACA"><span class="xrefglossterm">source queue</span></a> to a <a href="strms_glossary.htm#CHDHJHJD"><span class="xrefglossterm">destination queue</span></a>.</p>
<p>The query in this section displays the following information about each propagation sender in a database:</p>
<ul>
<li>
<p>The name of the propagation</p>
</li>
<li>
<p>The session identifier of the propagation sender</p>
</li>
<li>
<p>The session serial number of the propagation sender</p>
</li>
<li>
<p>The operating system process identification number of the propagation sender</p>
</li>
<li>
<p>The state of the propagation sender</p>
</li>
</ul>
<p>In a combined capture and apply optimization, the <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a> acts as the propagation sender and transmits messages directly to the propagation receiver. When a propagation is part of a combined capture and apply optimization, this query shows the capture process session ID, session serial number, operating system process ID, and state.</p>
<p>When a propagation is not part of a combined capture and apply optimization, this query shows the propagation job session ID, session serial number, operating system process ID, and state.</p>
<p>To view this information, run the following query:</p>
<pre dir="ltr">COLUMN PROPAGATION_NAME HEADING &#39;Propagation|Name&#39; FORMAT A11
COLUMN SESSION_ID HEADING &#39;Session ID&#39; FORMAT 9999
COLUMN SERIAL# HEADING &#39;Session|Serial Number&#39; FORMAT 9999
COLUMN SPID HEADING &#39;Operating System|Process ID&#39; FORMAT A24
COLUMN STATE HEADING &#39;State&#39; FORMAT A16

SELECT p.PROPAGATION_NAME, 
       s.SESSION_ID, 
       s.SERIAL#, 
       s.SPID, 
       s.STATE
  FROM DBA_PROPAGATION p, V$PROPAGATION_SENDER s
  WHERE p.SOURCE_QUEUE_OWNER      = s.QUEUE_SCHEMA AND
        p.SOURCE_QUEUE_NAME       = s.QUEUE_NAME AND
        p.DESTINATION_QUEUE_OWNER = s.DST_QUEUE_SCHEMA AND
        p.DESTINATION_QUEUE_NAME  = s.DST_QUEUE_NAME;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Propagation                  Session Operating System
Name        Session ID Serial Number Process ID               State
----------- ---------- ------------- ------------------------ ----------------
PROPAGATION         61            17 21145                    Waiting on empty
$_6                                                            queue
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
When column <code dir="ltr">SCHEDULE_STATUS</code> in the <code dir="ltr">V$PROPAGATION_SENDER</code> view shows <code dir="ltr">SCHEDULE</code> <code dir="ltr">OPTIMIZED</code>, it means that the propagation is part of a combined capture and apply optimization.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_adcca.htm#BGBJBDHJ">Chapter 12, &#34;Combined Capture and Apply Optimization&#34;</a></div>
</div>
<!-- class="sect2" -->
<a id="CFFEJFIE"></a>
<div id="STRMS939" class="sect2">
<h3 class="sect2">Displaying Information About Propagation Receivers<a id="sthref1162"></a><a id="sthref1163"></a><a id="sthref1164"></a><a id="sthref1165"></a></h3>
<p>A propagation receiver enqueues messages sent by propagation senders into a <a href="strms_glossary.htm#CHDHJHJD"><span class="xrefglossterm">destination queue</span></a>. The query in this section displays the following information about each propagation receiver in a database:</p>
<ul>
<li>
<p>The name of the propagation</p>
</li>
<li>
<p>The session ID of the propagation receiver</p>
</li>
<li>
<p>The session serial number propagation receiver</p>
</li>
<li>
<p>The operating system process identification number of the propagation receiver</p>
</li>
<li>
<p>The state of the propagation receiver</p>
</li>
</ul>
<p>To view this information, run the following query:</p>
<pre dir="ltr">COLUMN PROPAGATION_NAME HEADING &#39;Propagation|Name&#39; FORMAT A15
COLUMN SESSION_ID HEADING &#39;Session ID&#39; FORMAT 999999
COLUMN SERIAL# HEADING &#39;Session|Serial|Number&#39; FORMAT 999999
COLUMN SPID HEADING &#39;Operating|System|Process ID&#39; FORMAT 999999
COLUMN STATE HEADING &#39;State&#39; FORMAT A16
 
SELECT PROPAGATION_NAME, 
       SESSION_ID, 
       SERIAL#, 
       SPID, 
       STATE
  FROM V$PROPAGATION_RECEIVER;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                           Session Operating
Propagation                 Serial System
Name            Session ID  Number Process ID               State
--------------- ---------- ------- ------------------------ ----------------
PROPAGATION$_5          60       5 21050                    Waiting for mess
                                                            age from propaga
                                                            tion sender
</pre></div>
<!-- class="sect2" -->
<a id="CHDFFDAG"></a>
<div id="STRMS1688" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Displaying Session Information About Each Propagation<a id="sthref1166"></a><a id="sthref1167"></a></h3>
<p>The query in this section displays the following session information about each session associated with a <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a> in a database:</p>
<ul>
<li>
<p>The Oracle Streams component</p>
</li>
<li>
<p>The session identifier</p>
</li>
<li>
<p>The serial number</p>
</li>
<li>
<p>The operating system process identification number</p>
</li>
<li>
<p>The process names of the propagation sender and propagation receiver processes</p>
</li>
</ul>
<p>To display this information for each propagation in a database, run the following query:</p>
<pre dir="ltr">COLUMN ACTION HEADING &#39;Streams Component&#39; FORMAT A28
COLUMN SID HEADING &#39;Session ID&#39; FORMAT 99999
COLUMN SERIAL# HEADING &#39;Session|Serial|Number&#39; FORMAT 9999999
COLUMN PROCESS HEADING &#39;Operating System|Process Number&#39; FORMAT A20
COLUMN PROCESS_NAME HEADING &#39;Process|Names&#39; FORMAT A7
 
SELECT /*+PARAM(&#39;_module_action_old_length&#39;,0)*/ ACTION,
       SID,
       SERIAL#,
       PROCESS,
       SUBSTR(PROGRAM,INSTR(PROGRAM,&#39;(&#39;)+1,4) PROCESS_NAME
  FROM V$SESSION
  WHERE MODULE =&#39;Streams&#39; AND
        ACTION LIKE &#39;%Propagation%&#39;;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                                        Session
                                         Serial Operating System     Process
Streams Component            Session ID   Number Process Number       Names
---------------------------- ---------- -------- -------------------- -------
APPLY$_DB_3 - Propagation Re         60        5 21048                TNS
ceiver CCA
 
PROPAGATION$_6 - Propagation         61       17 21145                CS00
Sender CCA
</pre>
<p>The <code dir="ltr">CCA</code> in the Streams component sample output indicates that the propagation is part of a combined capture and apply optimization. The <code dir="ltr">TNS</code> process name indicates that the propagation receiver was initiated remotely by a capture process.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_adcca.htm#BGBJBDHJ">Chapter 12, &#34;Combined Capture and Apply Optimization&#34;</a></div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5963">
<tr>
<td class="cellalignment5970">
<table class="cellalignment5968">
<tr>
<td class="cellalignment5967"><a href="strms_cpmon.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5967"><a href="strms_apmon.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5972">
<table class="cellalignment5966">
<tr>
<td class="cellalignment5967"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5967"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5967"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5967"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5967"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5967"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>