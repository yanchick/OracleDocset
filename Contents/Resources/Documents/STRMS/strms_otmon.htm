<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-104472"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Monitoring%20Other%20Oracle%20Streams%20Components"></a><title>Monitoring Other Oracle Streams Components</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1032"/>
<meta name="dcterms.created" content="2014-12-23T13:28:8Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Streams Concepts and Administration"/>
<meta name="dcterms.identifier" content="E53116-02"/>
<meta name="dcterms.isVersionOf" content="STRMS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="strms_glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="strms_trmon.htm" title="Previous" type="text/html"/>
<link rel="Next" href="pt_trouble.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E53116-02.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">39/57</span> <!-- End Header -->
<div id="STRMS1001" class="chapter"><a id="CFFIHCJH"></a> <a id="CFFCFCCE"></a>
<h1 class="chapter"><span class="secnum">29</span> Monitoring Other Oracle Streams Components</h1>
<p>This chapter provides sample queries that you can use to monitor various Oracle Streams components.</p>
<p>The following topics describe monitoring various Oracle Streams components:</p>
<ul>
<li>
<p><a href="#i1013264">Monitoring Oracle Streams Administrators and Other Oracle Streams Users</a></p>
</li>
<li>
<p><a href="#i1020290">Monitoring the Oracle Streams Pool</a></p>
</li>
<li>
<p><a href="#i1014369">Monitoring Compatibility in an Oracle Streams Environment</a></p>
</li>
<li>
<p><a href="#i1021239">Monitoring Oracle Streams Performance Using AWR and Statspack</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1"><span class="bold">Note</span>:</p>
The Oracle Streams tool in Oracle Enterprise Manager Cloud Control is also an excellent way to monitor an Oracle Streams environment. See the online Help for the Oracle Streams tool for more information.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for information about the data dictionary views described in this chapter</div>
<a id="i1013264"></a>
<div id="STRMS1002" class="sect1">
<h2 class="sect1">Monitoring Oracle Streams Administrators and Other Oracle Streams Users</h2>
<p>The following sections contain queries that you can run to list Oracle Streams administrators and other users who allow access to remote Oracle Streams administrators:</p>
<ul>
<li>
<p><a href="#i1013276">Listing Local Oracle Streams Administrators</a></p>
</li>
<li>
<p><a href="#i1013288">Listing Users Who Allow Access to Remote Oracle Streams Administrators</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ARPLS514" href="../ARPLS/d_streams_aut.htm#ARPLS514"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about configuring Oracle Streams administrators and other Oracle Streams users using the <code dir="ltr">DBMS_STREAMS_AUTH</code> package</div>
<a id="i1013276"></a>
<div id="STRMS1003" class="sect2">
<h3 class="sect2">Listing Local Oracle Streams Administrators<a id="sthref1290"></a><a id="sthref1291"></a></h3>
<p>You can grant privileges to a local Oracle Streams administrator by running the <code dir="ltr">GRANT_ADMIN_PRIVILEGE</code> procedure in the <code dir="ltr">DBMS_STREAMS_AUTH</code> package. The <code dir="ltr">DBA_STREAMS_ADMINISTRATOR</code> data dictionary view contains only the local Oracle Streams administrators created with the <code dir="ltr">grant_privileges</code> parameter set to <code dir="ltr">TRUE</code> when the <code dir="ltr">GRANT_ADMIN_PRIVILEGE</code> procedure was run for the user. If you created an Oracle Streams administrator using generated scripts and set the <code dir="ltr">grant_privileges</code> parameter to <code dir="ltr">FALSE</code> when the <code dir="ltr">GRANT_ADMIN_PRIVILEGE</code> procedure was run for the user, then the <code dir="ltr">DBA_STREAMS_ADMINISTRATOR</code> data dictionary view does not list the user as an Oracle Streams administrator.</p>
<p>To list the local Oracle Streams administrators created with the <code dir="ltr">grant_privileges</code> parameter set to <code dir="ltr">TRUE</code> when running the <code dir="ltr">GRANT_ADMIN_PRIVILEGE</code> procedure, run the following query:</p>
<pre dir="ltr">COLUMN USERNAME HEADING &#39;Local Streams Administrator&#39; FORMAT A30

SELECT USERNAME FROM DBA_STREAMS_ADMINISTRATOR
  WHERE LOCAL_PRIVILEGES = &#39;YES&#39;;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Local Streams Administrator
------------------------------
STRMADMIN
</pre>
<p>The <code dir="ltr">GRANT_ADMIN_PRIVILEGE</code> might not have been run on a user who is an Oracle Streams administrator. Such administrators are not returned by the query in this section. Also, you can change the privileges for the users listed after the <code dir="ltr">GRANT_ADMIN_PRIVILEGE</code> procedure has been run for them. The <code dir="ltr">DBA_STREAMS_ADMINISTRATOR</code> view does not track these changes unless they are performed by the <code dir="ltr">DBMS_STREAMS_AUTH</code> package. For example, you can revoke the privileges granted by the <code dir="ltr">GRANT_ADMIN_PRIVILEGE</code> procedure for a particular user using the <code dir="ltr">REVOKE</code> SQL statement, but this user would be listed when you query the <code dir="ltr">DBA_STREAMS_ADMINISTRATOR</code> view.</p>
<p>Oracle recommends using the <code dir="ltr">REVOKE_ADMIN_PRIVILEGE</code> procedure in the <code dir="ltr">DBMS_STREAMS_AUTH</code> package to revoke privileges from a user listed by the query in this section. When you revoke privileges from a user using this procedure, the user is removed from the <code dir="ltr">DBA_STREAMS_ADMINISTRATOR</code> view.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STREP200" href="../STREP/prep_rep.htm#STREP200"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for information about creating an Oracle Streams administrator</div>
</div>
<!-- class="sect2" -->
<a id="i1013288"></a>
<div id="STRMS1004" class="sect2">
<h3 class="sect2">Listing Users Who Allow Access to Remote Oracle Streams Administrators<a id="sthref1292"></a></h3>
<p>You can configure a user to allow access to remote Oracle Streams administrators by running the <code dir="ltr">GRANT_REMOTE_ADMIN_ACCESS</code> procedure in the <code dir="ltr">DBMS_STREAMS_AUTH</code> package. Such a user allows the remote Oracle Streams administrator to perform administrative actions in the local database using a database link.</p>
<p>Typically, you configure such a user at a local <a href="strms_glossary.htm#CHDHFBJG"><span class="xrefglossterm">source database</span></a> if a <a href="strms_glossary.htm#CHDHEBHD"><span class="xrefglossterm">downstream capture process</span></a> captures changes originating at the local source database. The Oracle Streams administrator at a downstream capture database administers the source database using this connection.</p>
<p>To list the users who allow to remote Oracle Streams administrators, run the following query:</p>
<pre dir="ltr">COLUMN USERNAME HEADING &#39;Users Who Allow Remote Access&#39; FORMAT A30

SELECT USERNAME FROM DBA_STREAMS_ADMINISTRATOR
  WHERE ACCESS_FROM_REMOTE = &#39;YES&#39;; 
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Users Who Allow Remote Access
------------------------------
STRMREMOTE
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1020290"></a>
<div id="STRMS147" class="sect1">
<h2 class="sect1">Monitoring the Oracle Streams Pool<a id="sthref1293"></a><a id="sthref1294"></a><a id="sthref1295"></a></h2>
<p>The <a href="strms_glossary.htm#CHDHGDCA"><span class="xrefglossterm">Oracle Streams pool</span></a> is a portion of memory in the System Global Area (SGA) that is used by Oracle Streams. The Oracle Streams pool stores enqueued <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s in memory, and it provides memory for <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>es and <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>es. The Oracle Streams pool always stores LCRs captured by a capture process, and it can store other types of messages that are enqueued manually into a <a href="strms_glossary.htm#CHDFJFED"><span class="xrefglossterm">buffered queue</span></a>.</p>
<p>The Oracle Streams pool size is managed automatically when the <code dir="ltr">MEMORY_TARGET</code>, <code dir="ltr">MEMORY_MAX_TARGET</code>, or <code dir="ltr">SGA_TARGET</code> initialization parameter is set to a nonzero value. If these parameters are all set to <code dir="ltr">0</code> (zero), then you can specify the size of the Oracle Streams pool in bytes using the <code dir="ltr">STREAMS_POOL_SIZE</code> initialization parameter. In this case, the <code dir="ltr">V$STREAMS_POOL_ADVICE</code> dynamic performance view provides information about an appropriate setting for the <code dir="ltr">STREAMS_POOL_SIZE</code> initialization parameter.</p>
<p>This section contains example queries that show when you should increase, retain, or decrease the size of the Oracle Streams pool. Each query shows the following information about the Oracle Streams pool:</p>
<ul>
<li>
<p><code dir="ltr">STREAMS_POOL_SIZE_FOR_ESTIMATE</code> shows the size, in megabytes, of the Oracle Streams pool for the estimate. The size ranges from values smaller than the current Oracle Streams pool size to values larger than the current Oracle Streams pool size, and there is a separate row for each increment. There always is an entry that shows the current Oracle Streams pool size, and there always are 20 increments. The range and the size of the increments depend on the current size of the Oracle Streams pool.</p>
</li>
<li>
<p><code dir="ltr">STREAMS_POOL_SIZE_FACTOR</code> shows the size factor of an estimate as it relates to the current size of the Oracle Streams pool. For example, a size factor of.2 means that the estimate is for 20% of the current size of the Oracle Streams pool, while a size factor of 1.6 means that the estimate is for 160% of the current size of the Oracle Streams pool. The row with a size factor of 1.0 shows the current size of the Oracle Streams pool.</p>
</li>
<li>
<p><code dir="ltr">ESTD_SPILL_COUNT</code> shows the estimated number messages that will spill from memory to the <a href="strms_glossary.htm#CHDFFJJB"><span class="xrefglossterm">queue table</span></a> for each <code dir="ltr">STREAMS_POOL_SIZE_FOR_ESTIMATE</code> and <code dir="ltr">STREAMS_POOL_SIZE_FACTOR</code> returned by the query.</p>
</li>
<li>
<p><code dir="ltr">ESTD_SPILL_TIME</code> shows the estimated elapsed time, in seconds, spent spilling messages from memory to the queue table for each <code dir="ltr">STREAMS_POOL_SIZE_FOR_ESTIMATE</code> and <code dir="ltr">STREAMS_POOL_SIZE_FACTOR</code> returned by the query.</p>
</li>
<li>
<p><code dir="ltr">ESTD_UNSPILL_COUNT</code> shows the estimated number messages that will unspill from the queue table back into memory for each <code dir="ltr">STREAMS_POOL_SIZE_FOR_ESTIMATE</code> and <code dir="ltr">STREAMS_POOL_SIZE_FACTOR</code> returned by the query.</p>
</li>
<li>
<p><code dir="ltr">ESTD_UNSPILL_TIME</code> shows the estimated elapsed time, in seconds, spent unspilling messages from the queue table back into memory for each <code dir="ltr">STREAMS_POOL_SIZE_FOR_ESTIMATE</code> and <code dir="ltr">STREAMS_POOL_SIZE_FACTOR</code> returned by the query.</p>
</li>
</ul>
<p>If any capture processes, <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>s, or apply processes are disabled when you query the <code dir="ltr">V$STREAMS_POOL_ADVICE</code> view, and you plan to enable them in the future, then ensure that you consider the memory resources required by these <a href="strms_glossary.htm#CHDDDJGJ"><span class="xrefglossterm">Oracle Streams client</span></a>s before you decrease the size of the Oracle Streams pool.</p>
<div class="infobox-note">
<p class="notep1">Tips:</p>
<ul>
<li>
<p>In general, the best size for the Oracle Streams pool is the smallest size for which spilled and unspilled messages and times are close to zero.</p>
</li>
<li>
<p>For the most accurate results, you should run a query on the <code dir="ltr">V$STREAMS_POOL_ADVICE</code> view when there is a typical amount of dequeue activity by propagations and apply processes in a database. If dequeue activity is far lower than typical, or far higher than typical, then the query results might not be a good guide for adjusting the size of the Oracle Streams pool.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink STREP202" href="../STREP/prep_rep.htm#STREP202"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for information about configuring the Oracle Streams pool</p>
</li>
<li>
<p><a class="olink STREP201" href="../STREP/prep_rep.htm#STREP201"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for more information about the <code dir="ltr">STREAMS_POOL_SIZE</code> initialization parameter</p>
</li>
</ul>
</div>
<div id="STRMS1005" class="sect2"><a id="sthref1296"></a>
<h3 class="sect2">Query Result that Advises Increasing the Oracle Streams Pool Size</h3>
<p>Consider the following results returned by the <code dir="ltr">V$STREAMS_POOL_ADVICE</code> view:</p>
<pre dir="ltr">COLUMN STREAMS_POOL_SIZE_FOR_ESTIMATE HEADING &#39;Oracle Streams Pool Size|for Estimate(MB)&#39;
  FORMAT 999999999999
COLUMN STREAMS_POOL_SIZE_FACTOR HEADING &#39;Oracle Streams Pool|Size|Factor&#39; FORMAT 99.9
COLUMN ESTD_SPILL_COUNT HEADING &#39;Estimated|Spill|Count&#39; FORMAT 99999999
COLUMN ESTD_SPILL_TIME HEADING &#39;Estimated|Spill|Time&#39; FORMAT 99999999.99
COLUMN ESTD_UNSPILL_COUNT HEADING &#39;Estimated|Unspill|Count&#39; FORMAT 99999999
COLUMN ESTD_UNSPILL_TIME HEADING &#39;Estimated|Unspill|Time&#39; FORMAT 99999999.99

SELECT STREAMS_POOL_SIZE_FOR_ESTIMATE,
       STREAMS_POOL_SIZE_FACTOR, 
       ESTD_SPILL_COUNT, 
       ESTD_SPILL_TIME, 
       ESTD_UNSPILL_COUNT,
       ESTD_UNSPILL_TIME
  FROM V$STREAMS_POOL_ADVICE;

                         Oracle Streams Pool Estimated    Estimated Estimated
Oracle Streams Pool Size                Size     Spill        Spill   Unspill
        for Estimate(MB)              Factor     Count         Time     Count
------------------------ ------------------- --------- ------------ ---------
               24           .1       158        62.00         0          .00
               48           .2       145        59.00         0          .00
               72           .3       137        53.00         0          .00
               96           .4       122        50.00         0          .00
              120           .5       114        48.00         0          .00
              144           .6       103        45.00         0          .00
              168           .7        95        39.00         0          .00
              192           .8        87        32.00         0          .00
              216           .9        74        26.00         0          .00
              240          1.0        61        21.00         0          .00
              264          1.1        56        17.00         0          .00
              288          1.2        43        15.00         0          .00
              312          1.3        36        11.00         0          .00
              336          1.4        22         8.00         0          .00
              360          1.5         9         2.00         0          .00
              384          1.6         0          .00         0          .00
              408          1.7         0          .00         0          .00
              432          1.8         0          .00         0          .00
              456          1.9         0          .00         0          .00
              480          2.0         0          .00         0          .00
</pre>
<p>Based on these results, 384 megabytes, or 160% of the size of the current <a href="strms_glossary.htm#CHDHGDCA"><span class="xrefglossterm">Oracle Streams pool</span></a>, is the optimal size for the Oracle Streams pool. That is, this size is the smallest size for which the estimated number of spilled and unspilled <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s is zero.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
After you adjust the size of the Oracle Streams pool, it might take some time for the new size to result in new output for the <code dir="ltr">V$STREAMS_POOL_ADVICE</code> view.</div>
</div>
<!-- class="sect2" -->
<div id="STRMS1006" class="sect2"><a id="sthref1297"></a>
<h3 class="sect2">Query Result that Advises Retaining the Current Oracle Streams Pool Size</h3>
<p>Consider the following results returned by the <code dir="ltr">V$STREAMS_POOL_ADVICE</code> view:</p>
<pre dir="ltr">COLUMN STREAMS_POOL_SIZE_FOR_ESTIMATE  HEADING &#39;Oracle Streams Pool|Size for Estimate&#39;
  FORMAT 999999999999
COLUMN STREAMS_POOL_SIZE_FACTOR HEADING &#39;Oracle Streams Pool|Size|Factor&#39; FORMAT 99.9
COLUMN ESTD_SPILL_COUNT HEADING &#39;Estimated|Spill|Count&#39; FORMAT 99999999
COLUMN ESTD_SPILL_TIME HEADING &#39;Estimated|Spill|Time&#39; FORMAT 99999999.99
COLUMN ESTD_UNSPILL_COUNT HEADING &#39;Estimated|Unspill|Count&#39; FORMAT 99999999
COLUMN ESTD_UNSPILL_TIME HEADING &#39;Estimated|Unspill|Time&#39; FORMAT 99999999.99
 
SELECT STREAMS_POOL_SIZE_FOR_ESTIMATE,
       STREAMS_POOL_SIZE_FACTOR, 
       ESTD_SPILL_COUNT, 
       ESTD_SPILL_TIME, 
       ESTD_UNSPILL_COUNT,
       ESTD_UNSPILL_TIME
  FROM V$STREAMS_POOL_ADVICE;

                         Oracle Streams Pool Estimated    Estimated Estimated
Oracle Streams Pool Size                Size     Spill        Spill   Unspill
        for Estimate(MB)              Factor     Count         Time     Count
------------------------ ------------------- --------- ------------ ---------
               24           .1        89        52.00         0          .00
               48           .2        78        48.00         0          .00
               72           .3        71        43.00         0          .00
               96           .4        66        37.00         0          .00
              120           .5        59        32.00         0          .00
              144           .6        52        26.00         0          .00
              168           .7        39        20.00         0          .00
              192           .8        27        12.00         0          .00
              216           .9        15         5.00         0          .00
              240          1.0         0          .00         0          .00
              264          1.1         0          .00         0          .00
              288          1.2         0          .00         0          .00
              312          1.3         0          .00         0          .00
              336          1.4         0          .00         0          .00
              360          1.5         0          .00         0          .00
              384          1.6         0          .00         0          .00
              408          1.7         0          .00         0          .00
              432          1.8         0          .00         0          .00
              456          1.9         0          .00         0          .00
              480          2.0         0          .00         0          .00
</pre>
<p>Based on these results, the current size of the <a href="strms_glossary.htm#CHDHGDCA"><span class="xrefglossterm">Oracle Streams pool</span></a> is the optimal size. That is, this size is the smallest size for which the estimated number of spilled and unspilled <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s is zero.</p>
</div>
<!-- class="sect2" -->
<div id="STRMS1007" class="sect2"><a id="sthref1298"></a>
<h3 class="sect2">Query Result that Advises Decreasing the Oracle Streams Pool Size</h3>
<p>Consider the following results returned by the <code dir="ltr">V$STREAMS_POOL_ADVICE</code> view:</p>
<pre dir="ltr">COLUMN STREAMS_POOL_SIZE_FOR_ESTIMATE  HEADING &#39;Oracle Streams Pool|Size for Estimate&#39;
  FORMAT 999999999999
COLUMN STREAMS_POOL_SIZE_FACTOR HEADING &#39;Oracle Streams Pool|Size|Factor&#39; FORMAT 99.9
COLUMN ESTD_SPILL_COUNT HEADING &#39;Estimated|Spill|Count&#39; FORMAT 99999999
COLUMN ESTD_SPILL_TIME HEADING &#39;Estimated|Spill|Time&#39; FORMAT 99999999.99
COLUMN ESTD_UNSPILL_COUNT HEADING &#39;Estimated|Unspill|Count&#39; FORMAT 99999999
COLUMN ESTD_UNSPILL_TIME HEADING &#39;Estimated|Unspill|Time&#39; FORMAT 99999999.99
 
SELECT STREAMS_POOL_SIZE_FOR_ESTIMATE,
       STREAMS_POOL_SIZE_FACTOR, 
       ESTD_SPILL_COUNT, 
       ESTD_SPILL_TIME, 
       ESTD_UNSPILL_COUNT,
       ESTD_UNSPILL_TIME
  FROM V$STREAMS_POOL_ADVICE;

                         Oracle Streams Pool Estimated    Estimated Estimated
Oracle Streams Pool Size                Size     Spill        Spill   Unspill
        for Estimate(MB)              Factor     Count         Time     Count
------------------------ ------------------- --------- ------------ ---------
               24           .1       158        62.00         0          .00
               48           .2       145        59.00         0          .00
               72           .3       137        53.00         0          .00
               96           .4       122        50.00         0          .00
              120           .5       114        48.00         0          .00
              144           .6       103        45.00         0          .00
              168           .7         0          .00         0          .00
              192           .8         0          .00         0          .00
              216           .9         0          .00         0          .00
              240          1.0         0          .00         0          .00
              264          1.1         0          .00         0          .00
              288          1.2         0          .00         0          .00
              312          1.3         0          .00         0          .00
              336          1.4         0          .00         0          .00
              360          1.5         0          .00         0          .00
              384          1.6         0          .00         0          .00
              408          1.7         0          .00         0          .00
              432          1.8         0          .00         0          .00
              456          1.9         0          .00         0          .00
              480          2.0         0          .00         0          .00
</pre>
<p>Based on these results, 168 megabytes, or 70% of the size of the current <a href="strms_glossary.htm#CHDHGDCA"><span class="xrefglossterm">Oracle Streams pool</span></a>, is the optimal size for the Oracle Streams pool. That is, this size is the smallest size for which the estimated number of spilled and unspilled messages is zero.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
After you adjust the size of the Oracle Streams pool, it might take some time for the new size to result in new output for the <code dir="ltr">V$STREAMS_POOL_ADVICE</code> view.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1014369"></a>
<div id="STRMS172" class="sect1">
<h2 class="sect1">Monitoring Compatibility in an Oracle Streams Environment<a id="sthref1299"></a><a id="sthref1300"></a><a id="sthref1301"></a></h2>
<p>Some database objects and data types are not compatible with Oracle Streams <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>es, <a href="strms_glossary.htm#CBACHEDJ"><span class="xrefglossterm">synchronous capture</span></a>s, and <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>es. If one of these <a href="strms_glossary.htm#CHDDDJGJ"><span class="xrefglossterm">Oracle Streams client</span></a>s tries to process an unsupported database object or data type, errors result.</p>
<p>The queries in the following sections show Oracle Streams compatibility for database objects and columns in the local database:</p>
<ul>
<li>
<p><a href="#CFFGIHDH">Monitoring Compatibility for Capture Processes</a></p>
</li>
<li>
<p><a href="#CFFHHBAB">Listing Database Objects and Columns Not Compatible with Synchronous Captures</a></p>
</li>
<li>
<p><a href="#CFFDCJID">Monitoring Compatibility for Apply Processes</a></p>
</li>
</ul>
<a id="CFFGIHDH"></a>
<div id="STRMS1008" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Compatibility for Capture Processes</h3>
<p>This section contains these topics:</p>
<ul>
<li>
<p><a href="#i1014352">Listing the Database Objects That Are Not Compatible with Capture Processes</a></p>
</li>
<li>
<p><a href="#i1014364">Listing the Database Objects Recently Compatible with Capture Processes</a></p>
</li>
</ul>
<a id="i1014352"></a>
<div id="STRMS1009" class="sect3">
<h4 class="sect3">Listing the Database Objects That Are Not Compatible with Capture Processes<a id="sthref1302"></a><a id="sthref1303"></a><a id="sthref1304"></a><a id="sthref1305"></a></h4>
<p>A database object is not compatible with <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>es if capture processes cannot capture changes to it. The query in this section displays the following information about database objects that are not compatible with capture processes:</p>
<ul>
<li>
<p>The object owner</p>
</li>
<li>
<p>The object name</p>
</li>
<li>
<p>The reason why the object is not compatible with capture processes</p>
</li>
<li>
<p>Whether capture processes automatically filter out changes to the database object (<code dir="ltr">AUTO_FILTERED</code> column)</p>
</li>
</ul>
<p>If capture processes automatically filter out changes to a database object, then the <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>s used by the capture processes do not need to filter them out explicitly. For example, capture processes automatically filter out changes to domain indexes. However, if changes to incompatible database objects are not filtered out automatically, then the rule sets used by the capture process must filter them out to avoid errors.</p>
<p>For example, suppose the rule sets for a capture process instruct the capture process to capture all of the changes made to a specific schema. Also suppose that the query in this section shows that one object in this schema is not compatible with capture processes, and that changes to the object are not filtered out automatically. In this case, you can add a <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a> to the <a href="strms_glossary.htm#CHDBHJHI"><span class="xrefglossterm">negative rule set</span></a> for the capture process to filter out changes to the incompatible database object.</p>
<p>Run the following query to list the database objects in the local database that are not compatible with capture processes:</p>
<pre dir="ltr">COLUMN OWNER HEADING &#39;Object|Owner&#39; FORMAT A8
COLUMN TABLE_NAME HEADING &#39;Object Name&#39; FORMAT A30
COLUMN REASON HEADING &#39;Reason&#39; FORMAT A30
COLUMN AUTO_FILTERED HEADING &#39;Auto|Filtered?&#39; FORMAT A9

SELECT OWNER, TABLE_NAME, REASON, AUTO_FILTERED FROM DBA_STREAMS_UNSUPPORTED;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Object                                                                 Auto
Owner    Object Name                    Reason                         Filtered?
-------- ------------------------------ ------------------------------ ---------
IX       AQ$_ORDERS_QUEUETABLE_G        column with user-defined type  NO
IX       AQ$_ORDERS_QUEUETABLE_H        unsupported column exists      NO
IX       AQ$_ORDERS_QUEUETABLE_I        unsupported column exists      NO
IX       AQ$_ORDERS_QUEUETABLE_L        AQ queue table                 NO
IX       AQ$_ORDERS_QUEUETABLE_S        AQ queue table                 NO
IX       AQ$_ORDERS_QUEUETABLE_T        AQ queue table                 NO
IX       AQ$_STREAMS_QUEUE_TABLE_C      AQ queue table                 NO
IX       AQ$_STREAMS_QUEUE_TABLE_G      column with user-defined type  NO
IX       AQ$_STREAMS_QUEUE_TABLE_H      unsupported column exists      NO
IX       AQ$_STREAMS_QUEUE_TABLE_I      unsupported column exists      NO
IX       AQ$_STREAMS_QUEUE_TABLE_L      AQ queue table                 NO
IX       AQ$_STREAMS_QUEUE_TABLE_S      AQ queue table                 NO
IX       AQ$_STREAMS_QUEUE_TABLE_T      AQ queue table                 NO
IX       ORDERS_QUEUETABLE              column with user-defined type  NO
IX       STREAMS_QUEUE_TABLE            column with user-defined type  NO
OE       ACTION_TABLE                   column with user-defined type  NO
OE       CATEGORIES_TAB                 column with user-defined type  NO
.
.
.
</pre>
<p><a id="sthref1306"></a>Notice that the <code dir="ltr">Auto</code> <code dir="ltr">Filtered?</code> column is <code dir="ltr">YES</code> for the <code dir="ltr">sh.dr$sup_text_indx$i</code> domain index. A capture process automatically filters out data manipulation language (DML) changes to this database object, even if the rules sets for a capture process instruct the capture process to capture changes to it. By default, a capture process also filters out data definition language (DDL) changes to these database objects. However, if you want to capture these DDL changes, then use the <code dir="ltr">DBMS_CAPTURE_ADM.SET_PARAMETER</code> procedure to set the <code dir="ltr">set_autofiltered_table_ddl</code> capture process parameter to <code dir="ltr">N</code> and configure the capture process rule sets to capture these DDL changes.</p>
<p>Because the <code dir="ltr">Auto</code> <code dir="ltr">Filtered?</code> column is <code dir="ltr">NO</code> for other database objects listed in the example output, capture processes do not filter out changes to these database objects automatically. If a capture process attempts to process changes to these unsupported database objects, then the capture process raises an error. However, you can avoid these errors by configuring rules sets that instruct the capture process not to capture changes to these unsupported objects.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>The results of the query in this section depend on the compatibility level of the database. More database objects are incompatible with capture processes at lower compatibility levels. The <code dir="ltr">COMPATIBLE</code> initialization parameter controls the compatibility level of the database.</p>
</li>
<li>
<p>For capture processes, you cannot use <a href="strms_glossary.htm#CHDGHJDE"><span class="xrefglossterm">rule-based transformation</span></a>s to exclude a column of an unsupported data type. The entire database object must be excluded to avoid capture errors.</p>
</li>
<li>
<p>The <code dir="ltr">DBA_STREAMS_UNSUPPORTED</code> view only pertains to capture processes in Oracle Database 11<span class="italic">g</span> Release 1 (11.1) and later databases. This view does not pertain to <a href="strms_glossary.htm#CBACHEDJ"><span class="xrefglossterm">synchronous capture</span></a>s and <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>es.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_rules.htm#g1049257">Chapter 5, &#34;How Rules Are Used in Oracle Streams&#34;</a></p>
</li>
<li>
<p><a class="olink REFRN10019" href="../REFRN/GUID-6C57EE11-BD06-4BB8-A0F7-D6CDDD086FA9.htm#REFRN10019"><span class="italic">Oracle Database Reference</span></a> and <a class="olink UPGRD005" href="../UPGRD/intro.htm#UPGRD005"><span class="italic">Oracle Database Upgrade Guide</span></a> for more information about the <code dir="ltr">COMPATIBLE</code> initialization parameter</p>
</li>
<li>
<p><a class="olink ARPLS306" href="../ARPLS/d_cap_a.htm#ARPLS306"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code dir="ltr">DBMS_CAPTURE_ADM.SET_PARAMETER</code> procedure</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="i1014364"></a>
<div id="STRMS1010" class="sect3">
<h4 class="sect3">Listing the Database Objects Recently Compatible with Capture Processes<a id="sthref1307"></a><a id="sthref1308"></a><a id="sthref1309"></a></h4>
<p>The query in this section displays the following information about database objects that have become compatible with <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>es in a recent release of Oracle Database:</p>
<ul>
<li>
<p>The object owner</p>
</li>
<li>
<p>The object name</p>
</li>
<li>
<p>The reason why the object was not compatible with capture processes in previous releases of&nbsp;Oracle Database</p>
</li>
<li>
<p>The Oracle Database release in which the object became compatible with capture processes</p>
</li>
</ul>
<p>Run the following query to display this information for the local database:</p>
<pre dir="ltr">COLUMN OWNER HEADING &#39;Owner&#39; FORMAT A10
COLUMN TABLE_NAME HEADING &#39;Object Name&#39; FORMAT A20
COLUMN REASON HEADING &#39;Reason&#39; FORMAT A30
COLUMN COMPATIBLE HEADING &#39;Compatible&#39; FORMAT A10

SELECT OWNER, TABLE_NAME, REASON, COMPATIBLE FROM DBA_STREAMS_NEWLY_SUPPORTED;
</pre>
<p>The following is a sample of the output from this query:</p>
<pre dir="ltr">Owner      Object Name          Reason                         Compatible
---------- -------------------- ------------------------------ ----------
HR         COUNTRIES            IOT                            10.1
OE         WAREHOUSES           table with XMLType column      11.1
SH         CAL_MONTH_SALES_MV   materialized view              10.1
SH         FWEEK_PSCAT_SALES_MV materialized view              10.1
</pre>
<p>The <code dir="ltr">Compatible</code> column shows the minimum database compatibility for capture processes to support the database object. If the local database compatibility is equal to or higher than the value in the <code dir="ltr">Compatible</code> column for a database object, then capture processes can capture changes to the database object successfully. You control the compatibility of a database using the <code dir="ltr">COMPATIBLE</code> initialization parameter.</p>
<p>If your Oracle Streams environment includes databases that are running different versions of the Oracle Database, then you can configure <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s that use the <code dir="ltr">GET_COMPATIBLE</code> member function for LCRs to filter out LCRs that are not compatible with particular databases. These rules can be added to the <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>s of capture processes, <a href="strms_glossary.htm#CBACHEDJ"><span class="xrefglossterm">synchronous capture</span></a>s, <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>s, and <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>es to filter out incompatible LCRs wherever necessary in a stream.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code dir="ltr">DBA_STREAMS_NEWLY_SUPPORTED</code> view only pertains to capture processes in Oracle Database 11<span class="italic">g</span> Release 1 (11.1) and later databases. This view does not pertain to synchronous captures and apply processes.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink REFRN10019" href="../REFRN/GUID-6C57EE11-BD06-4BB8-A0F7-D6CDDD086FA9.htm#REFRN10019"><span class="italic">Oracle Database Reference</span></a> and <a class="olink UPGRD005" href="../UPGRD/intro.htm#UPGRD005"><span class="italic">Oracle Database Upgrade Guide</span></a> for more information about the <code dir="ltr">COMPATIBLE</code> initialization parameter</p>
</li>
<li>
<p><a href="#i1014352">&#34;Listing the Database Objects That Are Not Compatible with Capture Processes&#34;</a></p>
</li>
<li>
<p><a href="strms_adrules.htm#i1016342">&#34;Rule Conditions that Instruct Oracle Streams Clients to Discard Unsupported LCRs&#34;</a> for information about creating rules that use the <code dir="ltr">GET_COMPATIBLE</code> member function for LCRs</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CFFHHBAB"></a>
<div id="STRMS1011" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Listing Database Objects and Columns Not Compatible with Synchronous Captures<a id="sthref1310"></a><a id="sthref1311"></a><a id="sthref1312"></a></h3>
<p>A database object or a column in a table is not compatible with <a href="strms_glossary.htm#CBACHEDJ"><span class="xrefglossterm">synchronous capture</span></a>s if synchronous captures cannot capture changes to it. For example, synchronous captures cannot capture changes to object tables. Synchronous captures can capture changes to relational tables, but they cannot capture changes to columns of some data types.</p>
<p>The query in this section displays the following information about database objects and columns that are not compatible with synchronous captures:</p>
<ul>
<li>
<p>The object owner</p>
</li>
<li>
<p>The object name</p>
</li>
<li>
<p>The column name</p>
</li>
<li>
<p>The reason why the column is not compatible with synchronous captures</p>
</li>
</ul>
<p>To list the columns that are not compatible with synchronous captures in the local database, run the following query:</p>
<pre dir="ltr">COLUMN OWNER HEADING &#39;Object|Owner&#39; FORMAT A8
COLUMN TABLE_NAME HEADING &#39;Object Name&#39; FORMAT A20
COLUMN COLUMN_NAME HEADING &#39;Column Name&#39; FORMAT A20
COLUMN SYNC_CAPTURE_REASON HEADING &#39;Synchronous|Capture Reason&#39; FORMAT A25
 
SELECT OWNER,
       TABLE_NAME,
       COLUMN_NAME,
       SYNC_CAPTURE_REASON
 FROM DBA_STREAMS_COLUMNS
 WHERE SYNC_CAPTURE_VERSION IS NULL;
</pre>
<p>When a query on the <code dir="ltr">DBA_STREAMS_COLUMNS</code> view returns <code dir="ltr">NULL</code> for <code dir="ltr">SYNC_CAPTURE_VERSION</code>, it means that synchronous captures do not support the column. The <code dir="ltr">WHERE</code> clause in the query ensures that the query only returns columns that are not supported by synchronous captures.</p>
<p>The following is a sample of the output from this query:</p>
<pre dir="ltr">Object                                             Synchronous
Owner    Object Name          Column Name          Capture Reason
-------- -------------------- -------------------- -------------------------
.
.
.
SH       SALES_TRANSACTIONS_E UNIT_COST            external table
         XT
OE       LINEITEM_TABLE       SYS_XDBPD$           object table
OE       LINEITEM_TABLE       ITEMNUMBER           object table
PM       PRINT_MEDIA          AD_FINALTEXT         table with nested table c
                                                   olumn
.
.
.
</pre>
<p>To avoid synchronous capture errors, configure the synchronous capture <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a> to ensure that the synchronous capture does not try to capture changes to an unsupported database object, such as an object table. To avoid synchronous capture errors while capturing changes to relational tables, you have the following options:</p>
<ul>
<li>
<p>Configure the synchronous capture rule set to ensure that the synchronous capture does not try to capture changes to a table that contains one or more unsupported columns.</p>
</li>
<li>
<p>Configure <a href="strms_glossary.htm#CHDGHJDE"><span class="xrefglossterm">rule-based transformation</span></a>s to exclude columns that are not supported by synchronous captures.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Synchronous capture is available in Oracle Database 11<span class="italic">g</span> Release 1 (11.1) and later databases. It is not available in previous releases of Oracle Database.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_capture.htm#CACFEDIE">&#34;Data Types Captured by Synchronous Capture&#34;</a></p>
</li>
<li>
<p><a href="strms_transform.htm#CACIIJHJ">Chapter 6, &#34;Rule-Based Transformations&#34;</a></p>
</li>
<li>
<p><a href="strms_rules.htm#g1049257">Chapter 5, &#34;How Rules Are Used in Oracle Streams&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CFFDCJID"></a>
<div id="STRMS1012" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Compatibility for Apply Processes</h3>
<p>This section contains these topics:</p>
<ul>
<li>
<p><a href="#CFFGFIJD">Listing Database Objects and Columns Not Compatible with Apply Processes</a></p>
</li>
<li>
<p><a href="#CFFJAFCD">Listing Columns That Have Become Compatible with Apply Processes Recently</a></p>
</li>
</ul>
<a id="CFFGFIJD"></a>
<div id="STRMS1013" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Listing Database Objects and Columns Not Compatible with Apply Processes<a id="sthref1313"></a><a id="sthref1314"></a><a id="sthref1315"></a></h4>
<p>A database object or a column in a table is not compatible with <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>es if apply processes cannot apply changes to it. For example, apply processes cannot apply changes to object tables. Apply processes can apply changes to relational tables, but they cannot apply changes to columns of some data types.</p>
<p>The query in this section displays the following information about database objects and columns that are not compatible with apply processes:</p>
<ul>
<li>
<p>The object owner</p>
</li>
<li>
<p>The object name</p>
</li>
<li>
<p>The column name</p>
</li>
<li>
<p>The reason why the column is not compatible with apply processes</p>
</li>
</ul>
<p>To list the columns that are not compatible with apply processes in the local database, run the following query:</p>
<pre dir="ltr">COLUMN OWNER HEADING &#39;Object|Owner&#39; FORMAT A8
COLUMN TABLE_NAME HEADING &#39;Object Name&#39; FORMAT A20
COLUMN COLUMN_NAME HEADING &#39;Column Name&#39; FORMAT A20
COLUMN APPLY_REASON HEADING &#39;Apply Process Reason&#39; FORMAT A25
 
SELECT OWNER,
       TABLE_NAME,
       COLUMN_NAME,
       APPLY_REASON
 FROM DBA_STREAMS_COLUMNS
 WHERE APPLY_VERSION IS NULL;
</pre>
<p>When a query on the <code dir="ltr">DBA_STREAMS_COLUMNS</code> view returns <code dir="ltr">NULL</code> for <code dir="ltr">APPLY_VERSION</code>, it means that apply processes do not support the column. The <code dir="ltr">WHERE</code> clause in the query ensures that the query only returns columns that are not supported by apply processes.</p>
<p>The following is a sample of the output from this query:</p>
<pre dir="ltr">Object
Owner    Object Name          Column Name          Apply Process Reason
-------- -------------------- -------------------- -------------------------
.
.
.
SH       SALES_TRANSACTIONS_E CHANNEL_ID           external table
         XT
OE       ACTION_TABLE         ACTIONED_BY          object table
OE       LINEITEM_TABLE       PART                 object table
PM       ONLINE_MEDIA         PRODUCT_AUDIO        ADT column
OE       CATEGORIES_TAB       CATEGORY_DESCRIPTION object table
.
.
.
</pre>
<p>To avoid apply errors, configure the apply process <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>s to ensure that the apply process does not try to apply changes to an unsupported database object, such as an object table. To avoid apply errors while applying changes to relational tables, you have the following options:</p>
<ul>
<li>
<p>Configure the apply process rule sets to ensure that the apply process does not try to apply changes to a table that contains one or more unsupported columns.</p>
</li>
<li>
<p>Configure <a href="strms_glossary.htm#CHDGHJDE"><span class="xrefglossterm">rule-based transformation</span></a>s to exclude columns that are not supported by apply processes.</p>
</li>
<li>
<p>Configure <a href="strms_glossary.htm#CHDEAFJH"><span class="xrefglossterm">procedure DML handler</span></a>s to exclude columns that are not supported by apply processes.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_apply.htm#i1006373">&#34;Data Types Applied&#34;</a></p>
</li>
<li>
<p><a href="strms_transform.htm#CACIIJHJ">Chapter 6, &#34;Rule-Based Transformations&#34;</a></p>
</li>
<li>
<p><a href="strms_apply.htm#BABGBDGD">&#34;DML Handlers&#34;</a></p>
</li>
<li>
<p><a href="strms_rules.htm#g1049257">Chapter 5, &#34;How Rules Are Used in Oracle Streams&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CFFJAFCD"></a>
<div id="STRMS1014" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Listing Columns That Have Become Compatible with Apply Processes Recently</h4>
<p>The query in this section displays the following information about database objects and columns that have become compatible with <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>es in a recent release of Oracle Database:</p>
<ul>
<li>
<p>The object owner</p>
</li>
<li>
<p>The object name</p>
</li>
<li>
<p>The column name</p>
</li>
<li>
<p>The reason why the object was not compatible with apply processes in previous releases of&nbsp;Oracle Database</p>
</li>
<li>
<p>The Oracle Database release in which the object became compatible with apply processes</p>
</li>
</ul>
<p>Run the following query to display this information for the local database:</p>
<pre dir="ltr">COLUMN OWNER HEADING &#39;Object|Owner&#39; FORMAT A8
COLUMN TABLE_NAME HEADING &#39;Object Name&#39; FORMAT A15
COLUMN COLUMN_NAME HEADING &#39;Column Name&#39; FORMAT A15
COLUMN APPLY_VERSION HEADING &#39;Apply|Process|Vesion&#39; FORMAT 99.9
COLUMN APPLY_REASON HEADING &#39;Apply|Process Reason&#39; FORMAT A25
 
SELECT OWNER,
       TABLE_NAME,
       COLUMN_NAME,
       APPLY_VERSION,
       APPLY_REASON
 FROM DBA_STREAMS_COLUMNS
 WHERE APPLY_VERSION &gt; 11;
</pre>
<p>When a query on the <code dir="ltr">DBA_STREAMS_COLUMNS</code> view returns a non-<code dir="ltr">NULL</code> value for <code dir="ltr">APPLY_VERSION</code>, it means that apply processes support the column. The <code dir="ltr">WHERE</code> clause in the query ensures that the query only returns columns that are supported by apply processes. This query returns the columns that have become supported by apply processes in Oracle Database 11<span class="italic">g</span> Release 1 and later.</p>
<p>The following is a sample of the output from this query:</p>
<pre dir="ltr">                                           Apply
Object                                   Process Apply
Owner    Object Name     Column Name      Vesion Process Reason
-------- --------------- --------------- ------- -------------------------
OE       WAREHOUSES      WAREHOUSE_SPEC     11.1 XMLType column
</pre>
<p>The <code dir="ltr">Apply</code> <code dir="ltr">Process</code> <code dir="ltr">Version</code> column shows the minimum database compatibility for apply processes to support the column. If the local database compatibility is equal to or higher than the value in the <code dir="ltr">Apply</code> <code dir="ltr">Process</code> <code dir="ltr">Version</code> column for a column, then apply processes can apply changes to the column successfully. You control the compatibility of a database using the <code dir="ltr">COMPATIBLE</code> initialization parameter.</p>
<p>If your Oracle Streams environment includes databases that are running different versions of the Oracle Database, then you can configure <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s that use the <code dir="ltr">GET_COMPATIBLE</code> member function for LCRs to filter out LCRs that are not compatible with particular databases. These rules can be added to the <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>s of <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>es, <a href="strms_glossary.htm#CBACHEDJ"><span class="xrefglossterm">synchronous capture</span></a>s, <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>s, and apply processes to filter out incompatible LCRs wherever necessary in a stream.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When this query returns <code dir="ltr">NULL</code> for <code dir="ltr">Apply</code> <code dir="ltr">Process</code> <code dir="ltr">Reason</code>, it means that the column has always been supported by apply processes since the first Oracle Database release that included Oracle Streams.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink REFRN10019" href="../REFRN/GUID-6C57EE11-BD06-4BB8-A0F7-D6CDDD086FA9.htm#REFRN10019"><span class="italic">Oracle Database Reference</span></a> and <a class="olink UPGRD005" href="../UPGRD/intro.htm#UPGRD005"><span class="italic">Oracle Database Upgrade Guide</span></a> for more information about the <code dir="ltr">COMPATIBLE</code> initialization parameter</p>
</li>
<li>
<p><a href="#CFFGFIJD">&#34;Listing Database Objects and Columns Not Compatible with Apply Processes&#34;</a></p>
</li>
<li>
<p><a href="strms_adrules.htm#i1016342">&#34;Rule Conditions that Instruct Oracle Streams Clients to Discard Unsupported LCRs&#34;</a> for information about creating rules that use the <code dir="ltr">GET_COMPATIBLE</code> member function for LCRs</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1021239"></a>
<div id="STRMS1015" class="sect1">
<h2 class="sect1">Monitoring Oracle Streams Performance Using AWR and Statspack<a id="sthref1316"></a><a id="sthref1317"></a></h2>
<p>You can use Automatic Workload Repository (AWR) to monitor performance statistics related to Oracle Streams. If AWR is not available on your database, then you can use the Statspack package to monitor performance statistics related to Oracle Streams. The most current instructions and information about installing and using the Statspack package are contained in the <code dir="ltr">spdoc.txt</code> file installed with your database. Refer to that file for Statspack information. On UNIX systems, the file is located in the <code dir="ltr"><span class="codeinlineitalic">ORACLE_HOME</span></code><code dir="ltr">/rdbms/admin</code> directory. On Windows systems, the file is located in the <code dir="ltr"><span class="codeinlineitalic">ORACLE_HOME</span></code><code dir="ltr">\rdbms\admin</code> directory.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink TGDBA169" href="../TGDBA/gather_stats.htm#TGDBA169"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for more information about AWR</p>
</li>
<li>
<p><a href="strms_topology.htm#BIHBBDEH">Chapter 23, &#34;Monitoring the Oracle Streams Topology and Performance&#34;</a> for information about monitoring performance using the Oracle Streams Performance Advisor</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5963">
<tr>
<td class="cellalignment5970">
<table class="cellalignment5968">
<tr>
<td class="cellalignment5967"><a href="strms_trmon.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5967"><a href="pt_trouble.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5972">
<table class="cellalignment5966">
<tr>
<td class="cellalignment5967"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5967"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5967"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5967"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5967"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5967"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>