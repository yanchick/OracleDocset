<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-104441"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Advanced%20Propagation%20Concepts"></a><title>Advanced Propagation Concepts</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1032"/>
<meta name="dcterms.created" content="2014-12-23T13:28:6Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Streams Concepts and Administration"/>
<meta name="dcterms.identifier" content="E53116-02"/>
<meta name="dcterms.isVersionOf" content="STRMS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="strms_glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="strms_adqueue.htm" title="Previous" type="text/html"/>
<link rel="Next" href="strms_adapply.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E53116-02.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">17/57</span> <!-- End Header -->
<div id="STRMS010" class="chapter"><a id="BCEEBGHI"></a>
<h1 class="chapter"><span class="secnum">9</span> Advanced Propagation Concepts</h1>
<p><a id="sthref447"></a><a id="sthref448"></a>The following topics contain conceptual information about staging <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s in <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a>s and propagating messages from one queue to another:</p>
<ul>
<li>
<p><a href="#i1006935">Propagation Jobs</a></p>
</li>
<li>
<p><a href="#i1007091">Oracle Streams Data Dictionary for Propagations</a></p>
</li>
<li>
<p><a href="#BCEEDDHI">Binary File Propagation</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_prop.htm#i1006210">&#34;Message Propagation Between Queues&#34;</a></p>
</li>
<li>
<p><a href="strms_mprop.htm#i1011128">&#34;Managing Oracle Streams Propagations and Propagation Jobs&#34;</a></p>
</li>
<li>
<p><a class="olink ADQUE" href="../ADQUE/toc.htm"><span class="italic">Oracle Database Advanced Queuing User&#39;s Guide</span></a> for detailed information about the propagation infrastructure in&nbsp;Oracle Streams AQ</p>
</li>
</ul>
</div>
<a id="i1006935"></a>
<div id="STRMS174" class="sect1">
<h2 class="sect1">Propagation Jobs<a id="sthref449"></a><a id="sthref450"></a><a id="sthref451"></a><a id="sthref452"></a></h2>
<p>An Oracle Streams <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a> is configured internally using Oracle Scheduler. Therefore, a <span class="bold">propagation job</span> is a job that propagates <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s from a <a href="strms_glossary.htm#CHDCGACA"><span class="xrefglossterm">source queue</span></a> to a <a href="strms_glossary.htm#CHDHJHJD"><span class="xrefglossterm">destination queue</span></a>. Like other Oracle Scheduler jobs, propagation jobs have an owner, and they use slave processes (<code dir="ltr">j</code><code dir="ltr"><span class="codeinlineitalic">nnn</span></code>) as needed to execute jobs.</p>
<p>The following procedures can create a propagation job when they create a propagation:</p>
<ul>
<li>
<p>The <code dir="ltr">ADD_GLOBAL_PROPAGATION_RULES</code> procedure in the <code dir="ltr">DBMS_STREAMS_ADM</code> package</p>
</li>
<li>
<p>The <code dir="ltr">ADD_SCHEMA_PROPAGATION_RULES</code> procedure in the <code dir="ltr">DBMS_STREAMS_ADM</code> package</p>
</li>
<li>
<p>The <code dir="ltr">ADD_TABLE_PROPAGATION_RULES</code> procedure in the <code dir="ltr">DBMS_STREAMS_ADM</code> package</p>
</li>
<li>
<p>The <code dir="ltr">ADD_SUBSET_PROPAGATION_RULE</code> procedure in the <code dir="ltr">DBMS_STREAMS_ADM</code> package</p>
</li>
<li>
<p>The <code dir="ltr">CREATE_PROPAGATION</code> procedure in the <code dir="ltr">DBMS_PROPAGATION_ADM</code> package</p>
</li>
</ul>
<p>When one of these procedures creates a propagation, a new propagation job is created in the following cases:</p>
<ul>
<li>
<p>If the <code dir="ltr">queue_to_queue</code> parameter is set to <code dir="ltr">TRUE</code>, then a new propagation job always is created for the propagation. Each queue-to-queue propagation has its own propagation job. However, a slave process can be used by multiple propagation jobs.</p>
</li>
<li>
<p>If the <code dir="ltr">queue_to_queue</code> parameter is set to <code dir="ltr">FALSE</code>, then a propagation job is created when no propagation job exists for the source queue and database link specified. If a propagation job already exists for the specified source queue and database link, then the new propagation uses the existing propagation job and shares this propagation job with all of the other queue-to-dblink propagations that use the same database link.</p>
</li>
</ul>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#i1006953">Propagation Scheduling and Oracle Streams Propagations</a></p>
</li>
<li>
<p><a href="#BCEJBAFH">Propagation Jobs and RESTRICTED SESSION</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
The source queue owner performs the propagation, but the propagation job is owned by the user who creates it. These two users might or might not be the same.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_prop.htm#CHDCJIJF">&#34;Queue-to-Queue Propagations&#34;</a></p>
</li>
<li>
<p><a class="olink ADMIN035" href="../ADMIN/schedadmin.htm#ADMIN035"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information about Oracle Scheduler</p>
</li>
</ul>
</div>
<a id="i1006953"></a>
<div id="STRMS494" class="sect2">
<h3 class="sect2">Propagation Scheduling and Oracle Streams Propagations<a id="sthref453"></a></h3>
<p>A <span class="bold">propagation schedule</span> specifies how often a propagation job propagates messages from a source queue to a destination queue. Each queue-to-queue propagation has its own propagation job and propagation schedule, but queue-to-dblink propagations that use the same propagation job have the same propagation schedule.</p>
<p>A default propagation schedule is established when a new propagation job is created by a procedure in the <code dir="ltr">DBMS_STREAMS_ADM</code> or <code dir="ltr">DBMS_PROPAGATION_ADM</code> package.</p>
<p>The default schedule has the following properties:</p>
<ul>
<li>
<p>The start time is <code dir="ltr">SYSDATE()</code>.</p>
</li>
<li>
<p>The duration is <code dir="ltr">NULL</code>, which means infinite.</p>
</li>
<li>
<p>The next time is <code dir="ltr">NULL</code>, which means that propagation restarts as soon as it finishes the current duration.</p>
</li>
<li>
<p>The latency is three seconds, which is the wait time after a queue becomes empty to resubmit the propagation job. Therefore, the latency is the maximum wait, in seconds, in the propagation window for a message to be propagated after it is enqueued.</p>
</li>
</ul>
<p>You can alter the schedule for a propagation job using the <code dir="ltr">ALTER_PROPAGATION_SCHEDULE</code> procedure in the <code dir="ltr">DBMS_AQADM</code> package. Changes made to a propagation job affect all propagations that use the propagation job.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#i1006935">&#34;Propagation Jobs&#34;</a></p>
</li>
<li>
<p><a href="strms_mprop.htm#i1006659">&#34;Altering the Schedule of a Propagation Job&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BCEJBAFH"></a>
<div id="STRMS495" class="sect2">
<h3 class="sect2">Propagation Jobs and RESTRICTED SESSION<a id="sthref454"></a><a id="sthref455"></a></h3>
<p>When the restricted session is enabled during system startup by issuing a <code dir="ltr">STARTUP</code> <code dir="ltr">RESTRICT</code> statement, propagation jobs with enabled propagation schedules do not propagate messages. When the restricted session is disabled, each propagation schedule that is enabled and ready to run will run when there is an available slave process.</p>
<p>When the restricted session is enabled in a running database by the SQL statement <code dir="ltr">ALTER</code> <code dir="ltr">SYSTEM</code> <code dir="ltr">ENABLE</code> <code dir="ltr">RESTRICTED</code> <code dir="ltr">SESSION</code>, any running propagation job continues to run to completion. However, any new propagation job submitted for a propagation schedule is not started. Therefore, propagation for an enabled schedule can eventually come to a halt.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1007091"></a>
<div id="STRMS496" class="sect1">
<h2 class="sect1">Oracle Streams Data Dictionary for Propagations<a id="sthref456"></a><a id="sthref457"></a></h2>
<p>When a database object is prepared for <a href="strms_glossary.htm#CHDCCEJE"><span class="xrefglossterm">instantiation</span></a> at a <a href="strms_glossary.htm#CHDHFBJG"><span class="xrefglossterm">source database</span></a>, an Oracle Streams data dictionary is populated automatically at the database where changes to the object are captured by a <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>. The Oracle Streams data dictionary is a multiversioned copy of some of the information in the primary data dictionary at a source database. The Oracle Streams data dictionary maps object numbers, object version information, and internal column numbers from the source database into table names, column names, and column data types. This mapping keeps each <a href="strms_glossary.htm#CHDCHEJI"><span class="xrefglossterm">captured LCR</span></a> as small as possible, because the message can store numbers rather than names internally.</p>
<p>The mapping information in the Oracle Streams data dictionary at the source database is needed to evaluate <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s at any database that propagates the captured LCRs from the source database. To make this mapping information available to a <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>, Oracle automatically populates a multiversioned Oracle Streams data dictionary at each database that has an Oracle Streams propagation. Oracle automatically sends internal messages that contain relevant information from the Oracle Streams data dictionary at the source database to all other databases that receive captured LCRs from the source database.</p>
<p>The Oracle Streams data dictionary information contained in these internal messages in a <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> might or might not be propagated by a propagation. Which Oracle Streams data dictionary information to propagate depends on the <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>s for the propagation. When a propagation encounters Oracle Streams data dictionary information for a table, the propagation rule sets are evaluated with partial information that includes the source database name, table name, and table owner. If the partial rule evaluation of these rule sets determines that there might be relevant LCRs for the given table from the specified database, then the Oracle Streams data dictionary information for the table is propagated.</p>
<p>When Oracle Streams data dictionary information is propagated to a destination queue, it is incorporated into the Oracle Streams data dictionary at the database that contains the destination queue, in addition to being enqueued into the destination queue. Therefore, a propagation reading the destination queue in a directed networks configuration can forward LCRs immediately without waiting for the Oracle Streams data dictionary to be populated. In this way, the Oracle Streams data dictionary for a source database always reflects the correct state of the relevant database objects for the LCRs relating to these database objects.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_adcapture.htm#i1010145">&#34;The Oracle Streams Data Dictionary&#34;</a></p>
</li>
<li>
<p><a href="strms_rules.htm#g1049257">Chapter 5, &#34;How Rules Are Used in Oracle Streams&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BCEEDDHI"></a>
<div id="STRMS137" class="sect1">
<h2 class="sect1">Binary File Propagation<a id="sthref458"></a></h2>
<p>You can propagate a binary file between databases by using Oracle Streams. To do so, you put one or more <code dir="ltr">BFILE</code> attributes in a <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a> payload and then propagate the message to a remote <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a>. Each <code dir="ltr">BFILE</code> referenced in the payload is transferred to the remote database after the message is propagated, but before the message propagation is committed. The directory object and filename of each propagated <code dir="ltr">BFILE</code> are preserved, but you can map the directory object to different directories on the source and <a href="strms_glossary.htm#CHDGCAJA"><span class="xrefglossterm">destination database</span></a>s. The message payload can be a <code dir="ltr">BFILE</code> wrapped in an <code dir="ltr">ANYDATA</code> payload, or the message payload can be one or more <code dir="ltr">BFILE</code> attributes of an object wrapped in an <code dir="ltr">ANYDATA</code> payload.</p>
<p>The following are not supported in a message payload:</p>
<ul>
<li>
<p>One or more <code dir="ltr">BFILE</code> attributes in a varray</p>
</li>
<li>
<p>A user-defined type object with an <code dir="ltr">ANYDATA</code> attribute that contains one or more <code dir="ltr">BFILE</code> attributes</p>
</li>
</ul>
<p>Propagating a <code dir="ltr">BFILE</code> in Oracle Streams has the same restrictions as the procedure <code dir="ltr">DBMS_FILE_TRANSFER.PUT_FILE</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN01201" href="../ADMIN/dfiles.htm#ADMIN01201"><span class="italic">Oracle Database Administrator&#39;s Guide,</span></a> and <a class="olink ARPLS095" href="../ARPLS/d_ftran.htm#ARPLS095"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about transferring files with the <code dir="ltr">DBMS_FILE_TRANSFER</code> package</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5963">
<tr>
<td class="cellalignment5970">
<table class="cellalignment5968">
<tr>
<td class="cellalignment5967"><a href="strms_adqueue.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5967"><a href="strms_adapply.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5972">
<table class="cellalignment5966">
<tr>
<td class="cellalignment5967"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5967"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5967"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5967"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5967"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5967"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>