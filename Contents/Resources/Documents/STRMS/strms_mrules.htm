<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-104470"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Managing%20Rules"></a><title>Managing Rules</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1032"/>
<meta name="dcterms.created" content="2014-12-23T13:28:7Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Streams Concepts and Administration"/>
<meta name="dcterms.identifier" content="E53116-02"/>
<meta name="dcterms.isVersionOf" content="STRMS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="strms_glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="strms_mapply.htm" title="Previous" type="text/html"/>
<link rel="Next" href="strms_mtransform.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E53116-02.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">27/57</span> <!-- End Header -->
<div id="STRMS012" class="chapter"><a id="BABBHHIA"></a> <a id="BABBBAIA"></a>
<h1 class="chapter"><span class="secnum">18</span> Managing Rules</h1>
<p><a id="sthref860"></a><a id="sthref861"></a>An Oracle Streams environment uses <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s to control the behavior of <a href="strms_glossary.htm#CHDDDJGJ"><span class="xrefglossterm">Oracle Streams client</span></a>s (<a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>es, <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>s, <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>es, and <a href="strms_glossary.htm#CHDDGHHB"><span class="xrefglossterm">messaging client</span></a>s). In addition, you can create custom applications that are clients of the <a href="strms_glossary.htm#CHDIIIDH"><span class="xrefglossterm">rules engine</span></a>. This chapter contains instructions for managing <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>s, rules, and privileges related to rules.</p>
<p>The following topics describe managing rules:</p>
<ul>
<li>
<p><a href="#i1006140">Managing Rule Sets</a></p>
</li>
<li>
<p><a href="#BABJJABI">Managing Rules</a></p>
</li>
<li>
<p><a href="#BABCCCIE">Managing Privileges on Evaluation Contexts, Rule Sets, and Rules</a></p>
</li>
</ul>
<p>Each task described in this chapter should be completed by an Oracle Streams administrator that has been granted the appropriate privileges, unless specified otherwise.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Modifying the rules and rule sets used by an <a href="strms_glossary.htm#CHDDDJGJ"><span class="xrefglossterm">Oracle Streams client</span></a> changes the behavior of the Oracle Streams client.</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
This chapter does not contain examples for creating <a href="strms_glossary.htm#CHDDECEH"><span class="xrefglossterm">evaluation context</span></a>s, nor does it contain examples for evaluating events using the <code dir="ltr">DBMS_RULE.EVALUATE</code> procedure. See <a class="olink STREX017" href="../STREX/rulesdemo.htm#STREX017"><span class="italic">Oracle Streams Extended Examples</span></a> for these examples.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_rules.htm#g1049257">Chapter 5, &#34;How Rules Are Used in Oracle Streams&#34;</a></p>
</li>
<li>
<p><a href="strms_adrules.htm#BABEBHGC">Chapter 11, &#34;Advanced Rule Concepts&#34;</a></p>
</li>
<li>
<p><a href="strms_transform.htm#CACIIJHJ">Chapter 6, &#34;Rule-Based Transformations&#34;</a></p>
</li>
<li>
<p><a class="olink STREP200" href="../STREP/prep_rep.htm#STREP200"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for information about creating an Oracle Streams administrator</p>
</li>
<li>
<p><a href="strms_trrules.htm#BABEHCCE">Chapter 34, &#34;Troubleshooting Rules and Rule-Based Transformations&#34;</a></p>
</li>
</ul>
</div>
<a id="i1006140"></a>
<div id="STRMS799" class="sect1">
<h2 class="sect1">Managing Rule Sets<a id="sthref862"></a><a id="sthref863"></a></h2>
<p>You can modify a <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a> without stopping Oracle Streams <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>es, <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>s, and <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>es that use the rule set. Oracle Streams will detect the change immediately after it is committed. If you need precise control over which <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s use the new version of a rule set, then complete the following steps:</p>
<ol>
<li id="BABFCBDD">
<p>Stop the relevant capture processes, propagations, and apply processes.</p>
</li>
<li>
<p>Modify the rule set.</p>
</li>
<li>
<p>Restart the <a href="strms_glossary.htm#CHDDDJGJ"><span class="xrefglossterm">Oracle Streams client</span></a>s you stopped in Step <a href="#BABFCBDD">1</a>.</p>
</li>
</ol>
<p>This section provides instructions for completing the following tasks:</p>
<ul>
<li>
<p><a href="#BABFDFAF">Creating a Rule Set</a></p>
</li>
<li>
<p><a href="#i1006307">Adding a Rule to a Rule Set</a></p>
</li>
<li>
<p><a href="#i1006384">Removing a Rule from a Rule Set</a></p>
</li>
<li>
<p><a href="#BABCAEGE">Dropping a Rule Set</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_mcap.htm#i1009968">&#34;Stopping a Capture Process&#34;</a></p>
</li>
<li>
<p><a href="strms_mprop.htm#BABFCEJG">&#34;Stopping a Propagation&#34;</a></p>
</li>
<li>
<p><a href="strms_mapply.htm#i1006374">&#34;Stopping an Apply Process&#34;</a></p>
</li>
<li>
<p><a href="strms_trrules.htm#BABEHCCE">Chapter 34, &#34;Troubleshooting Rules and Rule-Based Transformations&#34;</a></p>
</li>
</ul>
</div>
<a id="BABFDFAF"></a>
<div id="STRMS800" class="sect2">
<h3 class="sect2">Creating a Rule Set<a id="sthref864"></a><a id="sthref865"></a></h3>
<p>The following example runs the <code dir="ltr">CREATE_RULE_SET</code> procedure in the <code dir="ltr">DBMS_RULE_ADM</code> package to create a <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>:</p>
<pre dir="ltr">BEGIN
  DBMS_RULE_ADM.CREATE_RULE_SET(
    rule_set_name       =&gt; &#39;strmadmin.hr_capture_rules&#39;,
    evaluation_context  =&gt; &#39;SYS.STREAMS$_EVALUATION_CONTEXT&#39;);
END;
/
</pre>
<p>Running this procedure performs the following actions:</p>
<ul>
<li>
<p>Creates a rule set named <code dir="ltr">hr_capture_rules</code> in the <code dir="ltr">strmadmin</code> schema. A rule set with the same name and owner must not exist.</p>
</li>
<li>
<p>Associates the rule set with the <code dir="ltr">SYS.STREAMS$_EVALUATION_CONTEXT</code> <a href="strms_glossary.htm#CHDDECEH"><span class="xrefglossterm">evaluation context</span></a>, which is the Oracle-supplied evaluation context for Oracle Streams.</p>
</li>
</ul>
<p>You can also use the following procedures in the <code dir="ltr">DBMS_STREAMS_ADM</code> package to create a rule set automatically, if one does not exist for an Oracle Streams <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>, <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>, <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>, or <a href="strms_glossary.htm#CHDDGHHB"><span class="xrefglossterm">messaging client</span></a>:</p>
<ul>
<li>
<p><a class="olink ARPLS520" href="../ARPLS/d_streams_adm.htm#ARPLS520"><code dir="ltr">ADD_MESSAGE_PROPAGATION_RULE</code></a></p>
</li>
<li>
<p><a class="olink ARPLS521" href="../ARPLS/d_streams_adm.htm#ARPLS521"><code dir="ltr">ADD_MESSAGE_RULE</code></a></p>
</li>
<li>
<p><a class="olink ARPLS316" href="../ARPLS/d_streams_adm.htm#ARPLS316"><code dir="ltr">ADD_TABLE_PROPAGATION_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS308" href="../ARPLS/d_streams_adm.htm#ARPLS308"><code dir="ltr">ADD_TABLE_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS394" href="../ARPLS/d_streams_adm.htm#ARPLS394"><code dir="ltr">ADD_SUBSET_PROPAGATION_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS329" href="../ARPLS/d_streams_adm.htm#ARPLS329"><code dir="ltr">ADD_SUBSET_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS317" href="../ARPLS/d_streams_adm.htm#ARPLS317"><code dir="ltr">ADD_SCHEMA_PROPAGATION_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS309" href="../ARPLS/d_streams_adm.htm#ARPLS309"><code dir="ltr">ADD_SCHEMA_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS318" href="../ARPLS/d_streams_adm.htm#ARPLS318"><code dir="ltr">ADD_GLOBAL_PROPAGATION_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS310" href="../ARPLS/d_streams_adm.htm#ARPLS310"><code dir="ltr">ADD_GLOBAL_RULES</code></a></p>
</li>
</ul>
<p>Except for <code dir="ltr">ADD_SUBSET_PROPAGATION_RULES</code> and <code dir="ltr">ADD_SUBSET_RULES</code>, these procedures can create either a <a href="strms_glossary.htm#CHDEEDIJ"><span class="xrefglossterm">positive rule set</span></a> or a <a href="strms_glossary.htm#CHDBHJHI"><span class="xrefglossterm">negative rule set</span></a> for an <a href="strms_glossary.htm#CHDDDJGJ"><span class="xrefglossterm">Oracle Streams client</span></a>. <code dir="ltr">ADD_SUBSET_PROPAGATION_RULES</code> and <code dir="ltr">ADD_SUBSET_RULES</code> can only create a positive rule set for an Oracle Streams client.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STREP" href="../STREP/toc.htm"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for information about creating Streams clients</div>
</div>
<!-- class="sect2" -->
<a id="i1006307"></a>
<div id="STRMS801" class="sect2">
<h3 class="sect2">Adding a Rule to a Rule Set<a id="sthref866"></a><a id="sthref867"></a></h3>
<p>When you add <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s to a <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>, the behavior of the <a href="strms_glossary.htm#CHDDDJGJ"><span class="xrefglossterm">Oracle Streams client</span></a>s that use the rule set changes. Ensure that you understand how rules to a rule set will affect Oracle Streams clients before proceeding.</p>
<p>The following example runs the <code dir="ltr">ADD_RULE</code> procedure in the <code dir="ltr">DBMS_RULE_ADM</code> package to add the <code dir="ltr">hr_dml</code> rule to the <code dir="ltr">hr_capture_rules</code> rule set:</p>
<pre dir="ltr">BEGIN
  DBMS_RULE_ADM.ADD_RULE(
    rule_name          =&gt; &#39;strmadmin.hr_dml&#39;, 
    rule_set_name      =&gt; &#39;strmadmin.hr_capture_rules&#39;,
    evaluation_context =&gt; NULL);
END;
/
</pre>
<p>In this example, no <a href="strms_glossary.htm#CHDDECEH"><span class="xrefglossterm">evaluation context</span></a> is specified when running the <code dir="ltr">ADD_RULE</code> procedure. Therefore, if the rule does not have its own evaluation context, it will inherit the evaluation context of the <code dir="ltr">hr_capture_rules</code> rule set. If you want a rule to use an evaluation context other than the one specified for the rule set, then you can set the <code dir="ltr">evaluation_context</code> parameter to this evaluation context when you run the <code dir="ltr">ADD_RULE</code> procedure.</p>
</div>
<!-- class="sect2" -->
<a id="i1006384"></a>
<div id="STRMS803" class="sect2">
<h3 class="sect2">Removing a Rule from a Rule Set<a id="sthref868"></a><a id="sthref869"></a></h3>
<p>When you remove a <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a> from a <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>, the behavior of the <a href="strms_glossary.htm#CHDDDJGJ"><span class="xrefglossterm">Oracle Streams client</span></a>s that use the rule set changes. Ensure that you understand how removing a rule from a rule set will affect Oracle Streams clients before proceeding.</p>
<p>The following example runs the <code dir="ltr">REMOVE_RULE</code> procedure in the <code dir="ltr">DBMS_RULE_ADM</code> package to remove the <code dir="ltr">hr_dml</code> rule from the <code dir="ltr">hr_capture_rules</code> rule set:</p>
<pre dir="ltr">BEGIN
  DBMS_RULE_ADM.REMOVE_RULE(
    rule_name     =&gt; &#39;strmadmin.hr_dml&#39;, 
    rule_set_name =&gt; &#39;strmadmin.hr_capture_rules&#39;);
END;
/
</pre>
<p>After running the <code dir="ltr">REMOVE_RULE</code> procedure, the rule still exists in the database and, if it was in any other rule sets, it remains in those rule sets.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1006396">&#34;Dropping a Rule&#34;</a></div>
</div>
<!-- class="sect2" -->
<a id="BABCAEGE"></a>
<div id="STRMS805" class="sect2">
<h3 class="sect2">Dropping a Rule Set<a id="sthref870"></a><a id="sthref871"></a></h3>
<p>The following example runs the <code dir="ltr">DROP_RULE_SET</code> procedure in the <code dir="ltr">DBMS_RULE_ADM</code> package to drop the <code dir="ltr">hr_capture_rules</code> <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a> from the database:</p>
<pre dir="ltr">BEGIN
  DBMS_RULE_ADM.DROP_RULE_SET(
    rule_set_name =&gt; &#39;strmadmin.hr_capture_rules&#39;, 
    delete_rules  =&gt; FALSE);
END;
/
</pre>
<p>In this example, the <code dir="ltr">delete_rules</code> parameter in the <code dir="ltr">DROP_RULE_SET</code> procedure is set to <code dir="ltr">FALSE</code>, which is the default setting. Therefore, if the rule set contains any <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s, then these rules are not dropped. If the <code dir="ltr">delete_rules</code> parameter is set to <code dir="ltr">TRUE</code>, then any rules in the rule set that are not in another rule set are dropped from the database automatically. Rules in the rule set that are in one or more other rule sets are not dropped.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABJJABI"></a>
<div id="STRMS806" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Managing Rules</h2>
<p>You can modify a <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a> without stopping Oracle Streams <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>es, <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>s, and <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>es that use the rule. Oracle Streams will detect the change immediately after it is committed. If you need precise control over which <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s use the new version of a rule, then complete the following steps:</p>
<ol>
<li id="BABGFJCH">
<p>Stop the relevant capture processes, propagations, and apply processes.</p>
</li>
<li>
<p>Modify the rule.</p>
</li>
<li>
<p>Restart the <a href="strms_glossary.htm#CHDDDJGJ"><span class="xrefglossterm">Oracle Streams client</span></a>s you stopped in Step <a href="#BABGFJCH">1</a>.</p>
</li>
</ol>
<p>This section provides instructions for completing the following tasks:</p>
<ul>
<li>
<p><a href="#i1006257">Creating a Rule</a></p>
</li>
<li>
<p><a href="#i1006320">Altering a Rule</a></p>
</li>
<li>
<p><a href="#i1006353">Modifying System-Created Rules</a></p>
</li>
<li>
<p><a href="#i1006396">Dropping a Rule</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_mcap.htm#i1009968">&#34;Stopping a Capture Process&#34;</a></p>
</li>
<li>
<p><a href="strms_mprop.htm#BABFCEJG">&#34;Stopping a Propagation&#34;</a></p>
</li>
<li>
<p><a href="strms_mapply.htm#i1006374">&#34;Stopping an Apply Process&#34;</a></p>
</li>
</ul>
</div>
<a id="i1006257"></a>
<div id="STRMS807" class="sect2">
<h3 class="sect2">Creating a Rule<a id="sthref872"></a><a id="sthref873"></a></h3>
<p>The following examples use the <code dir="ltr">CREATE_RULE</code> procedure in the <code dir="ltr">DBMS_RULE_ADM</code> package to create a <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a> without an <a href="strms_glossary.htm#CBACHAJI"><span class="xrefglossterm">action context</span></a> and a rule with an action context.</p>
<div id="STRMS812" class="sect3"><a id="sthref874"></a>
<h4 class="sect3">Creating a Rule without an Action Context</h4>
<p>To create a rule without an <a href="strms_glossary.htm#CBACHAJI"><span class="xrefglossterm">action context</span></a>, run the <code dir="ltr">CREATE_RULE</code> procedure and specify the rule name using the <code dir="ltr">rule_name</code> parameter and the <a href="strms_glossary.htm#CHDGDCFJ"><span class="xrefglossterm">rule condition</span></a> using the <code dir="ltr">condition</code> parameter, as in the following example:</p>
<pre dir="ltr">BEGIN  
  DBMS_RULE_ADM.CREATE_RULE(
    rule_name  =&gt; &#39;strmadmin.hr_dml&#39;,
    condition  =&gt; &#39; :dml.get_object_owner() = &#39;&#39;HR&#39;&#39; &#39;);
END;
/
</pre>
<p>Running this procedure performs the following actions:</p>
<ul>
<li>
<p>Creates a rule named <code dir="ltr">hr_dml</code> in the <code dir="ltr">strmadmin</code> schema. A rule with the same name and owner must not exist.</p>
</li>
<li>
<p>Creates a condition that evaluates to <code dir="ltr">TRUE</code> for any DML change to a table in the <code dir="ltr">hr</code> schema.</p>
</li>
</ul>
<p>In this example, no <a href="strms_glossary.htm#CHDDECEH"><span class="xrefglossterm">evaluation context</span></a> is specified for the rule. Therefore, the rule will either inherit the evaluation context of any <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a> to which it is added, or it will be assigned an evaluation context explicitly when the <code dir="ltr">DBMS_RULE_ADM.ADD_RULE</code> procedure is run to add it to a rule set. At this point, the rule cannot be evaluated because it is not part of any rule set.</p>
<p>You can also use the following procedures in the <code dir="ltr">DBMS_STREAMS_ADM</code> package to create rules and add them to a rule set automatically:</p>
<ul>
<li>
<p><a class="olink ARPLS520" href="../ARPLS/d_streams_adm.htm#ARPLS520"><code dir="ltr">ADD_MESSAGE_PROPAGATION_RULE</code></a></p>
</li>
<li>
<p><a class="olink ARPLS521" href="../ARPLS/d_streams_adm.htm#ARPLS521"><code dir="ltr">ADD_MESSAGE_RULE</code></a></p>
</li>
<li>
<p><a class="olink ARPLS316" href="../ARPLS/d_streams_adm.htm#ARPLS316"><code dir="ltr">ADD_TABLE_PROPAGATION_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS308" href="../ARPLS/d_streams_adm.htm#ARPLS308"><code dir="ltr">ADD_TABLE_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS394" href="../ARPLS/d_streams_adm.htm#ARPLS394"><code dir="ltr">ADD_SUBSET_PROPAGATION_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS329" href="../ARPLS/d_streams_adm.htm#ARPLS329"><code dir="ltr">ADD_SUBSET_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS317" href="../ARPLS/d_streams_adm.htm#ARPLS317"><code dir="ltr">ADD_SCHEMA_PROPAGATION_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS309" href="../ARPLS/d_streams_adm.htm#ARPLS309"><code dir="ltr">ADD_SCHEMA_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS318" href="../ARPLS/d_streams_adm.htm#ARPLS318"><code dir="ltr">ADD_GLOBAL_PROPAGATION_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS310" href="../ARPLS/d_streams_adm.htm#ARPLS310"><code dir="ltr">ADD_GLOBAL_RULES</code></a></p>
</li>
</ul>
<p>Except for <code dir="ltr">ADD_SUBSET_PROPAGATION_RULES</code> and <code dir="ltr">ADD_SUBSET_RULES</code>, these procedures can add rules to either the <a href="strms_glossary.htm#CHDEEDIJ"><span class="xrefglossterm">positive rule set</span></a> or the <a href="strms_glossary.htm#CHDBHJHI"><span class="xrefglossterm">negative rule set</span></a> for an <a href="strms_glossary.htm#CHDDDJGJ"><span class="xrefglossterm">Oracle Streams client</span></a>. <code dir="ltr">ADD_SUBSET_PROPAGATION_RULES</code> and <code dir="ltr">ADD_SUBSET_RULES</code> can add rules only to the positive rule set for an Oracle Streams client.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STREP" href="../STREP/toc.htm"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for information about creating Streams clients</div>
</div>
<!-- class="sect3" -->
<a id="BABFAEAA"></a>
<div id="STRMS813" class="sect3">
<h4 class="sect3">Creating a Rule with an Action Context</h4>
<p>To create a rule with an <a href="strms_glossary.htm#CBACHAJI"><span class="xrefglossterm">action context</span></a>, run the <code dir="ltr">CREATE_RULE</code> procedure and specify the rule name using the <code dir="ltr">rule_name</code> parameter, the rule condition using the <code dir="ltr">condition</code> parameter, and the rule action context using the <code dir="ltr">action_context</code> parameter. You add a name-value pair to an action context using the <code dir="ltr">ADD_PAIR</code> member procedure of the <code dir="ltr">RE$NV_LIST</code> type</p>
<p>The following example creates a rule with a non-<code dir="ltr">NULL</code> action context:</p>
<pre dir="ltr">DECLARE
  ac  SYS.RE$NV_LIST;
BEGIN
  ac := SYS.RE$NV_LIST(NULL);
  ac.ADD_PAIR(&#39;course_number&#39;, ANYDATA.CONVERTNUMBER(1057));
  DBMS_RULE_ADM.CREATE_RULE(
    rule_name      =&gt; &#39;strmadmin.rule_dep_10&#39;,
    condition      =&gt; &#39; :dml.get_object_owner()=&#39;&#39;HR&#39;&#39; AND &#39; || 
       &#39; :dml.get_object_name()=&#39;&#39;EMPLOYEES&#39;&#39; AND &#39; || 
       &#39; (:dml.get_value(&#39;&#39;NEW&#39;&#39;, &#39;&#39;DEPARTMENT_ID&#39;&#39;).AccessNumber()=10) AND &#39; || 
       &#39; :dml.get_command_type() = &#39;&#39;INSERT&#39;&#39; &#39;,
    action_context =&gt; ac);
END;
/
</pre>
<p>Running this procedure performs the following actions:</p>
<ul>
<li>
<p>Creates a rule named <code dir="ltr">rule_dep_10</code> in the <code dir="ltr">strmadmin</code> schema. A rule with the same name and owner must not exist.</p>
</li>
<li>
<p>Creates a condition that evaluates to <code dir="ltr">TRUE</code> for any insert into the <code dir="ltr">hr.employees</code> table where the <code dir="ltr">department_id</code> is <code dir="ltr">10</code>.</p>
</li>
<li>
<p>Creates an action context with one name-value pair that has <code dir="ltr">course_number</code> for the name and <code dir="ltr">1057</code> for the value.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_adrules.htm#i1006303">&#34;Rule Action Context&#34;</a> for a scenario that uses such a name-value pair in an action context</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1006320"></a>
<div id="STRMS814" class="sect2">
<h3 class="sect2">Altering a Rule<a id="sthref875"></a><a id="sthref876"></a></h3>
<p>You can use the <code dir="ltr">ALTER_RULE</code> procedure in the <code dir="ltr">DBMS_RULE_ADM</code> package to alter an existing <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>. Specifically, you can use this procedure to do the following:</p>
<ul>
<li>
<p>Change a <a href="strms_glossary.htm#CHDGDCFJ"><span class="xrefglossterm">rule condition</span></a></p>
</li>
<li>
<p>Change a rule <a href="strms_glossary.htm#CHDDECEH"><span class="xrefglossterm">evaluation context</span></a></p>
</li>
<li>
<p>Remove a rule evaluation context</p>
</li>
<li>
<p>Modify a name-value pair in a rule <a href="strms_glossary.htm#CBACHAJI"><span class="xrefglossterm">action context</span></a></p>
</li>
<li>
<p>Add a name-value pair to a rule action context</p>
</li>
<li>
<p>Remove a name-value pair from a rule action context</p>
</li>
<li>
<p>Change the comment for a rule</p>
</li>
<li>
<p>Remove the comment for a rule</p>
</li>
</ul>
<p>The following sections contains examples for some of these alterations.</p>
<div id="STRMS816" class="sect3"><a id="sthref877"></a>
<h4 class="sect3">Changing a Rule Condition</h4>
<p>You use the <code dir="ltr">condition</code> parameter in the <code dir="ltr">ALTER_RULE</code> procedure to change the condition of an existing rule. For example, suppose you want to change the condition of the rule created in <a href="#i1006257">&#34;Creating a Rule&#34;</a>. The condition in the existing <code dir="ltr">hr_dml</code> rule evaluates to <code dir="ltr">TRUE</code> for any DML change to any object in the <code dir="ltr">hr</code> schema. If you want to exclude changes to the <code dir="ltr">employees</code> table in this schema, then you can alter the rule so that it evaluates to <code dir="ltr">FALSE</code> for DML changes to the <code dir="ltr">hr.employees</code> table, but continues to evaluate to <code dir="ltr">TRUE</code> for DML changes to any other table in this schema. The following procedure alters the rule in this way:</p>
<pre dir="ltr">BEGIN  
  DBMS_RULE_ADM.ALTER_RULE(
    rule_name          =&gt; &#39;strmadmin.hr_dml&#39;,
    condition          =&gt; &#39; :dml.get_object_owner() = &#39;&#39;HR&#39;&#39; AND NOT &#39; ||
                          &#39; :dml.get_object_name() = &#39;&#39;EMPLOYEES&#39;&#39; &#39;,
    evaluation_context =&gt; NULL);
END;
/
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>Changing the condition of a rule affects all <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>s that contain the rule.</p>
</li>
<li>
<p>To alter a rule but retain the rule action context, specify <code dir="ltr">NULL</code> for <code dir="ltr">action_context</code> parameter in the <code dir="ltr">ALTER_RULE</code> procedure. <code dir="ltr">NULL</code> is the default value for the <code dir="ltr">action_context</code> parameter.</p>
</li>
<li>
<p><a id="sthref878"></a>When a rule is in the rule set for a synchronous capture, do not change the following rule conditions: <code dir="ltr">:dml.get_object_name</code> and <code dir="ltr">:dml.get_object_owner</code>. Changing these conditions can cause the synchronous capture not to capture changes to the database object. You can change other conditions in synchronous capture rules.</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="BABBCDDF"></a>
<div id="STRMS817" class="sect3">
<h4 class="sect3">Modifying a Name-Value Pair in a Rule Action Context<a id="sthref879"></a><a id="sthref880"></a><a id="sthref881"></a><a id="sthref882"></a><a id="sthref883"></a><a id="sthref884"></a><a id="sthref885"></a></h4>
<p>To modify a name-value pair in a rule action context, you first remove the name-value pair from the rule action context and then add a different name-value pair to the rule action context.</p>
<p>This example modifies a name-value pair for rule <code dir="ltr">rule_dep_10</code> by first removing the name-value pair with the name <code dir="ltr">course_name</code> from the rule action context and then adding a different name-value pair back to the rule action context with the same name (<code dir="ltr">course_name</code>) but a different value. This name-value pair being modified was added to the rule in the example in <a href="#BABFAEAA">&#34;Creating a Rule with an Action Context&#34;</a>.</p>
<p>If an action context contains name-value pairs in addition to the name-value pair that you are modifying, then be cautious when you modify the action context so that you do not change or remove any of the other name-value pairs.</p>
<p>Complete the following steps to modify a name-value pair in an action context:</p>
<a id="i1008876"></a>
<ol>
<li id="BABEJHIF">
<p>You can view the name-value pairs in the action context of a rule by performing the following query:</p>
<pre dir="ltr">COLUMN ACTION_CONTEXT_NAME HEADING &#39;Action Context Name&#39; FORMAT A25
COLUMN AC_VALUE_NUMBER HEADING &#39;Action Context Number Value&#39; FORMAT 9999

SELECT 
    AC.NVN_NAME ACTION_CONTEXT_NAME, 
    AC.NVN_VALUE.ACCESSNUMBER() AC_VALUE_NUMBER
  FROM DBA_RULES R, TABLE(R.RULE_ACTION_CONTEXT.ACTX_LIST) AC
  WHERE RULE_NAME = &#39;RULE_DEP_10&#39;;
</pre>
<p>This query displays output similar to the following:</p>
<pre dir="ltr">Action Context Name       Action Context Number Value
------------------------- ---------------------------
course_number                                    1057
</pre></li>
<li>
<p>Modify the name-value pair. Ensure that no other users are modifying the action context at the same time. This step first removes the name-value pair containing the name <code dir="ltr">course_number</code> from the action context for the <code dir="ltr">rule_dep_10</code> rule using the <code dir="ltr">REMOVE_PAIR</code> member procedure of the <code dir="ltr">RE$NV_LIST</code> type. Next, this step adds a name-value pair containing the new name-value pair to the rule action context using the <code dir="ltr">ADD_PAIR</code> member procedure of this type. In this case, the name is <code dir="ltr">course_number</code> and the value is <code dir="ltr">1108</code> for the added name-value pair.</p>
<p>To preserve any existing name-value pairs in the rule action context, this example selects the rule action context into a variable before altering it:</p>
<pre dir="ltr">DECLARE
  action_ctx       SYS.RE$NV_LIST;
  ac_name          VARCHAR2(30) := &#39;course_number&#39;;
BEGIN
  SELECT RULE_ACTION_CONTEXT
    INTO action_ctx
    FROM DBA_RULES R
    WHERE RULE_OWNER=&#39;STRMADMIN&#39; AND RULE_NAME=&#39;RULE_DEP_10&#39;;
  action_ctx.REMOVE_PAIR(ac_name);
  action_ctx.ADD_PAIR(ac_name,
                 ANYDATA.CONVERTNUMBER(1108));
  DBMS_RULE_ADM.ALTER_RULE(
    rule_name       =&gt;  &#39;strmadmin.rule_dep_10&#39;,
    action_context  =&gt; action_ctx);
END;
/
</pre>
<p>To ensure that the name-value pair was altered properly, you can rerun the query in Step <a href="#BABEJHIF">1</a>. The query should display output similar to the following:</p>
<pre dir="ltr">Action Context Name       Action Context Number Value
------------------------- ---------------------------
course_number                                    1108
</pre></li>
</ol>
</div>
<!-- class="sect3" -->
<a id="BABJGICJ"></a>
<div id="STRMS818" class="sect3">
<h4 class="sect3">Adding a Name-Value Pair to a Rule Action Context<a id="sthref886"></a><a id="sthref887"></a><a id="sthref888"></a><a id="sthref889"></a></h4>
<p>You can preserve the existing name-value pairs in the action context by selecting the action context into a variable before adding a new pair using the <code dir="ltr">ADD_PAIR</code> member procedure of the <code dir="ltr">RE$NV_LIST</code> type. Ensure that no other users are modifying the action context at the same time. The following example preserves the existing name-value pairs in the action context of the <code dir="ltr">rule_dep_10</code> rule and adds a new name-value pair with <code dir="ltr">dist_list</code> for the name and <code dir="ltr">admin_list</code> for the value:</p>
<pre dir="ltr">DECLARE
  action_ctx       SYS.RE$NV_LIST;
  ac_name          VARCHAR2(30) := &#39;dist_list&#39;;
BEGIN
  action_ctx := SYS.RE$NV_LIST(SYS.RE$NV_ARRAY());
  SELECT RULE_ACTION_CONTEXT
    INTO action_ctx
    FROM DBA_RULES R
    WHERE RULE_OWNER=&#39;STRMADMIN&#39; AND RULE_NAME=&#39;RULE_DEP_10&#39;;
  action_ctx.ADD_PAIR(ac_name,
                 ANYDATA.CONVERTVARCHAR2(&#39;admin_list&#39;));
  DBMS_RULE_ADM.ALTER_RULE(
    rule_name       =&gt;  &#39;strmadmin.rule_dep_10&#39;,
    action_context  =&gt; action_ctx);
END;
/
</pre>
<p>To ensure that the name-value pair was added successfully, you can run the following query:</p>
<pre dir="ltr">COLUMN ACTION_CONTEXT_NAME HEADING &#39;Action Context Name&#39; FORMAT A25
COLUMN AC_VALUE_NUMBER HEADING &#39;Action Context|Number Value&#39; FORMAT 9999
COLUMN AC_VALUE_VARCHAR2 HEADING &#39;Action Context|Text Value&#39; FORMAT A25

SELECT 
    AC.NVN_NAME ACTION_CONTEXT_NAME, 
    AC.NVN_VALUE.ACCESSNUMBER() AC_VALUE_NUMBER,
    AC.NVN_VALUE.ACCESSVARCHAR2() AC_VALUE_VARCHAR2
  FROM DBA_RULES R, TABLE(R.RULE_ACTION_CONTEXT.ACTX_LIST) AC
  WHERE RULE_NAME = &#39;RULE_DEP_10&#39;;
</pre>
<p>This query should display output similar to the following:</p>
<pre dir="ltr">                          Action Context Action Context
Action Context Name         Number Value Text Value
------------------------- -------------- -------------------------
course_number                       1088
dist_list                                admin_list
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_adrules.htm#i1006303">&#34;Rule Action Context&#34;</a> for a scenario that uses similar name-value pairs in an action context</div>
</div>
<!-- class="sect3" -->
<div id="STRMS819" class="sect3"><a id="sthref890"></a>
<h4 class="sect3">Removing a Name-Value Pair from a Rule Action Context<a id="sthref891"></a><a id="sthref892"></a><a id="sthref893"></a><a id="sthref894"></a></h4>
<p>You remove a name-value pair in the action context of a rule using the <code dir="ltr">REMOVE_PAIR</code> member procedure of the <code dir="ltr">RE$NV_LIST</code> type. Ensure that no other users are modifying the action context at the same time.</p>
<p>Removing a name-value pair means altering the action context of a rule. If an action context contains name-value pairs in addition to the name-value pair being removed, then be cautious when you modify the action context so that you do not change or remove any other name-value pairs.</p>
<p>This example assumes that the <code dir="ltr">rule_dep_10</code> rule has the following name-value pairs:</p>
<div class="inftblruleinformal">
<table class="cellalignment5973" title="Action Context with Two Name-Value Pairs" summary="This table contains the name-value pairs for the rule_dep_10 rule." dir="ltr">
<thead>
<tr class="cellalignment5964">
<th class="cellalignment5974" id="r1c1-t13">Name</th>
<th class="cellalignment5974" id="r1c2-t13">Value</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r2c1-t13" headers="r1c1-t13"><code dir="ltr">course_number</code></td>
<td class="cellalignment5970" headers="r2c1-t13 r1c2-t13"><code dir="ltr">1088</code></td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r3c1-t13" headers="r1c1-t13"><code dir="ltr">dist_list</code></td>
<td class="cellalignment5970" headers="r3c1-t13 r1c2-t13"><code dir="ltr">admin_list</code></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
You added these name-value pairs to the <code dir="ltr">rule_dep_10</code> rule if you completed the examples in the following sections:
<ul>
<li>
<p><a href="#BABFAEAA">&#34;Creating a Rule with an Action Context&#34;</a></p>
</li>
<li>
<p><a href="#BABBCDDF">&#34;Modifying a Name-Value Pair in a Rule Action Context&#34;</a></p>
</li>
<li>
<p><a href="#BABJGICJ">&#34;Adding a Name-Value Pair to a Rule Action Context&#34;</a></p>
</li>
</ul>
</div>
<p>This example preserves existing name-value pairs in the action context of the <code dir="ltr">rule_dep_10</code> rule that should not be removed by selecting the existing action context into a variable and then removing the name-value pair with <code dir="ltr">dist_list</code> for the name.</p>
<pre dir="ltr">DECLARE
  action_ctx       SYS.RE$NV_LIST;
  ac_name          VARCHAR2(30) := &#39;dist_list&#39;;
BEGIN
  SELECT RULE_ACTION_CONTEXT
    INTO action_ctx
    FROM DBA_RULES R
    WHERE RULE_OWNER=&#39;STRMADMIN&#39; AND RULE_NAME=&#39;RULE_DEP_10&#39;;
  action_ctx.REMOVE_PAIR(ac_name);
  DBMS_RULE_ADM.ALTER_RULE(
    rule_name       =&gt;  &#39;strmadmin.rule_dep_10&#39;,
    action_context  =&gt;  action_ctx);
END;
/
</pre>
<p>To ensure that the name-value pair was removed successfully without removing any other name-value pairs in the action context, you can run the following query:</p>
<pre dir="ltr">COLUMN ACTION_CONTEXT_NAME HEADING &#39;Action Context Name&#39; FORMAT A25
COLUMN AC_VALUE_NUMBER HEADING &#39;Action Context|Number Value&#39; FORMAT 9999
COLUMN AC_VALUE_VARCHAR2 HEADING &#39;Action Context|Text Value&#39; FORMAT A25

SELECT 
    AC.NVN_NAME ACTION_CONTEXT_NAME, 
    AC.NVN_VALUE.ACCESSNUMBER() AC_VALUE_NUMBER,
    AC.NVN_VALUE.ACCESSVARCHAR2() AC_VALUE_VARCHAR2
  FROM DBA_RULES R, TABLE(R.RULE_ACTION_CONTEXT.ACTX_LIST) AC
  WHERE RULE_NAME = &#39;RULE_DEP_10&#39;;
</pre>
<p>This query should display output similar to the following:</p>
<pre dir="ltr">                          Action Context Action Context
Action Context Name         Number Value Text Value
------------------------- -------------- -------------------------
course_number                       1108
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1006353"></a>
<div id="STRMS820" class="sect2">
<h3 class="sect2">Modifying System-Created Rules<a id="sthref895"></a></h3>
<p>System-created <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s are rules created by running a procedure in the <code dir="ltr">DBMS_STREAMS_ADM</code> package. If you cannot create a rule with the exact <a href="strms_glossary.htm#CHDGDCFJ"><span class="xrefglossterm">rule condition</span></a> you need using the <code dir="ltr">DBMS_STREAMS_ADM</code> package, then you can create a rule with a condition based on a <a href="strms_glossary.htm#CHDIJACJ"><span class="xrefglossterm">system-created rule</span></a> by following these general steps:</p>
<ol>
<li>
<p>Copy the rule condition of the system-created rule. You can view the rule condition of a system-created rule by querying the <code dir="ltr">DBA_STREAMS_RULES</code> data dictionary view.</p>
</li>
<li>
<p>Modify the condition.</p>
</li>
<li>
<p>Create a rule with the modified condition.</p>
</li>
<li>
<p>Add the new rule to a <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a> for an Oracle Streams <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>, <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>, <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>, or <a href="strms_glossary.htm#CHDDGHHB"><span class="xrefglossterm">messaging client</span></a>.</p>
</li>
<li>
<p>Remove the original rule if it is no longer needed using the <code dir="ltr">REMOVE_RULE</code> procedure in the <code dir="ltr">DBMS_STREAMS_ADM</code> package.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_transform.htm#CACIIJHJ">Chapter 6, &#34;Rule-Based Transformations&#34;</a></p>
</li>
<li>
<p><a href="strms_monitor.htm#CHDCEJHB">Chapter 22, &#34;Monitoring an Oracle Streams Environment&#34;</a> for more information about the data dictionary views related to Oracle Streams</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="i1006396"></a>
<div id="STRMS821" class="sect2">
<h3 class="sect2">Dropping a Rule<a id="sthref896"></a><a id="sthref897"></a></h3>
<p>The following example runs the <code dir="ltr">DROP_RULE</code> procedure in the <code dir="ltr">DBMS_RULE_ADM</code> package to drop the <code dir="ltr">hr_dml</code> <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a> from the database:</p>
<pre dir="ltr">BEGIN
  DBMS_RULE_ADM.DROP_RULE(
    rule_name =&gt; &#39;strmadmin.hr_dml&#39;, 
    force     =&gt; FALSE);
END;
/
</pre>
<p>In this example, the <code dir="ltr">force</code> parameter in the <code dir="ltr">DROP_RULE</code> procedure is set to <code dir="ltr">FALSE</code>, which is the default setting. Therefore, the rule cannot be dropped if it is in one or more <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>s. If the <code dir="ltr">force</code> parameter is set to <code dir="ltr">TRUE</code>, then the rule is dropped from the database and automatically removed from any rule sets that contain it.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABCCCIE"></a>
<div id="STRMS823" class="sect1">
<h2 class="sect1">Managing Privileges on Evaluation Contexts, Rule Sets, and Rules<a id="sthref898"></a></h2>
<p>This section provides instructions for completing the following tasks:</p>
<ul>
<li>
<p><a href="#BABIHBJF">Granting System Privileges on Evaluation Contexts, Rule Sets, and Rules</a></p>
</li>
<li>
<p><a href="#i1006476">Granting Object Privileges on an Evaluation Context, Rule Set, or Rule</a></p>
</li>
<li>
<p><a href="#i1006491">Revoking System Privileges on Evaluation Contexts, Rule Sets, and Rules</a></p>
</li>
<li>
<p><a href="#i1006502">Revoking Object Privileges on an Evaluation Context, Rule Set, or Rule</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_adrules.htm#i1006478">&#34;Database Objects and Privileges Related to Rules&#34;</a></p>
</li>
<li>
<p>The <a class="olink ARPLS331" href="../ARPLS/d_rule_a.htm#ARPLS331"><code dir="ltr">GRANT_SYSTEM_PRIVILEGE</code></a> and <a class="olink ARPLS330" href="../ARPLS/d_rule_a.htm#ARPLS330"><code dir="ltr">GRANT_OBJECT_PRIVILEGE</code></a> procedures in the <code dir="ltr">DBMS_RULE_ADM</code> package in <a class="olink ARPLS304" href="../ARPLS/d_rule_a.htm#ARPLS304"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a></p>
</li>
</ul>
</div>
<a id="BABIHBJF"></a>
<div id="STRMS824" class="sect2">
<h3 class="sect2">Granting System Privileges on Evaluation Contexts, Rule Sets, and Rules<a id="sthref899"></a><a id="sthref900"></a><a id="sthref901"></a></h3>
<p>You can use the <code dir="ltr">GRANT_SYSTEM_PRIVILEGE</code> procedure in the <code dir="ltr">DBMS_RULE_ADM</code> package to grant system privileges on <a href="strms_glossary.htm#CHDDECEH"><span class="xrefglossterm">evaluation context</span></a>s, <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>s, and <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s to users and roles. These privileges enable a user to create, alter, execute, or drop these objects in the user&#39;s own schema or, if the &#34;ANY&#34; version of the privilege is granted, in any schema.</p>
<p>For example, to grant the <code dir="ltr">hr</code> user the privilege to create an evaluation context in the user&#39;s own schema, enter the following while connected as a user who can grant privileges and alter users:</p>
<pre dir="ltr">BEGIN 
  DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE(
    privilege    =&gt; SYS.DBMS_RULE_ADM.CREATE_EVALUATION_CONTEXT_OBJ,
    grantee      =&gt; &#39;hr&#39;, 
    grant_option =&gt; FALSE);
END;
/
</pre>
<p>In this example, the <code dir="ltr">grant_option</code> parameter in the <code dir="ltr">GRANT_SYSTEM_PRIVILEGE</code> procedure is set to <code dir="ltr">FALSE</code>, which is the default setting. Therefore, the <code dir="ltr">hr</code> user cannot grant the <code dir="ltr">CREATE_EVALUATION_CONTEXT_OBJ</code> system privilege to other users or roles. If the <code dir="ltr">grant_option</code> parameter were set to <code dir="ltr">TRUE</code>, then the <code dir="ltr">hr</code> user could grant this system privilege to other users or roles.</p>
</div>
<!-- class="sect2" -->
<a id="i1006476"></a>
<div id="STRMS825" class="sect2">
<h3 class="sect2">Granting Object Privileges on an Evaluation Context, Rule Set, or Rule<a id="sthref902"></a><a id="sthref903"></a><a id="sthref904"></a></h3>
<p>You can use the <code dir="ltr">GRANT_OBJECT_PRIVILEGE</code> procedure in the <code dir="ltr">DBMS_RULE_ADM</code> package to grant object privileges on a specific <a href="strms_glossary.htm#CHDDECEH"><span class="xrefglossterm">evaluation context</span></a>, <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>, or <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>. These privileges enable a user to alter or execute the specified object.</p>
<p>For example, to grant the <code dir="ltr">hr</code> user the privilege to both alter and execute a rule set named <code dir="ltr">hr_capture_rules</code> in the <code dir="ltr">strmadmin</code> schema, enter the following:</p>
<pre dir="ltr">BEGIN 
  DBMS_RULE_ADM.GRANT_OBJECT_PRIVILEGE(
    privilege    =&gt; SYS.DBMS_RULE_ADM.ALL_ON_RULE_SET,
    object_name  =&gt; &#39;strmadmin.hr_capture_rules&#39;,
    grantee      =&gt; &#39;hr&#39;, 
    grant_option =&gt; FALSE);
END;
/
</pre>
<p>In this example, the <code dir="ltr">grant_option</code> parameter in the <code dir="ltr">GRANT_OBJECT_PRIVILEGE</code> procedure is set to <code dir="ltr">FALSE</code>, which is the default setting. Therefore, the <code dir="ltr">hr</code> user cannot grant the <code dir="ltr">ALL_ON_RULE_SET</code> object privilege for the specified rule set to other users or roles. If the <code dir="ltr">grant_option</code> parameter were set to <code dir="ltr">TRUE</code>, then the <code dir="ltr">hr</code> user could grant this object privilege to other users or roles.</p>
</div>
<!-- class="sect2" -->
<a id="i1006491"></a>
<div id="STRMS826" class="sect2">
<h3 class="sect2">Revoking System Privileges on Evaluation Contexts, Rule Sets, and Rules<a id="sthref905"></a><a id="sthref906"></a><a id="sthref907"></a></h3>
<p>You can use the <code dir="ltr">REVOKE_SYSTEM_PRIVILEGE</code> procedure in the <code dir="ltr">DBMS_RULE_ADM</code> package to revoke system privileges on <a href="strms_glossary.htm#CHDDECEH"><span class="xrefglossterm">evaluation context</span></a>s, <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>s, and <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s.</p>
<p>For example, to revoke from the <code dir="ltr">hr</code> user the privilege to create an evaluation context in the user&#39;s own schema, enter the following while connected as a user who can grant privileges and alter users:</p>
<pre dir="ltr">BEGIN 
  DBMS_RULE_ADM.REVOKE_SYSTEM_PRIVILEGE(
    privilege    =&gt; SYS.DBMS_RULE_ADM.CREATE_EVALUATION_CONTEXT_OBJ,
    revokee      =&gt; &#39;hr&#39;);
END;
/
</pre></div>
<!-- class="sect2" -->
<a id="i1006502"></a>
<div id="STRMS827" class="sect2">
<h3 class="sect2">Revoking Object Privileges on an Evaluation Context, Rule Set, or Rule<a id="sthref908"></a><a id="sthref909"></a><a id="sthref910"></a></h3>
<p>You can use the <code dir="ltr">REVOKE_OBJECT_PRIVILEGE</code> procedure in the <code dir="ltr">DBMS_RULE_ADM</code> package to revoke object privileges on a specific <a href="strms_glossary.htm#CHDDECEH"><span class="xrefglossterm">evaluation context</span></a>, <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>, or <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>.</p>
<p>For example, to revoke from the <code dir="ltr">hr</code> user the privilege to both alter and execute a rule set named <code dir="ltr">hr_capture_rules</code> in the <code dir="ltr">strmadmin</code> schema, enter the following:</p>
<pre dir="ltr">BEGIN 
  DBMS_RULE_ADM.REVOKE_OBJECT_PRIVILEGE(
    privilege    =&gt; SYS.DBMS_RULE_ADM.ALL_ON_RULE_SET,
    object_name  =&gt; &#39;strmadmin.hr_capture_rules&#39;,
    revokee      =&gt; &#39;hr&#39;);
END;
/
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5963">
<tr>
<td class="cellalignment5970">
<table class="cellalignment5968">
<tr>
<td class="cellalignment5967"><a href="strms_mapply.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5967"><a href="strms_mtransform.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5972">
<table class="cellalignment5966">
<tr>
<td class="cellalignment5967"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5967"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5967"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5967"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5967"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5967"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>