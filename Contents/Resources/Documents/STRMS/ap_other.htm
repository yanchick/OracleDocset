<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-104372"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/How%20Oracle%20Streams%20Works%20with%20Other%20Database%20Components"></a><title>How Oracle Streams Works with Other Database Components</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1032"/>
<meta name="dcterms.created" content="2014-12-23T13:28:8Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Streams Concepts and Administration"/>
<meta name="dcterms.identifier" content="E53116-02"/>
<meta name="dcterms.isVersionOf" content="STRMS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="strms_glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="pt_ap.htm" title="Previous" type="text/html"/>
<link rel="Next" href="ap_restrictions.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E53116-02.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">51/57</span> <!-- End Header -->
<div id="STRMS1166" class="appendix"><a id="CHDGEHID"></a>
<h1 class="appendix"><span class="secnum">A</span> How Oracle Streams Works with Other Database Components</h1>
<p>This appendix describes how Oracle Streams works with other Oracle Database components.</p>
<p>This appendix includes these topics:</p>
<ul>
<li>
<p><a href="#CHDIJGHI">Oracle Streams and Oracle Real Application Clusters</a></p>
</li>
<li>
<p><a href="#CHDHEABF">Oracle Streams and Transparent Data Encryption</a></p>
</li>
<li>
<p><a href="#CHDHJGDH">Oracle Streams and Flashback Data Archive</a></p>
</li>
<li>
<p><a href="#CHDIBCAB">Oracle Streams and Recovery Manager (RMAN)</a></p>
</li>
<li>
<p><a href="#CCHBBGEG">Oracle Streams and Distributed Transactions</a></p>
</li>
<li>
<p><a href="#BGBBADDE">Oracle Streams and Oracle Database Vault</a></p>
</li>
</ul>
<a id="CHDIJGHI"></a>
<div id="STRMS179" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Oracle Streams and Oracle Real Application Clusters<a id="sthref1491"></a><a id="sthref1492"></a></h2>
<p>The following topics describe how Oracle Streams works with Oracle Real Application Clusters (Oracle RAC):</p>
<ul>
<li>
<p><a href="#i1006602">Capture Processes and Oracle Real Application Clusters</a></p>
</li>
<li>
<p><a href="#CACDFFBI">Synchronous Capture and Oracle Real Application Clusters</a></p>
</li>
<li>
<p><a href="#CHDJJBCJ">Combined Capture and Apply and Oracle Real Application Clusters</a></p>
</li>
<li>
<p><a href="#i1006794">Queues and Oracle Real Application Clusters</a></p>
</li>
<li>
<p><a href="#CHDBDIDH">Propagations and Oracle Real Application Clusters</a></p>
</li>
<li>
<p><a href="#i1006991">Apply Processes and Oracle Real Application Clusters</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STREP153" href="../STREP/best_gen.htm#STREP153"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for information about best practices for Oracle Streams in an Oracle RAC environment</div>
<a id="i1006602"></a>
<div id="STRMS1167" class="sect2">
<h3 class="sect2">Capture Processes and Oracle Real Application Clusters<a id="sthref1493"></a><a id="sthref1494"></a></h3>
<p>A <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a> can capture changes in an Oracle Real Application Clusters (Oracle RAC) environment. If you use one or more capture processes and Oracle RAC in the same environment, then all archived logs that contain changes to be captured by a capture process must be available for all instances in the Oracle RAC environment. In an Oracle RAC environment, a capture process reads changes made by all instances. Any processes used by a single capture process run on a single instance in an Oracle RAC environment.</p>
<p>Each capture process is started and stopped on the owner instance for its <code dir="ltr">ANYDATA</code> queue, even if the start or stop procedure is run on a different instance. Also, a capture process follows its <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> to a different instance if the current owner instance becomes unavailable. The queue itself follows the rules for primary instance and secondary instance ownership.</p>
<p>If the owner instance for a <a href="strms_glossary.htm#CHDFFJJB"><span class="xrefglossterm">queue table</span></a> containing a queue used by a capture process becomes unavailable, then queue ownership is transferred automatically to another instance in the cluster. In addition, if the capture process was enabled when the owner instance became unavailable, then the capture process is restarted automatically on the new owner instance. If the capture process was disabled when the owner instance became unavailable, then the capture process remains disabled on the new owner instance.</p>
<p>LogMiner supports the <code dir="ltr">LOG_ARCHIVE_DEST_</code><code dir="ltr"><span class="codeinlineitalic">n</span></code> initialization parameter, and Oracle Streams capture processes use LogMiner to capture changes from the redo log. If an archived log file is inaccessible from one destination, then a <a href="strms_glossary.htm#CHDDGCGH"><span class="xrefglossterm">local capture process</span></a> can read it from another accessible destination. On an Oracle RAC database, this ability also enables you to use cross instance archival (CIA) such that each instance archives its files to all other instances. This solution cannot detect or resolve gaps caused by missing archived log files. Hence, it can be used only to complement an existing solution to have the archived files shared between all instances.</p>
<p>In a <a href="strms_glossary.htm#CHDHEBHD"><span class="xrefglossterm">downstream capture process</span></a> environment, the source database can be a single instance database or a multi-instance Oracle RAC database. The downstream database can be a single instance database or a multi-instance Oracle RAC database, regardless of whether the source database is single instance or multi-instance.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_capture.htm#CACGECDI">&#34;Implicit Capture with an Oracle Streams Capture Process&#34;</a></p>
</li>
<li>
<p><a class="olink REFRN" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for more information about the <code dir="ltr">DBA_QUEUE_TABLES</code> data dictionary view</p>
</li>
<li>
<p><a class="olink RACAD325" href="../RACAD/GUID-2A6A3B47-DD1A-40AF-9550-C37229A556D8.htm#RACAD325"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about configuring archived logs to be shared between instances</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACDFFBI"></a>
<div id="STRMS1168" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Synchronous Capture and Oracle Real Application Clusters<a id="sthref1495"></a><a id="sthref1496"></a></h3>
<p>A <a href="strms_glossary.htm#CBACHEDJ"><span class="xrefglossterm">synchronous capture</span></a> can capture changes in an Oracle Real Application Clusters (Oracle RAC) environment. In an Oracle RAC environment, synchronous capture reads changes made by all instances.</p>
<p>For the best performance with synchronous capture in an Oracle RAC environment, changes to independent sets of tables should be captured by separate synchronous captures. For example, if different applications use different sets of database objects in the database, then configure a separate synchronous capture to capture changes to the database objects for each application. In this case, each synchronous capture should use a different queue and queue table.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_capture.htm#CACIDGBI">&#34;Implicit Capture with Synchronous Capture&#34;</a></div>
</div>
<!-- class="sect2" -->
<a id="CHDJJBCJ"></a>
<div id="STRMS1169" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Combined Capture and Apply and Oracle Real Application Clusters</h3>
<p>Combined capture and apply can be used in an Oracle Real Application Clusters (Oracle RAC) environment. In an Oracle RAC environment, the capture process and apply process can be on the same instance, on different instances in a single Oracle RAC database, or on different databases. When the capture process and apply process are on different instances in the same database or on different databases, you must configure a propagation between the capture process&#39;s queue and the apply process&#39;s queue for combined capture and apply to be used.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_adcca.htm#BGBJBDHJ">Chapter 12, &#34;Combined Capture and Apply Optimization&#34;</a></div>
</div>
<!-- class="sect2" -->
<a id="i1006794"></a>
<div id="STRMS1170" class="sect2">
<h3 class="sect2">Queues and Oracle Real Application Clusters<a id="sthref1497"></a><a id="sthref1498"></a><a id="sthref1499"></a><a id="sthref1500"></a><a id="sthref1501"></a><a id="sthref1502"></a><a id="sthref1503"></a></h3>
<p>You can configure a <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> to stage <a href="strms_glossary.htm#CHDJDFAD"><span class="xrefglossterm">LCR</span></a>s and <a href="strms_glossary.htm#CHDDIHEC"><span class="xrefglossterm">user message</span></a>s in an Oracle Real Application Clusters (Oracle RAC) environment. In an Oracle RAC environment, only the owner instance can have a buffer for a queue, but different instances can have buffers for different queues. A <a href="strms_glossary.htm#CHDFJFED"><span class="xrefglossterm">buffered queue</span></a> is System Global Area (SGA) memory associated with a queue.</p>
<p>Oracle Streams processes and jobs support primary instance and secondary instance specifications for <a href="strms_glossary.htm#CHDFFJJB"><span class="xrefglossterm">queue table</span></a>s. If you use these specifications, then the secondary instance assumes ownership of a queue table when the primary instance becomes unavailable, and ownership is transferred back to the primary instance when it becomes available again.</p>
<p>You can set primary and secondary instance specifications using the <code dir="ltr">ALTER_QUEUE_TABLE</code> procedure in the <code dir="ltr">DBMS_AQADM</code> package. The <code dir="ltr">DBA_QUEUE_TABLES</code> data dictionary view contains information about the owner instance for a queue table. A queue table can contain multiple queues. In this case, each queue in a queue table has the same owner instance as the queue table.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_prop.htm#BCEGBFJA">&#34;Queues&#34;</a></p>
</li>
<li>
<p><a class="olink REFRN" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for more information about the <code dir="ltr">DBA_QUEUE_TABLES</code> data dictionary view</p>
</li>
<li>
<p><a class="olink ADQUE0500" href="../ADQUE/perform.htm#ADQUE0500"><span class="italic">Oracle Database Advanced Queuing User&#39;s Guide</span></a> for more information about queues and Oracle RAC</p>
</li>
<li>
<p><a class="olink ARPLS107" href="../ARPLS/d_aqadm.htm#ARPLS107"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code dir="ltr">ALTER_QUEUE_TABLE</code> procedure</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDBDIDH"></a>
<div id="STRMS1171" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Propagations and Oracle Real Application Clusters</h3>
<p>A <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a> can propagate messages from one <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> to another in an Oracle Real Application Clusters (Oracle RAC) environment. A <a href="strms_glossary.htm#CHDHGEHC"><span class="xrefglossterm">propagation job</span></a> running on an instance propagates logical change records (LCRs) from any queue owned by that instance to <a href="strms_glossary.htm#CHDHJHJD"><span class="xrefglossterm">destination queue</span></a>s.</p>
<p>Any propagation to an Oracle RAC database is made over database links. The database links must be configured to connect to the destination instance that owns the queue that will receive the messages.</p>
<p>If the owner instance for a queue table containing a <a href="strms_glossary.htm#CHDHJHJD"><span class="xrefglossterm">destination queue</span></a> for a propagation becomes unavailable, then queue ownership is transferred automatically to another instance in the cluster. If both the primary and secondary instance for a queue table containing a destination queue become unavailable, then queue ownership is transferred automatically to another instance in the cluster. In this case, if the primary or secondary instance becomes available again, then ownership is transferred back to one of them accordingly.</p>
<p>A queue-to-queue propagation to a buffered destination queue uses a service to provide transparent failover in an Oracle RAC environment. That is, a propagation job for a queue-to-queue propagation automatically connects to the instance that owns the destination queue. The service used by a queue-to-queue propagation always runs on the owner instance of the destination queue. This service is created only for buffered queues in an Oracle RAC database. If you plan to use buffered messaging with an Oracle RAC database, then messages can be enqueued into a buffered queue on any instance. If messages are enqueued on an instance that does not own the queue, then the messages are sent to the correct instance, but it is more efficient to enqueue messages on the instance that owns the queue. You can use the service to connect to the owner instance of the queue before enqueuing messages into a buffered queue.</p>
<p>Because the queue service always runs on the owner instance of the queue, transparent failover can occur when Oracle RAC instances fail. When multiple queue-to-queue propagations use a single database link, the connect description for each queue-to-queue propagation changes automatically to propagate messages to the correct destination queue.</p>
<p>In contrast, queue-to-dblink propagations do not use services. Queue-to-dblink propagations require you to repoint your database links if the owner instance in an Oracle RAC database that contains the destination queue for the propagation fails. To make the propagation job connect to the correct instance on the <a href="strms_glossary.htm#CHDGCAJA"><span class="xrefglossterm">destination database</span></a>, manually reconfigure the database link from the <a href="strms_glossary.htm#CHDHFBJG"><span class="xrefglossterm">source database</span></a> to connect to the instance that owns the destination queue. You do not need to modify a propagation that uses a re-created database link.</p>
<p>The <code dir="ltr">NAME</code> column in the <code dir="ltr">DBA_SERVICES</code> data dictionary view contains the service name for a queue. The <code dir="ltr">NETWORK_NAME</code> column in the <code dir="ltr">DBA_QUEUES</code> data dictionary view contains the network name for a queue. Do not manage the services for queue-to-queue propagations in any way. Oracle manages them automatically. For queue-to-dblink propagations, use the network name as the service name in the connect string of the database link to connect to the correct instance.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If a queue contains or will contain <a href="strms_glossary.htm#CHDCHEJI"><span class="xrefglossterm">captured LCR</span></a>s in an Oracle RAC environment, then use queue-to-queue propagations to propagate messages to an Oracle RAC destination database. If a queue-to-dblink propagation propagates captured LCRs to an Oracle RAC destination database, then this propagation must use an instance-specific database link that refers to the owner instance of the destination queue. If such a propagation connects to any other instance, then the propagation raises an error.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_prop.htm#i1006210">&#34;Message Propagation Between Queues&#34;</a></div>
</div>
<!-- class="sect2" -->
<a id="i1006991"></a>
<div id="STRMS1172" class="sect2">
<h3 class="sect2">Apply Processes and Oracle Real Application Clusters<a id="sthref1504"></a><a id="sthref1505"></a></h3>
<p>You can configure an Oracle Streams <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a> to apply changes in an Oracle Real Application Clusters (Oracle RAC) environment. Each apply process is started and stopped on the owner instance for its <code dir="ltr">ANYDATA</code> queue, even if the start or stop procedure is run on a different instance. An apply <a href="strms_glossary.htm#CHDEGIHH"><span class="xrefglossterm">coordinator process</span></a>, its corresponding apply <a href="strms_glossary.htm#CHDIFFGB"><span class="xrefglossterm">reader server</span></a>, and all of its <a href="strms_glossary.htm#CHDDCEJB"><span class="xrefglossterm">apply servers</span></a> run on a single instance.</p>
<p>If the owner instance for a <a href="strms_glossary.htm#CHDFFJJB"><span class="xrefglossterm">queue table</span></a> containing a <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a> used by an apply process becomes unavailable, then queue ownership is transferred automatically to another instance in the cluster. Also, an apply process will follow its queue to a different instance if the current owner instance becomes unavailable. The queue itself follows the rules for primary instance and secondary instance ownership. In addition, if the apply process was enabled when the owner instance became unavailable, then the apply process is restarted automatically on the new owner instance. If the apply process was disabled when the owner instance became unavailable, then the apply process remains disabled on the new owner instance.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_apply.htm#BABFBJDG">&#34;Implicit Consumption with an Apply Process&#34;</a></p>
</li>
<li>
<p><a class="olink REFRN" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for more information about the <code dir="ltr">DBA_QUEUE_TABLES</code> data dictionary view</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDHEABF"></a>
<div id="STRMS1173" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Oracle Streams and Transparent Data Encryption<a id="sthref1506"></a><a id="sthref1507"></a></h2>
<p>The following topics describe how Oracle Streams works with Transparent Data Encryption:</p>
<ul>
<li>
<p><a href="#CACJGBCH">Capture Processes and Transparent Data Encryption</a></p>
</li>
<li>
<p><a href="#CACEBJAC">Synchronous Capture and Transparent Data Encryption</a></p>
</li>
<li>
<p><a href="#CACBGEGI">Explicit Capture and Transparent Data Encryption</a></p>
</li>
<li>
<p><a href="#CHDHHGJD">Queues and Transparent Data Encryption</a></p>
</li>
<li>
<p><a href="#BCEDAJCG">Propagations and Transparent Data Encryption</a></p>
</li>
<li>
<p><a href="#BABHJAHF">Apply Processes and Transparent Data Encryption</a></p>
</li>
<li>
<p><a href="#CHDGFGIJ">Messaging Clients and Transparent Data Encryption</a></p>
</li>
<li>
<p><a href="#CHDGFHCG">Manual Dequeue and Transparent Data Encryption</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG600" href="../ASOAG/asopart1.htm#ASOAG600"><span class="italic">Oracle Database Advanced Security Guide</span></a> for information about Transparent Data Encryption</div>
<a id="CACJGBCH"></a>
<div id="STRMS173" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Capture Processes and Transparent Data Encryption<a id="sthref1508"></a><a id="sthref1509"></a></h3>
<p>A local <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a> can capture changes to columns that have been encrypted using Transparent Data Encryption. A downstream capture process can capture changes to columns that have been encrypted only if the downstream database shares a keystore with the <a href="strms_glossary.htm#CHDHFBJG"><span class="xrefglossterm">source database</span></a>. A keystore can be shared through a network file system (NFS), or it can be copied from one computer system to another manually. When a keystore is shared with a downstream database, ensure that the <code dir="ltr">ENCRYPTION_WALLET_LOCATION</code> parameter in the <code dir="ltr">sqlnet.ora</code> file at the downstream database specifies the keystore location.</p>
<p>If you copy a keystore to a downstream database, then ensure that you copy the keystore from the source database to the downstream database whenever the keystore at the source database changes. Do not perform any operations on the keystore at the downstream database, such as changing the encryption key for a replicated table.</p>
<p>Encrypted columns in row logical change records (row LCRs) captured by a local or downstream capture process are decrypted when the row LCRs are staged in a <a href="strms_glossary.htm#CHDFJFED"><span class="xrefglossterm">buffered queue</span></a>. If row LCRs spill to disk in a database with Transparent Data Encryption enabled, then Oracle Streams transparently encrypts any encrypted columns while the row LCRs are stored on disk.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
A capture process only supports encrypted columns if the redo logs used by the capture process were generated by a database with a compatibility level of 11.0.0 or higher. The compatibility level is controlled by the <code dir="ltr">COMPATIBLE</code> initialization parameter.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_capture.htm#CACGECDI">&#34;Implicit Capture with an Oracle Streams Capture Process&#34;</a></p>
</li>
<li>
<p><a href="strms_prop.htm#i1006905">&#34;Persistent Queues and Buffered Queues&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACEBJAC"></a>
<div id="STRMS1174" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Synchronous Capture and Transparent Data Encryption<a id="sthref1510"></a><a id="sthref1511"></a></h3>
<p>A <a href="strms_glossary.htm#CBACHEDJ"><span class="xrefglossterm">synchronous capture</span></a> can capture changes to columns that have been encrypted using Transparent Data Encryption. Encrypted columns in row logical change records (row LCRs) captured by a synchronous capture remain encrypted when the row LCRs are staged in a <a href="strms_glossary.htm#CBAEIBGJ"><span class="xrefglossterm">persistent queue</span></a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_capture.htm#CACIDGBI">&#34;Implicit Capture with Synchronous Capture&#34;</a></div>
</div>
<!-- class="sect2" -->
<a id="CACBGEGI"></a>
<div id="STRMS1175" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Explicit Capture and Transparent Data Encryption<a id="sthref1512"></a><a id="sthref1513"></a></h3>
<p>You can use explicit capture to construct and enqueue row logical change records (row LCRs) for columns that are encrypted in database tables. However, you cannot specify that columns are encrypted when you construct the row LCRs. Therefore, when explicitly captured row LCRs are staged in a queue, all of the columns in the row LCRs are decrypted.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_capture.htm#CACGBFJB">&#34;Explicit Capture by Applications&#34;</a></div>
</div>
<!-- class="sect2" -->
<a id="CHDHHGJD"></a>
<div id="STRMS1176" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Queues and Transparent Data Encryption<a id="sthref1514"></a><a id="sthref1515"></a></h3>
<p>A <a href="strms_glossary.htm#CBAEIBGJ"><span class="xrefglossterm">persistent queue</span></a> can store row logical change records (row LCRs) captured by a <a href="strms_glossary.htm#CBACHEDJ"><span class="xrefglossterm">synchronous capture</span></a>, and these row LCRs can contain changes to columns that were encrypted using Transparent Data Encryption. The row LCRs remain encrypted while they are stored in the persistent queue. Explicitly captured row LCRs cannot contain encrypted columns.</p>
<p>A <a href="strms_glossary.htm#CHDFJFED"><span class="xrefglossterm">buffered queue</span></a> can store row LCRs that contain changes captured by a <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>, and these row LCRs can contain changes to columns that were encrypted using Transparent Data Encryption. When row LCRs with encrypted columns are stored in buffered queues, the columns are decrypted. When row LCRs spill to disk, Oracle Streams transparently encrypts any encrypted columns while the row LCRs are stored on disk.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<a id="sthref1516"></a><a id="sthref1517"></a>For Oracle Streams to encrypt columns transparently, the encryption master key must be stored in the keystore on the local database, and the keystore must be open. The following statements set the master key and open the keystore:
<pre dir="ltr">ALTER SYSTEM SET ENCRYPTION KEY IDENTIFIED BY <span class="italic">key-password</span>;
 
ALTER SYSTEM SET ENCRYPTION WALLET OPEN IDENTIFIED BY <span class="italic">key-password</span>;
</pre></div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_prop.htm#BCEGBFJA">&#34;Queues&#34;</a></p>
</li>
<li>
<p><a href="strms_capture.htm#CACBJHJE">&#34;Ways to Capture Information with Oracle Streams&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BCEDAJCG"></a>
<div id="STRMS1177" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Propagations and Transparent Data Encryption<a id="sthref1518"></a><a id="sthref1519"></a></h3>
<p>A <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a> can propagate row logical change records (row LCRs) that contain changes to columns that were encrypted using Transparent Data Encryption. When a propagation propagates row LCRs with encrypted columns, the encrypted columns are decrypted while the row LCRs are transferred over the network. You can use the features of Oracle Advanced Security to encrypt data transfers over the network if necessary.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink DBSEG020" href="../DBSEG/asoconfg.htm#DBSEG020"><span class="italic">Oracle Database Security Guide</span></a> for information about configuring network data encryption</p>
</li>
<li>
<p><a href="strms_prop.htm#i1006210">&#34;Message Propagation Between Queues&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BABHJAHF"></a>
<div id="STRMS1178" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Apply Processes and Transparent Data Encryption<a id="sthref1520"></a><a id="sthref1521"></a><a id="sthref1522"></a></h3>
<p>An <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a> can dequeue and process implicitly captured row logical change records (row LCRs) that contain columns encrypted using Transparent Data Encryption. When row LCRs with encrypted columns are dequeued by an apply process, the encrypted columns are decrypted. These row LCRs with decrypted columns can be sent to an apply handler for custom processing, or they can be applied directly. When row LCRs are applied, and the modified table contains encrypted columns, any changes to encrypted columns are encrypted when they are applied.</p>
<p>When row LCRs contain encrypted columns, but the corresponding columns at the <a href="strms_glossary.htm#CHDGCAJA"><span class="xrefglossterm">destination database</span></a> are not encrypted, then the <code dir="ltr">preserve_encryption</code> apply process parameter controls apply process behavior:</p>
<ul>
<li>
<p>If the <code dir="ltr">preserve_encryption</code> parameter is set to <code dir="ltr">Y</code>, then the apply process raises an error when row LCRs contain encrypted columns, but the corresponding columns at the destination database are not encrypted. When an error is raised, the row LCR is not applied, and all of the row LCRs in the transaction are moved to the error queue.</p>
</li>
<li>
<p>If the <code dir="ltr">preserve_encryption</code> parameter is set to <code dir="ltr">N</code>, then the apply process applies the row changes when row LCRs contain encrypted columns, but the corresponding columns at the destination database are not encrypted.</p>
</li>
</ul>
<p><a id="sthref1523"></a><a id="sthref1524"></a>When an apply process moves implicitly captured row LCRs with encrypted columns to the error queue, the encrypted columns are encrypted when the row LCRs are in the error queue. Row LCRs are implicitly captured using <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>es and <a href="strms_glossary.htm#CBACHEDJ"><span class="xrefglossterm">synchronous capture</span></a>s.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_apply.htm#BABFBJDG">&#34;Implicit Consumption with an Apply Process&#34;</a></div>
</div>
<!-- class="sect2" -->
<a id="CHDGFGIJ"></a>
<div id="STRMS1179" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Messaging Clients and Transparent Data Encryption</h3>
<p><a id="sthref1525"></a><a id="sthref1526"></a>A <a href="strms_glossary.htm#CHDDGHHB"><span class="xrefglossterm">messaging client</span></a> can dequeue implicitly captured row LCRs that contain columns encrypted using Transparent Data Encryption. When row LCRs with encrypted columns are dequeued by a messaging client, the encrypted columns are decrypted.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_apply.htm#i1008622">&#34;Explicit Consumption with a Messaging Client&#34;</a></div>
</div>
<!-- class="sect2" -->
<a id="CHDGFHCG"></a>
<div id="STRMS1180" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Manual Dequeue and Transparent Data Encryption</h3>
<p><a id="sthref1527"></a><a id="sthref1528"></a><a id="sthref1529"></a><a id="sthref1530"></a>A user or application can dequeue implicitly captured row LCRs that contain columns encrypted using Transparent Data Encryption. When row LCRs with encrypted columns are dequeued, the encrypted columns are decrypted.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_apply.htm#BABCICBA">&#34;Explicit Consumption with Manual Dequeue&#34;</a></div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDHJGDH"></a>
<div id="STRMS1181" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Oracle Streams and Flashback Data Archive<a id="sthref1531"></a><a id="sthref1532"></a></h2>
<p>Oracle Streams supports tables in a flashback data archive. Capture processes can capture data manipulation language (DML) and data definition language (DDL) changes made to these tables. Synchronous captures can capture DML changes made to these tables. Apply processes can apply changes encapsulated in logical change records (LCRs) to these tables.</p>
<p>Oracle Streams capture processes and apply processes also support the following DDL statements:</p>
<ul>
<li>
<p><code dir="ltr">CREATE</code> <code dir="ltr">FLASHBACK</code> <code dir="ltr">ARCHIVE</code></p>
</li>
<li>
<p><code dir="ltr">ALTER</code> <code dir="ltr">FLASHBACK</code> <code dir="ltr">ARCHIVE</code></p>
</li>
<li>
<p><code dir="ltr">DROP</code> <code dir="ltr">FLASHBACK</code> <code dir="ltr">ARCHIVE</code></p>
</li>
<li>
<p><code dir="ltr">CREATE</code> <code dir="ltr">TABLE</code> with a <code dir="ltr">FLASHBACK</code> <code dir="ltr">ARCHIVE</code> clause</p>
</li>
<li>
<p><code dir="ltr">ALTER</code> <code dir="ltr">TABLE</code> with a <code dir="ltr">FLASHBACK</code> <code dir="ltr">ARCHIVE</code> clause</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle Streams does not capture or apply changes made to internal tables used by a flashback data archive.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADFNS01011" href="../ADFNS/adfns_flashback.htm#ADFNS01011"><span class="italic">Oracle Database Development Guide</span></a> for information about flashback data archive</p>
</li>
<li>
<p><a href="strms_capture.htm#CACGECDI">Chapter 2, &#34;Implicit Capture with an Oracle Streams Capture Process&#34;</a></p>
</li>
<li>
<p><a href="strms_capture.htm#CACIDGBI">Chapter 2, &#34;Implicit Capture with Synchronous Capture&#34;</a></p>
</li>
<li>
<p><a href="strms_apply.htm#BABFBJDG">Chapter 4, &#34;Implicit Consumption with an Apply Process&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="CHDIBCAB"></a>
<div id="STRMS1182" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Oracle Streams and Recovery Manager (RMAN)</h2>
<p>The following topics describe how Oracle Streams works with Recovery Manager (RMAN):</p>
<ul>
<li>
<p><a href="#CHDFEEFD">RMAN and Instantiation</a></p>
</li>
<li>
<p><a href="#CHDECDFG">RMAN and Archived Redo Log Files Required by a Capture Process</a></p>
</li>
<li>
<p><a href="#CHDCFJHA">The Recovery Catalog and Oracle Streams</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV" href="../BRADV/toc.htm"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a></div>
<a id="CHDFEEFD"></a>
<div id="STRMS1183" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">RMAN and Instantiation</h3>
<p>You can use RMAN to instantiate database objects during the configuration of an Oracle Streams replication environment. The RMAN <code dir="ltr">DUPLICATE</code> and <code dir="ltr">CONVERT</code> <code dir="ltr">DATABASE</code> commands can instantiate an entire database, and the RMAN <code dir="ltr">TRANSPORT</code> <code dir="ltr">TABLESPACE</code> command can instantiate a tablespace or set of tablespaces.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STREP139" href="../STREP/instant.htm#STREP139"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for information about using RMAN for instantiation</div>
</div>
<!-- class="sect2" -->
<a id="CHDECDFG"></a>
<div id="STRMS1184" class="sect2">
<h3 class="sect2">RMAN and Archived Redo Log Files Required by a Capture Process<a id="sthref1533"></a><a id="sthref1534"></a><a id="sthref1535"></a><a id="sthref1536"></a><a id="sthref1537"></a></h3>
<p>Some Recovery Manager (RMAN) deletion policies and commands delete archived redo log files. If one of these RMAN policies or commands is used on a database that generates redo log files for one or more capture processes, then ensure that the RMAN commands do not delete archived redo log files that are required by a capture process.</p>
<p>The following sections describe the behavior of RMAN deletion policies and commands for local capture processes and downstream capture processes</p>
<ul>
<li>
<p><a href="#BGBHGGBA">RMAN and Local Capture Processes</a></p>
</li>
<li>
<p><a href="#BGBIFDCD">RMAN and Downstream Capture Processes</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_adcapture.htm#i1007010">&#34;ARCHIVELOG Mode and a Capture Process&#34;</a></p>
</li>
<li>
<p><a href="strms_trcapture.htm#i1010961">&#34;Are Required Redo Log Files Missing?&#34;</a> for information about determining whether a capture process is missing required archived redo log files and for information correcting this problem. This section also contains information about fast recovery area and local capture processes.</p>
</li>
<li>
<p><a href="strms_trouble.htm#i1007184">&#34;Checking the Trace Files and Alert Log for Problems&#34;</a></p>
</li>
<li>
<p><a class="olink BRADV" href="../BRADV/toc.htm"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> and <a class="olink RCMRF" href="../RCMRF/toc.htm"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for more information about RMAN</p>
</li>
</ul>
</div>
<a id="BGBHGGBA"></a>
<div id="STRMS1185" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">RMAN and Local Capture Processes</h4>
<p>When a <a href="strms_glossary.htm#CHDDGCGH"><span class="xrefglossterm">local capture process</span></a> is configured, RMAN does not delete archived redo log files that are required by the local capture process unless there is space pressure in the fast recovery area. Specifically, RMAN does not delete archived redo log files that contain changes with system change number (SCN) values that are equal to or greater than the <a href="strms_glossary.htm#CHDJHFCB"><span class="xrefglossterm">required checkpoint SCN</span></a> for the local capture process. This is the default RMAN behavior for all RMAN deletion policies and <code dir="ltr">DELETE</code> commands, including <code dir="ltr">DELETE</code> <code dir="ltr">ARCHIVELOG</code> and <code dir="ltr">DELETE</code> <code dir="ltr">OBSOLETE</code>.</p>
<p>When there is not enough space in the fast recovery area to write a new log file, RMAN automatically deletes one or more archived redo log files. Oracle Database writes warnings to the alert log when RMAN automatically deletes an archived redo log file that is required by a local capture process.</p>
<p>When backups of the archived redo log files are taken on the local capture process database, Oracle recommends the following RMAN deletion policy:</p>
<pre dir="ltr">CONFIGURE ARCHIVELOG DELETION POLICY TO BACKED UP <span class="italic">integer</span> TIMES 
   TO DEVICE TYPE <span class="italic">deviceSpecifier</span>;
</pre>
<p>This deletion policy requires that a log file be backed up <code dir="ltr"><span class="codeinlineitalic">integer</span></code> times before it is considered for deletion.</p>
<p>When no backups of the archived redo log files are taken on the local capture process database, no specific deletion policy is recommended. By default, RMAN does not delete archived redo log files that are required by a local capture process.</p>
</div>
<!-- class="sect3" -->
<a id="BGBIFDCD"></a>
<div id="STRMS1186" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">RMAN and Downstream Capture Processes</h4>
<p>When a <a href="strms_glossary.htm#CHDHEBHD"><span class="xrefglossterm">downstream capture process</span></a> captures database changes made at a <a href="strms_glossary.htm#CHDHFBJG"><span class="xrefglossterm">source database</span></a>, ensure that no RMAN deletion policy or command deletes an archived redo log file until after it is transferred from the source database to the downstream capture process database.</p>
<p>The following are considerations for specific RMAN deletion policies and commands that delete archived redo log files:</p>
<ul>
<li>
<p>The RMAN command <code dir="ltr">CONFIGURE</code> <code dir="ltr">ARCHIVELOG</code> <code dir="ltr">DELETION</code> <code dir="ltr">POLICY</code> sets a deletion policy that determines when archived redo log files in the fast recovery area are eligible for deletion. The deletion policy also applies to all RMAN <code dir="ltr">DELETE</code> commands, including <code dir="ltr">DELETE</code> <code dir="ltr">ARCHIVELOG</code> and <code dir="ltr">DELETE</code> <code dir="ltr">OBSOLETE</code>.</p>
<p>The following settings determine the behavior at the source database:</p>
<ul>
<li>
<p>A deletion policy set <code dir="ltr">TO</code> <code dir="ltr">SHIPPED</code> <code dir="ltr">TO</code> <code dir="ltr">STANDBY</code> does not delete a log file until after it is transferred to a downstream capture process database that requires the file. These log files might or might not have been processed by the downstream capture process. Automatic deletion occurs when there is not enough space in the fast recovery area to write a new log file.</p>
</li>
<li>
<p>A deletion policy set <code dir="ltr">TO</code> <code dir="ltr">APPLIED</code> <code dir="ltr">ON</code> <code dir="ltr">STANDBY</code> does not delete a log file until after it is transferred to a downstream capture process database that requires the file and the source database marks the log file as applied. The source database marks a log file as applied when the minimum required checkpoint SCN of all of the downstream capture processes for the source database is greater than the highest SCN in the log file.</p>
</li>
<li>
<p>A deletion policy set to <code dir="ltr">BACKED</code> <code dir="ltr">UP</code> <code dir="ltr"><span class="codeinlineitalic">integer</span></code> <code dir="ltr">TIMES</code> <code dir="ltr">TO</code> <code dir="ltr">DEVICE</code> <code dir="ltr">TYPE</code> requires that a log file be backed up <code dir="ltr"><span class="codeinlineitalic">integer</span></code> times before it is considered for deletion. A log file can be deleted even if the log file has not been processed by a downstream capture process that requires it.</p>
</li>
<li>
<p>A deletion policy set <code dir="ltr">TO</code> <code dir="ltr">NONE</code> means that a log file can be deleted when there is space pressure on the fast recovery area, even if the log file has not been processed by a downstream capture process that requires it.</p>
</li>
</ul>
</li>
<li>
<p>The RMAN command <code dir="ltr">DELETE</code> <code dir="ltr">ARCHIVELOG</code> deletes archived redo log files that meet all of the following conditions:</p>
<ul>
<li>
<p>The log files satisfy the condition specified in the <code dir="ltr">DELETE</code> <code dir="ltr">ARCHIVELOG</code> command.</p>
</li>
<li>
<p>The log files can be deleted according to the <code dir="ltr">CONFIGURE</code> <code dir="ltr">ARCHIVELOG</code> <code dir="ltr">DELETION</code> <code dir="ltr">POLICY</code>. For example, if the policy is set <code dir="ltr">TO</code> <code dir="ltr">SHIPPED</code> <code dir="ltr">TO</code> <code dir="ltr">STANDBY</code>, then this command does not delete a log file until after it is transferred to any downstream capture process database that requires it.</p>
</li>
</ul>
<p>This behavior applies when the database is mounted or open.</p>
<p>If archived redo log files are not deleted because they contain changes required by a downstream capture process, then RMAN displays a warning message about skipping the delete operation for these files.</p>
</li>
<li>
<p>The RMAN command <code dir="ltr">DELETE</code> <code dir="ltr">OBSOLETE</code> permanently purges the archived redo log files that meet all of the following conditions:</p>
<ul>
<li>
<p>The log files are obsolete according to the retention policy.</p>
</li>
<li>
<p>The log files can be deleted according to the <code dir="ltr">CONFIGURE</code> <code dir="ltr">ARCHIVELOG</code> <code dir="ltr">DELETION</code> <code dir="ltr">POLICY</code>. For example, if the policy is set <code dir="ltr">TO</code> <code dir="ltr">SHIPPED</code> <code dir="ltr">TO</code> <code dir="ltr">STANDBY</code>, then this command does not delete a log file until after it is transferred to any downstream capture process database that requires it.</p>
</li>
</ul>
<p>This behavior applies when the database is mounted or open.</p>
</li>
<li>
<p>The RMAN command <code dir="ltr">BACKUP</code> <code dir="ltr">ARCHIVELOG</code> <code dir="ltr">ALL</code> <code dir="ltr">DELETE</code> <code dir="ltr">INPUT</code> copies the archived redo log files and deletes the original files after completing the backup. This command does not delete the log file until after it is transferred to a downstream capture process database when the following conditions are met:</p>
<ul>
<li>
<p>The database is mounted or open.</p>
</li>
<li>
<p>The log file is required by a downstream capture process.</p>
</li>
<li>
<p>The deletion policy is set <code dir="ltr">TO</code> <code dir="ltr">SHIPPED</code> <code dir="ltr">TO</code> <code dir="ltr">STANDBY</code>.</p>
</li>
</ul>
<p>If archived redo log files are not deleted because they contain changes required by a downstream capture process, then RMAN displays a warning message about skipping the delete operation for these files.</p>
</li>
</ul>
<p>Oracle recommends one of the following RMAN deletion policies at the source database for a downstream capture process:</p>
<ul>
<li>
<p>When backups of the archived redo log files are taken on the source database, set the deletion policy to the following:</p>
<pre dir="ltr">CONFIGURE ARCHIVELOG DELETION POLICY TO SHIPPED TO STANDBY 
   BACKED UP <span class="italic">integer</span> TIMES TO DEVICE TYPE <span class="italic">deviceSpecifier</span>;
</pre></li>
<li>
<p>When no backups of the archived redo log files are taken on the source database, set the deletion policy to the following:</p>
<pre dir="ltr">CONFIGURE ARCHIVELOG DELETION POLICY TO SHIPPED TO STANDBY;
</pre></li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
At a downstream capture process database, archived redo log files transferred from a source database are not managed by RMAN.</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDCFJHA"></a>
<div id="STRMS1187" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">The Recovery Catalog and Oracle Streams</h3>
<p>Oracle Streams supports replicating a recovery catalog in a one-way replication environment. Bi-directional replication of a recovery catalog is not supported.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink STREP224" href="../STREP/prep_rep.htm#STREP224"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for information about one-way and bi-directional replication</p>
</li>
<li>
<p><a class="olink BRADV89642" href="../BRADV/rcmcatdb.htm#BRADV89642"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for information about the recovery catalog</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CCHBBGEG"></a>
<div id="STRMS1649" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Oracle Streams and Distributed Transactions</h2>
<p>You can perform distributed transactions using either of the following methods:</p>
<ul>
<li>
<p>Modify tables in multiple databases in a coordinated manner using database links.</p>
</li>
<li>
<p>Use the XA interface, as exposed by the <code dir="ltr">DBMS_XA</code> supplied PL/SQL package or by the OCI or JDBC libraries. The XA interface implements X/Open Distributed Transaction Processing (DTP) architecture.</p>
</li>
</ul>
<p>Oracle Streams replicates changes made to the source database during a distributed transaction using either of these two methods to the destination database. An apply process at the destination database applies the changes in a transaction after the transaction has committed.</p>
<p>However, the distributed transaction state is not replicated or sent. The destination database or client application does not inherit the in-doubt or prepared state of such a transaction. Also, Oracle Streams does not replicate or send the changes using the same global transaction identifier used at the source database for XA transactions.</p>
<p>XA transactions can be performed in two ways:</p>
<ul>
<li>
<p>Tightly coupled, where different XA branches share locks</p>
</li>
<li>
<p>Loosely coupled, where different XA branches do not share locks</p>
</li>
</ul>
<p>Oracle Streams supports replication of changes made by loosely coupled XA branches regardless of the <code dir="ltr">COMPATIBLE</code> initialization parameter value. Oracle Streams supports replication of changes made by tightly coupled branches on an Oracle RAC source database only if the <code dir="ltr">COMPATIBLE</code> initialization parameter set to <code dir="ltr">11.2.0</code> or higher.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN12113" href="../ADMIN/ds_concepts.htm#ADMIN12113"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information about distributed transactions</p>
</li>
<li>
<p><a class="olink ADFNS017" href="../ADFNS/adfns_xa.htm#ADFNS017"><span class="italic">Oracle Database Development Guide</span></a> for more information about Oracle XA</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BGBBADDE"></a>
<div id="STRMS1767" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Oracle Streams and Oracle Database Vault<a id="sthref1538"></a><a id="sthref1539"></a></h2>
<p>Oracle Database Vault restricts access to specific areas in an Oracle database from any user, including users who have administrative access. If you are using Oracle Streams in an Oracle Data Vault environment, then the following privileges and roles are required:</p>
<ul>
<li>
<p>The Streams administrator must be granted the <code dir="ltr">DV_STREAMS_ADMIN</code> role to perform the following tasks: create a capture process, create an apply process, and modify the capture user for a capture process. When the Streams administrator is not performing these tasks, you can revoke the <code dir="ltr">DV_STREAMS_ADMIN</code> role from the Streams administrator.</p>
</li>
<li>
<p>The apply user for an apply process must be authorized to apply changes to realms that include replicated database objects. The replicated database objects are the objects to which the apply process applies changes.</p>
</li>
</ul>
<p>To authorize an apply user for a realm, run the <code dir="ltr">DBMS_MACADM.ADD_AUTH_TO_REALM</code> procedure and specify the realm and the apply user. For example, to authorize apply user <code dir="ltr">strmadmin</code> for the sales realm, run the following procedure:</p>
<pre dir="ltr"> BEGIN
     DBMS_MACADM.ADD_AUTH_TO_REALM(
      realm_name  =&gt; &#39;sales&#39;, 
      grantee     =&gt; &#39;strmadmin&#39;); 
    END;
    /
</pre>
<p>In addition, the user who performs the following actions must be granted the <code dir="ltr">BECOME USER</code> system privilege:</p>
<ul>
<li>
<p>Creates or alters a capture process</p>
</li>
<li>
<p>Creates or alters an outbound server</p>
</li>
<li>
<p>Creates or alters an inbound server</p>
</li>
</ul>
<p>Granting the <code dir="ltr">BECOME USER</code> system privilege to the user who performs these actions is not required if Oracle Database Vault is not installed. You can revoke the <code dir="ltr">BECOME USER</code> system privilege from the user after the completing one of these actions, if necessary.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DVADM70324" href="../DVADM/dba.htm#DVADM70324"><span class="italic">Oracle Database Vault Administrator&#39;s Guide</span></a></div>
</div>
<!-- class="sect1" --></div>
<!-- class="appendix" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5963">
<tr>
<td class="cellalignment5970">
<table class="cellalignment5968">
<tr>
<td class="cellalignment5967"><a href="pt_ap.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5967"><a href="ap_restrictions.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5972">
<table class="cellalignment5966">
<tr>
<td class="cellalignment5967"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5967"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5967"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5967"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5967"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5967"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>