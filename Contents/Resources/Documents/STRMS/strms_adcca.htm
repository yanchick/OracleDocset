<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-104439"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Combined%20Capture%20and%20Apply%20Optimization"></a><title>Combined Capture and Apply Optimization</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1032"/>
<meta name="dcterms.created" content="2014-12-23T13:28:6Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Streams Concepts and Administration"/>
<meta name="dcterms.identifier" content="E53116-02"/>
<meta name="dcterms.isVersionOf" content="STRMS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="strms_glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="strms_adrules.htm" title="Previous" type="text/html"/>
<link rel="Next" href="strms_adha.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E53116-02.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">20/57</span> <!-- End Header -->
<div id="STRMS171" class="chapter"><a id="BGBJBDHJ"></a>
<h1 class="chapter"><span class="secnum">12</span> Combined Capture and Apply Optimization</h1>
<p>The following topics contain information about the combined capture and apply optimization:</p>
<ul>
<li>
<p><a href="#BCEHFDDB">Combined Capture and Apply Requirements</a></p>
</li>
<li>
<p><a href="#BCEFHEHI">How to Use Combined Capture and Apply</a></p>
</li>
<li>
<p><a href="#BCEBGHHG">How to Determine Whether Combined Capture and Apply Is Being Used</a></p>
</li>
<li>
<p><a href="#BCEDDCAJ">Combined Capture and Apply and Point-in-Time Recovery</a></p>
</li>
</ul>
<div id="STRMS573" class="sect1"><!-- infolevel="all" infotype="General" --><a id="sthref611"></a>
<h2 class="sect1">About Combined Capture and Apply Optimization</h2>
<p><a id="sthref612"></a><a id="sthref613"></a><a id="sthref614"></a><a id="sthref615"></a>For improved efficiency, a <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a> can create a propagation sender to transmit logical change records (<a href="strms_glossary.htm#CHDJDFAD"><span class="xrefglossterm">LCR</span></a>s) directly to a propagation receiver under specific conditions. The propagation receiver enqueues the LCRs into the <a href="strms_glossary.htm#CHDFJFED"><span class="xrefglossterm">buffered queue</span></a> portion of the <a href="strms_glossary.htm#CHDHJHJD"><span class="xrefglossterm">destination queue</span></a>, and an <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a> dequeues the LCRs. This optimization is called combined capture and apply.</p>
</div>
<!-- class="sect1" -->
<a id="BCEHFDDB"></a>
<div id="STRMS574" class="sect1">
<h2 class="sect1">Combined Capture and Apply Requirements</h2>
<p>Combined capture and apply can be used when the capture process and apply process run on the same database instance or on different databases.</p>
<p>When the capture process and apply process run on the same database instance, combined capture and apply is possible only if all of the following conditions are met:</p>
<ul>
<li>
<p>The capture process and apply process must use the same <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a>.</p>
</li>
<li>
<p>The queue must have a single publisher, and it must be the capture process.</p>
</li>
</ul>
<p>When the capture process and apply process run on different databases, or on different instances in the same database, combined capture and apply is possible only if all of the following conditions are met:</p>
<ul>
<li>
<p>The capture process&#39;s queue must have a single publisher, and it must be the capture process.</p>
</li>
<li>
<p>A <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a> must be configured between the capture process&#39;s queue and the apply process&#39;s queue. There can be no intermediate queues (no directed network).</p>
</li>
<li>
<p>Each apply process that applies changes from the same source database must use a different queue.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>Combined capture and apply is not possible with <a href="strms_glossary.htm#CBACHEDJ"><span class="xrefglossterm">synchronous capture</span></a>.</p>
</li>
<li>
<p>Combined capture and apply is not possible when an Oracle Database 10<span class="italic">g</span> or earlier database is part of the configuration.</p>
</li>
<li>
<p>The combined capture and apply requirements are different in Oracle Database 11<span class="italic">g</span> Release 2 (11.2) and later and Oracle Database 11<span class="italic">g</span> Release 1 (11.1). If a database in a combined capture and apply optimization is an Oracle Database 11<span class="italic">g</span> Release 1 (11.1) database, then the Oracle Database 11<span class="italic">g</span> Release 1 (11.1) requirements must be met. See <span class="italic">Oracle Streams Concepts and Administration</span> for Oracle Database 11<span class="italic">g</span> Release 1 (11.1) for information about these requirements.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_capture.htm#CACGECDI">&#34;Implicit Capture with an Oracle Streams Capture Process&#34;</a></p>
</li>
<li>
<p><a href="strms_prop.htm#i1006905">&#34;Persistent Queues and Buffered Queues&#34;</a></p>
</li>
<li>
<p><a href="strms_prop.htm#i1006301">&#34;Directed Networks&#34;</a></p>
</li>
<li>
<p><a href="strms_apply.htm#BABFBJDG">&#34;Implicit Consumption with an Apply Process&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BCEFHEHI"></a>
<div id="STRMS575" class="sect1">
<h2 class="sect1">How to Use Combined Capture and Apply</h2>
<p>After you meet the requirements for combined capture and apply, you do not need to perform any other configuration tasks to use it. The capture process automatically detects that combined capture and apply is possible when it is started. After it creates a propagation sender to establish a connection with the propagation receiver, the propagation sender sends captured LCRs directly to the propagation receiver.</p>
<p>If combined capture and apply is used, and you change the configuration so that it no longer meets the requirements of combined capture and apply, then the capture process detects this change and restarts. After the capture process restarts, it no longer uses combined capture and apply.</p>
<p>If combined capture and apply is not used, and you change the configuration so that it meets the requirements of combined capture and apply, then combined capture and apply is used automatically when the capture process is restarted. In this case, you must restart the capture process manually. It is not restarted automatically.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BCEHFDDB">&#34;Combined Capture and Apply Requirements&#34;</a></div>
</div>
<!-- class="sect1" -->
<a id="BCEBGHHG"></a>
<div id="STRMS576" class="sect1">
<h2 class="sect1">How to Determine Whether Combined Capture and Apply Is Being Used</h2>
<p>Check the following dynamic performance views to determine whether combined capture and apply is used:</p>
<ul>
<li>
<p>For the capture process, combined capture and apply is used when the <code dir="ltr">OPTIMIZATION</code> column is greater than zero in the <code dir="ltr">V$STREAMS_CAPTURE</code> view.</p>
</li>
<li>
<p>For the apply process, combined capture and apply is used when the <code dir="ltr">PROXY_SID</code> column is not <code dir="ltr">NULL</code> in the <code dir="ltr">V$STREAMS_APPLY_READER</code> view.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_cpmon.htm#CFFJBCFH">&#34;Determining Which Capture Processes Use Combined Capture and Apply&#34;</a></p>
</li>
<li>
<p><a href="strms_apmon.htm#CFFCFCDD">&#34;Determining Which Apply Processes Use Combined Capture and Apply&#34;</a></p>
</li>
<li>
<p><a href="strms_capture.htm#i1014290">&#34;Capture Process States&#34;</a></p>
</li>
<li>
<p><a class="olink REFRN" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for information about data dictionary views</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BCEDDCAJ"></a>
<div id="STRMS578" class="sect1">
<h2 class="sect1">Combined Capture and Apply and Point-in-Time Recovery</h2>
<p>When you use combined capture and apply in a single-source replication environment, the Oracle Streams clients handle point-in-time recovery of the destination database automatically. The Oracle Streams client include the capture process, propagation, and apply process that form the combined capture and apply optimization.</p>
<p>In a single-source replication environment that uses combined capture and apply, complete these general steps to perform point-in-time recovery on the destination database:</p>
<ol>
<li>
<p>Stop the capture process and apply process, and disable the propagation.</p>
</li>
<li>
<p>Perform the point-in-time recovery on the destination database.</p>
</li>
<li>
<p>Ensure that the capture process has access to the archived redo log files for the previous point in time.</p>
</li>
<li>
<p>Start the apply process.</p>
</li>
<li>
<p>Enable the propagation.</p>
</li>
<li>
<p>Start the capture process.</p>
</li>
</ol>
<p>When you follow these steps, the capture process determines its start SCN automatically, and no other steps are required.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STREP121" href="../STREP/man_gen_rep.htm#STREP121"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for more information about performing point-in-time recovery in an Oracle Streams replication environment</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5963">
<tr>
<td class="cellalignment5970">
<table class="cellalignment5968">
<tr>
<td class="cellalignment5967"><a href="strms_adrules.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5967"><a href="strms_adha.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5972">
<table class="cellalignment5966">
<tr>
<td class="cellalignment5967"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5967"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5967"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5967"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5967"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5967"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>