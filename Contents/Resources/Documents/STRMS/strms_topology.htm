<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-104478"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Monitoring%20the%20Oracle%20Streams%20Topology%20and%20Performance"></a><title>Monitoring the Oracle Streams Topology and Performance</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1032"/>
<meta name="dcterms.created" content="2014-12-23T13:28:7Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Streams Concepts and Administration"/>
<meta name="dcterms.identifier" content="E53116-02"/>
<meta name="dcterms.isVersionOf" content="STRMS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="strms_glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="strms_monitor.htm" title="Previous" type="text/html"/>
<link rel="Next" href="strms_cpmon.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E53116-02.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">33/57</span> <!-- End Header -->
<div id="STRMS170" class="chapter"><a id="BIHBBDEH"></a>
<h1 class="chapter"><span class="secnum">23</span> Monitoring the Oracle Streams Topology and Performance</h1>
<p>The Oracle Streams Performance Advisor consists of the <code dir="ltr">DBMS_STREAMS_ADVISOR_ADM</code> PL/SQL package and a collection of data dictionary views. The Oracle Streams Performance Advisor enables you to monitor the topology and performance of an Oracle Streams environment. The Oracle Streams topology includes information about the components in an Oracle Streams environment, the links between the components, and the way information flows from capture to consumption. The Oracle Streams Performance Advisor also provides information about how Oracle Streams components are performing.</p>
<p>The following topics contain information about the Oracle Streams Performance Advisor:</p>
<ul>
<li>
<p><a href="#BIHCEACJ">About the Oracle Streams Topology</a></p>
</li>
<li>
<p><a href="#BIHFCHEB">About the Oracle Streams Performance Advisor</a></p>
</li>
<li>
<p><a href="#BIHFDBCA">About Stream Paths in an Oracle Streams Topology</a></p>
</li>
<li>
<p><a href="#BIHCIDAF">About the Information Gathered by the Oracle Streams Performance Advisor</a></p>
</li>
<li>
<p><a href="#BIHGBBIA">Gathering Information About the Oracle Streams Topology and Performance</a></p>
</li>
<li>
<p><a href="#BIHFGDBE">Viewing the Oracle Streams Topology and Analyzing Oracle Streams Performance</a></p>
</li>
<li>
<p><a href="#BIHJAGGJ">Using the UTL_SPADV Package</a></p>
</li>
</ul>
<a id="BIHCEACJ"></a>
<div id="STRMS850" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">About the Oracle Streams Topology<a id="sthref991"></a><a id="sthref992"></a></h2>
<p>Oracle Streams enables you to send <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s between multiple databases. An Oracle Streams environment can send the following types of messages:</p>
<ul>
<li>
<p>Logical change records (LCRs) that contain database changes</p>
</li>
<li>
<p>User messages that contain custom information based on user-defined types</p>
</li>
</ul>
<p>The <span class="bold">Oracle Streams topology</span> is a representation of the databases in an Oracle Streams environment, the Oracle Streams components configured in these databases, and the flow of messages between these components.</p>
<p>The messages in the environment flow in separate stream paths. A <span class="bold">stream path</span> begins where a <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>, a <a href="strms_glossary.htm#CBACHEDJ"><span class="xrefglossterm">synchronous capture</span></a>, or an application generates messages and enqueues them. The messages can flow through one or more <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>s and <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a>s in its stream path. The stream path ends where the messages are dequeued by an <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>, a <a href="strms_glossary.htm#CHDDGHHB"><span class="xrefglossterm">messaging client</span></a>, or an application.</p>
<p>Currently, the Oracle Streams topology only gathers information about a stream path if the stream path ends with an apply process. The Oracle Streams topology does not track stream paths that end when a messaging client or an application dequeues messages.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_capture.htm#CACGECDI">&#34;Implicit Capture with an Oracle Streams Capture Process&#34;</a></p>
</li>
<li>
<p><a href="strms_prop.htm#i1006210">&#34;Message Propagation Between Queues&#34;</a></p>
</li>
<li>
<p><a href="strms_apply.htm#BABFBJDG">&#34;Implicit Consumption with an Apply Process&#34;</a></p>
</li>
<li>
<p><a href="strms_prop.htm#BCEGBFJA">&#34;Queues&#34;</a></p>
</li>
<li>
<p><a href="strms_capture.htm#CACHGDHC">&#34;Types of Information Captured with Oracle Streams&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BIHFCHEB"></a>
<div id="STRMS851" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">About the Oracle Streams Performance Advisor<a id="sthref993"></a><a id="sthref994"></a><a id="sthref995"></a><a id="sthref996"></a><a id="sthref997"></a></h2>
<p>The Oracle Streams Performance Advisor consists of the <code dir="ltr">DBMS_STREAMS_ADVISOR_ADM</code> PL/SQL package and a collection of data dictionary views. You can use the <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure in the <code dir="ltr">DBMS_STREAMS_ADVISOR_ADM</code> package to gather information about the Oracle Streams topology and about the performance of the Oracle Streams components in the topology.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BIHJCGAF">Oracle Streams Performance Advisor Data Dictionary Views</a></p>
</li>
<li>
<p><a href="#BIHGGCJB">Oracle Streams Components and Statistics</a></p>
</li>
</ul>
<a id="BIHJCGAF"></a>
<div id="STRMS852" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Oracle Streams Performance Advisor Data Dictionary Views<a id="sthref998"></a><a id="sthref999"></a><a id="sthref1000"></a><a id="sthref1001"></a><a id="sthref1002"></a><a id="sthref1003"></a></h3>
<p>After information is gathered by the Oracle Streams Performance Advisor, you can view it by querying the following data dictionary views:</p>
<ul>
<li>
<p><a class="olink REFRN23611" href="../REFRN/GUID-6AFE5DA4-5AB5-4108-8D32-1AA96D3E9B44.htm#REFRN23611"><code dir="ltr">DBA_STREAMS_TP_COMPONENT</code></a> contains information about each Oracle Streams component at each database.</p>
</li>
<li>
<p><a class="olink REFRN23612" href="../REFRN/GUID-C79E8867-7CD2-4C94-B76C-6BA1DC8F8A9E.htm#REFRN23612"><code dir="ltr">DBA_STREAMS_TP_COMPONENT_LINK</code></a> contains information about how messages flow between Oracle Streams components.</p>
</li>
<li>
<p><a class="olink REFRN23613" href="../REFRN/GUID-C3982919-9182-496D-A8F6-AB02780AB399.htm#REFRN23613"><code dir="ltr">DBA_STREAMS_TP_COMPONENT_STAT</code></a> contains temporary performance statistics and session statistics about each Oracle Streams component.</p>
</li>
<li>
<p><a class="olink REFRN23614" href="../REFRN/GUID-8C763B51-B660-43FC-9368-32724BBFC193.htm#REFRN23614"><code dir="ltr">DBA_STREAMS_TP_DATABASE</code></a> contains information about each database that contains Oracle Streams components.</p>
</li>
<li>
<p><a class="olink REFRN23615" href="../REFRN/GUID-57F8A86C-9340-42C4-BFB9-B1919C722C9F.htm#REFRN23615"><code dir="ltr">DBA_STREAMS_TP_PATH_BOTTLENECK</code></a> contains temporary information about Oracle Streams components that might be slowing down the flow of messages in a stream path.</p>
</li>
<li>
<p><a class="olink REFRN23616" href="../REFRN/GUID-C462F934-6EE9-460B-848C-2414212067B3.htm#REFRN23616"><code dir="ltr">DBA_STREAMS_TP_PATH_STAT</code></a> contains temporary performance statistics about each stream path that exists in the Oracle Streams topology.</p>
</li>
</ul>
<p>The topology information is stored permanently in the following data dictionary views: <code dir="ltr">DBA_STREAMS_TP_DATABASE</code>, <code dir="ltr">DBA_STREAMS_TP_COMPONENT</code>, and <code dir="ltr">DBA_STREAMS_TP_COMPONENT_LINK</code>.</p>
<p>The following views contain temporary information: <a class="olink REFRN23613" href="../REFRN/GUID-C3982919-9182-496D-A8F6-AB02780AB399.htm#REFRN23613"><code dir="ltr">DBA_STREAMS_TP_COMPONENT_STAT</code></a>, <a class="olink REFRN23615" href="../REFRN/GUID-57F8A86C-9340-42C4-BFB9-B1919C722C9F.htm#REFRN23615"><code dir="ltr">DBA_STREAMS_TP_PATH_BOTTLENECK</code></a>, and <a class="olink REFRN23616" href="../REFRN/GUID-C462F934-6EE9-460B-848C-2414212067B3.htm#REFRN23616"><code dir="ltr">DBA_STREAMS_TP_PATH_STAT</code></a>. Some of the data in these views is retained only for the user session that runs the <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure. When this user session ends, this temporary information is purged.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BIHFGDBE">&#34;Viewing the Oracle Streams Topology and Analyzing Oracle Streams Performance&#34;</a></div>
</div>
<!-- class="sect2" -->
<a id="BIHGGCJB"></a>
<div id="STRMS853" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Oracle Streams Components and Statistics<a id="sthref1004"></a><a id="sthref1005"></a></h3>
<p>The <code dir="ltr">DBMS_STREAMS_ADVISOR_ADM</code> package gathers information about the following Oracle Streams components:</p>
<ul>
<li>
<p>A <code dir="ltr">QUEUE</code> stores messages. The package gathers the following component-level statistics for queues:</p>
<ul>
<li>
<p><code dir="ltr">ENQUEUE</code> <code dir="ltr">RATE</code></p>
</li>
<li>
<p><code dir="ltr">SPILL</code> <code dir="ltr">RATE</code></p>
</li>
<li>
<p><code dir="ltr">CURRENT</code> <code dir="ltr">QUEUE</code> <code dir="ltr">SIZE</code></p>
</li>
</ul>
</li>
<li>
<p>A <code dir="ltr">CAPTURE</code> is a capture process. A capture process captures database changes in the redo log and enqueues the changes as logical change records (LCRs). Each capture process has the following subcomponents:</p>
<ul>
<li>
<p><code dir="ltr">LOGMINER</code> <code dir="ltr">BUILDER</code> is a builder server.</p>
</li>
<li>
<p><code dir="ltr">LOGMINER</code> <code dir="ltr">PREPARER</code> is a preparer server.</p>
</li>
<li>
<p><code dir="ltr">LOGMINER</code> <code dir="ltr">READER</code> is a reader server.</p>
</li>
<li>
<p><code dir="ltr">CAPTURE</code> <code dir="ltr">SESSION</code> is the capture process session.</p>
</li>
</ul>
<p>The package gathers the following component-level statistics for each capture process (<code dir="ltr">CAPTURE</code>):</p>
<ul>
<li>
<p><code dir="ltr">CAPTURE</code> <code dir="ltr">RATE</code></p>
</li>
<li>
<p><code dir="ltr">ENQUEUE</code> <code dir="ltr">RATE</code></p>
</li>
<li>
<p><code dir="ltr">LATENCY</code></p>
</li>
</ul>
<p>The package also gathers session-level statistics for capture process subcomponents.</p>
</li>
<li>
<p>A <code dir="ltr">PROPAGATION</code> <code dir="ltr">SENDER</code> sends messages from a <a href="strms_glossary.htm#CHDCGACA"><span class="xrefglossterm">source queue</span></a> to a <a href="strms_glossary.htm#CHDHJHJD"><span class="xrefglossterm">destination queue</span></a>. The package gathers the following component-level statistics for propagation senders:</p>
<ul>
<li>
<p><code dir="ltr">SEND</code> <code dir="ltr">RATE</code></p>
</li>
<li>
<p><code dir="ltr">BANDWIDTH</code></p>
</li>
<li>
<p><code dir="ltr">LATENCY</code></p>
</li>
</ul>
<p>The package also gathers session-level statistics for propagation senders.</p>
</li>
<li>
<p>A <code dir="ltr">PROPAGATION</code> <code dir="ltr">RECEIVER</code> enqueues messages sent by propagation senders into a destination queue. The package gathers session-level statistics for propagation receivers.</p>
</li>
<li>
<p>An <code dir="ltr">APPLY</code> is an <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>. These components either apply messages directly or send messages to <a href="strms_glossary.htm#CHDCJAED"><span class="xrefglossterm">apply handler</span></a>s. This type of component has the following subcomponents:</p>
<ul>
<li>
<p><code dir="ltr">APPLY</code> <code dir="ltr">READER</code> is a reader server.</p>
</li>
<li>
<p><code dir="ltr">APPLY</code> <code dir="ltr">COORDINATOR</code> is a coordinator process.</p>
</li>
<li>
<p><code dir="ltr">APPLY</code> <code dir="ltr">SERVER</code> is an apply server.</p>
</li>
</ul>
<p>The package gathers the following component-level statistics for this component (<code dir="ltr">APPLY</code>):</p>
<ul>
<li>
<p><code dir="ltr">MESSAGE</code> <code dir="ltr">APPLY</code> <code dir="ltr">RATE</code></p>
</li>
<li>
<p><code dir="ltr">TRANSACTION</code> <code dir="ltr">APPLY</code> <code dir="ltr">RATE</code></p>
</li>
<li>
<p><code dir="ltr">LATENCY</code></p>
</li>
</ul>
<p>The package also gathers session-level statistics for the subcomponents.</p>
</li>
</ul>
<p>When the package gathers session-level statistics for a component or subcomponent, the session-level statistics include the following:</p>
<ul>
<li>
<p><code dir="ltr">IDLE</code> percentage</p>
</li>
<li>
<p><code dir="ltr">FLOW</code> <code dir="ltr">CONTROL</code> percentage</p>
</li>
<li>
<p><code dir="ltr">EVENT</code> percentage for wait events</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Currently, the <code dir="ltr">DBMS_STREAMS_ADVISOR_ADM</code> package does not gather information about <a href="strms_glossary.htm#CBACHEDJ"><span class="xrefglossterm">synchronous capture</span></a>s or <a href="strms_glossary.htm#CHDDGHHB"><span class="xrefglossterm">messaging client</span></a>s.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BIHGICEI">&#34;Viewing Component-Level Statistics&#34;</a> for detailed information about component-level statistics</p>
</li>
<li>
<p><a href="#BIHHCIBB">&#34;Viewing Session-Level Statistics&#34;</a> for detailed information about session-level statistics</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BIHFDBCA"></a>
<div id="STRMS854" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">About Stream Paths in an Oracle Streams Topology<a id="sthref1006"></a><a id="sthref1007"></a><a id="sthref1008"></a></h2>
<p>In the Oracle Streams topology, a stream path is a flow of messages from a source to a destination. A stream path begins where a <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>, <a href="strms_glossary.htm#CBACHEDJ"><span class="xrefglossterm">synchronous capture</span></a>, or application enqueues <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s into a <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a>. A stream path ends where an <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a> dequeues the messages. The stream path might flow through multiple queues and <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>s before it reaches an apply process. Therefore, a single stream path can consist of multiple source/destination component pairs before it reaches last component.</p>
<p>The Oracle Streams topology assigns a number to each stream path so that you can monitor each one easily. The Oracle Streams topology also assigns a number to each link between two components in a stream path. The number specifies the <span class="bold">position</span> of the link in the overall stream path.</p>
<p><a href="#BIHHEDII">Table 23-1</a> shows the position of each link in a sample stream path.</p>
<div id="STRMS855" class="tblhruleformal">
<p class="titleintable"><a id="sthref1009"></a><a id="BIHHEDII"></a>Table 23-1 Position of Each Link in a Sample Stream Path</p>
<table class="cellalignment5973" title="Position of Each Link in a Sample Stream Path" summary="The table shows the beginning component, end component, and position of each link in a sample stream path." dir="ltr">
<thead>
<tr class="cellalignment5964">
<th class="cellalignment5974" id="r1c1-t6">Start Component</th>
<th class="cellalignment5974" id="r1c2-t6">End Component</th>
<th class="cellalignment5974" id="r1c3-t6">Position</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r2c1-t6" headers="r1c1-t6">
<p>Capture process</p>
</td>
<td class="cellalignment5970" headers="r2c1-t6 r1c2-t6">
<p>Queue</p>
</td>
<td class="cellalignment5970" headers="r2c1-t6 r1c3-t6">
<p>1</p>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r3c1-t6" headers="r1c1-t6">
<p>Queue</p>
</td>
<td class="cellalignment5970" headers="r3c1-t6 r1c2-t6">
<p>Propagation sender</p>
</td>
<td class="cellalignment5970" headers="r3c1-t6 r1c3-t6">
<p>2</p>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r4c1-t6" headers="r1c1-t6">
<p>Propagation sender</p>
</td>
<td class="cellalignment5970" headers="r4c1-t6 r1c2-t6">
<p>Propagation receiver</p>
</td>
<td class="cellalignment5970" headers="r4c1-t6 r1c3-t6">
<p>3</p>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r5c1-t6" headers="r1c1-t6">
<p>Propagation receiver</p>
</td>
<td class="cellalignment5970" headers="r5c1-t6 r1c2-t6">
<p>Queue</p>
</td>
<td class="cellalignment5970" headers="r5c1-t6 r1c3-t6">
<p>4</p>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r6c1-t6" headers="r1c1-t6">
<p>Queue</p>
</td>
<td class="cellalignment5970" headers="r6c1-t6 r1c2-t6">
<p>Apply process</p>
</td>
<td class="cellalignment5970" headers="r6c1-t6 r1c3-t6">
<p>5</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" -->
<p>When the Oracle Streams Performance Advisor gathers information about an Oracle Streams environment, it tracks stream paths by starting with each apply process and working backward to its source. When a capture process is the source, the Oracle Streams Performance Advisor tracks the path from the apply process back to the capture process. When a synchronous capture or an application that enqueues messages is the source, the Oracle Streams Performance Advisor tracks the path from the apply process back to the queue into which the messages are enqueued.</p>
<p>The following sections describe sample replication environments and the stream paths in each one:</p>
<ul>
<li>
<p><a href="#BIHDACJF">Separate Stream Paths in an Oracle Streams Environment</a></p>
</li>
<li>
<p><a href="#BIHBIIIF">Shared Stream Paths in an Oracle Streams Replication Environment</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STREP150" href="../STREP/ptrep_best.htm#STREP150"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for information about best practices for Oracle Streams replication environments</div>
<a id="BIHDACJF"></a>
<div id="STRMS856" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Separate Stream Paths in an Oracle Streams Environment<a id="sthref1010"></a><a id="sthref1011"></a><a id="sthref1012"></a><a id="sthref1013"></a></h3>
<p>Consider an Oracle Streams environment with two databases. Each database captures changes made to the replicated database objects with a capture process and sends the changes to the other database, where they are applied by an apply process. The stream paths in this environment are completely separate.</p>
<p><a href="#BIHBIAAA">Figure 23-1</a> shows an example of this type of Oracle Streams replication environment.</p>
<div id="STRMS857" class="figure">
<p class="titleinfigure"><a id="BIHBIAAA"></a>Figure 23-1 Oracle Streams Topology with Two Separate Stream Paths</p>
<img width="425" height="594" src="img/strms060.gif" alt="Description of Figure 23-1 follows"/><br/>
<a id="sthref1014" href="img_text/strms060.htm">Description of &#34;Figure 23-1 Oracle Streams Topology with Two Separate Stream Paths&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>Notice that the Oracle Streams Performance Advisor assigns a component ID to each Oracle Streams component and a path ID to each path. The Oracle Streams topology in <a href="#BIHBIAAA">Figure 23-1</a> shows the following information:</p>
<ul>
<li>
<p>There are twelve Oracle Streams components in the Oracle Streams environment.</p>
</li>
<li>
<p>There are two stream paths in the Oracle Streams environment.</p>
</li>
<li>
<p>Stream path 1 starts with component 1 and ends with component 6.</p>
</li>
<li>
<p>Stream path 2 starts with component 7 and ends with component 12.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BIHBIIIF"></a>
<div id="STRMS858" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Shared Stream Paths in an Oracle Streams Replication Environment</h3>
<p>When there are multiple apply processes that apply changes generated by a single source, a stream path splits into multiple stream paths. In this case, part of a stream path is shared, but the path splits into two or more distinct stream paths.</p>
<p><a href="#BIHCJADG">Figure 23-2</a> shows this type of Oracle Streams environment.</p>
<div id="STRMS859" class="figure">
<p class="titleinfigure"><a id="BIHCJADG"></a>Figure 23-2 Oracle Streams Topology with Multiple Apply Processes for a Single Source</p>
<img width="477" height="594" src="img/strms061.gif" alt="Description of Figure 23-2 follows"/><br/>
<a id="sthref1015" href="img_text/strms061.htm">Description of &#34;Figure 23-2 Oracle Streams Topology with Multiple Apply Processes for a Single Source&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>The Oracle Streams topology in <a href="#BIHCJADG">Figure 23-2</a> shows the following information:</p>
<ul>
<li>
<p>There are ten Oracle Streams components in the Oracle Streams environment.</p>
</li>
<li>
<p>There are two stream paths in the Oracle Streams environment.</p>
</li>
<li>
<p>Stream path 1 starts with component 1 and ends with component 7.</p>
</li>
<li>
<p>Stream path 2 starts with component 1 and ends with component 10.</p>
</li>
<li>
<p>The messages flowing between component 1 and component 2 are in both path 1 and path2.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_prop.htm#i1006210">&#34;Message Propagation Between Queues&#34;</a></div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BIHCIDAF"></a>
<div id="STRMS860" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">About the Information Gathered by the Oracle Streams Performance Advisor</h2>
<p>The <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure in the <code dir="ltr">DBMS_STREAMS_ADVISOR_ADM</code> package gathers information about the Oracle Streams topology and the performance of Oracle Streams components. The procedure stores the information in a collection of data dictionary views. To use the Oracle Streams Performance Advisor effectively, it is important to understand how the procedure gathers information and calculates statistics.</p>
<p>The procedure takes snapshots of the Oracle Streams environment to gather information and calculate statistics. For some statistics, the information in a single snapshot is sufficient. For example, only one snapshot is needed to determine the current number of messages in a queue. However, to calculate other statistics, the procedure must compare two snapshots. These statistics include the rate, bandwidth, event, and flow control statistics. The first time the procedure is run in a user session, it takes two snapshots to calculate these statistics. In each subsequent run in the same user session, the procedure takes one snapshot and compares it with the snapshot taken during the previous run.</p>
<p><a href="#BIHJAJDG">Table 23-2</a> illustrates how the procedure gathers information in each advisor run in a single user session.</p>
<div id="STRMS861" class="tblhruleformal">
<p class="titleintable"><a id="sthref1016"></a><a id="BIHJAJDG"></a>Table 23-2 How the Oracle Streams Performance Advisor Gathers Information in a Session</p>
<table class="cellalignment5973" title="How the Oracle Streams Performance Advisor Gathers Information in a Session" summary="This table shows several advisor runs and the information gathered in each advisor run." dir="ltr">
<thead>
<tr class="cellalignment5964">
<th class="cellalignment5974" id="r1c1-t9">Advisor Run</th>
<th class="cellalignment5974" id="r1c2-t9">Information Gathered</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r2c1-t9" headers="r1c1-t9">
<p>1</p>
</td>
<td class="cellalignment5970" headers="r2c1-t9 r1c2-t9">
<ol>
<li>
<p>Take snapshot of statistics.</p>
</li>
<li>
<p>Wait at least five seconds.</p>
</li>
<li>
<p>Take another snapshot of statistics.</p>
</li>
<li>
<p>Compare data from the first snapshot with data from the second snapshot to calculate performance statistics.</p>
</li>
</ol>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r3c1-t9" headers="r1c1-t9">
<p>2</p>
</td>
<td class="cellalignment5970" headers="r3c1-t9 r1c2-t9">
<ol>
<li>
<p>Take snapshot of statistics.</p>
</li>
<li>
<p>Compare data from the last snapshot in advisor run 1 with the snapshot taken in advisor run 2 to calculate performance statistics.</p>
</li>
</ol>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r4c1-t9" headers="r1c1-t9">
<p>3</p>
</td>
<td class="cellalignment5970" headers="r4c1-t9 r1c2-t9">
<ol>
<li>
<p>Take snapshot of statistics.</p>
</li>
<li>
<p>Compare data from the snapshot in advisor run 2 with the snapshot taken in advisor run 3 to calculate performance statistics.</p>
</li>
</ol>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" -->
<p>For the best results in an advisor run, meet the following criteria:</p>
<ul>
<li>
<p>Ensure that as many Oracle Streams components as possible are enabled during the time period between the two snapshots used in the advisor run. Specifically, capture processes, propagations, apply processes should be enabled, queues should be started, and database links should be active.</p>
</li>
<li>
<p>If data is replicated in the Oracle Streams environment, then ensure that the replicated database objects are experiencing an average, or near average, number of changes during the time period between the two snapshots used in the advisor run. The Oracle Streams Performance Advisor gathers more accurate statistics if it is run when the Oracle Streams replication environment is experiencing typical replication activity.</p>
</li>
<li>
<p>If messages are sent by applications in the Oracle Streams environment, then ensure that the applications are sending an average, or near average, number of messages during the time period between the two snapshots used in the advisor run. The Oracle Streams Performance Advisor gathers more accurate statistics if it is run when the Oracle Streams messaging environment is sending a typical number of messages.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="BIHGBBIA"></a>
<div id="STRMS862" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Gathering Information About the Oracle Streams Topology and Performance<a id="sthref1017"></a><a id="sthref1018"></a><a id="sthref1019"></a><a id="sthref1020"></a><a id="sthref1021"></a><a id="sthref1022"></a><a id="sthref1023"></a></h2>
<p>To gather information about the Oracle Streams topology and Oracle Streams performance, complete the following steps:</p>
<ol>
<li id="BIHIEFBC">
<p>Identify the database that you will use to gather the information. An administrative user at this database must meet the following requirements:</p>
<ul>
<li>
<p>The user must have access to a database link to each database that contains Oracle Streams components.</p>
</li>
<li>
<p>The user must have been granted privileges using the <code dir="ltr">DBMS_STREAMS_AUTH.GRANT_ADMIN_PRIVILEGE</code> procedure, and each database link must connect to a user at the remote database that has been granted privileges using the <code dir="ltr">DBMS_STREAMS_AUTH.GRANT_ADMIN_PRIVILEGE</code> procedure.</p>
<p>If you configure an Oracle Streams administrator at each database with Oracle Streams components, then the Oracle Streams administrator has the necessary privileges. See <a class="olink STREP200" href="../STREP/prep_rep.htm#STREP200"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for information about creating an Oracle Streams administrator.</p>
</li>
</ul>
<p>If no database in your environment meets these requirements, then choose a database, configure the necessary database links, and grant the necessary privileges to the users before proceeding.</p>
<p>The Oracle Streams Performance Advisor running on an Oracle Database 12<span class="italic">c</span> database can monitor Oracle Database 10<span class="italic">g</span> Release 2 (10.2) and later databases. It cannot monitor databases before Oracle Database 10<span class="italic">g</span> Release 2 (10.2).</p>
</li>
<li>
<p>In SQL*Plus, connect to the database you identified in Step <a href="#BIHIEFBC">1</a> as a user that meets the requirements listed in Step <a href="#BIHIEFBC">1</a>.</p>
<p>For example, connect to the <code dir="ltr">hub.example.com</code> database as the Oracle Streams administrator.</p>
<p>See <a class="olink ADMIN00102" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li id="BIHJDBEE">
<p>Run the <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure in the <code dir="ltr">DBMS_STREAMS_ADVISOR_ADM</code> package:</p>
<pre dir="ltr">exec DBMS_STREAMS_ADVISOR_ADM.ANALYZE_CURRENT_PERFORMANCE;
</pre></li>
<li id="BIHCACCF">
<p>Optionally, rerun the <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure one or more times in same session that ran the procedure in Step <a href="#BIHJDBEE">3</a>:</p>
<pre dir="ltr">exec DBMS_STREAMS_ADVISOR_ADM.ANALYZE_CURRENT_PERFORMANCE;
</pre></li>
<li>
<p>Run the following query to identify the advisor run ID for the information gathered in Step <a href="#BIHCACCF">4</a>:</p>
<pre dir="ltr">SELECT DISTINCT ADVISOR_RUN_ID FROM DBA_STREAMS_TP_COMPONENT_STAT
   ORDER BY ADVISOR_RUN_ID;
</pre>
<p>Your output is similar to the following:</p>
<pre dir="ltr">ADVISOR_RUN_ID
--------------
             1
             2
</pre>
<p>The Oracle Streams Performance Advisor assigns an advisor run ID to the statistics for each run. Use the last value in the output for the advisor run ID in the queries in <a href="#BIHHFCFG">&#34;Viewing Performance Statistics for Oracle Streams Components&#34;</a>. In this example, use <code dir="ltr">2</code> for the advisor run ID in the queries.</p>
<p>Remember that the Oracle Streams Performance Advisor purges some of the performance statistics that it gathered when a user session ends. Therefore, run the performance statistics queries in the same session that ran the <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure.</p>
</li>
</ol>
<p>Complete these steps whenever you want to monitor the current performance of your Oracle Streams environment.</p>
<p>You should also run the <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure when new Oracle Streams components are added to any database in the Oracle Streams environment. Running the procedure updates the Oracle Streams topology with information about any new components.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ARPLS879" href="../ARPLS/d_streams_adv.htm#ARPLS879"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code dir="ltr">DBMS_STREAMS_ADVISOR_ADM</code> package</p>
</li>
<li>
<p><a href="#BIHCEACJ">&#34;About the Oracle Streams Topology&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BIHFGDBE"></a>
<div id="STRMS863" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Viewing the Oracle Streams Topology and Analyzing Oracle Streams Performance</h2>
<p>This section contains several queries that you can use to view your Oracle Streams topology and monitor the performance of your Oracle Streams components. The queries specify the views described in <a href="#BIHCEACJ">&#34;About the Oracle Streams Topology&#34;</a>.</p>
<p>The queries in this section can be run in any Oracle Stream environment. However, the output shown for these queries is based on the sample Oracle Streams replication environment shown in <a href="#BIHGHGEJ">Figure 23-3</a>.</p>
<div id="STRMS864" class="figure">
<p class="titleinfigure"><a id="BIHGHGEJ"></a>Figure 23-3 Sample Oracle Streams Replication Environment</p>
<img width="668" height="899" src="img/strms504.gif" alt="Description of Figure 23-3 follows"/><br/>
<a id="sthref1024" href="img_text/strms504.htm">Description of &#34;Figure 23-3 Sample Oracle Streams Replication Environment&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>The <a class="olink STREP604" href="../STREP/config_simple.htm#STREP604"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> contains instructions for configuring the Oracle Streams replication environment shown in <a href="#BIHGHGEJ">Figure 23-3</a>. This environment contains both of the following types of stream paths:</p>
<ul>
<li>
<p>Separate stream paths flow from the <code dir="ltr">spoke1.example.com</code> database to the <code dir="ltr">hub.example.com</code> database and from the <code dir="ltr">spoke2.example.com</code> database to the <code dir="ltr">hub.example.com</code> database. This type of stream path is described in <a href="#BIHDACJF">&#34;Separate Stream Paths in an Oracle Streams Environment&#34;</a>.</p>
</li>
<li>
<p>Two stream paths that share a portion of the path flow from the <code dir="ltr">hub.example.com</code> database to the <code dir="ltr">spoke1.example.com</code> and <code dir="ltr">spoke2.example.com</code> databases. This type of stream path is described in <a href="#BIHBIIIF">&#34;Shared Stream Paths in an Oracle Streams Replication Environment&#34;</a>.</p>
</li>
</ul>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BIHGECEJ">Viewing the Oracle Streams Topology</a></p>
</li>
<li>
<p><a href="#BIHHFCFG">Viewing Performance Statistics for Oracle Streams Components</a></p>
</li>
</ul>
<a id="BIHGECEJ"></a>
<div id="STRMS865" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Viewing the Oracle Streams Topology<a id="sthref1025"></a></h3>
<p>To view the Oracle Streams topology, you must first gather information about the Oracle Streams environment using the <code dir="ltr">DBMS_STREAMS_ADVISOR_ADM</code> package. See <a href="#BIHGBBIA">&#34;Gathering Information About the Oracle Streams Topology and Performance&#34;</a>.</p>
<p>The following sections explain how to view different types of information in an Oracle Streams topology:</p>
<ul>
<li>
<p><a href="#BIHGDCBF">Viewing the Databases in the Oracle Streams Environment</a></p>
</li>
<li>
<p><a href="#BIHJEDGH">Viewing the Oracle Streams Components at Each Database</a></p>
</li>
<li>
<p><a href="#BIHDJEDB">Viewing Each Stream Path in an Oracle Streams Topology</a></p>
</li>
</ul>
<a id="BIHGDCBF"></a>
<div id="STRMS866" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing the Databases in the Oracle Streams Environment<a id="sthref1026"></a></h4>
<p>You can view the following information about the databases in an Oracle Streams environment:</p>
<ul>
<li>
<p>The global name of each database</p>
</li>
<li>
<p>The last time the Oracle Streams Performance Advisor was run at each database</p>
</li>
<li>
<p>The version number of each database</p>
</li>
<li>
<p>The compatibility level of each database</p>
</li>
<li>
<p>Whether each database has access to the Oracle Diagnostics Pack and Oracle Tuning Pack</p>
</li>
</ul>
<p>To display this information, run the following query:</p>
<pre dir="ltr">COLUMN GLOBAL_NAME HEADING &#39;Global Name&#39; FORMAT A15
COLUMN LAST_QUERIED HEADING &#39;Last|Queried&#39;
COLUMN VERSION HEADING &#39;Version&#39; FORMAT A15
COLUMN COMPATIBILITY HEADING &#39;Compatibility&#39; FORMAT A15
COLUMN MANAGEMENT_PACK_ACCESS HEADING &#39;Management Pack&#39; FORMAT A20

SELECT GLOBAL_NAME, LAST_QUERIED, VERSION, COMPATIBILITY, MANAGEMENT_PACK_ACCESS
   FROM DBA_STREAMS_TP_DATABASE;
</pre>
<p>The following output shows the databases in the Oracle Streams replication environment described in <a href="#BIHFGDBE">&#34;Viewing the Oracle Streams Topology and Analyzing Oracle Streams Performance&#34;</a>:</p>
<pre dir="ltr">                Last                                                           
Global Name     Queried   Version         Compatibility   Management Pack       
--------------- --------- --------------- --------------- --------------------  
HUB.EXAMPLE.COM 08-APR-08 11.1.0.7.0      11.1.0          DIAGNOSTIC+TUNING     
SPOKE1.EXAMPLE. 08-APR-08 11.1.0.7.0      11.1.0          DIAGNOSTIC+TUNING     
COM
SPOKE2.EXAMPLE. 08-APR-08 11.1.0.7.0      11.1.0          DIAGNOSTIC+TUNING     
COM
</pre>
<p>This output shows the following information about the databases in the Oracle Streams environment:</p>
<ul>
<li>
<p>The <code dir="ltr">Global</code> <code dir="ltr">Name</code> column shows that the global names of the databases are <code dir="ltr">hub.example.com</code>, <code dir="ltr">spoke1.example.com</code>, and <code dir="ltr">spoke2.example.com</code>.</p>
</li>
<li>
<p>The <code dir="ltr">Last</code> <code dir="ltr">Queried</code> column shows that the Oracle Streams Performance Advisor was last run on April 8, 2008 at each database.</p>
</li>
<li>
<p>The <code dir="ltr">Version</code> column shows that version of each database is Oracle Database 11<span class="italic">g</span> Release 1 (11.1.0.7.0).</p>
</li>
<li>
<p>The <code dir="ltr">Compatibility</code> column shows that the compatibility level of each database is <code dir="ltr">11.1.0</code>.</p>
</li>
<li>
<p>The <code dir="ltr">Management</code> <code dir="ltr">Pack</code> column shows that each database has access to the Oracle Diagnostics Pack and Oracle Tuning Pack.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink UPGRD005" href="../UPGRD/intro.htm#UPGRD005"><span class="italic">Oracle Database Upgrade Guide</span></a> for information about database compatibility</div>
</div>
<!-- class="sect3" -->
<a id="BIHJEDGH"></a>
<div id="STRMS867" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing the Oracle Streams Components at Each Database<a id="sthref1027"></a></h4>
<p>You can view the following information about the components in an Oracle Streams environment:</p>
<ul>
<li>
<p>The component ID for each Oracle Streams component. The Oracle Streams topology assigns an ID number to each component and uses the number to track information about the component and about the stream path that flows through the component.</p>
</li>
<li>
<p>The name of the Oracle Streams component. For <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>es and <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>es, the query lists the name of each process. For <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a>s, the query lists the name of each queue. For <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>s, two Oracle Streams components are tracked in the Oracle Streams topology:</p>
<ul>
<li>
<p>The name of a propagation sender is the <a href="strms_glossary.htm#CHDCGACA"><span class="xrefglossterm">source queue</span></a> of the propagation and the <a href="strms_glossary.htm#CHDHJHJD"><span class="xrefglossterm">destination queue</span></a> and database to which the propagation sends messages. For example, a propagation sender with the <code dir="ltr">strmadmin.source_hns</code> source queue that sends messages to the <code dir="ltr">strmadmin.destination_spoke1</code> destination queue at the <code dir="ltr">spoke1.example.com</code> database is shown in the following way:</p>
<pre dir="ltr">&#34;STRMADMIN&#34;.&#34;SOURCE_HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;DESTINATION_SPOKE1&#34;
   @SPOKE1.EXAMPLE.COM
</pre></li>
<li>
<p>The name of a propagation receiver is the source queue and database from which the messages are sent and the destination queue for the propagation. For example, a propagation receiver that gets messages from the <code dir="ltr">strmadmin.source_hns</code> source queue at the <code dir="ltr">hub.example.com</code> database and enqueues them into the <code dir="ltr">strmadmin.destination_spoke1</code> destination queue is shown in the following way:</p>
<pre dir="ltr">&#34;STRMADMIN&#34;.&#34;SOURCE_HNS&#34;@HUB.EXAMPLE.COM=&gt;&#34;STRMADMIN&#34;.
   &#34;DESTINATION_SPOKE1&#34;
</pre></li>
</ul>
</li>
<li>
<p>The type of the Oracle Streams component. The following types are possible:</p>
<ul>
<li>
<p><code dir="ltr">CAPTURE</code> for capture processes</p>
</li>
<li>
<p><code dir="ltr">QUEUE</code> for queues</p>
</li>
<li>
<p><code dir="ltr">PROPAGATION</code> <code dir="ltr">SENDER</code> for propagation senders</p>
</li>
<li>
<p><code dir="ltr">PROPAGATION</code> <code dir="ltr">RECEIVER</code> for propagation receivers</p>
</li>
<li>
<p><code dir="ltr">APPLY</code> for apply processes</p>
</li>
</ul>
</li>
<li>
<p>The database that contains the component</p>
</li>
</ul>
<p>To display this information, run the following query:</p>
<pre dir="ltr">COLUMN COMPONENT_ID HEADING &#39;ID&#39; FORMAT 999
COLUMN COMPONENT_NAME HEADING &#39;Name&#39; FORMAT A43
COLUMN COMPONENT_TYPE HEADING &#39;Type&#39; FORMAT A20
COLUMN COMPONENT_DB HEADING &#39;Database&#39; FORMAT A10

SELECT COMPONENT_ID, COMPONENT_NAME, COMPONENT_TYPE, COMPONENT_DB
   FROM DBA_STREAMS_TP_COMPONENT
   ORDER BY COMPONENT_ID;
</pre>
<p>The following output shows the components in the Oracle Streams replication environment described in <a href="#BIHFGDBE">&#34;Viewing the Oracle Streams Topology and Analyzing Oracle Streams Performance&#34;</a>:</p>
<pre dir="ltr">  ID Name                                        Type                 Database 
---- ------------------------------------------- -------------------- ----------
   1 &#34;STRMADMIN&#34;.&#34;DESTINATION_SPOKE1&#34;            QUEUE                HUB.EXAMPL
                                                                      E.COM
   2 &#34;STRMADMIN&#34;.&#34;DESTINATION_SPOKE2&#34;            QUEUE                HUB.EXAMPL
                                                                      E.COM
   3 &#34;STRMADMIN&#34;.&#34;SOURCE_HNS&#34;                    QUEUE                HUB.EXAMPL
                                                                      E.COM
   4 &#34;STRMADMIN&#34;.&#34;SOURCE_HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;DEST PROPAGATION SENDER   HUB.EXAMPL
     INATION_SPOKE1&#34;@SPOKE1.EXAMPLE.COM                               E.COM
   5 &#34;STRMADMIN&#34;.&#34;SOURCE_HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;DEST PROPAGATION SENDER   HUB.EXAMPL
     INATION_SPOKE2&#34;@SPOKE2.EXAMPLE.COM                               E.COM
   6 &#34;STRMADMIN&#34;.&#34;SOURCE_HNS&#34;@SPOKE1.EXAMPLE.COM PROPAGATION RECEIVER HUB.EXAMPL
     =&gt;&#34;STRMADMIN&#34;.&#34;DESTINATION_SPOKE1&#34;                               E.COM
   7 &#34;STRMADMIN&#34;.&#34;SOURCE_HNS&#34;@SPOKE2.EXAMPLE.COM PROPAGATION RECEIVER HUB.EXAMPL
     =&gt;&#34;STRMADMIN&#34;.&#34;DESTINATION_SPOKE2&#34;                               E.COM
   8 APPLY_SPOKE1                                APPLY                HUB.EXAMPL
                                                                      E.COM
   9 APPLY_SPOKE2                                APPLY                HUB.EXAMPL
                                                                      E.COM
  10 CAPTURE_HNS                                 CAPTURE              HUB.EXAMPL
                                                                      E.COM
  11 &#34;STRMADMIN&#34;.&#34;DESTINATION_SPOKE1&#34;            QUEUE                SPOKE1.EXA
                                                                      MPLE.COM
  12 &#34;STRMADMIN&#34;.&#34;SOURCE_HNS&#34;                    QUEUE                SPOKE1.EXA
                                                                      MPLE.COM
  13 &#34;STRMADMIN&#34;.&#34;SOURCE_HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;DEST PROPAGATION SENDER   SPOKE1.EXA
     INATION_SPOKE1&#34;@HUB.EXAMPLE.COM                                  MPLE.COM  
  14 &#34;STRMADMIN&#34;.&#34;SOURCE_HNS&#34;@HUB.EXAMPLE.COM=&gt;&#34; PROPAGATION RECEIVER SPOKE1.EXA
     STRMADMIN&#34;.&#34;DESTINATION_SPOKE1&#34;                                  MPLE.COM
  15 APPLY_SPOKE1                                APPLY                SPOKE1.EXA
                                                                      MPLE.COM
  16 CAPTURE_HNS                                 CAPTURE              SPOKE1.EXA
                                                                      MPLE.COM
  17 &#34;STRMADMIN&#34;.&#34;DESTINATION_SPOKE2&#34;            QUEUE                SPOKE2.EXA
                                                                      MPLE.COM
  18 &#34;STRMADMIN&#34;.&#34;SOURCE_HNS&#34;                    QUEUE                SPOKE2.EXA
                                                                      MPLE.COM
  19 &#34;STRMADMIN&#34;.&#34;SOURCE_HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;DEST PROPAGATION SENDER   SPOKE2.EXA
     INATION_SPOKE2&#34;@HUB.EXAMPLE.COM                                  MPLE.COM  
  20 &#34;STRMADMIN&#34;.&#34;SOURCE_HNS&#34;@HUB.EXAMPLE.COM=&gt;&#34; PROPAGATION RECEIVER SPOKE2.EXA
     STRMADMIN&#34;.&#34;DESTINATION_SPOKE2&#34;                                  MPLE.COM  
  21 APPLY_SPOKE2                                APPLY                SPOKE2.EXA
                                                                      MPLE.COM
  22 CAPTURE_HNS                                 CAPTURE              SPOKE2.EXA
                                                                      MPLE.COM
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BIHCEACJ">&#34;About the Oracle Streams Topology&#34;</a></p>
</li>
<li>
<p><a href="#BIHGICEI">&#34;Viewing Component-Level Statistics&#34;</a> for a query that shows performance statistics for each Oracle Streams component</p>
</li>
<li>
<p><a class="olink STREX004" href="../STREX/repmultdemo.htm#STREX004"><span class="italic">Oracle Streams Extended Examples</span></a> for information about the n-way replication environment shown in the output</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="BIHDJEDB"></a>
<div id="STRMS868" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Each Stream Path in an Oracle Streams Topology<a id="sthref1028"></a><a id="sthref1029"></a></h4>
<p>You can view the following information about the stream paths in an Oracle Streams topology:</p>
<ul>
<li>
<p>The path ID. The Oracle Streams topology assigns an ID number to each stream path it identifies. The path ID is associated with each link in the path. For example, a single path ID can be associated with the following component links:</p>
<ul>
<li>
<p>Capture process to queue</p>
</li>
<li>
<p>Queue to propagation sender</p>
</li>
<li>
<p>Propagation sender to propagation receiver</p>
</li>
<li>
<p>Propagation receiver to queue</p>
</li>
<li>
<p>Queue to apply process</p>
</li>
</ul>
</li>
<li>
<p>The source component ID. A source component is a component from which messages flow to another component.</p>
</li>
<li>
<p>The name of the source component. See <a href="#BIHJEDGH">&#34;Viewing the Oracle Streams Components at Each Database&#34;</a> for information about how components are named in the query output.</p>
</li>
<li>
<p>The destination component ID. A destination component receives messages from another component.</p>
</li>
<li>
<p>The name of the destination component.</p>
</li>
<li>
<p>The position in the stream path shows the location of a particular link in a path. For example, a position might be the first link in a path, the second link in a path, and so on.</p>
</li>
</ul>
<p>To display this information, run the following query:</p>
<pre dir="ltr">COLUMN PATH_ID HEADING &#39;Path|ID&#39; FORMAT 9999
COLUMN SOURCE_COMPONENT_ID HEADING &#39;Source|Component|ID&#39; FORMAT 9999
COLUMN SOURCE_COMPONENT_NAME HEADING &#39;Source|Component|Name&#39; FORMAT A20
COLUMN DESTINATION_COMPONENT_ID HEADING &#39;Dest|Component|ID&#39; FORMAT 9999
COLUMN DESTINATION_COMPONENT_NAME HEADING &#39;Dest|Component|Name&#39; FORMAT A15
COLUMN POSITION HEADING &#39;Position&#39; FORMAT 9999
 
SELECT PATH_ID, 
       SOURCE_COMPONENT_ID, 
       SOURCE_COMPONENT_NAME,
       DESTINATION_COMPONENT_ID, 
       DESTINATION_COMPONENT_NAME,
       POSITION 
  FROM DBA_STREAMS_TP_COMPONENT_LINK
  ORDER BY PATH_ID, POSITION;
</pre>
<p>The following output shows the paths in the Oracle Streams topology for the components listed in <a href="#BIHJEDGH">&#34;Viewing the Oracle Streams Components at Each Database&#34;</a>:</p>
<pre dir="ltr">         Source Source                    Dest Dest                            
 Path Component Component            Component Component                        
   ID        ID Name                        ID Name            Position         
----- --------- -------------------- --------- --------------- --------         
    1        16 CAPTURE_HNS                 12 &#34;STRMADMIN&#34;.&#34;SO        1         
                                               URCE_HNS&#34;                        
    1        12 &#34;STRMADMIN&#34;.&#34;SOURCE_        13 &#34;STRMADMIN&#34;.&#34;SO        2         
                HNS&#34;                           URCE_HNS&#34;=&gt;&#34;STR                  
                                               MADMIN&#34;.&#34;DESTIN                  
                                               ATION_SPOKE1&#34;@H                  
                                               UB.EXAMPLE.COM                   
    1        13 &#34;STRMADMIN&#34;.&#34;SOURCE_         6 &#34;STRMADMIN&#34;.&#34;SO        3         
                HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D           URCE_HNS&#34;@SPOKE                  
                ESTINATION_SPOKE1&#34;@H           1.EXAMPLE.COM=&gt;                  
                UB.EXAMPLE.COM                 &#34;STRMADMIN&#34;.&#34;DES                 
                                               TINATION_SPOKE1&#34;                 
    1         6 &#34;STRMADMIN&#34;.&#34;SOURCE_         1 &#34;STRMADMIN&#34;.&#34;DE        4         
                HNS&#34;@SPOKE1.EXAMPLE.           STINATION_SPOKE                  
                COM=&gt;&#34;STRMADMIN&#34;.&#34;DE           1&#34;                               
                STINATION_SPOKE1&#34;                                               
    1         1 &#34;STRMADMIN&#34;.&#34;DESTINA         8 APPLY_SPOKE1           5         
                TION_SPOKE1&#34;                                                    
    2        22 CAPTURE_HNS                 18 &#34;STRMADMIN&#34;.&#34;SO        1         
                                               URCE_HNS&#34;                        
    2        18 &#34;STRMADMIN&#34;.&#34;SOURCE_        19 &#34;STRMADMIN&#34;.&#34;SO        2         
                HNS&#34;                           URCE_HNS&#34;=&gt;&#34;STR                  
                                               MADMIN&#34;.&#34;DESTIN                  
                                               ATION_SPOKE2&#34;@H                  
                                               UB.EXAMPLE.COM                   
    2        19 &#34;STRMADMIN&#34;.&#34;SOURCE_         7 &#34;STRMADMIN&#34;.&#34;SO        3         
                HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D           URCE_HNS&#34;@SPOKE                  
                ESTINATION_SPOKE2&#34;@H           2.EXAMPLE.COM=&gt;                  
                UB.EXAMPLE.COM                 &#34;STRMADMIN&#34;.&#34;DES                 
                                               TINATION_SPOKE2&#34;                 
    2         7 &#34;STRMADMIN&#34;.&#34;SOURCE_         2 &#34;STRMADMIN&#34;.&#34;DE        4         
                HNS&#34;@SPOKE2.EXAMPLE.           STINATION_SPOKE                  
                COM=&gt;&#34;STRMADMIN&#34;.&#34;DE           2&#34;                               
                STINATION_SPOKE2&#34;                                               
    2         2 &#34;STRMADMIN&#34;.&#34;DESTINA         9 APPLY_SPOKE2           5         
                TION_SPOKE2&#34;                                                    
    3        10 CAPTURE_HNS                  3 &#34;STRMADMIN&#34;.&#34;SO        1         
                                               URCE_HNS&#34;                        
    3         3 &#34;STRMADMIN&#34;.&#34;SOURCE_         4 &#34;STRMADMIN&#34;.&#34;SO        2         
                HNS&#34;                           URCE_HNS&#34;=&gt;&#34;STR                  
                                               MADMIN&#34;.&#34;DESTIN                  
                                               ATION_SPOKE1&#34;@S                  
                                               POKE1.EXAMPLE.CO                 
                                               M                                
    3         4 &#34;STRMADMIN&#34;.&#34;SOURCE_        14 &#34;STRMADMIN&#34;.&#34;SO        3         
                HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D           URCE_HNS&#34;@HUB.N                  
                ESTINATION_SPOKE1&#34;@S           ET=&gt;&#34;STRMADMIN&#34;                  
                POKE1.EXAMPLE.COM              .&#34;DESTINATION_S                  
                                               POKE1&#34;                           
    3        14 &#34;STRMADMIN&#34;.&#34;SOURCE_        11 &#34;STRMADMIN&#34;.&#34;DE        4         
                HNS&#34;@HUB.EXAMPLE.COM           STINATION_SPOKE                  
                =&gt;&#34;STRMADMIN&#34;.&#34;DESTI           1&#34;                               
                NATION_SPOKE1&#34;                                                  
    3        11 &#34;STRMADMIN&#34;.&#34;DESTINA        15 APPLY_SPOKE1           5         
                TION_SPOKE1&#34;                                                    
    4        10 CAPTURE_HNS                  3 &#34;STRMADMIN&#34;.&#34;SO        1         
                                               URCE_HNS&#34;                        
    4         3 &#34;STRMADMIN&#34;.&#34;SOURCE_         5 &#34;STRMADMIN&#34;.&#34;SO        2         
                HNS&#34;                           URCE_HNS&#34;=&gt;&#34;STR                  
                                               MADMIN&#34;.&#34;DESTIN                  
                                               ATION_SPOKE2&#34;@S                  
                                               POKE2.EXAMPLE.C                  
                                               OM                               
    4         5 &#34;STRMADMIN&#34;.&#34;SOURCE_        20 &#34;STRMADMIN&#34;.&#34;SO        3         
                HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D           URCE_HNS&#34;@HUB.N                  
                ESTINATION_SPOKE2&#34;@S           ET=&gt;&#34;STRMADMIN&#34;                  
                POKE2.EXAMPLE.COM              .&#34;DESTINATION_S                  
                                               POKE2&#34;                           
    4        20 &#34;STRMADMIN&#34;.&#34;SOURCE_        17 &#34;STRMADMIN&#34;.&#34;DE        4         
                HNS&#34;@HUB.EXAMPLE.COM           STINATION_SPOKE                  
                =&gt;&#34;STRMADMIN&#34;.&#34;DESTI           2&#34;                               
                NATION_SPOKE2&#34;                                                  
    4        17 &#34;STRMADMIN&#34;.&#34;DESTINA        21 APPLY_SPOKE2           5         
                TION_SPOKE2&#34;                                                    
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BIHFDBCA">&#34;About Stream Paths in an Oracle Streams Topology&#34;</a></p>
</li>
<li>
<p><a href="#BIHBAAGI">&#34;Viewing Statistics for the Stream Paths in an Oracle Streams Environment&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BIHHFCFG"></a>
<div id="STRMS869" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Viewing Performance Statistics for Oracle Streams Components<a id="sthref1030"></a><a id="sthref1031"></a></h3>
<p>The <code dir="ltr">DBMS_STREAMS_ADVISOR_ADM</code> package and the Oracle Streams topology views comprise the Oracle Streams Performance Advisor. The Oracle Streams topology views enable you to display and analyze performance statistics for the Oracle Streams components in your environment.</p>
<p>To view performance statistics for Oracle Streams components, you must first gather information about the Oracle Streams environment using the <code dir="ltr">DBMS_STREAMS_ADVISOR_ADM</code> package. See <a href="#BIHGBBIA">&#34;Gathering Information About the Oracle Streams Topology and Performance&#34;</a>.</p>
<p>The following sections explain how to view performance statistics for Oracle Streams components:</p>
<ul>
<li>
<p><a href="#BIHEJAIE">Checking for Bottleneck Components in the Oracle Streams Topology</a></p>
</li>
<li>
<p><a href="#BIHGICEI">Viewing Component-Level Statistics</a></p>
</li>
<li>
<p><a href="#BIHHCIBB">Viewing Session-Level Statistics</a></p>
</li>
<li>
<p><a href="#BIHBAAGI">Viewing Statistics for the Stream Paths in an Oracle Streams Environment</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
The performance of Oracle Streams components depends on several factors, including the computer equipment used in the environment and the speed of the network.</div>
<a id="BIHEJAIE"></a>
<div id="STRMS870" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Checking for Bottleneck Components in the Oracle Streams Topology<a id="sthref1032"></a><a id="sthref1033"></a></h4>
<p>A bottleneck component is the busiest component or the component with the least amount of idle time. You can view the following information about the bottleneck components in an Oracle Streams environment:</p>
<ul>
<li>
<p>The path ID of the path that includes the component.</p>
</li>
<li>
<p>The component ID for each Oracle Streams component. The Oracle Streams topology assigns an ID number to each component and uses the number to track information about the component and about the stream path that flows through the component.</p>
</li>
<li>
<p>The name of the Oracle Streams component. See <a href="#BIHJEDGH">&#34;Viewing the Oracle Streams Components at Each Database&#34;</a> for information about how components are named in the query output.</p>
</li>
<li>
<p>The type of the Oracle Streams component. The following types are possible:</p>
<ul>
<li>
<p><code dir="ltr">CAPTURE</code> for <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>es</p>
</li>
<li>
<p><code dir="ltr">QUEUE</code> for <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a>s</p>
</li>
<li>
<p><code dir="ltr">PROPAGATION</code> <code dir="ltr">SENDER</code> for <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a> senders</p>
</li>
<li>
<p><code dir="ltr">PROPAGATION</code> <code dir="ltr">RECEIVER</code> for propagation receivers</p>
</li>
<li>
<p><code dir="ltr">APPLY</code> for <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>es</p>
</li>
</ul>
</li>
<li>
<p>The database that contains the component</p>
</li>
</ul>
<p>Run the following query to check for bottleneck components in your Oracle Streams environment:</p>
<pre dir="ltr">COLUMN PATH_ID HEADING &#39;Path ID&#39; FORMAT 999
COLUMN COMPONENT_ID HEADING &#39;Component ID&#39; FORMAT 999
COLUMN COMPONENT_NAME HEADING &#39;Name&#39; FORMAT A20
COLUMN COMPONENT_TYPE HEADING &#39;Type&#39; FORMAT A20
COLUMN COMPONENT_DB HEADING &#39;Database&#39; FORMAT A15
 
SELECT PATH_ID,
       COMPONENT_ID, 
       COMPONENT_NAME, 
       COMPONENT_TYPE, 
       COMPONENT_DB
   FROM DBA_STREAMS_TP_PATH_BOTTLENECK
   WHERE BOTTLENECK_IDENTIFIED=&#39;YES&#39; AND
         ADVISOR_RUN_ID=2
   ORDER BY PATH_ID, COMPONENT_ID;
</pre>
<p>This example uses <code dir="ltr">2</code> for the <code dir="ltr">ADVISOR_RUN_ID</code> in the <code dir="ltr">WHERE</code> clause. Substitute the advisor run ID for the advisor run you want to query. See <a href="#BIHGBBIA">&#34;Gathering Information About the Oracle Streams Topology and Performance&#34;</a> for information about determining the <code dir="ltr">ADVISOR_RUN_ID</code>.</p>
<p>The following output shows the bottleneck components for the components listed in <a href="#BIHJEDGH">&#34;Viewing the Oracle Streams Components at Each Database&#34;</a>:</p>
<pre dir="ltr">Path ID Component ID Name                 Type                 Database        
------- ------------ -------------------- -------------------- ---------------  
      1            6 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATION RECEIVER HUB.EXAMPLE.COM  
                     HNS&#34;@SPOKE1.EXAMPLE.                                       
                     COM=&gt;&#34;STRMADMIN&#34;.&#34;DE                                       
                     STINATION_SPOKE1&#34;                                          
      3           10 CAPTURE_HNS          CAPTURE              HUB.EXAMPLE.COM  
      4           10 CAPTURE_HNS          CAPTURE              HUB.EXAMPLE.COM  
</pre>
<p>If this query returns no results, then the Oracle Streams Performance Advisor did not identify any bottleneck components in your environment. However, if this query returns one or more bottleneck components, then check the status of these components. If they are disabled, then you can enable them. If the components are enabled, then you can examine the components to see if they can be modified to perform better.</p>
<p>In some cases, the Oracle Streams Performance Advisor cannot determine whether a component is a bottleneck component. To view these components, set <code dir="ltr">BOTTLENECK_IDENTIFIED</code> to <code dir="ltr">&#39;NO&#39;</code> when you query the <code dir="ltr">DBA_STREAMS_TP_PATH_BOTTLENECK</code> view. The output for the <code dir="ltr">ADVISOR_RUN_REASON</code> column shows why the Oracle Streams Performance Advisor could not determine whether the component is a bottleneck component. The following reasons can be specified in the <code dir="ltr">ADVISOR_RUN_REASON</code> column output:</p>
<ul>
<li>
<p><code dir="ltr">PRE-11.1</code> <code dir="ltr">DATABASE</code> <code dir="ltr">EXISTS</code> means that the component is in a stream path that includes a database before Oracle Database 11<span class="italic">g</span> Release 1. Bottleneck analysis is not performed on these components.</p>
</li>
<li>
<p><code dir="ltr">DIAGNOSTIC</code> <code dir="ltr">PACK</code> <code dir="ltr">REQUIRED</code> means that the component is in a stream path that includes a database that does not have the Oracle Diagnostics Pack. Bottleneck analysis is not performed on these components.</p>
</li>
<li>
<p><code dir="ltr">NO</code> <code dir="ltr">BOTTLENECK</code> <code dir="ltr">IDENTIFIED</code> means that either no bottleneck was identified in a stream path or that there might be more than one bottleneck component in the stream path.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_trouble.htm#g1021339">Chapter 30, &#34;Identifying Problems in an Oracle Streams Environment&#34;</a></div>
</div>
<!-- class="sect3" -->
<a id="BIHGICEI"></a>
<div id="STRMS871" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Component-Level Statistics<a id="sthref1034"></a><a id="sthref1035"></a><a id="sthref1036"></a><a id="sthref1037"></a></h4>
<p>You can view statistics for the Oracle Streams components in the Oracle Streams topology. The query in this section displays the following information for each component:</p>
<ul>
<li>
<p>The ID of the path to which the component belongs</p>
</li>
<li>
<p>The name of the Oracle Streams component</p>
</li>
<li>
<p>The type of the Oracle Streams component. The following types are possible:</p>
<ul>
<li>
<p><code dir="ltr">CAPTURE</code> for <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>es</p>
</li>
<li>
<p><code dir="ltr">QUEUE</code> for <a href="strms_glossary.htm#CHDIDCDI"><span class="xrefglossterm">queue</span></a>s</p>
</li>
<li>
<p><code dir="ltr">PROPAGATION</code> <code dir="ltr">SENDER</code> for <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a> senders</p>
</li>
<li>
<p><code dir="ltr">PROPAGATION</code> <code dir="ltr">RECEIVER</code> for propagation receivers</p>
</li>
<li>
<p><code dir="ltr">APPLY</code> for <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>es</p>
</li>
</ul>
</li>
<li>
<p>The statistic that was gathered for the component</p>
</li>
<li>
<p>The value and unit of the statistic. For example, a <code dir="ltr">LATENCY</code> statistic shows a number for the value and <code dir="ltr">SECONDS</code> for the unit. A <code dir="ltr">TRANSACTION</code> <code dir="ltr">APPLY</code> <code dir="ltr">RATE</code> statistic shows a number for the value and <code dir="ltr">TRANSACTIONS</code> <code dir="ltr">PER</code> <code dir="ltr">SECOND</code> for the unit.</p>
</li>
</ul>
<p>The <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure in the <code dir="ltr">DBMS_STREAMS_ADVISOR_ADM</code> package gathers the statistics returned by the query in this section. Therefore, the statistics returned by the query were the current statistics when the procedure was run. The statistics are not updated automatically.</p>
<p><a href="#BIHGAGDG">Table 23-3</a> describes each of the statistics that can be returned by the query in this section:</p>
<div id="STRMS872" class="tblhruleformalwide">
<p class="titleintable"><a id="sthref1038"></a><a id="BIHGAGDG"></a>Table 23-3 Component-Level Statistics for Oracle Streams Components</p>
<table class="cellalignment5973" title="Component-Level Statistics for Oracle Streams Components" summary="This table provides information about component-level statistics for Oracle Streams components, including for each statistic the type of component, the statistic, the unit, and a description." dir="ltr">
<thead>
<tr class="cellalignment5964">
<th class="cellalignment5974" id="r1c1-t16">Component Type</th>
<th class="cellalignment5974" id="r1c2-t16">Statistic</th>
<th class="cellalignment5974" id="r1c3-t16">Unit</th>
<th class="cellalignment5974" id="r1c4-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r2c1-t16" headers="r1c1-t16">
<p><code dir="ltr">CAPTURE</code></p>
</td>
<td class="cellalignment5970" headers="r2c1-t16 r1c2-t16">
<p><code dir="ltr">CAPTURE</code> <code dir="ltr">RATE</code></p>
</td>
<td class="cellalignment5970" headers="r2c1-t16 r1c3-t16">
<p><code dir="ltr">MESSAGES</code> <code dir="ltr">PER</code> <code dir="ltr">SECOND</code></p>
</td>
<td class="cellalignment5970" headers="r2c1-t16 r1c4-t16">
<p>The average number of database changes in the redo log scanned by the capture process each second.</p>
<p>A capture process captures and enqueues the scanned changes that satisfy its <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>s.</p>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r3c1-t16" headers="r1c1-t16">
<p><code dir="ltr">CAPTURE</code></p>
</td>
<td class="cellalignment5970" headers="r3c1-t16 r1c2-t16">
<p><code dir="ltr">ENQUEUE</code> <code dir="ltr">RATE</code></p>
</td>
<td class="cellalignment5970" headers="r3c1-t16 r1c3-t16">
<p><code dir="ltr">MESSAGES</code> <code dir="ltr">PER</code> <code dir="ltr">SECOND</code></p>
</td>
<td class="cellalignment5970" headers="r3c1-t16 r1c4-t16">
<p>The average number of logical change records (<a href="strms_glossary.htm#CHDJDFAD"><span class="xrefglossterm">LCR</span></a>s) enqueued by the capture process each second.</p>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r4c1-t16" headers="r1c1-t16">
<p><code dir="ltr">CAPTURE</code></p>
</td>
<td class="cellalignment5970" headers="r4c1-t16 r1c2-t16">
<p><code dir="ltr">LATENCY</code></p>
</td>
<td class="cellalignment5970" headers="r4c1-t16 r1c3-t16">
<p><code dir="ltr">SECONDS</code></p>
</td>
<td class="cellalignment5970" headers="r4c1-t16 r1c4-t16">
<p>The amount of time between when the last redo entry became available for the capture process and the time when the last redo entry scanned by the capture process was recorded in the redo log.</p>
<p>The purpose of the statistic is to show the amount of time between when a change is recorded in the redo log and when the redo record is scanned by the capture process.</p>
<p>The capture process might or might not enqueue a scanned change. A capture process only enqueues a change if the change satisfies its rule sets.</p>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r5c1-t16" headers="r1c1-t16">
<p><code dir="ltr">PROPAGATION</code> <code dir="ltr">SENDER</code></p>
</td>
<td class="cellalignment5970" headers="r5c1-t16 r1c2-t16">
<p><code dir="ltr">SEND</code> <code dir="ltr">RATE</code></p>
</td>
<td class="cellalignment5970" headers="r5c1-t16 r1c3-t16">
<p><code dir="ltr">MESSAGES</code> <code dir="ltr">PER</code> <code dir="ltr">SECOND</code></p>
</td>
<td class="cellalignment5970" headers="r5c1-t16 r1c4-t16">
<p>The average number of <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a>s sent each second by the propagation sender.</p>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r6c1-t16" headers="r1c1-t16">
<p><code dir="ltr">PROPAGATION</code> <code dir="ltr">SENDER</code></p>
</td>
<td class="cellalignment5970" headers="r6c1-t16 r1c2-t16">
<p><code dir="ltr">BANDWIDTH</code></p>
</td>
<td class="cellalignment5970" headers="r6c1-t16 r1c3-t16">
<p><code dir="ltr">BYTES</code> <code dir="ltr">PER</code> <code dir="ltr">SECOND</code></p>
</td>
<td class="cellalignment5970" headers="r6c1-t16 r1c4-t16">
<p>The average number of bytes sent each second by the propagation sender.</p>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r7c1-t16" headers="r1c1-t16">
<p><code dir="ltr">PROPAGATION</code> <code dir="ltr">SENDER</code></p>
</td>
<td class="cellalignment5970" headers="r7c1-t16 r1c2-t16">
<p><code dir="ltr">LATENCY</code></p>
</td>
<td class="cellalignment5970" headers="r7c1-t16 r1c3-t16">
<p><code dir="ltr">SECONDS</code></p>
</td>
<td class="cellalignment5970" headers="r7c1-t16 r1c4-t16">
<p>The amount of time between when a message was created at the source database and when the message was sent to the <a href="strms_glossary.htm#CHDHJHJD"><span class="xrefglossterm">destination queue</span></a> by the propagation sender.</p>
<p>The value shown is for a single message that was sent from the source queue to the destination queue by the propagation sender. This message was the last message sent by the propagation sender when the <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure was run.</p>
<p>Depending on the type of message sent by the propagation, message creation time is one of the following:</p>
<ul>
<li>
<p>For <a href="strms_glossary.htm#CHDCHEJI"><span class="xrefglossterm">captured LCR</span></a>s, the time when the redo entry for the database change was recorded</p>
</li>
<li>
<p>For <a href="strms_glossary.htm#CBAGDEIH"><span class="xrefglossterm">persistent LCR</span></a>s, the time when the LCR was constructed</p>
</li>
<li>
<p>For <a href="strms_glossary.htm#CBAGGIDA"><span class="xrefglossterm">persistent user message</span></a>s, the time when the message was enqueued</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r8c1-t16" headers="r1c1-t16">
<p><code dir="ltr">APPLY</code></p>
</td>
<td class="cellalignment5970" headers="r8c1-t16 r1c2-t16">
<p><code dir="ltr">MESSAGE</code> <code dir="ltr">APPLY</code> <code dir="ltr">RATE</code></p>
</td>
<td class="cellalignment5970" headers="r8c1-t16 r1c3-t16">
<p><code dir="ltr">MESSAGES</code> <code dir="ltr">PER</code> <code dir="ltr">SECOND</code></p>
</td>
<td class="cellalignment5970" headers="r8c1-t16 r1c4-t16">
<p>The average number of messages applied each second by the apply process.</p>
<p>A captured LCR or persistent LCR can be applied in one of the following ways:</p>
<ul>
<li>
<p>The apply process makes the change encapsulated in the LCR to a database object.</p>
</li>
<li>
<p>The apply process passes the LCR to an <a href="strms_glossary.htm#CHDCJAED"><span class="xrefglossterm">apply handler</span></a>.</p>
</li>
<li>
<p>If the LCR raises an error, then the apply process sends the LCR to the error queue.</p>
</li>
</ul>
<p>A persistent user message can be applied in one of the following ways:</p>
<ul>
<li>
<p>The apply process sends the message to a <a href="strms_glossary.htm#CHDDHDEH"><span class="xrefglossterm">message handler</span></a>.</p>
</li>
<li>
<p>If the LCR raises an error, then the apply process sends the message to the error queue.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r9c1-t16" headers="r1c1-t16">
<p><code dir="ltr">APPLY</code></p>
</td>
<td class="cellalignment5970" headers="r9c1-t16 r1c2-t16">
<p><code dir="ltr">TRANSACTION</code> <code dir="ltr">APPLY</code> <code dir="ltr">RATE</code></p>
</td>
<td class="cellalignment5970" headers="r9c1-t16 r1c3-t16">
<p><code dir="ltr">TRANSACTIONS</code> <code dir="ltr">PER</code> <code dir="ltr">SECOND</code></p>
</td>
<td class="cellalignment5970" headers="r9c1-t16 r1c4-t16">
<p>The average number of transactions applied by the apply process each second. Transactions typically include multiple messages.</p>
<p>A transaction that includes captured LCRs or persistent LCRs can be applied in one of the following ways:</p>
<ul>
<li>
<p>The apply process makes all of the changes in the transaction and commits the transaction.</p>
</li>
<li>
<p>The apply process passes all of the LCRs in the transaction to an apply handler.</p>
</li>
<li>
<p>If the LCR raises an error, then the apply process sends the transaction and all of the LCRs in the transaction to the error queue.</p>
</li>
</ul>
<p>A transaction that includes persistent user messages can be applied in one of the following ways:</p>
<ul>
<li>
<p>The apply process passes all of the messages in the transaction to a message handler.</p>
</li>
<li>
<p>If the LCR raises an error, then the apply process sends all of the messages in the transaction to the error queue.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r10c1-t16" headers="r1c1-t16">
<p><code dir="ltr">APPLY</code></p>
</td>
<td class="cellalignment5970" headers="r10c1-t16 r1c2-t16">
<p><code dir="ltr">LATENCY</code></p>
</td>
<td class="cellalignment5970" headers="r10c1-t16 r1c3-t16">
<p><code dir="ltr">SECONDS</code></p>
</td>
<td class="cellalignment5970" headers="r10c1-t16 r1c4-t16">
<p>For apply processes, the amount of time between when the message was created at a source database and when the message was applied by the apply process at the destination database.</p>
<p>The value shown is for a single message that was applied by the apply process. This message was the last message applied when the <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure was run.</p>
<p>Depending on the type of message applied, message creation time is one of the following:</p>
<ul>
<li>
<p>For captured LCRs, the time when the redo entry for the database change was recorded</p>
</li>
<li>
<p>For persistent LCRs, the time when the LCR was constructed</p>
</li>
<li>
<p>For user messages, the time when the message was enqueued</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r11c1-t16" headers="r1c1-t16">
<p><code dir="ltr">QUEUE</code></p>
</td>
<td class="cellalignment5970" headers="r11c1-t16 r1c2-t16">
<p><code dir="ltr">ENQUEUE</code> <code dir="ltr">RATE</code></p>
</td>
<td class="cellalignment5970" headers="r11c1-t16 r1c3-t16">
<p><code dir="ltr">MESSAGES</code> <code dir="ltr">PER</code> <code dir="ltr">SECOND</code></p>
</td>
<td class="cellalignment5970" headers="r11c1-t16 r1c4-t16">
<p>The average number of messages enqueued into the queue each second.</p>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r12c1-t16" headers="r1c1-t16">
<p><code dir="ltr">QUEUE</code></p>
</td>
<td class="cellalignment5970" headers="r12c1-t16 r1c2-t16">
<p><code dir="ltr">SPILL</code> <code dir="ltr">RATE</code></p>
</td>
<td class="cellalignment5970" headers="r12c1-t16 r1c3-t16">
<p><code dir="ltr">MESSAGES</code> <code dir="ltr">PER</code> <code dir="ltr">SECOND</code></p>
</td>
<td class="cellalignment5970" headers="r12c1-t16 r1c4-t16">
<p>The average number of messages that spilled from the <a href="strms_glossary.htm#CHDFJFED"><span class="xrefglossterm">buffered queue</span></a> to the queue table each second.</p>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r13c1-t16" headers="r1c1-t16">
<p><code dir="ltr">QUEUE</code></p>
</td>
<td class="cellalignment5970" headers="r13c1-t16 r1c2-t16">
<p><code dir="ltr">CURRENT</code> <code dir="ltr">QUEUE</code> <code dir="ltr">SIZE</code></p>
</td>
<td class="cellalignment5970" headers="r13c1-t16 r1c3-t16">
<p><code dir="ltr">NUMBER</code> <code dir="ltr">OF</code> <code dir="ltr">MESSAGES</code></p>
</td>
<td class="cellalignment5970" headers="r13c1-t16 r1c4-t16">
<p>The number of messages in the queue when the <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure was run.</p>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r14c1-t16" headers="r1c1-t16">
<p><code dir="ltr">CAPTURE</code>, <code dir="ltr">PROPAGATION</code> <code dir="ltr">SENDER</code>, <code dir="ltr">PROPAGATION</code> <code dir="ltr">RECEIVER</code>, and <code dir="ltr">APPLY</code></p>
</td>
<td class="cellalignment5970" headers="r14c1-t16 r1c2-t16">
<p><code dir="ltr">EVENT</code> (Top wait event)</p>
</td>
<td class="cellalignment5970" headers="r14c1-t16 r1c3-t16">
<p><code dir="ltr">PERCENT</code></p>
</td>
<td class="cellalignment5970" headers="r14c1-t16 r1c4-t16">
<p>The percentage of time that the Oracle Streams component spent waiting because of a wait event.</p>
<p>The Oracle Streams Performance Advisor only gathers information about the top three events for each component.</p>
<p>For example, a capture process might wait for a redo log file to become available.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformalwide" -->
<p>The following are general considerations for these performance statistics:</p>
<ul>
<li>
<p>Regarding rate, bandwidth, and event statistics, the time period is calculated as the time difference between the two snapshots used by the <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure in the same user session. See <a href="#BIHCIDAF">&#34;About the Information Gathered by the Oracle Streams Performance Advisor&#34;</a> for information about the snapshots. When a user session ends, the rate, bandwidth, and event statistics are purged.</p>
</li>
<li>
<p>When a latency statistic is -1 seconds, the <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure could not gather statistics for the component when it was run. In most cases, this result indicates that the component was disabled when the procedure was run. For example, if the <code dir="ltr">LATENCY</code> statistic for an apply process is -1, then the component was probably disabled when the <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure was run.</p>
</li>
</ul>
<p>To display performance statistics for the components in an Oracle Streams topology, run the following query:</p>
<pre dir="ltr">COLUMN PATH_ID HEADING &#39;Path|ID&#39; FORMAT 999
COLUMN COMPONENT_ID HEADING &#39;Component|ID&#39; FORMAT 999
COLUMN COMPONENT_NAME HEADING &#39;Name&#39; FORMAT A20
COLUMN COMPONENT_TYPE HEADING &#39;Type&#39; FORMAT A12
COLUMN STATISTIC_NAME HEADING &#39;Statistic&#39; FORMAT A15
COLUMN STATISTIC_VALUE HEADING &#39;Value&#39; FORMAT 99999999999.99
COLUMN STATISTIC_UNIT HEADING &#39;Unit&#39; FORMAT A15 

SELECT DISTINCT
       cp.PATH_ID,
       cs.COMPONENT_ID,
       cs.COMPONENT_NAME,
       cs.COMPONENT_TYPE,
       cs.STATISTIC_NAME,
       cs.STATISTIC_VALUE,
       cs.STATISTIC_UNIT
   FROM DBA_STREAMS_TP_COMPONENT_STAT  cs,
        (SELECT PATH_ID, SOURCE_COMPONENT_ID AS COMPONENT_ID
        FROM DBA_STREAMS_TP_COMPONENT_LINK
        UNION
        SELECT PATH_ID, DESTINATION_COMPONENT_ID AS COMPONENT_ID
        FROM DBA_STREAMS_TP_COMPONENT_LINK) cp
   WHERE cs.ADVISOR_RUN_ID = 2 AND
         cs.SESSION_ID IS NULL AND
         cs.SESSION_SERIAL# IS NULL AND
         cs.COMPONENT_ID = cp.COMPONENT_ID
   ORDER BY PATH_ID, COMPONENT_ID, COMPONENT_NAME, COMPONENT_TYPE, STATISTIC_NAME;
</pre>
<p>This example uses <code dir="ltr">2</code> for the <code dir="ltr">ADVISOR_RUN_ID</code> in the <code dir="ltr">WHERE</code> clause. Substitute the advisor run ID for the advisor run you want to query. See <a href="#BIHGBBIA">&#34;Gathering Information About the Oracle Streams Topology and Performance&#34;</a> for information about determining the <code dir="ltr">ADVISOR_RUN_ID</code>.</p>
<p>The following output shows a partial list of the performance statistics for the components listed in <a href="#BIHJEDGH">&#34;Viewing the Oracle Streams Components at Each Database&#34;</a>. Specifically, the following output shows performance statistics for the components in stream path 1 and stream path 3:</p>
<pre dir="ltr">Path Component                                                                                  
  ID         ID Name                 Type         Statistic                 Value Unit           
---- ---------- -------------------- ------------ --------------- --------------- ---------------
   1          1 &#34;STRMADMIN&#34;.&#34;DESTINA QUEUE        CURRENT QUEUE S             .00 NUMBER OF MESSA
                TION_SPOKE1&#34;                      IZE                             GES            
   1          1 &#34;STRMADMIN&#34;.&#34;DESTINA QUEUE        ENQUEUE RATE            2573.21 MESSAGES PER SE
                TION_SPOKE1&#34;                                                      COND           
   1          1 &#34;STRMADMIN&#34;.&#34;DESTINA QUEUE        SPILL RATE                  .00 MESSAGES PER SE
                TION_SPOKE1&#34;                                                      COND           
   1          6 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATION  EVENT: CPU + Wa           32.55 PERCENT        
                HNS&#34;@SPOKE1.EXAMPLE. RECEIVER     it for CPU                                     
                COM=&gt;&#34;STRMADMIN&#34;.&#34;DE                                                             
                STINATION_SPOKE1&#34;                                                                
   1          6 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATION  EVENT: SQL*Net            23.62 PERCENT        
                HNS&#34;@SPOKE1.EXAMPLE. RECEIVER     more data from                                 
                COM=&gt;&#34;STRMADMIN&#34;.&#34;DE              client                                         
                STINATION_SPOKE1&#34;                                                                
   1          6 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATION  EVENT: latch: r            2.10 PERCENT        
                HNS&#34;@SPOKE1.EXAMPLE. RECEIVER     ow cache object                                
                COM=&gt;&#34;STRMADMIN&#34;.&#34;DE              s                                              
                STINATION_SPOKE1&#34;                                                                
   1          8 APPLY_SPOKE1         APPLY        EVENT: CPU + Wa           23.10 PERCENT        
                                                  it for CPU                                     
   1          8 APPLY_SPOKE1         APPLY        EVENT: latch: r            1.31 PERCENT        
                                                  ow cache object                                
                                                  s                                              
   1          8 APPLY_SPOKE1         APPLY        EVENT: latch: s            1.57 PERCENT        
                                                  hared pool                                     
   1          8 APPLY_SPOKE1         APPLY        LATENCY                    2.13 SECONDS        
   1          8 APPLY_SPOKE1         APPLY        MESSAGE APPLY R        10004.00 MESSAGES PER SE
                                                  ATE                             COND           
   1          8 APPLY_SPOKE1         APPLY        TRANSACTION APP          100.00 TRANSACTIONS PE
                                                  LY RATE                         R SECOND       
   1         12 &#34;STRMADMIN&#34;.&#34;SOURCE_ QUEUE        CURRENT QUEUE S             .00 NUMBER OF MESSA
                HNS&#34;                              IZE                             GES            
   1         12 &#34;STRMADMIN&#34;.&#34;SOURCE_ QUEUE        ENQUEUE RATE            9932.00 MESSAGES PER SE
                HNS&#34;                                                              COND           
                                                                                                 
   1         12 &#34;STRMADMIN&#34;.&#34;SOURCE_ QUEUE        SPILL RATE                  .00 MESSAGES PER SE
                HNS&#34;                                                              COND           
   1         13 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATION  BANDWIDTH              32992.96 BYTES PER SECON
                HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D SENDER                                       D              
                ESTINATION_SPOKE1&#34;@H                                                             
                UB.EXAMPLE.COM                                                                   
   1         13 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATION  EVENT: CPU + Wa           35.96 PERCENT        
                HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D SENDER       it for CPU                                     
                ESTINATION_SPOKE1&#34;@H                                                             
                UB.EXAMPLE.COM                                                                   
   1         13 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATION  EVENT: SQL*Net              .26 PERCENT        
                HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D SENDER       message to dbli                                
                ESTINATION_SPOKE1&#34;@H              nk                                             
                UB.EXAMPLE.COM                                                                   
   1         13 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATION  EVENT: latch: r             .26 PERCENT        
                HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D SENDER       ow cache object                                
                ESTINATION_SPOKE1&#34;@H              s                                              
                UB.EXAMPLE.COM                                                                   
   1         13 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATION  LATENCY                    4.00 SECONDS        
                HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D SENDER                                                      
                ESTINATION_SPOKE1&#34;@H                                                             
                UB.EXAMPLE.COM                                                                   
   1         13 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATION  SEND RATE               2568.00 MESSAGES PER SE
                HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D SENDER                                       COND           
                ESTINATION_SPOKE1&#34;@H                                                             
                UB.EXAMPLE.COM                                                                   
   1         16 CAPTURE_HNS          CAPTURE      CAPTURE RATE           10464.00 MESSAGES PER SE
                                                                                  COND           
   1         16 CAPTURE_HNS          CAPTURE      ENQUEUE RATE           10002.00 MESSAGES PER SE
                                                                                  COND           
   1         16 CAPTURE_HNS          CAPTURE      EVENT: CPU + Wa           11.02 PERCENT        
                                                  it for CPU                                     
   1         16 CAPTURE_HNS          CAPTURE      EVENT: CPU + Wa           35.96 PERCENT        
                                                  it for CPU                                     
   1         16 CAPTURE_HNS          CAPTURE      EVENT: SQL*Net             5.51 PERCENT        
                                                  message from db                                
                                                  link                                           
   1         16 CAPTURE_HNS          CAPTURE      LATENCY                    2.65 SECONDS        
.
.
.
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
This output is for illustrative purposes only. Actual performance characteristics vary depending on individual configurations and conditions.</div>
<p>You can analyze this output along with the output for the queries in <a href="#BIHJEDGH">&#34;Viewing the Oracle Streams Components at Each Database&#34;</a> and <a href="#BIHDJEDB">&#34;Viewing Each Stream Path in an Oracle Streams Topology&#34;</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BIHCEACJ">&#34;About the Oracle Streams Topology&#34;</a></p>
</li>
<li>
<p><a href="#BIHGBBIA">&#34;Gathering Information About the Oracle Streams Topology and Performance&#34;</a> for information about running the <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure to gather statistics</p>
</li>
<li>
<p><a href="strms_apply.htm#i1006214">&#34;Message Processing Options for an Apply Process&#34;</a> for information about apply handlers</p>
</li>
<li>
<p><a href="strms_apply.htm#i1008918">&#34;The Error Queue&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="BIHHCIBB"></a>
<div id="STRMS873" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Session-Level Statistics<a id="sthref1039"></a></h4>
<p>You can view session-level statistics for the Oracle Streams components. The query in this section displays the following information for each session-level statistic:</p>
<ul>
<li>
<p>The name of the Oracle Streams component</p>
</li>
<li>
<p>The type of the Oracle Streams component. The following types are possible:</p>
<ul>
<li>
<p><code dir="ltr">CAPTURE</code> for <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>es</p>
</li>
<li>
<p><code dir="ltr">PROPAGATION</code> <code dir="ltr">SENDER</code> for <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a> senders</p>
</li>
<li>
<p><code dir="ltr">PROPAGATION</code> <code dir="ltr">RECEIVER</code> for propagation receivers</p>
</li>
<li>
<p><code dir="ltr">APPLY</code> for <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>es</p>
</li>
</ul>
</li>
<li>
<p>The type of the subcomponent. Only capture processes, apply processes have subcomponents.</p>
<p>The following subcomponent types are possible for capture processes:</p>
<ul>
<li>
<p><code dir="ltr">LOGMINER</code> <code dir="ltr">READER</code> for a builder server of a capture process</p>
</li>
<li>
<p><code dir="ltr">LOGMINER</code> <code dir="ltr">PREPARER</code> for a preparer server of a capture process</p>
</li>
<li>
<p><code dir="ltr">LOGMINER</code> <code dir="ltr">BUILDER</code> for a reader server of a capture process</p>
</li>
<li>
<p><code dir="ltr">CAPTURE</code> <code dir="ltr">SESSION</code> for a capture process session</p>
</li>
</ul>
<p>The following subcomponent types are possible for apply processes:</p>
<ul>
<li>
<p><code dir="ltr">PROPAGATION</code> <code dir="ltr">SENDER+RECEIVER</code> for sending LCRs from a capture process directly to an apply process in a combined capture and apply optimization</p>
</li>
<li>
<p><code dir="ltr">APPLY</code> <code dir="ltr">READER</code> for a reader server</p>
</li>
<li>
<p><code dir="ltr">APPLY</code> <code dir="ltr">COORDINATOR</code> for a coordinator process</p>
</li>
<li>
<p><code dir="ltr">APPLY</code> <code dir="ltr">SERVER</code> for a reader server</p>
</li>
</ul>
</li>
<li>
<p>The statistic that was gathered for the component</p>
</li>
<li>
<p>The value and unit of the statistic. Session-level statistics show <code dir="ltr">PERCENT</code> for the unit. The value is the percentage of time spent either <code dir="ltr">IDLE</code>, paused for <code dir="ltr">FLOW</code> <code dir="ltr">CONTROL</code>, or waiting for an <code dir="ltr">EVENT</code>.</p>
</li>
</ul>
<p>The <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure in the <code dir="ltr">DBMS_STREAMS_ADVISOR_ADM</code> package gathers the statistics returned by the query in this section. Therefore, the statistics returned by the query were the current statistics when the procedure was run. The statistics are not updated automatically.</p>
<p><a href="#BIHDIIAF">Table 23-4</a> describes each of the statistics that can be returned by the query in this section:</p>
<div id="STRMS874" class="tblhruleformalwide">
<p class="titleintable"><a id="sthref1040"></a><a id="BIHDIIAF"></a>Table 23-4 Session-Level Statistics for Oracle Streams Components</p>
<table class="cellalignment5973" title="Session-Level Statistics for Oracle Streams Components" summary="This table provides information about session-level statistics for Oracle Streams subcomponents, including for each statistic the type of subcomponent, the statistic, the unit, and a description." dir="ltr">
<thead>
<tr class="cellalignment5964">
<th class="cellalignment5974" id="r1c1-t19">Statistic</th>
<th class="cellalignment5974" id="r1c2-t19">Unit</th>
<th class="cellalignment5974" id="r1c3-t19">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r2c1-t19" headers="r1c1-t19">
<p><code dir="ltr">IDLE</code></p>
</td>
<td class="cellalignment5970" headers="r2c1-t19 r1c2-t19">
<p><code dir="ltr">PERCENT</code></p>
</td>
<td class="cellalignment5970" headers="r2c1-t19 r1c3-t19">
<p>The percentage of time that the session spent idle. When a session is idle, it is not performing any work.</p>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r3c1-t19" headers="r1c1-t19">
<p><code dir="ltr">FLOW</code> <code dir="ltr">CONTROL</code></p>
</td>
<td class="cellalignment5970" headers="r3c1-t19 r1c2-t19">
<p><code dir="ltr">PERCENT</code></p>
</td>
<td class="cellalignment5970" headers="r3c1-t19 r1c3-t19">
<p>The percentage of time that the session was paused for flow control. See <a href="strms_capture.htm#i1014290">&#34;Capture Process States&#34;</a> for information about flow control.</p>
</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r4c1-t19" headers="r1c1-t19">
<p><code dir="ltr">EVENT</code> (Top wait event)</p>
</td>
<td class="cellalignment5970" headers="r4c1-t19 r1c2-t19">
<p><code dir="ltr">PERCENT</code></p>
</td>
<td class="cellalignment5970" headers="r4c1-t19 r1c3-t19">
<p>The percentage of time that the session spent waiting because of a wait event.</p>
<p>The Oracle Streams Performance Advisor only gathers information about the top three events for each session.</p>
<p>For example, an apply server might wait for a dependent transaction to be applied before applying its transaction.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformalwide" -->
<p>Regarding flow control and event statistics, the time period is calculated as the time difference between the two snapshots used by the <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure in the same user session. See <a href="#BIHCIDAF">&#34;About the Information Gathered by the Oracle Streams Performance Advisor&#34;</a> for information about the snapshots. When a user session ends, the flow control and event statistics are purged.</p>
<p>To display session-level performance statistics for the components in an Oracle Streams topology, run the following query:</p>
<pre dir="ltr">COLUMN PATH_ID HEADING &#39;Path|ID&#39; FORMAT 999
COLUMN COMPONENT_ID HEADING &#39;Component|ID&#39; FORMAT 999
COLUMN COMPONENT_NAME HEADING &#39;Component|Name&#39; FORMAT A20
COLUMN COMPONENT_TYPE HEADING &#39;Component|Type&#39; FORMAT A10
COLUMN SUB_COMPONENT_TYPE HEADING &#39;Subcomponent|Type&#39; FORMAT A17
COLUMN STATISTIC_NAME HEADING &#39;Statistic&#39; FORMAT A15
COLUMN STATISTIC_VALUE HEADING &#39;Value&#39; FORMAT 999.99
COLUMN STATISTIC_UNIT HEADING &#39;Unit&#39; FORMAT A7
 
SELECT DISTINCT
       cp.PATH_ID,
       cs.COMPONENT_ID,
       cs.COMPONENT_NAME,
       cs.COMPONENT_TYPE,
       cs.SUB_COMPONENT_TYPE,
       cs.STATISTIC_NAME,
       cs.STATISTIC_VALUE,
       cs.STATISTIC_UNIT
   FROM DBA_STREAMS_TP_COMPONENT_STAT  cs,
        (SELECT PATH_ID, SOURCE_COMPONENT_ID AS COMPONENT_ID
        FROM DBA_STREAMS_TP_COMPONENT_LINK
        UNION
        SELECT PATH_ID, DESTINATION_COMPONENT_ID AS COMPONENT_ID
        FROM DBA_STREAMS_TP_COMPONENT_LINK) cp
   WHERE cs.ADVISOR_RUN_ID=2 AND
         cs.SESSION_ID IS NOT NULL AND
         cs.SESSION_SERIAL# IS NOT NULL AND
         cs.COMPONENT_ID = cp.COMPONENT_ID
   ORDER BY PATH_ID, COMPONENT_ID, COMPONENT_NAME, COMPONENT_TYPE, STATISTIC_NAME;
</pre>
<p>This example uses <code dir="ltr">2</code> for the <code dir="ltr">ADVISOR_RUN_ID</code> in the <code dir="ltr">WHERE</code> clause. Substitute the advisor run ID for the advisor run you want to query. See <a href="#BIHGBBIA">&#34;Gathering Information About the Oracle Streams Topology and Performance&#34;</a> for information about determining the <code dir="ltr">ADVISOR_RUN_ID</code>.</p>
<p>The following output shows a partial list of the session-level performance statistics for the components listed in <a href="#BIHJEDGH">&#34;Viewing the Oracle Streams Components at Each Database&#34;</a>. Specifically, the following output shows session-level performance statistics for the components in stream path 1 and stream path 3:</p>
<pre dir="ltr">Path Component Component            Component  Subcomponent                                     
  ID        ID Name                 Type       Type              Statistic         Value Unit    
---- --------- -------------------- ---------- ----------------- --------------- ------- ------- 
   1         6 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   EVENT: CPU + Wa   32.55 PERCENT 
               HNS&#34;@SPOKE1.EXAMPLE. N RECEIVER                   it for CPU                      
               COM=&gt;&#34;STRMADMIN&#34;.&#34;DE                                                              
               STINATIO N_SPOKE1&#34;                                                                
   1         6 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   EVENT: SQL*Net    23.62 PERCENT 
               HNS&#34;@SPOKE1.EXAMPLE. N RECEIVER                   more data from                  
               COM=&gt;&#34;STRMADMIN&#34;.&#34;DE                              client                          
               STINATION_SPOKE1&#34;                                                                 
   1         6 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   EVENT: latch: r    2.10 PERCENT 
               HNS&#34;@SPOKE1.EXAMPLE. N RECEIVER                   ow cache object                 
               COM=&gt;&#34;STRMADMIN&#34;.&#34;DE                              s                               
               STINATION_SPOKE1&#34;                                                                 
   1         6 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   FLOW CONTROL        .89 PERCENT 
               HNS&#34;@SPOKE1.EXAMPLE. N RECEIVER                                                   
               COM=&gt;&#34;STRMADMIN&#34;.&#34;DE                                                              
               STINATION_SPOKE1&#34;                                                                 
   1         6 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   IDLE              36.61 PERCENT 
               HNS&#34;@SPOKE1.EXAMPLE. N RECEIVER                                                   
               COM=&gt;&#34;STRMADMIN&#34;.&#34;DE                                                              
               STINATION_SPOKE1&#34;                                                                 
   1         8 APPLY_SPOKE1         APPLY      APPLY READER      EVENT: CPU + Wa     .26 PERCENT 
                                                                 it for CPU                      
   1         8 APPLY_SPOKE1         APPLY      APPLY SERVER      EVENT: CPU + Wa   23.10 PERCENT 
                                                                 it for CPU                      
   1         8 APPLY_SPOKE1         APPLY      APPLY SERVER      EVENT: latch: r    1.31 PERCENT 
                                                                 ow cache object                 
                                                                 s                               
   1         8 APPLY_SPOKE1         APPLY      APPLY READER      EVENT: latch: s     .26 PERCENT 
                                                                 hared pool                      
   1         8 APPLY_SPOKE1         APPLY      APPLY SERVER      EVENT: latch: s    1.57 PERCENT 
                                                                 hared pool                      
   1         8 APPLY_SPOKE1         APPLY      APPLY COORDINATOR FLOW CONTROL        .00 PERCENT 
   1         8 APPLY_SPOKE1         APPLY      APPLY READER      FLOW CONTROL      10.76 PERCENT 
   1         8 APPLY_SPOKE1         APPLY      APPLY SERVER      FLOW CONTROL        .00 PERCENT 
   1         8 APPLY_SPOKE1         APPLY      APPLY COORDINATOR IDLE               6.21 PERCENT 
   1         8 APPLY_SPOKE1         APPLY      APPLY READER      IDLE               9.24 PERCENT 
   1         8 APPLY_SPOKE1         APPLY      APPLY SERVER      IDLE               8.53 PERCENT 
   1        13 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   EVENT: CPU + Wa   21.65 PERCENT 
               HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D N SENDER                     it for CPU                      
               ESTINATION_SPOKE1&#34;@H                                                              
               UB.EXAMPLE.COM                                                                    
   1        13 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   EVENT: SQL*Net      .26 PERCENT 
               HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D N SENDER                     message to dbli                 
               ESTINATION_SPOKE1&#34;@H                              nk                              
               UB.EXAMPLE.COM                                                                    
   1        13 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   EVENT: latch: r     .26 PERCENT 
               HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D N SENDER                     ow cache object                 
               ESTINATION_SPOKE1&#34;@H                              s                               
               UB.EXAMPLE.COM                                                                    
   1        13 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   EVENT: latch: s     .26 PERCENT 
               HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D N SENDER                     hared pool                      
               ESTINATION_SPOKE1&#34;@H                                                              
               UB.EXAMPLE.COM                                                                    
   1        13 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   FLOW CONTROL       7.37 PERCENT 
               HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D N SENDER                                                     
               ESTINATION_SPOKE1&#34;@H                                                              
               UB.EXAMPLE.COM                                                                    
   1        13 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   IDLE              67.41 PERCENT 
               HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D N SENDER                                                     
               ESTINATION_SPOKE1&#34;@H                                                              
               UB.EXAMPLE.COM                                                                    
   1        16 CAPTURE_HNS          CAPTURE    LOGMINER READER   EVENT: ARCH wai     .26 PERCENT 
                                                                 t on c/f tx acq                 
                                                                 uire 2                          
   1        16 CAPTURE_HNS          CAPTURE    CAPTURE SESSION   EVENT: CPU + Wa   35.96 PERCENT 
                                                                 it for CPU                      
   1        16 CAPTURE_HNS          CAPTURE    LOGMINER BUILDER  EVENT: CPU + Wa     .26 PERCENT 
                                                                 it for CPU                      
   1        16 CAPTURE_HNS          CAPTURE    LOGMINER PREPARER EVENT: CPU + Wa   11.02 PERCENT 
                                                                 it for CPU                      
   1        16 CAPTURE_HNS          CAPTURE    LOGMINER READER   EVENT: CPU + Wa     .26 PERCENT 
                                                                 it for CPU                      
   1        16 CAPTURE_HNS          CAPTURE    CAPTURE SESSION   EVENT: SQL*Net     5.51 PERCENT 
                                                                 message from db                 
                                                                 link                            
   1        16 CAPTURE_HNS          CAPTURE    CAPTURE SESSION   EVENT: SQL*Net      .26 PERCENT 
                                                                 message to dbli                 
                                                                 nk                              
   1        16 CAPTURE_HNS          CAPTURE    CAPTURE SESSION   EVENT: latch: r     .26 PERCENT 
                                                                 ow cache object                 
                                                                 s                               
   1        16 CAPTURE_HNS          CAPTURE    LOGMINER BUILDER  EVENT: latch: r    1.84 PERCENT 
                                                                 ow cache object                 
                                                                 s                               
   1        16 CAPTURE_HNS          CAPTURE    LOGMINER PREPARER EVENT: latch: r     .79 PERCENT 
                                                                 ow cache object                 
                                                                 s                               
   1        16 CAPTURE_HNS          CAPTURE    CAPTURE SESSION   EVENT: latch: s     .26 PERCENT 
                                                                 hared pool                      
   1        16 CAPTURE_HNS          CAPTURE    LOGMINER READER   EVENT: latch: s     .79 PERCENT 
                                                                 hared pool                      
   1        16 CAPTURE_HNS          CAPTURE    CAPTURE SESSION   FLOW CONTROL      16.27 PERCENT 
   1        16 CAPTURE_HNS          CAPTURE    LOGMINER BUILDER  FLOW CONTROL        .00 PERCENT 
   1        16 CAPTURE_HNS          CAPTURE    LOGMINER PREPARER FLOW CONTROL        .00 PERCENT 
   1        16 CAPTURE_HNS          CAPTURE    LOGMINER READER   FLOW CONTROL        .00 PERCENT 
   1        16 CAPTURE_HNS          CAPTURE    CAPTURE SESSION   IDLE              41.47 PERCENT 
   1        16 CAPTURE_HNS          CAPTURE    LOGMINER BUILDER  IDLE              97.90 PERCENT 
   1        16 CAPTURE_HNS          CAPTURE    LOGMINER PREPARER IDLE              88.19 PERCENT 
   1        16 CAPTURE_HNS          CAPTURE    LOGMINER READER   IDLE              98.69 PERCENT 
.
.
.
   3         4 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   FLOW CONTROL       6.50 PERCENT 
               HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D N SENDER                                                     
               ESTINATION_SPOKE1&#34;@S                                                              
               POKE1.EXAMPLE.COM                                                                 
   3         4 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   IDLE              70.50 PERCENT 
               HNS&#34;=&gt;&#34;STRMADMIN&#34;.&#34;D N SENDER                                                     
               ESTINATION_SPOKE1&#34;@S                                                              
               POKE1.EXAMPLE.COM                                                                 
   3        10 CAPTURE_HNS          CAPTURE    CAPTURE SESSION   EVENT: ARCH wai   52.23 PERCENT 
                                                                 t for archivelo                 
                                                                 g lock                          
   3        10 CAPTURE_HNS          CAPTURE    CAPTURE SESSION   EVENT: CPU + Wa    7.35 PERCENT 
                                                                 it for CPU                      
   3        10 CAPTURE_HNS          CAPTURE    CAPTURE SESSION   EVENT: control      .52 PERCENT 
                                                                 file sequential                 
                                                                  read                           
   3        10 CAPTURE_HNS          CAPTURE    CAPTURE SESSION   FLOW CONTROL       4.24 PERCENT 
   3        10 CAPTURE_HNS          CAPTURE    CAPTURE SESSION   IDLE               2.23 PERCENT 
   3        14 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   EVENT: CPU + Wa    6.92 PERCENT 
               HNS&#34;@HUB.EXAMPLE.COM N RECEIVER                   it for CPU                      
               =&gt;&#34;STRMADMIN&#34;.&#34;DESTI                                                              
               NATION_SPOKE1&#34;                                                                    
   3        14 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   EVENT: latch: r    2.23 PERCENT 
               HNS&#34;@HUB.EXAMPLE.COM N RECEIVER                   ow cache object                 
               =&gt;&#34;STRMADMIN&#34;.&#34;DESTI                              s                               
               NATION_SPOKE1&#34;                                                                    
   3        14 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   EVENT: library     3.79 PERCENT 
               HNS&#34;@HUB.EXAMPLE.COM N RECEIVER                   cache: mutex X                  
               =&gt;&#34;STRMADMIN&#34;.&#34;DESTI                                                              
               NATION_SPOKE1&#34;                                                                    
   3        14 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   FLOW CONTROL        .67 PERCENT 
               HNS&#34;@HUB.EXAMPLE.COM N RECEIVER                                                   
               =&gt;&#34;STRMADMIN&#34;.&#34;DESTI                                                              
               NATION_SPOKE1&#34;                                                                    
   3        14 &#34;STRMADMIN&#34;.&#34;SOURCE_ PROPAGATIO                   IDLE              85.04 PERCENT 
               HNS&#34;@HUB.EXAMPLE.COM N RECEIVER                                                   
               =&gt;&#34;STRMADMIN&#34;.&#34;DESTI                                                              
               NATION_SPOKE1&#34;                                                                    
   3        15 APPLY_SPOKE1         APPLY      APPLY COORDINATOR EVENT: latch: r    4.20 PERCENT 
                                                                 ow cache object                 
                                                                 s                               
   3        15 APPLY_SPOKE1         APPLY      APPLY COORDINATOR EVENT: latch: s     .52 PERCENT 
                                                                 hared pool                      
   3        15 APPLY_SPOKE1         APPLY      APPLY READER      EVENT: latch: s     .26 PERCENT 
                                                                 hared pool                      
   3        15 APPLY_SPOKE1         APPLY      APPLY COORDINATOR FLOW CONTROL        .00 PERCENT 
   3        15 APPLY_SPOKE1         APPLY      APPLY READER      FLOW CONTROL       1.56 PERCENT 
   3        15 APPLY_SPOKE1         APPLY      APPLY SERVER      FLOW CONTROL        .00 PERCENT 
   3        15 APPLY_SPOKE1         APPLY      APPLY COORDINATOR IDLE              87.28 PERCENT 
   3        15 APPLY_SPOKE1         APPLY      APPLY READER      IDLE              96.88 PERCENT 
   3        15 APPLY_SPOKE1         APPLY      APPLY SERVER      IDLE              91.29 PERCENT 
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>This output is for illustrative purposes only. Actual performance characteristics vary depending on individual configurations and conditions.</p>
</li>
<li>
<p>You can view the session ID and serial number for each session by adding the <code dir="ltr">SESSION_ID</code> and <code dir="ltr">SESSION_SERIAL#</code> columns to the query on the <code dir="ltr">DBA_STREAMS_TP_COMPONENT_STAT</code> view.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_capture.htm#i1006718">&#34;Capture Process Subcomponents&#34;</a> for more information about capture process subcomponents</p>
</li>
<li>
<p><a href="strms_apply.htm#i1007083">&#34;Apply Process Subcomponents&#34;</a> for more information about apply process subcomponents</p>
</li>
<li>
<p><a href="strms_adcca.htm#BGBJBDHJ">Chapter 12, &#34;Combined Capture and Apply Optimization&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="BIHBAAGI"></a>
<div id="STRMS875" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Statistics for the Stream Paths in an Oracle Streams Environment<a id="sthref1041"></a><a id="sthref1042"></a><a id="sthref1043"></a><a id="sthref1044"></a></h4>
<p>The query in this section shows the following information for each stream path in the Oracle Streams topology:</p>
<ul>
<li>
<p>Whether optimization mode for Oracle Streams is used for the path. When the <code dir="ltr">OPTIMIZATION_MODE</code> statistic is greater than 0 (zero) for a path, the path uses the combined capture and apply optimization. When the <code dir="ltr">OPTIMIZATION_MODE</code> statistic is 0 (zero) for a path, the path does not use the combined capture and apply optimization.</p>
</li>
<li>
<p>The <code dir="ltr">MESSAGE</code> <code dir="ltr">RATE</code> value is the average number of messages sent each second from the start of the path to the end of the path.</p>
</li>
<li>
<p>The <code dir="ltr">TRANSACTION</code> <code dir="ltr">RATE</code> value is the average number of transactions sent each second from the start of the path to the end of the path.</p>
</li>
</ul>
<p>The time period for these statistics is calculated as the time difference between the two snapshots used by the <code dir="ltr">ANALYZE_CURRENT_PERFORMANCE</code> procedure in the same user session. See <a href="#BIHCIDAF">&#34;About the Information Gathered by the Oracle Streams Performance Advisor&#34;</a> for information about the snapshots. When a user session ends, these statistics are purged.</p>
<p>To display this information, run the following query:</p>
<pre dir="ltr">COLUMN PATH_ID HEADING &#39;Path ID&#39; FORMAT 999
COLUMN STATISTIC_NAME HEADING &#39;Statistic&#39; FORMAT A25
COLUMN STATISTIC_VALUE HEADING &#39;Value&#39; FORMAT 99999999.99
COLUMN STATISTIC_UNIT HEADING &#39;Unit&#39; FORMAT A25

SELECT PATH_ID,
       STATISTIC_NAME,
       STATISTIC_VALUE,
       STATISTIC_UNIT
   FROM DBA_STREAMS_TP_PATH_STAT
   WHERE ADVISOR_RUN_ID=2
   ORDER BY PATH_ID, STATISTIC_NAME;
</pre>
<p>This example uses <code dir="ltr">2</code> for the <code dir="ltr">ADVISOR_RUN_ID</code> in the <code dir="ltr">WHERE</code> clause. Substitute the advisor run ID for the advisor run you want to query. See <a href="#BIHGBBIA">&#34;Gathering Information About the Oracle Streams Topology and Performance&#34;</a> for information about determining the <code dir="ltr">ADVISOR_RUN_ID</code>.</p>
<p>The following output shows the path statistics for the stream paths listed in <a href="#BIHDJEDB">&#34;Viewing Each Stream Path in an Oracle Streams Topology&#34;</a>:</p>
<pre dir="ltr">Path ID Statistic                        Value Unit
------- ------------------------- ------------ -------------------------
      1 OPTIMIZATION_MODE                 1.00 NUMBER
      1 MESSAGE RATE                  10004.00 MESSAGES PER SECOND
      1 TRANSACTION RATE                100.00 TRANSACTIONS PER SECOND
      2 OPTIMIZATION_MODE                 1.00 NUMBER
      2 MESSAGE RATE                  10028.25 MESSAGES PER SECOND
      2 TRANSACTION RATE                100.37 TRANSACTIONS PER SECOND
      3 OPTIMIZATION_MODE                 1.00 NUMBER
      3 MESSAGE RATE                   9623.20 MESSAGES PER SECOND
      3 TRANSACTION RATE                 97.10 TRANSACTIONS PER SECOND
      4 OPTIMIZATION_MODE                 1.00 NUMBER
      4 MESSAGE RATE                  10180.05 MESSAGES PER SECOND
      4 TRANSACTION RATE                 102.68 TRANSACTIONS PER SECOND
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
This output is for illustrative purposes only. Actual performance characteristics vary depending on individual configurations and conditions.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BIHFDBCA">&#34;About Stream Paths in an Oracle Streams Topology&#34;</a></p>
</li>
<li>
<p><a href="strms_adcca.htm#BGBJBDHJ">Chapter 12, &#34;Combined Capture and Apply Optimization&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BIHJAGGJ"></a>
<div id="STRMS876" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Using the UTL_SPADV Package</h2>
<p>The <code dir="ltr">UTL_SPADV</code> package provides subprograms to collect and analyze statistics for the Oracle Streams components in a distributed database environment. The package uses the Oracle Streams Performance Advisor to gather statistics.</p>
<p>The <code dir="ltr">COLLECT_STATS</code> and <code dir="ltr">START_MONITORING</code> procedures use the Oracle Streams Performance Advisor to gather statistics about the Oracle Streams components and subcomponents in a distributed database environment. The <code dir="ltr">SHOW_STATS</code> procedure generates output that includes the statistics. The output is formatted so that it can be imported into a spreadsheet easily and analyzed.</p>
<p>You can use the <code dir="ltr">COLLECT_STATS</code> procedure to collect statistics each time the procedure is called. The <code dir="ltr">comp_stat_table</code> and <code dir="ltr">path_stat_table</code> parameters specify the tables that store the performance statistics. By default, these tables are <code dir="ltr">STREAMS$_ADVISOR_COMP_STAT</code> and <code dir="ltr">STREAMS$_ADVISOR_PATH_STAT</code>, respectively.</p>
<p>You can also use the <code dir="ltr">START_MONITORING</code> procedure to create a monitoring job that monitors Oracle Streams performance continually at specified intervals. The monitoring job uses the <code dir="ltr">COLLECT_STATS</code> procedure to collect statistics. The <code dir="ltr">START_MONITORING</code> procedure populates the <code dir="ltr">STREAMS$_PA_MONITORING</code> table, and the <code dir="ltr">SHOW_STATS_TABLE</code> column in this table specifies the table that contains the performance statistics. You can use the <code dir="ltr">ALTER_MONITORING</code> procedure to modify a monitoring job, and you can use the <code dir="ltr">STOP_MONITORING</code> procedure to stop a monitoring job.</p>
<p>These procedures collect the same statistics as the Oracle Streams Performance Advisor. These statistics are described in <a href="#BIHGAGDG">Table 23-3, &#34;Component-Level Statistics for Oracle Streams Components&#34;</a> and <a href="#BIHDIIAF">Table 23-4, &#34;Session-Level Statistics for Oracle Streams Components&#34;</a>.</p>
<p>This section contains these topics:</p>
<ul>
<li>
<p><a href="#CHDGIIDE">Collecting Oracle Streams Statistics Using the UTL_SPADV Package</a></p>
</li>
<li>
<p><a href="#CHDBDDBG">Checking Whether an Oracle Streams Monitoring Job Is Currently Running</a></p>
</li>
<li>
<p><a href="#CHDGBFEB">Altering an Oracle Streams Monitoring Job</a></p>
</li>
<li>
<p><a href="#CHDJHJAG">Stopping an Oracle Streams Monitoring Job</a></p>
</li>
<li>
<p><a href="#CHDBCGDB">Showing Oracle Streams Statistics Using the UTL_SPADV Package</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ARPLS883" href="../ARPLS/u_spadv.htm#ARPLS883"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code dir="ltr">UTL_SPADV</code> package</div>
<a id="CHDGIIDE"></a>
<div id="STRMS1477" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Collecting Oracle Streams Statistics Using the UTL_SPADV Package</h3>
<p>To collect statistics using the <code dir="ltr">UTL_SPADV</code> package, complete the following steps:</p>
<ol>
<li id="BIHDJDAG">
<p>Identify the database that you will use to gather the information. An administrative user at this database must meet the following requirements:</p>
<ul>
<li>
<p>The user must have access to a database link to each database that contains Oracle Streams components to monitor.</p>
</li>
<li>
<p>The user must have been granted privileges using the <code dir="ltr">DBMS_STREAMS_AUTH.GRANT_ADMIN_PRIVILEGE</code> procedure, and each database link must connect to a user at the remote database that has been granted privileges using the <code dir="ltr">DBMS_STREAMS_AUTH.GRANT_ADMIN_PRIVILEGE</code> procedure.</p>
<p>If you configure an Oracle Streams administrator at each database with Oracle Streams components, then the Oracle Streams administrator has the necessary privileges. See <a class="olink STREP200" href="../STREP/prep_rep.htm#STREP200"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for information about creating an Oracle Streams administrator.</p>
</li>
</ul>
<p>If no database in your environment meets these requirements, then choose a database, configure the necessary database links, and grant the necessary privileges to the users before proceeding.</p>
</li>
<li>
<p>In SQL*Plus, connect to the database you identified in Step <a href="#BIHDJDAG">1</a> as a user that meets the requirements listed in Step <a href="#BIHDJDAG">1</a>.</p>
<p>See <a class="olink ADMIN00102" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the <code dir="ltr">utlspadv.sql</code> script in the rdbms/admin directory in <code dir="ltr">ORACLE_HOME</code> to load the <code dir="ltr">UTL_SPADV</code> package. For example:</p>
<pre dir="ltr">@utlspadv.sql
</pre></li>
<li id="CHDGCHGG">
<p>Either collect the current Oracle Streams performance statistics once, or create a job that continually monitors Oracle Streams performance:</p>
<ul>
<li>
<p>To collect the current Oracle Streams performance statistics once, run the <code dir="ltr">COLLECT_STATS</code> procedure:</p>
<pre dir="ltr">exec UTL_SPADV.COLLECT_STATS
</pre>
<p>This example uses the default values for the parameters in the <code dir="ltr">COLLECT_STATS</code> procedure. Therefore, this example runs the Performance Advisor 10 times with 60 seconds between each run. These values correspond with the default values for the <code dir="ltr">num_runs</code> and <code dir="ltr">interval</code> parameters, respectively, in the <code dir="ltr">COLLECT_STATS</code> procedure.</p>
</li>
<li>
<p>To create a job that continually monitors Oracle Streams performance:</p>
<pre dir="ltr">exec UTL_SPADV.START_MONITORING
</pre>
<p>This example creates a monitoring job, and the monitoring job gathers performance statistics continually at set intervals. This example uses the default values for the parameters in the <code dir="ltr">START_MONITORING</code> procedure. Therefore, this example runs the Performance Advisor every 60 seconds. This value corresponds with the default value for the <code dir="ltr">interval</code> parameter in the <code dir="ltr">START_MONITORING</code> procedure. If an interval is specified in the <code dir="ltr">START_MONITORING</code> procedure, then the specified interval is used for the <code dir="ltr">interval</code> parameter in the <code dir="ltr">COLLECT_STATS</code> procedure.</p>
</li>
</ul>
<p>These procedures include several parameters that you can use to adjust the way performance statistics are gathered. See <a class="olink ARPLS883" href="../ARPLS/u_spadv.htm#ARPLS883"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information.</p>
</li>
</ol>
<p>You can show the statistics by running the <code dir="ltr">SHOW_STATS</code> procedure. See <a href="#CHDBCGDB">&#34;Showing Oracle Streams Statistics Using the UTL_SPADV Package&#34;</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ARPLS883" href="../ARPLS/u_spadv.htm#ARPLS883"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code dir="ltr">UTL_SPADV</code> package</div>
</div>
<!-- class="sect2" -->
<a id="CHDBDDBG"></a>
<div id="STRMS1478" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Checking Whether an Oracle Streams Monitoring Job Is Currently Running</h3>
<p>To check whether a monitoring job is running using the <code dir="ltr">UTL_SPADV</code> package, complete the following steps:</p>
<ol>
<li>
<p>Connect to the database as the user who submitted the monitoring job.</p>
</li>
<li>
<p>Run the <code dir="ltr">IS_MONITORING</code> function. For example, to determine whether a monitoring job submitted by the current user with the full monitoring job name of <code dir="ltr">STREAM$_MONITORING_JOB</code> is running, enter the following:</p>
<pre dir="ltr">SET SERVEROUTPUT ON
DECLARE
  is_mon   BOOLEAN;
BEGIN
  is_mon := UTL_SPADV.IS_MONITORING(
              job_name    =&gt; &#39;STREAMS$_MONITORING_JOB&#39;,
              client_name =&gt; NULL);
  IF is_mon=TRUE THEN
    DBMS_OUTPUT.PUT_LINE(&#39;The monitoring job is running.&#39;);
  ELSE
    DBMS_OUTPUT.PUT_LINE(&#39;No monitoring job was found.&#39;);
  END IF;
END;
/
</pre></li>
</ol>
<p>The output displays the following text if a monitoring job with the specified full monitoring job name is currently running:</p>
<pre dir="ltr">The monitoring job is running.
</pre>
<p>The output displays the following text if no monitoring job with the specified full monitoring job name is currently running:</p>
<pre dir="ltr">No monitoring job was found.
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
When you submit a monitoring job, the client name and job name are concatenated to form the full monitoring job name. The client name for a monitoring job submitted by Oracle Enterprise Manager Cloud Control is always <code dir="ltr">EM</code>.</div>
</div>
<!-- class="sect2" -->
<a id="CHDGBFEB"></a>
<div id="STRMS1479" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Altering an Oracle Streams Monitoring Job</h3>
<p>To alter a monitoring job using the <code dir="ltr">UTL_SPADV</code> package, complete the following steps:</p>
<ol>
<li>
<p>Create a monitoring job if you have not done so already by completing the steps described in <a href="#CHDGIIDE">&#34;Collecting Oracle Streams Statistics Using the UTL_SPADV Package&#34;</a>. Ensure that you run the <code dir="ltr">START_MONITORING</code> procedure in Step <a href="#CHDGCHGG">4</a>.</p>
</li>
<li>
<p>Connect to the database as the user who submitted the monitoring job. Only the user who submitted a monitoring job can alter the monitoring job, and each user can submit only one monitoring job at a time.</p>
</li>
<li>
<p>Run the <code dir="ltr">ALTER_MONITORING</code> procedure. The following example sets the interval for the monitoring job to 120 seconds:</p>
<pre dir="ltr">BEGIN
  UTL_SPADV.ALTER_MONITORING(
    interval =&gt; 120);
END;
/
</pre>
<p>After running this procedure, the monitoring job gathers statistics every 120 seconds.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDJHJAG"></a>
<div id="STRMS1480" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Stopping an Oracle Streams Monitoring Job</h3>
<p>To stop a monitoring job using the <code dir="ltr">UTL_SPADV</code> package, complete the following steps:</p>
<ol>
<li>
<p>Connect to the database as the user who submitted the monitoring job. Only the user who submitted a monitoring job can stop the monitoring job, and each user can submit only one monitoring job at a time.</p>
</li>
<li>
<p>Run the <code dir="ltr">STOP_MONITORING</code> procedure:</p>
<pre dir="ltr">exec UTL_SPADV.STOP_MONITORING
</pre></li>
</ol>
<p>The <code dir="ltr">STOP_MONITORING</code> procedure includes a <code dir="ltr">purge</code> parameter that you can use to purge the statistics gathered by the monitoring job from the result tables. By default, the <code dir="ltr">purge</code> parameter is set to <code dir="ltr">FALSE</code>, and the results are retained. Set the <code dir="ltr">purge</code> parameter to <code dir="ltr">TRUE</code> to purge the results.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
See <a class="olink ARPLS883" href="../ARPLS/u_spadv.htm#ARPLS883"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information.</div>
</div>
<!-- class="sect2" -->
<a id="CHDBCGDB"></a>
<div id="STRMS1481" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Showing Oracle Streams Statistics Using the UTL_SPADV Package</h3>
<p>The <code dir="ltr">SHOW_STATS</code> procedure displays the statistics that the Performance Advisor gathered and stored. Use the <code dir="ltr">path_stat_table</code> parameter to specify the table that contains the statistics.</p>
<p>When you gather statistics using the <code dir="ltr">COLLECT_STATS</code> procedure, this table is specified in the <code dir="ltr">path_stat_table</code> parameter in the <code dir="ltr">COLLECT_STATS</code> procedure. By default, the table name is <code dir="ltr">STREAMS$_ADVISOR_PATH_STAT</code>.</p>
<p>When you gather statistics using the <code dir="ltr">START_MONITORING</code> procedure, you can determine the name for this table by querying the <code dir="ltr">SHOW_STATS_TABLE</code> column in the <code dir="ltr">STREAMS$_PA_MONITORING</code> view. The default table for a monitoring job is <code dir="ltr">STREAMS$_PA_SHOW_PATH_STAT</code>.</p>
<p>To show statistics collected using the <code dir="ltr">UTL_SPADV</code> package and stored in the <code dir="ltr">STREAMS$_ADVISOR_PATH_STAT</code> table, complete the following steps:</p>
<ol>
<li>
<p>Collect statistics by completing the steps described in <a href="#CHDGIIDE">&#34;Collecting Oracle Streams Statistics Using the UTL_SPADV Package&#34;</a>.</p>
</li>
<li>
<p>Connect to the database as the user who collected the statistics.</p>
</li>
<li>
<p>If you are using a monitoring job, then query the <code dir="ltr">SHOW_STATS_TABLE</code> column in the <code dir="ltr">STREAMS$_PA_MONITORING</code> view to determine the name of this table that stores the statistics:</p>
<pre dir="ltr">SELECT SHOW_STATS_TABLE FROM STREAMS$_PA_MONITORING;
</pre></li>
<li>
<p>Run the <code dir="ltr">SHOW_STATS</code> procedure.</p>
<p>For example, if you are using a monitoring job and the default storage table, then run the following procedure:</p>
<pre dir="ltr">SET SERVEROUTPUT ON SIZE 50000
BEGIN
  UTL_SPADV.SHOW_STATS(
    path_stat_table =&gt; &#39;STREAMS$_PA_SHOW_PATH_STAT&#39;);
END;
/
</pre></li>
</ol>
<p>The output includes the following legend:</p>
<pre dir="ltr">LEGEND
&lt;statistics&gt;= &lt;capture&gt; [ &lt;queue&gt; &lt;psender&gt; &lt;preceiver&gt; &lt;queue&gt; ] &lt;apply&gt;
&lt;bottleneck&gt;
&lt;capture&gt;   = &#39;|&lt;C&gt;&#39; &lt;name&gt; &lt;msgs captured/sec&gt; &lt;msgs enqueued/sec&gt; &lt;latency&gt;
                    &#39;LMR&#39; &lt;idl%&gt; &lt;flwctrl%&gt; &lt;topevt%&gt; &lt;topevt&gt;
                    &#39;LMP&#39; (&lt;parallelism&gt;) &lt;idl%&gt; &lt;flwctrl%&gt; &lt;topevt%&gt; &lt;topevt&gt;
                    &#39;LMB&#39; &lt;idl%&gt; &lt;flwctrl%&gt; &lt;topevt%&gt; &lt;topevt&gt;
                    &#39;CAP&#39; &lt;idl%&gt; &lt;flwctrl%&gt; &lt;topevt%&gt; &lt;topevt&gt;
                    &#39;CAP+PS&#39; &lt;msgs sent/sec&gt; &lt;bytes sent/sec&gt; &lt;latency&gt; &lt;idl%&gt;
&lt;flwctrl%&gt; &lt;topevt%&gt; &lt;topevt&gt;
&lt;apply&gt;     = &#39;|&lt;A&gt;&#39; &lt;name&gt; &lt;msgs applied/sec&gt; &lt;txns applied/sec&gt; &lt;latency&gt;
                    &#39;PS+PR&#39; &lt;idl%&gt; &lt;flwctrl%&gt; &lt;topevt%&gt; &lt;topevt&gt;
                    &#39;APR&#39; &lt;idl%&gt; &lt;flwctrl%&gt; &lt;topevt%&gt; &lt;topevt&gt;
                    &#39;APC&#39; &lt;idl%&gt; &lt;flwctrl%&gt; &lt;topevt%&gt; &lt;topevt&gt;
                    &#39;APS&#39; (&lt;parallelism&gt;) &lt;idl%&gt; &lt;flwctrl%&gt; &lt;topevt%&gt; &lt;topevt&gt;
&lt;queue&gt;     = &#39;|&lt;Q&gt;&#39; &lt;name&gt; &lt;msgs enqueued/sec&gt; &lt;msgs spilled/sec&gt; &lt;msgs in
queue&gt;
&lt;psender&gt;   = &#39;|&lt;PS&gt;&#39; &lt;name&gt; &lt;msgs sent/sec&gt; &lt;bytes sent/sec&gt; &lt;latency&gt; &lt;idl%&gt;
&lt;flwctrl%&gt; &lt;topevt%&gt; &lt;topevt&gt;
&lt;preceiver&gt; = &#39;|&lt;PR&gt;&#39; &lt;name&gt; &lt;idl%&gt; &lt;flwctrl%&gt; &lt;topevt%&gt; &lt;topevt&gt;
&lt;bottleneck&gt;= &#39;|&lt;B&gt;&#39; &lt;name&gt; &lt;sub_name&gt; &lt;sessionid&gt; &lt;serial#&gt; &lt;topevt%&gt; &lt;topevt&gt;
</pre>
<p>The following table describes the abbreviations used in the legend:</p>
<div class="inftblinformal">
<table class="cellalignment5973" title="Legend Abbreviations" summary="This table lists each abbreviation in the legend and a description for each abbreviation." dir="ltr">
<thead>
<tr class="cellalignment5964">
<th class="cellalignment5974" id="r1c1-t28">Abbreviation</th>
<th class="cellalignment5974" id="r1c2-t28">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r2c1-t28" headers="r1c1-t28"><code dir="ltr">A</code></td>
<td class="cellalignment5970" headers="r2c1-t28 r1c2-t28">Apply process</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r3c1-t28" headers="r1c1-t28"><code dir="ltr">APC</code></td>
<td class="cellalignment5970" headers="r3c1-t28 r1c2-t28">Coordinator process used by an apply process</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r4c1-t28" headers="r1c1-t28"><code dir="ltr">APR</code></td>
<td class="cellalignment5970" headers="r4c1-t28 r1c2-t28">Reader server used by an apply process</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r5c1-t28" headers="r1c1-t28"><code dir="ltr">APS</code></td>
<td class="cellalignment5970" headers="r5c1-t28 r1c2-t28">Apply server used by an apply process</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r6c1-t28" headers="r1c1-t28"><code dir="ltr">B</code></td>
<td class="cellalignment5970" headers="r6c1-t28 r1c2-t28">Bottleneck</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r7c1-t28" headers="r1c1-t28"><code dir="ltr">C</code> or <code dir="ltr">CAP</code></td>
<td class="cellalignment5970" headers="r7c1-t28 r1c2-t28">Capture process</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r8c1-t28" headers="r1c1-t28"><code dir="ltr">CAP+PS</code></td>
<td class="cellalignment5970" headers="r8c1-t28 r1c2-t28">Capture process session and propagation sender in a combined capture and apply optimization</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r9c1-t28" headers="r1c1-t28"><code dir="ltr">CCA</code></td>
<td class="cellalignment5970" headers="r9c1-t28 r1c2-t28">Combined capture and apply (<code dir="ltr">Y</code> indicates that it is used for the path; <code dir="ltr">N</code> indicates that it is not used for the path.)</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r10c1-t28" headers="r1c1-t28"><code dir="ltr">flwctrl</code></td>
<td class="cellalignment5970" headers="r10c1-t28 r1c2-t28">Flow control</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r11c1-t28" headers="r1c1-t28"><code dir="ltr">idl</code></td>
<td class="cellalignment5970" headers="r11c1-t28 r1c2-t28">Idle</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r12c1-t28" headers="r1c1-t28"><code dir="ltr">LMB</code></td>
<td class="cellalignment5970" headers="r12c1-t28 r1c2-t28">Builder server used by a capture process (LogMiner builder)</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r13c1-t28" headers="r1c1-t28"><code dir="ltr">LMP</code></td>
<td class="cellalignment5970" headers="r13c1-t28 r1c2-t28">Preparer server used by a capture process (LogMiner preparer)</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r14c1-t28" headers="r1c1-t28"><code dir="ltr">LMR</code></td>
<td class="cellalignment5970" headers="r14c1-t28 r1c2-t28">Reader server used by a capture process (LogMiner reader)</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r15c1-t28" headers="r1c1-t28"><code dir="ltr">msgs</code></td>
<td class="cellalignment5970" headers="r15c1-t28 r1c2-t28">Messages</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r16c1-t28" headers="r1c1-t28"><code dir="ltr">preceiver</code> or <code dir="ltr">PR</code></td>
<td class="cellalignment5970" headers="r16c1-t28 r1c2-t28">Propagation receiver</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r17c1-t28" headers="r1c1-t28"><code dir="ltr">psender</code> or <code dir="ltr">PS</code></td>
<td class="cellalignment5970" headers="r17c1-t28 r1c2-t28">Propagation sender</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r18c1-t28" headers="r1c1-t28"><code dir="ltr">PS+PR</code></td>
<td class="cellalignment5970" headers="r18c1-t28 r1c2-t28">Propagation sender and propagation receiver in a combined capture and apply optimization in which the capture process and apply process are running on the same database instance</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r19c1-t28" headers="r1c1-t28"><code dir="ltr">Q</code></td>
<td class="cellalignment5970" headers="r19c1-t28 r1c2-t28">Queue</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r20c1-t28" headers="r1c1-t28"><code dir="ltr">serial#</code></td>
<td class="cellalignment5970" headers="r20c1-t28 r1c2-t28">Session serial number</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r21c1-t28" headers="r1c1-t28"><code dir="ltr">sec</code></td>
<td class="cellalignment5970" headers="r21c1-t28 r1c2-t28">Second</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r22c1-t28" headers="r1c1-t28"><code dir="ltr">sid</code></td>
<td class="cellalignment5970" headers="r22c1-t28 r1c2-t28">Session identifier</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r23c1-t28" headers="r1c1-t28"><code dir="ltr">sub_name</code></td>
<td class="cellalignment5970" headers="r23c1-t28 r1c2-t28">Subcomponent name</td>
</tr>
<tr class="cellalignment5964">
<td class="cellalignment5970" id="r24c1-t28" headers="r1c1-t28"><code dir="ltr">topevt</code></td>
<td class="cellalignment5970" headers="r24c1-t28 r1c2-t28">Top event</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblinformal" -->
<p>The following is sample output for when an apply process is the last component in a path:</p>
<pre dir="ltr">OUTPUT
PATH 1 RUN_ID 3 RUN_TIME 2009-JUL-02 05:59:38 CCA Y
|&lt;C&gt; DB2$CAP 10267 10040 3 LMR 95% 0% 3.3% &#34;&#34; LMP (1) 86.7% 0% 11.7% &#34;&#34; LMB 86.7% 0% 11.7% &#34;&#34;
CAP 71.7% 16.7% 11.7% &#34;&#34; |&lt;Q&gt; &#34;STRMADMIN&#34;.&#34;DB2$CAPQ&#34; 2540.45 0 30 |&lt;PS&gt;
=&gt;DB1.EXAMPLE.COM 2152.03 32992.96 4 59.2% 9.8% 0% &#34;&#34; |&lt;PR&gt; DB2.EXAMPLE.COM=&gt; 98.5%
0% 0.6% &#34;&#34; |&lt;Q&gt; &#34;STRMADMIN&#34;.&#34;DB2$APPQ&#34; 3657.03 0.01 460 |&lt;A&gt; APPLY$_DB2_2 10042 100 4
APR 93.3% 0% 6.7% &#34;&#34; APC 98.1% 0% 1.8% &#34;&#34; APS (4) 370% 0% 6.1% &#34;&#34; |&lt;B&gt; NO BOTTLENECK
IDENTIFIED
 
 
PATH 1 RUN_ID 4 RUN_TIME 2009-JUL-02 06:01:39 CCA Y
|&lt;C&gt; DB2$CAP 10464 10002 3 LMR 95% 0% 1.7% &#34;&#34; LMP (1) 83.3% 0% 16.7% &#34;&#34; LMB 85% 0% 15% &#34;&#34; 
CAP 62.9% 0% 35.7% &#34;&#34; |&lt;Q&gt; &#34;STRMADMIN&#34;.&#34;DB2$CAPQ&#34; 2677.03 0.01 45 |&lt;PS&gt;
=&gt;DB1.EXAMPLE.COM 2491.08 47883.46 4 65.5% 10.7% 0% &#34;&#34; |&lt;PR&gt; DB2.EXAMPLE.COM=&gt; 0% 83.3% 
13.3% &#34;&#34; |&lt;Q&gt; &#34;STRMADMIN&#34;.&#34;DB2$APPQ&#34; 2444.03 0.01 0 |&lt;A&gt; APPLY$_DB2_2 10004 100 3
APR 42.9% 57.1% 0% &#34;&#34; APC 90% 0% 10% &#34;&#34; APS (4) 346% 0% 10.3% &#34;&#34; |&lt;B&gt; NO BOTTLENECK
IDENTIFIED
.
.
.
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
This output is for illustrative purposes only. Actual performance characteristics vary depending on individual configurations and conditions.</div>
<p>Use the legend and the abbreviations to determine the statistics in the output. For example, the following output is for the <code dir="ltr">db2$cap</code> capture process in path 1, run ID&nbsp;3:</p>
<pre dir="ltr">|&lt;C&gt; DB2$CAP 10267 10040 3 LMR 95% 0% 3.3% &#34;&#34; LMP (1) 86.7% 0% 11.7% &#34;&#34; LMB 86.7% 0% 11.7% &#34;&#34;
CAP 71.7% 16.7% 11.7% &#34;&#34;
</pre>
<p>This output shows the following statistics:</p>
<ul>
<li>
<p>The capture process captured an average of 10267 database changes each second.</p>
</li>
<li>
<p>The capture process enqueued an average of 10040 messages each second.</p>
</li>
<li>
<p>The capture process latency was 3 seconds.</p>
</li>
<li>
<p>The reader server (LMR) used by the capture process spent 95% of its time idle.</p>
</li>
<li>
<p>The reader server used by the capture process spent 0% of its time in flow control mode.</p>
</li>
<li>
<p>The reader server used by the capture process spent 3.3% of its time on the top wait event.</p>
</li>
<li>
<p>The preparer server (LMP) parallelism was 1.</p>
</li>
<li>
<p>The preparer server used by the capture process spent 86.7% of its time idle.</p>
</li>
<li>
<p>The preparer server used by the capture process spent 0% of its time in flow control mode.</p>
</li>
<li>
<p>The preparer server used by the capture process spent 11.7% of its time on the top wait event.</p>
</li>
<li>
<p>The builder server (LMB) used by the capture process spent 86.7% of its time idle.</p>
</li>
<li>
<p>The builder server used by the capture process spent 0% of its time in flow control mode.</p>
</li>
<li>
<p>The builder server used by the capture process spent 11.7% of its time on the top wait event.</p>
</li>
<li>
<p>The capture process session spent 71.7% of its time idle.</p>
</li>
<li>
<p>The capture process session spent 16.7% of its time in flow control mode.</p>
</li>
<li>
<p>The capture process session spent 11.7% of its time on the top wait event.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_adcca.htm#BGBJBDHJ">Chapter 12, &#34;Combined Capture and Apply Optimization&#34;</a></div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5963">
<tr>
<td class="cellalignment5970">
<table class="cellalignment5968">
<tr>
<td class="cellalignment5967"><a href="strms_monitor.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5967"><a href="strms_cpmon.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5972">
<table class="cellalignment5966">
<tr>
<td class="cellalignment5967"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5967"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5967"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5967"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5967"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5967"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>