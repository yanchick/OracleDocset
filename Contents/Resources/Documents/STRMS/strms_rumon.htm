<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-104477"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Monitoring%20Rules"></a><title>Monitoring Rules</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1032"/>
<meta name="dcterms.created" content="2014-12-23T13:28:7Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Streams Concepts and Administration"/>
<meta name="dcterms.identifier" content="E53116-02"/>
<meta name="dcterms.isVersionOf" content="STRMS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="strms_glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="strms_apmon.htm" title="Previous" type="text/html"/>
<link rel="Next" href="strms_trmon.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E53116-02.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">37/57</span> <!-- End Header -->
<div id="STRMS975" class="chapter"><a id="CFFJECBJ"></a> <a id="CFFFJDJD"></a>
<h1 class="chapter"><span class="secnum">27</span> Monitoring Rules</h1>
<p><a id="sthref1262"></a><a id="sthref1263"></a>The following topics describe monitoring <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s, <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>s, and <a href="strms_glossary.htm#CHDDECEH"><span class="xrefglossterm">evaluation context</span></a>s:</p>
<ul>
<li>
<p><a href="#i1017839">Displaying All Rules Used by All Oracle Streams Clients</a></p>
</li>
<li>
<p><a href="#i1008150">Displaying the Oracle Streams Rules Used by a Specific Oracle Streams Client</a></p>
</li>
<li>
<p><a href="#i1008212">Displaying the Current Condition for a Rule</a></p>
</li>
<li>
<p><a href="#i1017830">Displaying Modified Rule Conditions for Oracle Streams Rules</a></p>
</li>
<li>
<p><a href="#i1008262">Displaying the Evaluation Context for Each Rule Set</a></p>
</li>
<li>
<p><a href="#i1008299">Displaying Information About the Tables Used by an Evaluation Context</a></p>
</li>
<li>
<p><a href="#i1008328">Displaying Information About the Variables Used in an Evaluation Context</a></p>
</li>
<li>
<p><a href="#i1008362">Displaying All of the Rules in a Rule Set</a></p>
</li>
<li>
<p><a href="#i1008394">Displaying the Condition for Each Rule in a Rule Set</a></p>
</li>
<li>
<p><a href="#i1008442">Listing Each Rule that Contains a Specified Pattern in Its Condition</a></p>
</li>
<li>
<p><a href="#i1010822">Displaying Aggregate Statistics for All Rule Set Evaluations</a></p>
</li>
<li>
<p><a href="#i1010823">Displaying Information About Evaluations for Each Rule Set</a></p>
</li>
<li>
<p><a href="#i1010510">Determining the Resources Used by Evaluation of Each Rule Set</a></p>
</li>
<li>
<p><a href="#i1010824">Displaying Evaluation Statistics for a Rule</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1"><span class="bold">Note</span>:</p>
The Oracle Streams tool in Oracle Enterprise Manager Cloud Control is also an excellent way to monitor an Oracle Streams environment. See the online Help for the Oracle Streams tool for more information.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_rules.htm#g1049257">Chapter 5, &#34;How Rules Are Used in Oracle Streams&#34;</a></p>
</li>
<li>
<p><a href="strms_adrules.htm#BABEBHGC">Chapter 11, &#34;Advanced Rule Concepts&#34;</a></p>
</li>
<li>
<p><a href="strms_mrules.htm#BABBBAIA">Chapter 18, &#34;Managing Rules&#34;</a></p>
</li>
<li>
<p><a href="strms_trrules.htm#BABEHCCE">Chapter 34, &#34;Troubleshooting Rules and Rule-Based Transformations&#34;</a></p>
</li>
<li>
<p><a href="strms_mrules.htm#BABBCDDF">&#34;Modifying a Name-Value Pair in a Rule Action Context&#34;</a> for information about viewing a rule <a href="strms_glossary.htm#CBACHAJI"><span class="xrefglossterm">action context</span></a></p>
</li>
<li>
<p><a class="olink REFRN" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for information about the data dictionary views described in this chapter</p>
</li>
</ul>
</div>
<a id="i1017839"></a>
<div id="STRMS976" class="sect1">
<h2 class="sect1">Displaying All Rules Used by All Oracle Streams Clients</h2>
<p>Oracle Streams <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s are created using the <code dir="ltr">DBMS_STREAMS_ADM</code> package or the Oracle Streams tool in Oracle Enterprise Manager Cloud Control. Oracle Streams rules in the <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>s for an <a href="strms_glossary.htm#CHDDDJGJ"><span class="xrefglossterm">Oracle Streams client</span></a> determine the behavior of the Oracle Streams client. Oracle Streams clients include <a href="strms_glossary.htm#CHDBHECD"><span class="xrefglossterm">capture process</span></a>es, <a href="strms_glossary.htm#CHDEICIC"><span class="xrefglossterm">propagation</span></a>s, <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>es, and <a href="strms_glossary.htm#CHDDGHHB"><span class="xrefglossterm">messaging client</span></a>s. The rule sets for an Oracle Streams client can also contain rules created using the <code dir="ltr">DBMS_RULE_ADM</code> package, and these rules also determine the behavior of the Oracle Streams client.</p>
<p>For example, if a rule in the <a href="strms_glossary.htm#CHDEEDIJ"><span class="xrefglossterm">positive rule set</span></a> for a capture process evaluates to <code dir="ltr">TRUE</code> for DML changes to the <code dir="ltr">hr.employees</code> table, then the capture process captures DML changes to this table. However, if a rule in the <a href="strms_glossary.htm#CHDBHJHI"><span class="xrefglossterm">negative rule set</span></a> for a capture process evaluates to <code dir="ltr">TRUE</code> for DML changes to the <code dir="ltr">hr.employees</code> table, then the capture process discards DML changes to this table.</p>
<p>You query the following data dictionary views to display all rules in the rule sets for Oracle Streams clients, including Oracle Streams rules and rules created using the <code dir="ltr">DBMS_RULE_ADM</code> package:</p>
<ul>
<li>
<p><code dir="ltr">ALL_STREAMS_RULES</code></p>
</li>
<li>
<p><code dir="ltr">DBA_STREAMS_RULES</code></p>
</li>
</ul>
<p>In addition, these two views display the current <a href="strms_glossary.htm#CHDGDCFJ"><span class="xrefglossterm">rule condition</span></a> for each rule and whether the rule condition has been modified.</p>
<p>The query in this section displays the following information about all of the rules used by Oracle Streams clients in a database:</p>
<ul>
<li>
<p>The name of each Oracle Streams client that uses the rule</p>
</li>
<li>
<p>The type of each Oracle Streams client that uses the rule, either <code dir="ltr">CAPTURE</code> for a capture process, <code dir="ltr">SYNCHRONOUS</code> <code dir="ltr">CAPTURE</code> for a synchronous capture, <code dir="ltr">PROPAGATION</code> for a propagation, <code dir="ltr">APPLY</code> for an apply process, or <code dir="ltr">DEQUEUE</code> for a messaging client</p>
</li>
<li>
<p>The name of the rule</p>
</li>
<li>
<p>The type of rule set that contains the rule for the Oracle Streams client, either <code dir="ltr">POSITIVE</code> or <code dir="ltr">NEGATIVE</code></p>
</li>
<li>
<p>For Oracle Streams rules, the Oracle Streams rule level, either <code dir="ltr">GLOBAL</code>, <code dir="ltr">SCHEMA</code>, or <code dir="ltr">TABLE</code></p>
</li>
<li>
<p>For Oracle Streams rules, the name of the schema for <a href="strms_glossary.htm#CHDFAGCF"><span class="xrefglossterm">schema rule</span></a>s and <a href="strms_glossary.htm#CHDEGGGH"><span class="xrefglossterm">table rule</span></a>s</p>
</li>
<li>
<p>For Oracle Streams rules, the name of the table for table rules</p>
</li>
<li>
<p>For Oracle Streams rules, the rule type, either <code dir="ltr">DML</code> or <code dir="ltr">DDL</code></p>
</li>
</ul>
<p>Run the following query to display this information:</p>
<pre dir="ltr">COLUMN STREAMS_NAME HEADING &#39;Oracle|Streams|Name&#39; FORMAT A14
COLUMN STREAMS_TYPE HEADING &#39;Oracle|Streams|Type&#39; FORMAT A11
COLUMN RULE_NAME HEADING &#39;Rule|Name&#39; FORMAT A12
COLUMN RULE_SET_TYPE HEADING &#39;Rule Set|Type&#39; FORMAT A8
COLUMN STREAMS_RULE_TYPE HEADING &#39;Oracle|Streams|Rule|Level&#39; FORMAT A7
COLUMN SCHEMA_NAME HEADING &#39;Schema|Name&#39; FORMAT A6
COLUMN OBJECT_NAME HEADING &#39;Object|Name&#39; FORMAT A11
COLUMN RULE_TYPE HEADING &#39;Rule|Type&#39; FORMAT A4

SELECT STREAMS_NAME, 
       STREAMS_TYPE,
       RULE_NAME,
       RULE_SET_TYPE,
       STREAMS_RULE_TYPE,
       SCHEMA_NAME,
       OBJECT_NAME,
       RULE_TYPE
  FROM DBA_STREAMS_RULES;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                                                 Oracle
Oracle         Oracle                            Streams
Streams        Streams     Rule         Rule Set Rule    Schema Object      Rule
Name           Type        Name         Type     Level   Name   Name        Type
-------------- ----------- ------------ -------- ------- ------ ----------- ----
STRM01_CAPTURE CAPTURE     JOBS4        POSITIVE TABLE   HR     JOBS        DML
STRM01_CAPTURE CAPTURE     JOBS5        POSITIVE TABLE   HR     JOBS        DDL
DBS1_TO_DBS2   PROPAGATION HR18         POSITIVE SCHEMA  HR                 DDL
DBS1_TO_DBS2   PROPAGATION HR17         POSITIVE SCHEMA  HR                 DML
APPLY          APPLY       HR20         POSITIVE SCHEMA  HR                 DML
APPLY          APPLY       JOB_HISTORY2 NEGATIVE TABLE   HR     JOB_HISTORY DML
OE             DEQUEUE     RULE$_28     POSITIVE
</pre>
<p>This output provides the following information about the rules used by Oracle Streams clients in the database:</p>
<ul>
<li>
<p>The DML rule <code dir="ltr">jobs4</code> and the DDL rule <code dir="ltr">jobs5</code> are both table rules for the <code dir="ltr">hr.jobs</code> table in the positive rule set for the capture process <code dir="ltr">strm01_capture</code>.</p>
</li>
<li>
<p>The DML rule <code dir="ltr">hr17</code> and the DDL rule <code dir="ltr">hr18</code> are both <a href="strms_glossary.htm#CHDFAGCF"><span class="xrefglossterm">schema rule</span></a>s for the <code dir="ltr">hr</code> schema in the positive rule set for the propagation <code dir="ltr">dbs1_to_dbs2</code>.</p>
</li>
<li>
<p>The DML rule <code dir="ltr">hr20</code> is a schema rule for the <code dir="ltr">hr</code> schema in the positive rule set for the apply process <code dir="ltr">apply</code>.</p>
</li>
<li>
<p>The DML rule <code dir="ltr">job_history2</code> is a table rule for the <code dir="ltr">hr</code> schema in the negative rule set for the apply process <code dir="ltr">apply</code>.</p>
</li>
<li>
<p>The rule <code dir="ltr">rule$_28</code> is a messaging rule in the positive rule set for the messaging client <code dir="ltr">oe</code>.</p>
</li>
</ul>
<p>The <code dir="ltr">ALL_STREAMS_RULES</code> and <code dir="ltr">DBA_STREAMS_RULES</code> views also contain information about the rule sets used by an Oracle Streams client, the current and original rule condition for Oracle Streams rules, whether the rule condition has been changed, the subsetting operation and DML condition for each Oracle Streams <a href="strms_glossary.htm#CHDBCGAG"><span class="xrefglossterm">subset rule</span></a>, the <a href="strms_glossary.htm#CHDHFBJG"><span class="xrefglossterm">source database</span></a> specified for each Oracle Streams rule, and information about the <a href="strms_glossary.htm#CHDFHHGJ"><span class="xrefglossterm">message</span></a> type and message variable for Oracle Streams messaging rules.</p>
<p>The following data dictionary views also display Oracle Streams rules:</p>
<ul>
<li>
<p><code dir="ltr">ALL_STREAMS_GLOBAL_RULES</code></p>
</li>
<li>
<p><code dir="ltr">DBA_STREAMS_GLOBAL_RULES</code></p>
</li>
<li>
<p><code dir="ltr">ALL_STREAMS_MESSAGE_RULES</code></p>
</li>
<li>
<p><code dir="ltr">DBA_STREAMS_MESSAGE_RULES</code></p>
</li>
<li>
<p><code dir="ltr">ALL_STREAMS_SCHEMA_RULES</code></p>
</li>
<li>
<p><code dir="ltr">DBA_STREAMS_SCHEMA_RULES</code></p>
</li>
<li>
<p><code dir="ltr">ALL_STREAMS_TABLE_RULES</code></p>
</li>
<li>
<p><code dir="ltr">DBA_STREAMS_TABLE_RULES</code></p>
</li>
</ul>
<p>These views display Oracle Streams rules only. They do not display any manual modifications to these rules made by the <code dir="ltr">DBMS_RULE_ADM</code> package, and they do not display rules created using the <code dir="ltr">DBMS_RULE_ADM</code> package. These views can display the original rule condition for each rule only. They do not display the current rule condition for a rule if the rule condition was modified after the rule was created.</p>
</div>
<!-- class="sect1" -->
<a id="i1008150"></a>
<div id="STRMS977" class="sect1">
<h2 class="sect1">Displaying the Oracle Streams Rules Used by a Specific Oracle Streams Client</h2>
<p>To determine which <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s are in a <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a> used by a particular <a href="strms_glossary.htm#CHDDDJGJ"><span class="xrefglossterm">Oracle Streams client</span></a>, you can query the <code dir="ltr">DBA_STREAMS_RULES</code> data dictionary view. For example, suppose a database is running an <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a> named <code dir="ltr">strm01_apply</code>. The following sections describe how to determine the rules in the <a href="strms_glossary.htm#CHDEEDIJ"><span class="xrefglossterm">positive rule set</span></a> and <a href="strms_glossary.htm#CHDBHJHI"><span class="xrefglossterm">negative rule set</span></a> for this apply process.</p>
<p>The following sections describe how to determine which rules are in a rule set used by a particular Oracle Streams client:</p>
<ul>
<li>
<p><a href="#i1017754">Displaying the Rules in the Positive Rule Set for an Oracle Streams Client</a></p>
</li>
<li>
<p><a href="#i1017753">Displaying the Rules in the Negative Rule Set for an Oracle Streams Client</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_rules.htm#i1006169">&#34;System-Created Rules&#34;</a></p>
</li>
</ul>
</div>
<a id="i1017754"></a>
<div id="STRMS978" class="sect2">
<h3 class="sect2">Displaying the Rules in the Positive Rule Set for an Oracle Streams Client</h3>
<p>The following query displays all of the <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s in the <a href="strms_glossary.htm#CHDEEDIJ"><span class="xrefglossterm">positive rule set</span></a> for an <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a>s named <code dir="ltr">strm01_apply</code>:</p>
<pre dir="ltr">COLUMN RULE_OWNER HEADING &#39;Rule Owner&#39; FORMAT A10
COLUMN RULE_NAME HEADING &#39;Rule|Name&#39; FORMAT A12
COLUMN STREAMS_RULE_TYPE HEADING &#39;Oracle Streams|Rule|Level&#39; FORMAT A7
COLUMN SCHEMA_NAME HEADING &#39;Schema|Name&#39; FORMAT A6
COLUMN OBJECT_NAME HEADING &#39;Object|Name&#39; FORMAT A11
COLUMN RULE_TYPE HEADING &#39;Rule|Type&#39; FORMAT A4
COLUMN SOURCE_DATABASE HEADING &#39;Source&#39; FORMAT A10
COLUMN INCLUDE_TAGGED_LCR HEADING &#39;Apply|Tagged|LCRs?&#39; FORMAT A9

SELECT RULE_OWNER,
       RULE_NAME,
       STREAMS_RULE_TYPE,
       SCHEMA_NAME,
       OBJECT_NAME,
       RULE_TYPE,
       SOURCE_DATABASE,
       INCLUDE_TAGGED_LCR
  FROM DBA_STREAMS_RULES
  WHERE STREAMS_NAME  = &#39;STRM01_APPLY&#39; AND
        RULE_SET_TYPE = &#39;POSITIVE&#39;;
</pre>
<p>If this query returns any rows, then the apply process applies LCRs containing changes that evaluate to <code dir="ltr">TRUE</code> for the rules.</p>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                           Oracle Streams                                    Apply
           Rule            Rule    Schema Object      Rule            Tagged
Rule Owner Name            Level   Name   Name        Type Source     LCRs?
---------- --------------- ------- ------ ----------- ---- ---------- ---------
STRMADMIN  HR20            SCHEMA  HR                 DML   DBS1.EXAM NO
                                                            PLE.COM
STRMADMIN  HR21            SCHEMA  HR                 DDL   DBS1.EXAM NO
                                                            PLE.COM
</pre>
<p>Assuming the <a href="strms_glossary.htm#CHDGDCFJ"><span class="xrefglossterm">rule condition</span></a>s for the Oracle Streams rules returned by this query have not been modified, these results show that the apply process applies LCRs containing DML changes and DDL changes to the <code dir="ltr">hr</code> schema and that the LCRs originated at the <code dir="ltr">dbs1.example.com</code> database. The rules in the positive rule set that instruct the apply process to apply these LCRs are owned by the <code dir="ltr">strmadmin</code> user and are named <code dir="ltr">hr20</code> and <code dir="ltr">hr21</code>. Also, the apply process applies an LCR that satisfies one of these rules only if the <a href="strms_glossary.htm#CHDBJJHH"><span class="xrefglossterm">tag</span></a> in the LCR is&nbsp;<code dir="ltr">NULL</code>.</p>
<p>If the rule condition for an Oracle Streams rule has been modified, then you must check the current rule condition to determine the effect of the rule on an <a href="strms_glossary.htm#CHDDDJGJ"><span class="xrefglossterm">Oracle Streams client</span></a>. Oracle Streams rules whose rule condition has been modified have <code dir="ltr">NO</code> for the <code dir="ltr">SAME_RULE_CONDITION</code> column.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#i1017830">&#34;Displaying Modified Rule Conditions for Oracle Streams Rules&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="i1017753"></a>
<div id="STRMS980" class="sect2">
<h3 class="sect2">Displaying the Rules in the Negative Rule Set for an Oracle Streams Client</h3>
<p>The following query displays all of the <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s in the <a href="strms_glossary.htm#CHDBHJHI"><span class="xrefglossterm">negative rule set</span></a> for an <a href="strms_glossary.htm#CHDJBHJC"><span class="xrefglossterm">apply process</span></a> named <code dir="ltr">strm01_apply</code>:</p>
<pre dir="ltr">COLUMN RULE_OWNER HEADING &#39;Rule Owner&#39; FORMAT A10
COLUMN RULE_NAME HEADING &#39;Rule|Name&#39; FORMAT A15
COLUMN STREAMS_RULE_TYPE HEADING &#39;Oracle Streams|Rule|Level&#39; FORMAT A7
COLUMN SCHEMA_NAME HEADING &#39;Schema|Name&#39; FORMAT A6
COLUMN OBJECT_NAME HEADING &#39;Object|Name&#39; FORMAT A11
COLUMN RULE_TYPE HEADING &#39;Rule|Type&#39; FORMAT A4
COLUMN SOURCE_DATABASE HEADING &#39;Source&#39; FORMAT A10
COLUMN INCLUDE_TAGGED_LCR HEADING &#39;Apply|Tagged|LCRs?&#39; FORMAT A9

SELECT RULE_OWNER,
       RULE_NAME,
       STREAMS_RULE_TYPE,
       SCHEMA_NAME,
       OBJECT_NAME,
       RULE_TYPE,
       SOURCE_DATABASE,
       INCLUDE_TAGGED_LCR
  FROM DBA_STREAMS_RULES
  WHERE STREAMS_NAME  = &#39;APPLY&#39; AND
        RULE_SET_TYPE = &#39;NEGATIVE&#39;;
</pre>
<p>If this query returns any rows, then the apply process discards LCRs containing changes that evaluate to <code dir="ltr">TRUE</code> for the rules.</p>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                           Oracle Streams                                    Apply
           Rule            Rule    Schema Object      Rule            Tagged
Rule Owner Name            Level   Name   Name        Type Source     LCRs?
---------- --------------- ------- ------ ----------- ---- ---------- ---------
STRMADMIN  JOB_HISTORY22   TABLE   HR     JOB_HISTORY DML  DBS1.EXAMP YES
                                                           LE.COM
STRMADMIN  JOB_HISTORY23   TABLE   HR     JOB_HISTORY DDL  DBS1.EXAMP YES
                                                           LE.COM
</pre>
<p>Assuming the <a href="strms_glossary.htm#CHDGDCFJ"><span class="xrefglossterm">rule condition</span></a>s for the Oracle Streams rules returned by this query have not been modified, these results show that the apply process discards LCRs containing DML changes and DDL changes to the <code dir="ltr">hr.job_history</code> table and that the LCRs originated at the <code dir="ltr">dbs1.example.com</code> database. The rules in the negative rule set that instruct the apply process to discard these LCRs are owned by the <code dir="ltr">strmadmin</code> user and are named <code dir="ltr">job_history22</code> and <code dir="ltr">job_history23</code>. Also, the apply process discards an LCR that satisfies one of these rules regardless of the value of the <a href="strms_glossary.htm#CHDBJJHH"><span class="xrefglossterm">tag</span></a> in the LCR.</p>
<p>If the rule condition for an Oracle Streams rule has been modified, then you must check the current rule condition to determine the effect of the rule on an <a href="strms_glossary.htm#CHDDDJGJ"><span class="xrefglossterm">Oracle Streams client</span></a>. Oracle Streams rules whose rule condition has been modified have <code dir="ltr">NO</code> for the <code dir="ltr">SAME_RULE_CONDITION</code> column.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#i1017830">&#34;Displaying Modified Rule Conditions for Oracle Streams Rules&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1008212"></a>
<div id="STRMS982" class="sect1">
<h2 class="sect1">Displaying the Current Condition for a Rule<a id="sthref1264"></a></h2>
<p>If you know the name of a <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>, then you can display its <a href="strms_glossary.htm#CHDGDCFJ"><span class="xrefglossterm">rule condition</span></a>. For example, consider the rule returned by the query in <a href="#i1008150">&#34;Displaying the Oracle Streams Rules Used by a Specific Oracle Streams Client&#34;</a>. The name of the rule is <code dir="ltr">hr1</code>, and you can display its condition by running the following query:</p>
<pre dir="ltr">SET LONG  8000
SET PAGES 8000
SELECT RULE_CONDITION &#34;Current Rule Condition&#34;
  FROM DBA_STREAMS_RULES 
  WHERE RULE_NAME  = &#39;HR1&#39; AND
        RULE_OWNER = &#39;STRMADMIN&#39;;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Current Rule Condition
--------------------------------------------------------------------------------
((((:dml.get_object_owner() = &#39;HR&#39;) and :dml.get_source_database_name() = &#39;DA.EX
AMPLE.COM&#39; )) and (:dml.get_compatible() &lt;= dbms_streams.compatible_11_2))
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_adrules.htm#i1006145">&#34;Rule Condition&#34;</a></p>
</li>
<li>
<p><a href="strms_rules.htm#i1006169">&#34;System-Created Rules&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="i1017830"></a>
<div id="STRMS984" class="sect1">
<h2 class="sect1">Displaying Modified Rule Conditions for Oracle Streams Rules</h2>
<p>It is possible to modify the <a href="strms_glossary.htm#CHDGDCFJ"><span class="xrefglossterm">rule condition</span></a> of an Oracle Streams <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>. These modifications can change the behavior of the <a href="strms_glossary.htm#CHDDDJGJ"><span class="xrefglossterm">Oracle Streams client</span></a>s using the Oracle Streams rule. In addition, some modifications can degrade rule evaluation performance.</p>
<p>The following query displays the rule name, the original rule condition, and the current rule condition for each Oracle Streams rule whose condition has been modified:</p>
<pre dir="ltr">COLUMN RULE_NAME HEADING &#39;Rule Name&#39; FORMAT A12
COLUMN ORIGINAL_RULE_CONDITION HEADING &#39;Original Rule Condition&#39; FORMAT A33
COLUMN RULE_CONDITION HEADING &#39;Current Rule Condition&#39; FORMAT A33

SET LONG  8000
SET PAGES 8000
SELECT RULE_NAME, ORIGINAL_RULE_CONDITION, RULE_CONDITION
  FROM DBA_STREAMS_RULES 
  WHERE SAME_RULE_CONDITION = &#39;NO&#39;;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Rule Name    Original Rule Condition           Current Rule Condition
------------ --------------------------------- ---------------------------------
HR20         ((:dml.get_object_owner() = &#39;HR&#39;) ((:dml.get_object_owner() = &#39;HR&#39;)
              and :dml.is_null_tag() = &#39;Y&#39; )    and :dml.is_null_tag() = &#39;Y&#39; and
                                                :dml.get_object_name() != &#39;JOB_H
                                               ISTORY&#39;)
</pre>
<p>In this example, the output shows that the condition of the <code dir="ltr">hr20</code> rule has been modified. Originally, this <a href="strms_glossary.htm#CHDFAGCF"><span class="xrefglossterm">schema rule</span></a> evaluated to <code dir="ltr">TRUE</code> for all changes to the <code dir="ltr">hr</code> schema. The current modified condition for this rule evaluates to <code dir="ltr">TRUE</code> for all changes to the <code dir="ltr">hr</code> schema, except for DML changes to the <code dir="ltr">hr.job_history</code> table.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The query in this section applies only to Oracle Streams rules. It does not apply to rules created using the <code dir="ltr">DBMS_RULE_ADM</code> package because these rules always show <code dir="ltr">NULL</code> for the <code dir="ltr">ORIGINAL_RULE_CONDITION</code> column and <code dir="ltr">NULL</code> for the <code dir="ltr">SAME_RULE_CONDITION</code> column.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_adrules.htm#i1006145">&#34;Rule Condition&#34;</a></p>
</li>
<li>
<p><a href="strms_rules.htm#i1006169">&#34;System-Created Rules&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="i1008262"></a>
<div id="STRMS985" class="sect1">
<h2 class="sect1">Displaying the Evaluation Context for Each Rule Set<a id="sthref1265"></a></h2>
<p>The following query displays the default <a href="strms_glossary.htm#CHDDECEH"><span class="xrefglossterm">evaluation context</span></a> for each <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a> in a database:</p>
<pre dir="ltr">COLUMN RULE_SET_OWNER HEADING &#39;Rule Set|Owner&#39; FORMAT A10
COLUMN RULE_SET_NAME HEADING &#39;Rule Set Name&#39; FORMAT A20
COLUMN RULE_SET_EVAL_CONTEXT_OWNER HEADING &#39;Eval Context|Owner&#39; FORMAT A12
COLUMN RULE_SET_EVAL_CONTEXT_NAME HEADING &#39;Eval Context Name&#39; FORMAT A30

SELECT RULE_SET_OWNER, 
       RULE_SET_NAME, 
       RULE_SET_EVAL_CONTEXT_OWNER,
       RULE_SET_EVAL_CONTEXT_NAME
  FROM DBA_RULE_SETS;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Rule Set                        Eval Context
Owner      Rule Set Name        Owner        Eval Context Name
---------- -------------------- ------------ ------------------------------
STRMADMIN  RULESET$_2           SYS          STREAMS$_EVALUATION_CONTEXT
STRMADMIN  STRM02_QUEUE_R       STRMADMIN    AQ$_STRM02_QUEUE_TABLE_V
STRMADMIN  APPLY_OE_RS          STRMADMIN    OE_EVAL_CONTEXT
STRMADMIN  OE_QUEUE_R           STRMADMIN    AQ$_OE_QUEUE_TABLE_V
STRMADMIN  AQ$_1_RE             STRMADMIN    AQ$_OE_QUEUE_TABLE_V
SUPPORT    RS                   SUPPORT      EVALCTX
OE         NOTIFICATION_QUEUE_R OE           AQ$_NOTIFICATION_QUEUE_TABLE_V
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_adrules.htm#i1006223">&#34;Rule Evaluation Context&#34;</a></p>
</li>
<li>
<p><a href="strms_adrules.htm#i1006719">&#34;Evaluation Contexts Used in Oracle Streams&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="i1008299"></a>
<div id="STRMS986" class="sect1">
<h2 class="sect1">Displaying Information About the Tables Used by an Evaluation Context<a id="sthref1266"></a></h2>
<p>The following query displays information about the tables used by an <a href="strms_glossary.htm#CHDDECEH"><span class="xrefglossterm">evaluation context</span></a> named <code dir="ltr">evalctx</code>, which is owned by the <code dir="ltr">support</code> user:</p>
<pre dir="ltr">COLUMN TABLE_ALIAS HEADING &#39;Table Alias&#39; FORMAT A20
COLUMN TABLE_NAME HEADING &#39;Table Name&#39; FORMAT A40

SELECT TABLE_ALIAS,
       TABLE_NAME
  FROM DBA_EVALUATION_CONTEXT_TABLES
  WHERE EVALUATION_CONTEXT_OWNER = &#39;SUPPORT&#39; AND
        EVALUATION_CONTEXT_NAME = &#39;EVALCTX&#39;;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Table Alias          Table Name
-------------------- ----------------------------------------
PROB                 problems
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_adrules.htm#i1006223">&#34;Rule Evaluation Context&#34;</a></div>
</div>
<!-- class="sect1" -->
<a id="i1008328"></a>
<div id="STRMS987" class="sect1">
<h2 class="sect1">Displaying Information About the Variables Used in an Evaluation Context<a id="sthref1267"></a></h2>
<p>The following query displays information about the variables used by an <a href="strms_glossary.htm#CHDDECEH"><span class="xrefglossterm">evaluation context</span></a> named <code dir="ltr">evalctx</code>, which is owned by the <code dir="ltr">support</code> user:</p>
<pre dir="ltr">COLUMN VARIABLE_NAME HEADING &#39;Variable Name&#39; FORMAT A15
COLUMN VARIABLE_TYPE HEADING &#39;Variable Type&#39; FORMAT A15
COLUMN VARIABLE_VALUE_FUNCTION HEADING &#39;Variable Value|Function&#39; FORMAT A20
COLUMN VARIABLE_METHOD_FUNCTION HEADING &#39;Variable Method|Function&#39; FORMAT A20

SELECT VARIABLE_NAME,
       VARIABLE_TYPE,
       VARIABLE_VALUE_FUNCTION,
       VARIABLE_METHOD_FUNCTION
  FROM DBA_EVALUATION_CONTEXT_VARS
  WHERE EVALUATION_CONTEXT_OWNER = &#39;SUPPORT&#39; AND
        EVALUATION_CONTEXT_NAME = &#39;EVALCTX&#39;;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                                Variable Value       Variable Method
Variable Name   Variable Type   Function             Function
--------------- --------------- -------------------- --------------------
CURRENT_TIME    DATE            timefunc
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="strms_adrules.htm#i1006223">&#34;Rule Evaluation Context&#34;</a></div>
</div>
<!-- class="sect1" -->
<a id="i1008362"></a>
<div id="STRMS988" class="sect1">
<h2 class="sect1">Displaying All of the Rules in a Rule Set<a id="sthref1268"></a><a id="sthref1269"></a></h2>
<p>The query in this section displays the following information about all of the <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s in a <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a>:</p>
<ul>
<li>
<p>The owner of the rule.</p>
</li>
<li>
<p>The name of the rule.</p>
</li>
<li>
<p>The <a href="strms_glossary.htm#CHDDECEH"><span class="xrefglossterm">evaluation context</span></a> for the rule, if any. If a rule does not have an evaluation context, and no evaluation context is specified in the <code dir="ltr">ADD_RULE</code> procedure when the rule is added to a rule set, then it inherits the evaluation context of the rule set.</p>
</li>
<li>
<p>The evaluation context owner, if the rule has an evaluation context.</p>
</li>
</ul>
<p>For example, to display this information for each rule in a rule set named <code dir="ltr">oe_queue_r</code> that is owned by the user <code dir="ltr">strmadmin</code>, run the following query:</p>
<pre dir="ltr">COLUMN RULE_OWNER HEADING &#39;Rule Owner&#39; FORMAT A10
COLUMN RULE_NAME HEADING &#39;Rule Name&#39; FORMAT A20
COLUMN RULE_EVALUATION_CONTEXT_NAME HEADING &#39;Eval Context Name&#39; FORMAT A27
COLUMN RULE_EVALUATION_CONTEXT_OWNER HEADING &#39;Eval Context|Owner&#39; FORMAT A11

SELECT R.RULE_OWNER, 
       R.RULE_NAME, 
       R.RULE_EVALUATION_CONTEXT_NAME,
       R.RULE_EVALUATION_CONTEXT_OWNER
  FROM DBA_RULES R, DBA_RULE_SET_RULES RS 
  WHERE RS.RULE_SET_OWNER = &#39;STRMADMIN&#39; AND 
        RS.RULE_SET_NAME = &#39;OE_QUEUE_R&#39; AND 
  RS.RULE_NAME = R.RULE_NAME AND 
  RS.RULE_OWNER = R.RULE_OWNER;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                                                            Eval Contex
Rule Owner Rule Name            Eval Context Name           Owner
---------- -------------------- --------------------------- -----------
STRMADMIN  HR1                  STREAMS$_EVALUATION_CONTEXT SYS
STRMADMIN  APPLY_LCRS           STREAMS$_EVALUATION_CONTEXT SYS
STRMADMIN  OE_QUEUE$3
STRMADMIN  APPLY_ACTION
</pre></div>
<!-- class="sect1" -->
<a id="i1008394"></a>
<div id="STRMS989" class="sect1">
<h2 class="sect1">Displaying the Condition for Each Rule in a Rule Set<a id="sthref1270"></a><a id="sthref1271"></a></h2>
<p>The following query displays the condition for each <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a> in a <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a> named <code dir="ltr">hr_queue_r</code> that is owned by the user <code dir="ltr">strmadmin</code>:</p>
<pre dir="ltr">SET LONGCHUNKSIZE 4000
SET LONG 4000
COLUMN RULE_OWNER HEADING &#39;Rule Owner&#39; FORMAT A15
COLUMN RULE_NAME HEADING &#39;Rule Name&#39; FORMAT A15
COLUMN RULE_CONDITION HEADING &#39;Rule Condition&#39; FORMAT A45

SELECT R.RULE_OWNER, 
       R.RULE_NAME, 
       R.RULE_CONDITION
  FROM DBA_RULES R, DBA_RULE_SET_RULES RS 
  WHERE RS.RULE_SET_OWNER = &#39;STRMADMIN&#39; AND 
        RS.RULE_SET_NAME = &#39;HR_QUEUE_R&#39; AND 
  RS.RULE_NAME = R.RULE_NAME AND 
  RS.RULE_OWNER = R.RULE_OWNER;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Rule Owner      Rule Name       Rule Condition
--------------- --------------- ---------------------------------------------
STRMADMIN       APPLY_ACTION     hr.get_hr_action(tab.user_data) = &#39;APPLY&#39;
STRMADMIN       APPLY_LCRS      :dml.get_object_owner() = &#39;HR&#39; AND  (:dml.get
                                _object_name() = &#39;DEPARTMENTS&#39; OR 
                                :dml.get_object_name() = &#39;EMPLOYEES&#39;)

STRMADMIN       HR_QUEUE$3      hr.get_hr_action(tab.user_data) != &#39;APPLY&#39;
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="strms_adrules.htm#i1006145">&#34;Rule Condition&#34;</a></p>
</li>
<li>
<p><a href="strms_rules.htm#i1006169">&#34;System-Created Rules&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="i1008442"></a>
<div id="STRMS990" class="sect1">
<h2 class="sect1">Listing Each Rule that Contains a Specified Pattern in Its Condition<a id="sthref1272"></a><a id="sthref1273"></a></h2>
<p>To list each <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a> in a database that contains a specified pattern in its condition, you can query the <code dir="ltr">DBMS_RULES</code> data dictionary view and use the <code dir="ltr">DBMS_LOB.INSTR</code> function to search for the pattern in the <a href="strms_glossary.htm#CHDGDCFJ"><span class="xrefglossterm">rule condition</span></a>s. For example, the following query lists each rule that contains the pattern <code dir="ltr">&#39;HR&#39;</code> in its condition:</p>
<pre dir="ltr">COLUMN RULE_OWNER HEADING &#39;Rule Owner&#39; FORMAT A30
COLUMN RULE_NAME HEADING &#39;Rule Name&#39; FORMAT A30

SELECT RULE_OWNER, RULE_NAME FROM DBA_RULES 
  WHERE DBMS_LOB.INSTR(RULE_CONDITION, &#39;HR&#39;, 1, 1) &gt; 0;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Rule Owner                     Rule Name
------------------------------ ------------------------------
STRMADMIN                      DEPARTMENTS4
STRMADMIN                      DEPARTMENTS5
STRMADMIN                      DEPARTMENTS6
</pre></div>
<!-- class="sect1" -->
<a id="i1010822"></a>
<div id="STRMS991" class="sect1">
<h2 class="sect1">Displaying Aggregate Statistics for All Rule Set Evaluations<a id="sthref1274"></a></h2>
<p>You can query the <code dir="ltr">V$RULE_SET_AGGREGATE_STATS</code> dynamic performance view to display statistics for all <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a> evaluations since the database instance last started.</p>
<p>The query in this section contains the following information about rule set evaluations:</p>
<ul>
<li>
<p>The number of rule set evaluations.</p>
</li>
<li>
<p>The number of rule set evaluations that were instructed to stop on the first hit.</p>
</li>
<li>
<p>The number of rule set evaluations that were instructed to evaluate only simple <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s.</p>
</li>
<li>
<p>The number of times a rule set was evaluated without issuing any SQL. Generally, issuing SQL to evaluate rules is more expensive than evaluating rules without issuing SQL.</p>
</li>
<li>
<p>The number of centiseconds of CPU time used for rule set evaluation.</p>
</li>
<li>
<p>The number of centiseconds spent on rule set evaluation.</p>
</li>
<li>
<p>The number of SQL executions issued to evaluate a rule in a rule set.</p>
</li>
<li>
<p>The number of <a href="strms_glossary.htm#CHDGDCFJ"><span class="xrefglossterm">rule condition</span></a>s processed during rule set evaluation.</p>
</li>
<li>
<p>The number of <code dir="ltr">TRUE</code> rules returned to the <a href="strms_glossary.htm#CHDIIIDH"><span class="xrefglossterm">rules engine</span></a> clients.</p>
</li>
<li>
<p>The number of <code dir="ltr">MAYBE</code> rules returned to the rules engine clients.</p>
</li>
<li>
<p>The number of times the following types of functions were called during rule set evaluation: variable value function, variable method function, and evaluation function.</p>
</li>
</ul>
<p>Run the following query to display this information:</p>
<pre dir="ltr">COLUMN NAME HEADING &#39;Name of Statistic&#39; FORMAT A55
COLUMN VALUE HEADING &#39;Value&#39; FORMAT 999999999

SELECT NAME, VALUE FROM V$RULE_SET_AGGREGATE_STATS;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Name of Statistic                                            Value
------------------------------------------------------- ----------
rule set evaluations (all)                                    5584
rule set evaluations (first_hit)                              5584
rule set evaluations (simple_rules_only)                      3675
rule set evaluations (SQL free)                               5584
rule set evaluation time (CPU)                                 179
rule set evaluation time (elapsed)                            1053
rule set SQL executions                                          0
rule set conditions processed                                11551
rule set true rules                                             10
rule set maybe rules                                           328
rule set user function calls (variable value function)         182
rule set user function calls (variable method function)      12794
rule set user function calls (evaluation function)            3857
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
A centisecond is one-hundredth of a second. So, for example, this output shows 1.79 seconds of CPU time and 10.53 seconds of elapsed time.</div>
</div>
<!-- class="sect1" -->
<a id="i1010823"></a>
<div id="STRMS992" class="sect1">
<h2 class="sect1">Displaying Information About Evaluations<a id="sthref1275"></a> for Each Rule Set</h2>
<p>You can query the <code dir="ltr">V$RULE_SET</code> dynamic performance view to display information about evaluations for each <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a> since the database instance last started. The query in this section contains the following information about each rule set in a database:</p>
<ul>
<li>
<p>The owner of the rule set.</p>
</li>
<li>
<p>The name of the rule set.</p>
</li>
<li>
<p>The total number of evaluations of the rule set since the database instance last started.</p>
</li>
<li>
<p>The total number of times SQL was executed to evaluate <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a>s since the database instance last started. Generally, issuing SQL to evaluate rules is more expensive than evaluating rules without issuing SQL.</p>
</li>
<li>
<p>The total number of evaluations on the rule set that did not issue SQL to evaluate rules since the database instance last started.</p>
</li>
<li>
<p>The total number of <code dir="ltr">TRUE</code> rules returned to the <a href="strms_glossary.htm#CHDIIIDH"><span class="xrefglossterm">rules engine</span></a> clients using the rule set since the database instance last started.</p>
</li>
<li>
<p>The total number of <code dir="ltr">MAYBE</code> rules returned to the rules engine clients using the rule set since the database instance last started.</p>
</li>
</ul>
<p>Run the following query to display this information for each rule set in the database:</p>
<pre dir="ltr">COLUMN OWNER HEADING &#39;Rule Set|Owner&#39; FORMAT A9
COLUMN NAME HEADING &#39;Rule Set|Name&#39; FORMAT A11
COLUMN EVALUATIONS HEADING &#39;Total|Evaluations&#39; FORMAT 99999999
COLUMN SQL_EXECUTIONS HEADING &#39;SQL|Executions&#39; FORMAT 99999999
COLUMN SQL_FREE_EVALUATIONS HEADING &#39;SQL Free|Evaluations&#39; FORMAT 99999999
COLUMN TRUE_RULES HEADING &#39;True|Rules&#39; FORMAT 999999999
COLUMN MAYBE_RULES HEADING &#39;Maybe|Rules&#39; FORMAT 99999999

SELECT OWNER, 
       NAME, 
       EVALUATIONS,
       SQL_EXECUTIONS,
       SQL_FREE_EVALUATIONS,
       TRUE_RULES,
       MAYBE_RULES
  FROM V$RULE_SET;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">Rule Set  Rule Set          Total        SQL    SQL Free       True     Maybe
Owner     Name        Evaluations Executions Evaluations      Rules     Rules
--------- ----------- ----------- ---------- ----------- ---------- ---------
SYS       ALERT_QUE_R           3          0           0          2         0
STRMADMIN RULESET$_4           86          0           0         43         1
STRMADMIN RULESET$_11         458          0           0         11         0
STRMADMIN RULESET$_9           87          0           0          1        42
STRMADMIN RULESET$_7           87          0           0         44         1
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Querying the <code dir="ltr">V$RULE_SET</code> view can have a negative impact on performance if a database has a large library cache.</div>
</div>
<!-- class="sect1" -->
<a id="i1010510"></a>
<div id="STRMS993" class="sect1">
<h2 class="sect1">Determining the Resources Used by Evaluation of Each Rule Set<a id="sthref1276"></a></h2>
<p>You can query the <code dir="ltr">V$RULE_SET</code> dynamic performance view to determine the resources used by evaluation of a <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a> since the database instance last started. If a rule set was evaluated more than one time since the database instance last started, then some statistics are cumulative, including statistics for the amount of CPU time, evaluation time, and shared memory bytes used.</p>
<p>The query in this section contains the following information about each rule set in a database:</p>
<ul>
<li>
<p>The owner of the rule set</p>
</li>
<li>
<p>The name of the rule set</p>
</li>
<li>
<p>The total number of seconds of CPU time used to evaluate the rule set since the database instance last started</p>
</li>
<li>
<p>The total number of seconds used to evaluate the rule set since the database instance last started</p>
</li>
<li>
<p>The total number of shared memory bytes used to evaluate the rule set since the database instance last started</p>
</li>
</ul>
<p>Run the following query to display this information for each rule set in the database:</p>
<pre dir="ltr">COLUMN OWNER HEADING &#39;Rule Set|Owner&#39; FORMAT A15
COLUMN NAME HEADING &#39;Rule Set Name&#39; FORMAT A15
COLUMN CPU_SECONDS HEADING &#39;Seconds|of CPU|Time&#39; FORMAT 999999.999
COLUMN ELAPSED_SECONDS HEADING &#39;Seconds of|Evaluation|Time&#39; FORMAT 999999.999
COLUMN SHARABLE_MEM HEADING &#39;Bytes|of Shared|Memory&#39; FORMAT 999999999

SELECT OWNER, 
       NAME, 
       (CPU_TIME/100) CPU_SECONDS,
       (ELAPSED_TIME/100) ELAPSED_SECONDS,
       SHARABLE_MEM
  FROM V$RULE_SET;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">                                    Seconds  Seconds of      Bytes
Rule Set                             of CPU  Evaluation  of Shared
Owner           Rule Set Name          Time        Time     Memory
--------------- --------------- ----------- ----------- ----------
SYS             ALERT_QUE_R            .230        .490      25120
STRMADMIN       RULESET$_4             .060        .970      25097
STRMADMIN       RULESET$_11            .040        .030      25098
STRMADMIN       RULESET$_9             .220       3.040      25505
STRMADMIN       RULESET$_7             .040        .380      21313
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Querying the <code dir="ltr">V$RULE_SET</code> view can have a negative impact on performance if a database has a large library cache.</div>
</div>
<!-- class="sect1" -->
<a id="i1010824"></a>
<div id="STRMS994" class="sect1">
<h2 class="sect1">Displaying Evaluation Statistics for a Rule<a id="sthref1277"></a></h2>
<p>You can query the <code dir="ltr">V$RULE</code> dynamic performance view to display evaluation statistics for a particular <a href="strms_glossary.htm#CHDIFFCF"><span class="xrefglossterm">rule</span></a> since the database instance last started. The query in this section contains the following information about each <a href="strms_glossary.htm#CHDCHGGB"><span class="xrefglossterm">rule set</span></a> in a database:</p>
<ul>
<li>
<p>The total number of times the rule evaluated to <code dir="ltr">TRUE</code> since the database instance last started.</p>
</li>
<li>
<p>The total number of times the rule evaluated to <code dir="ltr">MAYBE</code> since the database instance last started.</p>
</li>
<li>
<p>The total number of evaluations on the rule that issued SQL since the database instance last started. Generally, issuing SQL to evaluate a rule is more expensive than evaluating the rule without issuing SQL.</p>
</li>
</ul>
<p>For example, run the following query to display this information for the <code dir="ltr">locations25</code> rule in the <code dir="ltr">strmadmin</code> schema:</p>
<pre dir="ltr">COLUMN TRUE_HITS HEADING &#39;True Evaluations&#39; FORMAT 99999999999
COLUMN MAYBE_HITS HEADING &#39;Maybe Evaluations&#39; FORMAT 99999999999
COLUMN SQL_EVALUATIONS HEADING &#39;SQL Evaluations&#39; FORMAT 99999999999

SELECT TRUE_HITS, MAYBE_HITS, SQL_EVALUATIONS 
  FROM V$RULE
  WHERE RULE_OWNER = &#39;STRMADMIN&#39; AND
        RULE_NAME  = &#39;LOCATIONS25&#39;;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">True Evaluations Maybe Evaluations SQL Evaluations
---------------- ----------------- ---------------
            1518               154               0
</pre></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5963">
<tr>
<td class="cellalignment5970">
<table class="cellalignment5968">
<tr>
<td class="cellalignment5967"><a href="strms_apmon.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5967"><a href="strms_trmon.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5972">
<table class="cellalignment5966">
<tr>
<td class="cellalignment5967"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5967"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5967"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5967"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5967"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5967"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>