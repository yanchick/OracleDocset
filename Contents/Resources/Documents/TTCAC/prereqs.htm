<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-107442"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Setting%20Up%20a%20Caching%20Infrastructure"></a><title>Setting Up a Caching Infrastructure</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 726"/>
<meta name="dcterms.created" content="2014-09-23T15:6:30Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="TimesTen Application-Tier Database Cache User&#39;s Guide"/>
<meta name="dcterms.identifier" content="E21634-12"/>
<meta name="dcterms.isVersionOf" content="TTCAC"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2012, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="gettingstarted.htm" title="Previous" type="text/html"/>
<link rel="Next" href="define.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E21634-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">7/21</span> <!-- End Header -->
<div id="TTCAC167" class="chapter"><a id="CHDJBIAE"></a>
<h1 class="chapter"><span class="secnum">3</span> Setting Up a Caching Infrastructure</h1>
<p>The following sections describe the tasks for setting up the TimesTen and Oracle Database systems before you can start caching Oracle Database data in a TimesTen database:</p>
<ul>
<li>
<p><a href="#CHDEFCHF">Configuring your system to cache Oracle Database data in TimesTen</a></p>
</li>
<li>
<p><a href="#BABJJHJD">Configuring the Oracle database to cache data in TimesTen</a></p>
</li>
<li>
<p><a href="#BCFGAHAD">Configuring a TimesTen database to cache Oracle Database data</a></p>
</li>
<li>
<p><a href="#BABFDEHG">Configuring data management</a></p>
</li>
<li>
<p><a href="#BCFJHFEI">Testing the connectivity between the TimesTen and Oracle databases</a></p>
</li>
<li>
<p><a href="#BCFIDDJA">Managing the cache agent</a></p>
</li>
</ul>
<a id="CHDEFCHF"></a>
<div id="TTCAC168" class="sect1">
<h2 class="sect1">Configuring your system to cache Oracle Database data in TimesTen</h2>
<p>TimesTen Application-Tier Database Cache supports the following <a id="sthref130"></a>Oracle Database Server releases:</p>
<ul>
<li>
<p>Oracle 11<span class="italic">g</span> Release 2 (11.2.0.2.0 or above)</p>
</li>
<li>
<p>Oracle 11<span class="italic">g</span> Release 1 (11.1.0.7.0 or above)</p>
</li>
<li>
<p>Oracle 10<span class="italic">g</span> Release 2 (10.2.0.5.0 or above)</p>
</li>
</ul>
<p>Configure the environment variables for your particular operating system, as described in <a href="#BCFGBJEJ">&#34;TimesTen Application-Tier Database Cache environment variables for UNIX&#34;</a> or <a href="#BHCEGEDC">&#34;TimesTen Application-Tier Database Cache environment variables for Microsoft Windows&#34;</a>.</p>
<p>Then, install TimesTen as described in <a class="olink TTINS" href="../TTINS/toc.htm"><span class="italic">Oracle TimesTen In-Memory Database Installation Guide</span></a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
From a product perspective, &#34;TimesTen Application-Tier Database Cache&#34; is used interchangeably with &#34;TimesTen&#34; because the TimesTen Application-Tier Database Cache product option includes the Oracle TimesTen In-Memory Database.</div>
<p>TimesTen does not support Oracle Name Server for Windows clients.</p>
<a id="BCFGBJEJ"></a>
<div id="TTCAC169" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">TimesTen Application-Tier Database Cache environment variables for <a id="sthref131"></a>UNIX</h3>
<p>The shared library search path environment variable such as <code>LD_LIBRARY_PATH</code> or <code>SHLIB_PATH</code> must include the <code><span class="codeinlineitalic">TimesTen_install_dir</span></code><code>/lib</code> directory.</p>
<p>For more information, see <a class="olink TTINS185" href="../TTINS/install.htm#TTINS185">&#34;Shared library path environment variable&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Installation Guide</span>.</p>
<p>The <code>PATH</code> environment variable must include the <code><span class="codeinlineitalic">TimesTen_install_dir</span></code><code>/bin</code> directory.</p>
<p>In the following example, TimesTen is installed in the <code>/timesten/myinstance</code> directory:</p>
<pre>LD_LIBRARY_PATH=/timesten/myinstance/lib
PATH=/timesten/myinstance/bin
</pre></div>
<!-- class="sect2" -->
<a id="BHCEGEDC"></a>
<div id="TTCAC170" class="sect2">
<h3 class="sect2">TimesTen Application-Tier Database Cache environment variables for <a id="sthref132"></a>Microsoft Windows</h3>
<p>The <code>PATH</code> system environment variable must include the following directories:</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">Oracle_install_dir</span></code><code>\bin</code></p>
</li>
<li>
<p><code><span class="codeinlineitalic">TimesTen_install_dir</span></code><code>\lib</code></p>
</li>
<li>
<p><code><span class="codeinlineitalic">TimesTen_install_dir</span></code><code>\bin</code></p>
</li>
</ul>
<p>In the following example, Oracle Database is installed in the <code>C:\oracle\ora112</code> directory and TimesTen is installed in the <code>C:\timesten\myinstance</code> directory:</p>
<pre>PATH=C:\oracle\ora112\bin;C:\timesten\myinstance\lib;C:\timesten\myinstance\bin
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABJJHJD"></a>
<div id="TTCAC171" class="sect1">
<h2 class="sect1">Configuring the Oracle database to cache data in TimesTen</h2>
<p>The following sections describe the tasks that must be performed on the Oracle database by the <code>sys</code> user:</p>
<ul>
<li>
<p><a href="#BABBEGBI">Create the Oracle database users</a></p>
</li>
<li>
<p><a href="#BCFGJFIA">Grant privileges to the Oracle database users</a></p>
</li>
<li>
<p><a href="#BCFJJCFJ">Automatically create Oracle Database objects used to manage data caching</a></p>
</li>
<li>
<p><a href="#BCFHCBJE">Manually create Oracle Database objects used to manage data caching</a></p>
</li>
</ul>
<a id="BABBEGBI"></a>
<div id="TTCAC172" class="sect2">
<h3 class="sect2">Create the Oracle database users</h3>
<p>You must create a default tablespace and a user <a id="sthref133"></a><code>timesten</code> that is to own the Oracle Database tables that store information about cache operations.</p>
<p>Create or designate a default tablespace for the <code>timesten</code> user, which is passed as an argument to the <code>initCacheGlobalSchema.sql</code> script. This tablespace is used for storing TimesTen Application-Tier Database Cache management objects that should not be shared with other applications. While you may also store Oracle base tables that are cached in TimesTen, we strongly recommend that this tablespace be used solely by TimesTen for cache management.</p>
<p>Execute the SQL*Plus script <code><span class="codeinlineitalic">TimesTen_install_dir</span></code><code>/oraclescripts/initCacheGlobalSchema.sql</code>, which creates:</p>
<ul>
<li>
<p>The <code>timesten</code> user</p>
</li>
<li>
<p>The Oracle Database tables owned by the <code>timesten</code> user to store information about the cache environment, including a cache grid if one is configured</p>
</li>
<li>
<p>The <a id="sthref134"></a><code>TT_CACHE_ADMIN_ROLE</code> role that defines privileges on these Oracle Database tables</p>
</li>
</ul>
<p>See <a href="manage.htm#BABFJHCA">&#34;Managing a caching environment with Oracle Database objects&#34;</a> for a list of Oracle Database tables owned by the <code>timesten</code> user.</p>
<div id="TTCAC173" class="example">
<p class="titleinexample"><a id="sthref135"></a>Example 3-1 Creating the timesten user and its tables</p>
<p>In the following SQL*Plus example, the default tablespace that is created for the <code>timesten</code> user is <code>cachetblsp</code>.</p>
<pre>% cd <span class="italic">TimesTen_install_dir</span>/oraclescripts
% sqlplus sys as sysdba
Enter password: <span class="italic">password</span>
SQL&gt; <a id="sthref136"></a><a id="sthref137"></a>CREATE TABLESPACE cachetblsp DATAFILE &#39;datfttuser.dbf&#39; SIZE 100M;
SQL&gt; <a id="sthref138"></a><a id="sthref139"></a>@initCacheGlobalSchema &#34;cachetblsp&#34;
</pre></div>
<!-- class="example" -->
<p>Create or designate one or more users to own Oracle Database tables that are to be cached in a TimesTen database. These users are the <a id="sthref140"></a>schema users. These may be existing users or new users. The tables to be cached may or may not already exist.</p>
<div id="TTCAC174" class="example">
<p class="titleinexample"><a id="sthref141"></a>Example 3-2 Creating a schema user</p>
<p>As the <code>sys</code> user, the following SQL*Plus example creates a schema user <code>oratt</code>.</p>
<pre>SQL&gt; <a id="sthref142"></a>CREATE USER oratt IDENTIFIED BY oracle;
</pre></div>
<!-- class="example" -->
<p>Next, you must create a user that creates, owns, and maintains Oracle Database objects that store information used to manage the cache environment (including a cache grid if one is configured) for a TimesTen database and enforce predefined behaviors of particular cache group types. We refer to this user as the <a id="sthref143"></a>cache administration user.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Each TimesTen database can be managed by only a single cache administration user on the Oracle database. However, a single cache administration user can manage multiple TimesTen databases. You can specify one or more cache administration users where each manages one or more TimesTen databases.
<p>For more details, see <a href="perform.htm#BABEIHEA">&#34;Caching the same Oracle table on two or more TimesTen databases&#34;</a>.</p>
</div>
<p>Designate the tablespace that was created for the <code>timesten</code> user as the default tablespace for the cache administration user. This user creates tables in this tablespace that are used to store information about the cache environment and its cache groups. Other Oracle Database objects (such change log tables, replication metadata tables, and triggers) are used to enforce the predefined behaviors of autorefresh cache groups and AWT cache groups are created in the same tablespace. To create and manage these objects, the cache administration user must have a high level of privileges.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you create multiple cache administration users, each may use the same or different tablespace as their default tablespace.</div>
<p>See <a href="manage.htm#BABFJHCA">&#34;Managing a caching environment with Oracle Database objects&#34;</a> for a list of Oracle Database tables and triggers owned by the cache administration user.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
An <a id="sthref144"></a><a id="sthref145"></a>autorefresh cache group refers to a read-only cache group or a user managed cache group that uses the <code>AUTOREFRESH MODE INCREMENTAL</code> cache group attribute.</div>
<div id="TTCAC175" class="example">
<p class="titleinexample"><a id="sthref146"></a>Example 3-3 Creating the cache administration user</p>
<p>As the <code>sys</code> user, create a cache administration user <code>cacheuser</code>. In the following example, the default tablespace for the <code>cacheuser</code> user is <code>cachetblsp</code>.</p>
<p>Use SQL*Plus to create the cache administration user:</p>
<pre>SQL&gt; <a id="sthref147"></a>CREATE USER cacheuser IDENTIFIED BY oracle
  2  DEFAULT TABLESPACE cachetblsp QUOTA UNLIMITED ON cachetblsp;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BCFGJFIA"></a>
<div id="TTCAC176" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref148"></a><a id="sthref149"></a>Grant privileges to the Oracle database users</h3>
<p>The cache administration user must be granted a high level of privileges depending on the cache group types created and the operations performed on these cache groups. You can run the SQL*Plus script <code><span class="codeinlineitalic">TimesTen_install_dir</span></code><code>/oraclescripts/grantCacheAdminPrivileges.sql</code> as the <code>sys</code> user to grant the cache administration user the minimum set of privileges required to perform cache grid and cache group operations. For more information on this SQL script, see <a href="#BCFJJCFJ">&#34;Automatically create Oracle Database objects used to manage data caching&#34;</a>.</p>
<p>The entire list of privileges required for this user for each cache operation are listed in the first column of <a href="summary.htm#BABIHIFI">Table A-1</a> that is detailed in <a href="summary.htm#BABFGBHA">&#34;Required privileges for the cache administration user and the cache manager user&#34;</a>.</p>
</div>
<!-- class="sect2" -->
<a id="BCFJJCFJ"></a>
<div id="TTCAC178" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Automatically <a id="sthref150"></a><a id="sthref151"></a>create Oracle Database objects used to manage data caching</h3>
<p>TimesTen can automatically create Oracle Database objects owned by the cache administration user, such as cache and replication metadata tables, change log tables, and triggers when particular cache environment, cache group, and cache grid operations are performed. Some of these objects are used to store information about TimesTen databases that are associated with a particular cache grid. Other objects are used to enforce the predefined behaviors of autorefresh cache groups and AWT cache groups.</p>
<p>These Oracle Database objects are automatically created if the cache administration user has been granted the required privileges by running the SQL*Plus script <code><span class="codeinlineitalic">TimesTen_install_dir</span></code><code>/oraclescripts/grantCacheAdminPrivileges.sql</code> as the <code>sys</code> user. The set of required privileges include <code>CREATE SESSION</code>, <code>RESOURCE</code>, <code>CREATE ANY TRIGGER</code>, and the <code>TT_CACHE_ADMIN_ROLE</code> role. The cache administration user name is passed as an argument to the <code>grantCacheAdminPrivileges.sql</code> script.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Alternatively, you can manually create these objects as described in <a href="#BCFHCBJE">&#34;Manually create Oracle Database objects used to manage data caching&#34;</a> before performing any cache grid or cache group operations if, for security purposes, you do not want to grant the <code>RESOURCE</code> or <code>CREATE ANY TRIGGER</code> privileges to the cache administration user required to automatically create these tables and triggers.</div>
<p>In addition to the privileges granted to the cache administration user by running the <code>grantCacheAdminPrivileges.sql</code> script, this user may also need to be granted privileges such as <code>SELECT</code> or <code>INSERT</code> on the cached Oracle Database tables depending on the types of cache groups you create, and the operations that you perform on the cache groups and their cache tables. See <a href="summary.htm#BABIHIFI">Table A-1</a> for a complete list of privileges that need to be granted to the cache administration user in order to perform particular cache grid, cache group, and cache table operations.</p>
<div id="TTCAC179" class="example">
<p class="titleinexample"><a id="sthref152"></a>Example 3-4 Granting privileges to automatically create Oracle Database objects<a id="sthref153"></a><a id="sthref154"></a></p>
<p>As the <code>sys</code> user, run the <code>grantCacheAdminPrivileges.sql</code> script to grant privileges to the cache administration user to automatically create Oracle Database objects used to manage caching Oracle Database data in a TimesTen database. In the following example, the cache administration user name is <code>cacheuser</code>.</p>
<p>Use SQL*Plus to run the <code>grantCacheAdminPrivileges.sql</code> script:</p>
<pre>SQL&gt; @grantCacheAdminPrivileges &#34;cacheuser&#34;
SQL&gt; exit
</pre></div>
<!-- class="example" -->
<p>For example, with autorefresh cache groups, the Oracle Database objects used to enforce the predefined behaviors of these cache group types are automatically created if the objects do not already exist and one of the following occurs:</p>
<ul>
<li>
<p>The cache group is created with its autorefresh state set to <code>PAUSED</code> or <code>ON</code>.</p>
</li>
<li>
<p>The cache group is created with its autorefresh state set to <code>OFF</code> and then altered to either <code>PAUSED</code> or <code>ON</code>.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BCFHCBJE"></a>
<div id="TTCAC180" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Manually <a id="sthref155"></a><a id="sthref156"></a><a id="sthref157"></a>create Oracle Database objects used to manage data caching</h3>
<p>The cache administration user requires the <code>RESOURCE</code> privilege to automatically create the Oracle Database objects used to:</p>
<ul>
<li>
<p>Store information about TimesTen databases that are associated with a particular cache environment, including a cache grid if one is configured.</p>
</li>
<li>
<p>Enforce the predefined behaviors of autorefresh cache groups. In this case, the cache administration user also requires the <code>CREATE ANY TRIGGER</code> privilege to automatically create these Oracle Database objects.</p>
</li>
<li>
<p>Enforce the predefined behaviors of AWT cache groups.</p>
</li>
</ul>
<p>For security purposes, if you do not want to grant the <code>RESOURCE</code> and <code>CREATE ANY TRIGGER</code> privileges to the cache administration user required to automatically create the Oracle Database objects, you can manually create these objects.</p>
<p>To manually create the Oracle Database tables and triggers used to enforce the predefined behaviors of particular cache group types, run the SQL*Plus script <code><span class="codeinlineitalic">TimesTen_install_dir</span></code><code>/oraclescripts/initCacheAdminSchema.sql</code> as the <code>sys</code> user. These objects must be created before you can create autorefresh cache groups and AWT cache groups. The cache administration user name is passed as an argument to the <code>initCacheAdminSchema.sql</code> script.</p>
<p>The <code>initCacheAdminSchema.sql</code> script also grants a minimal set of required privileges including <code>CREATE SESSION</code> and the <code>TT_CACHE_ADMIN_ROLE</code> role to the cache administration user. In addition to the privileges granted to the cache administration user by running the <code>initCacheAdminSchema.sql</code> script, this user may also need to be granted privileges such as <code>SELECT</code> or <code>INSERT</code> on the cached Oracle Database tables depending on the types of cache groups you create and the operations that you perform on the cache groups and their cache tables. See <a href="summary.htm#BABIHIFI">Table A-1</a> for a complete list of privileges that need to be granted to the cache administration user in order to perform particular cache grid, cache group, and cache table operations.</p>
<p>To manually create the Oracle Database tables used to store information about TimesTen databases that are associated with a particular cache grid, run the SQL*Plus script <code><span class="codeinlineitalic">TimesTen_install_dir</span></code><code>/oraclescripts/initCacheGridSchema.sql</code> as the <code>sys</code> user. These tables must be created before you can create a cache grid. The cache administration user name and the name of the cache grid that you create are passed as arguments to the <code>initCacheGridSchema.sql</code> script.</p>
<div id="TTCAC181" class="example">
<p class="titleinexample"><a id="sthref158"></a>Example 3-5 Manually creating Oracle Database objects used to manage <a id="sthref159"></a><a id="sthref160"></a>caching data<a id="sthref161"></a><a id="sthref162"></a></p>
<p>As the <code>sys</code> user, run the <code>initCacheAdminSchema.sql</code> script to manually create Oracle Database objects used to enforce the predefined behaviors of autorefresh cache groups and AWT cache groups, and grant a limited set of privileges to the cache administration user. Then, run the <code>initCacheGridSchema.sql</code> script to manually create Oracle Database objects used to store information about TimesTen databases associated with a particular cache grid. In the following example, the cache administration user name is <code>cacheuser</code> and the cache grid name is <code>ttGrid</code>.</p>
<p>Use SQL*Plus to run the <code>initCacheAdminSchema.sql</code> and <code>initCacheGridSchema.sql</code> scripts:</p>
<pre>SQL&gt; @initCacheAdminSchema &#34;cacheuser&#34;
SQL&gt; @initCacheGridSchema &#34;cacheuser&#34; &#34;ttGrid&#34;
SQL&gt; exit
</pre></div>
<!-- class="example" -->
<p>Other Oracle Database objects associated with Oracle Database tables that are cached in an autorefresh cache group are needed to enforce the predefined behaviors of these cache group types. See <a href="define.htm#CHDGGFAB">&#34;Manually creating Oracle Database objects for autorefresh cache groups&#34;</a> for details about how to create these additional objects after you create the cache group.</p>
<p>To <a id="sthref163"></a>view a list of the Oracle Database objects created and used by TimesTen to manage the caching of Oracle Database data, execute the following query in SQL*Plus as the <code>sys</code> user:</p>
<pre>SQL&gt; SELECT owner, object_name, object_type FROM all_objects WHERE object_name 
  2  LIKE &#39;TT\___%&#39; ESCAPE &#39;\&#39;;
</pre>
<p>The query returns a list of tables, indexes, and triggers owned by either the <code>timesten</code> user or the cache administration user.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BCFGAHAD"></a>
<div id="TTCAC182" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Configuring a TimesTen database to cache Oracle Database data</h2>
<p>The following sections describe the operations that must be performed on the TimesTen database by the instance administrator or the cache manager user:</p>
<ul>
<li>
<p><a href="#BCFHIFAD">Define a DSN for the TimesTen database</a></p>
</li>
<li>
<p><a href="#BCFFABDH">Create the TimesTen users</a></p>
</li>
<li>
<p><a href="#BCFFGJCD">Grant privileges to the TimesTen users</a></p>
</li>
<li>
<p><a href="#BCFFCGHH">Set the cache administration user name and password</a></p>
</li>
</ul>
<a id="BCFHIFAD"></a>
<div id="TTCAC183" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Define a DSN for the TimesTen database</h3>
<p>A TimesTen database that caches data from an Oracle database can be referenced by either a system DSN or a user DSN. See <a class="olink TTOPR120" href="../TTOPR/using.htm#TTOPR120">&#34;Managing TimesTen Databases&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span> for more information about creating TimesTen DSNs.</p>
<p>When creating a DSN for a TimesTen database that caches data from an Oracle database, pay special attention to the settings of the following connection attributes. All of these connection attributes can be set in a Data Manager DSN or a connection string, unless otherwise stated.</p>
<ul>
<li>
<p><a id="sthref164"></a><a id="sthref165"></a><code>PermSize</code> specifies the allocated size of the database&#39;s permanent region in MB. Set this value to at least 32 MB.</p>
</li>
<li>
<p><a id="sthref166"></a><a id="sthref167"></a><code>OracleNetServiceName</code> must be set to the net service name of the Oracle database instance.</p>
<p>On Microsoft Windows systems, the net service name of the Oracle database instance is specified in the <span class="bold">Oracle Net Service Name</span> field of the TimesTen Cache tab within the TimesTen ODBC Setup dialog box.</p>
</li>
<li>
<p><a id="sthref168"></a><a id="sthref169"></a><code>DatabaseCharacterSet</code> must be set to the Oracle database character set.</p>
<p>You can determine the <a id="sthref170"></a>Oracle database character set by executing the following query in SQL*Plus as any user:</p>
<pre>SQL&gt; SELECT value FROM nls_database_parameters
   2 WHERE parameter=&#39;NLS_CHARACTERSET&#39;;
</pre></li>
<li>
<p><a id="sthref171"></a><a id="sthref172"></a><code>UID</code> specifies the name of a cache user, such as the cache manager user, that has the same name as a companion Oracle Database user who can access the cached Oracle Database tables. The <code>UID</code> connection attribute can be specified in a Data Manager DSN, a client DSN, or a connection string.</p>
</li>
<li>
<p><a id="sthref173"></a><a id="sthref174"></a><code>PWD</code> specifies the password of the TimesTen user specified in the <code>UID</code> connection attribute. The <code>PWD</code> connection attribute can be specified in a Data Manager DSN, a client DSN, or a connection string.</p>
</li>
<li>
<p><a id="sthref175"></a><a id="sthref176"></a><code>OraclePWD</code> specifies the password of the companion Oracle Database user that has the same name as the TimesTen user specified in the <code>UID</code> connection attribute and can access the cached Oracle Database tables.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
See <a href="#BCFFABDH">&#34;Create the TimesTen users&#34;</a> for more details on the cache manager user and its companion Oracle Database user.</div>
</li>
<li>
<p><a id="sthref177"></a><a id="sthref178"></a><code>PassThrough</code> can be set to control whether statements are to be executed in the TimesTen database or passed through to be executed in the Oracle database. See <a href="operations.htm#CHDDEJAE">&#34;Setting a passthrough level&#34;</a>.</p>
</li>
<li>
<p><a id="sthref179"></a><a id="sthref180"></a><code>LockLevel</code> must be set to its default of 0 (row-level locking) because TimesTen Application-Tier Database Cache does not support database-level locking.</p>
</li>
<li>
<p><a id="sthref181"></a><a id="sthref182"></a><code>TypeMode</code> must be set to its default of 0 (Oracle Database type mode).</p>
</li>
<li>
<p><code><a id="sthref183"></a><a id="sthref184"></a>ReplicationApplyOrdering</code> and <code><a id="sthref185"></a><a id="sthref186"></a>CacheAWTParallelism</code> control parallel propagation of changes to TimesTen cache tables in an AWT cache group to the corresponding Oracle Database tables. See <a href="define.htm#CHDEIHHI">&#34;Configuring parallel propagation to Oracle Database tables&#34;</a>.</p>
</li>
<li>
<p><code><a id="sthref187"></a>CacheGridEnable</code> configures whether you will create a cache grid to manage global cache groups. Set to 0 if you are not planning on using a cache grid; set to 1 if you are planning on using a cache grid.</p>
</li>
</ul>
<div id="TTCAC184" class="example">
<p class="titleinexample"><a id="BCFFFJDB"></a>Example 3-6 <a id="sthref188"></a>DSN for a TimesTen database that caches data from an Oracle database</p>
<p>The following example is the definition of the <code>cachealone1</code> DSN that references the first standalone TimesTen database that becomes a member of the <code>ttGrid</code> cache grid:</p>
<pre>[cachealone1]
DataStore=/users/OracleCache/alone1
PermSize=64
OracleNetServiceName=orcl
DatabaseCharacterSet=WE8ISO8859P1
CacheGridEnable=1
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BCFFABDH"></a>
<div id="TTCAC185" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Create the TimesTen users</h3>
<p>First, you must create a user who performs cache grid (if one is configured) and cache group operations. We refer to this user as the <a id="sthref189"></a><span class="italic">cache manager user</span>. The TimesTen cache manager user must have the same name as a companion Oracle Database user that can access the cached Oracle Database tables. For example, the companion Oracle Database user must have privileges to select from and update the cached Oracle Database tables. The companion Oracle Database user can be the cache administration user, a schema user, or some other existing user. For ease of use, making the cache administration user be the companion Oracle Database user of the cache manager user is preferable; however, if you are concerned with the high level of privileges assigned to the cache administration user, then choose another Oracle Database user as the companion Oracle user. The password of the cache manager user can be different than the password of the companion Oracle Database user with the same name.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can create multiple cache manager users on a TimesTen database, such as one for each TimesTen DBA. However, you can only define a single cache administration user on the Oracle database for this particular TimesTen database. (You can use the same cache administration user for all TimesTen databases that connect to the Oracle database or define a separate cache administration user for each TimesTen database.) If you create multiple cache manager users, one or more of these users can use the cache administration user as its companion Oracle user.</div>
<p>The <a id="sthref190"></a><a id="sthref191"></a>cache manager user creates and configures the cache grid, if one is configured, and creates the cache groups. It may perform operations such as loading or refreshing a cache group although these operations can be performed by any TimesTen user that has sufficient privileges. The cache manager user can also monitor various aspects of the caching environment, such as the grid itself or asynchronous operations that are performed on cache groups such as autorefresh.</p>
<p>Then, you must create a user with the same name as an Oracle Database schema user for each schema user who owns or will own Oracle Database tables to be cached in the TimesTen database. We refer to these users as <a id="sthref192"></a><a id="sthref193"></a><a id="sthref194"></a><span class="italic">cache table users</span>, because the TimesTen cache tables are to be owned by these users. Therefore, the owner and name of a TimesTen cache table is the same as the owner and name of the corresponding cached Oracle Database table. The password of a cache table user can be different than the password of the Oracle Database schema user with the same name.</p>
<p>Operations on a cache group or a cache table, such as loading a cache group or updating a cache table, can be performed by any TimesTen user that has sufficient privileges. In the examples throughout this guide, the cache manager user performs these types of operations although these operations can be performed by another user, such as a cache table user, that has the required privileges. If these operations are to be performed by a TimesTen user other than the cache manager user, the other user must have the same name as a companion Oracle Database user that can select from and update the cached Oracle Database tables. Connect to the TimesTen database specifying that user&#39;s name in the <code>UID</code> connection attribute, and supply the corresponding TimesTen and Oracle Database passwords in the <code>PWD</code> and <code>OraclePWD</code> connection attributes, respectively, to perform operations on a cache group or cache table.</p>
<div id="TTCAC186" class="example">
<p class="titleinexample"><a id="sthref195"></a>Example 3-7 Creating the TimesTen users</p>
<p>In the following <code>ttIsql</code> utility example, create the TimesTen database by connecting to the <code>cachealone1</code> DSN as the instance administrator. Then create the cache manager user <code>cacheuser</code> whose name, in this example, is the same as the cache administration user, who will also act as the cache manager&#39;s companion Oracle user. Then, create a cache table user <code>oratt</code> whose name is the same as the Oracle Database schema user who is to own the Oracle Database tables to be cached in the TimesTen database.</p>
<pre>% ttIsql cachealone1
Command&gt; <a id="sthref196"></a>CREATE USER cacheuser IDENTIFIED BY timesten;
Command&gt; <a id="sthref197"></a>CREATE USER oratt IDENTIFIED BY timesten;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BCFFGJCD"></a>
<div id="TTCAC187" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Grant privileges to the TimesTen users</h3>
<p>The privileges that the TimesTen users require depend on the types of cache groups you create and the operations that you perform on the cache groups. All of the privileges required for the TimesTen cache manager user for each cache operation are listed in the second column in <a href="summary.htm#BABIHIFI">Table A-1</a>.</p>
<div id="TTCAC188" class="example">
<p class="titleinexample"><a id="BCFJHCHA"></a>Example 3-8 Granting privileges to the cache manager user<a id="sthref198"></a></p>
<p>The <code>cacheuser</code> cache manager user requires privileges to perform the following operations:</p>
<ul>
<li>
<p>Set the cache administration user and password (<code>CACHE_MANAGER</code>).</p>
</li>
<li>
<p>Create and associate the TimesTen database with a cache grid (<code>CACHE_MANAGER</code>).</p>
</li>
<li>
<p>Start the cache agent and replication agent processes on the TimesTen database (<code>CACHE_MANAGER</code>).</p>
</li>
<li>
<p>Attach the TimesTen database to the cache grid (<code>CACHE_MANAGER</code>).</p>
</li>
<li>
<p>Create cache groups to be owned by the cache manager user (<code>CREATE CACHE GROUP</code>, inherited by the <code>CACHE_MANAGER</code> privilege; <code>CREATE ANY TABLE</code> to create the underlying cache tables which are to be owned by the <code>oratt</code> cache table user).</p>
</li>
</ul>
<p>As the instance administrator, use the <code>ttIsql</code> utility to grant the <code>cacheuser</code> cache manager user the required privileges:</p>
<pre>Command&gt; GRANT CREATE SESSION, CACHE_MANAGER, CREATE ANY TABLE TO cacheuser;
Command&gt; exit
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BCFFCGHH"></a>
<div id="TTCAC189" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Set the cache administration user name and password</h3>
<p>You must set the cache administration user name and password in the TimesTen database before any cache grid or cache group operation can be issued with the <code>ttCacheUidPwdSet</code> built-in procedure. The cache agent connects to the Oracle database as this user to create and maintain Oracle Database objects that store information used to manage a cache grid and enforce predefined behaviors of particular cache group types. In addition, both the cache and replication agents connect to the Oracle database with the credentials set with the <code>ttCacheUidPwdSet</code> built-in procedure to manage Oracle database operations.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When you connect to the TimesTen database to work with AWT or read-only cache groups, TimesTen uses the credentials set with the <code>ttCacheUidPwdSet</code> built-in procedure when connecting to the Oracle database on behalf of these cache groups.
<p>When you connect to the TimesTen database to work with SWT or user managed cache groups or passthrough operations, TimesTen connects to the Oracle database using the current user&#39;s credentials as the user name and the <code>OraclePwd</code> connection attribute as the Oracle password. Thus, the correct user name and Oracle database password that should be used for connecting to the Oracle database must be set correctly in the connection string or with the connection attributes.</p>
</div>
<p>The cache administration user name and password need to be set only once in each TimesTen database that caches Oracle Database data unless it needs to be changed. For example, if you modify the password of the cache administration user, if the TimesTen database is destroyed and re-created, or if the cache administration user name is dropped and re-created in the Oracle database, the cache administration user name and password must be set again.</p>
<p>The cache administration user name cannot be changed if there are cache groups in the database. The cache groups must be dropped before you can drop and recreate the cache administration user. See <a href="manage.htm#CACGGEFA">&#34;Changing cache user names and passwords&#34;</a> for more details.</p>
<div id="TTCAC190" class="example">
<p class="titleinexample"><a id="sthref199"></a>Example 3-9 Setting the cache administration user name and password<a id="sthref200"></a><a id="sthref201"></a><a id="sthref202"></a></p>
<p>The cache administration user name and password can be set programmatically by calling the <code>ttCacheUidPwdSet</code> built-in procedure after connecting as the cache manager user:</p>
<pre>% ttIsql &#34;DSN=cachealone1;UID=cacheuser;PWD=timesten;OraclePWD=oracle&#34;
Command&gt; call ttCacheUidPwdSet(&#39;cacheuser&#39;,&#39;oracle&#39;);
</pre></div>
<!-- class="example" -->
<p>It can also be set from a command line by running a <a id="sthref203"></a><code>ttAdmin -cacheUidPwdSet</code> utility command as a TimesTen external user with the <code>CACHE_MANAGER</code> privilege:</p>
<pre>% ttAdmin -cacheUidPwdSet -cacheUid cacheuser -cachePwd oracle cachealone1
</pre>
<p>If you do not specify the <code>-cachePwd</code> option, the <code>ttAdmin</code> utility prompts for the cache administration user&#39;s password.</p>
<p>For more information about the utility, see <a class="olink TTREF321" href="../TTREF/util.htm#TTREF321">&#34;ttAdmin&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABFDEHG"></a>
<div id="TTCAC535" class="sect1">
<h2 class="sect1">Configuring data management</h2>
<p>You can configure how TimesTen manages cached data either locally in a single TimesTen database or globally across multiple TimesTen in-memory databases.</p>
<ul>
<li>
<p>Manage data locally, where each TimesTen in-memory database operates separately from other TimesTen in-memory databases. While this option is simpler, TimesTen does not manage data coherence across all TimesTen in-memory databases. For more details, see <a href="#CHDDCEEJ">&#34;Managing data locally&#34;</a>.</p>
</li>
<li>
<p>Manage data globally across multiple TimesTen in-memory databases with a cache grid. This is the default method. A cache grid is a collection of TimesTen Cache databases that collectively manage application data located within global cache groups. A <a id="sthref204"></a>cache grid contains a set of distributed TimesTen in-memory databases that work together to cache data from an Oracle database and guarantee cache coherence for global cache groups located on these TimesTen databases. See <a href="#BCFCGCBJ">&#34;Configuring a cache grid&#34;</a> for more information.</p>
</li>
</ul>
<a id="CHDDCEEJ"></a>
<div id="TTCAC536" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Managing data locally</h3>
<p>If you are not planning to use global cache groups, you do not need to create a cache grid. In this case, set the <a id="sthref205"></a><a id="sthref206"></a><code>CacheGridEnable</code> connection attribute to 0, which can be configured in the DSN as described in <a href="#BCFHIFAD">&#34;Define a DSN for the TimesTen database&#34;</a>.</p>
<p>This connection attribute states that you will not use global cache groups. Once set, TimesTen does not require you to create a cache grid or associate the TimesTen database with the grid before cache groups can be created within that database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
While you may have multiple TimesTen in-memory databases that interact with the same Oracle database, they will each operate independently. Thus, any data cached in separate TimesTen databases will each interact with the Oracle database independently.
<p>Use a cache grid if you want to scale data across several TimesTen databases with read and write data consistency and predictable latency for their database transactions.</p>
</div>
<p>With this option, you cannot create global cache groups within that database. If, at some point in the future, you decide to use global cache groups within a cache grid, perform the following:</p>
<ol>
<li>
<p>Drop all existing cache groups.</p>
</li>
<li>
<p>Create the cache grid and associate the TimesTen in-memory database as a member, as described in <a href="concepts.htm#BABEJFFC">&#34;Overview of a cache grid&#34;</a>.</p>
</li>
<li>
<p>Recreate all pre-existing cache groups.</p>
</li>
</ol>
<p>See <a href="define.htm#CHDCJADE">&#34;Global cache groups&#34;</a> for more information about global cache groups.</p>
</div>
<!-- class="sect2" -->
<a id="BCFCGCBJ"></a>
<div id="TTCAC191" class="sect2">
<h3 class="sect2">Configuring a cache grid</h3>
<p>An Oracle Database table cannot be cached in separate cache groups within the same TimesTen database. However, the table can be cached in separate cache groups within different TimesTen databases.</p>
<p>A TimesTen <a id="sthref207"></a>cache grid provides users with Oracle databases a means to horizontally scale out cache groups across multiple systems with read and write data consistency across the TimesTen databases and predictable latency for database transactions. A cache grid contains one or more grid members that collectively manage application data using the relational data model. A <a id="sthref208"></a>grid member is either a standalone TimesTen database or an active standby pair that consists of at least two replicated TimesTen databases.</p>
<p>Each database of a grid member is called a <a id="sthref209"></a>grid node. A node is a single TimesTen database that is either a standalone database, or the active database or standby database of an active standby pair. Therefore, a grid member is composed of one or two nodes.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
See <a class="olink TTREP231" href="../TTREP/standbycache.htm#TTREP231">&#34;Administering an Active Standby Pair with Cache Groups&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Replication Guide</span> for more information about replicating cache tables.</div>
<p>Grid members can reside on the same system or on different systems. If the grid members reside across different systems, the systems must be connected to each other in a TCP/IP private network. Each system must have the same machine architecture, operating system version, platform, and bit version. The TimesTen major release number of all grid members must be the same.</p>
<p>A TimesTen database that is or is part of a grid member can contain local and global cache groups as well as explicitly loaded and dynamic cache groups.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
See <a href="define.htm#CHDBACDC">&#34;Dynamic cache groups&#34;</a> for more information about dynamic cache groups.
<p>See <a href="define.htm#CHDCJADE">&#34;Global cache groups&#34;</a> for more information about global cache groups.</p>
</div>
<p>A cache grid can be associated with only one Oracle database. A TimesTen database can be a member of only one cache grid. An Oracle database can be associated with more than one cache grid and each grid can be administered by a different cache administration user. A cache grid has no association with other cache grids.</p>
<p>The following sections describe the operations that must be performed on the TimesTen database by the cache manager user:</p>
<ul>
<li>
<p><a href="#BCFHCBHC">Modify the PROCESSES system parameter for ten or more grid nodes</a></p>
</li>
<li>
<p><a href="#BCFEFDDF">Create a cache grid</a></p>
</li>
<li>
<p><a href="#BCFJGIJC">Associate a TimesTen database with a cache grid</a></p>
</li>
</ul>
<a id="BCFHCBHC"></a>
<div id="TTCAC418" class="sect3">
<h4 class="sect3">Modify the PROCESSES system parameter for ten or more grid nodes<a id="sthref210"></a><a id="sthref211"></a></h4>
<p>If you are planning a grid with ten or more nodes, modify the <code>PROCESSES</code> Oracle Database system parameter. Use this guideline:</p>
<pre>PROCESSES &gt;= 10*<span class="italic">GridMembers</span> + <span class="italic">DLConnections </span>+ <span class="italic">OraBackgroundProcesses</span>
</pre>
<p>where:</p>
<ul>
<li>
<p><span class="italic">GridMembers</span> = number of grid members</p>
</li>
<li>
<p><span class="italic">DLConnections</span> = number of dynamic load connections</p>
</li>
<li>
<p><span class="italic">OraBackgroundProcesses</span> = number of Oracle Database background processes</p>
</li>
</ul>
<p>The number of dynamic load connections is determined by how many sessions are to have dynamic cache group operations.</p>
<p>For more information about modifying an Oracle Database system parameter, see <a class="olink REFRN00102" href="../REFRN/GUID-4C578B21-DE2B-4210-8EB7-EF28D36CC1CB.htm#REFRN00102">&#34;Changing Parameter Values in a Parameter File&#34;</a> in <span class="italic">Oracle Database Reference</span>. For more information about Oracle Database background processes, see <a class="olink REFRN104" href="../REFRN/GUID-86184690-5531-405F-AA05-BB935F57B76D.htm#REFRN104">&#34;Background Processes&#34;</a> in <span class="italic">Oracle Database Reference</span>.</p>
</div>
<!-- class="sect3" -->
<a id="BCFEFDDF"></a>
<div id="TTCAC192" class="sect3">
<h4 class="sect3">Create a cache grid<a id="sthref212"></a><a id="sthref213"></a><a id="sthref214"></a></h4>
<p>The examples in the rest of this guide create a cache grid <code>ttGrid</code> that contains three grid members: two standalone TimesTen databases and an active standby pair consisting of three TimesTen databases. This chapter shows how to associate one of the standalone databases with the cache grid. Subsequent chapters show how to create the other standalone database and the active standby pair, and how to associate those members with the grid.</p>
<p>See <a href="#BCFFFJDB">Example 3-6</a> for the DSN definition of the first standalone TimesTen database.</p>
<p>You can create a cache grid from any of the standalone databases, or from either the active or standby database of the active standby pair. A cache grid is created only once from any one of the grid members.</p>
<div id="TTCAC193" class="example">
<p class="titleinexample"><a id="sthref215"></a>Example 3-10 Creating a cache grid</p>
<p>Create the <code>ttGrid</code> cache grid from the first standalone database by calling the <code>ttGridCreate</code> built-in procedure as the cache manager user:</p>
<pre>Command&gt; call ttGridCreate(&#39;ttGrid&#39;);
</pre></div>
<!-- class="example" -->
<p>All the databases in these examples, except for the read-only subscriber database of the active standby pair, are associated with the <code>ttGrid</code> cache grid.</p>
<p>If you manually created the Oracle Database objects used to store information about TimesTen databases that are associated with a particular cache grid as described in <a href="#BCFHCBJE">&#34;Manually create Oracle Database objects used to manage data caching&#34;</a>, you do not need to call <code>ttGridCreate</code> because the grid, in effect, was created by running the <code>initCacheGridSchema.sql</code> script.</p>
<p>You can associate a TimesTen database with a cache grid before creating cache groups in the database. If you do not want to use a cache grid, you can set the <a id="sthref216"></a><a id="sthref217"></a><code>CacheGridEnable</code> connection attribute to 0 so that you do not have to create a cache grid and associate the TimesTen database with the grid before cache groups can be created within that database.</p>
<p>See <a href="define.htm#CHDCJADE">&#34;Global cache groups&#34;</a> for more information about global cache groups.</p>
<p><code>CacheGridEnable</code> is set to 1 by default.</p>
</div>
<!-- class="sect3" -->
<a id="BCFJGIJC"></a>
<div id="TTCAC194" class="sect3">
<h4 class="sect3">Associate a TimesTen database with a cache grid<a id="sthref218"></a><a id="sthref219"></a><a id="sthref220"></a></h4>
<p>All standalone databases, and the active and standby databases of the active standby pair must be associated with a cache grid before you can create cache groups within those databases.</p>
<div id="TTCAC195" class="example">
<p class="titleinexample"><a id="sthref221"></a>Example 3-11 Associating a TimesTen database with a cache grid</p>
<p>Associate the first standalone database to the <code>ttGrid</code> cache grid by calling the <code>ttGridNameSet</code> built-in procedure as the cache manager user:</p>
<pre>Command&gt; call ttGridNameSet(&#39;ttGrid&#39;);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BCFJHFEI"></a>
<div id="TTCAC196" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Testing the connectivity between the TimesTen and Oracle databases<a id="sthref222"></a></h2>
<p>To test the connectivity between the TimesTen and Oracle databases, set the passthrough level to 3 and execute the following query, to be processed on the Oracle database, as the cache manager user:</p>
<pre>Command&gt; passthrough 3;
Command&gt; SELECT * FROM V$VERSION;
Command&gt; passthrough 0;
</pre>
<p>If connectivity has been successfully established, the query returns the version of the Oracle database. If it does not, check the following for correctness:</p>
<ul>
<li>
<p>The Oracle Net service name set in the <code>OracleNetServiceName</code> connection attribute and the state of the Oracle database server</p>
</li>
<li>
<p>The settings of the shared library search path environment variable such as <code>LD_LIBRARY_PATH</code> or <code>SHLIB_PATH</code></p>
</li>
<li>
<p>The setting of the cache administration user name in the TimesTen database</p>
</li>
</ul>
<div id="TTCAC197" class="example">
<p class="titleinexample"><a id="sthref223"></a>Example 3-12 Determining the cache administration user name setting</p>
<p>The cache administration user name setting can be returned programmatically by calling the <code>ttCacheUidGet</code> built-in procedure as the cache manager user:</p>
<pre>Command&gt; <a id="sthref224"></a><a id="sthref225"></a><a id="sthref226"></a>call ttCacheUidGet;
</pre>
<p>It can also be returned from a command line by running a <code><a id="sthref227"></a>ttAdmin -cacheUidGet</code> utility command as a TimesTen external user with the <code>CACHE_MANAGER</code> privilege:</p>
<pre>% ttAdmin -cacheUidGet cachealone1
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="BCFIDDJA"></a>
<div id="TTCAC198" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Managing the cache agent</h2>
<p>The cache agent is a TimesTen process that performs cache operations such as loading a cache group and autorefresh, as well as manages Oracle Database objects used to enforce the predefined behaviors of particular cache group types.</p>
<div id="TTCAC199" class="example">
<p class="titleinexample"><a id="sthref228"></a>Example 3-13 Starting the cache agent<a id="sthref229"></a><a id="sthref230"></a><a id="sthref231"></a></p>
<p>The cache agent can be manually started programmatically by calling the <code>ttCacheStart</code> built-in procedure as the cache manager user:</p>
<pre>Command&gt; call ttCacheStart;
</pre>
<p>It can also be started from a command line by running a <code>ttAdmin -cacheStart</code> utility command as a TimesTen external user with the <code>CACHE_MANAGER</code> privilege:</p>
<pre>% <a id="sthref232"></a>ttAdmin -cacheStart cachealone1
</pre></div>
<!-- class="example" -->
<div id="TTCAC200" class="example">
<p class="titleinexample"><a id="sthref233"></a>Example 3-14 Stopping the cache agent<a id="sthref234"></a><a id="sthref235"></a><a id="sthref236"></a></p>
<p>The cache agent can be manually stopped programmatically by calling the <code>ttCacheStop</code> built-in procedure as the cache manager user:</p>
<pre>Command&gt; call ttCacheStop;
</pre>
<p>It can also be stopped from a command line by running a <code>ttAdmin -cacheStop</code> utility command as a TimesTen external user with the <code>CACHE_MANAGER</code> privilege:</p>
<pre>% <a id="sthref237"></a>ttAdmin -cacheStop cachealone1
</pre>
<p>The <code>ttCacheStop</code> built-in procedure has an optional parameter and the <code>ttAdmin -cacheStop</code> utility command has an option <code>-stopTimeout</code> that specifies how long the TimesTen main daemon process waits for the cache agent to stop. If the cache agent does not stop within the specified timeout period, the TimesTen daemon stops the cache agent. The default cache agent stop timeout is 100 seconds. A value of 0 specifies to wait indefinitely.</p>
<p>Do not stop the cache agent immediately after you have dropped or altered an autorefresh cache group. Instead, wait for at least two minutes to allow the cache agent to clean up Oracle Database objects such as change log tables and triggers that were created and used to manage the cache group.</p>
</div>
<!-- class="example" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
The TimesTen X/Open XA and Java Transaction API (JTA) implementations do not work with TimesTen Application-Tier Database Cache. The start of any XA or JTA transaction fails if the cache agent is running.</div>
<a id="BCFHEBIF"></a>
<div id="TTCAC201" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Set a cache agent start policy</h3>
<p>A <a id="sthref238"></a>cache agent start policy determines how and when the cache agent process starts on a TimesTen database. The cache agent start policy can be set to:</p>
<ul>
<li>
<p><code>manual</code></p>
</li>
<li>
<p><code>always</code></p>
</li>
<li>
<p><code>norestart</code></p>
</li>
</ul>
<p>The default start policy is <code>manual</code>, which means the cache agent must be started manually by calling the <code>ttCacheStart</code> built-in procedure or running a <code>ttAdmin -cacheStart</code> utility command. To manually stop a running cache agent process, call the <code>ttCacheStop</code> built-in procedure or run a <code>ttAdmin -cacheStop</code> utility command.</p>
<p>When the start policy is set to <code>always</code>, the cache agent starts automatically when the TimesTen main daemon process starts. With the <code>always</code> start policy, the cache agent cannot be stopped when the main daemon is running unless the start policy is first changed to either <code>manual</code> or <code>norestart</code>. Then issue a manual stop by calling the <code>ttCacheStop</code> built-in procedure or running a <code>ttAdmin -cacheStop</code> utility command.</p>
<p>With the <code>manual</code> and <code>always</code> start policies, the cache agent automatically restarts when the database recovers after a failure such as a database invalidation. If the <a id="sthref239"></a><a id="sthref240"></a><a id="sthref241"></a>database was attached to a cache grid when the failure occurred, it is automatically reattached to the grid when the database recovers.</p>
<p>Setting the cache agent start policy to <code>norestart</code> means the cache agent must be started manually by calling the <code>ttCacheStart</code> built-in procedure or running a <code>ttAdmin -cacheStart</code> utility command, and stopped manually by calling the <code>ttCacheStop</code> built-in procedure or running a <code>ttAdmin -cacheStop</code> utility command.</p>
<p>With the <code>norestart</code> start policy, the cache agent does not automatically restart when the database recovers after a failure such as a database invalidation. You must restart the cache agent manually by calling the <code>ttCacheStart</code> built-in procedure or running a <code>ttAdmin -cacheStart</code> utility command. If the database was attached to a cache grid when the failure occurred, it is not automatically reattached to the grid when the database recovers. You must call the<a id="sthref242"></a><a id="sthref243"></a><a id="sthref244"></a> <code>ttGridAttach</code> built-in procedure to reattach the database to the grid.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
For more details, see <a class="olink TTREF321" href="../TTREF/util.htm#TTREF321">&#34;ttAdmin,&#34;</a> <a class="olink TTREF231" href="../TTREF/proced.htm#TTREF231">&#34;ttCachePolicySet,&#34;</a> <a class="olink TTREF234" href="../TTREF/proced.htm#TTREF234">&#34;ttCacheStart,&#34;</a> <a class="olink TTREF235" href="../TTREF/proced.htm#TTREF235">&#34;ttCacheStop,&#34;</a> and <a class="olink TTREF248" href="../TTREF/proced.htm#TTREF248">&#34;ttGridAttach&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</div>
<div id="TTCAC202" class="example">
<p class="titleinexample"><a id="sthref245"></a>Example 3-15 Setting a cache agent start policy<a id="sthref246"></a><a id="sthref247"></a><a id="sthref248"></a></p>
<p>The cache agent start policy can be set programmatically by calling the <code>ttCachePolicySet</code> built-in procedure as the cache manager user:</p>
<pre>Command&gt; call ttCachePolicySet(&#39;always&#39;);
</pre>
<p>It can also be set from a command line by running a <code>ttAdmin -cachePolicy</code> utility command as a TimesTen external user with the <code>CACHE_MANAGER</code> privilege:</p>
<pre>% <a id="sthref249"></a>ttAdmin -cachePolicy norestart cachealone1
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5343">
<tr>
<td class="cellalignment5350">
<table class="cellalignment5348">
<tr>
<td class="cellalignment5347"><a href="gettingstarted.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5347"><a href="define.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2012, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5352">
<table class="cellalignment5346">
<tr>
<td class="cellalignment5347"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5347"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5347"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5347"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5347"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5347"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>