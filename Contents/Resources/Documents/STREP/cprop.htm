<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-104195"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Configuring%20Queues%20and%20Propagations"></a><title>Configuring Queues and Propagations</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1044"/>
<meta name="dcterms.created" content="2015-02-12T7:14:19Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Streams Replication Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E53118-02"/>
<meta name="dcterms.isVersionOf" content="STREP"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="ccap.htm" title="Previous" type="text/html"/>
<link rel="Next" href="capply.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E53118-02.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/28</span> <!-- End Header -->
<div id="STREP205" class="chapter"><a id="BABEDGHG"></a>
<h1 class="chapter"><span class="secnum">6</span> Configuring Queues and Propagations</h1>
<p><a id="sthref269"></a><a id="sthref270"></a><a id="sthref271"></a><a id="sthref272"></a>The following topics describe configuring queues and propagations:</p>
<ul>
<li>
<p><a href="#i1006170">Creating an ANYDATA Queue</a></p>
</li>
<li>
<p><a href="#BABIDDBA">Creating Oracle Streams Propagations Between ANYDATA Queues</a></p>
</li>
</ul>
<p>Each task described in this chapter should be completed by an Oracle Streams administrator that has been granted the appropriate privileges, unless specified otherwise.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink STRMS003" href="../STRMS/strms_prop.htm#STRMS003"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about queues and propagations</p>
</li>
<li>
<p><a href="prep_rep.htm#BABHEJGG">&#34;Configuring an Oracle Streams Administrator on All Databases&#34;</a></p>
</li>
</ul>
</div>
<a id="i1006170"></a>
<div id="STREP308" class="sect1">
<h2 class="sect1">Creating an ANYDATA Queue<a id="sthref273"></a><a id="sthref274"></a><a id="sthref275"></a></h2>
<p>A queue stores messages in an Oracle Streams environment. Messages can be enqueued, propagated from one queue to another, and dequeued. An <code dir="ltr">ANYDATA</code> queue stores messages whose payloads are of <code dir="ltr">ANYDATA</code> type. Therefore, an <code dir="ltr">ANYDATA</code> queue can store a message with a payload of nearly any type, if the payload is wrapped in an <code dir="ltr">ANYDATA</code> wrapper. Each Oracle Streams capture process, synchronous capture, apply process, and messaging client is associated with one <code dir="ltr">ANYDATA</code> queue, and each Oracle Streams propagation is associated with one <code dir="ltr">ANYDATA</code> source queue and one <code dir="ltr">ANYDATA</code> destination queue.</p>
<p>The easiest way to create an <code dir="ltr">ANYDATA</code> queue is to use the <code dir="ltr">SET_UP_QUEUE</code> procedure in the <code dir="ltr">DBMS_STREAMS_ADM</code> package. This procedure enables you to specify the following settings for the <code dir="ltr">ANYDATA</code> queue it creates:</p>
<ul>
<li>
<p>The queue table for the queue</p>
</li>
<li>
<p>A storage clause for the queue table</p>
</li>
<li>
<p>The queue name</p>
</li>
<li>
<p>A queue user that will be configured as a secure queue user of the queue and granted <code dir="ltr">ENQUEUE</code> and <code dir="ltr">DEQUEUE</code> privileges on the queue</p>
</li>
<li>
<p>A comment for the queue</p>
</li>
</ul>
<p>If the specified queue table does not exist, then it is created. If the specified queue table exists, then the existing queue table is used for the new queue. If you do not specify any queue table when you create the queue, then, by default, <code dir="ltr">streams_queue_table</code> is specified.</p>
<p>For example, complete the following steps to create an <code dir="ltr">ANYDATA</code> queue with the <code dir="ltr">SET_UP_QUEUE</code> procedure:</p>
<ol>
<li>
<p>Complete the following tasks in <a href="prep_rep.htm#CACGBCIB">&#34;Tasks to Complete Before Configuring Oracle Streams Replication&#34;</a> you create an <code dir="ltr">ANYDATA</code> queue:</p>
<ul>
<li>
<p><a href="prep_rep.htm#BABHEJGG">&#34;Configuring an Oracle Streams Administrator on All Databases&#34;</a></p>
</li>
<li>
<p><a href="prep_rep.htm#BABFJJIH">&#34;Setting Initialization Parameters Relevant to Oracle Streams&#34;</a></p>
</li>
<li>
<p><a href="prep_rep.htm#BABBFJEB">&#34;Configuring the Oracle Streams Pool&#34;</a></p>
</li>
</ul>
</li>
<li>
<p>In SQL*Plus, connect to the database that will contain the queue as the Oracle Streams administrator.</p>
<p>See <a class="olink ADMIN00102" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for instructions about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the <code dir="ltr">SET_UP_QUEUE</code> procedure to create the queue:</p>
<pre dir="ltr">BEGIN
  DBMS_STREAMS_ADM.SET_UP_QUEUE(
    queue_table =&gt; &#39;strmadmin.streams_queue_table&#39;,
    queue_name  =&gt; &#39;strmadmin.streams_queue&#39;,
    queue_user  =&gt; &#39;hr&#39;);
END;
/
</pre>
<p>Running this procedure performs the following actions:</p>
<ul>
<li>
<p>Creates a queue table named <code dir="ltr">streams_queue_table</code> in the <code dir="ltr">strmadmin</code> schema. The queue table is created only if it does not already exist. Queues based on the queue table store messages of <code dir="ltr">ANYDATA</code> type. Queue table names can be a maximum of 24 bytes.</p>
</li>
<li>
<p>Creates a queue named <code dir="ltr">streams_queue</code> in the <code dir="ltr">strmadmin</code> schema. The queue is created only if it does not already exist. Queue names can be a maximum of 24 bytes.</p>
</li>
<li>
<p>Specifies that the <code dir="ltr">streams_queue</code> queue is based on the <code dir="ltr">strmadmin.streams_queue_table</code> queue table.</p>
</li>
<li>
<p>Configures the <code dir="ltr">hr</code> user as a secure queue user of the queue, and grants this user <code dir="ltr">ENQUEUE</code> and <code dir="ltr">DEQUEUE</code> privileges on the queue.</p>
</li>
<li>
<p>Starts the queue.</p>
</li>
</ul>
<p>Default settings are used for the parameters that are not explicitly set in the <code dir="ltr">SET_UP_QUEUE</code> procedure.</p>
</li>
</ol>
<p>When the <code dir="ltr">SET_UP_QUEUE</code> procedure creates a queue table, the following <code dir="ltr">DBMS_AQADM.CREATE_QUEUE_TABLE</code> parameter settings are specified:</p>
<ul>
<li>
<p>If the database is Oracle Database 10<span class="italic">g</span> Release&nbsp;2 or later, then the <code dir="ltr">sort_list</code> setting is <code dir="ltr">commit_time</code>. If the database is a release before Oracle Database 10<span class="italic">g</span> Release&nbsp;2, then the <code dir="ltr">sort_list</code> setting is <code dir="ltr">enq_time</code>.</p>
</li>
<li>
<p>The <code dir="ltr">multiple_consumers</code> setting is <code dir="ltr">TRUE</code>.</p>
</li>
<li>
<p>The <code dir="ltr">message_grouping</code> setting is <code dir="ltr">transactional</code>.</p>
</li>
<li>
<p>The <code dir="ltr">secure</code> setting is <code dir="ltr">TRUE</code>.</p>
</li>
</ul>
<p>The other parameters in the <code dir="ltr">CREATE_QUEUE_TABLE</code> procedure are set to their default values.</p>
<p>You can use the <code dir="ltr">CREATE_QUEUE_TABLE</code> procedure in the <code dir="ltr">DBMS_AQADM</code> package to create a queue table of <code dir="ltr">ANYDATA</code> type with different properties than the default properties specified by the <code dir="ltr">SET_UP_QUEUE</code> procedure in the <code dir="ltr">DBMS_STREAMS_ADM</code> package. After you create the queue table with the <code dir="ltr">CREATE_QUEUE_TABLE</code> procedure, you can create a queue that uses the queue table. To do so, specify the queue table in the <code dir="ltr">queue_table</code> parameter of the <code dir="ltr">SET_UP_QUEUE</code> procedure.</p>
<p>Similarly, you can use the <code dir="ltr">CREATE_QUEUE</code> procedure in the <code dir="ltr">DBMS_AQADM</code> package to create a queue instead of <code dir="ltr">SET_UP_QUEUE</code>. Use <code dir="ltr">CREATE_QUEUE</code> if you require custom settings for the queue. For example, use <code dir="ltr">CREATE_QUEUE</code> to specify a custom retry delay or retention time. If you use <code dir="ltr">CREATE_QUEUE</code>, then you must start the queue manually.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>You can configure an entire Oracle Streams environment, including queues, using procedures in the <code dir="ltr">DBMS_STREAMS_ADM</code> package or Oracle Enterprise Manager Cloud Control. See <a href="config_simple.htm#CACFECJJ">Chapter 2, &#34;Simple Oracle Streams Replication Configuration&#34;</a>.</p>
</li>
<li>
<p>A message cannot be enqueued unless a subscriber who can dequeue the message is configured.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink STRMS003" href="../STRMS/strms_prop.htm#STRMS003"><span class="italic">Oracle Streams Concepts and Administration</span></a></p>
</li>
<li>
<p><a class="olink ADQUE" href="../ADQUE/toc.htm"><span class="italic">Oracle Database Advanced Queuing User&#39;s Guide</span></a></p>
</li>
<li>
<p><a class="olink ARPLS" href="../ARPLS/toc.htm"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <a class="olink ARPLS507" href="../ARPLS/d_streams_adm.htm#ARPLS507"><code dir="ltr">SET_UP_QUEUE</code></a>, <a class="olink ARPLS106" href="../ARPLS/d_aqadm.htm#ARPLS106"><code dir="ltr">CREATE_QUEUE_TABLE</code></a>, and <a class="olink ARPLS109" href="../ARPLS/d_aqadm.htm#ARPLS109"><code dir="ltr">CREATE_QUEUE</code></a> procedures</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BABIDDBA"></a>
<div id="STREP309" class="sect1">
<h2 class="sect1">Creating Oracle Streams Propagations Between ANYDATA Queues<a id="sthref276"></a><a id="sthref277"></a><a id="sthref278"></a><a id="sthref279"></a><a id="sthref280"></a></h2>
<p>A propagation sends messages from an Oracle Streams source queue to an Oracle Streams destination queue. In addition, you can use the features of Oracle Database Advanced Queuing (AQ) to manage Oracle Streams propagations.</p>
<p>You can use any of the following procedures to create a propagation between two <code dir="ltr">ANYDATA</code> queues:</p>
<ul>
<li>
<p><a class="olink ARPLS394" href="../ARPLS/d_streams_adm.htm#ARPLS394"><code dir="ltr">DBMS_STREAMS_ADM.ADD_SUBSET_PROPAGATION_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS316" href="../ARPLS/d_streams_adm.htm#ARPLS316"><code dir="ltr">DBMS_STREAMS_ADM.ADD_TABLE_PROPAGATION_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS317" href="../ARPLS/d_streams_adm.htm#ARPLS317"><code dir="ltr">DBMS_STREAMS_ADM.ADD_SCHEMA_PROPAGATION_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS318" href="../ARPLS/d_streams_adm.htm#ARPLS318"><code dir="ltr">DBMS_STREAMS_ADM.ADD_GLOBAL_PROPAGATION_RULES</code></a></p>
</li>
<li>
<p><a class="olink ARPLS333" href="../ARPLS/d_prop_a.htm#ARPLS333"><code dir="ltr">DBMS_PROPAGATION_ADM.CREATE_PROPAGATION</code></a></p>
</li>
</ul>
<p>Each of these procedures in the <code dir="ltr">DBMS_STREAMS_ADM</code> package creates a propagation with the specified name if it does not already exist, creates either a positive rule set or negative rule set for the propagation if the propagation does not have such a rule set, and can add table rules, schema rules, or global rules to the rule set.</p>
<p>The <code dir="ltr">CREATE_PROPAGATION</code> procedure creates a propagation, but does not create a rule set or rules for the propagation. However, the <code dir="ltr">CREATE_PROPAGATION</code> procedure enables you to specify an existing rule set to associate with the propagation, either as a positive or a negative rule set. All propagations are started automatically upon creation.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BABBEAJG">Preparing to Create a Propagation</a></p>
</li>
<li>
<p><a href="#i1006495">Creating a Propagation Using DBMS_STREAMS_ADM</a></p>
</li>
<li>
<p><a href="#BABDEAAD">Creating a Propagation Using DBMS_PROPAGATION_ADM</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can configure an entire Oracle Streams environment, including propagations, using procedures in the <code dir="ltr">DBMS_STREAMS_ADM</code> package or Oracle Enterprise Manager Cloud Control. See <a href="config_simple.htm#CACFECJJ">Chapter 2, &#34;Simple Oracle Streams Replication Configuration&#34;</a>.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink STRMS003" href="../STRMS/strms_prop.htm#STRMS003"><span class="italic">Oracle Streams Concepts and Administration</span></a></p>
</li>
<li>
<p><a class="olink ADQUE0800" href="../ADQUE/aq_admin.htm#ADQUE0800"><span class="italic">Oracle Database Advanced Queuing User&#39;s Guide</span></a> for more information about configuring propagations with the features of Oracle Streams AQ and instructions about configuring propagations between typed queues</p>
</li>
</ul>
</div>
<a id="BABBEAJG"></a>
<div id="STREP310" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Preparing to Create a Propagation</h3>
<p>The following tasks must be completed before you create a propagation:</p>
<ul>
<li>
<p>Complete the following tasks in <a href="prep_rep.htm#CACGBCIB">&#34;Tasks to Complete Before Configuring Oracle Streams Replication&#34;</a>:</p>
<ul>
<li>
<p><a href="prep_rep.htm#BABHEJGG">&#34;Configuring an Oracle Streams Administrator on All Databases&#34;</a></p>
</li>
<li>
<p><a href="prep_rep.htm#BABDCFHC">&#34;Configuring Network Connectivity and Database Links&#34;</a> if the propagation will send messages between databases</p>
</li>
<li>
<p><a href="prep_rep.htm#BABFJJIH">&#34;Setting Initialization Parameters Relevant to Oracle Streams&#34;</a></p>
</li>
<li>
<p><a href="prep_rep.htm#BABBFJEB">&#34;Configuring the Oracle Streams Pool&#34;</a></p>
</li>
</ul>
</li>
<li>
<p>Create a source queue and a destination queue for the propagation, if they do not exist. Both queues must be <code dir="ltr">ANYDATA</code> queues. The examples in this chapter assume that the source queue is <code dir="ltr">strmadmin.strm_a_queue</code> and that the destination queue is <code dir="ltr">strmadmin.strm_b_queue</code>. See <a href="#i1006170">&#34;Creating an ANYDATA Queue&#34;</a> for instructions.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="i1006495"></a>
<div id="STREP311" class="sect2">
<h3 class="sect2">Creating a Propagation Using DBMS_STREAMS_ADM</h3>
<p>Complete the following steps to create a propagation using the <code dir="ltr">ADD_TABLE_PROPAGATION_RULES</code> procedure in the <code dir="ltr">DBMS_STREAMS_ADM</code> package:</p>
<ol>
<li>
<p>Complete the tasks in <a href="#BABBEAJG">&#34;Preparing to Create a Propagation&#34;</a>.</p>
</li>
<li>
<p>In SQL*Plus, connect to the database that contains the source queue for the propagation as the Oracle Streams administrator.</p>
<p>See <a class="olink ADMIN00102" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for instructions about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the <code dir="ltr">ADD_TABLE_PROPAGATION_RULES</code> procedure to create the propagation:</p>
<pre dir="ltr">BEGIN
  DBMS_STREAMS_ADM.ADD_TABLE_PROPAGATION_RULES(
    table_name              =&gt; &#39;hr.departments&#39;,
    streams_name            =&gt; &#39;strm01_propagation&#39;,
    source_queue_name       =&gt; &#39;strmadmin.strm_a_queue&#39;,
    destination_queue_name  =&gt; &#39;strmadmin.strm_b_queue@dbs2.example.com&#39;,
    include_dml             =&gt; TRUE,
    include_ddl             =&gt; TRUE,
    include_tagged_lcr      =&gt; FALSE,
    source_database         =&gt; &#39;dbs1.example.com&#39;,
    inclusion_rule          =&gt; TRUE,
    queue_to_queue          =&gt; TRUE);
END;
/
</pre>
<p>Running this procedure performs the following actions:</p>
<ul>
<li>
<p>Creates a propagation named <code dir="ltr">strm01_propagation</code>. The propagation is created only if it does not already exist.</p>
</li>
<li>
<p>Specifies that the propagation propagates logical change records (LCRs) from <code dir="ltr">strmadmin.strm_a_queue</code> in the current database to <code dir="ltr">strmadmin.strm_b_queue</code> in the <code dir="ltr">dbs2.example.com</code> database. These queues must exist.</p>
</li>
<li>
<p>Specifies that the propagation uses the <code dir="ltr">dbs2.example.com</code> database link to propagate the LCRs, because the <code dir="ltr">destination_queue_name</code> parameter contains <code dir="ltr">@dbs2.example.com</code>. This database link must exist.</p>
</li>
<li>
<p>Creates a positive rule set and associates it with the propagation because the <code dir="ltr">inclusion_rule</code> parameter is set to <code dir="ltr">TRUE</code>. The rule set uses the evaluation context <code dir="ltr">SYS.STREAMS$_EVALUATION_CONTEXT</code>. The rule set name is system generated.</p>
</li>
<li>
<p>Creates two rules. One rule evaluates to <code dir="ltr">TRUE</code> for row LCRs that contain the results of data manipulation language (DML) changes to the <code dir="ltr">hr.departments</code> table. The other rule evaluates to <code dir="ltr">TRUE</code> for DDL LCRs that contain data definition language (DDL) changes to the <code dir="ltr">hr.departments</code> table. The rule names are system generated.</p>
</li>
<li>
<p>Adds the two rules to the positive rule set associated with the propagation. The rules are added to the positive rule set because the <code dir="ltr">inclusion_rule</code> parameter is set to <code dir="ltr">TRUE</code>.</p>
</li>
<li>
<p>Specifies that the propagation propagates an LCR only if it has a <code dir="ltr">NULL</code> tag, because the <code dir="ltr">include_tagged_lcr</code> parameter is set to&nbsp;<code dir="ltr">FALSE</code>. This behavior is accomplished through the system-created rules for the propagation.</p>
</li>
<li>
<p>Specifies that the source database for the LCRs being propagated is <code dir="ltr">dbs1.example.com</code>, which might or might not be the current database. This propagation does not propagate LCRs in the source queue that have a different source database.</p>
</li>
<li>
<p>Creates a propagation job for the queue-to-queue propagation.</p>
</li>
</ul>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
To use queue-to-queue propagation, the compatibility level must be <code dir="ltr">10.2.0</code> or higher for each database that contains a queue involved in the propagation.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink STRMS" href="../STRMS/toc.htm"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about queues, propagations, and rules</p>
</li>
<li>
<p><a href="rep_tags.htm#g1014437">Chapter 10, &#34;Oracle Streams Tags&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BABDEAAD"></a>
<div id="STREP312" class="sect2">
<h3 class="sect2">Creating a Propagation Using DBMS_PROPAGATION_ADM</h3>
<p>Complete the following steps to create a propagation using the <code dir="ltr">CREATE_PROPAGATION</code> procedure in the <code dir="ltr">DBMS_PROPAGATION_ADM</code> package:</p>
<ol>
<li>
<p>Complete the tasks in <a href="#BABBEAJG">&#34;Preparing to Create a Propagation&#34;</a>.</p>
</li>
<li>
<p>In SQL*Plus, connect to the database that contains the source queue for the propagation as the Oracle Streams administrator.</p>
<p>See <a class="olink ADMIN00102" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for instructions about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Create the rule set that will be used by the propagation if it does not exist. In this example, assume that the rule set is <code dir="ltr">strmadmin.strm01_rule_set</code>. Optionally, you can also add rules to the rule set. See <a class="olink STRMS012" href="../STRMS/strms_mrules.htm#STRMS012"><span class="italic">Oracle Streams Concepts and Administration</span></a> for instructions.</p>
</li>
<li>
<p>Run the <code dir="ltr">CREATE_PROPAGATION</code> procedure to create the propagation:</p>
<pre dir="ltr">BEGIN
  DBMS_PROPAGATION_ADM.CREATE_PROPAGATION(
    propagation_name   =&gt; &#39;strm02_propagation&#39;,
    source_queue       =&gt; &#39;strmadmin.strm_a_queue&#39;,
    destination_queue  =&gt; &#39;strmadmin.strm_b_queue&#39;,
    destination_dblink =&gt; &#39;dbs2.example.com&#39;,
    rule_set_name      =&gt; &#39;strmadmin.strm01_rule_set&#39;,
    queue_to_queue     =&gt; TRUE);
END;
/
</pre>
<p>Running this procedure performs the following actions:</p>
<ul>
<li>
<p>Creates a propagation named <code dir="ltr">strm02_propagation</code>. A propagation with the same name must not exist.</p>
</li>
<li>
<p>Specifies that the propagation propagates messages from <code dir="ltr">strmadmin.strm_a_queue</code> in the current database to <code dir="ltr">strmadmin.strm_b_queue</code> in the <code dir="ltr">dbs2.example.com</code> database. These queues must exist. Depending on the rules in the rule sets for the propagation, the propagated messages can be LCRs or user messages, or both.</p>
</li>
<li>
<p>Specifies that the propagation uses the <code dir="ltr">dbs2.example.com</code> database link to propagate the messages. This database link must exist.</p>
</li>
<li>
<p>Associates the propagation with the rule set named <code dir="ltr">strmadmin.strm01_rule_set</code>. This rule set must exist. This rule set is the positive rule set for the propagation.</p>
</li>
<li>
<p>Creates a propagation job for the queue-to-queue propagation.</p>
</li>
</ul>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
To use queue-to-queue propagation, the compatibility level must be <code dir="ltr">10.2.0</code> or higher for each database that contains a queue involved in the propagation.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment91">
<tr>
<td class="cellalignment98">
<table class="cellalignment96">
<tr>
<td class="cellalignment95"><a href="ccap.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment95"><a href="capply.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment100">
<table class="cellalignment94">
<tr>
<td class="cellalignment95"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment95"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment95"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment95"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment95"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment95"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>