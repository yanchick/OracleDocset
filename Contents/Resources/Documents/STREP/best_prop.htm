<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-104188"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Best%20Practices%20for%20Propagation"></a><title>Best Practices for Propagation</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1044"/>
<meta name="dcterms.created" content="2015-02-12T7:14:20Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Streams Replication Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E53118-02"/>
<meta name="dcterms.isVersionOf" content="STREP"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="best_capture.htm" title="Previous" type="text/html"/>
<link rel="Next" href="best_apply.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E53118-02.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">24/28</span> <!-- End Header -->
<div id="STREP152" class="chapter"><a id="CEGFGBAE"></a>
<h1 class="chapter"><span class="secnum">17</span> Best Practices for Propagation</h1>
<p><a id="sthref766"></a><a id="sthref767"></a>This chapter describes the best practices for propagating messages in an Oracle Streams replication environment. This chapter includes these topics:</p>
<ul>
<li>
<p><a href="#CEGCEABJ">Best Practices for Propagation Configuration</a></p>
</li>
<li>
<p><a href="#CEGCIDII">Best Practices for Propagation Operation</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="best_gen.htm#CHDIAIGF">&#34;Best Practices for Oracle Real Application Clusters and Oracle Streams&#34;</a></div>
<a id="CEGCEABJ"></a>
<div id="STREP528" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Best Practices for Propagation Configuration<a id="sthref768"></a></h2>
<p>This following sections describe best practices for configuring propagations:</p>
<ul>
<li>
<p><a href="#CEGEEBFH">Use Queue-to-Queue Propagations</a></p>
</li>
<li>
<p><a href="#CEGCHGIF">Set the Propagation Latency for Each Propagation</a></p>
</li>
<li>
<p><a href="#CEGJGEJF">Increase the SDU in a Wide Area Network for Better Network Performance</a></p>
</li>
</ul>
<a id="CEGEEBFH"></a>
<div id="STREP529" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Use Queue-to-Queue Propagations<a id="sthref769"></a><a id="sthref770"></a><a id="sthref771"></a></h3>
<p>A propagation can be queue-to-queue or queue-to-database link (queue-to-dblink). Use queue-to-queue propagations whenever possible. A queue-to-queue propagation always has its own exclusive propagation job to propagate messages from the source queue to the destination queue. Because each propagation job has its own propagation schedule, the propagation schedule of each queue-to-queue propagation can be managed separately. Even when multiple queue-to-queue propagations use the same database link, you can enable, disable, or set the propagation schedule for each queue-to-queue propagation separately.</p>
<p>Propagations configured before Oracle Database 10<span class="italic">g</span> Release 2 are queue-to-dblink propagations. Also, any propagation that includes a queue in a database before Oracle Database 10<span class="italic">g</span> Release 2 must be a queue-to-dblink propagation. When queue-to-dblink propagations are used, propagation will not succeed if the database link no longer connects to the owning instance of the destination queue.</p>
<p>If you have queue-to-dblink propagations created in a prior release of Oracle Database, you can re-create these propagation during a maintenance window to use queue-to-queue propagation. To re-create a propagation, complete the following steps:</p>
<ol>
<li>
<p>Stop the propagation.</p>
</li>
<li>
<p>Ensure that the source queue is empty.</p>
</li>
<li>
<p>Ensure that the destination queue is empty and has no unapplied, spilled messages before you drop the propagation.</p>
</li>
<li>
<p>Re-create the propagation with the <code dir="ltr">queue_to_queue</code> parameter set to <code dir="ltr">TRUE</code> in the creation procedure.</p>
</li>
</ol>
<p>If you automate the configuration, as described in <a href="best_gen.htm#CHDJGICA">&#34;Automate the Oracle Streams Replication Configuration&#34;</a>, then each propagation uses queue-to-queue propagation automatically.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="best_gen.htm#CHDEIEEG">&#34;Follow the Best Practices for Configuring and Managing Propagations&#34;</a> for information about propagations in an Oracle Real Application Clusters (Oracle RAC) environment</p>
</li>
<li>
<p><a href="cprop.htm#BABIDDBA">&#34;Creating Oracle Streams Propagations Between ANYDATA Queues&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CEGCHGIF"></a>
<div id="STREP530" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Set the Propagation Latency for Each Propagation<a id="sthref772"></a><a id="sthref773"></a></h3>
<p>Propagation latency is the maximum wait, in seconds, in the propagation window for a message to be propagated after it is enqueued. Set the propagation latency to an appropriate value for each propagation in your Oracle Streams replication environment. The default propagation latency value is 60.</p>
<p>The following scenarios describe how a propagation will behave given different propagation latency values:</p>
<ul>
<li>
<p>If latency is set to 60, and there are no messages enqueued during the propagation window, then the queue will not be checked for 60 seconds for messages to be propagated to the specified destination. That is, messages enqueued into the queue for the propagation destination will not be propagated for at least 60 more seconds.</p>
</li>
<li>
<p>If the latency is set to 600, and there are no messages enqueued during the propagation window, then the queue will not be checked for 10 minutes for messages to be propagated to the specified destination. That is, messages enqueued into the queue for the propagation destination will not be propagated for at least 10 more minutes.</p>
</li>
<li>
<p>If the latency is set to 0, then a job slave will be waiting for messages to be enqueued for the destination and, as soon as a message is enqueued, it will be propagated. Setting latency to 0 is not recommended because it might affect the ability of the database to shut down in <code dir="ltr">NORMAL</code> mode.</p>
</li>
</ul>
<p>You can set propagation parameters using the <code dir="ltr">ALTER_PROPAGATION_SCHEDULE</code> procedure from the <code dir="ltr">DBMS_AQADM</code> package. For example, to set the latency of a propagation from the <code dir="ltr">q1</code> source queue owned by <code dir="ltr">strmadmin</code> to the destination queue <code dir="ltr">q2</code> at the database with a global name of <code dir="ltr">dbs2.example.com</code>, log in as the Oracle Streams administrator, and run the following procedure:</p>
<pre dir="ltr">BEGIN
  DBMS_AQADM.ALTER_PROPAGATION_SCHEDULE(
   queue_name        =&gt; &#39;strmadmin.q1&#39;,
   destination       =&gt; &#39;dbs2.example.com&#39;,
   latency           =&gt; 5,
   destination_queue =&gt; &#39;strmadmin.q2&#39;); 
END;
/
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the <code dir="ltr">latency</code> parameter is not specified, then propagation latency is set to the default value of 60.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STRMS003" href="../STRMS/strms_prop.htm#STRMS003"><span class="italic">Oracle Streams Concepts and Administration</span></a></div>
</div>
<!-- class="sect2" -->
<a id="CEGJGEJF"></a>
<div id="STREP531" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Increase the SDU in a Wide Area Network for Better Network Performance<a id="sthref774"></a><a id="sthref775"></a><a id="sthref776"></a></h3>
<p>When using Oracle Streams propagation in a Wide Area Network (WAN), increase the session data unit (SDU) to improve the propagation performance. The maximum value for SDU is 32K (32767). The SDU value for network transmission is negotiated between the sender and receiver sides of the connection, and the minimum SDU value of the two endpoints is used for any individual connection. To take advantage of an increased SDU for Oracle Streams propagation, the receiving side <code dir="ltr">sqlnet.ora</code> file must include the <code dir="ltr">DEFAULT_SDU_SIZE</code> parameter. The receiving side <code dir="ltr">listener.ora</code> file must indicate the SDU change for the system identifier (SID). The sending side <code dir="ltr">tnsnames.ora</code> file connect string must also include the SDU modification for the particular service.</p>
<p>In addition, the <code dir="ltr">SEND_BUF_SIZE</code> and <code dir="ltr">RECV_BUF_SIZE</code> parameters in the <code dir="ltr">listener.ora</code> and <code dir="ltr">tnsnames.ora</code> files increase the performance of propagation on your system. These parameters increase the size of the buffer used to send or receive the propagated messages. These parameters should only be increased after careful analysis of their overall impact on system performance.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG0141" href="../NETAG/performance.htm#NETAG0141"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a></div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGCIDII"></a>
<div id="STREP532" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Best Practices for Propagation Operation<a id="sthref777"></a></h2>
<p>The following section describes best practices for operating existing propagations.</p>
<a id="CEGFFDCC"></a>
<div id="STREP533" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Restart Broken Propagations<a id="sthref778"></a><a id="sthref779"></a><a id="sthref780"></a></h3>
<p>Sometimes, the propagation job for a propagation might become &#34;broken&#34; or fail to start after it encounters an error or after a database restart. Typically, stopping and restarting the propagation solves the problem. For example, to stop and restart a propagation named <code dir="ltr">prop1</code>, run the following procedures:</p>
<pre dir="ltr">BEGIN
  DBMS_PROPAGATION_ADM.STOP_PROPAGATION(
    propagation_name =&gt; &#39;prop1&#39;);
END;
/

BEGIN
  DBMS_PROPAGATION_ADM.START_PROPAGATION(
    propagation_name =&gt; &#39;prop1&#39;);
END;
/
</pre>
<p>If running these procedures does not correct the problem, then run the <code dir="ltr">STOP_PROPAGATION</code> procedure with the <code dir="ltr">force</code> parameter set to <code dir="ltr">TRUE</code>, and restart propagation. For example:</p>
<pre dir="ltr">BEGIN
  DBMS_PROPAGATION_ADM.STOP_PROPAGATION(
    propagation_name =&gt; &#39;prop1&#39;,
    force            =&gt; TRUE);
END;
/

BEGIN
  DBMS_PROPAGATION_ADM.START_PROPAGATION(
    propagation_name =&gt; &#39;prop1&#39;);
END;
/
</pre>
<p>When you stop a propagation with the <code dir="ltr">force</code> parameter set to <code dir="ltr">TRUE</code>, the statistics for the propagation are cleared.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment91">
<tr>
<td class="cellalignment98">
<table class="cellalignment96">
<tr>
<td class="cellalignment95"><a href="best_capture.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment95"><a href="best_apply.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment100">
<table class="cellalignment94">
<tr>
<td class="cellalignment95"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment95"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment95"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment95"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment95"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment95"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>