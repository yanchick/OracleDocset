<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-47049"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Utilizing%20the%20Multitenant%20Architecture"></a><title>Utilizing the Multitenant Architecture</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 748"/>
<meta name="dcterms.created" content="2014-05-23T16:38:24Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Application Express Installation Guide"/>
<meta name="dcterms.identifier" content="E17958-12"/>
<meta name="dcterms.isVersionOf" content="HTMIG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="pre_require.htm" title="Previous" type="text/html"/>
<link rel="Next" href="db_install.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17958-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">7/10</span> <!-- End Header -->
<div id="HTMIG29169" class="chapter"><a id="CACBHIBH"></a> <a id="CIAEGGHF"></a>
<h1 class="chapter"><span class="secnum">3</span> Utilizing the Multitenant Architecture</h1>
<p>This chapter outlines the installation choices and different scenarios associated with copying and moving pluggable databases introduced by the Oracle Database 12<span class="italic">c</span> multitenant architecture with respect to Oracle Application Express (Application Express).</p>
<ul>
<li>
<p><a href="#CACJCFAB">Understanding Installation Choices in Oracle Database 12<span class="italic">c</span></a></p>
</li>
<li>
<p><a href="#CACBEAGE">Plugging in a PDB When Application Express is Installed in the Root Container</a></p>
</li>
<li>
<p><a href="#CACECJCH">Plugging in a PDB When Application Express Is Not in the Root Container of the Target CDB</a></p>
</li>
</ul>
<a id="CACJCFAB"></a>
<div id="HTMIG29171" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">3.1</span> Understanding Installation Choices in Oracle <a id="sthref65"></a>Database 12<span class="italic">c</span></h2>
<p>Oracle Database 12<span class="italic">c</span> Release 1 (12.1) introduces the multitenant architecture. This database architecture has a multitenant container database (CDB) that includes a root container, <code>CDB$ROOT</code>, a seed database, <code>PDB$SEED</code>, and multiple pluggable databases (PDBs). Each pluggable database is equivalent to a separate database instance in Oracle Database release 11<span class="italic">g</span>. The root container, <code>CDB$ROOT</code>, holds common objects that are accessible to every PDB utilizing metadata links or object links. The seed database, <code>PDB$SEED</code>, is used when creating a new PDB to seed the new database. The key benefit of the Oracle Database 12<span class="italic">c</span> multitenant architecture is that the database resources, such as CPU and memory, can be shared across all of the PDBs. This architecture also enables many databases to be treated as one for tasks such as upgrades or patches, and backups.</p>
<p>Oracle Application Express Release 4.2 is the earliest release that can be configured with Oracle Database 12<span class="italic">c</span>. When choosing to install Oracle Database 12<span class="italic">c</span> using the Oracle Database 12<span class="italic">c</span> multitenant architecture, Oracle Application Express 4.2.4 is installed as a common database option by default. You may also choose to uninstall Application Express from the root container and then install a local Application Express Release 4.2.4 or later individually into one or more PDBs. Oracle does not support uninstalling Application Express from the root container, or reinstalling Application Express into the root container, once any PDBs have been configured. This may invalidate or completely remove the meta data associated with the existing Application Express installation.</p>
<p>When configuring multitenant architecture, Oracle Application Express is installed in the root container database by default. In such an installation the root container, <code>CDB$ROOT</code>, includes the <code>APEX_040200</code> schema to store the common database objects for the Application Express engine such as packages, functions, procedures and views. The seed database, <code>PDB$SEED</code>, also includes the <code>APEX_040200</code> schema to store the tables that are part of the Application Express engine.</p>
<p>You can create a new PDB by copying <code>PDB$SEED</code>, which includes the <code>APEX_040200</code> schema with the Application Express tables, and creating metadata links back to the common database objects held in the <code>APEX_040200</code> schema within the <code>CDB$ROOT</code>. As such there are multiple copies of the Application Express engine tables and only single copies of the Application Express engine packages, functions, procedures and views. Each PDB will have the <code>APEX_040200</code> schema and have its own copy of the Application Express engine&#39;s tables so that it can hold the metadata for the Application Express applications defined within that PDB.</p>
<p>As a best practice, Oracle recommends having a common Oracle Application Express installation in the root container, which ensures every PDB is running the same version of Oracle Application Express. This offers ease of administration by enabling centralized management of Oracle Application Express infrastructure tasks, such as upgrading and patching. The other alternative is to uninstall Application Express from <code>CDB$ROOT</code>, <code>PDB$SEED</code>, and all other PDBs, and then install Application Express locally into each PDB. The advantage of a local Oracle Application Express is that you can run different versions of Application Express in each PDB. However, the disadvantage of choosing this option is that each local Oracle Application Express installation must be managed separately in respect of upgrades and patches for Application Express, which is a greater maintenance effort.</p>
<a id="CACIICJA"></a>
<div id="HTMIG29173" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.1.1</span> Uninstalling Application Express from a <a id="sthref66"></a><a id="sthref67"></a>CDB</h3>
<p>To have the flexibility of installing different versions of Oracle Application Express into different PDBs, you need to uninstall Oracle Application Express release 4.2.4 which was installed into the container database. Once you have removed Oracle Application Express from the container database, then you can install a local Application Express within each PDB as required. When Oracle Application Express is installed locally there are no Application Express metadata linked objects and all packages, views, and tables are created within the <code>APEX_0402000</code> schema, within each PDB where Application Express is installed.</p>
<p>To uninstall Oracle Application Express from the CDB:</p>
<ol>
<li>
<p>Change your working directory to <code>$ORACLE_HOME/apex</code>.</p>
</li>
<li>
<p>Start SQL*Plus and connect to the database where Oracle Application Express is installed as SYS specifying the SYSDBA role. For example:</p>
<ul>
<li>
<p>On Windows:</p>
<pre>SYSTEM_DRIVE:\ sqlplus /nolog
SQL&gt; CONNECT SYS as SYSDBA
Enter password: <span class="codeinlineitalic">SYS_password</span>
</pre></li>
<li>
<p>On UNIX and Linux:</p>
<pre>$ sqlplus /nolog
SQL&gt; CONNECT SYS as SYSDBA
Enter password: <span class="italic">SYS_password</span>
</pre></li>
</ul>
</li>
<li>
<p>Run <code>apxremov_con.sql</code>.</p>
<p>For example:</p>
<pre>@apxremov_con.sql
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you run <code>apexremov_con.sql</code> after PDBs have been added to the CDB then Application Express uninstalls from all of the PDBs. Therefore, any applications defined in any of the PDBs will be removed. If you run <code>apxremov.sql</code> then Application Express is only removed from the root container. However, every PDB is left in an invalid state and will cause errors when trying to open the PDB.</div>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" -->
<div id="HTMIG29206" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref68"></a>
<h3 class="sect2"><span class="secnum">3.1.2</span> Installing Application Express Locally in a PDB</h3>
<p>Once you have removed Oracle Application Express from the container database by following the instructions in <a href="#CACIICJA">&#34;Uninstalling Application Express from a CDB&#34;</a>, you can install Application Express locally in a PDB.</p>
<p>To install Oracle Application Express locally in a PDB:</p>
<ol>
<li>
<p>Change your working directory to <code>$ORACLE_HOME/apex</code>.</p>
</li>
<li>
<p>Start SQL*Plus and connect to the database where Oracle Application Express is installed as SYS specifying the SYSDBA role. For example:</p>
<ul>
<li>
<p>On Windows:</p>
<pre>SYSTEM_DRIVE:\ sqlplus /nolog
SQL&gt; CONNECT SYS as SYSDBA
Enter password: <span class="codeinlineitalic">SYS_password</span>
</pre></li>
<li>
<p>On UNIX and Linux:</p>
<pre>$ sqlplus /nolog
SQL&gt; CONNECT SYS as SYSDBA
Enter password: <span class="italic">SYS_password</span>
</pre></li>
</ul>
</li>
<li>
<p>Set the container to the PDB you wish to install Application Express locally:</p>
<pre>ALTER SESSION SET CONTAINER = &lt;<span class="italic">PDB_name</span>&gt;;
</pre></li>
<li>
<p>Select the appropriate installation option.</p>
<p><span class="bold">Full development environment</span> provides complete access to the Application Builder environment to develop applications. A <span class="bold">Runtime environment</span> enables users to run applications that cannot be modified. To learn more, see <a href="db_install.htm#CIHFDDDA">&#34;About the Oracle Application Express Runtime Environment&#34;</a>.</p>
<p>Available installation options include:</p>
<ul>
<li>
<p><span class="bold">Full development environment</span> - Run <code>apexins.sql</code> passing the following four arguments in the order shown:</p>
<pre>@apexins.sql <span class="italic">tablespace_apex</span> <span class="italic">tablespace_files</span> <span class="italic">tablespace_temp</span> <span class="italic">images</span>
</pre>
<p>Where:</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">tablespace_apex</span></code> is the name of the tablespace for the Oracle Application Express application user.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">tablespace_files</span></code> is the name of the tablespace for the Oracle Application Express files user.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">tablespace_temp</span></code> is the name of the temporary tablespace or tablespace group.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">images</span></code> is the virtual directory for Oracle Application Express images. To support future Oracle Application Express upgrades, define the virtual image directory as <code>/i/</code>.</p>
</li>
</ul>
<p>For example:</p>
<pre>@apexins.sql SYSAUX SYSAUX TEMP /i/
</pre></li>
<li>
<p><span class="bold">Runtime environment</span> - Run <code>apxrtins.sql</code> passing the following four arguments in the order shown:</p>
<pre>o @apxrtins.sql <span class="italic">tablespace_apex</span> <span class="italic">tablespace_files</span> <span class="italic">tablespace_temp</span> <span class="italic">images</span>
</pre>
<p>Where:</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">tablespace_apex</span></code> is the name of the tablespace for the Oracle Application Express application user.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">tablespace_files</span></code> is the name of the tablespace for the Oracle Application Express files user.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">tablespace_temp</span></code> is the name of the temporary tablespace or tablespace group.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">images</span></code> is the virtual directory for Oracle Application Express images. To support future Oracle Application Express upgrades, define the virtual image directory as <code>/i/</code>.</p>
</li>
</ul>
<p>For example:</p>
<pre>@apxrtins.sql SYSAUX SYSAUX TEMP /i/
</pre></li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">Note:</p>
If you did not apply the database patch prior to executing <code>apxremov_con.sql</code> in the previous step, then attempting to install Oracle Application Express into a PDB will fail as the installation script will exit immediately without installing Oracle Application Express. In this scenario please contact Oracle Support for further assistance.</div>
</li>
</ol>
</div>
<!-- class="sect2" -->
<ul>
<li>
<p>If you are using Oracle REST Data Services, complete the appropriate steps in <a href="db_install.htm#CIHFJIAD">&#34;Download and Install Oracle REST Data Services&#34;</a> through <a href="db_install.htm#CIHJBIBE">&#34;Create a Workspace and Add Oracle Application Express Users&#34;</a>.</p>
</li>
<li>
<p>If you are using Oracle HTTP Server, complete the appropriate steps in <a href="db_install.htm#CIHJBAGG">&#34;Configure Oracle HTTP Server Distributed with Oracle Database 12<span class="italic">c</span>&#34;</a> through <a href="db_install.htm#BABDHCBJ">&#34;Create a Workspace and Add Oracle Application Express Users&#34;</a>.</p>
</li>
<li>
<p>If you are using embedded PL/SQL gateway, run <code>apex_epg_config.sql</code> passing the path to the Oracle Home and then complete the appropriate steps in <a href="db_install.htm#CIHBEIBE">&#34;Configure the Embedded PL/SQL Gateway&#34;</a>.</p>
</li>
<li style="list-style: none">
<div class="infobox-note">
<p class="notep1">See Also:</p>
<a class="olink SQLRF" href="../SQLRF/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about SQL*Plus</div>
<p>When Oracle Application Express installs, it creates three new database accounts:</p>
<ul>
<li>
<p><code>APEX_040200</code> - The account that owns the Oracle Application Express schema and metadata.</p>
</li>
<li>
<p><code>FLOWS_FILES</code> - The account that owns the Oracle Application Express uploaded files.</p>
</li>
<li>
<p><code>APEX_PUBLIC_USER</code> - The minimally privileged account is used for Oracle Application Express configuration with Oracle REST Data Services or Oracle HTTP Server and <code>mod_plsql</code>.</p>
</li>
</ul>
<p>If you configured RESTful Web services, then these additional accounts are created:</p>
<ul>
<li>
<p><code>APEX_REST_PUBLIC_USER</code> - The account used when invoking RESTful Services definitions stored in Oracle Application Express.</p>
</li>
<li>
<p><code>APEX_LISTENER</code> - The account used to query RESTful Services definitions stored in Oracle Application Express.</p>
</li>
</ul>
<div id="HTMIG29174" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref69"></a>
<h3 class="sect2"><span class="secnum">3.1.3</span> Reinstalling Application Express into a <a id="sthref70"></a><a id="sthref71"></a>CDB</h3>
<p>If you previously uninstalled Oracle Application Express 4.2.4 and want to reinstall Application Express into a CDB you need to install Oracle Application Express 4.2.4 using the Oracle Database 12<span class="italic">c</span> distribution. Following the reinstallation you can apply Application Express patches if required as outlined in <a href="#CACHFDDC">&#34;Patching Application Express in the CDB&#34;</a>.</p>
<p>To reinstall Application Express into a CDB:</p>
<ol>
<li>
<p>Change your working directory to <code>$ORACLE_HOME/apex</code>.</p>
</li>
<li>
<p>Start SQL*Plus and connect to the database where Oracle Application Express is installed as SYS specifying the SYSDBA role. For example:</p>
<ul>
<li>
<p>On Windows:</p>
<pre><span class="italic">SYSTEM_DRIVE:\</span> sqlplus /nolog
SQL&gt; CONNECT SYS as SYSDBA
Enter password: <span class="italic">SYS_password</span>
</pre></li>
<li>
<p>On UNIX and Linux:</p>
<pre>$ sqlplus /nolog
SQL&gt; CONNECT SYS as SYSDBA
Enter password: <span class="italic">SYS_password</span>
</pre></li>
</ul>
</li>
<li>
<p>Select the appropriate installation option.</p>
<p><span class="bold">Full development environment</span> provides complete access to the Application Builder environment to develop applications. A <span class="bold">Runtime environment</span> enables users to run applications that cannot be modified. To learn more, see <a href="db_install.htm#CIHFDDDA">&#34;About the Oracle Application Express Runtime Environment&#34;</a>.</p>
<p>Available installation options include:</p>
<ul>
<li>
<p><span class="bold">Full development environment</span>. Run <code>apexins_con.sql</code> passing the following four arguments in the order shown:</p>
<pre>@apexins_con.sql tablespace_apex tablespace_files tablespace_temp images
</pre>
<p>Where:</p>
<ul>
<li>
<p><code>tablespace_apex</code> is the name of the tablespace for the Oracle Application Express application user.</p>
</li>
<li>
<p><code>tablespace_files</code> is the name of the tablespace for the Oracle Application Express files user.</p>
</li>
<li>
<p><code>tablespace_temp</code> is the name of the temporary tablespace or tablespace group.</p>
</li>
<li>
<p><code>images</code> is the virtual directory for Oracle Application Express images. To support future Oracle Application Express upgrades, define the virtual image directory as <code>/i/</code>.</p>
</li>
</ul>
<p>Example:</p>
<pre>@apexins_con.sql SYSAUX SYSAUX TEMP /i/
</pre></li>
<li>
<p><span class="bold">Runtime environment</span>. Run <code>apxrtins_con.sql</code> passing the following arguments in the order shown:</p>
<pre>@apxrtins_con.sql tablespace_apex tablespace_files tablespace_temp images
</pre>
<p>Where:</p>
<ul>
<li>
<p><code>tablespace_apex</code> is the name of the tablespace for the Oracle Application Express application user.</p>
</li>
<li>
<p><code>tablespace_files</code> is the name of the tablespace for the Oracle Application Express files user.</p>
</li>
<li>
<p><code>tablespace_temp</code> is the name of the temporary tablespace or tablespace group.</p>
</li>
<li>
<p><code>images</code> is the virtual directory for Oracle Application Express images. To support future Oracle Application Express upgrades, define the virtual image directory as <code>/i/</code>.</p>
</li>
</ul>
<p>Example:</p>
<pre>@apxrtins_con.sql SYSAUX SYSAUX TEMP /i/
</pre></li>
</ul>
</li>
<li>
<p>If using Oracle REST Data Services, complete appropriate steps in sections <a href="db_install.htm#CIHFJIAD">&#34;Download and Install Oracle REST Data Services&#34;</a> through <a href="db_install.htm#CIHJBIBE">&#34;Create a Workspace and Add Oracle Application Express Users&#34;</a>.</p>
</li>
<li>
<p>If using the Oracle HTTP Server, complete appropriate steps in sections <a href="db_install.htm#CIHJBAGG">&#34;Configure Oracle HTTP Server Distributed with Oracle Database 12<span class="italic">c</span>&#34;</a> through <a href="db_install.htm#BABDHCBJ">&#34;Create a Workspace and Add Oracle Application Express Users&#34;</a>.</p>
</li>
<li>
<p>If using the embedded PL/SQL gateway, run <code>apex_epg_config_con.sql</code> passing the path to the Oracle Home and then complete appropriate steps in <a href="db_install.htm#CIHBEIBE">&#34;Configure the Embedded PL/SQL Gateway&#34;</a>.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">See Also:</p>
<a class="olink SQLRF" href="../SQLRF/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about SQL*Plus</div>
</div>
<!-- class="sect2" -->
<p>When Oracle Application Express installs, it creates three new database accounts:</p>
<ul>
<li>
<p><code>APEX_040200</code> - The account that owns the Oracle Application Express schema and metadata.</p>
</li>
<li>
<p><code>FLOWS_FILES</code> - The account that owns the Oracle Application Express uploaded files.</p>
</li>
<li>
<p><code>APEX_PUBLIC_USER</code> - The minimally privileged account is used for Oracle Application Express configuration with Oracle REST Data Services or Oracle HTTP Server and <code>mod_plsql</code>.</p>
</li>
</ul>
<p>If you configured RESTful Web services, then these additional accounts are created:</p>
<ul>
<li>
<p><code>APEX_REST_PUBLIC_USER</code> - The account used when invoking RESTful Services definitions stored in Oracle Application Express.</p>
</li>
<li>
<p><code>APEX_LISTENER</code> - The account used to query RESTful Services definitions stored in Oracle Application Express.</p>
</li>
</ul>
<a id="CACBEAGE"></a>
<div id="HTMIG29175" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">3.2</span> Plugging in a PDB When Application Express is <a id="sthref72"></a>Installed in the Root Container</h2>
<p>This section describes scenarios in which the target database has Application Express installed into the root container, <code>CDB$ROOT</code> - the default installation option. Note there are multiple scenarios related to where the database being plugged in originated from and how Application Express was configured in the originating database.</p>
<ul>
<li>
<p><a href="#CACCHHFJ">Scenario 1: Plug-in Non-CDB with Oracle Application Express</a></p>
</li>
<li>
<p><a href="#CACBAIHI">Scenario 2: Plug-in PDB with a Common Application Express from Another CDB</a></p>
</li>
<li>
<p><a href="#CACFJFCA">Scenario 3: Plug-in PDB with a Local Application Express from Another CDB</a></p>
</li>
<li>
<p><a href="#CACHFDHF">Scenario 4: Plug-in Non-CDB or PDB with No Application Express</a></p>
</li>
<li>
<p><a href="#CACHCJAD">About Incompatible Application Express Versions</a></p>
</li>
</ul>
<a id="CACCHHFJ"></a>
<div id="HTMIG29177" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.2.1</span> Scenario 1: Plug-in Non-CDB with<a id="sthref73"></a> Oracle Application Express</h3>
<p>If you are upgrading from a previous Oracle Database release, then you first need to upgrade to a Oracle Database 12<span class="italic">c</span> non-CDB (or standalone database) and then plug the database into your CDB. Alternatively, if you have configured a non-CDB Oracle Database 12<span class="italic">c</span>, you may now want to plug this database into a CDB. In both cases, the originating database has Application Express installed and was not formerly a PDB.</p>
<p>As described in the <a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=GINST"><span class="italic">Oracle Database Installation Guide</span></a> for your operating system, when plugging in a standalone database you need to run the <code>$ORACLE_HOME/rdbms/admin/noncdb_to_pdb.sql script</code>. This script creates the necessary metadata linked objects, instead of local objects and recompiles the database objects for all common database options, including Oracle Application Express. After installing Oracle Application Express, you need to configure the Web listener for the PDB as described in <a href="db_install.htm#CIHGAGGB">&#34;Configuration Tasks When Installing from the Database&#34;</a>.</p>
<p>If the version of Application Express installed in the originating database (which is now a PDB) is not the same as that installed into the root container of the target, an error will be raised when trying to open the PDB. For information on how to make the versions of Application Express compatible, see <a href="#CACHCJAD">&#34;About Incompatible Application Express Versions&#34;</a>.</p>
</div>
<!-- class="sect2" -->
<a id="CACBAIHI"></a>
<div id="HTMIG29178" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.2.2</span> Scenario 2: Plug-in PDB with a Common <a id="sthref74"></a>Application Express from Another CDB</h3>
<p>If you are copying or moving a PDB from an existing Oracle Database 12<span class="italic">c</span> where the originating CDB had Application Express installed in the root container, you will not need to perform any additional steps, other than configuring the Web listener for the PDB as described in <a href="db_install.htm#CIHGAGGB">&#34;Configuration Tasks When Installing from the Database&#34;</a>.</p>
<p>Assuming Oracle Application Express release 4.2 is installed, the <code>APEX_040200</code> schema within the PDB being plugged in already has the metadata linked objects defined and will compile without error against the metadata linked objects within the target CDB.</p>
<p>If the version of Application Express installed in the originating database is not the same as that installed in the root container of the target an error is raised when trying to open the PDB. For information on how to make the versions of Application Express compatible, see <a href="#CACHCJAD">&#34;About Incompatible Application Express Versions&#34;</a>.</p>
</div>
<!-- class="sect2" -->
<a id="CACFJFCA"></a>
<div id="HTMIG29179" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.2.3</span> Scenario 3: Plug-in PDB with a Local<a id="sthref75"></a> Application Express from Another CDB</h3>
<p>If you are copying or moving a PDB from an existing Oracle Database 12<span class="italic">c</span> where Application Express was not installed in the root container but is installed locally, then you need to perform additional steps before the PDB can be opened without errors. Assuming Oracle Application Express release 4.2 is installed, the <code>APEX_040200</code> schema within the PDB being plugged in contains all of the Application Express database objects and has no metadata linked objects. Therefore, you need to run <code>$ORACLE_HOME/rdbms/admin/apex_to_common.sql</code> to remove the common objects and create the metadata links for the packages, views and so forth.</p>
<p>To replace local objects with metadata links in the PDB:</p>
<ol>
<li>
<p>Change your working directory to <code>$ORACLE_HOME/rdbms/admin</code>.</p>
</li>
<li>
<p>Start SQL*Plus and connect to the database where Oracle Application Express is installed as SYS specifying the SYSDBA role. For example:</p>
<ul>
<li>
<p>On Windows:</p>
<pre>SYSTEM_DRIVE:\ sqlplus /nolog
SQL&gt; CONNECT SYS as SYSDBA
Enter password: <span class="codeinlineitalic">SYS_password</span>
</pre></li>
<li>
<p>On UNIX and Linux:</p>
<pre>$ sqlplus /nolog
SQL&gt; CONNECT SYS as SYSDBA
Enter password: <span class="italic">SYS_password</span>
</pre></li>
</ul>
</li>
<li>
<p>Set the container to the PDB to be configured:</p>
<pre>ALTER SESSION SET CONTAINER = &lt;<span class="italic">PDB_name</span>&gt;;
</pre></li>
<li>
<p>Run <code>apex_to_common.sql</code>. For example:</p>
<pre>@apex_to_common.sql 

</pre></li>
</ol>
<p>If the version of Application Express installed in the originating database is not the same as that installed in the root container of the target an error is raised when trying to open the PDB. For information on how to make the versions of Application Express compatible, see <a href="#CACHCJAD">&#34;About Incompatible Application Express Versions&#34;</a>.</p>
</div>
<!-- class="sect2" -->
<a id="CACHFDHF"></a>
<div id="HTMIG29180" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.2.4</span> Scenario 4: Plug-in Non-CDB or PDB with <a id="sthref76"></a>No Application Express</h3>
<p>If you are plugging in a non-CDB, or copying or moving a PDB from another CDB, and Application Express is not installed in the originating database or PDB then a warning is raised in the alert log when opening the PDB in the target database.</p>
<p>In this scenario, the Application Express schema, such as <code>APEX_040200</code> for Oracle Application Express release 4.2, will not be present in the originating database or PDB being plugged in. In order to open the PDB without issue and be able to run Application Express within the new PDB, you must install Application Express into the originating database or PDB before attempting to plug in to the target database. You should install the same version of Application Express into the originating database or PDB as the version installed into the target database.</p>
</div>
<!-- class="sect2" -->
<a id="CACHCJAD"></a>
<div id="HTMIG29181" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.2.5</span> About Incompatible Application Express <a id="sthref77"></a>Versions</h3>
<p>If the version of Oracle Application Express in the root container, <code>CDB$ROOT</code>, is not the same as the Oracle Application Express version in the PDB then an error is raised every time the PDB is opened preventing normal database operations within the PDB. The PDB can only be opened in restricted mode by users with RESTRICTED SESSION privilege, until the versions are compatible.</p>
<ul>
<li>
<p><a href="#CACHFDDC">Patching Application Express in the CDB</a></p>
</li>
<li>
<p><a href="#CACCBBHC">Patching Application Express in a PDB</a></p>
</li>
</ul>
<a id="CACHFDDC"></a>
<div id="HTMIG29183" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">3.2.5.1</span> Patching Application Express<a id="sthref78"></a><a id="sthref79"></a> in the CDB</h4>
<p>If the version of Application Express in the PDB is higher than the version of Application Express in the root container, then you must patch the version of Application Express in the root container to be able to open the PDB without error.</p>
<p>To patch Application Express in the root container:</p>
<ol>
<li>
<p>Download the appropriate patch from My Oracle Support.</p>
</li>
<li>
<p>Unzip and extract the installation files.</p>
</li>
<li>
<p>Change your working directory to where the installation files were extracted</p>
</li>
<li>
<p>Start SQL*Plus and connect to the database where Oracle Application Express is installed as SYS specifying the SYSDBA role. For example:</p>
<ul>
<li>
<p>On Windows:</p>
<pre>SYSTEM_DRIVE:\ sqlplus /nolog
SQL&gt; CONNECT SYS as SYSDBA
Enter password: <span class="codeinlineitalic">SYS_password</span>
</pre></li>
<li>
<p>On UNIX and Linux:</p>
<pre>$ sqlplus /nolog
SQL&gt; CONNECT SYS as SYSDBA
Enter password: <span class="italic">SYS_password</span>
</pre></li>
</ul>
</li>
<li>
<p>Run <code>apxpatch_con.sql</code> for example:</p>
<pre>@apxpatch_con.sql
</pre></li>
<li>
<p>Follow the instructions outlined in the Patch Set Notes for updating the images directory based on the Web Server you are using. If you are using the embedded PL/SQL gateway, run <code>apxldimg_con.sql</code> for example:</p>
<pre>@apxldimg_con.sql
</pre></li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CACCBBHC"></a>
<div id="HTMIG29184" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">3.2.5.2</span> Patching Application Express <a id="sthref80"></a><a id="sthref81"></a>in a PDB</h4>
<p>If the version of Application Express in the PDB is lower than the version of Application Express in the root container, <code>CDB$ROOT</code>, then it will be necessary to patch the version of Application Express in the PDB.</p>
<p>To patch Application Express in the PDB:</p>
<ol>
<li>
<p>Download the appropriate patch from My Oracle Support.</p>
</li>
<li>
<p>Unzip and extract the installation files.</p>
</li>
<li>
<p>Change your working directory to where the installation files were extracted</p>
</li>
<li>
<p>Start SQL*Plus and connect to the database where Oracle Application Express is installed as SYS specifying the SYSDBA role. For example:</p>
<ul>
<li>
<p>On Windows:</p>
<pre>SYSTEM_DRIVE:\ sqlplus /nolog
SQL&gt; CONNECT SYS as SYSDBA
Enter password: <span class="codeinlineitalic">SYS_password</span>
</pre></li>
<li>
<p>On UNIX and Linux:</p>
<pre>$ sqlplus /nolog
SQL&gt; CONNECT SYS as SYSDBA
Enter password: <span class="italic">SYS_password</span>
</pre></li>
</ul>
</li>
<li>
<p>Run apxpatch.sql using catcon.pl like the following example:</p>
<pre>host &amp;OH_HOME/perl/bin/perl -I 

&amp;OH_HOME/rdbms/admin <span class="italic">&amp;OH_HOME</span>/rdbms/admin/catcon.pl -b apxpatch -c &#39;&lt;<span class="italic">PDB_name</span>&gt;&#39;  apxpatch.sql  
</pre>
<p>Where:</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">&amp;OH_HOME</span></code> represents the full path to the Oracle home</p>
</li>
<li>
<p>&lt;<code><span class="codeinlineitalic">PDB_name</span></code>&gt; is the name of the PDB you are patching</p>
</li>
</ul>
</li>
<li>
<p>Follow the instructions outlined in the patch set notes for updating the images directory based on the Web Server you are using. If you are using the embedded PL/SQL gateway, run <code>apxldimg.sql</code> for example:</p>
<pre>ALTER SESSION SET CONTAINER = &lt;<span class="italic">PDB_name</span>&gt;;
@apxldimg.sql
</pre></li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CACECJCH"></a>
<div id="HTMIG29185" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">3.3</span> Plugging in a PDB When<a id="sthref82"></a> Application Express Is Not in the Root Container of the Target CDB</h2>
<p>The scenarios in this section describe when Oracle Application Express is not installed in the root container, <code>CDB$ROOT</code>, by explicitly removing it as described in <a href="#CACIICJA">&#34;Uninstalling Application Express from a CDB&#34;</a>. In such cases, you can optionally install a local Application Express into each PDB independently. If Oracle Application Express is installed into a PDB it is considered to be installed locally and has no metadata linked objects. There are multiple scenarios related to where the database being plugged in originated from and how Application Express was configured in the originating database.</p>
<ul>
<li>
<p><a href="#CACHHEDH">Scenario 1: Plug-in a Non-CDB with Application Express</a></p>
</li>
<li>
<p><a href="#CACHFGJC">Scenario 2: Plug-in PDB with Common Application Express from Another CDB</a></p>
</li>
<li>
<p><a href="#CACEFBHA">Scenario 3: Plug-in PDB with a Local Application Express from Another CDB</a></p>
</li>
<li>
<p><a href="#CACDEDJJ">Scenario 4: Plug-in a Non-CDB or PDB with No Application Express</a></p>
</li>
</ul>
<a id="CACHHEDH"></a>
<div id="HTMIG29187" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.3.1</span> Scenario 1: Plug-in a Non-CDB <a id="sthref83"></a>with Application Express</h3>
<p>If you are upgrading from a previous Oracle Database release then you need to upgrade to Oracle Database 12<span class="italic">c</span> non-CDB (or standalone database) and then plug the database into your CDB. Alternatively you may have configured a non-CDB Oracle Database 12<span class="italic">c</span> that you now wish to plug into a CDB. In both cases, the originating database had Application Express installed and was not formerly a PDB.</p>
<p>As described in the <a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=GINST"><span class="italic">Oracle Database Installation Guide</span></a> for your operating system, when plugging in a standalone database you need to run the <code>$ORACLE_HOME/rdbms/admin/noncdb_to_pdb.sql script</code>. This script creates the necessary metadata linked objects (instead of local objects) and recompiles the database objects for all common database options. However, because Oracle Application Express has been removed from the root container, the script will not create any metadata links for any of the Application Express objects. The script does not change the Application Express installation from the originating database and no additional steps are needed other than configuring the Web Server as outlined in <a href="db_install.htm#CIHGAGGB">&#34;Configuration Tasks When Installing from the Database&#34;</a>.</p>
</div>
<!-- class="sect2" -->
<a id="CACHFGJC"></a>
<div id="HTMIG29188" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.3.2</span> Scenario 2: Plug-in PDB with Common<a id="sthref84"></a> Application Express from Another CDB</h3>
<p>If you are copying or moving a PDB from an existing Oracle Database 12<span class="italic">c</span> where the originating CDB had Application Express installed in the root container, then an error is raised whenever you try and open the PDB. The error is due to the fact that the originating PDB included metadata links to objects in the originating root container which cannot be recompiled because the target root container does not include Application Express. You will not be able to open the PDB unless you remove Application Express from the PDB or if Application Express is already installed in the target root container. Oracle does not support installing Application Express in the root container unless no PDBs are installed. For further assistance, contact Oracle Support.</p>
</div>
<!-- class="sect2" -->
<a id="CACEFBHA"></a>
<div id="HTMIG29189" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.3.3</span> Scenario 3: Plug-in PDB with a Local <a id="sthref85"></a>Application Express from Another CDB</h3>
<p>If you are copying or moving a PDB from an existing Oracle Database 12<span class="italic">c</span> where the originating PDB had a local Application Express installed (not in the CDB) then you do not need to perform any additional steps, other than configuring the Web Server in the PDB as described in <a href="db_install.htm#CIHGAGGB">&#34;Configuration Tasks When Installing from the Database&#34;</a>. Assuming Oracle Application Express release 4.2 is installed, the <code>APEX_040200</code> schema within the PDB being plugged in already has all of the Application Express objects defined locally and no metadata links.</p>
</div>
<!-- class="sect2" -->
<a id="CACDEDJJ"></a>
<div id="HTMIG29190" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.3.4</span> Scenario 4: Plug-in a Non-CDB or PDB <a id="sthref86"></a>with No Application Express</h3>
<p>If you are plugging in a non-CDB, or copying or moving a PDB from another CDB, where Application Express was not installed in the originating database or PDB then you do not need to perform any additional steps. There will be no Application Express engine schema, such as <code>APEX_040200</code>, within the PDB, and the PDB can be started without error.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></li>
</ul>
</div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3958">
<tr>
<td class="cellalignment3965">
<table class="cellalignment3963">
<tr>
<td class="cellalignment3962"><a href="pre_require.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3962"><a href="db_install.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3967">
<table class="cellalignment3961">
<tr>
<td class="cellalignment3962"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3962"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3962"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3962"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3962"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3962"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>