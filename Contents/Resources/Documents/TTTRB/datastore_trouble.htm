<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-114088"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Troubleshooting%20TimesTen%20Applications%20and%20Databases"></a><title>Troubleshooting TimesTen Applications and Databases</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023"/>
<meta name="dcterms.created" content="2014-10-07T19:55:0Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="TimesTen In-Memory Database Troubleshooting Guide"/>
<meta name="dcterms.identifier" content="E21636-11"/>
<meta name="dcterms.isVersionOf" content="TTTRB"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="tools.htm" title="Previous" type="text/html"/>
<link rel="Next" href="cache_trouble.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E21636-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">6/10</span> <!-- End Header -->
<div id="TTTRB157" class="chapter"><a id="i1050802"></a>
<h1 class="chapter"><span class="secnum">2</span> Troubleshooting TimesTen Applications and Databases</h1>
<p>The following sections provide information to help you diagnose and remedy some problems encountered while using a TimesTen database:</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are still having problems with your database after following the troubleshooting recommendations in this chapter, contact TimesTen technical support.</div>
<ul>
<li>
<p><a href="#i1189107">Unable to start or stop TimesTen daemon</a></p>
</li>
<li>
<p><a href="#i1189144">No response from TimesTen daemon or subdaemon</a></p>
</li>
<li>
<p><a href="#BABIFFDC">Unable to create shared segment</a></p>
</li>
<li>
<p><a href="#i1167841">Application unable to connect to database in direct mode</a></p>
</li>
<li>
<p><a href="#i1211432">Troubleshooting Client/Server problems</a></p>
</li>
<li>
<p><a href="#i1210931">Application connects or disconnects are slow</a></p>
</li>
<li>
<p><a href="#i1211611">Application is disconnected unexpectedly</a></p>
</li>
<li>
<p><a href="#i1169062">Application is slow</a></p>
</li>
<li>
<p><a href="#i1168229">Application unresponsive, appears hung</a></p>
</li>
<li>
<p><a href="#i1158315">Application unable to find previously created objects</a></p>
</li>
<li>
<p><a href="#BABFBIDA">Troubleshooting OCI and Pro*C/C++ applications</a></p>
</li>
<li>
<p><a href="#i1176032">Running out of a resource</a></p>
</li>
<li>
<p><a href="#i1215727">Duplicate results from a SELECT statement</a></p>
</li>
<li>
<p><a href="#BABHHHFA">Cannot attach PL/SQL shared memory</a></p>
</li>
</ul>
<a id="i1189107"></a>
<div id="TTTRB158" class="sect1">
<h2 class="sect1">Unable to start or stop TimesTen daemon</h2>
<p>This section describes what to check if you cannot start or stop the TimesTen main daemon.</p>
<div class="inftblhruleinformal">
<table class="cellalignment2557" title="Possible causes for trouble starting or stopping the daemon" summary="This table shows possible causes of problems starting or stopping the TimesTen daemon and tells what to do about the problem." dir="ltr">
<thead>
<tr class="cellalignment2551">
<th class="cellalignment2558" id="r1c1-t3">Possible cause</th>
<th class="cellalignment2558" id="r1c2-t3">What to do</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r2c1-t3" headers="r1c1-t3">Privilege is incorrect.</td>
<td class="cellalignment2559" headers="r2c1-t3 r1c2-t3">You need the <code>ADMIN</code> privilege to start or stop the TimesTen daemon. Ensure that you are using the <code>ttDaemonAdmin</code> utility to start the daemon. The output from <code>ttDaemonAdmin</code> shows whether you have the correct privilege.</td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r3c1-t3" headers="r1c1-t3">Another process is using the TimesTen daemon port.</td>
<td class="cellalignment2559" headers="r3c1-t3 r1c2-t3">Use the <code>ttVersion</code> utility to verify what port number the TimesTen daemon is expected to use. Use an operating system command like <code>netstat</code> to check whether another process is listening on the port. If there is a conflict, either change the port number used by the other process or use <code>ttmodinstall</code> to change the port used by TimesTen.</td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r4c1-t3" headers="r1c1-t3">TimesTen daemon is already running.</td>
<td class="cellalignment2559" headers="r4c1-t3 r1c2-t3">Ensure that you are using the <code>ttDaemonAdmin</code> utility to start the daemon. The output from <code>ttDaemonAdmin</code> shows whether the daemon is already running.</td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r5c1-t3" headers="r1c1-t3">There are other problems.</td>
<td class="cellalignment2559" headers="r5c1-t3 r1c2-t3">Inspect the user error log produced by the daemon. See <a href="tools.htm#i1367615">&#34;Using the logs generated by the TimesTen daemon&#34;</a>.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect1" -->
<a id="i1189144"></a>
<div id="TTTRB159" class="sect1">
<h2 class="sect1">No response from TimesTen daemon or subdaemon</h2>
<p>The following sections describe what to do if one or more of the TimesTen processes appears to be unavailable:</p>
<ul>
<li>
<p><a href="#i1226406">Check the TimesTen user error log</a></p>
</li>
<li>
<p><a href="#i1189273">Extract a stack trace from the core file</a></p>
</li>
</ul>
<a id="i1226406"></a>
<div id="TTTRB160" class="sect2">
<h3 class="sect2">Check the TimesTen user error log</h3>
<p>If you receive an error that indicates the TimesTen subdaemon has stopped, inspect the user error log, as described in <a href="tools.htm#i1367615">&#34;Using the logs generated by the TimesTen daemon&#34;</a>.</p>
<p>If the TimesTen daemon crashes, it cannot send anything to the user error log, but the subdaemons send a &#39;main daemon vanished&#39; message to the log before exiting:</p>
<pre>09:24:13 Err : 4375 ------------------: Main daemon has vanished
</pre>
<p>Restart the daemon. The next connection to each database causes TimesTen to recover from the checkpoint and transaction log files. See <a class="olink TTOPR211" href="../TTOPR/daemon.htm#TTOPR211">&#34;Working with the TimesTen Data Manager Daemon&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
</div>
<!-- class="sect2" -->
<a id="i1189273"></a>
<div id="TTTRB161" class="sect2">
<h3 class="sect2">Extract a stack trace from the core file</h3>
<p>If you experience a crash by one of the TimesTen processes on a UNIX system and have exhausted all of the diagnostic options, check to see if TimesTen has generated a core file. Use the <code>ttVersion</code> utility to find the core file. Look for a line in the output that shows a path for the daemon home directory:</p>
<pre>TimesTen Release (ttuser:40732)
2011-04-04T17:53:04Z
   Instance admin: ttuser
   Instance home directory:
/node1/ttuser/ttcur/TTBuild/linux86_dbg/install
   Daemon home directory:
/node1/ttuser/ttcur/TTBuild/linux86_dbg/install/info
</pre>
<p>After locating the core file, attach to the debugger on the system and extract the stack trace from the core file and send the trace results to TimesTen technical support.</p>
<p>On Windows systems you can obtain diagnostic information for a service failure by enabling the &#39;allow service to interact with desktop&#39; option in the properties dialog for the TimesTen data manager in the Service menu. If an irrecoverable fault occurs in the TimesTen data manager service, a pop-up asks if you would like to start the debugger. Contact TimesTen technical support and provide the stack trace.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABIFFDC"></a>
<div id="TTTRB162" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Unable to create shared segment</h2>
<p>You <a id="sthref77"></a><a id="sthref78"></a>may receive an error that indicates that a shared segment could not be created:</p>
<pre>4671: TT14000: TimesTen daemon internal error: Error 28 creating shared segment,
KEY 0x0201f7eb
4671:  -- OS reports too many shared segments in use
4671:  -- Confirm using &#39;ipcs&#39; and take appropriate action
4671: 18538 ------------------: subdaemon process exited
</pre>
<p>Using the Linux <code>ipcs</code> command may display information like this:</p>
<pre>------ Shared Memory Segments --------
 key        shmid      owner     perms      bytes      nattch     status
 0x00000000 1098350592 user1     777        10624      2          dest
 0x00000000 1084817409 user1     777        2439680    2          dest
 0x911fc211 1098383362 user2     666        67108864   1
 0x2814afba 170721285  root      666        1048576    1
</pre>
<p>A status of <code>dest</code> means the memory segment is marked to be destroyed. <code>nattch</code> shows the number of processes still attached to the memory segment. The <code>ipcrm</code> command cannot free the shared memory until the processes detach from the segment or exit. If an application connects to TimesTen and then becomes inactive, nothing can free the shared memory until the user exits or stops the application.</p>
</div>
<!-- class="sect1" -->
<a id="i1167841"></a>
<div id="TTTRB163" class="sect1">
<h2 class="sect1">Application unable to connect to database in direct mode</h2>
<p>This section describes what to check if your application cannot connect to a database in direct mode.</p>
<div class="inftblhruleinformal">
<table class="cellalignment2557" title="Troubleshooting connection problems" summary="This table shows possible causes if an application is unable to connect to the data store in direct mode. It also lists references to solutions." dir="ltr">
<thead>
<tr class="cellalignment2551">
<th class="cellalignment2558" id="r1c1-t4">Possible cause</th>
<th class="cellalignment2558" id="r1c2-t4">See...</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r2c1-t4" headers="r1c1-t4">There is a mismatch between the release of TimesTen and database.</td>
<td class="cellalignment2559" headers="r2c1-t4 r1c2-t4"><a href="#i1142914">&#34;Upgrading your database&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r3c1-t4" headers="r1c1-t4">User does not have <code>CREATE SESSION</code> privilege.</td>
<td class="cellalignment2559" headers="r3c1-t4 r1c2-t4"><a href="#i1188420">&#34;Privileges to connect to database&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r4c1-t4" headers="r1c1-t4">File permissions are incorrect.</td>
<td class="cellalignment2559" headers="r4c1-t4 r1c2-t4"><a href="#i1188598">&#34;Check file system permissions to access database&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r5c1-t4" headers="r1c1-t4">TimesTen daemon or Data Manager service is not running.</td>
<td class="cellalignment2559" headers="r5c1-t4 r1c2-t4"><a href="#i1141803">&#34;Check that the TimesTen daemon is running&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r6c1-t4" headers="r1c1-t4">Incompatible connection attributes or incorrect path name for database set in the DSN.</td>
<td class="cellalignment2559" headers="r6c1-t4 r1c2-t4"><a href="#i1141815">&#34;Check DSN definition&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r7c1-t4" headers="r1c1-t4">There is no available shared memory segment or maximum size of shared memory segment is too small.</td>
<td class="cellalignment2559" headers="r7c1-t4 r1c2-t4"><a href="#i1142885">&#34;Manage semaphores and shared memory segments&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r8c1-t4" headers="r1c1-t4">There is not enough swap space.</td>
<td class="cellalignment2559" headers="r8c1-t4 r1c2-t4"><a href="#i1183116">&#34;Check available swap space (virtual memory)&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r9c1-t4" headers="r1c1-t4">Number of file descriptors is inadequate.</td>
<td class="cellalignment2559" headers="r9c1-t4 r1c2-t4"><a href="#i1225280">&#34;Increase the number of available file descriptors&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r10c1-t4" headers="r1c1-t4">There are other possible causes.</td>
<td class="cellalignment2559" headers="r10c1-t4 r1c2-t4"><a href="tools.htm#i1367615">&#34;Using the logs generated by the TimesTen daemon&#34;</a></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<a id="i1142914"></a>
<div id="TTTRB164" class="sect2">
<h3 class="sect2">Upgrading your database</h3>
<p>A database is only guaranteed to be accessible by the same minor release of TimesTen that was used to create the database. When you upgrade the TimesTen software and you would like to use the new release to access a database that was previously created, create a database with the new release. Then use the <code>ttMigrate</code> utility to copy the tables, indexes, and table data from the old database to the new one.</p>
<p>See <a class="olink TTINS199" href="../TTINS/upgrade.htm#TTINS199">&#34;TimesTen Upgrades&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Installation Guide</span> for details.</p>
</div>
<!-- class="sect2" -->
<a id="i1188420"></a>
<div id="TTTRB165" class="sect2">
<h3 class="sect2">Privileges to connect to database</h3>
<p>The user must have the <a id="sthref79"></a><code>CREATE SESSION</code> privilege to connect to the database. If you do not have access, the administrator must use the <code>GRANT</code> statement to grant you the <code>CREATE SESSION</code> privilege. See <a class="olink TTOPR251" href="../TTOPR/accesscontrol.htm#TTOPR251">&#34;Granting privileges to connect to the database&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
</div>
<!-- class="sect2" -->
<a id="i1188598"></a>
<div id="TTTRB166" class="sect2">
<h3 class="sect2">Check file system permissions to access database</h3>
<p>A &#34;<code>permission denied</code>&#34; error is generated if you attempt to connect to a database and you do not have the proper permissions to access the checkpoint or transaction log files or the directory where those files reside. Check the file system permissions on the files located in the directory specified in the <code>DataStore</code> attribute in your DSN.</p>
</div>
<!-- class="sect2" -->
<a id="i1141803"></a>
<div id="TTTRB167" class="sect2">
<h3 class="sect2">Check that the TimesTen daemon is running</h3>
<p>If the TimesTen daemon or Data Manager service is not running, an attempt to connect to a database generates TimesTen error 799 &#34;<code>Unable to connect to daemon; check daemon status.</code>&#34;</p>
<p>Use the <code>ttStatus</code> utility as described in <a href="#i1226406">&#34;Check the TimesTen user error log&#34;</a> to check the status of the TimesTen daemon.</p>
</div>
<!-- class="sect2" -->
<a id="i1141815"></a>
<div id="TTTRB168" class="sect2">
<h3 class="sect2">Check DSN definition</h3>
<p>In your DSN description, perform the following:</p>
<ul>
<li>
<p><a href="#i1144181">Check DSN attributes</a></p>
</li>
<li>
<p><a href="#i1144210">Check path name to database and transaction log directories</a></p>
</li>
</ul>
<a id="i1144181"></a>
<div id="TTTRB169" class="sect3">
<h4 class="sect3">Check DSN attributes</h4>
<p>Certain connection options or DSN attribute settings combinations are not compatible. In cases where incompatible settings are used, an error is returned to the application when it attempts to connect to a database.</p>
</div>
<!-- class="sect3" -->
<a id="i1144210"></a>
<div id="TTTRB170" class="sect3">
<h4 class="sect3">Check path name to database and transaction log directories</h4>
<p>Confirm that you have specified the correct path names in the <code>DataStore</code> and <code>LogDir</code> attributes in your DSN. Also confirm that the path names are absolute path names, rather than relative. Otherwise, the path name will be relative to the directory where the application was started.</p>
<p>On Windows, be careful to distinguish between User and System DSNs in the ODBC Data Source Administrator. Do not create user DSNs because they are visible only to the user who defines them. System DSNs are visible to all users. In particular, if you run a TimesTen application as a Windows service, it runs as the user <code>SYSTEM</code> by default and does not see any User DSNs. Make sure that you are not using a mapped drive in the database path name.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1142885"></a>
<div id="TTTRB171" class="sect2">
<h3 class="sect2">Manage semaphores and shared memory segments</h3>
<p><a id="sthref80"></a><a id="sthref81"></a><a id="sthref82"></a><a id="sthref83"></a><a id="sthref84"></a><a id="sthref85"></a><a id="sthref86"></a><a id="sthref87"></a><a id="sthref88"></a><a id="sthref89"></a><a id="sthref90"></a><a id="sthref91"></a>An error is generated if you attempt to connect to or create a shared database whose size is larger than the maximum size of shared memory segments configured on your system. Also, an error is generated if the system cannot allocate any more shared memory segments.</p>
<p>On UNIX systems, use commands similar to the following:</p>
<ul>
<li>
<p><code>ipcs -ma</code> to check if you have other shared memory segments using up memory, such as Oracle Database instances or other instances of TimesTen.</p>
</li>
<li>
<p><code>ipcrm</code> to remove a message queue, semaphore set or shared memory segment identifier. Use <code>ipcrm</code> to clean up semaphores or shared memory segments after a faulty TimesTen shutdown, instance crash, daemon crash or other application issues that use shared memory segments and semaphores. Use <code>-m</code> to remove a shared memory segment. Use <code>-s</code> to remove a semaphore.</p>
</li>
<li>
<p><code>ps -eafl</code> to see how much memory is being used by running processes.</p>
</li>
<li>
<p><code>ulimit -a</code> to see if there are any limits on the maximum amount of memory one process can address, maximum file size, and the maximum number of open files.</p>
</li>
</ul>
<p><a id="sthref92"></a><a id="sthref93"></a><a id="sthref94"></a><a id="sthref95"></a>If a shared memory segment is available but is too small to hold your database, use the <code>ttSize</code> utility to estimate the amount of memory required for your tables and then check the values of the <code>PermSize</code> and <code>TempSize</code> attributes to verify the amount of memory established for your database. <a class="olink TTOPR163" href="../TTOPR/using.htm#TTOPR163">&#34;Monitoring PermSize and TempSize attributes&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span> describes guidelines for setting the size of your permanent and temporary memory regions. If the amount of memory established for your database is too large, reset <code>PermSize</code> and <code>TempSize</code> to smaller values. See <a href="#i1156895">&#34;Check the amount of memory allocated to the database&#34;</a> for more information. Another option is to increase the maximum size of the shared memory segment, as described below.</p>
<p>If your application is connected to your database and your database is invalidated because of a system or application failure, the database shared segment is not automatically detached from your application. The next time your application tries to use the database, the application will be disconnected from the database and the shared segment will be detached. If your application remains connected to the invalidated database and does not try to use the database, the application will not disconnect from the database and the shared segment will not be detached. To free memory and swap space, make sure you disconnect or terminate all applications that are connected to the invalidated database.</p>
<p>If a database becomes invalidated because of a system or application failure, and you have disconnected all applications from the database, a subsequent connection recovers the database. If recovery fails because you have run out of database space, then reconnect to the database with a larger <code>PermSize</code> and <code>TempSize</code> value than the ones that are currently in effect.</p>
<p>For more information on how to configure shared memory for TimesTen, see <a class="olink TTINS127" href="../TTINS/install.htm#TTINS127">&#34;Installation prerequisites&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Installation Guide</span>.</p>
</div>
<!-- class="sect2" -->
<a id="i1183116"></a>
<div id="TTTRB172" class="sect2">
<h3 class="sect2">Check available swap space (virtual memory)</h3>
<p>There must be enough swap space to back up shared memory.</p>
<p>On UNIX systems, use the swap command to check and add virtual memory to your system.</p>
<p>On Windows systems, check and reset the size of your virtual memory from the Advanced tab in your Computer Management Properties dialog window.</p>
</div>
<!-- class="sect2" -->
<a id="i1225280"></a>
<div id="TTTRB173" class="sect2">
<h3 class="sect2">Increase the number of available file descriptors</h3>
<p>Each process connected to a TimesTen database keeps at least one operating system file descriptor open. Additional file descriptors may be opened for each connection if checkpoints are issued, and transactions are committed or rolled back. If you receive an error that all file descriptors are in use when attempting to connect to a database, then increase the allowable number of file descriptors. See your operating system documentation for limits on file descriptors and information about changing the number of file descriptors.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1211432"></a>
<div id="TTTRB174" class="sect1">
<h2 class="sect1">Troubleshooting <a id="sthref96"></a><a id="sthref97"></a><a id="sthref98"></a>Client/Server problems</h2>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#i1214191">Cannot connect to the TimesTen Server</a></p>
</li>
<li>
<p><a href="#i1214290">TimesTen Server failed</a></p>
</li>
<li>
<p><a href="#i1214314">Cannot find Server DSN</a></p>
</li>
<li>
<p><a href="#i1214336">TimesTen Server failed to load DRIVER</a></p>
</li>
<li>
<p><a href="#i1214348">Application times out when accessing TimesTen Server</a></p>
</li>
<li>
<p><a href="#i1231186">TimesTen Client loses connection with TimesTen Server</a></p>
</li>
<li>
<p><a href="#i1214383">Failed to attach to shared memory segment for IPC</a></p>
</li>
<li>
<p><a href="#i1214397">Increasing the maximum server connections on Windows XP</a></p>
</li>
<li>
<p><a href="#i1215522">Thread stack overflow when using multiple client connections</a></p>
</li>
<li>
<p><a href="#i1215289">Out of space when DSN specifies new database</a></p>
</li>
<li>
<p>Also consider the topics described in <a href="#i1167841">&#34;Application unable to connect to database in direct mode&#34;</a>.</p>
</li>
</ul>
<a id="i1214191"></a>
<div id="TTTRB175" class="sect2">
<h3 class="sect2">Cannot connect to the TimesTen Server</h3>
<p>You have not correctly identified the system where the TimesTen Server is running.</p>
<p>On a Windows client, select the TimesTen Server in the TimesTen Data Source Setup dialog that is displayed as part of the ODBC Data Source Administrator. To verify the TimesTen Server:</p>
<ol>
<li>
<p>On the Windows Desktop, choose <span class="gui-object-action">Start</span> &gt; <span class="gui-object-action">Settings</span> &gt; <span class="gui-object-action">Control Panel</span>.</p>
</li>
<li>
<p>Double click the <span class="gui-object-action">ODBC</span> icon. This opens the ODBC Data Source Administrator.</p>
</li>
<li>
<p>Click the <span class="gui-object-action">System DSN</span> tab. This displays the System Data Sources list.</p>
</li>
<li>
<p>Select the TimesTen Client data source. This opens the TimesTen Client DSN Setup dialog.</p>
</li>
<li>
<p>Click <span class="gui-object-action">Servers</span>. This opens the TimesTen Logical Server List.</p>
</li>
<li>
<p>Select the TimesTen Server from the list. This opens the TimesTen Logical Server Name Setup dialog.</p>
</li>
<li>
<p>Verify that the values for the <span class="gui-object-action">Network Address</span> and <span class="gui-object-action">Port Number</span> are correct. If necessary, change the values.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you typed the host name or network address directly into the Server Name field of the TimesTen Client DSN Setup, the Client tries to connect to the TimesTen Server using the default port.</div>
</li>
</ol>
<p>If the Network Address and Port Number values are correct, the TimesTen Server may not be running. In the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>, see <a class="olink TTOPR212" href="../TTOPR/daemon.htm#TTOPR212">&#34;Starting and stopping the Oracle TimesTen Data Manager service on Windows&#34;</a> for information about starting the server manually, and <a class="olink TTOPR197" href="../TTOPR/client_server.htm#TTOPR197">&#34;Testing connections&#34;</a> for more information about identifying this problem.</p>
<p>On UNIX, specify the TimesTen Server with the <code>TTC_Server</code> connection attribute in the <code>odbc.ini</code> file on the client. If the value specified for <code>TTC_Server</code> is an actual host name or IP address, the client tries to connect to the TimesTen Server using the default port. In TimesTen, the default port is associated with the TimesTen release number. If the value specified for <code>TTC_Server</code> is a logical Server Name, this logical Server Name must be defined in the <code>ttconnect.ini</code> file. The <code>ttconnect.ini</code> entry for this Server Name must correctly define the host name/IP address and port number on which the TimesTen Server is listening.</p>
<p>If the Network Address and Port Number values are correct, the TimesTen Server may not be running or did not start. See <a class="olink TTOPR213" href="../TTOPR/daemon.htm#TTOPR213">&#34;Starting and stopping the daemon on UNIX&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span> for information about starting the server manually. See <a class="olink TTOPR197" href="../TTOPR/client_server.htm#TTOPR197">&#34;Testing connections&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span> for more information about identifying this problem.</p>
</div>
<!-- class="sect2" -->
<a id="i1214290"></a>
<div id="TTTRB176" class="sect2">
<h3 class="sect2">TimesTen Server <a id="sthref99"></a><a id="sthref100"></a><a id="sthref101"></a>failed</h3>
<p>Check the <a id="sthref102"></a>server&#39;s log file. Server log messages are stored in the files specified by the <code>-userlog</code> and <code>-supportlog</code> options in the <code>ttendaemon.options</code> file. See <a class="olink TTOPR198" href="../TTOPR/client_server.htm#TTOPR198">&#34;Creating and configuring Client DSNs on UNIX&#34;</a> and <a class="olink TTOPR215" href="../TTOPR/daemon.htm#TTOPR215">&#34;Managing TimesTen daemon options&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
<p>The maximum number of concurrent IPC connections to the Server of a particular TimesTen instance is 24,999. However, TimesTen has a limit of 2043 connections (direct or client/server) to a single DSN.</p>
<p>Client/server users can change the file descriptor limit to support a large number of connections. For an example, see <a class="olink TTINS127" href="../TTINS/install.htm#TTINS127">&#34;Installation prerequisites&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Installation Guide</span>.</p>
</div>
<!-- class="sect2" -->
<a id="i1214314"></a>
<div id="TTTRB177" class="sect2">
<h3 class="sect2">Cannot find Server DSN</h3>
<p>On UNIX, verify that the Server DSN is defined in the <code>sys.odbc.ini</code> file on the system running the TimesTen Server.</p>
<p>On Windows, verify that the Server DSN is defined as a System DSN in the ODBC Data Source Administrator on the system running the TimesTen Server. See <a class="olink TTOPR191" href="../TTOPR/client_server.htm#TTOPR191">&#34;Creating and configuring a logical server name on Windows&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
</div>
<!-- class="sect2" -->
<a id="i1214336"></a>
<div id="TTTRB178" class="sect2">
<h3 class="sect2">TimesTen Server failed to load DRIVER</h3>
<p>This error only occurs on UNIX platforms. Open the <code>sys.odbc.ini</code> file on the system running the TimesTen Server and locate the Server DSN you are trying to connect. Verify that the dynamic library specified in the <code>DRIVER</code> attribute for the Server DSN exists and is executable.</p>
</div>
<!-- class="sect2" -->
<a id="i1214348"></a>
<div id="TTTRB179" class="sect2">
<h3 class="sect2">Application times out when accessing TimesTen Server</h3>
<p>The default TimeOut interval is 60 seconds.</p>
<p>To increase this interval on UNIX, change the value of the <code>TTC_Timeout</code> attribute in the <code>odbc.ini</code> file.</p>
<p>To set the timeout interval on Windows, see the instructions in <a class="olink TTOPR194" href="../TTOPR/client_server.htm#TTOPR194">&#34;Setting the timeout interval and authentication&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
</div>
<!-- class="sect2" -->
<a id="i1231186"></a>
<div id="TTTRB180" class="sect2">
<h3 class="sect2">TimesTen Client loses connection with TimesTen Server</h3>
<p>Check to see if the error was due to the Client timing out. Check the TimesTen Server&#39;s log to see why the Server may have severed connection with the Client. Use ping to determine if your network is up or try using <code>telnet</code> to connect to the TimesTen Server port number.</p>
</div>
<!-- class="sect2" -->
<a id="i1214383"></a>
<div id="TTTRB181" class="sect2">
<h3 class="sect2">Failed to attach to shared memory segment for IPC</h3>
<p>While using shared memory segment (SHM) as IPC, the application may see the following error message from the TimesTen Client ODBC Driver if the application reaches the system-defined per-process file-descriptor-limit.</p>
<pre>SQLState    = S1000,
Native Error = 0,
Message     = [TimesTen][TimesTen 11.2.2 CLIENT]Failed to attach to shared memory 
segment for IPC. System error: 24
</pre>
<p>This may happen during a connect operation to the Client DSN when the <code>shmat</code> system call fails because the application has more open file descriptors than the system-defined per-process file descriptor limit. To correct this problem, you must increase your system-defined per-process file descriptor limit. For more information about file descriptor limits, see &#34;<a class="olink TTREF455" href="../TTREF/limit.htm#TTREF455">System Limits</a>&#34; in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
</div>
<!-- class="sect2" -->
<a id="i1214397"></a>
<div id="TTTRB182" class="sect2">
<h3 class="sect2">Increasing the maximum server connections on Windows XP</h3>
<p>On Windows XP, by default, there can be approximately <a id="sthref103"></a>47 child server processes. You can increase the number of connections by setting the <code>MaxConnsPerServer</code> connection attribute in the <code>ttendaemon.options</code> file or in the DSN. This increases the number of connections to 47 times the <code>MaxConnsPerServer</code> value.</p>
</div>
<!-- class="sect2" -->
<a id="i1215522"></a>
<div id="TTTRB183" class="sect2">
<h3 class="sect2">Thread stack overflow when using multiple client connections</h3>
<p>On Solaris, you may receive messages in the user error log about <a id="sthref104"></a><a id="sthref105"></a><a id="sthref106"></a><a id="sthref107"></a>thread stack overflow. On other platforms, you may receive messages about a segmentation fault that mention a possible thread stack overflow.</p>
<p>If these messages occur, increase the server stack size by one of the following methods:</p>
<ul>
<li>
<p>Specify the <code>-ServerStackSize</code> option in the <code>ttendaemon.options</code> file. The <code>ttendaemon.options</code> file applies to all DSNs in the TimesTen instance.</p>
</li>
<li>
<p>Specify the <code>ServerStackSize</code> connection attribute for a specific DSN. This takes precedence over the value in the <code>ttendaemon.options</code> file.</p>
</li>
</ul>
<p>Increasing the server stack size decreases the number of concurrent connections that can be made before running out of swap space.</p>
<p>See <a class="olink TTOPR177" href="../TTOPR/client_server.htm#TTOPR177">&#34;Working with the TimesTen Client and Server&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
</div>
<!-- class="sect2" -->
<a id="i1215289"></a>
<div id="TTTRB184" class="sect2">
<h3 class="sect2">Out of space when DSN specifies new database</h3>
<p>You <a id="sthref108"></a><a id="sthref109"></a>may receive &#34;out of space&#34; messages if you change a DSN to specify a new database while there are existing connections to the original database in a system with multiple client connections. This can happen on 32-bit platforms if either database is close to 2 GB.</p>
<p>Close all connections to the original database. This causes a new server process to be created for connections to the database that is now specified in the DSN. Use the <code>ttStatus</code> utility to list the connections for the old database. Alternatively, you can restart the server by using the <code>ttDaemonAdmin</code> utility with the <code>-restartServer</code> option, which resets all client connections on all DSNs in the instance.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1210931"></a>
<div id="TTTRB185" class="sect1">
<h2 class="sect1">Application connects or disconnects are slow</h2>
<p>This section describes what to check if you encounter slow connects and disconnects to a database. First check your <code>ramPolicy</code> setting. If the <code>ramPolicy</code> setting is <code>inUse</code>, and you are the only user, then at first connect, the entire database is loaded into memory. Consider changing <code>ramPolicy</code> to either <code>always</code> or <code>manual</code>. For more information, see &#34;<a class="olink TTREF321" href="../TTREF/util.htm#TTREF321">ttAdmin</a>&#34; in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
<div class="inftblhruleinformal">
<table class="cellalignment2557" title="Causes of slow connects or disconnects" summary="This table lists possible causes for slow application connects and disconnects. It gives references to solutions." dir="ltr">
<thead>
<tr class="cellalignment2551">
<th class="cellalignment2558" id="r1c1-t6">Possible cause</th>
<th class="cellalignment2558" id="r1c2-t6">See...</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r2c1-t6" headers="r1c1-t6">Database is being recovered.</td>
<td class="cellalignment2559" headers="r2c1-t6 r1c2-t6"><a href="#i1225994">&#34;Check if database is being recovered&#34;</a>, below</td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r3c1-t6" headers="r1c1-t6">ODBC tracing is enabled.</td>
<td class="cellalignment2559" headers="r3c1-t6 r1c2-t6"><a href="#i1179210">&#34;Check ODBC tracing&#34;</a>, below</td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r4c1-t6" headers="r1c1-t6">There are other possible causes.</td>
<td class="cellalignment2559" headers="r4c1-t6 r1c2-t6"><a href="tools.htm#i1367818">&#34;API tracing&#34;</a></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<a id="i1225994"></a>
<div id="TTTRB186" class="sect2">
<h3 class="sect2">Check if database is being recovered</h3>
<p>A slow connect may indicate that a TimesTen database is being recovered. This happens only for a first connect.</p>
</div>
<!-- class="sect2" -->
<a id="i1179210"></a>
<div id="TTTRB187" class="sect2">
<h3 class="sect2">Check ODBC tracing</h3>
<p>On Windows platforms, if ODBC tracing is enabled, it can slow connect and disconnect speeds. Double-click <span class="bold">ODBC</span> in the Control Panel to open the ODBC Data Source Administrator. Select the <span class="bold">Tracing</span> tab and confirm tracing is disabled. See <a href="tools.htm#i1368309">&#34;Using ODBC tracing&#34;</a>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1211611"></a>
<div id="TTTRB188" class="sect1">
<h2 class="sect1">Application is disconnected unexpectedly</h2>
<p>If an application becomes disconnected from a TimesTen database, one of the following events occurs:</p>
<ul>
<li>
<p>If there was no outstanding transaction, the connection is cleanly removed by the TimesTen daemon. Other existing connections continue processing as if no problem had occurred.</p>
</li>
<li>
<p>If there was an outstanding transaction, the transaction is rolled back and the connection is cleanly removed by the TimesTen daemon. Other existing connections continue processing as if no problem had occurred.</p>
</li>
</ul>
<p>This section describes what to check if your application unexpectedly disconnects from the database.</p>
<div class="inftblhruleinformal">
<table class="cellalignment2557" title="Causes of unexpected disconnects" summary="This table contains possible causes for unexpected disconnection of an application. It provides references to solutions." dir="ltr">
<thead>
<tr class="cellalignment2551">
<th class="cellalignment2558" id="r1c1-t7">Possible cause</th>
<th class="cellalignment2558" id="r1c2-t7">See...</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r2c1-t7" headers="r1c1-t7">There is an internal application error.</td>
<td class="cellalignment2559" headers="r2c1-t7 r1c2-t7"><a href="#i1170037">&#34;Check for ODBC, JDBC, OCI, Pro*C, and PL/SQL application errors&#34;</a>, below</td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r3c1-t7" headers="r1c1-t7">There is failure of a concurrent application thread.</td>
<td class="cellalignment2559" headers="r3c1-t7 r1c2-t7"><a href="#i1170037">&#34;Check for ODBC, JDBC, OCI, Pro*C, and PL/SQL application errors&#34;</a>, below
<p><a href="#i1170005">&#34;Check the user error log&#34;</a></p>
</td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r4c1-t7" headers="r1c1-t7">If using a client/server connection, the client may have disconnected from the application.</td>
<td class="cellalignment2559" headers="r4c1-t7 r1c2-t7"><a href="#i1211432">&#34;Troubleshooting Client/Server problems&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r5c1-t7" headers="r1c1-t7">There is an error in the TimesTen library.</td>
<td class="cellalignment2559" headers="r5c1-t7 r1c2-t7">Contact TimesTen technical support.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<a id="i1170037"></a>
<div id="TTTRB189" class="sect2">
<h3 class="sect2">Check for ODBC, JDBC, OCI, Pro*C, and PL/SQL application errors</h3>
<p>Check for the following types of errors:</p>
<ul>
<li>
<p>ODBC errors returned by the <code>SQLError</code> function</p>
</li>
<li>
<p>JDBC errors returned by the <code>SQLException</code> class</p>
</li>
</ul>
<p>TimesTen OCI and Pro*C applications, and those that use PL/SQL, report errors using Oracle database error codes instead of TimesTen error codes. The error messages that accompany the error codes may come from the TimesTen error catalog or the Oracle database error catalog.</p>
<p>By default, TimesTen messages and diagnostic information are stored in:</p>
<ul>
<li>
<p>A user error log that contains error message information. Generally, these messages contain information on actions you may need to take. The default file is <code><span class="codeinlineitalic">daemon_home</span></code><code>/tterrors.log</code>. For more information on modifying the location of the user error log, see <a class="olink TTOPR218" href="../TTOPR/daemon.htm#TTOPR218">&#34;Modifying informational messages&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
</li>
<li>
<p>A support log containing everything in the user error log plus information of use by TimesTen technical support. The default file is <code><span class="codeinlineitalic">daemon_home</span></code><code>/ttmesg.log</code>. For more information on modifying the location of the user error log, see <a class="olink TTOPR218" href="../TTOPR/daemon.htm#TTOPR218">&#34;Modifying informational messages&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
</li>
<li>
<p>An invalidation file containing diagnostic information when TimesTen invalidates a database. This file provides useful troubleshooting information for TimesTen technical support. The invalidation file is created and named based on the value specified by the <code>DataStore</code> connection attribute. This connection attribute is not a file name. For example on Linux platforms, if the <code>DataStore</code> connection attribute is <code>/home/ttuser/AdminData</code>, the actual invalidation file name has a suffix, <code>.inval</code>, <code>/home/ttuser/AdminData.inval</code>. For more information on the <code>DataStore</code> connection attribute, see &#34;<a class="olink TTREF128" href="../TTREF/attribute.htm#TTREF128">DataStore</a>&#34; in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
</li>
</ul>
<p>It may be helpful to use <code>ttTraceMon</code> to generate a level 4 <code>ERR</code> trace for the application and review all of the errors messages that are pushed in the TimesTen direct driver. See <a href="tools.htm#i1367951">&#34;ERR tracing&#34;</a> for details.</p>
</div>
<!-- class="sect2" -->
<a id="i1170005"></a>
<div id="TTTRB190" class="sect2">
<h3 class="sect2">Check the user error log</h3>
<p>If a TimesTen application disconnects without returning an ODBC error or any other warning, look through the user error log. See <a href="tools.htm#i1367615">&#34;Using the logs generated by the TimesTen daemon&#34;</a>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1169062"></a>
<div id="TTTRB191" class="sect1">
<h2 class="sect1">Application is slow</h2>
<p>For details on how to maximize the performance of your application and TimesTen database, see:</p>
<ul>
<li>
<p><a class="olink TTOPR411" href="../TTOPR/perform.htm#TTOPR411">&#34;TimesTen Database Performance Tuning&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span></p>
</li>
<li>
<p><a class="olink TTCDV363" href="../TTCDV/tuning.htm#TTCDV363">&#34;ODBC Application Tuning&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database C Developer&#39;s Guide</span></p>
</li>
<li>
<p><a class="olink TTJDV251" href="../TTJDV/tuning.htm#TTJDV251">&#34;Java Application Tuning&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Java Developer&#39;s Guide</span></p>
</li>
</ul>
<p>This section describes some issues that impair performance.</p>
<div class="inftblhruleinformal">
<table class="cellalignment2557" title="Causes of slow performance" summary="This table contains possible causes for unexpected disconnection of an application. It provides references to solutions." dir="ltr">
<thead>
<tr class="cellalignment2551">
<th class="cellalignment2558" id="r1c1-t8">Possible cause</th>
<th class="cellalignment2558" id="r1c2-t8">See...</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r2c1-t8" headers="r1c1-t8">Using client/server mode.</td>
<td class="cellalignment2559" headers="r2c1-t8 r1c2-t8"><a href="#i1171975">&#34;Consider connection mode&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r3c1-t8" headers="r1c1-t8">Database statistics are outdated.</td>
<td class="cellalignment2559" headers="r3c1-t8 r1c2-t8"><a href="#i1183505">&#34;Update statistics for your tables&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r4c1-t8" headers="r1c1-t8">Committing transactions too frequently.</td>
<td class="cellalignment2559" headers="r4c1-t8 r1c2-t8"><a class="olink TTOPR484" href="../TTOPR/perform.htm#TTOPR484">&#34;Turn off autocommit mode&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r5c1-t8" headers="r1c1-t8"><code>DurableCommits</code> attribute is enabled.</td>
<td class="cellalignment2559" headers="r5c1-t8 r1c2-t8"><a class="olink TTOPR482" href="../TTOPR/perform.htm#TTOPR482">&#34;Use durable commits appropriately&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r6c1-t8" headers="r1c1-t8">SQL statements used more than once are not prepared.</td>
<td class="cellalignment2559" headers="r6c1-t8 r1c2-t8"><a class="olink TTOPR467" href="../TTOPR/perform.htm#TTOPR467">&#34;Prepare statements in advance&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r7c1-t8" headers="r1c1-t8">There is a wrong kind of index, too many indexes, or a wrong size for hash index.</td>
<td class="cellalignment2559" headers="r7c1-t8 r1c2-t8"><a class="olink TTOPR456" href="../TTOPR/perform.htm#TTOPR456">&#34;Select hash, range, or bitmap indexes appropriately&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>
<p><a class="olink TTOPR458" href="../TTOPR/perform.htm#TTOPR458">&#34;Size hash indexes appropriately&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span></p>
</td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r8c1-t8" headers="r1c1-t8">Use of locks is inefficient.</td>
<td class="cellalignment2559" headers="r8c1-t8 r1c2-t8"><a href="#i1184019">&#34;Verify lock and isolation levels&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r9c1-t8" headers="r1c1-t8">Materialized view is improperly configured.</td>
<td class="cellalignment2559" headers="r9c1-t8 r1c2-t8"><a class="olink TTOPR376" href="../TTOPR/comp.htm#TTOPR376">&#34;Performance implications of materialized views&#34;</a> and <a class="olink TTOPR469" href="../TTOPR/perform.htm#TTOPR469">&#34;Materialized view tuning&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r10c1-t8" headers="r1c1-t8">If replication is used, configuration of replication scheme or network environment may be impacting application.</td>
<td class="cellalignment2559" headers="r10c1-t8 r1c2-t8"><a href="rep_trouble.htm#i528938">&#34;Poor replication or XLA performance&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r11c1-t8" headers="r1c1-t8">If TimesTen Cache is used, TimesTen Cache configuration or environment may be impacting application.</td>
<td class="cellalignment2559" headers="r11c1-t8 r1c2-t8"><a href="cache_trouble.htm#i521797">&#34;Poor autorefresh performance&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r12c1-t8" headers="r1c1-t8">There are too many table partitions.</td>
<td class="cellalignment2559" headers="r12c1-t8 r1c2-t8"><a href="#i1187469">&#34;Check partition counts for the tables&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r13c1-t8" headers="r1c1-t8">Tracing is unnecessarily enabled for one or more TimesTen components.</td>
<td class="cellalignment2559" headers="r13c1-t8 r1c2-t8"><a href="#i1184817">&#34;Check trace settings&#34;</a></td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<a id="i1171975"></a>
<div id="TTTRB192" class="sect2">
<h3 class="sect2">Consider connection mode</h3>
<p>Client/server connections are slower than direct connections to TimesTen databases. Driver manager connections can also moderately impact performance. The performance overhead imposed by client/server connections can be significant because of the network latencies involved in all communication with the database.</p>
<p>If your application must run on a different system from the one hosting the database, see <a class="olink TTOPR440" href="../TTOPR/perform.htm#TTOPR440">&#34;Client/Server tuning&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
</div>
<!-- class="sect2" -->
<a id="i1183505"></a>
<div id="TTTRB193" class="sect2">
<h3 class="sect2"><a id="sthref110"></a><a id="sthref111"></a><a id="sthref112"></a>Update statistics for your tables</h3>
<p>The TimesTen query optimizer in general is very good at choosing the most efficient query plan. However, it needs additional information about the tables involved in complex queries in order to choose the best plan. By knowing the number of rows and data distributions of column values for a table, the optimizer has a much better chance of choosing an efficient query plan to access that table.</p>
<p>Before preparing queries that will access a TimesTen table, use the <code>ttOptUpdateStats</code> procedure to update the statistics for that table. When updating the statistics for a table, you get the best results if you update statistics on your tables after loading them with data, but before preparing your queries. For example, if you update statistics on a table before populating it with data, then your queries are optimized with the assumption that the tables contain no rows (or very few). If you later populate your tables with millions of rows and then execute the queries, the plans that worked well for the situation where your tables contained few rows may now be very slow.</p>
<p>For more information about updating statistics, see <a class="olink TTOPR512" href="../TTOPR/query.htm#TTOPR512">&#34;The TimesTen Query Optimizer&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
</div>
<!-- class="sect2" -->
<a id="i1184019"></a>
<div id="TTTRB194" class="sect2">
<h3 class="sect2"><a id="sthref113"></a><a id="sthref114"></a><a id="sthref115"></a><a id="sthref116"></a><a id="sthref117"></a>Verify lock and isolation levels</h3>
<p>The manner in which multiple applications concurrently access the database can have a major impact on performance.</p>
<p>An application can acquire locks on the entire database, individual tables, and individual rows. Additionally, applications can set an isolation level that determines whether they hold read and update locks until their transactions commit or roll back.</p>
<p>Check the <code>SYS.SYSTEMSTATS</code> table, the <code>SYS.MONITOR</code> table, or use the <code>ttXactAdmin</code> utility to detect whether an application is spending time waiting for locks. See <a href="#i1168348">&#34;Check for deadlocks and timeouts&#34;</a> and <a href="tools.htm#i1368246">&#34;Using the ttXactAdmin utility&#34;</a>.</p>
<p>If lock contention is high, you may be able to improve the overall performance of your system by implementing the following:</p>
<ul>
<li>
<p>Set the <a id="sthref118"></a><code>LockLevel</code> configuration attribute or use the <a id="sthref119"></a><code>ttLockLevel</code> procedure to place locks on rows, rather than on the entire database. Row locking is the default.</p>
</li>
<li>
<p>Use the <a id="sthref120"></a><code>ttOptSetFlag</code> procedure to prevent the query optimizer from placing locks on tables. Table locks are sometimes the default, particularly for updates that affect many rows.</p>
</li>
<li>
<p>Use read-committed isolation level (<code>Isolation</code>=1, the default) for those applications do not require serializable access to the transaction data.</p>
</li>
</ul>
<p>If you see a lot of lock contention, but the above settings are all set to minimize contention, then the contention may be related to the application itself. For example, concurrent threads may be repeatedly accessing the same row. The <code>ttXactAdmin</code> utility can sometimes help you detect this sort of contention. Tracing can also be useful in this situation.</p>
<p>For more information about locks and isolation levels, see <a class="olink TTOPR401" href="../TTOPR/trans.htm#TTOPR401">&#34;Concurrency control through isolation and locking&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
</div>
<!-- class="sect2" -->
<a id="i1184817"></a>
<div id="TTTRB195" class="sect2">
<h3 class="sect2">Check trace settings</h3>
<p>Use <code>ttTraceMon</code> <code>-e show</code> as described in <a href="tools.htm#i1367634">&#34;Using the ttTraceMon utility&#34;</a> to confirm tracing is off on all TimesTen components. <code>ERR</code> should be set to 1; all other components should be set to 0. Trace levels are preserved when a database is reloaded.</p>
<p>On Windows platforms, confirm that ODBC tracing is disabled. Double-click <span class="bold">ODBC</span> in the Control Panel to open the ODBC Data Source Administrator. Select the <span class="bold">Tracing</span> tab and confirm tracing is disabled. See <a href="tools.htm#i1368309">&#34;Using ODBC tracing&#34;</a>.</p>
</div>
<!-- class="sect2" -->
<a id="i1187469"></a>
<div id="TTTRB196" class="sect2">
<h3 class="sect2">Check partition counts for the tables</h3>
<p>When a table is created, it has one partition. When you use <code>ALTER TABLE ... ADD COLUMN</code> to add new columns, a new partition is added to the table. Adding multiple columns with a single <code>ALTER TABLE ... ADD COLUMN</code> statement only adds one partition.</p>
<p>There is a limit of 999 partitions per table. Exceeding this number generates error 8204. An extra read for each new partition slightly degrades performance for each of the new partitions. A high partition count should be avoided. On replicated tables that have multiple partitions, additional space is used for each update on the subscriber side, proportional to the number of partitions. This can result in the subscribers using slightly more perm space than the master.</p>
<p>The partition value for each table is tracked in the <code>SYS16</code> column of the system table, <code>SYS.TABLES</code>. Obtain the partition counts for tables by using the following query:</p>
<pre>SELECT tblname, sys16 FROM SYS.TABLES;
</pre>
<p>If you discover that a table has too many partitions, do <span class="italic">one</span> of the following:</p>
<ul>
<li>
<p>Recreate the table.</p>
</li>
<li>
<p>Save and restore the table. Use <code>ttMigrate -c</code> to create a migration file. Then restore the table without additional partitions by using <code>ttMigrate -r -relaxedUpgrade</code>.</p>
</li>
</ul>
<p><code>ALTER TABLE ... DROP COLUMN</code> does not remove partitions from a table. On replicated systems, all master and subscriber databases must be migrated using the <code>-relaxedUpgrade</code> option. Replication does not occur for tables that have different partition structures.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1168229"></a>
<div id="TTTRB197" class="sect1">
<h2 class="sect1">Application unresponsive, appears hung</h2>
<p>This section describes what to check if your application is unresponsive and appears to be hung. First use pstack or equivalent to determine where your application is spending its time.</p>
<div class="inftblhruleinformal">
<table class="cellalignment2557" title="Causes for unresponsive application" summary="This table contains possible causes for unresponsive applications. It provides references to more information about the causes." dir="ltr">
<thead>
<tr class="cellalignment2551">
<th class="cellalignment2558" id="r1c1-t9">Possible cause</th>
<th class="cellalignment2558" id="r1c2-t9">See...</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r2c1-t9" headers="r1c1-t9">There is an internal application error.</td>
<td class="cellalignment2559" headers="r2c1-t9 r1c2-t9"><a href="#i1212595">&#34;Check for ODBC errors&#34;</a>, below</td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r3c1-t9" headers="r1c1-t9">Connection attributes set in DSN are inconsistent.</td>
<td class="cellalignment2559" headers="r3c1-t9 r1c2-t9"><a href="#i1171975">&#34;Consider connection mode&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r4c1-t9" headers="r1c1-t9">There is excessive lock contention.</td>
<td class="cellalignment2559" headers="r4c1-t9 r1c2-t9"><a href="#i1168348">&#34;Check for deadlocks and timeouts&#34;</a>, below</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<p>For any possible cause, you can also see the next section, <a href="#i1212614">&#34;Check logs and gather trace information&#34;</a>.</p>
<a id="i1212614"></a>
<div id="TTTRB198" class="sect2">
<h3 class="sect2">Check logs and gather trace information</h3>
<p>If your application hangs, <a id="sthref121"></a><a id="sthref122"></a><a id="sthref123"></a>check the transaction log by using the <code>ttXactAdmin</code> utility. See <a href="tools.htm#i1368246">&#34;Using the ttXactAdmin utility&#34;</a>.</p>
<p>Also check the user error log for errors, as described in <a href="tools.htm#i1367615">&#34;Using the logs generated by the TimesTen daemon&#34;</a>.</p>
<p>You can also generate a trace log to detect the activities on various TimesTen components as described in <a href="tools.htm#i1367634">&#34;Using the ttTraceMon utility&#34;</a>.</p>
</div>
<!-- class="sect2" -->
<a id="i1212595"></a>
<div id="TTTRB199" class="sect2">
<h3 class="sect2">Check for ODBC errors</h3>
<p>Check the ODBC errors returned by the <code>SQLError</code> function in all applications to determine whether one of them has encountered a problem that caused it to hang. Call <code>SQLError</code> after each ODBC call to identify error or warning conditions when they first happen. Examples of <code>SQLError</code> usage can be found in the demo programs and in <a class="olink TTERR111" href="../TTERR/error.htm#TTERR111">&#34;Retrieving errors and warnings&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Error Messages and SNMP Traps</span>.</p>
<p>If the problem is repeatable, use <code>ttTraceMon</code> to generate a SQL trace to determine where the application is hanging. See <a href="tools.htm#i1367751">&#34;SQL tracing&#34;</a> for details. In more extreme cases, it may be helpful to generate a level 4 <code>ERR</code> trace for the application and review all of the errors messages that are pushed in the TimesTen direct driver. See <a href="tools.htm#i1367951">&#34;ERR tracing&#34;</a> for details.</p>
</div>
<!-- class="sect2" -->
<a id="i1168348"></a>
<div id="TTTRB200" class="sect2">
<h3 class="sect2">Check for deadlocks and timeouts</h3>
<p>If there is no connect problem, a deadlock or timeout may be the problem. The <code>SYS.SYSTEMSTATS</code> table and the <code>SYS.MONITOR</code> table records information about deadlocks and timeouts. See <a href="tools.htm#i1368331">&#34;Monitoring the TimesTen system tables&#34;</a> for information on how view the contents of this table. You can also use the <code>ttXactAdmin</code> utility to detect the types of locks currently held by uncommitted transactions and the resources on which they are being held.<a id="sthref124"></a></p>
<p>If a deadlock occurs, the TimesTen subdaemon negotiates the problem by having an application involved in the deadlock generate TimesTen error 6002, &#34;<code>Lock request denied because of deadlock.</code>&#34; The error message contains the SQL that the lock holder is running, which can help you diagnose the cause of the deadlock. If your application encounters this error, it should roll back the transaction and then reissue the statements for that transaction. Deadlocks can be caused if your application issues statements in a particular order that results in a circular wait, and can sometimes be prevented by changing the order in which the statements are issued.</p>
<p>An application encounters TimesTen error 6003, &#34;<code>Lock request denied because of timeout</code>,&#34; if it cannot acquire a lock within the time period defined by the lock timeout interval set by the <code>LockWait</code> attribute in the DSN or by the <code>ttLockWait</code> procedure in your application. Upon encountering a timeout error, your application can reissue the statement. Keeping transactions short reduces the possibility of lock timeout errors.</p>
<p>In <a id="sthref125"></a>multithreaded applications, a thread that issues requests on different connection handles to the same database may encounter lock conflict with itself. TimesTen resolves these conflicts with lock timeouts.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1158315"></a>
<div id="TTTRB201" class="sect1">
<h2 class="sect1">Application unable to find previously created objects</h2>
<p>This section describes what to check if your application cannot locate previously created tables, indexes, sequences or views in the database.</p>
<div class="inftblhruleinformal">
<table class="cellalignment2557" title="Application unable to find object: causes" summary="This table contains possible causes if an application is unable to find previously created objects. It provides references to more information about the causes." dir="ltr">
<thead>
<tr class="cellalignment2551">
<th class="cellalignment2558" id="r1c1-t10">Possible cause</th>
<th class="cellalignment2558" id="r1c2-t10">See...</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r2c1-t10" headers="r1c1-t10">Database is temporary.</td>
<td class="cellalignment2559" headers="r2c1-t10 r1c2-t10"><a href="#i1145604">&#34;Check temporary DSN attribute&#34;</a>, below</td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r3c1-t10" headers="r1c1-t10">Overwrite attribute is enabled.</td>
<td class="cellalignment2559" headers="r3c1-t10 r1c2-t10"><a href="#i1146009">&#34;Check Overwrite DSN attribute&#34;</a>, below shortly</td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r4c1-t10" headers="r1c1-t10">Path name specified in DSN is relative.</td>
<td class="cellalignment2559" headers="r4c1-t10 r1c2-t10"><a href="#i1146021">&#34;Check path name to database&#34;</a>, below</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<a id="i1145604"></a>
<div id="TTTRB204" class="sect2">
<h3 class="sect2">Check temporary DSN attribute</h3>
<p>Temporary databases (DSN attribute: <code>Temporary</code>=1) persist until all connections to the database have been removed. When attempting to access a table in a temporary database and the table does not exist, it is possible that the database in which the table resided in has been dropped.</p>
</div>
<!-- class="sect2" -->
<a id="i1146009"></a>
<div id="TTTRB205" class="sect2">
<h3 class="sect2">Check Overwrite DSN attribute</h3>
<p>If the <code>Overwrite</code> and <code>AutoCreate</code> DSN attributes are enabled and the database already exists, TimesTen drops that database and creates a new one. Any tables that were created in the old database are dropped.</p>
</div>
<!-- class="sect2" -->
<a id="i1146021"></a>
<div id="TTTRB206" class="sect2">
<h3 class="sect2">Check path name to database</h3>
<p>To ensure that you are always accessing the same database when connecting to a particular DSN, use an absolute database path name instead of a relative one. For example, if the demo database is in the <code>datastore</code> directory, specify:</p>
<pre>DataStore=/datastore/demo
</pre>
<p>rather than:</p>
<pre>DataStore=demo
</pre>
<p>In the latter case, the database path name is relative to the directory where the application was started. If you cannot find a table and you are using a relative database path name, it is possible that the database in which the table resides in does exist but the database (checkpoint and log) files are in a different directory than the one that you are accessing.</p>
<p>See <a class="olink TTOPR124" href="../TTOPR/using.htm#TTOPR124">&#34;Specifying Data Source Names to identify TimesTen databases&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABFBIDA"></a>
<div id="TTTRB207" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Troubleshooting OCI and Pro*C/C++ applications</h2>
<p>On Windows, if <code>NLS_LANG</code> is not set in the environment, the <code>NLS_LANG</code> setting is taken from the registry, <code>HKEY_LOCAL_MACHINE</code><code>\Software\ORACLE</code>\<code>NLS_LANG</code>. If <code>NLS_LANG</code> is set to an invalid value or if <code>NLS_LANG</code> indicates an unsupported character set, either an OCI connection failed error or an <code>ORA-12705</code> error is thrown. For more information on supported character sets, see &#34;<a class="olink TTREF739" href="../TTREF/attribute.htm#TTREF739">Supported character sets</a>&#34; in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
<p>Refer to the <a class="olink TTCDV195" href="../TTCDV/oci.htm#TTCDV195">&#34;Globalization support&#34;</a> section in the OCI chapter of the <span class="italic">Oracle TimesTen In-Memory Database C Developer&#39;s Guide</span> for more information on <code>NLS_LANG</code>.</p>
</div>
<!-- class="sect1" -->
<a id="i1176032"></a>
<div id="TTTRB208" class="sect1">
<h2 class="sect1">Running out of a resource</h2>
<p>This section describes what to check if TimesTen runs out of resources such as memory space, disk space, file descriptors, and semaphores.</p>
<div class="inftblhruleinformal">
<table class="cellalignment2557" title="Symptoms of running out of a resource" summary="This table lists symptoms of running out of a resource. It provides references to more information about the symptoms." dir="ltr">
<thead>
<tr class="cellalignment2551">
<th class="cellalignment2558" id="r1c1-t11">Symptom</th>
<th class="cellalignment2558" id="r1c2-t11">See...</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r2c1-t11" headers="r1c1-t11">Memory consumption seems high.</td>
<td class="cellalignment2559" headers="r2c1-t11 r1c2-t11"><a href="#i1225829">&#34;Operating system tools and shared memory&#34;</a>, below</td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r3c1-t11" headers="r1c1-t11">Running out of memory space.</td>
<td class="cellalignment2559" headers="r3c1-t11 r1c2-t11">
<ul>
<li><a href="#i1225829">&#34;Operating system tools and shared memory&#34;</a>, below</li>
<li>
<p><a href="#i1156895">&#34;Check the amount of memory allocated to the database&#34;</a></p>
</li>
<li>
<p><a href="#i1212897">&#34;Update query optimizer statistics&#34;</a></p>
</li>
<li>
<p><a href="#i1232062">&#34;Check memory used by queries&#34;</a></p>
</li>
<li>
<p><a href="#BABBCGCB">&#34;Out of memory after fatal crash of the database&#34;</a></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r4c1-t11" headers="r1c1-t11">Running out of disk space.</td>
<td class="cellalignment2559" headers="r4c1-t11 r1c2-t11"><a href="#i1176346">&#34;Check transaction log file use of disk space&#34;</a>
<p><a href="#BABIEBEI">&#34;Check if tracing is enabled&#34;</a></p>
</td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r5c1-t11" headers="r1c1-t11">Running out of transaction log space.</td>
<td class="cellalignment2559" headers="r5c1-t11 r1c2-t11"><a href="#i1176346">&#34;Check transaction log file use of disk space&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r6c1-t11" headers="r1c1-t11">Running out of file descriptors.</td>
<td class="cellalignment2559" headers="r6c1-t11 r1c2-t11"><a href="#i1225280">&#34;Increase the number of available file descriptors&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r7c1-t11" headers="r1c1-t11">Running out of semaphores.</td>
<td class="cellalignment2559" headers="r7c1-t11 r1c2-t11"><a href="#i1157854">&#34;Check the semaphore limit&#34;</a></td>
</tr>
<tr class="cellalignment2551">
<td class="cellalignment2559" id="r8c1-t11" headers="r1c1-t11">Running out of CPU.</td>
<td class="cellalignment2559" headers="r8c1-t11 r1c2-t11">Obtain a stack trace and contact TimesTen technical support.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" -->
<a id="i1225829"></a>
<div id="TTTRB209" class="sect2">
<h3 class="sect2">Operating system tools and shared memory</h3>
<p>Operating system tools such as <code><a id="sthref126"></a><a id="sthref127"></a><a id="sthref128"></a><a id="sthref129"></a>top</code>, <code>vmstat</code>, and <code>sar</code> provide statistics about processes and memory usage. The <a id="sthref130"></a>output from these tools can be misleading as an indicator of TimesTen memory consumption because they report shared memory usage for each process but do not report total shared memory usage. Adding together various memory statistics for TimesTen processes overestimates the amount of memory used by TimesTen because shared memory is by definition shared.</p>
</div>
<!-- class="sect2" -->
<a id="i1156895"></a>
<div id="TTTRB210" class="sect2">
<h3 class="sect2">Check the amount of memory allocated to the database</h3>
<p>TimesTen uses both permanent and temporary memory regions. The amount of memory allocated for these regions is set by the <code>PermSize</code> and <code>TempSize</code> attributes in the DSN definition for the database.</p>
<p>When the TimesTen database fills up, it is important to determine whether it is the permanent or the temporary memory region that is filling up. Use the <code>ttIsql</code> <code>dssize</code> command to list allocated, in-use, and high water mark sizes for the permanent and temporary memory regions. The <code>dssize</code> command selects the following values from <code>SYS.MONITOR</code>:</p>
<ul>
<li>
<p><code>PERM_ALLOCATED_SIZE</code></p>
</li>
<li>
<p><code>PERM_IN_USE_SIZE</code></p>
</li>
<li>
<p><code>PERM_IN_USE_HIGH_WATER</code></p>
</li>
<li>
<p><code>TEMP_ALLOCATED_SIZE</code></p>
</li>
<li>
<p><code>TEMP_IN_USE_SIZE</code></p>
</li>
<li>
<p><code>TEMP_IN_USE_HIGH_WATER</code></p>
</li>
</ul>
<p>The permanent memory region consists of table and index data, while the temporary memory region consists of internal structures, such as locks, sorting areas, and compiled commands.</p>
<p>Keeping transactions short and making sure there is enough temporary space in the database prevents locks from occupying all of the remaining temporary space. You can also use table locks if transactions are acquiring tens of thousands of row locks.</p>
<p>For tips on how to estimate the size of your database, see <a class="olink TTOPR414" href="../TTOPR/perform.htm#TTOPR414">&#34;Size your database correctly&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
<a id="i1185941"></a>
<div id="TTTRB211" class="sect3">
<h4 class="sect3">Permanent memory region filling up</h4>
<p>Consider whether you can drop any indexes. You may want to look at query plans to see which indexes are actually used. See <a class="olink TTOPR322" href="../TTOPR/ttisql.htm#TTOPR322">&#34;Viewing and changing query optimizer plans&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>. You can also use the <code>ttRedundantIndexCheck</code> procedure to discover redundant indexes. The procedure returns suggestions about which indexes to drop.</p>
<p>Use the <code>ttSize</code> utility to estimate the amount of memory used by each table in the database. If the amount of data you need to store is too big, you may need to reset the <code>PermSize</code> attribute for the database to increase the size of the permanent memory region. Alternatively, you may need to partition your data into several different databases if, for example, you cannot shrink the temporary memory region or create a bigger database because of limits on the memory.</p>
<p>Sometimes when the permanent memory region fills up, copying the data out of the database, deleting all the data, and copying it back in frees up space. This can be done more efficiently by using the <code>ttMigrate</code> utility with the <code>-relaxedUpgrade</code> option to migrate the data out, destroy and recreate the database, and migrate the data back in. This operation is described in <a class="olink TTINS223" href="../TTINS/migrate.htm#TTINS223">&#34;Reducing database size&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Installation Guide</span>.</p>
<p>Finally, you may have to configure the operating system to allow a larger amount of shared memory to be allocated to a process. You may also have to allocate more swap space for virtual memory.</p>
</div>
<!-- class="sect3" -->
<a id="i1185942"></a>
<div id="TTTRB212" class="sect3">
<h4 class="sect3">Temporary memory region filling up</h4>
<p>Some commands may be allocating too much space because of out-of-date statistics. See <a href="#i1212897">&#34;Update query optimizer statistics&#34;</a>, following.</p>
<p>If updating the statistics does not reduce the temporary memory region, disconnect all connections and then reconnect them. Verify that all connections have been disconnected by using the <code>ttStatus</code> utility. That frees up all temporary space, but you must reprepare commands.</p>
<p>Diagnose memory usage by queries. See <a href="#i1232062">&#34;Check memory used by queries&#34;</a>, following shortly.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1212897"></a>
<div id="TTTRB213" class="sect2">
<h3 class="sect2">Update query optimizer statistics</h3>
<p>Make sure you have updated the optimizer statistics with the <code>ttOptUpdateStats</code> or <code>ttOptEstimateStats</code> procedure. To execute some queries, TimesTen must allocate temporary space. The amount of temporary space required is estimated from statistics about the tables used by the query. Without correct statistics, the temporary space required may be underestimated.</p>
<p>See <a href="tools.htm#i1368407">&#34;Using the query optimizer&#34;</a>.</p>
</div>
<!-- class="sect2" -->
<a id="i1232062"></a>
<div id="TTTRB214" class="sect2">
<h3 class="sect2">Check memory used by queries</h3>
<p>You can check the <a id="sthref131"></a><a id="sthref132"></a>memory that a query uses by observing the high water mark for temporary memory usage. The high water mark represents the largest amount of in-use temporary space used since the high water mark was initialized or reset.</p>
<p>Complete the following tasks:</p>
<ol>
<li>
<p>Use the <code>ttIsql</code> <code>dssize</code> command to check <code>TEMP_IN_USE_SIZE</code> and <code>TEMP_IN_USE_HIGH_WATER</code>. Alternatively, you can query the <code>SYS.SYSTEMSTATS</code> or the <code>SYS.MONITOR</code> table for these values.</p>
</li>
<li>
<p>Call the <code>ttMonitorHighWaterReset</code> procedure to reset the <code>TEMP_IN_USE_HIGH_WATER</code> to the current value for <code>TEMP_IN_USE_SIZE</code>.</p>
</li>
<li>
<p>Execute a query.</p>
</li>
<li>
<p>Use <code>dssize</code> to check <code>TEMP_IN_USE_HIGH_WATER</code> for peak memory usage for the query.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABBCGCB"></a>
<div id="TTTRB342" class="sect2">
<h3 class="sect2">Out of memory after fatal crash of the database</h3>
<p><a id="sthref133"></a><a id="sthref134"></a>Irrecoverable errors, such as errors 846 and 994, invalidate a TimesTen database. However, the database remains in memory, which is only freed after all users have disconnected from the database. If the database is restarted while users are connected to the invalidated database, both old and new instances exist in memory at the same time. In this case, users could receive out-of-memory conditions. To prevent an <code>&#34;Out of memory&#34;</code> error, disconnect all active connections at the time of the irrecoverable error before reconnecting. These irrecoverable errors are rare.</p>
</div>
<!-- class="sect2" -->
<a id="i1176346"></a>
<div id="TTTRB216" class="sect2">
<h3 class="sect2">Check transaction log file use of disk space</h3>
<p>TimesTen saves a copy of the database in two checkpoint files, which are stored in the directory specified by the <code>DataStore</code> attribute. Each checkpoint file can grow on disk to be equivalent to the size of the database in shared memory. For each permanent database, you must have enough disk space for the two checkpoint files and for transaction log files.</p>
<p>Transaction log files accumulate in the directory specified by the <code>LogDir</code> attribute and are only deleted when c<a id="sthref135"></a><a id="sthref136"></a>heckpoints are performed. If the <code>LogDir</code> attribute is not specified in the DSN, transaction log files accumulate in the directory specified by the <code>DataStore</code> attribute. The maximum size of your transaction log files is set by the <code>LogFileSize</code> attribute.</p>
<p>When a disk fills up with TimesTen data, it is most often due to a build-up of transaction log files. Transaction log files are used for numerous purposes in TimesTen, including transaction rollbacks, backups, and replication. It is important to determine which operation is putting a &#34;hold&#34; on the transaction log files, so that appropriate action can be taken to enable the transaction log files to be purged. This can be done by using the <code>ttLogHolds</code> built-in procedure. There are six types of log holds. They are discussed in detail below.</p>
<ul>
<li>
<p><span class="bold">Long-running transactions</span> - TimesTen uses the transaction log to roll back transactions. A log hold is placed for the duration of a transaction. Transactions that are active for a long time result in log file building up if the transaction has written at least one log record. (That is, it is not a read-only transaction.) Commit write transactions with reasonable frequency to avoid significant log file build-up. See <a class="olink TTOPR481" href="../TTOPR/perform.htm#TTOPR481">&#34;Size transactions appropriately&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span> for more information on transaction length.</p>
</li>
<li>
<p><span class="bold">Checkpoint</span> - If a TimesTen application crashes and the database must be recovered, the checkpoint files and transaction log files are used to recover the data. The &#34;most recent&#34; transaction log files are used -- those written since the checkpoint was done. Transaction log files accumulate during the interval between checkpoints. If checkpoints are done very infrequently, a large number of transaction log files may accumulate, particularly if many changes are made to the database during that interval. See <a class="olink TTOPR405" href="../TTOPR/trans.htm#TTOPR405">&#34;Checkpoint operations&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
</li>
<li>
<p><span class="bold">Replication</span> -TimesTen replication transmits changes from one database to one or more other databases. It does this by reading the transaction log and sending any relevant changes. If replication goes down, the transaction log files build up. See <a class="olink TTREP436" href="../TTREP/setup.htm#TTREP436">&#34;Setting the replication state of subscribers&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Replication Guide</span> for more information on pausing and restarting or resetting replication.</p>
</li>
<li>
<p><span class="bold">Backup</span> - TimesTen supports an incremental backup facility that uses transaction log files to augment a backup with changes made since the last backup. Transaction log files accumulate during the interval between incremental backups. To avoid a large log build-up, do incremental backups at relatively frequent intervals. If desired, disable incremental backups and do full backups instead. See <a class="olink TTINS252" href="../TTINS/migrate.htm#TTINS252">&#34;Migration, Backup, and Restoration&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Installation Guide</span>.</p>
</li>
<li>
<p><span class="bold">XLA</span> - TimesTen&#39;s persistent XLA facility reports changes to the database by using transaction log files. Transaction log files are kept until the corresponding transactions have been acknowledged using the <code>ttXlaAcknowledge</code> C function. Call <code>ttXlaAcknowledge</code> frequently enough to prevent transaction log files building up. See <a class="olink TTCDV269" href="../TTCDV/xla_event.htm#TTCDV269">&#34;Retrieving update records from the transaction log&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database C Developer&#39;s Guide</span>.</p>
</li>
<li>
<p><span class="bold">XA</span> - TimesTen&#39;s XA support uses transaction log files to resolve distributed transactions. If these transactions are not resolved in a timely manner, transaction log files build up. See <a class="olink TTCDV327" href="../TTCDV/xa_dtp.htm#TTCDV327">&#34;Distributed Transaction Processing: XA&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database C Developer&#39;s Guide</span>.</p>
</li>
</ul>
<p>The following attributes are related to disk use.</p>
<ul>
<li>
<p>The <code>LogPurge</code> attribute indicates whether transaction log files that no longer have a hold on them are purged (removed from the disk) or simply archived (renamed). If the <code>LogPurge</code> attribute is set to the default value of 0, TimesTen renames transaction log files that it no longer needs by appending the string <code>.arch</code> to the name. Once renamed, you must delete the transaction log files manually when they are no longer needed. If transaction log files are not purged, they continue to accumulate space, even when no longer needed by TimesTen.</p>
</li>
<li>
<p>The <code>Preallocate</code> attribute indicates whether disk space should be reserved for checkpoint files at connect time. This is useful for big databases, to ensure that the disk always has room for the checkpoint files as data is added to the database.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BABIEBEI"></a>
<div id="TTTRB343" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Check if tracing is enabled</h3>
<p><a id="sthref137"></a><a id="sthref138"></a><a id="sthref139"></a><a id="sthref140"></a><a id="sthref141"></a>When tracing to a file has been enabled, the file may grow so large that a process attempting an operation may exceed the file limits. Tracing always appends to an existing file.</p>
</div>
<!-- class="sect2" -->
<a id="i1157854"></a>
<div id="TTTRB217" class="sect2">
<h3 class="sect2">Check the semaphore limit</h3>
<p>When creating multiple client/server connections to a TimesTen database configured to allow shared memory segment as IPC, you may encounter errors that indicate TimesTen could not create a semaphore.</p>
<p>Semaphore limits are platform-dependent.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1215727"></a>
<div id="TTTRB218" class="sect1">
<h2 class="sect1">Duplicate results from a SELECT statement</h2>
<p>Using <a id="sthref142"></a><a id="sthref143"></a>read-committed isolation level can lead to duplicates in a result set. A <code>SELECT</code> statement selects more or fewer rows than the total number of rows in the table if some rows are added or removed and committed in the range in which the <code>SELECT</code> scan is occurring. This may happen when an <code>UPDATE</code>, <code>INSERT</code> or <code>DELETE</code> statement adds or deletes a value from an index and the <code>SELECT</code> scan is using this index. This can also happen when an <code>INSERT</code> or <code>DELETE</code> adds or deletes rows from the table and the <code>SELECT</code> operation is using an all-table scan.</p>
<p>Index values are ordered. An <code>UPDATE</code> of an index value may delete the old value and insert the new value into a different place. In other words it moves a row from one position in the index to another position. If an index scan sees the same row in both positions, it returns the row twice. This does not happen with a serial scan because table pages are unordered and rows do not need to be moved around for an <code>UPDATE</code>. Hence once a scan passes a row, it will not see that same row again.</p>
<p>The only general way to avoid this problem is for the <code>SELECT</code> statement to use Serializable isolation. This prevents a concurrent <code>INSERT</code>, <code>DELETE</code> or <code>UPDATE</code> operation. There is no reliable way to avoid this problem with <code>INSERT</code> or <code>DELETE</code> by forcing the use of an index because these operations affect all indexes. With <code>UPDATE</code>, this problem can be avoided by forcing the <code>SELECT</code> statement to use an index that is not being updated.</p>
<p>For more information about serializable isolation, see <a class="olink TTOPR401" href="../TTOPR/trans.htm#TTOPR401">&#34;Concurrency control through isolation and locking&#34;</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
</div>
<!-- class="sect1" -->
<a id="BABHHHFA"></a>
<div id="TTTRB219" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Cannot attach PL/SQL shared memory</h2>
<p>The <code>PLSQL_MEMORY_ADDRESS</code> first connection attribute determines the virtual address at which the PL/SQL shared memory segment is loaded into each process that uses the TimesTen direct drivers. Since each operating system platform has different mappings for its address space, the default values for the PL/SQL address space defined in the <code>PLSQL_MEMORY_ADDRESS</code> connection attribute are different for each platform, which avoids conflict with operating system mapped address space.</p>
<p>However, if your application overlaps with the PL/SQL mapped address space, you may receive error 8517 &#34;<code>Cannot attach PL/SQL shared memory; PLSQL_MEMORY_ADDRESS not valid or already in use.</code>&#34; In this case, modify the setting for the <code>PLSQL_MEMORY_ADDRESS</code> connection attribute to eliminate the overlap. The reasons for receiving error 8517 can be one of the following:</p>
<ul>
<li>
<p>User allocated memory already uses that address.</p>
</li>
<li>
<p>Some shared memory already uses that address.</p>
</li>
<li>
<p>A shared library already uses that address.</p>
</li>
</ul>
<p>To recover, specify a virtual address that is free for all processes that may connect to the database. If you have a 32-bit program that allocates large amounts of memory before connecting to TimesTen, it may clash with the PL/SQL shared memory segment. In this case, either allocate memory after connecting to TimesTen or use a 64-bit application. In a 64-bit environment, the options for reassigning to another memory address are less complicated than for a 32-bit operating system, where options are limited and potential for overlap is more common.</p>
<p>If an application accesses two or more TimesTen databases at the same time, you must modify the default setting for the <code>PLSQL_MEMORY_ADDRESS</code> attribute in all but one of the TimesTen databases, since the default settings would map the PL/SQL memory address to the same address for all TimesTen databases.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2550">
<tr>
<td class="cellalignment2559">
<table class="cellalignment2555">
<tr>
<td class="cellalignment2554"><a href="tools.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2554"><a href="cache_trouble.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2561">
<table class="cellalignment2553">
<tr>
<td class="cellalignment2554"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2554"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2554"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2554"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2554"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2554"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>