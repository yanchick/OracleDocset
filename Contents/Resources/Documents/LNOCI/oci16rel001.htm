<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-74157"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Connect%2C%20Authorize%2C%20and%20Initialize%20Functions"></a><title>Connect, Authorize, and Initialize Functions</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="OCI relational functions, connect, authorize, and initialize, connect functions, authorize functions, initialize, functions, OCIAppCtxClearAll(), OCIAppCtxSet(), OCIConnectionPoolCreate(), OCI_DEFAULT, OCI_CPOOL_REINITIALIZE, OCIConnectionPoolDestroy(), OCIDBShutdown(), OCIDBStartup(), OCIEnvCreate(), OCI_SUPPRESS_NLS_VALIDATION, OCI_NEW_LENGTH_SEMANTICS, ORA_NCHAR_LITERAL_REPLACE, OCIEnvNlsCreate(), OCI_THREADED, OCI_OBJECT, OCI_EVENTS, OCI_NO_UCB, OCILogoff(), OCILogon(), OCILogon2(), OCIServerAttach(), shadow processes, OCIServerDetach(), OCISessionBegin(), OCI_CRED_RDBMS, OCI_CRED_EXT, OCI_MIGRATE, OCISessionBegin() mode, OCI_SYSDBA, OCI_SYSOPER, OCI_SYSASM, OCI_SYSBKP, OCI_SYSDGD, OCI_SYSKMT, OCI_ATTR_STMTCACHESIZE, OCISessionEnd(), OCISessionGet(), OCISessionPoolCreate(), OCISessionPoolDestroy(), OCISessionRelease(), OCITerminate()"/>
<meta name="dcterms.created" content="2017-06-09T09:07:30Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Call Interface Programmer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49886-11"/>
<meta name="dcterms.isVersionOf" content="LNOCI"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="oci16rel.htm" title="Previous" type="text/html"/>
<link rel="Next" href="oci16rel002.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49886-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-8EDDA0CC-6755-49D8-89D0-81713E10B156"></a> <span id="PAGE" style="display:none;">24/84</span> <!-- End Header -->
<a id="LNOCI17106"></a><a id="LNOCI151"></a>
<h1 id="LNOCI-GUID-8EDDA0CC-6755-49D8-89D0-81713E10B156" class="sect1">Connect, Authorize, and Initialize Functions</h1>
<div>
<div class="section">
<p><a href="oci16rel.htm#GUID-346C6191-C882-415C-9C90-5389B29794C9__CIHGGCHE" title="This table has 2 columns. Column 1 is the mode of a parameter and column 2 is its description.">Table 16-1</a> describes the OCI connect, authorize, and initialize functions that are described in this section.</p>
</div>
<!-- class="section" -->
<div class="tblformalwide" id="GUID-8EDDA0CC-6755-49D8-89D0-81713E10B156__GUID-D8382654-059E-4AF9-B2D8-1274E14F9467">
<p class="titleintable">Table 16-2 Connect, Authorize, and Initialize Functions &nbsp;</p>
<table class="cellalignment6157" title="Connect, Authorize, and Initialize Functions &nbsp;" summary="This table has 2 columns. Column 1 is the OCI function name and column 2 describes its purpose.">
<thead>
<tr class="cellalignment6151">
<th class="cellalignment6186" id="d167698e178">Function</th>
<th class="cellalignment6247" id="d167698e181">Purpose</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e186" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E">OCIAppCtxClearAll()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e186 d167698e181">
<p>Clear all attribute-value information in a namespace of an application context</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e196" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7">OCIAppCtxSet()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e196 d167698e181">
<p>Set an attribute and its associated value in a namespace of an application context</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e206" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" title="Initializes the connection pool.">OCIConnectionPoolCreate()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e206 d167698e181">
<p>Initialize the connection pool</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e219" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2">OCIConnectionPoolDestroy()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e219 d167698e181">
<p>Destroy the connection pool</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e229" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F" title="Shuts down an Oracle Database instance.">OCIDBShutdown()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e229 d167698e181">
<p>Shut down Oracle Database</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e242" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353" title="Starts an Oracle Database instance.">OCIDBStartup()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e242 d167698e181">
<p>Start an Oracle Database instance</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e255" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" title="Creates and initializes an environment handle for OCI functions to work under.">OCIEnvCreate()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e255 d167698e181">
<p>Create and initialize an OCI environment handle</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e268" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="Creates and initializes an environment handle for OCI functions to work under.">OCIEnvNlsCreate()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e268 d167698e181">
<p>Create and initialize an environment handle for OCI functions to work under. Enable you to set character set ID and national character set ID at environment creation time.</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e281" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36" title="Releases a session that was retrieved using OCILogon2() or OCILogon().">OCILogoff()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e281 d167698e181">
<p>Release a session that was retrieved using <code class="codeph">OCILogon2()</code> or <code class="codeph">OCILogon()</code></p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e305" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6">OCILogon()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e305 d167698e181">
<p>Simplify single-session logon</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e315" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-425D4B32-257C-480E-B69C-7112BE9482E6">OCILogon2()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e315 d167698e181">
<p>Create a logon session in various modes</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e326" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-B6291228-DA2F-4CE9-870A-F94243141757">OCIServerAttach()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e326 d167698e181">
<p>Attach to a server; initialize server context handle</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e336" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564">OCIServerDetach()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e336 d167698e181">
<p>Detach from a server; uninitialize server context handle</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e346" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947">OCISessionBegin()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e346 d167698e181">
<p>Authenticate a user</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e356" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F">OCISessionEnd()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e356 d167698e181">
<p>Terminate a user session</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e366" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241">OCISessionGet()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e366 d167698e181">
<p>Get a session from a session pool</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e376" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="Initializes a session pool for use with OCI session pooling and database resident connection pooling (DRCP).">OCISessionPoolCreate()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e376 d167698e181">
<p>Initialize a session pool</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e389" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C">OCISessionPoolDestroy()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e389 d167698e181">
<p>Destroy a session pool</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e399" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D">OCISessionRelease()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e399 d167698e181">
<p>Release a session</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6189" id="d167698e409" headers="d167698e178">
<p><span class="q">&#34;<a href="oci16rel001.htm#GUID-B7BC5F9E-811C-490A-B308-472A12D690D2">OCITerminate()</a>&#34;</span></p>
</td>
<td class="cellalignment6248" headers="d167698e409 d167698e181">
<p>Detach from a shared memory subsystem</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<a id="LNOCI17107"></a>
<div class="props_rev_3"><a id="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E"></a>
<h2 id="LNOCI-GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E" class="sect2">OCIAppCtxClearAll()</h2>
<div>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Clears all attribute-value information in a namespace of an application context.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCIAppCtxClearAll ( void      *sesshndl,
                          void      *nsptr, 
                          ub4       nsptrlen,
                          OCIError  *errhp,
                          ub4       mode ;
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74009"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E__GUID-2DD347BA-FD29-4B22-AC8C-DA2FF3CDB7B4"><!-- --></a>sesshndl (IN/OUT)</dt>
<dd>
<p>Pointer to a session handle.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74010"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E__GUID-11DD46BB-0C05-4E1F-93AE-E581EA203847"><!-- --></a>nsptr (IN)</dt>
<dd>
<p>Pointer to the namespace string (currently only <code class="codeph">CLIENTCONTEXT</code>).</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74011"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E__GUID-CDA5A105-2CD6-4443-8580-F0934F6E2E6F"><!-- --></a>nsptrlen (IN)</dt>
<dd>
<p>Length of the namespace string.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74012"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E__GUID-FFDD549F-338B-4CD0-B807-3317B3625BFC"><!-- --></a>errhp (OUT)</dt>
<dd>
<p>An error handle that can be passed to <a href="oci17msc007.htm#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="Returns an error message and an Oracle Database error code.">OCIErrorGet()</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74013"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E__GUID-C1D4C737-5B29-4DA1-86FB-A4DA1F9E3B42"><!-- --></a>mode (IN)</dt>
<dd>
<p>Mode (<code class="codeph">OCI_DEFAULT</code> is the default).</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Returns</p>
<p>Returns an error number.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>This cleans up the context information on the server side during the next call to the server. This namespace information is cleared from the session handle after the information has been sent to the server and must be set up again if needed.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Functions</p>
<p><a href="oci16rel001.htm#GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7">OCIAppCtxSet()</a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17108"></a>
<div class="props_rev_3"><a id="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7"></a>
<h2 id="LNOCI-GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7" class="sect2">OCIAppCtxSet()</h2>
<div>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Sets an attribute and its associated value in a namespace of an application context.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCIAppCtxSet ( void      *sesshndl,
                     void      *nsptr,
                     ub4       nsptrlen,
                     void      *attrptr,
                     ub4       attrptrlen,
                     void      *valueptr,
                     ub4       valueptrlen,
                     OCIError  *errhp, 
                     ub4       mode );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74014"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-AD66C9C5-1997-4803-9F08-8724C89C0B24"><!-- --></a>sesshndl (IN/OUT)</dt>
<dd>
<p>Pointer to a session handle.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74015"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-B100C238-E3CB-4890-AB46-664188AE2C18"><!-- --></a>nsptr (IN)</dt>
<dd>
<p>Pointer to the namespace string (currently only <code class="codeph">CLIENTCONTEXT</code>).</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74016"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-2AD6892E-2D9A-4FC2-9703-DB4C18678800"><!-- --></a>nsptrlen (IN)</dt>
<dd>
<p>Length of the namespace string.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74017"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-FDA52C7A-5F4B-47A2-8F00-457055642D4E"><!-- --></a>attrptr (IN)</dt>
<dd>
<p>Pointer to the attribute string.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74018"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-3F0C1AD7-C6B7-4C63-9C64-713065A87697"><!-- --></a>attrptrlen (IN)</dt>
<dd>
<p>The length of the string pointed to by <code class="codeph">attrptr</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74019"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-A871F1EC-2473-470D-9496-0F125A87B385"><!-- --></a>valueptr (IN)</dt>
<dd>
<p>Pointer to the value string.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74020"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-4AB12887-03BD-4737-9693-38586B3614E1"><!-- --></a>valueptrlen (IN)</dt>
<dd>
<p>The length of the string pointed to by <code class="codeph">valueptr</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74021"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-5DF124FC-7877-409B-85E2-5B47B78514C8"><!-- --></a>errhp (OUT)</dt>
<dd>
<p>An error handle that can be passed to <a href="oci17msc007.htm#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="Returns an error message and an Oracle Database error code.">OCIErrorGet()</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74022"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1F4B1879-4D91-4F06-BE5C-8F2324F3B4E7__GUID-B1F05683-DD90-4F5B-B212-B1452CE2C1C6"><!-- --></a>mode (IN)</dt>
<dd>
<p>Mode (<code class="codeph">OCI_DEFAULT</code> is the default).</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Returns</p>
<p>Returns an error number.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>The information set on the session handle is sent to the server during the next call to the server.</p>
<p>This information is cleared from the session handle after the information has been sent to the server and must be set up again if needed.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Functions</p>
<p><a href="oci16rel001.htm#GUID-D60E78B5-E600-4CDE-87A7-B4ACDA9FEE5E">OCIAppCtxClearAll()</a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17109"></a>
<div class="props_rev_3"><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2"></a>
<h2 id="LNOCI-GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" class="sect2">OCIConnectionPoolCreate()</h2>
<div>
<p>Initializes the connection pool.</p>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Initializes the connection pool.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCIConnectionPoolCreate ( OCIEnv         *envhp,
                                OCIError       *errhp, 
                                OCICPool       *poolhp,
                                OraText        **poolName,
                                sb4            *poolNameLen,
                                const OraText  *dblink, 
                                sb4             dblinkLen,
                                ub4             connMin,
                                ub4             connMax,
                                ub4             connIncr,
                                const OraText  *poolUsername,
                                sb4             poolUserLen,
                                const OraText  *poolPassword,
                                sb4             poolPassLen,
                                ub4             mode );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74023"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-28960CEC-68D6-4E2C-9A81-34FA73A0FEB0"><!-- --></a>envhp (IN)</dt>
<dd>
<p>A pointer to the environment where the connection pool is to be created</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74024"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-C111F029-ABA4-418C-9635-3077505C6566"><!-- --></a>errhp (IN/OUT)</dt>
<dd>
<p>An error handle that can be passed to <code class="codeph">OCIErrorGet()</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74025"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-1B81F55E-BA03-4DA1-BA3A-4F4FCC89373C"><!-- --></a>poolhp (IN)</dt>
<dd>
<p>An allocated pool handle.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74026"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-6090C464-8E2D-4E13-BF54-FEB63A5E2085"><!-- --></a>poolName (OUT)</dt>
<dd>
<p>The name of the connection pool connected to.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74027"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-7812004E-D83D-4524-9D39-3B04C46D739C"><!-- --></a>poolNameLen (OUT)</dt>
<dd>
<p>The length of the string pointed to by <code class="codeph">poolName</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74028"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-4707E6D0-6291-4D46-A891-3B812E98CCAC"><!-- --></a>dblink (IN)</dt>
<dd>
<p>Specifies the database (server) to connect to.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74029"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-3D40950B-000D-4710-83FC-32591E1D9B1B"><!-- --></a>dblinkLen (IN)</dt>
<dd>
<p>The length of the string pointed to by <code class="codeph">dblink</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74030"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-7477ACB4-8A48-4B19-8B46-3B763BB06B10"><!-- --></a>connMin (IN)</dt>
<dd>
<p>Specifies the minimum number of connections in the connection pool. Valid values are 0 and higher.</p>
<p>These connections are opened to the server by <code class="codeph">OCIConnectionPoolCreate()</code>. After the connection pool is created, connections are opened only when necessary. Generally, this parameter should be set to the number of concurrent statements that the application is planning or expecting to run.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74031"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-08953B26-2AC1-41C3-9C7C-BEB48322BE3E"><!-- --></a>connMax (IN)</dt>
<dd>
<p>Specifies the maximum number of connections that can be opened to the database. After this value is reached, no more connections are opened. Valid values are 1 and higher.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74032"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-CC675B74-5858-4F01-B825-BB800C2716E6"><!-- --></a>connIncr (IN)</dt>
<dd>
<p>Allows the application to set the next increment for connections to be opened to the database if the current number of connections is less than <code class="codeph">connMax</code>. Valid values are 0 and higher.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74033"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-69B46F9D-C74B-4113-BAC7-C0BCB24790E4"><!-- --></a>poolUsername (IN)</dt>
<dd>
<p>Connection pooling requires an implicit primary session. This attribute provides a user name for that session.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74034"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-B1D30819-8BD4-4605-B52C-73CC59C8FF16"><!-- --></a>poolUserLen (IN)</dt>
<dd>
<p>The length of <code class="codeph">poolUsername</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74035"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-8FA1760E-142B-4F73-BE53-692D0040521B"><!-- --></a>poolPassword (IN)</dt>
<dd>
<p>The password for the user name <code class="codeph">poolUsername</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74036"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-4F77A693-10EF-4CF7-ACDD-73B173C5BFC5"><!-- --></a>poolPassLen (IN)</dt>
<dd>
<p>The length of <code class="codeph">poolPassword</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74037"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-7E5A69F2-0268-4655-845D-A7662902FAA2__GUID-9E35A6BC-3056-48FD-A0A0-4C8482EC4D5A"><!-- --></a>mode (IN)</dt>
<dd>
<p>The modes supported are:</p>
</dd>
</dl>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_DEFAULT</code></p>
</li>
<li>
<p><code class="codeph">OCI_CPOOL_REINITIALIZE</code></p>
</li>
</ul>
<p>Ordinarily, <code class="codeph">OCIConnectionPoolCreate()</code> is called with <code class="codeph">mode</code> set to <code class="codeph">OCI_DEFAULT</code>.</p>
<p>To change the pool attributes dynamically (for example, to change the <code class="codeph">connMin</code>, <code class="codeph">connMax</code>, and <code class="codeph">connIncr</code> parameters), call <code class="codeph">OCIConnectionPoolCreate()</code> with <code class="codeph">mode</code> set to <code class="codeph">OCI_CPOOL_REINITIALIZE</code>. When this is done, the other parameters are ignored.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>The OUT parameters <code class="codeph">poolName</code> and <code class="codeph">poolNameLen</code> contain values to be used in subsequent <code class="codeph">OCIServerAttach()</code> and <code class="codeph">OCILogon2()</code> calls in place of the database name and the database name length arguments.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17110"></a>
<div class="props_rev_3"><a id="GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2"></a>
<h2 id="LNOCI-GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2" class="sect2">OCIConnectionPoolDestroy()</h2>
<div>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Destroys the connection pool.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCIConnectionPoolDestroy ( OCICPool     *poolhp,
                                 OCIError     *errhp, 
                                 ub4          mode );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74038"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2__GUID-47E40011-4A42-465C-A6CD-A74F92DF1AEE"><!-- --></a>poolhp (IN)</dt>
<dd>
<p>A pool handle for which a pool has been created.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74039"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2__GUID-1D920F87-D87A-4014-A528-9FDD657ADF58"><!-- --></a>errhp (IN/OUT)</dt>
<dd>
<p>An error handle that can be passed to <a href="oci17msc007.htm#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="Returns an error message and an Oracle Database error code.">OCIErrorGet()</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74040"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2__GUID-1E2262D7-0D1E-4220-9992-775F4B821FB1"><!-- --></a>mode (IN)</dt>
<dd>
<p>Currently, this function supports only the <code class="codeph">OCI_DEFAULT</code> mode.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Functions</p>
<p><a href="oci16rel001.htm#GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" title="Initializes the connection pool.">OCIConnectionPoolCreate()</a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17111"></a>
<div class="props_rev_3"><a id="GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F"></a>
<h2 id="LNOCI-GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F" class="sect2">OCIDBShutdown()</h2>
<div>
<p>Shuts down an Oracle Database instance.</p>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Shuts down an Oracle Database instance.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCIDBShutdown ( OCISvcCtx     *svchp,
                      OCIError      *errhp,
                      OCIAdmin      *admhp,
                      ub4            mode);
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74041"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F__GUID-1EEF1442-2E8D-41B3-B21B-6C986A15EF4E"><!-- --></a>svchp (IN)</dt>
<dd>
<p>A handle to a service context. There must be a valid server handle and a valid user handle set in <code class="codeph">svchp</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74042"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F__GUID-82532D95-332B-4FC8-89DA-7E99B64EDE5D"><!-- --></a>errhp (IN/OUT)</dt>
<dd>
<p>An error handle that can be passed to <code class="codeph">OCIErrorGet()</code> for diagnostic information when there is an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74043"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F__GUID-725AFA1E-F5D1-40BA-9E19-2DBB489B24F8"><!-- --></a>admhp (IN) - Optional</dt>
<dd>
<p>An instance administration handle. Currently not used; pass <code class="codeph">(OCIAdmin *)0</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74044"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-01C4FDCA-2719-4C5C-9348-B9909D178F4F__GUID-CA13DCAB-63A4-4442-8D9D-1BBF982B0EE5"><!-- --></a>mode (IN)</dt>
<dd>
<p><code class="codeph">OCI_DEFAULT</code> - Further connects are prohibited. Waits for users to disconnect from the database.</p>
<p><code class="codeph">OCI_DBSHUTDOWN_TRANSACTIONAL</code> - Further connects are prohibited and no new transactions are allowed. Waits for active transactions to complete.</p>
<p><code class="codeph">OCI_DBSHUTDOWN_TRANSACTIONAL_LOCAL</code> - Further connects are prohibited and no new transactions are allowed. Waits only for local transactions to complete.</p>
<p><code class="codeph">OCI_DBSHUTDOWN_IMMEDIATE</code> - Does not wait for current calls to complete or users to disconnect from the database. All uncommitted transactions are terminated and rolled back.</p>
<p><code class="codeph">OCI_DBSHUTDOWN_FINAL</code> - Shuts down the database. Should be used only in the second call to <code class="codeph">OCIDBShutdown()</code> after the database is closed and dismounted.</p>
<p><code class="codeph">OCI_DBSHUTDOWN_ABORT</code> - Does not wait for current calls to complete or users to disconnect from the database. All uncommitted transactions are terminated and are not rolled back. This is the fastest possible way to shut down the database, but the next database startup may require instance recovery. Therefore, this option should be used only in unusual circumstances; for example, if a background process terminates abnormally.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>To do a shut down, you must be connected to the database as <code class="codeph">SYSOPER</code> or <code class="codeph">SYSDBA</code>. You cannot be connected to a shared server through a dispatcher. When shutting down in any mode other than <code class="codeph">OCI_DBSHUTDOWN_ABORT</code>, use the following procedure:</p>
<ol>
<li>
<p>Call <code class="codeph">OCIDBShutdown()</code> in <code class="codeph">OCI_DEFAULT</code>, <code class="codeph">OCI_DBSHUTDOWN_TRANSACTIONAL</code>, <code class="codeph">OCI_DBSHUTDOWN_TRANSACTIONAL_LOCAL</code>, or <code class="codeph">OCI_DBSHUTDOWN_IMMEDIATE</code> mode to prohibit further connects.</p>
</li>
<li>
<p>Issue the necessary <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> commands to close and dismount the database.</p>
</li>
<li>
<p>Call <code class="codeph">OCIDBShutdown()</code> in <code class="codeph">OCI_DBSHUTDOWN_FINAL</code> mode to shut down the instance.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17112"></a>
<div class="props_rev_3"><a id="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353"></a>
<h2 id="LNOCI-GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353" class="sect2">OCIDBStartup()</h2>
<div>
<p>Starts an Oracle Database instance.</p>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Starts an Oracle Database instance.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCIDBStartup ( OCISvcCtx     *svchp,
                     OCIError      *errhp,
                     OCIAdmin      *admhp,
                     ub4            mode,
                     ub4            flags);
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74045"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353__GUID-B556B458-932B-4BA4-A913-C17F3D855D05"><!-- --></a>svchp (IN)</dt>
<dd>
<p>A handle to a service context. There must be a valid server handle and user handle set in <code class="codeph">svchp</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74046"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353__GUID-3279071E-5EBA-4351-913E-D18032EA5574"><!-- --></a>errhp (IN/OUT)</dt>
<dd>
<p>An error handle that can be passed to <code class="codeph">OCIErrorGet()</code> for diagnostic information when there is an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74047"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353__GUID-A6DD4313-CB20-4924-A762-42A88D3F517A"><!-- --></a>admhp (IN) - Optional</dt>
<dd>
<p>An instance administration handle. Use to pass additional arguments to the startup call, or pass <code class="codeph">(OCIAdmin *)0</code> if you do not set <code class="codeph">OCI_ATTR_ADMIN_PFILE</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74048"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353__GUID-69A7B5F1-F402-4A76-A29F-43DBF276E0F4"><!-- --></a>mode (IN)</dt>
<dd>
<p><code class="codeph">OCI_DEFAULT</code> - This is the only supported mode. It starts the instance, but does not mount or open the database. Same as <code class="codeph">STARTUP</code> <code class="codeph">NOMOUNT</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74049"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-8E4CB0D4-DC77-4AA1-A3F8-9C05DE595353__GUID-25E3904E-9C27-44FB-A262-204BD4508A14"><!-- --></a>flags (IN)</dt>
<dd>
<p><code class="codeph">OCI_DEFAULT</code> - Allows database access to all users.</p>
<p><code class="codeph">OCI_DBSTARTUPFLAG_RESTRICT</code> - Allows database access only to users with both the <code class="codeph">CREATE</code> <code class="codeph">SESSION</code> and <code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code> privileges (normally, the DBA).</p>
<p><code class="codeph">OCI_DBSTARTUPFLAG_FORCE</code> - Shuts down a running instance (if there is any) using <code class="codeph">ABORT</code> before starting a new one. This mode should be used only in unusual circumstances.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>You must be connected to the database as <code class="codeph">SYSOPER</code> or <code class="codeph">SYSDBA</code> in <code class="codeph">OCI_PRELIM_AUTH</code> mode. You cannot be connected to a shared server through a dispatcher (that is, when you restart a running instance with <code class="codeph">OCI_DBSTARTUPFLAG_FORCE</code>). To use a client-side parameter file (<code class="codeph">pfile</code>), <code class="codeph">OCI_ATTR_ADMIN_PFILE</code> must be set in the administration handle; otherwise, a server-side parameter file (<code class="codeph">spfile</code>) is used. A call to <code class="codeph">OCIDBStartup()</code> starts one instance on the server.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI7016"></a>
<div class="props_rev_3"><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244"></a>
<h2 id="LNOCI-GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" class="sect2">OCIEnvCreate()</h2>
<div>
<p>Creates and initializes an environment handle for OCI functions to work under.</p>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Creates and initializes an environment handle for OCI functions to work under.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCIEnvCreate   ( OCIEnv       **envhpp,
                       ub4            mode,
                       const void    *ctxp,
                       const void    *(*malocfp)
                                      (void  *ctxp,
                                      size_t size),
                       const void    *(*ralocfp)
                                      (void  *ctxp,
                                      void  *memptr,
                                      size_t newsize),
                       const void     (*mfreefp)
                                      (void  *ctxp,
                                      void  *memptr))
                       size_t         xtramemsz,
                       void         **usrmempp );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74050"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-F2619050-1770-40B6-A950-B6AEFC9F8AC4"><!-- --></a><span class="bold">envhpp</span> (OUT)</dt>
<dd>
<p>A pointer to an environment handle whose encoding setting is specified by <code class="codeph">mode</code>. The setting is inherited by statement handles derived from <code class="codeph">envhpp</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74051"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-1EE83EAF-7464-44AD-847F-EE94C2C5ECD1"><!-- --></a><span class="bold">mode</span> (IN)</dt>
<dd>
<p>Specifies initialization of the mode. Valid modes are:</p>
</dd>
</dl>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_DEFAULT</code> - The default value, which is non-<code class="codeph">UTF-16</code> encoding.</p>
</li>
<li>
<p><code class="codeph">OCI_THREADED</code> - Uses threaded environment. Internal data structures not exposed to the user are protected from concurrent accesses by multiple threads.</p>
</li>
<li>
<p><code class="codeph">OCI_OBJECT</code> - Uses object features.</p>
</li>
<li>
<p><code class="codeph">OCI_EVENTS</code> - Uses publish-subscribe notifications.</p>
</li>
<li>
<p><code class="codeph">OCI_NO_UCB</code> - Suppresses the calling of the dynamic callback routine <code class="codeph">OCIEnvCallback()</code>. The default behavior is to allow calling of <code class="codeph">OCIEnvCallback()</code> when the environment is created.</p>
<div class="infoboxnotealso" id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-71EC62B6-F6C7-48B5-9A73-F0916F8864EB">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="oci09adv.htm#GUID-C1E8C023-F0D4-4C0A-8585-DA6CCA0DDF65">Dynamic Callback Registrations</a>&#34;</span></p>
</div>
</li>
<li>
<p><code class="codeph">OCI_ENV_NO_MUTEX</code> - No mutual exclusion (mutex) locking occurs in this mode. All OCI calls done on the environment handle, or on handles derived from the environment handle, must be serialized. <code class="codeph">OCI_THREADED</code> must also be specified when <code class="codeph">OCI_ENV_NO_MUTEX</code> is specified.</p>
</li>
<li>
<p><code class="codeph">OCI_SUPPRESS_NLS_VALIDATION</code> - Suppresses NLS character validation; NLS character validation suppression is on by default beginning with Oracle Database 11<span class="italic">g</span> Release 1 (11.1). Use <code class="codeph">OCI_ENABLE_NLS_VALIDATION</code> to enable NLS character validation. See Comments for more information.</p>
</li>
<li>
<p><code class="codeph">OCI_NEW_LENGTH_SEMANTICS</code> - Byte-length semantics is used consistently for all handles, regardless of character sets.</p>
</li>
<li>
<p><code class="codeph">OCI_NCHAR_LITERAL_REPLACE_ON</code> - Turns on N&#39; substitution.</p>
</li>
<li>
<p><code class="codeph">OCI_NCHAR_LITERAL_REPLACE_OFF</code> - Turns off N&#39; substitution. If neither this mode nor <code class="codeph">OCI_NCHAR_LITERAL_REPLACE_ON</code> is used, the substitution is determined by the environment variable <code class="codeph">ORA_NCHAR_LITERAL_REPLACE</code>, which can be set to <code class="codeph">TRUE</code> or <code class="codeph">FALSE</code>. When it is set to <code class="codeph">TRUE</code>, the replacement is turned on; otherwise it is turned off, which is the default setting in OCI.</p>
</li>
<li>
<p><code class="codeph">OCI_ENABLE_NLS_VALIDATION</code> - Enables NLS character validation. See Comments for more information.</p>
</li>
</ul>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74052"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-7FE4D493-BBC4-41B4-9A13-AFA72DA31657"><!-- --></a>ctxp (IN)</dt>
<dd>
<p>Specifies the user-defined context for the memory callback routines.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74053"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-B32089CF-6CC7-47E4-A44F-990B593C40DD"><!-- --></a>malocfp (IN)</dt>
<dd>
<p>Specifies the user-defined memory allocation function. If mode is <code class="codeph">OCI_THREADED</code>, this memory allocation routine must be thread-safe.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74054"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-13E20489-6DF5-4EF1-85F9-C0AD5D07BFA1"><!-- --></a>ctxp (IN)</dt>
<dd>
<p>Specifies the context pointer for the user-defined memory allocation function.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74055"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-13D23EEF-758B-4FF4-AABA-B997A5173411"><!-- --></a>size (IN)</dt>
<dd>
<p>Specifies the size of memory to be allocated by the user-defined memory allocation function.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74056"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-EF7ADEA6-E921-424B-BFAE-36438B6844FC"><!-- --></a>ralocfp (IN)</dt>
<dd>
<p>Specifies the user-defined memory reallocation function. If the mode is <code class="codeph">OCI_THREADED</code>, this memory allocation routine must be thread-safe.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74057"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-491AE4E2-EC2C-47D2-9BB8-D91DB6D35FD7"><!-- --></a>ctxp (IN)</dt>
<dd>
<p>Specifies the context pointer for the user-defined memory reallocation function.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74058"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-DB35B446-8A36-4876-8CC3-22B2D06605AD"><!-- --></a>memptr (IN)</dt>
<dd>
<p>Pointer to memory block.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74059"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-E0182A7F-EA48-4589-916B-22DD399F91C6"><!-- --></a>newsize (IN)</dt>
<dd>
<p>Specifies the new size of memory to be allocated.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74060"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-AB1874D0-1D0E-4069-9F4D-65D024449604"><!-- --></a>mfreefp (IN)</dt>
<dd>
<p>Specifies the user-defined memory free function. If the mode is <code class="codeph">OCI_THREADED</code>, this memory free routine must be thread-safe.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74061"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-84382D08-A2B4-4F83-AAB0-EBCC63FF139A"><!-- --></a>ctxp (IN)</dt>
<dd>
<p>Specifies the context pointer for the user-defined memory free function.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74062"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-45E6995A-0B42-4876-A725-4A3002BDAB5C"><!-- --></a>memptr (IN)</dt>
<dd>
<p>Pointer to memory to be freed.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74063"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-45143402-5A6F-4D2A-A771-32AABF07CAE7"><!-- --></a><span class="bold">xtramemsz</span> (IN)</dt>
<dd>
<p>Specifies the amount of user memory to be allocated for the duration of the environment.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74064"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-3EBFDDD5-F685-40EF-A5C8-CC78EE365F06"><!-- --></a><span class="bold">usrmempp</span> (OUT)</dt>
<dd>
<p>Returns a pointer to the user memory of size <code class="codeph">xtramemsz</code> allocated by the call for the user.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>This call creates an environment for all the OCI calls using the modes specified by the user.</p>
<div class="infobox-note" id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-84B4C3B8-31F0-4FE3-847D-A5F7A56B1ED5">
<p class="notep1">Note:</p>
<p>This call should be invoked before any other OCI call and should be used instead of the <code class="codeph">OCIInitialize()</code> call.</p>
</div>
<p>This call returns an environment handle, which is then used by the remaining OCI functions. There can be multiple environments in OCI, each with its own environment modes. This function also performs any process level initialization if required by any mode. For example, if you want to initialize an environment as <code class="codeph">OCI_THREADED</code>, then all libraries that are used by OCI are also initialized in the threaded mode.</p>
<p>If N&#39; substitution is turned on, the <code class="codeph">OCIStmtPrepare2()</code> function performs the N&#39; substitution on the SQL text and stores the resulting SQL text in the statement handle. Thus, if the application uses <code class="codeph">OCI_ATTR_STATEMENT</code> to retrieve the SQL text from the OCI statement handle, the modified SQL text, instead of the original SQL text, is returned.</p>
<p>To turn on N&#39; substitution in <code class="codeph">ksh</code> shell:</p>
<pre dir="ltr">export ORA_NCHAR_LITERAL_REPLACE=TRUE
</pre>
<p>To turn on N&#39; substitution in <code class="codeph">csh</code> shell:</p>
<pre dir="ltr">setenv ORA_NCHAR_LITERAL_REPLACE TRUE
</pre>
<p>If a remote database is of a release before 10.2, N&#39; substitution is not performed.</p>
<p>If you are writing a DLL or a shared library using the OCI library, then use this call instead of the deprecated <code class="codeph">OCIInitialize()</code> call.</p>
<div class="infoboxnotealso" id="GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244__GUID-2305664D-B172-4DB1-9BD8-247ED4E3AB05">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="oci02bas.htm#GUID-394C2CED-C264-4F81-BD97-CCF9F149CC4C">User Memory Allocation</a>&#34;</span> for more information about the <code class="codeph">xtramemsz</code> parameter and user memory allocation</p>
</div>
<p>Regarding <code class="codeph">OCI_SUPPRESS_NLS_VALIDATION</code> and <code class="codeph">OCI_ENABLE_NLS_VALIDATION</code> modes, by default, when client and server character sets are identical, and client and server releases are both Oracle Database 11<span class="italic">g</span> Release 1 (11.1) or later, OCI does not validate character data in the interest of better performance. This means that if the application inserts a character string with partial multibyte characters (for example, at the end of a bind variable), then such strings could get persisted in the database as is.</p>
<p>Note that if either the client or the server release is older than Oracle Database 11<span class="italic">g</span> Release 1 (11.1), then OCI does not allow partial characters.</p>
<p>The <code class="codeph">OCI_ENABLE_NLS_VALIDATION</code> mode, which was the default until Oracle Database 10<span class="italic">g</span> Release 2 (10.2), ensures that partial multibyte characters are not persisted in the database (when client and server character sets are identical). If the application can produce partial multibyte characters, and if the application can run in an environment where the client and server character sets are identical, then Oracle recommends using the <code class="codeph">OCI_ENABLE_NLS_VALIDATION</code> mode explicitly in order to ensure that such partial characters get stripped out.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Example</p>
<p>Creating a Thread-Safe OCI Environment with N&#39; Substitution Turned On</p>
<pre dir="ltr">OCIEnv *envhp;
...
/* Create a thread-safe OCI environment with N&#39; substitution turned on.  */
if(OCIEnvCreate((OCIEnv **)&amp;envhp,
         (ub4)OCI_THREADED | OCI_NCHAR_LITERAL_REPLACE_ON,
         (void  *)0, (void  * (*)(void  *, size_t))0,
         (void  * (*)(void  *, void  *, size_t))0,
         (void (*)(void  *, void  *))0,
         (size_t)0, (void  **)0))
{
  printf(&#34;Failed: OCIEnvCreate()\n&#34;);
  return 1;
}
...
</pre></div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17114"></a>
<div class="props_rev_3"><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9"></a>
<h2 id="LNOCI-GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" class="sect2">OCIEnvNlsCreate()</h2>
<div>
<p>Creates and initializes an environment handle for OCI functions to work under.</p>
<div class="section">
<p class="subhead2">Purpose</p>
<p>This function is an enhanced version of the <code class="codeph">OCIEnvCreate()</code> function.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCIEnvNlsCreate   ( OCIEnv        **envhpp,
                          ub4             mode,
                          void           *ctxp,
                          void          *(*malocfp)
                                             (void  *ctxp,
                                              size_t size),
                          void          *(*ralocfp)
                                             (void  *ctxp,
                                              void  *memptr,
                                              size_t newsize),
                          void          (*mfreefp)
                                             (void  *ctxp,
                                              void  *memptr))
                          size_t          xtramemsz,
                          void          **usrmempp
                          ub2             charset,
                          ub2             ncharset );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74065"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-8F76143F-1627-45AE-A001-AA407211C74C"><!-- --></a><span class="bold">envhpp</span> (OUT)</dt>
<dd>
<p>A pointer to an environment handle whose encoding setting is specified by <code class="codeph">mode</code>. The setting is inherited by statement handles derived from <code class="codeph">envhpp</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74066"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-046F1313-D272-4A5C-8C86-BEAD78069916"><!-- --></a><span class="bold">mode</span> (IN)</dt>
<dd>
<p>Specifies initialization of the mode. Valid modes are:</p>
</dd>
</dl>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_DEFAULT</code> - The default value, which is non-<code class="codeph">UTF-16</code> encoding.</p>
</li>
<li>
<p><code class="codeph">OCI_THREADED</code> - Uses threaded environment. Internal data structures not exposed to the user are protected from concurrent accesses by multiple threads.</p>
</li>
<li>
<p><code class="codeph">OCI_OBJECT</code> - Uses object features.</p>
</li>
<li>
<p><code class="codeph">OCI_EVENTS</code> - Uses publish-subscribe notifications.</p>
</li>
<li>
<p><code class="codeph">OCI_NO_UCB</code> - Suppresses the calling of the dynamic callback routine <code class="codeph">OCIEnvCallback()</code>. The default behavior is to allow calling of <code class="codeph">OCIEnvCallback()</code> when the environment is created.</p>
<div class="infoboxnotealso" id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-50FFF252-4126-44DE-AF21-2E9E4714752B">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="oci09adv.htm#GUID-C1E8C023-F0D4-4C0A-8585-DA6CCA0DDF65">Dynamic Callback Registrations</a>&#34;</span></p>
</div>
</li>
</ul>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_ENV_NO_MUTEX</code> - No mutual exclusion (mutex) locking occurs in this mode. All OCI calls done on the environment handle, or on handles derived from the environment handle, must be serialized. <code class="codeph">OCI_THREADED</code> must also be specified when <code class="codeph">OCI_ENV_NO_MUTEX</code> is specified.</p>
</li>
<li>
<p><code class="codeph">OCI_SUPPRESS_NLS_VALIDATION</code> - Suppresses NLS character validation; NLS character validation suppression is on by default beginning with Oracle Database 11<span class="italic">g</span> Release 1 (11.1). Use <code class="codeph">OCI_ENABLE_NLS_VALIDATION</code> to enable NLS character validation. See Comments for more information.</p>
</li>
<li>
<p><code class="codeph">OCI_NCHAR_LITERAL_REPLACE_ON</code> - Turns on N&#39; substitution.</p>
</li>
<li>
<p><code class="codeph">OCI_NCHAR_LITERAL_REPLACE_OFF</code> - Turns off N&#39; substitution. If neither this mode nor <code class="codeph">OCI_NCHAR_LITERAL_REPLACE_ON</code> is used, the substitution is determined by the environment variable <code class="codeph">ORA_NCHAR_LITERAL_REPLACE</code>, which can be set to <code class="codeph">TRUE</code> or <code class="codeph">FALSE</code>. When it is set to <code class="codeph">TRUE</code>, the replacement is turned on; otherwise it is turned off, the default setting in OCI.</p>
</li>
<li>
<p><code class="codeph">OCI_ENABLE_NLS_VALIDATION</code> - Enables NLS character validation. See Comments for more information.</p>
</li>
</ul>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74067"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-A4039B72-4E35-4F34-93EB-E40E51897D8E"><!-- --></a>ctxp (IN)</dt>
<dd>
<p>Specifies the user-defined context for the memory callback routines.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74068"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-1FA9A166-9990-4FE8-8330-BF0DAF55A8FB"><!-- --></a>malocfp (IN)</dt>
<dd>
<p>Specifies the user-defined memory allocation function. If <code class="codeph">mode</code> is <code class="codeph">OCI_THREADED</code>, this memory allocation routine must be thread-safe.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74069"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-680AAD1B-2D04-4A02-9453-72A19EBACB59"><!-- --></a>ctxp (IN)</dt>
<dd>
<p>Specifies the context pointer for the user-defined memory allocation function.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74070"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-EBAD99BA-19FD-4121-A96A-577E47EC0798"><!-- --></a>size (IN)</dt>
<dd>
<p>Specifies the size of memory to be allocated by the user-defined memory allocation function.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74071"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-A5F054E3-DE83-4594-BF1F-5971A618085D"><!-- --></a>ralocfp (IN)</dt>
<dd>
<p>Specifies the user-defined memory reallocation function. If the mode is <code class="codeph">OCI_THREADED</code>, this memory allocation routine must be thread-safe.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74072"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-FB5B2A76-9DCC-4E19-9AAC-BCE0D140D42D"><!-- --></a>ctxp (IN)</dt>
<dd>
<p>Specifies the context pointer for the user-defined memory reallocation function.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74073"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-7E8C0EF3-D7FF-48E4-B642-D937156DB46B"><!-- --></a>memptr (IN)</dt>
<dd>
<p>Pointer to memory block.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74074"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-6D35B365-D704-462D-B279-FC2AAE82CCD9"><!-- --></a>newsize (IN)</dt>
<dd>
<p>Specifies the new size of memory to be allocated.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74075"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-A2803EB7-A275-4477-8D55-067F023D1211"><!-- --></a>mfreefp (IN)</dt>
<dd>
<p>Specifies the user-defined memory free function. If the mode is <code class="codeph">OCI_THREADED</code>, this memory free routine must be thread-safe.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74076"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-2E869997-89BE-4865-9330-1F71E53D3E7F"><!-- --></a>ctxp (IN)</dt>
<dd>
<p>Specifies the context pointer for the user-defined memory free function.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74077"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-EC8BBF94-6590-4C3E-BB2A-AE3F22D7B16E"><!-- --></a>memptr (IN)</dt>
<dd>
<p>Pointer to memory to be freed.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74078"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-DA26D46E-DAEC-41C9-AC0D-40BEAD012D61"><!-- --></a><span class="bold">xtramemsz</span> (IN)</dt>
<dd>
<p>Specifies the amount of user memory to be allocated for the duration of the environment.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74079"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-63B363DA-218A-42B2-970F-1A035C62DA1E"><!-- --></a><span class="bold">usrmempp</span> (OUT)</dt>
<dd>
<p>Returns a pointer to the user memory of size <code class="codeph">xtramemsz</code> allocated by the call for the user.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74080"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-44BFA607-0BFA-4EAE-803F-EED985CBB501"><!-- --></a>charset (IN)</dt>
<dd>
<p>The client-side character set for the current environment handle. If it is 0, the <code class="codeph">NLS_LANG</code> setting is used. <code class="codeph">OCI_UTF16ID</code> is a valid setting; it is used by the metadata and the <code class="codeph">CHAR</code> data.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74081"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-327599C1-8799-4CF1-A20A-BC73388A1C9F"><!-- --></a>ncharset (IN)</dt>
<dd>
<p>The client-side national character set for the current environment handle. If it is 0, <code class="codeph">NLS_NCHAR</code> setting is used. <code class="codeph">OCI_UTF16ID</code> is a valid setting; it is used by the <code class="codeph">NCHAR</code> data.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Returns</p>
<p><code class="codeph">OCI_SUCCESS</code> - Environment handle has been successfully created.</p>
<p><code class="codeph">OCI_ERROR</code> - An error occurred.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>This call creates an environment for all the OCI calls using the modes you specify.</p>
<p>After you use <code class="codeph">OCIEnvNlsCreate()</code> to create the environment handle, the actual lengths and returned lengths of bind and define handles are always expressed in number of bytes. This applies to the following calls:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCIBindByName()</code> and <code class="codeph">OCIBindByName2()</code></p>
</li>
<li>
<p><code class="codeph">OCIBindByPos()</code> and <code class="codeph">OCIBindByPos2()</code></p>
</li>
<li>
<p><code class="codeph">OCIBindDynamic()</code></p>
</li>
<li>
<p><code class="codeph">OCIDefineByPos()</code> and <code class="codeph">OCIDefineByPos2()</code></p>
</li>
<li>
<p><code class="codeph">OCIDefineDynamic()</code></p>
</li>
</ul>
<p>This function enables you to set <code class="codeph">charset</code> and <code class="codeph">ncharset</code> IDs at environment creation time. It is an enhanced version of the <code class="codeph">OCIEnvCreate()</code> function.</p>
<p>This function sets nonzero <code class="codeph">charset</code> and <code class="codeph">ncharset</code> as client-side database and national character sets, replacing the ones specified by <code class="codeph">NLS_LANG</code> and <code class="codeph">NLS_NCHAR</code>. When <code class="codeph">charset</code> and <code class="codeph">ncharset</code> are 0, the function behaves exactly the same as <code class="codeph">OCIEnvCreate()</code>. Specifically, <code class="codeph">charset</code> controls the encoding for metadata and data with implicit form attribute, and <code class="codeph">ncharset</code> controls the encoding for data with <code class="codeph">SQLCS_NCHAR</code> form attribute.</p>
<p>Although <code class="codeph">OCI_UTF16ID</code> can be set by <code class="codeph">OCIEnvNlsCreate()</code>, it cannot be set in <code class="codeph">NLS_LANG</code> or <code class="codeph">NLS_NCHAR</code>. To access the character set IDs in <code class="codeph">NLS_LANG</code> and <code class="codeph">NLS_NCHAR</code>, use <code class="codeph">OCINlsEnvironmentVariableGet()</code>.</p>
<p>This call returns an environment handle, which is then used by the remaining OCI functions. There can be multiple environments in OCI, each with its own environment modes. This function also performs any process level initialization if required by any mode. For example, if you want to initialize an environment as <code class="codeph">OCI_THREADED</code>, then all libraries that are used by OCI are also initialized in the threaded mode.</p>
<p>If N&#39; substitution is turned on, the <code class="codeph">OCIStmtPrepare2()</code> function performs the N&#39; substitution on the SQL text and stores the resulting SQL text in the statement handle. Thus, if the application uses <code class="codeph">OCI_ATTR_STATEMENT</code> to retrieve the SQL text from the OCI statement handle, the modified SQL text, instead of the original SQL text, is returned.</p>
<p>To turn on N&#39; substitution in <code class="codeph">ksh</code> shell:</p>
<pre dir="ltr">export ORA_NCHAR_LITERAL_REPLACE=TRUE
</pre>
<p>To turn on N&#39; substitution in <code class="codeph">csh</code> shell:</p>
<pre dir="ltr">setenv ORA_NCHAR_LITERAL_REPLACE TRUE
</pre>
<p>If a remote database is of a release before 10.2, N&#39; substitution is not performed.</p>
<p>If you are writing a DLL or a shared library using the OCI library, then use this call instead of the deprecated <code class="codeph">OCIInitialize()</code> call.</p>
<div class="infoboxnotealso" id="GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9__GUID-0677DC20-0582-4D98-9E62-A9DEA7124258">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="oci02bas.htm#GUID-394C2CED-C264-4F81-BD97-CCF9F149CC4C">User Memory Allocation</a>&#34;</span> for more information about the <code class="codeph">xtramemsz</code> parameter and user memory allocation</p>
</li>
<li>
<p><code class="codeph">OCIEnvCreate()</code> for a code example illustrating setting N&#39; substitution in a related function</p>
</li>
</ul>
</div>
<p>Regarding <code class="codeph">OCI_SUPPRESS_NLS_VALIDATION</code> and <code class="codeph">OCI_ENABLE_NLS_VALIDATION</code> modes, by default, when client and server character sets are identical, and client and server releases are both Oracle Database 11<span class="italic">g</span> Release 1 (11.1) or later, OCI does not validate character data in the interest of better performance. This means that if the application inserts a character string with partial multibyte characters (for example, at the end of a bind variable), then such strings could get persisted in the database as is.</p>
<p>Note that if either the client or the server release is older than Oracle Database 11<span class="italic">g</span> Release 1 (11.1), then OCI does not allow partial characters.</p>
<p>The <code class="codeph">OCI_ENABLE_NLS_VALIDATION</code> mode, which was the default until Oracle Database 10<span class="italic">g</span> Release 2 (10.2), ensures that partial multibyte characters are not persisted in the database (when client and server character sets are identical). If the application can produce partial multibyte characters, and if the application can run in an environment where the client and server character sets are identical, then Oracle recommends using the <code class="codeph">OCI_ENABLE_NLS_VALIDATION</code> mode explicitly in order to ensure that such partial characters get stripped out.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17116"></a>
<div class="props_rev_3"><a id="GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36"></a>
<h2 id="LNOCI-GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36" class="sect2">OCILogoff()</h2>
<div>
<p>Releases a session that was retrieved using <code class="codeph">OCILogon2()</code> or <code class="codeph">OCILogon()</code>.</p>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Releases a session that was retrieved using <code class="codeph">OCILogon2()</code> or <code class="codeph">OCILogon()</code>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCILogoff ( OCISvcCtx      *svchp
                  OCIError       *errhp );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74082"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36__GUID-4616D34E-9C61-4843-88D5-1EAFCDC89607"><!-- --></a>svchp (IN)</dt>
<dd>
<p>The service context handle that was used in the call to <code class="codeph">OCILogon()</code> or <code class="codeph">OCILogon2()</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74083"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36__GUID-D55AFE9F-C1EC-49AF-80B4-A0584718B212"><!-- --></a>errhp (IN/OUT)</dt>
<dd>
<p>An error handle that you can pass to <code class="codeph">OCIErrorGet()</code> for diagnostic information when there is an error.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>This function is used to release a session that was retrieved using <code class="codeph">OCILogon2()</code> or <code class="codeph">OCILogon()</code>. If <code class="codeph">OCILogon()</code> was used, then this function terminates the connection and session. If <code class="codeph">OCILogon2()</code> was used, then the exact behavior of this call is determined by the <code class="codeph">mode</code> in which the corresponding <code class="codeph">OCILogon2()</code> function was called. In the default case, this function closes the session or connection. For connection pooling, it closes the session and returns the connection to the pool. For session pooling, it returns the session or connection pair to the pool.</p>
<div class="infoboxnotealso" id="GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36__GUID-FBCE7018-7838-43B9-8677-D46420A1A6C8">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="oci02bas.htm#GUID-A4B693E9-7554-4721-A7F7-0B5B15589DEE" title="An application must call OCIEnvNlsCreate() to initialize the OCI environment handle. Existing applications may have used OCIEnvCreate().">Application Initialization, Connection, and Session Creation</a>&#34;</span> for more information about logging on and off in an application</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17117"></a>
<div class="props_rev_3"><a id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6"></a>
<h2 id="LNOCI-GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6" class="sect2">OCILogon()</h2>
<div>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Creates a simple logon session.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCILogon ( OCIEnv          *envhp,
                 OCIError        *errhp,
                 OCISvcCtx       **svchp,
                 const OraText   *username,
                 ub4             uname_len,
                 const OraText   *password,
                 ub4             passwd_len,
                 const OraText   *dbname,
                 ub4             dbname_len );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74084"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-181EB140-2103-4B5D-94DD-4E065B9A278C"><!-- --></a>envhp (IN)</dt>
<dd>
<p>The OCI environment handle.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74085"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-DC772C66-E292-496B-94AC-A5AC7D713CB6"><!-- --></a>errhp (IN/OUT)</dt>
<dd>
<p>An error handle that you can pass to <a href="oci17msc007.htm#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="Returns an error message and an Oracle Database error code.">OCIErrorGet()</a> for diagnostic information when there is an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74086"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-C16B380A-0B34-4540-BD89-E842437F58DB"><!-- --></a>svchp (IN/OUT)</dt>
<dd>
<p>The service context pointer.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74087"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-B3EF8010-A468-4E00-ACC4-59C552CCDA7D"><!-- --></a>username (IN)</dt>
<dd>
<p>The user name. Must be in the encoding specified by the <code class="codeph">charset</code> parameter of a previous call to <code class="codeph">OCIEnvNlsCreate()</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74088"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-E257F578-FD31-4BED-8118-34B8F8E4A380"><!-- --></a>uname_len (IN)</dt>
<dd>
<p>The length of <code class="codeph">username</code>, in number of bytes, regardless of the encoding.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74089"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-2C168E92-67B9-431F-9B2D-B9ACD74009BD"><!-- --></a>password (IN)</dt>
<dd>
<p>The user&#39;s password. Must be in the encoding specified by the <code class="codeph">charset</code> parameter of a previous call to <a href="oci16rel001.htm#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="Creates and initializes an environment handle for OCI functions to work under.">OCIEnvNlsCreate()</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74090"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-322942B6-AEF6-4E7B-8009-CA88266F68A2"><!-- --></a>passwd_len (IN)</dt>
<dd>
<p>The length of <code class="codeph">password</code>, in number of bytes, regardless of the encoding.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74091"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-CA351CE3-4AB9-4782-869E-6456BA9CB0E2"><!-- --></a>dbname (IN)</dt>
<dd>
<p>The name of the database to connect to. Must be in the encoding specified by the <code class="codeph">charset</code> parameter of a previous call to <a href="oci16rel001.htm#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="Creates and initializes an environment handle for OCI functions to work under.">OCIEnvNlsCreate()</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74092"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-689BEC2D-8C96-4AB4-BE74-E55A746D27D9"><!-- --></a>dbname_len (IN)</dt>
<dd>
<p>The length of <code class="codeph">dbname</code>, in number of bytes, regardless of the encoding.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>This function is used to create a simple logon session for an application.</p>
<div class="infobox-note" id="GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6__GUID-52BBA91F-D210-4F9B-943E-083B73A78FD2">
<p class="notep1">Note:</p>
<p>Users requiring more complex sessions, such as TP monitor applications, should see <span class="q">&#34;<a href="oci02bas.htm#GUID-A4B693E9-7554-4721-A7F7-0B5B15589DEE" title="An application must call OCIEnvNlsCreate() to initialize the OCI environment handle. Existing applications may have used OCIEnvCreate().">Application Initialization, Connection, and Session Creation</a>&#34;</span>.</p>
</div>
<p>This call allocates the service context handles that are passed to it. This call also implicitly allocates server and user session handles associated with the session. These handles can be retrieved by calling <a href="oci16rel002.htm#GUID-8218D5F2-139B-4FA9-BA4A-ED0126687C0F" title="Allocates an array of descriptors.">OCIArrayDescriptorAlloc()</a> on the service context handle.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Functions</p>
<p><a href="oci16rel001.htm#GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36" title="Releases a session that was retrieved using OCILogon2() or OCILogon().">OCILogoff()</a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17118"></a>
<div class="props_rev_3"><a id="GUID-425D4B32-257C-480E-B69C-7112BE9482E6"></a>
<h2 id="LNOCI-GUID-425D4B32-257C-480E-B69C-7112BE9482E6" class="sect2">OCILogon2()</h2>
<div>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Gets a session. This session may be a new one with a new underlying connection, or one that is started over a virtual connection from an existing connection pool, or one from an existing session pool. The <code class="codeph">mode</code> that the function is called with determines its behavior.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCILogon2 ( OCIEnv          *envhp,
                  OCIError        *errhp,
                  OCISvcCtx       **svchp,
                  const OraText   *username,
                  ub4             uname_len,
                  const OraText   *password,
                  ub4             passwd_len,
                  const OraText   *dbname,
                  ub4             dbname_len );
                  ub4             mode );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74093"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-BFF00C0C-66CD-4404-AD00-5411DD5BB0DB"><!-- --></a>envhp (IN)</dt>
<dd>
<p>The OCI environment handle. For connection pooling and session pooling, this must be the one that the respective pool was created in.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74094"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-12D472E8-384A-4722-9832-36A2FD14407F"><!-- --></a>errhp (IN/OUT)</dt>
<dd>
<p>An error handle that you can pass to <a href="oci17msc007.htm#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="Returns an error message and an Oracle Database error code.">OCIErrorGet()</a> for diagnostic information when there is an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74095"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-DF546FFE-B8FE-42A7-AD35-C52AEB0B44F0"><!-- --></a>svchp (IN/OUT)</dt>
<dd>
<p>Address of an OCI service context pointer. This is filled with a server and session handle.</p>
<p>In the default case, a new session and server handle is allocated, the connection and session are started, and the service context is populated with these handles.</p>
<p>For connection pooling, a new session handle is allocated, and the session is started over a virtual connection from the connection pool.</p>
<p>For session pooling, the service context is populated with an existing session or server handle pair from the session pool.</p>
<p>Note that you must not change any attributes of the server and user or session handles associated with the service context pointer. Doing so results in an error being returned by the <a href="oci16rel002.htm#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="Sets the value of an attribute of a handle or a descriptor.">OCIAttrSet()</a> call.</p>
<p>The only attribute of the service context that can be altered is <code class="codeph">OCI_ATTR_STMTCACHESIZE</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74096"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-E3CF11DC-6AC9-41C2-97A5-68FB5E8F5922"><!-- --></a>username (IN)</dt>
<dd>
<p>The user name used to authenticate the session. Must be in the encoding specified by the <code class="codeph">charset</code> parameter of a previous call to <a href="oci16rel001.htm#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="Creates and initializes an environment handle for OCI functions to work under.">OCIEnvNlsCreate()</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74097"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-4AFDEE61-0085-467D-9A3C-25AFE6CD059B"><!-- --></a>uname_len (IN)</dt>
<dd>
<p>The length of <code class="codeph">username</code>, in number of bytes, regardless of the encoding.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74098"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-27A4EB4C-3E71-4778-8E07-15D6523251B5"><!-- --></a>password (IN)</dt>
<dd>
<p>The user&#39;s password. For connection pooling, if this parameter is <code class="codeph">NULL</code> then <code class="codeph">OCILogon2()</code> assumes that the logon is for a proxy user. It implicitly creates a proxy connection in such a case, using the pool user to authenticate the proxy user. Must be in the encoding specified by the <code class="codeph">charset</code> parameter of a previous call to <a href="oci16rel001.htm#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="Creates and initializes an environment handle for OCI functions to work under.">OCIEnvNlsCreate()</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74099"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-983F6FD4-5A66-4988-9300-A157C0547668"><!-- --></a>passwd_len (IN)</dt>
<dd>
<p>The length of <code class="codeph">password</code>, in number of bytes, regardless of the encoding.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74100"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-99C8ED00-F0B6-486A-9B6D-CB14CE1F4D0E"><!-- --></a>dbname (IN)</dt>
<dd>
<p>For the default case, this indicates the connect string to use to connect to the Oracle Database.</p>
<p>For connection pooling, this indicates the connection pool from which to retrieve the virtual connection to start the session. This value is returned by the <a href="oci16rel001.htm#GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" title="Initializes the connection pool.">OCIConnectionPoolCreate()</a> call.</p>
<p>For session pooling, it indicates the pool to get the session from. It is returned by the <a href="oci16rel001.htm#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="Initializes a session pool for use with OCI session pooling and database resident connection pooling (DRCP).">OCISessionPoolCreate()</a> call.</p>
<p>The <code class="codeph">dbname</code> must be in the encoding specified by the <code class="codeph">charset</code> parameter of a previous call to <a href="oci16rel001.htm#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="Creates and initializes an environment handle for OCI functions to work under.">OCIEnvNlsCreate()</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74101"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-6A00248C-6B74-42A1-BDFF-F32A90D5D037"><!-- --></a>dbname_len (IN)</dt>
<dd>
<p>The length of <code class="codeph">dbname</code>. For session pooling and connection pooling, this value is returned by the <a href="oci16rel001.htm#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="Initializes a session pool for use with OCI session pooling and database resident connection pooling (DRCP).">OCISessionPoolCreate()</a> or <a href="oci16rel001.htm#GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" title="Initializes the connection pool.">OCIConnectionPoolCreate()</a> call respectively.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74102"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-425D4B32-257C-480E-B69C-7112BE9482E6__GUID-C0C8AFF0-D594-4E52-A7BF-97E39E77D88F"><!-- --></a>mode (IN)</dt>
<dd>
<p>The values accepted are:</p>
</dd>
</dl>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_DEFAULT</code></p>
</li>
<li>
<p><code class="codeph">OCI_LOGON2_CPOOL</code></p>
</li>
<li>
<p><code class="codeph">OCI_LOGON2_SPOOL</code></p>
</li>
<li>
<p><code class="codeph">OCI_LOGON2_STMTCACHE</code></p>
</li>
<li>
<p><code class="codeph">OCI_LOGON2_PROXY</code></p>
</li>
</ul>
<p>For the default (nonpooling case), the following modes are valid:</p>
<p><code class="codeph">OCI_DEFAULT</code> - Equivalent to calling <code class="codeph">OCILogon()</code>.</p>
<p><code class="codeph">OCI_LOGON2_STMTCACHE</code> - Enable statement caching.</p>
<p>For connection pooling, the following modes are valid:</p>
<p><code class="codeph">OCI_LOGON2_CPOOL</code> or <code class="codeph">OCI_CPOOL</code> - This must be set to use connection pooling.</p>
<p><code class="codeph">OCI_LOGON2_STMTCACHE</code> - Enable statement caching.</p>
<p>To use proxy authentication for connection pooling, the password must be set to <code class="codeph">NULL</code>. You are then given a session that is authenticated by the user name provided in the <code class="codeph">OCILogon2()</code> call, through the proxy credentials supplied in the <a href="oci16rel001.htm#GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" title="Initializes the connection pool.">OCIConnectionPoolCreate()</a> call.</p>
<p>For session pooling, the following modes are valid:</p>
<p><code class="codeph">OCI_LOGON2_SPOOL</code> - This must be set to use session pooling.</p>
<p><code class="codeph">OCI_LOGON2_STMTCACHE</code> - Enable statement caching.</p>
<p><code class="codeph">OCI_LOGON2_PROXY</code> - Use proxy authentication. You are given a session that is authenticated by the user name provided in the <code class="codeph">OCILogon2()</code> call, through the proxy credentials supplied in the <a href="oci16rel001.htm#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="Initializes a session pool for use with OCI session pooling and database resident connection pooling (DRCP).">OCISessionPoolCreate()</a> call.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>None.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Functions</p>
<p><a href="oci16rel001.htm#GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6">OCILogon()</a>, <a href="oci16rel001.htm#GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36" title="Releases a session that was retrieved using OCILogon2() or OCILogon().">OCILogoff()</a>, <a href="oci16rel001.htm#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241">OCISessionGet()</a>, <a href="oci16rel001.htm#GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D">OCISessionRelease()</a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17119"></a>
<div class="props_rev_3"><a id="GUID-B6291228-DA2F-4CE9-870A-F94243141757"></a>
<h2 id="LNOCI-GUID-B6291228-DA2F-4CE9-870A-F94243141757" class="sect2">OCIServerAttach()</h2>
<div>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Creates an access path to a data source for OCI operations.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCIServerAttach ( OCIServer     *srvhp,
                        OCIError      *errhp,
                        const OraText *dblink,
                        sb4           dblink_len,
                        ub4           mode );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74103"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-B6291228-DA2F-4CE9-870A-F94243141757__GUID-55D7477B-06BD-4D15-AFA9-18FDB57ECCB4"><!-- --></a><span class="bold">srvhp</span> (IN/OUT)</dt>
<dd>
<p>An uninitialized server handle, which is initialized by this call. Passing in an initialized server handle causes an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74104"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-B6291228-DA2F-4CE9-870A-F94243141757__GUID-574EFE5B-FCD6-4675-86FB-49FF2C0FB71E"><!-- --></a><span class="bold">errhp</span> (IN/OUT)</dt>
<dd>
<p>An error handle that you can pass to <a href="oci17msc007.htm#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="Returns an error message and an Oracle Database error code.">OCIErrorGet()</a> for diagnostic information when there is an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74105"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-B6291228-DA2F-4CE9-870A-F94243141757__GUID-3B52527A-0595-490E-9DE0-F1D5AF0B87FF"><!-- --></a><span class="bold">dblink</span> (IN)</dt>
<dd>
<p>Specifies the database server to use. This parameter points to a character string that specifies a connect string or a service point. If the connect string is <code class="codeph">NULL</code>, then this call attaches to the default host. The string itself could be in <code class="codeph">UTF-16</code> encoding mode or not, depending on the <code class="codeph">mode</code> or the setting in application&#39;s environment handle. The length of <code class="codeph">dblink</code> is specified in <code class="codeph">dblink_len</code>. The <code class="codeph">dblink</code> pointer may be freed by the caller on return.</p>
<p>The name of the connection pool to connect to when <code class="codeph">mode</code> = <code class="codeph">OCI_CPOOL</code>. This must be the same as the <code class="codeph">poolName</code> parameter of the connection pool created by <a href="oci16rel001.htm#GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" title="Initializes the connection pool.">OCIConnectionPoolCreate()</a>. Must be in the encoding specified by the <code class="codeph">charset</code> parameter of a previous call to <a href="oci16rel001.htm#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="Creates and initializes an environment handle for OCI functions to work under.">OCIEnvNlsCreate()</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74106"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-B6291228-DA2F-4CE9-870A-F94243141757__GUID-4D750C79-1591-4A0E-9548-492DA2627028"><!-- --></a><span class="bold">dblink_len</span> (IN)</dt>
<dd>
<p>The length of the string pointed to by <code class="codeph">dblink</code>. For a valid connect string name or alias, <code class="codeph">dblink_len</code> must be nonzero. Its value is in number of bytes.</p>
<p>The length of <code class="codeph">poolName</code>, in number of bytes, regardless of the encoding, when <code class="codeph">mode</code> = <code class="codeph">OCI_CPOOL</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74107"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-B6291228-DA2F-4CE9-870A-F94243141757__GUID-6FC192CA-1DE5-4475-BCAA-33A79719E7F2"><!-- --></a><span class="bold">mode</span> (IN)</dt>
<dd>
<p>Specifies the various modes of operation. The valid modes are:</p>
</dd>
</dl>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_DEFAULT</code> - For encoding, this value tells the server handle to use the setting in the environment handle.</p>
</li>
<li>
<p><code class="codeph">OCI_CPOOL</code> - Use connection pooling.</p>
</li>
</ul>
<p>Because an attached server handle can be set for any connection session handle, the <code class="codeph">mode</code> value here does not contribute to any session handle.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>This call is used to create an association between an OCI application and a particular server.</p>
<p>This call assumes that <a href="oci16rel001.htm#GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" title="Initializes the connection pool.">OCIConnectionPoolCreate()</a> has been called, giving <code class="codeph">poolName</code>, when connection pooling is in effect.</p>
<p>This call initializes a server context handle, which must have been previously allocated with a call to <a href="oci16rel002.htm#GUID-C5BF55F7-A110-4CB5-9663-5056590F12B5" title="Returns a pointer to an allocated and initialized handle.">OCIHandleAlloc()</a>. The server context handle initialized by this call can be associated with a service context through a call to <a href="oci16rel002.htm#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="Sets the value of an attribute of a handle or a descriptor.">OCIAttrSet()</a>. After that association has been made, OCI operations can be performed against the server.</p>
<p>If an application is operating against multiple servers, multiple server context handles can be maintained. OCI operations are performed against whichever server context is currently associated with the service context.</p>
<p>When <code class="codeph">OCIServerAttach()</code> is successfully completed, an Oracle Database shadow process is started. <a href="oci16rel001.htm#GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F">OCISessionEnd()</a> and <a href="oci16rel001.htm#GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564">OCIServerDetach()</a> should be called to clean up the Oracle Database shadow process. Otherwise, the shadow processes accumulate and cause the Linux or UNIX system to run out of processes. If the database is restarted and there are not enough processes, the database may not start up.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Example</p>
<p>The following code example demonstrates the use of <code class="codeph">OCIServerAttach()</code>. This code segment allocates the server handle, makes the attach call, allocates the service context handle, and then sets the server context into it.</p>
<p>Using the OCIServerAttach() Call</p>
<pre dir="ltr">OCIHandleAlloc( (void  *) envhp, (void  **) &amp;srvhp, (ub4)
     OCI_HTYPE_SERVER, 0, (void  **) 0);
OCIServerAttach( srvhp, errhp, (text *) 0, (sb4) 0, (ub4) OCI_DEFAULT);
OCIHandleAlloc( (void  *) envhp, (void  **) &amp;svchp, (ub4)
     OCI_HTYPE_SVCCTX, 0, (void  **) 0);
/* set attribute server context in the service context */
OCIAttrSet( (void  *) svchp, (ub4) OCI_HTYPE_SVCCTX, (void  *) srvhp,
     (ub4) 0, (ub4) OCI_ATTR_SERVER, (OCIError *) errhp);
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Functions</p>
<p><a href="oci16rel001.htm#GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564">OCIServerDetach()</a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17120"></a>
<div class="props_rev_3"><a id="GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564"></a>
<h2 id="LNOCI-GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564" class="sect2">OCIServerDetach()</h2>
<div>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Deletes an access path to a data source for OCI operations.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCIServerDetach ( OCIServer   *srvhp,
                        OCIError    *errhp,
                        ub4         mode ); 
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74108"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564__GUID-B02D03F2-9878-494C-9C47-95D1F09E5E9B"><!-- --></a><span class="bold">srvhp</span> (IN)</dt>
<dd>
<p>A handle to an initialized server context, which is reset to an uninitialized state. The handle is not deallocated.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74109"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564__GUID-B58F9315-2B66-4F31-96B0-FF6F65684D78"><!-- --></a><span class="bold">errhp</span> (IN/OUT)</dt>
<dd>
<p>An error handle that you can pass to <a href="oci17msc007.htm#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="Returns an error message and an Oracle Database error code.">OCIErrorGet()</a> for diagnostic information when there is an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74110"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564__GUID-BE9FCA44-ABA4-498A-B3F8-7BB1EAF72C5C"><!-- --></a><span class="bold">mode</span> (IN)</dt>
<dd>
<p>Specifies the various modes of operation. The only valid mode is <code class="codeph">OCI_DEFAULT</code> for the default mode.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>This call deletes an access path a to data source for OCI operations. The access path was established by a call to <a href="oci16rel001.htm#GUID-B6291228-DA2F-4CE9-870A-F94243141757">OCIServerAttach()</a>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Functions</p>
<p><a href="oci16rel001.htm#GUID-B6291228-DA2F-4CE9-870A-F94243141757">OCIServerAttach()</a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17121"></a>
<div class="props_rev_3"><a id="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947"></a>
<h2 id="LNOCI-GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947" class="sect2">OCISessionBegin()</h2>
<div>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Creates a user session and begins a user session for a given server.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCISessionBegin ( OCISvcCtx     *svchp,
                        OCIError      *errhp,
                        OCISession    *usrhp,
                        ub4           credt,
                        ub4           mode );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74111"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-E509D6D9-59E2-4916-806D-7B14B594ECAB"><!-- --></a><span class="bold">svch</span>p (IN)</dt>
<dd>
<p>A handle to a service context. There must be a valid server handle set in <code class="codeph">svchp</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74112"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-7995C15F-8763-494A-84FA-2E030C69F3B0"><!-- --></a>errhp (IN)</dt>
<dd>
<p>An error handle that you can pass to <a href="oci17msc007.htm#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="Returns an error message and an Oracle Database error code.">OCIErrorGet()</a> for diagnostic information when there is an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74113"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-2E1C6B7C-AF04-46AF-BCDF-28078CD3181E"><!-- --></a>usrhp (IN/OUT)</dt>
<dd>
<p>A handle to a user session context, which is initialized by this call.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74114"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-2525D7F9-A5E0-43C8-925F-6B519291A565"><!-- --></a>credt (IN)</dt>
<dd>
<p>Specifies the type of credentials to use for establishing the user session. Valid values for <code class="codeph">credt</code> are:</p>
</dd>
</dl>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_CRED_RDBMS</code> - Authenticate using a database user name and password pair as credentials. The attributes <code class="codeph">OCI_ATTR_USERNAME</code> and <code class="codeph">OCI_ATTR_PASSWORD</code> should be set on the user session context before this call.</p>
</li>
<li>
<p><code class="codeph">OCI_CRED_EXT</code> - Authenticate using external credentials. No user name or password is provided.</p>
</li>
</ul>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74115"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-0E5B1981-0715-4D19-A305-2369A45F494D"><!-- --></a>mode (IN)</dt>
<dd>
<p>Specifies the various modes of operation. Valid modes are:</p>
</dd>
</dl>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_DEFAULT</code> - In this mode, the user session context returned can only ever be set with the server context specified in <code class="codeph">svchp</code>. For encoding, the server handle uses the setting in the environment handle.</p>
</li>
<li>
<p><code class="codeph">OCI_MIGRATE</code> - In this mode, the new user session context can be set in a service handle with a different server handle. This mode establishes the user session context. To create a migratable session, the service handle must already be set with a nonmigratable user session, which becomes the &#34;creator&#34; session of the migratable session. That is, a migratable session must have a nonmigratable parent session.</p>
<p><code class="codeph">OCI_MIGRATE</code> should not be used when the session uses connection pool underneath. The session migration and multiplexing happens transparently to the user.</p>
</li>
<li>
<p><code class="codeph">OCI_SYSDBA</code> - In this mode, you are authenticated for SYSDBA access.</p>
</li>
<li>
<p><code class="codeph">OCI_SYSOPER</code> - In this mode, you are authenticated for SYSOPER access.</p>
</li>
<li>
<p><code class="codeph">OCI_SYSASM</code> - In this mode, you are authenticated for SYSASM access.</p>
</li>
<li>
<p><code class="codeph">OCI_SYSBKB</code> - In this mode, you are authenticated for SYSBACKUP access.</p>
</li>
<li>
<p><code class="codeph">OCI_SYSDGD</code> - In this mode, you are authenticated for SYSDG access.</p>
</li>
<li>
<p><code class="codeph">OCI_SYSKMT</code> - In this mode, you are authenticated for SYSKM access.</p>
</li>
<li>
<p><code class="codeph">OCI_PRELIM_AUTH</code> - This mode can only be used with <code class="codeph">OCI_SYSDBA</code> or <code class="codeph">OCI_SYSOPER</code> to authenticate for certain administration tasks.</p>
</li>
<li>
<p><code class="codeph">OCI_STMT_CACHE</code> - Enables statement caching with default size on the given service handle. It is optional to pass this mode if the application is going to explicitly set the size later using <code class="codeph">OCI_ATTR_STMTCACHESIZE</code> on that service handle.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>The <code class="codeph">OCISessionBegin()</code> call is used to authenticate a user against the server set in the service context handle.</p>
<div class="infobox-note" id="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-8206C29C-D452-4791-908E-C201894E5BD6">
<p class="notep1">Note:</p>
<p>Check for any errors returned when trying to start a session. For example, if the password for the account has expired, an ORA-28001 error is returned.</p>
</div>
<p>For release 8.1 or later, <code class="codeph">OCISessionBegin()</code> must be called for any given server handle before requests can be made against it. <code class="codeph">OCISessionBegin()</code> only supports authenticating the user for access to the Oracle database specified by the server handle in the service context. In other words, after <a href="oci16rel001.htm#GUID-B6291228-DA2F-4CE9-870A-F94243141757">OCIServerAttach()</a> is called to initialize a server handle, <code class="codeph">OCISessionBegin()</code> must be called to authenticate the user for that given server.</p>
<p>When using Unicode, when the <code class="codeph">mode</code> or the environment handle has the appropriate setting, the user name and password that have been set in the session handle <code class="codeph">usrhp</code> should be in Unicode. Before calling this function to start a session with a user name and password, you must have called <a href="oci16rel002.htm#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="Sets the value of an attribute of a handle or a descriptor.">OCIAttrSet()</a> to set these two Unicode strings into the session handle with corresponding length in bytes, because <a href="oci16rel002.htm#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="Sets the value of an attribute of a handle or a descriptor.">OCIAttrSet()</a> only takes <code class="codeph">void</code> pointers. The string buffers then are interpreted by <code class="codeph">OCISessionBegin()</code>.</p>
<p><a id="d167698e5066" class="indexterm-anchor"></a><a id="d167698e5068" class="indexterm-anchor"></a>When <code class="codeph">OCISessionBegin()</code> is called for the first time for a given server handle, the user session may not be created in migratable (<code class="codeph">OCI_MIGRATE</code>) mode.</p>
<p>After <code class="codeph">OCISessionBegin()</code> has been called for a server handle, the application may call <code class="codeph">OCISessionBegin()</code> again to initialize another user session handle with different (or the same) credentials and different (or the same) operation modes. If an application wants to authenticate a user in <code class="codeph">OCI_MIGRATE</code> mode, the service handle must be associated with a nonmigratable user handle. The user ID of that user handle becomes the ownership ID of the migratable user session. Every migratable session must have a nonmigratable parent session.</p>
<p>If the <code class="codeph">OCI_MIGRATE</code> mode is not specified, then the user session context can only be used with the same server handle set in <code class="codeph">svchp</code>. If the <code class="codeph">OCI_MIGRATE</code> mode is specified, then the user authentication can be set with different server handles. However, the user session context can only be used with server handles that resolve to the same database instance. Security checking is done during session switching. A session can migrate to another process only if there is a nonmigratable session currently connected to that process whose userid is the same as that of the creator&#39;s userid or its own userid.</p>
<p>Do not set the <code class="codeph">OCI_MIGRATE</code> flag in the call to <code class="codeph">OCISessionBegin()</code> when the virtual server handle points to a connection pool (<a href="oci16rel001.htm#GUID-B6291228-DA2F-4CE9-870A-F94243141757">OCIServerAttach()</a> called with <code class="codeph">mode</code> set to <code class="codeph">OCI_CPOOL</code>). Oracle Database supports passing this flag only for compatibility reasons. Do not use the <code class="codeph">OCI_MIGRATE</code> flag, as the perception that you get when using a connection pool is of sessions having their own dedicated (virtual) connections that are transparently multiplexed onto real connections.</p>
<p><code class="codeph">OCI_SYSDBA</code>, <code class="codeph">OCI_SYSOPER</code>, and <code class="codeph">OCI_PRELIM_AUTH</code> can only be used with a primary user session context.</p>
<p>To provide credentials for a call to <code class="codeph">OCISessionBegin()</code>, two methods are supported. The first method is to provide a valid user name and password pair for database authentication in the user session handle passed to <code class="codeph">OCISessionBegin()</code>. This involves using <a href="oci16rel002.htm#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="Sets the value of an attribute of a handle or a descriptor.">OCIAttrSet()</a> to set the <code class="codeph">OCI_ATTR_USERNAME</code> and <code class="codeph">OCI_ATTR_PASSWORD</code> attributes on the user session handle. Then <code class="codeph">OCISessionBegin()</code> is called with <code class="codeph">OCI_CRED_RDBMS</code>.</p>
<div class="infobox-note" id="GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947__GUID-5FC8175C-6B65-4F79-99CB-470D4EB3D1B1">
<p class="notep1">Note:</p>
<p>When the user session handle is terminated using <a href="oci16rel001.htm#GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F">OCISessionEnd()</a>, the user name and password attributes remain unchanged and thus can be reused in a future call to <code class="codeph">OCISessionBegin()</code>. Otherwise, they must be reset to new values before the next <code class="codeph">OCISessionBegin()</code> call.</p>
</div>
<p>The second method is to use external credentials. No attributes need to be set on the user session handle before calling <code class="codeph">OCISessionBegin()</code>. The credential type is <code class="codeph">OCI_CRED_EXT</code>. This is equivalent to the Oracle7 &#39;connect /&#39; syntax. If values have been set for <code class="codeph">OCI_ATTR_USERNAME</code> and <code class="codeph">OCI_ATTR_PASSWORD</code>, then these are ignored if <code class="codeph">OCI_CRED_EXT</code> is used.</p>
<p>Another way of setting credentials is to use the session ID of an authenticated user with the <code class="codeph">OCI_MIGSESSION</code> attribute. This ID can be extracted from the session handle of an authenticated user using the <a href="oci16rel002.htm#GUID-FA199A99-4D7A-42C2-BB0A-C20047B95DF9" title="Gets the value of an attribute of a handle.">OCIAttrGet()</a> call.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Example</p>
<p>The following code example demonstrates the use of <code class="codeph">OCISessionBegin()</code>. This code segment allocates the user session handle, sets the user name and password attributes, calls <code class="codeph">OCISessionBegin()</code>, and then sets the user session into the service context.</p>
<p>Using the OCISessionBegin() Call</p>
<pre dir="ltr">/* allocate a user session handle */
OCIHandleAlloc((void  *)envhp, (void  **)&amp;usrhp, (ub4)
     OCI_HTYPE_SESSION, (size_t) 0, (void  **) 0);
OCIAttrSet((void  *)usrhp, (ub4)OCI_HTYPE_SESSION, (void  *)&#34;hr&#34;,
     (ub4)strlen(&#34;hr&#34;), OCI_ATTR_USERNAME, errhp);
OCIAttrSet((void  *)usrhp, (ub4)OCI_HTYPE_SESSION, (void  *)&#34;hr&#34;,
     (ub4)strlen(&#34;hr&#34;), OCI_ATTR_PASSWORD, errhp);
checkerr(errhp, OCISessionBegin (svchp, errhp, usrhp, OCI_CRED_RDBMS,
     OCI_DEFAULT));
OCIAttrSet((void  *)svchp, (ub4)OCI_HTYPE_SVCCTX, (void  *)usrhp,
     (ub4)0, OCI_ATTR_SESSION, errhp);
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Functions</p>
<p><a href="oci16rel001.htm#GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F">OCISessionEnd()</a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17122"></a>
<div class="props_rev_3"><a id="GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F"></a>
<h2 id="LNOCI-GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F" class="sect2">OCISessionEnd()</h2>
<div>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Terminates a user session context created by <code class="codeph">OCISessionBegin()</code></p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCISessionEnd ( OCISvcCtx       *svchp,
                      OCIError        *errhp,
                      OCISession      *usrhp,
                      ub4             mode );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74116"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F__GUID-AA4BFB99-D7F0-49B3-8BC6-9865F115A5D5"><!-- --></a><span class="bold">svchp</span> (IN/OUT)</dt>
<dd>
<p>The service context handle. There must be a valid server handle and user session handle associated with <code class="codeph">svchp</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74117"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F__GUID-6F51C3BB-E884-4C51-85CF-7847EEBAE57B"><!-- --></a><span class="bold">errhp</span> (IN/OUT)</dt>
<dd>
<p>An error handle that you can pass to <a href="oci17msc007.htm#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="Returns an error message and an Oracle Database error code.">OCIErrorGet()</a> for diagnostic information when there is an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74118"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F__GUID-F8555AE6-28A8-4A0A-A12A-29354597B2B7"><!-- --></a>usrhp (IN)</dt>
<dd>
<p>Deauthenticate this user. If this parameter is passed as <code class="codeph">NULL</code>, the user in the service context handle is deauthenticated.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74119"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F__GUID-B5CD0E2C-F508-433F-8151-AC0A710BD9F6"><!-- --></a>mode (IN)</dt>
<dd>
<p>The only valid mode is <code class="codeph">OCI_DEFAULT</code>.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>The user security context associated with the service context is invalidated by this call. Storage for the user session context is not freed. The transaction specified by the service context is implicitly committed. The transaction handle, if explicitly allocated, may be freed if it is not being used. Resources allocated on the server for this user are freed. The user session handle can be reused in a new call to <a href="oci16rel001.htm#GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947">OCISessionBegin()</a>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Functions</p>
<p><a href="oci16rel001.htm#GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947">OCISessionBegin()</a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17123"></a>
<div class="props_rev_3"><a id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241"></a>
<h2 id="LNOCI-GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" class="sect2">OCISessionGet()</h2>
<div>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Gets a session. This session may be a new one with a new underlying connection, or one that is started over a virtual connection from an existing connection pool, or one from an existing session pool. The <code class="codeph">mode</code> that the function is called with determines its behavior.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCISessionGet ( OCIenv            *envhp,
                      OCIError          *errhp,
                      OCISvcCtx         **svchp,
                      OCIAuthInfo       *authInfop,
                      OraText           *dbName,
                      ub4               dbName_len,
                      const OraText     *tagInfo,
                      ub4               tagInfo_len,
                      OraText           **retTagInfo,
                      ub4               *retTagInfo_len,
                      boolean           *found,
                      ub4               mode );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74120"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-F29ABE73-1448-47D7-8C16-6F03CEA5E586"><!-- --></a>envhp (IN/OUT)</dt>
<dd>
<p>OCI environment handle. For connection pooling and session pooling, this should be the one that the respective pool was created in.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74121"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-906DCB80-8499-461B-9226-59139EB03206"><!-- --></a>errhp (IN/OUT)</dt>
<dd>
<p>OCI error handle.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74122"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-A7353F0E-DEF2-4629-ABBE-0F92B83E0F3F"><!-- --></a>svchp (OUT)</dt>
<dd>
<p>Address of an OCI service context pointer. This is filled with a server and session handle.</p>
<p>In the default case, a new session and server handle are allocated, the connection and session are started, and the service context is populated with these handles.</p>
<p>For connection pooling, a new session handle is allocated, and the session is started over a virtual connection from the connection pool.</p>
<p>For session pooling, the service context is populated with an existing session and server handle pair from the session pool.</p>
<p>Do not change any attributes of the server and user and session handles associated with the service context pointer. Doing so results in an error being returned by the <a href="oci16rel002.htm#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="Sets the value of an attribute of a handle or a descriptor.">OCIAttrSet()</a> call.</p>
<p>The only attribute of the service context that can be altered is <code class="codeph">OCI_ATTR_STMTCACHESIZE</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74123"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-F4D3990E-85CF-428B-A860-E529C98E7FF9"><!-- --></a>authInfop (IN)</dt>
<dd>
<p>Authentication information handle to be used while getting the session.</p>
<p>In the default and connection pooling cases, this handle can take all the attributes of the session handle.</p>
<p>For session pooling, the authentication information handle is considered only if the session pool mode is not set to <code class="codeph">OCI_SPC_HOMOGENEOUS</code>.</p>
<p>The attributes that can be set on the <code class="codeph">OCIAuthInfo</code> handle can be categorized into pre-session-creation attributes and post-session-creation attributes. The pre-session-creation attributes are:</p>
<p><span class="bold">Pre-session-creation attributes</span></p>
<p>Pre-session-creation attributes are those OCI attributes that must be specified before a session is created. These attributes are used to create a session and cannot be changed after a session is created. The pre-session creation attributes are:</p>
<p><code class="codeph">OCI_ATTR_USERNAME</code></p>
<p><code class="codeph">OCI_ATTR_PASSWORD</code></p>
<p><code class="codeph">OCI_ATTR_CONNECTION_CLASS</code></p>
<p><a id="d167698e5693" class="indexterm-anchor"></a><code class="codeph">OCI_ATTR_PURITY</code></p>
<p><code class="codeph">OCI_ATTR_DISTINGUISHED_NAME</code></p>
<p><code class="codeph">OCI_ATTR_CERTIFICATE</code><a id="d167698e5705" class="indexterm-anchor"></a></p>
<p><code class="codeph">OCI_ATTR_INITIAL_CLIENT_ROLES</code></p>
<p><a id="d167698e5711" class="indexterm-anchor"></a><code class="codeph">OCI_ATTR_APPCTX_SIZE</code></p>
<p><code class="codeph">OCI_ATTR_EDITION</code></p>
<p><a id="d167698e5719" class="indexterm-anchor"></a><code class="codeph">OCI_ATTR_DRIVER_NAME</code></p>
<p><span class="bold">Post-session-creation attributes</span></p>
<p>Post-session-creation attributes are those that can be specified after a session is created. They can be changed freely after a session is created as many times as desired. The following attributes can be set on the <code class="codeph">OCISession</code> handle after the session has been created:</p>
<p><code class="codeph">OCI_ATTR_CLIENT_IDENTIFIER</code></p>
<p><a id="d167698e5735" class="indexterm-anchor"></a><code class="codeph">OCI_ATTR_CURRENT_SCHEMA</code></p>
<p><code class="codeph">OCI_ATTR_MODULE</code></p>
<p><code class="codeph">OCI_ATTR_ACTION</code></p>
<p><a id="d167698e5747" class="indexterm-anchor"></a><code class="codeph">OCI_ATTR_DBOP</code></p>
<p><a id="d167698e5752" class="indexterm-anchor"></a><code class="codeph">OCI_ATTR_CLIENT_INFO</code></p>
<p><code class="codeph">OCI_ATTR_COLLECT_CALL_TIME</code></p>
<p><code class="codeph">OCI_ATTR_DEFAULT_LOBPREFETCH_SIZE</code></p>
<p><code class="codeph">OCI_ATTR_SESSION_STATE</code></p>
<div class="infoboxnotealso" id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-E5742516-2D6C-4D7D-88FD-ADB5135EFC24">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="oci09adv.htm#GUID-F9662FFB-EAEF-495C-96FC-49C6D1D9625C" title="Session pooling means that the application creates and maintains a group of stateless sessions to the database.">Session Pooling in OCI</a>&#34;</span></p>
</li>
<li>
<p><code class="codeph">cdemosp.c</code> in the <code class="codeph">demo</code> directory</p>
</li>
<li>
<p><span class="q">&#34;<a href="ociaahan.htm#GUID-FB263210-118E-4DB3-A840-1769EF0CB977">User Session Handle Attributes</a>&#34;</span> for more information about the attributes</p>
</li>
<li>
<p>The Comments section</p>
</li>
</ul>
</div>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74124"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-4CD87639-160D-4F69-A59C-C9944176EEE8"><!-- --></a>dbName (IN)</dt>
<dd>
<p>For the default case, this indicates the connect string to use to connect to the Oracle database.</p>
<p>For connection pooling, it indicates the connection pool to retrieve the virtual connection from, to start the session. This value is returned by the <a href="oci16rel001.htm#GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" title="Initializes the connection pool.">OCIConnectionPoolCreate()</a> call.</p>
<p>For session pooling, it indicates the pool to get the session from. It is returned by the <a href="oci16rel001.htm#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="Initializes a session pool for use with OCI session pooling and database resident connection pooling (DRCP).">OCISessionPoolCreate()</a> call.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74125"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-69F0CA7F-19AD-4B0A-AA85-0CBB617E7168"><!-- --></a>dbName_len (IN)</dt>
<dd>
<p>The length of <code class="codeph">dbName</code>. For session pooling and connection pooling, this value is returned by the call to <a href="oci16rel001.htm#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="Initializes a session pool for use with OCI session pooling and database resident connection pooling (DRCP).">OCISessionPoolCreate()</a> or <a href="oci16rel001.htm#GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" title="Initializes the connection pool.">OCIConnectionPoolCreate()</a>, respectively.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74126"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-8C07955B-E505-448E-BB6F-508364B81FC6"><!-- --></a>tagInfo (IN)</dt>
<dd>
<p>This parameter is used only for session pooling.</p>
<p>This indicates the type of session that the user wants. If you want a default session, you must set this to <code class="codeph">NULL</code>. See the Comments for a detailed explanation of this parameter.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74127"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-98273AC8-3648-413F-AB9B-5475F88DF950"><!-- --></a>tagInfo_len (IN)</dt>
<dd>
<p>The length, in bytes, of <code class="codeph">tagInfo</code>. Used for session pooling only.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74128"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-B6DC990E-E52B-4461-88CF-8ACBA5894B8F"><!-- --></a>retTagInfo (OUT)</dt>
<dd>
<p>This parameter is used only for session pooling. This indicates the type of session that is returned to the user. See the Comments for a detailed explanation of this parameter.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74129"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-03FC0509-E095-4A3E-ADE3-936B6B0A9426"><!-- --></a>retTagInfo_len (OUT)</dt>
<dd>
<p>The length, in bytes, of <code class="codeph">retTagInfo</code>. Used for session pooling only.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74130"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-E28A28B4-B81B-4568-9441-24AF285B7D92"><!-- --></a>found (OUT)</dt>
<dd>
<p>This parameter is used only for session pooling. If the type of session that the user requested was returned (that is, the value of <code class="codeph">tagInfo</code> and <code class="codeph">retTagInfo</code> is the same), then <code class="codeph">found</code> is set to <code class="codeph">TRUE</code>. Otherwise, <code class="codeph">found</code> is set to <code class="codeph">FALSE</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74131"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-890DFBC4-718B-4339-A0EA-6226A25B8241__GUID-890A32E3-7994-439F-AE14-07ECBCD7390E"><!-- --></a>mode (IN)</dt>
<dd>
<p>The valid modes are:</p>
</dd>
</dl>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_DEFAULT</code></p>
</li>
<li>
<p><code class="codeph">OCI_SESSGET_CPOOL</code></p>
</li>
<li>
<p><code class="codeph">OCI_SESSGET_SPOOL</code></p>
</li>
<li>
<p><code class="codeph">OCI_SESSGET_CREDPROXY</code></p>
</li>
<li>
<p><code class="codeph">OCI_SESSGET_CREDEXT</code> - Supported only for heterogeneous pools.</p>
</li>
<li>
<p><code class="codeph">OCI_SESSGET_PURITY_NEW</code></p>
</li>
<li>
<p><code class="codeph">OCI_SESSGET_PURITY_SELF</code></p>
</li>
<li>
<p><code class="codeph">OCI_SESSGET_SPOOL_MATCHANY</code></p>
</li>
<li>
<p><code class="codeph">OCI_SESSGET_STMTCACHE</code></p>
</li>
<li>
<p><code class="codeph">OCI_SESSGET_SYSDBA</code></p>
</li>
</ul>
<p>In the default (nonpooling) case, the following modes are valid:</p>
<p><code class="codeph">OCI_SESSGET_STMTCACHE</code> - Enables statement caching in the session.</p>
<p><code class="codeph">OCI_SESSGET_CREDEXT</code> - Returns a session authenticated with external credentials.</p>
<p><code class="codeph">OCI_SESSGET_SYSDBA</code> - Returns a session with <code class="codeph">SYSDBA</code> privilege for either nonpooling or for session pooling.</p>
<p>For connection pooling, the following modes are valid:</p>
<p><code class="codeph">OCI_SESSGET_CPOOL</code> - Must be set to use connection pooling.</p>
<p><code class="codeph">OCI_SESSGET_STMTCACHE</code> - Enables statement caching in the session.</p>
<p><code class="codeph">OCI_SESSGET_CREDPROXY</code> - Returns a proxy session. The user is given a session that is authenticated by the user name provided in the <code class="codeph">OCISessionGet()</code> call, through the proxy credentials supplied in the <code class="codeph">OCIConnectionPoolCreate(</code>) call.</p>
<p><code class="codeph">OCI_SESSGET_CREDEXT</code> - Returns a session authenticated with external credentials.</p>
<p>For session pooling, the following modes are valid:</p>
<p><code class="codeph">OCI_SESSGET_SPOOL</code> - Must be set to use session pooling.</p>
<p><code class="codeph">OCI_SESSGET_SYSDBA</code> - Returns a session with <code class="codeph">SYSDBA</code> privilege for either nonpooling or for session pooling.</p>
<p><code class="codeph">OCI_SESSGET_CREDEXT</code> - Returns a session authenticated with external credentials.</p>
<p><code class="codeph">OCI_SESSGET_CREDPROXY</code> - In this case, the user is given a session that is authenticated by the user name provided in the <code class="codeph">OCISessionGet()</code> call, through the proxy credentials supplied in the <code class="codeph">OCISessionPoolCreate()</code> call.</p>
<p><code class="codeph">OCI_SESSGET_SPOOL_MATCHANY</code> - Refers to the tagging behavior. If this mode is set, then a session that has a different tag than what was asked for, may be returned. See the Comments section.</p>
<p>For database resident connection pooling, the following modes are valid:</p>
<p><code class="codeph">OCI_SESSGET_PURITY_SELF</code> - The application can use a session that has been used before. You can also specify application-specific tags.</p>
<p><code class="codeph">OCI_SESSGET_PURITY_NEW</code> - The application requires a new session that is not tainted with any prior session state. This is the default.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>The <a id="d167698e6044" class="indexterm-anchor"></a>tags provide a way for users to customize sessions in the pool. A client can get a default or untagged session from a pool, set certain attributes on the session (such as globalization settings), and return the session to the pool, labeling it with an appropriate tag in the <a href="oci16rel001.htm#GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D">OCISessionRelease()</a> call.</p>
<p>The user, or some other user, can request a session with the same attributes, and can do so by providing the same tag in the <code class="codeph">OCISessionGet()</code> call.</p>
<p>If a user asks for a session with tag &#39;A&#39;, and a matching session is not available, an appropriately authenticated untagged session (session with a <code class="codeph">NULL</code> tag) is returned, if such a session is free. If even an untagged session is not free <span class="italic">and</span> <code class="codeph">OCI_SESSGET_SPOOL_MATCHANY</code> has been specified, then an appropriately authenticated session with a different tag is returned. If <code class="codeph">OCI_SESSGET_SPOOL_MATCHANY</code> is not set, then a session with a different tag is never returned.</p>
<p>The following code example demonstrates the use of <code class="codeph">OCI_ATTR_MODULE</code> with session pooling.</p>
<p>Using the OCI_ATTR_MODULE Attribute with OCI Session Pooling</p>
<pre dir="ltr">Oratext *module = (Oratext*) &#34;mymodule&#34;;
/* Allocate the pool handle */
 checkerr(errhp,OCIHandleAlloc(envhp,(void**)&amp;poolhp,
                             OCI_HTYPE_SPOOL,0,0));
 
 checkerr(errhp,OCISessionPoolCreate(envhp,
                             errhp,poolhp,&amp;poolname,&amp;pnamelen,
                             (oratext*)conn_str,
                             len,min,max,incr,0,0,0,0,OCI_DEFAULT));
 
 /* Allocate the auth handle for session get */
 checkerr(errhp, OCIHandleAlloc(envhp,
                 (void**)&amp;authp, OCI_HTYPE_AUTHINFO, 0,0));
 
 checkerr(errhp,OCIAttrSet(authp, OCI_HTYPE_AUTHINFO,
                  username, strlen((char*)username), OCI_ATTR_USERNAME,errhp);
 checkerr(errhp,OCIAttrSet(authp, OCI_HTYPE_AUTHINFO,
                  password, strlen((char*)password), OCI_ATTR_PASSWORD,
                  errhp));
 
 checkerr(errhp,OCISessionGet(envhp,errhp,
              &amp;svchp,authp,poolname, pnamelen,0,0,0,0,0,
              OCI_SESSGET_SPOOL));
 
/* Get the user handle from the service context handle */
checkerr(errhp, OCIAttrGet(svhcp, OCI_HTYPE_SVCCTX, &amp;usrhp_svc,
               0,OCI_ATTR_SESSION,errhp));
 
/* Set module name on the user handle that you obtained */
checkerr (errhp, OCIAttrSet(usrhp_svc, OCI_HTYPE_SESSION, module, 
               strlen((char*)module), OCI_ATTR_MODULE,errhp));
/* Make Database calls. */
</pre>
<p>Restrictions on Attributes Supported for OCI Session Pools</p>
<p>You can use the following pre-session-creation attributes with OCI session pools:</p>
<pre dir="ltr">OCI_ATTR_EDITION
OCI_ATTR_DRIVER_NAME
OCI_ATTR_USERNAME,
OCI_ATTR_PASSWORD,
OCI_ATTR_CONNECTION_CLASS,
OCI_ATTR_PURITY
</pre>
<p>However, <code class="codeph">OCI_ATTR_EDITION</code> and <code class="codeph">OCI_ATTR_DRIVERNAME</code> can only be specified during <code class="codeph">OCISessionPoolCreate()</code> by setting them on the <code class="codeph">OCIAuthInfo</code> handle that is an attribute of <code class="codeph">OCISPool</code> handle. They cannot be specified on the <code class="codeph">OCIAuthInfo</code> handle passed into individual <code class="codeph">OCISessionGet()</code> calls. This ensures that all sessions that are part of an OCI session pool have uniform values for these attributes.</p>
<p>The following code example shows how to use the <code class="codeph">OCI_ATTR_EDITION</code> attribute with an OCI session pool.</p>
<p>Using the OCI_ATTR_EDITION Attribute with OCI Session Pooling</p>
<pre dir="ltr">/* allocate the auth handle to be set on the spool handle */
  checkerr(errhp, OCIHandleAlloc(envhp,(void**)&amp;authp_sp,
                  OCI_HTYPE_AUTHINFO, 0,0));
                  
  /* Set the edition on the auth handle */
 
  checkerr(errhp,OCIAttrSet(authp_sp, OCI_HTYPE_AUTHINFO, 
                   &#34;Patch_Bug_12345&#34;, strlen(&#34;Patch_Bug_12345&#34;), 
                  OCI_ATTR_EDITION,errhp));
 
/* Allocate the pool handle */
 checkerr(errhp,OCIHandleAlloc(envhp,(void**)&amp;poolhp,
                             OCI_HTYPE_SPOOL,0,0));
 
  /* Set the auth handle created above on the spool handle */
 checkerr(errhp,OCIAttrSet(poolhp, OCI_HTYPE_SPOOL,authp_sp,
                  0,OCI_ATTR_SPOOL_AUTH,errhp));
checkerr(errhp,OCISessionPoolCreate(envhp,
                             errhp,poolhp,&amp;poolname,&amp;pnamelen,
                             (oratext*)conn_str,
                             len,min,max,incr,0,0,0,0,OCI_DEFAULT));
 
  /* Allocate the auth handle for session get */
  checkerr(errhp, OCIHandleAlloc(envhp,
                 (void**)&amp;authp_sessget, OCI_HTYPE_AUTHINFO, 0,0));
 
  checkerr(errhp,OCIAttrSet(authp_sessget, OCI_HTYPE_AUTHINFO,
                  username, strlen((char*)username), OCI_ATTR_USERNAME,errhp);
  checkerr(errhp,OCIAttrSet(authp_sessget, OCI_HTYPE_AUTHINFO,
                  password, strlen((char*)password), OCI_ATTR_PASSWORD,
                  errhp));
 
  checkerr(errhp,OCISessionGet(envhp,errhp,
              &amp;svchp,authp_sessget,poolname, pnamelen,0,0,0,0,0,
              OCI_SESSGET_SPOOL));
</pre>
<p>You can use all post-session-creation attributes with OCI session pool. However, as a session pool can age out sessions, reuse preexisting sessions in the pool, or re-create new sessions transparently, Oracle recommends that the application explicitly set any post-session-creation attributes that it needs after getting a session from a pool. This ensures that the application logic works irrespective of the specific session returned by the OCI session pool.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Functions</p>
<p><a href="oci16rel001.htm#GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D">OCISessionRelease()</a>, <a href="oci16rel001.htm#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="Initializes a session pool for use with OCI session pooling and database resident connection pooling (DRCP).">OCISessionPoolCreate()</a>, <a href="oci16rel001.htm#GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C">OCISessionPoolDestroy()</a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17124"></a>
<div class="props_rev_3"><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555"></a>
<h2 id="LNOCI-GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" class="sect2">OCISessionPoolCreate()</h2>
<div>
<p>Initializes a session pool for use with OCI session pooling and database resident connection pooling (DRCP).</p>
<div class="section">
<p class="subhead2">Purpose</p>
<p>It starts <code class="codeph">sessMin</code> number of sessions and connections to the database. Before making this call, make a call to <code class="codeph">OCIHandleAlloc()</code> to allocate memory for the session pool handle.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCISessionPoolCreate ( OCIEnv           *envhp,
                             OCIError         *errhp, 
                             OCISPool         *spoolhp,
                             OraText         **poolName,
                             ub4              *poolNameLen,
                             const OraText    *connStr,
                             ub4               connStrLen,
                             ub4               sessMin, 
                             ub4               sessMax, 
                             ub4               sessIncr,
                             OraText          *userid,
                             ub4               useridLen,
                             OraText          *password,
                             ub4               passwordLen,
                             ub4               mode );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74132"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-66D2A5E4-CD6B-4CDF-8A87-74065251E68A"><!-- --></a>envhp (IN)</dt>
<dd>
<p>A pointer to the environment handle in which the session pool is to be created.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74133"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-EAD6EF33-B56F-49FB-89B9-D6B2A92C5085"><!-- --></a>errhp (IN/OUT)</dt>
<dd>
<p>An error handle that can be passed to <code class="codeph">OCIErrorGet()</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74134"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-3D3F4E44-8DD0-4561-90BB-3FF340E83497"><!-- --></a>spoolhp (IN/OUT)</dt>
<dd>
<p>A pointer to the session pool handle that is initialized.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74135"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-724D04DB-95D4-4216-9EB2-D7D714D66E32"><!-- --></a>poolName (OUT)</dt>
<dd>
<p>The name of the session pool returned. It is unique across all session pools in an environment. This value must be passed to the <code class="codeph">OCISessionGet()</code> call.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74136"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-11C969CC-53C4-4BA8-BCE4-22F325122D05"><!-- --></a>poolNameLen (OUT)</dt>
<dd>
<p>Length of <code class="codeph">poolName</code> in bytes.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74137"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-5783251D-74CF-413C-9734-0EDD769BB0C5"><!-- --></a>connStr (IN)</dt>
<dd>
<p>The TNS alias of the database to connect to.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74138"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-AE516145-C3F6-4A51-957A-A7253E11738E"><!-- --></a>connStrLen (IN)</dt>
<dd>
<p>The length of <code class="codeph">connStr</code> in bytes.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74139"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-E779BBCC-5E02-4CE1-BF65-5B161EE4C67D"><!-- --></a>sessMin (IN)</dt>
<dd>
<p>Specifies the minimum number of sessions in the session pool.</p>
<p>This number of sessions are started by <code class="codeph">OCISessionPoolCreate()</code>. After the sessions are started, sessions are opened only when necessary.</p>
<p>This value is used when <code class="codeph">mode</code> is set to <code class="codeph">OCI_SPC_HOMOGENEOUS</code>. Otherwise, it is ignored.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74140"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-2226D381-D3B3-4E25-944D-CBE9AC453BE3"><!-- --></a>sessMax (IN)</dt>
<dd>
<p>Specifies the maximum number of sessions that can be opened in the session pool. After this value is reached, no more sessions are opened. The valid values are 1 and higher.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74141"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-7F86A0A4-2AC1-435F-AA0E-DDC744EA2A3C"><!-- --></a>sessIncr (IN)</dt>
<dd>
<p>Allows applications to set the next increment for sessions to be started if the current number of sessions is less than <code class="codeph">sessMax</code>. The valid values are 0 and higher.</p>
<p><code class="codeph">sessMin + sessIncr</code> cannot be more than <code class="codeph">sessMax</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74142"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-00BE199A-FF53-48BD-B21A-088596067B66"><!-- --></a>userid (IN)</dt>
<dd>
<p>Specifies the userid with which to start the sessions.</p>
<div class="infoboxnotealso" id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-BD2161A3-00F6-4C6C-9C4A-E45CE5851D32">
<p class="notep1">See Also:</p>
<p>Authentication Note in the Comments Section.</p>
</div>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74143"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-A75315BF-AA62-4252-AE1F-409E49F023CE"><!-- --></a>useridLen (IN)</dt>
<dd>
<p>Length of the userid in bytes.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74144"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-6F566822-8132-4B2B-8F61-E357E67C9D35"><!-- --></a>password (IN)</dt>
<dd>
<p>The password for the corresponding userid.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74145"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-B1C243B1-91AB-4759-AF24-627A529E71BD"><!-- --></a>passwordLen (IN)</dt>
<dd>
<p>The length of the password in bytes.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74146"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-2FF12390-3466-4045-8370-DA5B481FD293"><!-- --></a>mode (IN)</dt>
<dd>
<p>The modes supported are:</p>
</dd>
</dl>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_DEFAULT</code> - For a new session pool creation.</p>
</li>
<li>
<p><code class="codeph">OCI_SPC_REINITIALIZE</code> - After creating a session pool, if you want to change the pool attributes dynamically (change the <code class="codeph">sessMin</code>, <code class="codeph">sessMax</code>, and <code class="codeph">sessIncr</code> parameters), call <code class="codeph">OCISessionPoolCreate()</code> with <code class="codeph">mode</code> set to <code class="codeph">OCI_SPC_REINITIALIZE</code>. When <code class="codeph">mode</code> is set to <code class="codeph">OCI_SPC_REINITIALIZE</code>, then <code class="codeph">connStr</code>, <code class="codeph">userid</code>, and <code class="codeph">password</code> are ignored.</p>
</li>
<li>
<p><code class="codeph">OCI_SPC_STMTCACHE</code> - An OCI statement cache is created for the session pool. If the pool is not created with OCI statement caching turned on, server-side statement caching is automatically used. Note that in general, client-side statement caching gives better performance.</p>
<div class="infoboxnotealso" id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-ACC27808-C96A-40A8-853E-C4A82311320C">
<p class="notep1">See Also:</p>
<p><a href="oci09adv.htm#GUID-4947CAE8-1F00-4897-BB2B-7F921E495175" title="Statement caching refers to the feature that provides and manages a cache of statements for each session.">Statement Caching in OCI</a></p>
</div>
</li>
</ul>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_SPC_HOMOGENEOUS</code> - All sessions in the pool are authenticated with the user name and password passed to <code class="codeph">OCISessionPoolCreate()</code>. The authentication handle (parameter <code class="codeph">authInfop</code>) passed into <code class="codeph">OCISessionGet()</code> is ignored in this case. Moreover, the <code class="codeph">sessMin</code> and the <code class="codeph">SessIncr</code> values are considered only in this case. No proxy session can be created in this mode. This mode can be used in database resident connection pooling (DRCP).</p>
</li>
<li>
<p><code class="codeph">OCI_SPC_NO_RLB</code> - By default, the runtime connection load balancing is enabled in the session pool if the client and the server are capable of supporting it. To turn it off, use the new mode, <code class="codeph">OCI_SPC_NO_RLB</code> mode of <code class="codeph">OCISessionPoolCreate()</code>. You can only use this mode at the time of pool creation. If this mode is passed for a pool that has been created, an error, ORA-24411, is thrown.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<dl id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__I563837">
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74147"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-FCA33C72-8EA4-48E4-A843-6956CC2F7639"><!-- --></a>Authentication Note</dt>
<dd>
<p>A session pool can contain two types of connections to the database: direct connections and proxy connections. To make a proxy connection, a user must have Connect through Proxy privilege.</p>
<div class="infoboxnotealso" id="GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555__GUID-9732B147-175A-4B35-BAF9-45FCE91CA850">
<p class="notep1">See Also:</p>
<p>For more information about proxy connections, see</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci02bas.htm#GUID-D77D0D4A-7483-423A-9767-CBB5854A15CC">Client Access Through a Proxy</a></p>
</li>
<li>
<p><a class="olink SQLRF53630" target="_blank" href="../SQLRF/statements_4003.htm#SQLRF53630"><span><cite>Oracle Database SQL Language Reference</cite></span></a></p>
</li>
</ul>
</div>
<p>When the session pool is created, the <code class="codeph">userid</code> and <code class="codeph">password</code> may or may not be specified. If these values are <code class="codeph">NULL</code>, no proxy connections can exist in this pool. If <code class="codeph">mode</code> is set to <code class="codeph">OCI_SPC_HOMOGENEOUS</code>, no proxy connection can exist.</p>
<p>A <code class="codeph">userid</code> and <code class="codeph">password</code> pair may also be specified through the authentication handle in the <code class="codeph">OCISessionGet()</code> call. If this call is made with <code class="codeph">mode</code> set to <code class="codeph">OCI_SESSGET_CREDPROXY</code>, then the user is given a session that is authenticated by the <code class="codeph">userid</code> provided in the <code class="codeph">OCISessionGet()</code> call, through the proxy credentials supplied in the <code class="codeph">OCISessionPoolCreate()</code> call. In this case, the password in the <code class="codeph">OCISessionGet()</code> call is ignored.</p>
<p>If <code class="codeph">OCISessionGet()</code> is called with <code class="codeph">mode</code> <span class="italic">not</span> set to <code class="codeph">OCI_SESSGET_CREDPROXY</code>, then the user gets a direct session that is authenticated by the credentials provided in the <code class="codeph">OCISessionGet()</code> call. If none have been provided in this call, the user gets a session authenticated by the credentials in the <code class="codeph">OCISessionPoolCreate()</code> call.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Example</p>
<p>The following code example shows how to disable runtime load balancing.</p>
<p>Disabling Runtime Load Balancing</p>
<pre dir="ltr">OCISessionPoolCreate(envhp, errhp, spoolhp, (OraText **)&amp;poolName, 
                     (ub4 *)&amp;poolNameLen,
                     database, (ub4) strlen ((const signed char *) database),
                     sessMin, sessMax, sessIncr, (OraText *) appusername,
                     (ub4) strlen ((const signed char *) appusername),
                     (OraText *) apppassword,
                     (ub4) strlen ((const signed char *) apppassword),
                     OCI_SPC_HOMOGENEOUS | OCI_SPC_NO_RLB);
</pre></div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17125"></a>
<div class="props_rev_3"><a id="GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C"></a>
<h2 id="LNOCI-GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C" class="sect2">OCISessionPoolDestroy()</h2>
<div>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Destroys a session pool.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCISessionPoolDestroy ( OCISPool     *spoolhp, 
                              OCIError     *errhp,
                              ub4          mode );
</pre></div>
<!-- class="section" -->
<div class="section">
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74148"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C__GUID-CFF247B5-E125-45AA-9C39-B8A94CFB5AB2"><!-- --></a>spoolhp (IN/OUT)</dt>
<dd>
<p>The session pool handle for the session pool to be destroyed.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74149"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C__GUID-4FA8AAE8-D1B2-48CE-961C-DBDB74053D95"><!-- --></a>errhp (IN/OUT)</dt>
<dd>
<p>An error handle that can be passed to <code class="codeph">OCIErrorGet()</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74150"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C__GUID-19FFECA2-78EF-4838-B85B-37B4649B97FC"><!-- --></a>mode (IN)</dt>
<dd>
<p>Currently, <code class="codeph">OCISessionPoolDestroy()</code> supports modes <code class="codeph">OCI_DEFAULT</code> and <code class="codeph">OCI_SPD_FORCE</code>.</p>
<p>If this call is made with <code class="codeph">mode</code> set to <code class="codeph">OCI_SPD_FORCE</code>, and there are active sessions in the pool, the sessions are closed and the pool is destroyed. However, if this mode is not set, and there are busy sessions in the pool, an error is returned.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Functions</p>
<p><a href="oci16rel001.htm#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="Initializes a session pool for use with OCI session pooling and database resident connection pooling (DRCP).">OCISessionPoolCreate()</a>, <a href="oci16rel001.htm#GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D">OCISessionRelease()</a>, <a href="oci16rel001.htm#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241">OCISessionGet()</a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17126"></a>
<div class="props_rev_3"><a id="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D"></a>
<h2 id="LNOCI-GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D" class="sect2">OCISessionRelease()</h2>
<div>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Releases a session that was retrieved using <a href="oci16rel001.htm#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241">OCISessionGet()</a>. The exact behavior of this call is determined by the <code class="codeph">mode</code> in which the corresponding <code class="codeph">OCISessionGet()</code> function was called. In the default case, it closes the session or connection. For connection pooling, it closes the session and returns the connection to the pool. For session pooling, it returns the session or connection pair to the pool, and any pending transaction is committed.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCISessionRelease ( OCISvcCtx       *svchp,
                          OCIError        *errhp,
                          OraText         *tag,
                          ub4             tag_len,
                          ub4             mode );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74151"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D__GUID-F46AC6B6-E431-41C5-B778-8AAC65E5CC6F"><!-- --></a>svchp (IN)</dt>
<dd>
<p>The service context that was populated during the corresponding <a href="oci16rel001.htm#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241">OCISessionGet()</a> call.</p>
<p>In the default case, the session and connection associated with this handle is closed.</p>
<p>In the connection pooling case, the session is closed and the connection released to the pool.</p>
<p>For session pooling, the session or connection pair associated with this service context is released to the pool.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74152"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D__GUID-E9155960-B816-45AB-B461-9593F927DA36"><!-- --></a>errhp (IN/OUT)</dt>
<dd>
<p>The OCI error handle.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74153"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D__GUID-3AED763F-FCF7-4E3D-B5A0-6F45AA241315"><!-- --></a>tag (IN)</dt>
<dd>
<p>This parameter is used only for session pooling.</p>
<p>This parameter is ignored unless mode <a id="d167698e7059" class="indexterm-anchor"></a><a id="d167698e7061" class="indexterm-anchor"></a><code class="codeph">OCI_SESSRLS_RETAG</code> is specified. In this case, the session is labeled with this tag and returned to the pool. If this is <code class="codeph">NULL</code>, then the session is not tagged.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74154"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D__GUID-F7574F73-EBD6-4496-8342-AB6351CF0002"><!-- --></a>tag_len (IN)</dt>
<dd>
<p>This parameter is used only for session pooling.</p>
<p>Length of the tag. This is ignored unless mode <code class="codeph">OCI_SESSRLS_RETAG</code> is set.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74155"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D__GUID-717EFCC6-937D-44EB-8623-7A944FC93EF8"><!-- --></a>mode (IN)</dt>
<dd>
<p>The supported modes are:</p>
</dd>
</dl>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_DEFAULT</code></p>
</li>
<li>
<p><code class="codeph">OCI_SESSRLS_DROPSESS</code></p>
</li>
<li>
<p><code class="codeph">OCI_SESSRLS_RETAG</code></p>
</li>
</ul>
<p>You can only use <code class="codeph">OCI_DEFAULT</code> for the default case and for connection pooling.</p>
<p><code class="codeph">OCI_SESSRLS_DROPSESS</code> and <a id="d167698e7110" class="indexterm-anchor"></a><code class="codeph">OCI_SESSRLS_RETAG</code> are only used for session pooling.</p>
<p>When <code class="codeph">OCI_SESSRLS_DROPSESS</code> is specified, the session is removed from the session pool.</p>
<p>The tag on the session is altered if and only if <code class="codeph">OCI_SESSRLS_RETAG</code> is set. If this mode is not set, the <code class="codeph">tag</code> and <code class="codeph">tag_len</code> parameters are ignored.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>Be careful to pass in the correct tag when using the <code class="codeph">tag</code> parameter. If a default session is requested and the user sets certain properties on this session (probably through an <code class="codeph">ALTER SESSION</code> command), then the user must label this session appropriately by tagging it as such.</p>
<p>If, however, the user requested a tagged session and got one, and has changed the properties on the session, then the user must pass in a different tag if appropriate.</p>
<p>For the correct working of the session pool layer, the application developer must be very careful to pass in the correct tag to the <a href="oci16rel001.htm#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241">OCISessionGet()</a> and <code class="codeph">OCISessionRelease()</code> calls.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Functions</p>
<p><a href="oci16rel001.htm#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241">OCISessionGet()</a>, <a href="oci16rel001.htm#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="Initializes a session pool for use with OCI session pooling and database resident connection pooling (DRCP).">OCISessionPoolCreate()</a>, <a href="oci16rel001.htm#GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C">OCISessionPoolDestroy()</a>, <a href="oci16rel001.htm#GUID-425D4B32-257C-480E-B69C-7112BE9482E6">OCILogon2()</a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17127"></a>
<div class="props_rev_3"><a id="GUID-B7BC5F9E-811C-490A-B308-472A12D690D2"></a>
<h2 id="LNOCI-GUID-B7BC5F9E-811C-490A-B308-472A12D690D2" class="sect2">OCITerminate()</h2>
<div>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Detaches the process from the shared memory subsystem and releases the shared memory.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCITerminate ( ub4    mode);
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74156"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-B7BC5F9E-811C-490A-B308-472A12D690D2__GUID-925B328A-BE15-4BCC-802F-E92808E01017"><!-- --></a>mode (IN)</dt>
<dd>
<p>Call-specific mode. Valid value:</p>
</dd>
</dl>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_DEFAULT</code> - Executes the default call.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p><code class="codeph">OCITerminate()</code> should be called only once for each process and is the counterpart of the <a href="oci16rel001.htm#GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" title="Creates and initializes an environment handle for OCI functions to work under.">OCIEnvCreate()</a>, <a href="oci16rel001.htm#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="Creates and initializes an environment handle for OCI functions to work under.">OCIEnvNlsCreate()</a>, deprecated <a href="ociaedep001.htm#GUID-F50356A8-450D-4A96-8AB5-5726502766B2" title="This function was deprecated in a release previous to Oracle Database 11g Release 2 (11.2).">OCIInitialize()</a> calls. The call tries to detach the process from the shared memory subsystem and shut it down. It also performs additional process cleanup operations. When two or more processes connecting to the same shared memory call <code class="codeph">OCITerminate()</code> simultaneously, the fastest one releases the shared memory subsystem completely and the slower ones must terminate.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Functions</p>
<p><a href="ociaedep001.htm#GUID-F50356A8-450D-4A96-8AB5-5726502766B2" title="This function was deprecated in a release previous to Oracle Database 11g Release 2 (11.2).">OCIInitialize()</a>, <a href="oci16rel001.htm#GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" title="Creates and initializes an environment handle for OCI functions to work under.">OCIEnvCreate()</a>, <a href="oci16rel001.htm#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="Creates and initializes an environment handle for OCI functions to work under.">OCIEnvNlsCreate()</a></p>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment6150">
<tr>
<td class="cellalignment6162">
<table class="cellalignment6155">
<tr>
<td class="cellalignment6154"><a href="oci16rel.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment6154"><a href="oci16rel002.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment6164">
<table class="cellalignment6153">
<tr>
<td class="cellalignment6154"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment6154"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment6154"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment6154"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment6154"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment6154"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>