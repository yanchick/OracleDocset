<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-74766"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Streams%20Advanced%20Queuing%20and%20Publish-Subscribe%20Functions"></a><title>Streams Advanced Queuing and Publish-Subscribe Functions</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="Lists and describes the Streams Advanced Queuing and publish-subscribe functions."/>
<meta name="keywords" content="OCI relational functions, Oracle Streams Advanced Queuing and publish-subscribe, Oracle Streams Advanced Queuing, functions, publish-subscribe, functions, OCIAQDeq(), dequeue function, OCI_ATTR_MSG_DELIVERY_MODE, OCIAQDeqArray(), OCIAQEnq(), enqueue function, OCIAQEnqArray(), OCIAQListen2(), OCISubscriptionDisable(), OCISubscriptionEnable(), OCISubscriptionPost(), OCISubscriptionRegister(), OCISubscriptionUnRegister()"/>
<meta name="dcterms.created" content="2017-06-09T09:07:30Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Call Interface Programmer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49886-11"/>
<meta name="dcterms.isVersionOf" content="LNOCI"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="oci17msc002.htm" title="Previous" type="text/html"/>
<link rel="Next" href="oci17msc004.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49886-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-4D7FFF56-38DE-4DBF-80E8-48BF19C2B2D3"></a> <span id="PAGE" style="display:none;">30/84</span> <!-- End Header -->
<a id="LNOCI17225"></a><a id="LNOCI163"></a>
<h1 id="LNOCI-GUID-4D7FFF56-38DE-4DBF-80E8-48BF19C2B2D3" class="sect1">Streams Advanced Queuing and Publish-Subscribe Functions</h1>
<div>
<p>Lists and describes the Streams Advanced Queuing and publish-subscribe functions.</p>
<div class="section">
<p><a href="oci17msc003.htm#GUID-4D7FFF56-38DE-4DBF-80E8-48BF19C2B2D3__G731077" title="This table has 2 columns. Column 1 is the OCI function name and column 2 describes its purpose.">Table 17-3</a> lists the Streams Advanced Queuing and publish-subscribe functions that are described in this section. Use functions that end in &#34;2&#34; for all new applications.</p>
<div class="infoboxnotealso" id="GUID-4D7FFF56-38DE-4DBF-80E8-48BF19C2B2D3__GUID-6147DD62-1929-4D77-9F1C-A64AB9CAA17C">
<p class="notep1">See Also:</p>
<p><a href="ociabdem.htm#GUID-75E18629-0C54-4495-A747-AFB346034F26__CACCAHCE" title="This table has 2 columns. Column 1 is the OCI demonstration program name and column 2 describes the corresponding features illustrated.">Table B-1</a> for Streams Advanced Queuing programs</p>
</div>
</div>
<!-- class="section" -->
<div class="tblformalwide" id="GUID-4D7FFF56-38DE-4DBF-80E8-48BF19C2B2D3__G731077">
<p class="titleintable">Table 17-3 Advanced Queuing and Publish-Subscribe Functions</p>
<table class="cellalignment6157" title="Advanced Queuing and Publish-Subscribe Functions" summary="This table has 2 columns. Column 1 is the OCI function name and column 2 describes its purpose.">
<thead>
<tr class="cellalignment6151">
<th class="cellalignment6194" id="d197751e187">Function</th>
<th class="cellalignment6195" id="d197751e190">Purpose</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6151">
<td class="cellalignment6196" id="d197751e195" headers="d197751e187">
<p><a href="oci17msc003.htm#GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C">OCIAQDeq()</a></p>
</td>
<td class="cellalignment6197" headers="d197751e195 d197751e190">
<p>Performs an Advanced Queuing dequeue operation</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6196" id="d197751e204" headers="d197751e187">
<p><a href="oci17msc003.htm#GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A" title="Dequeues an array of messages from a queue.">OCIAQDeqArray()</a></p>
</td>
<td class="cellalignment6197" headers="d197751e204 d197751e190">
<p>Dequeue an array of messages</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6196" id="d197751e216" headers="d197751e187">
<p><a href="oci17msc003.htm#GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4" title="Performs an enqueue operation using Streams Advanced Queuing.">OCIAQEnq()</a></p>
</td>
<td class="cellalignment6197" headers="d197751e216 d197751e190">
<p>Performs an Advanced Queuing enqueue operation</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6196" id="d197751e228" headers="d197751e187">
<p><a href="oci17msc003.htm#GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C">OCIAQEnqArray()</a></p>
</td>
<td class="cellalignment6197" headers="d197751e228 d197751e190">
<p>Enqueue an array of messages</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6196" id="d197751e237" headers="d197751e187">
<p><a href="oci17msc003.htm#GUID-499ECEF6-F447-46C5-8F3F-48DE66839BD1">OCIAQListen2()</a></p>
</td>
<td class="cellalignment6197" headers="d197751e237 d197751e190">
<p>Listen on one or more queues on behalf of a list of agents. Supports buffered messaging and persistent queues.</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6196" id="d197751e246" headers="d197751e187">
<p><a href="oci17msc003.htm#GUID-72C51789-C48C-4F36-800B-EECC1AD98E00" title="Disables a subscription registration that turns off all notifications.">OCISubscriptionDisable()</a></p>
</td>
<td class="cellalignment6197" headers="d197751e246 d197751e190">
<p>Disable a subscription registration to turn off notifications</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6196" id="d197751e258" headers="d197751e187">
<p><a href="oci17msc003.htm#GUID-5C04A301-8564-46AF-A758-9DE7246F0F53" title="Enables a subscription registration that has been disabled.">OCISubscriptionEnable()</a></p>
</td>
<td class="cellalignment6197" headers="d197751e258 d197751e190">
<p>Enable notifications on a subscription</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6196" id="d197751e270" headers="d197751e187">
<p><a href="oci17msc003.htm#GUID-EFD815F0-D669-4E01-AA54-E1499E302430" title="Posts to a subscription that allows all clients who are registered for the subscription to get notifications.">OCISubscriptionPost()</a></p>
</td>
<td class="cellalignment6197" headers="d197751e270 d197751e190">
<p>Post to a subscription to receive notifications</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6196" id="d197751e282" headers="d197751e187">
<p><a href="oci17msc003.htm#GUID-36729D3E-E920-4FAA-8EAA-6E033F6D8930" title="Registers a callback for message notification.">OCISubscriptionRegister()</a></p>
</td>
<td class="cellalignment6197" headers="d197751e282 d197751e190">
<p>Register a subscription</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6196" id="d197751e294" headers="d197751e187">
<p><a href="oci17msc003.htm#GUID-C55B6743-4BB4-4E18-931C-5FBED94592D0" title="Unregisters a subscription that turns off notifications.">OCISubscriptionUnRegister()</a></p>
</td>
<td class="cellalignment6197" headers="d197751e294 d197751e190">
<p>Unregister a subscription</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<a id="LNOCI17226"></a>
<div class="props_rev_3"><a id="GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C"></a>
<h2 id="LNOCI-GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C" class="sect2">OCIAQDeq()</h2>
<div>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Performs a dequeue operation using Streams Advanced Queuing with OCI.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCIAQDeq ( OCISvcCtx            *svch,
                 OCIError             *errh,
                 OraText              *queue_name,
                 OCIAQDeqOptions      *dequeue_options,
                 OCIAQMsgProperties   *message_properties,
                 OCIType              *payload_tdo,
                 void                **payload,
                 void                **payload_ind,
                 OCIRaw              **msgid,
                 ub4                   flags );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74692"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C__GUID-1D38A8D4-7525-408E-A026-C8CD42837FF4"><!-- --></a><span class="bold">svch</span> (IN)</dt>
<dd>
<p>OCI service context.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74693"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C__GUID-CA2D010A-7569-4403-A12C-C90F10835321"><!-- --></a><span class="bold">errh</span> (IN)</dt>
<dd>
<p>An error handle that you can pass to <code class="codeph">OCIErrorGet()</code> for diagnostic information when there is an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74694"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C__GUID-D5236559-A57B-4AAB-9D33-16272AB41AA8"><!-- --></a><span class="bold">queue_name</span> (IN)</dt>
<dd>
<p>The target queue for the dequeue operation.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74695"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C__GUID-897A68EF-CB07-4D81-891B-EC1C224BE53B"><!-- --></a><span class="bold">dequeue_options</span> (IN)</dt>
<dd>
<p>The options for the dequeue operation; stored in an <code class="codeph">OCIAQDeqOptions</code> descriptor, with OCI type constant <code class="codeph">OCI_DTYPE_AQDEQ_OPTIONS</code>.</p>
<p><code class="codeph">OCI_DTYPE_AQDEQ_OPTIONS</code> has the additional attribute <code class="codeph">OCI_ATTR_MSG_DELIVERY_MODE</code> (introduced in Oracle Database 10<span class="italic">g</span> Release 2) with the following values:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_MSG_PERSISTENT</code> (default)</p>
</li>
<li>
<p><code class="codeph">OCI_MSG_BUFFERED</code></p>
</li>
<li>
<p><code class="codeph">OCI_MSG_PERSISTENT_OR_BUFFERED</code></p>
</li>
</ul>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74696"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C__GUID-22F1AEB2-CE5C-4503-B9DA-2DDE76AB007D"><!-- --></a><span class="bold">message_properties</span> (OUT)</dt>
<dd>
<p>The message properties for the message; the properties are stored in an <code class="codeph">OCIAQMsgProperties</code> descriptor, with OCI type constant <code class="codeph">OCI_DTYPE_AQMSG_PROPERTIES</code>, which can have the following values:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_AQ_PERSISTENT</code> (default)</p>
</li>
<li>
<p><code class="codeph">OCI_AQ_BUFFERED</code></p>
</li>
</ul>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74697"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C__GUID-0BD63E75-5D16-4E35-B56C-C5E41BC45C51"><!-- --></a><span class="bold">payload_tdo</span> (IN)</dt>
<dd>
<p>The TDO (type descriptor object) of an object type. For a raw queue, this parameter should point to the TDO of <code class="codeph">SYS.RAW</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74698"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C__GUID-3850FEB4-A899-4355-99BB-F3676D02064F"><!-- --></a><span class="bold">payload</span> (IN/OUT)</dt>
<dd>
<p>A pointer to a pointer to a program variable buffer that is an instance of an object type. For a raw queue, this parameter should point to an instance of <code class="codeph">OCIRaw</code>.</p>
<p>Memory for the payload is dynamically allocated in the object cache. The application can optionally call <code class="codeph">OCIObjectFree()</code> to deallocate the payload instance when it is no longer needed. If the pointer to the program variable buffer (<code class="codeph">*payload</code>) is passed as <code class="codeph">NULL</code>, the buffer is implicitly allocated in the cache.</p>
<p>The application may choose to pass <code class="codeph">NULL</code> for <code class="codeph">payload</code> the first time <code class="codeph">OCIAQDeq()</code> is called, and let the OCI allocate the memory for the payload. It can then use a pointer to that previously allocated memory in subsequent calls to <code class="codeph">OCIAQDeq()</code>.</p>
<p>To obtain a TDO for the payload, use <code class="codeph">OCITypeByName()</code>, or <code class="codeph">OCITypeByRef()</code>.</p>
<p>The OCI provides functions that allow the user to set attributes of the payload, such as its text. For information about setting these attributes, see <span class="q">&#34;<a href="oci11obj.htm#GUID-BA775817-78E4-4C49-A3C2-C867C50509B2" title="Once an object has been pinned, an OCI application can modify its attributes.">Manipulating Object Attributes</a>&#34;</span>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74699"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C__GUID-6AB15CF3-BC01-4BAD-9CFE-A3BEB5F0D8C6"><!-- --></a><span class="bold">payload_ind</span> (IN/OUT)</dt>
<dd>
<p>A pointer to a pointer to the program variable buffer containing the parallel indicator structure for the object type.</p>
<p>The memory allocation rules for <code class="codeph">payload_ind</code> are the same as those for <code class="codeph">payload</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74700"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C__GUID-47DB28EA-C3ED-4F9F-AAB6-ADB54CB5B632"><!-- --></a><span class="bold">msgid</span> (OUT)</dt>
<dd>
<p>The message ID.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74701"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C__GUID-67F7E071-546B-4D0B-A459-4DDA34E4113D"><!-- --></a><span class="bold">flags</span> (IN)</dt>
<dd>
<p>Not currently used; pass as <code class="codeph">OCI_DEFAULT</code>.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>Users must have the <code class="codeph">AQ_USER_ROLE</code> or privileges to execute the <code class="codeph">DBMS_AQ</code> package to use this call. The OCI environment must be initialized in object mode (using <code class="codeph">OCIEnvCreate()</code>, <code class="codeph">OCIEnvNlsCreate()</code>), or <code class="codeph">OCIInitialize()</code> (deprecated) to use this call.</p>
<div class="infoboxnotealso" id="GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C__GUID-BAF2F2C3-0E5E-4C7C-9963-3B229C234E54">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci09adv.htm#GUID-FF4165B2-A44C-4F76-AC26-DA860F340CA8" title="OCI provides an interface to the Streams Advanced Queuing (Streams AQ) feature. Streams AQ provides message queuing as an integrated part of Oracle Database.">OCI and Streams Advanced Queuing</a></p>
</li>
<li>
<p><a class="olink ADQUE0100" target="_blank" href="../ADQUE/aq_intro.htm#ADQUE0100"><span><cite>Oracle Database Advanced Queuing User&#39;s Guide</cite></span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17227"></a>
<div class="props_rev_3"><a id="GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A"></a>
<h2 id="LNOCI-GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A" class="sect2">OCIAQDeqArray()</h2>
<div>
<p>Dequeues an array of messages from a queue.</p>
<div class="section">
<p class="subhead2">Purpose</p>
<p>All messages in the array are dequeued with the same option and have the same queue table payload column TDO.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCIAQDeqArray ( OCISvcCtx            *svchp,
                      OCIError             *errhp,
                      OraText              *queue_name,
                      OCIAQDeqOptions      *deqopt,
                      ub4                  *iters,
                      OCIAQMsgProperties  **msgprop,
                      OCIType              *payload_tdo,
                      void                **payload,
                      void                **payload_ind,
                      OCIRaw              **msgid,
                      void                 *ctxp,
                      OCICallbackAQDeq     (cbfp) 
                                          (
                                          void          *ctxp,
                                          void         **payload,
                                          void         **payload_ind
                                          ),
                      ub4                   flags );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74702"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A__GUID-FE67870B-AA38-4CAD-8DB5-D9E7A04A774C"><!-- --></a><span class="bold">svchp</span> (IN)</dt>
<dd>
<p>OCI service context (unchanged from <code class="codeph">OCIAQDeq()</code>).</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74703"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A__GUID-78524540-C509-4898-9538-3C324FF390B4"><!-- --></a><span class="bold">errhp</span> (IN)</dt>
<dd>
<p>An error handle that you can pass to <code class="codeph">OCIErrorGet()</code> for diagnostic information when there is an error (unchanged from <code class="codeph">OCIAQDeq()</code>).</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74704"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A__GUID-822C0974-CB34-4943-A31F-486EA2E99994"><!-- --></a>queue_name (IN)</dt>
<dd>
<p>The name of the queue from which messages are dequeued (unchanged from <code class="codeph">OCIAQDeq()</code></p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74705"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A__GUID-0F2EBE21-903B-4D36-A475-1FF8E19462AF"><!-- --></a>deqopt (IN)</dt>
<dd>
<p>A pointer to an <code class="codeph">OCIAQDeqOptions</code> descriptor (unchanged from <code class="codeph">OCIAQDeq()</code>).</p>
<p><code class="codeph">OCI_DTYPE_AQDEQ_OPTIONS</code> OCI type constant has the additional attribute <code class="codeph">OCI_ATTR_MSG_DELIVERY_MODE</code> (introduced in Oracle Database 10<span class="italic">g</span> Release 2) with the following values:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_MSG_PERSISTENT</code> (default)</p>
</li>
<li>
<p><code class="codeph">OCI_MSG_BUFFERED</code></p>
</li>
<li>
<p><code class="codeph">OCI_MSG_PERSISTENT_OR_BUFFERED</code></p>
</li>
</ul>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74706"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A__GUID-69376E78-014C-4C6A-881B-955999989F88"><!-- --></a>iters (IN/OUT)</dt>
<dd>
<p>On input, the number of messages to dequeue. On output, the number of messages successfully dequeued.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74707"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A__GUID-9D1FFDCE-5AAF-4ADC-B6C6-0947407E4C9C"><!-- --></a>msgprop (OUT)</dt>
<dd>
<p>An array of pointers to <code class="codeph">OCIAQMsgProperties</code> descriptors, of OCI type constant <code class="codeph">OCI_DTYPE_AQMSG_PROPERTIES</code>, which can have the following values:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_AQ_PERSISTENT</code> (default)</p>
</li>
<li>
<p><code class="codeph">OCI_AQ_BUFFERED</code></p>
</li>
</ul>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74708"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A__GUID-950AA448-82FC-44CA-B07C-7EEFA251CD7C"><!-- --></a>payload_tdo (OUT)</dt>
<dd>
<p>A pointer to the TDO of the queue table&#39;s payload column.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74709"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A__GUID-3AF55F5C-5625-4F94-B180-D5F6E3A56BE1"><!-- --></a>payload (OUT)</dt>
<dd>
<p>An array of pointers to dequeued messages.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74710"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A__GUID-151A419D-1D51-411A-929C-8F2B24DF1D47"><!-- --></a>payload_ind (OUT)</dt>
<dd>
<p>An array of pointers to indicators.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74711"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A__GUID-ED01C445-10CE-4E5A-AE68-B1F85BE8946C"><!-- --></a>msgid (OUT)</dt>
<dd>
<p>An array of pointers to the message ID of the dequeued messages.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74712"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A__GUID-3AAC5583-A05C-4747-BE6F-1319E7D5995E"><!-- --></a>ctxp (IN)</dt>
<dd>
<p>The context that is passed to the callback function.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74713"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A__GUID-92AAA8DE-9E7C-41C2-9A8D-6DF148D65327"><!-- --></a>cbfp (IN)</dt>
<dd>
<p>The callback that can be registered to provide a buffer pointer into which the dequeued message is placed. If <code class="codeph">NULL</code>, then messages are dequeued into buffers pointed to by <code class="codeph">payload</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74714"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A__GUID-B7790A0D-EDED-4121-921D-A4DF6296EC7C"><!-- --></a>flags (IN)</dt>
<dd>
<p>Not currently used; pass as <code class="codeph">OCI_DEFAULT</code>.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>Users must have the <code class="codeph">AQ_USER_ROLE</code> or privileges to execute the <code class="codeph">DBMS_AQ</code> package to use this call. The OCI environment must be initialized in object mode (using <code class="codeph">OCIEnvCreate()</code>, <code class="codeph">OCIEnvNlsCreate()</code>), or <code class="codeph">OCIInitialize()</code> (deprecated) to use this call.</p>
<p>A nonzero wait time, as specified in the <code class="codeph">OCIAQDeqOptions</code>, is recognized only when there are no messages in the queue. If the queue contains messages that are eligible for dequeuing, then the <code class="codeph">OCIAQDeqArray()</code> function dequeues up to <code class="codeph">iters</code> messages and returns immediately.</p>
<p>This function is not supported in nonblocking mode.</p>
<div class="infoboxnotealso" id="GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A__GUID-F06324D3-0E5C-42E2-8D11-8F94FE6B6113">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci09adv.htm#GUID-FF4165B2-A44C-4F76-AC26-DA860F340CA8" title="OCI provides an interface to the Streams Advanced Queuing (Streams AQ) feature. Streams AQ provides message queuing as an integrated part of Oracle Database.">OCI and Streams Advanced Queuing</a></p>
</li>
<li>
<p><a class="olink ADQUE0100" target="_blank" href="../ADQUE/aq_intro.htm#ADQUE0100"><span><cite>Oracle Database Advanced Queuing User&#39;s Guide</cite></span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17228"></a>
<div class="props_rev_3"><a id="GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4"></a>
<h2 id="LNOCI-GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4" class="sect2">OCIAQEnq()</h2>
<div>
<p>Performs an enqueue operation using Streams Advanced Queuing.</p>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Performs an enqueue operation using Streams Advanced Queuing.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCIAQEnq ( OCISvcCtx            *svch,
                 OCIError             *errh,
                 OraText              *queue_name,
                 OCIAQEnqOptions      *enqueue_options,
                 OCIAQMsgProperties   *message_properties,
                 OCIType              *payload_tdo,
                 void                **payload,
                 void                **payload_ind,
                 OCIRaw              **msgid,
                 ub4                   flags );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74715"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4__GUID-AC349031-3A20-416A-B1F1-0F35A5D9C382"><!-- --></a><span class="bold">svch</span> (IN)</dt>
<dd>
<p>OCI service context.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74716"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4__GUID-5612C271-F770-43F3-9C10-B6B247EF3B3A"><!-- --></a><span class="bold">errh</span> (IN)</dt>
<dd>
<p>An error handle that you can pass to <code class="codeph">OCIErrorGet()</code> for diagnostic information when there is an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74717"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4__GUID-DA33A2E7-F5CE-430D-B909-19C2579521CD"><!-- --></a><span class="bold">queue_name</span> (IN)</dt>
<dd>
<p>The target queue for the enqueue operation.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74718"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4__GUID-3C553A78-5A7C-42AC-9E29-EFB8DA43A5A3"><!-- --></a><span class="bold">enqueue_options</span> (IN)</dt>
<dd>
<p>The options for the enqueue operation; stored in an <code class="codeph">OCIAQEnqOptions</code> descriptor.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74719"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4__GUID-A7D1D068-FA79-4B53-A76C-76CCEBD0CA6B"><!-- --></a><span class="bold">message_properties</span> (IN)</dt>
<dd>
<p>The message properties for the message. The properties are stored in an <code class="codeph">OCIAQMsgProperties</code> descriptor, of OCI type constant <code class="codeph">OCI_DTYPE_AQMSG_PROPERTIES</code>, introduced in Oracle Database 10<span class="italic">g</span> Release 2.</p>
<p>Descriptor <code class="codeph">OCI_DTYPE_AQMSG_PROPERTIES</code> has the attribute <code class="codeph">OCI_ATTR_MSG_DELIVERY_MODE</code>, which has the following values:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_MSG_PERSISTENT</code> (default)</p>
</li>
<li>
<p><code class="codeph">OCI_MSG_BUFFERED</code></p>
</li>
</ul>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74720"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4__GUID-2E8A37EF-6513-44A0-8E77-ABD0EECF60DA"><!-- --></a><span class="bold">payload_tdo</span> (IN)</dt>
<dd>
<p>The TDO (type descriptor object) of an object type. For a raw queue, this parameter should point to the TDO of <code class="codeph">SYS.RAW</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74721"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4__GUID-42064A61-C6DF-405A-83F3-52A90CAFB06E"><!-- --></a><span class="bold">payload</span> (IN)</dt>
<dd>
<p>A pointer to a pointer to an instance of an object type. For a raw queue, this parameter should point to an instance of <code class="codeph">OCIRaw</code>.</p>
<p>OCI provides functions that allow the user to set attributes of the payload, such as its text.</p>
<div class="infoboxnotealso" id="GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4__GUID-F5DC8817-28A7-4899-BD48-211D599C5E19">
<p class="notep1">See Also:</p>
<p><a href="oci11obj.htm#GUID-BA775817-78E4-4C49-A3C2-C867C50509B2" title="Once an object has been pinned, an OCI application can modify its attributes.">Manipulating Object Attributes</a> for information about setting these attributes</p>
</div>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74722"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4__GUID-199058D7-52BD-49A2-A14C-51F119092673"><!-- --></a><span class="bold">payload_ind</span> (IN)</dt>
<dd>
<p>A pointer to a pointer to the program variable buffer containing the parallel indicator structure for the object type.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74723"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4__GUID-EA6C8A33-7CED-422E-8F6A-79BF966092BA"><!-- --></a><span class="bold">msgid</span> (OUT)</dt>
<dd>
<p>The message ID.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74724"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4__GUID-E7988859-DEBF-4633-BBCC-9E90FF0CDB2D"><!-- --></a><span class="bold">flags</span> (IN)</dt>
<dd>
<p>Not currently used; pass as <code class="codeph">OCI_DEFAULT</code>.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>Users must have the <code class="codeph">AQ_USER_ROLE</code> or privileges to execute the <code class="codeph">DBMS_AQ</code> package to use this call.</p>
<p>The OCI environment must be initialized in object mode (using <code class="codeph">OCIEnvCreate()</code>, <code class="codeph">OCIEnvNlsCreate()</code>), or <code class="codeph">OCIInitialize()</code> (deprecated) to use this call.</p>
<div class="infoboxnotealso" id="GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4__GUID-89AD77B9-987E-4809-9F41-A1005F6A6FCC">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci09adv.htm#GUID-FF4165B2-A44C-4F76-AC26-DA860F340CA8" title="OCI provides an interface to the Streams Advanced Queuing (Streams AQ) feature. Streams AQ provides message queuing as an integrated part of Oracle Database.">OCI and Streams Advanced Queuing</a> for more information about OCI and Advanced Queuing</p>
</li>
<li>
<p><a class="olink ADQUE0100" target="_blank" href="../ADQUE/aq_intro.htm#ADQUE0100"><span><cite>Oracle Database Advanced Queuing User&#39;s Guide</cite></span></a></p>
</li>
</ul>
</div>
<p>To obtain a TDO for the payload, use <code class="codeph">OCITypeByName()</code>, or <code class="codeph">OCITypeByRef()</code>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17229"></a>
<div class="props_rev_3"><a id="GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C"></a>
<h2 id="LNOCI-GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C" class="sect2">OCIAQEnqArray()</h2>
<div>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Enqueues an array of messages to a queue. The array of messages is enqueued with the same options and has the same payload column TDO.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCIAQEnqArray ( OCISvcCtx              *svchp,
                      OCIError               *errhp,
                      OraText                *queue_name,
                      OCIAQEnqOptions        *enqopt,
                      ub4                    *iters,
                      OCIAQMsgProperties     **msgprop,
                      OCIType                *payload_tdo,
                      void                   **payload,
                      void                   **payload_ind,
                      OCIRaw                 **msgid,
                      void                   *ctxp,
                      OCICallbackAQEnq       (cbfp)
                                             (
                                             void        *ctxp,
                                             void        **payload,
                                             void        **payload_ind
                                             ),
                      ub4                    flags );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74725"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C__GUID-85324FB0-2D79-4E22-805C-19FBBAD5CF30"><!-- --></a>svchp (IN)</dt>
<dd>
<p>The service context (unchanged from <a href="oci17msc003.htm#GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4" title="Performs an enqueue operation using Streams Advanced Queuing.">OCIAQEnq()</a>).</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74726"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C__GUID-67D10F8B-35E6-4FCA-BFAB-05E5EB5FFE7D"><!-- --></a>errhp (IN/OUT)</dt>
<dd>
<p>The error handle (unchanged from <a href="oci17msc003.htm#GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4" title="Performs an enqueue operation using Streams Advanced Queuing.">OCIAQEnq()</a>).</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74727"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C__GUID-EF585F95-8EEA-4C96-8CBB-87651B75168E"><!-- --></a>queue_name (IN)</dt>
<dd>
<p>The name of the queue in which messages are enqueued (unchanged from <a href="oci17msc003.htm#GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4" title="Performs an enqueue operation using Streams Advanced Queuing.">OCIAQEnq()</a>).</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74728"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C__GUID-991BA9CC-27DC-4BAD-AC5A-75356F08A2B5"><!-- --></a>enqopt (IN)</dt>
<dd>
<p>A pointer to an <code class="codeph">OCIAQEnqOptions</code> descriptor (unchanged from <a href="oci17msc003.htm#GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4" title="Performs an enqueue operation using Streams Advanced Queuing.">OCIAQEnq()</a>).</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74729"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C__GUID-5EE1CA18-EC11-48D1-8134-B6E53385C6B6"><!-- --></a>iters (IN/OUT)</dt>
<dd>
<p>On input, the number of messages to enqueue. On output, the number of messages successfully enqueued.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74730"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C__GUID-48D64633-8CA3-44BE-93C3-E255BB00EDF9"><!-- --></a>msgprop (IN)</dt>
<dd>
<p>An array of pointers to <code class="codeph">OCIAQMsgProperties</code> descriptors, of OCI type constant <code class="codeph">OCI_DTYPE_AQMSG_PROPERTIES</code>, introduced in Oracle Database 10<span class="italic">g</span> Release 2.</p>
<p><code class="codeph">OCI_DTYPE_AQMSG_PROPERTIES</code> has the attribute <code class="codeph">OCI_ATTR_MSG_DELIVERY_MODE</code>, which has the following values:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_MSG_PERSISTENT</code> (default)</p>
</li>
<li>
<p><code class="codeph">OCI_MSG_BUFFERED</code></p>
</li>
</ul>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74731"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C__GUID-984C8CEC-0F2B-4E59-A814-36093CC79D5B"><!-- --></a>payload_tdo (IN)</dt>
<dd>
<p>A pointer to the TDO of the queue table&#39;s payload column.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74732"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C__GUID-A0136128-4ADD-4CD5-BBD7-FE37C9C91DB2"><!-- --></a>payload (IN)</dt>
<dd>
<p>An array of pointers to messages to be enqueued.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74733"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C__GUID-B32B8C9E-7CA2-4923-9712-50441D42F471"><!-- --></a>payload_ind (IN)</dt>
<dd>
<p>An array of pointers to indicators, or a <code class="codeph">NULL</code> pointer if indicator variables are not used.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74734"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C__GUID-D2D353FB-EC48-472A-BF06-0F38350958DB"><!-- --></a>msgid (OUT)</dt>
<dd>
<p>An array of pointers to the message ID of the enqueued messages, or a <code class="codeph">NULL</code> pointer if no message IDs are returned.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74735"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C__GUID-8A036745-1963-481E-835D-9680FB53BB5F"><!-- --></a>ctxp (IN)</dt>
<dd>
<p>The context that is passed to the registered callback function.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74736"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C__GUID-B7EC0E3D-95E3-420D-80A7-CB970A9252B5"><!-- --></a>cbfp (IN)</dt>
<dd>
<p>A callback that can be registered to provide messages dynamically. If <code class="codeph">NULL</code>, then all messages must be materialized before calling <code class="codeph">OCIAQEnqArray()</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74737"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C__GUID-C860698C-78A8-49E6-8008-4ECB5B3FF3A2"><!-- --></a>flags (IN)</dt>
<dd>
<p>Not currently used; pass as <code class="codeph">OCI_DEFAULT</code>.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>This function is not supported in nonblocking mode.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Functions</p>
<p><a href="oci17msc003.htm#GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4" title="Performs an enqueue operation using Streams Advanced Queuing.">OCIAQEnq()</a>, <a href="oci17msc003.htm#GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A" title="Dequeues an array of messages from a queue.">OCIAQDeqArray()</a>, <a href="oci17msc003.htm#GUID-499ECEF6-F447-46C5-8F3F-48DE66839BD1">OCIAQListen2()</a>, <a href="ociaedep001.htm#GUID-F50356A8-450D-4A96-8AB5-5726502766B2" title="This function was deprecated in a release previous to Oracle Database 11g Release 2 (11.2).">OCIInitialize()</a> (deprecated), <a href="oci16rel001.htm#GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" title="Creates and initializes an environment handle for OCI functions to work under.">OCIEnvCreate()</a>, <a href="oci16rel001.htm#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="Creates and initializes an environment handle for OCI functions to work under.">OCIEnvNlsCreate()</a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17231"></a>
<div class="props_rev_3"><a id="GUID-499ECEF6-F447-46C5-8F3F-48DE66839BD1"></a>
<h2 id="LNOCI-GUID-499ECEF6-F447-46C5-8F3F-48DE66839BD1" class="sect2">OCIAQListen2()</h2>
<div>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Listens on one or more queues on behalf of a list of agents. Supports buffered messaging and persistent queues. Introduced in Oracle Database 10<span class="italic">g</span> Release 2.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">sword OCIAQListen2 (OCISvcCtx         *svchp, 
                    OCIError          *errhp,
                    OCIAQAgent        **agent_list, 
                    ub4               num_agents,
                    OCIAQListenOpts   *lopts, 
                    OCIAQAgent        **agent,
                    OCIAQLisMsgProps  *lmops,
                    ub4               flags);
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74738"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-499ECEF6-F447-46C5-8F3F-48DE66839BD1__GUID-53F8EBC9-26EC-4C18-B004-DB144D0D8C92"><!-- --></a><span class="bold">svchpp</span> (IN/OUT)</dt>
<dd>
<p>The service context handle.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74739"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-499ECEF6-F447-46C5-8F3F-48DE66839BD1__GUID-516CEFEE-5977-4BA7-9EDF-57121A6438AD"><!-- --></a><span class="bold">errhp</span> (IN/OUT)</dt>
<dd>
<p>An error handle that you can pass to <a href="oci17msc007.htm#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="Returns an error message and an Oracle Database error code.">OCIErrorGet()</a> for diagnostic information when there is an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74740"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-499ECEF6-F447-46C5-8F3F-48DE66839BD1__GUID-5AA8E79A-77E0-4D10-AD4A-5A71C35C94AB"><!-- --></a>agent_list (IN)</dt>
<dd>
<p>List of agents for which to monitor messages.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74741"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-499ECEF6-F447-46C5-8F3F-48DE66839BD1__GUID-FC4BB41A-9698-40E2-B958-E1F3E37E3509"><!-- --></a>num_agents (IN)</dt>
<dd>
<p>Number of agents in the agent list.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74742"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-499ECEF6-F447-46C5-8F3F-48DE66839BD1__GUID-D8315033-AD7A-46ED-A047-F7F3780AB935"><!-- --></a>lopts (IN)</dt>
<dd>
<p>Type constant <code class="codeph">OCI_DTYPE_AQLIS_OPTIONS</code> has the following attributes:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_ATTR_WAIT</code> - Maximum wait time, in seconds, for the listen call</p>
</li>
<li>
<p><code class="codeph">OCI_ATTR_MSG_DELIVERY_MODE</code> - Has one of these values:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_MSG_PERSISTENT</code></p>
</li>
<li>
<p><code class="codeph">OCI_MSG_BUFFERED</code></p>
</li>
<li>
<p><code class="codeph">OCI_MSG_PERSISTENT_OR_BUFFERED</code></p>
</li>
</ul>
</li>
</ul>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74743"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-499ECEF6-F447-46C5-8F3F-48DE66839BD1__GUID-D137465D-5BB6-4BE2-9E47-07F3F1018636"><!-- --></a>agent (OUT)</dt>
<dd>
<p>Agent for which there is a message. <code class="codeph">OCIAgent</code> is an OCI descriptor.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74744"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-499ECEF6-F447-46C5-8F3F-48DE66839BD1__GUID-C724ABB6-069A-458A-8ACC-2A6C3C77678A"><!-- --></a>lmops (OUT)</dt>
<dd>
<p><code class="codeph">OCI_DTYPE_AQLIS_MSG_PROPERTIES</code> (listen message properties) has one attribute, <code class="codeph">OCI_ATTR_MSG_DELIVERY_MODE</code>, which has the following values:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_MSG_PERSISTENT</code></p>
</li>
<li>
<p><code class="codeph">OCI_MSG_BUFFERED</code></p>
</li>
</ul>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74745"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-499ECEF6-F447-46C5-8F3F-48DE66839BD1__GUID-D9211207-808E-4F99-A675-F60E1C947F2B"><!-- --></a>flags (IN)</dt>
<dd>
<p>Not currently used; pass as <code class="codeph">OCI_DEFAULT</code>.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>This is a blocking call that returns when there is a message ready for consumption for an agent in the list. If there are no messages found when the wait time expires, an error is returned.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Functions</p>
<p><a href="oci17msc003.htm#GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4" title="Performs an enqueue operation using Streams Advanced Queuing.">OCIAQEnq()</a>, <a href="oci17msc003.htm#GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C">OCIAQDeq()</a>, <a href="oci17msc007.htm#GUID-FDA9A842-DA80-4FE5-AAFA-662D14C550A8" title="Toggles between a V8 or later service context handle and a V7 Lda_Def.">OCISvcCtxToLda()</a>, <a href="oci17msc003.htm#GUID-5C04A301-8564-46AF-A758-9DE7246F0F53" title="Enables a subscription registration that has been disabled.">OCISubscriptionEnable()</a>, <a href="oci17msc003.htm#GUID-EFD815F0-D669-4E01-AA54-E1499E302430" title="Posts to a subscription that allows all clients who are registered for the subscription to get notifications.">OCISubscriptionPost()</a>, <a href="oci17msc003.htm#GUID-36729D3E-E920-4FAA-8EAA-6E033F6D8930" title="Registers a callback for message notification.">OCISubscriptionRegister()</a>, <a href="oci17msc003.htm#GUID-C55B6743-4BB4-4E18-931C-5FBED94592D0" title="Unregisters a subscription that turns off notifications.">OCISubscriptionUnRegister()</a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17232"></a>
<div class="props_rev_3"><a id="GUID-72C51789-C48C-4F36-800B-EECC1AD98E00"></a>
<h2 id="LNOCI-GUID-72C51789-C48C-4F36-800B-EECC1AD98E00" class="sect2">OCISubscriptionDisable()</h2>
<div>
<p>Disables a subscription registration that turns off all notifications.</p>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Disables a subscription registration that turns off all notifications.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">ub4 OCISubscriptionDisable ( OCISubscription   *subscrhp,
                             OCIError          *errhp
                             ub4                mode );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74746"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-72C51789-C48C-4F36-800B-EECC1AD98E00__GUID-DB92F8B8-32C2-41B3-B5D4-6465DA7FC70D"><!-- --></a>subscrhp (IN)</dt>
<dd>
<p>A subscription handle with the <code class="codeph">OCI_ATTR_SUBSCR_NAME</code> and <code class="codeph">OCI_ATTR_SUBSCR_NAMESPACE</code> attributes set.</p>
<div class="infoboxnotealso" id="GUID-72C51789-C48C-4F36-800B-EECC1AD98E00__GUID-623333D3-087F-4713-9113-B7A5F75B8CCC">
<p class="notep1">See Also:</p>
<p><a href="ociaahan.htm#GUID-A76BBB38-8F77-40B8-B5A6-1F9C9166C71C" title="Lists and describes subscription handle attributes.">Subscription Handle Attributes</a></p>
</div>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74747"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-72C51789-C48C-4F36-800B-EECC1AD98E00__GUID-73FE215F-9226-4954-89EF-C6473F8B1046"><!-- --></a>errhp (OUT)</dt>
<dd>
<p>An error handle that you can pass to <code class="codeph">OCIErrorGet()</code> for diagnostic information when there is an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74748"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-72C51789-C48C-4F36-800B-EECC1AD98E00__GUID-D41D5A14-4D42-4D05-9D21-99B144AEFBA4"><!-- --></a>mode (IN)</dt>
<dd>
<p>Call-specific mode. The only valid value is <code class="codeph">OCI_DEFAULT</code><span>.</span> <code class="codeph">OCI_DEFAULT</code> executes the default call that discards all notifications on this subscription until the subscription is enabled.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>This call is used to temporarily turn off notifications. This is useful when the application is running a critical section of the code and should not be interrupted.</p>
<p>The user need not be connected or authenticated to perform this operation. A registration must have been performed to the subscription specified by the subscription handle before this call is made.</p>
<p>All notifications after an <code class="codeph">OCISubscriptionDisable()</code> are discarded by the system until an <code class="codeph">OCISubscriptionEnable()</code> is performed.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17233"></a>
<div class="props_rev_3"><a id="GUID-5C04A301-8564-46AF-A758-9DE7246F0F53"></a>
<h2 id="LNOCI-GUID-5C04A301-8564-46AF-A758-9DE7246F0F53" class="sect2">OCISubscriptionEnable()</h2>
<div>
<p>Enables a subscription registration that has been disabled.</p>
<div class="section">
<p class="subhead2">Purpose</p>
<p>This turns on all notifications.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">ub4 OCISubscriptionEnable ( OCISubscription   *subscrhp,
                            OCIError          *errhp
                            ub4                mode );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74749"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-5C04A301-8564-46AF-A758-9DE7246F0F53__GUID-29DFB62D-F1D5-4F71-B69B-BA11E3A575FD"><!-- --></a>subscrhp (IN)</dt>
<dd>
<p>A subscription handle with the <code class="codeph">OCI_ATTR_SUBSCR_NAME</code> and <code class="codeph">OCI_ATTR_SUBSCR_NAMESPACE</code> attributes set.</p>
<div class="infoboxnotealso" id="GUID-5C04A301-8564-46AF-A758-9DE7246F0F53__GUID-06383871-6CE2-483A-9FBD-54B036633CF6">
<p class="notep1">See Also:</p>
<p><a href="ociaahan.htm#GUID-A76BBB38-8F77-40B8-B5A6-1F9C9166C71C" title="Lists and describes subscription handle attributes.">Subscription Handle Attributes</a></p>
</div>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74750"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-5C04A301-8564-46AF-A758-9DE7246F0F53__GUID-4A1916FC-6543-452C-9C5E-CFA5FB5B714C"><!-- --></a>errhp (OUT)</dt>
<dd>
<p>An error handle that you can pass to <code class="codeph">OCIErrorGet()</code> for diagnostic information when there is an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74751"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-5C04A301-8564-46AF-A758-9DE7246F0F53__GUID-D9814DFD-83CE-4C47-8E53-89D51195BCF2"><!-- --></a>mode (IN)</dt>
<dd>
<p>Call-specific mode. The only valid value is OCI_DEFAULT. This value executes the default call that buffers all notifications on this subscription until a subsequent enable is performed.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>This call is used to turn on notifications after a subscription registration has been disabled.</p>
<p>The user need not be connected or authenticated to perform this operation. A registration must have been done for the specified subscription before this call is made.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17234"></a>
<div class="props_rev_3"><a id="GUID-EFD815F0-D669-4E01-AA54-E1499E302430"></a>
<h2 id="LNOCI-GUID-EFD815F0-D669-4E01-AA54-E1499E302430" class="sect2">OCISubscriptionPost()</h2>
<div>
<p>Posts to a subscription that allows all clients who are registered for the subscription to get notifications.</p>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Posts to a subscription that allows all clients who are registered for the subscription to get notifications.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">ub4 OCISubscriptionPost ( OCISvcCtx          *svchp,
                          OCISubscription   **subscrhpp,
                          ub2                 count,
                          OCIError           *errhp
                          ub4                 mode );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74752"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-EFD815F0-D669-4E01-AA54-E1499E302430__GUID-A6890A6E-E071-42BE-BA81-59A2D3C5294C"><!-- --></a>svchp (IN)</dt>
<dd>
<p>An OCI service context (after release 7). This service context should have a valid authenticated user handle.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74753"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-EFD815F0-D669-4E01-AA54-E1499E302430__GUID-C4DCD001-1FD3-4C31-9865-9117342884E5"><!-- --></a>subscrhpp (IN)</dt>
<dd>
<p>An array of subscription handles. Each element of this array should be a subscription handle with the <code class="codeph">OCI_ATTR_SUBSCR_NAME</code> and <code class="codeph">OCI_ATTR_SUBSCR_NAMESPACE</code> attributes set.</p>
<div class="infoboxnotealso" id="GUID-EFD815F0-D669-4E01-AA54-E1499E302430__GUID-2547B37D-E188-4FE5-B0BF-85914EB1D4E5">
<p class="notep1">See Also:</p>
<p><a href="ociaahan.htm#GUID-A76BBB38-8F77-40B8-B5A6-1F9C9166C71C" title="Lists and describes subscription handle attributes.">Subscription Handle Attributes</a></p>
</div>
<p>The <code class="codeph">OCI_ATTR_SUBSCR_PAYLOAD</code> attribute must be set for each subscription handle before this call. If it is not set, the payload is assumed to be <code class="codeph">NULL</code> and no payload is delivered when the notification is received by the clients that have registered interest. Note that the caller must preserve the payload until the post is done, as the <code class="codeph">OCIAttrSet()</code> call keeps track of the reference to the payload but does not copy the contents.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74754"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-EFD815F0-D669-4E01-AA54-E1499E302430__GUID-AA602FBF-A5F5-4767-AA61-AE3CE7B9ECD4"><!-- --></a>count (IN)</dt>
<dd>
<p>The number of elements in the subscription handle array.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74755"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-EFD815F0-D669-4E01-AA54-E1499E302430__GUID-DA50CA9D-7FE1-4D00-951B-75B897D22331"><!-- --></a>errhp (OUT)</dt>
<dd>
<p>An error handle that you can pass to <code class="codeph">OCIErrorGet()</code> for diagnostic information when there is an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74756"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-EFD815F0-D669-4E01-AA54-E1499E302430__GUID-9E385696-09C8-4DFF-9E40-B9AC6481EF43"><!-- --></a>mode (IN)</dt>
<dd>
<p>Call-specific mode. The only valid value is OCI_DEFAULT. This value executes the default call.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>Posting to a subscription involves identifying the subscription name and the payload if desired. If no payload is associated, the payload length can be set to 0.</p>
<p>This call provides a <span class="italic">best-effort</span> guarantee. A notification goes to registered clients at most once.</p>
<p>This call is primarily used for nonpersistent notification and is useful for several system events. If the application needs more rigid guarantees, it can use the Advanced Queuing functionality by enqueuing to the queue.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17235"></a>
<div class="props_rev_3"><a id="GUID-36729D3E-E920-4FAA-8EAA-6E033F6D8930"></a>
<h2 id="LNOCI-GUID-36729D3E-E920-4FAA-8EAA-6E033F6D8930" class="sect2">OCISubscriptionRegister()</h2>
<div>
<p>Registers a callback for message notification.</p>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Registers a callback for message notification.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">ub4 OCISubscriptionRegister ( OCISvcCtx          *svchp,
                              OCISubscription   **subscrhpp,
                              ub2                 count,
                              OCIError           *errhp
                              ub4                 mode );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74757"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-36729D3E-E920-4FAA-8EAA-6E033F6D8930__GUID-30D23903-B3DA-4333-A49A-977F9398D1BD"><!-- --></a>svchp (IN)</dt>
<dd>
<p>An OCI service context (after release 7). This service context should have a valid authenticated user handle.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74758"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-36729D3E-E920-4FAA-8EAA-6E033F6D8930__GUID-327C333E-F6BB-4CD0-83D4-F858C7E75D65"><!-- --></a>subscrhpp (IN)</dt>
<dd>
<p>An array of subscription handles. Each element of this array should be a subscription handle with all of the following attributes set:</p>
</dd>
</dl>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_ATTR_SUBSCR_NAME</code></p>
</li>
<li>
<p><code class="codeph">OCI_ATTR_SUBSCR_NAMESPACE</code></p>
</li>
<li>
<p><code class="codeph">OCI_ATTR_SUBSCR_RECPTPROTO</code></p>
</li>
</ul>
<p>Otherwise, an error is returned.</p>
<p>One of the following attributes must also be set:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_ATTR_SUBSCR_CALLBACK</code></p>
</li>
<li>
<p><code class="codeph">OCI_ATTR_SUBSCR_CTX</code></p>
</li>
<li>
<p><code class="codeph">OCI_ATTR_SUBSCR_RECPT</code></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-36729D3E-E920-4FAA-8EAA-6E033F6D8930__GUID-54DF7DFB-6914-4DCE-9DB3-1889C6D4B5EF">
<p class="notep1">See Also:</p>
<p><a href="ociaahan.htm#GUID-A76BBB38-8F77-40B8-B5A6-1F9C9166C71C" title="Lists and describes subscription handle attributes.">Subscription Handle Attributes</a> for information about the handle attributes</p>
</div>
<p>When a notification is received for the registration denoted by <code class="codeph">subscrhpp[i]</code>, either the user-defined callback function (<code class="codeph">OCI_ATTR_SUBSCR_CALLBACK</code>) set for <code class="codeph">subscrhpp[i]</code> is invoked with the context (<code class="codeph">OCI_ATTR_SUBSCR_CTX</code>) set for <code class="codeph">subscrhpp[i]</code>, or an email is sent to (<code class="codeph">OCI_ATTR_SUBSCR_RECPT</code>) set for <code class="codeph">subscrhpp[i]</code>, or the PL/SQL procedure (<code class="codeph">OCI_ATTR_SUBSCR_RECPT</code>) set for <code class="codeph">subscrhpp[i]</code> is invoked in the database, provided the subscriber of <code class="codeph">subscrhpp[i]</code> has the appropriate permissions on the procedure.</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74759"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-36729D3E-E920-4FAA-8EAA-6E033F6D8930__GUID-21DF370C-B8CE-43EC-B881-00ED47ACB955"><!-- --></a>count (IN)</dt>
<dd>
<p>The number of elements in the subscription handle array.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74760"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-36729D3E-E920-4FAA-8EAA-6E033F6D8930__GUID-1405BAD0-824A-4678-AAD3-190E0C97D60D"><!-- --></a>errhp (OUT)</dt>
<dd>
<p>An error handle that you can pass to <code class="codeph">OCIErrorGet()</code> for diagnostic information when there is an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74761"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-36729D3E-E920-4FAA-8EAA-6E033F6D8930__GUID-0D04C658-C4BF-4C6A-A801-AA44BD5F1A46"><!-- --></a>mode (IN)</dt>
<dd>
<p>Call-specific mode. Valid values are:</p>
</dd>
</dl>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_DEFAULT</code> - Use when there is only one server DN in the server DN descriptor. The registration request is sent to the database. If a database connection is not available, the registration request is detoured to the LDAP server.</p>
</li>
<li>
<p><code class="codeph">OCI_REG_LDAPONLY</code> - The registration request is sent directly to the LDAP server. Use this mode when there are multiple server DNs in the server DN descriptor, or you are certain that a database connection is not available.</p>
</li>
</ul>
<p>Whenever a new client process comes up, or an old one goes down and comes back up, it must register for all subscriptions of interest. If the client stays up and the server first goes down and then comes back up, the client continues to receive notifications for registrations that are DISCONNECTED. However, the client does not receive notifications for CONNECTED registrations, as they are lost after the server goes down and comes back up.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>This call is invoked for registration to a subscription that identifies the subscription name of interest and the associated callback to be invoked. Interest in several subscriptions can be registered simultaneously.</p>
<p>This interface is only valid for the asynchronous mode of message delivery. In this mode, a subscriber issues a registration call that specifies a callback. When messages are received that match the subscription criteria, the callback is invoked. The callback may then issue an explicit <code class="codeph">message_receive</code> (dequeue) to retrieve the message.</p>
<p>The user must specify a subscription handle at registration time with the namespace attribute set to <code class="codeph">OCI_SUBSCR_NAMESPACE_AQ</code>.</p>
<p>The subscription name is the string <code class="codeph">SCHEMA.QUEUE</code> if the registration is for a single consumer queue and <code class="codeph">SCHEMA.QUEUE:CONSUMER_NAME</code> if the registration is for a multiconsumer queue. The string should be in uppercase.</p>
<p>Each namespace has its own privilege model. If the user performing the registration is not entitled to register in the namespace for the specified subscription, an error is returned.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI17236"></a>
<div class="props_rev_3"><a id="GUID-C55B6743-4BB4-4E18-931C-5FBED94592D0"></a>
<h2 id="LNOCI-GUID-C55B6743-4BB4-4E18-931C-5FBED94592D0" class="sect2">OCISubscriptionUnRegister()</h2>
<div>
<p>Unregisters a subscription that turns off notifications.</p>
<div class="section">
<p class="subhead2">Purpose</p>
<p>Unregisters a subscription that turns off notifications.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">ub4 OCISubscriptionUnRegister ( OCISvcCtx         *svchp,
                                OCISubscription   *subscrhp,
                                OCIError          *errhp
                                ub4                mode );
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74762"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-C55B6743-4BB4-4E18-931C-5FBED94592D0__GUID-9D54B460-A2CD-4730-AE46-E8325848402A"><!-- --></a>svchp (IN)</dt>
<dd>
<p>An OCI service context (after release 7). This service context should have a valid authenticated user handle.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74763"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-C55B6743-4BB4-4E18-931C-5FBED94592D0__GUID-1A7CF6D0-241A-4362-A4FC-4DC5C18C869B"><!-- --></a>subscrhp (IN)</dt>
<dd>
<p>A subscription handle with the <code class="codeph">OCI_ATTR_SUBSCR_NAME</code> and <code class="codeph">OCI_ATTR_SUBSCR_NAMESPACE</code> attributes set.</p>
<div class="infoboxnotealso" id="GUID-C55B6743-4BB4-4E18-931C-5FBED94592D0__GUID-EEC36B2B-B91A-42EF-92C6-C943FF58FDB5">
<p class="notep1">See Also:</p>
<p><a href="ociaahan.htm#GUID-A76BBB38-8F77-40B8-B5A6-1F9C9166C71C" title="Lists and describes subscription handle attributes.">Subscription Handle Attributes</a></p>
</div>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74764"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-C55B6743-4BB4-4E18-931C-5FBED94592D0__GUID-1AF2825E-F89D-4606-9290-47711D3A8464"><!-- --></a>errhp (OUT)</dt>
<dd>
<p>An error handle that you can pass to <code class="codeph">OCIErrorGet()</code> for diagnostic information when there is an error.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74765"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-C55B6743-4BB4-4E18-931C-5FBED94592D0__GUID-8E891325-1F4F-469B-A80B-241ECC9F21B1"><!-- --></a>mode (IN)</dt>
<dd>
<p>Call-specific mode. Valid values are:</p>
</dd>
</dl>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_DEFAULT</code> - Use when there is only one server DN in the server DN descriptor. The registration request is sent to the database. If a database connection is not available, the registration request is detoured to the LDAP server.</p>
</li>
<li>
<p><code class="codeph">OCI_REG_LDAPONLY</code> - The registration request is sent directly to the LDAP server. Use this mode when there are multiple server DNs in the server DN descriptor, or you are certain that a database connection is not available.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Comments</p>
<p>Unregistering a subscription ensures that the user does not receive notifications regarding the specified subscription in the future. If the user wants to resume notification, then the only option is to reregister for the subscription.</p>
<p>All notifications that would otherwise have been delivered are not delivered after a subsequent registration is performed because the user is no longer in the list of interested clients.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment6150">
<tr>
<td class="cellalignment6162">
<table class="cellalignment6155">
<tr>
<td class="cellalignment6154"><a href="oci17msc002.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment6154"><a href="oci17msc004.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment6164">
<table class="cellalignment6153">
<tr>
<td class="cellalignment6154"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment6154"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment6154"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment6154"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment6154"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment6154"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>