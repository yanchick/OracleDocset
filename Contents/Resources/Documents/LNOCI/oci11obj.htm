<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-74001"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/OCI%20Object-Relational%20Programming"></a><title>OCI Object-Relational Programming</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="This chapter introduces the OCI facility for working with objects in an Oracle database. It also discusses the object navigational function calls of OCI."/>
<meta name="keywords" content="objects, use with OCI, OCI applications, structure using objects, OCI object application structure, types, persistent, transient, values, object identifiers, for persistent objects, terminology, OID, persistent objects, transient objects, in object applications, object type, representing in C applications, OTT utility, ADT, OTT, type descriptor object, Object Type Translator utility, sample output, NULL indicator struct, generated by OTT, ORE, object runtime environment, with objects, initializing, OCI environment, initializing for objects, OCI process, object cache, object run-time environment, database connection, for object applications, object applications, REFs, retrieving from server, references to objects, object references, pinning, array pin, attributes, manipulating, marking, flushing changes, flushing, object changes, embedded objects, fetching, meta-attributes, of objects, of persistent objects, object view, of transient objects, complex object retrieval, COR, complex object retrieval, implementing, OCIComplexObject, use of, OCIComplexObjectComp, navigational prefetching, pin count, unpinning objects, NULL values, nullness, NULLs, atomic, atomic NULLs, OCIInd, varrays, OCIObjectGetInd(), example of use, NULL indicator, setting for an object attribute, OCI_IND_NULL, creating, freeing, copying, type reference, errors, handling in object applications, type evolution"/>
<meta name="dcterms.created" content="2017-06-09T09:07:30Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Call Interface Programmer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49886-11"/>
<meta name="dcterms.isVersionOf" content="LNOCI"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="oci10new.htm" title="Previous" type="text/html"/>
<link rel="Next" href="oci12oty.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49886-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-8A9E9784-9D10-40B1-ADE9-4CE9325255E5"></a> <span id="PAGE" style="display:none;">18/84</span> <!-- End Header -->
<a id="LNOCI100"></a>
<h1 id="LNOCI-GUID-8A9E9784-9D10-40B1-ADE9-4CE9325255E5" class="sect1"><span class="enumeration_chapter">11</span> OCI Object-Relational Programming</h1>
<div>
<p>This chapter introduces the OCI facility for working with objects in an Oracle database. It also discusses the object navigational function calls of OCI.</p>
<p>This chapter contains these topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci11obj.htm#GUID-EE003A8F-A19B-499C-A8FE-4BB4B37EC44D">OCI Object Overview</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-3F376D7F-56D2-4C5B-97FE-1E94E2A57519" title="Many of the programming principles that govern a relational OCI application are the same for an object-relational application.">About Working with Objects in OCI</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-E7064985-9564-42EA-B4F7-1604088BF15F" title="This section discusses the steps involved in developing a basic OCI object application.">About Developing an OCI Object Application</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-CDE560AC-9FE0-4393-9EDC-0648DB38C5C9" title="Type inheritance of objects has many similarities to inheritance in C++ and Java.">About Type Inheritance</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-34071CB4-805F-4DFE-B2F3-2E51A5B312F9" title="Adding, dropping, and modifying type attributes are supported. This concept is known as type evolution.">About Type Evolution</a></p>
</li>
</ul>
</div>
<a id="LNOCI16776"></a>
<div class="props_rev_3"><a id="GUID-EE003A8F-A19B-499C-A8FE-4BB4B37EC44D"></a>
<h2 id="LNOCI-GUID-EE003A8F-A19B-499C-A8FE-4BB4B37EC44D" class="sect2">OCI Object Overview</h2>
<div>
<p>OCI allows applications to access any of the data types found in Oracle Database, including scalar values, collections, and instances of any object type. This includes all of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Objects</p>
</li>
<li>
<p>Variable-length arrays (<a id="d126108e347" class="indexterm-anchor"></a><code class="codeph">varray</code>s)</p>
</li>
<li>
<p>Nested tables (multisets)</p>
</li>
<li>
<p>References (<code class="codeph">REF</code>s)</p>
</li>
<li>
<p>LOBs</p>
</li>
</ul>
<p>To take full advantage of Oracle Database object capabilities, most applications must do more than just access objects. After an object has been retrieved, the application must navigate through references from that object to other objects. OCI provides the capability to do this. Through the OCI object <span class="italic">navigational calls</span>, an application can perform any of the following functions on objects:</p>
<ul style="list-style-type: disc;">
<li>
<p>Creating, accessing, locking, deleting, copying, and flushing objects</p>
</li>
<li>
<p>Getting references to the objects and their meta-objects</p>
</li>
<li>
<p>Dynamically getting and setting values of objects&#39; attributes</p>
</li>
</ul>
<p>The OCI navigational calls are discussed in more detail beginning in <span class="q">&#34;<a href="oci11obj.htm#GUID-E7064985-9564-42EA-B4F7-1604088BF15F" title="This section discusses the steps involved in developing a basic OCI object application.">About Developing an OCI Object Application</a>&#34;</span>.</p>
<p>OCI also provides the ability to access type information stored in an Oracle database. The <a href="oci16rel003.htm#GUID-AE9F73FB-DCC1-401E-8151-A8A89059163A" title="Describes existing schema and subschema objects.">OCIDescribeAny()</a> function enables an application to access most information relating to types stored in the database, including information about methods, attributes, and type metadata.</p>
<div class="infoboxnotealso" id="GUID-EE003A8F-A19B-499C-A8FE-4BB4B37EC44D__GUID-930F4B83-1045-4AED-9808-4DD61914A626">
<p class="notep1">See Also:</p>
<p><a href="oci06des.htm#GUID-CED0D15A-D873-43F7-A5B2-51FC0662C250" title="Performs an explicit describe of schema objects and their subschema objects.The OCIDescribeAny() call limits information returned to the basic information and stops expanding a node if it amounts to another describe operation.What to be aware of when performing describe operations.The OCI_ATTR_TYPECODE attribute returns typecodes that represent the types supplied by the user when a new type is created using the CREATE TYPE statement.To describe type objects, it is necessary to initialize the OCI process in object mode.The column attribute OCI_ATTR_PRECISION can be returned using an implicit describe with OCIStmtExecute() and an explicit describe with OCIDescribeAny().This section describes the attributes and handles that belong to different parameters.Lists and describes the type-specific attributes when a parameter is for a procedure or function.Lists and describes the attributes when a parameter is for a package.Lists and describes the attributes when a parameter is for a type. Lists and describes the attributes when a parameter is for an attribute of a type.Lists and dsescribes the attributes when a parameter is for a method of a type.Lists and describes the attributes when a parameter is for a collection type.Lists and describes the attributes when a parameter is for a synonym.Lists and describes the attributes when a parameter is for a sequence.Lists and describes the attributes when a parameter is for an argument of a procedure or function.Lists and describes the attributes when the parameter is for a list of columns, arguments, and subprograms, or fields of a package record type.Lists and describes the attributes when a parameter is for a schema type.Lists and describes the attributes when a parameter is for a database type.Lists and describes the attributes when a parameter is for a rule.Lists and describes the attributes when a parameter is for a rule set.Lists and describes the attributes when a parameter is for an evaluation context.Lists and describes the attributes when a parameter is for a table alias.Lists and describes the attributes when a parameter is for a variable.Lists and describes the attributes when a parameter is for a name-value pair.Query and column information are supported with character-length semantics.Explicit describes of tables have three attributes: OCI_ATTR_DATA_SIZE, OCI_ATTR_CHAR_SIZE, and OCI_ATTR_CHAR_USED.Character-length semantics depends on the release of the server or client. It is best described when both server and client are Oracle9i or later. Otherwise, compatibility issues as described result.The following examples demonstrate the use of OCIDescribeAny() for describing different types of schema objects.Shows a loop that retrieves the column names and data types corresponding to a query following query execution.Illustrates the use of invisible column properties and checking each column to determine if it is an invisible column.">Describing Schema Metadata</a> for a discussion of <code class="codeph">OCIDescribeAny()</code></p>
</div>
<p>Applications interacting with Oracle Database objects need a way to represent those objects in a host language format. Oracle Database provides a utility called the Object Type Translator (OTT), which can convert type definitions in the database to C struct declarations. The declarations are stored in a header file that can be included in an OCI application.</p>
<p>When type definitions are represented in C, the types of attributes are mapped to special C variable types. OCI includes a set of <span class="italic">data type mapping and manipulation functions</span> that enable an application to manipulate these data types, and thus manipulate the attributes of objects.</p>
<div class="infoboxnotealso" id="GUID-EE003A8F-A19B-499C-A8FE-4BB4B37EC44D__GUID-01839063-6032-4A03-9792-7DF17CABAEFB">
<p class="notep1">See Also:</p>
<p><a href="oci12oty.htm#GUID-C62AEE74-0CC5-4FAB-A91F-997F71C49C2C" title="This chapter describes the purpose and structure of each of the data types that can be manipulated by the OCI data type mapping and manipulation functions.">Object-Relational Data Types in OCI</a> for a more detailed discussion about functions</p>
</div>
<p>The terminology for objects can occasionally become confusing. In the remainder of this chapter, the terms <span class="italic">object</span> and <span class="italic">instance</span> both refer to an object that is either stored in the database or is present in the object cache.</p>
</div>
</div>
<a id="LNOCI16777"></a>
<div class="props_rev_3"><a id="GUID-3F376D7F-56D2-4C5B-97FE-1E94E2A57519"></a>
<h2 id="LNOCI-GUID-3F376D7F-56D2-4C5B-97FE-1E94E2A57519" class="sect2">About Working with Objects in OCI</h2>
<div>
<p>Many of the programming principles that govern a relational OCI application are the same for an object-relational application.</p>
<p>An object-relational application uses the standard OCI calls to establish database connections and process SQL statements. The difference is that the SQL statements issued retrieve object references, which can then be manipulated with the OCI object functions. An object can also be directly manipulated as a value instance (without using its object reference).</p>
<div class="p">This section includes the following topics:
<ul style="list-style-type: disc;">
<li>
<p><a href="oci11obj.htm#GUID-E607333E-D9E4-4F7C-BF31-4AAB18B37A7B" title="The basic structure of an OCI application that uses objects is essentially the same as that for a relational OCI application.">Basic Object Program Structure</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-8E954104-DBBB-46F7-823B-B29C1E83EFE9" title="Instances of an Oracle type are categorized into persistent objects and transient objects based on their lifetime.">Persistent Objects, Transient Objects, and Values</a></p>
</li>
</ul>
</div>
</div>
<a id="LNOCI16778"></a>
<div class="props_rev_3"><a id="GUID-E607333E-D9E4-4F7C-BF31-4AAB18B37A7B"></a>
<h3 id="LNOCI-GUID-E607333E-D9E4-4F7C-BF31-4AAB18B37A7B" class="sect3">Basic Object Program Structure</h3>
<div>
<p>The basic structure of an OCI application that uses objects is essentially the same as that for a relational OCI application.</p>
<p>That paradigm is reproduced here, with extra information covering basic object functionality.</p>
<ol>
<li>
<p>Initialize the OCI programming environment. You <span class="italic">must</span> initialize the environment in object mode.</p>
<p>Your application must include C struct representations of database objects in a header file. These structs can be created by the programmer, or, more easily, they can be generated by the Object Type Translator (OTT).</p>
</li>
<li>
<p>Allocate necessary handles, and establish a connection to a server.</p>
</li>
<li>
<p>Prepare a SQL statement for execution. This is a local (client-side) step, which may include binding placeholders and defining output variables. In an object-relational application, this SQL statement should return a reference (<code class="codeph">REF</code>) to an object.</p>
<div class="infobox-note" id="GUID-E607333E-D9E4-4F7C-BF31-4AAB18B37A7B__GUID-C23B5AA6-26A2-4FCA-B0F6-A3F1357C59EB">
<p class="notep1">Note:</p>
<p>It is also possible to fetch an entire object, rather than just a reference (<code class="codeph">REF</code>). If you select a referenceable object, rather than pinning it, you get that object <span class="italic">by value</span>. You can also select a nonreferenceable object.</p>
</div>
</li>
<li>
<p>Associate the prepared statement with a database server, and execute the statement.</p>
</li>
<li>
<p>Fetch returned results.</p>
<p>In an object-relational application, this step entails retrieving the <code class="codeph">REF</code>, and then pinning the object to which it refers. Once the object is pinned, your application can do some or all of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Manipulate the attributes of the object and mark it as <span class="italic">dirty</span> (modified)</p>
</li>
<li>
<p>Follow a <code class="codeph">REF</code> to another object or series of objects</p>
</li>
<li>
<p>Access type and attribute information</p>
</li>
<li>
<p>Navigate a complex object retrieval graph</p>
</li>
<li>
<p>Flush modified objects to the server</p>
</li>
</ul>
</li>
<li>
<p>Commit the transaction. This step implicitly flushes all modified objects to the server and commits the changes.</p>
</li>
<li>
<p>Free statements and handles not to be reused, or reexecute prepared statements again.</p>
</li>
</ol>
<p>These steps are discussed in more detail in the remainder of this chapter.</p>
<div class="infoboxnotealso" id="GUID-E607333E-D9E4-4F7C-BF31-4AAB18B37A7B__GUID-34B68EB6-49B1-435B-A0CE-CAAB00060433">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci02bas.htm#GUID-15C10430-3EBA-44B4-9518-BB097972A0F2" title="The general goal of an OCI application is to operate on behalf of multiple users.">Overview of OCI Program Programming</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-7B0B6CF5-AD69-4FCB-9E96-CA6469601077" title="An application must fetch embedded object instances.">Fetching Embedded Objects</a> describes fetching the entire object</p>
</li>
<li>
<p><a href="oci02bas.htm#GUID-4CFB8AF7-EF05-4E0F-847F-2D0710E552C5" title="This chapter introduces concepts and procedures involved in programming with OCI.">OCI Programming Basics</a> for information about using OCI to connect to a server, process SQL statements, and allocate handles and the description of the OCI relational functions in <a href="oci16rel.htm#GUID-322BCDA4-1A70-4BD1-85F1-FAACC4C772F5" title="This chapter begins to describe the Oracle Database Access C API and in particular the OCI relational functions for C.">Oracle Database Access C API</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-E54EFD72-BB77-4F4E-ABEB-34159AE84545" title="Before an OCI application can work with object types, those types must exist in the database.">About Representing Objects in C Applications</a> for information about OTT and <a href="oci15ott.htm#GUID-3D22CA8E-BE01-492F-BA85-DDD0CD3F4890" title="This chapter discusses the Object Type Translator (OTT), which is used to map database object types and named collection types to C structs for use in OCI applications.">Using the Object Type Translator with OCI</a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="LNOCI16779"></a>
<div class="props_rev_3"><a id="GUID-8E954104-DBBB-46F7-823B-B29C1E83EFE9"></a>
<h3 id="LNOCI-GUID-8E954104-DBBB-46F7-823B-B29C1E83EFE9" class="sect3">Persistent Objects, Transient Objects, and Values</h3>
<div>
<p>Instances of an Oracle type are categorized into <span class="italic">persistent objects</span> and <span class="italic">transient objects</span> based on their lifetime.</p>
<p>Instances of persistent objects can be further divided into <span class="italic">standalone objects</span> and <span class="italic">embedded objects</span> depending on whether they are referenceable by way of an object identifier.</p>
<div class="infobox-note" id="GUID-8E954104-DBBB-46F7-823B-B29C1E83EFE9__GUID-2AE9A336-885F-4744-9242-35FCBED51C87">
<p class="notep1">Note:</p>
<p>The terms <span class="italic">object</span> and <span class="italic">instance</span> are used interchangeably in this manual.</p>
</div>
<div class="p">This section includes the following topics:
<ul style="list-style-type: disc;">
<li>
<p><a href="oci11obj.htm#GUID-0C2B61C1-67AD-4B6B-8936-96FD21BA46EE">Persistent Objects</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-767FA104-F113-4B6A-AC27-568895A0D649" title="A transient object is a temporary instance whose life does not exceed that of the application, and that cannot be stored or flushed to the server.">Transient Objects</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-AFA10D2A-9584-49C2-9530-29B41D376AFC">Values</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-8E954104-DBBB-46F7-823B-B29C1E83EFE9__GUID-B2DDFA11-4285-402D-859F-9CD25C6CA702">
<p class="notep1">See Also:</p>
<p><a class="olink ADOBJ001" target="_blank" href="../ADOBJ/adobjint.htm#ADOBJ001"><span><cite>Oracle Database Object-Relational Developer&#39;s Guide</cite></span></a> for more information about objects</p>
</div>
</div>
</div>
<a id="LNOCI72700"></a><a id="LNOCI72701"></a><a id="LNOCI16780"></a>
<div class="props_rev_3"><a id="GUID-0C2B61C1-67AD-4B6B-8936-96FD21BA46EE"></a>
<h4 id="LNOCI-GUID-0C2B61C1-67AD-4B6B-8936-96FD21BA46EE" class="sect4">Persistent Objects</h4>
<div>
<p>A persistent object is an object that is stored in an Oracle database. It may be fetched into the object cache and modified by an OCI application. The lifetime of a persistent object can exceed that of the application that is accessing it. Once it is created, it remains in the database until it is explicitly deleted. There are two types of persistent objects:</p>
<ul style="list-style-type: disc;">
<li>
<p>Standalone instances are stored in rows of an object table, and each instance has a unique object identifier. An OCI application can retrieve a <code class="codeph">REF</code> to a standalone instance, pin the object, and navigate from the pinned object to other related objects. Standalone objects may also be referred to as <span class="italic">referenceable objects</span>.</p>
<p>It is also possible to select a referenceable object, in which case you fetch the object <span class="italic">by value</span> instead of fetching its <code class="codeph">REF</code>.</p>
</li>
<li>
<p>Embedded instances are not stored as rows in an object table. They are embedded within other structures. Examples of embedded objects are objects that are attributes of another object, or instances that exist in an object column of a database table. Embedded instances do not have object identifiers, and OCI applications cannot get <code class="codeph">REF</code>s to embedded instances.</p>
<p>Embedded objects may also be referred to as <span class="italic">nonreferenceable objects</span> or <span class="italic">value instances</span>. You may sometimes see them referred to as <span class="italic">values</span>, which is not to be confused with scalar data values. The context should make the meaning clear.</p>
</li>
</ul>
<p><a href="oci11obj.htm#GUID-0C2B61C1-67AD-4B6B-8936-96FD21BA46EE__BGBDBIFJ">Example 11-1</a> and <a href="oci11obj.htm#GUID-0C2B61C1-67AD-4B6B-8936-96FD21BA46EE__BGBGEACI">Example 11-2</a> show SQL examples that demonstrate the difference between these two types of persistent objects.</p>
<p>Objects that are stored in the object table <code class="codeph">person_tab</code> are standalone instances. They have object identifiers and are referenceable. They can be pinned in an OCI application.</p>
<p>Objects that are stored in the <code class="codeph">manager</code> column of the <code class="codeph">department</code> table are embedded objects. They do not have object identifiers, and they are not referenceable; this means they cannot be pinned in an OCI application, and they also never need to be unpinned. They are always retrieved into the object cache <span class="italic">by value</span>.</p>
<div class="example" id="GUID-0C2B61C1-67AD-4B6B-8936-96FD21BA46EE__BGBDBIFJ">
<p class="titleinexample">Example 11-1 SQL Definition of Standalone Objects</p>
<pre dir="ltr">CREATE TYPE person_t AS OBJECT
   (name      varchar2(30),
    age       number(3));
CREATE TABLE person_tab OF person_t;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-0C2B61C1-67AD-4B6B-8936-96FD21BA46EE__BGBGEACI">
<p class="titleinexample">Example 11-2 SQL Definition of Embedded Objects</p>
<pre dir="ltr">CREATE TABLE department
   (deptno     number,
    deptname   varchar2(30),
    manager    person_t);
</pre></div>
<!-- class="example" --></div>
</div>
<a id="LNOCI16783"></a>
<div class="props_rev_3"><a id="GUID-767FA104-F113-4B6A-AC27-568895A0D649"></a>
<h4 id="LNOCI-GUID-767FA104-F113-4B6A-AC27-568895A0D649" class="sect4">Transient Objects</h4>
<div>
<p>A transient object is a temporary instance whose life does not exceed that of the application, and that cannot be stored or flushed to the server.</p>
<p>The application can delete a transient object at any time.</p>
<p>Transient objects are often created by the application using the <code class="codeph">OCIObjectNew()</code> function to store temporary values for computation. Transient objects cannot be converted to persistent objects. Their role is fixed at the time they are instantiated.</p>
<div class="infoboxnotealso" id="GUID-767FA104-F113-4B6A-AC27-568895A0D649__GUID-59F0082B-158D-4087-87C9-26F936691375">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci11obj.htm#GUID-86418D8C-FA67-4B14-A5BC-7A075C6B4206" title="An OCI application can create any object using OCIObjectNew().">About Creating Objects</a> for more information about using <code class="codeph">OCIObjectNew()</code></p>
</li>
<li>
<p><a href="oci18nav004.htm#GUID-2EFD6F01-A02F-4C5B-B20F-1EF841249056" title="Creates a standalone instance.">OCIObjectNew()</a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="LNOCI16784"></a>
<div class="props_rev_3"><a id="GUID-AFA10D2A-9584-49C2-9530-29B41D376AFC"></a>
<h4 id="LNOCI-GUID-AFA10D2A-9584-49C2-9530-29B41D376AFC" class="sect4">Values</h4>
<div>
<p>In the context of this manual, a <span class="italic">value</span> refers to either:</p>
<ul style="list-style-type: disc;">
<li>
<p>A scalar value that is stored in a non-object column of a database table. An OCI application can fetch values from a database by issuing SQL statements.</p>
</li>
<li>
<p>An embedded or nonreferenceable object.</p>
</li>
</ul>
<p>The context should make it clear which meaning is intended.</p>
<div class="infobox-note" id="GUID-AFA10D2A-9584-49C2-9530-29B41D376AFC__GUID-31789B3E-965F-4A8C-BD0A-026859C97CF4">
<p class="notep1">Note:</p>
<p>It is possible to select a referenceable object into the object cache, rather than pinning it, in which case you fetch the object <span class="italic">by value</span> instead of fetching its <code class="codeph">REF</code>.</p>
</div>
</div>
</div>
</div>
</div>
<a id="LNOCI16786"></a><a id="LNOCI16785"></a>
<div class="props_rev_3"><a id="GUID-E7064985-9564-42EA-B4F7-1604088BF15F"></a>
<h2 id="LNOCI-GUID-E7064985-9564-42EA-B4F7-1604088BF15F" class="sect2">About Developing an OCI Object Application</h2>
<div>
<p>This section discusses the steps involved in developing a basic OCI object application.</p>
<p><a href="oci11obj.htm#GUID-E7064985-9564-42EA-B4F7-1604088BF15F__BGBCJDIH">Figure 11-1</a> shows a simple program logic flow for how an application might work with objects. For simplicity, some required steps are omitted. Each step in this diagram is discussed in the following sections.</p>
<div class="figure" id="GUID-E7064985-9564-42EA-B4F7-1604088BF15F__BGBCJDIH">
<p class="titleinfigure">Figure 11-1 Basic Object Operational Flow</p>
<img width="229" height="285" src="img/GUID-932369E4-8D83-4D81-ACE3-D73E1F34246D-default.gif" alt="Description of Figure 11-1 follows" title="Description of Figure 11-1 follows"/><br/>
<a href="img_text/GUID-932369E4-8D83-4D81-ACE3-D73E1F34246D-print.htm">Description of &#34;Figure 11-1 Basic Object Operational Flow&#34;</a></div>
<!-- class="figure" -->
<div class="p">This section includes the following topics:
<ul style="list-style-type: disc;">
<li>
<p><a href="oci11obj.htm#GUID-E54EFD72-BB77-4F4E-ABEB-34159AE84545" title="Before an OCI application can work with object types, those types must exist in the database.">About Representing Objects in C Applications</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-C89832E1-97A6-431F-ADC6-9CBF6B1EBA4E" title="If your OCI application is going to access and manipulate objects, it is essential that you specify a value of OCI_OBJECT for the mode parameter of the OCIEnvCreate() call, which is the first OCI call in any OCI application. Specifying this value for mode indicates to the OCI libraries that your application is working with objects.">About Initializing the Environment and the Object Cache</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-18CD42FA-2308-414F-B4FA-6AE34421A346">About Making Database Connections</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-2214E88A-97CD-4DF8-B1FD-31EB50D01402" title="To work with objects, your application must first retrieve one or more objects from the server.">Retrieving an Object Reference from the Server</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-B9E5DDBD-19CD-4AE0-B1D3-3B85ADEAAAB1" title="Pinning an object loads the object instance into the object cache, and enables you to access and modify the instance&#39;s attributes and follow references from that object to other objects, if necessary.">Pinning an Object</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-BA775817-78E4-4C49-A3C2-C867C50509B2" title="Once an object has been pinned, an OCI application can modify its attributes.">Manipulating Object Attributes</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-2F9466DE-9186-495E-92EE-B7FBAA65D6B9" title="The application must take specific steps to ensure that changes to objects by marking them and then flushing them are written in the database.">About Marking Objects and Flushing Changes</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-7B0B6CF5-AD69-4FCB-9E96-CA6469601077" title="An application must fetch embedded object instances.">Fetching Embedded Objects</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-3B272F98-B2B9-4D63-9081-0F15A81747CC" title="An object&#39;s meta-attributes serve as flags that can provide information to an application, or to the object cache, about the status of an object.">Object Meta-Attributes</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-03683C87-7758-421A-BC51-C54A5A7679F2" title="A complex object includes its root object and its set of logically related objects each of which are prefetched based on a given depth level.">Complex Object Retrieval</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-22733B74-F52F-4E54-8E5E-5C27FD03F5DC" title="The application specifies a complex object while fetching the root object.">COR Prefetching</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-05972451-AAD6-4929-848B-DE406B82AA0F">OCI Versus SQL Access to Objects</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-86097867-CFAA-428C-AE6D-B08E45220DDD" title="Each object in the object cache has a pin count associated with it.">Pin Count and Unpinning</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-D0FD9D2E-DAE1-4468-B90A-DE19B03CB0F3" title="If a column in a row of a database table has no value, then that column is said to be NULL, or to contain a NULL.">NULL Indicator Structure</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-86418D8C-FA67-4B14-A5BC-7A075C6B4206" title="An OCI application can create any object using OCIObjectNew().">About Creating Objects</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-0C40C7DE-5268-4445-A7CB-93489FA326D4" title="Use OCIObjectFree() to free memory allocated by OCIObjectNew().">About Freeing and Copying Objects</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-438ED438-C738-4035-96A1-B2E902C308F2">Object Reference and Type Reference</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-8173B469-7AE8-426B-AD60-A2937B417F7C">Create Objects Based on Object Views and Object Tables with Primary-Key-Based OIDs</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-3F14366D-D427-4393-A354-4EC7D6E8712F" title="Is like any other OCI application.">Error Handling in Object Applications</a></p>
</li>
</ul>
</div>
<div class="infoboxnotealso" id="GUID-E7064985-9564-42EA-B4F7-1604088BF15F__GUID-434FB76B-DA29-4767-9D4F-23795DB3CD71">
<p class="notep1">See Also:</p>
<p><a href="oci11obj.htm#GUID-E607333E-D9E4-4F7C-BF31-4AAB18B37A7B" title="The basic structure of an OCI application that uses objects is essentially the same as that for a relational OCI application.">Basic Object Program Structure</a></p>
</div>
</div>
<a id="LNOCI16787"></a>
<div class="props_rev_3"><a id="GUID-E54EFD72-BB77-4F4E-ABEB-34159AE84545"></a>
<h3 id="LNOCI-GUID-E54EFD72-BB77-4F4E-ABEB-34159AE84545" class="sect3">About Representing Objects in C Applications</h3>
<div>
<p>Before an OCI application can work with object types, those types must exist in the database.</p>
<p>Typically, you create types with SQL DDL statements, such as <code class="codeph">CREATE</code> <code class="codeph">TYPE</code>.</p>
<p>When the Oracle database processes the type definition DDL commands, it stores the type definitions in the data dictionary as <span class="italic">type descriptor objects</span> (TDOs).</p>
<p>When your application retrieves instances of object types from the database, it must have a client-side representation of the objects. In a C program, the representation of an object type is a struct. In an OCI object application, you may also include a <code class="codeph">NULL</code> indicator structure corresponding to each object type structure.</p>
<p>Oracle Database provides a utility called the Object Type Translator (OTT), which generates C struct representations of database object types for you. For example, suppose that you have a type in your database declared as follows:</p>
<pre dir="ltr">CREATE TYPE emp_t AS OBJECT
( name       VARCHAR2(30),
  empno      NUMBER,
  deptno     NUMBER,
  hiredate   DATE,
  salary     NUMBER);
</pre>
<p>OTT produces the following C struct and corresponding <code class="codeph">NULL</code> indicator struct:</p>
<pre dir="ltr">struct emp_t
{
  OCIString    * name;
  OCINumber    empno;
  OCINumber    deptno;
  OCIDate      hiredate;
  OCINumber    salary;
};
typedef struct emp_t emp_t

struct emp_t_ind
{
  OCIInd     _atomic;
  OCIInd     name;
  OCIInd     empno;
  OCIInd     deptno;
  OCIInd     hiredate;
  OCIInd     salary;
};
typedef struct emp_t_ind emp_t_ind;
</pre>
<p>The variable types used in the struct declarations are special types employed by the OCI object calls. A subset of OCI functions manipulate data of these types. These functions are mentioned later in this chapter.</p>
<p>These struct declarations are automatically written to a header file whose name is determined by the OTT input parameters. You can include this header file in the code files for an application to provide access to objects.</p>
<div class="infoboxnotealso" id="GUID-E54EFD72-BB77-4F4E-ABEB-34159AE84545__GUID-4EDBF7A0-E171-492F-97FB-A099DE070625">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci14oca.htm#GUID-702B4236-3993-46E0-BCB6-1A2FC7E056C1" title="The object cache is a client-side memory buffer that provides lookup and memory management support for objects.">Object Cache and Memory Management</a> for application programmers who want to use object representations other than the default structs generated by the object cache</p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-D0FD9D2E-DAE1-4468-B90A-DE19B03CB0F3" title="If a column in a row of a database table has no value, then that column is said to be NULL, or to contain a NULL.">NULL Indicator Structure</a></p>
</li>
<li>
<p><a href="oci15ott.htm#GUID-3D22CA8E-BE01-492F-BA85-DDD0CD3F4890" title="This chapter discusses the Object Type Translator (OTT), which is used to map database object types and named collection types to C structs for use in OCI applications.">Using the Object Type Translator with OCI</a> for more information about OTT</p>
</li>
<li>
<p><a href="oci12oty.htm#GUID-C62AEE74-0CC5-4FAB-A91F-997F71C49C2C" title="This chapter describes the purpose and structure of each of the data types that can be manipulated by the OCI data type mapping and manipulation functions.">Object-Relational Data Types in OCI</a> for more detail about the subset of OCI functions that manipulate data of these variable types used in the struct declarations employed by the OCI object calls</p>
</li>
</ul>
</div>
</div>
</div>
<a id="LNOCI16788"></a>
<div class="props_rev_3"><a id="GUID-C89832E1-97A6-431F-ADC6-9CBF6B1EBA4E"></a>
<h3 id="LNOCI-GUID-C89832E1-97A6-431F-ADC6-9CBF6B1EBA4E" class="sect3">About Initializing the Environment and the Object Cache</h3>
<div>
<p>If your OCI application is going to access and manipulate objects, it is essential that you specify a value of <code class="codeph">OCI_OBJECT</code> for the <code class="codeph">mode</code> parameter of the <code class="codeph">OCIEnvCreate()</code> call, which is the first OCI call in any OCI application. Specifying this value for <code class="codeph">mode</code> indicates to the OCI libraries that your application is working with objects.</p>
<p>This notification has the following important effects:</p>
<ul style="list-style-type: disc;">
<li>
<p>It establishes the <span class="italic">object runtime environment</span>.</p>
</li>
<li>
<p>It sets up the <span class="italic">object cache</span>.</p>
</li>
</ul>
<p>Memory for the object cache is allocated on demand when objects are loaded into the cache.</p>
<p>If the <span class="italic">mode</span> parameter of <code class="codeph">OCIEnvCreate()</code> or <code class="codeph">OCIEnvNlsCreate()</code> is not set to <code class="codeph">OCI_OBJECT</code>, any attempt to use an object-related function results in an error.</p>
<p>The client-side object cache is allocated in the program&#39;s process space. This cache is the memory for objects that have been retrieved from the server and are available to your application.</p>
<div class="infobox-note" id="GUID-C89832E1-97A6-431F-ADC6-9CBF6B1EBA4E__GUID-98CFFA1B-0673-4A63-8138-CB628CFA851F">
<p class="notep1">Note:</p>
<p>If you initialize the OCI environment in object mode, your application allocates memory for the object cache, whether or not the application actually uses object calls.</p>
</div>
<div class="infoboxnotealso" id="GUID-C89832E1-97A6-431F-ADC6-9CBF6B1EBA4E__GUID-952A55EB-2353-4D65-9357-F6834C1682F7">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci14oca.htm#GUID-B2FBDC75-64BD-4E7E-A713-5095A827EA9C" title="This chapter introduces the OCI facility for working with objects in an Oracle Database.">Object Advanced Topics in OCI</a> for a detailed explanation of the object cache</p>
</li>
<li>
<p><a href="oci16rel001.htm#GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" title="Creates and initializes an environment handle for OCI functions to work under.">OCIEnvCreate()</a></p>
</li>
<li>
<p><a href="oci16rel001.htm#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="Creates and initializes an environment handle for OCI functions to work under.">OCIEnvNlsCreate()</a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="LNOCI16789"></a>
<div class="props_rev_3"><a id="GUID-18CD42FA-2308-414F-B4FA-6AE34421A346"></a>
<h3 id="LNOCI-GUID-18CD42FA-2308-414F-B4FA-6AE34421A346" class="sect3">About Making Database Connections</h3>
<div>
<p>Once the OCI environment has been properly initialized, the application can connect to a server. This is accomplished through the standard OCI connect calls described in <span class="q">&#34;<a href="oci02bas.htm#GUID-BD1CD486-6EA8-4C23-828F-DD1115317E5B" title="The following sections describe in detail each of the steps in developing an OCI application.">OCI Programming Steps</a>&#34;</span>. When you use these calls, no additional considerations must be made because this application is accessing objects.</p>
<p>Only one object cache is allocated for each OCI environment. All objects retrieved or created through different connections within the environment use the same physical object cache. Each connection has its own logical object cache.</p>
</div>
</div>
<a id="LNOCI16790"></a>
<div class="props_rev_3"><a id="GUID-2214E88A-97CD-4DF8-B1FD-31EB50D01402"></a>
<h3 id="LNOCI-GUID-2214E88A-97CD-4DF8-B1FD-31EB50D01402" class="sect3">Retrieving an Object Reference from the Server</h3>
<div>
<p>To work with objects, your application must first retrieve one or more objects from the server.</p>
<div class="section">
<p>You accomplish this by issuing a SQL statement that returns <code class="codeph">REF</code>s to one or more objects.</p>
<div class="infobox-note" id="GUID-2214E88A-97CD-4DF8-B1FD-31EB50D01402__GUID-0A56A030-5510-4EA8-B196-7461F13BB239">
<p class="notep1">Note:</p>
<p>It is also possible for a SQL statement to fetch embedded objects, rather than <code class="codeph">REF</code>s, from a database.</p>
</div>
<p>In the following example, the application declares a text block that stores a SQL statement designed to retrieve a <code class="codeph">REF</code> to a single employee object from an object table of employees (<code class="codeph">emp_tab</code>) in the database, when given a particular employee number that is passed as an input variable (<code class="codeph">:emp_num</code>) at runtime:</p>
<pre dir="ltr">text *selemp = (text *) &#34;SELECT REF(e)
                          FROM emp_tab e
                          WHERE empno = :emp_num&#34;;
</pre>
<p>Your application should prepare and process this statement as follows in the same way that it would handle any relational SQL statement:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Prepare an application request, using <code class="codeph">OCIStmtPrepare2()</code>.</span></li>
<li class="stepexpand"><span>Bind the host input variable using one or more appropriate bind calls.</span></li>
<li class="stepexpand"><span>Declare and prepare an output variable to receive the employee object reference. Here you would use an employee object reference:</span>
<div>
<pre dir="ltr">OCIRef  *emp1_ref = (OCIRef *) 0; /* reference to an employee object */
</pre>
<p>When you define the output variable, set the <span class="italic">dty</span> data type parameter for the define call to SQLT_REF, the data type constant for <code class="codeph">REF</code>.</p>
</div>
</li>
<li class="stepexpand"><span>Execute the statement with <code class="codeph">OCUStmtExecute()</code>.</span></li>
<li class="stepexpand"><span>Fetch the resulting <code class="codeph">REF</code> into <code class="codeph">emp1_ref</code>, using <code class="codeph">OCIStmtFetch2()</code>.</span></li>
</ol>
<div class="section">
<p>At this point, you could use the object reference to access and manipulate an object or objects from the database.</p>
<div class="infoboxnotealso" id="GUID-2214E88A-97CD-4DF8-B1FD-31EB50D01402__GUID-13109BA7-9FEB-47F4-818E-5029AAF5C282">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci11obj.htm#GUID-7B0B6CF5-AD69-4FCB-9E96-CA6469601077" title="An application must fetch embedded object instances.">Fetching Embedded Objects</a> for more information</p>
</li>
<li>
<p><a href="oci02bas.htm#GUID-4CFB8AF7-EF05-4E0F-847F-2D0710E552C5" title="This chapter introduces concepts and procedures involved in programming with OCI.">OCI Programming Basics</a></p>
</li>
<li>
<p><a href="oci02bas.htm#GUID-BD1CD486-6EA8-4C23-828F-DD1115317E5B" title="The following sections describe in detail each of the steps in developing an OCI application.">OCI Programming Steps</a> for general information about preparing and executing SQL statements</p>
</li>
<li>
<p><a href="oci05bnd.htm#GUID-EE9AD90D-8CFD-4380-9D5E-819555EB3A8E" title="More advanced bind operations include multistep binds, and binds of named data types and REFs.">Advanced Bind Operations in OCI</a> and <a href="oci05bnd.htm#GUID-237FC150-290A-42B8-99CB-2C6AFA5B9F9E" title="This section covers advanced define operations, including multistep defines and defines of named data types and REFs.">Advanced Define Operations in OCI</a> for specific information about binding and defining <code class="codeph">REF</code> variables</p>
</li>
<li>
<p>The demonstration programs included with your Oracle installation for a code example showing <code class="codeph">REF</code> retrieval and pinning. For additional information, see <a href="ociabdem.htm#GUID-75E18629-0C54-4495-A747-AFB346034F26" title="Lists example programs with sample code demonstrating the allocation and use of OCI handles.">OCI Demonstration Programs</a>.</p>
</li>
<li>
<p><a href="oci17msc001.htm#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="Prepares a SQL or PL/SQL statement for execution.">OCIStmtPrepare2()</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-E54EFD72-BB77-4F4E-ABEB-34159AE84545" title="Before an OCI application can work with object types, those types must exist in the database.">About Representing Objects in C Applications</a> about using an employee object reference declaration mentioned in Step 3</p>
</li>
<li>
<p><a href="oci17msc001.htm#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="Associates an application request with a server.">OCIStmtExecute()</a></p>
</li>
<li>
<p><a href="oci17msc001.htm#GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9" title="Fetches a row from the (scrollable) result set.">OCIStmtFetch2()</a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI72702"></a><a id="LNOCI16791"></a>
<div class="props_rev_3"><a id="GUID-B9E5DDBD-19CD-4AE0-B1D3-3B85ADEAAAB1"></a>
<h3 id="LNOCI-GUID-B9E5DDBD-19CD-4AE0-B1D3-3B85ADEAAAB1" class="sect3">Pinning an Object</h3>
<div>
<p>Pinning an object loads the object instance into the object cache, and enables you to access and modify the instance&#39;s attributes and follow references from that object to other objects, if necessary.</p>
<div class="section">
<p>Upon completion of the fetch step, your application has a <code class="codeph">REF</code>, or pointer, to an object. The actual object is not currently available to work with. Before you can manipulate an object, it must be <span class="italic">pinned</span>. Your application also controls when modified objects are written back to the server.</p>
<div class="infobox-note" id="GUID-B9E5DDBD-19CD-4AE0-B1D3-3B85ADEAAAB1__GUID-7CDAF232-6676-423E-AEBD-5250FC6640B4">
<p class="notep1">Note:</p>
<p>This section deals with a simple pin operation involving a single object at a time. For information about retrieving multiple objects through complex object retrieval, see <a href="oci11obj.htm#GUID-03683C87-7758-421A-BC51-C54A5A7679F2" title="A complex object includes its root object and its set of logically related objects each of which are prefetched based on a given depth level.">Complex Object Retrieval</a>.</p>
</div>
<p>An application pins an object by calling the function <code class="codeph">OCIObjectPin()</code>. The parameters for this function allow you to specify the <span class="italic">pin option, pin duration,</span> and <span class="italic">lock option</span> for the object.</p>
<p><a href="oci11obj.htm#GUID-B9E5DDBD-19CD-4AE0-B1D3-3B85ADEAAAB1__BGBDEJIB">Example 11-3</a> shows sample code that illustrates a pin operation for the employee reference your application retrieved in the previous section, <a href="oci11obj.htm#GUID-2214E88A-97CD-4DF8-B1FD-31EB50D01402" title="To work with objects, your application must first retrieve one or more objects from the server.">Retrieving an Object Reference from the Server</a>.</p>
<p>In this example, <code class="codeph">process_error()</code> represents an error-handling function. If the call to <code class="codeph">OCIObjectPin()</code> returns anything but <code class="codeph">OCI_SUCCESS</code>, the error-handling function is called. The parameters of the <code class="codeph">OCIObjectPin()</code> function are as follows:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">env</code> is the OCI environment handle.</p>
</li>
<li>
<p><code class="codeph">err</code> is the OCI error handle.</p>
</li>
<li>
<p><code class="codeph">emp1_ref</code> is the reference that was retrieved through SQL.</p>
</li>
<li>
<p><code class="codeph">(OCIComplexObject *) 0</code> indicates that this pin operation is not utilizing complex object retrieval.</p>
</li>
<li>
<p><code class="codeph">OCI_PIN_ANY</code> is the pin option.</p>
</li>
<li>
<p><code class="codeph">OCI_DURATION_TRANS</code> is the pin duration.</p>
</li>
<li>
<p><code class="codeph">OCI_LOCK_X</code> is the lock option.</p>
</li>
<li>
<p><code class="codeph">emp1</code> is an out parameter that returns a pointer to the pinned object.</p>
</li>
</ul>
<p>Now that the object has been pinned, the OCI application can modify that object. In this simple example, the object contains no references to other objects.</p>
<p>This section includes the following topic: <a href="oci11obj.htm#GUID-1764A2BB-D228-4253-B953-57AEE9A53B30">Array Pin</a>.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-B9E5DDBD-19CD-4AE0-B1D3-3B85ADEAAAB1__BGBDEJIB">
<p class="titleinexample">Example 11-3 Pinning an Object</p>
<pre dir="ltr">if (OCIObjectPin(env, err, emp1_ref, (OCIComplexObject *) 0, 
     OCI_PIN_ANY, 
     OCI_DURATION_TRANS, 
     OCI_LOCK_X,  &amp;emp1) != OCI_SUCCESS)
     process_error(err);
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-B9E5DDBD-19CD-4AE0-B1D3-3B85ADEAAAB1__GUID-61D72747-64B9-4769-B6BB-86C4163FEAD0">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci14oca.htm#GUID-2BF8105C-419E-4560-B241-BFCC1CCB719D">Simple Object Navigation</a> for an example of navigation from one instance to another</p>
</li>
<li>
<p><a href="oci18nav005.htm#GUID-89F29585-2F16-4FA3-B1E0-BDD83707CA62" title="Pins a referenceable object.">OCIObjectPin()</a></p>
</li>
<li>
<p><a href="oci14oca.htm#GUID-99819CA5-F2A7-4BFE-A9E4-5BD76C573CB2">About Pinning an Object Copy</a> for more information about the pin option <code class="codeph">OCI_PIN_ANY</code></p>
</li>
<li>
<p><a href="oci14oca.htm#GUID-639E852E-0AA3-414F-A5A3-598C8F2047E1" title="To maintain free space in memory, the object cache attempts to reuse objects&#39; memory whenever possible. The object cache reuses an object&#39;s memory when the object&#39;s lifetime (allocation duration) expires or when the object&#39;s pin duration expires.">Object Duration</a> for more information about the pin duration <code class="codeph">OCI_DURATION_TRANS</code></p>
</li>
<li>
<p><a href="oci14oca.htm#GUID-16790CA7-71A9-4D8F-86DE-49E122AC156A">About Locking Objects for Update</a> for more information about the lock option <code class="codeph">OCI_LOCK_X</code></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
<a id="LNOCI16792"></a>
<div class="props_rev_3"><a id="GUID-1764A2BB-D228-4253-B953-57AEE9A53B30"></a>
<h4 id="LNOCI-GUID-1764A2BB-D228-4253-B953-57AEE9A53B30" class="sect4">Array Pin</h4>
<div>
<p>Given an array of references, an OCI application can pin an array of objects by calling <a href="oci18nav005.htm#GUID-2629C6C3-5299-4E92-BA58-804809CFF8B9">OCIObjectArrayPin()</a>. The references may point to objects of different types. This function provides the ability to fetch objects of different types from different tables in one network round-trip.</p>
</div>
</div>
</div>
<a id="LNOCI72703"></a><a id="LNOCI16793"></a>
<div class="props_rev_3"><a id="GUID-BA775817-78E4-4C49-A3C2-C867C50509B2"></a>
<h3 id="LNOCI-GUID-BA775817-78E4-4C49-A3C2-C867C50509B2" class="sect3">Manipulating Object Attributes</h3>
<div>
<p>Once an object has been pinned, an OCI application can modify its attributes.</p>
<div class="section">
<p>OCI provides a set of functions for working with data types of object type structs, known as the OCI <span class="italic">data type mapping and manipulation functions</span>.</p>
<div class="infobox-note" id="GUID-BA775817-78E4-4C49-A3C2-C867C50509B2__GUID-A3D3502E-F269-4EA9-9587-B0F22B4173D3">
<p class="notep1">Note:</p>
<p>Changes made to objects pinned in the object cache affect only those object copies (instances), and <span class="italic">not</span> the original object in the database. For changes made by the application to reach the database, those changes must be flushed or committed to the server.</p>
</div>
<p>For example, assume that the employee object in the previous section was pinned so that the employee&#39;s salary could be increased. Assume also that at this company, yearly salary increases are prorated for employees who have been at the company for less than 180 days.</p>
<p>For this example, you must access the employee&#39;s hire date and check whether it is more or less than 180 days before the current date. Based on that calculation, the employee&#39;s salary is increased by either $5000 (for more than 180 days) or $3000 (for less than 180 days). The sample code in <a href="oci11obj.htm#GUID-BA775817-78E4-4C49-A3C2-C867C50509B2__BGBBCFBA">Example 11-4</a> demonstrates this process.</p>
<p>Note that the data type mapping and manipulation functions work with a specific set of data types; you must convert other types, like <code class="codeph">int</code>, to the appropriate OCI types before using them in calculations.</p>
<p><a href="oci11obj.htm#GUID-BA775817-78E4-4C49-A3C2-C867C50509B2__BGBBCFBA">Example 11-4</a> points out how values must be converted to OCI data types (for example, <code class="codeph">OCIDate</code>, <code class="codeph">OCINumber</code>) before being passed as parameters to the OCI data type mapping and manipulation functions.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-BA775817-78E4-4C49-A3C2-C867C50509B2__BGBBCFBA">
<p class="titleinexample">Example 11-4 Manipulating Object Attributes in OCI</p>
<pre dir="ltr">/* assume that sysdate has been fetched into sys_date, a string. */
/* emp1 and emp1_ref are the same as in previous sections. */
/* err is the OCI error handle. */
/* NOTE: error handling code is not included in this example. */

sb4 num_days;        /* the number of days between today and hiredate */
OCIDate curr_date;          /* holds the current date for calculations */
int raise;   /* holds the employee&#39;s raise amount before calculations */
OCINumber raise_num;       /* holds employee&#39;s raise for calculations */
OCINumber new_sal;                 /* holds the employee&#39;s new salary */

/* convert date string to an OCIDate */
OCIDateFromText(err, (text *) sys_date, (ub4) strlen(sys_date), (text *) 
          NULL, (ub1) 0, (text *) NULL, (ub4) 0, &amp;curr_date);

  /* get number of days between hire date and today */
OCIDateDaysBetween(err, &amp;curr_date, &amp;emp1-&gt;hiredate, &amp;num_days);

/* calculate raise based on number of days since hiredate */
if (num_days &gt; 180)
    raise = 5000;
else
    raise = 3000;

/* convert raise value to an OCINumber */
OCINumberFromInt(err, (void  *)&amp;raise, (uword)sizeof(raise),      
                 OCI_NUMBER_SIGNED, &amp;raise_num);

/* add raise amount to salary */
OCINumberAdd(err, &amp;raise_num, &amp;emp1-&gt;salary, &amp;new_sal);
OCINumberAssign(err, &amp;new_sal, &amp;emp1-&gt;salary);
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-BA775817-78E4-4C49-A3C2-C867C50509B2__GUID-B19B68AA-2040-4B22-B6D0-4E36458D8E9F">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci11obj.htm#GUID-2F9466DE-9186-495E-92EE-B7FBAA65D6B9" title="The application must take specific steps to ensure that changes to objects by marking them and then flushing them are written in the database.">About Marking Objects and Flushing Changes</a> for more information about flushing changes or committing them to the server</p>
</li>
<li>
<p><a href="oci12oty.htm#GUID-C62AEE74-0CC5-4FAB-A91F-997F71C49C2C" title="This chapter describes the purpose and structure of each of the data types that can be manipulated by the OCI data type mapping and manipulation functions.">Object-Relational Data Types in OCI</a> for more information about the OCI data types and the data type mapping and manipulation functions</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI16794"></a>
<div class="props_rev_3"><a id="GUID-2F9466DE-9186-495E-92EE-B7FBAA65D6B9"></a>
<h3 id="LNOCI-GUID-2F9466DE-9186-495E-92EE-B7FBAA65D6B9" class="sect3">About Marking Objects and Flushing Changes</h3>
<div>
<p>The application must take specific steps to ensure that changes to objects by marking them and then flushing them are written in the database.</p>
<p>In <a href="oci11obj.htm#GUID-BA775817-78E4-4C49-A3C2-C867C50509B2__BGBBCFBA">Example 11-4</a>, an attribute of an object instance was changed. At this point, however, that change exists only in the client-side object cache. The application must take specific steps to ensure that the change is written in the database.</p>
<p>The first step is to indicate that the object has been modified. This is done with the <code class="codeph">OCIObjectMarkUpdate()</code> function. This function marks the object as <span class="italic">dirty</span> (modified).</p>
<p>Objects that have had their dirty flag set must be flushed to the server for the changes to be recorded in the database. You can do this in three ways:</p>
<ul style="list-style-type: disc;">
<li>
<p>Flush a single dirty object by calling <code class="codeph">OCIObjectFlush()</code>.</p>
</li>
<li>
<p>Flush the entire cache using <code class="codeph">OCICacheFlush()</code>. In this case OCI traverses the dirty list maintained by the cache and flushes the dirty objects to the server.</p>
</li>
<li>
<p>Call <code class="codeph">OCICacheFlush()</code> to commit a transaction. Doing so also traverses the dirty list and flushes the dirty objects to the server.</p>
</li>
</ul>
<p>The flush operations work only on persistent objects in the cache. Transient objects are never flushed to the server.</p>
<p>Flushing an object to the server can activate triggers in the database. In fact, on some occasions an application may want to explicitly flush objects just to fire triggers on the server side.</p>
<div class="infoboxnotealso" id="GUID-2F9466DE-9186-495E-92EE-B7FBAA65D6B9__GUID-2F6917DF-F6D6-434C-A5DC-3872C06FB4CD">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci08sca.htm#GUID-3E96017A-64D3-4A29-B617-C9879610B5F2" title="OCI has a set of API calls to support operations on both local and global transactions.">OCI Support for Transactions</a> for more information about <code class="codeph">OCITransCommit()</code></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-86418D8C-FA67-4B14-A5BC-7A075C6B4206" title="An OCI application can create any object using OCIObjectNew().">About Creating Objects</a> for information about transient and persistent objects</p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-3B272F98-B2B9-4D63-9081-0F15A81747CC" title="An object&#39;s meta-attributes serve as flags that can provide information to an application, or to the object cache, about the status of an object.">Object Meta-Attributes</a> for information about seeing and checking object meta-attributes, such as <span class="italic">dirty</span></p>
</li>
<li>
<p><a href="oci18nav002.htm#GUID-6EEEC8CC-3041-4718-ADE7-20C6D8C661ED" title="Marks a persistent object as updated (dirty).">OCIObjectMarkUpdate()</a></p>
</li>
<li>
<p><a href="oci18nav001.htm#GUID-03A4BAE9-3484-4D04-8A11-5EC410FEB301" title="Flushes a modified persistent object to the server.">OCIObjectFlush()</a></p>
</li>
<li>
<p><a href="oci18nav001.htm#GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E">OCICacheFlush()</a></p>
</li>
<li>
<p><a href="oci17msc006.htm#GUID-DDAE3122-8769-4A30-8D78-EB2A3CCF77D4" title="Commits the transaction associated with a specified service context.">OCICacheFlush()</a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="LNOCI16795"></a>
<div class="props_rev_3"><a id="GUID-7B0B6CF5-AD69-4FCB-9E96-CA6469601077"></a>
<h3 id="LNOCI-GUID-7B0B6CF5-AD69-4FCB-9E96-CA6469601077" class="sect3">Fetching Embedded Objects</h3>
<div>
<p>An application must fetch embedded object instances.</p>
<div class="section">
<p>If your application must fetch an embedded object instance&mdash;an object stored in a column of a regular table, rather than an object table&mdash;you cannot use the <code class="codeph">REF</code> retrieval mechanism described in <a href="oci11obj.htm#GUID-2214E88A-97CD-4DF8-B1FD-31EB50D01402" title="To work with objects, your application must first retrieve one or more objects from the server.">Retrieving an Object Reference from the Server</a>. Embedded instances do not have object identifiers, so it is not possible to get a <code class="codeph">REF</code> to them; they cannot serve as the basis for object navigation. Many situations exist, however, in which an application must fetch embedded instances.</p>
<p>For example, assume that an <code class="codeph">address</code> type has been created.</p>
<pre dir="ltr">CREATE TYPE address AS OBJECT
( street1             varchar2(50),
  street2             varchar2(50),
  city                varchar2(30),
  state               char(2),
  zip                 number(5));
</pre>
<p>You could then use that type as the data type of a column in another table:</p>
<pre dir="ltr">CREATE TABLE clients
( name          varchar2(40),
  addr          address);
</pre>
<p>Your OCI application could then issue the following SQL statement:</p>
<pre dir="ltr">SELECT addr FROM clients
WHERE name=&#39;BEAR BYTE DATA MANAGEMENT&#39;
</pre>
<p>This statement would return an embedded <code class="codeph">address</code> object from the <code class="codeph">clients</code> table. The application could then use the values in the attributes of this object for other processing.</p>
<p>Your application should prepare and process this statement in the same way that it would handle any relational SQL statement, as described in <a href="oci02bas.htm#GUID-4CFB8AF7-EF05-4E0F-847F-2D0710E552C5" title="This chapter introduces concepts and procedures involved in programming with OCI.">OCI Programming Basics</a>:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Prepare an application request, using <code class="codeph">OCIStmtPrepare2()</code>.</p>
</li>
<li>
<p>Bind the input variable using one or more appropriate bind calls.</p>
</li>
<li>
<p>Define an output variable to receive the <code class="codeph">address</code> instance. You use a C struct representation of the object type that was generated by OTT, as described in <a href="oci11obj.htm#GUID-E54EFD72-BB77-4F4E-ABEB-34159AE84545" title="Before an OCI application can work with object types, those types must exist in the database.">About Representing Objects in C Applications</a>.</p>
<pre dir="ltr">addr1      *address; /* variable of the address struct type */
</pre>
<p>When you define the output variable, set the <code class="codeph">dty</code> data type parameter for the define call to SQLT_NTY, the data type constant for named data types.</p>
</li>
<li>
<p>Execute the statement with <code class="codeph">OCIStmtExecute()</code>.</p>
</li>
<li>
<p>Fetch the resulting instance into <code class="codeph">addr1</code>, using <code class="codeph">OCIStmtFetch2()</code>.</p>
</li>
</ul>
<p>Following this operation, you can access the attributes of the instance, as described in <a href="oci11obj.htm#GUID-BA775817-78E4-4C49-A3C2-C867C50509B2" title="Once an object has been pinned, an OCI application can modify its attributes.">Manipulating Object Attributes</a>, or pass the instance as an input parameter for another SQL statement.</p>
<div class="infobox-note" id="GUID-7B0B6CF5-AD69-4FCB-9E96-CA6469601077__GUID-D996BB9F-3EF5-4EB2-BA09-1A5D41144C9B">
<p class="notep1">Note:</p>
<p>Changes made to an embedded instance can be made persistent only by executing a SQL <code class="codeph">UPDATE</code> statement.</p>
</div>
<div class="infoboxnotealso" id="GUID-7B0B6CF5-AD69-4FCB-9E96-CA6469601077__GUID-0FD6578D-0D43-410B-A115-675B369C65EC">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci02bas.htm#GUID-BD1CD486-6EA8-4C23-828F-DD1115317E5B" title="The following sections describe in detail each of the steps in developing an OCI application.">OCI Programming Steps</a> for more information about preparing and executing SQL statements</p>
</li>
<li>
<p><a href="oci17msc001.htm#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="Prepares a SQL or PL/SQL statement for execution.">OCIStmtPrepare2()</a></p>
</li>
<li>
<p><a href="oci17msc001.htm#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="Associates an application request with a server.">OCIStmtExecute()</a></p>
</li>
<li>
<p><a href="oci17msc001.htm#GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9" title="Fetches a row from the (scrollable) result set.">OCIStmtFetch2()</a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI16796"></a>
<div class="props_rev_3"><a id="GUID-3B272F98-B2B9-4D63-9081-0F15A81747CC"></a>
<h3 id="LNOCI-GUID-3B272F98-B2B9-4D63-9081-0F15A81747CC" class="sect3">Object Meta-Attributes</h3>
<div>
<p>An object&#39;s <span class="italic">meta-attributes</span> serve as flags that can provide information to an application, or to the object cache, about the status of an object.</p>
<p>For example, one of the meta-attributes of an object indicates whether it has been flushed to the server. Object meta-attributes can help an application control the behavior of instances.</p>
<p>Persistent and transient object instances have different sets of meta-attributes. The meta-attributes for persistent objects are further subdivided into <span class="italic">persistent meta-attributes</span> and <span class="italic">transient meta-attributes</span>. Transient meta-attributes exist only when an instance is in memory. Persistent meta-attributes also apply to objects stored in the server.</p>
<div class="p">This section includes the following topics:
<ul style="list-style-type: disc;">
<li>
<p><a href="oci11obj.htm#GUID-67E39885-2DEC-422A-907F-5E63AE84530A" title="Lists and describes the meta-attributes for standalone persistent objects.">Persistent Object Meta-Attributes</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-B5732CDF-2D02-404E-A1A0-CF8A082AFE71">Additional Attribute Functions</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-2220F791-09A6-46EB-AF24-4D65F53E04FB">Transient Object Meta-Attributes</a></p>
</li>
</ul>
</div>
</div>
<a id="LNOCI16798"></a><a id="LNOCI16797"></a>
<div class="props_rev_3"><a id="GUID-67E39885-2DEC-422A-907F-5E63AE84530A"></a>
<h4 id="LNOCI-GUID-67E39885-2DEC-422A-907F-5E63AE84530A" class="sect4">Persistent Object Meta-Attributes</h4>
<div>
<p>Lists and describes the meta-attributes for <span class="italic">standalone</span> persistent objects.</p>
<p><a href="oci11obj.htm#GUID-67E39885-2DEC-422A-907F-5E63AE84530A__BGBHDIIB" title="This table has 2 columns. Column 1 is the name of the meta-attribute and column 2 is its meaning.">Table 11-1</a> shows the meta-attributes for <span class="italic">standalone</span> persistent objects.</p>
<div class="tblformal" id="GUID-67E39885-2DEC-422A-907F-5E63AE84530A__BGBHDIIB">
<p class="titleintable">Table 11-1 Meta-Attributes of Persistent Objects</p>
<table class="cellalignment6175" title="Meta-Attributes of Persistent Objects" summary="This table has 2 columns. Column 1 is the name of the meta-attribute and column 2 is its meaning.">
<thead>
<tr class="cellalignment6151">
<th class="cellalignment6242" id="d126108e4690">MetaAttributes</th>
<th class="cellalignment6241" id="d126108e4693">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6151">
<td class="cellalignment6244" id="d126108e4698" headers="d126108e4690">
<p>existent</p>
</td>
<td class="cellalignment6243" headers="d126108e4698 d126108e4693">
<p>Does the object exist?</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6244" id="d126108e4705" headers="d126108e4690">
<p>nullity</p>
</td>
<td class="cellalignment6243" headers="d126108e4705 d126108e4693">
<p>Null information of the instance</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6244" id="d126108e4712" headers="d126108e4690">
<p>locked</p>
</td>
<td class="cellalignment6243" headers="d126108e4712 d126108e4693">
<p>Has the object been locked?</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6244" id="d126108e4719" headers="d126108e4690">
<p>dirty</p>
</td>
<td class="cellalignment6243" headers="d126108e4719 d126108e4693">
<p>Has the object been marked as <span class="italic">dirtied?</span></p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6244" id="d126108e4728" headers="d126108e4690">
<p>pinned</p>
</td>
<td class="cellalignment6243" headers="d126108e4728 d126108e4693">
<p>Is the object pinned?</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6244" id="d126108e4735" headers="d126108e4690">
<p>allocation duration</p>
</td>
<td class="cellalignment6243" headers="d126108e4735 d126108e4693">
<p>See <a href="oci14oca.htm#GUID-639E852E-0AA3-414F-A5A3-598C8F2047E1" title="To maintain free space in memory, the object cache attempts to reuse objects&#39; memory whenever possible. The object cache reuses an object&#39;s memory when the object&#39;s lifetime (allocation duration) expires or when the object&#39;s pin duration expires.">Object Duration</a>.</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6244" id="d126108e4754" headers="d126108e4690">
<p>pin duration</p>
</td>
<td class="cellalignment6243" headers="d126108e4754 d126108e4693">
<p>See <a href="oci14oca.htm#GUID-639E852E-0AA3-414F-A5A3-598C8F2047E1" title="To maintain free space in memory, the object cache attempts to reuse objects&#39; memory whenever possible. The object cache reuses an object&#39;s memory when the object&#39;s lifetime (allocation duration) expires or when the object&#39;s pin duration expires.">Object Duration</a>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-note" id="GUID-67E39885-2DEC-422A-907F-5E63AE84530A__GUID-BEE015E3-3C0F-4309-A1D4-553195035D42">
<p class="notep1">Note:</p>
<p>Embedded persistent objects only have the <span class="italic">nullity</span> and <span class="italic">allocation duration</span> attributes, which are transient.</p>
</div>
<p>OCI provides the <code class="codeph">OCIObjectGetProperty()</code> function, which allows an application to check the status of a variety of attributes of an object. The syntax of the function is:</p>
<pre dir="ltr">sword OCIObjectGetProperty ( OCIEnv              *envh, 
                             OCIError            *errh, 
                             const void          *obj, 
                             OCIObjectPropId     propertyId,
                             void                *property, 
                             ub4                 *size );
</pre>
<p>The <code class="codeph">propertyId</code> and <code class="codeph">property</code> parameters are used to retrieve information about any of a variety of properties or attributes.</p>
<p>The different property IDs and the corresponding type of <code class="codeph">property</code> argument follow.</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-73993"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-67E39885-2DEC-422A-907F-5E63AE84530A__GUID-82B2C405-1B02-4CA8-8554-6C4CAAE12387"><!-- --></a>OCI_OBJECTPROP_LIFETIME</dt>
<dd>
<div class="p">This identifies whether the given object is a persistent object or a transient object or a value instance. The <code class="codeph">property</code> argument must be a pointer to a variable of type <code class="codeph">OCIObjectLifetime</code>. Possible values include:
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_OBJECT_PERSISTENT</code></p>
</li>
<li>
<p><code class="codeph">OCI_OBJECT_TRANSIENT</code></p>
</li>
<li>
<p><code class="codeph">OCI_OBJECT_VALUE</code></p>
</li>
</ul>
</div>
</dd>
</dl>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-73994"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-67E39885-2DEC-422A-907F-5E63AE84530A__GUID-F54A22B9-7244-4EAE-869F-2C83AC318681"><!-- --></a>OCI_OBJECTPROP_SCHEMA</dt>
<dd>
<p>This returns the schema name of the table in which the object exists. An error is returned if the given object points to a transient instance or a value. If the input buffer is not big enough to hold the schema name, an error is returned; the error message communicates the required size. Upon success, the size of the returned schema name in bytes is returned by <code class="codeph">size</code>. The <code class="codeph">property</code> argument must be an array of type <code class="codeph">text</code>, and <code class="codeph">size</code> should be set to the size of the array in bytes by the caller.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-73995"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-67E39885-2DEC-422A-907F-5E63AE84530A__GUID-59536B48-2AEB-4D19-9188-149D72410A93"><!-- --></a>OCI_OBJECTPROP_TABLE</dt>
<dd>
<p>This returns the table name in which the object exists. An error is returned if the given object points to a transient instance or a value. If the input buffer is not big enough to hold the table name, an error is returned; the error message communicates the required size. Upon success, the size of the returned table name in bytes is returned by <code class="codeph">size</code>. The <code class="codeph">property</code> argument must be an array of type <code class="codeph">text</code> and <code class="codeph">size</code> should be set to the size of the array in bytes by the caller.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-73996"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-67E39885-2DEC-422A-907F-5E63AE84530A__GUID-300BB0A0-1316-4A1C-81FC-00D957E75CFC"><!-- --></a>OCI_OBJECTPROP_PIN_DURATION</dt>
<dd>
<div class="p">This returns the pin duration of the object. An error is returned if the given object points to a value instance. The <code class="codeph">property</code> argument must be a pointer to a variable of type <code class="codeph">OCIDuration</code>. Valid values include:
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_DURATION_SESSION</code></p>
</li>
<li>
<p><code class="codeph">OCI_DURATION_TRANS</code></p>
</li>
</ul>
</div>
</dd>
</dl>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-73997"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-67E39885-2DEC-422A-907F-5E63AE84530A__GUID-740B04AD-DF41-4B2A-87EF-982DD864DA69"><!-- --></a>OCI_OBJECTPROP_ALLOC_DURATION</dt>
<dd>
<div class="p">This returns the allocation duration of the object. The <code class="codeph">property</code> argument must be a pointer to a variable of type <code class="codeph">OCIDuration</code>. Valid values include:
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_DURATION_SESSION</code></p>
</li>
<li>
<p><code class="codeph">OCI_DURATION_TRANS</code></p>
</li>
</ul>
</div>
</dd>
</dl>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-73998"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-67E39885-2DEC-422A-907F-5E63AE84530A__GUID-EFFF44D2-396C-4FB6-A09A-0BFF4A28B8AA"><!-- --></a>OCI_OBJECTPROP_LOCK</dt>
<dd>
<p>This returns the lock status of the object. The possible lock status is indicated by <code class="codeph">OCILockOpt</code>. An error is returned if the given object points to a transient or value instance. The <code class="codeph">property</code> argument must be a pointer to a variable of type <code class="codeph">OCILockOpt</code>. The lock status of an object can also be retrieved by calling <code class="codeph">OCIObjectIsLocked()</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-73999"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-67E39885-2DEC-422A-907F-5E63AE84530A__GUID-00CC3DE9-EA01-44C4-B058-EA5D53FED614"><!-- --></a>OCI_OBJECTPROP_MARKSTATUS</dt>
<dd>
<div class="p">This returns the dirty status and indicates whether the object is a new object, updated object, or deleted object. An error is returned if the given object points to a transient or value instance. The <code class="codeph">property</code> argument must be of type <code class="codeph">OCIObjectMarkStatus</code>. Valid values include:
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_OBJECT_NEW</code></p>
</li>
<li>
<p><code class="codeph">OCI_OBJECT_DELETED</code></p>
</li>
<li>
<p><code class="codeph">OCI_OBJECT_UPDATED</code></p>
</li>
</ul>
</div>
<p>The following macros are available to test the object mark status:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_OBJECT_IS_UPDATED</code> (flag)</p>
</li>
<li>
<p><code class="codeph">OCI_OBJECT_IS_DELETED</code> (flag)</p>
</li>
<li>
<p><code class="codeph">OCI_OBJECT_IS_NEW</code> (flag)</p>
</li>
<li>
<p><code class="codeph">OCI_OBJECT_IS_DIRTY</code> (flag)</p>
</li>
</ul>
</dd>
</dl>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-74000"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-67E39885-2DEC-422A-907F-5E63AE84530A__GUID-54632ACD-8547-4FE6-94B9-05BD7ADA01C7"><!-- --></a>OCI_OBJECTPROP_VIEW</dt>
<dd>
<p>This identifies whether the specified object is an object view or not. If the property value returned is <code class="codeph">TRUE</code>, the object is a view; otherwise, it is not. An error is returned if the given object points to a transient or value instance. The <code class="codeph">property</code> argument must be of type <code class="codeph">boolean</code>.</p>
<p>Just as a view is a virtual table, an object view is a virtual object table. Each row in the view is an object: you can call its methods, access its attributes using the dot notation, and create a <code class="codeph">REF</code> that points to it.</p>
</dd>
</dl>
<div class="infoboxnotealso" id="GUID-67E39885-2DEC-422A-907F-5E63AE84530A__GUID-3D338694-4385-48CD-8F34-0F5F684DC0B1">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci18nav003.htm#GUID-B65AA4FB-E4FF-4062-927E-4C62900D59C1" title="Retrieves a given property of an object.">OCIObjectGetProperty()</a></p>
</li>
<li>
<p><a href="oci14oca.htm#GUID-639E852E-0AA3-414F-A5A3-598C8F2047E1" title="To maintain free space in memory, the object cache attempts to reuse objects&#39; memory whenever possible. The object cache reuses an object&#39;s memory when the object&#39;s lifetime (allocation duration) expires or when the object&#39;s pin duration expires.">Object Duration</a> for more information about durations</p>
</li>
<li>
<p><a href="oci18nav003.htm#GUID-AC738B41-AA00-40D4-9824-F63BADA321FB">OCIObjectIsLocked()</a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="LNOCI16800"></a><a id="LNOCI16799"></a>
<div class="props_rev_3"><a id="GUID-B5732CDF-2D02-404E-A1A0-CF8A082AFE71"></a>
<h4 id="LNOCI-GUID-B5732CDF-2D02-404E-A1A0-CF8A082AFE71" class="sect4">Additional Attribute Functions</h4>
<div>
<p>OCI also provides functions that allow an application to set or check some of these attributes directly or indirectly, as shown in <a href="oci11obj.htm#GUID-B5732CDF-2D02-404E-A1A0-CF8A082AFE71__BGBDCDFB" title="This table has 3 columns. Column 1 is the meta-attribute name, columne 2 is name of the OCI function that sets the attribute, and column 3 is the name of the OCI function that checks the attribute setting.">Table 11-2</a>.</p>
<div class="tblformal" id="GUID-B5732CDF-2D02-404E-A1A0-CF8A082AFE71__BGBDCDFB">
<p class="titleintable">Table 11-2 Set and Check Functions</p>
<table class="cellalignment6175" title="Set and Check Functions " summary="This table has 3 columns. Column 1 is the meta-attribute name, columne 2 is name of the OCI function that sets the attribute, and column 3 is the name of the OCI function that checks the attribute setting.">
<thead>
<tr class="cellalignment6151">
<th class="cellalignment6165" id="d126108e5192">Meta-Attribute</th>
<th class="cellalignment6266" id="d126108e5195">Set with</th>
<th class="cellalignment6266" id="d126108e5198">Check with</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6151">
<td class="cellalignment6169" id="d126108e5203" headers="d126108e5192">
<p>nullity</p>
</td>
<td class="cellalignment6267" headers="d126108e5203 d126108e5195">
<p>&lt;none&gt;</p>
</td>
<td class="cellalignment6267" headers="d126108e5203 d126108e5198">
<p><a href="oci18nav004.htm#GUID-22B229C0-369E-453E-A8D6-C7F7DBB1E80C" title="Retrieves the NULL indicator structure of a standalone instance.">OCIObjectGetInd()</a></p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6169" id="d126108e5221" headers="d126108e5192">
<p>existence</p>
</td>
<td class="cellalignment6267" headers="d126108e5221 d126108e5195">
<p>&lt;none&gt;</p>
</td>
<td class="cellalignment6267" headers="d126108e5221 d126108e5198">
<p><a href="oci18nav003.htm#GUID-AF9CFD0F-14C4-4D24-94BF-5D68E9C41E01" title="Returns the existence meta-attribute of a standalone instance.">OCIObjectExists()</a></p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6169" id="d126108e5236" headers="d126108e5192">
<p>locked</p>
</td>
<td class="cellalignment6267" headers="d126108e5236 d126108e5195">
<p><a href="oci18nav004.htm#GUID-FF85B1EA-695C-49A6-99AC-6E1A7F616FC0" title="Locks a persistent object at the server.">OCIObjectLock()</a></p>
</td>
<td class="cellalignment6267" headers="d126108e5236 d126108e5198">
<p><a href="oci18nav003.htm#GUID-AC738B41-AA00-40D4-9824-F63BADA321FB">OCIObjectIsLocked()</a></p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6169" id="d126108e5253" headers="d126108e5192">
<p>dirty</p>
</td>
<td class="cellalignment6267" headers="d126108e5253 d126108e5195">
<p><a href="oci18nav002.htm#GUID-6EEEC8CC-3041-4718-ADE7-20C6D8C661ED" title="Marks a persistent object as updated (dirty).">OCIObjectMarkUpdate()</a></p>
</td>
<td class="cellalignment6267" headers="d126108e5253 d126108e5198">
<p><a href="oci18nav003.htm#GUID-9B96A7DF-BE19-4131-8B95-11063C060012">OCIObjectIsDirty()</a></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="LNOCI16802"></a><a id="LNOCI16801"></a>
<div class="props_rev_3"><a id="GUID-2220F791-09A6-46EB-AF24-4D65F53E04FB"></a>
<h4 id="LNOCI-GUID-2220F791-09A6-46EB-AF24-4D65F53E04FB" class="sect4">Transient Object Meta-Attributes</h4>
<div>
<p>Transient objects have no persistent attributes. <a href="oci11obj.htm#GUID-2220F791-09A6-46EB-AF24-4D65F53E04FB__BGBHIGGG" title="This table has 2 columns. Column 1 is the transient meta-attribute name and column 2 is its meaning.">Table 11-3</a> shows the following transient attributes.</p>
<div class="tblformal" id="GUID-2220F791-09A6-46EB-AF24-4D65F53E04FB__BGBHIGGG">
<p class="titleintable">Table 11-3 Transient Meta-Attributes</p>
<table class="cellalignment6175" title="Transient Meta-Attributes " summary="This table has 2 columns. Column 1 is the transient meta-attribute name and column 2 is its meaning.">
<thead>
<tr class="cellalignment6151">
<th class="cellalignment6200" id="d126108e5445">Transient Meta-Attributes</th>
<th class="cellalignment6222" id="d126108e5448">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6151">
<td class="cellalignment6203" id="d126108e5453" headers="d126108e5445">
<p>existent</p>
</td>
<td class="cellalignment6224" headers="d126108e5453 d126108e5448">
<p>Does the object exist?</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6203" id="d126108e5460" headers="d126108e5445">
<p>pinned</p>
</td>
<td class="cellalignment6224" headers="d126108e5460 d126108e5448">
<p>Is the object being accessed by the application?</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6203" id="d126108e5467" headers="d126108e5445">
<p>dirty</p>
</td>
<td class="cellalignment6224" headers="d126108e5467 d126108e5448">
<p>Has the object been marked as <span class="italic">dirtied</span>?</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6203" id="d126108e5477" headers="d126108e5445">
<p>nullity</p>
</td>
<td class="cellalignment6224" headers="d126108e5477 d126108e5448">
<p>Null information of the instance.</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6203" id="d126108e5484" headers="d126108e5445">
<p>allocation duration</p>
</td>
<td class="cellalignment6224" headers="d126108e5484 d126108e5448">
<p>See <span class="q">&#34;<a href="oci14oca.htm#GUID-639E852E-0AA3-414F-A5A3-598C8F2047E1" title="To maintain free space in memory, the object cache attempts to reuse objects&#39; memory whenever possible. The object cache reuses an object&#39;s memory when the object&#39;s lifetime (allocation duration) expires or when the object&#39;s pin duration expires.">Object Duration</a>&#34;</span>.</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6203" id="d126108e5505" headers="d126108e5445">
<p>pin duration</p>
</td>
<td class="cellalignment6224" headers="d126108e5505 d126108e5448">
<p>See <span class="q">&#34;<a href="oci14oca.htm#GUID-639E852E-0AA3-414F-A5A3-598C8F2047E1" title="To maintain free space in memory, the object cache attempts to reuse objects&#39; memory whenever possible. The object cache reuses an object&#39;s memory when the object&#39;s lifetime (allocation duration) expires or when the object&#39;s pin duration expires.">Object Duration</a>&#34;</span>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
</div>
<a id="LNOCI16803"></a>
<div class="props_rev_3"><a id="GUID-03683C87-7758-421A-BC51-C54A5A7679F2"></a>
<h3 id="LNOCI-GUID-03683C87-7758-421A-BC51-C54A5A7679F2" class="sect3">Complex Object Retrieval</h3>
<div>
<p>A complex object includes its root object and its set of logically related objects each of which are prefetched based on a given depth level.</p>
<p>In <a href="oci11obj.htm#GUID-B9E5DDBD-19CD-4AE0-B1D3-3B85ADEAAAB1__BGBDEJIB">Example 11-3</a> and <a href="oci11obj.htm#GUID-BA775817-78E4-4C49-A3C2-C867C50509B2__BGBBCFBA">Example 11-4</a>, only a single instance at a time was fetched or pinned. In these cases, each pin operation involved a separate server round-trip to retrieve the object.</p>
<p>Object-oriented applications often model their problems as a set of interrelated objects that form graphs of objects. The applications process these objects by starting at some initial set of objects, and then using the references in these initial objects to traverse the remaining objects. In a client/server setting, each of these traversals could result in costly network round-trips to fetch objects.</p>
<p>Application performance with objects can be improved with <span class="italic">complex object retrieval (COR)</span>. This is a prefetching mechanism in which an application specifies the criteria for retrieving a set of linked objects in a single operation.</p>
<div class="infobox-note" id="GUID-03683C87-7758-421A-BC51-C54A5A7679F2__GUID-E26BA445-AB6A-470E-8E2A-4D4941C73A2C">
<p class="notep1">Note:</p>
<p>As described later, this does not mean that these prefetched objects are all pinned. They are fetched into the object cache, so that subsequent pin calls are local operations.</p>
</div>
<p>A <span class="italic">complex object</span> is a set of logically related objects consisting of a root object, and a set of objects each of which is prefetched based on a given depth level. The <span class="italic">root object</span> is explicitly fetched or pinned. The <span class="italic">depth level</span> is the shortest number of references that must be traversed from the root object to a given prefetched object in a complex object.</p>
<p>An application specifies a complex object by describing its content and boundary. The fetching of complex objects is constrained by an environment&#39;s <span class="italic">prefetch limit</span>, the amount of memory in the object cache that is available for prefetching objects.</p>
<div class="infobox-note" id="GUID-03683C87-7758-421A-BC51-C54A5A7679F2__GUID-D5E96829-DA7D-4D78-83F5-297E3403E015">
<p class="notep1">Note:</p>
<p>The use of COR does not add functionality, but it improves performance. Its use is optional.</p>
</div>
<p>Consider the following type declaration:</p>
<pre dir="ltr">CREATE TYPE customer(...);
CREATE TYPE line_item(...);
CREATE TYPE line_item_varray as VARRAY(100) of REF line_item;
CREATE TYPE purchase_order AS OBJECT
( po_number         NUMBER,
  cust              REF customer,
  related_orders    REF purchase_order,
  line_items        line_item_varray);
</pre>
<p>The <code class="codeph">purchase_order</code> type contains a scalar value for <code class="codeph">po_number</code>, a <code class="codeph">VARRAY</code> of line items, and two references. The first is to a <code class="codeph">customer</code> type, and the second is to a <code class="codeph">purchase_order</code> type, indicating that this type may be implemented as a linked list.</p>
<p>When fetching a complex object, an application must specify the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>A <code class="codeph">REF</code> to the desired root object.</p>
</li>
<li>
<p>One or more pairs of type and depth information to specify the boundaries of the complex object. The type information indicates which <code class="codeph">REF</code> attributes should be followed for COR, and the depth level indicates how many levels deep those links should be followed.</p>
</li>
</ul>
<p>In the preceding purchase order object, the application must specify the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">REF</code> to the root purchase order object</p>
</li>
<li>
<p>One or more pairs of type and depth information for <code class="codeph">cust</code>, <code class="codeph">related_orders</code>, or <code class="codeph">line_items</code></p>
</li>
</ul>
<p>An application fetching a purchase order may very likely need access to the customer information for that order. Using simple navigation, this would require two server accesses to retrieve the two objects. Through complex object retrieval, the customer can be prefetched when the application pins the purchase order. In this case, the complex object would consist of the purchase order object and the customer object that it references.</p>
<p>In the previous example, the application would specify the <code class="codeph">purchase_order</code> <code class="codeph">REF</code>, and would indicate that the <code class="codeph">cust</code> <code class="codeph">REF</code> attribute should be followed to a depth level of 1, as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">REF(PO object)</code></p>
</li>
<li>
<p>{<code class="codeph">(customer, 1</code>)}</p>
</li>
</ul>
<p>For the application to prefetch the <code class="codeph">purchase_order</code> object and all objects in the object graph it contains, the application would specify that both the <code class="codeph">cust</code> and <code class="codeph">related_orders</code> should be followed to the maximum depth level possible.</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">REF(PO object)</code></p>
</li>
<li>
<p>{<code class="codeph">(customer, UB4MAXVAL), (purchase_order, UB4MAXVAL)</code>}</p>
</li>
</ul>
<p>(In this example, <code class="codeph">UB4MAXVAL</code> specifies that all objects of the specified type reachable through references from the root object should be prefetched.)</p>
<p>For an application to fetch a PO and all the associated line items, it would specify:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">REF(PO object)</code></p>
</li>
<li>
<p>{<code class="codeph">(line_item, 1)</code>}</p>
</li>
</ul>
<p>The application can also fetch all objects reachable from the root object by way of <code class="codeph">REF</code>s (transitive closure) by setting the level parameter to the depth desired. For the preceding two examples, the application could also specify <code class="codeph">(PO object REF, UB4MAXVAL)</code> and <code class="codeph">(PO object REF, 1)</code> respectively, to prefetch required objects. Although, doing so results in many extraneous fetches, quite simple to specify and requires only one server round-trip.</p>
<div class="p">This section includes the following topics:
<ul style="list-style-type: disc;">
<li>
<p><a href="oci11obj.htm#GUID-1E31DD56-FAF9-497F-97EB-2CAF7025E4CB">About Prefetching Objects</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-069E4CBB-7F2A-4077-A50F-299E301A9EFB" title="Complex object retrieval (COR) allows an application to prefetch a complex object while fetching the root object.">About Implementing Complex Object Retrieval in OCI</a></p>
</li>
</ul>
</div>
</div>
<a id="LNOCI16804"></a>
<div class="props_rev_3"><a id="GUID-1E31DD56-FAF9-497F-97EB-2CAF7025E4CB"></a>
<h4 id="LNOCI-GUID-1E31DD56-FAF9-497F-97EB-2CAF7025E4CB" class="sect4">About Prefetching Objects</h4>
<div>
<p>After specifying and fetching a complex object, subsequent fetches of objects contained in the complex object do not incur the cost of a network round-trip, because these objects have been prefetched and are in the object cache. Consider that excessive prefetching of objects can lead to a flooding of the object cache. This flooding, in turn, may force out other objects that the application had pinned, leading to a performance degradation instead of performance improvement.</p>
<div class="infobox-note" id="GUID-1E31DD56-FAF9-497F-97EB-2CAF7025E4CB__GUID-1418E9CD-C21B-4D0C-9555-5A7D24401D63">
<p class="notep1">Note:</p>
<p>If there is insufficient memory in the cache to hold all prefetched objects, some objects may not be prefetched. The application incurs a network round-trip when those objects are accessed later.</p>
</div>
<p>The <code class="codeph">READ</code> or <code class="codeph">SELECT</code> privilege is needed for all prefetched objects. Objects in the complex object for which the application does not have <code class="codeph">READ</code> or <code class="codeph">SELECT</code> privilege are not prefetched.</p>
</div>
</div>
<a id="LNOCI16805"></a>
<div class="props_rev_3"><a id="GUID-069E4CBB-7F2A-4077-A50F-299E301A9EFB"></a>
<h4 id="LNOCI-GUID-069E4CBB-7F2A-4077-A50F-299E301A9EFB" class="sect4">About Implementing Complex Object Retrieval in OCI</h4>
<div>
<p>Complex object retrieval (COR) allows an application to prefetch a complex object while fetching the root object.</p>
<p>The complex object specifications are passed to the same <code class="codeph">OCIObjectPin()</code> function used for simple objects.</p>
<p>An application specifies the parameters for complex object retrieval using a <span class="italic">complex object retrieval handle</span>. This handle is of type <code class="codeph">OCIComplexObject</code> and is allocated in the same way as other OCI handles.</p>
<p>The complex object retrieval handle contains a list of <span class="italic">complex object retrieval descriptors</span>. The descriptors are of type <code class="codeph">OCIComplexObjectComp</code>, and are allocated in the same way as other OCI descriptors.</p>
<p>Each COR descriptor contains a type <code class="codeph">REF</code> and a depth level. The type <code class="codeph">REF</code> specifies a type of reference to be followed while constructing the complex object. The depth level indicates how far a particular type of reference should be followed. Specify an integer value, or specify the constant <code class="codeph">UB4MAXVAL</code> for the maximum possible depth level.</p>
<p>The application can also specify the depth level in the COR handle without creating COR descriptors for type and depth parameters. In this case, all <code class="codeph">REF</code>s are followed to the depth specified in the COR handle. The COR handle can also be used to specify whether a collection attribute should be fetched separately on demand (out-of-line) as opposed to the default case of fetching it along with the containing object (inline).</p>
<p>The application uses <code class="codeph">OCIAttrSet()</code> to set the attributes of a COR handle. The attributes are:</p>
<p><code class="codeph">OCI_ATTR_COMPLEXOBJECT_LEVEL</code> - the depth level</p>
<p><code class="codeph">OCI_ATTR_COMPLEXOBJECT_COLL_OUTOFLINE</code> - fetch collection attribute in an object type out-of-line</p>
<p>The application allocates the COR descriptor using <code class="codeph">OCIDescriptorAlloc()</code> and then can set the following attributes:</p>
<p><code class="codeph">OCI_ATTR_COMPLEXOBJECTCOMP_TYPE</code> - the type <code class="codeph">REF</code></p>
<p><code class="codeph">OCI_ATTR_COMPLEXOBJECTCOMP_TYPE_LEVEL</code> - the depth level for references of the preceding type</p>
<p>Once these attributes are set, the application calls <code class="codeph">OCIParamSet()</code> to put the descriptor into a complex object retrieval handle. The handle has an <code class="codeph">OCI_ATTR_PARAM_COUNT</code> attribute that specifies the number of descriptors on the handle. This attribute can be read with <code class="codeph">OCIAttrGet()</code>.</p>
<p>Once the handle has been populated, it can be passed to the <code class="codeph">OCIObjectPin()</code> call to pin the root object and prefetch the remainder of the complex object.</p>
<p>The complex object retrieval handles and descriptors must be freed explicitly when they are no longer needed.</p>
<div class="infoboxnotealso" id="GUID-069E4CBB-7F2A-4077-A50F-299E301A9EFB__GUID-B02B8396-0AFE-4EF3-8129-1663F84503DE">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci02bas.htm#GUID-5F13B2EC-E29C-4710-8AD7-E97E6C28085E" title="Almost every OCI call includes in its parameter list one or more handles.">Handles</a></p>
</li>
<li>
<p><a href="oci02bas.htm#GUID-82F35CC7-A79D-42CE-BF90-DE63FCBAAB7C" title="OCI descriptors and locators are opaque data structures that maintain data-specific information.">OCI Descriptors</a></p>
</li>
<li>
<p><a href="oci18nav005.htm#GUID-89F29585-2F16-4FA3-B1E0-BDD83707CA62" title="Pins a referenceable object.">OCIObjectPin()</a></p>
</li>
<li>
<p><a href="oci16rel002.htm#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="Sets the value of an attribute of a handle or a descriptor.">OCIAttrSet()</a></p>
</li>
<li>
<p><a href="oci16rel002.htm#GUID-E9EF2766-E078-49A7-B1D1-738E4BA4814F">OCIDescriptorAlloc()</a></p>
</li>
<li>
<p><a href="oci16rel002.htm#GUID-280CF9E5-3537-4785-9AFA-4E63DE29A266" title="Sets a complex object retrieval (COR) descriptor into a COR handle.">OCIParamSet()</a></p>
</li>
<li>
<p><a href="oci16rel002.htm#GUID-FA199A99-4D7A-42C2-BB0A-C20047B95DF9" title="Gets the value of an attribute of a handle.">OCIAttrGet()</a></p>
</li>
<li>
<p><a href="oci18nav005.htm#GUID-89F29585-2F16-4FA3-B1E0-BDD83707CA62" title="Pins a referenceable object.">OCIObjectPin()</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="LNOCI16806"></a>
<div class="props_rev_3"><a id="GUID-22733B74-F52F-4E54-8E5E-5C27FD03F5DC"></a>
<h3 id="LNOCI-GUID-22733B74-F52F-4E54-8E5E-5C27FD03F5DC" class="sect3">COR Prefetching</h3>
<div>
<p>The application specifies a complex object while fetching the root object.</p>
<p>The prefetched objects are obtained by doing a breadth-first traversal of the graphs of objects rooted at a given root object. The traversal stops when all required objects have been prefetched, or when the total size of all the prefetched objects exceeds the <span class="italic">prefetch limit</span>.</p>
<div class="p">This section includes the following topics:
<ul style="list-style-type: disc;">
<li>
<p><a href="oci11obj.htm#GUID-546FD7C5-FD56-4853-9E2F-298E53D1D801">COR Interface</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-56AC45D1-2FD1-4D97-9C0B-EFCA7DFF5A4C">Example of COR</a></p>
</li>
</ul>
</div>
</div>
<a id="LNOCI16807"></a>
<div class="props_rev_3"><a id="GUID-546FD7C5-FD56-4853-9E2F-298E53D1D801"></a>
<h4 id="LNOCI-GUID-546FD7C5-FD56-4853-9E2F-298E53D1D801" class="sect4">COR Interface</h4>
<div>
<p>The interface for fetching complex objects is the OCI pin interface. The application can pass an initialized COR handle to <a href="oci18nav005.htm#GUID-89F29585-2F16-4FA3-B1E0-BDD83707CA62" title="Pins a referenceable object.">OCIObjectPin()</a> (or an array of handles to <a href="oci18nav005.htm#GUID-2629C6C3-5299-4E92-BA58-804809CFF8B9">OCIObjectArrayPin()</a>) to fetch the root object and the prefetched objects specified in the COR handle.</p>
<pre dir="ltr">sword OCIObjectPin ( OCIEnv              *env, 
                     OCIError            *err, 
                     OCIRef              *object_ref,
                     OCIComplexObject    *corhdl,
                     OCIPinOpt           pin_option, 
                     OCIDuration         pin_duration, 
                     OCILockOpt          lock_option,
                     void                **object );

sword OCIObjectArrayPin ( OCIEnv            *env, 
                          OCIError          *err, 
                          OCIRef            **ref_array, 
                          ub4               array_size,
                          OCIComplexObject  **cor_array,
                          ub4               cor_array_size, 
                          OCIPinOpt         pin_option, 
                          OCIDuration       pin_duration,
                          OCILockOpt        lock, 
                          void              **obj_array,
                          ub4               *pos );
</pre>
<p>Note the following points when using COR:</p>
<ul style="list-style-type: disc;">
<li>
<p>A null COR handle argument defaults to pinning just the root object.</p>
</li>
<li>
<p>A COR handle with the type of the root object and a depth level of 0 fetches only the root object and is thus equivalent to a null COR handle.</p>
</li>
<li>
<p>The lock options apply only to the root object.</p>
<div class="infobox-note" id="GUID-546FD7C5-FD56-4853-9E2F-298E53D1D801__GUID-34CB8804-797A-444A-B851-2900A5162455">
<p class="notep1">Note:</p>
<p>To specify lock options for prefetched objects, the application can visit all the objects in a complex object, create an array of <code class="codeph">REF</code>s, and lock the entire complex object in another round-trip using the array interface (<a href="oci18nav005.htm#GUID-2629C6C3-5299-4E92-BA58-804809CFF8B9">OCIObjectArrayPin()</a>).</p>
</div>
</li>
</ul>
</div>
</div>
<a id="LNOCI72704"></a><a id="LNOCI16808"></a>
<div class="props_rev_3"><a id="GUID-56AC45D1-2FD1-4D97-9C0B-EFCA7DFF5A4C"></a>
<h4 id="LNOCI-GUID-56AC45D1-2FD1-4D97-9C0B-EFCA7DFF5A4C" class="sect4">Example of COR</h4>
<div>
<div class="section">
<p><a href="oci11obj.htm#GUID-56AC45D1-2FD1-4D97-9C0B-EFCA7DFF5A4C__BGBGCEHH">Example 11-5</a> illustrates how an application program can be modified to use complex object retrieval.</p>
<p>Consider an application that displays a purchase order and the line items associated with it. The code in boldface accomplishes this. The rest of the code uses complex object retrieval for prefetching and thus enhances the application&#39;s performance.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-56AC45D1-2FD1-4D97-9C0B-EFCA7DFF5A4C__BGBGCEHH">
<p class="titleinexample">Example 11-5 Using Complex Object Retrieval in OCI</p>
<pre dir="ltr"><span class="bold">OCIEnv *envhp;</span>
<span class="bold">OCIError *errhp;</span>
<span class="bold">OCIRef **liref;</span>
<span class="bold">OCIRef *poref;</span>
<span class="bold">OCIIter *itr;</span>
<span class="bold">boolean  eoc;</span>
<span class="bold">purchase_order *po = (purchase_order *)0;</span>
<span class="bold">line_item *li = (line_item *)0;</span>
<span class="bold">OCISvcCtx *svchp;</span>
<span class="bold">OCIComplexObject *corhp;</span>
<span class="bold">OCIComplexObjectComp *cordp;</span>
<span class="bold">OCIType *litdo;</span>
<span class="bold">ub4 level = 0;</span>

/* get COR Handle */
OCIHandleAlloc((void  *) envhp, (void  **) &amp;corhp, (ub4)
                OCI_HTYPE_COMPLEXOBJECT, 0, (void  **)0);

/* get COR descriptor for type line_item */
OCIDescriptorAlloc((void  *) envhp, (void  **) &amp;cordp, (ub4)
                OCI_DTYPE_COMPLEXOBJECTCOMP, 0, (void  **) 0);

/* get type of line_item to set in COR descriptor */
OCITypeByName(envhp, errhp, svchp, (const text *) 0, (ub4) 0,
              (const text *) &#34;LINE_ITEM&#34;,
              (ub4) strlen((const char *) &#34;LINE_ITEM&#34;), (text *) 0,
              (ub4) 0, OCI_DURATION_SESSION,
              OCI_TYPEGET_HEADER, &amp;litdo);

/* set line_item type in COR descriptor */
OCIAttrSet( (void  *) cordp, (ub4) OCI_DTYPE_COMPLEXOBJECTCOMP,
            (void  *) litdo, (ub4) sizeof(void  *), (ub4)
            OCI_ATTR_COMPLEXOBJECTCOMP_TYPE, (OCIError *) errhp);
level = 1;

/* set depth level for line_item_varray in COR descriptor */
OCIAttrSet( (void  *) cordp, (ub4) OCI_DTYPE_COMPLEXOBJECTCOMP,
            (void  *) &amp;level, (ub4) sizeof(ub4), (ub4)
            OCI_ATTR_COMPLEXOBJECTCOMP_TYPE_LEVEL, (OCIError *) errhp);

/* put COR descriptor in COR handle */
OCIParamSet(corhp, OCI_HTYPE_COMPLEXOBJECT, errhp, cordp,
            OCI_DTYPE_COMPLEXOBJECTCOMP, 1);

<span class="bold">/* pin the purchase order */</span>
<span class="bold">OCIObjectPin(envhp, errhp, poref, corhp, OCI_PIN_LATEST,</span>
<span class="bold">   OCI_DURATION_SESSION, OCI_LOCK_NONE, (void  **)&amp;po);</span>

/* free COR descriptor and COR handle */
OCIDescriptorFree((void  *) cordp, (ub4) OCI_DTYPE_COMPLEXOBJECTCOMP);
OCIHandleFree((void  *) corhp, (ub4) OCI_HTYPE_COMPLEXOBJECT);

<span class="bold">/* iterate and print line items for this purchase order */</span>
<span class="bold">OCIIterCreate(envhp, errhp, po-&gt;line_items, &amp;itr);</span>

<span class="bold">/* get first line item */</span>
<span class="bold">OCIIterNext(envhp, errhp, itr, (void  **)&amp;liref, (void  **)0, &amp;eoc);</span>
<span class="bold">while (!eoc)        /* not end of collection */</span>
<span class="bold">{</span>
/* pin line item */
   OCIObjectPin(envhp, errhp, *liref, (void  *)0, OCI_PIN_RECENT,
       OCI_DURATION_SESSION,
       OCI_LOCK_NONE, (void  **)&amp;li));
<span class="bold">  display_line_item(li);</span>

<span class="bold">/* get next line item */</span>
<span class="bold">OCIIterNext(envhp, errhp, itr, (void  **)&amp;liref, (void  **)0, &amp;eoc);</span>
<span class="bold">}</span>
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="LNOCI16809"></a>
<div class="props_rev_3"><a id="GUID-05972451-AAD6-4929-848B-DE406B82AA0F"></a>
<h3 id="LNOCI-GUID-05972451-AAD6-4929-848B-DE406B82AA0F" class="sect3">OCI Versus SQL Access to Objects</h3>
<div>
<p>If an application must manipulate a graph of objects (interrelated by object references), then it is more effective to use the OCI interface rather than the SQL interface for accessing objects. Retrieving a graph of objects using the SQL interface may require executing multiple <code class="codeph">SELECT</code> statements, requiring multiple network round-trips. Using the complex object retrieval capability provided by OCI, the application can retrieve the graph of objects in one <a href="oci18nav005.htm#GUID-89F29585-2F16-4FA3-B1E0-BDD83707CA62" title="Pins a referenceable object.">OCIObjectPin()</a> call.</p>
<p>Consider the update case where the application retrieves a graph of objects, and modifies it based upon user interaction, and then wants to make the modifications persistent in the database. Using the SQL interface, the application would have to execute multiple <code class="codeph">UPDATE</code> statements to update the graph of objects. If the modifications involved creation of new objects and deletion of existing objects, then execution of corresponding <code class="codeph">INSERT</code> and <code class="codeph">DELETE</code> statements would also be required. In addition, the application would have to do more bookkeeping, such as keeping track of table names, because this information is required for executing the <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, and <code class="codeph">DELETE</code> statements.</p>
<p>Using the <a href="oci18nav001.htm#GUID-782180CB-D33E-42E0-AB4C-96ECDF651C1E">OCICacheFlush()</a> function, the application can flush all modifications (insertion, deletion, and update of objects) in a single operation. OCI does all the bookkeeping, thereby requiring less coding in the application. For manipulating a graph of objects OCI is not only efficient, but also provides an easy-to-use interface.</p>
<p>Consider a different case in which the application must fetch an object when given its <code class="codeph">REF</code>. In OCI, this is achieved by pinning the object using the <a href="oci18nav005.htm#GUID-89F29585-2F16-4FA3-B1E0-BDD83707CA62" title="Pins a referenceable object.">OCIObjectPin()</a> call. In the SQL interface, this can be achieved by dereferencing the <code class="codeph">REF</code> in a <code class="codeph">SELECT</code> statement (for example, <code class="codeph">SELECT DEREF(ref) from tbl;</code>). Consider situations where the same <code class="codeph">REF</code> (reference to the same object) is being dereferenced multiple times in a transaction. By calling <a href="oci18nav005.htm#GUID-89F29585-2F16-4FA3-B1E0-BDD83707CA62" title="Pins a referenceable object.">OCIObjectPin()</a> with the <code class="codeph">OCI_PIN_RECENT</code> option, the object is fetched from the server only once for the transaction, and repeated pins on the same <code class="codeph">REF</code> return a pointer to the pinned object in the cache. In the SQL interface, each execution of the <code class="codeph">SELECT</code> <code class="codeph">DEREF...</code> statement would result in fetching the object from the server. This would result in multiple round-trips to the server and multiple copies of the same object.</p>
<p>Finally, consider the case in which the application must fetch a nonreferenceable object, as in the following example:</p>
<pre dir="ltr">CREATE TABLE department 
( 
deptno number, 
deptname varchar2(30), 
manager employee_t 
); 
</pre>
<p>The <code class="codeph">employee_t</code> instances stored in the <code class="codeph">manager</code> column are nonreferenceable. You can only use the SQL interface to fetch <code class="codeph">manager</code> column instances. But if <code class="codeph">employee_t</code> has any <code class="codeph">REF</code> attributes, OCI calls can then be used to navigate the <code class="codeph">REF</code>.</p>
</div>
</div>
<a id="LNOCI16810"></a>
<div class="props_rev_3"><a id="GUID-86097867-CFAA-428C-AE6D-B08E45220DDD"></a>
<h3 id="LNOCI-GUID-86097867-CFAA-428C-AE6D-B08E45220DDD" class="sect3">Pin Count and Unpinning</h3>
<div>
<p>Each object in the object cache has a <span class="italic">pin count</span> associated with it.</p>
<p>The pin count indicates the number of code modules that are concurrently accessing the object. The pin count is set to 1 when an object is pinned into the cache for the first time. Objects prefetched with complex object retrieval enter the object cache with a pin count of zero.</p>
<p>It is possible to pin an pinned object. Doing so increases the pin count by one. When a process finishes using an object, it should <span class="italic">unpin</span> it, using <code class="codeph">OCIObjectUnpin()</code>. This call decrements the pin count by one.</p>
<p>When the pin count of an object reaches zero, that object is eligible to be aged out of the cache if necessary, freeing up the memory space occupied by the object.</p>
<p>The pin count of an object can be set to zero explicitly by calling <code class="codeph">OCIObjectPinCountReset()</code>.</p>
<p>An application can unpin all objects in the cache related to a specific connection, by calling <code class="codeph">OCICacheUnpin()</code>.</p>
<div class="infoboxnotealso" id="GUID-86097867-CFAA-428C-AE6D-B08E45220DDD__GUID-5903EAC4-A058-471B-AFDF-9BB06637860C">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci14oca.htm#GUID-51E18790-5949-4D5B-9708-7749CA7B8E22" title="Freeing an object copy removes it from the object cache and frees up its memory.">About Freeing an Object Copy</a> for more information about the conditions under which objects with zero pin count are removed from the cache and about objects being aged out of the cache</p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-2F9466DE-9186-495E-92EE-B7FBAA65D6B9" title="The application must take specific steps to ensure that changes to objects by marking them and then flushing them are written in the database.">About Marking Objects and Flushing Changes</a> for information about explicitly flushing an object or the entire cache</p>
</li>
<li>
<p><a href="oci18nav005.htm#GUID-109DD260-8094-489C-A85C-AB27277E6D9B">OCIObjectUnpin()</a></p>
</li>
<li>
<p><a href="oci18nav005.htm#GUID-5D8C7FE3-8088-4A1C-8C36-19D0982FCAC3" title="Completely unpins an object, setting its pin count to zero.">OCIObjectPinCountReset()</a></p>
</li>
<li>
<p><a href="oci18nav005.htm#GUID-B7E9C0B8-7888-456E-A8F1-1151354C37BF" title="Unpins persistent objects.">OCICacheUnpin()</a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="LNOCI72705"></a><a id="LNOCI16811"></a>
<div class="props_rev_3"><a id="GUID-D0FD9D2E-DAE1-4468-B90A-DE19B03CB0F3"></a>
<h3 id="LNOCI-GUID-D0FD9D2E-DAE1-4468-B90A-DE19B03CB0F3" class="sect3">NULL Indicator Structure</h3>
<div>
<p>If a column in a row of a database table has no value, then that column is said to be <code class="codeph">NULL</code>, or to contain a <code class="codeph">NULL</code>.</p>
<p>Two different types of <code class="codeph">NULL</code>s can apply to objects:</p>
<ul style="list-style-type: disc;">
<li>
<p>Any attribute of an object can have a <code class="codeph">NULL</code> value. This indicates that the value of that attribute of the object is not known.</p>
</li>
<li>
<p>An object instance may be <span class="italic">atomically NULL</span>, meaning that the value of the entire object is unknown.</p>
</li>
</ul>
<p>Atomic nullity is not the same thing as nonexistence. An atomically <code class="codeph">NULL</code> instance still exists; its value is just not known. It may be thought of as an existing object with no data.</p>
<p>When working with objects in OCI, an application can define a <span class="italic">NULL indicator structure</span> for each object type used by the application. In most cases, doing so simply requires including the <code class="codeph">NULL</code> indicator structure generated by OTT along with the struct declaration. When the OTT output header file is included, the <code class="codeph">NULL</code> indicator struct becomes available to your application.</p>
<p>For each type, the <code class="codeph">NULL</code> indicator structure includes an atomic <code class="codeph">NULL</code> indicator (whose type is <code class="codeph">OCIInd</code>), and a <code class="codeph">NULL</code> indicator for each attribute of the instance. If the type has an object attribute, the <code class="codeph">NULL</code> indicator structure includes that attribute&#39;s <code class="codeph">NULL</code> indicator structure. <a href="oci11obj.htm#GUID-D0FD9D2E-DAE1-4468-B90A-DE19B03CB0F3__BGBHFCEC">Example 11-6</a> shows the C representations of types with their corresponding <code class="codeph">NULL</code> indicator structures.</p>
<div class="infobox-note" id="GUID-D0FD9D2E-DAE1-4468-B90A-DE19B03CB0F3__GUID-DF1D2A98-7BA1-424D-A4E8-8D1FCCF35DEF">
<p class="notep1">Note:</p>
<p>The <code class="codeph">dependentsAge</code> field of <code class="codeph">person_ind</code> indicates whether the entire varray (<code class="codeph">dependentsAge</code> field of <code class="codeph">person</code>) is atomically <code class="codeph">NULL</code> or not. <code class="codeph">NULL</code> information of individual elements of <code class="codeph">dependentsAge</code> can be retrieved through the <code class="codeph">elemind</code> parameter of a call to <code class="codeph">OCICollGetElem()</code>. Similarly, the <code class="codeph">prevAddr</code> field of <code class="codeph">person_ind</code> indicates whether the entire nested table (<code class="codeph">prevAddr</code> field of <code class="codeph">person</code>) is atomically <code class="codeph">NULL</code> or not. <code class="codeph">NULL</code> information of individual elements of <code class="codeph">prevAddr</code> can be retrieved through the <code class="codeph">elemind</code> parameter of a call to <code class="codeph">OCICollGetElem()</code>.</p>
</div>
<p>For an object type instance, the first field of the <code class="codeph">NULL</code> indicator structure is the atomic <code class="codeph">NULL</code> indicator, and the remaining fields are the attribute <code class="codeph">NULL</code> indicators whose layout resembles the layout of the object type instance&#39;s attributes.</p>
<p>Checking the value of the atomic <code class="codeph">NULL</code> indicator allows an application to test whether an instance is atomically <code class="codeph">NULL</code>. Checking any of the others allows an application to test the <code class="codeph">NULL</code> status of that attribute, as in the following code sample:</p>
<pre dir="ltr">person_ind *my_person_ind
if( my_person_ind -&gt; _atomic == OCI_IND_NULL)
   printf (&#34;instance is atomically NULL\n&#34;);
else
if( my_person_ind -&gt; fname == OCI_IND_NULL)
   printf (&#34;fname attribute is NULL\n&#34;);
</pre>
<p>In the preceding example, the value of the atomic <code class="codeph">NULL</code> indicator, or one of the attribute <code class="codeph">NULL</code> indicators, is compared to the predefined value <code class="codeph">OCI_IND_NULL</code> to test if it is <code class="codeph">NULL</code>. The following predefined values are available for such a comparison:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OCI_IND_NOTNULL</code>, indicating that the value is not <code class="codeph">NULL</code></p>
</li>
<li>
<p><code class="codeph">OCI_IND_NULL</code>, indicating that the value is <code class="codeph">NULL</code></p>
</li>
<li>
<p><code class="codeph">OCI_IND_BADNULL</code> indicates that an enclosing object (or parent object) is <code class="codeph">NULL</code>. This is used by PL/SQL, and may also be referred to as an INVALID_NULL. For example, if a type instance is <code class="codeph">NULL</code>, then its attributes are INVALID_NULLs.</p>
</li>
</ul>
<p>Use the function <code class="codeph">OCIObjectGetInd()</code> to retrieve the <code class="codeph">NULL</code> indicator structure of an object.</p>
<p>If you update an attribute in its C structure, you must also set the <code class="codeph">NULL</code> indicator for that attribute:</p>
<pre dir="ltr">obj-&gt;attr1 = string1;
OCIObjectGetInd(envhp, errhp, obj, &amp;ind);
ind-&gt;attr1 = OCI_IND_NOTNULL;
</pre>
<div class="example" id="GUID-D0FD9D2E-DAE1-4468-B90A-DE19B03CB0F3__BGBHFCEC">
<p class="titleinexample">Example 11-6 C Representations of Types with Their Corresponding NULL Indicator Structures</p>
<pre dir="ltr">struct address
{
   OCINumber    no;
   OCIString    *street; 
   OCIString    *state;
   OCIString    *zip;
};
typedef struct address address;

struct address_ind
{
  OCIInd    _atomic;
  OCIInd    no;
  OCIInd    street;
  OCIInd    state;
  OCIInd    zip;
};
typedef struct address_ind address_ind;
    

struct person 
{
   OCIString      *fname;
   OCIString      *lname;
   OCINumber      age;
   OCIDate        birthday;
   OCIArray       *dependentsAge;
   OCITable       *prevAddr;
   OCIRaw         *comment1;
   OCILobLocator  *comment2;
   address        addr;
   OCIRef         *spouse;
};
typedef struct person person;
    
struct person_ind
{
  OCIInd        _atomic;
  OCIInd        fname;
  OCIInd        lname;
  OCIInd        age;
  OCIInd        birthday;
  OCIInd        dependentsAge;
  OCIInd        prevAddr;
  OCIInd        comment1;
  OCIInd        comment2;
  address_ind   addr;
  OCIInd        spouse;
};
typedef struct person_ind person_ind;
</pre></div>
<!-- class="example" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-D0FD9D2E-DAE1-4468-B90A-DE19B03CB0F3__GUID-1AE2825E-B003-4634-B30B-3FC75EDF2DE7">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci15ott.htm#GUID-3D22CA8E-BE01-492F-BA85-DDD0CD3F4890" title="This chapter discusses the Object Type Translator (OTT), which is used to map database object types and named collection types to C structs for use in OCI applications.">Using the Object Type Translator with OCI</a> for more information about OTT-generated <code class="codeph">NULL</code> indicator structures</p>
</li>
<li>
<p><a href="oci19map001.htm#GUID-B28B3D65-EB7B-44BD-ADBA-DAC0C21DE90F" title="Gets a pointer to the element at the given index.">OCICollGetElem()</a></p>
</li>
<li>
<p><a href="oci18nav004.htm#GUID-22B229C0-369E-453E-A8D6-C7F7DBB1E80C" title="Retrieves the NULL indicator structure of a standalone instance.">OCIObjectGetInd()</a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI16812"></a>
<div class="props_rev_3"><a id="GUID-86418D8C-FA67-4B14-A5BC-7A075C6B4206"></a>
<h3 id="LNOCI-GUID-86418D8C-FA67-4B14-A5BC-7A075C6B4206" class="sect3">About Creating Objects</h3>
<div>
<p>An OCI application can create any object using <code class="codeph">OCIObjectNew()</code>.</p>
<p>To create a persistent object, the application must specify the object table where the new object resides. This value can be retrieved by calling <code class="codeph">OCIObjectPinTable()</code>, and it is passed in the <code class="codeph">table</code> parameter. To create a transient object, the application must pass only the type descriptor object (retrieved by calling <code class="codeph">OCIDescribeAny()</code>) for the type of object being created.</p>
<p><code class="codeph">OCIObjectNew()</code> can also be used to create instances of scalars (for example, <code class="codeph">REF</code>, LOB, string, raw, number, and date) and collections (for example, varray and nested table) by passing the appropriate value for the <code class="codeph">typecode</code> parameter.</p>
<p>This section includes the following topic: <a href="oci11obj.htm#GUID-B67C9341-734A-4B7F-98CA-50638FD9AC81">Attribute Values of New Objects</a>.</p>
<div class="infoboxnotealso" id="GUID-86418D8C-FA67-4B14-A5BC-7A075C6B4206__GUID-BB94F7BB-857F-4EAF-AA20-F603D3842B50">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci18nav004.htm#GUID-2EFD6F01-A02F-4C5B-B20F-1EF841249056" title="Creates a standalone instance.">OCIObjectNew()</a></p>
</li>
<li>
<p><a href="oci18nav005.htm#GUID-B08E296D-7D4F-4D8C-A0CF-16786E9993E8">OCIObjectPinTable()</a></p>
</li>
<li>
<p><a href="oci16rel003.htm#GUID-AE9F73FB-DCC1-401E-8151-A8A89059163A" title="Describes existing schema and subschema objects.">OCIDescribeAny()</a></p>
</li>
</ul>
</div>
</div>
<a id="LNOCI16814"></a><a id="LNOCI16813"></a>
<div class="props_rev_3"><a id="GUID-B67C9341-734A-4B7F-98CA-50638FD9AC81"></a>
<h4 id="LNOCI-GUID-B67C9341-734A-4B7F-98CA-50638FD9AC81" class="sect4">Attribute Values of New Objects</h4>
<div>
<div class="section">
<p>By default, all attributes of a newly created object have <code class="codeph">NULL</code> values. After initializing attribute data, the user must change the corresponding <code class="codeph">NULL</code> status of each attribute to non-<code class="codeph">NULL</code>.</p>
<p>It is possible to have attributes set to non-<code class="codeph">NULL</code> values when an object is created. This is accomplished by setting the <code class="codeph">OCI_ATTR_OBJECT_NEWNOTNULL</code> attribute of the environment handle to <code class="codeph">TRUE</code> using <a href="oci16rel002.htm#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="Sets the value of an attribute of a handle or a descriptor.">OCIAttrSet()</a>. This mode can later be turned off by setting the attribute to <code class="codeph">FALSE</code>.</p>
<p>If <code class="codeph">OCI_ATTR_OBJECT_NEWNOTNULL</code> is set to <code class="codeph">TRUE</code>, then <a href="oci18nav004.htm#GUID-2EFD6F01-A02F-4C5B-B20F-1EF841249056" title="Creates a standalone instance.">OCIObjectNew()</a> creates a non-<code class="codeph">NULL</code> object. The attributes of the object have the default values described in <a href="oci11obj.htm#GUID-B67C9341-734A-4B7F-98CA-50638FD9AC81__G475191" title="This table has 2 columns. Column 1 is the attribute type and column 2 is its corresponding non-NULL default value of the object.">Table 11-4</a>, and the corresponding <code class="codeph">NULL</code> indicators are set to <code class="codeph">NOT NULL</code>.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-B67C9341-734A-4B7F-98CA-50638FD9AC81__G475191">
<p class="titleintable">Table 11-4 Attribute Values for New Objects</p>
<table class="cellalignment6175" title="Attribute Values for New Objects " summary="This table has 2 columns. Column 1 is the attribute type and column 2 is its corresponding non-NULL default value of the object.">
<thead>
<tr class="cellalignment6151">
<th class="cellalignment6268" id="d126108e8303">Attribute Type</th>
<th class="cellalignment6269" id="d126108e8306">Default Value</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8311" headers="d126108e8303">
<pre dir="ltr">REF
</pre></td>
<td class="cellalignment6271" headers="d126108e8311 d126108e8306">
<p>If an object has a <code class="codeph">REF</code> attribute, the user must set it to a valid <code class="codeph">REF</code> before flushing the object or an error is returned</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8324" headers="d126108e8303">
<pre dir="ltr">DATE
</pre></td>
<td class="cellalignment6271" headers="d126108e8324 d126108e8306">
<p>The earliest possible date that Oracle Database allows, which is midnight, 01-JAN-4712 BCE (equivalent to Julian day 1)</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8331" headers="d126108e8303">
<pre dir="ltr">ANSI DATE
</pre></td>
<td class="cellalignment6271" headers="d126108e8331 d126108e8306">
<p>The earliest possible date that Oracle Database allows, 01-JAN-4712 BCE (equivalent to Julian day 1)</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8338" headers="d126108e8303">
<pre dir="ltr">TIMESTAMP
</pre></td>
<td class="cellalignment6271" headers="d126108e8338 d126108e8306">
<p>The earliest possible date and time that Oracle Database allows, which is midnight, 01-JAN-4712 BCE (equivalent to Julian day 1)</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8345" headers="d126108e8303">
<pre dir="ltr">TIMESTAMP WITH TIME ZONE
</pre></td>
<td class="cellalignment6271" headers="d126108e8345 d126108e8306">
<p>The earliest possible date and time that Oracle Database allows, which is midnight, 01-JAN-4712 BCE (equivalent to Julian day 1) at UTC (0:0) time zone</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8352" headers="d126108e8303">
<pre dir="ltr">TIMESTAMP WITH LOCAL TIME ZONE
</pre></td>
<td class="cellalignment6271" headers="d126108e8352 d126108e8306">
<p>The earliest possible date and time that Oracle Database allows, which is midnight, 01-JAN-4712 BCE (equivalent to Julian day 1) at UTC (0:0) time zone</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8359" headers="d126108e8303">
<pre dir="ltr">INTERVAL YEAR TO MONTH
</pre></td>
<td class="cellalignment6271" headers="d126108e8359 d126108e8306">
<p><code class="codeph">INTERVAL &#39;0-0&#39; YEAR TO MONTH</code></p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8367" headers="d126108e8303">
<pre dir="ltr">INTERVAL DAY TO SECOND
</pre></td>
<td class="cellalignment6271" headers="d126108e8367 d126108e8306">
<p><code class="codeph">INTERVAL &#39;0 0:0:0&#39; DAY TO SECOND</code></p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8375" headers="d126108e8303">
<pre dir="ltr">FLOAT
</pre></td>
<td class="cellalignment6271" headers="d126108e8375 d126108e8306">
<p>0</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8382" headers="d126108e8303">
<pre dir="ltr">NUMBER
</pre></td>
<td class="cellalignment6271" headers="d126108e8382 d126108e8306">
<p>0</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8389" headers="d126108e8303">
<pre dir="ltr">DECIMAL
</pre></td>
<td class="cellalignment6271" headers="d126108e8389 d126108e8306">
<p>0</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8397" headers="d126108e8303">
<pre dir="ltr">RAW
</pre></td>
<td class="cellalignment6271" headers="d126108e8397 d126108e8306">
<p>Raw data with length set to 0. Note: the default value for a <code class="codeph">RAW</code> attribute is the same as that for a <code class="codeph">NULL RAW</code> attribute.</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8410" headers="d126108e8303">
<pre dir="ltr">VARCHAR2, NVARCHAR2
</pre></td>
<td class="cellalignment6271" headers="d126108e8410 d126108e8306">
<p><code class="codeph">OCIString</code> with 0 length and first char set to <code class="codeph">NULL</code>. The default value is the same as that of a <code class="codeph">NULL</code> string attribute.</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8425" headers="d126108e8303">
<pre dir="ltr">CHAR, NCHAR
</pre></td>
<td class="cellalignment6271" headers="d126108e8425 d126108e8306">
<p><code class="codeph">OCIString</code> with 0 length and first char set to <code class="codeph">NULL</code>. The default value is the same as that of a null string attribute.</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8437" headers="d126108e8303">
<pre dir="ltr">VARCHAR
</pre></td>
<td class="cellalignment6271" headers="d126108e8437 d126108e8306">
<p><code class="codeph">OCIString</code> with 0 length and first char set to <code class="codeph">NULL</code>. The default value is the same as that of a null string attribute.</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8449" headers="d126108e8303">
<pre dir="ltr">VARRAY
</pre></td>
<td class="cellalignment6271" headers="d126108e8449 d126108e8306">
<p>Collection with 0 elements</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8456" headers="d126108e8303">
<pre dir="ltr">NESTED TABLE
</pre></td>
<td class="cellalignment6271" headers="d126108e8456 d126108e8306">
<p>Table with 0 elements</p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8463" headers="d126108e8303">
<pre dir="ltr">CLOB, NCLOB
</pre></td>
<td class="cellalignment6271" headers="d126108e8463 d126108e8306">
<p>Empty <code class="codeph">CLOB</code></p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8472" headers="d126108e8303">
<pre dir="ltr">BLOB
</pre></td>
<td class="cellalignment6271" headers="d126108e8472 d126108e8306">
<p>Empty <code class="codeph">BLOB</code></p>
</td>
</tr>
<tr class="cellalignment6151">
<td class="cellalignment6270" id="d126108e8481" headers="d126108e8303">
<pre dir="ltr">BFILE
</pre></td>
<td class="cellalignment6271" headers="d126108e8481 d126108e8306">
<p>The user must initialize the <code class="codeph">BFILE</code> to a valid value by setting the directory object and file name.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
</div>
<a id="LNOCI16815"></a>
<div class="props_rev_3"><a id="GUID-0C40C7DE-5268-4445-A7CB-93489FA326D4"></a>
<h3 id="LNOCI-GUID-0C40C7DE-5268-4445-A7CB-93489FA326D4" class="sect3">About Freeing and Copying Objects</h3>
<div>
<p>Use <code class="codeph">OCIObjectFree()</code> to free memory allocated by <code class="codeph">OCIObjectNew()</code>.</p>
<p>An object instance can have attributes that are pointers to additional memory (secondary memory chunks).</p>
<p>Freeing an object deallocates all the memory allocated for the object, including the associated NULL indicator structure and any secondary memory chunks. You must neither explicitly free the secondary memory chunks nor reassign the pointers. Doing so can result in memory leaks and memory corruption. This procedure deletes a transient, but not a persistent, object before its lifetime expires. An application should use <code class="codeph">OCIObjectMarkDelete()</code> to delete a persistent object.</p>
<p>An application can copy one instance to another instance of the same type using <code class="codeph">OCIObjectCopy()</code>.</p>
<div class="infoboxnotealso" id="GUID-0C40C7DE-5268-4445-A7CB-93489FA326D4__GUID-356BC7F6-2300-4F35-9A0A-9C91493870AC">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci14oca.htm#GUID-C4F12ECA-651F-4620-8761-C8EAA9F09BF5">Memory Layout of an Instance</a></p>
</li>
<li>
<p><a href="oci18nav.htm#GUID-9F30DB5F-33CB-4CE6-8EFE-732B29E26727" title="This chapter describes the OCI navigational functions that are used to navigate through objects retrieved from an Oracle database.">OCI Navigational and Type Functions</a></p>
</li>
<li>
<p><a href="oci18nav004.htm#GUID-2EFD6F01-A02F-4C5B-B20F-1EF841249056" title="Creates a standalone instance.">OCIObjectNew()</a></p>
</li>
<li>
<p><a href="oci18nav005.htm#GUID-0814B033-C25C-4B4C-8968-4C0B86C2E744">OCIObjectFree()</a></p>
</li>
<li>
<p><a href="oci18nav002.htm#GUID-46497858-8E6C-4920-857C-83FFC8B0F7C1">OCIObjectMarkDelete()</a></p>
</li>
<li>
<p><a href="oci18nav004.htm#GUID-73C98F89-47E5-4B82-B869-731F30F011B0">OCIObjectCopy()</a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="LNOCI16816"></a>
<div class="props_rev_3"><a id="GUID-438ED438-C738-4035-96A1-B2E902C308F2"></a>
<h3 id="LNOCI-GUID-438ED438-C738-4035-96A1-B2E902C308F2" class="sect3">Object Reference and Type Reference</h3>
<div>
<p>The object extensions to OCI provide the application with the flexibility to access the contents of objects using their pointers or their references. OCI provides the function <a href="oci18nav004.htm#GUID-487BE97C-C3CE-49C6-9E8D-62BFCE7980F5" title="Returns a reference to a given persistent object.">OCIObjectGetObjectRef()</a> to return a reference to an object when given the object&#39;s pointer.</p>
<p>For applications that also want to access the type information of objects, OCI provides the function <a href="oci18nav003.htm#GUID-B65AA4FB-E4FF-4062-927E-4C62900D59C1" title="Retrieves a given property of an object.">OCIObjectGetProperty()</a> to return a reference to an object&#39;s type descriptor object (TDO), when given a pointer to the object.</p>
<p>When a persistent object based on an object table with system-generated <a id="d126108e8868" class="indexterm-anchor"></a>object identifiers (OIDs) is created, a reference to this object may be immediately obtained by using <a href="oci18nav004.htm#GUID-487BE97C-C3CE-49C6-9E8D-62BFCE7980F5" title="Returns a reference to a given persistent object.">OCIObjectGetObjectRef()</a>. But when a persistent object is based on an object view or on an object table with primary-key-based OIDs, all attributes belonging to the primary key must first be set before a reference can be obtained.</p>
</div>
</div>
<a id="LNOCI72706"></a><a id="LNOCI16817"></a>
<div class="props_rev_3"><a id="GUID-8173B469-7AE8-426B-AD60-A2937B417F7C"></a>
<h3 id="LNOCI-GUID-8173B469-7AE8-426B-AD60-A2937B417F7C" class="sect3">Create Objects Based on Object Views and Object Tables with Primary-Key-Based OIDs</h3>
<div>
<div class="section">
<p>Applications can use the <a href="oci18nav004.htm#GUID-2EFD6F01-A02F-4C5B-B20F-1EF841249056" title="Creates a standalone instance.">OCIObjectNew()</a> call to create objects, which are based on object views, or on object tables with primary-key-based <a id="d126108e9036" class="indexterm-anchor"></a>object identifiers (OIDs). Because object identifiers of such views and tables are based on attribute values, applications must then use <a href="oci18nav004.htm#GUID-D1353EB4-5619-45F4-A787-1559D70AEA91">OCIObjectSetAttr()</a> to set all attributes belonging to the primary key. Once the attribute values have been set, applications can obtain an object reference based on the attribute value by calling <a href="oci18nav004.htm#GUID-487BE97C-C3CE-49C6-9E8D-62BFCE7980F5" title="Returns a reference to a given persistent object.">OCIObjectGetObjectRef()</a>.</p>
<p>This process involves the following steps:</p>
</div>
<!-- class="section" -->
<ol>
<li><span>Pin the object view or object table on which the new object is to be based.</span></li>
<li><span>Create a new object using <a href="oci18nav004.htm#GUID-2EFD6F01-A02F-4C5B-B20F-1EF841249056" title="Creates a standalone instance.">OCIObjectNew()</a>, passing in the handle to the table or view obtained by the pin operation in Step 1.</span></li>
<li><span>Use <a href="oci18nav004.htm#GUID-D1353EB4-5619-45F4-A787-1559D70AEA91">OCIObjectSetAttr()</a> to fill in the necessary values for the object attributes. These must include those attributes that make up the user-defined object identifier for the object table or object view.</span></li>
<li><span>Use <a href="oci18nav004.htm#GUID-2EFD6F01-A02F-4C5B-B20F-1EF841249056" title="Creates a standalone instance.">OCIObjectNew()</a> to allocate an object reference, passing in the handle to the table or view obtained by the pin operation in Step 1.</span></li>
<li><span>Use <a href="oci18nav004.htm#GUID-487BE97C-C3CE-49C6-9E8D-62BFCE7980F5" title="Returns a reference to a given persistent object.">OCIObjectGetObjectRef()</a> to obtain the primary-key-based reference to the object, if necessary. If desired, return to Step 2 to create more objects.</span></li>
<li><span>Flush the newly created objects to the server.</span></li>
</ol>
<div class="example" id="GUID-8173B469-7AE8-426B-AD60-A2937B417F7C__BGBFGJII">
<p class="titleinexample">Example 11-7 Creating a New Object for an Object View</p>
<pre dir="ltr">void object_view_new ()
{
void     *table;
OCIRef   *pkref;
void     *object;
OCIType  *emptdo;
...
/* Set up the service context, error handle and so on.. */
...
/* Pin the object view */
OCIObjectPinTable(envp,errorp,svctx, &#34;HR&#34;, strlen(&#34;HR&#34;), &#34;EMP_VIEW&#34;,
    strlen(&#34;EMP_VIEW&#34;),(void  *) 0, OCI_DURATION_SESSION, (void  **) &amp;table);

/* Create a new object instance  */
OCIObjectNew(envp, errorp, svctx, OCI_TYPECODE_OBJECT,(OCIType *)emptdo, table,
OCI_DURATION_SESSION,FALSE,&amp;object);

/* Populate the attributes of &#34;object&#34; */
OCIObjectSetAttr(...);
...
/* Allocate an object reference */
OCIObjectNew(envp, errorp, svctx, OCI_TYPECODE_REF, (OCIType *)0, (void  *)0,
    OCI_DURATION_SESSION,TRUE,&amp;pkref);

/* Get the reference using OCIObjectGetObjectRef */
OCIObjectGetObjectRef(envp,errorp,object,pkref);
...
/* Flush new objects to server */
...
} /* end function */
</pre></div>
<!-- class="example" -->
<div class="section">
<p><a href="oci11obj.htm#GUID-8173B469-7AE8-426B-AD60-A2937B417F7C__BGBFGJII">Example 11-7</a> shows how this process might be implemented to create a new object for the <code class="codeph">emp_view</code> object view in the <code class="codeph">HR</code> schema.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="LNOCI16818"></a>
<div class="props_rev_3"><a id="GUID-3F14366D-D427-4393-A354-4EC7D6E8712F"></a>
<h3 id="LNOCI-GUID-3F14366D-D427-4393-A354-4EC7D6E8712F" class="sect3">Error Handling in Object Applications</h3>
<div>
<p>Is like any other OCI application.</p>
<p>Error handling in OCI applications is the same whether or not the application uses objects.</p>
<div class="infoboxnotealso" id="GUID-3F14366D-D427-4393-A354-4EC7D6E8712F__GUID-154EE2B2-23A0-45A8-A74A-A9B75781EAFE">
<p class="notep1">See Also:</p>
<p><a href="oci02bas.htm#GUID-39339E95-A79E-43BD-B57E-4DB536CB3475" title="OCI function calls have a set of return codes.">Error Handling in OCI</a> for more information about function return codes and error messages</p>
</div>
</div>
</div>
</div>
<a id="LNOCI16819"></a>
<div class="props_rev_3"><a id="GUID-CDE560AC-9FE0-4393-9EDC-0648DB38C5C9"></a>
<h2 id="LNOCI-GUID-CDE560AC-9FE0-4393-9EDC-0648DB38C5C9" class="sect2">About Type Inheritance</h2>
<div>
<p>Type inheritance of objects has many similarities to inheritance in C++ and Java.</p>
<p>You can create an object type as a <span class="italic">subtype</span> of an existing object type. The subtype is said to inherit all the attributes and methods (member functions and procedures) of the <span class="italic">supertype</span>, which is the original type. Only single inheritance is supported; an object cannot have more than one supertype. The subtype can add new attributes and methods to the ones it inherits. It can also override (redefine the implementation) of any of its inherited methods. A subtype is said to <span class="italic">extend</span> (that is, inherit from) its supertype.</p>
<p>As an example, a type <code class="codeph">Person_t</code> can have a subtype <code class="codeph">Student_t</code> and a subtype <code class="codeph">Employee_t</code>. In turn, <code class="codeph">Student_t</code> can have its own subtype, <code class="codeph">PartTimeStudent_t</code>. A type declaration must have the flag <code class="codeph">NOT</code> <code class="codeph">FINAL</code> so that it can have subtypes. The default is <code class="codeph">FINAL</code>, which means that the type can have no subtypes.</p>
<p>All types discussed so far in this chapter are <code class="codeph">FINAL</code>. All types in applications developed before Oracle Database Release 9.0 are <code class="codeph">FINAL</code>. A type that is <code class="codeph">FINAL</code> can be altered to be <code class="codeph">NOT</code> <code class="codeph">FINAL</code>. A <code class="codeph">NOT</code> <code class="codeph">FINAL</code> type with no subtypes can be altered to be <code class="codeph">FINAL</code>. <code class="codeph">Person_t</code> is declared as <code class="codeph">NOT</code> <code class="codeph">FINAL</code> for our example:</p>
<pre dir="ltr">CREATE TYPE Person_t AS OBJECT
( ssn NUMBER,
  name VARCHAR2(30),
  address VARCHAR2(100)) NOT FINAL;
</pre>
<p>A subtype inherits all the attributes and methods declared in its supertype. It can also declare new attributes and methods, which must have different names than those of the supertype. The keyword <code class="codeph">UNDER</code> identifies the supertype, like this:</p>
<pre dir="ltr">CREATE TYPE Student_t UNDER Person_t
( deptid NUMBER,
  major  VARCHAR2(30)) NOT FINAL;
</pre>
<p>The newly declared attributes <code class="codeph">deptid</code> and <code class="codeph">major</code> belong to the subtype <code class="codeph">Student_t</code>. The subtype <code class="codeph">Employee_t</code> is declared as, for example:</p>
<pre dir="ltr">CREATE TYPE Employee_t UNDER Person_t
( empid NUMBER,
  mgr   VARCHAR2(30));
</pre>
<p>See <a href="oci15ott.htm#GUID-4009C803-B151-4836-AF6F-741E9F072466" title="To support type inheritance of objects, OTT generates a C struct to represent an object subtype by declaring the inherited attributes in an encapsulated struct with the special name &#34;_super&#34;, before declaring the new attributes.">OTT Support for Type Inheritance</a> for the resulting structs generated by OTT for this example.</p>
<p>This subtype <code class="codeph">Student_t</code> can have its own subtype, such as <code class="codeph">PartTimeStudent_t</code>:</p>
<pre dir="ltr">CREATE TYPE PartTimeStudent_t UNDER Student_t
( numhours NUMBER) ;
</pre>
<div class="p">This section includes the following topics:
<ul style="list-style-type: disc;">
<li>
<p><a href="oci11obj.htm#GUID-B6C504E2-F569-40BC-85DB-E2B67290E947">Substitutability</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-0BB558F8-6417-478F-A70C-AFC67A6F000E">NOT INSTANTIABLE Types and Methods</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-F3822F4A-1873-4242-82F6-2A7554D07E64" title="Lists the calls that support type inheritance.">OCI Support for Type Inheritance</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-35D41A85-9417-4813-8DD6-544868C89D0B" title="The Object Type Translator (OTT) supports type inheritance of objects by declaring first the inherited attributes in an encapsulated struct called &#34;_super&#34;, followed by the new declared attributes.">OTT Support for Type Inheritance</a></p>
</li>
</ul>
</div>
<div class="infoboxnotealso" id="GUID-CDE560AC-9FE0-4393-9EDC-0648DB38C5C9__GUID-644C72BB-56F1-49C2-9CAD-B61DE1E643AA">
<p class="notep1">See Also:</p>
<p><a class="olink ADOBJ00205" target="_blank" href="../ADOBJ/adobjbas.htm#ADOBJ00205"><span><cite>Oracle Database Object-Relational Developer&#39;s Guide</cite></span></a> for a more complete discussion about type inheritance</p>
</div>
</div>
<a id="LNOCI16820"></a>
<div class="props_rev_3"><a id="GUID-B6C504E2-F569-40BC-85DB-E2B67290E947"></a>
<h3 id="LNOCI-GUID-B6C504E2-F569-40BC-85DB-E2B67290E947" class="sect3">Substitutability</h3>
<div>
<p>The benefits of <a class="olink ADOBJ7633" target="_blank" href="../ADOBJ/glossary.htm#ADOBJ7633"><span class="italic">polymorphism</span></a> derive partially from the property <span class="italic">substitutability</span>. Substitutability allows a value of some subtype to be used by code originally written for the supertype, without any specific knowledge of the subtype being needed in advance. The subtype value behaves to the surrounding code, just like a value of the supertype would, even if it perhaps uses different mechanisms within its specializations of methods.</p>
<p>Instance substitutability refers to the ability to use an object value of a subtype in a context declared in terms of a supertype. <code class="codeph">REF</code> substitutability refers to the ability to use a <code class="codeph">REF</code> to a subtype in a context declared in terms of a <code class="codeph">REF</code> to a supertype.</p>
<p><code class="codeph">REF</code> type attributes are substitutable; that is, an attribute defined as <code class="codeph">REF</code> T can hold a <code class="codeph">REF</code> to an instance of T or any of its subtypes.</p>
<p>Object type attributes are substitutable; an attribute defined to be of (an object) type T can hold an instance of T or any of its subtypes.</p>
<p>Collection element types are substitutable; if you define a collection of elements of type T, it can hold instances of type T and any of its subtypes. Here is an example of object attribute substitutability:</p>
<pre dir="ltr">CREATE TYPE Book_t AS OBJECT 
( title VARCHAR2(30),
  author Person_t     /* substitutable */);
</pre>
<p>Thus, a <code class="codeph">Book_t</code> instance can be created by specifying a title string and a <code class="codeph">Person_t</code> (or any subtype of <code class="codeph">Person_t</code>) instance:</p>
<pre dir="ltr">Book_t(&#39;My Oracle Experience&#39;,
        Employee_t(12345, &#39;Joe&#39;, &#39;SF&#39;, 1111, NULL))
</pre></div>
</div>
<a id="LNOCI16821"></a>
<div class="props_rev_3"><a id="GUID-0BB558F8-6417-478F-A70C-AFC67A6F000E"></a>
<h3 id="LNOCI-GUID-0BB558F8-6417-478F-A70C-AFC67A6F000E" class="sect3">NOT INSTANTIABLE Types and Methods</h3>
<div>
<p>A type can be declared to be <code class="codeph">NOT</code> <code class="codeph">INSTANTIABLE</code>, which means that there is no constructor (default or user-defined) for the type. Thus, it is not possible to construct instances of this type. The typical usage would be to define instantiable subtypes for such a type. Here is how this property is used:</p>
<pre dir="ltr">CREATE TYPE Address_t AS OBJECT(...) NOT INSTANTIABLE NOT FINAL;
CREATE TYPE USAddress_t UNDER Address_t(...);
CREATE TYPE IntlAddress_t UNDER Address_t(...);
</pre>
<p>A method of a type can be declared to be <code class="codeph">NOT</code> <code class="codeph">INSTANTIABLE</code>. Declaring a method as <code class="codeph">NOT</code> <code class="codeph">INSTANTIABLE</code> means that the type is not providing an implementation for that method. Further, a type that contains any <code class="codeph">NOT</code> <code class="codeph">INSTANTIABLE</code> methods must necessarily be declared as <code class="codeph">NOT</code> <code class="codeph">INSTANTIABLE</code>. For example:</p>
<pre dir="ltr">CREATE TYPE T AS OBJECT
(
  x NUMBER,
  NOT INSTANTIABLE MEMBER FUNCTION func1() RETURN NUMBER
) NOT INSTANTIABLE NOT FINAL;
</pre>
<p>A subtype of a <code class="codeph">NOT</code> <code class="codeph">INSTANTIABLE</code> type can override any of the <code class="codeph">NOT</code> <code class="codeph">INSTANTIABLE</code> methods of the supertype and provide concrete implementations. If there are any <code class="codeph">NOT</code> <code class="codeph">INSTANTIABLE</code> methods remaining, the subtype must also necessarily be declared as <code class="codeph">NOT</code> <code class="codeph">INSTANTIABLE</code>.</p>
<p>A <code class="codeph">NOT</code> <code class="codeph">INSTANTIABLE</code> subtype can be defined under an instantiable supertype. Declaring a <code class="codeph">NOT</code> <code class="codeph">INSTANTIABLE</code> type to be <code class="codeph">FINAL</code> is not useful and is not allowed.</p>
</div>
</div>
<a id="LNOCI16822"></a>
<div class="props_rev_3"><a id="GUID-F3822F4A-1873-4242-82F6-2A7554D07E64"></a>
<h3 id="LNOCI-GUID-F3822F4A-1873-4242-82F6-2A7554D07E64" class="sect3">OCI Support for Type Inheritance</h3>
<div>
<p>Lists the calls that support type inheritance.</p>
<div class="p">The following calls support type inheritance:
<ul style="list-style-type: disc;">
<li>
<p><a href="oci11obj.htm#GUID-526C7873-DC33-481B-99D8-38B32F1CC8EA">OCIDescribeAny()</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-5247AD1D-22A0-4677-B078-3ECD8ACF4C1C" title="OCI bind functions support REF, instance, and collection element substitutability (subtype instances can be passed in where supertype is expected).">Bind and Define Functions</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-1E9EB858-DE41-4A8D-8A6B-AAF243716B8E">OCIObjectGetTypeRef()</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-303EC2E8-F01C-46A1-A331-EAFDF0F03C50">OCIObjectCopy()</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-AC5360EB-7E3A-460F-988B-45B70260EE7C">OCICollAssignElem()</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-D26E3FFD-7C2F-4CC5-BEB5-3502CEE1FA4C">OCICollAppend()</a></p>
</li>
<li>
<p><a href="oci11obj.htm#GUID-DE1ECBD6-306A-451A-8FF7-CDAEA6489938">OCICollGetElem()</a></p>
</li>
</ul>
</div>
</div>
<a id="LNOCI16823"></a>
<div class="props_rev_3"><a id="GUID-526C7873-DC33-481B-99D8-38B32F1CC8EA"></a>
<h4 id="LNOCI-GUID-526C7873-DC33-481B-99D8-38B32F1CC8EA" class="sect4">OCIDescribeAny()</h4>
<div>
<p>The <a href="oci16rel003.htm#GUID-AE9F73FB-DCC1-401E-8151-A8A89059163A" title="Describes existing schema and subschema objects.">OCIDescribeAny()</a> function provides information specific to inherited types. Additional attributes have been added for the properties of inherited types. For example, you can get the supertype of a type.</p>
<div class="infoboxnotealso" id="GUID-526C7873-DC33-481B-99D8-38B32F1CC8EA__GUID-26924988-0B03-4E7F-BA3E-DDC42303962D">
<p class="notep1">See Also:</p>
<p><a href="oci06des.htm#GUID-6607CBC1-27BB-425D-A54C-0DDD098D1684__G453808" title="This table has 3 columns. Column 1 is the attribute name, column 2 is its description, and column 3 is the corresponding attribute data type.">Table 6-7</a> and <a href="oci06des.htm#GUID-9D9DBD87-CFE9-415F-A2DD-85B0B01F65EE__G454036" title="This table has 3 columns. Column 1 is the attribute name, column 2 is its description, and column 3 is the corresponding attribute data type.">Table 6-9</a> for attributes that <a href="oci16rel003.htm#GUID-AE9F73FB-DCC1-401E-8151-A8A89059163A" title="Describes existing schema and subschema objects.">OCIDescribeAny()</a> can use to describe existing schema and subschema objects</p>
</div>
</div>
</div>
<a id="LNOCI16824"></a>
<div class="props_rev_3"><a id="GUID-5247AD1D-22A0-4677-B078-3ECD8ACF4C1C"></a>
<h4 id="LNOCI-GUID-5247AD1D-22A0-4677-B078-3ECD8ACF4C1C" class="sect4">Bind and Define Functions</h4>
<div>
<p>OCI bind functions support <code class="codeph">REF</code>, instance, and collection element substitutability (subtype instances can be passed in where supertype is expected).</p>
<p>There are no changes to the OCI bind interface, because all type checking and conversions are done on the server side.</p>
<p>OCI define functions also support substitutability (subtype instances can be fetched into define variables declared to hold the supertype). However, this might require the system to resize the memory to hold the subtype instance.</p>
<div class="infobox-note" id="GUID-5247AD1D-22A0-4677-B078-3ECD8ACF4C1C__GUID-C4B560AE-62C0-4033-90D7-C7DE56BE8164">
<p class="notep1">Note:</p>
<p>The client program must use objects that are allocated out of the object cache (and are thus resizable) in such scenarios.</p>
</div>
<p>The client should not use a struct (allocated on the stack) as the define variable if the value is potentially polymorphic.</p>
<div class="infoboxnotealso" id="GUID-5247AD1D-22A0-4677-B078-3ECD8ACF4C1C__GUID-46BB6E07-87C2-42A4-AF15-686CB7C01194">
<p class="notep1">See Also:</p>
<p><a href="oci12oty.htm#GUID-C62AEE74-0CC5-4FAB-A91F-997F71C49C2C" title="This chapter describes the purpose and structure of each of the data types that can be manipulated by the OCI data type mapping and manipulation functions.">Object-Relational Data Types in OCI</a> for details of the bind and define processes</p>
</div>
</div>
</div>
<a id="LNOCI16825"></a>
<div class="props_rev_3"><a id="GUID-1E9EB858-DE41-4A8D-8A6B-AAF243716B8E"></a>
<h4 id="LNOCI-GUID-1E9EB858-DE41-4A8D-8A6B-AAF243716B8E" class="sect4">OCIObjectGetTypeRef()</h4>
<div>
<p>The <a href="oci18nav004.htm#GUID-9C83F766-C8A3-48A0-A7D5-2BF4037C2B32">OCIObjectGetTypeRef()</a> function returns the <code class="codeph">REF</code> of the TDO of the most specific type of the input object. This operation returns an error if the user does not have privileges on the most specific type.</p>
</div>
</div>
<a id="LNOCI16826"></a>
<div class="props_rev_3"><a id="GUID-303EC2E8-F01C-46A1-A331-EAFDF0F03C50"></a>
<h4 id="LNOCI-GUID-303EC2E8-F01C-46A1-A331-EAFDF0F03C50" class="sect4">OCIObjectCopy()</h4>
<div>
<p>The <a href="oci18nav004.htm#GUID-73C98F89-47E5-4B82-B869-731F30F011B0">OCIObjectCopy()</a> function copies the contents of the source instance to the target instance. The source and target instances must be of the same type. It is not possible to copy between a supertype and a subtype.</p>
<p>Similarly, the <code class="codeph">tdo</code> argument must describe the same object type as the source and target objects, and must not refer to a subtype or supertype of the source and target objects.</p>
</div>
</div>
<a id="LNOCI16827"></a>
<div class="props_rev_3"><a id="GUID-AC5360EB-7E3A-460F-988B-45B70260EE7C"></a>
<h4 id="LNOCI-GUID-AC5360EB-7E3A-460F-988B-45B70260EE7C" class="sect4">OCICollAssignElem()</h4>
<div>
<p>The input element can be an instance of the subtype of the declared type. If the collection is of type <code class="codeph">Person_t</code>, you can use the <a href="oci19map001.htm#GUID-BDA5C09D-9470-4204-9A56-3070F64D8E91">OCICollAssignElem()</a> function to assign an <code class="codeph">Employee_t</code> instance as an element of the collection.</p>
</div>
</div>
<a id="LNOCI16828"></a>
<div class="props_rev_3"><a id="GUID-D26E3FFD-7C2F-4CC5-BEB5-3502CEE1FA4C"></a>
<h4 id="LNOCI-GUID-D26E3FFD-7C2F-4CC5-BEB5-3502CEE1FA4C" class="sect4">OCICollAppend()</h4>
<div>
<p>The input element can be an instance of the subtype of the declared type; if the collection is of type <code class="codeph">Person_t</code>, you can use the <a href="oci19map001.htm#GUID-1F50303F-38EB-4CF5-A333-A75E01255585">OCICollAppend()</a> function to append an <code class="codeph">Employee_t</code> instance to the collection.</p>
</div>
</div>
<a id="LNOCI16829"></a>
<div class="props_rev_3"><a id="GUID-DE1ECBD6-306A-451A-8FF7-CDAEA6489938"></a>
<h4 id="LNOCI-GUID-DE1ECBD6-306A-451A-8FF7-CDAEA6489938" class="sect4">OCICollGetElem()</h4>
<div>
<p>The collection element returned could be an instance of the subtype of the declared type; if the collection is of type <code class="codeph">Person_t</code>, you can use the <a href="oci19map001.htm#GUID-B28B3D65-EB7B-44BD-ADBA-DAC0C21DE90F" title="Gets a pointer to the element at the given index.">OCICollGetElem()</a> function to get a pointer to an element, such as an <code class="codeph">Employee_t</code> instance, in this collection.</p>
</div>
</div>
</div>
<a id="LNOCI16830"></a>
<div class="props_rev_3"><a id="GUID-35D41A85-9417-4813-8DD6-544868C89D0B"></a>
<h3 id="LNOCI-GUID-35D41A85-9417-4813-8DD6-544868C89D0B" class="sect3">OTT Support for Type Inheritance</h3>
<div>
<p>The Object Type Translator (OTT) supports type inheritance of objects by declaring first the inherited attributes in an encapsulated struct called &#34;_super&#34;, followed by the new declared attributes.</p>
<p>This is done because C does not support type inheritance.</p>
<div class="infoboxnotealso" id="GUID-35D41A85-9417-4813-8DD6-544868C89D0B__GUID-5623E1AC-0CA2-40A3-9BA1-34F3319041D8">
<p class="notep1">See Also:</p>
<p><a href="oci15ott.htm#GUID-4009C803-B151-4836-AF6F-741E9F072466" title="To support type inheritance of objects, OTT generates a C struct to represent an object subtype by declaring the inherited attributes in an encapsulated struct with the special name &#34;_super&#34;, before declaring the new attributes.">OTT Support for Type Inheritance</a> for an example and discussion</p>
</div>
</div>
</div>
</div>
<a id="LNOCI16831"></a>
<div class="props_rev_3"><a id="GUID-34071CB4-805F-4DFE-B2F3-2E51A5B312F9"></a>
<h2 id="LNOCI-GUID-34071CB4-805F-4DFE-B2F3-2E51A5B312F9" class="sect2">About Type Evolution</h2>
<div>
<p>Adding, dropping, and modifying type attributes are supported. This concept is known as <span class="italic">type evolution</span>.</p>
<p>It is discussed in the <a class="olink ADOBJ00603" target="_blank" href="../ADOBJ/adobjadv.htm#ADOBJ00603"><span><cite>Oracle Database Object-Relational Developer&#39;s Guide</cite></span></a>.</p>
<p><code class="codeph">OCIDescribeAny()</code> returns information about the latest version of the requested type if the type of the input object is <code class="codeph">OCI_OTYPE_NAME</code>, and the type of the described object is <code class="codeph">OCI_PTYPE_TYPE</code>, that is, if the name input to <code class="codeph">OCIDescribeAny()</code> is a type name.</p>
<div class="infoboxnotealso" id="GUID-34071CB4-805F-4DFE-B2F3-2E51A5B312F9__GUID-D241C4E8-B81C-4EA4-A30D-2EC36C9A9ECA">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="oci18nav006.htm#GUID-16B5008B-C3EC-43C8-921B-6D93E76B4176">OCITypeArrayByName()</a> and <a href="oci18nav006.htm#GUID-3534AABC-E347-4BC7-B220-0CAECDC9ECE7" title="Gets the most current version of an existing TDO.">OCITypeByName()</a>. To access type information, use these functions and <code class="codeph">OCIDescribeAny()</code></p>
</li>
<li>
<p><a href="oci14oca.htm#GUID-35CBBA0E-CAC9-4BA3-99F7-77D613141661" title="When type information is requested based on the type name, OCI returns the type descriptor object (TDO) corresponding to the latest version of the type.">Type Evolution and the Object Cache</a> for a discussion of the effect of type evolution on the object cache</p>
</li>
<li>
<p><a href="oci16rel003.htm#GUID-AE9F73FB-DCC1-401E-8151-A8A89059163A" title="Describes existing schema and subschema objects.">OCIDescribeAny()</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment6150">
<tr>
<td class="cellalignment6162">
<table class="cellalignment6155">
<tr>
<td class="cellalignment6154"><a href="oci10new.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment6154"><a href="oci12oty.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment6164">
<table class="cellalignment6153">
<tr>
<td class="cellalignment6154"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment6154"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment6154"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment6154"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment6154"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment6154"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>