<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-197"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Managing%20a%20Distributed%20Database"></a><title>Managing a Distributed Database</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="Managing a distributed database includes tasks such as managing global names, managing database links, and creating location and statement transparency."/>
<meta name="keywords" content="databases, administration of distributed, administration, distributed databases, global object names, distributed databases, global database names, forming distributed database names, forming global database names, enforcing global naming, database links, querying, GLOBAL_NAME view, using to determine global database name, changing the domain, creating, creating database links, links, obtaining necessary privileges, privileges, specifying types, private, CREATE DATABASE LINK statement, public, global database links, users, specifying, fixed user database links, fixed user, connected user, connected user database links, current user, service names within link names, service names used within link names, service names, database links and, connection qualifiers, shared, networks, connections, minimizing, minimizing network connections, shared database links, determining whether to use, creating shared, configuring, dedicated servers, creating links to, SERVER parameter, net service name, shared servers, creating links to, managing, closing, closing database links, dropping, limiting number of connections, OPEN_LINKS initialization parameter, initialization parameters, OPEN_LINKS, viewing, listing, listing database links, views, DBA_DB_LINKS, DBA_DB_LINKS view, ALL_DB_LINKS view, USER_DB_LINKS view, data dictionary USER views, connections, determining open, V$DBLINK view, GV$DBLINK view, location transparency, location transparency in distributed databases, creating using views, creating using synonyms, synonyms, definition and creation, schema objects, referencing with synonyms, examples, security, using synonyms, managing with synonyms, managing privileges in remote database, remote object security, procedures, using procedures, stored procedures, managing with procedures, managing privileges, statement transparency in distributed database, joins, statement transparency in distributed databases, aggregate functions, subqueries, SELECT statement, FOR UPDATE clause and location transparency, remote data, updating, restrictions, LONG columns, LONG RAW columns, creating, scenarios, scenarios, public fixed user database links, fixed user scenario, fixed user, public database links, connected user scenarios, shared connected user scenario, current user scenario, global users"/>
<meta name="dcterms.created" content="2017-07-10T12:24:11Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Administrator&rsquo;s Guide"/>
<meta name="dcterms.identifier" content="E41484-15"/>
<meta name="dcterms.isVersionOf" content="ADMIN"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2001, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="ds_concepts.htm" title="Previous" type="text/html"/>
<link rel="Next" href="ds_appdev.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41484-15.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-E9D35ED6-24CA-4F6B-9277-D7F9E6BE3116"></a> <span id="PAGE" style="display:none;">41/59</span> <!-- End Header -->
<a id="ADMIN029"></a>
<h1 id="ADMIN-GUID-E9D35ED6-24CA-4F6B-9277-D7F9E6BE3116" class="sect1"><span class="enumeration_chapter">32</span> Managing a Distributed Database</h1>
<p>Managing a distributed database includes tasks such as managing global names, managing database links, and creating location and statement transparency.</p>
<a id="ADMIN12144"></a>
<div class="props_rev_3"><a id="GUID-F61EEA59-5794-4C5F-859D-2539A288E71E"></a>
<h2 id="ADMIN-GUID-F61EEA59-5794-4C5F-859D-2539A288E71E" class="sect2"><span class="enumeration_section">32.1</span> Managing Global Names in a Distributed System</h2>
<p>In a distributed database system, each database should have a unique <span class="bold">global database name</span>. Global database names uniquely identify a database in the system. A primary administration task in a distributed system is managing the creation and alteration of global database names.</p>
<a id="ADMIN12145"></a>
<div class="props_rev_3"><a id="GUID-7924DF25-5BF2-45C8-B382-1603559421E7"></a>
<h3 id="ADMIN-GUID-7924DF25-5BF2-45C8-B382-1603559421E7" class="sect3"><span class="enumeration_section">32.1.1</span> Understanding How Global Database Names Are Formed</h3>
<div>
<p>A global database name is formed from two components: a database name and a domain.</p>
<p>The database name and the domain name are determined by the following initialization parameters at database creation:</p>
<div class="tblformal" id="GUID-7924DF25-5BF2-45C8-B382-1603559421E7__GUID-C6D3895D-D511-4298-87A6-F47DAD6C39DC">
<table class="cellalignment1849" summary="Column 1 contains the component of the global database name; column 2 contains the corresponding DB_NAME initialization parameter; column 3 contains the requirements for the parameter; column 4 presents an example of the parameter setting.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1897" id="d243260e221">Component</th>
<th class="cellalignment1897" id="d243260e224">Parameter</th>
<th class="cellalignment1897" id="d243260e227">Requirements</th>
<th class="cellalignment1897" id="d243260e230">Example</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1899" id="d243260e235" headers="d243260e221">
<p>Database name</p>
</td>
<td class="cellalignment1899" headers="d243260e235 d243260e224">
<p><code class="codeph">DB_NAME</code></p>
</td>
<td class="cellalignment1899" headers="d243260e235 d243260e227">
<p>Must be 30 characters or less.</p>
</td>
<td class="cellalignment1899" headers="d243260e235 d243260e230">
<p><code class="codeph">sales</code></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1899" id="d243260e252" headers="d243260e221">
<p>Domain containing the database</p>
</td>
<td class="cellalignment1899" headers="d243260e252 d243260e224">
<p><code class="codeph">DB_DOMAIN</code></p>
</td>
<td class="cellalignment1899" headers="d243260e252 d243260e227">
<p>Must follow standard Internet conventions. Levels in domain names must be separated by dots and the order of domain names is from leaf to root, left to right.</p>
</td>
<td class="cellalignment1899" headers="d243260e252 d243260e230">
<p><code class="codeph">us.example.com</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>These are examples of valid global database names:</p>
<div class="tblformal" id="GUID-7924DF25-5BF2-45C8-B382-1603559421E7__GUID-42E2F7D9-79B4-4793-A187-8660178BCA7F">
<table class="cellalignment1849" summary="Column 1 contains a sample setting for the DB_NAME initialization parameter; column 2 contains a sample setting for the DB_DOMAIN initialization parameter; column 3 contains the resulting global database name.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1858" id="d243260e279">DB_NAME</th>
<th class="cellalignment1858" id="d243260e282">DB_DOMAIN</th>
<th class="cellalignment1858" id="d243260e285">Global Database Name</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1861" id="d243260e290" headers="d243260e279">
<p><code class="codeph">sales</code></p>
</td>
<td class="cellalignment1861" headers="d243260e290 d243260e282">
<p><code class="codeph">example.com</code></p>
</td>
<td class="cellalignment1861" headers="d243260e290 d243260e285">
<p><code class="codeph">sales.example.com</code></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1861" id="d243260e306" headers="d243260e279">
<p><code class="codeph">sales</code></p>
</td>
<td class="cellalignment1861" headers="d243260e306 d243260e282">
<p><code class="codeph">us.example.com</code></p>
</td>
<td class="cellalignment1861" headers="d243260e306 d243260e285">
<p><code class="codeph">sales.us.example.com</code></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1861" id="d243260e322" headers="d243260e279">
<p><code class="codeph">mktg</code></p>
</td>
<td class="cellalignment1861" headers="d243260e322 d243260e282">
<p><code class="codeph">us.example.com</code></p>
</td>
<td class="cellalignment1861" headers="d243260e322 d243260e285">
<p><code class="codeph">mktg.us.example.com</code></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1861" id="d243260e338" headers="d243260e279">
<p><code class="codeph">payroll</code></p>
</td>
<td class="cellalignment1861" headers="d243260e338 d243260e282">
<p><code class="codeph">example.org</code></p>
</td>
<td class="cellalignment1861" headers="d243260e338 d243260e285">
<p><code class="codeph">payroll.example.org</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>The <code class="codeph">DB_DOMAIN</code> initialization parameter is only important at database creation time when it is used, together with the <code class="codeph">DB_NAME</code> parameter, to form the database global name. At this point, the database global name is stored in the data dictionary. You must change the global name using an <code class="codeph">ALTER DATABASE</code> statement, <span class="italic">not</span> by altering the <code class="codeph">DB_DOMAIN</code> parameter in the initialization parameter file. It is good practice, however, to change the <code class="codeph">DB_DOMAIN</code> parameter to reflect the change in the domain name before the next database startup.</p>
</div>
</div>
<a id="ADMIN12146"></a>
<div class="props_rev_3"><a id="GUID-7DFD48F8-1F97-4D46-9179-0C7FBAC38801"></a>
<h3 id="ADMIN-GUID-7DFD48F8-1F97-4D46-9179-0C7FBAC38801" class="sect3"><span class="enumeration_section">32.1.2</span> Determining Whether Global Naming Is Enforced</h3>
<div>
<p>The name that you give to a link on the local database depends on whether the local database enforces global naming.</p>
<div class="section">
<p>If the local database enforces global naming, then you must use the remote database global database name as the name of the link. For example, if you are connected to the local <code class="codeph">hq</code> server and want to create a link to the remote <code class="codeph">mfg</code> database, and the local database enforces global naming, then you must use the <code class="codeph">mfg</code> global database name as the link name.</p>
<p>You can also use service names as part of the database link name. For example, if you use the service names <code class="codeph">sn1</code> and <code class="codeph">sn2</code> to connect to database <code class="codeph">hq.example.com</code>, and global naming is enforced, then you can create the following link names to <code class="codeph">hq</code>:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">HQ.EXAMPLE.COM@SN1</code></p>
</li>
<li>
<p><code class="codeph">HQ.EXAMPLE.COM@SN2</code></p>
<div class="infoboxnotealso" id="GUID-7DFD48F8-1F97-4D46-9179-0C7FBAC38801__GUID-E90CAA8B-36EB-4D71-B06C-52613EE1FB55">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="ds_admin.htm#GUID-15C83763-9F18-4670-B14A-6557F123060A" title="In some situations, you may want to have several database links of the same type (for example, public) that point to the same remote database, yet establish connections to the remote database using different communication pathways.">Using Connection Qualifiers to Specify Service Names Within Link Names</a>&#34;</span> for more information about using services names in link names</p>
</div>
</li>
</ul>
<p>To determine whether global naming is enforced on a database, either examine the database initialization parameter file or query the <code class="codeph">V$PARAMETER</code> view. For example, to see whether global naming is enforced on <code class="codeph">mfg</code>, you could start a session on <code class="codeph">mfg</code> and then create and execute the following <code class="codeph">globalnames.sql</code> script (sample output included):</p>
<pre dir="ltr">COL NAME FORMAT A12
COL VALUE FORMAT A6
SELECT NAME, VALUE FROM V$PARAMETER
   WHERE NAME = &#39;global_names&#39;
/

SQL&gt; @globalnames

NAME         VALUE
------------ ------
global_names FALSE
</pre></div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12147"></a>
<div class="props_rev_3"><a id="GUID-83B325B7-2991-42D4-900B-C93A41428547"></a>
<h3 id="ADMIN-GUID-83B325B7-2991-42D4-900B-C93A41428547" class="sect3"><span class="enumeration_section">32.1.3</span> Viewing a Global Database Name</h3>
<div>
<p>Use the data dictionary view <code class="codeph">GLOBAL_NAME</code> to view the database global name.</p>
<div class="section">
<p>For example, issue the following:</p>
<pre dir="ltr">SELECT * FROM GLOBAL_NAME;

GLOBAL_NAME
-------------------------------------------------------------------------------
SALES.EXAMPLE.COM
</pre></div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12148"></a>
<div class="props_rev_3"><a id="GUID-C9E2C1D4-CB48-4012-8779-E87745F7EC79"></a>
<h3 id="ADMIN-GUID-C9E2C1D4-CB48-4012-8779-E87745F7EC79" class="sect3"><span class="enumeration_section">32.1.4</span> Changing the Domain in a Global Database Name</h3>
<div>
<p>Use the <code class="codeph">ALTER DATABASE</code> statement to change the domain in a database global name.</p>
<div class="section">
<p>After the database is created, changing the initialization parameter <code class="codeph">DB_DOMAIN</code> has no effect on the global database name or on the resolution of database link names.</p>
<p>The following example shows the syntax for the renaming statement, where <span class="italic">database</span> is a database name and <span class="italic">domain</span> is the network domain:</p>
<pre dir="ltr">ALTER DATABASE RENAME GLOBAL_NAME TO <span class="italic">database.domain</span>;
</pre>
<p>Use the following procedure to change the domain in a global database name:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Determine the current global database name. For example, issue:</span>
<div>
<pre dir="ltr">SELECT * FROM GLOBAL_NAME;

GLOBAL_NAME
----------------------------------------------------------------------------
SALES.EXAMPLE.COM
</pre></div>
</li>
<li class="stepexpand"><span>Rename the global database name using an <code class="codeph">ALTER DATABASE</code> statement. For example, enter:</span>
<div>
<pre dir="ltr">ALTER DATABASE RENAME GLOBAL_NAME TO sales.us.example.com;
</pre></div>
</li>
<li class="stepexpand"><span>Query the <code class="codeph">GLOBAL_NAME</code> table to check the new name. For example, enter:</span>
<div>
<pre dir="ltr">SELECT * FROM GLOBAL_NAME;

GLOBAL_NAME
----------------------------------------------------------------------------
SALES.US.EXAMPLE.COM
</pre></div>
</li>
</ol>
</div>
</div>
<a id="ADMIN12149"></a>
<div class="props_rev_3"><a id="GUID-E22E28D3-4A8D-4468-BC2B-15FCAF236E89"></a>
<h3 id="ADMIN-GUID-E22E28D3-4A8D-4468-BC2B-15FCAF236E89" class="sect3"><span class="enumeration_section">32.1.5</span> Changing a Global Database Name: Scenario</h3>
<div>
<p>A scenario illustrates changing a global database name.</p>
<div class="section">
<p>In this scenario, you change the domain part of the global database name of the local database. You also create database links using partially specified global names to test how Oracle Database resolves the names. You discover that the database resolves the partial names using the domain part of the current global database name of the local database, not the value for the initialization parameter <code class="codeph">DB_DOMAIN</code>.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>You connect to <code class="codeph">SALES.US.EXAMPLE.COM</code> and query the <code class="codeph">GLOBAL_NAME</code> data dictionary view to determine the current database global name:</span>
<div>
<pre dir="ltr">CONNECT SYSTEM@sales.us.example.com
SELECT * FROM GLOBAL_NAME;

GLOBAL_NAME
---------------------------------------------------------------------------- 
SALES.US.EXAMPLE.COM
</pre></div>
</li>
<li class="stepexpand"><span>You query the <code class="codeph">V$PARAMETER</code> view to determine the current setting for the <code class="codeph">DB_DOMAIN</code> initialization parameter:</span>
<div>
<pre dir="ltr">SELECT NAME, VALUE FROM V$PARAMETER WHERE NAME = &#39;db_domain&#39;; 

NAME       VALUE
---------  -----------
db_domain  US.EXAMPLE.COM 
</pre></div>
</li>
<li class="stepexpand"><span>You then create a database link to a database called <code class="codeph">hq</code>, using only a partially-specified global name:</span>
<div>
<pre dir="ltr">CREATE DATABASE LINK hq USING &#39;sales&#39;; 
</pre>
<p>The database expands the global database name for this link by appending the domain part of the global database name of the <span class="italic">local</span> database to the name of the database specified in the link.</p>
</div>
</li>
<li class="stepexpand"><span>You query <code class="codeph">USER_DB_LINKS</code> to determine which domain name the database uses to resolve the partially specified global database name:</span>
<div>
<pre dir="ltr">SELECT DB_LINK FROM USER_DB_LINKS; 

DB_LINK
------------------
HQ.US.EXAMPLE.COM
</pre>
<p>This result indicates that the domain part of the global database name of the local database is <code class="codeph">us.example.com</code>. The database uses this domain in resolving partial database link names when the database link is created.</p>
</div>
</li>
<li class="stepexpand"><span>Because you have received word that the <code class="codeph">sales</code> database will move to Japan, you rename the <code class="codeph">sales</code> database to <code class="codeph">sales.jp.example.com</code>:</span>
<div>
<pre dir="ltr">ALTER DATABASE RENAME GLOBAL_NAME TO sales.jp.example.com;
SELECT * FROM GLOBAL_NAME; 

GLOBAL_NAME
---------------------------------------------------------------------------- 
SALES.JP.EXAMPLE.COM
</pre></div>
</li>
<li class="stepexpand"><span>You query <code class="codeph">V$PARAMETER</code> again and discover that the value of <code class="codeph">DB_DOMAIN</code> is <span class="italic">not</span> changed, although you renamed the domain part of the global database name:</span>
<div>
<pre dir="ltr">SELECT NAME, VALUE FROM V$PARAMETER 
  WHERE NAME = &#39;db_domain&#39;; 

NAME       VALUE
---------  -----------
db_domain  US.EXAMPLE.COM 
</pre>
<p>This result indicates that the value of the <code class="codeph">DB_DOMAIN</code> initialization parameter is independent of the <code class="codeph">ALTER DATABASE RENAME GLOBAL_NAME</code> statement. The <code class="codeph">ALTER DATABASE</code> statement determines the domain of the global database name, not the <code class="codeph">DB_DOMAIN</code> initialization parameter (although it is good practice to alter <code class="codeph">DB_DOMAIN</code> to reflect the new domain name).</p>
</div>
</li>
<li class="stepexpand"><span>You create another database link to database <code class="codeph">supply</code>, and then query <code class="codeph">USER_DB_LINKS</code> to see how the database resolves the domain part of the global database name of <code class="codeph">supply</code>:</span>
<div>
<pre dir="ltr">CREATE DATABASE LINK supply USING &#39;supply&#39;; 
SELECT DB_LINK FROM USER_DB_LINKS; 

DB_LINK
------------------
HQ.US.EXAMPLE.COM 
SUPPLY.JP.EXAMPLE.COM
</pre>
<p>This result indicates that the database resolves the partially specified link name by using the domain <code class="codeph">jp.example.com.</code> This domain is used when the link is created because it is the domain part of the global database name of the local database. The database does <span class="italic">not</span> use the <code class="codeph">DB_DOMAIN</code> initialization parameter setting when resolving the partial link name.</p>
</div>
</li>
<li class="stepexpand"><span>You then receive word that your previous information was faulty: <code class="codeph">sales</code> will be in the <code class="codeph">ASIA.JP.EXAMPLE.COM</code> domain, not the <code class="codeph">JP.EXAMPLE.COM</code> domain. Consequently, you rename the global database name as follows:</span>
<div>
<pre dir="ltr">ALTER DATABASE RENAME GLOBAL_NAME TO sales.asia.jp.example.com; 
SELECT * FROM GLOBAL_NAME; 

GLOBAL_NAME
---------------------------------------------------------------------------- 
SALES.ASIA.JP.EXAMPLE.COM
</pre></div>
</li>
<li class="stepexpand"><span>You query <code class="codeph">V$PARAMETER</code> to again check the setting for the parameter <code class="codeph">DB_DOMAIN</code>:</span>
<div>
<pre dir="ltr">SELECT NAME, VALUE FROM V$PARAMETER 
  WHERE NAME = &#39;db_domain&#39;; 

NAME        VALUE
----------  -----------
db_domain   US.EXAMPLE.COM 
</pre>
<p>The result indicates that the domain setting in the parameter file is the same as it was before you issued <span class="italic">either</span> of the <code class="codeph">ALTER DATABASE RENAME</code> statements.</p>
</div>
</li>
<li class="stepexpand"><span>Finally, you create a link to the <code class="codeph">warehouse</code> database and again query <code class="codeph">USER_DB_LINKS</code> to determine how the database resolves the partially-specified global name:</span>
<div>
<pre dir="ltr">CREATE DATABASE LINK warehouse USING &#39;warehouse&#39;; 
SELECT DB_LINK FROM USER_DB_LINKS; 

DB_LINK
------------------
HQ.US.EXAMPLE.COM 
SUPPLY.JP.EXAMPLE.COM
WAREHOUSE.ASIA.JP.EXAMPLE.COM
</pre>
<p>Again, you see that the database uses the domain part of the global database name of the local database to expand the partial link name during link creation.</p>
<div class="infobox-note" id="GUID-E22E28D3-4A8D-4468-BC2B-15FCAF236E89__GUID-C7C6CB30-D771-4A9D-A99B-9DE83BD23D98">
<p class="notep1">Note:</p>
<p>In order to correct the <code class="codeph">supply</code> database link, it must be dropped and re-created.</p>
</div>
<div class="infoboxnotealso" id="GUID-E22E28D3-4A8D-4468-BC2B-15FCAF236E89__GUID-CA2B3DA4-ABC8-4AFF-8510-E6737C766DC0">
<p class="notep1">See Also:</p>
<p><a class="olink REFRN" target="_blank" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for more information about specifying the <code class="codeph">DB_NAME</code> and <code class="codeph">DB_DOMAIN</code> initialization parameters</p>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<a id="ADMIN12150"></a>
<div class="props_rev_3"><a id="GUID-B5950167-35F8-4C88-B063-382E0290CB53"></a>
<h2 id="ADMIN-GUID-B5950167-35F8-4C88-B063-382E0290CB53" class="sect2"><span class="enumeration_section">32.2</span> Creating Database Links</h2>
<p>To support application access to the data and schema objects throughout a distributed database system, you must create all necessary database links.</p>
<a id="ADMIN12151"></a>
<div class="props_rev_3"><a id="GUID-74191DF0-F1D3-4A29-970F-40F9F34D64B1"></a>
<h3 id="ADMIN-GUID-74191DF0-F1D3-4A29-970F-40F9F34D64B1" class="sect3"><span class="enumeration_section">32.2.1</span> Obtaining Privileges Necessary for Creating Database Links</h3>
<div>
<p>A database link is a pointer in the local database that lets you access objects on a remote database. To create a private database link, you must have been granted the proper privileges.</p>
<div class="section">
<p>The following table illustrates which privileges are required on which database for which type of link:</p>
<div class="tblformal" id="GUID-74191DF0-F1D3-4A29-970F-40F9F34D64B1__GUID-E9727F7C-1BCE-4DE6-81C8-2447C03A452A">
<table class="cellalignment1849" summary="Column 1 contains the privilege; column 2 lists the database on which the privilege is required; column3 lists the type of link for which the privilege is required.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1892" id="d243260e1114">Privilege</th>
<th class="cellalignment1881" id="d243260e1117">Database</th>
<th class="cellalignment1995" id="d243260e1120">Required For</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1895" id="d243260e1125" headers="d243260e1114">
<p><code class="codeph">CREATE DATABASE LINK</code></p>
</td>
<td class="cellalignment1884" headers="d243260e1125 d243260e1117">
<p>Local</p>
</td>
<td class="cellalignment1996" headers="d243260e1125 d243260e1120">
<p>Creation of a private database link.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1895" id="d243260e1137" headers="d243260e1114">
<p><code class="codeph">CREATE PUBLIC DATABASE LINK</code></p>
</td>
<td class="cellalignment1884" headers="d243260e1137 d243260e1117">
<p>Local</p>
</td>
<td class="cellalignment1996" headers="d243260e1137 d243260e1120">
<p>Creation of a public database link.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1895" id="d243260e1149" headers="d243260e1114">
<p><code class="codeph">CREATE SESSION</code></p>
</td>
<td class="cellalignment1884" headers="d243260e1149 d243260e1117">
<p>Remote</p>
</td>
<td class="cellalignment1996" headers="d243260e1149 d243260e1120">
<p>Creation of any type of database link.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>To see which privileges you currently have available, query <code class="codeph">ROLE_SYS_PRIVS</code>. For example, you could create and execute the following <code class="codeph">privs.sql</code> script (sample output included):</p>
<pre dir="ltr">SELECT DISTINCT PRIVILEGE AS &#34;Database Link Privileges&#34;
FROM ROLE_SYS_PRIVS
WHERE PRIVILEGE IN ( &#39;CREATE SESSION&#39;,&#39;CREATE DATABASE LINK&#39;,
                     &#39;CREATE PUBLIC DATABASE LINK&#39;)
/

SQL&gt; @privs

Database Link Privileges
----------------------------------------
CREATE DATABASE LINK
CREATE PUBLIC DATABASE LINK
CREATE SESSION
</pre></div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12152"></a>
<div class="props_rev_3"><a id="GUID-7F1394F2-CBB2-483A-B3CF-F59A4394D472"></a>
<h3 id="ADMIN-GUID-7F1394F2-CBB2-483A-B3CF-F59A4394D472" class="sect3"><span class="enumeration_section">32.2.2</span> Specifying Link Types</h3>
<p>When you create a database link, you must decide who will have access to it.</p>
<a id="ADMIN12153"></a>
<div class="props_rev_3"><a id="GUID-0FD4078C-D452-47EA-BA97-4EAB1D502B46"></a>
<h4 id="ADMIN-GUID-0FD4078C-D452-47EA-BA97-4EAB1D502B46" class="sect4"><span class="enumeration_section">32.2.2.1</span> Creating Private Database Links</h4>
<div>
<p>Use the <code class="codeph">CREATE DATABASE LINK</code> statement to create private database links.</p>
<div class="section">
<p>To create a private database link, specify the following (where <span class="italic">link_name</span> is the global database name or an arbitrary link name):</p>
<pre dir="ltr">CREATE DATABASE LINK <span class="italic">link_name</span> ...;
</pre>
<p>Following are examples of private database links:</p>
<div class="tblformal" id="GUID-0FD4078C-D452-47EA-BA97-4EAB1D502B46__GUID-90475731-52E3-4DC1-9DF1-F9F0D52AC1D2">
<table class="cellalignment1849" summary="Column 1 displays an example for creating a database link. Column 2 explains the results of issuing the statement.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1923" id="d243260e1327">SQL Statement</th>
<th class="cellalignment1924" id="d243260e1330">Result</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1925" id="d243260e1335" headers="d243260e1327">
<p><code class="codeph">CREATE DATABASE LINK supply.us.example.com;</code></p>
</td>
<td class="cellalignment1926" headers="d243260e1335 d243260e1330">
<p>A private link using the global database name to the remote <code class="codeph">supply</code> database.</p>
<p>The link uses the userid/password of the connected user. So if <code class="codeph">scott</code> (identified by <span class="italic"><code class="codeph">password</code></span>) uses the link in a query, the link establishes a connection to the remote database as <code class="codeph">scott/</code><span class="italic"><code class="codeph">password</code></span>.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1925" id="d243260e1362" headers="d243260e1327">
<p><code class="codeph">CREATE DATABASE LINK link_2 CONNECT TO jane IDENTIFIED BY</code> <span class="italic"><code class="codeph">password</code></span> <code class="codeph">USING &#39;us_supply&#39;;</code></p>
</td>
<td class="cellalignment1926" headers="d243260e1362 d243260e1330">
<p>A private fixed user link called <code class="codeph">link_2</code> to the database with service name <code class="codeph">us_supply</code>. The link connects to the remote database with the userid/password of <code class="codeph">jane/</code><span class="italic"><code class="codeph">password</code></span> regardless of the connected user.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1925" id="d243260e1388" headers="d243260e1327">
<p><code class="codeph">CREATE DATABASE LINK link_1 CONNECT TO CURRENT_USER USING &#39;us_supply&#39;;</code></p>
</td>
<td class="cellalignment1926" headers="d243260e1388 d243260e1330">
<p>A private link called <code class="codeph">link_1</code> to the database with service name <code class="codeph">us_supply</code>. The link uses the userid/password of the current user to log onto the remote database.</p>
<p><span class="bold">Note:</span> The current user may not be the same as the connected user, and must be a global user on both databases involved in the link (see <span class="q">&#34;<a href="ds_concepts.htm#GUID-27C0C352-804F-4545-B43C-E33FA4506E44" title="When creating the link, you determine which user should connect to the remote database to access the data.">Users of Database Links</a>&#34;</span>). Current user links are part of the Oracle Advanced Security option.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso" id="GUID-0FD4078C-D452-47EA-BA97-4EAB1D502B46__GUID-486CA189-074E-4F9E-8D83-EA1AA38C8E2B">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF01205" target="_blank" href="../SQLRF/statements_5006.htm#SQLRF01205"><span class="italic">Oracle Database SQL Language Reference</span></a> for <code class="codeph">CREATE DATABASE LINK</code> syntax</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12154"></a>
<div class="props_rev_3"><a id="GUID-1E90D802-8586-4FCD-9478-6C6BFBA33AB9"></a>
<h4 id="ADMIN-GUID-1E90D802-8586-4FCD-9478-6C6BFBA33AB9" class="sect4"><span class="enumeration_section">32.2.2.2</span> Creating Public Database Links</h4>
<div>
<p>Use the <code class="codeph">CREATE PUBLIC DATABASE LINK</code> statement to create public database links.</p>
<div class="section">
<p>To create a public database link, use the keyword <code class="codeph">PUBLIC</code> (where <span class="italic">link_name</span> is the global database name or an arbitrary link name):</p>
<pre dir="ltr">CREATE PUBLIC DATABASE LINK <span class="italic">link_name</span> ...;
</pre>
<p>Following are examples of public database links:</p>
<div class="tblformal" id="GUID-1E90D802-8586-4FCD-9478-6C6BFBA33AB9__GUID-28B85DCC-5665-4F8E-A5F7-EB2C61F2E8D6">
<table class="cellalignment1849" summary="Column 1 displays an example for creating a public database link. Column 2 explains the results of issuing the statement.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1859" id="d243260e1517">SQL Statement</th>
<th class="cellalignment1878" id="d243260e1520">Result</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1862" id="d243260e1525" headers="d243260e1517">
<p><code class="codeph">CREATE PUBLIC DATABASE LINK supply.us.example.com;</code></p>
</td>
<td class="cellalignment1879" headers="d243260e1525 d243260e1520">
<p>A public link to the remote <code class="codeph">supply</code> database. The link uses the userid/password of the connected user. So if <code class="codeph">scott</code> (identified by <span class="italic"><code class="codeph">password</code></span>) uses the link in a query, the link establishes a connection to the remote database as <code class="codeph">scott/</code><span class="italic"><code class="codeph">password</code></span>.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1862" id="d243260e1550" headers="d243260e1517">
<p><code class="codeph">CREATE PUBLIC DATABASE LINK pu_link CONNECT TO CURRENT_USER USING &#39;supply&#39;;</code></p>
</td>
<td class="cellalignment1879" headers="d243260e1550 d243260e1520">
<p>A public link called <code class="codeph">pu_link</code> to the database with service name <code class="codeph">supply</code>. The link uses the userid/password of the current user to log onto the remote database.</p>
<p><span class="bold">Note:</span> The current user may not be the same as the connected user, and must be a global user on both databases involved in the link (see <span class="q">&#34;<a href="ds_concepts.htm#GUID-27C0C352-804F-4545-B43C-E33FA4506E44" title="When creating the link, you determine which user should connect to the remote database to access the data.">Users of Database Links</a>&#34;</span>).</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1862" id="d243260e1577" headers="d243260e1517">
<p><code class="codeph">CREATE PUBLIC DATABASE LINK sales.us.example.com CONNECT TO jane IDENTIFIED BY</code> <span class="italic"><code class="codeph">password</code></span><code class="codeph">;</code></p>
</td>
<td class="cellalignment1879" headers="d243260e1577 d243260e1520">
<p>A public fixed user link to the remote <code class="codeph">sales</code> database. The link connects to the remote database with the userid/password of <code class="codeph">jane/</code><span class="italic"><code class="codeph">password</code></span>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso" id="GUID-1E90D802-8586-4FCD-9478-6C6BFBA33AB9__GUID-19325992-963F-46C6-BEF3-C3897FC9E84C">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF01205" target="_blank" href="../SQLRF/statements_5006.htm#SQLRF01205"><span class="italic">Oracle Database SQL Language Reference</span></a> for <code class="codeph">CREATE PUBLIC DATABASE LINK</code> syntax</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12155"></a>
<div class="props_rev_3"><a id="GUID-FCBB2B7B-A12E-419B-AB7C-807D6519D784"></a>
<h4 id="ADMIN-GUID-FCBB2B7B-A12E-419B-AB7C-807D6519D784" class="sect4"><span class="enumeration_section">32.2.2.3</span> Creating Global Database Links</h4>
<div>
<p>You can use a directory server in which databases are identified by net service names. In this document, these are what are referred to as global database links.</p>
<div class="section">
<p>See the <a class="olink NETAG008" target="_blank" href="../NETAG/naming.htm#NETAG008"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> to learn how to create directory entries that act as global database links.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="ADMIN12156"></a>
<div class="props_rev_3"><a id="GUID-06916533-FF59-4CB3-A59B-3DBDB0505FB7"></a>
<h3 id="ADMIN-GUID-06916533-FF59-4CB3-A59B-3DBDB0505FB7" class="sect3"><span class="enumeration_section">32.2.3</span> Specifying Link Users</h3>
<p>A database link defines a communication path from one database to another. When an application uses a database link to access a remote database, Oracle Database establishes a database session in the remote database on behalf of the local application request. When you create a private or public database link, you can determine which schema on the remote database the link will establish connections to by creating fixed user, current user, and connected user database links.</p>
<a id="ADMIN12157"></a>
<div class="props_rev_3"><a id="GUID-38AB85A5-D26E-442E-B532-83E8FCEF1C1B"></a>
<h4 id="ADMIN-GUID-38AB85A5-D26E-442E-B532-83E8FCEF1C1B" class="sect4"><span class="enumeration_section">32.2.3.1</span> Creating Fixed User Database Links</h4>
<div>
<p>When an application uses a fixed user database link, the local server always establishes a connection to a fixed remote schema in the remote database. The local server also sends the fixed user&#39;s credentials across the network when an application uses the link to access the remote database.</p>
<div class="section">
<p>To create a <span class="bold">fixed user database link</span>, you embed the credentials (in this case, a username and password) required to access the remote database in the definition of the link:</p>
<pre dir="ltr">CREATE DATABASE LINK ... CONNECT TO <span class="italic">username</span> IDENTIFIED BY <span class="italic">password</span> ...;
</pre>
<p>Following are examples of fixed user database links:</p>
<div class="tblformal" id="GUID-38AB85A5-D26E-442E-B532-83E8FCEF1C1B__GUID-A506619F-58B5-4B43-8B0F-E96128BFD256">
<table class="cellalignment1849" summary="Column 1 displays an example for creating a fixed user database link. Column 2 explains the results of issuing the statement.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1923" id="d243260e1845">SQL Statement</th>
<th class="cellalignment1924" id="d243260e1848">Result</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1925" id="d243260e1853" headers="d243260e1845">
<p><code class="codeph">CREATE PUBLIC DATABASE LINK supply.us.example.com CONNECT TO scott IDENTIFIED BY</code> <span class="italic"><code class="codeph">password</code></span><code class="codeph">;</code></p>
</td>
<td class="cellalignment1926" headers="d243260e1853 d243260e1848">
<p>A public link using the global database name to the remote <code class="codeph">supply</code> database. The link connects to the remote database with the userid/password <code class="codeph">scott/</code><span class="italic"><code class="codeph">password</code></span>.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1925" id="d243260e1876" headers="d243260e1845">
<p><code class="codeph">CREATE DATABASE LINK foo CONNECT TO jane IDENTIFIED BY</code> <span class="italic"><code class="codeph">password</code></span> <code class="codeph">USING &#39;finance&#39;;</code></p>
</td>
<td class="cellalignment1926" headers="d243260e1876 d243260e1848">
<p>A private fixed user link called <code class="codeph">foo</code> to the database with service name <code class="codeph">finance</code>. The link connects to the remote database with the userid/password <code class="codeph">jane/</code><span class="italic"><code class="codeph">password</code></span>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12158"></a>
<div class="props_rev_3"><a id="GUID-DEFBEEBB-C4DA-4FB2-B12B-AE0D848114FE"></a>
<h4 id="ADMIN-GUID-DEFBEEBB-C4DA-4FB2-B12B-AE0D848114FE" class="sect4"><span class="enumeration_section">32.2.3.2</span> Creating Connected User and Current User Database Links</h4>
<div>
<p>Connected user and current user database links do not include credentials in the definition of the link. The credentials used to connect to the remote database can change depending on the user that references the database link and the operation performed by the application.</p>
<div class="infobox-note" id="GUID-DEFBEEBB-C4DA-4FB2-B12B-AE0D848114FE__GUID-8E496073-CD7A-4E1B-B5CE-43A0EB1110A1">
<p class="notep1">Note:</p>
<p>For many distributed applications, you do not want a user to have privileges in a remote database. One simple way to achieve this result is to create a procedure that contains a fixed user or current user database link within it. In this way, the user accessing the procedure temporarily assumes someone else&#39;s privileges.</p>
</div>
</div>
<div>
<div class="relinfo">
<p><strong>Related Topics</strong></p>
<ul>
<li><a href="ds_concepts.htm#GUID-2F126254-7B12-4C1D-8441-7FD086DE8141" title="Users of database links include connect user, current user, and fixed user.">Users of Database Links</a></li>
</ul>
</div>
</div>
<a id="ADMIN12159"></a>
<div class="props_rev_3"><a id="GUID-903832AC-D3F7-4F8C-8D2E-79A375862F40"></a>
<h5 id="ADMIN-GUID-903832AC-D3F7-4F8C-8D2E-79A375862F40" class="sect5"><span class="enumeration_section">32.2.3.2.1</span> Creating a Connected User Database Link</h5>
<div>
<p>To create a connected user database link, omit the <code class="codeph">CONNECT TO</code> clause in the <code class="codeph">CREATE DATABASE LINK</code> statement.</p>
<div class="section">
<p>The following syntax creates a connected user database link, where <span class="italic">dblink</span> is the name of the link and <span class="italic">net_service_name</span> is an optional connect string:</p>
<pre dir="ltr">CREATE [SHARED] [PUBLIC] DATABASE LINK <span class="italic">dblink</span> ... [USING &#39;<span class="italic">net_service_name</span>&#39;];
</pre>
<p>For example, to create a connected user database link, use the following syntax:</p>
<pre dir="ltr">CREATE DATABASE LINK sales.division3.example.com USING &#39;sales&#39;;
</pre></div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12160"></a>
<div class="props_rev_3"><a id="GUID-CA8DC9FD-415D-4440-A895-D3FE53EDD958"></a>
<h5 id="ADMIN-GUID-CA8DC9FD-415D-4440-A895-D3FE53EDD958" class="sect5"><span class="enumeration_section">32.2.3.2.2</span> Creating a Current User Database Link</h5>
<div>
<p>To create a current user database link, use the <code class="codeph">CONNECT TO CURRENT_USER</code> clause in the <code class="codeph">CREATE DATABASE LINK</code> statement.</p>
<div class="section">
<p>Current user links are only available through the Oracle Advanced Security option.</p>
<p>The following syntax creates a current user database link, where <span class="italic">dblink</span> is the name of the link and <span class="italic">net_service_name</span> is an optional connect string:</p>
<pre dir="ltr">CREATE [SHARED] [PUBLIC] DATABASE LINK <span class="italic">dblink</span> CONNECT TO CURRENT_USER 
[USING &#39;<span class="italic">net_service_name</span>&#39;];
</pre>
<p>For example, to create a connected user database link to the <code class="codeph">sales</code> database, you might use the following syntax:</p>
<pre dir="ltr">CREATE DATABASE LINK sales CONNECT TO CURRENT_USER USING &#39;sales&#39;;
</pre>
<div class="infobox-note" id="GUID-CA8DC9FD-415D-4440-A895-D3FE53EDD958__GUID-771FFC88-58C1-47AE-8128-790E0F01A187">
<p class="notep1">Note:</p>
<p>To use a current user database link, the current user must be a global user on both databases involved in the link.</p>
</div>
<div class="infoboxnotealso" id="GUID-CA8DC9FD-415D-4440-A895-D3FE53EDD958__GUID-2E88FD5C-7B26-4C7A-ABBA-10D52AA49DA0">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF01205" target="_blank" href="../SQLRF/statements_5006.htm#SQLRF01205"><span class="italic">Oracle Database SQL Language Reference</span></a> for more syntax information about creating database links</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<a id="ADMIN02901"></a>
<div class="props_rev_3"><a id="GUID-15C83763-9F18-4670-B14A-6557F123060A"></a>
<h3 id="ADMIN-GUID-15C83763-9F18-4670-B14A-6557F123060A" class="sect3"><span class="enumeration_section">32.2.4</span> Using Connection Qualifiers to Specify Service Names Within Link Names</h3>
<div>
<p>In some situations, you may want to have several database links of the same type (for example, public) that point to the same remote database, yet establish connections to the remote database using different communication pathways.</p>
<div class="section">
<p>Some cases in which this strategy is useful are:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>A remote database is part of an Oracle Real Application Clusters configuration, so you define several public database links at your local node so that connections can be established to specific instances of the remote database.</p>
</li>
<li>
<p>Some clients connect to the Oracle Database server using TCP/IP while others use DECNET.</p>
</li>
</ul>
<p>To facilitate such functionality, the database lets you create a database link with an optional service name in the database link name. When creating a database link, a service name is specified as the trailing portion of the database link name, separated by an <code class="codeph">@</code> sign, as in <code class="codeph">@sales</code>. This string is called a <span class="bold">connection qualifier</span>.</p>
<p>For example, assume that remote database <code class="codeph">hq.example.com</code> is managed in an Oracle Real Application Clusters environment. The <code class="codeph">hq</code> database has two instances named <code class="codeph">hq_1</code> and <code class="codeph">hq_2</code>. The local database can contain the following public database links to define pathways to the remote instances of the <code class="codeph">hq</code> database:</p>
<pre dir="ltr">CREATE PUBLIC DATABASE LINK hq.example.com@hq_1
  USING &#39;string_to_hq_1&#39;;
CREATE PUBLIC DATABASE LINK hq.example.com@hq_2
  USING &#39;string_to_hq_2&#39;;
CREATE PUBLIC DATABASE LINK hq.example.com
  USING &#39;string_to_hq&#39;;
</pre>
<p>Notice in the first two examples that a service name is simply a part of the database link name. The text of the service name does not necessarily indicate how a connection is to be established; this information is specified in the service name of the <code class="codeph">USING</code> clause. Also notice that in the third example, a service name is not specified as part of the link name. In this case, just as when a service name is specified as part of the link name, the instance is determined by the <code class="codeph">USING</code> string.</p>
<p>To use a service name to specify a particular instance, include the service name at the end of the global object name:</p>
<pre dir="ltr">SELECT * FROM scott.emp@hq.example.com@hq_1
</pre>
<p>Note that in this example, there are two @ symbols.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="ADMIN12161"></a>
<div class="props_rev_3"><a id="GUID-76FC48D7-9852-4307-B21F-5AB27CB25530"></a>
<h2 id="ADMIN-GUID-76FC48D7-9852-4307-B21F-5AB27CB25530" class="sect2"><span class="enumeration_section">32.3</span> Using Shared Database Links</h2>
<div>
<p>Every application that references a remote server using a standard database link establishes a connection between the local database and the remote database. Many users running applications simultaneously can cause a high number of connections between the local and remote databases. Shared database links enable you to limit the number of network connections required between the local server and the remote server.</p>
<div class="infoboxnotealso" id="GUID-76FC48D7-9852-4307-B21F-5AB27CB25530__GUID-4F1476BA-446A-4084-9B28-FE59D1686F51">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="ds_concepts.htm#GUID-3D34EE9C-6A6D-4F4C-971D-E5BC27F866CB" title="A shared database link is a link between a local server process and the remote database. The link is shared because multiple client processes can use the same link simultaneously.">What Are Shared Database Links?</a>&#34;</span> for a conceptual overview of shared database links</p>
</div>
</div>
<a id="ADMIN12162"></a>
<div class="props_rev_3"><a id="GUID-C44F5323-25EC-4C44-A17E-6404FEAC6C1E"></a>
<h3 id="ADMIN-GUID-C44F5323-25EC-4C44-A17E-6404FEAC6C1E" class="sect3"><span class="enumeration_section">32.3.1</span> Determining Whether to Use Shared Database Links</h3>
<div>
<p>Look carefully at your application and shared server configuration to determine whether to use shared links. A simple guideline is to use shared database links when the number of users accessing a database link is expected to be much larger than the number of server processes in the local database.</p>
<p>The following table illustrates three possible configurations involving database links:</p>
<div class="tblformal" id="GUID-C44F5323-25EC-4C44-A17E-6404FEAC6C1E__GUID-497EBBD5-DE78-45B7-9844-F6338E83C54E">
<table class="cellalignment1849" summary="Column 1 lists the link type; column 2 lists the server mode; column 3 explains the consequences of this combination of link type and server mode.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1867" id="d243260e2487">Link Type</th>
<th class="cellalignment1867" id="d243260e2490">Server Mode</th>
<th class="cellalignment1868" id="d243260e2493">Consequences</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1869" id="d243260e2498" headers="d243260e2487">
<p>Nonshared</p>
</td>
<td class="cellalignment1869" headers="d243260e2498 d243260e2490">
<p>Dedicated/shared server</p>
</td>
<td class="cellalignment1870" headers="d243260e2498 d243260e2493">
<p>If your application uses a standard public database link, and 100 users simultaneously require a connection, then 100 direct network connections to the remote database are required.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1869" id="d243260e2508" headers="d243260e2487">
<p>Shared</p>
</td>
<td class="cellalignment1869" headers="d243260e2508 d243260e2490">
<p>Shared server</p>
</td>
<td class="cellalignment1870" headers="d243260e2508 d243260e2493">
<p>If 10 shared server processes exist in the local shared server mode database, then 100 users that use the same database link require 10 or fewer network connections to the remote server. Each local shared server process may only need one connection to the remote server.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1869" id="d243260e2518" headers="d243260e2487">
<p>Shared</p>
</td>
<td class="cellalignment1869" headers="d243260e2518 d243260e2490">
<p>Dedicated</p>
</td>
<td class="cellalignment1870" headers="d243260e2518 d243260e2493">
<p>If 10 clients connect to a local dedicated server, and each client has 10 sessions on the same connection (thus establishing 100 sessions overall), and each session references the same remote database, then only 10 connections are needed. With a nonshared database link, 100 connections are needed.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Shared database links are not useful in all situations. Assume that only one user accesses the remote server. If this user defines a shared database link and 10 shared server processes exist in the local database, then this user can require up to 10 network connections to the remote server. Because the user can use each shared server process, each process can establish a connection to the remote server.</p>
<p>Clearly, a nonshared database link is preferable in this situation because it requires only one network connection. Shared database links lead to more network connections in single-user scenarios, so use shared links only when many users need to use the same link. Typically, shared links are used for public database links, but can also be used for private database links when many clients access the same local schema (and therefore the same private database link).</p>
<div class="infobox-note" id="GUID-C44F5323-25EC-4C44-A17E-6404FEAC6C1E__GUID-E184DF17-142C-47CB-B667-95200D88ED49">
<p class="notep1">Note:</p>
<p>In a multitiered environment, there is a restriction that if you use a shared database link to connect to a remote database, then that remote database cannot link to another database with a database link that cannot be migrated. That link must use a shared server, or it must be another shared database link.</p>
</div>
</div>
</div>
<a id="ADMIN12163"></a>
<div class="props_rev_3"><a id="GUID-6C8CD13D-E619-4264-B73F-15A01F628244"></a>
<h3 id="ADMIN-GUID-6C8CD13D-E619-4264-B73F-15A01F628244" class="sect3"><span class="enumeration_section">32.3.2</span> Creating Shared Database Links</h3>
<div>
<p>To create a shared database link, use the keyword <code class="codeph">SHARED</code> in the <code class="codeph">CREATE DATABASE LINK</code> statement.</p>
<div class="section">
<p>Use the following syntax to create a shared database link:</p>
<pre dir="ltr">CREATE SHARED DATABASE LINK <span class="italic">dblink_name</span>
[CONNECT TO <span class="italic">username</span> IDENTIFIED BY <span class="italic">password</span>]|[CONNECT TO CURRENT_USER]
AUTHENTICATED BY <span class="italic">schema_name</span> IDENTIFIED BY <span class="italic">password</span>
[USING &#39;<span class="italic">service_name</span>&#39;];
</pre>
<p>Whenever you use the keyword <code class="codeph">SHARED</code>, the clause <code class="codeph">AUTHENTICATED BY</code> is required. The schema specified in the <code class="codeph">AUTHENTICATED BY</code> clause must exist in the remote database and must be granted at least the <code class="codeph">CREATE SESSION</code> privilege. The credentials of this schema can be considered the authentication method between the local database and the remote database. These credentials are required to protect the remote shared server processes from clients that masquerade as a database link user and attempt to gain unauthorized access to information.</p>
<p>After a connection is made with a shared database link, operations on the remote database proceed with the privileges of the <code class="codeph">CONNECT</code> <code class="codeph">TO</code> user or <code class="codeph">CURRENT_USER</code>, not the <code class="codeph">AUTHENTICATED</code> <code class="codeph">BY</code> schema.</p>
<p>The following example creates a fixed user, shared link to database <code class="codeph">sales</code>, connecting as <code class="codeph">scott</code> and authenticated as <code class="codeph">linkuser</code>:</p>
<pre dir="ltr">CREATE SHARED DATABASE LINK link2sales
CONNECT TO scott IDENTIFIED BY <span class="italic">password</span>
AUTHENTICATED BY linkuser IDENTIFIED BY ostrich
USING &#39;sales&#39;;
</pre>
<div class="infoboxnotealso" id="GUID-6C8CD13D-E619-4264-B73F-15A01F628244__GUID-D0121073-F416-4A5D-A18C-4E546B9254D6">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF01205" target="_blank" href="../SQLRF/statements_5006.htm#SQLRF01205"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">CREATE DATABASE LINK</code> statement</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12164"></a>
<div class="props_rev_3"><a id="GUID-96A1E120-B286-4F4E-A107-24CE928331BA"></a>
<h3 id="ADMIN-GUID-96A1E120-B286-4F4E-A107-24CE928331BA" class="sect3"><span class="enumeration_section">32.3.3</span> Configuring Shared Database Links</h3>
<p>You can configure shared database links in different ways.</p>
<a id="ADMIN13140"></a><a id="ADMIN12165"></a>
<div class="props_rev_3"><a id="GUID-BE4C72BD-83CB-45F9-AEF3-D4F4A04C1CC4"></a>
<h4 id="ADMIN-GUID-BE4C72BD-83CB-45F9-AEF3-D4F4A04C1CC4" class="sect4"><span class="enumeration_section">32.3.3.1</span> Creating Shared Links to Dedicated Servers</h4>
<div>
<p>A shared server process in the local server can own a dedicated remote server process.</p>
<p>The advantage is that a direct network transport exists between the local shared server and the remote dedicated server. A disadvantage is that extra back-end server processes are needed.</p>
<div class="infobox-note" id="GUID-BE4C72BD-83CB-45F9-AEF3-D4F4A04C1CC4__GUID-20A92847-D92A-42D2-AE44-3408FAA7C58C">
<p class="notep1">Note:</p>
<p>The remote server can either be a shared server or dedicated server. There is a dedicated connection between the local and remote servers. When the remote server is a shared server, you can force a dedicated server connection by using the (<code class="codeph">SERVER=DEDICATED</code>) clause in the definition of the service name.</p>
</div>
<div class="figure" id="GUID-BE4C72BD-83CB-45F9-AEF3-D4F4A04C1CC4__i1008209">
<p class="titleinfigure">Figure 32-1 A Shared Database Link to Dedicated Server Processes</p>
<img width="507" height="541" src="img/GUID-17797B87-B3AA-4109-94D6-86A2618801F0-default.gif" alt="Description of Figure 32-1 follows" title="Description of Figure 32-1 follows"/><br/>
<a href="img_text/GUID-17797B87-B3AA-4109-94D6-86A2618801F0-print.htm">Description of &#34;Figure 32-1 A Shared Database Link to Dedicated Server Processes&#34;</a></div>
<!-- class="figure" --></div>
</div>
<a id="ADMIN13141"></a><a id="ADMIN12166"></a>
<div class="props_rev_3"><a id="GUID-B96F7F7F-2F8D-4889-9DA6-49A01FA3FC8F"></a>
<h4 id="ADMIN-GUID-B96F7F7F-2F8D-4889-9DA6-49A01FA3FC8F" class="sect4"><span class="enumeration_section">32.3.3.2</span> Creating Shared Links to Shared Servers</h4>
<div>
<p>You can create shared links using shared server processes on the remote server.</p>
<p>This configuration eliminates the need for more dedicated servers, but requires the connection to go through the dispatcher on the remote server. Note that both the local and the remote server must be configured as shared servers.</p>
<div class="figure" id="GUID-B96F7F7F-2F8D-4889-9DA6-49A01FA3FC8F__i1008223">
<p class="titleinfigure">Figure 32-2 Shared Database Link to Shared Server</p>
<img width="493" height="531" src="img/GUID-A47C1AC2-DAA6-4103-87C2-C3B0511F1884-default.gif" alt="Description of Figure 32-2 follows" title="Description of Figure 32-2 follows"/><br/>
<a href="img_text/GUID-A47C1AC2-DAA6-4103-87C2-C3B0511F1884-print.htm">Description of &#34;Figure 32-2 Shared Database Link to Shared Server&#34;</a></div>
<!-- class="figure" -->
<div class="infoboxnotealso" id="GUID-B96F7F7F-2F8D-4889-9DA6-49A01FA3FC8F__GUID-E475BDF4-84C3-429A-8398-964862E9F445">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="manproc.htm#GUID-A522BFBF-5452-4038-92DB-C5116A0B1B50" title="A shared server process can service multiple user processes.">Shared Server Processes</a>&#34;</span> for information about the shared server option</p>
</div>
</div>
</div>
</div>
</div>
<a id="ADMIN12167"></a>
<div class="props_rev_3"><a id="GUID-7B0C4627-4473-4313-88D5-FD03CA42D9EA"></a>
<h2 id="ADMIN-GUID-7B0C4627-4473-4313-88D5-FD03CA42D9EA" class="sect2"><span class="enumeration_section">32.4</span> Managing Database Links</h2>
<p>Managing database links includes tasks such as closing them, dropping them, and limiting the number of active connections to them.</p>
<a id="ADMIN12168"></a>
<div class="props_rev_3"><a id="GUID-AF6B5F62-0180-4F8F-A5F0-05246A750CB2"></a>
<h3 id="ADMIN-GUID-AF6B5F62-0180-4F8F-A5F0-05246A750CB2" class="sect3"><span class="enumeration_section">32.4.1</span> Closing Database Links</h3>
<div>
<p>If you access a database link in a session, then the link remains open until you close the session. To close a database link manually, use the <code class="codeph">ALTER SESSION CLOSE DATABASE LINK</code> statement.</p>
<div class="section">
<p>A link is open in the sense that a process is active on each of the remote databases accessed through the link. This situation has the following consequences:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>If 20 users open sessions and access the same public link in a local database, then 20 database link connections are open.</p>
</li>
<li>
<p>If 20 users open sessions and each user accesses a private link, then 20 database link connections are open.</p>
</li>
<li>
<p>If one user starts a session and accesses 20 different links, then 20 database link connections are open.</p>
</li>
</ul>
<p>After you close a session, the links that were active in the session are automatically closed. You may have occasion to close the link manually. For example, close links when:</p>
<ul style="list-style-type: disc;">
<li>
<p>The network connection established by a link is used infrequently in an application.</p>
</li>
<li>
<p>The user session must be terminated.</p>
</li>
</ul>
<p>To close a link, issue the following statement, where <span class="italic">linkname</span> refers to the name of the link:</p>
<pre dir="ltr">ALTER SESSION CLOSE DATABASE LINK <span class="italic">linkname</span>;
</pre>
<p>Note that this statement only closes the links that are active in your current session.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12169"></a>
<div class="props_rev_3"><a id="GUID-DD468613-ACB3-4B9E-9F3A-3C320E1A9C12"></a>
<h3 id="ADMIN-GUID-DD468613-ACB3-4B9E-9F3A-3C320E1A9C12" class="sect3"><span class="enumeration_section">32.4.2</span> Dropping Database Links</h3>
<div>
<p>You can drop a database link just as you can drop a table or view. If the link is private, then it must be in your schema. If the link is public, then you must have the <code class="codeph">DROP PUBLIC DATABASE LINK</code> system privilege.</p>
<div class="section">
<p>The statement syntax is as follows, where <span class="italic">dblink</span> is the name of the link:</p>
<pre dir="ltr">DROP [PUBLIC] DATABASE LINK <span class="italic">dblink</span>; 
</pre></div>
<!-- class="section" --></div>
<a id="ADMIN12170"></a>
<div class="props_rev_3"><a id="GUID-6B833432-0B3E-4D00-A863-850DAD3AC45E"></a>
<h4 id="ADMIN-GUID-6B833432-0B3E-4D00-A863-850DAD3AC45E" class="sect4"><span class="enumeration_section">32.4.2.1</span> Dropping a Private Database Link</h4>
<div>
<p>Use the <code class="codeph">DROP DATABASE LINK</code> statement to drop a private database link.</p>
<ol>
<li class="stepexpand"><span>Connect to the local database using SQL*Plus. For example, enter:</span>
<div>
<pre dir="ltr">CONNECT scott@<span class="italic">local_db</span>
</pre></div>
</li>
<li class="stepexpand"><span>Query <code class="codeph">USER_DB_LINKS</code> to view the links that you own. For example, enter:</span>
<div>
<pre dir="ltr">SELECT DB_LINK FROM USER_DB_LINKS;

DB_LINK
-----------------------------------
SALES.US.EXAMPLE.COM
MKTG.US.EXAMPLE.COM
2 rows selected.
</pre></div>
</li>
<li class="stepexpand"><span>Drop the desired link using the <code class="codeph">DROP DATABASE LINK</code> statement. For example, enter:</span>
<div>
<pre dir="ltr">DROP DATABASE LINK sales.us.example.com;
</pre></div>
</li>
</ol>
</div>
</div>
<a id="ADMIN12171"></a>
<div class="props_rev_3"><a id="GUID-CD18AD39-CEF3-4E0F-82BC-D274F2A32144"></a>
<h4 id="ADMIN-GUID-CD18AD39-CEF3-4E0F-82BC-D274F2A32144" class="sect4"><span class="enumeration_section">32.4.2.2</span> Dropping a Public Database Link</h4>
<div>
<p>Use the <code class="codeph">DROP PUBLIC DATABASE LINK</code> statement to drop a public database link.</p>
<ol>
<li class="stepexpand"><span>Connect to the local database as a user with the <code class="codeph">DROP PUBLIC DATABASE LINK</code> privilege. For example, enter:</span>
<div>
<pre dir="ltr">CONNECT SYSTEM@<span class="italic">local_db</span> AS SYSDBA
</pre></div>
</li>
<li class="stepexpand"><span>Query <code class="codeph">DBA_DB_LINKS</code> to view the public links. For example, enter:</span>
<div>
<pre dir="ltr">SELECT DB_LINK FROM DBA_DB_LINKS
  WHERE OWNER = &#39;PUBLIC&#39;;

DB_LINK
-----------------------------------
DBL1.US.EXAMPLE.COM
SALES.US.EXAMPLE.COM
INST2.US.EXAMPLE.COM                            
RMAN2.US.EXAMPLE.COM
4 rows selected.
</pre></div>
</li>
<li class="stepexpand"><span>Drop the desired link using the <code class="codeph">DROP PUBLIC DATABASE LINK</code> statement. For example, enter:</span>
<div>
<pre dir="ltr">DROP PUBLIC DATABASE LINK sales.us.example.com;
</pre></div>
</li>
</ol>
</div>
</div>
</div>
<a id="ADMIN12172"></a>
<div class="props_rev_3"><a id="GUID-C0E3F49F-0874-437D-8135-E5BF9CE8702A"></a>
<h3 id="ADMIN-GUID-C0E3F49F-0874-437D-8135-E5BF9CE8702A" class="sect3"><span class="enumeration_section">32.4.3</span> Limiting the Number of Active Database Link Connections</h3>
<div>
<p>You can limit the number of connections from a user process to remote databases using the static initialization parameter <code class="codeph">OPEN_LINKS</code>.</p>
<div class="section">
<p>This parameter controls the number of remote connections that a single user session can use concurrently in distributed transactions.</p>
<p>Note the following considerations for setting this parameter:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>The value should be greater than or equal to the number of databases referred to in a single SQL statement that references multiple databases.</p>
</li>
<li>
<p>Increase the value if several distributed databases are accessed over time. Thus, if you regularly access three databases, set <code class="codeph">OPEN_LINKS</code> to 3 or greater.</p>
</li>
<li>
<p>The default value for <code class="codeph">OPEN_LINKS</code> is 4. If <code class="codeph">OPEN_LINKS</code> is set to 0, then no distributed transactions are allowed.</p>
<div class="infoboxnotealso" id="GUID-C0E3F49F-0874-437D-8135-E5BF9CE8702A__GUID-5FD9893B-5A11-4EFE-816F-9F68D8AF22B0">
<p class="notep1">See Also:</p>
<p><a class="olink REFRN10138" target="_blank" href="../REFRN/GUID-0B426902-11AD-4063-AED3-A815328DD0C4.htm#REFRN10138"><span class="italic">Oracle Database Reference</span></a> for more information about the <code class="codeph">OPEN_LINKS</code> initialization parameter</p>
</div>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="ADMIN12173"></a>
<div class="props_rev_3"><a id="GUID-D7B3AB7D-8862-4504-AA46-596D222119BD"></a>
<h2 id="ADMIN-GUID-D7B3AB7D-8862-4504-AA46-596D222119BD" class="sect2"><span class="enumeration_section">32.5</span> Viewing Information About Database Links</h2>
<p>The data dictionary of each database stores the definitions of all the database links in the database. You can use data dictionary tables and views to gain information about the links.</p>
<a id="ADMIN12174"></a>
<div class="props_rev_3"><a id="GUID-81BD7466-495B-4D92-B8E0-C92B0B4441AA"></a>
<h3 id="ADMIN-GUID-81BD7466-495B-4D92-B8E0-C92B0B4441AA" class="sect3"><span class="enumeration_section">32.5.1</span> Determining Which Links Are in the Database</h3>
<div>
<p>A set of views shows the database links that have been defined at the local database and stored in the data dictionary.</p>
<div class="section">
<p>:</p>
<div class="tblformal" id="GUID-81BD7466-495B-4D92-B8E0-C92B0B4441AA__GUID-C9A84557-ADBC-4673-9B9A-7336E5600B36">
<table class="cellalignment1849" summary="Column 1 lists the views used for determining if database links exist. Column 2 lists the purpose of the view.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1873" id="d243260e3659">View</th>
<th class="cellalignment1961" id="d243260e3662">Purpose</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1876" id="d243260e3667" headers="d243260e3659">
<p><code class="codeph">DBA_DB_LINKS</code></p>
</td>
<td class="cellalignment1962" headers="d243260e3667 d243260e3662">
<p>Lists all database links in the database.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1876" id="d243260e3675" headers="d243260e3659">
<p><code class="codeph">ALL_DB_LINKS</code></p>
</td>
<td class="cellalignment1962" headers="d243260e3675 d243260e3662">
<p>Lists all database links accessible to the connected user.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1876" id="d243260e3683" headers="d243260e3659">
<p><code class="codeph">USER_DB_LINKS</code></p>
</td>
<td class="cellalignment1962" headers="d243260e3683 d243260e3662">
<p>Lists all database links owned by the connected user.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>These data dictionary views contain the same basic information about database links, with some exceptions:</p>
<div class="tblformal" id="GUID-81BD7466-495B-4D92-B8E0-C92B0B4441AA__GUID-8B05BE37-1581-41A0-82BD-54E88ED56741">
<table class="cellalignment1849" summary="Column 1 lists the view column; column 2 lists the views that contain the column; column 3 is a description of the view column.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1891" id="d243260e3701">Column</th>
<th class="cellalignment1891" id="d243260e3704">Which Views?</th>
<th class="cellalignment1898" id="d243260e3707">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d243260e3712" headers="d243260e3701">
<p><code class="codeph">OWNER</code></p>
</td>
<td class="cellalignment1894" headers="d243260e3712 d243260e3704">
<p>All except <code class="codeph">USER_*</code></p>
</td>
<td class="cellalignment1900" headers="d243260e3712 d243260e3707">
<p>The user who created the database link. If the link is public, then the user is listed as <code class="codeph">PUBLIC</code>.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d243260e3729" headers="d243260e3701">
<p><code class="codeph">DB_LINK</code></p>
</td>
<td class="cellalignment1894" headers="d243260e3729 d243260e3704">
<p>All</p>
</td>
<td class="cellalignment1900" headers="d243260e3729 d243260e3707">
<p>The name of the database link.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d243260e3741" headers="d243260e3701">
<p><code class="codeph">USERNAME</code></p>
</td>
<td class="cellalignment1894" headers="d243260e3741 d243260e3704">
<p>All</p>
</td>
<td class="cellalignment1900" headers="d243260e3741 d243260e3707">
<p>If the link definition includes a fixed user, then this column displays the username of the fixed user. If there is no fixed user, the column is <code class="codeph">NULL</code>.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d243260e3756" headers="d243260e3701">
<p><code class="codeph">PASSWORD</code></p>
</td>
<td class="cellalignment1894" headers="d243260e3756 d243260e3704">
<p>Only <code class="codeph">USER_*</code></p>
</td>
<td class="cellalignment1900" headers="d243260e3756 d243260e3707">
<p>Not used. Maintained for backward compatibility only.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d243260e3770" headers="d243260e3701">
<p><code class="codeph">HOST</code></p>
</td>
<td class="cellalignment1894" headers="d243260e3770 d243260e3704">
<p>All</p>
</td>
<td class="cellalignment1900" headers="d243260e3770 d243260e3707">
<p>The net service name used to connect to the remote database.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d243260e3782" headers="d243260e3701">
<p><code class="codeph">CREATED</code></p>
</td>
<td class="cellalignment1894" headers="d243260e3782 d243260e3704">
<p>All</p>
</td>
<td class="cellalignment1900" headers="d243260e3782 d243260e3707">
<p>Creation time of the database link.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Any user can query <code class="codeph">USER_DB_LINKS</code> to determine which database links are available to that user. Only those with additional privileges can use the <code class="codeph">ALL_DB_LINKS</code> or <code class="codeph">DBA_DB_LINKS</code> view.</p>
<p>The following script queries the <code class="codeph">DBA_DB_LINKS</code> view to access link information:</p>
<pre dir="ltr">COL OWNER FORMAT a10
COL USERNAME FORMAT A8 HEADING &#34;USER&#34;
COL DB_LINK FORMAT A30
COL HOST FORMAT A7 HEADING &#34;SERVICE&#34;
SELECT * FROM DBA_DB_LINKS
/
</pre>
<p>Here, the script is invoked and the resulting output is shown:</p>
<pre dir="ltr">SQL&gt;@link_script

OWNER      DB_LINK                        USER     SERVICE CREATED
---------- ------------------------------ -------- ------- ----------
SYS        TARGET.US.EXAMPLE.COM             SYS      inst1   23-JUN-99
PUBLIC     DBL1.UK.EXAMPLE.COM               BLAKE    ora51   23-JUN-99
PUBLIC     RMAN2.US.EXAMPLE.COM                       inst2   23-JUN-99
PUBLIC     DEPT.US.EXAMPLE.COM                        inst2   23-JUN-99
JANE       DBL.UK.EXAMPLE.COM                BLAKE    ora51   23-JUN-99
SCOTT      EMP.US.EXAMPLE.COM                SCOTT    inst2   23-JUN-99
6 rows selected.
</pre></div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12175"></a>
<div class="props_rev_3"><a id="GUID-B3C75167-CB91-47CC-AD13-67FE9657613D"></a>
<h3 id="ADMIN-GUID-B3C75167-CB91-47CC-AD13-67FE9657613D" class="sect3"><span class="enumeration_section">32.5.2</span> Determining Which Link Connections Are Open</h3>
<div>
<p>You may find it useful to determine which database link connections are currently open in your session.</p>
<div class="section">
<p>Note that if you connect as <code class="codeph">SYSDBA</code>, you cannot query a view to determine all the links open for all sessions; you can only access the link information in the session within which you are working.</p>
<p>The following views show the database link connections that are currently open in your current session:</p>
<div class="tblformal" id="GUID-B3C75167-CB91-47CC-AD13-67FE9657613D__GUID-14040BA0-1E54-45AE-AFFB-3172D05131BB">
<table class="cellalignment1849" summary="Column 1 lists the name of the view. Column 2 explains the purpose of the view.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1873" id="d243260e3901">View</th>
<th class="cellalignment1961" id="d243260e3904">Purpose</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1876" id="d243260e3909" headers="d243260e3901">
<p><code class="codeph">V$DBLINK</code></p>
</td>
<td class="cellalignment1962" headers="d243260e3909 d243260e3904">
<p>Lists all open database links in your session, that is, all database links with the <code class="codeph">IN_TRANSACTION</code> column set to <code class="codeph">YES</code>.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1876" id="d243260e3923" headers="d243260e3901">
<p><code class="codeph">GV$DBLINK</code></p>
</td>
<td class="cellalignment1962" headers="d243260e3923 d243260e3904">
<p>Lists all open database links in your session along with their corresponding instances. This view is useful in an Oracle Real Application Clusters configuration.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>These data dictionary views contain the same basic information about database links, with one exception:</p>
<div class="tblformal" id="GUID-B3C75167-CB91-47CC-AD13-67FE9657613D__GUID-68E45D15-22CD-47D0-9E62-F028EC0BFBAD">
<table class="cellalignment1849" summary="Column 1 lists the view column; column 2 lists the views that contain the column; column 3 is a description of the view column.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1897" id="d243260e3941">Column</th>
<th class="cellalignment1897" id="d243260e3944">Which Views?</th>
<th class="cellalignment1898" id="d243260e3947">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1899" id="d243260e3952" headers="d243260e3941">
<p><code class="codeph">DB_LINK</code></p>
</td>
<td class="cellalignment1899" headers="d243260e3952 d243260e3944">
<p>All</p>
</td>
<td class="cellalignment1900" headers="d243260e3952 d243260e3947">
<p>The name of the database link.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1899" id="d243260e3964" headers="d243260e3941">
<p><code class="codeph">OWNER_ID</code></p>
</td>
<td class="cellalignment1899" headers="d243260e3964 d243260e3944">
<p>All</p>
</td>
<td class="cellalignment1900" headers="d243260e3964 d243260e3947">
<p>The owner of the database link.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1899" id="d243260e3976" headers="d243260e3941">
<p><code class="codeph">LOGGED_ON</code></p>
</td>
<td class="cellalignment1899" headers="d243260e3976 d243260e3944">
<p>All</p>
</td>
<td class="cellalignment1900" headers="d243260e3976 d243260e3947">
<p>Whether the database link is currently logged on.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1899" id="d243260e3988" headers="d243260e3941">
<p><code class="codeph">HETEROGENEOUS</code></p>
</td>
<td class="cellalignment1899" headers="d243260e3988 d243260e3944">
<p>All</p>
</td>
<td class="cellalignment1900" headers="d243260e3988 d243260e3947">
<p>Whether the database link is homogeneous (<code class="codeph">NO</code>) or heterogeneous (<code class="codeph">YES</code>).</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1899" id="d243260e4006" headers="d243260e3941">
<p><code class="codeph">PROTOCOL</code></p>
</td>
<td class="cellalignment1899" headers="d243260e4006 d243260e3944">
<p>All</p>
</td>
<td class="cellalignment1900" headers="d243260e4006 d243260e3947">
<p>The communication protocol for the database link.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1899" id="d243260e4018" headers="d243260e3941">
<p><code class="codeph">OPEN_CURSORS</code></p>
</td>
<td class="cellalignment1899" headers="d243260e4018 d243260e3944">
<p>All</p>
</td>
<td class="cellalignment1900" headers="d243260e4018 d243260e3947">
<p>Whether cursors are open for the database link.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1899" id="d243260e4030" headers="d243260e3941">
<p><code class="codeph">IN_TRANSACTION</code></p>
</td>
<td class="cellalignment1899" headers="d243260e4030 d243260e3944">
<p>All</p>
</td>
<td class="cellalignment1900" headers="d243260e4030 d243260e3947">
<p>Whether the database link is accessed in a transaction that has not yet been committed or rolled back.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1899" id="d243260e4042" headers="d243260e3941">
<p><code class="codeph">UPDATE_SENT</code></p>
</td>
<td class="cellalignment1899" headers="d243260e4042 d243260e3944">
<p>All</p>
</td>
<td class="cellalignment1900" headers="d243260e4042 d243260e3947">
<p>Whether there was an update on the database link.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1899" id="d243260e4054" headers="d243260e3941">
<p><code class="codeph">COMMIT_POINT_STRENGTH</code></p>
</td>
<td class="cellalignment1899" headers="d243260e4054 d243260e3944">
<p>All</p>
</td>
<td class="cellalignment1900" headers="d243260e4054 d243260e3947">
<p>The commit point strength of the transactions using the database link.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1899" id="d243260e4066" headers="d243260e3941">
<p><code class="codeph">INST_ID</code></p>
</td>
<td class="cellalignment1899" headers="d243260e4066 d243260e3944">
<p><code class="codeph">GV$DBLINK</code> only</p>
</td>
<td class="cellalignment1900" headers="d243260e4066 d243260e3947">
<p>The instance from which the view information was obtained.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>For example, you can create and execute the script below to determine which links are open (sample output included):</p>
<pre dir="ltr">COL DB_LINK FORMAT A25
COL OWNER_ID FORMAT 99999 HEADING &#34;OWNID&#34;
COL LOGGED_ON FORMAT A5 HEADING &#34;LOGON&#34;
COL HETEROGENEOUS FORMAT A5 HEADING &#34;HETER&#34;
COL PROTOCOL FORMAT A8
COL OPEN_CURSORS FORMAT 999 HEADING &#34;OPN_CUR&#34;
COL IN_TRANSACTION FORMAT A3 HEADING &#34;TXN&#34;
COL UPDATE_SENT FORMAT A6 HEADING &#34;UPDATE&#34;
COL COMMIT_POINT_STRENGTH FORMAT 99999 HEADING &#34;C_P_S&#34;

SELECT * FROM V$DBLINK
/

SQL&gt; @dblink

DB_LINK                   OWNID LOGON HETER PROTOCOL OPN_CUR TXN UPDATE  C_P_S
------------------------- ------ ----- ----- -------- ------- --- ------ ------
INST2.EXAMPLE.COM                 0 YES   YES    UNKN          0 YES YES       255
</pre></div>
<!-- class="section" --></div>
</div>
</div>
<a id="ADMIN12176"></a>
<div class="props_rev_3"><a id="GUID-691544B4-D838-4715-8D5A-10C7666BC719"></a>
<h2 id="ADMIN-GUID-691544B4-D838-4715-8D5A-10C7666BC719" class="sect2"><span class="enumeration_section">32.6</span> Creating Location Transparency</h2>
<p>After you have configured the necessary database links, you can use various tools to hide the distributed nature of the database system from users. In other words, users can access remote objects as if they were local objects.</p>
<a id="ADMIN13142"></a><a id="ADMIN12177"></a>
<div class="props_rev_3"><a id="GUID-1048919D-1449-4D8F-A4C9-9DC47E13577D"></a>
<h3 id="ADMIN-GUID-1048919D-1449-4D8F-A4C9-9DC47E13577D" class="sect3"><span class="enumeration_section">32.6.1</span> Using Views to Create Location Transparency</h3>
<div>
<p>Local views can provide location transparency for local and remote tables in a distributed database system.</p>
<div class="section">
<p>For example, assume that table <code class="codeph">emp</code> is stored in a local database and table <code class="codeph">dept</code> is stored in a remote database. To make these tables transparent to users of the system, you can create a view in the local database that joins local and remote data:</p>
<pre dir="ltr">CREATE VIEW company AS
   SELECT a.empno, a.ename, b.dname 
   FROM scott.emp a, jward.dept@hq.example.com b 
   WHERE a.deptno = b.deptno; 
</pre>
<div class="figure" id="GUID-1048919D-1449-4D8F-A4C9-9DC47E13577D__GUID-AA0EC046-8F1F-4094-ABB2-7030AD92FC8F">
<p class="titleinfigure">Figure 32-3 Views and Location Transparency</p>
<img width="627" height="528" src="img/GUID-BE8BC23A-36D7-43A9-8721-1432A228141E-default.gif" alt="Description of Figure 32-3 follows" title="Description of Figure 32-3 follows"/><br/>
<a href="img_text/GUID-BE8BC23A-36D7-43A9-8721-1432A228141E-print.htm">Description of &#34;Figure 32-3 Views and Location Transparency&#34;</a></div>
<!-- class="figure" -->
<p>When users access this view, they do not need to know where the data is physically stored, or if data from more than one table is being accessed. Thus, it is easier for them to get required information. For example, the following query provides data from both the local and remote database table:</p>
<pre dir="ltr">SELECT * FROM company; 
</pre>
<p>The owner of the local view can grant only those object privileges on the local view that have been granted by the remote user. (The remote user is implied by the type of database link). This is similar to privilege management for views that reference local data.<a id="d243260e4242" class="indexterm-anchor"></a><a id="d243260e4246" class="indexterm-anchor"></a><a id="d243260e4250" class="indexterm-anchor"></a><a id="d243260e4254" class="indexterm-anchor"></a><a id="d243260e4258" class="indexterm-anchor"></a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12178"></a>
<div class="props_rev_3"><a id="GUID-FB669981-39AF-4DCA-95DA-568BFB81903A"></a>
<h3 id="ADMIN-GUID-FB669981-39AF-4DCA-95DA-568BFB81903A" class="sect3"><span class="enumeration_section">32.6.2</span> Using Synonyms to Create Location Transparency</h3>
<p>Synonyms are useful in both distributed and non-distributed environments because they hide the identity of the underlying object, including its location in a distributed database system. If you must rename or move the underlying object, you only need to redefine the synonym; applications based on the synonym continue to function normally. Synonyms also simplify SQL statements for users in a distributed database system.</p>
<a id="ADMIN12705"></a><a id="ADMIN12179"></a>
<div class="props_rev_3"><a id="GUID-A0273862-9C06-403D-9E26-F1DAAE67DFA3"></a>
<h4 id="ADMIN-GUID-A0273862-9C06-403D-9E26-F1DAAE67DFA3" class="sect4"><span class="enumeration_section">32.6.2.1</span> Creating Synonyms</h4>
<div>
<p>All synonyms are schema objects that are stored in the data dictionary of the database in which they are created. To simplify remote table access through database links, a synonym can allow single-word access to remote data, hiding the specific object name and the location from users of the synonym.</p>
<div class="section">
<p>You can create synonyms for the following:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Tables</p>
</li>
<li>
<p>Types</p>
</li>
<li>
<p>Views</p>
</li>
<li>
<p>Materialized views</p>
</li>
<li>
<p>Sequences</p>
</li>
<li>
<p>Procedures</p>
</li>
<li>
<p>Functions</p>
</li>
<li>
<p>Packages</p>
</li>
</ul>
<p>The syntax to create a synonym is:</p>
<pre dir="ltr">CREATE [PUBLIC] SYNONYM <span class="italic">synonym_name</span> 
FOR [<span class="italic">schema</span>.]<span class="italic">object_name</span>[@<span class="italic">database_link_name</span>]; 
</pre>
<p>where:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">PUBLIC</code> is a keyword specifying that this synonym is available to all users. Omitting this parameter makes a synonym private, and usable only by the creator. Public synonyms can be created only by a user with <code class="codeph">CREATE PUBLIC SYNONYM</code> system privilege.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">synonym_name</code></span> specifies the alternate object name to be referenced by users and applications.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">schema</code></span> specifies the schema of the object specified in <span class="italic"><code class="codeph">object_name</code></span>. Omitting this parameter uses the schema of the creator as the schema of the object.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">object_name</code></span> specifies either a table, view, sequence, materialized view, type, procedure, function or package as appropriate.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">database_link_name</code></span> specifies the database link identifying the remote database and schema in which the object specified in <span class="italic"><code class="codeph">object_name</code></span> is located.</p>
</li>
</ul>
<p>A synonym must be a uniquely named object for its schema. If a schema contains a schema object and a public synonym exists with the same name, then the database always finds the schema object when the user that owns the schema references that name.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Example: Creating a Public Synonym</p>
</div>
<!-- class="section" -->
<div class="section">
<p>Assume that in every database in a distributed database system, a public synonym is defined for the <code class="codeph">scott.emp</code> table stored in the <code class="codeph">hq</code> database:</p>
<pre dir="ltr">CREATE PUBLIC SYNONYM emp FOR scott.emp@hq.example.com; 
</pre>
<p>You can design an employee management application without regard to where the application is used because the location of the table <code class="codeph">scott.emp@hq.example.com</code> is hidden by the public synonyms. SQL statements in the application access the table by referencing the public synonym <code class="codeph">emp</code>.</p>
<p>Furthermore, if you move the <code class="codeph">emp</code> table from the <code class="codeph">hq</code> database to the <code class="codeph">hr</code> database, then you only need to change the public synonyms on the nodes of the system. The employee management application continues to function properly on all nodes.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12180"></a>
<div class="props_rev_3"><a id="GUID-29D782EC-9BC7-47F7-8D84-A57EE9FB68B9"></a>
<h4 id="ADMIN-GUID-29D782EC-9BC7-47F7-8D84-A57EE9FB68B9" class="sect4"><span class="enumeration_section">32.6.2.2</span> Managing Privileges and Synonyms</h4>
<div>
<p>A synonym is a reference to an actual object. A user who has access to a synonym for a particular schema object must also have privileges on the underlying schema object itself.</p>
<p>For example, if the user attempts to access a synonym but does not have privileges on the table it identifies, an error occurs indicating that the table or view does not exist.</p>
<p>Assume <code class="codeph">scott</code> creates local synonym <code class="codeph">emp</code> as an alias for remote object <code class="codeph">scott.emp@sales.example.com. scott</code> <span class="italic">cannot</span> grant object privileges on the synonym to another local user. <code class="codeph">scott</code> cannot grant local privileges for the synonym because this operation amounts to granting privileges for the remote <code class="codeph">emp</code> table on the <code class="codeph">sales</code> database, which is not allowed. This behavior is different from privilege management for synonyms that are aliases for local tables or views.</p>
<p>Therefore, you cannot manage local privileges when synonyms are used for location transparency. Security for the base object is controlled entirely at the remote node. For example, user <code class="codeph">admin</code> cannot grant object privileges for the <code class="codeph">emp_syn</code> synonym.</p>
<p>Unlike a database link referenced in a view or procedure definition, a database link referenced in a synonym is resolved by first looking for a private link owned by the schema in effect at the time the reference to the synonym is parsed. Therefore, to ensure the desired object resolution, it is especially important to specify the schema of the underlying object in the definition of a synonym.</p>
</div>
</div>
</div>
<a id="ADMIN12181"></a>
<div class="props_rev_3"><a id="GUID-CFD412E2-5856-4323-9D64-AFE63DF07B10"></a>
<h3 id="ADMIN-GUID-CFD412E2-5856-4323-9D64-AFE63DF07B10" class="sect3"><span class="enumeration_section">32.6.3</span> Using Procedures to Create Location Transparency</h3>
<p>PL/SQL program units called <span class="bold">procedures</span> can provide location transparency.</p>
<a id="ADMIN12182"></a>
<div class="props_rev_3"><a id="GUID-5E17CC95-DE6E-4E77-AEA8-C71458A393A6"></a>
<h4 id="ADMIN-GUID-5E17CC95-DE6E-4E77-AEA8-C71458A393A6" class="sect4"><span class="enumeration_section">32.6.3.1</span> Using Local Procedures to Reference Remote Data</h4>
<div>
<p>Procedures or functions (either standalone or in packages) can contain SQL statements that reference remote data.</p>
<div class="section">
<p>For example, consider the procedure created by the following statement:</p>
<pre dir="ltr">CREATE PROCEDURE fire_emp (enum NUMBER) AS 
BEGIN 
  DELETE FROM emp@hq.example.com 
  WHERE empno = enum;
END; 
</pre>
<p>When a user or application calls the <code class="codeph">fire_emp</code> procedure, it is not apparent that a remote table is being modified.</p>
<p>A second layer of location transparency is possible when the statements in a procedure indirectly reference remote data using local procedures, views, or synonyms. For example, the following statement defines a local synonym:</p>
<pre dir="ltr">CREATE SYNONYM emp FOR emp@hq.example.com; 
</pre>
<p>Given this synonym, you can create the <code class="codeph">fire_emp</code> procedure using the following statement:</p>
<pre dir="ltr">CREATE PROCEDURE fire_emp (enum NUMBER) AS 
BEGIN 
  DELETE FROM emp WHERE empno = enum; 
END; 
</pre>
<p>If you rename or move the table <code class="codeph">emp@hq</code>, then you only need to modify the local synonym that references the table. None of the procedures and applications that call the procedure require modification.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12183"></a>
<div class="props_rev_3"><a id="GUID-F56417A3-90F0-4E1A-B938-0D96D312428B"></a>
<h4 id="ADMIN-GUID-F56417A3-90F0-4E1A-B938-0D96D312428B" class="sect4"><span class="enumeration_section">32.6.3.2</span> Using Local Procedures to Call Remote Procedures</h4>
<div>
<p>You can use a local procedure to call a remote procedure. The remote procedure can then execute the required DML.</p>
<div class="section">
<p>For example, assume that <code class="codeph">scott</code> connects to <code class="codeph">local_db</code> and creates the following procedure:</p>
<pre dir="ltr">CONNECT scott@local_db

CREATE PROCEDURE fire_emp (enum NUMBER) 
AS 
BEGIN 
  EXECUTE term_emp@hq.example.com;
END; 
</pre>
<p>Now, assume that <code class="codeph">scott</code> connects to the remote database and creates the remote procedure:</p>
<pre dir="ltr">CONNECT scott@hq.example.com

CREATE PROCEDURE term_emp (enum NUMBER) 
AS 
BEGIN 
  DELETE FROM emp WHERE empno = enum;
END;
</pre>
<p>When a user or application connected to <code class="codeph">local_db</code> calls the <code class="codeph">fire_emp</code> procedure, this procedure in turn calls the remote <code class="codeph">term_emp</code> procedure on <code class="codeph">hq.example.com</code>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12184"></a>
<div class="props_rev_3"><a id="GUID-BD7A9AC7-9CFE-42E1-9738-9CBE96D1F9AB"></a>
<h4 id="ADMIN-GUID-BD7A9AC7-9CFE-42E1-9738-9CBE96D1F9AB" class="sect4"><span class="enumeration_section">32.6.3.3</span> Using Local Synonyms to Reference Remote Procedures</h4>
<div>
<p>You can use a local synonym to reference a remote procedure.</p>
<div class="section">
<p>For example, <code class="codeph">scott</code> connects to the local <code class="codeph">sales.example.com</code> database and creates the following procedure:</p>
<pre dir="ltr">CREATE PROCEDURE fire_emp (enum NUMBER) AS 
BEGIN 
DELETE FROM emp@hq.example.com 
WHERE empno = enum; 
END; 
</pre>
<p>User <code class="codeph">peggy</code> then connects to the <code class="codeph">supply.example.com</code> database and creates the following synonym for the procedure that <code class="codeph">scott</code> created on the remote <code class="codeph">sales</code> database:</p>
<pre dir="ltr">SQL&gt; CONNECT peggy@supply
SQL&gt; CREATE PUBLIC SYNONYM emp FOR scott.fire_emp@sales.example.com; 
</pre>
<p>A local user on <code class="codeph">supply</code> can use this synonym to execute the procedure on <code class="codeph">sales</code>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12185"></a>
<div class="props_rev_3"><a id="GUID-91E6578C-CD27-4174-AA7A-1BB0C02C6233"></a>
<h4 id="ADMIN-GUID-91E6578C-CD27-4174-AA7A-1BB0C02C6233" class="sect4"><span class="enumeration_section">32.6.3.4</span> Managing Procedures and Privileges</h4>
<div>
<p>Assume a local procedure includes a statement that references a remote table or view. The owner of the local procedure can grant the <code class="codeph">execute</code> privilege to any user, thereby giving that user the ability to execute the procedure and, indirectly, access remote data.</p>
<p>In general, procedures aid in security. Privileges for objects referenced within a procedure do not need to be explicitly granted to the calling users.</p>
</div>
</div>
</div>
</div>
<a id="ADMIN12706"></a><a id="ADMIN12186"></a>
<div class="props_rev_3"><a id="GUID-C2AF35B6-3650-469A-A802-DC3CD712B796"></a>
<h2 id="ADMIN-GUID-C2AF35B6-3650-469A-A802-DC3CD712B796" class="sect2"><span class="enumeration_section">32.7</span> Managing Statement Transparency</h2>
<div>
<p>In a distributed database, some SQL statements can reference remote tables.</p>
<p>The database allows the following standard DML statements to reference remote tables:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">SELECT</code> (queries)</p>
</li>
<li>
<p><code class="codeph">INSERT</code></p>
</li>
<li>
<p><code class="codeph">UPDATE</code></p>
</li>
<li>
<p><code class="codeph">DELETE</code></p>
</li>
<li>
<p><code class="codeph">SELECT...FOR UPDATE</code> (not always supported in Heterogeneous Systems)</p>
</li>
<li>
<p><code class="codeph">LOCK TABLE</code></p>
</li>
</ul>
<p>Queries including joins, aggregates, subqueries, and <code class="codeph">SELECT...FOR UPDATE</code> can reference any number of local and remote tables and views. For example, the following query joins information from two remote tables:</p>
<pre dir="ltr">SELECT e.empno, e.ename, d.dname 
  FROM scott.emp@sales.division3.example.com e, jward.dept@hq.example.com d 
  WHERE e.deptno = d.deptno; 
</pre>
<p>In a homogeneous environment, <code class="codeph">UPDATE</code>, <code class="codeph">INSERT</code>, <code class="codeph">DELETE</code>, and <code class="codeph">LOCK TABLE</code> statements can reference both local and remote tables. No programming is necessary to update remote data. For example, the following statement inserts new rows into the remote table <code class="codeph">emp</code> in the <code class="codeph">scott.sales</code> schema by selecting rows from the <code class="codeph">emp</code> table in the <code class="codeph">jward</code> schema in the local database:</p>
<pre dir="ltr">INSERT INTO scott.emp@sales.division3.example.com 
  SELECT * FROM jward.emp;
</pre>
<div class="section">
<p class="subhead2">Restrictions for Statement Transparency:</p>
</div>
<!-- class="section" -->
<div class="section">
<p>Several restrictions apply to statement transparency.</p>
<ul style="list-style-type: disc;">
<li>
<p>Data manipulation language statements that update objects on a remote non-Oracle Database system cannot reference any objects on the local Oracle Database. For example, a statement such as the following will cause an error to be raised:</p>
<pre dir="ltr">INSERT INTO remote_table@link as SELECT * FROM local_table;
</pre></li>
<li>
<p>Within a single SQL statement, all referenced <code class="codeph">LONG</code> and <code class="codeph">LONG RAW</code> columns, sequences, updated tables, and locked tables must be located at the same node.</p>
</li>
<li>
<p>The database does not allow remote DDL statements (for example, <code class="codeph">CREATE</code>, <code class="codeph">ALTER</code>, and <code class="codeph">DROP</code>) in homogeneous systems except through remote execution of procedures of the <code class="codeph">DBMS_SQL</code> package, as in this example:</p>
<pre dir="ltr">DBMS_SQL.PARSE@link_name(crs, &#39;drop table emp&#39;, v7);
</pre>
<p>Note that in Heterogeneous Systems, a pass-through facility lets you execute DDL.</p>
</li>
<li>
<p>The <code class="codeph">LIST CHAINED ROWS</code> clause of an <code class="codeph">ANALYZE</code> statement cannot reference remote tables.</p>
</li>
<li>
<p>In a distributed database system, the database always evaluates environmentally-dependent SQL functions such as <code class="codeph">SYSDATE</code>, <code class="codeph">USER</code>, <code class="codeph">UID</code>, and <code class="codeph">USERENV</code> with respect to the local server, no matter where the statement (or portion of a statement) executes.</p>
<div class="infobox-note" id="GUID-C2AF35B6-3650-469A-A802-DC3CD712B796__GUID-6472834F-23AA-48BE-BB46-68EB241A7BD9">
<p class="notep1">Note:</p>
<p>Oracle Database supports the <code class="codeph">USERENV</code> function for queries only.</p>
</div>
</li>
<li>
<p>Several performance restrictions relate to access of remote objects:</p>
<ul style="list-style-type: disc;">
<li>
<p>Remote views do not have statistical data.</p>
</li>
<li>
<p>Queries on partitioned tables may not be optimized.</p>
</li>
<li>
<p>No more than 20 indexes are considered for a remote table.</p>
</li>
<li>
<p>No more than 20 columns are used for a composite index.</p>
</li>
</ul>
</li>
<li>
<p>There is a restriction in the Oracle Database implementation of distributed read consistency that can cause one node to be in the past with respect to another node. In accordance with read consistency, a query may end up retrieving consistent, but out-of-date data. See <span class="q">&#34;<a href="ds_txnman.htm#GUID-195124A5-FF1B-40BA-BAF9-CB5272E8BFD3" title="An important restriction exists in the Oracle Database implementation of distributed read consistency.">Managing Read Consistency</a>&#34;</span> to learn how to manage this problem.</p>
<div class="infoboxnotealso" id="GUID-C2AF35B6-3650-469A-A802-DC3CD712B796__GUID-7EF100DF-6EBB-4690-988C-90CD14FC51C1">
<p class="notep1">See Also:</p>
<p><a class="olink ARPLS058" target="_blank" href="../ARPLS/d_sql.htm#ARPLS058"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code class="codeph">DBMS_SQL</code> package</p>
</div>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12187"></a>
<div class="props_rev_3"><a id="GUID-F6668F20-03A5-4817-A618-9B308C27FE3E"></a>
<h2 id="ADMIN-GUID-F6668F20-03A5-4817-A618-9B308C27FE3E" class="sect2"><span class="enumeration_section">32.8</span> Managing a Distributed Database: Examples</h2>
<p>Examples illustrate managing database links.</p>
<a id="ADMIN12188"></a>
<div class="props_rev_3"><a id="GUID-6F2CD9A1-7A46-4AE5-9B77-65038F5D38DA"></a>
<h3 id="ADMIN-GUID-6F2CD9A1-7A46-4AE5-9B77-65038F5D38DA" class="sect3"><span class="enumeration_section">32.8.1</span> Example 1: Creating a Public Fixed User Database Link</h3>
<div>
<p>An example illustrates creating a public fixed user database link.</p>
<div class="section">
<p>The following statements connect to the local database as <code class="codeph">jane</code> and create a public fixed user database link to database <code class="codeph">sales</code> for <code class="codeph">scott</code>. The database is accessed through its net service name <code class="codeph">sldb</code>:</p>
<pre dir="ltr">CONNECT jane@local

CREATE PUBLIC DATABASE LINK sales.division3.example.com
  CONNECT TO scott IDENTIFIED BY <span class="italic">password</span>
  USING &#39;sldb&#39;;
</pre>
<p>After executing these statements, any user connected to the local database can use the <code class="codeph">sales.division3.example.com</code> database link to connect to the remote database. Each user connects to the schema <code class="codeph">scott</code> in the remote database.</p>
<p>To access the table <code class="codeph">emp</code> table in <code class="codeph">scott</code>&#39;s remote schema, a user can issue the following SQL query:</p>
<pre dir="ltr">SELECT * FROM emp@sales.division3.example.com;
</pre>
<p>Note that each application or user session creates a separate connection to the common account on the server. The connection to the remote database remains open for the duration of the application or user session.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12189"></a>
<div class="props_rev_3"><a id="GUID-79D41291-6093-4941-A7EE-838BDDFC3027"></a>
<h3 id="ADMIN-GUID-79D41291-6093-4941-A7EE-838BDDFC3027" class="sect3"><span class="enumeration_section">32.8.2</span> Example 2: Creating a Public Fixed User Shared Database Link</h3>
<div>
<p>An example illustrates creating a public fixed user shared database link.</p>
<div class="section">
<p>The following example connects to the local database as <code class="codeph">dana</code> and creates a public link to the <code class="codeph">sales</code> database (using its net service name <code class="codeph">sldb</code>). The link allows a connection to the remote database as <code class="codeph">scott</code> and authenticates this user as <code class="codeph">scott</code>:</p>
<pre dir="ltr">CONNECT dana@local

CREATE SHARED PUBLIC DATABASE LINK sales.division3.example.com
  CONNECT TO scott IDENTIFIED BY <span class="italic">password</span> 
  AUTHENTICATED BY scott IDENTIFIED BY <span class="italic">password</span>
  USING &#39;sldb&#39;;
</pre>
<p>Now, any user connected to the local shared server can use this database link to connect to the remote <code class="codeph">sales</code> database through a shared server process. The user can then query tables in the <code class="codeph">scott</code> schema.</p>
<p>In the preceding example, each local shared server can establish one connection to the remote server. Whenever a local shared server process must access the remote server through the <code class="codeph">sales.division3.example.com</code> database link, the local shared server process reuses established network connections.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12190"></a>
<div class="props_rev_3"><a id="GUID-711C9E53-9A33-4CB1-8EFD-4EE53A314402"></a>
<h3 id="ADMIN-GUID-711C9E53-9A33-4CB1-8EFD-4EE53A314402" class="sect3"><span class="enumeration_section">32.8.3</span> Example 3: Creating a Public Connected User Database Link</h3>
<div>
<p>An example illustrates creating a public connected user database link.</p>
<div class="section">
<p>The following example connects to the local database as <code class="codeph">larry</code> and creates a public link to the database with the net service name <code class="codeph">sldb</code>:</p>
<pre dir="ltr">CONNECT larry@local

CREATE PUBLIC DATABASE LINK redwood
  USING &#39;sldb&#39;;
</pre>
<p>Any user connected to the local database can use the <code class="codeph">redwood</code> database link. The connected user in the local database who uses the database link determines the remote schema.</p>
<p>If <code class="codeph">scott</code> is the connected user and uses the database link, then the database link connects to the remote schema <code class="codeph">scott</code>. If <code class="codeph">fox</code> is the connected user and uses the database link, then the database link connects to remote schema <code class="codeph">fox</code>.</p>
<p>The following statement fails for local user <code class="codeph">fox</code> in the local database when the remote schema <code class="codeph">fox</code> cannot resolve the <code class="codeph">emp</code> schema object. That is, if the <code class="codeph">fox</code> schema in the <code class="codeph">sales.division3.example.com</code> does not have <code class="codeph">emp</code> as a table, view, or (public) synonym, an error will be returned.</p>
<pre dir="ltr">CONNECT fox@local

SELECT * FROM emp@redwood;
</pre></div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12191"></a>
<div class="props_rev_3"><a id="GUID-D58FA6E8-B3BD-4EB0-8864-9C13C087D023"></a>
<h3 id="ADMIN-GUID-D58FA6E8-B3BD-4EB0-8864-9C13C087D023" class="sect3"><span class="enumeration_section">32.8.4</span> Example 4: Creating a Public Connected User Shared Database Link</h3>
<div>
<p>An example illustrates creating a public connected user shared database link.</p>
<div class="section">
<p>The following example connects to the local database as <code class="codeph">neil</code> and creates a shared, public link to the <code class="codeph">sales</code> database (using its net service name <code class="codeph">sldb</code>). The user is authenticated by the userid/password of <code class="codeph">crazy/horse</code>. The following statement creates a public, connected user, shared database link:</p>
<pre dir="ltr">CONNECT neil@local

CREATE SHARED PUBLIC DATABASE LINK sales.division3.example.com 
  AUTHENTICATED BY crazy IDENTIFIED BY horse
  USING &#39;sldb&#39;;
</pre>
<p>Each user connected to the local server can use this shared database link to connect to the remote database and query the tables in the corresponding remote schema.</p>
<p>Each local, shared server process establishes one connection to the remote server. Whenever a local server process must access the remote server through the <code class="codeph">sales.division3.example.com</code> database link, the local process reuses established network connections, even if the connected user is a different user.</p>
<p>If this database link is used frequently, eventually every shared server in the local database will have a remote connection. At this point, no more physical connections are needed to the remote server, even if new users use this shared database link.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12192"></a>
<div class="props_rev_3"><a id="GUID-37EEA10E-5B1C-4745-8AA7-E0FB6BF5AC46"></a>
<h3 id="ADMIN-GUID-37EEA10E-5B1C-4745-8AA7-E0FB6BF5AC46" class="sect3"><span class="enumeration_section">32.8.5</span> Example 5: Creating a Public Current User Database Link</h3>
<div>
<p>An example illustrates creating a public current user database link.</p>
<div class="section">
<p>The following example connects to the local database as the connected user and creates a public link to the <code class="codeph">sales</code> database (using its net service name <code class="codeph">sldb</code>). The following statement creates a public current user database link:</p>
<pre dir="ltr">CONNECT bart@local

CREATE PUBLIC DATABASE LINK sales.division3.example.com
  CONNECT TO CURRENT_USER
  USING &#39;sldb&#39;;
</pre>
<div class="infobox-note" id="GUID-37EEA10E-5B1C-4745-8AA7-E0FB6BF5AC46__GUID-9EF175D0-0989-4172-BD52-DD3121F59F5D">
<p class="notep1">Note:</p>
<p>To use this link, the current user must be a global user.</p>
</div>
<p>The consequences of this database link are as follows:</p>
<p>Assume <code class="codeph">scott</code> creates local procedure <code class="codeph">fire_emp</code> that deletes a row from the remote <code class="codeph">emp</code> table, and grants execute privilege on <code class="codeph">fire_emp</code> to <code class="codeph">ford</code>.</p>
<pre dir="ltr">CONNECT scott@local_db

CREATE PROCEDURE fire_emp (enum NUMBER) 
AS
BEGIN
   DELETE FROM emp@sales.division3.example.com
   WHERE empno=enum;
END;

GRANT EXECUTE ON fire_emp TO ford;
</pre>
<p>Now, assume that <code class="codeph">ford</code> connects to the local database and runs <code class="codeph">scott</code>&#39;s procedure:</p>
<pre dir="ltr">CONNECT ford@local_db

EXECUTE PROCEDURE scott.fire_emp (enum 10345);
</pre>
<p>When <code class="codeph">ford</code> executes the procedure <code class="codeph">scott.fire_emp</code>, the procedure runs under <code class="codeph">scott</code>&#39;s privileges. Because a current user database link is used, the connection is established to <code class="codeph">scott</code>&#39;s remote schema, not <code class="codeph">ford</code>&#39;s remote schema. Note that <code class="codeph">scott</code> must be a global user while <code class="codeph">ford</code> does not have to be a global user.</p>
<div class="infobox-note" id="GUID-37EEA10E-5B1C-4745-8AA7-E0FB6BF5AC46__GUID-2D0EBDEA-6865-4066-8C83-0E742A856DE6">
<p class="notep1">Note:</p>
<p>If a connected user database link were used instead, the connection would be to <code class="codeph">ford</code>&#39;s remote schema. For more information about invoker rights and privileges, see the <a class="olink LNPLS008" target="_blank" href="../LNPLS/overview.htm#LNPLS008"><span class="italic">Oracle Database PL/SQL Language Reference</span></a>.</p>
</div>
<p>You can accomplish the same result by using a fixed user database link to <code class="codeph">scott</code>&#39;s remote schema.</p>
<pre dir="ltr"></pre></div>
<!-- class="section" --></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1842">
<tr>
<td class="cellalignment1854">
<table class="cellalignment1847">
<tr>
<td class="cellalignment1846"><a href="ds_concepts.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1846"><a href="ds_appdev.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2001, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1856">
<table class="cellalignment1845">
<tr>
<td class="cellalignment1846"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1846"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1846"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1846"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1846"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1846"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>