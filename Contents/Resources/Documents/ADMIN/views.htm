<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-340"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Managing%20Views%2C%20Sequences%2C%20and%20Synonyms"></a><title>Managing Views, Sequences, and Synonyms</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="You can create and manage views, sequences, and synonyms with Oracle Database."/>
<meta name="keywords" content="views, managing, privileges, ORDER BY clause and, FOR UPDATE clause and, WITH CHECK OPTION, CREATE VIEW statement, creating, creating views, about, join views, definition, join, See join views, creating with errors, OR REPLACE clause, PL/SQL, replaced views and program units, using, using a view, restrictions, invalid, modifying, updating, key-preserved tables, in join views, tables, key-preserved, key-preserved tables in, rules for modifying, DELETE statements, outer joins, dropping, sequences, creating sequences, CREATE SEQUENCE statement, altering, ALTER SEQUENCE statement, using sequences, accessing, CURRVAL pseudo-column, NEXTVAL pseudo-column, NEXTVAL, CURRVAL, caches, sequence numbers, caching sequence numbers, SGA, system global area, holds sequence number cache, SEQUENCE_CACHE_ENTRIES parameter, CACHE option, public synonyms, private synonyms, synonyms, public, private, creating synonyms, CREATE SYNONYM statement, DROP SYNONYM statement, data dictionary views for, data dictionary, for views, data dictionary views reference, for synonyms, for sequences"/>
<meta name="dcterms.created" content="2017-07-10T12:24:11Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Administrator&rsquo;s Guide"/>
<meta name="dcterms.identifier" content="E41484-15"/>
<meta name="dcterms.isVersionOf" content="ADMIN"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2001, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="hash.htm" title="Previous" type="text/html"/>
<link rel="Next" href="repair.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41484-15.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-11AE4E2F-B193-4FEE-89C5-62C1CB7ABCC5"></a> <span id="PAGE" style="display:none;">31/59</span> <!-- End Header -->
<a id="ADMIN020"></a>
<h1 id="ADMIN-GUID-11AE4E2F-B193-4FEE-89C5-62C1CB7ABCC5" class="sect1"><span class="enumeration_chapter">24</span> Managing Views, Sequences, and Synonyms</h1>
<p>You can create and manage views, sequences, and synonyms with Oracle Database.</p>
<a id="ADMIN11774"></a>
<div class="props_rev_3"><a id="GUID-6A691576-77B3-4DAF-ABC7-3EF4707302D4"></a>
<h2 id="ADMIN-GUID-6A691576-77B3-4DAF-ABC7-3EF4707302D4" class="sect2"><span class="enumeration_section">24.1</span> Managing Views</h2>
<div>
<p>You can perform tasks such as creating views, replacing views, altering views, and dropping views.</p>
<div class="infobox-note" id="GUID-6A691576-77B3-4DAF-ABC7-3EF4707302D4__GUID-25BF0A76-567A-4838-86B5-2A82127BCBC5">
<p class="notep1">Live SQL:</p>
<p>To view and run examples related to managing views on Oracle Live SQL, go to <a href="https://livesql.oracle.com/apex/livesql/docs/admin/managing-views/create-modify.html" target="_blank"><span class="italic">Oracle Live SQL: Creating, Replacing, and Dropping a View</span></a>.</p>
</div>
</div>
<a id="ADMIN11775"></a>
<div class="props_rev_3"><a id="GUID-B227BBFC-7B6D-400A-AFD7-1E73F1AF1FDB"></a>
<h3 id="ADMIN-GUID-B227BBFC-7B6D-400A-AFD7-1E73F1AF1FDB" class="sect3"><span class="enumeration_section">24.1.1</span> About Views</h3>
<div>
<p>A <span class="bold">view</span> is a logical representation of a table or combination of tables. In essence, a view is a stored query.</p>
<p>A view derives its data from the tables on which it is based. These tables are called <span class="bold">base tables</span>. Base tables might in turn be actual tables or might be views themselves. All operations performed on a view actually affect the base table of the view. You can use views in almost the same way as tables. You can query, update, insert into, and delete from views, just as you can standard tables.</p>
<p>Views can provide a different representation (such as subsets or supersets) of the data that resides within other tables and views. Views are very powerful because they allow you to tailor the presentation of data to different types of users.</p>
<div class="infobox-note" id="GUID-B227BBFC-7B6D-400A-AFD7-1E73F1AF1FDB__GUID-FD0759F3-58C1-4EF4-8609-C024CF2AF75C">
<p class="notep1">Note:</p>
<p>One special type of view is the editioning view, which is used only to support online upgrade of applications using edition-based redefinition. The remainder of this section on managing views describes all views except editioning views. See <a class="olink ADFNS0202" target="_blank" href="../ADFNS/adfns_editions.htm#ADFNS0202"><span class="italic">Oracle Database Development Guide</span></a> for a discussion of editioning views and edition-based redefinition.</p>
</div>
<div class="infoboxnotealso" id="GUID-B227BBFC-7B6D-400A-AFD7-1E73F1AF1FDB__GUID-60B61CD0-C0A2-4F8C-AFD1-1BB02681D8CA">
<p class="notep1">See Also:</p>
<p><a class="olink CNCPT311" target="_blank" href="../CNCPT/schemaob.htm#CNCPT311"><span class="italic">Oracle Database Concepts</span></a> for an overview of views</p>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-9898DF36-693A-4A55-9D3A-81EA74B40482"></a>
<h3 id="ADMIN-GUID-9898DF36-693A-4A55-9D3A-81EA74B40482" class="sect3"><span class="enumeration_section">24.1.2</span> Creating Views and Join Views</h3>
<p>You can create views using the <code class="codeph">CREATE VIEW</code> statement. Each view is defined by a query that references tables, materialized views, or other views. You can also create join views that specify multiple base tables or views in the <code class="codeph">FROM</code> clause.</p>
<a id="ADMIN11776"></a>
<div class="props_rev_3"><a id="GUID-183AFB09-7E0B-4E50-A23A-A9FD469B1796"></a>
<h4 id="ADMIN-GUID-183AFB09-7E0B-4E50-A23A-A9FD469B1796" class="sect4"><span class="enumeration_section">24.1.2.1</span> Creating Views</h4>
<div>
<p>You can create a view with the <code class="codeph">CREATE VIEW</code> statement.</p>
<div class="section">
<p>To create a view, you must meet the following requirements:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>To create a view in your schema, you must have the <code class="codeph">CREATE VIEW</code> privilege. To create a view in another user&#39;s schema, you must have the <code class="codeph">CREATE ANY VIEW</code> system privilege. You can acquire these privileges explicitly or through a role.</p>
</li>
<li>
<p>The owner of the view (whether it is you or another user) must have been explicitly granted privileges to access all objects referenced in the view definition. The owner <span class="italic">cannot</span> have obtained these privileges through roles. Also, the functionality of the view depends on the privileges of the view owner. For example, if the owner of the view has only the <code class="codeph">INSERT</code> privilege for Scott&#39;s <code class="codeph">emp</code> table, then the view can be used only to insert new rows into the <code class="codeph">emp</code> table, not to <code class="codeph">SELECT</code>, <code class="codeph">UPDATE</code>, or <code class="codeph">DELETE</code> rows.</p>
</li>
<li>
<p>If the owner of the view intends to grant access to the view to other users, the owner must have received the object privileges to the base objects with the <code class="codeph">GRANT OPTION</code> or the system privileges with the <code class="codeph">ADMIN OPTION</code>.</p>
</li>
</ul>
<p>You can create views using the <code class="codeph">CREATE VIEW</code> statement. Each view is defined by a query that references tables, materialized views, or other views. As with all subqueries, the query that defines a view cannot contain the <code class="codeph">FOR UPDATE</code> clause.</p>
<p>The following statement creates a view on a subset of data in the <code class="codeph">hr.departments</code> table:</p>
<pre dir="ltr">CREATE VIEW departments_hq AS
      SELECT department_id, department_name, location_id
      FROM hr.departments
      WHERE location_id = 1700
    WITH CHECK OPTION CONSTRAINT departments_hq_cnst;
      
</pre>
<p>The query that defines the <code class="codeph">departments_hq</code> view references only rows in location 1700. Furthermore, the <code class="codeph">CHECK OPTION</code> creates the view with the constraint (named <code class="codeph">departments_hq_cnst</code>) so that <code class="codeph">INSERT</code> and <code class="codeph">UPDATE</code> statements issued against the view cannot result in rows that the view cannot select. For example, the following <code class="codeph">INSERT</code> statement successfully inserts a row into the <code class="codeph">departments</code> table with the <code class="codeph">departments_hq</code> view, which contains all rows with location 1700:</p>
<pre dir="ltr">INSERT INTO departments_hq VALUES (300, &#39;NETWORKING&#39;, 1700);
</pre>
<p>However, the following <code class="codeph">INSERT</code> statement returns an error because it attempts to insert a row for location 2700, which cannot be selected using the <code class="codeph">departments_hq</code> view:</p>
<pre dir="ltr">INSERT INTO departments_hq VALUES (301, &#39;TRANSPORTATION&#39;, 2700);
</pre>
<p>The view could have been constructed specifying the <code class="codeph">WITH READ ONLY</code> clause, which prevents any updates, inserts, or deletes from being done to the base table through the view. If no <code class="codeph">WITH</code> clause is specified, the view, with some restrictions, is inherently updatable.</p>
<p>You can also create views with invisible columns. For example, the following statements creates the <code class="codeph">departments_hq_man</code> view and makes the <code class="codeph">manager_id</code> column invisible:</p>
<pre dir="ltr">CREATE VIEW departments_hq_man 
         (department_id, department_name, manager_id INVISIBLE, location_id)
      AS SELECT department_id, department_name, manager_id, location_id
      FROM hr.departments
      WHERE location_id = 1700
    WITH CHECK OPTION CONSTRAINT departments_hq_man_cnst;
      
</pre>
<div class="infoboxnotealso" id="GUID-183AFB09-7E0B-4E50-A23A-A9FD469B1796__GUID-22D94BC1-9B46-4659-9E45-E18E4877CD5A">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF01504" target="_blank" href="../SQLRF/statements_8004.htm#SQLRF01504"><span class="italic">Oracle Database SQL Language Reference</span></a> for syntax and semantics of the <code class="codeph">CREATE VIEW</code> statement</p>
</li>
<li>
<p><span class="q">&#34;<a href="tables.htm#GUID-D7E99BBA-192C-41E7-9150-62AA188725E4" title="You can make individual table columns invisible. Any generic access of a table does not show the invisible columns in the table.">Understand Invisible Columns</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN11777"></a>
<div class="props_rev_3"><a id="GUID-933E7A1B-E646-41AC-9358-BE2C323D5FD5"></a>
<h4 id="ADMIN-GUID-933E7A1B-E646-41AC-9358-BE2C323D5FD5" class="sect4"><span class="enumeration_section">24.1.2.2</span> Creating Join Views</h4>
<div>
<p>You can also create views that specify multiple base tables or views in the <code class="codeph">FROM</code> clause of a <code class="codeph">CREATE VIEW</code> statement. These are called <span class="bold">join views</span>.</p>
<div class="section">
<p>The following statement creates the <code class="codeph">division1_staff</code> view that joins data from the <code class="codeph">emp</code> and <code class="codeph">dept</code> tables:</p>
<pre dir="ltr">CREATE VIEW division1_staff AS
      SELECT ename, empno, job, dname
      FROM emp, dept
      WHERE emp.deptno IN (10, 30)
         AND emp.deptno = dept.deptno;
</pre>
<p>An <span class="bold">updatable join view</span> is a join view where <code class="codeph">UPDATE</code>, <code class="codeph">INSERT</code>, and <code class="codeph">DELETE</code> operations are allowed. See <span class="q">&#34;<a href="views.htm#GUID-C37E704C-AF40-42DA-85ED-372A62A74E58" title="An updatable join view (also referred to as a modifiable join view) is a view that contains multiple tables in the top-level FROM clause of the SELECT statement, and is not restricted by the WITH READ ONLY clause.">Updating a Join View</a>&#34;</span> for further discussion.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN11778"></a>
<div class="props_rev_3"><a id="GUID-7AF930AE-B5DD-4500-86D2-8B4DEA91A831"></a>
<h4 id="ADMIN-GUID-7AF930AE-B5DD-4500-86D2-8B4DEA91A831" class="sect4"><span class="enumeration_section">24.1.2.3</span> Expansion of Defining Queries at View Creation Time</h4>
<div>
<p>When a view is created, Oracle Database expands any wildcard (*) in a top-level view query into a column list. The resulting query is stored in the data dictionary; any subqueries are left intact.</p>
<div class="section">
<p>The column names in an expanded column list are enclosed in quotation marks to account for the possibility that the columns of the base object were originally entered with quotes and require them for the query to be syntactically correct.</p>
<p>As an example, assume that the <code class="codeph">dept</code> view is created as follows:</p>
<pre dir="ltr">CREATE VIEW dept AS SELECT * FROM scott.dept;
</pre>
<p>The database stores the defining query of the <code class="codeph">dept</code> view as:</p>
<pre dir="ltr">SELECT &#34;DEPTNO&#34;, &#34;DNAME&#34;, &#34;LOC&#34; FROM scott.dept;
</pre>
<p>Views created with errors do not have wildcards expanded. However, if the view is eventually compiled without errors, wildcards in the defining query are expanded.<a id="d180795e728" class="indexterm-anchor"></a><a id="d180795e732" class="indexterm-anchor"></a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN11779"></a>
<div class="props_rev_3"><a id="GUID-655BC560-5588-4B05-83AB-C3C69818078C"></a>
<h4 id="ADMIN-GUID-655BC560-5588-4B05-83AB-C3C69818078C" class="sect4"><span class="enumeration_section">24.1.2.4</span> Creating Views with Errors</h4>
<div>
<p>If there are no syntax errors in a <code class="codeph">CREATE VIEW</code> statement, then the database can create the view even if the defining query of the view cannot be executed. In this case, the view is considered &#34;created with errors.&#34;</p>
<div class="section">
<p>For example, when a view is created that refers to a nonexistent table or an invalid column of an existing table, or when the view owner does not have the required privileges, the view can be created anyway and entered into the data dictionary. However, the view is not yet usable.</p>
<p>To create a view with errors, you must include the <code class="codeph">FORCE</code> clause of the <code class="codeph">CREATE VIEW</code> statement.</p>
<pre dir="ltr">CREATE FORCE VIEW AS ...;
</pre>
<p>By default, views with errors are created as <code class="codeph">INVALID</code>. When you try to create such a view, the database returns a message indicating the view was created with errors. If conditions later change so that the query of an invalid view can be executed, the view can be recompiled and be made valid (usable). For information changing conditions and their impact on views, see <span class="q">&#34;<a href="general.htm#GUID-46D82F8E-C360-4223-B469-18039B1FFB21" title="Oracle Database provides an automatic mechanism to ensure that a dependent object is always up to date with respect to its referenced objects. You can also manually recompile invalid object.">Managing Object Dependencies</a>&#34;</span>.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="ADMIN11780"></a>
<div class="props_rev_3"><a id="GUID-A742CBEF-A66F-421F-94EC-7B492A81AE82"></a>
<h3 id="ADMIN-GUID-A742CBEF-A66F-421F-94EC-7B492A81AE82" class="sect3"><span class="enumeration_section">24.1.3</span> Replacing Views</h3>
<div>
<p>You can replace a view by dropping it and re-creating it or by issuing a <code class="codeph">CREATE VIEW</code> statement that contains the <code class="codeph">OR REPLACE</code> clause.</p>
<div class="section">
<p>To replace a view, you must have all of the privileges required to drop and create a view. If the definition of a view must change, the view must be replaced; you cannot use an <code class="codeph">ALTER VIEW</code> statement to change the definition of a view. You can replace views in the following ways:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>You can drop and re-create the view.</p>
<div class="infobox-note" id="GUID-A742CBEF-A66F-421F-94EC-7B492A81AE82__GUID-447072DC-43CC-4BDA-A1EB-37F42E8AAB0C">
<p class="notep1">Note:</p>
<p>When a view is dropped, all grants of corresponding object privileges are revoked from roles and users. After the view is re-created, privileges must be regranted.</p>
</div>
</li>
<li>
<p>You can redefine the view with a <code class="codeph">CREATE VIEW</code> statement that contains the <code class="codeph">OR REPLACE</code> clause. The <code class="codeph">OR REPLACE</code> clause replaces the current definition of a view and preserves the current security authorizations. For example, assume that you created the <code class="codeph">sales_staff</code> view as shown earlier, and, in addition, you granted several object privileges to roles and other users. However, now you must redefine the <code class="codeph">sales_staff</code> view to change the department number specified in the <code class="codeph">WHERE</code> clause. You can replace the current version of the <code class="codeph">sales_staff</code> view with the following statement:</p>
<pre dir="ltr">CREATE OR REPLACE VIEW sales_staff AS
     SELECT empno, ename, deptno
     FROM emp
     WHERE deptno = 30
     WITH CHECK OPTION CONSTRAINT sales_staff_cnst;
</pre></li>
</ul>
<p>Before replacing a view, consider the following effects:</p>
<ul style="list-style-type: disc;">
<li>
<p>Replacing a view replaces the view definition in the data dictionary. All underlying objects referenced by the view are not affected.</p>
</li>
<li>
<p>If a constraint in the <code class="codeph">CHECK OPTION</code> was previously defined but not included in the new view definition, the constraint is dropped.</p>
</li>
<li>
<p>All views dependent on a replaced view become invalid (not usable). In addition, dependent PL/SQL program units may become invalid, depending on what was changed in the new version of the view. For example, if only the <code class="codeph">WHERE</code> clause of the view changes, dependent PL/SQL program units remain valid. However, if any changes are made to the number of view columns or to the view column names or data types, dependent PL/SQL program units are invalidated. See <span class="q">&#34;<a href="general.htm#GUID-46D82F8E-C360-4223-B469-18039B1FFB21" title="Oracle Database provides an automatic mechanism to ensure that a dependent object is always up to date with respect to its referenced objects. You can also manually recompile invalid object.">Managing Object Dependencies</a>&#34;</span> for more information on how the database manages such dependencies.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN11781"></a>
<div class="props_rev_3"><a id="GUID-D925865C-D627-43D0-A71A-C690DA2FCD42"></a>
<h3 id="ADMIN-GUID-D925865C-D627-43D0-A71A-C690DA2FCD42" class="sect3"><span class="enumeration_section">24.1.4</span> Using Views in Queries</h3>
<div>
<p>You can query a view. You can also perform data manipulation language (DML) operations on views, with some restrictions.</p>
<div class="section">
<p>To issue a query or an <code class="codeph">INSERT,</code> <code class="codeph">UPDATE</code>, or <code class="codeph">DELETE</code> statement against a view, you must have the <code class="codeph">SELECT,</code> <code class="codeph">READ</code>, <code class="codeph">INSERT,</code> <code class="codeph">UPDATE,</code> or <code class="codeph">DELETE</code> object privilege for the view, respectively, either explicitly or through a role.</p>
<p>Views can be queried in the same manner as tables. For example, to query the <code class="codeph">Division1_staff</code> view, enter a valid <code class="codeph">SELECT</code> statement that references the view:</p>
<pre dir="ltr">SELECT * FROM Division1_staff;

ENAME        EMPNO       JOB             DNAME
------------------------------------------------------
CLARK         7782       MANAGER         ACCOUNTING
KING          7839       PRESIDENT       ACCOUNTING
MILLER        7934       CLERK           ACCOUNTING
ALLEN         7499       SALESMAN        SALES
WARD          7521       SALESMAN        SALES
JAMES         7900       CLERK           SALES
TURNER        7844       SALESMAN        SALES
MARTIN        7654       SALESMAN        SALES
BLAKE         7698       MANAGER         SALES
</pre>
<p>With some restrictions, rows can be inserted into, updated in, or deleted from a base table using a view. The following statement inserts a new row into the <code class="codeph">emp</code> table using the <code class="codeph">sales_staff</code> view:</p>
<pre dir="ltr">INSERT INTO sales_staff
    VALUES (7954, &#39;OSTER&#39;, 30);
</pre>
<p>Restrictions on DML operations for views use the following criteria in the order listed:</p>
</div>
<!-- class="section" -->
<ol>
<li><span>If a view is defined by a query that contains <code class="codeph">SET</code> or <code class="codeph">DISTINCT</code> operators, a <code class="codeph">GROUP</code> <code class="codeph">BY</code> clause, or a group function, then rows cannot be inserted into, updated in, or deleted from the base tables using the view.</span></li>
<li><span>If a view is defined with <code class="codeph">WITH</code> <code class="codeph">CHECK</code> <code class="codeph">OPTION</code>, a row cannot be inserted into, or updated in, the base table (using the view), if the view cannot select the row from the base table.</span></li>
<li><span>If a <code class="codeph">NOT</code> <code class="codeph">NULL</code> column that does not have a <code class="codeph">DEFAULT</code> clause is omitted from the view, then a row cannot be inserted into the base table using the view.</span></li>
<li><span>If the view was created by using an expression, such as <code class="codeph">DECODE(deptno, 10, &#34;SALES&#34;, ...)</code>, then rows cannot be inserted into or updated in the base table using the view.</span></li>
</ol>
<div class="section">
<p>The constraint created by <code class="codeph">WITH</code> <code class="codeph">CHECK</code> <code class="codeph">OPTION</code> of the <code class="codeph">sales_staff</code> view only allows rows that have a department number of 30 to be inserted into, or updated in, the <code class="codeph">emp</code> table. Alternatively, assume that the <code class="codeph">sales_staff</code> view is defined by the following statement (that is, excluding the <code class="codeph">deptno</code> column):</p>
<pre dir="ltr">CREATE VIEW sales_staff AS
    SELECT empno, ename
    FROM emp
    WHERE deptno = 10
    WITH CHECK OPTION CONSTRAINT sales_staff_cnst;
</pre>
<p>Considering this view definition, you can update the <code class="codeph">empno</code> or <code class="codeph">ename</code> fields of existing records, but you cannot insert rows into the <code class="codeph">emp</code> table through the <code class="codeph">sales_staff</code> view because the view does not let you alter the <code class="codeph">deptno</code> field. If you had defined a <code class="codeph">DEFAULT</code> value of 10 on the <code class="codeph">deptno</code> field, then you could perform inserts.</p>
<p>When a user attempts to reference an invalid view, the database returns an error message to the user:</p>
<pre dir="ltr">ORA-04063: view &#39;view_name&#39; has errors
</pre>
<p>This error message is returned when a view exists but is unusable due to errors in its query (whether it had errors when originally created or it was created successfully but became unusable later because underlying objects were altered or dropped).</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect3"><a id="GUID-367FAA9B-269C-41AD-A429-631D144CF36F"></a>
<h3 id="ADMIN-GUID-367FAA9B-269C-41AD-A429-631D144CF36F" class="sect3"><span class="enumeration_section">24.1.5</span> DML Statements and Join Views</h3>
<p>Restrictions apply when issuing DML statements on join views.</p>
<a id="ADMIN11782"></a>
<div class="props_rev_3"><a id="GUID-C37E704C-AF40-42DA-85ED-372A62A74E58"></a>
<h4 id="ADMIN-GUID-C37E704C-AF40-42DA-85ED-372A62A74E58" class="sect4"><span class="enumeration_section">24.1.5.1</span> Updating a Join View</h4>
<div>
<p>An updatable join view (also referred to as a <span class="bold">modifiable join view</span>) is a view that contains multiple tables in the top-level <code class="codeph">FROM</code> clause of the <code class="codeph">SELECT</code> statement, and is not restricted by the <code class="codeph">WITH READ ONLY</code> clause.</p>
<div class="section">
<p>The rules for updatable join views are shown in the following table. Views that meet these criteria are said to be inherently updatable.</p>
<div class="tblformal" id="GUID-C37E704C-AF40-42DA-85ED-372A62A74E58__GUID-C0A1A0D1-6C12-405B-AF17-283913107AC5">
<table class="cellalignment1849" summary="Column 1 lists the rules for updatable join views, column 2 describes each rule.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1891" id="d180795e1368">Rule</th>
<th class="cellalignment1968" id="d180795e1371">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d180795e1376" headers="d180795e1368">
<p>General Rule</p>
</td>
<td class="cellalignment1969" headers="d180795e1376 d180795e1371">
<p>Any <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, or <code class="codeph">DELETE</code> operation on a join view can modify only one underlying base table at a time.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d180795e1392" headers="d180795e1368">
<p><code class="codeph">UPDATE</code> Rule</p>
</td>
<td class="cellalignment1969" headers="d180795e1392 d180795e1371">
<p>All updatable columns of a join view must map to columns of a <span class="bold">key-preserved table</span>. See <span class="q">&#34;<a href="views.htm#GUID-A661DF5B-A5CE-4569-B5F1-AE8D407E6D30" title="The concept of a key-preserved table is fundamental to understanding the restrictions on modifying join views. A table is key-preserved if every key of the table can also be a key of the result of the join. So, a key-preserved table has its keys preserved through a join.">Key-Preserved Tables</a>&#34;</span> for a discussion of key-preserved tables. If the view is defined with the <code class="codeph">WITH CHECK OPTION</code> clause, then all join columns and all columns of repeated tables are not updatable.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d180795e1418" headers="d180795e1368">
<p><code class="codeph">DELETE</code> Rule</p>
</td>
<td class="cellalignment1969" headers="d180795e1418 d180795e1371">
<p>Rows from a join view can be deleted as long as there is exactly one key-preserved table in the join. The key preserved table can be repeated in the <code class="codeph">FROM</code> clause. If the view is defined with the <code class="codeph">WITH CHECK OPTION</code> clause and the key preserved table is repeated, then the rows cannot be deleted from the view.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d180795e1433" headers="d180795e1368">
<p><code class="codeph">INSERT</code> Rule</p>
</td>
<td class="cellalignment1969" headers="d180795e1433 d180795e1371">
<p>An <code class="codeph">INSERT</code> statement must not explicitly or implicitly refer to the columns of a <span class="bold">non-key-preserved table</span>. If the join view is defined with the <code class="codeph">WITH CHECK OPTION</code> clause, <code class="codeph">INSERT</code> statements are not permitted.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>There are data dictionary views that indicate whether the columns in a join view are inherently updatable. See <span class="q">&#34;<a href="views.htm#GUID-1A4049C2-62FE-4EDA-B01E-5B0C74D56ABF" title="A set of views can assist you in identifying inherently updatable join views.">Using the UPDATABLE_ COLUMNS Views</a>&#34;</span> for descriptions of these views.</p>
<div class="infobox-note" id="GUID-C37E704C-AF40-42DA-85ED-372A62A74E58__GUID-7DD9B908-5050-460B-B515-AB63B354D0FF">
<p class="notep1">Note:</p>
<p>There are some additional restrictions and conditions that can affect whether a join view is inherently updatable. Specifics are listed in the description of the <code class="codeph">CREATE VIEW</code> statement in the <a class="olink SQLRF01504" target="_blank" href="../SQLRF/statements_8004.htm#SQLRF01504"><span class="italic">Oracle Database SQL Language Reference.</span></a></p>
<p>If a view is not inherently updatable, it can be made updatable by creating an <code class="codeph">INSTEAD</code> <code class="codeph">OF</code> trigger on it. See <a class="olink LNPLS020" target="_blank" href="../LNPLS/overview.htm#LNPLS020"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about triggers.</p>
<p>Additionally, if a view is a join on other nested views, then the other nested views must be mergeable into the top level view. For a discussion of mergeable and unmergeable views, and more generally, how the optimizer optimizes statements that reference views, see the <a class="olink TGSQL193" target="_blank" href="../TGSQL/tgsql_optcncpt.htm#TGSQL193"><span class="italic">Oracle Database SQL Tuning Guide.</span></a></p>
</div>
<p>Examples illustrating the rules for inherently updatable join views, and a discussion of key-preserved tables, are presented in following sections. The examples in these sections work only if you explicitly define the primary and foreign keys in the tables, or define unique indexes. The following statements create the appropriately constrained table definitions for <code class="codeph">emp</code> and <code class="codeph">dept</code>.</p>
<pre dir="ltr">CREATE TABLE dept (
      deptno        NUMBER(4) PRIMARY KEY,
      dname         VARCHAR2(14),
      loc           VARCHAR2(13));
 
CREATE TABLE emp (
      empno        NUMBER(4) PRIMARY KEY,
      ename        VARCHAR2(10),
      job          VARCHAR2(9),
      mgr          NUMBER(4),
      sal          NUMBER(7,2),
      comm         NUMBER(7,2),
      deptno       NUMBER(2),
      FOREIGN KEY (DEPTNO) REFERENCES DEPT(DEPTNO));
</pre>
<p>You could also omit the primary and foreign key constraints listed in the preceding example, and create a <code class="codeph">UNIQUE INDEX</code> on <code class="codeph">dept (deptno)</code> to make the following examples work.</p>
<p>The following statement created the <code class="codeph">emp_dept</code> join view which is referenced in the examples:</p>
<pre dir="ltr">CREATE VIEW emp_dept AS
      SELECT emp.empno, emp.ename, emp.deptno, emp.sal, dept.dname, dept.loc
      FROM emp, dept
      WHERE emp.deptno = dept.deptno
         AND dept.loc IN (&#39;DALLAS&#39;, &#39;NEW YORK&#39;, &#39;BOSTON&#39;);
</pre></div>
<!-- class="section" --></div>
</div>
<a id="ADMIN11783"></a>
<div class="props_rev_3"><a id="GUID-A661DF5B-A5CE-4569-B5F1-AE8D407E6D30"></a>
<h4 id="ADMIN-GUID-A661DF5B-A5CE-4569-B5F1-AE8D407E6D30" class="sect4"><span class="enumeration_section">24.1.5.2</span> Key-Preserved Tables</h4>
<div>
<p>The concept of a <span class="bold">key-preserved table</span> is fundamental to understanding the restrictions on modifying join views. A table is key-preserved if every key of the table can also be a key of the result of the join. So, a key-preserved table has its keys preserved through a join.</p>
<div class="infobox-note" id="GUID-A661DF5B-A5CE-4569-B5F1-AE8D407E6D30__GUID-25363D88-0FCB-43DB-90BC-C4B59E849326">
<p class="notep1">Note:</p>
<p>It is not necessary that the key or keys of a table be selected for it to be key preserved. It is sufficient that if the key or keys were selected, then they would also be keys of the result of the join.</p>
</div>
<p>The key-preserving property of a table does not depend on the actual data in the table. It is, rather, a property of its schema. For example, if in the <code class="codeph">emp</code> table there was at most one employee in each department, then <code class="codeph">deptno</code> would be unique in the result of a join of <code class="codeph">emp</code> and <code class="codeph">dept</code>, but <code class="codeph">dept</code> would still not be a key-preserved table.</p>
<p>If you select all rows from <code class="codeph">emp_dept</code>, the results are:</p>
<pre dir="ltr">EMPNO      ENAME      DEPTNO  DNAME          LOC 
---------- ---------- ------- -------------- -----------
      7782 CLARK           10 ACCOUNTING     NEW YORK
      7839 KING            10 ACCOUNTING     NEW YORK
      7934 MILLER          10 ACCOUNTING     NEW YORK
      7369 SMITH           20 RESEARCH       DALLAS
      7876 ADAMS           20 RESEARCH       DALLAS
      7902 FORD            20 RESEARCH       DALLAS
      7788 SCOTT           20 RESEARCH       DALLAS
      7566 JONES           20 RESEARCH       DALLAS
8 rows selected.
</pre>
<p>In this view, <code class="codeph">emp</code> is a key-preserved table, because <code class="codeph">empno</code> is a key of the <code class="codeph">emp</code> table, and also a key of the result of the join. <code class="codeph">dept</code> is <span class="italic">not</span> a key-preserved table, because although <code class="codeph">deptno</code> is a key of the <code class="codeph">dept</code> table, it is not a key of the join.</p>
</div>
</div>
<a id="ADMIN11784"></a>
<div class="props_rev_3"><a id="GUID-98A16B12-8ECC-4F1E-8D84-02213FCF6B11"></a>
<h4 id="ADMIN-GUID-98A16B12-8ECC-4F1E-8D84-02213FCF6B11" class="sect4"><span class="enumeration_section">24.1.5.3</span> Rules for DML Statements and Join Views</h4>
<p>The general rule is that any <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, or <code class="codeph">INSERT</code> statement on a join view can modify only one underlying base table.</p>
<a id="ADMIN11785"></a>
<div class="props_rev_3"><a id="GUID-077BFD57-3F38-4487-8A92-93ACBB48E2EA"></a>
<h5 id="ADMIN-GUID-077BFD57-3F38-4487-8A92-93ACBB48E2EA" class="sect5"><span class="enumeration_section">24.1.5.3.1</span> UPDATE Statements and Join Views</h5>
<div>
<p>Examples illustrate <code class="codeph">UPDATE</code> statements that can modify join views.</p>
<p>The following example shows an <code class="codeph">UPDATE</code> statement that successfully modifies the <code class="codeph">emp_dept</code> view:</p>
<pre dir="ltr">UPDATE emp_dept
     SET sal = sal * 1.10 
     WHERE deptno = 10;
</pre>
<p>The following <code class="codeph">UPDATE</code> statement would be disallowed on the <code class="codeph">emp_dept</code> view:</p>
<pre dir="ltr">UPDATE emp_dept
     SET loc = &#39;BOSTON&#39;
     WHERE ename = &#39;SMITH&#39;;
</pre>
<p>This statement fails with an error (<code class="codeph">ORA-01779</code> <code class="codeph">cannot modify a column which maps to a non key-preserved table</code>), because it attempts to modify the base <code class="codeph">dept</code> table, and the <code class="codeph">dept</code> table is not key-preserved in the <code class="codeph">emp_dept</code> view.</p>
<p>In general, all updatable columns of a join view must map to columns of a key-preserved table. If the view is defined using the <code class="codeph">WITH CHECK OPTION</code> clause, then all join columns and all columns taken from tables that are referenced more than once in the view are not modifiable.</p>
<p>So, for example, if the <code class="codeph">emp_dept</code> view were defined using <code class="codeph">WITH CHECK OPTION</code>, the following <code class="codeph">UPDATE</code> statement would fail:</p>
<pre dir="ltr">UPDATE emp_dept
     SET deptno = 10
     WHERE ename = &#39;SMITH&#39;;
</pre>
<p>The statement fails because it is trying to update a join column.</p>
<div class="infoboxnotealso" id="GUID-077BFD57-3F38-4487-8A92-93ACBB48E2EA__GUID-72841343-56F7-41E9-8E25-C6B3FA1B8EED">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF01708" target="_blank" href="../SQLRF/statements_10008.htm#SQLRF01708"><span class="italic">Oracle Database SQL Language Reference</span></a> for syntax and additional information about the <code class="codeph">UPDATE</code> statement</p>
</div>
</div>
</div>
<a id="ADMIN11786"></a>
<div class="props_rev_3"><a id="GUID-0CEA4437-A0E8-41E6-93DF-096437A21A01"></a>
<h5 id="ADMIN-GUID-0CEA4437-A0E8-41E6-93DF-096437A21A01" class="sect5"><span class="enumeration_section">24.1.5.3.2</span> DELETE Statements and Join Views</h5>
<div>
<p>For most join views, a delete is successful only if there is <span class="italic">one and only one</span> key-preserved table in the join. The key-preserved table can be repeated in the <code class="codeph">FROM</code> clause.</p>
<p>The following <code class="codeph">DELETE</code> statement works on the <code class="codeph">emp_dept</code> view:</p>
<pre dir="ltr">DELETE FROM emp_dept
     WHERE ename = &#39;SMITH&#39;;
</pre>
<p>This <code class="codeph">DELETE</code> statement on the <code class="codeph">emp_dept</code> view is legal because it can be translated to a <code class="codeph">DELETE</code> operation on the base <code class="codeph">emp</code> table, and because the <code class="codeph">emp</code> table is the only key-preserved table in the join.</p>
<p>In the following view, a <code class="codeph">DELETE</code> operation is permitted, because although there are two key-preserved tables, they are the same table. That is, the key-preserved table is repeated. In this case, the delete statement operates on the first table in the <code class="codeph">FROM</code> list (<code class="codeph">e1</code>, in this example):</p>
<pre dir="ltr">CREATE VIEW emp_emp AS
     SELECT e1.ename, e2.empno, e2.deptno
     FROM emp e1, emp e2
     WHERE e1.empno = e2.empno;
</pre>
<p>If a view is defined using the <code class="codeph">WITH CHECK OPTION</code> clause and the key-preserved table is repeated, rows cannot be deleted from such a view.</p>
<pre dir="ltr">CREATE VIEW emp_mgr AS
     SELECT e1.ename, e2.ename mname
     FROM emp e1, emp e2
     WHERE e1.mgr = e2.empno
     WITH CHECK OPTION;
</pre>
<div class="infobox-note" id="GUID-0CEA4437-A0E8-41E6-93DF-096437A21A01__GUID-E66C5E55-FC58-4D30-9491-1B3D97DCD3DE">
<p class="notep1">Note:</p>
If the <code class="codeph">DELETE</code> statement uses the same column in its <code class="codeph">WHERE</code> clause that was used to create the view as a join condition, then the delete operation can be successful when there are different key-preserved tables in the join. In this case, the <code class="codeph">DELETE</code> statement operates on the first table in the <code class="codeph">FROM</code> list, and the tables in the <code class="codeph">FROM</code> list can be different from the tables in the <code class="codeph">WHERE</code> clause.</div>
<div class="infoboxnotealso" id="GUID-0CEA4437-A0E8-41E6-93DF-096437A21A01__GUID-D0B97731-64B3-4642-B6B0-3FFD2F515979">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF01505" target="_blank" href="../SQLRF/statements_8005.htm#SQLRF01505"><span class="italic">Oracle Database SQL Language Reference</span></a> for syntax and additional information about the <code class="codeph">DELETE</code> statement</p>
</div>
</div>
</div>
<a id="ADMIN11787"></a>
<div class="props_rev_3"><a id="GUID-E19316B2-9560-438D-87FC-683398FE8631"></a>
<h5 id="ADMIN-GUID-E19316B2-9560-438D-87FC-683398FE8631" class="sect5"><span class="enumeration_section">24.1.5.3.3</span> INSERT Statements and Join Views</h5>
<div>
<p>Examples illustrate <code class="codeph">INSERT</code> statements that can modify join views.</p>
<p>The following <code class="codeph">INSERT</code> statement on the <code class="codeph">emp_dept</code> view succeeds:</p>
<pre dir="ltr">INSERT INTO emp_dept (ename, empno, deptno)
   VALUES (&#39;KURODA&#39;, 9010, 40);
</pre>
<p>This statement works because only one key-preserved base table is being modified (<code class="codeph">emp</code>), and 40 is a valid <code class="codeph">deptno</code> in the <code class="codeph">dept</code> table (thus satisfying the <code class="codeph">FOREIGN KEY</code> integrity constraint on the <code class="codeph">emp</code> table).</p>
<p>An <code class="codeph">INSERT</code> statement, such as the following, would fail for the same reason that such an <code class="codeph">UPDATE</code> on the base <code class="codeph">emp</code> table would fail: the <code class="codeph">FOREIGN KEY</code> integrity constraint on the <code class="codeph">emp</code> table is violated (because there is no <code class="codeph">deptno</code> 77).</p>
<pre dir="ltr">INSERT INTO emp_dept (ename, empno, deptno)
   VALUES (&#39;KURODA&#39;, 9010, 77);
</pre>
<p>The following <code class="codeph">INSERT</code> statement would fail with an error (<code class="codeph">ORA-01776</code> <code class="codeph">cannot modify more than one base table through a join view</code>):</p>
<pre dir="ltr">INSERT INTO emp_dept (empno, ename, loc)
   VALUES (9010, &#39;KURODA&#39;, &#39;BOSTON&#39;);
</pre>
<p>An <code class="codeph">INSERT</code> cannot implicitly or explicitly refer to columns of a non-key-preserved table. If the join view is defined using the <code class="codeph">WITH CHECK OPTION</code> clause, then you cannot perform an <code class="codeph">INSERT</code> to it.</p>
<div class="infoboxnotealso" id="GUID-E19316B2-9560-438D-87FC-683398FE8631__GUID-651E0FE8-0F61-4046-A7B5-C73EED44AC87">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF01604" target="_blank" href="../SQLRF/statements_9015.htm#SQLRF01604"><span class="italic">Oracle Database SQL Language Reference</span></a> for syntax and additional information about the <code class="codeph">INSERT</code> statement</p>
</div>
</div>
</div>
</div>
<a id="ADMIN11788"></a>
<div class="props_rev_3"><a id="GUID-36EDF029-7219-4485-8FC9-EC0D6204CE15"></a>
<h4 id="ADMIN-GUID-36EDF029-7219-4485-8FC9-EC0D6204CE15" class="sect4"><span class="enumeration_section">24.1.5.4</span> Updating Views That Involve Outer Joins</h4>
<div>
<p>Views that involve outer joins are modifiable in some cases.</p>
<div class="section">
<p>For example:</p>
<pre dir="ltr">CREATE VIEW emp_dept_oj1 AS
    SELECT empno, ename, e.deptno, dname, loc
    FROM emp e, dept d
    WHERE e.deptno = d.deptno (+);
</pre>
<p>The statement:</p>
<pre dir="ltr">SELECT * FROM emp_dept_oj1;
</pre>
<p>Results in:</p>
<pre dir="ltr">EMPNO   ENAME      DEPTNO  DNAME          LOC         
------- ---------- ------- -------------- -------------
7369    SMITH      40      OPERATIONS     BOSTON       
7499    ALLEN      30      SALES          CHICAGO      
7566    JONES      20      RESEARCH       DALLAS       
7654    MARTIN     30      SALES          CHICAGO      
7698    BLAKE      30      SALES          CHICAGO      
7782    CLARK      10      ACCOUNTING     NEW YORK     
7788    SCOTT      20      RESEARCH       DALLAS       
7839    KING       10      ACCOUNTING     NEW YORK     
7844    TURNER     30      SALES          CHICAGO      
7876    ADAMS      20      RESEARCH       DALLAS       
7900    JAMES      30      SALES          CHICAGO      
7902    FORD       20      RESEARCH       DALLAS       
7934    MILLER     10      ACCOUNTING     NEW YORK     
7521    WARD       30      SALES          CHICAGO      
14 rows selected.
</pre>
<p>Columns in the base <code class="codeph">emp</code> table of <code class="codeph">emp_dept_oj1</code> are modifiable through the view, because <code class="codeph">emp</code> is a key-preserved table in the join.</p>
<p>The following view also contains an outer join: <a id="d180795e2236" class="indexterm-anchor"></a><a id="d180795e2240" class="indexterm-anchor"></a></p>
<pre dir="ltr">CREATE VIEW emp_dept_oj2 AS
SELECT e.empno, e.ename, e.deptno, d.dname, d.loc
FROM emp e, dept d
WHERE e.deptno (+) = d.deptno;
</pre>
<p>The following statement:</p>
<pre dir="ltr">SELECT * FROM emp_dept_oj2;
</pre>
<p>Results in:</p>
<pre dir="ltr">EMPNO      ENAME      DEPTNO    DNAME          LOC
---------- ---------- --------- -------------- ----
7782       CLARK      10        ACCOUNTING     NEW YORK
7839       KING       10        ACCOUNTING     NEW YORK
7934       MILLER     10        ACCOUNTING     NEW YORK
7369       SMITH      20        RESEARCH       DALLAS
7876       ADAMS      20        RESEARCH       DALLAS
7902       FORD       20        RESEARCH       DALLAS
7788       SCOTT      20        RESEARCH       DALLAS 
7566       JONES      20        RESEARCH       DALLAS
7499       ALLEN      30        SALES          CHICAGO
7698       BLAKE      30        SALES          CHICAGO
7654       MARTIN     30        SALES          CHICAGO
7900       JAMES      30        SALES          CHICAGO
7844       TURNER     30        SALES          CHICAGO
7521       WARD       30        SALES          CHICAGO
                                OPERATIONS     BOSTON
15 rows selected.
</pre>
<p>In this view, <code class="codeph">emp</code> is no longer a key-preserved table, because the <code class="codeph">empno</code> column in the result of the join can have nulls (the last row in the preceding <code class="codeph">SELECT</code> statement). So, <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, and <code class="codeph">INSERT</code> operations cannot be performed on this view.</p>
<p>In the case of views containing an outer join on other nested views, a table is key preserved if the view or views containing the table are merged into their outer views, all the way to the top. A view which is being outer-joined is currently merged only if it is &#34;simple.&#34; For example:</p>
<pre dir="ltr">SELECT col1, col2, ... FROM T;
</pre>
<p>The select list of the view has no expressions.</p>
<p>If you are in doubt whether a view is modifiable, then you can select from the <code class="codeph">USER_UPDATABLE_COLUMNS</code> view to see if it is. For example:</p>
<pre dir="ltr">SELECT owner, table_name, column_name, updatable FROM USER_UPDATABLE_COLUMNS 
     WHERE TABLE_NAME = &#39;EMP_DEPT_VIEW&#39;;
</pre>
<p>This returns output similar to the following:</p>
<pre dir="ltr">OWNER       TABLE_NAME      COLUMN_NAM      UPD
----------  ----------      ----------      ---
SCOTT       EMP_DEPT_V      EMPNO           NO
SCOTT       EMP_DEPT_V      ENAME           NO
SCOTT       EMP_DEPT_V      DEPTNO          NO
SCOTT       EMP_DEPT_V      DNAME           NO
SCOTT       EMP_DEPT_V      LOC             NO
5 rows selected.
</pre></div>
<!-- class="section" --></div>
</div>
<a id="ADMIN11789"></a>
<div class="props_rev_3"><a id="GUID-1A4049C2-62FE-4EDA-B01E-5B0C74D56ABF"></a>
<h4 id="ADMIN-GUID-1A4049C2-62FE-4EDA-B01E-5B0C74D56ABF" class="sect4"><span class="enumeration_section">24.1.5.5</span> Using the UPDATABLE_ COLUMNS Views</h4>
<div>
<p>A set of views can assist you in identifying inherently updatable join views.</p>
<div class="section">
<div class="tblformal" id="GUID-1A4049C2-62FE-4EDA-B01E-5B0C74D56ABF__GUID-12D0E391-391C-458E-AD7F-F557E4BF1AAF">
<table class="cellalignment1849" summary="Column 1 lists views that are useful for identifying inherently updatable join views, column 2 describes each view.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1873" id="d180795e2361">View</th>
<th class="cellalignment1961" id="d180795e2364">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1876" id="d180795e2369" headers="d180795e2361">
<p><code class="codeph">DBA_UPDATABLE_COLUMNS</code></p>
</td>
<td class="cellalignment1962" headers="d180795e2369 d180795e2364">
<p>Shows all columns in all tables and views that are modifiable.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1876" id="d180795e2378" headers="d180795e2361">
<p><code class="codeph">ALL_UPDATABLE_COLUMNS</code></p>
</td>
<td class="cellalignment1962" headers="d180795e2378 d180795e2364">
<p>Shows all columns in all tables and views accessible to the user that are modifiable.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1876" id="d180795e2387" headers="d180795e2361">
<p><code class="codeph">USER_UPDATABLE_COLUMNS</code></p>
</td>
<td class="cellalignment1962" headers="d180795e2387 d180795e2364">
<p>Shows all columns in all tables and views in the user&#39;s schema that are modifiable.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>The updatable columns in view <code class="codeph">emp_dept</code> are shown below.</p>
<pre dir="ltr">SELECT COLUMN_NAME, UPDATABLE
      FROM USER_UPDATABLE_COLUMNS
      WHERE TABLE_NAME = &#39;EMP_DEPT&#39;;

COLUMN_NAME                    UPD
------------------------------ ---
EMPNO                          YES
ENAME                          YES
DEPTNO                         YES
SAL                            YES
DNAME                          NO
LOC                            NO

6 rows selected.
</pre>
<div class="infoboxnotealso" id="GUID-1A4049C2-62FE-4EDA-B01E-5B0C74D56ABF__GUID-7FDECE2E-1E6C-4BA6-B1B7-4FEA030CCB37">
<p class="notep1">See Also:</p>
<p><a class="olink REFRN20301" target="_blank" href="../REFRN/GUID-D318F142-14DD-4226-BA83-3482CB80AF6D.htm#REFRN20301"><span class="italic">Oracle Database Reference</span></a> for complete descriptions of the updatable column views</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="ADMIN11790"></a>
<div class="props_rev_3"><a id="GUID-B9CE3911-8EBE-4214-A0C0-E67AD83821A0"></a>
<h3 id="ADMIN-GUID-B9CE3911-8EBE-4214-A0C0-E67AD83821A0" class="sect3"><span class="enumeration_section">24.1.6</span> Altering Views</h3>
<div>
<p>You use the <code class="codeph">ALTER VIEW</code> statement only to explicitly recompile a view that is invalid.</p>
<div class="section">
<p>To change the definition of a view, see <span class="q">&#34;<a href="views.htm#GUID-A742CBEF-A66F-421F-94EC-7B492A81AE82" title="You can replace a view by dropping it and re-creating it or by issuing a CREATE VIEW statement that contains the OR REPLACE clause.">Replacing Views</a>&#34;</span>.</p>
<p>The <code class="codeph">ALTER VIEW</code> statement lets you locate recompilation errors before run time. To ensure that the alteration does not affect the view or other objects that depend on it, you can explicitly recompile a view after altering one of its base tables.</p>
<p>To use the <code class="codeph">ALTER VIEW</code> statement, the view must be in your schema, or you must have the <code class="codeph">ALTER ANY TABLE</code> system privilege.</p>
<div class="infoboxnotealso" id="GUID-B9CE3911-8EBE-4214-A0C0-E67AD83821A0__GUID-3AE2B575-ACA3-4A54-A750-455CFCFE2B5E">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF01104" target="_blank" href="../SQLRF/statements_4004.htm#SQLRF01104"><span class="italic">Oracle Database SQL Language Reference</span></a> for syntax and additional information about the <code class="codeph">ALTER VIEW</code> statement</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN11791"></a>
<div class="props_rev_3"><a id="GUID-A075DF08-BEC2-413F-8444-E9B588A1C34F"></a>
<h3 id="ADMIN-GUID-A075DF08-BEC2-413F-8444-E9B588A1C34F" class="sect3"><span class="enumeration_section">24.1.7</span> Dropping Views</h3>
<div>
<p>You can drop a view with the <code class="codeph">DROP VIEW</code> statement.</p>
<div class="section">
<p>You can drop any view contained in your schema. To drop a view in another user&#39;s schema, you must have the <code class="codeph">DROP ANY VIEW</code> system privilege. Drop a view using the <code class="codeph">DROP VIEW</code> statement. For example, the following statement drops the <code class="codeph">emp_dept</code> view:</p>
<pre dir="ltr">DROP VIEW emp_dept;
</pre>
<div class="infoboxnotealso" id="GUID-A075DF08-BEC2-413F-8444-E9B588A1C34F__GUID-C74E8879-093B-447B-8BCF-CFA509D5C5E9">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF01812" target="_blank" href="../SQLRF/statements_9009.htm#SQLRF01812"><span class="italic">Oracle Database SQL Language Reference</span></a> for syntax and additional information about the <code class="codeph">DROP VIEW</code> statement</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="ADMIN11792"></a>
<div class="props_rev_3"><a id="GUID-50B77DCA-C44E-488C-B281-7478A01E842E"></a>
<h2 id="ADMIN-GUID-50B77DCA-C44E-488C-B281-7478A01E842E" class="sect2"><span class="enumeration_section">24.2</span> Managing Sequences</h2>
<p>You can perform tasks such as creating sequences, altering sequences, using sequences, and dropping sequences.</p>
<a id="ADMIN11793"></a>
<div class="props_rev_3"><a id="GUID-34C1DC70-4ECA-432B-9177-46CD6CEBF402"></a>
<h3 id="ADMIN-GUID-34C1DC70-4ECA-432B-9177-46CD6CEBF402" class="sect3"><span class="enumeration_section">24.2.1</span> About Sequences</h3>
<div>
<p><span class="bold">Sequences</span> are database objects from which multiple users can generate unique integers. The sequence generator generates sequential numbers, which can be used to generate unique primary keys automatically, and to coordinate keys across multiple rows or tables.</p>
<p>Without sequences, sequential values can only be produced programmatically. A new primary key value can be obtained by selecting the most recently produced value and incrementing it. This method requires a lock during the transaction and causes multiple users to wait for the next value of the primary key; this waiting is known as <span class="bold">serialization</span>. If developers have such constructs in applications, then you should encourage the developers to replace them with access to sequences. Sequences eliminate serialization and improve the concurrency of an application.</p>
<div class="infoboxnotealso" id="GUID-34C1DC70-4ECA-432B-9177-46CD6CEBF402__GUID-B2B2946B-A8D2-4E29-A9F1-A09ACCB17E91">
<p class="notep1">See Also:</p>
<p><a class="olink CNCPT611" target="_blank" href="../CNCPT/schemaob.htm#CNCPT611"><span class="italic">Oracle Database Concepts</span></a> for an overview of sequences</p>
</div>
</div>
</div>
<a id="ADMIN11794"></a>
<div class="props_rev_3"><a id="GUID-700340BB-7517-4994-B9DA-348E6113DD57"></a>
<h3 id="ADMIN-GUID-700340BB-7517-4994-B9DA-348E6113DD57" class="sect3"><span class="enumeration_section">24.2.2</span> Creating Sequences</h3>
<div>
<p>Create a sequence using the <code class="codeph">CREATE SEQUENCE</code> statement.</p>
<div class="section">
<p>To create a sequence in your schema, you must have the <code class="codeph">CREATE SEQUENCE</code> system privilege. To create a sequence in another user&#39;s schema, you must have the <code class="codeph">CREATE ANY SEQUENCE</code> privilege.</p>
<p>For example, the following statement creates a sequence used to generate employee numbers for the <code class="codeph">empno</code> column of the <code class="codeph">emp</code> table:</p>
<pre dir="ltr">CREATE SEQUENCE emp_sequence
      INCREMENT BY 1
      START WITH 1
      NOMAXVALUE
      NOCYCLE
      CACHE 10;
</pre>
<p>Notice that several parameters can be specified to control the function of sequences. You can use these parameters to indicate whether the sequence is ascending or descending, the starting point of the sequence, the minimum and maximum values, and the interval between sequence values. The <code class="codeph">NOCYCLE</code> option indicates that the sequence cannot generate more values after reaching its maximum or minimum value.</p>
<p>The <code class="codeph">CACHE</code> clause preallocates a set of sequence numbers and keeps them in memory so that sequence numbers can be accessed faster. When the last of the sequence numbers in the cache has been used, the database reads another set of numbers into the cache.</p>
<p>The database might skip sequence numbers if you choose to cache a set of sequence numbers. For example, when an instance abnormally shuts down (for example, when an instance failure occurs or a <code class="codeph">SHUTDOWN ABORT</code> statement is issued), sequence numbers that have been cached but not used are lost. Also, sequence numbers that have been used but not saved are lost as well. The database might also skip cached sequence numbers after an export and import. See <a class="olink SUTIL3665" target="_blank" href="../SUTIL/GUID-1AD496E9-9CA3-456C-BFF2-3E9098370D70.htm#SUTIL3665"><span class="italic">Oracle Database Utilities</span></a> for details.</p>
<div class="infoboxnotealso" id="GUID-700340BB-7517-4994-B9DA-348E6113DD57__GUID-0E18AC47-87C2-4A85-AC9D-A4DEE099C679">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF01314" target="_blank" href="../SQLRF/statements_6017.htm#SQLRF01314"><span class="italic">Oracle Database SQL Language Reference</span></a> for the <code class="codeph">CREATE SEQUENCE</code> statement syntax</p>
</li>
<li>
<p><a class="olink RACAD7387" target="_blank" href="../RACAD/GUID-6F08D689-193E-49A3-8166-E6F5928561F8.htm#RACAD7387"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a><a id="d180795e2889" class="indexterm-anchor"></a><a id="d180795e2893" class="indexterm-anchor"></a> for information about using sequences in an Oracle Real Application Clusters environment</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN11795"></a>
<div class="props_rev_3"><a id="GUID-5ABC0615-BE0C-48CE-BD18-C86AAF7DF953"></a>
<h3 id="ADMIN-GUID-5ABC0615-BE0C-48CE-BD18-C86AAF7DF953" class="sect3"><span class="enumeration_section">24.2.3</span> Altering Sequences</h3>
<div>
<p>Alter a sequence using the <code class="codeph">ALTER SEQUENCE</code> statement.</p>
<div class="section">
<p>To alter a sequence, your schema must contain the sequence, you must have the <code class="codeph">ALTER</code> object privilege on the sequence, or you must have the <code class="codeph">ALTER ANY SEQUENCE</code> system privilege. You can alter a sequence to change any of the parameters that define how it generates sequence numbers except the sequence starting number. To change the starting point of a sequence, drop the sequence and then re-create it.</p>
<p>For example, the following statement alters the <code class="codeph">emp_sequence</code>:</p>
<pre dir="ltr">ALTER SEQUENCE emp_sequence
    INCREMENT BY 10
    MAXVALUE 10000
    CYCLE
    CACHE 20;
</pre>
<div class="infoboxnotealso" id="GUID-5ABC0615-BE0C-48CE-BD18-C86AAF7DF953__GUID-593CC382-2272-4261-B696-24F77C4E53A8">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF00817" target="_blank" href="../SQLRF/statements_2014.htm#SQLRF00817"><span class="italic">Oracle Database SQL Language Reference</span></a> for syntax and additional information about the <code class="codeph">ALTER SEQUENCE</code> statement</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN11796"></a>
<div class="props_rev_3"><a id="GUID-DC2435F7-8A10-4D44-B4FF-7731358B3A17"></a>
<h3 id="ADMIN-GUID-DC2435F7-8A10-4D44-B4FF-7731358B3A17" class="sect3"><span class="enumeration_section">24.2.4</span> Using Sequences</h3>
<div>
<p>A sequence can be accessed and incremented by multiple users.</p>
<div class="section">
<p>To use a sequence, your schema must contain the sequence or you must have been granted the <code class="codeph">SELECT</code> object privilege for another user&#39;s sequence. Once a sequence is defined, it can be accessed and incremented by multiple users (who have <code class="codeph">SELECT</code> object privilege for the sequence containing the sequence) with no waiting. The database does not wait for a transaction that has incremented a sequence to complete before that sequence can be incremented again.</p>
<p>The examples outlined in the following sections show how sequences can be used in master/detail table relationships. Assume an order entry system is partially comprised of two tables, <code class="codeph">orders_tab</code> (master table) and <code class="codeph">line_items_tab</code> (detail table), that hold information about customer orders. A sequence named <code class="codeph">order_seq</code> is defined by the following statement:</p>
<pre dir="ltr">CREATE SEQUENCE Order_seq
    START WITH 1
    INCREMENT BY 1
    NOMAXVALUE
    NOCYCLE
    CACHE 20;
</pre></div>
<!-- class="section" --></div>
<a id="ADMIN11797"></a>
<div class="props_rev_3"><a id="GUID-B307B82C-EAF8-4D7E-A8B2-C1D04F28208F"></a>
<h4 id="ADMIN-GUID-B307B82C-EAF8-4D7E-A8B2-C1D04F28208F" class="sect4"><span class="enumeration_section">24.2.4.1</span> Referencing a Sequence</h4>
<div>
<p>A sequence is referenced in SQL statements with the <code class="codeph">NEXTVAL</code> and <code class="codeph">CURRVAL</code> pseudocolumns; each new sequence number is generated by a reference to the sequence pseudocolumn <code class="codeph">NEXTVAL</code>, while the current sequence number can be repeatedly referenced using the pseudo-column <code class="codeph">CURRVAL</code>.</p>
<p><code class="codeph">NEXTVAL</code> and <code class="codeph">CURRVAL</code> are not reserved words or keywords and can be used as pseudocolumn names in SQL statements such as <code class="codeph">SELECT</code>, <code class="codeph">INSERT</code>, or <code class="codeph">UPDATE</code>.</p>
</div>
<a id="ADMIN11798"></a>
<div class="props_rev_3"><a id="GUID-FA6B9399-CEEC-4792-BFF2-C1F18978829D"></a>
<h5 id="ADMIN-GUID-FA6B9399-CEEC-4792-BFF2-C1F18978829D" class="sect5"><span class="enumeration_section">24.2.4.1.1</span> Generating Sequence Numbers with NEXTVAL</h5>
<div>
<p>To generate and use a sequence number, reference <span class="italic">seq_name</span>.<code class="codeph">NEXTVAL</code> in a SQL statement.</p>
<div class="section">
<p>For example, assume a customer places an order. The sequence number can be referenced in a values list. For example:</p>
<pre dir="ltr">INSERT INTO Orders_tab (Orderno, Custno)
    VALUES (Order_seq.NEXTVAL, 1032);
</pre>
<p>Or, the sequence number can be referenced in the <code class="codeph">SET</code> clause of an <code class="codeph">UPDATE</code> statement. For example:</p>
<pre dir="ltr">UPDATE Orders_tab
    SET Orderno = Order_seq.NEXTVAL
    WHERE Orderno = 10112;
</pre>
<p>The sequence number can also be referenced outermost <code class="codeph">SELECT</code> of a query or subquery. For example:</p>
<pre dir="ltr">SELECT Order_seq.NEXTVAL FROM dual;
</pre>
<p>As defined, the first reference to <code class="codeph">order_seq.NEXTVAL</code> returns the value 1. Each subsequent statement that references <code class="codeph">order_seq.NEXTVAL</code> generates the next sequence number (2, 3, 4,. . .). The pseudo-column <code class="codeph">NEXTVAL</code> can be used to generate as many new sequence numbers as necessary. However, only a single sequence number can be generated for each row. In other words, if <code class="codeph">NEXTVAL</code> is referenced more than once in a single statement, then the first reference generates the next number, and all subsequent references in the statement return the same number.</p>
<p>Once a sequence number is generated, the sequence number is available only to the session that generated the number. Independent of transactions committing or rolling back, other users referencing <code class="codeph">order_seq.NEXTVAL</code> obtain unique values. If two users are accessing the same sequence concurrently, then the sequence numbers each user receives might have gaps because sequence numbers are also being generated by the other user.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN11799"></a>
<div class="props_rev_3"><a id="GUID-84B80703-FF67-4993-9186-8D6710F8ABDF"></a>
<h5 id="ADMIN-GUID-84B80703-FF67-4993-9186-8D6710F8ABDF" class="sect5"><span class="enumeration_section">24.2.4.1.2</span> Using Sequence Numbers with CURRVAL</h5>
<div>
<p>To use or refer to the current sequence value of your session, reference <span class="italic">seq_name</span>.<code class="codeph">CURRVAL</code> in a SQL statement.</p>
<div class="section">
<p><code class="codeph">CURRVAL</code> can only be used if <span class="italic">seq_name</span>.<code class="codeph">NEXTVAL</code> has been referenced in the current user session (in the current or a previous transaction). <code class="codeph">CURRVAL</code> can be referenced as many times as necessary, including multiple times within the same statement. The next sequence number is not generated until <code class="codeph">NEXTVAL</code> is referenced. Continuing with the previous example, you would finish placing the customer&#39;s order by inserting the line items for the order:</p>
<pre dir="ltr">INSERT INTO Line_items_tab (Orderno, Partno, Quantity)
    VALUES (Order_seq.CURRVAL, 20321, 3);

INSERT INTO Line_items_tab (Orderno, Partno, Quantity)
    VALUES (Order_seq.CURRVAL, 29374, 1);
</pre>
<p>Assuming the <code class="codeph">INSERT</code> statement given in the previous section generated a new sequence number of 347, both rows inserted by the statements in this section insert rows with order numbers of 347.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN11800"></a>
<div class="props_rev_3"><a id="GUID-AE937BAB-AA5C-4857-AC44-E85AFF091F68"></a>
<h5 id="ADMIN-GUID-AE937BAB-AA5C-4857-AC44-E85AFF091F68" class="sect5"><span class="enumeration_section">24.2.4.1.3</span> Uses and Restrictions of NEXTVAL and CURRVAL</h5>
<div>
<p><code class="codeph">CURRVAL</code> and <code class="codeph">NEXTVAL</code> can be used in specific places, and restrictions apply to their use.</p>
<p><code class="codeph">CURRVAL</code> and <code class="codeph">NEXTVAL</code> can be used in the following places:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">VALUES</code> clause of <code class="codeph">INSERT</code> statements</p>
</li>
<li>
<p>The <code class="codeph">SELECT</code> list of a <code class="codeph">SELECT</code> statement</p>
</li>
<li>
<p>A view query or materialized view query</p>
<p>However, the use of <code class="codeph">CURRVAL</code> and <code class="codeph">NEXTVAL</code> in a materialized view query makes the materialized view complex. Therefore, it cannot be fast refreshed.</p>
</li>
<li>
<p>The <code class="codeph">SET</code> clause of an <code class="codeph">UPDATE</code> statement</p>
</li>
</ul>
<p><code class="codeph">CURRVAL</code> and <code class="codeph">NEXTVAL</code> cannot be used in these places:</p>
<ul style="list-style-type: disc;">
<li>
<p>A subquery</p>
</li>
<li>
<p>A <code class="codeph">SELECT</code> statement with the <code class="codeph">DISTINCT</code> operator</p>
</li>
<li>
<p>A <code class="codeph">SELECT</code> statement with a <code class="codeph">GROUP</code> <code class="codeph">BY</code> or <code class="codeph">ORDER</code> <code class="codeph">BY</code> clause</p>
</li>
<li>
<p>A <code class="codeph">SELECT</code> statement that is combined with another <code class="codeph">SELECT</code> statement with the <code class="codeph">UNION,</code> <code class="codeph">INTERSECT</code>, or <code class="codeph">MINUS</code> set operator</p>
</li>
<li>
<p>The <code class="codeph">WHERE</code> clause of a <code class="codeph">SELECT</code> statement</p>
</li>
<li>
<p>The condition of a <code class="codeph">CHECK</code> constraint</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4"><a id="GUID-83FA2D7D-6119-4182-94EA-60554024A2CE"></a>
<h4 id="ADMIN-GUID-83FA2D7D-6119-4182-94EA-60554024A2CE" class="sect4"><span class="enumeration_section">24.2.4.2</span> Caching Sequence Numbers</h4>
<p>Caching sequence numbers can improve access time.</p>
<a id="ADMIN11801"></a>
<div class="props_rev_3"><a id="GUID-4784BED5-E5C1-495F-8C2A-A7B7BC68A5D6"></a>
<h5 id="ADMIN-GUID-4784BED5-E5C1-495F-8C2A-A7B7BC68A5D6" class="sect5"><span class="enumeration_section">24.2.4.2.1</span> About Caching Sequence Numbers</h5>
<div>
<p>Sequence numbers can be kept in the sequence cache in the System Global Area (SGA). Sequence numbers can be accessed more quickly in the sequence cache than they can be read from disk.</p>
<p>The sequence cache consists of entries. Each entry can hold many sequence numbers for a single sequence.</p>
<p>Follow these guidelines for fast access to all sequence numbers:</p>
<ul style="list-style-type: disc;">
<li>
<p>Be sure the sequence cache can hold all the sequences used concurrently by your applications.</p>
</li>
<li>
<p>Increase the number of values for each sequence held in the sequence cache.</p>
</li>
</ul>
</div>
</div>
<a id="ADMIN11802"></a>
<div class="props_rev_3"><a id="GUID-653E4E0C-6947-4B19-86C6-AB88DB3CFEC9"></a>
<h5 id="ADMIN-GUID-653E4E0C-6947-4B19-86C6-AB88DB3CFEC9" class="sect5"><span class="enumeration_section">24.2.4.2.2</span> The Number of Entries in the Sequence Cache</h5>
<div>
<p>When an application accesses a sequence in the sequence cache, the sequence numbers are read quickly. However, if an application accesses a sequence that is not in the cache, then the sequence must be read from disk to the cache before the sequence numbers are used.</p>
<p>If your applications use many sequences concurrently, then your sequence cache might not be large enough to hold all the sequences. In this case, access to sequence numbers might often require disk reads. For fast access to all sequences, be sure your cache has enough entries to hold all the sequences used concurrently by your applications.</p>
</div>
</div>
<a id="ADMIN11803"></a>
<div class="props_rev_3"><a id="GUID-9375334D-C318-4268-95A9-9B0A2AAA2DB0"></a>
<h5 id="ADMIN-GUID-9375334D-C318-4268-95A9-9B0A2AAA2DB0" class="sect5"><span class="enumeration_section">24.2.4.2.3</span> The Number of Values in Each Sequence Cache Entry</h5>
<div>
<p>When a sequence is read into the sequence cache, sequence values are generated and stored in a cache entry. These values can then be accessed quickly.</p>
<p>The number of sequence values stored in the cache is determined by the <code class="codeph">CACHE</code> parameter in the <code class="codeph">CREATE</code> <code class="codeph">SEQUENCE</code> statement. The default value for this parameter is 20.</p>
<p>This <code class="codeph">CREATE</code> <code class="codeph">SEQUENCE</code> statement creates the <code class="codeph">seq2</code> sequence so that 50 values of the sequence are stored in the <code class="codeph">SEQUENCE</code> cache:</p>
<pre dir="ltr">CREATE SEQUENCE seq2
    CACHE 50<span class="bold">;</span>
</pre>
<p>The first 50 values of <code class="codeph">seq2</code> can then be read from the cache. When the 51st value is accessed, the next 50 values will be read from disk.</p>
<p>Choosing a high value for <code class="codeph">CACHE</code> lets you access more successive sequence numbers with fewer reads from disk to the sequence cache. However, if there is an instance failure, then all sequence values in the cache are lost. Cached sequence numbers also could be skipped after an export and import if transactions continue to access the sequence numbers while the export is running.</p>
<p>If you use the <code class="codeph">NOCACHE</code> option in the <code class="codeph">CREATE</code> <code class="codeph">SEQUENCE</code> statement, then the values of the sequence are not stored in the sequence cache. In this case, every access to the sequence requires a disk read. Such disk reads slow access to the sequence. This <code class="codeph">CREATE</code> <code class="codeph">SEQUENCE</code> statement creates the <code class="codeph">SEQ3</code> sequence so that its values are never stored in the cache:</p>
<pre dir="ltr">CREATE SEQUENCE seq3
    NOCACHE;
</pre></div>
</div>
</div>
</div>
<a id="ADMIN11804"></a>
<div class="props_rev_3"><a id="GUID-699DAF68-D288-46C0-B577-CA9477B11209"></a>
<h3 id="ADMIN-GUID-699DAF68-D288-46C0-B577-CA9477B11209" class="sect3"><span class="enumeration_section">24.2.5</span> Dropping Sequences</h3>
<div>
<p>If a sequence is no longer required, you can drop the sequence using the <code class="codeph">DROP SEQUENCE</code> statement.</p>
<div class="section">
<p>You can drop any sequence in your schema. To drop a sequence in another schema, you must have the <code class="codeph">DROP ANY SEQUENCE</code> system privilege. For example, the following statement drops the <code class="codeph">order_seq</code> sequence:</p>
<pre dir="ltr">DROP SEQUENCE order_seq;
</pre>
<p>When a sequence is dropped, its definition is removed from the data dictionary. Any synonyms for the sequence remain, but return an error when referenced.</p>
<div class="infoboxnotealso" id="GUID-699DAF68-D288-46C0-B577-CA9477B11209__GUID-6E0603CE-422C-4EC1-9FFC-B0DAA81A259A">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF01804" target="_blank" href="../SQLRF/statements_9001.htm#SQLRF01804"><span class="italic">Oracle Database SQL Language Reference</span></a> for syntax and additional information about the <code class="codeph">DROP SEQUENCE</code> statement</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="ADMIN11805"></a>
<div class="props_rev_3"><a id="GUID-25878D67-A39B-41FF-B7C8-4916FB952F78"></a>
<h2 id="ADMIN-GUID-25878D67-A39B-41FF-B7C8-4916FB952F78" class="sect2"><span class="enumeration_section">24.3</span> Managing Synonyms</h2>
<p>You can perform tasks such as creating synonyms, using synonyms, and dropping synonyms.</p>
<a id="ADMIN11806"></a>
<div class="props_rev_3"><a id="GUID-F66725AA-B410-49EA-9C96-CF5C408879F1"></a>
<h3 id="ADMIN-GUID-F66725AA-B410-49EA-9C96-CF5C408879F1" class="sect3"><span class="enumeration_section">24.3.1</span> About Synonyms</h3>
<div>
<p>A synonym is an alias for a schema object.</p>
<p>Synonyms can provide a level of security by masking the name and owner of an object and by providing location transparency for remote objects of a distributed database. Also, they are convenient to use and reduce the complexity of SQL statements for database users.</p>
<p>Synonyms allow underlying objects to be renamed or moved, where only the synonym must be redefined and applications based on the synonym continue to function without modification.</p>
<p>You can create both public and private synonyms. A <span class="bold">public</span> synonym is owned by the special user group named <code class="codeph">PUBLIC</code> and is accessible to every user in a database. A <span class="bold">private</span> synonym is contained in the schema of a specific user and available only to the user and to grantees for the underlying object.</p>
<p>Synonyms themselves are not securable. When you grant object privileges on a synonym, you are really granting privileges on the underlying object, and the synonym is acting only as an alias for the object in the <code class="codeph">GRANT</code> statement.</p>
<div class="infoboxnotealso" id="GUID-F66725AA-B410-49EA-9C96-CF5C408879F1__GUID-16700597-F93F-458C-A1A2-D4327CAA57E4">
<p class="notep1">See Also:</p>
<p><a class="olink CNCPT711" target="_blank" href="../CNCPT/schemaob.htm#CNCPT711"><span class="italic">Oracle Database Concepts</span></a> for a more complete description of synonyms</p>
</div>
</div>
</div>
<a id="ADMIN11807"></a>
<div class="props_rev_3"><a id="GUID-407B4256-EA10-4362-88B9-16D16449B334"></a>
<h3 id="ADMIN-GUID-407B4256-EA10-4362-88B9-16D16449B334" class="sect3"><span class="enumeration_section">24.3.2</span> Creating Synonyms</h3>
<div>
<p>Create a synonym using the <code class="codeph">CREATE SYNONYM</code> statement.</p>
<div class="section">
<p>To create a private synonym in your own schema, you must have the <code class="codeph">CREATE SYNONYM</code> privilege. To create a private synonym in another user&#39;s schema, you must have the <code class="codeph">CREATE ANY SYNONYM</code> privilege. To create a public synonym, you must have the <code class="codeph">CREATE PUBLIC SYNONYM</code> system privilege.</p>
<p>When you create a synonym, the underlying schema object need not exist, nor do you need privileges to access the object for the <code class="codeph">CREATE SYNONYM</code> statement to succeed. The following statement creates a public synonym named <code class="codeph">public_emp</code> on the <code class="codeph">emp</code> table contained in the schema of <code class="codeph">jward</code>:</p>
<pre dir="ltr">CREATE PUBLIC SYNONYM public_emp FOR jward.emp
</pre>
<p>When you create a synonym for a remote procedure or function, you must qualify the remote object with its schema name. Alternatively, you can create a local public synonym on the database where the remote object resides, in which case the database link must be included in all subsequent calls to the procedure or function.</p>
<div class="infoboxnotealso" id="GUID-407B4256-EA10-4362-88B9-16D16449B334__GUID-B06F2B2F-3324-4313-8610-64571DF15173">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF01401" target="_blank" href="../SQLRF/statements_7001.htm#SQLRF01401"><span class="italic">Oracle Database SQL Language Reference</span></a> for syntax and additional information about the <code class="codeph">CREATE SYNONYM</code> statement</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN11808"></a>
<div class="props_rev_3"><a id="GUID-72C5E94C-009C-41CF-91E9-8EF2B1CA6AD3"></a>
<h3 id="ADMIN-GUID-72C5E94C-009C-41CF-91E9-8EF2B1CA6AD3" class="sect3"><span class="enumeration_section">24.3.3</span> Using Synonyms in DML Statements</h3>
<div>
<p>A synonym can be referenced in a DML statement the same way that the underlying object of the synonym can be referenced.</p>
<div class="section">
<p>You can successfully use any private synonym contained in your schema or any public synonym, assuming that you have the necessary privileges to access the underlying object, either explicitly, from an enabled role, or from <code class="codeph">PUBLIC</code>. You can also reference any private synonym contained in another schema if you have been granted the necessary object privileges for the underlying object.</p>
<p>You can reference another user&#39;s synonym using only the object privileges that you have been granted. For example, if you have only the <code class="codeph">SELECT</code> privilege on the <code class="codeph">jward</code>.<code class="codeph">emp</code> table, and the synonym <code class="codeph">jward.employee</code> is created for <code class="codeph">jward.emp</code>, you can query the <code class="codeph">jward</code>.<code class="codeph">employee</code> synonym, but you cannot insert rows using the <code class="codeph">jward</code>.<code class="codeph">employee</code> synonym.</p>
<p>For example, if a synonym named <code class="codeph">emp</code>loyee refers to a table or view, then the following statement is valid:</p>
<pre dir="ltr">INSERT INTO employee (empno, ename, job)
    VALUES (emp_sequence.NEXTVAL, &#39;SMITH&#39;, &#39;CLERK&#39;);
</pre>
<p>If the synonym named <code class="codeph">fire_emp</code> refers to a standalone procedure or package procedure, then you could execute it with the command</p>
<pre dir="ltr">EXECUTE Fire_emp(7344);
</pre></div>
<!-- class="section" --></div>
</div>
<a id="ADMIN11809"></a>
<div class="props_rev_3"><a id="GUID-247A2185-D40F-45BE-9E2E-077CD12A8FDD"></a>
<h3 id="ADMIN-GUID-247A2185-D40F-45BE-9E2E-077CD12A8FDD" class="sect3"><span class="enumeration_section">24.3.4</span> Dropping Synonyms</h3>
<div>
<p>Drop a synonym that is no longer required using <code class="codeph">DROP SYNONYM</code> statement. To drop a private synonym, omit the <code class="codeph">PUBLIC</code> keyword. To drop a public synonym, include the <code class="codeph">PUBLIC</code> keyword.</p>
<div class="section">
<p>You can drop any private synonym in your own schema. To drop a private synonym in another user&#39;s schema, you must have the <code class="codeph">DROP ANY SYNONYM</code> system privilege. To drop a public synonym, you must have the <code class="codeph">DROP PUBLIC SYNONYM</code> system privilege.</p>
<p>For example, the following statement drops the private synonym named <code class="codeph">emp</code>:</p>
<pre dir="ltr">DROP SYNONYM emp;
</pre>
<p>The following statement drops the public synonym named <code class="codeph">public_emp</code>:</p>
<pre dir="ltr">DROP PUBLIC SYNONYM public_emp;
</pre>
<p>When you drop a synonym, its definition is removed from the data dictionary. All objects that reference a dropped synonym remain. However, they become invalid (not usable). For more information about how dropping synonyms can affect other schema objects, see <span class="q">&#34;<a href="general.htm#GUID-46D82F8E-C360-4223-B469-18039B1FFB21" title="Oracle Database provides an automatic mechanism to ensure that a dependent object is always up to date with respect to its referenced objects. You can also manually recompile invalid object.">Managing Object Dependencies</a>&#34;</span><a id="d180795e4547" class="indexterm-anchor"></a>.</p>
<div class="infoboxnotealso" id="GUID-247A2185-D40F-45BE-9E2E-077CD12A8FDD__GUID-01A2685F-DB58-4716-96BE-2505F95E80F5">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF01805" target="_blank" href="../SQLRF/statements_9002.htm#SQLRF01805"><span class="italic">Oracle Database SQL Language Reference</span></a> for syntax and additional information about the <code class="codeph">DROP SYNONYM</code> statement</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="ADMIN11810"></a>
<div class="props_rev_3"><a id="GUID-D27171E8-3849-4E5E-87E4-23724746AF1D"></a>
<h2 id="ADMIN-GUID-D27171E8-3849-4E5E-87E4-23724746AF1D" class="sect2"><span class="enumeration_section">24.4</span> Views, Synonyms, and Sequences Data Dictionary Views</h2>
<div>
<p>You can query data dictionary views for information about views, synonyms, and sequences.</p>
<div class="section">
<p>The following views display information about views, synonyms, and sequences:</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-D27171E8-3849-4E5E-87E4-23724746AF1D__GUID-555D3A4A-7A32-463A-936F-5D60C0D6B09C">
<table class="cellalignment1849" summary="Column 1 lists the views that display information about views, synonyms, or sequences. Column 2 describes each view.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1935" id="d180795e4665">View</th>
<th class="cellalignment1936" id="d180795e4668">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1937" id="d180795e4673" headers="d180795e4665">
<p><code class="codeph"><a class="olink REFRN23305" target="_blank" href="../REFRN/GUID-0CC3D425-DB1F-4604-8339-4D10D37F6C03.htm#REFRN23305">DBA_VIEWS</a></code></p>
<p><code class="codeph"><a class="olink REFRN20305" target="_blank" href="../REFRN/GUID-0FE29B36-0882-47AE-A54E-A01FC9C4100A.htm#REFRN20305">ALL_VIEWS</a></code></p>
<p><code class="codeph"><a class="olink REFRN26305" target="_blank" href="../REFRN/GUID-85D91957-E162-4B0D-A2E2-46C92ADE886C.htm#REFRN26305">USER_VIEWS</a></code></p>
</td>
<td class="cellalignment1938" headers="d180795e4673 d180795e4668">
<p><code class="codeph">DBA</code> view describes all views in the database. <code class="codeph">ALL</code> view is restricted to views accessible to the current user. <code class="codeph">USER</code> view is restricted to views owned by the current user.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1937" id="d180795e4704" headers="d180795e4665">
<p><code class="codeph"><a class="olink REFRN23273" target="_blank" href="../REFRN/GUID-A4B4EFAE-F979-4F78-A0B2-12EFDD22F25D.htm#REFRN23273">DBA_SYNONYMS</a></code></p>
<p><code class="codeph"><a class="olink REFRN20273" target="_blank" href="../REFRN/GUID-DCDB52FF-8339-4EDE-B36A-2E12AFE25D33.htm#REFRN20273">ALL_SYNONYMS</a></code></p>
<p><code class="codeph"><a class="olink REFRN26273" target="_blank" href="../REFRN/GUID-D7528744-7201-45A6-9D52-F8A1A15DE2F2.htm#REFRN26273">USER_SYNONYMS</a></code></p>
</td>
<td class="cellalignment1938" headers="d180795e4704 d180795e4668">
<p>These views describe synonyms.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1937" id="d180795e4727" headers="d180795e4665">
<p><code class="codeph"><a class="olink REFRN23244" target="_blank" href="../REFRN/GUID-C3A27F09-9062-4F99-86FC-A937EA278C18.htm#REFRN23244">DBA_SEQUENCES</a></code></p>
<p><code class="codeph"><a class="olink REFRN20244" target="_blank" href="../REFRN/GUID-5867804F-1339-4CB6-9A56-6B6DCECB61BB.htm#REFRN20244">ALL_SEQUENCES</a></code></p>
<p><code class="codeph"><a class="olink REFRN26244" target="_blank" href="../REFRN/GUID-F1EA0A1C-555B-4648-B22B-6FF3A0300910.htm#REFRN26244">USER_SEQUENCES</a></code></p>
</td>
<td class="cellalignment1938" headers="d180795e4727 d180795e4668">
<p>These views describe sequences.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1937" id="d180795e4750" headers="d180795e4665">
<p><code class="codeph"><a class="olink REFRN23301" target="_blank" href="../REFRN/GUID-D53203C1-5958-4F7E-B47A-13E6C93EF972.htm#REFRN23301">DBA_UPDATABLE_COLUMNS</a></code></p>
<p><code class="codeph"><a class="olink REFRN20301" target="_blank" href="../REFRN/GUID-D318F142-14DD-4226-BA83-3482CB80AF6D.htm#REFRN20301">ALL_UPDATABLE_COLUMNS</a></code></p>
<p><code class="codeph"><a class="olink REFRN26301" target="_blank" href="../REFRN/GUID-E277B9D6-2CBC-4760-A9FF-DBF7AA8CB434.htm#REFRN26301">USER_UPDATABLE_COLUMNS</a></code></p>
</td>
<td class="cellalignment1938" headers="d180795e4750 d180795e4668">
<p>These views describe all columns in join views that are updatable.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1842">
<tr>
<td class="cellalignment1854">
<table class="cellalignment1847">
<tr>
<td class="cellalignment1846"><a href="hash.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1846"><a href="repair.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2001, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1856">
<table class="cellalignment1845">
<tr>
<td class="cellalignment1846"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1846"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1846"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1846"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1846"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1846"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>