<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-168"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Administering%20a%20CDB%20with%20SQL%2APlus"></a><title>Administering a CDB with SQL*Plus</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="Administering a CDB with SQL*Plus includes tasks such as access a container in a CDB, modifying a CDB, executing DDL statements in a CDB, and running Oracle-supplied SQL scripts in a CDB."/>
<meta name="keywords" content="CDBs, administering, current container, PDBs, connecting to, CONNECT command, CONNECT command, SQL*Plus, ALTER SESSION statement, SET CONTAINER clause, DBMS_SQL package, executing PL/SQL code, ALTER PLUGGABLE DATABASE statement, modifying, ALTER DATABASE statement, root container, open mode, open modes, PDB_PLUG_IN_VIOLATIONS view, compatibility violations, STARTUP command, pdb_save_or_discard_state clause, preserving on restart, ALTER SYSTEM statement, CONTAINER clause, data definition language (DDL), catcon.pl, SQL scripts, shutting down, shutting down an instance"/>
<meta name="dcterms.created" content="2017-07-10T12:24:11Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Administrator&rsquo;s Guide"/>
<meta name="dcterms.identifier" content="E41484-15"/>
<meta name="dcterms.isVersionOf" content="ADMIN"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2001, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="cdb_plug_em.htm" title="Previous" type="text/html"/>
<link rel="Next" href="cdb_admin_em.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41484-15.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-2E5025EE-BED3-45A4-9EAA-B05C8DA66F97"></a> <span id="PAGE" style="display:none;">50/59</span> <!-- End Header -->
<a id="ADMIN13606"></a>
<h1 id="ADMIN-GUID-2E5025EE-BED3-45A4-9EAA-B05C8DA66F97" class="sect1"><span class="enumeration_chapter">40</span> Administering a CDB with SQL*Plus</h1>
<p>Administering a CDB with SQL*Plus includes tasks such as access a container in a CDB, modifying a CDB, executing DDL statements in a CDB, and running Oracle-supplied SQL scripts in a CDB.</p>
<a id="ADMIN13848"></a>
<div class="props_rev_3"><a id="GUID-0F711EA4-08A8-463F-B4C6-1CE3A24274C8"></a>
<h2 id="ADMIN-GUID-0F711EA4-08A8-463F-B4C6-1CE3A24274C8" class="sect2"><span class="enumeration_section">40.1</span> About Administering a CDB</h2>
<p>Administering a multitenant container database (CDB) is similar to administering a non-CDB, but there are some differences. Most of the differences are because some administrative tasks apply to the entire CDB, some apply only to the root, and some apply to specific pluggable databases (PDBs).</p>
<a id="ADMIN14214"></a>
<div class="props_rev_3"><a id="GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5"></a>
<h3 id="ADMIN-GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5" class="sect3"><span class="enumeration_section">40.1.1</span> About the Current Container</h3>
<div>
<p>The data dictionary in each container in a CDB is separate, and the current container is the container whose data dictionary is used for name resolution and for privilege authorization. The current container can be the root or a PDB. Each session has exactly one current container at any point in time, but it is possible for a session to switch from one container to another.</p>
<p>Each container has a unique ID and name in a CDB. You can use the <code class="codeph">CON_ID</code> and <code class="codeph">CON_NAME</code> parameters in the <code class="codeph">USERENV</code> namespace to determine the current container ID and name with the <code class="codeph">SYS_CONTEXT</code> function. For example, the following query returns the current container name:</p>
<pre dir="ltr">SELECT SYS_CONTEXT (&#39;USERENV&#39;, &#39;CON_NAME&#39;) FROM DUAL;
</pre>
<p>You can access a container in various ways in a CDB. For example, you can use the SQL*Plus <code class="codeph">CONNECT</code> command, and you can use an <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> statement to switch the container of the current session.</p>
<p>The following rules apply to the current container in a CDB:</p>
<ul style="list-style-type: disc;">
<li>
<p>The current container can be <code class="codeph">CDB$ROOT</code> (root) only for common users. The current container can be a particular PDB for both common users and local users.</p>
</li>
<li>
<p>The current container must be the root when a SQL statement includes <code class="codeph">CONTAINER = ALL</code>.</p>
<p>You can include the <code class="codeph">CONTAINER</code> clause in several SQL statements, such as the <code class="codeph">CREATE USER</code>, <code class="codeph">ALTER USER</code>, <code class="codeph">CREATE ROLE</code>, <code class="codeph">GRANT</code>, <code class="codeph">REVOKE</code>, and <code class="codeph">ALTER SYSTEM</code> statements.</p>
</li>
<li>
<p>Only a common user with the commonly granted <code class="codeph">SET CONTAINER</code> privilege can run a SQL statement that includes <code class="codeph">CONTAINER = ALL</code>.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5__GUID-E4BED5D3-830A-410E-B12D-D09BFABE46A5">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-136666E0-2BF9-4538-8D60-11505898E5E2" title="When you are executing PL/SQL code in a container in a CDB, and you want to execute one or more SQL statements in a different container, use the DBMS_SQL package to switch containers.">Executing Code in Containers Using the DBMS_SQL Package</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_mon.htm#GUID-626B9812-6938-4268-806A-DAF6D5B4F2E6" title="You can determine your current container ID or container name in a CDB.">Determining the Current Container ID or Name</a>&#34;</span></p>
</li>
<li>
<p><a class="olink CNCPT89396" target="_blank" href="../CNCPT/cdblogic.htm#CNCPT89396"><span class="italic">Oracle Database Concepts</span></a></p>
</li>
<li>
<p><a class="olink SQLRF06117" target="_blank" href="../SQLRF/functions199.htm#SQLRF06117"><span class="italic">Oracle Database SQL Language Reference</span></a></p>
</li>
<li>
<p><a class="olink DBSEG754" target="_blank" href="../DBSEG/users.htm#DBSEG754"><span class="italic">Oracle Database Security Guide</span></a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADMIN13548"></a><a id="ADMIN13884"></a>
<div class="props_rev_3"><a id="GUID-3E8857D2-9D0D-4584-BC81-341B3C1C6FBC"></a>
<h3 id="ADMIN-GUID-3E8857D2-9D0D-4584-BC81-341B3C1C6FBC" class="sect3"><span class="enumeration_section">40.1.2</span> About Administrative Tasks in a CDB</h3>
<div>
<p>Common users perform administrative tasks for a CDB.</p>
<p>A common user has a single identity and can log in to the root and any PDB in which it has privileges. Some tasks, such as starting up a CDB instance, can be performed only by a common user.</p>
<p>Other administrative tasks are the same for a CDB and a non-CDB. <a href="cdb_admin.htm#GUID-3E8857D2-9D0D-4584-BC81-341B3C1C6FBC__BABDHIBE" title="This table describes each common task and provides cross references to more information about each common task.">Table 40-1</a> describes some of these tasks and provides pointers to the relevant documentation.</p>
<div class="tblformalwide" id="GUID-3E8857D2-9D0D-4584-BC81-341B3C1C6FBC__BABDHIBE">
<p class="titleintable">Table 40-1 Administrative Tasks Common to CDBs and Non-CDBs</p>
<table class="cellalignment1880" title="Administrative Tasks Common to CDBs and Non-CDBs" summary="This table describes each common task and provides cross references to more information about each common task.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1863" id="d281013e421">Task</th>
<th class="cellalignment1943" id="d281013e424">Description</th>
<th class="cellalignment1863" id="d281013e427">Additional Information</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e432" headers="d281013e421">
<p>Starting up a CDB instance</p>
</td>
<td class="cellalignment1944" headers="d281013e432 d281013e424">
<p>To start a CDB instance, the current user must be a common user whose current container is the root.</p>
<p>When you open a CDB, its PDBs are mounted. Use the <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statement to modify the open mode of one or more PDBs.</p>
</td>
<td class="cellalignment1865" headers="d281013e432 d281013e427">
<p><span class="q">&#34;<a href="start.htm#GUID-203404B5-5157-4F29-A241-B8ABC4753819" title="When you start up a database, you create an instance of that database and you determine the state of the database. Normally, you start up an instance by mounting and opening the database. Doing so makes the database available for any valid user to connect to and perform typical data access operations.">Starting Up a Database</a>&#34;</span></p>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="You can modify the open mode of a PDB by using the ALTER PLUGGABLE DATABASE SQL statement or the SQL*Plus STARTUP command.">Modifying the Open Mode of PDBs</a>&#34;</span></p>
<p><span class="q">&#34;<a href="cdb_pdb_admin.htm#GUID-E73BCAED-FF57-474A-A8C5-207D3F465413" title="You can use the ALTER PLUGGABLE DATABASE statement to modify the attributes of a single PDB.">Modifying a PDB with the ALTER PLUGGABLE DATABASE Statement</a>&#34;</span></p>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5" title="The data dictionary in each container in a CDB is separate, and the current container is the container whose data dictionary is used for name resolution and for privilege authorization. The current container can be the root or a PDB. Each session has exactly one current container at any point in time, but it is possible for a session to switch from one container to another.">About the Current Container</a>&#34;</span></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e504" headers="d281013e421">
<p>Managing processes</p>
</td>
<td class="cellalignment1944" headers="d281013e504 d281013e424">
<p>A CDB has one set of background processes shared by the root and all PDBs.</p>
</td>
<td class="cellalignment1865" headers="d281013e504 d281013e427">
<p><a href="manproc.htm#GUID-9B3A136E-D275-417B-B6F4-59A45D42655F" title="Oracle Databases uses several processes so that multiple users and applications can connect to a single database instance simultaneously.">Managing Processes</a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e519" headers="d281013e421">
<p>Managing memory</p>
</td>
<td class="cellalignment1944" headers="d281013e519 d281013e424">
<p>A CDB has a single system global area (SGA) and a single aggregate program global area (PGA). The memory required by a CDB is the sum of the memory requirements for all of the PDBs that will be part of the CDB.</p>
</td>
<td class="cellalignment1865" headers="d281013e519 d281013e427">
<p><a href="memory.htm#GUID-BEABE53D-8058-4834-B99B-5C80A8AD5B06" title="Memory management involves maintaining optimal sizes for the Oracle Database instance memory structures as demands on the database change.">Managing Memory</a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e534" headers="d281013e421">
<p>Managing security</p>
</td>
<td class="cellalignment1944" headers="d281013e534 d281013e424">
<p>You can create and drop common users and local users in a CDB. You can also grant privileges to and revoke privileges from these users. You can also manage the <code class="codeph">CONTAINER_DATA</code> attributes of common users.</p>
<p>In addition, grant the following roles to the appropriate users:</p>
<ul style="list-style-type: disc;">
<li>
<p>Grant the <code class="codeph">CDB_DBA</code> role to CDB administrators.</p>
</li>
<li>
<p>Grant the <code class="codeph">PDB_DBA</code> role to PDB administrators.</p>
</li>
</ul>
</td>
<td class="cellalignment1865" headers="d281013e534 d281013e427">
<p><a class="olink DBSEG573" target="_blank" href="../DBSEG/users.htm#DBSEG573"><span class="italic">Oracle Database Security Guide</span></a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e565" headers="d281013e421">
<p>Monitoring errors and alerts</p>
</td>
<td class="cellalignment1944" headers="d281013e565 d281013e424">
<p>A CDB has one alert log for the entire CDB. The name of a PDB is included in records in trace files, when appropriate.</p>
</td>
<td class="cellalignment1865" headers="d281013e565 d281013e427">
<p><span class="q">&#34;<a href="monitoring.htm#GUID-E5F89E8E-7FBC-47DD-BA5D-96AFD9CE4BC7" title="You can monitor database errors and alerts to prevent, detect, and solve problems.">Monitoring Errors and Alerts</a>&#34;</span></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e581" headers="d281013e421">
<p>Managing diagnostic data</p>
</td>
<td class="cellalignment1944" headers="d281013e581 d281013e424">
<p>In a CDB, you can use the Oracle Database fault diagnosability infrastructure and the Automatic Diagnostic Repository (ADR).</p>
</td>
<td class="cellalignment1865" headers="d281013e581 d281013e427">
<p><a href="diag.htm#GUID-8DEB1BE0-8FB9-4FB2-A19A-17CF6F5791C3" title="Oracle Database includes an advanced fault diagnosability infrastructure for collecting and managing diagnostic data. Diagnostic data includes the trace files, dumps, and core files that are also present in previous releases, plus new types of diagnostic data that enable customers and Oracle Support to identify, investigate, track, and resolve problems quickly and effectively.">Managing Diagnostic Data</a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e599" headers="d281013e421">
<p>Managing control files</p>
</td>
<td class="cellalignment1944" headers="d281013e599 d281013e424">
<p>A CDB has one control file.</p>
</td>
<td class="cellalignment1865" headers="d281013e599 d281013e427">
<p><a href="control.htm#GUID-5F6F9382-6921-4992-9789-E63B18E99C5F" title="You can create, back up, and drop control files.">Managing Control Files</a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e614" headers="d281013e421">
<p>Managing the online redo log and the archived redo log files</p>
</td>
<td class="cellalignment1944" headers="d281013e614 d281013e424">
<p>A CDB has one online redo log and one set of archived redo log files.</p>
</td>
<td class="cellalignment1865" headers="d281013e614 d281013e427">
<p><a href="onlineredo.htm#GUID-BC1F1762-0BB1-4218-B7AF-6160C395AAE4" title="You manage the redo log by completing tasks such as creating redo log groups and members, relocating and renaming redo log members, dropping redo log groups and members, and forcing log switches.">Managing the Redo Log</a></p>
<p><a href="archredo.htm#GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3" title="You manage the archived redo log files by completing tasks such as choosing between NOARCHIVELOG&nbsp;or&nbsp;ARCHIVELOG&nbsp;mode and specifying archive destinations.">Managing Archived Redo Log Files</a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e642" headers="d281013e421">
<p>Managing tablespaces</p>
</td>
<td class="cellalignment1944" headers="d281013e642 d281013e424">
<p>You can create, modify, and drop tablespaces and temporary tablespaces for the root and for individual PDBs. You can also specify a default tablespace, default tablespace type, and a default temporary tablespace for the root. The root has its own set of Oracle-supplied tablespaces, such as the <code class="codeph">SYSTEM</code> tablespace, and each PDB has its own set of Oracle-supplied tablespaces.</p>
</td>
<td class="cellalignment1865" headers="d281013e642 d281013e427">
<p><a href="tspaces.htm#GUID-1C162C60-6698-44F2-B2A9-F3E2D2958D88" title="A tablespace is a database storage unit that groups related logical structures together. The database data files are stored in tablespaces.">Managing Tablespaces</a></p>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-EABCEE30-0C2C-493C-83E0-F5D72D8F8E14" title="The ALTER DATABASE statement modifies a CDB. The ALTER PLUGGABLE DATABASE statement can modify the open mode of one or more PDBs.">Modifying a CDB</a>&#34;</span></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e683" headers="d281013e421">
<p>Managing data files and temp files</p>
</td>
<td class="cellalignment1944" headers="d281013e683 d281013e424">
<p>The root has its own data files, and each PDB has its own data files. In a CDB, you can manage data files and temp files in basically the same way you would manage them for a non-CDB. However, the following exceptions apply to CDBs:</p>
<ul style="list-style-type: disc;">
<li>
<p>You can limit the amount of storage used by the data files for a PDB by using the <code class="codeph">STORAGE</code> clause in a <code class="codeph">CREATE</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> or <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statement.</p>
</li>
<li>
<p>There is a default temporary tablespace for the root and for each PDB.</p>
</li>
</ul>
</td>
<td class="cellalignment1865" headers="d281013e683 d281013e427">
<p><a href="dfiles.htm#GUID-501A8889-3C18-4F99-B0B7-9095E981B970" title="You can manage data files and temp files by performing tasks such as creating them, altering them, and dropping them.">Managing Data Files and Temp Files</a></p>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-EABCEE30-0C2C-493C-83E0-F5D72D8F8E14" title="The ALTER DATABASE statement modifies a CDB. The ALTER PLUGGABLE DATABASE statement can modify the open mode of one or more PDBs.">Modifying a CDB</a>&#34;</span></p>
<p><span class="q">&#34;<a href="cdb_plug.htm#GUID-55EFBF80-25CF-4C80-8E96-C6BB4134A637" title="The optional STORAGE clause of the CREATE PLUGGABLE DATABASE statement specifies storage limits for PDBs.">Storage Limits</a>&#34;</span></p>
<p><span class="q">&#34;<a href="cdb_pdb_admin.htm#GUID-0200CF6A-8822-4347-9410-4435FDB47745" title="You can modify a PDB using the ALTER PLUGGABLE DATABASE statement and with the SQL*Plus STARTUP and SHUTDOWN commands.">Modifying a PDB</a>&#34;</span></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e787" headers="d281013e421">
<p>Managing undo</p>
</td>
<td class="cellalignment1944" headers="d281013e787 d281013e424">
<p>There is one active undo tablespace for a single-instance CDB. For an Oracle RAC CDB, there is one active undo tablespace for each instance. In a CDB, the <code class="codeph">UNDO_MANAGEMENT</code> initialization parameter must be set to <code class="codeph">AUTO</code>, and an undo tablespace is required to manage the undo data.</p>
<p>Only a common user who has the appropriate privileges and whose current container is the root can create an undo tablespace. Undo tablespaces are visible in static data dictionary views and dynamic performance (V$) views when the current container is the root. Undo tablespaces are visible only in dynamic performance views when the current container is a PDB. When the current container is a PDB, an attempt to create an undo tablespace fails without returning an error.</p>
</td>
<td class="cellalignment1865" headers="d281013e787 d281013e427">
<p><a href="undo.htm#GUID-2C865CF9-A8B5-4BF1-A451-E8C08D3611F0" title="For a default installation, Oracle Database automatically manages undo. There is typically no need for DBA intervention. However, if your installation uses Oracle Flashback operations, you may need to perform some undo management tasks to ensure the success of these operations.">Managing Undo</a></p>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5" title="The data dictionary in each container in a CDB is separate, and the current container is the container whose data dictionary is used for name resolution and for privilege authorization. The current container can be the root or a PDB. Each session has exactly one current container at any point in time, but it is possible for a session to switch from one container to another.">About the Current Container</a>&#34;</span></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e819" headers="d281013e421">
<p>Moving data between PDBs</p>
</td>
<td class="cellalignment1944" headers="d281013e819 d281013e424">
<p>You can move data between PDBs using the same methods that you would use to move data between non-CDBs. For example, you can transport the data or use Data Pump export/import to move the data.</p>
</td>
<td class="cellalignment1865" headers="d281013e819 d281013e427">
<p><a href="transport.htm#GUID-1901E9C3-8FCE-4D4E-AB65-34D703474E52" title="Transporting data moves the data from one database to another.">Transporting Data</a></p>
<p><a class="olink SUTIL100" target="_blank" href="../SUTIL/GUID-17FAE261-0972-4220-A2E4-44D479F519D4.htm#SUTIL100"><span class="italic">Oracle Database Utilities</span></a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e839" headers="d281013e421">
<p>Using Oracle Managed Files</p>
</td>
<td class="cellalignment1944" headers="d281013e839 d281013e424">
<p>Using Oracle Managed files can simplify administration for both a CDB and a non-CDB.</p>
</td>
<td class="cellalignment1865" headers="d281013e839 d281013e427">
<p><a href="omf.htm#GUID-4A3C4616-0D81-4BBA-8EAD-FCAA8AD5C15A" title="Oracle Database can manage the files that comprise the database.">Using Oracle Managed Files</a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e854" headers="d281013e421">
<p><a id="d281013e856" class="indexterm-anchor"></a><a id="d281013e860" class="indexterm-anchor"></a>Using Transparent Data Encryption</p>
</td>
<td class="cellalignment1944" headers="d281013e854 d281013e424">
<p>Transparent Data Encryption is a feature that enables encryption of individual table columns before storing them in the data file, or enables encryption of entire tablespaces. In a CDB, each PDB has its own master key for Transparent Data Encryption, and, where applicable, the <code class="codeph">ADMINISTER</code> <code class="codeph">KEY</code> <code class="codeph">MANAGEMENT</code> SQL statement enables key management at the CDB level and for individual PDBs.</p>
</td>
<td class="cellalignment1865" headers="d281013e854 d281013e427">
<p><a class="olink ASOAG10352" target="_blank" href="../ASOAG/using-transparent-data-encryption-with-other-oracle-features.htm#ASOAG10352"><span class="italic">Oracle Database Advanced Security Guide</span></a></p>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5" title="The data dictionary in each container in a CDB is separate, and the current container is the container whose data dictionary is used for name resolution and for privilege authorization. The current container can be the root or a PDB. Each session has exactly one current container at any point in time, but it is possible for a session to switch from one container to another.">About the Current Container</a>&#34;</span></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e892" headers="d281013e421">
<p><a id="d281013e894" class="indexterm-anchor"></a><a id="d281013e898" class="indexterm-anchor"></a><a id="d281013e902" class="indexterm-anchor"></a>Using a standby database</p>
</td>
<td class="cellalignment1944" headers="d281013e892 d281013e424">
<p>Oracle Data Guard can configure a physical standby or a logical standby of a CDB. Data Guard operates on the entire CDB, not on individual PDBs.</p>
</td>
<td class="cellalignment1865" headers="d281013e892 d281013e427">
<p><a class="olink SBYDB" target="_blank" href="../SBYDB/toc.htm"><span class="italic">Oracle Data Guard Concepts and Administration</span></a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e917" headers="d281013e421">
<p><a id="d281013e919" class="indexterm-anchor"></a><a id="d281013e923" class="indexterm-anchor"></a>Using Oracle Database Vault</p>
</td>
<td class="cellalignment1944" headers="d281013e917 d281013e424">
<p>Oracle Database Vault policies are scoped to individual PDBs.</p>
</td>
<td class="cellalignment1865" headers="d281013e917 d281013e427">
<p><a class="olink DVADM71131" target="_blank" href="../DVADM/dvintro.htm#DVADM71131"><span class="italic">Oracle Database Vault Administrator&#39;s Guide</span></a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1865" id="d281013e938" headers="d281013e421">
<p>Dropping a database</p>
</td>
<td class="cellalignment1944" headers="d281013e938 d281013e424">
<p>When you drop a CDB, the root, seed, and all of its PDBs (including their data) are also dropped.</p>
<p>You can also drop individual PDBs with the <code class="codeph">DROP</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statement.</p>
</td>
<td class="cellalignment1865" headers="d281013e938 d281013e427">
<p><span class="q">&#34;<a href="create.htm#GUID-92F8F1B3-9E04-46D2-A4E4-3CC788459A38" title="Dropping a database involves removing its data files, online redo logs, control files, and initialization parameter files.">Dropping a Database</a>&#34;</span></p>
<p><span class="q">&#34;<a href="cdb_plug.htm#GUID-6EEAC62B-E7DD-47BA-A62B-1F34B3D9D02E" title="The DROP PLUGGABLE DATABASE statement drops a PDB. You can drop a PDB when you want to move the PDB from one CDB to another or when you no longer need the PDB.">Dropping a PDB</a>&#34;</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso" id="GUID-3E8857D2-9D0D-4584-BC81-341B3C1C6FBC__GUID-4F6475EA-9A54-4BBF-9AA2-BE6EE8F97848">
<p class="notep1">See Also:</p>
<p><a class="olink CNCPT89248" target="_blank" href="../CNCPT/cdblogic.htm#CNCPT89248"><span class="italic">Oracle Database Concepts</span></a> for more information about the architecture of a CDB</p>
</div>
</div>
</div>
<a id="ADMIN13886"></a><a id="ADMIN13885"></a>
<div class="props_rev_3"><a id="GUID-DF42C0D3-8968-4810-9327-9D176337D356"></a>
<h3 id="ADMIN-GUID-DF42C0D3-8968-4810-9327-9D176337D356" class="sect3"><span class="enumeration_section">40.1.3</span> About Using Manageability Features in a CDB</h3>
<div>
<p>For each of Oracle Database&#39;s manageability features in a CDB, it is important to understand the data location and the data visibility.</p>
<p>It is important to understand where the data is stored for Oracle Database&#39;s manageability features in a CDB. When the data for a feature is stored in the root only, the data related to a PDB is not included if the PDB is unplugged. However, when the data for a feature is stored in the PDB, the data related to the PDB is included if the PDB is unplugged, and this data remains part of the PDB if it is plugged into the same CDB or a different CDB.</p>
<p>It is also important to understand which data is visible to different users. Generally, in a CDB, a common user can view data for the root and for multiple PDBs when the common user&#39;s current container is the root. A common user can view this data by querying container data objects. The specific data that is visible varies for the manageability features. A user whose current container is a PDB can view data for that PDB only.</p>
<p><a href="cdb_admin.htm#GUID-DF42C0D3-8968-4810-9327-9D176337D356__BAJEGGGI" title="This table lists the manageability features and includes the data location, data visibility, privileges required, and additional information references for each feature.">Table 40-2</a> describes how the manageability features work in a CDB.</p>
<div class="tblformalwide" id="GUID-DF42C0D3-8968-4810-9327-9D176337D356__BAJEGGGI">
<p class="titleintable">Table 40-2 Manageability Features in a CDB</p>
<table class="cellalignment1880" title="Manageability Features in a CDB" summary="This table lists the manageability features and includes the data location, data visibility, privileges required, and additional information references for each feature.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1891" id="d281013e1072">Manageability Feature</th>
<th class="cellalignment1897" id="d281013e1075">Data Location</th>
<th class="cellalignment1872" id="d281013e1078">Data Visibility</th>
<th class="cellalignment1891" id="d281013e1081">Additional Information</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d281013e1086" headers="d281013e1072">
<p>Active Session History (ASH)</p>
<p>ASH collects information about active database sessions. You can use this information to analyze and identify performance issues.</p>
</td>
<td class="cellalignment1899" headers="d281013e1086 d281013e1075">
<p>Most of the ASH data is stored in memory. A small percentage of the ASH data samples are stored in the root.</p>
<p>ASH data related to a PDB is not included if the PDB is unplugged.</p>
</td>
<td class="cellalignment1875" headers="d281013e1086 d281013e1078">
<p>A common user whose current container is the root can view ASH data for the root and for PDBs.</p>
<p>A user whose current container is a PDB can view ASH data for the PDB only.</p>
</td>
<td class="cellalignment1894" headers="d281013e1086 d281013e1081">
<p><a class="olink TDPPT065" target="_blank" href="../TDPPT/tdppt_transient.htm#TDPPT065"><span class="italic">Oracle Database 2 Day + Performance Tuning Guide</span></a></p>
<p><a class="olink TGDBA277" target="_blank" href="../TGDBA/sampling.htm#TGDBA277"><span class="italic">Oracle Database Performance Tuning Guide</span></a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d281013e1113" headers="d281013e1072">
<p>Alerts</p>
<p>An alert is a notification of a possible problem.</p>
</td>
<td class="cellalignment1899" headers="d281013e1113 d281013e1075">
<p>Threshold settings that pertain to a PDB are stored in the PDB.</p>
<p>Alerts posted when thresholds are violated are enqueued into the alert queue in the root.</p>
<p>Threshold settings that pertain to a PDB are included if the PDB is unplugged. Alerts related to a PDB are not included if the PDB is unplugged.</p>
</td>
<td class="cellalignment1875" headers="d281013e1113 d281013e1078">
<p>A common user whose current container is the root can view alerts for the root and for PDBs.</p>
<p>A user whose current container is a PDB can view alert thresholds and alerts for the PDB only.</p>
</td>
<td class="cellalignment1894" headers="d281013e1113 d281013e1081">
<p><span class="q">&#34;<a href="monitoring.htm#GUID-E5F89E8E-7FBC-47DD-BA5D-96AFD9CE4BC7" title="You can monitor database errors and alerts to prevent, detect, and solve problems.">Monitoring Errors and Alerts</a>&#34;</span></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d281013e1140" headers="d281013e1072">
<p>Automated Database Maintenance Tasks</p>
<p>Automated database maintenance tasks are tasks that are started automatically at regular intervals to perform maintenance operations on the database. Automated tasks include automatic optimizer statistics collection, Automatic Segment Advisor tasks, and Automatic SQL Tuning Advisor tasks.</p>
</td>
<td class="cellalignment1899" headers="d281013e1140 d281013e1075">
<p>A user can schedule maintenance windows and enable or disable maintenance tasks for the current container only. If the current container is the root, then the changes only apply to the root. If the current container is a PDB, then the changes only apply to the PDB.</p>
<p>Data related to a PDB is stored in the PDB for automatic optimizer statistics collection and the Automatic Segment Advisor. This data is included if the PDB is unplugged.</p>
<p>Automatic SQL Tuning Advisor runs only in the root. See the SQL Tuning Advisor row in this table for information about data collected by Automatic SQL Tuning Advisor.</p>
</td>
<td class="cellalignment1875" headers="d281013e1140 d281013e1078">
<p>See the appropriate row in this table for data visibility information about the following manageability features: automatic optimizer statistics collection, Automatic Segment Advisor, and Automatic SQL Tuning Advisor.</p>
</td>
<td class="cellalignment1894" headers="d281013e1140 d281013e1081">
<p><a href="tasks.htm#GUID-7F7C805E-BA64-43A5-9A09-FC259FFA9AA8" title="Oracle Database has automated several common maintenance tasks typically performed by database administrators. These automated maintenance tasks are performed when the system load is expected to be light. You can enable and disable individual maintenance tasks, and can configure when these tasks run and what resource allocations they are allotted.">Managing Automated Database Maintenance Tasks</a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d281013e1164" headers="d281013e1072">
<p>Automatic Database Diagnostic Monitor (ADDM)</p>
<p>ADDM can diagnose a database&#39;s performance and determine how identified problems can be resolved.</p>
</td>
<td class="cellalignment1899" headers="d281013e1164 d281013e1075">
<p>All ADDM runs must be performed in the root. All ADDM results are stored in the root.</p>
<p>ADDM analyzes activity in a PDB within the context of the current analysis target. ADDM does not analyze one PDB at a time. As in previous releases, ADDM runs with a target of either the entire instance or Oracle RAC database.</p>
<p>ADDM results related to a PDB are not included if the PDB is unplugged.</p>
</td>
<td class="cellalignment1875" headers="d281013e1164 d281013e1078">
<p>ADDM results are visible only to a common user whose current container is the root. The ADDM results can include information about multiple PDBs. The ADDM results cannot be viewed when the current container is a PDB.</p>
</td>
<td class="cellalignment1894" headers="d281013e1164 d281013e1081">
<p><a class="olink ADMQS102" target="_blank" href="../ADMQS/GUID-CC51D765-6777-4E0B-AD8C-F85CF5C017DE.htm#ADMQS102"><span class="italic">Oracle Database 2 Day DBA</span></a></p>
<p><a class="olink TGDBA026" target="_blank" href="../TGDBA/pfgrf_diag.htm#TGDBA026"><span class="italic">Oracle Database Performance Tuning Guide</span></a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d281013e1191" headers="d281013e1072">
<p>Automatic Optimizer Statistics Collection</p>
<p>Automatic optimizer statistics collection gathers optimizer statistics for all schema objects in the database for which there are no statistics or only stale statistics. The statistics gathered by this task are used by the SQL query optimizer to improve the performance of SQL execution.</p>
</td>
<td class="cellalignment1899" headers="d281013e1191 d281013e1075">
<p>When an automatic optimizer statistics collection task gathers data for a PDB, it stores this data in the PDB. This data is included if the PDB is unplugged.</p>
</td>
<td class="cellalignment1875" headers="d281013e1191 d281013e1078">
<p>A common user whose current container is the root can view optimizer statistics data for PDBs.</p>
<p>A user whose current container is a PDB can view optimizer statistics data for the PDB only.</p>
</td>
<td class="cellalignment1894" headers="d281013e1191 d281013e1081">
<p><a href="cdb_dbrm.htm#GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" title="You can use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB).">Using Oracle Resource Manager for PDBs with SQL*Plus</a></p>
<p><a class="olink TGSQL389" target="_blank" href="../TGSQL/tgsql_stats.htm#TGSQL389"><span class="italic">Oracle Database SQL Tuning Guide</span></a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d281013e1218" headers="d281013e1072">
<p>Automatic Segment Advisor</p>
<p>The Automatic Segment Advisor identifies segments that have space available for reclamation and makes recommendations on how to defragment those segments.</p>
</td>
<td class="cellalignment1899" headers="d281013e1218 d281013e1075">
<p>When Automatic Segment Advisor gathers data for a PDB, it stores this data in the PDB. This data is included if the PDB is unplugged.</p>
</td>
<td class="cellalignment1875" headers="d281013e1218 d281013e1078">
<p>A common user whose current container is the root can view Automatic Segment Advisor data for PDBs.</p>
<p>A user whose current container is a PDB can view the Automatic Segment Advisor data for the PDB only.</p>
</td>
<td class="cellalignment1894" headers="d281013e1218 d281013e1081">
<p><span class="q">&#34;<a href="schema.htm#GUID-1F297567-4BEC-438E-9E13-683D2BB47F44" title="You can reclaim unused space. Segment Advisor, is an Oracle Database component that identifies segments that have space available for reclamation.">Reclaiming Unused Space</a>&#34;</span></p>
<p><a href="cdb_dbrm.htm#GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" title="You can use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB).">Using Oracle Resource Manager for PDBs with SQL*Plus</a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d281013e1248" headers="d281013e1072">
<p>Automatic Workload Repository (AWR)</p>
<p>The AWR collects, processes, and maintains performance statistics for problem detection and self-tuning purposes. This data is stored in the database. The gathered data can be displayed in both reports and views.</p>
</td>
<td class="cellalignment1899" headers="d281013e1248 d281013e1075">
<p>AWR data is stored in the root.</p>
<p>AWR data related to a PDB is not included if the PDB is unplugged.</p>
</td>
<td class="cellalignment1875" headers="d281013e1248 d281013e1078">
<p>A common user whose current container is the root can view AWR data for the root and for PDBs.</p>
<p>A user whose current container is a PDB can view AWR data for the PDB only.</p>
</td>
<td class="cellalignment1894" headers="d281013e1248 d281013e1081">
<p><a class="olink TGDBA169" target="_blank" href="../TGDBA/gather_stats.htm#TGDBA169"><span class="italic">Oracle Database Performance Tuning Guide</span></a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d281013e1270" headers="d281013e1072">
<p>Database Replay</p>
<p>Database Replay is a feature of Oracle Real Application Testing. Database Replay captures the workload for a database and replays it exactly on a test database.</p>
</td>
<td class="cellalignment1899" headers="d281013e1270 d281013e1075">
<p>Information about database captures and replays are stored in the root.</p>
</td>
<td class="cellalignment1875" headers="d281013e1270 d281013e1078">
<p>A common user whose current container is the root can view database capture and replay information.</p>
</td>
<td class="cellalignment1894" headers="d281013e1270 d281013e1081">
<p><a class="olink RATUG4080" target="_blank" href="../RATUG/GUID-62AAF505-1DD4-414A-9F1D-4386B59B7138.htm#RATUG4080"><span class="italic">Oracle Database Testing Guide</span></a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d281013e1288" headers="d281013e1072">
<p>SQL Management Base (SMB)</p>
<p>SMB stores statement logs, plan histories, SQL plan baselines, and SQL profiles in the data dictionary.</p>
</td>
<td class="cellalignment1899" headers="d281013e1288 d281013e1075">
<p>SMB data related to a PDB is stored in the PDB. The SMB data related to a PDB is included if the PDB is unplugged.</p>
</td>
<td class="cellalignment1875" headers="d281013e1288 d281013e1078">
<p>A common user whose current container is the root can view SMB data for PDBs.</p>
<p>A user whose current container is a PDB can view the SMB data for the PDB only.</p>
</td>
<td class="cellalignment1894" headers="d281013e1288 d281013e1081">
<p><a class="olink TGSQL631" target="_blank" href="../TGSQL/tgsql_spm.htm#TGSQL631"><span class="italic">Oracle Database SQL Tuning Guide</span></a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d281013e1308" headers="d281013e1072">
<p>SQL Performance Analyzer (SPA)</p>
<p>SPA can analyze the SQL performance impact of SQL tuning and other system changes. SPA is often used with Database Replay.</p>
</td>
<td class="cellalignment1899" headers="d281013e1308 d281013e1075">
<p>A common user whose current container is the root can run SPA for any PDB. In this case, the SPA results data is stored in the root and is not included if the PDB is unplugged.</p>
<p>A user whose current container is a PDB can run SPA on the PDB. In this case, the SPA results data is stored in the PDB and is included if the PDB is unplugged.</p>
</td>
<td class="cellalignment1875" headers="d281013e1308 d281013e1078">
<p>A common user whose current container is the root can view SPA results data for PDBs.</p>
<p>A user whose current container is a PDB can view the SPA results data for the PDB only.</p>
</td>
<td class="cellalignment1894" headers="d281013e1308 d281013e1081">
<p><a class="olink RATUG239" target="_blank" href="../RATUG/GUID-8CE976A3-FB73-45FF-9B18-A6AB3F158A95.htm#RATUG239"><span class="italic">Oracle Database Testing Guide</span></a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d281013e1330" headers="d281013e1072">
<p>SQL Tuning Sets (STS)</p>
<p>An STS is a database object that includes one or more SQL statements along with their execution statistics and execution context, and could include a user priority ranking.</p>
<p>You can use an STS to tune a group of SQL statements or test their performance using SPA.</p>
</td>
<td class="cellalignment1899" headers="d281013e1330 d281013e1075">
<p>An STS can be stored in the root or in any PDB. If it is stored in the root, then you can load SQL statements from any PDB into it.</p>
<p>When a PDB is unplugged, an STS stored in the root is not included, even if the STS contains SQL statements from the PDB.</p>
<p>When a PDB is unplugged, an STS stored in the PDB is included.</p>
</td>
<td class="cellalignment1875" headers="d281013e1330 d281013e1078">
<p>A common user whose current container is the root can view STS data stored in the root only.</p>
<p>A user whose current container is a PDB can view STS data for the PDB only.</p>
</td>
<td class="cellalignment1894" headers="d281013e1330 d281013e1081">
<p><a class="olink TGSQL516" target="_blank" href="../TGSQL/tgsql_sts.htm#TGSQL516"><span class="italic">Oracle Database SQL Tuning Guide</span></a></p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1894" id="d281013e1357" headers="d281013e1072">
<p>SQL Tuning Advisor</p>
<p>SQL Tuning Advisor optimizes SQL statements that have been identified as high-load SQL statements.</p>
</td>
<td class="cellalignment1899" headers="d281013e1357 d281013e1075">
<p>Automatic SQL Tuning Advisor data is stored in the root. It might have results about SQL statements executed in a PDB that were analyzed by the advisor, but these results are not included if the PDB is unplugged.</p>
<p>A common user whose current container is the root can run SQL Tuning Advisor manually for SQL statements from any PDB. When a statement is tuned, it is tuned in any container that runs the statement.</p>
<p>A user whose current container is a PDB can also run SQL Tuning Advisor manually for SQL statements from the PDB. When SQL Tuning Advisor is run manually from a PDB, the results are stored in the PDB from which it is run. In this case, a statement is tuned only for the current PDB, and the results related to a PDB are included if the PDB is unplugged.</p>
</td>
<td class="cellalignment1875" headers="d281013e1357 d281013e1078">
<p>When SQL Tuning Advisor is run automatically, the results are visible only to a common user whose current container is the root. These results cannot be viewed when the current container is a PDB.</p>
<p>When SQL Tuning Advisor is run manually by a user whose current container is a PDB, the results are only visible to a user whose current container is that PDB.</p>
</td>
<td class="cellalignment1894" headers="d281013e1357 d281013e1081">
<p><a class="olink TDPPT160" target="_blank" href="../TDPPT/tdppt_sqltune.htm#TDPPT160"><span class="italic">Oracle Database 2 Day + Performance Tuning Guide</span></a></p>
<p><a class="olink TGSQL540" target="_blank" href="../TGSQL/tgsql_sqltune.htm#TGSQL540"><span class="italic">Oracle Database SQL Tuning Guide</span></a></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>To run SPA or SQL Tuning Advisor for SQL statements from a PDB, a common user must have the following privileges:</p>
<ul style="list-style-type: disc;">
<li>
<p>Common <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> privilege or local <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> privilege in the PDB</p>
</li>
<li>
<p>The privileges required to execute the SQL statements in the PDB</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-DF42C0D3-8968-4810-9327-9D176337D356__GUID-839D42E0-2259-4CA9-9A3B-7C3811FF96A0">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5" title="The data dictionary in each container in a CDB is separate, and the current container is the container whose data dictionary is used for name resolution and for privilege authorization. The current container can be the root or a PDB. Each session has exactly one current container at any point in time, but it is possible for a session to switch from one container to another.">About the Current Container</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_mon.htm#GUID-EA8E7462-1083-4C16-B958-E3F7D4BBDFB9" title="In a multitenant container database (CDB), the metadata for data dictionary tables and view definitions is stored only in the root. However, each pluggable database (PDB) has its own set of data dictionary tables and views for the database objects contained in the PDB.">About CDB and PDB Information in Views</a>&#34;</span> for an overview of container data objects</p>
</li>
<li>
<p><a class="olink DBSEG803" target="_blank" href="../DBSEG/authorization.htm#DBSEG803"><span class="italic">Oracle Database Security Guide</span></a> for detailed information about container data objects</p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADMIN13696"></a>
<div class="props_rev_3"><a id="GUID-9EB3F783-1780-4F7C-88B2-2C714CA05146"></a>
<h3 id="ADMIN-GUID-9EB3F783-1780-4F7C-88B2-2C714CA05146" class="sect3"><span class="enumeration_section">40.1.4</span> About Managing Database Objects in a CDB</h3>
<div>
<p>In a CDB, different containers can contain different database objects.</p>
<p>An Oracle database stores database objects, such as tables, indexes, and directories. Database objects that are owned by a schema are called schema objects, while database objects that are not owned by a schema are called nonschema objects. The root and PDBs contain schemas, and schemas contain schema objects. The root and PDBs can also contain nonschema objects, such as users, roles, tablespaces, directories, and editions.</p>
<p>In a CDB, the root contains Oracle-supplied schemas and database objects. Oracle-supplied common users, such as <code class="codeph">SYS</code> and <code class="codeph">SYSTEM</code>, own these schemas and common database objects. They can also own local objects, both in the root and in a PDB.</p>
<p>You can create common users in the root to administer containers in the CDB. User-created common users can create database objects in the root. Oracle recommends that, in the root, schemas owned by user-created common users contain only database triggers and the objects used in their definitions. A user-created common user can also own any type of local object in a PDB.</p>
<p>You can create local users in a PDB. A local user in a PDB can create schema objects and nonschema objects in the PDB. You cannot create local users in the root.</p>
<p>Name resolution in a CDB is similar to name resolution in a non-CDB, except that names are resolved in the context of the dictionary of the user&#39;s current container.</p>
<div class="infoboxnotealso" id="GUID-9EB3F783-1780-4F7C-88B2-2C714CA05146__GUID-1ED40347-F90C-4D96-84C9-73F41B5B806C">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="general.htm#GUID-5BEEEA18-8606-48CA-B51A-34FD301BF93B" title="You can create and manage several types of schema objects with Oracle Database.">Managing Schema Objects</a></p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5" title="The data dictionary in each container in a CDB is separate, and the current container is the container whose data dictionary is used for name resolution and for privilege authorization. The current container can be the root or a PDB. Each session has exactly one current container at any point in time, but it is possible for a session to switch from one container to another.">About the Current Container</a>&#34;</span></p>
</li>
<li>
<p><a class="olink SQLRF20003" target="_blank" href="../SQLRF/sql_elements007.htm#SQLRF20003"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about schema objects and nonschema objects</p>
</li>
<li>
<p><a class="olink CNCPT89257" target="_blank" href="../CNCPT/cdblogic.htm#CNCPT89257"><span class="italic">Oracle Database Concepts</span></a> for an overview of common users and local users</p>
</li>
<li>
<p><a class="olink DBSEG573" target="_blank" href="../DBSEG/users.htm#DBSEG573"><span class="italic">Oracle Database Security Guide</span></a> for information about creating common users and local users</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-90C01374-20C9-41A2-AC6D-808F78AA51D3"></a>
<h2 id="ADMIN-GUID-90C01374-20C9-41A2-AC6D-808F78AA51D3" class="sect2"><span class="enumeration_section">40.2</span> Accessing a Container in a CDB with SQL*Plus</h2>
<p>You can access a container in a CDB with SQL*Plus.</p>
<a id="ADMIN13607"></a>
<div class="props_rev_3"><a id="GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3"></a>
<h3 id="ADMIN-GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" class="sect3"><span class="enumeration_section">40.2.1</span> About Accessing a Container in a CDB with SQL*Plus</h3>
<div>
<p>You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus <code class="codeph">CONNECT</code> command, or you can switch into a container with an <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> SQL statement.</p>
<p>This section assumes that you understand how to connect to a non-CDB in SQL*Plus. See <span class="q">&#34;<a href="dba.htm#GUID-58A40F41-B611-4C0F-A6E3-D45A81515BF2" title="There are several ways to submit SQL statements and commands to Oracle Database.">Submitting Commands and SQL to the Database</a>&#34;</span> for information.</p>
<p>Clients access the root or a PDB through database services. Database services have an optional <code class="codeph">PDB</code> property. When a PDB is created, a new default service for the PDB is created automatically. The service has the same name as the PDB. With the service name, you can access the PDB using the easy connect syntax or the net service name from the tnsnames.ora file. Oracle Net Services must be configured properly for clients to access this service.</p>
<p>When a user connects using a service with a non-null <code class="codeph">PDB</code> property, the user name is resolved in the context of the specified PDB. When a user connects without specifying a service or using a service name with a null <code class="codeph">PDB</code> property, the user name is resolved in the context of the root. You can view the <code class="codeph">PDB</code> property for a service by querying the <code class="codeph">CDB_SERVICES</code> data dictionary view or by running the <code class="codeph">config</code> <code class="codeph">service</code> command in the SRVCTL utility.</p>
<p>The setting for the <code class="codeph">SESSIONS</code> initialization parameter limits the total number of sessions available in a CDB, including the sessions connected to PDBs. If the limit is reached for the CDB, then users cannot connect to PDBs. To ensure that one PDB does not use too many sessions, you can limit the number of sessions available to a PDB by setting the <code class="codeph">SESSIONS</code> initialization parameter in the PDB.</p>
<div class="infobox-note" id="GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3__GUID-5883BC1F-0342-4DA7-9C46-EDBCB2721DEA">
<p class="notep1">Note:</p>
<p>When two or more CDBs on the same computer system use the same listener and two or more PDBs have the same service name in these CDBs, a connection that specifies this service name connects randomly to one of the PDBs with the service name. To avoid incorrect connections, ensure that all service names for PDBs are unique on the computer system, or configure a separate listener for each CDB on the computer system.</p>
</div>
<div class="infoboxnotealso" id="GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3__GUID-B7CB7399-B880-482B-B1B6-0954D569864A">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink CNCPT89270" target="_blank" href="../CNCPT/cdblogic.htm#CNCPT89270"><span class="italic">Oracle Database Concepts</span></a> for more information about database services in a CDB</p>
</li>
<li>
<p><a class="olink NETAG001" target="_blank" href="../NETAG/intro.htm#NETAG001"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for information about configuring Oracle Net Services</p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_pdb_admin.htm#GUID-6FDBCEFC-29DF-4CBB-A000-B105A7328955" title="You can create, modify, or remove services for a PDB.">Managing Services Associated with PDBs</a>&#34;</span></p>
</li>
<li>
<p><a href="cdb_mon.htm#GUID-1DED3127-84E4-4967-BEB3-D0ADEC622643__CHDDHBAF">Example 43-9</a></p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_mon.htm#GUID-6BF52FD2-AD0D-469F-AD2B-E5254FB9AD72" title="In a CDB, some initialization parameters apply to the root and to all of the PDBs. When such an initialization parameter is changed, it affects the entire CDB. You can set other initialization parameters to different values in each container.">Listing the Initialization Parameters That Are Modifiable in PDBs</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADMIN13608"></a>
<div class="props_rev_3"><a id="GUID-ACC9EEE3-2F98-4AAF-8F59-60E3334C7C92"></a>
<h3 id="ADMIN-GUID-ACC9EEE3-2F98-4AAF-8F59-60E3334C7C92" class="sect3"><span class="enumeration_section">40.2.2</span> Connecting to a Container Using the SQL*Plus CONNECT Command</h3>
<p>You can use the SQL*Plus <code class="codeph">CONNECT</code> command to connect to the root or to a PDB.</p>
<a id="ADMIN14114"></a><a id="ADMIN14115"></a><a id="ADMIN14116"></a><a id="ADMIN13609"></a>
<div class="props_rev_3"><a id="GUID-BFC692E7-132E-4AC5-8527-CA766AA36826"></a>
<h4 id="ADMIN-GUID-BFC692E7-132E-4AC5-8527-CA766AA36826" class="sect4"><span class="enumeration_section">40.2.2.1</span> Connecting to the Root Using the SQL*Plus CONNECT Command</h4>
<div>
<p>You can connect to the root in the same way that you connect to a non-CDB.</p>
<div class="section">
<p>Specifically, you can use the following techniques to connect to the root with the SQL*Plus <code class="codeph">CONNECT</code> command:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Local connection</p>
</li>
<li>
<p>Local connection with operating system authentication</p>
</li>
<li>
<p>Database connection using easy connect</p>
</li>
<li>
<p>Database connection using a net service name</p>
</li>
<li>
<p>Remote database connection using external authentication</p>
</li>
</ul>
<p>The following prerequisites must be met for the user connecting to the root:</p>
<ul style="list-style-type: disc;">
<li>
<p>The user must be a common user.</p>
</li>
<li>
<p>The user must be granted <code class="codeph">CREATE</code> <code class="codeph">SESSION</code> privilege in the root.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To connect to the root using the SQL*Plus CONNECT command:</p>
<ol>
<li>
<p>Configure your environment so that you can open SQL*Plus.</p>
<p>See <span class="q">&#34;<a href="dba.htm#GUID-895EC72B-C620-4D93-9F23-3F6DC1706764" title="Oracle Database includes the following components: the Oracle Database instance, which is a collection of processes and memory, and a set of disk files that contain user data and system data.">Connecting to the Database with SQL*Plus</a>&#34;</span>.</p>
</li>
<li>
<p>Start SQL*Plus with the <code class="codeph">/NOLOG</code> argument:</p>
<pre dir="ltr">sqlplus /nolog
</pre></li>
<li>
<p>Issue a SQL*Plus <code class="codeph">CONNECT</code> command to connect to the root, as shown in the following examples.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="example" id="GUID-BFC692E7-132E-4AC5-8527-CA766AA36826__GUID-701020AA-54A5-459C-903D-528D7D5D68C4">
<p class="titleinexample">Example 40-1 Connecting to the Root with a Local Connection</p>
<p>This example connects to the root in the local CDB as user <code class="codeph">SYSTEM</code>. SQL*Plus prompts for the <code class="codeph">SYSTEM</code> user password.</p>
<pre dir="ltr">connect system
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-BFC692E7-132E-4AC5-8527-CA766AA36826__GUID-669FA57B-428D-45E1-BF2F-97CF024C39FB">
<p class="titleinexample">Example 40-2 Connecting to the Root with Operating System Authentication</p>
<p>This example connects locally to the root with the <code class="codeph">SYSDBA</code> administrative privilege with operating system authentication.</p>
<pre dir="ltr">connect / as sysdba
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-BFC692E7-132E-4AC5-8527-CA766AA36826__GUID-EEAC4A3F-D1BD-4527-B9DD-21F1080EA8DD">
<p class="titleinexample">Example 40-3 Connecting to the Root with a Net Service Name</p>
<p>Assume that clients are configured to have a net service name for the root in the CDB. For example, the net service name can be part of an entry in a tnsnames.ora file.</p>
<p>This example connects as common user <code class="codeph">c##dba</code> to the database service designated by the net service name <code class="codeph">mycdb</code>. SQL*Plus prompts for the <code class="codeph">c##dba</code> user password.</p>
<pre dir="ltr">connect c##dba@mycdb
</pre>
<div class="infoboxnotealso" id="GUID-BFC692E7-132E-4AC5-8527-CA766AA36826__GUID-05B5AEEF-EEF0-4C59-99E8-F7E91451DE39">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="dba.htm#GUID-58A40F41-B611-4C0F-A6E3-D45A81515BF2" title="There are several ways to submit SQL statements and commands to Oracle Database.">Submitting Commands and SQL to the Database</a>&#34;</span></p>
</div>
</div>
<!-- class="example" --></div>
</div>
<a id="ADMIN13970"></a><a id="ADMIN13611"></a>
<div class="props_rev_3"><a id="GUID-DC60DC84-D5CF-418B-AB1C-DCB34AF85461"></a>
<h4 id="ADMIN-GUID-DC60DC84-D5CF-418B-AB1C-DCB34AF85461" class="sect4"><span class="enumeration_section">40.2.2.2</span> Connecting to a PDB Using the SQL*Plus CONNECT Command</h4>
<div>
<p>To connect to a PDB with the SQL*Plus <code class="codeph">CONNECT</code> command, you can use easy connect or a net service name.</p>
<div class="section">
<p>To connect to a PDB, a user must be one of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>A common user with a <code class="codeph">CREATE</code> <code class="codeph">SESSION</code> privilege granted commonly or granted locally in the PDB</p>
</li>
<li>
<p>A local user defined in the PDB with <code class="codeph">CREATE</code> <code class="codeph">SESSION</code> privilege</p>
</li>
</ul>
<p>Only a user with <code class="codeph">SYSDBA</code>, <code class="codeph">SYSOPER</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> privilege can connect to a PDB that is in mounted mode. To change the open mode of a PDB, see <span class="q">&#34;<a href="cdb_admin.htm#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="You can modify the open mode of a PDB by using the ALTER PLUGGABLE DATABASE SQL statement or the SQL*Plus STARTUP command.">Modifying the Open Mode of PDBs</a>&#34;</span>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To connect to a PDB using the SQL*Plus CONNECT command:</p>
<ol>
<li>
<p>Configure your environment so that you can open SQL*Plus.</p>
<p>See <span class="q">&#34;<a href="dba.htm#GUID-895EC72B-C620-4D93-9F23-3F6DC1706764" title="Oracle Database includes the following components: the Oracle Database instance, which is a collection of processes and memory, and a set of disk files that contain user data and system data.">Connecting to the Database with SQL*Plus</a>&#34;</span>.</p>
</li>
<li>
<p>Start SQL*Plus with the <code class="codeph">/NOLOG</code> argument:</p>
<pre dir="ltr">sqlplus /nolog
</pre></li>
<li>
<p>Issue a SQL*Plus <code class="codeph">CONNECT</code> command using easy connect or a net service name to connect to the PDB.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="example" id="GUID-DC60DC84-D5CF-418B-AB1C-DCB34AF85461__GUID-09A47F04-779A-423B-AE4C-EAEF8E8684AD">
<p class="titleinexample">Example 40-4 Connecting to a PDB</p>
<p>Assume that clients are configured to have a net service name for each PDB that matches each PDB name. For example, the net service name can be part of an entry in a tnsnames.ora file.</p>
<p>The following command connects to the <code class="codeph">sh</code> local user in the <code class="codeph">salespdb</code> PDB:</p>
<pre dir="ltr">CONNECT sh@salespdb
</pre>
<p>The following command connects to the <code class="codeph">SYSTEM</code> common user in the <code class="codeph">salespdb</code> PDB:</p>
<pre dir="ltr">CONNECT system@salespdb
</pre>
<p>See <span class="q">&#34;<a href="dba.htm#GUID-991445B9-EA9E-481E-A33D-E737F2DD9CFB" title="You submit the SQL*Plus CONNECT command to initially connect to the Oracle instance or at any time to reconnect as a different user.">Step 4: Submit the SQL*Plus CONNECT Command</a>&#34;</span> for more examples.</p>
</div>
<!-- class="example" --></div>
</div>
</div>
<a id="ADMIN13618"></a><a id="ADMIN13619"></a><a id="ADMIN13620"></a><a id="ADMIN13616"></a>
<div class="props_rev_3"><a id="GUID-A67C5365-99A1-4BE1-87CB-CA9A4DEBBF70"></a>
<h3 id="ADMIN-GUID-A67C5365-99A1-4BE1-87CB-CA9A4DEBBF70" class="sect3"><span class="enumeration_section">40.2.3</span> Switching to a Container Using the ALTER SESSION Statement</h3>
<div>
<p>When you are connected to a container as a common user, you can switch to a different container using the <code class="codeph">ALTER SESSION</code> statement.</p>
<div class="section">
<p>You can use the following statement to switch to a different container:</p>
<pre dir="ltr">ALTER SESSION SET CONTAINER = <span class="italic">container_name</span>
</pre>
<p>For <span class="italic">container_name</span>, specify one of the following:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">CDB$ROOT</code> to switch to the root</p>
</li>
<li>
<p><code class="codeph">PDB$SEED</code> to switch to the seed</p>
</li>
<li>
<p>A PDB name to switch to the PDB</p>
<p>When the current container is the root, you can view the names of the PDBs in a CDB by querying the <code class="codeph">DBA_PDBS</code> view.</p>
</li>
</ul>
<p>The following are considerations for using the <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> statement:</p>
<ul style="list-style-type: disc;">
<li>
<p>After the statement completes successfully, the current schema of the session is set to the schema owned by the common user in the specified container.</p>
</li>
<li>
<p>After the statement completes successfully, the security context is reset to that of the schema owned by the common user in the specified container.</p>
</li>
<li>
<p>After the statement completes successfully, login triggers for the specified container do not fire.</p>
<p>If you require a trigger, then you can define a before or after <code class="codeph">SET CONTAINER</code> trigger in a PDB to fire before or after the <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> statement is executed.</p>
</li>
<li>
<p>Package states are not shared across containers.</p>
</li>
<li>
<p>When closing a PDB, sessions that switched into the PDB and sessions that connected directly to the PDB are handled identically.</p>
</li>
<li>
<p>A transaction cannot span multiple containers. If you start a transaction and use <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> to switch to a different container, then you cannot issue DML, DDL, <code class="codeph">COMMIT</code>, or <code class="codeph">ROLLBACK</code> statements until you switch back to the container in which you started the transaction.</p>
</li>
<li>
<p>If you open a cursor and use <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> to switch to different container, then you cannot fetch data from that cursor until you switch back to the container in which the cursor was opened.</p>
</li>
<li>
<p>You can use the <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> statement for connection pooling as well as advanced CDB administration.</p>
<p>For example, you can use this statement for connection pooling with PDBs for a multitenancy application. A multitenancy application uses a single instance of the software on a server to serve multiple customers (tenants). In a non-CDB, multitenancy is typically supported by adding an extra column that identifies the tenant to every table used by the application, and tenants check out connections from a connection pool. In a CDB with PDBs, each tenant can have its own PDB, and you can use the <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> statement in a connection pooling configuration.</p>
</li>
</ul>
<p>The following prerequisites must be met to use the <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> statement:</p>
<ul style="list-style-type: disc;">
<li>
<p>The current user must be a common user. The initial connection must be made using the SQL*Plus <code class="codeph">CONNECT</code> command.</p>
</li>
<li>
<p>When altering a session to switch to a PDB as a common user that was not supplied with Oracle Database, the current user must be granted the <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> privilege commonly or must be granted this privilege locally in the PDB.</p>
</li>
</ul>
<div class="infobox-note" id="GUID-A67C5365-99A1-4BE1-87CB-CA9A4DEBBF70__GUID-1E09DCE5-80CD-46D0-B59E-6BE2C00889FE">
<p class="notep1">Note:</p>
<p>When an <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> statement is used to switch to the current container, these prerequisites are not enforced, and no error message is returned if they are not met.</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To switch to a container using the ALTER SESSION statement:</p>
<ol>
<li>
<p>In SQL*Plus, connect to a container as a common user with the required privileges.</p>
<p>See <span class="q">&#34;<a href="cdb_admin.htm#GUID-ACC9EEE3-2F98-4AAF-8F59-60E3334C7C92" title="You can use the SQL*Plus CONNECT command to connect to the root or to a PDB.">Connecting to a Container Using the SQL*Plus CONNECT Command</a>&#34;</span>.</p>
</li>
<li>
<p>(Optionally) Check the current open mode of the container to which you are switching.</p>
<p>To check the current open mode of the root or a PDB, query the <code class="codeph">OPEN_MODE</code> column in the <code class="codeph">V$CONTAINERS</code> view when the current container is the root.</p>
<p>If the open mode of the root should be changed, then follow the instructions in <span class="q">&#34;<a href="start.htm#GUID-2042AAE4-DAE5-4CD4-89E9-B9DE3A8A2AA1" title="You can alter the availability of a database. You may want to do this in order to restrict access for maintenance reasons or to make the database read only.">Altering Database Availability</a>&#34;</span> to change the open mode.</p>
<p>If the open mode of the PDB should be changed, then follow the instructions in <span class="q">&#34;<a href="cdb_admin.htm#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="You can modify the open mode of a PDB by using the ALTER PLUGGABLE DATABASE SQL statement or the SQL*Plus STARTUP command.">Modifying the Open Mode of PDBs</a>&#34;</span> to change the open mode.</p>
<p>The open mode of the root imposes limitations on the open mode of PDBs. For example, the root must be open before any PDBs can be open. Therefore, you might need to change the open mode of the root before changing the open mode of a PDB.</p>
</li>
<li>
<p>Run the <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> statement and specify the container to which you want to switch.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p>The following examples switch to various containers using <code class="codeph">ALTER</code> <code class="codeph">SESSION</code>.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-A67C5365-99A1-4BE1-87CB-CA9A4DEBBF70__BAJFADCJ">
<p class="titleinexample">Example 40-5 Switching to the PDB salespdb</p>
<pre dir="ltr">ALTER SESSION SET CONTAINER = salespdb;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-A67C5365-99A1-4BE1-87CB-CA9A4DEBBF70__BAJFGFEH">
<p class="titleinexample">Example 40-6 Switching to the Root</p>
<pre dir="ltr">ALTER SESSION SET CONTAINER = CDB$ROOT;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-A67C5365-99A1-4BE1-87CB-CA9A4DEBBF70__BAJIFJJH">
<p class="titleinexample">Example 40-7 Switching to the Seed</p>
<pre dir="ltr">ALTER SESSION SET CONTAINER = PDB$SEED;
</pre>
<div class="infoboxnotealso" id="GUID-A67C5365-99A1-4BE1-87CB-CA9A4DEBBF70__GUID-611879C6-A334-4152-BA8D-B72EB6B8DF3A">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="manproc.htm#GUID-BB76E57C-3F16-4C85-AEF6-BA14FC1B4777" title="Database Resident Connection Pooling (DRCP) provides a connection pool in the database server for typical Web application usage scenarios where the application acquires a database connection, works on it for a relatively short duration, and then releases it. DRCP pools &#34;dedicated&#34; servers. A pooled server is the equivalent of a server foreground process and a database session combined.">About Database Resident Connection Pooling</a>&#34;</span></p>
</div>
</div>
<!-- class="example" --></div>
</div>
</div>
<a id="ADMIN14211"></a><a id="ADMIN14185"></a>
<div class="props_rev_3"><a id="GUID-136666E0-2BF9-4538-8D60-11505898E5E2"></a>
<h2 id="ADMIN-GUID-136666E0-2BF9-4538-8D60-11505898E5E2" class="sect2"><span class="enumeration_section">40.3</span> Executing Code in Containers Using the DBMS_SQL Package</h2>
<div>
<p>When you are executing PL/SQL code in a container in a CDB, and you want to execute one or more SQL statements in a different container, use the <code class="codeph">DBMS_SQL</code> package to switch containers.</p>
<div class="section">
<p>For example, you can use the <code class="codeph">DBMS_SQL</code> package to switch containers when you need to perform identical actions in more than one container.</p>
<p>The following are considerations for using <code class="codeph">DBMS_SQL</code> to switch containers:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>A transaction cannot span multiple containers.</p>
<p>If the set of actions you must perform in the target container requires a transaction, then consider using an autonomous transaction and perform a commit or rollback as the last action.</p>
</li>
<li>
<p><code class="codeph">SET</code> <code class="codeph">ROLE</code> statements are not allowed.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="example" id="GUID-136666E0-2BF9-4538-8D60-11505898E5E2__GUID-7DCFA972-1EAE-4968-9F39-945D3A0DA899">
<p class="titleinexample">Example 40-8 Performing Identical Actions in More Than One Container</p>
<p>This example includes a PL/SQL block that creates the <code class="codeph">identact</code> table in the <code class="codeph">hr</code> schema in two PDBs (<code class="codeph">pdb1</code> and <code class="codeph">pdb2</code>). The example also inserts a row into the <code class="codeph">identact</code> table in both PDBs.</p>
<pre dir="ltr">DECLARE
  c1 INTEGER;
  rowcount INTEGER;
  taskList VARCHAR2(32767) :=
    &#39;DECLARE
      PRAGMA AUTONOMOUS TRANSACTION;
     BEGIN
       -- Create the hr.identact table.
       EXECUTE IMMEDIATE
         &#39;&#39;CREATE TABLE hr.identact
             (actionno NUMBER(4) NOT NULL,
              action VARCHAR2 (10))&#39;&#39;;
       EXECUTE IMMEDIATE
         &#39;&#39;INSERT INTO identact VALUES(1, &#39;ACTION1&#39;)&#39;&#39;;
       -- A commit is required if the tasks include DML.
       COMMIT;
       EXCEPTION
         WHEN OTHERS THEN
           -- If there are errors, then drop the table.
           BEGIN
             EXECUTE IMMEDIATE &#39;&#39;DROP TABLE identact&#39;&#39;;
           EXCEPTION
            WHEN OTHERS THEN
              NULL;
            END;
        END;&#39;;
  TYPE containerListType IS TABLE OF VARCHAR2(128) INDEX BY PLS_INTEGER;
  containerList  containerListType;
BEGIN
  containerList(1) := &#39;PDB1&#39;;
  containerList(2) := &#39;PDB2&#39;;
  c1 := DBMS_SQL.OPEN_CURSOR;
  FOR conIndex IN containerList.first..containerList.last LOOP
    DBMS_OUTPUT.PUT_LINE(&#39;Creating in container: &#39; || containerList(conIndex));
    DBMS_SQL.PARSE(c =&gt; c1 ,
                   statement =&gt; taskList,
                   language_flag =&gt; DBMS_SQL.NATIVE,
                   edition= &gt; NULL,
                   apply_crossedition_trigger =&gt; NULL,
                   fire_apply_trigger =&gt; NULL,
                   schema =&gt; &#39;HR&#39;,
                   container =&gt; containerList(conIndex));
     rowcount := DBMS_SQL.EXECUTE(c=&gt;c1);
  END LOOP;
  DBMS_SQL.CLOSE_CURSOR(c=&gt;c1);
END;
/
</pre>
<div class="infoboxnotealso" id="GUID-136666E0-2BF9-4538-8D60-11505898E5E2__GUID-34423C3F-B32B-4172-8DED-B4AAC8705C82">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink ARPLS058" target="_blank" href="../ARPLS/d_sql.htm#ARPLS058"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code class="codeph">DBMS_SQL</code> package</p>
</li>
<li>
<p><a class="olink LNPLS00609" target="_blank" href="../LNPLS/static.htm#LNPLS00609"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about autonomous transactions</p>
</li>
</ul>
</div>
</div>
<!-- class="example" --></div>
</div>
<div class="sect2"><a id="GUID-80265A74-2826-429E-90E6-5EB68EC7D10B"></a>
<h2 id="ADMIN-GUID-80265A74-2826-429E-90E6-5EB68EC7D10B" class="sect2"><span class="enumeration_section">40.4</span> Modifying a CDB</h2>
<p>You can modify the entire CDB, the root, or one or more PDBs.</p>
<a id="ADMIN14089"></a><a id="ADMIN13626"></a>
<div class="props_rev_3"><a id="GUID-EABCEE30-0C2C-493C-83E0-F5D72D8F8E14"></a>
<h3 id="ADMIN-GUID-EABCEE30-0C2C-493C-83E0-F5D72D8F8E14" class="sect3"><span class="enumeration_section">40.4.1</span> About Modifying a CDB</h3>
<div>
<p>The <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement modifies a CDB. The <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statement can modify the open mode of one or more PDBs.</p>
<p><a href="cdb_admin.htm#GUID-EABCEE30-0C2C-493C-83E0-F5D72D8F8E14__BAJECDFH" title="This table describes ALTER DATABASE statements that modify an entire consolidated database, ALTER DATABASE statements that modify the root database or a pluggable database, and ALTER PLUGGABLE DATABASE statements.">Table 40-3</a> lists which containers are modified by clauses in <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> and <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statements.</p>
<div class="tblformalwide" id="GUID-EABCEE30-0C2C-493C-83E0-F5D72D8F8E14__BAJECDFH">
<p class="titleintable">Table 40-3 Statements That Modify Containers in a CDB</p>
<table class="cellalignment1880" title="Statements That Modify Containers in a CDB" summary="This table describes ALTER DATABASE statements that modify an entire consolidated database, ALTER DATABASE statements that modify the root database or a pluggable database, and ALTER PLUGGABLE DATABASE statements.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1858" id="d281013e2971">Modify Entire CDB</th>
<th class="cellalignment1858" id="d281013e2974">Modify Root Only</th>
<th class="cellalignment1858" id="d281013e2977">Modify One or More PDBs</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1861" id="d281013e2982" headers="d281013e2971">
<p>When connected as a common user whose current container is the root, <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statements with the following clauses modify the entire CDB:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF52389" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52389"><span class="italic">startup_clauses</span></a></p>
</li>
<li>
<p><a class="olink SQLRF52390" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52390"><span class="italic">recovery_clauses</span></a></p>
</li>
<li>
<p><a class="olink SQLRF52402" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52402"><span class="italic">logfile_clauses</span></a></p>
</li>
<li>
<p><a class="olink SQLRF52410" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52410"><span class="italic">controlfile_clauses</span></a></p>
</li>
<li>
<p><a class="olink SQLRF52412" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52412"><span class="italic">standby_database_clauses</span></a></p>
</li>
<li>
<p><a class="olink SQLRF52423" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52423"><span class="italic">instance_clauses</span></a></p>
</li>
<li>
<p><a class="olink SQLRF52424" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52424"><span class="italic">security_clause</span></a></p>
</li>
<li>
<p><a class="olink SQLRF52547" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52547"><code class="codeph">RENAME</code> <code class="codeph">GLOBAL_NAME</code> clause</a></p>
</li>
<li>
<p><a class="olink SQLRF52549" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52549"><code class="codeph">ENABLE</code> <code class="codeph">BLOCK</code> <code class="codeph">CHANGE</code> <code class="codeph">TRACKING</code> clause</a></p>
</li>
<li>
<p><a class="olink SQLRF52550" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52550"><code class="codeph">DISABLE</code> <code class="codeph">BLOCK</code> <code class="codeph">CHANGE</code> <code class="codeph">TRACKING</code> clause</a></p>
</li>
</ul>
</td>
<td class="cellalignment1861" headers="d281013e2982 d281013e2974">
<p>When connected as a common user whose current container is the root, <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statements with the following clauses modify the root only:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF52396" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52396"><span class="italic">database_file_clauses</span></a></p>
</li>
<li>
<p><a class="olink SQLRF52540" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52540"><code class="codeph">DEFAULT</code> <code class="codeph">EDITION</code> clause</a></p>
</li>
<li>
<p><a class="olink SQLRF52543" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52543"><code class="codeph">DEFAULT</code> <code class="codeph">TABLESPACE</code> clause</a></p>
</li>
</ul>
<p><code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statements with the following clauses modify the root and set default values for PDBs:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF52544" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52544"><code class="codeph">DEFAULT</code> <code class="codeph">TEMPORARY</code> <code class="codeph">TABLESPACE</code> clause</a></p>
</li>
<li>
<p><a class="olink SQLRF52421" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52421"><span class="italic">flashback_mode_clause</span></a></p>
</li>
<li>
<p><a class="olink SQLRF52542" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52542"><code class="codeph">SET</code> <code class="codeph">DEFAULT</code> { <code class="codeph">BIGFILE</code> | <code class="codeph">SMALLFILE</code> } <code class="codeph">TABLESPACE</code> clause</a></p>
</li>
<li>
<p><a class="olink SQLRF52421" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF52421"><span class="italic">set_time_zone_clause</span></a></p>
</li>
</ul>
<p>You can use these clauses to set non-default values for specific PDBs.</p>
</td>
<td class="cellalignment1861" headers="d281013e2982 d281013e2977">
<p>When connected as a common user whose current container is the root, <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statements with the following clause can modify the open mode of one or more PDBs:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF55686" target="_blank" href="../SQLRF/statements_6010.htm#SQLRF55686"><span class="italic">pdb_change_state</span></a></p>
</li>
</ul>
<p>When the current container is a PDB, <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statements with this clause can modify the open mode of the current PDB. See <span class="q">&#34;<a href="cdb_pdb_admin.htm#GUID-36AFFE0C-1B5E-4405-BD81-BC8E4DB2ADD7" title="You can modify a PDB with the ALTER PLUGGABLE DATABASE SQL statement.">Modifying a PDB with the ALTER PLUGGABLE DATABASE Statement</a>&#34;</span>.</p>
<p>When connected as a common user whose current container is the root, <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statements with the following clause can preserve or discard the open mode a PDB when the CDB restarts:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF55686" target="_blank" href="../SQLRF/statements_6010.htm#SQLRF55686"><span class="italic">pdb_save_or_discard_state</span></a></p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>This section contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="cdb_admin.htm#GUID-A85C6342-D9EB-4145-897D-3B17A1E88F40" title="When connected as a common user whose current container is the root, the ALTER DATABASE statement works the same in a CDB and a non-CDB.">About the Statements That Modify a CDB</a></p>
</li>
<li>
<p><a href="cdb_admin.htm#GUID-B34BC55B-C734-4799-A54A-0BB04073D9D0" title="A tablespace is a logical storage container for database objects, such as tables and indexes, that consume storage space. At the physical level, a tablespace stores data in one or more data files or temp files. You can use the ALTER DATABASE statement to manage tablespaces in a CDB.">About Managing Tablespaces in a CDB</a></p>
</li>
<li>
<p><a href="cdb_admin.htm#GUID-B8BA1E28-5B7D-4174-9870-82C0122B80FA" title="You can use the ALTER DATABASE statement to modify an entire CDB, including the root and all of the PDBs. Most ALTER DATABASE statements modify the entire CDB.">Modifying an Entire CDB</a></p>
</li>
<li>
<p><a href="cdb_admin.htm#GUID-E5218804-4478-4384-B03F-5A2BDECAEA6E" title="You can use the ALTER DATABASE statement to modify only the root of a CDB.">Modifying the Root</a></p>
</li>
<li>
<p><a href="cdb_admin.htm#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="You can modify the open mode of a PDB by using the ALTER PLUGGABLE DATABASE SQL statement or the SQL*Plus STARTUP command.">Modifying the Open Mode of PDBs</a></p>
</li>
<li>
<p><a href="cdb_admin.htm#GUID-7CE00CF0-9D11-44BF-AF8A-F881D129A3F9" title="You can preserve the open mode of one or more PDBs when the CDB restarts by using the ALTER PLUGGABLE DATABASE SQL statement with a pdb_save_or_discard_state clause.">Preserving or Discarding the Open Mode of PDBs When the CDB Restarts</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-EABCEE30-0C2C-493C-83E0-F5D72D8F8E14__GUID-5AB716AC-DA19-4068-9F00-EB5F8D5ABFD4">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF00802" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF00802"><span class="italic">Oracle Database SQL Language Reference</span></a></p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5" title="The data dictionary in each container in a CDB is separate, and the current container is the container whose data dictionary is used for name resolution and for privilege authorization. The current container can be the root or a PDB. Each session has exactly one current container at any point in time, but it is possible for a session to switch from one container to another.">About the Current Container</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADMIN13627"></a>
<div class="props_rev_3"><a id="GUID-A85C6342-D9EB-4145-897D-3B17A1E88F40"></a>
<h3 id="ADMIN-GUID-A85C6342-D9EB-4145-897D-3B17A1E88F40" class="sect3"><span class="enumeration_section">40.4.2</span> About the Statements That Modify a CDB</h3>
<div>
<p>When connected as a common user whose current container is the root, the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement works the same in a CDB and a non-CDB.</p>
<p>Most <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statements affect the entire CDB. The exceptions are listed in the &#34;Modify Root Only&#34; column of <a href="cdb_admin.htm#GUID-EABCEE30-0C2C-493C-83E0-F5D72D8F8E14__BAJECDFH" title="This table describes ALTER DATABASE statements that modify an entire consolidated database, ALTER DATABASE statements that modify the root database or a pluggable database, and ALTER PLUGGABLE DATABASE statements.">Table 40-3</a>.</p>
<p>When an <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement with the <code class="codeph">RENAME</code> <code class="codeph">GLOBAL_NAME</code> clause modifies the domain of a CDB, it affects the domain of each PDB with a domain that defaults to that of the CDB.</p>
<p>When connected as a common user whose current container is the root, the <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statement with the <span class="italic">pdb_change_state</span> clause modifies the open mode of one or more PDBs.</p>
<p>When the current container is a PDB, <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> and <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statements modify the current PDB only.</p>
<div class="infoboxnotealso" id="GUID-A85C6342-D9EB-4145-897D-3B17A1E88F40__GUID-D37819C7-8813-4730-9AFF-CCA56FE9F491">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF55667" target="_blank" href="../SQLRF/statements_2008.htm#SQLRF55667"><span class="italic">Oracle Database SQL Language Reference</span></a></p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_pdb_admin.htm#GUID-0200CF6A-8822-4347-9410-4435FDB47745" title="You can modify a PDB using the ALTER PLUGGABLE DATABASE statement and with the SQL*Plus STARTUP and SHUTDOWN commands.">Modifying a PDB</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-2095BEDD-3D50-4EBE-BD20-E1AE0126EDB7"></a>
<h3 id="ADMIN-GUID-2095BEDD-3D50-4EBE-BD20-E1AE0126EDB7" class="sect3"><span class="enumeration_section">40.4.3</span> Managing Tablespaces in a CDB</h3>
<p>You can manage tablespaces in a CDB.</p>
<a id="ADMIN13664"></a>
<div class="props_rev_3"><a id="GUID-B34BC55B-C734-4799-A54A-0BB04073D9D0"></a>
<h4 id="ADMIN-GUID-B34BC55B-C734-4799-A54A-0BB04073D9D0" class="sect4"><span class="enumeration_section">40.4.3.1</span> About Managing Tablespaces in a CDB</h4>
<div>
<p>A tablespace is a logical storage container for database objects, such as tables and indexes, that consume storage space. At the physical level, a tablespace stores data in one or more data files or temp files. You can use the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement to manage tablespaces in a CDB.</p>
<p>The following are considerations for tablespaces in a CDB:</p>
<ul style="list-style-type: disc;">
<li>
<p>A permanent tablespace can be associated with only one container.</p>
</li>
<li>
<p>When you create a tablespace in a container, the tablespace is associated with that container.</p>
</li>
<li>
<p>A CDB has one active undo tablespace, or one active undo tablespace for each instance of an Oracle RAC CDB.</p>
</li>
<li>
<p>There is one default temporary tablespace for each container in the CDB, including the root and each PDB.</p>
</li>
</ul>
</div>
</div>
<a id="ADMIN13666"></a>
<div class="props_rev_3"><a id="GUID-1EF2DE68-5D70-48B2-A4BE-752D068D4299"></a>
<h4 id="ADMIN-GUID-1EF2DE68-5D70-48B2-A4BE-752D068D4299" class="sect4"><span class="enumeration_section">40.4.3.2</span> About Managing Permanent Tablespaces in a CDB</h4>
<div>
<p>A permanent tablespace can be associated with only one container. Therefore, a permanent tablespace can be associated with the root or with one PDB.</p>
<p>Each container in a CDB must have its own default permanent tablespace, and default permanent tablespaces cannot be shared between containers. Users connected to the container who are not explicitly assigned a tablespace use the default permanent tablespace for the container.</p>
</div>
</div>
<a id="ADMIN14151"></a><a id="ADMIN13674"></a>
<div class="props_rev_3"><a id="GUID-CE80DD44-C691-42E4-A44A-663839439E36"></a>
<h4 id="ADMIN-GUID-CE80DD44-C691-42E4-A44A-663839439E36" class="sect4"><span class="enumeration_section">40.4.3.3</span> About Managing Temporary Tablespaces in a CDB</h4>
<div>
<p>Each container in a CDB has its own default temporary tablespace (or tablespace group).</p>
<p>You also can create additional temporary tablespaces for individual containers, and you can assign specific users in containers to these temporary tablespaces. When you unplug a PDB, its temporary tablespaces are also unplugged.</p>
<p>When a user is not assigned a temporary tablespace explicitly in a container, the user&rsquo;s temporary tablespace is the default temporary tablespace for the container.</p>
<div class="infoboxnotealso" id="GUID-CE80DD44-C691-42E4-A44A-663839439E36__GUID-DADF7386-B6E8-40A5-BCA7-61462EC13886">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="tspaces.htm#GUID-1C162C60-6698-44F2-B2A9-F3E2D2958D88" title="A tablespace is a database storage unit that groups related logical structures together. The database data files are stored in tablespaces.">Managing Tablespaces</a></p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_plug.htm#GUID-893E1D67-BD95-4757-B862-03AD13AFF722" title="You can unplug a PDB from a CDB.">Unplugging a PDB from a CDB</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-B8BA1E28-5B7D-4174-9870-82C0122B80FA" title="You can use the ALTER DATABASE statement to modify an entire CDB, including the root and all of the PDBs. Most ALTER DATABASE statements modify the entire CDB.">Modifying an Entire CDB</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-E5218804-4478-4384-B03F-5A2BDECAEA6E" title="You can use the ALTER DATABASE statement to modify only the root of a CDB.">Modifying the Root</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="ADMIN13635"></a><a id="ADMIN13636"></a><a id="ADMIN13633"></a>
<div class="props_rev_3"><a id="GUID-B8BA1E28-5B7D-4174-9870-82C0122B80FA"></a>
<h3 id="ADMIN-GUID-B8BA1E28-5B7D-4174-9870-82C0122B80FA" class="sect3"><span class="enumeration_section">40.4.4</span> Modifying an Entire CDB</h3>
<div>
<p>You can use the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement to modify an entire CDB, including the root and all of the PDBs. Most <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statements modify the entire CDB.</p>
<div class="section">
<p>See the &#34;Modify Entire CDB&#34; column of <a href="cdb_admin.htm#GUID-EABCEE30-0C2C-493C-83E0-F5D72D8F8E14__BAJECDFH" title="This table describes ALTER DATABASE statements that modify an entire consolidated database, ALTER DATABASE statements that modify the root database or a pluggable database, and ALTER PLUGGABLE DATABASE statements.">Table 40-3</a> for a list of these statements.</p>
<p>To modify an entire CDB, the following prerequisites must be met:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>The current user must be a common user with the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> privilege.</p>
</li>
<li>
<p>To run an <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement with a <span class="italic">recovery_clause</span>, the current user must have the <code class="codeph">SYSDBA</code> administrative privilege commonly granted. In this case, you must exercise this privilege using <code class="codeph">AS</code> <code class="codeph">SYSDBA</code> at connect time.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To modify an entire CDB:</p>
<ol>
<li>
<p>In SQL*Plus, ensure that the current container is the root.</p>
<p>See <span class="q">&#34;<a href="cdb_admin.htm#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>&#34;</span>.</p>
</li>
<li>
<p>Run an <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement with a clause that modifies an entire CDB.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="example" id="GUID-B8BA1E28-5B7D-4174-9870-82C0122B80FA__GUID-673DB064-22B9-4E48-8836-44F89C8FF0A7">
<p class="titleinexample">Example 40-9 Backing Up the Control File for a CDB</p>
<p>This <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement uses a <span class="italic">recovery_clause</span> to back up a control file.</p>
<pre dir="ltr">ALTER DATABASE BACKUP CONTROLFILE TO &#39;+DATA/dbs/backup/control.bkp&#39;;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-B8BA1E28-5B7D-4174-9870-82C0122B80FA__GUID-B2222769-BB3E-4878-B820-B9FD31816946">
<p class="titleinexample">Example 40-10 Adding a Redo Log File to a CDB</p>
<p>This <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement uses a <span class="italic">logfile_clause</span> to add redo log files.</p>
<pre dir="ltr">ALTER DATABASE cdb ADD LOGFILE
  GROUP 4 (&#39;/u01/logs/orcl/redo04a.log&#39;,&#39;/u02/logs/orcl/redo04b.log&#39;)
  SIZE 100M BLOCKSIZE 512 REUSE;
</pre>
<div class="infoboxnotealso" id="GUID-B8BA1E28-5B7D-4174-9870-82C0122B80FA__GUID-E809CAC4-9A17-4854-8EC8-AF987E5BE914">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF00802" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF00802"><span class="italic">Oracle Database SQL Language Reference</span></a></p>
</div>
</div>
<!-- class="example" --></div>
</div>
<a id="ADMIN13669"></a><a id="ADMIN13639"></a><a id="ADMIN13691"></a><a id="ADMIN13677"></a><a id="ADMIN13637"></a>
<div class="props_rev_3"><a id="GUID-E5218804-4478-4384-B03F-5A2BDECAEA6E"></a>
<h3 id="ADMIN-GUID-E5218804-4478-4384-B03F-5A2BDECAEA6E" class="sect3"><span class="enumeration_section">40.4.5</span> Modifying the Root</h3>
<div>
<p>You can use the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement to modify only the root of a CDB.</p>
<div class="section">
<p>When the current container is the root, these <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statements modify the root without directly modifying any of the PDBs. See the &#34;Modify Root Only&#34; column of <a href="cdb_admin.htm#GUID-EABCEE30-0C2C-493C-83E0-F5D72D8F8E14__BAJECDFH" title="This table describes ALTER DATABASE statements that modify an entire consolidated database, ALTER DATABASE statements that modify the root database or a pluggable database, and ALTER PLUGGABLE DATABASE statements.">Table 40-3</a> for a list of these statements.</p>
<p>Some of these statements set the defaults for the PDBs in the CDB. You can overwrite these defaults for a PDB by using the <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statement.</p>
<p>To modify the root, the current user must have the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> privilege in the root.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To modify the root:</p>
<ol>
<li>
<p>In SQL*Plus, ensure that the current container is the root.</p>
<p>See <span class="q">&#34;<a href="cdb_admin.htm#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>&#34;</span>.</p>
</li>
<li>
<p>Run an <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement with a clause that modifies the root.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p>The following examples modify the root.</p>
<p>A user whose current container is the root that is not explicitly assigned a tablespace uses the default permanent tablespace for the root. The tablespace specified in the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement must exist in the root.</p>
<p>After executing this statement, the default type of subsequently created tablespaces in the root is bigfile. This setting is also the default for PDBs.</p>
<p>The tablespace or tablespace group specified in the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement must exist in the root.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-E5218804-4478-4384-B03F-5A2BDECAEA6E__BAJDCIFH">
<p class="titleinexample">Example 40-11 Changing the Default Permanent Tablespace for the Root</p>
<p>This <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement uses a <code class="codeph">DEFAULT</code> <code class="codeph">TABLESPACE</code> clause to set the default permanent tablespace to <code class="codeph">root_tbs</code> for the root.</p>
<pre dir="ltr">ALTER DATABASE DEFAULT TABLESPACE root_tbs;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-E5218804-4478-4384-B03F-5A2BDECAEA6E__BAJBIDBI">
<p class="titleinexample">Example 40-12 Bringing a Data File Online for the Root</p>
<p>This <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement uses a <span class="italic">database_file_clause</span> to bring the /u02/oracle/cdb_01.dbf data file online.</p>
<pre dir="ltr">ALTER DATABASE DATAFILE &#39;/u02/oracle/cdb_01.dbf&#39; ONLINE;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-E5218804-4478-4384-B03F-5A2BDECAEA6E__BAJBCFHC">
<p class="titleinexample">Example 40-13 Changing the Default Tablespace Type for the Root</p>
<p>This <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement uses a <code class="codeph">SET</code> <code class="codeph">DEFAULT</code> <code class="codeph">TABLESPACE</code> clause to change the default tablespace type to bigfile for the root.</p>
<pre dir="ltr">ALTER DATABASE SET DEFAULT BIGFILE TABLESPACE;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-E5218804-4478-4384-B03F-5A2BDECAEA6E__BAJCBFIG">
<p class="titleinexample">Example 40-14 Changing the Default Temporary Tablespace for the Root</p>
<p>This <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement uses a <code class="codeph">DEFAULT</code> <code class="codeph">TEMPORARY</code> <code class="codeph">TABLESPACE</code> clause to set the default temporary tablespace to <code class="codeph">root_temp</code> for the root.</p>
<pre dir="ltr">ALTER DATABASE DEFAULT TEMPORARY TABLESPACE root_temp;
</pre>
<div class="infoboxnotealso" id="GUID-E5218804-4478-4384-B03F-5A2BDECAEA6E__GUID-180511F9-9C80-4E37-AC3D-81EAB8D28963">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="cdb_pdb_admin.htm#GUID-0200CF6A-8822-4347-9410-4435FDB47745" title="You can modify a PDB using the ALTER PLUGGABLE DATABASE statement and with the SQL*Plus STARTUP and SHUTDOWN commands.">Modifying a PDB</a>&#34;</span></p>
</li>
<li>
<p><a class="olink SQLRF00802" target="_blank" href="../SQLRF/statements_1006.htm#SQLRF00802"><span class="italic">Oracle Database SQL Language Reference</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="example" --></div>
</div>
<a id="ADMIN13645"></a>
<div class="props_rev_3"><a id="GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B"></a>
<h3 id="ADMIN-GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" class="sect3"><span class="enumeration_section">40.4.6</span> Modifying the Open Mode of PDBs</h3>
<p>You can modify the open mode of a PDB by using the <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> SQL statement or the SQL*Plus <code class="codeph">STARTUP</code> command.</p>
<a id="ADMIN14152"></a><a id="ADMIN14090"></a>
<div class="props_rev_3"><a id="GUID-817703E2-B3E8-486F-8E3D-CFBB38911813"></a>
<h4 id="ADMIN-GUID-817703E2-B3E8-486F-8E3D-CFBB38911813" class="sect4"><span class="enumeration_section">40.4.6.1</span> About the Open Mode of a PDB</h4>
<div>
<p>A PDB can be in various modes.</p>
<p><a href="cdb_admin.htm#GUID-817703E2-B3E8-486F-8E3D-CFBB38911813__BAJEDIHF" title="This table describes PDB modes.">Table 40-4</a> describes the possible PDB modes.</p>
<div class="tblformal" id="GUID-817703E2-B3E8-486F-8E3D-CFBB38911813__BAJEDIHF">
<p class="titleintable">Table 40-4 PDB Modes</p>
<table class="cellalignment1849" title="PDB Modes" summary="This table describes PDB modes.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1881" id="d281013e4488">Mode</th>
<th class="cellalignment1981" id="d281013e4491">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1884" id="d281013e4496" headers="d281013e4488">
<p><code class="codeph">OPEN</code> <code class="codeph">READ</code> <code class="codeph">WRITE</code></p>
</td>
<td class="cellalignment1982" headers="d281013e4496 d281013e4491">
<p>A PDB in open read/write mode allows queries and user transactions to proceed and allows users to generate redo logs.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1884" id="d281013e4510" headers="d281013e4488">
<p><code class="codeph">OPEN</code> <code class="codeph">READ</code> <code class="codeph">ONLY</code></p>
</td>
<td class="cellalignment1982" headers="d281013e4510 d281013e4491">
<p>A PDB in open read-only mode allows queries but does not allow user changes.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1884" id="d281013e4524" headers="d281013e4488">
<p><code class="codeph">OPEN</code> <code class="codeph">MIGRATE</code></p>
</td>
<td class="cellalignment1982" headers="d281013e4524 d281013e4491">
<p>When a PDB is in open migrate mode, you can run database upgrade scripts on the PDB.</p>
<p>A PDB is in this mode after an <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">OPEN</code> <code class="codeph">UPGRADE</code> is run.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1884" id="d281013e4549" headers="d281013e4488">
<p><code class="codeph">MOUNTED</code></p>
</td>
<td class="cellalignment1982" headers="d281013e4549 d281013e4491">
<p>When a PDB is in mounted mode, it behaves like a non-CDB in mounted mode. It does not allow changes to any objects, and it is accessible only to database administrators. It cannot read from or write to data files. Information about the PDB is removed from memory caches. Cold backups of the PDB are possible.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>The open read/write, read-only, and migrate modes can be restricted to users with <code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code> privilege in the PDB.</p>
<p>While a PDB is in mounted or read-only mode, database administrators can create, modify, or drop common users and roles in the CDB. The CDB applies these changes to the PDB when its open mode is changed to open in read/write mode. Before the changes are applied, descriptions of common users and roles in the PDB might be different from the descriptions in the rest of the CDB.</p>
<p>When a PDB is opened, Oracle Database checks the compatibility of the PDB with the CDB. Each compatibility violation is either a warning or an error. If a compatibility violation is a warning, then the warning is recorded in the alert log, but the PDB is opened normally without displaying a warning message. If a compatibility violation is an error, then a message is displayed when the PDB is opened stating that the PDB was altered with errors, and the errors are recorded in the alert log. You must correct the condition that caused each error. When there are errors, the PDB is opened, but access to the PDB is limited to users with <code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code> privilege so that the compatibility violations can be addressed. You can view descriptions of violations by querying <code class="codeph">PDB_PLUG_IN_VIOLATIONS</code> view.</p>
<div class="infoboxnotealso" id="GUID-817703E2-B3E8-486F-8E3D-CFBB38911813__GUID-EF0583C3-F5A8-45E2-9CB0-743203669DA3">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="You can modify the open mode of a PDB by using the ALTER PLUGGABLE DATABASE SQL statement or the SQL*Plus STARTUP command.">Modifying the Open Mode of PDBs</a>&#34;</span> for information about modifying the open mode of one or more PDBs when the current container is the root</p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_pdb_admin.htm#GUID-E73BCAED-FF57-474A-A8C5-207D3F465413" title="You can use the ALTER PLUGGABLE DATABASE statement to modify the attributes of a single PDB.">Modifying a PDB with the ALTER PLUGGABLE DATABASE Statement</a>&#34;</span> for information about modifying the open mode of a PDB when the current container is the PDB</p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-B2AC2F0B-F55E-40CD-AF37-A09E31BAA732" title="You can shut down a CDB instance in the same way that you shut down a non-CDB instance.">Shutting Down a CDB Instance</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_pdb_admin.htm#GUID-0200CF6A-8822-4347-9410-4435FDB47745" title="You can modify a PDB using the ALTER PLUGGABLE DATABASE statement and with the SQL*Plus STARTUP and SHUTDOWN commands.">Modifying a PDB</a>&#34;</span> for information about modifying other attributes of a PDB</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4"><a id="GUID-1F9914F2-E1D6-4C6F-B74B-30B4CEEC2EB8"></a>
<h4 id="ADMIN-GUID-1F9914F2-E1D6-4C6F-B74B-30B4CEEC2EB8" class="sect4"><span class="enumeration_section">40.4.6.2</span> About Modifying the Open Mode of PDBs with ALTER PLUGGABLE DATABASE</h4>
<div>
<p>When the current container is the root, an <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statement with a <span class="italic">pdb_change_state</span> clause modifies the open mode of the specified PDBs.</p>
<div class="section">
<p>The following table describes the clauses of the <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statement that modify the mode of a PDB.</p>
<div class="tblformal" id="GUID-1F9914F2-E1D6-4C6F-B74B-30B4CEEC2EB8__BAJEICEG">
<p class="titleintable">Table 40-5 ALTER PLUGGABLE DATABASE Clauses That Modify the Mode of a PDB</p>
<table class="cellalignment1849" title="ALTER PLUGGABLE DATABASE Clauses That Modify the Mode of a PDB" summary="This table describes the clauses of the ALTER PLUGGABLE DATABASE statement that modify the mode of a PDB.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1949" id="d281013e4743">Clause</th>
<th class="cellalignment1950" id="d281013e4746">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1951" id="d281013e4751" headers="d281013e4743">
<p><code class="codeph">OPEN</code> <code class="codeph">READ</code> <code class="codeph">WRITE</code> <code class="codeph">[RESTRICTED] [FORCE]</code></p>
</td>
<td class="cellalignment1952" headers="d281013e4751 d281013e4746">
<p>Opens the PDB in read/write mode.</p>
<p>When <code class="codeph">RESTRICTED</code> is specified, the PDB is accessible only to users with <code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code> privilege in the PDB. All sessions connected to the PDB that do not have <code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code> privilege on it are terminated, and their transactions are rolled back.</p>
<p>When <code class="codeph">FORCE</code> is specified, the statement opens a PDB that is currently closed and changes the open mode of a PDB that is in open read-only mode.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1951" id="d281013e4790" headers="d281013e4743">
<p><code class="codeph">OPEN</code> <code class="codeph">READ</code> <code class="codeph">ONLY</code> <code class="codeph">[RESTRICTED] [FORCE]</code></p>
</td>
<td class="cellalignment1952" headers="d281013e4790 d281013e4746">
<p>Opens the PDB in read-only mode.</p>
<p>When <code class="codeph">RESTRICTED</code> is specified, the PDB is accessible only to users with <code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code> privilege in the PDB. All sessions connected to the PDB that do not have <code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code> privilege on it are terminated.</p>
<p>When <code class="codeph">FORCE</code> is specified, the statement opens a PDB that is currently closed and changes the open mode of a PDB that is in open read/write mode.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1951" id="d281013e4829" headers="d281013e4743">
<p><code class="codeph">OPEN</code> <code class="codeph">UPGRADE</code> <code class="codeph">[RESTRICTED]</code></p>
</td>
<td class="cellalignment1952" headers="d281013e4829 d281013e4746">
<p>Opens the PDB in migrate mode.</p>
<p>When <code class="codeph">RESTRICTED</code> is specified, the PDB is accessible only to users with <code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code> privilege in the PDB.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1951" id="d281013e4854" headers="d281013e4743">
<p><code class="codeph">CLOSE</code> <code class="codeph">[IMMEDIATE]</code></p>
</td>
<td class="cellalignment1952" headers="d281013e4854 d281013e4746">
<p>Places the PDB in mounted mode.</p>
<p>The <code class="codeph">CLOSE</code> statement is the PDB equivalent of the SQL*Plus <code class="codeph">SHUTDOWN</code> command. If you do not specify <code class="codeph">IMMEDIATE</code>, then the PDB is shut down with the normal mode. See <span class="q">&#34;<a href="start.htm#GUID-276E548C-DEBC-45EC-903D-4D13F1AEC683" title="When you shut down a database with the normal mode, the database waits for all connected users to disconnect before shutting down. Normal mode is the default mode of shutdown.">Shutting Down with the Normal Mode</a>&#34;</span>.</p>
<p>When <code class="codeph">IMMEDIATE</code> is specified, this statement is the PDB equivalent of the SQL*Plus <code class="codeph">SHUTDOWN</code> command with the immediate mode. See <span class="q">&#34;<a href="start.htm#GUID-3C64BD77-4C53-41C6-B691-6CC5F59F2CEA" title="When you shut down a database with the immediate mode, Oracle Database terminates any executing SQL statements and disconnects users. Active transactions are terminated and uncommitted changes are rolled back.">Shutting Down with the Immediate Mode</a>&#34;</span>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>When you issue an <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> <code class="codeph">OPEN</code> statement, <code class="codeph">READ</code> <code class="codeph">WRITE</code> is the default unless a PDB being opened belongs to a CDB that is used as a physical standby database, in which case <code class="codeph">READ</code> <code class="codeph">ONLY</code> is the default.</p>
<p>You can specify which PDBs to modify in the following ways:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>List one or more PDBs.</p>
</li>
<li>
<p>Specify <code class="codeph">ALL</code> to modify all of the PDBs.</p>
</li>
<li>
<p>Specify <code class="codeph">ALL</code> <code class="codeph">EXCEPT</code> to modify all of the PDBs, except for the PDBs listed.</p>
</li>
</ul>
<p>For an Oracle Real Application Clusters (Oracle RAC) CDB, you can use the <span class="italic">instances</span> clause to specify the instances on which the PDB is modified in the following ways:</p>
<ul style="list-style-type: disc;">
<li>
<p>List one or more instances in the <span class="italic">instances</span> clause in the following form:</p>
<pre dir="ltr">INSTANCES = (&#39;<span class="italic">instance_name</span>&#39; [,&#39;<span class="italic">instance_name</span>&#39;] &hellip; )
</pre></li>
<li>
<p>Specify <code class="codeph">ALL</code> in the <span class="italic">instances</span> clause to modify the PDB in all running instances, as in the following example:</p>
<pre dir="ltr">INSTANCES = ALL
</pre></li>
<li>
<p>Specify <code class="codeph">ALL</code> <code class="codeph">EXCEPT</code> in the <span class="italic">instances</span> clause to modify the PDB in all of the instances, except for the instances listed, in the following form:</p>
<pre dir="ltr">INSTANCES = ALL EXCEPT(&#39;<span class="italic">instance_name</span>&#39; [,&#39;<span class="italic">instance_name</span>&#39;] &hellip; )
</pre></li>
</ul>
<p>Also, when you are closing a PDB in an Oracle RAC CDB, you can use the <span class="italic">relocate</span> clause, which includes the following options:</p>
<ul style="list-style-type: disc;">
<li>
<p>Specify <code class="codeph">NORELOCATE</code>, the default, to close the PDB in the current instance.</p>
</li>
<li>
<p>Specify <code class="codeph">RELOCATE</code> <code class="codeph">TO</code> and specify an instance name to reopen the PDB in the specified instance.</p>
</li>
<li>
<p>Specify <code class="codeph">RELOCATE</code> to reopen the PDB on a different instance that is selected by Oracle Database.</p>
</li>
</ul>
<p>To modify the open mode of PDBs with the <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statement, the following prerequisites must be met:</p>
<ul style="list-style-type: disc;">
<li>
<p>The current user must have <code class="codeph">SYSDBA</code>, <code class="codeph">SYSOPER</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> administrative privilege, and the privilege must be either commonly granted or locally granted in the PDB. The user must exercise the privilege using <code class="codeph">AS</code> <code class="codeph">SYSDBA</code>, <code class="codeph">AS</code> <code class="codeph">SYSOPER</code>, <code class="codeph">AS</code> <code class="codeph">SYSBACKUP</code>, or <code class="codeph">AS</code> <code class="codeph">SYSDG</code>, respectively, at connect time.</p>
</li>
<li>
<p>When <code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code> is enabled, <code class="codeph">RESTRICTED</code> must be specified when a PDB is opened.</p>
</li>
<li>
<p>In an Oracle RAC CDB, if a PDB is open in one or more Oracle RAC instances, then it can be opened in additional instances, but it must be opened in the same mode as in the instances in which it is already open. A PDB can be closed in some instances and opened on others.</p>
</li>
</ul>
<p>In addition, to place PDBs in a particular target mode with the <code class="codeph">ALTER</code> <code class="codeph">PLUGGAGLE</code> <code class="codeph">DATABASE</code> statement, you must meet the requirements described in the following table.</p>
<div class="tblformalwide" id="GUID-1F9914F2-E1D6-4C6F-B74B-30B4CEEC2EB8__BAJFBFDH">
<p class="titleintable">Table 40-6 Modifying the Open Mode of PDBs with ALTER PLUGGABLE DATABASE</p>
<table class="cellalignment1880" title="Modifying the Open Mode of PDBs with ALTER PLUGGABLE DATABASE" summary="This table describes the requirements for placing PDBs in a particular mode with the ALTER PLUGGABLE DATABASE statement.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1857" id="d281013e5118">Target Mode of PDBs</th>
<th class="cellalignment1857" id="d281013e5121">ALL Keyword Included</th>
<th class="cellalignment1857" id="d281013e5124">FORCE Keyword Included</th>
<th class="cellalignment1857" id="d281013e5127">Required Mode for the Root</th>
<th class="cellalignment1857" id="d281013e5130">Required Mode for Each PDB Being Modified</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1860" id="d281013e5135" headers="d281013e5118">
<p>Read/write</p>
</td>
<td class="cellalignment1860" headers="d281013e5135 d281013e5121">
<p>Yes</p>
</td>
<td class="cellalignment1860" headers="d281013e5135 d281013e5124">
<p>Yes</p>
</td>
<td class="cellalignment1860" headers="d281013e5135 d281013e5127">
<p>Read/write</p>
</td>
<td class="cellalignment1860" headers="d281013e5135 d281013e5130">
<p>Mounted, read-only, or read/write</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1860" id="d281013e5151" headers="d281013e5118">
<p>Read/write</p>
</td>
<td class="cellalignment1860" headers="d281013e5151 d281013e5121">
<p>Yes</p>
</td>
<td class="cellalignment1860" headers="d281013e5151 d281013e5124">
<p>No</p>
</td>
<td class="cellalignment1860" headers="d281013e5151 d281013e5127">
<p>Read/write</p>
</td>
<td class="cellalignment1860" headers="d281013e5151 d281013e5130">
<p>Mounted or read/write</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1860" id="d281013e5167" headers="d281013e5118">
<p>Read/write</p>
</td>
<td class="cellalignment1860" headers="d281013e5167 d281013e5121">
<p>No</p>
</td>
<td class="cellalignment1860" headers="d281013e5167 d281013e5124">
<p>Yes</p>
</td>
<td class="cellalignment1860" headers="d281013e5167 d281013e5127">
<p>Read/write</p>
</td>
<td class="cellalignment1860" headers="d281013e5167 d281013e5130">
<p>Mounted, read-only, or read/write</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1860" id="d281013e5183" headers="d281013e5118">
<p>Read/write</p>
</td>
<td class="cellalignment1860" headers="d281013e5183 d281013e5121">
<p>No</p>
</td>
<td class="cellalignment1860" headers="d281013e5183 d281013e5124">
<p>No</p>
</td>
<td class="cellalignment1860" headers="d281013e5183 d281013e5127">
<p>Read/write</p>
</td>
<td class="cellalignment1860" headers="d281013e5183 d281013e5130">
<p>Mounted</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1860" id="d281013e5199" headers="d281013e5118">
<p>Read-only</p>
</td>
<td class="cellalignment1860" headers="d281013e5199 d281013e5121">
<p>Yes</p>
</td>
<td class="cellalignment1860" headers="d281013e5199 d281013e5124">
<p>Yes</p>
</td>
<td class="cellalignment1860" headers="d281013e5199 d281013e5127">
<p>Read-only or read/write</p>
</td>
<td class="cellalignment1860" headers="d281013e5199 d281013e5130">
<p>Mounted, read-only, or read/write</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1860" id="d281013e5215" headers="d281013e5118">
<p>Read-only</p>
</td>
<td class="cellalignment1860" headers="d281013e5215 d281013e5121">
<p>Yes</p>
</td>
<td class="cellalignment1860" headers="d281013e5215 d281013e5124">
<p>No</p>
</td>
<td class="cellalignment1860" headers="d281013e5215 d281013e5127">
<p>Read-only or read/write</p>
</td>
<td class="cellalignment1860" headers="d281013e5215 d281013e5130">
<p>Mounted or read-only</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1860" id="d281013e5231" headers="d281013e5118">
<p>Read-only</p>
</td>
<td class="cellalignment1860" headers="d281013e5231 d281013e5121">
<p>No</p>
</td>
<td class="cellalignment1860" headers="d281013e5231 d281013e5124">
<p>Yes</p>
</td>
<td class="cellalignment1860" headers="d281013e5231 d281013e5127">
<p>Read-only or read/write</p>
</td>
<td class="cellalignment1860" headers="d281013e5231 d281013e5130">
<p>Mounted, read-only, or read/write</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1860" id="d281013e5247" headers="d281013e5118">
<p>Read-only</p>
</td>
<td class="cellalignment1860" headers="d281013e5247 d281013e5121">
<p>No</p>
</td>
<td class="cellalignment1860" headers="d281013e5247 d281013e5124">
<p>No</p>
</td>
<td class="cellalignment1860" headers="d281013e5247 d281013e5127">
<p>Read-only or read/write</p>
</td>
<td class="cellalignment1860" headers="d281013e5247 d281013e5130">
<p>Mounted</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1860" id="d281013e5263" headers="d281013e5118">
<p>Migrate</p>
</td>
<td class="cellalignment1860" headers="d281013e5263 d281013e5121">
<p>Yes</p>
</td>
<td class="cellalignment1860" headers="d281013e5263 d281013e5124">
<p>Not applicable</p>
</td>
<td class="cellalignment1860" headers="d281013e5263 d281013e5127">
<p>Read-only or read/write</p>
</td>
<td class="cellalignment1860" headers="d281013e5263 d281013e5130">
<p>Mounted</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1860" id="d281013e5279" headers="d281013e5118">
<p>Migrate</p>
</td>
<td class="cellalignment1860" headers="d281013e5279 d281013e5121">
<p>No</p>
</td>
<td class="cellalignment1860" headers="d281013e5279 d281013e5124">
<p>Not applicable</p>
</td>
<td class="cellalignment1860" headers="d281013e5279 d281013e5127">
<p>Read-only or read/write</p>
</td>
<td class="cellalignment1860" headers="d281013e5279 d281013e5130">
<p>Mounted</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1860" id="d281013e5295" headers="d281013e5118">
<p>Mounted</p>
</td>
<td class="cellalignment1860" headers="d281013e5295 d281013e5121">
<p>Yes</p>
</td>
<td class="cellalignment1860" headers="d281013e5295 d281013e5124">
<p>Not applicable</p>
</td>
<td class="cellalignment1860" headers="d281013e5295 d281013e5127">
<p>Read-only or read/write</p>
</td>
<td class="cellalignment1860" headers="d281013e5295 d281013e5130">
<p>Mounted, read-only, migrate, or read/write</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1860" id="d281013e5312" headers="d281013e5118">
<p>Mounted</p>
</td>
<td class="cellalignment1860" headers="d281013e5312 d281013e5121">
<p>No</p>
</td>
<td class="cellalignment1860" headers="d281013e5312 d281013e5124">
<p>Not applicable</p>
</td>
<td class="cellalignment1860" headers="d281013e5312 d281013e5127">
<p>Read-only or read/write</p>
</td>
<td class="cellalignment1860" headers="d281013e5312 d281013e5130">
<p>Read-only, migrate, or read/write</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-note" id="GUID-1F9914F2-E1D6-4C6F-B74B-30B4CEEC2EB8__GUID-16EF842F-DD50-47D9-86D2-0A1BFF4D8783">
<p class="notep1">Note:</p>
<p>You can also modify the open mode of a PDB when the current container is the PDB. See <span class="q">&#34;<a href="cdb_pdb_admin.htm#GUID-E73BCAED-FF57-474A-A8C5-207D3F465413" title="You can use the ALTER PLUGGABLE DATABASE statement to modify the attributes of a single PDB.">Modifying a PDB with the ALTER PLUGGABLE DATABASE Statement</a>&#34;</span>.</p>
</div>
</div>
<!-- class="section" --></div>
<div>
<div class="relinfo">
<p><strong>Related Topics</strong></p>
<ul>
<li><a href="cdb_admin.htm#GUID-A94D87DC-6954-454C-9230-D6E43845EC3C" title="You can modify the open mode of PDBs with the ALTER PLUGGABLE DATABASE statement with a pdb_change_state clause.">Modifying the Open Mode of PDBs with ALTER PLUGGABLE DATABASE</a></li>
</ul>
</div>
</div>
</div>
<div class="sect4"><a id="GUID-7C86BECF-8F49-4C40-A3AE-61D5E2A7A292"></a>
<h4 id="ADMIN-GUID-7C86BECF-8F49-4C40-A3AE-61D5E2A7A292" class="sect4"><span class="enumeration_section">40.4.6.3</span> About Modifying the Open Mode of PDBs with the SQL*Plus STARTUP Command</h4>
<div>
<p>When the current container is the root, the <code class="codeph">STARTUP</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> command can open a single PDB.</p>
<div class="section">
<p>Use the following options of the <code class="codeph">STARTUP</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> command to open a PDB:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">FORCE</code></p>
<p>Closes an open PDB before re-opening it in read/write mode. When this option is specified, no other options are allowed.</p>
</li>
<li>
<p><code class="codeph">RESTRICT</code></p>
<p>Enables only users with the <code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code> system privilege in the PDB to access the PDB.</p>
<p>If neither <code class="codeph">OPEN</code> <code class="codeph">READ</code> <code class="codeph">WRITE</code> nor <code class="codeph">OPEN</code> <code class="codeph">READ</code> <code class="codeph">ONLY</code> is specified, then the PDB is opened in read-only mode when the CDB to which it belongs is a physical standby database. Otherwise, the PDB is opened in read/write mode.</p>
</li>
<li>
<p><code class="codeph">OPEN</code> <span class="italic">open_pdb_options</span></p>
<p>Opens the PDB in either read/write mode or read-only mode. You can specify <code class="codeph">OPEN</code> <code class="codeph">READ</code> <code class="codeph">WRITE</code> or <code class="codeph">OPEN</code> <code class="codeph">READ</code> <code class="codeph">ONLY</code>. When you specify <code class="codeph">OPEN</code> without any other options, <code class="codeph">READ</code> <code class="codeph">WRITE</code> is the default.</p>
</li>
</ul>
<p>The following prerequisites must be met:</p>
<ul style="list-style-type: disc;">
<li>
<p>The current user must have <code class="codeph">SYSDBA</code>, <code class="codeph">SYSOPER</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> administrative privilege, and the privilege must be either commonly granted or locally granted in the PDB. The user must exercise the privilege using <code class="codeph">AS</code> <code class="codeph">SYSDBA</code>, <code class="codeph">AS</code> <code class="codeph">SYSOPER</code>, <code class="codeph">AS</code> <code class="codeph">SYSBACKUP</code>, or <code class="codeph">AS</code> <code class="codeph">SYSDG</code>, respectively, at connect time.</p>
</li>
<li>
<p>When <code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code> is enabled, <code class="codeph">RESTRICT</code> must be specified when a PDB is opened.</p>
</li>
</ul>
<p>In addition, to place PDBs in a particular target mode with the <code class="codeph">STARTUP</code> <code class="codeph">PLUGGAGLE</code> <code class="codeph">DATABASE</code> command, you must meet the requirements described in the following table.</p>
<div class="tblformalwide" id="GUID-7C86BECF-8F49-4C40-A3AE-61D5E2A7A292__BAJHAJCH">
<p class="titleintable">Table 40-7 Modifying the Open Mode of a PDB with STARTUP PLUGGABLE DATABASE</p>
<table class="cellalignment1880" title="Modifying the Open Mode of a PDB with STARTUP PLUGGABLE DATABASE" summary="This table describes the requirements for placing PDBs in a particular mode with the STARTUP command.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1897" id="d281013e5606">Target Mode of the PDB</th>
<th class="cellalignment1850" id="d281013e5609">FORCE Option Included</th>
<th class="cellalignment1897" id="d281013e5612">Required Mode for the Root</th>
<th class="cellalignment1939" id="d281013e5615">Required Mode of the PDB Being Modified</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1899" id="d281013e5620" headers="d281013e5606">
<p>Read/write</p>
</td>
<td class="cellalignment1852" headers="d281013e5620 d281013e5609">
<p>Yes</p>
</td>
<td class="cellalignment1899" headers="d281013e5620 d281013e5612">
<p>Read/write</p>
</td>
<td class="cellalignment1941" headers="d281013e5620 d281013e5615">
<p>Mounted, read-only, or read/write</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1899" id="d281013e5633" headers="d281013e5606">
<p>Read/write</p>
</td>
<td class="cellalignment1852" headers="d281013e5633 d281013e5609">
<p>No</p>
</td>
<td class="cellalignment1899" headers="d281013e5633 d281013e5612">
<p>Read/write</p>
</td>
<td class="cellalignment1941" headers="d281013e5633 d281013e5615">
<p>Mounted</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1899" id="d281013e5646" headers="d281013e5606">
<p>Read-only</p>
</td>
<td class="cellalignment1852" headers="d281013e5646 d281013e5609">
<p>No</p>
</td>
<td class="cellalignment1899" headers="d281013e5646 d281013e5612">
<p>Read-only or read/write</p>
</td>
<td class="cellalignment1941" headers="d281013e5646 d281013e5615">
<p>Mounted</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-note" id="GUID-7C86BECF-8F49-4C40-A3AE-61D5E2A7A292__GUID-77E3B8BE-8162-46FF-AF0B-3D0C44B67DF9">
<p class="notep1">Note:</p>
<p>You can also use the <code class="codeph">STARTUP</code> command to modify the open mode of a PDB when the current container is the PDB. See <span class="q">&#34;<a href="cdb_pdb_admin.htm#GUID-CD8BE686-3C89-445F-8347-263758AE448E" title="When the current container is a PDB, the SQL*Plus STARTUP command opens the PDB.">Using the STARTUP SQL*Plus Command on a PDB</a>&#34;</span>.</p>
</div>
</div>
<!-- class="section" --></div>
<div>
<div class="relinfo">
<p><strong>Related Topics</strong></p>
<ul>
<li><a href="cdb_admin.htm#GUID-48D692AD-C69B-4FC4-B090-EBDEFF40A6DE" title="You can use the STARTUP PLUGGABLE DATABASE command to open a single PDB.">Modifying the Open Mode of PDBs with the SQL*Plus STARTUP Command</a></li>
</ul>
</div>
</div>
</div>
<a id="ADMIN14153"></a><a id="ADMIN14154"></a><a id="ADMIN13647"></a><a id="ADMIN13648"></a><a id="ADMIN13649"></a><a id="ADMIN13632"></a>
<div class="props_rev_3"><a id="GUID-A94D87DC-6954-454C-9230-D6E43845EC3C"></a>
<h4 id="ADMIN-GUID-A94D87DC-6954-454C-9230-D6E43845EC3C" class="sect4"><span class="enumeration_section">40.4.6.4</span> Modifying the Open Mode of PDBs with ALTER PLUGGABLE DATABASE</h4>
<div>
<p>You can modify the open mode of PDBs with the <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statement with a <span class="italic">pdb_change_state</span> clause.</p>
<div class="section">
<ol>
<li>
<p>In SQL*Plus, ensure that the current container is the root.</p>
<p>See <span class="q">&#34;<a href="cdb_admin.htm#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>&#34;</span>.</p>
</li>
<li>
<p>Run an <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statement with a <span class="italic">pdb_change_state</span> clause.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="example" id="GUID-A94D87DC-6954-454C-9230-D6E43845EC3C__BAJEHAJF">
<p class="titleinexample">Example 40-15 Changing the Open Mode of Listed PDBs</p>
<p>This statement changes the open mode of PDBs <code class="codeph">salespdb</code> and <code class="codeph">hrpdb</code> to open in read/write mode.</p>
<pre dir="ltr">ALTER PLUGGABLE DATABASE salespdb, hrpdb
   OPEN READ WRITE;
</pre>
<p>This statement changes the open mode of PDB <code class="codeph">salespdb</code> to open in read-only mode. <code class="codeph">RESTRICTED</code> specifies that the PDB is accessible only to users with <code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code> privilege in the PDB.</p>
<pre dir="ltr">ALTER PLUGGABLE DATABASE salespdb
   OPEN READ ONLY RESTRICTED;
</pre>
<p>This statement changes the open mode of PDB <code class="codeph">salespdb</code> to open in migrate mode:</p>
<pre dir="ltr">ALTER PLUGGABLE DATABASE salespdb
   OPEN UPGRADE;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-A94D87DC-6954-454C-9230-D6E43845EC3C__BAJDFGEE">
<p class="titleinexample">Example 40-16 Changing the Open Mode of All PDBs</p>
<p>Run the following query to display the open mode of each PDB associated with a CDB:</p>
<pre dir="ltr">SELECT NAME, OPEN_MODE FROM V$PDBS WHERE CON_ID &gt; 2;
 
NAME                           OPEN_MODE
------------------------------ ----------
HRPDB                          READ WRITE
SALESPDB                       MOUNTED
DWPDB                          MOUNTED
</pre>
<p>Notice that <code class="codeph">hrpdb</code> is already in read/write mode. To change the open mode of <code class="codeph">salespdb</code> and <code class="codeph">dwpdb</code> to open in read/write mode, use the following statement:</p>
<pre dir="ltr">ALTER PLUGGABLE DATABASE ALL
   OPEN READ WRITE;
</pre>
<p>The <code class="codeph">hrpdb</code> PDB is not modified because it is already in open read/write mode. The statement does not return an error because two PDBs are in mounted mode and one PDB (<code class="codeph">hrpdb</code>) is in the specified mode (read/write). Similarly, the statement does not return an error if all PDBs are in mounted mode.</p>
<p>However, if any PDB is in read-only mode, then the statement returns an error. To avoid an error and open all PDBs in the CDB in read/write mode, specify the <code class="codeph">FORCE</code> keyword:</p>
<pre dir="ltr">ALTER PLUGGABLE DATABASE ALL
   OPEN READ WRITE FORCE;
</pre>
<p>With the <code class="codeph">FORCE</code> keyword included, all PDBs are opened in read/write mode, including PDBs in read-only mode.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-A94D87DC-6954-454C-9230-D6E43845EC3C__BAJGDHGJ">
<p class="titleinexample">Example 40-17 Changing the Open Mode of All PDBs Except for Listed Ones</p>
<p>This statement changes the mode of all PDBs except for <code class="codeph">salespdb</code> and <code class="codeph">hrpdb</code> to mounted mode.</p>
<pre dir="ltr">ALTER PLUGGABLE DATABASE ALL EXCEPT salespdb, hrpdb
   CLOSE IMMEDIATE;
</pre>
<div class="infobox-note" id="GUID-A94D87DC-6954-454C-9230-D6E43845EC3C__GUID-730C781D-019A-47AE-8421-878E22E8392F">
<p class="notep1">Note:</p>
<p>An <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statement modifying the open mode of a PDB is instance-specific. Therefore, if this statement is issued when connected to an Oracle RAC instance, then it affects the open mode of the PDB only in that instance.</p>
</div>
<div class="infoboxnotealso" id="GUID-A94D87DC-6954-454C-9230-D6E43845EC3C__GUID-9BFCD114-2323-421D-9ED6-7F72BFB3E44F">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-1F9914F2-E1D6-4C6F-B74B-30B4CEEC2EB8" title="When the current container is the root, an ALTER PLUGGABLE DATABASE statement with a pdb_change_state clause modifies the open mode of the specified PDBs.">About Modifying the Open Mode of PDBs with ALTER PLUGGABLE DATABASE</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_pdb_admin.htm#GUID-0200CF6A-8822-4347-9410-4435FDB47745" title="You can modify a PDB using the ALTER PLUGGABLE DATABASE statement and with the SQL*Plus STARTUP and SHUTDOWN commands.">Modifying a PDB</a>&#34;</span> for information about modifying the other attributes of a PDB</p>
</li>
<li>
<p><span class="q">&#34;<a href="start.htm#GUID-2042AAE4-DAE5-4CD4-89E9-B9DE3A8A2AA1" title="You can alter the availability of a database. You may want to do this in order to restrict access for maintenance reasons or to make the database read only.">Altering Database Availability</a>&#34;</span> for information about database modes and their uses</p>
</li>
<li>
<p><a class="olink SQLRF55667" target="_blank" href="../SQLRF/statements_2008.htm#SQLRF55667"><span class="italic">Oracle Database SQL Language Reference</span></a></p>
</li>
<li>
<p><a class="olink CNCPT89041" target="_blank" href="../CNCPT/startup.htm#CNCPT89041"><span class="italic">Oracle Database Concepts</span></a> for more information about shutdown modes</p>
</li>
</ul>
</div>
</div>
<!-- class="example" --></div>
</div>
<a id="ADMIN14155"></a><a id="ADMIN14092"></a><a id="ADMIN14093"></a><a id="ADMIN14170"></a><a id="ADMIN14094"></a><a id="ADMIN14095"></a><a id="ADMIN14091"></a>
<div class="props_rev_3"><a id="GUID-48D692AD-C69B-4FC4-B090-EBDEFF40A6DE"></a>
<h4 id="ADMIN-GUID-48D692AD-C69B-4FC4-B090-EBDEFF40A6DE" class="sect4"><span class="enumeration_section">40.4.6.5</span> Modifying the Open Mode of PDBs with the SQL*Plus STARTUP Command</h4>
<div>
<p>You can use the <code class="codeph">STARTUP</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> command to open a single PDB.</p>
<div class="section">
<p class="subhead3">To modify a PDB with the <code class="codeph">STARTUP</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> command:</p>
<ol>
<li>
<p>In SQL*Plus, ensure that the current container is the root.</p>
<p>See <span class="q">&#34;<a href="cdb_admin.htm#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>&#34;</span>.</p>
</li>
<li>
<p>Run the <code class="codeph">STARTUP</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> command.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<div class="infobox-note" id="GUID-48D692AD-C69B-4FC4-B090-EBDEFF40A6DE__GUID-C619D626-46D6-430C-BFF2-E92930DC8D54">
<p class="notep1">Note:</p>
<p>When the current container is the root, the SQL*Plus <code class="codeph">SHUTDOWN</code> command always shuts down the CDB instance. It cannot be used to close individual PDBs.</p>
</div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-48D692AD-C69B-4FC4-B090-EBDEFF40A6DE__GUID-25019E38-E562-4F3F-A574-A576A4C89179">
<p class="titleinexample">Example 40-18 Opening a PDB in Read/Write Mode with the STARTUP Command</p>
<pre dir="ltr">STARTUP PLUGGABLE DATABASE hrpdb OPEN
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-48D692AD-C69B-4FC4-B090-EBDEFF40A6DE__GUID-3492BF89-574C-4F5F-9589-4BB07D02E80A">
<p class="titleinexample">Example 40-19 Opening a PDB in Read/Write Restricted Mode with the STARTUP Command</p>
<pre dir="ltr">STARTUP PLUGGABLE DATABASE hrpdb RESTRICT
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-48D692AD-C69B-4FC4-B090-EBDEFF40A6DE__GUID-CE9724D6-ADB3-4ED3-849C-7304E0358A47">
<p class="titleinexample">Example 40-20 Opening a PDB in Read-Only Restricted Mode with the STARTUP Command</p>
<pre dir="ltr">STARTUP PLUGGABLE DATABASE hrpdb OPEN READ ONLY RESTRICT
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-48D692AD-C69B-4FC4-B090-EBDEFF40A6DE__GUID-3E94D985-66E2-4571-8F8D-BBAF79565DB9">
<p class="titleinexample">Example 40-21 Opening a PDB in Read-Only Mode with the STARTUP Command</p>
<pre dir="ltr">STARTUP PLUGGABLE DATABASE hrpdb OPEN READ ONLY
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-48D692AD-C69B-4FC4-B090-EBDEFF40A6DE__GUID-0C3F6FEE-E7E2-4C0A-9F70-BE8B1BAE565B">
<p class="titleinexample">Example 40-22 Opening a PDB in Read/Write Mode with the STARTUP Command and the FORCE Option</p>
<p>This example assumes that the <code class="codeph">hrpdb</code> PDB is currently open. The <code class="codeph">FORCE</code> option closes the PDB and then opens it in the read/write mode.</p>
<pre dir="ltr">STARTUP PLUGGABLE DATABASE hrpdb FORCE
</pre>
<div class="infoboxnotealso" id="GUID-48D692AD-C69B-4FC4-B090-EBDEFF40A6DE__GUID-3A6F9D84-8DCD-432C-8853-217356350160">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-7C86BECF-8F49-4C40-A3AE-61D5E2A7A292" title="When the current container is the root, the STARTUP PLUGGABLE DATABASE command can open a single PDB.">About Modifying the Open Mode of PDBs with the SQL*Plus STARTUP Command</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_pdb_admin.htm#GUID-94AD2899-CDC1-446E-9C8B-46497BEA4A18" title="When the current container is a PDB, you can use the SQL*Plus STARTUP command to open the PDB and the SQL*Plus SHUTDOWN command to close the PDB.">Modifying a PDB with the SQL*Plus STARTUP and SHUTDOWN Commands</a>&#34;</span> for information about using the <code class="codeph">STARTUP</code> or <code class="codeph">SHUTDOWN</code> command when the current container is a PDB</p>
</li>
<li>
<p><span class="q">&#34;<a href="start.htm#GUID-203404B5-5157-4F29-A241-B8ABC4753819" title="When you start up a database, you create an instance of that database and you determine the state of the database. Normally, you start up an instance by mounting and opening the database. Doing so makes the database available for any valid user to connect to and perform typical data access operations.">Starting Up a Database</a>&#34;</span></p>
</li>
<li>
<p><a class="olink SQPUG128" target="_blank" href="../SQPUG/ch_twelve045.htm#SQPUG128"><span class="italic">SQL*Plus User&#39;s Guide and Reference</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="example" --></div>
</div>
</div>
<a id="ADMIN14252"></a><a id="ADMIN14253"></a><a id="ADMIN14254"></a><a id="ADMIN14255"></a><a id="ADMIN14256"></a><a id="ADMIN14251"></a>
<div class="props_rev_3"><a id="GUID-7CE00CF0-9D11-44BF-AF8A-F881D129A3F9"></a>
<h3 id="ADMIN-GUID-7CE00CF0-9D11-44BF-AF8A-F881D129A3F9" class="sect3"><span class="enumeration_section">40.4.7</span> Preserving or Discarding the Open Mode of PDBs When the CDB Restarts</h3>
<div>
<p>You can preserve the open mode of one or more PDBs when the CDB restarts by using the <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> SQL statement with a <span class="italic">pdb_save_or_discard_state</span> clause.</p>
<div class="section">
<div class="infobox-note" id="GUID-7CE00CF0-9D11-44BF-AF8A-F881D129A3F9__GUID-C61E1CFD-30ED-4486-BA60-41127576B32F">
<p class="notep1">Note:</p>
<p>This feature is available starting with Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2).</p>
</div>
<p>You can do this in the following way:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Specify <code class="codeph">SAVE STATE</code> to preserve the PDBs&#39; mode when the CDB is restarted.</p>
<p>For example, if a PDB is in open read/write mode before the CDB is restarted, then the PDB is in open read/write mode after the CDB is restarted; if a PDB is in mounted mode before the CDB is restarted, then the PDB is in mounted mode after the CDB is restarted.</p>
</li>
<li>
<p>Specify <code class="codeph">DISCARD STATE</code> to ignore the PDBs&#39; open mode when the CDB is restarted.</p>
<p>When <code class="codeph">DISCARD STATE</code> is specified for a PDB, the PDB is always mounted after the CDB is restarted.</p>
</li>
</ul>
<p>You can specify which PDBs to modify in the following ways:</p>
<ul style="list-style-type: disc;">
<li>
<p>List one or more PDBs.</p>
</li>
<li>
<p>Specify <code class="codeph">ALL</code> to modify all of the PDBs.</p>
</li>
<li>
<p>Specify <code class="codeph">ALL</code> <code class="codeph">EXCEPT</code> to modify all of the PDBs, except for the PDBs listed.</p>
</li>
</ul>
<p>For an Oracle RAC CDB, you can use the <span class="italic">instances</span> clause in the <span class="italic">pdb_save_or_discard_state</span> clause to specify the instances on which a PDB&#39;s open mode is preserved in the following ways:</p>
<ul style="list-style-type: disc;">
<li>
<p>List one or more instances in the <span class="italic">instances</span> clause in the following form:</p>
<pre dir="ltr">INSTANCES = (&#39;<span class="italic">instance_name</span>&#39; [,&#39;<span class="italic">instance_name</span>&#39;] &hellip; )
</pre></li>
<li>
<p>Specify <code class="codeph">ALL</code> in the <span class="italic">instances</span> clause to modify the PDB in all running instances, as in the following example:</p>
<pre dir="ltr">INSTANCES = ALL
</pre></li>
<li>
<p>Specify <code class="codeph">ALL</code> <code class="codeph">EXCEPT</code> in the <span class="italic">instances</span> clause to modify the PDB in all of the instances, except for the instances listed, in the following form:</p>
<pre dir="ltr">INSTANCES = ALL EXCEPT(&#39;<span class="italic">instance_name</span>&#39; [,&#39;<span class="italic">instance_name</span>&#39;] &hellip; )
</pre></li>
</ul>
<p>For a PDB in an Oracle RAC CDB, <code class="codeph">SAVE STATE</code> and <code class="codeph">DISCARD STATE</code> only affect the mode of the current instance. They do not affect the mode of other instances, even if more than one instance is specified in the <span class="italic">instances</span> clause.</p>
<p>To issue an <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> SQL statement with a <span class="italic">pdb_save_or_discard_state</span> clause, the current user must have the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> privilege in the root.</p>
<p><a id="d281013e6442" class="indexterm-anchor"></a>You can check the saved states for the PDBs in a CDB by querying the <code class="codeph">DBA_PDB_SAVED_STATES</code> view.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To preserve or discard a PDB&#39;s open mode when the CDB restarts:</p>
<ol>
<li>
<p>In SQL*Plus, ensure that the current container is the root.</p>
<p>See <span class="q">&#34;<a href="cdb_admin.htm#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>&#34;</span>.</p>
</li>
<li>
<p>Run an <code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> statement with a <span class="italic">pdb_save_or_discard_state</span> clause.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p>The following examples either preserve or discard the open mode of one or more PDBs when the CDB restarts.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-7CE00CF0-9D11-44BF-AF8A-F881D129A3F9__BAJIEBBB">
<p class="titleinexample">Example 40-23 Preserving the Open Mode of a PDB When the CDB Restarts</p>
<p>This statement preserves the open mode of the <code class="codeph">salespdb</code> when the CDB restarts.</p>
<pre dir="ltr">ALTER PLUGGABLE DATABASE salespdb SAVE STATE;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-7CE00CF0-9D11-44BF-AF8A-F881D129A3F9__BAJICJGB">
<p class="titleinexample">Example 40-24 Discarding the Open Mode of a PDB When the CDB Restarts</p>
<p>This statement discards the open mode of the <code class="codeph">salespdb</code> when the CDB restarts.</p>
<pre dir="ltr">ALTER PLUGGABLE DATABASE salespdb DISCARD STATE;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-7CE00CF0-9D11-44BF-AF8A-F881D129A3F9__BAJFGGFD">
<p class="titleinexample">Example 40-25 Preserving the Open Mode of All PDBs When the CDB Restarts</p>
<p>This statement preserves the open mode of all of the PDBs when the CDB restarts.</p>
<pre dir="ltr">ALTER PLUGGABLE DATABASE ALL SAVE STATE;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-7CE00CF0-9D11-44BF-AF8A-F881D129A3F9__BAJEBACE">
<p class="titleinexample">Example 40-26 Preserving the Open Mode of Listed PDBs When the CDB Restarts</p>
<p>This statement preserves the open mode of the <code class="codeph">salespdb</code> and <code class="codeph">hrpdb</code> when the CDB restarts.</p>
<pre dir="ltr">ALTER PLUGGABLE DATABASE salespdb, hrpdb SAVE STATE;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-7CE00CF0-9D11-44BF-AF8A-F881D129A3F9__BAJCFBJC">
<p class="titleinexample">Example 40-27 Preserving the Open Mode of All PDBs Except for Listed Ones When the CDB Restarts</p>
<p>This statement preserves the open mode of all PDBs except for <code class="codeph">salespdb</code> and <code class="codeph">hrpdb</code>.</p>
<pre dir="ltr">ALTER PLUGGABLE DATABASE ALL EXCEPT salespdb, hrpdb SAVE STATE;
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="ADMIN13657"></a><a id="ADMIN14171"></a><a id="ADMIN13650"></a>
<div class="props_rev_3"><a id="GUID-E47348D6-5350-4890-ACD6-7BA1C1DD4E95"></a>
<h2 id="ADMIN-GUID-E47348D6-5350-4890-ACD6-7BA1C1DD4E95" class="sect2"><span class="enumeration_section">40.5</span> Using the ALTER SYSTEM SET Statement in a CDB</h2>
<div>
<p>The <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> <code class="codeph">SET</code> statement can dynamically set an initialization parameter in one or more containers in a CDB.</p>
<div class="section">
<p>A CDB uses an inheritance model for initialization parameters in which PDBs inherit initialization parameter values from the root. In this case, inheritance means that the value of a particular parameter in the root applies to a particular PDB.</p>
<p>A PDB can override the root&#39;s setting for some parameters, which means that a PDB has an inheritance property for each initialization parameter that is either true or false. The inheritance property is true for a parameter when the PDB inherits the root&#39;s value for the parameter. The inheritance property is false for a parameter when the PDB does not inherit the root&#39;s value for the parameter.</p>
<p>The inheritance property for some parameters must be true. For other parameters, you can change the inheritance property by running the <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> <code class="codeph">SET</code> statement to set the parameter when the current container is the PDB. If <code class="codeph">ISPDB_MODIFIABLE</code> is <code class="codeph">TRUE</code> for an initialization parameter in the <code class="codeph">V$SYSTEM_PARAMETER</code> view, then the inheritance property can be false for the parameter.</p>
<p>When the current container is the root, the <code class="codeph">CONTAINER</code> clause of the <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> <code class="codeph">SET</code> statement controls which PDBs inherit the parameter value being set. The <code class="codeph">CONTAINER</code> clause has the following syntax:</p>
<pre dir="ltr">CONTAINER = { CURRENT | ALL }
</pre>
<p>The following settings are possible:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">CURRENT</code>, the default, means that the parameter setting applies only to the current container.</p>
<p>When the current container is the root, the parameter setting applies to the root and to any PDB with an inheritance property of true for the parameter.</p>
</li>
<li>
<p><code class="codeph">ALL</code> means that the parameter setting applies to all containers in the CDB, including the root and all of the PDBs.</p>
<p>Specifying <code class="codeph">ALL</code> sets the inheritance property to true for the parameter in all PDBs.</p>
</li>
</ul>
<p>See <span class="q">&#34;<a href="cdb_admin.htm#GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5" title="The data dictionary in each container in a CDB is separate, and the current container is the container whose data dictionary is used for name resolution and for privilege authorization. The current container can be the root or a PDB. Each session has exactly one current container at any point in time, but it is possible for a session to switch from one container to another.">About the Current Container</a>&#34;</span> for more information about the <code class="codeph">CONTAINER</code> clause and rules that apply to it.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">To use <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> <code class="codeph">SET</code> in the root in a CDB:</p>
<ol>
<li>
<p>In SQL*Plus, ensure that the current container is the root.</p>
<p>The current user must have the commonly granted <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> privilege.</p>
<p>See <span class="q">&#34;<a href="cdb_admin.htm#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>&#34;</span>.</p>
</li>
<li>
<p>Run the <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> <code class="codeph">SET</code> statement.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<div class="infobox-note" id="GUID-E47348D6-5350-4890-ACD6-7BA1C1DD4E95__GUID-D42E04D8-A26E-4D89-8AC1-2145CF02FCB0">
<p class="notep1">Note:</p>
<p>If you want to change the inheritance property for a particular parameter in a particular PDB from false to true, then you can run the <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> <code class="codeph">RESET</code> statement to reset the parameter when the current container is the PDB. The following example resets the <code class="codeph">OPEN_CURSORS</code> parameter:</p>
<pre dir="ltr">ALTER SYSTEM RESET OPEN_CURSORS SCOPE = SPFILE;
</pre></div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-E47348D6-5350-4890-ACD6-7BA1C1DD4E95__GUID-CF4C624E-74B2-4764-B8A1-B1CBF3FDFA3D">
<p class="titleinexample">Example 40-28 Setting an Initialization Parameter for All Containers</p>
<p>This <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> <code class="codeph">SET</code> statement sets the <code class="codeph">OPEN_CURSORS</code> initialization parameter to <code class="codeph">200</code> for the all containers and sets the inheritance property to <code class="codeph">TRUE</code> in each PDB.</p>
<pre dir="ltr">ALTER SYSTEM SET OPEN_CURSORS = 200 CONTAINER = ALL;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-E47348D6-5350-4890-ACD6-7BA1C1DD4E95__GUID-4CB00A76-FB4E-43BA-BF17-98CE4E35DA45">
<p class="titleinexample">Example 40-29 Setting an Initialization Parameter for the Root</p>
<p>This <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> <code class="codeph">SET</code> statement sets the <code class="codeph">OPEN_CURSORS</code> initialization parameter to <code class="codeph">200</code> for the root and for PDBs with an inheritance property of true for the parameter.</p>
<pre dir="ltr">ALTER SYSTEM SET OPEN_CURSORS = 200 CONTAINER = CURRENT;
</pre>
<div class="infoboxnotealso" id="GUID-E47348D6-5350-4890-ACD6-7BA1C1DD4E95__GUID-11F815E1-2CD9-4A9A-A4DE-A128DBC06130">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="cdb_pdb_admin.htm#GUID-3AAA613B-C52C-4080-B0C3-7212859E3A2F" title="You can use the ALTER SYSTEM statement to modify a PDB.">Using the ALTER SYSTEM Statement to Modify a PDB</a>&#34;</span></p>
</li>
<li>
<p><a class="olink SQLRF53143" target="_blank" href="../SQLRF/statements_2017.htm#SQLRF53143"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> <code class="codeph">SET</code> statement</p>
</li>
</ul>
</div>
</div>
<!-- class="example" --></div>
</div>
<a id="ADMIN13707"></a>
<div class="props_rev_3"><a id="GUID-6B579864-6273-408A-A7C5-859B42098FFA"></a>
<h2 id="ADMIN-GUID-6B579864-6273-408A-A7C5-859B42098FFA" class="sect2"><span class="enumeration_section">40.6</span> Executing DDL Statements in a CDB</h2>
<p>In a CDB, you can execute a data definition language (DDL) statement in the current container or in all containers.</p>
<a id="ADMIN13709"></a><a id="ADMIN13708"></a>
<div class="props_rev_3"><a id="GUID-D4F19C66-FB1F-48ED-9CA7-A117BB734F9E"></a>
<h3 id="ADMIN-GUID-D4F19C66-FB1F-48ED-9CA7-A117BB734F9E" class="sect3"><span class="enumeration_section">40.6.1</span> About Executing DDL Statements in a CDB</h3>
<div>
<p>In a CDB, some DDL statements can apply to all containers or to the current container only.</p>
<p>To specify which containers are affected, use the <code class="codeph">CONTAINER</code> clause:</p>
<pre dir="ltr">CONTAINER = { CURRENT | ALL }
</pre>
<p>The following settings are possible:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">CURRENT</code> means that the statement applies only to the current container.</p>
</li>
<li>
<p><code class="codeph">ALL</code> means that the statement applies to all containers in the CDB, including the root and all of the PDBs.</p>
</li>
</ul>
<p>The following restrictions apply to the <code class="codeph">CONTAINER</code> clause in DDL statements:</p>
<ul style="list-style-type: disc;">
<li>
<p>The restrictions described in <span class="q">&#34;<a href="cdb_admin.htm#GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5" title="The data dictionary in each container in a CDB is separate, and the current container is the container whose data dictionary is used for name resolution and for privilege authorization. The current container can be the root or a PDB. Each session has exactly one current container at any point in time, but it is possible for a session to switch from one container to another.">About the Current Container</a>&#34;</span>.</p>
</li>
<li>
<p>You can use the <code class="codeph">CONTAINER</code> clause only with the DDL statements listed in <a href="cdb_admin.htm#GUID-D4F19C66-FB1F-48ED-9CA7-A117BB734F9E__CFHHJACD" title="This table describes the behavior of each DDL statement when CONTAINER is set to CURRENT and when CONTAINER is set to ALL.">Table 40-8</a>.</p>
</li>
</ul>
<div class="tblformalwide" id="GUID-D4F19C66-FB1F-48ED-9CA7-A117BB734F9E__CFHHJACD">
<p class="titleintable">Table 40-8 DDL Statements and the CONTAINER Clause in a CDB</p>
<table class="cellalignment1880" title="DDL Statements and the CONTAINER Clause in a CDB" summary="This table describes the behavior of each DDL statement when CONTAINER is set to CURRENT and when CONTAINER is set to ALL.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1867" id="d281013e7067">DDL Statement</th>
<th class="cellalignment1997" id="d281013e7070">CONTAINER = CURRENT</th>
<th class="cellalignment1997" id="d281013e7073">CONTAINER = ALL</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1869" id="d281013e7078" headers="d281013e7067">
<p><code class="codeph">CREATE</code> <code class="codeph">USER</code></p>
</td>
<td class="cellalignment1998" headers="d281013e7078 d281013e7070">
<p>Creates a local user in the current PDB.</p>
</td>
<td class="cellalignment1998" headers="d281013e7078 d281013e7073">
<p>Creates a common user.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1869" id="d281013e7092" headers="d281013e7067">
<p><code class="codeph">ALTER</code> <code class="codeph">USER</code></p>
</td>
<td class="cellalignment1998" headers="d281013e7092 d281013e7070">
<p>Alters a local user in the current PDB.</p>
</td>
<td class="cellalignment1998" headers="d281013e7092 d281013e7073">
<p>Alters a common user.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1869" id="d281013e7106" headers="d281013e7067">
<p><code class="codeph">CREATE</code> <code class="codeph">ROLE</code></p>
</td>
<td class="cellalignment1998" headers="d281013e7106 d281013e7070">
<p>Creates a local role in the current PDB.</p>
</td>
<td class="cellalignment1998" headers="d281013e7106 d281013e7073">
<p>Creates a common role.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1869" id="d281013e7120" headers="d281013e7067">
<p><code class="codeph">GRANT</code></p>
</td>
<td class="cellalignment1998" headers="d281013e7120 d281013e7070">
<p>Grants a privilege in the local container to a local user, common user, or local role.</p>
<p>The <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> privilege can be granted to a user-created common user in the current PDB.</p>
</td>
<td class="cellalignment1998" headers="d281013e7120 d281013e7073">
<p>Grants a system privilege or object privilege on a common object to a common user or common role. The specified privilege is granted to the user or role across the entire CDB.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1869" id="d281013e7139" headers="d281013e7067">
<p><code class="codeph">REVOKE</code></p>
</td>
<td class="cellalignment1998" headers="d281013e7139 d281013e7070">
<p>Revokes a privilege in the local container from a local user, common user, or local role.</p>
<p>This statement can revoke only a privilege granted with <code class="codeph">CURRENT</code> specified in the <code class="codeph">CONTAINER</code> clause from the specified user or role in the local container. The statement does not affect privileges granted with <code class="codeph">ALL</code> specified in the <code class="codeph">CONTAINER</code> clause.</p>
<p>The <code class="codeph">SET</code> <code class="codeph">CONTAINER</code> privilege can be revoked from a user-created common user in the current PDB.</p>
</td>
<td class="cellalignment1998" headers="d281013e7139 d281013e7073">
<p>Revokes a system privilege or object privilege on a common object from a common user or common role. The specified privilege is revoked from the user or role across the entire CDB.</p>
<p>This statement can revoke only a privilege granted with <code class="codeph">ALL</code> specified in the <code class="codeph">CONTAINER</code> clause from the specified common user or common role. The statement does not affect privileges granted with <code class="codeph">CURRENT</code> specified in the <code class="codeph">CONTAINER</code> clause. However, any privileges granted locally that depend on the privilege granted commonly that is being revoked are also revoked.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>All other DDL statements apply to the current container only.</p>
<p><a id="d281013e7188" class="indexterm-anchor"></a><a id="d281013e7190" class="indexterm-anchor"></a>In addition to the usual rules for user and role names, the following rules and best practices apply when you create a user or a role in a CDB:</p>
<ul style="list-style-type: disc;">
<li>
<p>It is best practice for common user and role names to start with a prefix to avoid naming conflicts between common users and roles and local users and roles. You specify this prefix with the <code class="codeph">COMMON_USER_PREFIX</code> initialization parameter. By default, the prefix is <code class="codeph">C##</code> or <code class="codeph">c##</code>.</p>
</li>
<li>
<p>Common user and role names must consist only of ASCII characters.</p>
</li>
<li>
<p>Local user and role names must <span class="italic">not</span> start with the prefix specified for common users with the <code class="codeph">COMMON_USER_PREFIX</code> initialization parameter.</p>
</li>
<li>
<p>Local user and role names must <span class="italic">not</span> start with <code class="codeph">C##</code> or <code class="codeph">c##</code>.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-D4F19C66-FB1F-48ED-9CA7-A117BB734F9E__GUID-B56B4A2A-2FCC-4089-B2CA-630AE383914F">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF30041" target="_blank" href="../SQLRF/statements_1001.htm#SQLRF30041"><span class="italic">Oracle Database SQL Language Reference</span></a></p>
</li>
<li>
<p><a class="olink CNCPT1732" target="_blank" href="../CNCPT/sqllangu.htm#CNCPT1732"><span class="italic">Oracle Database Concepts</span></a></p>
</li>
<li>
<p><a class="olink DBSEG589" target="_blank" href="../DBSEG/authorization.htm#DBSEG589"><span class="italic">Oracle Database Security Guide</span></a> for more information about managing users in a CDB</p>
</li>
<li>
<p><a class="olink REFRN10354" target="_blank" href="../REFRN/GUID-516ADCCF-3661-4B54-908A-7041854EA14F.htm#REFRN10354"><span class="italic">Oracle Database Reference</span></a> for more information about the <code class="codeph">COMMON_USER_PREFIX</code> initialization parameter</p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-E47348D6-5350-4890-ACD6-7BA1C1DD4E95" title="The ALTER SYSTEM SET statement can dynamically set an initialization parameter in one or more containers in a CDB.">Using the ALTER SYSTEM SET Statement in a CDB</a>&#34;</span> for information about using the <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> system control statement in a CDB</p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADMIN13712"></a><a id="ADMIN13710"></a>
<div class="props_rev_3"><a id="GUID-8FAF656D-B5E0-4499-8F86-481690E85FC8"></a>
<h3 id="ADMIN-GUID-8FAF656D-B5E0-4499-8F86-481690E85FC8" class="sect3"><span class="enumeration_section">40.6.2</span> Executing a DDL Statement in the Current Container</h3>
<div>
<p>Specify <code class="codeph">CURRENT</code> in the <code class="codeph">CONTAINER</code> clause of a DDL statement listed in to execute the statement in the current container.</p>
<div class="section">
<p>The supported DDL statements are listed in <a href="cdb_admin.htm#GUID-D4F19C66-FB1F-48ED-9CA7-A117BB734F9E__CFHHJACD" title="This table describes the behavior of each DDL statement when CONTAINER is set to CURRENT and when CONTAINER is set to ALL.">Table 40-8</a>.</p>
<p>The current user must be granted the required privileges to execute the DDL statement in the current container. For example, to create a user, the current user must be granted the <code class="codeph">CREATE</code> <code class="codeph">USER</code> system privilege in the current container.</p>
</div>
<!-- class="section" -->
<div class="section">
<p>To execute a DDL statement in the current container:</p>
<ol>
<li>
<p>In SQL*Plus, access a container.</p>
<p>See <span class="q">&#34;<a href="cdb_admin.htm#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>&#34;</span>.</p>
</li>
<li>
<p>Execute the DDL statement with <code class="codeph">CONTAINER</code> set to <code class="codeph">CURRENT</code>.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p>A local user&#39;s user name cannot start with the prefix specified by the <code class="codeph">COMMON_USER_PREFIX</code> initialization parameter. By default, the prefix is <code class="codeph">C##</code> or <code class="codeph">c##</code>. The specified tablespace must exist in the PDB.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-8FAF656D-B5E0-4499-8F86-481690E85FC8__GUID-61EE32C7-9742-4C65-B934-B0A0332B669F">
<p class="titleinexample">Example 40-30 Creating Local User in a PDB</p>
<p>This example creates the local user <code class="codeph">testpdb</code> in the current PDB.</p>
<pre dir="ltr">CREATE USER testpdb IDENTIFIED BY <span class="italic">password</span> 
   DEFAULT TABLESPACE pdb1_tbs
   QUOTA UNLIMITED ON pdb1_tbs
   CONTAINER = CURRENT;
</pre></div>
<!-- class="example" --></div>
</div>
<a id="ADMIN13715"></a><a id="ADMIN13713"></a>
<div class="props_rev_3"><a id="GUID-DEE93E37-7268-40A9-A986-987AE6D270B4"></a>
<h3 id="ADMIN-GUID-DEE93E37-7268-40A9-A986-987AE6D270B4" class="sect3"><span class="enumeration_section">40.6.3</span> Executing a DDL Statement in All Containers in a CDB</h3>
<div>
<p>Specify <code class="codeph">ALL</code> in the <code class="codeph">CONTAINER</code> clause of a DDL statement to execute the statement in all of the containers in a CDB.</p>
<div class="section">
<p>The supported DDL statements are listed in <a href="cdb_admin.htm#GUID-D4F19C66-FB1F-48ED-9CA7-A117BB734F9E__CFHHJACD" title="This table describes the behavior of each DDL statement when CONTAINER is set to CURRENT and when CONTAINER is set to ALL.">Table 40-8</a>.</p>
<p>The following prerequisites must be met:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>The current user must be a common user.</p>
</li>
<li>
<p>The current user must be granted the required privileges commonly to execute the DDL statement. For example, to create a user, the current user must be granted the <code class="codeph">CREATE</code> <code class="codeph">USER</code> system privilege commonly.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p>To execute a DDL statement in all containers in a CDB:</p>
<ol>
<li>
<p>In SQL*Plus, ensure that the current container is the root.</p>
<p>See <span class="q">&#34;<a href="cdb_admin.htm#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>&#34;</span>.</p>
</li>
<li>
<p>Execute the DDL statement with <code class="codeph">CONTAINER</code> set to <code class="codeph">ALL</code>.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p>A common user&#39;s user name must start with the prefix specified by the <code class="codeph">COMMON_USER_PREFIX</code> initialization parameter. By default, the prefix is <code class="codeph">C##</code> or <code class="codeph">c##</code>. In addition, a common user&#39;s name must consist only of ASCII characters. The specified tablespace must exist in the root and in all PDBs.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-DEE93E37-7268-40A9-A986-987AE6D270B4__GUID-3AB1F449-E197-4814-BBBD-12006D19A873">
<p class="titleinexample">Example 40-31 Creating Common User in a CDB</p>
<p>This example creates the common user <code class="codeph">c##testcdb</code>.</p>
<pre dir="ltr">CREATE USER c##testcdb IDENTIFIED BY <span class="italic">password</span> 
   DEFAULT TABLESPACE cdb_tbs
   QUOTA UNLIMITED ON cdb_tbs
   CONTAINER = ALL;
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="ADMIN14072"></a>
<div class="props_rev_3"><a id="GUID-E307DC5F-52A9-4B1B-8999-3E60867009D4"></a>
<h2 id="ADMIN-GUID-E307DC5F-52A9-4B1B-8999-3E60867009D4" class="sect2"><span class="enumeration_section">40.7</span> Running Oracle-Supplied SQL Scripts in a CDB</h2>
<p>You can use the catcon.pl script to run Oracle-supplied SQL scripts in a CDB.</p>
<a id="ADMIN14073"></a>
<div class="props_rev_3"><a id="GUID-86F231EC-0230-4426-A934-6697E0222195"></a>
<h3 id="ADMIN-GUID-86F231EC-0230-4426-A934-6697E0222195" class="sect3"><span class="enumeration_section">40.7.1</span> About Running Oracle-Supplied SQL Scripts in a CDB</h3>
<div>
<p>In a CDB, the catcon.pl script is the best way to run SQL scripts and SQL statements.</p>
<p>An Oracle Database installation includes several SQL scripts. These scripts perform operations such as creating data dictionary views and installing options.</p>
<p>The catcon.pl script can run scripts in the root and in specified PDBs in the correct order, and it generates log files that you can view to confirm that the SQL script or SQL statement did not generate unexpected errors. It also starts multiple processes and assigns new scripts to them as they finish running scripts previously assigned to them.</p>
<div class="infobox-note" id="GUID-86F231EC-0230-4426-A934-6697E0222195__GUID-AB47C8F9-BFDD-4732-9919-CCFD08919330">
<p class="notep1">Note:</p>
<ul style="list-style-type: disc;">
<li>
<p>Unless you exclude the seed when you run catcon.pl, the SQL script or SQL statement is run on the seed.</p>
</li>
<li>
<p>You can use the catcon.pl script to run scripts on both CDBs and non-CDBs.</p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADMIN14075"></a><a id="ADMIN14074"></a>
<div class="props_rev_3"><a id="GUID-98F9A223-DE19-498B-8082-3A814F147D1F"></a>
<h3 id="ADMIN-GUID-98F9A223-DE19-498B-8082-3A814F147D1F" class="sect3"><span class="enumeration_section">40.7.2</span> Syntax and Parameters for catcon.pl</h3>
<div>
<p>The catcon.pl script is a Perl script that must be run at an operating system prompt.</p>
<div class="section">
<p>The catcon.pl script has the following syntax and parameters:</p>
<pre dir="ltr">$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl  
[-u <span class="italic">username</span>[/<span class="italic">password</span>]] [-U <span class="italic">username</span>[/<span class="italic">password</span>]] [-d <span class="italic">directory</span>] 
[-l <span class="italic">directory</span>] [{-c|-C} <span class="italic">container</span>] [-p <span class="italic">parallelism</span>] [-e] [-s] 
[-E { ON | errorlogging-table-other-than-SPERRORLOG } ] [-I] [-g] [-f] 
-b <span class="italic">log_file_name_base</span> -- { <span class="italic">SQL_script</span> [<span class="italic">arguments</span>] | --x&#39;<span class="italic">SQL_statement</span>&#39; }
</pre>
<pre dir="ltr"></pre>
<p>Ensure that <code class="codeph">--x</code><span class="italic">SQL_statement</span> is preceded by <code class="codeph">--</code> if it follows any single-letter parameter. If <code class="codeph">--x</code><span class="italic">SQL_statement</span> is preceded by a script name or another <code class="codeph">--x</code><span class="italic">SQL_statement</span>, then do not precede it with <code class="codeph">--</code>. Also, note that the SQL statement must be inside single quotation marks.</p>
<p>Command line parameters to SQL scripts can be introduced using <code class="codeph">--p</code>. Interactive (or secret) parameters to SQL scripts can be introduced using <code class="codeph">--P</code>.</p>
<p><a href="cdb_admin.htm#GUID-98F9A223-DE19-498B-8082-3A814F147D1F__BAJJBBGB" title="This table lists each catcon.pl parameter and provides a description for each parameter.">Table 40-9</a> describes the catcon.pl parameters.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-98F9A223-DE19-498B-8082-3A814F147D1F__BAJJBBGB">
<p class="titleintable">Table 40-9 catcon.pl Parameters</p>
<table class="cellalignment1849" title="catcon.pl Parameters" summary="This table lists each catcon.pl parameter and provides a description for each parameter.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1906" id="d281013e7892">Parameter</th>
<th class="cellalignment1999" id="d281013e7895">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1908" id="d281013e7900" headers="d281013e7892">
<p><code class="codeph">-u</code></p>
</td>
<td class="cellalignment2000" headers="d281013e7900 d281013e7895">
<p>(Optional) Specifies the username and password to connect to the root and the specified PDBs. Specify a common user with the required privileges to run the SQL script or the SQL statement. The default is &#34;<code class="codeph">/ AS SYSDBA</code>&#34;. If no password is supplied, then catcon.pl prompts for a password.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1908" id="d281013e7911" headers="d281013e7892">
<p><code class="codeph">-U</code></p>
</td>
<td class="cellalignment2000" headers="d281013e7911 d281013e7895">
<p>(Optional) Specifies the username and password to connect to the root and the specified PDBs. Specify a common user with the required privileges to perform internal tasks, such as running queries on the CDB&#39;s metadata. The default is &#34;<code class="codeph">/ AS SYSDBA</code>&#34;. If no password is supplied, then catcon.pl prompts for a password.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1908" id="d281013e7922" headers="d281013e7892">
<p><code class="codeph">-d</code></p>
</td>
<td class="cellalignment2000" headers="d281013e7922 d281013e7895">
<p>(Optional) Directory that contains the SQL script. The default is the current directory.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1908" id="d281013e7930" headers="d281013e7892">
<p><code class="codeph">-l</code></p>
</td>
<td class="cellalignment2000" headers="d281013e7930 d281013e7895">
<p>(Optional) Directory into which catcon.pl writes log files. The default is the current directory.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1908" id="d281013e7938" headers="d281013e7892">
<p><code class="codeph">{-c|-C}</code></p>
</td>
<td class="cellalignment2000" headers="d281013e7938 d281013e7895">
<p>(Optional) The containers in which the SQL script is run or is not run.</p>
<p>The <code class="codeph">-c</code> parameter lists the containers in which the SQL script is run.</p>
<p>The <code class="codeph">-C</code> parameter lists the containers in which the SQL script is not run.</p>
<p>Specify containers in a space-delimited list of PDB names enclosed in single quotation marks.</p>
<p>The <code class="codeph">-c</code> and <code class="codeph">-C</code> options are mutually exclusive.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1908" id="d281013e7966" headers="d281013e7892">
<p><code class="codeph">-p</code></p>
</td>
<td class="cellalignment2000" headers="d281013e7966 d281013e7895">
<p>(Optional) Integer that specifies the degree of parallelism.</p>
<p>This parameter specifies the current number of invocations of the catcon.pl script on the host.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1908" id="d281013e7976" headers="d281013e7892">
<p><code class="codeph">-e</code></p>
</td>
<td class="cellalignment2000" headers="d281013e7976 d281013e7895">
<p>(Optional) Sets echo <code class="codeph">ON</code> while running the script. The default is echo <code class="codeph">OFF</code>.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1908" id="d281013e7990" headers="d281013e7892">
<p><code class="codeph">-s</code></p>
</td>
<td class="cellalignment2000" headers="d281013e7990 d281013e7895">
<p>(Optional) Spools the output of every script into a file with the following name:</p>
<pre dir="ltr"><span class="italic">log-file-name-base_script-name-without-extension_</span>[<span class="italic">container-name-if-any</span>].<span class="italic">default-extension</span>
</pre></td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1908" id="d281013e8007" headers="d281013e7892">
<p><code class="codeph">-E</code></p>
</td>
<td class="cellalignment2000" headers="d281013e8007 d281013e7895">
<p>(Optional) When set to <code class="codeph">ON</code>, the default error logging table is used. <code class="codeph">ON</code> is the default setting. When set to <code class="codeph">ON</code>, errors are written to the table <code class="codeph">SPERRORLOG</code> in the current schema in each container in which the SQL script runs. If this table does not exist in a container, then it is created automatically.</p>
<p>When a table other than <code class="codeph">SPERRORLOG</code> is specified, errors are written to the specified table. The table must exist in each container in which the SQL script runs, and the current user must have the necessary privileges to perform DML operations on the table in each of these containers.</p>
<p>See <a class="olink SQPUG160" target="_blank" href="../SQPUG/ch_twelve040.htm#SQPUG160"><span class="italic">SQL*Plus User&#39;s Guide and Reference</span></a> for more information about the error logging table.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1908" id="d281013e8039" headers="d281013e7892">
<p><code class="codeph">-I</code></p>
</td>
<td class="cellalignment2000" headers="d281013e8039 d281013e7895">
<p>(Optional) Do not issue a <code class="codeph">SET ERRORLOGGING</code> identifier. This option is intended for cases in which the <code class="codeph">SET ERRORLOGGING</code> identifier is already set and should not be overwritten.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1908" id="d281013e8053" headers="d281013e7892">
<p><code class="codeph">-g</code></p>
</td>
<td class="cellalignment2000" headers="d281013e8053 d281013e7895">
<p>(Optional) Turns on the generation of debugging information.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1908" id="d281013e8062" headers="d281013e7892">
<p><code class="codeph">-f</code></p>
</td>
<td class="cellalignment2000" headers="d281013e8062 d281013e7895">
<p>(Optional) Ignore PDBs that are closed or, if the <code class="codeph">-c</code> or <code class="codeph">-C</code> option is used, do not exist and process only open PDBs that were specified explicitly or implicitly.</p>
<p>When this option is not specified and some specified PDBs do not exist or are not open, an error is returned and none of the containers are processed.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1908" id="d281013e8078" headers="d281013e7892">
<p><code class="codeph">-b</code></p>
</td>
<td class="cellalignment2000" headers="d281013e8078 d281013e7895">
<p>(Mandatory) The base name for log file names.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="ADMIN14077"></a><a id="ADMIN14078"></a><a id="ADMIN14079"></a><a id="ADMIN14080"></a><a id="ADMIN14187"></a><a id="ADMIN14292"></a><a id="ADMIN14076"></a>
<div class="props_rev_3"><a id="GUID-4A64CE26-DD34-4543-B08E-6B4C61A24BAB"></a>
<h3 id="ADMIN-GUID-4A64CE26-DD34-4543-B08E-6B4C61A24BAB" class="sect3"><span class="enumeration_section">40.7.3</span> Running the catcon.pl Script</h3>
<div>
<p>Examples illustrate running the catcon.pl script.</p>
<div class="section">
<p>If a SQL script or SQL statement run by catcon.pl performs data manipulation language (DML) or data definition language (DDL) operations, then the containers being modified must be in read/write mode. See <span class="q">&#34;<a href="cdb_admin.htm#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="You can modify the open mode of a PDB by using the ALTER PLUGGABLE DATABASE SQL statement or the SQL*Plus STARTUP command.">Modifying the Open Mode of PDBs</a>&#34;</span>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p>To run the catcon.pl script:</p>
<ol>
<li>
<p>Open a command line prompt.</p>
</li>
<li>
<p>Run the catcon.pl script and specify one or more SQL scripts or SQL statements:</p>
<pre dir="ltr">$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl <span class="italic">parameters</span> <span class="italic">SQL_script</span>

$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl <span class="italic">parameters</span> -- --x<span class="italic">SQL_statement</span>
</pre></li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Examples That Run the catcon.pl Script</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The following examples run the catcon.pl script.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-4A64CE26-DD34-4543-B08E-6B4C61A24BAB__BAJGFCJF">
<p class="titleinexample">Example 40-32 Running the catblock.sql Script in All Containers in a CDB</p>
<p>This example runs the catblock.sql script in all of the containers of a CDB.</p>
<pre dir="ltr">$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -u SYS 
-d $ORACLE_HOME/rdbms/admin -b catblock_output catblock.sql
</pre>
<p>The following parameters are specified:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">-u</code> parameter specifies that <code class="codeph">SYS</code> user runs the script in each container.</p>
</li>
<li>
<p>The <code class="codeph">-d</code> parameter specifies that the SQL script is in the $ORACLE_HOME/rdbms/admin directory.</p>
</li>
<li>
<p>The <code class="codeph">-b</code> parameter specifies that the base name for log file names is catblock_output.</p>
</li>
</ul>
<p>Default parameter values are used for all other parameters. Neither the <code class="codeph">-c</code> nor the <code class="codeph">-C</code> parameter is specified. Therefore, catcon.pl runs the script in all containers by default.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-4A64CE26-DD34-4543-B08E-6B4C61A24BAB__BAJBDEAD">
<p class="titleinexample">Example 40-33 Running the catblock.sql Script in Specific PDBs</p>
<p>This example runs the catblock.sql script in the <code class="codeph">hrpdb</code> and <code class="codeph">salespdb</code> PDBs in a CDB.</p>
<pre dir="ltr">$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -u SYS -U SYS 
-d $ORACLE_HOME/rdbms/admin -l &#39;/disk1/script_output&#39; -c &#39;HRPDB SALESPDB&#39; 
-b catblock_output catblock.sql
</pre>
<p>The following parameters are specified:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">-u</code> parameter specifies that <code class="codeph">SYS</code> user runs the script in each container.</p>
</li>
<li>
<p>The <code class="codeph">-U</code> parameter specifies that <code class="codeph">SYS</code> user performs internal tasks.</p>
</li>
<li>
<p>The <code class="codeph">-d</code> parameter specifies that the SQL script is in the $ORACLE_HOME/rdbms/admin directory.</p>
</li>
<li>
<p>The <code class="codeph">-l</code> parameter specifies that the output files are placed in the /disk1/script_output directory.</p>
</li>
<li>
<p>The <code class="codeph">-c</code> parameter specifies that the SQL script is run in the <code class="codeph">hrpdb</code> and <code class="codeph">salespdb</code> PDBs. The script is not run in any other containers in the CDB.</p>
</li>
<li>
<p>The <code class="codeph">-b</code> parameter specifies that the base name for log file names is catblock_output.</p>
</li>
</ul>
</div>
<!-- class="example" -->
<div class="example" id="GUID-4A64CE26-DD34-4543-B08E-6B4C61A24BAB__BAJEHDJD">
<p class="titleinexample">Example 40-34 Running the catblock.sql Script in All Containers Except for Specific PDBs</p>
<p>This example runs the catblock.sql script in all of the containers in a CDB except for the <code class="codeph">hrpdb</code> and <code class="codeph">salespdb</code> PDBs.</p>
<pre dir="ltr">$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -u SYS 
-d $ORACLE_HOME/rdbms/admin -l &#39;/disk1/script_output&#39; -C &#39;HRPDB SALESPDB&#39; 
-b catblock_output catblock.sql
</pre>
<p>The following parameters are specified:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">-u</code> parameter specifies that <code class="codeph">SYS</code> user runs the script in each container.</p>
</li>
<li>
<p>The <code class="codeph">-d</code> parameter specifies that the SQL script is in the $ORACLE_HOME/rdbms/admin directory.</p>
</li>
<li>
<p>The <code class="codeph">-l</code> parameter specifies that the output files are placed in the /disk1/script_output directory.</p>
</li>
<li>
<p>The <code class="codeph">-C</code> parameter specifies that the SQL script is run in all of the containers in the CDB except for the <code class="codeph">hrpdb</code> and <code class="codeph">salespdb</code> PDBs.</p>
</li>
<li>
<p>The <code class="codeph">-b</code> parameter specifies that the base name for log file names is catblock_output.</p>
</li>
</ul>
</div>
<!-- class="example" -->
<div class="example" id="GUID-4A64CE26-DD34-4543-B08E-6B4C61A24BAB__BAJIFBEH">
<p class="titleinexample">Example 40-35 Running a SQL Script with Command Line Parameters</p>
<p>This example runs the custom_script.sql script in all of the containers of a CDB.</p>
<pre dir="ltr">$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -u SYS 
-d /u01/scripts -b custom_script_output custom_script.sql
&#39;--phr&#39; &#39;--PEnter password for user hr:&#39;
</pre>
<p>The following parameters are specified:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">-u</code> parameter specifies that <code class="codeph">SYS</code> user runs the script in each container.</p>
</li>
<li>
<p>The <code class="codeph">-d</code> parameter specifies that the SQL script is in the /u01/scripts directory.</p>
</li>
<li>
<p>The <code class="codeph">-b</code> parameter specifies that the base name for log file names is custom_script_output.</p>
</li>
<li>
<p>The <code class="codeph">--p</code> parameter specifies <code class="codeph">hr</code> for a command line parameter</p>
</li>
<li>
<p>The <code class="codeph">--P</code> parameter specifies an interactive parameter that prompts for the password of user <code class="codeph">hr</code>.</p>
</li>
</ul>
<p>Default parameter values are used for all other parameters. Neither the <code class="codeph">-c</code> nor the <code class="codeph">-C</code> parameter is specified. Therefore, catcon.pl runs the script in all containers by default.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-4A64CE26-DD34-4543-B08E-6B4C61A24BAB__BAJHBJAE">
<p class="titleinexample">Example 40-36 Running a SQL Statement in All Containers in a CDB</p>
<p>This example runs a SQL statement in all of the containers of a CDB.</p>
<pre dir="ltr">$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -u SYS -e 
-b select_output -- --x&#34;SELECT * FROM DUAL&#34;
</pre>
<p>The following parameters are specified:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">-u</code> parameter specifies that <code class="codeph">SYS</code> user runs the script in each container.</p>
</li>
<li>
<p>The <code class="codeph">-e</code> parameter shows output for the SQL statement.</p>
</li>
<li>
<p>The <code class="codeph">-b</code> parameter specifies that the base name for log file names is select_output.</p>
</li>
<li>
<p>The SQL statement <code class="codeph">SELECT * FROM DUAL</code> is inside quotation marks and is preceded by <code class="codeph">--x</code>. Because <code class="codeph">--x</code> is preceded by a single-letter parameter (<code class="codeph">-b</code>), it must be preceded by <code class="codeph">--</code>.</p>
</li>
</ul>
<p>Default parameter values are used for all other parameters. Neither the <code class="codeph">-c</code> nor the <code class="codeph">-C</code> parameter is specified. Therefore, catcon.pl runs the SQL statement in all containers by default.</p>
<div class="infoboxnotealso" id="GUID-4A64CE26-DD34-4543-B08E-6B4C61A24BAB__GUID-4FB6294C-7A3A-4683-9578-12DB6F6C6258">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="monitoring.htm#GUID-D6146406-ADA2-443A-A843-137FA427ABED" title="Locks are mechanisms that prevent destructive interaction between transactions accessing the same resource. The resources can be either user objects, such as tables and rows, or system objects not visible to users, such as shared data structures in memory and data dictionary rows.">Monitoring Locks</a>&#34;</span> for information about the catblock.sql script</p>
<p><a class="olink REFRN005" target="_blank" href="../REFRN/GUID-C308549C-A3DC-4CF2-9433-90650AD0F6DB.htm#REFRN005"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about SQL scripts</p>
</div>
</div>
<!-- class="example" --></div>
</div>
</div>
<a id="ADMIN13661"></a>
<div class="props_rev_3"><a id="GUID-B2AC2F0B-F55E-40CD-AF37-A09E31BAA732"></a>
<h2 id="ADMIN-GUID-B2AC2F0B-F55E-40CD-AF37-A09E31BAA732" class="sect2"><span class="enumeration_section">40.8</span> Shutting Down a CDB Instance</h2>
<div>
<p>You can shut down a CDB instance in the same way that you shut down a non-CDB instance.</p>
<div class="section">
<p>The following prerequisites must be met:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>The CDB instance must be mounted or open.</p>
</li>
<li>
<p>The current user must be a common user with <code class="codeph">SYSDBA</code>, <code class="codeph">SYSOPER</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> administrative privilege. To shut down a CDB, you must exercise this privilege using <code class="codeph">AS</code> <code class="codeph">SYSDBA</code>, <code class="codeph">AS</code> <code class="codeph">SYSOPER</code>, <code class="codeph">AS</code> <code class="codeph">SYSBACKUP</code>, or <code class="codeph">AS</code> <code class="codeph">SYSDG</code>, respectively, at connect time.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">To shut down a CDB:</p>
<ol>
<li>
<p>In SQL*Plus, ensure that the current container is the root.</p>
<p>See <span class="q">&#34;<a href="cdb_admin.htm#GUID-ACC9EEE3-2F98-4AAF-8F59-60E3334C7C92" title="You can use the SQL*Plus CONNECT command to connect to the root or to a PDB.">Connecting to a Container Using the SQL*Plus CONNECT Command</a>&#34;</span>.</p>
</li>
<li>
<p>Shut down the CDB instance.</p>
<p><span class="q">&#34;<a href="start.htm#GUID-3661B282-5C34-4E32-BC6A-906A72712866" title="You can shut down a database with SQL*Plus or Oracle Restart.">Shutting Down a Database</a>&#34;</span></p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-B2AC2F0B-F55E-40CD-AF37-A09E31BAA732__GUID-57BC4005-3AF4-4C90-9C92-52CEB20E2F1E">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="You can modify the open mode of a PDB by using the ALTER PLUGGABLE DATABASE SQL statement or the SQL*Plus STARTUP command.">Modifying the Open Mode of PDBs</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="cdb_admin.htm#GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5" title="The data dictionary in each container in a CDB is separate, and the current container is the container whose data dictionary is used for name resolution and for privilege authorization. The current container can be the root or a PDB. Each session has exactly one current container at any point in time, but it is possible for a session to switch from one container to another.">About the Current Container</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1842">
<tr>
<td class="cellalignment1854">
<table class="cellalignment1847">
<tr>
<td class="cellalignment1846"><a href="cdb_plug_em.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1846"><a href="cdb_admin_em.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2001, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1856">
<table class="cellalignment1845">
<tr>
<td class="cellalignment1846"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1846"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1846"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1846"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1846"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1846"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>