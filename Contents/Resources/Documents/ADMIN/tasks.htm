<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-314"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Managing%20Automated%20Database%20Maintenance%20Tasks"></a><title>Managing Automated Database Maintenance Tasks</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="Oracle Database has automated several common maintenance tasks typically performed by database administrators. These automated maintenance tasks are performed when the system load is expected to be light. You can enable and disable individual maintenance tasks, and can configure when these tasks run and what resource allocations they are allotted."/>
<meta name="keywords" content="maintenance tasks, automatic, automatic maintenance tasks, maintenance window, definition, predefined, Scheduler, MAINTENANCE_WINDOW_GROUP, Scheduler job names, enabling and disabling, assigning to maintenance windows, modifying, creating, removing, Resource Manager, AUTO_TASK_CONSUMER_GROUP consumer group, AUTO_TASK_CONSUMER_GROUP, of Resource Manager, resource allocation, resource plans, DEFAULT_MAINTENANCE_PLAN"/>
<meta name="dcterms.created" content="2017-07-10T12:24:11Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Administrator&rsquo;s Guide"/>
<meta name="dcterms.identifier" content="E41484-15"/>
<meta name="dcterms.isVersionOf" content="ADMIN"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2001, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="part6.htm" title="Previous" type="text/html"/>
<link rel="Next" href="dbrm.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41484-15.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-7F7C805E-BA64-43A5-9A09-FC259FFA9AA8"></a> <span id="PAGE" style="display:none;">34/59</span> <!-- End Header -->
<a id="ADMIN0235"></a>
<h1 id="ADMIN-GUID-7F7C805E-BA64-43A5-9A09-FC259FFA9AA8" class="sect1"><span class="enumeration_chapter">26</span> Managing Automated Database Maintenance Tasks</h1>
<div>
<p>Oracle Database has automated several common maintenance tasks typically performed by database administrators. These automated maintenance tasks are performed when the system load is expected to be light. You can enable and disable individual maintenance tasks, and can configure when these tasks run and what resource allocations they are allotted.</p>
<div class="infobox-note" id="GUID-7F7C805E-BA64-43A5-9A09-FC259FFA9AA8__GUID-D7B06F59-9904-44B3-BF27-FA0FE493EA0A">
<p class="notep1">Note:</p>
<p>This chapter explains how to administer automated maintenance tasks using PL/SQL packages. An easier way is to use the graphical interface of Oracle Enterprise Manager Cloud Control (Cloud Control).</p>
<p>To manage automatic maintenance tasks with Cloud Control:</p>
<ol>
<li>
<p>Access the Database Home Page.</p>
</li>
<li>
<p>From the Administration menu, select <span class="bold">Oracle Scheduler</span>, then <span class="bold">Automated Maintenance Tasks</span>.</p>
</li>
<li>
<p>On the Automated Maintenance Tasks page, click <span class="bold">Configure</span>.</p>
</li>
</ol>
</div>
</div>
<a id="ADMIN12331"></a>
<div class="props_rev_3"><a id="GUID-3810CCA3-4F23-4886-AB56-AE9408725502"></a>
<h2 id="ADMIN-GUID-3810CCA3-4F23-4886-AB56-AE9408725502" class="sect2"><span class="enumeration_section">26.1</span> About Automated Maintenance Tasks</h2>
<div>
<p>Automated maintenance tasks are tasks that are started automatically at regular intervals to perform maintenance operations on the database. An example is a task that gathers statistics on schema objects for the query optimizer.</p>
<p>Automated maintenance tasks run in <span class="italic">maintenance windows</span>, which are predefined time intervals that are intended to occur during a period of low system load. You can customize maintenance windows based on the resource usage patterns of your database, or disable certain default windows from running. You can also create your own maintenance windows.</p>
<p>Oracle Database has these predefined automated maintenance tasks:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Automatic Optimizer Statistics Collection&mdash;</span>Collects optimizer statistics for all schema objects in the database for which there are no statistics or only stale statistics. The statistics gathered by this task are used by the SQL query optimizer to improve the performance of SQL execution.</p>
<div class="infoboxnotealso" id="GUID-3810CCA3-4F23-4886-AB56-AE9408725502__GUID-B6FE0971-CFAB-4628-AE1E-70B5BA51AF35">
<p class="notep1">See Also:</p>
<p><a class="olink TGSQL389" target="_blank" href="../TGSQL/tgsql_stats.htm#TGSQL389"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for more information on automatic statistics collection</p>
</div>
</li>
<li>
<p><span class="bold">Automatic Segment Advisor</span>&mdash;Identifies segments that have space available for reclamation, and makes recommendations on how to defragment those segments.</p>
<p>You can also run the Segment Advisor manually to obtain more up-to-the-minute recommendations or to obtain recommendations on segments that the Automatic Segment Advisor did not examine for possible space reclamation.</p>
<div class="infoboxnotealso" id="GUID-3810CCA3-4F23-4886-AB56-AE9408725502__GUID-70F0CB33-C791-49DA-8AC9-37AC022FFD86">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="schema.htm#GUID-E9B57A45-2688-42B6-9782-D49702D51F24" title="To use the Segment Advisor, check the results of Automatic Segment Advisor, and, optionally, run the Segment Advisor manually.">Using the Segment Advisor</a>&#34;</span> for more information.</p>
</div>
</li>
<li>
<p><span class="bold">Automatic SQL Tuning Advisor&mdash;</span>Examines the performance of high-load SQL statements, and makes recommendations on how to tune those statements. You can configure this advisor to automatically implement SQL profile recommendations.</p>
<div class="infoboxnotealso" id="GUID-3810CCA3-4F23-4886-AB56-AE9408725502__GUID-632DCE0A-E61B-40F3-A491-9B4B6345AAAF">
<p class="notep1">See Also:</p>
<p><a class="olink TGSQL540" target="_blank" href="../TGSQL/tgsql_sqltune.htm#TGSQL540"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for more information on SQL Tuning Advisor</p>
</div>
</li>
<li>
<p><span class="bold">SQL Plan Management (SPM) Evolve Advisor&mdash;</span>Evolves plans that have recently been added to the SQL plan baseline. The advisor simplifies plan evolution by eliminating the requirement to do it manually.</p>
<div class="infoboxnotealso" id="GUID-3810CCA3-4F23-4886-AB56-AE9408725502__GUID-FCF48567-1AD7-4FCB-9EED-57B74F535C3F">
<p class="notep1">See Also:</p>
<p><a class="olink TGSQL94648" target="_blank" href="../TGSQL/tgsql_spm.htm#TGSQL94648"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for more information on SPM Evolve Advisor</p>
</div>
</li>
</ul>
<p>By default, all of these automated maintenance tasks are configured to run in all maintenance windows.</p>
</div>
</div>
<a id="ADMIN11836"></a>
<div class="props_rev_3"><a id="GUID-BF691BB0-DC60-4829-A790-4C5BEB281FF1"></a>
<h2 id="ADMIN-GUID-BF691BB0-DC60-4829-A790-4C5BEB281FF1" class="sect2"><span class="enumeration_section">26.2</span> About Maintenance Windows</h2>
<div>
<p>A <span class="bold">maintenance window</span> is a contiguous time interval during which automated maintenance tasks are run. Maintenance windows are Oracle Scheduler windows that belong to the window group named <code class="codeph">MAINTENANCE_WINDOW_GROUP</code>.</p>
<p>A Scheduler window can be a simple repeating interval (such as &#34;between midnight and 6 a.m., every Saturday&#34;), or a more complex interval (such as &#34;between midnight and 6 a.m., on the last workday of every month, excluding company holidays&#34;).</p>
<p>When a maintenance window opens, Oracle Database creates an Oracle Scheduler job for each maintenance task that is scheduled to run in that window. Each job is assigned a job name that is generated at run time. All automated maintenance task job names begin with <code class="codeph">ORA$AT</code>. For example, the job for the Automatic Segment Advisor might be called <code class="codeph">ORA$AT_SA_SPC_SY_26</code>. When an automated maintenance task job finishes, it is deleted from the Oracle Scheduler job system. However, the job can still be found in the Scheduler job history.</p>
<div class="infobox-note" id="GUID-BF691BB0-DC60-4829-A790-4C5BEB281FF1__GUID-1E890AA0-32BE-4F64-BB8D-5CEF271A4972">
<p class="notep1">Note:</p>
<p>To view job history, you must log in as the <code class="codeph">SYS</code> user.</p>
</div>
<p>In the case of a very long maintenance window, all automated maintenance tasks except Automatic SQL Tuning Advisor are restarted every four hours. This feature ensures that maintenance tasks are run regularly, regardless of window size.</p>
<p>The framework of automated maintenance tasks relies on maintenance windows being defined in the database. <a href="tasks.htm#GUID-B2F52598-A695-462A-966F-6A0553F290BE__CIHGCBBF" title="This table has two columns: Window Name and Description">Table 26-1</a> lists the maintenance windows that are automatically defined with each new Oracle Database installation.</p>
<div class="infoboxnotealso" id="GUID-BF691BB0-DC60-4829-A790-4C5BEB281FF1__GUID-59174DB7-EDB6-4C2E-A442-2BAC9733F8E5">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="schedover.htm#GUID-32E9BB6D-C548-4846-80E3-E68BFF82A8FA" title="You use jobs and other scheduler objects for task scheduling.">About Jobs and Supporting Scheduler Objects</a>&#34;</span> for more information on windows and groups.</p>
</li>
</ul>
</div>
</div>
</div>
<a id="ADMIN12332"></a>
<div class="props_rev_3"><a id="GUID-19E9E024-A8C7-45A0-9CAA-BF3A09D95F9B"></a>
<h2 id="ADMIN-GUID-19E9E024-A8C7-45A0-9CAA-BF3A09D95F9B" class="sect2"><span class="enumeration_section">26.3</span> Configuring Automated Maintenance Tasks</h2>
<p>To enable or disable specific maintenance tasks in any subset of maintenance windows, you can use the <code class="codeph">DBMS_AUTO_TASK_ADMIN</code> PL/SQL package.</p>
<a id="ADMIN12333"></a>
<div class="props_rev_3"><a id="GUID-EBD3C7E5-F6AD-4DBF-87A6-BF13F4F37D97"></a>
<h3 id="ADMIN-GUID-EBD3C7E5-F6AD-4DBF-87A6-BF13F4F37D97" class="sect3"><span class="enumeration_section">26.3.1</span> Enabling and Disabling Maintenance Tasks for all Maintenance Windows</h3>
<div>
<p>With a single operation, you can disable or enable a particular automated maintenance task for all maintenance windows.</p>
<div class="section">
<p>You can disable a particular automated maintenance task for all maintenance windows with a single operation. You do so by calling the <code class="codeph">DISABLE</code> procedure of the <code class="codeph">DBMS_AUTO_TASK_ADMIN</code> PL/SQL package without supplying the <code class="codeph">window_name</code> argument. For example, you can completely disable the Automatic SQL Tuning Advisor task as follows:</p>
<pre dir="ltr">BEGIN
  dbms_auto_task_admin.disable(
    client_name =&gt; &#39;sql tuning advisor&#39;,
    operation   =&gt; NULL,
    window_name =&gt; NULL);
END;
/
</pre>
<p>To enable this maintenance task again, use the <code class="codeph">ENABLE</code> procedure, as follows:</p>
<pre dir="ltr">BEGIN
  dbms_auto_task_admin.enable(
    client_name =&gt; &#39;sql tuning advisor&#39;,
    operation   =&gt; NULL,
    window_name =&gt; NULL);
END;
/
</pre>
<p>The task names to use for the <code class="codeph">client_name</code> argument are listed in the <code class="codeph">DBA_AUTOTASK_CLIENT</code> database dictionary view.</p>
<p>To enable or disable all automated maintenance tasks for all windows, call the <code class="codeph">ENABLE</code> or <code class="codeph">DISABLE</code> procedure with no arguments.</p>
<pre dir="ltr">EXECUTE DBMS_AUTO_TASK_ADMIN.DISABLE;
</pre>
<div class="infoboxnotealso" id="GUID-EBD3C7E5-F6AD-4DBF-87A6-BF13F4F37D97__GUID-962B05A3-C8A8-486E-9BC2-802B6FB8FE16">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="tasks.htm#GUID-724A16C6-EF17-44A0-8F0D-AD5BB93D3729" title="You can query a set of data dictionary views for information about automated maintenance tasks.">Automated Maintenance Tasks Database Dictionary Views</a>&#34;</span></p>
</li>
<li>
<p><a class="olink ARPLS032" target="_blank" href="../ARPLS/d_autotaskadm.htm#ARPLS032"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information on the <code class="codeph">DBMS_AUTO_TASK_ADMIN</code> PL/SQL package.</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12497"></a>
<div class="props_rev_3"><a id="GUID-FC545722-516D-462D-902F-D726B45E7697"></a>
<h3 id="ADMIN-GUID-FC545722-516D-462D-902F-D726B45E7697" class="sect3"><span class="enumeration_section">26.3.2</span> Enabling and Disabling Maintenance Tasks for Specific Maintenance Windows</h3>
<div>
<p>By default, all maintenance tasks run in all predefined maintenance windows. You can disable a maintenance task for a specific window.</p>
<div class="section">
<p>The following example disables the Automatic SQL Tuning Advisor from running in the window <code class="codeph">MONDAY_WINDOW</code>:</p>
<pre dir="ltr">BEGIN
  dbms_auto_task_admin.disable(
    client_name =&gt; &#39;sql tuning advisor&#39;, 
    operation   =&gt; NULL, 
    window_name =&gt; &#39;MONDAY_WINDOW&#39;);
END;
/
</pre></div>
<!-- class="section" --></div>
</div>
</div>
<a id="ADMIN12335"></a>
<div class="props_rev_3"><a id="GUID-87428DFE-8539-495D-8374-AE06FA19BF8C"></a>
<h2 id="ADMIN-GUID-87428DFE-8539-495D-8374-AE06FA19BF8C" class="sect2"><span class="enumeration_section">26.4</span> Configuring Maintenance Windows</h2>
<p>You may want to adjust the predefined maintenance windows to a time suitable to your database environment or create a new maintenance window. You can customize maintenance windows using the <code class="codeph">DBMS_SCHEDULER</code> PL/SQL package.</p>
<a id="ADMIN12336"></a>
<div class="props_rev_3"><a id="GUID-A4FA16ED-9575-4EBF-8EE1-904F58FD4D8E"></a>
<h3 id="ADMIN-GUID-A4FA16ED-9575-4EBF-8EE1-904F58FD4D8E" class="sect3"><span class="enumeration_section">26.4.1</span> Modifying a Maintenance Window</h3>
<div>
<p>The <code class="codeph">DBMS_SCHEDULER</code> PL/SQL package includes a <code class="codeph">SET_ATTRIBUTE</code> procedure for modifying the attributes of a window.</p>
<div class="section">
<p>For example, the following script changes the duration of the maintenance window <code class="codeph">SATURDAY_WINDOW</code> to 4 hours:</p>
<pre dir="ltr">BEGIN
  dbms_scheduler.disable(
    name  =&gt; &#39;SATURDAY_WINDOW&#39;);
  dbms_scheduler.set_attribute(
    name      =&gt; &#39;SATURDAY_WINDOW&#39;,
    attribute =&gt; &#39;DURATION&#39;,
    value     =&gt; numtodsinterval(4, &#39;hour&#39;));
  dbms_scheduler.enable(
    name =&gt; &#39;SATURDAY_WINDOW&#39;);
END;
/
</pre>
<p>Note that you must use the <code class="codeph">DBMS_SCHEDULER.DISABLE</code> subprogram to disable the window before making changes to it, and then re-enable the window with <code class="codeph">DBMS_SCHEDULER.ENABLE</code> when you are finished. If you change a window when it is currently open, the change does not take effect until the next time the window opens.</p>
<div class="infoboxnotealso" id="GUID-A4FA16ED-9575-4EBF-8EE1-904F58FD4D8E__GUID-3736CF8B-D414-4BE3-8E81-EC1FF5ED1B9E">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="scheduse.htm#GUID-15FA5A41-C7F0-4DFA-A668-07C0265F9550" title="Windows provide a way to automatically activate different resource plans at different times. Running jobs can then see a change in the resources that are allocated to them when there is a change in resource plan.">Managing Job Scheduling and Job Priorities with Windows</a>&#34;</span> for more information about modifying windows.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12337"></a>
<div class="props_rev_3"><a id="GUID-6539BF07-E4D2-4794-92C3-D222FAEA5FBD"></a>
<h3 id="ADMIN-GUID-6539BF07-E4D2-4794-92C3-D222FAEA5FBD" class="sect3"><span class="enumeration_section">26.4.2</span> Creating a New Maintenance Window</h3>
<div>
<p>To create a new maintenance window, you must create an Oracle Scheduler window object and then add it to the window group <code class="codeph">MAINTENANCE_WINDOW_GROUP</code>.</p>
<div class="section">
<p>You use the <code class="codeph">DBMS_SCHEDULER</code>.<code class="codeph">CREATE_WINDOW</code> package procedure to create the window, and the <code class="codeph">DBMS_SCHEDULER</code>.<code class="codeph">ADD_GROUP_MEMBER</code> procedure to add the new window to the window group.</p>
<p>The following example creates a maintenance window named <code class="codeph">EARLY_MORNING_WINDOW</code>. This window runs for one hour daily between 5 a.m. and 6 a.m.</p>
<pre dir="ltr">BEGIN
  DBMS_SCHEDULER.CREATE_WINDOW(
    window_name     =&gt; &#39;EARLY_MORNING_WINDOW&#39;,
    duration        =&gt;  NUMTODSINTERVAL(1, &#39;hour&#39;),
    resource_plan   =&gt; &#39;DEFAULT_MAINTENANCE_PLAN&#39;,
    repeat_interval =&gt; &#39;FREQ=DAILY;BYHOUR=5;BYMINUTE=0;BYSECOND=0&#39;);
  DBMS_SCHEDULER.ADD_GROUP_MEMBER(
    group_name  =&gt; &#39;MAINTENANCE_WINDOW_GROUP&#39;,
    member      =&gt; &#39;EARLY_MORNING_WINDOW&#39;);
END;
/
</pre>
<div class="infoboxnotealso" id="GUID-6539BF07-E4D2-4794-92C3-D222FAEA5FBD__GUID-9C89A7DA-A617-4703-8BC0-62E061462E42">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="scheduse.htm#GUID-4F377D3E-55EC-4552-B291-0061709340CA" title="You can use Cloud Control or the DBMS_SCHEDULER.CREATE_WINDOW procedure to create windows.">Creating Windows</a>&#34;</span></p>
</li>
<li>
<p><a class="olink ARPLS72235" target="_blank" href="../ARPLS/d_sched.htm#ARPLS72235"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information on the <code class="codeph">DBMS_SCHEDULER</code> package</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ADMIN12338"></a>
<div class="props_rev_3"><a id="GUID-D0B4797B-476E-468E-91A1-B142F74CE936"></a>
<h3 id="ADMIN-GUID-D0B4797B-476E-468E-91A1-B142F74CE936" class="sect3"><span class="enumeration_section">26.4.3</span> Removing a Maintenance Window</h3>
<div>
<p>To remove an existing maintenance window, remove it from the <code class="codeph">MAINTENANCE_WINDOW_GROUP</code> window group.</p>
<div class="section">
<p>The window continues to exist but no longer runs automated maintenance tasks. Any other Oracle Scheduler jobs assigned to this window continue to run as usual.</p>
<p>The following example removes <code class="codeph">EARLY_MORNING_WINDOW</code> from the window group:</p>
<pre dir="ltr">BEGIN
  DBMS_SCHEDULER.REMOVE_GROUP_MEMBER(
    group_name  =&gt; &#39;MAINTENANCE_WINDOW_GROUP&#39;,
    member      =&gt; &#39;EARLY_MORNING_WINDOW&#39;);
END;
/
</pre>
<div class="infoboxnotealso" id="GUID-D0B4797B-476E-468E-91A1-B142F74CE936__GUID-701A79BA-9DA3-4224-A87C-DE6C3803AB5C">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="scheduse.htm#GUID-8D9C090C-FAC8-48C0-AA75-62D0CFE70324" title="You can remove one or more windows from a window group by using the REMOVE_GROUP_MEMBER procedure in the DBMS_SCHEDULER package.">Removing a Member from a Window Group</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="scheduse.htm#GUID-EEBB9CC1-1E4C-4E3D-9058-9E1EF3745792" title="You drop one or more windows using the DROP_WINDOW procedure in the DBMS_SCHEDULER package or Cloud Control.">Dropping Windows</a>&#34;</span></p>
</li>
<li>
<p><a class="olink ARPLS72235" target="_blank" href="../ARPLS/d_sched.htm#ARPLS72235"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information on the <code class="codeph">DBMS_SCHEDULER</code> package</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="ADMIN11840"></a>
<div class="props_rev_3"><a id="GUID-90CC8605-C02E-492A-9A6D-A2491418E366"></a>
<h2 id="ADMIN-GUID-90CC8605-C02E-492A-9A6D-A2491418E366" class="sect2"><span class="enumeration_section">26.5</span> Configuring Resource Allocations for Automated Maintenance Tasks</h2>
<div>
<p>You can reduce or increase resource allocation to the automated maintenance tasks.</p>
<div class="infoboxnotealso" id="GUID-90CC8605-C02E-492A-9A6D-A2491418E366__GUID-8E1F5347-7146-4A5C-BB47-FDF4B319BC51">
<p class="notep1">See Also:</p>
<p><a href="dbrm.htm#GUID-2BEF5482-CF97-4A85-BD90-9195E41E74EF" title="Oracle Database Resource Manager (Resource Manager) enables you to manage resource allocation for a database.">Managing Resources with Oracle Database Resource Manager</a></p>
</div>
</div>
<a id="ADMIN12339"></a>
<div class="props_rev_3"><a id="GUID-540BF1F6-5BAD-4628-8E49-EF8CEFC1E3BD"></a>
<h3 id="ADMIN-GUID-540BF1F6-5BAD-4628-8E49-EF8CEFC1E3BD" class="sect3"><span class="enumeration_section">26.5.1</span> About Resource Allocations for Automated Maintenance Tasks</h3>
<div>
<p>By default, all predefined maintenance windows use the resource plan <code class="codeph">DEFAULT_MAINTENANCE_PLAN</code>. Automated maintenance tasks run under its subplan <code class="codeph">ORA$AUTOTASK</code>. This subplan divides its portion of total resource allocation equally among the maintenance tasks.</p>
<p><code class="codeph">DEFAULT_MAINTENANCE_PLAN</code> defines the following resource allocations:</p>
<div class="tblformal" id="GUID-540BF1F6-5BAD-4628-8E49-EF8CEFC1E3BD__GUID-CA2462DA-F3DE-4C45-8A9A-CB5914219902">
<table class="cellalignment1849" summary="This table describes the resource allocation of DEFAULT_MAINTENANCE_PLAN. Column 1 lists the consumer group, columns 2-4 show the amount of CPU granted to each level (level1, level 2, and level3, respectively).">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1995" id="d185891e1177">Consumer Group/subplan</th>
<th class="cellalignment1913" id="d185891e1180">Level 1</th>
<th class="cellalignment1873" id="d185891e1183">Maximum Utilization Limit</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1996" id="d185891e1188" headers="d185891e1177">
<p><code class="codeph">ORA$AUTOTASK</code></p>
</td>
<td class="cellalignment1915" headers="d185891e1188 d185891e1180">
<p>5%</p>
</td>
<td class="cellalignment1876" headers="d185891e1188 d185891e1183">
<p>90</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1996" id="d185891e1200" headers="d185891e1177">
<p><code class="codeph">OTHER_GROUPS</code></p>
</td>
<td class="cellalignment1915" headers="d185891e1200 d185891e1180">
<p>20%</p>
</td>
<td class="cellalignment1876" headers="d185891e1200 d185891e1183">
<p>-</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1996" id="d185891e1211" headers="d185891e1177">
<p><code class="codeph">SYS_GROUP</code></p>
</td>
<td class="cellalignment1915" headers="d185891e1211 d185891e1180">
<p>75%</p>
</td>
<td class="cellalignment1876" headers="d185891e1211 d185891e1183">
<p>-</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>In this plan, any sessions in the <code class="codeph">SYS_GROUP</code> consumer group get priority. (Sessions in this group are sessions created by user accounts <code class="codeph">SYS</code> and <code class="codeph">SYSTEM</code>.) Any resource allocation that is unused by sessions in <code class="codeph">SYS_GROUP</code> is then shared by sessions belonging to the other consumer groups and subplans in the plan. Of that allocation, 5% goes to maintenance tasks and 20% goes to user sessions. The maximum utilization limit for <code class="codeph">ORA$AUTOTASK</code> is 90. Therefore, even if the CPU is idle, this group/plan cannot be allocated more than 90% of the CPU resources.</p>
<p>To reduce or increase resource allocation to the automated maintenance tasks, you make adjustments to <code class="codeph">DEFAULT_MAINTENANCE_PLAN</code>. See <span class="q">&#34;<a href="tasks.htm#GUID-EA65A9E6-99D7-4CFD-9346-F2C466D8F0B3" title="To change the resource allocation for automated maintenance tasks within a maintenance window, you must change the percentage of resources allocated to the subplan ORA$AUTOTASK in the resource plan for that window.">Changing Resource Allocations for Automated Maintenance Tasks</a>&#34;</span> for more information.</p>
<p>Note that as with any resource plan, the portion of an allocation that is not used by a consumer group or subplan is available for other consumer groups or subplans. Note also that the Database Resource Manager does not begin to limit resource allocations according to resource plans until 100% of CPU is being used.</p>
<div class="infobox-note" id="GUID-540BF1F6-5BAD-4628-8E49-EF8CEFC1E3BD__GUID-241794EE-4F94-470F-B058-153A2A0C2053">
<p class="notep1">Note:</p>
<p>Although <code class="codeph">DEFAULT_MAINTENANCE_PLAN</code> is the default, you can assign any resource plan to any maintenance window. If you do change a maintenance window resource plan, ensure that you include the subplan <code class="codeph">ORA$AUTOTASK</code> in the new plan.</p>
</div>
<div class="infoboxnotealso" id="GUID-540BF1F6-5BAD-4628-8E49-EF8CEFC1E3BD__GUID-7C945AFA-A60A-4BF7-9546-B0B9244728AB">
<p class="notep1">See Also:</p>
<p><a href="dbrm.htm#GUID-2BEF5482-CF97-4A85-BD90-9195E41E74EF" title="Oracle Database Resource Manager (Resource Manager) enables you to manage resource allocation for a database.">Managing Resources with Oracle Database Resource Manager</a> for more information on resource plans.</p>
</div>
</div>
</div>
<a id="ADMIN12341"></a>
<div class="props_rev_3"><a id="GUID-EA65A9E6-99D7-4CFD-9346-F2C466D8F0B3"></a>
<h3 id="ADMIN-GUID-EA65A9E6-99D7-4CFD-9346-F2C466D8F0B3" class="sect3"><span class="enumeration_section">26.5.2</span> Changing Resource Allocations for Automated Maintenance Tasks</h3>
<div>
<p>To change the resource allocation for automated maintenance tasks within a maintenance window, you must change the percentage of resources allocated to the subplan <code class="codeph">ORA$AUTOTASK</code> in the resource plan for that window.</p>
<div class="section">
<p>(By default, the resource plan for each predefined maintenance window is <code class="codeph">DEFAULT_MAINTENANCE_PLAN</code>.) You must also adjust the resource allocation for one or more other subplans or consumer groups in the window&#39;s resource plan such that the resource allocation at the top level of the plan adds up to 100%. For information on changing resource allocations, see <a href="dbrm.htm#GUID-2BEF5482-CF97-4A85-BD90-9195E41E74EF" title="Oracle Database Resource Manager (Resource Manager) enables you to manage resource allocation for a database.">Managing Resources with Oracle Database Resource Manager</a>.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="ADMIN12342"></a>
<div class="props_rev_3"><a id="GUID-B18581E0-1EF6-4F56-9739-1ACECC5F982E"></a>
<h2 id="ADMIN-GUID-B18581E0-1EF6-4F56-9739-1ACECC5F982E" class="sect2"><span class="enumeration_section">26.6</span> Automated Maintenance Tasks Reference</h2>
<p>Oracle Database has predefined maintenance windows. It also has data dictionary views that you can query for information about automated maintenance.</p>
<a id="ADMIN13071"></a><a id="ADMIN12343"></a>
<div class="props_rev_3"><a id="GUID-B2F52598-A695-462A-966F-6A0553F290BE"></a>
<h3 id="ADMIN-GUID-B2F52598-A695-462A-966F-6A0553F290BE" class="sect3"><span class="enumeration_section">26.6.1</span> Predefined Maintenance Windows</h3>
<div>
<p>By default there are seven predefined maintenance windows, each one representing a day of the week.</p>
<div class="section">
<p>The weekend maintenance windows, <code class="codeph">SATURDAY_WINDOW</code> and <code class="codeph">SUNDAY_WINDOW</code>, are longer in duration than the weekday maintenance windows. The window group <code class="codeph">MAINTENANCE_WINDOW_GROUP</code> consists of these seven windows. The list of predefined maintenance windows is given in <a href="tasks.htm#GUID-B2F52598-A695-462A-966F-6A0553F290BE__CIHGCBBF" title="This table has two columns: Window Name and Description">Table 26-1</a>.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-B2F52598-A695-462A-966F-6A0553F290BE__CIHGCBBF">
<p class="titleintable">Table 26-1 Predefined Maintenance Windows</p>
<table class="cellalignment1849" title="Predefined Maintenance Windows" summary="This table has two columns: Window Name and Description">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1887" id="d185891e1502">Window Name</th>
<th class="cellalignment1888" id="d185891e1505">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1889" id="d185891e1510" headers="d185891e1502">
<p><code class="codeph">MONDAY_WINDOW</code></p>
</td>
<td class="cellalignment1890" headers="d185891e1510 d185891e1505">
<p>Starts at 10 p.m. on Monday and ends at 2 a.m.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1889" id="d185891e1518" headers="d185891e1502">
<p><code class="codeph">TUESDAY_WINDOW</code></p>
</td>
<td class="cellalignment1890" headers="d185891e1518 d185891e1505">
<p>Starts at 10 p.m. on Tuesday and ends at 2 a.m.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1889" id="d185891e1526" headers="d185891e1502">
<p><code class="codeph">WEDNESDAY_WINDOW</code></p>
</td>
<td class="cellalignment1890" headers="d185891e1526 d185891e1505">
<p>Starts at 10 p.m. on Wednesday and ends at 2 a.m.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1889" id="d185891e1534" headers="d185891e1502">
<p><code class="codeph">THURSDAY_WINDOW</code></p>
</td>
<td class="cellalignment1890" headers="d185891e1534 d185891e1505">
<p>Starts at 10 p.m. on Thursday and ends at 2 a.m.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1889" id="d185891e1542" headers="d185891e1502">
<p><code class="codeph">FRIDAY_WINDOW</code></p>
</td>
<td class="cellalignment1890" headers="d185891e1542 d185891e1505">
<p>Starts at 10 p.m. on Friday and ends at 2 a.m.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1889" id="d185891e1550" headers="d185891e1502">
<p><code class="codeph">SATURDAY_WINDOW</code></p>
</td>
<td class="cellalignment1890" headers="d185891e1550 d185891e1505">
<p>Starts at 6 a.m. on Saturday and is 20 hours long.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1889" id="d185891e1558" headers="d185891e1502">
<p><code class="codeph">SUNDAY_WINDOW</code></p>
</td>
<td class="cellalignment1890" headers="d185891e1558 d185891e1505">
<p>Starts at 6 a.m. on Sunday and is 20 hours long.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="ADMIN13072"></a><a id="ADMIN12344"></a>
<div class="props_rev_3"><a id="GUID-724A16C6-EF17-44A0-8F0D-AD5BB93D3729"></a>
<h3 id="ADMIN-GUID-724A16C6-EF17-44A0-8F0D-AD5BB93D3729" class="sect3"><span class="enumeration_section">26.6.2</span> Automated Maintenance Tasks Database Dictionary Views</h3>
<div>
<p>You can query a set of data dictionary views for information about automated maintenance tasks.</p>
<div class="section">
<p><a href="tasks.htm#GUID-724A16C6-EF17-44A0-8F0D-AD5BB93D3729__CIHIBBGD" title="This table contains two columns, View Name and Description.">Table 26-2</a> displays information about database dictionary views for automated maintenance tasks:</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-724A16C6-EF17-44A0-8F0D-AD5BB93D3729__CIHIBBGD">
<p class="titleintable">Table 26-2 Automated Maintenance Tasks Database Dictionary Views</p>
<table class="cellalignment1849" title="Automated Maintenance Tasks Database Dictionary Views" summary="This table contains two columns, View Name and Description.">
<thead>
<tr class="cellalignment1843">
<th class="cellalignment1997" id="d185891e1643">View Name</th>
<th class="cellalignment1972" id="d185891e1646">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1843">
<td class="cellalignment1998" id="d185891e1651" headers="d185891e1643">
<p><code class="codeph">DBA_AUTOTASK_CLIENT_JOB</code></p>
</td>
<td class="cellalignment1973" headers="d185891e1651 d185891e1646">
<p>Contains information about currently running Scheduler jobs created for automated maintenance tasks. It provides information about some objects targeted by those jobs, as well as some additional statistics from previous instantiations of the same task. Some of this additional data is taken from generic Scheduler views.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1998" id="d185891e1659" headers="d185891e1643">
<p><code class="codeph">DBA_AUTOTASK_CLIENT</code></p>
</td>
<td class="cellalignment1973" headers="d185891e1659 d185891e1646">
<p>Provides statistical data for each automated maintenance task over 7-day and 30-day periods.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1998" id="d185891e1667" headers="d185891e1643">
<p><code class="codeph">DBA_AUTOTASK_JOB_HISTORY</code></p>
</td>
<td class="cellalignment1973" headers="d185891e1667 d185891e1646">
<p>Lists the history of automated maintenance task job runs. Jobs are added to this view after they finish executing.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1998" id="d185891e1675" headers="d185891e1643">
<p><code class="codeph">DBA_AUTOTASK_WINDOW_CLIENTS</code></p>
</td>
<td class="cellalignment1973" headers="d185891e1675 d185891e1646">
<p>Lists the windows that belong to <code class="codeph">MAINTENANCE_WINDOW_GROUP</code>, along with the Enabled or Disabled status for the window for each maintenance task. Primarily used by Cloud Control.</p>
</td>
</tr>
<tr class="cellalignment1843">
<td class="cellalignment1998" id="d185891e1686" headers="d185891e1643">
<p><code class="codeph">DBA_AUTOTASK_CLIENT_HISTORY</code></p>
</td>
<td class="cellalignment1973" headers="d185891e1686 d185891e1646">
<p>Provides per-window history of job execution counts for each automated maintenance task. This information is viewable in the Job History page of Cloud Control.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-724A16C6-EF17-44A0-8F0D-AD5BB93D3729__GUID-38DCB103-D92D-4897-AF02-696D665434FC">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="dbrm.htm#GUID-C253E1D1-513A-4F52-A619-325B1B33D8C0" title="You can query a set of data dictionary views for information relating to database resource management.">Resource Manager Data Dictionary Views</a>&#34;</span> for column descriptions for views.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1842">
<tr>
<td class="cellalignment1854">
<table class="cellalignment1847">
<tr>
<td class="cellalignment1846"><a href="part6.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1846"><a href="dbrm.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2001, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1856">
<table class="cellalignment1845">
<tr>
<td class="cellalignment1846"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1846"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1846"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1846"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1846"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1846"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>