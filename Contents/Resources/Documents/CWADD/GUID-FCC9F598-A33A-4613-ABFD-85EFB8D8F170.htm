<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-4844"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Rolling%20Conversion%20from%20DNS%20to%20GNS%20Cluster%20Name%20Resolution"></a><title>Rolling Conversion from DNS to GNS Cluster Name Resolution</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-14T14:47:18Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Clusterware Administration and Deployment Guide"/>
<meta name="dcterms.identifier" content="E48819-11"/>
<meta name="dcterms.isVersionOf" content="CWADD"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-29866D1B-B51D-42C3-AF3B-137C7B789682.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-4C37D5FD-C68D-4561-BC9F-2183EA166101.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48819-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170"></a> <span id="PAGE" style="display:none;">70/713</span> <!-- End Header -->
<a id="CWADD92641"></a>
<h1 id="CWADD-GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170" class="sect1">Rolling Conversion from DNS to GNS Cluster Name Resolution</h1>
<div>
<div class="section">
<p>You can convert Oracle Grid Infrastructure cluster networks using DNS for name resolution to cluster networks using Grid Naming Service (GNS) obtaining name resolution through GNS.</p>
<p>Use the following procedure to convert from a standard DNS name resolution network to a GNS name resolution network, with no downtime:</p>
<div class="infoboxnotealso" id="GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170__GUID-D9B872F9-3849-4E80-AD74-C8BACAA9E364">
<p class="notep1">See Also:</p>
<p><a class="olink CWGEN" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=CWGEN"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for your platform to complete preinstallation steps for configuring GNS</p>
</div>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Log in as the Grid user (<code class="codeph">grid</code>), and use the following Cluster Verification Utility to check the status for moving the cluster to GNS, where <span class="italic"><code class="codeph">nodelist</code></span> is a comma-delimited list of cluster member nodes:</span>
<div>
<pre dir="ltr">$ cluvfy stage &ndash;pre crsinst &ndash;n <span class="italic">nodelist</span>
</pre></div>
</li>
<li class="stepexpand"><span>As the Grid user, check the integrity of the GNS configuration using the following commands, where <span class="italic"><code class="codeph">domain</code></span> is the domain delegated to GNS for resolution, and <span class="italic"><code class="codeph">gns_vip</code></span> is the GNS VIP:</span>
<div>
<pre dir="ltr">$ cluvfy comp gns -precrsinst -domain <span class="italic">domain</span> -vip <span class="italic">gns_vip</span>
</pre></div>
</li>
<li class="stepexpand" id="GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170__BAJDAJBG"><span>Log in as <code class="codeph">root</code>, and use the following SRVCTL command to configure the GNS resource, where <span class="italic"><code class="codeph">domain_name</code></span> is the domain that your network administrator has configured your DNS to delegate for resolution to GNS, and <span class="italic"><code class="codeph">ip_address</code></span> is the IP address on which GNS listens for DNS requests:</span>
<div>
<pre dir="ltr"># srvctl add gns -domain <span class="italic">domain_name</span> -vip <span class="italic">ip_address</span>
</pre></div>
</li>
<li class="stepexpand"><span>Use the following command to start GNS:</span>
<div>
<pre dir="ltr"># srvctl start gns
</pre>
<p>GNS starts and registers VIP and SCAN names.</p>
</div>
</li>
<li class="stepexpand"><span>As <code class="codeph">root</code>, use the following command to change the network CRS resource to support a mixed mode of static and DHCP network addresses:</span>
<div>
<pre dir="ltr"># srvctl modify network -nettype MIXED
</pre>
<p>The necessary VIP addresses are obtained from the DHCP server, and brought up.</p>
</div>
</li>
<li class="stepexpand"><span>As the Grid user, enter the following command to ensure that Oracle Clusterware is using the new GNS, dynamic addresses, and listener end points:</span>
<div>
<pre dir="ltr">cluvfy stage -post crsinst -n all
</pre></div>
</li>
<li class="stepexpand"><span>After the verification succeeds, change the remote endpoints that previously used the SCAN or VIPs resolved through the DNS to use the SCAN and VIPs resolved through GNS.</span>
<div>
<p>For each client using a SCAN, change the SCAN that the client uses so that the client uses the SCAN in the domain delegated to GNS.</p>
<p>For each client using VIP names, change the VIP name on each client so that they use the same server VIP name, but with the domain name in the domain delegated to GNS.</p>
</div>
</li>
<li class="stepexpand"><span>Enter the following command as <code class="codeph">root</code> to update the system with the SCAN name in the GNS subdomain:</span>
<div>
<pre dir="ltr"># srvctl modify scan -scanname <span class="italic">scan_name</span>.<span class="italic">gns_domain</span>
</pre>
<p>In the preceding command syntax, <span class="italic"><code class="codeph">gns_domain</code></span> is the domain name you entered in step <a href="GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170.htm#GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170__BAJDAJBG">3</a> of this procedure.</p>
</div>
</li>
<li class="stepexpand"><span>Disable the static addresses once all clients are using the dynamic addresses, as follows:</span>
<div>
<pre dir="ltr">$ srvctl modify network -nettype DHCP
</pre></div>
</li>
</ol>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5560">
<tr>
<td class="cellalignment5574">
<table class="cellalignment5565">
<tr>
<td class="cellalignment5564"><a href="GUID-29866D1B-B51D-42C3-AF3B-137C7B789682.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5564"><a href="GUID-4C37D5FD-C68D-4561-BC9F-2183EA166101.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5576">
<table class="cellalignment5563">
<tr>
<td class="cellalignment5564"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5564"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5564"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5564"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5564"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5564"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>