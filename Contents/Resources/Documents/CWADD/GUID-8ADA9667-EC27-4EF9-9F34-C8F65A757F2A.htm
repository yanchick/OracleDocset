<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-4535"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Deleting%20a%20Cluster%20Node%20on%20Linux%20and%20UNIX%20Systems"></a><title>Deleting a Cluster Node on Linux and UNIX Systems</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-14T14:47:18Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Clusterware Administration and Deployment Guide"/>
<meta name="dcterms.identifier" content="E48819-11"/>
<meta name="dcterms.isVersionOf" content="CWADD"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-D39503EC-3E13-4AF7-8A57-932B6E382C7B.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48819-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A"></a> <span id="PAGE" style="display:none;">165/713</span> <!-- End Header -->
<a id="CWADD90992"></a>
<h1 id="CWADD-GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A" class="sect1">Deleting a Cluster Node on Linux and UNIX Systems</h1>
<div>
<div class="section">
<p><a id="d39245e99" class="indexterm-anchor"></a><a id="d39245e103" class="indexterm-anchor"></a>This section describes the procedure for deleting a node from a cluster.</p>
<div class="infobox-note" id="GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A__GUID-1FEBB7F1-07E1-494E-8778-C8243656E4B8">
<p class="notep1">Note:</p>
<ul style="list-style-type: disc;">
<li>
<p>You can remove the Oracle RAC database instance from the node before removing the node from the cluster but this step is not required. If you do not remove the instance, then the instance is still configured but never runs. Deleting a node from a cluster does not remove a node&#39;s configuration information from the cluster. The residual configuration information does not interfere with the operation of the cluster.</p>
<p><span class="bold">See Also:</span> <a class="olink RACAD7358" target="_blank" href="../RACAD/GUID-BFA0BA52-0387-4B90-AAC9-9DABA85A36E1.htm#RACAD7358"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about deleting an Oracle RAC database instance</p>
</li>
<li>
<p>If you delete the last node of a cluster that is serviced by GNS, then you must delete the entries for that cluster from GNS.</p>
</li>
<li>
<p>If you have nodes in the cluster that are unpinned, then Oracle Clusterware ignores those nodes after a time and there is no need for you to remove them.</p>
</li>
<li>
<p>If one creates node-specific configuration for a node (such as disabling a service on a specific node, or adding the node to the candidate list for a server pool) that node-specific configuration is not removed when the node is deleted from the cluster. Such node-specific configuration must be removed manually.</p>
</li>
<li>
<p>Voting files are automatically backed up in OCR after any changes you make to the cluster.</p>
</li>
<li>
<p>When you want to delete a Leaf Node from an Oracle Flex Cluster, you need only complete steps 1 through 4 of this procedure.</p>
</li>
</ul>
</div>
<p>To delete a node from a cluster:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Ensure that <span class="italic"><code class="codeph">Grid_home</code></span> correctly specifies the full directory path for the Oracle Clusterware home on each node, where <span class="italic"><code class="codeph">Grid_home</code></span> is the location of the installed Oracle Clusterware software.</span></li>
<li class="stepexpand"><span>Run the following command as either <code class="codeph">root</code> or the user that installed Oracle Clusterware to determine whether the node you want to delete is active and whether it is pinned:</span>
<div>
<pre dir="ltr">$ olsnodes -s -t
</pre>
<p>If the node is pinned, then run the <code class="codeph">crsctl unpin css</code> command. Otherwise, proceed to the next step.</p>
</div>
</li>
<li class="stepexpand"><span>On the node <span class="italic">you want to delete</span>, run the following command as the user that installed Oracle Clusterware from the <span class="italic"><code class="codeph">Grid_home</code></span><code class="codeph">/oui/bin</code> directory where <span class="italic"><code class="codeph">node_to_be_deleted</code></span> is the name of the node that you are deleting:</span>
<div>
<pre dir="ltr">$ ./runInstaller -updateNodeList ORACLE_HOME=<span class="italic">Grid_home</span> &#34;CLUSTER_NODES=
{<span class="italic">node_to_be_deleted</span>}&#34; CRS=TRUE -silent -local
</pre></div>
</li>
<li class="stepexpand"><span>On the node that you are deleting, depending on whether you have a shared or local Oracle home, complete one of the following procedures as the user that installed Oracle Clusterware:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>For a local home, deinstall the Oracle Clusterware home from the node that you want to delete, as follows, by running the following command, where <span class="italic"><code class="codeph">Grid_home</code></span> is the path defined for the Oracle Clusterware home:</p>
<pre dir="ltr">$ <span class="italic">Grid_home</span>/deinstall/deinstall -local
</pre>
<div class="infobox-note" id="GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A__GUID-90DC8FCB-2FF1-4274-BE4D-5AC0A645EA59">
<p class="notep1">Caution:</p>
<ul style="list-style-type: disc;">
<li>
<p>If you do not specify the <code class="codeph">-local</code> flag, then the command removes the Oracle Grid Infrastructure home from every node in the cluster.</p>
</li>
<li>
<p>If you cut and paste the preceding command, then paste it into a text editor before pasting it to the command line to remove any formatting this document might contain.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If you have a shared home, then run the following commands in the following order on the node you want to delete.</p>
<p>Run the following command to deconfigure Oracle Clusterware:</p>
<pre dir="ltr">$ <span class="italic">Grid_home</span>/perl/bin/perl <span class="italic">Grid_home</span>/crs/install/rootcrs.pl -deconfig -force
</pre>
<p>Run the following command from the <span class="italic"><code class="codeph">Grid_home</code></span><code class="codeph">/oui/bin</code> directory to detach the Grid home:</p>
<pre dir="ltr">$ ./runInstaller -detachHome ORACLE_HOME=<span class="italic">Grid_home</span> -silent -local
</pre>
<p>Manually delete any configuration files, as prompted by the installation utility.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>On any node other than the node you are deleting (except for a Leaf Node in an Oracle Flex Cluster), run the following command from the <span class="italic"><code class="codeph">Grid_home</code></span><code class="codeph">/oui/bin</code> directory where <span class="italic"><code class="codeph">remaining_nodes_list</code></span> is a comma-delimited list of the nodes that are going to remain part of your cluster:</span>
<div>
<pre dir="ltr">$ ./runInstaller -updateNodeList ORACLE_HOME=<span class="italic">Grid_home</span> &#34;CLUSTER_NODES=
{<span class="italic">remaining_nodes_list</span>}&#34; CRS=TRUE -silent
</pre>
<div class="infobox-note" id="GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A__GUID-1553DE0F-5F2E-4AB2-BF4D-55B7BDB6F927">
<p class="notep1">Note:</p>
<ul style="list-style-type: disc;">
<li>
<p>You must run this command a second time from the Oracle RAC home, where <code class="codeph">ORACLE_HOME=</code><span class="italic"><code class="codeph">ORACLE__RAC_HOME</code></span> and <code class="codeph">CRS=TRUE -silent</code> is omitted from the syntax, as follows:</p>
<pre dir="ltr">$ ./runInstaller -updateNodeList ORACLE_HOME=<span class="italic">ORACLE_HOME</span>
 &#34;CLUSTER_NODES={<span class="italic">remaining_nodes_list</span>}&#34;
</pre></li>
<li>
<p>Because you do not have to run this command if you are deleting a Leaf Node from an Oracle Flex Cluster, <span class="italic"><code class="codeph">remaining_nodes_list</code></span> must list only Hub Nodes.</p>
</li>
<li>
<p>If you have a shared Oracle Grid Infrastructure home, then append the <code class="codeph">-cfs</code> option to the command example in this step and provide a complete path location for the cluster file system.</p>
</li>
</ul>
</div>
</div>
</li>
<li class="stepexpand"><span>From any node that you are <span class="italic">not deleting</span>, run the following command from the <span class="italic"><code class="codeph">Grid_home</code></span><code class="codeph">/bin</code> directory as <code class="codeph">root</code> to delete the node from the cluster:</span>
<div>
<pre dir="ltr"># crsctl delete node -n <span class="italic">node_to_be_deleted</span>
</pre></div>
</li>
<li class="stepexpand"><span>Run the following CVU command to verify that the specified nodes have been successfully deleted from the cluster:</span>
<div>
<pre dir="ltr">$ cluvfy stage -post nodedel -n <span class="italic">node_list</span> [-verbose]
</pre>
<div class="infoboxnotealso" id="GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A__GUID-F18F7E96-0ACB-445D-BE77-8CECDE2E28A1">
<p class="notep1">See Also:</p>
<p><code class="codeph"><span class="q">&#34;<a href="GUID-AFC61062-096E-467A-82B6-D29994FF4520.htm#GUID-AFC61062-096E-467A-82B6-D29994FF4520">cluvfy stage -post nodedel</a>&#34;</span></code> for more information about this CVU command</p>
</div>
</div>
</li>
<li class="stepexpand"><span>If you remove a cluster node on which Oracle Clusterware is down, then determine whether the VIP for the deleted node still exists, as follows:</span>
<div>
<pre dir="ltr">$ srvctl config vip -node <span class="italic">deleted_node_name</span>
</pre>
<p>If the VIP still exists, then delete it, as follows:</p>
<pre dir="ltr">$ srvctl stop vip -node <span class="italic">deleted_node_name</span>
$ srvctl remove vip -node <span class="italic">deleted_node_name</span>
</pre></div>
</li>
</ol>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5560">
<tr>
<td class="cellalignment5574">
<table class="cellalignment5565">
<tr>
<td class="cellalignment5564"><a href="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5564"><a href="GUID-D39503EC-3E13-4AF7-8A57-932B6E382C7B.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5576">
<table class="cellalignment5563">
<tr>
<td class="cellalignment5564"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5564"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5564"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5564"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5564"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5564"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>