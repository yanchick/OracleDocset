<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-4286"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/tfactl%20diagcollect"></a><title>tfactl diagcollect</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-14T14:47:18Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Clusterware Administration and Deployment Guide"/>
<meta name="dcterms.identifier" content="E48819-11"/>
<meta name="dcterms.isVersionOf" content="CWADD"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-EC1DF0D4-26F8-40F6-A93F-F69699F11F0F.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-17901B6B-5803-4553-8EB0-EC46D35BED16.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48819-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-3749B526-056E-4FD5-9363-B25124781C14"></a> <span id="PAGE" style="display:none;">708/713</span> <!-- End Header -->
<a id="CWADD93054"></a><a id="CWADD93055"></a><a id="CWADD93056"></a><a id="CWADD93057"></a><a id="CWADD93053"></a>
<h1 id="CWADD-GUID-3749B526-056E-4FD5-9363-B25124781C14" class="sect1">tfactl diagcollect</h1>
<div>
<p>Use the <a id="d167875e104" class="indexterm-anchor"></a><code class="codeph">tfactl diagcollect</code> command to perform on-demand diagnostic collection. You can configure a number of different parameters to determine how large or detailed a collection you want. You can specify a specific time of an incident or a time range for data to be collected, and determine if whole files that have relevant data should be collected or just a time interval of data from those files.</p>
<div class="infobox-note" id="GUID-3749B526-056E-4FD5-9363-B25124781C14__GUID-84385ACD-3F4C-4841-BA9F-778A9ABF4A71">
<p class="notep1">Note:</p>
<p>If you specify no parameters, then the <code class="codeph">tfactl diagcollect</code> command collects files from all nodes for all components where the file has been updated in the last four hours, and also trims excessive files. If an incident occurred prior to this period, then you can use the parameters documented in this section to target the correct data collection period.</p>
</div>
<div class="section">
<p class="subhead1">Syntax</p>
</div>
<!-- class="section" -->
<pre dir="ltr">tfactl diagcollect [-all | -database all | <span class="italic">database_1</span>,<span class="italic">database_2</span>,... | -asm | -crs | -os | -install]
[-node all | local | <span class="italic">node_1</span>,<span class="italic">node_2</span>,...][-tag <span class="italic">description</span>] [-z <span class="italic">file_name</span>]
[-since <span class="italic">number</span>h | d | -from &#34;<span class="italic">mmm/dd/yyyy</span> <span class="italic">hh:mm:ss</span>&#34; -to &#34;<span class="italic">mmm/dd/yyyy</span> <span class="italic">hh:mm:ss</span>&#34;
| -for &#34;<span class="italic">mmm/dd/yyyy</span> <span class="italic">hh:mm:ss</span>&#34; [-nocopy] [-nomonitor]]
</pre>
<div class="section">
<p class="subhead1">Parameters</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-3749B526-056E-4FD5-9363-B25124781C14__GUID-EA6771FE-1982-404E-9DFB-DFF5B9EAAD61">
<p class="titleintable">Table J-15 tfactl diagcollect Command Parameters</p>
<table class="cellalignment5567" title="tfactl diagcollect Command Parameters" summary="This table lists and describes tfactl diacollect command parameters.">
<thead>
<tr class="cellalignment5561">
<th class="cellalignment5581" id="d167875e178">Parameter</th>
<th class="cellalignment5582" id="d167875e181">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5561">
<td class="cellalignment5583" id="d167875e186" headers="d167875e178">
<pre dir="ltr">-all | -database all
 | <span class="italic">database_1</span>,<span class="italic">database_2</span>,...
 | -asm | -crs | -os |
 -install
</pre></td>
<td class="cellalignment5584" headers="d167875e186 d167875e181">
<p>You can choose one or more individual components from which to collect trace and log files or choose <code class="codeph">-all</code> to collect all files in the inventory. If you do not specify a time interval, then TFACTL collects files from the last four hours.</p>
</td>
</tr>
<tr class="cellalignment5561">
<td class="cellalignment5583" id="d167875e202" headers="d167875e178">
<pre dir="ltr">-node all | local |
 <span class="italic">node_1</span>,<span class="italic">node_2</span>,...
</pre></td>
<td class="cellalignment5584" headers="d167875e202 d167875e181">
<p>You can specify a comma-delimited list of nodes from which to collect diagnostic information. Default is <code class="codeph">all</code>.</p>
</td>
</tr>
<tr class="cellalignment5561">
<td class="cellalignment5583" id="d167875e218" headers="d167875e178">
<pre dir="ltr">-tag <span class="italic">description</span>
</pre></td>
<td class="cellalignment5584" headers="d167875e218 d167875e181">
<p>Use this parameter to create a subdirectory for the resulting collection in the TFA repository.</p>
</td>
</tr>
<tr class="cellalignment5561">
<td class="cellalignment5583" id="d167875e227" headers="d167875e178">
<pre dir="ltr">-z <span class="italic">file_name</span>
</pre></td>
<td class="cellalignment5584" headers="d167875e227 d167875e181">
<p>Use this parameter to specify an output file name.</p>
</td>
</tr>
<tr class="cellalignment5561">
<td class="cellalignment5583" id="d167875e236" headers="d167875e178">
<pre dir="ltr">-since numberh | d |
 -from &#34;<span class="italic">mmm/dd/yyyy</span> <span class="italic">hh:mm:ss</span>&#34; 
-to &#34;<span class="italic">mmm/dd/yyyy</span> <span class="italic">hh:mm:ss</span>&#34; |
 -for &#34;<span class="italic">mmm/dd/yyyy</span> <span class="italic">hh:mm:ss</span>&#34;
</pre></td>
<td class="cellalignment5584" headers="d167875e236 d167875e181">
<p>Specify the <code class="codeph">-since</code> parameter to collect files that have relevant data for the past specific number of hours (<code class="codeph">h</code>) or days (<code class="codeph">d</code>). By default, using the command with this parameter also trims files that are large and shows files only from the specified interval.</p>
<p>Specify the <code class="codeph">-from</code> and <code class="codeph">-to</code> parameters (you must use these two parameters together) to collect files that have relevant data during a specific time interval, and trim data before this time where files are large.</p>
<p>Specify the <code class="codeph">-for</code> parameter to collect files that have relevant data for the time given. The files TFACTL collects will have timestamps in between which the time you specify after <code class="codeph">-for</code> is included. No data trimming is done for this option.</p>
<p><span class="bold">Note:</span> If you specify both date and time, then you must enclose both values in double quotation marks (<code class="codeph">&#34;&#34;</code>). If you specify only the date or the time, then you do not have to enclose the single value in quotation marks.</p>
</td>
</tr>
<tr class="cellalignment5561">
<td class="cellalignment5583" id="d167875e294" headers="d167875e178">
<pre dir="ltr">-nocopy
</pre></td>
<td class="cellalignment5584" headers="d167875e294 d167875e181">
<p>Specify this parameter to stop the resultant trace file collection from being copied back to the initiating node. The file remains in the TFA repository on the executing node.</p>
</td>
</tr>
<tr class="cellalignment5561">
<td class="cellalignment5583" id="d167875e301" headers="d167875e178">
<pre dir="ltr">-nomonitor
</pre></td>
<td class="cellalignment5584" headers="d167875e301 d167875e181">
<p>Specify this parameter to prevent the terminal on which you run the command from displaying the progress of the command.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p class="subhead1">Examples</p>
</div>
<!-- class="section" -->
<ul style="list-style-type: disc;">
<li>
<p>The following command trims and zips all files updated in the last four hours, including <code class="codeph">chmos</code> and <code class="codeph">osw</code> data, from across the cluster and collects it on the initiating node:</p>
<pre dir="ltr"># tfactl diagcollect
</pre></li>
<li>
<p>The following command trims and zips all files updated in the last eight hours, including <code class="codeph">chmos</code> and <code class="codeph">osw</code> data, from across the cluster and collects it on the initiating node:</p>
<pre dir="ltr"># tfactl diagcollect &ndash;all &ndash;since 8h
</pre></li>
<li>
<p>The following command trims and zips all files from databases <code class="codeph">hrdb</code> and <code class="codeph">fdb</code> updated in the last one day and collects it on the initiating node:</p>
<pre dir="ltr"># tfactl diagcollect -database hrdb,fdb -since 1d -z foo
</pre></li>
<li>
<p>The following command trims and zips all Oracle Clusterware files, operating system logs, and <code class="codeph">chmos</code> and <code class="codeph">osw</code> data from <code class="codeph">node1</code> and <code class="codeph">node2</code> updated in the last six hours, and collects it on the initiating node:</p>
<pre dir="ltr"># tfactl diagcollect &ndash;crs -os -node node1,node2 -since 6h
</pre></li>
<li>
<p>The following command trims and zips all Oracle ASM logs from <code class="codeph">node1</code> updated between July 4, 2014 and July 5, 2015 at 21:00, and collects it on the initiating node:</p>
<pre dir="ltr"># tfactl diagcollect -asm -node node1 -from Jul/4/2014 -to &#34;Jul/5/2014 21:00:00&#34;
</pre></li>
<li>
<p>The following command trims and zips all log files updated on July 2, 2014 and collects it on the initiating node:</p>
<pre dir="ltr"># tfactl diagcollect -for Jul/2/2014
</pre></li>
<li>
<p>The following command trims and zips all log files updated from 09:00 on July 2, 2014, to 09:00 on July 3, 2014, which is 12 hours before and after the time specified in the command, and collects it on the initiating node:</p>
<pre dir="ltr"># tfactl diagcollect -for &#34;Jul/2/2014 21:00:00&#34;
</pre></li>
</ul>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5560">
<tr>
<td class="cellalignment5574">
<table class="cellalignment5565">
<tr>
<td class="cellalignment5564"><a href="GUID-EC1DF0D4-26F8-40F6-A93F-F69699F11F0F.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5564"><a href="GUID-17901B6B-5803-4553-8EB0-EC46D35BED16.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5576">
<table class="cellalignment5563">
<tr>
<td class="cellalignment5564"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5564"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5564"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5564"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5564"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5564"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>