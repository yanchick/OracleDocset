<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-4163"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Cluster%20Health%20Monitor"></a><title>Cluster Health Monitor</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-14T14:47:18Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Clusterware Administration and Deployment Guide"/>
<meta name="dcterms.identifier" content="E48819-11"/>
<meta name="dcterms.isVersionOf" content="CWADD"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-58AB6EF5-7E2A-4BEE-A025-F8ADE54C0E1B.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-FB274A4A-D4D4-477E-8340-083D07419861.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48819-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-078AB1E1-22EE-4CAE-8158-48847B946DA7"></a> <span id="PAGE" style="display:none;">685/713</span> <!-- End Header -->
<a id="CWADD92242"></a>
<h1 id="CWADD-GUID-078AB1E1-22EE-4CAE-8158-48847B946DA7" class="sect1">Cluster Health Monitor</h1>
<div>
<p>The Cluster Health Monitor (CHM) detects and analyzes operating system and cluster resource-related degradation and failures. CHM stores real-time operating system metrics in the Oracle Grid Infrastructure Management Repository that you can use for later triage with the help of My Oracle Support should you have cluster issues.</p>
<p>This section includes the following CHM topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-078AB1E1-22EE-4CAE-8158-48847B946DA7.htm#GUID-85F1B2D9-370A-4595-9F65-1317A17214C8">CHM Services</a></p>
</li>
<li>
<p><a href="GUID-078AB1E1-22EE-4CAE-8158-48847B946DA7.htm#GUID-1D46BBCC-3FA4-49E4-8793-DACD6467840A">Collecting CHM Data</a></p>
</li>
</ul>
</div>
<a id="CWADD92245"></a><a id="CWADD92244"></a><a id="CWADD92366"></a><a id="CWADD92243"></a>
<div class="sect2"><a id="GUID-85F1B2D9-370A-4595-9F65-1317A17214C8"></a>
<h2 id="CWADD-GUID-85F1B2D9-370A-4595-9F65-1317A17214C8" class="sect2">CHM Services</h2>
<div>
<p><a id="d158724e216" class="indexterm-anchor"></a>CHM consists of the following services:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-078AB1E1-22EE-4CAE-8158-48847B946DA7.htm#GUID-85F1B2D9-370A-4595-9F65-1317A17214C8__CHDEFAIA">System Monitor Service</a></p>
</li>
<li>
<p><a href="GUID-078AB1E1-22EE-4CAE-8158-48847B946DA7.htm#GUID-85F1B2D9-370A-4595-9F65-1317A17214C8__CHDJHGHI">Cluster Logger Service</a></p>
</li>
<li>
<p><a href="GUID-078AB1E1-22EE-4CAE-8158-48847B946DA7.htm#GUID-85F1B2D9-370A-4595-9F65-1317A17214C8__CHDIGCEC">Oracle Grid Infrastructure Management Repository</a></p>
</li>
</ul>
<div class="section" id="GUID-85F1B2D9-370A-4595-9F65-1317A17214C8__CHDEFAIA">
<p class="subhead2">System Monitor Service</p>
</div>
<!-- class="section" -->
<p>There is one<a id="d158724e239" class="indexterm-anchor"></a> system monitor service on every node. The system monitor service (<code class="codeph">osysmond</code>) is a real-time, monitoring and operating system metric collection service that sends the data to the cluster logger service. The cluster logger service receives the information from all the nodes and persists in an Oracle Grid Infrastructure Management Repository database.</p>
<div class="section" id="GUID-85F1B2D9-370A-4595-9F65-1317A17214C8__CHDJHGHI">
<p class="subhead2">Cluster Logger Service</p>
</div>
<!-- class="section" -->
<p>There is one <a id="d158724e254" class="indexterm-anchor"></a>cluster logger service (OLOGGERD) for every 32 nodes in a cluster. Another OLOGGERD is spawned for every additional 32 nodes (which can be a sum of Hub and Leaf Nodes). If the cluster logger service fails (because the service is not able come up after a fixed number of retries or the node where it was running is down), then Oracle Clusterware starts OLOGGERD on a different node. The cluster logger service manages the operating system metric database in the <a id="d158724e261" class="indexterm-anchor"></a>Oracle Grid Infrastructure Management Repository.</p>
<div class="section" id="GUID-85F1B2D9-370A-4595-9F65-1317A17214C8__CHDIGCEC">
<p class="subhead2">Oracle Grid Infrastructure Management Repository</p>
</div>
<!-- class="section" -->
<p>The <a id="d158724e269" class="indexterm-anchor"></a><a id="d158724e271" class="indexterm-anchor"></a>Oracle Grid Infrastructure Management Repository:</p>
<ul style="list-style-type: disc;">
<li>
<p>Is an Oracle database that stores real-time operating system metrics collected by CHM. You configure the Oracle Grid Infrastructure Management Repository during an installation of or upgrade to Oracle Clusterware 12<span class="italic">c</span> on a cluster.</p>
<div class="infobox-note" id="GUID-85F1B2D9-370A-4595-9F65-1317A17214C8__GUID-8C7B8BD9-030B-4F4C-B8ED-51490CD7CA4E">
<p class="notep1">Note:</p>
<p>If you are upgrading Oracle Clusterware to Oracle Clusterware 12<span class="italic">c</span> and Oracle Cluster Registry (OCR) and the voting file are stored on raw or block devices, then you must move them to Oracle ASM or a shared file system before you upgrade your software.</p>
</div>
</li>
<li>
<p>Runs on one node in the cluster (this must be a Hub Node in an Oracle Flex Cluster configuration), and must support failover to another node in case of node or storage failure.</p>
<p>You can locate the Oracle Grid Infrastructure Management Repository on the same node as the OLOGGERD to improve performance and decrease private network traffic.</p>
</li>
<li>
<p>Communicates with any cluster clients (such as OLOGGERD and OCLUMON) through the private network. Oracle Grid Infrastructure Management Repository communicates with external clients over the public network, only.</p>
</li>
<li>
<p>Data files are located in the same disk group as the OCR and voting file.</p>
<p>If OCR is stored in an Oracle ASM disk group called <code class="codeph">+MYDG</code>, then configuration scripts will use the same disk group to store the Oracle Grid Infrastructure Management Repository.</p>
<p>Oracle increased the Oracle Clusterware shared storage requirement to accommodate the Oracle Grid Infrastructure Management Repository, which can be a network file system (NFS), cluster file system, or an Oracle ASM disk group.</p>
</li>
<li>
<p>Size and retention is managed with OCLUMON.</p>
</li>
</ul>
</div>
</div>
<a id="CWADD92583"></a>
<div class="sect2"><a id="GUID-1D46BBCC-3FA4-49E4-8793-DACD6467840A"></a>
<h2 id="CWADD-GUID-1D46BBCC-3FA4-49E4-8793-DACD6467840A" class="sect2">Collecting CHM Data</h2>
<div>
<p>You can <a id="d158724e411" class="indexterm-anchor"></a>collect CHM data from any node in the cluster by running the <span class="italic"><code class="codeph">Grid_home</code></span><code class="codeph">/bin/diagcollection.pl</code> script on the node.</p>
<div class="infobox-note" id="GUID-1D46BBCC-3FA4-49E4-8793-DACD6467840A__GUID-94C8FAA6-C0AF-4EFC-8405-0450D66F5148">
<p class="notep1">Note:</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle recommends that, when you run the <code class="codeph">diagcollection.pl</code> script to collect CHM data, you run the script on all nodes in the cluster to ensure gathering all of the information needed for analysis.</p>
</li>
<li>
<p>You must run this script as a privileged user.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso" id="GUID-1D46BBCC-3FA4-49E4-8793-DACD6467840A__GUID-7DAFBB3C-282E-421E-BE75-3F3D2683B2A7">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="GUID-50FAE797-1174-49DD-9FAB-A23E6A208537.htm">Diagnostics Collection Script</a>&#34;</span> for more information about the <code class="codeph">diagcollection.pl</code> script</p>
</div>
<p>To run the data collection script on only the node where the cluster logger service is running:</p>
<ol>
<li>
<p>Run the following command to identify the node running the cluster logger service:</p>
<pre dir="ltr">$ <span class="italic">Grid_home</span>/bin/oclumon manage -get master
</pre></li>
<li>
<p>Run the following command from a writable directory outside the Grid home as a privileged user on the cluster logger service node to collect all the available data in the Oracle Grid Infrastructure Management Repository:</p>
<pre dir="ltr"># <span class="italic">Grid_home</span>/bin/diagcollection.pl --collect
</pre>
<p>On Windows, run the following commands:</p>
<pre dir="ltr">C:\<span class="italic">Grid_home</span>\perl\bin\perl.exe
C:\<span class="italic">Grid_home</span>\bin\diagcollection.pl --collect
</pre>
<p>The <code class="codeph">diagcollection.pl</code> script creates a file called <code class="codeph">chmosData_</code><span class="italic"><code class="codeph">host_name_time_stamp</code></span><code class="codeph">.tar.gz</code>, similar to the following:</p>
<pre dir="ltr">chmosData_stact29_20121006_2321.tar.gz
</pre></li>
</ol>
<p>To limit the amount of data you want collected, enter the following command on a single line:</p>
<pre dir="ltr"># <span class="italic">Grid_home</span>/bin/diagcollection.pl --collect --chmos
   --incidenttime <span class="italic">time</span> --incidentduration <span class="italic">duration</span>
</pre>
<p>In the preceding command, the format for the <code class="codeph">--incidenttime</code> argument is <code class="codeph">MM/DD/YYYY24HH:MM:SS</code> and the format for the <code class="codeph">--incidentduration</code> argument is <code class="codeph">HH:MM</code>. For example:</p>
<pre dir="ltr"># <span class="italic">Grid_home</span>/bin/diagcollection.pl --collect --crshome <span class="italic">Grid_home</span>
   --chmos --incidenttime 07/21/2013 01:00:00 --incidentduration 00:30
</pre></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5560">
<tr>
<td class="cellalignment5574">
<table class="cellalignment5565">
<tr>
<td class="cellalignment5564"><a href="GUID-58AB6EF5-7E2A-4BEE-A025-F8ADE54C0E1B.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5564"><a href="GUID-FB274A4A-D4D4-477E-8340-083D07419861.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5576">
<table class="cellalignment5563">
<tr>
<td class="cellalignment5564"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5564"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5564"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5564"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5564"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5564"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>