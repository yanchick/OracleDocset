<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-4249"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Adding%20a%20Cluster%20Node%20on%20Linux%20and%20UNIX%20Systems"></a><title>Adding a Cluster Node on Linux and UNIX Systems</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="Oracle Clusterware, adding a home to a new node"/>
<meta name="dcterms.created" content="2017-07-14T14:47:18Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Clusterware Administration and Deployment Guide"/>
<meta name="dcterms.identifier" content="E48819-11"/>
<meta name="dcterms.isVersionOf" content="CWADD"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-1965B829-795E-4977-9500-E16F1CE2A856.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48819-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B"></a> <span id="PAGE" style="display:none;">164/713</span> <!-- End Header -->
<a id="CWADD90989"></a>
<h1 id="CWADD-GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B" class="sect1">Adding a Cluster Node on Linux and UNIX Systems</h1>
<div>
<div class="section">
<p>This procedure describes how to add a node to your cluster. This procedure assumes that:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>There is an existing cluster with two nodes named <code class="codeph">node1</code> and <code class="codeph">node2</code></p>
</li>
<li>
<p>You are adding a node named <code class="codeph">node3</code> using a virtual node name, <code class="codeph">node3-vip</code>, that resolves to an IP address, if you are not using DHCP and Grid Naming Service (GNS)</p>
</li>
<li>
<p>You have successfully installed Oracle Clusterware on <code class="codeph">node1</code> and <code class="codeph">node2</code> in a local (non-shared) home, where <span class="italic"><code class="codeph">Grid_home</code></span> represents the successfully installed home</p>
</li>
</ul>
<p>To add a <a id="d38566e140" class="indexterm-anchor"></a><a id="d38566e144" class="indexterm-anchor"></a>node:</p>
<ol>
<li>
<p>Ensure that you have successfully installed Oracle Clusterware on at least one node in your cluster environment. To perform the following procedure, <span class="italic"><code class="codeph">Grid_home</code></span> must identify your successfully installed Oracle Clusterware home.</p>
<div class="infoboxnotealso" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-86538FC2-F259-47F9-BB12-D68267056086">
<p class="notep1">See Also:</p>
<p><a class="olink CWGEN" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=CWGEN"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for Oracle Clusterware installation instructions</p>
</div>
</li>
<li>
<p>Verify the integrity of the cluster and <code class="codeph">node3</code>:</p>
<pre dir="ltr">$ cluvfy stage -pre nodeadd -n node3 [-fixup] [-verbose]
</pre>
<p>You can specify the <code class="codeph">-fixup</code> option to attempt to fix the cluster or node if the verification fails.</p>
</li>
<li>
<p>To extend the Oracle Grid Infrastructure home to the <code class="codeph">node3</code>, navigate to the <span class="italic"><code class="codeph">Grid_home</code></span><code class="codeph">/addnode</code> directory on <code class="codeph">node1</code> and run the <code class="codeph">addnode.sh</code> script as the user that installed Oracle Clusterware.</p>
<p>To run <code class="codeph">addnode.sh</code> in interactive mode, run <code class="codeph">addnode.sh</code> from <span class="italic"><code class="codeph">Grid_home</code></span><code class="codeph">/addnode</code>.</p>
<p>You can also run <code class="codeph">addnode.sh</code> in silent mode for both Oracle Clusterware standard Clusters and Oracle Flex Clusters.</p>
<p>For an Oracle Clusterware standard Cluster:</p>
<pre dir="ltr">./addnode.sh -silent &#34;CLUSTER_NEW_NODES={node3}&#34; &#34;CLUSTER_NEW_VIRTUAL_
  HOSTNAMES={node3-vip}&#34;
</pre>
<p>If you are adding <code class="codeph">node3</code> to an Oracle Flex Cluster, then you can specify the node role on the command line, as follows:</p>
<pre dir="ltr">./addnode.sh -silent &#34;CLUSTER_NEW_NODES={node3}&#34; &#34;CLUSTER_NEW_VIRTUAL_
  HOSTNAMES={node3-vip}&#34; &#34;CLUSTER_NEW_NODE_ROLES={hub}&#34;
</pre>
<div class="infobox-note" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-319FC872-F6DC-4097-841A-D9056D6B8907">
<p class="notep1">Note:</p>
<p>Hub Nodes always have VIPs but Leaf Nodes may not. If you use the preceding syntax to add multiple nodes to the cluster, then you can use syntax similar to the following, where <code class="codeph">node3</code> is a Hub Node and <code class="codeph">node4</code> is a Leaf Node:</p>
<pre dir="ltr">./addnode.sh -silent &#34;CLUSTER_NEW_NODES={node3,node4}&#34; &#34;CLUSTER_NEW_VIRTUAL_HOSTNAMES={node3-vip,}&#34; &#34;CLUSTER_NEW_NODE_ROLES={hub,leaf}&#34;
</pre></div>
</li>
<li>
<p>If prompted, then run the <code class="codeph">orainstRoot.sh</code> script as root to populate the <code class="codeph">/etc/oraInst.loc</code> file with the location of the central inventory. For example:</p>
<pre dir="ltr"># /opt/oracle/oraInventory/orainstRoot.sh
</pre></li>
<li id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__CFHFEJIA">
<p><a id="d38566e251" class="indexterm-anchor"></a>If you have an Oracle RAC or Oracle RAC One Node database configured on the cluster and you have a local Oracle home, then do the following to extend the Oracle database home to <code class="codeph">node3</code>:</p>
<ol>
<li>
<p>Navigate to the <span class="italic"><code class="codeph">Oracle_home</code></span><code class="codeph">/addnode</code> directory on <code class="codeph">node1</code> and run the <code class="codeph">addnode.sh</code> script as the user that installed Oracle RAC using the following syntax:</p>
<pre dir="ltr">$ ./addnode.sh &#34;CLUSTER_NEW_NODES={node3}&#34;
</pre></li>
<li>
<p>Run the <span class="italic"><code class="codeph">Oracle_home</code></span><code class="codeph">/root.sh</code> script on <code class="codeph">node3</code> as <code class="codeph">root</code>, where <span class="italic"><code class="codeph">Oracle_home</code></span> is the Oracle RAC home.</p>
</li>
</ol>
<p><a id="d38566e297" class="indexterm-anchor"></a>If you have a shared Oracle home that is shared using Oracle Automatic Storage Management Cluster File System (Oracle ACFS), then do the following to extend the Oracle database home to <code class="codeph">node3</code>:</p>
<ol>
<li>
<p>Run the <span class="italic"><code class="codeph">Grid_home</code></span><code class="codeph">/root.sh</code> script on <code class="codeph">node3</code> as <code class="codeph">root</code>, where <span class="italic"><code class="codeph">Grid_home</code></span> is the Oracle Grid Infrastructure home.</p>
</li>
<li>
<p>Run the following command as the user that installed Oracle RAC from the <span class="italic"><code class="codeph">Oracle_home</code></span><code class="codeph">/oui/bin</code> directory on the node you are adding to add the Oracle RAC database home:</p>
<pre dir="ltr">$ ./runInstaller -attachHome ORACLE_HOME=&#34;ORACLE_HOME&#34; &#34;CLUSTER_NODES={node3}&#34;
LOCAL_NODE=&#34;node3&#34; ORACLE_HOME_NAME=&#34;<span class="italic">home_name</span>&#34; -cfs
</pre></li>
<li>
<p>Navigate to the <span class="italic"><code class="codeph">Oracle_home</code></span><code class="codeph">/addnode</code> directory on <code class="codeph">node1</code> and run the <code class="codeph">addnode.sh</code> script as the user that installed Oracle RAC using the following syntax:</p>
<pre dir="ltr">$ ./addnode.sh -noCopy &#34;CLUSTER_NEW_NODES={node3}&#34;
</pre>
<div class="infobox-note" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-B63EA082-E180-43A2-AF1F-7A1155295086">
<p class="notep1">Note:</p>
<p>Use the <code class="codeph">-noCopy</code> option because the Oracle home on the destination node is already fully populated with software.</p>
</div>
</li>
</ol>
<p><a id="d38566e365" class="indexterm-anchor"></a>If you have a shared Oracle home on a shared file system that <span class="italic">is not</span> Oracle ACFS, then you must first create a mount point for the Oracle RAC database home on the target node, mount and attach the Oracle RAC database home, and update the Oracle Inventory, as follows:</p>
<ol>
<li>
<p>Run the <code class="codeph">srvctl config database -db</code> <span class="italic"><code class="codeph">db_name</code></span> command on an existing node in the cluster to obtain the mount point information.</p>
</li>
<li>
<p>Run the following command as <code class="codeph">root</code> on <code class="codeph">node3</code> to create the mount point:</p>
<pre dir="ltr"># mkdir -p <span class="italic">mount_point_path</span>
</pre></li>
<li>
<p>Mount the file system that hosts the Oracle RAC database home.</p>
</li>
<li>
<p>Run the following command as the user that installed Oracle RAC from the <span class="italic"><code class="codeph">Oracle_home</code></span><code class="codeph">/oui/bin</code> directory on the node you are adding to add the Oracle RAC database home:</p>
<pre dir="ltr">$ ./runInstaller -attachHome ORACLE_HOME=&#34;ORACLE_HOME&#34; &#34;CLUSTER
_NODES={<span class="italic">local_node_name</span>}&#34; LOCAL_NODE=&#34;<span class="italic">node_name</span>&#34; ORACLE_HOME_NAME=&#34;<span class="italic">home_name</span>&#34; -cfs
</pre></li>
<li>
<p>Navigate to the <span class="italic"><code class="codeph">Oracle_home</code></span><code class="codeph">/addnode</code> directory on <code class="codeph">node1</code> and run the <code class="codeph">addnode.sh</code> script as the user that installed Oracle RAC using the following syntax:</p>
<pre dir="ltr">$ ./addnode.sh -noCopy &#34;CLUSTER_NEW_NODES={node3}&#34;
</pre>
<div class="infobox-note" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-9E6DDBC1-E6AD-4D4D-B093-CD063C5920B4">
<p class="notep1">Note:</p>
<p>Use the <code class="codeph">-noCopy</code> option because the Oracle home on the destination node is already fully populated with software.</p>
</div>
</li>
</ol>
<div class="infobox-note" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-738D8668-E5CD-4EA3-A2C4-365B8FA3EFEB">
<p class="notep1">Note:</p>
After running <code class="codeph">addnode.sh</code>, ensure the <code><span class="variable">Grid_home</span>/network/admin/samples</code> directory has permissions set to 750.</div>
</li>
<li>
<p>Run the <span class="italic"><code class="codeph">Grid_home</code></span><code class="codeph">/root.sh</code> script on the <code class="codeph">node3</code> as <code class="codeph">root</code> and run the subsequent script, as instructed.</p>
<div class="infobox-note" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-C5F5BA72-89E4-4467-81F2-659F069B7D67">
<p class="notep1">Note:</p>
<ul style="list-style-type: disc;">
<li>
<p>If you ran the <code class="codeph">root.sh</code> script in the step <a href="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B.htm#GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__CFHFEJIA">5</a>, then you do not need to run it again.</p>
</li>
<li>
<p>If you have a policy-managed database, then you must ensure that the Oracle home is cloned to the new node before you run the <code class="codeph">root.sh</code> script.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Start the Oracle ACFS resource on the new node by running the following command as <code class="codeph">root</code> from the <span class="italic"><code class="codeph">Grid_home</code></span><code class="codeph">/bin</code> directory:</p>
<pre dir="ltr"># srvctl start filesystem -device <span class="italic">volume_device_name</span> -node node3
</pre>
<div class="infobox-note" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-916DDEED-7892-406C-BC3B-4F904F62B013">
<p class="notep1">Note:</p>
<p>Ensure the Oracle ACFS resources, including Oracle ACFS registry resource and Oracle ACFS file system resource where the Oracle home is located, are online on the newly added node.</p>
</div>
</li>
<li>
<p>Run the following CVU command as the user that installed Oracle Clusterware to check cluster integrity. This command verifies that any number of specified nodes has been successfully added to the cluster at the network, shared storage, and clusterware levels:</p>
<pre dir="ltr">$ cluvfy stage -post nodeadd -n node3 [-verbose]
</pre>
<div class="infoboxnotealso" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-529FE54B-77D5-4C7A-A009-C31EF869B0C4">
<p class="notep1">See Also:</p>
<p><code class="codeph"><span class="q">&#34;<a href="GUID-5931A0E7-568E-428B-8B06-5CFEBEDA0AD0.htm#GUID-5931A0E7-568E-428B-8B06-5CFEBEDA0AD0">cluvfy stage [-pre | -post] nodeadd</a>&#34;</span></code> for more information about this CVU command</p>
</div>
</li>
</ol>
<p>Check whether either a policy-managed or administrator-managed Oracle RAC database is configured to run on <code class="codeph">node3</code> (the newly added node). If you configured an administrator-managed Oracle RAC database, you may need to use DBCA to add an instance to the database to run on this newly added node.</p>
<div class="infoboxnotealso" id="GUID-2AE1FEE2-7A45-40E5-97CD-CF6DD91A4E8B__GUID-55F6A1CC-26D8-4D3F-A026-ED0A67989932">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink RACAD070" target="_blank" href="../RACAD/GUID-D1BDC5B3-2041-4D1B-B5B7-ACD092B66AAC.htm#RACAD070"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about using DBCA to add administrator-managed Oracle RAC database instances</p>
</li>
<li>
<p><a class="olink RACAD8316" target="_blank" href="../RACAD/GUID-A46AFF14-33F8-4379-AEC2-5A4F4FC8199E.htm#RACAD8316"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> to add an Oracle RAC database instance to the target node if you configured a policy-managed Oracle RAC database</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5560">
<tr>
<td class="cellalignment5574">
<table class="cellalignment5565">
<tr>
<td class="cellalignment5564"><a href="GUID-1965B829-795E-4977-9500-E16F1CE2A856.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5564"><a href="GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5576">
<table class="cellalignment5563">
<tr>
<td class="cellalignment5564"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5564"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5564"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5564"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5564"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5564"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>