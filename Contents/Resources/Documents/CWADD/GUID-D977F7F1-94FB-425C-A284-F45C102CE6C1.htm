<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-4747"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Restoring%20Voting%20Files"></a><title>Restoring Voting Files</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-14T14:47:18Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Clusterware Administration and Deployment Guide"/>
<meta name="dcterms.identifier" content="E48819-11"/>
<meta name="dcterms.isVersionOf" content="CWADD"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-6F5C4029-78F0-4A06-ADC7-70E1E2C597C8.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-044D58CA-6392-40A1-AB31-C84A2A5A5CE6.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48819-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-D977F7F1-94FB-425C-A284-F45C102CE6C1"></a> <span id="PAGE" style="display:none;">155/713</span> <!-- End Header -->
<a id="CWADD90961"></a>
<h1 id="CWADD-GUID-D977F7F1-94FB-425C-A284-F45C102CE6C1" class="sect1">Restoring Voting Files</h1>
<div>
<div class="section">
<p><a id="d37464e99" class="indexterm-anchor"></a>If all of the voting files are corrupted, then you can restore them, as follows:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Restore OCR as described in <span class="q">&#34;<a href="GUID-648BB199-AFB9-416A-8438-E0331C255E78.htm">Restoring Oracle Cluster Registry</a>&#34;</span>, if necessary.</span>
<div>
<p>This step is necessary only if OCR is also corrupted or otherwise unavailable, such as if OCR is on Oracle ASM and the disk group is no longer available.</p>
<div class="infoboxnotealso" id="GUID-D977F7F1-94FB-425C-A284-F45C102CE6C1__GUID-9F3BDACE-2D0A-4771-83C4-DEFBFEEF76AC">
<p class="notep1">See Also:</p>
<p><a class="olink OSTMG137" target="_blank" href="../OSTMG/GUID-C455CEB1-0FC3-4DF4-9CD4-25EFA4D2BE01.htm#OSTMG137"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for more information about managing Oracle ASM disk groups</p>
</div>
</div>
</li>
<li class="stepexpand"><span>Run the following command as <code class="codeph">root</code> from only one node to start the Oracle Clusterware stack in exclusive mode, which does not require voting files to be present or usable:</span>
<div>
<pre dir="ltr"># crsctl start crs -excl
</pre></div>
</li>
<li class="stepexpand"><span>Run the <code class="codeph">crsctl query css votedisk</code> command to retrieve the list of voting files currently defined, similar to the following:</span>
<div>
<pre dir="ltr">$ crsctl query css votedisk
--  -----    -----------------                --------- ---------
##  STATE    File Universal Id                File Name Disk group
 1. ONLINE   6f57843d89464c46ea747362e8a3fa43 (/dev/sdb1) [DATA]
 2. ONLINE   7c54856e98474f61bf349401e7c9fb95 (/dev/sdc1) [DATA]
 3. ONLINE   9c46232b76234f61fc934673d5c8ec59 (/dev/sdd1) [DATA]
</pre>
<p>This list may be empty if all voting files were corrupted, or may have entries that are marked as status <code class="codeph">3</code> or <code class="codeph">OFF</code>.</p>
</div>
</li>
<li class="stepexpand"><span>Depending on where you store your voting files, do one of the following:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>If the voting files are stored in Oracle ASM, then run the following command to migrate the voting files to the Oracle ASM disk group you specify:</p>
<pre dir="ltr">crsctl replace votedisk +<span class="italic">asm_disk_group</span>
</pre>
<p>The Oracle ASM disk group to which you migrate the voting files must exist in Oracle ASM. You can use this command whether the voting files were stored in Oracle ASM or some other storage device.</p>
</li>
<li>
<p>If you did not store voting files in Oracle ASM, then run the following command using the File Universal Identifier (FUID) obtained in the previous step:</p>
<pre dir="ltr">$ crsctl delete css votedisk <span class="italic">FUID</span>
</pre>
<p>Add a voting file, as follows:</p>
<pre dir="ltr">$ crsctl add css votedisk <span class="italic">path_to_voting_disk</span>
</pre></li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Stop the Oracle Clusterware stack as <code class="codeph">root</code>:</span>
<div>
<pre dir="ltr"># crsctl stop crs
</pre>
<div class="infobox-note" id="GUID-D977F7F1-94FB-425C-A284-F45C102CE6C1__GUID-E8268B76-35CA-4299-8D0A-98A6C11A1637">
<p class="notep1">Note:</p>
<p>If the Oracle Clusterware stack is running in exclusive mode, then use the <code class="codeph">-f</code> option to force the shutdown of the stack.</p>
</div>
</div>
</li>
<li class="stepexpand"><span>Restart the Oracle Clusterware stack in normal mode as <code class="codeph">root</code>:</span>
<div>
<pre dir="ltr"># crsctl start crs
</pre></div>
</li>
</ol>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5560">
<tr>
<td class="cellalignment5574">
<table class="cellalignment5565">
<tr>
<td class="cellalignment5564"><a href="GUID-6F5C4029-78F0-4A06-ADC7-70E1E2C597C8.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5564"><a href="GUID-044D58CA-6392-40A1-AB31-C84A2A5A5CE6.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5576">
<table class="cellalignment5563">
<tr>
<td class="cellalignment5564"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5564"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5564"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5564"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5564"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5564"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>