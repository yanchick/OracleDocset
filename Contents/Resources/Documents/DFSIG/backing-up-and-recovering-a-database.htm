<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-5342"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Backing%20Up%20and%20Recovering%20a%20Database"></a><title>Backing Up and Recovering a Database</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="Recovering Databases, Database, recovering, Recovery Manager"/>
<meta name="dcterms.created" content="2017-01-22T21:16:43Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Installation and Administration Guide"/>
<meta name="dcterms.identifier" content="E67706-02"/>
<meta name="dcterms.isVersionOf" content="DFSIG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="oracle-database-utilities.htm" title="Previous" type="text/html"/>
<link rel="Next" href="unified-auditing.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E67706-02.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-E6E3479F-060F-4F45-B910-FFF09BAF032E"></a> <span id="PAGE" style="display:none;">14/30</span> <!-- End Header -->
<a id="DFSIG212"></a>
<h1 id="DFSIG-GUID-E6E3479F-060F-4F45-B910-FFF09BAF032E" class="sect1"><span class="enumeration_chapter">7</span> Backing Up and Recovering a Database</h1>
<div>
<p>This chapter supplements the generic Oracle Database documentation set with information about backup and recovery. It includes the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="backing-up-and-recovering-a-database.htm#GUID-3BEA1A0C-F4AB-4CCB-BA14-38DFE2A6DAAC">Backing Up an Oracle Database</a></p>
</li>
<li>
<p><a href="backing-up-and-recovering-a-database.htm#GUID-D0253D27-07DE-4C52-9CB2-3D13522710E5">Restoring an Oracle Database</a></p>
</li>
<li>
<p><a href="backing-up-and-recovering-a-database.htm#GUID-BF8DEA63-38FB-439D-ACFB-AAE1FCE6838B">About Using the Recovery Manager</a></p>
</li>
</ul>
<p>Refer to the following Oracle manuals for detailed information about database backup and recovery:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink CNCPT001" target="_blank" href="../CNCPT/intro.htm#CNCPT001"><span><cite>Oracle Database Concepts</cite></span></a></p>
</li>
<li>
<p><a class="olink ADMIN001" target="_blank" href="../ADMIN/dba.htm#ADMIN001"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a></p>
</li>
<li>
<p><a class="olink BRADV8001" target="_blank" href="../BRADV/rcmintro.htm#BRADV8001"><span><cite>Oracle Database Backup and Recovery User&rsquo;s Guide</cite></span></a></p>
</li>
</ul>
<p>You can choose among many methods and Oracle tools for backup and recovery. You may use the Import and Export Utilities for logical backup and recovery. For physical backup and recovery you may use Recovery Manager (RMAN) or operating system utilities.</p>
<p>This chapter describes some BS2000 specific issues if you apply user-managed backup and recovery with SQL*Plus and BS2000 utilities.</p>
<div class="infoboxnotealso" id="GUID-E6E3479F-060F-4F45-B910-FFF09BAF032E__GUID-245C84FA-D629-48C0-9189-DE193C8FE6B7">
<p class="notep1">See Also:</p>
<span class="q">&#34;<a href="backing-up-and-recovering-a-database.htm#GUID-C82A5A45-CB2C-436D-B04D-C0CC361B2979">Performing Online Backup</a>&#34;</span> for information about RMAN on BS2000</div>
</div>
<a id="DFSIG420"></a>
<div class="props_rev_3"><a id="GUID-3BEA1A0C-F4AB-4CCB-BA14-38DFE2A6DAAC"></a>
<h2 id="DFSIG-GUID-3BEA1A0C-F4AB-4CCB-BA14-38DFE2A6DAAC" class="sect2">Backing Up an Oracle Database</h2>
<div>
<p>You can use one of the following methods to back up an Oracle Database:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="backing-up-and-recovering-a-database.htm#GUID-FC787DCE-10DC-42E7-9B98-58335FC28F48">Using BS2000 Utilities to Back Up an Oracle Database</a></p>
</li>
<li>
<p><a href="backing-up-and-recovering-a-database.htm#GUID-C82A5A45-CB2C-436D-B04D-C0CC361B2979">Performing Online Backup</a></p>
</li>
</ul>
</div>
<a id="DFSIG215"></a>
<div class="props_rev_3"><a id="GUID-FC787DCE-10DC-42E7-9B98-58335FC28F48"></a>
<h3 id="DFSIG-GUID-FC787DCE-10DC-42E7-9B98-58335FC28F48" class="sect3">Using BS2000 Utilities to Back Up an Oracle Database</h3>
<div>
<div class="section">
<p>You can back up an Oracle database using BS2000 operating system utilities (for example, <code>ARCHIVE</code> or the <code>/COPY-FILE</code> command).</p>
<p>Use the following steps to back up an Oracle database:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>While the database is running, collect the names of all the files, which make up Oracle Database. You can determine the names of the log and database files by entering the following commands:</span>
<div>
<pre dir="ltr">/START-EXECUTABLE (*LINK(ORALOAD),SQLPLUS)
* /NOLOG
SQL&gt; CONNECT / AS SYSDBA
SQL&gt; SELECT * FROM V$DATAFILE;
SQL&gt; SELECT * FROM V$LOGFILE;
</pre></div>
</li>
<li class="stepexpand"><span>To ensure that all Oracle database files are synchronized at the time of the backup, shut down Oracle database using SQL*Plus.</span></li>
<li class="stepexpand"><span>Back up all the database files and log files using the BS2000 <code>ARCHIVE</code> utility or the BS2000 <code>/COPY-FILE</code> command. You should always back up all the files at the same time.</span></li>
<li class="stepexpand"><span>Restart Oracle Database using SQL*Plus.</span></li>
</ol>
</div>
</div>
<a id="DFSIG216"></a>
<div class="props_rev_3"><a id="GUID-C82A5A45-CB2C-436D-B04D-C0CC361B2979"></a>
<h3 id="DFSIG-GUID-C82A5A45-CB2C-436D-B04D-C0CC361B2979" class="sect3">Performing Online Backup</h3>
<div>
<div class="section">
<p>You can perform an online backup of the database or individual tablespaces by using either:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>The BS2000 <code>ARCHIVE</code> utility together with Oracle Database <code>INSTALL.C.OPNBACK</code> utility.</p>
</li>
<li>
<p>The BS2000 <code>PERCON</code> utility.</p>
</li>
</ul>
<p>The <code>ARCHIVE</code> method is faster, and is described in this section.</p>
<p>Before you can perform an online (hot) backup of individual tablespaces, you must ensure that the <code>ARCHIVE</code> utility can back up open files.</p>
<p>The following BS2000 command ensures that <code>ARCHIVE</code> can back up all open files:</p>
<pre dir="ltr">/START-EXECUTABLE $ORACINST.INSTALL.C.OPNBACK
*<span class="italic">filename</span>
</pre>
<p>The <code>INSTALL.C.OPNBACK</code> utility calls the BS2000 macro <code>CATAL</code>, which sets the <code>OPNBACK</code> file attribute to <code>YES</code>. For the <code>CATAL</code> macro to work, the database must be shut down or the tablespace in question must be offline. You enter this command once for each file. For example, before adding it to a tablespace, not on the occasion of each backup.</p>
<p>You must never back up database files online without first setting the tablespace to backup mode. If you do not follow this step, then the resulting backup files are inconsistent. To perform an online backup of individual tablespaces or data files, use the following procedure:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Enter the following command:</span>
<div>
<pre dir="ltr">SQL&gt; ALTER TABLESPACE name BEGIN BACKUP;
</pre></div>
</li>
<li class="stepexpand"><span>Back up the files of the tablespace using the BS2000 <code>ARCHIVE</code> utility. Ensure that the <code>OLS</code> parameter of <code>ARCHIVE</code> is set to <code>YES</code>.</span></li>
<li class="stepexpand"><span>Enter the following command:</span>
<div>
<pre dir="ltr">SQL&gt; ALTER TABLESPACE name END BACKUP;
</pre></div>
</li>
</ol>
<div class="section">
<div class="infobox-note" id="GUID-C82A5A45-CB2C-436D-B04D-C0CC361B2979__GUID-5C985696-9CC3-4B28-9FF8-4B75D0D181EE">
<p class="notep1">Note:</p>
<p>The preceding SQL*Plus commands operate on tablespaces, while the <code>ARCHIVE</code> utility operates on data files.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="DFSIG217"></a>
<div class="props_rev_3"><a id="GUID-D0253D27-07DE-4C52-9CB2-3D13522710E5"></a>
<h2 id="DFSIG-GUID-D0253D27-07DE-4C52-9CB2-3D13522710E5" class="sect2">Restoring an Oracle Database</h2>
<div>
<div class="section">
<p>An Oracle Database can be restored offline from backups, using the following steps:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Copy all the database files and the log files from the backup. You may use the BS2000 <code>ARCHIVE</code> utility or the BS2000 <code>/COPY-FILE</code> command. Files must be restored with their original name.</span>
<div>
<p>To determine the name of all data files, query the <code>V$DATAFILE</code> table while the Oracle database is running. Enter the following command when the SQL prompt is displayed:</p>
<pre dir="ltr">SQL&gt; SELECT FILE#,NAME FROM V$DATAFILE;
</pre>
<p>The following is an example of the result that is displayed:</p>
<pre dir="ltr">FILE#  NAME
------  -------------------------
1     :pvs:$dbauserid.<span class="italic">sid</span>.DBS.DATABASE1.DBF
2     :pvs:$dbauserid.<span class="italic">sid</span>.DBS.DATABASE2.DBF
 
2 ROWS SELECTED. 
</pre>
<p>You can determine the name of the log files in a similar way:</p>
<pre dir="ltr">SQL&gt; SELECT GROUP#,MEMBER FROM V$LOGFILE;
</pre>
<p>The following is an example of the result that is displayed:</p>
<pre dir="ltr">GROUP# MEMBER
------  -------------------------
1         :pvs:$dbauserid.<span class="italic">sid</span>.DBS.LOG1.DBF
2         :pvs:$dbauserid.<span class="italic">sid</span>.DBS.LOG2.DBF
 
2 ROWS SELECTED. 
</pre></div>
</li>
<li class="stepexpand"><span>Under the DBA user ID, ensure that the <code>ORA</code><span class="italic"><code>SID</code></span> environment variable identifies the Oracle Database, which is to be restored.</span></li>
<li class="stepexpand"><span>Use the SQL*Plus <code>STARTUP</code> command to start the Oracle database.</span></li>
</ol>
</div>
</div>
<div class="sect2"><a id="GUID-BF8DEA63-38FB-439D-ACFB-AAE1FCE6838B"></a>
<h2 id="DFSIG-GUID-BF8DEA63-38FB-439D-ACFB-AAE1FCE6838B" class="sect2">About Using the Recovery Manager</h2>
<div>
<p>In addition to the BS2000 utilities, you can also use Oracle Recovery Manager (RMAN) to back up and restore a database.</p>
<div class="infoboxnotealso" id="GUID-BF8DEA63-38FB-439D-ACFB-AAE1FCE6838B__GUID-7B819523-4B82-4EAB-93B9-73B3553E90F4">
<p class="notep1">See Also:</p>
<span class="q">&#34;<a href="oracle-database-utilities.htm#GUID-95874C71-3E51-47A9-AC26-8C4B072CC49B">Recovery Manager on BS2000</a>&#34;</span> for more information</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4264">
<tr>
<td class="cellalignment4271">
<table class="cellalignment4269">
<tr>
<td class="cellalignment4268"><a href="oracle-database-utilities.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4268"><a href="unified-auditing.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4273">
<table class="cellalignment4267">
<tr>
<td class="cellalignment4268"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4268"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4268"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4268"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4268"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4268"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>