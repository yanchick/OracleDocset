<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-106584"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Managing%20User%20Privileges"></a><title>Managing User Privileges</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="A user privilege enables users to perform certain actions, such as creating other user accounts or modifying database tables."/>
<meta name="keywords" content="privileges, about, principle of least privilege, least privilege principle, guidelines for security, privileges, granting, system privileges, object privileges, SYSTEM and OBJECT, roles, granting to users, roles, create your own, CONNECT role, privilege available to, CONNECT, CREATE SESSION statement, job responsibility privileges only, CREATE DATABASE LINK statement, CREATE DATABASE LINK statement, SCOTT user, restricting privileges of, user accounts, predefined, SCOTT, secure application roles, sensitive data, advantages, components, tutorial, tutorials, examples, system administrator, administrative accounts, security administrator, separation of duty concepts, exceptions, WHEN NO_DATA_FOUND example, errors, WHEN NO_DATA_FOUND exception example, invoker&rsquo;s rights, AUTHID CURRENT USER invoker&rsquo;s rights clause, troubleshooting, checking trace files, trace files, checking for errors, initialization parameters, OS_ROLES, MAX_ENABLED_ROLES, REMOTE_OS_ROLES, SQL92_SECURITY"/>
<meta name="dcterms.created" content="2017-06-16T10:04:00Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database 2 Day + Security Guide"/>
<meta name="dcterms.identifier" content="E17609-26"/>
<meta name="dcterms.isVersionOf" content="TDPSG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17609-26.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED"></a> <span id="PAGE" style="display:none;">8/15</span> <!-- End Header -->
<a id="TDPSG30000"></a>
<h1 id="TDPSG-GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED" class="sect1"><span class="enumeration_chapter">3</span> Managing User Privileges</h1>
<div>
<p>A user privilege enables users to perform certain actions, such as creating other user accounts or modifying database tables.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-E63CC989-7760-4ECF-9CE8-05905CDBB3AB" title="You can control user privileges in a variety of ways.">About Privilege Management</a></p>
</li>
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-58FC80CC-CA24-4456-B545-AC28D2B8F14C" title="Because privileges are the rights to perform a specific action, such as updating or deleting a table, do not provide database users more privileges than are necessary.">When to Grant Privileges to Users</a></p>
</li>
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-B041746D-546C-4835-A20A-5A04443E0A4F" title="A role is a named group of related privileges that you grant, as a group, to users or other roles.">When to Grant Roles to Users</a></p>
</li>
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-B779D8DB-48E6-4268-9B87-20E49122E87E" title="A secure application role is a role that can be enabled only by an authorized PL/SQL package. The PL/SQL package itself reflects the security policies necessary to control access to the application.">Controlling Access to Applications with Secure Application Roles</a></p>
</li>
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-2B55BB3C-3642-42DA-9EF3-29E0D8FFFD1B" title="Oracle Database provides a set of initialization parameters for configuring privilege security.">Initialization Parameters Used for Privilege Security</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED__GUID-B25924F4-BE77-4EC8-882C-D737A3026260">
<p class="notep1">See Also:</p>
<a class="olink DBSEG004" target="_blank" href="../DBSEG/authorization.htm#DBSEG004"><span><cite>Oracle Database Security Guide</cite></span></a></div>
</div>
<a id="TDPSG30031"></a>
<div class="props_rev_3"><a id="GUID-E63CC989-7760-4ECF-9CE8-05905CDBB3AB"></a>
<h2 id="TDPSG-GUID-E63CC989-7760-4ECF-9CE8-05905CDBB3AB" class="sect2">About Privilege Management</h2>
<div>
<p>You can control user privileges in a variety of ways.</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Granting and revoking individual privileges.</span> You can grant individual privileges, for example, the privilege to perform the <code class="codeph">UPDATE</code> SQL statement, to individual users or to groups of users.</p>
</li>
<li>
<p><span class="bold">Creating a role and assigning privileges to it.</span> A role is a named group of related privileges that you grant, as a group, to users or other roles.</p>
</li>
<li>
<p><span class="bold">Creating a secure application role.</span> A secure application role enables you to define conditions that control when a database role can be enabled. For example, a secure application role can check the IP address associated with a user session before allowing the session to enable a database role.</p>
</li>
</ul>
</div>
</div>
<a id="TDPSG30033"></a>
<div class="props_rev_3"><a id="GUID-58FC80CC-CA24-4456-B545-AC28D2B8F14C"></a>
<h2 id="TDPSG-GUID-58FC80CC-CA24-4456-B545-AC28D2B8F14C" class="sect2">When to Grant Privileges to Users</h2>
<div>
<p>Because privileges are the rights to perform a specific action, such as updating or deleting a table, do not provide database users more privileges than are necessary.</p>
<p>For an introduction to managing user privileges and roles, see <a class="olink ADMQS12001" target="_blank" href="../ADMQS/GUID-289A4BF6-F703-4ED5-8357-89F651A6D1DE.htm#ADMQS12001"><span><cite>Oracle Database 2 Day DBA</cite></span></a>. <a class="olink ADMQS12040" target="_blank" href="../ADMQS/GUID-D44F6873-123C-480E-AF2D-20A4670DA70A.htm#ADMQS12040"><span><cite>Oracle Database 2 Day DBA</cite></span></a> also provides an example of how to grant a privilege.</p>
<p>In other words, the <span class="italic">principle of least privilege</span> is that users be given only those privileges that are actually required to efficiently perform their jobs. To implement this principle, restrict the following as much as possible:</p>
<ul style="list-style-type: disc;">
<li>
<p>The number of system and object privileges granted to database users</p>
</li>
<li>
<p>The number of people who are allowed to make <code class="codeph">SYS</code>-privileged connections to the database</p>
</li>
</ul>
<p>For example, generally the <code class="codeph">CREATE ANY TABLE</code> privilege is not granted to a user who does not have database administrator privileges.</p>
<p>You can find excessive system and object privilege grants, even with large numbers of user accounts in complex Oracle Database installations, by creating a privilege analysis policy. A privilege analysis policy finds privilege usage according to a specified condition and then stores the results in data dictionary views.<a class="olink DVADM591" target="_blank" href="../DVADM/priv_analysis.htm#DVADM591"><span><cite>Oracle Database Vault Administrator&rsquo;s Guide</cite></span></a> describes how to create a privilege analysis policy.</p>
</div>
</div>
<a id="TDPSG30038"></a>
<div class="props_rev_3"><a id="GUID-B041746D-546C-4835-A20A-5A04443E0A4F"></a>
<h2 id="TDPSG-GUID-B041746D-546C-4835-A20A-5A04443E0A4F" class="sect2">When to Grant Roles to Users</h2>
<div>
<p>A role is a named group of related privileges that you grant, as a group, to users or other roles.</p>
<p>To learn the fundamentals of managing roles, see <a class="olink ADMQS072" target="_blank" href="../ADMQS/GUID-3E6BB467-5BCC-4757-A3FC-B38644B20CD7.htm#ADMQS072"><span class="italic">Oracle Database 2 Day DBA</span></a>. In addition, see <a class="olink ADMQS0725" target="_blank" href="../ADMQS/GUID-B426D316-B77A-4BAB-88AF-305B60B724BF.htm#ADMQS0725"><span class="italic">Oracle Database 2 Day DBA</span></a> for an example of creating a role.</p>
<p>Roles are useful for quickly and easily granting permissions to users. Although you can use Oracle Database-defined roles, you have more control and continuity if you create your own roles that contain only the privileges pertaining to your requirements. Oracle may change or remove the privileges in an Oracle Database-defined role, as it has with the <code class="codeph">CONNECT</code> role, which now has only the <code class="codeph">CREATE SESSION</code> privilege. Formerly, this role had eight other privileges.</p>
<p>Ensure that the roles you define contain only the privileges required for the responsibility of a particular job. If your application users do not need all the privileges encompassed by an existing role, then apply a different set of roles that supply just the correct privileges. Alternatively, create and assign a more restrictive role.</p>
<p>Do not grant powerful privileges, such as the <code class="codeph">CREATE DATABASE LINK</code> privilege, to regular users such as user <code class="codeph">SCOTT</code>. (Particularly do not grant <span class="italic">any</span> powerful privileges to <code class="codeph">SCOTT</code>, because this is a well known default user account that may be vulnerable to intruders.) Instead, grant the privilege to a database role, and then grant this role to the users who must use the privilege. And remember to only grant the minimum privileges the user needs.</p>
</div>
</div>
<a id="TDPSG30032"></a>
<div class="props_rev_3"><a id="GUID-B779D8DB-48E6-4268-9B87-20E49122E87E"></a>
<h2 id="TDPSG-GUID-B779D8DB-48E6-4268-9B87-20E49122E87E" class="sect2">Controlling Access to Applications with Secure Application Roles</h2>
<div>
<p>A secure application role is a role that can be enabled only by an authorized PL/SQL package. The PL/SQL package itself reflects the security policies necessary to control access to the application.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-D55A1A00-FF73-486B-9BF7-F2E8D4990A13" title="A secure application role is a role that can be enabled only by an authorized PL/SQL package.">About Secure Application Roles</a></p>
</li>
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-A186FD93-91E2-42A0-8F21-DB15BD925F4A" title="This tutorial shows how two employees, Matthew Weiss and Winston Taylor, try to gain information from the OE.ORDERS table.">Tutorial: Creating a Secure Application Role</a></p>
</li>
</ul>
</div>
<a id="TDPSG30321"></a>
<div class="props_rev_3"><a id="GUID-D55A1A00-FF73-486B-9BF7-F2E8D4990A13"></a>
<h3 id="TDPSG-GUID-D55A1A00-FF73-486B-9BF7-F2E8D4990A13" class="sect3">About Secure Application Roles</h3>
<div>
<p>A secure application role is a role that can be enabled only by an authorized PL/SQL package.</p>
<p>This package defines one or more security policies that control access to the application. Both the role and the package are typically created in the schema of the person who creates them, which is typically a security administrator. A security administrator is a database administrator who is responsible for maintaining the security of the database.</p>
<p>The advantage of using a secure application role is you can create additional layers of security for application access, in addition to the privileges that were granted to the role itself. Secure application roles strengthen security because passwords are not embedded in application source code or stored in a table. This way, the decisions the database makes are based on the implementation of your security policies. Because these definitions are stored in one place, the database, rather than in your applications, you modify this policy once instead of modifying the policy in each application. No matter how many users connect to the database, the result is always the same, because the policy is bound to the role.</p>
<p>A secure application role has the following components:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">The secure application role itself.</span> You create the role using the <code class="codeph">CREATE ROLE</code> statement with the <code class="codeph">IDENTIFIED USING</code> clause to associate it with the PL/SQL package. Then, you grant the role the privileges you typically grant a role.</p>
</li>
<li>
<p><span class="bold">A PL/SQL package, procedure, or function associated with the secure application role.</span> The PL/SQL package sets a condition that either grants the role or denies the role to the person trying to log in to the database. You must create the PL/SQL package, procedure, or function using invoker&#39;s rights, not definer&#39;s rights. An invoker&#39;s right procedure executes with the privileges of the current user, that is, the user who invokes the procedure. This user must be granted the <code class="codeph">EXECUTE</code> privilege for the underlying objects that the PL/SQL package accesses. Invoker&#39;s rights procedures are not bound to a particular schema. They can be run by a variety of users and enable multiple users to manage their own data by using centralized application logic. To create the invoker&#39;s rights package, use the <code class="codeph">AUTHID CURRENT_USER</code> clause in the declaration section of the procedure code.</p>
<p>The PL/SQL package also must contain a <code class="codeph">SET ROLE</code> statement or <code class="codeph">DBMS_SESSION.SET_ROLE</code> call to enable (or disable) the role for the user.</p>
<p>After you create the PL/SQL package, you must grant the appropriate users the <code class="codeph">EXECUTE</code> privilege on the package.</p>
</li>
<li>
<p><span class="bold">A way to execute the PL/SQL package when the user logs on.</span> To execute the PL/SQL package, you must call it directly from the application before the user tries to use the privileges the role grants. You cannot use a logon trigger to execute the PL/SQL package automatically when the user logs on.</p>
</li>
</ul>
<p>When a user logs in to the application, the policies in the package perform the checks as needed. If the user passes the checks, then the role is granted, which enables access to the application. If the user fails the checks, then the user is prevented from accessing the application.</p>
</div>
</div>
<a id="TDPSG30323"></a>
<div class="props_rev_3"><a id="GUID-A186FD93-91E2-42A0-8F21-DB15BD925F4A"></a>
<h3 id="TDPSG-GUID-A186FD93-91E2-42A0-8F21-DB15BD925F4A" class="sect3">Tutorial: Creating a Secure Application Role</h3>
<div>
<p>This tutorial shows how two employees, Matthew Weiss and Winston Taylor, try to gain information from the <code class="codeph">OE.ORDERS</code> table.</p>
<p>Access rights to the <code class="codeph">OE.ORDERS</code> table are defined in the <code class="codeph">emp_role</code> secure application role. Matthew is Winston&#39;s manager, so Matthew, as opposed to Winston, will be able to access the information in <code class="codeph">OE.ORDERS</code>.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-48688DAC-A510-4F03-8CF5-805E678ECF11" title="Your first step is to create user accounts for Matthew and Winston.">Step 1: Create User Accounts for This Tutorial</a></p>
</li>
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-61DD01F3-6446-4677-9002-C522EDCC7298" title="For greater security, you should apply separation of duty concepts when you assign responsibilities to the system administrators on your staff.">Step 2: Create a Security Administrator Account</a></p>
</li>
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-3B8B3E20-B073-45AE-B210-9CDF8992BF65" title="A lookup view is contains a view of information from a larger table. The lookup view only contains the information that you need.">Step 3: Create a Lookup View</a></p>
</li>
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-F5973818-1FB9-4876-8D96-2CD4DB3C9DB4" title="After you create the administrative account and the lookup view, you can create the secure application role procedure.">Step 4: Create the PL/SQL Procedure to Set the Secure Application Role</a></p>
</li>
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-B2E5D58C-8FE7-4B78-9DFA-C168A36D9564" title="After you create the PL/SQL procedure to set the secure application role, you can create the emp_role secure application role.">Step 5: Create the Secure Application Role</a></p>
</li>
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-77DBA4BC-1DBC-40BD-A435-CAC089B49970" title="User OE, who owns the OE.ORDERS table, must grant the SELECT privilege for the ORDERS table to the emp_role role.">Step 6: Grant SELECT for the EMP_ROLE Role to the OE.ORDERS Table</a></p>
</li>
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-3FDDB2D0-DF13-4D4E-AC55-9F0DD7C1A964" title="At this stage, Matthew and Winston can try to access the OE.ORDERS table, but they are denied access.">Step 7: Grant the EXECUTE Privilege for the Procedure to Matthew and Winston</a></p>
</li>
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-3226ED0B-D725-4B35-BC32-3A1B7F61CE5D" title="You are ready to test the emp_role secure application role by logging on as Matthew and Winston and trying to access the OE.ORDERS table.">Step 8: Test the EMP_ROLE Secure Application Role</a></p>
</li>
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-4B8980E6-A01D-4F7D-AB38-F308ADEB9831" title="You can remove the components that you created for this tutorial if you no longer need them.">Step 9: Optionally, Remove the Components for This Tutorial</a></p>
</li>
</ul>
</div>
<a id="TDPSG33232"></a>
<div class="props_rev_3"><a id="GUID-48688DAC-A510-4F03-8CF5-805E678ECF11"></a>
<h4 id="TDPSG-GUID-48688DAC-A510-4F03-8CF5-805E678ECF11" class="sect4">Step 1: Create User Accounts for This Tutorial</h4>
<div>
<p>Your first step is to create user accounts for Matthew and Winston.</p>
<div class="section">
<p>Matthew and Winston both are sample employees in the <code class="codeph">HR.EMPLOYEES</code> table. This table provides columns for the manager ID and email address of the employees, among other information. You must create user accounts for these two employees so that they can later test the secure application role.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To create the user accounts:</p>
<ol>
<li>
<p>In Enterprise Manager, access the Database home page.</p>
<p>See <a class="olink ADMQS033" target="_blank" href="../ADMQS/GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4.htm#ADMQS033"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information.</p>
</li>
<li>
<p>Access your target database and then log in as user <code class="codeph">SYSTEM</code>.</p>
</li>
<li>
<p>From the <span class="bold">Administration</span> menu, select <span class="bold">Security</span>, then <span class="bold">Users</span>.</p>
</li>
<li>
<p>In the Users page, click <span class="bold">Create</span>.</p>
</li>
<li>
<p>In the Create User page, enter the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Name</span>: <code class="codeph">mweiss</code> (to create the user account for Matthew Weiss)</p>
</li>
<li>
<p><span class="bold">Profile</span>: <code class="codeph">DEFAULT</code></p>
</li>
<li>
<p><span class="bold">Authentication</span>: <code class="codeph">Password</code></p>
</li>
<li>
<p><span class="bold">Enter Password</span> and <span class="bold">Confirm Password</span>: Enter a password that meets the requirements in <a href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm#GUID-051F2B63-832D-4302-B5EC-B4523BF2CC23" title="For greater security, Oracle provides a set of requirements for creating passwords.">Requirements for Creating Passwords</a>.</p>
</li>
<li>
<p><span class="bold">Default Tablespace</span>: <code class="codeph">EXAMPLE</code></p>
</li>
<li>
<p><span class="bold">Temporary Tablespace</span>: <code class="codeph">TEMP</code></p>
</li>
<li>
<p><span class="bold">Status</span>: <code class="codeph">Unlocked</code></p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">System Privileges</span>.</p>
</li>
<li>
<p>Click <span class="bold">Edit List</span>.</p>
</li>
<li>
<p>In the Modify System Privileges, from the Available System Privileges lists, select the <code class="codeph">CREATE SESSION</code> privilege, and then click <span class="bold">Move</span> to move it to the Selected System Privileges list.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The Create User page appears, with <code class="codeph">CREATE SESSION</code> listed as the system privilege for user <code class="codeph">mweiss</code>.</p>
</li>
<li>
<p>Ensure that the Admin Option for <code class="codeph">CREATE SESSION</code> is not selected, and then click <span class="bold">OK</span>.</p>
</li>
<li>
<p>In the Users page, select the selection button for user <span class="bold">MWEISS</span> from the list of users, and then from the <span class="bold">Actions</span> list, select <span class="bold">Create Like</span>. Then, click <span class="bold">Go</span>.</p>
</li>
<li>
<p>In the Create User page, enter the following information to create the user account for Winston, which will be almost identical to the user account for Matthew:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Name</span>: <code class="codeph">wtaylor</code></p>
</li>
<li>
<p><span class="bold">Enter Password</span> and <span class="bold">Confirm Password</span>: Enter a password that meets the requirements in <a href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm#GUID-051F2B63-832D-4302-B5EC-B4523BF2CC23" title="For greater security, Oracle provides a set of requirements for creating passwords.">Requirements for Creating Passwords</a>.</p>
</li>
</ul>
<p>You do not need to specify the default and temporary tablespaces, or the <code class="codeph">CREATE SESSION</code> system privilege, for user <code class="codeph">wtaylor</code> because they are already specified.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p>Now both Matthew Weiss and Winston Taylor have user accounts that have identical privileges.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG33231"></a>
<div class="props_rev_3"><a id="GUID-61DD01F3-6446-4677-9002-C522EDCC7298"></a>
<h4 id="TDPSG-GUID-61DD01F3-6446-4677-9002-C522EDCC7298" class="sect4">Step 2: Create a Security Administrator Account</h4>
<div>
<p>For greater security, you should apply separation of duty concepts when you assign responsibilities to the system administrators on your staff.</p>
<div class="section">For the tutorials used in this guide, you will create and use a security administrator account called <code class="codeph">sec_admin</code>.</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To create the sec_admin security administrator account:</p>
<ol>
<li>
<p>From the <span class="bold">Administration</span> menu, select <span class="bold">Security</span>, then <span class="bold">Users</span>.</p>
<p>If the Database Login page appears, then log in as an administrative user, such as <code class="codeph">SYS</code>. User <code class="codeph">SYS</code> must log in with the <span class="bold">SYSDBA</span> role selected.</p>
</li>
<li>
<p>In the Users page, click <span class="bold">Create</span>.</p>
</li>
<li>
<p>In the Create User page, enter the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Name</span>: <code class="codeph">sec_admin</code></p>
</li>
<li>
<p><span class="bold">Profile</span>: <code class="codeph">Default</code></p>
</li>
<li>
<p><span class="bold">Authentication</span>: <code class="codeph">Password</code></p>
</li>
<li>
<p><span class="bold">Enter Password</span> and <span class="bold">Confirm Password</span>: Enter a password that meets the requirements in <a href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm#GUID-051F2B63-832D-4302-B5EC-B4523BF2CC23" title="For greater security, Oracle provides a set of requirements for creating passwords.">Requirements for Creating Passwords</a>.</p>
</li>
<li>
<p><span class="bold">Default Tablespace</span>: <code class="codeph">EXAMPLE</code></p>
</li>
<li>
<p><span class="bold">Temporary Tablespace</span>: <code class="codeph">TEMP</code></p>
</li>
<li>
<p><span class="bold">Status</span>: <code class="codeph">UNLOCKED</code></p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">System Privileges</span>.</p>
</li>
<li>
<p>Click <span class="bold">Edit List</span>.</p>
<p>The Modify System Privileges page appears.</p>
</li>
<li>
<p>In the Available System Privileges list, select the following privileges and then click <span class="bold">Move</span> to move each one to the Selected System Privileges list. (Hold down the Control key to select multiple privileges.)</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">CREATE PROCEDURE</code></p>
</li>
<li>
<p><code class="codeph">CREATE ROLE</code></p>
</li>
<li>
<p><code class="codeph">CREATE SESSION</code></p>
</li>
<li>
<p><code class="codeph">INHERIT ANY PRIVILEGES</code></p>
</li>
<li>
<p><code class="codeph">SELECT ANY DICTIONARY</code></p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The Create User page appears. Under Admin Option, do not select the boxes.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The Users page appears. User <code class="codeph">sec_admin</code> is listed in the User Name list.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG33234"></a>
<div class="props_rev_3"><a id="GUID-3B8B3E20-B073-45AE-B210-9CDF8992BF65"></a>
<h4 id="TDPSG-GUID-3B8B3E20-B073-45AE-B210-9CDF8992BF65" class="sect4">Step 3: Create a Lookup View</h4>
<div>
<p>A lookup view is contains a view of information from a larger table. The lookup view only contains the information that you need.</p>
<div class="section">
<p>The <code class="codeph">grant_emp_role</code> procedure, which you will create later in this tutorial, grants the <code class="codeph">emp_role</code> only to managers who report to Steven King, whose employee ID is 100. This information is located in the <code class="codeph">HR.EMPLOYEES</code> table. However, you should not use that table in this procedure, because it contains sensitive data such as salary information, and for it to be used, everyone will need access to it. In most real world cases, you create a lookup view that contains only the information that you need. (You could create a lookup table, but a view will reflect the most recent data.) For this tutorial, you create your own lookup view that only contains the employee names, employee IDs, and their manager IDs.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To create the HR.HR_VERIFY lookup view:</p>
<ol>
<li>
<p>In SQL*Plus, connect as user <code class="codeph">HR</code>.</p>
<pre dir="ltr">CONNECT HR
Enter password: <span class="italic">password</span>
</pre>
<p>If you receive an error message saying that <code class="codeph">HR</code> is locked, then you can unlock the account and reset its password by entering the following statements. For greater security, do not reuse the same password that was used in previous releases of Oracle Database. Enter any password that is secure, according to the password guidelines described in <a href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm#GUID-051F2B63-832D-4302-B5EC-B4523BF2CC23" title="For greater security, Oracle provides a set of requirements for creating passwords.">Requirements for Creating Passwords</a>.</p>
<pre dir="ltr">CONNECT SYSTEM
Enter password: <span class="italic">password</span>

PASSWORD HR
Changing password for HR
New password: <span class="italic">password</span>
Retype new password: <span class="italic">password</span>
Password changed.

ALTER USER HR ACCOUNT UNLOCK;

CONNECT HR
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Enter the following <code class="codeph">CREATE VIEW</code> SQL statement to create the lookup view:</p>
<pre dir="ltr">CREATE VIEW hr_verify AS 
SELECT EMPLOYEE_ID, FIRST_NAME, LAST_NAME, EMAIL, MANAGER_ID 
FROM EMPLOYEES;
</pre></li>
<li>
<p>Grant the <code class="codeph">EXECUTE</code> privilege for this view to <code class="codeph">mweiss</code>, <code class="codeph">wtaylor</code>, and <code class="codeph">sec_admin</code> by entering the following SQL statements:</p>
<pre dir="ltr">GRANT SELECT ON hr_verify TO mweiss;
GRANT SELECT ON hr_verify TO wtaylor;
GRANT SELECT ON hr_verify TO sec_admin;
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG33238"></a>
<div class="props_rev_3"><a id="GUID-F5973818-1FB9-4876-8D96-2CD4DB3C9DB4"></a>
<h4 id="TDPSG-GUID-F5973818-1FB9-4876-8D96-2CD4DB3C9DB4" class="sect4">Step 4: Create the PL/SQL Procedure to Set the Secure Application Role</h4>
<div>
<p>After you create the administrative account and the lookup view, you can create the secure application role procedure.</p>
<div class="section">
<p>In most cases, you create a package to hold the procedure, but because this is a simple tutorial that requires only one secure application role test (as defined in the procedure), you will create a procedure by itself. If you want to have a series of procedures to test for the role, then you would create them in a package. At this stage, the role does not exist, but it does not need to. You will create it in the next step.</p>
<p>A PL/SQL package defines a simple, clear interface to a set of related procedures and types that can be accessed by SQL statements. Packages also make code more reusable and easier to maintain. The advantage here for secure application roles is that you can create a group of security policies that used together present a solid security strategy designed to protect your applications. For users (or potential intruders) who fail the security policies, you can add auditing checks to the package to record the failure.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To create the secure application role procedure:</p>
<ol>
<li>
<p>In Enterprise Manager, click <span class="bold">Log Out</span> to log out of the database.</p>
</li>
<li>
<p>In the Confirmation dialog box, select <span class="bold">Logout of (Database Instance)</span> and then select the <span class="bold">Display login page after logout</span> check box. Then click <span class="bold">Logout</span>.</p>
</li>
<li>
<p>Log in as user <code class="codeph">sec_admin</code> using the <code class="codeph">NORMAL</code> role.</p>
</li>
<li>
<p>From the <span class="bold">Schema</span> menu, select <span class="bold">Programs</span>, then <span class="bold">Procedures</span>.</p>
</li>
<li>
<p>In the Procedures page, click <span class="bold">Create</span>.</p>
</li>
<li>
<p>In the Create Procedure page, enter the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Name:</span> <code class="codeph">GRANT_EMP_ROLE</code></p>
</li>
<li>
<p><span class="bold">Schema:</span> <code class="codeph">SEC_ADMIN</code></p>
</li>
<li>
<p><span class="bold">Source:</span> Delete the empty procedure code that has been provided and then enter following text to create the secure application role procedure.</p>
<pre dir="ltr">AUTHID CURRENT_USER
 AS
v_user varchar2(50); 
v_manager_id number :=1;
 BEGIN    
  v_user := lower((sys_context (&#39;userenv&#39;,&#39;session_user&#39;)));
  SELECT manager_id 
     INTO v_manager_id FROM hr.hr_verify WHERE lower(email)=v_user;
   IF v_manager_id = 100
    THEN 
     EXECUTE IMMEDIATE &#39;SET ROLE emp_role&#39;;  
    ELSE NULL; 
   END IF;        
  EXCEPTION  
   WHEN NO_DATA_FOUND THEN v_manager_id:=0;  
   DBMS_OUTPUT.PUT_LINE(v_manager_id);
END;
</pre>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">AUTHID CURRENT USER</code>: Appends the <code class="codeph">AUTHID CURRENT_USER</code> clause to the <code class="codeph">CREATE PROCEDURE</code> statement. The <code class="codeph">AUTHID CURRENT_USER</code> clause enables the invoking user to run the procedure using his or her privileges.</p>
<p>You <span class="italic">must</span> create the procedure to use invoker&#39;s rights for the procedure to work. Invoker&#39;s rights allow the user to have <code class="codeph">EXECUTE</code> privileges on all objects that the procedure accesses.</p>
<p>Roles that are enabled inside an invoker&#39;s right procedure remain in effect even after the procedure exits, but after the user exits the session, he or she no longer has the privileges associated with the secure application role. In this case, you can have a dedicated procedure that enables the role for the rest of the session.</p>
<p>Because users cannot change the security domain inside definer&#39;s rights procedures, secure application roles can only be enabled inside invoker&#39;s rights procedures.</p>
<p>See <a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-D55A1A00-FF73-486B-9BF7-F2E8D4990A13" title="A secure application role is a role that can be enabled only by an authorized PL/SQL package.">About Secure Application Roles</a> for information about the importance of creating the procedure using invoker&#39;s rights.</p>
</li>
<li>
<p><code class="codeph">v_user varchar2(50)</code>: Declares the <code class="codeph">v_user</code> variable, which will store the user session information.</p>
</li>
<li>
<p><code class="codeph">v_manager_id number :=1</code>: Declares the <code class="codeph">v_manager_id</code> variable, which will store the manager&#39;s ID of the <code class="codeph">v_user</code> user.</p>
</li>
<li>
<p><code class="codeph">v_user := lower...</code>: Retrieves the user session information for the user logging on, in this case, Matthew or Winston. To retrieve user session information, use the <code class="codeph">SYS_CONTEXT</code> SQL function with the <code class="codeph">USERENV</code> namespace attributes (&#39;<code class="codeph">userenv</code>&#39;, <span class="italic"><code class="codeph">session_attribute</code></span>), and writes this information to the <code class="codeph">v_user</code> variable.</p>
<p>The information returned by this function indicates the way in which the user was authenticated, the IP address of the client, and whether the user connected through a proxy. See <a class="olink SQLRF06117" target="_blank" href="../SQLRF/functions199.htm#SQLRF06117"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about <code class="codeph">SYS_CONTEXT</code>.</p>
</li>
<li>
<p><code class="codeph">SELECT manager_id ... INTO...</code>: Get the manager&#39;s ID of the current user. The <code class="codeph">SELECT</code> statement copies the manager ID into the <code class="codeph">v_manager_id</code> variable, and then checking the <code class="codeph">HR.HR_VERIFY</code> view for the manager ID of the current user. This example uses the employees&#39; email addresses because they are the same as their user names.</p>
</li>
<li>
<p><code class="codeph">IF ... THEN ... END IF</code>: Use an <code class="codeph">IF</code> condition to test whether the user should be granted the <code class="codeph">grant_emp_role</code> role. In this case, the test condition is whether the user reports to Matthew&#39;s manager, Steven King, whose employee number is 100. If the user reports to King, as Matthew does, then the secure application role is granted to the user. Otherwise, the role is not granted.</p>
<p>The result is that the secure application role will grant Matthew Weiss the role because he is a direct report of Steven King, but will deny the role to Winston, because he is not a direct report of Steven King.</p>
</li>
<li>
<p><code class="codeph">THEN ... ELSE NULL</code>: Within the <code class="codeph">IF</code> condition, the <code class="codeph">THEN</code> condition grants the role by executing immediately the <code class="codeph">SET ROLE</code> statement. Otherwise, the <code class="codeph">ELSE</code> condition denies the grant.</p>
</li>
<li>
<p><code class="codeph">EXCEPTION</code>: Use an <code class="codeph">EXCEPTION</code> statement to set <code class="codeph">v_manager_id</code> to <code class="codeph">0</code> if no data is found.</p>
</li>
<li>
<p><code class="codeph">DBMS_OUTPUT.PUT_LINE</code>: Copies the manager&#39;s ID, which is now <code class="codeph">0</code>, into a buffer so that it is readily available.</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<div class="infoboxnotealso" id="GUID-F5973818-1FB9-4876-8D96-2CD4DB3C9DB4__GUID-50ED5604-4EF6-43D4-B4C2-6BD4D6AA5494">
<p class="notep1">Tip:</p>
<p>If you have problems creating or running PL/SQL code, check the Oracle Database trace files. The <code class="codeph">USER_DUMP_DEST</code> initialization parameter specifies the current location of the trace files. You can find the value of this parameter by issuing <code class="codeph">SHOW PARAMETER USER_DUMP_DEST</code> in SQL*Plus. See <a class="olink ADMIN12484" target="_blank" href="../ADMIN/diag.htm#ADMIN12484"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information about trace files.</p>
</div>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG33233"></a>
<div class="props_rev_3"><a id="GUID-B2E5D58C-8FE7-4B78-9DFA-C168A36D9564"></a>
<h4 id="TDPSG-GUID-B2E5D58C-8FE7-4B78-9DFA-C168A36D9564" class="sect4">Step 5: Create the Secure Application Role</h4>
<div>
<p>After you create the PL/SQL procedure to set the secure application role, you can create the <code class="codeph">emp_role</code> secure application role.</p>
<div class="section">
<p class="subhead3">To create the secure application role:</p>
<ol>
<li>
<p>Ensure that you are still logged in as user <code class="codeph">sec_admin</code>.</p>
</li>
<li>
<p>From the <span class="bold">Administration</span> menu, select <span class="bold">Security</span>, then <span class="bold">Roles</span>.</p>
</li>
<li>
<p>In the Roles page, click <span class="bold">Create</span>.</p>
</li>
<li>
<p>In the Create Role page, enter the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Name:</span> <code class="codeph">emp_role</code></p>
</li>
<li>
<p><span class="bold">Authentication:</span> Select <span class="bold">Application</span>.</p>
<p>The page expands to show the additional prompts necessary to create the secure application role.</p>
<div class="figure" id="GUID-B2E5D58C-8FE7-4B78-9DFA-C168A36D9564__GUID-0A479DD6-6091-4FAD-8F5C-9F599C592579"><img width="660" height="211" src="img/GUID-30E75F88-8FAB-4CF7-A091-2BCE84738A85-default.gif" alt="Description of GUID-30E75F88-8FAB-4CF7-A091-2BCE84738A85-default.gif follows" title="Description of GUID-30E75F88-8FAB-4CF7-A091-2BCE84738A85-default.gif follows"/><br/>
<a href="img_text/GUID-30E75F88-8FAB-4CF7-A091-2BCE84738A85-default.htm">Description of the illustration GUID-30E75F88-8FAB-4CF7-A091-2BCE84738A85-default.gif</a></div>
<!-- class="figure" --></li>
</ul>
</li>
<li>
<p>Select the <span class="bold">Procedure</span> option.</p>
</li>
<li>
<p>In the <span class="bold">Procedure Name</span> field, enter <code class="codeph">SEC_ADMIN.GRANT_EMP_ROLE</code>.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG94436"></a>
<div class="props_rev_3"><a id="GUID-77DBA4BC-1DBC-40BD-A435-CAC089B49970"></a>
<h4 id="TDPSG-GUID-77DBA4BC-1DBC-40BD-A435-CAC089B49970" class="sect4">Step 6: Grant SELECT for the EMP_ROLE Role to the OE.ORDERS Table</h4>
<div>
<p>User <code class="codeph">OE</code>, who owns the <code class="codeph">OE.ORDERS</code> table, must grant the <code class="codeph">SELECT</code> privilege for the <code class="codeph">ORDERS</code> table to the <code class="codeph">emp_role</code> role.</p>
<div class="section">
<p>This gives anyone who has been authorized to use the <code class="codeph">emp_role</code> role the ability to select from the <code class="codeph">OE.ORDERS</code> table.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To grant the SELECT privilege for the EMP_ROLE role to the OE.ORDERS table:</p>
<ol>
<li>
<p>Connect as user <code class="codeph">OE</code>.</p>
<pre dir="ltr">CONNECT OE
Enter password: <span class="italic">password</span>
</pre>
<p>If you receive an error message saying that <code class="codeph">OE</code> is locked, then you can unlock the <code class="codeph">OE</code> account and reset its password by entering the following statements. For greater security, do not reuse the same password that was used in previous releases of Oracle Database. Enter any password that is secure, according to the password guidelines described in <a href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm#GUID-051F2B63-832D-4302-B5EC-B4523BF2CC23" title="For greater security, Oracle provides a set of requirements for creating passwords.">Requirements for Creating Passwords</a>.</p>
<pre dir="ltr">CONNECT SYSTEM
Enter password: <span class="italic">sys_password</span>

PASSWORD OE  -- <span class="italic">First, change the OE account password.</span>
Changing password for OE
New password: <span class="italic">password</span>
Retype new password: <span class="italic">password</span>
Password changed.

ALTER USER OE ACCOUNT UNLOCK; --<span class="italic"> Next, unlock the OE account.</span>
</pre>
<p>Another way to unlock a user account and create a new password is to use the following syntax:</p>
<pre dir="ltr">ALTER USER <span class="italic">account_name</span> ACCOUNT UNLOCK IDENTIFIED BY <span class="italic">new_password</span>:
</pre>
<p>Now you can connect as user <code class="codeph">OE</code>.</p>
<pre dir="ltr">CONNECT OE 
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Enter the following statement to grant the <code class="codeph">emp_role</code> role <code class="codeph">SELECT</code> privileges on the <code class="codeph">OE.ORDERS</code> table.</p>
<pre dir="ltr">GRANT SELECT ON ORDERS TO emp_role;
</pre>
<p>Do not grant the role directly to the users. The PL/SQL package will do that for you, assuming the users pass its security policies.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG33235"></a>
<div class="props_rev_3"><a id="GUID-3FDDB2D0-DF13-4D4E-AC55-9F0DD7C1A964"></a>
<h4 id="TDPSG-GUID-3FDDB2D0-DF13-4D4E-AC55-9F0DD7C1A964" class="sect4">Step 7: Grant the EXECUTE Privilege for the Procedure to Matthew and Winston</h4>
<div>
<p>At this stage, Matthew and Winston can try to access the <code class="codeph">OE.ORDERS</code> table, but they are denied access.</p>
<div class="section">
<p>The next step is to grant them the <code class="codeph">EXECUTE</code> privilege on the <code class="codeph">grant_emp_role</code> procedure, so that the <code class="codeph">grant_emp_role</code> procedure can execute, and then grant or deny access, when they try to select from the <code class="codeph">OE.ORDERS</code> table.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To grant EXECUTE privileges for the grant_emp_role procedure:</p>
<ol>
<li>
<p>In SQL*Plus, log in as user <code class="codeph">sec_admin</code>.</p>
<pre dir="ltr">connect sec_admin
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Run the following <code class="codeph">GRANT</code> SQL statements for users mweiss and wtaylor:</p>
<pre dir="ltr">GRANT EXECUTE ON grant_emp_role TO mweiss;
GRANT EXECUTE ON grant_emp_role TO wtaylor;
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG33236"></a>
<div class="props_rev_3"><a id="GUID-3226ED0B-D725-4B35-BC32-3A1B7F61CE5D"></a>
<h4 id="TDPSG-GUID-3226ED0B-D725-4B35-BC32-3A1B7F61CE5D" class="sect4">Step 8: Test the EMP_ROLE Secure Application Role</h4>
<div>
<p>You are ready to test the <code class="codeph">emp_role</code> secure application role by logging on as Matthew and Winston and trying to access the <code class="codeph">OE.ORDERS</code> table.</p>
<p>When Matthew and Winston log on, and before they issue a <code class="codeph">SELECT</code> statement on the <code class="codeph">OE.ORDERS</code> table, the <code class="codeph">grant_emp_role</code> procedure must be executed for the role verification to take place.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-F570F521-6555-4050-9E29-95B401F1D7F1" title="You can connect to the database as user mweiss using SQL*Plus.">Testing the emp_role Secure Application Role as User MWEISS</a></p>
</li>
<li>
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-5B7186F0-12C9-43A5-B2BB-4EE94739A9FD" title="Next, Winston tries to access the secure application.">Testing the emp_role Secure Application Role as User WTAYLOR</a></p>
</li>
</ul>
</div>
<a id="TDPSG94475"></a>
<div class="props_rev_3"><a id="GUID-F570F521-6555-4050-9E29-95B401F1D7F1"></a>
<h5 id="TDPSG-GUID-F570F521-6555-4050-9E29-95B401F1D7F1" class="sect5">Testing the emp_role Secure Application Role as User MWEISS</h5>
<div>
<p>You can connect to the database as user <code class="codeph">mweiss</code> using SQL*Plus.</p>
<div class="section">
<p class="subhead3">To test the emp_role secure application role as user MWEISS:</p>
<ol>
<li>
<p>In SQL*Plus, connect as user <code class="codeph">mweiss</code>.</p>
<pre dir="ltr">CONNECT mweiss
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Enter the following SQL statement to run the <code class="codeph">grant_emp_role</code> procedure:</p>
<pre dir="ltr">EXEC sec_admin.grant_emp_role;
</pre>
<p>This statement executes the <code class="codeph">grant_emp_role</code> procedure for the current session. (In a real world scenario, this statement would be automatically run when the user logs in to the application.)</p>
</li>
<li>
<p>Perform the following <code class="codeph">SELECT</code> statement on the <code class="codeph">OE.ORDERS</code> table:</p>
<pre dir="ltr">SELECT COUNT(*) FROM OE.ORDERS;
</pre>
<p>Matthew has access to the <code class="codeph">OE.ORDERS</code> table:</p>
<pre dir="ltr">  COUNT(*)
----------
       105
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG94476"></a>
<div class="props_rev_3"><a id="GUID-5B7186F0-12C9-43A5-B2BB-4EE94739A9FD"></a>
<h5 id="TDPSG-GUID-5B7186F0-12C9-43A5-B2BB-4EE94739A9FD" class="sect5">Testing the emp_role Secure Application Role as User WTAYLOR</h5>
<div>
<p>Next, Winston tries to access the secure application.</p>
<div class="section">
<p class="subhead3">To test the emp_role secure application role as user WTAYLOR:</p>
<ol>
<li>
<p>In SQL*Plus, connect as user <code class="codeph">wtaylor</code>.</p>
<pre dir="ltr">CONNECT wtaylor
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Enter the following SQL statement to run the <code class="codeph">grant_emp_role</code> procedure:</p>
<pre dir="ltr">EXEC sec_admin.grant_emp_role;
</pre>
<p>This statement executes the <code class="codeph">grant_emp_role</code> procedure for the current session.</p>
</li>
<li>
<p>Perform the following <code class="codeph">SELECT</code> statement on the <code class="codeph">OE.ORDERS</code> table:</p>
<pre dir="ltr">SELECT COUNT(*) FROM OE.ORDERS;

ERROR at line 1:
ORA-00942: table or view does not exist
</pre>
<p>Because Winston does not report directly to Steven King, he does not have access to the <code class="codeph">OE.ORDERS</code> table. He will never learn the true number of orders in the <code class="codeph">ORDERS</code> table, at least not by performing a <code class="codeph">SELECT</code> statement on it.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="TDPSG33237"></a>
<div class="props_rev_3"><a id="GUID-4B8980E6-A01D-4F7D-AB38-F308ADEB9831"></a>
<h4 id="TDPSG-GUID-4B8980E6-A01D-4F7D-AB38-F308ADEB9831" class="sect4">Step 9: Optionally, Remove the Components for This Tutorial</h4>
<div>
<p>You can remove the components that you created for this tutorial if you no longer need them.</p>
<div class="section">
<p class="subhead3">To remove the components:</p>
<ol>
<li>
<p>In SQL*Plus, connect as user <code class="codeph">SYSTEM</code>.</p>
<pre dir="ltr">CONNECT SYSTEM
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Enter the following <code class="codeph">DROP</code> statements:</p>
<pre dir="ltr">DROP USER mweiss;
DROP USER wtaylor;
</pre>
<p>Do not drop user <code class="codeph">sec_admin</code>. You will need this user account for other tutorials in this guide.</p>
</li>
<li>
<p>In SQL*Plus, connect as user <code class="codeph">sec_admin</code>.</p>
<pre dir="ltr">CONNECT sec_admin
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Enter the following <code class="codeph">DROP</code> SQL statements:</p>
<pre dir="ltr">DROP ROLE emp_role;
DROP PROCEDURE grant_emp_role;
</pre></li>
<li>
<p>Connect as user <code class="codeph">HR</code>, and then drop the <code class="codeph">HR_VERIFY</code> view.</p>
<pre dir="ltr">CONNECT HR
Enter password: <span class="italic">password</span>
DROP VIEW hr_verify;
</pre></li>
<li>
<p>Exit SQL*Plus.</p>
<pre dir="ltr">EXIT
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<a id="TDPSG94361"></a><a id="TDPSG30036"></a>
<div class="props_rev_3"><a id="GUID-2B55BB3C-3642-42DA-9EF3-29E0D8FFFD1B"></a>
<h2 id="TDPSG-GUID-2B55BB3C-3642-42DA-9EF3-29E0D8FFFD1B" class="sect2">Initialization Parameters Used for Privilege Security</h2>
<div>
<p>Oracle Database provides a set of initialization parameters for configuring privilege security.</p>
<div class="section">
<p><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-2B55BB3C-3642-42DA-9EF3-29E0D8FFFD1B__CIHJFFGB" title="Initialization Parameters Used for Privilege Security">Table 3-1</a> lists initialization parameters that you can use to secure user privileges.</p>
</div>
<!-- class="section" -->
<div class="tblformalwide" id="GUID-2B55BB3C-3642-42DA-9EF3-29E0D8FFFD1B__CIHJFFGB">
<p class="titleintable">Table 3-1 Initialization Parameters Used for Privilege Security</p>
<table class="cellalignment4057" title="Initialization Parameters Used for Privilege Security" summary="Initialization Parameters Used for Privilege Security">
<thead>
<tr class="cellalignment4041">
<th class="cellalignment4092" id="d9338e2436">Initialization Parameter</th>
<th class="cellalignment4078" id="d9338e2439">Default Setting</th>
<th class="cellalignment4093" id="d9338e2442">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4041">
<td class="cellalignment4094" id="d9338e2447" headers="d9338e2436">
<p><code class="codeph">O7_DICTIONARY_ACCESSIBILITY</code></p>
</td>
<td class="cellalignment4081" headers="d9338e2447 d9338e2439">
<p><code class="codeph">FALSE</code></p>
</td>
<td class="cellalignment4095" headers="d9338e2447 d9338e2442">
<p>Controls restrictions on <code class="codeph">SYSTEM</code> privileges. See <span class="q">&#34;<a href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm#GUID-5C88D957-4542-4F32-932D-04A497252715" title="You can protect the data dictionary by setting the O7_DICTIONARY_ACCESSIBILITY initialization parameter to FALSE.">Enabling Data Dictionary Protection</a>&#34;</span> for more information about this parameter.</p>
</td>
</tr>
<tr class="cellalignment4041">
<td class="cellalignment4094" id="d9338e2476" headers="d9338e2436">
<p><code class="codeph">OS_ROLES</code></p>
</td>
<td class="cellalignment4081" headers="d9338e2476 d9338e2439">
<p><code class="codeph">FALSE</code></p>
</td>
<td class="cellalignment4095" headers="d9338e2476 d9338e2442">
<p>Determines whether the operating system identifies and manages the roles of each user.</p>
</td>
</tr>
<tr class="cellalignment4041">
<td class="cellalignment4094" id="d9338e2488" headers="d9338e2436">
<p><code class="codeph">MAX_ENABLED_ROLES</code></p>
</td>
<td class="cellalignment4081" headers="d9338e2488 d9338e2439">
<p><code class="codeph">30</code></p>
</td>
<td class="cellalignment4095" headers="d9338e2488 d9338e2442">
<p>Specifies the maximum number of database roles that users can enable, including roles contained within other roles.</p>
</td>
</tr>
<tr class="cellalignment4041">
<td class="cellalignment4094" id="d9338e2500" headers="d9338e2436">
<p><code class="codeph">REMOTE_OS_ROLES</code></p>
</td>
<td class="cellalignment4081" headers="d9338e2500 d9338e2439">
<p><code class="codeph">FALSE</code></p>
</td>
<td class="cellalignment4095" headers="d9338e2500 d9338e2442">
<p>Specifies whether operating system roles are allowed for remote clients. The default value, <code class="codeph">FALSE</code>, causes Oracle to identify and manage roles for remote clients.</p>
</td>
</tr>
<tr class="cellalignment4041">
<td class="cellalignment4094" id="d9338e2515" headers="d9338e2436">
<p><code class="codeph">SQL92_SECURITY</code></p>
</td>
<td class="cellalignment4081" headers="d9338e2515 d9338e2439">
<p><code class="codeph">FALSE</code></p>
</td>
<td class="cellalignment4095" headers="d9338e2515 d9338e2442">
<p>Specifies whether users must be granted the <code class="codeph">SELECT</code> object privilege to execute <code class="codeph">UPDATE</code> or <code class="codeph">DELETE</code> statements.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p>To modify an initialization parameter, see <span class="q">&#34;<a href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm#GUID-A56D3BC9-D180-4E48-A8F5-24E712434D8B" title="You can use Enterprise Manager to modify the value of an initialization parameter.">Modifying the Value of an Initialization Parameter</a>&#34;</span>. For detailed information about initialization parameters, see <a class="olink REFRN" target="_blank" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> and <a class="olink ADMIN00202" target="_blank" href="../ADMIN/create.htm#ADMIN00202"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a>.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4040">
<tr>
<td class="cellalignment4054">
<table class="cellalignment4045">
<tr>
<td class="cellalignment4044"><a href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4044"><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4056">
<table class="cellalignment4043">
<tr>
<td class="cellalignment4044"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4044"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4044"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4044"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4044"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4044"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>