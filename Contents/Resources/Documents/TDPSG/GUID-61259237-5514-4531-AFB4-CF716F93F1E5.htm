<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-106580"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Encrypting%20Data%20with%20Oracle%C2%A0Transparent%C2%A0Data%C2%A0Encryption"></a><title>Encrypting Data with Oracle&nbsp;Transparent&nbsp;Data&nbsp;Encryption</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="Transparent Data Encryption enables you to disguise data in table columns and in an entire tablespace."/>
<meta name="keywords" content="encryption, components, about, reasons to encrypt, reasons not to encrypt, access control, data encryption, Transparent Data Encryption (TDE), TDE, how it works, advantages, performance effects, storage space, configuring, keystores, creating, database, checking compatibility, creating software password keystores, creating software password keystore, opening keystore, opening, closing keystore, closing, creating master encryption key, master encryption key, table columns, encrypting, tablespaces, encrypting, tablespaces, finding keystore type, finding keystore location, finding if keystore is open or closed, checking in database instances"/>
<meta name="dcterms.created" content="2017-06-16T10:04:00Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database 2 Day + Security Guide"/>
<meta name="dcterms.identifier" content="E17609-26"/>
<meta name="dcterms.isVersionOf" content="TDPSG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17609-26.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-61259237-5514-4531-AFB4-CF716F93F1E5"></a> <span id="PAGE" style="display:none;">9/15</span> <!-- End Header -->
<script>
//<![CDATA[
window.name='GUID-61259237-5514-4531-AFB4-CF716F93F1E5'
//]]>
</script> <script>
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" ><head><title>');
   
    msg.document.write('Footnote&amp;nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('');
    msg.document.write('<style> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
</script><noscript>
<p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
</noscript><a id="TDPSG94440"></a>
<h1 id="TDPSG-GUID-61259237-5514-4531-AFB4-CF716F93F1E5" class="sect1"><span class="enumeration_chapter">4</span> Encrypting Data with Oracle&nbsp;Transparent&nbsp;Data&nbsp;Encryption</h1>
<div>
<p>Transparent Data Encryption enables you to disguise data in table columns and in an entire tablespace.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-3D055E66-51CB-4C5F-880D-66482FF25DF6" title="Encrypted data is data that has been disguised so that only an authorized recipient can read it.">About Encrypting Sensitive Data</a></p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-C8698CBF-142D-45D1-8E23-ACD9749AAAAB" title="In most cases, you must encrypt sensitive data on your site to meet a regulatory compliance.">When Should You Encrypt Data?</a></p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-6232A0A3-1211-4862-AEBF-6DCC1C6B53E5" title="Transparent Data Encryption enables you to encrypt individual table columns or an entire tablespace.">How Transparent Data Encryption Works</a></p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-7D690169-ACB6-4B1F-8EE8-6A07667EA251" title="To start using Transparent Data Encryption, you must create a keystore and set a master key.">Configuring Data to Use Transparent Data Encryption</a></p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-F6847274-E8E5-4D95-BDBE-4ED36E48CCC1" title="You can query the database for the data that you have encrypted.">Checking Existing Encrypted Data</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-61259237-5514-4531-AFB4-CF716F93F1E5__GUID-24660B4C-FAD5-430E-B95B-4ED4916E27C3">
<p class="notep1">See Also:</p>
<p><a class="olink ASOAG600" target="_blank" href="../ASOAG/asopart1.htm#ASOAG600"><span class="italic">Oracle Database Advanced Security Guide</span></a> for detailed information about using tablespace encryption</p>
</div>
</div>
<a id="TDPSG40041"></a>
<div class="props_rev_3"><a id="GUID-3D055E66-51CB-4C5F-880D-66482FF25DF6"></a>
<h2 id="TDPSG-GUID-3D055E66-51CB-4C5F-880D-66482FF25DF6" class="sect2">About Encrypting Sensitive Data</h2>
<div>
<p>Encrypted data is data that has been disguised so that only an authorized recipient can read it.</p>
<p>You use encryption to protect data in a potentially unprotected environment, such as data you have placed on backup media that is sent to an offsite storage location.</p>
<p>Encrypting data includes the following components:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">An algorithm to encrypt the data.</span> Oracle Databases use the encryption algorithm to encrypt and decrypt data. Oracle Database supports several industry-standard encryption and hashing algorithms, including the Advanced Encryption Standard (AES) encryption algorithm, which has been approved by the National Institute of Standards and Technology (NIST).</p>
</li>
<li>
<p><span class="bold">A key to encrypt and decrypt data.</span> When you encrypt data, Oracle Database uses the key and plain text data as input into the encryption algorithm. Conversely, when you decrypt data, the key is used as input into the algorithm to reverse the process and retrieve the clear text data. Oracle Database uses a symmetric encryption key to perform this task, in which the same key is used to both encrypt and decrypt the data. The encryption key is stored in the data dictionary, but encrypted with another master key.</p>
</li>
</ul>
<p>You can encrypt individual table columns or an entire tablespace. Be careful that you do not mix the two. For example, suppose you encrypt a table column and then encrypt its surrounding tablespace. This double encryption can cause performance problems. In addition, column encryption has limitations in data type support, and only supports B-tree indexes for equality searches. To check the current encrypted settings, you can query the <code class="codeph">V$ENCRYPTED_TABLESPACES</code> data dictionary view for tablespaces and the <code class="codeph">DBA_ENCRYPTED_COLUMNS</code> view for encrypted columns.</p>
</div>
</div>
<a id="TDPSG40042"></a>
<div class="props_rev_3"><a id="GUID-C8698CBF-142D-45D1-8E23-ACD9749AAAAB"></a>
<h2 id="TDPSG-GUID-C8698CBF-142D-45D1-8E23-ACD9749AAAAB" class="sect2">When Should You Encrypt Data?</h2>
<div>
<p>In most cases, you must encrypt sensitive data on your site to meet a regulatory compliance.</p>
<p>For example, sensitive data such as credit card numbers, Social Security numbers, or patient health information must be encrypted.</p>
<p>Historically, users have wanted to encrypt data to restrict data access from their database administrators. However, this problem is more of an access control problem, not an encryption problem. You can address this problem by using Oracle Database Vault to control the access to your application data from database administrators.</p>
<p>In most cases, you encrypt sensitive data, such as credit cards and Social Security numbers, to prevent access when backup tapes or disk drives are lost or stolen. In recent years, industry regulations such as the Payment Card Industry (PCI) Data Security Standard and the Healthcare Insurance Portability and Accountability Act (HIPAA) have become a driving factor behind increased usage of encryption for protecting credit card and health care information, respectively.</p>
</div>
</div>
<a id="TDPSG40431"></a>
<div class="props_rev_3"><a id="GUID-6232A0A3-1211-4862-AEBF-6DCC1C6B53E5"></a>
<h2 id="TDPSG-GUID-6232A0A3-1211-4862-AEBF-6DCC1C6B53E5" class="sect2">How Transparent Data Encryption Works</h2>
<div>
<p>Transparent Data Encryption enables you to encrypt individual table columns or an entire tablespace.</p>
<p>When a user inserts data into an encrypted column, Transparent Data Encryption automatically encrypts the data. When authorized users select the column, then the data is automatically decrypted.</p>
<p>To encrypt data by using Transparent Data Encryption, you create the following components:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">A keystore to store the master encryption key.</span> The keystore is an operating system file that is located outside the database. The database uses the keystore to store the master encryption key. To create the keystore, you can use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL statement. The keystore is encrypted using a password as the encryption key. You create the password when you create the keystore. Access to the contents (or master key) of the keystore is then restricted to only those who know the password. After the keystore is created, you must open the keystore using the password so that the database can access the master encryption key.</p>
<p>You can use either software keystores or hardware keystores. A software keystore is defined in a file that you create in a directory location. The software keystore can be one of the following types:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Password-based keystores:</span> Password-based keystores are protected by using a password that you create. You must open the keystore before the keys can be retrieved or used.</p>
</li>
<li>
<p><span class="bold">Auto-login keystores:</span> Auto-login keystores are protected by a system-generated password, and do not need to be explicitly opened by a security administrator. Auto-login keystores are automatically opened when accessed. Auto-login keystores can be used across different systems. If your environment does not require the extra security provided by a keystore that must be explicitly opened for use, then you can use an auto-login keystore.</p>
</li>
<li>
<p><span class="bold">Auto-login local keystores:</span> Auto-login local keystores are auto-login keystores that are local to the system on which they are created. Auto-login local keystores cannot be opened on any computer other than the one on which they are created.</p>
</li>
</ul>
<p>A hardware keystore is used with a hardware security module, which is a physical device that is designed to provide secure storage for encryption keys. This guide explains how to configure software keystores only. For detailed information about hardware keystores, see <a class="olink ASOAG10292" target="_blank" href="../ASOAG/configuring-transparent-data-encryption.htm#ASOAG10292"><span class="italic">Oracle Database Advanced Security Guide</span></a>.</p>
</li>
<li>
<p><span class="bold">A location for the keystore.</span> You must specify the keystore location in the <code class="codeph">sqlnet.ora</code> file.</p>
</li>
</ul>
<p>Afterward, when a user enters data, Oracle Database performs the following steps:</p>
<ol>
<li>
<p>Retrieves the master key from the keystore.</p>
</li>
<li>
<p>Decrypts the encryption key using the master key.</p>
</li>
<li>
<p>Uses the encryption key to encrypt the data the user entered.</p>
</li>
<li>
<p>Stores the data in encrypted format in the database.</p>
</li>
</ol>
<p>If the user is selecting data, the process is similar: Oracle Database decrypts the data and then displays it in plain text format.</p>
<p>Transparent Data Encryption has the following benefits:</p>
<ul style="list-style-type: disc;">
<li>
<p>As a security administrator, you can be sure that sensitive data is safe if the storage media or data file is stolen or lost.</p>
</li>
<li>
<p>Implementing Transparent Data Encryption helps you address security-related regulatory compliance issues.</p>
</li>
<li>
<p>Data from tables is transparently decrypted for the database user. You do not need to create triggers or views to decrypt data.</p>
</li>
<li>
<p>Database users do not need to be aware that the data they are accessing is stored in encrypted form. Data is transparently decrypted for the database users and does not require any action on their part.</p>
</li>
<li>
<p>Applications need not be modified to handle encrypted data. Data encryption and decryption is managed by the database.</p>
</li>
</ul>
<p>Transparent Data Encryption has a minimal impact on performance. Transparent Data Encryption column encryption affects performance only when data is retrieved from or inserted into an encrypted column. There is no impact on performance for operations involving unencrypted columns, even if these columns are in a table containing encrypted columns. However, be aware that encrypted data must have more storage space than plain text data. On average, encrypting a single column requires between 32 and 48 bytes of additional storage for each row. Transparent tablespace encryption provides even better performance because Oracle Database performs the encryption and decryption at the I/O block layer. Once blocks are decrypted, they are cached in Oracle Database memory for optimal performance.</p>
<div class="infoboxnotealso" id="GUID-6232A0A3-1211-4862-AEBF-6DCC1C6B53E5__GUID-3B33B437-9DC8-4C94-B84B-414668886908">
<p class="notep1">See Also:</p>
<p><a class="olink ASOAG600" target="_blank" href="../ASOAG/asopart1.htm#ASOAG600"><span class="italic">Oracle Database Advanced Security Guide</span></a> for detailed information about using Transparent Data Encryption</p>
</div>
</div>
</div>
<a id="TDPSG40432"></a>
<div class="props_rev_3"><a id="GUID-7D690169-ACB6-4B1F-8EE8-6A07667EA251"></a>
<h2 id="TDPSG-GUID-7D690169-ACB6-4B1F-8EE8-6A07667EA251" class="sect2">Configuring Data to Use Transparent Data Encryption</h2>
<div>
<p>To start using Transparent Data Encryption, you must create a keystore and set a master key.</p>
<p>The keystore should be a separate keystore specifically used by Transparent Data Encryption. This keystore will be used for all data that is being encrypted through Transparent Data Encryption.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-F357ED80-2CE3-4021-96F4-C3FA206E4095" title="When you create a software password-based keystore, you must designate the directory location for the keystore in the sqlnet.ora file. You perform this step once.">Step 1: Configure the Keystore Location</a></p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-8F9679F0-FD6E-4E02-9450-58B8F5F3E9ED" title="If you want to configure the full set of tablespace encryption features, then you must set the COMPATIBLE initialization parameter for the database to 11.2.0.0 or later.">Step 2: Check the COMPATIBLE Initialization Parameter Setting</a></p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-E6B591CF-0A94-4BE2-BD46-2D2C1D33C9C9" title="To create the keystore, use the ADMINISTER KEY MANAGEMENT SQL statement.">Step 3: Create the Software Password-Based Keystore</a></p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-4CE7D5F7-7B12-4AEA-BDF4-5818AA6E1215" title="You can manually open and close keystores. Auto-login keystores open automatically when they are accessed.">Step 4: Open (or Close) the Keystore</a></p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-F90A7511-7C03-48B1-ABCA-1F775802D122" title="The master encryption key is stored in a keystore. It protects the table keys and tablespace encryption keys.">Step 5: Create the Master Encryption Key</a></p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-133FD428-8AB6-4ADC-859C-B441F30F66A7" title="After you have created a directory location for the keystore in the sqlnet.ora file and created the keystore and master encryption key, you are ready to encrypt either individual table columns or an entire tablespace.">Step 6: Encrypt Data</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-7D690169-ACB6-4B1F-8EE8-6A07667EA251__GUID-35F6601D-188F-44BB-999B-F8D5813FD737">
<p class="notep1">See Also:</p>
<p><a class="olink ASOAG620" target="_blank" href="../ASOAG/configuring-transparent-data-encryption.htm#ASOAG620"><span class="italic">Oracle Database Advanced Security Guide</span></a> for detailed information about using tablespace encryption</p>
</div>
</div>
<a id="TDPSG44321"></a>
<div class="props_rev_3"><a id="GUID-F357ED80-2CE3-4021-96F4-C3FA206E4095"></a>
<h3 id="TDPSG-GUID-F357ED80-2CE3-4021-96F4-C3FA206E4095" class="sect3">Step 1: Configure the Keystore Location</h3>
<div>
<p>When you create a software password-based keystore, you must designate the directory location for the keystore in the <code class="codeph">sqlnet.ora</code> file. You perform this step once.</p>
<div class="section">
<p class="subhead3">To configure the keystore location:</p>
<ol>
<li>
<p>Create a directory in the <code class="codeph">$ORACLE_HOME</code> directory to store the keystore.</p>
<p>For example, on Microsoft Windows, you could create a directory called <code class="codeph">ORA_KEYSTORES</code> in the <code class="codeph">C:\oracle\product\12.1.0\db_1</code> directory.</p>
</li>
<li>
<p>Create a backup copy of the <code class="codeph">sqlnet.ora</code> file, which by default is located in the <code class="codeph">$ORACLE_HOME/network/admin</code> directory.</p>
</li>
<li>
<p>At the end of the <code class="codeph">sqlnet.ora</code> file, add code similar to the following, where <code class="codeph">ORA_KEYSTORES</code> is the name of the directory where you plan to store the keystore:</p>
<pre dir="ltr">ENCRYPTION_WALLET_LOCATION=
 (SOURCE=
  (METHOD=file)
   (METHOD_DATA=
    (DIRECTORY=C:\oracle\product\12.1.0\db_1\ORA_KEYSTORES)))
</pre></li>
<li>
<p>Save and close the <code class="codeph">sqlnet.ora</code> file.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG94470"></a>
<div class="props_rev_3"><a id="GUID-8F9679F0-FD6E-4E02-9450-58B8F5F3E9ED"></a>
<h3 id="TDPSG-GUID-8F9679F0-FD6E-4E02-9450-58B8F5F3E9ED" class="sect3">Step 2: Check the COMPATIBLE Initialization Parameter Setting</h3>
<div>
<p>If you want to configure the full set of tablespace encryption features, then you must set the <code class="codeph">COMPATIBLE</code> initialization parameter for the database to <code class="codeph">11.2.0.0</code> or later.</p>
<div class="section">
<p>Otherwise, ensure that it is at least <code class="codeph">11.0.0.0</code>. Be aware that once you set this parameter, you cannot change it.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To set the COMPATIBLE initialization parameter:</p>
<ol>
<li>
<p>Log into the database instance.</p>
<p>For example:</p>
<pre dir="ltr">sqlplus sec_admin
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
<li>
<p>Check the current setting of the <code class="codeph">COMPATIBLE</code> parameter.</p>
<p>For example:</p>
<pre dir="ltr">SHOW PARAMETER COMPATIBLE
 
NAME                                 TYPE        VALUE
------------------------------------ ----------- -------------
compatible                           string      11.0.0.0
</pre></li>
<li>
<p>If you must change the <code class="codeph">COMPATIBLE</code> parameter, then complete the remaining steps in this procedure.</p>
<p>The value should be <code class="codeph">11.2.0.0</code> or higher.</p>
</li>
<li>
<p>Locate the initialization parameter file for the database instance.</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">UNIX systems:</span> This file is in the <span class="italic"><code class="codeph">ORACLE_HOME</code></span><code class="codeph">/dbs</code> directory and is named <code class="codeph">init</code><span class="italic"><code class="codeph">ORACLE_SID</code></span><code class="codeph">.ora</code> (for example, <code class="codeph">initmydb.ora</code>).</p>
</li>
<li>
<p><span class="bold">Windows systems:</span> This file is in the <span class="italic"><code class="codeph">ORACLE_HOME</code></span><code class="codeph">\database</code> directory and is named <code class="codeph">init</code><span class="italic"><code class="codeph">ORACLE_SID</code></span><code class="codeph">.ora</code> (for example, <code class="codeph">initmydb.ora</code>).</p>
</li>
</ul>
</li>
<li>
<p>Edit the initialization parameter file to use the correct <code class="codeph">COMPATIBLE</code> setting.</p>
<p>For example:</p>
<pre dir="ltr">COMPATIBLE = 12.0.0.0
</pre></li>
<li>
<p>In SQL*Plus, log in as a user who has the <code class="codeph">SYSDBA</code> administrative privilege.</p>
<pre dir="ltr">sqlplus sys as sysdba
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Restart the Oracle Database instance.</p>
<p>For example:</p>
<pre dir="ltr">SHUTDOWN IMMEDIATE
STARTUP
</pre></li>
<li>
<p>Do not log out of SQL*Plus.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG44322"></a>
<div class="props_rev_3"><a id="GUID-E6B591CF-0A94-4BE2-BD46-2D2C1D33C9C9"></a>
<h3 id="TDPSG-GUID-E6B591CF-0A94-4BE2-BD46-2D2C1D33C9C9" class="sect3">Step 3: Create the Software Password-Based Keystore</h3>
<div>
<p>To create the keystore, use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL statement.</p>
<div class="section">
<p>By default, the Oracle keystore stores a history of retired master keys, which enables you to change them and still be able to decrypt data that was encrypted under an old master key. A case-sensitive keystore password unknown to the database administrator provides separation of duty: a database administrator can restart the database, but the keystore is closed and must be manually opened by a security administrator before the database can encrypt or decrypt the data.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To create the keystore:</p>
<ol>
<li>
<p>In SQL*Plus, connect as a user who has been granted the <code class="codeph">SYSKM</code> administrative privilege.</p>
<p>For example:</p>
<pre dir="ltr">CONNECT psmith / AS SYSKM
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Run the following <code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL statement:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT CREATE KEYSTORE &#39;<span class="italic">keystore_location</span>&#39; IDENTIFIED BY <span class="italic">software_keystore_password</span>;
</pre>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">keystore_location</code></span> is the path to the keystore location that you defined in the <code class="codeph">sqlnet.ora</code> file (for example, <code class="codeph">oracle\product\12.1.0\db_1\ORA_KEYSTORES</code>). Enclose the <span class="italic"><code class="codeph">keystore_location</code></span> setting in single quotation marks. To find this location, query the <code class="codeph">WRL_PARAMETER</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">software_keystore_password</code></span> is a new password that you, the security administrator, creates.</p>
</li>
</ul>
<p>For example, to create the keystore in the <code class="codeph">c:\oracle\product\12.1.0\db_1\ORA_KEYSTORES</code> directory:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT CREATE KEYSTORE &#39;c:\oracle\product\12.1.0\db_1\ORA_KEYSTORES&#39; IDENTIFIED BY <span class="italic">password</span>;

keystore altered.
</pre>
<p>After you run this statement, the <code class="codeph">ewallet.p12</code> file, which contains the keystore, appears in the keystore location.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG44323"></a>
<div class="props_rev_3"><a id="GUID-4CE7D5F7-7B12-4AEA-BDF4-5818AA6E1215"></a>
<h3 id="TDPSG-GUID-4CE7D5F7-7B12-4AEA-BDF4-5818AA6E1215" class="sect3">Step 4: Open (or Close) the Keystore</h3>
<div>
<p>You can manually open and close keystores. Auto-login keystores open automatically when they are accessed.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-5BA892C8-5A20-4902-AA4D-5890AC2A1092" title="Immediately after you create a software password-based keystore, you must manually open it before you can use Transparent Data Encryption.">Opening a Keystore</a></p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-3BA5473C-3546-4734-9919-C815A1AEEC9C" title="You can close a keystore to disable access to the master key and prevent access to the encrypted columns.">Closing a Keystore</a></p>
</li>
</ul>
</div>
<div class="props_rev_3"><a id="GUID-5BA892C8-5A20-4902-AA4D-5890AC2A1092"></a>
<h4 id="TDPSG-GUID-5BA892C8-5A20-4902-AA4D-5890AC2A1092" class="sect4">Opening a Keystore</h4>
<div>
<p>Immediately after you create a software password-based keystore, you must manually open it before you can use Transparent Data Encryption.</p>
<div class="section">
<p>You do not need to open the auto-login or hardware keystores because they open automatically. You can check the status of whether a keystore is open or closed by querying the <code class="codeph">STATUS</code> column of the <code class="codeph">V$ENCRYPTION_WALLET</code> view.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To open a keystore:</p>
<ol>
<li>
<p>Ensure that you are logged into SQL*Plus as a user who has been granted the <code class="codeph">SYSKM</code> system privilege.</p>
</li>
<li>
<p>Enter the following <code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL statement:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN IDENTIFIED BY <span class="italic">software_keystore_password</span>;

keystore altered.
</pre>
<p>Replace <span class="italic"><code class="codeph">software_keystore_password</code></span> with the password that you created in <a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-E6B591CF-0A94-4BE2-BD46-2D2C1D33C9C9" title="To create the keystore, use the ADMINISTER KEY MANAGEMENT SQL statement.">Step 3: Create the Software Password-Based Keystore</a>.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<div class="props_rev_3"><a id="GUID-3BA5473C-3546-4734-9919-C815A1AEEC9C"></a>
<h4 id="TDPSG-GUID-3BA5473C-3546-4734-9919-C815A1AEEC9C" class="sect4">Closing a Keystore</h4>
<div>
<p>You can close a keystore to disable access to the master key and prevent access to the encrypted columns.</p>
<div class="section">
<p>In most cases, leave the keystore open unless you have a reason for closing it. The keystore must be open for Transparent Data Encryption to work. To reopen the keystore, use the <code class="codeph">ADMINISTER KEY MANAGEMENT</code> statement.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To close a keystore:</p>
<ol>
<li>
<p>Ensure that you are logged into SQL*Plus as a user who has been granted the <code class="codeph">SYSKM</code> system privilege.</p>
</li>
<li>
<p>Enter the following SQL statement:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE IDENTIFIED BY <span class="italic">software_keystore_password</span>;
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="TDPSG94471"></a>
<div class="props_rev_3"><a id="GUID-F90A7511-7C03-48B1-ABCA-1F775802D122"></a>
<h3 id="TDPSG-GUID-F90A7511-7C03-48B1-ABCA-1F775802D122" class="sect3">Step 5: Create the Master Encryption Key</h3>
<div>
<p>The master encryption key is stored in a keystore. It protects the table keys and tablespace encryption keys.</p>
<div class="section">
<p>By default, the master encryption key is a random key generated by Transparent Data Encryption (TDE).</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To create the master encryption key:</p>
<ol>
<li>
<p>Ensure that you are logged into SQL*Plus as a user who has been granted the <code class="codeph">SYSKM</code> system privilege.</p>
</li>
<li>
<p>Run the following <code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL statement:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT SET KEY IDENTIFIED BY <span class="italic">software_keystore_password</span> [WITH BACKUP [USING &#39;<span class="italic">backup_identifier</span>&#39;]];

keystore altered.
</pre>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">software_keystore_password</code></span> is the password that you created in <a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-E6B591CF-0A94-4BE2-BD46-2D2C1D33C9C9" title="To create the keystore, use the ADMINISTER KEY MANAGEMENT SQL statement.">Step 3: Create the Software Password-Based Keystore</a>.</p>
</li>
<li>
<p><code class="codeph">WITH BACKUP</code> creates a backup of the keystore. You must use this option for password-based keystores. You do not need to use it for auto-login or auto-login local keystores. Optionally, you can use the <code class="codeph">USING</code> clause to add a brief description of the backup. Enclose this description in double quotation marks. This identifier is appended to the named keystore file (for example, <code class="codeph">ewallet_</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">_emp_key_backup.p12</code>).</p>
</li>
</ul>
<p>For example:</p>
<pre dir="ltr">ADMINISTER KEY MANAGEMENT SET ENCRYPTION KEY IDENTIFIED BY <span class="italic">software_keystore_password</span> WITH BACKUP USING &#39;password key backup&#39;;
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG44324"></a>
<div class="sect3"><a id="GUID-133FD428-8AB6-4ADC-859C-B441F30F66A7"></a>
<h3 id="TDPSG-GUID-133FD428-8AB6-4ADC-859C-B441F30F66A7" class="sect3">Step 6: Encrypt Data</h3>
<div>
<p>After you have created a directory location for the keystore in the <code class="codeph">sqlnet.ora</code> file and created the keystore and master encryption key, you are ready to encrypt either individual table columns or an entire tablespace.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-17B731EF-D989-4E36-A6A5-F93553C11725" title="Oracle provides a set of guidelines that you should follow before you select columns to encrypt.">Encrypting Individual Table Columns</a></p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-956B2FB6-345B-4402-8D13-ED48D6357438" title="You can encrypt a new tablespace while you are creating it, but you cannot encrypt an existing tablespace.">Encrypting a Tablespace</a></p>
</li>
</ul>
</div>
<a id="TDPSG44325"></a>
<div class="sect4"><a id="GUID-17B731EF-D989-4E36-A6A5-F93553C11725"></a>
<h4 id="TDPSG-GUID-17B731EF-D989-4E36-A6A5-F93553C11725" class="sect4">Encrypting Individual Table Columns</h4>
<div>
<p>Oracle provides a set of guidelines that you should follow before you select columns to encrypt.</p>
<p>The decisions that you make when you identify columns to encrypt are determined by governmental security regulations, such as California Senate Bill 1386, or by industry standards such as the Payment Card Industry (PCI) Data Security Standard. Credit card numbers, Social Security numbers, and other personally identifiable information (PII) fall under this category. Your own internal security policies &mdash; trade secrets, research results, or employee salaries and bonuses &mdash; determine your needs for encryption. See <a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-C8698CBF-142D-45D1-8E23-ACD9749AAAAB" title="In most cases, you must encrypt sensitive data on your site to meet a regulatory compliance.">When Should You Encrypt Data?</a> for guidelines about when and when not to encrypt data.</p>
<p>Follow these guidelines when you select columns to encrypt:</p>
<ul style="list-style-type: disc;">
<li>
<div class="p"><span class="bold">Check the data types of the columns you plan to encrypt.</span> Transparent Data Encryption supports the following data types:
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">BINARY_FLOAT</code></p>
</li>
<li>
<p><code class="codeph">BINARY_DOUBLE</code></p>
</li>
<li>
<p><code class="codeph">CHAR</code></p>
</li>
<li>
<p><code class="codeph">DATE</code></p>
</li>
<li>
<p>Large object types (LOBs) such as <code class="codeph">BLOB</code> and <code class="codeph">CLOB</code><a id="fn_1" href="#fn_1" onclick="footdisplay(1,&#34;You cannot encrypt external LOBs (BFILE). &#34;)"><sup>Foot&nbsp;1</sup></a></p>
</li>
<li>
<p><code class="codeph">NCHAR</code></p>
</li>
<li>
<p><code class="codeph">NUMBER</code></p>
</li>
<li>
<p><code class="codeph">NVARCHAR2</code></p>
</li>
<li>
<p><code class="codeph">RAW</code></p>
</li>
<li>
<p><code class="codeph">TIMESTAMP</code></p>
</li>
<li>
<p><code class="codeph">VARCHAR2</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><span class="bold">Ensure that the columns you select are not part of a foreign key.</span> With Transparent Data Encryption, each table has its own encryption key, which is stored in the database data dictionary and encrypted with the external master key. Encrypted columns cannot be used as foreign keys.</p>
</li>
</ul>
<div class="section">
<p class="subhead3">To encrypt a column in a table:</p>
<ol>
<li>
<p>Ensure that you have created and opened the keystore and created a master encryption key.</p>
<p>See the following sections, if necessary:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-E6B591CF-0A94-4BE2-BD46-2D2C1D33C9C9" title="To create the keystore, use the ADMINISTER KEY MANAGEMENT SQL statement.">Step 3: Create the Software Password-Based Keystore</a> to learn how to create a keystore key</p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-4CE7D5F7-7B12-4AEA-BDF4-5818AA6E1215" title="You can manually open and close keystores. Auto-login keystores open automatically when they are accessed.">Step 4: Open (or Close) the Keystore</a> to learn how to open or a keystore</p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-F90A7511-7C03-48B1-ABCA-1F775802D122" title="The master encryption key is stored in a keystore. It protects the table keys and tablespace encryption keys.">Step 5: Create the Master Encryption Key</a> to create the master encryption key</p>
</li>
</ul>
</li>
<li>
<p>In Enterprise Manager, access the Database home page.</p>
<p>See <a class="olink ADMQS033" target="_blank" href="../ADMQS/GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4.htm#ADMQS033"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information.</p>
</li>
<li>
<p>From the <span class="bold">Schema</span> menu, select <span class="bold">Database Objects</span>, then <span class="bold">Tables</span>.</p>
<p>If the Database Login page appears, then log in as <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege.</p>
</li>
<li>
<p>In the Tables page, do one of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>To create a new table, click <span class="bold">Create</span>, and then answer the questions in the subsequent page to start creating the table.</p>
</li>
<li>
<p>To modify an existing table, search for the table name by entering its schema name into the <span class="bold">Schema</span> field and the table name in the <span class="bold">Object Name</span> field. (You can use the percent sign (%) wildcard character to search for a group of tables, for example <code class="codeph">O%</code> to find all tables beginning with the letter O.) When the table is listed in the Tables page, select the table, and then click <span class="bold">Edit</span>.</p>
</li>
</ul>
<p>In the Create Table or Edit Table page, you can set the encryption options.</p>
<p>For example, to encrypt columns in the <code class="codeph">OE.ORDERS</code> table, the Edit Table page appears as follows:</p>
<div class="figure" id="GUID-17B731EF-D989-4E36-A6A5-F93553C11725__GUID-1BB32D06-C34E-4F96-86E3-CA296B701919"><img width="983" height="543" src="img/GUID-F17BD328-465D-468D-BE69-FC16E9D72A7D-default.gif" alt="Description of GUID-F17BD328-465D-468D-BE69-FC16E9D72A7D-default.gif follows" title="Description of GUID-F17BD328-465D-468D-BE69-FC16E9D72A7D-default.gif follows"/><br/>
<a href="img_text/GUID-F17BD328-465D-468D-BE69-FC16E9D72A7D-default.htm">Description of the illustration GUID-F17BD328-465D-468D-BE69-FC16E9D72A7D-default.gif</a></div>
<!-- class="figure" --></li>
<li>
<p>In the Create Table (or Edit Table) page, do the following:</p>
<ol>
<li>
<p>Select the column that you want to encrypt.</p>
<p>Do not select columns that are part of a foreign key constraint (primary or unique key columns). You cannot encrypt these columns. These columns are indicated with a key or check mark icon to the left of their names.</p>
</li>
<li>
<p>Click <span class="bold">Encryption Options</span> to display the Encryption Options for the Table page.</p>
</li>
<li>
<p>From the Encryption Algorithm list, select from the following options:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">AES192</span>: Sets the key length to 192 bits. AES is the abbreviation for Advanced Encryption Standard.</p>
</li>
<li>
<p><span class="bold">3DES168</span>: Sets the key length to 168 bits. 3DES is the abbreviation for Triple Data Encryption Standard.</p>
</li>
<li>
<p><span class="bold">AES128</span>: Sets the key length to 128 bits. This option is the default.</p>
</li>
<li>
<p><span class="bold">AES256</span>: Sets the key length to 256 bits.</p>
</li>
</ul>
</li>
<li>
<p>Under Key Generation, select either <span class="bold">Generate Key Randomly</span> or <span class="bold">Specify Key</span>. If you select <span class="bold">Specify Key</span>, enter characters for the seed values in the <span class="bold">Enter Key</span> and <span class="bold">Confirm Key</span> fields.</p>
<p>The <span class="bold">Generate Key Randomly</span> setting enables salt. <span class="bold">Salt</span> is a way to strengthen the security of encrypted data. It is a random string added to the data before it is encrypted, causing the same text to appear different when encrypted. Salt removes one method attackers use to steal data, namely, matching patterns of encrypted text.</p>
</li>
<li>
<p>Click <span class="bold">Continue</span> to return to the Create Table (or Edit Table) page.</p>
</li>
<li>
<p>Enable encryption for the column by selecting its box under <span class="bold">Encrypted</span>.</p>
</li>
</ol>
</li>
<li>
<p>Click <span class="bold">Apply</span>, and then click <span class="bold">Return</span>.</p>
<p>The Tables page appears.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<p>While a table is being updated, read access is still possible. Afterward, existing and future data in the column is encrypted when it is written to the database file, and it is decrypted when an authorized user selects it. If data manipulation language (DML) statements are needed, you can use online redefinition statements.</p>
</div>
</div>
<a id="TDPSG44326"></a>
<div class="sect4"><a id="GUID-956B2FB6-345B-4402-8D13-ED48D6357438"></a>
<h4 id="TDPSG-GUID-956B2FB6-345B-4402-8D13-ED48D6357438" class="sect4">Encrypting a Tablespace</h4>
<div>
<p>You can encrypt a new tablespace while you are creating it, but you cannot encrypt an existing tablespace.</p>
<p>As a workaround, you can use the <code class="codeph">CREATE TABLE AS SELECT</code>, <code class="codeph">ALTER TABLE MOVE</code>, or use Oracle Data Pump import to get data from an existing tablespace into an encrypted tablespace. For details about creating a tablespace, see <a class="olink ADMQS0622" target="_blank" href="../ADMQS/GUID-6349728A-F12C-4B84-8C86-8A23E80F398C.htm#ADMQS0622"><span><cite>Oracle Database 2 Day DBA</cite></span></a>.</p>
<div class="section">
<p class="subhead3">To encrypt a tablespace:</p>
<ol>
<li>
<p>Ensure that you have created and opened the keystore, as described in the preceding steps of this section.</p>
</li>
<li>
<p>In Enterprise Manager, access the Database home page.</p>
<p>See <a class="olink ADMQS033" target="_blank" href="../ADMQS/GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4.htm#ADMQS033"><span><cite>Oracle Database 2 Day DBA</cite></span></a> for more information.</p>
</li>
<li>
<p>From the <span class="bold">Administration</span> menu, select <span class="bold">Storage</span>, then <span class="bold">Tablespaces</span>.</p>
<p>If the Database Login page appears, then log in as an administrative user, such as <code class="codeph">SYS</code>. User <code class="codeph">SYS</code> must log in with the <span class="bold">SYSDBA</span> role selected.</p>
<p>The Tablespaces page appears.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>, and then answer the questions in the subsequent page to start creating the tablespace and its required data file.</p>
</li>
<li>
<p>In the Create Tablespace page, do the following:</p>
<ol>
<li>
<p>Under Type, in the Permanent list, select the <span class="bold">Encryption</span> box.</p>
</li>
<li>
<p>Under Datafiles, select <span class="bold">Add</span> to add a data file. (Linux and Windows systems only)</p>
</li>
<li>
<p>Select <span class="bold">Encryption</span> options to display the Encryption Options page.</p>
</li>
<li>
<p>From the Encryption Algorithm list, select from the following options:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">AES192</span>: Sets the key length to 192 bits. AES is the abbreviation for Advanced Encryption Standard.</p>
</li>
<li>
<p><span class="bold">3DES168</span>: Sets the key length to 168 bits. 3DES is the abbreviation for Triple Data Encryption Standard.</p>
</li>
<li>
<p><span class="bold">AES128</span>: Sets the key length to 128 bits. This option is the default.</p>
</li>
<li>
<p><span class="bold">AES256</span>: Sets the key length to 256 bits.</p>
</li>
</ul>
<p>See &#34;Available Methods&#34; under Step <a href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm#GUID-D15D9135-6672-4E28-ABD7-A66579FCB869__CHDJBFBE">5</a> in <a href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm#GUID-D15D9135-6672-4E28-ABD7-A66579FCB869" title="You can configure network encryption by using either Oracle Net Manager or by editing the sqlnet.ora file.">Configuring Network Encryption</a> for more information about these encryption algorithms.</p>
</li>
<li>
<p>Click <span class="bold">Continue</span>.</p>
</li>
</ol>
</li>
<li>
<p>In the Create Tablespace page, click <span class="bold">OK</span>.</p>
<p>The new tablespace appears in the list of existing tablespaces. Remember that you cannot encrypt an existing tablespace.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="infoboxnotealso" id="GUID-956B2FB6-345B-4402-8D13-ED48D6357438__GUID-403E740A-AC39-421D-9C7E-E0878A76510F">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-923ABFB1-CDFF-49BE-B619-345BFB497ADA" title="Oracle Database provides a set of data dictionary views that you can query to check encrypted tablespaces.">Data Dictionary Views for Checking Encrypted Tablespaces in the Current Database Instance</a> to query the database for existing encrypted tablespaces</p>
</li>
<li>
<p><a class="olink ASOAG10139" target="_blank" href="../ASOAG/introduction-to-transparent-data-encryption.htm#ASOAG10139"><span><cite>Oracle Database Advanced Security Guide</cite></span></a> for detailed information about tablespace encryption</p>
</li>
<li>
<p><a class="olink SQLRF01403" target="_blank" href="../SQLRF/statements_7003.htm#SQLRF01403"><span><cite>Oracle Database Reference</cite></span></a> for more information about the <code class="codeph">CREATE TABLESPACE</code> statement</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<a id="TDPSG40433"></a>
<div class="props_rev_3"><a id="GUID-F6847274-E8E5-4D95-BDBE-4ED36E48CCC1"></a>
<h2 id="TDPSG-GUID-F6847274-E8E5-4D95-BDBE-4ED36E48CCC1" class="sect2">Checking Existing Encrypted Data</h2>
<div>
<p>You can query the database for the data that you have encrypted.</p>
<p>You can check for individually encrypted columns, all tables in the current database instance that have encrypted columns, or all tablespaces that are encrypted.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-FE924225-3F77-4E07-8106-054E8CC4B048" title="To find the type of keystore that was created, query the V$ENCRYPTION_KEYS view.">Finding the Type of Keystore That Was Created</a></p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-37239133-78B0-423B-87D6-549632769449" title="You can find the location of a keystore by querying the V$ENCRYPTION_WALLET view.">Finding the Keystore Location</a></p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-5608F3E6-A2B7-45C4-8295-6AE03E841C12" title="You can find out if a keystore is open or closed by querying the V$ENCRYPTION_WALLET view.">Checking Whether a Keystore Is Open or Closed</a></p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-27DD6D48-17A8-4C55-8DDF-ACB50F20B496" title="You can use the DESC (for DESCRIBE) statement in SQL*Plus to check the encrypted columns in a database table.">Checking Encrypted Columns of an Individual Table</a></p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-D01393BD-BDE8-4B44-8385-566139E5C909" title="To check all encrypted table columns, you can query the DBA_ENCRYPTED_COLUMNS view.">Checking All Encrypted Table Columns in the Current Database Instance</a></p>
</li>
<li>
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-923ABFB1-CDFF-49BE-B619-345BFB497ADA" title="Oracle Database provides a set of data dictionary views that you can query to check encrypted tablespaces.">Data Dictionary Views for Checking Encrypted Tablespaces in the Current Database Instance</a></p>
</li>
</ul>
</div>
<a id="TDPSG94472"></a>
<div class="props_rev_3"><a id="GUID-FE924225-3F77-4E07-8106-054E8CC4B048"></a>
<h3 id="TDPSG-GUID-FE924225-3F77-4E07-8106-054E8CC4B048" class="sect3">Finding the Type of Keystore That Was Created</h3>
<div>
<p>To find the type of keystore that was created, query the <code class="codeph">V$ENCRYPTION_KEYS</code> view.</p>
<div class="section">
<p class="subhead3">To find the type of keystore that was created:</p>
<ul style="list-style-type: disc;">
<li>
<p>In SQL*Plus, query the <code class="codeph">V$ENCRYPTION_KEYS</code> view as follows:</p>
<pre dir="ltr">SELECT KEYSTORE_TYPE FROM V$ENCRYPTION_KEYS;
</pre>
<p>The keystore location appears, similar to the following:</p>
<pre dir="ltr">KEYSTORE_TYPE
-----------------------------
SOFTWARE KEYSTORE
</pre></li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG94473"></a>
<div class="props_rev_3"><a id="GUID-37239133-78B0-423B-87D6-549632769449"></a>
<h3 id="TDPSG-GUID-37239133-78B0-423B-87D6-549632769449" class="sect3">Finding the Keystore Location</h3>
<div>
<p>You can find the location of a keystore by querying the <code class="codeph">V$ENCRYPTION_WALLET</code> view.</p>
<div class="section">
<p class="subhead3">To find the keystore location:</p>
<ul style="list-style-type: disc;">
<li>
<p>In SQL*Plus, query the <code class="codeph">V$ENCRYPTION_WALLET</code> view as follows:</p>
<pre dir="ltr">SELECT WRL_PARAMETER FROM V$ENCRYPTION_WALLET;
</pre>
<p>The keystore location appears, similar to the following:</p>
<pre dir="ltr">WRL_PARAMETER
-----------------------------
C:\oracle\product\12.1.0\db_1
</pre></li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG44334"></a>
<div class="props_rev_3"><a id="GUID-5608F3E6-A2B7-45C4-8295-6AE03E841C12"></a>
<h3 id="TDPSG-GUID-5608F3E6-A2B7-45C4-8295-6AE03E841C12" class="sect3">Checking Whether a Keystore Is Open or Closed</h3>
<div>
<p>You can find out if a keystore is open or closed by querying the <code class="codeph">V$ENCRYPTION_WALLET</code> view.</p>
<div class="section"></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To check whether a keystore is open or closed:</p>
<ul style="list-style-type: disc;">
<li>
<p>In SQL*Plus, query the <code class="codeph">V$ENCRYPTION_WALLET</code> view as follows:</p>
<pre dir="ltr">SELECT STATUS FROM V$ENCRYPTION_WALLET;
</pre>
<p>The keystore status appears, similar to the following:</p>
<pre dir="ltr">STATUS  
-------
OPEN
</pre></li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG44331"></a>
<div class="props_rev_3"><a id="GUID-27DD6D48-17A8-4C55-8DDF-ACB50F20B496"></a>
<h3 id="TDPSG-GUID-27DD6D48-17A8-4C55-8DDF-ACB50F20B496" class="sect3">Checking Encrypted Columns of an Individual Table</h3>
<div>
<p>You can use the <code class="codeph">DESC</code> (for <code class="codeph">DESCRIBE</code>) statement in SQL*Plus to check the encrypted columns in a database table.</p>
<div class="section"></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To check the encrypted columns of an individual table:</p>
<ul style="list-style-type: disc;">
<li>
<p>In SQL*Plus, run the <code class="codeph">DESC</code> statement using the following syntax.</p>
<pre dir="ltr">DESC <span class="italic">tablename</span>;
</pre>
<p>For example:</p>
<pre dir="ltr">DESC OE.ORDER_ITEMS;
</pre>
<p>A description of the table schema appears. The following output shows that the <code class="codeph">QUANTITY</code> column is encrypted:</p>
<pre dir="ltr">Name                                      Null?     Type
----------------------------------------  --------  --------------------------
ORDER_ID                                  NOT NULL  NUMBER(12)
LINE_ITEM_ID                              NOT NULL  NUMBER(3)
PRODUCT_ID                                NOT NULL  NUMBER(6)
UNIT_PRICE                                          NUMBER(8,2)
QUANTITY                                            NUMBER(8) <span class="bold">ENCRYPT</span>
</pre></li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG44332"></a>
<div class="props_rev_3"><a id="GUID-D01393BD-BDE8-4B44-8385-566139E5C909"></a>
<h3 id="TDPSG-GUID-D01393BD-BDE8-4B44-8385-566139E5C909" class="sect3">Checking All Encrypted Table Columns in the Current Database Instance</h3>
<div>
<p>To check all encrypted table columns, you can query the <code class="codeph">DBA_ENCRYPTED_COLUMNS</code> view.</p>
<div class="section"></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To check all encrypted table columns in the current database instance:</p>
<ul style="list-style-type: disc;">
<li>
<p>In SQL*Plus, select from the <code class="codeph">DBA_ENCRYPTED_COLUMNS</code> view:</p>
<p>For example:</p>
<pre dir="ltr">SELECT * FROM DBA_ENCRYPTED_COLUMNS;
</pre>
<p>This <code class="codeph">SELECT</code> statement lists all tables and column in the database that contain columns encrypted using Oracle Transparent Data Encryption. For example:</p>
<pre dir="ltr">OWNER    TABLE_NAME    COLUMN_NAME    ENCRYPTION_ALG     SALT   INTEGRITY_ALG
-------  ----------    -----------    ----------------   ----   -------------
OE       CUSTOMERS     INCOME_LEVEL   AES 128 bits key   YES    SHA-1
OE       UNIT_PRICE    ORADER_ITEMS   AES 128 bits key   YES    SHA-1
HR       EMPLOYEES     SALARY         AES 192 bits key   YES    SHA-1
</pre></li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-D01393BD-BDE8-4B44-8385-566139E5C909__GUID-3AB65182-3BCC-4AF7-834B-4A132FC61508">
<p class="notep1">See Also:</p>
<p><a class="olink REFRN23534" target="_blank" href="../REFRN/GUID-ECD2EFAD-C08C-459A-B47F-1F064D016349.htm#REFRN23534"><span class="italic">Oracle Database Reference</span></a> for more information about the <code class="codeph">DBA_ENCRYPTED_COLUMNS</code> view</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG94373"></a><a id="TDPSG44333"></a>
<div class="props_rev_3"><a id="GUID-923ABFB1-CDFF-49BE-B619-345BFB497ADA"></a>
<h3 id="TDPSG-GUID-923ABFB1-CDFF-49BE-B619-345BFB497ADA" class="sect3">Data Dictionary Views for Checking Encrypted Tablespaces in the Current Database Instance</h3>
<div>
<p>Oracle Database provides a set of data dictionary views that you can query to check encrypted tablespaces.</p>
<div class="section">
<p><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm#GUID-923ABFB1-CDFF-49BE-B619-345BFB497ADA__CIACJEIB" title="Data Dictionary Views for Encrypted Tablespaces">Table 4-1</a> lists data dictionary views that you can use to check encrypted tablespaces. <a id="d12082e2413" class="indexterm-anchor"></a></p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-923ABFB1-CDFF-49BE-B619-345BFB497ADA__CIACJEIB">
<p class="titleintable">Table 4-1 Data Dictionary Views for Encrypted Tablespaces</p>
<table class="cellalignment4047" title="Data Dictionary Views for Encrypted Tablespaces" summary="Data Dictionary Views for Encrypted Tablespaces">
<thead>
<tr class="cellalignment4041">
<th class="cellalignment4098" id="d12082e2429">Data Dictionary View</th>
<th class="cellalignment4099" id="d12082e2432">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4041">
<td class="cellalignment4100" id="d12082e2437" headers="d12082e2429">
<p><a class="olink REFRN23287" target="_blank" href="../REFRN/GUID-B28A7D79-24E3-49B5-B948-7C2277CB1FB8.htm#REFRN23287"><code class="codeph">DBA_TABLESPACES</code></a></p>
</td>
<td class="cellalignment4101" headers="d12082e2437 d12082e2432">
<p>Describes all tablespaces in the database. For example, to determine if the tablespace has been encrypted, enter the following:</p>
<pre dir="ltr">SELECT TABLESPACE_NAME, ENCRYPTED FROM DBA_TABLESPACES;

TABLESPACE_NAME              ENC
---------------------------- ----
SYSTEM                       NO
SYSAUX                       NO
UNCOTBS1                     NO
TEMP                         NO
USERS                        NO
EXAMPLE                      NO
SECURESPACE                  YES
</pre></td>
</tr>
<tr class="cellalignment4041">
<td class="cellalignment4100" id="d12082e2449" headers="d12082e2429">
<p><a class="olink REFRN26287" target="_blank" href="../REFRN/GUID-6E962BBE-94B1-4BAB-AE84-EF133E3B87D1.htm#REFRN26287"><code class="codeph">USER_TABLESPACES</code></a></p>
</td>
<td class="cellalignment4101" headers="d12082e2449 d12082e2432">
<p>Describes the tablespaces accessible to the current user. It has the same columns as <code class="codeph">DBA_TABLESPACES</code>, except for the <code class="codeph">PLUGGED_IN</code> column.</p>
</td>
</tr>
<tr class="cellalignment4041">
<td class="cellalignment4100" id="d12082e2465" headers="d12082e2429">
<p><a class="olink REFRN30496" target="_blank" href="../REFRN/GUID-EFA8E26B-303C-42D6-8666-5095078A748D.htm#REFRN30496"><code class="codeph">V$ENCRYPTED_TABLESPACES</code></a></p>
</td>
<td class="cellalignment4101" headers="d12082e2465 d12082e2432">
<p>Displays information about the tablespaces that are encrypted. For example:</p>
<pre dir="ltr">SELECT * FROM V$ENCRYPTED_TABLESPACES;
</pre>
<pre dir="ltr">        TS#  ENCRYPTIONALG  ENCRYPTEDTS
-----------  -------------  -----------
         6   AES128         YES
</pre>
<p>The list includes the tablespace number, its encryption algorithm, and whether its encryption is enabled or disabled.</p>
<p>If you want to find the name of the tablespace, use the following join operation:</p>
<pre dir="ltr">SELECT NAME, ENCRYPTIONALG ENCRYPTEDTS
FROM V$ENCRYPTED_TABLESPACES, V$TABLESPACE
WHERE V$ENCRYPTED_TABLESPACES.TS# = V$TABLESPACE.TS#;
</pre></td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-923ABFB1-CDFF-49BE-B619-345BFB497ADA__GUID-058BAEFF-3B80-4B90-82F1-A3964428EAFB">
<p class="notep1">See Also:</p>
<p><a class="olink REFRN" target="_blank" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for more information about data dictionary views</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<hr/>
<br/>
<p style="text-decoration:underline">Footnote Legend</p>
Footnote&nbsp;1:
<p>You cannot encrypt external LOBs (<code class="codeph">BFILE</code>).</p>
<br/></div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4040">
<tr>
<td class="cellalignment4054">
<table class="cellalignment4045">
<tr>
<td class="cellalignment4044"><a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4044"><a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4056">
<table class="cellalignment4043">
<tr>
<td class="cellalignment4044"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4044"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4044"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4044"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4044"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4044"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>


</body></html>