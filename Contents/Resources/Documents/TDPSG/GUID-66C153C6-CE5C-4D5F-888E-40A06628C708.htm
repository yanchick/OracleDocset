<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-106581"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Limiting%20Access%20to%20Sensitive%20Data%20Using%C2%A0Oracle%C2%A0Data%20Redaction"></a><title>Limiting Access to Sensitive Data Using&nbsp;Oracle&nbsp;Data Redaction</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="Oracle Data Redaction limits access to sensitive data by redacting this data in real time."/>
<meta name="keywords" content="Oracle Data Redaction, about, types of redaction, redaction performed in real time, industry compliance, tutorial"/>
<meta name="dcterms.created" content="2017-06-16T10:04:00Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database 2 Day + Security Guide"/>
<meta name="dcterms.identifier" content="E17609-26"/>
<meta name="dcterms.isVersionOf" content="TDPSG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-72D524FF-5A86-495A-9D12-14CB13819D42.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17609-26.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-66C153C6-CE5C-4D5F-888E-40A06628C708"></a> <span id="PAGE" style="display:none;">12/15</span> <!-- End Header -->
<a id="TDPSG94443"></a>
<h1 id="TDPSG-GUID-66C153C6-CE5C-4D5F-888E-40A06628C708" class="sect1"><span class="enumeration_chapter">7</span> Limiting Access to Sensitive Data Using&nbsp;Oracle&nbsp;Data Redaction</h1>
<div>
<p>Oracle Data Redaction limits access to sensitive data by redacting this data in real time.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-66C153C6-CE5C-4D5F-888E-40A06628C708.htm#GUID-20F6A24A-A84E-4266-9DD7-6C17267AAD57" title="Oracle Data Redaction enables you to redact (mask) column data.">About Oracle Data Redaction</a></p>
</li>
<li>
<p><a href="GUID-66C153C6-CE5C-4D5F-888E-40A06628C708.htm#GUID-F4E365BA-4024-4019-B928-DF52B3FD0500" title="You can redact data for a select group of users, when one group of users must have very restricted access to the data and other groups have greater access to the same data.">Tutorial: Redacting Data for a Select Group of Users</a></p>
</li>
</ul>
</div>
<a id="TDPSG94444"></a>
<div class="props_rev_3"><a id="GUID-20F6A24A-A84E-4266-9DD7-6C17267AAD57"></a>
<h2 id="TDPSG-GUID-20F6A24A-A84E-4266-9DD7-6C17267AAD57" class="sect2">About Oracle Data Redaction</h2>
<div>
<p>Oracle Data Redaction enables you to redact (mask) column data.</p>
<p>You can redact data using one of the following methods:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Full redaction.</span> You redact all the contents of the column data. The redacted value returned to the querying user depends on the data type of the column. For example, columns of the <code class="codeph">NUMBER</code> data type are redacted with a zero (<code class="codeph">0</code>) and character data types are redacted with a blank space.</p>
</li>
<li>
<p><span class="bold">Partial redaction.</span> You redact a portion of the column data. For example, you can redact most of a credit card number with asterisks (*), except for the last four digits.</p>
</li>
<li>
<p><span class="bold">Regular expressions.</span> You can use regular expressions in both full and partial redaction. This enables you to redact data based on a search pattern for the data. For example, you can use regular expressions to redact specific phone numbers or email addresses in your data.</p>
</li>
<li>
<p><span class="bold">Random redaction.</span> The redacted data presented to the querying user appears as randomly-generated values each time it is displayed.</p>
</li>
<li>
<p><span class="bold">No redaction.</span> This option enables you to test the internal operation of your redaction policies, with no effect on the results of queries against tables with policies defined on them. You can use this option to test the redaction policy definitions before applying them to a production environment.</p>
</li>
</ul>
<p>Data Redaction performs the redaction at run time, that is, the moment that the user tries to view the data. This functionality is ideally suited for dynamic production systems in which data constantly changes. While the data is being redacted, Oracle Database can process all data normally and preserve the back-end referential integrity constraints. Data redaction can help you to comply with industry regulations such as Payment Card Industry Data Security Standard (PCI DSS) and the Sarbanes-Oxley Act.</p>
</div>
</div>
<a id="TDPSG94445"></a>
<div class="props_rev_3"><a id="GUID-F4E365BA-4024-4019-B928-DF52B3FD0500"></a>
<h2 id="TDPSG-GUID-F4E365BA-4024-4019-B928-DF52B3FD0500" class="sect2">Tutorial: Redacting Data for a Select Group of Users</h2>
<div>
<p>You can redact data for a select group of users, when one group of users must have very restricted access to the data and other groups have greater access to the same data.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-66C153C6-CE5C-4D5F-888E-40A06628C708.htm#GUID-2CF5F2D2-FE41-4287-9411-CA8280EB5BE7" title="The scenario for this tutorial is a sales office in which the sales manager, user ezlotkey, must be able to see all the data in the sales_opps table, which describes various sales opportunities.">About Redacting Data for a Select Group of Users</a></p>
</li>
<li>
<p><a href="GUID-66C153C6-CE5C-4D5F-888E-40A06628C708.htm#GUID-1D3CB302-2D03-4B2A-B2BA-125302D656C4" title="First, you must create the necessary user accounts and then grant user sec_admin the EXECUTE privilege on the DBMS_REDACT PL/SQL package, which is required to create Oracle Data Redaction policies.">Step 1: Create User Accounts and Grant Them the Necessary Privileges</a></p>
</li>
<li>
<p><a href="GUID-66C153C6-CE5C-4D5F-888E-40A06628C708.htm#GUID-D0BF932B-8763-4A5F-A37B-EAA9718CD9E1" title="The sales_opps sales contains information for small businesses that are sales opportunities. It contains two columns that you must later on create an Oracle Data Redaction policy for.">Step 2: Create and Populate the SALES_OPPS Sales Opportunities Table</a></p>
</li>
<li>
<p><a href="GUID-66C153C6-CE5C-4D5F-888E-40A06628C708.htm#GUID-7EEE12D9-3E09-48D2-AFA5-B0A2FD6A56E6" title="As user sec_admin, create the sales_opps_pol Oracle Data Redaction policy.">Step 3: Create the SALES_OPPS_POL Oracle Data Redaction Policy</a></p>
</li>
<li>
<p><a href="GUID-66C153C6-CE5C-4D5F-888E-40A06628C708.htm#GUID-5DAF45EB-FB83-4F22-A9F8-A2DCD35ADA06" title="To test the sales_opps_pol Oracle Data Redaction policy, log in as the users you created earlier and query the redacted columns in the sales_opps table.">Step 5: Test the SALES_OPPS_POL Oracle Data Redaction Policy</a></p>
</li>
<li>
<p><a href="GUID-66C153C6-CE5C-4D5F-888E-40A06628C708.htm#GUID-CAB52AD5-9C3F-4FD8-AA7A-8D59838BC0F4" title="You can remove the components that you created for this tutorial if you no longer need them.">Step 6: Optionally_ Remove the Components for This Tutorial</a></p>
</li>
</ul>
</div>
<a id="TDPSG94486"></a>
<div class="props_rev_3"><a id="GUID-2CF5F2D2-FE41-4287-9411-CA8280EB5BE7"></a>
<h3 id="TDPSG-GUID-2CF5F2D2-FE41-4287-9411-CA8280EB5BE7" class="sect3">About Redacting Data for a Select Group of Users</h3>
<div>
<p>The scenario for this tutorial is a sales office in which the sales manager, user <code class="codeph">ezlotkey</code>, must be able to see all the data in the <code class="codeph">sales_opps</code> table, which describes various sales opportunities.</p>
<p>However, the sale representatives under this sales manager, users <code class="codeph">ahutton</code> and <code class="codeph">eabel</code>, must have limited access to the <code class="codeph">sales_opps</code> table columns that describe account names and closing dates.</p>
<p>To solve this problem, you will create an Oracle Data Redaction policy that accomplishes these needs by performing the following actions:</p>
<ul style="list-style-type: disc;">
<li>
<p>The policy redacts data in two columns, each using a different redaction style.</p>
</li>
<li>
<p>The effect of the policy is the display of the query result with either the actual data or the redacted data based on the enabled roles of the querying user.</p>
</li>
</ul>
<p>For this tutorial, you will interact directly with the database by using database user accounts. This is for simplicity. The intended use scenarios for Oracle Data Redaction are twofold: redact database applications and redact direct database access. Oracle Data Redaction on its own is a good solution for redacting sensitive data from packaged and custom applications. After completing the tutorial, you will have the knowledge necessary to apply what you have learned (using the database user accounts) for scenarios that involve actual application users. When direct database access is the target scenario, you should couple Oracle Data Redaction with preventive and detective controls that provide security for privileged database users (for example, Oracle Database Vault, Oracle Label Security, Oracle Audit Vault, and Oracle Database Firewall).</p>
</div>
</div>
<a id="TDPSG94448"></a>
<div class="props_rev_3"><a id="GUID-1D3CB302-2D03-4B2A-B2BA-125302D656C4"></a>
<h3 id="TDPSG-GUID-1D3CB302-2D03-4B2A-B2BA-125302D656C4" class="sect3">Step 1: Create User Accounts and Grant Them the Necessary Privileges</h3>
<div>
<p>First, you must create the necessary user accounts and then grant user <code class="codeph">sec_admin</code> the <code class="codeph">EXECUTE</code> privilege on the <code class="codeph">DBMS_REDACT</code> PL/SQL package, which is required to create Oracle Data Redaction policies.</p>
<div class="section">
<p class="subhead3">To create user accounts for this tutorial:</p>
<ol>
<li>
<p>In Enterprise Manager, access the Database home page for your target database as user <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege.</p>
<p>See <a class="olink ADMQS033" target="_blank" href="../ADMQS/GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4.htm#ADMQS033"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information.</p>
</li>
<li>
<p>From the <span class="bold">Administration</span> menu, select <span class="bold">Security</span>, and then select <span class="bold">Roles</span>.</p>
</li>
<li>
<p>In the Roles page, select <span class="bold">Create</span>.</p>
</li>
<li>
<p>In the Create Role page Name field, enter <code class="codeph">SUPERVISOR</code> and then click <span class="bold">OK</span>.</p>
</li>
<li>
<p>From the <span class="bold">Administration</span> menu, select <span class="bold">Security</span>, and then select <span class="bold">Users</span>.</p>
</li>
<li>
<p>In the Users Page, click <span class="bold">Create</span>.</p>
</li>
<li>
<p>In the Create User page, enter the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Name</span>: <code class="codeph">EZLOTKEY</code> (to create the user account for Eleni Zlotkey)</p>
</li>
<li>
<p><span class="bold">Profile</span>: <code class="codeph">DEFAULT</code></p>
</li>
<li>
<p><span class="bold">Authentication</span>: <code class="codeph">Password</code></p>
</li>
<li>
<p><span class="bold">Enter Password</span> and <span class="bold">Confirm Password</span>: Enter a password that meets the requirements in <span class="q">&#34;<a href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm#GUID-051F2B63-832D-4302-B5EC-B4523BF2CC23" title="For greater security, Oracle provides a set of requirements for creating passwords.">Requirements for Creating Passwords</a>&#34;</span>.</p>
</li>
<li>
<p><span class="bold">Default Tablespace</span>: <code class="codeph">EXAMPLE</code></p>
</li>
<li>
<p><span class="bold">Temporary Tablespace</span>: <code class="codeph">TEMP</code></p>
</li>
<li>
<p><span class="bold">Status</span>: <code class="codeph">Unlocked</code></p>
</li>
</ul>
</li>
<li>
<p>Select the <span class="bold">System Privileges</span> tab.</p>
</li>
<li>
<p>Select the <span class="bold">Edit List</span> button.</p>
</li>
<li>
<p>In the <span class="bold">Modify System Privileges</span> list, select the following privileges and then move them to the <span class="bold">Selected System Privileges</span> list.</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">CREATE SESSION</span></p>
</li>
<li>
<p><span class="bold">CREATE TABLE</span></p>
</li>
<li>
<p><span class="bold">UNLIMITED TABLESPACE</span></p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
<li>
<p>In the Create User page, select the <span class="bold">Roles</span> tab, and then select the <span class="bold">Edit List</span> button.</p>
</li>
<li>
<p>In the Modify Roles page, double-click the <span class="bold">SUPERVISOR</span> role in the <span class="bold">Available Roles</span> list to move it to the <span class="bold">Selected Roles</span> list.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>, and then click <span class="bold">OK</span> again to return to the Users page.</p>
</li>
<li>
<p>Select the <span class="bold">Create</span> button.</p>
</li>
<li>
<p>In the Create User page, enter the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Name</span>: <code class="codeph">EABEL</code> (to create the user account for Ellen Abel)</p>
</li>
<li>
<p><span class="bold">Profile</span>: <code class="codeph">DEFAULT</code></p>
</li>
<li>
<p><span class="bold">Authentication</span>: <code class="codeph">Password</code></p>
</li>
<li>
<p><span class="bold">Enter Password</span> and <span class="bold">Confirm Password</span>: Enter a password that meets the requirements in <span class="q">&#34;<a href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm#GUID-051F2B63-832D-4302-B5EC-B4523BF2CC23" title="For greater security, Oracle provides a set of requirements for creating passwords.">Requirements for Creating Passwords</a>&#34;</span>.</p>
</li>
<li>
<p><span class="bold">Default Tablespace</span>: <code class="codeph">EXAMPLE</code></p>
</li>
<li>
<p><span class="bold">Temporary Tablespace</span>: <code class="codeph">TEMP</code></p>
</li>
<li>
<p><span class="bold">Status</span>: <code class="codeph">Unlocked</code></p>
</li>
</ul>
</li>
<li>
<p>Select the <span class="bold">System Privileges</span> tab.</p>
</li>
<li>
<p>Select the <span class="bold">Edit List</span> button.</p>
</li>
<li>
<p>In the <span class="bold">Modify System Privileges</span> list, double-click the <code class="codeph">CREATE SESSION</code> system privilege to move it to Selected System Privileges list.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
<li>
<p>In the Users page, select the <span class="bold">EABEL</span> user.</p>
</li>
<li>
<p>From the <span class="bold">Actions</span> list, select the <span class="bold">Create Like</span> button and then click <span class="bold">Go</span>.</p>
</li>
<li>
<p>In the Create User page, enter the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Name:</span> Enter <span class="bold">AHUTTON</span> (for user Alyssa Hutton).</p>
</li>
<li>
<p><span class="bold">Enter Password</span> and <span class="bold">Confirm Password</span>: Enter a password that meets the requirements in <span class="q">&#34;<a href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm#GUID-051F2B63-832D-4302-B5EC-B4523BF2CC23" title="For greater security, Oracle provides a set of requirements for creating passwords.">Requirements for Creating Passwords</a>&#34;</span>.</p>
</li>
</ul>
<p>Note that user <code class="codeph">ezlotkey</code> has been granted a role, <code class="codeph">supervisor</code>, but the users <code class="codeph">eabel</code> and <code class="codeph">ahutton</code> are not granted any roles.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
<li>
<p>In the Users page, select the <span class="bold">SEC_ADMIN</span> user and then click the <span class="bold">Edit</span> button.</p>
<p>If user <code class="codeph">SEC_ADMIN</code> does not exist, then you can quickly create this user in SQL*Plus by entering the following statement:</p>
<pre dir="ltr">GRANT CREATE PROCEDURE, CREATE ROLE, CREATE SESSION, INHERIT ANY PRIVILEGES, SELECT ANY DICTIONARY TO sec_admin IDENTIFIED BY <span class="italic">password</span>;
</pre>
<p>See also <span class="q">&#34;<a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-61DD01F3-6446-4677-9002-C522EDCC7298" title="For greater security, you should apply separation of duty concepts when you assign responsibilities to the system administrators on your staff.">Step 2: Create a Security Administrator Account</a>&#34;</span> to create this account.</p>
</li>
<li>
<p>Select the <span class="bold">Object Privileges</span> tab.</p>
</li>
<li>
<p>In the Object Privileges tab, from the <span class="bold">Select Object Type</span> list, select <span class="bold">Package</span>, and then click <span class="bold">Add</span>.</p>
</li>
<li>
<p>In the Select Package Objects field, enter <code class="codeph">SYS.DBMS_REDACT</code>, and then in the Available Privileges list, move the <span class="bold">EXECUTE</span> privilege to the Selected Privileges list.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>, and then click <span class="bold">Apply</span>.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG94449"></a>
<div class="props_rev_3"><a id="GUID-D0BF932B-8763-4A5F-A37B-EAA9718CD9E1"></a>
<h3 id="TDPSG-GUID-D0BF932B-8763-4A5F-A37B-EAA9718CD9E1" class="sect3">Step 2: Create and Populate the SALES_OPPS Sales Opportunities Table</h3>
<div>
<p>The <code class="codeph">sales_opps</code> sales contains information for small businesses that are sales opportunities. It contains two columns that you must later on create an Oracle Data Redaction policy for.</p>
<div class="section">
<p class="subhead3">To create and populate the sales_opps sales opportunities table:</p>
<ol>
<li>
<p>Log into the database instance as user <code class="codeph">ezlotkey</code>.</p>
<pre dir="ltr">sqlplus ezlotkey
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Create the <code class="codeph">sales_opps</code> table.</p>
<pre dir="ltr">CREATE TABLE sales_opps (
 account varchar2(30), 
 region varchar2(20), 
 product varchar2(20), 
 sales_rep varchar2(15), 
 close_date date, 
 price number, 
 quantity number);
</pre></li>
<li>
<p>Populate the <code class="codeph">sales_opps</code> table with some data.</p>
<pre dir="ltr">INSERT INTO sales_opps VALUES (&#39;Rising Dough Bakery&#39;, &#39;north-east&#39;, &#39;AA1 AccountPro&#39;, &#39;ahutton&#39;, &#39;07-JUL-12&#39;, 400.00, 4);
INSERT INTO sales_opps VALUES (&#39;Shear Madness Hair Salon&#39;, &#39;south-west&#39;, &#39;AA1 AccountPro&#39;, &#39;eabel&#39;, &#39;20-APR-12&#39;, 400.00, 1);
INSERT INTO sales_opps VALUES (&#39;Doublecheck Accounting&#39;, &#39;north-east&#39;, &#39;AA1 AccountPro&#39;, &#39;ahutton&#39;, &#39;14-MAR-12&#39;, 400.00, 12);
INSERT INTO sales_opps VALUES (&#39;State of Art Framing&#39;, &#39;south-west&#39;, &#39;AA1 TaxPro&#39;, &#39;eabel&#39;, &#39;21-MAY-12&#39;, 300.00, 2);
INSERT INTO sales_opps VALUES (&#39;Shady Trees Arborists&#39;, &#39;north-east&#39;, &#39;AA1 AccountPro&#39;, &#39;ahutton&#39;, &#39;17-JUN-12&#39;, 400.00, 16);
</pre></li>
<li>
<p>Query the <code class="codeph">account</code> and <code class="codeph">close_date</code> columns of the <code class="codeph">sales_opps</code> table, to see the data that must be redacted.</p>
<pre dir="ltr">SELECT account, close_date, product, quantity FROM sales_opps;

ACCOUNT                        CLOSE_DAT PRODUCT                QUANTITY
------------------------------ --------- -------------------- ----------
Rising Dough Bakery            07-JUL-12 AA1 AccountPro                4
Shear Madness Hair Salon       20-APR-12 AA1 AccountPro                1
Doublecheck Accounting         14-MAR-12 AA1 AccountPro               12
State of Art Framing           21-MAY-12 AA1 TaxPro                    2
Shady Trees Arborists          17-JUN-12 AA1 AccountPro               16
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG94450"></a>
<div class="props_rev_3"><a id="GUID-7EEE12D9-3E09-48D2-AFA5-B0A2FD6A56E6"></a>
<h3 id="TDPSG-GUID-7EEE12D9-3E09-48D2-AFA5-B0A2FD6A56E6" class="sect3">Step 3: Create the SALES_OPPS_POL Oracle Data Redaction Policy</h3>
<div>
<p>As user <code class="codeph">sec_admin</code>, create the <code class="codeph">sales_opps_pol</code> Oracle Data Redaction policy.</p>
<div class="section">
<p class="subhead3">To create the sales_opps_pol Data Redaction policy:</p>
<ol>
<li>
<p>In Enterprise Manager, log out, and then log back in again as user <code class="codeph">sec_admin</code>.</p>
<p>See <a class="olink ADMQS033" target="_blank" href="../ADMQS/GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4.htm#ADMQS033"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information.</p>
</li>
<li>
<p>From the <span class="bold">Administration</span> menu, select <span class="bold">Security</span>, and then select <span class="bold">Oracle Data Redaction</span>.</p>
</li>
<li>
<p>In the Data Redaction page, select the <span class="bold">Create</span> button.</p>
</li>
<li>
<p>In the Create Data Redaction Policy page, enter the following information to design the basics of the policy:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Schema:</span> Enter <code class="codeph">EZLOTKEY</code> (in capital letters).</p>
</li>
<li>
<p><span class="bold">Table/View:</span> Enter <code class="codeph">SALES_OPPS</code> (in capital letters).</p>
</li>
<li>
<p><span class="bold">Policy Name:</span> Enter <code class="codeph">SALES_OPPS_POL</code>.</p>
</li>
<li>
<p><span class="bold">Policy Expression:</span> Enter the following expression:</p>
<pre dir="ltr">SYS_CONTEXT(&#39;SYS_SESSION_ROLES&#39;, &#39;SUPERVISOR&#39;) = &#39;FALSE&#39;
</pre>
<p>The expression translates to &#34;Redact the data in the <code class="codeph">account</code> column for any user who does not have the <code class="codeph">supervisor</code> role enabled.&#34; In other words, only the supervisor, <code class="codeph">ezlotkey</code>, will be able to see the data in the <code class="codeph">account</code> column.</p>
</li>
</ul>
</li>
<li>
<p>Still in the Data Redaction page, apply the <code class="codeph">sales_opps_policy</code> policy to a column, as follows:</p>
<ol>
<li>
<p>Select the <span class="bold">Add</span> button.</p>
</li>
<li>
<p>In the Add window, from the <span class="bold">Column</span> list, select <span class="bold">ACCOUNT</span>.</p>
<p>The Column Datatype field displays the data type of <code class="codeph">ACCOUNT</code>, which is <code class="codeph">VARCHAR2</code>.</p>
</li>
<li>
<p>From the <span class="bold">Redaction Template</span> list, select <span class="bold">Custom</span> (which should be the default selection.)</p>
</li>
<li>
<p>From the <span class="bold">Redaction Function</span> list, select <span class="bold">FULL</span>.</p>
<p><span class="bold">FULL</span> means all the characters in the <code class="codeph">account</code> column will be redacted. Because the data type of the <code class="codeph">account</code> column is <code class="codeph">VARCHAR2</code>, the data will appear as a blank space.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
</li>
<li>
<p>Apply the <code class="codeph">sales_opps_pol</code> policy to a second column, as follows:</p>
<ol>
<li>
<p>Select the <span class="bold">Add</span> button.</p>
</li>
<li>
<p>In the Add window, from the <span class="bold">Column</span> list, select <span class="bold">CLOSE_DATE</span>.</p>
<p>The <span class="bold">Column Datatype</span> field determines that the data type for <code class="codeph">CLOSE_DATE</code> is <code class="codeph">DATE</code>.</p>
</li>
<li>
<p>From the <span class="bold">Redaction Function</span> list, select <span class="bold">PARTIAL</span>.</p>
<p>In a moment, the Add window expands to show the <span class="bold">Function Attributes</span> area.</p>
</li>
<li>
<p>In the <span class="bold">Date Redaction Format</span> field, enter the following attribute:</p>
<pre dir="ltr">m06d7YHMS
</pre>
<p>This setting redacts the month and day of each date, setting them to appear as <code class="codeph">07-JUNE-12</code>.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The Create Data Redaction Policy page should appear as follows:</p>
<div class="figure" id="GUID-7EEE12D9-3E09-48D2-AFA5-B0A2FD6A56E6__GUID-729C5B1A-1266-45AA-85E5-3B572864D56B"><img width="1007" height="456" src="img/GUID-52D35D3D-3621-472D-8C96-64A0F1673164-default.gif" alt="Description of GUID-52D35D3D-3621-472D-8C96-64A0F1673164-default.gif follows" title="Description of GUID-52D35D3D-3621-472D-8C96-64A0F1673164-default.gif follows"/><br/>
<a href="img_text/GUID-52D35D3D-3621-472D-8C96-64A0F1673164-default.htm">Description of the illustration GUID-52D35D3D-3621-472D-8C96-64A0F1673164-default.gif</a></div>
<!-- class="figure" --></li>
</ol>
</li>
<li>
<p>In the Create Data Redaction Policy page, click <span class="bold">OK</span>.</p>
<p>The policy appears in the Data Redaction Policies list.</p>
<p>Do not exit Enterprise Manager.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG94451"></a>
<div class="props_rev_3"><a id="GUID-5DAF45EB-FB83-4F22-A9F8-A2DCD35ADA06"></a>
<h3 id="TDPSG-GUID-5DAF45EB-FB83-4F22-A9F8-A2DCD35ADA06" class="sect3">Step 5: Test the SALES_OPPS_POL Oracle Data Redaction Policy</h3>
<div>
<p>To test the <code class="codeph">sales_opps_pol</code> Oracle Data Redaction policy, log in as the users you created earlier and query the redacted columns in the <code class="codeph">sales_opps</code> table.</p>
<div class="section">
<p class="subhead3">To test the sales_opps_pol policy:</p>
<ol>
<li>
<p>Connect to SQL*Plus as user <code class="codeph">ezlotkey</code>.</p>
<pre dir="ltr">connect ezlotkey
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Grant the sales representatives the <code class="codeph">SELECT</code> privilege for the <code class="codeph">sales_opps</code> table.</p>
<pre dir="ltr">GRANT SELECT ON sales_opps TO eabel;
GRANT SELECT ON sales_opps TO ahutton;
</pre></li>
<li>
<p>Connect as user <code class="codeph">eabel</code>.</p>
<pre dir="ltr">connect eabel
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Query the <code class="codeph">sales_opps</code> tables as follows:</p>
<pre dir="ltr">SELECT account, close_date, product, quantity FROM ezlotkey.sales_opps;
</pre>
<p>Output similar to the following should appear:</p>
<pre dir="ltr">ACCOUNT                        CLOSE_DAT PRODUCT                QUANTITY
------------------------------ --------- -------------------- ----------
                               07-JUN-12 AA1 AccountPro                4
                               07-JUN-12 AA1 AccountPro                1
                               07-JUN-12 AA1 AccountPro               12
                               07-JUN-12 AA1 TaxPro                    2
                               07-JUN-12 AA1 AccountPro               16
</pre>
<p>No data appears in the <code class="codeph">account</code> column because it has been redacted to display a blank space for each row. The <code class="codeph">close_date</code> column shows dates, but they are all partial date values. The <code class="codeph">product</code> and <code class="codeph">quantity</code> columns show their data, as expected, because the Data Redaction policy does not apply to them.</p>
</li>
<li>
<p>Connect as user <code class="codeph">ahutton</code> and perform the same query.</p>
<pre dir="ltr">connect ahutton
Enter password: <span class="italic">password</span>

SELECT account, close_date, product, quantity FROM ezlotkey.sales_opps;

ACCOUNT                        CLOSE_DAT PRODUCT                QUANTITY
------------------------------ --------- -------------------- ----------
                               07-JUN-12 AA1 AccountPro                4
                               07-JUN-12 AA1 AccountPro                1
                               07-JUN-12 AA1 AccountPro               12
                               07-JUN-12 AA1 TaxPro                    2
                               07-JUN-12 AA1 AccountPro               16
</pre>
<p>The data is redacted for user <code class="codeph">ahutton</code> as well.</p>
</li>
<li>
<p>Connect as user <code class="codeph">ezlotkey</code> and perform the same query.</p>
<pre dir="ltr">connect ezlotkey
Enter password: <span class="italic">password</span>

SELECT account, close_date, product, quantity FROM sales_opps;

ACCOUNT                        CLOSE_DAT PRODUCT                QUANTITY
------------------------------ --------- -------------------- ----------
Rising Dough Bakery            07-JUL-12 AA1 AccountPro                4
Shear Madness Hair Salon       20-APR-12 AA1 AccountPro                1
Doublecheck Accounting         14-MAR-12 AA1 AccountPro               12
State of Art Framing           21-MAY-12 AA1 TaxPro                    2
Shady Trees Arborists          17-JUN-12 AA1 AccountPro               16
</pre>
<p>The <code class="codeph">sales_opps_pol</code> Data Redaction policy shows the actual data for user <code class="codeph">ezlotkey</code> because she has the <code class="codeph">supervisor</code> role enabled. However, if this role is disabled for <code class="codeph">ezlotkey</code>, then when she queries this table, the <code class="codeph">account</code> and <code class="codeph">close_date</code> columns will be redacted, even though she created and owns the <code class="codeph">sales_opps</code> table.</p>
</li>
<li>
<p>Log out of SQL*Plus.</p>
<pre dir="ltr">EXIT
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG94452"></a>
<div class="props_rev_3"><a id="GUID-CAB52AD5-9C3F-4FD8-AA7A-8D59838BC0F4"></a>
<h3 id="TDPSG-GUID-CAB52AD5-9C3F-4FD8-AA7A-8D59838BC0F4" class="sect3">Step 6: Optionally, Remove the Components for This Tutorial</h3>
<div>
<p>You can remove the components that you created for this tutorial if you no longer need them.</p>
<div class="section">
<p class="subhead3">To remove the components for this tutorial:</p>
<ol>
<li>
<p>In Enterprise Manager, ensure that you are logged in as user <code class="codeph">sec_admin</code>.</p>
</li>
<li>
<p>In the Data Redaction Policies page, select the <code class="codeph">SALES_OPPS_POL</code> policy.</p>
<div class="figure" id="GUID-CAB52AD5-9C3F-4FD8-AA7A-8D59838BC0F4__GUID-6473A7A2-FE5D-4611-AECF-21412A92F8F6"><img width="705" height="127" src="img/GUID-75D7CC5E-5437-4E2F-AEFF-FC15A45E8AD5-default.gif" alt="Description of GUID-75D7CC5E-5437-4E2F-AEFF-FC15A45E8AD5-default.gif follows" title="Description of GUID-75D7CC5E-5437-4E2F-AEFF-FC15A45E8AD5-default.gif follows"/><br/>
<a href="img_text/GUID-75D7CC5E-5437-4E2F-AEFF-FC15A45E8AD5-default.htm">Description of the illustration GUID-75D7CC5E-5437-4E2F-AEFF-FC15A45E8AD5-default.gif</a></div>
<!-- class="figure" --></li>
<li>
<p>Click the <span class="bold">Delete</span> button.</p>
</li>
<li>
<p>In the Confirmation page, click <span class="bold">Yes</span>.</p>
</li>
<li>
<p>Log out of Enterprise Manager and then log back in again as user <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege</p>
</li>
<li>
<p>From the Database home page, select <span class="bold">Security</span>, then <span class="bold">Administration</span>, and then <span class="bold">Users</span>.</p>
</li>
<li>
<p>Select user <span class="bold">AHUTTON</span>, click <span class="bold">Delete</span>, and then in the Confirmation window, select <span class="bold">Yes</span>.</p>
</li>
<li>
<p>Select user <span class="bold">EABEL</span>, click <span class="bold">Delete</span>, and then in the Confirmation window, select <span class="bold">Yes</span>.</p>
</li>
<li>
<p>Select user <span class="bold">EZLOTKEY</span>, click <span class="bold">Delete</span>, and then in the Confirmation window, select <span class="bold">Yes</span>.</p>
</li>
<li>
<p>From the <span class="bold">Administration</span> menu, select <span class="bold">Security</span>, and then select <span class="bold">Roles</span>.</p>
</li>
<li>
<p>Select the role <code class="codeph">SUPERVISOR</code>, click <span class="bold">Delete</span>, and in the Confirmation window, select <span class="bold">Yes</span>.</p>
</li>
<li>
<p>In the Users page, select the <span class="bold">SEC_ADMIN</span> user and then click <span class="bold">Edit</span>.</p>
</li>
<li>
<p>In the Edit User: SEC_ADMIN page, select the <span class="bold">Object Privileges</span> tab.</p>
</li>
<li>
<p>Select the <span class="bold">EXECUTE</span> privilege for the <span class="bold">DBMS_REDACT</span> package, and then click <span class="bold">Delete</span>.</p>
</li>
<li>
<p>Click the <span class="bold">Apply</span> button.</p>
</li>
<li>
<p>Exit Enterprise Manager by clicking the <span class="bold">Log Out</span> button.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4040">
<tr>
<td class="cellalignment4054">
<table class="cellalignment4045">
<tr>
<td class="cellalignment4044"><a href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4044"><a href="GUID-72D524FF-5A86-495A-9D12-14CB13819D42.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4056">
<table class="cellalignment4043">
<tr>
<td class="cellalignment4044"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4044"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4044"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4044"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4044"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4044"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>