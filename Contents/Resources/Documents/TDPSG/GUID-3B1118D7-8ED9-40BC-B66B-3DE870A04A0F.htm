<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-106578"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Controlling%20Access%20with%20Oracle%C2%A0Database%C2%A0Vault"></a><title>Controlling Access with Oracle&nbsp;Database&nbsp;Vault</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="Oracle Database Vault enables you to restrict administrative access to an Oracle database."/>
<meta name="keywords" content="administrators, restricting access of, separation-of-duty principles, about, separation of duty, Oracle Database Vault, regulatory compliances, how meets, components"/>
<meta name="dcterms.created" content="2017-06-16T10:04:00Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database 2 Day + Security Guide"/>
<meta name="dcterms.identifier" content="E17609-26"/>
<meta name="dcterms.isVersionOf" content="TDPSG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17609-26.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F"></a> <span id="PAGE" style="display:none;">10/15</span> <!-- End Header -->
<a id="TDPSG94441"></a>
<h1 id="TDPSG-GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F" class="sect1"><span class="enumeration_chapter">5</span> Controlling Access with Oracle&nbsp;Database&nbsp;Vault</h1>
<div>
<p>Oracle Database Vault enables you to restrict administrative access to an Oracle database.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm#GUID-8F0644D5-5C7E-43C3-8F9E-3E9E0597D5E4" title="You can use Oracle Database Vault to restrict administrative access to an Oracle database using a fine-grained approach.">About Oracle Database Vault</a></p>
</li>
<li>
<p><a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm#GUID-89B0B85F-F01B-47EE-9306-A53C8717DBB3" title="In this tutorial, you create a realm around the OE schema, which will protect it from administrator access. However, user SCOTT needs access to the OE.CUSTOMERS table, so you must ensure that he can continue to access this data.">Tutorial: Controlling Administrator Access to a User Schema</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F__GUID-DEBB28EE-B894-4211-A9C3-E3B8490B631F">
<p class="notep1">See Also:</p>
<p><a class="olink DVADM001" target="_blank" href="../DVADM/dvintro.htm#DVADM001"><span><cite>Oracle Database Vault Administrator&rsquo;s Guide</cite></span></a></p>
</div>
</div>
<a id="TDPSG90651"></a>
<div class="props_rev_3"><a id="GUID-8F0644D5-5C7E-43C3-8F9E-3E9E0597D5E4"></a>
<h2 id="TDPSG-GUID-8F0644D5-5C7E-43C3-8F9E-3E9E0597D5E4" class="sect2">About Oracle Database Vault</h2>
<div>
<p>You can use Oracle Database Vault to restrict administrative access to an Oracle database using a fine-grained approach.</p>
<p>This helps you address the most difficult security problems remaining today: protecting against insider threats, meeting regulatory compliance requirements, and enforcing separation of duty. In addition to restricting administrator access to your databases, Database Vault enables you to enforce separation of duty, and control who, when, where and how applications, databases, and data are accessed.</p>
<p>Typically, the main job of an Oracle database administrator is to perform tasks such database tuning, installing upgrades, monitoring the state of the database, and then remedying any problems that he or she finds. In a default Oracle Database installation, database administrators also have the ability to create users and access user data. For greater security, you should restrict these activities only to those users who must perform them. This is called <span class="bold">separation of duty</span>, and it frees the database administrator to focus on tasks ideally suited to his or her expertise, such as performance tuning.</p>
<p>By restricting administrator access to your Oracle databases, Oracle Database Vault helps you to follow common regulatory compliance requirements, such as the Payment Card Industry (PCI) Data Security Standard (DSS) requirements, Sarbanes-Oxley (SOX) Act, European Union (EU) Privacy Directive, and Healthcare Insurance Portability and Accountability Act (HIPAA). These regulations require strong internal controls on access, disclosure or modification of sensitive information that could lead to fraud, identity theft, financial irregularities and financial penalties.</p>
<p>Oracle Database Vault provides the following ways for you to restrict administrator access to an Oracle database:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Group database schemas, objects, and roles that you want to secure.</span> This grouping is called a <span class="bold">realm</span>, and all the components of the realm are protected. After you, the Database Vault administrator, create a realm, you designate a user to manage access to the realm. For example, you can create a realm around one table within a schema, or around the entire schema itself.</p>
</li>
<li>
<p><span class="bold">Create PL/SQL expressions to customize your database restrictions.</span> You create an expression in a <span class="bold">rule</span>, and for multiple rules within one category, you can group the rules into a <span class="bold">rule set</span>. To enforce the rules within the rule set, you then associate the rule set with a realm or command rule. For example, if you wanted to prevent access to a database during a maintenance period (for example, from 10 to 12 p.m.), you can create a rule to restrict access only during those hours.</p>
</li>
<li>
<p><span class="bold">Designate specific PL/SQL statements that are accessible or not accessible to users.</span> These are called <span class="bold">command rules</span>. A command rule contains a command to be protected and a rule set that determines whether the execution of the command is permitted. You can create a command rule to protect <code class="codeph">SELECT</code>, <code class="codeph">ALTER SYSTEM</code>, database definition language (DDL), and data manipulation language (DML) statements that affect one or more database objects. You can associate a rule set to further customize the command rule.</p>
</li>
<li>
<p><span class="bold">Define attributes to record data such as session users or IP addresses that Oracle Database Vault can recognize and secure.</span> These attributes are called <span class="bold">factors</span>. You can use factors for activities such as authorizing database accounts to connect to the database or creating filtering logic to restrict the visibility and manageability of data. To further customize the factor, you can associate a rule set with it.</p>
</li>
<li>
<p><span class="bold">Design secure application roles that are enabled only by Oracle Database Vault rules.</span> After you create the secure application role in Oracle Database Vault, you associate a rule set with it. The rule set defines when and how the secure application role is enabled or disabled.</p>
</li>
</ul>
<p>You can create policies using these components by using either Oracle Database Vault Administrator, or by using its PL/SQL packages. In a multitenant environment, each policy applies <a id="d14582e205" class="indexterm-anchor"></a><a id="d14582e209" class="indexterm-anchor"></a>only to the current pluggable database (PDB). <a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm#GUID-C97BE34B-95D0-4524-8C0C-7F6011910DC0" title="Oracle Database Vault is installed when you perform a default installation of Oracle Database. After you install it, you must register Oracle Database Vault with Oracle Database and then enable the Oracle Database Vault Account Manager user account.">Step 1: Enable Oracle Database Vault</a></p>
</div>
</div>
<a id="TDPSG90652"></a>
<div class="props_rev_3"><a id="GUID-89B0B85F-F01B-47EE-9306-A53C8717DBB3"></a>
<h2 id="TDPSG-GUID-89B0B85F-F01B-47EE-9306-A53C8717DBB3" class="sect2">Tutorial: Controlling Administrator Access to a User Schema</h2>
<div>
<p>In this tutorial, you create a realm around the <code class="codeph">OE</code> schema, which will protect it from administrator access. However, user <code class="codeph">SCOTT</code> needs access to the <code class="codeph">OE.CUSTOMERS</code> table, so you must ensure that he can continue to access this data.</p>
<p>The <code class="codeph">OE</code> schema <a id="d14582e279" class="indexterm-anchor"></a><a id="d14582e283" class="indexterm-anchor"></a>has several tables that contain confidential data, such as the credit limits allowed for customers and other information. Order Entry tables typically contain sensitive information, such as credit card or Social Security numbers. This type of information must be restricted only to individuals whose job requires access to this information, according to Payment Card Industry (PCI) Data Security Standards (DSS).</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm#GUID-C97BE34B-95D0-4524-8C0C-7F6011910DC0" title="Oracle Database Vault is installed when you perform a default installation of Oracle Database. After you install it, you must register Oracle Database Vault with Oracle Database and then enable the Oracle Database Vault Account Manager user account.">Step 1: Enable Oracle Database Vault</a></p>
</li>
<li>
<p><a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm#GUID-11ECA514-00EE-4534-A9D3-19495425379E" title="To test the tutorial later on, user SCOTT must select from the OE.CUSTOMERS table. First, you should ensure that he SCOTT account is active.">Step 2: Grant the SELECT Privilege on the OE.CUSTOMERS Table to User SCOTT</a></p>
</li>
<li>
<p><a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm#GUID-D7D7FCFC-4AEB-4249-8D8E-855BD1074FD4" title="At this stage, both users SYS and SCOTT can select from the OE.CUSTOMERS table, because SYS has administrative privileges and because SCOTT has an explicit SELECT privilege granted by user OE.">Step 3: Select from the OE.CUSTOMERS Table as Users SYS and SCOTT</a></p>
</li>
<li>
<p><a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm#GUID-122C9114-2A5B-4952-A2CB-134D15511DFF" title="To restrict the OE.CUSTOMER table from administrative access, you must create a realm around the OE schema.">Step 4: Create a Realm to Protect the OE.CUSTOMERS Table</a></p>
</li>
<li>
<p><a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm#GUID-45802D3A-5B01-4FE6-8649-45B43C2EBBC1" title="Now that you have created a realm to protect the OE schema, you are ready to test it.">Step 5: Test the OE Protections Realm</a></p>
</li>
<li>
<p><a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm#GUID-E832CDE1-2028-4340-9A9A-6995957B4E02" title="You can remove the components that you created for this tutorial if you no longer need them.">Step 6: Optionally_ Remove the Components for This Tutorial</a></p>
</li>
</ul>
</div>
<a id="TDPSG66521"></a>
<div class="props_rev_3"><a id="GUID-C97BE34B-95D0-4524-8C0C-7F6011910DC0"></a>
<h3 id="TDPSG-GUID-C97BE34B-95D0-4524-8C0C-7F6011910DC0" class="sect3">Step 1: Enable Oracle Database Vault</h3>
<div>
<p>Oracle Database Vault is installed when you perform a default installation of Oracle Database. After you install it, you must register Oracle Database Vault with Oracle Database and then enable the Oracle Database Vault Account Manager user account.</p>
<div class="section">
<p>If Oracle Label Security is not enabled, then the registration process enables it as well as Database Vault.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To register Oracle Database Vault:</p>
<ol>
<li>
<p>Log into the database instance as user <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege. <a id="d14582e438" class="indexterm-anchor"></a></p>
<p>For example:</p>
<pre dir="ltr">sqlplus sys as sysdba
Enter password: <span class="italic">password</span> 
</pre></li>
<li>
<p>Check if Oracle Database Vault has already been enabled. The <code class="codeph">PARAMETER</code> column is case sensitive, so use the case shown here.</p>
<pre dir="ltr">SELECT VALUE FROM V$OPTION WHERE PARAMETER = &#39;Oracle Database Vault&#39;;
</pre>
<p>If it returns <code class="codeph">TRUE</code>, then Oracle Database Vault is registered. Go to <span class="q">&#34;<a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm#GUID-11ECA514-00EE-4534-A9D3-19495425379E" title="To test the tutorial later on, user SCOTT must select from the OE.CUSTOMERS table. First, you should ensure that he SCOTT account is active.">Step 2: Grant the SELECT Privilege on the OE.CUSTOMERS Table to User SCOTT</a>&#34;</span>. If it returns <code class="codeph">FALSE</code>, then register Database Vault with your database, as described in <a class="olink DVADM30031" target="_blank" href="../DVADM/getting_started.htm#DVADM30031"><span class="italic">Oracle Database Vault Administrator&#39;s Guide</span></a>.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG66522"></a>
<div class="props_rev_3"><a id="GUID-11ECA514-00EE-4534-A9D3-19495425379E"></a>
<h3 id="TDPSG-GUID-11ECA514-00EE-4534-A9D3-19495425379E" class="sect3">Step 2: Grant SELECT on the OE.CUSTOMERS Table to User SCOTT</h3>
<div>
<p>To test the tutorial later on, user <code class="codeph">SCOTT</code> must select from the <code class="codeph">OE.CUSTOMERS</code> table. First, you should ensure that he <code class="codeph">SCOTT</code> account is active.</p>
<div class="section">
<p>Topics:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm#GUID-0AE777AD-4CE8-4AE5-BC63-80C4EB95B2CE">Enabling User SCOTT</a></p>
</li>
<li>
<p><a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm#GUID-CFC31826-5880-477B-B59E-1D56354A873C" title="After you enable user SCOTT, you can grant him the appropriate privileges.">Granting User SCOTT the SELCT Privilege on the OE.CUSTOMERS Table</a></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
<a id="TDPSG94477"></a>
<div class="props_rev_3"><a id="GUID-0AE777AD-4CE8-4AE5-BC63-80C4EB95B2CE"></a>
<h4 id="TDPSG-GUID-0AE777AD-4CE8-4AE5-BC63-80C4EB95B2CE" class="sect4">Enabling User SCOTT for Oracle Database Vault</h4>
<div>
<div class="section">
<p>You can use Enterprise Manager to enable user <code class="codeph">SCOTT</code>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To enable user SCOTT:</p>
<ol>
<li>
<p>In Enterprise Manager, ensure that you are logged in as the Database Vault Account Manager (a user who has been granted the role <code class="codeph">DV_ACCTMGR</code>) with the <span class="bold">NORMAL</span> role selected.</p>
<p>After you enable Oracle Database Vault, you no longer can use the administrative accounts (such as <code class="codeph">SYS</code> and <code class="codeph">SYSTEM</code>) to create or enable user accounts. This is because right out of the box, Oracle Database Vault provides <a id="d14582e629" class="indexterm-anchor"></a>separation-of-duty principles to administrative accounts. From now on, to manage user accounts, you must use the Oracle Database Vault Account Manager account.</p>
<p>Administrative users still have the privileges they do need. For example, user <code class="codeph">SYS</code>, who owns system privileges and many PL/SQL packages, can still grant privileges on these to other users. However, user <code class="codeph">SYS</code> can no longer create, modify, or drop user accounts. Instead, you must log in as the Database Vault Account Manager.</p>
</li>
<li>
<p>From the <span class="bold">Administration</span> menu, select <span class="bold">Security</span>, then <span class="bold">Users</span>.</p>
</li>
<li>
<p>In the Users page, select the user <span class="bold">SCOTT</span>, and in the View User page, click <span class="bold">Edit</span>.</p>
<p>The Edit User page appears.</p>
</li>
<li>
<p>Enter the following settings:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Enter Password</span> and <span class="bold">Confirm Password</span>: If the <code class="codeph">SCOTT</code> account password status is expired, then enter a new password. Enter any password that is secure, according to the password guidelines described in <span class="q">&#34;<a href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm#GUID-051F2B63-832D-4302-B5EC-B4523BF2CC23" title="For greater security, Oracle provides a set of requirements for creating passwords.">Requirements for Creating Passwords</a>&#34;</span>.</p>
</li>
<li>
<p><span class="bold">Status</span>: Click <span class="bold">Unlocked</span>.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">Apply</span>.</p>
</li>
<li>
<p>Do not exit Enterprise Manager.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG94478"></a>
<div class="props_rev_3"><a id="GUID-CFC31826-5880-477B-B59E-1D56354A873C"></a>
<h4 id="TDPSG-GUID-CFC31826-5880-477B-B59E-1D56354A873C" class="sect4">Granting User SCOTT the SELECT Privilege on the OE.CUSTOMERS Table</h4>
<div>
<p>After you enable user <code class="codeph">SCOTT</code>, you can grant him the appropriate privileges.</p>
<div class="section">
<p class="subhead3">To grant user SCOTT the SELECT privilege on the OE.CUSTOMERS table:</p>
<ol>
<li>
<p>Log in to SQL*Plus as user <code class="codeph">OE</code>.</p>
<pre dir="ltr">sqlplus oe
Enter password: <span class="italic">password</span>
Connected. 
</pre></li>
<li>
<p>Grant user <code class="codeph">SCOTT</code> the <code class="codeph">SELECT</code> privilege on the <code class="codeph">OE.CUSTOMERS</code> table.</p>
<pre dir="ltr">GRANT SELECT ON CUSTOMERS TO SCOTT;
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="TDPSG66523"></a>
<div class="props_rev_3"><a id="GUID-D7D7FCFC-4AEB-4249-8D8E-855BD1074FD4"></a>
<h3 id="TDPSG-GUID-D7D7FCFC-4AEB-4249-8D8E-855BD1074FD4" class="sect3">Step 3: Select from the OE.CUSTOMERS Table as Users SYS and SCOTT</h3>
<div>
<p>At this stage, both users <code class="codeph">SYS</code> and <code class="codeph">SCOTT</code> can select from the <code class="codeph">OE.CUSTOMERS</code> table, because <code class="codeph">SYS</code> has administrative privileges and because <code class="codeph">SCOTT</code> has an explicit <code class="codeph">SELECT</code> privilege granted by user <code class="codeph">OE</code>.</p>
<div class="section">
<p class="subhead3">To select from OE.CUSTOMERS as users SYS and SCOTT:</p>
<ol>
<li>
<p>In SQL*Plus, connect as user <code class="codeph">SYS</code> using the <code class="codeph">SYSDBA</code> administrative privilege</p>
<pre dir="ltr">sqlplus sys as sysdba
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Select from the <code class="codeph">OE.CUSTOMERS</code> table as follows:</p>
<pre dir="ltr">SELECT COUNT(*) FROM OE.CUSTOMERS;
</pre>
<p>The following output should appear</p>
<pre dir="ltr">COUNT(*)
--------
     319
</pre></li>
<li>
<p>Connect as user <code class="codeph">SCOTT</code>, and then perform the same <code class="codeph">SELECT</code> statement.</p>
<pre dir="ltr">CONNECT SCOTT
Enter password: <span class="italic">password</span>
Connected.

SELECT COUNT(*) FROM OE.CUSTOMERS;
</pre>
<p>The following output should appear:</p>
<pre dir="ltr">COUNT(*)
--------
     319
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG66524"></a>
<div class="props_rev_3"><a id="GUID-122C9114-2A5B-4952-A2CB-134D15511DFF"></a>
<h3 id="TDPSG-GUID-122C9114-2A5B-4952-A2CB-134D15511DFF" class="sect3">Step 4: Create a Realm to Protect the OE.CUSTOMERS Table</h3>
<div>
<p>To restrict the <code class="codeph">OE.CUSTOMER</code> table from administrative access, you must create a realm around the <code class="codeph">OE</code> schema.</p>
<div class="section">
<p class="subhead3">To create a realm around the OE schema:</p>
<ol>
<li>
<p>In Enterprise Manager, click <span class="bold">Log Out</span> to log out of the database.</p>
</li>
<li>
<p>In the Confirmation dialog box, select <span class="bold">Logout of (Database Instance)</span> and then select the <span class="bold">Display login page after logout</span> check box. Then click <span class="bold">Logout</span>.</p>
</li>
<li>
<p>Log in as a user who has been granted the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> account (for example, <code class="codeph">dbv_owner</code>). Connect using the <span class="bold">Normal Role</span> role.</p>
</li>
<li>
<p>From the <span class="bold">Administration</span> menu, select <span class="bold">Security</span>, then <span class="bold">Database Vault</span>.</p>
</li>
<li>
<p>In the Database Vault page, select the <span class="bold">Administration</span> tab.</p>
</li>
<li>
<p>Under Database Vault Components, select <span class="bold">Realms</span>. (It should be selected by default.)</p>
<p>The Realms page appears. (It should be selected by default.)</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
</li>
<li>
<p>In the Create Realm page, enter the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Name</span>: <code class="codeph">OE Protections</code></p>
</li>
<li>
<p><span class="bold">Description</span>: <code class="codeph">Realm to protect the OE schema</code></p>
</li>
<li>
<p><span class="bold">Status</span>: Click <span class="bold">Enabled</span>.</p>
</li>
<li>
<p><span class="bold">Audit Options</span>: Select <span class="bold">Audit on Failure</span>.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The Realm Secured Objects page appears.</p>
</li>
<li>
<p>Click <span class="bold">Add</span>.</p>
</li>
<li>
<p>In the Add Secured Objects window, add the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Owner:</span> <code class="codeph">OE</code></p>
</li>
<li>
<p><span class="bold">Object Type:</span> <code class="codeph">TABLE</code></p>
</li>
<li>
<p><span class="bold">Object Name:</span> <code class="codeph">%</code></p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The <code class="codeph">OE</code> table is now listed as a realm-secured object.</p>
<div class="figure" id="GUID-122C9114-2A5B-4952-A2CB-134D15511DFF__GUID-8EC0EA0C-221A-46BA-8B71-E941ECE89A44"><img width="742" height="366" src="img/GUID-E0F702D8-535A-4979-9355-A7BB6ACE800B-default.gif" alt="Description of GUID-E0F702D8-535A-4979-9355-A7BB6ACE800B-default.gif follows" title="Description of GUID-E0F702D8-535A-4979-9355-A7BB6ACE800B-default.gif follows"/><br/>
<a href="img_text/GUID-E0F702D8-535A-4979-9355-A7BB6ACE800B-default.htm">Description of the illustration GUID-E0F702D8-535A-4979-9355-A7BB6ACE800B-default.gif</a></div>
<!-- class="figure" --></li>
<li>
<p>Click <span class="bold">Next</span>.</p>
</li>
<li>
<p>In the Realm Authorizations page, click <span class="bold">Add</span>.</p>
<p>The Add Authorizations window appears.</p>
</li>
<li>
<p>Enter the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Realm Authorization Grantee:</span> Enter <code class="codeph">OE</code>.</p>
</li>
<li>
<p><span class="bold">Realm Authorization Type:</span> Select <span class="bold">Owner</span>.</p>
</li>
<li>
<p><span class="bold">Realm Authorization Ruleset:</span> Enter <code class="codeph">Disabled</code>.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>, and then click <span class="bold">Next</span>.</p>
<p>The Review page appears, so that you can check your settings.</p>
</li>
<li>
<p>Click <span class="bold">Finish</span>.</p>
<p>The Realms page now shows the OE Protections realm.</p>
<div class="figure" id="GUID-122C9114-2A5B-4952-A2CB-134D15511DFF__GUID-B2A28BA0-1CEA-4AD7-A1DB-05727A660E13"><img width="934" height="419" src="img/GUID-C82352EC-369C-4D7C-8B6D-FD3832F5F818-default.gif" alt="Description of GUID-C82352EC-369C-4D7C-8B6D-FD3832F5F818-default.gif follows" title="Description of GUID-C82352EC-369C-4D7C-8B6D-FD3832F5F818-default.gif follows"/><br/>
<a href="img_text/GUID-C82352EC-369C-4D7C-8B6D-FD3832F5F818-default.htm">Description of the illustration GUID-C82352EC-369C-4D7C-8B6D-FD3832F5F818-default.gif</a></div>
<!-- class="figure" --></li>
<li>
<p>Do not exit Enterprise Manager.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG66525"></a>
<div class="props_rev_3"><a id="GUID-45802D3A-5B01-4FE6-8649-45B43C2EBBC1"></a>
<h3 id="TDPSG-GUID-45802D3A-5B01-4FE6-8649-45B43C2EBBC1" class="sect3">Step 5: Test the OE Protections Realm</h3>
<div>
<p>Now that you have created a realm to protect the <code class="codeph">OE</code> schema, you are ready to test it.</p>
<div class="section">
<p>You do not need to restart the database session, because any protections you define in Oracle Database Vault take effect right away.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To test the OE Protections realm:</p>
<ol>
<li>
<p>Connect to SQL*Plus as user <code class="codeph">SYS</code> using the <code class="codeph">SYSDBA</code> administrative privilege.</p>
<pre dir="ltr">CONNECT SYS AS SYSDBA
Enter password: <span class="italic">password</span>
Connected.
</pre>
<p>If you were connected as <code class="codeph">SYS</code> before, then you do not need to reconnect. The changes that you just made take effect immediately.</p>
</li>
<li>
<p>Try selecting from the <code class="codeph">OE.CUSTOMERS</code> table.</p>
<pre dir="ltr">SELECT COUNT(*) FROM OE.CUSTOMERS;
</pre>
<p>The following output should appear:</p>
<pre dir="ltr">ERROR at line 1:
ORA-01031: insufficient privileges
</pre>
<p>The OE Protections realm prevents the administrative user from accessing the <code class="codeph">OE.CUSTOMERS</code> table. Because you defined the OE Protections realm to protect the entire schema, the administrative user does not have access to any of the other tables in <code class="codeph">OE</code>, either.</p>
</li>
<li>
<p>Connect as user <code class="codeph">SCOTT</code>.</p>
<pre dir="ltr">CONNECT SCOTT
Enter password: <span class="italic">password</span>
Connected.
</pre></li>
<li>
<p>Try selecting from the <code class="codeph">OE.CUSTOMERS</code> table.</p>
<pre dir="ltr">SELECT COUNT(*) FROM OE.CUSTOMERS;
</pre>
<p>The following output should appear:</p>
<pre dir="ltr">  COUNT(*)
----------
       319
</pre>
<p>The OE Protections realm does not apply to user <code class="codeph">SCOTT</code> because user <code class="codeph">OE</code> has explicitly granted this user the <code class="codeph">SELECT</code> privilege on the <code class="codeph">OE.CUSTOMERS</code> table. Oracle Database Vault sets up the protections that you need, but does not override the explicit privileges you have defined. <code class="codeph">SCOTT</code> still can query this table.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG66526"></a>
<div class="props_rev_3"><a id="GUID-E832CDE1-2028-4340-9A9A-6995957B4E02"></a>
<h3 id="TDPSG-GUID-E832CDE1-2028-4340-9A9A-6995957B4E02" class="sect3">Step 6: Optionally, Remove the Components for This Tutorial</h3>
<div>
<p>You can remove the components that you created for this tutorial if you no longer need them.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm#GUID-92276306-1CC4-4655-BF2A-47D5F84C09E7" title="You can use Enterprise Manager to drop the OE protections realm.">Dropping the OE Protections Realm</a></p>
</li>
<li>
<p><a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm#GUID-5ECA8B95-88D7-44C0-977D-CCA7A8AF9ED0" title="To revoke the SELECT privilege on OE.CUSTOMERS from user SCOTT, you can use SQL*Plus.">Revoking the SELECT Privilege on OE.CUSTOMERS from User SCOTT</a></p>
</li>
<li>
<p><a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm#GUID-8FF74702-D5CA-492E-8C00-F0B8847372F4" title="You can use SQL*Plus to disable Oracle Database Vault and Oracle Label Security.">Disabling Oracle Database Vault and Oracle Label Security</a></p>
</li>
</ul>
</div>
<a id="TDPSG94479"></a>
<div class="props_rev_3"><a id="GUID-92276306-1CC4-4655-BF2A-47D5F84C09E7"></a>
<h4 id="TDPSG-GUID-92276306-1CC4-4655-BF2A-47D5F84C09E7" class="sect4">Dropping the OE Protections Realm</h4>
<div>
<p>You can use Enterprise Manager to drop the OE protections realm.</p>
<div class="section">
<p class="subhead3">To drop the OE Protections realm:</p>
<ol>
<li>
<p>In Enterprise Manager, if you have logged out of the Database Vault Administrator pages, then log back in as the Database Vault Owner account that you created when you installed Oracle Database Vault (for example, <code class="codeph">dbv_owner</code>).</p>
</li>
<li>
<p>In the Administration page, under Database Vault Feature Administration, click <span class="bold">Realms</span>.</p>
<p>The Realms page appears.</p>
</li>
<li>
<p>Select <span class="bold">OE Protections</span> from the list of realms, and then click <span class="bold">Delete</span>. Then click <span class="bold">Yes</span> in the Confirmation page.</p>
</li>
<li>
<p>Log out of Oracle Database Vault Administrator.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG94480"></a>
<div class="props_rev_3"><a id="GUID-5ECA8B95-88D7-44C0-977D-CCA7A8AF9ED0"></a>
<h4 id="TDPSG-GUID-5ECA8B95-88D7-44C0-977D-CCA7A8AF9ED0" class="sect4">Revoking the SELECT Privilege on OE.CUSTOMERS from User SCOTT</h4>
<div>
<p>To revoke the <code class="codeph">SELECT</code> privilege on <code class="codeph">OE.CUSTOMERS</code> from user <code class="codeph">SCOTT</code>, you can use SQL*Plus.</p>
<div class="section">
<p class="subhead3">To revoke the SELECT privilege on OE.CUSTOMERS from user SCOTT:</p>
<ol>
<li>
<p>In SQL*Plus, connect as user <code class="codeph">OE</code>.</p>
<pre dir="ltr">CONNECT OE
Enter password: <span class="italic">password</span>
Connected. 
</pre></li>
<li>
<p>Revoke the <code class="codeph">SELECT</code> privilege from user <code class="codeph">SCOTT</code>.</p>
<pre dir="ltr">REVOKE SELECT ON CUSTOMERS FROM SCOTT;
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG94481"></a>
<div class="props_rev_3"><a id="GUID-8FF74702-D5CA-492E-8C00-F0B8847372F4"></a>
<h4 id="TDPSG-GUID-8FF74702-D5CA-492E-8C00-F0B8847372F4" class="sect4">Disabling Oracle Database Vault and Oracle Label Security</h4>
<div>
<p>You can use SQL*Plus to disable Oracle Database Vault and Oracle Label Security.</p>
<div class="section">
<p class="subhead3">To disable Oracle Database Vault and if necessary, Oracle Label Security:</p>
<ol>
<li>
<p>Connect as a user who has been granted the <code class="codeph">DV_OWNER</code> role.</p>
<p>For example:</p>
<pre dir="ltr">CONNECT dbv_owner
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Run the following procedure to disable Oracle Database Vault:</p>
<pre dir="ltr">EXEC DVSYS.DBMS_MACADM.DISABLE_DV;
</pre></li>
<li>
<p>Connect as user <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege</p>
<pre dir="ltr">CONNECT SYS AS SYSDBA
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Run the following procedure to disable Oracle Label Security:</p>
<pre dir="ltr">EXEC LBACSYS.OLS_ENFORCEMENT.DISABLE_OLS;
</pre>
<p>When you register and enable Oracle Database Vault, Oracle Label Security is also enabled. If you choose to not disable Oracle Database Vault, then do not disable Oracle Label Security, because Database Vault uses Oracle Label Security. (This guide assumes that you are disabling Database Vault.) However, you can have Oracle Label Security enabled and Database Vault disabled.</p>
</li>
<li>
<p>Restart the database.</p>
<pre dir="ltr">SHUTDOWN IMMEDIATE
STARTUP
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4040">
<tr>
<td class="cellalignment4054">
<table class="cellalignment4045">
<tr>
<td class="cellalignment4044"><a href="GUID-61259237-5514-4531-AFB4-CF716F93F1E5.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4044"><a href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4056">
<table class="cellalignment4043">
<tr>
<td class="cellalignment4044"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4044"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4044"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4044"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4044"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4044"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>