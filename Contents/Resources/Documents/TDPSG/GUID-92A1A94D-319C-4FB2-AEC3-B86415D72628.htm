<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-106586"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Restricting%20Access%20with%20Oracle%C2%A0Virtual%C2%A0Private%C2%A0Database"></a><title>Restricting Access with Oracle&nbsp;Virtual&nbsp;Private&nbsp;Database</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="You can use Oracle Virtual Private Database to restrict access to data based on a dynamic WHERE clause that is added to the SQL statements that users enter."/>
<meta name="keywords" content="VPD, Oracle Virtual Private Database, Virtual Private Database, Oracle Virtual Private Database (VPD), about, sensitive data, components, session information, retrieving, user session information, retrieving, application contexts, Oracle Virtual Private Database, used with, nondatabase users, advantages, tutorial, tutorials"/>
<meta name="dcterms.created" content="2017-06-16T10:04:00Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database 2 Day + Security Guide"/>
<meta name="dcterms.identifier" content="E17609-26"/>
<meta name="dcterms.isVersionOf" content="TDPSG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-66C153C6-CE5C-4D5F-888E-40A06628C708.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17609-26.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628"></a> <span id="PAGE" style="display:none;">11/15</span> <!-- End Header -->
<a id="TDPSG94442"></a>
<h1 id="TDPSG-GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628" class="sect1"><span class="enumeration_chapter">6</span> Restricting Access with Oracle&nbsp;Virtual&nbsp;Private&nbsp;Database</h1>
<div>
<p>You can use Oracle Virtual Private Database to restrict access to data based on a dynamic <code class="codeph">WHERE</code> clause that is added to the SQL statements that users enter.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm#GUID-3E74F58B-35D8-4B55-9F18-ACC6C93ED49B" title="Oracle Virtual Private Database (VPD) enables you to dynamically add a WHERE clause in any SQL statement that a user executes. The WHERE clause filters the data the user is allowed to access, based on the identity of a user.">About Oracle Virtual Private Database</a></p>
</li>
<li>
<p><a href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm#GUID-5915F7B5-AC99-4A71-8663-05421AD5C620" title="In this tutorial, you create a sales representative user account and an account for a finance manager. Then, you create an Oracle Virtual Private Database policy that will limit the data access to these users based on their roles.">Tutorial: Limiting Access to Data Based on the Querying User</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628__GUID-FD920537-32BA-46B0-BD74-BAC9AFD4DE72">
<p class="notep1">See Also:</p>
<p><a class="olink DBSEG007" target="_blank" href="../DBSEG/vpd.htm#DBSEG007"><span class="italic">Oracle Database Security Guide</span></a> for detailed information about how Oracle Virtual Private Database works</p>
</div>
</div>
<a id="TDPSG30341"></a>
<div class="props_rev_3"><a id="GUID-3E74F58B-35D8-4B55-9F18-ACC6C93ED49B"></a>
<h2 id="TDPSG-GUID-3E74F58B-35D8-4B55-9F18-ACC6C93ED49B" class="sect2">About Oracle Virtual Private Database</h2>
<div>
<p>Oracle Virtual Private Database (VPD) enables you to dynamically add a <code class="codeph">WHERE</code> clause in any SQL statement that a user executes. The <code class="codeph">WHERE</code> clause filters the data the user is allowed to access, based on the identity of a user.</p>
<p>This feature restricts row and column level data access by creating a policy that enforces a <code class="codeph">WHERE</code> clause for all SQL statements that query the database. The <code class="codeph">WHERE</code> clause allows only users whose identity passes the security policy, and hence, have access to the data that you want to protect. You create and manage the VPD policy at the database table or view level, which means that you do not modify the applications that access the database.</p>
<p>In a multitenant environment, each Virtual Private Database policy applies only to the current pluggable database (PDB).</p>
<p>An Oracle Virtual Private Database policy has the following components, which are typically created in the schema of the security administrator:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">A PL/SQL function to append the dynamic WHERE clause to SQL statements that affect the Virtual Private Database tables.</span> For example, a PL/SQL function translates the following <code class="codeph">SELECT</code> statement:</p>
<pre dir="ltr">SELECT * FROM ORDERS;
</pre>
<p>to the following:</p>
<pre dir="ltr">SELECT * FROM ORDERS
  WHERE SALES_REP_ID = 159;
</pre>
<p>In this example, the user can only view orders by Sales Representative 159. The PL/SQL function used to generate this <code class="codeph">WHERE</code> clause is as follows:</p>
<pre dir="ltr">CREATE OR REPLACE FUNCTION auth_orders( 
 schema_var IN VARCHAR2, 
 table_var  IN VARCHAR2 
) 
RETURN VARCHAR2
IS  
 return_val VARCHAR2 (400); 
BEGIN 
 return_val := &#39;SALES_REP_ID = 159&#39;;
 RETURN return_val; 
END auth_orders; 
/
</pre>
<p>In this example:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">schema_var and table_var</code>: Create parameters to store the schema name, <code class="codeph">OE</code>, and table name, <code class="codeph">ORDERS</code>. (The second parameter, <code class="codeph">table_var</code>, for the table, can also be used for views and synonyms.) Always create these two parameters in this order: create the parameter for the schema first, followed by the parameter for the table, view, or synonym object. Note that the function itself does not specify the <code class="codeph">OE</code> schema or its <code class="codeph">ORDERS</code> table. The Virtual Private Database policy you create uses these parameters to specify the <code class="codeph">OE.ORDERS</code> table.</p>
</li>
<li>
<p><code class="codeph">RETURN VARCHAR2</code>: Returns the string that will be used for the <code class="codeph">WHERE</code> predicate clause.</p>
</li>
<li>
<p><code class="codeph">IS ... RETURN return_val</code>: Encompasses the creation of the <code class="codeph">WHERE SALES_REP_ID = 159</code> predicate.</p>
</li>
</ul>
<p>You can design the <code class="codeph">WHERE</code> clause to filter the user information based on the session information of that user, such as the user ID. To do so, you create an application context. Application contexts can be used to authenticate both database and nondatabase users. An application context is a name-value pair. For example:</p>
<pre dir="ltr">SELECT * FROM oe.orders 
 WHERE sales_rep_id = SYS_CONTEXT(&#39;userenv&#39;,&#39;session_user&#39;); 
</pre>
<p>In this example, the <code class="codeph">WHERE</code> clause uses the <code class="codeph">SYS_CONTEXT</code> PL/SQL function to retrieve the user session ID (<code class="codeph">session_user</code>) designated by the <code class="codeph">userenv</code> context. See <a class="olink DBSEG011" target="_blank" href="../DBSEG/app_context.htm#DBSEG011"><span class="italic">Oracle Database Security Guide</span></a> for detailed information about application contexts.</p>
</li>
<li>
<p><span class="bold">A way to attach the policy the package.</span> Use the <code class="codeph">DBMS_RLS.ADD_POLICY</code> function to attach the policy to the package. Before you can use the <code class="codeph">DBMS_RLS</code> PL/SQL package, you must be granted <code class="codeph">EXECUTE</code> privileges on it. User <code class="codeph">SYS</code> owns the <code class="codeph">DBMS_RLS</code> package.</p>
</li>
</ul>
<p>The advantages of enforcing row-level security at the database level rather than at the application program level are enormous. Because the security policy is implemented in the database itself, where the data to be protected is, this data is less likely to be vulnerable to attacks by different data access methods. This layer of security is present and enforced no matter how users (or intruders) try to access the data it protects. The maintenance overhead is low because you maintain the policy in one place, the database, rather than having to maintain it in the applications that connect to this database. The policies that you create provide a great deal of flexibility because you can write them for specific DML operations.</p>
<div class="infoboxnotealso" id="GUID-3E74F58B-35D8-4B55-9F18-ACC6C93ED49B__GUID-5DE86943-DE1E-408F-A233-CEF7F4642709">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink DBSEG007" target="_blank" href="../DBSEG/vpd.htm#DBSEG007"><span class="italic">Oracle Database Security Guide</span></a> for detailed information about how Oracle Virtual Private Database works</p>
</li>
</ul>
</div>
</div>
</div>
<a id="TDPSG30343"></a>
<div class="props_rev_3"><a id="GUID-5915F7B5-AC99-4A71-8663-05421AD5C620"></a>
<h2 id="TDPSG-GUID-5915F7B5-AC99-4A71-8663-05421AD5C620" class="sect2">Tutorial: Limiting Access to Data Based on the Querying User</h2>
<div>
<p>In this tutorial, you create a sales representative user account and an account for a finance manager. Then, you create an Oracle Virtual Private Database policy that will limit the data access to these users based on their roles.</p>
<p>You can use Oracle Database limit access to data based on who the querying user is. For example, a sales representative should only see the orders that he or she have created, but other employees should not.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm#GUID-F07E2E51-FC9B-4A5C-AF27-B0A106128A4D" title="In this tutorial, you will use the ORDERS table in the Order Entry database, OE.">About Limiting Access to Data Based on the Querying User</a></p>
</li>
<li>
<p><a href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm#GUID-B3F9DD82-DF76-4568-8867-0A019E31492D" title="You are ready to create accounts for the employees who must access the OE.ORDERS table.">Step 1: Create User Accounts for This Tutorial</a></p>
</li>
<li>
<p><a href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm#GUID-7ED4B907-3078-4FFE-A688-99B81581F45A" title="The sec_admin security administrator account enables you to perform the tasks a security administrator can perform.">Step 2: If Necessary_ Create the Security Administrator Account</a></p>
</li>
<li>
<p><a href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm#GUID-BF4E62E1-B44D-44B5-8961-240D9841343D" title="The sec_admin account user must have privileges to use the DBMS_RLS packages.">Step 3: Update the Security Administrator Account</a></p>
</li>
<li>
<p><a href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm#GUID-88343866-D4D0-4DD2-B63A-AAF3D5F3CF0D" title="The f_policy_orders policy is a PL/SQL function that defines the policy used to filter users who query the ORDERS table.">Step 4: Create the F_POLICY_ORDERS Policy Function</a></p>
</li>
<li>
<p><a href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm#GUID-D94D2329-B75F-4DA8-ADFC-15F70401BB1C" title="Now that you have created the Virtual Private Database policy function, you can create the Virtual Private Database policy, accesscontrol_orders, and then attach it to the ORDERS table.">Step 5: Create the ACCESSCONTROL_ORDERS Virtual Private Database Policy</a></p>
</li>
<li>
<p><a href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm#GUID-5B4C2D71-286F-4445-9937-B4C24D4181B1" title="After you create the accesscontrol_orders policy, you can test it by logging on as each user and attempting to select data from the ORDERS table.">Step 6: Test the ACCESSCONTROL_ORDERS Virtual Private Database Policy</a></p>
</li>
<li>
<p><a href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm#GUID-B3F663C0-2B80-468C-A339-711D025AA90E" title="You can remove the components that you created for this tutorial if you no longer need them.">Step 7: Optionally_ Remove the Components for This Tutorial</a></p>
</li>
</ul>
</div>
<a id="TDPSG94482"></a>
<div class="props_rev_3"><a id="GUID-F07E2E51-FC9B-4A5C-AF27-B0A106128A4D"></a>
<h3 id="TDPSG-GUID-F07E2E51-FC9B-4A5C-AF27-B0A106128A4D" class="sect3">About Limiting Access to Data Based on the Querying User</h3>
<div>
<p>In this tutorial, you will use the <code class="codeph">ORDERS</code> table in the Order Entry database, <code class="codeph">OE</code>.</p>
<p>This table contains the following information:</p>
<pre dir="ltr">Name             Null?    Type
---------------- -------- ---------------------------------
ORDER_ID         NOTNULL  NUMBER(12)
ORDER_DATE       NOTNULL  TIMESTAMP(6) WITH LOCAL TIME ZONE
ORDER_MODE                VARCHAR2(8)
CUSTOMER_ID      NOTNULL  NUMBER(6)
ORDER_STATUS              NUMBER(2)
ORDER_TOTAL               NUMBER(8,2)
SALES_REP_ID              NUMBER(6)
PROMOTION_ID              NUMBER(6)
</pre>
<p>The Virtual Private Database policy that you will create is associated with a PL/SQL function. Because VPD policies are controlled by PL/SQL functions or procedures, you can design the policy to restrict access in many different ways. For this tutorial, the function you create will restrict access by the employees based on to whom they report. The function will restrict the customer access based on the customer&#39;s ID.</p>
<p>You may want to store VPD policies in a database account separate from the database administrator and from application accounts. In this tutorial, you will use the <code class="codeph">sec_admin</code> account, which was created in <span class="q">&#34;<a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-A186FD93-91E2-42A0-8F21-DB15BD925F4A" title="This tutorial shows how two employees, Matthew Weiss and Winston Taylor, try to gain information from the OE.ORDERS table.">Tutorial: Creating a Secure Application Role</a>&#34;</span>, to create the VPD policy. This provides better security by separating the VPD policy from the applications tables.</p>
<p>To restrict access based on the sensitivity of row data, you can use Oracle Label Security (OLS). OLS lets you categorize data into different levels of security, with each level determining who can access the data in that row. This way, the data access restriction is focused on the data itself, rather than on user privileges. See <a href="GUID-72D524FF-5A86-495A-9D12-14CB13819D42.htm#GUID-72D524FF-5A86-495A-9D12-14CB13819D42" title="Oracle Label Security enables you to enforce row-level security.">Enforcing Row-Level Security with Oracle&nbsp;Label Security</a> for more information.</p>
</div>
</div>
<a id="TDPSG33432"></a>
<div class="props_rev_3"><a id="GUID-B3F9DD82-DF76-4568-8867-0A019E31492D"></a>
<h3 id="TDPSG-GUID-B3F9DD82-DF76-4568-8867-0A019E31492D" class="sect3">Step 1: Create User Accounts for This Tutorial</h3>
<div>
<p>You are ready to create accounts for the employees who must access the <code class="codeph">OE.ORDERS</code> table.</p>
<div class="section">
<p class="subhead3">To create the employee user accounts:</p>
<ol>
<li>
<p>In Enterprise Manager, access the Database home page for your target database as user <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege.</p>
<p>See <a class="olink ADMQS033" target="_blank" href="../ADMQS/GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4.htm#ADMQS033"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information.</p>
</li>
<li>
<p>From the <span class="bold">Administration</span> menu, select <span class="bold">Security</span>, then <span class="bold">Users</span>.</p>
</li>
<li>
<p>In the Users Page, click <span class="bold">Create</span>.</p>
</li>
<li>
<p>In the Create User page, enter the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Name</span>: <code class="codeph">LDORAN</code> (to create the user account Louise Doran)</p>
</li>
<li>
<p><span class="bold">Profile</span>: <code class="codeph">DEFAULT</code></p>
</li>
<li>
<p><span class="bold">Authentication</span>: <code class="codeph">Password</code></p>
</li>
<li>
<p><span class="bold">Enter Password</span> and <span class="bold">Confirm Password</span>: Enter a password that meets the requirements in <span class="q">&#34;<a href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm#GUID-051F2B63-832D-4302-B5EC-B4523BF2CC23" title="For greater security, Oracle provides a set of requirements for creating passwords.">Requirements for Creating Passwords</a>&#34;</span>.</p>
</li>
<li>
<p><span class="bold">Default Tablespace</span>: <code class="codeph">EXAMPLE</code></p>
</li>
<li>
<p><span class="bold">Temporary Tablespace</span>: <code class="codeph">TEMP</code></p>
</li>
<li>
<p><span class="bold">Status</span>: <code class="codeph">Unlocked</code></p>
</li>
</ul>
</li>
<li>
<p>Select the <span class="bold">Object Privileges</span> tab.</p>
</li>
<li>
<p>From the <span class="bold">Select Object Type</span> list, select <span class="bold">Table</span>, and then click <span class="bold">Add</span>.</p>
</li>
<li>
<p>In the Add Table Object Privileges page, in the <span class="bold">Select Table Objects</span> field, enter the following text:</p>
<pre dir="ltr">OE.ORDERS
</pre>
<p>Do not include spaces in this text.</p>
</li>
<li>
<p>In the Available Privileges list, select <span class="bold">SELECT</span>, and then click <span class="bold">Move</span> to move it to the Selected Privileges list. Click <span class="bold">OK</span>.</p>
<p>The Create User page appears, with <code class="codeph">SELECT</code> privileges for <code class="codeph">OE.ORDERS</code> listed.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The Users page appears, with user <code class="codeph">ldoran</code> is listed in the User Name column.</p>
</li>
<li>
<p>Select the selection button for user <span class="bold">LDORAN</span>, and from the <span class="bold">Actions</span> list, select <span class="bold">Create Like</span>. Then, click <span class="bold">Go</span>.</p>
</li>
<li>
<p>In the Create User page, enter the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Name</span>: <code class="codeph">LPOPP</code> (to create the user account for Finance Manager Luis Popp.)</p>
</li>
<li>
<p><span class="bold">Enter Password</span> and <span class="bold">Confirm Password</span>: Enter a password that meets the requirements in <span class="q">&#34;<a href="GUID-3EC7A894-D620-4497-AFB1-64EB8C33D854.htm#GUID-051F2B63-832D-4302-B5EC-B4523BF2CC23" title="For greater security, Oracle provides a set of requirements for creating passwords.">Requirements for Creating Passwords</a>&#34;</span>.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p>Both employee accounts have been created, and they have identical privileges. If you check the privileges for user <code class="codeph">LPOPP</code>, you will see that they are identical to those of user <code class="codeph">LDORAN</code>&#39;s. At this stage, if either of these users performs a <code class="codeph">SELECT</code> statement on the <code class="codeph">OE.ORDERS</code> table, he or she will be able to see all of its data.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG33431"></a>
<div class="props_rev_3"><a id="GUID-7ED4B907-3078-4FFE-A688-99B81581F45A"></a>
<h3 id="TDPSG-GUID-7ED4B907-3078-4FFE-A688-99B81581F45A" class="sect3">Step 2: If Necessary, Create the Security Administrator Account</h3>
<div>
<p>The <code class="codeph">sec_admin</code> security administrator account enables you to perform the tasks a security administrator can perform.</p>
<div class="section">
<p>In <span class="q">&#34;<a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-A186FD93-91E2-42A0-8F21-DB15BD925F4A" title="This tutorial shows how two employees, Matthew Weiss and Winston Taylor, try to gain information from the OE.ORDERS table.">Tutorial: Creating a Secure Application Role</a>&#34;</span>, you created the <code class="codeph">sec_admin</code> for that tutorial. You can use that account for this tutorial.</p>
<p>If you have not yet created this account, then follow the steps in <span class="q">&#34;<a href="GUID-800F33CF-26E2-4246-86D5-7DD5B3B7B2ED.htm#GUID-61DD01F3-6446-4677-9002-C522EDCC7298" title="For greater security, you should apply separation of duty concepts when you assign responsibilities to the system administrators on your staff.">Step 2: Create a Security Administrator Account</a>&#34;</span> to create <code class="codeph">sec_admin</code>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG33437"></a>
<div class="props_rev_3"><a id="GUID-BF4E62E1-B44D-44B5-8961-240D9841343D"></a>
<h3 id="TDPSG-GUID-BF4E62E1-B44D-44B5-8961-240D9841343D" class="sect3">Step 3: Update the Security Administrator Account</h3>
<div>
<p>The <code class="codeph">sec_admin</code> account user must have privileges to use the <code class="codeph">DBMS_RLS</code> packages.</p>
<div class="section">
<p>User <code class="codeph">SYS</code> owns this package, so you must log on as <code class="codeph">SYS</code> to grant these package privileges to <code class="codeph">sec_admin</code>. The user <code class="codeph">sec_admin</code> also must have <code class="codeph">SELECT</code> privileges on the <code class="codeph">CUSTOMERS</code> table in the <code class="codeph">OE</code> schema and the <code class="codeph">EMPLOYEES</code> table in the <code class="codeph">HR</code> schema.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To grant sec_admin privileges to use the DBMS_RLS package:</p>
<ol>
<li>
<p>In Enterprise Manager, access the Database home page and ensure that you are logged in as user <code class="codeph">SYS</code> with the <span class="bold">SYSDBA</span> role selected.</p>
<p>See <a class="olink ADMQS033" target="_blank" href="../ADMQS/GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4.htm#ADMQS033"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information.</p>
</li>
<li>
<p>From the <span class="bold">Administration</span> menu, select <span class="bold">Security</span>, then <span class="bold">Users</span>.</p>
</li>
<li>
<p>In the Users Page, select the <span class="bold">SEC_ADMIN</span> user, and in the View User page, click <span class="bold">Edit</span>.</p>
</li>
<li>
<p>In the Edit User page, click <span class="bold">Object Privileges</span>.</p>
</li>
<li>
<p>From the <span class="bold">Select Object Type</span> list, select <span class="bold">Package</span>, and then click <span class="bold">Add</span>.</p>
</li>
<li>
<p>In the Add Package Object Privileges page, under Select Package Objects, enter <code class="codeph">SYS.DBMS_RLS</code> so that <code class="codeph">sec_admin</code> will have access to the <code class="codeph">DBMS_RLS</code> package.</p>
</li>
<li>
<p>Under Available Privileges, select <span class="bold">EXECUTE</span>, and then click <span class="bold">Move</span> to move it to the Selected Privileges list.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
<li>
<p>In the Edit User page, from the <span class="bold">Select Object Type</span> list, select <span class="bold">Table</span>, and then click <span class="bold">Add</span>.</p>
</li>
<li>
<p>In the Add Table Object Privileges page, in the <span class="bold">Select</span> <span class="bold">Table Objects</span> field, enter <code class="codeph">HR.EMPLOYEES</code> so that <code class="codeph">sec_admin</code> will have access to the <code class="codeph">HR.EMPLOYEES</code> table.</p>
</li>
<li>
<p>Under Available Privileges, select <span class="bold">SELECT</span>, and then click <span class="bold">Move</span> to move it to the Selected Privileges list.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The Edit User page appears. It shows that user <code class="codeph">sec_admin</code> has object privileges for the <code class="codeph">HR.EMPLOYEES</code> table and <code class="codeph">DBMS_RLS</code> PL/SQL package. Ensure that you do not select the grant option for either of these objects.</p>
</li>
<li>
<p>Click <span class="bold">Apply</span>.</p>
<p>All the changes you have made, in this case, the addition of the two object privileges, are applied to the <code class="codeph">sec_admin</code> user account.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG33433"></a>
<div class="props_rev_3"><a id="GUID-88343866-D4D0-4DD2-B63A-AAF3D5F3CF0D"></a>
<h3 id="TDPSG-GUID-88343866-D4D0-4DD2-B63A-AAF3D5F3CF0D" class="sect3">Step 4: Create the F_POLICY_ORDERS Policy Function</h3>
<div>
<p>The <code class="codeph">f_policy_orders</code> policy is a PL/SQL function that defines the policy used to filter users who query the <code class="codeph">ORDERS</code> table.</p>
<div class="section">
<p>To filter the users, the policy function uses the <code class="codeph">SYS_CONTEXT</code> PL/SQL function to retrieve session information about users who are logging in to the database.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To create the application context and its package:</p>
<ol>
<li>
<p>Select <span class="bold">Logout</span> to log out of the database instance.</p>
</li>
<li>
<p>In the Confirmation dialog box, select <span class="bold">Logout of (Database Instance)</span> and then select the <span class="bold">Display login page after logout</span> check box. Then click <span class="bold">Logout</span>.</p>
</li>
<li>
<p>Log in as user <code class="codeph">sec_admin</code> using the <code class="codeph">NORMAL</code> role.</p>
</li>
<li>
<p>From the <span class="bold">Schema</span> menu, select <span class="bold">Programs</span>, then <span class="bold">Functions</span>.</p>
</li>
<li>
<p>In the Database Login page, log in as user <code class="codeph">sec_admin</code> with the <span class="bold">NORMAL</span> role selected.</p>
</li>
<li>
<p>From the <span class="bold">Schema</span> menu, select <span class="bold">Programs</span>, and then <span class="bold">Functions</span>.</p>
</li>
<li>
<p>In the Functions page, ensure that the <span class="bold">Object Type</span> menu is set to <span class="bold">Function</span>, and then click <span class="bold">Create</span>.</p>
</li>
<li>
<p>In the Create Function page, enter the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Name</span>: <code class="codeph">F_POLICY_ORDERS</code></p>
</li>
<li>
<p><span class="bold">Schema</span>: <code class="codeph">SEC_ADMIN</code></p>
</li>
<li>
<p><span class="bold">Source</span>: Delete the empty function code that has been provided, and then enter the following code (but not the line numbers on the left side of the code) to create a function that checks whether the user who has logged on is a sales representative.</p>
<div class="p">The <code class="codeph">f_policy_orders</code> function uses the <code class="codeph">SYS_CONTEXT</code> PL/SQL function to get the session information of the user. It then compares this information with the job ID of that user in the <code class="codeph">HR.EMPLOYEES</code> table, for which <code class="codeph">sec_admin</code> has <code class="codeph">SELECT</code> privileges.
<pre dir="ltr">(schema in varchar2,
tab in varchar2)
return varchar2 
as 
 v_job_id   varchar2(20);
 v_user     varchar2(100);
 predicate  varchar2(400);
 
begin
 v_job_id  := null;
 v_user    := null;
 predicate := &#39;1=2&#39;;

v_user := lower(sys_context(&#39;userenv&#39;,&#39;session_user&#39;));

 select lower(job_id) into v_job_id from hr.employees
   where lower(email) = v_user;
 
 if  v_job_id=&#39;sa_rep&#39; then
    predicate := &#39;1=1&#39;;
 else 
    null; 
 end if;

 return predicate;

 exception 
  when no_data_found then 
   null;
end;
</pre></div>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">(schema in varchar2, tab in varchar2)</code>: Defines parameters for the schema (<code class="codeph">schema</code>) and table (<code class="codeph">tab</code>) that must be protected. Notice that the function does not mention the <code class="codeph">OE.ORDERS</code> table. The <code class="codeph">ACCESSCONTROL_ORDERS</code> policy that you create in <a href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm#GUID-D94D2329-B75F-4DA8-ADFC-15F70401BB1C" title="Now that you have created the Virtual Private Database policy function, you can create the Virtual Private Database policy, accesscontrol_orders, and then attach it to the ORDERS table.">Step 5: Create the ACCESSCONTROL_ORDERS Virtual Private Database Policy</a> uses these parameters to specify the <code class="codeph">OE</code> schema and <code class="codeph">ORDERS</code> table. Ensure that you create the <code class="codeph">schema</code> parameter first, followed by the <code class="codeph">tab</code> parameter.</p>
</li>
<li>
<p><code class="codeph">return varchar2</code>: Returns the string that will be used for the <code class="codeph">WHERE</code> predicate clause. Always use <code class="codeph">VARCHAR2</code> as the data type for this return value.</p>
</li>
<li>
<p><code class="codeph">as ... predicate</code>: Defines variables to store the job ID, user name of the user who has logged on, and predicate values.</p>
</li>
<li>
<p><code class="codeph">begin ... return predicate</code>: Encompasses the creation of the <code class="codeph">WHERE</code> predicate, starting the with the <code class="codeph">BEGIN</code> clause for the <code class="codeph">v_job_id</code> and <code class="codeph">v_user</code> settings.</p>
</li>
<li>
<p><code class="codeph">v_job_id varchar2(20)</code> and <code class="codeph">v_user varchar2(100)</code>: Sets the <code class="codeph">v_job_id</code> and <code class="codeph">v_user</code> variables to null, and the <code class="codeph">predicate</code> variable to 1=2, that is, to a false value. At this stage, no <code class="codeph">WHERE</code> predicate can be generated until these variables pass the tests starting with <code class="codeph">select lower(job_id) into v_job_id</code>.</p>
</li>
<li>
<p><code class="codeph">v_user := lower(sys_context...</code>: Uses the <code class="codeph">SYS_CONTEXT</code> function to retrieve the session information of the user and write it to the <code class="codeph">v_user</code> variable.</p>
</li>
<li>
<p><code class="codeph">select lower(job_id) into v_job_id...end if</code>: Checks if the user is a sales representative by comparing the job ID with the user who has logged on. If the job ID of the user who has logged on is <code class="codeph">sa_rep</code> (sales representative), then the <code class="codeph">predicate</code> variable is set to <code class="codeph">1=1</code>. In other words, the user, by being a sales representative, has passed the test.</p>
</li>
<li>
<p><code class="codeph">return predicate</code>: Returns the <code class="codeph">WHERE</code> predicate, which translates to <code class="codeph">WHERE</code> <span class="italic"><code class="codeph">role_of_user_logging_on</code></span> <code class="codeph">IS</code> <code class="codeph">&#34;sa_rep&#34;</code>. Oracle Database appends this <code class="codeph">WHERE</code> predicate onto any <code class="codeph">SELECT</code> statement that users <code class="codeph">LDORAN</code> and <code class="codeph">LPOPP</code> issue on the <code class="codeph">OE.ORDERS</code> table.</p>
</li>
<li>
<p><code class="codeph">exception ... null</code>: Provide an <code class="codeph">EXCEPTION</code> clause for cases where a user without the correct privileges has logged on.</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG33434"></a>
<div class="props_rev_3"><a id="GUID-D94D2329-B75F-4DA8-ADFC-15F70401BB1C"></a>
<h3 id="TDPSG-GUID-D94D2329-B75F-4DA8-ADFC-15F70401BB1C" class="sect3">Step 5: Create the ACCESSCONTROL_ORDERS Virtual Private Database Policy</h3>
<div>
<p>Now that you have created the Virtual Private Database policy function, you can create the Virtual Private Database policy, <code class="codeph">accesscontrol_orders</code>, and then attach it to the <code class="codeph">ORDERS</code> table.</p>
<div class="section">
<p>To increase performance, add the <code class="codeph">CONTEXT_SENSITIVE</code> parameter to the policy, so that Oracle Database only executes the <code class="codeph">f_policy_orders</code> function when the content of the application context changes, in this case, when a new user logs on. Oracle Database only activates the policy when a user performs a SQL <code class="codeph">SELECT</code> statement on the <code class="codeph">ORDERS</code> table. Hence, the user cannot run the <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, and <code class="codeph">DELETE</code> statements, because the policy does not allow him or her to do so.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To create the ACCESSCONTROL_ORDERS Virtual Private Database policy:</p>
<ol>
<li>
<p>From the <span class="bold">Administration</span> menu, select <span class="bold">Security</span>, then <span class="bold">Virtual Private Database Policies</span>.</p>
</li>
<li>
<p>In the Virtual Private Database Policies page, click <span class="bold">Create</span>.</p>
</li>
<li>
<p>In the Create Policy page, under General, enter the following:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Policy Name</span>: <code class="codeph">ACCESSCONTROL_ORDERS</code></p>
</li>
<li>
<p><span class="bold">Object Name</span>: <code class="codeph">OE.ORDERS</code></p>
</li>
<li>
<p><span class="bold">Policy Type</span>: Select <span class="bold">CONTEXT_SENSITIVE</span>.</p>
<p>This type reevaluates the policy function at statement run-time if it detects context changes since the last use of the cursor. For session pooling, where multiple clients share a database session, the middle tier must reset the context during client switches. Note that Oracle Database does not cache the value that the function returns for this policy type; it always runs the policy function during statement parsing. The <code class="codeph">CONTEXT_SENSITIVE</code> policy type applies to only one object.</p>
<p>To enable the Policy Type, select the <span class="bold">Enabled</span> box.</p>
</li>
</ul>
</li>
<li>
<p>Under Policy Function, enter the following:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Policy Function</span>: Enter the name of the function that generates a predicate for the policy, in this case, <code class="codeph">SEC_ADMIN.F_POLICY_ORDERS</code>.</p>
</li>
<li>
<p><span class="bold">Long Predicate</span>: Do not select this box.</p>
<p>Typically, you select this box to return a predicate with a length of up to 32K bytes. By not selecting this box, Oracle Database limits the predicate to 4000 bytes.</p>
</li>
</ul>
</li>
<li>
<p>Under Enforcement, select the <span class="bold">SELECT</span> option and deselect the remaining options that already may be selected.</p>
</li>
<li>
<p>Do not select any options under Security Relevant Columns.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The Virtual Private Database Policies page appears, with the <code class="codeph">ACCESSCONTROL_ORDERS</code> policy listed in the list of policies.</p>
</li>
<li>
<p>Do not log out of Enterprise Manager.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG33435"></a>
<div class="props_rev_3"><a id="GUID-5B4C2D71-286F-4445-9937-B4C24D4181B1"></a>
<h3 id="TDPSG-GUID-5B4C2D71-286F-4445-9937-B4C24D4181B1" class="sect3">Step 6: Test the ACCESSCONTROL_ORDERS Virtual Private Database Policy</h3>
<div>
<p>After you create the <code class="codeph">accesscontrol_orders</code> policy, you can test it by logging on as each user and attempting to select data from the <code class="codeph">ORDERS</code> table.</p>
<div class="section">
<p class="subhead3">To test the ACCESSCONTROL_ORDERS policy:</p>
<ol>
<li>
<p>Start SQL*Plus.</p>
<p>From a command prompt, enter the following command to start SQL*Plus, and log in as Sales Representative Louise Doran, whose user name is <code class="codeph">ldoran</code>:</p>
<pre dir="ltr">sqlplus ldoran
Enter password: <span class="italic">password</span>
</pre>
<p>SQL*Plus starts, connects to the default database, and then displays a prompt.</p>
<p>For detailed information about starting SQL*Plus, see <a class="olink ADMQS0361" target="_blank" href="../ADMQS/GUID-DE8A79BD-FAE4-4364-98FF-D2BD992A06E7.htm#ADMQS0361"><span class="italic">Oracle Database 2 Day DBA</span></a>.</p>
</li>
<li>
<p>Enter the following <code class="codeph">SELECT</code> statement:</p>
<pre dir="ltr">SELECT COUNT(*) FROM OE.ORDERS;
</pre>
<p>The following results should appear for Louise. As you can see, Louise is able to access all the orders in the <code class="codeph">OE.ORDERS</code> table.</p>
<pre dir="ltr">COUNT(*)
--------
     105
</pre></li>
<li>
<p>Connect as Finance Manager Luis Popp.</p>
<pre dir="ltr">CONNECT lpopp
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Enter the following <code class="codeph">SELECT</code> statement:</p>
<pre dir="ltr">SELECT COUNT(*) FROM OE.ORDERS;
</pre>
<p>The following result should appear, because Mr. Popp, who is not a sales representative, does not have access to the data in the <code class="codeph">OE.ORDERS</code> table. Because Mr. Popp does not have access, Oracle Database only allows him access to 0 rows.</p>
<pre dir="ltr">COUNT(*)
--------
       0
</pre></li>
<li>
<p>Exit SQL*Plus:</p>
<pre dir="ltr">EXIT
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG33436"></a>
<div class="props_rev_3"><a id="GUID-B3F663C0-2B80-468C-A339-711D025AA90E"></a>
<h3 id="TDPSG-GUID-B3F663C0-2B80-468C-A339-711D025AA90E" class="sect3">Step 7: Optionally, Remove the Components for This Tutorial</h3>
<div>
<p>You can remove the components that you created for this tutorial if you no longer need them.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm#GUID-1F8B8FCA-0F21-4437-8B11-CF29639A2036" title="You can use Enterprise Manager to remove the data structures that user sec_admin created.">Removing the Data Structures Created by sec_admin</a></p>
</li>
<li>
<p><a href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm#GUID-C48E29B1-31B6-4A0B-8DE4-B2AADDB7B803" title="You can use Enterprise Manager to remove the user accounts.">Removing the User Accounts</a></p>
</li>
<li>
<p><a href="GUID-92A1A94D-319C-4FB2-AEC3-B86415D72628.htm#GUID-AF670AFA-812A-4DA8-8DB8-BB00403E251E" title="You can use Enterprise Manager to revoke the EXECUTE privilege on the DBMS_RLS package from user sec_admin.">Revoking Privileges on DBMS_RLS from User sec_admin</a></p>
</li>
</ul>
</div>
<a id="TDPSG94483"></a>
<div class="props_rev_3"><a id="GUID-1F8B8FCA-0F21-4437-8B11-CF29639A2036"></a>
<h4 id="TDPSG-GUID-1F8B8FCA-0F21-4437-8B11-CF29639A2036" class="sect4">Removing the Data Structures Created by sec_admin</h4>
<div>
<p>You can use Enterprise Manager to remove the data structures that user <code class="codeph">sec_admin</code> created.</p>
<div class="section">
<p class="subhead3">To remove the data structures created by sec_admin:</p>
<ol>
<li>
<p>In Enterprise Manager, ensure that you are logged in as user <code class="codeph">sec_admin</code>.</p>
</li>
<li>
<p>From the <span class="bold">Administration</span> menu, select <span class="bold">Security</span>, then <span class="bold">Virtual Private Database Policies</span>.</p>
</li>
<li>
<p>In the Virtual Private Database Policies page, under Search, enter the following information, and then click <span class="bold">Go</span>:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Schema Name:</span> <code class="codeph">OE</code></p>
</li>
<li>
<p><span class="bold">Object Name:</span> <code class="codeph">ORDERS</code></p>
</li>
<li>
<p><span class="bold">Policy Name:</span> %</p>
</li>
</ul>
<p>The policy you created, <code class="codeph">ACCESSCONTROL_ORDERS</code>, is listed.</p>
</li>
<li>
<p>Select <span class="bold">ACCESSCONTROL_ORDERS</span>, and then click <span class="bold">Delete</span>.</p>
</li>
<li>
<p>In the Confirmation page, click <span class="bold">Yes</span>.</p>
</li>
<li>
<p>From the <span class="bold">Schema</span> menu, select <span class="bold">Programs</span>, then <span class="bold">Functions</span>.</p>
</li>
<li>
<p>If the <code class="codeph">F_POLICY_ORDERS</code> function is not listed, then use the <span class="bold">Search</span> field to search for it.</p>
</li>
<li>
<p>Select the selection button for the <code class="codeph">F_POLICY_ORDERS</code> function and then click <span class="bold">Delete</span>.</p>
</li>
<li>
<p>In the Confirmation window, click <span class="bold">OK</span>.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG94484"></a>
<div class="props_rev_3"><a id="GUID-C48E29B1-31B6-4A0B-8DE4-B2AADDB7B803"></a>
<h4 id="TDPSG-GUID-C48E29B1-31B6-4A0B-8DE4-B2AADDB7B803" class="sect4">Removing the User Accounts</h4>
<div>
<p>You can use Enterprise Manager to remove the user accounts.</p>
<div class="section">
<p class="subhead3">To remove the user accounts:</p>
<ol>
<li>
<p>From Enterprise Manager, select <span class="bold">Logout</span> to log out of the database instance.</p>
</li>
<li>
<p>Log in as user <code class="codeph">SYSTEM</code> with the <span class="bold">NORMAL</span> role selected.</p>
</li>
<li>
<p>In the Database home page, from the <span class="bold">Administration</span> menu, select <span class="bold">Security</span>, then <span class="bold">Users</span>.</p>
</li>
<li>
<p>In the Users page, select each of the following users, and then click <span class="bold">Delete</span> to remove them:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">LDORAN</span></p>
</li>
<li>
<p><span class="bold">LPOPP</span></p>
</li>
</ul>
<p>Do not remove <code class="codeph">sec_admin</code> because you will need this account for later tutorials in this guide.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="TDPSG94485"></a>
<div class="props_rev_3"><a id="GUID-AF670AFA-812A-4DA8-8DB8-BB00403E251E"></a>
<h4 id="TDPSG-GUID-AF670AFA-812A-4DA8-8DB8-BB00403E251E" class="sect4">Revoking Privileges on DBMS_RLS from User sec_admin</h4>
<div>
<p>You can use Enterprise Manager to revoke the <code class="codeph">EXECUTE</code> privilege on the <code class="codeph">DBMS_RLS</code> package from user <code class="codeph">sec_admin</code>.</p>
<div class="section">
<p class="subhead3">To revoke the EXECUTE privilege on the DBMS_RLS package from user sec_admin:</p>
<ol>
<li>
<p>From Enterprise Manager, select <span class="bold">Logout</span> to log out of the database instance.</p>
</li>
<li>
<p>Log in as the <code class="codeph">SYS</code> administrative user with the <span class="bold">SYSDBA</span> role selected.</p>
</li>
<li>
<p>In the Users page, select user <span class="bold">SEC_ADMIN</span> and then click <span class="bold">Edit</span>.</p>
</li>
<li>
<p>Select the <span class="bold">Object Privileges</span> tab.</p>
</li>
<li>
<p>From the list of object privileges, select the listing for the <code class="codeph">SELECT</code> privilege for the <code class="codeph">HR.EMPLOYEES</code> table.</p>
</li>
<li>
<p>Click <span class="bold">Delete</span>.</p>
</li>
<li>
<p>From the list of object privileges, select the listing for the <code class="codeph">EXECUTE</code> privilege for the <code class="codeph">DBMS_RLS</code> package.</p>
</li>
<li>
<p>Click <span class="bold">Delete</span>.</p>
</li>
<li>
<p>Click <span class="bold">Apply</span>.</p>
</li>
<li>
<p>Exit Enterprise Manager.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4040">
<tr>
<td class="cellalignment4054">
<table class="cellalignment4045">
<tr>
<td class="cellalignment4044"><a href="GUID-3B1118D7-8ED9-40BC-B66B-3DE870A04A0F.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4044"><a href="GUID-66C153C6-CE5C-4D5F-888E-40A06628C708.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4056">
<table class="cellalignment4043">
<tr>
<td class="cellalignment4044"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4044"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4044"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4044"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4044"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4044"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>