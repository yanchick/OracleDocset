<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-2154"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Introduction%20to%20Oracle%20Database%20QoS%20Management"></a><title>Introduction to Oracle Database QoS Management</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="Policy Sets, Performance Classes, Performance Policies, Performance Objectives, calendars, maintenance windows, server pools, recommendations, workloads, defaults, Policy Set, default, initial, default names, contents, Free pool, databases, policy-managed, upgrading, candidate server lists, administrator-managed databases, support for, support for Administrator-Managed databases, SERVICE_NAME, USERNAME, MODULE, ACTION, PROGRAM, applications, parameters used by classifiers, Oracle Call Interface, ODP.NET, Java Database Connectivity, database connections, work requests, tagging, tags, for work requests, classifiers, and service names, suggested by application developer, managing work requests separately, managing separately, managing, definition, performance objectives, importance, relation to Performance Classes, relation to Performance Objectives, service levels, measure-only, average response times, and Performance Objectives, response time, directive overrides, server pool directive overrides, overrides, batch jobs, attributes, demand, surges, ranks, implementing, resources, resolving bottlenecks, bottlenecks, resolving, negative impacts, generating, system performance, evaluating, improvements in performance, alternatives, alternative recommendations, Oracle Real Application Clusters (Oracle RAC), and Oracle Database QoS Management, Oracle Database Resource Manager, consumer groups, adjusting size of, high availability, system parameters, FAST_START_MTTR_TARGET, database parameters, metrics, for performance, performance metrics, supported types, Performance Satisfaction Metric (PSM), performance satisfaction, supported"/>
<meta name="dcterms.created" content="2017-01-26T12:05:23Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Quality of Service Management User&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49047-07"/>
<meta name="dcterms.isVersionOf" content="APQOS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2014, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="release_changes.htm" title="Previous" type="text/html"/>
<link rel="Next" href="wlm_strats.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49047-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-D2BFC262-BE3D-4B72-8B02-55810E2C6987"></a> <span id="PAGE" style="display:none;">6/12</span> <!-- End Header -->
<a id="APQOS109"></a>
<h1 id="APQOS-GUID-D2BFC262-BE3D-4B72-8B02-55810E2C6987" class="sect1"><span class="enumeration_chapter">1</span> Introduction to Oracle Database QoS Management</h1>
<div>
<p>This chapter provides an overview of Oracle Database Quality of Service Management (Oracle Database QoS Management). This chapter includes the following sections:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="apqos_intro.htm#GUID-29C344C6-4EC3-4029-AD4E-0E0932157CD2">What Is Oracle Database QoS Management?</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-5B722094-5735-4AAD-BD66-FEB1D151A45E">Benefits of Using Oracle Database QoS Management</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-3A902DF0-D070-42D4-813B-8F91FE1AC328" title="Over time, your workload and performance goals can change.To manage the various Performance Objectives, you define one or more Performance Policies.You create Performance Objectives for each Performance Class to specify the target performance level for all work requests that are assigned to each Performance Class. A server pool directive override sets the availability properties of Min, Max, and Importance for a server pool when the Performance Policy is in effect. Oracle Database QoS Management enables you to manage excess capacity to meet specific performance goals through its recommendations.Oracle Database Quality of Service Management can offer multiple recommendations for improving workload performance.">Overview of Oracle Database QoS Management</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-DDB0BC29-122C-4967-AA34-21C5EFA790F3" title="Oracle Database QoS Management manages and monitors server pools configured by Oracle Clusterware.">What Does Oracle Database QoS Management Manage?</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-D5BED854-32B1-4645-BF96-8B00BAF21009" title="Performance metrics give an overview of where time is spent in the system and enable comparisons of wait times across the system. A useful metric for analyzing workload performance is a common and consistent numeric measure of how work requests in a Performance Class are doing against the current Performance Objective for that Performance Class.">Overview of Metrics</a></p>
</li>
</ul>
</div>
<a id="APQOS110"></a>
<div class="props_rev_3"><a id="GUID-29C344C6-4EC3-4029-AD4E-0E0932157CD2"></a>
<h2 id="APQOS-GUID-29C344C6-4EC3-4029-AD4E-0E0932157CD2" class="sect2">What Is Oracle Database QoS Management?</h2>
<div>
<p><a id="d2179e137" class="indexterm-anchor"></a><a id="d2179e139" class="indexterm-anchor"></a><a id="d2179e143" class="indexterm-anchor"></a>Many companies are consolidating and standardizing their data center computer systems. Instead of using individual servers for each application, they run multiple applications on clustered databases. Also, the migration of applications to the Internet has introduced the problem of managing an <a href="glossary.htm#GUID-C3654AAB-1F8F-4870-9EE7-7C42C4423565"><span class="xrefglossterm">open workload</span></a>. An open workload is subject to demand surges, which can overload a system, resulting in a new type of application failure that cannot be fully anticipated or planned for. To keep applications available and performing within their target service levels in this type of environment, you must:</p>
<ul style="list-style-type: disc;">
<li>
<p>Pool resources.</p>
</li>
<li>
<p>Have management tools that detect performance bottlenecks in real time.</p>
</li>
<li>
<p>Reallocate resources to meet the change in demand.</p>
</li>
</ul>
<p>Oracle Database QoS Management is an automated, policy-based product that monitors the workload requests for an entire system. Oracle Database QoS Management manages the resources that are shared across applications, and adjusts the system configuration to keep the applications running at the performance levels needed by your business. Oracle Database QoS Management responds gracefully to changes in system configuration and demand, thus avoiding additional oscillations in the performance levels of your applications.</p>
<p>Oracle Database QoS Management monitors the performance of each <a href="glossary.htm#GUID-6458BA0D-39A0-4C48-BD70-5BDA35125295"><span class="xrefglossterm">work request</span></a> on a target system. Oracle Database QoS Management starts to track a work request from the time a work request requests a connection to the database using a database service. The amount of time required to complete a work request, or the response time (also known as the <a href="glossary.htm#GUID-8FC56C67-A7D2-43DA-B379-730DD2313665"><span class="xrefglossterm">end-to-end response time</span></a>, or round-trip time), is the time from when the request for data was initiated and when the data request is completed. By accurately measuring the two components of response time, which are the time spent using resources and the time spent waiting to use resources, Oracle Database QoS Management can quickly detect bottlenecks in the system. Oracle Database QoS Management then makes suggestions to reallocate resources to relieve a <a href="glossary.htm#GUID-440F0A8F-5CCB-4A14-B67E-39A20954F6F7"><span class="xrefglossterm">bottleneck</span></a>, thus preserving or restoring service levels.</p>
<p>Oracle Database QoS Management manages the resources on your system so that:</p>
<ul style="list-style-type: disc;">
<li>
<p>When sufficient resources are available to meet the demand, business-level performance requirements for your applications are met, even if the workload changes.</p>
</li>
<li>
<p>When sufficient resources are <span class="italic">not</span> available to meet the demand, Oracle Database QoS Management attempts to satisfy the more critical business performance requirements at the expense of less critical performance requirements.</p>
</li>
</ul>
</div>
</div>
<a id="APQOS116"></a>
<div class="props_rev_3"><a id="GUID-5B722094-5735-4AAD-BD66-FEB1D151A45E"></a>
<h2 id="APQOS-GUID-5B722094-5735-4AAD-BD66-FEB1D151A45E" class="sect2">Benefits of Using Oracle Database QoS Management</h2>
<div>
<p>In a typical company, when the response times of your applications are not within acceptable levels, problem resolution can be very slow. Often, the first questions that administrators ask are: &#34;Did we configure the system correctly? Is there a parameter change that fixes the problem? Do we need more hardware?&#34; Unfortunately, these questions are very difficult to answer precisely. The result is often hours of unproductive and frustrating experimentation.</p>
<p>Oracle Database QoS Management provides the following benefits:</p>
<ul style="list-style-type: disc;">
<li>
<p>Reduces the time and expertise requirements for system administrators who manage Oracle Real Application Clusters (Oracle RAC) resources.</p>
</li>
<li>
<p>Helps reduce the number of performance outages.</p>
</li>
<li>
<p>Reduces the time needed to resolve problems that limit or decrease the performance of your applications.</p>
</li>
<li>
<p>Provides stability to the system as the workloads change.</p>
</li>
<li>
<p>Makes the addition or removal of servers transparent to applications.</p>
</li>
<li>
<p>Reduces the impact on the system caused by server failures.</p>
</li>
<li>
<p>Helps ensure that service-level agreements (SLAs) are met.</p>
</li>
<li>
<p>Enables more effective sharing of hardware resources.</p>
</li>
</ul>
<p>Oracle Database QoS Management helps manage the resources that are shared by applications in a cluster. Oracle Database QoS Management can help identify and resolve performance bottlenecks. Oracle Database QoS Management does not diagnose or tune application or database performance issues. When tuning the performance of your applications, the goal is to achieve optimal performance. Oracle Database QoS Management does not seek to make your applications run faster, but instead works to remove obstacles that prevent your applications from running at their optimal performance levels.</p>
</div>
</div>
<a id="APQOS268"></a>
<div class="props_rev_3"><a id="GUID-3A902DF0-D070-42D4-813B-8F91FE1AC328"></a>
<h2 id="APQOS-GUID-3A902DF0-D070-42D4-813B-8F91FE1AC328" class="sect2">Overview of Oracle Database QoS Management</h2>
<div>
<p>This section provides a basic description of how Oracle Database QoS Management works, and of how it evaluates the performance of workloads on your system.</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="apqos_intro.htm#GUID-63EFF0CB-F2AF-4738-8C5F-AD2AC6062F4E">How Does Oracle Database QoS Management Work?</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-B13CD38F-885A-4CF4-BB18-E9C3D5C4E9FD">Overview of Policy Sets</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8">Overview of Server Pools</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-D1481603-2C0A-4EEA-8363-D4E7CF569D43">How Server Pools Are Used by Oracle Database QoS Management</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-A382BCE6-E610-4E4F-87C4-20999B60A22F" title="Over time, your workload and performance goals can change.">Overview of Performance Classes</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-F4AC7149-1DDB-4372-8198-A9063E9E4BA4" title="To manage the various Performance Objectives, you define one or more Performance Policies.">Overview of Performance Policies and Performance Objectives</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-E5CC78F2-6704-4358-B9A5-64483FF57F0C">How Oracle Database QoS Management Collects and Analyzes Performance Data</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87" title="Oracle Database QoS Management enables you to manage excess capacity to meet specific performance goals through its recommendations.">Overview of Recommendations</a></p>
</li>
</ul>
</div>
<a id="APQOS115"></a>
<div class="props_rev_3"><a id="GUID-63EFF0CB-F2AF-4738-8C5F-AD2AC6062F4E"></a>
<h3 id="APQOS-GUID-63EFF0CB-F2AF-4738-8C5F-AD2AC6062F4E" class="sect3">How Does Oracle Database QoS Management Work?</h3>
<div>
<p><a id="d2179e420" class="indexterm-anchor"></a><a id="d2179e422" class="indexterm-anchor"></a><a id="d2179e426" class="indexterm-anchor"></a><a id="d2179e430" class="indexterm-anchor"></a>With Oracle Database, you can use services to manage the workload on your system by starting services on groups of servers that are dedicated to particular workloads. At the database tier, for example, you could dedicate one group of servers to online transaction processing (OLTP), dedicate another group of servers to application testing, and dedicate a third group of servers for internal applications. The system administrator can allocate resources to specific workloads by manually changing the number of servers on which a database service is allowed to run.</p>
<p>Using groups of servers in this way isolates the workloads from each other to prevent demand surges, failures, and other problems in one workload from affecting the other workloads. However, in this type of deployment, you must separately provision the servers to each group to satisfy the peak demand of each workload because resources are not shared.</p>
<p>Oracle Database QoS Management performs the following actions:</p>
<ol>
<li>
<p>Uses a policy created by the QoS administrator to do the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Assign each work request to a <a href="glossary.htm#GUID-9170758C-1211-4A7B-B8A0-0E80316F5D2B"><span class="xrefglossterm">Performance Class</span></a> by using the attributes of the incoming work requests (such as the database service to which the application connects).</p>
</li>
<li>
<p>Determine the target response times (<a href="glossary.htm#GUID-01F7E040-A79E-4934-80EF-DBD8A9D6F24B"><span class="xrefglossterm">Performance Objectives</span></a>) for each Performance Class.</p>
</li>
<li>
<p>Determine which Performance Classes are the most critical to your business</p>
</li>
</ul>
</li>
<li>
<p>Monitors the resource usage and resource wait times for all the Performance Classes.</p>
</li>
<li>
<p>Analyzes the average response time for a Performance Class against the Performance Objective in effect for that Performance Class</p>
</li>
<li>
<p>Produces recommendations for reallocating resources to improve the performance of a Performance Class that is exceeding its target response time, and provides an analysis of the predicted impact to performance levels for each Performance Class if that recommendation is implemented.</p>
</li>
<li>
<p>Implements the actions listed in the recommendation when directed to by the Oracle Database QoS Management administrator, then evaluates the system to verify that each Performance Class is meeting its Performance Objective after the resources have been reallocated.</p>
</li>
</ol>
</div>
<a id="APQOS357"></a>
<div class="props_rev_3"><a id="GUID-83F3B2AF-3943-45EB-8264-779C4E3CFE26"></a>
<h4 id="APQOS-GUID-83F3B2AF-3943-45EB-8264-779C4E3CFE26" class="sect4">Oracle Database QoS Management and Server Pools</h4>
<div>
<p><a id="d2179e525" class="indexterm-anchor"></a><a id="d2179e527" class="indexterm-anchor"></a><a id="d2179e529" class="indexterm-anchor"></a><a id="d2179e531" class="indexterm-anchor"></a><a id="d2179e535" class="indexterm-anchor"></a>You can use <a href="glossary.htm#GUID-E6D24AD5-0544-4D23-A6AE-86612C72C054"><span class="xrefglossterm">server pools</span></a> to create groups of servers within a cluster to provide workload isolation. A server can only belong to one server pool at any time. You can create an Oracle Database in a single server pool, or across multiple server pools. Oracle Database QoS Management can make recommendations to move a server from one server pool to another based on the measured and projected demand. Oracle Database QoS Management can also relocate servers to satisfy the Performance Objectives currently in effect.</p>
<div class="infoboxnotealso" id="GUID-83F3B2AF-3943-45EB-8264-779C4E3CFE26__GUID-8931B1BD-D083-4D34-ABB3-1589D5EE84C2">
<p class="notep1">See Also:</p>
<p><a class="olink CWADD92105" target="_blank" href="../CWADD/GUID-42F6324B-8A51-4FDE-9E9B-38B058F227A5.htm#CWADD92105"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about server pools</p>
</div>
</div>
</div>
<a id="APQOS359"></a><a id="APQOS358"></a>
<div class="props_rev_3"><a id="GUID-8047A7B0-E167-4691-857D-12C05E417AB7"></a>
<h4 id="APQOS-GUID-8047A7B0-E167-4691-857D-12C05E417AB7" class="sect4">Oracle Database QoS Management and Instance Caging</h4>
<div>
<p><a id="d2179e605" class="indexterm-anchor"></a><a id="d2179e607" class="indexterm-anchor"></a><a id="d2179e609" class="indexterm-anchor"></a>When multiple database instances share a single server, they must share its CPU, memory, and I/O bandwidth. <a id="d2179e612" class="indexterm-anchor"></a>Instance Caging limits the amount of CPU an Oracle database instance consumes by using the Oracle Database Resource Manager and the <code>CPU_COUNT</code> database initialization parameter. When using Oracle Database QoS Management, the sum of the values for <code>CPU_COUNT</code> for all instances of the server must be less than or equal to the total number of physical CPUs. Also, each CPU partition, or <span class="bold">slice</span>, must be uniform in thickness (number of CPUs) for each instance of a database within a server pool. These requirements help to ensure predictable and isolated performance of each database.</p>
<div class="figure" id="GUID-8047A7B0-E167-4691-857D-12C05E417AB7__GUID-0EF6AEF0-52E6-4B6E-88AF-82381132E8A4">
<p class="titleinfigure">Figure 1-1 Instance Caging and CPU Slices</p>
<img width="588" height="210" src="img/GUID-83A5B5A8-EB01-42AD-A298-3CB47AB3859B-default.png" alt="Description of Figure 1-1 follows" title="Description of Figure 1-1 follows"/><br/>
<a href="img_text/GUID-83A5B5A8-EB01-42AD-A298-3CB47AB3859B-default.htm">Description of &#34;Figure 1-1 Instance Caging and CPU Slices&#34;</a></div>
<!-- class="figure" -->
<p>When you implement instance caging, Oracle Database QoS Management can provide recommendations to reallocate CPU resources from one slice to another slice within the same server pool. If you choose to implement the recommendation to modify the instance caging settings, then Oracle Database QoS Management modifies the <code>CPU_COUNT</code> parameter uniformly for all the database instances running on servers in the server pool.</p>
<p>Modifying the <code>CPU_COUNT</code> parameter and configuring Oracle Database QoS Management so that a Resource Plan is activated enables the Instance Caging feature. When you use Instance Caging to constrain CPU usage for an instance, that instance could become CPU-bound. This is when the Resource Manager begins to do its work, allocating CPU shares among the various database sessions according to the active resource plan.</p>
</div>
</div>
<a id="APQOS360"></a>
<div class="props_rev_3"><a id="GUID-90C63BA2-680D-400E-A883-9269AF1EB4B3"></a>
<h4 id="APQOS-GUID-90C63BA2-680D-400E-A883-9269AF1EB4B3" class="sect4">Oracle Database QoS Management and Services</h4>
<div>
<p>In an Oracle RAC cluster, Oracle Database QoS Management monitors the server pools and nodes on which the database services are offered. A service can run in only one server pool. If the database spans multiple server pools, then you must create multiple services to access the instances in all server pools.</p>
<p><a id="d2179e697" class="indexterm-anchor"></a><a id="d2179e701" class="indexterm-anchor"></a><a id="d2179e703" class="indexterm-anchor"></a><a id="d2179e705" class="indexterm-anchor"></a><a id="d2179e707" class="indexterm-anchor"></a><a id="d2179e709" class="indexterm-anchor"></a><a id="d2179e713" class="indexterm-anchor"></a>Workload <a id="d2179e716" class="indexterm-anchor"></a><a id="d2179e720" class="indexterm-anchor"></a>is monitored for clients and applications that connect to the database using database services that are managed by Oracle Clusterware. The connections must use Java Database Connectivity (JDBC) (thick or thin), or Oracle Call Interface (OCI). Connections should use services with its run-time goal for the load balancing advisory set to <code>SERVICE_TIME</code>, and the connection load balancing goal set to <code>LONG</code>. For example:</p>
<pre dir="ltr">srvctl modify service -db <span class="italic">db_name</span> -service <span class="italic">service_name</span> -rlbgoal SERVICE_TIME 
-clbgoal LONG -cardinality UNIFORM
</pre>
<p>You must define the cardinality of database services as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>If the server pool that the service runs in has a maximum size greater than 1 (or UNLIMITED), then set the cardinality of the service to <code>UNIFORM</code>.</p>
</li>
<li>
<p>If the server pool that the service runs in has a maximum size of 1, then set the cardinality of the service to <code>SINGLETON</code>.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-90C63BA2-680D-400E-A883-9269AF1EB4B3__GUID-01E0D4B8-EAA1-44E0-BA3D-B78DA16E6756">
<p class="notep1">See Also:</p>
<p><a class="olink RACAD076" target="_blank" href="../RACAD/GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5.htm#RACAD076"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about services and managing database workloads</p>
</div>
</div>
</div>
</div>
<a id="APQOS315"></a><a id="APQOS314"></a>
<div class="props_rev_3"><a id="GUID-B13CD38F-885A-4CF4-BB18-E9C3D5C4E9FD"></a>
<h3 id="APQOS-GUID-B13CD38F-885A-4CF4-BB18-E9C3D5C4E9FD" class="sect3">Overview of Policy Sets</h3>
<div>
<p>The central concept in Oracle Database QoS Management is the <a href="glossary.htm#GUID-2D3BCFE5-121C-4126-863C-053B6BECB7B9"><span class="xrefglossterm">Policy Set</span></a>. A Policy Set enables you to specify your resources, Performance Classes (workloads), and one or more Performance Policies that specify the Performance Objective for each Performance Class. A Policy Set can also specify constraints for resource availability. Oracle Database QoS Management Performance Policies manage the availability of resources system wide for each Performance Class so that the system is able to satisfy the Performance Objectives you set in the Performance Policy.</p>
<p>When you use Oracle Enterprise Manager to create a new Default Policy for your system, Oracle Database QoS Management provides default classification rules and associated Performance Class names. For example, when you create the initial Policy Set, Oracle Database QoS Management discovers all database services in a cluster, and creates a Performance Class for each service. The Performance Class is named by appending <code>_pc</code> to the service name. For example, if the name of a service is <code>sales</code>, then the name assigned to the Performance Class for that service is <code>sales_pc</code>.</p>
<p>Only one Performance Policy in the Policy Set can be active at any time. You can activate Performance policies to respond to particular requirements by using calendar schedules, maintenance windows, events, and so on. For more information about Performance Policies, see <span class="q">&#34;<a href="apqos_intro.htm#GUID-F4AC7149-1DDB-4372-8198-A9063E9E4BA4" title="To manage the various Performance Objectives, you define one or more Performance Policies.">Overview of Performance Policies and Performance Objectives</a>&#34;</span>.</p>
<p>When you create a Policy Set, you specify which server pools in the cluster should be managed by Oracle Database QoS Management. You also define Performance Classes (used to categorize workloads with similar performance requirements). You then create a Performance Policy to specify which Performance Classes have the highest priority and the Performance Objectives of each Performance Class. To satisfy the Performance Objectives, Oracle Database QoS Management makes recommendations for reallocating resources when needed, and predicts what effect the recommended actions will have on the ability of each Performance Class to meet its Performance Objective.</p>
<p>For example, you could create a policy to manage your application workloads during business hours. The applications used by customers to buy products or services are of the highest priority to your business during this time. You also give high priority to order fulfillment and billing applications. Human resource and enterprise resource planning (ERP) applications are of a lower priority during this time. If your online sales applications experience a surge in demand, then Oracle Database QoS Management might recommend that more resources be allocated to the sales applications and taken away from applications of lesser importance. The recommendation also includes a prediction of the change in performance (positive or negative) for each Performance Class. See <span class="q">&#34;<a href="apqos_intro.htm#GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87" title="Oracle Database QoS Management enables you to manage excess capacity to meet specific performance goals through its recommendations.">Overview of Recommendations</a>&#34;</span> for more information about recommendations.</p>
<p>A Policy Set, as shown in <a href="apqos_intro.htm#GUID-B13CD38F-885A-4CF4-BB18-E9C3D5C4E9FD__CHDHHCEI">Figure 1-2</a>, consists of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>The server pools that are being managed by Oracle Database QoS Management</p>
</li>
<li>
<p>Performance Classes, which are groups of work requests with similar performance objectives</p>
</li>
<li>
<p>Performance policies, which describe how resources should be allocated to the Performance Classes by using:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="glossary.htm#GUID-01F7E040-A79E-4934-80EF-DBD8A9D6F24B"><span class="xrefglossterm">Performance Objectives</span></a></p>
</li>
<li>
<p><a href="glossary.htm#GUID-6203C43A-9092-4EA1-B30F-DC59028390B1"><span class="xrefglossterm">Performance Class ranks</span></a></p>
</li>
<li>
<p><a href="glossary.htm#GUID-3413500E-0636-4512-A864-E55D564FA9A7"><span class="xrefglossterm">server pool directive overrides</span></a></p>
</li>
</ul>
</li>
</ul>
<div class="figure" id="GUID-B13CD38F-885A-4CF4-BB18-E9C3D5C4E9FD__CHDHHCEI">
<p class="titleinfigure">Figure 1-2 Elements of an Oracle Database QoS Management Policy Set</p>
<br/>
<div class="imagecenter"><img class="imagecenter" width="446" height="215" src="img/GUID-1FD38C64-D02F-4BD4-8B21-91BEDDB7C596-default.png" alt="Description of Figure 1-2 follows" title="Description of Figure 1-2 follows"/><br/>
<a href="img_text/GUID-1FD38C64-D02F-4BD4-8B21-91BEDDB7C596-default.htm">Description of &#34;Figure 1-2 Elements of an Oracle Database QoS Management Policy Set&#34;</a></div>
<br/></div>
<!-- class="figure" -->
<div class="infoboxnotealso" id="GUID-B13CD38F-885A-4CF4-BB18-E9C3D5C4E9FD__GUID-D4935245-EB70-4AC5-8206-A26834FB7684">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="apqos_intro.htm#GUID-5E13E0A5-AD14-4FC9-953F-A9E75C5053D7">Applying Classifiers to Work Requests</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="install_config.htm#GUID-30E4E30E-67A2-4CE8-874C-98959D5F4280">Create an Initial Policy Set</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-BA2538E2-DCC1-467C-B0E2-22439630826D" title="Whether you are configuring the Oracle Database QoS Management system for the first time, or want to create a new Policy Set, you use the Create Policy Set wizard to create your Policy Set. You use the Edit Policy Set wizard to modify your existing Policy Set.">Administering the Policy Set</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="APQOS316"></a><a id="APQOS361"></a><a id="APQOS117"></a>
<div class="props_rev_3"><a id="GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8"></a>
<h3 id="APQOS-GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8" class="sect3">Overview of Server Pools</h3>
<div>
<p><a id="d2179e1004" class="indexterm-anchor"></a><a id="d2179e1008" class="indexterm-anchor"></a><a id="d2179e1010" class="indexterm-anchor"></a>When deciding how many clusters to create for your business, you need to compare the possible cost savings through consolidation of servers with the risk that the consolidated workloads will interfere with each other in some significant way. With the introduction of server pools to logically divide a cluster, you can achieve the benefit of physical consolidation and resource agility while maintaining workload isolation.</p>
<p>As the administrator, you can define the workloads that can run in various server pools, as shown in <a href="apqos_intro.htm#GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8__BABDAFHF">Figure 1-3</a>. Applications that connect to your Oracle RAC database use a service that runs only on the servers currently allocated to that server pool. For example, in <a href="apqos_intro.htm#GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8__BABDAFHF">Figure 1-3</a>, connections and applications that use the OS service access only the servers in the HR server pool, so that work done by those connections does not interfere with the applications using the Sales service. Oracle Database QoS Management can assist you with managing the resource allocations within each of those groups to meet your service levels, and can redistribute resources automatically to meet changes in your business requirements.</p>
<div class="figure" id="GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8__BABDAFHF">
<p class="titleinfigure">Figure 1-3 Diagram of Server Pools, Oracle Databases, and Database Services</p>
<img width="546" height="285" src="img/GUID-202417C5-DED7-4041-BE21-5C167EB1A3F9-default.png" alt="Description of Figure 1-3 follows" title="Description of Figure 1-3 follows"/><br/>
<a href="img_text/GUID-202417C5-DED7-4041-BE21-5C167EB1A3F9-default.htm">Description of &#34;Figure 1-3 Diagram of Server Pools, Oracle Databases, and Database Services&#34;</a></div>
<!-- class="figure" -->
<p>With server pools, you can now create groups of servers that can be managed as a single entity. Databases can be created to run in these server pools. If each server runs only a single instance of a database, then if the database needs more resources, an additional server can be allocated to the server pool. If multiple database instances run on a single server, then they must compete for the shared resources of that server, such as memory and CPU. If one of the database instances is experiencing a much higher workload than the other instances, then that database instance can significantly degrade the performance of the other instances running on the same server.</p>
<p>You can use Instance Caging to limit the amount of CPU an Oracle Database instance consumes. By setting the <code>CPU_COUNT</code> parameter to limit the maximum number of CPUs an instance can use, you partition the CPUs among the database instances on a server, thus preventing them from using excessive amounts of CPU resources. The <code>CPU_COUNT</code> setting must be the same for each instance of a database within a server pool. Oracle Database QoS Management can monitor the CPU usage among all the database instances in the server pool, and recommend changes to the current settings if needed.</p>
<div class="figure" id="GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8__GUID-11ED9A94-E915-41ED-AFCB-1D9E3DF02D3D">
<p class="titleinfigure">Figure 1-4 Server Pools and CPU Slices</p>
<img width="662" height="396" src="img/GUID-820F73D0-7DDE-4D3D-A0B4-692EF096539D-default.png" alt="Description of Figure 1-4 follows" title="Description of Figure 1-4 follows"/><br/>
<a href="img_text/GUID-820F73D0-7DDE-4D3D-A0B4-692EF096539D-default.htm">Description of &#34;Figure 1-4 Server Pools and CPU Slices&#34;</a></div>
<!-- class="figure" -->
<p><a id="d2179e1042" class="indexterm-anchor"></a><a id="d2179e1046" class="indexterm-anchor"></a><a id="d2179e1050" class="indexterm-anchor"></a><a id="d2179e1054" class="indexterm-anchor"></a><a id="d2179e1056" class="indexterm-anchor"></a><a id="d2179e1060" class="indexterm-anchor"></a><a id="d2179e1064" class="indexterm-anchor"></a>Instead of using a single server pool, Oracle recommends that you manage services by creating multiple server pools, and relocate services between them. Using this configuration provides the following benefits:</p>
<ul style="list-style-type: disc;">
<li>
<p>Different types of workloads require different configurations, and have different tuning goals. For example, a customer using your OLTP applications to purchase goods or services expects the shipping and payment information screens to respond quickly. If your applications take too long to process the order, then the customer can lose interest, and your company might lose a sale. By contrast, an employee using an internal HR application is motivated to continue using HR screens, even if they do not respond quickly. If your HR applications take longer than expected to process an online task, the employee is unlikely to quit.</p>
</li>
<li>
<p>Applications can have various resource requirements throughout the day, week, or month to meet your business objectives. You can use server pools to divide the resources among the application workloads. To meet the Performance Objectives of a given time period, you could use server pool directive overrides in a Performance Policy to change the default attributes (such as Max or Min) for a server pool.</p>
<p>For example, if your company has an online tax filing application, then the application must prepare and file the tax statements for your customers before the government-specified deadline. In the timeframe immediately preceding a filing deadline, applications related to tax statement preparation and filing require more resources than they do at other times of the year. To ensure you meet this service requirement, you can create a Performance Policy named QuarterlyFilings to override the standard server pool directive, and specify that when QuarterlyFilings is active, the server pool used by the tax preparation applications should have a minimum of four servers instead of two to handle the additional workload. When the QuarterlyFilings Performance Policy is not in effect, your default Performance Policy is in effect, and the minimum number of servers in that server pool is two.</p>
</li>
<li>
<p>Because Oracle Database QoS Management regulates the number of servers that support a workload, application users experience a consistent level of performance, even in the presence of changing demand levels. This prevents performance expectations of your customers from being reset when workload levels change from low to high demand.</p>
<p>For example, assume your company sells a new consumer product that is in high demand, and your company advertises that they have large quantities of that product for sale at a reduced price. As a result, many new customers create orders for this product, and your OLTP applications must process a rapidly increasing number of transactions (a demand surge occurs). New customers do not know what to expect with regards to the OLTP application peformance. However, existing customers can react negatively if their online shopping experience is impacted by the flood of new customers. Also, if your OLTP application cannot process all the incoming orders, then some of the new customers might quit the application and place their order with a different company, or visit a retail store instead.</p>
<p>Oracle Database QoS Management helps you to manage the reallocation of available resources to meet the demand surge without sacrificing the quality of service of your other applications.</p>
</li>
<li>
<p>Some workloads do not scale well but still benefit from the high availability of a cluster environment. Deploying these workloads in a fixed-size server pool offers both performance manageability and high availability.</p>
<p>For example, if you run an ERP application in a server pool with a fixed size of one server, then the maximum size of the server pool and the minimum size of the server pool are both set to one. If the server in that server pool fails, then Oracle Clusterware automatically allocates a new server to the server pool to maintain the minimum size of one server. Any instances and services located on the failed server are restarted on the new server, so the applications using these instances and services remains available.</p>
</li>
</ul>
<div class="infobox-note" id="GUID-2C9A450E-5303-4F4B-9FCB-8D81D6A861C8__GUID-DBED03E3-20F7-41E9-BED3-0FAA986D3289">
<p class="notep1">Note:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink CWADD92105" target="_blank" href="../CWADD/GUID-42F6324B-8A51-4FDE-9E9B-38B058F227A5.htm#CWADD92105"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about server pools</p>
</li>
<li>
<p><a class="olink RACAD8889" target="_blank" href="../RACAD/GUID-7D01967A-2E0F-4228-82CE-428D7B65F961.htm#RACAD8889"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about policy-managed Oracle RAC databases</p>
</li>
<li>
<p><a class="olink CNCPT1453" target="_blank" href="../CNCPT/cmntopc.htm#CNCPT1453"><span class="italic">Oracle Database Concepts</span></a> for a description of an OLTP system</p>
</li>
</ul>
</div>
</div>
</div>
<a id="APQOS269"></a>
<div class="props_rev_3"><a id="GUID-D1481603-2C0A-4EEA-8363-D4E7CF569D43"></a>
<h3 id="APQOS-GUID-D1481603-2C0A-4EEA-8363-D4E7CF569D43" class="sect3">How Server Pools Are Used by Oracle Database QoS Management</h3>
<div>
<p>When you first install Oracle Grid Infrastructure for a cluster, a default server pool (the <a href="glossary.htm#GUID-93E9E0B7-71F1-42F6-85F8-6B42D6CE306C"><span class="xrefglossterm">Free pool</span></a>) is created. All servers are initially placed in this server pool. You should create one or more server pools depending on the workloads that need to be managed. When you create a new server pool, the servers that you assign to that server pool are automatically moved out of the Free pool and placed in the newly created server pool. At this point, you can install a database to run in that server pool, and create database services that are managed by Oracle Clusterware for applications to connect to that database.</p>
<p>For an Oracle RAC database to take advantage of the flexibility of server pools, the database must be created using the policy-managed deployment option, which places the database in one or more server pools. Upgraded Oracle databases are converted directly to administrator-managed databases, and should be separately migrated to policy-managed databases. See <a class="olink RACAD8211" target="_blank" href="../RACAD/GUID-1423B27A-3FD5-4B5F-AD29-029A799E28FF.htm#RACAD8211"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about changing an administrator-managed database to a policy-managed database.</p>
<p>Starting with Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2), you can monitor administrator-managed databases in measure-only or monitor mode.</p>
<div class="infobox-note" id="GUID-D1481603-2C0A-4EEA-8363-D4E7CF569D43__GUID-76E29369-171F-4219-A1DB-C8089F301C28">
<p class="notep1">Caution:</p>
<p>If you use candidate server lists (<code>server_names</code> attribute) or categories when creating server pools, then the ability for Oracle Database Quality of Service (QoS) Management to expand the server pool will be limited by those restrictions as non-eligible servers cannot be used.</p>
</div>
<div class="infoboxnotealso" id="GUID-D1481603-2C0A-4EEA-8363-D4E7CF569D43__GUID-E3D72B7A-CD8E-4AFD-A0CF-DC084AE41A79">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-6B039656-3B70-4358-934E-A15EA0B00FD8">Adding Server Pools to a Policy Set</a>&#34;</span></p>
</li>
<li>
<p><a class="olink RILIN" target="_blank" href="../RILIN/toc.htm"><span class="italic">Oracle Real Application Clusters Installation Guide for Linux and UNIX</span></a> (or other platforms) for more information about creating a policy-managed database</p>
</li>
<li>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-2E0C3398-1733-4C0E-9C7B-8BF8C15EB6E2">Monitoring Performance with Oracle Database QoS Management</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="APQOS317"></a>
<div class="props_rev_3"><a id="GUID-A382BCE6-E610-4E4F-87C4-20999B60A22F"></a>
<h3 id="APQOS-GUID-A382BCE6-E610-4E4F-87C4-20999B60A22F" class="sect3">Overview of Performance Classes</h3>
<div>
<p>A Policy Set contains Performance Objectives for various Performance Classes, or workloads, that run on your cluster. Oracle Database QoS Management uses <a id="d2179e1290" class="indexterm-anchor"></a><a id="d2179e1292" class="indexterm-anchor"></a><a id="d2179e1294" class="indexterm-anchor"></a><a id="d2179e1296" class="indexterm-anchor"></a>a set of classification rules defined in the Policy Set to categorize work requests into a Performance Class. The fundamental classifier used to assign work requests to Performance Classes is the name of the service that is used to connect to the database.</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="apqos_intro.htm#GUID-57E1B40A-CCB3-4969-AFBF-A7E01F6DE7BE">Performance Class Tags</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-5E13E0A5-AD14-4FC9-953F-A9E75C5053D7">Applying Classifiers to Work Requests</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-9D59A65B-A912-4D46-8889-EBF9868309AA">Using Additional Filters for Classifying Work Requests</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-2F550155-3660-454F-B014-F0DFF5D6CAFC" title="Over time, your workload and performance goals can change.">Deciding to Create New Performance Classes</a></p>
</li>
</ul>
</div>
<a id="APQOS318"></a>
<div class="props_rev_3"><a id="GUID-57E1B40A-CCB3-4969-AFBF-A7E01F6DE7BE"></a>
<h4 id="APQOS-GUID-57E1B40A-CCB3-4969-AFBF-A7E01F6DE7BE" class="sect4">Performance Class Tags</h4>
<div>
<p>The classification of work requests applies a user-defined name (<a href="glossary.htm#GUID-657A3F9B-BCA2-4BE3-B725-213D0337E743"><span class="xrefglossterm">tag</span></a>) that identifies the Performance Class to which the work request belongs. All work requests that are grouped into a particular Performance Class have the same <a href="glossary.htm#GUID-C5412B8A-7CB1-4801-AD0D-E8451A3B8E9D"><span class="xrefglossterm">performance objectives</span></a>. In effect, the tag connects the work request to the Performance Objective for the associated Performance Class. Oracle Database QoS Management assigns tags to each work request so that every component of the system can take measurements, and provide data to Oracle Database QoS Management for evaluation against the applicable Performance Objectives.</p>
</div>
</div>
<a id="APQOS319"></a>
<div class="props_rev_3"><a id="GUID-5E13E0A5-AD14-4FC9-953F-A9E75C5053D7"></a>
<h4 id="APQOS-GUID-5E13E0A5-AD14-4FC9-953F-A9E75C5053D7" class="sect4">Applying Classifiers to Work Requests</h4>
<div>
<p><a id="d2179e1434" class="indexterm-anchor"></a><a id="d2179e1438" class="indexterm-anchor"></a><a id="d2179e1440" class="indexterm-anchor"></a><a id="d2179e1444" class="indexterm-anchor"></a><a id="d2179e1448" class="indexterm-anchor"></a><a id="d2179e1452" class="indexterm-anchor"></a><a id="d2179e1456" class="indexterm-anchor"></a>Classification occurs wherever new work enters the system. When a work request arrives at a server, the work request is checked for a tag. If the work request has a tag, then the server concludes that this work request has already been classified, and the tag is not changed. If the work request does not include a tag, then the <a href="glossary.htm#GUID-FC682538-F072-4209-AAFE-064BFAB386FE"><span class="xrefglossterm">classifiers</span></a> are checked, and a tag for the matching Performance Class is attached to the work request.</p>
<p>To illustrate how work requests are classified, consider an application that connects to an Oracle RAC database. The application uses the database service <code>sales</code>. The Oracle Database QoS Management administrator specified during the initial configuration of Oracle Database QoS Management that the <code>sales_pc</code> Performance Class should contain work requests that use the <code>sales</code> service. When a connection request is received by the database, Oracle Database QoS Management checks for a tag. If a tag is not found, then Oracle Database QoS Management compares the information in the connection request with the classifiers specified for each Performance Class, in the order specified in the Performance Policy. If the connection request being classified is using the <code>sales</code> service, then when the classifiers in the <code>sales_pc</code> Performance Class are compared to the connection request information, a match is found, and the database work request is assigned a tag for the <code>sales_pc</code> Performance Class.</p>
</div>
</div>
<a id="APQOS320"></a>
<div class="props_rev_3"><a id="GUID-9D59A65B-A912-4D46-8889-EBF9868309AA"></a>
<h4 id="APQOS-GUID-9D59A65B-A912-4D46-8889-EBF9868309AA" class="sect4">Using Additional Filters for Classifying Work Requests</h4>
<div>
<p>A single application can support work requests of many types, with a range of performance characteristics. By extending and refining the default classification rules, the Oracle Database QoS Management administrator can write multiple Performance Objectives for a single application. For example, the administrator may decide that a web-based application should have separate Performance Objectives for work requests related to logging in, browsing, searching, and purchasing.</p>
<p>Oracle Database QoS Management supports user-defined combinations of connection parameters to map Performance Classes to the actual workloads running in the database. These connection parameters belong to two general classes, and can be combined to create fine-grained Boolean expressions:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Configuration Parameters</span>&mdash;The supported configuration parameters are <code>SERVICE_NAME</code> and <code>USERNAME</code>. Each classifier in a Performance Class must specify the name of a database service. Additional granularity can be achieved by identifying the name of the user that is making the database connection from either a client or the middle tier. The advantage of using these classifiers is that they do not require application code changes to associate different workloads with separate Performance Classes.</p>
</li>
<li>
<p><span class="bold">Application Parameters</span>&mdash;The supported application parameters are <code>MODULE</code>, <code>ACTION</code>, and <code>PROGRAM</code>. These are optional parameters. The values for <code>MODULE</code> and <code>ACTION</code> must be set within the application. Depending on the type of application, you can set these parameters as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>OCI&mdash;Use <code>OCI_ATTR_MODULE</code> and <code>OCI_ATTR_ACTION</code>.</p>
</li>
<li>
<p>Oracle Data Provider for .NET (ODP.NET)&mdash;Specify the <code>ModuleName</code> and <code>ActionName</code> properties on the <code>OracleConnection</code> object.</p>
</li>
<li>
<p>JDBC&mdash;Set <code>MODULE</code> and <code>ACTION</code> in <code>SYS_CONTEXT</code>.</p>
</li>
</ul>
</li>
</ul>
<p>The <code>PROGRAM</code> parameter is set or derived differently for each database driver and platform. Consult the appropriate Oracle Database developer&#39;s guide for further details and examples.</p>
<p>To manage the workload for an application, the application code makes database connections using a particular service. To provide more precise control over the workload generated by various parts of the application, you can create additional Performance Classes, and use classifiers that include <code>PROGRAM</code>, <code>MODULE</code>, or <code>ACTION</code> in addition to the service or user name. For example, you could specify that all connections to your cluster that use the <code>sales</code> service belong to the <code>sales_pc</code> Performance Class, but connections that use the <code>sales</code> service and have a user name of <code>APPADMIN</code> belong to <code>sales_admin</code> Performance Class.</p>
<div class="infoboxnotealso" id="GUID-9D59A65B-A912-4D46-8889-EBF9868309AA__GUID-48EBE98D-5F6A-40EC-B2E2-80E528FD03AF">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink LNOCI-GUID-FB263210-118E-4DB3-A840-1769EF0CB977" target="_blank" href="../LNOCI/ociaahan.htm#LNOCI-GUID-FB263210-118E-4DB3-A840-1769EF0CB977"><span><cite>Oracle Call Interface Programmer&#39;s Guide</cite></span></a></p>
</li>
<li>
<p><a class="olink ODPNT805" target="_blank" href="../ODPNT/OracleConnectionClass.htm#ODPNT805"><span><cite>Oracle Data Provider for .NET Developer&#39;s Guide for Microsoft Windows</cite></span></a></p>
</li>
<li>
<p><a class="olink JJDBC28899" target="_blank" href="../JJDBC/dmsmtrc.htm#JJDBC28899"><span><cite>Oracle Database JDBC Developer&rsquo;s Guide</cite></span></a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="APQOS321"></a>
<div class="props_rev_3"><a id="GUID-2F550155-3660-454F-B014-F0DFF5D6CAFC"></a>
<h4 id="APQOS-GUID-2F550155-3660-454F-B014-F0DFF5D6CAFC" class="sect4">Deciding to Create New Performance Classes</h4>
<div>
<p>Over time, your workload and performance goals can change.</p>
<p>The Performance Classes in use at a particular data center are expected to change over time. For example, you might need to modify the Performance Objectives for one part of your application. In this case you would create a new Performance Class with additional classifiers to identify the target work requests, and update your Performance Policy to add a new Performance Objective for this Performance Class. In other words, you replace a single Performance Objective with one or more finer-grained Performance Objectives, and divide the work requests for one Performance Class into multiple Performance Classes.</p>
<p>Application developers can suggest which Performance Classes to use. Specifically, an application developer can suggest ways to identify different application workloads, and you can use these suggestions to create classifiers for Performance Classes so that each type of work request is managed separately.</p>
<p>You can create additional Performance Classes to specify acceptable response times for different application workloads. For example, a Performance Objective might indicate that a work request performing the <code>checkout</code> action for the <code>sales_pc_checkout</code> Performance Class should not take more than one millisecond to complete, and a work request performing the <code>browse</code> action for the <code>sales_pc_browse</code> Performance Class can take 100 milliseconds second to complete.</p>
<div class="infoboxnotealso" id="GUID-2F550155-3660-454F-B014-F0DFF5D6CAFC__GUID-D81F4C51-4A1D-4E38-B182-635FE16E5FEA">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-2030BC99-D2DF-4D98-8237-CEB1A4880A0F" title="You can delete a Performance Class that is no longer needed.You can rename a Performance Class using the Edit Policy Set wizard.When editing Performance Classes, you can create, edit, rename, or delete performance classes for the system. You can use the Edit Performance Class button to modify the classifiers for an existing performance class.">Managing Performance Classes</a>&#34;</span></p>
</div>
</div>
</div>
</div>
<a id="APQOS119"></a>
<div class="props_rev_3"><a id="GUID-F4AC7149-1DDB-4372-8198-A9063E9E4BA4"></a>
<h3 id="APQOS-GUID-F4AC7149-1DDB-4372-8198-A9063E9E4BA4" class="sect3">Overview of Performance Policies and Performance Objectives</h3>
<div>
<p>To manage the various Performance Objectives, you define one or more Performance Policies.</p>
<p>A <a href="glossary.htm#GUID-8D5353A6-D732-4ADD-AD1E-F29DDD36E047"><span class="xrefglossterm">Performance Policy</span></a> is a collection of Performance Objectives, and a measure of how critical they are to your business. For example, you could define a Performance Policy for normal business hours, another for weekday nonbusiness hours, one for weekend operations, and another to be used during processing for the quarter-end financial closing. At any given time, a single Performance Policy is in effect as specified by the Oracle Database QoS Management administrator. Within each Performance Policy, the criticalness, or ranking, of the Performance Objectives can be different, enabling you to give more priority to certain workloads during specific time periods.</p>
<p>A Performance Policy has a collection of Performance Objectives in effect at the same time; there is one or more Performance Objectives for each application or workload that runs on the cluster. Some workloads and their Performance Objectives are more critical to the business than others. Some Performance Objectives can be more critical at certain times, and less critical at other times.</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="apqos_intro.htm#GUID-1773CDE9-6B2A-4918-9C00-53D658F65F2A" title="You create Performance Objectives for each Performance Class to specify the target performance level for all work requests that are assigned to each Performance Class.">Overview of Performance Objectives</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-E6B0421C-B374-47AB-BCC2-76677C5DAB86" title="A server pool directive override sets the availability properties of Min, Max, and Importance for a server pool when the Performance Policy is in effect.">Overview of Server Pool Directive Overrides</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-215DAB6C-8D4A-459D-AB6F-7DAB4A555FC8">Overview of Performance Class Ranks</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-ABDD3B4F-5FF8-462D-AFB7-119365E4143C">Oracle Database QoS Management Policy Workload Criticality Determines Database Startup Order</a></p>
</li>
</ul>
</div>
<a id="APQOS322"></a>
<div class="props_rev_3"><a id="GUID-1773CDE9-6B2A-4918-9C00-53D658F65F2A"></a>
<h4 id="APQOS-GUID-1773CDE9-6B2A-4918-9C00-53D658F65F2A" class="sect4">Overview of Performance Objectives</h4>
<div>
<p>You create Performance Objectives for each Performance Class to specify the target performance level for all work requests that are assigned to each Performance Class.</p>
<p><a href="glossary.htm#GUID-01F7E040-A79E-4934-80EF-DBD8A9D6F24B"><span class="xrefglossterm">Performance Objectives</span></a> specify both the business requirement (the target performance level) and the work to which that Performance Objective applies (the Performance Class). For example, a Performance Objective could specify that work requests in the <code>hr_pc</code> Performance Class should have an average response time of less than 0.2 seconds.</p>
<p>Performance Objectives are specified with Performance Policies. Each Performance Policy includes a Performance Objective for each and every Performance Class, unless the Performance Class is marked Measure-Only. In this release, Oracle Database QoS Management supports only one type of Performance Objective, <a href="glossary.htm#GUID-622303AA-B794-46E0-9429-6BE523075C46"><span class="xrefglossterm">average response time</span></a>.</p>
<p>The response time for a workload is based upon database client requests. Response time measures the time from when the cluster receives the request over the network to the time the request leaves the cluster. Response time does not include the time required to send the information over the network to or from the client. The response time for all database client requests in a Performance Class is averaged and presented as average response time, measured in seconds for a database request.</p>
<div class="infoboxnotealso" id="GUID-1773CDE9-6B2A-4918-9C00-53D658F65F2A__GUID-5D930F06-0E0A-4517-A221-FFD9CF072790">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-D5A91407-FDF1-4AB7-818E-FCB1158B27C0" title="Use Oracle Enterprise Manager Cloud Control to create a Performance Policy.">Creating a Performance Policy and Specifying Performance Objectives</a>&#34;</span></p>
</div>
</div>
</div>
<a id="APQOS324"></a><a id="APQOS323"></a>
<div class="props_rev_3"><a id="GUID-E6B0421C-B374-47AB-BCC2-76677C5DAB86"></a>
<h4 id="APQOS-GUID-E6B0421C-B374-47AB-BCC2-76677C5DAB86" class="sect4">Overview of Server Pool Directive Overrides</h4>
<div>
<p>A server pool directive override sets the availability properties of Min, Max, and Importance for a server pool when the Performance Policy is in effect.</p>
<p>A Performance Policy can include a set of <a href="glossary.htm#GUID-3413500E-0636-4512-A864-E55D564FA9A7"><span class="xrefglossterm">server pool directive overrides</span></a>. Server pool directive overrides serve as constraints on the allocation changes that Oracle Database QoS Management recommends, because the server pool directive overrides are honored during the activation period of the Performance Policy. For example, Oracle Database QoS Management never recommends moving a server out of a server pool if doing so results in the server pool having less than its specified minimum number of servers.</p>
<p>You could create Performance Policies for your system to manage workload based on the time of year or time of day, as shown in <a href="apqos_intro.htm#GUID-E6B0421C-B374-47AB-BCC2-76677C5DAB86__CHDBHIII">Figure 1-5</a>. Under normal conditions, these Performance Policies keep your database workload running at a steady rate. If the workload requests for a database increase suddenly, then a particular server pool might require additional resources beyond what is specified by the Performance Policy.</p>
<div class="figure" id="GUID-E6B0421C-B374-47AB-BCC2-76677C5DAB86__CHDBHIII">
<p class="titleinfigure">Figure 1-5 Baseline Resource Management by Performance Policy</p>
<img width="470" height="731" src="img/GUID-946BBA5C-9DD0-4F05-8B54-1DC963B180A9-default.gif" alt="Description of Figure 1-5 follows" title="Description of Figure 1-5 follows"/><br/>
<a href="img_text/GUID-946BBA5C-9DD0-4F05-8B54-1DC963B180A9-default.htm">Description of &#34;Figure 1-5 Baseline Resource Management by Performance Policy&#34;</a></div>
<!-- class="figure" -->
<p>For example, assume your business takes orders over the telephone, and creates orders using a sales application. Your telephone sales department is only open during regular business hours, but customers can also place orders themselves over the Internet. During the day, more orders are placed so the sales applications need more resources to handle the workload. This configuration is managed by creating the Business Hours Performance Policy, and specifying that the Back Office server pool can have a maximum of two servers, enabling Oracle Database QoS Management to move servers to the Online server pool, as needed. After the telephone sales department closes, the workload for the sales applications decreases. To manage this configuration you create the After Hours Performance Policy and specify that the Back Office server pool can have a maximum of four servers, enabling your internal applications to acquire the additional resources that they need to complete their workloads before the next business day.</p>
<p>In this scenario, the Business Hours and After Hours Performance Policies can contain server pool directive overrides. When a Performance Policy contains a server pool directive override, the current settings of Max, Min, and Importance for the specified server pool are overridden while that Performance Policy is in effect. This enables additional servers to be placed in the Sales server pool to give the online sales applications the resources they need and to limit the resources used by the Back Office server pool, so that its workload does not interfere with the Sales workload.</p>
<div class="infoboxnotealso" id="GUID-E6B0421C-B374-47AB-BCC2-76677C5DAB86__GUID-25118118-923B-42AF-AE84-F7DE4895BF47">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-52905BAD-1B74-4D64-9685-C4A72DD1E758" title="A server pool directive override gives you the ability to enforce different settings for server pool sizes, or change the importance of server pools. For example, if you are expecting a surge in demand, such as during an advertised sale period, then you could use a server pool directive override to allocate more resources to the accounting applications.">Setting Server Pool Directive Overrides</a>&#34;</span></p>
</div>
</div>
</div>
<a id="APQOS325"></a>
<div class="props_rev_3"><a id="GUID-215DAB6C-8D4A-459D-AB6F-7DAB4A555FC8"></a>
<h4 id="APQOS-GUID-215DAB6C-8D4A-459D-AB6F-7DAB4A555FC8" class="sect4">Overview of Performance Class Ranks</h4>
<div>
<p><a id="d2179e2173" class="indexterm-anchor"></a><a id="d2179e2177" class="indexterm-anchor"></a><a id="d2179e2181" class="indexterm-anchor"></a>Within a Performance Policy, you can also assign a level of business criticalness (a <span class="italic">rank</span>) to each Performance Class to give priority to meeting the Performance Objectives for a more critical Performance Class over a less critical one. When there are not enough resources available to meet all the Performance Objectives for all Performance Classes at the same time, the Performance Objectives for the more critical Performance Classes must be met at the expense of the less critical Performance Objectives. The Performance Policy specifies the <span class="italic">business criticalness</span> of each Performance Class, which can be Highest, High, Medium, Low, or Lowest.</p>
<div class="infobox-note" id="GUID-215DAB6C-8D4A-459D-AB6F-7DAB4A555FC8__GUID-729D7A17-00F4-4177-9730-31D361DC6FEF">
<p class="notep1">Note:</p>
<p>Priority access to resources, based on rank, does not apply to single-instance Oracle RAC databases or Oracle RAC One Node.</p>
</div>
<p>For example, using the Performance Policies illustrated in <a href="apqos_intro.htm#GUID-E6B0421C-B374-47AB-BCC2-76677C5DAB86__CHDBHIII">Figure 1-5</a>, when the Business Hours Performance Policy is in effect, the sales applications, which access the Online server pool, have the highest rank. If there are not enough resources available to meet the Performance Objectives of all the Performance Classes, then the applications that use the Online server pool will get priority access to any available resources, even if the applications using the Back Office server pool are not meeting their Performance Objectives.</p>
<p>You can have multiple Performance Classes at the same rank. If Oracle Database QoS Management detects more than one Performance Class not meeting its Performance Objective and the Performance Classes are assigned the same rank in the active Performance Policy, then Oracle Database QoS Management recommends a change to give the Performance Class closest to meeting its Performance Objective more resources. After implementing the recommended action, when the Performance Class is no longer below its target performance level, Oracle Database QoS Management performs a new evaluation of the system performance.</p>
<div class="infoboxnotealso" id="GUID-215DAB6C-8D4A-459D-AB6F-7DAB4A555FC8__GUID-C5D329AE-D6A6-4237-927B-D71F93FC104F">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-422C6CA5-50FB-4BA3-A736-B1AC0083DDC7" title="Use Oracle Enterprise Manager Cloud Control to create a Performance Policy.On the Edit Policy page, you can change the rank of each Performance Class, or change the Measure Only setting for a Performance Class. You can also select the type of resource allocation actions that can be automatically implemented by QoS Management and set server pool directive overrides.A server pool directive override gives you the ability to enforce different settings for server pool sizes, or change the importance of server pools. For example, if you are expecting a surge in demand, such as during an advertised sale period, then you could use a server pool directive override to allocate more resources to the accounting applications.">Managing Performance Policies</a>&#34;</span></p>
</div>
</div>
</div>
<a id="APQOS382"></a>
<div class="props_rev_3"><a id="GUID-ABDD3B4F-5FF8-462D-AFB7-119365E4143C"></a>
<h4 id="APQOS-GUID-ABDD3B4F-5FF8-462D-AFB7-119365E4143C" class="sect4">Oracle Database QoS Management Policy Workload Criticality Determines Database Startup Order</h4>
<div>
<p><a id="d2179e2263" class="indexterm-anchor"></a><a id="d2179e2267" class="indexterm-anchor"></a><a id="d2179e2271" class="indexterm-anchor"></a><a id="d2179e2275" class="indexterm-anchor"></a>If a user-created Oracle Database QoS Management policy is active, then the ranked order of the performance classes determines the order in which the associated Oracle RAC databases start or request real-time LMS process slots. Using the performance class rankings ensures that mission critical databases running in a consolidated environment have their LMS processes run in real-time, thus eliminating a resource bottleneck within inter-node communication. Because the Oracle Database QoS Management policy specifies the rank of each workload, using the value of Max(Ranks) for each database provides a consistent expression of the expressed business criticality of each database.</p>
</div>
</div>
</div>
<a id="APQOS326"></a><a id="APQOS270"></a>
<div class="props_rev_3"><a id="GUID-E5CC78F2-6704-4358-B9A5-64483FF57F0C"></a>
<h3 id="APQOS-GUID-E5CC78F2-6704-4358-B9A5-64483FF57F0C" class="sect3">How Oracle Database QoS Management Collects and Analyzes Performance Data</h3>
<div>
<p><a id="d2179e2333" class="indexterm-anchor"></a><a id="d2179e2337" class="indexterm-anchor"></a><a id="d2179e2339" class="indexterm-anchor"></a>The Oracle Database QoS Management Server retrieves metrics data from each database instance running in managed server pools. The data are correlated by Performance Class every five seconds. The data include many metrics such as database request arrival rate, CPU use, CPU wait time, I/O use, I/O wait time, Global Cache use and Global Cache wait times. Information about the current topology of the cluster and the health of the servers is added to the data. The Policy and Performance Management engine of Oracle Database QoS Management (illustrated in <a href="apqos_intro.htm#GUID-E5CC78F2-6704-4358-B9A5-64483FF57F0C__BABGICBA">Figure 1-6</a>) analyzes the data to determine the overall performance profile of the system for the current Performance Objectives established by the active Performance Policy.</p>
<p><a id="d2179e2347" class="indexterm-anchor"></a><a id="d2179e2349" class="indexterm-anchor"></a><a id="d2179e2353" class="indexterm-anchor"></a><a id="d2179e2359" class="indexterm-anchor"></a><a id="d2179e2363" class="indexterm-anchor"></a>The performance evaluation occurs once a minute, and results in a recommendation if any Performance Class does not meet its objectives. The recommendation specifies which resource is the <a href="glossary.htm#GUID-440F0A8F-5CCB-4A14-B67E-39A20954F6F7"><span class="xrefglossterm">bottleneck</span></a>. Specific corrective actions are included in the recommendation, if possible. The recommendation also includes a listing of the projected impact on all Performance Classes in the system if you decide to implement the recommended action.</p>
<p><a href="apqos_intro.htm#GUID-E5CC78F2-6704-4358-B9A5-64483FF57F0C__BABGICBA">Figure 1-6</a> diagrams the collection of data from various data sources and shows how that information is used by Oracle Enterprise Manager. In this figure, CHM refers to Oracle Cluster Health Monitor and Server Manager (SRVM) is a component of Oracle Clusterware.</p>
<div class="figure" id="GUID-E5CC78F2-6704-4358-B9A5-64483FF57F0C__BABGICBA">
<p class="titleinfigure">Figure 1-6 Diagram of Oracle Database QoS Management Server Architecture</p>
<img width="579" height="249" src="img/GUID-45305D16-0A1F-438E-A67B-BC924E52266F-default.gif" alt="Description of Figure 1-6 follows" title="Description of Figure 1-6 follows"/><br/>
<a href="img_text/GUID-45305D16-0A1F-438E-A67B-BC924E52266F-print.htm">Description of &#34;Figure 1-6 Diagram of Oracle Database QoS Management Server Architecture&#34;</a></div>
<!-- class="figure" -->
<div class="infoboxnotealso" id="GUID-E5CC78F2-6704-4358-B9A5-64483FF57F0C__GUID-A1B87029-D97A-47CC-9B16-D8CC6B54EF65">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-2B0B5AC6-12B5-4BA3-8E8C-54DA261A0417" title="The Oracle Database QoS Management Dashboard (the Dashboard) provides an easy to use interface for managing the Oracle Database QoS Management system.">Using the Oracle Database QoS Management Dashboard</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-09D9F38A-CCDB-4F50-9855-393B9754CDAB">Interpreting the Performance Overview Graphs</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-D8C075E9-95C9-41B1-9933-08342E8F0059" title="You can view a variety of performance metrics for the Oracle Database QoS Management system as a whole, or for individual Performance Classes.">Reviewing Performance Metrics</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="APQOS271"></a>
<div class="props_rev_3"><a id="GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87"></a>
<h3 id="APQOS-GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87" class="sect3">Overview of Recommendations</h3>
<div>
<p>Oracle Database QoS Management enables you to manage excess capacity to meet specific performance goals through its recommendations.</p>
<p>If your business experiences periodic demand surges or must support an <a href="glossary.htm#GUID-C3654AAB-1F8F-4870-9EE7-7C42C4423565"><span class="xrefglossterm">open workload</span></a>, then to retain performance levels for your applications you can design your system to satisfy the peak workload. Creating a system capable of handling the peak workload typically means acquiring additional hardware to be available when needed and sit idle when not needed. Instead of having servers remain idle except when a demand surge occurs, you could decide to use those servers to run other application workloads. However, if the servers are busy running other applications when a demand surge hits, then your system might not be able to satisfy the peak workload and your main business applications do not perform as expected.</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="apqos_intro.htm#GUID-8A546B3E-83C6-493E-9BBC-BD19A0579AE1">How Oracle Database QoS Management Generates Recommendations</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-C71D1179-9631-4859-B393-5D0ADCF0F513">Types of Recommendations</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-8F232523-6A2D-4C44-AFE9-381AD7630FBD" title="Oracle Database Quality of Service Management can offer multiple recommendations for improving workload performance.">Choosing the Best Recommendation</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-A7E7E5AE-1732-4488-97F9-60BB5E7E1E57">Contents of a Recommendation</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-D484368F-C4D8-4E0C-8432-642B34C2AC15">Overview of Implementing Recommendations</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-4A7C1057-FEB1-40E0-B0D5-66632C3B25AA">Example: How Recommendations Are Generated</a></p>
</li>
</ul>
</div>
<a id="APQOS327"></a>
<div class="props_rev_3"><a id="GUID-8A546B3E-83C6-493E-9BBC-BD19A0579AE1"></a>
<h4 id="APQOS-GUID-8A546B3E-83C6-493E-9BBC-BD19A0579AE1" class="sect4">How Oracle Database QoS Management Generates Recommendations</h4>
<div>
<p>When you use Oracle Database QoS Management, your system is continuously monitored in an iterative process to see if the Performance Objectives in the active Performance Policy are being met. <a id="d2179e2560" class="indexterm-anchor"></a><a id="d2179e2564" class="indexterm-anchor"></a><a id="d2179e2568" class="indexterm-anchor"></a><a id="d2179e2572" class="indexterm-anchor"></a>Performance data are sent to Oracle Enterprise Manager for display in the Oracle Database QoS Management Dashboard (the Dashboard) and Performance History pages.</p>
<p>When one or more Performance Objectives are not being met, after evaluating the performance of your system, Oracle Database QoS Management seeks to improve the performance of a single Performance Objective: usually the highest ranked Performance Objective that is currently not being satisfied. If all Performance Objectives are satisfied with capacity to spare for both the current and projected workload, then Oracle Database QoS Management signals &#34;No action required: all Performance Objectives are being met.&#34;</p>
<div class="infoboxnotealso" id="GUID-8A546B3E-83C6-493E-9BBC-BD19A0579AE1__GUID-1BDC737F-C958-482F-B762-2CED85EDADA3">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-2B0B5AC6-12B5-4BA3-8E8C-54DA261A0417" title="The Oracle Database QoS Management Dashboard (the Dashboard) provides an easy to use interface for managing the Oracle Database QoS Management system.">Using the Oracle Database QoS Management Dashboard</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-6BE297A8-C57F-48CF-8B57-C4322D98A61E">Viewing Recommendations</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-D8C075E9-95C9-41B1-9933-08342E8F0059" title="You can view a variety of performance metrics for the Oracle Database QoS Management system as a whole, or for individual Performance Classes.">Reviewing Performance Metrics</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="APQOS328"></a>
<div class="props_rev_3"><a id="GUID-C71D1179-9631-4859-B393-5D0ADCF0F513"></a>
<h4 id="APQOS-GUID-C71D1179-9631-4859-B393-5D0ADCF0F513" class="sect4">Types of Recommendations</h4>
<div>
<p><a id="d2179e2658" class="indexterm-anchor"></a><a id="d2179e2662" class="indexterm-anchor"></a><a id="d2179e2666" class="indexterm-anchor"></a>If Performance Objectives are not being met for a Performance Class, then Oracle Database QoS Management issues recommendations to rebalance the use of resources to alleviate bottlenecks. Oracle Database QoS Management evaluates several possible solutions and then chooses the solution that:</p>
<ul style="list-style-type: disc;">
<li>
<p>Offers the best overall system improvement</p>
</li>
<li>
<p>Causes the least system disruption</p>
</li>
<li>
<p>Helps the highest ranked violating performance class</p>
</li>
</ul>
<p>The types of recommendations that Oracle Database QoS Management can make are:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="apqos_intro.htm#GUID-3B57F595-EE30-4FA5-88F5-313EDBB35CA1">Promoting and Demoting Consumer Groups</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-38083EC8-119E-4233-87DF-84496B008F2B">Moving Servers Between Server Pools</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-61A41E22-1B82-4E0E-B82F-AD32E279558B">Modifying the CPU Count</a></p>
</li>
</ul>
</div>
<a id="APQOS362"></a>
<div class="props_rev_3"><a id="GUID-3B57F595-EE30-4FA5-88F5-313EDBB35CA1"></a>
<h5 id="APQOS-GUID-3B57F595-EE30-4FA5-88F5-313EDBB35CA1" class="sect5">Promoting and Demoting Consumer Groups</h5>
<div>
<p><a id="d2179e2750" class="indexterm-anchor"></a><a id="d2179e2754" class="indexterm-anchor"></a><a id="d2179e2758" class="indexterm-anchor"></a>If Performance Objectives are not being met for a Performance Class, and the Performance Class accesses the same database as other Performance Classes, then Oracle Database QoS Management can recommend consumer group mapping changes. Changing the consumer group mappings gives more access to the CPU resource to the Performance Class that is not meeting is Performance Objective. Oracle Database QoS Management issues consumer group mapping recommendations only for Performance Classes that are competing for resources in the same database and server pool.</p>
</div>
</div>
<a id="APQOS363"></a>
<div class="props_rev_3"><a id="GUID-61A41E22-1B82-4E0E-B82F-AD32E279558B"></a>
<h5 id="APQOS-GUID-61A41E22-1B82-4E0E-B82F-AD32E279558B" class="sect5">Modifying the CPU Count</h5>
<div>
<p>If you have multiple database instances running on servers in a server pool, Oracle Database QoS Management can recommend that CPU resources used by a database instance in one slice on the server be donated to a slice that needs more CPU resources. If there is a Performance Class that is not meeting its Performance Objective, and there is another slice on the system that has available headroom, or the Performance Classes that use that slice are of a lower rank, then Oracle Database QoS Management can recommend moving a CPU from the idle slice to the overloaded slice. If this recommendation is implemented, then the <code>CPU_COUNT</code> parameter is adjusted downwards for the idle instance and upwards for the overworked instance on all servers in the server pool.</p>
</div>
</div>
<a id="APQOS364"></a>
<div class="props_rev_3"><a id="GUID-38083EC8-119E-4233-87DF-84496B008F2B"></a>
<h5 id="APQOS-GUID-38083EC8-119E-4233-87DF-84496B008F2B" class="sect5">Moving Servers Between Server Pools</h5>
<div>
<p>Another recommended action that Oracle Database QoS Management <a id="d2179e2878" class="indexterm-anchor"></a><a id="d2179e2882" class="indexterm-anchor"></a>can display is to move a server from one server pool to another to provide additional resources to meet the Performance Objectives for a Performance Class. If all the server pools in the cluster are at their specified minimum size, or if the server pool needing the resource is at its maximum size, then Oracle Database QoS Management can no longer recommend removing servers from server pools. In this situation the Dashboard displays &#34;No recommended action at this time.&#34;</p>
<p>The minimum size of a server pool is the number of servers that that server pool is required to have. If you add the values for the server pool minimum attribute for each server pool in your cluster, then the difference between this sum and the total number of servers in the cluster represents shared servers that can move between server pools (or <span class="italic">float</span>) to meet changes in demand. For example, if your cluster has 10 servers and two server pools, and each server pool has a minimum size of four, then your system has two servers that can be moved between server pools. These servers can be moved if the target server pool has not reached its maximum size. Oracle Database QoS Management always honors the Min and Max size constraints set in a policy when making Move Server recommendations.</p>
<p><a id="d2179e2893" class="indexterm-anchor"></a><a id="d2179e2895" class="indexterm-anchor"></a>If you set the minimum size of a server pool to zero and your system experiences a demand surge, then Oracle Database QoS Management can recommend moving all the servers out of that server pool so that the server pool is at its minimum size. This results in the Performance Classes that use that server pool being completely starved of resources, and essentially being shut down. A server pool with a minimum size of zero should only host applications that are of low business criticalness and Performance Classes that are assigned a low rank in the Performance Policy.</p>
</div>
</div>
</div>
<a id="APQOS329"></a>
<div class="props_rev_3"><a id="GUID-8F232523-6A2D-4C44-AFE9-381AD7630FBD"></a>
<h4 id="APQOS-GUID-8F232523-6A2D-4C44-AFE9-381AD7630FBD" class="sect4">Choosing the Best Recommendation</h4>
<div>
<p>Oracle Database Quality of Service Management can offer multiple recommendations for improving workload performance.</p>
<p>When trying to relieve a resource bottleneck for a particular Performance Class, Oracle Database QoS Management recommends adding more of the resource (such as CPU time) for that Performance Class or making the resource available more quickly to work requests in the Performance Class. The recommendations take the form of promoting the target Performance Class to a higher Consumer Group, demoting competing Performance Classes within the resource plan, adjusting CPU resources shared between different slices in a server pool, or moving servers between server pools.</p>
<p>Implementing a recommended action makes the resource less available to other Performance Classes. When generating recommendations, Oracle Database QoS Management evaluates the impact to system performance as a whole. If a possible recommendation for changing the allocation of resources provides a small improvement in the response time of one Performance Class, but results in a large decrease in the response time of another Performance Class, then Oracle Database QoS Management reports that the performance gain is too small, and the change is not recommended.</p>
<p>Oracle Database QoS Management can issue recommendations that involve a negative impact to the performance of a Performance Class if:</p>
<ul style="list-style-type: disc;">
<li>
<p>The negative impact on the Performance Class from which the resource is taken is projected not to cause a Performance Objective violation and a positive impact is projected for the Performance Class that gets better access to resources</p>
</li>
<li>
<p>The Performance Class from which the resource is taken is lower ranked, and thus less critical to your business, than the Performance Class being helped</p>
</li>
</ul>
<p>If the resource bottleneck can be resolved in multiple ways, then Oracle Database QoS Management recommends an action that is projected to improve the performance of the highest ranked Performance Class that is violating its objective. You can also view the alternative recommendations generated by Oracle Database QoS Management and see whether the action was recommended for implementation. For example, one possible solution to resolving a bottleneck on the CPU resource is to demote the Consumer Group associated with the Performance Class that is using the CPU the most. By limiting access to the CPU for the work requests in this Performance Class, the work requests in the other Performances Classes for that database get a larger share of the CPU time. However, Oracle Database QoS Management might decide not to recommend this action because the gain in response time for the target Performance Class is too small.</p>
<div class="infoboxnotealso" id="GUID-8F232523-6A2D-4C44-AFE9-381AD7630FBD__GUID-99F94E51-9F0D-46F6-96E9-3EA452DE58C4">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-6BE297A8-C57F-48CF-8B57-C4322D98A61E">Viewing Recommendations</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-F67C544D-5666-47FC-BADD-DCC400C9DA1D">Viewing Recommendation Details</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="APQOS331"></a><a id="APQOS330"></a>
<div class="props_rev_3"><a id="GUID-A7E7E5AE-1732-4488-97F9-60BB5E7E1E57"></a>
<h4 id="APQOS-GUID-A7E7E5AE-1732-4488-97F9-60BB5E7E1E57" class="sect4">Contents of a Recommendation</h4>
<div>
<p>The analysis data for a recommendation include the projected change in response time for each Performance Class, the projected change in the <a href="glossary.htm#GUID-0C57D5A7-7249-423F-A852-3E7F9BCCB006"><span class="xrefglossterm">Performance Satisfaction Metric</span></a> (PSM) for each Performance Class, and the reason this action is chosen among other alternative actions, as shown in <a href="apqos_intro.htm#GUID-A7E7E5AE-1732-4488-97F9-60BB5E7E1E57__CHDBEHCD">Figure 1-7</a>. In this example, if you implement the recommended action, then Oracle Database QoS Management predicts that the <code>sales cart</code> Performance Class, which has the highest ranking, will have an improvement in response time from 0.00510 seconds for database requests to 0.00426 seconds, which equates to an 11.6% gain in its PSM. The other Performance Classes are not affected by the change because they use a different server pool.</p>
<div class="figure" id="GUID-A7E7E5AE-1732-4488-97F9-60BB5E7E1E57__CHDBEHCD">
<p class="titleinfigure">Figure 1-7 Example of the Analysis for a Recommended Action</p>
<img width="704" height="480" src="img/GUID-49FC4447-3F6E-45BE-9FEF-21FFC87DA478-default.gif" alt="Description of Figure 1-7 follows" title="Description of Figure 1-7 follows"/><br/>
<a href="img_text/GUID-49FC4447-3F6E-45BE-9FEF-21FFC87DA478-default.htm">Description of &#34;Figure 1-7 Example of the Analysis for a Recommended Action&#34;</a></div>
<!-- class="figure" -->
<div class="infoboxnotealso" id="GUID-A7E7E5AE-1732-4488-97F9-60BB5E7E1E57__GUID-B37150B5-5BC2-42E8-A269-55FA1AB6D61F">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="apqos_intro.htm#GUID-5A2EB75D-0ED3-44E8-9404-9604C38ACE4D" title="A useful metric for analyzing workload performance is a common and consistent numeric measure of how work requests in a Performance Class are doing against the current Performance Objective for that Performance Class.">Performance Satisfaction Metrics</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="apqos_intro.htm#GUID-80C195E4-A4AE-41C2-9BD1-75DBF427F19D">Using Metrics to Identify Performance Issues</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-6BE297A8-C57F-48CF-8B57-C4322D98A61E">Viewing Recommendations</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="APQOS332"></a>
<div class="props_rev_3"><a id="GUID-D484368F-C4D8-4E0C-8432-642B34C2AC15"></a>
<h4 id="APQOS-GUID-D484368F-C4D8-4E0C-8432-642B34C2AC15" class="sect4">Overview of Implementing Recommendations</h4>
<div>
<p>Oracle Database QoS Management does not implement the recommendations automatically. The recommended actions are performed only after the QoS Administrator clicks the Implement button. After the Oracle Database QoS Management administrator implements a recommendation, the system performance is reevaluated for the specified settling time before any new recommendations are made. You can also configure Enterprise Manager to generate alerts based upon the duration that a Performance Class has not been meeting its objective.</p>
<div class="infoboxnotealso" id="GUID-D484368F-C4D8-4E0C-8432-642B34C2AC15__GUID-730A6EF0-C197-4E57-8876-6C40F837FE71">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-2B0B5AC6-12B5-4BA3-8E8C-54DA261A0417" title="The Oracle Database QoS Management Dashboard (the Dashboard) provides an easy to use interface for managing the Oracle Database QoS Management system.">Using the Oracle Database QoS Management Dashboard</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-6BE297A8-C57F-48CF-8B57-C4322D98A61E">Viewing Recommendations</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-0ED288B6-8055-4D87-84AE-4B82C7C5E32F">Implementing Recommendations</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-D8C075E9-95C9-41B1-9933-08342E8F0059" title="You can view a variety of performance metrics for the Oracle Database QoS Management system as a whole, or for individual Performance Classes.">Reviewing Performance Metrics</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="APQOS333"></a>
<div class="props_rev_3"><a id="GUID-4A7C1057-FEB1-40E0-B0D5-66632C3B25AA"></a>
<h4 id="APQOS-GUID-4A7C1057-FEB1-40E0-B0D5-66632C3B25AA" class="sect4">Example: How Recommendations Are Generated</h4>
<div>
<p><a id="d2179e3251" class="indexterm-anchor"></a><a id="d2179e3253" class="indexterm-anchor"></a><a id="d2179e3257" class="indexterm-anchor"></a><a id="d2179e3261" class="indexterm-anchor"></a>Consider a system that has two servers in an Online server pool, and two servers in a Back Office server pool. The Online server pool hosts two workloads: the <code>sales_pc</code> Performance Class and the <code>sales_cart</code> Performance Class. The minimum size of the Online server pool is two. The Back Office server pool hosts two internal applications: a human resources (HR) application and an enterprise resource planning (ERP) application. The Back Office server pool has a minimum size of one. The <code>sales_cart</code> Performance Class has the highest rank and the <code>erp_pc</code> Performance Class has the lowest rank. The <code>sales_pc</code> Performance Class is ranked higher than the <code>hr_pc</code> Performance Class.</p>
<p>In this scenario, if the <code>sales_pc</code> workload surges, causing contention for resources and causing the <code>sales_cart</code> Performance Class to violate its Performance Objective, then this could lead to a service-level agreement (SLA) violation for the OLTP application. Oracle Database QoS Management issues a recommendation to increase access to the CPU for the <code>sales_cart</code> Performance Class at the expense of the <code>sales_pc</code> workload, because the <code>sales_cart</code> Performance Class is of a higher rank; a higher rank indicates that satisfying the Performance Objective for the <code>sales_cart</code> Performance Class is more important than satisfying the Performance Objective for the <code>sales_pc</code> Performance Class.</p>
<p>If, after you implement the recommendation, the sales_cart and <code>sales_pc</code> Performance Classes are still not satisfying their Performance Objectives, then Oracle Database QoS Management issues a recommendation to increase the number of servers in the Online server pool by moving a server from the Back Office server pool, or a server pool that hosts less critical workloads or workloads with more headroom. In this scenario, a server can be moved from the Back Office server pool, because the Back Office server pool is currently above its minimum size of one. If the Back Office server pool had a minimum size of two, then Oracle Database QoS Management would have to find an available server in a different server pool; Oracle Database QoS Management does not recommend to move a server from a server pool if doing so will cause a server pool to drop below its minimum size.</p>
<p>If you implement the recommended action, and your applications use Cluster Managed Services and Client Run-time Load Balancing, then the application users should not see a service disruption due to this reallocation. The services are shut down transactionally on the server being moved. After the server has been added to the stressed server pool, all database instances and their offered services are started on the reallocated server. At this point, sessions start to gradually switch to using the new server in the server pool, relieving the bottleneck.</p>
<p>Using the same scenario, if the <code>sales_pc</code> Performance Class and <code>hr_pc</code> Performance Class both require additional servers to meet their Performance Objectives, then Oracle Database QoS Management first issues recommendations to improve the performance of the <code>sales_pc</code> Performance Class, because the <code>sales_pc</code> Performance Class is ranked higher than the <code>hr_pc</code> Performance Class. When the <code>sales_pc</code> Performance Class is satisfying its Performance Objectives, then Oracle Database QoS Management makes recommendations to improve the performance of the <code>hr_pc</code> Performance Class.</p>
</div>
</div>
</div>
</div>
<a id="APQOS111"></a>
<div class="props_rev_3"><a id="GUID-DDB0BC29-122C-4967-AA34-21C5EFA790F3"></a>
<h2 id="APQOS-GUID-DDB0BC29-122C-4967-AA34-21C5EFA790F3" class="sect2">What Does Oracle Database QoS Management Manage?</h2>
<div>
<p>Oracle Database QoS Management <a id="d2179e3395" class="indexterm-anchor"></a><a id="d2179e3397" class="indexterm-anchor"></a><a id="d2179e3401" class="indexterm-anchor"></a>works with Oracle Real Application Clusters (Oracle RAC) and Oracle Clusterware. Oracle Database QoS Management operates over an entire Oracle RAC cluster, which can support a variety of applications.</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="apqos_intro.htm#GUID-141E64F1-2758-4783-8203-8AB082086FD6" title="Oracle Database QoS Management manages and monitors server pools configured by Oracle Clusterware.">Managing Database Resources to Meet Service Levels</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-A3F197E2-E102-4201-AB87-EE7789C68D89">High Availability Management and Oracle Database QoS Management</a></p>
</li>
</ul>
<div class="infobox-note" id="GUID-DDB0BC29-122C-4967-AA34-21C5EFA790F3__GUID-7862E897-F7D8-4DAC-ABFA-7ED5EF2E9280">
<p class="notep1">Note:</p>
<p>Oracle Database QoS Management<a id="d2179e3421" class="indexterm-anchor"></a><a id="d2179e3425" class="indexterm-anchor"></a> supports only OLTP workloads. The following types of workloads (or database requests) are not supported:</p>
<ul style="list-style-type: disc;">
<li>
<p>Batch workloads</p>
</li>
<li>
<p>Workloads that require more than one second to complete</p>
</li>
<li>
<p>Workloads that use parallel data manipulation language (DML)</p>
</li>
<li>
<p>Workloads that query GV$ views at a signification utilization level</p>
</li>
</ul>
</div>
</div>
<a id="APQOS113"></a>
<div class="props_rev_3"><a id="GUID-141E64F1-2758-4783-8203-8AB082086FD6"></a>
<h3 id="APQOS-GUID-141E64F1-2758-4783-8203-8AB082086FD6" class="sect3">Managing Database Resources to Meet Service Levels</h3>
<div>
<p>Oracle Database QoS Management manages the CPU resource for a cluster. Oracle Database QoS Management does not manage I/O resources, so I/O intensive applications are not managed effectively by Oracle Database QoS Management.</p>
<p>Oracle Database QoS Management integrates with the Oracle RAC database through the following technologies to manage resources within a cluster:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="apqos_intro.htm#GUID-DD74AF89-967E-417E-A256-AF5535E97672">Database Services</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-4547C281-7AA4-489A-96D9-86C09EEF2C14">Oracle Database Resource Manager</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-390AC908-26B6-4E62-A01B-8D9933C2B8D3" title="Oracle Database QoS Management manages and monitors server pools configured by Oracle Clusterware.">Oracle Clusterware</a></p>
</li>
<li>
<p><a href="apqos_intro.htm#GUID-16B531AF-A41D-470E-B556-32E15C335709">Run-time Connection Load Balancing</a></p>
</li>
</ul>
<p>Oracle Database QoS Management periodically evaluates the resource wait times for all used resources. If the average response time for the work requests in a Performance Class is greater than the value specified in its Performance Objective, then Oracle Database QoS Management uses the collected metrics to find the bottlenecked resource. If possible, Oracle Database QoS Management provides recommendations for adjusting the size of the server pools or making alterations to the consumer group mappings in the resource plan used by Oracle Database Resource Manager.</p>
</div>
<a id="APQOS334"></a>
<div class="props_rev_3"><a id="GUID-DD74AF89-967E-417E-A256-AF5535E97672"></a>
<h4 id="APQOS-GUID-DD74AF89-967E-417E-A256-AF5535E97672" class="sect4">Database Services</h4>
<div>
<p><a id="d2179e3591" class="indexterm-anchor"></a><a id="d2179e3595" class="indexterm-anchor"></a><a id="d2179e3599" class="indexterm-anchor"></a><a id="d2179e3603" class="indexterm-anchor"></a>You create <a href="glossary.htm#GUID-F918AB66-C5FA-4162-84A2-070BBAE5D2D3"><span class="xrefglossterm">database services</span></a> to provide a mechanism for grouping related work requests. An <a href="glossary.htm#GUID-3EF5C1AD-E446-4C7D-AA5B-0C30A54AF0BE"><span class="xrefglossterm">application</span></a> connects to the cluster databases using database services. A user-initiated query against the database could use a different service than a web-based application. Different services can represent different types of work requests. Each call or request made to the Oracle RAC database is a <a href="glossary.htm#GUID-6458BA0D-39A0-4C48-BD70-5BDA35125295"><span class="xrefglossterm">work request</span></a>.</p>
<p>You can also use database services to manage and measure database workloads. To manage the resources used by a service, some services may be deployed on several Oracle RAC instances concurrently, whereas others may be deployed on only a single instance to isolate the workload that uses that service.</p>
<p><a id="d2179e3620" class="indexterm-anchor"></a>In an Oracle RAC cluster, Oracle Database QoS Management monitors the server pools and its nodes, on which the database services are offered. Services are created by the database administrator for a database. For a policy-managed database, the service runs on all servers in the specified server pool. If a singleton service is required due to the inability of the application to scale horizontally, then the service can be restricted to run in a server pool that has a minimum and maximum size of one.</p>
<p>To use Oracle Database QoS Management for managing performance, create one or more policy-managed databases that run in server pools. If you have administrator-managed databases, then the database instances are placed in the Generic server pool and Oracle Database QoS Management can only monitor these databases.</p>
<p>When you first configure Oracle Database QoS Management, a default Performance Policy is created for each service that is discovered on the server pools being monitored. The name of these default Performance Classes are <span class="italic"><code>service_name</code></span><code>_pc</code>. The workload you want to monitor and manage the resource for must use a database service to connect to the database.</p>
<div class="infoboxnotealso" id="GUID-DD74AF89-967E-417E-A256-AF5535E97672__GUID-35753C1A-0E78-4081-9A4B-AC89213E2895">
<p class="notep1">See Also:</p>
<p><a class="olink RACAD7300" target="_blank" href="../RACAD/GUID-6524637F-FE3E-46D9-8B47-887C0D7C562C.htm#RACAD7300"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about services</p>
</div>
</div>
</div>
<a id="APQOS335"></a>
<div class="props_rev_3"><a id="GUID-4547C281-7AA4-489A-96D9-86C09EEF2C14"></a>
<h4 id="APQOS-GUID-4547C281-7AA4-489A-96D9-86C09EEF2C14" class="sect4">Oracle Database Resource Manager</h4>
<div>
<p><a id="d2179e3696" class="indexterm-anchor"></a>Oracle Database Resource Manager (Resource Manager) is an example of a <a href="glossary.htm#GUID-34297327-E98E-425C-9C9D-00BF9B75B2F8"><span class="xrefglossterm">resource allocation mechanism</span></a>; Resource Manager can allocate CPU shares among a collection of resource consumer groups based on a resource plan specified by an administrator. A resource plan allocates the percentage of opportunities to run on the CPU.</p>
<p>Oracle Database QoS Management does not adjust existing Resource Manager plans; Oracle Database QoS Management activates a resource plan named <code>APPQOS_PLAN</code>, which is a complex, multilevel resource plan. Oracle Database QoS Management also creates consumer groups that represent Performance Classes and resource plan directives for each consumer group.</p>
<p>When you implement an Oracle Database QoS Management recommendation to promote or demote a consumer group for a Performance Class, Oracle Database QoS Management makes the recommended changes to the mapping of the Performance Class to the CPU shares specified in the <code>APPQOS_PLAN</code> resource plan. By altering the consumer group, the Performance Class that is currently not meeting its Performance Objective is given more access to the CPU resource.</p>
<p>By default, the <code>APPQOS_PLAN</code> is replaced during the Oracle Scheduler <a href="glossary.htm#GUID-3D477EA2-E703-4C69-B791-D5D38410AC41"><span class="xrefglossterm">maintenance window</span></a>. Oracle recommends that you use the <code>APPQOS_PLAN</code> as the plan during those daily windows because this resource plan incorporates the consumer groups from the <code>DEFAULT_MAINTENANCE_PLAN</code> plan. You can force the use of <code>APPQOS_PLAN</code> by running the following commands in SQL*Plus:</p>
<pre dir="ltr">BEGIN
 DBMS_SCHEDULER.DISABLE(name=&gt;&#39;&#34;SYS&#34;.&#34;MONDAY_WINDOW&#34;&#39;);
END;
/

BEGIN
 DBMS_SCHEDULER.SET_ATTRIBUTE(name=&gt;&#39;&#34;SYS&#34;.&#34;MONDAY_WINDOW&#34;&#39;,
   attribute=&gt;&#39;RESOURCE_PLAN&#39;,value=&gt;&#39;APPQOS_PLAN&#39;);
END;
/

BEGIN
 DBMS_SCHEDULER.ENABLE(name=&gt;&#39;&#34;SYS&#34;.&#34;MONDAY_WINDOW&#34;&#39;);
END;
/
</pre>
<p>Repeat these commands for every weekday, for example, <code>TUESDAY_WINDOW</code>.</p>
<div class="infobox-note" id="GUID-4547C281-7AA4-489A-96D9-86C09EEF2C14__GUID-15A73A95-F72F-4BC1-BFA4-343C1743AA81">
<p class="notep1">Note:</p>
<p>Do not edit the <code>APPQOS_PLAN</code> except as specified in <span class="q">&#34;<a href="apqos_admin.htm#GUID-23A59957-1200-4964-9495-E7280EC50DDB" title="You can perform limited editing of the Resource Manager plan used by Oracle Database Quality of Service Management.">Editing the Resource Plan for Oracle Database QoS Management</a>&#34;</span>.</p>
</div>
<div class="infoboxnotealso" id="GUID-4547C281-7AA4-489A-96D9-86C09EEF2C14__GUID-2811D9E4-E1F1-4154-BD7C-DCF230A06C73">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="install_config.htm#GUID-B5239320-CA9F-43D5-A851-5AFEB913A52F">Enabling Oracle Database QoS Management</a>&#34;</span></p>
</li>
<li>
<p><a class="olink ADMIN11841" target="_blank" href="../ADMIN/dbrm.htm#ADMIN11841"><span class="italic">Oracle Database Administrator&#39;s Guide</span> f</a>or more information about Resource Manager</p>
</li>
</ul>
</div>
</div>
</div>
<a id="APQOS336"></a>
<div class="props_rev_3"><a id="GUID-390AC908-26B6-4E62-A01B-8D9933C2B8D3"></a>
<h4 id="APQOS-GUID-390AC908-26B6-4E62-A01B-8D9933C2B8D3" class="sect4">Oracle Clusterware</h4>
<div>
<p>Oracle Database QoS Management manages and monitors server pools configured by Oracle Clusterware.</p>
<p>You must have Oracle Clusterware installed and configured before you can use Oracle Database QoS Management. The cluster administrator should create server pools to be used to deploy policy-managed Oracle RAC databases. Administrator-managed Oracle RAC databases use only the Generic server pool.</p>
<p>When you first configure Oracle Database QoS Management and create the initial Policy Set, you specify which server pools should be managed by Oracle Database QoS Management and which should only be monitored. If you select a server pool to be managed by Oracle Database QoS Management, then Oracle Database QoS Management monitors the resources used by all the Performance Classes that run in that server pool. If a Performance Class is not satisfying its Performance Objective, then Oracle Database QoS Management can recommend moving servers between server pools to provide additional resources where needed.</p>
<div class="infoboxnotealso" id="GUID-390AC908-26B6-4E62-A01B-8D9933C2B8D3__GUID-2CE78101-073D-4D69-86D0-E21782079772">
<p class="notep1">See Also:</p>
<p><a class="olink CWADD92105" target="_blank" href="../CWADD/GUID-42F6324B-8A51-4FDE-9E9B-38B058F227A5.htm#CWADD92105"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a> for more information about policy-managed databases and server pools</p>
</div>
</div>
</div>
<a id="APQOS337"></a>
<div class="props_rev_3"><a id="GUID-16B531AF-A41D-470E-B556-32E15C335709"></a>
<h4 id="APQOS-GUID-16B531AF-A41D-470E-B556-32E15C335709" class="sect4">Run-time Connection Load Balancing</h4>
<div>
<p>Run-time connection load balancing enables Oracle Clients to provide intelligent allocations of connections in the connection pool when applications request a connection to complete some work; the decision of which instance to route a new connection to is based on the current level of performance provided by the database instances.</p>
<p>Applications that use resources managed by Oracle Database QoS Management can also benefit from connection load balancing and transparent application failover (TAF). Connection load balancing enables you to spread user connections across all of the instances that are supporting a service. For each service, you can define the method you want the listener to use for load balancing by setting the connection load balancing goal, using the appropriate SRVCTL command with the <code>-clbgoal</code> option. You can also specify a single TAF policy for all users of a service using SRVCTL with the options <code>-failovermethod</code>,<code>-failovertype</code>, and so on.</p>
<div class="infoboxnotealso" id="GUID-16B531AF-A41D-470E-B556-32E15C335709__GUID-A4141A6B-B0B5-4534-804B-E2D499354400">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink RACAD8264" target="_blank" href="../RACAD/GUID-539C0211-6AA2-44A3-9699-8DE9FBD9867D.htm#RACAD8264"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about run-time connection load balancing</p>
</li>
<li>
<p><span class="q">&#34;<a href="wlm_strats.htm#GUID-531DF27C-E757-4079-BEEB-FA46646728B8">Supported Service Configurations</a>&#34;</span></p>
</li>
<li>
<p><a class="olink NETAG455" target="_blank" href="../NETAG/advcfg.htm#NETAG455"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for more information about configuring TAF</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="APQOS114"></a>
<div class="props_rev_3"><a id="GUID-A3F197E2-E102-4201-AB87-EE7789C68D89"></a>
<h3 id="APQOS-GUID-A3F197E2-E102-4201-AB87-EE7789C68D89" class="sect3">High Availability Management and Oracle Database QoS Management</h3>
<div>
<p>Performance management and managing systems for high availability are closely related. Users typically consider a system to be up, or available, only when its performance is acceptable. You can use Oracle Database QoS Management and Performance Objectives to specify and maintain acceptable performance levels.</p>
<p>Oracle Database QoS Management is a run-time performance management product that optimizes resource allocations to help your system meet service-level agreements under dynamic workload conditions. Oracle Database QoS Management provides recommendations to help the work that is most critical to your business get the necessary resources. Oracle Database QoS Management assists in rebalancing resource allocations based upon current demand and resource availability. Nonessential work is suppressed to ensure that work vital to your business completes successfully.</p>
<p>Oracle Database QoS Management is not a feature to use for improving performance; the goal of Oracle Database QoS Management is to maintain optimal performance levels. Oracle Database QoS Management assumes that system parameters that affect both performance and availability have been set appropriately, and that they are constant. For example, the <code>FAST_START_MTTR_TARGET</code> database parameter controls how frequently the database writer checkpoints blocks to the data files to minimize instance recovery time. Using a low value for this parameter reduces the amount of time required to recover your database, but the overhead of writing redo log data more frequently can have a negative impact on the performance of your database. Oracle Database QoS Management does not make recommendations regarding the values specified for such parameters.</p>
<p>Management for high availability encompasses many issues that are not related to workload and that cannot be affected by managing workloads. For example, system availability depends crucially on the frequency and duration of software upgrade events. System availability also depends directly on the frequency of hardware failures. Managing workloads cannot change how often software upgrades are done or how often hardware fails.</p>
<div class="infoboxnotealso" id="GUID-A3F197E2-E102-4201-AB87-EE7789C68D89__GUID-061D1314-B032-4AAF-A2B8-523AFEA8AD14">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink RACAD7386" target="_blank" href="../RACAD/GUID-424BE157-18A3-4261-8A43-DF4D5E60C3D4.htm#RACAD7386"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a> for more information about using Oracle RAC for high availability</p>
</li>
<li>
<p><a class="olink TGDBA02501" target="_blank" href="../TGDBA/pfgrf_perf_overview.htm#TGDBA02501"><span><cite>Oracle Database Performance Tuning Guide</cite></span></a></p>
</li>
<li>
<p><a class="olink HAOVW001" target="_blank" href="../HAOVW/overview.htm#HAOVW001"><span><cite>Oracle Database High Availability Overview</cite></span></a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="APQOS126"></a>
<div class="props_rev_3"><a id="GUID-D5BED854-32B1-4645-BF96-8B00BAF21009"></a>
<h2 id="APQOS-GUID-D5BED854-32B1-4645-BF96-8B00BAF21009" class="sect2">Overview of Metrics</h2>
<div>
<p>Oracle Database QoS Management <a id="d2179e4082" class="indexterm-anchor"></a><a id="d2179e4084" class="indexterm-anchor"></a><a id="d2179e4088" class="indexterm-anchor"></a><a id="d2179e4092" class="indexterm-anchor"></a><a id="d2179e4096" class="indexterm-anchor"></a>bases its decisions on observations of how long work requests spend waiting for resources. Examples of resources that work requests can wait for include hardware resources, such as CPU cycles, disk I/O queues, and Global Cache blocks. Other waits can occur within the database, such as latches, locks, pins, and so on. Although the resource waits within the database are accounted for in the Oracle Database QoS Management metrics, they are not managed or specified by type.</p>
<p>The <a href="glossary.htm#GUID-E0B75C2F-7E5C-4ED8-9334-52FC904C8F7B"><span class="xrefglossterm">response time</span></a> of a work request consists of execution time and a variety of wait times; changing or improving the execution time generally requires application source code changes. Oracle Database QoS Management therefore observes and manages only wait times.</p>
<p>Oracle Database QoS Management uses a standardized set of metrics, which are collected by all the servers in the system. There are two types of metrics used to measure the response time of work requests: performance metrics and resource metrics. These metrics enable direct observation of the wait time incurred by work requests in each Performance Class, for each resource requested, as the work request traverses the servers, networks, and storage devices that form the system. Another type of metric, the Performance Satisfaction Metric, measures how well the Performance Objectives for a Performance Class are being met.</p>
<div class="infoboxnotealso" id="GUID-D5BED854-32B1-4645-BF96-8B00BAF21009__GUID-09F9E4E5-CEC7-4B32-88F0-2DBF6AED24CA">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-2B0B5AC6-12B5-4BA3-8E8C-54DA261A0417" title="The Oracle Database QoS Management Dashboard (the Dashboard) provides an easy to use interface for managing the Oracle Database QoS Management system.">Using the Oracle Database QoS Management Dashboard</a>&#34;</span></p>
</div>
</div>
<a id="APQOS272"></a>
<div class="props_rev_3"><a id="GUID-4CD24F18-34D8-4944-A17F-AED9A1EAC5BE"></a>
<h3 id="APQOS-GUID-4CD24F18-34D8-4944-A17F-AED9A1EAC5BE" class="sect3">Performance Metrics</h3>
<div>
<p>Performance metrics give an overview of where time is spent in the system and enable comparisons of wait times across the system.</p>
<p>Performance metrics are collected at the <a href="glossary.htm#GUID-005E3F41-7024-4A45-8D40-AEEC0901027D"><span class="xrefglossterm">entry point</span></a> to each server in the system. Data is collected periodically and forwarded to a central point for analysis, decision making, and historical storage. See <a href="apqos_intro.htm#GUID-E5CC78F2-6704-4358-B9A5-64483FF57F0C__BABGICBA">Figure 1-6</a> for an illustration of how the system data are collected.</p>
<p>Performance metrics measure the response time (the difference between the time a request comes in and the time a response is sent out). The response time for all database client requests in a Performance Class is averaged and presented as the average response time, measured in seconds for a database request.</p>
<div class="infoboxnotealso" id="GUID-4CD24F18-34D8-4944-A17F-AED9A1EAC5BE__GUID-D437E156-6F96-4EF3-A2DC-7EB0F054EFE0">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-D8C075E9-95C9-41B1-9933-08342E8F0059" title="You can view a variety of performance metrics for the Oracle Database QoS Management system as a whole, or for individual Performance Classes.">Reviewing Performance Metrics</a>&#34;</span></p>
</div>
</div>
</div>
<a id="APQOS128"></a>
<div class="props_rev_3"><a id="GUID-FBA9D3D8-74B8-4323-A398-502B70D9D155"></a>
<h3 id="APQOS-GUID-FBA9D3D8-74B8-4323-A398-502B70D9D155" class="sect3">Resource Metrics</h3>
<div>
<p><a id="d2179e4252" class="indexterm-anchor"></a><a id="d2179e4256" class="indexterm-anchor"></a><a id="d2179e4260" class="indexterm-anchor"></a><a id="d2179e4264" class="indexterm-anchor"></a>There are two resource metrics for each resource of interest in the system:</p>
<ul style="list-style-type: disc;">
<li>
<p>Resource usage time&mdash;measures how much time was spent using the resource for each work request</p>
</li>
<li>
<p>Resource wait time&mdash;measures the time spent waiting to get the resource</p>
</li>
</ul>
<p>Resources are classified as CPU, Storage I/O, Global Cache, and Other (database waits). The data are collected from the Oracle RAC databases, Oracle Clusterware, and the operating system.</p>
<div class="infoboxnotealso" id="GUID-FBA9D3D8-74B8-4323-A398-502B70D9D155__GUID-815B8481-D112-4F80-B59B-99DBC7C84FE8">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-99DAE2C9-FC85-4F76-9C5D-3D6CB053CB4E">Viewing the Resource Wait Times Breakdown</a>&#34;</span></p>
</div>
</div>
</div>
<a id="APQOS129"></a>
<div class="props_rev_3"><a id="GUID-5A2EB75D-0ED3-44E8-9404-9604C38ACE4D"></a>
<h3 id="APQOS-GUID-5A2EB75D-0ED3-44E8-9404-9604C38ACE4D" class="sect3">Performance Satisfaction Metrics</h3>
<div>
<p>A useful metric for analyzing workload performance is a common and consistent numeric measure of how work requests in a Performance Class are doing against the current Performance Objective for that Performance Class.</p>
<p>This numeric measure is called the <a href="glossary.htm#GUID-0C57D5A7-7249-423F-A852-3E7F9BCCB006"><span class="xrefglossterm">Performance Satisfaction Metric</span></a>.</p>
<p>Different performance objectives are used to measure the performance of workloads, as shown in the following table:</p>
<div class="tblformal" id="GUID-5A2EB75D-0ED3-44E8-9404-9604C38ACE4D__GUID-FE827643-2D46-49E7-A3AA-24D298362256">
<table class="cellalignment6430" summary="This table lists the performance metrics used for various workload types.">
<thead>
<tr class="cellalignment6419">
<th class="cellalignment6431" id="d2179e4374">Workload Type</th>
<th class="cellalignment6432" id="d2179e4377">Performance Objectives</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6419">
<td class="cellalignment6433" id="d2179e4382" headers="d2179e4374">
<p>OLTP</p>
</td>
<td class="cellalignment6434" headers="d2179e4382 d2179e4377">
<p>Response time, transactions per second</p>
</td>
</tr>
<tr class="cellalignment6419">
<td class="cellalignment6433" id="d2179e4389" headers="d2179e4374">
<p>Batch</p>
</td>
<td class="cellalignment6434" headers="d2179e4389 d2179e4377">
<p>Velocity, throughput</p>
</td>
</tr>
<tr class="cellalignment6419">
<td class="cellalignment6433" id="d2179e4396" headers="d2179e4374">
<p>DSS</p>
</td>
<td class="cellalignment6434" headers="d2179e4396 d2179e4377">
<p>Read or cache hit ratio, duration, throughput</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Oracle Database QoS Management currently supports only OLTP workloads. For OLTP workloads, you can only configure a response time performance objective.</p>
<div class="infoboxnotealso" id="GUID-5A2EB75D-0ED3-44E8-9404-9604C38ACE4D__GUID-0E1EF5FE-7EF3-46C8-A5F8-A5C55C6D7031">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-09D9F38A-CCDB-4F50-9855-393B9754CDAB">Interpreting the Performance Overview Graphs</a>&#34;</span></p>
</div>
</div>
</div>
<a id="APQOS130"></a>
<div class="props_rev_3"><a id="GUID-80C195E4-A4AE-41C2-9BD1-75DBF427F19D"></a>
<h3 id="APQOS-GUID-80C195E4-A4AE-41C2-9BD1-75DBF427F19D" class="sect3">Using Metrics to Identify Performance Issues</h3>
<div>
<p><a id="d2179e4463" class="indexterm-anchor"></a><a id="d2179e4467" class="indexterm-anchor"></a><a id="d2179e4471" class="indexterm-anchor"></a>The Oracle Database QoS Management metrics provide the information needed to systematically identify Performance Class bottlenecks in the system. When a Performance Class is violating its Performance Objective, the bottleneck for that Performance Class is the resource that contributes the largest average wait time for each work request in that Performance Class.</p>
<p>The Oracle Database QoS Management metrics are used to find a bottleneck for a Performance Class using the following steps:</p>
<ol>
<li>
<p>Oracle Database QoS Management selects the highest ranked Performance Class that is not meeting its Performance Objective.</p>
</li>
<li>
<p>For that Performance Class, wait times for each resource are determined from the collected metrics.</p>
</li>
<li>
<p>The resource with the highest wait time per request is determined to be the bottlenecked resource.</p>
</li>
</ol>
<p>Analyzing the average wait for each database request and the total number of requests for each Performance Class provides the resource wait time component of the response times of each Performance Class. The largest such resource contribution (CPU, Storage I/O, Global Cache, or Other) is the current bottleneck for the Performance Class.</p>
<div class="infoboxnotealso" id="GUID-80C195E4-A4AE-41C2-9BD1-75DBF427F19D__GUID-F5E6EA7D-A87E-4C22-BC3F-FF467BA1D5C5">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="apqos_admin.htm#GUID-99DAE2C9-FC85-4F76-9C5D-3D6CB053CB4E">Viewing the Resource Wait Times Breakdown</a>&#34;</span></p>
</div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment6418">
<tr>
<td class="cellalignment6425">
<table class="cellalignment6423">
<tr>
<td class="cellalignment6422"><a href="release_changes.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment6422"><a href="wlm_strats.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2014, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment6427">
<table class="cellalignment6421">
<tr>
<td class="cellalignment6422"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment6422"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment6422"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment6422"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment6422"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment6422"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>