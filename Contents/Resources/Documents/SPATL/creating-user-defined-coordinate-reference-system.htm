<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-100666"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Creating%20a%20User-Defined%20Coordinate%20Reference%20System"></a><title>Creating a User-Defined Coordinate Reference System</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="coordinate systems, user-defined, user-defined coordinate reference system, coordinate reference systems, British Grid Transformation OSTN02/OSGM02, OSTN02/OSGM02 grid transformation, Ordnance Survey grid transformation"/>
<meta name="dcterms.created" content="2017-01-26T11:46:57Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Spatial and Graph Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49172-07"/>
<meta name="dcterms.isVersionOf" content="SPATL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="legacy-tables-and-views.htm" title="Previous" type="text/html"/>
<link rel="Next" href="notes-and-restrictions-coordinate-systems-support.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49172-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-C199908B-F3D5-41F7-8F60-E8CD3BEA7E29"></a> <span id="PAGE" style="display:none;">92/475</span> <!-- End Header -->
<a id="SPATL712"></a>
<h1 id="SPATL-GUID-C199908B-F3D5-41F7-8F60-E8CD3BEA7E29" class="sect1"><span class="enumeration_section">6.9</span> Creating a User-Defined Coordinate Reference System</h1>
<div>
<p>If the coordinate systems supplied by Oracle are not sufficient for your needs, you can create user-defined coordinate reference systems.</p>
<div class="infobox-note" id="GUID-C199908B-F3D5-41F7-8F60-E8CD3BEA7E29__GUID-5F6D1A3C-2112-4764-ADA6-4EF270E758D4">
<p class="notep1">Note:</p>
<p>As mentioned in <a href="terms-and-concepts1.htm#GUID-4B6E0F48-D354-4EAC-9A7A-9577C7E17BB8">Coordinate System (Spatial Reference System)</a> , the terms <span class="italic">coordinate system</span> and <span class="italic">coordinate reference system</span> (CRS) are often used interchangeably, although coordinate reference systems must be Earth-based.</p>
</div>
<p>The exact steps for creating a user-defined CRS depend on whether it is geodetic or projected. In both cases, supply information about the coordinate system (coordinate axes, axis names, unit of measurement, and so on). For a geodetic CRS, supply information about the datum (ellipsoid, prime meridian, and so on), as explained in <a href="creating-user-defined-coordinate-reference-system.htm#GUID-EDE6CE08-A355-485E-82EE-BF07CEBEFD64">Creating a Geodetic CRS</a>. For a projected CRS, supply information about the source (geodetic) CRS and the projection (operation and parameters), as explained in <a href="creating-user-defined-coordinate-reference-system.htm#GUID-1C9F778B-DFCC-4944-A298-BCB70EDD747A">Creating a Projected CRS</a>.</p>
<p>For any user-defined coordinate system, the SRID value should be 1000000 (1 million) or higher.</p>
</div>
<a id="SPATL714"></a><a id="SPATL715"></a><a id="SPATL713"></a>
<div class="props_rev_3"><a id="GUID-EDE6CE08-A355-485E-82EE-BF07CEBEFD64"></a>
<h2 id="SPATL-GUID-EDE6CE08-A355-485E-82EE-BF07CEBEFD64" class="sect2"><span class="enumeration_section">6.9.1</span> Creating a Geodetic CRS</h2>
<div>
<div class="section">
<p>If the necessary unit of measurement, coordinate axes, SDO_COORD_SYS table row, ellipsoid, prime meridian, and datum are already defined, insert a row into the SDO_COORD_REF_SYSTEM view (described in <a href="coordinate-systems-data-structures.htm#GUID-D1584AF7-82AC-4B00-A0CB-EE83928A934A">SDO_COORD_REF_SYSTEM View</a>) to define the new geodetic CRS.</p>
<p><a href="creating-user-defined-coordinate-reference-system.htm#GUID-EDE6CE08-A355-485E-82EE-BF07CEBEFD64__CIHDHDAD">Example 6-5</a> inserts the definition for a hypothetical geodetic CRS named <code>My Own NAD27</code> (which, except for its SRID and name, is the same as the <code>NAD27</code> CRS supplied by Oracle).</p>
<p>If the necessary information for the definition does not already exist, follow these steps, as needed, to define the information before you insert the row into the SDO_COORD_REF_SYSTEM view:</p>
</div>
<!-- class="section" -->
<ol>
<li><span>If the unit of measurement is not already defined in the SDO_UNITS_OF_MEASURE table (described in <a href="coordinate-systems-data-structures.htm#GUID-C105DDDD-E8A6-47DA-9A97-CAEF657340B9">SDO_UNITS_OF_MEASURE Table</a>), insert a row into that table to define the new unit of measurement.</span></li>
<li><span>If the coordinate axes are not already defined in the SDO_COORD_AXES table (described in <a href="coordinate-systems-data-structures.htm#GUID-43CBB0D1-054B-4CDF-A6A2-51A53815C7F2">SDO_COORD_AXES Table</a>), insert one row into that table for each new coordinate axis.</span></li>
<li><span>If an appropriate entry for the coordinate system does not already exist in the SDO_COORD_SYS table (described in <a href="coordinate-systems-data-structures.htm#GUID-F771FF62-812E-483F-95BA-D529C2A0BA42">SDO_COORD_SYS Table</a>), insert a row into that table. <a href="creating-user-defined-coordinate-reference-system.htm#GUID-EDE6CE08-A355-485E-82EE-BF07CEBEFD64__CIHJDJCJ">Example 6-6</a> inserts the definition for a fictitious coordinate system.</span></li>
<li><span>If the ellipsoid is not already defined in the SDO_ELLIPSOIDS table (described in <a href="coordinate-systems-data-structures.htm#GUID-E08F521C-5870-409E-9005-791DD265C9F5">SDO_ELLIPSOIDS Table</a>), insert a row into that table to define the new ellipsoid.</span></li>
<li><span>If the prime meridian is not already defined in the SDO_PRIME_MERIDIANS table (described in <a href="coordinate-systems-data-structures.htm#GUID-7745A25C-3CBA-4628-9B40-48E48512C406">SDO_PRIME_MERIDIANS Table</a>), insert a row into that table to define the new prime meridian.</span></li>
<li><span>If the datum is not already defined in the SDO_DATUMS table (described in <a href="coordinate-systems-data-structures.htm#GUID-5E5F3810-61EC-4BC7-B985-12D139D87D10">SDO_DATUMS Table</a>), insert a row into that table to define the new datum.</span></li>
</ol>
<div class="example" id="GUID-EDE6CE08-A355-485E-82EE-BF07CEBEFD64__CIHDHDAD">
<p class="titleinexample">Example 6-5 Creating a User-Defined Geodetic Coordinate Reference System</p>
<pre dir="ltr">INSERT INTO SDO_COORD_REF_SYSTEM (
        SRID,
        COORD_REF_SYS_NAME,
        COORD_REF_SYS_KIND,
        COORD_SYS_ID,
        DATUM_ID,
        GEOG_CRS_DATUM_ID,
        SOURCE_GEOG_SRID,
        PROJECTION_CONV_ID,
        CMPD_HORIZ_SRID,
        CMPD_VERT_SRID,
        INFORMATION_SOURCE,
        DATA_SOURCE,
        IS_LEGACY,
        LEGACY_CODE,
        LEGACY_WKTEXT,
        LEGACY_CS_BOUNDS,
        IS_VALID,
        SUPPORTS_SDO_GEOMETRY)
  VALUES (
        9994267,
        &#39;My Own NAD27&#39;,
        &#39;GEOGRAPHIC2D&#39;,
        6422,
        6267,
        6267,
        NULL,
        NULL,
        NULL,
        NULL,
        NULL,
        &#39;EPSG&#39;,
        &#39;FALSE&#39;,
        NULL,
        NULL,
        NULL,
        &#39;TRUE&#39;,
        &#39;TRUE&#39;);
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-EDE6CE08-A355-485E-82EE-BF07CEBEFD64__CIHJDJCJ">
<p class="titleinexample">Example 6-6 Inserting a Row into the SDO_COORD_SYS Table</p>
<pre dir="ltr">INSERT INTO SDO_COORD_SYS (
        COORD_SYS_ID,
        COORD_SYS_NAME,
        COORD_SYS_TYPE,
        DIMENSION,
        INFORMATION_SOURCE,
        DATA_SOURCE)
  VALUES (
        9876543,
        &#39;My custom CS. Axes: lat, long. Orientations: north, east. UoM: deg&#39;,
        &#39;ellipsoidal&#39;,
        2,
        &#39;Myself&#39;,
        &#39;Myself&#39;);
</pre></div>
<!-- class="example" --></div>
</div>
<a id="SPATL717"></a><a id="SPATL718"></a><a id="SPATL719"></a><a id="SPATL720"></a><a id="SPATL716"></a>
<div class="props_rev_3"><a id="GUID-1C9F778B-DFCC-4944-A298-BCB70EDD747A"></a>
<h2 id="SPATL-GUID-1C9F778B-DFCC-4944-A298-BCB70EDD747A" class="sect2"><span class="enumeration_section">6.9.2</span> Creating a Projected CRS</h2>
<div>
<div class="section">
<p>If the necessary unit of measurement, coordinate axes, SDO_COORD_SYS table row, source coordinate system, projection operation, and projection parameters are already defined, insert a row into the SDO_COORD_REF_SYSTEM view (described in <a href="coordinate-systems-data-structures.htm#GUID-D1584AF7-82AC-4B00-A0CB-EE83928A934A">SDO_COORD_REF_SYSTEM View</a>) to define the new projected CRS.</p>
<p><a href="creating-user-defined-coordinate-reference-system.htm#GUID-1C9F778B-DFCC-4944-A298-BCB70EDD747A__CIHEGFHC">Example 6-7</a> inserts the definition for a hypothetical projected CRS named <code>My Own NAD27 / Cuba Norte</code> (which, except for its SRID and name, is the same as the <code>NAD27 / Cuba Norte</code> CRS supplied by Oracle).</p>
<p>If the necessary information for the definition does not already exist, follow these steps, as needed, to define the information before you insert the row into the SDO_COORD_REF_SYSTEM view:</p>
</div>
<!-- class="section" -->
<ol>
<li><span>If the unit of measurement is not already defined in the SDO_UNITS_OF_MEASURE table (described in <a href="coordinate-systems-data-structures.htm#GUID-C105DDDD-E8A6-47DA-9A97-CAEF657340B9">SDO_UNITS_OF_MEASURE Table</a>), insert a row into that table to define the new unit of measurement.</span></li>
<li><span>If the coordinate axes are not already defined in the SDO_COORD_AXES table (described in <a href="coordinate-systems-data-structures.htm#GUID-43CBB0D1-054B-4CDF-A6A2-51A53815C7F2">SDO_COORD_AXES Table</a>), insert one row into that table for each new coordinate axis.</span></li>
<li><span>If an appropriate entry for the coordinate system does not already exist in SDO_COORD_SYS table (described in <a href="coordinate-systems-data-structures.htm#GUID-F771FF62-812E-483F-95BA-D529C2A0BA42">SDO_COORD_SYS Table</a>), insert a row into that table. (See <a href="creating-user-defined-coordinate-reference-system.htm#GUID-EDE6CE08-A355-485E-82EE-BF07CEBEFD64__CIHJDJCJ">Example 6-6</a> in <a href="creating-user-defined-coordinate-reference-system.htm#GUID-EDE6CE08-A355-485E-82EE-BF07CEBEFD64">Creating a Geodetic CRS</a>).</span></li>
<li><span>If the projection operation is not already defined in the SDO_COORD_OPS table (described in <a href="coordinate-systems-data-structures.htm#GUID-B0BF42CD-F843-4B3D-8EFF-6E8CB601CD29">SDO_COORD_OPS Table</a>), insert a row into that table to define the new projection operation. <a href="creating-user-defined-coordinate-reference-system.htm#GUID-1C9F778B-DFCC-4944-A298-BCB70EDD747A__CIHCEGAD">Example 6-8</a> shows the statement used to insert information about coordinate operation ID 18061, which is supplied by Oracle.</span></li>
<li><span>If the parameters for the projection operation are not already defined in the SDO_COORD_OP_PARAM_VALS table (described in <a href="coordinate-systems-data-structures.htm#GUID-BDDC4BDE-AC1C-49CF-83FB-5A84FD36FBC1">SDO_COORD_OP_PARAM_VALS Table</a>), insert one row into that table for each new parameter. <a href="creating-user-defined-coordinate-reference-system.htm#GUID-1C9F778B-DFCC-4944-A298-BCB70EDD747A__CIHEBGAF">Example 6-9</a> shows the statement used to insert information about parameters with ID values 8801, 8802, 8805, 8806, and 8807, which are supplied by Oracle.</span></li>
</ol>
<div class="example" id="GUID-1C9F778B-DFCC-4944-A298-BCB70EDD747A__CIHEGFHC">
<p class="titleinexample">Example 6-7 Creating a User-Defined Projected Coordinate Reference System</p>
<pre dir="ltr">INSERT INTO SDO_COORD_REF_SYSTEM (
        SRID,
        COORD_REF_SYS_NAME,
        COORD_REF_SYS_KIND,
        COORD_SYS_ID,
        DATUM_ID,
        GEOG_CRS_DATUM_ID,
        SOURCE_GEOG_SRID,
        PROJECTION_CONV_ID,
        CMPD_HORIZ_SRID,
        CMPD_VERT_SRID,
        INFORMATION_SOURCE,
        DATA_SOURCE,
        IS_LEGACY,
        LEGACY_CODE,
        LEGACY_WKTEXT,
        LEGACY_CS_BOUNDS,
        IS_VALID,
        SUPPORTS_SDO_GEOMETRY)
  VALUES (
        9992085,
        &#39;My Own NAD27 / Cuba Norte&#39;,
        &#39;PROJECTED&#39;,
        4532,
        NULL,
        6267,
        4267,
        18061,
        NULL,
        NULL,
        &#39;Institut Cubano di Hidrografia (ICH)&#39;,
        &#39;EPSG&#39;,
        &#39;FALSE&#39;,
        NULL,
        NULL,
        NULL,
        &#39;TRUE&#39;,
        &#39;TRUE&#39;);
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-1C9F778B-DFCC-4944-A298-BCB70EDD747A__CIHCEGAD">
<p class="titleinexample">Example 6-8 Inserting a Row into the SDO_COORD_OPS Table</p>
<pre dir="ltr">INSERT INTO SDO_COORD_OPS (
        COORD_OP_ID,
        COORD_OP_NAME,
        COORD_OP_TYPE,
        SOURCE_SRID,
        TARGET_SRID,
        COORD_TFM_VERSION,
        COORD_OP_VARIANT,
        COORD_OP_METHOD_ID,
        UOM_ID_SOURCE_OFFSETS,
        UOM_ID_TARGET_OFFSETS,
        INFORMATION_SOURCE,
        DATA_SOURCE,
        SHOW_OPERATION,
        IS_LEGACY,
        LEGACY_CODE,
        REVERSE_OP,
        IS_IMPLEMENTED_FORWARD,
        IS_IMPLEMENTED_REVERSE)
  VALUES (
        18061,
        &#39;Cuba Norte&#39;,
        &#39;CONVERSION&#39;,
        NULL,
        NULL,
        NULL,
        NULL,
        9801,
        NULL,
        NULL,
        NULL,
        &#39;EPSG&#39;,
        1,
        &#39;FALSE&#39;,
        NULL,
        1,
        1,
        1);
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-1C9F778B-DFCC-4944-A298-BCB70EDD747A__CIHEBGAF">
<p class="titleinexample">Example 6-9 Inserting a Row into the SDO_COORD_OP_PARAM_VALS Table</p>
<pre dir="ltr">INSERT INTO SDO_COORD_OP_PARAM_VALS (
        COORD_OP_ID,
        COORD_OP_METHOD_ID,
        PARAMETER_ID,
        PARAMETER_VALUE,
        PARAM_VALUE_FILE_REF,
        UOM_ID)
  VALUES (
        18061,
        9801,
        8801,
        22.21,
        NULL,
        9110);
 
 INSERT INTO SDO_COORD_OP_PARAM_VALS (
        COORD_OP_ID,
        COORD_OP_METHOD_ID,
        PARAMETER_ID,
        PARAMETER_VALUE,
        PARAM_VALUE_FILE_REF,
        UOM_ID)
  VALUES (
        18061,
        9801,
        8802,
        -81,
        NULL,
        9110);
 
 INSERT INTO SDO_COORD_OP_PARAM_VALS (
        COORD_OP_ID,
        COORD_OP_METHOD_ID,
        PARAMETER_ID,
        PARAMETER_VALUE,
        PARAM_VALUE_FILE_REF,
        UOM_ID)
  VALUES (
        18061,
        9801,
        8805,
        .99993602,
        NULL,
        9201);
 
INSERT INTO SDO_COORD_OP_PARAM_VALS (
        COORD_OP_ID,
        COORD_OP_METHOD_ID,
        PARAMETER_ID,
        PARAMETER_VALUE,
        PARAM_VALUE_FILE_REF,
        UOM_ID)
  VALUES (
        18061,
        9801,
        8806,
        500000,
        NULL,
        9001);
 
INSERT INTO SDO_COORD_OP_PARAM_VALS (
        COORD_OP_ID,
        COORD_OP_METHOD_ID,
        PARAMETER_ID,
        PARAMETER_VALUE,
        PARAM_VALUE_FILE_REF,
        UOM_ID)
  VALUES (
        18061,
        9801,
        8807,
        280296.016,
        NULL,
        9001);
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-1C9F778B-DFCC-4944-A298-BCB70EDD747A__CIHEJBDI">
<p class="titleinexample">Example 6-10 Creating a User-Defined Projected CRS: Extended Example</p>
<pre dir="ltr">-- Create an EPSG equivalent for the following CRS:
--
-- CS_NAME:    VDOT_LAMBERT
-- SRID:       51000000
-- AUTH_SRID:  51000000
-- AUTH_NAME:  VDOT Custom Lambert Conformal Conic
-- WKTEXT:
--
-- PROJCS[
--   &#34;VDOT_Lambert&#34;,
--   GEOGCS[
--     &#34;GCS_North_American_1983&#34;,
--     DATUM[
--       &#34;D_North_American_1983&#34;,
--       SPHEROID[&#34;GRS_1980&#34;, 6378137.0, 298.257222101]],
--     PRIMEM[&#34;Greenwich&#34;, 0.0],
--     UNIT[&#34;Decimal Degree&#34;,0.0174532925199433]],
--   PROJECTION[&#34;Lambert_Conformal_Conic&#34;],
--   PARAMETER[&#34;False_Easting&#34;, 0.0],
--   PARAMETER[&#34;False_Northing&#34;, 0.0],
--   PARAMETER[&#34;Central_Meridian&#34;, -79.5],
--   PARAMETER[&#34;Standard_Parallel_1&#34;, 37.0],
--   PARAMETER[&#34;Standard_Parallel_2&#34;, 39.5],
--   PARAMETER[&#34;Scale_Factor&#34;, 1.0],
--   PARAMETER[&#34;Latitude_Of_Origin&#34;, 36.0],
--   UNIT[&#34;Meter&#34;, 1.0]]
 
-- First, the base geographic CRS (GCS_North_American_1983) already exists in EPSG.
-- It is 4269:
-- Next, find the EPSG equivalent for PROJECTION[&#34;Lambert_Conformal_Conic&#34;]:
select
  coord_op_method_id,
  legacy_name
from
  sdo_coord_op_methods
where
  not legacy_name is null
order by
  coord_op_method_id;
 
-- Result:
-- COORD_OP_METHOD_ID LEGACY_NAME
-- ------------------ --------------------------------------------------
--               9802 Lambert Conformal Conic
--               9803 Lambert Conformal Conic (Belgium 1972)
--               9805 Mercator
--               9806 Cassini
--               9807 Transverse Mercator
--               9829 Polar Stereographic
-- 
-- 6 rows selected.
--
-- It is EPSG method 9802. Create a projection operation 510000001, based on it:
 
insert into MDSYS.SDO_COORD_OPS (
        COORD_OP_ID,
        COORD_OP_NAME,
        COORD_OP_TYPE,
        SOURCE_SRID,
        TARGET_SRID,
        COORD_TFM_VERSION,
        COORD_OP_VARIANT,
        COORD_OP_METHOD_ID,
        UOM_ID_SOURCE_OFFSETS,
        UOM_ID_TARGET_OFFSETS,
        INFORMATION_SOURCE,
        DATA_SOURCE,
        SHOW_OPERATION,
        IS_LEGACY,
        LEGACY_CODE,
        REVERSE_OP,
        IS_IMPLEMENTED_FORWARD,
        IS_IMPLEMENTED_REVERSE)
VALUES (
        510000001,
        &#39;VDOT_Lambert&#39;,
        &#39;CONVERSION&#39;,
        NULL,
        NULL,
        NULL,
        NULL,
        9802,
        NULL,
        NULL,
        NULL,
        NULL,
        1,
        &#39;FALSE&#39;,
        NULL,
        1,
        1,
        1);
 
-- Now, set the parameters. See which are required:
 
select
  use.parameter_id || &#39;: &#39; ||
  use.legacy_param_name
from
  sdo_coord_op_param_use use
where
  use.coord_op_method_id = 9802;
 
-- result:
-- 8821: Latitude_Of_Origin
-- 8822: Central_Meridian
-- 8823: Standard_Parallel_1
-- 8824: Standard_Parallel_2
-- 8826: False_Easting
-- 8827: False_Northing
--
-- 6 rows selected.
 
-- Also check the most common units we will need:
 
select
  UOM_ID || &#39;: &#39; ||
  UNIT_OF_MEAS_NAME
from
  sdo_units_of_measure
where
  uom_id in (9001, 9101, 9102, 9201)
order by
  uom_id;
 
-- result:
-- 9001: metre
-- 9101: radian
-- 9102: degree
-- 9201: unity
 
-- Now, configure the projection parameters:
 
-- 8821: Latitude_Of_Origin
 
    insert into MDSYS.SDO_COORD_OP_PARAM_VALS (
        COORD_OP_ID,
        COORD_OP_METHOD_ID,
        PARAMETER_ID,
        PARAMETER_VALUE,
        PARAM_VALUE_FILE_REF,
        UOM_ID)
      VALUES (
        510000001,
        9802,
        8821,
        36.0,
        NULL,
        9102);
 
-- 8822: Central_Meridian
 
    insert into MDSYS.SDO_COORD_OP_PARAM_VALS (
        COORD_OP_ID,
        COORD_OP_METHOD_ID,
        PARAMETER_ID,
        PARAMETER_VALUE,
        PARAM_VALUE_FILE_REF,
        UOM_ID)
      VALUES (
        510000001,
        9802,
        8822,
        -79.5,
        NULL,
        9102);
 
-- 8823: Standard_Parallel_1
 
    insert into MDSYS.SDO_COORD_OP_PARAM_VALS (
        COORD_OP_ID,
        COORD_OP_METHOD_ID,
        PARAMETER_ID,
        PARAMETER_VALUE,
        PARAM_VALUE_FILE_REF,
        UOM_ID)
      VALUES (
        510000001,
        9802,
        8823,
        37.0,
        NULL,
        9102);
 
-- 8824: Standard_Parallel_2
 
    insert into MDSYS.SDO_COORD_OP_PARAM_VALS (
        COORD_OP_ID,
        COORD_OP_METHOD_ID,
        PARAMETER_ID,
        PARAMETER_VALUE,
        PARAM_VALUE_FILE_REF,
        UOM_ID)
      VALUES (
        510000001,
        9802,
        8824,
        39.5,
        NULL,
        9102);
 
-- 8826: False_Easting
 
    insert into MDSYS.SDO_COORD_OP_PARAM_VALS (
        COORD_OP_ID,
        COORD_OP_METHOD_ID,
        PARAMETER_ID,
        PARAMETER_VALUE,
        PARAM_VALUE_FILE_REF,
        UOM_ID)
      VALUES (
        510000001,
        9802,
        8826,
        0.0,
        NULL,
        9001);
 
-- 8827: False_Northing
 
    insert into MDSYS.SDO_COORD_OP_PARAM_VALS (
        COORD_OP_ID,
        COORD_OP_METHOD_ID,
        PARAMETER_ID,
        PARAMETER_VALUE,
        PARAM_VALUE_FILE_REF,
        UOM_ID)
      VALUES (
        510000001,
        9802,
        8827,
        0.0,
        NULL,
        9001);
 
-- Now, create the actual projected CRS.Look at the GEOG_CRS_DATUM_ID 
-- and COORD_SYS_ID first. The GEOG_CRS_DATUM_ID is the datum of 
-- the base geog_crs (4269):
 
select datum_id from sdo_coord_ref_sys where srid = 4269;
 
--   DATUM_ID
-- ----------
--       6269
 
-- And the COORD_SYS_ID is the Cartesian CS used for the projected CRS.
-- We can use 4400, if meters will be the unit:
 
select COORD_SYS_NAME from sdo_coord_sys where COORD_SYS_ID = 4400;
 
-- Cartesian 2D CS. Axes: easting, northing (E,N). Orientations: east, north.
-- UoM: m.
 
-- Now create the projected CRS:
 
insert into MDSYS.SDO_COORD_REF_SYSTEM (
        SRID,
        COORD_REF_SYS_NAME,
        COORD_REF_SYS_KIND,
        COORD_SYS_ID,
        DATUM_ID,
        SOURCE_GEOG_SRID,
        PROJECTION_CONV_ID,
        CMPD_HORIZ_SRID,
        CMPD_VERT_SRID,
        INFORMATION_SOURCE,
        DATA_SOURCE,
        IS_LEGACY,
        LEGACY_CODE,
        LEGACY_WKTEXT,
        LEGACY_CS_BOUNDS,
        GEOG_CRS_DATUM_ID)
VALUES (
        51000000,
        &#39;VDOT_LAMBERT&#39;,
        &#39;PROJECTED&#39;,
        4400,
        NULL,
        4269,
        510000001,
        NULL,
        NULL,
        NULL,
        NULL,
        &#39;FALSE&#39;,
        NULL,
        NULL,
        NULL,
        6269);
 
-- To see the result:
 
select srid, wktext from cs_srs where srid = 51000000;
 
--  51000000
-- PROJCS[
--   &#34;VDOT_LAMBERT&#34;,
--   GEOGCS [
--     &#34;NAD83&#34;,
--     DATUM [
--       &#34;North American Datum 1983 (EPSG ID 6269)&#34;,
--       SPHEROID [
--         &#34;GRS 1980 (EPSG ID 7019)&#34;,
--         6378137,
--         298.257222101]],
--     PRIMEM [ &#34;Greenwich&#34;, 0.000000 ],
--     UNIT [&#34;Decimal Degree&#34;, 0.01745329251994328]],
--   PROJECTION [&#34;VDOT_Lambert&#34;],
--   PARAMETER [&#34;Latitude_Of_Origin&#34;, 36],
--   PARAMETER [&#34;Central_Meridian&#34;, -79.50000000000000000000000000000000000028],
--   PARAMETER [&#34;Standard_Parallel_1&#34;, 37],
--   PARAMETER [&#34;Standard_Parallel_2&#34;, 39.5],
--   PARAMETER [&#34;False_Easting&#34;, 0],
--   PARAMETER [&#34;False_Northing&#34;, 0],
--   UNIT [&#34;Meter&#34;, 1]]
</pre></div>
<!-- class="example" -->
<div class="section">
<p><a href="creating-user-defined-coordinate-reference-system.htm#GUID-1C9F778B-DFCC-4944-A298-BCB70EDD747A__CIHEJBDI">Example 6-10</a> provides an extended, annotated example of creating a user-defined projected coordinate system</p>
</div>
<!-- class="section" --></div>
</div>
<a id="SPATL722"></a><a id="SPATL721"></a>
<div class="props_rev_3"><a id="GUID-2B6A194E-093B-4CFD-828E-1A981AF42729"></a>
<h2 id="SPATL-GUID-2B6A194E-093B-4CFD-828E-1A981AF42729" class="sect2"><span class="enumeration_section">6.9.3</span> Creating a Vertical CRS</h2>
<div>
<div class="section">
<p>A vertical CRS has only one dimension, usually height. On its own, a vertical CRS is of little use, but it can be combined with a two-dimensional CRS (geodetic or projected), to result in a compound CRS. <a href="creating-user-defined-coordinate-reference-system.htm#GUID-2B6A194E-093B-4CFD-828E-1A981AF42729__CIHBIBCC">Example 6-11</a> shows the statement that created the vertical CRS with SRID 5701, which is included with Spatial and Graph. This definition refers to an existing (one-dimensional) coordinate system (ID 6499; see <a href="coordinate-systems-data-structures.htm#GUID-F771FF62-812E-483F-95BA-D529C2A0BA42">SDO_COORD_SYS Table</a>) and vertical datum (ID 5101; see <a href="coordinate-systems-data-structures.htm#GUID-5E5F3810-61EC-4BC7-B985-12D139D87D10">SDO_DATUMS Table</a>).</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-2B6A194E-093B-4CFD-828E-1A981AF42729__CIHBIBCC">
<p class="titleinexample">Example 6-11 Creating a Vertical Coordinate Reference System</p>
<pre dir="ltr">INSERT INTO MDSYS.SDO_COORD_REF_SYSTEM (
    SRID,
    COORD_REF_SYS_NAME,
    <span class="bold">COORD_REF_SYS_KIND</span>,
    <span class="bold">COORD_SYS_ID</span>,
    <span class="bold">DATUM_ID</span>,
    SOURCE_GEOG_SRID,
    PROJECTION_CONV_ID,
    CMPD_HORIZ_SRID,
    CMPD_VERT_SRID,
    INFORMATION_SOURCE,
    DATA_SOURCE,
    IS_LEGACY,
    LEGACY_CODE,
    LEGACY_WKTEXT,
    LEGACY_CS_BOUNDS)
  VALUES (
    5701,
    &#39;Newlyn&#39;,
    <span class="bold">&#39;VERTICAL&#39;</span>,
    <span class="bold">6499</span>,
    <span class="bold">5101</span>,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    &#39;EPSG&#39;,
    &#39;FALSE&#39;,
    NULL,
    NULL,
    NULL);
</pre>
<p>A vertical CRS might define some undulating equipotential surface. The shape of that surface, and its offset from some ellipsoid, is not actually defined in the vertical CRS record itself (other than textually). Instead, that definition is included in an operation between the vertical CRS and another CRS. Consequently, you can define several alternative operations between the same pair of geoidal and WGS 84-ellipsoidal heights. For example, there are geoid offset matrixes GEOID90, GEOID93, GEOID96, GEOID99, GEOID03, GEOID06, and others, and for each of these variants there can be a separate operation. <a href="creating-user-defined-coordinate-reference-system.htm#GUID-848F5AB1-59D4-4F5D-B09C-7CC5BCD92F01">Creating a Transformation Operation</a> describes such an operation.</p>
</div>
<!-- class="example" --></div>
</div>
<a id="SPATL724"></a><a id="SPATL723"></a>
<div class="props_rev_3"><a id="GUID-738A0960-F73F-41F4-A0B3-234B6884B331"></a>
<h2 id="SPATL-GUID-738A0960-F73F-41F4-A0B3-234B6884B331" class="sect2"><span class="enumeration_section">6.9.4</span> Creating a Compound CRS</h2>
<div>
<div class="section">
<p>A compound CRS combines an existing horizontal (two-dimensional) CRS and a vertical (one-dimensional) CRS. The horizontal CRS can be geodetic or projected. <a href="creating-user-defined-coordinate-reference-system.htm#GUID-738A0960-F73F-41F4-A0B3-234B6884B331__CIHFACDA">Example 6-12</a> shows the statement that created the compound CRS with SRID 7405, which is included with Spatial and Graph. This definition refers to an existing projected CRS and vertical CRS (IDs 27700 and 5701, respectively; see <a href="coordinate-systems-data-structures.htm#GUID-951C650B-5966-408C-B5E9-28142C43C141">SDO_COORD_REF_SYS Table</a>).</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-738A0960-F73F-41F4-A0B3-234B6884B331__CIHFACDA">
<p class="titleinexample">Example 6-12 Creating a Compound Coordinate Reference System</p>
<pre dir="ltr">INSERT INTO MDSYS.SDO_COORD_REF_SYSTEM (
    SRID,
    COORD_REF_SYS_NAME,
    <span class="bold">COORD_REF_SYS_KIND</span>,
    COORD_SYS_ID,
    DATUM_ID,
    SOURCE_GEOG_SRID,
    PROJECTION_CONV_ID,
    <span class="bold">CMPD_HORIZ_SRID</span>,
    <span class="bold">CMPD_VERT_SRID</span>,
    INFORMATION_SOURCE,
    DATA_SOURCE,
    IS_LEGACY,
    LEGACY_CODE,
    LEGACY_WKTEXT,
    LEGACY_CS_BOUNDS)
  VALUES (
    7405,
    &#39;OSGB36 / British National Grid + ODN&#39;,
    <span class="bold">&#39;COMPOUND&#39;</span>,
    NULL,
    NULL,
    NULL,
    NULL,
    <span class="bold">27700</span>,
    <span class="bold">5701</span>,
    NULL,
    &#39;EPSG&#39;,
    &#39;FALSE&#39;,
    NULL,
    NULL,
    NULL);
</pre></div>
<!-- class="example" --></div>
</div>
<a id="SPATL726"></a><a id="SPATL725"></a>
<div class="props_rev_3"><a id="GUID-351A9367-7A91-4EB4-9232-E5D216546FB1"></a>
<h2 id="SPATL-GUID-351A9367-7A91-4EB4-9232-E5D216546FB1" class="sect2"><span class="enumeration_section">6.9.5</span> Creating a Geographic 3D CRS</h2>
<div>
<div class="section">
<p>A geographic 3D CRS is the combination of a geographic 2D CRS with ellipsoidal height. <a href="creating-user-defined-coordinate-reference-system.htm#GUID-351A9367-7A91-4EB4-9232-E5D216546FB1__CIHHFEJB">Example 6-13</a> shows the statement that created the geographic 3D CRS with SRID 4327, which is included with Spatial and Graph. This definition refers to an existing projected coordinate system (ID 6401; see <a href="coordinate-systems-data-structures.htm#GUID-F771FF62-812E-483F-95BA-D529C2A0BA42">SDO_COORD_SYS Table</a>) and datum (ID 6326; see <a href="coordinate-systems-data-structures.htm#GUID-5E5F3810-61EC-4BC7-B985-12D139D87D10">SDO_DATUMS Table</a>).</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-351A9367-7A91-4EB4-9232-E5D216546FB1__CIHHFEJB">
<p class="titleinexample">Example 6-13 Creating a Geographic 3D Coordinate Reference System</p>
<pre dir="ltr">INSERT INTO MDSYS.SDO_COORD_REF_SYSTEM (
   SRID,
   COORD_REF_SYS_NAME,
   <span class="bold">COORD_REF_SYS_KIND</span>,
   <span class="bold">COORD_SYS_ID</span>,
   <span class="bold">DATUM_ID</span>,
   <span class="bold">GEOG_CRS_DATUM_ID</span>,
   SOURCE_GEOG_SRID,
   PROJECTION_CONV_ID,
   CMPD_HORIZ_SRID,
   CMPD_VERT_SRID,
   INFORMATION_SOURCE,
   DATA_SOURCE,
   IS_LEGACY,
   LEGACY_CODE,
   LEGACY_WKTEXT,
   LEGACY_CS_BOUNDS,
   IS_VALID,
   SUPPORTS_SDO_GEOMETRY)
 VALUES (
   4327,
   &#39;WGS 84 (geographic 3D)&#39;,
   <span class="bold">&#39;GEOGRAPHIC3D&#39;</span>,
   <span class="bold">6401</span>,
   <span class="bold">6326</span>,
   <span class="bold">6326</span>,
   NULL,
   NULL,
   NULL,
   NULL,
   &#39;NIMA TR8350.2 January 2000 revision. http://164.214.2.59/GandG/tr8350_2.html&#39;,
   &#39;EPSG&#39;,
   &#39;FALSE&#39;,
   NULL,
   NULL,
   NULL,
   &#39;TRUE&#39;,
   &#39;TRUE&#39;);
</pre></div>
<!-- class="example" --></div>
</div>
<a id="SPATL728"></a><a id="SPATL729"></a><a id="SPATL727"></a>
<div class="props_rev_3"><a id="GUID-848F5AB1-59D4-4F5D-B09C-7CC5BCD92F01"></a>
<h2 id="SPATL-GUID-848F5AB1-59D4-4F5D-B09C-7CC5BCD92F01" class="sect2"><span class="enumeration_section">6.9.6</span> Creating a Transformation Operation</h2>
<div>
<div class="section">
<p><a href="creating-user-defined-coordinate-reference-system.htm#GUID-1C9F778B-DFCC-4944-A298-BCB70EDD747A">Creating a Projected CRS</a> described the creation of a projection operation, for the purpose of then creating a projected CRS. A similar requirement can arise when using a compound CRS based on orthometric height: you may want to transform from and to ellipsoidal height. The offset between the two heights is undulating and irregular.</p>
<p>By default, Spatial and Graph transforms between ellipsoidal and orthometric height using an identity transformation. (Between different ellipsoids, the default would instead be a datum transformation.) The identity transformation is a reasonable approximation; however, a more accurate approach involves an EPSG type 9635 operation, involving an offset matrix. <a href="creating-user-defined-coordinate-reference-system.htm#GUID-848F5AB1-59D4-4F5D-B09C-7CC5BCD92F01__CIHBCHJE">Example 6-14</a> is a declaration of such an operation:</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-848F5AB1-59D4-4F5D-B09C-7CC5BCD92F01__CIHBCHJE">
<p class="titleinexample">Example 6-14 Creating a Transformation Operation</p>
<pre dir="ltr">INSERT INTO MDSYS.SDO_COORD_OPS (
   COORD_OP_ID,
   COORD_OP_NAME,
   <span class="bold">COORD_OP_TYPE</span>,
   SOURCE_SRID,
   TARGET_SRID,
   COORD_TFM_VERSION,
   COORD_OP_VARIANT,
   COORD_OP_METHOD_ID,
   UOM_ID_SOURCE_OFFSETS,
   UOM_ID_TARGET_OFFSETS,
   INFORMATION_SOURCE,
   DATA_SOURCE,
   SHOW_OPERATION,
   IS_LEGACY,
   LEGACY_CODE,
   REVERSE_OP,
   IS_IMPLEMENTED_FORWARD,
   IS_IMPLEMENTED_REVERSE)
 VALUES (
   999998,
   &#39;Test operation, based on GEOID03 model, using Hawaii grid&#39;,
   <span class="bold">&#39;TRANSFORMATION&#39;</span>,
   NULL,
   NULL,
   NULL,
   NULL,
   9635,
   NULL,
   NULL,
   &#39;NGS&#39;,
   &#39;NGS&#39;,
   1,
   &#39;FALSE&#39;,
   NULL,
   1,
   1,
   1);
 
INSERT INTO MDSYS.SDO_COORD_OP_PARAM_VALS (
   COORD_OP_ID,
   <span class="bold">COORD_OP_METHOD_ID</span>,
   PARAMETER_ID,
   PARAMETER_VALUE,
   <span class="bold">PARAM_VALUE_FILE_REF</span>,
   UOM_ID)
 VALUES (
   999998,
   <span class="bold">9635</span>,
   8666,
   NULL,
   <span class="bold">&#39;g2003h01.asc&#39;</span>,
   NULL);
</pre>
<p>The second INSERT statement in <a href="creating-user-defined-coordinate-reference-system.htm#GUID-848F5AB1-59D4-4F5D-B09C-7CC5BCD92F01__CIHBCHJE">Example 6-14</a> specifies the file name <code>g2003h01.asc</code>, but not yet its actual CLOB content with the offset matrix. As with NADCON and NTv2 matrixes, geoid matrixes have to be loaded into the PARAM_VALUE_FILE column. Due to space and copyright considerations, Oracle does not supply most of these matrixes; however, they are usually available for download on the Web. Good sources are the relevant government websites, and you can search by file name (such as <code>g2003h01</code> in this example). Although some of these files are available in both binary format (such as .gsb) and ASCII format (such as .gsa or .asc), only the ASCII variant can be used with Spatial and Graph. The existing EPSG operations include file names in standard use.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-848F5AB1-59D4-4F5D-B09C-7CC5BCD92F01__CIHBHFCJ">
<p class="titleinexample">Example 6-15 Loading Offset Matrixes</p>
<pre dir="ltr">DECLARE
  ORCL_HOME_DIR VARCHAR2(128);
  ORCL_WORK_DIR VARCHAR2(128);
  Src_loc       BFILE;
  Dest_loc      CLOB;
  CURSOR PARAM_FILES IS
    SELECT
      COORD_OP_ID,
      PARAMETER_ID,
      PARAM_VALUE_FILE_REF
    FROM
      MDSYS.SDO_COORD_OP_PARAM_VALS
    WHERE
      PARAMETER_ID IN (8656, 8657, 8658, 8666);
  PARAM_FILE PARAM_FILES%ROWTYPE;
  ACTUAL_FILE_NAME VARCHAR2(128);
  platform NUMBER;
BEGIN
  EXECUTE IMMEDIATE &#39;CREATE OR REPLACE DIRECTORY work_dir AS &#39;&#39;define_your_source_directory_here&#39;&#39;&#39;;
 
  FOR PARAM_FILE IN PARAM_FILES LOOP
    CASE UPPER(PARAM_FILE.PARAM_VALUE_FILE_REF)
      /* NTv2, fill in your files here */
      WHEN &#39;NTV2_0.GSB&#39;   THEN ACTUAL_FILE_NAME := &#39;ntv20.gsa&#39;;
      /* GEOID03, fill in your files here */
      WHEN &#39;G2003H01.ASC&#39; THEN ACTUAL_FILE_NAME := &#39;g2003h01.asc&#39;;
      ELSE                     ACTUAL_FILE_NAME := NULL;
    END CASE;
 
    IF(NOT (ACTUAL_FILE_NAME IS NULL)) THEN
      BEGIN
        dbms_output.put_line(&#39;Loading file &#39; || actual_file_name || &#39;...&#39;);
        Src_loc := BFILENAME(&#39;WORK_DIR&#39;, ACTUAL_FILE_NAME);
        DBMS_LOB.OPEN(Src_loc, DBMS_LOB.LOB_READONLY);
      END;
 
      UPDATE
        MDSYS.SDO_COORD_OP_PARAM_VALS
      SET
        PARAM_VALUE_FILE = EMPTY_CLOB()
      WHERE
        COORD_OP_ID = PARAM_FILE.COORD_OP_ID AND
        PARAMETER_ID = PARAM_FILE.PARAMETER_ID
      RETURNING
        PARAM_VALUE_FILE INTO Dest_loc;
 
      DBMS_LOB.OPEN(Dest_loc, DBMS_LOB.LOB_READWRITE);
      DBMS_LOB.LOADFROMFILE(Dest_loc, Src_loc, DBMS_LOB.LOBMAXSIZE);
      DBMS_LOB.CLOSE(Dest_loc);
      DBMS_LOB.CLOSE(Src_loc);
      DBMS_LOB.FILECLOSE(Src_loc);
    END IF;
  END LOOP;
END;
/
</pre>
<p><a href="creating-user-defined-coordinate-reference-system.htm#GUID-848F5AB1-59D4-4F5D-B09C-7CC5BCD92F01__CIHBHFCJ">Example 6-15</a> is a script for loading a set of such matrixes. It loads specified physical files (such as <code>ntv20.gsa</code>) into database CLOBs, based on the official file name reference (such as <code>NTV2_0.GSB</code>).</p>
</div>
<!-- class="example" --></div>
</div>
<a id="SPATL1456"></a><a id="SPATL1455"></a>
<div class="props_rev_3"><a id="GUID-6B52AF05-245E-44B5-9BAE-21323C847A44"></a>
<h2 id="SPATL-GUID-6B52AF05-245E-44B5-9BAE-21323C847A44" class="sect2"><span class="enumeration_section">6.9.7</span> Using British Grid Transformation OSTN02/OSGM02 (EPSG Method 9633)</h2>
<div>
<div class="section">
<p>To use British Grid Transformation OSTN02/OSGM02 (EPSG method 9633) in a projected coordinate reference system, you must first insert a modified version of the <code>OSTN02_OSGM02_GB.txt</code> grid file into the PARAM_VALUE_FILE column (type CLOB) of the SDO_COORD_OP_PARAM_VALS table (described in <a href="coordinate-systems-data-structures.htm#GUID-BDDC4BDE-AC1C-49CF-83FB-5A84FD36FBC1">SDO_COORD_OP_PARAM_VALS Table</a>). The <code>OSTN02_OSGM02_GB.txt</code> file contains the offset matrix on which EPSG transformation method 9633 is based.</p>
<p>Follow these steps:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Download the following file: <a href="http://www.ordnancesurvey.co.uk/docs/gps/ostn02-osgm02-files.zip" target="_blank"><code>http://www.ordnancesurvey.co.uk/docs/gps/ostn02-osgm02-files.zip</code></a></span></li>
<li class="stepexpand"><span>From this .zip file, extract the following file: <code>OSTN02_OSGM02_GB.txt</code></span></li>
<li class="stepexpand"><span>Edit your copy of <code>OSTN02_OSGM02_GB.txt</code>, and insert the following lines before the first line of the current file:</span>
<div>
<pre dir="ltr">SDO Header
x: 0.0 - 700000.0
y: 0.0 - 1250000.0
x-intervals: 1000.0
y-intervals: 1000.0
End of SDO Header
</pre>
<p>The is, after the editing operation, the contents of the file will look like this:</p>
<pre dir="ltr">SDO Header
x: 0.0 - 700000.0
y: 0.0 - 1250000.0
x-intervals: 1000.0
y-intervals: 1000.0
End of SDO Header
1,0,0,0.000,0.000,0.000,0
2,1000,0,0.000,0.000,0.000,0
3,2000,0,0.000,0.000,0.000,0
4,3000,0,0.000,0.000,0.000,0
5,4000,0,0.000,0.000,0.000,0
. . .
876949,698000,1250000,0.000,0.000,0.000,0
876950,699000,1250000,0.000,0.000,0.000,0
876951,700000,1250000,0.000,0.000,0.000,0
</pre></div>
</li>
<li class="stepexpand"><span>Save the edited file, perhaps using a different name (for example, <code>my_OSTN02_OSGM02_GB.txt</code>).</span></li>
<li class="stepexpand"><span>In the SDO_COORD_OP_PARAM_VALS table, for each operation of EPSG method 9633 that has PARAM_VALUE_FILE_REF value <code>OSTN02_OSGM02_GB.TXT</code>, update the PARAM_VALUE_FILE column to be the contents of the saved file (for example, the contents of <code>my_OSTN02_OSGM02_GB.txt</code>). You can use coding similar to that in <a href="creating-user-defined-coordinate-reference-system.htm#GUID-6B52AF05-245E-44B5-9BAE-21323C847A44__CHDJHAJJ">Example 6-16</a>.</span></li>
</ol>
<div class="example" id="GUID-6B52AF05-245E-44B5-9BAE-21323C847A44__CHDJHAJJ">
<p class="titleinexample">Example 6-16 Using British Grid Transformation OSTN02/OSGM02 (EPSG Method 9633)</p>
<pre dir="ltr">DECLARE
  ORCL_HOME_DIR VARCHAR2(128);
  ORCL_WORK_DIR VARCHAR2(128);
  Src_loc       BFILE;
  Dest_loc      CLOB;
  CURSOR PARAM_FILES IS
    SELECT
      COORD_OP_ID,
      PARAMETER_ID,
      PARAM_VALUE_FILE_REF
    FROM
      MDSYS.SDO_COORD_OP_PARAM_VALS
    WHERE
      PARAMETER_ID IN (8656, 8657, 8658, <span class="bold">8664</span>, 8666)
    order by
      COORD_OP_ID,
      PARAMETER_ID;
  PARAM_FILE PARAM_FILES%ROWTYPE;
  ACTUAL_FILE_NAME VARCHAR2(128);
  platform NUMBER;
BEGIN
  EXECUTE IMMEDIATE &#39;CREATE OR REPLACE DIRECTORY work_dir AS &#39;&#39;&#39; || system.geor_dir || &#39;&#39;&#39;&#39;;
 
  FOR PARAM_FILE IN PARAM_FILES LOOP
    CASE UPPER(PARAM_FILE.PARAM_VALUE_FILE_REF)
      /* NTv2 */
      WHEN &#39;NTV2_0.GSB&#39;   THEN ACTUAL_FILE_NAME := &#39;ntv20.gsa&#39;;
      /* GEOID03 */
      WHEN &#39;G2003H01.ASC&#39; THEN ACTUAL_FILE_NAME := &#39;g2003h01.asc&#39;;
     <span class="bold"> /* British Ordnance Survey (9633) */</span>
      <span class="bold">WHEN &#39;OSTN02_OSGM02_GB.TXT&#39;</span>
                          <span class="bold">THEN ACTUAL_FILE_NAME := &#39;my_OSTN02_OSGM02_GB.txt&#39;;</span>
      ELSE                ACTUAL_FILE_NAME := NULL;
    END CASE;
 
    IF(NOT (ACTUAL_FILE_NAME IS NULL)) THEN
      BEGIN
        dbms_output.put_line(&#39;Loading file &#39; || actual_file_name || &#39;...&#39;);
        Src_loc := BFILENAME(&#39;WORK_DIR&#39;, ACTUAL_FILE_NAME);
        DBMS_LOB.OPEN(Src_loc, DBMS_LOB.LOB_READONLY);
      END;
 
      UPDATE
        MDSYS.SDO_COORD_OP_PARAM_VALS
      SET
        PARAM_VALUE_FILE = EMPTY_CLOB()
      WHERE
        COORD_OP_ID = PARAM_FILE.COORD_OP_ID AND
        PARAMETER_ID = PARAM_FILE.PARAMETER_ID
      RETURNING
        PARAM_VALUE_FILE INTO Dest_loc;
 
      DBMS_LOB.OPEN(Dest_loc, DBMS_LOB.LOB_READWRITE);
      DBMS_LOB.LOADFROMFILE(Dest_loc, Src_loc, DBMS_LOB.LOBMAXSIZE);
      DBMS_LOB.CLOSE(Dest_loc);
      DBMS_LOB.CLOSE(Src_loc);
      DBMS_LOB.FILECLOSE(Src_loc);
    END IF;
  END LOOP;
END;
/
</pre></div>
<!-- class="example" -->
<div class="section">
<p>Note that adding &#34;header&#34; information to a grid file is required only for British Grid Transformation OSTN02/OSGM02. It is not required for NADCON, NTv2, or VERTCON matrixes, because they already have headers of varying formats.</p>
<p>See also the following for related information:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="creating-user-defined-coordinate-reference-system.htm#GUID-1C9F778B-DFCC-4944-A298-BCB70EDD747A">Creating a Projected CRS</a></p>
</li>
<li>
<p><a href="creating-user-defined-coordinate-reference-system.htm#GUID-848F5AB1-59D4-4F5D-B09C-7CC5BCD92F01">Creating a Transformation Operation</a></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment142">
<tr>
<td class="cellalignment149">
<table class="cellalignment147">
<tr>
<td class="cellalignment146"><a href="legacy-tables-and-views.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment146"><a href="notes-and-restrictions-coordinate-systems-support.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment151">
<table class="cellalignment145">
<tr>
<td class="cellalignment146"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment146"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment146"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment146"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment146"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment146"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>