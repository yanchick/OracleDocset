<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-100785"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/NURBS%20Curve%20Support%20in%20Oracle%20Spatial%20and%20Graph"></a><title>NURBS Curve Support in Oracle Spatial and Graph</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="NURBS curves, support in Oracle Spatial, non-uniform rational B-spline (NURBS) curves"/>
<meta name="dcterms.created" content="2017-01-26T11:46:57Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Spatial and Graph Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49172-07"/>
<meta name="dcterms.isVersionOf" content="SPATL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="geocoding.htm" title="Previous" type="text/html"/>
<link rel="Next" href="spatial-and-graph-java-application-programming-interface.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49172-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-03E5061C-190F-4465-857C-2344FEAF9814"></a> <span id="PAGE" style="display:none;">26/475</span> <!-- End Header -->
<a id="SPATL1447"></a>
<h1 id="SPATL-GUID-03E5061C-190F-4465-857C-2344FEAF9814" class="sect1"><span class="enumeration_section">1.13</span> NURBS Curve Support in Oracle Spatial and Graph</h1>
<div>
<p>Spatial and Graph supports non-uniform rational B-spline (NURBS) curve geometries. NURBS curves allow representation of free-form shapes with arbitrary shapes. NURBS representation allows control over the shape of the curve because control points and knots guide the shape of the curve, and they allow complex shapes to be represented with little data.</p>
<p>Support for NURBS curves in Spatial and Graph includes the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>WKT/WKB and GML functions for loading and storing of NURBS curve geometries in Oracle Spatial and Graph.</p>
</li>
<li>
<p>Validation of NURBS curve geometries.</p>
</li>
<li>
<p>Spatial indexing of NURBS curve geometries along with the SDO_FILTER, SDO_RELATE, and other operators. Spatial operators use an approximation of the curve for computation.</p>
</li>
</ul>
<p>A NURBS representation requires specification of the control points and the basis functions. The basis functions, in turn, are defined using the knot vector and the degree of the curve. The control points are used to determine the shape of the NURBS curve. The knot vector does not directly control the shape of the curve, but is used to control the exact placement of end points. The knot vector is also used to create curves with kinks and corners. Non-uniform knot vectors are used for manipulating the curve.</p>
<p>To represent a NURBS curve, the following data must be stored: the control points, the knot vector, and the degree of the curve. The set of control points can be represented in either the Euclidean form as <code>(x, y, z, w)</code> where <code>w</code> represents the weight of the control point or in the homogeneous form as <code>(wx, wy, wz, w)</code>. If <code>wi</code>=1 for all <code>i</code>, the curve is non-rational. The control points are specified in the weighted Euclidean form. Basis functions can be uniform or non-uniform based on the knot vector. A non-uniform knot vector is useful for placement of end points and creating kinks or corners. A normalized knot vector must be specified, that is, the first knot in the knot vector must be zero and the last knot in the knot vector must be one. It is also required that the knot vector is &#34;clamped&#34; at the end points. This requirement is enforced by ensuring that the first <code>d</code>+1 values in the knot vector are all zeros and the last <code>d</code>+1 values are all ones, where <code>d</code> represents the degree of the NURBS curve.</p>
<p>The implementation of NURBS curves in Oracle Spatial and Graph follows the SQL/MM standards. The SQL/MM standards for NURBS curves are used to represent splines, polynomial splines, cubic splines, B-splines, and Bezier curves. In Oracle Spatial and Graph, the SDO_GEOMETRY object type is used for NURBS representation. NURBS curves can be included in the Line, Multiline, and Collection type geometry objects. In these geometries, the simple line string and compound line string type elements can contain NURBS.</p>
<p>For compound line strings containing at least one NURBS segment, the last point of the previous segment is the same as the &#34;clamped&#34; first control point of a NURBS segment, and the last &#34;clamped&#34; control point of a NURBS segment is the same as the first point of the next segment. That is, the vertices will be repeated.</p>
<p>For geometry elements with element type value 2 representing a line string, the interpretation value of 3 is used to represent a NURBS curve; interpretation values of 1 and 2 represent linear segments and arcs. The SDO_ELEM_INFO_ARRAY for a NURBS curve is stored as (<span class="italic">offset</span>, 2, 3), which represents the offset, element type, and the interpretation value.</p>
<p>The SDO_ORDINATE_ARRAY stores the degree of the curve <code>d</code>, the set of <code>m</code> control points and a knot vector of size <code>n</code>. So, the ordinate array is stored as a sequence of values <code>(d, m, x1, y1, z1, w1&hellip;. xm, ym, zm, wm, n, k1&hellip;.kn)</code>. The control points are stored in the Euclidean form as specified in the SQL/MM standards. Note that for a NURBS curve the number of knots is equal to the sum of the degree, the number of control points, and 1. Therefore, <code>n=d+m+1</code>, an equation which is useful for validating NURBS curve geometries.</p>
<p>The following considerations apply to defining a NURBS curve:</p>
<ul style="list-style-type: disc;">
<li>
<p>The degree of the curve should be greater than 1, because a curve of degree 1 represents polylines.</p>
</li>
<li>
<p>The number of control points must be greater than or equal to 3, and must be greater than the degree.</p>
</li>
<li>
<p>The number of knots must be equal to the (number of control points + degree + 1).</p>
</li>
<li>
<p>The weight component of each control point must be positive.</p>
</li>
<li>
<p>Control points are represented in &#34;weighted Euclidean&#34; form <code>[wx, wy, (wz), w]</code>.</p>
</li>
<li>
<p>Knot values should be specified in non-decreasing order, and the knot vector must be a normalized knot vector <code>[0, .. &hellip;&hellip;, 1]</code>.</p>
</li>
<li>
<p>If <code>d</code> is the degree of the curve, there must be <code>d</code>+1 consecutive equal knots at the beginning of the curve (value 0) and <code>d</code>+1 consecutive equal knots at the end of the curve (value 1). This is to ensure that the curve is clamped at the end points.</p>
</li>
<li>
<p>If <code>d</code> is the degree of the curve, there must not be more than <code>d</code> consecutive equal knots except at the beginning or end of the curve where <code>d</code>+1 knots must be present.</p>
</li>
</ul>
<p>Be sure to validate geometries with NURBS segments before creating the spatial index or performing any spatial operations on them. (This recommendation applies to all geometry types, NURBS or otherwise.)</p>
<p>For examples that specify NURBS curve geometries, see <a href="nurbs-curve.htm">NURBS Curve</a>.</p>
<p>To get a line string geometry that is an approximation of an input NURBS curve geometry, use the <a href="sdo_util-getnurbsapprox.htm">SDO_UTIL.GETNURBSAPPROX</a> function.</p>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment142">
<tr>
<td class="cellalignment149">
<table class="cellalignment147">
<tr>
<td class="cellalignment146"><a href="geocoding.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment146"><a href="spatial-and-graph-java-application-programming-interface.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment151">
<table class="cellalignment145">
<tr>
<td class="cellalignment146"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment146"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment146"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment146"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment146"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment146"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>