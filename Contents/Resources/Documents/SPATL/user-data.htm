<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-101970"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/User%20Data"></a><title>User Data</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-01-26T11:46:57Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Spatial and Graph Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49172-07"/>
<meta name="dcterms.isVersionOf" content="SPATL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="routing-engine-data.htm" title="Previous" type="text/html"/>
<link rel="Next" href="other-functions-and-procedures.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49172-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-017D8448-E91E-409E-A13B-4517FCB36238"></a> <span id="PAGE" style="display:none;">472/475</span> <!-- End Header -->
<a id="SPATL1588"></a>
<h1 id="SPATL-GUID-017D8448-E91E-409E-A13B-4517FCB36238" class="sect1"><span class="enumeration_section">E.4</span> User Data</h1>
<div>
<p>User data models restrictions on the road network. Currently, there are two kinds of user data in the routing engine: restricted driving maneuvers (turn restrictions) and trucking user data.</p>
<p>User data is versioned. When user data is partitioned, the routing engine data version from the SDO_ROUTER_DATA_VERSION table is stored in the user data BLOBs. When user data is brought into the cache, the version stored in the user data partition must be compatible with the version in the SDO_ROUTER_DATA_VERSION table.</p>
<p>Partitioning user data is generally a very fast operation. It can be done as part of the partitioning the routing engine data or, if the routing engine data is already partitioned, as a standalone operation. In both cases the user data partitioning uses the partitioned routing engine data as a guide, substantially speeding up the partitioning operation.</p>
<p>The number of user data partitions is equal to or less than the number of routing engine data partitions. If there is no user data associated with a routing engine data partition, then no user data partition is produced. User data local partitions move into and out of the cache with their associated routing engine data partition. The user data highway partition is loaded at routing engine startup and remains resident in the cache.</p>
<p>In Release 12<span class="italic">c</span> the restricted driving maneuver user data is part of the routing engine ODF data shipped by data vendors. Trucking user data is not shipped with the routing engine ODF data and must be purchased separately. When a Release 12<span class="italic">c</span> or later routing engine starts, it detects and uses any available user data. All versions of the routing engine before Release 12<span class="italic">c</span> do not detect the user data and will only use routing engine data to compute the routes.</p>
<p>This section includes the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="user-data.htm#GUID-A5EA0363-6C36-4DB8-9574-562E78900740">Restricted Driving Maneuvers User Data</a></p>
</li>
<li>
<p><a href="user-data.htm#GUID-58FFF7B7-4C4E-4D92-925D-51D96D884879">CREATE_TURN_RESTRICTION_DATA Procedure</a></p>
</li>
<li>
<p><a href="user-data.htm#GUID-F24D3D65-C82E-4935-8BFF-2623AA249258">DUMP_TURN_RESTRICTION_DATA Procedure</a></p>
</li>
<li>
<p><a href="user-data.htm#GUID-3D1530B2-8621-48B6-9CB9-00666AE27724">CREATE_TRUCKING_DATA Procedure</a></p>
</li>
<li>
<p><a href="user-data.htm#GUID-8ACFD79A-11E7-4B63-ABDD-B5B8AB059732">DUMP_TRUCKING_DATA Procedure</a></p>
</li>
<li>
<p><a href="user-data.htm#GUID-B837EF74-6013-45E0-B599-4C6F306D898C">User Data Examples</a></p>
</li>
</ul>
</div>
<a id="SPATL1589"></a>
<div class="props_rev_3"><a id="GUID-A5EA0363-6C36-4DB8-9574-562E78900740"></a>
<h2 id="SPATL-GUID-A5EA0363-6C36-4DB8-9574-562E78900740" class="sect2"><span class="enumeration_section">E.4.1</span> Restricted Driving Maneuvers User Data</h2>
<div>
<p>A restricted driving maneuver can be as simple as not allowing movement from one edge to another, such as a simple turn restriction that does not allow a left turn. Or it might be a highly complex maneuver involving many edges, such as a no U-turn restriction on a road divided with a median where there is a start edge, an edge over the median, and the edge on the road going the other direction.</p>
<p>The routing engine uses three tables for restricted driving maneuvers. The first two tables, ROUTER_NAV_STRAND and ROUTER_CONDITION contain the raw data to build the restricted maneuvers user data.</p>
<p>The final table, ROUTER_TURN_RESTRICTION_DATA, contains the partitioned restricted maneuver user data stored in BLOB format. Partitioning the restricted maneuver data allows it to move in and out of the cache with the routing engine data of the same partition.</p>
<p>In Release 12<span class="italic">c</span> the restricted driving maneuver user data is part of the ODF data shipped by the data vendors. When a Release 12<span class="italic">c</span> routing engine starts, it detects and uses the turn restriction user data. If a Release 11<span class="italic">g</span>routing engine starts, it will not detect the user data and will only use routing engine data to compute the routes.</p>
<p>Because the restricted driving maneuver user data is part of the ODF data set, it is already partitioned. Generally, there is no reason to repartition this user data. However, if the routing engine data is repartitioned, the user data will also be repartitioned. It is also possible to repartition the turn restriction user data without having to repartition the routing engine data by re-creating the restricted driving maneuver user data.</p>
</div>
</div>
<a id="SPATL1590"></a>
<div class="props_rev_3"><a id="GUID-58FFF7B7-4C4E-4D92-925D-51D96D884879"></a>
<h2 id="SPATL-GUID-58FFF7B7-4C4E-4D92-925D-51D96D884879" class="sect2"><span class="enumeration_section">E.4.2</span> CREATE_TURN_RESTRICTION_DATA Procedure</h2>
<div>
<p>Syntax:</p>
<pre dir="ltr">SDO_ROUTER_PARTITION.CREATE_TURN_RESTRICTION_DATA(
    LOG_FILE_NAME IN VARCHAR2 := &#39;sdo_router_partition.log&#39;,
    CLEANUP       IN BOOLEAN DEFAULT TRUE);
</pre>
<p>The CREATE_TURN_RESTRICTION_DATA procedure must be run from a routing engine schema that contains the restricted driving maneuver raw data tables ROUTER_NAV_STRAND and ROUTER_CONDITION. This procedure partitions the restricted driving maneuver data and creates the ROUTER_TURN_RESTRICTION_DATA table containing the turn restriction user data in BLOB format. Turn restriction user data creation requires access to the data version so the SDO_ROUTER_DATA_VERSION table must exist in the routing engine schema.</p>
<p>The LOG_FILE_NAME parameter is the name of the log file written during turn restriction generation. This log file is created in the SDO_ROUTER_LOG_DIR directory. You can choose a log file name or use the default partitioning log file <code>sdo_router_partition.log</code>.</p>
<p>The CLEANUP parameter is used for debugging. By default, all of the intermediate tables created during turn restriction generation are cleaned up. If there is problem with turn restriction generation, leaving these tables in place can provide substantial debugging information.</p>
</div>
</div>
<a id="SPATL1591"></a>
<div class="props_rev_3"><a id="GUID-F24D3D65-C82E-4935-8BFF-2623AA249258"></a>
<h2 id="SPATL-GUID-F24D3D65-C82E-4935-8BFF-2623AA249258" class="sect2"><span class="enumeration_section">E.4.3</span> DUMP_TURN_RESTRICTION_DATA Procedure</h2>
<div>
<p>Syntax:</p>
<pre dir="ltr">SDO_ROUTER_PARTITION.DUMP_TURN_RESTRICTION_DATA(
    LOG_FILE_NAME IN VARCHAR2 := &#39;sdo_router_partition.log&#39;,
    START_PID     IN NUMBER DEFAULT 0,
    END_PID       IN NUMBER DEFAULT -1,
    DUMP_SOFT_RESTRICTIONS IN BOOLEAN DEFAULT FALSE);
</pre>
<p>The DUMP_TURN_RESTRICTION_DATA procedure dumps the contents of the turn restriction user data partition BLOBs. This procedure unpacks a BLOB, formats the data, and writes it to a log file. A single call to this procedure can dump a single partition or a contiguous range of partitions. This range is defined from START_PID to END_PID, inclusive. The default is to dump all partitions. A non-contiguous range of partitions cannot be dumped in a single call.</p>
<p>The LOG_FILE_NAME parameter specifies the name of the log file written when dumping turn restriction user data partitions. This log file is created in the SDO_ROUTER_LOG_DIR directory. You can choose a log file name or write to the default partitioning log file <code>sdo_router_partition.log</code>.</p>
<p>The START_PID parameter is the ID of the first partition to dump. The default START_PID is 0. The START_PID must be less than or equal to END_PID.</p>
<p>The END_PID parameter is the ID of the last partition to dump. The default END_PID is -1, which is converted to the highest partition ID in the data set. If the start and end PID values are equal, a single partition is dumped. If END_PID is less than START_PID, an error message is written to the log.</p>
<p>The DUMP_SOFT_RESTRICTIONS parameter controls how the turn restriction data is dumped. In turn restrictions that have more than two edges, a soft restriction is a series of edges that partially describe the turn restriction. This is a debugging parameter and should generally be left set to its default value, FALSE.</p>
</div>
</div>
<a id="SPATL1592"></a>
<div class="props_rev_3"><a id="GUID-3D1530B2-8621-48B6-9CB9-00666AE27724"></a>
<h2 id="SPATL-GUID-3D1530B2-8621-48B6-9CB9-00666AE27724" class="sect2"><span class="enumeration_section">E.4.4</span> CREATE_TRUCKING_DATA Procedure</h2>
<div>
<p>Syntax:</p>
<pre dir="ltr">SDO_ROUTER_PARTITION.CREATE_TRUCKING_DATA(
    LOG_FILE_NAME IN VARCHAR2 := &#39; sdo_router_partition.log&#39;,
    CLEANUP       IN BOOLEAN DEFAULT TRUE);
</pre>
<p>The CREATE_TRUCKING_DATA procedure must be run from a routing engine schema that contains the raw trucking data table ROUTER_TRANSPORT. This procedure partitions the trucking data and creates the ROUTER_TRUCKING_DATA table containing the trucking user data in BLOB format. Trucking user data creation requires access to the data version, so the SDO_ROUTER_DATA_VERSION table must exist in the routing engine schema.</p>
<p>The LOG_FILE_NAME parameter is the name of the log file written during trucking restriction generation. This log file is created in the SDO_ROUTER_LOG_DIR directory. You can choose a log file name or use the default partitioning log file <code>sdo_router_partition.log</code>.</p>
<p>The CLEANUP parameter is used for debugging. By default, all of the intermediate tables created during trucking restriction generation are cleaned up. If there is problem with trucking restriction generation, leaving these tables in place can provide substantial debugging information.</p>
</div>
</div>
<a id="SPATL1593"></a>
<div class="props_rev_3"><a id="GUID-8ACFD79A-11E7-4B63-ABDD-B5B8AB059732"></a>
<h2 id="SPATL-GUID-8ACFD79A-11E7-4B63-ABDD-B5B8AB059732" class="sect2"><span class="enumeration_section">E.4.5</span> DUMP_TRUCKING_DATA Procedure</h2>
<div>
<p>Syntax:</p>
<pre dir="ltr">SDO_ROUTER_PARTITION.DUMP_TRUCKING_DATA(
    LOG_FILE_NAME    IN VARCHAR2 := &#39; sdo_router_partition.log&#39;,
    START_PID        IN NUMBER DEFAULT 0,
    END_PID          IN NUMBER DEFAULT -1,
    SKIP_UNSUPPORTED IN BOOLEAN DEFAULT TRUE);
</pre>
<p>The DUMP_TRUCKING_DATA procedure dumps the contents of the trucking restriction user data partition BLOBs. This procedure unpacks a BLOB, formats the data, and writes it to a log file. A single call to this procedure can dump a single partition or a contiguous range of partitions. This range is defined from START_PID to END_PID, inclusive. The default is to dump all partitions. A non-contiguous range of partitions cannot be dumped in a single call.</p>
<p>The LOG_FILE_NAME parameter specifies the name of the log file written when dumping trucking restriction user data partitions. This log file is created in the SDO_ROUTER_LOG_DIR directory. You can choose a log file name or write to the default partitioning log file <code>sdo_router_partition.log</code>.</p>
<p>The START_PID parameter is the ID of the first partition to dump. The default START_PID is 0. The START_PID must be less than or equal to END_PID.</p>
<p>The END_PID parameter is the ID of the last partition to dump. The default END_PID is -1, which is converted to the highest partition ID in the data set. If the start and end PID values are equal, a single partition is dumped. If END_PID is less than START_PID, an error message is written to the log.</p>
<p>The SKIP_UNSUPPORTED parameter controls how the trucking restriction data is dumped. The user data contains a number of restrictions included for future work but not currently supported. Setting SKIP_UNSUPPORTED to TRUE (the default) only dumps currently supported trucking restrictions. Setting SKIP_UNSUPPORTED to FALSE causes all trucking restrictions to be dumped.</p>
</div>
</div>
<a id="SPATL1594"></a>
<div class="props_rev_3"><a id="GUID-B837EF74-6013-45E0-B599-4C6F306D898C"></a>
<h2 id="SPATL-GUID-B837EF74-6013-45E0-B599-4C6F306D898C" class="sect2"><span class="enumeration_section">E.4.6</span> User Data Examples</h2>
<div>
<p>This section presents examples of operations involving user data. The data set in these examples is the road network data for a radius of 100 miles around the center of San Francisco. This data set contains about 520,000 nodes and 1,200,00 edges, including 82,000 edges with truck restrictions and 30,000 edges with restricted driving maneuvers.</p>
<p>This section contains examples of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="user-data.htm#GUID-4AD407F1-CB69-4E56-86DF-D224BB020BC2">Rebuilding the Turn Restriction User Data</a></p>
</li>
<li>
<p><a href="user-data.htm#GUID-3AEC6EF4-1D09-486E-B014-05BCC2F0303C">Dumping All Hard Turn Restriction User Data BLOBs</a></p>
</li>
<li>
<p><a href="user-data.htm#GUID-B668F2FA-D686-474B-87CB-B80026990892">Rebuilding the Trucking User Data</a></p>
</li>
<li>
<p><a href="user-data.htm#GUID-EC397410-F283-4011-8D0F-ABC41908FA47">Dumping the Trucking User Data Restrictions</a></p>
</li>
</ul>
</div>
<a id="SPATL1596"></a><a id="SPATL1595"></a>
<div class="props_rev_3"><a id="GUID-4AD407F1-CB69-4E56-86DF-D224BB020BC2"></a>
<h3 id="SPATL-GUID-4AD407F1-CB69-4E56-86DF-D224BB020BC2" class="sect3"><span class="enumeration_section">E.4.6.1</span> Rebuilding the Turn Restriction User Data</h3>
<div>
<div class="section">
<p><a href="user-data.htm#GUID-4AD407F1-CB69-4E56-86DF-D224BB020BC2__CACCEEIG">Example E-8</a> rebuilds the turn restriction user data. Because cleanup is set to FALSE, the intermediate tables used to rebuild the turn restriction user data will not be deleted. (To delete these tables execute the SDO_ROUTER_PARTITION.<a href="routing-engine-data.htm#GUID-C090BCBF-0E8B-4D0F-AED9-9627BAE33AFD">CLEANUP_ROUTER Procedure</a>.)</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-4AD407F1-CB69-4E56-86DF-D224BB020BC2__CACCEEIG">
<p class="titleinexample">Example E-8 Rebuilding the Turn Restriction User Data</p>
<pre dir="ltr">EXEC SDO_ROUTER_PARTITION.CREATE_TURN_RESTRICTION_DATA(
         &#39;rebuild_turn_restriction_data.log&#39;, FALSE);

******** Begin generation of turn restriction user data
** Logfile location: /scratch/logs/rebuild_turn_restriction_data.log
[INFO] Generating turn restriction user data for 995 partitions, data version (12.1.0.1.2)
 
[INFO] SQL String: CREATE TABLE new_turn_restriction_data(partition_id NUMBER, num_edges NUMBER, turn_restriction_data BLOB) LOB(turn_restriction_data) STORE AS (STORAGE (INITIAL 512K NEXT 128K MAXEXTENTS UNLIMITED) CHUNK 32768 NOCACHE NOLOGGING)
[INFO] ---- Writing 573 edges for partition 0
[INFO] ---- Writing 16 edges for partition 1
[INFO] ---- Writing 10 edges for partition 2
 
*** Note that partition 3 contains no turn restriction user data
 
[INFO] ---- Writing 8 edges for partition 4
[INFO] ---- Writing 23 edges for partition 5
[INFO] ---- Writing 39 edges for partition 6
*** Many more Writing partition messages
[INFO] ---- Writing 4 edges for partition 1023
[INFO] ---- Writing 11 edges for partition 1024
 
INFO: creating the final turn restriction user data table
INFO: create index rtrud_p_idx on router_turn_restriction_data table
******** Completed generation of turn restriction user data
</pre></div>
<!-- class="example" --></div>
</div>
<a id="SPATL1598"></a><a id="SPATL1597"></a>
<div class="props_rev_3"><a id="GUID-3AEC6EF4-1D09-486E-B014-05BCC2F0303C"></a>
<h3 id="SPATL-GUID-3AEC6EF4-1D09-486E-B014-05BCC2F0303C" class="sect3"><span class="enumeration_section">E.4.6.2</span> Dumping All Hard Turn Restriction User Data BLOBs</h3>
<div>
<div class="section">
<p><a href="user-data.htm#GUID-3AEC6EF4-1D09-486E-B014-05BCC2F0303C__CACGDFII">Example E-9</a> dumps all of the hard turn restriction user data BLOBS. (Dumping soft restrictions produces much larger dump files and is only useful when debugging problems in the turn restrictions constraints.)</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-3AEC6EF4-1D09-486E-B014-05BCC2F0303C__CACGDFII">
<p class="titleinexample">Example E-9 Dumping All Hard Turn Restriction User Data BLOBs</p>
<pre dir="ltr">EXEC SDO_ROUTER_PARTITION.DUMP_TURN_RESTRICTION_DATA(
         &#39;dump_all_turn_restrictions.log&#39;);

******** Beginning turn restriction dump
** Logfile location: /scratch/logs/dump_all_turn_restrictions.log
** Routeserver data version: 12.1.0.1.2                  <span class="bold">(A)</span>
** Start partition id: 0
** End partition id: 1024
** Dumping soft restrictions: FALSE

Starting turn restriction dump for partition 0, blob length 19956 bytes
  Data version: 12.1.0.1.2
  Partition 0 has 573 edges with turn restrictions       <span class="bold">(B)</span>
    edge id -937799058 has 1 turn restrictions
      Restriction Type/Attributes: Hard/None
      AppliesTo(959): Trucks, Through Traffic, Taxies, Motorcycles,
                      Emergency Vehicles, Delivery Vehicles, Carpools,
                      Buses, Automobiles
      Subpath(1): 24501308
    *******************************
    edge id -936524317 has 2 turn restrictions           <span class="bold">(C)</span>
      Restriction Type/Attributes: Hard/None
      AppliesTo(943): Trucks, Through Traffic, Taxies, Motorcycles,
                      Delivery Vehicles, Carpools, Buses, Automobiles
      Subpath(1): -724922777
      -------
      Restriction Type/Attributes: Hard/None
      AppliesTo(959): Trucks, Through Traffic, Taxies, Motorcycles,
                      Emergency Vehicles, Delivery Vehicles, Carpools,
                      Buses, Automobiles
      Subpath(1): 936524317
    *******************************
    edge id -932185370 has 2 turn restrictions
      Restriction Type/Attributes: Hard/None
      AppliesTo(1023): All Vehicles
      Subpath(1): 836074944                              
      -------
      Restriction Type/Attributes: Hard/None
      AppliesTo(1023): All Vehicles
      Subpath(1): -24638792
    *******************************
    edge id 834380593 has 1 turn restrictions            <span class="bold">(D)</span>
      Restriction Type/Attributes: Hard/None
      AppliesTo(943): Trucks, Through Traffic, Taxies, Motorcycles,
                      Delivery Vehicles, Carpools, Buses, Automobiles
      Subpath(4): 112065672, -112065610, -112008660, -834380591
    *******************************

*** Dump of the remaining restrictions in Partition 0
Starting turn restriction dump for partition 1, blob length 520 bytes
  Partition 1 has 16 edges with turn restrictions        <span class="bold">(E)</span>
    edge id -806530190 has 1 turn restrictions      
      Restriction Type/Attributes: Hard/None
      AppliesTo(703): Trucks, Taxies, Motorcycles, Emergency Vehicles,
                      Delivery Vehicles, Carpools, Buses, Automobiles
      Subpath(1): 120865027
    *******************************
*** Dump of the remaining restrictions in Partition 1 through 1024
</pre>
<p>In <a href="user-data.htm#GUID-3AEC6EF4-1D09-486E-B014-05BCC2F0303C__CACGDFII">Example E-9</a>:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">(A)</span>: The standard user dump header contains the location of the log file and the parameters used in the dump. It also contains the routing engine data version as queried from the SDO_ROUTER_DATA_VERSION table. This data version must match the data version stored in the header of the partition 0 BLOB.</p>
</li>
<li>
<p><span class="bold">(B)</span>: In the BLOB header section for the partition 0 BLOB, all turn restriction user data BLOB headers contain the partition ID, length of the BLOB in bytes, and number of edges with turn restrictions on them. The BLOB header for partition 0 also contains the user data version. This version must match the data version found in the SDO_ROUTER_DATA_VERSION table.</p>
</li>
<li>
<p><span class="bold">(C)</span>: In the dump of the turn restrictions for edge -936524317., this edge has two simple turn restrictions associated with it. Both restrictions are simple turn restrictions that do not allow movement from the single edge in the subpath to edge -936524317. Also note the difference in the vehicles to which the restrictions apply: the first restriction does not apply to emergency vehicles, but the second restriction does apply to emergency vehicles.</p>
</li>
<li>
<p><span class="bold">(D)</span>: Edge 834380593 has only one turn restriction, but the restriction being described is much more complicated than a simple turn. If the subpath immediately previous to edge 834380593 matches the subpath that starts at edge -834380591 and goes through edges -112008660, -112065610, 112065672 in precisely that order, then the maneuver is not allowed. If the subpath to the current edge is missing one of the listed subpath edges or if the edges in the subpath are in a different order, then the maneuver is allowed.</p>
</li>
<li>
<p><span class="bold">(E)</span>: In the BLOB header for local partitions, all turn restriction user data BLOB headers contain the partition ID, length of the BLOB in bytes, and number of edges with turn restrictions on them.</p>
</li>
</ul>
</div>
<!-- class="example" --></div>
</div>
<a id="SPATL1600"></a><a id="SPATL1599"></a>
<div class="props_rev_3"><a id="GUID-B668F2FA-D686-474B-87CB-B80026990892"></a>
<h3 id="SPATL-GUID-B668F2FA-D686-474B-87CB-B80026990892" class="sect3"><span class="enumeration_section">E.4.6.3</span> Rebuilding the Trucking User Data</h3>
<div>
<div class="section">
<p><a href="user-data.htm#GUID-B668F2FA-D686-474B-87CB-B80026990892__CACDIEHJ">Example E-10</a> rebuilds the trucking user data. Since cleanup is using the default value of TRUE the intermediate tables used to rebuild the turn restriction user data are deleted when the build completes.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-B668F2FA-D686-474B-87CB-B80026990892__CACDIEHJ">
<p class="titleinexample">Example E-10 Rebuilding the Trucking User Data</p>
<pre dir="ltr">EXEC SDO_ROUTER_PARTITION.CREATE_TRUCKING_DATA(
               &#39;rebuild_trucking_data.log&#39;);
******** Begin generation of trucking user data
** Logfile location:/scratch/logs/rebuild_trucking_data.log
[INFO] Generating trucking user data for <span class="bold">974 partitions</span>, 
data version (12.1.0.1.2)                                <span class="bold">(A)</span>
 
[INFO] SQL String: CREATE TABLE new_trucking_data
(partition_id NUMBER, num_edges NUMBER, trucking_data BLOB) LOB(trucking_data) STORE AS (STORAGE (INITIAL 512K NEXT 128K MAXEXTENTS UNLIMITED) CHUNK 32768 NOCACHE NOLOGGING)

INFO: creating the final trucking user data table
INFO: create index rtud_p_idx on router_trucking_data table
******** Completed generation of trucking user data
</pre>
<p>In <a href="user-data.htm#GUID-B668F2FA-D686-474B-87CB-B80026990892__CACDIEHJ">Example E-10</a>:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">(A)</span>: Note that there are only 974 partitions of trucking user data compared to the 1023 local partitions (see the output in <a href="user-data.htm#GUID-3AEC6EF4-1D09-486E-B014-05BCC2F0303C__CACGDFII">Example E-9</a>) of routing engine data. If a partition is missing in the user data output, this means there is no trucking data for the associated routing engine data partition.</p>
</li>
</ul>
</div>
<!-- class="example" --></div>
</div>
<a id="SPATL1602"></a><a id="SPATL1601"></a>
<div class="props_rev_3"><a id="GUID-EC397410-F283-4011-8D0F-ABC41908FA47"></a>
<h3 id="SPATL-GUID-EC397410-F283-4011-8D0F-ABC41908FA47" class="sect3"><span class="enumeration_section">E.4.6.4</span> Dumping the Trucking User Data Restrictions</h3>
<div>
<div class="section">
<p><a href="user-data.htm#GUID-EC397410-F283-4011-8D0F-ABC41908FA47__CACECBGJ">Example E-11</a> dumps the trucking user data restrictions. This example dumps the supported restrictions for partitions 0 through 25. In the dump, Main Type is type of restriction, Subtype is the reason for the restriction, and Value is the means to measure the restriction. For example, a height restriction is a Main Type, the Subtype can be a thing like Bridge or Tunnel or can be Unknown, and Value can be a measure (always metric) like meters for height and width or metric tons for weight. Value can also be 0 for some restrictions (for example legal restrictions) that cannot be physically measured.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-EC397410-F283-4011-8D0F-ABC41908FA47__CACECBGJ">
<p class="titleinexample">Example E-11 Dumping the Trucking User Data Restrictions</p>
<pre dir="ltr">EXEC SDO_ROUTER_PARTITION.DUMP_TRUCKING_DATA(
               &#39;dump_trucking_data0-25.log&#39;, 0, 25);

******** Beginning trucking data dump
** Logfile location: /scratch/logs/dump_trucking_data0-25.log
** Routeserver data version: 12.1.0.1.2                  <span class="bold">(A)</span>
** Start partition id: 0
** End partition id: 25

Starting truck data dump for partition 0, blob length 1019048 bytes
  Data version: 12.1.0.1.2
  Partition 0 has 21808 edges with truck data            <span class="bold">(B)</span>
    edge id -939054768 has 4 truck restrictions
      Main Type(10): Physical Height Restriction
      Sub-type(99): Unknown
      Value: 4.65
    *******************************
    edge id -854677940 has 3 truck restrictions
      Main Type(10): Physical Height Restriction
      Sub-type(1): Bridge
      Value: 4.67
    *******************************
    edge id -929320205 has 4 truck restrictions          <span class="bold">(C)</span>
      Main Type(10): Physical Height Restriction
      Sub-type(2): Tunnel
      Value: 4.27
      -------
      Main Type(20): Physical Weight Restriction
      Sub-type(99): Unknown
      Value: 4.08
    *******************************

*** The rest of the trucking data for edges in partition 0

Starting truck data dump for partition 2, blob length 296 bytes
                                                         <span class="bold">(D)</span>

Starting truck data dump for partition 3, blob length 3272 bytes
  Partition 3 has 91 edges with truck data
    edge id -811551125 has 1 truck restrictions
      Main Type(50): Legal Restriction
      Sub-type(22): All trailers forbidden
      Value: 0.0
    *******************************
    edge id 105439903 has 1 truck restrictions
      Main Type(20): Physical Weight Restriction
      Sub-type(99): Unknown
      Value: 9.07
    *******************************
    edge id -105491810 has 1 truck restrictions          <span class="bold">(E)</span>
      Main Type(50): Legal Restriction
      Sub-type(21): All trucks forbidden
      Value: 0.0
    *******************************
    edge id -105449802 has 1 truck restrictions
      Main Type(50): Legal Restriction
      Sub-type(26): All trucks forbidden except deliveries and residents
      Value: 0.0
    *******************************

 *** The rest of the trucking data for edges in partitions 3 through 25
</pre>
<p>In <a href="user-data.htm#GUID-EC397410-F283-4011-8D0F-ABC41908FA47__CACECBGJ">Example E-11</a>:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">(A)</span>: The standard user dump header contains the location of the log file and the parameters used in the dump. It also contains the routing engine data version as queried from the SDO_ROUTER_DATA_VERSION table. This data version must match the data version stored in the header of the partition 0 BLOB.</p>
</li>
<li>
<p><span class="bold">(B)</span>: In the BLOB header section for the partition 0 BLOB, all turn restriction user data BLOB headers contain the partition ID, length of the BLOB in bytes, and number of edges with turn restrictions on them. The BLOB header for partition 0 also contains the user data version. This version must match the data version found in the SDO_ROUTER_DATA_VERSION table.</p>
<p>Edge -939054768 is listed as having 4 truck restrictions, but only one is listed. The other three restrictions are there, but are currently unsupported in the routing engine. To see these restrictions, set the SKIP_UNSUPPORTED to FALSE when requesting the dump.</p>
<p>For edge -929320205 the Height restriction is because of a Bridge. Edge -939054768 also has a Height restriction, but there is no Subtype specified to explain why.</p>
</li>
<li>
<p><span class="bold">(C)</span>: This is an example of an edge that has multiple restrictions on it, in this case both a height and weight restriction expressed in meters and metric tons.</p>
</li>
<li>
<p><span class="bold">(D)</span>: Two things to note here: (1) partition 1 is missing, which means there is no trucking user data for partition 1; and (2) a partition header was printed for partition 2 but there is no data dumped, which means that there are trucking restrictions for partition 2 but the routing engine currently supports none of them.</p>
</li>
<li>
<p><span class="bold">(E)</span>: This is an example of two kinds of legal restrictions that can be modeled. (1) Edge -105491810 is an example of an exclusive legal restriction. There is a legal restriction on the edge that forbids all trucks. (2) Edge -105449802 is an example of an inclusive legal restriction. There is a legal restriction that excludes trucks on the edge but also lists an exception for delivery and resident trucks.</p>
</li>
</ul>
</div>
<!-- class="example" --></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment142">
<tr>
<td class="cellalignment149">
<table class="cellalignment147">
<tr>
<td class="cellalignment146"><a href="routing-engine-data.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment146"><a href="other-functions-and-procedures.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment151">
<table class="cellalignment145">
<tr>
<td class="cellalignment146"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment146"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment146"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment146"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment146"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment146"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>