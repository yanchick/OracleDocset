<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-101522"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/SDO_POINTINPOLYGON"></a><title>SDO_POINTINPOLYGON</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="SDO_POINTINPOLYGON operator, operators, SDO_POINTINPOLYGON"/>
<meta name="dcterms.created" content="2017-01-26T11:46:57Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Spatial and Graph Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49172-07"/>
<meta name="dcterms.isVersionOf" content="SPATL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="sdo_overlaps.htm" title="Previous" type="text/html"/>
<link rel="Next" href="sdo_relate.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49172-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-959C15D2-509C-4511-ADEB-1ADA6FBA8D0A"></a> <span id="PAGE" style="display:none;">197/475</span> <!-- End Header -->
<a id="SPATL1512"></a><a id="SPATL1507"></a>
<h1 id="SPATL-GUID-959C15D2-509C-4511-ADEB-1ADA6FBA8D0A" class="sect1"><span class="enumeration_section">18.15</span> SDO_POINTINPOLYGON</h1>
<div>
<div class="section">
<p class="subhead1">Format</p>
<pre dir="ltr">SDO_POINTINPOLYGON(cur, geom_obj, tol, params) RETURN ANYDATASET;
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Description</p>
<p>Takes a set of rows whose first column is a point&#39;s x-coordinate value and the second column is a point&#39;s y-coordinate value, and returns those rows that are within a specified polygon geometry.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Keywords and Parameters</p>
<div class="tblformal" id="GUID-959C15D2-509C-4511-ADEB-1ADA6FBA8D0A__GUID-9DB4E1C9-4E6C-4237-9430-36B38DD6C925">
<table class="cellalignment152" summary="Keywords and parameters for SDO_JOIN operator">
<thead>
<tr class="cellalignment143">
<th class="cellalignment154" id="d111842e71">Value</th>
<th class="cellalignment191" id="d111842e74">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment143">
<td class="cellalignment157" id="d111842e79" headers="d111842e71">
<p>cur</p>
</td>
<td class="cellalignment192" headers="d111842e79 d111842e74">
<p>A REF cursor: the first two columns in the SELECT of the SQL for ref_cursor must be an X and Y point coordinates pair from a user table. The two columns must be of type NUMBER. (Any other columns can be number, character and date types). Data type is SYS_REFCURSOR.</p>
</td>
</tr>
<tr class="cellalignment143">
<td class="cellalignment157" id="d111842e88" headers="d111842e71">
<p>geom_obj</p>
</td>
<td class="cellalignment192" headers="d111842e88 d111842e74">
<p>Spatial polygon geometry object: either a polygon geometry from a table or a transient instance of a polygon geometry, against which all of the selected points from <code>cur</code> will be checked. Data type is SDO_GEOMETRY.</p>
</td>
</tr>
<tr class="cellalignment143">
<td class="cellalignment157" id="d111842e100" headers="d111842e71">
<p>tol</p>
</td>
<td class="cellalignment192" headers="d111842e100 d111842e74">
<p>Tolerance value (see <a href="data-model.htm#GUID-7469388B-6D23-4294-904F-78CA3B7191D3">Tolerance</a>). Must be greater than 0.0. Data type is NUMBER.</p>
</td>
</tr>
<tr class="cellalignment143">
<td class="cellalignment157" id="d111842e113" headers="d111842e71">
<p>params</p>
</td>
<td class="cellalignment192" headers="d111842e113 d111842e74">
<p>Optional parameter string of keywords and values. Determines the behavior of the operator. See <a href="sdo_pointinpolygon.htm#GUID-959C15D2-509C-4511-ADEB-1ADA6FBA8D0A__BABHEGGI" title="params Keywords for the SDO_POINTINPOLYGON Operator">Table 18-5</a> in the Usage Notes for information about the available keywords. Data type is VARCHAR2. Default is NULL.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Returns</p>
<p>SDO_POINTINPOLYGON returns an object of ANYDATASET TYPE, which is described in <a class="olink ARPLS078" target="_blank" href="../ARPLS/t_anyset.htm#ARPLS078"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>. The ANYDATASET output columns are those specified by the <code>cur</code> parameter.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Usage Notes</p>
<p>SDO_POINTINPOLYGON is technically not an operator, but a table function. (For an explanation of table functions, see <a class="olink LNPLS915" target="_blank" href="../LNPLS/tuning.htm#LNPLS915"><span class="italic">Oracle Database PL/SQL Language Reference</span></a>.) However, it is presented in the chapter with spatial operators because its usage is similar to that of the operators, and because it is not part of a package with other functions and procedures.</p>
<p>The SQL statement used in the <code>cur</code> parameter can have any number of predicates in the WHERE clause. This feature can be used to filter the data on other attributes before passing the resulting rows into the SDO_POINTINPOLYGON operator.</p>
<p>The output columns are identical to the input columns, but the only rows returned are those matching the selection criteria.</p>
<p><a href="sdo_pointinpolygon.htm#GUID-959C15D2-509C-4511-ADEB-1ADA6FBA8D0A__BABHEGGI" title="params Keywords for the SDO_POINTINPOLYGON Operator">Table 18-5</a> shows the keywords for the <code>params</code> parameter.</p>
<div class="tblformal" id="GUID-959C15D2-509C-4511-ADEB-1ADA6FBA8D0A__BABHEGGI">
<p class="titleintable">Table 18-5 params Keywords for the SDO_POINTINPOLYGON Operator</p>
<table class="cellalignment152" title="params Keywords for the SDO_POINTINPOLYGON Operator" summary="params Keywords for the SDO_POINTINPOLYGON Operator">
<thead>
<tr class="cellalignment143">
<th class="cellalignment261" id="d111842e175">Keyword</th>
<th class="cellalignment262" id="d111842e178">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment143">
<td class="cellalignment263" id="d111842e183" headers="d111842e175">
<p>mask</p>
</td>
<td class="cellalignment264" headers="d111842e183 d111842e178">
<p><a id="d111842e188" class="indexterm-anchor"></a>The topological relationship of interest.Valid values are &#39;mask=<span class="italic">&lt;value&gt;</span>&#39; where <span class="italic">&lt;value&gt;</span> is one or more of the following: <code>ANYINTERACT</code>, <code>TOUCH</code>, <code>ON</code>, <code>INSIDE</code>, and <code>DISJOINT</code>. (<code>TOUCH</code> and <code>ON</code> are synonymous in this context.)</p>
<p>If this parameter is null or contains an empty string, <code>mask=ANYINTERACT</code> is assumed.</p>
</td>
</tr>
<tr class="cellalignment143">
<td class="cellalignment263" id="d111842e225" headers="d111842e175">
<p>sdo_batch_size</p>
</td>
<td class="cellalignment264" headers="d111842e225 d111842e178">
<p>Specifies the maximum number of rows that are processed in a batch. The default value is 4000 and the maximum value is 32768. Data type is NUMBER.</p>
<p>For example: &#39;sdo_batch_size=5000&#39;</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>To use parallel query servers, you must do either of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Specify the <code>/*+ PARALLEL(</code><span class="italic"><code>&lt;table alias&gt;, &lt;n&gt;</code></span><code>) */</code> optimizer hint, where <span class="italic">&lt;table_alias</span>&gt; is the specified table alias and <span class="italic">&lt;n&gt;</span> is the degree-of-parallelism.</p>
</li>
<li>
<p>Enable parallel query execution by entering the following command from a suitably privileged account:</p>
<pre dir="ltr">ALTER SESSION FORCE PARALLEL QUERY;
</pre></li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Examples</p>
<p>The following example creates a new table named COLA_MARKET_POINTS based on the data from the COLA_MARKETS table, which is described in <a href="simple-example-inserting-indexing-and-querying-spatial-data.htm">Simple Example: Inserting_ Indexing_ and Querying Spatial Data</a> and illustrated in <a href="simple-example-inserting-indexing-and-querying-spatial-data.htm#GUID-51A767CA-82EE-4475-8C8B-13E685C04934__I1004467">Figure 2-1</a>. The example then selects a point within each geometry where the MKT_ID column value is greater than 1. (It uses the <a href="sdo_util-interior_point.htm">SDO_UTIL.INTERIOR_POINT</a> function to get a point that is guaranteed to be inside each geometry that matches the query criteria.)</p>
<pre dir="ltr">-- Create a new table with a different name based on the data from the 
-- COLA_MARKETS table. This table has four columns: X, Y, MKT_ID, and NAME.
 
CREATE TABLE cola_market_points AS
SELECT a.point.sdo_point.x X, a.point.sdo_point.y Y, MKT_ID, NAME
 FROM (
SELECT mkt_id, name, sdo_util.interior_point(shape) point FROM cola_markets) a;

-- Limit to MKT_ID &gt; 1. Also, use the PARALLEL hint.
SELECT /*+ PARALLEL(a, 4) */ *
FROM TABLE(sdo_PointInPolygon(
  CURSOR(select * from cola_market_points where mkt_id &gt; 1),
  SDO_GEOMETRY(
    2003,
    NULL,
    NULL,
    MDSYS.SDO_ELEM_INFO_ARRAY(1, 1003, 1),
    MDSYS.SDO_ORDINATE_ARRAY(1, 1, 8, 1, 8, 6, 5, 7, 1, 1)),
  0.05)) a;
 
         X          Y     MKT_ID NAME                                           
---------- ---------- ---------- --------------------------------               
    6.3125      2.875          2 cola_b                                         
    4.6875      3.875          3 cola_c
</pre>
<p>The following example uses a bind variable in the WHERE clause, and it specifies a <code>params</code> string. It assumes the existence of a table named PIP_DATA.</p>
<pre dir="ltr">DECLARE
 my_cursor SYS_REFCURSOR;
 my_pip_cursor SYS_REFCURSOR;
 stmt varchar2(2000);
 cnt number;
BEGIN
  stmt := &#39;SELECT count(*) FROM &#39; ||
          &#39; TABLE (Sdo_PointInPolygon(&#39; ||
          &#39;CURSOR(select * from pip_data where x &lt; :x1),&#39; ||
          &#39; :g1, :tol, &#39;&#39;mask=DISJOINT sdo_batch_size=6000&#39;&#39;)) &#39;;
 open my_cursor for stmt
 using 100, -- :x1
       SDO_GEOMETRY( 2003, NULL, NULL,
              SDO_ELEM_INFO_ARRAY(1, 1003, 1),
              SDO_ORDINATE_ARRAY(10, 10, 70,10, 70, 70, 50,70,
                                 40,50, 20,70, 10,70, 10,10)), -- :g1
       0.05; -- :tol
 FETCH my_cursor into cnt;
 dbms_output.put_line(to_char(cnt));
END;
/
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Related Topics</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="sdo_util-interior_point.htm">SDO_UTIL.INTERIOR_POINT</a></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment142">
<tr>
<td class="cellalignment149">
<table class="cellalignment147">
<tr>
<td class="cellalignment146"><a href="sdo_overlaps.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment146"><a href="sdo_relate.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment151">
<table class="cellalignment145">
<tr>
<td class="cellalignment146"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment146"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment146"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment146"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment146"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment146"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>