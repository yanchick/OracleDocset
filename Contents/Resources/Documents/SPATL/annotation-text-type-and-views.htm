<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-100635"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Annotation%20Text%20Type%20and%20Views"></a><title>Annotation Text Type and Views</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="annotation text, cartographic text (annotation text), ST_ANNOTATION_TEXT constructor"/>
<meta name="dcterms.created" content="2017-01-26T11:46:57Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Spatial and Graph Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49172-07"/>
<meta name="dcterms.isVersionOf" content="SPATL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="avoiding-name-conflicts.htm" title="Previous" type="text/html"/>
<link rel="Next" href="loading-spatial-data.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49172-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-6E589C3D-211A-46D6-AA4B-D930954F61AF"></a> <span id="PAGE" style="display:none;">66/475</span> <!-- End Header -->
<a id="SPATL568"></a>
<h1 id="SPATL-GUID-6E589C3D-211A-46D6-AA4B-D930954F61AF" class="sect1"><span class="enumeration_section">3.5</span> Annotation Text Type and Views</h1>
<div>
<p>Oracle Spatial and Graph supports annotation text as specified in the <span class="italic">OpenGIS Implementation Specification for Geographic information - Simple feature access - Part 1: Common architecture</span>, which defines <span class="bold">annotation text</span> as &#34;simply placed text that can carry either geographically-related or ad-hoc data and process-related information as displayable text. This text may be used for display in editors or in simpler maps. It is usually lacking in full cartographic quality, but may act as an approximation to such text as needed by any application.&#34;</p>
<p>The ST_ANNOTATION_TEXT object type can be used to store annotation text. This type has a constructor for inserting annotation text into a table, as explained in <a href="annotation-text-type-and-views.htm#GUID-71C77BAD-5436-43DD-90D6-AEB9A98A0E32">Using the ST_ANNOTATION_TEXT Constructor</a>.</p>
<p>The USER_ANNOTATION_TEXT_METADATA and ALL_ANNOTATION_TEXT_METADATA views store metadata related to annotation text, as explained in <a href="annotation-text-type-and-views.htm#GUID-2CB0324C-A2C0-4191-9F81-670C234CE670">Annotation Text Metadata Views</a>.</p>
</div>
<a id="SPATL570"></a><a id="SPATL569"></a>
<div class="props_rev_3"><a id="GUID-71C77BAD-5436-43DD-90D6-AEB9A98A0E32"></a>
<h2 id="SPATL-GUID-71C77BAD-5436-43DD-90D6-AEB9A98A0E32" class="sect2"><span class="enumeration_section">3.5.1</span> Using the ST_ANNOTATION_TEXT Constructor</h2>
<div>
<p>An annotation text object contains an array of objects, where each object consists of a text label, the point at which to start rendering the text label, a leader line (typically from the text label to the associated point on the map), and optionally extra attribute information. A single annotation text object may typically contain all the text labels for a map.</p>
<p>Each text label object has the following definition:</p>
<pre dir="ltr"> Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 PRIVATEVALUE                                       VARCHAR2(4000)
 PRIVATELOCATION                                    MDSYS.SDO_GEOMETRY
 PRIVATELEADERLINE                                  MDSYS.SDO_GEOMETRY
 PRIVATETEXTATTRIBUTES                              VARCHAR2(4000)
</pre>
<div class="example" id="GUID-71C77BAD-5436-43DD-90D6-AEB9A98A0E32__CHDIEACA">
<p class="titleinexample">Example 3-3 Using the ST_ANNOTATION_TEXT Constructor</p>
<p>To insert the annotation for a single point, use the ST_ANNOTATION_TEXT constructor. This constructor specifies the information for a single point using an array, as shown in <a href="annotation-text-type-and-views.htm#GUID-71C77BAD-5436-43DD-90D6-AEB9A98A0E32__CHDIEACA">Example 3-3</a>, which creates a table with a column of type ST_ANNOTATION_TEXT and inserts one row, using the ST_ANNOTATION_TEXT constructor in the INSERT statement.</p>
<pre dir="ltr">CREATE TABLE my_annotations (id NUMBER, textobj ST_ANNOTATION_TEXT);
 
INSERT INTO my_annotations VALUES (2,
 ST_ANNOTATION_TEXT(
    ST_ANNOTATIONTEXTELEMENT_ARRAY(
           ST_ANNOT_TEXTELEMENT_ARRAY(
                 ST_ANNOTATIONTEXTELEMENT(
                    &#39;Sample Label 2&#39;,
                    SDO_GEOMETRY(2001,null,sdo_point_type(10,10,null),null,null),
                    SDO_GEOMETRY(2002,null,null,
                        SDO_ELEM_INFO_ARRAY(1,2,1),
                        SDO_ORDINATE_ARRAY(5,10, 10,10)), 
                    NULL)))));
</pre>
<p>In the ST_ANNOTATION_TEXT constructor in <a href="annotation-text-type-and-views.htm#GUID-71C77BAD-5436-43DD-90D6-AEB9A98A0E32__CHDIEACA">Example 3-3</a>, the ST_ANNOTATIONTEXTELEMENT subelement specifies the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>The text for the label, in this case <code>Sample Label 2</code></p>
</li>
<li>
<p>A point geometry specifying where to start rendering the label, in this case location (10,10)</p>
</li>
<li>
<p>A line string geometry specifying the start and end points of the leader line between the point of interest and the text label, in this case a line between locations (5,10) and (10,10)</p>
</li>
<li>
<p>No text display attribute information (NULL), which means that the information TEXT_ATTRIBUTES column of the annotation text metadata views is used (see <a href="annotation-text-type-and-views.htm#GUID-2CB0324C-A2C0-4191-9F81-670C234CE670__CHDFIHBB" title="Columns in the Annotation Text Metadata Views">Table 3-2</a> in <a href="annotation-text-type-and-views.htm#GUID-2CB0324C-A2C0-4191-9F81-670C234CE670">Annotation Text Metadata Views</a>)</p>
</li>
</ul>
</div>
<!-- class="example" --></div>
</div>
<a id="SPATL572"></a><a id="SPATL571"></a>
<div class="props_rev_3"><a id="GUID-2CB0324C-A2C0-4191-9F81-670C234CE670"></a>
<h2 id="SPATL-GUID-2CB0324C-A2C0-4191-9F81-670C234CE670" class="sect2"><span class="enumeration_section">3.5.2</span> Annotation Text Metadata Views</h2>
<div>
<p>The annotation text metadata is stored in a global table owned by MDSYS (which users should never directly update). Each Spatial and Graph user has the following views available in the schema associated with that user:</p>
<ul style="list-style-type: disc;">
<li>
<p><a id="d33161e207" class="indexterm-anchor"></a><a id="d33161e209" class="indexterm-anchor"></a>USER_ANNOTATION_TEXT_METADATA contains metadata information for all annotation text in tables owned by the user (schema). This is the only view that you can update, and it is the one in which Spatial and Graph users must insert metadata related to spatial tables.</p>
</li>
<li>
<p><a id="d33161e216" class="indexterm-anchor"></a><a id="d33161e218" class="indexterm-anchor"></a>ALL_ANNOTATION_TEXT_METADATA contains metadata information for all annotation text in tables on which the user has SELECT permission.</p>
</li>
</ul>
<p>Spatial and Graph users are responsible for populating these views. For each annotation text object, you must insert an appropriate row into the USER_ANNOTATION_TEXT_METADATA view. Oracle Spatial and Graph ensures that the ALL_ANNOTATION_TEXT_METADATA view is also updated to reflect the rows that you insert into USER_ANNOTATION_TEXT_METADATA.</p>
<p>The USER_ANNOTATION_TEXT_METADATA and ALL_ANNOTATION_TEXT_METADATA views contain the same columns, as shown <a href="annotation-text-type-and-views.htm#GUID-2CB0324C-A2C0-4191-9F81-670C234CE670__CHDFIHBB" title="Columns in the Annotation Text Metadata Views">Table 3-2</a>, except that the USER_ANNOTATION_TEXT_METADATA view does not contain the OWNER column. (The columns are listed in their order in the view definition.)</p>
<div class="tblformalwide" id="GUID-2CB0324C-A2C0-4191-9F81-670C234CE670__CHDFIHBB">
<p class="titleintable">Table 3-2 Columns in the Annotation Text Metadata Views</p>
<table class="cellalignment246" title="Columns in the Annotation Text Metadata Views" summary="Columns in the Annotation Text Metadata Views">
<thead>
<tr class="cellalignment143">
<th class="cellalignment154" id="d33161e243">Column Name</th>
<th class="cellalignment240" id="d33161e246">Data Type</th>
<th class="cellalignment247" id="d33161e249">Purpose</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment143">
<td class="cellalignment157" id="d33161e254" headers="d33161e243">
<p>OWNER</p>
</td>
<td class="cellalignment241" headers="d33161e254 d33161e246">
<p>VARCHAR2(32)</p>
</td>
<td class="cellalignment248" headers="d33161e254 d33161e249">
<p>Owner of the table specified in the TABLE_NAME column (ALL_ANNOTATION_TEXT_METADATA view only).</p>
</td>
</tr>
<tr class="cellalignment143">
<td class="cellalignment157" id="d33161e264" headers="d33161e243">
<p>TABLE_NAME</p>
</td>
<td class="cellalignment241" headers="d33161e264 d33161e246">
<p>VARCHAR2(32)</p>
</td>
<td class="cellalignment248" headers="d33161e264 d33161e249">
<p>Name of the table containing the column of type ST_ANNOTATION_TEXT.</p>
</td>
</tr>
<tr class="cellalignment143">
<td class="cellalignment157" id="d33161e274" headers="d33161e243">
<p>COLUMN_NAME</p>
</td>
<td class="cellalignment241" headers="d33161e274 d33161e246">
<p>VARCHAR2(1024)</p>
</td>
<td class="cellalignment248" headers="d33161e274 d33161e249">
<p>Name of the column of type ST_ANNOTATION_TEXT.</p>
</td>
</tr>
<tr class="cellalignment143">
<td class="cellalignment157" id="d33161e284" headers="d33161e243">
<p>TEXT_EXPRESSION</p>
</td>
<td class="cellalignment241" headers="d33161e284 d33161e246">
<p>VARCHAR2(4000)</p>
</td>
<td class="cellalignment248" headers="d33161e284 d33161e249">
<p>A value that can be used if text is not specified for a label. As explained in the OpenGIS specification: &#34;Text to place is first derived from the contents of VALUE in the current element, if VALUE is not null. Otherwise, text is derived from the first non-null preceding element VALUE. If all preceding elements have null VALUE fields, VALUE is derived from the TEXT_EXPRESSION in the metadata table.&#34;</p>
</td>
</tr>
<tr class="cellalignment143">
<td class="cellalignment157" id="d33161e294" headers="d33161e243">
<p>TEXT_ATTRIBUTES</p>
</td>
<td class="cellalignment241" headers="d33161e294 d33161e246">
<p>VARCHAR2(4000)</p>
</td>
<td class="cellalignment248" headers="d33161e294 d33161e249">
<p>Default text display attributes (font family and size, horizontal and vertical spacing, and so on) for the label text style and layout, unless overridden in the <span>PRIVATETEXTATTRIBUTES</span> attribute of the ST_ANNOTATION_TEXT constructor (described in <a href="annotation-text-type-and-views.htm#GUID-71C77BAD-5436-43DD-90D6-AEB9A98A0E32">Using the ST_ANNOTATION_TEXT Constructor</a>). Use the format specified in the &#34;XML for Text Attributes&#34; section of the OpenGIS specification.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment142">
<tr>
<td class="cellalignment149">
<table class="cellalignment147">
<tr>
<td class="cellalignment146"><a href="avoiding-name-conflicts.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment146"><a href="loading-spatial-data.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment151">
<table class="cellalignment145">
<tr>
<td class="cellalignment146"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment146"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment146"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment146"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment146"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment146"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>