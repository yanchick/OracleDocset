<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-101805"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/SDO_UTIL.SIMPLIFY"></a><title>SDO_UTIL.SIMPLIFY</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="SIMPLIFY function, SDO_UTIL package, SIMPLIFY, simplification of geometries, Douglas-Peucker algorithm for geometry simplification"/>
<meta name="dcterms.created" content="2017-01-26T11:46:57Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Spatial and Graph Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49172-07"/>
<meta name="dcterms.isVersionOf" content="SPATL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="sdo_util-reverse_linestring.htm" title="Previous" type="text/html"/>
<link rel="Next" href="sdo_util-simplifyvw.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49172-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-1013175B-8A1A-45F7-BC60-A3DF5B109BEF"></a> <span id="PAGE" style="display:none;">421/475</span> <!-- End Header -->
<a id="SPATL1247"></a><a id="SPATL1246"></a>
<h1 id="SPATL-GUID-1013175B-8A1A-45F7-BC60-A3DF5B109BEF" class="sect1"><span class="enumeration_section">31.31</span> SDO_UTIL.SIMPLIFY</h1>
<div>
<div class="section">
<p class="subhead1">Format</p>
<pre dir="ltr">SDO_UTIL.SIMPLIFY(
     geometry     IN SDO_GEOMETRY, 
     threshold    IN NUMBER 
     tolerance    IN NUMBER DEFAULT 0.0000005, 
     remove_loops IN NUMBER DEFAULT 0 
     ) RETURN SDO_GEOMETRY;
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Description</p>
<p>Simplifies the input geometry, based on a threshold value, using the Douglas-Peucker algorithm.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101801"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1013175B-8A1A-45F7-BC60-A3DF5B109BEF__GUID-0370B32F-7C75-42B6-B5EB-6BC9CEEBF49C"><!-- --></a>geometry</dt>
<dd>
<p>Geometry to be simplified.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101802"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1013175B-8A1A-45F7-BC60-A3DF5B109BEF__GUID-94645002-1D95-49CA-8EED-DFD9A151549B"><!-- --></a>threshold</dt>
<dd>
<p>Threshold value to be used for the geometry simplification. Should be a positive number. (Zero causes the input geometry to be returned.) If the input geometry is geodetic, the value is the number of meters; if the input geometry is non-geodetic, the value is the number of units associated with the data.</p>
<p>As the threshold value is decreased, the returned geometry is likely to be closer to the input geometry; as the threshold value is increased, fewer points are likely to be in the returned geometry. See the Usage Notes for more information.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101803"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1013175B-8A1A-45F7-BC60-A3DF5B109BEF__GUID-9BCFA431-25AC-4932-A940-71BFF2E78D44"><!-- --></a>tolerance</dt>
<dd>
<p>Tolerance value (see <a href="data-model.htm#GUID-7469388B-6D23-4294-904F-78CA3B7191D3">Tolerance</a>). Must not be greater than <code>threshold</code>; and for better performance, should not be the same as <code>threshold</code>. If you do not specify a value, the default value is 0.0000005.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101804"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-1013175B-8A1A-45F7-BC60-A3DF5B109BEF__GUID-2A86093F-5571-43D5-9010-76D1CDED1F5E"><!-- --></a>remove_loops</dt>
<dd>
<p>For some line geometries, when the line is simplified, it might end up with self-crossing loops in the middle. While this is a valid geometry (for lines), in some cases it is not desirable to have these loops in the result of the simplify operation. A value of <code>0</code> (the default) does not remove such loops; a value of <code>1</code> (or any other nonzero positive number) removes any such loops and always returns simple line segments.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Usage Notes</p>
<p>This function also converts arcs to line stings, eliminates duplicate vertices, and corrects many overlapping edge polygon problems. The reason this function sometimes fixes problems is that it internally calls the <a href="sdo_util-rectify_geometry.htm">SDO_UTIL.RECTIFY_GEOMETRY</a> function at the end of the simplification process to ensure that a valid geometry is returned.</p>
<p>This function is useful when you want a geometry with less fine resolution than the original geometry. For example, if the display resolution cannot show the hundreds or thousands of turns in the course of a river or in a political boundary, better performance might result if the geometry were simplified to show only the major turns.</p>
<p>If you use this function with geometries that have more than two dimensions, only the first two dimensions are used in processing the query, and only the first two dimensions in the returned geometry are to be considered valid and meaningful.</p>
<p>This function uses the Douglas-Peucker algorithm, which is explained in several cartography textbooks and reference documents. (In some explanations, the term <span class="italic">tolerance</span> is used instead of <span class="italic">threshold</span>; however, this is different from the Oracle Spatial and Graph meaning of tolerance.)</p>
<p>Compare this function with <a href="sdo_util-simplifyvw.htm">SDO_UTIL.SIMPLIFYVW</a>, which uses the Visvalingham-Whyatt algorithm.</p>
<p>The returned geometry can be a polygon, line, or point, depending on the geometry definition and the threshold value. The following considerations apply:</p>
<ul style="list-style-type: disc;">
<li>
<p>A polygon can simplify to a line or a point and a line can simplify to a point, if the threshold value associated with the geometry is sufficiently large. For example, a thin rectangle will simplify to a line if the distance between the two parallel long sides is less than the threshold value, and a line will simplify to a point if the distance between the start and end points is less than the threshold value.</p>
</li>
<li>
<p>In a polygon with a hole, if the exterior ring or the interior ring (the hole) simplifies to a line or a point, the interior ring disappears from (is not included in) the resulting geometry.</p>
</li>
<li>
<p>Topological characteristics of the input geometry might not be maintained after simplification. For a collection geometry, the number of elements might increase, to prevent overlapping of individual elements. In all cases, this function will not return an invalid geometry.</p>
</li>
</ul>
<p>This function is not supported for Linear referencing system (LRS) geometries (which are described in <a href="linear-referencing-system.htm">Linear Referencing System</a>).</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Examples</p>
<p>The following example simplifies a line string geometry that reflects the vertices of the road shown in <a href="example-lrs-functions.htm#GUID-699CED71-3497-4826-A4A5-60BF13CD3770__I888413">Figure 7-20</a> in <a href="example-lrs-functions.htm">Example of LRS Functions</a>, although the geometry in this example is not an LRS geometry. With the threshold value as 6, the resulting line string has only three points: the start and end points, and (12, 4,12).</p>
<pre dir="ltr">SELECT SDO_UTIL.SIMPLIFY(
  SDO_GEOMETRY(
    2002,  -- line string, 2 dimensions (X,Y)
    NULL,
    NULL,
    SDO_ELEM_INFO_ARRAY(1,2,1), -- one line string, straight segments
    SDO_ORDINATE_ARRAY(
      2,2,   -- Starting point
      2,4,
      8,4,
      12,4,
      12,10,
      8,10,
      5,14)  -- Ending point
  ),
  6, -- threshold value for geometry simplification
  0.5  -- tolerance
) FROM DUAL;

SDO_UTIL.SIMPLIFY(SDO_GEOMETRY(2002,--LINESTRING,2DIMENSIONS(X,Y)NULL,NULL,SDO_E
--------------------------------------------------------------------------------
SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1), SDO_ORDINATE_ARRAY(
2, 2, 12, 4, 5, 14))
</pre>
<p><a href="sdo_util-simplify.htm#GUID-1013175B-8A1A-45F7-BC60-A3DF5B109BEF__BJEIGAFI">Figure 31-1</a> shows the result of this example. In <a href="sdo_util-simplify.htm#GUID-1013175B-8A1A-45F7-BC60-A3DF5B109BEF__BJEIGAFI">Figure 31-1</a>, the thick solid black line is the resulting geometry, and the thin solid light line between the start and end points is the input geometry.</p>
<div class="figure" id="GUID-1013175B-8A1A-45F7-BC60-A3DF5B109BEF__BJEIGAFI">
<p class="titleinfigure">Figure 31-1 Simplification of a Geometry</p>
<img width="213" height="212" src="img/highway_simplified.gif" alt="Description of Figure 31-1 follows" title="Description of Figure 31-1 follows"/><br/>
<a href="img_text/highway_simplified.htm">Description of &#34;Figure 31-1 Simplification of a Geometry&#34;</a></div>
<!-- class="figure" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Related Topics</p>
<p><a href="sdo_util-simplifyvw.htm">SDO_UTIL.SIMPLIFYVW</a></p>
<p><a href="sdo_util-rectify_geometry.htm">SDO_UTIL.RECTIFY_GEOMETRY</a></p>
</div>
<!-- class="section" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment142">
<tr>
<td class="cellalignment149">
<table class="cellalignment147">
<tr>
<td class="cellalignment146"><a href="sdo_util-reverse_linestring.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment146"><a href="sdo_util-simplifyvw.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment151">
<table class="cellalignment145">
<tr>
<td class="cellalignment146"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment146"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment146"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment146"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment146"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment146"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>