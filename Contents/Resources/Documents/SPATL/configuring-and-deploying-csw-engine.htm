<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-100658"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/CSW%20APIs%20and%20Configuration"></a><title>CSW APIs and Configuration</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="extractSDO function, MDSYS.SDO_GEOM_PATH_INFO type, SDO_GEOM_PATH_INFO, MDSYS.SDO_GEOM_PATH_INFO type"/>
<meta name="dcterms.created" content="2017-01-26T11:46:57Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Spatial and Graph Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49172-07"/>
<meta name="dcterms.isVersionOf" content="SPATL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="csw-engine-and-architecture.htm" title="Previous" type="text/html"/>
<link rel="Next" href="csw-operations-requests-and-responses-xml-examples.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49172-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-23E57524-CC8F-4E94-807A-940755791BA0"></a> <span id="PAGE" style="display:none;">172/475</span> <!-- End Header -->
<a id="SPATL957"></a>
<h1 id="SPATL-GUID-23E57524-CC8F-4E94-807A-940755791BA0" class="sect1"><span class="enumeration_section">16.2</span> CSW APIs and Configuration</h1>
<div>
<p>The CSW APIs enable you to perform operations that include:</p>
<ul style="list-style-type: disc;">
<li>
<p>Specifying information about record type domains and record view transformations</p>
</li>
<li>
<p>Publishing record types</p>
</li>
<li>
<p>Dropping (unpublishing) record types</p>
</li>
<li>
<p>Granting to users and revoking from users privileges on CSW record types</p>
</li>
</ul>
<p><a href="sdo_csw_process-package-deprecated.htm">SDO_CSW_PROCESS Package (CSW Processing)</a> describes the PL/SQL API (SDO_CSW_PROCESS package), <a href="csw-operations-requests-and-responses-xml-examples.htm">Request and Response XML Examples</a> provides examples of XML requests and responses, and <a href="java-api-csw-administration-deprecated-implementation.htm#GUID-031DBFD7-6C5A-467C-A62E-52097FB46D8A">Java API for CSW Administration</a> describes the Java API.</p>
</div>
<a id="SPATL958"></a>
<div class="props_rev_3"><a id="GUID-8CC0CF76-9227-4668-88E8-FA270D119C6F"></a>
<h2 id="SPATL-GUID-8CC0CF76-9227-4668-88E8-FA270D119C6F" class="sect2"><span class="enumeration_section">16.2.1</span> Capabilities Documents (CSW)</h2>
<div>
<p>A client can get information about the server&rsquo;s capabilities. A capabilities document is generated by the CSW server in response to a GetCapabilities request. The capabilities document contains information extracted from CSW metadata stored in an Oracle database, including a record type and the type of operations supported.</p>
<p>The client can use HTTP GET, POST, and SOAP protocols to access this capabilities document. The following example uses the HTTP protocol:</p>
<pre dir="ltr">http:///&lt;machine-name:port&gt;/oraclespatial/csw?request=GetCapabilities&amp;service=CSW&amp;acceptversion=2.0.0&amp;outputFormat=text/xml
</pre>
<p>In the preceding formats:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic">machine-name</span> is the name of the system where the application server is running.</p>
</li>
<li>
<p><span class="italic">port</span> is the port number where the application server is running.</p>
</li>
<li>
<p><span class="italic">oraclespatial</span> is the default root where the Oracle Spatial and Graph web services application is mounted.</p>
</li>
</ul>
</div>
</div>
<a id="SPATL960"></a><a id="SPATL961"></a><a id="SPATL959"></a>
<div class="props_rev_3"><a id="GUID-6487A2E1-FDCD-451C-9DB8-27F89BFC634D"></a>
<h2 id="SPATL-GUID-6487A2E1-FDCD-451C-9DB8-27F89BFC634D" class="sect2"><span class="enumeration_section">16.2.2</span> Spatial Path Extractor Function (extractSDO)</h2>
<div>
<p>If you need CSW to process any spatial content that is not in GML format, you must create a user-defined function named <code>extractSDO</code> to extract the spatial path information. This function must be implemented for each record type that has spatial content in non-GML format and on which you want to create a spatial index. (This function is not needed if all spatial content for a record type is in GML format.)</p>
<p>This function must be registered, as explained in <a href="configuring-and-deploying-csw-engine.htm#GUID-E7BADAD5-10FE-4FDA-814E-FD41EC768B4A">Registering and Unregistering the extractSDO Function</a>, so that the Oracle Spatial and Graph CSW server can find and invoke this function when it needs to extract spatial path content that is not in GML format.</p>
<p>The <code>extractSDO</code> function has the following format:</p>
<p>extractSDO(</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN XMLType, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;srsNs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN VARCHAR2, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spPathsSRSNSList&nbsp;&nbsp;IN MDSYS.STRINGLISTLIST); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) RETURN MDSYS.SDO_GEOM_PATH_INFO;</p>
<div class="section">
<p class="subhead2">Parameters</p>
</div>
<!-- class="section" -->
<div class="section">
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-100655"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-6487A2E1-FDCD-451C-9DB8-27F89BFC634D__GUID-64921B0F-AE20-48FA-9EE3-65F2C3B17AEC"><!-- --></a>xmlData</dt>
<dd>
<p>Data of the record instance from which spatial path information needs to be extracted.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-100656"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-6487A2E1-FDCD-451C-9DB8-27F89BFC634D__GUID-B6D6DB22-A9A0-49F2-9290-6EFB7BF7C037"><!-- --></a>srsNs</dt>
<dd>
<p>User-defined namespace of the spatial reference system (coordinate system) associated with the spatial data for the feature type. This namespace (if specified) is also used to generate the <code>srsName</code> attribute in the <code>&lt;boundedBy&gt;</code> element of the FeatureCollection result generated for the GetFeature request.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-100657"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-6487A2E1-FDCD-451C-9DB8-27F89BFC634D__GUID-0C679F40-4377-4419-8FBE-8C628BF1B707"><!-- --></a>spPathsSRSNSList</dt>
<dd>
<p>If a record type has multiple user-defined spatial reference system namespaces associated with different spatial paths, this parameter specifies the list of spatial reference system namespace information corresponding to the different spatial paths specified during type registration. It is an object of type MDSYS.STRINGLISTLIST, which is defined as <code>VARRAY(1000000) OF MDSYS.STRINGLIST</code>, and where MDSYS.STRINGLIST is defined as <code>VARRAY(1000000) OF VARCHAR2(4000)</code>. If a record type does not have multiple user-defined spatial reference system namespaces associated with different spatial columns, this parameter should be null.</p>
<p>In each MDSYS.STRINGLIST object, the first element is the spatial reference system namespace, and second element is the spatial reference system namespace alias (if any).</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Usage Notes</p>
</div>
<!-- class="section" -->
<div class="section">
<p>This function parses the non-GML spatial content and returns an object of type MDSYS.SDO_GEOM_PATH_INFO, which is defined as follows:</p>
<pre dir="ltr">(path     MDSYS.STRINGLIST,
 geom     SDO_GEOMETRY,
 arrindex NUMBER)
</pre>
<p>The <code>path</code> attribute specifies path to the spatial content that is to be extracted and stored in the <code>geom</code> attribute. It is an object of MDSYS.STRINGLIST, which is defined as: <code>VARRAY(1000000) OF VARCHAR2(4000)</code>. The path attribute has the following pattern: <code>MDSYS.STRINGLIST(&#39;pe_namespace1&#39;,&#39;pe_name1&#39;, &#39;pe_namespace2&#39;,&#39;pe_name2&#39;,...);</code> where:</p>
<ul style="list-style-type: disc;">
<li>
<p><code>pe_namespace1</code> is the namespace of the first path element.</p>
</li>
<li>
<p><code>pe_name1</code> is the name of the first path element.</p>
</li>
<li>
<p><code>pe_namespace2</code> is the namespace of the second path element.</p>
</li>
<li>
<p><code>pe_name2</code> is the name of the second path element.</p>
</li>
<li>
<p>and so on, for any remaining namespace and name pairs.</p>
</li>
</ul>
<p>In the path, <code>/typeNameNSAlias:typeName/pe_namespace1_Alias:pe_name1/pe_namespace2_Alias:pe_name2...</code> is an XPath representation of spatial content, in non-GML format, that will be extracted by the user-defined function <code>extractSDO</code>:</p>
<ul style="list-style-type: disc;">
<li>
<p><code>typeNameNSAlias</code> is an alias to record type name namespace.</p>
</li>
<li>
<p><code>typeName</code> is the type name of the record type.</p>
</li>
<li>
<p><code>pe_namespace1_Alias</code> is a namespace alias for namespace <code>pe_namespace1</code></p>
</li>
<li>
<p><code>pe_namespace2_Alias</code> is a namespace alias for namespace <code>pe_namespace2</code>.</p>
</li>
</ul>
<p>The <code>geom</code> attribute is the spatial content (corresponding to the <code>path</code> parameter) extracted as an SDO_GEOMETRY object. The extracted geometry can then be indexed using a spatial index.</p>
<p>The <code>arrindex</code> attribute is not currently used, and should be set to 1. (It is reserved for future use as an array index of paths.)</p>
</div>
<!-- class="section" --></div>
<a id="SPATL962"></a>
<div class="props_rev_3"><a id="GUID-E7BADAD5-10FE-4FDA-814E-FD41EC768B4A"></a>
<h3 id="SPATL-GUID-E7BADAD5-10FE-4FDA-814E-FD41EC768B4A" class="sect3"><span class="enumeration_section">16.2.2.1</span> Registering and Unregistering the extractSDO Function</h3>
<div>
<p>After you create the <code>extractSDO</code> function, you must register it to enable it to be used for processing spatial path content in record types that is not in GML format. To register the function, call the <a href="sdo_csw_process-insertpluginmap.htm">SDO_CSW_PROCESS.InsertPluginMap</a> procedure. For example:</p>
<pre dir="ltr">BEGIN
  SDO_CSW_PROCESS.insertPluginMap(&#39;http://www.opengis.net/cat/csw&#39;,
    &#39;Record&#39;, &#39;csw_admin_usr.csw_RT_1_package&#39;);
END;
/
</pre>
<p>If you no longer want the <code>extractSDO</code> function to be used for processing spatial path content that is not in GML format, you can unregister the function by calling the <a href="sdo_csw_process-deletepluginmap.htm">SDO_CSW_PROCESS.DeletePluginMap</a> procedure. For example:</p>
<pre dir="ltr">BEGIN
  SDO_CSW_PROCESS.deletePluginMap(&#39;http://www.opengis.net/cat/csw&#39;, 
    &#39;Record&#39;);
END;
/
</pre></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment142">
<tr>
<td class="cellalignment149">
<table class="cellalignment147">
<tr>
<td class="cellalignment146"><a href="csw-engine-and-architecture.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment146"><a href="csw-operations-requests-and-responses-xml-examples.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment151">
<table class="cellalignment145">
<tr>
<td class="cellalignment146"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment146"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment146"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment146"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment146"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment146"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>