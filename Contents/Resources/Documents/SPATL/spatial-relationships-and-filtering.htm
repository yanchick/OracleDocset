<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-101938"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Spatial%20Relationships%20and%20Filtering"></a><title>Spatial Relationships and Filtering</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-01-26T11:46:57Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Spatial and Graph Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49172-07"/>
<meta name="dcterms.isVersionOf" content="SPATL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="indexing-spatial-data.htm" title="Previous" type="text/html"/>
<link rel="Next" href="spatial-operators_-procedures_-and-functions.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49172-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-FA71CB03-FFF0-4529-BA07-AD0605DA7A89"></a> <span id="PAGE" style="display:none;">16/475</span> <!-- End Header -->
<a id="SPATL461"></a><a id="SPATL462"></a><a id="SPATL463"></a><a id="SPATL460"></a>
<h1 id="SPATL-GUID-FA71CB03-FFF0-4529-BA07-AD0605DA7A89" class="sect1"><span class="enumeration_section">1.8</span> Spatial Relationships and Filtering</h1>
<div>
<p>Spatial and Graph uses secondary filters to determine the spatial relationship between entities in the database. The spatial relationship is based on geometry locations. The most common spatial relationships are based on topology and distance. <a id="d11041e46" class="indexterm-anchor"></a>For example, the <span class="italic">boundary</span> of an area consists of a set of curves that separates the area from the rest of the coordinate space. <a id="d11041e54" class="indexterm-anchor"></a>The <span class="italic">interior</span> of an area consists of all points in the area that are not on its boundary. Given this, two areas are said to be adjacent if they share part of a boundary but do not share any points in their interior.</p>
<p>The distance between two spatial objects is the minimum distance between any points in them. Two objects are said to be <span class="italic">within a given distance</span> of one another if their distance is less than the given distance.</p>
<p>To determine spatial relationships, Spatial and Graph has several secondary filter methods:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <a href="sdo_relate.htm">SDO_RELATE</a> operator evaluates topological criteria.</p>
</li>
<li>
<p>The <a href="sdo_within_distance.htm">SDO_WITHIN_DISTANCE</a> operator determines if two spatial objects are within a specified distance of each other.</p>
</li>
<li>
<p>The <a href="sdo_nn.htm">SDO_NN</a> operator identifies the nearest neighbors for a spatial object.</p>
</li>
</ul>
<p>The syntax of these operators is given in <a href="spatial-operators.htm">Spatial Operators</a> .</p>
<p>The <a href="sdo_relate.htm">SDO_RELATE</a> operator implements a nine-intersection model for categorizing binary topological relationships between points, lines, and polygons. Each spatial object has an interior, a boundary, and an exterior. <a id="d11041e103" class="indexterm-anchor"></a><a id="d11041e107" class="indexterm-anchor"></a>The boundary consists of points or lines that separate the interior from the exterior. The boundary of a line string consists of its end points; however, if the end points overlap (that is, if they are the same point), the line string has no boundary. <a id="d11041e112" class="indexterm-anchor"></a><a id="d11041e116" class="indexterm-anchor"></a>The boundaries of a multiline string are the end points of each of the component line strings; however, if the end points overlap, only the end points that overlap an odd number of times are boundaries. <a id="d11041e121" class="indexterm-anchor"></a><a id="d11041e125" class="indexterm-anchor"></a>The boundary of a polygon is the line that describes its perimeter. The interior consists of points that are in the object but not on its boundary, and the exterior consists of those points that are not in the object and are not on its boundary.</p>
<p>Given that an object A has three components (a boundary Ab, an interior Ai, and an exterior Ae), any pair of objects has nine possible interactions between their components. Pairs of components have an empty (0) or not empty (1) set intersection. The set of interactions between two geometries is represented by a nine-intersection matrix that specifies which pairs of components intersect and which do not. <a href="spatial-relationships-and-filtering.htm#GUID-FA71CB03-FFF0-4529-BA07-AD0605DA7A89__I879003">Figure 1-5</a> shows the nine-intersection matrix for two polygons that are adjacent to one another. This matrix yields the following bit mask, generated in row-major form: &#34;101001111&#34;.</p>
<div class="figure" id="GUID-FA71CB03-FFF0-4529-BA07-AD0605DA7A89__I879003">
<p class="titleinfigure">Figure 1-5 The Nine-Intersection Model</p>
<img width="350" height="150" src="img/nine_inter.gif" alt="Description of Figure 1-5 follows" title="Description of Figure 1-5 follows"/><br/>
<a href="img_text/nine_inter.htm">Description of &#34;Figure 1-5 The Nine-Intersection Model&#34;</a></div>
<!-- class="figure" -->
<p>Some of the topological relationships identified in the seminal work by Professor Max Egenhofer (University of Maine, Orono) and colleagues have names associated with them. Spatial and Graph uses the following names:</p>
<ul style="list-style-type: disc;">
<li>
<p><a id="d11041e144" class="indexterm-anchor"></a>DISJOINT: The boundaries and interiors do not intersect.</p>
</li>
<li>
<p><a id="d11041e151" class="indexterm-anchor"></a>TOUCH: The boundaries intersect but the interiors do not intersect.</p>
</li>
<li>
<p><a id="d11041e158" class="indexterm-anchor"></a>OVERLAPBDYDISJOINT: The interior of one object intersects the boundary and interior of the other object, but the two boundaries do not intersect. This relationship occurs, for example, when a line originates outside a polygon and ends inside that polygon.</p>
</li>
<li>
<p><a id="d11041e165" class="indexterm-anchor"></a>OVERLAPBDYINTERSECT: The boundaries and interiors of the two objects intersect.</p>
</li>
<li>
<p><a id="d11041e172" class="indexterm-anchor"></a>EQUAL: The two objects have the same boundary and interior.</p>
</li>
<li>
<p><a id="d11041e179" class="indexterm-anchor"></a>CONTAINS: The interior and boundary of one object is completely contained in the interior of the other object.</p>
</li>
<li>
<p><a id="d11041e186" class="indexterm-anchor"></a>COVERS: The boundary and interior of one object is completely contained in the interior or the boundary of the other object, their interiors intersect, and the boundary or the interior of one object and the boundary of the other object intersect.</p>
</li>
<li>
<p><a id="d11041e193" class="indexterm-anchor"></a>INSIDE: The opposite of CONTAINS. A INSIDE B implies B CONTAINS A.</p>
</li>
<li>
<p><a id="d11041e200" class="indexterm-anchor"></a>COVEREDBY: The opposite of COVERS. A COVEREDBY B implies B COVERS A.</p>
</li>
<li>
<p><a id="d11041e207" class="indexterm-anchor"></a>ON: The interior and boundary of one object is on the boundary of the other object. This relationship occurs, for example, when a line is on the boundary of a polygon.</p>
</li>
<li>
<p><a id="d11041e214" class="indexterm-anchor"></a><a id="d11041e218" class="indexterm-anchor"></a>ANYINTERACT: The objects are non-disjoint.</p>
</li>
</ul>
<p><a href="spatial-relationships-and-filtering.htm#GUID-FA71CB03-FFF0-4529-BA07-AD0605DA7A89__I883562">Figure 1-6</a> illustrates these topological relationships.</p>
<div class="figure" id="GUID-FA71CB03-FFF0-4529-BA07-AD0605DA7A89__I883562">
<p class="titleinfigure">Figure 1-6 Topological Relationships</p>
<img width="343" height="270" src="img/top_rel.gif" alt="Description of Figure 1-6 follows" title="Description of Figure 1-6 follows"/><br/>
<a href="img_text/top_rel.htm">Description of &#34;Figure 1-6 Topological Relationships&#34;</a></div>
<!-- class="figure" -->
<p>The <a href="sdo_within_distance.htm">SDO_WITHIN_DISTANCE</a> operator determines if two spatial objects, A and B, are within a specified distance of one another. This operator first constructs a distance buffer, D<sub>b</sub>, around the reference object B. It then checks that A and D<sub>b</sub> are non-disjoint. The distance buffer of an object consists of all points within the given distance from that object. <a href="spatial-relationships-and-filtering.htm#GUID-FA71CB03-FFF0-4529-BA07-AD0605DA7A89__I878990">Figure 1-7</a> shows the distance buffers for a point, a line, and a polygon.</p>
<div class="figure" id="GUID-FA71CB03-FFF0-4529-BA07-AD0605DA7A89__I878990">
<p class="titleinfigure">Figure 1-7 Distance Buffers for Points, Lines, and Polygons</p>
<img width="326" height="104" src="img/buffers.gif" alt="Description of Figure 1-7 follows" title="Description of Figure 1-7 follows"/><br/>
<a href="img_text/buffers.htm">Description of &#34;Figure 1-7 Distance Buffers for Points, Lines, and Polygons&#34;</a></div>
<!-- class="figure" -->
<p>In the point, line, and polygon geometries shown in <a href="spatial-relationships-and-filtering.htm#GUID-FA71CB03-FFF0-4529-BA07-AD0605DA7A89__I878990">Figure 1-7</a>:</p>
<ul style="list-style-type: disc;">
<li>
<p>The dashed lines represent distance buffers. Notice how the buffer is rounded near the corners of the objects.</p>
</li>
<li>
<p>The geometry on the right is a polygon with a hole: the large rectangle is the exterior polygon ring and the small rectangle is the interior polygon ring (the hole). The dashed line outside the large rectangle is the buffer for the exterior ring, and the dashed line inside the small rectangle is the buffer for the interior ring.</p>
</li>
</ul>
<p>The <a href="sdo_nn.htm">SDO_NN</a> operator returns a specified number of objects from a geometry column that are closest to a specified geometry (for example, the five closest restaurants to a city park). In determining how close two geometry objects are, the shortest possible distance between any two points on the surface of each object is used.</p>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment142">
<tr>
<td class="cellalignment149">
<table class="cellalignment147">
<tr>
<td class="cellalignment146"><a href="indexing-spatial-data.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment146"><a href="spatial-operators_-procedures_-and-functions.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment151">
<table class="cellalignment145">
<tr>
<td class="cellalignment146"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment146"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment146"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment146"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment146"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment146"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>