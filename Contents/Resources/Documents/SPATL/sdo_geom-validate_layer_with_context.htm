<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-101220"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/SDO_GEOM.VALIDATE_LAYER_WITH_CONTEXT"></a><title>SDO_GEOM.VALIDATE_LAYER_WITH_CONTEXT</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="VALIDATE_LAYER_WITH_CONTEXT procedure, layer, validating with context, SDO_GEOM package, VALIDATE_LAYER_WITH_CONTEXT"/>
<meta name="dcterms.created" content="2017-01-26T11:46:57Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Spatial and Graph Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49172-07"/>
<meta name="dcterms.isVersionOf" content="SPATL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="sdo_geom-validate_geometry_with_context.htm" title="Previous" type="text/html"/>
<link rel="Next" href="sdo_geom-within_distance.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49172-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-D909C540-8CED-453D-AEA6-0212D09F1781"></a> <span id="PAGE" style="display:none;">302/475</span> <!-- End Header -->
<a id="SPATL1132"></a>
<h1 id="SPATL-GUID-D909C540-8CED-453D-AEA6-0212D09F1781" class="sect1"><span class="enumeration_section">23.34</span> SDO_GEOM.VALIDATE_LAYER_WITH_CONTEXT</h1>
<div>
<div class="section">
<p class="subhead1">Format</p>
<pre dir="ltr">SDO_GEOM.VALIDATE_LAYER_WITH_CONTEXT(     
  geom_table      IN VARCHAR2,      
  geom_column     IN VARCHAR2,      
  result_table    IN VARCHAR2,      
  commit_interval IN NUMBER DEFAULT -1,       
  conditional     IN VARCHAR2 DEFAULT &#39;TRUE&#39; ,      
  flag10g         IN VARCHAR2 DEFAULT &#39;FALSE&#39;,      
  geom_schema     IN VARCHAR2 DEFAULT NULL); 
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Description</p>
<p>Examines a geometry column to determine if the stored geometries follow the defined rules for geometry objects, and returns context information about any invalid geometries.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101213"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D909C540-8CED-453D-AEA6-0212D09F1781__GUID-AD99FBED-70B1-47ED-8D03-FCC0B5818E28"><!-- --></a>geom_table</dt>
<dd>
<p>Spatial geometry table. Can be specified in <span class="italic">schema.table</span> format (for example, <code>scott.shapes</code>), unless the <code>geom_schema</code> parameter is specified.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101214"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D909C540-8CED-453D-AEA6-0212D09F1781__GUID-7BA06FFE-B2A5-47F1-97CB-A0BA92C54BA2"><!-- --></a>geom_column</dt>
<dd>
<p>Geometry object column to be examined.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101215"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D909C540-8CED-453D-AEA6-0212D09F1781__GUID-99131DB3-413D-459B-B1A5-6715781D8997"><!-- --></a>result_table</dt>
<dd>
<p>Result table to hold the validation results. A row is added to <code>result_table</code> for each invalid geometry. If there are no invalid geometries, one or more (depending on the <code>commit_interval</code> value) rows with a result of DONE are added.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101216"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D909C540-8CED-453D-AEA6-0212D09F1781__GUID-56BCAACB-3541-4565-B482-6C03C2413654"><!-- --></a>commit_interval</dt>
<dd>
<p>Number of geometries to validate before Spatial and Graph performs an internal commit operation and writes a row with a result of DONE to <code>result_table</code> (if no rows for invalid geometries have been written since the last commit operation). If <code>commit_interval</code> is not specified, no internal commit operations are performed during the validation.</p>
<p>The <code>commit_interval</code> option is helpful if you want to look at the contents of <code>result_table</code> while the validation is in progress.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101217"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D909C540-8CED-453D-AEA6-0212D09F1781__GUID-A69CF698-DEE5-4CD1-B61D-DD97B1360C03"><!-- --></a>conditional</dt>
<dd>
<p>Conditional flag; relevant only for a three-dimensional composite surface or composite solid. A string value of <code>TRUE</code> (the default) causes validation to fail if two outer rings are on the same plane and share an edge; a string value of <code>FALSE</code> does not cause validation to fail if two outer rings are on the same plane and share an edge.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101218"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D909C540-8CED-453D-AEA6-0212D09F1781__GUID-7A0875B4-5701-4D9E-81EA-EC8040C59D3D"><!-- --></a>flag10g</dt>
<dd>
<p>Oracle Database 10<span class="italic">g</span> compatibility flag. A string value of <code>TRUE</code> causes only validation checks specific to two-dimensional geometries to be performed, and no 3D-specific validation checks to be performed. A string value of <code>FALSE</code> (the default) performs all validation checks that are relevant for the geometries. (See the Usage Notes for the <a href="sdo_geom-validate_geometry_with_context.htm">SDO_GEOM.VALIDATE_GEOMETRY_WITH_CONTEXT</a> function for more information about the <code>flag10g</code> parameter.)</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101219"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-D909C540-8CED-453D-AEA6-0212D09F1781__GUID-528B35FA-0435-46BC-8809-2C97BCBC8278"><!-- --></a>geom_schema</dt>
<dd>
<p>Specifies the schema of the <code>geom_table</code> table, if it differs from the current schema. If <code>geom_schema</code> is specified, the <code>geom_table</code> parameter cannot be specified in <span class="italic">schema.tabl</span>e format.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Usage Notes</p>
<p>You should validate all geometry data, and fix any validation errors, before performing any spatial operations on the data, as explained in <a href="recommendations-loading-and-validating-spatial-data.htm">Recommendations for Loading and Validating Spatial Data</a>.</p>
<p>This procedure loads the result table with validation results.</p>
<p>An empty result table (<code>result_table</code> parameter) should be created before calling this procedure. The format of the result table is: (sdo_rowid ROWID, result VARCHAR2(2000)). If <code>result_table</code> is not empty, it is automatically truncated by the procedure before any rows are added.</p>
<p>The result table contains one row for each invalid geometry. A row is not written if a geometry is valid, except as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>If <code>commit_interval</code> is not specified (or if the <code>commit_interval</code> value is greater than the number of geometries in the layer) and no invalid geometries are found, a single row with a RESULT value of DONE is written.</p>
</li>
<li>
<p>If <code>commit_interval</code> is specified and if no invalid geometries are found between an internal commit and the previous internal commit (or start of validation for the first internal commit), a single row with the primary key of the last geometry validated and a RESULT value of DONE is written. (If there have been no invalid geometries since the last internal commit operation, this row replaces the previous row that had a result of DONE.)</p>
</li>
</ul>
<p>In each row for an invalid geometry, the SDO_ROWID column contains the ROWID value of the row containing the invalid geometry, and the RESULT column contains an Oracle error message number and the context of the error (the coordinate, edge, or ring that causes the geometry to be invalid). You can then look up the error message for more information about the cause of the failure.</p>
<p>This procedure performs the following checks on each geometry in the layer (<code>geom_column</code>):</p>
<ul style="list-style-type: disc;">
<li>
<p>All type consistency and geometry consistency checks that are performed by the <a href="sdo_geom-validate_geometry_with_context.htm">SDO_GEOM.VALIDATE_GEOMETRY_WITH_CONTEXT</a> function (see the Usage Notes for that function).</p>
</li>
<li>
<p>The geometry&#39;s SRID value (coordinate system) is the same as the one specified in the applicable DIMINFO column value (from the USER_SDO_GEOM_METADATA view, which is described in <a href="geometry-metadata-views.htm#GUID-AEA8FA01-880B-4865-8074-3B6FBD17A5E1">Geometry Metadata Views</a>).</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Examples</p>
<p>The following example validates the geometry objects stored in the SHAPE column of the COLA_MARKETS table. The example includes the creation of the result table. For this example, a deliberately invalid geometry was inserted into the table before the validation was performed.</p>
<pre dir="ltr">-- Is a layer valid? (First, create the result table.)
CREATE TABLE val_results (sdo_rowid ROWID, result varchar2(1000));
-- (Next statement must be on one command line.)
CALL SDO_GEOM.VALIDATE_LAYER_WITH_CONTEXT(&#39;COLA_MARKETS&#39;,&#39;SHAPE&#39;,&#39;VAL_RESULTS&#39;);

Call completed.

SQL&gt; SELECT * from val_results;

SDO_ROWID                                                                       
------------------                                                              
RESULT                                                                          
--------------------------------------------------------------------------------
                                                                                
Rows Processed &lt;12&gt;                                                             
                                                                                
AAABXNAABAAAK+YAAC                                                              
13349 [Element &lt;1&gt;] [Ring &lt;1&gt;][Edge &lt;1&gt;][Edge &lt;3&gt;] 
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Related Topics</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="sdo_geom-validate_geometry_with_context.htm">SDO_GEOM.VALIDATE_GEOMETRY_WITH_CONTEXT</a></p>
</li>
<li>
<p><a href="sdo_geom-sdo_self_union.htm">SDO_GEOM.SDO_SELF_UNION</a></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment142">
<tr>
<td class="cellalignment149">
<table class="cellalignment147">
<tr>
<td class="cellalignment146"><a href="sdo_geom-validate_geometry_with_context.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment146"><a href="sdo_geom-within_distance.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment151">
<table class="cellalignment145">
<tr>
<td class="cellalignment146"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment146"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment146"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment146"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment146"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment146"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>