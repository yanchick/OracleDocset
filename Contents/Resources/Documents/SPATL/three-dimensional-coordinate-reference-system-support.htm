<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-101952"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Three-Dimensional%20Coordinate%20Reference%20System%20Support"></a><title>Three-Dimensional Coordinate Reference System Support</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-01-26T11:46:57Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Spatial and Graph Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49172-07"/>
<meta name="dcterms.isVersionOf" content="SPATL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="epsg-model-and-spatial-and-graph.htm" title="Previous" type="text/html"/>
<link rel="Next" href="tfm_plan-object-type.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49172-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-15FBE081-AD2E-4316-84A7-14BCDD25C7AF"></a> <span id="PAGE" style="display:none;">88/475</span> <!-- End Header -->
<a id="SPATL626"></a>
<h1 id="SPATL-GUID-15FBE081-AD2E-4316-84A7-14BCDD25C7AF" class="sect1"><span class="enumeration_section">6.5</span> Three-Dimensional Coordinate Reference System Support</h1>
<div>
<p>The Oracle Spatial and Graph support for three-dimensional coordinate reference systems complies with the EPSG model (described in <a href="epsg-model-and-spatial-and-graph.htm">EPSG Model and Spatial and Graph</a>), which provides the following types of coordinate reference systems:</p>
<ul style="list-style-type: disc;">
<li>
<p>Geographic 2D</p>
</li>
<li>
<p>Projected 2D</p>
</li>
<li>
<p>Geographic 3D, which consists of Geographic 2D plus ellipsoidal height, with longitude, latitude, and height based on the same ellipsoid and datum</p>
</li>
<li>
<p>Compound, which consists of either Geographic 2D plus gravity-related height or Projected 2D plus gravity-related height</p>
</li>
</ul>
<p>Thus, there are two categories of three-dimensional coordinate reference systems: those based on ellipsoidal height (geographic 3D, described in <a href="three-dimensional-coordinate-reference-system-support.htm#GUID-4ED4EE10-5AEA-4EA5-B60B-9449A35608E3">Geographic 3D Coordinate Reference Systems</a>) and those based on gravity-related height (compound, described in <a href="three-dimensional-coordinate-reference-system-support.htm#GUID-7E94E95C-7B5A-485C-A0F8-102363162393">Compound Coordinate Reference Systems</a>).</p>
<p>Three-dimensional computations are more accurate than their two-dimensional equivalents, particularly when they are chained: For example, datum transformations internally always are performed in three dimensions, regardless of the dimensionality of the source and target CRS and geometries. When two-dimensional geometries are involved, one or more of the following can occur:</p>
<ol>
<li>
<p>When the input or output geometries and CRS are two-dimensional, the (unspecified) input height defaults to zero (above the ellipsoid, depending on the CRS) for any internal three-dimensional computations. This is a potential source of inaccuracy, unless the height was intended to be exactly zero. (Data can be two-dimensional because height values were originally either unavailable or not considered important; this is different from representing data in two dimensions because heights are known to be exactly zero.</p>
</li>
<li>
<p>The transformation might then internally result in a non-zero height. Since the two-dimensional target CRS cannot accommodate the height value, the height value must be truncated, resulting in further inaccuracy.</p>
</li>
<li>
<p>If further transformations are chained, the repeated truncation of height values can result in increasing inaccuracies. Note that an inaccurate input height can affect not only the output height of a transformation, but also the longitude and latitude.</p>
</li>
</ol>
<p>However, if the source and target CRS are three-dimensional, there is no repeated truncation of heights. Consequently, accuracy is increased, particularly for transformation chains.</p>
<p>For an introduction to support in Spatial and Graph for three-dimensional geometries, see <a href="three-dimensional-spatial-objects.htm">Three-Dimensional Spatial Objects</a>.</p>
</div>
<a id="SPATL627"></a>
<div class="props_rev_3"><a id="GUID-4ED4EE10-5AEA-4EA5-B60B-9449A35608E3"></a>
<h2 id="SPATL-GUID-4ED4EE10-5AEA-4EA5-B60B-9449A35608E3" class="sect2"><span class="enumeration_section">6.5.1</span> Geographic 3D Coordinate Reference Systems</h2>
<div>
<p><a id="d38498e134" class="indexterm-anchor"></a><a id="d38498e136" class="indexterm-anchor"></a>A geographic three-dimensional coordinate reference system is based on longitude and latitude, plus ellipsoidal height. The <span class="bold">ellipsoidal height</span> is the height relative to a reference ellipsoid, which is an approximation of the real Earth. All three dimensions of the CRS are based on the same ellipsoid.</p>
<p>Using ellipsoidal heights enables Spatial and Graph to perform internal operations with great mathematical regularity and efficiency. Compound coordinate reference systems, on the other hand, require more complex transformations, often based on offset matrixes. Some of these matrixes have to be downloaded and configured. Furthermore, they might have a significant footprint, on disk and in main memory.</p>
<p>The supported geographic 3D coordinate reference systems are listed in the SDO_CRS_GEOGRAPHIC3D view, described in <a href="coordinate-systems-data-structures.htm#GUID-E2BC0A95-DA83-4870-B642-86CBEFDB51D1">SDO_CRS_GEOGRAPHIC3D View</a>.</p>
</div>
</div>
<a id="SPATL628"></a>
<div class="props_rev_3"><a id="GUID-7E94E95C-7B5A-485C-A0F8-102363162393"></a>
<h2 id="SPATL-GUID-7E94E95C-7B5A-485C-A0F8-102363162393" class="sect2"><span class="enumeration_section">6.5.2</span> Compound Coordinate Reference Systems</h2>
<div>
<p><a id="d38498e196" class="indexterm-anchor"></a><a id="d38498e198" class="indexterm-anchor"></a><a id="d38498e202" class="indexterm-anchor"></a>A compound three-dimensional coordinate reference system is based on a geographic or projected two-dimensional system, plus gravity-related height. <span class="bold">Gravity-related</span> height is the height as influenced by the Earth&#39;s gravitational force, where the base height (zero) is often an equipotential surface, and might be defined as above or below &#34;sea level.&#34;</p>
<p>Gravity-related height is a more complex representation than ellipsoidal height, because of gravitational irregularities such as the following:</p>
<ul style="list-style-type: disc;">
<li>
<p><a id="d38498e215" class="indexterm-anchor"></a>Orthometric height</p>
<p>Orthometric height is also referred to as the height above the geoid. The geoid is an equipotential surface that most closely (but not exactly) matches mean sea level. An equipotential surface is a surface on which each point is at the same gravitational potential level. Such a surface tends to undulate slightly, because the Earth has regions of varying density. There are multiple equipotential surfaces, and these might not be parallel to each other due to the irregular density of the Earth.</p>
</li>
<li>
<p>Height relative to mean sea level, to sea level at a specific location, or to a vertical network warped to fit multiple tidal stations (for example, NGVD 29)</p>
<p>Sea level is close to, but not identical to, the geoid. The sea level at a given location is often defined based on the &#34;average sea level&#34; at a specific port.</p>
</li>
</ul>
<p>The supported compound coordinate reference systems are listed in the SDO_CRS_COMPOUND view, described in <a href="coordinate-systems-data-structures.htm#GUID-03811D75-CB44-433E-8F2E-53B28BFD5243">SDO_CRS_COMPOUND View</a>.</p>
<p>You can create a customized compound coordinate reference system, which combines a horizontal CRS with a vertical CRS. (The <span class="italic">horizontal</span> CRS contains two dimensions, such as X and Y or longitude and latitude, and the <span class="italic">vertical</span> CRS contains the third dimension, such as Z or height or altitude.) <a href="creating-user-defined-coordinate-reference-system.htm#GUID-738A0960-F73F-41F4-A0B3-234B6884B331">Creating a Compound CRS</a> explains how to create a compound CRS.</p>
</div>
</div>
<a id="SPATL630"></a><a id="SPATL631"></a><a id="SPATL629"></a>
<div class="props_rev_3"><a id="GUID-A029BD72-1D0C-429C-AB08-D0014AB5CCE4"></a>
<h2 id="SPATL-GUID-A029BD72-1D0C-429C-AB08-D0014AB5CCE4" class="sect2"><span class="enumeration_section">6.5.3</span> Three-Dimensional Transformations</h2>
<div>
<p>Spatial and Graph supports three-dimensional coordinate transformations for SDO_GEOMETRY objects directly, and indirectly for point clouds and TINs. (For example, a point cloud must be transformed to a table with an SDO_GEOMETRY column.) The supported transformations include the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Three-dimensional datum transformations</p>
</li>
<li>
<p>Transformations between ellipsoidal and gravity-related height</p>
</li>
</ul>
<p>For three-dimensional datum transformations, the datum transformation between the two ellipsoids is essentially the same as for two-dimensional coordinate reference systems, except that the third dimension is considered instead of ignored. Because height values are not ignored, the accuracy of the results increases, especially for transformation chains.</p>
<p>For transformations between ellipsoidal and gravity-related height, computations are complicated by the fact that equipotential and other gravity-related surfaces tend to undulate, compared to any ellipsoid and to each other. Transformations might be based on higher-degree polynomial functions or bilinear interpolation. In either case, a significant parameter matrix is required to define the transformation.</p>
<p>For transforming between gravity-related and ellipsoidal height, the process usually involves a transformation, based on an offset matrix, between geoidal and ellipsoidal height. Depending on the source or target definition of the offset matrix, a common datum transformation might have to be appended or prefixed.</p>
<div class="example" id="GUID-A029BD72-1D0C-429C-AB08-D0014AB5CCE4__CIHFHAAC">
<p class="titleinexample">Example 6-2 Three-Dimensional Datum Transformation</p>
<p><a href="three-dimensional-coordinate-reference-system-support.htm#GUID-A029BD72-1D0C-429C-AB08-D0014AB5CCE4__CIHFHAAC">Example 6-2</a> shows a three-dimensional datum transformation.</p>
<pre dir="ltr">set numwidth 9
 
CREATE TABLE source_geoms (
  mkt_id NUMBER PRIMARY KEY,
  name VARCHAR2(32),
  GEOMETRY SDO_GEOMETRY);
 
INSERT INTO source_geoms VALUES(
  1,
  &#39;reference geom&#39;,
  SDO_GEOMETRY(
  3001,
  4985,
  SDO_POINT_TYPE(
     4.0,
    55.0,
    1.0),
  NULL,
  NULL));
 
INSERT INTO USER_SDO_GEOM_METADATA VALUES (
  &#39;source_geoms&#39;,
  &#39;GEOMETRY&#39;,
  SDO_DIM_ARRAY(
    SDO_DIM_ELEMENT(&#39;Longitude&#39;, -180, 180, 10),
    SDO_DIM_ELEMENT(&#39;Latitude&#39;,   -90,  90, 10),
    SDO_DIM_ELEMENT(&#39;Height&#39;,   -1000,1000, 10)),
  4985);
 
commit;
 
--------------------------------------------------------------------------------
 
CALL SDO_CS.TRANSFORM_LAYER(
  &#39;source_geoms&#39;,
  &#39;GEOMETRY&#39;,
  &#39;GEO_CS_4979&#39;,
  4979);
 
INSERT INTO USER_SDO_GEOM_METADATA VALUES (
  &#39;GEO_CS_4979&#39;,
  &#39;GEOMETRY&#39;,
  SDO_DIM_ARRAY(
    SDO_DIM_ELEMENT(&#39;Longitude&#39;, -180, 180, 10),
    SDO_DIM_ELEMENT(&#39;Latitude&#39;,   -90,  90, 10),
    SDO_DIM_ELEMENT(&#39;Height&#39;,   -1000,1000, 10)),
  4979);
 
set lines 210;
 
--------------------------------------------------------------------------------
 
CALL SDO_CS.TRANSFORM_LAYER(
  &#39;GEO_CS_4979&#39;,
  &#39;GEOMETRY&#39;,
  &#39;source_geoms2&#39;,
  4985);
 
INSERT INTO USER_SDO_GEOM_METADATA VALUES (
  &#39;source_geoms2&#39;,
  &#39;GEOMETRY&#39;,
  SDO_DIM_ARRAY(
    SDO_DIM_ELEMENT(&#39;Longitude&#39;, -180, 180, 10),
    SDO_DIM_ELEMENT(&#39;Latitude&#39;,   -90,  90, 10),
    SDO_DIM_ELEMENT(&#39;Height&#39;,   -1000,1000, 10)),
  4985);
 
--------------------------------------------------------------------------------
 
DELETE FROM USER_SDO_GEOM_METADATA WHERE table_name = &#39;GEO_CS_4979&#39;;
DELETE FROM USER_SDO_GEOM_METADATA WHERE table_name = &#39;SOURCE_GEOMS&#39;;
DELETE FROM USER_SDO_GEOM_METADATA WHERE table_name = &#39;SOURCE_GEOMS2&#39;;
 
drop table GEO_CS_4979;
drop table source_geoms;
drop table source_geoms2;
</pre>
<p>As a result of the transformation in <a href="three-dimensional-coordinate-reference-system-support.htm#GUID-A029BD72-1D0C-429C-AB08-D0014AB5CCE4__CIHFHAAC">Example 6-2</a>, (4, 55, 1) is transformed to (4.0001539, 55.0000249, 4.218).</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-A029BD72-1D0C-429C-AB08-D0014AB5CCE4__CIHIBAGI">
<p class="titleinexample">Example 6-3 Transformation Between Geoidal And Ellipsoidal Height</p>
<p><a href="three-dimensional-coordinate-reference-system-support.htm#GUID-A029BD72-1D0C-429C-AB08-D0014AB5CCE4__CIHIBAGI">Example 6-3</a> configures a transformation between geoidal and ellipsoidal height, using a Hawaii offset grid. Note that without the initial creation of a rule (using the <a href="sdo_cs-create_pref_concatenated_op.htm">SDO_CS.CREATE_PREF_CONCATENATED_OP</a> procedure), the grid would not be used.</p>
<pre dir="ltr">-- Create Sample operation:
insert into mdsys.sdo_coord_ops (
  COORD_OP_ID,
  COORD_OP_NAME,
  COORD_OP_TYPE,
  SOURCE_SRID,
  TARGET_SRID,
  COORD_TFM_VERSION,
  COORD_OP_VARIANT,
  COORD_OP_METHOD_ID,
  UOM_ID_SOURCE_OFFSETS,
  UOM_ID_TARGET_OFFSETS,
  INFORMATION_SOURCE,
  DATA_SOURCE,
  SHOW_OPERATION,
  IS_LEGACY,
  LEGACY_CODE,
  REVERSE_OP,
  IS_IMPLEMENTED_FORWARD,
  IS_IMPLEMENTED_REVERSE)
values (
  1000000005,
  &#39;Test Bi-linear Interpolation&#39;,
  &#39;CONVERSION&#39;,
  null,
  null,
  null,
  null,
  9635,
  null,
  null,
  &#39;Oracle&#39;,
  &#39;Oracle&#39;,
  1,
  &#39;FALSE&#39;,
  null,
  1,
  1,
  1);
 
--Create sample parameters, pointing to the offset file
--(in this case reusing values from an existing operation):
insert into mdsys.sdo_coord_op_param_vals (
    coord_op_id,
    COORD_OP_METHOD_ID,
    PARAMETER_ID,
    PARAMETER_VALUE,
    PARAM_VALUE_FILE_REF,
    PARAM_VALUE_FILE,
    PARAM_VALUE_XML,
    UOM_ID) (
  select
    1000000005,
    9635,
    8666,
    PARAMETER_VALUE,
    PARAM_VALUE_FILE_REF,
    PARAM_VALUE_FILE,
    PARAM_VALUE_XML,
    UOM_ID
  from
    mdsys.sdo_coord_op_param_vals
  where
    coord_op_id = 999998 and
    parameter_id = 8666);
 
--Create a rule to use this operation between SRIDs 7406 and 4359: 
call sdo_cs.create_pref_concatenated_op(
    300,
    &#39;CONCATENATED OPERATION&#39;,
    TFM_PLAN(SDO_TFM_CHAIN(7406, 1000000005, 4359)),
    NULL);
 
 
-- Now, actually perform the transformation:
set numformat 999999.99999999
 
-- Create the source table
CREATE TABLE source_geoms (
  mkt_id NUMBER PRIMARY KEY,
  name VARCHAR2(32),
  GEOMETRY SDO_GEOMETRY);
 
INSERT INTO source_geoms VALUES(
  1,
  &#39;reference geom&#39;,
  SDO_GEOMETRY(
  3001,
  7406,
  SDO_POINT_TYPE(
    -161,
      18,
     0),
  NULL,
  NULL));
 
INSERT INTO USER_SDO_GEOM_METADATA VALUES (
  &#39;source_geoms&#39;,
  &#39;GEOMETRY&#39;,
  SDO_DIM_ARRAY(
    SDO_DIM_ELEMENT(&#39;Longitude&#39;, -180, 180, 10),
    SDO_DIM_ELEMENT(&#39;Latitude&#39;,   -90,  90, 10),
    SDO_DIM_ELEMENT(&#39;Height&#39;,    -100, 100, 10)),
  7406);
 
commit;
 
SELECT GEOMETRY &#34;Source&#34; FROM source_geoms;
 
--------------------------------------------------------------------------------
 
--Perform the transformation:
CALL SDO_CS.TRANSFORM_LAYER(
  &#39;source_geoms&#39;,
  &#39;GEOMETRY&#39;,
  &#39;GEO_CS_4359&#39;,
  4359);
 
INSERT INTO USER_SDO_GEOM_METADATA VALUES (
  &#39;GEO_CS_4359&#39;,
  &#39;GEOMETRY&#39;,
  SDO_DIM_ARRAY(
    SDO_DIM_ELEMENT(&#39;Longitude&#39;, -180, 180, 10),
    SDO_DIM_ELEMENT(&#39;Latitude&#39;,   -90,  90, 10),
    SDO_DIM_ELEMENT(&#39;Height&#39;,    -100, 100, 10)),
  4359);
 
set lines 210;
 
SELECT GEOMETRY &#34;Target&#34; FROM GEO_CS_4359;
 
--------------------------------------------------------------------------------
 
--Transform back:
CALL SDO_CS.TRANSFORM_LAYER(
  &#39;GEO_CS_4359&#39;,
  &#39;GEOMETRY&#39;,
  &#39;source_geoms2&#39;,
  7406);
 
INSERT INTO USER_SDO_GEOM_METADATA VALUES (
  &#39;source_geoms2&#39;,
  &#39;GEOMETRY&#39;,
  SDO_DIM_ARRAY(
    SDO_DIM_ELEMENT(&#39;Longitude&#39;, -180, 180, 10),
    SDO_DIM_ELEMENT(&#39;Latitude&#39;,   -90,  90, 10),
    SDO_DIM_ELEMENT(&#39;Height&#39;,    -100, 100, 10)),
  7406);
 
SELECT GEOMETRY &#34;Source2&#34; FROM source_geoms2;
 
--------------------------------------------------------------------------------
 
--Clean up (regarding the transformation):
DELETE FROM USER_SDO_GEOM_METADATA WHERE table_name = &#39;GEO_CS_4359&#39;;
DELETE FROM USER_SDO_GEOM_METADATA WHERE table_name = &#39;SOURCE_GEOMS&#39;;
DELETE FROM USER_SDO_GEOM_METADATA WHERE table_name = &#39;SOURCE_GEOMS2&#39;;
 
drop table GEO_CS_4359;
drop table source_geoms;
drop table source_geoms2;
 
 
--Clean up (regarding the rule):
CALL sdo_cs.delete_op(300);
 
delete from mdsys.sdo_coord_op_param_vals where coord_op_id = 1000000005;
 
delete from mdsys.sdo_coord_ops where coord_op_id = 1000000005;
 
COMMIT;
</pre>
<p>With the configuration in <a href="three-dimensional-coordinate-reference-system-support.htm#GUID-A029BD72-1D0C-429C-AB08-D0014AB5CCE4__CIHIBAGI">Example 6-3</a>:</p>
<ul style="list-style-type: disc;">
<li>
<p>Without the rule, (-161.00000000, 18.00000000, .00000000) is transformed to (-161.00127699, 18.00043360, 62.03196364), based simply on a datum transformation.</p>
</li>
<li>
<p>With the rule, (-161.00000000, 18.00000000, .00000000) is transformed to (-161.00000000, 18.00000000, 6.33070000).</p>
</li>
</ul>
</div>
<!-- class="example" --></div>
</div>
<a id="SPATL633"></a><a id="SPATL632"></a>
<div class="props_rev_3"><a id="GUID-10915EB2-B157-489D-AF74-753660E6FA8B"></a>
<h2 id="SPATL-GUID-10915EB2-B157-489D-AF74-753660E6FA8B" class="sect2"><span class="enumeration_section">6.5.4</span> Cross-Dimensionality Transformations</h2>
<div>
<p>You cannot directly perform a cross-dimensionality transformation (for example, from a two-dimensional geometry to a three-dimensional geometry) using the <a href="sdo_cs-transform.htm">SDO_CS.TRANSFORM</a> function or the <a href="sdo_cs-transform_layer.htm">SDO_CS.TRANSFORM_LAYER</a> procedure. However, you can use the <a href="sdo_cs-make_3d.htm">SDO_CS.MAKE_3D</a> function to convert a two-dimensional geometry to a three-dimensional geometry, or the <a href="sdo_cs-make_2d.htm">SDO_CS.MAKE_2D</a> function to convert a three-dimensional geometry to a two-dimensional geometry; and you can use the resulting geometry to perform a transformation into a geometry with the desired number of dimensions.</p>
<p>For example, transforming a two-dimensional geometry into a three-dimensional geometry involves using the <a href="sdo_cs-make_3d.htm">SDO_CS.MAKE_3D</a> function. This function does not itself perform any coordinate transformation, but simply adds a height value and sets the target SRID. You must choose an appropriate target SRID, which should be the three-dimensional equivalent of the source SRID. For example, three-dimensional WGS 84 (4327) is the equivalent of two-dimensional WGS 84 (4326). If necessary, modify height values of vertices in the returned geometry.</p>
<p>There are many options for how to use the <a href="sdo_cs-make_3d.htm">SDO_CS.MAKE_3D</a> function, but the simplest is the following:</p>
<ol>
<li>
<p>Transform from the two-dimensional source SRID to two-dimensional WGS 84 (4326).</p>
</li>
<li>
<p>Call <a href="sdo_cs-make_3d.htm">SDO_CS.MAKE_3D</a> to convert the geometry to three-dimensional WGS 84 (4327)</p>
</li>
<li>
<p>Transform from three-dimensional WGS 84 (4327) to the three-dimensional target SRID.</p>
</li>
</ol>
<p><a href="three-dimensional-coordinate-reference-system-support.htm#GUID-10915EB2-B157-489D-AF74-753660E6FA8B__CIHEBEAC">Example 6-4</a> transforms a two-dimensional point from SRID 27700 to two-dimensional SRID 4326, converts the result of the transformation to a three-dimensional point with SRID 4327, and transforms the converted point to three-dimensional SRID 4327.</p>
<div class="example" id="GUID-10915EB2-B157-489D-AF74-753660E6FA8B__CIHEBEAC">
<p class="titleinexample">Example 6-4 Cross-Dimensionality Transformation</p>
<pre dir="ltr">SELECT
  SDO_CS.TRANSFORM(
    SDO_CS.MAKE_3D(
      SDO_CS.TRANSFORM(
        SDO_GEOMETRY(
          2001,
          27700,
          SDO_POINT_TYPE(577274.984, 69740.4923, NULL),
          NULL,
          NULL),
        4326),
      height =&gt; 0,
      target_srid =&gt; 4327),
    4327) &#34;27700 &gt; 4326 &gt; 4327 &gt; 4327&#34;
FROM DUAL;
 
27700 &gt; 4326 &gt; 4327 &gt; 4327(SDO_GTYPE, SDO_SRID, SDO_POINT(X, Y, Z), SDO_ELEM_INF
--------------------------------------------------------------------------------
SDO_GEOMETRY(3001, 4327, SDO_POINT_TYPE(.498364058, 50.5006366, 0), NULL, NULL)
</pre></div>
<!-- class="example" --></div>
</div>
<a id="SPATL1454"></a>
<div class="props_rev_3"><a id="GUID-42E8E3F1-D9D9-440B-B548-F23CA6F390AD"></a>
<h2 id="SPATL-GUID-42E8E3F1-D9D9-440B-B548-F23CA6F390AD" class="sect2"><span class="enumeration_section">6.5.5</span> 3D Equivalent for WGS 84?</h2>
<div>
<p>There are two possible answers to the question <span class="italic">What is 3D equivalent for the WGS 84 coordinate system?</span> (that is, 2D Oracle SRID 8308 or EPSG SRID 4326):</p>
<ul style="list-style-type: disc;">
<li>
<p>4979 (in many or most cases), or</p>
</li>
<li>
<p>It depends on what you mean by <span class="italic">height</span> (for example, above ground level, above or below sea level, or something else).</p>
</li>
</ul>
<p>There are many different height datums. Height can be relative to:</p>
<ul style="list-style-type: disc;">
<li>
<p>The ellipsoid, which requires the use of a coordinate system of type GEOGRAPHIC3d, for which SRID values 4327, 43229, and 4979 are predefined in Oracle Spatial and Graph.</p>
</li>
<li>
<p>A non-ellipsoidal height datum, which requires the use of a coordinate system of type COMPOUND, for which a custom SRID must usually be defined. The non-ellipsoidal height may be specified in relation to the geoid, to some local or mean sea level (or a network of local sea levels), or to some other definition of <span class="italic">height</span> (such as above ground surface).</p>
</li>
</ul>
<p>To define a compound coordinate system (see <a href="three-dimensional-coordinate-reference-system-support.htm#GUID-7E94E95C-7B5A-485C-A0F8-102363162393">Compound Coordinate Reference Systems</a>) based on the two dimensions of the WGS 84 coordinate system, you must first select a predefined or custom vertical coordinate reference system (see <a href="creating-user-defined-coordinate-reference-system.htm#GUID-2B6A194E-093B-4CFD-828E-1A981AF42729">Creating a Vertical CRS</a>). To find the available vertical coordinate reference systems, enter the following statement:</p>
<pre dir="ltr">SELECT srid, COORD_REF_SYS_NAME from sdo_coord_ref_sys 
  WHERE COORD_REF_SYS_KIND = &#39;VERTICAL&#39; order by srid;
 
      SRID COORD_REF_SYS_NAME
---------- ---------------------------------------------------------------------
      3855 EGM2008 geoid height
      3886 Fao 1979 height
      4440 NZVD2009 height
      4458 Dunedin-Bluff 1960 height
      5600 NGPF height
      5601 IGN 1966 height
      5602 Moorea SAU 1981 height
      . . .
      5795 Guadeloupe 1951 height
      5796 Lagos 1955 height
      5797 AIOC95 height
      5798 EGM84 geoid height
      5799 DVR90 height
 
123 rows selected.
</pre>
<p>After selecting a vertical coordinate reference system, create the compound SRID by entering a statement in the following form:</p>
<pre dir="ltr">INSERT INTO sdo_coord_ref_system (
  SRID,
  COORD_REF_SYS_NAME,
  COORD_REF_SYS_KIND,
  COORD_SYS_ID,
  DATUM_ID,
  GEOG_CRS_DATUM_ID,
  SOURCE_GEOG_SRID,
  PROJECTION_CONV_ID,
  CMPD_HORIZ_SRID,
  CMPD_VERT_SRID,
  INFORMATION_SOURCE,
  DATA_SOURCE,
  IS_LEGACY,
  LEGACY_CODE,
  LEGACY_WKTEXT,
  LEGACY_CS_BOUNDS,
  IS_VALID,
  SUPPORTS_SDO_GEOMETRY)
values (
  <span class="italic"><span class="bold">custom-SRID</span></span>,
  <span class="italic"><span class="bold">&#39;custom-name&#39;</span></span>,
  &#39;COMPOUND&#39;,
  NULL,
  NULL,
  6326,
  NULL,
  NULL,
  4326,
  <span class="italic"><span class="bold">vertical-SRID</span></span>,
  <span class="italic"><span class="bold">&#39;custom-information-source&#39;</span></span>,
  <span class="italic"><span class="bold">&#39;custom-data-source&#39;</span></span>,
  &#39;FALSE&#39;,
  NULL,
  NULL,
  NULL,
  &#39;TRUE&#39;,
  &#39;TRUE&#39;);
</pre>
<p>You can check the definition, based on the generated WKT, by entering a statement in the following form:</p>
<pre dir="ltr">SELECT wktext3d FROM cs_srs WHERE srid = <span class="italic">custom-SRID</span>;
 
WKTEXT3D
------------------------------------------------------------------------------
COMPD_CS[
  &#34;NTF (Paris) + NGF IGN69&#34;,
  GEOGCS[&#34;NTF (Paris)&#34;,
    DATUM[&#34;Nouvelle Triangulation Francaise (Paris)&#34;,
      SPHEROID[
        &#34;Clarke 1880 (IGN)&#34;,
        6378249.2,
        293.4660212936293951,
        AUTHORITY[&#34;EPSG&#34;, &#34;7011&#34;]],
      TOWGS84[-168.0, -60.0, 320.0, 0.0, 0.0, 0.0, 0.0],
      AUTHORITY[&#34;EPSG&#34;, &#34;6807&#34;]],
    PRIMEM[&#34;Paris&#34;, 2.337229, AUTHORITY[&#34;EPSG&#34;,&#34;8903&#34;]],
    UNIT[&#34;grad&#34;, 0.015707963267949, AUTHORITY[&#34;EPSG&#34;, &#34;9105&#34;]],
    AXIS[&#34;Lat&#34;, NORTH],
    AXIS[&#34;Long&#34;, EAST],
    AUTHORITY[&#34;EPSG&#34;, &#34;4807&#34;]],
  VERT_CS[&#34;NGF IGN69&#34;,
    VERT_DATUM[&#34;Nivellement general de la France - IGN69&#34;, 2005,
      AUTHORITY[&#34;EPSG&#34;, &#34;5119&#34;]],
    UNIT[&#34;metre&#34;, 1.0, AUTHORITY[&#34;EPSG&#34;, &#34;9001&#34;]],
    AXIS[&#34;H&#34;, UP],
    AUTHORITY[&#34;EPSG&#34;, &#34;5720&#34;]],
  AUTHORITY[&#34;EPSG&#34;,&#34;7400&#34;]]
</pre>
<p>When transforming between different height datums, you might use a VERTCON matrix. For example, between the WGS 84 ellipsoid and geoid, there is an offset matrix that allows height transformation. For more information, see the following:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="three-dimensional-coordinate-reference-system-support.htm#GUID-A029BD72-1D0C-429C-AB08-D0014AB5CCE4__CIHIBAGI">Example 6-3</a> in <a href="three-dimensional-coordinate-reference-system-support.htm#GUID-A029BD72-1D0C-429C-AB08-D0014AB5CCE4">Three-Dimensional Transformations</a></p>
</li>
<li>
<p><a href="creating-user-defined-coordinate-reference-system.htm#GUID-848F5AB1-59D4-4F5D-B09C-7CC5BCD92F01">Creating a Transformation Operation</a></p>
</li>
<li>
<p><a href="creating-user-defined-coordinate-reference-system.htm#GUID-6B52AF05-245E-44B5-9BAE-21323C847A44">Using British Grid Transformation OSTN02/OSGM02 (EPSG Method 9633)</a></p>
</li>
</ul>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment142">
<tr>
<td class="cellalignment149">
<table class="cellalignment147">
<tr>
<td class="cellalignment146"><a href="epsg-model-and-spatial-and-graph.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment146"><a href="tfm_plan-object-type.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment151">
<table class="cellalignment145">
<tr>
<td class="cellalignment146"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment146"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment146"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment146"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment146"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment146"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>