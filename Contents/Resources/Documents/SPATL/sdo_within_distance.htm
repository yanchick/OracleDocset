<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-101917"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/SDO_WITHIN_DISTANCE"></a><title>SDO_WITHIN_DISTANCE</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="SDO_WITHIN_DISTANCE operator, operators, SDO_WITHIN_DISTANCE"/>
<meta name="dcterms.created" content="2017-01-26T11:46:57Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Spatial and Graph Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49172-07"/>
<meta name="dcterms.isVersionOf" content="SPATL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="sdo_touch.htm" title="Previous" type="text/html"/>
<link rel="Next" href="spatial-aggregate-functions1.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49172-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-682B258F-1604-4BE8-824D-F6E05376E7EC"></a> <span id="PAGE" style="display:none;">200/475</span> <!-- End Header -->
<a id="SPATL1041"></a>
<h1 id="SPATL-GUID-682B258F-1604-4BE8-824D-F6E05376E7EC" class="sect1"><span class="enumeration_section">18.18</span> SDO_WITHIN_DISTANCE</h1>
<div>
<div class="section">
<p class="subhead1">Format</p>
<pre dir="ltr">SDO_WITHIN_DISTANCE(geometry1, aGeom, params);
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Description</p>
<p>Uses the spatial index to identify the set of spatial objects that are within some specified distance of a given object, such as an area of interest or point of interest.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Keywords and Parameters</p>
<div class="tblformal" id="GUID-682B258F-1604-4BE8-824D-F6E05376E7EC__GUID-3903D758-8F80-4773-A689-B751FEE5B0C6">
<table class="cellalignment152" summary="Keywords and parameters for SDO_WITHIN_DISTANCE operator">
<thead>
<tr class="cellalignment143">
<th class="cellalignment154" id="d113247e70">Value</th>
<th class="cellalignment191" id="d113247e73">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment143">
<td class="cellalignment157" id="d113247e78" headers="d113247e70">
<p>geometry1</p>
</td>
<td class="cellalignment192" headers="d113247e78 d113247e73">
<p>Specifies a geometry column in a table. The column has the set of geometry objects that will be operated on to determine if they are within the specified distance of the given object (<code>aGeom</code>). The column must be spatially indexed. Data type is SDO_GEOMETRY.</p>
</td>
</tr>
<tr class="cellalignment143">
<td class="cellalignment157" id="d113247e90" headers="d113247e70">
<p>aGeom</p>
</td>
<td class="cellalignment192" headers="d113247e90 d113247e73">
<p>Specifies the object to be checked for distance against the geometry objects in <code>geometry1</code>. Specify either a geometry from a table (using a bind variable) or a transient instance of a geometry (using the SDO_GEOMETRY constructor). Data type is SDO_GEOMETRY.</p>
</td>
</tr>
<tr class="cellalignment143">
<td class="cellalignment157" id="d113247e102" headers="d113247e70">
<p><span>params</span></p>
</td>
<td class="cellalignment192" headers="d113247e102 d113247e73">
<p>A quoted string containing one or more keywords (with values) that determine the behavior of the operator. The remaining items (<code>distance</code>, <code>max_resolution</code>, <code>min_resolution</code>, <code>querytype</code>, and <code>unit</code>) are potential keywords for the <code>params</code> parameter. Data type is VARCHAR2.</p>
</td>
</tr>
<tr class="cellalignment143">
<td class="cellalignment157" id="d113247e131" headers="d113247e70">
<p>distance</p>
</td>
<td class="cellalignment192" headers="d113247e131 d113247e73">
<p>Specifies the distance value. If a coordinate system is associated with the geometry, the distance unit is assumed to be the unit associated with the coordinate system. This is a required keyword. Data type is NUMBER.</p>
</td>
</tr>
<tr class="cellalignment143">
<td class="cellalignment157" id="d113247e140" headers="d113247e70">
<p>max_resolution</p>
</td>
<td class="cellalignment192" headers="d113247e140 d113247e73">
<p>Includes only geometries for which at least one side of the geometry&#39;s MBR is less than or equal to the specified value. For example, <code>max_resolution=10</code> includes only geometries for which the width or the height (or both) of the geometry&#39;s MBR is less than or equal to 10. (This keyword can be used to exclude geometries that are too large to be of interest.)</p>
</td>
</tr>
<tr class="cellalignment143">
<td class="cellalignment157" id="d113247e150" headers="d113247e70">
<p>min_resolution</p>
</td>
<td class="cellalignment192" headers="d113247e150 d113247e73">
<p>Includes only geometries for which at least one side of the geometry&#39;s MBR is equal to or greater than the specified value. For example, <code>min_resolution=10</code> includes only geometries for which the width or the height (or both) of the geometry&#39;s MBR is at least 10. (This keyword can be used to exclude geometries that are too small to be of interest.)</p>
</td>
</tr>
<tr class="cellalignment143">
<td class="cellalignment157" id="d113247e160" headers="d113247e70">
<p>querytype</p>
</td>
<td class="cellalignment192" headers="d113247e160 d113247e73">
<p>Set <code>&#39;querytype=FILTER&#39;</code> to perform only a primary filter operation. If <code>querytype</code> is not specified, both primary and secondary filter operations are performed (default). Data type is VARCHAR2.</p>
</td>
</tr>
<tr class="cellalignment143">
<td class="cellalignment157" id="d113247e175" headers="d113247e70">
<p>unit</p>
</td>
<td class="cellalignment192" headers="d113247e175 d113247e73">
<p>Specifies the unit of measurement: a quoted string with <code>unit=</code> and an SDO_UNIT value from the MDSYS.SDO_DIST_UNITS table (for example, <code>&#39;unit=KM&#39;</code>). See <a href="unit-measurement-support.htm#GUID-5984C12A-0A22-4BFD-B777-7C837D3CBB99">Unit of Measurement Support</a> for more information about unit of measurement specification. Data type is NUMBER. Default = unit of measurement associated with the data. For geodetic data, the default is meters.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Returns</p>
<p>The expression SDO_WITHIN_DISTANCE(arg1, arg2, arg3) = &#39;TRUE&#39; evaluates to TRUE for object pairs that are within the specified distance, and FALSE otherwise.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Usage Notes</p>
<p>The distance between two extended objects (nonpoint objects such as lines and polygons) is defined as the minimum distance between these two objects. The distance between two adjacent polygons is zero.</p>
<p>The operator is disabled if the table does not have a spatial index or if the number of dimensions for the query window does not match the number of dimensions specified when the index was created.</p>
<p>The operator must always be used in a WHERE clause and the condition that includes the operator should be an expression of the form:</p>
<pre dir="ltr">SDO_WITHIN_DISTANCE(arg1, arg2, &#39;distance = &lt;some_dist_val&gt;&#39;) = &#39;TRUE&#39;
</pre>
<p>(The expression must not equate to any value other than &#39;TRUE&#39;.)</p>
<p>The geometry column must have a spatial index built on it. If the data is geodetic, the spatial index must be an R-tree index.</p>
<p>SDO_WITHIN_DISTANCE is not supported for spatial joins. See <a href="querying-spatial-data.htm#GUID-3839BEE8-7743-46F4-B573-667ADC7FEB3E">Within-Distance Operator</a> for a discussion on how to perform a spatial join within-distance operation.</p>
<p>For information about 3D support with spatial operators (which operators do and do not consider all three dimensions in their computations), see <a href="three-dimensional-spatial-objects.htm">Three-Dimensional Spatial Objects</a>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Examples</p>
<p>The following example selects the geometries that are within a distance of 10 from a query window (here, a rectangle with lower-left, upper-right coordinates 4,6, 8,8). (The example uses the definitions and data described in <a href="simple-example-inserting-indexing-and-querying-spatial-data.htm">Simple Example: Inserting_ Indexing_ and Querying Spatial Data</a> and illustrated in <a href="simple-example-inserting-indexing-and-querying-spatial-data.htm#GUID-51A767CA-82EE-4475-8C8B-13E685C04934__I1004467">Figure 2-1</a>. In this case, all geometries shown in that figure are returned.)</p>
<pre dir="ltr">SELECT c.name FROM cola_markets c WHERE SDO_WITHIN_DISTANCE(c.shape,
  SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1003,3),
    SDO_ORDINATE_ARRAY(4,6, 8,8)),
  &#39;distance=10&#39;) = &#39;TRUE&#39;;
 
NAME                                                                            
--------------------------------                                                
cola_b                                                                          
cola_a                                                                          
cola_c                                                                          
cola_d
</pre>
<p>The following example is the same as the preceding example, except that it includes only geometries where at least one side of the geometry&#39;s MBR is equal to or greater than 4.1. In this case, only <code>cola_a</code> and <code>cola_b</code> are returned, because their MBRs have at least one side with a length greater than or equal to 4.1. The trapezoid <code>cola_c</code> is excluded, because its MBR has sides with lengths of 3 and 2; and the circle <code>cola_d</code> is excluded, because its MBR is a square whose sides have a length of 4.</p>
<pre dir="ltr">SELECT c.name FROM cola_markets c WHERE SDO_WITHIN_DISTANCE(c.shape,
  SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1003,3),
    SDO_ORDINATE_ARRAY(4,6, 8,8)),
  &#39;distance=10 min_resolution=4.1&#39;) = &#39;TRUE&#39;;
 
NAME                                                                            
--------------------------------                                                
cola_b                                                                          
cola_a 
</pre>
<p>The following example selects the GID values from the POLYGONS table where the GEOMETRY column object is within 10 distance units of the geometry stored in the <code>aGeom</code> variable.</p>
<pre dir="ltr">SELECT A.GID 
  FROM POLYGONS A 
  WHERE 
    SDO_WITHIN_DISTANCE(A.Geometry, :aGeom, &#39;distance = 10&#39;) = &#39;TRUE&#39;;
</pre>
<p>The following example selects the GID values from the POLYGONS table where the GEOMETRY column object is within 10 distance units of the specified rectangle having the lower-left coordinates (x1,y1) and the upper-right coordinates (x2, y2).</p>
<pre dir="ltr">SELECT A.GID 
  FROM POLYGONS A 
  WHERE 
    SDO_WITHIN_DISTANCE(A.Geometry, sdo_geometry(2003,NULL,NULL,
                             sdo_elem_info_array(1,1003,3),
                             sdo_ordinate_array(x1,y1,x2,y2)),
                     &#39;distance = 10&#39;) = &#39;TRUE&#39;;
</pre>
<p>The following example selects the GID values from the POLYGONS table where the GID value in the QUERY_POINTS table is 1 and a POLYGONS.GEOMETRY object is within 10 distance units of the QUERY_POINTS.GEOMETRY object.</p>
<pre dir="ltr">SELECT A.GID 
  FROM POLYGONS A, Query_Points B 
  WHERE B.GID = 1 AND 
    SDO_WITHIN_DISTANCE(A.Geometry, B.Geometry, &#39;distance = 10&#39;) = &#39;TRUE&#39;;
</pre>
<p>See also the more complex SDO_WITHIN_DISTANCE examples in <a href="sdo_within_distance-examples.htm">SDO_WITHIN_DISTANCE Examples</a>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Related Topics</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="sdo_filter.htm">SDO_FILTER</a></p>
</li>
<li>
<p><a href="sdo_relate.htm">SDO_RELATE</a></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment142">
<tr>
<td class="cellalignment149">
<table class="cellalignment147">
<tr>
<td class="cellalignment146"><a href="sdo_touch.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment146"><a href="spatial-aggregate-functions1.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment151">
<table class="cellalignment145">
<tr>
<td class="cellalignment146"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment146"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment146"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment146"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment146"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment146"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>