<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-101460"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/SDO_MIGRATE.TO_CURRENT"></a><title>SDO_MIGRATE.TO_CURRENT</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="upgrading, data to current Spatial release, TO_CURRENT procedure and function, SDO_MIGRATE package, TO_CURRENT, migration, current release, upgrading spatial data to, upgrading spatial data to current release"/>
<meta name="dcterms.created" content="2017-01-26T11:46:57Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Spatial and Graph Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49172-07"/>
<meta name="dcterms.isVersionOf" content="SPATL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="sdo_migrate-package-upgrading.htm" title="Previous" type="text/html"/>
<link rel="Next" href="sdo_ols-package-openls.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49172-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-83196024-5E64-4DA7-A588-0A31717FF150"></a> <span id="PAGE" style="display:none;">353/475</span> <!-- End Header -->
<a id="SPATL1185"></a>
<h1 id="SPATL-GUID-83196024-5E64-4DA7-A588-0A31717FF150" class="sect1"><span class="enumeration_section">25.1</span> SDO_MIGRATE.TO_CURRENT</h1>
<div>
<div class="section">
<p class="subhead1">Format (Any Object-Relational Model Implementation to Current)</p>
<pre dir="ltr">SDO_MIGRATE.TO_CURRENT(
     tabname         IN VARCHAR2      
     [, column_name  IN VARCHAR2]);
</pre>
<p>or</p>
<pre dir="ltr">SDO_MIGRATE.TO_CURRENT(
     tabname       IN VARCHAR2, 
     column_name   IN VARCHAR2 
     [, commit_int IN NUMBER]);
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Format (Single Object-Relational Model Geometry to Current)</p>
<pre dir="ltr">SDO_MIGRATE.TO_CURRENT(
     geom  IN SDO_GEOMETRY, 
     dim   IN SDO_DIM_ARRAY 
     
) RETURN SDO_GEOMETRY;
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Format (Any Relational Model Implementation to Current)</p>
<pre dir="ltr">SDO_MIGRATE.TO_CURRENT(
     layer       IN VARCHAR2, 
     newtabname  IN VARCHAR2, 
     gidcolumn   IN VARCHAR2, 
     geocolname  IN VARCHAR2, 
     layer_gtype IN VARCHAR2, 
     updateflag  IN VARCHAR2);
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Description</p>
<p>Upgrades data from the obsolete Spatial relational model (release 8.1.5 or earlier) to the current release, or upgrades one or more object-relational model (release 8.1.6 or later) geometries that need to be upgraded (as explained in the Usage Notes). As a procedure, TO_CURRENT upgrades an entire layer (all geometries in a column); as a function, TO_CURRENT upgrades a single geometry object, which must be of type SDO_GEOMETRY.</p>
<p>For upgrading a layer, the procedure format depends on whether you are upgrading from the Spatial relational model (release 8.1.5 or earlier) or object-relational model (release 8.1.6 or later). See the Usage Notes for the model that applies to you.</p>
<div class="infobox-note" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-0A0F9BA6-56FD-4A75-8F86-FC901C50F669">
<p class="notep1">Note:</p>
<p>This procedure applies to two-dimensional geometries only. It is not supported for three-dimensional geometries.</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Parameters</p>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101449"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-CAF585B7-C5FD-4BDD-9713-00917D0418F6"><!-- --></a>tabname</dt>
<dd>
<p>Table with geometry objects.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101450"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-216EC902-E80B-49C0-8356-EF960B121BA0"><!-- --></a>column_name</dt>
<dd>
<p>Column in <code>tabname</code> that contains geometry objects. If <code>column_name</code> is not specified or is specified as null, the column containing geometry objects is upgraded.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101451"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-190B18B7-F36C-4319-814D-FADDD6071883"><!-- --></a>commit_int</dt>
<dd>
<p>Number of geometries to upgrade before Spatial and Graph performs an internal commit operation. If <code>commit_int</code> is not specified, no internal commit operations are performed during the upgrade.</p>
<p>If you specify a <code>commit_int</code> value, you can use a smaller rollback segment than would otherwise be needed.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101452"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-CEFC02FA-9751-4528-9648-B63E5F9F68CA"><!-- --></a>geom</dt>
<dd>
<p>Single geometry object to be upgraded to the current release.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101453"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-D2E352FB-1010-4C88-8B55-7014F3B04302"><!-- --></a>dim</dt>
<dd>
<p>Dimensional information array for the geometry object to be upgraded. The SDO_DIM_ARRAY type is explained in <a href="geometry-metadata-views.htm#GUID-483D9FB7-AEC1-433C-A2AF-D0FE3018CDCF">DIMINFO</a>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101454"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-FA890DDC-950B-4C1A-833C-60617A47D78F"><!-- --></a>layer</dt>
<dd>
<p>Name of the layer to be upgraded.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101455"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-1888F4DC-DCC1-4C3F-8E92-6BE74DFF01D9"><!-- --></a>newtabname</dt>
<dd>
<p>Name of the new table to which you are upgrading the data.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101456"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-E947F36C-AB67-4630-AAA0-F4A4DD686ADB"><!-- --></a>gidcolumn</dt>
<dd>
<p>Name of the column in which to store the GID from the old table.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101457"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-28D8B4BC-B05A-4B79-A8CF-87B68FD98CAF"><!-- --></a>geocolname</dt>
<dd>
<p>Name of the column in the new table where the geometry objects will be inserted.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101458"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-B01D883F-8659-4F31-B033-26C2B8C2C6FD"><!-- --></a>layer_gtype</dt>
<dd>
<p>One of the following values: POINT or NOTPOINT (default).</p>
<p>If the layer you are upgrading is composed solely of point data, set this parameter to POINT for optimal performance; otherwise, set this parameter to NOTPOINT. If you set the value to POINT and the layer contains any nonpoint geometries, the upgrade might produce invalid data.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-101459"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-C8FD32CE-D2AF-41F7-872F-9AEE9603D8F9"><!-- --></a>updateflag</dt>
<dd>
<p>One of the following values: UPDATE or INSERT (default).</p>
<p>If you are upgrading the layer into an existing populated attribute table, set this parameter to UPDATE; otherwise, set this parameter to INSERT.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Usage Notes for Object-Relational Model Layer and Single Geometry Upgrade</p>
<p>This subprogram is not needed for normal upgrades of Oracle Spatial and Graph. It is sometimes needed if spatial data is loaded using a third-party loader and if the resulting geometries have the wrong orientation or invalid ETYPE or GTYPE values. For information about using this subprogram as part of the recommended procedure for loading and validating spatial data, see <a href="recommendations-loading-and-validating-spatial-data.htm">Recommendations for Loading and Validating Spatial Data</a>.</p>
<p>This subprogram upgrades the specified geometry or all geometry objects in the specified layer so that their SDO_GTYPE and SDO_ETYPE values are in the format of the current release:</p>
<ul style="list-style-type: disc;">
<li>
<p>SDO_GTYPE values of 4 digits are created, using the format (<span class="italic">DLTT</span>) shown in <a href="sdo_geometry-object-type.htm#GUID-4D84CE67-67E4-4A84-8255-C586E765A94B">SDO_GTYPE</a>.</p>
</li>
<li>
<p>SDO_ETYPE values are as discussed in <a href="sdo_geometry-object-type.htm#GUID-270AE39D-7B83-46D0-9DD6-E5D99C045021">SDO_ELEM_INFO</a>.</p>
</li>
</ul>
<p>Geometries are ordered so that exterior rings are followed by their interior rings, and coordinates are saved in the correct rotation (counterclockwise for exterior rings, and clockwise for interior rings).</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Usage Notes for Relational Model Upgrade</p>
<p>If you are you upgrading from the Spatial relational model (release 8.1.5 or earlier), consider the following when using this procedure:</p>
<ul style="list-style-type: disc;">
<li>
<p>The new table must be created before you call this procedure.</p>
</li>
<li>
<p>If the data to be upgraded is geodetic, the tolerance value (SDO_TOLERANCE column value in the <span class="italic">&lt;layername&gt;</span>_SDODIM table or view) must be expressed in decimal degrees (for example, 0.00000005).</p>
</li>
<li>
<p>The procedure converts geometries from the relational model to the object-relational model.</p>
</li>
<li>
<p>A commit operation is performed by this procedure.</p>
</li>
<li>
<p>If any of the upgrade steps fails, nothing is upgraded for the layer.</p>
</li>
<li>
<p><code>layer</code> is the underlying layer name, without the _SDOGEOM suffix.</p>
</li>
<li>
<p>The old SDO_GID is stored in <code>gidcolumn</code>.</p>
</li>
<li>
<p>SDO_GTYPE values of 4 digits are created, using the format (<span class="italic">DLTT</span>) shown in <a href="sdo_geometry-object-type.htm#GUID-4D84CE67-67E4-4A84-8255-C586E765A94B">SDO_GTYPE</a>.</p>
</li>
<li>
<p>SDO_ETYPE values are created, using the values discussed in <a href="sdo_geometry-object-type.htm#GUID-270AE39D-7B83-46D0-9DD6-E5D99C045021">SDO_ELEM_INFO</a>.</p>
</li>
<li>
<p>The procedure orders geometries so that exterior rings are followed by their interior rings, and it saves coordinates in the correct rotation (counterclockwise for exterior rings, and clockwise for interior rings).</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Examples</p>
<p>The following example changes the definitions of geometry objects in the ROADS table from the format of a release later than 8.1.5 to the format of the current release.</p>
<pre dir="ltr">EXECUTE SDO_MIGRATE.TO_CURRENT(&#39;ROADS&#39;);
</pre></div>
<!-- class="section" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment142">
<tr>
<td class="cellalignment149">
<table class="cellalignment147">
<tr>
<td class="cellalignment146"><a href="sdo_migrate-package-upgrading.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment146"><a href="sdo_ols-package-openls.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment151">
<table class="cellalignment145">
<tr>
<td class="cellalignment146"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment146"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment146"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment146"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment146"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment146"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>