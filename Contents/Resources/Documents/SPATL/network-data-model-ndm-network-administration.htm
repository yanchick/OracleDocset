<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-100783"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Network%20Data%20Model%20%28NDM%29%20Network%20Administration"></a><title>Network Data Model (NDM) Network Administration</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-01-26T11:46:57Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Spatial and Graph Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E49172-07"/>
<meta name="dcterms.isVersionOf" content="SPATL"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="logging-administration-operations.htm" title="Previous" type="text/html"/>
<link rel="Next" href="routing-engine-data.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E49172-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-EEB8645C-9A59-48E4-AC6E-F54C03DFE17D"></a> <span id="PAGE" style="display:none;">470/475</span> <!-- End Header -->
<a id="SPATL1565"></a>
<h1 id="SPATL-GUID-EEB8645C-9A59-48E4-AC6E-F54C03DFE17D" class="sect1"><span class="enumeration_section">E.2</span> Network Data Model (NDM) Network Administration</h1>
<div>
<p>The Oracle Routing Engine requires an Oracle Spatial and Graph network data model (NDM) network, built on the routing engine data, to process route requests and to generate responses.</p>
<p>The following are related to NDM network administration operations:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="network-data-model-ndm-network-administration.htm#GUID-025B2003-E732-4DE0-9469-332D194FCEEE">CREATE_ROUTER_NETWORK Procedure</a></p>
</li>
<li>
<p><a href="network-data-model-ndm-network-administration.htm#GUID-6CC95CF6-E6BF-4492-BE4F-2A0408DBA55A">DELETE_ROUTER_NETWORK Procedure</a></p>
</li>
</ul>
<p><a href="network-data-model-ndm-network-administration.htm#GUID-8DEBDF36-D478-4CC4-B936-516568DAC0E0">Network Creation Example</a> describes the steps for creating a sample NDM network for routing engine use.</p>
</div>
<a id="SPATL1566"></a>
<div class="props_rev_3"><a id="GUID-025B2003-E732-4DE0-9469-332D194FCEEE"></a>
<h2 id="SPATL-GUID-025B2003-E732-4DE0-9469-332D194FCEEE" class="sect2"><span class="enumeration_section">E.2.1</span> CREATE_ROUTER_NETWORK Procedure</h2>
<div>
<p>Syntax:</p>
<pre dir="ltr">SDO_ROUTER_PARTITION.CREATE_ROUTER_NETWORK(
  LOG_FILE_NAME IN VARCHAR2 := &#39;sdo_router_partition.log&#39;,
  NETWORK_NAME IN VARCHAR2 := &#39;ROUTER_NETWORK&#39;);
</pre>
<p>The CREATE_ROUTER_NETWORK procedure must be run from a routing engine schema that contains routing engine Oracle Data Format (ODF) data.</p>
<p>The LOG_FILE_NAME parameter is the name of the log file written during network creation. This log file is created in the SDO_ROUTER_LOG_DIR directory. You can choose to log network creation in its own log file or write to the default partitioning log file, <code>sdo_router_partition.log</code>.</p>
<p>The NETWORK_NAME parameter names the network being created. The name of the network is at the discretion of the user. Oracle recommends including the country code and data version in the name for clarity. For example, for North American data released in the first quarter of 2012 a suitable network name would be ROUTER_NA_Q112.</p>
<p>Creating a network using a name of an already existing network simply replaces the old network with the new network. This is not recommended. The old network should be deleted first (using the <a href="network-data-model-ndm-network-administration.htm#GUID-6CC95CF6-E6BF-4492-BE4F-2A0408DBA55A">DELETE_ROUTER_NETWORK Procedure</a>), then the new network created.</p>
</div>
</div>
<a id="SPATL1567"></a>
<div class="props_rev_3"><a id="GUID-6CC95CF6-E6BF-4492-BE4F-2A0408DBA55A"></a>
<h2 id="SPATL-GUID-6CC95CF6-E6BF-4492-BE4F-2A0408DBA55A" class="sect2"><span class="enumeration_section">E.2.2</span> DELETE_ROUTER_NETWORK Procedure</h2>
<div>
<p>Syntax:</p>
<pre dir="ltr">SDO_ROUTER_PARTITION.DELTE_ROUTER_NETWORK(
  LOG_FILE_NAME IN VARCHAR2 := &#39;sdo_router_partition.log&#39;,
  NETWORK_NAME  IN VARCHAR2 := &#39;ROUTER_NETWORK&#39;,
  LOG_DELETE    IN BOOLEAN DEFAULT TRUE);
</pre>
<p>The DELETE_ROUTER_NETWORK procedure must be run from a routing engine schema, and a network matching the network name parameter must exist within the schema.</p>
<p>The LOG_FILE_NAME parameter is the name of the log file written during network deletion. This log file is created in the SDO_ROUTER_LOG_DIR directory. You can choose to log network deletion in its own log file or write to the default partitioning log file, <code>sdo_router_partition.log</code>.</p>
<p>The NETWORK_NAME parameter is name of the network being deleted. If a network of this name does not exist, an exception is thrown and an error message is written to the log file.</p>
<p>The LOG_DELETE parameter controls whether the delete operation is logged to the log file. This parameter is used primarily for debugging.</p>
</div>
</div>
<a id="SPATL1568"></a>
<div class="props_rev_3"><a id="GUID-8DEBDF36-D478-4CC4-B936-516568DAC0E0"></a>
<h2 id="SPATL-GUID-8DEBDF36-D478-4CC4-B936-516568DAC0E0" class="sect2"><span class="enumeration_section">E.2.3</span> Network Creation Example</h2>
<div>
<p>This section describes the steps for creating a sample NDM network for routing engine use.</p>
<ol>
<li>
<p>Validate the routing engine log directory in the routing engine schema. SDO_ROUTER_LOG_DIR must exist and have the correct privileges. Log in to the routing engine schema and execute the following statement:</p>
<pre dir="ltr">EXECUTE SDO_ROUTER_PARTITION.VALIDATE_ROUTER_LOG_DIR(
    &#39;validate_log.log&#39;);
</pre>
<p>When validation completes successfully, the <code>validate_log.log</code> file should contain the following messages:</p>
<pre dir="ltr">[INFO] PLSQL logging OK (ROUTER_SCHEMA)
[INFO] Java logging OK (ROUTER_SCHEMA)
[INFO] PLSQL logging OK (MDSYS)
[INFO] Java logging OK (MDSYS)
</pre></li>
<li>
<p>Validate the routing engine log directory in the MDSYS schema. SDO_ROUTER_LOG_DIR must exist and have the correct privileges. Log in to the MDSYS schema and execute the same statement as is step 1.</p>
</li>
<li>
<p>In the routing engine schema, use the following query to find the name of any existing networks:</p>
<pre dir="ltr">SELECT SUBSTR(view_name, 0, LENGTH(view_name)-7) Network_Name
 FROM user_views 
 WHERE view_name LIKE &#39;%PBLOB$&#39;;
</pre>
<p>If no results are returned, go to step 5. If a result similar to the following is returned, go to the next step to delete the network before creating a new network.</p>
<pre dir="ltr">NETWORK_NAME
------------
<span class="italic">&lt;any-network-name&gt;</span>
</pre></li>
<li>
<p>Use the DELETE_NETWORK procedure to delete an existing network. For example, if the existing network is named ROUTER_NA_Q112:</p>
<pre dir="ltr">EXECUTE SDO_ROUTER_PARTITION.DELETE_ROUTER_NETWORK(
    &#39;delete_net.log&#39;, &#39;ROUTER_NA_Q112&#39;);
</pre>
<p>When deletion completes successfully, the <code>delete_net.log</code> file should contain the following message:</p>
<pre dir="ltr">INFO: deleting the Routeserver network: ROUTER_NA_Q112
</pre></li>
<li>
<p>Use the CREATE_ROUTER_NETWORK procedure to build a new network. For example:</p>
<pre dir="ltr">EXECUTE SDO_ROUTER_PARTITION.CREATE_ROUTER_NETWORK(
    &#39;create_net.log&#39;, &#39;ROUTER_NA_112&#39;);
</pre>
<p>When the create operation completes successfully, the <code>create_net.log</code> file should contain the following messages:</p>
<pre dir="ltr">INFO: creating the Routeserver network: ROUTER_NA_Q112
INFO: rebuild edge table statistics
      creating views
      generating metadata
</pre></li>
</ol>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment142">
<tr>
<td class="cellalignment149">
<table class="cellalignment147">
<tr>
<td class="cellalignment146"><a href="logging-administration-operations.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment146"><a href="routing-engine-data.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment151">
<table class="cellalignment145">
<tr>
<td class="cellalignment146"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment146"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment146"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment146"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment146"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment146"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>