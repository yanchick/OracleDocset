<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-4962"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Oracle%20Grid%20Infrastructure%20Postinstallation%20Procedures"></a><title>Oracle Grid Infrastructure Postinstallation Procedures</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-11T4:23:40Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Grid Infrastructure Installation Guide"/>
<meta name="dcterms.identifier" content="E48914-22"/>
<meta name="dcterms.isVersionOf" content="CWLIN"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2013, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="crsunix.htm" title="Previous" type="text/html"/>
<link rel="Next" href="rem_orcl.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48914-22.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">14/22</span> <!-- End Header -->
<div id="CWLIN326" class="chapter"><a id="BABHHEHG"></a>
<h1 class="chapter"><span class="secnum">9</span> Oracle Grid Infrastructure Postinstallation Procedures</h1>
<p>This chapter describes how to complete the postinstallation tasks after you have installed the Oracle Grid Infrastructure software.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BABGBHBB">Required Postinstallation Tasks</a></p>
</li>
<li>
<p><a href="#BABEJBEA">Recommended Postinstallation Tasks</a></p>
</li>
<li>
<p><a href="#BABEHEEH">Using Earlier Oracle Database Releases with Oracle Grid Infrastructure</a></p>
</li>
<li>
<p><a href="#BABBEJFG">Modifying Oracle Clusterware Binaries After Installation</a></p>
</li>
</ul>
<a id="BABGBHBB"></a>
<div id="CWLIN327" class="sect1">
<h2 class="sect1"><span class="secnum">9.1</span> Required Postinstallation Tasks</h2>
<p>Download and install patch updates. See the My Oracle Support website for required <a id="sthref664"></a><a id="sthref665"></a><a id="sthref666"></a><a id="sthref667"></a><a id="sthref668"></a>patch updates for your <a id="sthref669"></a>installation.</p>
<p>To download required patch updates:</p>
<ol>
<li>
<p>Use a Web browser to view the My Oracle Support website:</p>
<p><code dir="ltr"><a href="https://support.oracle.com">https://support.oracle.com</a></code></p>
</li>
<li>
<p>Log in to My Oracle Support.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are not a My Oracle Support registered user, then click <span class="bold">Register for My Oracle Support</span> and register.</div>
</li>
<li>
<p>On the main My Oracle Support page, click <span class="bold">Patches &amp; Updates</span>.</p>
</li>
<li>
<p>On the Patches and Updates page, click <span class="bold">Product or Family (Advanced)</span>.</p>
</li>
<li>
<p>In the Product field, select <span class="bold">Oracle Database</span>.</p>
</li>
<li>
<p>In the Release field, select one or more release numbers. For example, Oracle 12.1.0.1.0.</p>
</li>
<li>
<p>Click <span class="bold">Search</span>.</p>
</li>
<li>
<p>Any available patch updates are displayed in the <span class="bold">Patch Search</span> page.</p>
</li>
<li>
<p>Click the patch number to download the patch.</p>
</li>
<li>
<p>Select the patch number and click <span class="bold">Read Me</span>. The README page contains information about the patch set and how to apply the patches to your installation.</p>
</li>
<li>
<p>Return to the Patch Set page, click <span class="bold">Download</span>, and save the file on your system.</p>
</li>
<li>
<p>Use the unzip utility provided with Oracle Database 12<span class="italic">c</span> Release 1 (12.1) to uncompress the Oracle patch updates that you downloaded from My Oracle Support. The unzip utility is located in the <code dir="ltr">$ORACLE_HOME/bin</code> directory.</p>
</li>
<li>
<p>See <a href="procstop.htm#BABEHGJG">Appendix B, &#34;How to Upgrade to Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1&#34;</a> for information about how to stop database processes in preparation for installing patches.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BABEJBEA"></a>
<div id="CWLIN330" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">9.2</span> Recommended Postinstallation Tasks</h2>
<p>Oracle recommends that you complete the following tasks as needed after installing Oracle Grid Infrastructure:</p>
<ul>
<li>
<p><a href="#BABFBABG">Tuning Semaphore Parameters</a></p>
</li>
<li>
<p><a href="#BABHFGFF">Create a Fast Recovery Area Disk Group</a></p>
</li>
<li>
<p><a href="#CIHJDFHH">Checking the SCAN Configuration</a></p>
</li>
<li>
<p><a href="#CIHFDGJA">Downloading and Installing the ORAchk Health Check Tool</a></p>
</li>
<li>
<p><a href="#CHDCDBHA">Setting Resource Limits for Oracle Clusterware and Associated Databases and Applications</a></p>
</li>
</ul>
<a id="BABFBABG"></a>
<div id="CWLIN335" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">9.2.1</span> Tuning Semaphore Parameters</h3>
<p>Use the following guidelines only if the default semaphore parameter values are too low to accommodate all Oracle processes:</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that you refer to the operating system documentation for more information about setting semaphore parameters.</div>
<ol>
<li>
<p>Calculate the minimum total semaphore requirements using the following formula:</p>
<p>2 * sum (process parameters of all database instances on the system) + overhead for background processes + system and other application requirements</p>
</li>
<li>
<p>Set <code dir="ltr">semmns</code> (total semaphores systemwide) to this total.</p>
</li>
<li>
<p>Set <code dir="ltr">semmsl</code> (semaphores for each set) to 250.</p>
</li>
<li>
<p>Set <code dir="ltr">semmni</code> (total semaphores sets) to <code dir="ltr">semmns</code> divided by <code dir="ltr">semmsl</code>, rounded up to the nearest multiple of 1024.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
My Oracle Support note 226209.01, &#34;Linux: How to Check Current Shared Memory, Semaphore Values,&#34; which is available from the following URL:
<p><code dir="ltr"><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=226209.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=226209.1</a></code></p>
</div>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABHFGFF"></a>
<div id="CWLIN336" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">9.2.2</span> Create a Fast Recovery Area Disk Group</h3>
<p>During installation, by default you can create one disk group. If you plan to add an Oracle Database for a standalone server or an Oracle RAC database, then you should create the Fast Recovery Area for database files.</p>
<div id="CWLIN337" class="sect3"><a id="sthref670"></a>
<h4 class="sect3"><span class="secnum">9.2.2.1</span> About the Fast Recovery Area and the Fast Recovery Area Disk Group</h4>
<p>The Fast Recovery Area is a unified storage location for all Oracle Database files related to recovery. Database administrators can define the DB_RECOVERY_FILE_DEST parameter to the path for the Fast Recovery Area to enable on-disk backups, and rapid recovery of data. Enabling rapid backups for recent data can reduce requests to system administrators to retrieve backup tapes for recovery operations.</p>
<p>When you enable Fast Recovery in the <code dir="ltr">init.ora</code> file, all RMAN backups, archive logs, control file automatic backups, and database copies are written to the Fast Recovery Area. RMAN automatically manages files in the Fast Recovery Area by deleting obsolete backups and archive files no longer required for recovery.</p>
<p>Oracle recommends that you create a Fast Recovery Area disk group. Oracle Clusterware files and Oracle Database files can be placed on the same disk group, and you can also place Fast Recovery Area files in the same disk group. However, Oracle recommends that you create a separate Fast Recovery Area disk group to reduce storage device contention.</p>
<p>The Fast Recovery Area is enabled by setting DB_RECOVERY_FILE_DEST. The size of the Fast Recovery Area is set with DB_RECOVERY_FILE_DEST_SIZE. As a general rule, the larger the Fast Recovery Area, the more useful it becomes. For ease of use, Oracle recommends that you create a Fast Recovery Area disk group on storage devices that can contain at least three days of recovery information. Ideally, the Fast Recovery Area should be large enough to hold a copy of all of your data files and control files, the online redo logs, and the archived redo log files needed to recover your database using the data file backups kept under your retention policy.</p>
<p>Multiple databases can use the same fast recovery area. For example, assume you have created one fast recovery area disk group on disks with 150 gigabyte (GB) of storage, shared by three different databases. You can set the size of the fast recovery area for each database depending on the importance of each database. For example, if test1 is your least important database, products is of greater importance and orders is of greatest importance, then you can set different DB_RECOVERY_FILE_DEST_SIZE settings for each database to meet your retention target for each database: 30 GB for test1, 50 GB for products, and 70 GB for orders.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink TDPRC262" href="../TDPRC/racbureco.htm#TDPRC262"><span class="italic">Oracle Enterprise Manager Real Application Clusters Guide Online Help</span></a></div>
</div>
<!-- class="sect3" -->
<div id="CWLIN338" class="sect3"><a id="sthref671"></a>
<h4 class="sect3"><span class="secnum">9.2.2.2</span> Creating the Fast Recovery Area Disk Group</h4>
<p>To create a Fast Recovery Area disk group:</p>
<ol>
<li>
<p>Navigate to the Grid home bin directory, and start Oracle ASM Configuration Assistant <a id="sthref672"></a>(ASMCA). For example:</p>
<pre dir="ltr">$ cd /u01/app/12.1.0/grid/bin
$ ./asmca
</pre></li>
<li>
<p>ASMCA opens at the Disk Groups tab. Click <span class="bold">Create</span> to create a new disk group.</p>
</li>
<li>
<p>The Create Disk Groups window opens.</p>
<p>In the Disk Group Name field, enter a descriptive name for the Fast Recovery Area group. For example: FRA.</p>
<p>In the Redundancy section, select the level of redundancy you want to use.</p>
<p>In the Select Member Disks field, select eligible disks to be added to the Fast Recovery Area, and click <span class="bold">OK</span>.</p>
</li>
<li>
<p>The Diskgroup Creation window opens to inform you when disk group creation is complete. Click <span class="bold">OK</span>.</p>
</li>
<li>
<p>Click <span class="bold">Exit</span>.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CIHJDFHH"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">9.2.3</span> Checking the SCAN Configuration</h3>
<p><a id="sthref673"></a><a id="sthref674"></a>The Single Client Access Name (SCAN) is a name that is used to provide service access for clients to the cluster. Because the SCAN is associated with the cluster as a whole, rather than to a particular node, the SCAN makes it possible to add or remove nodes from the cluster without needing to reconfigure clients. It also adds location independence for the databases, so that client configuration does not have to depend on which nodes are running a particular database instance. <a id="sthref675"></a>Clients can continue to access the cluster in the same way as with previous releases, but Oracle recommends that clients accessing the cluster use the SCAN.</p>
<p>You can use the command <code dir="ltr">cluvfy comp scan</code> (located in <span class="italic">Grid home</span><code dir="ltr">/bin</code>) to confirm that the DNS is correctly associating the SCAN with the addresses. For example:</p>
<pre dir="ltr">$ cluvfy comp scan 


Verifying scan

Checking Single Client Access Name (SCAN)...

Checking TCP connectivity to SCAN Listeners...
TCP connectivity to SCAN Listeners exists on all cluster nodes

Checking name resolution setup for &rdquo;node1.example.com&rdquo;...

Verification of SCAN VIP and Listener setup passed

Verification of scan was successful.
</pre>
<p>After installation, when a client sends a request to the cluster, the Oracle Clusterware SCAN listeners redirect client requests to servers in the cluster.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD1100" href="../CWADD/GUID-B445A858-9F00-4423-990E-109545AC11C3.htm#CWADD1100"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about system checks and configurations</div>
</div>
<!-- class="sect2" -->
<a id="CIHFDGJA"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">9.2.4</span> Downloading and Installing the ORAchk Health Check Tool</h3>
<p>Download and install the ORAchk utility to perform proactive heath checks for the Oracle software stack.</p>
<p>ORAchk replaces the RACCheck utility, extends health check coverage to the entire Oracle software stack, and identifies and addresses top issues reported by Oracle users. ORAchk proactively scans for known problems with Oracle products and deployments, including the following:</p>
<ul>
<li>
<p>Standalone Oracle Database</p>
</li>
<li>
<p>Oracle Grid Infrastructure</p>
</li>
<li>
<p>Oracle Real Application Clusters</p>
</li>
<li>
<p>Maximum Availability Architecture (MAA) Validation</p>
</li>
<li>
<p>Upgrade Readiness Validations</p>
</li>
<li>
<p>Oracle Golden Gate</p>
</li>
<li>
<p>E-Business Suite</p>
</li>
</ul>
<p>For information about configuring and running the ORAchk utility, refer to My Oracle Support note 1268927.1:</p>
<p><code dir="ltr"><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1268927.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1268927.1</a></code></p>
</div>
<!-- class="sect2" -->
<a id="CHDCDBHA"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">9.2.5</span> Setting Resource Limits for Oracle Clusterware and Associated Databases and Applications</h3>
<p>After you have completed Oracle Grid Infrastructure installation, you can set resource limits in the <span class="italic">Grid_home</span><code dir="ltr">/crs/install/s_crsconfig_</code><code dir="ltr"><span class="codeinlineitalic">nodename</span></code><code dir="ltr">_env.txt</code> file. These resource limits apply to all Oracle Clusterware processes and Oracle databases managed by Oracle Clusterware. For example, to set a higher number of processes limit, edit the file and set <code dir="ltr">CRS_LIMIT_NPROC</code> parameter to a high value.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABEHEEH"></a>
<div id="CWLIN339" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">9.3</span> Using Earlier Oracle Database Releases with Oracle Grid Infrastructure</h2>
<p>Review the following sections for information about using earlier Oracle Database releases with Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1) installations:</p>
<ul>
<li>
<p><a href="#BABDCBHF">General Restrictions for Using Earlier Oracle Database Versions</a></p>
</li>
<li>
<p><a href="#CIHBDEEG">Managing Server Pools with Earlier Database Versions</a></p>
</li>
<li>
<p><a href="#CIHFHJFJ">Using ASMCA to Administer Disk Groups for Earlier Database Versions</a></p>
</li>
<li>
<p><a href="#CHDIEDFJ">Making Oracle ASM Available to Earlier Oracle Database Releases</a></p>
</li>
<li>
<p><a href="#BABGIJDH">Pinning Cluster Nodes for Oracle Database Release 10.x or 11.x</a></p>
</li>
<li>
<p><a href="#BABFDGBI">Using the Correct LSNRCTL Commands</a></p>
</li>
</ul>
<a id="BABDCBHF"></a>
<div id="CWLIN340" class="sect2">
<h3 class="sect2"><span class="secnum">9.3.1</span> General Restrictions for Using Earlier Oracle Database Versions</h3>
<p>You can use Oracle Database 10<span class="italic">g</span> Release 2 and Oracle Database 11<span class="italic">g</span> Release 1 and 2 with Oracle Clusterware 12<span class="italic">c</span> Release 1 (12.1).</p>
<p>Do not use the versions of <code dir="ltr">srvctl</code>, <code dir="ltr">lsnrctl</code>, or other Oracle Grid infrastructure home tools to administer earlier version databases. Only administer earlier Oracle Database releases using the tools in the earlier Oracle Database homes. To ensure that the versions of the tools you are using are the correct tools for those earlier release databases, run the tools from the Oracle home of the database or object you are managing.</p>
<p>Oracle Database homes can only be stored on Oracle ASM Cluster File System (Oracle ACFS) if the database version is Oracle Database 11<span class="italic">g</span> Release 2 or higher. Earlier releases of Oracle Database cannot be installed on Oracle ACFS because these releases were not designed to use Oracle ACFS.</p>
<p>If you upgrade an existing version of Oracle Clusterware and Oracle ASM to Oracle Grid Infrastructure 11<span class="italic">g</span> or later (which includes Oracle Clusterware and Oracle ASM), and you also plan to upgrade your Oracle RAC database to 12<span class="italic">c</span> Release 1 (12.1), then the required configuration of existing databases is completed automatically when you complete the Oracle RAC upgrade, and this section does not concern you.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Before you start an Oracle RAC or Oracle Database installation on an Oracle Clusterware 12<span class="italic">c</span> Release 1 (12.1) installation, if you are upgrading from Oracle Database 11g Release 1 (11.1.0.7 or 11.1.0.6), or Oracle Database 10<span class="italic">g</span> Release 2 (10.2.0.4), then Oracle recommends that you check for the latest recommended patches for the release you are upgrading from, and install those patches as needed on your existing database installations before upgrading.
<p>For more information on recommended patches, see Oracle 12<span class="italic">c</span> Upgrade Companion (My Oracle Support Note 1462240.1):</p>
<p><code dir="ltr"><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1462240.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1462240.1</a></code></p>
</div>
</div>
<!-- class="sect2" -->
<a id="CIHBDEEG"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">9.3.2</span> Managing Server Pools with Earlier Database Versions</h3>
<p><a id="sthref676"></a><a id="sthref677"></a><a id="sthref678"></a>Starting with Oracle Grid Infrastructure 12<span class="italic">c</span>, Oracle Database server categories include roles such as Hub and Leaf that were not present in earlier releases. For this reason, you cannot create server pools using the Oracle RAC 11<span class="italic">g</span> version of Database Configuration Assistant (DBCA). To create server pools for earlier release Oracle RAC installations, use the following procedure:</p>
<ol>
<li>
<p>Log in as the Oracle Grid Infrastructure installation owner (Grid user)</p>
</li>
<li>
<p>Change directory to the 12.1 Oracle Grid Infrastructure binaries directory in the Grid home. For example:</p>
<pre dir="ltr"># cd /u01/app/12.1.0/grid/bin
</pre></li>
<li>
<p>Use the Oracle Grid Infrastructure 12<span class="italic">c</span> version of <code dir="ltr">srvctl</code> to create a server pool consisting of Hub Node roles. For example, to create a server pool called p_hub with a maximum size of one cluster node, enter the following command:</p>
<pre dir="ltr">srvctl add serverpool -serverpool p_hub -min 0 -max 1 -category hub;
</pre></li>
<li>
<p>Log in as the Oracle RAC installation owner, start DBCA from the Oracle RAC Oracle home. For example:</p>
<pre dir="ltr">$ cd /u01/app/oracle/product/11.2.0/dbhome_1/bin
$ dbca
</pre>
<p>DBCA discovers the server pool that you created with the Oracle Grid Infrastructure 12<span class="italic">c</span> <code dir="ltr">srvctl</code> command. Configure the server pool as required for your services.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD91277" href="../CWADD/GUID-13400D83-3FF4-482E-B7A7-41C864A491DC.htm#CWADD91277"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about managing resources using policies</div>
</div>
<!-- class="sect2" -->
<a id="CHDIEDFJ"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">9.3.3</span> Making Oracle ASM Available to Earlier Oracle Database Releases</h3>
<p>To use Oracle ASM with Oracle Database releases earlier than Oracle Database 12<span class="italic">c</span>, you must use Local ASM or set the cardinality for Flex ASM to ALL, instead of the default of 3. After you install Oracle Grid Infrastructure 12<span class="italic">c</span>, if you want to use Oracle ASM to provide storage service for Oracle Database releases that are earlier than Oracle Database 12<span class="italic">c</span>, then you must use the following command to modify the Oracle ASM resource (ora.asm):</p>
<p><code dir="ltr">$ srvctl modify asm -count ALL</code></p>
<p>This setting changes the cardinality of the Oracle ASM resource so that Oracle Flex ASM instances run on all cluster nodes. You must change the setting even if you have a cluster with three or less than three nodes, to ensure database releases earlier than 11<span class="italic">g</span> Release 2 can find the ora.<span class="italic">node</span>.<span class="italic">sid</span>.<span class="italic">inst</span> resource alias.</p>
<p>If you have Oracle Database 10<span class="italic">g</span> Release 2 databases that use Oracle ASM for storage, then set the <code dir="ltr">SQLNET.ALLOWED_LOGON_VERSION=8</code> in the <code dir="ltr">$crs_home/network/admin/sqlnet.ora</code> file.</p>
</div>
<!-- class="sect2" -->
<a id="CIHFHJFJ"></a>
<div id="CWLIN494" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">9.3.4</span> Using ASMCA to Administer Disk Groups for Earlier Database Versions</h3>
<p><a id="sthref679"></a><a id="sthref680"></a><a id="sthref681"></a>Use Oracle ASM Configuration Assistant (ASMCA) to create and modify disk groups when you install earlier Oracle databases and Oracle RAC databases on Oracle Grid Infrastructure installations. Starting with Oracle Database 11<span class="italic">g</span> Release 2 (11.2), Oracle ASM is installed as part of an Oracle Grid Infrastructure installation, with Oracle Clusterware. You can no longer use Database Configuration Assistant (DBCA) to perform administrative tasks on Oracle ASM.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink OSTMG10045" href="../OSTMG/GUID-AE540604-92D9-4CFE-A40E-BF4486163772.htm#OSTMG10045"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for details about configuring disk group compatibility for databases using Oracle Database 11<span class="italic">g</span> or earlier software with Oracle Grid Infrastructure 12<span class="italic">c</span> (12.1)</div>
</div>
<!-- class="sect2" -->
<a id="BABGIJDH"></a>
<div id="CWLIN341" class="sect2">
<h3 class="sect2"><span class="secnum">9.3.5</span> Pinning Cluster Nodes for Oracle Database Release 10.x or 11.x</h3>
<p>When Oracle Clusterware 12<span class="italic">c</span> Release 1 (12.1) is installed on a cluster with no previous Oracle software version, it configures the cluster nodes dynamically, which is compatible with Oracle Database Release 11.2 and later, but Oracle Database 10<span class="italic">g</span> and 11.1 require a persistent configuration. This process of association of a node name with a node number is called pinning.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
During an upgrade, all cluster member nodes are pinned automatically, and no manual pinning is required for existing databases. This procedure is required only if you install earlier database versions after installing Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1) software.</div>
<p><a id="sthref682"></a>To pin a node in preparation for installing or using an earlier Oracle Database version, use <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">/bin/crsctl</code> with the following command syntax, where <code dir="ltr"><span class="codeinlineitalic">nodes</span></code> is a space-delimited list of one or more nodes in the cluster whose configuration you want to pin:</p>
<pre dir="ltr">crsctl pin css -n <span class="italic">nodes</span>
</pre>
<p>For example, to pin nodes <code dir="ltr">node3</code> and <code dir="ltr">node4</code>, log in as <code dir="ltr">root</code> and enter the following command:</p>
<pre dir="ltr">$ crsctl pin css -n node3 node4
</pre>
<p>To determine if a node is in a pinned or unpinned state, use <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">/bin/olsnodes</code> with the following command syntax:</p>
<p>To list all pinned nodes:</p>
<pre dir="ltr">olsnodes -t -n 
</pre>
<p>For example:</p>
<pre dir="ltr"># /u01/app/12.1.0/grid/bin/olsnodes -t -n
node1 1       Pinned
node2 2       Pinned
node3 3       Pinned
node4 4       Pinned
</pre>
<p>To list the state of a particular node:</p>
<pre dir="ltr">olsnodes -t -n node3
</pre>
<p>For example:</p>
<pre dir="ltr"># /u01/app/12.1.0/grid/bin/olsnodes -t -n node3
node3 3       Pinned
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD91595" href="../CWADD/GUID-6A4E73C4-E1A0-4D90-B69A-7B2B4DAB66BA.htm#CWADD91595"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about pinning and unpinning nodes</div>
</div>
<!-- class="sect2" -->
<a id="BABFDGBI"></a>
<div id="CWLIN343" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">9.3.6</span> Using the Correct LSNRCTL Commands</h3>
<p>To administer local and SCAN listeners using the <code dir="ltr">lsnrctl</code> command, set your <code dir="ltr">$ORACLE_HOME</code> environment variable to the path for the Oracle Grid Infrastructure home (Grid home). Do not attempt to use the <code dir="ltr">lsnrctl</code> commands from Oracle home locations for previous releases, as they cannot be used with the new release.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABBEJFG"></a>
<div id="CWLIN344" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">9.4</span> Modifying Oracle Clusterware Binaries After Installation</h2>
<p><a id="sthref683"></a><a id="sthref684"></a><a id="sthref685"></a><a id="sthref686"></a><a id="sthref687"></a>After installation, if you need to modify the Oracle Clusterware configuration, then you must unlock the Grid home.</p>
<p>For example, if you want to apply a one-off patch, or if you want to modify an Oracle Clusterware configuration to run IPC traffic over RDS on the interconnect instead of using the default UDP, then you must unlock the Grid home.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Before relinking executables, you must shut down all executables that run in the Oracle home directory that you are unlocking and relinking. In addition, shut down applications linked with Oracle shared libraries.</div>
<p>Unlock the home using the following procedure:</p>
<ol>
<li>
<p>Log in as <code dir="ltr">root</code>, and change directory to the path <span class="italic">Grid_home</span>/crs/install, where <span class="italic">Grid_home</span> is the path to the Grid home, and unlock the Grid home using the command <code dir="ltr">rootcrs.sh -unlock -crshome</code> <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code>, where Grid_home is the path to your Grid infrastructure home. For example, with the Grid home <code dir="ltr">/u01/app/12.1.0/grid</code>, enter the following command:</p>
<pre dir="ltr"># cd /u01/app/12.1.0/grid/crs/install
# perl rootcrs.sh -unlock -crshome /u01/app/12.1.0/grid
</pre></li>
<li>
<p>Change user to the Oracle Grid Infrastructure software owner, and relink binaries using the command syntax <code dir="ltr">make -f</code> <span class="italic">Grid_home</span><code dir="ltr">/rdbms/lib/ins_rdbms.mk</code> <span class="italic">target</span>, where <span class="italic">Grid_home</span> is the Grid home, and <span class="italic">target</span> is the binaries that you want to relink. For example, where the Grid user is <code dir="ltr">grid</code>, <code dir="ltr">$ORACLE_HOME</code> is set to the Grid home, and where you are updating the interconnect protocol from UDP to IPC, enter the following command:</p>
<pre dir="ltr"># su grid
$ make -f $ORACLE_HOME/rdbms/lib/ins_rdbms.mk ipc_rds ioracle
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
To relink binaries, you can also change to the Oracle Grid Infrastructure installation owner and run the command <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">/bin/relink</code>.</div>
</li>
<li>
<p>Relock the Grid home and restart the cluster using the following command:</p>
<pre dir="ltr"># perl rootcrs.sh -patch
</pre></li>
<li>
<p>Repeat steps 1 through 3 on each cluster member node.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
<a id="sthref688"></a><a id="sthref689"></a><a id="sthref690"></a>Do not delete directories in the Grid home. For example, do not delete the directory <span class="italic">Grid_home</span>/Opatch. If you delete the directory, then the Grid infrastructure installation owner cannot use Opatch to patch the grid home, and Opatch displays the error message &#34;<code dir="ltr">checkdir error: cannot create</code> <span class="italic">Grid_home</span><code dir="ltr">/OPatch</code>&#34;.</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment605">
<tr>
<td class="cellalignment612">
<table class="cellalignment610">
<tr>
<td class="cellalignment609"><a href="crsunix.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment609"><a href="rem_orcl.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment614">
<table class="cellalignment608">
<tr>
<td class="cellalignment609"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment609"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment609"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment609"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment609"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment609"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>