<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-4965"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/How%20to%20Upgrade%20to%20Oracle%20Grid%20Infrastructure%2012c%20Release%201"></a><title>How to Upgrade to Oracle Grid Infrastructure 12c Release 1</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-11T4:23:40Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Grid Infrastructure Installation Guide"/>
<meta name="dcterms.identifier" content="E48914-22"/>
<meta name="dcterms.isVersionOf" content="CWLIN"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2013, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="trouble.htm" title="Previous" type="text/html"/>
<link rel="Next" href="app_nonint.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48914-22.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">17/22</span> <!-- End Header -->
<div id="CWLIN10001" class="appendix"><a id="BABEHGJG"></a>
<h1 class="appendix"><span class="secnum">B</span> How to Upgrade to Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1</h1>
<p>This appendix describes how to perform Oracle Clusterware and Oracle Automatic Storage Management (Oracle ASM) upgrades.</p>
<p>Oracle Clusterware upgrades can be rolling upgrades, in which a subset of nodes are brought down and upgraded while other nodes remain active. Oracle ASM 12<span class="italic">c</span> Release 1 (12.1) upgrades can be rolling upgrades. If you upgrade a subset of nodes, then a software-only installation is performed on the existing cluster nodes that you do not select for upgrade.</p>
<p>This appendix contains the following topics:</p>
<ul>
<li>
<p><a href="#BABEJEJE">Back Up the Oracle Software Before Upgrades</a></p>
</li>
<li>
<p><a href="#CEGJHHFJ">About Oracle Grid Infrastructure and Oracle ASM Upgrade and Downgrade</a></p>
</li>
<li>
<p><a href="#CEGBEJEG">Options for Oracle Grid Infrastructure Upgrades and Downgrades</a></p>
</li>
<li>
<p><a href="#BABEIBEE">Restrictions and Guidelines for Oracle Grid Infrastructure Upgrades</a></p>
</li>
<li>
<p><a href="#BABCHHDD">Preparing to Upgrade an Existing Oracle Clusterware Installation</a></p>
</li>
<li>
<p><a href="#CEGEEAAF">Using CVU to Validate Readiness for Oracle Clusterware Upgrades</a></p>
</li>
<li>
<p><a href="#CEGJCGBC">Understanding Rolling Upgrades Using Batches</a></p>
</li>
<li>
<p><a href="#BABHGAGJ">Performing Rolling Upgrade of Oracle Grid Infrastructure</a></p>
</li>
<li>
<p><a href="#CEGECJAD">Restrictions and Guidelines for Upgrading and Patching Oracle ASM</a></p>
</li>
<li>
<p><a href="#CEGCIDDG">Performing Rolling Upgrade of Oracle ASM</a></p>
</li>
<li>
<p><a href="#CHDJCIGA">Applying Patches to Oracle ASM</a></p>
</li>
<li>
<p><a href="#BABJEFCC">Updating Oracle Enterprise Manager Cloud Control Target Parameters</a></p>
</li>
<li>
<p><a href="#CEGGHAFG">Unlocking the Existing Oracle Clusterware Installation</a></p>
</li>
<li>
<p><a href="#CEGCDBDI">Checking Cluster Health Monitor Repository Size After Upgrading</a></p>
</li>
<li>
<p><a href="#BABFCIAG">Downgrading Oracle Clusterware After an Upgrade</a></p>
</li>
</ul>
<a id="BABEJEJE"></a>
<div id="CWLIN418" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.1</span> Back Up the Oracle Software Before Upgrades</h2>
<p>Before you make any changes to the Oracle software, Oracle recommends that you create a backup of the Oracle software and databases.</p>
</div>
<!-- class="sect1" -->
<a id="CEGJHHFJ"></a>
<div id="CWLIN516" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.2</span> About Oracle Grid Infrastructure and Oracle ASM Upgrade and Downgrade</h2>
<p>You can upgrade Oracle Grid Infrastructure in any of the following ways:</p>
<ul>
<li>
<p>Rolling Upgrade which involves upgrading individual nodes without stopping Oracle Grid Infrastructure on other nodes in the cluster</p>
</li>
<li>
<p>Non-rolling Upgrade which involves bringing down all the nodes except one. A complete cluster outage occurs while the root script stops the old Oracle Clusterware stack and starts the new Oracle Clusterware stack on the node where you initiate the upgrade. After upgrade is completed, the new Oracle Clusterware is started on all the nodes.</p>
</li>
</ul>
<p>Note that some services are disabled when one or more nodes are in the process of being upgraded. All upgrades are out-of-place upgrades, meaning that the software binaries are placed in a different Grid home from the Grid home used for the prior release.</p>
<p>You can downgrade from Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1) to prior releases of Oracle Grid Infrastructure. Be aware that if you downgrade to a prior release, then your cluster must conform with the configuration requirements for that prior release, and the features available for the cluster consist only of the features available for that prior release of Oracle Clusterware and Oracle ASM.</p>
<p>If you have an existing Oracle ASM 11<span class="italic">g</span> Release 1 (11.1) or 10<span class="italic">g</span> release instance, with Oracle ASM in a separate home, then you can either upgrade it at the time that you install Oracle Grid Infrastructure, or you can upgrade it after the installation, using Oracle ASM Configuration Assistant (ASMCA). However, be aware that a number of Oracle ASM features are disabled until you upgrade Oracle ASM, and Oracle Clusterware management of Oracle ASM does not function correctly until Oracle ASM is upgraded, because Oracle Clusterware only manages Oracle ASM when it is running in the Oracle Grid Infrastructure home. For this reason, Oracle recommends that if you do not upgrade Oracle ASM at the same time as you upgrade Oracle Clusterware, then you should upgrade Oracle ASM immediately afterward. This issue does not apply to Oracle ASM 11<span class="italic">g</span> Release 2 (11.2) and later, as the Oracle Grid Infrastructure home contains Oracle ASM binaries as well.</p>
<p>You can perform out-of-place upgrades to an Oracle ASM instance using Oracle ASM Configuration Assistant (ASMCA). In addition to running ASMCA using the graphical user interface, you can run ASMCA in non-interactive (silent) mode.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must complete an upgrade before attempting to use cluster backup files. You cannot use backups for a cluster that has not completed upgrade.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink UPGRD003" href="../UPGRD/upgrade.htm#UPGRD003"><span class="italic">Oracle Database Upgrade Guide</span></a> and <a class="olink OSTMG036" href="../OSTMG/GUID-BC612D35-5399-4A35-843E-CF76E3D3CDB5.htm#OSTMG036"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for additional information about upgrading existing Oracle ASM installations</div>
</div>
<!-- class="sect1" -->
<a id="CEGBEJEG"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.3</span> Options for Oracle Grid Infrastructure Upgrades and Downgrades</h2>
<p>Upgrade options from Oracle Grid Infrastructure 11<span class="italic">g</span> to Oracle Grid Infrastructure 12<span class="italic">c</span> include the following:</p>
<ul>
<li>
<p>Oracle Grid Infrastructure rolling upgrade which involves upgrading individual nodes without stopping Oracle Grid Infrastructure on other nodes in the cluster</p>
</li>
<li>
<p>Oracle Grid Infrastructure non-rolling upgrade by bringing the cluster down and upgrading the complete cluster</p>
</li>
</ul>
<p>Upgrade options from Oracle Grid Infrastructure 11<span class="italic">g</span> Release 2 (11.2) to Oracle Grid Infrastructure 12<span class="italic">c</span> include the following:</p>
<ul>
<li>
<p>Oracle Grid Infrastructure rolling upgrade, with OCR and voting disks on Oracle ASM</p>
</li>
<li>
<p>Oracle Grid Infrastructure complete cluster upgrade (downtime, non-rolling), with OCR and voting disks on Oracle ASM</p>
</li>
</ul>
<p>Upgrade options from releases before Oracle Grid Infrastructure 11<span class="italic">g</span> Release 2 (11.2) to Oracle Grid Infrastructure 12<span class="italic">c</span> include the following:</p>
<ul>
<li>
<p>Oracle Grid Infrastructure rolling upgrade, with OCR and voting disks on storage other than Oracle ASM or shared file system</p>
</li>
<li>
<p>Oracle Grid Infrastructure complete cluster upgrade (downtime, non-rolling), with OCR and voting disks on storage other than Oracle ASM or shared file system</p>
</li>
</ul>
<p>Downgrade options from Oracle Grid Infrastructure 12<span class="italic">c</span> to earlier releases include the following:</p>
<ul>
<li>
<p>Oracle Grid Infrastructure downgrade to Oracle Grid Infrastructure 11<span class="italic">g</span> Release 2 (11.2)</p>
</li>
<li>
<p>Oracle Grid Infrastructure downgrades to releases before Oracle Grid Infrastructure 11<span class="italic">g</span> Release 2 (11.2), Oracle Grid Infrastructure 11<span class="italic">g</span> Release 1 (11.1), Oracle Clusterware and Oracle ASM 10<span class="italic">g</span>, if storage for OCR and voting files is on storage other than Oracle ASM</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="BABEIBEE"></a>
<div id="CWLIN420" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.4</span> Restrictions and Guidelines for Oracle Grid Infrastructure Upgrades</h2>
<p>Oracle recommends that you use the Cluster Verification Utility tool (CVU) to check if there are any patches required for upgrading your existing Oracle Grid Infrastructure 11<span class="italic">g</span> Release 2 (11.2) or Oracle RAC database 11<span class="italic">g</span> Release 2 (11.2) installations.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CEGEEAAF">Section B.6, &#34;Using CVU to Validate Readiness for Oracle Clusterware Upgrades&#34;</a></div>
<p><a id="sthref766"></a>Be aware of the following restrictions and changes for upgrades to Oracle Grid Infrastructure installations, which consists of Oracle Clusterware and Oracle Automatic Storage Management (Oracle ASM):</p>
<ul>
<li>
<p>When you upgrade from Oracle Grid Infrastructure 11<span class="italic">g</span> or Oracle Clusterware and Oracle ASM 10<span class="italic">g</span> releases to Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1), you upgrade to a standard cluster configuration. You can enable Oracle Flex Cluster configuration after the upgrade.</p>
</li>
<li>
<p>If the Oracle Cluster Registry (OCR) and voting file locations for your current installation are on raw or block devices, then you must migrate them to Oracle ASM disk groups or shared file systems before upgrading to Oracle Grid Infrastructure 12<span class="italic">c</span>.</p>
</li>
<li>
<p>If you want to upgrade Oracle Grid Infrastructure releases before Oracle Grid Infrastructure 11<span class="italic">g</span> Release 2 (11.2), where the OCR and voting files are on raw or block devices, and you want to migrate these files to Oracle ASM rather than to a shared file system, then you must upgrade to Oracle Grid Infrastructure 11<span class="italic">g</span> Release 2 (11.2) before you upgrade to Oracle Grid Infrastructure 12<span class="italic">c</span>.</p>
</li>
<li>
<p>Downgrades from an Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1) Oracle Flex Cluster configuration to a Standard cluster configuration are not supported. All cluster configurations in releases earlier than Oracle Grid Infrastructure 12<span class="italic">c</span> are Standard cluster configurations. This downgrade restriction includes downgrades from an Oracle Flex Cluster to Oracle Grid Infrastructure 11<span class="italic">g</span> cluster, or to Oracle Clusterware and Oracle ASM 10<span class="italic">g</span> clusters.</p>
</li>
<li>
<p>You can downgrade to the Oracle Grid Infrastructure release you upgraded from. For example, if you upgraded from Oracle Grid Infrastructure 11<span class="italic">g</span> Release 2 (11.2) to Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1), you can only downgrade to Oracle Grid Infrastructure 11<span class="italic">g</span> Release 2 (11.2).</p>
</li>
<li>
<p><a id="sthref767"></a><a id="sthref768"></a>To change a cluster member node role to Leaf, you must have completed the upgrade on all Oracle Grid Infrastructure nodes so that the active version is Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1) or later.</p>
</li>
<li>
<p>To upgrade existing Oracle Clusterware installations to a standard configuration Oracle Grid Infrastructure 12<span class="italic">c</span> cluster, your release must be greater than or equal to Oracle Clusterware 10<span class="italic">g</span> Release 1 (10.1.0.5), Oracle Clusterware 10<span class="italic">g</span> Release 2 (10.2.0.3), Oracle Grid Infrastructure 11<span class="italic">g</span> Release 1 (11.1.0.6), or Oracle Grid Infrastructure 11<span class="italic">g</span> Release 2 (11.2).</p>
</li>
<li>
<p>To upgrade existing Oracle Grid Infrastructure installations from Oracle Grid Infrastructure 11<span class="italic">g</span> Release 2 (11.2.0.2) to a later release, you must apply patch 11.2.0.2.3 (11.2.0.2 PSU 3) or later.</p>
</li>
<li>
<p><a id="sthref769"></a><a id="sthref770"></a><a id="sthref771"></a>Do not delete directories in the Grid home. For example, do not delete the directory <span class="italic">Grid_home</span>/Opatch. If you delete the directory, then the Grid infrastructure installation owner cannot use OPatch to patch the grid home, and OPatch displays the error message &#34;&#39;checkdir&#39; error: cannot create <span class="italic">Grid_home</span>/OPatch&#34;.</p>
</li>
<li>
<p>To upgrade existing Oracle Grid Infrastructure installations to Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1), you must first verify if you need to apply any mandatory patches for upgrade to succeed. See <a href="#CEGEEAAF">Section B.6</a> for steps to check readiness.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Oracle 12<span class="italic">c</span> Upgrade Companion (My Oracle Support Note 1462240.1):
<p><code dir="ltr"><a href="https://support.oracle.com/oip/faces/secure/km/DocumentDisplay.jspx?id=1462240.1">https://support.oracle.com/oip/faces/secure/km/DocumentDisplay.jspx?id=1462240.1</a></code></p>
</div>
</li>
<li>
<p>Oracle Clusterware and Oracle ASM upgrades are always out-of-place upgrades. You cannot perform an in-place upgrade of Oracle Clusterware and Oracle ASM to existing homes.</p>
</li>
<li>
<p>If the existing Oracle Clusterware home is a shared home, note that you can use a non-shared home for the Oracle Grid Infrastructure for a cluster home for Oracle Clusterware and Oracle ASM 12<span class="italic">c</span> Release 1 (12.1).</p>
</li>
<li>
<p>The same user that owned the earlier release Oracle Grid Infrastructure software must perform the Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1) upgrade. Before Oracle Database 11<span class="italic">g</span>, either all Oracle software installations were owned by the Oracle user, typically <code dir="ltr">oracle</code>, or Oracle Database software was owned by <code dir="ltr">oracle</code>, and Oracle Clusterware software was owned by a separate user, typically <code dir="ltr">crs</code>.</p>
</li>
<li>
<p>Oracle ASM and Oracle Clusterware both run in the Oracle Grid Infrastructure home.</p>
</li>
<li>
<p>During a major release upgrade to Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1), the software in the 12<span class="italic">c</span> Release 1 (12.1) Oracle Grid Infrastructure home is not fully functional until the upgrade is completed. <a id="sthref772"></a><a id="sthref773"></a><a id="sthref774"></a>Running <code dir="ltr">srvctl</code>, <code dir="ltr">crsctl</code>, and other commands from the new Grid homes are not supported until the final <code dir="ltr">rootupgrade.sh</code> script is run and the upgrade is complete across all nodes.</p>
<p>To manage databases in existing earlier release database homes during the Oracle Grid Infrastructure upgrade, use the <code dir="ltr">srvctl</code> from the existing database homes.</p>
</li>
<li>
<p>You can perform upgrades on a shared Oracle Clusterware home.</p>
</li>
<li>
<p>During Oracle Clusterware installation, if there is a single instance Oracle ASM release on the local node, then it is converted to a clustered Oracle ASM 12<span class="italic">c</span> Release 1 (12.1) installation, and Oracle ASM runs in the Oracle Grid Infrastructure home on all nodes.</p>
</li>
<li>
<p>If a single instance (non-clustered) Oracle ASM installation is on a remote node, which is a node other than the local node (the node on which the Oracle Grid Infrastructure installation is being performed), then it will remain a single instance Oracle ASM installation. However, during installation, if you select to place the Oracle Cluster Registry (OCR) and voting files on Oracle ASM, then a clustered Oracle ASM installation is created on all nodes in the cluster, and the single instance Oracle ASM installation on the remote node will become nonfunctional.</p>
</li>
<li>
<p>After completing the force upgrade of a cluster to a release, all inaccessible nodes must be deleted from the cluster or joined to the cluster before starting the cluster upgrade to a later release.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink UPGRD002" href="../UPGRD/preup.htm#UPGRD002"><span class="italic">Oracle Database Upgrade Guide</span></a> for additional information about preparing for upgrades</div>
</div>
<!-- class="sect1" -->
<a id="BABCHHDD"></a>
<div id="CWLIN422" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.5</span> Preparing to Upgrade an Existing Oracle Clusterware Installation</h2>
<p>If you have an existing Oracle Clusterware installation, then you upgrade your existing cluster by performing an out-of-place upgrade. You cannot perform an in-place upgrade.</p>
<p>The following sections list the steps you can perform before you upgrade Oracle Grid Infrastructure:</p>
<ul>
<li>
<p><a href="#CHDFFHBJ">Checks to Complete Before Upgrading Oracle Clusterware</a></p>
</li>
<li>
<p><a href="#BABIFEFI">Unset Oracle Environment Variables</a></p>
</li>
<li>
<p><a href="#CHDEGICD">Running the Oracle ORAchk Upgrade Readiness Assessment</a></p>
</li>
</ul>
<a id="CHDFFHBJ"></a>
<div id="CWLIN424" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">B.5.1</span> Checks to Complete Before Upgrading Oracle Clusterware</h3>
<p>Complete the following tasks before starting an upgrade:</p>
<ol>
<li>
<p>For each node, use Cluster Verification Utility to ensure that you have completed preinstallation steps. It can generate Fixup scripts to help you to prepare servers. In addition, the installer will help you to ensure all required prerequisites are met.</p>
<p>Ensure that you have information you will need during installation, including the following:</p>
<ul>
<li>
<p>An Oracle base location for Oracle Clusterware.</p>
</li>
<li>
<p>An Oracle Grid Infrastructure home location that is different from your existing Oracle Clusterware location.</p>
</li>
<li>
<p>SCAN name and addresses, and other network addresses, as described in <a href="networks.htm#CIHECJAF">Chapter 5</a>.</p>
</li>
<li>
<p>Privileged user operating system groups, as described in <a href="usrgrps.htm#CHDIGEIH">Chapter 6</a>.</p>
</li>
<li>
<p><code dir="ltr">root</code> user access, to run scripts as <code dir="ltr">root</code> during installation, using one of the options described in <a href="crsunix.htm#BEHFHBJG">Section 8.1.1</a>.</p>
</li>
</ul>
</li>
<li>
<p><a id="sthref775"></a><a id="sthref776"></a><a id="sthref777"></a><a id="sthref778"></a>For the installation owner running the installation, if you have environment variables set for the existing installation, then unset the environment variables <code dir="ltr">$ORACLE_HOME</code> and <code dir="ltr">$ORACLE_SID</code>, as these environment variables are used during upgrade. For example:</p>
<pre dir="ltr">$ unset ORACLE_BASE
$ unset ORACLE_HOME
$ unset ORACLE_SID
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BABIFEFI">Section B.5.2, &#34;Unset Oracle Environment Variables&#34;</a></div>
</li>
<li>
<p>If the cluster was previously forcibly upgraded, then ensure that all inaccessible nodes have been deleted from the cluster or joined to the cluster before starting another upgrade. For example, if the cluster was forcibly upgraded from 11.2.0.3 to 12.1.0.1, then ensure that all inaccessible nodes have been deleted from the cluster or joined to the cluster before upgrading to another release, for example, 12.1.0.2.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABIFEFI"></a>
<div id="CWLIN419" class="sect2">
<h3 class="sect2"><span class="secnum">B.5.2</span> Unset Oracle Environment Variables</h3>
<p>Unset Oracle environment variables.</p>
<p>If you have set ORA_CRS_HOME as an environment variable, following instructions from Oracle Support, then unset it before starting an installation or upgrade. You should never use ORA_CRS_HOME as an environment variable except under explicit direction from Oracle Support.</p>
<p>Check to ensure that installation owner login shell profiles (for example, <code dir="ltr">.profile</code> or <code dir="ltr">.cshrc</code>) do not have ORA_CRS_HOME set.</p>
<p><a id="sthref779"></a><a id="sthref780"></a>If you have had an existing installation on your system, and you are using the same user account to install this installation, then unset the following environment variables: ORA_CRS_HOME; ORACLE_HOME; ORA_NLS10; TNS_ADMIN; and any other environment variable set for the Oracle installation user that is connected with Oracle software homes.</p>
<p>Also, ensure that the $ORACLE_HOME/bin path is removed from your PATH environment variable.</p>
</div>
<!-- class="sect2" -->
<a id="CHDEGICD"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">B.5.3</span> Running the Oracle ORAchk Upgrade Readiness Assessment</h3>
<p>ORAchk (Oracle RAC Configuration Audit Tool) Upgrade Readiness Assessment can be used to obtain an automated upgrade-specific health check for upgrades to Oracle Grid Infrastructure 11.2.0.3, 11.2.0.4, 12.1.0.1, and 12.1.0.2. You can run the ORAchk Upgrade Readiness Assessment tool and automate many of the manual pre-upgrade and post upgrade checks.</p>
<p>Oracle recommends that you download and run the latest version of ORAchk from My Oracle Support. For information about downloading, configuring, and running ORAchk configuration audit tool, refer to My Oracle Support note 1457357.1, which is available at the following URL:</p>
<p><code dir="ltr"><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1457357.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1457357.1</a></code></p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGEEAAF"></a>
<div id="CWLIN517" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.6</span> Using CVU to Validate Readiness for Oracle Clusterware Upgrades</h2>
<p>You can use Cluster Verification Utility (CVU) to assist you with system checks in preparation for starting an upgrade. CVU runs the appropriate system checks automatically, and either prompts you to fix problems, or provides a fixup script to be run on all nodes in the cluster before proceeding with the upgrade.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CEGHCABG">About the CVU Grid Upgrade Validation Command Options</a></p>
</li>
<li>
<p><a href="#CEGBHJJD">Example of Verifying System Upgrade Readiness for Grid Infrastructure</a></p>
</li>
</ul>
<a id="CEGHCABG"></a>
<div id="CWLIN518" class="sect2">
<h3 class="sect2"><span class="secnum">B.6.1</span> About the CVU Grid Upgrade Validation Command Options</h3>
<p>You can run upgrade validations in one of two ways:</p>
<ul>
<li>
<p>Run OUI, and allow the CVU validation built into OUI to perform system checks and generate fixup scripts</p>
</li>
<li>
<p>Run the CVU manual script cluvfy.sh script to perform system checks and generate fixup scripts</p>
</li>
</ul>
<p>To use OUI to perform pre-install checks and generate fixup scripts, run the installation as you normally would. OUI starts CVU, and performs system checks as part of the installation process. Selecting OUI to perform these checks is particularly appropriate if you think you have completed preinstallation checks, and you want to confirm that your system configuration meets minimum requirements for installation.</p>
<p>To use the cluvfy.sh command-line script for CVU, navigate to the staging area for the upgrade, where the <code dir="ltr">runcluvfy.sh</code> command is located, and run the command <code dir="ltr">runcluvfy.sh stage -pre crsinst -upgrade</code> to check the readiness of your Oracle Clusterware installation for upgrades. Running <code dir="ltr">runcluvfy.sh</code> with the <code dir="ltr">-pre crsinst -upgrade</code> options performs system checks to confirm if the cluster is in a correct state for upgrading from an existing clusterware installation.</p>
<p>The command uses the following syntax, where variable content is indicated by italics:</p>
<pre dir="ltr">runcluvfy.sh stage -pre crsinst -upgrade [-rolling] -src_crshome <span class="italic">src_Gridhome</span>
-dest_crshome <span class="italic">dest_Gridhome</span> -dest_version <span class="italic">dest_release</span>
[-fixup][-method {sudo|root} [-location <span class="italic">dir_path</span>] [-user <span class="italic">user_name</span>]] [-verbose]
</pre>
<pre dir="ltr"></pre>
<p>The options are:</p>
<ul>
<li>
<p><code dir="ltr">-rolling</code></p>
<p>Use this flag to verify readiness for rolling upgrades.</p>
</li>
<li>
<p><code dir="ltr">-src_crshome</code> <code dir="ltr"><span class="codeinlineitalic">src_Gridhome</span></code></p>
<p>Use this flag to indicate the location of the source Oracle Clusterware or Grid home that you are upgrading, where <code dir="ltr"><span class="codeinlineitalic">src_Gridhome</span></code> is the path to the home that you want to upgrade.</p>
</li>
<li>
<p><code dir="ltr">-dest_crshome</code> <code dir="ltr"><span class="codeinlineitalic">dest_Gridhome</span></code></p>
<p>Use this flag to indicate the location of the upgrade Grid home, where <code dir="ltr"><span class="codeinlineitalic">dest_ Gridhome</span></code> is the path to the Grid home.</p>
</li>
<li>
<p><code dir="ltr">-dest_version</code> <code dir="ltr"><span class="codeinlineitalic">dest_release</span></code></p>
<p>Use the <code dir="ltr">-dest_version</code> flag to indicate the release number of the upgrade, including any patchset. The release number must include the five digits designating the release to the level of the platform-specific patch. For example: <code dir="ltr">12.1.0.1.0</code>.</p>
</li>
<li>
<p><code dir="ltr">-fixup</code> <code dir="ltr">[-method {sudo|root} [-location</code> <code dir="ltr"><span class="codeinlineitalic">dir_path</span></code>] <code dir="ltr">[-user</code> <code dir="ltr"><span class="codeinlineitalic">user_name</span></code><code dir="ltr">]</code></p>
<p>Use the <code dir="ltr">-fixup</code> flag to indicate that you want to generate instructions for any required steps you need to complete to ensure that your cluster is ready for an upgrade. The default location is the CVU work directory.</p>
<p>The <code dir="ltr">-fixup -method</code> flag defines the method by which <code dir="ltr">root</code> scripts are run. The <code dir="ltr">-method</code> flag requires one of the following options:</p>
<ul>
<li>
<p><code dir="ltr">sudo</code>: Run as a user on the sudoers list.</p>
</li>
<li>
<p><code dir="ltr">root</code>: Run as the <code dir="ltr">root</code> user.</p>
</li>
</ul>
<p>If you select <code dir="ltr">sudo</code>, then enter the <code dir="ltr">-location</code> flag to provide the path to Sudo on the server, and enter the -user flag to provide the user account with Sudo privileges.</p>
</li>
<li>
<p><code dir="ltr">-verbose</code></p>
<p>Use the <code dir="ltr">-verbose</code> flag to produce detailed output of individual checks.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CEGBHJJD"></a>
<div id="CWLIN519" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">B.6.2</span> Example of Verifying System Upgrade Readiness for Grid Infrastructure</h3>
<p>You can verify that the permissions required for installing Oracle Clusterware have been configured by running a command similar to the following:</p>
<pre dir="ltr">$ ./runcluvfy.sh stage -pre crsinst -upgrade -rolling -src_crshome 
/u01/app/11.2.0/grid -dest_crshome /u01/app/12.1.0/grid -dest_version
12.1.0.1 -fixup -verbose
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink UPGRD001" href="../UPGRD/intro.htm#UPGRD001"><span class="italic">Oracle Database Upgrade Guide</span></a></div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGJCGBC"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.7</span> Understanding Rolling Upgrades Using Batches</h2>
<p>Upgrades from earlier releases require that you upgrade the entire cluster. You cannot select or de-select individual nodes for upgrade. Oracle does not support attempting to add additional nodes to a cluster during a rolling upgrade.</p>
<p>Oracle recommends that you leave Oracle RAC instances running when upgrading Oracle Clusterware. When you start the <code dir="ltr">root</code> script on each node, the database instances on that node are shut down and then the <code dir="ltr">rootupgrade.sh</code> script starts the instances again. If you upgrade from Oracle Grid Infrastructure 11<span class="italic">g</span> Release 11.2.0.2 and later to any later release of Oracle Grid Infrastructure, then all nodes are selected for upgrade by default.</p>
<p>You can use <code dir="ltr">root</code> user automation to automate running the <code dir="ltr">rootupgrade.sh</code> script during the upgrade. When you use <code dir="ltr">root</code> automation, you can divide the nodes into groups, or batches, and start upgrades of these batches. Between batches, you can move services from nodes running the previous release to the upgraded nodes, so that services are not affected by the upgrade. Oracle recommends that you use <code dir="ltr">root</code> automation, and allow the <code dir="ltr">rootupgrade.sh</code> script to stop and start instances automatically. You can also continue to run <code dir="ltr">root</code> scripts manually.</p>
</div>
<!-- class="sect1" -->
<a id="BABHGAGJ"></a>
<div id="CWLIN425" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.8</span> Performing Rolling Upgrade of Oracle Grid Infrastructure</h2>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CEGFEAEF">Performing a Standard Upgrade from an Earlier Release</a></p>
</li>
<li>
<p><a href="#CEGFEBFF">Completing an Oracle Clusterware Upgrade when Nodes Become Unreachable</a></p>
</li>
<li>
<p><a href="#CEGEDCDB">Upgrading Inaccessible Nodes After Forcing an Upgrade</a></p>
</li>
</ul>
<a id="CEGFEAEF"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">B.8.1</span> Performing a Standard Upgrade from an Earlier Release</h3>
<p>Use the following procedure to upgrade the cluster from an earlier release:</p>
<ol>
<li>
<p>Start the installer, and select the option to upgrade an existing Oracle Clusterware and Oracle ASM installation.</p>
</li>
<li>
<p>On the node selection page, select all nodes.</p>
</li>
<li>
<p>Select installation options as prompted. Oracle recommends that you configure <code dir="ltr">root</code> script automation, so that the <code dir="ltr">rootupgrade.sh</code> script can be run automatically during the upgrade.</p>
</li>
<li>
<p>Run <code dir="ltr">root</code> scripts, using either automatically or manually:</p>
<ul>
<li>
<p><span class="bold">Running root scripts automatically</span></p>
<p>If you have configured <code dir="ltr">root</code> script automation, then use the pause between batches to relocate services from the nodes running the previous release to the new release.</p>
</li>
<li>
<p><span class="bold">Running root scripts manually</span></p>
<p>If you have not configured <code dir="ltr">root</code> script automation, then when prompted, run the <code dir="ltr">rootupgrade.sh</code> script on each node in the cluster that you want to upgrade.</p>
<p>If you run <code dir="ltr">root</code> scripts manually, then run the script on the local node first. The script shuts down the earlier release installation, replaces it with the new Oracle Clusterware release, and starts the new Oracle Clusterware installation.</p>
<p>After the script completes successfully, you can run the script in parallel on all nodes except for one, which you select as the last node. When the script is run successfully on all the nodes except the last node, run the script on the last node.</p>
<p>When upgrading from 12.1.0.1 Oracle Flex Cluster, Oracle recommends that you run the <code dir="ltr">rootupgrade.sh</code> script on all Hub Nodes before running it on Leaf Nodes.</p>
</li>
</ul>
</li>
<li>
<p>After running the <code dir="ltr">rootupgrade.sh</code> script on the last node in the cluster, if you are upgrading from a release earlier than Oracle Grid Infrastructure 11<span class="italic">g</span> Release 2 (11.2.0.2), and left the check box labeled <span class="bold">ASMCA</span> checked, as is the default, then Oracle Automatic Storage Management Configuration Assistant ASMCA runs automatically, and the Oracle Grid Infrastructure upgrade is complete. If you unchecked the box during the interview stage of the upgrade, then ASMCA is not run automatically.</p>
<p>If an earlier release of Oracle Automatic Storage Management (Oracle ASM) is installed, then the installer starts ASMCA to upgrade Oracle ASM to 12<span class="italic">c</span> Release 1 (12.1). You can choose to upgrade Oracle ASM at this time, or upgrade it later.</p>
<p>Oracle recommends that you upgrade Oracle ASM at the same time that you upgrade Oracle Clusterware. Until Oracle ASM is upgraded, Oracle Databases that use Oracle ASM cannot be created and the Oracle ASM management tools in the Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1) home (for example, <code dir="ltr">srvctl</code>) do not work.</p>
</li>
<li>
<p>Because the Oracle Grid Infrastructure home is in a different location than the former Oracle Clusterware and Oracle ASM homes, update any scripts or applications that use utilities, libraries, or other files that reside in the Oracle Clusterware and Oracle ASM homes.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
At the end of the upgrade, if you set the Oracle Cluster Registry (OCR) backup location manually to the earlier release Oracle Clusterware home (CRS home), then you must change the OCR backup location to the new Oracle Grid Infrastructure home (Grid home). If you did not set the OCR backup location manually, then the backup location is changed for you during the upgrade.
<p>Because upgrades of Oracle Clusterware are out-of-place upgrades, the previous release Oracle Clusterware home cannot be the location of the current release OCR backups. Backups in the old Oracle Clusterware home can be deleted.</p>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="trouble.htm#BABDBHAD">Section A.12, &#34;Failed or Incomplete Installations and Upgrades&#34;</a> for information about completing failed or incomplete upgrades</div>
</div>
<!-- class="sect2" -->
<a id="CEGFEBFF"></a>
<div id="CWLIN520" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">B.8.2</span> Completing an Oracle Clusterware Upgrade when Nodes Become Unreachable</h3>
<p>If some nodes become unreachable in the middle of an upgrade, then you cannot complete the upgrade, because the upgrade script (<code dir="ltr">rootupgrade.sh</code>) did not run on the unreachable nodes. Because the upgrade is incomplete, Oracle Clusterware remains in the previous release. You can confirm that the upgrade is incomplete by entering the command <code dir="ltr">crsctl query crs activeversion</code>.</p>
<p>To resolve this problem, run the <code dir="ltr">rootupgrade</code> command with the <code dir="ltr">-force</code> flag on any of the nodes where the <code dir="ltr">rootupgrade.sh</code> script has already completed as follows:</p>
<p><span class="italic">Grid_home</span><code dir="ltr">/rootupgrade.sh -force</code></p>
<p>For example:</p>
<pre dir="ltr"># /u01/app/12.1.0/grid/rootupgrade.sh -force
</pre>
<p>This command forces the upgrade to complete. Verify that the upgrade has completed by using the command <code dir="ltr">crsctl query crs activeversion</code>. The active release should be the upgrade release.</p>
<p>The force cluster upgrade has the following limitations:</p>
<ul>
<li>
<p>All active nodes must be upgraded to the newer release.</p>
</li>
<li>
<p>All inactive nodes (accessible or inaccessible) may be either upgraded or not upgraded.</p>
</li>
<li>
<p>For inaccessible nodes, after patch set upgrades, you can delete the node from the cluster. If the node becomes accessible later, and the patch version upgrade path is supported, then you can upgrade it to the new patch version.</p>
</li>
<li>
<p>If the cluster was previously forcibly upgraded, then ensure that all inaccessible nodes have been deleted from the cluster or joined to the cluster before starting the upgrade.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CEGEDCDB"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">B.8.3</span> Upgrading Inaccessible Nodes After Forcing an Upgrade</h3>
<p><a id="sthref781"></a><a id="sthref782"></a><a id="sthref783"></a>Starting with Oracle Grid Infrastructure 12<span class="italic">c</span>, after you complete a force cluster upgrade, you can join inaccessible nodes to the cluster as an alternative to deleting the nodes, which was required in earlier releases. To use this option, Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1) software must already be installed on the nodes.</p>
<p>To complete the upgrade of nodes that were inaccessible or unreachable:</p>
<ol>
<li>
<p>Log in as the Grid user on the node you want to join to the cluster.</p>
</li>
<li>
<p>Change directory to the <code dir="ltr">/crs/install</code> directory in the Oracle Grid Infrastructure 12c Release 1 (12.1) Grid home. For example:</p>
<pre dir="ltr">$ cd /u01/12.1.0/grid/crs/install
</pre></li>
<li>
<p>Run the following PERL command, where <code dir="ltr"><span class="codeinlineitalic">existingnode</span></code> is the name of the option and <code dir="ltr"><span class="codeinlineitalic">upgraded_node</span></code> is any node that was successfully upgraded and is currently part of the cluster:</p>
<pre dir="ltr">$ rootupgrade.sh -join -existingnode <span class="italic">upgraded_node</span>
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code dir="ltr">-join</code> operation is not supported for Oracle Clusterware releases earlier than 11.2.0.1.0. In such cases, delete the node and add it to Oracle Clusterware using the <code dir="ltr">addNode</code> command.</div>
</li>
</ol>
</div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref784"></a>
<h3 class="sect2"><span class="secnum">B.8.4</span> Changing the First Node for Install and Upgrade</h3>
<p>If the first node becomes inaccessible, you can force another node to be the first node for installation or upgrade. During installation, if <code dir="ltr">root.sh</code> fails to complete on the first node, run the following command on another node using the <code dir="ltr">-force</code> option:</p>
<pre dir="ltr">root.sh -force -first
</pre>
<p>For upgrade, run the following command:</p>
<pre dir="ltr">rootupgrade.sh -force -first
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGECJAD"></a>
<div id="CWLIN427" class="sect1">
<h2 class="sect1"><span class="secnum">B.9</span> Restrictions and Guidelines for Upgrading and Patching Oracle ASM</h2>
<p>Note the following if you intend to perform either full release or software patch level rolling upgrades of Oracle ASM:</p>
<ul>
<li>
<p>The active release of<a id="sthref785"></a> Oracle Clusterware must be 12<span class="italic">c</span> Release 1 (12.1). To determine the active release, enter the following command:</p>
<pre dir="ltr">$ crsctl query crs activeversion
</pre></li>
<li>
<p>You must ensure that any rebalance operations on your existing Oracle ASM installation are completed before starting the upgrade or patching process.</p>
</li>
<li>
<p>During the upgrade or rolling patch process, you alter the Oracle ASM instances to an upgrade state. You do not need to shut down database clients unless they are on Oracle ACFS. However, because this upgrade state limits Oracle ASM operations, you should complete the upgrade process soon after you begin. The following are the operations allowed when an Oracle ASM instance is in the upgrade state:</p>
<ul>
<li>
<p>Diskgroup mounts and dismounts</p>
</li>
<li>
<p>Opening, closing, resizing, or deleting database files</p>
</li>
<li>
<p>Recovering instances</p>
</li>
<li>
<p>Queries of fixed views and packages: Users are allowed to query fixed views and run anonymous PL/SQL blocks using fixed packages, such as <code dir="ltr">dbms_diskgroup</code>)</p>
</li>
</ul>
</li>
<li>
<p>You do not need to shut down database clients unless they are on Oracle ACFS.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
See <a href="#CEGFHHEA">Section B.10.1, &#34;Upgrading Oracle ASM Using ASMCA&#34;</a> for steps to upgrade Oracle ASM separately using ASMCA</div>
</div>
<!-- class="sect1" -->
<a id="CEGCIDDG"></a>
<div id="CWLIN524" class="sect1">
<h2 class="sect1"><span class="secnum">B.10</span> Performing Rolling Upgrade of Oracle ASM</h2>
<p><a id="sthref786"></a><a id="sthref787"></a>After you have completed the Oracle Clusterware portion of Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1) upgrade, you may need to upgrade Oracle ASM separately under the following conditions:</p>
<ul>
<li>
<p>If you are upgrading from a release in which Oracle ASM was in a separate Oracle home, such as Oracle ASM 10<span class="italic">g</span> Release 2 (10.2) or Oracle ASM 11<span class="italic">g</span> Release 1 (11.1)</p>
</li>
<li>
<p>If the Oracle ASM portion of the Oracle Grid Infrastructure upgrade failed, or for some other reason Automatic Storage Management Configuration assistant (<code dir="ltr">asmca</code>) did not run.</p>
</li>
</ul>
<p>You can use <code dir="ltr">asmca</code> to complete the upgrade separately, but you should do it soon after you upgrade Oracle Clusterware, as Oracle ASM management tools such as <code dir="ltr">srvctl</code> do not work until Oracle ASM is upgraded.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
ASMCA performs a rolling upgrade only if the earlier release of Oracle ASM is either 11.1.0.6 or 11.1.0.7. Otherwise, ASMCA performs a non-rolling upgrade, in which ASMCA shuts down all Oracle ASM instances on all nodes of the cluster, and then starts an Oracle ASM instance on each node from the new Oracle Grid Infrastructure home.</div>
<p>After you have upgraded Oracle ASM with Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1, you can install individual patches for Oracle ASM by downloading them from the Oracle Automated Release Update site. See <a href="#CEGECJAD">Section B.9, &#34;Restrictions and Guidelines for Upgrading and Patching Oracle ASM&#34;</a> for more information about upgrading Oracle ASM separately using ASMCA.</p>
<a id="CEGFHHEA"></a>
<div id="CWLIN527" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">B.10.1</span> Upgrading Oracle ASM Using ASMCA</h3>
<p>Complete the following tasks if you must upgrade from an Oracle ASM release where Oracle ASM was installed in a separate Oracle home, or if the Oracle ASM portion of Oracle Grid Infrastructure upgrade failed to complete:</p>
<ol>
<li>
<p>On the node you plan to start the upgrade, set the environment variable ASMCA_ROLLING_UPGRADE as true. For example:</p>
<pre dir="ltr">$ export ASMCA_ROLLING_UPGRADE=true
</pre></li>
<li>
<p>From the Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1) home, start ASMCA. For example:</p>
<pre dir="ltr">$ cd /u01/12.1/grid/bin
$ ./asmca
</pre></li>
<li>
<p>Select <span class="bold">Upgrade</span>.</p>
<p>ASM Configuration Assistant upgrades Oracle ASM in succession for all nodes in the cluster.</p>
</li>
<li>
<p>After you complete the upgrade, run the command to unset the ASMCA_ROLLING_UPGRADE environment variable.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink UPGRD" href="../UPGRD/toc.htm"><span class="italic">Oracle Database Upgrade Guide</span></a> and <a class="olink OSTMG" href="../OSTMG/toc.htm"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for additional information about preparing an upgrade plan for Oracle ASM, and for starting, completing, and stopping Oracle ASM upgrades</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDJCIGA"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.11</span> Applying Patches to Oracle ASM</h2>
<p>After you have upgraded Oracle ASM with Oracle Grid Infrastructure 12c Release 1, you can install individual patches for Oracle ASM by downloading them from My Oracle Support.</p>
<p>This section explains about Oracle ASM patches as follows:</p>
<ul>
<li>
<p><a href="#CEGHBEFA">About Individual (One-Off) Oracle ASM Patches</a></p>
</li>
<li>
<p><a href="#CEGCDHGE">About Oracle ASM Software Patch Levels</a></p>
</li>
<li>
<p><a href="#CEGDJAJB">Patching Oracle ASM to a Software Patch Level</a></p>
</li>
</ul>
<a id="CEGHBEFA"></a>
<div id="CWLIN525" class="sect2">
<h3 class="sect2"><span class="secnum">B.11.1</span> About Individual (One-Off) Oracle ASM Patches</h3>
<p>Individual patches are called <span class="bold">one-off</span> patches. An Oracle ASM one-off patch is available for a specific released release of Oracle ASM. If a patch you want is available, then you can download the patch and apply it to Oracle ASM using the OPatch Utility. The OPatch inventory keeps track of the patches you have installed for your release of Oracle ASM. If there is a conflict between the patches you have installed and patches you want to apply, then the OPatch Utility advises you of these conflicts. See <a href="#CEGDJAJB">Section B.11.3, &#34;Patching Oracle ASM to a Software Patch Level&#34;</a> for information about applying patches to Oracle ASM using the OPatch Utility.</p>
</div>
<!-- class="sect2" -->
<a id="CEGCDHGE"></a>
<div id="CWLIN526" class="sect2">
<h3 class="sect2"><span class="secnum">B.11.2</span> About Oracle ASM Software Patch Levels</h3>
<p>The software patch level for Oracle Grid Infrastructure represents the set of all one-off patches applied to the Oracle Grid Infrastructure software release, including Oracle ASM. The release is the release number, in the format of major, minor, and patch set release number. For example, with the release number 12.1.0.1, the major release is 12, the minor release is 1, and 0.0 is the patch set number. With one-off patches, the major and minor release remains the same, though the patch levels change each time you apply or roll back an interim patch.</p>
<p>As with standard upgrades to Oracle Grid Infrastructure, at any given point in time for normal operation of the cluster, all the nodes in the cluster must have the same software release and patch level. Because one-off patches can be applied as rolling upgrades, all possible patch levels on a particular software release are compatible with each other.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li><a href="#CEGFEAEF">Section B.8.1, &#34;Performing a Standard Upgrade from an Earlier Release&#34;</a> for information about upgrading Oracle Grid Infrastructure</li>
<li>
<p><a href="#CEGDJAJB">Section B.11.3, &#34;Patching Oracle ASM to a Software Patch Level&#34;</a> for information about applying patches to Oracle ASM using the OPatch Utility</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CEGDJAJB"></a>
<div id="CWLIN528" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">B.11.3</span> Patching Oracle ASM to a Software Patch Level</h3>
<p>Starting with Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1), a new cluster state called &#34;Rolling Patch&#34; is available. This mode is similar to the existing &#34;Rolling Upgrade&#34; mode in terms of the Oracle ASM operations allowed in this quiesce state.</p>
<ol>
<li>
<p>Download patches you want to apply from My Oracle Support:</p>
<p><code dir="ltr"><a href="https://support.oracle.com">https://support.oracle.com</a></code></p>
<p>Select the Patches and Updates tab to locate the patch.</p>
<p>Oracle recommends that you select <span class="bold">Recommended Patch Advisor</span>, and enter the product group, release, and platform for your software. My Oracle Support provides you with a list of the most recent patch set updates (PSUs) and critical patch updates (CPUs).</p>
<p>Place the patches in an accessible directory, such as <code dir="ltr">/tmp</code>.</p>
</li>
<li>
<p>Change directory to the <code dir="ltr">/opatch</code> directory in the Grid home. For example:</p>
<pre dir="ltr">$ cd /u01/app/12.1.0/grid/opatch
</pre></li>
<li>
<p>Review the patch documentation for the patch you want to apply, and complete all required steps before starting the patch upgrade.</p>
</li>
<li>
<p>Follow the instructions in the patch documentation to apply the patch.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABJEFCC"></a>
<div id="CWLIN429" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.12</span> Updating Oracle Enterprise Manager Cloud Control Target Parameters</h2>
<p>Because Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1) is an out-of-place upgrade of the Oracle Clusterware home in a new location (the Oracle Grid Infrastructure for a cluster home, or Grid home), the path for the CRS_HOME parameter in some parameter files must be changed. If you do not change the parameter, then you encounter errors such as &#34;cluster target broken&#34; on Oracle Enterprise Manager Cloud Control.</p>
<p>To resolve the issue, upgrade the Enterprise Manager Cloud Control target, and then update the Enterprise Manager Agent Base Directory on each cluster member node running an agent, as described in the following sections:</p>
<ul>
<li>
<p><a href="#CEGCAGJC">Updating the Enterprise Manager Cloud Control Target After Upgrades</a></p>
</li>
<li>
<p><a href="#CEGBEFAD">Updating the Enterprise Manager Agent Base Directory After Upgrades</a></p>
</li>
</ul>
<a id="CEGCAGJC"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">B.12.1</span> Updating the Enterprise Manager Cloud Control Target After Upgrades</h3>
<ol>
<li>
<p>Log in to Enterprise Manager Cloud Control.</p>
</li>
<li>
<p>Navigate to the <span class="bold">Targets</span> menu, and then to the <span class="bold">Cluster</span> page.</p>
</li>
<li>
<p>Click a cluster target that was upgraded.</p>
</li>
<li>
<p>Click <span class="bold">Cluster</span>, then <span class="bold">Target Setup</span>, and then <span class="bold">Monitoring Configuration</span> from the menu.</p>
</li>
<li>
<p>Update the value for <span class="bold">Oracle Home</span> with the new Grid home path.</p>
</li>
<li>
<p>Save the updates.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CEGBEFAD"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">B.12.2</span> Updating the Enterprise Manager Agent Base Directory After Upgrades</h3>
<ol>
<li>
<p>Navigate to the <code dir="ltr">bin</code> directory in the Management Agent home.</p>
<p>The Agent Base directory is a directory where the Management Agent home is created. The Management Agent home is in the path <span class="italic">Agent_Base_Directory</span>/core/<span class="italic">EMAgent_Version</span>. For example, if the Agent Base directory is <code dir="ltr">/u01/app/emagent</code>, then the Management Agent home is created as <code dir="ltr">/u01/app/emagent/core/12.1.0.1.0</code>.</p>
</li>
<li>
<p>In the <code dir="ltr">/u01/app/emagent/core/12.1.0.1.0/</code>bin directory, open the file <code dir="ltr">emctl</code> with a text editor.</p>
</li>
<li>
<p>Locate the parameter <code dir="ltr">CRS_HOME</code>, and update the parameter to the new Grid home path.</p>
</li>
<li>
<p>Repeat steps 1-3 on each node of the cluster with an Enterprise Manager agent.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGGHAFG"></a>
<div id="CWLIN521" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.13</span> Unlocking the Existing Oracle Clusterware Installation</h2>
<p>After upgrade from previous releases, if you want to deinstall the previous release Oracle Grid Infrastructure Grid home, then you must first change the permission and ownership of the previous release Grid home. Complete this task using the following procedure:</p>
<p>Log in as <code dir="ltr">root</code>, and change the permission and ownership of the previous release Grid home using the following command syntax, where <span class="italic">oldGH</span> is the previous release Grid home, <span class="italic">swowner</span> is the Oracle Grid Infrastructure installation owner, and <span class="italic">oldGHParent</span> is the parent directory of the previous release Grid home:</p>
<br/>
#chmod -R 755 <span class="italic">oldGH</span><br/>
#chown -R s<span class="italic">wowner</span> <span class="italic">oldGH</span><br/>
#chown <span class="italic">swowner</span> <span class="italic">oldGHParent</span><br/>
<p>For example:</p>
<pre dir="ltr">#chmod -R 755 /u01/app/11.2.0/grid
#chown -R grid /u01/app/11.2.0/grid
#chown grid /u01/app/11.2.0
</pre>
<p>After you change the permissions and ownership of the previous release Grid home, log in as the Oracle Grid Infrastructure Installation owner (<code dir="ltr">grid</code>, in the preceding example), and use the same release Oracle Grid Infrastructure deinstallation tool to remove the previous release Grid home (<span class="italic">oldGH</span>).</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
You must use the deinstallation tool from the same release to remove Oracle software. Do not run the deinstallation tool from a later release to remove Oracle software from an earlier release. For example, do not run the deinstallation tool from the 12.1.0.1 installation media to remove Oracle software from an existing 11.2.0.4 Oracle home.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="rem_orcl.htm#CIHGADCJ">Section 10.6.1, &#34;About the Deinstallation Tool&#34;</a></div>
</div>
<!-- class="sect1" -->
<a id="CEGCDBDI"></a>
<div id="CWLIN522" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.14</span> Checking Cluster Health Monitor Repository Size After Upgrading</h2>
<p><a id="sthref788"></a>If you are upgrading from a prior release using IPD/OS to Oracle Grid Infrastructure then review the Cluster Health Monitor repository size (the CHM repository). Oracle recommends that you review your CHM repository needs, and enlarge the repository size if you want to maintain a larger CHM repository.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Your previous IPD/OS repository is deleted when you install Oracle Grid Infrastructure, and you run the <code dir="ltr">root.sh</code> script on each node.
<p>Cluster Health Monitor is not available with IBM: Linux on System z configurations.</p>
</div>
<p>By default, the CHM repository size is a minimum of either 1GB or 3600 seconds (1 hour). The CHM repository is one gigabyte (1 GB), regardless of the size of the cluster.</p>
<p>To enlarge the CHM repository, use the following command syntax, where <span class="italic">retention_time</span> is the size of CHM repository in number of seconds:</p>
<p><code dir="ltr">oclumon manage -repos changeretentiontime</code> <span class="italic">retention_time</span></p>
<p>The value for <span class="italic">retention_time</span> must be more than <code dir="ltr">3600</code> (one hour) and less than <code dir="ltr">259200</code> (three days). If you enlarge the CHM repository size, then you must ensure that there is local space available for the repository size you select on each node of the cluster. If there is not sufficient space available, then you can move the repository to shared storage.</p>
<p>For example, to set the repository size to four hours:</p>
<pre dir="ltr">$ oclumon manage -repos changeretentiontime 14400
</pre></div>
<!-- class="sect1" -->
<a id="BABFCIAG"></a>
<div id="CWLIN430" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.15</span> Downgrading Oracle Clusterware After an Upgrade</h2>
<p>After a successful or a failed upgrade to Oracle Clusterware 12<span class="italic">c</span> Release 1 (12.1), you can restore Oracle Clusterware to the previous release. This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CEGEJEBD">About Downgrading Oracle Clusterware After an Upgrade</a></p>
</li>
<li>
<p><a href="#CEGFDHJH">Downgrading to Releases Before 11<span class="italic">g</span> Release 2 (11.2.0.2)</a></p>
</li>
<li>
<p><a href="#CEGFEJAE">Downgrading to 11<span class="italic">g</span> Release 1 (11.2.0.2) or Later Release</a></p>
</li>
</ul>
<a id="CEGEJEBD"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">B.15.1</span> About Downgrading Oracle Clusterware After an Upgrade</h3>
<p>Downgrading Oracle Clusterware restores the Oracle Clusterware configuration to the state it was in before the Oracle Clusterware 12<span class="italic">c</span> Release 1 (12.1) upgrade. Any configuration changes you performed during or after the Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1) upgrade are removed and cannot be recovered.</p>
<p>In the downgrade procedures, the following variables are used:</p>
<ul>
<li>
<p><span class="italic">first node</span> is the first node on which the <code dir="ltr">rootupgrade</code> script completed successfully.</p>
</li>
<li>
<p><span class="italic">non-first nodes</span> are all other nodes where the <code dir="ltr">rootupgrade</code> script completed successfully.</p>
</li>
</ul>
<p>To restore Oracle Clusterware to the previous release, use the downgrade procedure for the release to which you want to downgrade.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When downgrading after a failed upgrade, if <code dir="ltr">rootcrs.sh</code> does not exist on a node, then use <code dir="ltr">perl rootcrs.pl</code> instead of <code dir="ltr">rootcrs.sh</code>.</div>
</div>
<!-- class="sect2" -->
<a id="CEGFDHJH"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">B.15.2</span> Downgrading to Releases Before 11<span class="italic">g</span> Release 2 (11.2.0.2)</h3>
<p>To downgrade Oracle Clusterware:</p>
<ol>
<li>
<p>If the rootupgrade script failed on a node, then downgrade the node where the upgrade failed:</p>
<pre dir="ltr">rootcrs.sh -downgrade
</pre></li>
<li>
<p>On all other nodes where the rootupgrade script ran successfully, use the command syntax <span class="italic">Grid_home</span><code dir="ltr">/crs/install/rootcrs.sh -downgrade</code> to stop the 12<span class="italic">c</span> Release 1 (12.1) resources, and shut down the Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1) stack.</p>
<pre dir="ltr">rootcrs.sh -downgrade
</pre></li>
<li>
<p>After the <code dir="ltr">rootcrs.sh -downgrade</code> script has completed on all non-first nodes, on the first node use the command syntax <span class="italic">Grid_home</span><code dir="ltr">/crs/install/rootcrs.sh -downgrade -lastnode</code>.</p>
<p>For example:</p>
<pre dir="ltr"># /u01/app/12.1.0/grid/crs/install/rootcrs.sh -downgrade  -lastnode
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
With Oracle Grid Infrastructure 12<span class="italic">c</span>, you no longer need to provide the location of the previous release Grid home or release number.</div>
<p>Run this command from a directory that has write permissions for the Oracle Grid Infrastructure installation user.</p>
</li>
<li>
<p>On any of the cluster member nodes where the <code dir="ltr">rootcrs</code> script has run successfully:</p>
<ol>
<li>
<p>Log in as the Oracle Grid Infrastructure installation owner.</p>
</li>
<li id="CEGHEIFE">
<p>Use the following command to start the installer, where <code dir="ltr">/u01/app/12.1.0/grid</code> is the location of the new (upgraded) Grid home:</p>
</li>
</ol>
<pre dir="ltr">./runInstaller -nowait -waitforcompletion -ignoreSysPrereqs -updateNodeList -silent
   CRS=false ORACLE_HOME=/u01/app/12.1.0/grid
</pre>
<p>Add the flag <code dir="ltr">-cfs</code> if the Grid home is a shared home.</p>
</li>
<li>
<p>On any of the cluster member nodes where the <code dir="ltr">rootupgrade.sh</code> script has run successfully:</p>
<ol>
<li>
<p>Log in as the Oracle Grid Infrastructure installation owner (<code dir="ltr">grid</code>).</p>
</li>
<li id="CHDECFEF">
<p>Use the following command to start the installer, where the path you provide for the flag <code dir="ltr">ORACLE_HOME</code> is the location of the home directory from the earlier Oracle Clusterware installation</p>
<p>For example:</p>
<pre dir="ltr">$ cd /u01/app/12.1.0/grid/oui/bin
$ ./runInstaller -nowait -waitforcompletion -ignoreSysPrereqs -updateNodeList -silent
    CRS=true ORACLE_HOME=/u01/app/crs
</pre></li>
<li>
<p><span class="bold">For downgrades to 11.1 and earlier releases</span></p>
<p>If you are downgrading to Oracle Clusterware 11<span class="italic">g</span> Release 1 (11.1) or an earlier release, then you must run <code dir="ltr">root.sh</code> manually from the earlier release Oracle Clusterware home to complete the downgrade after you complete step <a href="#CHDECFEF">b</a>.</p>
<p>OUI prompts you to run <code dir="ltr">root.sh</code> manually from the earlier release Oracle Clusterware installation home in sequence on each member node of the cluster to complete the downgrade. After you complete this task, downgrade is completed.</p>
<p>Running <code dir="ltr">root.sh</code> from the earlier release Oracle Clusterware installation home restarts the Oracle Clusterware stack, starts up all the resources previously registered with Oracle Clusterware in the earlier release, and configures the old initialization scripts to run the earlier release Oracle Clusterware stack.</p>
<p>After completing the downgrade, update the entry for Oracle ASM instance in the oratab file (<code dir="ltr">/etc/oratab</code> or <code dir="ltr">/var/opt/oracle/oratab</code>) on every node in the cluster as follows:</p>
<p><code dir="ltr">+ASM&lt;instance#&gt;:&lt;RAC-ASM home&gt;:N</code></p>
</li>
</ol>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CEGFEJAE"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">B.15.3</span> Downgrading to 11<span class="italic">g</span> Release 1 (11.2.0.2) or Later Release</h3>
<p>Follow these steps to downgrade Oracle Grid Infrastructure:</p>
<ol>
<li>
<p>On all remote nodes, use the command syntax <span class="italic">Grid_home</span><code dir="ltr">/crs/install/rootcrs.sh -downgrade</code> to stop the 12<span class="italic">c</span> Release 1 (12.1) resources, and shut down the Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1) stack.</p>
<pre dir="ltr"># /u01/app/12.1.0/grid/crs/install/rootcrs.sh -downgrade
</pre></li>
<li>
<p>After the <code dir="ltr">rootcrs.sh -downgrade</code> script has completed on all remote nodes, on the local node use the command syntax <span class="italic">Grid_home</span><code dir="ltr">/crs/install/rootcrs.sh -downgrade -lastnode</code></p>
<p>For example:</p>
<pre dir="ltr"># /u01/app/12.1.0/grid/crs/install/rootcrs.sh -downgrade  -lastnode
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Starting with Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1), you no longer need to provide the location of the earlier release Grid home or earlier release number.</div>
<p>Run this command from a directory that has write permissions for the Oracle Grid Infrastructure installation user.</p>
</li>
<li>
<p>On any of the cluster member nodes where the <code dir="ltr">rootupgrade.sh</code> script has run successfully:</p>
<ol>
<li>
<p>Log in as the Oracle Grid Infrastructure installation owner.</p>
</li>
<li id="CEGCJEFI">
<p>Use the following command to start the installer, where <code dir="ltr">/u01/app/12.1.0/grid</code> is the location of the new (upgraded) Grid home:</p>
</li>
</ol>
<pre dir="ltr">$ cd /u01/app/12.1.0/grid/oui/bin
./runInstaller -nowait -waitforcompletion -ignoreSysPrereqs -updateNodeList
 -silent CRS=false ORACLE_HOME=/u01/app/12.1.0/grid
</pre>
<p>Add the flag <code dir="ltr">-cfs</code> if the Grid home is a shared home.</p>
</li>
<li>
<p>On any of the cluster member nodes where the <code dir="ltr">rootupgrade</code> script has run successfully:</p>
<ol>
<li>
<p>Log in as the Oracle Grid Infrastructure installation owner.</p>
</li>
<li>
<p>Use the following command to start the installer, where the path you provide for the flag <code dir="ltr">ORACLE_HOME</code> is the location of the home directory from the earlier Oracle Clusterware installation</p>
<p>For example:</p>
<pre dir="ltr">$ cd /u01/app/12.1.0/grid/oui/bin
$ ./runInstaller -nowait -waitforcompletion -ignoreSysPrereqs -updateNodeList -silent CRS=true ORACLE_HOME=/u01/app/crs
</pre></li>
<li>
<p><span class="bold">For downgrades to 11.2.0.2</span></p>
<p>If you are downgrading to Oracle Clusterware 11<span class="italic">g</span> Release 1 (11.2.0.2), then you must start the Oracle Clusterware stack manually after you complete step <a href="#CEGCJEFI">b</a>.</p>
<p>On each node, start Oracle Clusterware from the earlier release Oracle Clusterware home using the command <code dir="ltr">crsctl start crs</code>. For example, where the earlier release home is <code dir="ltr">/u01/app/11.2.0/grid</code>, use the following command on each node:</p>
<p><code dir="ltr">/u01/app/11.2.0/grid/bin/crsctl start crs</code></p>
</li>
</ol>
</li>
<li>
<p><span class="bold">For downgrades to 12.1.0.1</span></p>
<p>If you are downgrading to Oracle Grid Infrastructure 12<span class="italic">c</span> Release 1 (12.1.0.1), then run the following commands to configure the Grid Management Database:</p>
<ol>
<li>
<p>Start the 12.1.0.1 Oracle Clusterware stack on all nodes.</p>
</li>
<li>
<p>On any node, remove the <code dir="ltr">MGMTDB</code> resource as follows:</p>
<pre dir="ltr"><span class="italic">12101_Grid_home</span>/bin/srvctl remove mgmtdb
</pre></li>
<li>
<p>Run DBCA in the silent mode from the 12.1.0.1 Oracle home and create the Management Database as follows:</p>
<pre dir="ltr"><span class="italic">12101_Grid_home</span>/bin/dbca -silent -createDatabase -templateName
MGMTSeed_Database.dbc -sid -MGMTDB -gdbName _mgmtdb -storageType ASM
-diskGroupName <span class="italic">ASM_DG_NAME</span>
-datafileJarLocation<span class="italic"> 12101_grid_home</span>/assistants/dbca/templates -characterset AL32UTF8 -autoGeneratePasswords
</pre></li>
<li>
<p>Configure the Management Database by running the Configuration Assistant from the location <span class="italic">12101_Grid_home</span><code dir="ltr">/bin/mgmtca</code>.</p>
</li>
</ol>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="appendix" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment605">
<tr>
<td class="cellalignment612">
<table class="cellalignment610">
<tr>
<td class="cellalignment609"><a href="trouble.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment609"><a href="app_nonint.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment614">
<table class="cellalignment608">
<tr>
<td class="cellalignment609"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment609"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment609"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment609"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment609"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment609"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>