<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-113958"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/TT_STATS"></a><title>TT_STATS</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 704"/>
<meta name="dcterms.created" content="2014-10-02T17:47:28Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="TimesTen In-Memory Database PL/SQL Packages Reference"/>
<meta name="dcterms.identifier" content="E21645-06"/>
<meta name="dcterms.isVersionOf" content="TTPLP"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="t_dbver.htm" title="Previous" type="text/html"/>
<link rel="Next" href="u_file.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E21645-06.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">14/19</span> <!-- End Header --><a id="BABDFEBH"></a><a id="TTPLP71655"></a>
<h1 class="chapter"><span class="secnum">10</span> TT_STATS</h1>
<p>The <code>TT_STATS</code> package enables you to collect snapshots of TimesTen database metrics (statistics, states, and other information) and generate reports comparing two specified snapshots.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BABDJFFI">Using TT_STATS</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Security model</p>
</li>
<li>
<p>Operational notes</p>
</li>
</ul>
</li>
<li>
<p><a href="#BABFAJJE">Summary of TT_STATS subprograms</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
There is also a <code>ttStats</code> utility program. In addition to acting as a convenient front-end for the <code>TT_STATS</code> package to collect snapshots and generate reports, the utility can monitor metrics in real-time. For information, see <a class="olink TTREF802" href="../TTREF/util.htm#TTREF802">&#34;ttStats&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</div>
<a id="BABDJFFI"></a><a id="TTPLP71656"></a>
<hr/>
<div class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Us<a id="sthref659"></a>ing TT_STATS</h2>
<p>This section covers the following topics for the <code>TT_STATS</code> package:</p>
<ul>
<li>
<p><a href="#BABIDECG">Overview</a></p>
</li>
<li>
<p><a href="#BABIAEIF">Security model</a></p>
</li>
<li>
<p><a href="#BABJJFFI">Operational notes</a></p>
</li>
</ul>
<a id="BABIDECG"></a><a id="TTPLP71657"></a>
<hr/>
<h3 class="refsect2">Ov<a id="sthref660"></a>erview</h3>
<p>The <code>TT_STATS</code> package provides features for collecting and comparing snapshots of TimesTen system metrics, according to the capture level. Each snapshot can consist of what TimesTen considers to be basic metrics, typical metrics, or all available metrics.</p>
<p>For those familiar with Oracle Database performance analysis tools, these reports are similar in nature to Oracle Automatic Workload Repository (AWR) reports.</p>
<p>The package includes procedures and functions for the following:</p>
<ul>
<li>
<p>Capture a snapshot of metrics according to the capture level.</p>
</li>
<li>
<p>Generate a report in HTML or plain text showing before and after values of metrics or the differences between those values.</p>
</li>
<li>
<p>Show the snapshot ID and timestamp of snapshots currently stored.</p>
</li>
<li>
<p>Delete snapshots based on a range of IDs or timestamps.</p>
</li>
<li>
<p>Get or set the value of a specified <code>TT_STATS</code> configuration parameter.</p>
</li>
<li>
<p>Show the values of all configuration parameters.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
In this release, the only supported configuration parameters are for the maximum number of snapshots and the maximum total size of snapshots that can be stored.</div>
<a id="BABIAEIF"></a><a id="TTPLP71658"></a>
<hr/>
<h3 class="refsect2">Sec<a id="sthref661"></a>urity model</h3>
<p>By default, only the instance administrator has privilege to run functions or procedures of the <code>TT_STATS</code> PL/SQL package. Any other user, including an <code>ADMIN</code> user, must be granted <code>EXECUTE</code> privilege for the <code>TT_STATS</code> package by the instance administrator or by an <code>ADMIN</code> user, such as in the following example:</p>
<pre>GRANT EXECUTE ON SYS.TT_STATS TO scott;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Although <code>ADMIN</code> users cannot execute the package by default, they can grant themselves privilege to execute it.</div>
<a id="BABJJFFI"></a><a id="TTPLP71659"></a>
<hr/>
<h3 class="refsect2">Ope<a id="sthref662"></a>rational notes</h3>
<p>Each metric in the <code>SYS.SYSTEMSTATS</code> table has a designated level, and the capture level setting for a snapshot corresponds to those levels. Available levels are <code>NONE</code>, <code>BASIC</code>, <code>TYPICAL</code> (the default, appropriate for most purposes), and <code>ALL</code>. See <a href="#BABGHGJI">&#34;CAPTURE_SNAPSHOT procedure and function&#34;</a> for additional information.</p>
<p>Be aware that the capture level applies only to metrics in the <code>SYS.SYSTEMSTATS</code> table, however. For metrics outside of <code>SYSTEMSTATS</code>, the same set of data are gathered regardless of the capture level.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also use the <code>ttStatsConfig</code> built-in procedure to change the capture level. See <a class="olink TTREF800" href="../TTREF/proced.htm#TTREF800">&#34;ttStatsConfig&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</div>
<p>Snapshots are stored in a number of TimesTen <code>SYS.SNAPSHOT_</code><code><span class="codeinlineitalic">xxxxx</span></code> system tables. (For reference, these tables are listed in <a class="olink TTSYS347" href="../TTSYS/systemtables.htm#TTSYS347">&#34;Tables and views reserved for internal or future use&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database System Tables and Views Reference</span>.) To assist you in minimizing the risk of running out of permanent space, the <code>TT_STATS</code> package has configuration parameters to specify the maximum number of snapshots that can be stored and the total size of snapshots stored. In this release, an error is issued if either limit is exceeded, and the snapshot capture would fail. TimesTen provides default limits, but you can alter them through the <code>SET_CONFIG</code> procedure. (See <a href="#BABIHEFB">&#34;SET_CONFIG procedure&#34;</a>.)</p>
<p>Be aware that execution of this package may involve numerous reads and insertions, which may impact database performance during package operations.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
To view output that goes to the standard output (such as from versions of the <code>SHOW_SNAPSHOTS</code> and <code>GET_CONFIG</code> procedures), run the following command from <code>ttIsql</code>:
<pre>set serveroutput on;
</pre></div>
</div>
<!-- class="refsect1" -->
<a id="BABFAJJE"></a><a id="TTPLP71661"></a>
<hr/>
<div class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Sum<a id="sthref663"></a>mary of TT_STATS subprograms</h2>
<p>This section summarizes and then documents the procedures and functions of the <code>TT_STATS</code> package.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="TTPLP71662"></a><a id="sthref664"></a><a id="sthref665"></a>Table 10-1 <span class="bold">TT_STATS</span> Package Subprograms</p>
<table class="cellalignment1016" title="TT_STATS Package Subprograms" summary="This table lists the TT_STATS subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment1010">
<th class="cellalignment1017" id="r1c1-t7">Subprogram</th>
<th class="cellalignment1017" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r2c1-t7" headers="r1c1-t7">
<p><a href="#BABGHGJI">CAPTURE_SNAPSHOT procedure and function</a></p>
</td>
<td class="cellalignment1018" headers="r2c1-t7 r1c2-t7">
<p>Takes a snapshot of TimesTen metrics. The function also returns the snapshot ID.</p>
</td>
</tr>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r3c1-t7" headers="r1c1-t7">
<p><a href="#BABIAIDC">DROP_SNAPSHOTS_RANGE procedures</a></p>
</td>
<td class="cellalignment1018" headers="r3c1-t7 r1c2-t7">
<p>Deletes snapshots according to a specified range of snapshot IDs or timestamps.</p>
</td>
</tr>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r4c1-t7" headers="r1c1-t7">
<p><a href="#BABBBEJJ">GENERATE_REPORT_HTML procedure</a></p>
</td>
<td class="cellalignment1018" headers="r4c1-t7 r1c2-t7">
<p>Produces a report in HTML format based on the data from two specified snapshots.</p>
</td>
</tr>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r5c1-t7" headers="r1c1-t7">
<p><a href="#BABGEBAE">GENERATE_REPORT_TEXT procedure</a></p>
</td>
<td class="cellalignment1018" headers="r5c1-t7 r1c2-t7">
<p>Produces a report in plain text format based on the data from two specified snapshots.</p>
</td>
</tr>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r6c1-t7" headers="r1c1-t7">
<p><a href="#BABGDIHB">GET_CONFIG procedures</a></p>
</td>
<td class="cellalignment1018" headers="r6c1-t7 r1c2-t7">
<p>Retrieves the value of a specified <code>TT_STATS</code> configuration parameter or the values of all configuration parameters.</p>
</td>
</tr>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r7c1-t7" headers="r1c1-t7">
<p><a href="#BABIHEFB">SET_CONFIG procedure</a></p>
</td>
<td class="cellalignment1018" headers="r7c1-t7 r1c2-t7">
<p>Sets a specified value for a specified <code>TT_STATS</code> configuration parameter.</p>
</td>
</tr>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r8c1-t7" headers="r1c1-t7">
<p><a href="#BABBDHDJ">SHOW_SNAPSHOTS procedures</a></p>
</td>
<td class="cellalignment1018" headers="r8c1-t7 r1c2-t7">
<p>Shows the snapshot IDs and timestamps of all snapshots currently stored in the database.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
In this release, the only supported <code>TT_STATS</code> configuration parameters are for limits of the number of snapshots and total size of snapshots that can be stored in the permanent memory segment.</div>
<a id="BABGHGJI"></a><a id="TTPLP71663"></a>
<hr/>
<h3 class="refsect2">CAP<a id="sthref666"></a>TURE_SNAPSHOT procedure and function</h3>
<p>The procedure captures a snapshot of TimesTen metrics according to the specified capture level, or by default uses what is considered a typical level. The snapshots are stored in TimesTen <code>SYS.SNAPSHOT_</code><code><span class="codeinlineitalic">xxxx</span></code> system tables.</p>
<p>The function does the same and also returns the ID number of the snapshot.</p>
<div class="infobox-note">
<p class="notep1">Notes:</p>
<ul>
<li>
<p>The capture level applies only to metrics from <code>SYS.SYSTEMSTATS</code>, as discussed below.</p>
</li>
<li>
<p>There are defined limits for the maximum number of snapshots that can be stored and the maximum total size of all stored snapshots. See <a href="#BABIHEFB">&#34;SET_CONFIG procedure&#34;</a> for additional information, including how to set new values.</p>
</li>
</ul>
</div>
<p class="titleinrefsubsect"><a id="sthref667"></a>Syntax</p>
<pre>TT_STATS.CAPTURE_SNAPSHOT (
   <span class="italic">capture_level</span>     IN VARCHAR2 DEFAULTED,
   <span class="italic">description</span>       IN VARCHAR2 DEFAULTED);

TT_STATS.CAPTURE_SNAPSHOT (
   <span class="italic">capture_level</span>     IN VARCHAR2 DEFAULTED,
   <span class="italic">description</span>       IN VARCHAR2 DEFAULTED)
  RETURN BINARY_INTEGER;
</pre>
<p class="titleinrefsubsect"><a id="sthref668"></a>Parameters</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="TTPLP71664"></a><a id="sthref669"></a><a id="sthref670"></a>Table 10-2 CAPTURE_SNAPSHOT procedure parameters</p>
<table class="cellalignment1016" title="CAPTURE_SNAPSHOT procedure parameters " summary="This table describes the parameters of the CAPTURE_SNAPSHOT subprograms." dir="ltr">
<thead>
<tr class="cellalignment1010">
<th class="cellalignment1017" id="r1c1-t10">Parameter</th>
<th class="cellalignment1017" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r2c1-t10" headers="r1c1-t10">
<p><code><span class="codeinlineitalic">capture_level</span></code></p>
</td>
<td class="cellalignment1018" headers="r2c1-t10 r1c2-t10">
<p>The desired level of metrics to capture</p>
<p>The following choices are available:</p>
<ul>
<li>
<p><code>NONE</code>: For metrics outside of <code>SYS.SYSTEMSTATS</code> only.</p>
</li>
<li>
<p><code>BASIC</code>: For a minimal basic set of metrics.</p>
</li>
<li>
<p><code>TYPICAL</code> (default): For a typical set of metrics. This level is appropriate for most purposes. The basic set is a subset of the typical set.</p>
</li>
<li>
<p><code>ALL</code>: For all available metrics.</p>
</li>
</ul>
<p>Use the same level for any two snapshots to be used in a report.</p>
<p><span class="bold">Note</span>: For metrics outside of <code>SYS.SYSTEMSTATS</code>, the same data are gathered regardless of the capture level.</p>
</td>
</tr>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r3c1-t10" headers="r1c1-t10">
<p><code><span class="codeinlineitalic">description</span></code></p>
</td>
<td class="cellalignment1018" headers="r3c1-t10 r1c2-t10">
<p>An optional description of the snapshot</p>
<p>Use this if you want to provide any description or notes for the snapshot, such as to distinguish it from other snapshots.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" -->
<p class="titleinrefsubsect"><a id="sthref671"></a>Usage notes</p>
<ul>
<li>
<p>As mentioned above, the capture level applies only to metrics in the <code>SYS.SYSTEMSTATS</code> table. For metrics outside of <code>SYSTEMSTATS</code>, the same data are gathered regardless of the capture level.</p>
</li>
<li>
<p>For <code>SYSTEMSTATS</code> metrics, only those within the specified capture level have meaningful accumulated values. <code>SYSTEMSTATS</code> metrics outside of the specified level have a value of 0 (zero).</p>
</li>
<li>
<p>You can call the procedure or function without specifying the <code><span class="codeinlineitalic">capture_level</span></code> parameter. This results in capture of what is considered a typical level of metrics.</p>
</li>
</ul>
<p class="titleinrefsubsect"><a id="sthref672"></a>Return value</p>
<p>The function returns a <code>BINARY_INTEGER</code> value for the ID of the snapshot.</p>
<p class="titleinrefsubsect"><a id="sthref673"></a>Examples</p>
<p>Capture just the basic metrics:</p>
<pre>call tt_stats.capture_snapshop(&#39;BASIC&#39;);
</pre>
<p>Capture the default typical level of metrics:</p>
<pre>call tt_stats.capture_snapshot;
</pre>
<p>This example uses the function to capture the default typical level of metrics and displays the snapshot ID:</p>
<pre>declare
   id   number;
begin
   id := tt_stats.capture_snapshot();
   dbms_output.put_line(&#39;Snapshot with ID (&#39; || id || &#39;) was captured.&#39;);
end;
</pre>
<a id="BABIAIDC"></a><a id="TTPLP71665"></a>
<hr/>
<h3 class="refsect2">DROP_SNAPSHOTS<a id="sthref674"></a>_RANGE procedures</h3>
<p>This procedure deletes previously captured snapshots of TimesTen metrics according to a specified range of snapshot IDs or timestamps.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can use the <a href="#BABBDHDJ">SHOW_SNAPSHOTS procedures</a> to display the IDs and timestamps of all currently stored snapshots.</div>
<p class="titleinrefsubsect"><a id="sthref675"></a>Syntax</p>
<pre>TT_STATS.DROP_SNAPSHOTS_RANGE (
   <span class="italic">snapshot_low</span>      IN BINARY_INTEGER,
   <span class="italic">snapshot_high</span>     IN BINARY_INTEGER);

TT_STATS.DROP_SNAPSHOTS_RANGE (
   <span class="italic">ts_old</span>            IN TIMESTAMP(6),
   <span class="italic">ts_new</span>            IN TIMESTAMP(6));
</pre>
<p class="titleinrefsubsect"><a id="sthref676"></a>Parameters</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="TTPLP71666"></a><a id="sthref677"></a><a id="sthref678"></a>Table 10-3 DROP_SNAPSHOTS_RANGE procedure parameters</p>
<table class="cellalignment1016" title="DROP_SNAPSHOTS_RANGE procedure parameters " summary="This table describes the parameters of the DROP_SNAPSHOT_RANGE subprograms." dir="ltr">
<thead>
<tr class="cellalignment1010">
<th class="cellalignment1017" id="r1c1-t12">Parameter</th>
<th class="cellalignment1017" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r2c1-t12" headers="r1c1-t12">
<p><code><span class="codeinlineitalic">snapshot_low</span></code></p>
</td>
<td class="cellalignment1018" headers="r2c1-t12 r1c2-t12">
<p>Snapshot ID for the start of the range of snapshots to delete</p>
</td>
</tr>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r3c1-t12" headers="r1c1-t12">
<p><code><span class="codeinlineitalic">snapshot_high</span></code></p>
</td>
<td class="cellalignment1018" headers="r3c1-t12 r1c2-t12">
<p>Snapshot ID for the end of the range of snapshots to delete</p>
</td>
</tr>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r4c1-t12" headers="r1c1-t12">
<p><code><span class="codeinlineitalic">ts_old</span></code></p>
</td>
<td class="cellalignment1018" headers="r4c1-t12 r1c2-t12">
<p>Timestamp for the start of the range of snapshots to delete</p>
</td>
</tr>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r5c1-t12" headers="r1c1-t12">
<p><code><span class="codeinlineitalic">ts_new</span></code></p>
</td>
<td class="cellalignment1018" headers="r5c1-t12 r1c2-t12">
<p>Timestamp for the end of the range of snapshots to delete</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" -->
<p class="titleinrefsubsect"><a id="sthref679"></a>Usage notes</p>
<ul>
<li>
<p>Specify 0 (zero) for both input parameters to drop all snapshots.</p>
</li>
<li>
<p>It is permissible for <code><span class="codeinlineitalic">snapshot_low</span></code> to be greater than <code><span class="codeinlineitalic">snapshot_high</span></code>. The range of snapshots from the lower value through the higher value are still deleted.</p>
</li>
<li>
<p>Similarly, it is permissible for <code><span class="codeinlineitalic">ts_new</span></code> to be an older timestamp than <code><span class="codeinlineitalic">ts_old</span></code>.</p>
</li>
</ul>
<p class="titleinrefsubsect"><a id="sthref680"></a>Examples</p>
<p>This example specifies snapshot IDs, dropping the snapshots with IDs of 1, 2, and 3.</p>
<pre>call tt_stats.drop_snapshots_range(1,3);
</pre>
<a id="BABBBEJJ"></a><a id="TTPLP71667"></a>
<hr/>
<h3 class="refsect2">GENER<a id="sthref681"></a>ATE_REPORT_HTML procedure</h3>
<p>This procedure uses the data from two specified snapshots of TimesTen metrics to produce a report in HTML format with information for each metric, such as rate of change or start and end values.</p>
<p>Reports include a summary of memory usage, connections, and load profile, followed by metrics (as applicable) for SQL statements, transactions, PL/SQL memory, replication, logs and log holds, checkpoints, cache groups, cache grid, latches, locks, XLA, and TimesTen connection attributes.</p>
<p>For a detailed example of the HTML reports that are produced, see <a class="olink TTREF802" href="../TTREF/util.htm#TTREF802">&#34;ttStats&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
<p>Also see <a href="#BABGEBAE">&#34;GENERATE_REPORT_TEXT procedure&#34;</a>.</p>
<div class="infobox-note">
<p class="notep1">Notes:</p>
<ul>
<li>
<p>You can use the <a href="#BABBDHDJ">SHOW_SNAPSHOTS procedures</a> to display the IDs and timestamps of all currently stored snapshots.</p>
</li>
<li>
<p>Use snapshots taken at the same capture level. See <a href="#BABGHGJI">&#34;CAPTURE_SNAPSHOT procedure and function&#34;</a>.</p>
</li>
<li>
<p>The reports are similar in nature to Oracle Automatic Workload Repository (AWR) reports.</p>
</li>
<li>
<p>For <code>SYSTEMSTATS</code> metrics, only those within the specified capture level have meaningful accumulated values. <code>SYSTEMSTATS</code> metrics outside of the specified level have a value of 0 (zero).</p>
</li>
</ul>
</div>
<p class="titleinrefsubsect"><a id="sthref682"></a>Syntax</p>
<pre>TT_STATS.GENERATE_REPORT_HTML (
   <span class="italic">snapshot_id1</span>     IN  BINARY_INTEGER,
   <span class="italic">snapshot_id2</span>     IN  BINARY_INTEGER,
   <span class="italic">report</span>           OUT TT_STATS.REPORT_TABLE);
</pre>
<p class="titleinrefsubsect"><a id="sthref683"></a>Parameters</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="TTPLP71668"></a><a id="sthref684"></a><a id="sthref685"></a>Table 10-4 GENERATE_REPORT_HTML procedure parameters</p>
<table class="cellalignment1016" title="GENERATE_REPORT_HTML procedure parameters " summary="This table describes the parameters of the GENERATE_REPORT_HTML subprogram." dir="ltr">
<thead>
<tr class="cellalignment1010">
<th class="cellalignment1017" id="r1c1-t14">Parameter</th>
<th class="cellalignment1017" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r2c1-t14" headers="r1c1-t14">
<p><code><span class="codeinlineitalic">snapshot_id1</span></code></p>
</td>
<td class="cellalignment1018" headers="r2c1-t14 r1c2-t14">
<p>ID of the first snapshot to analyze</p>
</td>
</tr>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r3c1-t14" headers="r1c1-t14">
<p><code><span class="codeinlineitalic">snapshot_id2</span></code></p>
</td>
<td class="cellalignment1018" headers="r3c1-t14 r1c2-t14">
<p>ID of the second snapshot to analyze</p>
</td>
</tr>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r4c1-t14" headers="r1c1-t14">
<p><code><span class="codeinlineitalic">report</span></code></p>
</td>
<td class="cellalignment1018" headers="r4c1-t14 r1c2-t14">
<p>An associative array (index-by table) containing the HTML-formatted report</p>
<p>Each row is of type <code>VARCHAR2(32767)</code>.</p>
<p>The application can output the report contents line-by-line as desired.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" -->
<p class="titleinrefsubsect"><a id="sthref686"></a>Usage notes</p>
<ul>
<li>
<p>You can enter the snapshot IDs in either order. The procedure determines which is the earlier.</p>
</li>
</ul>
<a id="BABGEBAE"></a><a id="TTPLP71669"></a>
<hr/>
<h3 class="refsect2">GENE<a id="sthref687"></a>RATE_REPORT_TEXT procedure</h3>
<p>This procedure analyzes and compares two specified snapshots of TimesTen metrics and produces a report in plain text format with information for each metric, such as rate of change or start and end values.</p>
<p>Reports include a summary of memory usage, connections, and load profile, followed by metrics (as applicable) for SQL statements, transactions, PL/SQL memory, replication, logs and log holds, checkpoints, cache groups, cache grid, latches, locks, XLA, and TimesTen connection attributes.</p>
<p>Also see <a href="#BABBBEJJ">&#34;GENERATE_REPORT_HTML procedure&#34;</a>.</p>
<div class="infobox-note">
<p class="notep1">Notes:</p>
<ul>
<li>
<p>You can use the <a href="#BABBDHDJ">SHOW_SNAPSHOTS procedures</a> to display the IDs (and timestamps) of all currently stored snapshots.</p>
</li>
<li>
<p>Use snapshots taken at the same capture level. See <a href="#BABGHGJI">&#34;CAPTURE_SNAPSHOT procedure and function&#34;</a>.</p>
</li>
<li>
<p>The reports are similar in nature to Oracle Automatic Workload Repository (AWR) reports.</p>
</li>
<li>
<p>For <code>SYSTEMSTATS</code> metrics, only those within the specified capture level have meaningful accumulated values. <code>SYSTEMSTATS</code> metrics outside of the specified level have a value of 0 (zero).</p>
</li>
</ul>
</div>
<p class="titleinrefsubsect"><a id="sthref688"></a>Syntax</p>
<pre>TT_STATS.GENERATE_REPORT_TEXT (
   <span class="italic">snapshot_id1</span>     IN  BINARY_INTEGER,
   <span class="italic">snapshot_id2</span>     IN  BINARY_INTEGER,
   <span class="italic">report</span>           OUT TT_STATS.REPORT_TABLE);
</pre>
<p class="titleinrefsubsect"><a id="sthref689"></a>Parameters</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="TTPLP71670"></a><a id="sthref690"></a><a id="sthref691"></a>Table 10-5 GENERATE_REPORT_TEXT procedure parameters</p>
<table class="cellalignment1016" title="GENERATE_REPORT_TEXT procedure parameters " summary="This table describes the parameters of the GENERATE_REPORT_HTML subprogram." dir="ltr">
<thead>
<tr class="cellalignment1010">
<th class="cellalignment1017" id="r1c1-t16">Parameter</th>
<th class="cellalignment1017" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r2c1-t16" headers="r1c1-t16">
<p><code><span class="codeinlineitalic">snapshot_id1</span></code></p>
</td>
<td class="cellalignment1018" headers="r2c1-t16 r1c2-t16">
<p>ID of the first snapshot to analyze</p>
</td>
</tr>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r3c1-t16" headers="r1c1-t16">
<p><code><span class="codeinlineitalic">snapshot_id2</span></code></p>
</td>
<td class="cellalignment1018" headers="r3c1-t16 r1c2-t16">
<p>ID of the second snapshot to analyze</p>
</td>
</tr>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r4c1-t16" headers="r1c1-t16">
<p><code><span class="codeinlineitalic">report</span></code></p>
</td>
<td class="cellalignment1018" headers="r4c1-t16 r1c2-t16">
<p>An associative array (index-by table) containing the plain-text-formatted report</p>
<p>Each row is of type <code>VARCHAR2(32767)</code>.</p>
<p>The application can output the report contents line-by-line as desired.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" -->
<p class="titleinrefsubsect"><a id="sthref692"></a>Usage notes</p>
<ul>
<li>
<p>You can enter the snapshot IDs in either order. The procedure determines which is the earlier.</p>
</li>
</ul>
<a id="BABGDIHB"></a><a id="TTPLP71671"></a>
<hr/>
<h3 class="refsect2">GET_C<a id="sthref693"></a>ONFIG procedures</h3>
<p>Either procedure retrieves the value of a specified <code>TT_STATS</code> configuration parameter or the values of all configuration parameters. The version without the <code>OUT</code> parameter sends the information to the standard output.</p>
<p class="titleinrefsubsect"><a id="sthref694"></a>Syntax</p>
<pre>TT_STATS.GET_CONFIG (
   <span class="italic">name</span>      IN   VARCHAR2 DEFAULTED);

TT_STATS.GET_CONFIG (
   <span class="italic">name</span>      IN   VARCHAR2 DEFAULTED,
   <span class="italic">params</span>    OUT  TT_STATS.REPORT_TABLE);
</pre>
<p class="titleinrefsubsect"><a id="sthref695"></a>Parameters</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="TTPLP71672"></a><a id="sthref696"></a><a id="sthref697"></a>Table 10-6 GET_CONFIG procedure parameters</p>
<table class="cellalignment1016" title="GET_CONFIG procedure parameters " summary="This table describes the parameters of the GET_CONFIG subprogram." dir="ltr">
<thead>
<tr class="cellalignment1010">
<th class="cellalignment1017" id="r1c1-t17">Parameter</th>
<th class="cellalignment1017" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r2c1-t17" headers="r1c1-t17">
<p><code><span class="codeinlineitalic">name</span></code></p>
</td>
<td class="cellalignment1018" headers="r2c1-t17 r1c2-t17">
<p>Name of a <code>TT_STATS</code> configuration parameter whose value you want to retrieve</p>
<p>In this release, the following <code>TT_STATS</code> parameters are supported.</p>
<ul>
<li>
<p><code>MAX_SNAPSHOT_COUNT</code>: This is the maximum number of snapshots that can be stored.</p>
</li>
<li>
<p><code>MAX_SNAPSHOT_RETENTION_SIZE</code>: This is the maximum total size of all stored snapshots, in MB.</p>
</li>
</ul>
<p>If no parameter name is specified (<code><span class="codeinlineitalic">name</span></code> is empty), the values of all configuration parameters are displayed.</p>
<p>Also see <a href="#BABIHEFB">&#34;SET_CONFIG procedure&#34;</a>.</p>
</td>
</tr>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r3c1-t17" headers="r1c1-t17">
<p><code><span class="codeinlineitalic">params</span></code></p>
</td>
<td class="cellalignment1018" headers="r3c1-t17 r1c2-t17">
<p>An associative array (index-by table) containing the value of the specified <code>TT_STATS</code> parameter or values of all parameters</p>
<p>Each row is of type <code>VARCHAR2(32767)</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" -->
<a id="BABIHEFB"></a><a id="TTPLP71673"></a>
<hr/>
<h3 class="refsect2">SE<a id="sthref698"></a>T_CONFIG procedure</h3>
<p>This procedure sets a specified value for a specified <code>TT_STATS</code> configuration parameter.</p>
<p class="titleinrefsubsect"><a id="sthref699"></a>Syntax</p>
<pre>TT_STATS.SET_CONFIG (
   <span class="italic">name</span>      IN  VARCHAR2,
   <span class="italic">value</span>     IN  BINARY_INTEGER);
</pre>
<p class="titleinrefsubsect"><a id="sthref700"></a>Parameters</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="TTPLP71674"></a><a id="sthref701"></a><a id="sthref702"></a>Table 10-7 SET_CONFIG procedure parameters</p>
<table class="cellalignment1016" title="SET_CONFIG procedure parameters " summary="This table describes the parameters of the SET_CONFIG subprogram." dir="ltr">
<thead>
<tr class="cellalignment1010">
<th class="cellalignment1017" id="r1c1-t18">Parameter</th>
<th class="cellalignment1017" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r2c1-t18" headers="r1c1-t18">
<p><code><span class="codeinlineitalic">name</span></code></p>
</td>
<td class="cellalignment1018" headers="r2c1-t18 r1c2-t18">
<p>Name of the <code>TT_STATS</code> configuration parameter to set</p>
<p>In this release, the following <code>TT_STATS</code> parameters are supported:</p>
<ul>
<li>
<p><code>MAX_SNAPSHOT_COUNT</code>: This is the maximum number of snapshots that can be stored. The default value is 256.</p>
</li>
<li>
<p><code>MAX_SNAPSHOT_RETENTION_SIZE</code>: This is the maximum total size of all stored snapshots, in MB. The default value is 256 MB.</p>
</li>
</ul>
<p>An error is issued if either limit is exceeded, and the snapshot capture fails.</p>
<p>Also see <a href="#BABGDIHB">&#34;GET_CONFIG procedures&#34;</a>.</p>
</td>
</tr>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r3c1-t18" headers="r1c1-t18">
<p><code><span class="codeinlineitalic">value</span></code></p>
</td>
<td class="cellalignment1018" headers="r3c1-t18 r1c2-t18">
<p>Value to set for the specified parameter</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" -->
<p class="titleinrefsubsect"><a id="sthref703"></a>Usage notes</p>
<ul>
<li>
<p>The scope of these settings is global, affecting all connections to the database.</p>
</li>
</ul>
<p class="titleinrefsubsect"><a id="sthref704"></a>Examples</p>
<p>Specify a limit of 500 stored snapshots:</p>
<pre>call tt_stats.set_config(&#39;MAX_SNAPSHOT_COUNT&#39;, 500);
</pre>
<a id="BABBDHDJ"></a><a id="TTPLP71675"></a>
<hr/>
<h3 class="refsect2">SHO<a id="sthref705"></a>W_SNAPSHOTS procedures</h3>
<p>This procedure shows the IDs and timestamps of all snapshots of TimesTen metrics currently stored in the database.</p>
<p>The version without the <code>OUT</code> parameter sends the information to the standard output.</p>
<p class="titleinrefsubsect"><a id="sthref706"></a>Syntax</p>
<pre>TT_STATS.SHOW_SNAPSHOTS;

TT_STATS.SHOW_SNAPSHOTS (
   <span class="italic">resultset</span>    OUT TT_STATS.REPORT_TABLE);
</pre>
<p class="titleinrefsubsect"><a id="sthref707"></a>Parameters</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="TTPLP71676"></a><a id="sthref708"></a><a id="sthref709"></a>Table 10-8 SHOW_SNAPSHOTS procedure parameters</p>
<table class="cellalignment1016" title="SHOW_SNAPSHOTS procedure parameters " summary="This table describes the parameters of the SHOW_SNAPSHOTS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1010">
<th class="cellalignment1017" id="r1c1-t19">Parameter</th>
<th class="cellalignment1017" id="r1c2-t19">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1010">
<td class="cellalignment1018" id="r2c1-t19" headers="r1c1-t19">
<p><code><span class="codeinlineitalic">resultset</span></code></p>
</td>
<td class="cellalignment1018" headers="r2c1-t19 r1c2-t19">
<p>An associative array (index-by table) with pairs of data showing the ID and timestamp of each currently stored snapshot</p>
<p>Each row is of type <code>VARCHAR2(32767)</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1009">
<tr>
<td class="cellalignment1018">
<table class="cellalignment1014">
<tr>
<td class="cellalignment1013"><a href="t_dbver.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1013"><a href="u_file.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1020">
<table class="cellalignment1012">
<tr>
<td class="cellalignment1013"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1013"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1013"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1013"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1013"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1013"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>