<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-114125"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Migrating%20Data%20Using%20Oracle%20Data%20Pump"></a><title>Migrating Data Using Oracle Data Pump</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1091"/>
<meta name="dcterms.created" content="2017-07-10T11:50:5Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Upgrade Guide"/>
<meta name="dcterms.identifier" content="E41397-13"/>
<meta name="dcterms.isVersionOf" content="UPGRD"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="downgrade.htm" title="Previous" type="text/html"/>
<link rel="Next" href="deprecated.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41397-13.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/14</span> <!-- End Header -->
<div id="UPGRD008" class="chapter"><a id="BABJHBEJ"></a> <a id="i262220"></a>
<h1 class="chapter"><span class="secnum">7</span> Migrating Data Using Oracle Data Pump</h1>
<p><a id="sthref603"></a><a id="sthref604"></a><a id="sthref605"></a>To facilitate upgrading Oracle Database, you can use the Export and Import utilities in Oracle Data Pump to migrate data from one database to another. Oracle Data Pump provides high performance Export (expdp) and Import (impdp) utilities.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BABGEAGC">Overview of Data Pump and Export/Import For Migrating Data</a></p>
</li>
<li>
<p><a href="#i262317">Migrating Data With Data Pump When Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#BABJAHGA">Data Pump Requirements When Downgrading Oracle Database</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<a class="olink SUTIL" href="../SUTIL/toc.htm"><span class="italic">Oracle Database Utilities</span></a> for detailed information about Data Pump and the Export and Import utilities</div>
<a id="BABGEAGC"></a>
<div id="UPGRD12560" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">7.1</span> Overview of Data Pump and Export/Import <a id="sthref606"></a><a id="sthref607"></a><a id="sthref608"></a><a id="sthref609"></a><a id="sthref610"></a><a id="sthref611"></a>For Migrating Data</h2>
<p>Oracle provides <a id="sthref612"></a><a id="sthref613"></a>Data Pump Export and Import to <span class="italic">migrate</span>, or move, data from one Oracle database to another. This is useful after upgrading Oracle Database.</p>
<p>Data Pump offers the following benefits:</p>
<ul>
<li>
<p>Supports filtering the metadata that is exported and imported based upon objects and object types, using <code dir="ltr">INCLUDE</code> and <code dir="ltr">EXCLUDE</code> parameters.</p>
</li>
<li>
<p>Supports different modes for unloading/loading portions of the database including: full database mode, schema mode, table mode, tablespace mode, and transportable tablespace mode. (See the topics about Data Pump export modes and Data Pump import modes in <a class="olink SUTIL" href="../SUTIL/toc.htm"><span class="italic">Oracle Database Utilities</span></a>.)</p>
</li>
<li>
<p>Enables you to specify how partitioned tables should be handled during import operations, using the <code dir="ltr">PARTITION_OPTIONS</code> parameter.</p>
</li>
<li>
<p>Provides support for the full range of data types.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink SUTIL100" href="../SUTIL/GUID-17FAE261-0972-4220-A2E4-44D479F519D4.htm#SUTIL100"><span class="italic">Oracle Database Utilities</span></a> for an overview of Data Pump Export and Import</p>
</li>
<li>
<p><a href="preup.htm#BABFHFIJ">&#34;The Export/Import Method for Migrating Data When Upgrading Oracle Database&#34;</a> for information on when to use this method</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="i262317"></a>
<div id="UPGRD12565" class="sect1">
<h2 class="sect1"><span class="secnum">7.2</span> Migrating Data With Data Pump When Upgrading Oracle Database</h2>
<p>You can take advantage of Oracle Data Pump to export data from the source database before you install the new Oracle Database software, and then import the data into the target upgraded database.</p>
<p>To use Oracle Data Pump with the upgrade procedures:</p>
<a id="i262325"></a>
<ol>
<li id="BABFCIDH">
<p>Export data from the current database using the Export utility shipped with the current database. See the current <a class="olink SUTIL200" href="../SUTIL/GUID-5F7380CE-A619-4042-8D13-1F7DDE429991.htm#SUTIL200"><span class="italic">Oracle Database Utilities</span></a> documentation for information about using the Export utility on the current database.</p>
<p>To ensure a consistent export, the current database must not be available for updates during and after the export. If the current database is available to users for updates after the export, then, before making the current database available, put procedures in place to copy the changes made in the current database to the new database after the import is complete.</p>
</li>
<li>
<p>Install the new Oracle Database software. Installation steps for Oracle Database are covered in your operating system-specific Oracle documentation. Refer to <a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=GINST"><span class="italic">Oracle Database Installation Guide</span></a> for your operating system.</p>
</li>
<li>
<p>If the new database has the same name as the current database, then shut down the current database before creating the new database.</p>
</li>
<li>
<p>Create the new database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN002" href="../ADMIN/create.htm#ADMIN002"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for information about creating a database</div>
</li>
<li>
<p>Start SQL*Plus in the new Oracle Database environment.</p>
</li>
<li>
<p>Connect to the database instance as a user with <code dir="ltr">SYSDBA</code> privileges.</p>
</li>
<li id="i262369">
<p>Start an Oracle Database instance using <code dir="ltr">STARTUP</code>.</p>
</li>
<li>
<p>Optionally, you can change the storage parameters from the source database.</p>
<p>You can pre-create tablespaces, users, and tables in the new database to improve space usage by changing storage parameters. When you pre-create tables using SQL*Plus, either run the database in the original database compatibility mode or make allowances for the specific data definition conversions that occur during import.</p>
<p>When items have been pre-created, specify the <code dir="ltr">TABLE_EXISTS_ACTION=APPEND</code> option for Data Pump Import.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the new database is created on the same computer as the source database, and you do not want to overwrite the source database data files, then you must pre-create the tablespaces and specify an option when you import:
<ul>
<li>
<p><code dir="ltr">REUSE_DATAFILES=N</code> for Data Pump Import</p>
<p>Optionally, consider using the <code dir="ltr">REMAP_DATAFILE, REMAP_TABLESPACE</code> and <code dir="ltr">REMAP_TABLE</code> options so that references to the old names in the dump file set are remapped to new, non-colliding names.</p>
</li>
<li>
<p><code dir="ltr">DESTROY=N</code> for original Import.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Use the Import utility of the new database to import the objects exported from the current database. Include a parameter to save the informational messages and error messages from the import session to a file as follows:</p>
<ul>
<li>
<p>The <code dir="ltr">LOGFILE</code> parameter for Data Pump Import</p>
</li>
<li>
<p>The <code dir="ltr">LOG</code> parameter for original Import</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SUTIL" href="../SUTIL/toc.htm"><span class="italic">Oracle Database Utilities</span></a> for a complete description of the Import utility.</div>
</li>
<li>
<p>After the import, check the import log file for information about the imports of specific objects that completed successfully. If there were failures, check for information about any objects that failed.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink SUTIL" href="../SUTIL/toc.htm"><span class="italic">Oracle Database Utilities</span></a></p>
</li>
<li>
<p><a class="olink READM" href="../READM/toc.htm"><span class="italic">Oracle Database Readme</span></a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Use further Import scenarios as described in <a class="olink SUTIL" href="../SUTIL/toc.htm"><span class="italic">Oracle Database Utilities</span></a>, or use SQL scripts that create the database&#39;s objects to clean up incomplete imports (or possibly to start an entirely new import).</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If a Data Pump Export or Import job encounters an unrecoverable error, then the job can be restarted after the condition inducing the failure is corrected. The job continues automatically from the point of failure.</div>
</li>
<li>
<p>If changes are made to the current database after the export, then make sure those changes are propagated to the new database before making it available to users. Refer to step <a href="#BABFCIDH">1</a> in this procedure.</p>
</li>
<li>
<p>Complete the procedures described in <a href="afterup.htm#BABEEEFF">Chapter 4, &#34;Post-Upgrade Tasks for Oracle Database&#34;</a>.</p>
</li>
</ol>
<div id="UPGRD52674" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref614"></a>
<h3 class="sect2"><span class="secnum">7.2.1</span> Importing a Full Oracle Database Using a Network Link</h3>
<p>You can use the Data Pump Import utility with a database link to perform a full database import from a source database to a destination database without intermediate dump files. This method is an alternative to the procedure in <a href="#i262317">&#34;Migrating Data With Data Pump When Upgrading Oracle Database&#34;</a></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
In order to avoid interoperability errors, ensure that you have applied the appropriate patchset to the database being upgraded. See My Oracle Support at <code dir="ltr"><a href="http://support.oracle.com">http://support.oracle.com</a></code> to obtain the latest patchsets.
<p>You may also refer to support note ID 4511371.8, which discusses ORA-6544 and ORA-4052 errors.</p>
</div>
<p>To use a network link with the Data Pump Import utility, <code dir="ltr">impdp</code>:</p>
<ol>
<li>
<p>Ensure that the exporting user at the source database has the <code dir="ltr">DATAPUMP_EXP_FULL_DATABASE</code> role.</p>
<p>This user must be specified when you create the database link.</p>
</li>
<li>
<p>Ensure that the importing user at the destination database has the <code dir="ltr">DATAPUMP_IMP_FULL_DATABASE</code> role.</p>
</li>
<li>
<p>Create and test a database link between the source and destination databases.</p>
</li>
<li>
<p>Run the following command, where <code dir="ltr"><span class="codeinlineitalic">import_user</span></code> is the username for the importing user, and <code dir="ltr"><span class="codeinlineitalic">db_link</span></code> is the name of the database link owned by the exporting user:</p>
<pre dir="ltr">IMPDP <span class="italic">import_user</span> NETWORK_LINK=<span class="codeinlineitalic">db_link</span> FULL=Y;
</pre></li>
<li>
<p>A log file for the import operation writes to the <code dir="ltr">DATA_PUMP_DIR</code> directory. You can discover the location of this directory by running the following command:</p>
<pre dir="ltr">SQL&gt; select * from dba_directories where DIRECTORY_NAME like &#39;DATA_PUMP_DIR&#39;;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
XML objects are not exported from the source database.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Note 466181.1 on My Oracle Support at <code dir="ltr"><a href="http://support.oracle.com">http://support.oracle.com</a></code> for more information on Data Pump Imports using a database link</div>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
The import operation re-creates users on the new destination server, and the creation date for <code dir="ltr">dba_users</code> shows the actual import date. The expiration date is updated to be <code dir="ltr">creation_date</code> + <code dir="ltr">password_life_time</code>. The parameters for dba_users on the new server are different than the dba_users parameters on the source server.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABJAHGA"></a>
<div id="UPGRD12563" class="sect1">
<h2 class="sect1"><span class="secnum">7.3</span> Data Pump Requirements When Downgrading Oracle Database</h2>
<p>When using Data Pump with the downgrade process, the Oracle Database release to which you downgrade can be one release earlier, at the most.</p>
<p>To obtain a downward compatible dump file with Data Pump Export:</p>
<ul>
<li>
<p>Use the Data Pump Export utility in the <span class="italic">current</span> release, and set the <code dir="ltr">VERSION</code> parameter to the release of the earlier target to which you are downgrading.</p>
<p>Data Pump Import cannot read dump file sets created by a database release that is later than the current database release, unless those dump file sets were created with the <code dir="ltr">VERSION</code> parameter set to the release number of the target database. Therefore, the best way to perform a downgrade is to use Data Pump Export with the <code dir="ltr">VERSION</code> parameter set to the release number of the target database to which you are downgrading.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SUTIL110" href="../SUTIL/GUID-BAA3B679-A758-4D55-9820-432D9EB83C68.htm#SUTIL110"><span class="italic">Oracle Database Utilities</span></a> for more information about using the <code dir="ltr">VERSION</code> parameter</div>
</li>
</ul>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1827">
<tr>
<td class="cellalignment1834">
<table class="cellalignment1832">
<tr>
<td class="cellalignment1831"><a href="downgrade.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1831"><a href="deprecated.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1836">
<table class="cellalignment1830">
<tr>
<td class="cellalignment1831"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1831"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1831"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1831"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1831"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1831"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>