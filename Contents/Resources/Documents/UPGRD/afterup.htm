<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-114118"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Post-Upgrade%20Tasks%20for%20Oracle%20Database"></a><title>Post-Upgrade Tasks for Oracle Database</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1091"/>
<meta name="dcterms.created" content="2017-07-10T11:50:4Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Upgrade Guide"/>
<meta name="dcterms.identifier" content="E41397-13"/>
<meta name="dcterms.isVersionOf" content="UPGRD"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="upgrade.htm" title="Previous" type="text/html"/>
<link rel="Next" href="app.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41397-13.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">8/14</span> <!-- End Header -->
<div id="UPGRD004" class="chapter"><a id="BABEEEFF"></a> <a id="i1008954"></a>
<h1 class="chapter"><span class="secnum">4</span> Post-Upgrade Tasks for Oracle Database</h1>
<p><a id="sthref438"></a>After performing the procedures for upgrading Oracle Database, you must complete required tasks and consider recommendations for the new release.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDFCAHG">How to Show the Current State of the Oracle Data Dictionary</a></p>
</li>
<li>
<p><a href="#CHDBHHGA">About OPatch Commands After Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#CEGBJCBA">Required Tasks to Complete After Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#CEGCHFAC">Required Task After Oracle Grid Infrastructure Upgrades</a></p>
</li>
<li>
<p><a href="#CEGBGBII">Requirement for Role-Allocated Software Owners and Database Upgrade After Oracle ASM Upgrade</a></p>
</li>
<li>
<p><a href="#CEGHGAIG">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#CEGGEECD">Recommended Tasks After Upgrading an Oracle RAC Database</a></p>
</li>
<li>
<p><a href="#CEGBDIHI">Recommended Tasks After Upgrading Oracle ASM</a></p>
</li>
<li>
<p><a href="#CEGEJIJG">Recommended Tasks After Upgrading Oracle Database Express Edition</a></p>
</li>
<li>
<p><a href="#CHDIJCFE">Optionally Update Oracle Application Express Packaged Applications</a></p>
</li>
<li>
<p><a href="#CEGGHCAD">Tasks to Complete Only After Manually Upgrading Oracle Database</a></p>
</li>
</ul>
<a id="CHDFCAHG"></a>
<div id="UPGRD60033" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.1</span> How to Show the Current State of the Oracle Data Dictionary</h2>
<p>You can collect upgrade and migration diagnostic information about the current state of the data dictionary by running the <code dir="ltr">dbupgdiag.sql</code> script. The script can be run in SQL*Plus both before the upgrade on the source database and after the upgrade on the upgraded database as SYS user.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Note 556610.1 Script to Collect DB Upgrade/Migrate Diagnostic Information (dbupgdiag.sql) on My Oracle Support at at <code dir="ltr"><a href="http://support.oracle.com">http://support.oracle.com</a></code></div>
<p>To show the current state of the dictionary, execute a SQL query similar to the following example:</p>
<pre dir="ltr">SQL&gt; spool /tmp/regInvalid.out
SQL&gt; set echo on
-- query registry
SQL&gt; set lines 80 pages 100
SQL&gt; select substr(comp_id,1,15) comp_id,substr(comp_name,1,30)
      comp_name,substr(version,1,10) version,status
from dba_registry order by modified;
</pre>
<p>To query invalid objects, execute a SQL query similar to:</p>
<pre dir="ltr">SQL&gt; select substr(owner,1,12) owner,substr(object_name,1,30) object,substr(object_type,1,30) type, status
from dba_objects where status &lt;&gt; &#39;VALID&#39;order by owner, type;
SQL&gt; spool off
SQL&gt; set echo off
</pre></div>
<!-- class="sect1" -->
<a id="CHDBHHGA"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.2</span> About OPatch Commands After Upgrading Oracle Database</h2>
<p>After you upgrade Oracle Database, you must run OPatch commands from the new Oracle home. For example, run the <a id="sthref439"></a><a id="sthref440"></a><code dir="ltr">lsinventory</code> command from the new Oracle home in order to list an accurate and complete inventory of what is currently installed on the system.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
&#34;Appendix A&#34; in <a class="olink OPTCH" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=OPTCH"><span class="italic">Oracle OPatch User&#39;s Guide for Windows and UNIX</span></a> for OPatch syntax and commands</div>
</div>
<!-- class="sect1" -->
<a id="CEGBJCBA"></a>
<div id="UPGRD12421" class="sect1">
<h2 class="sect1"><span class="secnum">4.3</span> Required Tasks to Complete After Upgrading Oracle Database</h2>
<p>After you upgrade Oracle Database, regardless of whether you perform the upgrade manually, or upgrade by using Database Upgrade Assistant (DBUA), you must complete any required tasks that are specified for your environment.</p>
<ul>
<li>
<p><a href="#CEGCBIIE">Set Environment Variables on Linux and UNIX Systems After Manual Upgrades</a></p>
</li>
<li>
<p><a href="#CEGDBEBF">Upgrade the Recovery Catalog After Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#CEGBGBDA">Upgrade the Time Zone File Version After Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#CEGBGAFB">Upgrade Statistics Tables Created by the DBMS_STATS Package After Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#CEGCJHDI">Upgrade Externally Authenticated SSL Users After Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#CHDGBIFJ">Configure the FTP and HTTP Ports and HTTP Authentication for Oracle XML DB</a></p>
</li>
<li>
<p><a href="#CEGBIBCF">Install Oracle Text Supplied Knowledge Bases After Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#CEGECAHJ">Update Your Oracle Application Express Configuration After Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#CEGDGAHJ">Configure Access Control Lists (ACLs) to External Network Services</a></p>
</li>
<li>
<p><a href="#CEGDGAIC">Enable Oracle Database Vault After Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#CHDCFAHG">Check for the SQLNET.ALLOWED_LOGON_VERSION Parameter Behavior</a></p>
</li>
</ul>
<a id="CEGCBIIE"></a>
<div id="UPGRD12422" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.1</span> Set Environment Variables on Linux and UNIX Systems After Manual Upgrades</h3>
<p>If your operating system is Linux or UNIX, and if you performed a manual upgrade of Oracle Database, then you must ensure that certain environment variables point to the directories of the new Oracle Database release. Additionally, if you are upgrading a cluster database, then perform these checks on all nodes on which the cluster database has instances configured.</p>
<p>Confirm that the following environment variables point to the directories of the new Oracle home:</p>
<ul>
<li>
<p><code dir="ltr">ORACLE_HOME</code></p>
</li>
<li>
<p><code dir="ltr">PATH</code></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
DBUA automatically makes necessary changes to Oracle environment variables.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN12480" href="../ADMIN/create.htm#ADMIN12480"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for information about setting environment variables for the database</p>
</li>
<li>
<p><a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=GINST"><span class="italic">Oracle Database Installation Guide</span></a> for your operating system for information about setting other important environment variables</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<div id="UPGRD52744" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref441"></a>
<h3 class="sect2"><span class="secnum">4.3.2</span> Set oratab and Scripts to Point to the New Oracle Location After Upgrading Oracle Database</h3>
<p>After you upgrade Oracle Database to the new release, you must ensure that your <code dir="ltr">oratab</code> file and any client scripts that set the value of <code dir="ltr"><span class="codeinlineitalic">ORACLE_HOME</span></code> point to the new Oracle home that is created for the new Oracle Database 12<span class="italic">c</span> release. Although DBUA automatically points <code dir="ltr">oratab</code> to the new Oracle home, client scripts must be checked no matter which method you use to upgrade.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN12475" href="../ADMIN/dba.htm#ADMIN12475"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for information about setting operating system environment variables</div>
</div>
<!-- class="sect2" -->
<div id="UPGRD60138" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref442"></a>
<h3 class="sect2"><span class="secnum">4.3.3</span> Enable the New Extended Data Type Capability</h3>
<p>Oracle Database 12<span class="italic">c</span> introduces <code dir="ltr">MAX_STRING_SIZE</code> to control the maximum size of <code dir="ltr">VARCHAR2</code>, <code dir="ltr">NVARCHAR2</code>, and <code dir="ltr">RAW</code> data types in SQL. Setting <code dir="ltr">MAX_STRING_SIZE = EXTENDED</code> enables the 32767 byte limit introduced in Oracle Database 12<span class="italic">c</span>. The <code dir="ltr">COMPATIBLE</code> initialization parameter must be set to <code dir="ltr">12.0.0.0</code> or higher in order to be able to set <code dir="ltr">MAX_STRING_SIZE = EXTENDED</code>.</p>
<p>Enabling a system to take advantage of the new extended data types requires specific upgrade actions, as documented in the <a class="olink REFRN10321" href="../REFRN/GUID-D424D23B-0933-425F-BC69-9C0E6724693C.htm#REFRN10321"><span class="italic">Oracle Database Reference</span></a>. You can change the value of <code dir="ltr">MAX_STRING_SIZE</code> from <code dir="ltr">STANDARD</code> to <code dir="ltr">EXTENDED</code>. However, you cannot change the value of <code dir="ltr">MAX_STRING_SIZE</code> from <code dir="ltr">EXTENDED</code> to <code dir="ltr">STANDARD</code>. By setting <code dir="ltr">MAX_STRING_SIZE = EXTENDED</code>, you are taking an explicit action that could introduce application incompatibility in your database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN10321" href="../REFRN/GUID-D424D23B-0933-425F-BC69-9C0E6724693C.htm#REFRN10321"><span class="italic">Oracle Database Reference</span></a> for complete information about <code dir="ltr">MAX_STRING_SIZE</code>, including recommendations and procedures</div>
</div>
<!-- class="sect2" -->
<div id="UPGRD60139" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref443"></a>
<h3 class="sect2"><span class="secnum">4.3.4</span> Adjust Minimum and Maximum for Parallel Execution Servers</h3>
<p>In Oracle Database 12<span class="italic">c</span> the default for <code dir="ltr">PARALLEL_MIN_SERVERS</code> has been changed from <code dir="ltr">0</code> to a value depending on your hardware platform to accommodate sufficient minimal support for parallel execution. If the new default setting is too high for your environment, then adjust the setting for your requirements.The default for <code dir="ltr">PARALLEL_MAX_SERVERS</code> has not changed, and, therefore, if you have not changed the default in your old environment, no actions are needed.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN10160" href="../REFRN/GUID-1D7EC131-7B5B-40E5-A0F8-ABC7B4C5B0E8.htm#REFRN10160"><span class="italic">Oracle Database Reference</span></a> for information about <code dir="ltr">PARALLEL_MIN_SERVERS</code></div>
</div>
<!-- class="sect2" -->
<a id="CEGDBEBF"></a>
<div id="UPGRD12423" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.5</span> Upgrade the Recovery Catalog<a id="sthref444"></a><a id="sthref445"></a> After Upgrading Oracle Database</h3>
<p>If you use a version of the recovery catalog schema that is older than that required by the RMAN client, then you must upgrade it. For complete information about upgrading the recovery catalog and the <code dir="ltr">UPGRADE CATALOG</code> command, see <a class="olink BRADV188" href="../BRADV/rcmcatdb.htm#BRADV188"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV8015" href="../BRADV/rcmcatdb.htm#BRADV8015"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for information on managing an RMAN recovery catalog</div>
</div>
<!-- class="sect2" -->
<a id="CEGBGBDA"></a>
<div id="UPGRD52684" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.6</span> Upgrade the Time Zone File Version After Upgrading Oracle Database</h3>
<p>If the Pre-Upgrade Information Tool instructed you to upgrade the time zone files after completing the database upgrade, then use the <code dir="ltr">DBMS_DST</code> PL/SQL package to upgrade the time zone file.</p>
<p>Oracle Database supplies multiple versions of time zone files, and there are two types of file associated with each one: a large file, which contains all the time zones defined in the database, and a small file, which contains only the most commonly used time zones. The large versions are designated as <code dir="ltr">timezlrg_</code><code dir="ltr"><span class="codeinlineitalic">version_number</span></code><code dir="ltr">.dat</code>, while the small versions are designated as <code dir="ltr">timezone_</code><code dir="ltr"><span class="codeinlineitalic">version_number</span></code><code dir="ltr">.dat</code>. The files are located in the <code dir="ltr">oracore/zoneinfo</code> subdirectory under the Oracle Database home directory.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink NLSPG261" href="../NLSPG/ch4datetime.htm#NLSPG261"><span class="italic">Oracle Database Globalization Support Guide</span></a> and follow the procedure in &#34;Steps to Upgrade Time Zone File and Timestamp with Time Zone Data&#34;</p>
</li>
<li>
<p>Note ID 1509653.1 &#34;Updating the RDBMS DST version in 12<span class="italic">c</span> Release 1 (12.1.0.1 and up) using <code dir="ltr">DBMS_DST</code>&#34; on My Oracle Support at <code dir="ltr"><a href="http://support.oracle.com">http://support.oracle.com</a></code></p>
</li>
<li>
<p><a href="preup.htm#BABJBJBH">&#34;About Oracle Database Warnings for TIMESTAMP WITH TIME ZONE Data Type&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CEGBGAFB"></a>
<div id="UPGRD12424" class="sect2">
<h3 class="sect2"><span class="secnum">4.3.7</span> Upgrade Statistics Tables Created by the DBMS_STATS Package<a id="sthref446"></a><a id="sthref447"></a><a id="sthref448"></a> After Upgrading Oracle Database</h3>
<p>If you created statistics tables using the <code dir="ltr">DBMS_STATS.CREATE_STAT_TABLE</code> procedure, then upgrade these tables by running the following procedure:</p>
<pre dir="ltr">EXECUTE DBMS_STATS.UPGRADE_STAT_TABLE(&#39;green&#39;, &#39;stat_table&#39;); 
</pre>
<p>In the example, <code dir="ltr">green</code> is the owner of the statistics table and <code dir="ltr">STAT_TABLE</code> is the name of the statistics table. Perform this procedure for each statistics table.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ARPLS059" href="../ARPLS/d_stats.htm#ARPLS059"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the DBMS_STATS package</div>
</div>
<!-- class="sect2" -->
<a id="CEGCJHDI"></a>
<div id="UPGRD12425" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.8</span> Upgrade Externally Authenticated SSL Users After Upgrading Oracle Database</h3>
<p>If you are upgrading from Oracle9<span class="italic">i</span> Release 2 (9.2) or Oracle Database 10<span class="italic">g</span> Release 1 (10.1), and you are using <a id="sthref449"></a>externally authenticated SSL users, then you must run the <a id="sthref450"></a>SSL external users conversion (<a id="sthref451"></a><code dir="ltr">extusrupgrade</code>) script to upgrade those users. The script has the following syntax:</p>
<pre dir="ltr"><span class="italic">ORACLE_HOME</span>/rdbms/bin/extusrupgrade --dbconnectstring 
<span class="italic">host_name:port_no:sid</span> --dbuser &lt;db admin&gt; --dbuserpassword 
<span class="italic">password</span> -a
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are upgrading from Oracle Database 10<span class="italic">g</span> Release 2 (10.2) or later, then you are not required to run the <code dir="ltr">extusrupgrade</code> script.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DBIMI348" href="../DBIMI/appb.htm#DBIMI348"><span class="italic">Oracle Database Enterprise User Security Administrator&#39;s Guide</span></a> for more information on the <code dir="ltr">extusrupgrade</code> script</div>
</div>
<!-- class="sect2" -->
<a id="CHDGBIFJ"></a>
<div id="UPGRD52883" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.9</span> Configure the FTP and HTTP Ports and HTTP Authentication for Oracle XML DB</h3>
<p>For Oracle Database 12<span class="italic">c</span>, Database Creation Assistant (DBCA) does not configure ports for Oracle XML DB. You should also configure the authentication for HTTP for accessing Oracle XML DB Repository to take advantage of improved security features.</p>
<p>Starting with Oracle Database 12<span class="italic">c</span>, Oracle has enhanced database security by providing support for digest authentication. Digest authentication is an industry standard protocol commonly used with the HTTP protocol, and is supported by most HTTP clients. Digest authentication ensures that passwords are always transmitted in a secure manner, even when an encrypted (HTTPS) connection is not in use. Support for digest authentication enables organizations to deploy applications that leverage the Oracle XML DB HTTP without having to worry about passwords being compromised. Digest authentication support in Oracle XML DB also ensures that the Oracle XML DB HTTP server remains compatible with Microsoft Web Folders WebDAV clients.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADXDB2540" href="../ADXDB/xdb22pro.htm#ADXDB2540"><span class="italic">Oracle XML DB Developer&#39;s Guide</span></a> for information on configuring and managing authentication mechanisms for HTTP</div>
<p>After installing or upgrading for the new release, you must manually configure the FTP and HTTP ports for Oracle XML DB as follows:</p>
<ol>
<li>
<p>Use <code dir="ltr">DBMS_XDB_CONFIG.setHTTPPort</code>(<code dir="ltr"><span class="codeinlineitalic">HTTP port number</span></code>) to set the HTTP port for Oracle XML DB.</p>
<pre dir="ltr">SQL&gt; exec DBMS_XDB_CONFIG.setHTTPPort(<span class="italic">port_number</span>);
</pre></li>
<li>
<p>Use <code dir="ltr">DBMS_XDB_CONFIG.setFTPPort</code>(<code dir="ltr"><span class="codeinlineitalic">FTP port number</span></code>) to set the FTP port for Oracle XML DB.</p>
<pre dir="ltr">SQL&gt; exec DBMS_XDB_CONFIG.setFTPPort(<span class="italic">port_number</span>);
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can query the port numbers to use for FTP and HTTP in the procedure by using <code dir="ltr">DBMS_XDB_CONFIG.getFTPPort</code> and <code dir="ltr">DBMS_XDB_CONFIG.getHTTPPort</code> respectively.</div>
</li>
<li>
<p>To see all the used port numbers, you can use <code dir="ltr">DBMS_XDB_CONFIG.usedport</code>.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADXDB2500" href="../ADXDB/xdb22pro.htm#ADXDB2500"><span class="italic">Oracle XML DB Developer&#39;s Guide</span></a> for complete information about accessing the Oracle XML DB Repository data using FTP and HTTP(S)/WebDAV protocols</div>
</div>
<!-- class="sect2" -->
<a id="CEGBIBCF"></a>
<div id="UPGRD12426" class="sect2">
<h3 class="sect2"><span class="secnum">4.3.10</span> Install Oracle Text Supplied Knowledge Bases After Upgrading Oracle Database</h3>
<p>The <a id="sthref452"></a>Oracle Text-supplied knowledge bases are part of the companion products for Oracle Database 12<span class="italic">c</span> and are not immediately available after an upgrade to Oracle Database 12<span class="italic">c</span>. Any Oracle Text features dependent on the supplied knowledge bases which were available before the upgrade do not function after the upgrade. To re-enable such features, you must install the Oracle Text supplied knowledge bases from the installation media.</p>
<p>After an upgrade, all user extensions to the Oracle Text supplied knowledge bases must be regenerated. These changes affect all databases installed in the given Oracle home.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CCAPP0900" href="../CCAPP/GUID-05C24323-568D-4952-9358-7C98D68B19BF.htm#CCAPP0900"><span class="italic">Oracle Text Application Developer&#39;s Guide</span></a> for information about Oracle Text-supplied knowledge bases</p>
</li>
<li>
<p>The postinstallation tasks section of your platform-specific <a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=GINST"><span class="italic">Oracle Database Installation Guide</span></a> for companion products</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref453"></a>
<h3 class="sect2"><span class="secnum">4.3.11</span> Rebuild Oracle Text Indexes Using AUTO_LEXER</h3>
<p>After you complete your upgrade to Oracle Database 12c release 1, if you use Oracle Text indexes created with AUTO_LEXER, then you must rebuild the indexes for your queries to work.</p>
<p>In addition, you must rebuild indexes that have the following INDEX_STEMS types of BASIC_LEXER set:</p>
<ul>
<li>
<p>ARABIC</p>
</li>
<li>
<p>BOKMAL</p>
</li>
<li>
<p>CATALAN</p>
</li>
<li>
<p>CROATION</p>
</li>
<li>
<p>CZECH</p>
</li>
<li>
<p>DANISH</p>
</li>
<li>
<p>ERIVATIONAL_NEW</p>
</li>
<li>
<p>DUTCH_NEW</p>
</li>
<li>
<p>ENGLISH_NEW</p>
</li>
<li>
<p>FINNISH</p>
</li>
<li>
<p>FRENCH_NEW</p>
</li>
<li>
<p>GERMAN_NEW</p>
</li>
<li>
<p>GREEK</p>
</li>
<li>
<p>HEBREW</p>
</li>
<li>
<p>HUNGARIAN</p>
</li>
<li>
<p>ITALIAN_NEW</p>
</li>
<li>
<p>NYNORSK</p>
</li>
<li>
<p>POLISH</p>
</li>
<li>
<p>PORTUGUESE</p>
</li>
<li>
<p>ROMANIAN</p>
</li>
<li>
<p>RUSSIAN</p>
</li>
<li>
<p>SERBIAN</p>
</li>
<li>
<p>SLOVAK</p>
</li>
<li>
<p>SLOVENIAN</p>
</li>
<li>
<p>SPANISH_NEW</p>
</li>
<li>
<p>SWEDISH</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CEGECAHJ"></a>
<div id="UPGRD12427" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.12</span> Update Your Oracle Application Express Configuration<a id="sthref454"></a><a id="sthref455"></a> After Upgrading Oracle Database</h3>
<p>If your database originally included <a id="sthref456"></a>Oracle Application Express release 3.2 or later, then there is no additional configuration necessary after upgrading to Oracle Database 12<span class="italic">c</span>. However, if Oracle Application Express is in the registry and Oracle Application Express will be upgraded, then you should set the <code dir="ltr">open_cursors</code> parameter to a minimum of 200.</p>
<p>If your database was not an Oracle Express Edition database, but contained an earlier release of Oracle Application Express, then the latest release is automatically installed during the upgrade. You must complete a series of postinstallation steps to configure Application Express for use with the new Oracle Database 12<span class="italic">c</span>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink HTMIG203" href="../HTMIG/db_install.htm#HTMIG203"><span class="italic">Oracle Application Express Installation Guide</span></a> for postinstallation tasks for Oracle Application Express</div>
<p>If your database is an Oracle Express Edition database, then it contains an earlier release of Oracle Application Express, which is tailored for the Oracle Express Edition environment. Review the Oracle document describing the differences between Oracle Express Edition and Oracle Application Express at the following URL:</p>
<p><code dir="ltr"><a href="http://www.oracle.com/technetwork/developer-tools/apex/overview/index.html">http://www.oracle.com/technetwork/developer-tools/apex/overview/index.html</a></code></p>
</div>
<!-- class="sect2" -->
<a id="CEGDGAHJ"></a>
<div id="UPGRD12428" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.13</span> Configure Access Control Lists (ACLs) to External Network Services</h3>
<p>Oracle Database 12<span class="italic">c</span> includes fine-grained access control to the <code dir="ltr">UTL_TCP</code>, <code dir="ltr">UTL_SMTP</code>, <code dir="ltr">UTL_MAIL</code>, <code dir="ltr">UTL_HTTP</code>, or <code dir="ltr">UTL_INADDR</code> packages. If you have applications that use these packages, then after upgrading Oracle Database you must configure network <span class="italic">access control lists</span> (ACLs) in the database before these packages can work as they did in earlier releases. Without the ACLs, your applications may fail with the error &#34;ORA-24247: network access denied by access control list (ACL).&#34;</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DBSEG40012" href="../DBSEG/fine_grained_access.htm#DBSEG40012"><span class="italic">Oracle Database Security Guide</span></a> for more complicated situations, such as connecting some users to host A and other users to host B</div>
</div>
<!-- class="sect2" -->
<a id="CEGDGAIC"></a>
<div id="UPGRD12429" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.14</span> Enable Oracle Database Vault After Upgrading Oracle Database</h3>
<p>If you use Oracle Database Vault (DV), then you were instructed to disable it before upgrading your database. You must now enable Oracle Database Vault.</p>
<p>To start Oracle DV enforcement in the upgraded database, enable DV using the procedure <code dir="ltr">dvsys.dbms_macadm.enable_dv()</code>. A user with the <code dir="ltr">DV_OWNER</code> or <code dir="ltr">DV_ADMIN</code> role is the only one who can execute this procedure. For the procedure to take effect, the database instance needs to be restarted.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="preup.htm#BABIHIGB">&#34;Requirement for Upgrading Oracle Databases That Use Oracle Database Vault&#34;</a></p>
</li>
<li>
<p>The appendix about &#34;Disabling and Enabling Database Vault&#34; in <a class="olink DVADM012" href="../DVADM/dvdisabl.htm#DVADM012"><span class="italic">Oracle Database Vault Administrator&#39;s Guide</span></a></p>
</li>
<li>
<p>The appendix about &#34;Post-installation Database Vault Procedures&#34; in <a class="olink DVADM30031" href="../DVADM/getting_started.htm#DVADM30031"><span class="italic">Oracle Database Vault Administrator&#39;s Guide</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDCFAHG"></a>
<div id="UPGRD60157" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.15</span> Check for the SQLNET.ALLOWED_LOGON_VERSION Parameter Behavior</h3>
<p>Starting with Oracle Database 12<span class="italic">c</span>, the default value for the <code dir="ltr">SQLNET.ALLOWED_LOGON_VERSION</code> parameter has changed from 8 to 11. The use of this parameter has been deprecated, and it is now replaced with the <code dir="ltr">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> and <code dir="ltr">SQLNET.ALLOWED_LOGON_VERSION_CLIENT</code> parameters. If you have not explicitly set the <code dir="ltr">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> parameter in the upgraded database, then connections from clients earlier than release 10<span class="italic">g</span> will fail with the error ORA-28040: No matching authentication protocol. For better security, check the password verifiers of your database users, and then configure the database to use the correct password verifier by setting the <code dir="ltr">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> and <code dir="ltr">SQLNET.ALLOWED_LOGON_VERSION_CLIENT</code> parameters.</p>
<p>If you have password-protected roles (secure roles) in your existing database and if you upgrade to Oracle Database 12<span class="italic">c</span> with the default <code dir="ltr">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> setting of 11, because those secure roles only have release 10<span class="italic">g</span> verifiers, the password for each secure role must be reset by the administrator so that the secure roles will remain usable after the upgrade.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink DBSEG30324" href="../DBSEG/authentication.htm#DBSEG30324"><span class="italic">Oracle Database Security Guide</span></a> for information about ensuring against password security threats</p>
</li>
<li>
<p><a class="olink DBSEG3225" href="../DBSEG/authentication.htm#DBSEG3225"><span class="italic">Oracle Database Security Guide</span></a> for information about setting the password versions of users</p>
</li>
<li>
<p><a href="deprecated.htm#BABEDDGA">&#34;Deprecation of SQLNET.ALLOWED_LOGON_VERSION Parameter&#34;</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGCHFAC"></a>
<div id="UPGRD12454" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.4</span> Required Task After Oracle Grid Infrastructure Upgrades</h2>
<p>After upgrading, you should confirm that your environment variable settings are correct. See <a href="#CEGJABBC">&#34;Using Environment Variables for Grid Infrastructure Installations.&#34;</a> Oracle ASM is included as part of an Oracle Grid Infrastructure installation. If you upgrade Oracle Clusterware and Oracle ASM for a cluster, then Oracle Clusterware and Oracle ASM are both located in the same home, which is referred to as <span class="italic">Grid home</span>. You can have one installation owner that owns all Oracle software installations, or you can use role-allocated owners, in which case you use a separate software owner for the Grid Infrastructure installation, and separate software owners for one or more Oracle Database installations.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWGEN" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=CWGEN"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for your platform for more information about role-allocated installation owners</div>
<a id="CEGJABBC"></a>
<div id="UPGRD52691" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.4.1</span> Using Environment Variables for Grid Infrastructure Installations</h3>
<p>If your operating system is Linux or UNIX, then confirm that your environment variable settings are correct after performing an upgrade.</p>
<p>If you use a single Oracle installation owner for all installations, then be aware that you should change environment variables such as <code dir="ltr">ORACLE_HOME</code> either to an Oracle Database home, or to the Grid home, depending on whether you are administering an Oracle Database instance as part of database administration, or administering an Oracle ASM instance as part of storage administration.</p>
<p>If you use role-allocated Oracle installation owners, so that you have a separate owner for the Oracle Grid Infrastructure (Oracle Clusterware and Oracle ASM) software, then set the following environment variables for the Grid Infrastructure installation owner so that they point to the directories of the Oracle ASM home in the Grid home:</p>
<ul>
<li>
<p><code dir="ltr">ORACLE_HOME</code></p>
</li>
<li>
<p><code dir="ltr">PATH</code></p>
</li>
</ul>
<p>Also, check that your <code dir="ltr">oratab</code> file and any client scripts for Oracle ASM that set the value of <code dir="ltr">ORACLE_HOME</code> point to the Oracle ASM home in the Grid home.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are upgrading a clustered Oracle ASM installation to an Oracle Grid Infrastructure for a cluster installation, then perform these checks on all cluster member nodes. DBUA automatically points <code dir="ltr">oratab</code> to the new Oracle home. Client scripts must be checked no matter how you upgrade.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>Your operating system-specific <a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=GINST"><span class="italic">Oracle Database Installation Guide</span></a> for information about setting other important environment variables on your operating system</p>
</li>
<li>
<p><a class="olink CWGEN" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=CWGEN"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> or <a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=GINST"><span class="italic">Oracle Database Installation Guide</span></a> for your platform</p>
</li>
<li>
<p><a class="olink OSTMG94317" href="../OSTMG/GUID-DEF14BF6-30C4-4B52-969D-97158063F612.htm#OSTMG94317"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for information about upgrading an Oracle ASM instance</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGBGBII"></a>
<div id="UPGRD52695" class="sect1">
<h2 class="sect1"><span class="secnum">4.5</span> Requirement for Role-Allocated Software Owners and Database Upgrade After Oracle ASM Upgrade</h2>
<p>If you <a id="sthref457"></a>separate the operating system user ownership of the Oracle Grid Infrastructure binaries and the Oracle Database installation owners of one or more databases, then you must migrate the operating system user of an upgraded Oracle ASM or database home. For example, if you are <a id="sthref458"></a><a id="sthref459"></a>migrating from one software binary owner (such as <code dir="ltr">oracle</code>) to multiple role-allocated software owner user accounts (such as <code dir="ltr">grid</code>, <code dir="ltr">oracle1</code>, <code dir="ltr">oracle2</code>), then change the owner of the existing Oracle ASM installation owner to the installation owner that you plan to use for the Oracle Grid Infrastructure installation.</p>
<p>There are three scenarios to consider as follows:</p>
<ul>
<li>
<p><a href="#CEGBFJGC">Keeping the Existing User as the Oracle ASM Operating System User</a></p>
</li>
<li>
<p><a href="#CEGDEAGC">Changing the Operating System User for Single-Instance Oracle ASM</a></p>
</li>
<li>
<p><a href="#CEGCFFJC">Changing the Operating System User for an Oracle RAC Database</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink OSTMG02700" href="../OSTMG/GUID-FBB5AA72-5208-48E1-BD8D-0FD4C6876F34.htm#OSTMG02700"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for information on making an Oracle ASM disk group compatible with new releases, and for additional information about Oracle ASM upgrades</div>
<a id="CEGBFJGC"></a>
<div id="UPGRD52696" class="sect2">
<h3 class="sect2"><span class="secnum">4.5.1</span> Keeping the Existing User as the Oracle ASM Operating System User</h3>
<p>If you are using the same operating system user for your Oracle Grid Infrastructure installation that you used for your existing Oracle ASM installation, then run Oracle Universal Installer (OUI) to perform a Grid Infrastructure installation, and select the upgrade option. OUI automatically upgrades your existing Oracle ASM installation from the earlier release to Oracle Database 12<span class="italic">c</span> in the Grid home.</p>
</div>
<!-- class="sect2" -->
<a id="CEGDEAGC"></a>
<div id="UPGRD52697" class="sect2">
<h3 class="sect2"><span class="secnum">4.5.2</span> Changing the Operating System User for Single-Instance Oracle ASM</h3>
<p>Consider your earlier release Oracle ASM installation is installed in Oracle home 4 (<code dir="ltr">OH4</code>) and currently running <code dir="ltr">oracle</code> as the operating system user, and you want to change the Oracle ASM operating system user to <code dir="ltr">grid</code>. This is useful if you have two databases using Oracle ASM, and you had installed Oracle ASM with an installation owner that is identical to the owner of the existing databases, and you want to change the operating system installation owner of Oracle ASM to enable separate databases to run as separate operating system users, where neither Oracle Database installation owner has Oracle Grid Infrastructure binary ownership.</p>
</div>
<!-- class="sect2" -->
<a id="CEGCFFJC"></a>
<div id="UPGRD52698" class="sect2">
<h3 class="sect2"><span class="secnum">4.5.3</span> Changing the Operating System User for an Oracle RAC Database</h3>
<p>There may be scenarios where you must change the operating system user for an Oracle RAC database. For example, if your earlier release database is installed in Oracle home 4 (<code dir="ltr">OH4</code>) and currently running <code dir="ltr">oracle</code> as the operating system user, then you should consider changing the Oracle ASM operating system user to <code dir="ltr">grid</code>. Changing the operating system user of Oracle ASM enables separate databases to run as separate operating system users, where no Oracle Database installation owner has Grid Infrastructure binary ownership.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWGEN10001" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=CWGEN10001"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for the procedures to change the operating system user for an Oracle RAC database with Grid Infrastructure and Oracle ASM</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGHGAIG"></a>
<div id="UPGRD12432" class="sect1">
<h2 class="sect1"><span class="secnum">4.6</span> Recommended and Best Practices to Complete After Upgrading Oracle Database</h2>
<p>After you have upgraded Oracle Database, there are tasks Oracle recommends that you complete. These tasks represent good practices for updating Oracle Database, and are recommended regardless of whether you performed the upgrade manually or by using DBUA.</p>
<ul>
<li>
<p><a href="#CEGHJAGH">Back Up the Database</a></p>
</li>
<li>
<p><a href="#CHDJACCG">Run the postupgrade_fixups.sql Script</a></p>
</li>
<li>
<p><a href="#CHDDADDD">Gather Fixed Objects Statistics with DBMS_STATS</a></p>
</li>
<li>
<p><a href="#CEGCIEGH">Reset Passwords to Enforce Case-Sensitivity</a></p>
</li>
<li>
<p><a href="#CEGCEBDE">Understand Changes with Oracle Grid Infrastructure</a></p>
</li>
<li>
<p><a href="#CEGEDDAE">Understand Oracle ASM and Oracle Grid Infrastructure Installation and Upgrade</a></p>
</li>
<li>
<p><a href="#CEGHDJEF">Add New Features as Appropriate</a></p>
</li>
<li>
<p><a href="#CEGFIHCI">Develop New Administrative Procedures as Needed</a></p>
</li>
<li>
<p><a href="#CEGHHDFE">Set Threshold Values for Tablespace Alerts</a></p>
</li>
<li>
<p><a href="#CEGHGBJE">Migrate From Rollback Segments to Automatic Undo Mode</a></p>
</li>
<li>
<p><a href="#CEGCDBGG">Configure Oracle Data Guard Broker</a></p>
</li>
<li>
<p><a href="#CEGFFJGF">Migrate Tables from the LONG Data Type to the LOB Data Type</a></p>
</li>
<li>
<p><a href="#CHDEFHGA">Migrate Your Upgraded Oracle Databases to Use Unified Auditing</a></p>
</li>
<li>
<p><a href="#CEGGFBJI">Test the Upgraded Production Oracle Database</a></p>
</li>
</ul>
<a id="CEGHJAGH"></a>
<div id="UPGRD12433" class="sect2">
<h3 class="sect2"><span class="secnum">4.6.1</span> Back Up the Database <a id="sthref460"></a></h3>
<p>Make sure you perform a full backup of the production database. Although this step is not required, Oracle strongly recommends that you back up your production database.</p>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<a class="olink BRADV8003" href="../BRADV/rcmbckba.htm#BRADV8003"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for details about backing up a database with RMAN</div>
</div>
<!-- class="sect2" -->
<a id="CHDJACCG"></a>
<div id="UPGRD60140" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.6.2</span> Run the postupgrade_fixups.sql Script</h3>
<p>Although DBUA runs the <code dir="ltr">postupgrade_fixups.sql</code> script as part of completing the upgrade process, you can run it any time after upgrading. The <code dir="ltr">postupgrade_fixups.sql</code> script generates three categories of information for your upgraded database: general warnings, errors, and informational recommendations.</p>
<p>Run this script any time after completing an upgrade with DBUA or manually. If <code dir="ltr"><span class="codeinlineitalic">Oracle_Base</span></code> is defined, then the generated scripts and log files are created in <code dir="ltr"><span class="codeinlineitalic">Oracle_Base</span></code><code dir="ltr">/cfgtoollogs/</code> of the original database from which you ran the upgrade. If <code dir="ltr"><span class="codeinlineitalic">Oracle_Base</span></code> is not defined, then the generated scripts and log files are created in <code dir="ltr"><span class="codeinlineitalic">ORACLE_HOME</span></code><code dir="ltr">/cfgtoollogs/</code> of the database from which you ran the upgrade.</p>
<p>Set the system to spool results to a log file so you can read the output. Do not, however, spool to the <code dir="ltr">admin</code> directory. Run the script from the location of the database from which you ran the upgrade (not the new upgraded location):</p>
<pre dir="ltr">SQL&gt; SPOOL postupgrade.log
</pre>
<p>Turn off the spooling of script results to the log file.</p>
<pre dir="ltr">SQL&gt; SPOOL OFF
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you move either a PDB or any other stand-alone database from server A to server B, you must copy the <code dir="ltr">postupgrade_fixups.sql</code> script to the new location to execute it post-upgrade in the new environment.</div>
</div>
<!-- class="sect2" -->
<a id="CHDDADDD"></a>
<div id="UPGRD60056" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.6.3</span> Gather Fixed Objects Statistics with DBMS_STATS</h3>
<p>A few days after upgrading Oracle Database, a best practice is to gather fixed objects statistics with the <code dir="ltr">DBMS_STATS.GATHER_FIXED_OBJECTS_STATS</code> PL/SQL procedure. This can have a positive impact on overall database performance. <code dir="ltr">DBMS_STATS.GATHER_FIXED_OBJECTS_STATS</code> also displays a recommendation to remove all hidden or underscore parameters and events from <code dir="ltr">init.ora/spfile</code>.</p>
<p>Because of the transient nature of the x$ tables, it is important that you gather fixed objects statistics when there is a representative workload on the system. This may not always be feasible on large systems due to additional resources needed to gather the statistics. If you cannot do this during peak load, then you should do it after the system has warmed up and the key types of fixed object tables have been populated.</p>
<p>To gather statistics for fixed objects, run the following PL/SQL procedure:</p>
<pre dir="ltr">SQL&gt; execute dbms_stats.gather_fixed_objects_stats;
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ARPLS68573" href="../ARPLS/d_stats.htm#ARPLS68573"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about using the <code dir="ltr">GATHER_FIXED_OBJECTS_STATS</code> procedure</div>
</div>
<!-- class="sect2" -->
<a id="CEGCIEGH"></a>
<div id="UPGRD12434" class="sect2">
<h3 class="sect2"><span class="secnum">4.6.4</span> <a id="sthref461"></a>Reset Passwords to Enforce Case-Sensitivity<a id="sthref462"></a><a id="sthref463"></a><a id="sthref464"></a></h3>
<p>You can enforce case sensitivity for passwords. For example, the password <code dir="ltr">hPP5620qr</code> fails if it is entered as <code dir="ltr">hpp5620QR</code> or <code dir="ltr">hPp5620Qr</code>.</p>
<p>If you must reset the passwords of existing users during the database upgrade procedure, then for existing databases each user password must be reset with an <code dir="ltr">ALTER</code> <code dir="ltr">USER</code> statement. For new databases created after the upgrade, there are no additional tasks or management requirements.</p>
<p>To take advantage of enforced case-sensitive passwords for releases earlier than 11.1.0.7, you must reset the passwords of existing users during the database upgrade procedure. In this case, for upgraded databases, you can run the <code dir="ltr">DBMS_VERIFIER.EXPIRE_ACCOUNTS_WITHOUT_LATEST_VERIFIER</code> procedure, which forces users whose accounts do not yet have the latest verifier to change their passwords the next time they log in. The server can then generate the latest verifier for their account. For new databases, there are no additional tasks or management requirements.</p>
<p>For <code dir="ltr">SYSDBA</code> and <code dir="ltr">SYSOPER</code> users, you can generate a new <code dir="ltr">ORAPWD</code> file using the new command line switch <code dir="ltr">ignorecase</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>If the default security settings for Oracle Database 12<span class="italic">c</span> are in place, then passwords must be at least eight characters, and passwords such as <code dir="ltr">welcome</code> and <code dir="ltr">oracle</code> are not allowed. See <a class="olink DBSEG10005" href="../DBSEG/guidelines.htm#DBSEG10005"><span class="italic">Oracle Database Security Guide</span></a> for more information on password strength.</p>
</li>
<li>
<p>The <code dir="ltr">IGNORECASE</code> parameter is deprecated in this release. Oracle recommends not using this parameter.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DBSEG3225" href="../DBSEG/authentication.htm#DBSEG3225"><span class="italic">Oracle Database Security Guide</span></a> for more information on enabling password case sensitivity</div>
</div>
<!-- class="sect2" -->
<a id="CEGCEBDE"></a>
<div id="UPGRD52685" class="sect2">
<h3 class="sect2"><span class="secnum">4.6.5</span> Understand Changes with Oracle Grid Infrastructure</h3>
<p>Oracle Clusterware and Oracle ASM are both part of an Oracle Grid Infrastructure installation.</p>
<p>If Oracle Grid Infrastructure is installed for a single server, then it is deployed as an Oracle Restart installation with Oracle ASM. If Oracle Grid Infrastructure is installed for a cluster, then it is deployed as an Oracle Clusterware installation with Oracle ASM.</p>
<p>Oracle Restart enhances the availability of Oracle Database in a single-instance environment. If you install Oracle Restart, and there is a temporary failure of any part of the Oracle Database software stack, including the database, listener, and Oracle ASM instance, Oracle Restart automatically restarts the failed component. In addition, Oracle Restart starts all these components when the database host computer is restarted. The components are started in the proper order, taking into consideration the dependencies among components.</p>
<p>Oracle Clusterware is portable cluster software that enables clustering of single servers so that they cooperate as a single system. Oracle Clusterware also provides the required infrastructure for Oracle RAC. In addition, Oracle Clusterware enables the protection of any Oracle application or any other application within a cluster. In any case Oracle Clusterware is the intelligence in those systems that ensures required cooperation between the cluster nodes.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWGEN10001" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=CWGEN10001"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for more information and procedures</div>
</div>
<!-- class="sect2" -->
<a id="CEGEDDAE"></a>
<div id="UPGRD52686" class="sect2">
<h3 class="sect2"><span class="secnum">4.6.6</span> Understand Oracle ASM and Oracle Grid Infrastructure Installation and Upgrade</h3>
<p>In earlier releases, Oracle ASM was installed as part of the Oracle Database installation. Starting with Oracle Database release 11.2, Oracle ASM is installed when you install the Grid Infrastructure components. Oracle ASM shares an Oracle home with Oracle Clusterware when it is installed in a cluster such as with Oracle RAC or with Oracle Restart on a standalone server.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWGEN10001" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=CWGEN10001"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for more information and procedures</div>
</div>
<!-- class="sect2" -->
<a id="CEGHDJEF"></a>
<div id="UPGRD12436" class="sect2">
<h3 class="sect2"><span class="secnum">4.6.7</span> Add New Features as Appropriate<a id="sthref465"></a></h3>
<p>The <a class="olink NEWFT" href="../NEWFT/toc.htm"><span class="italic">Oracle Database New Features Guide</span></a> describes many of the new features available in the new Oracle Database 12<span class="italic">c</span> release. Determine which of these new features can benefit the database and applications. You can then develop a plan for using these features.</p>
<p>It is not necessary to make any immediate changes to begin using your new Oracle Database software. You might prefer to introduce these enhancements into your database and corresponding applications gradually.</p>
<p><a href="app.htm#BABHJHEH">Chapter 5, &#34;Upgrading Applications After Upgrading Oracle Database&#34;</a> describes ways to enhance your applications so that you can take advantage of the features of the new Oracle Database 12<span class="italic">c</span> release. However, before you implement new features, test your applications and successfully run them with the upgraded database.</p>
</div>
<!-- class="sect2" -->
<a id="CEGFIHCI"></a>
<div id="UPGRD12437" class="sect2">
<h3 class="sect2"><span class="secnum">4.6.8</span> Develop New Administrative Procedures as Needed<a id="sthref466"></a></h3>
<p>After familiarizing yourself with the features of the new Oracle Database 12<span class="italic">c</span> release, review your database administration scripts and procedures to determine whether any changes are necessary.</p>
<p>Coordinate your changes to the database with the changes that are necessary for each application. For example, by enabling integrity constraints in the database, you might be able to remove some data checking from your applications.</p>
</div>
<!-- class="sect2" -->
<a id="CEGHHDFE"></a>
<div id="UPGRD12438" class="sect2">
<h3 class="sect2"><span class="secnum">4.6.9</span> Set Threshold Values for Tablespace Alerts</h3>
<p>An upgraded Oracle Database 12<span class="italic">c</span> database has the Tablespace Alerts disabled (the thresholds are set to null). Tablespaces in the database that are candidates for monitoring must be identified and the appropriate threshold values set.</p>
<p>The default threshold values for a newly created Oracle Database 12<span class="italic">c</span> database are:</p>
<ul>
<li>
<p>85% full warning</p>
</li>
<li>
<p>97% full critical</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CEGHGBJE"></a>
<div id="UPGRD12439" class="sect2">
<h3 class="sect2"><span class="secnum">4.6.10</span> Migrate From Rollback Segments to Automatic Undo Mode<a id="sthref467"></a><a id="sthref468"></a><a id="sthref469"></a></h3>
<p>If your database is earlier than Oracle Database 11<span class="italic">g</span>, then you must migrate the database that is being upgraded from using rollback segments (manual undo management) to automatic undo management.</p>
<p>Automatic undo management is the default undo space management mode. The <code dir="ltr">UNDO_MANAGEMENT</code> initialization parameter specifies which undo space management mode the system should use, as follows:</p>
<ul>
<li>
<p>If <code dir="ltr">UNDO_MANAGEMENT</code>=<code dir="ltr">AUTO</code> (or if <code dir="ltr">UNDO_MANAGEMENT</code> is not set), then the database instance starts in automatic undo management mode.</p>
<p>A null <code dir="ltr">UNDO_MANAGEMENT</code> initialization parameter defaults to automatic undo management mode in Oracle Database 11<span class="italic">g</span> Release 1 (11.1), but it defaults to manual undo management mode in earlier releases. You must therefore use caution when upgrading 10.2 or 11.1 releases to Oracle Database 12<span class="italic">c</span>.</p>
</li>
<li>
<p>If <code dir="ltr">UNDO_MANAGEMENT</code>=<code dir="ltr">MANUAL</code>, then undo space is allocated externally as rollback segments.</p>
</li>
</ul>
<p>To migrate to automatic undo management, perform the following steps:</p>
<ol>
<li>
<p>Set <code dir="ltr">UNDO_MANAGEMENT=MANUAL</code>.</p>
</li>
<li>
<p>Start the instance again and run through a standard business cycle to obtain a representative workload. Doing this to assess the workload and compute the size of the undo tablespace required for automatic undo management.</p>
</li>
<li>
<p>After the standard business cycle completes, run the following function to collect the undo tablespace size and help with the sizing of the undo tablespace (DBA privileges are required to run this function):</p>
<pre dir="ltr">DECLARE
   utbsiz_in_MB NUMBER;
BEGIN
   utbsiz_in_MB := DBMS_UNDO_ADV.RBU_MIGRATION;
end;
/
</pre>
<p>This function runs a PL/SQL procedure that provides information on how to size your new undo tablespace based on the configuration and usage of the rollback segments in your system. The function returns the sizing information directly.</p>
</li>
<li>
<p>Create an undo tablespace of the required size and turn on the automatic undo management by setting <code dir="ltr">UNDO_MANAGEMENT=AUTO</code> or by removing the parameter.</p>
</li>
<li>
<p>For Oracle RAC configurations, repeat these steps on all instances.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CEGCDBGG"></a>
<div id="UPGRD12440" class="sect2">
<h3 class="sect2"><span class="secnum">4.6.11</span> Configure Oracle Data Guard Broker</h3>
<p>The value of <code dir="ltr">DGConnectIdentifier</code> is used for all Data Guard network traffic, all of the time. If you are upgrading an Oracle Database release 10<span class="italic">g</span> configuration, which requires you to first upgrade to Oracle Database 11<span class="italic">g</span>, the value that exists for <code dir="ltr">InitialConnectIdentifier</code> is retained as the new value for <code dir="ltr">DGConnectIdentifier</code> for the database. When upgrading an Oracle RAC database, the database administrator must ensure that the value for the <code dir="ltr">InitialConnectIdentifier</code> property reaches all instances.</p>
</div>
<!-- class="sect2" -->
<a id="CEGFFJGF"></a>
<div id="UPGRD12441" class="sect2">
<h3 class="sect2"><span class="secnum">4.6.12</span> Migrate Tables from the LONG Data Type to the LOB Data Type</h3>
<p>The <code dir="ltr">LOB</code> data types (<code dir="ltr">BFILE</code>, <code dir="ltr">BLOB</code>, <code dir="ltr">CLOB</code>, and <code dir="ltr">NCLOB</code>) can provide many advantages over <code dir="ltr">LONG</code> data types. You can use the <code dir="ltr">ALTER TABLE</code> statement to change the data type of a <code dir="ltr">LONG</code> column to <code dir="ltr">CLOB</code> and that of a <code dir="ltr">LONG RAW</code> column to <code dir="ltr">BLOB</code>.</p>
<p>In the following example, the <code dir="ltr">LONG</code> column named <code dir="ltr">long_col</code> in table <code dir="ltr">long_tab</code> is changed to data type <code dir="ltr">CLOB</code>:</p>
<pre dir="ltr">SQL&gt; ALTER TABLE Long_tab MODIFY ( long_col CLOB );
</pre>
<p>After using this method to change <code dir="ltr">LONG</code> columns to LOBs, all the existing constraints and triggers on the table are still usable. However, all the indexes, including Domain indexes and Functional indexes, on all columns of the table become unusable and must be rebuilt using an <code dir="ltr">ALTER INDEX...REBUILD</code> statement. Also, the Domain indexes on the <code dir="ltr">LONG</code> column must be dropped before changing the <code dir="ltr">LONG</code> column to a LOB.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADLOB001" href="../ADLOB/adlob_intro.htm#ADLOB001"><span class="italic">Oracle Database SecureFiles and Large Objects Developer&#39;s Guide</span></a> for information about modifying applications to use LOB data</div>
</div>
<!-- class="sect2" -->
<a id="CHDEFHGA"></a>
<div id="UPGRD52810" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.6.13</span> Migrate Your Upgraded Oracle Databases to Use Unified Auditing</h3>
<p>In <a id="sthref470"></a>unified auditing, all Oracle Database audit trails (<code dir="ltr">SYS.AUD$</code> for the database audit trail, <code dir="ltr">SYS.FGA_LOG$</code> for fine-grained auditing, <code dir="ltr">DVYS.AUDIT_TRAIL$</code> for Database Vault, and so on) are combined into one single audit trail, which you can view by querying the <code dir="ltr">UNIFIED_AUDIT_TRAIL</code> data dictionary view for single-instance installations and <code dir="ltr">GV$UNIFIED_AUDIT_TRAIL</code> for Oracle Real Application Clusters environments. If you want to use the full, pure unified auditing facility, then you must manually migrate to it as described in <a href="#CHDFBBAG">&#34;Migrating to Unified Auditing for Oracle Database&#34;</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DBSEG341" href="../DBSEG/audit_changes.htm#DBSEG341"><span class="italic">Oracle Database Security Guide</span></a> for information about how the audit features have changed for this release</div>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDCEIBH">About the Unified Auditing Migration Process for Oracle Database</a></p>
</li>
<li>
<p><a href="#CHDFBBAG">Migrating to Unified Auditing for Oracle Database</a></p>
</li>
<li>
<p><a href="#CHDHHIBB">Managing Earlier Audit Records After You Migrate to Unified Auditing</a></p>
</li>
<li>
<p><a href="#CHDJEEHF">Removing the Unified Auditing Functionality</a></p>
</li>
<li>
<p><a href="#CHDFFFHJ">Documentation References if You Choose Not to Use Unified Auditing</a></p>
</li>
</ul>
<a id="CHDCEIBH"></a>
<div id="UPGRD52811" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.6.13.1</span> About the Unified Auditing Migration Process for Oracle Database</h4>
<p>By <a id="sthref471"></a>default, unified auditing is not enabled for upgraded databases. If you have upgraded from an earlier release to Oracle Database 12<span class="italic">c</span>, then your database uses the same auditing functionality that was used in the earlier release. For newly created databases, the mixed-mode method of unified auditing is enabled by default. After you complete the migration to unified auditing, traditional auditing is disabled and the new audit records write to the unified audit trail.</p>
<p>To enable and configure the audit policies and how they are used, choose one method as follows:</p>
<ul>
<li>
<p>Use the pure unified audit facility.</p>
<p>Follow the procedure described in <a href="#CHDFBBAG">&#34;Migrating to Unified Auditing for Oracle Database&#34;</a> to use the pure unified auditing facility. Once the procedure for migrating to unified auditing is complete, you can create and enable new audit policies and also use the predefined audit policies. The audit records for these policies write to the unified audit trail. The earlier audit trails and their audit records remain, but no new audit records write to the earlier audit trails.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The audit configuration from the earlier release has no effect in the unified audit system. Only unified audit policies generate audit records inside the unified audit trail.</div>
</li>
<li>
<p>Use a mixed-mode audit facility.</p>
<p>The mixed-mode audit facility enables both traditional and unified auditing facilities to run simultaneously and applies to both new and upgraded databases. The mixed-mode unified auditing facility becomes available if you enable at least one of the unified auditing predefined audit policies. Audit records for these policies write to the unified audit trail. The audit configuration in the earlier release of Oracle Database is also available, and the audit records for this configuration write to the earlier audit trails. If you decide that you prefer using the pure unified audit facility, then you can switch to it by following the procedure in <a href="#CHDFBBAG">&#34;Migrating to Unified Auditing for Oracle Database&#34;</a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the database is not writable, then audit records write to new format operating system files in the <code dir="ltr">$ORACLE_BASE/audit/$ORACLE_SID</code> directory.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink DBSEG356" href="../DBSEG/audit_config.htm#DBSEG356"><span class="italic">Oracle Database Security Guide</span></a> for information about the predefined audit policies</p>
</li>
<li>
<p><a class="olink DBSEG703" href="../DBSEG/audit_config.htm#DBSEG703"><span class="italic">Oracle Database Security Guide</span></a> for information about the <code dir="ltr">ora_SecureConfig</code> audit policy</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CHDFBBAG"></a>
<div id="UPGRD52812" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.6.13.2</span> Migrating to Unified Auditing for Oracle Database</h4>
<p>In a <a id="sthref472"></a>multitenant container database (CDB) environment, perform the following procedure in the <code dir="ltr">root</code>. The procedure will migrate both the <code dir="ltr">root</code> and any assoicated PDBs to unified auditing.</p>
<p>To <a id="sthref473"></a>migrate your database to enable unified auditing:</p>
<ol>
<li>
<p>Log in to SQL*Plus as user <code dir="ltr">SYS</code> with the <code dir="ltr">SYSDBA</code> privilege.</p>
<pre dir="ltr">sqlplus sys as sysdba
Enter password: <span class="italic">password</span>
</pre>
<p>In a Pluggable Databases environment, this login connects you to the <code dir="ltr">root</code>.</p>
</li>
<li>
<p>Run the following query to check if your Oracle database has already been migrated to unified auditing:</p>
<pre dir="ltr">SQL&gt; SELECT VALUE FROM V$OPTION WHERE PARAMETER = &#39;Unified Auditing&#39;;
</pre>
<p>If the output is for the <code dir="ltr">VALUE</code> column is <code dir="ltr">TRUE</code>, then unified auditing is already enabled in your database. See <a href="#CHDHHIBB">&#34;Managing Earlier Audit Records After You Migrate to Unified Auditing&#34;</a> for what you should do next. If the output is <code dir="ltr">FALSE</code>, then complete the remaining steps in this procedure.</p>
</li>
<li>
<p>Stop the database. For single-instance environments, enter the following commands from SQL*Plus:</p>
<pre dir="ltr">SQL&gt; SHUTDOWN IMMEDIATE
SQL&gt; EXIT
</pre>
<p>For Windows systems, stop the Oracle service:</p>
<pre dir="ltr">net stop OracleService%ORACLE_SID%
</pre>
<p>For Oracle RAC installations, shut down each database instance as follows:</p>
<pre dir="ltr">srvctl stop database -db <span class="italic">db_name</span>
</pre></li>
<li>
<p>Stop the listener. (Stopping the listener is not necessary for Oracle RAC and Grid Infrastructure listeners.)</p>
<pre dir="ltr">lsnrctl stop <span class="italic">listener_name</span>
</pre>
<p>You can find the name of the listener by running the <code dir="ltr">lsnrctl</code> <code dir="ltr">status</code> command. The name is indicated by the <code dir="ltr">Alias</code> setting.</p>
</li>
<li>
<p>Go to the <code dir="ltr">$</code><code dir="ltr"><span class="codeinlineitalic">ORACLE_HOME</span></code> <code dir="ltr">/rdbms/lib</code> directory.</p>
</li>
<li>
<p>Enable the unified auditing executable as follows:</p>
<ul>
<li>
<p>For UNIX, run the following command:</p>
<pre dir="ltr">make -f ins_rdbms.mk uniaud_on ioracle ORACLE_HOME=$ORACLE_HOME
</pre></li>
<li>
<p>For Windows, rename the <code dir="ltr">%</code><code dir="ltr"><span class="codeinlineitalic">ORACLE_HOME</span></code><code dir="ltr">%</code><code dir="ltr">/bin/orauniaud12.dll.dbl</code> file to <code dir="ltr">%</code><code dir="ltr"><span class="codeinlineitalic">ORACLE_HOME</span></code><code dir="ltr">%</code><code dir="ltr">/bin/orauniaud12.dll</code>.</p>
</li>
</ul>
</li>
<li>
<p>Restart the listener.</p>
<pre dir="ltr">lsnrctl start <span class="italic">listener_name</span>
</pre></li>
<li>
<p>Restart the database. Log in to SQL*Plus and then enter the <code dir="ltr">STARTUP</code> command as follows:</p>
<pre dir="ltr">sqlplus sys as sysoper
Enter password: <span class="italic">password</span>

SQL&gt; STARTUP
</pre>
<p>For Windows systems, start the Oracle service again.</p>
<pre dir="ltr">net start OracleService%ORACLE_SID%
</pre>
<p>For Oracle RAC installations, start each database instance as follows:</p>
<pre dir="ltr">srvctl start database -db <span class="italic">db_name</span>
</pre></li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CHDHHIBB"></a>
<div id="UPGRD52876" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.6.13.3</span> Managing Earlier Audit Records After You Migrate to Unified Auditing</h4>
<p>After <a id="sthref474"></a>you complete the procedure to migrate Oracle Database to use unified auditing, any audit records that your database had before remain in their earlier audit trails. You can archive these audit records and then purge their audit trails. With unified auditing in place, any new audit records write to the unified audit trail.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>&#34;Archiving the Audit Trail&#34; in <a class="olink DBSEG732" href="../DBSEG/audit_admin.htm#DBSEG732"><span class="italic">Oracle Database Security Guide</span></a></p>
</li>
<li>
<p>&#34;Purging Audit Trail Records&#34; in <a class="olink DBSEG90934" href="../DBSEG/audit_admin.htm#DBSEG90934"><span class="italic">Oracle Database Security Guide</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDJEEHF"></a>
<div id="UPGRD52877" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.6.13.4</span> Removing the Unified Auditing Functionality</h4>
<p>If <a id="sthref475"></a>after you have enabled your databases to use unified auditing and you decide that you do not want unified auditing, you can remove the unified auditing functionality. In this case, your database uses the mixed-mode audit facility as described in <a href="#CHDFBBAG">&#34;Migrating to Unified Auditing for Oracle Database&#34;</a>.</p>
<p>To remove unified auditing:</p>
<ol>
<li>
<p>Stop the database.</p>
<pre dir="ltr">sqlplus sys as sysoper
Enter password: <span class="italic">password</span>

SQL&gt; SHUTDOWN IMMEDIATE
SQL&gt; EXIT
</pre>
<p>For Windows systems, stop the Oracle service:</p>
<pre dir="ltr">net stop OracleService%ORACLE_SID%
</pre>
<p>For Oracle RAC installations, shut down each database instance as follows:</p>
<pre dir="ltr">srvctl stop database -db <span class="italic">db_name</span>
</pre></li>
<li>
<p>Go to the <code dir="ltr">$ORACLE_HOME/rdbms/lib</code> directory.</p>
</li>
<li>
<p>Disable the unified auditing executable.</p>
<ul>
<li>
<p><span class="bold">UNIX:</span> Run the following command:</p>
<pre dir="ltr">make -f ins_rdbms.mk uniaud_off ioracle ORACLE_HOME=$ORACLE_HOME
</pre></li>
<li>
<p><span class="bold">Windows:</span> Rename the <code dir="ltr">%ORACLE_HOME%/bin/orauniaud12.dll</code> file to <code dir="ltr">%ORACLE_HOME%/bin/orauniaud12.dll.dbl</code>.</p>
</li>
</ul>
</li>
<li>
<p>Restart the database.</p>
<pre dir="ltr">sqlplus sys as sysoper
Enter password: <span class="italic">password</span>

SQL&gt; STARTUP
SQL&gt; EXIT
</pre>
<p>For Windows systems, start the Oracle service again.</p>
<pre dir="ltr">net start OracleService%ORACLE_SID%
</pre>
<p>For Oracle RAC installations, start each database instance as follows:</p>
<pre dir="ltr">srvctl start database -db <span class="italic">db_name</span>
</pre></li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CHDFFFHJ"></a>
<div id="UPGRD52813" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.6.13.5</span> Documentation References if You Choose Not to Use Unified Auditing</h4>
<p>After <a id="sthref476"></a>upgrading to Oracle Database 12<span class="italic">c</span>, if you choose not to change to unified auditing, then you can find information about traditional non-unified auditing from Oracle documentation and from Oracle Technology Network.</p>
<p>Refer to information about non-unified auditing at the following locations:</p>
<ul>
<li>
<p><span class="italic">Oracle Database Security Guide</span>: This guide is the main source of information for configuring auditing. You must use the Oracle Database Release 11<span class="italic">g</span> version of this manual. To access this guide:</p>
<ol>
<li>
<p>Visit Oracle Technology Network at the following URL:</p>
<p><code dir="ltr"><a href="http://www.oracle.com/technetwork/index.html">http://www.oracle.com/technetwork/index.html</a></code></p>
</li>
<li>
<p>From the Downloads menu, under <span class="bold">Databases</span>, select <span class="bold">Database 11g</span>.</p>
</li>
<li>
<p>In the Downloads page, select the <span class="bold">Documentation</span> tab.</p>
</li>
<li>
<p>From the most recent Oracle Database 11g Release 2 (11.2) Documentation page, select the <span class="bold">View Library</span> link to display the home page of the Release 11<span class="italic">g</span> documentation set.</p>
</li>
<li>
<p>Under the <span class="bold">Search</span> field, select the <span class="bold">Master Book List</span> link.</p>
</li>
<li>
<p>Search for <span class="bold">Security Guide</span>.</p>
</li>
<li>
<p>Select either the <span class="bold">HTML</span> or the <span class="bold">PDF</span> link for this guide.</p>
</li>
</ol>
</li>
<li>
<p><a class="olink SQLRF56110" href="../SQLRF/statements_4008.htm#SQLRF56110"><span class="italic">Oracle Database SQL Language Reference</span></a>: This guide explains how to use the <a class="olink SQLRF01107" href="../SQLRF/statements_4007.htm#SQLRF01107"><code dir="ltr">AUDIT</code></a> and <a class="olink SQLRF01607" href="../SQLRF/statements_9018.htm#SQLRF01607"><code dir="ltr">NOAUDIT</code></a> statements for both unified auditing and non-unified auditing environments.</p>
</li>
<li>
<p><a class="olink REFRN10004" href="../REFRN/GUID-82C7E258-EEF7-48D2-B06B-7F949686E54B.htm#REFRN10004"><span class="italic">Oracle Database Reference</span></a>: This guide explains how to use the initialization parameters and data dictionary views that are associated with a non-unified auditing environment. For a list of these, see <a class="olink DBSEG341" href="../DBSEG/audit_changes.htm#DBSEG341"><span class="italic">Oracle Database Security Guide</span></a>.</p>
</li>
<li>
<p><a class="olink DVADM011" href="../DVADM/audplcy.htm#DVADM011"><span class="italic">Oracle Database Vault Administrator&#39;s Guide</span></a>: This guide explains how to configure auditing in a non-unified auditing environment for Database Vault.</p>
</li>
<li>
<p><a class="olink OLSAG073" href="../OLSAG/audit.htm#OLSAG073"><span class="italic">Oracle Label Security Administrator&#39;s Guide</span></a>: This guide explains how to configure auditing in a non-unified auditing environment for Oracle Label Security.</p>
</li>
</ul>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CEGGFBJI"></a>
<div id="UPGRD52687" class="sect2">
<h3 class="sect2"><span class="secnum">4.6.14</span> Test the Upgraded Production Oracle Database</h3>
<p>If you upgraded a test database to the new Oracle Database release and then tested it, then you can now repeat those tests on the production database that you upgraded to the new Oracle Database 12<span class="italic">c</span> release. Compare the results, noting anomalies. Repeat the test upgrade as many times as necessary.</p>
<p><a id="sthref477"></a>Test the newly upgraded production database with existing applications to verify that they operate properly with a new Oracle database. You also might test enhanced functions by adding available Oracle Database features. However, first ensure that the applications operate in the same manner as they did before the upgrade.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="app.htm#BABHJHEH">Chapter 5, &#34;Upgrading Applications After Upgrading Oracle Database&#34;</a> for more information on using applications with Oracle Database</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGGEECD"></a>
<div id="UPGRD52689" class="sect1">
<h2 class="sect1"><span class="secnum">4.7</span> Recommended Tasks After Upgrading an Oracle RAC Database</h2>
<p>Oracle Real Application Clusters 12<span class="italic">c</span> Release 1 (12.1) uses the Single Client Access Name (SCAN). The SCAN is a single name that resolves to three IP addresses in the public network. When a release of an Oracle RAC database earlier than release 11.2 is upgraded, it is registered with SCAN listeners as remote listeners, and also continues to register with all node listeners. You can configure clients to use SCANs, or continue to use the node listeners. If you migrate all of your client connections to use SCANs, you can then remove the node listeners from the <code dir="ltr">REMOTE_LISTENERS</code> parameter. However, you cannot remove the listeners themselves, because only node listeners can create dedicated servers for the database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD92091" href="../CWADD/GUID-E4A38AA8-0D49-434F-91CB-F99F347BE378.htm#CWADD92091"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information on the Single Client Access Name (SCAN)</div>
</div>
<!-- class="sect1" -->
<a id="CEGBDIHI"></a>
<div id="UPGRD12455" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.8</span> Recommended Tasks After Upgrading Oracle ASM</h2>
<p>After you have upgraded Oracle ASM, Oracle recommends that you perform tasks such as resetting the Oracle ASM passwords and configuring disk groups.</p>
<p>The following tasks are recommended after upgrading Oracle ASM:</p>
<ul>
<li>
<p><a href="#CHDEJJAJ">Create A Shared Password File in the ASM Diskgroup</a></p>
</li>
<li>
<p><a href="#CEGHIIIB">Reset Oracle ASM Passwords to Enforce Case-Sensitivity</a></p>
</li>
<li>
<p><a href="#CEGJDCDD">Advance the Oracle ASM and Oracle Database Disk Group Compatibility</a></p>
</li>
<li>
<p><a href="#CEGICCFA">Set Up Oracle ASM Preferred Read Failure Groups</a></p>
</li>
</ul>
<p>You should also consider performing the following tasks, discussed earlier in this chapter:</p>
<ul>
<li>
<p><a href="#CEGHDJEF">&#34;Add New Features as Appropriate&#34;</a></p>
</li>
<li>
<p><a href="#CEGFIHCI">&#34;Develop New Administrative Procedures as Needed&#34;</a></p>
</li>
</ul>
<a id="CHDEJJAJ"></a>
<div id="UPGRD60141" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.8.1</span> Create A Shared Password File in the ASM Diskgroup</h3>
<p>If you advanced the <code dir="ltr">COMPATIBLE.ASM</code> disk group attribute to 12.1, then you must create a shared password file in the ASM diskgroup. See <a class="olink OSTMG95331" href="../OSTMG/GUID-DB3721CE-B1F4-4FB4-B290-B6D33BEAA5F2.htm#OSTMG95331"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for complete information about managing a shared password file in a disk group.</p>
</div>
<!-- class="sect2" -->
<a id="CEGHIIIB"></a>
<div id="UPGRD12456" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.8.2</span> Reset Oracle ASM Passwords to Enforce Case-Sensitivity</h3>
<p>You can enforce case sensitivity for passwords. For example, the password <code dir="ltr">hPP5620qr</code> fails if it is entered as <code dir="ltr">hpp5620QR</code> or <code dir="ltr">hPp5620Qr</code>.</p>
<p>In releases earlier than Oracle Database 11<span class="italic">g</span> Release 1 (11.1), passwords were not case sensitive. To take advantage of enforced case-sensitive passwords, you must reset the passwords of existing users during the database upgrade procedure. For new Oracle Oracle ASM instances, there are no additional tasks or management requirements. For upgraded Oracle ASM instances, each user password must be reset with an <code dir="ltr">ALTER</code> <code dir="ltr">USER</code> statement.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the default Oracle Database security settings are in place, then passwords must be at least eight characters, and passwords such as <code dir="ltr">welcome</code> and <code dir="ltr">oracle</code> are not allowed. See <a class="olink DBSEG10005" href="../DBSEG/guidelines.htm#DBSEG10005"><span class="italic">Oracle Database Security Guide</span></a> for more information.</div>
</div>
<!-- class="sect2" -->
<a id="CEGJDCDD"></a>
<div id="UPGRD12457" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.8.3</span> Advance the Oracle ASM and Oracle Database Disk Group Compatibility<a id="sthref478"></a><a id="sthref479"></a></h3>
<p>You can advance the Oracle Database and the Oracle ASM disk group compatibility settings across software versions.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
If you advance the <code dir="ltr">COMPATIBLE.RDBMS</code> attribute, then you <span class="italic">cannot</span> revert to the previous setting. Therefore, before advancing the <code dir="ltr">COMPATIBLE.RDBMS</code> attribute, ensure that the values for the <a id="sthref480"></a><a id="sthref481"></a><code dir="ltr">COMPATIBLE</code> initialization parameter for all of the databases that use the disk group are set to at least the new setting for <code dir="ltr">COMPATIBLE.RDBMS</code> before you advance the attribute value.</div>
<p>Advancing compatibility enables new features only available in the new release. However, doing so makes the disk group incompatible with older releases of the software. Advancing the on disk compatibility is an irreversible operation.</p>
<p>You use the <code dir="ltr">compatible.rdbms</code> and <code dir="ltr">compatible.asm</code> attributes to specify the minimum software release required by the database instance and the Oracle ASM instance, respectively, to access the disk group. For example, the following <code dir="ltr">ALTER DISKGROUP</code> statement advances the Oracle ASM compatibility of the disk group <code dir="ltr">asmdg2</code>:</p>
<pre dir="ltr">ALTER DISKGROUP asmdg2 SET ATTRIBUTE &#39;compatible.asm&#39; = &#39;11.2&#39;
</pre>
<p>In this case, the disk group can be managed only by Oracle ASM software of release 11.2 or later, while any database client of release 10.2 or later can use the disk group.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink OSTMG10045" href="../OSTMG/GUID-AE540604-92D9-4CFE-A40E-BF4486163772.htm#OSTMG10045"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for complete information about disk group compatibility, and <a class="olink SQLRF01113" href="../SQLRF/statements_1009.htm#SQLRF01113"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the disk group compatibility attributes on the <code dir="ltr">ALTER DISKGROUP</code> and <code dir="ltr">CREATE DISKGROUP</code> statements</div>
</div>
<!-- class="sect2" -->
<a id="CEGICCFA"></a>
<div id="UPGRD12458" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.8.4</span> Set Up Oracle ASM Preferred Read Failure Groups<a id="sthref482"></a><a id="sthref483"></a><a id="sthref484"></a><a id="sthref485"></a><a id="sthref486"></a></h3>
<p>Oracle ASM administrators can specify some disks to be preferred over others for read i/o operations. When Oracle ASM preferred read failure groups are defined, Oracle ASM can read from the extent that is closest to it, rather than always reading the primary copy.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CWADD" href="../CWADD/toc.htm"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about specifying failure groups settings in an extended cluster</p>
</li>
<li>
<p><a class="olink OSTMG" href="../OSTMG/toc.htm"><span class="italic">Oracle Automatic Storage Management Administrator&#39;s Guide</span></a> for complete information about Oracle ASM preferred read failure groups, and specifying the new <code dir="ltr">ASM_PREFERRED_READ_FAILURE_GROUP<a id="sthref487"></a><a id="sthref488"></a>S</code> initialization parameter to list failure group names that contain the preferred read disks for each node in a cluster</p>
</li>
<li>
<p><a class="olink REFRN10279" href="../REFRN/GUID-184C54A6-24CC-4A19-AA81-35AA76FF22A1.htm#REFRN10279"><span class="italic">Oracle Database Reference</span></a> for the <code dir="ltr">ASM_PREFERRED_READ_FAILURE_GROUPS</code> initialization parameter</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGEJIJG"></a>
<div id="UPGRD52688" class="sect1">
<h2 class="sect1"><span class="secnum">4.9</span> Recommended Tasks After Upgrading Oracle Database Express Edition</h2>
<p>An <a id="sthref489"></a>Oracle Database Express database contains only a subset of the components available in an Oracle Database Standard Edition or Oracle Database Enterprise Edition database. After upgrading to the new Oracle Database release, you can use the Database Configuration Assistant (DBCA) to install additional components into your database.</p>
</div>
<!-- class="sect1" -->
<a id="CHDIJCFE"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.10</span> Optionally Update Oracle Application Express Packaged Applications</h2>
<p>If your database originally included Oracle Application Express version 4.2 or up to version 4.2.5.00.08, then the 4.2.5 patch set was applied. However, the packaged applications that are shipped with Oracle Application Express were not updated to the 4.2.5 versions when the patch set was applied. You will need to run a script to update the packaged applications. If Oracle Application Express is installed in a non-CDB or is installed locally in a PDB, follow the instructions provided here.</p>
<p>To update the packaged applications in a non-CDB:</p>
<ol>
<li>
<p>Set your current directory to the top-level &#34;apex&#34; directory in the Oracle home.</p>
</li>
<li>
<p>Start SQL*Plus and connect to the database where Oracle Application Express is installed as SYS specifying the SYSDBA role.</p>
<p>On Windows:</p>
<pre dir="ltr">C:\ sqlplus /nolog
SQL&gt; CONNECT SYS as SYSDBA
     Enter password: <span class="codeinlineitalic">SYS_password</span>
</pre>
<p>On Linux:</p>
<pre dir="ltr">$ sqlplus /nolog
SQL&gt; CONNECT SYS as SYSDBA
     Enter password: <span class="codeinlineitalic">SYS_password</span>
</pre></li>
<li>
<p>Run <code dir="ltr">apex_pkgapp_ins.sql</code> as shown in the following example:</p>
<pre dir="ltr">@apex_pkgapp_ins.sql
</pre></li>
</ol>
<p>To update the packaged applications in a CDB:</p>
<ol>
<li>
<p>Set your current directory to the top-level &#34;apex&#34; directory in the Oracle home.</p>
</li>
<li>
<p>Start SQL*Plus and connect to the database where Oracle Application Express is installed as SYS specifying the SYSDBA role.</p>
<p>On Windows:</p>
<pre dir="ltr">C:\ sqlplus /nolog
SQL&gt; CONNECT SYS as SYSDBA
     Enter password: <span class="codeinlineitalic">SYS_password</span>
</pre>
<p>On Linux:</p>
<pre dir="ltr">$ sqlplus /nolog
SQL&gt; CONNECT SYS as SYSDBA
     Enter password: <span class="codeinlineitalic">SYS_password</span>
</pre></li>
<li>
<p>Run <code dir="ltr">apex_pkgapp_con.sql</code> as shown in the following example:</p>
<pre dir="ltr">@apex_pkgapp_con.sql
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CEGGHCAD"></a>
<div id="UPGRD12446" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.11</span> Tasks to Complete Only After Manually Upgrading Oracle Database</h2>
<p>If you are performing a manual upgrade of Oracle Database rather than using DBUA, then you must perform required tasks after your database is upgraded.</p>
<ul>
<li>
<p><a href="#CEGBFEID">Change Passwords for Oracle Supplied Accounts</a></p>
</li>
<li>
<p><a href="#CEGGIHGE">Create or Migrate Your Password File with ORAPWD</a></p>
</li>
<li>
<p><a href="#CEGGJJBD">Migrate Your Initialization Parameter File to a Server Parameter File</a></p>
</li>
<li>
<p><a href="#CEGJAFJJ">Upgrade Oracle Text</a></p>
</li>
<li>
<p><a href="#CEGEJHEI">Upgrade the Oracle Clusterware Configuration</a></p>
</li>
<li>
<p><a href="#CEGCIDAF">Adjust the Initialization Parameter File for the New Release</a></p>
</li>
<li>
<p><a href="#CEGCFJJC">Set CLUSTER_DATABASE Initialization Parameter For Oracle RAC</a></p>
</li>
</ul>
<a id="CEGBFEID"></a>
<div id="UPGRD12447" class="sect2">
<h3 class="sect2"><span class="secnum">4.11.1</span> Change Passwords for Oracle Supplied Accounts<a id="sthref490"></a><a id="sthref491"></a></h3>
<p>Depending on the release from which you upgraded, there might be new Oracle supplied accounts. Oracle recommends that you lock all Oracle supplied accounts except for <code dir="ltr">SYS</code> and <code dir="ltr">SYSTEM</code>, and expire their passwords, thus requiring new passwords to be specified when the accounts are unlocked.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the default Oracle Database 12<span class="italic">c</span> security settings are in place, then passwords must be at least eight characters, and passwords such as <code dir="ltr">welcome</code> and <code dir="ltr">oracle</code> are not allowed. See <a class="olink DBSEG10005" href="../DBSEG/guidelines.htm#DBSEG10005"><span class="italic">Oracle Database Security Guide</span></a> for more information.</div>
<p>You can view the status of all accounts by issuing the following SQL statement:</p>
<pre dir="ltr">SQL&gt; SELECT username, account_status
         FROM dba_users
         ORDER BY username;
</pre>
<p>To lock and expire passwords, issue the following SQL statement:</p>
<pre dir="ltr">SQL&gt; ALTER USER <span class="italic">username</span> PASSWORD EXPIRE ACCOUNT LOCK;
</pre></div>
<!-- class="sect2" -->
<a id="CEGGIHGE"></a>
<div id="UPGRD52690" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.11.2</span> Create or Migrate Your Password File with ORAPWD</h3>
<p>If the <code dir="ltr">REMOTE_LOGIN_PASSWORDFILE</code> initialization parameter is set to either <code dir="ltr">exclusive</code> or <code dir="ltr">shared</code>, create or migrate the password file with <code dir="ltr">ORAPWD</code>. Oracle Database 12<span class="italic">c</span> provides a new option to <code dir="ltr">ORAPWD</code> for migrating the password file from your existing database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN11059" href="../ADMIN/dba.htm#ADMIN11059"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information about creating or migrating password files</div>
</div>
<!-- class="sect2" -->
<a id="CEGGJJBD"></a>
<div id="UPGRD12448" class="sect2">
<h3 class="sect2"><span class="secnum">4.11.3</span> Migrate Your Initialization Parameter File to a Server Parameter File<a id="sthref492"></a></h3>
<p>If you are currently using a traditional initialization parameter file, then perform the following steps to migrate to a server parameter file:</p>
<ol>
<li>
<p>If the initialization parameter file is located on a client computer, then transfer the file from the client computer to the server computer.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are using Oracle RAC, then you must combine all of your instance-specific initialization parameter files into a single initialization parameter file. Instructions and other actions unique to using a server parameter file for cluster databases, are discussed in:
<ul>
<li>
<p><a class="olink RACAD" href="../RACAD/toc.htm"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a></p>
</li>
<li>
<p>The <a class="olink RIGEN" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=RIGEN"><span class="italic">Oracle Real Application Clusters Installation Guide</span></a> for your operating system</p>
</li>
</ul>
</div>
</li>
<li>
<p>Create a server parameter file using the <code dir="ltr">CREATE SPFILE</code> statement. This statement reads the initialization parameter file to create a server parameter file. You are not required to start the database to issue a <code dir="ltr">CREATE SPFILE</code> statement.</p>
</li>
<li>
<p>Start up the instance using the newly-created server parameter file.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN00202" href="../ADMIN/create.htm#ADMIN00202"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information about creating server parameter files</p>
</li>
<li>
<p><a class="olink SQLRF01315" href="../SQLRF/statements_6018.htm#SQLRF01315"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code dir="ltr">CREATE SPFILE</code> statement</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CEGJAFJJ"></a>
<div id="UPGRD12449" class="sect2">
<h3 class="sect2"><span class="secnum">4.11.4</span> Upgrade Oracle Text</h3>
<p>After an upgrade to the new Oracle Database 12<span class="italic">c</span> release, copy the following files from the previous Oracle home to the new Oracle home:</p>
<ul>
<li>
<p>Stemming user-dictionary files</p>
</li>
<li>
<p>User-modified <code dir="ltr">KOREAN_MORPH_LEXER</code> dictionary files</p>
</li>
<li>
<p><code dir="ltr">USER_FILTER</code> executables</p>
</li>
</ul>
<p>These files affect all databases installed in the given Oracle home.</p>
<p>You can obtain a list of these files as follows:</p>
<ol>
<li>
<p>Read the text file at <code dir="ltr">$ORACLE_HOME/ctx/admin/ctxf102.txt</code>.</p>
</li>
<li>
<p>Run <code dir="ltr">$ORACLE_HOME/ctx/admin/ctxf102.sql</code> as database user <code dir="ltr">SYS</code>, <code dir="ltr">SYSTEM</code>, or <code dir="ltr">CTXSYS</code>.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CCREF1901" href="../CCREF/cdatadic.htm#CCREF1901"><span class="italic">Oracle Text Reference</span></a> for more information about these files</p>
</li>
<li>
<p><a class="olink CCAPP2001" href="../CCAPP/GUID-2D2548BE-879D-4B44-BF01-AC62CACA4782.htm#CCAPP2001"><span class="italic">Oracle Text Application Developer&#39;s Guide</span></a> for information about upgrading your applications from previous releases of Oracle Text</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CEGEJHEI"></a>
<div id="UPGRD12450" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.11.5</span> Upgrade the <a id="sthref493"></a><a id="sthref494"></a>Oracle Clusterware Configuration</h3>
<p>If you are using Oracle Clusterware, then you must upgrade the Oracle Clusterware keys for the database.</p>
<p>Run <code dir="ltr">srvctl</code> for Oracle Database 12<span class="italic">c</span> to upgrade the database. For example:</p>
<pre dir="ltr"><span class="italic">ORACLE_HOME</span>/bin/srvctl upgrade database -db <span class="italic">name</span> -o <span class="italic">ORACLE_HOME</span>
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RACAD8296" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=RACAD8296"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for the syntax for <code dir="ltr">srvctl upgrade database</code></div>
</div>
<!-- class="sect2" -->
<a id="CEGCIDAF"></a>
<div id="UPGRD12451" class="sect2">
<h3 class="sect2"><span class="secnum">4.11.6</span> Adjust the Initialization Parameter File for the New Release<a id="sthref495"></a></h3>
<p>Each release of Oracle Database introduces new initialization parameters, deprecates some initialization parameters, and desupports some initialization parameters. You must adjust the parameter file to account for these changes and to take advantage of new initialization parameters that might be beneficial to your system. Additionally, when you perform a manual upgrade without using DBUA, the <code dir="ltr">tnsnames.ora</code> file is not automatically populated with new configuration information and settings. Therefore, you must manually update <code dir="ltr">tnsnames.ora</code> and adjust <code dir="ltr">local_listener</code> and <code dir="ltr">remote_listener</code> parameter references if these must be resolved.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>The &#34;What&#39;s New in Oracle Database Reference&#34; section of <a class="olink REFRN" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a> for a list of the new initialization parameters in Oracle Database 12<span class="italic">c</span>, and for information about each parameter</p>
</li>
<li>
<p><a href="deprecated.htm#BABBIBFB">Chapter 8, &#34;Deprecated and Desupported Features for Oracle Database 12<span class="italic">c</span>&#34;</a> for desupported and deprecated initialization parameters in Oracle Database 12<span class="italic">c</span></p>
</li>
<li>
<p><a href="changes.htm#BABHACIE">Appendix A, &#34;Changes for Earlier Releases of Oracle Database&#34;</a></p>
</li>
</ul>
</div>
<a id="CHDFIFFC"></a>
<div id="UPGRD12479" class="sect3">
<h4 class="sect3"><span class="secnum">4.11.6.1</span> Setting the COMPATIBLE Initialization Parameter<a id="sthref496"></a></h4>
<p>The <code dir="ltr">COMPATIBLE</code> initialization parameter controls the compatibility level of your database. When you are certain that you no longer need the ability to downgrade your database to its original release, set the <code dir="ltr">COMPATIBLE</code> initialization parameter based on the compatibility level you want for your new database.</p>
<p>Complete the following steps to set the <code dir="ltr">COMPATIBLE</code> initialization parameter to a higher value:</p>
<ol>
<li>
<p>Perform a backup of your database before you raise the <code dir="ltr">COMPATIBLE</code> initialization parameter (optional).</p>
<p>Raising the <code dir="ltr">COMPATIBLE</code> initialization parameter might cause your database to become incompatible with earlier releases of Oracle Database, and a backup ensures that you can return to the earlier release if necessary.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV" href="../BRADV/toc.htm"><span class="italic">Oracle Database Backup and Recovery User&#39;s Guide</span></a> for more information about performing a backup</div>
</li>
<li>
<p>If you are using a server parameter file, then complete the following steps:</p>
<ol>
<li>
<p>Update the server parameter file to set or change the value of the <code dir="ltr">COMPATIBLE</code> initialization parameter.</p>
<p>For example, to set the <code dir="ltr">COMPATIBLE</code> initialization parameter to <code dir="ltr">11.0.0</code>, enter the following statement:</p>
<pre dir="ltr">SQL&gt; ALTER SYSTEM SET COMPATIBLE = &#39;11.0.0&#39; SCOPE=SPFILE;
</pre></li>
<li>
<p>Shut down and restart the instance.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
When upgrading systems with <a id="sthref497"></a><a id="sthref498"></a>HARD-compliant storage (Hardware Assisted Resilient Data), consider the following:
<ul>
<li>
<p>If the <code dir="ltr">COMPATIBLE</code> parameter is set to a release number earlier than 11.0.0, then you cannot locate the server parameter file (<code dir="ltr">SPFILE</code>) on HARD storage.</p>
</li>
<li>
<p>If the <code dir="ltr">COMPATIBLE</code> parameter is set to 11.0.0, then you can optionally locate the server parameter file on HARD storage.</p>
</li>
</ul>
<p>Because the default <code dir="ltr">SPFILE</code> location (<span class="italic">ORACLE_HOME</span>/dbs) might not be on a HARD-compliant storage system, it is likely you must provide a parameter file that specifies the location of the <code dir="ltr">SPFILE</code>.</p>
</div>
</li>
<li>
<p>If you are using an initialization parameter file, then complete the following steps:</p>
<ol>
<li>
<p>Shut down the instance if it is running:</p>
<pre dir="ltr">SQL&gt; SHUTDOWN IMMEDIATE
</pre></li>
<li>
<p>Edit the initialization parameter file to set or change the value of the <code dir="ltr">COMPATIBLE</code> initialization parameter.</p>
<p>For example, to set the <code dir="ltr">COMPATIBLE</code> initialization parameter to <code dir="ltr">for Oracle Database release 12.1</code>, enter the following in the initialization parameter file:</p>
<pre dir="ltr">COMPATIBLE = 12.1.0
</pre></li>
<li>
<p>Start the instance using <code dir="ltr">STARTUP</code>.</p>
</li>
</ol>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are using an ASM disk group, then the disk group&#39;s compatibility attribute must match or be lower than that of the database compatibility parameter in <code dir="ltr">init.ora</code>.</div>
</div>
<!-- class="sect3" -->
<div id="UPGRD52745" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref499"></a>
<h4 class="sect3"><span class="secnum">4.11.6.2</span> Configuring tnsnames.ora and Listener Parameters</h4>
<p>After performing a manual upgrade, you must adjust <code dir="ltr">local_listener</code> and <code dir="ltr">remote_listener</code> parameter references if they must be resolved in <code dir="ltr">tnsnames.ora</code>. DBUA handles changes to network naming and listeners during automatic upgrades, but during a manual upgrade, <code dir="ltr">tnsnames.ora</code> is not changed, nor are the listeners.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>Local Naming Parameters (tnsnames.ora) in <a class="olink NETRF007" href="../NETRF/tnsnames.htm#NETRF007"><span class="italic">Oracle Database Net Services Reference</span></a></p>
</li>
<li>
<p>&#34;Configuring the tnsnames.ora File After Installation&#34; in <a class="olink NETAG259" href="../NETAG/naming.htm#NETAG259"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a></p>
</li>
<li>
<p>&#34;Configuring and Administering Oracle Net Listener&#34; in <a class="olink NETAG010" href="../NETAG/listenercfg.htm#NETAG010"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span> for information on registering information with a local listener and a remote listener</a></p>
</li>
<li>
<p>&#34;Net Service Names (tnsnames.ora File)&#34; in <a class="olink RIWIN" href="../RIWIN/toc.htm"><span class="italic">Oracle Real Application Clusters Installation Guide for Microsoft Windows x64 (64-Bit)</span></a> for Windows</p>
</li>
<li>
<p>&#34;Net Service Names (tnsnames.ora File)&#34; in <a class="olink RILIN610" href="../RILIN/undrstnd.htm#RILIN610"><span class="italic">Oracle Real Application Clusters Installation Guide for Linux and UNIX</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CEGCFJJC"></a>
<div id="UPGRD12453" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.11.7</span> Set CLUSTER_DATABASE Initialization Parameter For Oracle RAC</h3>
<p>For upgrades of Oracle RAC databases, in <a href="preup.htm#BABGBFCJ">&#34;Preparing the New Oracle Home for Upgrading&#34;</a> you were instructed to set the <code dir="ltr">CLUSTER_DATABASE</code> initialization parameter to <code dir="ltr">false</code> before upgrading a cluster database. Now that the upgrade is finished, you must set this parameter to <code dir="ltr">true</code>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1827">
<tr>
<td class="cellalignment1834">
<table class="cellalignment1832">
<tr>
<td class="cellalignment1831"><a href="upgrade.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1831"><a href="app.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1836">
<table class="cellalignment1830">
<tr>
<td class="cellalignment1831"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1831"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1831"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1831"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1831"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1831"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>