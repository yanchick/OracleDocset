<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-5249"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Configuring%20Kerberos%20Authentication"></a><title>Configuring Kerberos Authentication</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="Kerberos is a trusted third-party authentication system. It relies on shared secrets and presumes that the third party is secure. You can configure Oracle Database to use Kerberos authentication."/>
<meta name="keywords" content="Kerberos, configuring authentication, configuring for database server, kservice (Kerberos), kservice, kinstance (Kerberos), kinstance, realm (Kerberos), realm, configuring, Kerberos authentication service parameters, SQLNET.AUTHENTICATION_SERVICES parameter, sqlnet.ora file, SQLNET.AUTHENTICATION_KERBEROS5_SERVICE parameter, SQLNET.KERBEROS5_CC_NAME parameter, SQLNET.KERBEROS5_CLOCKSKEW parameter, SQLNET.KERBEROS5_CONF parameter, SQLNET.KERBEROS5_REALMS parameter, authentication adapter utilities, okinit, Kerberos adapter utility, oklist, okdstry, okcreate, connecting to database, configuring for Windows 2008 Domain Controller KDC, Microsoft Windows, Kerberos Key Distribution Center (KDC), authentication fallback behavior, fallback authentication, Kerberos, troubleshooting"/>
<meta name="dcterms.created" content="2017-06-05T11:20:26Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Security Guide"/>
<meta name="dcterms.identifier" content="E48135-19"/>
<meta name="dcterms.isVersionOf" content="DBSEG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="asotools.htm" title="Previous" type="text/html"/>
<link rel="Next" href="asossl.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48135-19.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-DF84261F-457A-4B9F-AE41-CDE6FE9178C4"></a> <span id="PAGE" style="display:none;">27/44</span> <!-- End Header -->
<a id="DBSEG060"></a>
<h1 id="DBSEG-GUID-DF84261F-457A-4B9F-AE41-CDE6FE9178C4" class="sect1"><span class="enumeration_chapter">17</span> Configuring Kerberos Authentication</h1>
<div>
<p>Kerberos is a trusted third-party authentication system. It relies on shared secrets and presumes that the third party is secure. You can configure Oracle Database to use Kerberos authentication.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="asokerb.htm#GUID-FF6CC3B0-9FA3-4845-AF58-9C6C60DA9BD5" title="To enable Kerberos authentication for Oracle Database, you must first install it, and then follow a set of configuration steps.">Enabling Kerberos Authentication</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-B861CD2F-EA97-4A90-8A77-3BB8F4BD1EDC" title="The Oracle Kerberos authentication adapter utilities are designed for an Oracle client with Oracle Kerberos authentication support installed.">Utilities for the Kerberos Authentication Adapter</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-9C4553E5-59ED-418E-B2B5-13E2E55B5E65" title="After Kerberos is configured, you can connect to an Oracle database server without using a user name or password.">Connecting to an Oracle Database Server Authenticated by Kerberos</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-178E9041-7A3D-4CE6-B137-513A4EB6D625" title="Oracle Database, which complies with MIT Kerberos, can interoperate with tickets that are issued by a Kerberos Key Distribution Center (KDC) on a Windows 2008 domain controller to enable Kerberos authentication with an Oracle database.">Configuring Interoperability with a Windows 2008 Domain Controller KDC</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-2AB588F3-700F-4409-BD3D-AD40D330701E" title="You can configure fallback behavior (password-based authentication) in case the Kerberos authentication fails.">Configuring Kerberos Authentication Fallback Behavior</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-B3EEC35D-7E10-48EA-9341-09DBE57A1C6D" title="Oracle provides guidance for common Kerberos configuration problems.">Troubleshooting the Oracle Kerberos Authentication Configuration</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-DF84261F-457A-4B9F-AE41-CDE6FE9178C4__GUID-D9114CC6-7F39-41DA-A444-B6C63ADDBA53">
<p class="notep1">See Also:</p>
<a class="olink DBIMI200" target="_blank" href="../DBIMI/appa.htm#DBIMI200"><span class="italic">Oracle Database Enterprise User Security Administrator&#39;s Guide</span></a> for information on migrating Kerberos users to Kerberos-authenticated enterprise users</div>
</div>
<a id="DBSEG9635"></a>
<div class="props_rev_3"><a id="GUID-FF6CC3B0-9FA3-4845-AF58-9C6C60DA9BD5"></a>
<h2 id="DBSEG-GUID-FF6CC3B0-9FA3-4845-AF58-9C6C60DA9BD5" class="sect2">Enabling Kerberos Authentication</h2>
<div>
<p>To enable Kerberos authentication for Oracle Database, you must first install it, and then follow a set of configuration steps.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="asokerb.htm#GUID-39A6604D-35DD-40E5-A71E-079EE7C9DF15" title="You should install Kerberos Version 5.">Step 1: Install Kerberos</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-E61C3203-142E-48AE-B2A0-355552AEC913" title="You must create a service principal for Oracle Database before the server can validate the identity of clients that authenticate themselves using Kerberos.">Step 2: Configure a Service Principal for an Oracle Database Server</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-914FE001-68BC-4E81-937F-FB46FE953F14" title="Next, you are ready to extract the service key table from Kerberos and copy it to the Oracle database server/Kerberos client system.">Step 3: Extract a Service Key Table from Kerberos</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-590FD262-F4A8-4C03-BD58-D298E0A7B8CD" title="After you extract a service key table from Kerberos, you are ready to install the Oracle Database server and an Oracle client.">Step 4: Install an Oracle Database Server and an Oracle Client</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-DDB21112-7337-4946-960E-F0808CC7F107" title="After you install the Oracle Database server and client, you can configure Oracle Net Services on the server and client.">Step 5: Configure Oracle Net Services and Oracle Database</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-D3C9F2F7-3A15-40A9-976C-864649C09ED9" title="You must set the required parameters in the Oracle database server and client sqlnet.ora files.">Step 6: Configure Kerberos Authentication</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-17ED0290-B25B-4BA0-8DF2-0592973D0791" title="You must create the Kerberos user on the Kerberos authentication server where the administration tools are installed.">Step 7: Create a Kerberos User</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-776C9160-A366-4E55-8C9F-4DB5DDF2C4E8" title="Next, you are ready to create an externally authenticated Oracle user.">Step 8: Create an Externally Authenticated Oracle User</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-A3778E94-702B-44F8-B9D4-E8CFB61A0009" title="Before you can connect to the database, you must ask the Key Distribution Center (KDC) for an initial ticket.">Step 9: Get an Initial Ticket for the Kerberos/Oracle User</a></p>
</li>
</ul>
</div>
<a id="DBSEG9636"></a>
<div class="props_rev_3"><a id="GUID-39A6604D-35DD-40E5-A71E-079EE7C9DF15"></a>
<h3 id="DBSEG-GUID-39A6604D-35DD-40E5-A71E-079EE7C9DF15" class="sect3">Step 1: Install Kerberos</h3>
<div>
<p>You should install Kerberos Version 5.</p>
<div class="section">
<p>The source distribution for notes about building and installing Kerberos provide details. After you install Kerberos, if you are using IBM AIX on POWER systems (64-bit), you should ensure that Kerboros 5 is the preferred authentication method.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Install Kerberos on the system that functions as the authentication server.</span>
<div>
<div class="infobox-note" id="GUID-39A6604D-35DD-40E5-A71E-079EE7C9DF15__GUID-BF230D35-7680-49D7-BF70-D8196A151792">
<p class="notep1">Note:</p>
<p>After upgrading from a 32-bit version of Oracle Database, the first use of the Kerberos authentication adapter causes an error message: <code class="codeph">ORA-01637: Packet receive failed</code>.</p>
<p><span class="bold">Workaround:</span> After upgrading to the 64-bit version of the database and before using Kerberos external authentication method, check for a file named <code class="codeph">/usr/tmp/oracle_service_name.RC</code> on your computer, and remove it.</p>
</div>
</div>
</li>
<li class="stepexpand"><span>For IBM AIX on POWER systems (64-bit), check the authentication method.</span>
<div>
<p>For example:</p>
<pre dir="ltr">/usr/bin/lsauthent
</pre>
<p>Output similar to the following may appear:</p>
<pre dir="ltr">Standard Aix
</pre></div>
</li>
<li class="stepexpand"><span>Configure Kerberos 5 as the preferred method.</span>
<div>
<p>For example:</p>
<pre dir="ltr">/usr/bin/chauthent -k5 -std
</pre>
<p>This command sets Kerberos 5 as the preferred authentication method (<code class="codeph">k5</code>) and Standard AIX as the second (<code class="codeph">std</code>).</p>
</div>
</li>
<li class="stepexpand"><span>To ensure that Kerberos 5 is now the preferred method, check the new configuration.</span>
<div>
<pre dir="ltr">/usr/bin/lsauthent

Kerberos 5
Standard Aix
</pre></div>
</li>
</ol>
</div>
</div>
<a id="DBSEG9637"></a>
<div class="props_rev_3"><a id="GUID-E61C3203-142E-48AE-B2A0-355552AEC913"></a>
<h3 id="DBSEG-GUID-E61C3203-142E-48AE-B2A0-355552AEC913" class="sect3">Step 2: Configure a Service Principal for an Oracle Database Server</h3>
<div>
<p>You must create a service principal for Oracle Database before the server can validate the identity of clients that authenticate themselves using Kerberos.</p>
<ol>
<li class="stepexpand"><span>Decide on a name for the service principal, using the following format:</span>
<div>
<pre dir="ltr">kservice/kinstance@REALM
</pre>
<p>Each of the fields in the service principal specify the following values:</p>
<div class="tblformal" id="GUID-E61C3203-142E-48AE-B2A0-355552AEC913__GUID-023FEA3B-58ED-4E9E-9D48-FA96C4666E89">
<table class="cellalignment3782" summary="This table lists and describes each field in the Kerberos service principal.">
<thead>
<tr class="cellalignment3671">
<th class="cellalignment3783" id="d101790e477">Service Principal Field</th>
<th class="cellalignment3784" id="d101790e480">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3671">
<td class="cellalignment3785" id="d101790e485" headers="d101790e477">
<p><code class="codeph">kservice</code></p>
</td>
<td class="cellalignment3786" headers="d101790e485 d101790e480">
<p>A case-sensitive string that represents the Oracle service. This can be the same as the database service name.</p>
</td>
</tr>
<tr class="cellalignment3671">
<td class="cellalignment3785" id="d101790e493" headers="d101790e477">
<p><code class="codeph">kinstance</code></p>
</td>
<td class="cellalignment3786" headers="d101790e493 d101790e480">
<p>Typically the fully qualified DNS name of the system on which Oracle Database is running.</p>
</td>
</tr>
<tr class="cellalignment3671">
<td class="cellalignment3785" id="d101790e501" headers="d101790e477">
<p><code class="codeph">REALM</code></p>
</td>
<td class="cellalignment3786" headers="d101790e501 d101790e480">
<p>The name of the Kerberos realm with which the service principal is registered. <code class="codeph">REALM</code> must always be uppercase and is typically the DNS domain name.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>The utility names in this section are executable programs. However, the Kerberos user name <code class="codeph">krbuser</code> and the realm <code class="codeph">EXAMPLE.COM</code> are examples only.</p>
<p>For example, suppose <code class="codeph">kservice</code> is <code class="codeph">oracle</code>, the fully qualified name of the system on which Oracle Database is running is <code class="codeph">dbserver.example.com</code> and the realm is <code class="codeph">EXAMPLE.COM</code>. The principal name then is:</p>
<pre dir="ltr">oracle/dbserver.example.com@EXAMPLE.COM
</pre></div>
</li>
<li class="stepexpand"><span>Run <code class="codeph">kadmin.local</code> to create the service principal. On UNIX, run this command as the root user, by using the following syntax:</span>
<div>
<pre dir="ltr"># cd /kerberos-install-directory/sbin
# ./kadmin.local
</pre>
<p>For example, to add a <a href="glossary.htm#GUID-D596BFD5-3A0F-45F6-B5CD-DEAF8B7A7FCA"><span class="xrefglossterm">principal</span></a> named <code class="codeph">oracle/dbserver.example.com@EXAMPLE.COM</code> to the list of server principals known by Kerberos, you can enter the following:</p>
<pre dir="ltr">kadmin.local:<span class="bold">addprinc -randkey oracle/dbserver.example.com@EXAMPLE.COM</span>
</pre></div>
</li>
</ol>
</div>
</div>
<a id="DBSEG9638"></a>
<div class="props_rev_3"><a id="GUID-914FE001-68BC-4E81-937F-FB46FE953F14"></a>
<h3 id="DBSEG-GUID-914FE001-68BC-4E81-937F-FB46FE953F14" class="sect3">Step 3: Extract a Service Key Table from Kerberos</h3>
<div>
<p>Next, you are ready to extract the service key table from Kerberos and copy it to the Oracle database server/Kerberos client system.</p>
<div class="section">
<p>For example, to extract a service key table for <code class="codeph">dbserver.example.com</code>:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Enter the following to extract the <a href="glossary.htm#GUID-82F9B5A1-F8D5-4A2A-A49B-1F6DB250D5FC"><span class="xrefglossterm">service key table</span></a>:</span>
<div>
<pre dir="ltr">kadmin.local:  <span class="bold">ktadd -k /tmp/keytab oracle/dbserver.example.com</span>
Entry for principal oracle/dbserver.example.com with kvno 2, 
encryption type AES-256 CTS mode with 96-bit SHA-1 HMAC added to keytab WRFILE:
WRFILE:/tmp/keytab

kadmin.local:  <span class="bold">exit</span>
</pre></div>
</li>
<li class="stepexpand"><span>To check the service key table, enter the following command:</span>
<div>
<pre dir="ltr">oklist -k -t /tmp/keytab
</pre></div>
</li>
<li class="stepexpand"><span>After the service key table has been extracted, verify that the new entries are in the table in addition to the old ones.</span>
<div>
<p>If they are not, or you need to add more, use <code class="codeph">kadmin.local</code> to append to them.</p>
<p>If you do not enter a realm when using <code class="codeph">ktadd</code>, it uses the default realm of the Kerberos server. <code class="codeph">kadmin.local</code> is connected to the Kerberos server running on the <code class="codeph">localhost</code>.</p>
</div>
</li>
<li class="stepexpand"><span>If the Kerberos service key table is on the same system as the Kerberos client, you can move it. If the service key table is on a different system from the Kerberos client, you must transfer the file with a program such as FTP. If using FTP, transfer the file in binary mode.</span>
<div>
<p>The following example shows how to move the service key table on a UNIX platform:</p>
<pre dir="ltr"># mv /tmp/keytab /etc/v5srvtab
</pre>
<p>The default name of the service file is <code class="codeph">/etc/v5srvtab</code>.</p>
</div>
</li>
<li class="stepexpand"><span>Verify that the owner of the Oracle database server executable can read the service key table (<code class="codeph">/etc/v5srvtab</code> in the previous example).</span>
<div>
<p>To do so, set the file owner to the Oracle user, or make the file readable by the group to which Oracle belongs.</p>
<p>Do not make the file readable to all users. This can cause a security breach.</p>
</div>
</li>
</ol>
</div>
</div>
<a id="DBSEG9639"></a>
<div class="props_rev_3"><a id="GUID-590FD262-F4A8-4C03-BD58-D298E0A7B8CD"></a>
<h3 id="DBSEG-GUID-590FD262-F4A8-4C03-BD58-D298E0A7B8CD" class="sect3">Step 4: Install an Oracle Database Server and an Oracle Client</h3>
<div>
<p>After you extract a service key table from Kerberos, you are ready to install the Oracle Database server and an Oracle client.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>See the Oracle Database operating system-specific installation documentation for instructions on installing the Oracle database server and client software.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="DBSEG9641"></a>
<div class="props_rev_3"><a id="GUID-DDB21112-7337-4946-960E-F0808CC7F107"></a>
<h3 id="DBSEG-GUID-DDB21112-7337-4946-960E-F0808CC7F107" class="sect3">Step 5: Configure Oracle Net Services and Oracle Database</h3>
<div>
<p>After you install the Oracle Database server and client, you can configure Oracle Net Services on the server and client.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>See the following documentation for information on configuring Oracle Net Services on the Oracle database server and client.</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle Database operating system-specific installation documentation</p>
</li>
<li>
<p><a class="olink NETAG001" target="_blank" href="../NETAG/intro.htm#NETAG001"><span><cite>Oracle Database Net Services Administrator&#39;s Guide</cite></span></a></p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="DBSEG9642"></a>
<div class="props_rev_3"><a id="GUID-D3C9F2F7-3A15-40A9-976C-864649C09ED9"></a>
<h3 id="DBSEG-GUID-D3C9F2F7-3A15-40A9-976C-864649C09ED9" class="sect3">Step 6: Configure Kerberos Authentication</h3>
<div>
<p>You must set the required parameters in the Oracle database server and client <code class="codeph">sqlnet.ora</code> files.</p>
<p>Be aware that in a multitenant environment, the settings in the <code class="codeph">sqlnet.ora</code> file apply to all pluggable databases (PDBs).</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="asokerb.htm#GUID-498B9E90-7841-44CD-BD48-0CE0C6F22064" title="First, you must configure Kerberos authentication service parameters on the client and on the database server.">Step 6A: Configure Kerberos on the Client and on the Database Server</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-7A4DD0B6-692D-474C-97F1-609197A9261D" title="Next, you are ready to set the OS_AUTHENT_PREFIX initialization parameter.">Step 6B: Set the Initialization Parameters</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-5FC42FEF-900A-4B72-83C2-BF79D6F06DD6" title="You can set optional sqlnet.ora parameters, in addition to the required parameters, for better security.">Step 6C: Set sqlnet.ora Parameters (Optional)</a></p>
</li>
</ul>
</div>
<a id="DBSEG9643"></a>
<div class="props_rev_3"><a id="GUID-498B9E90-7841-44CD-BD48-0CE0C6F22064"></a>
<h4 id="DBSEG-GUID-498B9E90-7841-44CD-BD48-0CE0C6F22064" class="sect4">Step 6A: Configure Kerberos on the Client and on the Database Server</h4>
<div>
<p>First, you must configure Kerberos authentication service parameters on the client and on the database server.</p>
<ol>
<li class="stepexpand"><span>Start Oracle Net Manager.</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>(UNIX) From <span class="italic"><code class="codeph">$ORACLE_HOME</code></span><code class="codeph">/bin</code>, enter the following command at the command line:</p>
<pre dir="ltr">netmgr
</pre></li>
<li>
<p>(Windows) Select <span class="bold">Start</span>, <span class="bold">Programs</span>, <span class="bold">Oracle - HOME_NAME</span>, <span class="bold">Configuration and Migration Tools</span>, then <span class="bold">Net Manager</span>.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Expand <span class="bold">Oracle Net Configuration</span>, and from <span class="bold">Local</span>, select <span class="bold">Profile</span>.</span></li>
<li class="stepexpand"><span>From the <span class="bold">Naming</span> list, select <span class="bold">Network Security</span>.</span>
<div>
<p>The Network Security tabbed window appears.</p>
</div>
</li>
<li class="stepexpand"><span>Select the <span class="bold">Authentication</span> tab.</span>
<div>
<div class="figure" id="GUID-498B9E90-7841-44CD-BD48-0CE0C6F22064__GUID-2E24E95D-924F-407D-A6A4-571EB989C54B"><img width="446" height="563" src="img/GUID-D2EC8E22-0C14-4BC9-B476-C83BF4917BFD-default.gif" alt="Description of GUID-D2EC8E22-0C14-4BC9-B476-C83BF4917BFD-default.gif follows" title="Description of GUID-D2EC8E22-0C14-4BC9-B476-C83BF4917BFD-default.gif follows"/><br/>
<a href="img_text/GUID-D2EC8E22-0C14-4BC9-B476-C83BF4917BFD-default.htm">Description of the illustration GUID-D2EC8E22-0C14-4BC9-B476-C83BF4917BFD-default.gif</a></div>
<!-- class="figure" --></div>
</li>
<li class="stepexpand"><span>From the Available Methods list, select <span class="bold">KERBEROS5</span>.</span></li>
<li class="stepexpand"><span>Move <span class="bold">KERBEROS5</span> to the Selected Methods list by clicking the right arrow (<span class="bold">&gt;</span>).</span></li>
<li class="stepexpand"><span>Arrange the selected methods in order of use.</span>
<div>
<p>To do so, select a method in the Selected Methods list, then click <span class="bold">Promote</span> or <span class="bold">Demote</span> to position it in the list. For example, if you want <code class="codeph">KERBEROS5</code> to be the first service used, move it to the top of the list.</p>
</div>
</li>
<li class="stepexpand"><span>Select the <span class="bold">Other Params</span> tab.</span></li>
<li class="stepexpand"><span>From the Authentication Service list, select <span class="bold">KERBEROS(V5)</span>.</span></li>
<li class="stepexpand"><span>Type <span class="bold">Kerberos</span> into the <span class="bold">Service</span> field.</span>
<div>
<div class="figure" id="GUID-498B9E90-7841-44CD-BD48-0CE0C6F22064__GUID-EE1C3442-17E2-4D46-8E8A-EBB349CA89B1"><img width="446" height="563" src="img/GUID-397D9D5F-438E-4E11-8EE1-EC06EE28C648-default.gif" alt="Description of GUID-397D9D5F-438E-4E11-8EE1-EC06EE28C648-default.gif follows" title="Description of GUID-397D9D5F-438E-4E11-8EE1-EC06EE28C648-default.gif follows"/><br/>
<a href="img_text/GUID-397D9D5F-438E-4E11-8EE1-EC06EE28C648-default.htm">Description of the illustration GUID-397D9D5F-438E-4E11-8EE1-EC06EE28C648-default.gif</a></div>
<!-- class="figure" -->
<p>This field defines the name of the service Oracle Database uses to obtain a Kerberos <a href="glossary.htm#GUID-BE2D3069-1BCC-482C-AD66-39B43D5A9281"><span class="xrefglossterm">service ticket</span></a>. When you provide the value for this field, the other fields are enabled.</p>
</div>
</li>
<li class="stepexpand"><span>Optionally enter values for the following fields:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Credential Cache File</span></p>
</li>
<li>
<p><span class="bold">Configuration File</span></p>
</li>
<li>
<p><span class="bold">Realm Translation File</span></p>
</li>
<li>
<p><span class="bold">Key Table</span></p>
</li>
<li>
<p><span class="bold">Clock Skew</span></p>
</li>
</ul>
<p>See the Oracle Net Manager online Help, and <a href="asokerb.htm#GUID-5FC42FEF-900A-4B72-83C2-BF79D6F06DD6" title="You can set optional sqlnet.ora parameters, in addition to the required parameters, for better security.">Step 6C: Set sqlnet.ora Parameters (Optional)</a>, for more information about the fields and the parameters they configure.</p>
</div>
</li>
<li class="stepexpand"><span>From the <span class="bold">File</span> menu, select <span class="bold">Save Network Configuration</span>.</span>
<div>
<p>The <code class="codeph">sqlnet.ora</code> file is updated with the following entries in addition to any optional choices that you may have made in the previous step:</p>
<pre dir="ltr">SQLNET.AUTHENTICATION_SERVICES=(KERBEROS5)
SQLNET.AUTHENTICATION_KERBEROS5_SERVICE=kservice
</pre></div>
</li>
</ol>
</div>
</div>
<a id="DBSEG9644"></a>
<div class="props_rev_3"><a id="GUID-7A4DD0B6-692D-474C-97F1-609197A9261D"></a>
<h4 id="DBSEG-GUID-7A4DD0B6-692D-474C-97F1-609197A9261D" class="sect4">Step 6B: Set the Initialization Parameters</h4>
<div>
<p>Next, you are ready to set the <code class="codeph">OS_AUTHENT_PREFIX</code> initialization parameter.</p>
<ol>
<li class="stepexpand"><span>Locate the <code class="codeph">init.ora</code> file.</span>
<div>
<p>By default, the <code class="codeph">init.ora</code> file is located in the <span class="italic"><code class="codeph">ORACLE_HOME</code></span><code class="codeph">/dbs</code> directory (or the same location of the data files) on Linux and UNIX systems, and in the <span class="italic"><code class="codeph">ORACLE_HOME</code></span><code class="codeph">\database</code> directory on Windows.</p>
</div>
</li>
<li class="stepexpand"><span>In the <code class="codeph">init.ora</code> file, set the value of <code class="codeph">OS_AUTHENT_PREFIX</code> to null in the <code class="codeph">init.ora</code> initialization parameter file.</span>
<div>
<p>For example:</p>
<pre dir="ltr">OS_AUTHENT_PREFIX=&#34;&#34;
</pre>
<p>Set this value to null because Kerberos user names can be long, and Oracle user names are limited to 30 characters. Setting this parameter to null overrides the default value of <code class="codeph">OPS$</code>.</p>
</div>
</li>
</ol>
<div class="section">
<div class="infobox-note" id="GUID-7A4DD0B6-692D-474C-97F1-609197A9261D__GUID-596B1497-DED6-476A-9AFE-DA96DCC44383">
<p class="notep1">Note:</p>
<p>You can create external database users that have Kerberos user names of more than 30 characters. See <a href="asokerb.htm#GUID-776C9160-A366-4E55-8C9F-4DB5DDF2C4E8" title="Next, you are ready to create an externally authenticated Oracle user.">Step 8: Create an Externally Authenticated Oracle User</a> for more information.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBSEG1054"></a><a id="DBSEG9645"></a>
<div class="props_rev_3"><a id="GUID-5FC42FEF-900A-4B72-83C2-BF79D6F06DD6"></a>
<h4 id="DBSEG-GUID-5FC42FEF-900A-4B72-83C2-BF79D6F06DD6" class="sect4">Step 6C: Set sqlnet.ora Parameters (Optional)</h4>
<div>
<p>You can set optional <code class="codeph">sqlnet.ora</code> parameters, in addition to the required parameters, for better security.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Optionally, set the parameters listed in the following table on both the client and the Oracle database server.</p>
</li>
</ul>
<div class="tblformalwide" id="GUID-5FC42FEF-900A-4B72-83C2-BF79D6F06DD6__BABBGCJH">
<p class="titleintable">Table 17-1 Kerberos-Specific sqlnet.ora Parameters</p>
<table class="cellalignment3691" title="Kerberos-Specific sqlnet.ora Parameters" summary="Kerberos-specific sqlnet.ora parameters">
<thead>
<tr class="cellalignment3671">
<th class="cellalignment3724" id="d101790e1454">Parameter</th>
<th class="cellalignment3725" id="d101790e1457">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3671">
<td class="cellalignment3726" id="d101790e1462" headers="d101790e1454">
<p><code class="codeph">SQLNET.KERBEROS5_CC_NAME=</code><span class="italic"><code class="codeph">pathname_to_credentials_cache_file</code></span>|<span class="italic"><code class="codeph">OS_MEMORY</code></span></p>
</td>
<td class="cellalignment3727" headers="d101790e1462 d101790e1457">
<p>Specifies the complete path name to the Kerberos credentials cache (CC) file. The default value is operating system-dependent. For UNIX, it is <code class="codeph">/tmp/krb5cc_</code><span class="italic"><code class="codeph">userid</code></span>.</p>
<p>Using the <code class="codeph">OS_MEMORY</code> option indicates that an OS-managed memory credential cache is used for the credential cache file. The only value currently supported for this is <code class="codeph">OSMSFT</code> (for Microsoft Windows).</p>
<p>You can use the following formats to specify a value for <code class="codeph">SQLNET.KERBEROS5_CC_NAME</code>:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">SQLNET.KERBEROS5_CC_NAME=</code><span class="italic"><code class="codeph">complete_path_to_cc_file</code></span></p>
<p>For example:</p>
<p><code class="codeph">SQLNET.KERBEROS5_CC_NAME=/tmp/kcache</code></p>
<p><code class="codeph">SQLNET.KERBEROS5_CC_NAME=D:\tmp\kcache</code></p>
</li>
<li>
<p><code class="codeph">SQLNET.KERBEROS5_CC_NAME=FILE:</code><span class="italic"><code class="codeph">complete_path_to_cc_file</code></span></p>
<p>For example:</p>
<p><code class="codeph">SQLNET.KERBEROS5_CC_NAME=FILE:/tmp/kcache</code></p>
</li>
<li>
<p><code class="codeph">SQLNET.KERBEROS5_CC_NAME=OSMSFT:</code></p>
<p>Use this value if you are running Windows and using a Microsoft KDC.</p>
</li>
</ul>
<p>You can also set this parameter by using the <code class="codeph">KRB5CCNAME</code> environment variable, but the value set in the <code class="codeph">sqlnet.ora</code> file takes precedence over the value set in <code class="codeph">KRB5CCNAME</code>.</p>
<p>For example:</p>
<pre dir="ltr">SQLNET.KERBEROS5_CC_NAME=/usr/tmp/krbcache
</pre></td>
</tr>
<tr class="cellalignment3671">
<td class="cellalignment3726" id="d101790e1545" headers="d101790e1454">
<p><code class="codeph">SQLNET.KERBEROS5_CLOCKSKEW=</code><span class="italic"><code class="codeph">number_of_seconds_accepted_as_network_delay</code></span></p>
</td>
<td class="cellalignment3727" headers="d101790e1545 d101790e1457">
<p>This parameter specifies how many seconds can pass before a Kerberos credential is considered out-of-date. It is used when a credential is actually received by either a client or a database server. An Oracle database server also uses it to decide if a credential needs to be stored to protect against a replay attack. The default is 300 seconds.</p>
<p>For example:</p>
<pre dir="ltr">SQLNET.KERBEROS5_CLOCKSKEW=1200
</pre></td>
</tr>
<tr class="cellalignment3671">
<td class="cellalignment3726" id="d101790e1560" headers="d101790e1454">
<p><code class="codeph">SQLNET.KERBEROS5_CONF=</code><span class="italic"><code class="codeph">pathname_to_Kerberos_configuration_file</code></span><code class="codeph">|AUTO_DISCOVER</code></p>
</td>
<td class="cellalignment3727" headers="d101790e1560 d101790e1457">
<p>This parameter specifies the complete path name to the <code class="codeph">Kerberos</code> configuration file. The configuration file contains the realm for the default KDC (key distribution center) and maps realms to KDC hosts. The default is operating system-dependent. For UNIX, it is <code class="codeph">/krb5/krb.conf</code>.</p>
<p>Using the <code class="codeph">AUTO_DISCOVER</code> option in place of the configuration file enables Kerberos clients to auto-discover the KDC.</p>
<p>For example:</p>
<pre dir="ltr">SQLNET.KERBEROS5_CONF=/krb/krb.conf
SQLNET.KERBEROS5_CONF=AUTO_DISCOVER
</pre></td>
</tr>
<tr class="cellalignment3671">
<td class="cellalignment3726" id="d101790e1588" headers="d101790e1454">
<p><code class="codeph">SQLNET.KERBEROS5_CONF_LOCATION=</code><span class="italic"><code class="codeph">path_to_Kerberos_configuration_directory</code></span></p>
</td>
<td class="cellalignment3727" headers="d101790e1588 d101790e1457">
<p>This parameter indicates that the Kerberos configuration file is created by the system, and does not need to be specified by the client. The configuration file uses DNS lookup to obtain the realm for the default KDC, and maps realms to KDC hosts.</p>
<p>For example:</p>
<pre dir="ltr">SQLNET.KERBEROS5_CONF_LOCATION=/krb
</pre></td>
</tr>
<tr class="cellalignment3671">
<td class="cellalignment3726" id="d101790e1603" headers="d101790e1454">
<p><code class="codeph">SQLNET.KERBEROS5_KEYTAB=</code><span class="italic"><code class="codeph">path_to_Kerberos_principal/key_table</code></span></p>
</td>
<td class="cellalignment3727" headers="d101790e1603 d101790e1457">
<p>This parameter specifies the complete path name to the Kerberos principal/secret key mapping file. It is used by the Oracle database server to extract its key and decrypt the incoming authentication information from the client. The default is operating system-dependent. For UNIX, it is <code class="codeph">/etc/v5srvtab</code>.</p>
<p>For example:</p>
<pre dir="ltr">SQLNET.KERBEROS5_KEYTAB=/etc/v5srvtab
</pre></td>
</tr>
<tr class="cellalignment3671">
<td class="cellalignment3726" id="d101790e1621" headers="d101790e1454">
<p><code class="codeph">SQLNET.KERBEROS5_REALMS=</code><span class="italic"><code class="codeph">path_to_Kerberos_realm_translation_file</code></span></p>
</td>
<td class="cellalignment3727" headers="d101790e1621 d101790e1457">
<p>This parameter specifies the complete path name to the Kerberos realm translation file. The translation file provides a mapping from a host name or domain name to a realm. The default is operating system-dependent. For UNIX, it is <code class="codeph">/etc/krb.realms</code>.</p>
<p>For example:</p>
<pre dir="ltr">SQLNET.KERBEROS5_REALMS=/krb5/krb.realms
</pre></td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" --></div>
</div>
</div>
<a id="DBSEG9646"></a>
<div class="props_rev_3"><a id="GUID-17ED0290-B25B-4BA0-8DF2-0592973D0791"></a>
<h3 id="DBSEG-GUID-17ED0290-B25B-4BA0-8DF2-0592973D0791" class="sect3">Step 7: Create a Kerberos User</h3>
<div>
<p>You must create the Kerberos user on the Kerberos authentication server where the administration tools are installed.</p>
<div class="section">
<p>The realm must already exist.</p>
<div class="infobox-note" id="GUID-17ED0290-B25B-4BA0-8DF2-0592973D0791__GUID-AE5D8C71-5C1F-4EB1-95DA-2267EF45E477">
<p class="notep1">Note:</p>
<p>The utility names in this section are executable programs. However, the Kerberos user name <code class="codeph">krbuser</code> and realm <code class="codeph">EXAMPLE.COM</code> are examples only. They can vary among systems.</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Run <code class="codeph">/krb5/admin/kadmin.local</code> as root to create a new Kerberos user, such as <code class="codeph">krbuser</code>.</p>
<p>For example, to create a Kerberos user is UNIX-specific:</p>
<pre dir="ltr"># /krb5/admin/kadmin.local
kadmin.local: <span class="bold">addprinc krbuser</span>
Enter password for principal: &#34;krbuser@example.com&#34;: (password does not display)
Re-enter password for principal: &#34;krbuser@example.com&#34;: (password does not display)
kadmin.local: <span class="bold">exit</span>
</pre></li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="DBSEG9647"></a>
<div class="props_rev_3"><a id="GUID-776C9160-A366-4E55-8C9F-4DB5DDF2C4E8"></a>
<h3 id="DBSEG-GUID-776C9160-A366-4E55-8C9F-4DB5DDF2C4E8" class="sect3">Step 8: Create an Externally Authenticated Oracle User</h3>
<div>
<p>Next, you are ready to create an externally authenticated Oracle user.</p>
<ol>
<li class="stepexpand"><span>Log in to SQL*Plus as a user who has the <code class="codeph">CREATE USER</code> privilege.</span>
<div>
<pre dir="ltr">sqlplus sec_admin <span class="italic">- Or, CONNECT sec_admin@hrpdb</span>
Enter password: <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Ensure that the <code class="codeph">OS_AUTHENT_PREFIX</code> is set to null (<code class="codeph">&#34;&#34;</code>).</span></li>
<li class="stepexpand"><span>Create an Oracle Database user account that corresponds to the Kerberos user. Enter the Oracle user name in uppercase and enclose it in double quotation marks.</span>
<div>
<p>For example:</p>
<pre dir="ltr">CREATE USER &#34;KRBUSER@EXAMPLE.COM&#34; IDENTIFIED EXTERNALLY; 
GRANT CREATE SESSION TO &#34;KRBUSER@EXAMPLE.COM&#34;; 
</pre>
<p>If the user&#39;s Kerberos principal name is longer than 30 characters, and up to 1024 characters, then create the user by using the following syntax:</p>
<pre dir="ltr">CREATE USER <span class="italic">db_user_name</span> IDENTIFIED EXTERNALLY AS &#39;<span class="italic">kerberos_principal_name</span>&#39;;
</pre>
<p>For example:</p>
<pre dir="ltr">CREATE USER KRBUSER IDENTIFIED EXTERNALLY AS &#39;KerberosUser@example.com&#39;;
</pre></div>
</li>
</ol>
<div class="section">
<div class="infobox-note" id="GUID-776C9160-A366-4E55-8C9F-4DB5DDF2C4E8__GUID-061B3B88-4C46-42BE-867F-145BC5106EF8">
<p class="notep1">Note:</p>
<p>The database administrator should ensure that two database users are not identified externally by the same Kerberos principal name.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBSEG061"></a>
<div class="props_rev_3"><a id="GUID-A3778E94-702B-44F8-B9D4-E8CFB61A0009"></a>
<h3 id="DBSEG-GUID-A3778E94-702B-44F8-B9D4-E8CFB61A0009" class="sect3">Step 9: Get an Initial Ticket for the Kerberos/Oracle User</h3>
<div>
<p>Before you can connect to the database, you must ask the Key Distribution Center (KDC) for an initial ticket.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>To request an <a href="glossary.htm#GUID-E26D13B1-DD61-452C-A4E7-BA0C243C66EF"><span class="xrefglossterm">initial ticket</span></a>, run the following command on the client:</p>
<pre dir="ltr">% okinit <span class="italic">username</span>
</pre>
<p>If you want to enable credentials that can be used across database links, then include the <code class="codeph">-f</code> option and provide the Kerberos password when prompted.</p>
<pre dir="ltr">% okinit -f
Password for krbuser@EXAMPLE.COM:(password does not display)
</pre></li>
</ul>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="DBSEG9648"></a>
<div class="props_rev_3"><a id="GUID-B861CD2F-EA97-4A90-8A77-3BB8F4BD1EDC"></a>
<h2 id="DBSEG-GUID-B861CD2F-EA97-4A90-8A77-3BB8F4BD1EDC" class="sect2">Utilities for the Kerberos Authentication Adapter</h2>
<div>
<p>The Oracle Kerberos authentication adapter utilities are designed for an Oracle client with Oracle Kerberos authentication support installed.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="asokerb.htm#GUID-5D96C7A2-B4D8-4084-A9D4-BAD4936BD787" title="The okinit utility obtains and caches Kerberos tickets.">okinit Utility Options for Obtaining the Initial Ticket</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-0C0E484C-79FD-4D6B-8CAA-73E234DDF406" title="You can run the oklist utility to display the list of tickets held.">oklist Utility Options for Displaying Credentials</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-0E3F14F4-CCBC-4DDA-806C-9DE18E78C74D" title="You can remove credentials from the cache file.">Removing Credentials from the Cache File</a></p>
</li>
</ul>
</div>
<a id="DBSEG10205"></a><a id="DBSEG062"></a>
<div class="props_rev_3"><a id="GUID-5D96C7A2-B4D8-4084-A9D4-BAD4936BD787"></a>
<h3 id="DBSEG-GUID-5D96C7A2-B4D8-4084-A9D4-BAD4936BD787" class="sect3">okinit Utility Options for Obtaining the Initial Ticket</h3>
<div>
<p>The <code class="codeph">okinit</code> utility obtains and caches Kerberos tickets.</p>
<div class="section">
<p>This utility is typically used to obtain the ticket-granting ticket, using a password entered by the user to decrypt the credential from the key distribution center (KDC). The ticket-granting ticket is then stored in the user&#39;s credential cache.</p>
<p><a href="asokerb.htm#GUID-5D96C7A2-B4D8-4084-A9D4-BAD4936BD787__BAJEJJFF" title="This table lists and describes the options you can use with the okinit command-line utility.">Table 17-2</a> lists the options available with <code class="codeph">okinit</code>.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-5D96C7A2-B4D8-4084-A9D4-BAD4936BD787__BAJEJJFF">
<p class="titleintable">Table 17-2 Options for the okinit Utility</p>
<table class="cellalignment3677" title="Options for the okinit Utility" summary="This table lists and describes the options you can use with the okinit command-line utility.">
<thead>
<tr class="cellalignment3671">
<th class="cellalignment3754" id="d101790e2142">Option</th>
<th class="cellalignment3755" id="d101790e2145">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3671">
<td class="cellalignment3756" id="d101790e2150" headers="d101790e2142">
<p><code class="codeph">-f</code></p>
</td>
<td class="cellalignment3757" headers="d101790e2150 d101790e2145">
<p>Ask for a forwardable ticket-granting ticket. This option is necessary to follow database links.</p>
</td>
</tr>
<tr class="cellalignment3671">
<td class="cellalignment3756" id="d101790e2158" headers="d101790e2142">
<p><code class="codeph">-l</code></p>
</td>
<td class="cellalignment3757" headers="d101790e2158 d101790e2145">
<p>Specify the lifetime of the ticket-granting ticket and all subsequent tickets. By default, the ticket-granting ticket is good for eight (8) hours, but shorter or longer-lived credentials may be desired. Note that the KDC can ignore this option or put site-configured limits on what can be specified. The lifetime value is a string that consists of a number qualified by <code class="codeph">w</code> (weeks), <code class="codeph">d</code> (days), <code class="codeph">h</code> (hours), <code class="codeph">m</code> (minutes), or <code class="codeph">s</code> (seconds), as in the following example:</p>
<pre dir="ltr">okinit -l 2wld6h20m30s
</pre>
<p>The example requests a ticket-granting ticket that has a lifetime of 2 weeks, 1 day, 6 hours, 20 minutes, and 30 seconds.</p>
</td>
</tr>
<tr class="cellalignment3671">
<td class="cellalignment3756" id="d101790e2185" headers="d101790e2142">
<p><code class="codeph">-c</code></p>
</td>
<td class="cellalignment3757" headers="d101790e2185 d101790e2145">
<p>Specify an alternative credential cache. For UNIX, the default is <code class="codeph">/tmp/krb5cc_</code><span class="italic">uid</span>. You can also specify the alternate credential cache by using the <code class="codeph">SQLNET.KERBEROS5_CC_NAME</code> parameter in the <code class="codeph">sqlnet.ora</code> file.</p>
</td>
</tr>
<tr class="cellalignment3671">
<td class="cellalignment3756" id="d101790e2204" headers="d101790e2142">
<p><code class="codeph">-e</code></p>
</td>
<td class="cellalignment3757" headers="d101790e2204 d101790e2145">
<p>Specifies a number representing the Kerberos encryption type to use.</p>
<p>This option can be used to request a particular Kerberos encryption type key for the session. If you specify more than one encryption type, then the KDC chooses the common and strongest encryption type from the list.</p>
<p>The following value is allowed:</p>
<ul style="list-style-type: disc;">
<li>
<p>18 for <code class="codeph">AES256-CTS</code></p>
</li>
</ul>
<p>The following example requests for the <code class="codeph">AES256-CTS</code> encryption type:</p>
<pre dir="ltr">okinit -e 18 krbuser@REALM
</pre>
<p>Note that you can repeat the option to request multiple encryption types.</p>
</td>
</tr>
<tr class="cellalignment3671">
<td class="cellalignment3756" id="d101790e2231" headers="d101790e2142">
<p><code class="codeph">-?</code></p>
</td>
<td class="cellalignment3757" headers="d101790e2231 d101790e2145">
<p>List command line options.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="DBSEG10206"></a><a id="DBSEG9649"></a>
<div class="props_rev_3"><a id="GUID-0C0E484C-79FD-4D6B-8CAA-73E234DDF406"></a>
<h3 id="DBSEG-GUID-0C0E484C-79FD-4D6B-8CAA-73E234DDF406" class="sect3">oklist Utility Options for Displaying Credentials</h3>
<div>
<p>You can run the <code class="codeph">oklist</code> utility to display the list of tickets held.</p>
<div class="section">
<p><a href="asokerb.htm#GUID-0C0E484C-79FD-4D6B-8CAA-73E234DDF406__BAJHIIDB" title="This table lists and describes the options that you can use with the oklist command-line utility.">Table 17-3</a> lists the available <code class="codeph">oklist</code> options.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-0C0E484C-79FD-4D6B-8CAA-73E234DDF406__BAJHIIDB">
<p class="titleintable">Table 17-3 Options for the oklist Utility</p>
<table class="cellalignment3677" title="Options for the oklist Utility" summary="This table lists and describes the options that you can use with the oklist command-line utility.">
<thead>
<tr class="cellalignment3671">
<th class="cellalignment3754" id="d101790e2327">Option</th>
<th class="cellalignment3755" id="d101790e2330">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3671">
<td class="cellalignment3756" id="d101790e2335" headers="d101790e2327">
<p><code class="codeph">-f</code></p>
</td>
<td class="cellalignment3757" headers="d101790e2335 d101790e2330">
<p>Show flags with credentials. Relevant flags are:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">I</code>, credential is a ticket-granting ticket</p>
</li>
<li>
<p><code class="codeph">F</code>, credential is forwardable</p>
</li>
<li>
<p><code class="codeph">f</code>, credential is forwarded.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment3671">
<td class="cellalignment3756" id="d101790e2359" headers="d101790e2327">
<p><code class="codeph">-c</code></p>
</td>
<td class="cellalignment3757" headers="d101790e2359 d101790e2330">
<p>Specify an alternative credential cache. In UNIX, the default is <code class="codeph">/tmp/krb5cc_</code><span class="italic"><code class="codeph">uid</code></span>. The alternate credential cache can also be specified by using the <code class="codeph">SQLNET.KERBEROS5_CC_NAME</code> parameter in the <code class="codeph">sqlnet.ora</code> file.</p>
</td>
</tr>
<tr class="cellalignment3671">
<td class="cellalignment3756" id="d101790e2379" headers="d101790e2327">
<p><code class="codeph">-k</code></p>
</td>
<td class="cellalignment3757" headers="d101790e2379 d101790e2330">
<p>List the entries in the service table (default <code class="codeph">/etc/v5srvtab</code>) on UNIX. The alternate service table can also be specified by using the <code class="codeph">SQLNET.KERBEROS5_KEYTAB</code>&nbsp;parameter in the <code class="codeph">sqlnet.ora</code> file.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p>The show flag option (<code class="codeph">-f</code>) displays additional information, as shown in the following example:</p>
<pre dir="ltr">% oklist -f
27-Jul-1999 21:57:51   28-Jul-1999 05:58:14
krbtgt/EXAMPLE.COM@EXAMPLE.COM
Flags: FI
</pre></div>
<!-- class="section" --></div>
</div>
<a id="DBSEG9650"></a>
<div class="props_rev_3"><a id="GUID-0E3F14F4-CCBC-4DDA-806C-9DE18E78C74D"></a>
<h3 id="DBSEG-GUID-0E3F14F4-CCBC-4DDA-806C-9DE18E78C74D" class="sect3">Removing Credentials from the Cache File</h3>
<div>
<p>You can remove credentials from the cache file.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Use the <code class="codeph">okdstry</code> utility to remove credentials from the credentials cache file:</p>
<pre dir="ltr">$ okdstry -c
</pre>
<p>where the <code class="codeph">-c</code> command option lets you specify an alternative credential cache. For UNIX, the default is <code class="codeph">/tmp/krb5cc_</code><span class="italic"><code class="codeph">uid</code></span>. You can also specify the alternate credential cache by using the <code class="codeph">SQLNET.KERBEROS5_CC_NAME</code> parameter in the <code class="codeph">sqlnet.ora</code> file.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-9C4553E5-59ED-418E-B2B5-13E2E55B5E65"></a>
<h2 id="DBSEG-GUID-9C4553E5-59ED-418E-B2B5-13E2E55B5E65" class="sect2">Connecting to an Oracle Database Server Authenticated by Kerberos</h2>
<div>
<p>After Kerberos is configured, you can connect to an Oracle database server without using a user name or password.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Use the following syntax to connect to the database without using a user name or password:</p>
<pre dir="ltr">$ sqlplus /@<span class="italic">net_service_name</span>
</pre></li>
</ul>
<p>In this specification, <span class="italic"><code class="codeph">net_service_name</code></span> is an Oracle Net Services service name. For example:</p>
<pre dir="ltr">$ sqlplus /@oracle_dbname
</pre>
<div class="infoboxnotealso" id="GUID-9C4553E5-59ED-418E-B2B5-13E2E55B5E65__GUID-C1609D32-4A01-4C36-A71C-055B6BE4C4C8">
<p class="notep1">See Also:</p>
<p><a class="olink HETER001" target="_blank" href="../HETER/GUID-EC402025-0CC0-401F-AF93-888B8A3089FE.htm#HETER001"><span><cite>Oracle Database Heterogeneous Connectivity User&#39;s Guide</cite></span></a> for information about external authentication</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBSEG9652"></a>
<div class="props_rev_3"><a id="GUID-178E9041-7A3D-4CE6-B137-513A4EB6D625"></a>
<h2 id="DBSEG-GUID-178E9041-7A3D-4CE6-B137-513A4EB6D625" class="sect2">Configuring Interoperability with a Windows 2008 Domain Controller KDC</h2>
<div>
<p>Oracle Database, which complies with MIT Kerberos, can interoperate with tickets that are issued by a Kerberos Key Distribution Center (KDC) on a Windows 2008 domain controller to enable Kerberos authentication with an Oracle database.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="asokerb.htm#GUID-0FAD3018-997A-476E-8899-5B7092AAB4CF" title="You must perform the following steps to configure an Oracle Kerbero Client to interoperate with a Microsoft Windows 2008 Domain Controller KDC. Perform these steps on the Oracle Kerberos client.">Step 1: Configure Oracle Kerberos Client for Windows 2008 Domain Controller</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-0724FFCA-081A-4083-8A2B-CF3909299E03" title="Next, you are ready to configure a Microsoft Windows 2008 Domain Controller KDC to interoperate with an Oracle Client. You must perform these steps on the Windows 2008 domain controller.">Step 2: Configure a Windows 2008 Domain Controller KDC for the Oracle Client</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-40B211E7-2ACF-4097-96CD-5BA88BCA2F7F" title="You must configure the Oracle database for the domain controller on the host computer where the Oracle database is installed.">Step 3: Configure Oracle Database for a Windows 2008 Domain Controller KDC</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-2B84FD00-DF86-4CBB-B964-E2395F7086F9" title="Before a client can connect to the database, the client must request an initial ticket.">Step 4: Obtain an Initial Ticket for the Kerberos/Oracle User</a></p>
</li>
</ul>
</div>
<a id="DBSEG9653"></a>
<div class="props_rev_3"><a id="GUID-0FAD3018-997A-476E-8899-5B7092AAB4CF"></a>
<h3 id="DBSEG-GUID-0FAD3018-997A-476E-8899-5B7092AAB4CF" class="sect3">Step 1: Configure Oracle Kerberos Client for Windows 2008 Domain Controller</h3>
<div>
<p>You must perform the following steps to configure an Oracle Kerbero Client to interoperate with a Microsoft Windows 2008 Domain Controller KDC. Perform these steps on the Oracle Kerberos client.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="asokerb.htm#GUID-EA20B5AC-B5DC-478C-897F-FDED38B43F2B" title="You must configure a set of client Kerberos configuration files that refer to the Windows 2008 domain controller as the Kerberos KDC.">Step 1A: Create the Client Kerberos Configuration Files</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-FCE9DCEC-E485-4A86-B687-18871F281E24" title="The sqlnet.ora file has Kerbose 5&ndash;specific parameters.">Step 1B: Specify the Oracle Configuration Parameters in the sqlnet.ora File</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-F5B5E08D-3879-4199-BBC1-7EFFA365AF58" title="The Windows 2008 domain controller KDC listens on UDP/TCP port 88.">Step 1C: Specify the Listening Port Number</a></p>
</li>
</ul>
</div>
<a id="DBSEG9654"></a>
<div class="props_rev_3"><a id="GUID-EA20B5AC-B5DC-478C-897F-FDED38B43F2B"></a>
<h4 id="DBSEG-GUID-EA20B5AC-B5DC-478C-897F-FDED38B43F2B" class="sect4">Step 1A: Create the Client Kerberos Configuration Files</h4>
<div>
<p>You must configure a set of client Kerberos configuration files that refer to the Windows 2008 domain controller as the Kerberos KDC.</p>
<div class="section">
<p class="subhead3"></p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Create the <code class="codeph">krb.conf</code>, <code class="codeph">krb5.conf</code>, and <code class="codeph">krb5.realms</code> files.</p>
</li>
</ul>
<p>For example, assuming that the Windows 2008 domain controller is running on a node named <code class="codeph">sales3854.us.example.com</code>:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold"><code class="codeph">krb.conf</code></span> file</p>
<p>For example:</p>
<pre dir="ltr">SALES3854.US.EXAMPLE.COM
SALES3854.US.EXAMPLE.COM sales3854.us.example.com admin server
</pre></li>
<li>
<p><span class="bold"><code class="codeph">krb5.conf</code></span> file</p>
<p>For example:</p>
<pre dir="ltr">[libdefaults]
default_realm=SALES.US.EXAMPLE.COM
[realms]
SALES.US.EXAMPLE.COM= { kdc=sales3854.us.example.com:88 }
[domain_realm]
.us.example.com=SALES.US.EXAMPLE.COM
</pre></li>
<li>
<p><span class="bold"><code class="codeph">krb5.realms</code></span> file</p>
<p>For example:</p>
<pre dir="ltr">us.example.com SALES.US.EXAMPLE.COM
</pre></li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="DBSEG9655"></a>
<div class="props_rev_3"><a id="GUID-FCE9DCEC-E485-4A86-B687-18871F281E24"></a>
<h4 id="DBSEG-GUID-FCE9DCEC-E485-4A86-B687-18871F281E24" class="sect4">Step 1B: Specify the Oracle Configuration Parameters in the sqlnet.ora File</h4>
<div>
<p>The <code class="codeph">sqlnet.ora</code> file has Kerbose 5&ndash;specific parameters.</p>
<div class="section">
<p>Configuring an Oracle client to interoperate with a Windows 2008 domain controller KDC uses the same <code class="codeph">sqlnet.ora</code> file parameters that are listed in <a href="asokerb.htm#GUID-498B9E90-7841-44CD-BD48-0CE0C6F22064" title="First, you must configure Kerberos authentication service parameters on the client and on the database server.">Step 6A: Configure Kerberos on the Client and on the Database Server</a>.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Set the following parameters in the <code class="codeph">sqlnet.ora</code> file on the client:</p>
<pre dir="ltr">SQLNET.KERBEROS5_CONF=pathname_to_Kerberos_configuration_file
SQLNET.KERBEROS5_CONF_MIT=TRUE
SQLNET.AUTHENTICATION_KERBEROS5_SERVICE=Kerberos_service_name
SQLNET.AUTHENTICATION_SERVICES=(BEQ,KERBEROS5)
</pre></li>
</ul>
<div class="infobox-note" id="GUID-FCE9DCEC-E485-4A86-B687-18871F281E24__GUID-485C38B0-8B00-4814-A470-CF75B2D04FB5">
<p class="notep1">Note:</p>
<p>Ensure that the <code class="codeph">SQLNET.KERBEROS5_CONF_MIT</code> parameter is set to <code class="codeph">TRUE</code> because the Windows 2008 operating system is designed to interoperate only with security services that are based on MIT Kerberos version 5.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBSEG9656"></a>
<div class="props_rev_3"><a id="GUID-F5B5E08D-3879-4199-BBC1-7EFFA365AF58"></a>
<h4 id="DBSEG-GUID-F5B5E08D-3879-4199-BBC1-7EFFA365AF58" class="sect4">Step 1C: Specify the Listening Port Number</h4>
<div>
<p>The Windows 2008 domain controller KDC listens on UDP/TCP port 88.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Ensure that the system file entry for <code class="codeph">kerberos5</code> is set to UDP/TCP port 88.</p>
<p>For the UNIX environment, ensure that the first <code class="codeph">kerberos5</code> entry in the <code class="codeph">/etc/services</code> file is set to 88.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="DBSEG9657"></a>
<div class="props_rev_3"><a id="GUID-0724FFCA-081A-4083-8A2B-CF3909299E03"></a>
<h3 id="DBSEG-GUID-0724FFCA-081A-4083-8A2B-CF3909299E03" class="sect3">Step 2: Configure a Windows 2008 Domain Controller KDC for the Oracle Client</h3>
<div>
<p>Next, you are ready to configure a Microsoft Windows 2008 Domain Controller KDC to interoperate with an Oracle Client. You must perform these steps on the Windows 2008 domain controller.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="asokerb.htm#GUID-61841CA7-84A9-4E1A-8C2A-BC67B42437BD" title="You must create a user account for the Microsoft Windows 2008 Domain Controller KDC.">Step 2A: Create the User Account</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-F231D375-3213-46E0-97C2-D6C36158B5D5" title="After you create the user account, you are ready to create the Oracle Database principal user account.">Step 2B: Create the Oracle Database Principal User Account</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-0724FFCA-081A-4083-8A2B-CF3909299E03__GUID-7FBBA53F-B8AF-46F4-96BB-32A54339E152">
<p class="notep1">See Also:</p>
<p>Microsoft documentation for information about how to create users in Active Directory.</p>
</div>
</div>
<a id="DBSEG9658"></a>
<div class="props_rev_3"><a id="GUID-61841CA7-84A9-4E1A-8C2A-BC67B42437BD"></a>
<h4 id="DBSEG-GUID-61841CA7-84A9-4E1A-8C2A-BC67B42437BD" class="sect4">Step 2A: Create the User Account</h4>
<div>
<p>You must create a user account for the Microsoft Windows 2008 Domain Controller KDC.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>On the Windows 2008 domain controller, create a new user account for the Oracle client in Microsoft Active Directory.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="DBSEG9659"></a>
<div class="props_rev_3"><a id="GUID-F231D375-3213-46E0-97C2-D6C36158B5D5"></a>
<h4 id="DBSEG-GUID-F231D375-3213-46E0-97C2-D6C36158B5D5" class="sect4">Step 2B: Create the Oracle Database Principal User Account</h4>
<div>
<p>After you create the user account, you are ready to create the Oracle Database principal user account.</p>
<div class="section">
<p>After you create the user account, you are ready to create the Oracle Database principal user account.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Create a new user account for the Oracle database in Microsoft Active Directory.</span>
<div>
<p>For example, if the Oracle database runs on the host <code class="codeph">sales3854.us.example.com</code>, then use Active Directory to create a user with the user name <code class="codeph">sales3854.us.example.com</code> and the password <code class="codeph">oracle</code>.</p>
<p>Do not create a user as <code class="codeph">host/hostname.dns.com</code>, such as <code class="codeph">oracle/sales3854.us.example.com</code>, in Active Directory. Microsoft&#39;s KDC does not support multipart names like an MIT KDC does. An MIT KDC allows multipart names to be used for service principals because it treats all principals as user names. However, Microsoft&#39;s KDC does not.</p>
</div>
</li>
<li class="stepexpand"><span>Use the <code class="codeph">Ktpass</code> command line utility to extract the <code class="codeph">keytab</code> file with the following syntax:</span>
<div>
<pre dir="ltr">Ktpass -princ service/hostname@NT-DNS-REALM-NAME -mapuser account -pass password -out keytab.file
</pre>
<p>Using the database user created in the previous step, the following is an example of <code class="codeph">Ktpass</code> usage:</p>
<pre dir="ltr">C:&gt; Ktpass -princ oracle/sales3854.us.example.com@SALES.US.COM -mapuser sales3854 -pass oracle -out C:\temp\v5srvtab
</pre>
<p>This utility is part of the Windows 2008 Support Tools and can be found on the Windows 2008 distribution media in the <code class="codeph">\support\reskit\netmgmt\security</code> folder.</p>
</div>
</li>
<li class="stepexpand"><span>Copy the extracted <code class="codeph">keytab</code> file to the host computer where the Oracle database is installed.</span>
<div>
<p>For example, the <code class="codeph">keytab</code> that was created in the previous step can be copied to <code class="codeph">/krb5/v5svrtab</code>.</p>
</div>
</li>
</ol>
<div class="section">
<div class="infoboxnotealso" id="GUID-F231D375-3213-46E0-97C2-D6C36158B5D5__GUID-3B289667-D0E0-40BA-994E-A296C8A5DC78">
<p class="notep1">See Also:</p>
<p>Detailed information about Windows 2008 interoperability with Kerberos 5 that is available at the following URL:</p>
<pre dir="ltr"><a href="http://technet.microsoft.com/hi-in/windowsserver/2000/bb735396(en-us).aspx" target="_blank">http://technet.microsoft.com/hi-in/windowsserver/2000/bb735396(en-us).aspx</a>
</pre></div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="DBSEG9660"></a>
<div class="props_rev_3"><a id="GUID-40B211E7-2ACF-4097-96CD-5BA88BCA2F7F"></a>
<h3 id="DBSEG-GUID-40B211E7-2ACF-4097-96CD-5BA88BCA2F7F" class="sect3">Step 3: Configure Oracle Database for a Windows 2008 Domain Controller KDC</h3>
<div>
<p>You must configure the Oracle database for the domain controller on the host computer where the Oracle database is installed.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="asokerb.htm#GUID-10AF1BFF-0A33-4CD2-BBD6-5A834ECD565C" title="You must first set configuration parameters for the database.">Step 3A: Set Configuration Parameters in the sqlnet.ora File</a></p>
</li>
<li>
<p><a href="asokerb.htm#GUID-0A787BEC-BBF8-4F07-9B06-593DF98996EF" title="After you set the configuration parameters, you are ready to create an externally authenticated Oracle user.">Step 3B: Create an Externally Authenticated Oracle User</a></p>
</li>
</ul>
</div>
<a id="DBSEG9661"></a>
<div class="props_rev_3"><a id="GUID-10AF1BFF-0A33-4CD2-BBD6-5A834ECD565C"></a>
<h4 id="DBSEG-GUID-10AF1BFF-0A33-4CD2-BBD6-5A834ECD565C" class="sect4">Step 3A: Set Configuration Parameters in the sqlnet.ora File</h4>
<div>
<p>You must first set configuration parameters for the database.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Specify values for the following parameters in the <code class="codeph">sqlnet.ora</code> file for the database server:</p>
<pre dir="ltr">SQLNET.KERBEROS5_CONF=pathname_to_Kerberos_configuration_file
SQLNET.KERBEROS5_KEYTAB=pathname_to_Kerberos_principal/key_table
SQLNET.KERBEROS5_CONF_MIT=TRUE
SQLNET.AUTHENTICATION_KERBEROS5_SERVICE=Kerberos_service_name
SQLNET.AUTHENTICATION_SERVICES=(BEQ,KERBEROS5)
</pre></li>
</ul>
<div class="infobox-note" id="GUID-10AF1BFF-0A33-4CD2-BBD6-5A834ECD565C__GUID-306BD4F1-F219-43D3-B436-764C11F566E3">
<p class="notep1">Note:</p>
<ul style="list-style-type: disc;">
<li>
<p>Ensure that the <code class="codeph">SQLNET.KERBEROS5_CONF_MIT</code> parameter is set to <code class="codeph">TRUE</code> because the Windows 2008 operating system is designed to interoperate only with security services that are based on MIT Kerberos version 5.</p>
</li>
<li>
<p>Be aware that in a multitenant environment, the settings in the <code class="codeph">sqlnet.ora</code> file apply to all PDBs.</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBSEG9662"></a>
<div class="props_rev_3"><a id="GUID-0A787BEC-BBF8-4F07-9B06-593DF98996EF"></a>
<h4 id="DBSEG-GUID-0A787BEC-BBF8-4F07-9B06-593DF98996EF" class="sect4">Step 3B: Create an Externally Authenticated Oracle User</h4>
<div>
<p>After you set the configuration parameters, you are ready to create an externally authenticated Oracle user.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Follow the procedure under <a href="asokerb.htm#GUID-776C9160-A366-4E55-8C9F-4DB5DDF2C4E8" title="Next, you are ready to create an externally authenticated Oracle user.">Step 8: Create an Externally Authenticated Oracle User</a> to create an externally authenticated Oracle user.</p>
<p>Ensure that you create the username in all uppercase characters (for example, <code class="codeph">ORAKRB@SALES.US.EXAMPLE.COM</code>).</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-0A787BEC-BBF8-4F07-9B06-593DF98996EF__GUID-29E8B22F-9ABD-4E5F-B7FC-56ED9950DDBB">
<p class="notep1">See Also:</p>
<p><a href="asokerb.htm#GUID-D3C9F2F7-3A15-40A9-976C-864649C09ED9" title="You must set the required parameters in the Oracle database server and client sqlnet.ora files.">Step 6: Configure Kerberos Authentication</a> for information about using Oracle Net Manager to set the <code class="codeph">sqlnet.ora</code> file parameters.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="DBSEG9663"></a>
<div class="props_rev_3"><a id="GUID-2B84FD00-DF86-4CBB-B964-E2395F7086F9"></a>
<h3 id="DBSEG-GUID-2B84FD00-DF86-4CBB-B964-E2395F7086F9" class="sect3">Step 4: Obtain an Initial Ticket for the Kerberos/Oracle User</h3>
<div>
<p>Before a client can connect to the database, the client must request an initial ticket.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>To request an <a href="glossary.htm#GUID-E26D13B1-DD61-452C-A4E7-BA0C243C66EF"><span class="xrefglossterm">initial ticket</span></a>, follow the task information for <a href="asokerb.htm#GUID-A3778E94-702B-44F8-B9D4-E8CFB61A0009" title="Before you can connect to the database, you must ask the Key Distribution Center (KDC) for an initial ticket.">Step 9: Get an Initial Ticket for the Kerberos/Oracle User</a>.</p>
</li>
</ul>
<div class="infobox-note" id="GUID-2B84FD00-DF86-4CBB-B964-E2395F7086F9__GUID-4A4F18BF-AC42-4D0D-973B-85295DFD656B">
<p class="notep1">Note:</p>
<p>The user does not need to explicitly request for an initial ticket, using the <code class="codeph">okinit</code> command, when using the Windows native cache.</p>
<p>If the Oracle client is running on Microsoft Windows 2008 or later, the Kerberos ticket is automatically retrieved when the user logs in to Windows.</p>
</div>
<div class="infoboxnotealso" id="GUID-2B84FD00-DF86-4CBB-B964-E2395F7086F9__GUID-EF60D547-0D25-4F6F-A841-0DFFC1EA0296">
<p class="notep1">See Also:</p>
<p>Microsoft documentation for details about the <code class="codeph">Kerbtray.exe</code> utility, which can be used to display Kerberos ticket information for a system</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<div class="sect2"><a id="GUID-2AB588F3-700F-4409-BD3D-AD40D330701E"></a>
<h2 id="DBSEG-GUID-2AB588F3-700F-4409-BD3D-AD40D330701E" class="sect2">Configuring Kerberos Authentication Fallback Behavior</h2>
<div>
<p>You can configure fallback behavior (password-based authentication) in case the Kerberos authentication fails.</p>
<div class="section">After you have configured Kerberos authentication for Oracle clients to use Kerberos authentication to authenticate to an Oracle database, there are cases where you may want to fall back to password-based authentication. An example would be if you have fixed user database links in the Oracle database.</div>
<!-- class="section" -->
<ul>
<li class="stepexpand"><span>To enable Kerberos authentication to fall back to password-based authentication, set the <code class="codeph">SQLNET.FALLBACK_AUTHENTICATION</code> parameter to <code class="codeph">TRUE</code> in the <code class="codeph">sqlnet.ora</code> files on both the client and server.</span>
<div>The default of this parameter is <code class="codeph">FALSE</code>. This means that by default, the connection fails when Kerberos authentication fails.</div>
</li>
</ul>
<div class="section">
<div class="infoboxnotealso" id="GUID-2AB588F3-700F-4409-BD3D-AD40D330701E__GUID-90D62943-F1D4-482F-BE57-EC6B13467681">
<p class="notep1">See Also:</p>
<a class="olink NETRF-GUID-038AB29B-720D-467C-BADD-2A74100E0A2C" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=NETRF-GUID-038AB29B-720D-467C-BADD-2A74100E0A2C"><span><cite>Oracle Database Net Services Reference</cite></span></a> for more information about the <code class="codeph">SQLNET.FALLBACK_AUTHENTICATION</code> parameter</div>
</div>
<!-- class="section" --></div>
</div>
<a id="DBSEG9664"></a>
<div class="props_rev_3"><a id="GUID-B3EEC35D-7E10-48EA-9341-09DBE57A1C6D"></a>
<h2 id="DBSEG-GUID-B3EEC35D-7E10-48EA-9341-09DBE57A1C6D" class="sect2">Troubleshooting the Oracle Kerberos Authentication Configuration</h2>
<div>
<p>Oracle provides guidance for common Kerberos configuration problems.</p>
<p>Common problems are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>If you cannot get your ticket-granting ticket using <code class="codeph">okinit</code>:</p>
<ul style="list-style-type: disc;">
<li>
<p>Ensure that the default realm is correct by examining the <code class="codeph">krb.conf</code> file.</p>
</li>
<li>
<p>Ensure that the KDC is running on the host specified for the realm.</p>
</li>
<li>
<p>Ensure that the KDC has an entry for the user principal and that the passwords match.</p>
</li>
<li>
<p>Ensure that the <code class="codeph">krb.conf</code> and <code class="codeph">krb.realms</code> files are readable by Oracle.</p>
</li>
<li>
<p>Ensure that the <code class="codeph">TNS_ADMIN</code> environment variable is pointing to the directory containing the <code class="codeph">sqlnet.ora</code> configuration file.</p>
</li>
</ul>
</li>
<li>
<p>If you have an initial ticket but still cannot connect:</p>
<ul style="list-style-type: disc;">
<li>
<p>After trying to connect, check for a service ticket.</p>
</li>
<li>
<p>Check that the <code class="codeph">sqlnet.ora</code> file on the database server side has a service name that corresponds to a service known by Kerberos.</p>
</li>
<li>
<p>Check that the clocks on all systems involved are set to times that are within a few minutes of each other or change the <code class="codeph">SQLNET.KERBEROS5_CLOCKSKEW</code> parameter in the <code class="codeph">sqlnet.ora</code> file.</p>
</li>
</ul>
</li>
<li>
<p>If you have a service ticket and you still cannot connect:</p>
<ul style="list-style-type: disc;">
<li>
<p>Check the clocks on the client and database server.</p>
</li>
<li>
<p>Check that the <code class="codeph">v5srvtab</code> file exists in the correct location and is readable by Oracle. Remember to set the <code class="codeph">sqlnet.ora</code> parameters.</p>
</li>
<li>
<p>Check that the <code class="codeph">v5srvtab</code> file has been generated for the service named in the <code class="codeph">sqlnet.ora</code> file on the database server side.</p>
</li>
</ul>
</li>
<li>
<p>If everything seems to work fine, but then you issue another query and it fails:</p>
<ul style="list-style-type: disc;">
<li>
<p>Check that the initial ticket is forwardable. You must have obtained the initial ticket by running the <code class="codeph">okinit</code> utility.</p>
</li>
<li>
<p>Check the expiration date on the credentials. If the credentials have expired, then close the connection and run <code class="codeph">okinit</code> to get a new initial ticket.</p>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3670">
<tr>
<td class="cellalignment3684">
<table class="cellalignment3675">
<tr>
<td class="cellalignment3674"><a href="asotools.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3674"><a href="asossl.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3686">
<table class="cellalignment3673">
<tr>
<td class="cellalignment3674"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3674"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3674"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3674"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3674"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3674"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>