<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-2535"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Security%20Considerations%20for%20Oracle%20Data%20Redaction"></a><title>Security Considerations for Oracle Data Redaction</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="Oracle provides a set of guidelines for using Oracle Data Redaction."/>
<meta name="keywords" content="guidelines, ad hoc query attacks and Data Redaction, intruders, ad hoc query attacks, exhaustive SQL queries and inference and Data Redaction, application context value handling by Data Redaction policies, DDL statements and Data Redaction policies, day-to-day operations and Data Redaction, ORA-00979, not a GROUP BY expression error, Oracle Database Vault, using with Data Redaction, EXEMPT REDACTION POLICY privilege, using with Database Vault, administrative access to policies, restricting, SYS user, Data Redaction policies, Oracle Data Redaction, SYS schema objects, SYSTEM user, SYSTEM schema objects, SYS_CONTEXT function, SYS_CONTEXT values and Data Redaction, materialized views, Data Redaction guideline, materialized views and Data Redaction, recycle bin, Data Redaction policies and, recycle bin and Data Redaction"/>
<meta name="dcterms.created" content="2017-06-05T10:46:18Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Advanced Security Guide"/>
<meta name="dcterms.identifier" content="E50333-18"/>
<meta name="dcterms.isVersionOf" content="ASOAG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="oracle-data-redaction-use-with-oracle-database-features.htm" title="Previous" type="text/html"/>
<link rel="Next" href="glossary.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E50333-18.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-1D2850E8-2485-4C3D-BBF2-75E2CFAC3F37"></a> <span id="PAGE" style="display:none;">19/21</span> <!-- End Header -->
<a id="ASOAG10498"></a>
<h1 class="sect1"><span class="enumeration_chapter">13</span> Security Considerations for Oracle Data Redaction</h1>
<div>
<p>Oracle provides a set of guidelines for using Oracle Data Redaction.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="security-considerations-for-using-oracle-data-redaction.htm#GUID-8AAB65A3-56F7-48A2-8CD6-5D9D556835AA" title="It is important to understand general guidelines for using Oracle Data Redaction.">Oracle Data Redaction General Usage Guidelines</a></p>
</li>
<li>
<p><a href="security-considerations-for-using-oracle-data-redaction.htm#GUID-49898C42-C978-4872-A3B5-EE58AA0698D2" title="You can restrict the list of users who can create, view and edit Data Redaction policies.">Restriction of Administrative Access to Oracle Data Redaction Policies</a></p>
</li>
<li>
<p><a href="security-considerations-for-using-oracle-data-redaction.htm#GUID-5DF99B37-7BF1-4ED7-8483-9E293588D772" title="Both users SYS and SYSTEM automatically have the EXEMPT REDACTION POLICY system privilege.">How Oracle Data Redaction Affects the SYS, SYSTEM, and Default Schemas</a></p>
</li>
<li>
<p><a href="security-considerations-for-using-oracle-data-redaction.htm#GUID-AA3AF99C-7A20-4333-981B-7088B5ECB05A" title="Be careful when writing a policy expression that depends on a SYS_CONTEXT attribute that is populated by an application.">Policy Expressions That Use SYS_CONTEXT Attributes</a></p>
</li>
<li>
<p><a href="security-considerations-for-using-oracle-data-redaction.htm#GUID-38318C24-8327-48B4-A5DD-D8382E562FD8" title="You can create Oracle Data Redaction policies on materialized views and on their base tables.">Oracle Data Redaction Policies on Materialized Views</a></p>
</li>
<li>
<p><a href="security-considerations-for-using-oracle-data-redaction.htm#GUID-667D33F8-3B01-48A2-A23B-A0AEC9F04820" title="You should check if the recycle bin is enabled before you drop Oracle Data Redaction policies.">Dropped Oracle Data Redaction Policies When the Recycle Bin Is Enabled</a></p>
</li>
</ul>
</div>
<a id="ASOAG10535"></a>
<div class="props_rev_3"><a id="GUID-8AAB65A3-56F7-48A2-8CD6-5D9D556835AA"></a>
<h2 class="sect2">Oracle Data Redaction General Usage Guidelines</h2>
<div>
<p>It is important to understand general guidelines for using Oracle Data Redaction.</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle Data Redaction is not intended to protect against attacks by regular and privileged database users who run ad hoc queries directly against the database.</p>
</li>
<li>
<p>Oracle Data Redaction is not intended to protect against users who run ad hoc SQL queries that attempt to determine the actual values by <a href="glossary.htm#GUID-AB8FF26D-8152-4E11-8C0B-4AC74B58C410"><span class="xrefglossterm">inference</span></a>.</p>
</li>
<li>
<p>Oracle Data Redaction relies on the database and application context values. For applications, it is the responsibility of the application to properly initialize the context value.</p>
</li>
<li>
<p>Oracle Data Redaction is not enforced for users who are logged in using the <code class="codeph">SYSDBA</code> administrative privilege.</p>
</li>
<li>
<p>Certain DDL statements that attempt to copy the <a href="glossary.htm#GUID-82E2FC6D-718F-4367-9D7E-DC130F360FC3"><span class="xrefglossterm">actual data</span></a> out from under the control of a data redaction policy (that is, <code class="codeph">CREATE TABLE AS SELECT</code>, <code class="codeph">INSERT AS SELECT</code>) are blocked by default, but you can disable this behavior by granting the user the <code class="codeph">EXEMPT REDACTION POLICY</code> system privilege.</p>
</li>
<li>
<p>Oracle Data Redaction does not affect day-to-day database operations, such as backup and recovery, Oracle Data Pump exports and imports, Oracle Data Guard operations, and replication.</p>
</li>
<li>
<p>Do not include any redacted columns in a SQL expression that is used in a <code class="codeph">GROUP BY</code> clause in a SQL statement. Oracle does not support this behavior, and raises an <code class="codeph">ORA-00979: not a GROUP BY expression</code> error. This happens because internally the expression in the <code class="codeph">SELECT</code> list must be modified by Data Redaction, but this causes it to no longer be found when it comes time to process the <code class="codeph">GROUP BY</code> clause (which is currently not updated by Data Redaction) leading to this unintended error message.</p>
</li>
</ul>
</div>
</div>
<a id="ASOAG748"></a>
<div class="props_rev_3"><a id="GUID-49898C42-C978-4872-A3B5-EE58AA0698D2"></a>
<h2 class="sect2">Restriction of Administrative Access to Oracle Data Redaction Policies</h2>
<div>
<p>You can restrict the list of users who can create, view and edit Data Redaction policies.</p>
<p>To accomplish this, you can limit who has the <code class="codeph">EXECUTE</code> privilege on the <code class="codeph">DBMS_REDACT</code> package and by limiting who has the <code class="codeph">SELECT</code> privilege on the <code class="codeph">REDACTION_POLICIES</code> and <code class="codeph">REDACTION_COLUMNS</code> views.</p>
<p>You also can restrict who is exempted from redaction by limiting the <code class="codeph">EXEMPT REDACTION POLICY</code> privilege. If you use Oracle Database Vault to restrict privileged user access, then you can use realms to restrict granting of <code class="codeph">EXEMPT REDACTION POLICY</code>.</p>
<div class="infoboxnotealso" id="GUID-49898C42-C978-4872-A3B5-EE58AA0698D2__GUID-ED78DD0C-BDAD-4457-82CA-D30760AB5C95">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-ADFB7DCD-8543-400D-95A3-AA0976E75084" title="You can exempt users from having Oracle Data Redaction policies applied to the data they access.">Exemption of Users from Oracle Data Redaction Policies</a></p>
</li>
<li>
<p><a href="oracle-data-redaction-use-with-oracle-database-features.htm#GUID-679EACAA-49D1-410E-B8BD-BF6C3DCDC884" title="You can use Oracle Data Redaction in an Oracle Database Vault environment.">Oracle Data Redaction and Oracle Database Vault</a></p>
</li>
<li>
<p><a class="olink DVADM001" target="_blank" href="../DVADM/dvintro.htm#DVADM001"><span><cite>Oracle Database Vault Administrator&rsquo;s Guide</cite></span></a> for more information about Oracle Database Vault</p>
</li>
</ul>
</div>
</div>
</div>
<a id="ASOAG360"></a>
<div class="props_rev_3"><a id="GUID-5DF99B37-7BF1-4ED7-8483-9E293588D772"></a>
<h2 class="sect2">How Oracle Data Redaction Affects the SYS, SYSTEM, and Default Schemas</h2>
<div>
<p>Both users <code class="codeph">SYS</code> and <code class="codeph">SYSTEM</code> automatically have the <code class="codeph">EXEMPT REDACTION POLICY</code> system privilege.</p>
<p><code class="codeph">SYSTEM</code> has the <code class="codeph">EXP_FULL_DATABASE</code> role, which includes the <code class="codeph">EXEMPT REDACTION POLICY</code> system privilege.</p>
<p>This means that the <code class="codeph">SYS</code> and <code class="codeph">SYSTEM</code> users can always bypass any existing Oracle Data Redaction policies, and will always be able to view data from tables (or views) that have Data Redaction policies defined on them.</p>
<p>Follow these guidelines:</p>
<ul style="list-style-type: disc;">
<li>
<p>Do not create Data Redaction policies on the default Oracle Database schemas, including the <code class="codeph">SYS</code> and <code class="codeph">SYSTEM</code> schemas.</p>
</li>
<li>
<p>Be aware that granting the <code class="codeph">EXEMPT DATA REDACTION</code> system privilege to additional roles may enable users to bypass Oracle Data Redaction, because the grantee role may have been granted to additional roles.</p>
</li>
<li>
<p>Do not revoke the <code class="codeph">EXEMPT DATA REDACTION</code> system privilege from the roles that it was granted to by default.</p>
</li>
</ul>
</div>
</div>
<a id="ASOAG10536"></a>
<div class="props_rev_3"><a id="GUID-AA3AF99C-7A20-4333-981B-7088B5ECB05A"></a>
<h2 class="sect2">Policy Expressions That Use SYS_CONTEXT Attributes</h2>
<div>
<p>Be careful when writing a policy expression that depends on a <code class="codeph">SYS_CONTEXT</code> attribute that is populated by an application.</p>
<p>The application might not always populate that attribute.</p>
<p>If the user somehow connects directly (rather than through the application), then the <code class="codeph">SYS_CONTEXT</code> attribute would not have been populated. If you do not handle this <code class="codeph">NULL</code> scenario in your policy expression, you could unintentionally reveal <a href="glossary.htm#GUID-82E2FC6D-718F-4367-9D7E-DC130F360FC3"><span class="xrefglossterm">actual data</span></a> to the querying user.</p>
<p>For example, suppose you wanted to create a policy expression that intends to redact the query results for everyone except users who have the client identifier value of <code class="codeph">SUPERVISOR</code>. The following expression unintentionally enables querying users who have <code class="codeph">NULL</code> as the value for their <code class="codeph">CLIENT_IDENTIFIER</code> to see the real data:</p>
<pre dir="ltr">SYS_CONTEXT(&#39;USERENV&#39;, &#39;CLIENT_IDENTIFIER&#39;) IS NOT &#39;SUPERVISOR&#39;
</pre>
<p>A more rigorous policy expression redacts the result of the query if the client identifier is not set, that is, it has a <code class="codeph">NULL</code> value.</p>
<pre dir="ltr">SYS_CONTEXT(&#39;USERENV&#39;, &#39;CLIENT_IDENTIFIER&#39;) IS NOT &#39;SUPERVISOR&#39; OR IS NULL
</pre>
<p>Remember that in SQL, comparisons with <code class="codeph">NULL</code> are undefined, and are thus <code class="codeph">FALSE</code>, but redaction only takes place when the policy expression evaluates to <code class="codeph">TRUE</code>.</p>
</div>
</div>
<a id="ASOAG10537"></a>
<div class="props_rev_3"><a id="GUID-38318C24-8327-48B4-A5DD-D8382E562FD8"></a>
<h2 class="sect2">Oracle Data Redaction Policies on Materialized Views</h2>
<div>
<p>You can create Oracle Data Redaction policies on materialized views and on their base tables.</p>
<p>However, ensure that the creator of the materialized view, or the user who performs the refresh of the materialized view, is not blocked by any Data Redaction policies. In other words, the user performing the materialized view creation or refresh operations should be exempt from the Data Redaction policy. As a best practice, when you create a new materalized view, treat it as a copy of the actual table, and then create a separate Data Redaction policy to protect it.</p>
</div>
</div>
<a id="ASOAG10538"></a>
<div class="props_rev_3"><a id="GUID-667D33F8-3B01-48A2-A23B-A0AEC9F04820"></a>
<h2 class="sect2">Dropped Oracle Data Redaction Policies When the Recycle Bin Is Enabled</h2>
<div>
<p>You should check if the recycle bin is enabled before you drop Oracle Data Redaction policies.</p>
<p>If you drop a table or view that has an Oracle Data Redaction policy defined on it when the recycle bin feature is enabled, and if you query the <code class="codeph">REDACTION_COLUMNS</code> or <code class="codeph">REDACTION_POLICIES</code> data dictionary views before you purge the recycle bin, then you will see object names such as <code class="codeph">BIN$...</code> (for example, <code class="codeph">BIN$1Xu5PSW5VaPgQxGS5AoAEA==$0</code>).</p>
<p>This is normal behavior. These policies are removed when you purge the recycle bin.</p>
<p>To find if the recycle bin is enabled, you can run the <code class="codeph">SHOW PARAMETER RECYCLEBIN</code> command in SQL*Plus.</p>
<div class="infoboxnotealso" id="GUID-667D33F8-3B01-48A2-A23B-A0AEC9F04820__GUID-3D4F9815-5C69-4F78-B9FC-A83916A3D891">
<p class="notep1">See Also:</p>
<p><a class="olink ADMIN11682" target="_blank" href="../ADMIN/tables.htm#ADMIN11682"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a> for information about purging objects from the recycle bin</p>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5372">
<tr>
<td class="cellalignment5379">
<table class="cellalignment5377">
<tr>
<td class="cellalignment5376"><a href="oracle-data-redaction-use-with-oracle-database-features.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5376"><a href="glossary.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5381">
<table class="cellalignment5375">
<tr>
<td class="cellalignment5376"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5376"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5376"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5376"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5376"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5376"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>