<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-2504"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Configuring%20Oracle%20Data%20Redaction%20Policies"></a><title>Configuring Oracle Data Redaction Policies</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="An Oracle Data Redaction policy defines how to redact data in a column based on the table column type and the type of redaction you want to use."/>
<meta name="keywords" content="Oracle Data Redaction policies, about, Oracle Data Redaction, privileges for creating policies, creating, procedure, DBMS_REDACT.ADD_POLICY procedure, using, general syntax, filtering users, expressions, by user environment, by database role, SYS_CONTEXT function, SYS_SESSION_ROLES namespace used in Data Redaction, SYS_SESSION_ROLES SYS_CONTEXT namespace, Data Redaction, database roles, Data Redaction policies, by OLS label dominance, OLS_LABEL_DOMINATES public function, APEX_UTIL.GET_SESSION_STATE function, Oracle Data Redaction policies (V public function), V public function (APEX_UTIL.GET_SESSION_STATE function), Data Redaction policies, NV public function (APEX_UTIL.GET_NUMERIC_SESSION_STATE function), Data Redaction policies, APEX_UTIL.GET_NUMERIC_SESSION_STATE function, Oracle Data Redaction policies (NV public function), by Application Express session state, Oracle Application Express, filtering using by session state in Data Redaction policies, no filtering, full data redaction, creating policy for, syntax, examples, modifying default value, DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES procedure, Oracle Data Redaction partial redaction, creating policies for, partial data redaction, formats, fixed character, example using fixed character format, character types, policies for, example using character data type, number data types, example using number data type, data-time data types, example using data-time data type, regular expression data redaction, creating policies for, formats, creating policies for, example, custom, creating policies for, settings for, example of custom, random data redaction, random data redaction, about, no data redaction, exempting users from, altering, DBMS_REDACT.ALTER_POLICY procedure, parameters required for various actions, redacting multiple columns in one policy, disabling, DBMS_REDACT.DISABLE_POLICY, enabling, DBMS_REDACT.ENABLE_POLICY, dropping, DBMS_REDACT.DROP_POLICY, building reports, reports, based Data Redaction policies, views, finding information about"/>
<meta name="dcterms.created" content="2017-06-05T10:46:18Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Advanced Security Guide"/>
<meta name="dcterms.identifier" content="E50333-18"/>
<meta name="dcterms.isVersionOf" content="ASOAG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="oracle-data-redaction-features-and-capabilities.htm" title="Previous" type="text/html"/>
<link rel="Next" href="using-oracle-data-redaction-in-oracle-enterprise-manager.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E50333-18.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-78C0ECD1-388C-4E12-87C3-32FBC05F294D"></a> <span id="PAGE" style="display:none;">16/21</span> <!-- End Header -->
<a id="ASOAG10490"></a>
<h1 class="sect1"><span class="enumeration_chapter">10</span> Configuring Oracle Data Redaction Policies</h1>
<div>
<p>An Oracle Data Redaction policy defines how to redact data in a column based on the table column type and the type of redaction you want to use.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-78CBB015-A3C3-42B9-8EFA-315C4789C749" title="An Oracle Data Redaction policy defines the conditions in which redaction must occur for a table or view.">About Oracle Data Redaction Policies</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-29569FAA-E317-4266-A960-7DB92895663F" title="Because data redaction involves the protection of highly sensitive data, only trusted users should create Oracle Data Redaction policies.">Who Can Create Oracle Data Redaction Policies?</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-D41C508C-0DCC-4A6F-89C0-C85584BF4020" title="Before you create a Oracle Data Redaction policy, you should plan the data redaction policy that best suits your site&rsquo;s needs.">Planning an Oracle Data Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-D32FC6CA-A3B5-47EE-B288-52F1124F9FBD" title="To create a Data Redaction policy, you must use the DBMS_REDACT.ADD_POLICY procedure.">General Syntax of the DBMS_REDACT.ADD_POLICY Procedure</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-CF59A02C-1DE8-439B-BC1C-7235915C6D23" title="The expression parameter in the DBMS_REDACT.ADD_POLICY procedure specifies the conditions to which the policy applies.">Using Expressions to Define Conditions for Data Redaction Policies</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-E3725E9D-2798-48D5-B87B-BE8A02E73941" title="You can create a full redaction policy to redact all contents in a data column, and optionally, you can alter the default full redaction value.">Creating a Full Redaction Policy and Altering the Full Redaction Value</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-42B218FF-9082-4149-9D76-961B6D6417BB" title="In partial data redaction, you can redact portions of data, and for different kinds of data types.">Creating a Partial Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-1C20F828-2922-4846-8536-CC667B65FD01" title="A regular expression-based redaction policy enables you to redact data based on a search-and-replace model.">Creating a Regular Expression-Based Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-E697C12B-1121-4C3D-B895-1587AF4CA218" title="A random redaction policy presents redacted data as randomly generated values, such as Ukjsl32[[]]]s.">Creating a Random Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-1EC4068F-7404-437F-BFFE-87917F2619DB" title="You can create policies that use no redaction at all, for when you want to test the policy in a development environment.">Creating a Policy That Uses No Redaction</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-ADFB7DCD-8543-400D-95A3-AA0976E75084" title="You can exempt users from having Oracle Data Redaction policies applied to the data they access.">Exemption of Users from Oracle Data Redaction Policies</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-205D50FF-2210-4957-B06B-EF82D734C26A" title="The DBMS_REDACT.ALTER_POLICY procedure enables you to modify Oracle Data Redaction policies.">Altering an Oracle Data Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-1E236704-872D-4FCB-A46E-C5014B53E9DE" title="You can redact more than one column in a Data Redaction policy.">Redacting Multiple Columns</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-58FD64FD-71C5-429A-9A4F-14D63AE2E02A" title="You can use the DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES procedure to alter the default full data redaction value.">Altering the Default Full Data Redaction Value</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-6DBB6BA3-28C8-499F-A603-4DFAC18E6B41" title="After you have created an Oracle Data Redaction policy, you can disable it and then reenable it as necessary.">Disabling and Enabling an Oracle Data Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-F87B88B2-651E-4AF4-8E01-7B8A629A3D8F" title="The DBMS_REDACT.DROP_POLICY procedure drops Oracle Data Redaction policies.">Dropping an Oracle Data Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-DE28EFBA-73F2-416E-BBE6-F22AF080DC74" title="SQL expressions can be used to build reports based on columns that have Oracle Data Redaction policies defined on them.">Tutorial: SQL Expressions to Build Reports with Redacted Values</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-16B2C464-83C6-4341-BE13-12F68695B65C" title="Oracle Database provides data dictionary views that list information about Data Redaction policies.">Oracle Data Redaction Policy Data Dictionary Views</a></p>
</li>
</ul>
</div>
<a id="ASOAG420"></a><a id="ASOAG607"></a>
<div class="props_rev_3"><a id="GUID-78CBB015-A3C3-42B9-8EFA-315C4789C749"></a>
<h2 class="sect2">About Oracle Data Redaction Policies</h2>
<div>
<p>An Oracle Data Redaction policy defines the conditions in which redaction must occur for a table or view.</p>
<p>A Data Redaction policy has the following characteristics:</p>
<ul style="list-style-type: disc;">
<li>
<p>The Data Redaction policy defines the following: What kind of redaction to perform, how the redaction should occur, and when the redaction takes place. Oracle Database performs the redaction at execution time, just before the data is returned to the application.</p>
</li>
<li>
<p>A Data Redaction policy can fully redact values, partially redact values, or randomly redact values. In addition, you can define a Data Redaction policy to not redact any data at all, for when you want to test your policies in a test environment.</p>
</li>
<li>
<p>A Data Redaction policy can be defined with a policy expression which allows for different application users to be presented with either redacted data or <a href="glossary.htm#GUID-82E2FC6D-718F-4367-9D7E-DC130F360FC3"><span class="xrefglossterm">actual data</span></a>, based on whether the policy expression returns <code class="codeph">TRUE</code> or <code class="codeph">FALSE</code>. Redaction takes place when the boolean result of evaluating the policy expression is <code class="codeph">TRUE</code>. For security reasons, the functions and operators that can be used in the policy expression are limited to <code class="codeph">SYS_CONTEXT</code> and a few others. User-created functions are not allowed. Policy expressions can make use of the <code class="codeph">SYS_SESSION_ROLES</code> namespace with the <code class="codeph">SYS_CONTEXT</code> function to check for enabled roles.</p>
</li>
</ul>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-78CBB015-A3C3-42B9-8EFA-315C4789C749__CACJHJFJ" title="DBMS_REDACT PL/SQL Package Procedures">Table 10-1</a> lists the procedures in the <code class="codeph">DBMS_REDACT</code> package.</p>
<div class="tblformal" id="GUID-78CBB015-A3C3-42B9-8EFA-315C4789C749__CACJHJFJ">
<p class="titleintable">Table 10-1 DBMS_REDACT Procedures</p>
<table class="cellalignment5391" title="DBMS_REDACT Procedures" summary="DBMS_REDACT PL/SQL Package Procedures">
<thead>
<tr class="cellalignment5373">
<th class="cellalignment5386" id="d30126e325">Procedure</th>
<th class="cellalignment5392" id="d30126e328">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5373">
<td class="cellalignment5390" id="d30126e333" headers="d30126e325">
<p><code class="codeph">DBMS_REDACT.ADD_POLICY</code></p>
</td>
<td class="cellalignment5393" headers="d30126e333 d30126e328">
<p>Adds a Data Redaction policy to a table or view</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5390" id="d30126e341" headers="d30126e325">
<p><code class="codeph">DBMS_REDACT.ALTER_POLICY</code></p>
</td>
<td class="cellalignment5393" headers="d30126e341 d30126e328">
<p>Modifies a Data Redaction policy</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5390" id="d30126e350" headers="d30126e325">
<p><code class="codeph">DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES</code></p>
</td>
<td class="cellalignment5393" headers="d30126e350 d30126e328">
<p>Globally updates the full redaction value for a given data type. You must restart the database instance before the updated values can be used.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5390" id="d30126e358" headers="d30126e325">
<p><code class="codeph">DBMS_REDACT.ENABLE_POLICY</code></p>
</td>
<td class="cellalignment5393" headers="d30126e358 d30126e328">
<p>Enables a Data Redaction policy</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5390" id="d30126e366" headers="d30126e325">
<p><code class="codeph">DBMS_REDACT.DISABLE_POLICY</code></p>
</td>
<td class="cellalignment5393" headers="d30126e366 d30126e328">
<p>Disables a Data Redaction policy</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5390" id="d30126e374" headers="d30126e325">
<p><code class="codeph">DBMS_REDACT.DROP_POLICY</code></p>
</td>
<td class="cellalignment5393" headers="d30126e374 d30126e328">
<p>Drops a Data Redaction policy</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso" id="GUID-78CBB015-A3C3-42B9-8EFA-315C4789C749__GUID-8ABF7596-FE7D-4633-BEC1-7B95A1E4BE35">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink ARPLS73800" target="_blank" href="../ARPLS/d_redact.htm#ARPLS73800"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for detailed information about the <code class="codeph">DBMS_REDACT</code> PL/SQL package</p>
</li>
<li>
<p><a href="using-oracle-data-redaction-in-oracle-enterprise-manager.htm#GUID-8267183A-1778-428E-9B6E-AB06D8CC7EAB" title="Oracle Enterprise Manager Cloud Control (Cloud Control) enables you to manage Oracle Data Redaction policies and formats.">Using Oracle Data Redaction in Oracle Enterprise Manager</a>for information about using Oracle Enterprise Manager Cloud Control to create and manage Oracle Data Redaction policies and formats</p>
</li>
</ul>
</div>
</div>
</div>
<a id="ASOAG490"></a>
<div class="props_rev_3"><a id="GUID-29569FAA-E317-4266-A960-7DB92895663F"></a>
<h2 class="sect2">Who Can Create Oracle Data Redaction Policies?</h2>
<div>
<p>Because data redaction involves the protection of highly sensitive data, only trusted users should create Oracle Data Redaction policies.</p>
<p>To create redaction policies, you must have the <code class="codeph">EXECUTE</code> privilege on the <code class="codeph">DBMS_REDACT</code> PL/SQL package. To find the privileges that a user has been granted, you can query the <code class="codeph">DBA_SYS_PRIVS</code> data dictionary view.</p>
<p>You do not need any privileges to access the underlying tables or views that will be protected by the policy.</p>
</div>
</div>
<a id="ASOAG421"></a>
<div class="props_rev_3"><a id="GUID-D41C508C-0DCC-4A6F-89C0-C85584BF4020"></a>
<h2 class="sect2">Planning an Oracle Data Redaction Policy</h2>
<div>
<p>Before you create a Oracle Data Redaction policy, you should plan the data redaction policy that best suits your site&rsquo;s needs.</p>
<div class="section">
<ol>
<li>
<p>Ensure that you have been granted the <code class="codeph">EXECUTE</code> privilege on the <code class="codeph">DBMS_REDACT</code> PL/SQL package.</p>
</li>
<li>
<p>Determine the data type of the table or view column that you want to redact.</p>
</li>
<li>
<p>Ensure that this column is not used in an Oracle Virtual Private Database (VPD) row filtering condition. That is, it must not be part of the VPD predicate generated by the VPD policy function.</p>
</li>
<li>
<p>Decide on the type of redaction that you want to perform: full, random, partial, regular expressions, or none.</p>
</li>
<li>
<p>Decide which users to apply the Data Redaction policy to.</p>
</li>
<li>
<p>Based on this information, create the Data Redaction policy by using the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure.</p>
</li>
<li>
<p>Configure the policy to have additional columns to be redacted, as described in <a href="configuring-oracle-data-redaction-policies.htm#GUID-1E236704-872D-4FCB-A46E-C5014B53E9DE" title="You can redact more than one column in a Data Redaction policy.">Redacting Multiple Columns</a>.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p>After you create the Data Redaction policy, it is automatically enabled and ready to redact data.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG352"></a>
<div class="props_rev_3"><a id="GUID-D32FC6CA-A3B5-47EE-B288-52F1124F9FBD"></a>
<h2 class="sect2">General Syntax of the DBMS_REDACT.ADD_POLICY Procedure</h2>
<div>
<p>To create a Data Redaction policy, you must use the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure.</p>
<div class="section">
<p>The complete syntax for the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure is as follows:</p>
<pre dir="ltr">DBMS_REDACT.ADD_POLICY (
 object_schema               IN VARCHAR2 := NULL,
 object_name                 IN VARCHAR2 := NULL,
 policy_name                 IN VARCHAR2, 
 policy_description          IN VARCHAR2 := NULL,
 column_name                 IN VARCHAR2 := NULL,
 column_description          IN VARCHAR2 := NULL,
 function_type               IN BINARY_INTEGER := DBMS_REDACT.FULL,
 function_parameters         IN VARCHAR2 := NULL,
 expression                  IN VARCHAR2,
 enable                      IN BOOLEAN := TRUE,
 regexp_pattern              IN VARCHAR2 := NULL,
 regexp_replace_string       IN VARCHAR2 := NULL,
 regexp_position             IN BINARY_INTEGER :=1,
 regexp_occurrence           IN BINARY_INTEGER :=0,
 regexp_match_parameter      IN VARCHAR2 := NULL);
</pre>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">object_schema</code>: Specifies the schema of the object on which the Data Redaction policy will be applied. If you omit this setting (or enter <code class="codeph">NULL</code>), then Oracle Database uses the current user&#39;s name. Be aware that the meaning of &#34;current user&#34; here can change, depending on where you invoke the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure.</p>
<p>For example, suppose user <code class="codeph">mpike</code> grants user <code class="codeph">fbrown</code> the <code class="codeph">EXECUTE</code> privilege on a definer&#39;s rights PL/SQL package called <code class="codeph">mpike.protect_data</code> in <code class="codeph">mpike</code>&#39;s schema. From within this package, <code class="codeph">mpike</code> has coded a procedure called <code class="codeph">protect_cust_data</code>, which invokes the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure. User <code class="codeph">mpike</code> has set the <code class="codeph">object_schema</code> parameter to <code class="codeph">NULL</code>.</p>
<p>When <code class="codeph">fbrown</code> invokes the <code class="codeph">protect_cust_data</code> procedure in the <code class="codeph">mpike.protect_data</code> package, Oracle Database attempts to define the Data Redaction policy around the object <code class="codeph">cust_data</code> in the <code class="codeph">mpike</code> schema, not the <code class="codeph">cust_data</code> object in the schema that belongs to <code class="codeph">fbrown</code>.</p>
</li>
<li>
<p><code class="codeph">object_name</code>: Specifies the name of the table or view to which the Data Redaction policy applies.</p>
</li>
<li>
<p><code class="codeph">policy_name</code>: Specifies the name of the policy to be created. Ensure that this name is unique in the database instance. You can find a list of existing Data Redaction policies by querying the <code class="codeph">POLICY_NAME</code> column of the <code class="codeph">REDACTION_POLICIES</code> data dictionary view.</p>
</li>
<li>
<p><code class="codeph">policy_description</code>: Specifies a brief description of the purpose of the policy.</p>
</li>
<li>
<p><code class="codeph">column_name</code>: Specifies the column whose data you want to redact. Note the following:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">You can apply the Data Redaction policy to multiple columns.</span> If you want to apply the Data Redaction policy to multiple columns, then after you use <code class="codeph">DBMS_REDACT.ADD_POLICY</code> to create the policy, run the <code class="codeph">DBMS_REDACT.ALTER_POLICY</code> procedure as many times as necessary to add each of the remaining required columns to the policy. See <a href="configuring-oracle-data-redaction-policies.htm#GUID-205D50FF-2210-4957-B06B-EF82D734C26A" title="The DBMS_REDACT.ALTER_POLICY procedure enables you to modify Oracle Data Redaction policies.">Altering an Oracle Data Redaction Policy</a>.</p>
</li>
<li>
<p><span class="bold">Only one policy can be defined on a table or view.</span> You can, however, create a new view on the table, and by defining a second redaction policy on this new view, you can choose to redact the columns in a different way when a query is issued against this new view. When deciding how to redact a given column, Oracle Database uses the policy of the earliest view in a view chain.</p>
</li>
<li>
<p><span class="bold">If you do not specify a column (for example, by entering NULL), then no columns are redacted by the policy.</span> This enables you to create your policies so that they are in place, and then later on, you can add the column specification when you are ready.</p>
</li>
<li>
<p><span class="bold">Do not use a column that is currently used in an Oracle Virtual Private Database (VPD) row filtering condition.</span> In other words, the column should not be part of the VPD predicate generated by the VPD policy function. (See <a href="oracle-data-redaction-use-with-oracle-database-features.htm#GUID-005796B2-304C-47AD-9655-DE200F3CEC99" title="Oracle Data Redaction does not affect Oracle Virtual Private Database policies because the VPD inline view, which contains the VPD predicate, acts on actual values.">Oracle Data Redaction and Oracle Virtual Private Database</a> for more information about using Data Redaction with VPD.)</p>
</li>
<li>
<p><span class="bold">You cannot define a Data Redaction policy on a virtual column.</span> In addition, you cannot define a Data Redaction policy on a column that is involved in the SQL expression of any virtual column.</p>
</li>
</ul>
</li>
<li>
<p><code class="codeph">column_description</code>: Specifies a brief description of the column that you are redacting.</p>
</li>
<li>
<p><code class="codeph">function_type</code>: Specifies a function that sets the type of redaction. See the following sections for more information:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-E0CF7672-7FAC-4134-8A5E-AF0C65FD2A21" title="The DBMS_REDACT.ADD_POLICY procedure enables you to create a full redaction policy.">Syntax for Creating a Full Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-1CEB4B41-7942-4D1A-A21E-CEB70445C2C5" title="The DBMS_REDACT.ADD_POLICY statement enables you to create policies that redact specific parts of the data returned to the application.">Syntax for Creating a Partial Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-071193E2-21C5-4C73-A7BA-6DA4104FD66A" title="The regexp_* parameters of the DBMS_REDACT.ADD_POLICY procedure can create a regular expression-based redaction policy.">Syntax for Creating a Regular Expression-Based Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-24C5D8B5-C6BC-40FB-9C68-126835AB03EA" title="A random redaction policy presents the redacted data to the querying application user as randomly generated values, based on the column data type.">Syntax for Creating a Random Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-6A3E8299-77E0-49C3-9C38-631517DC3CDA" title="The None redaction type option can be used to test the internal operation of redaction policies.">Syntax for Creating a Policy with No Redaction</a></p>
</li>
</ul>
<p>If you omit the <code class="codeph">function_type</code> parameter, then the default redaction <code class="codeph">function_type</code> setting is <code class="codeph">DBMS_REDACT.FULL</code>.</p>
</li>
<li>
<p><code class="codeph">function_parameters</code>: Specifies how the column redaction should appear for partial redaction. See <a href="configuring-oracle-data-redaction-policies.htm#GUID-1CEB4B41-7942-4D1A-A21E-CEB70445C2C5" title="The DBMS_REDACT.ADD_POLICY statement enables you to create policies that redact specific parts of the data returned to the application.">Syntax for Creating a Partial Redaction Policy</a>.</p>
</li>
<li>
<p><code class="codeph">expression</code>: Specifies a Boolean SQL expression to determine how the policy is applied. Redaction takes place only if this policy expression evaluates to <code class="codeph">TRUE</code>. See <a href="configuring-oracle-data-redaction-policies.htm#GUID-CF59A02C-1DE8-439B-BC1C-7235915C6D23" title="The expression parameter in the DBMS_REDACT.ADD_POLICY procedure specifies the conditions to which the policy applies.">Using Expressions to Define Conditions for Data Redaction Policies</a>.</p>
</li>
<li>
<p><code class="codeph">enable</code>: When set to <code class="codeph">TRUE</code>, enables the policy upon creation. When set to <code class="codeph">FALSE</code>, it creates the policy as a disabled policy. The default is <code class="codeph">TRUE</code>. After you create the policy, you can disable or enable it. See the following sections:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-A499FA8B-00E1-4023-9505-4414C7CF56C1" title="The DBMS_REDACT.DISABLE_POLICY procedure disables Oracle Data Redaction policies.">Disabling an Oracle Data Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-48037790-6EA7-4688-990F-C5348B11235A" title="The DBMS_REDACT.ENABLE_POLICY procedure enables Oracle Data Redaction policies.">Enabling an Oracle Data Redaction Policy</a></p>
</li>
</ul>
</li>
<li>
<p><code class="codeph">regexp_pattern</code>, <code class="codeph">regexp_replace_string</code>, <code class="codeph">regexp_position</code>, <code class="codeph">regexp_position</code>, <code class="codeph">regexp_occurrence</code>, <code class="codeph">regexp_match_parameter</code>: Enable you to use regular expressions to redact data, either fully or partially. If the <code class="codeph">regexp_pattern</code> does not match anything in the <a href="glossary.htm#GUID-82E2FC6D-718F-4367-9D7E-DC130F360FC3"><span class="xrefglossterm">actual data</span></a>, then full redaction will take place, so be careful when specifying the <code class="codeph">regexp_pattern</code>. Ensure that all of the values in the column conform to the semantics of the regular expression you are using. See <a href="configuring-oracle-data-redaction-policies.htm#GUID-071193E2-21C5-4C73-A7BA-6DA4104FD66A" title="The regexp_* parameters of the DBMS_REDACT.ADD_POLICY procedure can create a regular expression-based redaction policy.">Syntax for Creating a Regular Expression-Based Redaction Policy</a> for more information.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG10582"></a>
<div class="props_rev_3"><a id="GUID-CF59A02C-1DE8-439B-BC1C-7235915C6D23"></a>
<h2 class="sect2">Using Expressions to Define Conditions for Data Redaction Policies</h2>
<div>
<p>The <code class="codeph">expression</code> parameter in the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure specifies the conditions to which the policy applies.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-D122477F-6D46-4CE0-A8D4-CCE52898762F" title="The DBMS_REDACT.ADD_POLICY and DBMS_REDACT.ALTER_POLICY expression parameter defines a Boolean expression that must evaluate to TRUE to enable a redaction.">About Using Expressions in Data Redaction Policies</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-CA7521D1-DC1A-4CDA-9B36-0CA28CA2E74B" title="You can apply a Data Redaction policy based on the user&rsquo;s environment, such as the session user name or a client identifier.">Applying the Redaction Policy Based on User Environment</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-24F50577-3B10-45F4-9889-1B8215E41441" title="You can apply a Data Redaction policy based on a database role, such as the DBA role.">Applying the Redaction Policy Based on Database Roles</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-9B192DA8-12C9-4961-A23E-3A9E8F475187" title="You can set a condition on which to apply a Data Redaction policy based on the dominance of Oracle Label Security labels.">Applying the Redaction Policy Based on Oracle Label Security Label Dominance</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-BB39A63A-D11E-493E-A09C-7D7447BF0297" title="You can apply a Data Redaction policy based on an Oracle Application Express (APEX) session state.">Applying the Redaction Policy Based on Application Express Session States</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-46619EF1-2709-4E51-BFA4-E0C90E966D2C" title="You can apply the policy irrespective of the context to any user, with no filtering.">Applying the Redaction Policy to All Users</a></p>
</li>
</ul>
</div>
<a id="ASOAG10583"></a>
<div class="props_rev_3"><a id="GUID-D122477F-6D46-4CE0-A8D4-CCE52898762F"></a>
<h3 class="sect3">About Using Expressions in Data Redaction Policies</h3>
<div>
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> and <code class="codeph">DBMS_REDACT.ALTER_POLICY</code> <code class="codeph">expression</code> parameter defines a Boolean expression that must evaluate to <code class="codeph">TRUE</code> to enable a redaction.</p>
<p>This expression must be based on one of the following functions:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">SYS_CONTEXT</code>, using a specified namespace. The default namespace for <code class="codeph">SYS_CONTEXT</code> is <code class="codeph">USERENV</code>, which includes values such as <code class="codeph">SESSION_USER</code> and <code class="codeph">CLIENT_IDENTIFIER</code>. (See <a class="olink SQLRF06117" target="_blank" href="../SQLRF/functions199.htm#SQLRF06117"><span class="italic">Oracle Database SQL Language Reference</span></a> for detailed information about this function.) Another namespace that you can use is the <code class="codeph">SYS_SESSION_ROLES</code> namespace, which contains attributes for each role.</p>
</li>
<li>
<p>The following Oracle Application Express functions:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">V</code>, which is a wrapper for the <code class="codeph">APEX_UTIL.GET_SESSION_STATE</code> function</p>
</li>
<li>
<p><code class="codeph">NV</code>, which is a wrapper for the <code class="codeph">APEX_UTIL.GET_NUMERIC_SESSION_STATE</code> function</p>
</li>
</ul>
<p>See <a class="olink AEAPI101" target="_blank" href="../AEAPI/apex_util.htm#AEAPI101"><span class="italic">Oracle Application Express API Reference</span></a> for more information about these <code class="codeph">APEX_UTIL</code> package functions.</p>
</li>
<li>
<p>The <code class="codeph">OLS_LABEL_DOMINATES</code> function, described in <a class="olink OLSAG4147" target="_blank" href="../OLSAG/appxa.htm#OLSAG4147"><span class="italic">Oracle Label Security Administrator&#39;s Guide</span></a>, which is a wrapper for the <code class="codeph">LBACSYS.OLS_LABEL_DOMINATES</code> function.</p>
</li>
</ul>
<p>Follow these guidelines when you write the expression:</p>
<ul style="list-style-type: disc;">
<li>
<p>Use only the following operators: <code class="codeph">=</code>, <code class="codeph">!=</code>, <code class="codeph">&gt;</code>, <code class="codeph">&lt;</code>, <code class="codeph">&gt;=</code>, <code class="codeph">&lt;=</code></p>
</li>
<li>
<p>Because the expression must evaluate to <code class="codeph">TRUE</code> for redaction, be careful when making comparisons with <code class="codeph">NULL</code>. Remember that in SQL the value <code class="codeph">NULL</code> is undefined, so comparisons with <code class="codeph">NULL</code> tend to return <code class="codeph">FALSE</code>.</p>
</li>
<li>
<p>Do not use user-created functions in the <code class="codeph">expression</code> parameter; this is not permitted.</p>
</li>
</ul>
<p>Remember that for user <code class="codeph">SYS</code> and users who have the <code class="codeph">EXEMPT REDACTION POLICY</code> privilege, all of the Data Redaction policies are bypassed, so the results of their queries are not redacted. See the following sections for more information about users who are exempted from Data Redaction policies:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-ADFB7DCD-8543-400D-95A3-AA0976E75084" title="You can exempt users from having Oracle Data Redaction policies applied to the data they access.">Exemption of Users from Oracle Data Redaction Policies</a></p>
</li>
<li>
<p><a href="oracle-data-redaction-use-with-oracle-database-features.htm#GUID-83544DD3-2903-4E6F-AD14-671E57CF41A9" title="The DATAPUMP_EXP_FULL_DATABASE role includes the powerful EXEMPT REDACTION POLICY system privilege.">Oracle Data Pump Security Model for Oracle Data Redaction</a></p>
</li>
</ul>
</div>
</div>
<a id="ASOAG10584"></a>
<div class="props_rev_3"><a id="GUID-CA7521D1-DC1A-4CDA-9B36-0CA28CA2E74B"></a>
<h3 class="sect3">Applying the Redaction Policy Based on User Environment</h3>
<div>
<p>You can apply a Data Redaction policy based on the user&rsquo;s environment, such as the session user name or a client identifier.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Use the <code class="codeph">USERENV</code> namespace of the <code class="codeph">SYS_CONTEXT</code> function in the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> <code class="codeph">expression</code> parameter to apply the policy based on a user&rsquo;s environment.</p>
</li>
</ul>
<p>For example, to apply the policy only to the session user name <code class="codeph">psmith</code>:</p>
<pre dir="ltr">expression  =&gt; &#39;SYS_CONTEXT(&#39;&#39;USERENV&#39;&#39;,&#39;&#39;SESSION_USER&#39;&#39;) = &#39;&#39;PSMITH&#39;&#39;&#39;
</pre>
<div class="infoboxnotealso" id="GUID-CA7521D1-DC1A-4CDA-9B36-0CA28CA2E74B__GUID-015A56C3-282D-494E-B82F-AD8FEAF8DF6A">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF06117" target="_blank" href="../SQLRF/functions199.htm#SQLRF06117"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about more namespaces that you can use with the <code class="codeph">SYS_CONTEXT</code> function</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG10586"></a>
<div class="props_rev_3"><a id="GUID-24F50577-3B10-45F4-9889-1B8215E41441"></a>
<h3 class="sect3">Applying the Redaction Policy Based on Database Roles</h3>
<div>
<p>You can apply a Data Redaction policy based on a database role, such as the <code class="codeph">DBA</code> role.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Use the <code class="codeph">SYS_SESSION_ROLES</code> namespace in the <code class="codeph">SYS_CONTEXT</code> function to apply the policy based on a user role.</p>
<p>This namespace contains attributes for each role. The value of the attribute is <code class="codeph">TRUE</code> if the specified role is enabled for the querying application user; the value is <code class="codeph">FALSE</code> if the role is not enabled.</p>
</li>
</ul>
<p>For example, suppose you wanted only supervisors to be allowed to see the <a href="glossary.htm#GUID-82E2FC6D-718F-4367-9D7E-DC130F360FC3"><span class="xrefglossterm">actual data</span></a>. The following example shows how to use the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> <code class="codeph">expression</code> parameter to set the policy to show the actual data to any application user who has the <code class="codeph">supervisor</code> role enabled, but redact the data for all of the other application users.</p>
<pre dir="ltr">expression  =&gt; &#39;SYS_CONTEXT(&#39;&#39;SYS_SESSION_ROLES&#39;&#39;,&#39;&#39;SUPERVISOR&#39;&#39;) = &#39;&#39;FALSE&#39;&#39;&#39;
</pre></div>
<!-- class="section" --></div>
</div>
<a id="ASOAG10597"></a>
<div class="props_rev_3"><a id="GUID-9B192DA8-12C9-4961-A23E-3A9E8F475187"></a>
<h3 class="sect3">Applying the Redaction Policy Based on Oracle Label Security Label Dominance</h3>
<div>
<p>You can set a condition on which to apply a Data Redaction policy based on the dominance of Oracle Label Security labels.</p>
<div class="section">
<div class="infobox-note" id="GUID-9B192DA8-12C9-4961-A23E-3A9E8F475187__GUID-779C0DF0-61CF-408D-B9F0-4CEBEA0C49CA">
<p class="notep1">Note:</p>
<p>This feature is available starting with Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2).</p>
</div>
<ul style="list-style-type: disc;">
<li>
<p>Use the public standalone function <code class="codeph">OLS_LABEL_DOMINATES</code> to check the dominance of a session label. This function returns <code class="codeph">1</code> (<code class="codeph">TRUE</code>) if the session label of the specified <code class="codeph">policy_name</code> value dominates or is equal to the label that is specified by the <code class="codeph">label</code> parameter; otherwise, it returns <code class="codeph">0</code> (<code class="codeph">FALSE</code>).</p>
</li>
</ul>
<p>For example, to apply a Data Redaction policy only in cases where the session label for the policy <code class="codeph">hr_ols_pol</code> does not dominate nor is equal to label <code class="codeph">hs</code>:</p>
<pre dir="ltr">expression  =&gt; &#39;OLS_LABEL_DOMINATES (&#39;&#39;hr_ols_pol&#39;&#39;,&#39;&#39;hs&#39;&#39;) = 0&#39;
</pre></div>
<!-- class="section" --></div>
</div>
<a id="ASOAG10591"></a>
<div class="props_rev_3"><a id="GUID-BB39A63A-D11E-493E-A09C-7D7447BF0297"></a>
<h3 class="sect3">Applying the Redaction Policy Based on Application Express Session States</h3>
<div>
<p>You can apply a Data Redaction policy based on an Oracle Application Express (APEX) session state.</p>
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Use either of the following public Application Express APIs in the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> <code class="codeph">expression</code> parameter to apply the policy on an Oracle Application Express session state:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">V</code>, which is a synonym for the <code class="codeph">APEX_UTIL.GET_SESSION_STATE</code> function</p>
</li>
<li>
<p><code class="codeph">NV</code>, which is a synonym for the <code class="codeph">APEX_UTIL.GET_NUMERIC_SESSION_STATE</code> function</p>
</li>
</ul>
</li>
</ul>
<p>For example, to set the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> <code class="codeph">expression</code> parameter if you wanted redaction to take place when the application item called <code class="codeph">G_JOB</code> has the value <code class="codeph">CLERK</code>:</p>
<pre dir="ltr">expression =&gt; &#39;V(&#39;&#39;APP_USER&#39;&#39;) != &#39;&#39;mavis@example.com&#39;&#39; or V(&#39;&#39;APP_USER&#39;&#39;) is null&#39;
</pre>
<p>You can, for example, use these functions to redact data based on a job or a privilege role that is stored in a session state in an APEX application.</p>
<p>If you want redaction to take place when the querying user is <span class="italic">not</span> within the context of an APEX application (when the query is issued from outside the APEX framework, for example directly through SQL*Plus), then use an <code class="codeph">IS NULL</code> clause as follows. This policy expression causes actual data to be shown to user <code class="codeph">mavis</code> only when her query comes from within an APEX application. Otherwise, the query result is redacted.</p>
<div class="infoboxnotealso" id="GUID-BB39A63A-D11E-493E-A09C-7D7447BF0297__GUID-707E7233-B59A-4473-AFCE-59EEC3119E5C">
<p class="notep1">See Also:</p>
<p><a class="olink AEAPI101" target="_blank" href="../AEAPI/apex_util.htm#AEAPI101"><span><cite>Oracle Application Express API Reference</cite></span></a></p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG10588"></a>
<div class="props_rev_3"><a id="GUID-46619EF1-2709-4E51-BFA4-E0C90E966D2C"></a>
<h3 class="sect3">Applying the Redaction Policy to All Users</h3>
<div>
<p>You can apply the policy irrespective of the context to any user, with no filtering.</p>
<div class="section">
<p>However, be aware that user <code class="codeph">SYS</code> and users who have the <code class="codeph">EXEMPT REDACTION POLICY</code> privilege are always except from Oracle Data Redaction policies.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>To apply the policy to users who are not <code class="codeph">SYS</code> or have been granted the <code class="codeph">EXEMPT REDACTION POLICY</code> privilege, write the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> <code class="codeph">expression</code> parameter to evaluate to <code class="codeph">TRUE</code>.</p>
</li>
</ul>
<p>For example:</p>
<pre dir="ltr">expression  =&gt; &#39;1=1&#39;
</pre>
<div class="infoboxnotealso" id="GUID-46619EF1-2709-4E51-BFA4-E0C90E966D2C__GUID-6B28343E-243A-4CF1-9494-A4856C97BD97">
<p class="notep1">See Also:</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-ADFB7DCD-8543-400D-95A3-AA0976E75084" title="You can exempt users from having Oracle Data Redaction policies applied to the data they access.">Exemption of Users from Oracle Data Redaction Policies</a></p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="ASOAG10611"></a>
<div class="props_rev_3"><a id="GUID-E3725E9D-2798-48D5-B87B-BE8A02E73941"></a>
<h2 class="sect2">Creating a Full Redaction Policy and Altering the Full Redaction Value</h2>
<div>
<p>You can create a full redaction policy to redact all contents in a data column, and optionally, you can alter the default full redaction value.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-416A1170-D619-4893-AFBE-2CB301EF2AE0" title="A full data redaction policy redacts all the contents of a data column.">Creating a Full Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-58FD64FD-71C5-429A-9A4F-14D63AE2E02A" title="You can use the DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES procedure to alter the default full data redaction value.">Altering the Default Full Data Redaction Value</a></p>
</li>
</ul>
</div>
<a id="ASOAG10545"></a>
<div class="sect3"><a id="GUID-416A1170-D619-4893-AFBE-2CB301EF2AE0"></a>
<h3 class="sect3">Creating a Full Redaction Policy</h3>
<div>
<p>A full data redaction policy redacts all the contents of a data column.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-1C8580F0-C33E-47D3-9C93-9DCD6AAA6B93" title="To set a redaction policy to redact all data in the column, you must set the function_type parameter to DBMS_REDACT.FULL.">About Creating Full Data Redaction Policies</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-E0CF7672-7FAC-4134-8A5E-AF0C65FD2A21" title="The DBMS_REDACT.ADD_POLICY procedure enables you to create a full redaction policy.">Syntax for Creating a Full Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-C2530471-56B4-4FFF-8C80-7C38686182E4" title="You can use the DBMS_REDACT.ADD_POLICY PL/SQL procedure to create a full redaction policy.">Example: Full Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-7BC62ED1-B6EC-4BC5-9A3A-4894787C3043" title="You can use the DBMS_REDACT.ADD_POLICY PL/SQL procedure to create a policy that fully redacts character values.">Example: Fully Redacted Character Values</a></p>
</li>
</ul>
</div>
<a id="ASOAG10546"></a>
<div class="props_rev_3"><a id="GUID-1C8580F0-C33E-47D3-9C93-9DCD6AAA6B93"></a>
<h4 class="sect4">About Creating Full Data Redaction Policies</h4>
<div>
<p>To set a redaction policy to redact all data in the column, you must set the <code class="codeph">function_type</code> parameter to <code class="codeph">DBMS_REDACT.FULL</code>.</p>
<p>By default, <code class="codeph">NUMBER</code> data type columns are replaced with zero (<code class="codeph">0</code>) and character data type columns are replaced with a single space ( ). You can modify this default by using the <code class="codeph">DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES</code> procedure.</p>
<div class="infoboxnotealso" id="GUID-1C8580F0-C33E-47D3-9C93-9DCD6AAA6B93__GUID-A07CB9BE-F4A5-4246-BF4B-26BFA67300ED">
<p class="notep1">See Also:</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-58FD64FD-71C5-429A-9A4F-14D63AE2E02A" title="You can use the DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES procedure to alter the default full data redaction value.">Altering the Default Full Data Redaction Value</a> if you want to modify the default full redaction value</p>
</div>
</div>
</div>
<a id="ASOAG10547"></a>
<div class="props_rev_3"><a id="GUID-E0CF7672-7FAC-4134-8A5E-AF0C65FD2A21"></a>
<h4 class="sect4">Syntax for Creating a Full Redaction Policy</h4>
<div>
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure enables you to create a full redaction policy.</p>
<div class="section">
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> fields for creating a full data redaction policy are as follows:</p>
<pre dir="ltr">DBMS_REDACT.ADD_POLICY (
   object_schema           IN VARCHAR2 := NULL, 
   object_name             IN VARCHAR2,
   column_name             IN VARCHAR2 := NULL,
   policy_name             IN VARCHAR2,
   function_type           IN BINARY_INTEGER := NULL,
   expression              IN VARCHAR2,
   enable                  IN BOOLEAN := TRUE);
</pre>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">object_schema</code>, <code class="codeph">object_name</code>, <code class="codeph">column_name</code>, <code class="codeph">policy_name</code>, <code class="codeph">expression</code>, <code class="codeph">enable</code>: See <a href="configuring-oracle-data-redaction-policies.htm#GUID-D32FC6CA-A3B5-47EE-B288-52F1124F9FBD" title="To create a Data Redaction policy, you must use the DBMS_REDACT.ADD_POLICY procedure.">General Syntax of the DBMS_REDACT.ADD_POLICY Procedure</a>.</p>
</li>
<li>
<p><code class="codeph">function_type</code>: Specifies the function used to set the type of redaction. Enter <code class="codeph">DBMS_REDACT.FULL</code>.</p>
<p>If you omit the <code class="codeph">function_type</code> parameter, then the default redaction <code class="codeph">function_type</code> setting is <code class="codeph">DBMS_REDACT.FULL</code>.</p>
<p>Remember that the data type of the column determines which <code class="codeph">function_type</code> settings that you are permitted to use. See <a href="oracle-data-redaction-features-and-capabilities.htm#GUID-F7E1C148-8C15-4F18-91BA-878A90284D12" title="The full, partial, and random data redaction styles affect the Oracle built-in, ANSI, user-defined, and Oracle supplied types in different ways.">Comparison of Full, Partial, and Random Redaction Based on Data Types</a>.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG10549"></a><a id="ASOAG10548"></a>
<div class="props_rev_3"><a id="GUID-C2530471-56B4-4FFF-8C80-7C38686182E4"></a>
<h4 class="sect4">Example: Full Redaction Policy</h4>
<div>
<p>You can use the <span class="apiname">DBMS_REDACT.ADD_POLICY</span> PL/SQL procedure to create a full redaction policy.</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-C2530471-56B4-4FFF-8C80-7C38686182E4__CEGBBIAC">Example 10-1</a> shows how to use full redaction for all the values in the <code class="codeph">HR.EMPLOYEES</code> table <code class="codeph">COMMISSION_PCT</code> column. The expression parameter applies the policy to any user querying the table, except for users who have been granted the <code class="codeph">EXEMPT REDACTION POLICY</code> system privilege. (See <a href="configuring-oracle-data-redaction-policies.htm#GUID-ADFB7DCD-8543-400D-95A3-AA0976E75084" title="You can exempt users from having Oracle Data Redaction policies applied to the data they access.">Exemption of Users from Oracle Data Redaction Policies</a> for more information about the <code class="codeph">EXEMPT REDACTION POLICY</code> system privilege.)</p>
<div class="example" id="GUID-C2530471-56B4-4FFF-8C80-7C38686182E4__CEGBBIAC">
<p class="titleinexample">Example 10-1 Full Data Redaction Policy</p>
<pre dir="ltr">BEGIN
 DBMS_REDACT.ADD_POLICY(
   object_schema    =&gt; &#39;hr&#39;, 
   object_name      =&gt; &#39;employees&#39;, 
   column_name      =&gt; &#39;commission_pct&#39;,
   policy_name      =&gt; &#39;redact_com_pct&#39;, 
   function_type    =&gt; DBMS_REDACT.FULL,
   expression       =&gt; &#39;1=1&#39;);
END;
/
</pre>
<p>Query and redacted result:</p>
<pre dir="ltr">SELECT COMMISSION_PCT FROM HR.EMPLOYEES;

COMMISSION_PCT
--------------
0
0
0
</pre></div>
<!-- class="example" --></div>
</div>
<a id="ASOAG452"></a>
<div class="sect4"><a id="GUID-7BC62ED1-B6EC-4BC5-9A3A-4894787C3043"></a>
<h4 class="sect4">Example: Fully Redacted Character Values</h4>
<div>
<p>You can use the <span class="apiname">DBMS_REDACT.ADD_POLICY</span> PL/SQL procedure to create a policy that fully redacts character values.</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-7BC62ED1-B6EC-4BC5-9A3A-4894787C3043__CACGBAAG">Example 10-2</a> shows how to redact fully the user IDs of the <code class="codeph">user_id</code> column in the <code class="codeph">mavis.cust_info</code> table. The <code class="codeph">user_id</code> column is of the <code class="codeph">VARCHAR2</code> data type. The output is a blank string. The <code class="codeph">expression</code> setting enables users who have the <code class="codeph">MGR</code> role to view the user IDs.</p>
<div class="example" id="GUID-7BC62ED1-B6EC-4BC5-9A3A-4894787C3043__CACGBAAG">
<p class="titleinexample">Example 10-2 Fully Redacted Character Values</p>
<pre dir="ltr">BEGIN
 DBMS_REDACT.ADD_POLICY(
   object_schema   =&gt; &#39;mavis&#39;, 
   object_name     =&gt; &#39;cust_info&#39;, 
   column_name     =&gt; &#39;user_id&#39;,
   policy_name     =&gt; &#39;redact_cust_user_ids&#39;, 
   function_type   =&gt; DBMS_REDACT.FULL,
   expression      =&gt; &#39;SYS_CONTEXT(&#39;&#39;SYS_SESSION_ROLES&#39;&#39;,&#39;&#39;MGR&#39;&#39;) = &#39;&#39;FALSE&#39;&#39;&#39;);
END;
/
</pre>
<p>Query and redacted result:</p>
<pre dir="ltr">SELECT user_id FROM mavis.cust_info;

USER_ID
------------
0
0
0
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="ASOAG945"></a>
<div class="props_rev_3"><a id="GUID-58FD64FD-71C5-429A-9A4F-14D63AE2E02A"></a>
<h3 class="sect3">Altering the Default Full Data Redaction Value</h3>
<div>
<p>You can use the <code class="codeph">DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES</code> procedure to alter the default full data redaction value.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-519A7B53-4908-486B-A0CF-6CD7F960CDD7" title="You can alter the default displayed values for full Data Redaction polices.">About Altering the Default Full Data Redaction Value</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-D5765C57-52BC-45B8-A375-79682CBDE899" title="The DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES procedure accommodates the standard supported Oracle Database data types.">Syntax for the DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES Procedure</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-6A1B9EA8-AF15-4944-9B58-45F99AF1035D" title="To modify the default full data redaction value, use the DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES procedure.">Modifying the Default Full Data Redaction Value</a></p>
</li>
</ul>
</div>
<a id="ASOAG946"></a>
<div class="props_rev_3"><a id="GUID-519A7B53-4908-486B-A0CF-6CD7F960CDD7"></a>
<h4 class="sect4">About Altering the Default Full Data Redaction Value</h4>
<div>
<p>You can alter the default displayed values for full Data Redaction polices.</p>
<p>By default, <code class="codeph">0</code> is the redacted value when Oracle Database performs full redaction (<code class="codeph">DBMS_REDACT.FULL</code>) on a column of the <code class="codeph">NUMBER</code> data type. If you want to change it to another value (for example, <code class="codeph">7</code>), then you can run the <code class="codeph">DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES</code> procedure to modify this value. The modification applies to all of the Data Redaction policies in the current database instance. After you modify a value, you must restart the database for it to take effect. You can find the current values by querying the <code class="codeph">REDACTION_VALUES_FOR_TYPE_FULL</code> data dictionary view.</p>
<p>Be aware that this change affects all Data Redaction policies in the database that use full data redaction. Before you alter the default full data redaction value, examine the affect that this change would have on existing full Data Redaction policies.</p>
</div>
</div>
<a id="ASOAG947"></a>
<div class="props_rev_3"><a id="GUID-D5765C57-52BC-45B8-A375-79682CBDE899"></a>
<h4 class="sect4">Syntax for the DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES Procedure</h4>
<div>
<p>The <code class="codeph">DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES</code> procedure accommodates the standard supported Oracle Database data types.</p>
<div class="section">
<p>The syntax is as follows:</p>
<pre dir="ltr">DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES (
 number_val       IN NUMBER                    NULL,
 binfloat_val     IN BINARY_FLOAT              NULL,
 bindouble_val    IN BINARY_DOUBLE             NULL,
 char_val         IN CHAR                      NULL,
 varchar_val      IN VARCHAR2                  NULL,
 nchar_val        IN NCHAR                     NULL,
 nvarchar_val     IN NVARCHAR2                 NULL,
 date_val         IN DATE                      NULL,
 ts_val           IN TIMESTAMP                 NULL,
 tswtz_val        IN TIMESTAMP WITH TIME ZONE  NULL,
 blob_val         IN BLOB                      NULL,
 clob_val         IN CLOB                      NULL,
 nclob_val        IN NCLOB                     NULL);
</pre>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">number_val</code> modifies the default value for columns of the <code class="codeph">NUMBER</code> data type.</p>
</li>
<li>
<p><code class="codeph">binfloat_val</code> modifies the default value for columns of the <code class="codeph">BINARY_FLOAT</code> data type.</p>
</li>
<li>
<p><code class="codeph">bindouble_val</code> modifies the default value for columns of the <code class="codeph">BINARY_DOUBLE</code> data type.</p>
</li>
<li>
<p><code class="codeph">char_val</code> modifies the default value for columns of the <code class="codeph">CHAR</code> data type.</p>
</li>
<li>
<p><code class="codeph">varchar_val</code> modifies the default value for columns of the <code class="codeph">VARCHAR2</code> data type.</p>
</li>
<li>
<p><code class="codeph">nchar_val</code> modifies the default value for columns of the <code class="codeph">NCHAR</code> data type.</p>
</li>
<li>
<p><code class="codeph">nvarchar_val</code> modifies the default value for columns of the <code class="codeph">NVARCHAR2</code> data type.</p>
</li>
<li>
<p><code class="codeph">date_val</code> modifies the default value for columns of the <code class="codeph">DATE</code> data type.</p>
</li>
<li>
<p><code class="codeph">ts_val</code> modifies the default value for columns of the <code class="codeph">TIMESTAMP</code> data type.</p>
</li>
<li>
<p><code class="codeph">tswtz_val</code> modifies the default value for columns of the <code class="codeph">TIMESTAMP WITH TIME ZONE</code> data type.</p>
</li>
<li>
<p><code class="codeph">blob_val</code> modifies the default value for columns of the <code class="codeph">BLOB</code> data type.</p>
</li>
<li>
<p><code class="codeph">clob_val</code> modifies the default value for columns of the <code class="codeph">CLOB</code> data type.</p>
</li>
<li>
<p><code class="codeph">nclob</code> modifies the default value for columns of the <code class="codeph">NCLOB</code> data type.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG948"></a>
<div class="props_rev_3"><a id="GUID-6A1B9EA8-AF15-4944-9B58-45F99AF1035D"></a>
<h4 class="sect4">Modifying the Default Full Data Redaction Value</h4>
<div>
<p>To modify the default full data redaction value, use the <code class="codeph">DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES</code> procedure.</p>
<div class="section">
<ol>
<li>
<p>Log in to the database instance as user <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege.</p>
</li>
<li>
<p>Check the value that you want to change.</p>
<p>For example, to check the current value for columns that use the <code class="codeph">NUMBER</code> data type:</p>
<pre dir="ltr">SELECT NUMBER_VALUE FROM REDACTION_VALUES_FOR_TYPE_FULL;

NUMBER_VALUE
------------
           0
</pre></li>
<li>
<p>Run the <code class="codeph">DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES</code> procedure to modify the value.</p>
<p>For example:</p>
<pre dir="ltr">EXEC DBMS_REDACT.UPDATE_FULL_REDACTION_VALUES (number_val =&gt; 7);
</pre></li>
<li>
<p>Restart the database instance.</p>
<p>For example:</p>
<pre dir="ltr">SHUTDOWN IMMEDIATE

STARTUP
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<a id="ASOAG10550"></a>
<div class="props_rev_3"><a id="GUID-42B218FF-9082-4149-9D76-961B6D6417BB"></a>
<h2 class="sect2">Creating a Partial Redaction Policy</h2>
<div>
<p>In partial data redaction, you can redact portions of data, and for different kinds of data types.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-373CB1A2-1A5F-48E7-9E18-7348315161A7" title="In partial data redaction, only a portion of the data, such as the first five digits of an identification number, are redacted.">About Creating Partial Redaction Policies</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-1CEB4B41-7942-4D1A-A21E-CEB70445C2C5" title="The DBMS_REDACT.ADD_POLICY statement enables you to create policies that redact specific parts of the data returned to the application.">Syntax for Creating a Partial Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-67CCF0EC-0FB8-44B8-A753-82C1BE475ED4" title="Oracle Data Redaction provides special predefined formats to configure policies that use fixed characters. You can use the DBMS_REDACT.ADD_POLICY PL/SQL procedure to create a partial redaction policy that uses a fixed character format.">Creating Partial Redaction Policies Using Fixed Character Formats</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-989ADAF1-5218-4BA1-AEB3-AB223BCCD34A" title="The DBMS_REDACT.ADD_POLICY function_parameters parameter enables you to redact character data types.">Creating Partial Redaction Policies Using Character Data Types</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-EA35A7F2-24AE-4DAF-AA06-425DE9BD7055" title="The DBMS_REDACT.ADD_POLICY function_parameters parameter enables you to redact number data types.">Creating Partial Redaction Policies Using Number Data Types</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-B8983609-6649-4703-80AF-A8BF7E73C3C9" title="The DBMS_REDACT.ADD_POLICY function_parameters parameter enables you to redact date-time data types.">Creating Partial Redaction Policies Using Date-Time Data Types</a></p>
</li>
</ul>
</div>
<a id="ASOAG10551"></a>
<div class="props_rev_3"><a id="GUID-373CB1A2-1A5F-48E7-9E18-7348315161A7"></a>
<h3 class="sect3">About Creating Partial Redaction Policies</h3>
<div>
<p>In partial data redaction, only a portion of the data, such as the first five digits of an identification number, are redacted.</p>
<p>For example, you can redact most of a credit card number with asterisks (*), except for the last 4 digits. You can create policies for columns that use character, number, or date-time data types. For policies that redact character data types, you can use fixed character redaction formats. If you have the Enterprise Manager for Oracle Database 12.1.0.7 plug-in deployed on your system, then you can also create and save custom redaction formats.</p>
<div class="infobox-note" id="GUID-373CB1A2-1A5F-48E7-9E18-7348315161A7__GUID-95E008B0-782C-436C-BF39-9FFB2AB2C9C3">
<p class="notep1">Note:</p>
<p>In previous releases, the term shortcut was used for the term format.</p>
</div>
</div>
</div>
<a id="ASOAG10552"></a>
<div class="props_rev_3"><a id="GUID-1CEB4B41-7942-4D1A-A21E-CEB70445C2C5"></a>
<h3 class="sect3">Syntax for Creating a Partial Redaction Policy</h3>
<div>
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> statement enables you to create policies that redact specific parts of the data returned to the application.</p>
<div class="section">
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> fields for creating a partial redaction policy are as follows:</p>
<pre dir="ltr">DBMS_REDACT.ADD_POLICY (
   object_schema           IN VARCHAR2 := NULL, 
   object_name             IN VARCHAR2,
   column_name             IN VARCHAR2 := NULL,
   policy_name             IN VARCHAR2,
   function_type           IN BINARY_INTEGER := NULL,
   function_parameters     IN VARCHAR2 := NULL,
   expression              IN VARCHAR2,
   enable                  IN BOOLEAN := TRUE);
</pre>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">object_schema</code>, <code class="codeph">object_name</code>, <code class="codeph">column_name</code>, <code class="codeph">policy_name</code>, <code class="codeph">expression</code>, <code class="codeph">enable</code>: See <a href="configuring-oracle-data-redaction-policies.htm#GUID-D32FC6CA-A3B5-47EE-B288-52F1124F9FBD" title="To create a Data Redaction policy, you must use the DBMS_REDACT.ADD_POLICY procedure.">General Syntax of the DBMS_REDACT.ADD_POLICY Procedure</a></p>
</li>
<li>
<p><code class="codeph">function_type</code>: Specifies the function used to set the type of redaction. Enter <code class="codeph">DBMS_REDACT.PARTIAL</code>.</p>
</li>
<li>
<p><code class="codeph">function_parameters</code>: The parameters that you set here depend on the data type of the column specified for the <code class="codeph">column_name</code> parameter. See the following sections for details:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-67CCF0EC-0FB8-44B8-A753-82C1BE475ED4" title="Oracle Data Redaction provides special predefined formats to configure policies that use fixed characters. You can use the DBMS_REDACT.ADD_POLICY PL/SQL procedure to create a partial redaction policy that uses a fixed character format.">Creating Partial Redaction Policies Using Fixed Character Formats</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-989ADAF1-5218-4BA1-AEB3-AB223BCCD34A" title="The DBMS_REDACT.ADD_POLICY function_parameters parameter enables you to redact character data types.">Creating Partial Redaction Policies Using Character Data Types</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-EA35A7F2-24AE-4DAF-AA06-425DE9BD7055" title="The DBMS_REDACT.ADD_POLICY function_parameters parameter enables you to redact number data types.">Creating Partial Redaction Policies Using Number Data Types</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-B8983609-6649-4703-80AF-A8BF7E73C3C9" title="The DBMS_REDACT.ADD_POLICY function_parameters parameter enables you to redact date-time data types.">Creating Partial Redaction Policies Using Date-Time Data Types</a></p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG608"></a>
<div class="props_rev_3"><a id="GUID-67CCF0EC-0FB8-44B8-A753-82C1BE475ED4"></a>
<h3 class="sect3">Creating Partial Redaction Policies Using Fixed Character Formats</h3>
<div>
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> <code class="codeph">function_parameters</code> parameter enables you to use fixed character formats.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-F7682CC2-C294-46F3-A3C6-2F9FBB7ACC27" title="Oracle Data Redaction provides special predefined formats to configure policies that use fixed characters.">Settings for Fixed Character Formats</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-1C868AE1-CCCE-4333-BD91-3E3E617F15BA" title="You can use the DBMS_REDACT.ADD_POLICY PL/SQL procedure to create a partial redaction policy that uses a fixed character format.">Example: Partial Redaction Policy Using a Fixed Character Format</a></p>
</li>
</ul>
</div>
<a id="ASOAG892"></a><a id="ASOAG10553"></a>
<div class="props_rev_3"><a id="GUID-F7682CC2-C294-46F3-A3C6-2F9FBB7ACC27"></a>
<h4 class="sect4">Settings for Fixed Character Formats</h4>
<div>
<p>Oracle Data Redaction provides special predefined formats to configure policies that use fixed characters.</p>
<div class="section">
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-F7682CC2-C294-46F3-A3C6-2F9FBB7ACC27__CACDEJFH" title="Partial Fixed Data Redaction Aliases">Table 10-2</a> describes <code class="codeph">DBMS_REDACT.ADD_POLICY</code> <code class="codeph">function_parameters</code> parameter formats that you can use for commonly redacted Social Security numbers, postal codes, and credit cards that use either the <code class="codeph">VARCHAR2</code> or <code class="codeph">NUMBER</code> data types for their columns.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-F7682CC2-C294-46F3-A3C6-2F9FBB7ACC27__CACDEJFH">
<p class="titleintable">Table 10-2 Partial Fixed Character Redaction Formats</p>
<table class="cellalignment5391" title="Partial Fixed Character Redaction Formats" summary="Partial Fixed Data Redaction Aliases">
<thead>
<tr class="cellalignment5373">
<th class="cellalignment5394" id="d30126e3573">Format</th>
<th class="cellalignment5395" id="d30126e3576">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5373">
<td class="cellalignment5396" id="d30126e3581" headers="d30126e3573">
<p><code class="codeph">DBMS_REDACT.REDACT_US_SSN_F5</code></p>
</td>
<td class="cellalignment5397" headers="d30126e3581 d30126e3576">
<p>Redacts the first 5 numbers of Social Security numbers when the column is a <code class="codeph">VARCHAR2</code> data type. For example, the number <code class="codeph">987-65-4320</code> becomes <code class="codeph">XXX-XX-4320</code>.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5396" id="d30126e3598" headers="d30126e3573">
<p><code class="codeph">DBMS_REDACT.REDACT_US_SSN_L4</code></p>
</td>
<td class="cellalignment5397" headers="d30126e3598 d30126e3576">
<p>Redacts the last 4 numbers of Social Security numbers when the column is a <code class="codeph">VARCHAR2</code> data type. For example, the number <code class="codeph">987-65-4320</code> becomes <code class="codeph">987-65-XXXX</code>.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5396" id="d30126e3615" headers="d30126e3573">
<p><code class="codeph">DBMS_REDACT.REDACT_US_SSN_ENTIRE</code></p>
</td>
<td class="cellalignment5397" headers="d30126e3615 d30126e3576">
<p>Redacts the entire Social Security number when the column is a <code class="codeph">VARCHAR2</code> data type. For example, the number <code class="codeph">987-65-4320</code> becomes <code class="codeph">XXX-XX-XXXX</code>.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5396" id="d30126e3632" headers="d30126e3573">
<p><code class="codeph">DBMS_REDACT.REDACT_NUM_US_SSN_F5</code></p>
</td>
<td class="cellalignment5397" headers="d30126e3632 d30126e3576">
<p>Redacts the first 5 numbers of Social Security numbers when the column is a <code class="codeph">NUMBER</code> data type. For example, the number <code class="codeph">987654320</code> becomes <code class="codeph">XXXXX4320</code>.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5396" id="d30126e3649" headers="d30126e3573">
<p><code class="codeph">DBMS_REDACT.REDACT_NUM_US_SSN_L4</code></p>
</td>
<td class="cellalignment5397" headers="d30126e3649 d30126e3576">
<p>Redacts the last 4 numbers of Social Security numbers when the column is a <code class="codeph">NUMBER</code> data type. For example, the number <code class="codeph">987654320</code> becomes <code class="codeph">98765XXXX</code>.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5396" id="d30126e3667" headers="d30126e3573">
<p><code class="codeph">DBMS_REDACT.REDACT_NUM_US_SSN_ENTIRE</code></p>
</td>
<td class="cellalignment5397" headers="d30126e3667 d30126e3576">
<p>Redacts the entire Social Security number when the column is a <code class="codeph">NUMBER</code> data type. For example, the number <code class="codeph">987654320</code> becomes <code class="codeph">XXXXXXXXX</code>.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5396" id="d30126e3684" headers="d30126e3573">
<p><code class="codeph">DBMS_REDACT.REDACT_ZIP_CODE</code></p>
</td>
<td class="cellalignment5397" headers="d30126e3684 d30126e3576">
<p>Redacts a 5-digit postal code when the column is a <code class="codeph">VARCHAR2</code> data type. For example, <code class="codeph">95476</code> becomes <code class="codeph">XXXXX</code>.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5396" id="d30126e3701" headers="d30126e3573">
<p><code class="codeph">DBMS_REDACT.REDACT_NUM_ZIP_CODE</code></p>
</td>
<td class="cellalignment5397" headers="d30126e3701 d30126e3576">
<p>Redacts a 5-digit postal code when the column is a <code class="codeph">NUMBER</code> data type. For example, <code class="codeph">95476</code> becomes <code class="codeph">XXXXX</code>.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5396" id="d30126e3718" headers="d30126e3573">
<p><code class="codeph">DBMS_REDACT.REDACT_DATE_MILLENNIUM</code></p>
</td>
<td class="cellalignment5397" headers="d30126e3718 d30126e3576">
<p>Redacts dates that are in the <code class="codeph">DD-MON-YY</code> format to <code class="codeph">01-JAN-00</code> (January 1, 2000).</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5396" id="d30126e3732" headers="d30126e3573">
<p><code class="codeph">DBMS_REDACT.REDACT_DATE_EPOCH</code></p>
</td>
<td class="cellalignment5397" headers="d30126e3732 d30126e3576">
<p>Redacts all dates to <code class="codeph">01-JAN-70</code>.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5396" id="d30126e3743" headers="d30126e3573">
<p><code class="codeph">DBMS_REDACT.REDACT_CCN16_F12</code></p>
</td>
<td class="cellalignment5397" headers="d30126e3743 d30126e3576">
<p>Redacts a 16-digit credit card number, leaving the last 4 digits displayed. For example, <code class="codeph">5105 1051 0510 5100</code> becomes <code class="codeph">****-****-****-5100</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-F7682CC2-C294-46F3-A3C6-2F9FBB7ACC27__GUID-9B24C505-C7C2-4E3E-AE33-2D08F1951379">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="configuring-oracle-data-redaction-policies.htm#GUID-D32FC6CA-A3B5-47EE-B288-52F1124F9FBD" title="To create a Data Redaction policy, you must use the DBMS_REDACT.ADD_POLICY procedure.">General Syntax of the DBMS_REDACT.ADD_POLICY Procedure</a>&#34;</span> for information about other <code class="codeph">DBMS_REDACT.ADD_POLICY</code> parameters</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG893"></a><a id="ASOAG10554"></a>
<div class="props_rev_3"><a id="GUID-1C868AE1-CCCE-4333-BD91-3E3E617F15BA"></a>
<h4 class="sect4">Example: Partial Redaction Policy Using a Fixed Character Format</h4>
<div>
<p>You can use the <span class="apiname">DBMS_REDACT.ADD_POLICY</span> PL/SQL procedure to create a partial redaction policy that uses a fixed character format.</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-1C868AE1-CCCE-4333-BD91-3E3E617F15BA__CACJICBG">Example 10-3</a> shows how Social Security numbers in a <code class="codeph">VARCHAR2</code> data type column and can be redacted using the <code class="codeph">REDACT_US_SSN_F5</code> format.</p>
<div class="example" id="GUID-1C868AE1-CCCE-4333-BD91-3E3E617F15BA__CACJICBG">
<p class="titleinexample">Example 10-3 Partially Redacted Character Values</p>
<pre dir="ltr">BEGIN
 DBMS_REDACT.ADD_POLICY(
   object_schema       =&gt; &#39;mavis&#39;, 
   object_name         =&gt; &#39;cust_info&#39;, 
   column_name         =&gt; &#39;ssn&#39;,
   policy_name         =&gt; &#39;redact_cust_ssns3&#39;, 
   function_type       =&gt; DBMS_REDACT.PARTIAL,
   function_parameters =&gt; DBMS_REDACT.REDACT_US_SSN_F5,
   expression          =&gt; &#39;1=1&#39;,
   policy_description  =&gt; &#39;Partially redacts 1st 5 digits in SS numbers&#39;,
   column_description  =&gt; &#39;ssn contains Social Security numbers&#39;);
END;
/
</pre>
<p>Query and redacted result:</p>
<pre dir="ltr">SELECT ssn FROM mavis.cust_info;

SSN
-------
XXX-XX-4320
XXX-XX-4323
XXX-XX-4325
XXX-XX-4329
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="ASOAG816"></a>
<div class="props_rev_3"><a id="GUID-989ADAF1-5218-4BA1-AEB3-AB223BCCD34A"></a>
<h3 class="sect3">Creating Partial Redaction Policies Using Character Data Types</h3>
<div>
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> <code class="codeph">function_parameters</code> parameter enables you to redact character data types.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-6A584DC4-57AC-4B12-8321-1E61AC7B5EEE" title="Oracle Data Redaction provides special settings to configure policies that use character data types.">Settings for Character Data Types</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-15EE3819-1843-4F64-BB9C-3C29E8871F32" title="The DBMS_REDACT.ADD_POLICY PL/SQL procedure can create a partial redaction policy that uses a character data type.">Example: Partial Redaction Policy Using a Character Data Type</a></p>
</li>
</ul>
</div>
<a id="ASOAG10555"></a>
<div class="props_rev_3"><a id="GUID-6A584DC4-57AC-4B12-8321-1E61AC7B5EEE"></a>
<h4 class="sect4">Settings for Character Data Types</h4>
<div>
<p>Oracle Data Redaction provides special settings to configure policies that use character data types.</p>
<div class="section">
<p>When you set the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> <code class="codeph">function_parameters</code> parameter to define partial redaction of character data types, enter values for the following settings in the order shown. Separate each value with a comma</p>
<div class="infobox-note" id="GUID-6A584DC4-57AC-4B12-8321-1E61AC7B5EEE__GUID-03C8A054-63FC-4386-9C39-A3953BE0EEED">
<p class="notep1">Note:</p>
<p>Be aware that you must use a fixed width character set for the partial redaction. In other words, each character redacted must be replaced by another of equal byte length. If you want to use a variable-length character set (for example, UTF-8), then you must use a regular expression-based redaction. See <a href="configuring-oracle-data-redaction-policies.htm#GUID-071193E2-21C5-4C73-A7BA-6DA4104FD66A" title="The regexp_* parameters of the DBMS_REDACT.ADD_POLICY procedure can create a regular expression-based redaction policy.">Syntax for Creating a Regular Expression-Based Redaction Policy</a> for more information.</p>
</div>
<p>The settings are as follows:</p>
<ol>
<li>
<p><span class="bold">Input format:</span> Defines how the data is currently formatted. Enter <code class="codeph">V</code> for each character that potentially can be redacted, such as all of the digits in a credit card number. Enter <code class="codeph">F</code> for each character that you want to format using a formatting character, such as hyphens or blank spaces in the credit card number. Ensure that each character has a corresponding <code class="codeph">V</code> or <code class="codeph">F</code> value. (The input format values are not case-sensitive.)</p>
</li>
<li>
<p><span class="bold">Output format:</span> Defines how the displayed data should be formatted. Enter <code class="codeph">V</code> for each character to be potentially redacted. Replace each <code class="codeph">F</code> character in the input format with the character that you want to use for the displayed output, such as a hyphen. (The output format values are not case-sensitive.)</p>
</li>
<li>
<p><span class="bold">Mask character:</span> Specifies the character to be used for the redaction. Enter a single character to use for the redaction, such as an asterisk (*).</p>
</li>
<li>
<p><span class="bold">Starting digit position:</span> Specifies the starting <code class="codeph">V</code> digit position for the redaction.</p>
</li>
<li>
<p><span class="bold">Ending digit position:</span> Specifies the ending <code class="codeph">V</code> digit position for the redaction. Do not include the <code class="codeph">F</code> positions when you decide on the ending position value.</p>
</li>
</ol>
<p>For example, the following setting redacts the first 12 <code class="codeph">V</code> digits of the credit card number <code class="codeph">5105 1051 0510 5100</code>, and replaces the <code class="codeph">F</code> positions (which are blank spaces) with hyphens to format it in a style normally used for credit card numbers, resulting in <code class="codeph">****-****-****-4320</code>.</p>
<pre dir="ltr">function_parameters  =&gt; &#39;VVVVFVVVVFVVVVFVVVV,VVVV-VVVV-VVVV-VVVV,*,1,12&#39;,
</pre>
<div class="infoboxnotealso" id="GUID-6A584DC4-57AC-4B12-8321-1E61AC7B5EEE__GUID-82D27121-B41B-42F0-A0C2-92F27906F543">
<p class="notep1">See Also:</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-D32FC6CA-A3B5-47EE-B288-52F1124F9FBD" title="To create a Data Redaction policy, you must use the DBMS_REDACT.ADD_POLICY procedure.">General Syntax of the DBMS_REDACT.ADD_POLICY Procedure</a> for information about other <code class="codeph">DBMS_REDACT.ADD_POLICY</code> parameters</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG599"></a><a id="ASOAG10556"></a>
<div class="props_rev_3"><a id="GUID-15EE3819-1843-4F64-BB9C-3C29E8871F32"></a>
<h4 class="sect4">Example: Partial Redaction Policy Using a Character Data Type</h4>
<div>
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> PL/SQL procedure can create a partial redaction policy that uses a character data type.</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-15EE3819-1843-4F64-BB9C-3C29E8871F32__CACIIDEC">Example 10-4</a> shows how to redact Social Security numbers that are in a <code class="codeph">VARCHAR2</code> data type column and to preserve the character hyphens in the Social Security number.</p>
<div class="example" id="GUID-15EE3819-1843-4F64-BB9C-3C29E8871F32__CACIIDEC">
<p class="titleinexample">Example 10-4 Partially Redacted Character Values</p>
<pre dir="ltr">BEGIN
 DBMS_REDACT.ADD_POLICY(
   object_schema       =&gt; &#39;mavis&#39;, 
   object_name         =&gt; &#39;cust_info&#39;, 
   column_name         =&gt; &#39;ssn&#39;,
   policy_name         =&gt; &#39;redact_cust_ssns2&#39;, 
   function_type       =&gt; DBMS_REDACT.PARTIAL,
   function_parameters =&gt; &#39;VVVFVVFVVVV,VVV-VV-VVVV,*,1,5&#39;,
   expression          =&gt; &#39;1=1&#39;,
   policy_description  =&gt; &#39;Partially redacts Social Security numbers&#39;,
   column_description  =&gt; &#39;ssn contains character Social Security numbers&#39;);
END;
/
</pre>
<p>Query and redacted result:</p>
<pre dir="ltr">SELECT ssn FROM mavis.cust_info;

SSN
-----------
***-**-4320
***-**-4323
***-**-4325
***-**-4329
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="ASOAG817"></a>
<div class="props_rev_3"><a id="GUID-EA35A7F2-24AE-4DAF-AA06-425DE9BD7055"></a>
<h3 class="sect3">Creating Partial Redaction Policies Using Number Data Types</h3>
<div>
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> <code class="codeph">function_parameters</code> parameter enables you to redact number data types.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-5F20EEB4-9DF4-49AB-A4B8-0E7EF6110919" title="When you set values for the number data type, you must specify a mask character, a starting digit position, and ending digit position.">Settings for Number Data Types</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-D20580B4-4EA8-4222-94EB-52E73200E4A9" title="The DBMS_REDACT.ADD_POLICY procedure can create a partial redaction policy that uses a number data type.">Example: Partial Redaction Policy Using a Number Data Type</a></p>
</li>
</ul>
</div>
<a id="ASOAG10557"></a>
<div class="props_rev_3"><a id="GUID-5F20EEB4-9DF4-49AB-A4B8-0E7EF6110919"></a>
<h4 class="sect4">Settings for Number Data Types</h4>
<div>
<p>When you set values for the number data type, you must specify a mask character, a starting digit position, and ending digit position.</p>
<p>For partial redaction of number data types, you can enter values for the following settings for the <code class="codeph">function_parameters</code> parameter of the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure, in the order shown.</p>
<ol>
<li>
<p><span class="bold">Mask character:</span> Specifies the character to display. Enter a number from 0 to 9.</p>
</li>
<li>
<p><span class="bold">Starting digit position:</span> Specifies the starting digit position for the redaction, such as <code class="codeph">1</code> for the first digit.</p>
</li>
<li>
<p><span class="bold">Ending digit position:</span> Specifies the ending digit position for the redaction.</p>
</li>
</ol>
<p>For example, the following setting redacts the first five digits of the Social Security number <code class="codeph">987654321</code>, resulting in <code class="codeph">999994321</code>.</p>
<pre dir="ltr">function_parameters  =&gt; &#39;9,1,5&#39;,
</pre>
<div class="infoboxnotealso" id="GUID-5F20EEB4-9DF4-49AB-A4B8-0E7EF6110919__GUID-4D3635E2-2983-4890-8537-B59363565187">
<p class="notep1">See Also:</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-D32FC6CA-A3B5-47EE-B288-52F1124F9FBD" title="To create a Data Redaction policy, you must use the DBMS_REDACT.ADD_POLICY procedure.">General Syntax of the DBMS_REDACT.ADD_POLICY Procedure</a> for information about other <code class="codeph">DBMS_REDACT.ADD_POLICY</code> parameters</p>
</div>
</div>
</div>
<a id="ASOAG494"></a><a id="ASOAG10558"></a>
<div class="props_rev_3"><a id="GUID-D20580B4-4EA8-4222-94EB-52E73200E4A9"></a>
<h4 class="sect4">Example: Partial Redaction Policy Using a Number Data Type</h4>
<div>
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure can create a partial redaction policy that uses a number data type.</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-D20580B4-4EA8-4222-94EB-52E73200E4A9__CACCHAIF">Example 10-5</a> shows how to partially redact a set of Social Security numbers in the <code class="codeph">mavis.cust_info</code> table, for any application user who logs in. (Hence, the <code class="codeph">expression</code> parameter evaluates to <code class="codeph">TRUE</code>.)</p>
<p>This type of redaction is useful when the application is expecting a formatted number and not a string. In this scenario, the Social Security numbers are in a column of the data type <code class="codeph">NUMBER</code>. In other words, the <code class="codeph">ssn</code> column contains numbers only, not other characters such as hyphens or blank spaces.</p>
<div class="example" id="GUID-D20580B4-4EA8-4222-94EB-52E73200E4A9__CACCHAIF">
<p class="titleinexample">Example 10-5 Partially Redacted Data Redaction Numeric Values</p>
<pre dir="ltr">BEGIN
 DBMS_REDACT.ADD_POLICY(
   object_schema       =&gt; &#39;mavis&#39;, 
   object_name         =&gt; &#39;cust_info&#39;, 
   column_name         =&gt; &#39;ssn&#39;,
   policy_name         =&gt; &#39;redact_cust_ssns1&#39;, 
   function_type       =&gt; DBMS_REDACT.PARTIAL,
   function_parameters =&gt; &#39;7,1,5&#39;,
   expression          =&gt; &#39;1=1&#39;,
   policy_description  =&gt; &#39;Partially redacts Social Security numbers&#39;,
   column_description  =&gt; &#39;ssn contains numeric Social Security numbers&#39;);
END;
/
</pre>
<p>Query and redacted result:</p>
<pre dir="ltr">SELECT ssn FROM mavis.cust_info;

SSN
---------
777774320
777774323
777774325
777774329
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="ASOAG818"></a>
<div class="props_rev_3"><a id="GUID-B8983609-6649-4703-80AF-A8BF7E73C3C9"></a>
<h3 class="sect3">Creating Partial Redaction Policies Using Date-Time Data Types</h3>
<div>
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> <code class="codeph">function_parameters</code> parameter enables you to redact date-time data types.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-3596958D-55D3-4E61-A2AE-D4CD3F6EA79A" title="Oracle Data Redaction provides special settings for configuring date-time data types.">Settings for Date-Time Data Types</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-BF2A8A7C-FFC0-43F9-BF74-BE53B7264A4E" title="The DBMS_REDACT.ADD_POLICY procedure can create a partial redaction policy that uses the date-time data type.">Example: Partial Redaction Policy Using Date-Time Data Type</a></p>
</li>
</ul>
</div>
<a id="ASOAG10559"></a>
<div class="props_rev_3"><a id="GUID-3596958D-55D3-4E61-A2AE-D4CD3F6EA79A"></a>
<h4 class="sect4">Settings for Date-Time Data Types</h4>
<div>
<p>Oracle Data Redaction provides special settings for configuring date-time data types.</p>
<div class="section">
<p>For partial redaction of date-time data types, enter values for the following <code class="codeph">DBMS_REDACT.ADD_POLICY</code> <code class="codeph">function_parameters</code> parameter settings.</p>
<p>Enter these values in the order shown:</p>
<ol>
<li>
<p>m: Redacts the month. To redact with a month name, append <code class="codeph">1</code>&ndash;<code class="codeph">12</code> to lowercase <code class="codeph">m</code>. For example, <code class="codeph">m5</code> displays as <code class="codeph">MAY</code>. To omit redaction, enter an uppercase <code class="codeph">M</code>.</p>
</li>
<li>
<p>d: Redacts the day of the month. To redact with a day of the month, append <code class="codeph">1</code>&ndash;<code class="codeph">31</code> to a lowercase <code class="codeph">d</code>. For example, <code class="codeph">d7</code> displays as <code class="codeph">07</code>. If you enter a higher number than the days of the month (for example, <code class="codeph">31</code> for the month of February), then the last day of the month is displayed (for example, <code class="codeph">28</code>). To omit redaction, enter an uppercase <code class="codeph">D</code>.</p>
</li>
<li>
<p>y: Redacts the year. To redact with a year, append <code class="codeph">1</code>&ndash;<code class="codeph">9999</code> to a lowercase <code class="codeph">y</code>. For example, <code class="codeph">y1984</code> displays as <code class="codeph">84</code>. To omit redaction, enter an uppercase <code class="codeph">Y</code>.</p>
</li>
<li>
<p>h: Redacts the hour. To redact with an hour, append <code class="codeph">0</code>&ndash;<code class="codeph">23</code> to a lowercase <code class="codeph">h</code>. For example, <code class="codeph">h20</code> displays as <code class="codeph">20</code>. To omit redaction, enter an uppercase <code class="codeph">H</code>.</p>
</li>
<li>
<p>m: Redacts the minute. To redact with a minute, append <code class="codeph">0</code>&ndash;<code class="codeph">59</code> to a lowercase <code class="codeph">m</code>. For example, <code class="codeph">m30</code> displays as <code class="codeph">30</code>. To omit redaction, enter an uppercase <code class="codeph">M</code>.</p>
</li>
<li>
<p>s: Redacts the second. To redact with a second, append <code class="codeph">0</code>&ndash;<code class="codeph">59</code> to a lowercase <code class="codeph">s</code>. For example, <code class="codeph">s45</code> displays as <code class="codeph">45</code>. To omit redaction, enter an uppercase <code class="codeph">S</code>.</p>
</li>
</ol>
<div class="infoboxnotealso" id="GUID-3596958D-55D3-4E61-A2AE-D4CD3F6EA79A__GUID-F9DE7EB7-862B-48B2-A87E-67C80C557DC1">
<p class="notep1">See Also:</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-D32FC6CA-A3B5-47EE-B288-52F1124F9FBD" title="To create a Data Redaction policy, you must use the DBMS_REDACT.ADD_POLICY procedure.">General Syntax of the DBMS_REDACT.ADD_POLICY Procedure</a> for information about other <code class="codeph">DBMS_REDACT.ADD_POLICY</code> parameters</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG10561"></a><a id="ASOAG10560"></a>
<div class="props_rev_3"><a id="GUID-BF2A8A7C-FFC0-43F9-BF74-BE53B7264A4E"></a>
<h4 class="sect4">Example: Partial Redaction Policy Using Date-Time Data Type</h4>
<div>
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure can create a partial redaction policy that uses the date-time data type.</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-BF2A8A7C-FFC0-43F9-BF74-BE53B7264A4E__CEGIIHJE">Example 10-6</a> shows how to partially redact a date. This example redacts the birth year of customers; replacing it with <code class="codeph">13</code>, but retaining the remaining values.</p>
<div class="example" id="GUID-BF2A8A7C-FFC0-43F9-BF74-BE53B7264A4E__CEGIIHJE">
<p class="titleinexample">Example 10-6 Partially Redacted Data Redaction Using Date-Time Values</p>
<pre dir="ltr">BEGIN
 DBMS_REDACT.ADD_POLICY(
   object_schema       =&gt; &#39;mavis&#39;, 
   object_name         =&gt; &#39;cust_info&#39;, 
   column_name         =&gt; &#39;birth_date&#39;,
   policy_name         =&gt; &#39;redact_cust_bdate&#39;, 
   function_type       =&gt; DBMS_REDACT.PARTIAL,
   function_parameters =&gt; &#39;mdy2013HMS&#39;,
   expression          =&gt; &#39;1=1&#39;,
   policy_description  =&gt; &#39;Replaces birth year with 2013&#39;,
   column_description  =&gt; &#39;birth_date contains customer&#39;s birthdate&#39;);
END;
/
</pre>
<p>Query and redacted result:</p>
<pre dir="ltr">SELECT birth_date FROM mavis.cust_info;

BIRTH_DATE
07-DEC-13 09.45.40.000000 AM
12-OCT-13 04.23.29.000000 AM
</pre></div>
<!-- class="example" --></div>
</div>
</div>
</div>
<a id="ASOAG10562"></a>
<div class="props_rev_3"><a id="GUID-1C20F828-2922-4846-8536-CC667B65FD01"></a>
<h2 class="sect2">Creating a Regular Expression-Based Redaction Policy</h2>
<div>
<p>A regular expression-based redaction policy enables you to redact data based on a search-and-replace model.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-335FAD3A-B196-4D31-AF88-B857D5F39B8A" title="Regular expression-based redaction enables you to search for patterns of data to redact.">About Creating Regular Expression-Based Redaction Policies</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-071193E2-21C5-4C73-A7BA-6DA4104FD66A" title="The regexp_* parameters of the DBMS_REDACT.ADD_POLICY procedure can create a regular expression-based redaction policy.">Syntax for Creating a Regular Expression-Based Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-C5B270A8-B16E-49A1-9650-E928F2BCB3C4" title="You can use formats for both the regexp_pattern and regexp_replace_string parameters in the DBMS_REDACT.ADD_POLICY procedure.">Regular Expression-Based Redaction Policies Using Formats</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-F2A484AE-9209-4F71-A2E3-CBCECAD5DD4C" title="You can customize regular expressions in Data Redaction policies.">Custom Regular Expression Redaction Policies</a></p>
</li>
</ul>
</div>
<a id="ASOAG10563"></a>
<div class="props_rev_3"><a id="GUID-335FAD3A-B196-4D31-AF88-B857D5F39B8A"></a>
<h3 class="sect3">About Creating Regular Expression-Based Redaction Policies</h3>
<div>
<p>Regular expression-based redaction enables you to search for patterns of data to redact.</p>
<p>For example, you can use regular expressions to redact email addresses, which can have varying character lengths. It is designed for use with character data only. You can use formats for the search and replace operation, or you can create custom pattern formats.</p>
<p>You cannot use regular expressions to redact a subset of the values in a column. The <code class="codeph">REGEXP_PATTERN</code> (regular expression pattern) must match <span class="italic">all</span> of the values in order for the <code class="codeph">REGEXP_REPLACE_STRING</code> setting to take effect, and the <code class="codeph">REGEXP_REPLACE_STRING</code> must change the value.</p>
<p>For rows where the <code class="codeph">REGEXP_PATTERN</code> fails to match, Data Redaction performs <code class="codeph">DBMS_REDACT.FULL</code> redaction. This mitigates the risk of a mistake in the <code class="codeph">REGEXP_PATTERN</code> which causes the regular expression to fail to match all of the values in the column, from showing the actual data for those rows which it failed to match.</p>
<p>In addition, if no change to the value occurs as a result of the <code class="codeph">REGEXP_REPLACE_STRING</code> setting during regular expression replacement operation, Data Redaction performs <code class="codeph">DBMS_REDACT.FULL</code> redaction.</p>
</div>
</div>
<a id="ASOAG10564"></a>
<div class="props_rev_3"><a id="GUID-071193E2-21C5-4C73-A7BA-6DA4104FD66A"></a>
<h3 class="sect3">Syntax for Creating a Regular Expression-Based Redaction Policy</h3>
<div>
<p>The <code class="codeph">regexp_*</code> parameters of the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure can create a regular expression-based redaction policy.</p>
<div class="section">
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> fields for creating a regular expression-based data redaction policy are as follows:</p>
<pre dir="ltr">DBMS_REDACT.ADD_POLICY (
   object_schema           IN VARCHAR2 := NULL, 
   object_name             IN VARCHAR2,
   column_name             IN VARCHAR2 := NULL,
   policy_name             IN VARCHAR2,
   function_type           IN BINARY_INTEGER := NULL,
   expression              IN VARCHAR2,
   enable                  IN BOOLEAN := TRUE,
   regexp_pattern          IN VARCHAR2 := NULL,
   regexp_replace_string   IN VARCHAR2 := NULL,
   regexp_position         IN BINARY_INTEGER := 1,
   regexp_occurrence       IN BINARY_INTEGER := 0,
   regexp_match_parameter  IN VARCHAR2 := NULL);
</pre>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">object_schema</code>, <code class="codeph">object_name</code>, <code class="codeph">column_name</code>, <code class="codeph">policy_name</code>, <code class="codeph">expression</code>, <code class="codeph">enable</code>: See <a href="configuring-oracle-data-redaction-policies.htm#GUID-D32FC6CA-A3B5-47EE-B288-52F1124F9FBD" title="To create a Data Redaction policy, you must use the DBMS_REDACT.ADD_POLICY procedure.">General Syntax of the DBMS_REDACT.ADD_POLICY Procedure</a>.</p>
</li>
<li>
<p><code class="codeph">function_type</code>: Specifies the function used to set the type of redaction. Enter <code class="codeph">DBMS_REDACT.REGEXP</code>.</p>
<p>Note the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>When you set the <code class="codeph">function_type</code> parameter to <code class="codeph">DBMS_REDACT.REGEXP</code>, omit the <code class="codeph">function_parameters</code> parameter.</p>
</li>
<li>
<p>Specify the regular expressions&mdash;<code class="codeph">regexp_pattern</code>, <code class="codeph">regexp_replace</code>, <code class="codeph">regexp_position</code>, <code class="codeph">regexp_occurrence</code>, and <code class="codeph">regexp_match_parameter</code>&mdash;in much the same way that you specify the <code class="codeph">pattern</code>, <code class="codeph">replace</code>, <code class="codeph">position</code>, <code class="codeph">occurrence</code>, and <code class="codeph">match_parameter</code> arguments to the <code class="codeph">REGEXP_REPLACE</code> SQL function. See <a class="olink SQLRF06302" target="_blank" href="../SQLRF/functions163.htm#SQLRF06302"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about the <code class="codeph">REGEXP_REPLACE</code> SQL function.</p>
</li>
</ul>
</li>
<li>
<p><code class="codeph">regexp_pattern</code>: Describes the search pattern for data that must be matched. If it finds a match, then Oracle Database replaces the data as specified by the <code class="codeph">regexp_replace_string</code> setting. See the following sections for more information:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-C5B270A8-B16E-49A1-9650-E928F2BCB3C4" title="You can use formats for both the regexp_pattern and regexp_replace_string parameters in the DBMS_REDACT.ADD_POLICY procedure.">Regular Expression-Based Redaction Policies Using Formats</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-F2A484AE-9209-4F71-A2E3-CBCECAD5DD4C" title="You can customize regular expressions in Data Redaction policies.">Custom Regular Expression Redaction Policies</a></p>
</li>
</ul>
</li>
<li>
<p><code class="codeph">regexp_replace_string</code>: Specifies how you want to replace the data to be redacted. See the following sections for more information:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-C5B270A8-B16E-49A1-9650-E928F2BCB3C4" title="You can use formats for both the regexp_pattern and regexp_replace_string parameters in the DBMS_REDACT.ADD_POLICY procedure.">Regular Expression-Based Redaction Policies Using Formats</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-F2A484AE-9209-4F71-A2E3-CBCECAD5DD4C" title="You can customize regular expressions in Data Redaction policies.">Custom Regular Expression Redaction Policies</a></p>
</li>
</ul>
</li>
<li>
<p><code class="codeph">regexp_position</code>: Specifies the starting position for the string search. The value that you enter must be a positive integer indicating the character of the <code class="codeph">column_name</code> data where Oracle Database should begin the search. The default is <code class="codeph">1</code> or the <code class="codeph">RE_BEGINNING</code> format, meaning that Oracle Database begins the search at the first character of the <code class="codeph">column_name</code> data.</p>
</li>
<li>
<p><code class="codeph">regexp_occurrence</code>: Specifies how to perform the search and replace operation. The value that you enter must be a nonnegative integer indicating the occurrence of the replace operation:</p>
<ul style="list-style-type: disc;">
<li>
<p>If you specify <code class="codeph">0</code> or the <code class="codeph">RE_ALL</code> format, then Oracle Database replaces all of the occurrences of the match.</p>
</li>
<li>
<p>If you specify the <code class="codeph">RE_FIRST</code> format, then Oracle Database replaces the first occurrence of the match.</p>
</li>
<li>
<p>If you specify a positive integer <span class="italic"><code class="codeph">n</code></span>, then Oracle Database replaces the <span class="italic"><code class="codeph">n</code></span>th occurrence of the match.</p>
</li>
</ul>
<p>If the occurrence is greater than 1, then the database searches for the second occurrence beginning with the first character following the first occurrence of pattern, and so forth.</p>
</li>
<li>
<p><code class="codeph">regexp_match_parameter</code>: Specifies a text literal that lets you change the default matching behavior of the function. The behavior of this parameter is the same for this function as for the <code class="codeph">REGEXP_REPLACE</code> SQL function. See <a class="olink SQLRF06302" target="_blank" href="../SQLRF/functions163.htm#SQLRF06302"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for detailed information.</p>
<p>To filter the search so that it is not case sensitive, specify the <code class="codeph">RE_MATCH_CASE_INSENSITIVE</code> format.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG10565"></a>
<div class="props_rev_3"><a id="GUID-C5B270A8-B16E-49A1-9650-E928F2BCB3C4"></a>
<h3 class="sect3">Regular Expression-Based Redaction Policies Using Formats</h3>
<div>
<p>You can use formats for both the <code class="codeph">regexp_pattern</code> and <code class="codeph">regexp_replace_string</code> parameters in the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-A532021D-B1E0-46EE-B84E-3C9882D19B21" title="The regular expression formats represent commonly used expressions that you may want to use, such as replacing digits within a credit card number.">Regular Expression Formats</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-4ACBFFF5-175D-4A05-B4B4-A18C12B2E325" title="You can use the DBMS_REDACT.ADD_POLICY PL/SQL procedure to create a regular expression redaction policy that uses formats.">Example: Regular Expression Redaction Policy Using Formats</a></p>
</li>
</ul>
</div>
<a id="ASOAG10567"></a><a id="ASOAG10568"></a><a id="ASOAG10566"></a>
<div class="props_rev_3"><a id="GUID-A532021D-B1E0-46EE-B84E-3C9882D19B21"></a>
<h4 class="sect4">Regular Expression Formats</h4>
<div>
<p>The regular expression formats represent commonly used expressions that you may want to use, such as replacing digits within a credit card number.</p>
<div class="section">
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-A532021D-B1E0-46EE-B84E-3C9882D19B21__CEGIICIG" title="Regular Expression regexp_pattern Formats">Table 10-3</a> describes <a id="d30126e5590" class="indexterm-anchor"></a>the formats that you can use with the <code class="codeph">regexp_pattern</code> parameter in the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-A532021D-B1E0-46EE-B84E-3C9882D19B21__CEGIICIG">
<p class="titleintable">Table 10-3 Formats for the regexp_pattern Parameter</p>
<table class="cellalignment5391" title="Formats for the regexp_pattern Parameter" summary="Regular Expression regexp_pattern Formats">
<thead>
<tr class="cellalignment5373">
<th class="cellalignment5398" id="d30126e5613">Format</th>
<th class="cellalignment5398" id="d30126e5616">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5373">
<td class="cellalignment5399" id="d30126e5621" headers="d30126e5613">
<p><code class="codeph">DBMS_REDACT.RE_PATTERN_ANY_DIGIT</code></p>
</td>
<td class="cellalignment5399" headers="d30126e5621 d30126e5616">
<p>Searches for any digit. Replaces the identified pattern with the characters specified by the<code class="codeph">regexp_replace_string</code> parameter. The <code class="codeph">DBMS_REDACT.RE_PATTERN_ANY_DIGIT</code> is commonly used with the following values of the <code class="codeph">regexp_replace_string</code> parameter:</p>
<pre dir="ltr">regexp_replace_string =&gt; DBMS_REDACT.RE_REDACT_WITH_SINGLE_X, 
</pre>
<p>This setting replaces any matched digit with the <code class="codeph">X</code> character.</p>
<p>The following setting replaces any matched digit with the <code class="codeph">1</code> character.</p>
<pre dir="ltr">regexp_replace_string =&gt; DBMS_REDACT.RE_REDACT_WITH_SINGLE_1, 
</pre></td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5399" id="d30126e5652" headers="d30126e5613">
<p><code class="codeph">DBMS_REDACT.RE_PATTERN_CC_L6_T4</code></p>
</td>
<td class="cellalignment5399" headers="d30126e5652 d30126e5616">
<p>Searches for the middle digits of any credit card that has 6 leading digits and 4 trailing digits. Replaces the identified pattern with the characters specified by the<code class="codeph">regexp_replace_string</code> parameter.</p>
<p>The appropriate <code class="codeph">regexp_replace_string</code> setting to use with this format is <code class="codeph">DBMS_REDACT.RE_REDACT_CC_MIDDLE_DIGITS</code>, which finds any credit card that could have 6 leading and 4 trailing digits left as <a href="glossary.htm#GUID-82E2FC6D-718F-4367-9D7E-DC130F360FC3"><span class="xrefglossterm">actual data</span></a>. It then redacts the middle digits.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5399" id="d30126e5675" headers="d30126e5613">
<p><code class="codeph">DBMS_REDACT.RE_PATTERN_US_PHONE</code></p>
</td>
<td class="cellalignment5399" headers="d30126e5675 d30126e5616">
<p>Searches for any U.S. telephone number. Replaces the identified pattern with the characters specified by the<code class="codeph">regexp_replace_string</code> parameter</p>
<p>The appropriate <code class="codeph">regexp_replace_string</code> setting to use with this format is <code class="codeph">DBMS_REDACT.RE_REDACT_US_PHONE_L7</code>, which finds United States phone numbers and then redacts the last 7 digits.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5399" id="d30126e5694" headers="d30126e5613">
<p><code class="codeph">DBMS_REDACT.RE_PATTERN_EMAIL_ADDRESS</code></p>
</td>
<td class="cellalignment5399" headers="d30126e5694 d30126e5616">
<p>Searches for any email address. Replaces the identified pattern with the characters specified by the<code class="codeph">regexp_replace_string</code> parameter</p>
<p>The appropriate <code class="codeph">regexp_replace_string</code> settings that you can use with this format are as follows:</p>
<p><code class="codeph">RE_REDACT_EMAIL_NAME</code>, which finds any email address and redacts the email user name</p>
<p><code class="codeph">RE_REDACT_EMAIL_DOMAIN</code>, which finds any email address and redacts the email domain</p>
<p><code class="codeph">RE_REDACT_EMAIL_ENTIRE</code>, which finds any email address and redacts the entire email address</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5399" id="d30126e5722" headers="d30126e5613">
<p><code class="codeph">DBMS_REDACT.RE_PATTERN_IP_ADDRESS</code></p>
</td>
<td class="cellalignment5399" headers="d30126e5722 d30126e5616">
<p>Searches for an IP address. Replaces the identified pattern with the characters specified by the<code class="codeph">regexp_replace_string</code> parameter.</p>
<p>The appropriate <code class="codeph">regexp_replace_string</code> setting to use with this format is <code class="codeph">DBMS_REDACT.RE_REDACT_IP_L3</code>, which replaces the last section of the dotted decimal string representation of an IP address with the characters <code class="codeph">999</code> to indicate that it was redacted.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-A532021D-B1E0-46EE-B84E-3C9882D19B21__CEGCIBHA" title="Regular Expression Format">Table 10-4</a> describes formats that you can use with the <code class="codeph">regexp_replace_string</code> parameter in the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-A532021D-B1E0-46EE-B84E-3C9882D19B21__CEGCIBHA">
<p class="titleintable">Table 10-4 Formats for the regexp_replace_string Parameter</p>
<table class="cellalignment5391" title="Formats for the regexp_replace_string Parameter " summary="Regular Expression Format">
<thead>
<tr class="cellalignment5373">
<th class="cellalignment5400" id="d30126e5766">Format</th>
<th class="cellalignment5401" id="d30126e5769">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5373">
<td class="cellalignment5402" id="d30126e5774" headers="d30126e5766">
<p><code class="codeph">DBMS_REDACT.RE_REDACT_WITH_SINGLE_X</code></p>
</td>
<td class="cellalignment5403" headers="d30126e5774 d30126e5769">
<p>Replaces the data with a single <code class="codeph">X</code> character for each of the <a href="glossary.htm#GUID-82E2FC6D-718F-4367-9D7E-DC130F360FC3"><span class="xrefglossterm">actual data</span></a> characters. For example, the credit card number <code class="codeph">5105 1051 0510 5100</code> could be replaced with <code class="codeph">XXXX XXXX XXXX XXXX</code>.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5402" id="d30126e5795" headers="d30126e5766">
<p><code class="codeph">DBMS_REDACT.RE_REDACT_WITH_SINGLE_1</code></p>
</td>
<td class="cellalignment5403" headers="d30126e5795 d30126e5769">
<p>Replaces the data with a single <code class="codeph">1</code> digit for each of the actual data digits. For example, the credit card number <code class="codeph">5105 1051 0510 5100</code> could be replaced with <code class="codeph">1111 1111 1111 1111</code>.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5402" id="d30126e5812" headers="d30126e5766">
<p><code class="codeph">DBMS_REDACT.RE_REDACT_CC_MIDDLE_DIGITS</code></p>
</td>
<td class="cellalignment5403" headers="d30126e5812 d30126e5769">
<p>Redacts the middle digits in credit card numbers, as specified by setting the <code class="codeph">regexp_pattern</code> parameter with the <code class="codeph">RE_PATTERN_CC_L6_T4</code> format. The redaction replaces each redacted character with an <code class="codeph">X</code>. For example, the credit card number <code class="codeph">5105 1051 0510 5100</code> could be replaced with <code class="codeph">5105 10XX XXXX 5100</code>.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5402" id="d30126e5835" headers="d30126e5766">
<p><code class="codeph">DBMS_REDACT.RE_REDACT_PHONE_L7</code></p>
</td>
<td class="cellalignment5403" headers="d30126e5835 d30126e5769">
<p>Redacts the last 7 digits of U.S. telephone numbers, as specified by setting the <code class="codeph">regexp_pattern</code> parameter with the <code class="codeph">RE_PATTERN_US_PHONE</code> format. The redaction replaces each redacted character with an <code class="codeph">X</code>. This setting only applies to hyphenated phone numbers, not phone numbers with spaces. For example, the telephone number <code class="codeph">415-555-0100</code> could be replaced with <code class="codeph">415-XXX-XXXX</code>.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5402" id="d30126e5858" headers="d30126e5766">
<p><code class="codeph">DBMS_REDACT.RE_REDACT_EMAIL_NAME</code></p>
</td>
<td class="cellalignment5403" headers="d30126e5858 d30126e5769">
<p>Redacts the email name as specified by setting the <code class="codeph">regexp_pattern</code> parameter with the <code class="codeph">RE_PATTERN_EMAIL_ADDRESS</code> format. The redaction replaces the email user name with four <code class="codeph">x</code> characters. For example, the email address <code class="codeph">psmith@example.com</code> could be replaced with <code class="codeph">xxxx@example.com</code>.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5402" id="d30126e5881" headers="d30126e5766">
<p><code class="codeph">DBMS_REDACT.RE_REDACT_EMAIL_DOMAIN</code></p>
</td>
<td class="cellalignment5403" headers="d30126e5881 d30126e5769">
<p>Redacts the email domain name as specified by setting the <code class="codeph">regexp_pattern</code> parameter with the <code class="codeph">RE_PATTERN_EMAIL_ADDRESS</code> format. The redaction replaces the domain with five <code class="codeph">x</code> characters. For example, the email address <code class="codeph">psmith@example.com</code> could be replaced with <code class="codeph">psmith@xxxxx.com</code>.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5402" id="d30126e5904" headers="d30126e5766">
<p><code class="codeph">DBMS_REDACT.RE_REDACT_IP_L3</code></p>
</td>
<td class="cellalignment5403" headers="d30126e5904 d30126e5769">
<p>Redacts the last three digits of the IP address as specified by setting the <code class="codeph">regexp_pattern</code> parameter with the <code class="codeph">RE_PATTERN_IP_ADDRESS</code> format. For example, the IP address <code class="codeph">192.0.2.254</code> could be replaced with <code class="codeph">192.0.2.999</code>, which is an invalid IP address.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-A532021D-B1E0-46EE-B84E-3C9882D19B21__GUID-EB6C9633-2A80-4FC3-B4F4-17451EA48EDA">
<p class="notep1">See Also:</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-D32FC6CA-A3B5-47EE-B288-52F1124F9FBD" title="To create a Data Redaction policy, you must use the DBMS_REDACT.ADD_POLICY procedure.">General Syntax of the DBMS_REDACT.ADD_POLICY Procedure</a> for information about other <code class="codeph">DBMS_REDACT.ADD_POLICY</code> parameters</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG894"></a><a id="ASOAG10569"></a>
<div class="props_rev_3"><a id="GUID-4ACBFFF5-175D-4A05-B4B4-A18C12B2E325"></a>
<h4 class="sect4">Example: Regular Expression Redaction Policy Using Formats</h4>
<div>
<p>You can use the <span class="apiname">DBMS_REDACT.ADD_POLICY</span> PL/SQL procedure to create a regular expression redaction policy that uses formats.</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-4ACBFFF5-175D-4A05-B4B4-A18C12B2E325__CACFBCEF">Example 10-7</a> shows how to use regular expression formats to redact credit card numbers.</p>
<div class="example" id="GUID-4ACBFFF5-175D-4A05-B4B4-A18C12B2E325__CACFBCEF">
<p class="titleinexample">Example 10-7 Regular Expression Data Redaction Character Values</p>
<pre dir="ltr">BEGIN
 DBMS_REDACT.ADD_POLICY(
   object_schema          =&gt; &#39;mavis&#39;, 
   object_name            =&gt; &#39;cust_info&#39;, 
   column_name            =&gt; &#39;cc_num&#39;,
   policy_name            =&gt; &#39;redact_cust_cc_nums&#39;, 
   function_type          =&gt; DBMS_REDACT.REGEXP,
   function_parameters    =&gt; NULL,
   expression             =&gt; &#39;1=1&#39;,
   regexp_pattern         =&gt; DBMS_REDACT.RE_PATTERN_CC_L6_T4,
   regexp_replace_string  =&gt; DBMS_REDACT.RE_REDACT_CC_MIDDLE_DIGITS,
   regexp_position        =&gt; DBMS_REDACT.RE_BEGINNING,
   regexp_occurrence      =&gt; DBMS_REDACT.RE_FIRST,
   regexp_match_parameter =&gt; DBMS_REDACT.RE_MATCH_CASE_INSENSITIVE,
   policy_description     =&gt; &#39;Regular expressions to redact credit card numbers&#39;,
   column_description     =&gt; &#39;cc_num contains customer credit card numbers&#39;);
END;
/
</pre>
<p>Query and redacted result:</p>
<pre dir="ltr">SELECT cc_num FROM mavis.cust_info;

CC_NUM
-------
401288XXXXXX1881
411111XXXXXX1111
555555XXXXXX1111
511111XXXXXX1118
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="ASOAG10570"></a>
<div class="props_rev_3"><a id="GUID-F2A484AE-9209-4F71-A2E3-CBCECAD5DD4C"></a>
<h3 class="sect3">Custom Regular Expression Redaction Policies</h3>
<div>
<p>You can customize regular expressions in Data Redaction policies.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-B12EB935-7255-4A31-A222-1812EDB91AF6" title="Oracle Data Redaction provides special settings to configure policies that use regular expressions.">Settings for Custom Regular Expressions</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-1AB29DE7-F313-487F-872D-8440FA590616" title="The DBMS_REDACT.ADD_POLICY procedure regexp* parameters can create a custom regular expression redaction policy.">Example: Custom Regular Expression Redaction Policy</a></p>
</li>
</ul>
</div>
<a id="ASOAG10571"></a>
<div class="props_rev_3"><a id="GUID-B12EB935-7255-4A31-A222-1812EDB91AF6"></a>
<h4 class="sect4">Settings for Custom Regular Expressions</h4>
<div>
<p>Oracle Data Redaction provides special settings to configure policies that use regular expressions.</p>
<div class="section">
<p>To create custom regular expression redaction policies, you use the following parameters in the <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">regexp_pattern</code>: This pattern is usually a text literal and can be of any of the data types <code class="codeph">CHAR</code>, <code class="codeph">VARCHAR2</code>, <code class="codeph">NCHAR</code>, or <code class="codeph">NVARCHAR2</code>. The pattern can contain up to 512 bytes. For further information about writing the regular expression for the <code class="codeph">regexp_pattern</code> parameter, see the description of the <code class="codeph">pattern</code> argument of the <code class="codeph">REGEXP_REPLACE</code> SQL function in <a class="olink SQLRF020" target="_blank" href="../SQLRF/ap_posix.htm#SQLRF020"><span><cite>Oracle Database SQL Language Reference</cite></span></a>, because the support that Data Redaction provides for regular expression matching is similar to that of the <code class="codeph">REGEXP_REPLACE</code> SQL function.</p>
</li>
<li>
<p><code class="codeph">regexp_replace_string</code>: This data can be of any of the data types <code class="codeph">CHAR</code>, <code class="codeph">VARCHAR2</code>, <code class="codeph">NCHAR</code>, or <code class="codeph">NVARCHAR2</code>. The <code class="codeph">regexp_replace_string</code> can contain up to 500 back references to subexpressions in the form <code class="codeph">\</code><span class="italic"><code class="codeph">n</code></span>, where <span class="italic"><code class="codeph">n</code></span> is a number from 1 to 9. If you want to include a backslash (\) in the <code class="codeph">regexp_replace_string</code> setting, then you must precede it with the escape character, which is also a backslash. For example, to literally replace the matched pattern with <code class="codeph">\2</code> (rather than replace it with the second matched subexpression of the matched pattern), you enter <code class="codeph">\\2</code> in the <code class="codeph">regexp_replace_string</code> setting. For more information, see <a class="olink SQLRF55541" target="_blank" href="../SQLRF/ap_posix001.htm#SQLRF55541"><span><cite>Oracle Database SQL Language Reference</cite></span></a>.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-B12EB935-7255-4A31-A222-1812EDB91AF6__GUID-BE19B7C2-A620-468F-960B-3A5C6CAE6707">
<p class="notep1">See Also:</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-D32FC6CA-A3B5-47EE-B288-52F1124F9FBD" title="To create a Data Redaction policy, you must use the DBMS_REDACT.ADD_POLICY procedure.">General Syntax of the DBMS_REDACT.ADD_POLICY Procedure</a> for information about other <code class="codeph">DBMS_REDACT.ADD_POLICY</code> parameters</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG819"></a><a id="ASOAG10572"></a>
<div class="props_rev_3"><a id="GUID-1AB29DE7-F313-487F-872D-8440FA590616"></a>
<h4 class="sect4">Example: Custom Regular Expression Redaction Policy</h4>
<div>
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure <span class="apiname">regexp</span>* parameters can create a custom regular expression redaction policy.</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-1AB29DE7-F313-487F-872D-8440FA590616__CACJBDAI">Example 10-8</a> shows how to use regular expressions to redact the <code class="codeph">emp_id</code> column data. In this example, taken together, the <code class="codeph">regexp_pattern</code> and <code class="codeph">regexp_replace_string</code> parameters do the following: first, find the pattern of 9 digits. For reference, break them into three groups that contain the first 3, the next 2, and then the last 4 digits. Then, replace all 9 digits with <code class="codeph">XXXXX</code> concatenated with the third group (the last 4 digits) as found in the original pattern.</p>
<p>Query and redacted result:</p>
<pre dir="ltr">SELECT emp_id FROM mavis.cust_info;

EMP_ID
------------
XXXXX1234
XXXXX5678
</pre>
<div class="example" id="GUID-1AB29DE7-F313-487F-872D-8440FA590616__CACJBDAI">
<p class="titleinexample">Example 10-8 Partially Redacted Data Redaction Using Regular Expressions</p>
<pre dir="ltr">BEGIN
 DBMS_REDACT.ADD_POLICY(
   object_schema          =&gt; &#39;mavis&#39;, 
   object_name            =&gt; &#39;cust_info&#39;, 
   column_name            =&gt; &#39;emp_id&#39;,
   policy_name            =&gt; &#39;redact_cust_ids&#39;, 
   function_type          =&gt; DBMS_REDACT.REGEXP,
   expression             =&gt; &#39;1=1&#39;,
   regexp_pattern         =&gt; &#39;(\d\d\d)(\d\d)(\d\d\d\d)&#39;,
   regexp_replace_string  =&gt; &#39;XXXXX\3&#39;,
   regexp_position        =&gt; 1,
   regexp_occurrence      =&gt; 0,
   regexp_match_parameter =&gt; &#39;i&#39;,
   policy_description     =&gt; &#39;Redacts customer IDs using regular expression&#39;,
   column_description     =&gt; &#39;emp_id contains employee ID numbers&#39;);
END;
/
</pre></div>
<!-- class="example" --></div>
</div>
</div>
</div>
<a id="ASOAG10573"></a>
<div class="props_rev_3"><a id="GUID-E697C12B-1121-4C3D-B895-1587AF4CA218"></a>
<h2 class="sect2">Creating a Random Redaction Policy</h2>
<div>
<p>A random redaction policy presents redacted data as randomly generated values, such as <code class="codeph">Ukjsl32[[]]]s</code>.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-24C5D8B5-C6BC-40FB-9C68-126835AB03EA" title="A random redaction policy presents the redacted data to the querying application user as randomly generated values, based on the column data type.">Syntax for Creating a Random Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-0C9A49C4-EAF7-4566-B8C9-4808314050DD" title="You can use the DBMS_REDACT.ADD_POLICY PL/SQL procedure create a random redaction policy.">Example: Random Redaction Policy</a></p>
</li>
</ul>
</div>
<a id="ASOAG10575"></a>
<div class="props_rev_3"><a id="GUID-24C5D8B5-C6BC-40FB-9C68-126835AB03EA"></a>
<h3 class="sect3">Syntax for Creating a Random Redaction Policy</h3>
<div>
<p>A random redaction policy presents the redacted data to the querying application user as randomly generated values, based on the column data type.</p>
<div class="section">
<p>Be aware that LOB columns are not supported.</p>
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> fields for creating a random redaction policy are as follows:</p>
<pre dir="ltr">DBMS_REDACT.ADD_POLICY (
   object_schema           IN VARCHAR2 := NULL, 
   object_name             IN VARCHAR2,
   column_name             IN VARCHAR2 := NULL,
   policy_name             IN VARCHAR2,
   function_type           IN BINARY_INTEGER := NULL,
   expression              IN VARCHAR2,
   enable                  IN BOOLEAN := TRUE);
</pre>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">object_schema</code>, <code class="codeph">object_name</code>, <code class="codeph">column_name</code>, <code class="codeph">policy_name</code>, <code class="codeph">expression</code>, <code class="codeph">enable</code>: See <a href="configuring-oracle-data-redaction-policies.htm#GUID-D32FC6CA-A3B5-47EE-B288-52F1124F9FBD" title="To create a Data Redaction policy, you must use the DBMS_REDACT.ADD_POLICY procedure.">General Syntax of the DBMS_REDACT.ADD_POLICY Procedure</a>.</p>
</li>
<li>
<p><code class="codeph">function_type</code>: Specifies the function used to set the type of redaction. Enter <code class="codeph">DBMS_REDACT.RANDOM</code>.</p>
<p>If you omit the <code class="codeph">function_type</code> parameter, then the default redaction <code class="codeph">function_type</code> setting is <code class="codeph">DBMS_REDACT.FULL</code>.</p>
<p>Remember that the data type of the column determines which <code class="codeph">function_type</code> settings that you are permitted to use. See <a href="oracle-data-redaction-features-and-capabilities.htm#GUID-F7E1C148-8C15-4F18-91BA-878A90284D12" title="The full, partial, and random data redaction styles affect the Oracle built-in, ANSI, user-defined, and Oracle supplied types in different ways.">Comparison of Full, Partial, and Random Redaction Based on Data Types</a>.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG720"></a><a id="ASOAG10576"></a>
<div class="props_rev_3"><a id="GUID-0C9A49C4-EAF7-4566-B8C9-4808314050DD"></a>
<h3 class="sect3">Example: Random Redaction Policy</h3>
<div>
<p>You can use the <span class="apiname">DBMS_REDACT.ADD_POLICY</span> PL/SQL procedure create a random redaction policy.</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-0C9A49C4-EAF7-4566-B8C9-4808314050DD__CACCIIJJ">Example 10-9</a> shows how to generate random values. Each time you run the <code class="codeph">SELECT</code> statement, the output will be different.</p>
<div class="example" id="GUID-0C9A49C4-EAF7-4566-B8C9-4808314050DD__CACCIIJJ">
<p class="titleinexample">Example 10-9 Randomly Redacted Data Redaction Values</p>
<pre dir="ltr">BEGIN
 DBMS_REDACT.ADD_POLICY(
   object_schema   =&gt; &#39;mavis&#39;, 
   object_name     =&gt; &#39;cust_info&#39;, 
   column_name     =&gt; &#39;login_username&#39;,
   policy_name     =&gt; &#39;redact_cust_rand_username&#39;, 
   function_type   =&gt; DBMS_REDACT.RANDOM,
   expression      =&gt; &#39;SYS_CONTEXT(&#39;&#39;USERENV&#39;&#39;,&#39;&#39;SESSION_USER&#39;&#39;) = &#39;&#39;APP_USER&#39;&#39;&#39;);
END;
/
</pre>
<p>Query and redacted result:</p>
<pre dir="ltr">SELECT login_username FROM mavis.cust_info;

LOGIN_USERNAME
--------------
N[CG{\pTVcK
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="ASOAG10577"></a>
<div class="props_rev_3"><a id="GUID-1EC4068F-7404-437F-BFFE-87917F2619DB"></a>
<h2 class="sect2">Creating a Policy That Uses No Redaction</h2>
<div>
<p>You can create policies that use no redaction at all, for when you want to test the policy in a development environment.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-6A3E8299-77E0-49C3-9C38-631517DC3CDA" title="The None redaction type option can be used to test the internal operation of redaction policies.">Syntax for Creating a Policy with No Redaction</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-A18EAD3C-6C23-4514-9FC0-C4A4A3C47155" title="The DBMS_REDACT.ADD_POLICY procedure can create a policy that performs no redaction.">Example: Performing No Redaction</a></p>
</li>
</ul>
</div>
<a id="ASOAG10579"></a>
<div class="props_rev_3"><a id="GUID-6A3E8299-77E0-49C3-9C38-631517DC3CDA"></a>
<h3 class="sect3">Syntax for Creating a Policy with No Redaction</h3>
<div>
<p>The None redaction type option can be used to test the internal operation of redaction policies.</p>
<p>The None redaction type has no effect on the query results against tables that have policies defined on them. You can use this option to test the redaction policy definitions before applying them to a production environment. Be aware that LOB columns are not supported.</p>
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> fields for creating a policy with no redaction are as follows:</p>
<pre dir="ltr">DBMS_REDACT.ADD_POLICY (
   object_schema           IN VARCHAR2 := NULL, 
   object_name             IN VARCHAR2,
   column_name             IN VARCHAR2 := NULL,
   policy_name             IN VARCHAR2,
   function_type           IN BINARY_INTEGER := NULL,
   expression              IN VARCHAR2,
   enable                  IN BOOLEAN := TRUE);
</pre>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">object_schema</code>, <code class="codeph">object_name</code>, <code class="codeph">column_name</code>, <code class="codeph">policy_name</code>, <code class="codeph">expression</code>, <code class="codeph">enable</code>: See <a href="configuring-oracle-data-redaction-policies.htm#GUID-D32FC6CA-A3B5-47EE-B288-52F1124F9FBD" title="To create a Data Redaction policy, you must use the DBMS_REDACT.ADD_POLICY procedure.">General Syntax of the DBMS_REDACT.ADD_POLICY Procedure</a>.</p>
</li>
<li>
<p><code class="codeph">function_type</code>: Specifies the functions used to set the type of data redaction. Enter <code class="codeph">DBMS_REDACT.NONE</code>.</p>
<p>If you omit the <code class="codeph">function_type</code> parameter, then the default redaction <code class="codeph">function_type</code> setting is <code class="codeph">DBMS_REDACT.FULL</code>.</p>
</li>
</ul>
</div>
</div>
<a id="ASOAG927"></a><a id="ASOAG10580"></a>
<div class="props_rev_3"><a id="GUID-A18EAD3C-6C23-4514-9FC0-C4A4A3C47155"></a>
<h3 class="sect3">Example: Performing No Redaction</h3>
<div>
<p>The <code class="codeph">DBMS_REDACT.ADD_POLICY</code> procedure can create a policy that performs no redaction.</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-A18EAD3C-6C23-4514-9FC0-C4A4A3C47155__CACEAABG">Example 10-10</a> shows how to create a Data Redaction policy that does not redact any of the displayed values.</p>
<div class="example" id="GUID-A18EAD3C-6C23-4514-9FC0-C4A4A3C47155__CACEAABG">
<p class="titleinexample">Example 10-10 No Redacted Data Redaction Values</p>
<pre dir="ltr">BEGIN
 DBMS_REDACT.ADD_POLICY(
   object_schema    =&gt; &#39;mavis&#39;, 
   object_name      =&gt; &#39;cust_info&#39;, 
   column_name      =&gt; &#39;user_name&#39;,
   policy_name      =&gt; &#39;redact_cust_no_vals&#39;, 
   function_type    =&gt; DBMS_REDACT.NONE,
   expression       =&gt; &#39;1=1&#39;);
END;
/
</pre>
<p>Query and redacted result:</p>
<pre dir="ltr">SELECT user_name FROM mavis.cust_info;

USER_NAME
----------
IDA NEAU
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="ASOAG722"></a>
<div class="props_rev_3"><a id="GUID-ADFB7DCD-8543-400D-95A3-AA0976E75084"></a>
<h2 class="sect2">Exemption of Users from Oracle Data Redaction Policies</h2>
<div>
<p>You can exempt users from having Oracle Data Redaction policies applied to the data they access.</p>
<p>To do so, you should grant the users the <code class="codeph">EXEMPT REDACTION POLICY</code> system privilege. Grant this privilege to trusted users only.</p>
<p>In addition to users who were granted this privilege, user <code class="codeph">SYS</code> is also exempt from all Data Redaction policies. The person who creates the Data Redaction policy is by default not exempt from it, unless this person is user <code class="codeph">SYS</code> or has the <code class="codeph">EXEMPT REDACTION POLICY</code> system privilege.</p>
<p>Note the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Users who have the <code class="codeph">INSERT</code> privilege on a table can insert values into a redacted column, regardless of whether a Data Redaction policy exists on the table. Data Redaction only affects SQL <code class="codeph">SELECT</code> statements (that is, queries) issued by a user, and has no effect on any other SQL issued by a user, including <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, or <code class="codeph">DELETE</code> statements. (See the next bullet for exceptions to this rule.)</p>
</li>
<li>
<p>Users cannot perform a <code class="codeph">CREATE TABLE AS SELECT</code> where any of the columns being selected (source columns) is protected by a Data Redaction policy (and similarly, any DML operation where the source is a redacted column), unless the user was granted the <code class="codeph">EXEMPT REDACTION POLICY</code> system privilege.</p>
</li>
<li>
<p>The <code class="codeph">EXEMPT REDACTION POLICY</code> system privilege is included in the <code class="codeph">DBA</code> role, but this privilege must be granted explicitly to users because it is not included in the <code class="codeph">WITH ADMIN OPTION</code> for <code class="codeph">DBA</code> role grants. Users who were granted the <code class="codeph">DBA</code> role are exempt from redaction policies because the <code class="codeph">DBA</code> role contains the <code class="codeph">EXP_FULL_DATABASE</code> role, which is granted the <code class="codeph">EXEMPT REDACTION POLICY</code> system privilege.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-ADFB7DCD-8543-400D-95A3-AA0976E75084__GUID-424B3713-AFBC-4343-9001-2BDC37EEE1F0">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="security-considerations-for-using-oracle-data-redaction.htm#GUID-49898C42-C978-4872-A3B5-EE58AA0698D2" title="You can restrict the list of users who can create, view and edit Data Redaction policies.">Restriction of Administrative Access to Oracle Data Redaction Policies</a></p>
</li>
<li>
<p><a href="oracle-data-redaction-use-with-oracle-database-features.htm#GUID-83544DD3-2903-4E6F-AD14-671E57CF41A9" title="The DATAPUMP_EXP_FULL_DATABASE role includes the powerful EXEMPT REDACTION POLICY system privilege.">Oracle Data Pump Security Model for Oracle Data Redaction</a> for information about how Oracle Data Pump privileges affect the <code class="codeph">EXEMPT REDACTION POLICY</code> system privilege</p>
</li>
</ul>
</div>
</div>
</div>
<a id="ASOAG737"></a>
<div class="props_rev_3"><a id="GUID-205D50FF-2210-4957-B06B-EF82D734C26A"></a>
<h2 class="sect2">Altering an Oracle Data Redaction Policy</h2>
<div>
<p>The <code class="codeph">DBMS_REDACT.ALTER_POLICY</code> procedure enables you to modify Oracle Data Redaction policies.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-8D84FA87-45A3-454B-B904-53D6D0BC157C" title="The DBMS_REDACT.ALTER_POLICY procedure alters a Data Redaction policy.">About Altering Oracle Data Redaction Policies</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-477A9C2A-D95D-48B6-9C38-88696D484248" title="The DBMS_REDACT.ALTER_POLICY procedure syntax can be used to alter all types of the Data Redaction policies.">Syntax for the DBMS_REDACT.ALTER_POLICY Procedure</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-10699D0C-10CE-441C-99D5-7FC6A13AC11A" title="The DBMS_REDACT.ALTER_POLICY procedure provides parameters than can perform various actions, such as adding or modifying a column.">Parameters Required for DBMS_REDACT.ALTER_POLICY Actions</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-914FB63A-CF14-408C-8715-A17CF605A9D6" title="You can redact multiple columns in a table or view, with each column having its own redaction setting.">Tutorial: Altering an Oracle Data Redaction Policy</a></p>
</li>
</ul>
</div>
<a id="ASOAG953"></a>
<div class="props_rev_3"><a id="GUID-8D84FA87-45A3-454B-B904-53D6D0BC157C"></a>
<h3 class="sect3">About Altering Oracle Data Redaction Policies</h3>
<div>
<p>The <code class="codeph">DBMS_REDACT.ALTER_POLICY</code> procedure alters a Data Redaction policy.</p>
<p>If the policy is already enabled, then you do not need to disable it first, and after you alter the policy, it remains enabled.</p>
<p>You can find the names of existing Data Redaction policies by querying the <code class="codeph">POLICY_NAME</code> column of the <code class="codeph">REDACTION_POLICIES</code> data dictionary view, and information about the columns, functions, and parameters specified in a policy by querying the <code class="codeph">REDACTION_COLUMNS</code> view. To find the current value for policies that use full data redaction, you can query the <code class="codeph">REDACTION_VALUES_FOR_TYPE_FULL</code> data dictionary view.</p>
<p>The <code class="codeph">action</code> parameter specifies the type of modification that you want to perform. At a minimum, you must include the <code class="codeph">object_name</code> and <code class="codeph">policy_name</code> parameters when you run this procedure.</p>
</div>
</div>
<a id="ASOAG954"></a>
<div class="props_rev_3"><a id="GUID-477A9C2A-D95D-48B6-9C38-88696D484248"></a>
<h3 class="sect3">Syntax for the DBMS_REDACT.ALTER_POLICY Procedure</h3>
<div>
<p>The <code class="codeph">DBMS_REDACT.ALTER_POLICY</code> procedure syntax can be used to alter all types of the Data Redaction policies.</p>
<div class="section">
<p>The syntax for the <code class="codeph">DBMS_REDACT.ALTER_POLICY</code> procedure is as follows:</p>
<pre dir="ltr">DBMS_REDACT.ALTER_POLICY (
   object_schema          IN VARCHAR2 := NULL, 
   object_name            IN VARCHAR2 := NULL,<span class="italic"> </span>
   policy_name            IN VARCHAR2, 
   action                 IN BINARY_INTEGER := DBMS_REDACT.ADD_COLUMN,
   column_name            IN VARCHAR2 := NULL,
   function_type          IN BINARY_INTEGER := DBMS_REDACT.FULL,
   function_parameters    IN VARCHAR2 := NULL,
   expression             IN VARCHAR2 := NULL,
   regexp_pattern         IN VARCHAR2 := NULL,
   regexp_replace_string  IN VARCHAR2 := NULL,
   regexp_position        IN BINARY_INTEGER := NULL,
   regexp_occurrence      IN BINARY_INTEGER := NULL,
   regexp_match_parameter IN VARCHAR2 := NULL,
   policy_description     IN VARCHAR2 := NULL,
   column_description     IN VARCHAR2 := NULL);
</pre>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">action</code>: Enter one of the following values to define the kind of action to use:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">DBMS_REDACT.MODIFY_COLUMN</code> if you plan to change the <code class="codeph">column_name</code> value.</p>
</li>
<li>
<p><code class="codeph">DBMS_REDACT.ADD_COLUMN</code> if you plan to add a new column (in addition to columns that are already protected by the policy) for redaction. This setting is the default for the <code class="codeph">action</code> parameter.</p>
</li>
<li>
<p><code class="codeph">DBMS_REDACT.DROP_COLUMN</code> if you want to remove redaction from a column.</p>
</li>
<li>
<p><code class="codeph">DBMS_REDACT.MODIFY_EXPRESSION</code> if you plan to change the <code class="codeph">expression</code> value. Each policy can have only one policy expression. In other words, when you modify the policy expression, you are replacing the existing policy expression with a new policy expression.</p>
</li>
<li>
<p><code class="codeph">DBMS_REDACT.SET_POLICY_DESCRIPTION</code> if you want to change the description of the policy.</p>
</li>
<li>
<p><code class="codeph">DBMS_REDACT.SET_COLUMN_DESCRIPTION</code> if you want to change the description of the column.</p>
</li>
</ul>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-477A9C2A-D95D-48B6-9C38-88696D484248__GUID-43982A25-8E13-418A-A6FA-FA5C2A196FC3">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-10699D0C-10CE-441C-99D5-7FC6A13AC11A" title="The DBMS_REDACT.ALTER_POLICY procedure provides parameters than can perform various actions, such as adding or modifying a column.">Parameters Required for DBMS_REDACT.ALTER_POLICY Actions</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-D32FC6CA-A3B5-47EE-B288-52F1124F9FBD" title="To create a Data Redaction policy, you must use the DBMS_REDACT.ADD_POLICY procedure.">General Syntax of the DBMS_REDACT.ADD_POLICY Procedure</a> for information about the remaining parameters</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG10497"></a><a id="ASOAG10496"></a>
<div class="props_rev_3"><a id="GUID-10699D0C-10CE-441C-99D5-7FC6A13AC11A"></a>
<h3 class="sect3">Parameters Required for DBMS_REDACT.ALTER_POLICY Actions</h3>
<div>
<p>The <span class="apiname">DBMS_REDACT.ALTER_POLICY</span> procedure provides parameters than can perform various actions, such as adding or modifying a column.</p>
<div class="section">
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-10699D0C-10CE-441C-99D5-7FC6A13AC11A__CEGEGHHH" title="DBMS_REDACT.ALTER_POLICY Variations">Table 10-5</a> shows the combinations of these parameters.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-10699D0C-10CE-441C-99D5-7FC6A13AC11A__CEGEGHHH">
<p class="titleintable">Table 10-5 Parameters Required for Various DBMS_REDACT.ALTER_POLICY Actions</p>
<table class="cellalignment5391" title="Parameters Required for Various DBMS_REDACT.ALTER_POLICY Actions" summary="DBMS_REDACT.ALTER_POLICY Variations">
<thead>
<tr class="cellalignment5373">
<th class="cellalignment5404" id="d30126e7588">Desired Alteration</th>
<th class="cellalignment5405" id="d30126e7591">Parameters to Set</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5373">
<td class="cellalignment5406" id="d30126e7596" headers="d30126e7588">
<p>Add or modify a column</p>
</td>
<td class="cellalignment5407" headers="d30126e7596 d30126e7591">
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">action</code> (<code class="codeph">DBMS_REDACT.MODIFY_COLUMN</code>)</p>
</li>
<li>
<p><code class="codeph">column_name</code></p>
</li>
<li>
<p><code class="codeph">function_type</code></p>
</li>
<li>
<p><code class="codeph">function_parameters</code> (if necessary)</p>
</li>
<li>
<p><code class="codeph">regexp</code>* (if necessary)</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5406" id="d30126e7628" headers="d30126e7588">
<p>Change the policy expression</p>
</td>
<td class="cellalignment5407" headers="d30126e7628 d30126e7591">
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">action</code> (<code class="codeph">DBMS_REDACT.MODIFY_EXPRESSION</code>)</p>
</li>
<li>
<p><code class="codeph">expression</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5406" id="d30126e7646" headers="d30126e7588">
<p>Change the description of the policy</p>
</td>
<td class="cellalignment5407" headers="d30126e7646 d30126e7591">
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">action</code> (<code class="codeph">DBMS_REDACT.SET_POLICY_DESCRIPTION</code>)</p>
</li>
<li>
<p><code class="codeph">policy_description</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5406" id="d30126e7664" headers="d30126e7588">
<p>Change the description of the column</p>
</td>
<td class="cellalignment5407" headers="d30126e7664 d30126e7591">
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">action</code> (<code class="codeph">DBMS_REDACT.SET_COLUMN_DESCRIPTION</code>)</p>
</li>
<li>
<p><code class="codeph">column_description</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5406" id="d30126e7682" headers="d30126e7588">
<p>Drop a column</p>
</td>
<td class="cellalignment5407" headers="d30126e7682 d30126e7591">
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">action</code> (<code class="codeph">DBMS_REDACT.DROP_COLUMN</code>)</p>
</li>
<li>
<p><code class="codeph">column_name</code></p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="ASOAG955"></a>
<div class="props_rev_3"><a id="GUID-914FB63A-CF14-408C-8715-A17CF605A9D6"></a>
<h3 class="sect3">Tutorial: Altering an Oracle Data Redaction Policy</h3>
<div>
<p>You can redact multiple columns in a table or view, with each column having its own redaction setting.</p>
<p>The exercise in this section shows how to modify a Data Redaction policy so that multiple columns are redacted. It also shows how to change the <code class="codeph">expression</code> setting for the policy. To accomplish this, you must run the <code class="codeph">DBMS_REDACT.ALTER_POLICY</code> procedure in stages.</p>
<ol>
<li>
<p>Connect as a user who has privileges to create users and grant them privileges.</p>
<p>For example:</p>
<pre dir="ltr">CONNECT sec_admin
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Create the following users:</p>
<pre dir="ltr">GRANT CREATE SESSION TO dr_admin IDENTIFIED BY <span class="italic">password</span>;
GRANT CREATE SESSION TO sales_rep IDENTIFIED BY <span class="italic">password</span>;
GRANT CREATE SESSION TO support_rep IDENTIFIED BY <span class="italic">password</span>;
</pre></li>
<li>
<p>Grant <code class="codeph">EXECUTE</code> on the <code class="codeph">DBMS_REDACT</code> PL/SQL package to user <code class="codeph">dr_admin</code>:</p>
<pre dir="ltr">GRANT EXECUTE ON DBMS_REDACT TO dr_admin;
</pre></li>
<li>
<p>Connect as user <code class="codeph">OE</code>.</p>
<pre dir="ltr">CONNECT OE
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Create and populate a table that contains customer credit card information.</p>
<pre dir="ltr">CREATE TABLE cust_order_info(
 first_name varchar2(20),
 last_name varchar2(20),
 address varchar2(30),
 city varchar2(30),
 state varchar2(3),
 zip varchar2(5),
 cc_num varchar(19),
 cc_exp varchar2(7));


INSERT INTO cust_order_info VALUES (&#39;Jane&#39;,&#39;Dough&#39;,&#39;39 Mockingbird Lane&#39;, &#39;San Francisco&#39;, &#39;CA&#39;, 94114, &#39;5105 1051 0510 5100&#39;, &#39;10/2018&#39;);
INSERT INTO cust_order_info VALUES (&#39;Mary&#39;,&#39;Hightower&#39;,&#39;2319 Maple Street&#39;, &#39;Sonoma&#39;, &#39;CA&#39;, 95476, &#39;5111 1111 1111 1118&#39;, &#39;03/2019&#39;); 
INSERT INTO cust_order_info VALUES (&#39;Herbert&#39;,&#39;Donahue&#39;,&#39;292 Winsome Way&#39;, &#39;San Francisco&#39;, &#39;CA&#39;, 94117, &#39;5454 5454 5454 5454&#39;, &#39;08/2018&#39;); 
</pre></li>
<li>
<div class="p">Grant the <code class="codeph">SELECT</code> privilege on the <code class="codeph">cust_order_info</code> table to the <code class="codeph">sales_rep</code> and <code class="codeph">support_rep</code> users.
<pre dir="ltr">GRANT SELECT ON cust_order_info TO sales_rep, support_rep;
</pre></div>
</li>
<li>
<p>Connect as user <code class="codeph">dr_admin</code>.</p>
<pre dir="ltr">CONNECT dr_admin
Enter password: <span class="italic">password</span>
</pre></li>
<li>
<p>Create and enable policy to redact the credit card number.</p>
<pre dir="ltr">BEGIN DBMS_REDACT.ADD_POLICY(
    object_schema              =&gt; &#39;oe&#39;,
    object_name                =&gt; &#39;cust_order_info&#39;,
    column_name                =&gt; &#39;cc_num&#39;,
    policy_name                =&gt; &#39;redact_cust_cc_info&#39;,
    function_type              =&gt; DBMS_REDACT.REGEXP,
    function_parameters        =&gt; NULL,
    expression                 =&gt; &#39;1=1&#39;,
    regexp_pattern             =&gt; DBMS_REDACT.RE_PATTERN_CCN,
    regexp_replace_string      =&gt; DBMS_REDACT.RE_REDACT_CCN,
    regexp_position            =&gt; NULL,
    regexp_occurrence          =&gt; NULL,
    regexp_match_parameter     =&gt; NULL,
    policy_description         =&gt; &#39;Partially redacts credit card info&#39;,
    column_description         =&gt; &#39;cc_num_number lists credit card numbers&#39;);
END;
/
</pre></li>
<li>
<div class="p">Modify the policy to include redaction of the expiration date.
<pre dir="ltr">BEGIN DBMS_REDACT.ALTER_POLICY(
    object_schema     =&gt; &#39;oe&#39;,
    object_name       =&gt; &#39;cust_order_info&#39;,
    policy_name       =&gt; &#39;redact_cust_cc_info&#39;,
    action            =&gt; DBMS_REDACT.ADD_COLUMN,
    column_name       =&gt; &#39;cc_exp&#39;,
    function_type     =&gt; DBMS_REDACT.RANDOM,
    expression        =&gt; &#39;1-1&#39;);
END;
/
</pre></div>
</li>
<li>
<p>Modify the policy again, to use a condition so that the <code class="codeph">sales_rep</code> user views the redacted values and the <code class="codeph">support_rep</code> user views the <a href="glossary.htm#GUID-82E2FC6D-718F-4367-9D7E-DC130F360FC3"><span class="xrefglossterm">actual data</span></a>.</p>
<pre dir="ltr">BEGIN
   DBMS_REDACT.ALTER_POLICY(
   object_schema     =&gt; &#39;oe&#39;,
   object_name       =&gt; &#39;cust_order_info&#39;,
   policy_name       =&gt; &#39;redact_cust_cc_info&#39;,
   action            =&gt; DBMS_REDACT.MODIFY_EXPRESSION,
   expression        =&gt; &#39;SYS_CONTEXT(&#39;&#39;USERENV&#39;&#39;,&#39;&#39;SESSION_USER&#39;&#39;) = &#39;&#39;SALES_REP&#39;&#39;&#39;);
END;
/
</pre></li>
<li>
<p>To test the policy, have the two users query the <code class="codeph">cust_order_info</code> table.</p>
<pre dir="ltr">CONNECT suport_rep
Enter password: <span class="italic">password</span>

SELECT cc_num, cc_exp FROM OE.cust_order_info;

CC_NUM               CC_EXP
-------------------  -------
5105 1051 0510 5100  10/2018
5111 1111 1111 1118  03/2019
5454 5454 5454 5454  08/2018
</pre>
<p>User <code class="codeph">support_rep</code> can view the actual data.</p>
<pre dir="ltr">CONNECT sales_rep
Enter password: <span class="italic">password</span>

SELECT cc_num, cc_exp FROM OE.cust_order_info;

CC_NUM             CC_EXP
----------------   -------
************5100   lST=033
************1119   OZA.w4C
************5454   B(9+;O1
</pre>
<p>The actual data is redacted using for user <code class="codeph">sales_rep</code>.</p>
</li>
<li>
<p>Alter the <code class="codeph">cust_order_info</code> to include a condition so that only <code class="codeph">support_rep</code> can see the redacted data but <code class="codeph">sales_rep</code> cannot.</p>
<pre dir="ltr">CONNECT dr_admin
Enter password: <span class="italic">password</span>

BEGIN
   DBMS_REDACT.ALTER_POLICY(
   object_schema      =&gt; &#39;oe&#39;,
   object_name        =&gt; &#39;cust_order_info&#39;,
   policy_name        =&gt; &#39;redact_cust_cc_info&#39;,
   action             =&gt; DBMS_REDACT.MODIFY_EXPRESSION,
   expression         =&gt; &#39;SYS_CONTEXT(&#39;&#39;USERENV&#39;&#39;,&#39;&#39;SESSION_USER&#39;&#39;) = &#39;&#39;SUPPORT_REP&#39;&#39;&#39;);
END;
/
</pre></li>
<li>
<p>Have the users test the policy again.</p>
<pre dir="ltr">CONNECT support_rep
Enter password: <span class="italic">password</span>

SELECT cc_num, cc_exp FROM OE.cust_order_info;

CC_NUM             CC_EXP
----------------   -------
************5100   1^XMF~`
************1119   qz+9=#S
************5454   *KCaUkm
</pre>
<p>User <code class="codeph">support_rep</code> can no longer view the actual data; it is now redacted.</p>
<pre dir="ltr">CONNECT sales_rep
Enter password: <span class="italic">password</span>

SELECT cc_num, cc_exp FROM OE.cust_order_info;

CC_NUM               CC_EXP
-------------------  -------
5105 1051 0510 5100  10/2018
5111 1111 1111 1118  03/2019
5454 5454 5454 5454  08/2018
</pre>
<p>User <code class="codeph">sales_rep</code> now can view the actual data.</p>
</li>
<li>
<p>If you do not need the components of this tutorial, then you can remove them as follows:</p>
<pre dir="ltr">CONNECT dr_admin
Enter password: <span class="italic">password</span>

BEGIN
  DBMS_REDACT.DROP_POLICY (
    object_schema  =&gt; &#39;oe&#39;,
    object_name    =&gt; &#39;cust_order_info&#39;,
    policy_name    =&gt; &#39;redact_cust_cc_info&#39;);
END;
/

CONNECT sec_admin
Enter password: <span class="italic">password</span>

DROP USER dr_admin;
DROP USER sales_rep;
DROP USER support_rep;

CONNECT OE
Enter password: <span class="italic">password</span>

DROP TABLE cust_order_info;
</pre></li>
</ol>
</div>
</div>
</div>
<a id="ASOAG491"></a>
<div class="props_rev_3"><a id="GUID-1E236704-872D-4FCB-A46E-C5014B53E9DE"></a>
<h2 class="sect2">Redacting Multiple Columns</h2>
<div>
<p>You can redact more than one column in a Data Redaction policy.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-3A63FA4F-F884-4C75-A091-86896FADFDA2" title="You can redact columns of different data types, using different redaction types, for one table or view.">Adding Columns to a Data Redaction Policy for a Single Table or View</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-C6BA477D-3721-4FC2-83B8-E395078FC0EB" title="The DBMS_REDACT.ALTER_POLICY procedure can redact multiple columns.">Example: Redacting Multiple Columns</a></p>
</li>
</ul>
</div>
<a id="ASOAG10612"></a>
<div class="props_rev_3"><a id="GUID-3A63FA4F-F884-4C75-A091-86896FADFDA2"></a>
<h3 class="sect3">Adding Columns to a Data Redaction Policy for a Single Table or View</h3>
<div>
<p>You can redact columns of different data types, using different redaction types, for one table or view.</p>
<div class="section">
<ol>
<li>
<p>Create the policy for the first column that you want to redact.</p>
</li>
<li>
<p>Use the <code class="codeph">DBMS_REDACT.ALTER_POLICY</code> procedure to add the next column to the policy.</p>
<p>As necessary, set the <code class="codeph">action</code>, <code class="codeph">column_name</code>, <code class="codeph">function_type</code>, and <code class="codeph">function_parameters</code> (or the parameters that begin with <code class="codeph">regexp_</code>) parameters to define the redaction for the new column, but do not change the <code class="codeph">object_schema</code>, <code class="codeph">object_name</code>, <code class="codeph">policy_name</code>, or <code class="codeph">expression</code> parameters. Each redacted column continues to have the same redaction parameters that were used to create it.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG739"></a><a id="ASOAG10613"></a>
<div class="props_rev_3"><a id="GUID-C6BA477D-3721-4FC2-83B8-E395078FC0EB"></a>
<h3 class="sect3">Example: Redacting Multiple Columns</h3>
<div>
<p>The <code class="codeph">DBMS_REDACT.ALTER_POLICY</code> procedure can redact multiple columns.</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-C6BA477D-3721-4FC2-83B8-E395078FC0EB__CACCJGAH">Example 10-11</a> shows how to add a column to an existing Data Redaction policy. In this example, the <code class="codeph">action</code> parameter specifies that a new column must be added, using <code class="codeph">DBMS_REDACT.ADD_COLUMN</code>. The name of the new column, <code class="codeph">card_num</code>, is set by the <code class="codeph">column_name</code> parameter.</p>
<div class="example" id="GUID-C6BA477D-3721-4FC2-83B8-E395078FC0EB__CACCJGAH">
<p class="titleinexample">Example 10-11 Adding a Column to a Data Redaction Policy</p>
<pre dir="ltr">BEGIN
 DBMS_REDACT.ALTER_POLICY(
  object_schema       =&gt; &#39;mavis&#39;, 
  object_name         =&gt; &#39;cust_info&#39;, 
  policy_name         =&gt; &#39;redact_cust_user_ids&#39;, 
  action              =&gt; DBMS_REDACT.ADD_COLUMN,
  column_name         =&gt; &#39;card_num&#39;,
  function_type       =&gt; DBMS_REDACT.FULL,
  function_parameters =&gt; &#39;&#39;,
  expression          =&gt; &#39;SYS_CONTEXT(&#39;&#39;SYS_SESSION_ROLES&#39;&#39;,&#39;&#39;ADM&#39;&#39;) = &#39;&#39;TRUE&#39;&#39;&#39;);
END;
/
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="ASOAG10614"></a>
<div class="props_rev_3"><a id="GUID-6DBB6BA3-28C8-499F-A603-4DFAC18E6B41"></a>
<h2 class="sect2">Disabling and Enabling an Oracle Data Redaction Policy</h2>
<div>
<p>After you have created an Oracle Data Redaction policy, you can disable it and then reenable it as necessary.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-A499FA8B-00E1-4023-9505-4414C7CF56C1" title="The DBMS_REDACT.DISABLE_POLICY procedure disables Oracle Data Redaction policies.">Disabling an Oracle Data Redaction Policy</a></p>
</li>
<li>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-48037790-6EA7-4688-990F-C5348B11235A" title="The DBMS_REDACT.ENABLE_POLICY procedure enables Oracle Data Redaction policies.">Enabling an Oracle Data Redaction Policy</a></p>
</li>
</ul>
</div>
<a id="ASOAG741"></a><a id="ASOAG740"></a>
<div class="props_rev_3"><a id="GUID-A499FA8B-00E1-4023-9505-4414C7CF56C1"></a>
<h3 class="sect3">Disabling an Oracle Data Redaction Policy</h3>
<div>
<p>The <code class="codeph">DBMS_REDACT.DISABLE_POLICY</code> procedure disables Oracle Data Redaction policies.</p>
<div class="section">
<p>You can find the names of existing Data Redaction policies and whether they are enabled by querying the <code class="codeph">POLICY_NAME</code> and <code class="codeph">ENABLE</code> columns of the <code class="codeph">REDACTION_POLICIES</code> view. However, as long as the policy still exists, you cannot create another policy for that table or view, even if the original policy is disabled. In other words, if you want to create a different policy on the same table column, then you must drop the first policy before you can create and use the new policy.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>To disable a Data Redaction policy, run the <code class="codeph">DBMS_REDACT.DISABLE_POLICY</code> procedure, using the following syntax:</p>
<pre dir="ltr">DBMS_REDACT.DISABLE_POLICY (
<span class="italic">   </span>object_schema       IN VARCHAR2 DEFAULT NULL, 
   object_name         IN VARCHAR2,<span class="italic"> </span>
   policy_name         IN VARCHAR2);
</pre>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">object_schema</code>: Specifies the schema of the object on which the Data Redaction policy will be applied. If you omit this setting (or enter <code class="codeph">NULL</code>), then Oracle Database uses the name of the current schema.</p>
</li>
<li>
<p><code class="codeph">object_name</code>: Specifies the name of the table or view to be used for the Data Redaction policy.</p>
</li>
<li>
<p><code class="codeph">policy_name</code>: Specifies the name of the policy to be disabled.</p>
</li>
</ul>
</li>
</ul>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-A499FA8B-00E1-4023-9505-4414C7CF56C1__CACIFFHC">Example 10-12</a> shows how to disable a Data Redaction policy.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-A499FA8B-00E1-4023-9505-4414C7CF56C1__CACIFFHC">
<p class="titleinexample">Example 10-12 Disabling a Data Redaction Policy</p>
<pre dir="ltr">BEGIN
  DBMS_REDACT.DISABLE_POLICY (
    object_schema  =&gt; &#39;mavis&#39;,
    object_name    =&gt; &#39;cust_info&#39;,
    policy_name    =&gt; &#39;redact_cust_user_ids&#39;);
END;
/
</pre></div>
<!-- class="example" --></div>
</div>
<a id="ASOAG743"></a><a id="ASOAG742"></a>
<div class="props_rev_3"><a id="GUID-48037790-6EA7-4688-990F-C5348B11235A"></a>
<h3 class="sect3">Enabling an Oracle Data Redaction Policy</h3>
<div>
<p>The <code class="codeph">DBMS_REDACT.ENABLE_POLICY</code> procedure enables Oracle Data Redaction policies.</p>
<div class="section">
<p>Immediately after you create a new policy, you do not need to enable it; the creation process handles that for you. To find the names of existing Data Redaction policies and whether they are enabled, you can query the <code class="codeph">POLICY_NAME</code> and <code class="codeph">ENABLE</code> columns of the <code class="codeph">REDACTION_POLICIES</code> view. After you run the procedure to enable the policy, the enablement takes effect immediately.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>To enable a Data Redaction policy, run the <code class="codeph">DBMS_REDACT.ENABLE_POLICY</code> procedure, using the following syntax.</p>
<pre dir="ltr">DBMS_REDACT.ENABLE_POLICY (
<span class="italic">   </span>object_schema       IN VARCHAR2 DEFAULT NULL, 
   object_name         IN VARCHAR2,<span class="italic"> </span>
   policy_name         IN VARCHAR2);
</pre>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">object_schema</code>: Specifies the schema of the object on which the Data Redaction policy will be applied. If you omit this setting (or enter <code class="codeph">NULL</code>), then Oracle Database uses the name of the current schema.</p>
</li>
<li>
<p><code class="codeph">object_name</code>: Specifies the name of the table or view to be used for the Data Redaction policy.</p>
</li>
<li>
<p><code class="codeph">policy_name</code>: Specifies the name of the policy to be enabled.</p>
</li>
</ul>
</li>
</ul>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-48037790-6EA7-4688-990F-C5348B11235A__CACIGDDF">Example 10-13</a> shows how to enable a Data Redaction policy.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-48037790-6EA7-4688-990F-C5348B11235A__CACIGDDF">
<p class="titleinexample">Example 10-13 Enabling a Data Redaction Policy</p>
<pre dir="ltr">BEGIN
  DBMS_REDACT.ENABLE_POLICY (
    object_schema  =&gt; &#39;mavis&#39;,
    object_name    =&gt; &#39;cust_info&#39;,
    policy_name    =&gt; &#39;redact_cust_user_ids&#39;);
END;
/
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="ASOAG745"></a><a id="ASOAG744"></a>
<div class="props_rev_3"><a id="GUID-F87B88B2-651E-4AF4-8E01-7B8A629A3D8F"></a>
<h2 class="sect2">Dropping an Oracle Data Redaction Policy</h2>
<div>
<p>The <code class="codeph">DBMS_REDACT.DROP_POLICY</code> procedure drops Oracle Data Redaction policies.</p>
<div class="section">
<p>You can drop an Oracle Data Redaction policy whether it is enabled or disabled. You can find the names of existing Data Redaction policies, by querying the <code class="codeph">POLICY_NAME</code> column of the <code class="codeph">REDACTION_POLICIES</code> view. When you drop a table or view that is associated with an Oracle Data Redaction policy, the policy is automatically dropped. As a best practice, drop the policy first, and then drop the table or view afterward. See <a href="security-considerations-for-using-oracle-data-redaction.htm#GUID-667D33F8-3B01-48A2-A23B-A0AEC9F04820" title="You should check if the recycle bin is enabled before you drop Oracle Data Redaction policies.">Dropped Oracle Data Redaction Policies When the Recycle Bin Is Enabled</a> for more information.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>To drop a Data Redaction policy, run the <code class="codeph">DBMS_REDACT.DROP_POLICY</code> procedure.</p>
<p>Use the following syntax:</p>
<pre dir="ltr">DBMS_REDACT.DROP_POLICY (
   object_schema       IN VARCHAR2 DEFAULT NULL, 
   object_name         IN VARCHAR2,
   policy_name         IN VARCHAR2);
</pre>
<p>In this specification:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">object_schema</code>: Specifies the schema of the object to which the Data Redaction policy applies. If you omit this setting (or enter <code class="codeph">NULL</code>), then Oracle Database uses the name of the current schema.</p>
</li>
<li>
<p><code class="codeph">object_name</code>: Specifies the name of the table or view to be used for the Data Redaction policy.</p>
</li>
<li>
<p><code class="codeph">policy_name</code>: Specifies the name of the policy to be dropped.</p>
</li>
</ul>
</li>
</ul>
<p>After you run the <code class="codeph">DBMS_REDACT.DROP_POLICY</code> procedure, the drop takes effect immediately.</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-F87B88B2-651E-4AF4-8E01-7B8A629A3D8F__CACFIHFG">Example 10-14</a> shows how to drop a Data Redaction policy.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-F87B88B2-651E-4AF4-8E01-7B8A629A3D8F__CACFIHFG">
<p class="titleinexample">Example 10-14 Dropping a Data Redaction Policy</p>
<pre dir="ltr">BEGIN
  DBMS_REDACT.DROP_POLICY (
    object_schema  =&gt; &#39;mavis&#39;,
    object_name    =&gt; &#39;cust_info&#39;,
    policy_name    =&gt; &#39;redact_cust_user_ids&#39;);
END;
/
</pre></div>
<!-- class="example" --></div>
</div>
<div class="props_rev_3"><a id="GUID-DE28EFBA-73F2-416E-BBE6-F22AF080DC74"></a>
<h2 class="sect2">Tutorial: SQL Expressions to Build Reports with Redacted Values</h2>
<div>
<p>SQL expressions can be used to build reports based on columns that have Oracle Data Redaction policies defined on them.</p>
<div class="section">
<p>The values used in the SQL expression will be redacted. This redaction occurs in such a way that the redaction takes place before the SQL expression is evaluated: the result value that is displayed in the report is the end result of the evaluated SQL expression over the redacted values, rather than the redacted result of the SQL expression as a whole.</p>
<ol>
<li>
<p>Create the following Data Redaction policy for the <code class="codeph">HR.EMPLOYEES</code> table.</p>
<p>This policy will replace the first 4 digits of the value from the <code class="codeph">SALARY</code> column with the number <code class="codeph">9</code> and the first digit of the value from the <code class="codeph">COMMISSION_PCT</code> column with a <code class="codeph">9</code>.</p>
<pre dir="ltr">BEGIN
 DBMS_REDACT.ADD_POLICY(
   object_schema          =&gt; &#39;HR&#39;, 
   object_name            =&gt; &#39;EMPLOYEES&#39;, 
   column_name            =&gt; &#39;SALARY&#39;,
   column_description     =&gt; &#39;emp_sal_comm shows employee salary and commission&#39;,
   policy_name            =&gt; &#39;redact_emp_sal_comm&#39;, 
   policy_description     =&gt; &#39;Partially redacts the emp_sal_comm column&#39;,
   function_type          =&gt; DBMS_REDACT.PARTIAL,
   function_parameters    =&gt; &#39;9,1,4&#39;,
   expression             =&gt; &#39;1=1&#39;);
END;
/
BEGIN
 DBMS_REDACT.ALTER_POLICY(
   object_schema          =&gt; &#39;HR&#39;,
   object_name            =&gt; &#39;EMPLOYEES&#39;,
   policy_name            =&gt; &#39;redact_emp_sal_comm&#39;,
   action                 =&gt; DBMS_REDACT.ADD_COLUMN,
   column_name            =&gt; &#39;COMMISSION_PCT&#39;,
   function_type          =&gt; DBMS_REDACT.PARTIAL,
   function_parameters    =&gt; &#39;9,1,1&#39;,
   expression             =&gt; &#39;1=1&#39;);
END;
/
</pre></li>
<li>
<p>Log in to the <code class="codeph">HR</code> schema and then run the following report.</p>
<p>This report will use the SQL expression <code class="codeph">(SALARY + COMMISSION_PCT)</code> to combine the employees&#39; salaries and commissions.</p>
<pre dir="ltr">SELECT (SALARY + COMMISSION_PCT) total_emp_compensation
FROM HR.EMPLOYEES
WHERE DEPARTMENT_ID = 80;

TOTAL_EMP_COMPENSATION
----------------------
                9999.9
               9999.95
              99990.95
...
</pre></li>
<li>
<p>Use SQL expressions for the report, including concatenation.</p>
<p>For example:</p>
<pre dir="ltr">SELECT &#39;Employee ID &#39;          || EMPLOYEE_ID ||
       &#39; has a salary of &#39;     || SALARY || 
       &#39; and a commission of &#39; || COMMISSION_PCT || &#39;.&#39; detailed_emp_compensation
FROM HR.EMPLOYEES
WHERE DEPARTMENT_ID = 80
ORDER BY EMPLOYEE_ID;

DETAILED_EMP_COMPENSATION
-------------------------------------------------------------
Employee ID 150 has a salary of 99990 and a commission of .9.
Employee ID 151 has a salary of 9999 and a commission of .95.
Employee ID 152 has a salary of 9999 and a commission of .95.
...
</pre></li>
<li>
<p>Connect the user who created the <code class="codeph">redact_emp_sal_comm</code> Data Redaction policy and then run the following statement to drop the policy.</p>
<pre dir="ltr">BEGIN
  DBMS_REDACT.DROP_POLICY (
    object_schema =&gt; &#39;HR&#39;,
    object_name   =&gt; &#39;EMPLOYEES&#39;,
    policy_name   =&gt; &#39;redact_emp_sal_comm&#39;);
END;
/
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="ASOAG751"></a><a id="ASOAG654"></a>
<div class="props_rev_3"><a id="GUID-16B2C464-83C6-4341-BE13-12F68695B65C"></a>
<h2 class="sect2">Oracle Data Redaction Policy Data Dictionary Views</h2>
<div>
<p>Oracle Database provides data dictionary views that list information about Data Redaction policies.</p>
<div class="section">
<p>Before you can query these views, you must be granted the <code class="codeph">SELECT_CATALOG_ROLE</code> role.</p>
<p><a href="configuring-oracle-data-redaction-policies.htm#GUID-16B2C464-83C6-4341-BE13-12F68695B65C__CACFGDCH" title="Data Redaction Catalog Views">Table 10-6</a> lists the Data Redaction data dictionary views.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-16B2C464-83C6-4341-BE13-12F68695B65C__CACFGDCH">
<p class="titleintable">Table 10-6 Data Redaction Views</p>
<table class="cellalignment5391" title="Data Redaction Views" summary="Data Redaction Catalog Views">
<thead>
<tr class="cellalignment5373">
<th class="cellalignment5408" id="d30126e8948">View</th>
<th class="cellalignment5409" id="d30126e8951">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5373">
<td class="cellalignment5410" id="d30126e8956" headers="d30126e8948">
<p><code class="codeph">REDACTION_COLUMNS</code></p>
</td>
<td class="cellalignment5411" headers="d30126e8956 d30126e8951">
<p>Describes all of the redacted columns in the database, providing the the owner of the table or view within which the column resides, the object name, the column name, the type of redaction function, the parameters to the redaction function (if any), and a description of the redaction policy. If a policy expression has been created, displays the default object-wide policy expression&rsquo;s SQL expression.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5410" id="d30126e8964" headers="d30126e8948">
<p><code class="codeph">REDACTION_EXPRESSIONS</code></p>
</td>
<td class="cellalignment5411" headers="d30126e8964 d30126e8951">
<p>Displays the names of existing policy expressions and their SQL expressions</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5410" id="d30126e8972" headers="d30126e8948">
<p><code class="codeph">REDACTION_POLICIES</code></p>
</td>
<td class="cellalignment5411" headers="d30126e8972 d30126e8951">
<p>Describes all of the data redaction policies in the database. It includes information about the object owner, object name, policy name, policy expression, whether the policy is enabled, and a description of the Data Redaction policy.</p>
</td>
</tr>
<tr class="cellalignment5373">
<td class="cellalignment5410" id="d30126e8980" headers="d30126e8948">
<p><code class="codeph">REDACTION_VALUES_FOR_TYPE_FULL</code></p>
</td>
<td class="cellalignment5411" headers="d30126e8980 d30126e8951">
<p>Shows the current redaction values for Data Redaction policies that use full redaction</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section"></div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5372">
<tr>
<td class="cellalignment5379">
<table class="cellalignment5377">
<tr>
<td class="cellalignment5376"><a href="oracle-data-redaction-features-and-capabilities.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5376"><a href="using-oracle-data-redaction-in-oracle-enterprise-manager.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5381">
<table class="cellalignment5375">
<tr>
<td class="cellalignment5376"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5376"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5376"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5376"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5376"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5376"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>