<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-4874"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/How%20to%20Modify%20or%20Deinstall%20Oracle%20Grid%20Infrastructure"></a><title>How to Modify or Deinstall Oracle Grid Infrastructure</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093"/>
<meta name="dcterms.created" content="2017-07-23T23:35:19Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Grid Infrastructure Installation Guide"/>
<meta name="dcterms.identifier" content="E51133-07"/>
<meta name="dcterms.isVersionOf" content="CWAIX"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2014, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="postinst.htm" title="Previous" type="text/html"/>
<link rel="Next" href="trouble.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E51133-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">14/20</span> <!-- End Header -->
<div id="CWAIX345" class="chapter"><a id="sthref695"></a>
<h1 class="chapter"><span class="secnum">9</span> How to Modify or Deinstall Oracle Grid Infrastructure</h1>
<p>This chapter describes how to modify or remove Oracle Clusterware and Oracle Automatic Storage Management (Oracle ASM).</p>
<p>Oracle recommends that you use the deinstallation tool to remove the entire Oracle home associated with the Oracle Database, Oracle Clusterware, Oracle ASM, Oracle RAC, or Oracle Database client installation. Oracle does not support the removal of individual products or components.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDEDBGG">Deciding When to Deinstall Oracle Clusterware</a></p>
</li>
<li>
<p><a href="#CHDHIHFE">Migrating Standalone Grid Infrastructure Servers to a Cluster</a></p>
</li>
<li>
<p><a href="#CHDCAFBI">Relinking Oracle Grid Infrastructure for a Cluster Binaries</a></p>
</li>
<li>
<p><a href="#CHDJAADA">Changing the Oracle Grid Infrastructure Home Path</a></p>
</li>
<li>
<p><a href="#CHDJJHHJ">Unconfiguring Oracle Clusterware Without Removing Binaries</a></p>
</li>
<li>
<p><a href="#CHDDABGD">Removing Oracle Clusterware and Oracle ASM</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Product-specific documentation for requirements and restrictions to remove an individual product</div>
<a id="CHDEDBGG"></a>
<div id="CWAIX602" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">9.1</span> <a id="sthref696"></a><a id="sthref697"></a><a id="sthref698"></a><a id="sthref699"></a>Deciding When to Deinstall Oracle Clusterware</h2>
<p>Remove installed components in the following situations:</p>
<ul>
<li>
<p>You have successfully installed Oracle Clusterware, and you want to remove the Oracle Clusterware installation, either in an educational environment, or a test environment.</p>
</li>
<li>
<p>You have encountered errors during or after installing or upgrading Oracle Clusterware, and you want to reattempt an installation.</p>
</li>
<li>
<p>Your installation or upgrade stopped because of a hardware or operating system failure.</p>
</li>
<li>
<p>You are advised by Oracle Support to reinstall Oracle Clusterware.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CHDHIHFE"></a>
<div id="CWAIX603" class="sect1">
<h2 class="sect1"><span class="secnum">9.2</span> Migrating Standalone Grid Infrastructure Servers to a Cluster</h2>
<p>If you have an Oracle Database installation using Oracle Restart (that is, an Oracle Grid Infrastructure installation for a standalone server), and you want to configure that server as a cluster member node, then complete the following tasks:</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD92094" href="../CWADD/GUID-780155B8-D379-4800-924B-3C366184220A.htm#CWADD92094"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about the configuration wizard.</div>
<ol>
<li>
<p>Inspect the Oracle Restart configuration with <code dir="ltr">srvctl</code> using the following syntax, where <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> is the unique name for the database, and <code dir="ltr"><span class="codeinlineitalic">lsnrname</span></code> is the name of the listeners:</p>
<p><code dir="ltr">srvctl config database -db</code> <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code></p>
<p><code dir="ltr">srvctl config service -db</code> <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code></p>
<p><code dir="ltr">srvctl config listener -listener</code> <code dir="ltr"><span class="codeinlineitalic">lsnrname</span></code></p>
<p>Write down the configuration information for the server.</p>
</li>
<li>
<p>Log in as <code dir="ltr">root</code>, and change directory to <span class="italic">Grid home</span><code dir="ltr">/crs/install</code>. For example:</p>
<pre dir="ltr"># cd /u01/app/12.1.0/grid/crs/install
</pre></li>
<li>
<p>Stop all of the databases, services, and listeners that you discovered in step 1.</p>
</li>
<li>
<p>If present, unmount all Oracle Automatic Storage Management Cluster File System (Oracle ACFS) filesystems.</p>
</li>
<li>
<p>Unconfigure the Oracle Grid Infrastructure installation for a standalone server (Oracle Restart), using the following command:</p>
<pre dir="ltr"># roothas.pl -deconfig -force
</pre></li>
<li>
<p>Prepare the server for Oracle Clusterware configuration, as described in this document. In addition, choose if you want to install Oracle Grid Infrastructure for a cluster in the same location as Oracle Restart, or in a different location:</p>
<p><span class="bold">Installing in the Same Location as Oracle Restart</span></p>
<ol>
<li>
<p>Use the deinstallation tool to remove the Oracle Restart software, but with all disk groups intact.</p>
</li>
<li>
<p>Proceed to step <a href="#CHDDGJDF">7</a>.</p>
</li>
</ol>
<p><span class="bold">Installing in a Different Location than Oracle Restart</span></p>
<ol>
<li>
<p>Install Oracle Grid Infrastructure for a cluster in the new Grid home software location.</p>
</li>
</ol>
</li>
<li id="CHDDGJDF">
<p>As the Oracle Grid Infrastructure installation owner, run Oracle Clusterware Configuration Wizard, and save and stage the response file. For example:</p>
<pre dir="ltr">$ Grid_home/crs/config/config.sh -silent -responseFile $HOME/GI.rsp
</pre></li>
<li>
<p>Run <code dir="ltr">root.sh</code> for the Oracle Clusterware Configuration Wizard.</p>
</li>
<li>
<p>Mount the Oracle Restart disk group.</p>
</li>
<li>
<p>Enter the <code dir="ltr">volenable</code> command to enable all Oracle Restart disk group volumes.</p>
</li>
<li>
<p>Mount all Oracle ACFS filesystems manually.</p>
</li>
<li>
<p>Add back Oracle Clusterware services to the Oracle Clusterware home, using the information you wrote down in step 1, including adding back Oracle ACFS resources. For example:</p>
<pre dir="ltr">/u01/app/grid/product/11.2.0/grid/bin/srvctl add filesystem -device
/dev/asm/db1  -diskgroup ORestartData -volume db1 -mountpointpath
/u01/app/grid/product/11.2.0/db1 -user grid
</pre></li>
<li>
<p>Add the Oracle Database for support by Oracle Grid Infrastructure for a cluster, using the configuration information you recorded in step 1. Use the following command syntax, where <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> is the unique name of the database on the node, and <code dir="ltr"><span class="codeinlineitalic">nodename</span></code> is the name of the node:</p>
<p><code dir="ltr">srvctl add database -db</code> <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> <code dir="ltr">-oraclehome $ORACLE_HOME -node</code> <code dir="ltr"><span class="codeinlineitalic">nodename</span></code></p>
<p>For example, first verify that the ORACLE_HOME environment variable is set to the location of the database home directory.</p>
<p>Next, to add the database name <code dir="ltr">mydb</code>, and the service <code dir="ltr">myservice</code>, enter the following commands:</p>
<pre dir="ltr">srvctl add database -db mydb -oraclehome $ORACLE_HOME -node node1
</pre></li>
<li>
<p>Add each service to the database, using the command <code dir="ltr">srvctl add service</code>. For example:</p>
<pre dir="ltr">srvctl add service -db mydb -service myservice
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CHDCAFBI"></a>
<div id="CWAIX604" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">9.3</span> Relinking Oracle Grid Infrastructure for a Cluster Binaries</h2>
<p><a id="sthref700"></a>After installing Oracle Grid Infrastructure for a cluster (Oracle Clusterware and Oracle ASM configured for a cluster), if you need to modify the binaries, then use the following procedure, where <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code> is the Oracle Grid Infrastructure for a cluster home:</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Before relinking executables, you must shut down all executables that run in the Oracle home directory that you are relinking. In addition, shut down applications linked with Oracle shared libraries.</div>
<p>As <code dir="ltr">root</code>:</p>
<pre dir="ltr"># cd <span class="italic">Grid_home</span>/crs/install
# rootcrs.sh -unlock
</pre>
<p>As the Oracle Grid Infrastructure for a cluster owner:</p>
<pre dir="ltr">$ export ORACLE_HOME=<span class="italic">Grid_home</span>
$ <span class="italic">Grid_home</span>/bin/relink
</pre>
<p>As <code dir="ltr">root</code> again:</p>
<pre dir="ltr"># cd <span class="italic">Grid_home</span>/rdbms/install/
# ./rootadd_rdbms.sh
# cd <span class="italic">Grid_home</span>/crs/install
# rootcrs.sh -patch
</pre>
<p>You must relink the Oracle Clusterware and Oracle ASM binaries every time you apply an operating system patch or after an operating system upgrade.</p>
<p>For upgrades from previous releases, if you want to deinstall the prior release Grid home, then you must first unlock the prior release Grid home. Unlock the previous release Grid home by running the command <code dir="ltr">rootcrs.sh -unlock</code> from the previous release home. After the script has completed, you can run the deinstallation tool.</p>
</div>
<!-- class="sect1" -->
<a id="CHDJAADA"></a>
<div id="CWAIX605" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">9.4</span> Changing the Oracle Grid Infrastructure Home Path</h2>
<p><a id="sthref701"></a>After installing Oracle Grid Infrastructure for a cluster (Oracle Clusterware and Oracle ASM configured for a cluster), if you need to change the Grid home path, then use the following example as a guide to detach the existing Grid home, and to attach a new Grid home:</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Before changing the Grid home, you must shut down all executables that run in the Grid home directory that you are relinking. In addition, shut down applications linked with Oracle shared libraries.</div>
<ol>
<li>
<p>Log in as the Oracle Grid Infrastructure installation owner (<code dir="ltr">grid</code>).</p>
</li>
<li>
<p>Change directory to <span class="italic">Grid_home</span>/bin and enter the command crsctl stop crs. For example:</p>
<pre dir="ltr">$ cd /u01/app/12.1.0/grid/bin
$ ./crsctl stop crs
</pre></li>
<li>
<p>Detach the existing Grid home by running the following command, where <code dir="ltr">/u01/app/12.1.0/grid</code> is the existing Grid home location:</p>
<pre dir="ltr">$ /u01/app/12.1.0/grid/oui/bin/runInstaller -silent -waitforcompletion\
-detachHome ORACLE_HOME=&#39;/u01/app/12.1.0/grid&#39; -local
</pre></li>
<li>
<p>As <code dir="ltr">root</code>, move the Grid binaries from the old Grid home location to the new Grid home location. For example, where the old Grid home is <code dir="ltr">/u01/app/12.1.0/grid</code> and the new Grid home is <code dir="ltr">/u01/app/12c/</code>:</p>
<pre dir="ltr"># mkdir /u01/app/12c
# mv /u01/app/12.1.0/grid /u01/app/12c
</pre></li>
<li>
<p>Clone the Oracle Grid Infrastructure installation, using the instructions provided in <a class="olink CWADD92126" href="../CWADD/GUID-5025BEA3-2549-498E-A481-B2FE68AB519D.htm#CWADD92126"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a>.</p>
<p>When you navigate to the <span class="italic">Grid home</span><code dir="ltr">/clone/bin</code> directory and run the <code dir="ltr">clone.pl</code> script, provide values for the input parameters that provide the path information for the new Grid home.</p>
</li>
<li>
<p>As <code dir="ltr">root</code> again, enter the following command to start up in the new home location:</p>
<pre dir="ltr"># cd /u01/app/12c/crs/install
# rootcrs.sh -patch -dstcrshome /u01/app/12c/
</pre></li>
<li>
<p>Repeat steps 1 through 4 on each cluster member node.</p>
</li>
</ol>
<p>You must relink the Oracle Clusterware and Oracle ASM binaries every time you move the Grid home.</p>
</div>
<!-- class="sect1" -->
<a id="CHDJJHHJ"></a>
<div id="CWAIX606" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">9.5</span> Unconfiguring Oracle Clusterware Without Removing Binaries</h2>
<p><a id="sthref702"></a><a id="sthref703"></a><a id="sthref704"></a><a id="sthref705"></a>Running the <code dir="ltr">rootcrs.sh</code> command flags <code dir="ltr">-deconfig -force</code> enables you to unconfigure Oracle Clusterware on one or more nodes without removing installed binaries. This feature is useful if you encounter an error on one or more cluster nodes during installation when running the <code dir="ltr">root.sh</code> command, such as a missing operating system package on one node. By running <code dir="ltr">rootcrs.sh -deconfig -force</code> on nodes where you encounter an installation error, you can unconfigure Oracle Clusterware on those nodes, correct the cause of the error, and then run <code dir="ltr">root.sh</code> again.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Stop any databases, services, and listeners that may be installed and running before deconfiguring Oracle Clusterware.</div>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Commands used in this section remove the Oracle Grid infrastructure installation for the entire cluster. If you want to remove the installation from an individual node, then see <a class="olink CWADD1167" href="../CWADD/GUID-929C0CD9-9B67-45D6-B864-5ED3B47FE458.htm#CWADD1167"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a>.</div>
<p>To unconfigure Oracle Clusterware:</p>
<ol>
<li>
<p>Log in as the <code dir="ltr">root</code> user on a node where you encountered an error.</p>
</li>
<li>
<p>Change directory to <span class="italic">Grid_home</span>/crs/install. For example:</p>
<pre dir="ltr"># cd /u01/app/12.1.0/grid/crs/install
 
</pre></li>
<li>
<p>Run <code dir="ltr">rootcrs.sh</code> with the <code dir="ltr">-deconfig</code> and <code dir="ltr">-force</code> flags. For example:</p>
<pre dir="ltr"># rootcrs.sh -deconfig -force
</pre>
<p>Repeat on other nodes as required.</p>
</li>
<li>
<p>If you are deconfiguring Oracle Clusterware on all nodes in the cluster, then on the last node, enter the following command:</p>
<pre dir="ltr"># rootcrs.sh -deconfig -force -lastnode
</pre>
<p>The <code dir="ltr">-lastnode</code> flag completes deconfiguration of the cluster, including the OCR and voting disks.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Run the <code dir="ltr">rootcrs.sh -deconfig -force -lastnode</code> command on a Hub Node. Deconfigure all Leaf Nodes before you run the command with the <code dir="ltr">-lastnode</code> flag.</div>
</li>
<li>
<p>After deconfiguring an Oracle ASM Storage Client, run the following command on the Storage Server:</p>
<pre dir="ltr">asmcmd rmcc <span class="italic">client_cluster_name</span>
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CHDDABGD"></a>
<div id="CWAIX607" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">9.6</span> Removing Oracle Clusterware and Oracle ASM</h2>
<p>The <code dir="ltr">deinstall</code> command removes Oracle Clusterware and Oracle ASM from your server. The following sections describe the deinstallation tool, and provide information about additional options to use the deinstallation tool:</p>
<ul>
<li>
<p><a href="#CHDDBHGH">About the Deinstallation Tool</a></p>
</li>
<li>
<p><a href="#CHDCHBFD">Deinstallation Tool Command Example for Oracle Grid Infrastructure</a></p>
</li>
<li>
<p><a href="#CHDJCGDI">Deinstallation Response File Example for Grid Infrastructure for a Cluster</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Caution:</p>
You must use the deinstallation tool from the same release to remove Oracle software. Do not run the deinstallation tool from a later release to remove Oracle software from an earlier release. For example, do not run the deinstallation tool from the 12.1.0.1 installation media to remove Oracle software from an existing 11.2.0.4 Oracle home.</div>
<a id="CHDDBHGH"></a>
<div id="CWAIX608" class="sect2">
<h3 class="sect2"><span class="secnum">9.6.1</span> <a id="sthref706"></a>About the Deinstallation Tool</h3>
<p>Starting with Oracle Database 12<span class="italic">c</span>, the deinstallation tool is integrated with the database installation media. You can run the deinstallation tool using the <code dir="ltr">runInstaller</code> command with the <code dir="ltr">-deinstall</code> and <code dir="ltr">-home</code> options from the base directory of the Oracle Database, Oracle Database Client, or Oracle Grid Infrastructure installation media.</p>
<p>The deinstallation tool is also available as a separate command (<code dir="ltr">deinstall</code>) in Oracle home directories after installation. It is located in the <code dir="ltr">$ORACLE_HOME/deinstall</code> directory.</p>
<p>The deinstallation tool uses the information you provide, plus information gathered from the software home to create a response file. You can alternatively supply a response file generated previously by the <code dir="ltr">deinstall</code> command using the <code dir="ltr">-checkonly</code> option, or by editing the response file template.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Starting with Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2), the <code dir="ltr">roothas.sh</code> script replaces the <code dir="ltr">roothas.pl</code> script in the Oracle Grid Infrastructure home.</div>
<p><a id="sthref707"></a><a id="sthref708"></a>The deinstallation tool stops Oracle software, and removes Oracle software and configuration files on the operating system for a specific Oracle home. If you run the deinstallation tool to remove Oracle Grid Infrastructure, then the deinstaller prompts you to run the <code dir="ltr">rootcrs.sh</code> script, as the <code dir="ltr">root</code> user, to deconfigure Oracle Grid Infrastructure or <code dir="ltr">roothas.sh</code> script to deconfigure Oracle Grid Infrastructure for standalone server.</p>
<p>If the software in the Oracle home is not running (for example, after an unsuccessful installation), then the deinstallation tool cannot determine the configuration, and you must provide all the configuration details either interactively or in a response file.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
When you run the deinstallation tool, if the central inventory (oraInventory) contains no other registered homes besides the home that you are deconfiguring and removing, then the deinstallation tool removes the following files and directory contents in the Oracle base directory of the Oracle Database installation owner:
<ul>
<li>
<p><code dir="ltr">admin</code></p>
</li>
<li>
<p><code dir="ltr">cfgtoollogs</code></p>
</li>
<li>
<p><code dir="ltr">checkpoints</code></p>
</li>
<li>
<p><code dir="ltr">diag</code></p>
</li>
<li>
<p><code dir="ltr">oradata</code></p>
</li>
<li>
<p><code dir="ltr">flash_recovery_area</code></p>
</li>
</ul>
<p>Oracle strongly recommends that you configure your installations using an Optimal Flexible Architecture (OFA) configuration, and that you reserve Oracle base and Oracle home paths for exclusive use of Oracle software. If you have any user data in these locations in the Oracle base that is owned by the user account that owns the Oracle software, then the deinstallation tool deletes this data.</p>
<p>In addition, for Oracle Grid Infrastructure installations:</p>
<ul>
<li>
<p>Oracle Automatic Storage Management Cluster File System (Oracle ACFS) must be dismounted and Oracle Automatic Storage Management Dynamic Volume Manager (Oracle ADVM) volumes must be disabled.</p>
</li>
<li>
<p>If Grid Naming Service (GNS) is in use, then the entry for the subdomain needs to be deleted from DNS by your DNS administrator.</p>
</li>
</ul>
</div>
<p>The default method for running the deinstallation tool is from the deinstall directory in the Oracle home as the installation owner:</p>
<pre dir="ltr">$ $ORACLE_HOME/deinstall/deinstall
</pre>
<p>The <code dir="ltr">deinstall</code> command uses the following syntax, where variable content is indicated in italics:</p>
<pre dir="ltr">deinstall [-silent] [-checkonly] [-local] [-paramfile <span class="italic">complete path of input response file</span>] 
[-params name1=<span class="italic">value</span> name2=<span class="italic">value</span> . . .] [-o <span class="italic">complete path of directory for saving files</span>] [-help]
 
</pre>
<p>To run the deinstallation tool from the database installation media, use the <code dir="ltr">runInstaller</code> command with the <code dir="ltr">-deinstall</code> option, followed by the <code dir="ltr">-home</code> option to specify the path of the Oracle home you want to remove using the following syntax, where variable content is indicated in italics:</p>
<pre dir="ltr">runInstaller -deinstall -home <span class="italic">complete path of Oracle home</span> [-silent] [-checkonly] [-local] [-paramfile <span class="italic">complete path of input response file</span>] [-params name1=<span class="italic">value</span>
name2=<span class="italic">value</span> . . .] [-o <span class="italic">complete path of directory for saving files</span>] [-help]
 
</pre>
<p>Provide information about your servers as prompted or accept the defaults.</p>
<p>The deinstallation tool stops Oracle software, and removes Oracle software and configuration files on the operating system.</p>
<p>In addition, you can run the deinstallation tool with a response file, or select the following options to run the tool:</p>
<ul>
<li>
<p><code dir="ltr">-home</code></p>
<p>Use this flag to indicate the home path of the Oracle home to check or deinstall.</p>
<p>If you run <code dir="ltr">deinstall</code> from the <code dir="ltr">$ORACLE_HOME/deinstall</code> path, then the <code dir="ltr">-home</code> flag is not required because the tool identifies the location of the home where it is run. If you use <code dir="ltr">runInstaller -deinstall</code> from the installation media, then <code dir="ltr">-home</code> is mandatory.</p>
<p>To deinstall Oracle software using the deinstall command in the Oracle home you plan to deinstall, provide a parameter file located outside the Oracle home, and do not use the <code dir="ltr">-home</code> flag.</p>
</li>
<li>
<p><code dir="ltr">-silent</code></p>
<p>Use this flag to run the deinstallation tool in noninteractive mode.</p>
<ul>
<li>
<p>A working system that it can access to determine the installation and configuration information. The <code dir="ltr">-silent</code> flag does not work with failed installations.</p>
</li>
<li>
<p>A response file that contains the configuration values for the Oracle home that is being deinstalled or deconfigured.</p>
</li>
</ul>
<p>You can generate a response file to use or modify by running the tool with the <code dir="ltr">-checkonly</code> flag. The tool then discovers information from the Oracle home to deinstall and deconfigure. It generates the response file that you can then use with the <code dir="ltr">-silent</code> flag. The <code dir="ltr">-silent</code> flag does not work with failed installations</p>
</li>
<li>
<p><code dir="ltr">-checkonly</code></p>
<p>Use this flag to check the status of the Oracle software home configuration. Running the <code dir="ltr">deinstall</code> command with the <code dir="ltr">-checkonly</code> flag does not remove the Oracle configuration. The <code dir="ltr">-checkonly</code> flag generates a response file that you can use with the <code dir="ltr">deinstall</code> command and <code dir="ltr">-silent</code> option.</p>
</li>
<li>
<p><code dir="ltr">-local</code></p>
<p>Use this flag on a multinode environment to deinstall Oracle software in a cluster.</p>
<p>When you run <code dir="ltr">deinstall</code> with this flag, it deconfigures and deinstalls the Oracle software on the local node (the node where <code dir="ltr">deinstall</code> is run). It does not deinstall or deconfigure Oracle software on remote nodes.</p>
</li>
<li>
<p><code dir="ltr">-paramfile</code> <code dir="ltr"><span class="codeinlineitalic">complete path of input response file</span></code></p>
<p>Use this flag to run <code dir="ltr">deinstall</code> with a response file in a location other than the default. When you use this flag, provide the complete path where the response file is located.</p>
<p>The default location of the response file depends on the location of <code dir="ltr">deinstall</code>:</p>
<ul>
<li>
<p>From the installation media or stage location: <code dir="ltr"><span class="codeinlineitalic">stagelocation</span></code><code dir="ltr">/response</code></p>
<p>where <code dir="ltr"><span class="codeinlineitalic">stagelocation</span></code> is the path of the base directory in the installation media, or in the staged files location.</p>
</li>
<li>
<p>After installation from the installed Oracle home: <code dir="ltr">$ORACLE_HOME/deinstall/response</code></p>
</li>
</ul>
</li>
<li>
<p><code dir="ltr">-params</code> [<code dir="ltr">name1</code>=<code dir="ltr"><span class="codeinlineitalic">value</span></code> <code dir="ltr">name2</code>=<code dir="ltr"><span class="codeinlineitalic">value</span></code> <code dir="ltr">name3</code>=<code dir="ltr"><span class="codeinlineitalic">value</span></code> . . .]</p>
<p>Use this flag with a response file to override one or more values to change in a response file you have created.</p>
</li>
<li>
<p><code dir="ltr">-o</code> <code dir="ltr"><span class="codeinlineitalic">complete path of directory for saving response files</span></code></p>
<p>Use this flag to provide a path other than the default location where the response file (<code dir="ltr">deinstall.rsp.tmpl</code>) is saved.</p>
<p>The default location of the response file depends on the location of <code dir="ltr">deinstall</code>:</p>
<ul>
<li>
<p>From the installation media or stage location: <code dir="ltr"><span class="codeinlineitalic">stagelocation</span></code><code dir="ltr">/response</code></p>
<p>where <code dir="ltr"><span class="codeinlineitalic">stagelocation</span></code> is the path of the base directory in the installation media, or in the staged files location.</p>
</li>
<li>
<p>After installation from the installed Oracle home: <code dir="ltr">$ORACLE_HOME/deinstall/response</code></p>
</li>
</ul>
</li>
<li>
<p><code dir="ltr">-help</code></p>
<p>Use the help option (<code dir="ltr">-help</code>) to get additional information about the deinstallation tool option flags.</p>
</li>
</ul>
<div id="CWAIX609" class="sect3"><a id="sthref709"></a>
<h4 class="sect3"><span class="secnum">9.6.1.1</span> Deinstalling<a id="sthref710"></a><a id="sthref711"></a> Previous Release Grid Home</h4>
<p>For upgrades from previous releases, if you want to deinstall the previous release Grid home, then as the <code dir="ltr">root</code> user, you must manually change the permissions of the previous release Grid home, and then run the deinstallation tool.</p>
<p>For example:</p>
<pre dir="ltr"># chown -R grid:oinstall /u01/app/grid/11.2.0
# chmod -R 775 /u01/app/grid/11.2.0
</pre>
<p>In this example, <code dir="ltr">/u01/app/grid/11.2.0</code> is the previous release Grid home.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDCHBFD"></a>
<div id="CWAIX611" class="sect2">
<h3 class="sect2"><span class="secnum">9.6.2</span> <a id="sthref712"></a>Deinstallation Tool Command Example for Oracle Grid Infrastructure</h3>
<p>If you run the deinstallation tool using the deinstallation tool from the <code dir="ltr">$ORACLE_HOME/deinstall</code> folder, then the deinstallation starts without prompting you for an ORACLE_HOME.</p>
<p>Use the optional flag <code dir="ltr">-paramfile</code> to provide a path to a response file.</p>
<p>In the following example, the <code dir="ltr">runInstaller</code> command is in the path <code dir="ltr"><span class="codeinlineitalic">/directory_path</span></code>, where <code dir="ltr"><span class="codeinlineitalic">directory_path</span></code> is the path to the <code dir="ltr">database</code> directory on the installation media, and <code dir="ltr">/u01/app/12.1.0/grid/</code> is the path to the Grid home that you want to remove:</p>
<pre dir="ltr">$ cd /<span class="codeinlineitalic">directory_path</span>/
$ ./runInstaller -deinstall -home /u01/app/12.1.0/grid
</pre>
<p>The following example uses a response file in the software owner location <code dir="ltr">/home/usr/grid</code>:</p>
<pre dir="ltr">$ cd /<span class="codeinlineitalic">directory_path</span>/runInstaller
$ ./runInstaller -deinstall -paramfile /home/usr/grid/my_db_paramfile.tmpl
</pre></div>
<!-- class="sect2" -->
<a id="CHDJCGDI"></a>
<div id="CWAIX612" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">9.6.3</span> Deinstallation Response File Example for Grid Infrastructure for a Cluster</h3>
<p>You can run the deinstallation tool with the <code dir="ltr">-paramfile</code> option to use the values you specify in the response file. The following is an example of a response file for a cluster on nodes <code dir="ltr">node1</code> and <code dir="ltr">node2</code>, in which the Oracle Grid Infrastructure for a cluster software binary owner is <code dir="ltr">grid</code>, the Oracle Grid Infrastructure home (Grid home) is in the path <code dir="ltr">/u01/app/12.1.0/grid</code>, the Oracle base (the Oracle base for Oracle Grid Infrastructure, containing Oracle ASM log files, Oracle Clusterware logs, and other administrative files) is <code dir="ltr">/u01/app/grid/</code>, the central Oracle Inventory home (<code dir="ltr">oraInventory</code>) is <code dir="ltr">/u01/app/oraInventory</code>, the virtual IP addresses (VIP) are <code dir="ltr">192.0.2.2</code> and <code dir="ltr">192.0.2.4</code>, the local node (the node where you run the deinstallation session from) is <code dir="ltr">node1</code>:</p>
<pre dir="ltr">#Copyright (c) 2005, 2006 Oracle Corporation.  All rights reserved.
#Fri Feb 06 00:08:58 PST 2009
LOCAL_NODE=node1
HOME_TYPE=CRS
ASM_REDUNDANCY=\
ORACLE_BASE=/u01/app/12.1.0/grid/
VIP1_MASK=255.255.252.0
VOTING_DISKS=/u02/storage/grid/vdsk
SCAN_PORT=1522
silent=true
ASM_UPGRADE=false
ORA_CRS_HOME=/u01/app/12.1.0/grid
GPNPCONFIGDIR=$ORACLE_HOME
LOGDIR=/home/grid/SH/deinstall/logs/
GPNPGCONFIGDIR=$ORACLE_HOME
ORACLE_OWNER=grid
NODELIST=node1,node2
CRS_STORAGE_OPTION=2
NETWORKS=&#34;eth0&#34;/192.0.2.1\:public,&#34;eth1&#34;/10.0.0.1\:cluster_interconnect
VIP1_IP=192.0.2.2
NETCFGJAR_NAME=netcfg.jar
ORA_DBA_GROUP=dba
CLUSTER_NODES=node1,node2
JREDIR=/u01/app/12.1.0/grid/jdk/jre
VIP1_IF=eth0
REMOTE_NODES=node2
VIP2_MASK=255.255.252.0
ORA_ASM_GROUP=asm
LANGUAGE_ID=AMERICAN_AMERICA.WE8ISO8859P1
CSS_LEASEDURATION=400
NODE_NAME_LIST=node1,node2
SCAN_NAME=node1scn
SHAREJAR_NAME=share.jar
HELPJAR_NAME=help4.jar
SILENT=false
local=false
INVENTORY_LOCATION=/u01/app/oraInventory
GNS_CONF=false
JEWTJAR_NAME=jewt4.jar
OCR_LOCATIONS=/u02/storage/grid/ocr
EMBASEJAR_NAME=oemlt.jar
ORACLE_HOME=/u01/app/12.1.0/grid
CRS_HOME=true
VIP2_IP=192.0.2.4
ASM_IN_HOME=n
EWTJAR_NAME=ewt3.jar
HOST_NAME_LIST=node1,node2
JLIBDIR=/u01/app/12.1.0/grid/jlib
VIP2_IF=eth0
VNDR_CLUSTER=false
CRS_NODEVIPS=&#39;node1-vip/255.255.252.0/eth0,node2-vip/255.255.252.0/eth0&#39;
CLUSTER_NAME=node1-cluster  
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Do not use quotation marks with variables except in the following cases:
<ul>
<li>
<p>Around addresses in CRS_NODEVIPS:</p>
<pre dir="ltr">CRS_NODEVIPS=&#39;n1-vip/255.255.252.0/eth0,n2-vip/255.255.252.0/eth0&#39;
</pre></li>
<li>
<p>Around interface names in NETWORKS:</p>
<pre dir="ltr">NETWORKS=&#34;eth0&#34;/192.0.2.1:public,&#34;eth1&#34;/10.0.0.1:cluster_interconnect &#34;eth2&#34;/192.0.2.2:vip1_ip
</pre></li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4190">
<tr>
<td class="cellalignment4197">
<table class="cellalignment4195">
<tr>
<td class="cellalignment4194"><a href="postinst.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4194"><a href="trouble.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2014, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4199">
<table class="cellalignment4193">
<tr>
<td class="cellalignment4194"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4194"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4194"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4194"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4194"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4194"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>