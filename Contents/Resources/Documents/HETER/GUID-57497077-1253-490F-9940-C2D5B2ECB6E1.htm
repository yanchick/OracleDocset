<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-46534"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Rules%20and%20Restrictions%20When%20Using%20SQL%20for%20Remote%20Mapping%20in%20a%20Distributed%20Environment"></a><title>Rules and Restrictions When Using SQL for Remote Mapping in a Distributed Environment</title>
<meta name="generator" content="DITA Open Toolkit version 1.7.5"/>
<meta name="dcterms.created" content="2015-06-25T17:02:25Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Heterogeneous Connectivity User&#39;s Guide"/>
<meta name="dcterms.identifier" content="E17907-06"/>
<meta name="dcterms.isVersionOf" content="HETER"/>
<meta name="dcterms.rights" content="Copyright &nbsp;&copy;&nbsp;2001, 2015, Oracle and/or its affiliates. All rights reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-E93FB210-DADE-4EE4-BC42-1E1DA507D934.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-7A08EFA6-B201-4080-81F0-6FB819B03B2D.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17907-06.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1"></a> <span id="PAGE" style="display:none;">58/105</span> <!-- End Header --><a id="HETER4074"></a><a id="HETER4075"></a><a id="HETER4076"></a><a id="HETER4077"></a><a id="HETER4078"></a><a id="HETER4079"></a><a id="HETER4080"></a><a id="HETER4081"></a><a id="HETER4082"></a><a id="HETER4083"></a><a id="HETER4073"></a>
<h1 id="HETER-GUID-57497077-1253-490F-9940-C2D5B2ECB6E1" class="sect1">Rules and Restrictions When Using SQL for Remote Mapping in a Distributed Environment</h1>
<div>
<p>The following section lists some of the different rules or restrictions that exist when you use SQL for remote mapping in a distributed environment.</p>
<div class="infobox-note" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-A4B78245-D455-4754-B664-C8AFA66BD61A">
<p class="notep1">Note:</p>
<p>In the examples that follow, the <code>remote_db</code> noun refers to a remote non-Oracle system, and the <code>remote_oracle_db</code> noun refers to a remote Oracle Database.</p>
</div>
<div class="section">
<p class="subhead1">Rule A: A data definition language statement cannot be remote-mapped.</p>
</div>
<!-- class="section" -->
<div class="section">
<p>In Oracle data definition language, the target object syntactically has no place for a remote reference. Data definition language statements that contain remote references are executed locally. For Heterogeneous Services, this means it cannot directly create database objects in a non-Oracle database using SQL.</p>
<p>You can create database objects individually by using passthrough SQL, as shown in the following example:</p>
<pre>DECLARE
  num_rows INTEGER;
BEGIN 
  num_rows := DBMS_HS_PASSTHROUGH.EXECUTE_IMMEDIATE@remote_db 
  (
     &#39;create table x1 (c1 char, c2 int)&#39;
  ); 
END; 
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Rule B: INSERT, UPDATE and DELETE statements with a remote target table must be remote-mapped.</p>
</div>
<!-- class="section" -->
<div class="section">
<p>This rule is more restrictive for non-Oracle remote databases than for a remote Oracle database. This is because the remote system cannot retrieve data from the originating Oracle database while executing data manipulation language (DML) statements targeting tables in a non-Oracle system.</p>
<p>For example, to insert all local employees from the local <code>emp</code> table to a remote non-Oracle <code>emp</code> table, use the following statement:</p>
<pre>INSERT INTO emp@remote_db SELECT * FROM emp;
</pre>
<p>This statement is remote-mapped to the remote database. The remote-mapped statement sent to the remote database contains a remote reference back to the originating database for the <code>emp</code> table. A remote link received by the remote database is called a <a id="d5466e67" class="indexterm-anchor"></a><span class="bold">callback link</span>.</p>
<div class="infobox-note" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-67E69EDE-4EDF-438B-A1D2-3500350576C3">
<p class="notep1">Note:</p>
<p>Even though callback links are supported in generic Heterogeneous Services, they may not be implemented in all Heterogeneous Services agents. For more information, see your database gateway documentation to determine if callback links work with the database gateway that you are using.</p>
</div>
<p>If callback links are not supported by a particular gateway, the previous <code>INSERT</code> statements returns the following error:</p>
<pre>ORA-02025: all tables in the SQL statement must be at the remote database
</pre>
<p>The workaround is to write a PL/SQL block. For example:</p>
<pre>DECLARE 
CURSOR remote_insert IS SELECT * FROM emp;
BEGIN 
   FOR rec IN remote_insert LOOP
    INSERT INTO emp@remote_db (empno, ename, deptno) VALUES (
      rec.empno,
      rec.ename, 
      rec.deptno 
    );  
   END loop;
END;
</pre>
<p>Another special case involves session-specific SQL functions such as <code>USER</code>, <code>USERENV</code>, and <code>SYSDATE</code>. These functions must be executed at the originating site. A remote-mapped statement with these functions contains a callback link. For a non-Oracle database for which callbacks are not supported, this can (by default) result in a restriction error.</p>
<p>For example, consider the following statement:</p>
<pre>DELETE FROM emp@remote_db WHERE hiredate &gt; sysdate;
</pre>
<p>The previous statement returns the following error message:</p>
<pre>ORA-02070: database <span class="italic">REMOTE_DB</span> does not support special functions in this context 
</pre>
<p>This can be resolved by replacing special functions with a bind variable. For example:</p>
<pre>DELETE FROM emp@remote_db WHERE hiredate &gt; :1;
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Rule C: Object features such as tables with nested table columns, ADT columns, Opaque columns, or Ref Columns cannot be remote-mapped.</p>
</div>
<!-- class="section" -->
<div class="section">
<p>Currently, these column types are not supported for heterogeneous access. Hence, this limitation is not directly encountered.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Rule D: SQL statements containing operators and constructs that are not supported at the remote site cannot be remote-mapped.</p>
</div>
<!-- class="section" -->
<div class="section">
<p>In the case of an <code>INSERT</code>, <code>UPDATE</code>, or <code>DELETE</code> statement, the SQL statement cannot be executed (see Rule B). However, you might be able to execute the SQL statement if the unsupported operator or construct can be executed through a callback link.</p>
<p>In the case of a <code>SELECT</code> statement, you can execute a statement affected by this rule if none of the remaining rules require the statement to be remote-mapped. The <code>SELECT</code> statements affected by this rule are executed by retrieving all the necessary data through a remote <code>SELECT</code> operation, and processing the unsupported operator or construct locally using the SQL engine.</p>
<p>A remote <code>SELECT</code> operation is the operation that retrieves rows from a remote table, as opposed to an operation that retrieves data from a local table. A full table scan is when all the data in the remote table across the network without any filtering (for example, <code>SELECT * FROM EMP</code>) is retrieved.</p>
<p>Full table scans are expensive and, therefore, Oracle noun attempts to avoid them. If there are indexes on the remote table that can be used, these indexes are used in a <code>WHERE</code> clause predicate to reduce the number of rows retrieved across the network.</p>
<p>You can check the SQL statement generated by Oracle Database by explaining the statement and querying the <code>OTHER</code> column of the explain plan table for each <code>REMOTE</code> operation.</p>
<div class="infoboxnotealso" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-C90B681E-4D2C-421D-B455-389A33871DE3">
<p class="notep1">See Also:</p>
<p>Section&nbsp;3.11.1 for more information about how to interpret explain plans with remote references</p>
</div>
<p>For example, consider the following statement:</p>
<pre>SELECT COUNT(*) FROM emp@remote_db WHERE hiredate &lt; sysdate;
</pre>
<p>The statement returns the following output:</p>
<pre>COUNT(*)  
----------
        14
1 row selected.
</pre>
<p>The remote table scan is:</p>
<pre>SELECT hiredate FROM emp;
</pre>
<p>The predicate converted to a filter cannot be generated back and passed down to the remote operation because <code>sysdate</code> is not supported by the <span class="italic"><code>remote_db</code></span> or evaluation rules. Thus <code>sysdate</code> must be executed locally.</p>
<div class="infobox-note" id="GUID-57497077-1253-490F-9940-C2D5B2ECB6E1__GUID-33B3C3A0-0B4B-410A-B749-CC277F876167">
<p class="notep1">Note:</p>
<p>Because the remote table scan operation is only partially related to the original query, the number of rows retrieved can be significantly larger than expected and can have a significant impact on performance.</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Rule E: SQL statement containing a table expression cannot be remote-mapped.</p>
</div>
<!-- class="section" -->
<div class="section">
<p>This limitation is not directly encountered because table expressions are not supported in the heterogeneous access module.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Rule F: If a SQL statement selects LONG data, the statement must be mapped to the node where the table containing the LONG data resides.</p>
</div>
<!-- class="section" -->
<div class="section">
<p>Consider the following type of statement:</p>
<pre>SELECT long1 FROM <span class="italic">table_with_long</span>@<span class="italic">remote_db</span>, dual; 
</pre>
<p>The previous statement returns the following error message (if callback links are not supported):</p>
<pre>ORA-02025: all tables in the SQL statement must be at the remote database
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Rule G: The statement must be mapped to the node on which the table or tables with columns referenced in the FOR UPDATE OF clause resides when the SQL statement is of form &#34;SELECT...FOR UPDATE OF...&#34;</p>
</div>
<!-- class="section" -->
<div class="section">
<p>When the SQL statement is of the form <code>SELECT...FOR UPDATE OF...,</code> the statement must be mapped to the node on which the table or tables with columns referenced in the <code>FOR UPDATE OF</code> clause resides.</p>
<p>For example, consider the following statement:</p>
<pre>SELECT ename FROM emp@remote_db WHERE hiredate &lt; sysdate FOR UPDATE OF empno;
</pre>
<p>The previous statement returns the following error message if it cannot be remote-mapped:</p>
<pre>ORA-02070: database <span class="italic">REMOTE_DB</span> does not support special functions in this context 
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Rule H: If the SQL statement contains sequences, then the statement must be mapped to the site where each sequence is located.</p>
</div>
<!-- class="section" -->
<div class="section">
<p>This rule is not encountered for the heterogeneous access module because remote non-Oracle sequences are not supported.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Rule I: If the statement contains user-defined operators, then the statement must be mapped to the node where each operator is defined.</p>
</div>
<!-- class="section" -->
<div class="section">
<p>If the statement contains user-defined operators, the entire statement needs to be remote-mapped to the database node where the operator is defined.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Rule J: A statement containing duplicate bind variables cannot be remote-mapped.</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The workaround for this restriction is to use unique bind variables and bind by number.</p>
</div>
<!-- class="section" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1641">
<tr>
<td class="cellalignment1648">
<table class="cellalignment1646">
<tr>
<td class="cellalignment1645"><a href="GUID-E93FB210-DADE-4EE4-BC42-1E1DA507D934.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1645"><a href="GUID-7A08EFA6-B201-4080-81F0-6FB819B03B2D.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright &nbsp;&copy;&nbsp;2001, 2015, Oracle and/or its affiliates. All rights reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1650">
<table class="cellalignment1644">
<tr>
<td class="cellalignment1645"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1645"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1645"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1645"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1645"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1645"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>