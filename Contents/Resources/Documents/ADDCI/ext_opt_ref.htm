<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-7"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Extensible%20Optimizer%20Interface"></a><title>Extensible Optimizer Interface</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-06-09T01:57:02Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Data Cartridge Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E15882-06"/>
<meta name="dcterms.isVersionOf" content="ADDCI"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="ext_idx_ref.htm" title="Previous" type="text/html"/>
<link rel="Next" href="ext_agg_ref.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E15882-06.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-2B314B88-73C1-49A0-9A74-1AB99B20FA94"></a> <span id="PAGE" style="display:none;">29/33</span> <!-- End Header -->
<a id="ADDCI4210"></a>
<h1 id="ADDCI-GUID-2B314B88-73C1-49A0-9A74-1AB99B20FA94" class="sect1"><span class="enumeration_chapter">21</span> Extensible Optimizer Interface</h1>
<div>
<p>Consider the functions and procedures that comprise the interface to the extensible optimizer.</p>
</div>
<a id="ADDCI5082"></a>
<div class="props_rev_3"><a id="GUID-EF80CBFF-6B23-41DB-9777-29E630F47350"></a>
<h2 id="ADDCI-GUID-EF80CBFF-6B23-41DB-9777-29E630F47350" class="sect2">Extensible Optimizer Interface</h2>
<div>
<p>Consider the components of the Extensible Optimizer interface.</p>
<p>The extensible optimizer interfaces support working with partitioned tables and domain indexes. This is accomplished in two ways:</p>
<ul style="list-style-type: disc;">
<li>
<p>Additional attributes have been added to some system-defined object types that are parameters to the <code class="codeph">ODCIStats</code> interface methods. For example, the <code class="codeph">ODCIColInfo</code> type is enhanced to add information about the column&#39;s partition.</p>
</li>
<li>
<p>Arguments or semantics of the arguments have changed for some <code class="codeph">ODCIStats</code> methods.</p>
</li>
</ul>
<p>Note that you must update your code for <code class="codeph">ODCIStats2</code> version of the <code class="codeph">ODCIStats</code> interfaces to use your statistics type with an indextype that implements the <code class="codeph">ODCIIndex2</code> version of the extensible indexing interfaces.</p>
</div>
<div class="props_rev_3"><a id="GUID-2E4DE8D5-5769-4DF4-9F87-B208EE9D1007"></a>
<h3 id="ADDCI-GUID-2E4DE8D5-5769-4DF4-9F87-B208EE9D1007" class="sect3">Using Statistics Functions in an Extensible Optimizer Interface</h3>
<div>
<div class="section">
<p>Consider an example of how the statistics functions might be used.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>In the schema <code class="codeph">HR</code>, we define the following operators:</span>
<div>
<pre dir="ltr">CREATE OPERATOR Contains binding (VARCHAR2(4000), VARCHAR2(30))
   RETURN NUMBER USING Contains_fn;

CREATE TYPE stat1 (
   ...,
   STATIC FUNCTION ODCIStatsSelectivity(pred ODCIPredInfo, sel OUT NUMBER,
      args ODCIArgDescList, start NUMBER, stop NUMBER, doc VARCHAR2(4000),
      key VARCHAR2(30)) return NUMBER,
   STACTIC FUNCTION ODCIStatsFunctionCost(func ODCIFuncInfo, cost OUT
      ODCICost, args ODCIArgDescList, doc VARCHAR2(4000), key VARCHAR2(30))
      return NUMBER,
   STATIC FUNCTION ODCIStatsIndexCost(ia ODCIIndexInfo, sel NUMBER,
      cost OUT ODCICost, qi ODCIQueryInfo, pred ODCIPredInfo,
      args ODCIArgDescList, start NUMBER, stop NUMBER,
      key VARCHAR2(30)) return NUMBER,
   ...
);

CREATE TABLE T (resume VARCHAR2(4000));

CREATE INDEX T_resume on T(resume) INDEXTYPE IS indtype;

ASSOCIATE STATISTICS WITH FUNCTIONS Contains_fn USING stat1;

ASSOCIATE STATISTICS WITH INDEXTYPE indtype USING stat1 
   WITH SYSTEM MANAGED STORAGE TABLES;
</pre></div>
</li>
<li class="stepexpand"><span>The optimizer encounters the query</span>
<div>
<pre dir="ltr">SELECT * FROM T WHERE Contains(resume, &#39;ORACLE&#39;) = 1,
</pre></div>
</li>
<li class="stepexpand"><span>It computes the selectivity of the predicate by invoking the user-defined selectivity function for the functional implementation of the <code class="codeph">Contains</code> operator. In this case, the selectivity function is <code class="codeph">stat1.ODCIStatsSelectivity</code>. It is called as follows:</span>
<div>
<pre dir="ltr">stat1.ODCIStatsSelectivity (
   ODCIPredInfo(&#39;HR&#39;, &#39;Contains_fn&#39;, NULL, 29),
   sel,
   ODCIArgDescList(
      ODCIArgDesc(ODCIConst.ArgLit,
                  NULL, NULL, NULL, NULL, NULL, NULL),
      ODCIArgDesc(ODCIConst.ArgLit,
                  NULL, NULL, NULL, NULL, NULL, NULL),
      ODCIArgDesc(ODCIConst.ArgCol, &#39;T&#39;, &#39;HR&#39;, &#39;&#34;RESUME&#34;&#39;, NULL, NULL, NULL),
      ODCIArgDesc(ODCIConst.ArgLit,
                  NULL, NULL, NULL, NULL, NULL, NULL)),
      1,
      1,
      NULL,
      &#39;ORACLE&#39;)
</pre></div>
</li>
<li class="stepexpand"><span>Suppose the selectivity function returns a selectivity of 3 (percent). When the domain index is being evaluated, then the optimizer calls the user-defined index cost function as follows:</span>
<div>
<pre dir="ltr">stat1.ODCIStatsIndexCost (   ODCIIndexInfo(&#39;HR&#39;, &#39;T_RESUME&#39;,      ODCIColInfoList(ODCIColInfo(&#39;HR&#39;, &#39;T&#39;, &#39;&#34;RESUME&#34;&#39;, NULL, NULL, NULL, 0, 0, 0, 0)), NULL, 0, 0, 0, 0),      3,      cost,      NULL,      ODCIPredInfo(&#39;HR&#39;, &#39;Contains&#39;, NULL, 13),      ODCIArgDescList( ODCIArgDesc(ODCIConst.ArgLit,                                   NULL, NULL, NULL, NULL, NULL, NULL),                       ODCIArgDesc(ODCIConst.ArgLit,                                   NULL, NULL, NULL, NULL, NULL, NULL),                       ODCIArgDesc(ODCIConst.ArgLit,                                   NULL, NULL, NULL, NULL, NULL, NULL)),      1,      1,      &#39;ORACLE&#39;)
</pre></div>
</li>
<li class="stepexpand"><span>Suppose that the optimizer decides not to use the domain index because it is too expensive. Then it calls the user-defined cost function for the functional implementation of the operator as follows:</span>
<div>
<pre dir="ltr">stat1.ODCIStatsFunctionCost (
   ODCIFuncInfo(&#39;HR&#39;, &#39;Contains_fn&#39;, NULL, 1),
   cost,
   ODCIArgDescList(  ODCIArgDesc(ODCIConst.ArgCol, 
                       &#39;T&#39;, &#39;HR&#39;, &#39;&#34;RESUME&#34;&#39;, NULL, NULL, NULL),
                     ODCIArgDesc(ODCIConst.ArgLit, 
                        NULL, NULL, NULL, NULL, NULL, NULL)),
   NULL,
   &#39;ORACLE&#39;)
</pre></div>
</li>
</ol>
</div>
</div>
<a id="ADDCI5084"></a>
<div class="props_rev_3"><a id="GUID-4538C0C3-FFAF-4E25-B6D4-F136121950C0"></a>
<h3 id="ADDCI-GUID-4538C0C3-FFAF-4E25-B6D4-F136121950C0" class="sect3">EXPLAIN PLAN</h3>
<div>
<div class="section">
<p><code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> shows the user-defined CPU and I/O costs for domain indexes in the <code class="codeph">CPU_COST</code> and <code class="codeph">IO_COST</code> columns of <code class="codeph">PLAN_TABLE</code>. For example, suppose we have a table <code class="codeph">Emp_tab</code> and a user-defined operator <code class="codeph">Contains</code>. Further, suppose that there is a domain index <code class="codeph">EmpResume_indx</code> on the <code class="codeph">Resume_col</code> column of <code class="codeph">Emp_tab</code>, and that the indextype of <code class="codeph">EmpResume_indx</code> supports the operator <code class="codeph">Contains</code>. Then, the query</p>
<pre dir="ltr">SELECT * FROM Emp_tab WHERE Contains(Resume_col, &#39;Oracle&#39;) = 1
</pre>
<p>might have the following plan:</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-4538C0C3-FFAF-4E25-B6D4-F136121950C0__GUID-A0E58BE4-69F5-4E58-B966-E4996DFDF7CB">
<table class="cellalignment5987" summary="The following table provides an example of the EXPLAIN PLAN.">
<thead>
<tr class="cellalignment5978">
<th class="cellalignment6034" id="d73899e367">OPERATION</th>
<th class="cellalignment6062" id="d73899e371">OPTIONS</th>
<th class="cellalignment6082" id="d73899e374">OBJECT_NAME</th>
<th class="cellalignment6038" id="d73899e377">CPU_COST</th>
<th class="cellalignment6060" id="d73899e380">IO_COST</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5978">
<td class="cellalignment6036" id="d73899e385" headers="d73899e367">
<pre dir="ltr">SELECT STATEMENT
</pre></td>
<td class="cellalignment6063" headers="d73899e385 d73899e371">
<pre dir="ltr"></pre></td>
<td class="cellalignment6083" headers="d73899e385 d73899e374">
<pre dir="ltr"></pre></td>
<td class="cellalignment6040" headers="d73899e385 d73899e377">
<pre dir="ltr"></pre></td>
<td class="cellalignment6061" headers="d73899e385 d73899e380">
<pre dir="ltr"></pre></td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6036" id="d73899e397" headers="d73899e367">
<pre dir="ltr">TABLE ACCESS
</pre></td>
<td class="cellalignment6063" headers="d73899e397 d73899e371">
<pre dir="ltr">BY ROWID
</pre></td>
<td class="cellalignment6083" headers="d73899e397 d73899e374">
<pre dir="ltr">EMP_TAB
</pre></td>
<td class="cellalignment6040" headers="d73899e397 d73899e377">
<pre dir="ltr"></pre></td>
<td class="cellalignment6061" headers="d73899e397 d73899e380">
<pre dir="ltr"></pre></td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6036" id="d73899e411" headers="d73899e367">
<pre dir="ltr">DOMAIN INDEX
</pre></td>
<td class="cellalignment6063" headers="d73899e411 d73899e371">
<pre dir="ltr"></pre></td>
<td class="cellalignment6083" headers="d73899e411 d73899e374">
<pre dir="ltr">EMPRESUME_INDX
</pre></td>
<td class="cellalignment6040" headers="d73899e411 d73899e377">
<pre dir="ltr">300
</pre></td>
<td class="cellalignment6061" headers="d73899e411 d73899e380">
<pre dir="ltr">4
</pre></td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="ADDCI5085"></a>
<div class="props_rev_3"><a id="GUID-28A4EDA6-19DD-4773-B3B8-1802C3B01E21"></a>
<h3 id="ADDCI-GUID-28A4EDA6-19DD-4773-B3B8-1802C3B01E21" class="sect3">INDEX Hint</h3>
<div>
<div class="section">
<p>The index hint applies to domain indexes. In other words, the index hint forces the optimizer to use the hinted index for a user-defined operator, if possible.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADDCI5086"></a>
<div class="props_rev_3"><a id="GUID-53F41476-C56D-42F9-9442-57612A993026"></a>
<h3 id="ADDCI-GUID-53F41476-C56D-42F9-9442-57612A993026" class="sect3">ORDERED_PREDICATES Hint</h3>
<div>
<div class="section">
<p>The hint <code class="codeph">ORDERED_PREDICATES</code> forces the optimizer to preserve the order of predicate evaluation (except predicates used for index keys) as specified in the <code class="codeph">WHERE</code> clause of a SQL DML statement.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="ADDCI5088"></a><a id="ADDCI5087"></a>
<div class="props_rev_3"><a id="GUID-77BE64E1-1EF6-4649-847D-567A72DAB77D"></a>
<h2 id="ADDCI-GUID-77BE64E1-1EF6-4649-847D-567A72DAB77D" class="sect2">User-Defined ODCIStats Functions</h2>
<div>
<div class="section">
<p>User-defined <code class="codeph">ODCIStats</code> functions are used for table columns, functions, package, type, indextype or domain indexes.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-77BE64E1-1EF6-4649-847D-567A72DAB77D__GUID-4DAE6E6B-0196-423F-9E3C-546072D77B50">
<p class="titleintable">Table 20-1 Summary of User-Defined ODCIStats Functions</p>
<table class="cellalignment5987" title="Summary of User-Defined ODCIStats Functions" summary="Column 1 gives the function name, Column two provides its description">
<thead>
<tr class="cellalignment5978">
<th class="cellalignment6094" id="d73899e608">Function</th>
<th class="cellalignment6054" id="d73899e611">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5978">
<td class="cellalignment6095" id="d73899e616" headers="d73899e608">
<p><a href="ext_opt_ref.htm#GUID-866750E9-7193-458B-B29C-6A494094DF6C">ODCIGetInterfaces()</a></p>
</td>
<td class="cellalignment6055" headers="d73899e616 d73899e611">
<p>Discover which version of the <code class="codeph">ODCIStats</code> interface the user has implemented.</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6095" id="d73899e628" headers="d73899e608">
<p><a href="ext_opt_ref.htm#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a></p>
</td>
<td class="cellalignment6055" headers="d73899e628 d73899e611">
<p>Called by the <code class="codeph">DBMS_STATS</code> package to collect user-defined statistics on a table, a partition of a table, an index, or a partition of an index.</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6095" id="d73899e640" headers="d73899e608">
<p><a href="ext_opt_ref.htm#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete()</a></p>
</td>
<td class="cellalignment6055" headers="d73899e640 d73899e611">
<p>Deletes user-defined statistics on a table, a partition of a table, an index, or a partition of an index.</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6095" id="d73899e649" headers="d73899e608">
<p><a href="ext_opt_ref.htm#GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1">ODCIStatsFunctionCost()</a></p>
</td>
<td class="cellalignment6055" headers="d73899e649 d73899e611">
<p>Computes the cost of a function.</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6095" id="d73899e658" headers="d73899e608">
<p><a href="ext_opt_ref.htm#GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6">ODCIStatsExchangePartition()</a></p>
</td>
<td class="cellalignment6055" headers="d73899e658 d73899e611">
<p>Exchanges domain index statistics when an <code class="codeph">ALTER TABLE EXCHANGE PARTITION ... INCLULDING INDEXES</code> command is issued.</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6095" id="d73899e670" headers="d73899e608">
<p><a href="ext_opt_ref.htm#GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777">ODCIStatsIndexCost()</a></p>
</td>
<td class="cellalignment6055" headers="d73899e670 d73899e611">
<p>Calculates the cost of a domain index scan.</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6095" id="d73899e679" headers="d73899e608">
<p><a href="ext_opt_ref.htm#GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3">ODCIStatsSelectivity()</a></p>
</td>
<td class="cellalignment6055" headers="d73899e679 d73899e611">
<p>Specifies the selectivity of a predicate.</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6095" id="d73899e688" headers="d73899e608">
<p><a href="ext_opt_ref.htm#GUID-7256F85B-B97A-4258-9596-70D88FC9DE4C">ODCIStatsTableFunction()</a></p>
</td>
<td class="cellalignment6055" headers="d73899e688 d73899e611">
<p>Provides cardinality statistics for table functions and input cursor expressions.</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6095" id="d73899e697" headers="d73899e608">
<p><a href="ext_opt_ref.htm#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics()</a></p>
</td>
<td class="cellalignment6055" headers="d73899e697 d73899e611">
<p>Updates statistics during partition maintenance operations. Patches the domain index statistics.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<a id="ADDCI5090"></a><a id="ADDCI5091"></a><a id="ADDCI5089"></a>
<div class="props_rev_3"><a id="GUID-866750E9-7193-458B-B29C-6A494094DF6C"></a>
<h3 id="ADDCI-GUID-866750E9-7193-458B-B29C-6A494094DF6C" class="sect3">ODCIGetInterfaces()</h3>
<div>
<div class="section">
<p><code class="codeph">ODCIGetInterfaces</code> is invoked by the server to discover which version of the <code class="codeph">ODCIStats</code> interface the user has implemented in the methods of the user-defined statistics type.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Syntax</p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">FUNCTION ODCIGetInterfaces(
   ifclist OUT ODCIObjectList)
RETURN NUMBER;
</pre></div>
<!-- class="section" -->
<div class="tblformal" id="GUID-866750E9-7193-458B-B29C-6A494094DF6C__GUID-819AE6D9-3271-4EED-AF67-2C3B59346622">
<table class="cellalignment5987" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter.">
<thead>
<tr class="cellalignment5978">
<th class="cellalignment6060" id="d73899e781">Parameter</th>
<th class="cellalignment6088" id="d73899e784">IN/OUT</th>
<th class="cellalignment6096" id="d73899e787">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5978">
<td class="cellalignment6061" id="d73899e792" headers="d73899e781">
<pre dir="ltr">ifclist
</pre></td>
<td class="cellalignment6090" headers="d73899e792 d73899e784">
<pre dir="ltr">OUT
</pre></td>
<td class="cellalignment6097" headers="d73899e792 d73899e787">
<p>The version of the <code class="codeph">ODCIStats</code> interfaces implemented by the statistics type. This value should be <code class="codeph">SYS.ODCISTATS2</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p class="subhead3">Returns</p>
</div>
<!-- class="section" -->
<div class="section">
<p><code class="codeph">ODCIConst.Success</code> on success, <code class="codeph">ODCIConst.Error</code> otherwise.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADDCI5094"></a><a id="ADDCI5095"></a><a id="ADDCI5093"></a>
<div class="props_rev_3"><a id="GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87"></a>
<h3 id="ADDCI-GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87" class="sect3">ODCIStatsCollect()</h3>
<div>
<div class="section">
<p>Called by the <code class="codeph">DBMS_STATS</code> package to collect user-defined statistics.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87__GUID-56AAA2E0-2EFC-4EF9-9B79-FBAA4E23E511">
<table class="cellalignment5987" summary="Column 1 has lists the version of a function and column 2 gives its description.">
<thead>
<tr class="cellalignment5978">
<th class="cellalignment6018" id="d73899e885">Syntax</th>
<th class="cellalignment6039" id="d73899e888">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5978">
<td class="cellalignment6021" id="d73899e893" headers="d73899e885">
<pre dir="ltr">FUNCTION ODCIStatsCollect(
   col ODCIColInfo, 
   options ODCIStatsOptions, 
   statistics OUT RAW,
   env ODCIEnv) 
return NUMBER;
</pre></td>
<td class="cellalignment6041" headers="d73899e893 d73899e888">
<p>Called by the <code class="codeph">DBMS_STATS</code> package to collect user-defined statistics on a table or a partition of a table.</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6021" id="d73899e903" headers="d73899e885">
<pre dir="ltr">FUNCTION ODCIStatsCollect(
   ia ODCIIndexInfo, 
   options ODCIStatsOptions, 
   statistics OUT RAW,
   env ODCIEnv)
 return NUMBER;
</pre></td>
<td class="cellalignment6041" headers="d73899e903 d73899e888">
<p>Called to collect user-defined statistics on an index or a partition of an index.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="tblformal" id="GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87__GUID-1C66368D-E893-40B3-897A-EA2EF13D0B10">
<table class="cellalignment5987" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter.">
<thead>
<tr class="cellalignment5978">
<th class="cellalignment6052" id="d73899e918">Parameter</th>
<th class="cellalignment6088" id="d73899e921">IN/OUT</th>
<th class="cellalignment6005" id="d73899e924">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5978">
<td class="cellalignment6053" id="d73899e929" headers="d73899e918">
<p><code class="codeph">col</code></p>
</td>
<td class="cellalignment6090" headers="d73899e929 d73899e921">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6007" headers="d73899e929 d73899e924">
<p>Column for which statistics are being collected</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6053" id="d73899e940" headers="d73899e918">
<p><code class="codeph">options</code></p>
</td>
<td class="cellalignment6090" headers="d73899e940 d73899e921">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6007" headers="d73899e940 d73899e924">
<p>Options passed to <code class="codeph">DBMS_STATS</code></p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6053" id="d73899e953" headers="d73899e918">
<p><code class="codeph">statistics</code></p>
</td>
<td class="cellalignment6090" headers="d73899e953 d73899e921">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6007" headers="d73899e953 d73899e924">
<p>User-defined statistics collected</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6053" id="d73899e964" headers="d73899e918">
<p>env</p>
</td>
<td class="cellalignment6090" headers="d73899e964 d73899e921">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6007" headers="d73899e964 d73899e924">
<p>Contains general information about the environment in which the routine is executing</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6053" id="d73899e974" headers="d73899e918">
<p><code class="codeph">ia</code></p>
</td>
<td class="cellalignment6090" headers="d73899e974 d73899e921">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6007" headers="d73899e974 d73899e924">
<p>Domain index for which statistics are being collected</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p class="subhead3">Returns</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The function returns <code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning.</code></p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Usage Notes</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>This function should be implemented as a <code class="codeph">STATIC</code> type method.</p>
</li>
<li>
<p>If statistics are being collected for only one partition, the <code class="codeph">TablePartition</code> field in the <code class="codeph">ODCIColInfo</code> type is filled in with the name of the partition. Otherwise (if statistics must be collected for all the partitions or for the entire table), the <code class="codeph">TablePartition</code> field is null.</p>
</li>
<li>
<p>If the <code class="codeph">DBMS_STATS</code> package methods are executed to collect user-defined statistics on a partitioned table, then <code class="codeph">n+1</code> <code class="codeph">ODCIStatsCollect</code> calls are made, where <code class="codeph">n</code> is the number of partitions in the table. The first <code class="codeph">n</code> calls are made with the <code class="codeph">TablePartition</code> attribute in <code class="codeph">ODCIColInfo</code> filled in with the partition name and the <code class="codeph">ODCIStatsOptions.CallProperty</code> set to <code class="codeph">IntermediateCall</code>. The last call is made with <code class="codeph">ODCIEnv.CallPropertyflag</code> set to <code class="codeph">FinalCall</code> to allow you to collect aggregate statistics for the entire table.</p>
</li>
<li>
<p>If user-defined statistics are being collected for only one partition of the table, two <code class="codeph">ODCIStatsCollect</code> calls are made. In the first, you should collect statistics for the partition. For this call, the <code class="codeph">TablePartition</code> attribute of the <code class="codeph">ODCIColInfo</code> structure is filled in and the <code class="codeph">ODCIEnv.CallProperty</code> is set to <code class="codeph">FirstCall</code>.</p>
</li>
<li>
<p>In the second call you can update the aggregate statistics of the table based upon the new statistics collected for the partition. In this call, the <code class="codeph">ODCIEnv.CallPropertyflag</code> is set to <code class="codeph">FinalCall</code> to indicate that it is the second call. The <code class="codeph">ODCIColInfo.TablePartition</code> is filled in with the partition name in both the calls.</p>
</li>
<li>
<p>The <a href="ext_opt_ref.htm#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a> method is invoked only one time for a non-partitioned domain index, a partitioned domain index and a partition in a domain index. If the statistics are being collected only for one partition in a domain index, the <code class="codeph">IndexPartitionNum</code> field in the <code class="codeph">ODCIIndexInfo</code> type is filled in with the partition number. Otherwise, the <code class="codeph">IndexPartitionNum</code> field is <code class="codeph">null</code>.</p>
</li>
<li>
<p>Because the statistics <code class="codeph">OUT RAW</code> argument of statistics is not used in the new interface, the cartridge developer should store the user-defined statistics result in some user-defined tables.</p>
</li>
<li>
<p>If a non-partitioned domain index is being <code class="codeph">ANALYZE</code>d, the user should collect statistics for the domain index.</p>
</li>
<li>
<p>If a partitioned domain index is being <code class="codeph">ANALYZE</code>d,</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">ODCIEnv.CallProperty = StatsGlobalAndPartition</code> means that the user should collect statistics for all partitions in the domain index and then aggregate statistics of the domain index based upon the statistics collected for all the partitions</p>
</li>
<li>
<p><code class="codeph">ODCIEnv.CallProperty = StatsGlobal</code> means that the user should aggregate domain index statistics from the statistics of all the domain index partitions.</p>
</li>
<li>
<p><code class="codeph">ODCIEnv.CallProperty = StatsPartition</code> means that the user should collect statistics for all index partitions in the domain index.</p>
</li>
</ul>
</li>
<li>
<p>If only one partition of the domain index is being <code class="codeph">ANALYZE</code>d,</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">ODCIEnv.CallProperty = StatsGlobalAndPartition</code> means that the user should collect statistics for the single index partition and then aggregate statistics of the domain index based upon the statistics of all the partitions.</p>
</li>
<li>
<p><code class="codeph">ODCIEnv.CallProperty = StatsGlobal</code> means that the user should aggregate domain index statistics from the statistics of all the index partitions.</p>
</li>
<li>
<p><code class="codeph">ODCIEnv.CallProperty = StatsPartition</code> means that the user should collect statistics for the single index partition.</p>
</li>
</ul>
</li>
<li>
<p>Note that when <code class="codeph">ODCIEnv.CallProperty = StatsGlobalAndPartition</code> or <code class="codeph">StatsGlobal</code>, the user should aggregate statistics for the domain index, depending on the availability of the statistics collected for the other index partitions. If the statistics for all the index partitions are available, aggregate these statistics. If any one statistics for an index partition is absent, do nothing.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="ADDCI5097"></a><a id="ADDCI5098"></a><a id="ADDCI5096"></a>
<div class="props_rev_3"><a id="GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2"></a>
<h3 id="ADDCI-GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2" class="sect3">ODCIStatsDelete()</h3>
<div>
<div class="section">
<p><code class="codeph">ODCIStatsDelete</code> is called to delete user-defined statistics.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2__GUID-D553F464-5495-44C0-9B16-113EBBB45FAB">
<table class="cellalignment5987" summary="Column 1 has lists the version of a function and column 2 gives its description.">
<thead>
<tr class="cellalignment5978">
<th class="cellalignment6098" id="d73899e1239">Syntax</th>
<th class="cellalignment5989" id="d73899e1242">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5978">
<td class="cellalignment6099" id="d73899e1247" headers="d73899e1239">
<pre dir="ltr">FUNCTION ODCIStatsDelete(
   col ODCIColInfo, 
   statistics OUT RAW,
   env ODCIEnv) 
return NUMBER;
</pre></td>
<td class="cellalignment5992" headers="d73899e1247 d73899e1242">
<p>Deletes user-defined statistics on a table or a partition of a table.</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6099" id="d73899e1254" headers="d73899e1239">
<pre dir="ltr">FUNCTION ODCIStatsDelete(
   ia ODCIIndexInfo, 
   statistics OUT RAW, 
   env ODCIEnv) 
return NUMBER;
</pre></td>
<td class="cellalignment5992" headers="d73899e1254 d73899e1242">
<p>Deletes user-defined statistics on an index or a partition of an index.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="tblformal" id="GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2__GUID-7CF81EA1-350B-4618-B1D1-6576A1A38597">
<table class="cellalignment5987" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter.">
<thead>
<tr class="cellalignment5978">
<th class="cellalignment6038" id="d73899e1269">Parameter</th>
<th class="cellalignment6088" id="d73899e1272">IN/OUT</th>
<th class="cellalignment6100" id="d73899e1275">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1280" headers="d73899e1269">
<p><code class="codeph">col</code></p>
</td>
<td class="cellalignment6090" headers="d73899e1280 d73899e1272">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e1280 d73899e1275">
<p>Column for which statistics are being deleted</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1291" headers="d73899e1269">
<p><code class="codeph">statistics</code></p>
</td>
<td class="cellalignment6090" headers="d73899e1291 d73899e1272">
<pre dir="ltr">OUT
</pre></td>
<td class="cellalignment6101" headers="d73899e1291 d73899e1275">
<p>Contains table-level aggregate statistics for a partitioned table or index</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1302" headers="d73899e1269">
<p><code class="codeph">env</code></p>
</td>
<td class="cellalignment6090" headers="d73899e1302 d73899e1272">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e1302 d73899e1275">
<p>Contains general information about the environment in which the routine is executing</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1313" headers="d73899e1269">
<p><code class="codeph">ia</code></p>
</td>
<td class="cellalignment6090" headers="d73899e1313 d73899e1272">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e1313 d73899e1275">
<p>Domain index for which statistics are deleted</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p class="subhead3">Returns</p>
</div>
<!-- class="section" -->
<div class="section">
<p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning.</code></p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Usage Notes</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>This function should be implemented as a <code class="codeph">STATIC</code> method.</p>
</li>
<li>
<p>When the function is called for a non-partitioned table, the <code class="codeph">statistics</code> argument in the <code class="codeph">ODCIStatsDelete</code> interface is ignored.</p>
</li>
<li>
<p>If the statistics are being deleted for a partitioned table, the <code class="codeph">ODCIStatsDelete</code> is called <code class="codeph">n+1</code> times. The first <code class="codeph">n</code> calls are with the partition name filled in the <code class="codeph">ODCIColInfo</code> structure and the <code class="codeph">ODCIEnv.CallProperty</code> set to <code class="codeph">IntermediateCall</code>. The last call is made with the <code class="codeph">ODCIEnv.CallProperty</code> set to <code class="codeph">FinalCall</code>.</p>
</li>
<li>
<p>In the first call, delete the statistics for the specific partitions; and in the last call drop or clean up any structures created for holding statistics for the deleted table. The <code class="codeph">ODCIColInfo.TablePartition</code> is set to null in the last call. In the first call, the <code class="codeph">TablePartition</code> field is filled in.</p>
</li>
<li>
<p>If statistics are being deleted for only one partition and the <code class="codeph">_minimal_stats_aggregation</code> parameter is set to <code class="codeph">FALSE</code>, two <code class="codeph">ODCIStatsDelete</code> calls are made. In each call, <code class="codeph">ODCIColInfo.TablePartition</code> is filled in with the partition name. On the first call, delete any user-defined statistics collected for that partition. On the second call, update the aggregate statistics for the table.</p>
</li>
<li>
<p>If statistics are being deleted for one partition and <code class="codeph">_minimal_stats_aggregation</code> is set to <code class="codeph">TRUE</code>, <code class="codeph">ODCIStatsDelete</code> is only called one to delete any user-defined statistics collected for that partition.</p>
</li>
<li>
<p>The initial value of <code class="codeph">_minimal_stats_aggregation</code> is <code class="codeph">TRUE</code>.</p>
</li>
<li>
<p>The <a href="ext_opt_ref.htm#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete()</a> method is invoked only one time for non-partitioned domain index, partitioned domain index, or an index partition.</p>
</li>
<li>
<p>If the statistics is being deleted for a non-partitioned domain index, the user should delete user-defined statistics for the domain index.</p>
</li>
<li>
<p>If the statistics is being deleted for a partitioned domain index, the user should delete the aggregated statistics of the domain index and optionally delete user-defined statistics for all domain index partitions, depending on <code class="codeph">Options</code> in <code class="codeph">ODCIEnv.CallProperty</code>:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">ODCIEnv.CallProperty = StatsGlobalAndPartition</code> means that the user should delete statistics for all the domain index partitions and aggregated statistics of the domain index.</p>
</li>
<li>
<p><code class="codeph">ODCIEnv.CallProperty = StatsGlobal</code> means that the user should delete the aggregated statistics of the domain index.</p>
</li>
<li>
<p><code class="codeph">ODCIEnv.CallProperty = StatsPartition</code> is not valid option.</p>
</li>
</ul>
</li>
<li>
<p>If the statistics is being deleted for only one partition of the index, the user should delete user-defined statistics for the index partition.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="ADDCI5100"></a><a id="ADDCI5101"></a><a id="ADDCI5102"></a><a id="ADDCI5099"></a>
<div class="props_rev_3"><a id="GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1"></a>
<h3 id="ADDCI-GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1" class="sect3">ODCIStatsFunctionCost()</h3>
<div>
<div class="section">
<p>Computes the cost of a function.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Syntax</p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">FUNCTION ODCIStatsFunctionCost(
   func ODCIFuncInfo, 
   cost OUT ODCICost, 
   args ODCIArgDescList, 
   <span class="italic">list</span>,
   env ODCIEnv) 
return NUMBER;
</pre></div>
<!-- class="section" -->
<div class="tblformal" id="GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1__GUID-897555F1-7343-4C0C-AF2A-A96470C2EC61">
<table class="cellalignment5987" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter.">
<thead>
<tr class="cellalignment5978">
<th class="cellalignment6038" id="d73899e1542">Parameter</th>
<th class="cellalignment6088" id="d73899e1545">IN/OUT</th>
<th class="cellalignment6100" id="d73899e1548">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1553" headers="d73899e1542">
<pre dir="ltr">func
</pre></td>
<td class="cellalignment6090" headers="d73899e1553 d73899e1545">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e1553 d73899e1548">
<p>Function or type method for which the cost is being computed</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1564" headers="d73899e1542">
<pre dir="ltr">cost
</pre></td>
<td class="cellalignment6090" headers="d73899e1564 d73899e1545">
<pre dir="ltr">OUT
</pre></td>
<td class="cellalignment6101" headers="d73899e1564 d73899e1548">
<p>Computed cost (must be positive whole numbers)</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1575" headers="d73899e1542">
<pre dir="ltr">args
</pre></td>
<td class="cellalignment6090" headers="d73899e1575 d73899e1545">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e1575 d73899e1548">
<p>Descriptor of actual arguments with which the function or type method was called. If the function has <span class="italic">n</span> arguments, the <code class="codeph">args</code> array contains <span class="italic">n</span> elements, each describing the actual arguments of the function or type method</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1594" headers="d73899e1542">
<pre dir="ltr"><span class="italic">list</span>
</pre></td>
<td class="cellalignment6090" headers="d73899e1594 d73899e1545">
<p>&emsp;</p>
</td>
<td class="cellalignment6101" headers="d73899e1594 d73899e1548">
<p>List of actual parameters to the function or type method; the number, position, and type of each argument must be identical in the function or type method.</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1606" headers="d73899e1542">
<pre dir="ltr">env
</pre></td>
<td class="cellalignment6090" headers="d73899e1606 d73899e1545">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e1606 d73899e1548">
<p>Contains general information about the environment in which the routine is executing</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p class="subhead3">Returns</p>
</div>
<!-- class="section" -->
<div class="section">
<p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning.</code></p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Usage Notes</p>
</div>
<!-- class="section" -->
<div class="section">
<p>This function should be implemented as a static type method.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADDCI5104"></a><a id="ADDCI5105"></a><a id="ADDCI5106"></a><a id="ADDCI5103"></a>
<div class="props_rev_3"><a id="GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6"></a>
<h3 id="ADDCI-GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6" class="sect3">ODCIStatsExchangePartition()</h3>
<div>
<div class="section">
<p>Exchanges domain index statistics when an <code class="codeph">ALTER TABLE EXCHANGE PARTITION ... INCLULDING INDEXES</code> command is issued.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Syntax</p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">FUNCTION ODCIStatsExchangePartition(
   ia ODCIIndexInfo, 
   ia1 ODCIIndexInfo,
   env ODCIEnv) 
return NUMBER;
</pre></div>
<!-- class="section" -->
<div class="tblformal" id="GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6__GUID-7A85A8AF-0C24-4B2A-9677-7DA9056BC1E9">
<table class="cellalignment5987" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter.">
<thead>
<tr class="cellalignment5978">
<th class="cellalignment6038" id="d73899e1709">Parameter</th>
<th class="cellalignment6088" id="d73899e1712">IN/OUT</th>
<th class="cellalignment6100" id="d73899e1715">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1720" headers="d73899e1709">
<pre dir="ltr">ia
</pre></td>
<td class="cellalignment6090" headers="d73899e1720 d73899e1712">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e1720 d73899e1715">
<p>Information about the index partition that must be exchanged</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1731" headers="d73899e1709">
<pre dir="ltr">ia1
</pre></td>
<td class="cellalignment6090" headers="d73899e1731 d73899e1712">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e1731 d73899e1715">
<p>Information about the index of the non-partitioned table with which the partition is exchanged</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1742" headers="d73899e1709">
<pre dir="ltr">env
</pre></td>
<td class="cellalignment6090" headers="d73899e1742 d73899e1712">
<p>&emsp;</p>
</td>
<td class="cellalignment6101" headers="d73899e1742 d73899e1715">
<p>Contains general information about the environment in which the routine is executing</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p class="subhead3">Returns</p>
</div>
<!-- class="section" -->
<div class="section">
<p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning</code></p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Usage Notes</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>This method should be implemented as a <code class="codeph">STATIC</code> type.</p>
</li>
<li>
<p>This method should be capable of converting the statistics associated with a domain index partition into statistics associated with a non-partitioned domain index, and the reverse. If the statistics are missing for one of the indexes or index partitions, the user should be able to delete these statistics.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="ADDCI5108"></a><a id="ADDCI5109"></a><a id="ADDCI5110"></a><a id="ADDCI5107"></a>
<div class="props_rev_3"><a id="GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777"></a>
<h3 id="ADDCI-GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777" class="sect3">ODCIStatsIndexCost()</h3>
<div>
<div class="section">
<p>Calculates the cost of a domain index scan, either a scan of the entire index or a scan of one or more index partitions if a local domain index has been built.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Syntax</p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">FUNCTION ODCIStatsIndexCost(
   ia ODCIIndexInfo, 
   sel NUMBER, 
   cost OUT ODCICost, 
   qi ODCIQueryInfo, 
   pred ODCIPredInfo, 
   args ODCIArgDescList,
   start <span class="italic">operator_return_type</span>,
   stop <span class="italic">operator_return_type</span>,
   <span class="italic">list</span>, 
   env ODCIEnv) 
return NUMBER;
</pre></div>
<!-- class="section" -->
<div class="tblformal" id="GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777__GUID-31D25B12-8FBC-4C5E-B78D-85F4CF292936">
<table class="cellalignment5987" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter.">
<thead>
<tr class="cellalignment5978">
<th class="cellalignment6038" id="d73899e1860">Parameter</th>
<th class="cellalignment6088" id="d73899e1863">IN/OUT</th>
<th class="cellalignment6100" id="d73899e1866">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1871" headers="d73899e1860">
<pre dir="ltr">ia
</pre></td>
<td class="cellalignment6090" headers="d73899e1871 d73899e1863">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e1871 d73899e1866">
<p>domain index for which statistics are being collected</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1882" headers="d73899e1860">
<pre dir="ltr">sel
</pre></td>
<td class="cellalignment6090" headers="d73899e1882 d73899e1863">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e1882 d73899e1866">
<p>the user-computed selectivity of the predicate</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1893" headers="d73899e1860">
<pre dir="ltr">cost
</pre></td>
<td class="cellalignment6090" headers="d73899e1893 d73899e1863">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e1893 d73899e1866">
<p>computed cost (must be positive whole numbers)</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1904" headers="d73899e1860">
<pre dir="ltr">qi
</pre></td>
<td class="cellalignment6090" headers="d73899e1904 d73899e1863">
<p>&emsp;</p>
</td>
<td class="cellalignment6101" headers="d73899e1904 d73899e1866">
<p>Information about the query</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1915" headers="d73899e1860">
<pre dir="ltr">pred
</pre></td>
<td class="cellalignment6090" headers="d73899e1915 d73899e1863">
<p>&emsp;</p>
</td>
<td class="cellalignment6101" headers="d73899e1915 d73899e1866">
<p>Information about the predicate</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1925" headers="d73899e1860">
<pre dir="ltr">args
</pre></td>
<td class="cellalignment6090" headers="d73899e1925 d73899e1863">
<p>&emsp;</p>
</td>
<td class="cellalignment6101" headers="d73899e1925 d73899e1866">
<p>Descriptor of <code class="codeph">start</code>, <code class="codeph">stop</code>, and actual value arguments with which the operator was called. If the operator has <span class="italic">n</span> arguments, the <code class="codeph">args</code> array contains <span class="italic">n+1</span> elements, the first element describing the start value, the second element describing the stop value, and the remaining <span class="italic">n-1</span> elements describing the actual value arguments of the operator (that is, the arguments after the first)</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1954" headers="d73899e1860">
<pre dir="ltr">start
</pre></td>
<td class="cellalignment6090" headers="d73899e1954 d73899e1863">
<p>&emsp;</p>
</td>
<td class="cellalignment6101" headers="d73899e1954 d73899e1866">
<p>Lower bound of the operator (for example, 2 for a predicate <code class="codeph">fn(...)</code> &gt; <code class="codeph">2)</code></p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1969" headers="d73899e1860">
<pre dir="ltr">stop
</pre></td>
<td class="cellalignment6090" headers="d73899e1969 d73899e1863">
<p>&emsp;</p>
</td>
<td class="cellalignment6101" headers="d73899e1969 d73899e1866">
<p>Upper bound of the operator (for example, 5 for a predicate <code class="codeph">fn(...)</code> <code class="codeph">&lt;</code> <code class="codeph">5</code>)</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e1988" headers="d73899e1860">
<pre dir="ltr"><span class="italic">list</span>
</pre></td>
<td class="cellalignment6090" headers="d73899e1988 d73899e1863">
<p>&emsp;</p>
</td>
<td class="cellalignment6101" headers="d73899e1988 d73899e1866">
<p>List of actual parameters to the operator (excluding the first); the number, position, and type of each argument must be identical to the one in the operator.</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e2000" headers="d73899e1860">
<pre dir="ltr">env
</pre></td>
<td class="cellalignment6090" headers="d73899e2000 d73899e1863">
<p>&emsp;</p>
</td>
<td class="cellalignment6101" headers="d73899e2000 d73899e1866">
<p>Contains general information about the environment in which the routine is executing</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p class="subhead3">Returns</p>
</div>
<!-- class="section" -->
<div class="section">
<p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning</code></p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Usage Notes</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>For each table in the query, the optimizer uses partition pruning to determine the range of partitions that may be accessed. These partitions are called <span class="bold">interesting partitions</span>. The set of interesting partitions for a table is also the set of interesting partitions for all domain indexes on that table. The cost of a domain index can depend on the set of interesting partitions, so the optimizer passes a list of interesting index partitions to <code class="codeph">ODCIStatsIndexCost</code> in the <code class="codeph">args</code> argument (the type of this argument, <code class="codeph">ODCIArgDescList</code>, is a list of <code class="codeph">ODCIArgDesc</code> argument descriptor types) for those arguments that are columns. For non-partitioned domain indexes or for cases where no partition pruning is possible, no partition list is passed to <code class="codeph">ODCIStatsIndexCost</code>, and you should assume that the entire index is accessed.</p>
</li>
<li>
<p>The domain index key can contain multiple column arguments (for example, the indexed column and column arguments from other tables appearing earlier in a join order). For each column appearing in the index key, the <code class="codeph">args</code> argument contains the list of interesting partitions for the table. For example, for an index key</p>
<pre dir="ltr">op(T1.c1, T2.c2) = 1
</pre>
<p>the optimizer passes a list of interesting partitions for tables <code class="codeph">T1</code> and <code class="codeph">T2</code> if they are partitioned and there is partition pruning for them.</p>
</li>
<li>
<p>This function should be implemented as a static type method.</p>
</li>
<li>
<p>Only a single call is made to the <a href="ext_opt_ref.htm#GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777">ODCIStatsIndexCost()</a> function for queries on partitioned or non-partitioned tables. For queries on partitioned tables, additional information is passed in the <a href="ext_opt_ref.htm#GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777">ODCIStatsIndexCost()</a> function. Note that some partitions in the list passed to <a href="ext_opt_ref.htm#GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777">ODCIStatsIndexCost()</a> may not actually be accessed by the query. The list of interesting partitions chiefly serves to exclude partitions that are definitely not accessed.</p>
</li>
<li>
<p>When the <a href="ext_opt_ref.htm#GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777">ODCIStatsIndexCost()</a> function is invoked, users can fill in a string in the <code class="codeph">IndexCostInfo</code> field of the cost attribute to supply any additional information that might be helpful. The string (255 characters maximum) is displayed in the <code class="codeph">OPTIONS</code> column in the <code class="codeph">EXPLAIN PLAN</code> output when an execution plan chooses a domain index scan.</p>
</li>
<li>
<p>Users implementing this function must return <code class="codeph">&#39;SYS.ODCISTATS2&#39;</code> in the <a href="ext_opt_ref.htm#GUID-866750E9-7193-458B-B29C-6A494094DF6C">ODCIGetInterfaces()</a> call.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="ADDCI5112"></a><a id="ADDCI5113"></a><a id="ADDCI5114"></a><a id="ADDCI5111"></a>
<div class="props_rev_3"><a id="GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3"></a>
<h3 id="ADDCI-GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3" class="sect3">ODCIStatsSelectivity()</h3>
<div>
<div class="section">
<p>Specifies the selectivity of a predicate. The selectivity of a predicate involving columns from a single table is the fraction of rows of that table that satisfy the predicate. For predicates involving columns from multiple tables (for example, join predicates), the selectivity should be computed as a fraction of rows in the Cartesian product of those tables.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Syntax</p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">FUNCTION ODCIStatsSelectivity(
   pred ODCIPredInfo, 
   sel OUT NUMBER, 
   args ODCIArgDescList, 
   start <span class="italic">function_return_type</span>, 
   stop <span class="italic">function_return_type</span>, 
   <span class="italic">list</span>, 
   env ODCIEnv) 
return NUMBER;
</pre></div>
<!-- class="section" -->
<div class="tblformal" id="GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3__GUID-494B36B1-4C1B-4DB5-AEBC-4768A2410335">
<table class="cellalignment5987" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter.">
<thead>
<tr class="cellalignment5978">
<th class="cellalignment6038" id="d73899e2190">Parameter</th>
<th class="cellalignment6088" id="d73899e2193">IN/OUT</th>
<th class="cellalignment6100" id="d73899e2196">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e2201" headers="d73899e2190">
<p><code class="codeph">pred</code></p>
</td>
<td class="cellalignment6090" headers="d73899e2201 d73899e2193">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e2201 d73899e2196">
<p>Predicate for which the selectivity is being computed</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e2212" headers="d73899e2190">
<p><code class="codeph">sel</code></p>
</td>
<td class="cellalignment6090" headers="d73899e2212 d73899e2193">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e2212 d73899e2196">
<p>The computed selectivity, expressed as a number between (and including) 0 and 100, represents a percentage.</p>
<p>The optimizer ignores numbers less than 0 or greater than 100 as invalid values. If the computed selectivity is less than 0.5%, a value of 0 may be returned in the output parameter <code class="codeph">sel</code>. A selectivity of 0 does not mean that the predicate will be removed</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e2228" headers="d73899e2190">
<p><code class="codeph">args</code></p>
</td>
<td class="cellalignment6090" headers="d73899e2228 d73899e2193">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e2228 d73899e2196">
<p>Descriptor of <code class="codeph">start</code>, <code class="codeph">stop</code>, and actual arguments with which the function, type method, or operator was called. If the function has <span class="italic">n</span> arguments, the <code class="codeph">args</code> array contains <span class="italic">n+2</span> elements, the first element describing the start value, the second element describing the stop value, and the remaining <span class="italic">n</span> elements describing the actual arguments of the function, method, or operator</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e2258" headers="d73899e2190">
<p><code class="codeph">start</code></p>
</td>
<td class="cellalignment6090" headers="d73899e2258 d73899e2193">
<p>&emsp;</p>
</td>
<td class="cellalignment6101" headers="d73899e2258 d73899e2196">
<p>Lower bound of the function (for example, 2 for a predicate <code class="codeph">fn(...)</code> <code class="codeph">&gt;</code> <code class="codeph">2</code>)</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e2278" headers="d73899e2190">
<p><code class="codeph">stop</code></p>
</td>
<td class="cellalignment6090" headers="d73899e2278 d73899e2193">
<p>&emsp;</p>
</td>
<td class="cellalignment6101" headers="d73899e2278 d73899e2196">
<p>Upper bound of the function (for example, 5 for a predicate <code class="codeph">fn(...)</code> <code class="codeph">&lt;</code> <code class="codeph">5)</code></p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e2297" headers="d73899e2190">
<p><span class="italic"><code class="codeph">list</code></span></p>
</td>
<td class="cellalignment6090" headers="d73899e2297 d73899e2193">
<p>&emsp;</p>
</td>
<td class="cellalignment6101" headers="d73899e2297 d73899e2196">
<p>List of actual parameters to the function or type method; the number, position, and type of each argument must be identical to the one in the function, type method, or operator.</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e2309" headers="d73899e2190">
<p><code class="codeph">env</code></p>
</td>
<td class="cellalignment6090" headers="d73899e2309 d73899e2193">
<p>&emsp;</p>
</td>
<td class="cellalignment6101" headers="d73899e2309 d73899e2196">
<p>Contains general information about the environment in which the routine is executing</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p class="subhead3">Returns</p>
</div>
<!-- class="section" -->
<div class="section">
<p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning</code></p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Usage Notes</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>As in <code class="codeph">ODCIStatsIndexCost</code>, the args argument contains a list of <span class="italic">interesting</span> partitions for the tables whose columns are referenced in the predicate for which the selectivity has to be computed. These interesting partitions are partitions that cannot be eliminated by partition pruning as possible candidates to be accessed. The set of interesting partitions is passed to the function only if partition pruning has occurred (in other words, the interesting partitions are a strict subset of all the partitions).</p>
</li>
<li>
<p>For example, when <code class="codeph">ODCIStatsSelectivity</code> is called to compute the selectivity of the predicate:</p>
<pre dir="ltr">f(T1.c1, T2.c2) &gt; 4
</pre>
<p>the optimizer passes the list of interesting partitions for the table <code class="codeph">T1</code> (in the argument descriptor for column <code class="codeph">T1.c1</code>) if partition pruning is possible; similarly for the table <code class="codeph">T2</code>.</p>
<p>If a predicate contains columns from several tables, this information is indicated by the flag bit <code class="codeph">PredMultiTable</code>, set in the <code class="codeph">Flags</code> attribute of the <code class="codeph">pred</code> argument.</p>
</li>
<li>
<p>This function should be implemented as a static type method.</p>
</li>
<li>
<p>Users implementing this interface must return <code class="codeph">&#39;SYS.ODCISTATS2&#39;</code> in the <code class="codeph">ODCIGetInterfaces</code> call.</p>
</li>
<li>
<p>The selectivity of a predicate involving columns from a single table is the fraction of rows of that table that satisfy the predicate. For predicates involving columns from multiple tables (for example, join predicates), the selectivity should be computed as a fraction of rows in the Cartesian product of those tables. For tables with partition pruning, the selectivity should be expressed relative to the cardinalities of the interesting partitions of the tables involved.</p>
<p>The selectivity of predicates involving columns on partitioned tables is computed relative to the rows in the interesting partitions. Thus, the selectivity of the predicate</p>
<pre dir="ltr">g(T1.c1) &lt; 5
</pre>
<p>is the percentage of rows in the set of interesting partitions (or all partitions if no partition pruning is possible) that satisfies this predicate. For predicates with columns from multiple tables, the selectivity must be relative to the number of rows in the cartesian product of the tables.</p>
</li>
<li>
<p>For example, consider the predicate:</p>
<pre dir="ltr">f(T1.c1, T2.c2) &gt; 4
</pre>
<p>Suppose that the number of rows in the interesting partitions is 1000 for <code class="codeph">T1</code> and 5000 for <code class="codeph">T2</code>. The selectivity of this predicate must be expressed as the percentage of the 5,000,000 rows in the Cartesian product of <code class="codeph">T1</code> and <code class="codeph">T2</code> that satisfy the predicate.</p>
</li>
<li>
<p>If a predicate contains columns from several tables, this information is indicated by the flag bit <code class="codeph">PredMultiTable</code> set in the <code class="codeph">Flags</code> attribute of the <code class="codeph">pred</code> argument.</p>
</li>
<li>
<p>A selectivity expressed relative to the base cardinalities of the tables involved may be only an approximation of the true selectivity if cardinalities (and other statistics) of the tables have been reduced based on single-table predicates or other joins earlier in the join order. However, this approximation to the true selectivity should be acceptable to most applications.</p>
</li>
<li>
<p>Only one call is made to the <code class="codeph">ODCIStatsSelectivity</code> function for queries on partitioned or non-partitioned tables. In the case of queries on partitioned tables, additional information is passed while calling the <code class="codeph">ODCIStatsSelectivity</code> function.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="ADDCI5116"></a><a id="ADDCI5117"></a><a id="ADDCI5115"></a>
<div class="props_rev_3"><a id="GUID-7256F85B-B97A-4258-9596-70D88FC9DE4C"></a>
<h3 id="ADDCI-GUID-7256F85B-B97A-4258-9596-70D88FC9DE4C" class="sect3">ODCIStatsTableFunction()</h3>
<div>
<div class="section">
<p>This function provides cardinality statistics for table functions and input cursor expressions.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Syntax</p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">STATIC FUNCTION ODCIStatsTableFunction(
   func IN SYS.ODCIFuncInfo, 
   outStats OUT SYS.ODCITabFuncStats, 
   argDesc IN SYS.ODCIArgDescList, 
   <span class="italic">list</span>)
RETURN NUMBER;
</pre></div>
<!-- class="section" -->
<div class="tblformal" id="GUID-7256F85B-B97A-4258-9596-70D88FC9DE4C__GUID-4E1C7D11-3390-47AE-B19F-C583DE6370CE">
<table class="cellalignment5987" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter.">
<thead>
<tr class="cellalignment5978">
<th class="cellalignment6038" id="d73899e2514">Parameter</th>
<th class="cellalignment6088" id="d73899e2517">IN/OUT</th>
<th class="cellalignment6100" id="d73899e2520">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e2525" headers="d73899e2514">
<p><code class="codeph">func</code></p>
</td>
<td class="cellalignment6090" headers="d73899e2525 d73899e2517">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e2525 d73899e2520">
<p>Table function name</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e2536" headers="d73899e2514">
<p><code class="codeph">outStats</code></p>
</td>
<td class="cellalignment6090" headers="d73899e2536 d73899e2517">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e2536 d73899e2520">
<p>Number of rows expected to be returned</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e2547" headers="d73899e2514">
<p><code class="codeph">argDesc</code></p>
</td>
<td class="cellalignment6090" headers="d73899e2547 d73899e2517">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e2547 d73899e2520">
<p>Description of the arguments to the table function</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e2558" headers="d73899e2514">
<p><span class="italic"><code class="codeph">list</code></span></p>
</td>
<td class="cellalignment6090" headers="d73899e2558 d73899e2517">
<p>&emsp;</p>
</td>
<td class="cellalignment6101" headers="d73899e2558 d73899e2520">
<p>The arguments&#39; compile-time values. Expressions that only have values at run time are represented by nulls.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p class="subhead3">Returns</p>
</div>
<!-- class="section" -->
<div class="section">
<p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning.</code></p>
</div>
<!-- class="section" --></div>
</div>
<a id="ADDCI5119"></a><a id="ADDCI5120"></a><a id="ADDCI5118"></a>
<div class="props_rev_3"><a id="GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2"></a>
<h3 id="ADDCI-GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2" class="sect3">ODCIStatsUpdPartStatistics()</h3>
<div>
<div class="section">
<p>Updates statistics during partition maintenance operations. This lets the statistics type patch up the domain index statistics to correctly reflect the partition maintenance operation.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Syntax</p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">STATIC FUNCTION ODCIStatsCollect(
   ia ODCIIndexInfo,
   palist ODCIPartInfoList,
   env ODCIEnv) 
RETURN NUMBER
</pre></div>
<!-- class="section" -->
<div class="tblformal" id="GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2__GUID-E73F4EEC-3724-4773-9D7D-38FC5E34B8C7">
<table class="cellalignment5987" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter.">
<thead>
<tr class="cellalignment5978">
<th class="cellalignment6038" id="d73899e2654">Parameter</th>
<th class="cellalignment6088" id="d73899e2657">IN/OUT</th>
<th class="cellalignment6100" id="d73899e2660">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e2665" headers="d73899e2654">
<p><code class="codeph">ia</code></p>
</td>
<td class="cellalignment6090" headers="d73899e2665 d73899e2657">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e2665 d73899e2660">
<p>Contains information about the domain index. It does not contain any partition specific information</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e2676" headers="d73899e2654">
<p>palist</p>
</td>
<td class="cellalignment6090" headers="d73899e2676 d73899e2657">
<pre dir="ltr">&emsp;
</pre></td>
<td class="cellalignment6101" headers="d73899e2676 d73899e2660">
<p>Contains information about the partitions that are to be dropped or added</p>
</td>
</tr>
<tr class="cellalignment5978">
<td class="cellalignment6040" id="d73899e2686" headers="d73899e2654">
<pre dir="ltr">env
</pre></td>
<td class="cellalignment6090" headers="d73899e2686 d73899e2657">
<p>&emsp;</p>
</td>
<td class="cellalignment6101" headers="d73899e2686 d73899e2660">
<p>Environment handle passed to the routine</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p class="subhead3">Returns</p>
</div>
<!-- class="section" -->
<div class="section">
<p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning.</code></p>
<ul style="list-style-type: disc;">
<li>
<p>When the statistics type is specified by the <code class="codeph">SYSTEM MANAGED</code> approach, then the <a href="ext_opt_ref.htm#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics()</a> method is invoked only one time during PMO. Only DML and query are allowed in the method implementation.</p>
</li>
<li>
<p>If the user maintains the domain index statistics in a global non-partitioned table, then the user should delete the entry for the user-defined statistics for the dropped partition (and optionally add a <code class="codeph">NULL</code> entry for added partition). They can then check if <code class="codeph">ODCIEnv.CallProperty</code> is <code class="codeph">StatsGlobalAndPartition</code> or <code class="codeph">StatsPartition</code>. If <code class="codeph">ODCIEnv.CallProperty</code> is <code class="codeph">StatsGlobalAndPartition</code> then they should aggregate all the available index partition statistics. If <code class="codeph">ODCIEnv.CallProperty</code> is <code class="codeph">StatsPartition</code> they can simply delete the aggregate statistics, or leave the aggregate statistics as they are. <code class="codeph">ODCIEnv.CallProperty</code> cannot be <code class="codeph">StatsGlobal</code> for this call.</p>
</li>
<li>
<p>The user should use the information passed in by the <code class="codeph">ODCIEnv.CallProperty</code> to determine the type of statistics to delete and adjust.</p>
</li>
<li>
<p>If the method returns <code class="codeph">ODCIConst.Error</code>, the error is ignored and the partition management operation continues.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment5977">
<tr>
<td class="cellalignment5984">
<table class="cellalignment5982">
<tr>
<td class="cellalignment5981"><a href="ext_idx_ref.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5981"><a href="ext_agg_ref.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment5986">
<table class="cellalignment5980">
<tr>
<td class="cellalignment5981"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5981"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment5981"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5981"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment5981"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment5981"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>