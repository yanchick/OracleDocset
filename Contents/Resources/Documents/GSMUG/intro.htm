<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-46421"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Introduction%20to%20Global%20Data%20Services"></a><title>Introduction to Global Data Services</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1056"/>
<meta name="dcterms.created" content="2015-06-23T8:5:13Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Global Data Services Concepts and Administration Guide"/>
<meta name="dcterms.identifier" content="E22100-11"/>
<meta name="dcterms.isVersionOf" content="GSMUG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2013, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="release_changes.htm" title="Previous" type="text/html"/>
<link rel="Next" href="globser.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E22100-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">6/12</span> <!-- End Header -->
<div id="GSMUG107" class="chapter"><a id="sthref6"></a>
<h1 class="chapter"><span class="secnum">1</span> Introduction to Global Data Services</h1>
<p>This chapter provides an overview of the Global Data Services architecture.</p>
<p>This chapter includes the following topics:</p>
<ul>
<li>
<p><a href="#CHDBCAJJ">Introduction to Global Data Services</a></p>
</li>
<li>
<p><a href="#CEGIEDJD">Global Data Services Architecture</a></p>
</li>
<li>
<p><a href="#CHDDEBFD">Overview of Global Services</a></p>
</li>
<li>
<p><a href="#CHDJBCDJ">Global Connection Load Balancing</a></p>
</li>
<li>
<p><a href="#BABHCGHF">Global Run-Time Connection Load Balancing</a></p>
</li>
<li>
<p><a href="#BABGGGAA">Global Services Failover</a></p>
</li>
<li>
<p><a href="#CHDGHBCC">Global Data Services Use Cases</a></p>
</li>
</ul>
<a id="CHDBCAJJ"></a>
<div id="GSMUG674" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Introduction to Global Data Services</h2>
<p>Many enterprises consolidate their information technology infrastructure to improve business efficiency. Database consolidation is a critical part of this process. However, most organizations must still maintain local and remote replicas of their databases for reasons that include:</p>
<ul>
<li>
<p>Business continuity and disaster recovery</p>
</li>
<li>
<p>High availability</p>
</li>
<li>
<p>Performance optimization for local clients</p>
</li>
<li>
<p>Content localization and caching</p>
</li>
<li>
<p>Compliance with local laws</p>
</li>
</ul>
<p>In any set of database replicas, some database servers may have a slow query response time because of high load or high network latency, while other servers capable of offering a faster response time may be under-utilized. Optimal query performance and resource utilization across a set of database replicas requires a workload management solution that provides dynamic load balancing of client connections and workload requests across the replicas.</p>
<p>Many enterprises use a home-grown solution for workload management across database replicas. These solutions cannot provide critical functionality such as run-time load balancing and reliable database service failover between replicas because they are not fully integrated with Oracle software.</p>
<p>Oracle Database provides a powerful workload management feature called database services. Database services are named representations of one or more database instances. Database services allow you to group database workloads, ensure that client requests are routed to the optimal instance that offers a service, and provide high availability by transparently failing client connections over to surviving instances when a planned or unplanned instance outage occurs.</p>
<p>Oracle Global Data Services (GDS) implements the Oracle Database service model across a set of replicated databases known as a <span class="glossaryterm">Global Data Services configuration</span>.</p>
<p>A Global Data Services configuration looks like a virtual multi-instance database to database clients. It provides client access through <span class="glossaryterm">global service</span>s, which are functionally similar to the local database services provided by single-instance or Oracle Real Application Clusters (Oracle RAC) databases. Local and global services both provide load balancing, high availability, and resource management. The essential difference between global services and local services is that global services span the instances of multiple databases, whereas local services span the instances of a single database.</p>
<p>A Global Data Services configuration and its global services are created and managed using the <span class="glossaryterm">GDSCTL</span> command-line interface, which is similar to the <code dir="ltr">SRVCTL</code> command-line interface used to manage an Oracle RAC database and its services.</p>
<p>A Global Data Services configuration can consist of any combination of multi-instance or single-instance Oracle databases hosted on heterogeneous or non-heterogeneous server platforms. Oracle Data Guard, Oracle GoldenGate, or any other database replication technology, can be used to synchronize the databases in a Global Data Services configuration.</p>
<p>Global Data Services is a highly effective solution for automatic workload management across a set of replicated databases, whether used with many widely distributed databases and clients or with a single database, a local replica and a few clients.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Global Data Services is primarily intended for applications that are replication-aware. A replication-aware application is one that has any of the following characteristics:
<ul>
<li>
<p>Uses read-only global services exclusively</p>
</li>
<li>
<p>Uses read/write global services, but is programmed to resolve update conflicts if those services are simultaneously offered by more than one database</p>
</li>
<li>
<p>Can tolerate replicated data that is potentially stale due to replication lag</p>
</li>
</ul>
<p>Applications that are not replication-aware can still benefit from the improved high availability and disaster recovery capabilities provided by Global Data Services.</p>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="gsmctlref.htm#CACCEHIG">Appendix A, &#34;Global Data Services Control Utility (GDSCTL) Reference,&#34;</a> for more information about GDSCTL</p>
</li>
<li>
<p><span class="italic">Oracle Database Administrator&#39;s Guide</span> for more info about database services</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="CEGIEDJD"></a>
<div id="GSMUG108" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Global Data Services Architecture</h2>
<p><a href="#CHDBEGGD">Figure 1-1</a> shows an example of a Global Data Services (GDS) configuration and the GDS components that are present in every GDS configuration. The sections that follow describe these components.</p>
<div id="GSMUG645" class="figure">
<p class="titleinfigure"><a id="CHDBEGGD"></a>Figure 1-1 Global Data Services Components</p>
<img width="659" height="734" src="img/overview_logical.gif" alt="Description of Figure 1-1 follows"/><br/>
<a id="sthref7" href="img_text/overview_logical.htm">Description of &#34;Figure 1-1 Global Data Services Components&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>This section describes the Global Data Services components:</p>
<ul>
<li>
<p><a href="#BHCCHGJG">Global Data Services Pool</a></p>
</li>
<li>
<p><a href="#BHCFDDJE">Global Data Services Region</a></p>
</li>
<li>
<p><a href="#BHCHGIGC">Global Service Manager</a></p>
</li>
<li>
<p><a href="#BHCDCFCG">Global Data Services Catalog</a></p>
</li>
<li>
<p><a href="#BHCGDAEC">Oracle Notification Service Servers</a></p>
</li>
</ul>
<a id="BHCCHGJG"></a>
<div id="GSMUG111" class="sect2">
<h3 class="sect2">Global Data Services Pool<a id="sthref8"></a></h3>
<p>A <span class="glossaryterm">Global Data Services pool</span> is a named subset of databases within a GDS configuration that provides a unique set of global services and belongs to the same administrative domain. Partitioning of GDS configuration databases into pools simplifies service management and provides higher security by allowing each pool to be administered by a different administrator.</p>
<p>A database can only belong to a single Global Data Services pool. All databases in a pool need not provide the same set of global services. However, all databases that provide the same global service must belong to the same pool.</p>
</div>
<!-- class="sect2" -->
<a id="BHCFDDJE"></a>
<div id="GSMUG112" class="sect2">
<h3 class="sect2">Global Data Services Region<a id="sthref9"></a></h3>
<p>A <span class="glossaryterm">Global Data Services region</span> is a named subset of databases in a GDS configuration and database clients that share network proximity such that the network latency between members of a region is typically lower than between members of different regions. A region usually corresponds to a local area or metropolitan area network (LAN or MAN). For example, a data center hosting one or more GDS configuration databases and database clients in geographical proximity to the data center might belong to the same region.</p>
<p>A region can contain multiple Global Data Services pools, and these pools can span multiple regions.</p>
<p>For high availability purposes, each region in a GDS configuration should have a designated <span class="glossaryterm">buddy region</span>, which is a region that contains <span class="glossaryterm">global service manager</span>s that can provide continued access to a GDS configuration if the global services managers in the local region become unavailable.</p>
</div>
<!-- class="sect2" -->
<a id="BHCHGIGC"></a>
<div id="GSMUG114" class="sect2">
<h3 class="sect2">Global Service Manager<a id="sthref10"></a></h3>
<p>A <span class="glossaryterm">global service manager</span> is the central software component of Global Data Services, providing service-level load balancing, failover, and centralized management of services in the GDS configuration. Global Data Service clients use a global service manager to perform all GDS configuration operations.</p>
<p>A global service manager is analogous to the remote listener in an Oracle RAC database, except that a global service manager serves multiple databases. A global service manager does the following:</p>
<ul>
<li>
<p>Acts as a regional listener that clients use to connect to global services</p>
</li>
<li>
<p>Provides connect-time load balancing for clients</p>
</li>
<li>
<p>Manages global services across the regions of a GDS configuration</p>
</li>
<li>
<p>Collects performance metrics from databases in the GDS configuration and measures network latency between regions of a configuration</p>
</li>
<li>
<p>Creates a run-time load balancing advisory and publishes it to client connection pools</p>
</li>
<li>
<p>Monitors availability of database instances and global services and notifies clients if they fail.</p>
</li>
</ul>
<p>A global service manager is associated with one and only one GDS configuration. Each region in the GDS configuration must have at least one global service manager. It is recommended that multiple global service managers be configured in each region to improve availability and performance. Every global service manager in a GDS configuration manages all global services supported by the configuration.</p>
</div>
<!-- class="sect2" -->
<a id="BHCDCFCG"></a>
<div id="GSMUG115" class="sect2">
<h3 class="sect2">Global Data Services Catalog<a id="sthref11"></a></h3>
<p>A <a href="glossary.htm#BGBIEBIH"><span class="xrefglossterm">Global Data Services catalog</span></a> is a repository that stores configuration data for a Global Data Services configuration and all global services provided by that configuration.</p>
<p>A catalog is associated with one and only one GDS configuration. A catalog must reside in an Oracle Database 12c or later database, and that database may be inside or outside the associated GDS configuration. For large-scale GDS configurations, it is recommended that the GDS catalog be hosted outside the databases in the GDS configuration.GDS catalog may be co-hosted along with catalogs of RMAN or Oracle Enterprise Manager.</p>
<p>Oracle strongly recommends that high availability technologies such as Oracle RAC, Oracle Data Guard, and Oracle Clusterware be used to enhance the availability of the database where the Global Data Services catalog resides.</p>
</div>
<!-- class="sect2" -->
<a id="BHCGDAEC"></a>
<div id="GSMUG117" class="sect2">
<h3 class="sect2">Oracle Notification Service Servers<a id="sthref12"></a></h3>
<p>GDS clients use <span class="glossaryterm">Oracle Notification Service (ONS)</span> to receive run-time load balancing advisory and high availability events from global service managers.</p>
<p>An Oracle Notification Service (ONS) server is co-located with each global service manager. All such ONS servers within a region are interconnected. Clients of global services subscribe to the ONS server network within their region and its buddy region, and receive FAN notifications from those ONS server networks.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
An Oracle RAC database in a Global Data Service configuration may also contain ONS servers running on the cluster nodes. These ONS servers generate FAN notifications related to local services and are not connected to ONS server networks in the GDS regions.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDDEBFD"></a>
<div id="GSMUG120" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Overview of Global Services</h2>
<p>For database clients, a Global Data Services configuration is represented by a set of <a id="sthref13"></a>global services. A global service manager serving a Global Data Services configuration is aware of all global services that the configuration provides and acts as a mediator for the database clients and databases in the configuration. A client program connects to a regional global service manager and requests a connection to a global service. The client does not need to specify which database or instance it requires. The global service manager forwards the client&#39;s request to the optimal instance in the configuration that offers the global service. Database clients that share a global service must have the same service level requirements.</p>
<p>The functionality of <a id="sthref14"></a><span class="italic">local</span> services, defined as traditional database services provided by a single database, is not changed by global services. Oracle Database 12<span class="italic">c</span> can provide local and global services, simultaneously. A client application can also work with global and local services, simultaneously.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Database versions earlier than Oracle Database 12<span class="italic">c</span> can provide local services, but only Oracle Database 12<span class="italic">c</span>, and later, can provide global services.</div>
<p>The configuration and run-time status of global services are stored in the Global Data Services catalog. Each database that offers global services also maintains information about those services in a local repository (such as a system dictionary or Oracle Cluster Registry), with data on local services. Global services that are stored in a local repository have a flag to distinguish those global services from traditional local services.</p>
<p>If you are locally connected to a particular database, then you can query data on global services provided by that database. You can configure, modify, start, or stop a global service using the Global Data Services Control utility (GDSCTL) when you are connected to the Global Data Services catalog. This ensures centralized coordinated management of global services. You cannot configure, modify, start, or stop a global service using either the Server Control utility (SRVCTL) or the Oracle Clusterware Control utility (CRSCTL).</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Under certain circumstances (such as patching a database or clusterware software), you can stop or start global services using SRVCTL with the <code dir="ltr">-force</code> option with the appropriate command. You must have the appropriate system privileges.</div>
<p>After you configure global services for a Global Data Services configuration, the global service manager manages the global services on GDS configuration databases according to service properties that you specify when you create the services.</p>
<p>When a database joins the configuration or restarts after a shutdown, the database registers with all global service managers in the configuration. After receiving the registration request, one of the global service managers queries the GDS catalog and checks whether all global services which this database is supposed to provide are created there and have the correct attributes. If there is a discrepancy between the information in the catalog and database, the global service manager may create, delete, or modify some global services in the database, or change their attributes to synchronize them with the information in catalog. Then the global service manager determines which global services need to be running on the database and starts them if necessary.</p>
<p>The global service manager can start or stop a global service in a database. However, if it is an Oracle RAC database, the global service manager does not control which particular instances within the database offer the service. This is controlled by the clusterware and the administrator of the Oracle RAC database.</p>
<p>When a database instance in a Global Data Services configuration fails, all global service managers in the configuration get notified about the failure and stop forwarding requests to the instance. If this instance belongs to a noncluster database, or the instance is the last instance that was available in an Oracle RAC database, then, depending on the configuration, a global service manager can automatically start the service on another database in the Global Data Services pool where the service is enabled. If you decide to manually move a global service from one database to another using the appropriate GDSCTL command, then the global service manager stops and starts the service on the corresponding databases.</p>
<a id="CHDFDIIH"></a>
<div id="GSMUG121" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Global Service Attributes</h3>
<p><a id="sthref15"></a>Global services have a set of attributes associated with them that control starting the global services, load balancing connections to the global services, failing over those connections, and more. Attributes applicable to local services, including those services specific to Oracle RAC and Oracle Data Guard broker environments, are also applicable to global services.</p>
<p>The following attributes are unique to global services:</p>
<ul>
<li>
<p>Preferred or available databases</p>
</li>
<li>
<p>Replication lag</p>
</li>
<li>
<p>Region affinity</p>
</li>
</ul>
<p>You can modify global services just as you can modify local services. You can enable and disable a global service, you can move the global service to a different database, and you can change the properties of the global service.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot upgrade a local service to a global service.</div>
</div>
<!-- class="sect2" -->
<a id="CHDIBGAC"></a>
<div id="GSMUG122" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Global Services in an Oracle RAC Database</h3>
<p>Some properties of a <a id="sthref16"></a>global service are only applicable to Oracle RAC databases and are unique for each Oracle RAC database included in a Global Data Services configuration. These properties are related to the placement of global services with instances within an Oracle RAC database, including server pools and service cardinality.</p>
<p>All other existing global service attributes, such as load balancing, role, transparent application failover parameters, and database edition must be the same for all databases offering a global service. Specify these attributes at the global service level.</p>
<div class="infobox-note">
<p class="notep1">Notes:</p>
By default, in an Oracle RAC environment, a SQL statement executed in parallel can run across all of the nodes in the cluster. The cross-node parallel execution is not intended to be used with GDS load balancing. For an Oracle RAC database in a GDS configuration Oracle recommends that you restrict the scope of the parallel execution to an Oracle RAC node by setting the <code dir="ltr">PARALLEL_FORCE_LOCAL</code> initialization parameter to <code dir="ltr">TRUE</code>.</div>
</div>
<!-- class="sect2" -->
<a id="CHDGGDEF"></a>
<div id="GSMUG123" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Global Services in an Oracle Data Guard Broker Configuration</h3>
<p><a id="sthref17"></a><a id="sthref18"></a>Oracle Data Guard broker permits a primary database to have up to 30 standby databases. Oracle Data Guard broker logically groups primary and standby databases into a <a id="sthref19"></a><span class="italic">broker configuration</span> that enables the broker to manage and monitor the databases as an integrated unit. When you include a broker configuration in a GDS configuration, you manage the broker configuration as one unit. Only an entire broker configuration can be included in (or deleted from) a GDS pool, and a broker configuration cannot span multiple pools.</p>
<p>If you attempt to add or remove a database that belongs to a broker configuration to or from a GDS pool, then an error occurs. You can only add a database to the GDS pool by adding the database to the broker configuration using the Oracle Data Guard command-line interface, DGMGRL. After you add a database to the broker configuration, you must run the <code dir="ltr">gdsctl sync brokerconfig</code> command to synchronize GDS and Oracle Data Guard.</p>
<p>A GDS pool can consist of a set of databases of a given Data Guard broker configuration. Databases that belong to different Data Guard broker configurations must be mapped to different GDS pools. A pool that contains a Data Guard configuration cannot have databases that do not belong to the configuration</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<code dir="ltr"><a href="gsmctlref.htm#CHEBIGJG">&#34;sync brokerconfig&#34;</a></code> for information about this command</div>
<p>Conversely, when you remove a database from a broker configuration, the database is removed from the GDS pool to which this broker configuration belongs. The <code dir="ltr">gdsctl sync brokerconfig</code> command must be executed after removing a database. This is the only way to remove a database from a pool that contains a broker configuration.</p>
<p>You can configure global services with a role attribute to be active in a specific database role, such as the role of primary or physical standby database. If you enable fast-start failover, then the Oracle Data Guard broker automatically fails over to a standby database if the primary database fails. The global service managers that you have configured to work with Oracle Data Guard broker ensure that the appropriate database services are active and that the appropriate Fast Application Notification (FAN) events are published after a role change. These FAN event enable Fast Connection Failover (FCF) of client connections to an appropriate database instance within the GDS configuration.</p>
<p>The Global Data Services framework supports the following Oracle Data Guard broker configurations:</p>
<ul>
<li>
<p>The set of databases in a Global Data Services pool can be either the set of databases that belong to a single broker configuration or a set of databases that do not belong to a broker configuration. You can add a broker configuration only to an empty Global Data Services pool. If a GDS pool already contains a broker configuration, then, to add a database to the pool, you must add the database to the broker configuration contained in the pool.</p>
</li>
<li>
<p>Role-based global services are supported only for database pools that contain a broker configuration.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DGBKR" href="../DGBKR/toc.htm"><span class="italic">Oracle Data Guard Broker</span></a> for more information about broker configuration</div>
</div>
<!-- class="sect2" -->
<a id="CHDHJGBE"></a>
<div id="GSMUG124" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Database Placement of a Global Service</h3>
<p>You can specify which databases support a global service. These databases are referred to as <a id="sthref20"></a><span class="bold">preferred databases</span>. The global service manager ensures that a global service runs on all preferred databases for which the service has been specified. The number of preferred databases is referred to as the <a id="sthref21"></a><span class="bold">database cardinality</span> of a global service. You must specify at least one preferred database for a global service.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you set <code dir="ltr">preferred_all</code> for which databases support a service, then you do not have to explicitly specify preferred or available databases. The <code dir="ltr">preferred_all</code> setting implies that all databases in the pool are preferred.</div>
<p>When you add or modify a global service, you can specify a list of available databases for this global service. If one of the preferred databases fails to provide a global service, then the global service manager relocates the service to an available database to maintain the specified database cardinality for that service.</p>
<p>In a Global Data Services pool that contains an Oracle Data Guard broker configuration, a role-based global service can be started on a database only if the database is listed as preferred or available for the service and the <code dir="ltr">role</code> attribute of the database corresponds to the <code dir="ltr">role</code> attribute specified for the service. For example, a global service that can run on any database in a broker configuration (as long as the <code dir="ltr">role</code> attribute of the database is set to <code dir="ltr">primary</code>) must have <code dir="ltr">primary</code> specified for its <code dir="ltr">role</code> attribute and have all other databases in the broker configuration with <code dir="ltr">role</code> attributes set to <code dir="ltr">preferred</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Do not confuse <span class="italic">database cardinality</span> of global services with their <span class="italic">instance cardinality</span>. Instance cardinality is specified and maintained separately for each Oracle RAC database and is not maintained across databases of a Global Data Services pool.
<p>For example, consider a case when there are few instances of an Oracle RAC database offering a global service and one of the instances fails, but there are no available instances on which to start the global service. In this case, the service is not started on an available database instance of another Oracle RAC database. However, if the instance that failed was the last instance in the database offering the service, then the service may start on another database that is listed as available for this service.</p>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDFEHGF"></a>
<div id="GSMUG126" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Replication Lag and Global Services</h3>
<p><a id="sthref22"></a>For performance reasons, distributed database systems often use asynchronous replication of data between databases, which means that there is the possibility of a delay between the time an update is made to data on a primary database and the time this update appears on a replica. When this happens, the replica database lags behind its primary database.</p>
<p>Global Data Services enables applications to differentiate between global services that provide real-time data from services that can return out-of-date data because of replication lag. For applications that can tolerate a certain degree of lag, you can configure a maximum acceptable lag value.</p>
<p>For applications that cannot tolerate replication lag, you can set the lag time for global services to zero. Requests for this global service are forwarded only to a primary database, or to a replica database that is synchronized with the primary database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="cloud.htm#BEIEGCHD">Chapter 3, &#34;Administering Global Data Services Configurations&#34;</a> for more information</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
Only an Oracle Data Guard standby database can be synchronized with the primary database, if necessary, so that you can enable real-time, read-only services on both the primary and synchronized standby databases.</div>
<p>For many applications it is acceptable to read stale data as long as the data is consistent. Such applications can use global services running on any database replica without regard to the length of the replication lag time.</p>
<p>If you configure the lag time for a service to a value other than zero, then a client request can be forwarded only to a replica database that is not lagging behind the primary database by longer than the configured lag time for the service. If there is no such database, then the connection request fails.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Specification of the maximum replication lag is only supported for Active Data Guard configurations.</div>
<p>If a service that is currently running starts to exceed the specified maximum lag, then the service is brought down after all current requests are completed. New requests for the service are routed to a database that meets the configured lag value for the service.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you use Oracle Data Guard with the Oracle Active Data Guard option, then you can use the <code dir="ltr">STANDBY_MAX_DATA_DELAY</code> session parameter to specify a session-specific lag tolerance. When you set this parameter to a nonzero value, a query issued to a physical standby database is executed only if the application lag time is less than or equal to the <code dir="ltr">STANDBY_MAX_DATA_DELAY</code> parameter value. Otherwise, the database returns an error to alert the client that the lag time is too long. If both session-level and service-level parameters are set and the <code dir="ltr">STANDBY_MAX_DATA_DELAY</code> parameter value is less than the service level parameter value, the client remains connected to the database, but queries would return an error.</div>
<div class="infobox-note">
<p class="notep1">Caution:</p>
If a database fails, then the global service manager can route a client connection to another database that meets the maximum lag value specified for the service, even if it lags behind the failed database. This solution, however, can create data consistency problems for some applications.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SBYDB4779" href="../SBYDB/manage_ps.htm#SBYDB4779"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for more information about the <code dir="ltr">STANDBY_MAX_DATA_DELAY</code> session parameter</div>
</div>
<!-- class="sect2" -->
<div id="GSMUG689" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref23"></a>
<h3 class="sect2">Global Services and Distributed Transaction Processing</h3>
<p>When performing XA (distributed) transactions against a GDS configuration, tightly-coupled branches of an XA transaction must be directed to the same database. This can be accomplished by ensuring that each global service used in a distributed transaction is, that is runs exactly on one database at a time. It is responsibility of the GDS pool administrator to configure and maintain the property of global services used in distributed transactions.</p>
<p>If a global service used in an XA transaction is running on a multi-instance Oracle RAC database, tightly-coupled branches of the XA transaction by default can be sent to separate database instances. This may result in sub-optimal performance. To avoid the performance degradation in this case, it is highly recommended to set the DTP parameter (<code dir="ltr">-dtp)</code> to TRUE for any service used by an XA transaction that can run in an Oracle RAC database. Setting the parameter guarantees that all distributed transactions performed through the service have their tightly-coupled branches running on a single Oracle RAC instance.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The DTP parameter of a global service only affects processing of XA transactions on an Oracle RAC database that provides this service. It has no effect on the database cardinality of the global service. A global service used by a distributed transaction must be manually configured to be active on a single database at a time.</div>
</div>
<!-- class="sect2" -->
<div id="GSMUG690" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref24"></a>
<h3 class="sect2">Global Services in Multitenant Architecture</h3>
<p>Multitenant container databases (CDB) can be part of the GDS configuration. A global service can be defined at root level of the CDB (CDB$ROOT) or at the pluggable database (PDB) level. A global service that runs on a PDB can be created by setting the PDB property to the PDB name at creation time. The PDB property of a global service cannot be modified once the service is created. If the PDB property is not set, the service is created at the CDB root level (CDB$ROOT).</p>
<p>When the service is created at the PDB-level all of the service&#39;s preferred and available databases should contain the PDB it belongs to. Global services defined at the PDB level are managed by the same operations and rules as the services defined at any other level.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDJBCDJ"></a>
<div id="GSMUG127" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Global Connection Load Balancing</h2>
<p>When a client connects to an Oracle RAC database using a service, the client can use the Oracle Net connection load balancing feature to spread user connections across all the instances that support that service. Similarly, in a Global Data Services configuration, clients connecting to a global service are load balanced, as necessary, across different databases and regions.</p>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#CHDBFJFG">Client-Side Load Balancing</a></p>
</li>
<li>
<p><a href="#CHDBCIFJ">Server-Side Load Balancing</a></p>
</li>
<li>
<p><a href="#CHDJFBDF">Region Affinity for Global Services</a></p>
</li>
</ul>
<a id="CHDBFJFG"></a>
<div id="GSMUG128" class="sect2">
<h3 class="sect2">Client-Side Load Balancing</h3>
<p>Client-side load balancing balances the connection requests across global service managers. Connection failover is also supported. With connection failover, if an error is returned from the chosen global service manager, then Oracle Net Services tries the next address in the address list until either a successful connection is made or Oracle Net Services has exhausted all the addresses in the list.</p>
<p>Client-side load balancing and failover in a Global Data Services configuration is similar to that for an Oracle RAC database. In a Global Data Services configuration, however, a client in a Global Data Services region first tries to connect to any of the global service managers in its local region. If a global service manager from the local region does not respond, then the client tries a global service manager in another region.</p>
<p>To enable client-side load balancing and failover across multiple regions in a Global Data Services configuration, clients must use an Oracle Net connect descriptor that contains one list of addresses of local regional global service managers for load balancing and intraregion failover, and one (or more) list of addresses of remote regional global service managers for interregion failover. If a region is not specified, it defaults to the region name of the global service manager to which the client is connected. You can also configure timeout and retry attempts for each list to enable multiple connection attempts to the current global service manager before moving to another global service manager in the list.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="globser.htm#CCHIEHFH">&#34;Database Client Configuration&#34;</a> for more information</div>
</div>
<!-- class="sect2" -->
<a id="CHDBCIFJ"></a>
<div id="GSMUG129" class="sect2">
<h3 class="sect2">Server-Side Load Balancing</h3>
<p><a id="sthref25"></a><a id="sthref26"></a>Server-side load balancing for an Oracle RAC database has the listener directing connection requests to the best Oracle RAC database instance. Some applications have long-lived connections, while other applications have short-lived connections.</p>
<p>For global services, server-side load balancing works similarly, except that, instead of being limited to a single database, workloads are balanced across multiple databases in the Global Data Services configuration. In most cases, a global service manager directs a client request for a global service to a database server in the same region, unless all local servers are overloaded and a remote server can provide significantly better quality of service.</p>
<p>In some cases, to take advantage of data caching on a local server, you can direct requests to the local region. Global Data Services enables you to specify a desired level of client/server affinity for a global service.</p>
</div>
<!-- class="sect2" -->
<a id="CHDJFBDF"></a>
<div id="GSMUG130" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Region Affinity for Global Services</h3>
<p>You can configure global services to operate within specific regions or in any region in the Global Data Services configuration. This is called <a id="sthref27"></a><span class="bold">region affinity</span>.</p>
<p>This section includes descriptions for the following types of region affinity:</p>
<ul>
<li>
<p><a href="#CHDCCIBD">Any-Region Affinity</a></p>
</li>
<li>
<p><a href="#CHDGEHCI">Affinity to a Local Region</a></p>
</li>
<li>
<p><a href="#CHDBJAHB">Affinity to a Local Region with Interregion Failover</a></p>
</li>
</ul>
<a id="CHDCCIBD"></a>
<div id="GSMUG131" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Any-Region Affinity</h4>
<p><a id="sthref28"></a><a id="sthref29"></a><a id="sthref30"></a>Any-region affinity (the default) for a global service routes a client connection request to the best database in the Global Data Services configuration, regardless of region, that can meet the connection load balancing goal for the requested service. The choice of the database is based on its performance and network latency between the regions where the client and database reside. If databases in different regions are equally loaded, then this policy gives preference to a local region. An interregion connection is made only if the difference in database performance between regions outweighs network latency.</p>
<p>If you specify preferred, available databases for a global service with any-region affinity, then service cardinality is maintained at the Global Data Services pool level. If a service fails on a preferred database, then the service is started on any available database in the Global Data Services pool, and the number of service providers in the pool remains the same. When starting the service on an available database, databases in the region where the service failed have preference. If there is no available database for this service in the local region, then an available database is chosen from a nearby region.</p>
</div>
<!-- class="sect3" -->
<a id="CHDGEHCI"></a>
<div id="GSMUG132" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Affinity to a Local Region</h4>
<p><a id="sthref31"></a><a id="sthref32"></a><a id="sthref33"></a>Affinity to a local Global Data Services region for a global service routes a client connection request to the best database in the client&#39;s region that can meet the connection load balancing goal for the requested service. The global service manager chooses the database based only on the database&#39;s performance. A global service with affinity to a local region can be provided in multiple Global Data Services regions at the same time, but a client from one region is never connected to a database in another region.</p>
<p>If you specify preferred or available databases for a global service with local region affinity, then service cardinality is maintained at the regional level. If a service fails on a preferred database, then the service starts on an available database in the same region, so the number of service providers in the region remains the same. If there is no available database for this global service in the local region, then no action is taken and the service cardinality decreases. If there is no database in the local region offering the global service, then the client connection request is denied. For global services that have affinity to a local region, database cardinality of the service is maintained independently in each region.</p>
</div>
<!-- class="sect3" -->
<a id="CHDBJAHB"></a>
<div id="GSMUG133" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Affinity to a Local Region with Interregion Failover</h4>
<p>This type of <a id="sthref34"></a><a id="sthref35"></a><a id="sthref36"></a>affinity is similar to that of affinity to a local Global Data Services region, except that, if there are no databases in the local region offering a global service, then, instead of denying a client request, the request is forwarded to the best database in another region where the requested global service is running. This service failover does not trigger the service to be started on an available database in another region because, with affinity to a local region, database cardinality is maintained independently in each region, and should not change because of service failure in another region. If regional databases become overloaded because of interregion failover, then you can manually add a preferred database for the service.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABHCGHF"></a>
<div id="GSMUG134" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Global Run-Time Connection Load Balancing</h2>
<p><a id="sthref37"></a>Global run-time connection load balancing distributes client work requests across persistent connections that span the instances of an Oracle RAC database, based on load-balancing information from the database. This feature is supported with connection pools that can receive load balancing recommendations. The database uses the run-time connection load balancing goal for a service and the relative performance of the database instances to generate a recommendation about where to direct service requests.</p>
<p>There are two types of <a id="sthref38"></a>service-level goals for run-time connection load balancing:</p>
<ul>
<li>
<p><a id="sthref39"></a><span class="bold">SERVICE_TIME</span>: Attempts to direct work requests to instances according to response time. Load-balancing data is based on elapsed time for work done in the service plus available bandwidth to the service.</p>
</li>
<li>
<p><a id="sthref40"></a><span class="bold">THROUGHPUT</span>: Attempts to direct work requests according to throughput. The load-balancing data is based on the rate that work is completed in the service plus available bandwidth to the service.</p>
</li>
</ul>
<p>The Global Data Services framework also supports the balancing of work requests at run time to a global service. In the Global Data Services framework the requests are spread across connections to instances in multiple databases. Work is routed to provide the best service times globally and routing responds gracefully to changing system conditions.</p>
<p>To provide <a id="sthref41"></a>global run-time connection load balancing, a global service manager receives performance data for each service from all database instances in the Global Data Services configuration. The global service manager also measures interregion network latency by periodically exchanging messages with global service managers in other Global Data Services regions.</p>
<p>If the load-balancing goal for a global service is set to <code dir="ltr">SERVICE_TIME</code>, then a global service manager considers interregion network latency and instance performance data when deciding how to distribute work requests. For example, clients in Region A have run-time load balancing metrics that are weighted toward Region A, and clients in Region B have metrics that are weighted toward Region B. This implies that, even though the service may be the same, clients in different regions receive different run-time load balancing metrics.</p>
<p>If the load-balancing goal for a global service is set to <code dir="ltr">THROUGHPUT</code>, then run-time load balancing metrics are calculated only based on the performance of database instances.</p>
<p>In addition to calculating run-time load balancing metrics for local clients, a global service manager may also need to calculate run-time load balancing metrics of remote regions and publish the metrics for clients residing in a region where all global service managers are not available.</p>
<div id="GSMUG691" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref42"></a>
<h3 class="sect2">Affinity</h3>
<p>The global service manager provides advice about how to direct incoming work to the databases in a Global Data Services configuration that provide the optimal quality of service for that work. The load balancing advisory also sends additional affinity information that indicates to the clients, subscribers to the Oracle Net Service events (as Universal Connection Pool (UCP) and ODP.NET Connection Pool, and so on), whether it should re-connect to the same database. Reconnecting a session to the same database can improve buffer cache efficiency and lower CPU usage and transaction latency. The affinity information indicates whether affinity is active or inactive for a particular database. It is always inactive for a single instance database and can be either active or inactive for a particular instance if the database is an Oracle RAC.</p>
</div>
<!-- class="sect2" -->
<div id="GSMUG692" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref43"></a>
<h3 class="sect2">Disk I/O and CPU Thresholds</h3>
<p>Disk I/O and CPU thresholds are resource consumption limits that a database administrator can set. The disk I/O threshold is configured by setting the single-block read latency limit, and the CPU threshold is set by setting the CPU usage limit. The global service manager monitors the resource usage and checks whether the I/O and CPU thresholds have been reached or not. When a database reaches one of the thresholds, the load balancing advisory readjusts its advice about how to direct incoming work to this database.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABGGGAA"></a>
<div id="GSMUG135" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Global Services Failover</h2>
<p>When a global service or database fails, a global service that was running on the database fails over to another database where the global service is enabled, but not yet running (if the database role matches the service role). The global service manager considers preferred databases as the failover target before available databases.</p>
<p>If you stop a global service using GDSCTL, then the service does not fail over to another database. However, the database where the service was stopped remains a failover target for this service. If the service fails on another database, then the service can start on that database.</p>
<p>When a global service fails over to an available database, the Global Data Services framework does not move the service back to the preferred database when the preferred database restarts because of the following:</p>
<ul>
<li>
<p>The service has the desired cardinality</p>
</li>
<li>
<p>Maintaining the service on the current instance or database provides a higher level of service availability</p>
</li>
<li>
<p>Not moving the service back to the initial preferred instance or database prevents a second outage</p>
</li>
</ul>
<p>If necessary, you can manually relocate the global service back to the preferred database after the service has restarted, without terminating active sessions.</p>
<p>In a Global Data Services pool that contains an Oracle Data Guard broker configuration, the Global Data Services framework supports role-based global services. Valid roles are <code dir="ltr">PRIMARY</code>, <code dir="ltr">PHYSICAL_STANDBY</code>, <code dir="ltr">LOGICAL_STANDBY</code>, and <code dir="ltr">SNAPSHOT_STANDBY</code>. The Global Data Services framework automatically starts a global service only when the database role matches the role specified for the service.</p>
<p>If a database switches roles or fails, then the Oracle Data Guard broker notifies the Global Data Services framework about the role change or failure, and the global service manager ensures that the services start according to the new database roles.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
A global service cannot fail over from a database in one Global Data Services region to a database in another region if the locality parameter is set to <code dir="ltr">LOCAL_ONLY</code>, and interregion failover is not enabled.</div>
<p>When a global service fails over, fast connection failover, if enabled on Oracle clients, provides rapid failover of the connections to that global service. The Global Data Services framework, similar to Oracle RAC, uses Fast Application Notification (FAN) to notify applications about service outages. Instead of waiting for the application to poll the database and detect problems, clients receive FAN events and react, immediately. Sessions to the failed instance or node are terminated, and new connections are directed to available instances providing the global service.</p>
<p>All global service managers monitor service availability on all databases in a Global Data Services configuration. A global service is started on an available database when a global service manager detects that a global service becomes unavailable due to a failure.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
A global service manager cannot automatically fail over a service if it cannot connect to the Global Data Services catalog.</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
When the target database for failover is under Oracle Clusterware control, the global service manager failover request to start a service on this database may lead to a Oracle Clusterware &rdquo;pull up&rdquo; event that starts another instance. This will occur when at least one instance is registered with the global service manager listener, allowing the global service manager to note that the database is running, and is therefore a valid target for failover, but that the service is not already running on the database. This can occur when the registered instance is not a primary or valid instance for the service, either because it is an available instance on an administrator-managed Oracle RAC database, or because it is an instance of a policy-managed Oracle RAC database that is not in the same server pool as the service.</div>
</div>
<!-- class="sect1" -->
<div class="sect1"><!-- infolevel="all" infotype="General" --><a id="sthref44"></a>
<h2 class="sect1">Global Service Manager Process Suite Architecture</h2>
<p>The global service manager process suite architecture is a process suite containing multiple processes that communicate using shared memory. Global service manager contains the following processes:</p>
<ul>
<li>
<p>Monitor - Monitors the health of all other processes in the process suite. Responsible for starting the other global service manager processes, creating the shared memory area and re-spawning a global service manager process after detecting its death.</p>
</li>
<li>
<p>Listener - Listens for incoming client connection requests and forwards requests to appropriate database instances. Each instance in Global Data Services configuration establishes a communication channel to all global service manager listeners. This channel is used for registration of global services and sending performance metrics to the listener. These metrics are later used for connection-time and run-time load balancing. Detects when a database instance goes down. The listener process provides the full functionality of the regular database listener. Therefore a global service manager plays the role of a remote listener for all databases in a Global Data Services configuration. A global service manager listener routes connection requests directly to local database listeners, bypassing SCAN listeners on an Oracle RAC database.</p>
</li>
<li>
<p>Pinger - Measures network latency between regions by exchanging data with pinger processes of global service managers in the other regions. Measurements are required for connection-time and run-time load balancing in a globally distributed database cloud. Monitors other global service managers and tells its own global service manager when it has to become the regional or master</p>
</li>
<li>
<p>OCI Process - Responsible for establishing SQLNET connections to Global Data Services databases for managing services, and to Global Data Services catalog for managing the Global Data Services configuration.</p>
</li>
<li>
<p>ONS Server - Publishes RLB and HA fan events to regional ONS network so that clients can subscribe to the events.</p>
</li>
<li>
<p>ONS Client - Responsible for subscribing to HA events that are published by Oracle RAC databases in Global Data Services configuration.</p>
</li>
</ul>
<p><a href="#CHDECJFF">Figure 1-2</a> shows the internal process architecture and the information flow in and out of the process suite.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDECJFF"></a>Figure 1-2 Global Service Manager Process Suite Architecture</p>
<img width="512" height="372" src="img/gsmug_procees_suite.gif" alt="Description of Figure 1-2 follows"/><br/>
<a id="sthref45" href="img_text/gsmug_procees_suite.htm">Description of &#34;Figure 1-2 Global Service Manager Process Suite Architecture&#34;</a><br/>
<br/></div>
<!-- class="figure" --></div>
<!-- class="sect1" -->
<a id="CHDGHBCC"></a>
<div id="GSMUG709" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Global Data Services Use Cases</h2>
<p>The following are some use cases for Oracle Global Data Services:</p>
<ul>
<li>
<p><a href="#CHDCHBFG">Load Balancing for Replicated Databases</a></p>
</li>
<li>
<p><a href="#CHDJJEAF">Service Failover for Replicated Databases</a></p>
</li>
<li>
<p><a href="#CHDDDJBC">Region Affinity in Oracle GoldenGate Multi-Master</a></p>
</li>
<li>
<p><a href="#CHDDICAI">Load Balancing in Oracle GoldenGate Multi-Master</a></p>
</li>
<li>
<p><a href="#CHDGIHHE">Balancing Oracle Active Data Guard and Oracle GoldenGate Reader Farms</a></p>
</li>
</ul>
<a id="CHDCHBFG"></a>
<div id="GSMUG710" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Load Balancing for Replicated Databases</h3>
<p>Global Data Services extends Oracle RAC-style connect-time and run-time load balancing capabilities (within and across data centers) to a set of replicated databases. The algorithm takes into account load metrics, region affinity, network latency, and load balancing goals. It maximizes performance and achieves efficient resource utilization by enabling Global Data Services on Active Data Guard.</p>
<p><a href="#CHDIDADG">Figure 1-3</a> shows load balancing across replicated databases, both local and remote, in a Global Data Services configuration. The Read Write Service runs on the Primary (or Master) database. Read Only Services run on the two Standby (or Replica) databases. Client connections are load balanced between the read-only services running on the Standby databases (across the two data centers).</p>
<div id="GSMUG717" class="figure">
<p class="titleinfigure"><a id="CHDIDADG"></a>Figure 1-3 Load Balancing for Replicated Databases</p>
<img width="654" height="612" src="img/gsmug_use_case_1.gif" alt="Description of Figure 1-3 follows"/><br/>
<a id="sthref46" href="img_text/gsmug_use_case_1.htm">Description of &#34;Figure 1-3 Load Balancing for Replicated Databases&#34;</a><br/>
<br/></div>
<!-- class="figure" --></div>
<!-- class="sect2" -->
<a id="CHDJJEAF"></a>
<div id="GSMUG718" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Service Failover for Replicated Databases</h3>
<p>Global Data Services extends Oracle RAC-style service failover (within and across data centers) and management capabilities to replicated databases, and takes into account service placement policies. It achieves higher availability and improved manageability by enabling Global Data Services with Active Data Guard and Oracle GoldenGate.</p>
<p><a href="#CHDEJDAJ">Figure 1-4</a> shows databases replicated across two data centers, in a Global Data Services Configuration. A Read Write Service runs on the Primary (or Master) database. Read Only Services are load balanced across the two Standby (or Replica) databases.</p>
<p><a href="#CHDEJDAJ">Figure 1-4</a> depicts the failure of the Standby in Data Center 1. In <a href="#CHDJFDBB">Figure 1-5</a> Global Data Services fails over the Read Only Service to another available database (in this case the Primary) and load balances it with the Read Only Service running on the remote Standby in Data Center 2.</p>
<div id="GSMUG719" class="figure">
<p class="titleinfigure"><a id="CHDEJDAJ"></a>Figure 1-4 Read Only Service Failure</p>
<img width="654" height="612" src="img/gsmug_use_case_2a.gif" alt="Description of Figure 1-4 follows"/><br/>
<a id="sthref47" href="img_text/gsmug_use_case_2a.htm">Description of &#34;Figure 1-4 Read Only Service Failure&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<div id="GSMUG720" class="figure">
<p class="titleinfigure"><a id="CHDJFDBB"></a>Figure 1-5 Read Only Service Failover</p>
<img width="654" height="612" src="img/gsmug_use_case_2b.gif" alt="Description of Figure 1-5 follows"/><br/>
<a id="sthref48" href="img_text/gsmug_use_case_2b.htm">Description of &#34;Figure 1-5 Read Only Service Failover&#34;</a><br/>
<br/></div>
<!-- class="figure" --></div>
<!-- class="sect2" -->
<a id="CHDDDJBC"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Region Affinity in Oracle GoldenGate Multi-Master</h3>
<p><a href="#CHDCBFFG">Figure 1-6</a> depicts Oracle GoldenGate multi-mastered replicas in a Global Data Services configuration. In this use case the application needs to avoid multi-master read/write conflicts, and Global Data Services can route all of the workloads to nearest and best replica in the client&#39;s region.</p>
<pre dir="ltr">GDSCTL&gt;add service &ndash;service reporting_srvc &ndash;gdspool sales 
       &ndash;preferred_all &ndash;locality LOCAL_ONLY &ndash;region_failover
GDSCTL&gt;add service &ndash;service order_entry_srvc &ndash;gdspool sales 
       &ndash;preferred_all &ndash;locality LOCAL_ONLY &ndash;region_failover 
 
</pre>
<p>This use case features the following:</p>
<ul>
<li>
<p>The application handles multi-master conflict resolutions.</p>
</li>
<li>
<p>Read/write and read-only global services run on both replicas.</p>
</li>
<li>
<p>Client connections are routed to the nearest and the best replica database in the client&#39;s region that meets the connection load balancing goal for the requested Order Entry and Reporting global services.</p>
</li>
<li>
<p>Takes into account load metrics, region affinity, and load balancing goals.</p>
</li>
<li>
<p>Global Data Services provides workload routing for read-only and read/write services for Oracle GoldenGate multi-master configuration.</p>
</li>
<li>
<p>Routes all database workloads to the nearest datacenter by enabling Global Data Services for Oracle GoldenGate multi-master configuration.</p>
</li>
</ul>
<div class="figure">
<p class="titleinfigure"><a id="CHDCBFFG"></a>Figure 1-6 Region Affinity in Oracle GoldenGate Multi-Master</p>
<img width="620" height="358" src="img/gsmug_use_case_3.gif" alt="Description of Figure 1-6 follows"/><br/>
<a id="sthref49" href="img_text/gsmug_use_case_3.htm">Description of &#34;Figure 1-6 Region Affinity in Oracle GoldenGate Multi-Master&#34;</a><br/>
<br/></div>
<!-- class="figure" --></div>
<!-- class="sect2" -->
<a id="CHDDICAI"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Load Balancing in Oracle GoldenGate Multi-Master</h3>
<p><a href="#CHDGFJBJ">Figure 1-7</a> depicts Oracle GoldenGate multi-mastered replicas in a Global Data Services configuration. In this use case the application needs to handle multi-master conflict resolutions, and Global Data Services provides connect-time and run-time load balancing (within and across data centers) for all work requests.</p>
<pre dir="ltr">GDSCTL&gt;add service -service order_entry_srvc -gdspool sales 
       &ndash;preferred_all -clbgoal LONG 
GDSCTL&gt;add service -service reporting_srvc -gdspool sales 
       &ndash;preferred_all -clbgoal LONG  
 
</pre>
<p>This use case features the following:</p>
<ul>
<li>
<p>Application handles multi-master conflict resolutions.</p>
</li>
<li>
<p>Read Write and Read Only global services run on both replicas.</p>
</li>
<li>
<p>Client connections are load balanced between the READ WRITE global services running on both the masters (across data centers). Same is the case for the Read only service.</p>
<ul>
<li>
<p>Takes into account load metrics, region affinity, network latency and load balancing goals.</p>
</li>
<li>
<p>Load balance all workloads by enabling GDS on Oracle GoldenGate multi-master configuration.</p>
</li>
</ul>
</li>
</ul>
<div class="figure">
<p class="titleinfigure"><a id="CHDGFJBJ"></a>Figure 1-7 Load Balancing in Oracle GoldenGate Multi-Master</p>
<img width="617" height="348" src="img/gsmug_use_case_4.gif" alt="Description of Figure 1-7 follows"/><br/>
<a id="sthref50" href="img_text/gsmug_use_case_4.htm">Description of &#34;Figure 1-7 Load Balancing in Oracle GoldenGate Multi-Master&#34;</a><br/>
<br/></div>
<!-- class="figure" --></div>
<!-- class="sect2" -->
<a id="CHDGIHHE"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Balancing Oracle Active Data Guard and Oracle GoldenGate Reader Farms</h3>
<p><a href="#CHDGEFCC">Figure 1-8</a> depicts Global Data Services enabled for an Oracle Active Data Guard or Oracle GoldenGate reader farm with physical standby/replicas located in both local and remote data centers. In this use case with Global Data Services, route read/write workload to primary/master, balance read-only workload on the reader farm, and you can expect improved resource utilization and higher scalability for read workloads.</p>
<div class="example">
<p class="titleinexample"><a id="sthref51"></a>Example 1-1 Oracle GoldenGate</p>
<pre dir="ltr">GDSCTL&gt;add service -service reporting_srvc -gdspool sales 
       &ndash;preferred DB02, DB03, DB04 -clbgoal LONG &ndash;rlbgoal SERVICE_TIME 
</pre></div>
<!-- class="example" -->
<p>This use case features the following:</p>
<ul>
<li>
<p>Read/write global service runs on the Primary/Master database.</p>
</li>
<li>
<p>Read-only global services run on the reader farm.</p>
</li>
<li>
<p>Client connections are load balanced between the read-only global services running on the reader farm (across data centers).</p>
</li>
<li>
<p>Global Data Services provides connect-time and run-time load balancing (within and across data centers) on a reader farm and better resource utilization and higher scalability by balancing read-only workload on an Oracle Active Data Guard or Oracle GoldenGate reader farm.</p>
</li>
</ul>
<div class="figure">
<p class="titleinfigure"><a id="CHDGEFCC"></a>Figure 1-8 Balancing Oracle Active Data Guard and Oracle GoldenGate Reader Farms</p>
<img width="651" height="385" src="img/gsmug_use_case_5.gif" alt="Description of Figure 1-8 follows"/><br/>
<a id="sthref52" href="img_text/gsmug_use_case_5.htm">Description of &#34;Figure 1-8 Balancing Oracle Active Data Guard and Oracle GoldenGate Reader Farms&#34;</a><br/>
<br/></div>
<!-- class="figure" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3646">
<tr>
<td class="cellalignment3653">
<table class="cellalignment3651">
<tr>
<td class="cellalignment3650"><a href="release_changes.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3650"><a href="globser.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3655">
<table class="cellalignment3649">
<tr>
<td class="cellalignment3650"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3650"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3650"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3650"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3650"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3650"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>