<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-46408"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Configuring%20the%20Global%20Data%20Services%20Framework"></a><title>Configuring the Global Data Services Framework</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1056"/>
<meta name="dcterms.created" content="2015-06-23T8:5:13Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Global Data Services Concepts and Administration Guide"/>
<meta name="dcterms.identifier" content="E22100-11"/>
<meta name="dcterms.isVersionOf" content="GSMUG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2013, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="intro.htm" title="Previous" type="text/html"/>
<link rel="Next" href="cloud.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E22100-11.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">7/12</span> <!-- End Header -->
<div id="GSMUG119" class="chapter"><a id="sthref53"></a>
<h1 class="chapter"><span class="secnum">2</span> Configuring the Global Data Services Framework</h1>
<p>The Global Data Services framework consists of at least one global service manager, a Global Data Services catalog, and the GDS configuration databases. Some components of the framework are installed when you install Oracle Database 12<span class="italic">c</span>. Other components require that you perform certain tasks using the Global Data Services control utility (GDSCTL).</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="gsmctlref.htm#CACCEHIG">Appendix A, &#34;Global Data Services Control Utility (GDSCTL) Reference&#34;</a> to familiarize yourself with GDSCTL</div>
<p>This chapter includes the following topics:</p>
<ul>
<li>
<p><a href="#CCHHHBEG">Planning an Installation</a></p>
</li>
<li>
<p><a href="#BABJDDFC">Installing a Global Service Manager</a></p>
</li>
<li>
<p><a href="#CCHIJJGH">Upgrading Global Data Services</a></p>
</li>
<li>
<p><a href="#BABICDDC">Creating the Global Data Services Catalog</a></p>
</li>
<li>
<p><a href="#BABBADIJ">Adding a Global Service Manager to the Global Data Services Catalog</a></p>
</li>
<li>
<p><a href="#BABEHAIH">Connecting to the Global Data Services Catalog</a></p>
</li>
<li>
<p><a href="#BABDHGID">Adding a Global Data Services Pool</a></p>
</li>
<li>
<p><a href="#BABEBDFD">Adding a Global Data Services Region</a></p>
</li>
<li>
<p><a href="#CCHHBIAG">Adding a Database to a Global Data Services Pool</a></p>
</li>
<li>
<p><a href="#CCHGICHJ">Adding a Service to a Global Data Services Pool</a></p>
</li>
<li>
<p><a href="#CCHHHHFC">Starting a Global Service</a></p>
</li>
<li>
<p><a href="#CCHIEHFH">Database Client Configuration</a></p>
</li>
<li>
<p><a href="#CCHFCJIG">Exporting the GDS Catalog Data for Logical Backups</a></p>
</li>
<li>
<p><a href="#CCHBAJED">Changing the GSMCATUSER Password</a></p>
</li>
</ul>
<a id="CCHHHBEG"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Planning an Installation</h2>
<p>Before you install any software, review these hardware, network, operating system, and other software requirements for Linux.</p>
<p>Global Data Services components require:</p>
<ul>
<li>
<p>At least 256MB of total physical memory</p>
</li>
<li>
<p>At least 20MB of available physical memory</p>
</li>
<li>
<p>At least 6 GB of total swap space</p>
</li>
<li>
<p>At least 1.5 GB of free disk space</p>
</li>
<li>
<p>Certified architecture, for example x86_64</p>
</li>
<li>
<p>Linux system kernel version is at least &#34;2.6.18&#34;</p>
</li>
<li>
<p>Package <code dir="ltr">make-3.81</code> is available on the system</p>
</li>
<li>
<p>Package <code dir="ltr">binutils-2.17.50.0.6</code> is available on the system</p>
</li>
<li>
<p>Package <code dir="ltr">gcc-4.1.2 (x86_64)</code> is available on the system</p>
</li>
<li>
<p>Package <code dir="ltr">libaio-0.3.106 (x86_64)</code> is available on the system</p>
</li>
<li>
<p>Package <code dir="ltr">libaio-devel-0.3.106 (x86_64)</code> is available on the system</p>
</li>
<li>
<p>Package <code dir="ltr">libstdc++-4.1.2 (x86_64)</code> is available on the system</p>
</li>
<li>
<p>Package <code dir="ltr">sysstat-7.0.2</code> is available on the system</p>
</li>
<li>
<p>Package <code dir="ltr">compat-libstdc++-33-3.2.3 (x86_64)</code> is available on the system</p>
</li>
<li>
<p>Package <code dir="ltr">libgcc-4.1.2 (x86_64)</code> is available on the system</p>
</li>
<li>
<p>Package <code dir="ltr">libstdc++-devel-4.1.2 (x86_64)</code> is available on the system</p>
</li>
<li>
<p>Package <code dir="ltr">glibc-devel-2.5 (x86_64)</code> is available on the system</p>
</li>
<li>
<p>Package <code dir="ltr">gcc-c++-4.1.2 (x86_64)</code> is available on the system</p>
</li>
<li>
<p>Package <code dir="ltr">glibc-2.5-58 (x86_64)</code> is available on the system</p>
</li>
<li>
<p>Package <code dir="ltr">ksh-...</code> is available on the system</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="BABJDDFC"></a>
<div id="GSMUG430" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Installing a Global Service Manager</h2>
<p>The global service manager is the central component of the Global Data Services framework, and you must install the global service manager using separate media. No other Oracle software is required to install and run the global service manager.</p>
<p>You can install the global service manager on a system where you have other Oracle products installed, but you must install the global service manager in a separate Oracle home directory. You can install more than one global service manager on a single system, but each global service manager must have a separate Oracle home directory. For performance reasons, depending on the number of databases in your Global Data Services configuration, you may want to deploy the global service manager on a dedicated host.</p>
<p>You must install at least one global service manager for each Global Data Services region. Global service managers can be hosted on physical or virtual environments. For high availability, Oracle recommends installing multiple (typically 3) global service managers in each region running on separate hosts.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle Universal Installer does not currently support installing software on multiple hosts. You must install each global service manager on its respective host.</div>
<p>The Global Data Services administrator installs the global service manager. The <a id="sthref54"></a>Global Data Services administrator&#39;s responsibilities include:</p>
<ul>
<li>
<p>Administering global service managers</p>
</li>
<li>
<p>Administering the Global Data Services catalog</p>
</li>
<li>
<p>Administering regions and database pools</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
The Global Data Services administrator must have an operating system user account on all hosts where global service managers are deployed, and you must run the installation under that user account. The installation must <span class="italic">not</span> be run by a <code dir="ltr">root</code> user.</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
When you install the global service manager on Windows platforms, Oracle Universal Installer provides you with the option to use a Windows Built-in Account or to specify a standard Windows user account as the Oracle home user for the Oracle home. This account is used for running the Windows Services for the Oracle home and it cannot be an administrator account.
<p>Note that LocalService account is used for running the services if Windows Built-in Account option is chosen. For administrative tasks, including global service manager installation, upgrade, and patching, you should log on using a Windows account that has administrative privileges.</p>
<p>See Chapter 3 of the <a class="olink NTQRF672" href="../NTQRF/oh_usr.htm#NTQRF672"><span class="italic">Oracle Database Platform Guide for Microsoft Windows</span></a> for details and recommendations regarding the use of Oracle home user.</p>
</div>
<p>To install a <a id="sthref55"></a>global service manager:</p>
<ol>
<li>
<p>Start Oracle Universal Installer from the root directory of the software media and follow the prompts.</p>
<p>When the installation completes, the global service manager home directory contains binaries required to run the global service manager and the Global Service Manager Control utility (GDSCTL).</p>
</li>
<li>
<p>Set the <code dir="ltr">ORACLE_HOME</code> environment variable to the directory you specified during installation.</p>
</li>
<li>
<p>Add the <code dir="ltr">$ORACLE_HOME/bin</code> directory created for the global service manager to the <code dir="ltr">PATH</code> environment variable.</p>
</li>
<li>
<p>Set the <code dir="ltr">TNS_ADMIN</code> environment variable set to <code dir="ltr">$ORACLE_HOME/network/admin</code>.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CCHIJJGH"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Upgrading Global Data Services</h2>
<p>There are four components that comprise the distributed Global Data Services infrastructure, and each component may reside in a separate installation and may be upgraded independently using the usual upgrade procedure; however, there are certain rules about component versioning that should be followed. The components and rules are as follows:</p>
<ul>
<li>
<p><span class="bold">Catalog database:</span> The catalog database is the central repository for the GDS metadata; it is a standard Oracle Database installation. The version of the catalog database must always be greater than or equal to the version of any GDSCTL session that connects to it, and exactly equal to the version of any global service manager server that connects to it, with one exception: to ease migration, the catalog may temporarily have a version greater than some global service manager servers that are connected to it, until any change is made to the catalog, at which time any connected global service manager that is not at the same version will be disconnected, and any stopped global service manager that is not at the same version will not be allowed to connect.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
GDSCTL sessions running release 12.1.0.1 cannot make changes to a later versioned catalog; when running commands that will update the catalog, the GDSCTL client should be at a minimum version of 12.1.0.2.</div>
</li>
<li>
<p><span class="bold">GDSCTL client:</span> This component is run in an ad-hoc manner from a terminal session on any system that contains a global service manager installation. The version of the GDSCTL client is the version of the global service manager installation that it runs from.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When connecting a 12.1.0.1 GDSCTL client to a later versioned catalog only a limited set of commands are allowed, and any command that may cause catalog changes will result in a compatibility error. Commands that update the catalog metadata in a catalog at version 12.1.0.2 or later should be executed from a GDSCTL client running at least release 12.1.0.2.</div>
</li>
<li>
<p><span class="bold">Global service manager server:</span> The version of the global service manager server is the version of the global service manager installation from which the server runs. A global service manager server cannot connect to any catalog database that is at a lower version than itself. A global service manager server cannot connect to any catalog database that is at a higher version than itself in which changes have already been made to the catalog at that higher version. A global service manager can connect to a pool database running any version of Oracle Database 12<span class="italic">c</span> or later.</p>
</li>
<li>
<p><span class="bold">Pool database:</span> A pool database is any database added to a GDS pool which runs a global service. A pool database may be at any version of Oracle 12<span class="italic">c</span> or later, including versions later than the catalog version. You may upgrade or downgrade pool databases at any time.</p>
</li>
</ul>
<p>Given these rules, it is possible to perform a rolling upgrade of the distributed GDS infrastructure with zero service downtime. The advised order of upgrade is:</p>
<ol>
<li>
<p>Upgrade the catalog database. For best results this should be done using a rolling database upgrade; however, global services will remain available during the upgrade if the catalog is unavailable, although service failover will not occur.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When upgrading Oracle Database 12<span class="italic">c</span> Release 1 with the 12.1.0.2 patch release, you must execute the following command after upgrading the catalog database:
<p><code dir="ltr">modify catalog -pwd</code> <code dir="ltr"><span class="codeinlineitalic">password</span></code> <code dir="ltr">-newkeys</code></p>
<p>This command generates encryption keys and encrypt existing GSMUSR passwords stored in the GDS catalog.</p>
</div>
</li>
<li>
<p>Upgrade global service manager installations that are used to run GDSCTL clients, which do not also run a global service manager server (if any).</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Global service manager upgrades should be done in-place; however, an in-place upgrade will cause erroneous error messages unless permissions on the following files for the following platforms are updated to 755:
<p>On Linux/Solaris64/Solaris Sparc64:</p>
<p><code dir="ltr">$ORACLE_HOME/QOpatch/qopiprep.bat</code></p>
<p><code dir="ltr">$ORACLE_HOME/jdk/bin/jcontrol</code></p>
<p><code dir="ltr">$ORACLE_HOME/jdk/jre/bin/jcontrol</code></p>
<p>On AIX:</p>
<p><code dir="ltr">$ORACLE_HOME/QOpatch/qopiprep.bat</code></p>
<p><code dir="ltr">$ORACLE_HOME/jdk/jre/bin/classic/libjvm.a</code></p>
<p><code dir="ltr">$ORACLE_HOME/jdk/bin/policytool</code></p>
<p>On HPI:</p>
<p><code dir="ltr">$ORACLE_HOME/jdk/jre/lib/IA64N/server/Xusage.txt</code></p>
<p><code dir="ltr">$ORACLE_HOME/jdk/jre/bin/jcontrol</code></p>
<p><code dir="ltr">$ORACLE_HOME/QOpatch/qopiprep.bat</code></p>
<p>On Windows, no error messages are expected.</p>
</div>
</li>
<li>
<p>Stop, upgrade, and restart all global service manager servers one-at-a-time. In order to ensure zero downtime, at least one global service manager server should always be running. Global service manager servers at an earlier version than the catalog will continue to operate fully until catalog changes are made.</p>
</li>
<li>
<p>Upgrade pool databases in any order, either before or after the global service manager and catalog database upgrades, at the discretion of the pool database administrator.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BABICDDC"></a>
<div id="GSMUG431" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Creating the Global Data Services Catalog</h2>
<p>Every <a id="sthref56"></a>Global Data Services configuration must have a Global Data Services catalog. The Global Data Services catalog can reside on the same host as a GDS configuration database, but Oracle does not recommend this scenario for large configurations. Oracle recommends that you use Oracle high availability features such as Oracle Real Application Clusters (Oracle RAC) and Oracle Data Guard to protect the Global Data Services catalog against outages.</p>
<p class="subhead2"><a id="GSMUG432"></a><a id="sthref57"></a>Global Data Services Catalog Requirements</p>
<ul>
<li>
<p>The Global Data Services catalog must reside on an Oracle Database 12<span class="italic">c</span> (or later) database that uses a server parameter file (SPFILE).</p>
<p>If you create the Global Data Services catalog in an Oracle RAC database, then Oracle recommends that you set up Single Client Access Name (SCAN) for that database.</p>
</li>
<li>
<p>The Global Data Services administrator who creates the Global Data Services catalog must have a user account on the <a href="glossary.htm#CHDJJBIH"><span class="xrefglossterm">catalog database</span></a>, and must have <code dir="ltr">GSMADMIN_ROLE</code> privileges and an account password. For example, the following SQL statements can be executed on the catalog database.</p>
<pre dir="ltr">CREATE USER gsm_admin IDENTIFIED BY <span class="italic">password</span>;
GRANT gsmadmin_role TO gsm_admin;
</pre></li>
<li>
<p>The Global Data Services catalog must be protected for high availability and disaster recovery.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that the Global Data Services administrator does not directly connect to the catalog database, despite having a user account on the catalog database. Global Data Services administrators can use the GDSCTL utility to manage Global Data Services. GDSCTL connects to the Global Data Services catalog with the credentials that the Global Data Services administrator provides when running GDSCTL commands.</div>
<p>Use GDSCTL on any host where GDSCTL is installed and configured to create a <a id="sthref58"></a>Global Data Services catalog, as follows:</p>
<pre dir="ltr">GDSCTL&gt; create catalog -database <span class="italic">db_name</span> -user <span class="italic">user_name</span>
</pre>
<p>For example:</p>
<pre dir="ltr">GDSCTL&gt; create catalog -database serv1:1521:catdb.example.com -user gsm_admin
</pre>
<p>In the preceding example, <code dir="ltr">serv1:1521:catdb.example.com</code> is an Easy Connect string that contains the host name and port number of the listener that is used to connect to the database, and <code dir="ltr">catdb.example.com</code> is the service name for the Global Data Services catalog database.</p>
<p>You designate one database as the primary repository for the Global Data Services catalog. You can use existing high availability technologies, such as Oracle RAC, Oracle Data Guard, and Oracle Clusterware, to protect the Global Data Services catalog.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<code dir="ltr"><a href="gsmctlref.htm#CHEFFBIA">&#34;create catalog&#34;</a></code> for complete usage information</div>
</div>
<!-- class="sect1" -->
<a id="BABBADIJ"></a>
<div id="GSMUG433" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Adding a Global Service Manager to the Global Data Services Catalog</h2>
<p>Before a global service manager can be started, the global service manager should be registered in the Global Data Services catalog.</p>
<p>To add a global service manager:</p>
<ol>
<li>
<p>Alter the <code dir="ltr">GSMCATUSER</code> account.</p>
<p>Every global service manager in a Global Data Services configuration maintains a direct Oracle Net Services connection to the catalog database under the <code dir="ltr">GSMCATUSER</code> account, which is created by default during Oracle Database 12<span class="italic">c</span> installation. The database administrator (DBA) of the catalog database must unlock the account and give the account password to the Global Data Services administrator.</p>
<pre dir="ltr">ALTER USER gsmcatuser ACCOUNT UNLOCK;
ALTER USER gsmcatuser IDENTIFIED BY <span class="italic">password</span>;
</pre></li>
<li>
<p>Run the following command on the host where you want the global service manager to run:</p>
<pre dir="ltr">GDSCTL&gt; add gsm -gsm <span class="italic">gsm_name</span> -listener <span class="italic">listener_port</span> -catalog <span class="italic">catalogdb_name</span>
</pre>
<p>For example:</p>
<pre dir="ltr">GDSCTL&gt; add gsm -gsm east_gsm1 -listener 1523 -catalog
    serv1:1521:catdb.example.com
</pre>
<p>In the preceding example, <code dir="ltr">serv1:1521:catdb.example.com</code> is the connect identifier of the catalog database. The Global Data Services administrator is prompted for the <code dir="ltr">GSMCATUSER</code> password during the execution of the command.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<code dir="ltr"><a href="gsmctlref.htm#CHEJJEHE">&#34;add gsm&#34;</a></code> for complete usage information</div>
</li>
<li>
<p>After you add the global service manager to the Global Data Services framework, start the global service manager, as follows:</p>
<pre dir="ltr">GDSCTL&gt; start gsm -gsm <span class="italic">gsm_name</span>

</pre>
<p>During startup, the global service manager creates or modifies the <code dir="ltr">ONS.CONFIG</code> file and populates the file with configuration data from the Oracle Notification Service server that belongs to the global service manager.</p>
<p>By default, the file is created in the <code dir="ltr">$ORACLE_HOME/opmn/conf</code> directory. The location can be changed to <code dir="ltr">$ORACLE_CONFIG_HOME/opmn/conf</code> if the environment variable <code dir="ltr">ORACLE_CONFIG_HOME</code> is set.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code dir="ltr">ONS.CONFIG</code> file cannot be shared, and there must be a unique <code dir="ltr">ONS.CONFIG</code> file for each global service manager installation.</div>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BABEHAIH"></a>
<div id="GSMUG637" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Connecting to the Global Data Services Catalog</h2>
<p>Many GDSCTL commands require a connection to the <a id="sthref59"></a>Global Data Services catalog. You can connect to the Global Data Services catalog using one of the following two methods:</p>
<p class="subhead2"><a id="GSMUG638"></a>Method 1</p>
<p>Connect to the Global Data Services catalog, as follows:</p>
<pre dir="ltr">GDSCTL&gt; connect <span class="italic">user_name</span>@<span class="italic">connect_identifier</span>
Enter password: ***
Catalog connection is established
GDSCTL&gt;
</pre>
<p>In the preceding example, <code dir="ltr">catalog</code> is a connect identifier that resolves to one or more global service manager endpoints. For high availability, Oracle recommends that the connect identifier resolves to the list of all global service managers in the configuration. For example, if there are two global service managers in the Global Data Services configuration and you use <code dir="ltr">TNSNAMES</code> for name resolution, then the <code dir="ltr">tnsnames.ora</code> file must contain an entry similar to the following:</p>
<pre dir="ltr">catalog = (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=xyz)(PORT=1523))
    (ADDRESS=(PROTOCOL=tcp)(HOST=abc)(PORT=1523))
)
</pre>
<p>In the preceding example, the first global service manager runs on the host named <code dir="ltr">xyz</code>, and the second global service manager runs on the host named <code dir="ltr">abc</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<code dir="ltr"><a href="gsmctlref.htm#CHEFFBJI">&#34;connect&#34;</a></code> for complete usage information</div>
<p class="subhead2"><a id="GSMUG639"></a>Method 2</p>
<p>To run GDSCTL commands from the operating system prompt, append the <code dir="ltr">-catalog</code> parameter to any of the commands that require you to be connected to the Global Data Services catalog.</p>
<p>For example:</p>
<pre dir="ltr">$ gdsctl add gdspool -gdspool hr -catalog  mygdscatlog

username: Robert
password:
</pre>
<p>GDSCTL must use a global service manager as a listener to connect to the Global Data Services catalog because the location of the Global Data Services catalog can change. The global service manager records location changes and can route connection requests.</p>
</div>
<!-- class="sect1" -->
<a id="BABDHGID"></a>
<div id="GSMUG640" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Adding a Global Data Services Pool</h2>
<div class="infobox-note">
<p class="notep1">Notes:</p>
<ul>
<li>
<p>If you require only one Global Data Services pool, then you do not need to add one using these instructions. A default Global Data Services pool, <code dir="ltr">DBPOOLORA</code>, is created for you when you create the Global Data Services catalog.</p>
</li>
<li>
<p>The Global Data Services administrator has permissions to run GDSCTL commands to manage a Global Data Services pool and, if there is only a single pool, then the Global Data Services administrator also administers the pool.</p>
</li>
<li>
<p>If you specify a user when you run the <code dir="ltr">gdsctl add gdspool</code> command, then the local DBA where the Global Data Services catalog resides must first add the user to the catalog database.</p>
</li>
</ul>
</div>
<p>Large database clouds can require multiple Global Data Services pools that are managed by different administrators. <a id="sthref60"></a>Ensure that you are connected to the Global Data Services catalog and add a pool, administered by a specific user, as follows:</p>
<pre dir="ltr">GDSCTL&gt; add gdspool -dbpool <span class="italic">database_pool_list</span> [-users <span class="italic">user_list</span>]
</pre>
<p>For example:</p>
<pre dir="ltr">GDSCTL&gt; add gdspool -dbpool hr -users rjones
</pre>
<p>The preceding example adds a Global Data Services pool called <code dir="ltr">hr</code>, and adds the user <code dir="ltr">rjones</code>, who is assigned the privileges to administer the <code dir="ltr">hr</code> pool. The privileges enable the pool administrator to add databases to the pool and manage global services on the databases in the pool.</p>
<p>A Global Data Services pool must have a unique name within its GDS configuration. If you do not specify a name for the pool when you create it, then the name defaults to <code dir="ltr">oradbpool</code>. The pool name can be up to 30 bytes long and can be any valid identifier (an alphabetical character followed by zero or more alphanumeric ASCII characters or the underscore (_)).</p>
</div>
<!-- class="sect1" -->
<a id="BABEBDFD"></a>
<div id="GSMUG642" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Adding a Global Data Services Region</h2>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you require only one Global Data Services region, then you do not need to add a region using these instructions. A default Global Data Services region, <code dir="ltr">REGIONORA</code>, is created for you when you create the Global Data Services catalog.</div>
<p>Ensure that you are connected to the Global Data Services catalog and add a <a id="sthref61"></a>Global Data Services region, as follows:</p>
<pre dir="ltr">GDSCTL&gt; add region &ndash;region <span class="italic">region_list</span>
</pre>
<p>For example:</p>
<pre dir="ltr">GDSCTL&gt; add region &ndash;region west,east
</pre>
<p>The preceding example adds two regions, <code dir="ltr">east</code> and <code dir="ltr">west</code>, to the Global Data Services framework.</p>
<p>A Global Data Services region should have a name that is unique within the corresponding Global Data Services configuration. If no name is specified at the first region creation time, the default name, <code dir="ltr">oraregion</code>, is given to the region. The region name can be up to 30 characters long and can be any valid identifier - an alphabetical character followed by zero or more alphanumeric ASCII characters or &#39;_&#39;.</p>
</div>
<!-- class="sect1" -->
<a id="CCHHBIAG"></a>
<div id="GSMUG647" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Adding a Database to a Global Data Services Pool</h2>
<p>To provide global services, a database must be added to a Global Data Services pool. Before adding a database to a pool, the database administrator should unlock the <code dir="ltr">GSMUSER</code> account and give the password to the Global Data Services pool administrator, as shown in the following example:</p>
<pre dir="ltr">ALTER USER gsmuser ACCOUNT UNLOCK;
ALTER USER gsmuser IDENTIFIED BY <span class="italic">password</span>;
</pre>
<p>To be part of a Global Data Services pool, a database must use a server parameter file (SPFILE). An Oracle RAC database should also have SCAN set up.</p>
<p>To add a database, the user should connect to the Global Data Services catalog using the Global Data Services pool or Global Data Services administrator credentials, for example:</p>
<pre dir="ltr">GDSCTL&gt;connect rjones@catalog
Enter password:
</pre>
<p>and run the <code dir="ltr">gdsctl add database</code> command:</p>
<pre dir="ltr">GDSCTL&gt;add database -connect edc007:1521/db14.east.example.com -region east -gdspool hr
Enter password:
</pre>
<p>In this example <code dir="ltr">edc007:1521/db14.east.example.com</code> is the connect identifier of the database and when prompted, enter the GSMUSER account password for this database.</p>
<p>If the pool already contains databases and there are global services associated with the pool, then the services are automatically created on the new database.</p>
<div id="GSMUG664" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref62"></a>
<h3 class="sect2">Valid Node Checking for Registration</h3>
<p>The valid node checking for registration (VNCR) feature provides the ability to configure and dynamically update a set of IP addresses, host names, or subnets from which registration requests are allowed by the global service manager. Database instance registration with a global service manager succeeds only when the request originates from a valid node.</p>
<p>By default, the Global Data Services framework automatically adds a VNCR entry for the host on which a remote database is running each time the <code dir="ltr">gdsctl add database</code> command is run. The automation (called auto-VNCR) requires that the host name entry exists in either the local hosts file or in the name server. If the remote host is identified by a different name on any of the nodes on which the global service manager runs, then the Global Data Services administrator must manually add VNCR entry to the Global Data Services catalog by running the <code dir="ltr">gdsctl add invitednode</code> command.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<code dir="ltr"><a href="gsmctlref.htm#CHEDACCC">&#34;add invitednode (add invitedsubnet)&#34;</a></code> for complete usage information</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CCHGICHJ"></a>
<div id="GSMUG648" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Adding a Service to a Global Data Services Pool</h2>
<p>The <code dir="ltr">gdsctl add service</code> command is used to create a service on the Global Data Services pool databases. A simple example of the command is as follows:</p>
<pre dir="ltr">GDSCTL&gt;add service -gdspool hr -service emp_report1 -preferred_all
</pre>
<p>In this example <code dir="ltr">emp_report1</code> is the service name and the <code dir="ltr">-preferred_all</code> option means that the service should normally run on all of the databases in the pool.</p>
<p>The service name specified in the &#39;add service&#39; command can be domain qualified (for example, sales.example.com) or not (for example, sales). If the specified name is not domain qualified, the service is created with the default domain name &#34;&lt;GDS_pool_name&gt;.&lt;GDS_configuration_name&gt;&#34;, however the shorter non-domain qualified name can be used with subsequent GDSCTL commands to manage the service. If the specified name is domain qualified, the full domain qualified service name must be used in all subsequent GDSCTL commands used to manage the service.</p>
<p>A global service name must be unique within a GDS pool and when qualified by domain, must also be unique within a GDS configuration. A global service cannot be created at a database if a local or global service with the same name already exists at that database.</p>
<p>A global service name can contain alphanumeric characters, &#34;_&#39; and &#39;.&#39;. The first character must be alphanumeric. The maximum length of a global service name is 64 characters. The maximum length of a domain qualified global service name is 250 characters.</p>
<p>An Oracle Net connect descriptor used to connect to a global service must contain a domain qualified service name</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<code dir="ltr"><a href="gsmctlref.htm#CHECIBEB">&#34;add service&#34;</a></code> for complete usage information</div>
</div>
<!-- class="sect1" -->
<a id="CCHHHHFC"></a>
<div id="GSMUG649" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Starting a Global Service</h2>
<p>The <code dir="ltr">gdsctl start service</code> command is used to start an existing service on the Global Data Services pool databases.</p>
<pre dir="ltr">GDSCTL&gt;start service -service emp_report1 -gdspool hr
</pre>
<p>If the <code dir="ltr">-role</code> parameter is specified for the service, the service only starts on the databases in which the role matches the specified value. If the <code dir="ltr">-lag</code> parameter is specified for the service, the service only starts on the databases for which replication lag does not exceed the specified value. Unless <code dir="ltr">-preferred_all</code> is specified for the service, the service only starts on the databases that are listed as preferred for the service.</p>
</div>
<!-- class="sect1" -->
<a id="CCHIEHFH"></a>
<div id="GSMUG650" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Database Client Configuration</h2>
<p>Database clients connect to database services using an Oracle Net connect string. The connect string used for a global service differs from the connect string used for a local service in the following ways:</p>
<ul>
<li>
<p>The service name parameter in the connection data section specifies a global service</p>
</li>
<li>
<p>Multiple connection endpoints are specified, and these endpoints are global service managers rather than local, remote, or single client access name (SCAN) listeners</p>
</li>
<li>
<p>The database client&#39;s region may be specified in the connection data section</p>
</li>
</ul>
<p>Consider the following connect string:</p>
<pre dir="ltr"> (DESCRIPTION=
  (FAILOVER=on)
  (ADDRESS_LIST=
    (LOAD_BALANCE=ON)
    (ADDRESS=(host=sales-east1)(port=1522))
    (ADDRESS=(host=sales-east2)(port=1522))
    (ADDRESS=(host=sales-east3)(port=1522)))
  (ADDRESS_LIST=
    (LOAD_BALANCE=ON)
    (ADDRESS=(host=sales-west1)(port=1522))
    (ADDRESS=(host=sales-west2)(port=1522))
    (ADDRESS=(host=sales-west3)(port=1522)))
  (CONNECT_DATA=
   (SERVICE_NAME=sales)
   (REGION=east)))
</pre>
<p>This connect string contains three global service managers (sales-east1, sales-east2, and sales-east3) in the client&#39;s local region (east), and three global service managers (sales-west1, sales-west2, and sales-west3) in the client&#39;s buddy region (west).</p>
<p>Client-side load balancing is enabled across the global service managers within each region by setting the <code dir="ltr">LOAD_BALANCE</code> parameter to ON in the address list for each region. Connect-time failover between regions is enabled by setting the <code dir="ltr">FAILOVER</code> parameter to ON.</p>
<p>It is a best practice to have three global service managers in each region, for each region to have a buddy region, and for client-side load balancing and connect-time failover to be configured as shown in the example connect string.</p>
<p>The <code dir="ltr">REGION</code> parameter is optional if only global service managers from the local region are specified in the connect string. This is the case when there is only one region in the GDS configuration, or could be the case when there are multiple regions, but it is not feasible to change the connect string of an existing client designed to work with a single database. If the <code dir="ltr">REGION</code> parameter is not specified, the client&#39;s region is assumed to be the region of the global service manager used to connect to the global service.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The pre-12c Thin JDBC client can only be used with a GDS configuration that has a single region, unless the region parameter is specified in the connect string.</div>
<p>The Oracle Database 12<span class="italic">c</span> and later integrated clients use Oracle Notification Services (ONS) to receive the Fast Application Notification (FAN) events that support load balancing and Fast Connection Failover (FCF). The integrated clients automatically subscribe, without user-configuration, to up to 3 of the ONS servers co-located with the global service managers in each of the client&#39;s local and buddy regions.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Automatic ONS configuration is not supported if connections to an ONS server have to be secured using SSL. You must configure ONS manually to enable SSL. See client-specific guides for information on how to configure ONS manually.</div>
<p class="subhead2"><a id="GSMUG722"></a>Note for Pre-12c Clients:</p>
<p>The pre-12c OCI and ODP.NET clients do not support global services.</p>
<p>The pre-12c JDBC client supports global services, but you must manually configure it to subscribe to the ONS servers co-located with the global service managers in the client&#39;s local and buddy regions. It is a best practice to subscribe to three ONS servers in each of the client&#39;s local and buddy regions.</p>
<p>See the <span class="italic">Oracle Database JDBC Developer&#39;s Guide</span> for information about how to configure ONS subscriptions.</p>
<p class="subhead2"><a id="GSMUG723"></a>Configuring Integrated Clients for FAN and FCF</p>
<p>Load balancing and Fast Connection Failover (FCF) of client connections across the databases in a GDS configuration is supported by the Oracle database integrated clients, and requires that those clients be configured for FAN and FCF.</p>
<p>See one of these client-specific Programmer&#39;s Guides for information about that client&#39;s FAN and FCF configuration requirements:</p>
<ul>
<li>
<p><a class="olink JJDBC" href="../JJDBC/toc.htm"><span class="italic">Oracle Database JDBC Developer&#39;s Guide</span></a></p>
</li>
<li>
<p><a class="olink JJUCP" href="../JJUCP/toc.htm"><span class="italic">Oracle Universal Connection Pool for JDBC Developer&#39;s Guide</span></a></p>
</li>
<li>
<p><a class="olink ADFNS923" href="../ADFNS/adfns_avail.htm#ADFNS923"><span class="italic">Oracle Database Development Guide</span></a></p>
</li>
<li>
<p><a class="olink ODPNT" href="../ODPNT/toc.htm"><span class="italic">Oracle Data Provider for .NET Developer&#39;s Guide for Microsoft Windows</span></a></p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CCHFCJIG"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Exporting the GDS Catalog Data for Logical Backups</h2>
<p>Because the GDS catalog stores metadata for the entire GDS configuration, loss or corruption of the catalog data may require significant efforts to manually recreate it. While unavailability of the GDS catalog does not impact core GDS functionality such as load balancing, service failover, and application notification, no changes can be made to the GDS configuration until the catalog is restored. Therefore it is important to develop a strategy for protecting the GDS catalog.</p>
<p>Even when the GDS catalog is protected by HA technologies such as Oracle RAC and Data Guard, it is highly recommended that you regularly back up the GDS catalog. You can create a logical backup of the catalog by exporting the catalog data to a file. This backup of the GDS catalog can help you in a disaster recovery scenario, and when there is need to undo changes made to the catalog since the last backup was made. You can also use the backup when moving the GDS catalog to a new database.</p>
<p>To export the GDS catalog data to a file, ensure that you are connected to the catalog and execute the following command:</p>
<pre dir="ltr">GDSCTL&gt; export catalog <span class="italic">file_name_with_full_path</span>
</pre>
<p>The catalog configuration will be saved to the specified file on the system where GDSCTL is running. Access to the file should be limited to Global Data Services administrators since it may contain sensitive information such as connection strings for the pool databases.</p>
<div class="infobox-note">
<p class="notep1">Notes:</p>
<ul>
<li>
<p>It is strongly recommended that the catalog be validated before exporting it to ensure that there are no inconsistencies in the catalog data. Any errors reported by the <code dir="ltr">validate catalog</code> command should be corrected before exporting the catalog data.</p>
</li>
<li>
<p>You must not make any change to the file with exported catalog data. Any changes to the file may prevent using of this file for the catalog restore, or may cause catalog corruption after restore. It is recommended to store the file checksum along with the backup file. Do not try to restore the catalog configuration if the file has been modified.</p>
</li>
</ul>
</div>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref63"></a>
<h3 class="sect2">Restoring Logical Backup of the GDS Catalog into the Same Catalog Database</h3>
<p>To restore GDS catalog data from a backup file, connect to the catalog database and issue the following command:</p>
<pre dir="ltr">GDSCTL&gt; import catalog <span class="italic">file_name_with_full_path</span>
</pre>
<p>After the import of the catalog data is finished, pool databases will be automatically synchronized (see the <code dir="ltr">sync database</code> command description in <a href="gsmctlref.htm#CHDFIAFH">&#34;sync database.&#34;</a>). If there are no global service managers available, this action will be deferred until a global service manager registers with the catalog.</p>
<p>It is recommended that you validate the catalog after the import is done and all the databases are synchronized.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Trying to restore the GDS catalog from the file that has been modified may result in a corrupt catalog. It is the responsibility of the GDS administrator to check consistency of the backup file (for example, by using the checksum.)</div>
</div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref64"></a>
<h3 class="sect2">Restoring Logical Backup of the GDS Catalog into a new Catalog Database</h3>
<p>When moving a catalog to a new database, you must first create an empty catalog on the database (see <a href="#BABICDDC">&#34;Creating the Global Data Services Catalog.&#34;</a>). After that the <code dir="ltr">import catalog</code> command may be executed as described in the previous section.</p>
<p>If the new catalog database has a different connection string, it is the administrator&#39;s responsibility to change the connection string on global service manager systems. It is also required to restart all global service managers in this case. The synchronization procedure will not be completed, and thus the restore procedure will not be finished, until at least one global service manager registers with the catalog.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CCHBAJED"></a>
<div class="sect1">
<h2 class="sect1">Changing the GSMCATUSER Password</h2>
<p>If you want to change GSMCATUSER password, first run the following command in SQL*Plus while connected to the GDS catalog:</p>
<pre dir="ltr">ALTER USER gsmcatuser IDENTIFIED BY <span class="italic">password</span>
</pre>
<p>Then in GDSCTL run the following command:</p>
<pre dir="ltr">GDSCTL&gt; modify catalog -oldpwd <span class="italic">oldpassword</span> -newpwd <span class="italic">newpassword</span>
</pre></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3646">
<tr>
<td class="cellalignment3653">
<table class="cellalignment3651">
<tr>
<td class="cellalignment3650"><a href="intro.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3650"><a href="cloud.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3655">
<table class="cellalignment3649">
<tr>
<td class="cellalignment3650"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3650"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3650"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3650"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3650"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3650"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>