<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2218"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBMS_ADDM"></a><title>DBMS_ADDM</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1086"/>
<meta name="dcterms.created" content="2016-09-02T5:36:5Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"/>
<meta name="dcterms.identifier" content="E41829-07"/>
<meta name="dcterms.isVersionOf" content="ARPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="c_ulex.htm" title="Previous" type="text/html"/>
<link rel="Next" href="d_advrwr.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41829-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">21/290</span> <!-- End Header -->
<div id="ARPLS232" class="chapter"><a id="CACIFHFA"></a>
<h1 class="chapter"><span class="secnum">17</span> DBMS_ADDM</h1>
<p>The <code dir="ltr">DBMS_ADDM</code> package facilitates the use of Advisor functionality regarding the Automatic Database Diagnostic Monitor.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span> for more information about <a class="olink RACAD721" href="../RACAD/GUID-42E1B55A-4685-4CED-98CA-1BB576650D1A.htm#RACAD721">&#34;Automatic Workload Repository in Oracle Real Application Clusters Environments&#34;</a></p>
</li>
<li>
<p><span class="italic">Oracle Database Performance Tuning Guide</span> for more information about <a class="olink TGDBA242" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=TGDBA242">&#34;Automatic Performance Diagnostics&#34;</a></p>
</li>
</ul>
</div>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CIAHAFDJ">Using DBMS_ADDM</a></p>
<ul>
<li>
<p>Security Model</p>
</li>
</ul>
</li>
<li>
<p><a href="#CACDBJFG">Summary of DBMS_ADDM Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="CIAHAFDJ"></a>
<div id="ARPLS65039" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Using DBMS_ADDM</h2>
<ul>
<li>
<p><a href="#CIAJHDCJ">Security Model</a></p>
</li>
</ul>
<div id="ARPLS65040" class="refsect2"><a id="CIAJHDCJ"></a>
<h3 class="refsect2">Security Model</h3>
<p>The <code dir="ltr">DBMS_ADDM</code> package runs with the caller&#39;s permission, not the definer&#39;s, and then applies the security constraints required by the <code dir="ltr">DBMS_ADVISOR</code> package.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The <a href="d_advis.htm#CIHIGAED">DBMS_ADVISOR</a> package for more information about &#34;<a href="d_advis.htm#CHDBHGFE">Security Model</a>&#34;.</div>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="CACDBJFG"></a>
<div id="ARPLS65041" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Summary of DBMS_ADDM Subprograms</h2>
<div id="ARPLS65042" class="tblformal">
<p class="titleintable"><a id="sthref54"></a><a id="sthref55"></a>Table 17-1 DBMS_ADDM Package Subprograms</p>
<table class="cellalignment4330" title="DBMS_ADDM Package Subprograms" summary="DBMS_ADDMPackage Subprograms" dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t4">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t4" headers="r1c1-t4">
<p><a href="#CACECAHI">ANALYZE_DB Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t4 r1c2-t4">
<p>Creates an ADDM task for analyzing in database analysis mode and executes it</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t4" headers="r1c1-t4">
<p><a href="#CACHCIHE">ANALYZE_INST Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t4 r1c2-t4">
<p>Creates an ADDM task for analyzing in instance analysis mode and executes it.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t4" headers="r1c1-t4">
<p><a href="#CACEDJDH">ANALYZE_PARTIAL Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t4 r1c2-t4">
<p>Creates an ADDM task for analyzing a subset of instances in partial analysis mode and executes it</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t4" headers="r1c1-t4">
<p><a href="#CIABGAAI">COMPARE_CAPTURE_REPLAY_REPORT Function</a></p>
</td>
<td class="cellalignment4329" headers="r5c1-t4 r1c2-t4">
<p>Produces a Compare Period ADDM report comparing the performance of a capture to a replay</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t4" headers="r1c1-t4">
<p><a href="#CIAJABBF">COMPARE_DATABASES Function</a></p>
</td>
<td class="cellalignment4329" headers="r6c1-t4 r1c2-t4">
<p>Produces a Compare Period ADDM report for a database-wide performance comparison</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t4" headers="r1c1-t4">
<p><a href="#CIAIBHCB">COMPARE_INSTANCES Function</a></p>
</td>
<td class="cellalignment4329" headers="r7c1-t4 r1c2-t4">
<p>Produces a Compare Period ADDM report for an instance-level performance comparison</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t4" headers="r1c1-t4">
<p><a href="#CIADBCJD">COMPARE_REPLAY_REPLAY_REPORT Function</a></p>
</td>
<td class="cellalignment4329" headers="r8c1-t4 r1c2-t4">
<p>Produces a Compare Period ADDM report comparing the performance of a replay to another replay</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t4" headers="r1c1-t4">
<p><a href="#CACIBFDB">DELETE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r9c1-t4 r1c2-t4">
<p>Deletes an already created ADDM task (of any kind)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t4" headers="r1c1-t4">
<p><a href="#CACHFIJC">DELETE_FINDING_DIRECTIVE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r10c1-t4 r1c2-t4">
<p>Deletes a finding directive</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t4" headers="r1c1-t4">
<p><a href="#CACBBIJJ">DELETE_PARAMETER_DIRECTIVE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r11c1-t4 r1c2-t4">
<p>Deletes a parameter directive</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t4" headers="r1c1-t4">
<p><a href="#CACGDEED">DELETE_SEGMENT_DIRECTIVE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r12c1-t4 r1c2-t4">
<p>Deletes a segment directive</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t4" headers="r1c1-t4">
<p><a href="#CACGGBBF">DELETE_SQL_DIRECTIVE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r13c1-t4 r1c2-t4">
<p>Deletes a SQL directive</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t4" headers="r1c1-t4">
<p><a href="#CIAGBAFE">GET_ASH_QUERY Function</a></p>
</td>
<td class="cellalignment4329" headers="r14c1-t4 r1c2-t4">
<p>Returns a string containing the SQL text of an ASH query identifying the rows in ASH with impact for the finding</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t4" headers="r1c1-t4">
<p><a href="#CACJDCBJ">GET_REPORT Function</a></p>
</td>
<td class="cellalignment4329" headers="r15c1-t4 r1c2-t4">
<p>Retrieves the default text report of an executed ADDM task</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t4" headers="r1c1-t4">
<p><a href="#CACBDJAI">INSERT_FINDING_DIRECTIVE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r16c1-t4 r1c2-t4">
<p>Creates a directive to limit reporting of a specific finding type.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t4" headers="r1c1-t4">
<p><a href="#CACIFJED">INSERT_PARAMETER_DIRECTIVE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r17c1-t4 r1c2-t4">
<p>Creates a directive to prevent ADDM from creating actions to alter the value of a specific system parameter</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t4" headers="r1c1-t4">
<p><a href="#CACECFCJ">INSERT_SEGMENT_DIRECTIVE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r18c1-t4 r1c2-t4">
<p>Creates a directive to prevent ADDM from creating actions to &#34;run Segment Advisor&#34; for specific segments</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r19c1-t4" headers="r1c1-t4">
<p><a href="#CACGEACB">INSERT_SQL_DIRECTIVE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r19c1-t4 r1c2-t4">
<p>Creates a directive to limit reporting of actions on specific SQL</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r20c1-t4" headers="r1c1-t4">
<p><a href="#BABFHEEH">REAL_TIME_ADDM_REPORT Function</a></p>
</td>
<td class="cellalignment4329" headers="r20c1-t4 r1c2-t4">
<p>Produces a real-time report of ADDM activity</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS65043" class="refsect2"><a id="CACECAHI"></a>
<h3 class="refsect2"><a id="sthref56"></a>ANALYZE_DB Procedure</h3>
<p>This procedure creates an ADDM task for analyzing in database analysis mode and executes it.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref57"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.ANALYZE_DB (
   task_name           IN OUT VARCHAR2,
   begin_snapshot      IN     NUMBER,
   end_snapshot        IN     NUMBER,
   db_id               IN     NUMBER := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref58"></a>Parameters</p>
<div id="ARPLS65044" class="tblformal">
<p class="titleintable"><a id="sthref59"></a><a id="sthref60"></a>Table 17-2 ANALYZE_DB Procedure Parameters</p>
<table class="cellalignment4330" title="ANALYZE_DB Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.ANALYZE_DB subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t5">Parameter</th>
<th class="cellalignment4328" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t5" headers="r1c1-t5">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t5 r1c2-t5">
<p>Name of the task to be created</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t5" headers="r1c1-t5">
<p><code dir="ltr">begin_snapshot</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t5 r1c2-t5">
<p>Number of the snapshot that starts the analysis period</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t5" headers="r1c1-t5">
<p><code dir="ltr">end_snapshot</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t5 r1c2-t5">
<p>Number of the snapshot that ends the analysis period</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t5" headers="r1c1-t5">
<p><code dir="ltr">db_id</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t5 r1c2-t5">
<p>Database ID for the database you to analyze. By default, this is the database currently connected</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref61"></a>Return Values</p>
<p>The name of the created task is returned in the <code dir="ltr">task_name</code> parameter. It may be different from the value that is given as input (only in cases that name is already used by another task).</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref62"></a>Examples</p>
<p>To create an ADDM task in database analysis mode and execute it, with its name in variable <code dir="ltr">tname</code>:</p>
<pre dir="ltr">var tname VARCHAR2(60);
BEGIN
  :tname := &#39;my_database_analysis_mode_task&#39;;
  DBMS_ADDM.ANALYZE_DB(:tname, 1, 2);
END
</pre>
<p>To see a report:</p>
<pre dir="ltr">SET LONG 100000
SET PAGESIZE 50000
SELECT DBMS_ADDM.GET_REPORT(:tname) FROM DUAL;
</pre>
<p>Note that the return type of a report is a <code dir="ltr">CLOB</code>, formatted to fit line size of 80.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65045" class="refsect2"><a id="CACHCIHE"></a>
<h3 class="refsect2"><a id="sthref63"></a>ANALYZE_INST Procedure</h3>
<p>This procedure creates an ADDM task for analyzing in instance analysis mode and executes it.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref64"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.ANALYZE_INST (
   task_name           IN OUT VARCHAR2,
   begin_snapshot      IN     NUMBER,
   end_snapshot        IN     NUMBER,
   instance_number     IN     NUMBER := NULL,
   db_id               IN     NUMBER := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref65"></a>Parameters</p>
<div id="ARPLS65046" class="tblformal">
<p class="titleintable"><a id="sthref66"></a><a id="sthref67"></a>Table 17-3 ANALYZE_INST Procedure Parameters</p>
<table class="cellalignment4330" title="ANALYZE_INST Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.ANALYZE_INST subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t6">Parameter</th>
<th class="cellalignment4328" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t6" headers="r1c1-t6">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t6 r1c2-t6">
<p>Name of the task to be created</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t6" headers="r1c1-t6">
<p><code dir="ltr">begin_snapshot</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t6 r1c2-t6">
<p>Number of the snapshot that starts the analysis period</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t6" headers="r1c1-t6">
<p><code dir="ltr">end_snapshot</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t6 r1c2-t6">
<p>Number of the snapshot that ends the analysis period</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t6" headers="r1c1-t6">
<p><code dir="ltr">instance_number</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t6 r1c2-t6">
<p>Number of the instance to analyze. By default it is the instance currently connected</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t6" headers="r1c1-t6">
<p><code dir="ltr">db_id</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t6 r1c2-t6">
<p>Database ID for the database you to analyze. By default, this is the database currently connected</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref68"></a>Return Values</p>
<p>The name of the created task is returned in the <code dir="ltr">task_name</code> parameter. It may be different from the value that is given as input (only in cases that name is already used by another task).</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref69"></a>Usage Notes</p>
<p>On single instance systems (when not using Oracle RAC) the resulting task is identical to using the <code dir="ltr">ANALYZE_DB</code> procedure.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref70"></a>Examples</p>
<p>To create an ADDM task in instance analysis mode and execute it, with its name in variable <code dir="ltr">tname</code>:</p>
<pre dir="ltr">var tname VARCHAR2(60);
BEGIN
  :tname := &#39;my_instance_analysis_mode_task&#39;;
  DBMS_ADDM.ANALYZE_INST(:tname, 1, 2);
END
</pre>
<p>To see a report:</p>
<pre dir="ltr">SET LONG 100000
SET PAGESIZE 50000
SELECT DBMS_ADDM.GET_REPORT(:tname) FROM DUAL;
</pre>
<p>Note that the return type of a report is a <code dir="ltr">CLOB</code>, formatted to fit line size of 80.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65047" class="refsect2"><a id="CACEDJDH"></a>
<h3 class="refsect2"><a id="sthref71"></a>ANALYZE_PARTIAL Procedure</h3>
<p>This procedure creates an ADDM task for analyzing a subset of instances in partial analysis mode and executes it.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref72"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.ANALYZE_PARTIAL (
   task_name           IN OUT VARCHAR2,
   instance_numbers    IN     VARCHAR2,
   begin_snapshot      IN     NUMBER,
   end_snapshot        IN     NUMBER,
   db_id               IN     NUMBER := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref73"></a>Parameters</p>
<div id="ARPLS65048" class="tblformal">
<p class="titleintable"><a id="sthref74"></a><a id="sthref75"></a>Table 17-4 ANALYZE_PARTIAL Procedure Parameters</p>
<table class="cellalignment4330" title="ANALYZE_PARTIAL Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.ANALYZE_PARTIAL subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t7">Parameter</th>
<th class="cellalignment4328" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t7" headers="r1c1-t7">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t7 r1c2-t7">
<p>Name of the task to be created</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t7" headers="r1c1-t7">
<p><code dir="ltr">instance_number</code>s</p>
</td>
<td class="cellalignment4329" headers="r3c1-t7 r1c2-t7">
<p>Comma separated list of instance numbers to analyze</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t7" headers="r1c1-t7">
<p><code dir="ltr">begin_snapshot</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t7 r1c2-t7">
<p>Number of the snapshot that starts the analysis period</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t7" headers="r1c1-t7">
<p><code dir="ltr">end_snapshot</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t7 r1c2-t7">
<p>Number of the snapshot that ends the analysis period</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t7" headers="r1c1-t7">
<p><code dir="ltr">db_id</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t7 r1c2-t7">
<p>Database ID for the database you to analyze. By default, this is the database currently connected</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref76"></a>Return Values</p>
<p>The name of the created task is returned in the <code dir="ltr">task_name</code> parameter. It may be different from the value that is given as input (only in cases that name is already used by another task).</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref77"></a>Examples</p>
<p>To create an ADDM task in partial analysis mode and execute it, with its name in variable <code dir="ltr">tname</code>:</p>
<pre dir="ltr">var tname VARCHAR2(60);
BEGIN
  :tname := &#39;my_partial_analysis_modetask&#39;;
  DBMS_ADDM.ANALYZE_PARTIAL(:tname, &#39;1,2,3&#39;, 1, 2);
END
</pre>
<p>To see a report:</p>
<pre dir="ltr">SET LONG 100000
SET PAGESIZE 50000
SELECT DBMS_ADDM.GET_REPORT(:tname) FROM DUAL;
</pre>
<p>Note that the return type of a report is a <code dir="ltr">CLOB</code>, formatted to fit line size of 80.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74965" class="refsect2"><a id="CIABGAAI"></a>
<h3 class="refsect2"><a id="sthref78"></a>COMPARE_CAPTURE_REPLAY_REPORT Function</h3>
<p>This function produces a Compare Period ADDM report comparing the performance of a capture to a replay. The AWR data must reside in the same database, but it can originate from different databases. The function generates a report in either XML or HTML(Active Report) format.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref79"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.COMPARE_CAPTURE_REPLAY_REPORT (
   replay_id             IN NUMBER,
   report_type           IN VARCHAR2 := &#39;HTML&#39;)
  RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref80"></a>Parameters</p>
<div id="ARPLS74966" class="tblformal">
<p class="titleintable"><a id="sthref81"></a><a id="sthref82"></a>Table 17-5 COMPARE_CAPTURE_REPLAY_REPORT Function Parameters</p>
<table class="cellalignment4330" title="COMPARE_CAPTURE_REPLAY_REPORT Function Parameters" summary="This table describes the Parameters of DBMS_ADDM.COMPARE_CAPTURE_REPLAY_REPORT subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t8">Parameter</th>
<th class="cellalignment4328" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t8" headers="r1c1-t8">
<p><code dir="ltr">replay_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t8 r1c2-t8">
<p>Replay ID to use as the base period. The base period is the baseline period to compare in order to determine improvement or regression.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t8" headers="r1c1-t8">
<p><code dir="ltr">report_type</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t8 r1c2-t8">
<p><code dir="ltr">&#39;HTML&#39;</code> (the default) for an HTML active report, <code dir="ltr">&#39;XML&#39;</code> for an XML report</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref83"></a>Return Values</p>
<p>A <code dir="ltr">CLOB</code> containing a compare period ADDM report</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74967" class="refsect2"><a id="CIAJABBF"></a>
<h3 class="refsect2"><a id="sthref84"></a>COMPARE_DATABASES Function</h3>
<p>This function produces a Compare Period ADDM report comparing the performance of a database over two different time periods or the performance of two different databases over two different time periods.The AWR data must reside in the same database, but it can originate from different databases. The function generates a report in either XML or HTML(Active Report) format.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref85"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.COMPARE_DATABASES (
   base_dbid             IN NUMBER := NULL,
   base_begin_snap_id    IN NUMBER,
   base_end_snap_id      IN NUMBER,
   comp_dbid             IN NUMBER := NULL,
   comp_begin_snap_id    IN NUMBER,
   comp_end_snap_id      IN NUMBER,
   report_type           IN VARCHAR2 := &#39;HTML&#39;)
  RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref86"></a>Parameters</p>
<div id="ARPLS74968" class="tblformal">
<p class="titleintable"><a id="sthref87"></a><a id="sthref88"></a>Table 17-6 COMPARE_DATABASES Function Parameters</p>
<table class="cellalignment4330" title="COMPARE_DATABASES Function Parameters" summary="This table describes the Parameters of DBMS_ADDM.COMPARE_DATABASES subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t9">Parameter</th>
<th class="cellalignment4328" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t9" headers="r1c1-t9">
<p><code dir="ltr">base_dbid</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t9 r1c2-t9">
<p>Database id (<code dir="ltr">DBID</code>) of the base period. The base period is the baseline period that we compare to in order to determine improvement or regression.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t9" headers="r1c1-t9">
<p><code dir="ltr">base_begin_snap_id</code>s</p>
</td>
<td class="cellalignment4329" headers="r3c1-t9 r1c2-t9">
<p>Begin AWR snapshot ID of the base period.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t9" headers="r1c1-t9">
<p><code dir="ltr">base_end_snap_id</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t9 r1c2-t9">
<p>End AWR snapshot ID of the base period.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t9" headers="r1c1-t9">
<p><code dir="ltr">comp_dbid</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t9 r1c2-t9">
<p>Database id (<code dir="ltr">DBID</code>) of the comparison period. The comparison period is the period we compare to the base period.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t9" headers="r1c1-t9">
<p><code dir="ltr">comp_begin_snap_id</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t9 r1c2-t9">
<p>Begin AWR snapshot ID of the comparison period</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t9" headers="r1c1-t9">
<p><code dir="ltr">comp_end_snap_id</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t9 r1c2-t9">
<p>End AWR snapshot ID of the comparison period</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t9" headers="r1c1-t9">
<p><code dir="ltr">report_type</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t9 r1c2-t9">
<p><code dir="ltr">&#39;HTML&#39;</code> (the default) for an HTML active report, <code dir="ltr">&#39;XML&#39;</code> for an XML report</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref89"></a>Return Values</p>
<p>A <code dir="ltr">CLOB</code> containing a compare period ADDM report</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74969" class="refsect2"><a id="CIAIBHCB"></a>
<h3 class="refsect2"><a id="sthref90"></a>COMPARE_INSTANCES Function</h3>
<p>This function produces a Compare Period ADDM report comparing the performance of a single instance over two different time periods or the performance of two different instances over two different time periods.The AWR data must reside in the same database, but it can originate from different databases. The function generates a report in either XML or HTML(Active Report) format.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref91"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.COMPARE_INSTANCES (
   base_dbid             IN NUMBER := NULL,
   base_instance_id      IN NUMBER
   base_begin_snap_id    IN NUMBER,
   base_end_snap_id      IN NUMBER,
   comp_dbid             IN NUMBER := NULL,
   comp_instance_id      IN NUMBER,
   comp_begin_snap_id    IN NUMBER,
   comp_end_snap_id      IN  NUMBER,
   report_type           IN VARCHAR2 := &#39;HTML&#39;)
  RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref92"></a>Parameters</p>
<div id="ARPLS74970" class="tblformal">
<p class="titleintable"><a id="sthref93"></a><a id="sthref94"></a>Table 17-7 COMPARE_INSTANCES Function Parameters</p>
<table class="cellalignment4330" title="COMPARE_INSTANCES Function Parameters" summary="This table describes the Parameters of DBMS_ADDM.COMPARE_INSTANCES_REPORT subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t10">Parameter</th>
<th class="cellalignment4328" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t10" headers="r1c1-t10">
<p><code dir="ltr">base_dbid</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t10 r1c2-t10">
<p>Database id (<code dir="ltr">DBID</code>) of the base period. The base period is the baseline period that we compare to in order to determine improvement or regression.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t10" headers="r1c1-t10">
<p><code dir="ltr">base_instance_id</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t10 r1c2-t10">
<p>Instance number of the database instance to include from the base period</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t10" headers="r1c1-t10">
<p><code dir="ltr">base_begin_snap_id</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t10 r1c2-t10">
<p>Begin AWR snapshot ID of the base period.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t10" headers="r1c1-t10">
<p><code dir="ltr">base_end_snap_id</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t10 r1c2-t10">
<p>End AWR snapshot ID of the base period.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t10" headers="r1c1-t10">
<p><code dir="ltr">comp_dbid</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t10 r1c2-t10">
<p>Database id (<code dir="ltr">DBID</code>) of the comparison period. The comparison period is the period we compare to the base period.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t10" headers="r1c1-t10">
<p><code dir="ltr">comp_instance_id</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t10 r1c2-t10">
<p>Instance number of the database instance to include from the comparison period</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t10" headers="r1c1-t10">
<p><code dir="ltr">comp_begin_snap_id</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t10 r1c2-t10">
<p>Begin AWR snapshot ID of the comparison period</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t10" headers="r1c1-t10">
<p><code dir="ltr">comp_end_snap_id</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t10 r1c2-t10">
<p>End AWR snapshot ID of the comparison period</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t10" headers="r1c1-t10">
<p><code dir="ltr">report_type</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t10 r1c2-t10">
<p><code dir="ltr">&#39;HTML&#39;</code> (the default) for an HTML active report, <code dir="ltr">&#39;XML&#39;</code> for an XML report</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref95"></a>Return Values</p>
<p>A <code dir="ltr">CLOB</code> containing a compare period ADDM report</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74971" class="refsect2"><a id="CIADBCJD"></a>
<h3 class="refsect2"><a id="sthref96"></a>COMPARE_REPLAY_REPLAY_REPORT Function</h3>
<p>This function produces a Compare Period ADDM report comparing the performance of a replay to another replay. The AWR data must reside in the same database, but it can originate from different databases. The function generates a report in either XML or HTML(Active Report) format.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref97"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.COMPARE_CAPTURE_REPLAY_REPORT (
   replay_id1            IN NUMBER,
   replay_id2            IN NUMBER,
   report_type           IN VARCHAR2 := &#39;HTML&#39;)
  RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref98"></a>Parameters</p>
<div id="ARPLS74972" class="tblformal">
<p class="titleintable"><a id="sthref99"></a><a id="sthref100"></a>Table 17-8 COMPARE_REPLAY_REPLAY_REPORT Function Parameters</p>
<table class="cellalignment4330" title="COMPARE_REPLAY_REPLAY_REPORT Function Parameters" summary="This table describes the Parameters of DBMS_ADDM.COMPARE_REPLAY_REPLAY_REPORT subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t11">Parameter</th>
<th class="cellalignment4328" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t11" headers="r1c1-t11">
<p><code dir="ltr">replay_id1</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t11 r1c2-t11">
<p>Replay ID to use as the base period. The base period is the baseline period to compare in order to determine improvement or regression.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t11" headers="r1c1-t11">
<p><code dir="ltr">replay_id2</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t11 r1c2-t11">
<p>Replay ID to use as the comparison period. The comparison period is the period to compare to the base period in order to determine improvement or regression.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t11" headers="r1c1-t11">
<p><code dir="ltr">report_type</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t11 r1c2-t11">
<p><code dir="ltr">&#39;HTML&#39;</code> (the default) for an HTML active report, <code dir="ltr">&#39;XML&#39;</code> for an XML report</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref101"></a>Return Values</p>
<p>A <code dir="ltr">CLOB</code> containing a compare period ADDM report</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65049" class="refsect2"><a id="CACIBFDB"></a>
<h3 class="refsect2"><a id="sthref102"></a>DELETE Procedure</h3>
<p>This procedure deletes an already created ADDM task (of any kind). For database analysis mode and partial analysis mode this deletes the local tasks associated with the main task.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref103"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.DELETE (
   task_name           IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref104"></a>Parameters</p>
<div id="ARPLS65050" class="tblformal">
<p class="titleintable"><a id="sthref105"></a><a id="sthref106"></a>Table 17-9 DELETE Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.DELETE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t12">Parameter</th>
<th class="cellalignment4328" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t12" headers="r1c1-t12">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t12 r1c2-t12">
<p>Name of the task to be deleted</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref107"></a>Examples</p>
<pre dir="ltr">BEGIN
  DBMS_ADDM.DELETE (&#39;my_partial_analysis_mode_task&#39;);
END
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65051" class="refsect2"><a id="CACHFIJC"></a>
<h3 class="refsect2"><a id="sthref108"></a>DELETE_FINDING_DIRECTIVE Procedure</h3>
<p>This procedure deletes a finding directive.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref109"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.DELETE_FINDING_DIRECTIVE (
   task_name           IN VARCHAR2,
   dir_name            IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref110"></a>Parameters</p>
<div id="ARPLS65052" class="tblformal">
<p class="titleintable"><a id="sthref111"></a><a id="sthref112"></a>Table 17-10 DELETE_FINDING_DIRECTIVE Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_FINDING_DIRECTIVE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.DELETE_FINDING_DIRECTIVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t13">Parameter</th>
<th class="cellalignment4328" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t13" headers="r1c1-t13">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t13 r1c2-t13">
<p>Name of the task this directive applies to. If the value is <code dir="ltr">NULL</code>, it is a system directive.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t13" headers="r1c1-t13">
<p><code dir="ltr">dir_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t13 r1c2-t13">
<p>Name of the directive. All directives must be given unique names.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65053" class="refsect2"><a id="CACBBIJJ"></a>
<h3 class="refsect2"><a id="sthref113"></a>DELETE_PARAMETER_DIRECTIVE Procedure</h3>
<p>This procedure deletes a parameter directive. This removes a specific system directive for parameters. Subsequent ADDM tasks are not affected by this directive.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref114"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.DELETE_PARAMETER_DIRECTIVE (
   task_name           IN VARCHAR2,
   dir_name            IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref115"></a>Parameters</p>
<div id="ARPLS65054" class="tblformal">
<p class="titleintable"><a id="sthref116"></a><a id="sthref117"></a>Table 17-11 DELETE_PARAMETER_DIRECTIVE Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_PARAMETER_DIRECTIVE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.DELETE_PARAMETER_DIRECTIVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t14">Parameter</th>
<th class="cellalignment4328" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t14" headers="r1c1-t14">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t14 r1c2-t14">
<p>Name of the task this directive applies to. If the value is <code dir="ltr">NULL</code>, it is a system directive.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t14" headers="r1c1-t14">
<p><code dir="ltr">dir_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t14 r1c2-t14">
<p>Name of the directive. All directives must be given unique names.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref118"></a>Examples</p>
<pre dir="ltr">BEGIN
   DBMS_ADDM.DELETE_PARAMETER_DIRECTIVE (NULL,&#39;my Parameter directive&#39;); 
END;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65055" class="refsect2"><a id="CACGDEED"></a>
<h3 class="refsect2"><a id="sthref119"></a>DELETE_SEGMENT_DIRECTIVE Procedure</h3>
<p>This procedure deletes a segment directive.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref120"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.DELETE_SEGMENT_DIRECTIVE (
   task_name           IN VARCHAR2,
   dir_name            IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref121"></a>Parameters</p>
<div id="ARPLS65056" class="tblformal">
<p class="titleintable"><a id="sthref122"></a><a id="sthref123"></a>Table 17-12 DELETE_SEGMENT_DIRECTIVE Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_SEGMENT_DIRECTIVE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.DELETE_SEGMENT_DIRECTIVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t15">Parameter</th>
<th class="cellalignment4328" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t15" headers="r1c1-t15">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t15 r1c2-t15">
<p>Name of the task this directive applies to. If the value is <code dir="ltr">NULL</code>, it is a system directive.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t15" headers="r1c1-t15">
<p><code dir="ltr">dir_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t15 r1c2-t15">
<p>Name of the directive. All directives must be given unique names.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65057" class="refsect2"><a id="CACGGBBF"></a>
<h3 class="refsect2"><a id="sthref124"></a>DELETE_SQL_DIRECTIVE Procedure</h3>
<p>This procedure deletes a SQL directive.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref125"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.DELETE_SQL_DIRECTIVE (
   task_name           IN VARCHAR2,
   dir_name            IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref126"></a>Parameters</p>
<div id="ARPLS65058" class="tblformal">
<p class="titleintable"><a id="sthref127"></a><a id="sthref128"></a>Table 17-13 DELETE_SQL_DIRECTIVE Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_SQL_DIRECTIVE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.DELETE_SQL_DIRECTIVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t16">Parameter</th>
<th class="cellalignment4328" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t16" headers="r1c1-t16">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t16 r1c2-t16">
<p>Name of the task this directive applies to. If the value is <code dir="ltr">NULL</code>, it is a system directive.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t16" headers="r1c1-t16">
<p><code dir="ltr">dir_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t16 r1c2-t16">
<p>Name of the directive. All directives must be given unique names.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72964" class="refsect2"><a id="CIAGBAFE"></a>
<h3 class="refsect2"><a id="sthref129"></a>GET_ASH_QUERY Function</h3>
<p>The function returns a string containing the SQL text of an ASH query identifying the rows in ASH with impact for the finding. For most types of findings this identifies the exact rows in ASH corresponding to the finding. For some types of findings the query is an approximation and should not be used for exact identification of the finding&#39;s impact or the finding&#39;s specific activity.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref130"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.GET_ASH_QUERY (
   task_name           IN   VARCHAR2,
   finding_id          IN   NUMBER)
  RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref131"></a>Parameters</p>
<div id="ARPLS72965" class="tblformal">
<p class="titleintable"><a id="sthref132"></a><a id="sthref133"></a>Table 17-14 GET_ASH_QUERY Function Parameters</p>
<table class="cellalignment4330" title="GET_ASH_QUERY Function Parameters" summary="This table describes the Parameters of DBMS_ADDM.GET_ASH_QUERY subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t17">Parameter</th>
<th class="cellalignment4328" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t17" headers="r1c1-t17">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t17 r1c2-t17">
<p>Name of the task</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t17" headers="r1c1-t17">
<p><code dir="ltr">finding</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t17 r1c2-t17">
<p>ID of the finding within the task</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref134"></a>Return Values</p>
<p>A <code dir="ltr">VARCHAR</code> containing an ASH query identifying the rows in ASH with impact for the finding</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65059" class="refsect2"><a id="CACJDCBJ"></a>
<h3 class="refsect2"><a id="sthref135"></a>GET_REPORT Function</h3>
<p>This function retrieves the default text report of an executed ADDM task.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref136"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.GET_REPORT (
   task_name           IN VARCHAR2)
  RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref137"></a>Parameters</p>
<div id="ARPLS65060" class="tblformal">
<p class="titleintable"><a id="sthref138"></a><a id="sthref139"></a>Table 17-15 GET_REPORT Function Parameters</p>
<table class="cellalignment4330" title="GET_REPORT Function Parameters" summary="This table describes the Parameters of DBMS_ADDM.GET_REPORT subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t18">Parameter</th>
<th class="cellalignment4328" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t18" headers="r1c1-t18">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t18 r1c2-t18">
<p>Name of the task</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref140"></a>Examples</p>
<pre dir="ltr">Set long 1000000
Set pagesize 50000
SELECT DBMS_ADDM.GET_REPORT(&#39;my_partial_analysis_mode_task&#39;) FROM DUAL;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65061" class="refsect2"><a id="CACBDJAI"></a>
<h3 class="refsect2"><a id="sthref141"></a>INSERT_FINDING_DIRECTIVE Procedure</h3>
<p>This procedure creates a directive to limit reporting of a specific finding type. The directive can be created for a specific task (only when the task is in <code dir="ltr">INITIAL</code> status), or for all subsequently created ADDM tasks (such as a system directive).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref142"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.INSERT_FINDING_DIRECTIVE (
   task_name             IN VARCHAR2,
   dir_name              IN VARCHAR2,
   finding_name          IN VARCHAR2,
   min_active_sessions   IN NUMBER := 0,
   min_perc_impact       IN NUMBER := 0); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref143"></a>Parameters</p>
<div id="ARPLS65062" class="tblformal">
<p class="titleintable"><a id="sthref144"></a><a id="sthref145"></a>Table 17-16 INSERT_FINDING_DIRECTIVE Procedure Parameters</p>
<table class="cellalignment4330" title="INSERT_FINDING_DIRECTIVE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.INSERT_FINDING_DIRECTIVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t19">Parameter</th>
<th class="cellalignment4328" id="r1c2-t19">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t19" headers="r1c1-t19">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t19 r1c2-t19">
<p>Name of the task this directive applies to. If the value is <code dir="ltr">NULL</code>, it applies to all subsequently created ADDM Tasks.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t19" headers="r1c1-t19">
<p><code dir="ltr">dir_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t19 r1c2-t19">
<p>Name of the directive. All directives must be given unique names.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t19" headers="r1c1-t19">
<p><code dir="ltr">finding_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t19 r1c2-t19">
<p>Name of an ADDM finding to which this directive applies. All valid findings names appear in the <code dir="ltr">NAME</code> column of view <code dir="ltr">DBA_ADVISOR_FINDING_NAMES</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t19" headers="r1c1-t19">
<p><code dir="ltr">min_active_sessions</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t19 r1c2-t19">
<p>Minimal number of active sessions for the finding. If a finding has less than this number, it is filtered from the ADDM result.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t19" headers="r1c1-t19">
<p><code dir="ltr">min_perc_impact</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t19 r1c2-t19">
<p>Minimal number for the &#34;percent impact&#34; of the finding relative to total database time in the analysis period. If the finding&#39;s impact is less than this number, it is filtered from the ADDM result.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref146"></a>Examples</p>
<p>A new ADDM task is created to analyze a local instance. However, it has special treatment for &#39;Undersized SGA&#39; findings. The result of <code dir="ltr">GET_REPORT</code> shows only an &#39;Undersized SGA&#39; finding if the finding is responsible for at least 2 average active sessions during the analysis period, and this constitutes at least 10% of the total database time during that period.</p>
<pre dir="ltr">var tname VARCHAR2(60);
BEGIN
  DBMS_ADDM.INSERT_FINDING_DIRECTIVE(
   NULL, 
   &#39;Undersized SGA directive&#39;,
   &#39;Undersized SGA&#39;, 
   2, 
   10); 
  :tname := &#39;my_instance_analysis_mode_task&#39;;
  DBMS_ADDM.ANALYZE_INST(:tname, 1, 2);
END;
</pre>
<p>To see a report containing &#39;Undersized SGA&#39; findings regardless of the directive:</p>
<pre dir="ltr">SELECT DBMS_ADVISOR.GET_TASK_REPORT(:tname, &#39;TEXT&#39;, &#39;ALL&#39;) FROM DUAL;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65063" class="refsect2"><a id="CACIFJED"></a>
<h3 class="refsect2"><a id="sthref147"></a>INSERT_PARAMETER_DIRECTIVE Procedure</h3>
<p>This procedure creates a directive to prevent ADDM from creating actions to alter the value of a specific system parameter. The directive can be created for a specific task (only when the task is in <code dir="ltr">INITIAL</code> status), or for all subsequently created ADDM tasks (such as a system directive).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref148"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.INSERT_PARAMETER_DIRECTIVE (
   task_name             IN VARCHAR2,
   dir_name              IN VARCHAR2,
   parameter_name        IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref149"></a>Parameters</p>
<div id="ARPLS65064" class="tblformal">
<p class="titleintable"><a id="sthref150"></a><a id="sthref151"></a>Table 17-17 INSERT_PARAMETER_DIRECTIVE Procedure Parameters</p>
<table class="cellalignment4330" title="INSERT_PARAMETER_DIRECTIVE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.INSERT_PARAMETER_DIRECTIVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t20">Parameter</th>
<th class="cellalignment4328" id="r1c2-t20">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t20" headers="r1c1-t20">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t20 r1c2-t20">
<p>Name of the task this directive applies to. If the value is <code dir="ltr">NULL</code>, it applies to all subsequently created ADDM Tasks.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t20" headers="r1c1-t20">
<p><code dir="ltr">dir_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t20 r1c2-t20">
<p>Name of the directive. All directives must be given unique names.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t20" headers="r1c1-t20">
<p><code dir="ltr">parameter_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t20 r1c2-t20">
<p>Specifies the parameter to use. Valid parameter names appear in <code dir="ltr">V$PARAMETER.</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref152"></a>Examples</p>
<p>A new ADDM task is created to analyze a local instance. However, it has special treatment for all actions that recommend modifying the parameter &#39;<code dir="ltr">sga_target</code>&#39;. The result of <code dir="ltr">GET_REPORT</code> does not show these actions.</p>
<pre dir="ltr">var tname varchar2(60);
BEGIN
  DBMS_ADDM.INSERT_PARAMETER_DIRECTIVE(
   NULL,
   &#39;my Parameter directive&#39;,
   &#39;sga_target&#39;); 
  :tname := &#39;my_instance_analysis_mode_task&#39;;
  DBMS_ADDM.ANALYZE_INST(:tname, 1, 2);
END;
</pre>
<p>To see a report containing all actions regardless of the directive:</p>
<pre dir="ltr">SELECT DBMS_ADVISOR.GET_TASK_REPORT(:tname, &#39;TEXT&#39;, &#39;ALL&#39;) FROM DUAL;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65065" class="refsect2"><a id="CACECFCJ"></a>
<h3 class="refsect2"><a id="sthref153"></a>INSERT_SEGMENT_DIRECTIVE Procedure</h3>
<p>This procedure creates a directive to prevent ADDM from creating actions to &#34;run Segment Advisor&#34; for specific segments. The directive can be created for a specific task (only when the task is in <code dir="ltr">INITIAL</code> status), or for all subsequently created ADDM tasks (such as a system directive).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref154"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.INSERT_SEGMENT_DIRECTIVE (
   task_name             IN VARCHAR2,
   dir_name              IN VARCHAR2,
   owner_name            IN VARCHAR2,
   object_name           IN VARCHAR2 := NULL,
   sub_object_name       IN VARCHAR2 := NULL);
   
</pre>
<pre dir="ltr">DBMS_ADDM.INSERT_SEGMENT_DIRECTIVE (
   task_name             IN VARCHAR2,
   dir_name              IN VARCHAR2,
   object_number         IN NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref155"></a>Parameters</p>
<div id="ARPLS65066" class="tblformal">
<p class="titleintable"><a id="sthref156"></a><a id="sthref157"></a>Table 17-18 INSERT_SEGMENT_DIRECTIVE Procedure Parameters</p>
<table class="cellalignment4330" title="INSERT_SEGMENT_DIRECTIVE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.INSERT_SEGMENT_DIRECTIVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t21">Parameter</th>
<th class="cellalignment4328" id="r1c2-t21">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t21" headers="r1c1-t21">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t21 r1c2-t21">
<p>Name of the task this directive applies to. If the value is <code dir="ltr">NULL</code>, it applies to all subsequently created ADDM Tasks.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t21" headers="r1c1-t21">
<p><code dir="ltr">dir_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t21 r1c2-t21">
<p>Name of the directive. All directives must be given unique names.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t21" headers="r1c1-t21">
<p><code dir="ltr">owner_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t21 r1c2-t21">
<p>Specifies the owner of the segment/s to be filtered. A wildcard is allowed in the same syntax used for &#34;like&#34; constraints.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t21" headers="r1c1-t21">
<p><code dir="ltr">object_name</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t21 r1c2-t21">
<p>Name of the main object to be filtered. Again, wildcards are allowed. The default value of <code dir="ltr">NULL</code> is equivalent to a value of &#39;%&#39;.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t21" headers="r1c1-t21">
<p><code dir="ltr">sub_object_name</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t21 r1c2-t21">
<p>Name of the part of the main object to be filtered. This could be a partition name, or even sub partitions (separated by a &#39;.&#39;). Again, wildcards are allowed. The default value of <code dir="ltr">NULL</code> is equivalent to a value of &#39;%&#39;.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t21" headers="r1c1-t21">
<p><code dir="ltr">object_number</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t21 r1c2-t21">
<p>Object number of the <code dir="ltr">SEGMENT</code> that this directive is to filter, found in views <code dir="ltr">DBA_OBJECTS</code> or <code dir="ltr">DBA_SEGMENTS</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref158"></a>Examples</p>
<p>A new ADDM task is created to analyze a local instance. However, it has special treatment for all segments that belong to user <code dir="ltr">SCOTT</code>. The result of <code dir="ltr">GET_REPORT</code> does not show actions for running Segment advisor for segments that belong to <code dir="ltr">SCOTT</code>.</p>
<pre dir="ltr">var tname VARCHAR2(60);
BEGIN
  DBMS_ADDM.INSERT_SEGMENT_DIRECTIVE(NULL,
                                     &#39;my Segment directive&#39;,
                                     &#39;SCOTT&#39;); 
  :tname := &#39;my_instance_analysis_mode_task&#39;;
  DBMS_ADDM.ANALYZE_INST(:tname, 1, 2);
END;
</pre>
<p>To see a report containing all actions regardless of the directive:</p>
<pre dir="ltr">SELECT DBMS_ADVISOR.GET_TASK_REPORT(:tname, &#39;TEXT&#39;, &#39;ALL&#39;) FROM DUAL;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65067" class="refsect2"><a id="CACGEACB"></a>
<h3 class="refsect2"><a id="sthref159"></a>INSERT_SQL_DIRECTIVE Procedure</h3>
<p>This procedure creates a directive to limit reporting of actions on specific SQL. The directive can be created for a specific task (only when the task is in <code dir="ltr">INITIAL</code> status), or for all subsequently created ADDM tasks (such as a system directive).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref160"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.INSERT_SQL_DIRECTIVE (
   task_name             IN VARCHAR2,
   dir_name              IN VARCHAR2,
   sql_id                IN VARCHAR2,
   min_active_sessions   IN NUMBER := 0,
   min_response_time     IN NUMBER := 0); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref161"></a>Parameters</p>
<div id="ARPLS65068" class="tblformal">
<p class="titleintable"><a id="sthref162"></a><a id="sthref163"></a>Table 17-19 INSERT_SQL_DIRECTIVE Procedure Parameters</p>
<table class="cellalignment4330" title="INSERT_SQL_DIRECTIVE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.INSERT_SQL_DIRECTIVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t22">Parameter</th>
<th class="cellalignment4328" id="r1c2-t22">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t22" headers="r1c1-t22">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t22 r1c2-t22">
<p>Name of the task this directive applies to. If the value is <code dir="ltr">NULL</code>, it applies to all subsequently created ADDM Tasks.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t22" headers="r1c1-t22">
<p><code dir="ltr">dir_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t22 r1c2-t22">
<p>Name of the directive. All directives must be given unique names.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t22" headers="r1c1-t22">
<p><code dir="ltr">sql_id</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t22 r1c2-t22">
<p>Identifies which SQL statement to filter. A valid value contains exactly 13 characters from &#39;0&#39; to &#39;9&#39; and &#39;a&#39; to &#39;z&#39;.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t22" headers="r1c1-t22">
<p><code dir="ltr">min_active_sessions</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t22 r1c2-t22">
<p>Minimal number of active sessions for the SQL. If a SQL action has less than this number, it is filtered from the ADDM result.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t22" headers="r1c1-t22">
<p><code dir="ltr">min_response_time</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t22 r1c2-t22">
<p>Minimal value for response time of the SQL (in microseconds). If the SQL had lower response time, it is filtered from the ADDM result.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref164"></a>Examples</p>
<p>A new ADDM task is created to analyze a local instance. However, it has special treatment for SQL with id &#39;abcd123456789&#39;. The result of <code dir="ltr">GET_REPORT</code> shows only actions for that SQL (actions to tune the SQL, or to investigate application using it) if the SQL is responsible for at least 2 average active sessions during the analysis period, and the average response time was at least 1 second.</p>
<pre dir="ltr">var tname VARCHAR2(60);
BEGIN
  DBMS_ADDM.INSERT_SQL_DIRECTIVE(
      NULL,
      &#39;my SQL directive&#39;,
      &#39;abcd123456789&#39;,
      2,
      1000000); 
  :tname := &#39;my_instance_analysis_mode_task&#39;;
  DBMS_ADDM.ANALYZE_INST(:tname, 1, 2);
END;
</pre>
<p>To see a report containing all actions regardless of the directive:</p>
<pre dir="ltr">SELECT DBMS_ADVISOR.GET_TASK_REPORT(:tname, &#39;TEXT&#39;, &#39;ALL&#39;) FROM DUAL;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74984" class="refsect2"><a id="BABFHEEH"></a>
<h3 class="refsect2"><a id="sthref165"></a>REAL_TIME_ADDM_REPORT Function</h3>
<p>This function produces a real-time ADDM report for ADDM-related activity for the last five minutes. In an Oracle Real Application Clusters (Oracle RAC) environment, the function assumes that executing SQL over <code dir="ltr">GV$</code> is possible.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref166"></a>Syntax</p>
<pre dir="ltr">DBMS_ADDM.REAL_TIME_ADDM_REPORT ()
 RETURN CLOB; 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref167"></a>Return Values</p>
<p><code dir="ltr">CLOB</code> containing a real-time ADDM report</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4320">
<tr>
<td class="cellalignment4329">
<table class="cellalignment4325">
<tr>
<td class="cellalignment4324"><a href="c_ulex.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4324"><a href="d_advrwr.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4332">
<table class="cellalignment4323">
<tr>
<td class="cellalignment4324"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4324"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4324"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4324"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4324"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4324"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>