<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2357"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBMS_STATS"></a><title>DBMS_STATS</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1086"/>
<meta name="dcterms.created" content="2016-09-02T5:36:39Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"/>
<meta name="dcterms.identifier" content="E41829-07"/>
<meta name="dcterms.isVersionOf" content="ARPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="d_sqltun.htm" title="Previous" type="text/html"/>
<link rel="Next" href="d_stat_f.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41829-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">159/290</span> <!-- End Header -->
<div id="ARPLS059" class="chapter"><a id="CIHBIEII"></a>
<h1 class="chapter"><span class="secnum">155</span> DBMS_STATS</h1>
<p>With the <code dir="ltr"><a id="sthref10341"></a>DBMS_STATS</code> package you can view and modify optimizer statistics gathered for database objects.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink TGSQL" href="../TGSQL/toc.htm"><span class="italic">Oracle Database SQL Tuning Guide</span></a></div>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CIHEHDFB">Using DBMS_STATS</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Deprecated Subprograms</p>
</li>
<li>
<p>Types</p>
</li>
<li>
<p>Constants</p>
</li>
<li>
<p>Operational Notes</p>
</li>
<li>
<p>Deprecated Subprograms</p>
</li>
<li>
<p>Examples</p>
</li>
</ul>
</li>
<li>
<p><a href="#BABJDCIA">Data Structures</a></p>
</li>
<li>
<p><a href="#CIHGBFIC">Summary of DBMS_STATS Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="CIHEHDFB"></a>
<div id="ARPLS68486" class="refsect1">
<h2 class="refsect1">Using DBMS_STATS</h2>
<p>This section contains topics which relate to using the <code dir="ltr">DBMS_STATS</code> package.</p>
<ul>
<li>
<p><a href="#i1045518">Overview</a></p>
</li>
<li>
<p><a href="#CHDHIEJJ">Deprecated Subprograms</a></p>
</li>
<li>
<p><a href="#i1044358">Types</a></p>
</li>
<li>
<p><a href="#i1044359">Constants</a></p>
</li>
<li>
<p><a href="#i1044360">Operational Notes</a></p>
</li>
<li>
<p><a href="#i1049539">Deprecated Subprograms</a></p>
</li>
</ul>
<div id="ARPLS68487" class="refsect2"><a id="i1045518"></a>
<h3 class="refsect2">Overview</h3>
<p>The Oracle RDBMS allows you to collect statistics of many different kinds as an aid to improving performance. This package is concerned with optimizer statistics only. Given that Oracle sets automatic statistics collection of this kind on by default, this package is intended for only specialized cases.</p>
<p>The statistics of interest to be viewed or modified can reside in the dictionary or in a table created in the user&#39;s schema for this purpose. You can also collect and manage user-defined statistics for tables and domain indexes using this package.</p>
<p>For example, if the <code dir="ltr">DELETE_COLUMN_STATS</code> procedure is invoked on a column for which an association is defined, user-defined statistics for that column are deleted in addition to deletion of the standard statistics.</p>
<p>Only statistics stored in the dictionary have an impact on the cost-based optimizer. You can also use <code dir="ltr">DBMS_STATS</code> to gather statistics in parallel</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink TGSQL389" href="../TGSQL/tgsql_stats.htm#TGSQL389"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for more information about &#34;Managing Optimizer Statistics&#34;.</div>
</div>
<!-- class="refsect2" -->
<div id="ARPLS74989" class="refsect2"><a id="CHDHIEJJ"></a>
<h3 class="refsect2">Deprecated Subprograms</h3>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that you do not use deprecated subprograms. Support for deprecated features is for backward compatibility only.</div>
<p>The following subprogram is deprecated with Oracle Database 12<span class="italic">c</span> and later:</p>
<ul>
<li>
<p><code dir="ltr">GENERATE_STATS</code></p>
<p>This procdure is replaced by the <code dir="ltr">GATHER_INDEX_STAT</code> procedure.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1036276">&#34;GATHER_INDEX_STATS Procedure&#34;</a></div>
</li>
</ul>
</div>
<!-- class="refsect2" -->
<div id="ARPLS68488" class="refsect2"><a id="i1044358"></a>
<h3 class="refsect2">Types</h3>
<p>Types for the minimum and maximum values and histogram endpoints include:</p>
<pre dir="ltr">TYPE numarray  IS VARRAY(2050) OF NUMBER;
TYPE datearray IS VARRAY(2050) OF DATE;
TYPE chararray IS VARRAY(2050) OF VARCHAR2(4000);
TYPE rawarray  IS VARRAY(2050) OF RAW(2000);
TYPE fltarray  IS VARRAY(2050) OF BINARY_FLOAT;
TYPE dblarray  IS VARRAY(2050) OF BINARY_DOUBLE;
 
</pre>
<p>Types for listing stale tables include:</p>
<pre dir="ltr">TYPE ObjectElem IS RECORD (
  ownname     VARCHAR2(30),     -- owner
  objtype     VARCHAR2(6),      -- &#39;TABLE&#39; or &#39;INDEX&#39;
  objname     VARCHAR2(30),     -- table/index
  partname    VARCHAR2(30),     -- partition
  subpartname VARCHAR2(30));    -- subpartition
type ObjectTab is TABLE of ObjectElem;
</pre>
<p>Type for displaying statistics difference report:</p>
<pre dir="ltr">TYPE DiffRepElem IS RECORD (
 report     CLOB,              -- stats difference report
 maxdiffpct number);           -- max stats difference (percentage)
type DiffRepTab is table of DiffRepElem; 
</pre></div>
<!-- class="refsect2" -->
<div id="ARPLS68489" class="refsect2"><a id="i1044359"></a>
<h3 class="refsect2">Constants</h3>
<p>The <code dir="ltr">DBMS_STATS</code> package uses the constants shown in <a href="#CHDEBFCE">Table 155-1</a>:</p>
<div id="ARPLS68490" class="tblformal">
<p class="titleintable"><a id="sthref10342"></a><a id="CHDEBFCE"></a>Table 155-1 DBMS_STATS Constants</p>
<table class="cellalignment4330" title="DBMS_STATS Constants" summary="This table describes constants used by DBMS_STATS subprograms." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t6">Name</th>
<th class="cellalignment4328" id="r1c2-t6">Type</th>
<th class="cellalignment4328" id="r1c3-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t6" headers="r1c1-t6">
<p><code dir="ltr">ADD_GLOBAL_PREFS</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t6 r1c2-t6">
<p><code dir="ltr">NUMBER</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t6 r1c3-t6">
<p>Copies global preferences</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t6" headers="r1c1-t6">
<p><code dir="ltr">AUTO_CASCADE</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t6 r1c2-t6">
<p><code dir="ltr">BOOLEAN</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t6 r1c3-t6">
<p>Lets Oracle decide whether to collect statistics for indexes or not</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t6" headers="r1c1-t6">
<p><code dir="ltr">AUTO_DEGREE</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t6 r1c2-t6">
<p><code dir="ltr">NUMBER</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t6 r1c3-t6">
<p>Lets Oracle select the degree of parallelism based on size of the object, number of CPUs and initialization parameters</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t6" headers="r1c1-t6">
<p><code dir="ltr">AUTO_INVALIDATE</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t6 r1c2-t6">
<p><code dir="ltr">BOOLEAN</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t6 r1c3-t6">
<p>Lets Oracle decide when to invalidate dependent cursors</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t6" headers="r1c1-t6">
<p><code dir="ltr">AUTO_SAMPLE_SIZE</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t6 r1c2-t6">
<p><code dir="ltr">NUMBER</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t6 r1c3-t6">
<p>Indicates that auto-sample size algorithms should be used</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t6" headers="r1c1-t6">
<p><code dir="ltr">PURGE_ALL</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t6 r1c2-t6">
<p><code dir="ltr">TIMESTAMP WITH TIME ZONE</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t6 r1c3-t6">
<p>A flag that can be passed to the <a href="#i1047896">PURGE_STATS Procedure</a> and unconditionally deletes all the history statistics. The deletion uses <code dir="ltr">TRUNCATE</code> statements on the various dictionary statistics tables holding the history of statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t6" headers="r1c1-t6">
<p><code dir="ltr">RECLAIM_SYNOPSIS</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t6 r1c2-t6">
<p><code dir="ltr">TIMESTAMP WITH TIME ZONE</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t6 r1c3-t6">
<p>A constant used for reclaiming synopsis table space.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68491" class="refsect2"><a id="i1044360"></a>
<h3 class="refsect2">Operational Notes</h3>
<p>The <code dir="ltr">DBMS_STATS</code> subprograms perform the following general operations:</p>
<ul>
<li>
<p><a href="#i996857">Gathering Optimizer Statistics</a></p>
</li>
<li>
<p><a href="#CIHEGDBJ">Setting or Getting Statistics</a></p>
</li>
<li>
<p><a href="#i1044993">Deleting Statistics</a></p>
</li>
<li>
<p><a href="#i996835">Transferring Statistics</a></p>
</li>
<li>
<p><a href="#i1045149">Locking or Unlocking Statistics</a></p>
</li>
<li>
<p><a href="#i1045150">Restoring and Purging Statistics History</a></p>
</li>
<li>
<p><a href="#CIHGCEAA">User-Defined Statistics</a></p>
</li>
<li>
<p><a href="#BABJFHJJ">Pending Statistics</a></p>
</li>
<li>
<p><a href="#BABIIEJA">Comparing Statistics</a></p>
</li>
<li>
<p><a href="#BABDGGEE">Extended Statistics</a></p>
</li>
</ul>
<p>Most of the <code dir="ltr">DBMS_STATS</code> procedures include the three parameters <code dir="ltr">statown</code>, <code dir="ltr">stattab</code>, and <code dir="ltr">statid</code>. These parameters allow you to store statistics in your own tables (outside of the dictionary), which does not affect the optimizer. Therefore, you can maintain and experiment with <span class="italic">sets</span> of statistics.</p>
<p>The <code dir="ltr">stattab</code> parameter specifies the name of a table in which to hold statistics, and it is assumed that it resides in the same schema as the object for which statistics are collected (unless the <code dir="ltr">statown</code> parameter is specified). You can create multiple tables with different <code dir="ltr">stattab</code> identifiers to hold separate sets of statistics.</p>
<p>Additionally, you can maintain different sets of statistics within a single <code dir="ltr">stattab</code> by using the <code dir="ltr">statid</code> parameter, which avoids cluttering the user&#39;s schema.</p>
<p>For the <code dir="ltr">SET</code> and <code dir="ltr">GET</code> procedures, if <code dir="ltr">stattab</code> is not provided (that is, <code dir="ltr">NULL</code>), then the operation works directly on the dictionary statistics; therefore, you do not need to create these statistics tables if they only plan to modify the dictionary directly. However, if <code dir="ltr">stattab</code> is not <code dir="ltr">NULL</code>, then the <code dir="ltr">SET</code> or <code dir="ltr">GET</code> operation works on the specified user statistics table, and not the dictionary.</p>
<p>You can change the default values of some of the parameters of <code dir="ltr">DBMS_STATS</code> procedures using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
<p>Most of the procedures in this package commit the current transaction, perform the operation, and then commit again.</p>
<p>Most of the procedures have a parameter, <code dir="ltr">force</code> which allows you to override any lock on statistics.Whenever statistics in dictionary are modified, old versions of statistics are saved automatically for future restoring.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i996857"></a>Gathering Optimizer Statistics</p>
<p>Use the following subprograms to gather certain classes of optimizer statistics, with possible performance improvements over the <code dir="ltr">ANALYZE</code> command:</p>
<br/>
<a href="#i1036194">GATHER_DATABASE_STATS Procedures</a><br/>
<a href="#i1055451">GATHER_DICTIONARY_STATS Procedure</a><br/>
<a href="#i1039162">GATHER_FIXED_OBJECTS_STATS Procedure</a><br/>
<a href="#i1036276">GATHER_INDEX_STATS Procedure</a><br/>
<a href="#i1036456">GATHER_SCHEMA_STATS Procedures</a><br/>
<a href="#i1036401">GATHER_SYSTEM_STATS Procedure</a><br/>
<a href="#i1036461">GATHER_TABLE_STATS Procedure</a><br/>
<p>The <code dir="ltr">GATHER_*</code> procedures also collect user-defined statistics for columns and domain indexes.</p>
<p>The <code dir="ltr">statown</code>, <code dir="ltr">stattab</code>, and <code dir="ltr">statid</code> parameters instruct the package to back up current statistics in the specified table before gathering new statistics.</p>
<p>Oracle also provides the following procedure for generating statistics for derived objects when you have sufficient statistics on related objects:</p>
<p><a href="#i1036560">GENERATE_STATS Procedure</a></p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CIHEGDBJ"></a>Setting or Getting Statistics</p>
<p>Use the following subprograms to store and retrieve individual column-related, index-related, and table-related statistics:</p>
<br/>
<a href="#i1035422">PREPARE_COLUMN_VALUES Procedures</a><br/>
<a href="#i1038038">PREPARE_COLUMN_VALUES_NVARCHAR Procedure</a><br/>
<a href="#i1038039">PREPARE_COLUMN_VALUES_ROWID Procedure</a><br/>
<br/>
<a href="#i997460">SEED_COL_USAGE Procedure</a><br/>
<a href="#i997579">SET_INDEX_STATS Procedures</a><br/>
<a href="#i997707">SET_SYSTEM_STATS Procedure</a><br/>
<a href="#i997763">SET_TABLE_STATS Procedure</a><br/>
<br/>
<a href="#i1036689">GET_COLUMN_STATS Procedures</a><br/>
<a href="#i1036796">GET_INDEX_STATS Procedures</a><br/>
<a href="#i1036927">GET_SYSTEM_STATS Procedure</a><br/>
<a href="#i1037003">GET_TABLE_STATS Procedure</a><br/>
<p>In the special versions of the <code dir="ltr">SET_*_STATS</code> procedures for setting user-defined statistics, the following, if provided, are stored in the dictionary or user statistics table:</p>
<ul>
<li>
<p>User-defined statistics</p>
</li>
<li>
<p>Owner of statistics type</p>
</li>
<li>
<p>Name of statistics type</p>
</li>
</ul>
<p>The user-defined statistics and the corresponding statistics type are inserted into the <code dir="ltr">USTATS$</code> dictionary table. You can specify user-defined statistics without specifying the statistics type name.</p>
<p>The special versions of the <code dir="ltr">GET_*_STATS</code> procedures return user-defined statistics and the statistics type owner and name as <code dir="ltr">OUT</code> arguments corresponding to the schema object specified. If user-defined statistics are not collected, <code dir="ltr">NULL</code> values are returned.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i1044993"></a>Deleting Statistics</p>
<p>The <code dir="ltr">DELETE_*</code> procedures delete both user-defined statistics and the standard statistics for the given schema object.</p>
<br/>
<a href="#i1035206">DELETE_COLUMN_STATS Procedure</a><br/>
<a href="#i1035352">DELETE_DATABASE_STATS Procedure</a><br/>
<a href="#i1042571">DELETE_DICTIONARY_STATS Procedure</a><br/>
<a href="#i1039357">DELETE_FIXED_OBJECTS_STATS Procedure</a><br/>
<a href="#i1035428">DELETE_INDEX_STATS Procedure</a><br/>
<a href="#i1035494">DELETE_SCHEMA_STATS Procedure</a><br/>
<a href="#i1035583">DELETE_SYSTEM_STATS Procedure</a><br/>
<a href="#i1035962">DELETE_TABLE_STATS Procedure</a><br/>
<br/>
Note that <code dir="ltr">DELETE_TABLE_STATS</code>, <code dir="ltr">DELETE_DICTIONARY_STATS</code>, <code dir="ltr">DELETE_DATABASE_STATS</code> and <code dir="ltr">DELETE_SCHEMA_STATS</code> have a parameter <code dir="ltr">stat_category</code> which specifies which statistics to delete. The parameter accepts multiple values separated by comma. The supported values are <code dir="ltr">&#39;OBJECT_STATS&#39;</code> (table statistics, column statistics and index statistics) and<code dir="ltr">&#39;SYNOPSES&#39;</code> (auxiliary statistics created when statistics are incrementally maintained). The default is <code dir="ltr">&#39;OBJECT_STATS, SYNOPSES&#39;</code>.</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i996835"></a>Transferring Statistics</p>
<p>Use the following procedures for creating and dropping the user statistics table.</p>
<br/>
<a href="#i1035018">CREATE_STAT_TABLE Procedure</a><br/>
<a href="#i1035659">DROP_STAT_TABLE Procedure</a><br/>
<p>Use the following procedures to transfer statistics</p>
<ul>
<li>
<p>from the dictionary to a user statistics table (<code dir="ltr">EXPORT_</code>*)</p>
</li>
<li>
<p>from a user statistics table to the dictionary (<code dir="ltr">IMPORT_</code>*)</p>
</li>
</ul>
<br/>
<a href="#i1035669">EXPORT_COLUMN_STATS Procedure</a><br/>
<a href="#i1041371">EXPORT_DATABASE_STATS Procedure</a><br/>
<a href="#i1042811">EXPORT_DICTIONARY_STATS Procedure</a><br/>
<a href="#i1041507">EXPORT_FIXED_OBJECTS_STATS Procedure</a><br/>
<a href="#i1041496">EXPORT_INDEX_STATS Procedure</a><br/>
<a href="#i1036059">EXPORT_SCHEMA_STATS Procedure</a><br/>
<a href="#i1035776">EXPORT_SYSTEM_STATS Procedure</a><br/>
<a href="#i1035814">EXPORT_TABLE_STATS Procedure</a><br/>
<br/>
<a href="#i1037153">IMPORT_COLUMN_STATS Procedure</a><br/>
<a href="#i1037134">IMPORT_DATABASE_STATS Procedure</a><br/>
<a href="#i1043013">IMPORT_DICTIONARY_STATS Procedure</a><br/>
<a href="#i1041649">IMPORT_FIXED_OBJECTS_STATS Procedure</a><br/>
<a href="#i1037276">IMPORT_INDEX_STATS Procedure</a><br/>
<a href="#i1037487">IMPORT_SCHEMA_STATS Procedure</a><br/>
<a href="#i1037380">IMPORT_SYSTEM_STATS Procedure</a><br/>
<a href="#i1037419">IMPORT_TABLE_STATS Procedure</a></div>
<!-- class="refsubsect" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle does not support export or import of statistics across databases of different character sets.</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i1045149"></a>Locking or Unlocking Statistics</p>
<p>Use the following procedures to lock and unlock statistics on objects.</p>
<br/>
<a href="#BABFJDFA">LOCK_PARTITION_STATS Procedure</a><br/>
<a href="#i1043184">LOCK_SCHEMA_STATS Procedure</a><br/>
<a href="#i1043993">LOCK_TABLE_STATS Procedure</a><br/>
<br/>
<a href="#BABDDHJI">UNLOCK_PARTITION_STATS Procedure</a><br/>
<a href="#i1043314">UNLOCK_SCHEMA_STATS Procedure</a><br/>
<a href="#i1040393">UNLOCK_TABLE_STATS Procedure</a><br/>
<p>The <code dir="ltr">LOCK_*</code> procedures either freeze the current set of the statistics or to keep the statistics untouched.When statistics on a table are locked, all the statistics depending on the table, including table statistics, column statistics, histograms and statistics on all dependent indexes, are considered to be locked.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i1045150"></a>Restoring and Purging Statistics History</p>
<p>Use the following procedures to restore statistics as of a specified timestamp. This is useful in case newly collected statistics leads to some sub-optimal execution plans and the administrator wants to revert to the previous set of statistics.</p>
<br/>
<a href="#i1047505">RESET_GLOBAL_PREF_DEFAULTS Procedure</a><br/>
<a href="#BABJBFAA">RESTORE_DATABASE_STATS Procedure</a><br/>
<a href="#i1047724">RESTORE_DICTIONARY_STATS Procedure</a><br/>
<a href="#i1047603">RESTORE_FIXED_OBJECTS_STATS Procedure</a><br/>
<a href="#i1047376">RESTORE_SCHEMA_STATS Procedure</a><br/>
<a href="#i1049804">RESTORE_SYSTEM_STATS Procedure</a><br/>
<a href="#i1046561">RESTORE_TABLE_STATS Procedure</a><br/>
<p>Whenever statistics in dictionary are modified, old versions of statistics are saved automatically for future restoring. The old statistics are purged automatically at regular intervals based on the statistics history retention setting and the time of recent statistics gathering performed in the system. Retention is configurable using the <a href="#i1048060">ALTER_STATS_HISTORY_RETENTION Procedure</a>.</p>
<p>The other <code dir="ltr">DBMS_STATS</code> procedures related to restoring statistics are:</p>
<ul>
<li>
<p><a href="#i1047896">PURGE_STATS Procedure</a>: This procedure lets you manually purge old versions beyond a time stamp.</p>
</li>
<li>
<p><a href="#i1048205">GET_STATS_HISTORY_RETENTION Function</a>: This function gets the current statistics history retention value.</p>
</li>
<li>
<p><a href="#i1050595">GET_STATS_HISTORY_AVAILABILITY Function</a>: This function gets the oldest time stamp where statistics history is available. Users cannot restore statistics to a time stamp older than the oldest time stamp.</p>
</li>
</ul>
<p><code dir="ltr">RESTORE_*</code> operations are not supported for user defined statistics.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CIHGCEAA"></a>User-Defined Statistics</p>
<p>The <code dir="ltr">DBMS_STATS</code> package supports operations on user-defined statistics. When a domain index or column is associated with a statistics type (using the <code dir="ltr">associate</code> statement), operations on the index or column manipulate user-defined statistics. For example, gathering statistics for a domain index (for which an association with a statistics type exists) using the <a href="#i1036796">GET_INDEX_STATS Procedures</a> invokes the user-defined statistics collection method of the associated statistics type. Similarly, delete, transfer, import, and export operations manipulate user-defined statistics.</p>
<p><code dir="ltr">SET_*</code> and <code dir="ltr">GET_*</code> operations for user-defined statistics are also supported using a special version of the <code dir="ltr">SET</code> and <code dir="ltr">GET</code> interfaces for columns and indexes.</p>
<p><code dir="ltr">EXPORT_*</code>, <code dir="ltr">IMPORT_*</code> and <code dir="ltr">RESTORE_*</code> operations are not supported for user defined statistics.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABJFHJJ"></a>Pending Statistics</p>
<p>The package gathers statistics and stores it in the dictionary by default. User&#39;s can store these statistics in the system&#39;s private area instead of the dictionary by turning the <code dir="ltr">PUBLISH</code> option to <code dir="ltr">FALSE</code> using the <code dir="ltr">SET*PREFS</code> procedures. The default value for <code dir="ltr">PUBLISH</code> is <code dir="ltr">TRUE</code>.The statistics stored in private area are not used by Cost Based Optimizer unless parameter <code dir="ltr">optimizer_use_pending_statistics</code> is set to <code dir="ltr">TRUE</code>. The default value of this parameter is <code dir="ltr">FALSE</code> and this boolean parameter can be set at the session/system level. Users can verify the impact of the new statistics on query plans by using the pending statistics on a session.</p>
<p>Pending statistics provide a mechanism to verify the impact of the new statistics on query plans before making them available for general use. There are two scenarios to verify the query plans:</p>
<ul>
<li>
<p>Export the pending statistics (use the <a href="#BEIEBEAE">EXPORT_PENDING_STATS Procedure</a>) to a test system, then run the query workload and check the performance or plans.</p>
</li>
<li>
<p>Set <code dir="ltr">optimizer_use_pending_statistics</code> to <code dir="ltr">TRUE</code> in a session on the system where pending statistics have been gathered, run the workload, and check the performance or plans.</p>
</li>
</ul>
<p>Once the performance or query plans have been verified, the pending statistics can be published (run the <a href="#BEIDCHEJ">PUBLISH_PENDING_STATS Procedure</a>) if the performance is acceptable or delete (run the <a href="#BEIJGHFD">DELETE_PENDING_STATS Procedure</a>) if not.</p>
<p>Pending statistics can be published, exported, or deleted. The following procedures are provided to manage pending statistics:</p>
<ul>
<li>
<p><a href="#BEIJGHFD">DELETE_PENDING_STATS Procedure</a></p>
</li>
<li>
<p><a href="#BEIEBEAE">EXPORT_PENDING_STATS Procedure</a></p>
</li>
<li>
<p><a href="#BEIDCHEJ">PUBLISH_PENDING_STATS Procedure</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABIIEJA"></a>Comparing Statistics</p>
<p>The <code dir="ltr">DIFF_TABLE_STATS_</code>* statistics can be used to compare statistics for a table from two different sources. The statistics can be from:</p>
<ul>
<li>
<p>two different user statistics tables</p>
</li>
<li>
<p>a single user statistics table containing two sets of statistics that can be identified using <code dir="ltr">statids</code></p>
</li>
<li>
<p>a user statistics table and dictionary history</p>
</li>
<li>
<p>pending statistics</p>
</li>
</ul>
<p>The functions also compare the statistics of the dependent objects (indexes, columns, partitions). They displays statistics of the object(s) from both sources if the difference between those statistics exceeds a certain threshold. The threshold can be specified as an argument to the function, with a default of 10%. The statistics corresponding to the first source (<code dir="ltr">stattab1</code> or <code dir="ltr">time1</code>) will be used as basis for computing the differential percentage.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABDGGEE"></a>Extended Statistics</p>
<p>This package allows you to collect statistics for column groups and expressions. The statistics collected for column groups and expressions are called &#34;extended statistics&#34;.</p>
<p>Statistics on column groups are used by optimizer for accounting correlation between columns. For example, if a query has predicates c1=1 and c2=1 and if there are statistics on column group (c1, c2), the optimizer will use this statistics for estimating the combined selectivity of the predicates.The expression statistics are used by optimizer for estimating selectivity of predicates on those expressions. The extended statistics are similar to column statistics and the procedures that take columns names will accept extended statistics names in place of column names.</p>
<p>Related subprograms:</p>
<ul>
<li>
<p><a href="#BABHFIBI">CREATE_EXTENDED_STATS Function</a></p>
</li>
<li>
<p><a href="#BABEAECF">DROP_EXTENDED_STATS Procedure</a></p>
</li>
<li>
<p><a href="#BABCIFCJ">SHOW_EXTENDED_STATS_NAME Function</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68492" class="refsect2"><a id="i1049539"></a>
<h3 class="refsect2">Deprecated Subprograms</h3>
<p>The following subprograms are obsolete with Oracle Database 11<span class="italic">g</span> Release 2 (11.2):</p>
<ul>
<li>
<p><a href="#i1048775">GET_PARAM Function</a></p>
<p>Instead, use <a href="#BEICCEDB">GET_PREFS Function</a></p>
</li>
<li>
<p><a href="#i1048566">SET_PARAM Procedure</a></p>
<p>Instead, use <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a></p>
</li>
<li>
<p><a href="#BABGHFFF">RESET_PARAM_DEFAULTS Procedure</a></p>
<p>Instead use <a href="#i1047505">RESET_GLOBAL_PREF_DEFAULTS Procedure</a></p>
</li>
</ul>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="BABJDCIA"></a>
<div id="ARPLS74850" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Data Structures</h2>
<p>The <code dir="ltr">DBMS_STATS</code> package defines a <code dir="ltr">RECORD</code> type.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10343"></a>RECORD Types</p>
<ul>
<li>
<p><a href="#BABDCFJD">STAT_REC Record Type</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div id="ARPLS74851" class="refsect2"><a id="BABDCFJD"></a>
<h3 class="refsect2">STAT_REC Record Type</h3>
<p>This record type is provided for users in case they want to set column statistics manually. Its fields allow specifying column min/max values, as well as a histogram for a column.</p>
<div id="ARPLS74852" class="refsect3"><a id="sthref10344"></a>
<h4 class="refsect3">Syntax</h4>
<pre dir="ltr">TYPE STATREC IS RECORD (
  epc    NUMBER,
  minval RAW(2000),
  maxval RAW(2000),
  bkvals NUMARRAY,
  novals NUMARRAY,
  chvals CHARARRAY,
  eavals RAWARRAY,
  rpcnts NUMARRAY,
  eavs   NUMBER);
</pre></div>
<!-- class="refsect3" -->
<div id="ARPLS74853" class="refsect3"><a id="sthref10345"></a>
<h4 class="refsect3">Fields</h4>
<div id="ARPLS74854" class="tblformal">
<p class="titleintable"><a id="sthref10346"></a><a id="sthref10347"></a>Table 155-2 STAT_REC Attributes</p>
<table class="cellalignment4330" title="STAT_REC Attributes" summary="This table describes the fields of the Record type COMPARISON_TYPE and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t8">Field</th>
<th class="cellalignment4328" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t8" headers="r1c1-t8">
<p><code dir="ltr">epc</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t8 r1c2-t8">
<p>Number of buckets in histogram</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t8" headers="r1c1-t8">
<p><code dir="ltr">minval</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t8 r1c2-t8">
<p>Minimum value</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t8" headers="r1c1-t8">
<p><code dir="ltr">maxval</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t8 r1c2-t8">
<p>Maximum value</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t8" headers="r1c1-t8">
<p><code dir="ltr">bkvals</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t8 r1c2-t8">
<p>Array of bucket numbers</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t8" headers="r1c1-t8">
<p><code dir="ltr">novals</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t8 r1c2-t8">
<p>Array of normalized end point values</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t8" headers="r1c1-t8">
<p><code dir="ltr">chvals</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t8 r1c2-t8">
<p>Array of dumped end point values</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t8" headers="r1c1-t8">
<p><code dir="ltr">eavals</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t8 r1c2-t8">
<p>Array of end point actual values</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t8" headers="r1c1-t8">
<p><code dir="ltr">rpcnts</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t8 r1c2-t8">
<p>Array of end point value frequencies</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t8" headers="r1c1-t8">
<p><code dir="ltr">eavs</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t8 r1c2-t8">
<p>A number indicating whether actual end point values are needed in the histogram. If using the <a href="#i1035422">PREPARE_COLUMN_VALUES Procedures</a>, this field will be automatically filled.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="CIHGBFIC"></a>
<div id="ARPLS68494" class="refsect1">
<h2 class="refsect1">Summary of DBMS_STATS Subprograms</h2>
<div id="ARPLS68495" class="tblformal">
<p class="titleintable"><a id="sthref10348"></a><a id="sthref10349"></a>Table 155-3 <span class="bolditalic">DBMS_STATS Package Subprograms</span></p>
<table class="cellalignment4330" title="DBMS_STATS Package Subprograms" summary="This table lists the DBMS_STATS subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t9">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t9" headers="r1c1-t9">
<p><a href="#i1048060">ALTER_STATS_HISTORY_RETENTION Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t9 r1c2-t9">
<p>Changes the statistics history retention value</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t9" headers="r1c1-t9">
<p><a href="#i1035014">CONVERT_RAW_VALUE Procedures</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t9 r1c2-t9">
<p>Converts the internal representation of a minimum value, maximum value, or histogram endpoint actual value into a datatype-specific value</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t9" headers="r1c1-t9">
<p><a href="#i1038351">CONVERT_RAW_VALUE_NVARCHAR Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t9 r1c2-t9">
<p>Converts the internal representation of a minimum value, maximum value, or histogram endpoint actual value into a datatype-specific value</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t9" headers="r1c1-t9">
<p><a href="#i1038352">CONVERT_RAW_VALUE_ROWID Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r5c1-t9 r1c2-t9">
<p>Converts the internal representation of a minimum value, maximum value, or histogram endpoint actual value into a datatype-specific value</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t9" headers="r1c1-t9">
<p><a href="#BABDDBGH">COPY_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r6c1-t9 r1c2-t9">
<p>Copies the statistics of the source [sub] partition to the destination [sub] partition after scaling</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t9" headers="r1c1-t9">
<p><a href="#BABHFIBI">CREATE_EXTENDED_STATS Function</a></p>
</td>
<td class="cellalignment4329" headers="r7c1-t9 r1c2-t9">
<p>Creates a virtual column for a user specified column group or an expression in a table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t9" headers="r1c1-t9">
<p><a href="#i1035018">CREATE_STAT_TABLE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r8c1-t9 r1c2-t9">
<p>Creates a table with name <code dir="ltr">stattab</code> in <code dir="ltr">ownname</code>&#39;s schema which is capable of holding statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t9" headers="r1c1-t9">
<p><a href="#i1035206">DELETE_COLUMN_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r9c1-t9 r1c2-t9">
<p>Deletes column-related statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t9" headers="r1c1-t9">
<p><a href="#BEIHGEBD">DELETE_DATABASE_PREFS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r10c1-t9 r1c2-t9">
<p>Deletes the statistics preferences of all the tables</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t9" headers="r1c1-t9">
<p><a href="#i1035352">DELETE_DATABASE_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r11c1-t9 r1c2-t9">
<p>Deletes statistics for the entire database</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t9" headers="r1c1-t9">
<p><a href="#i1042571">DELETE_DICTIONARY_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r12c1-t9 r1c2-t9">
<p>Deletes statistics for all dictionary schemas (&#39;<code dir="ltr">SYS</code>&#39;, &#39;<code dir="ltr">SYSTEM</code>&#39; and RDBMS component schemas)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t9" headers="r1c1-t9">
<p><a href="#i1039357">DELETE_FIXED_OBJECTS_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r13c1-t9 r1c2-t9">
<p>Deletes statistics of all fixed tables</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t9" headers="r1c1-t9">
<p><a href="#i1035428">DELETE_INDEX_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r14c1-t9 r1c2-t9">
<p>Deletes index-related statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t9" headers="r1c1-t9">
<p><a href="#BEIJGHFD">DELETE_PENDING_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r15c1-t9 r1c2-t9">
<p>Deletes the private statistics that have been collected but have not been published</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t9" headers="r1c1-t9">
<p><a href="#BABDCJDJ">DELETE_PROCESSING_RATE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r16c1-t9 r1c2-t9">
<p>Deletes the processing rate of a given statistics source. If the source is not specified, it deletes the statistics of all the sources</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t9" headers="r1c1-t9">
<p><a href="#BEIFAGDH">DELETE_SCHEMA_PREFS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r17c1-t9 r1c2-t9">
<p>Deletes the statistics preferences of all the tables owned by the specified owner name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t9" headers="r1c1-t9">
<p><a href="#i1035494">DELETE_SCHEMA_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r18c1-t9 r1c2-t9">
<p>Deletes schema-related statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r19c1-t9" headers="r1c1-t9">
<p><a href="#i1035583">DELETE_SYSTEM_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r19c1-t9 r1c2-t9">
<p>Deletes system statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r20c1-t9" headers="r1c1-t9">
<p><a href="#BEIEGCHI">DELETE_TABLE_PREFS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r20c1-t9 r1c2-t9">
<p>Deletes statistics preferences of the specified table in the specified schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r21c1-t9" headers="r1c1-t9">
<p><a href="#i1035962">DELETE_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r21c1-t9 r1c2-t9">
<p>Deletes table-related statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r22c1-t9" headers="r1c1-t9">
<p><a href="#BEIDHICC">DIFF_TABLE_STATS_IN_HISTORY Function</a></p>
</td>
<td class="cellalignment4329" headers="r22c1-t9 r1c2-t9">
<p>Compares statistics for a table from two timestamps in past and compare the statistics as of that timestamps</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r23c1-t9" headers="r1c1-t9">
<p><a href="#BABCBGHG">DIFF_TABLE_STATS_IN_PENDING Function</a></p>
</td>
<td class="cellalignment4329" headers="r23c1-t9 r1c2-t9">
<p>Compares pending statistics and statistics as of a timestamp or statistics from dictionary</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r24c1-t9" headers="r1c1-t9">
<p><a href="#BEICGJDD">DIFF_TABLE_STATS_IN_STATTAB Function</a></p>
</td>
<td class="cellalignment4329" headers="r24c1-t9 r1c2-t9">
<p>Compares statistics for a table from two different sources</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r25c1-t9" headers="r1c1-t9">
<p><a href="#BABEAECF">DROP_EXTENDED_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r25c1-t9 r1c2-t9">
<p>Drops the statistics entry that is created for the user specified extension</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r26c1-t9" headers="r1c1-t9">
<p><a href="#i1035659">DROP_STAT_TABLE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r26c1-t9 r1c2-t9">
<p>Drops a user statistics table created by <code dir="ltr">CREATE_STAT_TABLE</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r27c1-t9" headers="r1c1-t9">
<p><a href="#i1035669">EXPORT_COLUMN_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r27c1-t9 r1c2-t9">
<p>Retrieves statistics for a particular column and stores them in the user statistics table identified by <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r28c1-t9" headers="r1c1-t9">
<p><a href="#BEIDACAE">EXPORT_DATABASE_PREFS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r28c1-t9 r1c2-t9">
<p>Exports the statistics preferences of all the tables</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r29c1-t9" headers="r1c1-t9">
<p><a href="#i1041371">EXPORT_DATABASE_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r29c1-t9 r1c2-t9">
<p>Retrieves statistics for all objects in the database and stores them in the user statistics table identified by <code dir="ltr">statown</code>.<code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r30c1-t9" headers="r1c1-t9">
<p><a href="#i1042811">EXPORT_DICTIONARY_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r30c1-t9 r1c2-t9">
<p>Retrieves statistics for all dictionary schemas (&#39;<code dir="ltr">SYS</code>&#39;, &#39;<code dir="ltr">SYSTEM</code>&#39; and RDBMS component schemas) and stores them in the user statistics table identified by <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r31c1-t9" headers="r1c1-t9">
<p><a href="#i1041507">EXPORT_FIXED_OBJECTS_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r31c1-t9 r1c2-t9">
<p>Retrieves statistics for fixed tables and stores them in the user statistics table identified by <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r32c1-t9" headers="r1c1-t9">
<p><a href="#i1041496">EXPORT_INDEX_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r32c1-t9 r1c2-t9">
<p>Retrieves statistics for a particular index and stores them in the user statistics table identified by <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r33c1-t9" headers="r1c1-t9">
<p><a href="#BEIEBEAE">EXPORT_PENDING_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r33c1-t9 r1c2-t9">
<p>Exports the statistics gathered and stored as pending</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r34c1-t9" headers="r1c1-t9">
<p><a href="#BEIFJJDF">EXPORT_SCHEMA_PREFS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r34c1-t9 r1c2-t9">
<p>Exports the statistics preferences of all the tables owned by the specified owner name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r35c1-t9" headers="r1c1-t9">
<p><a href="#i1036059">EXPORT_SCHEMA_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r35c1-t9 r1c2-t9">
<p>Retrieves statistics for all objects in the schema identified by <code dir="ltr">ownname</code> and stores them in the user statistics table identified by <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r36c1-t9" headers="r1c1-t9">
<p><a href="#i1035776">EXPORT_SYSTEM_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r36c1-t9 r1c2-t9">
<p>Retrieves system statistics and stores them in the user statistics table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r37c1-t9" headers="r1c1-t9">
<p><a href="#BEIBGBHF">EXPORT_TABLE_PREFS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r37c1-t9 r1c2-t9">
<p>Exports statistics preferences of the specified table in the specified schema into the specified statistics table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r38c1-t9" headers="r1c1-t9">
<p><a href="#i1035814">EXPORT_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r38c1-t9 r1c2-t9">
<p>Retrieves statistics for a particular table and stores them in the user statistics table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r39c1-t9" headers="r1c1-t9">
<p><a href="#i1036624">FLUSH_DATABASE_MONITORING_INFO Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r39c1-t9 r1c2-t9">
<p>Flushes in-memory monitoring information for all the tables to the dictionary</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r40c1-t9" headers="r1c1-t9">
<p><a href="#i1036194">GATHER_DATABASE_STATS Procedures</a></p>
</td>
<td class="cellalignment4329" headers="r40c1-t9 r1c2-t9">
<p>Gathers statistics for all objects in the database</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r41c1-t9" headers="r1c1-t9">
<p><a href="#i1055451">GATHER_DICTIONARY_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r41c1-t9 r1c2-t9">
<p>Gathers statistics for dictionary schemas &#39;<code dir="ltr">SYS</code>&#39;, &#39;<code dir="ltr">SYSTEM</code>&#39; and schemas of RDBMS components</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r42c1-t9" headers="r1c1-t9">
<p><a href="#i1039162">GATHER_FIXED_OBJECTS_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r42c1-t9 r1c2-t9">
<p>Gathers statistics of fixed objects</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r43c1-t9" headers="r1c1-t9">
<p><a href="#i1036276">GATHER_INDEX_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r43c1-t9 r1c2-t9">
<p>Gathers index statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r44c1-t9" headers="r1c1-t9">
<p><a href="#BABFEFDF">GATHER_PROCESSING_RATE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r44c1-t9 r1c2-t9">
<p>Starts the job of gathering the processing rates which end after <code dir="ltr">interval</code> defined in minutes</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r45c1-t9" headers="r1c1-t9">
<p><a href="#i1036456">GATHER_SCHEMA_STATS Procedures</a></p>
</td>
<td class="cellalignment4329" headers="r45c1-t9 r1c2-t9">
<p>Gathers statistics for all objects in a schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r46c1-t9" headers="r1c1-t9">
<p><a href="#i1036401">GATHER_SYSTEM_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r46c1-t9 r1c2-t9">
<p>Gathers system statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r47c1-t9" headers="r1c1-t9">
<p><a href="#i1036461">GATHER_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r47c1-t9 r1c2-t9">
<p>Gathers table and column (and index) statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r48c1-t9" headers="r1c1-t9">
<p><a href="#i1036560">GENERATE_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r48c1-t9 r1c2-t9">
<p>Generates object statistics from previously collected statistics of related objects</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r49c1-t9" headers="r1c1-t9">
<p><a href="#i1036689">GET_COLUMN_STATS Procedures</a></p>
</td>
<td class="cellalignment4329" headers="r49c1-t9 r1c2-t9">
<p>Gets all column-related information</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r50c1-t9" headers="r1c1-t9">
<p><a href="#i1036796">GET_INDEX_STATS Procedures</a></p>
</td>
<td class="cellalignment4329" headers="r50c1-t9 r1c2-t9">
<p>Gets all index-related information</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r51c1-t9" headers="r1c1-t9">
<p><a href="#i1048775">GET_PARAM Function</a></p>
</td>
<td class="cellalignment4329" headers="r51c1-t9 r1c2-t9">
<p>Gets the default value of parameters of <code dir="ltr">DBMS_STATS</code> procedures [see <a href="#i1049539">Deprecated Subprograms</a> ]</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r52c1-t9" headers="r1c1-t9">
<p><a href="#BEICCEDB">GET_PREFS Function</a></p>
</td>
<td class="cellalignment4329" headers="r52c1-t9 r1c2-t9">
<p>Gets the default value of the specified preference</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r53c1-t9" headers="r1c1-t9">
<p><a href="#i1050595">GET_STATS_HISTORY_AVAILABILITY Function</a></p>
</td>
<td class="cellalignment4329" headers="r53c1-t9 r1c2-t9">
<p>Gets the oldest timestamp where statistics history is available</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r54c1-t9" headers="r1c1-t9">
<p><a href="#i1048205">GET_STATS_HISTORY_RETENTION Function</a></p>
</td>
<td class="cellalignment4329" headers="r54c1-t9 r1c2-t9">
<p>Returns the current statistics history retention value</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r55c1-t9" headers="r1c1-t9">
<p><a href="#i1036927">GET_SYSTEM_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r55c1-t9 r1c2-t9">
<p>Gets system statistics from <code dir="ltr">stattab</code>, or from the dictionary if <code dir="ltr">stattab</code> is <code dir="ltr">NULL</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r56c1-t9" headers="r1c1-t9">
<p><a href="#i1037003">GET_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r56c1-t9 r1c2-t9">
<p>Gets all table-related information</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r57c1-t9" headers="r1c1-t9">
<p><a href="#i1037153">IMPORT_COLUMN_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r57c1-t9 r1c2-t9">
<p>Retrieves statistics for a particular column from the user statistics table identified by <code dir="ltr">stattab</code> and stores them in the dictionary</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r58c1-t9" headers="r1c1-t9">
<p><a href="#BEIGFDAI">IMPORT_DATABASE_PREFS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r58c1-t9 r1c2-t9">
<p>Imports the statistics preferences of all the tables</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r59c1-t9" headers="r1c1-t9">
<p><a href="#i1037134">IMPORT_DATABASE_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r59c1-t9 r1c2-t9">
<p>Retrieves statistics for all objects in the database from the user statistics table and stores them in the dictionary</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r60c1-t9" headers="r1c1-t9">
<p><a href="#i1043013">IMPORT_DICTIONARY_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r60c1-t9 r1c2-t9">
<p>Retrieves statistics for all dictionary schemas (&#39;<code dir="ltr">SYS</code>&#39;, &#39;<code dir="ltr">SYSTEM</code>&#39; and RDBMS component schemas) from the user statistics table and stores them in the dictionary</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r61c1-t9" headers="r1c1-t9">
<p><a href="#i1041649">IMPORT_FIXED_OBJECTS_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r61c1-t9 r1c2-t9">
<p>Retrieves statistics for fixed tables from the user statistics table identified by <code dir="ltr">stattab</code> and stores them in the dictionary</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r62c1-t9" headers="r1c1-t9">
<p><a href="#i1037276">IMPORT_INDEX_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r62c1-t9 r1c2-t9">
<p>Retrieves statistics for a particular index from the user statistics table identified by <code dir="ltr">stattab</code> and stores them in the dictionary</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r63c1-t9" headers="r1c1-t9">
<p><a href="#BEIHBJBH">IMPORT_SCHEMA_PREFS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r63c1-t9 r1c2-t9">
<p>Imports the statistics preferences of all the tables owned by the specified owner name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r64c1-t9" headers="r1c1-t9">
<p><a href="#i1037487">IMPORT_SCHEMA_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r64c1-t9 r1c2-t9">
<p>Retrieves statistics for all objects in the schema identified by <code dir="ltr">ownname</code> from the user statistics table and stores them in the dictionary</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r65c1-t9" headers="r1c1-t9">
<p><a href="#i1037380">IMPORT_SYSTEM_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r65c1-t9 r1c2-t9">
<p>Retrieves system statistics from the user statistics table and stores them in the dictionary</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r66c1-t9" headers="r1c1-t9">
<p><a href="#BEIDGEFG">IMPORT_TABLE_PREFS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r66c1-t9 r1c2-t9">
<p>Sets the statistics preferences of the specified table in the specified schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r67c1-t9" headers="r1c1-t9">
<p><a href="#i1037419">IMPORT_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r67c1-t9 r1c2-t9">
<p>Retrieves statistics for a particular table from the user statistics table identified by <code dir="ltr">stattab</code> and stores them in the dictionary</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r68c1-t9" headers="r1c1-t9">
<p><a href="#BABFJDFA">LOCK_PARTITION_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r68c1-t9 r1c2-t9">
<p>Locks statistics for a partition</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r69c1-t9" headers="r1c1-t9">
<p><a href="#i1043184">LOCK_SCHEMA_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r69c1-t9 r1c2-t9">
<p>Locks the statistics of all tables of a schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r70c1-t9" headers="r1c1-t9">
<p><a href="#i1043993">LOCK_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r70c1-t9 r1c2-t9">
<p>Locks the statistics on the table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r71c1-t9" headers="r1c1-t9">
<p><a href="#CHDEJICB">MERGE_COL_USAGE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r71c1-t9 r1c2-t9">
<p>Merges column usage information from a source database, by means of a <code dir="ltr">dblink</code>, into the local database</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r72c1-t9" headers="r1c1-t9">
<p><a href="#i1035422">PREPARE_COLUMN_VALUES Procedures</a></p>
</td>
<td class="cellalignment4329" headers="r72c1-t9 r1c2-t9">
<p>Converts user-specified minimum, maximum, and histogram endpoint datatype-specific values into Oracle&#39;s internal representation for future storage using the <a href="#i997460">SEED_COL_USAGE Procedure</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r73c1-t9" headers="r1c1-t9">
<p><a href="#i1038038">PREPARE_COLUMN_VALUES_NVARCHAR Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r73c1-t9 r1c2-t9">
<p>Converts user-specified minimum, maximum, and histogram endpoint datatype-specific values into Oracle&#39;s internal representation for future storage using the <a href="#i997460">SEED_COL_USAGE Procedure</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r74c1-t9" headers="r1c1-t9">
<p><a href="#i1038039">PREPARE_COLUMN_VALUES_ROWID Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r74c1-t9 r1c2-t9">
<p>Converts user-specified minimum, maximum, and histogram endpoint datatype-specific values into Oracle&#39;s internal representation for future storage using the <a href="#i997460">SEED_COL_USAGE Procedure</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r75c1-t9" headers="r1c1-t9">
<p><a href="#BEIDCHEJ">PUBLISH_PENDING_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r75c1-t9 r1c2-t9">
<p>Publishes the statistics gathered and stored as pending</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r76c1-t9" headers="r1c1-t9">
<p><a href="#i1047896">PURGE_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r76c1-t9 r1c2-t9">
<p>Purges old versions of statistics saved in the dictionary</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r77c1-t9" headers="r1c1-t9">
<p><a href="#BABDGICG">REMAP_STAT_TABLE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r77c1-t9 r1c2-t9">
<p>Remaps the names of objects in the user statistics table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r78c1-t9" headers="r1c1-t9">
<p><a href="#BABCDEBI">REPORT_COL_USAGE Function</a></p>
</td>
<td class="cellalignment4329" headers="r78c1-t9 r1c2-t9">
<p>Reports the recorded column (group) usage information</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r79c1-t9" headers="r1c1-t9">
<p><a href="#BABDABJG">REPORT_GATHER_AUTO_STATS Function</a></p>
</td>
<td class="cellalignment4329" headers="r79c1-t9 r1c2-t9">
<p>Runs the auto statistics gathering job in reporting mode</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r80c1-t9" headers="r1c1-t9">
<p><a href="#BABBEHEC">REPORT_GATHER_DATABASE_STATS Functions</a></p>
</td>
<td class="cellalignment4329" headers="r80c1-t9 r1c2-t9">
<p>Runs the <a href="#i1036194">GATHER_DATABASE_STATS Procedures</a> in reporting mode.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r81c1-t9" headers="r1c1-t9">
<p><a href="#BABEDECI">REPORT_GATHER_DICTIONARY_STATS Functions</a></p>
</td>
<td class="cellalignment4329" headers="r81c1-t9 r1c2-t9">
<p>Runs the <a href="#i1055451">GATHER_DICTIONARY_STATS Procedure</a> in reporting mode</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r82c1-t9" headers="r1c1-t9">
<p><a href="#BABCAJGD">REPORT_GATHER_FIXED_OBJ_STATS Function</a></p>
</td>
<td class="cellalignment4329" headers="r82c1-t9 r1c2-t9">
<p>Runs the <a href="#i1039162">GATHER_FIXED_OBJECTS_STATS Procedure</a> in reporting mode</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r83c1-t9" headers="r1c1-t9">
<p><a href="#BABFCCIG">REPORT_GATHER_SCHEMA_STATS Functions</a></p>
</td>
<td class="cellalignment4329" headers="r83c1-t9 r1c2-t9">
<p>Runs the <a href="#i1036456">GATHER_SCHEMA_STATS Procedures</a> in reporting mode</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r84c1-t9" headers="r1c1-t9">
<p><a href="#BABFHCEC">REPORT_GATHER_TABLE_STATS Function</a></p>
</td>
<td class="cellalignment4329" headers="r84c1-t9 r1c2-t9">
<p>Runs the <a href="#i1036461">GATHER_TABLE_STATS Procedure</a> in reporting mode</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r85c1-t9" headers="r1c1-t9">
<p><a href="#BABJDEBB">REPORT_SINGLE_STATS_OPERATION Function</a></p>
</td>
<td class="cellalignment4329" headers="r85c1-t9 r1c2-t9">
<p>Generates a report for the provided operation optionally in a particular pluggable database (PDB) in a multitenant environment</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r86c1-t9" headers="r1c1-t9">
<p><a href="#BABFABBC">REPORT_STATS_OPERATIONS Function</a></p>
</td>
<td class="cellalignment4329" headers="r86c1-t9 r1c2-t9">
<p>Generates a report of all statistics operations that take place between two timestamps which may or may not have been provided</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r87c1-t9" headers="r1c1-t9">
<p><a href="#i1047505">RESET_GLOBAL_PREF_DEFAULTS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r87c1-t9 r1c2-t9">
<p>Resets the default values of all parameters to Oracle recommended values</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r88c1-t9" headers="r1c1-t9">
<p><a href="#BABGHFFF">RESET_PARAM_DEFAULTS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r88c1-t9 r1c2-t9">
<p>Resets global preferences to default values [see <a href="#i1049539">Deprecated Subprograms</a> ]</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r89c1-t9" headers="r1c1-t9">
<p><a href="#i1047724">RESTORE_DICTIONARY_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r89c1-t9 r1c2-t9">
<p>Restores statistics of all dictionary tables (tables of &#39;<code dir="ltr">SYS</code>&#39;, &#39;<code dir="ltr">SYSTEM</code>&#39; and RDBMS component schemas) as of a specified timestamp</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r90c1-t9" headers="r1c1-t9">
<p><a href="#i1047603">RESTORE_FIXED_OBJECTS_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r90c1-t9 r1c2-t9">
<p>Restores statistics of all fixed tables as of a specified timestamp</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r91c1-t9" headers="r1c1-t9">
<p><a href="#i1047376">RESTORE_SCHEMA_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r91c1-t9 r1c2-t9">
<p>Restores statistics of all tables of a schema as of a specified timestamp</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r92c1-t9" headers="r1c1-t9">
<p><a href="#i1049804">RESTORE_SYSTEM_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r92c1-t9 r1c2-t9">
<p>Restores statistics of all tables of a schema as of a specified timestamp</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r93c1-t9" headers="r1c1-t9">
<p><a href="#i1046561">RESTORE_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r93c1-t9 r1c2-t9">
<p>Restores statistics of a table as of a specified timestamp (<code dir="ltr">as_of_timestamp</code>), as well as statistics of associated indexes and columns</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r94c1-t9" headers="r1c1-t9">
<p><a href="#i997460">SEED_COL_USAGE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r94c1-t9 r1c2-t9">
<p>Iterates over the SQL statements in the specified SQL tuning set, compiles them and seeds column usage information for the columns that appear in these statements</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r95c1-t9" headers="r1c1-t9">
<p><a href="#CHDHGCED">SET_COLUMN_STATS Procedures</a></p>
</td>
<td class="cellalignment4329" headers="r95c1-t9 r1c2-t9">
<p>Sets column-related information</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r96c1-t9" headers="r1c1-t9">
<p><a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r96c1-t9 r1c2-t9">
<p>Sets the statistics preferences of all the tables</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r97c1-t9" headers="r1c1-t9">
<p><a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r97c1-t9 r1c2-t9">
<p>Sets the global statistics preferences</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r98c1-t9" headers="r1c1-t9">
<p><a href="#i997579">SET_INDEX_STATS Procedures</a></p>
</td>
<td class="cellalignment4329" headers="r98c1-t9 r1c2-t9">
<p>Sets index-related information</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r99c1-t9" headers="r1c1-t9">
<p><a href="#i1048566">SET_PARAM Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r99c1-t9 r1c2-t9">
<p>Sets default values for parameters of <code dir="ltr">DBMS_STATS</code> procedures [see <a href="#i1049539">Deprecated Subprograms</a> ]</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r100c1-t9" headers="r1c1-t9">
<p><a href="#BABHFFDA">SET_PROCESSING_RATE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r100c1-t9 r1c2-t9">
<p>Sets the value of rate of processing for a given operation</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r101c1-t9" headers="r1c1-t9">
<p><a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r101c1-t9 r1c2-t9">
<p>Sets the statistics preferences of all the tables owned by the specified owner name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r102c1-t9" headers="r1c1-t9">
<p><a href="#i997707">SET_SYSTEM_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r102c1-t9 r1c2-t9">
<p>Sets system statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r103c1-t9" headers="r1c1-t9">
<p><a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r103c1-t9 r1c2-t9">
<p>Sets the statistics preferences of the specified table in the specified schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r104c1-t9" headers="r1c1-t9">
<p><a href="#i997763">SET_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r104c1-t9 r1c2-t9">
<p>Sets table-related information</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r105c1-t9" headers="r1c1-t9">
<p><a href="#BABCIFCJ">SHOW_EXTENDED_STATS_NAME Function</a></p>
</td>
<td class="cellalignment4329" headers="r105c1-t9 r1c2-t9">
<p>Returns the name of the virtual column that is created for the user-specified extension</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r106c1-t9" headers="r1c1-t9">
<p><a href="#BABJIHBH">TRANSFER_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r106c1-t9 r1c2-t9">
<p>Transfers statistics for specified table(s) from a remote database specified by <code dir="ltr">dblink</code> to the local database</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r107c1-t9" headers="r1c1-t9">
<p><a href="#BABDDHJI">UNLOCK_PARTITION_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r107c1-t9 r1c2-t9">
<p>Unlocks the statistics for a partition</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r108c1-t9" headers="r1c1-t9">
<p><a href="#i1043314">UNLOCK_SCHEMA_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r108c1-t9 r1c2-t9">
<p>Unlocks the statistics on all the tables in schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r109c1-t9" headers="r1c1-t9">
<p><a href="#i1040393">UNLOCK_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r109c1-t9 r1c2-t9">
<p>Unlocks the statistics on the table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r110c1-t9" headers="r1c1-t9">
<p><a href="#i1039960">UPGRADE_STAT_TABLE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r110c1-t9 r1c2-t9">
<p>Upgrades user statistics on an older table</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS68496" class="refsect2"><a id="i1048060"></a>
<h3 class="refsect2"><a id="sthref10350"></a>ALTER_STATS_HISTORY_RETENTION Procedure</h3>
<p>This procedure changes the statistics history retention value. Statistics history retention is used by both the automatic purge and <a href="#i1047896">PURGE_STATS Procedure</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10351"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.ALTER_STATS_HISTORY_RETENTION (
   retention       IN     NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10352"></a>Parameters</p>
<div id="ARPLS68497" class="tblformal">
<p class="titleintable"><a id="sthref10353"></a><a id="sthref10354"></a>Table 155-4 ALTER_STATS_HISTORY_RETENTION Procedure Parameters</p>
<table class="cellalignment4330" title="ALTER_STATS_HISTORY_RETENTION Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.ALTER_STATS_HISTORY_RETENTION subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t10">Parameter</th>
<th class="cellalignment4328" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t10" headers="r1c1-t10">
<p><code dir="ltr">retention</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t10 r1c2-t10">
<p>The retention time in days. The statistics history will be retained for at least these many number of days.The valid range is [1,365000]. Also you can use the following values for special purposes:</p>
<ul>
<li>
<p>-1: Statistics history is never purged by automatic purge</p>
</li>
<li>
<p>0: Old statistics are never saved. The automatic purge will delete all statistics history</p>
</li>
<li>
<p><code dir="ltr">NULL</code>: Change statistics history retention to default value</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10355"></a>Usage Notes</p>
<p>To run this procedure, you must have the <code dir="ltr">SYSDBA</code> or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10356"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68498" class="refsect2"><a id="i1035014"></a>
<h3 class="refsect2"><a id="sthref10357"></a>CONVERT_RAW_VALUE Procedures</h3>
<p>This procedure converts the internal representation of a minimum value, maximum value, or histogram endpoint actual value into a datatype-specific value. The <code dir="ltr">minval</code>, <code dir="ltr">maxval</code>, and <code dir="ltr">eavals</code> fields of the <code dir="ltr">StatRec</code> structure as filled in by <code dir="ltr">GET_COLUMN_STATS</code> or <code dir="ltr">PREPARE_COLUMN_VALUES</code> are appropriate values for input.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10358"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.CONVERT_RAW_VALUE (
   rawval     RAW, 
   resval OUT BINARY_FLOAT);

DBMS_STATS.CONVERT_RAW_VALUE (
   rawval     RAW, 
   resval OUT BINARY_DOUBLE);

DBMS_STATS.CONVERT_RAW_VALUE (
   rawval     RAW, 
   resval OUT DATE);

DBMS_STATS.CONVERT_RAW_VALUE (
   rawval     RAW, 
   resval OUT NUMBER);

DBMS_STATS.CONVERT_RAW_VALUE (
   rawval     RAW, 
   resval OUT VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10359"></a>Parameters</p>
<div id="ARPLS68499" class="tblformal">
<p class="titleintable"><a id="sthref10360"></a><a id="sthref10361"></a>Table 155-5 CONVERT_RAW_VALUE Procedure Parameters</p>
<table class="cellalignment4330" title="CONVERT_RAW_VALUE Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.CONVERT_RAW_VALUE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t11">Parameter</th>
<th class="cellalignment4328" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t11" headers="r1c1-t11">
<p><code dir="ltr">rawval</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t11 r1c2-t11">
<p>Raw representation of a column minimum, maximum, histogram end point actual value</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t11" headers="r1c1-t11">
<p><code dir="ltr">resval</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t11 r1c2-t11">
<p>Converted, type-specific value</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10362"></a>Usage Notes</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68500" class="refsect2"><a id="i1038351"></a>
<h3 class="refsect2"><a id="sthref10363"></a>CONVERT_RAW_VALUE_NVARCHAR Procedure</h3>
<p>This procedure converts the internal representation of a a minimum value, maximum value, or histogram end point actual value. The <code dir="ltr">minval</code>, <code dir="ltr">maxval</code> and <code dir="ltr">eavals</code> fields of the <code dir="ltr">StatRec</code> structure as filled in by <code dir="ltr">GET_COLUMN_STATS</code> or <code dir="ltr">PREPARE_COLUMN_VALUES</code> are appropriate values for input.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10364"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.CONVERT_RAW_VALUE_NVARCHAR (
   rawval     RAW, 
   resval OUT NVARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10365"></a>Parameters</p>
<div id="ARPLS68501" class="tblformal">
<p class="titleintable"><a id="sthref10366"></a><a id="sthref10367"></a>Table 155-6 CONVERT_RAW_VALUE_NVARCHAR Procedure Parameters</p>
<table class="cellalignment4330" title="CONVERT_RAW_VALUE_NVARCHAR Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.CONVERT_RAW_VALUE_NVARCHAR subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t12">Parameter</th>
<th class="cellalignment4328" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t12" headers="r1c1-t12">
<p><code dir="ltr">rawval</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t12 r1c2-t12">
<p>The raw representation of a column minimum or maximum datatype-specific output parameters</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t12" headers="r1c1-t12">
<p><code dir="ltr">resval</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t12 r1c2-t12">
<p>The converted, type-specific value</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10368"></a>Usage Notes</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68502" class="refsect2"><a id="i1038352"></a>
<h3 class="refsect2"><a id="sthref10369"></a>CONVERT_RAW_VALUE_ROWID Procedure</h3>
<p>This procedure converts the internal representation of a a minimum value, maximum value, or histogram end point actual value. The <code dir="ltr">minval</code>, <code dir="ltr">maxval</code> and <code dir="ltr">eavals</code> fields of the <code dir="ltr">StatRec</code> structure as filled in by <code dir="ltr">GET_COLUMN_STATS</code> or <code dir="ltr">PREPARE_COLUMN_VALUES</code> are appropriate values for input.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10370"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.CONVERT_RAW_VALUE_ROWID (
   rawval     RAW, 
   resval OUT ROWID);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10371"></a>Pragmas</p>
<pre dir="ltr">pragma restrict_references(convert_raw_value_rowid, WNDS, RNDS, WNPS, RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10372"></a>Parameters</p>
<div id="ARPLS68503" class="tblformal">
<p class="titleintable"><a id="sthref10373"></a><a id="sthref10374"></a>Table 155-7 CONVERT_RAW_VALUE_ROWID Procedure Parameters</p>
<table class="cellalignment4330" title="CONVERT_RAW_VALUE_ROWID Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.CONVERT_RAW_VALUE_ROWID subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t13">Parameter</th>
<th class="cellalignment4328" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t13" headers="r1c1-t13">
<p><code dir="ltr">rawval</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t13 r1c2-t13">
<p>The raw representation of a column minimum or maximum datatype-specific output parameters</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t13" headers="r1c1-t13">
<p><code dir="ltr">resval</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t13 r1c2-t13">
<p>The converted, type-specific value</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10375"></a>Usage Notes</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68504" class="refsect2"><a id="BABDDBGH"></a>
<h3 class="refsect2"><a id="sthref10376"></a>COPY_TABLE_STATS Procedure</h3>
<p>This procedure copies the statistics of the source [sub] partition to the destination [sub] partition. It also copies statistics of all dependent object such as columns and local indexes. If the statistics for source are not available then nothing is copied. It can optionally scale the statistics (such as the number of <code dir="ltr">blks</code>, or number of rows) based on the given <code dir="ltr">scale_factor</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10377"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.COPY_TABLE_STATS (
   ownname          VARCHAR2, 
   tabname          VARCHAR2, 
   srcpartname      VARCHAR2,
   dstpartname      VARCHAR2, 
   scale_factor     VARCHAR2 DEFAULT 1,
   flags            NUMBER DEFAULT NULL,
   force            BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10378"></a>Parameters</p>
<div id="ARPLS68505" class="tblformal">
<p class="titleintable"><a id="sthref10379"></a><a id="sthref10380"></a>Table 155-8 COPY_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="COPY_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t14">Parameter</th>
<th class="cellalignment4328" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t14" headers="r1c1-t14">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t14 r1c2-t14">
<p>Schema of the table of source and destination [sub] partitions</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t14" headers="r1c1-t14">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t14 r1c2-t14">
<p>Table name of source and destination [sub] partitions</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t14" headers="r1c1-t14">
<p><code dir="ltr">srcpartname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t14 r1c2-t14">
<p>Source [sub] partition</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t14" headers="r1c1-t14">
<p><code dir="ltr">dtspartname</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t14 r1c2-t14">
<p>Destination [sub] partition</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t14" headers="r1c1-t14">
<p><code dir="ltr">scale_factor</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t14 r1c2-t14">
<p>Scale factor to scale <code dir="ltr">nblks</code>, <code dir="ltr">nrows</code> etc. in <code dir="ltr">dstpartname</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t14" headers="r1c1-t14">
<p><code dir="ltr">flags</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t14 r1c2-t14">
<p>For internal Oracle use (should be left as <code dir="ltr">NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t14" headers="r1c1-t14">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t14 r1c2-t14">
<p>When value of this argument is <code dir="ltr">TRUE</code> copy statistics even if the destination [sub]partition is locked</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10381"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Invalid [sub]partition name</p>
<p><code dir="ltr">ORA-20001</code>: Bad input value</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10382"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
<p>This procedure updates the minimum and maximum values of destination partition for the first partitioning column as follows:</p>
<ul>
<li>
<p>If the partitioning type is <code dir="ltr">HASH</code> the minimum and maximum values of the destination partition are same as that of the source partition.</p>
</li>
<li>
<p>If the partitioning type is <code dir="ltr">LIST</code> then</p>
<ul>
<li>
<p>If the destination partition is a <code dir="ltr">NOT</code> <code dir="ltr">DEFAULT</code> partition then</p>
<ul>
<li>
<p>The minimum value of the destination partition is set to the minimum value of the value list that describes the destination partition</p>
</li>
<li>
<p>The maximum value of the destination partition is set to the maximum value of the value list that describes the destination partition.</p>
</li>
</ul>
</li>
<li>
<p>Alternatively, if the destination partition is a <code dir="ltr">DEFAULT</code> partition, then</p>
<ul>
<li>
<p>The minimum value of the destination partition is set to the minimum value of the source partition</p>
</li>
<li>
<p>The maximum value of the destination partition is set to the maximum value of the source partition</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>If the partitioning type is <code dir="ltr">RANGE</code> then</p>
<ul>
<li>
<p>The minimum value of the destination partition is set to the high bound of previous partition unless the destination partition is the first partition. For the first partition, the minimum value is set to the high bound of the destination partition.</p>
</li>
<li>
<p>The maximum value of the destination partition is set to the high bound of the destination partition unless the high bound of the destination partition is <code dir="ltr">MAXVALUE</code>, in which case the maximum value of the destination partition is set to the high bound of the previous partition.</p>
</li>
<li>
<p>If the source partition column&#39;s minimum value is equal to its maximum value, and both are equal to the source partition&#39;s lower bound, and it has a single distinct value, then the destination partition column&#39;s minimum and maximum values are both set to the destination partition&#39;s lower bound. This is done for all partitioning columns.</p>
<p>If the above condition does not apply, second and subsequent partitioning columns are updated as follows. The destination partition column&#39;s maximum value is set to the greater of the destination partition upper bound and the source partition column&#39;s maximum value, with one exception. If the destination partition is <code dir="ltr">D</code> and its preceding partition is <code dir="ltr">D-1</code> and the key column to be adjusted is <code dir="ltr">Cn</code>, the maximum value for <code dir="ltr">Cn</code> is set to the upper bound of <code dir="ltr">D</code> (ignoring the maximum value of the source partition column) provided that the upper bounds of the previous key column <code dir="ltr">Cn-1</code> are the same in partitions <code dir="ltr">D</code> and <code dir="ltr">D-1</code>.</p>
</li>
</ul>
</li>
<li>
<p>If the minimum and maximum values are different for a column after modifications, and if the number of distinct values is less than 1, the number of distinct values is updated as 2.</p>
</li>
<li>
<p>This procedure does not copy statistics of the underlying subpartitions if the source/destination is a partition of a composite partitioned table.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68506" class="refsect2"><a id="BABHFIBI"></a>
<h3 class="refsect2"><a id="sthref10383"></a>CREATE_EXTENDED_STATS Function</h3>
<p>This function creates a column statistics entry in the system for a user specified column group or an expression in a table. Statistics for this extension will be gathered when user or auto statistics gathering job gathers statistics for the table. We call statistics for such an extension, &#34;extended statistics&#34;. This function returns the name of this newly created entry for the extension.</p>
<p>This second form creates statistics extension based on the column group usage recorded by the <a href="#i997460">SEED_COL_USAGE Procedure</a>. This function returns a report of extensions created.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10384"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.CREATE_EXTENDED_STATS (
   ownname    VARCHAR2, 
   tabname    VARCHAR2,
   extension  VARCHAR2)
 RETURN VARCHAR2;

DBMS_STATS.CREATE_EXTENDED_STATS (
   ownname    VARCHAR2, 
   tabname    VARCHAR2,
   extension  VARCHAR2)
 RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10385"></a>Parameters</p>
<div id="ARPLS68507" class="tblformal">
<p class="titleintable"><a id="sthref10386"></a><a id="sthref10387"></a>Table 155-9 CREATE_EXTENDED_STATS Function Parameters</p>
<table class="cellalignment4330" title="CREATE_EXTENDED_STATS Function Parameters" summary="This table describes the Parameters of DBMS_STATS.CREATE_EXTENDED_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t15">Parameter</th>
<th class="cellalignment4328" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t15" headers="r1c1-t15">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t15 r1c2-t15">
<p>Owner name of a table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t15" headers="r1c1-t15">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t15 r1c2-t15">
<p>Name of the table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t15" headers="r1c1-t15">
<p><code dir="ltr">extension</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t15 r1c2-t15">
<p>Can be either a column group or an expression. Suppose the specified table has two column <code dir="ltr">c1</code>, <code dir="ltr">c2</code>. An example column group can be &#34;(<code dir="ltr">c1</code>, <code dir="ltr">c2</code>)&#34; and an example expression can be &#34;(<code dir="ltr">c1</code> + <code dir="ltr">c2</code>)&#34;.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10388"></a>Return Values</p>
<p>This function returns the name of this newly created entry for the extension.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10389"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges / creating extension is not supported</p>
<p><code dir="ltr">ORA-20001</code>: Error when processing extension</p>
<p><code dir="ltr">ORA-20007</code>: Extension already exists</p>
<p><code dir="ltr">ORA-20008</code>: Reached the upper limit on number of extensions</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10390"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
<p>There are nine restrictions on the extension:</p>
<ul>
<li>
<p>The extension cannot contain a virtual column.</p>
</li>
<li>
<p>Extensions cannot be created on tables owned by <code dir="ltr">SYS.</code></p>
</li>
<li>
<p>Extensions cannot be created on cluster tables, index organized tables, temporary tables or external tables.</p>
</li>
<li>
<p>The total number of extensions in a table cannot be greater than a maximum of (20, 10% of number of non-virtual columns in the table).</p>
</li>
<li>
<p>The number of columns in a column group must be in the range [2, 32].</p>
</li>
<li>
<p>A column can not appear more than once in a column group.</p>
</li>
<li>
<p>A column group can not contain expressions.</p>
</li>
<li>
<p>An expression must contain at least one column.</p>
</li>
<li>
<p>An expression can not contain a subquery.</p>
</li>
<li>
<p>The <code dir="ltr">COMPATIBLE</code> parameter needs to be 11.0.0.0.0 or greater</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68508" class="refsect2"><a id="i1035018"></a>
<h3 class="refsect2"><a id="sthref10391"></a>CREATE_STAT_TABLE Procedure</h3>
<p>This procedure creates a table with name <code dir="ltr">stattab</code> in <code dir="ltr">ownname</code>&#39;s schema which is capable of holding statistics. The columns and types that compose this table are not relevant as it should be accessed solely through the procedures in this package.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10392"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.CREATE_STAT_TABLE (
   ownname             VARCHAR2, 
   stattab             VARCHAR2,
   tblspace            VARCHAR2 DEFAULT NULL,
   global_temporary    BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10393"></a>Parameters</p>
<div id="ARPLS68509" class="tblformal">
<p class="titleintable"><a id="sthref10394"></a><a id="sthref10395"></a>Table 155-10 CREATE_STAT_TABLE Procedure Parameters</p>
<table class="cellalignment4330" title="CREATE_STAT_TABLE Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.CONVERT_RAW_VALUE_ROWID subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t16">Parameter</th>
<th class="cellalignment4328" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t16" headers="r1c1-t16">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t16 r1c2-t16">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t16" headers="r1c1-t16">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t16 r1c2-t16">
<p>Name of the table to create. This value should be passed as the <code dir="ltr">stattab</code> parameter to other procedures when the user does not want to modify the dictionary statistics directly.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t16" headers="r1c1-t16">
<p><code dir="ltr">tblspace</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t16 r1c2-t16">
<p>Tablespace in which to create the statistics tables. If none is specified, then they are created in the user&#39;s default tablespace.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t16" headers="r1c1-t16">
<p><code dir="ltr">global_temporary</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t16 r1c2-t16">
<p>Whether or not the table should be created as a global temporary table</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10396"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Table already exists or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Tablespace does not exist</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10397"></a>Usage Notes</p>
<p>To invoke this procedure you need whichever privileges are required for creating a table in the specified schema.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68510" class="refsect2"><a id="i1035206"></a>
<h3 class="refsect2"><a id="sthref10398"></a>DELETE_COLUMN_STATS Procedure</h3>
<p>This procedure deletes column-related statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10399"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DELETE_COLUMN_STATS (
   ownname        VARCHAR2, 
   tabname        VARCHAR2, 
   colname        VARCHAR2, 
   partname       VARCHAR2 DEFAULT NULL,
   stattab        VARCHAR2 DEFAULT NULL, 
   statid         VARCHAR2 DEFAULT NULL,
   cascade_parts  BOOLEAN  DEFAULT TRUE,
   statown        VARCHAR2 DEFAULT NULL,
   no_invalidate  BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param(&#39;NO_INVALIDATE&#39;)),
   force          BOOLEAN  DEFAULT FALSE,
   col_stat_type  VARCHAR2 DEFAULT &#39;ALL&#39;);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10400"></a>Parameters</p>
<div id="ARPLS68511" class="tblformal">
<p class="titleintable"><a id="sthref10401"></a><a id="sthref10402"></a>Table 155-11 DELETE_COLUMN_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_COLUMN_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_COLUMN_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t17">Parameter</th>
<th class="cellalignment4328" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t17" headers="r1c1-t17">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t17 r1c2-t17">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t17" headers="r1c1-t17">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t17 r1c2-t17">
<p>Name of the table to which this column belongs</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t17" headers="r1c1-t17">
<p><code dir="ltr">colname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t17 r1c2-t17">
<p>Name of the column or extension</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t17" headers="r1c1-t17">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t17 r1c2-t17">
<p>Name of the table partition for which to delete the statistics. If the table is partitioned and if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then global column statistics are deleted.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t17" headers="r1c1-t17">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t17 r1c2-t17">
<p>User statistics table identifier describing from where to delete the statistics. If <code dir="ltr">stattab</code> is <code dir="ltr">NULL</code>, then the statistics are deleted directly from the dictionary.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t17" headers="r1c1-t17">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t17 r1c2-t17">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code> (Only pertinent if <code dir="ltr">stattab</code> is not <code dir="ltr">NULL</code>).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t17" headers="r1c1-t17">
<p><code dir="ltr">cascade_parts</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t17 r1c2-t17">
<p>If the table is partitioned and if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then setting this to true causes the deletion of statistics for this column for all underlying partitions as well.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t17" headers="r1c1-t17">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t17 r1c2-t17">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t17" headers="r1c1-t17">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t17 r1c2-t17">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t17" headers="r1c1-t17">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t17 r1c2-t17">
<p>When value of this argument is <code dir="ltr">TRUE</code>, deletes column statistics even if locked</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t17" headers="r1c1-t17">
<p><code dir="ltr">col_stat_type</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t17 r1c2-t17">
<p>Type of column statistics to be deleted.This argument takes the following values:</p>
<ul>
<li>
<p><code dir="ltr">HISTOGRAM</code> - delete column histogram only</p>
</li>
<li>
<p><code dir="ltr">ALL</code> - delete base column statistics and histogram</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10403"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20005</code>: Object statistics are locked</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10404"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68512" class="refsect2"><a id="BEIHGEBD"></a>
<h3 class="refsect2"><a id="sthref10405"></a>DELETE_DATABASE_PREFS Procedure</h3>
<p>This procedure is used to delete the statistics preferences of all the tables, excluding the tables owned by Oracle. These tables can by included by passing <code dir="ltr">TRUE</code> for the <code dir="ltr">add_sys</code> parameter.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10406"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DELETE_DATABASE_PREFS (
    pname            IN   VARCHAR2,
    add_sys          IN   BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10407"></a>Parameters</p>
<div id="ARPLS68513" class="tblformal">
<p class="titleintable"><a id="sthref10408"></a><a id="sthref10409"></a>Table 155-12 DELETE_DATABASE_PREFS Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_DATABASE_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_DATABASE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t18">Parameter</th>
<th class="cellalignment4328" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t18" headers="r1c1-t18">
<p><code dir="ltr">pname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t18 r1c2-t18">
<p>Preference name. The existing value for following preferences can be deleted and default preference values will be used:</p>
<ul>
<li>
<p><code dir="ltr">CASCADE</code></p>
</li>
<li>
<p><code dir="ltr">DEGREE</code></p>
</li>
<li>
<p><code dir="ltr">ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">METHOD_OPT</code></p>
</li>
<li>
<p><code dir="ltr">NO_INVALIDATE</code></p>
</li>
<li>
<p><code dir="ltr">GRANULARITY</code></p>
</li>
<li>
<p><code dir="ltr">PUBLISH</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL_STALENESS</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL_LEVEL</code></p>
</li>
<li>
<p><code dir="ltr">STALE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">GLOBAL_TEMP_TABLE_STATS</code></p>
</li>
<li>
<p><code dir="ltr">TABLE_CACHED_BLOCKS</code></p>
</li>
<li>
<p><code dir="ltr">OPTIONS</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t18" headers="r1c1-t18">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r3c1-t18 r1c2-t18">
<p><code dir="ltr">CASCADE</code> - The value determines whether or not index statistics are collected as part of gathering table statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t18" headers="r1c1-t18">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r4c1-t18 r1c2-t18">
<p><code dir="ltr">DEGREE</code> - The value determines degree of parallelism used for gathering statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t18" headers="r1c1-t18">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r5c1-t18 r1c2-t18">
<p><code dir="ltr">ESTIMATE_PERCENT</code> - The value determines the percentage of rows to estimate.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t18" headers="r1c1-t18">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r6c1-t18 r1c2-t18">
<p><code dir="ltr">METHOD_OPT</code> - The value controls column statistics collection and histogram creation. When setting preference on global, schema, database or dictionary level, only<code dir="ltr">&#39;FOR ALL&#39;</code> syntax is allowed.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t18" headers="r1c1-t18">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r7c1-t18 r1c2-t18">
<p><code dir="ltr">NO_INVALIDATE</code> - The value controls the invalidation of dependent cursors of the tables for which statistics are being gathered.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t18" headers="r1c1-t18">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r8c1-t18 r1c2-t18">
<p><code dir="ltr">GRANULARITY</code> - The value determines granularity of statistics to collect (only pertinent if the table is partitioned)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t18" headers="r1c1-t18">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r9c1-t18 r1c2-t18">
<p><code dir="ltr">PUBLISH</code> - This value determines whether or not newly gathered statistics will be published once the gather job has completed.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t18" headers="r1c1-t18">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r10c1-t18 r1c2-t18">
<p><code dir="ltr">INCREMENTAL</code> - This value determines whether or not the global statistics of a partitioned table will be maintained without doing a full table scan.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t18" headers="r1c1-t18">&nbsp;</td>
<td class="cellalignment4329" headers="r11c1-t18 r1c2-t18">
<p><code dir="ltr">INCREMENTAL_LEVEL</code> - This value controls what synopses to collect when <code dir="ltr">INCREMENTAL</code> preference is set to <code dir="ltr">TRUE</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t18" headers="r1c1-t18">&nbsp;</td>
<td class="cellalignment4329" headers="r12c1-t18 r1c2-t18">
<p><code dir="ltr">INCREMENTAL_STALENESS</code> - This value controls how we decide a partition or subpartition as stale.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t18" headers="r1c1-t18">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r13c1-t18 r1c2-t18">
<p><code dir="ltr">STALE_PERCENT</code> - This value determines the percentage of rows in a table that have to change before the statistics on that table are deemed stale and should be regathered.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t18" headers="r1c1-t18">&nbsp;</td>
<td class="cellalignment4329" headers="r14c1-t18 r1c2-t18">
<p><code dir="ltr">GLOBAL_TEMP_TABLE_STATS</code> - This controls whether the statistics gathered for a global temporary table should be stored as shared statistics or session statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t18" headers="r1c1-t18">&nbsp;</td>
<td class="cellalignment4329" headers="r15c1-t18 r1c2-t18">
<p><code dir="ltr">TABLE_CACHED_BLOCKS</code> - The average number of blocks cached in the buffer cache for any table we can assume when gathering the index clustering factor.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t18" headers="r1c1-t18">&nbsp;</td>
<td class="cellalignment4329" headers="r16c1-t18 r1c2-t18">
<p><code dir="ltr">OPTIONS</code> - Determines the <code dir="ltr">options</code> parameter used in the <a href="#i1036461">GATHER_TABLE_STATS Procedure</a>. T</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t18" headers="r1c1-t18">
<p><code dir="ltr">add_sys</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t18 r1c2-t18">
<p>Determines whether <code dir="ltr">SYS</code> tables will be included.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10410"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or Illegal input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10411"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to have the <code dir="ltr">SYSDBA</code> role or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privileges.</p>
</li>
<li>
<p>All <code dir="ltr">pname</code> arguments are of type <code dir="ltr">VARCHAR2</code> and values are enclosed in quotes, even when they represent numbers.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10412"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.DELETE_DATABASE_PREFS(&#39;CASCADE&#39;, FALSE);
DBMS_STATS.DELETE_DATABASE_PREFS(&#39;ESTIMATE_PERCENT&#39;,TRUE);
</pre></div>
<!-- class="refsubsect" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink TGSQL94863" href="../TGSQL/tgsql_stats.htm#TGSQL94863"></a><span class="italic">Oracle Database SQL Tuning Guide</span> for more complex examples of how to use this subprogram.</div>
</div>
<!-- class="refsect2" -->
<div id="ARPLS68514" class="refsect2"><a id="i1035352"></a>
<h3 class="refsect2"><a id="sthref10413"></a>DELETE_DATABASE_STATS Procedure</h3>
<p>This procedure deletes statistics for all the tables in a database.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10414"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DELETE_DATABASE_STATS (
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   statown          VARCHAR2 DEFAULT NULL,
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param(&#39;NO_INVALIDATE&#39;)),
   force            BOOLEAN  DEFAULT FALSE,
   stat_category    VARCHAR2 DEFAULT DEFAULT_DEL_STAT_CATEGORY); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10415"></a>Parameters</p>
<div id="ARPLS68515" class="tblformal">
<p class="titleintable"><a id="sthref10416"></a><a id="sthref10417"></a>Table 155-13 DELETE_DATABASE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_DATABASE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_DATABASE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t20">Parameter</th>
<th class="cellalignment4328" id="r1c2-t20">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t20" headers="r1c1-t20">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t20 r1c2-t20">
<p>User statistics table identifier describing from where to delete the statistics. If <code dir="ltr">stattab</code> is <code dir="ltr">NULL</code>, then the statistics are deleted directly in the dictionary.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t20" headers="r1c1-t20">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t20 r1c2-t20">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code> (Only pertinent if <code dir="ltr">stattab</code> is not <code dir="ltr">NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t20" headers="r1c1-t20">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t20 r1c2-t20">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t20" headers="r1c1-t20">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t20 r1c2-t20">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t20" headers="r1c1-t20">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t20 r1c2-t20">
<p>When the value of this argument is <code dir="ltr">TRUE</code>, deletes statistics of tables in a database even if they are locked</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t20" headers="r1c1-t20">
<p><code dir="ltr">stat_category</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t20 r1c2-t20">
<p>Statistics to delete. It accepts multiple values separated by comma:</p>
<ul>
<li>
<p><code dir="ltr">OBJECT_STATS</code> - table statistics, column statistics and index statistics</p>
</li>
<li>
<p><code dir="ltr">SYNOPSES</code> - information to support incremental statistics</p>
</li>
</ul>
<p>The default is <code dir="ltr">&#39;OBJECT_STATS, SYNOPSES&#39;</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10418"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10419"></a>Usage Notes</p>
<p>To run this procedure, you need to have the <code dir="ltr">SYSDBA</code> role or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privileges.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68516" class="refsect2"><a id="i1042571"></a>
<h3 class="refsect2"><a id="sthref10420"></a>DELETE_DICTIONARY_STATS Procedure</h3>
<p>This procedure deletes statistics for all dictionary schemas (&#39;<code dir="ltr">SYS</code>&#39;, &#39;<code dir="ltr">SYSTEM</code>&#39; and RDBMS component schemas).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10421"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DELETE_DICTIONARY_STATS (
   stattab        VARCHAR2 DEFAULT NULL,
   statid         VARCHAR2 DEFAULT NULL,
   statown        VARCHAR2 DEFAULT NULL, 
   no_invalidate  BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param(&#39;NO_INVALIDATE&#39;)),
   stattype       VARCHAR2 DEFAULT &#39;ALL&#39;,
   force          BOOLEAN  DEFAULT FALSE,
   stat_category  VARCHAR2 DEFAULT DEFAULT_DEL_STAT_CATEGORY); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10422"></a>Parameters</p>
<div id="ARPLS68517" class="tblformal">
<p class="titleintable"><a id="sthref10423"></a><a id="sthref10424"></a>Table 155-14 DELETE_DICTIONARY_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_DICTIONARY_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_DICTIONARY_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t21">Parameter</th>
<th class="cellalignment4328" id="r1c2-t21">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t21" headers="r1c1-t21">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t21 r1c2-t21">
<p>User statistics table identifier describing from where to delete the statistics. If <code dir="ltr">stattab</code> is <code dir="ltr">NULL</code>, then the statistics are deleted directly in the dictionary.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t21" headers="r1c1-t21">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t21 r1c2-t21">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code> (Only pertinent if <code dir="ltr">stattab</code> is not <code dir="ltr">NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t21" headers="r1c1-t21">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t21 r1c2-t21">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t21" headers="r1c1-t21">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t21 r1c2-t21">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t21" headers="r1c1-t21">
<p><code dir="ltr">stattype</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t21 r1c2-t21">
<p>Statistics type</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t21" headers="r1c1-t21">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t21 r1c2-t21">
<p>When the value of this argument is <code dir="ltr">TRUE</code>, deletes statistics of tables in a database even if they are locked</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t21" headers="r1c1-t21">
<p><code dir="ltr">stat_category</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t21 r1c2-t21">
<p>Statistics to delete. It accepts multiple values separated by comma:</p>
<ul>
<li>
<p><code dir="ltr">OBJECT_STATS</code> - table statistics, column statistics and index statistics</p>
</li>
<li>
<p><code dir="ltr">SYNOPSES</code> - information to support incremental statistics</p>
</li>
</ul>
<p>The default is <code dir="ltr">&#39;OBJECT_STATS, SYNOPSES&#39;</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10425"></a>Usage Notes</p>
<p>You must have the <code dir="ltr">SYSDBA</code> or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege to execute this procedure.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10426"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68518" class="refsect2"><a id="i1039357"></a>
<h3 class="refsect2"><a id="sthref10427"></a>DELETE_FIXED_OBJECTS_STATS Procedure</h3>
<p>This procedure deletes statistics of all fixed tables.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10428"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DELETE_FIXED_OBJECTS_STATS (
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   statown          VARCHAR2 DEFAULT NULL,
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param(&#39;NO_INVALIDATE&#39;)),
   force            BOOLEAN  DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10429"></a>Parameters</p>
<div id="ARPLS68519" class="tblformal">
<p class="titleintable"><a id="sthref10430"></a><a id="sthref10431"></a>Table 155-15 DELETE_FIXED_OBJECTS_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_FIXED_OBJECTS_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_FIXED_OBJECTS_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t22">Parameter</th>
<th class="cellalignment4328" id="r1c2-t22">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t22" headers="r1c1-t22">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t22 r1c2-t22">
<p>The user statistics table identifier describing from where to delete the current statistics. If <code dir="ltr">stattab</code> is <code dir="ltr">NULL</code>, the statistics will be deleted directly in the dictionary.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t22" headers="r1c1-t22">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t22 r1c2-t22">
<p>The (optional) identifier to associate with these statistics within <code dir="ltr">stattab</code>. This only applies if <code dir="ltr">stattab</code> is not <code dir="ltr">NULL</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t22" headers="r1c1-t22">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t22 r1c2-t22">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t22" headers="r1c1-t22">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t22 r1c2-t22">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t22" headers="r1c1-t22">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t22 r1c2-t22">
<p>Ignores the statistics lock on objects and deletes the statistics if set to <code dir="ltr">TRUE</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10432"></a>Usage Notes</p>
<p>You must have the <code dir="ltr">SYSDBA</code> or <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> system privilege to execute this procedure.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10433"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68520" class="refsect2"><a id="i1035428"></a>
<h3 class="refsect2"><a id="sthref10434"></a>DELETE_INDEX_STATS Procedure</h3>
<p>This procedure deletes index-related statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10435"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DELETE_INDEX_STATS (
   ownname          VARCHAR2, 
   indname          VARCHAR2,
   partname         VARCHAR2 DEFAULT NULL,
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   cascade_parts    BOOLEAN  DEFAULT TRUE,
   statown          VARCHAR2 DEFAULT NULL,
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param(&#39;NO_INVALIDATE&#39;)),
   stattype         VARCHAR2 DEFAULT &#39;ALL&#39;,
   force            BOOLEAN  DEFAULT FALSE);
   stat_category    VARCHAR2 DEFAULT DEFAULT_DEL_STAT_CATEGORY); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10436"></a>Parameters</p>
<div id="ARPLS68521" class="tblformal">
<p class="titleintable"><a id="sthref10437"></a><a id="sthref10438"></a>Table 155-16 DELETE_INDEX_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_INDEX_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_INDEX_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t23">Parameter</th>
<th class="cellalignment4328" id="r1c2-t23">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t23" headers="r1c1-t23">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t23 r1c2-t23">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t23" headers="r1c1-t23">
<p><code dir="ltr">indname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t23 r1c2-t23">
<p>Name of the index</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t23" headers="r1c1-t23">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t23 r1c2-t23">
<p>Name of the index partition for which to delete the statistics. If the index is partitioned and if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then index statistics are deleted at the global level.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t23" headers="r1c1-t23">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t23 r1c2-t23">
<p>User statistics table identifier describing from where to delete the statistics. If <code dir="ltr">stattab</code> is <code dir="ltr">NULL</code>, then the statistics are deleted directly from the dictionary.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t23" headers="r1c1-t23">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t23 r1c2-t23">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code> (Only pertinent if <code dir="ltr">stattab</code> is not <code dir="ltr">NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t23" headers="r1c1-t23">
<p><code dir="ltr">cascade_parts</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t23 r1c2-t23">
<p>If the index is partitioned and if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then setting this to <code dir="ltr">TRUE</code> causes the deletion of statistics for this index for all underlying partitions as well</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t23" headers="r1c1-t23">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t23 r1c2-t23">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t23" headers="r1c1-t23">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t23 r1c2-t23">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t23" headers="r1c1-t23">
<p><code dir="ltr">stattype</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t23 r1c2-t23">
<p>Statistics type</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t23" headers="r1c1-t23">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t23 r1c2-t23">
<p>When value of this argument is <code dir="ltr">TRUE</code>, deletes index statistics even if locked</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t23" headers="r1c1-t23">
<p><code dir="ltr">stat_category</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t23 r1c2-t23">
<p>Statistics to delete. It accepts multiple values separated by comma:</p>
<ul>
<li>
<p><code dir="ltr">OBJECT_STATS</code> - table statistics, column statistics and index statistics</p>
</li>
<li>
<p><code dir="ltr">SYNOPSES</code> - information to support incremental statistics</p>
</li>
</ul>
<p>The default is <code dir="ltr">&#39;OBJECT_STATS, SYNOPSES&#39;</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10439"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20005</code>: Object statistics are locked</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10440"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68522" class="refsect2"><a id="BEIJGHFD"></a>
<h3 class="refsect2"><a id="sthref10441"></a>DELETE_PENDING_STATS Procedure</h3>
<p>This procedure is used to delete the pending statistics that have been collected but have not been published.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10442"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DELETE_PENDING_STATS (
    ownname    IN  VARCHAR2  DEFAULT USER,
    tabname    IN  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10443"></a>Parameters</p>
<div id="ARPLS68523" class="tblformal">
<p class="titleintable"><a id="sthref10444"></a><a id="sthref10445"></a>Table 155-17 DELETE_PENDING_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_PENDING_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_PRIVATE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t24">Parameter</th>
<th class="cellalignment4328" id="r1c2-t24">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t24" headers="r1c1-t24">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t24 r1c2-t24">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t24" headers="r1c1-t24">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t24 r1c2-t24">
<p>Table name</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10446"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10447"></a>Usage Notes</p>
<ul>
<li>
<p>If the parameter <code dir="ltr">tabname</code> is <code dir="ltr">NULL</code> delete applies to all tables of the specified schema.</p>
</li>
<li>
<p>The default owner/schema is the user who runs the procedure.</p>
</li>
<li>
<p>To run this procedure, you need to have the same privilege for gathering statistics on the tables that will be touched by this procedure.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10448"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.DELETE_PENDING_STATS(&#39;SH&#39;, &#39;SALES&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74505" class="refsect2"><a id="BABDCJDJ"></a>
<h3 class="refsect2"><a id="sthref10449"></a>DELETE_PROCESSING_RATE Procedure</h3>
<p>This procedure deletes the processing rate of a given statistics source. If the source is not specified, it deletes the statistics of all the sources.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10450"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DELETE_PROCESSING_RATE (
   stat_source      IN    VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10451"></a>Parameters</p>
<div id="ARPLS74506" class="tblformal">
<p class="titleintable"><a id="sthref10452"></a><a id="sthref10453"></a>Table 155-18 DELETE_PROCESSING_RATE Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_PROCESSING_RATE Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_PROCESSING_RATE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t25">Parameter</th>
<th class="cellalignment4328" id="r1c2-t25">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t25" headers="r1c1-t25">
<p><code dir="ltr">stat_source</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t25 r1c2-t25">
<p>Source of processing rates:</p>
<ul>
<li>
<p><code dir="ltr">&#39;MANUAL&#39;</code>: values set by the user manually using the <a href="#BABHFFDA">SET_PROCESSING_RATE Procedure</a></p>
</li>
<li>
<p><code dir="ltr">&#39;CALIBRATION&#39;</code> : values collected by the calibration <a href="#BABFEFDF">GATHER_PROCESSING_RATE Procedure</a> run explicitly by the user</p>
</li>
<li>
<p><code dir="ltr">&#39;FEEDBACK&#39;</code>: values obtained by time feedback</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10454"></a>Usage Notes</p>
<p>You require the <code dir="ltr">OPTIMIZER_PROCESSING_RATE</code> role to run this procedure since <code dir="ltr">AUTO</code> <code dir="ltr">DOP</code> uses processing rates to determine the optimal degree of parallelism for a SQL statement.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10455"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or illegal input value</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68524" class="refsect2"><a id="BEIFAGDH"></a>
<h3 class="refsect2"><a id="sthref10456"></a>DELETE_SCHEMA_PREFS Procedure</h3>
<p>This procedure is used to delete the statistics preferences of all the tables owned by the specified owner name.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10457"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DELETE_SCHEMA_PREFS (
    ownname   IN   VARCHAR2,
    pname     IN   VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10458"></a>Parameters</p>
<div id="ARPLS68525" class="tblformal">
<p class="titleintable"><a id="sthref10459"></a><a id="sthref10460"></a>Table 155-19 DELETE_SCHEMA_PREFS Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_SCHEMA_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_SCHEMA_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t26">Parameter</th>
<th class="cellalignment4328" id="r1c2-t26">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t26" headers="r1c1-t26">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t26 r1c2-t26">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t26" headers="r1c1-t26">
<p><code dir="ltr">pname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t26 r1c2-t26">
<p>Preference name. The existing value for following preferences can be deleted and default preference values will be used:</p>
<ul>
<li>
<p><code dir="ltr">CASCADE</code></p>
</li>
<li>
<p><code dir="ltr">DEGREE</code></p>
</li>
<li>
<p><code dir="ltr">ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">METHOD_OPT</code></p>
</li>
<li>
<p><code dir="ltr">NO_INVALIDATE</code></p>
</li>
<li>
<p><code dir="ltr">GRANULARITY</code></p>
</li>
<li>
<p><code dir="ltr">PUBLISH</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL_STALENESS</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL_LEVEL</code></p>
</li>
<li>
<p><code dir="ltr">STALE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">GLOBAL_TEMP_TABLE_STATS</code></p>
</li>
<li>
<p><code dir="ltr">TABLE_CACHED_BLOCKS</code></p>
</li>
<li>
<p><code dir="ltr">OPTIONS</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t26" headers="r1c1-t26">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r4c1-t26 r1c2-t26">
<p><code dir="ltr">CASCADE</code> - The value determines whether or not index statistics are collected as part of gathering table statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t26" headers="r1c1-t26">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r5c1-t26 r1c2-t26">
<p><code dir="ltr">DEGREE</code> - The value determines degree of parallelism used for gathering statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t26" headers="r1c1-t26">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r6c1-t26 r1c2-t26">
<p><code dir="ltr">ESTIMATE_PERCENT</code> - The value determines the percentage of rows to estimate.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t26" headers="r1c1-t26">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r7c1-t26 r1c2-t26">
<p><code dir="ltr">METHOD_OPT</code> - The value controls column statistics collection and histogram creation. When setting preference on global, schema, database or dictionary level, only<code dir="ltr">&#39;FOR ALL&#39;</code> syntax is allowed.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t26" headers="r1c1-t26">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r8c1-t26 r1c2-t26">
<p><code dir="ltr">NO_INVALIDATE</code> - The value controls the invalidation of dependent cursors of the tables for which statistics are being gathered.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t26" headers="r1c1-t26">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r9c1-t26 r1c2-t26">
<p><code dir="ltr">GRANULARITY</code> - The value determines granularity of statistics to collect (only pertinent if the table is partitioned)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t26" headers="r1c1-t26">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r10c1-t26 r1c2-t26">
<p><code dir="ltr">PUBLISH</code> - This value determines whether or not newly gathered statistics will be published once the gather job has completed.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t26" headers="r1c1-t26">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r11c1-t26 r1c2-t26">
<p><code dir="ltr">INCREMENTAL</code> - This value determines whether or not the global statistics of a partitioned table will be maintained without doing a full table scan.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t26" headers="r1c1-t26">&nbsp;</td>
<td class="cellalignment4329" headers="r12c1-t26 r1c2-t26">
<p><code dir="ltr">INCREMENTAL_LEVEL</code> - This value controls what synopses to collect when <code dir="ltr">INCREMENTAL</code> preference is set to <code dir="ltr">TRUE</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t26" headers="r1c1-t26">&nbsp;</td>
<td class="cellalignment4329" headers="r13c1-t26 r1c2-t26">
<p><code dir="ltr">INCREMENTAL_STALENESS</code> - This value controls how we decide a partition or subpartition as stale.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t26" headers="r1c1-t26">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r14c1-t26 r1c2-t26">
<p><code dir="ltr">STALE_PERCENT</code> - This value determines the percentage of rows in a table that have to change before the statistics on that table are deemed stale and should be regathered.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t26" headers="r1c1-t26">&nbsp;</td>
<td class="cellalignment4329" headers="r15c1-t26 r1c2-t26">
<p><code dir="ltr">GLOBAL_TEMP_TABLE_STATS</code> - This controls whether the statistics gathered for a global temporary table should be stored as shared statistics or session statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t26" headers="r1c1-t26">&nbsp;</td>
<td class="cellalignment4329" headers="r16c1-t26 r1c2-t26">
<p><code dir="ltr">TABLE_CACHED_BLOCKS</code> - The average number of blocks cached in the buffer cache for any table we can assume when gathering the index clustering factor.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t26" headers="r1c1-t26">&nbsp;</td>
<td class="cellalignment4329" headers="r17c1-t26 r1c2-t26">
<p><code dir="ltr">OPTIONS</code> - Determines the <code dir="ltr">options</code> parameter used in the <a href="#i1036461">GATHER_TABLE_STATS Procedure</a>. T</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10461"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges / Schema &#34;&lt;schema&gt;&#34; does not exist</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or Illegal input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10462"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to connect as owner, or have the <code dir="ltr">SYSDBA</code> privilege, or have the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege.</p>
</li>
<li>
<p>All arguments are of type <code dir="ltr">VARCHAR2</code> and values are enclosed in quotes, even when they represent numbers.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10463"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.DELETE_SCHEMA_PREFS(&#39;SH&#39;, &#39;CASCADE&#39;);
DBMS_STATS.DELETE_SCHEMA_PREFS(&#39;SH&#39;, &#39;ESTIMATE_PERCENT&#39;);
DBMS_STATS.DELETE_SCHEMA_PREFS(&#39;SH&#39;, &#39;DEGREE&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68526" class="refsect2"><a id="i1035494"></a>
<h3 class="refsect2"><a id="sthref10464"></a>DELETE_SCHEMA_STATS Procedure</h3>
<p>This procedure deletes statistics for an entire schema.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10465"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DELETE_SCHEMA_STATS (
   ownname          VARCHAR2, 
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   statown          VARCHAR2 DEFAULT NULL,
   no_invalidate    BOOLEAN DEFAULT to_no_invalidate_type (
                                     get_param(&#39;NO_INVALIDATE&#39;)),
   force            BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10466"></a>Parameters</p>
<div id="ARPLS68527" class="tblformal">
<p class="titleintable"><a id="sthref10467"></a><a id="sthref10468"></a>Table 155-20 DELETE_SCHEMA_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_SCHEMA_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t27">Parameter</th>
<th class="cellalignment4328" id="r1c2-t27">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t27" headers="r1c1-t27">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t27 r1c2-t27">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t27" headers="r1c1-t27">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t27 r1c2-t27">
<p>User statistics table identifier describing from where to delete the statistics. If <code dir="ltr">stattab</code> is <code dir="ltr">NULL</code>, then the statistics are deleted directly in the dictionary.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t27" headers="r1c1-t27">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t27 r1c2-t27">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code> (Only pertinent if <code dir="ltr">stattab</code> is not <code dir="ltr">NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t27" headers="r1c1-t27">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t27 r1c2-t27">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t27" headers="r1c1-t27">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t27 r1c2-t27">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t27" headers="r1c1-t27">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t27 r1c2-t27">
<p>When value of this argument is <code dir="ltr">TRUE</code>, deletes statistics of tables in a schema even if locked</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10469"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10470"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68528" class="refsect2"><a id="i1035583"></a>
<h3 class="refsect2"><a id="sthref10471"></a>DELETE_SYSTEM_STATS Procedure</h3>
<p>This procedure deletes workload statistics (collected using the &#39;<code dir="ltr">INTERVAL</code>&#39; or &#39;<code dir="ltr">START</code>&#39; and &#39;<code dir="ltr">STOP</code>&#39; options) and resets the default to <code dir="ltr">noworkload</code> statistics (collected using &#39;<code dir="ltr">NOWORKLOAD</code>&#39; option) if <code dir="ltr">stattab</code> is not specified. If <code dir="ltr">stattab</code> is specified, the subprogram deletes all system statistics with the associated <code dir="ltr">statid</code> from the <code dir="ltr">stattab</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10472"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DELETE_SYSTEM_STATS (
   stattab       VARCHAR2 DEFAULT NULL, 
   statid        VARCHAR2 DEFAULT NULL,
   statown       VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10473"></a>Parameters</p>
<div id="ARPLS68529" class="tblformal">
<p class="titleintable"><a id="sthref10474"></a><a id="sthref10475"></a>Table 155-21 DELETE_SYSTEM_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_SYSTEM_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t28">Parameter</th>
<th class="cellalignment4328" id="r1c2-t28">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t28" headers="r1c1-t28">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t28 r1c2-t28">
<p>Identifier of the user statistics table where the statistics will be saved</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t28" headers="r1c1-t28">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t28 r1c2-t28">
<p>Optional identifier associated with the statistics saved in the <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t28" headers="r1c1-t28">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t28 r1c2-t28">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10476"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table; may need to be upgraded</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10477"></a>Usage Notes</p>
<p>To run this procedure, you need the <code dir="ltr">GATHER_SYSTEM_STATISTICS</code> role.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68530" class="refsect2"><a id="BEIEGCHI"></a>
<h3 class="refsect2"><a id="sthref10478"></a>DELETE_TABLE_PREFS Procedure</h3>
<p>This procedure is used to delete the statistics preferences of the specified table in the specified schema.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10479"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DELETE_TABLE_PREFS (
    ownname    IN  VARCHAR2,
    tabname    IN  VARCHAR2,
    pname      IN  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10480"></a>Parameters</p>
<div id="ARPLS68531" class="tblformal">
<p class="titleintable"><a id="sthref10481"></a><a id="sthref10482"></a>Table 155-22 DELETE_TABLE_PREFS Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_TABLE_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_TABLE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t29">Parameter</th>
<th class="cellalignment4328" id="r1c2-t29">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t29" headers="r1c1-t29">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t29 r1c2-t29">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t29" headers="r1c1-t29">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t29 r1c2-t29">
<p>Table name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t29" headers="r1c1-t29">
<p><code dir="ltr">pname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t29 r1c2-t29">
<p>Preference name. The existing value for following preferences can be deleted and default preference values will be used:</p>
<ul>
<li>
<p><code dir="ltr">AUTOSTATS_TARGET</code></p>
</li>
<li>
<p><code dir="ltr">CASCADE</code></p>
</li>
<li>
<p><code dir="ltr">CONCURRENT</code></p>
</li>
<li>
<p><code dir="ltr">DEGREE</code></p>
</li>
<li>
<p><code dir="ltr">ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">METHOD_OPT</code></p>
</li>
<li>
<p><code dir="ltr">NO_INVALIDATE</code></p>
</li>
<li>
<p><code dir="ltr">GRANULARITY</code></p>
</li>
<li>
<p><code dir="ltr">PUBLISH</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL_STALENESS</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL_LEVEL</code></p>
</li>
<li>
<p><code dir="ltr">STALE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">GLOBAL_TEMP_TABLE_STATS</code></p>
</li>
<li>
<p><code dir="ltr">TABLE_CACHED_BLOCKS</code></p>
</li>
<li>
<p><code dir="ltr">OPTIONS</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t29" headers="r1c1-t29">&nbsp;</td>
<td class="cellalignment4329" headers="r5c1-t29 r1c2-t29">
<p><code dir="ltr">AUTOSTATS_TARGET</code> - This preference is applicable only for auto statistics collection. The value of this parameter controls the objects considered for statistics collection.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t29" headers="r1c1-t29">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r6c1-t29 r1c2-t29">
<p><code dir="ltr">CASCADE</code> - The value determines whether or not index statistics are collected as part of gathering table statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t29" headers="r1c1-t29">&nbsp;</td>
<td class="cellalignment4329" headers="r7c1-t29 r1c2-t29">
<p><code dir="ltr">CONCURRENT</code> - This preference determines whether statistics will be gathered concurrently on multiple objects, or serially, one object at a time.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t29" headers="r1c1-t29">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r8c1-t29 r1c2-t29">
<p><code dir="ltr">DEGREE</code> - The value determines degree of parallelism used for gathering statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t29" headers="r1c1-t29">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r9c1-t29 r1c2-t29">
<p><code dir="ltr">ESTIMATE_PERCENT</code> - The value determines the percentage of rows to estimate.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t29" headers="r1c1-t29">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r10c1-t29 r1c2-t29">
<p><code dir="ltr">METHOD_OPT</code> - The value controls column statistics collection and histogram creation. When setting preference on global, schema, database or dictionary level, only<code dir="ltr">&#39;FOR ALL&#39;</code> syntax is allowed.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t29" headers="r1c1-t29">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r11c1-t29 r1c2-t29">
<p><code dir="ltr">NO_INVALIDATE</code> - The value controls the invalidation of dependent cursors of the tables for which statistics are being gathered.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t29" headers="r1c1-t29">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r12c1-t29 r1c2-t29">
<p><code dir="ltr">GRANULARITY</code> - The value determines granularity of statistics to collect (only pertinent if the table is partitioned)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t29" headers="r1c1-t29">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r13c1-t29 r1c2-t29">
<p><code dir="ltr">PUBLISH</code> - This value determines whether or not newly gathered statistics will be published once the gather job has completed.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t29" headers="r1c1-t29">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r14c1-t29 r1c2-t29">
<p><code dir="ltr">INCREMENTAL</code> - This value determines whether or not the global statistics of a partitioned table will be maintained without doing a full table scan.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t29" headers="r1c1-t29">&nbsp;</td>
<td class="cellalignment4329" headers="r15c1-t29 r1c2-t29">
<p><code dir="ltr">INCREMENTAL_LEVEL</code> - This value controls what synopses to collect when <code dir="ltr">INCREMENTAL</code> preference is set to <code dir="ltr">TRUE</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t29" headers="r1c1-t29">&nbsp;</td>
<td class="cellalignment4329" headers="r16c1-t29 r1c2-t29">
<p><code dir="ltr">INCREMENTAL_STALENESS</code> - This value controls how we decide a partition or subpartition as stale.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t29" headers="r1c1-t29">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r17c1-t29 r1c2-t29">
<p><code dir="ltr">STALE_PERCENT</code> - This value determines the percentage of rows in a table that have to change before the statistics on that table are deemed stale and should be regathered.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t29" headers="r1c1-t29">&nbsp;</td>
<td class="cellalignment4329" headers="r18c1-t29 r1c2-t29">
<p><code dir="ltr">GLOBAL_TEMP_TABLE_STATS</code> - This controls whether the statistics gathered for a global temporary table should be stored as shared statistics or session statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r19c1-t29" headers="r1c1-t29">&nbsp;</td>
<td class="cellalignment4329" headers="r19c1-t29 r1c2-t29">
<p><code dir="ltr">TABLE_CACHED_BLOCKS</code> - The average number of blocks cached in the buffer cache for any table we can assume when gathering the index clustering factor.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r20c1-t29" headers="r1c1-t29">&nbsp;</td>
<td class="cellalignment4329" headers="r20c1-t29 r1c2-t29">
<p><code dir="ltr">OPTIONS</code> - Determines the <code dir="ltr">options</code> parameter used in the <a href="#i1036461">GATHER_TABLE_STATS Procedure</a>. T</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10483"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or Illegal input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10484"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to connect as owner of the table, be granted <code dir="ltr">ANALYZE</code> privilege on the table, or <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege.</p>
</li>
<li>
<p>All arguments are of type <code dir="ltr">VARCHAR2</code> and values are enclosed in quotes, even when they represent numbers.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10485"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.DELETE_TABLE_PREFS(&#39;SH&#39;, &#39;SALES&#39;, &#39;CASCADE&#39;);
DBMS_STATS.DELETE_TABLE_PREFS(&#39;SH&#39;, &#39;SALES&#39;, &#39;DEGREE&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68532" class="refsect2"><a id="i1035962"></a>
<h3 class="refsect2"><a id="sthref10486"></a>DELETE_TABLE_STATS Procedure</h3>
<p>This procedure deletes table-related statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10487"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DELETE_TABLE_STATS (
   ownname          VARCHAR2, 
   tabname          VARCHAR2, 
   partname         VARCHAR2 DEFAULT NULL,
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   cascade_parts    BOOLEAN  DEFAULT TRUE, 
   cascade_columns  BOOLEAN  DEFAULT TRUE,
   cascade_indexes  BOOLEAN  DEFAULT TRUE,
   statown          VARCHAR2 DEFAULT NULL,
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param(&#39;NO_INVALIDATE&#39;)),
   force            BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10488"></a>Parameters</p>
<div id="ARPLS68533" class="tblformal">
<p class="titleintable"><a id="sthref10489"></a><a id="sthref10490"></a>Table 155-23 DELETE_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t30">Parameter</th>
<th class="cellalignment4328" id="r1c2-t30">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t30" headers="r1c1-t30">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t30 r1c2-t30">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t30" headers="r1c1-t30">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t30 r1c2-t30">
<p>Name of the table to which this column belongs</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t30" headers="r1c1-t30">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t30 r1c2-t30">
<p>Name of the table [sub]partition from which to get the statistics. If the table is partitioned and if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then the statistics are retrieved from the global table level.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t30" headers="r1c1-t30">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t30 r1c2-t30">
<p>User statistics table identifier describing from where to retrieve the statistics. If <code dir="ltr">stattab</code> is <code dir="ltr">NULL</code>, then the statistics are retrieved directly from the dictionary.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t30" headers="r1c1-t30">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t30 r1c2-t30">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code> (Only pertinent if <code dir="ltr">stattab</code> is not <code dir="ltr">NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t30" headers="r1c1-t30">
<p><code dir="ltr">cascade_parts</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t30 r1c2-t30">
<p>If the table is partitioned and if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then setting this to <code dir="ltr">TRUE</code> causes the deletion of statistics for this table for all underlying partitions as well</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t30" headers="r1c1-t30">
<p><code dir="ltr">cascade_columns</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t30 r1c2-t30">
<p>Indicates that <code dir="ltr">DELETE_COLUMN_STATS</code> should be called for all underlying columns (passing the <code dir="ltr">cascade_parts</code> parameter)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t30" headers="r1c1-t30">
<p><code dir="ltr">cascade_indexes</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t30 r1c2-t30">
<p>Indicates that <code dir="ltr">DELETE_INDEX_STATS</code> should be called for all underlying indexes (passing the <code dir="ltr">cascade_parts</code> parameter)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t30" headers="r1c1-t30">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t30 r1c2-t30">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t30" headers="r1c1-t30">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t30 r1c2-t30">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t30" headers="r1c1-t30">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t30 r1c2-t30">
<p>When value of this argument is <code dir="ltr">TRUE</code>, deletes table statistics even if locked</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10491"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
<p><code dir="ltr">ORA</code>-<code dir="ltr">20005</code>: Object statistics are locked</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10492"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68534" class="refsect2"><a id="BEIDHICC"></a>
<h3 class="refsect2"><a id="sthref10493"></a>DIFF_TABLE_STATS_IN_HISTORY Function</h3>
<p>This function can be used to compare statistics for a table from two timestamps in past and compare the statistics as of that timestamps.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10494"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DIFF_TABLE_STATS_IN_HISTORY( 
      ownname        IN  VARCHAR2,
      tabname        IN  VARCHAR2,
      time1          IN  TIMESTAMP WITH TIME ZONE,
      time2          IN  TIMESTAMP WITH TIME ZONE DEFAULT NULL,
      pctthreshold   IN  NUMBER  DEFAULT 10)
   RETURN DiffRepTab pipelined;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10495"></a>Parameters</p>
<div id="ARPLS68535" class="tblformal">
<p class="titleintable"><a id="sthref10496"></a><a id="sthref10497"></a>Table 155-24 DIFF_TABLE_STATS_IN_HISTORY Function Parameters</p>
<table class="cellalignment4330" title="DIFF_TABLE_STATS_IN_HISTORY Function Parameters" summary="This table describes the Parameters of DBMS_STATS.RESTORE_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t31">Parameter</th>
<th class="cellalignment4328" id="r1c2-t31">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t31" headers="r1c1-t31">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t31 r1c2-t31">
<p>Owner of the table. Specify <code dir="ltr">NULL</code> for current schema.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t31" headers="r1c1-t31">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t31 r1c2-t31">
<p>Table for which statistics are to be compared</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t31" headers="r1c1-t31">
<p><code dir="ltr">time1</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t31 r1c2-t31">
<p>First timestamp 1</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t31" headers="r1c1-t31">
<p><code dir="ltr">time2</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t31 r1c2-t31">
<p>Second timestamp 2</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t31" headers="r1c1-t31">
<p><code dir="ltr">pctthreshold</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t31 r1c2-t31">
<p>The function reports difference in statistics only if it exceeds this limit. The default value is 10.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10498"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</li>
<li>
<p>If the second timestamp is <code dir="ltr">NULL</code>, the function compares the current statistics in dictionary with the statistics as of the other timestamp.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68536" class="refsect2"><a id="BABCBGHG"></a>
<h3 class="refsect2"><a id="sthref10499"></a>DIFF_TABLE_STATS_IN_PENDING Function</h3>
<p>This function compares pending statistics and statistics as of a timestamp or statistics from dictionary.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10500"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DIFF_TABLE_STATS_IN_PENDING( 
      ownname        IN  VARCHAR2,
      tabname        IN  VARCHAR2,
      timestamp      IN  TIMESTAMP WITH TIME ZONE,
      pctthreshold   IN  NUMBER  DEFAULT 10)
   RETURN DiffRepTab pipelined;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10501"></a>Parameters</p>
<div id="ARPLS68537" class="tblformal">
<p class="titleintable"><a id="sthref10502"></a><a id="sthref10503"></a>Table 155-25 DIFF_TABLE_STATS_IN_PENDING Function Parameters</p>
<table class="cellalignment4330" title="DIFF_TABLE_STATS_IN_PENDING Function Parameters" summary="This table describes the Parameters of DBMS_STATS.RESTORE_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t32">Parameter</th>
<th class="cellalignment4328" id="r1c2-t32">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t32" headers="r1c1-t32">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t32 r1c2-t32">
<p>Owner of the table. Specify <code dir="ltr">NULL</code> for current schema.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t32" headers="r1c1-t32">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t32 r1c2-t32">
<p>Table for which statistics are to be compared</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t32" headers="r1c1-t32">
<p><code dir="ltr">timestamp</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t32 r1c2-t32">
<p>Time stamp to get statistics from the history</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t32" headers="r1c1-t32">
<p><code dir="ltr">pctthreshold</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t32 r1c2-t32">
<p>The function reports difference in statistics only if it exceeds this limit. The default value is 10.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10504"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</li>
<li>
<p>If the second timestamp is <code dir="ltr">NULL</code>, the function compares the current statistics in dictionary with the statistics as of the other timestamp.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68538" class="refsect2"><a id="BEICGJDD"></a>
<h3 class="refsect2"><a id="sthref10505"></a>DIFF_TABLE_STATS_IN_STATTAB Function</h3>
<p>This function can be used to compare statistics for a table from two different sources. The statistics can be drawn from</p>
<ul>
<li>
<p>two different user statistics tables</p>
</li>
<li>
<p>a single user statistics table containing 2 sets of statistics that can be identified using <code dir="ltr">statids</code></p>
</li>
<li>
<p>a user statistics table and dictionary</p>
</li>
</ul>
<p>The function also compares the statistics of the dependent objects (indexes, columns, partitions) as well. It displays statistics of the object(s) from both sources if the difference between those statistics exceeds a certain threshold (%). The threshold can be specified as an argument to the function. The statistics corresponding to the first source (<code dir="ltr">stattab1</code> or <code dir="ltr">time1</code>) will be used as basis for computing the difference percentage.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10506"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DIFF_TABLE_STATS_IN_STATTAB( 
      ownname        IN  VARCHAR2,
      tabname        IN  VARCHAR2,
      stattab1       IN  VARCHAR2,
      stattab2       IN  VARCHAR2 DEFAULT NULL,
      pctthreshold   IN  NUMBER  DEFAULT 10,
      statid1        IN  VARCHAR2 DEFAULT NULL,
      statid2        IN  VARCHAR2 DEFAULT NULL,
      stattab1own    IN  VARCHAR2 DEFAULT NULL,
      stattab2own    IN  VARCHAR2 DEFAULT NULL)
   RETURN DiffRepTab pipelined;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10507"></a>Parameters</p>
<div id="ARPLS68539" class="tblformal">
<p class="titleintable"><a id="sthref10508"></a><a id="sthref10509"></a>Table 155-26 DIFF_TABLE_STATS_IN_STATTAB Function Parameters</p>
<table class="cellalignment4330" title="DIFF_TABLE_STATS_IN_STATTAB Function Parameters" summary="This table describes the Parameters of DBMS_STATS.DIFF_TABLE_STATS_IN_STATTAB subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t33">Parameter</th>
<th class="cellalignment4328" id="r1c2-t33">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t33" headers="r1c1-t33">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t33 r1c2-t33">
<p>Owner of the table. Specify <code dir="ltr">NULL</code> for current schema.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t33" headers="r1c1-t33">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t33 r1c2-t33">
<p>Table for which statistics are to be compared</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t33" headers="r1c1-t33">
<p><code dir="ltr">stattab1</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t33 r1c2-t33">
<p>User statistics table 1</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t33" headers="r1c1-t33">
<p><code dir="ltr">stattab2</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t33 r1c2-t33">
<p>User statistics table 2. If <code dir="ltr">NULL</code>, statistics in <code dir="ltr">stattab1</code> is compared with current statistics in dictionary. This is the default. Specify same table as <code dir="ltr">stattab1</code> to compare two sets within the statistics table (see <code dir="ltr">statid</code> below).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t33" headers="r1c1-t33">
<p><code dir="ltr">pctthreshold</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t33 r1c2-t33">
<p>The function reports difference in statistics only if it exceeds this limit. The default value is 10.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t33" headers="r1c1-t33">
<p><code dir="ltr">stadid1</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t33 r1c2-t33">
<p>(optional) Identifies statistics set within <code dir="ltr">stattab1</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t33" headers="r1c1-t33">
<p><code dir="ltr">stadid2</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t33 r1c2-t33">
<p>(optional) Identifies statistics set within <code dir="ltr">stattab2</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t33" headers="r1c1-t33">
<p><code dir="ltr">stattab1own</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t33 r1c2-t33">
<p>Schema containing <code dir="ltr">stattab1</code> (if other than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t33" headers="r1c1-t33">
<p><code dir="ltr">stattab2own</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t33 r1c2-t33">
<p>Schema containing <code dir="ltr">stattab2</code> (if other than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10510"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68540" class="refsect2"><a id="BABEAECF"></a>
<h3 class="refsect2"><a id="sthref10511"></a>DROP_EXTENDED_STATS Procedure</h3>
<p>This function drops the statistics entry that is created for the user specified extension. This cancels the effects of the <a href="#BABHFIBI">CREATE_EXTENDED_STATS Function</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10512"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DROP_EXTENDED_STATS (
   ownname    VARCHAR2, 
   tabname    VARCHAR2,
   extension  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10513"></a>Parameters</p>
<div id="ARPLS68541" class="tblformal">
<p class="titleintable"><a id="sthref10514"></a><a id="sthref10515"></a>Table 155-27 DROP_EXTENDED_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="DROP_EXTENDED_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DROP_EXTENDED_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t34">Parameter</th>
<th class="cellalignment4328" id="r1c2-t34">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t34" headers="r1c1-t34">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t34 r1c2-t34">
<p>Owner name of a table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t34" headers="r1c1-t34">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t34 r1c2-t34">
<p>Name of the table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t34" headers="r1c1-t34">
<p><code dir="ltr">extension</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t34 r1c2-t34">
<p>Can be either a column group or an expression. Suppose the specified table has two column <code dir="ltr">c1</code>, <code dir="ltr">c2</code>. An example column group can be &#34;(<code dir="ltr">c1</code>, <code dir="ltr">c2</code>)&#34; and an example expression can be &#34;(<code dir="ltr">c1</code> + <code dir="ltr">c2</code>)&#34;.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10516"></a>Exceptions</p>
<ul>
<li>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges or extension does not exist</p>
</li>
<li>
<p><code dir="ltr">ORA-20001</code>: Error when processing extension</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10517"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</li>
<li>
<p>If no extended statistics set is created for the extension, this function throws an error.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68542" class="refsect2"><a id="i1035659"></a>
<h3 class="refsect2"><a id="sthref10518"></a>DROP_STAT_TABLE Procedure</h3>
<p>This procedure drops a user statistics table.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10519"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.DROP_STAT_TABLE (
   ownname VARCHAR2, 
   stattab VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10520"></a>Parameters</p>
<div id="ARPLS68543" class="tblformal">
<p class="titleintable"><a id="sthref10521"></a><a id="sthref10522"></a>Table 155-28 DROP_STAT_TABLE Procedure Parameters</p>
<table class="cellalignment4330" title="DROP_STAT_TABLE Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DROP_STAT_TABLE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t35">Parameter</th>
<th class="cellalignment4328" id="r1c2-t35">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t35" headers="r1c1-t35">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t35 r1c2-t35">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t35" headers="r1c1-t35">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t35 r1c2-t35">
<p>User statistics table identifier</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10523"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Table does not exists or insufficient privileges.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10524"></a>Usage Notes</p>
<p>To invoke this procedure you need the privileges for dropping the specified table.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68544" class="refsect2"><a id="i1035669"></a>
<h3 class="refsect2"><a id="sthref10525"></a>EXPORT_COLUMN_STATS Procedure</h3>
<p>This procedure retrieves statistics for a particular column and stores them in the user statistics table identified by <code dir="ltr">stattab</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10526"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.EXPORT_COLUMN_STATS (
   ownname  VARCHAR2, 
   tabname  VARCHAR2, 
   colname  VARCHAR2, 
   partname VARCHAR2 DEFAULT NULL,
   stattab  VARCHAR2, 
   statid   VARCHAR2 DEFAULT NULL,
   statown  VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10527"></a>Parameters</p>
<div id="ARPLS68545" class="tblformal">
<p class="titleintable"><a id="sthref10528"></a><a id="sthref10529"></a>Table 155-29 EXPORT_COLUMN_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="EXPORT_COLUMN_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_COLUMN_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t36">Parameter</th>
<th class="cellalignment4328" id="r1c2-t36">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t36" headers="r1c1-t36">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t36 r1c2-t36">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t36" headers="r1c1-t36">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t36 r1c2-t36">
<p>Name of the table to which this column belongs</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t36" headers="r1c1-t36">
<p><code dir="ltr">colname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t36 r1c2-t36">
<p>Name of the column or extension</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t36" headers="r1c1-t36">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t36 r1c2-t36">
<p>Name of the table partition. If the table is partitioned and if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then global and partition column statistics are exported.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t36" headers="r1c1-t36">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t36 r1c2-t36">
<p>User statistics table identifier describing where to store the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t36" headers="r1c1-t36">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t36 r1c2-t36">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t36" headers="r1c1-t36">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t36 r1c2-t36">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10530"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10531"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68546" class="refsect2"><a id="BEIDACAE"></a>
<h3 class="refsect2"><a id="sthref10532"></a>EXPORT_DATABASE_PREFS Procedure</h3>
<p>This procedure is used to export the statistics preferences of all the tables, excluding the tables owned by Oracle. These tables can by included by passing <code dir="ltr">TRUE</code> for the <code dir="ltr">add_sys</code> parameter.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10533"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.EXPORT_DATABASE_PREFS (
    stattab    IN  VARCHAR2,
    statid     IN  VARCHAR2 DEFAULT NULL,
    statown    IN  VARCHAR2 DEFAULT NULL
    add_sys    IN  BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10534"></a>Parameters</p>
<div id="ARPLS68547" class="tblformal">
<p class="titleintable"><a id="sthref10535"></a><a id="sthref10536"></a>Table 155-30 EXPORT_DATABASE_PREFS Procedure Parameters</p>
<table class="cellalignment4330" title="EXPORT_DATABASE_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_DATABASE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t37">Parameter</th>
<th class="cellalignment4328" id="r1c2-t37">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t37" headers="r1c1-t37">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t37 r1c2-t37">
<p>Statistics table name to where statistics should be exported</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t37" headers="r1c1-t37">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t37 r1c2-t37">
<p>(Optional) Identifier to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t37" headers="r1c1-t37">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t37 r1c2-t37">
<p>Schema containing <code dir="ltr">stattab</code> (if other than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t37" headers="r1c1-t37">
<p><code dir="ltr">add_sys</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t37 r1c2-t37">
<p>Value <code dir="ltr">TRUE</code> will include the Oracle-owned tables</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10537"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10538"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to have the <code dir="ltr">SYSDBA</code> role, or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privileges.</p>
</li>
<li>
<p>All arguments are of type <code dir="ltr">VARCHAR2</code> and values are enclosed in quotes.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10539"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.EXPORT_DATABASE_PREFS(&#39;STATTAB&#39;, statown=&gt;&#39;SH&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68548" class="refsect2"><a id="i1041371"></a>
<h3 class="refsect2"><a id="sthref10540"></a>EXPORT_DATABASE_STATS Procedure</h3>
<p>This procedure retrieves statistics for all objects in the database and stores them in the user statistics tables identified by <code dir="ltr">statown</code>.<code dir="ltr">stattab</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10541"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.EXPORT_DATABASE_STATS (
   stattab         VARCHAR2, 
   statid          VARCHAR2 DEFAULT NULL,
   statown         VARCHAR2 DEFAULT NULL,
   stat_category   VARCHAR2 DEFAULT DEFAULT_STAT_CATEGORY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10542"></a>Parameters</p>
<div id="ARPLS68549" class="tblformal">
<p class="titleintable"><a id="sthref10543"></a><a id="sthref10544"></a>Table 155-31 EXPORT_DATABASE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="EXPORT_DATABASE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_DATABASE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t38">Parameter</th>
<th class="cellalignment4328" id="r1c2-t38">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t38" headers="r1c1-t38">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t38 r1c2-t38">
<p>User statistics table identifier describing where to store the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t38" headers="r1c1-t38">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t38 r1c2-t38">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t38" headers="r1c1-t38">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t38 r1c2-t38">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t38" headers="r1c1-t38">
<p><code dir="ltr">stat_category</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t38 r1c2-t38">
<p>Specifies what statistics to import, accepting multiple values separated by a comma. Values supported:</p>
<ul>
<li>
<p><code dir="ltr">OBJECT_STATS</code> - table statistics, column statistics and index statistics (Default)</p>
</li>
<li>
<p><code dir="ltr">SYNOPSES</code> - information to support incremental statistics</p>
</li>
</ul>
<p>If <code dir="ltr">&#39;OBJECT_STATS, SYNOPSES&#39;</code> is specified, table statistics, column statistics, index statistics and synopses are deleted.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10545"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10546"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68550" class="refsect2"><a id="i1042811"></a>
<h3 class="refsect2"><a id="sthref10547"></a>EXPORT_DICTIONARY_STATS Procedure</h3>
<p>This procedure retrieves statistics for all dictionary schemas (&#39;<code dir="ltr">SYS</code>&#39;, &#39;<code dir="ltr">SYSTEM</code>&#39; and RDBMS component schemas) and stores them in the user statistics table identified by <code dir="ltr">stattab</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10548"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.EXPORT_DICTIONARY_STATS (
   stattab         VARCHAR2, 
   statid          VARCHAR2 DEFAULT NULL,
   statown         VARCHAR2 DEFAULT NULL,
   stat_category   VARCHAR2 DEFAULT DEFAULT_STAT_CATEGORY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10549"></a>Parameters</p>
<div id="ARPLS68551" class="tblformal">
<p class="titleintable"><a id="sthref10550"></a><a id="sthref10551"></a>Table 155-32 EXPORT_DICTIONARY_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="EXPORT_DICTIONARY_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_DICTIONARY_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t39">Parameter</th>
<th class="cellalignment4328" id="r1c2-t39">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t39" headers="r1c1-t39">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t39 r1c2-t39">
<p>User statistics table identifier describing where to store the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t39" headers="r1c1-t39">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t39 r1c2-t39">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t39" headers="r1c1-t39">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t39 r1c2-t39">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t39" headers="r1c1-t39">
<p><code dir="ltr">stat_category</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t39 r1c2-t39">
<p>Specifies what statistics to import, accepting multiple values separated by a comma. Values supported:</p>
<ul>
<li>
<p><code dir="ltr">OBJECT_STATS</code> - table statistics, column statistics and index statistics (Default)</p>
</li>
<li>
<p><code dir="ltr">SYNOPSES</code> - information to support incremental statistics</p>
</li>
</ul>
<p>If <code dir="ltr">&#39;OBJECT_STATS, SYNOPSES&#39;</code> is specified, table statistics, column statistics, index statistics and synopses are deleted.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10552"></a>Usage Notes</p>
<ul>
<li>
<p>You must have the <code dir="ltr">SYSDBA</code> or <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege to execute this procedure.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10553"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68552" class="refsect2"><a id="i1041507"></a>
<h3 class="refsect2"><a id="sthref10554"></a>EXPORT_FIXED_OBJECTS_STATS Procedure</h3>
<p>This procedure retrieves statistics for fixed tables and stores them in the user statistics table identified by <code dir="ltr">stattab</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10555"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.EXPORT_FIXED_OBJECTS_STATS (
   stattab  VARCHAR2, 
   statid   VARCHAR2 DEFAULT NULL,
   statown  VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10556"></a>Parameters</p>
<div id="ARPLS68553" class="tblformal">
<p class="titleintable"><a id="sthref10557"></a><a id="sthref10558"></a>Table 155-33 EXPORT_FIXED_OBJECTS_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="EXPORT_FIXED_OBJECTS_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_FIXED_OBJECTS_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t40">Parameter</th>
<th class="cellalignment4328" id="r1c2-t40">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t40" headers="r1c1-t40">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t40 r1c2-t40">
<p>User statistics table identifier describing where to store the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t40" headers="r1c1-t40">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t40 r1c2-t40">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t40" headers="r1c1-t40">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t40 r1c2-t40">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10559"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10560"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this subprogram you need to be connected as <code dir="ltr">SYS</code> or have the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68554" class="refsect2"><a id="i1041496"></a>
<h3 class="refsect2"><a id="sthref10561"></a>EXPORT_INDEX_STATS Procedure</h3>
<p>This procedure retrieves statistics for a particular index and stores them in the user statistics table identified by <code dir="ltr">stattab</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10562"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.EXPORT_INDEX_STATS (
   ownname  VARCHAR2, 
   indname  VARCHAR2, 
   partname VARCHAR2 DEFAULT NULL,
   stattab  VARCHAR2, 
   statid   VARCHAR2 DEFAULT NULL,
   statown  VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10563"></a>Parameters</p>
<div id="ARPLS68555" class="tblformal">
<p class="titleintable"><a id="sthref10564"></a><a id="sthref10565"></a>Table 155-34 EXPORT_INDEX_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="EXPORT_INDEX_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_INDEX_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t41">Parameter</th>
<th class="cellalignment4328" id="r1c2-t41">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t41" headers="r1c1-t41">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t41 r1c2-t41">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t41" headers="r1c1-t41">
<p><code dir="ltr">indname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t41 r1c2-t41">
<p>Name of the index</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t41" headers="r1c1-t41">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t41 r1c2-t41">
<p>Name of the index partition. If the index is partitioned and if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then global and partition index statistics are exported.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t41" headers="r1c1-t41">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t41 r1c2-t41">
<p>User statistics table identifier describing where to store the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t41" headers="r1c1-t41">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t41 r1c2-t41">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t41" headers="r1c1-t41">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t41 r1c2-t41">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10566"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10567"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68556" class="refsect2"><a id="BEIEBEAE"></a>
<h3 class="refsect2"><a id="sthref10568"></a>EXPORT_PENDING_STATS Procedure</h3>
<p>This procedure is used to export the statistics gathered and stored as pending.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10569"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.EXPORT_PENDING_STATS (
    ownname    IN  VARCHAR2  DEFAULT USER,
    tabname    IN  VARCHAR2,
    stattab    IN  VARCHAR2,
    statid     IN  VARCHAR2 DEFAULT NULL,
    statown    IN  VARCHAR2 DEFAULT USER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10570"></a>Parameters</p>
<div id="ARPLS68557" class="tblformal">
<p class="titleintable"><a id="sthref10571"></a><a id="sthref10572"></a>Table 155-35 EXPORT_PENDING_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="EXPORT_PENDING_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_PENDING_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t42">Parameter</th>
<th class="cellalignment4328" id="r1c2-t42">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t42" headers="r1c1-t42">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t42 r1c2-t42">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t42" headers="r1c1-t42">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t42 r1c2-t42">
<p>Table name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t42" headers="r1c1-t42">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t42 r1c2-t42">
<p>Statistics table name to where to export the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t42" headers="r1c1-t42">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t42 r1c2-t42">
<p>(Optional) Identifier to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t42" headers="r1c1-t42">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t42 r1c2-t42">
<p>Schema containing <code dir="ltr">stattab</code> (if other than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10573"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10574"></a>Usage Notes</p>
<ul>
<li>
<p>If the parameter <code dir="ltr">tabname</code> is <code dir="ltr">NULL</code> then export applies to all tables of the specified schema.</p>
</li>
<li>
<p>The default owner/schema is the user who runs the procedure.</p>
</li>
<li>
<p>To run this procedure, you need to have the same privilege for gathering statistics on the tables that will be touched by this procedure.</p>
</li>
<li>
<p>All arguments are of type <code dir="ltr">VARCHAR2</code> and values are enclosed in quotes.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10575"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.EXPORT_PENDING_STATS(NULL, NULL, &#39;MY_STAT_TABLE&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68558" class="refsect2"><a id="BEIFJJDF"></a>
<h3 class="refsect2"><a id="sthref10576"></a>EXPORT_SCHEMA_PREFS Procedure</h3>
<p>This procedure is used to export the statistics preferences of all the tables owned by the specified owner name.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10577"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.EXPORT_SCHEMA_PREFS (
    ownname    IN  VARCHAR2,
    stattab    IN  VARCHAR2,
    statid     IN  VARCHAR2 DEFAULT NULL,
    statown    IN  VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10578"></a>Parameters</p>
<div id="ARPLS68559" class="tblformal">
<p class="titleintable"><a id="sthref10579"></a><a id="sthref10580"></a>Table 155-36 EXPORT_SCHEMA_PREFS Procedure Parameters</p>
<table class="cellalignment4330" title="EXPORT_SCHEMA_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_SCHEMA_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t43">Parameter</th>
<th class="cellalignment4328" id="r1c2-t43">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t43" headers="r1c1-t43">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t43 r1c2-t43">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t43" headers="r1c1-t43">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t43 r1c2-t43">
<p>Statistics table name to where to export the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t43" headers="r1c1-t43">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t43 r1c2-t43">
<p>(Optional) Identifier to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t43" headers="r1c1-t43">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t43 r1c2-t43">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10581"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10582"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to connect as owner, or have the <code dir="ltr">SYSDBA</code> privilege, or have the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege.</p>
</li>
<li>
<p>All arguments are of type <code dir="ltr">VARCHAR2</code> and values are enclosed in quotes.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10583"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.EXPORT_SCHEMA_PREFS(&#39;SH&#39;, &#39;STAT&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68560" class="refsect2"><a id="i1036059"></a>
<h3 class="refsect2"><a id="sthref10584"></a>EXPORT_SCHEMA_STATS Procedure</h3>
<p>This procedure retrieves statistics for all objects in the schema identified by <code dir="ltr">ownname</code> and stores them in the user statistics tables identified by <code dir="ltr">stattab</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10585"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.EXPORT_SCHEMA_STATS (
   ownname         VARCHAR2,
   stattab         VARCHAR2, 
   statid          VARCHAR2 DEFAULT NULL,
   statown         VARCHAR2 DEFAULT NULL,
   stat_category   VARCHAR2 DEFAULT DEFAULT_STAT_CATEGORY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10586"></a>Parameters</p>
<div id="ARPLS68561" class="tblformal">
<p class="titleintable"><a id="sthref10587"></a><a id="sthref10588"></a>Table 155-37 EXPORT_SCHEMA_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="EXPORT_SCHEMA_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t44">Parameter</th>
<th class="cellalignment4328" id="r1c2-t44">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t44" headers="r1c1-t44">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t44 r1c2-t44">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t44" headers="r1c1-t44">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t44 r1c2-t44">
<p>User statistics table identifier describing where to store the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t44" headers="r1c1-t44">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t44 r1c2-t44">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t44" headers="r1c1-t44">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t44 r1c2-t44">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t44" headers="r1c1-t44">
<p><code dir="ltr">stat_category</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t44 r1c2-t44">
<p>Specifies what statistics to import, accepting multiple values separated by a comma. Values supported:</p>
<ul>
<li>
<p><code dir="ltr">OBJECT_STATS</code> - table statistics, column statistics and index statistics (Default)</p>
</li>
<li>
<p><code dir="ltr">SYNOPSES</code> - information to support incremental statistics</p>
</li>
</ul>
<p>If <code dir="ltr">&#39;OBJECT_STATS, SYNOPSES&#39;</code> is specified, table statistics, column statistics, index statistics and synopses are deleted.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10589"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10590"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68562" class="refsect2"><a id="i1035776"></a>
<h3 class="refsect2"><a id="sthref10591"></a>EXPORT_SYSTEM_STATS Procedure</h3>
<p>This procedure retrieves system statistics and stores them in the user statistics table, identified by <code dir="ltr">stattab</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10592"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.EXPORT_SYSTEM_STATS (
   stattab       VARCHAR2, 
   statid        VARCHAR2 DEFAULT NULL,
   statown       VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10593"></a>Parameters</p>
<div id="ARPLS68563" class="tblformal">
<p class="titleintable"><a id="sthref10594"></a><a id="sthref10595"></a>Table 155-38 EXPORT_SYSTEM_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="EXPORT_SYSTEM_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t45">Parameter</th>
<th class="cellalignment4328" id="r1c2-t45">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t45" headers="r1c1-t45">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t45 r1c2-t45">
<p>Identifier of the user statistics table that describes where the statistics will be stored</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t45" headers="r1c1-t45">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t45 r1c2-t45">
<p>Optional identifier associated with the statistics stored from the <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t45" headers="r1c1-t45">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t45 r1c2-t45">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10596"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table; may need to be upgraded</p>
<p><code dir="ltr">ORA-20003</code>: Unable to export system statistics</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10597"></a>Usage Notes</p>
<p>To run this procedure, you need the <code dir="ltr">GATHER_SYSTEM_STATISTICS</code> role.</p>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68564" class="refsect2"><a id="BEIBGBHF"></a>
<h3 class="refsect2"><a id="sthref10598"></a>EXPORT_TABLE_PREFS Procedure</h3>
<p>This procedure is used to export the statistics preferences of the specified table in the specified schema into the specified statistics table.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10599"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.EXPORT_TABLE_PREFS (
    ownname    IN  VARCHAR2,
    tabname    IN  VARCHAR2,
    stattab    IN  VARCHAR2,
    statid     IN  VARCHAR2 DEFAULT NULL,
    statown    IN  VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10600"></a>Parameters</p>
<div id="ARPLS68565" class="tblformal">
<p class="titleintable"><a id="sthref10601"></a><a id="sthref10602"></a>Table 155-39 EXPORT_TABLE_PREFS Procedure Parameters</p>
<table class="cellalignment4330" title="EXPORT_TABLE_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_TABLE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t46">Parameter</th>
<th class="cellalignment4328" id="r1c2-t46">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t46" headers="r1c1-t46">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t46 r1c2-t46">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t46" headers="r1c1-t46">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t46 r1c2-t46">
<p>Table name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t46" headers="r1c1-t46">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t46 r1c2-t46">
<p>Statistics table name where to export the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t46" headers="r1c1-t46">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t46 r1c2-t46">
<p>Optional identifier to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t46" headers="r1c1-t46">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t46 r1c2-t46">
<p>Schema containing <code dir="ltr">stattab</code> (if other than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10603"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10604"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to connect as owner of the table, or have the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege.</p>
</li>
<li>
<p>All arguments are of type <code dir="ltr">VARCHAR2</code> and values are enclosed in quotes.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10605"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.EXPORT_TABLE_PREFS(&#39;SH&#39;, &#39;SALES&#39;, &#39;STAT&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68566" class="refsect2"><a id="i1035814"></a>
<h3 class="refsect2"><a id="sthref10606"></a>EXPORT_TABLE_STATS Procedure</h3>
<p>This procedure retrieves statistics for a particular table and stores them in the user statistics table. Cascade results in all index statistics associated with the specified table being exported as well.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10607"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.EXPORT_TABLE_STATS (
   ownname         VARCHAR2, 
   tabname         VARCHAR2, 
   partname        VARCHAR2 DEFAULT NULL,
   stattab         VARCHAR2, 
   statid          VARCHAR2 DEFAULT NULL,
   cascade         BOOLEAN  DEFAULT TRUE,
   statown         VARCHAR2 DEFAULT NULL,
   stat_category   VARCHAR2 DEFAULT DEFAULT_STAT_CATEGORY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10608"></a>Parameters</p>
<div id="ARPLS68567" class="tblformal">
<p class="titleintable"><a id="sthref10609"></a><a id="sthref10610"></a>Table 155-40 EXPORT_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="EXPORT_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t47">Parameter</th>
<th class="cellalignment4328" id="r1c2-t47">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t47" headers="r1c1-t47">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t47 r1c2-t47">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t47" headers="r1c1-t47">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t47 r1c2-t47">
<p>Name of the table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t47" headers="r1c1-t47">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t47 r1c2-t47">
<p>Name of the table partition. If the table is partitioned and if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then global and partition table statistics are exported.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t47" headers="r1c1-t47">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t47 r1c2-t47">
<p>User statistics table identifier describing where to store the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t47" headers="r1c1-t47">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t47 r1c2-t47">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t47" headers="r1c1-t47">
<p><code dir="ltr">cascade</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t47 r1c2-t47">
<p>If true, then column and index statistics for this table are also exported</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t47" headers="r1c1-t47">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t47 r1c2-t47">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t47" headers="r1c1-t47">
<p><code dir="ltr">stat_category</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t47 r1c2-t47">
<p>Specifies what statistics to import, accepting multiple values separated by a comma. Values supported:</p>
<ul>
<li>
<p><code dir="ltr">OBJECT_STATS</code> - table statistics, column statistics and index statistics (Default)</p>
</li>
<li>
<p><code dir="ltr">SYNOPSES</code> - information to support incremental statistics</p>
</li>
</ul>
<p>If <code dir="ltr">&#39;OBJECT_STATS, SYNOPSES&#39;</code> is specified, table statistics, column statistics, index statistics and synopses are deleted.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10611"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10612"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68568" class="refsect2"><a id="i1036624"></a>
<h3 class="refsect2"><a id="sthref10613"></a>FLUSH_DATABASE_MONITORING_INFO Procedure</h3>
<p>This procedure flushes in-memory monitoring information for all tables in the dictionary. Corresponding entries in the <code dir="ltr">*_TAB_MODIFICATIONS</code>, <code dir="ltr">*_TAB_STATISTICS</code> and <code dir="ltr">*_IND_STATISTICS</code> views are updated immediately, without waiting for the Oracle database to flush them periodically. This procedure is useful when you need up-to-date information in those views. Because the <code dir="ltr">GATHER_*_STATS</code> procedures internally flush monitoring information, it is not necessary to run this procedure before gathering the statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10614"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.FLUSH_DATABASE_MONITORING_INFO; 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10615"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10616"></a>Usage Notes</p>
<p>The <code dir="ltr">ANALYZE_ANY</code> system privilege is required to run this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68569" class="refsect2"><a id="i1036194"></a>
<h3 class="refsect2"><a id="sthref10617"></a>GATHER_DATABASE_STATS Procedures</h3>
<p>This procedure gathers statistics for all objects in the database.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10618"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GATHER_DATABASE_STATS (
   estimate_percent NUMBER   DEFAULT to_estimate_percent_type 
                                                (get_param(&#39;ESTIMATE_PERCENT&#39;)),
   block_sample     BOOLEAN  DEFAULT FALSE,
   method_opt       VARCHAR2 DEFAULT get_param(&#39;METHOD_OPT&#39;),
   degree           NUMBER   DEFAULT to_degree_type(get_param(&#39;DEGREE&#39;)),
   granularity      VARCHAR2 DEFAULT GET_PARAM(&#39;GRANULARITY&#39;), 
   cascade          BOOLEAN  DEFAULT to_cascade_type(get_param(&#39;CASCADE&#39;)),
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   options          VARCHAR2 DEFAULT &#39;GATHER&#39;,
   objlist          OUT      ObjectTab,
   statown          VARCHAR2 DEFAULT NULL,
   gather_sys       BOOLEAN  DEFAULT TRUE,
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param(&#39;NO_INVALIDATE&#39;)),
   obj_filter_list ObjectTab DEFAULT NULL);

DBMS_STATS.GATHER_DATABASE_STATS (
   estimate_percent NUMBER   DEFAULT to_estimate_percent_type 
                                                (get_param(&#39;ESTIMATE_PERCENT&#39;)), 
   block_sample     BOOLEAN  DEFAULT FALSE,
   method_opt       VARCHAR2 DEFAULT get_param(&#39;METHOD_OPT&#39;),
   degree           NUMBER   DEFAULT to_degree_type(get_param(&#39;DEGREE&#39;)),
   granularity      VARCHAR2 DEFAULT GET_PARAM(&#39;GRANULARITY&#39;), 
   cascade          BOOLEAN  DEFAULT to_cascade_type(get_param(&#39;CASCADE&#39;)),
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   options          VARCHAR2 DEFAULT &#39;GATHER&#39;,
   statown          VARCHAR2 DEFAULT NULL,
   gather_sys       BOOLEAN  DEFAULT TRUE,
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param(&#39;NO_INVALIDATE&#39;)),
   obj_filter_list ObjectTab DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10619"></a>Parameters</p>
<div id="ARPLS68570" class="tblformal">
<p class="titleintable"><a id="sthref10620"></a><a id="sthref10621"></a>Table 155-41 GATHER_DATABASE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="GATHER_DATABASE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GATHER_DATABASE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t48">Parameter</th>
<th class="cellalignment4328" id="r1c2-t48">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t48" headers="r1c1-t48">
<p><code dir="ltr">estimate_percent</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t48 r1c2-t48">
<p>Percentage of rows to estimate (<code dir="ltr">NULL</code> means compute): The valid range is [0.000001,100]. Use the constant <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t48" headers="r1c1-t48">
<p><code dir="ltr">block_sample</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t48 r1c2-t48">
<p>Whether or not to use random block sampling instead of random row sampling. Random block sampling is more efficient, but if the data is not randomly distributed on disk, then the sample values may be somewhat correlated. Only pertinent when doing an estimate statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t48" headers="r1c1-t48">
<p><code dir="ltr">method_opt</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t48 r1c2-t48">
<p>When setting preference on global, schema, database or dictionary level, only<code dir="ltr">&#39;FOR ALL&#39;</code> syntax is allowed.:</p>
<ul>
<li>
<p><code dir="ltr">FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code dir="ltr">[size_clause]</code></p>
</li>
</ul>
<p><code dir="ltr">size_clause</code> is defined as <code dir="ltr">size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<br/>
<code dir="ltr">- integer</code> : Number of histogram buckets. Must be in the range [1,2048].<br/>
<code dir="ltr">- REPEAT</code> : Collects histograms only on the columns that already have histograms.<br/>
<code dir="ltr">- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br/>
<code dir="ltr">- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.
<p>The default is <code dir="ltr">FOR ALL COLUMNS SIZE AUTO</code>.The value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t48" headers="r1c1-t48">
<p><code dir="ltr">degree</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t48 r1c2-t48">
<p>Degree of parallelism. The default for <code dir="ltr">degree</code> is <code dir="ltr">NULL</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. <code dir="ltr">NULL</code> means use the table default value specified by the <code dir="ltr">DEGREE</code> clause in the <code dir="ltr">CREATE TABLE</code> or <code dir="ltr">ALTER TABLE</code> statement. Use the constant <code dir="ltr">DBMS_STATS.DEFAULT_DEGREE</code> to specify the default value based on the initialization parameters. The <code dir="ltr">AUTO_DEGREE</code> value determines the degree of parallelism automatically. This is between <code dir="ltr">1</code> (serial execution) and <code dir="ltr">DEFAULT_DEGREE</code> (the system default value based on number of CPUs and initialization parameters) according to the size of the object. When using <code dir="ltr">DEGREE=&gt;NULL</code>, <code dir="ltr">DEGREE=&gt;n</code>, or <code dir="ltr">DEGREE=&gt;DBMS_STATS.DEFAULT_DEGREE</code>, the current implementation of <code dir="ltr">DBMS_STATS</code> may use serial execution if the size of the object does not warrant parallel execution.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t48" headers="r1c1-t48">
<p><code dir="ltr">granularity</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t48 r1c2-t48">
<p>Granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code dir="ltr">&#39;ALL&#39;</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code dir="ltr">&#39;AUTO&#39;</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code dir="ltr">&#39;DEFAULT&#39;</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the &#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; for this functionality. Note that the default value is now &#39;<code dir="ltr">AUTO</code>&#39;.</p>
<p><code dir="ltr">&#39;GLOBAL&#39;</code> - Gathers global statistics</p>
<p>&#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code dir="ltr">&#39;PARTITION</code> &#39;- Gathers partition-level statistics</p>
<p><code dir="ltr">&#39;SUBPARTITION&#39;</code> - Gathers subpartition-level statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t48" headers="r1c1-t48">
<p><code dir="ltr">cascade</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t48 r1c2-t48">
<p>Gather statistics on the indexes as well. Using this option is equivalent to running the <a href="#i1036276">GATHER_INDEX_STATS Procedure</a> on each of the indexes in the database in addition to gathering table and column statistics. Use the constant <code dir="ltr">DBMS_STATS.AUTO_CASCADE</code> to have Oracle determine whether index statistics to be collected or not. This is the default. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t48" headers="r1c1-t48">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t48 r1c2-t48">
<p>User statistics table identifier describing where to save the current statistics.</p>
<p>The statistics table is assumed to reside in the same schema as the object being analyzed, so there must be one such table in each schema to use this option.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t48" headers="r1c1-t48">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t48 r1c2-t48">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t48" headers="r1c1-t48">
<p><code dir="ltr">options</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t48 r1c2-t48">
<p>Further specification of which objects to gather statistics for:</p>
<p><code dir="ltr">GATHER</code>: (Default) Gathers statistics on all objects in the schema.</p>
<p><code dir="ltr">GATHER</code> <code dir="ltr">AUTO</code>: Gathers all necessary statistics automatically. Oracle implicitly determines which objects need new statistics, and determines how to gather those statistics. When <code dir="ltr">GATHER AUTO</code> is specified, the only additional valid parameters are <code dir="ltr">stattab</code>, <code dir="ltr">statid</code>, <code dir="ltr">objlist</code> and <code dir="ltr">statown</code>; all other parameter settings are ignored. Returns a list of processed objects.</p>
<p><code dir="ltr">GATHER</code> <code dir="ltr">STALE</code>: Gathers statistics on stale objects as determined by looking at the *<code dir="ltr">_tab_modifications</code> views. Also, return a list of objects found to be stale.</p>
<p><code dir="ltr">GATHER</code> <code dir="ltr">EMPTY</code>: Gathers statistics on objects which currently have no statistics. Return a list of objects found to have no statistics.</p>
<p><code dir="ltr">LIST AUTO</code>: Returns a list of objects to be processed with <code dir="ltr">GATHER AUTO</code></p>
<p><code dir="ltr">LIST</code> <code dir="ltr">STALE</code>: Returns a list of stale objects as determined by looking at the *<code dir="ltr">_tab_modifications</code> views</p>
<p><code dir="ltr">LIST</code> <code dir="ltr">EMPTY</code>: Returns a list of objects which currently have no statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t48" headers="r1c1-t48">
<p><code dir="ltr">objlist</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t48 r1c2-t48">
<p>List of objects found to be stale or empty</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t48" headers="r1c1-t48">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t48 r1c2-t48">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t48" headers="r1c1-t48">
<p><code dir="ltr">gather_sys</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t48 r1c2-t48">
<p>Gathers statistics on the objects owned by the <code dir="ltr">&#39;SYS&#39;</code> user</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t48" headers="r1c1-t48">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t48 r1c2-t48">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t48" headers="r1c1-t48">
<p><code dir="ltr">obj_filter_list</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t48 r1c2-t48">
<p>A list of object filters. When provided, <code dir="ltr">GATHER_DATABASE_STATS</code> will gather statistics only on objects which satisfy at least one object filter in the list as needed. In a single object filter, we can specify the constraints on the object attributes. The attribute values specified in the object filter are case- insensitive unless double-quoted. Wildcard is allowed in the attribute values. Suppose non-<code dir="ltr">NULL</code> values s1, s2, ... are specified for attributes a1, a2, ... in one object filter. An object o is said to satisfy this object filter if (o.a1 like s1) and (o.a2 like s2) and ... is true. See <a href="#BABBFCJG">Applying an Object Filter List</a>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10622"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Bad input value</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10623"></a>Usage Notes</p>
<p>To run this procedure, you need to have the <code dir="ltr">SYSDBA</code> role or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privileges.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68571" class="refsect2"><a id="i1055451"></a>
<h3 class="refsect2"><a id="sthref10624"></a>GATHER_DICTIONARY_STATS Procedure</h3>
<p>This procedure gathers statistics for dictionary schemas &#39;<code dir="ltr">SYS</code>&#39;, &#39;<code dir="ltr">SYSTEM</code>&#39; and schemas of RDBMS components.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10625"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GATHER_DICTIONARY_STATS (
   comp_id          VARCHAR2 DEFAULT NULL, 
   estimate_percent NUMBER   DEFAULT to_estimate_percent_type 
                                                (get_param(&#39;ESTIMATE_PERCENT&#39;)),
   block_sample     BOOLEAN  DEFAULT FALSE,
   method_opt       VARCHAR2 DEFAULT get_param(&#39;METHOD_OPT&#39;),
   degree           NUMBER   DEFAULT to_degree_type(get_param(&#39;DEGREE&#39;)),
   granularity      VARCHAR2 DEFAULT GET_PARAM(&#39;GRANULARITY&#39;),
   cascade          BOOLEAN  DEFAULT to_cascade_type(get_param(&#39;CASCADE&#39;)),
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   options          VARCHAR2 DEFAULT &#39;GATHER AUTO&#39;, 
   objlist    OUT   ObjectTab,
   statown          VARCHAR2 DEFAULT NULL,
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param(&#39;NO_INVALIDATE&#39;)),
   obj_filter_list ObjectTab DEFAULT NULL);

DBMS_STATS.GATHER_DICTIONARY_STATS (
   comp_id           VARCHAR2 DEFAULT NULL,
   estimate_percent  NUMBER DEFAULT 
                          to_estimate_percent_type(GET_PARAM(&#39;ESTIMATE_PERCENT&#39;)),
   block_sample      BOOLEAN DEFAULT FALSE,
   method_opt        VARCHAR2 DEFAULT GET_PARAM(&#39;METHOD_OPT&#39;),
   degree            NUMBER DEFAULT to_degree_type(GET_PARAM(&#39;DEGREE&#39;)),
   granularity       VARCHAR2 DEFAULT GET_PARAM(&#39;GRANULARITY&#39;),
   cascade           BOOLEAN DEFAULT to_cascade_type(GET_PARAM(&#39;CASCADE&#39;)),
   stattab           VARCHAR2 DEFAULT NULL, 
   statid            VARCHAR2 DEFAULT NULL,
   options           VARCHAR2 DEFAULT &#39;GATHER AUTO&#39;, 
   statown           VARCHAR2 DEFAULT NULL,
   no_invalidate     BOOLEAN DEFAULT
                               to_no_invalidate_type(get_param(&#39;NO_INVALIDATE&#39;)),
   obj_filter_list   ObjectTab DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10626"></a>Parameters</p>
<div id="ARPLS68572" class="tblformal">
<p class="titleintable"><a id="sthref10627"></a><a id="sthref10628"></a>Table 155-42 GATHER_DICTIONARY_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="GATHER_DICTIONARY_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GATHER_DICTIONARY_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t49">Parameter</th>
<th class="cellalignment4328" id="r1c2-t49">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t49" headers="r1c1-t49">
<p><code dir="ltr">comp_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t49 r1c2-t49">
<p>Component id of the schema to analyze (<code dir="ltr">NULL</code> will result in analyzing schemas of all RDBMS components).Please refer to <code dir="ltr">comp_id</code> column of <code dir="ltr">DBA_REGISTRY</code> view. The procedure always gather statistics on &#39;<code dir="ltr">SYS</code>&#39; and &#39;<code dir="ltr">SYSTEM</code>&#39; schemas regardless of this argument.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t49" headers="r1c1-t49">
<p><code dir="ltr">estimate_percent</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t49 r1c2-t49">
<p>Percentage of rows to estimate (<code dir="ltr">NULL</code> means compute). The valid range is <code dir="ltr">[0.000001,100]</code>. Use the constant <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a><code dir="ltr">.</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t49" headers="r1c1-t49">
<p><code dir="ltr">block_sample</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t49 r1c2-t49">
<p>Determines whether or not to use random block sampling instead of random row sampling. Random block sampling is more efficient, but if the data is not randomly distributed on disk then the sample values may be somewhat correlated. Only pertinent when performing estimate statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t49" headers="r1c1-t49">
<p><code dir="ltr">method_opt</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t49 r1c2-t49">
<p>Accepts:</p>
<ul>
<li>
<p><code dir="ltr">FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code dir="ltr">[size_clause]</code></p>
</li>
</ul>
<p><code dir="ltr">size_clause</code> is defined as <code dir="ltr">size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<br/>
<code dir="ltr">- integer</code> : Number of histogram buckets. Must be in the range [1,2048].<br/>
<code dir="ltr">- REPEAT</code> : Collects histograms only on the columns that already have histograms.<br/>
<code dir="ltr">- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br/>
<code dir="ltr">- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.
<p>The default is <code dir="ltr">FOR ALL COLUMNS SIZE AUTO</code>.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t49" headers="r1c1-t49">
<p><code dir="ltr">degree</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t49 r1c2-t49">
<p>Degree of parallelism. The default for <code dir="ltr">degree</code> is <code dir="ltr">NULL</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. <code dir="ltr">NULL</code> means use the table default value specified by the <code dir="ltr">DEGREE</code> clause in the <code dir="ltr">CREATE TABLE</code> or <code dir="ltr">ALTER TABLE</code> statement. Use the constant <code dir="ltr">DBMS_STATS.DEFAULT_DEGREE</code> to specify the default value based on the initialization parameters. The <code dir="ltr">AUTO_DEGREE</code> value determines the degree of parallelism automatically. This is between <code dir="ltr">1</code> (serial execution) and <code dir="ltr">DEFAULT_DEGREE</code> (the system default value based on number of CPUs and initialization parameters) according to the size of the object. When using <code dir="ltr">DEGREE=&gt;NULL</code>, <code dir="ltr">DEGREE=&gt;n</code>, or <code dir="ltr">DEGREE=&gt;DBMS_STATS.DEFAULT_DEGREE</code>, the current implementation of <code dir="ltr">DBMS_STATS</code> may use serial execution if the size of the object does not warrant parallel execution.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t49" headers="r1c1-t49">
<p><code dir="ltr">granularity</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t49 r1c2-t49">
<p>Granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code dir="ltr">&#39;ALL&#39;</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code dir="ltr">&#39;AUTO&#39;</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code dir="ltr">&#39;DEFAULT&#39;</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the &#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; for this functionality. Note that the default value is now &#39;<code dir="ltr">AUTO</code>&#39;.</p>
<p><code dir="ltr">&#39;GLOBAL&#39;</code> - Gathers global statistics</p>
<p>&#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code dir="ltr">&#39;PARTITION</code> &#39;- Gathers partition-level statistics</p>
<p><code dir="ltr">&#39;SUBPARTITION&#39;</code> - gathers subpartition-level statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t49" headers="r1c1-t49">
<p><code dir="ltr">cascade</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t49 r1c2-t49">
<p>Gathers statistics on indexes also.Index statistics gathering will not be parallelized. Using this option is equivalent to running the <a href="#i1036276">GATHER_INDEX_STATS Procedure</a> on each of the indexes in the schema in addition to gathering table and column statistics. Use the constant <code dir="ltr">DBMS_STATS.AUTO_CASCADE</code> to have Oracle determine whether index statistics to be collected or not. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t49" headers="r1c1-t49">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t49 r1c2-t49">
<p>User statistics table identifier describing where to save the current statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t49" headers="r1c1-t49">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t49 r1c2-t49">
<p>The (optional) identifier to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t49" headers="r1c1-t49">
<p><code dir="ltr">options</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t49 r1c2-t49">
<p>Further specification of objects for which to gather statistics:</p>
<ul>
<li>
<p>&#39;<code dir="ltr">GATHER</code>&#39; - Gathers statistics on all objects in the schema</p>
</li>
<li>
<p>&#39;<code dir="ltr">GATHER</code> <code dir="ltr">AUTO</code>&#39; - (Default) Gathers all necessary statistics automatically. Oracle implicitly determines which objects need new statistics and determines how to gather those statistics. When &#39;<code dir="ltr">GATHER</code> <code dir="ltr">AUTO</code>&#39; is specified, the only additional valid parameters are <code dir="ltr">comp_id</code>, <code dir="ltr">stattab</code>, <code dir="ltr">statid</code> and <code dir="ltr">statown</code>; all other parameter settings will be ignored. Also, returns a list of objects processed.</p>
</li>
<li>
<p>&#39;<code dir="ltr">GATHER</code> <code dir="ltr">STALE</code>&#39; - Gathers statistics on stale objects as determined by looking at the <code dir="ltr">*_tab</code>_modifications views. Also, returns a list of objects found to be stale.</p>
</li>
<li>
<p>&#39;<code dir="ltr">GATHER</code> <code dir="ltr">EMPTY</code>&#39; - Gathers statistics on objects which currently have no statistics. Also, returns a list of objects found to have no statistics.</p>
</li>
<li>
<p>&#39;<code dir="ltr">LIST</code> <code dir="ltr">AUTO</code>&#39; - Returns list of objects to be processed with &#39;<code dir="ltr">GATHER</code> <code dir="ltr">AUTO</code>&#39;</p>
</li>
<li>
<p>&#39;<code dir="ltr">LIST</code> <code dir="ltr">STALE</code>&#39; - Returns list of stale objects as determined by looking at the <code dir="ltr">*_tab</code>_modifications views</p>
</li>
<li>
<p>&#39;<code dir="ltr">LIST</code> <code dir="ltr">EMPTY</code>&#39; - Returns list of objects which currently have no statistics</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t49" headers="r1c1-t49">
<p><code dir="ltr">objlist</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t49 r1c2-t49">
<p>The list of objects found to be stale or empty</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t49" headers="r1c1-t49">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t49 r1c2-t49">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t49" headers="r1c1-t49">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t49 r1c2-t49">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t49" headers="r1c1-t49">
<p><code dir="ltr">obj_filter_list</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t49 r1c2-t49">
<p>A list of object filters. When provided, this will gather statistics only on objects which satisfy at least one object filter in the list as needed. In a single object filter, we can specify the constraints on the object attributes. The attribute values specified in the object filter are case- insensitive unless double-quoted. Wildcard is allowed in the attribute values. Suppose non-<code dir="ltr">NULL</code> values s1, s2, ... are specified for attributes a1, a2, ... in one object filter. An object o is said to satisfy this object filter if (o.a1 like s1) and (o.a2 like s2) and ... is true. See <a href="#BABBFCJG">Applying an Object Filter List</a>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10629"></a>Usage Notes</p>
<p>You must have the <code dir="ltr">SYSDBA</code> or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege to execute this procedure.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10630"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Index does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Bad input value</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68573" class="refsect2"><a id="i1039162"></a>
<h3 class="refsect2"><a id="sthref10631"></a>GATHER_FIXED_OBJECTS_STATS Procedure</h3>
<p>This procedure gathers statistics for all fixed objects (dynamic performance tables).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10632"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GATHER_FIXED_OBJECTS_STATS (
   stattab        VARCHAR2 DEFAULT NULL,
   statid         VARCHAR2 DEFAULT NULL,
   statown        VARCHAR2 DEFAULT NULL, 
   no_invalidate  BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param(&#39;NO_INVALIDATE&#39;))); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10633"></a>Parameters</p>
<div id="ARPLS68574" class="tblformal">
<p class="titleintable"><a id="sthref10634"></a><a id="sthref10635"></a>Table 155-43 GATHER_FIXED_OBJECTS_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="GATHER_FIXED_OBJECTS_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GATHER_FIXED_OBJECTS_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t50">Parameter</th>
<th class="cellalignment4328" id="r1c2-t50">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t50" headers="r1c1-t50">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t50 r1c2-t50">
<p>User statistics table identifier describing where to save the current statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t50" headers="r1c1-t50">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t50 r1c2-t50">
<p>Identifier to associate with these statistics within <code dir="ltr">stattab</code> (optional)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t50" headers="r1c1-t50">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t50 r1c2-t50">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t50" headers="r1c1-t50">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t50 r1c2-t50">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10636"></a>Usage Notes</p>
<p>You must have the <code dir="ltr">SYSDBA</code> or <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> system privilege to execute this procedure.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10637"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Bad input value</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68575" class="refsect2"><a id="i1036276"></a>
<h3 class="refsect2"><a id="sthref10638"></a>GATHER_INDEX_STATS Procedure</h3>
<p>This procedure gathers index statistics. It attempts to parallelize as much of the work as possible. Restrictions are described in the individual parameters. This operation will not parallelize with certain types of indexes, including cluster indexes, domain indexes, and bitmap join indexes. The <code dir="ltr">granularity</code> and <code dir="ltr">no_invalidate</code> arguments are not relevant to these types of indexes.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10639"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GATHER_INDEX_STATS (
   ownname          VARCHAR2, 
   indname          VARCHAR2, 
   partname         VARCHAR2 DEFAULT NULL,
   estimate_percent NUMBER   DEFAULT to_estimate_percent_type 
                                                (GET_PARAM(&#39;ESTIMATE_PERCENT&#39;)),
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   statown          VARCHAR2 DEFAULT NULL,
   degree           NUMBER   DEFAULT to_degree_type(get_param(&#39;DEGREE&#39;)),
   granularity      VARCHAR2 DEFAULT GET_PARAM(&#39;GRANULARITY&#39;),
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type 
                                               (GET_PARAM(&#39;NO_INVALIDATE&#39;)),
   force            BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10640"></a>Parameters</p>
<div id="ARPLS68576" class="tblformal">
<p class="titleintable"><a id="sthref10641"></a><a id="sthref10642"></a>Table 155-44 GATHER_INDEX_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="GATHER_INDEX_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GATHER_INDEX_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t51">Parameter</th>
<th class="cellalignment4328" id="r1c2-t51">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t51" headers="r1c1-t51">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t51 r1c2-t51">
<p>Schema of index to analyze</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t51" headers="r1c1-t51">
<p><code dir="ltr">indname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t51 r1c2-t51">
<p>Name of index</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t51" headers="r1c1-t51">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t51 r1c2-t51">
<p>Name of partition</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t51" headers="r1c1-t51">
<p><code dir="ltr">estimate_percent</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t51 r1c2-t51">
<p>Percentage of rows to estimate (<code dir="ltr">NULL</code> means compute). The valid range is <code dir="ltr">[0.000001,100]</code>. Use the constant <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t51" headers="r1c1-t51">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t51 r1c2-t51">
<p>User statistics table identifier describing where to save the current statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t51" headers="r1c1-t51">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t51 r1c2-t51">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t51" headers="r1c1-t51">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t51 r1c2-t51">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t51" headers="r1c1-t51">
<p><code dir="ltr">degree</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t51 r1c2-t51">
<p>Degree of parallelism. The default for <code dir="ltr">degree</code> is <code dir="ltr">NULL</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. <code dir="ltr">NULL</code> means use the table default value specified by the <code dir="ltr">DEGREE</code> clause in the <code dir="ltr">CREATE TABLE</code> or <code dir="ltr">ALTER TABLE</code> statement. Use the constant <code dir="ltr">DBMS_STATS.DEFAULT_DEGREE</code> to specify the default value based on the initialization parameters. The <code dir="ltr">AUTO_DEGREE</code> value determines the degree of parallelism automatically. This is between <code dir="ltr">1</code> (serial execution) and <code dir="ltr">DEFAULT_DEGREE</code> (the system default value based on number of CPUs and initialization parameters) according to the size of the object. When using <code dir="ltr">DEGREE=&gt;NULL</code>, <code dir="ltr">DEGREE=&gt;n</code>, or <code dir="ltr">DEGREE=&gt;DBMS_STATS.DEFAULT_DEGREE</code>, the current implementation of <code dir="ltr">DBMS_STATS</code> may use serial execution if the size of the object does not warrant parallel execution.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t51" headers="r1c1-t51">
<p><code dir="ltr">granularity</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t51 r1c2-t51">
<p>Granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code dir="ltr">&#39;ALL&#39;</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code dir="ltr">&#39;AUTO&#39;</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code dir="ltr">&#39;DEFAULT&#39;</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the &#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; for this functionality. Note that the default value is now &#39;<code dir="ltr">AUTO</code>&#39;.</p>
<p><code dir="ltr">&#39;GLOBAL&#39;</code> - Gathers global statistics</p>
<p>&#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code dir="ltr">&#39;PARTITION</code> &#39;- Gathers partition-level statistics</p>
<p><code dir="ltr">&#39;SUBPARTITION&#39;</code> - Gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t51" headers="r1c1-t51">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t51 r1c2-t51">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t51" headers="r1c1-t51">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t51 r1c2-t51">
<p>Gather statistics on object even if it is locked</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10643"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Index does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Bad input value</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10644"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74507" class="refsect2"><a id="BABFEFDF"></a>
<h3 class="refsect2"><a id="sthref10645"></a>GATHER_PROCESSING_RATE Procedure</h3>
<p>This procedure starts the job of gathering the processing rates which end after an <code dir="ltr">interval</code> defined in minutes.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10646"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GATHER_PROCESSING_RATE (
   gathering_mode      IN    VARCHAR2  DEFAULT &#39;START&#39;,
   interval            IN    NUMBER    DEFAULT  NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10647"></a>Parameters</p>
<div id="ARPLS74508" class="tblformal">
<p class="titleintable"><a id="sthref10648"></a><a id="sthref10649"></a>Table 155-45 GATHER_PROCESSING_RATE Procedure Parameters</p>
<table class="cellalignment4330" title="GATHER_PROCESSING_RATE Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GATHER_PROCESSING_RATE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t52">Parameter</th>
<th class="cellalignment4328" id="r1c2-t52">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t52" headers="r1c1-t52">
<p><code dir="ltr">gathering_mode</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t52 r1c2-t52">
<p>Mode: <code dir="ltr">&#39;START&#39;</code> or <code dir="ltr">&#39;END&#39;</code>. The mode is based on the Active Session History (ASH) data when invoked with <code dir="ltr">&#39;START&#39;</code> option. It stops gathering when invoked with <code dir="ltr">&#39;END&#39;</code> option. When invoked with <code dir="ltr">&#39;START&#39;</code>, &#39;interval&#39; option can be specified optionally. If <code dir="ltr">interval</code> is not specified, its default value is set to 60 minutes.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t52" headers="r1c1-t52">
<p><code dir="ltr">interval</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t52 r1c2-t52">
<p>Time interval (number of minutes) for which the processing must be gathered</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10650"></a>Usage Notes</p>
<ul>
<li>
<p>You require the <code dir="ltr">OPTIMIZER_PROCESSING_RATE</code> role to run this procedure.</p>
</li>
<li>
<p><code dir="ltr">AUTO</code> <code dir="ltr">DOP</code> uses processing rates to determine the optimal degree of parallelism for a SQL statement.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10651"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or illegal input value</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68577" class="refsect2"><a id="i1036456"></a>
<h3 class="refsect2"><a id="sthref10652"></a>GATHER_SCHEMA_STATS Procedures</h3>
<p>This procedure gathers statistics for all objects in a schema.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10653"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GATHER_SCHEMA_STATS ( 
   ownname          VARCHAR2, 
   estimate_percent NUMBER   DEFAULT to_estimate_percent_type 
                                                (get_param(&#39;ESTIMATE_PERCENT&#39;)), 
   block_sample     BOOLEAN  DEFAULT FALSE, 
   method_opt       VARCHAR2 DEFAULT get_param(&#39;METHOD_OPT&#39;),
   degree           NUMBER   DEFAULT to_degree_type(get_param(&#39;DEGREE&#39;)), 
   granularity      VARCHAR2 DEFAULT GET_PARAM(&#39;GRANULARITY&#39;), 
   cascade          BOOLEAN  DEFAULT to_cascade_type(get_param(&#39;CASCADE&#39;)), 
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL, 
   options          VARCHAR2 DEFAULT &#39;GATHER&#39;, 
   objlist          OUT      ObjectTab,
   statown          VARCHAR2 DEFAULT NULL, 
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param(&#39;NO_INVALIDATE&#39;)),
  force             BOOLEAN DEFAULT FALSE,
  obj_filter_list  ObjectTab DEFAULT NULL);
   
DBMS_STATS.GATHER_SCHEMA_STATS ( 
   ownname          VARCHAR2, 
   estimate_percent NUMBER   DEFAULT to_estimate_percent_type 
                                                (get_param(&#39;ESTIMATE_PERCENT&#39;)), 
   block_sample     BOOLEAN  DEFAULT FALSE, 
   method_opt       VARCHAR2 DEFAULT get_param(&#39;METHOD_OPT&#39;), 
   degree           NUMBER   DEFAULT to_degree_type(get_param(&#39;DEGREE&#39;)), 
   granularity      VARCHAR2 DEFAULT GET_PARAM(&#39;GRANULARITY&#39;), 
   cascade          BOOLEAN  DEFAULT to_cascade_type(get_param(&#39;CASCADE&#39;)), 
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL, 
   options          VARCHAR2 DEFAULT &#39;GATHER&#39;, 
   statown          VARCHAR2 DEFAULT NULL, 
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param(&#39;NO_INVALIDATE&#39;), 
   force            BOOLEAN DEFAULT FALSE,
   obj_filter_list  ObjectTab DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10654"></a>Parameters</p>
<div id="ARPLS68578" class="tblformal">
<p class="titleintable"><a id="sthref10655"></a><a id="sthref10656"></a>Table 155-46 GATHER_SCHEMA_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="GATHER_SCHEMA_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GATHER_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t53">Parameter</th>
<th class="cellalignment4328" id="r1c2-t53">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t53" headers="r1c1-t53">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t53 r1c2-t53">
<p>Schema to analyze (<code dir="ltr">NULL</code> means current schema)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t53" headers="r1c1-t53">
<p><code dir="ltr">estimate_percent</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t53 r1c2-t53">
<p>Percentage of rows to estimate (<code dir="ltr">NULL</code> means compute): The valid range is [0.000001,100]. Use the constant <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t53" headers="r1c1-t53">
<p><code dir="ltr">block_sample</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t53 r1c2-t53">
<p>Whether or not to use random block sampling instead of random row sampling. Random block sampling is more efficient, but if the data is not randomly distributed on disk, then the sample values may be somewhat correlated. Only pertinent when doing an estimate statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t53" headers="r1c1-t53">
<p><code dir="ltr">method_opt</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t53 r1c2-t53">
<p>Accepts:</p>
<ul>
<li>
<p><code dir="ltr">FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code dir="ltr">[size_clause]</code></p>
</li>
</ul>
<p><code dir="ltr">size_clause</code> is defined as <code dir="ltr">size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<br/>
<code dir="ltr">- integer</code> : Number of histogram buckets. Must be in the range [1,2048].<br/>
<code dir="ltr">- REPEAT</code> : Collects histograms only on the columns that already have histograms<br/>
<code dir="ltr">- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br/>
<code dir="ltr">- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.
<p>The default is <code dir="ltr">FOR ALL COLUMNS SIZE AUTO</code>.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t53" headers="r1c1-t53">
<p><code dir="ltr">degree</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t53 r1c2-t53">
<p>Degree of parallelism. The default for <code dir="ltr">degree</code> is <code dir="ltr">NULL</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. <code dir="ltr">NULL</code> means use the table default value specified by the <code dir="ltr">DEGREE</code> clause in the <code dir="ltr">CREATE TABLE</code> or <code dir="ltr">ALTER TABLE</code> statement. Use the constant <code dir="ltr">DBMS_STATS.DEFAULT_DEGREE</code> to specify the default value based on the initialization parameters. The <code dir="ltr">AUTO_DEGREE</code> value determines the degree of parallelism automatically. This is between <code dir="ltr">1</code> (serial execution) and <code dir="ltr">DEFAULT_DEGREE</code> (the system default value based on number of CPUs and initialization parameters) according to the size of the object. When using <code dir="ltr">DEGREE=&gt;NULL</code>, <code dir="ltr">DEGREE=&gt;n</code>, or <code dir="ltr">DEGREE=&gt;DBMS_STATS.DEFAULT_DEGREE</code>, the current implementation of <code dir="ltr">DBMS_STATS</code> may use serial execution if the size of the object does not warrant parallel execution.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t53" headers="r1c1-t53">
<p><code dir="ltr">granularity</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t53 r1c2-t53">
<p>Granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code dir="ltr">&#39;ALL&#39;</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code dir="ltr">&#39;AUTO&#39;</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code dir="ltr">&#39;DEFAULT&#39;</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the &#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; for this functionality. Note that the default value is now &#39;<code dir="ltr">AUTO</code>&#39;.</p>
<p><code dir="ltr">&#39;GLOBAL&#39;</code> - Gathers global statistics</p>
<p>&#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code dir="ltr">&#39;PARTITION</code> &#39;- Gathers partition-level statistics</p>
<p><code dir="ltr">&#39;SUBPARTITION&#39;</code> - Gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t53" headers="r1c1-t53">
<p><code dir="ltr">cascade</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t53 r1c2-t53">
<p>Gather statistics on the indexes as well. Using this option is equivalent to running the <a href="#i1036276">GATHER_INDEX_STATS Procedure</a> on each of the indexes in the schema in addition to gathering table and column statistics. Use the constant <code dir="ltr">DBMS_STATS.AUTO_CASCADE</code> to have Oracle determine whether index statistics to be collected or not. This is the default. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t53" headers="r1c1-t53">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t53 r1c2-t53">
<p>User statistics table identifier describing where to save the current statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t53" headers="r1c1-t53">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t53 r1c2-t53">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t53" headers="r1c1-t53">
<p><code dir="ltr">options</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t53 r1c2-t53">
<p>Further specification of which objects to gather statistics for:</p>
<p><code dir="ltr">GATHER</code>: (Default) Gathers statistics on all objects in the schema.</p>
<p><code dir="ltr">GATHER</code> <code dir="ltr">AUTO</code>: Gathers all necessary statistics automatically. Oracle implicitly determines which objects need new statistics, and determines how to gather those statistics. When <code dir="ltr">GATHER AUTO</code> is specified, the only additional valid parameters are <code dir="ltr">ownname</code>, <code dir="ltr">stattab</code>, <code dir="ltr">statid</code>, <code dir="ltr">objlist</code> and <code dir="ltr">statown</code>; all other parameter settings are ignored. Returns a list of processed objects.</p>
<p><code dir="ltr">GATHER</code> <code dir="ltr">STALE</code>: Gathers statistics on stale objects as determined by looking at the *<code dir="ltr">_tab_modifications</code> views. Also, return a list of objects found to be stale.</p>
<p><code dir="ltr">GATHER</code> <code dir="ltr">EMPTY</code>: Gathers statistics on objects which currently have no statistics. also, return a list of objects found to have no statistics.</p>
<p><code dir="ltr">LIST AUTO</code>: Returns a list of objects to be processed with <code dir="ltr">GATHER AUTO</code>.</p>
<p><code dir="ltr">LIST</code> <code dir="ltr">STALE</code>: Returns list of stale objects as determined by looking at the *<code dir="ltr">_tab_modifications</code> views.</p>
<p><code dir="ltr">LIST</code> <code dir="ltr">EMPTY</code>: Returns list of objects which currently have no statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t53" headers="r1c1-t53">
<p><code dir="ltr">objlist</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t53 r1c2-t53">
<p>List of objects found to be stale or empty</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t53" headers="r1c1-t53">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t53 r1c2-t53">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t53" headers="r1c1-t53">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t53 r1c2-t53">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t53" headers="r1c1-t53">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t53 r1c2-t53">
<p>Gather statistics on objects even if they are locked</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t53" headers="r1c1-t53">
<p><code dir="ltr">obj_filter_list</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t53 r1c2-t53">
<p>A list of object filters. When provided, <code dir="ltr">GATHER_SCHEMA_STATS</code> will gather statistics only on objects which satisfy at least one object filter in the list as needed. In a single object filter, we can specify the constraints on the object attributes. The attribute values specified in the object filter are case- insensitive unless double-quoted. Wildcard is allowed in the attribute values. Suppose non-<code dir="ltr">NULL</code> values s1, s2, ... are specified for attributes a1, a2, ... in one object filter. An object o is said to satisfy this object filter if (o.a1 like s1) and (o.a2 like s2) and ... is true. See <a href="#BABBFCJG">Applying an Object Filter List</a>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10657"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
<p>When you use a specific value for the sampling percentage, <code dir="ltr">DBMS_STATS</code> honors it except for when:</p>
<ul>
<li>
<p>The result is less than 2500 rows (too small a sample) and</p>
</li>
<li>
<p>The specified percentage is more than the certain percentage.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10658"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Schema does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Bad input value</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10659"></a>Examples</p>
<p class="subhead2"><a id="ARPLS74981"></a>Applying an Object Filter List</p>
<p>The following example specifies that any table with a &#34;<code dir="ltr">T</code>&#34; prefix in the <code dir="ltr">SAMPLE</code> schema and any table in the <code dir="ltr">SYS</code> schema, if stale, will have statistics gathered upon it.</p>
<pre dir="ltr">DECLARE
   filter_lst  DBMS_STATS.OBJECTTAB := DBMS_STATS.OBJECTTAB();
BEGIN
   filter_lst.extend(2);
   filter_lst(1).ownname := &#39;SH&#39;;
   filter_lst(1).objname := &#39;SALES&#39;;
   filter_lst(2).ownname := &#39;SH&#39;;
   filter_lst(2).objname := &#39;COSTS&#39;;
   DBMS_STATS.GATHER_SCHEMA_STATS(ownname=&gt;&#39;SH&#39;,obj_filter_list=&gt;filter_lst);
 END;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68580" class="refsect2"><a id="i1036401"></a>
<h3 class="refsect2"><a id="sthref10660"></a>GATHER_SYSTEM_STATS Procedure</h3>
<p>This procedure gathers system statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10661"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GATHER_SYSTEM_STATS (
   gathering_mode   VARCHAR2 DEFAULT &#39;NOWORKLOAD&#39;,
   interval         INTEGER  DEFAULT NULL,
   stattab          VARCHAR2 DEFAULT NULL,
   statid           VARCHAR2 DEFAULT NULL,
   statown          VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10662"></a>Parameters</p>
<div id="ARPLS68581" class="tblformal">
<p class="titleintable"><a id="sthref10663"></a><a id="sthref10664"></a>Table 155-47 GATHER_SYSTEM_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="GATHER_SYSTEM_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GATHER_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t54">Parameter</th>
<th class="cellalignment4328" id="r1c2-t54">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t54" headers="r1c1-t54">
<p><code dir="ltr">gathering_mode</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t54 r1c2-t54">
<p>Mode values are:</p>
<p><code dir="ltr">NOWORKLOAD</code>: Will capture characteristics of the I/O system. Gathering may take a few minutes and depends on the size of the database. During this period Oracle will estimate the average read seek time and transfer speed for the I/O system. This mode is suitable for the all workloads. Oracle recommends to run <code dir="ltr">GATHER_SYSTEM_STATS</code> (&#39;<code dir="ltr">NOWORKLOAD</code>&#39;) after creation of the database and tablespaces. To fine tune system statistics for the workload use &#39;<code dir="ltr">START</code>&#39; and &#39;<code dir="ltr">STOP</code>&#39; or &#39;<code dir="ltr">INTERVAL</code>&#39; options. If you gather both &#39;<code dir="ltr">NOWORKLOAD</code>&#39; and workload specific (statistics collected using &#39;<code dir="ltr">INTERVAL</code>&#39; or &#39;<code dir="ltr">START</code>&#39; and &#39;<code dir="ltr">STOP</code>&#39;), the workload statistics will be used by optimizer. Collected components: <code dir="ltr">cpuspeednw,</code> <code dir="ltr">ioseektim,</code> <code dir="ltr">iotfrspeed</code>.</p>
<p><code dir="ltr">INTERVAL</code>: Captures system activity during a specified interval. This works in combination with the <code dir="ltr">interval</code> parameter. You should provide an interval value in minutes, after which system statistics are created or updated in the dictionary or <code dir="ltr">stattab</code>. You can use <code dir="ltr">GATHER_SYSTEM_STATS (gathering_mode=&gt;&#39;STOP&#39;</code>) to stop gathering earlier than scheduled. Collected components: <code dir="ltr">maxthr</code>, <code dir="ltr">slavethr</code>, <code dir="ltr">cpuspeed</code>, <code dir="ltr">sreadtim</code>, <code dir="ltr">mreadtim</code>, <code dir="ltr">mbrc</code>.</p>
<p><code dir="ltr">START</code> | <code dir="ltr">STOP</code>: Captures system activity during specified start and stop times and refreshes the dictionary or <code dir="ltr">stattab</code> with statistics for the elapsed period. <code dir="ltr">Interval</code> value is ignored. Collected components: <code dir="ltr">maxthr</code>, <code dir="ltr">slavethr</code>, <code dir="ltr">cpuspeed</code>, <code dir="ltr">sreadtim</code>, <code dir="ltr">mreadtim</code>, <code dir="ltr">mbrc</code>.</p>
<p><code dir="ltr">EXADATA</code>: In this mode the gathered system statistics take into account the unique capabilities provided by using <code dir="ltr">EXADATA</code> such as large IO size and high IO throughput. The multi-block read count and IO throughput statistics are set along with the CPU speed.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t54" headers="r1c1-t54">
<p><code dir="ltr">interval</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t54 r1c2-t54">
<p>Time, in minutes, to gather statistics. This parameter applies only when <code dir="ltr">gathering_mode=&#39;INTERVAL&#39;</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t54" headers="r1c1-t54">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t54 r1c2-t54">
<p>Identifier of the user statistics table where the statistics will be saved</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t54" headers="r1c1-t54">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t54 r1c2-t54">
<p>Optional identifier associated with the statistics saved in the <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t54" headers="r1c1-t54">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t54 r1c2-t54">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10665"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid input value</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table; may need to be upgraded</p>
<p><code dir="ltr">ORA-20003</code>: Unable to gather system statistics</p>
<p><code dir="ltr">ORA-20004</code>: Error in the <code dir="ltr">INTERVAL</code> mode: system parameter <code dir="ltr">job_queue_processes</code> must be &gt;0</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10666"></a>Usage Notes</p>
<p>To run this procedure, you need the <code dir="ltr">GATHER_SYSTEM_STATISTICS</code> role.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i1044340"></a>Examples</p>
<p>Assume that you want to perform database application processing OLTP transactions during the day and run reports at night.</p>
<p>To collect daytime system statistics, gather statistics for 720 minutes. Store the statistics in the <code dir="ltr">MYSTATS</code> table.</p>
<pre dir="ltr">BEGIN
   DBMS_STATS.GATHER_SYSTEM_STATS (
      interval =&gt; 720,
      stattab  =&gt; &#39;mystats&#39;,
      statid   =&gt; &#39;OLTP&#39;);
END;
</pre>
<p>To collect nighttime system statistics, gather statistics for 720 minutes. Store the statistics in the <code dir="ltr">MYSTATS</code> table.</p>
<pre dir="ltr">BEGIN
   DBMS_STATS.GATHER_SYSTEM_STATS (
      interval =&gt; 720,
      stattab  =&gt; &#39;mystats&#39;,
      statid   =&gt; &#39;OLAP&#39;);
END;
</pre>
<p>Update the dictionary with the gathered statistics.</p>
<pre dir="ltr">VARIABLE   jobno   number;
BEGIN
   DBMS_JOB.SUBMIT (:jobno, &#39;DBMS_STATS.IMPORT_SYSTEM_STATS
   (&#39;&#39;mystats&#39;&#39;,&#39;&#39;OLTP&#39;&#39;);&#39;
   sysdate, &#39;sysdate + 1&#39;);
   COMMIT;
END;

BEGIN
   DBMS_JOB.SUBMIT (:jobno, &#39;DBMS_STATS.IMPORT_SYSTEM_STATS
   (&#39;&#39;mystats&#39;&#39;,&#39;&#39;OLAP&#39;&#39;);&#39;
   sysdate + 0.5, &#39;sysdate + 1&#39;);
   COMMIT;
END;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68582" class="refsect2"><a id="i1036461"></a>
<h3 class="refsect2"><a id="sthref10667"></a>GATHER_TABLE_STATS Procedure</h3>
<p>This procedure gathers table and column (and index) statistics. It attempts to parallelize as much of the work as possible, but there are some restrictions as described in the individual parameters.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10668"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GATHER_TABLE_STATS (
   ownname          VARCHAR2, 
   tabname          VARCHAR2, 
   partname         VARCHAR2 DEFAULT NULL,
   estimate_percent NUMBER   DEFAULT to_estimate_percent_type 
                                                  (get_param(&#39;ESTIMATE_PERCENT&#39;)),
   block_sample     BOOLEAN  DEFAULT FALSE,
   method_opt       VARCHAR2 DEFAULT get_param(&#39;METHOD_OPT&#39;),
   degree           NUMBER   DEFAULT to_degree_type(get_param(&#39;DEGREE&#39;)),
   granularity      VARCHAR2 DEFAULT GET_PARAM(&#39;GRANULARITY&#39;), 
   cascade          BOOLEAN  DEFAULT to_cascade_type(get_param(&#39;CASCADE&#39;)),
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   statown          VARCHAR2 DEFAULT NULL,
   no_invalidate    BOOLEAN  DEFAULT  to_no_invalidate_type (
                                                      get_param(&#39;NO_INVALIDATE&#39;)),
   stattype         VARCHAR2 DEFAULT &#39;DATA&#39;,
   force            BOOLEAN  DEFAULT FALSE,
   context          DBMS_STATS.CCONTEXT DEFAULT NULL, -- non operative
   options          VARCHAR2 DEFAULT &#39;GATHER&#39;);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10669"></a>Parameters</p>
<div id="ARPLS68583" class="tblformal">
<p class="titleintable"><a id="sthref10670"></a><a id="sthref10671"></a>Table 155-48 GATHER_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="GATHER_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GATHER_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t55">Parameter</th>
<th class="cellalignment4328" id="r1c2-t55">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t55" headers="r1c1-t55">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t55 r1c2-t55">
<p>Schema of table to analyze</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t55" headers="r1c1-t55">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t55 r1c2-t55">
<p>Name of table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t55" headers="r1c1-t55">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t55 r1c2-t55">
<p>Name of partition</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t55" headers="r1c1-t55">
<p><code dir="ltr">estimate_percent</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t55 r1c2-t55">
<p>Percentage of rows to estimate (<code dir="ltr">NULL</code> means compute) The valid range is [0.000001,100]. Use the constant <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t55" headers="r1c1-t55">
<p><code dir="ltr">block_sample</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t55 r1c2-t55">
<p>Whether or not to use random block sampling instead of random row sampling. Random block sampling is more efficient, but if the data is not randomly distributed on disk, then the sample values may be somewhat correlated. Only pertinent when doing an estimate statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t55" headers="r1c1-t55">
<p><code dir="ltr">method_opt</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t55 r1c2-t55">
<p><code dir="ltr">METHOD_OPT</code> - When setting preference on global, schema, database or dictionary level, only<code dir="ltr">&#39;FOR ALL&#39;</code> syntax is allowed. Other than that, method_opt accepts either of the following options, or both in combination:</p>
<ul>
<li>
<p><code dir="ltr">FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code dir="ltr">[size_clause]</code></p>
</li>
<li>
<p><code dir="ltr">FOR COLUMNS [column_clause] [size_clause]</code></p>
</li>
</ul>
<p><code dir="ltr">size_clause</code> is defined as <code dir="ltr">size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<p><code dir="ltr">column_clause</code> is defined as <code dir="ltr">column_clause := column_name | extension name | extension</code></p>
<br/>
<code dir="ltr">- integer</code> : Number of histogram buckets. Must be in the range [1,2048].<br/>
<code dir="ltr">- REPEAT</code> : Collects histograms only on the columns that already have histograms<br/>
<code dir="ltr">- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br/>
<code dir="ltr">- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.<br/>
- <code dir="ltr">column_name</code> : Name of a column<br/>
- <code dir="ltr">extension :</code> can be either a column group in the format of (<code dir="ltr">column_name</code>, <code dir="ltr">Colume_name</code> [, ...]) or an expression
<p>The default is <code dir="ltr">FOR ALL COLUMNS SIZE AUTO</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t55" headers="r1c1-t55">
<p><code dir="ltr">degree</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t55 r1c2-t55">
<p>Degree of parallelism. The default for <code dir="ltr">degree</code> is <code dir="ltr">NULL</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. <code dir="ltr">NULL</code> means use the table default value specified by the <code dir="ltr">DEGREE</code> clause in the <code dir="ltr">CREATE TABLE</code> or <code dir="ltr">ALTER TABLE</code> statement. Use the constant <code dir="ltr">DBMS_STATS.DEFAULT_DEGREE</code> to specify the default value based on the initialization parameters. The <code dir="ltr">AUTO_DEGREE</code> value determines the degree of parallelism automatically. This is between <code dir="ltr">1</code> (serial execution) and <code dir="ltr">DEFAULT_DEGREE</code> (the system default value based on number of CPUs and initialization parameters) according to the size of the object. When using <code dir="ltr">DEGREE=&gt;NULL</code>, <code dir="ltr">DEGREE=&gt;n</code>, or <code dir="ltr">DEGREE=&gt;DBMS_STATS.DEFAULT_DEGREE</code>, the current implementation of <code dir="ltr">DBMS_STATS</code> may use serial execution if the size of the object does not warrant parallel execution.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t55" headers="r1c1-t55">
<p><code dir="ltr">granularity</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t55 r1c2-t55">
<p>Granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code dir="ltr">&#39;ALL&#39;</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code dir="ltr">&#39;APPROX_GLOBAL AND PARTITION&#39;</code> - similar to <code dir="ltr">&#39;GLOBAL AND PARTITION&#39;</code> but in this case the global statistics are aggregated from partition level statistics. This option will aggregate all statistics except the number of distinct values for columns and number of distinct keys of indexes. The existing histograms of the columns at the table level are also aggregated.The aggregation will use only partitions with statistics, so to get accurate global statistics, users should make sure to have statistics for all partitions. Global statistics are gathered if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code> or if the aggregation cannot be performed (for example, if statistics for one of the partitions is missing).</p>
<p><code dir="ltr">&#39;AUTO&#39;</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code dir="ltr">&#39;DEFAULT&#39;</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the &#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; for this functionality. Note that the default value is now &#39;<code dir="ltr">AUTO</code>&#39;.</p>
<p><code dir="ltr">&#39;GLOBAL&#39;</code> - Gathers global statistics</p>
<p>&#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code dir="ltr">&#39;PARTITION</code> &#39;- Gathers partition-level statistics</p>
<p><code dir="ltr">&#39;SUBPARTITION&#39;</code> - Gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t55" headers="r1c1-t55">
<p><code dir="ltr">cascade</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t55 r1c2-t55">
<p>Gathers statistics on the indexes for this table. Using this option is equivalent to running the <a href="#i1036276">GATHER_INDEX_STATS Procedure</a> on each of the table&#39;s indexes. Use the constant <code dir="ltr">DBMS_STATS.AUTO_CASCADE</code> to have Oracle determine whether index statistics are to be collected or not. This is the default. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a><code dir="ltr">.</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t55" headers="r1c1-t55">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t55 r1c2-t55">
<p>User statistics table identifier describing where to save the current statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t55" headers="r1c1-t55">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t55 r1c2-t55">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t55" headers="r1c1-t55">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t55 r1c2-t55">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t55" headers="r1c1-t55">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t55 r1c2-t55">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t55" headers="r1c1-t55">
<p><code dir="ltr">stattype</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t55 r1c2-t55">
<p>Statistics type. The only value allowed is <code dir="ltr">DATA</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t55" headers="r1c1-t55">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t55 r1c2-t55">
<p>Gather statistics of table even if it is locked</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t55" headers="r1c1-t55">
<p><code dir="ltr">context</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t55 r1c2-t55">
<p>[Non-operative]</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t55" headers="r1c1-t55">
<p><code dir="ltr">options</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t55 r1c2-t55">
<p>Further specification of which objects to gather statistics:</p>
<ul>
<li>
<p><code dir="ltr">GATHER</code> - gathers statistics on all objects in the schema</p>
</li>
<li>
<p><code dir="ltr">GATHER</code> <code dir="ltr">AUTO</code> - gathers all necessary statistics automatically. Oracle implicitly determines which objects need new statistics.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10672"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
<p>Index statistics collection can be parellelized except for cluster, domain and join indexes.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10673"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Table does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Bad input value</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10674"></a>Examples</p>
<p>An extension can be either a column group (see Example 1) or an expression (see Example 2).</p>
<p class="subhead2"><a id="ARPLS68584"></a>Example 1</p>
<pre dir="ltr">DBMS_STATS.GATHER_TABLE_STATS(
    &#39;SH&#39;, &#39;SALES&#39;, method_opt =&gt; &#39;FOR COLUMNS (empno, deptno)&#39;); 
</pre>
<p class="subhead2"><a id="ARPLS68585"></a>Example 2</p>
<pre dir="ltr">DBMS_STATS.GATHER_TABLE_STATS(
    &#39;SH&#39;, &#39;SALES&#39;, method_opt =&gt; &#39;FOR COLUMNS (sal+comm)&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68586" class="refsect2"><a id="i1036560"></a>
<h3 class="refsect2"><a id="sthref10675"></a>GENERATE_STATS Procedure</h3>
<div class="infobox-note">
<p class="notep1">Note:</p>
This subprogram has been deprecated and replaced by improved technology. It is maintained only for purposes of backward compatibility. As an alternative, use the <code dir="ltr">GATHER_INDEX_STAT</code> procedure. See <a href="#i1036276">&#34;GATHER_INDEX_STATS Procedure&#34;</a>.</div>
<p>This procedure generates object statistics from previously collected statistics of related objects. The currently supported objects are b-tree and bitmap indexes.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10676"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GENERATE_STATS (
   ownname    VARCHAR2, 
   objname    VARCHAR2,
   organized  NUMBER DEFAULT 7,
   force      BOOLEAN default FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10677"></a>Parameters</p>
<div id="ARPLS68587" class="tblformal">
<p class="titleintable"><a id="sthref10678"></a><a id="sthref10679"></a>Table 155-49 GENERATE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="GENERATE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GENERATE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t57">Parameter</th>
<th class="cellalignment4328" id="r1c2-t57">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t57" headers="r1c1-t57">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t57 r1c2-t57">
<p>Schema of object</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t57" headers="r1c1-t57">
<p><code dir="ltr">objname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t57 r1c2-t57">
<p>Name of object</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t57" headers="r1c1-t57">
<p><code dir="ltr">organized</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t57 r1c2-t57">
<p>Amount of ordering associated between the index and its underlying table. A heavily organized index would have consecutive index keys referring to consecutive rows on disk for the table (the same block). A heavily disorganized index would have consecutive keys referencing different table blocks on disk.</p>
<p>This parameter is only used for b-tree indexes. The number can be in the range of 0-10, with 0 representing a completely organized index and 10 a completely disorganized one.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t57" headers="r1c1-t57">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t57 r1c2-t57">
<p>If <code dir="ltr">TRUE</code>, generates statistics for the target object even if it is locked</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10680"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by SYS, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the SYSDBA privilege.</p>
<p>For fully populated schemas, the gather procedures should be used instead when more accurate statistics are desired.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10681"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Unsupported object type of object does not exist</p>
<p><code dir="ltr">ORA-20001</code>: Invalid option or invalid statistics</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68588" class="refsect2"><a id="i1036689"></a>
<h3 class="refsect2"><a id="sthref10682"></a>GET_COLUMN_STATS Procedures</h3>
<p>These procedures gets all column-related information. In the form of this procedure that deals with user-defined statistics, the statistics type returned is the type stored, in addition to the user-defined statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10683"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GET_COLUMN_STATS (
   ownname     VARCHAR2, 
   tabname     VARCHAR2, 
   colname     VARCHAR2, 
   partname    VARCHAR2 DEFAULT NULL,
   stattab     VARCHAR2 DEFAULT NULL, 
   statid      VARCHAR2 DEFAULT NULL,
   distcnt OUT NUMBER, 
   density OUT NUMBER,
   nullcnt OUT NUMBER, 
   srec    OUT StatRec,
   avgclen OUT NUMBER,
   statown     VARCHAR2 DEFAULT NULL);
</pre>
<p>Use the following for user-defined statistics:</p>
<pre dir="ltr">DBMS_STATS.GET_COLUMN_STATS (
   ownname          VARCHAR2, 
   tabname          VARCHAR2, 
   colname          VARCHAR2, 
   partname         VARCHAR2 DEFAULT NULL,
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   ext_stats   OUT  RAW,
   stattypown  OUT  VARCHAR2 DEFAULT NULL, 
   stattypname OUT  VARCHAR2 DEFAULT NULL, 
   statown          VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10684"></a>Parameters</p>
<div id="ARPLS68589" class="tblformal">
<p class="titleintable"><a id="sthref10685"></a><a id="sthref10686"></a>Table 155-50 GET_COLUMN_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="GET_COLUMN_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GET_COLUMN_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t58">Parameter</th>
<th class="cellalignment4328" id="r1c2-t58">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t58" headers="r1c1-t58">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t58 r1c2-t58">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t58" headers="r1c1-t58">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t58 r1c2-t58">
<p>Name of the table to which this column belongs</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t58" headers="r1c1-t58">
<p><code dir="ltr">colname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t58 r1c2-t58">
<p>Name of the column or extension</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t58" headers="r1c1-t58">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t58 r1c2-t58">
<p>Name of the table partition from which to get the statistics. If the table is partitioned and if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, statistics are retrieved from the global table level.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t58" headers="r1c1-t58">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t58 r1c2-t58">
<p>User statistics table identifier describing from where to retrieve the statistics. If <code dir="ltr">stattab</code> is <code dir="ltr">NULL</code>, statistics are retrieved directly from the dictionary.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t58" headers="r1c1-t58">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t58 r1c2-t58">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code> (Only pertinent if <code dir="ltr">stattab</code> is not <code dir="ltr">NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t58" headers="r1c1-t58">
<p><code dir="ltr">ext_stats</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t58 r1c2-t58">
<p>The user-defined statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t58" headers="r1c1-t58">
<p><code dir="ltr">stattypown</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t58 r1c2-t58">
<p>Schema of the statistics type</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t58" headers="r1c1-t58">
<p><code dir="ltr">stattypname</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t58 r1c2-t58">
<p>Name of the statistics type</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t58" headers="r1c1-t58">
<p><code dir="ltr">distcnt</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t58 r1c2-t58">
<p>Number of distinct values</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t58" headers="r1c1-t58">
<p><code dir="ltr">density</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t58 r1c2-t58">
<p>Column density</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t58" headers="r1c1-t58">
<p><code dir="ltr">nullcnt</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t58 r1c2-t58">
<p>Number of <code dir="ltr">NULLs</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t58" headers="r1c1-t58">
<p><code dir="ltr">srec</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t58 r1c2-t58">
<p>Structure holding internal representation of column minimum, maximum, and histogram values</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t58" headers="r1c1-t58">
<p><code dir="ltr">avgclen</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t58 r1c2-t58">
<p>Average length of the column (in bytes)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t58" headers="r1c1-t58">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t58 r1c2-t58">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10687"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges or no statistics have been stored for requested object</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10688"></a>Usage Notes</p>
<p>Before invoking this procedure, ensure that the table exists.</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68590" class="refsect2"><a id="i1036796"></a>
<h3 class="refsect2"><a id="sthref10689"></a>GET_INDEX_STATS Procedures</h3>
<p>These procedures get all index-related information. In the form of this procedure that deals with user-defined statistics, the statistics type returned is the type stored, in addition to the user-defined statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10690"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GET_INDEX_STATS (
   ownname        VARCHAR2, 
   indname        VARCHAR2,
   partname       VARCHAR2 DEFAULT NULL,
   stattab        VARCHAR2 DEFAULT NULL, 
   statid         VARCHAR2 DEFAULT NULL,
   numrows    OUT NUMBER, 
   numlblks   OUT NUMBER,
   numdist    OUT NUMBER, 
   avglblk    OUT NUMBER,
   avgdblk    OUT NUMBER, 
   clstfct    OUT NUMBER,
   indlevel   OUT NUMBER,
   statown        VARCHAR2 DEFAULT NULL,
   cachedblk  OUT NUMBER,
   cachehit   OUT NUMBER);

DBMS_STATS.GET_INDEX_STATS (
   ownname        VARCHAR2, 
   indname        VARCHAR2,
   partname       VARCHAR2 DEFAULT NULL,
   stattab        VARCHAR2 DEFAULT NULL, 
   statid         VARCHAR2 DEFAULT NULL,
   numrows    OUT NUMBER, 
   numlblks   OUT NUMBER,
   numdist    OUT NUMBER, 
   avglblk    OUT NUMBER,
   avgdblk    OUT NUMBER, 
   clstfct    OUT NUMBER,
   indlevel   OUT NUMBER,
   statown        VARCHAR2 DEFAULT NULL,
   guessq     OUT NUMBER,
   cachedblk  OUT NUMBER,
   cachehit   OUT NUMBER);
</pre>
<p>Use the following for user-defined statistics:</p>
<pre dir="ltr">DBMS_STATS.GET_INDEX_STATS (
   ownname          VARCHAR2, 
   indname          VARCHAR2,
   partname         VARCHAR2 DEFAULT NULL,
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   ext_stats   OUT  RAW,
   stattypown  OUT  VARCHAR2 DEFAULT NULL, 
   stattypname OUT  VARCHAR2 DEFAULT NULL, 
   statown          VARCHAR2 DEFAULT NULL,
   cachedblk        OUT NUMBER,
   cachehit         OUT NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10691"></a>Parameters</p>
<div id="ARPLS68591" class="tblformal">
<p class="titleintable"><a id="sthref10692"></a><a id="sthref10693"></a>Table 155-51 GET_INDEX_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="GET_INDEX_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GET_INDEX_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t59">Parameter</th>
<th class="cellalignment4328" id="r1c2-t59">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t59" headers="r1c1-t59">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t59 r1c2-t59">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t59" headers="r1c1-t59">
<p><code dir="ltr">indname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t59 r1c2-t59">
<p>Name of the index</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t59" headers="r1c1-t59">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t59 r1c2-t59">
<p>Name of the index partition for which to get the statistics. If the index is partitioned and if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then the statistics are retrieved for the global index level.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t59" headers="r1c1-t59">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t59 r1c2-t59">
<p>User statistics table identifier describing from where to retrieve the statistics. If <code dir="ltr">stattab</code> is <code dir="ltr">NULL</code>, then the statistics are retrieved directly from the dictionary.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t59" headers="r1c1-t59">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t59 r1c2-t59">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code> (Only pertinent if <code dir="ltr">stattab</code> is not <code dir="ltr">NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t59" headers="r1c1-t59">
<p><code dir="ltr">ext_stats</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t59 r1c2-t59">
<p>User-defined statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t59" headers="r1c1-t59">
<p><code dir="ltr">stattypown</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t59 r1c2-t59">
<p>Schema of the statistics type</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t59" headers="r1c1-t59">
<p><code dir="ltr">stattypname</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t59 r1c2-t59">
<p>Name of the statistics type</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t59" headers="r1c1-t59">
<p><code dir="ltr">numrows</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t59 r1c2-t59">
<p>Number of rows in the index (partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t59" headers="r1c1-t59">
<p><code dir="ltr">numlblks</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t59 r1c2-t59">
<p>Number of leaf blocks in the index (partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t59" headers="r1c1-t59">
<p><code dir="ltr">numdist</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t59 r1c2-t59">
<p>Number of distinct keys in the index (partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t59" headers="r1c1-t59">
<p><code dir="ltr">avglblk</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t59 r1c2-t59">
<p>Average integral number of leaf blocks in which each distinct key appears for this index (partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t59" headers="r1c1-t59">
<p><code dir="ltr">avgdblk</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t59 r1c2-t59">
<p>Average integral number of data blocks in the table pointed to by a distinct key for this index (partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t59" headers="r1c1-t59">
<p><code dir="ltr">clstfct</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t59 r1c2-t59">
<p>Clustering factor for the index (partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t59" headers="r1c1-t59">
<p><code dir="ltr">indlevel</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t59 r1c2-t59">
<p>Height of the index (partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t59" headers="r1c1-t59">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t59 r1c2-t59">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t59" headers="r1c1-t59">
<p><code dir="ltr">guessq</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t59 r1c2-t59">
<p>Guess quality for the index (partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r19c1-t59" headers="r1c1-t59">
<p><code dir="ltr">cachedblk</code></p>
</td>
<td class="cellalignment4329" headers="r19c1-t59 r1c2-t59">
<p>The average number of blocks in the buffer cache for the segment (index/table/index partition/table partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r20c1-t59" headers="r1c1-t59">
<p><code dir="ltr">cachehit</code></p>
</td>
<td class="cellalignment4329" headers="r20c1-t59 r1c2-t59">
<p>The average cache hit ratio for the segment (index/table/index partition/table partition)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10694"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges or no statistics have been stored for requested object</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10695"></a>Usage Notes</p>
<ul>
<li>
<p>Before invoking this procedure, ensure that the table exists.</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</li>
<li>
<p>The Optimizer uses the cached data to estimate number of cached blocks for index or statistics table access. The total cost of the operation will be combined from the I/O cost of reading not cached blocks from disk, the CPU cost of getting cached blocks from the buffer cache, and the CPU cost of processing the data.</p>
</li>
<li>
<p>Oracle maintains <code dir="ltr">cachedblk</code> and <code dir="ltr">cachehit</code> at all times but uses correspondent caching statistics for optimization as part of the table and index statistics only when the user calls <code dir="ltr">DBMS_STATS.GATHER_[TABLE/INDEX/SCHEMA/DATABASE]_STATS</code> procedure for auto mode or <code dir="ltr">DBMS_STATS.GATHER_SYSTEM_STATS</code> for manual mode. In order to prevent the user from utilizing inaccurate and unreliable data, the optimizer will compute a &#39;confidence factor&#39; for each <code dir="ltr">cachehit</code> and a <code dir="ltr">cachedblk</code> for each object. If the &#39;confidence factor&#39; for the value meets confidence criteria, this value will be used, otherwise the defaults will be used.</p>
</li>
<li>
<p>The automatic maintenance algorithm for object caching statistics assumes that there is only one major workload for the system and adjusts statistics to this workload, ignoring other &#34;minor&#34; workloads. If this is not the case, you must use manual mode for maintaining object caching statistics.</p>
</li>
<li>
<p>The object caching statistics maintenance algorithm for auto mode prevents you from using statistics in the following situations</p>
<ul>
<li>
<p>When not enough data has been analyzed, such as when an object has been recently create</p>
</li>
<li>
<p>When the system does not have one major workload resulting in averages not corresponding to real values.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68592" class="refsect2"><a id="i1048775"></a>
<h3 class="refsect2"><a id="sthref10696"></a>GET_PARAM Function</h3>
<div class="infobox-note">
<p class="notep1">Note:</p>
This subprogram has been replaced by improved technology and is maintained only for purposes of backward compatibility. In this case, use the <a href="#BEICCEDB">GET_PREFS Function</a>.
<p>See also <a href="#i1049539">Deprecated Subprograms</a>.</p>
</div>
<p>This function returns the default value of parameters of <code dir="ltr">DBMS_STATS</code> procedures.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10697"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GET_PARAM (
   pname     IN   VARCHAR2)
 RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10698"></a>Parameters</p>
<div id="ARPLS68593" class="tblformal">
<p class="titleintable"><a id="sthref10699"></a><a id="sthref10700"></a>Table 155-52 GET_PARAM Function Parameters</p>
<table class="cellalignment4330" title="GET_PARAM Function Parameters" summary="This table describes the Parameters of DBMS_STATS.GET_PARAM subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t61">Parameter</th>
<th class="cellalignment4328" id="r1c2-t61">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t61" headers="r1c1-t61">
<p><code dir="ltr">pname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t61 r1c2-t61">
<p>Parameter name</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10701"></a>Exceptions</p>
<p><code dir="ltr">ORA-20001</code>: Invalid input values</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68594" class="refsect2"><a id="BEICCEDB"></a>
<h3 class="refsect2"><a id="sthref10702"></a>GET_PREFS Function</h3>
<p>This function returns the default value of the specified preference.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10703"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GET_PREFS (
   pname     IN   VARCHAR2,
   ownname   IN   VARCHAR2 DEFAULT NULL,
   tabname   IN   VARCHAR2 DEFAULT NULL)
 RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10704"></a>Parameters</p>
<div id="ARPLS68595" class="tblformal">
<p class="titleintable"><a id="sthref10705"></a><a id="sthref10706"></a>Table 155-53 GET_PREFS Function Parameters</p>
<table class="cellalignment4330" title="GET_PREFS Function Parameters" summary="This table describes the Parameters of DBMS_STATS.GET_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t62">Parameter</th>
<th class="cellalignment4328" id="r1c2-t62">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t62" headers="r1c1-t62">
<p><code dir="ltr">pname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t62 r1c2-t62">
<p>Preference name. The existing value for following preferences can be deleted and default preference values will be used:</p>
<ul>
<li>
<p><code dir="ltr">AUTOSTATS_TARGET</code></p>
</li>
<li>
<p><code dir="ltr">CASCADE</code></p>
</li>
<li>
<p><code dir="ltr">CONCURRENT</code></p>
</li>
<li>
<p><code dir="ltr">DEGREE</code></p>
</li>
<li>
<p><code dir="ltr">ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">METHOD_OPT</code></p>
</li>
<li>
<p><code dir="ltr">NO_INVALIDATE</code></p>
</li>
<li>
<p><code dir="ltr">GRANULARITY</code></p>
</li>
<li>
<p><code dir="ltr">PUBLISH</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL_STALENESS</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL_LEVEL</code></p>
</li>
<li>
<p><code dir="ltr">STALE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">GLOBAL_TEMP_TABLE_STATS</code></p>
</li>
<li>
<p><code dir="ltr">TABLE_CACHED_BLOCKS</code></p>
</li>
<li>
<p><code dir="ltr">OPTIONS</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t62" headers="r1c1-t62">&nbsp;</td>
<td class="cellalignment4329" headers="r3c1-t62 r1c2-t62">
<p><code dir="ltr">AUTOSTATS_TARGET</code> - This preference is applicable only for auto statistics collection. The value of this parameter controls the objects considered for statistics collection. It takes the following values:</p>
<ul>
<li>
<p><code dir="ltr">&#39;ALL&#39;</code> - Statistics collected for all objects in system</p>
</li>
<li>
<p><code dir="ltr">&#39;ORACLE&#39;</code> - Statistics collected for all Oracle owned objects</p>
</li>
<li>
<p><code dir="ltr">&#39;AUTO&#39;</code> - Oracle decides on which objects to collect statistics</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t62" headers="r1c1-t62">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r4c1-t62 r1c2-t62">
<p><code dir="ltr">CASCADE</code> - The value determines whether or not index statistics are collected as part of gathering table statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t62" headers="r1c1-t62">&nbsp;</td>
<td class="cellalignment4329" headers="r5c1-t62 r1c2-t62">
<p><code dir="ltr">CONCURRENT</code> - This preference determines whether statistics will be gathered concurrently on multiple objects, or serially, one object at a time:</p>
<ul>
<li>
<p><code dir="ltr">&#39;MANUAL&#39;</code> - Concurrency will be turned on only for manual statistics gathering.</p>
</li>
<li>
<p><code dir="ltr">&#39;AUTOMATIC&#39;</code>: Concurrency will be turned on only for the automatic statistics gathering.</p>
</li>
<li>
<p><code dir="ltr">&#39;ALL&#39;</code>: Concurrency will be turned on for both manual and automatic statistics gathering.</p>
</li>
<li>
<p><code dir="ltr">&#39;OFF&#39;</code>: Concurrency will be turned off for both manual and automatic statistics</p>
</li>
</ul>
<p>See Usage Notes below.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t62" headers="r1c1-t62">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r6c1-t62 r1c2-t62">
<p><code dir="ltr">DEGREE</code> - The value determines degree of parallelism used for gathering statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t62" headers="r1c1-t62">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r7c1-t62 r1c2-t62">
<p><code dir="ltr">ESTIMATE_PERCENT</code> - The value determines the percentage of rows to estimate. The valid range is [0.000001,100]. Use the constant <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t62" headers="r1c1-t62">
<p><code dir="ltr">method_opt</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t62 r1c2-t62">
<p>When setting preference on global, schema, database or dictionary level, only<code dir="ltr">&#39;FOR ALL&#39;</code> syntax is allowed.:</p>
<ul>
<li>
<p><code dir="ltr">FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code dir="ltr">[size_clause]</code></p>
</li>
</ul>
<p><code dir="ltr">size_clause</code> is defined as <code dir="ltr">size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<br/>
<code dir="ltr">- integer</code> : Number of histogram buckets. Must be in the range [1,2048].<br/>
<code dir="ltr">- REPEAT</code> : Collects histograms only on the columns that already have histograms.<br/>
<code dir="ltr">- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br/>
<code dir="ltr">- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.
<p>The default is <code dir="ltr">FOR ALL COLUMNS SIZE AUTO</code>.The value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t62" headers="r1c1-t62">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r9c1-t62 r1c2-t62">
<p><code dir="ltr">NO_INVALIDATE</code> - The value controls the invalidation of dependent cursors of the tables for which statistics are being gathered. Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code> to have Oracle decide when to invalidate dependent cursors. This is the default.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t62" headers="r1c1-t62">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r10c1-t62 r1c2-t62">
<p><code dir="ltr">GRANULARITY</code> - The value determines granularity of statistics to collect (only pertinent if the table is partitioned)</p>
<p><code dir="ltr">&#39;ALL&#39;</code> - gathers all (subpartition, partition, and global) statistics</p>
<p><code dir="ltr">&#39;AUTO&#39;</code>- determines the granularity based on the partitioning type. This is the default value.</p>
<p><code dir="ltr">&#39;DEFAULT&#39;</code> - gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the &#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; for this functionality. Note that the default value is now &#39;<code dir="ltr">AUTO</code>&#39;.</p>
<p><code dir="ltr">&#39;GLOBAL&#39;</code> - gathers global statistics</p>
<p>&#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; - gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code dir="ltr">&#39;PARTITION</code> &#39;- gathers partition-level statistics</p>
<p><code dir="ltr">&#39;SUBPARTITION&#39;</code> - gathers subpartition-level statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t62" headers="r1c1-t62">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r11c1-t62 r1c2-t62">
<p><code dir="ltr">PUBLISH</code> - This value determines whether or not newly gathered statistics will be published once the gather job has completed. Prior to Oracle Database 11<span class="italic">g</span>, Release 1 (11.1), once a statistic gathering job completed the new statistics were automatically published into the dictionary tables. The user now has the ability to gather statistics but not publish them immediately. This allows the DBA to test the new statistics before publishing them.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t62" headers="r1c1-t62">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r12c1-t62 r1c2-t62">
<p><code dir="ltr">INCREMENTAL</code> - This value determines whether or not the global statistics of a partitioned table will be maintained without doing a full table scan. With partitioned tables it is very common to load new data into a new partition. As new partitions are added and data loaded, the global table statistics need to be kept up to date. Oracle will update the global table statistics by scanning only the partitions that have been changed instead of the entire table if the following conditions hold:</p>
<ul>
<li>
<p>the <code dir="ltr">INCREMENTAL</code> value for the partitioned table is set to <code dir="ltr">TRUE</code>;</p>
</li>
<li>
<p>the <code dir="ltr">PUBLISH</code> value for the partitioned table is set to <code dir="ltr">TRUE</code>;</p>
</li>
<li>
<p>the user specifies <code dir="ltr">AUTO_SAMPLE_SIZE</code> for <code dir="ltr">ESTIMATE_PERCENT</code> and <code dir="ltr">AUTO</code> for <code dir="ltr">GRANULARITY</code> when gathering statistics on the table.</p>
</li>
</ul>
<p>If the <code dir="ltr">INCREMENTAL</code> value for the partitioned table was set to <code dir="ltr">FALSE</code> (default value), a full table scan is used to maintain the global statistics which is a much more resource intensive and time-consuming operation for large tables.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t62" headers="r1c1-t62">&nbsp;</td>
<td class="cellalignment4329" headers="r13c1-t62 r1c2-t62">
<p><code dir="ltr">INCREMENTAL_LEVEL</code> - This value controls what synopses to collect when <code dir="ltr">INCREMENTAL</code> preference is set to <code dir="ltr">TRUE</code> It takes two values:</p>
<ul>
<li>
<p><code dir="ltr">TABLE</code> - table level synopses are gathered. This is used when you want to exchange this table with a partition. You can run <code dir="ltr">GATHER_TABLE_STATS</code> on this table with <code dir="ltr">INCREMENTAL</code> to <code dir="ltr">TRUE</code> and <code dir="ltr">INCREMENTAL_LEVEL</code> to <code dir="ltr">TABLE</code> before the exchange. The result is that table level synopses are gathered on this table (currently Oracle supports only table level synopses on non-predestined tables). Once the exchange occurs, the partition will have synopses which come from the table level synopses of the table before exchange. This preference value can be only used in the <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. It is not allowed in the <code dir="ltr">SET_GLOBAL/DATABASE/SCHEMA_PREFS</code> procedures.</p>
</li>
<li>
<p><code dir="ltr">PARTITION</code> - partition level synopses are gathered. This is the default value. If PARTITION is set on a non partitioned table, no synopses are gathered.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t62" headers="r1c1-t62">&nbsp;</td>
<td class="cellalignment4329" headers="r14c1-t62 r1c2-t62">
<p><code dir="ltr">INCREMENTAL_STALENESS</code> - This value controls how we decide a partition or subpartition as stale. It takes an enumeration of values which may be multiple, such as <code dir="ltr">&#39;USE_STALE_PERCENT&#39;</code>, <code dir="ltr">&#39;USE_LOCKED_STATS&#39;</code>.</p>
<ul>
<li>
<p><code dir="ltr">USE_STALE_PERCENT</code> - a partition/subpartition is not considered as stale if DML changes are less than the <code dir="ltr">STALE_PERCENT</code> preference value</p>
</li>
<li>
<p><code dir="ltr">USE_LOCKED_STATS</code> - locked partitions/subpartitions statistics are not considered as stale, regardless of DML changes</p>
</li>
<li>
<p><code dir="ltr">NULL</code> - this is the default value, meaning a partition or subpartition is considered as stale as long as it has any DML changes. When the default value is used, statistics gathered in incremental mode are guaranteed to be the same as the statistics gathered in non incremental mode. When a non default value is used, the statistics gathered in incremental mode might be less accurate than those gathered in non-incremental mode</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t62" headers="r1c1-t62">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r15c1-t62 r1c2-t62">
<p><code dir="ltr">STALE_PERCENT</code> - This value determines the percentage of rows in a table that have to change before the statistics on that table are deemed stale and should be regathered. The valid domain for <code dir="ltr">stale_percent</code> is non-negative numbers. The default value is 10, meaning a table having more than 10% of changes is considered as stale.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t62" headers="r1c1-t62">&nbsp;</td>
<td class="cellalignment4329" headers="r16c1-t62 r1c2-t62">
<p><code dir="ltr">GLOBAL_TEMP_TABLE_STATS</code> - This controls whether the statistics gathered for a global temporary table should be stored as shared statistics or session statistics. It takes two values:</p>
<ul>
<li>
<p><code dir="ltr">SHARED</code> - All sessions see the same set of statistics</p>
</li>
<li>
<p><code dir="ltr">SESSION</code> - Statistics gathered by the <a href="#i1036461">GATHER_TABLE_STATS Procedure</a> on a global temporary table are session specific, and hence are only going to be used by the queries issued in the same session as the statistics gathering process. Session-specific statistics are deleted when a session is ended.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t62" headers="r1c1-t62">&nbsp;</td>
<td class="cellalignment4329" headers="r17c1-t62 r1c2-t62">
<p><code dir="ltr">TABLE_CACHED_BLOCKS</code> - The average number of blocks cached in the buffer cache for any table we can assume when gathering the index clustering factor.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t62" headers="r1c1-t62">
<p><code dir="ltr">options</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t62 r1c2-t62">
<p>Further specification of which objects to gather statistics:</p>
<ul>
<li>
<p><code dir="ltr">GATHER</code> - gathers statistics on all objects in the schema</p>
</li>
<li>
<p><code dir="ltr">GATHER</code> <code dir="ltr">AUTO</code> - gathers all necessary statistics automatically. Oracle implicitly determines which objects need new statistics.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r19c1-t62" headers="r1c1-t62">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r19c1-t62 r1c2-t62">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r20c1-t62" headers="r1c1-t62">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r20c1-t62 r1c2-t62">
<p>Table name</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10707"></a>Exceptions</p>
<ul>
<li>
<p><code dir="ltr">ORA-20000</code>: Unable to gather statistics concurrently: Resource Manager is not enabled.</p>
</li>
<li>
<p><code dir="ltr">ORA-20001</code>: Invalid input values</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10708"></a>Usage Notes</p>
<ul>
<li>
<p>No special privilege or role is needed to invoke this procedure, however note the following with regard to <code dir="ltr">CONCURRENT</code> preference.</p>
</li>
<li>
<p>The <code dir="ltr">CONCURRENT</code> preference determines whether the statistics of tables or (sub)partitions of tables to be gathered concurrently when user issues <code dir="ltr">GATHER_*_STATS</code> procedures. <code dir="ltr">DBMS_STATS</code> has the ability to collect statistics for a single object (table, (sub)partition) in parallel based on the value of degree parameter. However the parallelism is limited to one object. The <code dir="ltr">CONCURRENT</code> preference extends the scope of parallelization to multiple database objects by enabling users to concurrently gather statistics for multiple tables in a schema or database and multiple (sub)partitions within a table. Note that this is primarily intended for multi CPU systems and it may not be suitable for small databases on single CPU machines.</p>
<p>To gather statistics concurrently,</p>
<ul>
<li>
<p>-The user must have DBA role or have the following privileges in addition to privileges that are required for gathering statistics: <code dir="ltr">CREATE</code> <code dir="ltr">JOB</code>, <code dir="ltr">MANAGE</code> <code dir="ltr">SCHEDULER</code>, <code dir="ltr">MANAGE</code> <code dir="ltr">ANY</code> <code dir="ltr">QUEUE</code>.</p>
</li>
<li>
<p>Resource Manager should be enabled.</p>
</li>
<li>
<p>The setting for the <code dir="ltr">job_queue_processes</code> parameter must be at least <code dir="ltr">4</code>.</p>
</li>
</ul>
</li>
<li>
<p>If the <code dir="ltr">ownname</code> and <code dir="ltr">tabname</code> are provided and a preference has been entered for the table, the function returns the preference as specified for the table. In all other cases it returns the global preference if it has been specified, otherwise the default value is returned.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68596" class="refsect2"><a id="i1050595"></a>
<h3 class="refsect2"><a id="sthref10709"></a>GET_STATS_HISTORY_AVAILABILITY Function</h3>
<p>This function returns oldest timestamp where statistics history is available.Users cannot restore statistics to a timestamp older than this one.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10710"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GET_STATS_HISTORY_AVAILABILITY
 RETURN TIMESTAMP WITH TIMEZONE;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10711"></a>Usage Notes</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68597" class="refsect2"><a id="i1048205"></a>
<h3 class="refsect2"><a id="sthref10712"></a>GET_STATS_HISTORY_RETENTION Function</h3>
<p>This function returns the current statistics history retention value.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10713"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GET_STATS_HISTORY_RETENTION
 RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10714"></a>Usage Notes</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68598" class="refsect2"><a id="i1036927"></a>
<h3 class="refsect2"><a id="sthref10715"></a>GET_SYSTEM_STATS Procedure</h3>
<p>This procedure gets system statistics from <code dir="ltr">stattab</code>, or from the dictionary if <code dir="ltr">stattab</code> is <code dir="ltr">NULL</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10716"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GET_SYSTEM_STATS (
   status    OUT  VARCHAR2,
   dstart    OUT  DATE,
   dstop     OUT  DATE,
   pname     IN   VARCHAR2,
   pvalue    OUT  NUMBER,
   stattab   IN   VARCHAR2 DEFAULT NULL, 
   statid    IN   VARCHAR2 DEFAULT NULL,
   statown   IN   VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10717"></a>Parameters</p>
<div id="ARPLS68599" class="tblformal">
<p class="titleintable"><a id="sthref10718"></a><a id="sthref10719"></a>Table 155-54 GET_SYSTEM_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="GET_SYSTEM_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GET_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t63">Parameter</th>
<th class="cellalignment4328" id="r1c2-t63">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t63" headers="r1c1-t63">
<p><code dir="ltr">status</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t63 r1c2-t63">
<p>Output is one of the following:</p>
<ul>
<li>
<p><code dir="ltr">COMPLETED:</code></p>
</li>
<li>
<p><code dir="ltr">AUTOGATHERING:</code></p>
</li>
<li>
<p><code dir="ltr">MANUALGATHERING:</code></p>
</li>
<li>
<p><code dir="ltr">BADSTATS:</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t63" headers="r1c1-t63">
<p><code dir="ltr">dstart</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t63 r1c2-t63">
<p>Date when statistics gathering started.</p>
<p>If <code dir="ltr">status</code> = <code dir="ltr">MANUALGATHERING</code>, the start date is returned.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t63" headers="r1c1-t63">
<p><code dir="ltr">dstop</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t63 r1c2-t63">
<p>Date when statistics gathering stopped.</p>
<ul>
<li>
<p>If <code dir="ltr">status</code> = <code dir="ltr">COMPLETE</code>, the finish date is returned.</p>
</li>
<li>
<p>If <code dir="ltr">status</code> = <code dir="ltr">AUTOGATHERING</code>, the future finish date is returned.</p>
</li>
<li>
<p>If <code dir="ltr">status</code> = <code dir="ltr">BADSTATS</code>, the must-finished-by date is returned.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t63" headers="r1c1-t63">
<p><code dir="ltr">pname</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t63 r1c2-t63">
<p>The parameter name to get, which can have one of the following values:</p>
<ul>
<li>
<p><code dir="ltr">iotfrspeed</code> - I/O transfer speed in bytes for each millisecond</p>
</li>
<li>
<p><code dir="ltr">ioseektim</code> - seek time + latency time + operating system overhead time, in milliseconds</p>
</li>
<li>
<p><code dir="ltr">sreadtim</code> - average time to read single block (random read), in milliseconds</p>
</li>
<li>
<p><code dir="ltr">mreadtim</code> - average time to read an mbrc block at once (sequential read), in milliseconds</p>
</li>
<li>
<p><code dir="ltr">cpuspeed</code> - average number of CPU cycles for each second, in millions, captured for the workload (statistics collected using &#39;<code dir="ltr">INTERVAL</code>&#39; or &#39;<code dir="ltr">START</code>&#39; and &#39;<code dir="ltr">STOP</code>&#39; options)</p>
</li>
<li>
<p><code dir="ltr">cpuspeednw</code> - average number of CPU cycles for each second, in millions, captured for the no-workload (statistics collected using &#39;<code dir="ltr">NOWORKLOAD</code>&#39; option.</p>
</li>
<li>
<p><code dir="ltr">mbrc</code> - average multiblock read count for sequential read, in blocks</p>
</li>
<li>
<p><code dir="ltr">maxthr</code> - maximum I/O system throughput, in bytes/second</p>
</li>
<li>
<p><code dir="ltr">slavethr</code> - average slave I/O throughput, in bytes/second</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t63" headers="r1c1-t63">
<p><code dir="ltr">pvalue</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t63 r1c2-t63">
<p>Parameter value to get</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t63" headers="r1c1-t63">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t63 r1c2-t63">
<p>Identifier of the user statistics table where the statistics will be obtained. If <code dir="ltr">stattab</code> is <code dir="ltr">NULL</code>, the statistics will be obtained from the dictionary.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t63" headers="r1c1-t63">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t63 r1c2-t63">
<p>Optional identifier associated with the statistics saved in the <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t63" headers="r1c1-t63">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t63 r1c2-t63">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10720"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table; may need to be upgraded</p>
<p><code dir="ltr">ORA-20003</code>: Unable to gather system statistics</p>
<p><code dir="ltr">ORA-20004</code>: Parameter does not exist</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10721"></a>Usage Notes</p>
<p>To run this procedure, you need the <code dir="ltr">GATHER_SYSTEM_STATISTICS</code> role.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68600" class="refsect2"><a id="i1037003"></a>
<h3 class="refsect2"><a id="sthref10722"></a>GET_TABLE_STATS Procedure</h3>
<p>This procedure gets all table-related information.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10723"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.GET_TABLE_STATS (
   ownname         VARCHAR2, 
   tabname         VARCHAR2, 
   partname        VARCHAR2 DEFAULT NULL,
   stattab         VARCHAR2 DEFAULT NULL,
   statid          VARCHAR2 DEFAULT NULL,
   numrows     OUT NUMBER, 
   numblks     OUT NUMBER,
   avgrlen     OUT NUMBER,
   statown         VARCHAR2 DEFAULT NULL,
   cachedblk   OUT NUMBER,
   cachehit    OUT NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10724"></a>Parameters</p>
<div id="ARPLS68601" class="tblformal">
<p class="titleintable"><a id="sthref10725"></a><a id="sthref10726"></a>Table 155-55 GET_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="GET_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GET_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t64">Parameter</th>
<th class="cellalignment4328" id="r1c2-t64">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t64" headers="r1c1-t64">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t64 r1c2-t64">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t64" headers="r1c1-t64">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t64 r1c2-t64">
<p>Name of the table to which this column belongs</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t64" headers="r1c1-t64">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t64 r1c2-t64">
<p>Name of the table partition from which to get the statistics. If the table is partitioned and if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then the statistics are retrieved from the global table level.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t64" headers="r1c1-t64">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t64 r1c2-t64">
<p>User statistics table identifier describing from where to retrieve the statistics. If <code dir="ltr">stattab</code> is <code dir="ltr">NULL</code>, then the statistics are retrieved directly from the dictionary.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t64" headers="r1c1-t64">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t64 r1c2-t64">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code> (Only pertinent if <code dir="ltr">stattab</code> is not <code dir="ltr">NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t64" headers="r1c1-t64">
<p><code dir="ltr">numrows</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t64 r1c2-t64">
<p>Number of rows in the table (partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t64" headers="r1c1-t64">
<p><code dir="ltr">numblks</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t64 r1c2-t64">
<p>Number of blocks the table (partition) occupies</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t64" headers="r1c1-t64">
<p><code dir="ltr">avgrlen</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t64 r1c2-t64">
<p>Average row length for the table (partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t64" headers="r1c1-t64">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t64 r1c2-t64">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t64" headers="r1c1-t64">
<p><code dir="ltr">cachedblk</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t64 r1c2-t64">
<p>The average number of blocks in the buffer cache for the segment (index/table/index partition/table partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t64" headers="r1c1-t64">
<p><code dir="ltr">cachehit</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t64 r1c2-t64">
<p>The average cache hit ratio for the segment (index/table/index partition/table partition)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10727"></a>Usage Notes</p>
<ul>
<li>
<p>Before invoking this procedure, ensure that the table exists.</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</li>
<li>
<p>The Optimizer uses the cached data to estimate number of cached blocks for index or statistics table access. The total cost of the operation will be combined from the I/O cost of reading not cached blocks from disk, the CPU cost of getting cached blocks from the buffer cache, and the CPU cost of processing the data.</p>
</li>
<li>
<p>Oracle maintains <code dir="ltr">cachedblk</code> and <code dir="ltr">cachehit</code> at all times but uses correspondent caching statistics for optimization as part of the table and index statistics only when the user calls <code dir="ltr">DBMS_STATS.GATHER_[TABLE/INDEX/SCHEMA/DATABASE]_STATS</code> procedure for auto mode or <code dir="ltr">DBMS_STATS.GATHER_SYSTEM_STATS</code> for manual mode. In order to prevent the user from utilizing inaccurate and unreliable data, the optimizer will compute a &#39;confidence factor&#39; for each <code dir="ltr">cachehit</code> and a <code dir="ltr">cachedblk</code> for each object. If the &#39;confidence factor&#39; for the value meets confidence criteria, this value will be used, otherwise the defaults will be used.</p>
</li>
<li>
<p>The automatic maintenance algorithm for object caching statistics assumes that there is only one major workload for the system and adjusts statistics to this workload, ignoring other &#34;minor&#34; workloads. If this is not the case, you must use manual mode for maintaining object caching statistics.</p>
</li>
<li>
<p>The object caching statistics maintenance algorithm for auto mode prevents you from using statistics in the following situations</p>
<ul>
<li>
<p>When not enough data has been analyzed, such as when an object has been recently create</p>
</li>
<li>
<p>When the system does not have one major workload resulting in averages not corresponding to real values.</p>
</li>
</ul>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10728"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges or no statistics have been stored for requested object</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68602" class="refsect2"><a id="i1037153"></a>
<h3 class="refsect2"><a id="sthref10729"></a>IMPORT_COLUMN_STATS Procedure</h3>
<p>This procedure retrieves statistics for a particular column from the user statistics table identified by <code dir="ltr">stattab</code> and stores them in the dictionary.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10730"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.IMPORT_COLUMN_STATS (
   ownname       VARCHAR2, 
   tabname       VARCHAR2, 
   colname       VARCHAR2,
   partname      VARCHAR2 DEFAULT NULL,
   stattab       VARCHAR2, 
   statid        VARCHAR2 DEFAULT NULL,
   statown       VARCHAR2 DEFAULT NULL,
   no_invalidate BOOLEAN DEFAULT to_no_invalidate_type (
                                     get_param(&#39;NO_INVALIDATE&#39;)),
   force         BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10731"></a>Parameters</p>
<div id="ARPLS68603" class="tblformal">
<p class="titleintable"><a id="sthref10732"></a><a id="sthref10733"></a>Table 155-56 IMPORT_COLUMN_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="IMPORT_COLUMN_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_COLUMN_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t65">Parameter</th>
<th class="cellalignment4328" id="r1c2-t65">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t65" headers="r1c1-t65">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t65 r1c2-t65">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t65" headers="r1c1-t65">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t65 r1c2-t65">
<p>Name of the table to which this column belongs</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t65" headers="r1c1-t65">
<p><code dir="ltr">colname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t65 r1c2-t65">
<p>Name of the column or extension</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t65" headers="r1c1-t65">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t65 r1c2-t65">
<p>Name of the table partition. If the table is partitioned and if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then global and partition column statistics are imported.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t65" headers="r1c1-t65">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t65 r1c2-t65">
<p>User statistics table identifier describing from where to retrieve the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t65" headers="r1c1-t65">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t65 r1c2-t65">
<p>Identifier to associate with these statistics within <code dir="ltr">stattab</code> (optional)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t65" headers="r1c1-t65">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t65 r1c2-t65">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t65" headers="r1c1-t65">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t65 r1c2-t65">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t65" headers="r1c1-t65">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t65 r1c2-t65">
<p>If set to <code dir="ltr">TRUE</code>, imports statistics even if statistics are locked</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10734"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10735"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent values in the user statistics table</p>
<p><code dir="ltr">ORA-20005</code>: Object statistics are locked</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10736"></a>Usage Notes</p>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68604" class="refsect2"><a id="BEIGFDAI"></a>
<h3 class="refsect2"><a id="sthref10737"></a>IMPORT_DATABASE_PREFS Procedure</h3>
<p>This procedure is used to import the statistics preferences of all the tables, excluding the tables owned by Oracle. These tables can by included by passing <code dir="ltr">TRUE</code> for the <code dir="ltr">add_sys</code> parameter.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10738"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.IMPORT_DATABASE_PREFS (
    stattab    IN  VARCHAR2,
    statid     IN  VARCHAR2 DEFAULT NULL,
    statown    IN  VARCHAR2 DEFAULT NULL
    add_sys    IN  BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10739"></a>Parameters</p>
<div id="ARPLS68605" class="tblformal">
<p class="titleintable"><a id="sthref10740"></a><a id="sthref10741"></a>Table 155-57 IMPORT_DATABASE_PREFS Procedure Parameters</p>
<table class="cellalignment4330" title="IMPORT_DATABASE_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_DATABASE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t66">Parameter</th>
<th class="cellalignment4328" id="r1c2-t66">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t66" headers="r1c1-t66">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t66 r1c2-t66">
<p>Statistics table name where to import the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t66" headers="r1c1-t66">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t66 r1c2-t66">
<p>Optional identifier to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t66" headers="r1c1-t66">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t66 r1c2-t66">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t66" headers="r1c1-t66">
<p><code dir="ltr">add_sys</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t66 r1c2-t66">
<p>Value <code dir="ltr">TRUE</code> will include the Oracle-owned tables</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10742"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10743"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to have the SYSDBA role, or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privileges.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10744"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.IMPORT_DATABASE_PREFS(&#39;STATTAB&#39;, statown=&gt;&#39;SH&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68606" class="refsect2"><a id="i1037134"></a>
<h3 class="refsect2"><a id="sthref10745"></a>IMPORT_DATABASE_STATS Procedure</h3>
<p>This procedure retrieves statistics for all objects in the database from the user statistics table(s) and stores them in the dictionary.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10746"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.IMPORT_DATABASE_STATS (
   stattab         VARCHAR2, 
   statid          VARCHAR2 DEFAULT NULL,
   statown         VARCHAR2 DEFAULT NULL,
   no_invalidate   BOOLEAN DEFAULT to_no_invalidate_type(
                                    get_param(&#39;NO_INVALIDATE&#39;)),
   force           BOOLEAN DEFAULT FALSE,
   stat_category   VARCHAR2 DEFAULT DEFAULT_STAT_CATEGORY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10747"></a>Parameters</p>
<div id="ARPLS68607" class="tblformal">
<p class="titleintable"><a id="sthref10748"></a><a id="sthref10749"></a>Table 155-58 IMPORT_DATABASE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="IMPORT_DATABASE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_DATABASE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t67">Parameter</th>
<th class="cellalignment4328" id="r1c2-t67">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t67" headers="r1c1-t67">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t67 r1c2-t67">
<p>User statistics table identifier describing from where to retrieve the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t67" headers="r1c1-t67">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t67 r1c2-t67">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t67" headers="r1c1-t67">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t67 r1c2-t67">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t67" headers="r1c1-t67">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t67 r1c2-t67">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t67" headers="r1c1-t67">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t67 r1c2-t67">
<p>Overrides statistics locked at the object (table) level:</p>
<ul>
<li>
<p><code dir="ltr">TRUE</code> - Ignores the statistics lock and imports the statistics</p>
</li>
<li>
<p><code dir="ltr">FALSE</code> - The statistics will be imported only if they are not locked</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t67" headers="r1c1-t67">
<p><code dir="ltr">stat_category</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t67 r1c2-t67">
<p>Specifies what statistics to import, accepting multiple values separated by a comma. Values supported:</p>
<ul>
<li>
<p><code dir="ltr">OBJECT_STATS</code> - table statistics, column statistics and index statistics (Default)</p>
</li>
<li>
<p><code dir="ltr">SYNOPSES</code> - information to support incremental statistics</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10750"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent values in the user statistics table</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10751"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to have the <code dir="ltr">SYSDBA</code> role or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privileges.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68608" class="refsect2"><a id="i1043013"></a>
<h3 class="refsect2"><a id="sthref10752"></a>IMPORT_DICTIONARY_STATS Procedure</h3>
<p>This procedure retrieves statistics for all dictionary schemas (&#39;<code dir="ltr">SYS</code>&#39;, &#39;<code dir="ltr">SYSTEM</code>&#39; and RDBMS component schemas) from the user statistics table and stores them in the dictionary.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10753"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.IMPORT_DICTIONARY_STATS (
   stattab         VARCHAR2, 
   statid          VARCHAR2 DEFAULT NULL,
   statown         VARCHAR2 DEFAULT NULL,
   no_invalidate   BOOLEAN DEFAULT to_no_invalidate_type(
                                    get_param(&#39;NO_INVALIDATE&#39;)),
   force           BOOLEAN DEFAULT FALSE,
   stat_category   VARCHAR2 DEFAULT DEFAULT_STAT_CATEGORY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10754"></a>Parameters</p>
<div id="ARPLS68609" class="tblformal">
<p class="titleintable"><a id="sthref10755"></a><a id="sthref10756"></a>Table 155-59 IMPORT_DICTIONARY_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="IMPORT_DICTIONARY_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_DICTIONARY_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t68">Parameter</th>
<th class="cellalignment4328" id="r1c2-t68">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t68" headers="r1c1-t68">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t68 r1c2-t68">
<p>User statistics table identifier describing from where to retrieve the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t68" headers="r1c1-t68">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t68 r1c2-t68">
<p>The (optional) identifier to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t68" headers="r1c1-t68">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t68 r1c2-t68">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t68" headers="r1c1-t68">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t68 r1c2-t68">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t68" headers="r1c1-t68">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t68 r1c2-t68">
<p>Overrides statistics lock at the object (table) level:</p>
<ul>
<li>
<p><code dir="ltr">TRUE</code> - Ignores the statistics lock and imports the statistics.</p>
</li>
<li>
<p><code dir="ltr">FALSE</code> - The statistics will be imported only if there is no lock.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t68" headers="r1c1-t68">
<p><code dir="ltr">stat_category</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t68 r1c2-t68">
<p>Specifies what statistics to import, accepting multiple values separated by a comma. Values supported:</p>
<ul>
<li>
<p><code dir="ltr">OBJECT_STATS</code> - table statistics, column statistics and index statistics (Default)</p>
</li>
<li>
<p><code dir="ltr">SYNOPSES</code> - information to support incremental statistics</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10757"></a>Usage Notes</p>
<ul>
<li>
<p>You must have the <code dir="ltr">SYSDBA</code> or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege to execute this procedure.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10758"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent values in the user statistics table</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68610" class="refsect2"><a id="i1041649"></a>
<h3 class="refsect2"><a id="sthref10759"></a>IMPORT_FIXED_OBJECTS_STATS Procedure</h3>
<p>This procedure retrieves statistics for fixed tables from the user statistics table(s) and stores them in the dictionary.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10760"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.IMPORT_FIXED_OBJECTS_STATS (
   stattab       VARCHAR2, 
   statid        VARCHAR2 DEFAULT NULL,
   statown       VARCHAR2 DEFAULT NULL,
   no_invalidate BOOLEAN DEFAULT to_no_invalidate_type(
                                    get_param(&#39;NO_INVALIDATE&#39;)),
   force         BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10761"></a>Parameters</p>
<div id="ARPLS68611" class="tblformal">
<p class="titleintable"><a id="sthref10762"></a><a id="sthref10763"></a>Table 155-60 IMPORT_FIXED_OBJECTS_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="IMPORT_FIXED_OBJECTS_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_FIXED_OBJECTS_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t69">Parameter</th>
<th class="cellalignment4328" id="r1c2-t69">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t69" headers="r1c1-t69">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t69 r1c2-t69">
<p>User statistics table identifier describing from where to retrieve the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t69" headers="r1c1-t69">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t69 r1c2-t69">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t69" headers="r1c1-t69">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t69 r1c2-t69">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t69" headers="r1c1-t69">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t69 r1c2-t69">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t69" headers="r1c1-t69">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t69 r1c2-t69">
<p>Overrides statistics lock:</p>
<ul>
<li>
<p><code dir="ltr">TRUE</code> - Ignores the statistics lock and imports the statistics</p>
</li>
<li>
<p><code dir="ltr">FALSE</code> - The statistics will be imported only if there is no lock</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10764"></a>Usage Notes</p>
<ul>
<li>
<p>You must have the <code dir="ltr">SYSDBA</code> or <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> system privilege to execute this procedure.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10765"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent values in the user statistics table</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68612" class="refsect2"><a id="i1037276"></a>
<h3 class="refsect2"><a id="sthref10766"></a>IMPORT_INDEX_STATS Procedure</h3>
<p>This procedure retrieves statistics for a particular index from the user statistics table identified by <code dir="ltr">stattab</code> and stores them in the dictionary.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10767"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.IMPORT_INDEX_STATS (
   ownname       VARCHAR2, 
   indname       VARCHAR2,
   partname      VARCHAR2 DEFAULT NULL,
   stattab       VARCHAR2, 
   statid        VARCHAR2 DEFAULT NULL,
   statown       VARCHAR2 DEFAULT NULL,
   no_invalidate BOOLEAN DEFAULT to_no_invalidate_type(
                                    get_param(&#39;NO_INVALIDATE&#39;)),
   force         BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10768"></a>Parameters</p>
<div id="ARPLS68613" class="tblformal">
<p class="titleintable"><a id="sthref10769"></a><a id="sthref10770"></a>Table 155-61 IMPORT_INDEX_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="IMPORT_INDEX_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_INDEX_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t70">Parameter</th>
<th class="cellalignment4328" id="r1c2-t70">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t70" headers="r1c1-t70">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t70 r1c2-t70">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t70" headers="r1c1-t70">
<p><code dir="ltr">indname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t70 r1c2-t70">
<p>Name of the index</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t70" headers="r1c1-t70">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t70 r1c2-t70">
<p>Name of the index partition. If the index is partitioned and if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then global and partition index statistics are imported.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t70" headers="r1c1-t70">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t70 r1c2-t70">
<p>User statistics table identifier describing from where to retrieve the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t70" headers="r1c1-t70">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t70 r1c2-t70">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t70" headers="r1c1-t70">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t70 r1c2-t70">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t70" headers="r1c1-t70">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t70 r1c2-t70">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t70" headers="r1c1-t70">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t70 r1c2-t70">
<p>Imports statistics even if index statistics are locked</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10771"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent values in the user statistics table</p>
<p><code dir="ltr">ORA-20005</code>: Object statistics are locked</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10772"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68614" class="refsect2"><a id="BEIHBJBH"></a>
<h3 class="refsect2"><a id="sthref10773"></a>IMPORT_SCHEMA_PREFS Procedure</h3>
<p>This procedure is used to import the statistics preferences of all the tables owned by the specified owner name.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10774"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.IMPORT_SCHEMA_PREFS (
    ownname    IN  VARCHAR2,
    stattab    IN  VARCHAR2,
    statid     IN  VARCHAR2 DEFAULT NULL,
    statown    IN  VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10775"></a>Parameters</p>
<div id="ARPLS68615" class="tblformal">
<p class="titleintable"><a id="sthref10776"></a><a id="sthref10777"></a>Table 155-62 IMPORT_SCHEMA_PREFS Procedure Parameters</p>
<table class="cellalignment4330" title="IMPORT_SCHEMA_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_SCHEMA_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t71">Parameter</th>
<th class="cellalignment4328" id="r1c2-t71">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t71" headers="r1c1-t71">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t71 r1c2-t71">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t71" headers="r1c1-t71">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t71 r1c2-t71">
<p>Statistics table name from where to import the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t71" headers="r1c1-t71">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t71 r1c2-t71">
<p>(Optional) Identifier to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t71" headers="r1c1-t71">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t71 r1c2-t71">
<p>Schema containing <code dir="ltr">stattab</code> (if other than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10778"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10779"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to connect as owner, or have the <code dir="ltr">SYSDBA</code> privilege, or have the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege.</p>
</li>
<li>
<p>All arguments are of type <code dir="ltr">VARCHAR2</code> and values are enclosed in quotes.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10780"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.IMPORT_SCHEMA_PREFS(&#39;SH&#39;, &#39;STAT&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68616" class="refsect2"><a id="i1037487"></a>
<h3 class="refsect2"><a id="sthref10781"></a>IMPORT_SCHEMA_STATS Procedure</h3>
<p>This procedure retrieves statistics for all objects in the schema identified by <code dir="ltr">ownname</code> from the user statistics table and stores them in the dictionary.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10782"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.IMPORT_SCHEMA_STATS (
   ownname         VARCHAR2,
   stattab         VARCHAR2, 
   statid          VARCHAR2 DEFAULT NULL,
   statown         VARCHAR2 DEFAULT NULL,
   no_invalidate   BOOLEAN DEFAULTto_no_invalidate_type(
                                    get_param(&#39;NO_INVALIDATE&#39;)),
   force           BOOLEAN DEFAULT FALSE,
   stat_category   VARCHAR2 DEFAULT DEFAULT_STAT_CATEGORY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10783"></a>Parameters</p>
<div id="ARPLS68617" class="tblformal">
<p class="titleintable"><a id="sthref10784"></a><a id="sthref10785"></a>Table 155-63 IMPORT_SCHEMA_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="IMPORT_SCHEMA_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t72">Parameter</th>
<th class="cellalignment4328" id="r1c2-t72">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t72" headers="r1c1-t72">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t72 r1c2-t72">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t72" headers="r1c1-t72">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t72 r1c2-t72">
<p>User statistics table identifier describing from where to retrieve the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t72" headers="r1c1-t72">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t72 r1c2-t72">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t72" headers="r1c1-t72">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t72 r1c2-t72">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t72" headers="r1c1-t72">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t72 r1c2-t72">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t72" headers="r1c1-t72">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t72 r1c2-t72">
<p>Overrides statistics locked at the object (table) level:</p>
<ul>
<li>
<p><code dir="ltr">TRUE</code> - Ignores the statistics lock and imports the statistics.</p>
</li>
<li>
<p><code dir="ltr">FALSE</code> - Statistics will be imported only if there is no lock.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t72" headers="r1c1-t72">
<p><code dir="ltr">stat_category</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t72 r1c2-t72">
<p>Specifies what statistics to import, accepting multiple values separated by a comma. Values supported:</p>
<ul>
<li>
<p><code dir="ltr">OBJECT_STATS</code> - table statistics, column statistics and index statistics (Default)</p>
</li>
<li>
<p><code dir="ltr">SYNOPSES</code> - information to support incremental statistics</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10786"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent values in the user statistics table</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10787"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68618" class="refsect2"><a id="i1037380"></a>
<h3 class="refsect2"><a id="sthref10788"></a>IMPORT_SYSTEM_STATS Procedure</h3>
<p>This procedure retrieves system statistics from the user statistics table, identified by <code dir="ltr">stattab</code>, and stores the statistics in the dictionary.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10789"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.IMPORT_SYSTEM_STATS (
   stattab       VARCHAR2, 
   statid        VARCHAR2 DEFAULT NULL,
   statown       VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10790"></a>Parameters</p>
<div id="ARPLS68619" class="tblformal">
<p class="titleintable"><a id="sthref10791"></a><a id="sthref10792"></a>Table 155-64 IMPORT_SYSTEM_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="IMPORT_SYSTEM_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t73">Parameter</th>
<th class="cellalignment4328" id="r1c2-t73">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t73" headers="r1c1-t73">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t73 r1c2-t73">
<p>Identifier of the user statistics table where the statistics will be retrieved</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t73" headers="r1c1-t73">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t73 r1c2-t73">
<p>Optional identifier associated with the statistics retrieved from the <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t73" headers="r1c1-t73">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t73 r1c2-t73">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10793"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent values in the user statistics table</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table; may need to be upgraded</p>
<p><code dir="ltr">ORA-20003</code>: Unable to import system statistics</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10794"></a>Usage Notes</p>
<p>To run this procedure, you need the <code dir="ltr">GATHER_SYSTEM_STATISTICS</code> role.</p>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68620" class="refsect2"><a id="BEIDGEFG"></a>
<h3 class="refsect2"><a id="sthref10795"></a>IMPORT_TABLE_PREFS Procedure</h3>
<p>This procedure is used to set the statistics preferences of the specified table in the specified schema.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10796"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.IMPORT_TABLE_PREFS (
    ownname    IN  VARCHAR2,
    tabname    IN  VARCHAR2,
    stattab    IN  VARCHAR2,
    statid     IN  VARCHAR2 DEFAULT NULL,
    statown    IN  VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10797"></a>Parameters</p>
<div id="ARPLS68621" class="tblformal">
<p class="titleintable"><a id="sthref10798"></a><a id="sthref10799"></a>Table 155-65 IMPORT_TABLE_PREFS Procedure Parameters</p>
<table class="cellalignment4330" title="IMPORT_TABLE_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_TABLE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t74">Parameter</th>
<th class="cellalignment4328" id="r1c2-t74">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t74" headers="r1c1-t74">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t74 r1c2-t74">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t74" headers="r1c1-t74">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t74 r1c2-t74">
<p>Table name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t74" headers="r1c1-t74">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t74 r1c2-t74">
<p>Statistics table name from where to import the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t74" headers="r1c1-t74">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t74 r1c2-t74">
<p>(Optional) Identifier to associate with these statistics within stattab</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t74" headers="r1c1-t74">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t74 r1c2-t74">
<p>Schema containing <code dir="ltr">stattab</code> (if other than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10800"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10801"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to connect as owner of the table, or have the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege.</p>
</li>
<li>
<p>All arguments are of type <code dir="ltr">VARCHAR2</code> and values are enclosed in quotes.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10802"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.IMPORT_TABLE_PREFS(&#39;SH&#39;, &#39;SALES&#39;, &#39;STAT&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68622" class="refsect2"><a id="i1037419"></a>
<h3 class="refsect2"><a id="sthref10803"></a>IMPORT_TABLE_STATS Procedure</h3>
<p>This procedure retrieves statistics for a particular table from the user statistics table identified by <code dir="ltr">stattab</code> and stores them in the dictionary. Cascade results in all index statistics associated with the specified table being imported as well.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10804"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.IMPORT_TABLE_STATS (
   ownname         VARCHAR2, 
   tabname         VARCHAR2,
   partname        VARCHAR2 DEFAULT NULL,
   stattab         VARCHAR2, 
   statid          VARCHAR2 DEFAULT NULL,
   cascade         BOOLEAN  DEFAULT TRUE,
   statown         VARCHAR2 DEFAULT NULL,
   no_invalidate   BOOLEAN DEFAULT to_no_invalidate_type(
                                    get_param(&#39;NO_INVALIDATE&#39;)),
   force           BOOLEAN DEFAULT FALSE,
   stat_category   VARCHAR2 DEFAULT DEFAULT_STAT_CATEGORY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10805"></a>Parameters</p>
<div id="ARPLS68623" class="tblformal">
<p class="titleintable"><a id="sthref10806"></a><a id="sthref10807"></a>Table 155-66 IMPORT_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="IMPORT_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t75">Parameter</th>
<th class="cellalignment4328" id="r1c2-t75">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t75" headers="r1c1-t75">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t75 r1c2-t75">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t75" headers="r1c1-t75">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t75 r1c2-t75">
<p>Name of the table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t75" headers="r1c1-t75">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t75 r1c2-t75">
<p>Name of the table partition. If the table is partitioned and if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then global and partition table statistics are imported.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t75" headers="r1c1-t75">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t75 r1c2-t75">
<p>User statistics table identifier describing from where to retrieve the statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t75" headers="r1c1-t75">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t75 r1c2-t75">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t75" headers="r1c1-t75">
<p><code dir="ltr">cascade</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t75 r1c2-t75">
<p>If true, column and index statistics for this table are also imported</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t75" headers="r1c1-t75">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t75 r1c2-t75">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t75" headers="r1c1-t75">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t75 r1c2-t75">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t75" headers="r1c1-t75">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t75 r1c2-t75">
<p>Imports statistics even if table statistics are locked</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t75" headers="r1c1-t75">
<p><code dir="ltr">stat_category</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t75 r1c2-t75">
<p>Specifies what statistics to import, accepting multiple values separated by a comma. Values supported:</p>
<ul>
<li>
<p><code dir="ltr">OBJECT_STATS</code> - table statistics, column statistics and index statistics (Default)</p>
</li>
<li>
<p><code dir="ltr">SYNOPSES</code> - information to support incremental statistics</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10808"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent values in the user statistics table</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10809"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68624" class="refsect2"><a id="BABFJDFA"></a>
<h3 class="refsect2"><a id="sthref10810"></a>LOCK_PARTITION_STATS Procedure</h3>
<p>This procedure enables the user to lock statistics for a partition.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10811"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.LOCK_PARTITION_STATS (
    ownname    VARCHAR2,
    tabname    VARCHAR2,
    partname   VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10812"></a>Parameters</p>
<div id="ARPLS68625" class="tblformal">
<p class="titleintable"><a id="sthref10813"></a><a id="sthref10814"></a>Table 155-67 LOCK_PARTITION_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="LOCK_PARTITION_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.LOCK_PARTITION_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t76">Parameter</th>
<th class="cellalignment4328" id="r1c2-t76">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t76" headers="r1c1-t76">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t76 r1c2-t76">
<p>Name of the schema to lock</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t76" headers="r1c1-t76">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t76 r1c2-t76">
<p>Name of the table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t76" headers="r1c1-t76">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t76 r1c2-t76">
<p>[Sub]Partition name</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10815"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68626" class="refsect2"><a id="i1043184"></a>
<h3 class="refsect2"><a id="sthref10816"></a>LOCK_SCHEMA_STATS Procedure</h3>
<p>This procedure locks the statistics of all tables of a schema.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10817"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.LOCK_SCHEMA_STATS (
   ownname    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10818"></a>Parameters</p>
<div id="ARPLS68627" class="tblformal">
<p class="titleintable"><a id="sthref10819"></a><a id="sthref10820"></a>Table 155-68 LOCK_SCHEMA_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="LOCK_SCHEMA_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.LOCK_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t77">Parameter</th>
<th class="cellalignment4328" id="r1c2-t77">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t77" headers="r1c1-t77">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t77 r1c2-t77">
<p>Name of the schema to lock</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10821"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</li>
<li>
<p>When statistics on a table are locked, all the statistics depending on the table, including table statistics, column statistics, histograms and statistics on all dependent indexes, are considered to be locked.</p>
</li>
<li>
<p>The <code dir="ltr">SET_*,</code> <code dir="ltr">DELETE_*,</code> <code dir="ltr">IMPORT_*,</code> <code dir="ltr">GATHER_*</code> procedures that modify statistics in the dictionary of an individual table, index or column will raise an error if statistics of the object is locked.</p>
</li>
<li>
<p>Procedures that operates on multiple objects (such as <code dir="ltr">GATHER_SCHEMA_STATS</code>) will skip modifying the statistics of an object if it is locked. Many procedures have force argument to override the lock.</p>
</li>
<li>
<p>This procedure either freezes the current set of the statistics or keeps the statistics empty (uncollected) to use dynamic statistics.</p>
</li>
<li>
<p>The locked or unlocked state is not exported along with the table statistics when using <code dir="ltr">EXPORT_*_STATS</code> procedures.</p>
</li>
<li>
<p>Neither the <a href="#i1043314">UNLOCK_SCHEMA_STATS Procedure</a> nor the <a href="#i1040393">UNLOCK_TABLE_STATS Procedure</a> is designed to unlock statistics of corresponding partitions. When you invoke the <a href="#i1043993">LOCK_TABLE_STATS Procedure</a>, it sets the statistics lock bit at the table level. In that case, you cannot gather statistics on dependent objects such as partitions and indexes. By the same token, if table statistics are locked, the dependents are locked and you do not need to explicitly invoke the <a href="#BABFJDFA">LOCK_PARTITION_STATS Procedure</a>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68628" class="refsect2"><a id="i1043993"></a>
<h3 class="refsect2"><a id="sthref10822"></a>LOCK_TABLE_STATS Procedure</h3>
<p>This procedure locks the statistics on the table.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10823"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.LOCK_TABLE_STATS (
   ownname    VARCHAR2,
   tabname    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10824"></a>Parameters</p>
<div id="ARPLS68629" class="tblformal">
<p class="titleintable"><a id="sthref10825"></a><a id="sthref10826"></a>Table 155-69 LOCK_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="LOCK_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.LOCK_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t78">Parameter</th>
<th class="cellalignment4328" id="r1c2-t78">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t78" headers="r1c1-t78">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t78 r1c2-t78">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t78" headers="r1c1-t78">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t78 r1c2-t78">
<p>Name of the table</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10827"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</li>
<li>
<p>When statistics on a table are locked, all the statistics depending on the table, including table statistics, column statistics, histograms and statistics on all dependent indexes, are considered to be locked.</p>
</li>
<li>
<p>The <code dir="ltr">SET_*,</code> <code dir="ltr">DELETE_*,</code> <code dir="ltr">IMPORT_*,</code> <code dir="ltr">GATHER_*</code> procedures that modify statistics in the dictionary of an individual table, index or column will raise an error if statistics of the object is locked.</p>
</li>
<li>
<p>Procedures that operates on multiple objects (such as <code dir="ltr">GATHER_SCHEMA_STATS</code>) will skip modifying the statistics of an object if it is locked. Many procedures have force argument to override the lock.</p>
</li>
<li>
<p>This procedure either freezes the current set of the statistics or keeps the statistics empty (uncollected) to use dynamic statistics.</p>
</li>
<li>
<p>The locked or unlocked state is not exported along with the table statistics when using <code dir="ltr">EXPORT_*_STATS</code> procedures.</p>
</li>
<li>
<p>Neither the <a href="#i1043314">UNLOCK_SCHEMA_STATS Procedure</a> nor the <a href="#i1040393">UNLOCK_TABLE_STATS Procedure</a> is designed to unlock statistics of corresponding partitions. When you invoke the <a href="#i1043993">LOCK_TABLE_STATS Procedure</a>, it sets the statistics lock bit at the table level. In that case, you cannot gather statistics on dependent objects such as partitions and indexes. By the same token, if table statistics are locked, the dependents are locked and you do not need to explicitly invoke the <a href="#BABFJDFA">LOCK_PARTITION_STATS Procedure</a>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73133" class="refsect2"><a id="CHDEJICB"></a>
<h3 class="refsect2"><a id="sthref10828"></a>MERGE_COL_USAGE Procedure</h3>
<p>This procedure merges column usage information from a source database by means of a <code dir="ltr">dblink</code> into the local database. If column usage information already exists for a given table or column <code dir="ltr">MERGE_COL_USAGE</code> will combine both the local and the remote information.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10829"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.MERGE_COL_USAGE (
   dblink    IN    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10830"></a>Parameters</p>
<div id="ARPLS73134" class="tblformal">
<p class="titleintable"><a id="sthref10831"></a><a id="sthref10832"></a>Table 155-70 MERGE_COL_USAGE Procedure Parameters</p>
<table class="cellalignment4330" title="MERGE_COL_USAGE Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.MERGE_COL_USAGE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t79">Parameter</th>
<th class="cellalignment4328" id="r1c2-t79">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t79" headers="r1c1-t79">
<p><code dir="ltr">dblink</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t79 r1c2-t79">
<p>Name of <code dir="ltr">dblink</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10833"></a>Usage Notes</p>
<p>User must be <code dir="ltr">SYS</code> to execute this procedure. addition the user specified during the creation of the <code dir="ltr">dblink</code> is expected to have privileges to select from tables in the <code dir="ltr">SYS</code> schema.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10834"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Parameter <code dir="ltr">dblink</code> cannot be <code dir="ltr">NULL</code></p>
<p><code dir="ltr">ORA-20002</code>: Unable to create a <code dir="ltr">TEMP</code> table</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68630" class="refsect2"><a id="i1035422"></a>
<h3 class="refsect2"><a id="sthref10835"></a><a id="sthref10836"></a>PREPARE_COLUMN_VALUES Procedures</h3>
<p>These procedures convert user-specified minimum, maximum, and histogram endpoint actual values into Oracle&#39;s internal representation for future storage using <code dir="ltr">SET_COLUMN_STATS</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10837"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.PREPARE_COLUMN_VALUES (
   srec     IN OUT StatRec, 
   charvals        CHARARRAY);

DBMS_STATS.PREPARE_COLUMN_VALUES (
   srec      IN OUT StatRec, 
   datevals         DATEARRAY);

DBMS_STATS.PREPARE_COLUMN_VALUES ( 
   srec     IN OUT StatRec, 
   dblvals         DBLARRAY);

DBMS_STATS.PREPARE_COLUMN_VALUES ( 
   srec     IN OUT StatRec, 
   fltvals         FLTARRAY);

DBMS_STATS.PREPARE_COLUMN_VALUES (
   srec     IN OUT StatRec, 
   numvals         NUMARRAY);

DBMS_STATS.PREPARE_COLUMN_VALUES ( 
   srec     IN OUT StatRec, 
   rawvals         RAWARRAY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10838"></a>Parameters</p>
<div id="ARPLS68631" class="tblformal">
<p class="titleintable"><a id="sthref10839"></a><a id="sthref10840"></a>Table 155-71 PREPARE_COLUMN_VALUES Procedure Parameters</p>
<table class="cellalignment4330" title="PREPARE_COLUMN_VALUES Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.PREPARE_COLUMN_VALUES subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t80">Parameter</th>
<th class="cellalignment4328" id="r1c2-t80">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t80" headers="r1c1-t80">
<p><code dir="ltr">srec.epc</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t80 r1c2-t80">
<p>Number of values specified in <code dir="ltr">charvals</code>, <code dir="ltr">datevals</code>, <code dir="ltr">dblvals</code>, <code dir="ltr">fltvals</code>, <code dir="ltr">numvals</code>, or <code dir="ltr">rawvals</code>. This value must be between 2 and 2050, inclusive, and it should be set to <code dir="ltr">2</code> for procedures which do not allow histogram information (<code dir="ltr">nvarchar</code> and <code dir="ltr">rowid</code>).</p>
<p>The first corresponding array entry should hold the minimum value for the column, and the last entry should hold the maximum. If there are more than two entries, then all the others hold the remaining height-balanced or frequency histogram endpoint values (with in-between values ordered from next-smallest to next-largest). This value may be adjusted to account for compression, so the returned value should be left as is for a call to <code dir="ltr">SET_COLUMN_STATS</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t80" headers="r1c1-t80">
<p><code dir="ltr">srec.bkvals</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t80 r1c2-t80">
<p>If you want a frequency or hybrid histogram, this array contains the number of occurrences of each distinct value specified in <code dir="ltr">charvals</code>, <code dir="ltr">datevals</code>, <code dir="ltr">dblvals</code>, <code dir="ltr">fltvals</code>, <code dir="ltr">numvals</code>, or <code dir="ltr">rawvals</code>. Otherwise, it is merely an output parameter, and it must be set to <code dir="ltr">NULL</code> when this procedure is called.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t80" headers="r1c1-t80">
<p><code dir="ltr">srec.rpcnts</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t80 r1c2-t80">
<p>If you want a hybrid histogram, this array contains the total frequency of values that are less than or equal to each distinct value specified in <code dir="ltr">charvals</code>, <code dir="ltr">datevals</code>, <code dir="ltr">numvals</code>, or <code dir="ltr">rawvals</code>. Otherwise, it is merely an output argument and must be set to <code dir="ltr">NULL</code> when this procedure is called.</p>
<p>As an example, for a given array <code dir="ltr">numvals</code> with <code dir="ltr">numvals(i)=4, rpcnts(i)=13</code> means that there are 13 rows in the column which are less than or equal to 4.</p>
<p>Note:</p>
<ul>
<li>
<p>Whenever <code dir="ltr">srec.rpcnts</code> is populated, <code dir="ltr">srec.bkvals</code> must be populated as described above.</p>
</li>
<li>
<p>Whenever <code dir="ltr">bkvals</code> and/or <code dir="ltr">rpcnts</code> are populated, there should not be any duplicates in <code dir="ltr">charvals</code>, <code dir="ltr">datevals</code>, <code dir="ltr">numvals</code>, or <code dir="ltr">rawvals</code>.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p>Datatype-specific input parameters (use one) are shown in <a href="#CIHHIFHE">Table 155-72</a>.</p>
<div id="ARPLS68632" class="tblformal">
<p class="titleintable"><a id="sthref10841"></a><a id="CIHHIFHE"></a>Table 155-72 Datatype-Specific Input Parameters</p>
<table class="cellalignment4330" title="Datatype-Specific Input Parameters" summary="This table describes Datatype-Specific Input Parameters used by the PREPARE_COLUMN_VALUES subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t81">Type</th>
<th class="cellalignment4328" id="r1c2-t81">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t81" headers="r1c1-t81">
<p><code dir="ltr">charvals</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t81 r1c2-t81">
<p>The array of values when the column type is character-based. Up to the first 64 bytes of each string should be provided. Arrays must have between 2 and 2050 entries, inclusive. If the datatype is fixed <code dir="ltr">CHAR</code>, the strings must be space-padded to 15 characters for correct normalization.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t81" headers="r1c1-t81">
<p><code dir="ltr">datevals</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t81 r1c2-t81">
<p>Array of values when the column type is date-based</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t81" headers="r1c1-t81">
<p><code dir="ltr">dblvals</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t81 r1c2-t81">
<p>Array of values when the column type is double-based</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t81" headers="r1c1-t81">
<p><code dir="ltr">fltvals</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t81 r1c2-t81">
<p>Array of values when the column type is float-based</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t81" headers="r1c1-t81">
<p><code dir="ltr">numvals</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t81 r1c2-t81">
<p>Array of values when the column type is numeric-based</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t81" headers="r1c1-t81">
<p><code dir="ltr">rawvals</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t81 r1c2-t81">
<p>Array of values when the column type is <code dir="ltr">RAW</code>. Up to the first 64 bytes of each value should be provided.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t81" headers="r1c1-t81">
<p><code dir="ltr">nvmin, nvmax</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t81 r1c2-t81">
<p>Minimum and maximum values when the column type is national character set based. No histogram information can be provided for a column of this type. If the datatype is fixed <code dir="ltr">CHAR</code>, the strings must be space-padded to 15 characters for correct normalization.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t81" headers="r1c1-t81">
<p><code dir="ltr">rwmin, rwmax</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t81 r1c2-t81">
<p>Minimum and maximum values when the column type is <code dir="ltr">rowid</code>. No histogram information is provided for a column of this type.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10842"></a>Output Parameters</p>
<div id="ARPLS68633" class="tblformal">
<p class="titleintable"><a id="sthref10843"></a><a id="sthref10844"></a>Table 155-73 PREPARE_COLUMN_VALUES Procedure Output Parameters</p>
<table class="cellalignment4330" title="PREPARE_COLUMN_VALUES Procedure Output Parameters" summary="This table describes Output Parameters used by the PREPARE_COLUMN_VALUES subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t82">Parameter</th>
<th class="cellalignment4328" id="r1c2-t82">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t82" headers="r1c1-t82">
<p><code dir="ltr">srec.minval</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t82 r1c2-t82">
<p>Internal representation of the minimum suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t82" headers="r1c1-t82">
<p><code dir="ltr">srec.maxval</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t82 r1c2-t82">
<p>Internal representation of the maximum suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t82" headers="r1c1-t82">
<p><code dir="ltr">srec.bkvals</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t82 r1c2-t82">
<p>Array suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t82" headers="r1c1-t82">
<p><code dir="ltr">srec.novals</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t82 r1c2-t82">
<p>Array suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t82" headers="r1c1-t82">
<p><code dir="ltr">srec.eavals</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t82 r1c2-t82">
<p>Array suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t82" headers="r1c1-t82">
<p><code dir="ltr">srec.rpcnts</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t82 r1c2-t82">
<p>Array suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10845"></a>Exceptions</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10846"></a>Usage Notes</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68634" class="refsect2"><a id="i1038038"></a>
<h3 class="refsect2"><a id="sthref10847"></a>PREPARE_COLUMN_VALUES_NVARCHAR Procedure</h3>
<p>This procedure converts user-specified minimum, maximum, and histogram endpoint actual values into Oracle&#39;s internal representation for future storage using the <a href="#CHDHGCED">SET_COLUMN_STATS Procedures</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10848"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.PREPARE_COLUMN_VALUES_NVARCHAR (
   srec     IN OUT StatRec, 
   nvmin           NVARCHAR2, 
   nvmax           NVARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10849"></a>Parameters</p>
<div id="ARPLS68635" class="tblformal">
<p class="titleintable"><a id="sthref10850"></a><a id="sthref10851"></a>Table 155-74 PREPARE_COLUMN_VALUES_NVARCHAR Procedure Parameters</p>
<table class="cellalignment4330" title="PREPARE_COLUMN_VALUES_NVARCHAR Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.PREPARE_COLUMN_VALUES_NVARCHAR2 subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t83">Parameter</th>
<th class="cellalignment4328" id="r1c2-t83">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t83" headers="r1c1-t83">
<p><code dir="ltr">srec.epc</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t83 r1c2-t83">
<p>Number of values specified in <code dir="ltr">charvals</code>, <code dir="ltr">datevals</code>, <code dir="ltr">dblvals</code>, <code dir="ltr">fltvals</code>, <code dir="ltr">numvals</code>, or <code dir="ltr">rawvals</code>. This value must be between 2 and 2050, inclusive, and it should be set to <code dir="ltr">2</code> for procedures which do not allow histogram information (<code dir="ltr">nvarchar</code> and <code dir="ltr">rowid</code>).</p>
<p>The first corresponding array entry should hold the minimum value for the column, and the last entry should hold the maximum. If there are more than two entries, then all the others hold the remaining height-balanced or frequency histogram endpoint values (with in-between values ordered from next-smallest to next-largest). This value may be adjusted to account for compression, so the returned value should be left as is for a call to <code dir="ltr">SET_COLUMN_STATS</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t83" headers="r1c1-t83">
<p><code dir="ltr">srec.bkvals</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t83 r1c2-t83">
<p>If you want a frequency or hybrid histogram, then this array contains the number of occurrences of each distinct value specified in <code dir="ltr">charvals</code>, <code dir="ltr">datevals</code>, <code dir="ltr">dblvals</code>, <code dir="ltr">fltvals</code>, <code dir="ltr">numvals</code>, or <code dir="ltr">rawvals</code>. Otherwise, it is merely an output parameter, and it must be set to <code dir="ltr">NULL</code> when this procedure is called.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t83" headers="r1c1-t83">
<p><code dir="ltr">srec.rpcnts</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t83 r1c2-t83">
<p>If you want a hybrid histogram, this array contains the total frequency of values that are less than or equal to each distinct value specified in <code dir="ltr">charvals</code>, <code dir="ltr">datevals</code>, <code dir="ltr">numvals</code>, or <code dir="ltr">rawvals</code>. Otherwise, it is merely an output argument and must be set to <code dir="ltr">NULL</code> when this procedure is called.</p>
<p>As an example, for a given array <code dir="ltr">numvals</code> with <code dir="ltr">numvals(i)=4, rpcnts(i)=13</code> means that there are 13 rows in the column which are less than or equal to 4.</p>
<p>Note:</p>
<ul>
<li>
<p>Whenever <code dir="ltr">srec.rpcnts</code> is populated, <code dir="ltr">srec.bkvals</code> must be populated as described above.</p>
</li>
<li>
<p>Whenever <code dir="ltr">bkvals</code> and/or <code dir="ltr">rpcnts</code> are populated, there should not be any duplicates in <code dir="ltr">charvals</code>, <code dir="ltr">datevals</code>, <code dir="ltr">numvals</code>, or <code dir="ltr">rawvals</code>.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p>Datatype-specific input parameters (use one) are shown in <a href="#CIHHIFHE">Table 155-72</a>.</p>
<div id="ARPLS68636" class="tblformal">
<p class="titleintable"><a id="sthref10852"></a><a id="sthref10853"></a>Table 155-75 PREPARE_COLUMN_VALUES_NVARCHAR Datatype-Specific Input Parameters</p>
<table class="cellalignment4330" title="PREPARE_COLUMN_VALUES_NVARCHAR Datatype-Specific Input Parameters" summary="This table describes Datatype-Specific Input Parameters used by the PREPARE_COLUMN_VALUES_NVARCHAR2 subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t84">Type</th>
<th class="cellalignment4328" id="r1c2-t84">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t84" headers="r1c1-t84">
<p><code dir="ltr">nvmin, nvmax</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t84 r1c2-t84">
<p>The minimum and maximum values when the column type is national character set based. No histogram information can be provided for a column of this type. If the datatype is fixed <code dir="ltr">CHAR</code>, the strings must be space-padded to 15 characters for correct normalization.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10854"></a>Output Parameters</p>
<div id="ARPLS68637" class="tblformal">
<p class="titleintable"><a id="sthref10855"></a><a id="sthref10856"></a>Table 155-76 PREPARE_COLUMN_VALUES_NVARCHAR Procedure Output Parameters</p>
<table class="cellalignment4330" title="PREPARE_COLUMN_VALUES_NVARCHAR Procedure Output Parameters" summary="This table describes Output Parameters used by the PREPARE_COLUMN_VALUES_NVARCHAR2 subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t85">Parameter</th>
<th class="cellalignment4328" id="r1c2-t85">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t85" headers="r1c1-t85">
<p><code dir="ltr">srec.minval</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t85 r1c2-t85">
<p>Internal representation of the minimum suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t85" headers="r1c1-t85">
<p><code dir="ltr">srec.maxval</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t85 r1c2-t85">
<p>Internal representation of the maximum suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t85" headers="r1c1-t85">
<p><code dir="ltr">srec.bkvals</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t85 r1c2-t85">
<p>Array suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t85" headers="r1c1-t85">
<p><code dir="ltr">srec.novals</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t85 r1c2-t85">
<p>Array suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t85" headers="r1c1-t85">
<p><code dir="ltr">srec.eavals</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t85 r1c2-t85">
<p>Array suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t85" headers="r1c1-t85">
<p><code dir="ltr">srec.rpcnts</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t85 r1c2-t85">
<p>Array suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10857"></a>Exceptions</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10858"></a>Usage Notes</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68638" class="refsect2"><a id="i1038039"></a>
<h3 class="refsect2"><a id="sthref10859"></a>PREPARE_COLUMN_VALUES_ROWID Procedure</h3>
<p>This procedure converts user-specified minimum, maximum, and histogram endpoint datatype-specific values into Oracle&#39;s internal representation for future storage using <code dir="ltr">SET_COLUMN_STATS</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10860"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.PREPARE_COLUMN_VALUES_ROWID (
   srec  IN OUT StatRec, 
   rwmin        ROWID, 
   rwmax        ROWID);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10861"></a>Pragmas</p>
<pre dir="ltr">pragma restrict_references(prepare_column_values_rowid, WNDS, RNDS, WNPS, RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10862"></a>Parameters</p>
<div id="ARPLS68639" class="tblformal">
<p class="titleintable"><a id="sthref10863"></a><a id="sthref10864"></a>Table 155-77 PREPARE_COLUMN_VALUES_ROWID Procedure Parameters</p>
<table class="cellalignment4330" title="PREPARE_COLUMN_VALUES_ROWID Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.PREPARE_COLUMN_VALUES_ROWID subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t86">Parameter</th>
<th class="cellalignment4328" id="r1c2-t86">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t86" headers="r1c1-t86">
<p>srec</p>
</td>
<td class="cellalignment4329" headers="r2c1-t86 r1c2-t86">
<p>Values (<code dir="ltr">IN</code>):</p>
<ul>
<li>
<p><code dir="ltr">epc</code></p>
</li>
<li>
<p><code dir="ltr">bkvals</code></p>
</li>
<li>
<p><code dir="ltr">rpcnts</code></p>
</li>
</ul>
<p>Values (<code dir="ltr">OUT</code>):</p>
<ul>
<li>
<p><code dir="ltr">minval</code></p>
</li>
<li>
<p><code dir="ltr">maxval</code></p>
</li>
<li>
<p><code dir="ltr">bkvals</code></p>
</li>
<li>
<p><code dir="ltr">novals</code></p>
</li>
<li>
<p><code dir="ltr">eavals</code></p>
</li>
<li>
<p><code dir="ltr">rpcnts</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t86" headers="r1c1-t86">&nbsp;</td>
<td class="cellalignment4329" headers="r3c1-t86 r1c2-t86">
<p><code dir="ltr">epc</code> (<code dir="ltr">IN</code>) -</p>
<p>Number of values specified in <code dir="ltr">charvals</code>, <code dir="ltr">datevals</code>, <code dir="ltr">dblvals</code>, <code dir="ltr">fltvals</code>, <code dir="ltr">numvals</code>, or <code dir="ltr">rawvals</code>. This value must be between 2 and 2050, inclusive, and it should be set to <code dir="ltr">2</code> for procedures which do not allow histogram information (<code dir="ltr">nvarchar</code> and <code dir="ltr">rowid</code>).</p>
<p>The first corresponding array entry should hold the minimum value for the column, and the last entry should hold the maximum. If there are more than two entries, then all the others hold the remaining height-balanced or frequency histogram endpoint values (with in-between values ordered from next-smallest to next-largest). This value may be adjusted to account for compression, so the returned value should be left as is for a call to <code dir="ltr">SET_COLUMN_STATS</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t86" headers="r1c1-t86">&nbsp;</td>
<td class="cellalignment4329" headers="r4c1-t86 r1c2-t86">
<p><code dir="ltr">bkvals</code> (<code dir="ltr">IN</code>) -</p>
<p>If you want a frequency or hybrid histogram, this array contains the number of occurrences of each distinct value specified in <code dir="ltr">charvals</code>, <code dir="ltr">datevals</code>, <code dir="ltr">dblvals</code>, <code dir="ltr">fltvals</code>, <code dir="ltr">numvals</code>, or <code dir="ltr">rawvals</code>. Otherwise, it is merely an output parameter, and it must be set to <code dir="ltr">NULL</code> when this procedure is called.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t86" headers="r1c1-t86">&nbsp;</td>
<td class="cellalignment4329" headers="r5c1-t86 r1c2-t86">
<p><code dir="ltr">rpcnts</code> (<code dir="ltr">IN</code>) -</p>
<p>If you want a hybrid histogram, this array contains the total frequency of values that are less than or equal to each distinct value specified in <code dir="ltr">charvals</code>, <code dir="ltr">datevals</code>, <code dir="ltr">numvals</code>, or <code dir="ltr">rawvals</code>. Otherwise, it is merely an output argument and must be set to <code dir="ltr">NULL</code> when this procedure is called.</p>
<p>As an example, for a given array <code dir="ltr">numvals</code> with <code dir="ltr">numvals(i)=4, rpcnts(i)=13</code> means that there are 13 rows in the column which are less than or equal to 4.</p>
<p>Note:</p>
<ul>
<li>
<p>Whenever <code dir="ltr">srec.rpcnts</code> is populated, <code dir="ltr">srec.bkvals</code> must be populated as described above.</p>
</li>
<li>
<p>Whenever <code dir="ltr">bkvals</code> and/or <code dir="ltr">rpcnts</code> are populated, there should not be any duplicates in <code dir="ltr">charvals</code>, <code dir="ltr">datevals</code>, <code dir="ltr">numvals</code>, or <code dir="ltr">rawvals</code>.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t86" headers="r1c1-t86">&nbsp;</td>
<td class="cellalignment4329" headers="r6c1-t86 r1c2-t86">
<p><code dir="ltr">minval</code> (<code dir="ltr">OUT</code>) -</p>
<p>Internal representation of the minimum suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t86" headers="r1c1-t86">&nbsp;</td>
<td class="cellalignment4329" headers="r7c1-t86 r1c2-t86">
<p><code dir="ltr">maxval</code> (<code dir="ltr">OUT</code>) -</p>
<p>Internal representation of the maximum suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t86" headers="r1c1-t86">&nbsp;</td>
<td class="cellalignment4329" headers="r8c1-t86 r1c2-t86">
<p><code dir="ltr">bkvals</code> (<code dir="ltr">OUT</code>) -</p>
<p>Array suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t86" headers="r1c1-t86">&nbsp;</td>
<td class="cellalignment4329" headers="r9c1-t86 r1c2-t86">
<p><code dir="ltr">novals</code> (<code dir="ltr">OUT</code>) -</p>
<p>Array suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t86" headers="r1c1-t86">&nbsp;</td>
<td class="cellalignment4329" headers="r10c1-t86 r1c2-t86">
<p><code dir="ltr">eavals</code> (<code dir="ltr">OUT</code>) -</p>
<p>Array suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t86" headers="r1c1-t86">&nbsp;</td>
<td class="cellalignment4329" headers="r11c1-t86 r1c2-t86">
<p><code dir="ltr">rpcnts</code> (<code dir="ltr">OUT</code>) -</p>
<p>Array suitable for use in a call to <code dir="ltr">SET_COLUMN_STATS</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p>Datatype-specific input parameters (use one) are shown in <a href="#CIHHIFHE">Table 155-72</a>.</p>
<div id="ARPLS68640" class="tblformal">
<p class="titleintable"><a id="sthref10865"></a><a id="sthref10866"></a>Table 155-78 Datatype-Specific Input Parameters</p>
<table class="cellalignment4330" title="Datatype-Specific Input Parameters" summary="This table describes Datatype-Specific Input Parameters used by the PREPARE_COLUMN_VALUES_ROWID subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t87">Type</th>
<th class="cellalignment4328" id="r1c2-t87">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t87" headers="r1c1-t87">
<p><code dir="ltr">rwmin, rwmax</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t87 r1c2-t87">
<p>Minimum and maximum values when the column type is <code dir="ltr">rowid</code>. No histogram information is provided for a column of this type.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10867"></a>Usage Notes</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68642" class="refsect2"><a id="BEIDCHEJ"></a>
<h3 class="refsect2"><a id="sthref10868"></a>PUBLISH_PENDING_STATS Procedure</h3>
<p>This procedure is used to publish the statistics gathered and stored as pending.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10869"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.PUBLISH_PENDING_STATS (
    ownname         IN  VARCHAR2 DEFAULT USER,
    tabname         IN  VARCHAR2,
    no_invalidate   BOOLEAN DEFAULT 
       to_no_invalidate_type(get_param(&#39;NO_INVALIDATE&#39;)),
    force      IN  BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10870"></a>Parameters</p>
<div id="ARPLS68643" class="tblformal">
<p class="titleintable"><a id="sthref10871"></a><a id="sthref10872"></a>Table 155-79 PUBLISH_PENDING_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="PUBLISH_PENDING_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_DATABASE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t88">Parameter</th>
<th class="cellalignment4328" id="r1c2-t88">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t88" headers="r1c1-t88">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t88 r1c2-t88">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t88" headers="r1c1-t88">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t88 r1c2-t88">
<p>Table name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t88" headers="r1c1-t88">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t88 r1c2-t88">
<p>Do not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code> to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t88" headers="r1c1-t88">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t88 r1c2-t88">
<p>If <code dir="ltr">TRUE</code>, will override the lock</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10873"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10874"></a>Usage Notes</p>
<ul>
<li>
<p>If the parameter <code dir="ltr">tabname</code> is <code dir="ltr">NULL</code> then publish applies to all tables of the specified schema.</p>
</li>
<li>
<p>The default owner/schema is the user who runs the procedure.</p>
</li>
<li>
<p>To run this procedure, you need to have the same privilege for gathering statistics on the tables that will be touched by this procedure.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10875"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.PUBLISH_PENDING_STATS (&#39;SH&#39;, null);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68644" class="refsect2"><a id="i1047896"></a>
<h3 class="refsect2"><a id="sthref10876"></a>PURGE_STATS Procedure</h3>
<p>This procedure purges old versions of statistics saved in the dictionary. To run this procedure, you must have the <code dir="ltr">SYSDBA</code> or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10877"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.PURGE_STATS( 
    before_timestamp       TIMESTAMP WITH TIME ZONE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10878"></a>Parameters</p>
<div id="ARPLS68645" class="tblformal">
<p class="titleintable"><a id="sthref10879"></a><a id="sthref10880"></a>Table 155-80 PURGE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="PURGE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.PURGE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t89">Parameter</th>
<th class="cellalignment4328" id="r1c2-t89">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t89" headers="r1c1-t89">
<p><code dir="ltr">before_timestamp</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t89 r1c2-t89">
<p>Versions of statistics saved before this timestamp are purged. If <code dir="ltr">NULL</code>, it uses the purging policy used by automatic purge. The automatic purge deletes all history older than the older of (current time - statistics history retention) and (time of recent analyze in the system - 1). The statistics history retention value can be changed using <code dir="ltr">ALTER_STATS_HISTORY_RETENTION</code> Procedure.The default is 31 days.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10881"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10882"></a>Usage Notes</p>
<p>To invoke this procedure you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege and the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74434" class="refsect2"><a id="BABDGICG"></a>
<h3 class="refsect2"><a id="sthref10883"></a>REMAP_STAT_TABLE Procedure</h3>
<p>This procedure remaps the names of objects in the user statistics table. It allows you to import the statistics to objects with same definition but with different names.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10884"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.REMAP_STAT_TABLE (
   ownname    IN    VARCHAR2,
   stattab    IN    VARCHAR2, 
   src_own    IN    VARCHAR2, 
   src_tab    IN    VARCHAR2, 
   tgt_own    IN    VARCHAR2, 
   tgt_tab    IN    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10885"></a>Parameters</p>
<div id="ARPLS74435" class="tblformal">
<p class="titleintable"><a id="sthref10886"></a><a id="sthref10887"></a>Table 155-81 REMAP_STAT_TABLE Procedure Parameters</p>
<table class="cellalignment4330" title="REMAP_STAT_TABLE Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.REMAP_STAT_TABLE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t90">Parameter</th>
<th class="cellalignment4328" id="r1c2-t90">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t90" headers="r1c1-t90">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t90 r1c2-t90">
<p>Owner of the statistics table. <code dir="ltr">NULL</code> means the current schema.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t90" headers="r1c1-t90">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t90 r1c2-t90">
<p>User statistics table identifier</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t90" headers="r1c1-t90">
<p><code dir="ltr">src_own</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t90 r1c2-t90">
<p>Owner of the table to be renamed. This argument cannot be <code dir="ltr">NULL</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t90" headers="r1c1-t90">
<p><code dir="ltr">src_tab</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t90 r1c2-t90">
<p>Name of the table to be renamed. If <code dir="ltr">NULL</code>, all tables are owned by <code dir="ltr">src_own</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t90" headers="r1c1-t90">
<p><code dir="ltr">tgt_own</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t90 r1c2-t90">
<p>New name of the owner of the table. The owner name is also updated for the dependent objects such as columns and indexes. Note that an index of <code dir="ltr">src_tab</code> not owned by <code dir="ltr">src_own</code> is not renamed.This argument cannot be <code dir="ltr">NULL</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t90" headers="r1c1-t90">
<p><code dir="ltr">tgt_tab</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t90 r1c2-t90">
<p>New name of the table. This argument is valid only if <code dir="ltr">src_tab</code> is not <code dir="ltr">NULL</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10888"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid input</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10889"></a>Examples</p>
<p>The following statement remaps all objects of <code dir="ltr">sh</code> to <code dir="ltr">shsave</code> in user statistics table <code dir="ltr">sh.ustat</code>:</p>
<pre dir="ltr">DBMS_STATS.REMAP_STAT_TABLE (&#39;sh&#39;, &#39;ustat&#39;, &#39;sh&#39;, NULL, &#39;shsave&#39;, NULL);
</pre>
<p>The following statement can be used to import statistics into objects of <code dir="ltr">shsave</code> once the preceding remap procedure is completed:</p>
<pre dir="ltr">DBMS_STATS.IMPORT_SCHEMA_STATS (&#39;shsave&#39;, &#39;ustat&#39;, statown =&gt; &#39;sh&#39;);
</pre>
<p>The following statement remaps <code dir="ltr">sh.customers</code> to <code dir="ltr">shsave.customers_sav</code>:</p>
<pre dir="ltr">DBMS_STATS.REMAP_STAT_TABLE (&#39;sh&#39;, &#39;ustat&#39;, &#39;sh&#39;, &#39;customers&#39;,&#39;shsave&#39;, &#39;customers_sav&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74617" class="refsect2"><a id="BABCDEBI"></a>
<h3 class="refsect2"><a id="sthref10890"></a>REPORT_COL_USAGE Function</h3>
<p>This function reports the recorded column (group) usage information.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10891"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.REPORT_COL_USAGE (
   ownname    IN    VARCHAR2,
   tabname    IN    VARCHAR2)
RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10892"></a>Parameters</p>
<div id="ARPLS74618" class="tblformal">
<p class="titleintable"><a id="sthref10893"></a><a id="sthref10894"></a>Table 155-82 REPORT_COL_USAGE Function Parameters</p>
<table class="cellalignment4330" title="REPORT_COL_USAGE Function Parameters" summary="This table describes the Parameters of DBMS_STATS.REPORT_COL_USAGE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t91">Parameter</th>
<th class="cellalignment4328" id="r1c2-t91">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t91" headers="r1c1-t91">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t91 r1c2-t91">
<p>Owner name. If <code dir="ltr">NULL</code> it reports column usage information for tables in all schemas in the database.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t91" headers="r1c1-t91">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t91 r1c2-t91">
<p>Table name. If <code dir="ltr">NULL</code> it reports column usage information for all tables of <code dir="ltr">ownname</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10895"></a>Usage Notes</p>
<p>To run this procedure, you need to have the <code dir="ltr">SYSDBA</code> administrative privilege or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privileges.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74436" class="refsect2"><a id="BABDABJG"></a>
<h3 class="refsect2"><a id="sthref10896"></a>REPORT_GATHER_AUTO_STATS Function</h3>
<p>This function runs the auto statistics gathering job in reporting mode. That is, statistics are not actually collected, but all the objects that will be affected when auto statistics gathering is invoked are reported.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10897"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.REPORT_GATHER_AUTO_STATS (
   detail_level      VARCHAR2  DEFAULT &#39;TYPICAL&#39;,
   format            VARCHAR2  DEFAULT &#39;TEXT&#39;)
 RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10898"></a>Parameters</p>
<div id="ARPLS74437" class="tblformal">
<p class="titleintable"><a id="sthref10899"></a><a id="sthref10900"></a>Table 155-83 REPORT_GATHER_AUTO_STATS Function Parameters</p>
<table class="cellalignment4330" title="REPORT_GATHER_AUTO_STATS Function Parameters" summary="This table describes the Parameters of DBMS_STATS.REPORT_GATHER_AUTO_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t92">Parameter</th>
<th class="cellalignment4328" id="r1c2-t92">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t92" headers="r1c1-t92">
<p><code dir="ltr">detail_level</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t92 r1c2-t92">
<p>Detail level for the content of the report</p>
<ul>
<li>
<p><code dir="ltr">BASIC</code>: The report includes</p>
<p>- operation ID</p>
<p>- operation name</p>
<p>- operation target object</p>
<p>- start time</p>
<p>- end time</p>
<p>- completion status (such as: succeeded, failed)</p>
</li>
<li>
<p><code dir="ltr">TYPICAL</code>: In addition to the information provided at level <code dir="ltr">BASIC</code>, the report includes individual target objects for which statistics are gathered in this operation. Specifically, with regard to operation related details:</p>
<p>- total number of target objects</p>
<p>- total number of successfully completed objects</p>
<p>- total number of failed objects</p>
<p>- total number of timed-out objects (applies to only auto statistics gathering)</p>
<p>With regard to target objects:</p>
<p>- owner and name of each target object</p>
<p>- target object type (such as: table, index)</p>
<p>- start time</p>
<p>- end time</p>
<p>- completion status</p>
</li>
<li>
<p><code dir="ltr">ALL</code>: In addition to the information provided at level <code dir="ltr">TYPICAL</code>, the report includes further information on each target object. Specifically, with regard to operation-related details:</p>
<p>- job name</p>
<p>- session ID</p>
<p>- parameter values</p>
<p>- error message if the operation failed</p>
<p>With regard to target objects:</p>
<p>- job name</p>
<p>- batching details</p>
<p>- estimated cost</p>
<p>- rank in the target list</p>
<p>- columns for which histograms were collected</p>
<p>- list of collected extended statistics (if any)</p>
<p>- reason for including the object in the target list</p>
<p>- additional error details if the task has failed.</p>
</li>
</ul>
<p>Note that several fields (such as job name, estimated task cost) in the report are populated only when an operation is executed concurrently (<code dir="ltr">CONCURRENT</code> preference is turned on).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t92" headers="r1c1-t92">
<p><code dir="ltr">format</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t92 r1c2-t92">
<p>Report format:</p>
<ul>
<li>
<p>XML</p>
</li>
<li>
<p>HTML</p>
</li>
<li>
<p>TEXT (Default)</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div id="ARPLS74990" class="refsect3"><a id="sthref10901"></a>
<h4 class="refsect3">Usage Notes</h4>
<p>Only user <code dir="ltr">SYS</code> can run the <code dir="ltr">REPORT_GATHER_AUTO_STATS</code> function.</p>
</div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74438" class="refsect2"><a id="BABBEHEC"></a>
<h3 class="refsect2"><a id="sthref10902"></a>REPORT_GATHER_DATABASE_STATS Functions</h3>
<p>This function runs the <a href="#i1036194">GATHER_DATABASE_STATS Procedures</a> in reporting mode. That is, statistics are not actually collected, but all the objects that will be affected when <code dir="ltr">GATHER_DATABASE_STATS</code> is invoked are reported. The input set of parameters are exactly the same as in <code dir="ltr">GATHER_DATABASE_STATS</code> with two extra parameters.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10903"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.REPORT_GATHER_DATABASE_STATS (
   estimate_percent     IN    NUMBER     DEFAULT to_estimate_percent_type (
                                           GET_PARAM(&#39;ESTIMATE_PERCENT&#39;)),
   block_sample         IN    BOOLEAN    DEFAULT FALSE,
   method_opt           IN    VARCHAR2   DEFAULT GET_PARAM(&#39;METHOD_OPT&#39;),
   degree               IN    NUMBER     DEFAULT TO_DEGREE_TYPE(
                                           GET_PARAM(&#39;DEGREE&#39;)), 
   granularity          IN    VARCHAR2   DEFAULT GET_PARAM(&#39;GRANULARITY&#39;), 
   cascade              IN    BOOLEAN    DEFAULT to_cascade_type (
                                           GET_PARAM(&#39;CASCADE&#39;)),
   stattab              IN    VARCHAR2   DEFAULT NULL, 
   statid               IN    VARCHAR2   DEFAULT NULL,
   options              IN    VARCHAR2   DEFAULT &#39;GATHER&#39;,
   objlist              OUT   ObjectTab,
   statown              IN    VARCHAR2   DEFAULT NULL,
   gather_sys           IN    BOOLEAN    DEFAULT TRUE,
   no_invalidate        IN    BOOLEAN    DEFAULT TO_NO_INVALIDATE_TYPE (
                                           GET_PARAM(&#39;NO_INVALIDATE&#39;)),
   obj_filter_list      IN    ObjectTab  DEFAULT NULL,
   detail_level         IN    VARCHAR2   DEFAULT &#39;TYPICAL&#39;,
   format               IN    VARCHAR2   DEFAULT &#39;TEXT&#39;) 
 RETURN CLOB;

DBMS_STATS.REPORT_GATHER_DATABASE_STATS (
   estimate_percent     IN    NUMBER     DEFAULT to_estimate_percent_type (
                                           GET_PARAM(&#39;ESTIMATE_PERCENT&#39;)),
   block_sample         IN    BOOLEAN    DEFAULT FALSE,
   method_opt           IN    VARCHAR2   DEFAULT GET_PARAM(&#39;METHOD_OPT&#39;),
   degree               IN    NUMBER     DEFAULT TO_DEGREE_TYPE(
                                           GET_PARAM(&#39;DEGREE&#39;)), 
   granularity          IN    VARCHAR2   DEFAULT GET_PARAM(&#39;GRANULARITY&#39;), 
   cascade              IN    BOOLEAN    DEFAULT to_cascade_type (
                                           GET_PARAM(&#39;CASCADE&#39;)),
   stattab              IN    VARCHAR2   DEFAULT NULL, 
   statid               IN    VARCHAR2   DEFAULT NULL,
   options              IN    VARCHAR2   DEFAULT &#39;GATHER&#39;,
   statown              IN    VARCHAR2   DEFAULT NULL,
   gather_sys           IN    BOOLEAN    DEFAULT TRUE,
   no_invalidate        IN    BOOLEAN    DEFAULT TO_NO_INVALIDATE_TYPE (
                                           GET_PARAM(&#39;NO_INVALIDATE&#39;)),
   obj_filter_list      IN    ObjectTab  DEFAULT NULL,
   detail_level         IN    VARCHAR2   DEFAULT &#39;TYPICAL&#39;,
   format               IN    VARCHAR2   DEFAULT &#39;TEXT&#39;) 
 RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10904"></a>Parameters</p>
<div id="ARPLS74439" class="tblformal">
<p class="titleintable"><a id="sthref10905"></a><a id="sthref10906"></a>Table 155-84 REPORT_GATHER_DATABASE_STATS Function Parameters</p>
<table class="cellalignment4330" title="REPORT_GATHER_DATABASE_STATS Function Parameters" summary="This table describes the Parameters of DBMS_STATS.REPORT_GATHER_DATABASE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t93">Parameter</th>
<th class="cellalignment4328" id="r1c2-t93">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t93" headers="r1c1-t93">
<p><code dir="ltr">estimate_percent</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t93 r1c2-t93">
<p>Percentage of rows to estimate (<code dir="ltr">NULL</code> means compute): The valid range is [0.000001,100]. Use the constant <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t93" headers="r1c1-t93">
<p><code dir="ltr">block_sample</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t93 r1c2-t93">
<p>Whether or not to use random block sampling instead of random row sampling. Random block sampling is more efficient, but if the data is not randomly distributed on disk, then the sample values may be somewhat correlated. Only pertinent when doing an estimate statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t93" headers="r1c1-t93">
<p><code dir="ltr">method_opt</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t93 r1c2-t93">
<p>Accepts:</p>
<ul>
<li>
<p><code dir="ltr">FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code dir="ltr">[size_clause]</code></p>
</li>
</ul>
<p><code dir="ltr">size_clause</code> is defined as <code dir="ltr">size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<br/>
<code dir="ltr">- integer</code> : Number of histogram buckets. Must be in the range [1,2048].<br/>
<code dir="ltr">- REPEAT</code> : Collects histograms only on the columns that already have histograms.<br/>
<code dir="ltr">- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br/>
<code dir="ltr">- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.
<p>The default is <code dir="ltr">FOR ALL COLUMNS SIZE AUTO</code>.The value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t93" headers="r1c1-t93">
<p><code dir="ltr">degree</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t93 r1c2-t93">
<p>Degree of parallelism. The default for <code dir="ltr">degree</code> is <code dir="ltr">NULL</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. <code dir="ltr">NULL</code> means use the table default value specified by the <code dir="ltr">DEGREE</code> clause in the <code dir="ltr">CREATE TABLE</code> or <code dir="ltr">ALTER TABLE</code> statement. Use the constant <code dir="ltr">DBMS_STATS.DEFAULT_DEGREE</code> to specify the default value based on the initialization parameters. The <code dir="ltr">AUTO_DEGREE</code> value determines the degree of parallelism automatically. This is between <code dir="ltr">1</code> (serial execution) and <code dir="ltr">DEFAULT_DEGREE</code> (the system default value based on number of CPUs and initialization parameters) according to the size of the object. When using <code dir="ltr">DEGREE=&gt;NULL</code>, <code dir="ltr">DEGREE=&gt;n</code>, or <code dir="ltr">DEGREE=&gt;DBMS_STATS.DEFAULT_DEGREE</code>, the current implementation of <code dir="ltr">DBMS_STATS</code> may use serial execution if the size of the object does not warrant parallel execution.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t93" headers="r1c1-t93">
<p><code dir="ltr">granularity</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t93 r1c2-t93">
<p>Granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code dir="ltr">&#39;ALL&#39;</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code dir="ltr">&#39;AUTO&#39;</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code dir="ltr">&#39;DEFAULT&#39;</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the &#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; for this functionality. Note that the default value is now &#39;<code dir="ltr">AUTO</code>&#39;.</p>
<p><code dir="ltr">&#39;GLOBAL&#39;</code> - Gathers global statistics</p>
<p>&#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code dir="ltr">&#39;PARTITION</code> &#39;- Gathers partition-level statistics</p>
<p><code dir="ltr">&#39;SUBPARTITION&#39;</code> - Gathers subpartition-level statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t93" headers="r1c1-t93">
<p><code dir="ltr">cascade</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t93 r1c2-t93">
<p>Gather statistics on the indexes as well. Using this option is equivalent to running the <a href="#i1036276">GATHER_INDEX_STATS Procedure</a> on each of the indexes in the database in addition to gathering table and column statistics. Use the constant <code dir="ltr">DBMS_STATS.AUTO_CASCADE</code> to have Oracle determine whether index statistics to be collected or not. This is the default. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t93" headers="r1c1-t93">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t93 r1c2-t93">
<p>User statistics table identifier describing where to save the current statistics.</p>
<p>The statistics table is assumed to reside in the same schema as the object being analyzed, so there must be one such table in each schema to use this option.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t93" headers="r1c1-t93">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t93 r1c2-t93">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t93" headers="r1c1-t93">
<p><code dir="ltr">options</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t93 r1c2-t93">
<p>Further specification of which objects to gather statistics for:</p>
<p><code dir="ltr">GATHER</code>: Gathers statistics on all objects in the schema.</p>
<p><code dir="ltr">GATHER</code> <code dir="ltr">AUTO</code>: Gathers all necessary statistics automatically. Oracle implicitly determines which objects need new statistics, and determines how to gather those statistics. When <code dir="ltr">GATHER AUTO</code> is specified, the only additional valid parameters are <code dir="ltr">stattab</code>, <code dir="ltr">statid</code>, <code dir="ltr">objlist</code> and <code dir="ltr">statown</code>; all other parameter settings are ignored. Returns a list of processed objects.</p>
<p><code dir="ltr">GATHER</code> <code dir="ltr">STALE</code>: Gathers statistics on stale objects as determined by looking at the *<code dir="ltr">_tab_modifications</code> views. Also, return a list of objects found to be stale.</p>
<p><code dir="ltr">GATHER</code> <code dir="ltr">EMPTY</code>: Gathers statistics on objects which currently have no statistics. Return a list of objects found to have no statistics.</p>
<p><code dir="ltr">LIST AUTO</code>: Returns a list of objects to be processed with <code dir="ltr">GATHER AUTO</code></p>
<p><code dir="ltr">LIST</code> <code dir="ltr">STALE</code>: Returns a list of stale objects as determined by looking at the *<code dir="ltr">_tab_modifications</code> views</p>
<p><code dir="ltr">LIST</code> <code dir="ltr">EMPTY</code>: Returns a list of objects which currently have no statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t93" headers="r1c1-t93">
<p><code dir="ltr">objlist</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t93 r1c2-t93">
<p>List of objects found to be stale or empty</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t93" headers="r1c1-t93">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t93 r1c2-t93">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t93" headers="r1c1-t93">
<p><code dir="ltr">gather_sys</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t93 r1c2-t93">
<p>Gathers statistics on the objects owned by the <code dir="ltr">&#39;SYS&#39;</code> user</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t93" headers="r1c1-t93">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t93 r1c2-t93">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t93" headers="r1c1-t93">
<p><code dir="ltr">obj_filter_list</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t93 r1c2-t93">
<p>A list of object filters. When provided, <code dir="ltr">GATHER_DATABASE_STATS</code> will gather statistics only on objects which satisfy at least one object filter in the list as needed. In a single object filter, we can specify the constraints on the object attributes. The attribute values specified in the object filter are case- insensitive unless double-quoted. Wildcard is allowed in the attribute values. Suppose non-<code dir="ltr">NULL</code> values s1, s2, ... are specified for attributes a1, a2, ... in one object filter. An object o is said to satisfy this object filter if (o.a1 like s1) and (o.a2 like s2) and ... is true. See <a href="#BABBFCJG">Applying an Object Filter List</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t93" headers="r1c1-t93">
<p><code dir="ltr">detail_level</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t93 r1c2-t93">
<p>Detail level for the content of the report</p>
<ul>
<li>
<p><code dir="ltr">BASIC</code>: The report includes</p>
<p>- operation ID</p>
<p>- operation name</p>
<p>- operation target object</p>
<p>- start time</p>
<p>- end time</p>
<p>- completion status (such as: succeeded, failed)</p>
</li>
<li>
<p><code dir="ltr">TYPICAL</code>: In addition to the information provided at level <code dir="ltr">BASIC</code>, the report includes individual target objects for which statistics are gathered in this operation. Specifically, with regard to operation related details:</p>
<p>- total number of target objects</p>
<p>- total number of successfully completed objects</p>
<p>- total number of failed objects</p>
<p>- total number of timed-out objects (applies to only auto statistics gathering)</p>
<p>With regard to target objects:</p>
<p>- owner and name of each target object</p>
<p>- target object type (such as: table, index)</p>
<p>- start time</p>
<p>- end time</p>
<p>- completion status</p>
</li>
<li>
<p><code dir="ltr">ALL</code>: In addition to the information provided at level <code dir="ltr">TYPICAL</code>, the report includes further information on each target object. Specifically, with regard to operation-related details:</p>
<p>- job name</p>
<p>- session ID</p>
<p>- parameter values</p>
<p>- error message if the operation failed</p>
<p>With regard to target objects:</p>
<p>- job name</p>
<p>- batching details</p>
<p>- estimated cost</p>
<p>- rank in the target list</p>
<p>- columns for which histograms were collected</p>
<p>- list of collected extended statistics (if any)</p>
<p>- additional error details if the task has failed.</p>
</li>
</ul>
<p>Note that several fields (such as job name, estimated task cost) in the report are populated only when an operation is executed concurrently (<code dir="ltr">CONCURRENT</code> preference is turned on).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t93" headers="r1c1-t93">
<p><code dir="ltr">format</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t93 r1c2-t93">
<p>Report format:</p>
<ul>
<li>
<p>XML</p>
</li>
<li>
<p>HTML</p>
</li>
<li>
<p>TEXT (Default)</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10907"></a>Return Values</p>
<p>A <code dir="ltr">CLOB</code> object that contains the report</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10908"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Bad input value</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10909"></a>Usage Notes</p>
<p>To run this procedure, you need to have the <code dir="ltr">SYSDBA</code> role or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privileges.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74440" class="refsect2"><a id="BABEDECI"></a>
<h3 class="refsect2"><a id="sthref10910"></a>REPORT_GATHER_DICTIONARY_STATS Functions</h3>
<p>This function runs the <a href="#i1055451">GATHER_DICTIONARY_STATS Procedure</a> in reporting mode. That is, statistics are not actually collected, but all objects affected when <code dir="ltr">GATHER_DICTIONARY_STATS</code> is invoked are reported. The input set of parameters are exactly the same as in GATHER_DICTIONARY_STATS with two extra parameters.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10911"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.REPORT_GATHER_DICTIONARY_STATS (
   comp_id               IN    VARCHAR2   DEFAULT NULL, 
   estimate_percent      IN    NUMBER     DEFAULT TO_ESTIMATE_PERCENT_TYPE 
                                                (GET_PARAM(&#39;ESTIMATE_PERCENT&#39;)),
   block_sample          IN    BOOLEAN    DEFAULT FALSE,
   method_opt            IN    VARCHAR2   DEFAULT GET_PARAM(&#39;METHOD_OPT&#39;),
   degree                IN    NUMBER     DEFAULT TO_DEGREE_TYPE 
                                                (GET_PARAM(&#39;DEGREE&#39;)),
   granularity           IN    VARCHAR2   DEFAULT GET_PARAM(&#39;GRANULARITY&#39;),
   cascade               IN    BOOLEAN    DEFAULT TO_CASCADE_TYPE
                                                (GET_PARAM(&#39;CASCADE&#39;)),
   stattab               IN    VARCHAR2   DEFAULT NULL, 
   statid                IN    VARCHAR2   DEFAULT NULL,
   options               IN    VARCHAR2   DEFAULT &#39;GATHER AUTO&#39;, 
   objlist               OUT   ObjectTab,
   statown               IN    VARCHAR2   DEFAULT NULL,
   no_invalidate         IN    BOOLEAN    DEFAULT TO_NO_INVALIDATE_TYPE
                                                (GET_PARAM(&#39;NO_INVALIDATE&#39;)),
   obj_filter_list       IN    ObjectTab  DEFAULT NULL,
   detail_level          IN    VARCHAR2   DEFAULT &#39;TYPICAL&#39;,
   format                IN    VARCHAR2   DEFAULT &#39;TEXT&#39;) 
 RETURN CLOB;

DBMS_STATS.REPORT_GATHER_DICTIONARY_STATS (
   comp_id               IN    VARCHAR2   DEFAULT NULL, 
   estimate_percent      IN    NUMBER     DEFAULT TO_ESTIMATE_PERCENT_TYPE 
                                                (GET_PARAM(&#39;ESTIMATE_PERCENT&#39;)),
   block_sample          IN    BOOLEAN    DEFAULT FALSE,
   method_opt            IN    VARCHAR2   DEFAULT GET_PARAM(&#39;METHOD_OPT&#39;),
   degree                IN    NUMBER     DEFAULT TO_DEGREE_TYPE 
                                                (GET_PARAM(&#39;DEGREE&#39;)),
   granularity           IN    VARCHAR2   DEFAULT GET_PARAM(&#39;GRANULARITY&#39;),
   cascade               IN    BOOLEAN    DEFAULT TO_CASCADE_TYPE
                                                (GET_PARAM(&#39;CASCADE&#39;)),
   stattab               IN    VARCHAR2   DEFAULT NULL, 
   statid                IN    VARCHAR2   DEFAULT NULL,
   options               IN    VARCHAR2   DEFAULT &#39;GATHER AUTO&#39;, 
   statown               IN    VARCHAR2   DEFAULT NULL,
   no_invalidate         IN    BOOLEAN    DEFAULT TO_NO_INVALIDATE_TYPE
                                                (GET_PARAM(&#39;NO_INVALIDATE&#39;)),
   detail_level          IN    VARCHAR2   DEFAULT &#39;TYPICAL&#39;,
   format                IN    VARCHAR2   DEFAULT &#39;TEXT&#39;) 
 RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10912"></a>Parameters</p>
<div id="ARPLS74441" class="tblformal">
<p class="titleintable"><a id="sthref10913"></a><a id="sthref10914"></a>Table 155-85 REPORT_GATHER_DICTIONARY_STATS Function Parameters</p>
<table class="cellalignment4330" title="REPORT_GATHER_DICTIONARY_STATS Function Parameters" summary="This table describes the Parameters of DBMS_STATS.REPORT_GATHER_DICTIONARY_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t94">Parameter</th>
<th class="cellalignment4328" id="r1c2-t94">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t94" headers="r1c1-t94">
<p><code dir="ltr">comp_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t94 r1c2-t94">
<p>Component id of the schema to analyze (<code dir="ltr">NULL</code> will result in analyzing schemas of all RDBMS components).Please refer to <code dir="ltr">comp_id</code> column of DBA_REGISTRY view. The procedure always gather statistics on &#39;<code dir="ltr">SYS</code>&#39; and &#39;<code dir="ltr">SYSTEM</code>&#39; schemas regardless of this argument.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t94" headers="r1c1-t94">
<p><code dir="ltr">estimate_percent</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t94 r1c2-t94">
<p>Percentage of rows to estimate (<code dir="ltr">NULL</code> means compute). The valid range is <code dir="ltr">[0.000001,100]</code>. Use the constant <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a><code dir="ltr">.</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t94" headers="r1c1-t94">
<p><code dir="ltr">block_sample</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t94 r1c2-t94">
<p>Determines whether or not to use random block sampling instead of random row sampling. Random block sampling is more efficient, but if the data is not randomly distributed on disk then the sample values may be somewhat correlated. Only pertinent when performing estimate statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t94" headers="r1c1-t94">
<p><code dir="ltr">method_opt</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t94 r1c2-t94">
<p>Accepts:</p>
<ul>
<li>
<p><code dir="ltr">FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code dir="ltr">[size_clause]</code></p>
</li>
</ul>
<p><code dir="ltr">size_clause</code> is defined as <code dir="ltr">size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<br/>
<code dir="ltr">- integer</code> : Number of histogram buckets. Must be in the range [1,2048].<br/>
<code dir="ltr">- REPEAT</code> : Collects histograms only on the columns that already have histograms.<br/>
<code dir="ltr">- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br/>
<code dir="ltr">- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.
<p>The default is <code dir="ltr">FOR ALL COLUMNS SIZE AUTO</code>.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t94" headers="r1c1-t94">
<p><code dir="ltr">degree</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t94 r1c2-t94">
<p>Degree of parallelism. The default for <code dir="ltr">degree</code> is <code dir="ltr">NULL</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. <code dir="ltr">NULL</code> means use the table default value specified by the <code dir="ltr">DEGREE</code> clause in the <code dir="ltr">CREATE TABLE</code> or <code dir="ltr">ALTER TABLE</code> statement. Use the constant <code dir="ltr">DBMS_STATS.DEFAULT_DEGREE</code> to specify the default value based on the initialization parameters. The <code dir="ltr">AUTO_DEGREE</code> value determines the degree of parallelism automatically. This is between <code dir="ltr">1</code> (serial execution) and <code dir="ltr">DEFAULT_DEGREE</code> (the system default value based on number of CPUs and initialization parameters) according to the size of the object. When using <code dir="ltr">DEGREE=&gt;NULL</code>, <code dir="ltr">DEGREE=&gt;n</code>, or <code dir="ltr">DEGREE=&gt;DBMS_STATS.DEFAULT_DEGREE</code>, the current implementation of <code dir="ltr">DBMS_STATS</code> may use serial execution if the size of the object does not warrant parallel execution.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t94" headers="r1c1-t94">
<p><code dir="ltr">granularity</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t94 r1c2-t94">
<p>Granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code dir="ltr">&#39;ALL&#39;</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code dir="ltr">&#39;AUTO&#39;</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code dir="ltr">&#39;DEFAULT&#39;</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the &#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; for this functionality. Note that the default value is now &#39;<code dir="ltr">AUTO</code>&#39;.</p>
<p><code dir="ltr">&#39;GLOBAL&#39;</code> - Gathers global statistics</p>
<p>&#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code dir="ltr">&#39;PARTITION</code> &#39;- Gathers partition-level statistics</p>
<p><code dir="ltr">&#39;SUBPARTITION&#39;</code> - gathers subpartition-level statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t94" headers="r1c1-t94">
<p><code dir="ltr">cascade</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t94 r1c2-t94">
<p>Gathers statistics on indexes also.Index statistics gathering will not be parallelized. Using this option is equivalent to running the <a href="#i1036276">GATHER_INDEX_STATS Procedure</a> on each of the indexes in the schema in addition to gathering table and column statistics. Use the constant <code dir="ltr">DBMS_STATS.AUTO_CASCADE</code> to have Oracle determine whether index statistics to be collected or not. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t94" headers="r1c1-t94">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t94 r1c2-t94">
<p>User statistics table identifier describing where to save the current statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t94" headers="r1c1-t94">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t94 r1c2-t94">
<p>The (optional) identifier to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t94" headers="r1c1-t94">
<p><code dir="ltr">options</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t94 r1c2-t94">
<p>Further specification of objects for which to gather statistics:</p>
<ul>
<li>
<p>&#39;<code dir="ltr">GATHER</code>&#39; - Gathers statistics on all objects in the schema</p>
</li>
<li>
<p>&#39;<code dir="ltr">GATHER</code> <code dir="ltr">AUTO</code>&#39; - Gathers all necessary statistics automatically. Oracle implicitly determines which objects need new statistics and determines how to gather those statistics. When &#39;<code dir="ltr">GATHER</code> <code dir="ltr">AUTO</code>&#39; is specified, the only additional valid parameters are <code dir="ltr">comp_id</code>, <code dir="ltr">stattab</code>, <code dir="ltr">statid</code> and <code dir="ltr">statown</code>; all other parameter settings will be ignored. Also, returns a list of objects processed.</p>
</li>
<li>
<p>&#39;<code dir="ltr">GATHER</code> <code dir="ltr">STALE</code>&#39; - Gathers statistics on stale objects as determined by looking at the <code dir="ltr">*_tab</code>_modifications views. Also, returns a list of objects found to be stale.</p>
</li>
<li>
<p>&#39;<code dir="ltr">GATHER</code> <code dir="ltr">EMPTY</code>&#39; - Gathers statistics on objects which currently have no statistics. Also, returns a list of objects found to have no statistics.</p>
</li>
<li>
<p>&#39;<code dir="ltr">LIST</code> <code dir="ltr">AUTO</code>&#39; - Returns list of objects to be processed with &#39;<code dir="ltr">GATHER</code> <code dir="ltr">AUTO</code>&#39;</p>
</li>
<li>
<p>&#39;<code dir="ltr">LIST</code> <code dir="ltr">STALE</code>&#39; - Returns list of stale objects as determined by looking at the <code dir="ltr">*_tab</code>_modifications views</p>
</li>
<li>
<p>&#39;<code dir="ltr">LIST</code> <code dir="ltr">EMPTY</code>&#39; - Returns list of objects which currently have no statistics</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t94" headers="r1c1-t94">
<p><code dir="ltr">objlist</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t94 r1c2-t94">
<p>The list of objects found to be stale or empty</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t94" headers="r1c1-t94">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t94 r1c2-t94">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t94" headers="r1c1-t94">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t94 r1c2-t94">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t94" headers="r1c1-t94">
<p><code dir="ltr">obj_filter_list</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t94 r1c2-t94">
<p>A list of object filters. When provided, this will gather statistics only on objects which satisfy at least one object filter in the list as needed. In a single object filter, we can specify the constraints on the object attributes. The attribute values specified in the object filter are case- insensitive unless double-quoted. Wildcard is allowed in the attribute values. Suppose non-<code dir="ltr">NULL</code> values s1, s2, ... are specified for attributes a1, a2, ... in one object filter. An object o is said to satisfy this object filter if (o.a1 like s1) and (o.a2 like s2) and ... is true.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t94" headers="r1c1-t94">
<p><code dir="ltr">detail_level</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t94 r1c2-t94">
<p>Detail level for the content of the report</p>
<ul>
<li>
<p><code dir="ltr">BASIC</code>: The report includes</p>
<p>- operation ID</p>
<p>- operation name</p>
<p>- operation target object</p>
<p>- start time</p>
<p>- end time</p>
<p>- completion status (such as: succeeded, failed)</p>
</li>
<li>
<p><code dir="ltr">TYPICAL</code>: In addition to the information provided at level <code dir="ltr">BASIC</code>, the report includes individual target objects for which statistics are gathered in this operation. Specifically, with regard to operation related details:</p>
<p>- total number of target objects</p>
<p>- total number of successfully completed objects</p>
<p>- total number of failed objects</p>
<p>- total number of timed-out objects (applies to only auto statistics gathering)</p>
<p>With regard to target objects:</p>
<p>- owner and name of each target object</p>
<p>- target object type (such as: table, index)</p>
<p>- start time</p>
<p>- end time</p>
<p>- completion status</p>
</li>
<li>
<p><code dir="ltr">ALL</code>: In addition to the information provided at level <code dir="ltr">TYPICAL</code>, the report includes further information on each target object. Specifically, with regard to operation-related details:</p>
<p>- job name</p>
<p>- session ID</p>
<p>- parameter values</p>
<p>- error message if the operation failed</p>
<p>With regard to target objects:</p>
<p>- job name</p>
<p>- batching details</p>
<p>- estimated cost</p>
<p>- rank in the target list</p>
<p>- columns for which histograms were collected</p>
<p>- list of collected extended statistics (if any)</p>
<p>- additional error details if the task has failed.</p>
</li>
</ul>
<p>Note that several fields (such as job name, estimated task cost) in the report are populated only when an operation is executed concurrently (<code dir="ltr">CONCURRENT</code> preference is turned on).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t94" headers="r1c1-t94">
<p><code dir="ltr">format</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t94 r1c2-t94">
<p>Report format:</p>
<ul>
<li>
<p>XML</p>
</li>
<li>
<p>HTML</p>
</li>
<li>
<p>TEXT (Default)</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10915"></a>Return Values</p>
<p>A <code dir="ltr">CLOB</code> object that contains the report</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10916"></a>Usage Notes</p>
<p>You must have the <code dir="ltr">SYSDBA</code> or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege to execute this procedure.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10917"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Index does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Bad input value</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74442" class="refsect2"><a id="BABCAJGD"></a>
<h3 class="refsect2"><a id="sthref10918"></a>REPORT_GATHER_FIXED_OBJ_STATS Function</h3>
<p>This function runs the <a href="#i1039162">GATHER_FIXED_OBJECTS_STATS Procedure</a> in reporting mode. That is, statistics are not actually collected, but all the objects that will be affected when <code dir="ltr">GATHER_FIXED_OBJ_STATS</code> is invoked are reported. The input set of parameters are exactly the same as in <code dir="ltr">GATHER_FIXED_OBJ_STATS</code> with two extra parameters.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10919"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.REPORT_GATHER_FIXED_OBJ_STATS (
   stattab          IN  VARCHAR2 DEFAULT NULL,
   statid           IN  VARCHAR2 DEFAULT NULL,
   statown          IN  VARCHAR2 DEFAULT NULL, 
   no_invalidate    IN  BOOLEAN  DEFAULT TO_NO_INVALIDATE_TYPE (
                                     GET_PARAM(&#39;NO_INVALIDATE&#39;)),
   detail_level     IN  VARCHAR2   DEFAULT &#39;TYPICAL&#39;,
   format           IN  VARCHAR2   DEFAULT &#39;TEXT&#39;) 
 RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10920"></a>Parameters</p>
<div id="ARPLS74443" class="tblformal">
<p class="titleintable"><a id="sthref10921"></a><a id="sthref10922"></a>Table 155-86 REPORT_GATHER_FIXED_OBJ_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="REPORT_GATHER_FIXED_OBJ_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.REPORT_GATHER_FIXED_OBJ_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t95">Parameter</th>
<th class="cellalignment4328" id="r1c2-t95">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t95" headers="r1c1-t95">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t95 r1c2-t95">
<p>User statistics table identifier describing where to save the current statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t95" headers="r1c1-t95">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t95 r1c2-t95">
<p>Identifier to associate with these statistics within <code dir="ltr">stattab</code> (optional)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t95" headers="r1c1-t95">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t95 r1c2-t95">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t95" headers="r1c1-t95">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t95 r1c2-t95">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t95" headers="r1c1-t95">
<p><code dir="ltr">detail_level</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t95 r1c2-t95">
<p>Detail level for the content of the report</p>
<ul>
<li>
<p><code dir="ltr">BASIC</code>: The report includes</p>
<p>- operation ID</p>
<p>- operation name</p>
<p>- operation target object</p>
<p>- start time</p>
<p>- end time</p>
<p>- completion status (such as: succeeded, failed)</p>
</li>
<li>
<p><code dir="ltr">TYPICAL</code>: In addition to the information provided at level <code dir="ltr">BASIC</code>, the report includes individual target objects for which statistics are gathered in this operation. Specifically, with regard to operation related details:</p>
<p>- total number of target objects</p>
<p>- total number of successfully completed objects</p>
<p>- total number of failed objects</p>
<p>- total number of timed-out objects (applies to only auto statistics gathering)</p>
<p>With regard to target objects:</p>
<p>- owner and name of each target object</p>
<p>- target object type (such as: table, index)</p>
<p>- start time</p>
<p>- end time</p>
<p>- completion status</p>
</li>
<li>
<p><code dir="ltr">ALL</code>: In addition to the information provided at level <code dir="ltr">TYPICAL</code>, the report includes further information on each target object. Specifically, with regard to operation-related details:</p>
<p>- job name</p>
<p>- session ID</p>
<p>- parameter values</p>
<p>- error message if the operation failed</p>
<p>With regard to target objects:</p>
<p>- job name</p>
<p>- batching details</p>
<p>- estimated cost</p>
<p>- rank in the target list</p>
<p>- columns for which histograms were collected</p>
<p>- list of collected extended statistics (if any)</p>
<p>- additional error details if the task has failed.</p>
</li>
</ul>
<p>Note that several fields (such as job name, estimated task cost) in the report are populated only when an operation is executed concurrently (<code dir="ltr">CONCURRENT</code> preference is turned on).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t95" headers="r1c1-t95">
<p><code dir="ltr">format</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t95 r1c2-t95">
<p>Report format:</p>
<ul>
<li>
<p>XML</p>
</li>
<li>
<p>HTML</p>
</li>
<li>
<p>TEXT (Default)</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10923"></a>Return Values</p>
<p>A <code dir="ltr">CLOB</code> object that contains the report</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10924"></a>Usage Notes</p>
<p>You must have the <code dir="ltr">SYSDBA</code> or <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> system privilege to execute this procedure.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10925"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Bad input value</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74444" class="refsect2"><a id="BABFCCIG"></a>
<h3 class="refsect2"><a id="sthref10926"></a>REPORT_GATHER_SCHEMA_STATS Functions</h3>
<p>This function runs the <a href="#i1036456">GATHER_SCHEMA_STATS Procedures</a> in reporting mode. That is, statistics are not actually collected, but all the objects that will be affected when <code dir="ltr">GATHER_SCHEMA_STATS</code> is invoked are reported. The input set of parameters are exactly the same as in <code dir="ltr">GATHER_SCHEMA_STATS</code> with two extra parameters.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10927"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.REPORT_GATHER_SCHEMA_STATS ( 
   ownname           IN   VARCHAR2, 
   estimate_percent  IN   NUMBER     DEFAULT TO_ESTIMATE_PERCENT_TYPE ( 
                                        GET_PARAM (&#39;ESTIMATE_PERCENT&#39;)), 
   block_sample      IN   BOOLEAN    DEFAULT FALSE, 
   method_opt        IN   VARCHAR2   DEFAULT GET_PARAM (&#39;METHOD_OPT&#39;),
   degree            IN   NUMBER     DEFAULT TO_DEGREE_TYPE (
                                        GET_PARAM(&#39;DEGREE&#39;)), 
   granularity       IN   VARCHAR2   DEFAULT GET_PARAM(&#39;GRANULARITY&#39;), 
   cascade           IN   BOOLEAN    DEFAULT TO_CASCADE_TYPE (
                                        GET_PARAM (&#39;CASCADE&#39;)), 
   stattab           IN   VARCHAR2    DEFAULT NULL, 
   statid            IN   VARCHAR2    DEFAULT NULL, 
   options           IN   VARCHAR2    DEFAULT &#39;GATHER&#39;, 
   objlist           OUT  ObjectTab,
   statown           IN   VARCHAR2    DEFAULT NULL, 
   no_invalidate     IN   BOOLEAN     DEFAULT TO_NO_INVALIDATE_TYPE (
                                         GET_PARAM (&#39;NO_INVALIDATE&#39;)),
   force             IN   BOOLEAN     DEFAULT FALSE,
   obj_filter_list   IN   ObjectTab   DEFAULT NULL,
   detail_level      IN    VARCHAR2   DEFAULT &#39;TYPICAL&#39;,
   format            IN    VARCHAR2   DEFAULT &#39;TEXT&#39;) 
 RETURN CLOB;
   
DBMS_STATS.REPORT_GATHER_SCHEMA_STATS ( 
   ownname           IN   VARCHAR2, 
   estimate_percent  IN   NUMBER     DEFAULT TO_ESTIMATE_PERCENT_TYPE ( 
                                        GET_PARAM (&#39;ESTIMATE_PERCENT&#39;)), 
   block_sample      IN   BOOLEAN    DEFAULT FALSE, 
   method_opt        IN   VARCHAR2   DEFAULT GET_PARAM (&#39;METHOD_OPT&#39;),
   degree            IN   NUMBER     DEFAULT TO_DEGREE_TYPE (
                                        GET_PARAM(&#39;DEGREE&#39;)), 
   granularity       IN   VARCHAR2   DEFAULT GET_PARAM(&#39;GRANULARITY&#39;), 
   cascade           IN   BOOLEAN    DEFAULT TO_CASCADE_TYPE (
                                        GET_PARAM (&#39;CASCADE&#39;)), 
   stattab           IN   VARCHAR2    DEFAULT NULL, 
   statid            IN   VARCHAR2    DEFAULT NULL, 
   options           IN   VARCHAR2    DEFAULT &#39;GATHER&#39;, 
   statown           IN   VARCHAR2    DEFAULT NULL, 
   no_invalidate     IN   BOOLEAN     DEFAULT TO_NO_INVALIDATE_TYPE (
                                         GET_PARAM (&#39;NO_INVALIDATE&#39;)),
   force             IN   BOOLEAN     DEFAULT FALSE,
   obj_filter_list   IN   ObjectTab   DEFAULT NULL,
   detail_level      IN    VARCHAR2   DEFAULT &#39;TYPICAL&#39;,
   format            IN    VARCHAR2   DEFAULT &#39;TEXT&#39;) 
 RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10928"></a>Parameters</p>
<div id="ARPLS74445" class="tblformal">
<p class="titleintable"><a id="sthref10929"></a><a id="sthref10930"></a>Table 155-87 REPORT_GATHER_SCHEMA_STATS Function Parameters</p>
<table class="cellalignment4330" title="REPORT_GATHER_SCHEMA_STATS Function Parameters" summary="This table describes the Parameters of DBMS_STATS.GATHER_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t96">Parameter</th>
<th class="cellalignment4328" id="r1c2-t96">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t96" headers="r1c1-t96">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t96 r1c2-t96">
<p>Schema to analyze (<code dir="ltr">NULL</code> means current schema)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t96" headers="r1c1-t96">
<p><code dir="ltr">estimate_percent</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t96 r1c2-t96">
<p>Percentage of rows to estimate (<code dir="ltr">NULL</code> means compute): The valid range is [0.000001,100]. Use the constant <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t96" headers="r1c1-t96">
<p><code dir="ltr">block_sample</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t96 r1c2-t96">
<p>Whether or not to use random block sampling instead of random row sampling. Random block sampling is more efficient, but if the data is not randomly distributed on disk, then the sample values may be somewhat correlated. Only pertinent when doing an estimate statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t96" headers="r1c1-t96">
<p><code dir="ltr">method_opt</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t96 r1c2-t96">
<p>Accepts:</p>
<ul>
<li>
<p><code dir="ltr">FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code dir="ltr">[size_clause]</code></p>
</li>
</ul>
<p><code dir="ltr">size_clause</code> is defined as <code dir="ltr">size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<br/>
<code dir="ltr">- integer</code> : Number of histogram buckets. Must be in the range [1,2048].<br/>
<code dir="ltr">- REPEAT</code> : Collects histograms only on the columns that already have histograms<br/>
<code dir="ltr">- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br/>
<code dir="ltr">- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.
<p>The default is <code dir="ltr">FOR ALL COLUMNS SIZE AUTO</code>.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t96" headers="r1c1-t96">
<p><code dir="ltr">degree</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t96 r1c2-t96">
<p>Degree of parallelism. The default for <code dir="ltr">degree</code> is <code dir="ltr">NULL</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. <code dir="ltr">NULL</code> means use the table default value specified by the <code dir="ltr">DEGREE</code> clause in the <code dir="ltr">CREATE TABLE</code> or <code dir="ltr">ALTER TABLE</code> statement. Use the constant <code dir="ltr">DBMS_STATS.DEFAULT_DEGREE</code> to specify the default value based on the initialization parameters. The <code dir="ltr">AUTO_DEGREE</code> value determines the degree of parallelism automatically. This is between <code dir="ltr">1</code> (serial execution) and <code dir="ltr">DEFAULT_DEGREE</code> (the system default value based on number of CPUs and initialization parameters) according to the size of the object. When using <code dir="ltr">DEGREE=&gt;NULL</code>, <code dir="ltr">DEGREE=&gt;n</code>, or <code dir="ltr">DEGREE=&gt;DBMS_STATS.DEFAULT_DEGREE</code>, the current implementation of <code dir="ltr">DBMS_STATS</code> may use serial execution if the size of the object does not warrant parallel execution.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t96" headers="r1c1-t96">
<p><code dir="ltr">granularity</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t96 r1c2-t96">
<p>Granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code dir="ltr">&#39;ALL&#39;</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code dir="ltr">&#39;AUTO&#39;</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code dir="ltr">&#39;DEFAULT&#39;</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the &#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; for this functionality. Note that the default value is now &#39;<code dir="ltr">AUTO</code>&#39;.</p>
<p><code dir="ltr">&#39;GLOBAL&#39;</code> - Gathers global statistics</p>
<p>&#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code dir="ltr">&#39;PARTITION</code> &#39;- Gathers partition-level statistics</p>
<p><code dir="ltr">&#39;SUBPARTITION&#39;</code> - Gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t96" headers="r1c1-t96">
<p><code dir="ltr">cascade</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t96 r1c2-t96">
<p>Gather statistics on the indexes as well. Using this option is equivalent to running the <a href="#i1036276">GATHER_INDEX_STATS Procedure</a> on each of the indexes in the schema in addition to gathering table and column statistics. Use the constant <code dir="ltr">DBMS_STATS.AUTO_CASCADE</code> to have Oracle determine whether index statistics to be collected or not. This is the default. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t96" headers="r1c1-t96">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t96 r1c2-t96">
<p>User statistics table identifier describing where to save the current statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t96" headers="r1c1-t96">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t96 r1c2-t96">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t96" headers="r1c1-t96">
<p><code dir="ltr">options</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t96 r1c2-t96">
<p>Further specification of which objects to gather statistics for:</p>
<p><code dir="ltr">GATHER</code>: Gathers statistics on all objects in the schema.</p>
<p><code dir="ltr">GATHER</code> <code dir="ltr">AUTO</code>: Gathers all necessary statistics automatically. Oracle implicitly determines which objects need new statistics, and determines how to gather those statistics. When <code dir="ltr">GATHER AUTO</code> is specified, the only additional valid parameters are <code dir="ltr">ownname</code>, <code dir="ltr">stattab</code>, <code dir="ltr">statid</code>, <code dir="ltr">objlist</code> and <code dir="ltr">statown</code>; all other parameter settings are ignored. Returns a list of processed objects.</p>
<p><code dir="ltr">GATHER</code> <code dir="ltr">STALE</code>: Gathers statistics on stale objects as determined by looking at the *<code dir="ltr">_tab_modifications</code> views. Also, return a list of objects found to be stale.</p>
<p><code dir="ltr">GATHER</code> <code dir="ltr">EMPTY</code>: Gathers statistics on objects which currently have no statistics. also, return a list of objects found to have no statistics.</p>
<p><code dir="ltr">LIST AUTO</code>: Returns a list of objects to be processed with <code dir="ltr">GATHER AUTO</code>.</p>
<p><code dir="ltr">LIST</code> <code dir="ltr">STALE</code>: Returns list of stale objects as determined by looking at the *<code dir="ltr">_tab_modifications</code> views.</p>
<p><code dir="ltr">LIST</code> <code dir="ltr">EMPTY</code>: Returns list of objects which currently have no statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t96" headers="r1c1-t96">
<p><code dir="ltr">objlist</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t96 r1c2-t96">
<p>List of objects found to be stale or empty</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t96" headers="r1c1-t96">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t96 r1c2-t96">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t96" headers="r1c1-t96">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t96 r1c2-t96">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t96" headers="r1c1-t96">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t96 r1c2-t96">
<p>Gather statistics on objects even if they are locked</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t96" headers="r1c1-t96">
<p><code dir="ltr">obj_filter_list</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t96 r1c2-t96">
<p>A list of object filters. When provided, <code dir="ltr">GATHER_SCHEMA_STATS</code> will gather statistics only on objects which satisfy at least one object filter in the list as needed. In a single object filter, we can specify the constraints on the object attributes. The attribute values specified in the object filter are case- insensitive unless double-quoted. Wildcard is allowed in the attribute values. Suppose non-<code dir="ltr">NULL</code> values s1, s2, ... are specified for attributes a1, a2, ... in one object filter. An object o is said to satisfy this object filter if (o.a1 like s1) and (o.a2 like s2) and ... is true. See <a href="#BABBFCJG">Applying an Object Filter List</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t96" headers="r1c1-t96">
<p><code dir="ltr">detail_level</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t96 r1c2-t96">
<p>Detail level for the content of the report</p>
<ul>
<li>
<p><code dir="ltr">BASIC</code>: The report includes</p>
<p>- operation ID</p>
<p>- operation name</p>
<p>- operation target object</p>
<p>- start time</p>
<p>- end time</p>
<p>- completion status (such as: succeeded, failed)</p>
</li>
<li>
<p><code dir="ltr">TYPICAL</code>: In addition to the information provided at level <code dir="ltr">BASIC</code>, the report includes individual target objects for which statistics are gathered in this operation. Specifically, with regard to operation related details:</p>
<p>- total number of target objects</p>
<p>- total number of successfully completed objects</p>
<p>- total number of failed objects</p>
<p>- total number of timed-out objects (applies to only auto statistics gathering)</p>
<p>With regard to target objects:</p>
<p>- owner and name of each target object</p>
<p>- target object type (such as: table, index)</p>
<p>- start time</p>
<p>- end time</p>
<p>- completion status</p>
</li>
<li>
<p><code dir="ltr">ALL</code>: In addition to the information provided at level <code dir="ltr">TYPICAL</code>, the report includes further information on each target object. Specifically, with regard to operation-related details:</p>
<p>- job name</p>
<p>- session ID</p>
<p>- parameter values</p>
<p>- error message if the operation failed</p>
<p>With regard to target objects:</p>
<p>- job name</p>
<p>- batching details</p>
<p>- estimated cost</p>
<p>- rank in the target list</p>
<p>- columns for which histograms were collected</p>
<p>- list of collected extended statistics (if any)</p>
<p>- additional error details if the task has failed.</p>
</li>
</ul>
<p>Note that several fields (such as job name, estimated task cost) in the report are populated only when an operation is executed concurrently (<code dir="ltr">CONCURRENT</code> preference is turned on).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t96" headers="r1c1-t96">
<p><code dir="ltr">format</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t96 r1c2-t96">
<p>Report format:</p>
<ul>
<li>
<p>XML</p>
</li>
<li>
<p>HTML</p>
</li>
<li>
<p>TEXT (Default)</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10931"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
<p>When you use a specific value for the sampling percentage, <code dir="ltr">DBMS_STATS</code> honors it except for when:</p>
<ul>
<li>
<p>The result is less than 2500 rows (too small a sample) and</p>
</li>
<li>
<p>The specified percentage is more than the certain percentage.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10932"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Schema does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Bad input value</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10933"></a>Examples</p>
<p class="subhead2"><a id="BABBFCJG"></a><a id="ARPLS74446"></a>Applying an Object Filter List</p>
<p>The following example specifies that any table with a &#34;<code dir="ltr">T</code>&#34; prefix in the <code dir="ltr">SAMPLE</code> schema and any table in the <code dir="ltr">SYS</code> schema, if stale, will have statistics gathered upon it.</p>
<pre dir="ltr">    DECLARE
      filter_lst  DBMS_STATS.OBJECTTAB := DBMS_STATS.OBJECTTAB();
    BEGIN
      filter_lst.extend(2);
      filter_lst(1).ownname := &#39;SAMPLE&#39;;
      filter_lst(1).objname := &#39;T%&#39;;
      filter_lst(2).ownname := &#39;SYS&#39;;
      DBMS_STATS.GATHER_SCHEMA_STATS(NULL, obj_filter_list =&gt; filter_lst,
                                     options =&gt; &#39;GATHER STALE&#39;);
    END; 
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74447" class="refsect2"><a id="BABFHCEC"></a>
<h3 class="refsect2"><a id="sthref10934"></a>REPORT_GATHER_TABLE_STATS Function</h3>
<p>This procedure runs the <a href="#i1036461">GATHER_TABLE_STATS Procedure</a> in reporting mode. That is, statistics are not actually collected, but all the objects that will be affected when <code dir="ltr">GATHER_TABLE_STATS</code> is invoked are reported.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10935"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.REPORT_GATHER_TABLE_STATS (
   ownname          VARCHAR2, 
   tabname          VARCHAR2, 
   partname         VARCHAR2 DEFAULT NULL,
   estimate_percent NUMBER   DEFAULT to_estimate_percent_type 
                                                (get_param(&#39;ESTIMATE_PERCENT&#39;)), 
   block_sample     BOOLEAN  DEFAULT FALSE,
   method_opt       VARCHAR2 DEFAULT get_param(&#39;METHOD_OPT&#39;),
   degree           NUMBER   DEFAULT to_degree_type(get_param(&#39;DEGREE&#39;)),
   granularity      VARCHAR2 DEFAULT GET_PARAM(&#39;GRANULARITY&#39;), 
   cascade          BOOLEAN  DEFAULT to_cascade_type(get_param(&#39;CASCADE&#39;)),
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   statown          VARCHAR2 DEFAULT NULL,
   no_invalidate    BOOLEAN  DEFAULT  to_no_invalidate_type (
                                     get_param(&#39;NO_INVALIDATE&#39;)),
   stattype         VARCHAR2 DEFAULT &#39;DATA&#39;,
   force            BOOLEAN  DEFAULT FALSE)
   detail_level     VARCHAR2 DEFAULT &#39;TYPICAL&#39;,   format           VARCHAR2 DEFAULT &#39;TEXT&#39;)
 RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10936"></a>Parameters</p>
<div id="ARPLS74448" class="tblformal">
<p class="titleintable"><a id="sthref10937"></a><a id="sthref10938"></a>Table 155-88 REPORT_GATHER_TABLE_STATS Function Parameters</p>
<table class="cellalignment4330" title="REPORT_GATHER_TABLE_STATS Function Parameters" summary="This table describes the Parameters of DBMS_STATS.REPORT_GATHER_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t97">Parameter</th>
<th class="cellalignment4328" id="r1c2-t97">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t97" headers="r1c1-t97">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t97 r1c2-t97">
<p>Schema of table to analyze</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t97" headers="r1c1-t97">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t97 r1c2-t97">
<p>Name of table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t97" headers="r1c1-t97">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t97 r1c2-t97">
<p>Name of partition</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t97" headers="r1c1-t97">
<p><code dir="ltr">estimate_percent</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t97 r1c2-t97">
<p>Percentage of rows to estimate (<code dir="ltr">NULL</code> means compute) The valid range is [0.000001,100]. Use the constant <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t97" headers="r1c1-t97">
<p><code dir="ltr">block_sample</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t97 r1c2-t97">
<p>Whether or not to use random block sampling instead of random row sampling. Random block sampling is more efficient, but if the data is not randomly distributed on disk, then the sample values may be somewhat correlated. Only pertinent when doing an estimate statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t97" headers="r1c1-t97">
<p><code dir="ltr">method_opt</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t97 r1c2-t97">
<p>Accepts either of the following options, or both in combination:</p>
<ul>
<li>
<p><code dir="ltr">FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code dir="ltr">[size_clause]</code></p>
</li>
<li>
<p><code dir="ltr">FOR COLUMNS [column_clause] [size_clause]</code></p>
</li>
</ul>
<p><code dir="ltr">size_clause</code> is defined as <code dir="ltr">size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<p><code dir="ltr">column_clause</code> is defined as <code dir="ltr">column_clause := column_name | extension name | extension</code></p>
<br/>
<code dir="ltr">- integer</code> : Number of histogram buckets. Must be in the range [1,2048].<br/>
<code dir="ltr">- REPEAT</code> : Collects histograms only on the columns that already have histograms<br/>
<code dir="ltr">- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br/>
<code dir="ltr">- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.<br/>
- <code dir="ltr">column_name</code> : Name of a column<br/>
- <code dir="ltr">extension :</code> can be either a column group in the format of (<code dir="ltr">column_name</code>, <code dir="ltr">Colume_name</code> [, ...]) or an expression
<p>The default is <code dir="ltr">FOR ALL COLUMNS SIZE AUTO</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t97" headers="r1c1-t97">
<p><code dir="ltr">degree</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t97 r1c2-t97">
<p>Degree of parallelism. The default for <code dir="ltr">degree</code> is <code dir="ltr">NULL</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. <code dir="ltr">NULL</code> means use the table default value specified by the <code dir="ltr">DEGREE</code> clause in the <code dir="ltr">CREATE TABLE</code> or <code dir="ltr">ALTER TABLE</code> statement. Use the constant <code dir="ltr">DBMS_STATS.DEFAULT_DEGREE</code> to specify the default value based on the initialization parameters. The <code dir="ltr">AUTO_DEGREE</code> value determines the degree of parallelism automatically. This is between <code dir="ltr">1</code> (serial execution) and <code dir="ltr">DEFAULT_DEGREE</code> (the system default value based on number of CPUs and initialization parameters) according to the size of the object. When using <code dir="ltr">DEGREE=&gt;NULL</code>, <code dir="ltr">DEGREE=&gt;n</code>, or <code dir="ltr">DEGREE=&gt;DBMS_STATS.DEFAULT_DEGREE</code>, the current implementation of <code dir="ltr">DBMS_STATS</code> may use serial execution if the size of the object does not warrant parallel execution.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t97" headers="r1c1-t97">
<p><code dir="ltr">granularity</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t97 r1c2-t97">
<p>Granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code dir="ltr">&#39;ALL&#39;</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code dir="ltr">&#39;APPROX_GLOBAL AND PARTITION&#39;</code> - similar to <code dir="ltr">&#39;GLOBAL AND PARTITION&#39;</code> but in this case the global statistics are aggregated from partition level statistics. This option will aggregate all statistics except the number of distinct values for columns and number of distinct keys of indexes. The existing histograms of the columns at the table level are also aggregated.The aggregation will use only partitions with statistics, so to get accurate global statistics, users should make sure to have statistics for all partitions. Global statistics are gathered if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code> or if the aggregation cannot be performed (for example, if statistics for one of the partitions is missing).</p>
<p><code dir="ltr">&#39;AUTO&#39;</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code dir="ltr">&#39;DEFAULT&#39;</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the &#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; for this functionality. Note that the default value is now &#39;<code dir="ltr">AUTO</code>&#39;.</p>
<p><code dir="ltr">&#39;GLOBAL&#39;</code> - Gathers global statistics</p>
<p>&#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code dir="ltr">&#39;PARTITION</code> &#39;- Gathers partition-level statistics</p>
<p><code dir="ltr">&#39;SUBPARTITION&#39;</code> - Gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t97" headers="r1c1-t97">
<p><code dir="ltr">cascade</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t97 r1c2-t97">
<p>Gathers statistics on the indexes for this table. Using this option is equivalent to running the <a href="#i1036276">GATHER_INDEX_STATS Procedure</a> on each of the table&#39;s indexes. Use the constant <code dir="ltr">DBMS_STATS.AUTO_CASCADE</code> to have Oracle determine whether index statistics are to be collected or not. This is the default. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a><code dir="ltr">.</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t97" headers="r1c1-t97">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t97 r1c2-t97">
<p>User statistics table identifier describing where to save the current statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t97" headers="r1c1-t97">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t97 r1c2-t97">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t97" headers="r1c1-t97">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t97 r1c2-t97">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t97" headers="r1c1-t97">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t97 r1c2-t97">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t97" headers="r1c1-t97">
<p><code dir="ltr">stattype</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t97 r1c2-t97">
<p>Statistics type. The only value allowed is <code dir="ltr">DATA</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t97" headers="r1c1-t97">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t97 r1c2-t97">
<p>Gather statistics of table even if it is locked</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t97" headers="r1c1-t97">
<p><code dir="ltr">detail_level</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t97 r1c2-t97">
<p>Detail level for the content of the report</p>
<ul>
<li>
<p><code dir="ltr">BASIC</code>: The report includes</p>
<p>- operation ID</p>
<p>- operation name</p>
<p>- operation target object</p>
<p>- start time</p>
<p>- end time</p>
<p>- completion status (such as: succeeded, failed)</p>
</li>
<li>
<p><code dir="ltr">TYPICAL</code>: In addition to the information provided at level <code dir="ltr">BASIC</code>, the report includes individual target objects for which statistics are gathered in this operation. Specifically, with regard to operation related details:</p>
<p>- total number of target objects</p>
<p>- total number of successfully completed objects</p>
<p>- total number of failed objects</p>
<p>- total number of timed-out objects (applies to only auto statistics gathering)</p>
<p>With regard to target objects:</p>
<p>- owner and name of each target object</p>
<p>- target object type (such as: table, index)</p>
<p>- start time</p>
<p>- end time</p>
<p>- completion status</p>
</li>
<li>
<p><code dir="ltr">ALL</code>: In addition to the information provided at level <code dir="ltr">TYPICAL</code>, the report includes further information on each target object. Specifically, with regard to operation-related details:</p>
<p>- job name</p>
<p>- session ID</p>
<p>- parameter values</p>
<p>- error message if the operation failed</p>
<p>With regard to target objects:</p>
<p>- job name</p>
<p>- batching details</p>
<p>- estimated cost</p>
<p>- rank in the target list</p>
<p>- columns for which histograms were collected</p>
<p>- list of collected extended statistics (if any)</p>
<p>- additional error details if the task has failed.</p>
</li>
</ul>
<p>Note that several fields (such as job name, estimated task cost) in the report are populated only when an operation is executed concurrently (<code dir="ltr">CONCURRENT</code> preference is turned on).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t97" headers="r1c1-t97">
<p><code dir="ltr">format</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t97 r1c2-t97">
<p>Report format:</p>
<ul>
<li>
<p>XML</p>
</li>
<li>
<p>HTML</p>
</li>
<li>
<p>TEXT (Default)</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10939"></a>Return Values</p>
<p>A <code dir="ltr">CLOB</code> object that contains the report</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10940"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74449" class="refsect2"><a id="BABJDEBB"></a>
<h3 class="refsect2"><a id="sthref10941"></a>REPORT_SINGLE_STATS_OPERATION Function</h3>
<p>This function generates a report for the provided operation optionally in a particular pluggable database (PDB) in a multitenant environment.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10942"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.REPORT_SINGLE_STATS_OPERATIONS (
   opid              NUMBER,
   detail_level      VARCHAR2  DEFAULT &#39;TYPICAL&#39;,
   format            VARCHAR2  DEFAULT &#39;TEXT&#39;
   container_id      NUMBER    DEFAULT NULL)
 RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10943"></a>Parameters</p>
<div id="ARPLS74450" class="tblformal">
<p class="titleintable"><a id="sthref10944"></a><a id="sthref10945"></a>Table 155-89 REPORT_SINGLE_STATS_OPERATION Function Parameters</p>
<table class="cellalignment4330" title="REPORT_SINGLE_STATS_OPERATION Function Parameters" summary="This table describes the Parameters of DBMS_STATS.REPORT_STATS_OPERATIONS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t98">Parameter</th>
<th class="cellalignment4328" id="r1c2-t98">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t98" headers="r1c1-t98">
<p><code dir="ltr">opid</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t98 r1c2-t98">
<p>Operation ID</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t98" headers="r1c1-t98">
<p><code dir="ltr">detail_level</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t98 r1c2-t98">
<p>Detail level for the content of the report</p>
<ul>
<li>
<p><code dir="ltr">BASIC</code>: The report includes</p>
<p>- operation ID</p>
<p>- operation name</p>
<p>- operation target object</p>
<p>- start time</p>
<p>- end time</p>
<p>- completion status (such as: succeeded, failed)</p>
</li>
<li>
<p><code dir="ltr">TYPICAL</code>: In addition to the information provided at level <code dir="ltr">BASIC</code>, the report includes individual target objects for which statistics are gathered in this operation. Specifically, with regard to operation related details:</p>
<p>- total number of target objects</p>
<p>- total number of successfully completed objects</p>
<p>- total number of failed objects</p>
<p>- total number of timed-out objects (applies to only auto statistics gathering)</p>
<p>With regard to target objects:</p>
<p>- owner and name of each target object</p>
<p>- target object type (such as: table, index)</p>
<p>- start time</p>
<p>- end time</p>
<p>- completion status</p>
</li>
<li>
<p><code dir="ltr">ALL</code>: In addition to the information provided at level <code dir="ltr">TYPICAL</code>, the report includes further information on each target object. Specifically, with regard to operation-related details:</p>
<p>- job name</p>
<p>- session ID</p>
<p>- parameter values</p>
<p>- error message if the operation failed</p>
<p>With regard to target objects:</p>
<p>- job name</p>
<p>- batching details</p>
<p>- estimated cost</p>
<p>- rank in the target list</p>
<p>- columns for which histograms were collected</p>
<p>- list of collected extended statistics (if any)</p>
<p>- reason for including the object in the target list (applies to only automatic statistics gathering operation tasks)</p>
<p>- additional error details if the task has failed.</p>
</li>
</ul>
<p>Note that several fields (such as job name, estimated task cost) in the report are populated only when an operation is executed concurrently (<code dir="ltr">CONCURRENT</code> preference is turned on).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t98" headers="r1c1-t98">
<p><code dir="ltr">format</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t98 r1c2-t98">
<p>Report format:</p>
<ul>
<li>
<p><code dir="ltr">XML</code></p>
</li>
<li>
<p><code dir="ltr">HTML</code></p>
</li>
<li>
<p><code dir="ltr">TEXT</code> (Default)</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t98" headers="r1c1-t98">
<p><code dir="ltr">container_id</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t98 r1c2-t98">
<p>ID of the pluggable database (PDB) on which this operation was performed. Note that in a multitenant environment, operation ID does not uniquely identify an operation. That is, different operations from distinct PDBs may have the same operation ID. Hence, in a multitenant environment, if a PDB ID is not provided, then the report may contain multiple operations. In a typical (non-CDB) database environment, operation ID is unique to each operation.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10946"></a>Usage Notes</p>
<p>To invoke this procedure you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege and the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74451" class="refsect2"><a id="BABFABBC"></a>
<h3 class="refsect2"><a id="sthref10947"></a>REPORT_STATS_OPERATIONS Function</h3>
<p>This function generates a report of all statistics operations that take place between two timestamps which may or may not have been provided. It allows the scope of the report to be narrowed down so that report will include only auto statistics gathering runs. Furthermore, in a multitenant environment, users may optionally provide a set of pluggable database (PDB) IDs so that only statistics operations from the specified pluggable databases will be reported.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10948"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.REPORT_STATS_OPERATIONS (
   detail_level       VARCHAR2 DEFAULT &#39;TYPICAL&#39;,
   format             VARCHAR2 DEFAULT &#39;TEXT&#39;,
   latestN            NUMBER DEFAULT NULL,
   since              TIMESTAMP WITH TIME ZONE DEFAULT NULL,
   until              TIMESTAMP WITH TIME ZONE DEFAULT NULl,
   auto_only          BOOLEAN DEFAULT FALSE,
   container_ids      DBMS_UTILITY.NUMBER_ARRAY DEFAULT DBMS_STATS.NULL_NUMTAB)
 RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10949"></a>Parameters</p>
<div id="ARPLS74452" class="tblformal">
<p class="titleintable"><a id="sthref10950"></a><a id="sthref10951"></a>Table 155-90 REPORT_STATS_OPERATIONS Function Parameters</p>
<table class="cellalignment4330" title="REPORT_STATS_OPERATIONS Function Parameters" summary="This table describes the Parameters of DBMS_STATS.REPORT_STATS_OPERATIONS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t99">Parameter</th>
<th class="cellalignment4328" id="r1c2-t99">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t99" headers="r1c1-t99">
<p><code dir="ltr">detail_level</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t99 r1c2-t99">
<p>Detail level for the content of the report</p>
<ul>
<li>
<p><code dir="ltr">BASIC</code>: The report includes</p>
<p>- operation ID</p>
<p>- operation name</p>
<p>- operation target object</p>
<p>- start time</p>
<p>- end time</p>
<p>- completion status (such as: succeeded, failed)</p>
</li>
<li>
<p><code dir="ltr">TYPICAL</code>: In addition to the information provided at level <code dir="ltr">BASIC</code>, the report includes individual target objects for which statistics are gathered in this operation. Specifically, with regard to operation related details:</p>
<p>- total number of target objects</p>
<p>- total number of successfully completed objects</p>
<p>- total number of failed objects</p>
<p>- total number of timed -out objects (applies to only auto statistics gathering)</p>
</li>
<li>
<p><code dir="ltr">ALL</code>: In addition to the information provided at level <code dir="ltr">TYPICAL</code>, the report includes further information on each target object. Specifically, with regard to operation-related details:</p>
<p>- job name (if the operation was run in a job)</p>
<p>- session ID</p>
<p>- parameter values</p>
<p>- additional error details if the operation has failed</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t99" headers="r1c1-t99">
<p><code dir="ltr">format</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t99 r1c2-t99">
<p>Report format:</p>
<ul>
<li>
<p>XML</p>
</li>
<li>
<p>HTML</p>
</li>
<li>
<p>TEXT (Default)</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t99" headers="r1c1-t99">
<p><code dir="ltr">latestN</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t99 r1c2-t99">
<p>Restricts the report to contain only the latest N operations that took place between the provided time points (since and until). The default value is <code dir="ltr">NULL</code>, meaning that all qualifying operations will be reported.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t99" headers="r1c1-t99">
<p><code dir="ltr">since</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t99 r1c2-t99">
<p>The report will include only statistics operations that started after this timestamp.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t99" headers="r1c1-t99">
<p><code dir="ltr">until</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t99 r1c2-t99">
<p>The report will include only statistics operations that before after this timestamp.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t99" headers="r1c1-t99">
<p><code dir="ltr">auto_only</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t99 r1c2-t99">
<p>When <code dir="ltr">TRUE</code>, the report will contain only auto statistics gathering job runs.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t99" headers="r1c1-t99">
<p><code dir="ltr">container_ids</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t99 r1c2-t99">
<p>A multitenant environment contains one or more pluggable databases (PDBs). <code dir="ltr">container_ids</code> represents a set of PDB IDs so that only statistics operations from the specified PDBs are reported (applies to only multitenant environments).</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10952"></a>Usage Notes</p>
<p>To invoke this procedure you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege and the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10953"></a>Examples</p>
<p>Note that the type for <code dir="ltr">container_ids</code> input parameter is <code dir="ltr">DBMS_UTILITY.NUMBER_ARRAY</code> which is an associative PL/SQL array collection. Although associative array type allows for more flexible <code dir="ltr">harvals</code> table-like organization of entries, this function treats <code dir="ltr">container_ids</code> as a regular table collection with the first ID located at index 1 and the last id located at index <code dir="ltr">container_ids.count</code> without any empty array slot left between any two IDs. An example for 3 container ids is provided.</p>
<pre dir="ltr">DECLARE
    conid_tab  DBMS_UTILITY.NUMBER_ARRAY;
    report clob;
BEGIN
    conid_tab(1) := 124;
    conid_tab(2) := 63;
    conid_tab(3) := 98;
    report := DBMS_STATS.REPORT_STATS_OPERATIONS (container_ids =&gt; conid_tab);
END;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68646" class="refsect2"><a id="i1047505"></a>
<h3 class="refsect2"><a id="sthref10954"></a>RESET_GLOBAL_PREF_DEFAULTS Procedure</h3>
<p>This procedures sets global preference, such as <code dir="ltr">CASCADE</code>, <code dir="ltr">ESTIMATE_PERCENT</code> and <code dir="ltr">GRANULARITY</code>, to default values. This reverses the global preferences set by the <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10955"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.RESET_GLOBAL_PREF_DEFAULTS;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10956"></a>Usage Notes</p>
<p>To invoke this procedure you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege and the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68647" class="refsect2"><a id="BABGHFFF"></a>
<h3 class="refsect2"><a id="sthref10957"></a>RESET_PARAM_DEFAULTS Procedure</h3>
<div class="infobox-note">
<p class="notep1">Note:</p>
This subprogram has been replaced by improved technology and is maintained only for purposes of backward compatibility. In this case, use the <a href="#i1047505">RESET_GLOBAL_PREF_DEFAULTS Procedure</a>.
<p>See also <a href="#i1049539">Deprecated Subprograms</a>.</p>
</div>
<p>This procedure resets the default values of all parameters to Oracle recommended values.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10958"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.RESET_PARAM_DEFAULTS;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68648" class="refsect2"><a id="BABJBFAA"></a>
<h3 class="refsect2"><a id="sthref10959"></a>RESTORE_DATABASE_STATS Procedure</h3>
<p>This procedure restores statistics of all tables of the database as of a specified timestamp (<code dir="ltr">as_of_timestamp</code>).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10960"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.RESTORE_DATABSE_STATS( 
   as_of_timestamp        TIMESTAMP WITH TIME ZONE, 
   force                  BOOLEAN DEFAULT FALSE,
   no_invalidate          BOOLEAN DEFAULT to_no_invalidate_type
                                                    (GET_PARAM(&#39;NO_INVALIDATE&#39;)));
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10961"></a>Parameters</p>
<div id="ARPLS68649" class="tblformal">
<p class="titleintable"><a id="sthref10962"></a><a id="sthref10963"></a>Table 155-91 RESTORE_DATABASE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="RESTORE_DATABASE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.RESTORE_DATBASE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t101">Parameter</th>
<th class="cellalignment4328" id="r1c2-t101">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t101" headers="r1c1-t101">
<p><code dir="ltr">as_of_timestamp</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t101 r1c2-t101">
<p>The timestamp to which to restore statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t101" headers="r1c1-t101">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t101 r1c2-t101">
<p>Restores statistics even if their statistics are locked</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t101" headers="r1c1-t101">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t101 r1c2-t101">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10964"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent values</p>
<p><code dir="ltr">ORA-20006</code>: Unable to restore statistics, statistics history not available</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68650" class="refsect2"><a id="i1047724"></a>
<h3 class="refsect2"><a id="sthref10965"></a>RESTORE_DICTIONARY_STATS Procedure</h3>
<p>This procedure restores statistics of all dictionary tables (tables of &#39;<code dir="ltr">SYS</code>&#39;, &#39;<code dir="ltr">SYSTEM</code>&#39; and RDBMS component schemas) as of a specified timestamp (<code dir="ltr">as_of_timestamp</code>).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10966"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.RESTORE_DICTIONARY_STATS( 
   as_of_timestamp        TIMESTAMP WITH TIME ZONE, 
   force                  BOOLEAN DEFAULT FALSE,
   no_invalidate          BOOLEAN DEFAULT to_no_invalidate_type
                                                    (GET_PARAM(&#39;NO_INVALIDATE&#39;)));
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10967"></a>Parameters</p>
<div id="ARPLS68651" class="tblformal">
<p class="titleintable"><a id="sthref10968"></a><a id="sthref10969"></a>Table 155-92 RESTORE_DICTIONARY_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="RESTORE_DICTIONARY_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.RESTORE_DICTIONARY_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t102">Parameter</th>
<th class="cellalignment4328" id="r1c2-t102">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t102" headers="r1c1-t102">
<p><code dir="ltr">as_of_timestamp</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t102 r1c2-t102">
<p>Timestamp to which to restore statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t102" headers="r1c1-t102">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t102 r1c2-t102">
<p>Restores statistics even if their statistics are locked</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t102" headers="r1c1-t102">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t102 r1c2-t102">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10970"></a>Usage Notes</p>
<p>To run this procedure, you must have the <code dir="ltr">SYSDBA</code> or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10971"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent values</p>
<p><code dir="ltr">ORA-20006</code>: Unable to restore statistics, statistics history not available</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68652" class="refsect2"><a id="i1047603"></a>
<h3 class="refsect2"><a id="sthref10972"></a>RESTORE_FIXED_OBJECTS_STATS Procedure</h3>
<p>This procedure restores statistics of all fixed tables as of a specified timestamp (<code dir="ltr">as_of_timestamp</code>).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10973"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.RESTORE_FIXED_OBJECTS_STATS( 
   as_of_timestamp        TIMESTAMP WITH TIME ZONE, 
   force                  BOOLEAN DEFAULT FALSE,
   no_invalidate          BOOLEAN DEFAULT to_no_invalidate_type
                                                    (GET_PARAM(&#39;NO_INVALIDATE&#39;)));
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10974"></a>Parameters</p>
<div id="ARPLS68653" class="tblformal">
<p class="titleintable"><a id="sthref10975"></a><a id="sthref10976"></a>Table 155-93 RESTORE_FIXED_OBJECTS_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="RESTORE_FIXED_OBJECTS_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.RESTORE_FIXED_OBJECTS_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t103">Parameter</th>
<th class="cellalignment4328" id="r1c2-t103">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t103" headers="r1c1-t103">
<p><code dir="ltr">as_of_timestamp</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t103 r1c2-t103">
<p>The timestamp to which to restore statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t103" headers="r1c1-t103">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t103 r1c2-t103">
<p>Restores statistics even if their statistics are locked</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t103" headers="r1c1-t103">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t103 r1c2-t103">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10977"></a>Usage Notes</p>
<p>To run this procedure, you must have the <code dir="ltr">SYSDBA</code> or <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> system privilege.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10978"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent values</p>
<p><code dir="ltr">ORA-20006</code>: Unable to restore statistics, statistics history not available</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68654" class="refsect2"><a id="i1047376"></a>
<h3 class="refsect2"><a id="sthref10979"></a>RESTORE_SCHEMA_STATS Procedure</h3>
<p>This procedure restores statistics of all tables of a schema as of a specified timestamp (<code dir="ltr">as_of_timestamp</code>).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10980"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.RESTORE_SCHEMA_STATS( 
   ownname                VARCHAR2, 
   as_of_timestamp        TIMESTAMP WITH TIME ZONE, 
   force                  BOOLEAN DEFAULT FALSE,
   no_invalidate          BOOLEAN DEFAULT to_no_invalidate_type
                                                    (GET_PARAM(&#39;NO_INVALIDATE&#39;)));
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10981"></a>Parameters</p>
<div id="ARPLS68655" class="tblformal">
<p class="titleintable"><a id="sthref10982"></a><a id="sthref10983"></a>Table 155-94 RESTORE_SCHEMA_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="RESTORE_SCHEMA_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.RESTORE_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t104">Parameter</th>
<th class="cellalignment4328" id="r1c2-t104">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t104" headers="r1c1-t104">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t104 r1c2-t104">
<p>Schema of the tables for which the statistics are to be restored</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t104" headers="r1c1-t104">
<p><code dir="ltr">as_of_timestamp</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t104 r1c2-t104">
<p>The timestamp to which to restore statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t104" headers="r1c1-t104">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t104 r1c2-t104">
<p>Restores statistics even if their statistics are locked</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t104" headers="r1c1-t104">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t104 r1c2-t104">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10984"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent values</p>
<p><code dir="ltr">ORA-20006</code>: Unable to restore statistics, statistics history not available</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10985"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68656" class="refsect2"><a id="i1049804"></a>
<h3 class="refsect2"><a id="sthref10986"></a>RESTORE_SYSTEM_STATS Procedure</h3>
<p>This procedure restores system statistics as of a specified timestamp (<code dir="ltr">as_of_timestamp</code>).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10987"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.RESTORE_SCHEMA_STATS( 
   as_of_timestamp        TIMESTAMP WITH TIME ZONE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10988"></a>Parameters</p>
<div id="ARPLS68657" class="tblformal">
<p class="titleintable"><a id="sthref10989"></a><a id="sthref10990"></a>Table 155-95 RESTORE_SYSTEM_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="RESTORE_SYSTEM_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.RESTORE_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t105">Parameter</th>
<th class="cellalignment4328" id="r1c2-t105">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t105" headers="r1c1-t105">
<p><code dir="ltr">as_of_timestamp</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t105 r1c2-t105">
<p>The timestamp to which to restore statistics</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10991"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent values</p>
<p><code dir="ltr">ORA-20006</code>: Unable to restore statistics, statistics history not available</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10992"></a>Usage Notes</p>
<p>To run this procedure, you need the <code dir="ltr">GATHER_SYSTEM_STATISTICS</code> role.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68658" class="refsect2"><a id="i1046561"></a>
<h3 class="refsect2"><a id="sthref10993"></a>RESTORE_TABLE_STATS Procedure</h3>
<p>This procedure restores statistics of a table as of a specified timestamp (<code dir="ltr">as_of_timestamp</code>). The procedure will restore statistics of associated indexes and columns as well. If the table statistics were locked at the specified timestamp the procedure will lock the statistics. The procedure will not restore user defined statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10994"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.RESTORE_TABLE_STATS (
   ownname                   VARCHAR2, 
   tabname                   VARCHAR2, 
   as_of_timestamp           TIMESTAMP WITH TIME ZONE,
   restore_cluster_index     BOOLEAN DEFAULT FALSE,
   force                     BOOLEAN DEFAULT FALSE,
   no_invalidate             BOOLEAN DEFAULT to_no_invalidate_type
                                                    (GET_PARAM(&#39;NO_INVALIDATE&#39;)));
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10995"></a>Parameters</p>
<div id="ARPLS68659" class="tblformal">
<p class="titleintable"><a id="sthref10996"></a><a id="sthref10997"></a>Table 155-96 RESTORE_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="RESTORE_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.RESTORE_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t106">Parameter</th>
<th class="cellalignment4328" id="r1c2-t106">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t106" headers="r1c1-t106">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t106 r1c2-t106">
<p>The schema of the table for which the statistics are to be restored</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t106" headers="r1c1-t106">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t106 r1c2-t106">
<p>The table name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t106" headers="r1c1-t106">
<p><code dir="ltr">as_of_timestamp</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t106 r1c2-t106">
<p>The timestamp to which to restore statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t106" headers="r1c1-t106">
<p><code dir="ltr">restore_cluster_index</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t106 r1c2-t106">
<p>If the table is part of a cluster, restore statistics of the cluster index if set to <code dir="ltr">TRUE</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t106" headers="r1c1-t106">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t106 r1c2-t106">
<p>Restores statistics even if the table statistics are locked. If the table statistics were not locked at the specified timestamp, it unlocks the statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t106" headers="r1c1-t106">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t106 r1c2-t106">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10998"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent values</p>
<p><code dir="ltr">ORA-20006</code>: Unable to restore statistics, statistics history not available</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10999"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68660" class="refsect2"><a id="i997460"></a>
<h3 class="refsect2"><a id="sthref11000"></a>SEED_COL_USAGE Procedure</h3>
<p>This procedure seeds column usage information from a statements in the specified SQL tuning set. It iterates over the SQL statements in the specified SQL tuning set, compiles them and seeds column usage information for the columns that appear in these statements. You can monitor the workload on the system for given amount of time and seed the and seed the column usage information based on the columns that appear in statements executed during the monitoring window.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11001"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.SEED_COL_USAGE (
   sqlset_name    IN    VARCHAR2,
   owner_name     IN    VARCHAR2,
   time_limit     IN    POSITIVE DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11002"></a>Parameters</p>
<div id="ARPLS68661" class="tblformal">
<p class="titleintable"><a id="sthref11003"></a><a id="sthref11004"></a>Table 155-97 SEED_COL_USAGE Procedure Parameters</p>
<table class="cellalignment4330" title="SEED_COL_USAGE Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SEED_COL_USAGE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t107">Parameter</th>
<th class="cellalignment4328" id="r1c2-t107">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t107" headers="r1c1-t107">
<p><code dir="ltr">sqlset_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t107 r1c2-t107">
<p>Name of the SQL tuning set</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t107" headers="r1c1-t107">
<p><code dir="ltr">owner_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t107 r1c2-t107">
<p>Owner of the SQL tuning set</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t107" headers="r1c1-t107">
<p><code dir="ltr">time_limit</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t107 r1c2-t107">
<p>Time limit (in seconds)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11005"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11006"></a>Usage Notes</p>
<p>To invoke this procedure you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege and the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege.</p>
<p>This procedure also records group of columns. Extensions for the recorded group of columns can be created using the <a href="#BABHFIBI">CREATE_EXTENDED_STATS Function</a> procedure. If <code dir="ltr">sqlset_name</code> and <code dir="ltr">owner_name</code> are <code dir="ltr">NULL</code>, it records the column (group) usage information for the statements executed in the system in next <code dir="ltr">time_limit</code> seconds.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11007"></a>Examples</p>
<p>The following example turns on monitoring for 5 minutes or 300 seconds.</p>
<pre dir="ltr">BEGIN
   DBMS_STATS.SEED_COL_USAGE (null,null,300);
END;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73135" class="refsect2"><a id="CHDHGCED"></a>
<h3 class="refsect2"><a id="sthref11008"></a>SET_COLUMN_STATS Procedures</h3>
<p>This procedure sets column-related information. In the version of this procedure that deals with user-defined statistics, the statistics type specified is the type to store in the dictionary, in addition to the actual user-defined statistics. If this statistics type is <code dir="ltr">NULL</code>, the statistics type associated with the index or column is stored.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11009"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.SET_COLUMN_STATS (
   ownname       VARCHAR2, 
   tabname       VARCHAR2, 
   colname       VARCHAR2, 
   partname      VARCHAR2 DEFAULT NULL,
   stattab       VARCHAR2 DEFAULT NULL, 
   statid        VARCHAR2 DEFAULT NULL,
   distcnt       NUMBER DEFAULT NULL,
   density       NUMBER DEFAULT NULL,
   nullcnt       NUMBER DEFAULT NULL,
   srec          StatRec DEFAULT NULL,
   avgclen       NUMBER DEFAULT NULL,
   flags         NUMBER DEFAULT NULL,
   statown       VARCHAR2 DEFAULT NULL,
   no_invalidate BOOLEAN DEFAULT to_no_invalidate_type(
                                    get_param(&#39;NO_INVALIDATE&#39;)),
   force         BOOLEAN DEFAULT FALSE);
</pre>
<p>Use the following for user-defined statistics:</p>
<pre dir="ltr">DBMS_STATS.SET_COLUMN_STATS (
   ownname       VARCHAR2, 
   tabname       VARCHAR2, 
   colname       VARCHAR2, 
   partname      VARCHAR2 DEFAULT NULL,
   stattab       VARCHAR2 DEFAULT NULL, 
   statid        VARCHAR2 DEFAULT NULL,
   ext_stats     RAW,
   stattypown    VARCHAR2 DEFAULT NULL, 
   stattypname   VARCHAR2 DEFAULT NULL, 
   statown       VARCHAR2 DEFAULT NULL,
   no_invalidate BOOLEAN DEFAULT to_no_invalidate_type(
                                    get_param(&#39;NO_INVALIDATE&#39;)),
   force         BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11010"></a>Parameters</p>
<div id="ARPLS73136" class="tblformal">
<p class="titleintable"><a id="sthref11011"></a><a id="sthref11012"></a>Table 155-98 SET_COLUMN_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="SET_COLUMN_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_COLUMN_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t108">Parameter</th>
<th class="cellalignment4328" id="r1c2-t108">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t108" headers="r1c1-t108">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t108 r1c2-t108">
<p>Name of the schema.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t108" headers="r1c1-t108">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t108 r1c2-t108">
<p>Name of the table to which this column belongs.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t108" headers="r1c1-t108">
<p><code dir="ltr">colname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t108 r1c2-t108">
<p>Name of the column or extension</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t108" headers="r1c1-t108">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t108 r1c2-t108">
<p>Name of the table partition in which to store the statistics. If the table is partitioned and <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then the statistics are stored at the global table level.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t108" headers="r1c1-t108">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t108 r1c2-t108">
<p>User statistics table identifier describing where to store the statistics. If <code dir="ltr">stattab</code> is <code dir="ltr">NULL</code>, then the statistics are stored directly in the dictionary.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t108" headers="r1c1-t108">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t108 r1c2-t108">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code> (Only pertinent if <code dir="ltr">stattab</code> is not <code dir="ltr">NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t108" headers="r1c1-t108">
<p><code dir="ltr">ext_stats</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t108 r1c2-t108">
<p>User-defined statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t108" headers="r1c1-t108">
<p><code dir="ltr">stattypown</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t108 r1c2-t108">
<p>Schema of the statistics type</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t108" headers="r1c1-t108">
<p><code dir="ltr">stattypname</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t108 r1c2-t108">
<p>Name of the statistics type</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t108" headers="r1c1-t108">
<p><code dir="ltr">distcnt</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t108 r1c2-t108">
<p>Number of distinct values</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t108" headers="r1c1-t108">
<p><code dir="ltr">density</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t108 r1c2-t108">
<p>Column density. If this value is <code dir="ltr">NULL</code> and if <code dir="ltr">distcnt</code> is not <code dir="ltr">NULL</code>, then density is derived from <code dir="ltr">distcnt</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t108" headers="r1c1-t108">
<p><code dir="ltr">nullcnt</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t108 r1c2-t108">
<p>Number of <code dir="ltr">NULLs</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t108" headers="r1c1-t108">
<p><code dir="ltr">srec</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t108 r1c2-t108">
<p><code dir="ltr">StatRec</code> structure filled in by a call to <code dir="ltr">PREPARE_COLUMN_VALUES</code> or <code dir="ltr">GET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t108" headers="r1c1-t108">
<p><code dir="ltr">avgclen</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t108 r1c2-t108">
<p>Average length for the column (in bytes)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t108" headers="r1c1-t108">
<p><code dir="ltr">flags</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t108 r1c2-t108">
<p>For internal Oracle use (should be left as <code dir="ltr">NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t108" headers="r1c1-t108">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t108 r1c2-t108">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t108" headers="r1c1-t108">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t108 r1c2-t108">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r19c1-t108" headers="r1c1-t108">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r19c1-t108 r1c2-t108">
<p>Sets the values even if statistics of the column are locked</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11013"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or inconsistent input values</p>
<p><code dir="ltr">ORA-20005</code>: Object statistics are locked</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11014"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68662" class="refsect2"><a id="BEIICAFD"></a>
<h3 class="refsect2"><a id="sthref11015"></a>SET_DATABASE_PREFS Procedure</h3>
<p>This procedure is used to set the statistics preferences of all the tables, excluding the tables owned by Oracle. These tables can by included by passing <code dir="ltr">TRUE</code> for the <code dir="ltr">add_sys</code> parameter.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11016"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.SET_DATABASE_PREFS (
    pname            IN   VARCHAR2,
    pvalue           IN   VARCHAR2,
    add_sys          IN   BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11017"></a>Parameters</p>
<div id="ARPLS68663" class="tblformal">
<p class="titleintable"><a id="sthref11018"></a><a id="sthref11019"></a>Table 155-99 SET_DATABASE_PREFS Procedure Parameters</p>
<table class="cellalignment4330" title="SET_DATABASE_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_SCHEMA_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t109">Parameter</th>
<th class="cellalignment4328" id="r1c2-t109">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t109" headers="r1c1-t109">
<p><code dir="ltr">pname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t109 r1c2-t109">
<p>Preference name. The existing value for following preferences can be deleted and default preference values will be used:</p>
<ul>
<li>
<p><code dir="ltr">CASCADE</code></p>
</li>
<li>
<p><code dir="ltr">DEGREE</code></p>
</li>
<li>
<p><code dir="ltr">ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">METHOD_OPT</code></p>
</li>
<li>
<p><code dir="ltr">NO_INVALIDATE</code></p>
</li>
<li>
<p><code dir="ltr">GRANULARITY</code></p>
</li>
<li>
<p><code dir="ltr">PUBLISH</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL_STALENESS</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL_LEVEL</code></p>
</li>
<li>
<p><code dir="ltr">STALE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">GLOBAL_TEMP_TABLE_STATS</code></p>
</li>
<li>
<p><code dir="ltr">TABLE_CACHED_BLOCKS</code></p>
</li>
<li>
<p><code dir="ltr">OPTIONS</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t109" headers="r1c1-t109">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r3c1-t109 r1c2-t109">
<p><code dir="ltr">CASCADE</code> - The value determines whether or not index statistics are collected as part of gathering table statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t109" headers="r1c1-t109">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r4c1-t109 r1c2-t109">
<p><code dir="ltr">DEGREE</code> - The value determines degree of parallelism used for gathering statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t109" headers="r1c1-t109">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r5c1-t109 r1c2-t109">
<p><code dir="ltr">ESTIMATE_PERCENT</code> - The value determines the percentage of rows to estimate. The valid range is [0.000001,100]. Use the constant <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t109" headers="r1c1-t109">
<p><code dir="ltr">method_opt</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t109 r1c2-t109">
<p>When setting preference on global, schema, database or dictionary level, only<code dir="ltr">&#39;FOR ALL&#39;</code> syntax is allowed.:</p>
<ul>
<li>
<p><code dir="ltr">FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code dir="ltr">[size_clause]</code></p>
</li>
</ul>
<p><code dir="ltr">size_clause</code> is defined as <code dir="ltr">size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<br/>
<code dir="ltr">- integer</code> : Number of histogram buckets. Must be in the range [1,2048].<br/>
<code dir="ltr">- REPEAT</code> : Collects histograms only on the columns that already have histograms.<br/>
<code dir="ltr">- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br/>
<code dir="ltr">- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.
<p>The default is <code dir="ltr">FOR ALL COLUMNS SIZE AUTO</code>.The value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t109" headers="r1c1-t109">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r7c1-t109 r1c2-t109">
<p><code dir="ltr">NO_INVALIDATE</code> - The value controls the invalidation of dependent cursors of the tables for which statistics are being gathered. Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code> to have Oracle decide when to invalidate dependent cursors. This is the default.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t109" headers="r1c1-t109">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r8c1-t109 r1c2-t109">
<p><code dir="ltr">GRANULARITY</code> - The value determines granularity of statistics to collect (only pertinent if the table is partitioned)</p>
<p><code dir="ltr">&#39;ALL&#39;</code> - gathers all (subpartition, partition, and global) statistics</p>
<p><code dir="ltr">&#39;AUTO&#39;</code>- determines the granularity based on the partitioning type. This is the default value.</p>
<p><code dir="ltr">&#39;DEFAULT&#39;</code> - gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the &#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; for this functionality. Note that the default value is now &#39;<code dir="ltr">AUTO</code>&#39;.</p>
<p><code dir="ltr">&#39;GLOBAL&#39;</code> - gathers global statistics</p>
<p>&#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; - gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code dir="ltr">&#39;PARTITION</code> &#39;- gathers partition-level statistics</p>
<p><code dir="ltr">&#39;SUBPARTITION&#39;</code> - gathers subpartition-level statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t109" headers="r1c1-t109">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r9c1-t109 r1c2-t109">
<p><code dir="ltr">PUBLISH</code> - This value determines whether or not newly gathered statistics will be published once the gather job has completed. Prior to Oracle Database 11<span class="italic">g</span>, Release 1 (11.1), once a statistic gathering job completed the new statistics were automatically published into the dictionary tables. The user now has the ability to gather statistics but not publish them immediately. This allows the DBA to test the new statistics before publishing them.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t109" headers="r1c1-t109">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r10c1-t109 r1c2-t109">
<p><code dir="ltr">INCREMENTAL</code> - This value determines whether or not the global statistics of a partitioned table will be maintained without doing a full table scan. With partitioned tables it is very common to load new data into a new partition. As new partitions are added and data loaded, the global table statistics need to be kept up to date. Oracle will update the global table statistics by scanning only the partitions that have been changed instead of the entire table if the following conditions hold:</p>
<ul>
<li>
<p>the <code dir="ltr">INCREMENTAL</code> value for the partitioned table is set to <code dir="ltr">TRUE</code>;</p>
</li>
<li>
<p>the <code dir="ltr">PUBLISH</code> value for the partitioned table is set to <code dir="ltr">TRUE</code>;</p>
</li>
<li>
<p>the user specifies <code dir="ltr">AUTO_SAMPLE_SIZE</code> for <code dir="ltr">ESTIMATE_PERCENT</code> and <code dir="ltr">AUTO</code> for <code dir="ltr">GRANULARITY</code> when gathering statistics on the table.</p>
</li>
</ul>
<p>If the <code dir="ltr">INCREMENTAL</code> value for the partitioned table was set to <code dir="ltr">FALSE</code> (default value), a full table scan is used to maintain the global statistics which is a much more resource intensive and time-consuming operation for large tables.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t109" headers="r1c1-t109">&nbsp;</td>
<td class="cellalignment4329" headers="r11c1-t109 r1c2-t109">
<p><code dir="ltr">INCREMENTAL_LEVEL</code> - This value controls what synopses to collect when <code dir="ltr">INCREMENTAL</code> preference is set to <code dir="ltr">TRUE</code> It takes two values:</p>
<ul>
<li>
<p><code dir="ltr">TABLE</code> - table level synopses are gathered. This is used when you want to exchange this table with a partition. You can run <code dir="ltr">GATHER_TABLE_STATS</code> on this table with <code dir="ltr">INCREMENTAL</code> to <code dir="ltr">TRUE</code> and <code dir="ltr">INCREMENTAL_LEVEL</code> to <code dir="ltr">TABLE</code> before the exchange. The result is that table level synopses are gathered on this table (currently Oracle supports only table level synopses on non-predestined tables). Once the exchange occurs, the partition will have synopses which come from the table level synopses of the table before exchange. This preference value can be only used in the <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. It is not allowed in the <code dir="ltr">SET_GLOBAL/DATABASE/SCHEMA_PREFS</code> procedures.</p>
</li>
<li>
<p><code dir="ltr">PARTITION</code> - partition level synopses are gathered. This is the default value. If PARTITION is set on a non partitioned table, no synopses are gathered.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t109" headers="r1c1-t109">&nbsp;</td>
<td class="cellalignment4329" headers="r12c1-t109 r1c2-t109">
<p><code dir="ltr">INCREMENTAL_STALENESS</code> - This value controls how we decide a partition or subpartition as stale. It takes an enumeration of values which may be multiple, such as <code dir="ltr">&#39;USE_STALE_PERCENT&#39;</code>, <code dir="ltr">&#39;USE_LOCKED_STATS&#39;</code>.</p>
<ul>
<li>
<p><code dir="ltr">USE_STALE_PERCENT</code> - a partition/subpartition is not considered as stale if DML changes are less than the <code dir="ltr">STALE_PERCENT</code> preference value</p>
</li>
<li>
<p><code dir="ltr">USE_LOCKED_STATS</code> - locked partitions/subpartitions statistics are not considered as stale, regardless of DML changes</p>
</li>
<li>
<p><code dir="ltr">NULL</code> - this is the default value, meaning a partition or subpartition is considered as stale as long as it has any DML changes. When the default value is used, statistics gathered in incremental mode are guaranteed to be the same as the statistics gathered in non incremental mode. When a non default value is used, the statistics gathered in incremental mode might be less accurate than those gathered in non-incremental mode</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t109" headers="r1c1-t109">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r13c1-t109 r1c2-t109">
<p><code dir="ltr">STALE_PERCENT</code> - This value determines the percentage of rows in a table that have to change before the statistics on that table are deemed stale and should be regathered. The valid domain for <code dir="ltr">stale_percent</code> is non-negative numbers. The default value is 10, meaning a table having more than 10% of changes is considered as stale.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t109" headers="r1c1-t109">&nbsp;</td>
<td class="cellalignment4329" headers="r14c1-t109 r1c2-t109">
<p><code dir="ltr">GLOBAL_TEMP_TABLE_STATS</code> - This controls whether the statistics gathered for a global temporary table should be stored as shared statistics or session statistics. It takes two values:</p>
<ul>
<li>
<p><code dir="ltr">SHARED</code> - All sessions see the same set of statistics</p>
</li>
<li>
<p><code dir="ltr">SESSION</code> - Statistics gathered by the <a href="#i1036461">GATHER_TABLE_STATS Procedure</a> on a global temporary table are session specific, and hence are only going to be used by the queries issued in the same session as the statistics gathering process. Session-specific statistics are deleted when a session is ended.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t109" headers="r1c1-t109">&nbsp;</td>
<td class="cellalignment4329" headers="r15c1-t109 r1c2-t109">
<p><code dir="ltr">TABLE_CACHED_BLOCKS</code> - The average number of blocks cached in the buffer cache for any table we can assume when gathering the index clustering factor.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t109" headers="r1c1-t109">&nbsp;</td>
<td class="cellalignment4329" headers="r16c1-t109 r1c2-t109">
<p><code dir="ltr">OPTIONS</code> - Determines the <code dir="ltr">options</code> parameter used in the <a href="#i1036461">GATHER_TABLE_STATS Procedure</a>. The preference takes two values:</p>
<ul>
<li>
<p><code dir="ltr">GATHER</code> (default) - Gathers statistics for all objects in the table</p>
</li>
<li>
<p><code dir="ltr">GATHER AUTO</code> - Gathers all necessary statistics automatically. Oracle recommends setting <code dir="ltr">GATHER AUTO</code> on tables that undergo bulk loads during which statistics have been gathered. Note that this is is only applicable to tables that do not have <code dir="ltr">INCREMENTAL</code> turned on. The <a href="#i1036461">GATHER_TABLE_STATS Procedure</a> on these tables with <code dir="ltr">GATHER AUTO</code> options will skip regathering the already fresh statistics.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t109" headers="r1c1-t109">
<p><code dir="ltr">pvalue</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t109 r1c2-t109">
<p>Preference value. If <code dir="ltr">NULL</code> is specified, it will set the Oracle default value.s</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t109" headers="r1c1-t109">
<p><code dir="ltr">add_sys</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t109 r1c2-t109">
<p>Value <code dir="ltr">TRUE</code> will include the Oracle-owned tables</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11020"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or illegal input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11021"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to have the <code dir="ltr">SYSDBA</code> role or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privileges.</p>
</li>
<li>
<p>Both arguments are of type <code dir="ltr">VARCHAR2</code> and values are enclosed in quotes, even when they represent numbers.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11022"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.SET_DATABASE_PREFS(&#39;CASCADE&#39;, &#39;DBMS_STATS.AUTO_CASCADE&#39;);
DBMS_STATS.SET_DATABASE_PREFS(&#39;ESTIMATE_PERCENT&#39;,&#39;9&#39;);
DBMS_STATS.SET_DATABASE_PREFS(&#39;DEGREE&#39;,&#39;99&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68664" class="refsect2"><a id="BEIEAFDF"></a>
<h3 class="refsect2"><a id="sthref11023"></a>SET_GLOBAL_PREFS Procedure</h3>
<p>This procedure is used to set the global statistics preferences.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11024"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.SET_GLOBAL_PREFS (
    pname     IN   VARCHAR2,
    pvalue    IN   VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11025"></a>Parameters</p>
<div id="ARPLS68665" class="tblformal">
<p class="titleintable"><a id="sthref11026"></a><a id="sthref11027"></a>Table 155-100 SET_GLOBAL_PREFS Procedure Parameters</p>
<table class="cellalignment4330" title="SET_GLOBAL_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_GLOBAL_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t110">Parameter</th>
<th class="cellalignment4328" id="r1c2-t110">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t110" headers="r1c1-t110">
<p><code dir="ltr">pname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t110 r1c2-t110">
<p>Preference name. The default value for the following preferences can be set:</p>
<ul>
<li>
<p><code dir="ltr">AUTOSTATS_TARGET</code></p>
</li>
<li>
<p><code dir="ltr">CASCADE</code></p>
</li>
<li>
<p><code dir="ltr">CONCURRENT</code></p>
</li>
<li>
<p><code dir="ltr">DEGREE</code></p>
</li>
<li>
<p><code dir="ltr">ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">GLOBAL_TEMP_TABLE_STATS</code></p>
</li>
<li>
<p><code dir="ltr">GRANULARITY</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL_LEVEL</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL_STALENESS</code></p>
</li>
<li>
<p><code dir="ltr">METHOD_OPT</code></p>
</li>
<li>
<p><code dir="ltr">NO_INVALIDATE</code></p>
</li>
<li>
<p><code dir="ltr">PUBLISH</code></p>
</li>
<li>
<p><code dir="ltr">STALE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">TABLE_CACHED_BLOCKS</code></p>
</li>
<li>
<p><code dir="ltr">OPTIONS</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t110" headers="r1c1-t110">&nbsp;</td>
<td class="cellalignment4329" headers="r3c1-t110 r1c2-t110">
<p><code dir="ltr">AUTOSTATS_TARGET</code> - This preference is applicable only for auto statistics collection. The value of this parameter controls the objects considered for statistics collection. It takes the following values:</p>
<ul>
<li>
<p><code dir="ltr">&#39;ALL&#39;</code> - Statistics collected for all objects in system</p>
</li>
<li>
<p><code dir="ltr">&#39;ORACLE&#39;</code> - Statistics collected for all Oracle owned objects</p>
</li>
<li>
<p><code dir="ltr">&#39;AUTO&#39;</code> - Oracle decides on which objects to collect statistics</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t110" headers="r1c1-t110">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r4c1-t110 r1c2-t110">
<p><code dir="ltr">CASCADE</code> - Determines whether or not index statistics are collected as part of gathering table statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t110" headers="r1c1-t110">&nbsp;</td>
<td class="cellalignment4329" headers="r5c1-t110 r1c2-t110">
<p><code dir="ltr">CONCURRENT</code> - This preference determines whether statistics will be gathered concurrently on multiple objects, or serially, one object at a time:</p>
<ul>
<li>
<p><code dir="ltr">&#39;MANUAL&#39;</code> - Concurrency will be turned on only for manual statistics gathering.</p>
</li>
<li>
<p><code dir="ltr">&#39;AUTOMATIC&#39;</code>: Concurrency will be turned on only for the automatic statistics gathering.</p>
</li>
<li>
<p><code dir="ltr">&#39;ALL&#39;</code>: Concurrency will be turned on for both manual and automatic statistics gathering.</p>
</li>
<li>
<p><code dir="ltr">&#39;OFF&#39;</code>: Concurrency will be turned off for both manual and automatic statistics</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t110" headers="r1c1-t110">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r6c1-t110 r1c2-t110">
<p><code dir="ltr">DEGREE</code> - Determines degree of parallelism used for gathering statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t110" headers="r1c1-t110">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r7c1-t110 r1c2-t110">
<p><code dir="ltr">ESTIMATE_PERCENT</code> - Determines the percentage of rows to estimate. The valid range is [0.000001,100]. Use the constant <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t110" headers="r1c1-t110">&nbsp;</td>
<td class="cellalignment4329" headers="r8c1-t110 r1c2-t110">
<p><code dir="ltr">GLOBAL_TEMP_TABLE_STATS</code> - This preference takes two values: <code dir="ltr">SHARED</code> or <code dir="ltr">SESSION</code> (default).</p>
<ul>
<li>
<p><code dir="ltr">SHARED</code> - All sessions see the same set of statistics</p>
</li>
<li>
<p><code dir="ltr">SESSION</code> - Statistics gathered by the <a href="#i1036461">GATHER_TABLE_STATS Procedure</a> on a global temporary table are session specific, and hence are only going to be used by the queries issued in the same session as the statistics gathering process. Session-specific statistics are deleted when a session is ended.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t110" headers="r1c1-t110">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r9c1-t110 r1c2-t110">
<p><code dir="ltr">GRANULARITY</code> - Determines granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code dir="ltr">&#39;ALL&#39;</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code dir="ltr">&#39;AUTO&#39;</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code dir="ltr">&#39;DEFAULT&#39;</code> - gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the &#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; for this functionality. Note that the default value is now &#39;<code dir="ltr">AUTO</code>&#39;.</p>
<p><code dir="ltr">&#39;GLOBAL&#39;</code> - Gathers global statistics</p>
<p>&#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; - gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code dir="ltr">&#39;PARTITION</code> &#39;- gathers partition-level statistics</p>
<p><code dir="ltr">&#39;SUBPARTITION&#39;</code> - gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t110" headers="r1c1-t110">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r10c1-t110 r1c2-t110">
<p><code dir="ltr">INCREMENTAL</code> - This value determines whether or not the global statistics of a partitioned table will be maintained without doing a full table scan. With partitioned tables it is very common to load new data into a new partition. As new partitions are added and data loaded, the global table statistics need to be kept up to date. Oracle will update the global table statistics by scanning only the partitions that have been changed instead of the entire table if the following conditions hold:</p>
<ul>
<li>
<p><code dir="ltr">INCREMENTAL</code> value for the partitioned table is set to <code dir="ltr">TRUE</code></p>
</li>
<li>
<p><code dir="ltr">PUBLISH</code> value for the partitioned table is set to <code dir="ltr">TRUE</code>;</p>
</li>
<li>
<p>User specifies <code dir="ltr">AUTO_SAMPLE_SIZE</code> for <code dir="ltr">ESTIMATE_PERCENT</code> and <code dir="ltr">AUTO</code> for <code dir="ltr">GRANULARITY</code> when gathering statistics on the table</p>
</li>
</ul>
<p>If the <code dir="ltr">INCREMENTAL</code> value for the partitioned table was set to <code dir="ltr">FALSE</code> (default value), a full table scan is used to maintain the global statistics which is a much more resource intensive and time-consuming operation for large tables.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t110" headers="r1c1-t110">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r11c1-t110 r1c2-t110">
<p><code dir="ltr">METHOD_OPT</code> - The value controls column statistics collection and histogram creation. It accepts either of the following options, or both in combination:</p>
<ul>
<li>
<p><code dir="ltr">FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code dir="ltr">[size_clause]</code></p>
</li>
</ul>
<p><code dir="ltr">size_clause</code> is defined as <code dir="ltr">size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<br/>
<code dir="ltr">- integer</code>: Number of histogram buckets. Must be in the range [1,2048].<br/>
<code dir="ltr">- REPEAT</code> : Collects histograms only on the columns that already have histograms<br/>
<code dir="ltr">- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns<br/>
<code dir="ltr">- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns<br/>
- <code dir="ltr">column_name</code> : name of a column<br/>
- <code dir="ltr">extension :</code> can be either a column group in the format of <code dir="ltr">(column_name, colume_name [, ...])</code> or an expression
<p>The default is <code dir="ltr">FOR ALL COLUMNS SIZE AUTO</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t110" headers="r1c1-t110">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r12c1-t110 r1c2-t110">
<p><code dir="ltr">NO_INVALIDATE</code> - Controls the invalidation of dependent cursors of the tables for which statistics are being gathered. Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code> to have Oracle decide when to invalidate dependent cursors. This is the default.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t110" headers="r1c1-t110">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r13c1-t110 r1c2-t110">
<p><code dir="ltr">PUBLISH</code> - This value determines whether or not newly gathered statistics will be published once the gather job has completed. Prior to Oracle Database 11<span class="italic">g</span>, Release 1 (11.1), once a statistic gathering job completed the new statistics were automatically published into the dictionary tables. The user now has the ability to gather statistics but not publish them immediately. This allows the DBA to test the new statistics before publishing them.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t110" headers="r1c1-t110">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r14c1-t110 r1c2-t110">
<p><code dir="ltr">STALE_PERCENT</code> - Determines the percentage of rows in a table that have to change before the statistics on that table are deemed stale and should be regathered. The valid domain for <code dir="ltr">stale_percent</code> is non-negative numbers.The default value is 10%. Note that if you set <code dir="ltr">stale_percent</code> to zero the <code dir="ltr">AUTO</code> <code dir="ltr">STATS</code> gathering job will gather statistics for this table every time a row in the table is modified.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t110" headers="r1c1-t110">&nbsp;</td>
<td class="cellalignment4329" headers="r15c1-t110 r1c2-t110">
<p><code dir="ltr">TABLE_CACHED_BLOCKS</code> - The average number of blocks cached in the buffer cache for any table we can assume when gathering the index clustering factor.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t110" headers="r1c1-t110">&nbsp;</td>
<td class="cellalignment4329" headers="r16c1-t110 r1c2-t110">
<p><code dir="ltr">OPTIONS</code> - Determines the <code dir="ltr">options</code> parameter used in the <a href="#i1036461">GATHER_TABLE_STATS Procedure</a>. The preference takes two values:</p>
<ul>
<li>
<p><code dir="ltr">GATHER</code> (default) - Gathers statistics for all objects in the table</p>
</li>
<li>
<p><code dir="ltr">GATHER AUTO</code> - Gathers all necessary statistics automatically. Oracle recommends setting <code dir="ltr">GATHER AUTO</code> on tables that undergo bulk loads during which statistics have been gathered. Note that this is is only applicable to tables that do not have <code dir="ltr">INCREMENTAL</code> turned on. The <a href="#i1036461">GATHER_TABLE_STATS Procedure</a> on these tables with <code dir="ltr">GATHER AUTO</code> options will skip regathering the already fresh statistics.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t110" headers="r1c1-t110">
<p><code dir="ltr">pvalue</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t110 r1c2-t110">
<p>Preference value. If <code dir="ltr">NULL</code> is specified, it will set the Oracle default value.s</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11028"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or illegal input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11029"></a>Usage Notes</p>
<ul>
<li>
<p>This setting is honored only of there is no preference specified for the table to be analyzed.</p>
</li>
<li>
<p>To run this procedure, you need to have the <code dir="ltr">SYSDBA</code> or both <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege.</p>
</li>
<li>
<p>Both arguments are of type <code dir="ltr">VARCHAR2</code> and values are enclosed in quotes, even when they represent numbers.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11030"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.SET_GLOBAL_PREFS(&#39;ESTIMATE_PERCENT&#39;,&#39;9&#39;);
DBMS_STATS.SET_GLOBAL_PREFS(&#39;DEGREE&#39;,&#39;99&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68666" class="refsect2"><a id="i997579"></a>
<h3 class="refsect2"><a id="sthref11031"></a>SET_INDEX_STATS Procedures</h3>
<p>These procedures set index-related information. In the version of this procedure that deals with user-defined statistics, the statistics type specified is the type to store in the dictionary, in addition to the actual user-defined statistics. If this statistics type is NULL, the statistics type associated with the index or column is stored.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11032"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.SET_INDEX_STATS (
   ownname       VARCHAR2, 
   indname       VARCHAR2,
   partname      VARCHAR2  DEFAULT NULL,
   stattab       VARCHAR2  DEFAULT NULL, 
   statid        VARCHAR2  DEFAULT NULL,
   numrows       NUMBER    DEFAULT NULL, 
   numlblks      NUMBER    DEFAULT NULL,
   numdist       NUMBER    DEFAULT NULL, 
   avglblk       NUMBER    DEFAULT NULL,
   avgdblk       NUMBER    DEFAULT NULL, 
   clstfct       NUMBER    DEFAULT NULL,
   indlevel      NUMBER    DEFAULT NULL, 
   flags         NUMBER    DEFAULT NULL,
   statown       VARCHAR2  DEFAULT NULL,
   no_invalidate BOOLEAN   DEFAULT to_no_invalidate_type(
                                    get_param(&#39;NO_INVALIDATE&#39;)),
   guessq        NUMBER    DEFAULT NULL,
   cachedblk     NUMBER    DEFAULT NULL,
   cachehit      NUMBER    DEFUALT NULL,
   force         BOOLEAN   DEFAULT FALSE);
</pre>
<p>Use the following for user-defined statistics:</p>
<pre dir="ltr">DBMS_STATS.SET_INDEX_STATS (
   ownname       VARCHAR2, 
   indname       VARCHAR2,
   partname      VARCHAR2  DEFAULT NULL,
   stattab       VARCHAR2  DEFAULT NULL, 
   statid        VARCHAR2  DEFAULT NULL,
   ext_stats     RAW,
   stattypown    VARCHAR2 DEFAULT NULL, 
   stattypname   VARCHAR2 DEFAULT NULL, 
   statown       VARCHAR2 DEFAULT NULL,
   no_invalidate BOOLEAN DEFAULT to_no_invalidate_type(
                                    get_param(&#39;NO_INVALIDATE&#39;)),
   cachedblk     NUMBER    DEFAULT NULL,
   cachehit      NUMBER    DEFUALT NULL,
   force         BOOLEAN   DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11033"></a>Parameters</p>
<div id="ARPLS68667" class="tblformal">
<p class="titleintable"><a id="sthref11034"></a><a id="sthref11035"></a>Table 155-101 SET_INDEX_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="SET_INDEX_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_INDEX_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t111">Parameter</th>
<th class="cellalignment4328" id="r1c2-t111">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t111" headers="r1c1-t111">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t111 r1c2-t111">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t111" headers="r1c1-t111">
<p><code dir="ltr">indname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t111 r1c2-t111">
<p>Name of the index</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t111" headers="r1c1-t111">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t111 r1c2-t111">
<p>Name of the index partition in which to store the statistics. If the index is partitioned and if <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then the statistics are stored at the global index level.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t111" headers="r1c1-t111">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t111 r1c2-t111">
<p>User statistics table identifier describing where to store the statistics. If <code dir="ltr">stattab</code> is <code dir="ltr">NULL</code>, then the statistics are stored directly in the dictionary.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t111" headers="r1c1-t111">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t111 r1c2-t111">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code> (Only pertinent if <code dir="ltr">stattab</code> is not <code dir="ltr">NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t111" headers="r1c1-t111">
<p><code dir="ltr">ext_stats</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t111 r1c2-t111">
<p>User-defined statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t111" headers="r1c1-t111">
<p><code dir="ltr">stattypown</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t111 r1c2-t111">
<p>Schema of the statistics type</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t111" headers="r1c1-t111">
<p><code dir="ltr">stattypname</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t111 r1c2-t111">
<p>Name of the statistics type</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t111" headers="r1c1-t111">
<p><code dir="ltr">numrows</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t111 r1c2-t111">
<p>Number of rows in the index (partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t111" headers="r1c1-t111">
<p><code dir="ltr">numlblks</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t111 r1c2-t111">
<p>Number of leaf blocks in the index (partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t111" headers="r1c1-t111">
<p><code dir="ltr">numdist</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t111 r1c2-t111">
<p>Number of distinct keys in the index (partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t111" headers="r1c1-t111">
<p><code dir="ltr">avglblk</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t111 r1c2-t111">
<p>Average integral number of leaf blocks in which each distinct key appears for this index (partition). If not provided, then this value is derived from <code dir="ltr">numlblks</code> and <code dir="ltr">numdist</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t111" headers="r1c1-t111">
<p><code dir="ltr">avgdblk</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t111 r1c2-t111">
<p>Average integral number of data blocks in the table pointed to by a distinct key for this index (partition). If not provided, then this value is derived from <code dir="ltr">clstfct</code> and <code dir="ltr">numdist</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t111" headers="r1c1-t111">
<p><code dir="ltr">clstfct</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t111 r1c2-t111">
<p>See <code dir="ltr">clustering_factor</code> column of the <code dir="ltr">all_indexes</code> view for a description</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t111" headers="r1c1-t111">
<p><code dir="ltr">indlevel</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t111 r1c2-t111">
<p>Height of the index (partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t111" headers="r1c1-t111">
<p><code dir="ltr">flags</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t111 r1c2-t111">
<p>For internal Oracle use (should be left as <code dir="ltr">NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t111" headers="r1c1-t111">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t111 r1c2-t111">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r19c1-t111" headers="r1c1-t111">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r19c1-t111 r1c2-t111">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r20c1-t111" headers="r1c1-t111">
<p><code dir="ltr">guessq</code></p>
</td>
<td class="cellalignment4329" headers="r20c1-t111 r1c2-t111">
<p>Guess quality. See the <code dir="ltr">pct_direct_access</code> column of the <code dir="ltr">all_indexes</code> view for a description.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r21c1-t111" headers="r1c1-t111">
<p><code dir="ltr">cachedblk</code></p>
</td>
<td class="cellalignment4329" headers="r21c1-t111 r1c2-t111">
<p>The average number of blocks in the buffer cache for the segment (index/table/index partition/table partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r22c1-t111" headers="r1c1-t111">
<p><code dir="ltr">cachehit</code></p>
</td>
<td class="cellalignment4329" headers="r22c1-t111 r1c2-t111">
<p>The average cache hit ratio for the segment (index/table/index partition/table partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r23c1-t111" headers="r1c1-t111">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r23c1-t111 r1c2-t111">
<p>Sets the values even if statistics of the index are locked</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11036"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</li>
<li>
<p>The Optimizer uses the cached data to estimate number of cached blocks for index or statistics table access. The total cost of the operation will be combined from the I/O cost of reading not cached blocks from disk, the CPU cost of getting cached blocks from the buffer cache, and the CPU cost of processing the data.</p>
</li>
<li>
<p>Oracle maintains <code dir="ltr">cachedblk</code> and <code dir="ltr">cachehit</code> at all times but uses correspondent caching statistics for optimization as part of the table and index statistics only when the user calls <code dir="ltr">DBMS_STATS.GATHER_[TABLE/INDEX/SCHEMA/DATABASE]_STATS</code> procedure for auto mode or <code dir="ltr">DBMS_STATS.GATHER_SYSTEM_STATS</code> for manual mode. In order to prevent the user from utilizing inaccurate and unreliable data, the optimizer will compute a &#39;confidence factor&#39; for each <code dir="ltr">cachehit</code> and a <code dir="ltr">cachedblk</code> for each object. If the &#39;confidence factor&#39; for the value meets confidence criteria, this value will be used, otherwise the defaults will be used.</p>
</li>
<li>
<p>The automatic maintenance algorithm for object caching statistics assumes that there is only one major workload for the system and adjusts statistics to this workload, ignoring other &#34;minor&#34; workloads. If this is not the case, you must use manual mode for maintaining object caching statistics.</p>
</li>
<li>
<p>The object caching statistics maintenance algorithm for auto mode prevents you from using statistics in the following situations</p>
<ul>
<li>
<p>When not enough data has been analyzed, such as when an object has been recently create</p>
</li>
<li>
<p>When the system does not have one major workload resulting in averages not corresponding to real values.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11037"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid input value</p>
<p><code dir="ltr">ORA-20005</code>: Object statistics are locked</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68668" class="refsect2"><a id="i1048566"></a>
<h3 class="refsect2"><a id="sthref11038"></a>SET_PARAM Procedure</h3>
<div class="infobox-note">
<p class="notep1">Note:</p>
This subprogram has been replaced by improved technology and is maintained only for purposes of backward compatibility. In this case, use the <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>.
<p>See also <a href="#i1049539">Deprecated Subprograms</a>.</p>
</div>
<p>This procedure sets default values for parameters of <code dir="ltr">DBMS_STATS</code> procedures. You can use the <code dir="ltr">GET_PARAM</code> <code dir="ltr">Function</code> to get the current default value of a parameter.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11039"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.SET_PARAM (
   pname      IN    VARCHAR2, 
   pval       IN    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11040"></a>Parameters</p>
<div id="ARPLS68669" class="tblformal">
<p class="titleintable"><a id="sthref11041"></a><a id="sthref11042"></a>Table 155-102 SET_PARAM Procedure Parameters</p>
<table class="cellalignment4330" title="SET_PARAM Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_PARAM subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t113">Parameter</th>
<th class="cellalignment4328" id="r1c2-t113">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t113" headers="r1c1-t113">
<p><code dir="ltr">pname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t113 r1c2-t113">
<p>The parameter name The default value for following parameters can be set.</p>
<ul>
<li>
<p><code dir="ltr">CASCADE</code> - The default value for <code dir="ltr">CASCADE</code> set by <code dir="ltr">SET_PARAM</code> is not used by export/import procedures.It is used only by gather procedures.</p>
</li>
<li>
<p><code dir="ltr">DEGREE</code></p>
</li>
<li>
<p><code dir="ltr">ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">METHOD_OPT</code></p>
</li>
<li>
<p><code dir="ltr">NO_INVALIDATE</code></p>
</li>
<li>
<p><code dir="ltr">GRANULARITY</code></p>
</li>
<li>
<p><code dir="ltr">AUTOSTATS_TARGET</code> - This parameter is applicable only for auto statistics collection. The value of this parameter controls the objects considered for statistics collection (see <code dir="ltr">pval</code>)</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t113" headers="r1c1-t113">
<p><code dir="ltr">pval</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t113 r1c2-t113">
<p>The parameter value. If <code dir="ltr">NULL</code> is specified, it will set the default value determined by Oracle. When <code dir="ltr">pname</code> is <code dir="ltr">AUTOSTATS_TARGET</code>, the following are valid values:</p>
<ul>
<li>
<p><code dir="ltr">&#39;ALL&#39;</code> - Statistics are collected for all objects in the system</p>
</li>
<li>
<p><code dir="ltr">&#39;ORACLE&#39;</code> - Statistics are collected for all Oracle owned objects</p>
</li>
<li>
<p><code dir="ltr">&#39;AUTO&#39;</code> - Oracle decides for which objects to collect statistics</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11043"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you must have the <code dir="ltr">SYSDBA</code> or both the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> and <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privileges.</p>
</li>
<li>
<p>Note that both arguments are of type <code dir="ltr">VARCHAR2</code> and the values need to be enclosed in quotes even when they represent numbers.</p>
</li>
<li>
<p>Note also the difference between <code dir="ltr">NULL</code> and <code dir="ltr">&#39;NULL&#39;</code>:</p>
<ul>
<li>
<p>When <code dir="ltr">NULL</code> is unquoted, this sets the parameter to the value Oracle recommends.</p>
</li>
<li>
<p>In the case of the quoted <code dir="ltr">&#39;NULL&#39;</code>, this sets the value of the parameter to <code dir="ltr">NULL</code>.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11044"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or illegal input value</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11045"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.SET_PARAM(&#39;CASCADE&#39;,&#39;DBMS_STATS.AUTO_CASCADE&#39;);
DBMS_STATS.SET_PARAM(&#39;ESTIMATE_PERCENT&#39;,&#39;5&#39;);
DBMS_STATS.SET_PARAM(&#39;DEGREE&#39;,&#39;NULL&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74509" class="refsect2"><a id="BABHFFDA"></a>
<h3 class="refsect2"><a id="sthref11046"></a>SET_PROCESSING_RATE Procedure</h3>
<p>This procedure sets the value of rate of processing for a given operation.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11047"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.SET_PROCESSING_RATE (
   opname      IN    VARCHAR2, 
   procrate    IN    NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11048"></a>Parameters</p>
<div id="ARPLS74510" class="tblformal">
<p class="titleintable"><a id="sthref11049"></a><a id="sthref11050"></a>Table 155-103 SET_PROCESSING_RATE Procedure Parameters</p>
<table class="cellalignment4330" title="SET_PROCESSING_RATE Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_PARAM subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t114">Parameter</th>
<th class="cellalignment4328" id="r1c2-t114">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t114" headers="r1c1-t114">
<p><code dir="ltr">opname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t114 r1c2-t114">
<p>Name of the operation</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t114" headers="r1c1-t114">
<p><code dir="ltr">procrate</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t114 r1c2-t114">
<p>Processing rate. Valid values are as follows: <code dir="ltr">ALL</code>, <code dir="ltr">CPU</code>, <code dir="ltr">CPU_ACCESS</code>, <code dir="ltr">CPU_AGGR</code>, <code dir="ltr">CPU_BYTES_PER_SEC</code>, <code dir="ltr">CPU_FILTER</code>, <code dir="ltr">CPU_GBY</code>, <code dir="ltr">CPU_HASH_JOIN</code>, <code dir="ltr">CPU_JOIN</code>, <code dir="ltr">CPU_NL_JOIN</code>, <code dir="ltr">CPU_RANDOM_ACCESS</code>, <code dir="ltr">CPU_SEQUENTIAL_ACCESS</code>, <code dir="ltr">CPU_SM_JOIN</code>, <code dir="ltr">CPU_SORT</code>, <code dir="ltr">IO</code>, <code dir="ltr">IO_ACCESS</code>, <code dir="ltr">IO_BYTES_PER_SEC</code>, <code dir="ltr">IO_RANDOM_ACCESS</code>, <code dir="ltr">IO_SEQUENTIAL_ACCESS</code>, <code dir="ltr">HASH</code>, <code dir="ltr">AGGR</code>, <code dir="ltr">MEMCMP</code>, <code dir="ltr">MEMCPY</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11051"></a>Usage Notes</p>
<ul>
<li>
<p>You require the <code dir="ltr">OPTIMIZER_PROCESSING_RATE</code> role to run this procedure.</p>
</li>
<li>
<p><code dir="ltr">AUTO</code> <code dir="ltr">DOP</code> uses processing rates to determine the optimal degree of parallelism for a SQL statement.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11052"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or illegal input value</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68670" class="refsect2"><a id="BEIDJHAH"></a>
<h3 class="refsect2"><a id="sthref11053"></a>SET_SCHEMA_PREFS Procedure</h3>
<p>This procedure is used to set the statistics preferences of all the tables owned by the specified owner name.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11054"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.SET_SCHEMA_PREFS (
    ownname   IN   VARCHAR2,
    pname     IN   VARCHAR2,
    pvalue    IN   VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11055"></a>Parameters</p>
<div id="ARPLS68671" class="tblformal">
<p class="titleintable"><a id="sthref11056"></a><a id="sthref11057"></a>Table 155-104 SET_SCHEMA_PREFS Procedure Parameters</p>
<table class="cellalignment4330" title="SET_SCHEMA_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_SCHEMA_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t115">Parameter</th>
<th class="cellalignment4328" id="r1c2-t115">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t115" headers="r1c1-t115">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t115 r1c2-t115">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t115" headers="r1c1-t115">
<p><code dir="ltr">pname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t115 r1c2-t115">
<p>Preference name. The default value for the following preferences can be set:</p>
<ul>
<li>
<p><code dir="ltr">CASCADE</code></p>
</li>
<li>
<p><code dir="ltr">DEGREE</code></p>
</li>
<li>
<p><code dir="ltr">ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">GLOBAL_TEMP_TABLE_STATS</code></p>
</li>
<li>
<p><code dir="ltr">GRANULARITY</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL_LEVEL</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL_STALENESS</code></p>
</li>
<li>
<p><code dir="ltr">METHOD_OPT</code></p>
</li>
<li>
<p><code dir="ltr">NO_INVALIDATE</code></p>
</li>
<li>
<p><code dir="ltr">PUBLISH</code></p>
</li>
<li>
<p><code dir="ltr">STALE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">TABLE_CACHED_BLOCKS</code></p>
</li>
<li>
<p><code dir="ltr">OPTIONS</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t115" headers="r1c1-t115">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r4c1-t115 r1c2-t115">
<p><code dir="ltr">CASCADE</code> - Determines whether or not index statistics are collected as part of gathering table statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t115" headers="r1c1-t115">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r5c1-t115 r1c2-t115">
<p><code dir="ltr">DEGREE</code> - Determines degree of parallelism used for gathering statistics</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t115" headers="r1c1-t115">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r6c1-t115 r1c2-t115">
<p><code dir="ltr">ESTIMATE_PERCENT</code> - Determines the percentage of rows to estimate. The valid range is [0.000001,100]. Use the constant <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t115" headers="r1c1-t115">&nbsp;</td>
<td class="cellalignment4329" headers="r7c1-t115 r1c2-t115">
<p><code dir="ltr">GLOBAL_TEMP_TABLE_STATS</code> - This preference takes two values: <code dir="ltr">SHARED</code> or <code dir="ltr">SESSION</code> (default).</p>
<ul>
<li>
<p><code dir="ltr">SHARED</code> - All sessions see the same set of statistics</p>
</li>
<li>
<p><code dir="ltr">SESSION</code> - Statistics gathered by the <a href="#i1036461">GATHER_TABLE_STATS Procedure</a> on a global temporary table are session specific, and hence are only going to be used by the queries issued in the same session as the statistics gathering process. Session-specific statistics are deleted when a session is ended.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t115" headers="r1c1-t115">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r8c1-t115 r1c2-t115">
<p><code dir="ltr">GRANULARITY</code> - Determines granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code dir="ltr">&#39;ALL&#39;</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code dir="ltr">&#39;AUTO&#39;</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code dir="ltr">&#39;DEFAULT&#39;</code> - gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the &#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; for this functionality. Note that the default value is now &#39;<code dir="ltr">AUTO</code>&#39;.</p>
<p><code dir="ltr">&#39;GLOBAL&#39;</code> - Gathers global statistics</p>
<p>&#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; - gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code dir="ltr">&#39;PARTITION</code> &#39;- gathers partition-level statistics</p>
<p><code dir="ltr">&#39;SUBPARTITION&#39;</code> - gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t115" headers="r1c1-t115">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r9c1-t115 r1c2-t115">
<p><code dir="ltr">INCREMENTAL</code> - This value determines whether or not the global statistics of a partitioned table will be maintained without doing a full table scan. With partitioned tables it is very common to load new data into a new partition. As new partitions are added and data loaded, the global table statistics need to be kept up to date. Oracle will update the global table statistics by scanning only the partitions that have been changed instead of the entire table if the following conditions hold:</p>
<ul>
<li>
<p><code dir="ltr">INCREMENTAL</code> value for the partitioned table is set to <code dir="ltr">TRUE</code></p>
</li>
<li>
<p><code dir="ltr">PUBLISH</code> value for the partitioned table is set to <code dir="ltr">TRUE</code>;</p>
</li>
<li>
<p>User specifies <code dir="ltr">AUTO_SAMPLE_SIZE</code> for <code dir="ltr">ESTIMATE_PERCENT</code> and <code dir="ltr">AUTO</code> for <code dir="ltr">GRANULARITY</code> when gathering statistics on the table</p>
</li>
</ul>
<p>If the <code dir="ltr">INCREMENTAL</code> value for the partitioned table was set to <code dir="ltr">FALSE</code> (default value), a full table scan is used to maintain the global statistics which is a much more resource intensive and time-consuming operation for large tables.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t115" headers="r1c1-t115">&nbsp;</td>
<td class="cellalignment4329" headers="r10c1-t115 r1c2-t115">
<p><code dir="ltr">INCREMENTAL_LEVEL</code> - This value controls what synopses to collect when <code dir="ltr">INCREMENTAL</code> preference is set to <code dir="ltr">TRUE</code> It takes two values:</p>
<ul>
<li>
<p><code dir="ltr">TABLE</code> - table level synopses are gathered. This is used when you want to exchange this table with a partition. You can run <code dir="ltr">GATHER_TABLE_STATS</code> on this table with <code dir="ltr">INCREMENTAL</code> to <code dir="ltr">TRUE</code> and <code dir="ltr">INCREMENTAL_LEVEL</code> to <code dir="ltr">TABLE</code> before the exchange. The result is that table level synopses are gathered on this table (currently Oracle supports only table level synopses on non-predestined tables). Once the exchange occurs, the partition will have synopses which come from the table level synopses of the table before exchange. This preference value can be only used in the <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. It is not allowed in the <code dir="ltr">SET_GLOBAL/DATABASE/SCHEMA_PREFS</code> procedures.</p>
</li>
<li>
<p><code dir="ltr">PARTITION</code> - partition level synopses are gathered. This is the default value. If PARTITION is set on a non partitioned table, no synopses are gathered.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t115" headers="r1c1-t115">&nbsp;</td>
<td class="cellalignment4329" headers="r11c1-t115 r1c2-t115">
<p><code dir="ltr">INCREMENTAL_STALENESS</code> - This value controls how we decide a partition or subpartition as stale. It takes an enumeration of values which may be multiple, such as <code dir="ltr">&#39;USE_STALE_PERCENT&#39;</code>, <code dir="ltr">&#39;USE_LOCKED_STATS&#39;</code>.</p>
<ul>
<li>
<p><code dir="ltr">USE_STALE_PERCENT</code> - a partition/subpartition is not considered as stale if DML changes are less than the <code dir="ltr">STALE_PERCENT</code> preference value</p>
</li>
<li>
<p><code dir="ltr">USE_LOCKED_STATS</code> - locked partitions/subpartitions statistics are not considered as stale, regardless of DML changes</p>
</li>
<li>
<p><code dir="ltr">NULL</code> - this is the default value, meaning a partition or subpartition is considered as stale as long as it has any DML changes. When the default value is used, statistics gathered in incremental mode are guaranteed to be the same as the statistics gathered in non incremental mode. When a non default value is used, the statistics gathered in incremental mode might be less accurate than those gathered in non-incremental mode</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t115" headers="r1c1-t115">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r12c1-t115 r1c2-t115">
<p><code dir="ltr">METHOD_OPT</code> - The value controls column statistics collection and histogram creation. It accepts either of the following options, or both in combination:</p>
<ul>
<li>
<p><code dir="ltr">FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code dir="ltr">[size_clause]</code></p>
</li>
</ul>
<p><code dir="ltr">size_clause</code> is defined as <code dir="ltr">size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<br/>
<code dir="ltr">- integer</code>: Number of histogram buckets. Must be in the range [1,2048].<br/>
<code dir="ltr">- REPEAT</code> : Collects histograms only on the columns that already have histograms<br/>
<code dir="ltr">- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns<br/>
<code dir="ltr">- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns<br/>
- <code dir="ltr">column_name</code> : name of a column<br/>
- <code dir="ltr">extension :</code> can be either a column group in the format of <code dir="ltr">(column_name, colume_name [, ...])</code> or an expression
<p>The default is <code dir="ltr">FOR ALL COLUMNS SIZE AUTO</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t115" headers="r1c1-t115">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r13c1-t115 r1c2-t115">
<p><code dir="ltr">NO_INVALIDATE</code> - Controls the invalidation of dependent cursors of the tables for which statistics are being gathered. Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code> to have Oracle decide when to invalidate dependent cursors. This is the default.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t115" headers="r1c1-t115">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r14c1-t115 r1c2-t115">
<p><code dir="ltr">PUBLISH</code> - This value determines whether or not newly gathered statistics will be published once the gather job has completed. Prior to Oracle Database 11<span class="italic">g</span>, Release 1 (11.1), once a statistic gathering job completed the new statistics were automatically published into the dictionary tables. The user now has the ability to gather statistics but not publish them immediately. This allows the DBA to test the new statistics before publishing them.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t115" headers="r1c1-t115">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r15c1-t115 r1c2-t115">
<p><code dir="ltr">STALE_PERCENT</code> - Determines the percentage of rows in a table that have to change before the statistics on that table are deemed stale and should be regathered. The valid domain for <code dir="ltr">stale_percent</code> is non-negative numbers.The default value is 10%. Note that if you set <code dir="ltr">stale_percent</code> to zero the <code dir="ltr">AUTO</code> <code dir="ltr">STATS</code> gathering job will gather statistics for this table every time a row in the table is modified.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t115" headers="r1c1-t115">&nbsp;</td>
<td class="cellalignment4329" headers="r16c1-t115 r1c2-t115">
<p><code dir="ltr">TABLE_CACHED_BLOCKS</code> - The average number of blocks cached in the buffer cache for any table we can assume when gathering the index clustering factor.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t115" headers="r1c1-t115">&nbsp;</td>
<td class="cellalignment4329" headers="r17c1-t115 r1c2-t115">
<p><code dir="ltr">OPTIONS</code> - Determines the <code dir="ltr">options</code> parameter used in the <a href="#i1036461">GATHER_TABLE_STATS Procedure</a>. The preference takes two values:</p>
<ul>
<li>
<p><code dir="ltr">GATHER</code> (default) - Gathers statistics for all objects in the table</p>
</li>
<li>
<p><code dir="ltr">GATHER AUTO</code> - Gathers all necessary statistics automatically. Oracle recommends setting <code dir="ltr">GATHER AUTO</code> on tables that undergo bulk loads during which statistics have been gathered. Note that this is only applicable to tables that do not have <code dir="ltr">INCREMENTAL</code> turned on. The <a href="#i1036461">GATHER_TABLE_STATS Procedure</a> on these tables with <code dir="ltr">GATHER AUTO</code> options will skip regathering the already fresh statistics.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t115" headers="r1c1-t115">
<p><code dir="ltr">pvalue</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t115 r1c2-t115">
<p>Preference value. If <code dir="ltr">NULL</code> is specified, it will set the Oracle default value.s</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11058"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or illegal input value</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11059"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to connect as owner, or have the <code dir="ltr">SYSDBA</code> privilege, or have the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege.</p>
</li>
<li>
<p>Both arguments are of type <code dir="ltr">VARCHAR2</code> and values are enclosed in quotes, even when they represent numbers.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11060"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.SET_SCHEMA_PREFS(&#39;SH&#39;,&#39;CASCADE&#39;, &#39;DBMS_STATS.AUTO_CASCADE&#39;);
DBMS_STATS.SET_SCHEMA_PREFS(&#39;SH&#39; &#39;ESTIMATE_PERCENT&#39;,&#39;9&#39;);
DBMS_STATS.SET_SCHEMA_PREFS(&#39;SH&#39;, &#39;DEGREE&#39;,&#39;99&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68672" class="refsect2"><a id="i997707"></a>
<h3 class="refsect2"><a id="sthref11061"></a>SET_SYSTEM_STATS Procedure</h3>
<p>This procedure sets systems statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11062"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.SET_SYSTEM_STATS (
   pname          VARCHAR2,
   pvalue         NUMBER,
   stattab   IN   VARCHAR2 DEFAULT NULL, 
   statid    IN   VARCHAR2 DEFAULT NULL,
   statown   IN   VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11063"></a>Parameters</p>
<div id="ARPLS68673" class="tblformal">
<p class="titleintable"><a id="sthref11064"></a><a id="sthref11065"></a>Table 155-105 SET_SYSTEM_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="SET_SYSTEM_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t116">Parameter</th>
<th class="cellalignment4328" id="r1c2-t116">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t116" headers="r1c1-t116">
<p><code dir="ltr">pname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t116 r1c2-t116">
<p>The parameter name to get, which can have one of the following values:</p>
<ul>
<li>
<p><code dir="ltr">iotfrspeed</code>&mdash;I/O transfer speed in bytes for each millisecond</p>
</li>
<li>
<p><code dir="ltr">ioseektim</code> - Seek time + latency time + operating system overhead time, in milliseconds</p>
</li>
<li>
<p><code dir="ltr">sreadtim</code> - Average time to read single block (random read), in milliseconds</p>
</li>
<li>
<p><code dir="ltr">mreadtim</code> - Average time to read an mbrc block at once (sequential read), in milliseconds</p>
</li>
<li>
<p><code dir="ltr">cpuspeed</code> - Average number of CPU cycles for each second, in millions, captured for the workload (statistics collected using &#39;<code dir="ltr">INTERVAL</code>&#39; or &#39;<code dir="ltr">START</code>&#39; and &#39;<code dir="ltr">STOP</code>&#39; options)</p>
</li>
<li>
<p><code dir="ltr">cpuspeednw</code> - Average number of CPU cycles for each second, in millions, captured for the no-workload (statistics collected using &#39;<code dir="ltr">NOWORKLOAD</code>&#39; option.</p>
</li>
<li>
<p><code dir="ltr">mbrc</code> - Average multiblock read count for sequential read, in blocks</p>
</li>
<li>
<p><code dir="ltr">maxthr</code> - Maximum I/O system throughput, in bytes/second</p>
</li>
<li>
<p><code dir="ltr">slavethr</code> - Average slave I/O throughput, in bytes/second</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t116" headers="r1c1-t116">
<p><code dir="ltr">pvalue</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t116 r1c2-t116">
<p>Parameter value to get</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t116" headers="r1c1-t116">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t116 r1c2-t116">
<p>Identifier of the user statistics table where the statistics will be obtained. If <code dir="ltr">stattab</code> is null, the statistics will be obtained from the dictionary.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t116" headers="r1c1-t116">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t116 r1c2-t116">
<p>Optional identifier associated with the statistics saved in the <code dir="ltr">stattab</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t116" headers="r1c1-t116">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t116 r1c2-t116">
<p>Schema containing <code dir="ltr">stattab</code> (if different from current schema)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11066"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid input value</p>
<p><code dir="ltr">ORA-20002</code>: Bad user statistics table; may need to be upgraded</p>
<p><code dir="ltr">ORA-20003</code>: Unable to set system statistics</p>
<p><code dir="ltr">ORA-20004</code>: Parameter does not exist</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11067"></a>Usage Notes</p>
<p>To run this procedure, you need the <code dir="ltr">GATHER_SYSTEM_STATISTICS</code> role.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68674" class="refsect2"><a id="BEIBJJHC"></a>
<h3 class="refsect2"><a id="sthref11068"></a>SET_TABLE_PREFS Procedure</h3>
<p>This procedure is used to set the statistics preferences of the specified table in the specified schema.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11069"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.SET_TABLE_PREFS (
    ownname    IN  VARCHAR2,
    tabname    IN  VARCHAR2,
    pname      IN  VARCHAR2,
    pvalue     IN  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11070"></a>Parameters</p>
<div id="ARPLS68675" class="tblformal">
<p class="titleintable"><a id="sthref11071"></a><a id="sthref11072"></a>Table 155-106 SET_TABLE_PREFS Procedure Parameters</p>
<table class="cellalignment4330" title="SET_TABLE_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_TABLE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t117">Parameter</th>
<th class="cellalignment4328" id="r1c2-t117">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t117" headers="r1c1-t117">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t117 r1c2-t117">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t117" headers="r1c1-t117">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t117 r1c2-t117">
<p>Table name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t117" headers="r1c1-t117">
<p><code dir="ltr">pname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t117 r1c2-t117">
<p>Preference name. The default value for following preferences can be set:</p>
<ul>
<li>
<p><code dir="ltr">CASCADE</code></p>
</li>
<li>
<p><code dir="ltr">DEGREE</code></p>
</li>
<li>
<p><code dir="ltr">ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">GRANULARITY</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL_LEVEL</code></p>
</li>
<li>
<p><code dir="ltr">INCREMENTAL_STALENESS</code></p>
</li>
<li>
<p><code dir="ltr">METHOD_OPT</code></p>
</li>
<li>
<p><code dir="ltr">NO_INVALIDATE</code></p>
</li>
<li>
<p><code dir="ltr">PUBLISH</code></p>
</li>
<li>
<p><code dir="ltr">STALE_PERCENT</code></p>
</li>
<li>
<p><code dir="ltr">TABLE_CACHED_BLOCKS</code></p>
</li>
<li>
<p><code dir="ltr">OPTIONS</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t117" headers="r1c1-t117">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r5c1-t117 r1c2-t117">
<p><code dir="ltr">CASCADE</code> - Determines whether or not index statistics are collected as part of gathering table statistics<code dir="ltr">.</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t117" headers="r1c1-t117">&nbsp;</td>
<td class="cellalignment4329" headers="r6c1-t117 r1c2-t117">
<p><code dir="ltr">CONCURRENT</code> - This preference determines whether statistics will be gathered concurrently on multiple objects, or serially, one object at a time:</p>
<ul>
<li>
<p><code dir="ltr">&#39;MANUAL&#39;</code> - Concurrency will be turned on only for manual statistics gathering.</p>
</li>
<li>
<p><code dir="ltr">&#39;AUTOMATIC&#39;</code>: Concurrency will be turned on only for the automatic statistics gathering.</p>
</li>
<li>
<p><code dir="ltr">&#39;ALL&#39;</code>: Concurrency will be turned on for both manual and automatic statistics gathering.</p>
</li>
<li>
<p><code dir="ltr">&#39;OFF&#39;</code>: Concurrency will be turned off for both manual and automatic statistics</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t117" headers="r1c1-t117">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r7c1-t117 r1c2-t117">
<p><code dir="ltr">DEGREE</code> - Determines degree of parallelism used for gathering statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t117" headers="r1c1-t117">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r8c1-t117 r1c2-t117">
<p><code dir="ltr">ESTIMATE_PERCENT</code> - Determines the percentage of rows to estimate. The valid range is [0.000001,100]. Use the constant <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t117" headers="r1c1-t117">&nbsp;</td>
<td class="cellalignment4329" headers="r9c1-t117 r1c2-t117">
<p><code dir="ltr">GLOBAL_TEMP_TABLE_STATS</code> - This controls whether the statistics gathered for a global temporary table should be stored as shared statistics or session statistics. It takes two values:</p>
<ul>
<li>
<p><code dir="ltr">SHARED</code> - All sessions see the same set of statistics</p>
</li>
<li>
<p><code dir="ltr">SESSION</code> - Statistics gathered by the <a href="#i1036461">GATHER_TABLE_STATS Procedure</a> on a global temporary table are session specific, and hence are only going to be used by the queries issued in the same session as the statistics gathering process. Session-specific statistics are deleted when a session is ended.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t117" headers="r1c1-t117">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r10c1-t117 r1c2-t117">
<p><code dir="ltr">GRANULARITY</code> - Determines granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code dir="ltr">&#39;ALL&#39;</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code dir="ltr">&#39;AUTO&#39;</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code dir="ltr">&#39;DEFAULT&#39;</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the &#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; for this functionality. Note that the default value is now &#39;<code dir="ltr">AUTO</code>&#39;.</p>
<p><code dir="ltr">&#39;GLOBAL&#39;</code> - Gathers global statistics</p>
<p>&#39;<code dir="ltr">GLOBAL AND PARTITION</code>&#39; - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code dir="ltr">&#39;PARTITION</code> &#39;- Gathers partition-level statistics</p>
<p><code dir="ltr">&#39;SUBPARTITION&#39;</code> - Gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t117" headers="r1c1-t117">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r11c1-t117 r1c2-t117">
<p><code dir="ltr">INCREMENTAL</code> - Determines whether or not the global statistics of a partitioned table will be maintained without doing a full table scan. With partitioned tables it is very common to load new data into a new partition. As new partitions are added and data loaded, the global table statistics need to be kept up to date. Oracle will update the global table statistics by scanning only the partitions that have been changed instead of the entire table if the following conditions hold:</p>
<ul>
<li>
<p><code dir="ltr">INCREMENTAL</code> value for the partitioned table is set to <code dir="ltr">TRUE</code>;</p>
</li>
<li>
<p><code dir="ltr">PUBLISH</code> value for the partitioned table is set to <code dir="ltr">TRUE</code>;</p>
</li>
<li>
<p>User specifies <code dir="ltr">AUTO_SAMPLE_SIZE</code> for <code dir="ltr">ESTIMATE_PERCENT</code> and <code dir="ltr">AUTO</code> for <code dir="ltr">GRANULARITY</code> when gathering statistics on the table.</p>
</li>
</ul>
<p>If the <code dir="ltr">INCREMENTAL</code> value for the partitioned table was set to <code dir="ltr">FALSE</code> (default value), a full table scan is used to maintain the global statistics which is a much more resource intensive and time-consuming operation for large tables.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t117" headers="r1c1-t117">&nbsp;</td>
<td class="cellalignment4329" headers="r12c1-t117 r1c2-t117">
<p><code dir="ltr">INCREMENTAL_LEVEL</code> - This value controls what synopses to collect when <code dir="ltr">INCREMENTAL</code> preference is set to <code dir="ltr">TRUE</code> It takes two values:</p>
<ul>
<li>
<p><code dir="ltr">TABLE</code> - table level synopses are gathered. This is used when you want to exchange this table with a partition. You can run <code dir="ltr">GATHER_TABLE_STATS</code> on this table with <code dir="ltr">INCREMENTAL</code> to <code dir="ltr">TRUE</code> and <code dir="ltr">INCREMENTAL_LEVEL</code> to <code dir="ltr">TABLE</code> before the exchange. The result is that table level synopses are gathered on this table (currently Oracle supports only table level synopses on non-predestined tables). Once the exchange occurs, the partition will have synopses which come from the table level synopses of the table before exchange. This preference value can be only used in the <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. It is not allowed in the <code dir="ltr">SET_GLOBAL/DATABASE/SCHEMA_PREFS</code> procedures.</p>
</li>
<li>
<p><code dir="ltr">PARTITION</code> - partition level synopses are gathered. This is the default value. If PARTITION is set on a non partitioned table, no synopses are gathered.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t117" headers="r1c1-t117">&nbsp;</td>
<td class="cellalignment4329" headers="r13c1-t117 r1c2-t117">
<p><code dir="ltr">INCREMENTAL_STALENESS</code> - This value controls how we decide a partition or subpartition as stale. It takes an enumeration of values which may be multiple, such as <code dir="ltr">&#39;USE_STALE_PERCENT&#39;</code>, <code dir="ltr">&#39;USE_LOCKED_STATS&#39;</code>.</p>
<ul>
<li>
<p><code dir="ltr">USE_STALE_PERCENT</code> - a partition/subpartition is not considered as stale if DML changes are less than the <code dir="ltr">STALE_PERCENT</code> preference value</p>
</li>
<li>
<p><code dir="ltr">USE_LOCKED_STATS</code> - locked partitions/subpartitions statistics are not considered as stale, regardless of DML changes</p>
</li>
<li>
<p><code dir="ltr">NULL</code> - this is the default value, meaning a partition or subpartition is considered as stale as long as it has any DML changes. When the default value is used, statistics gathered in incremental mode are guaranteed to be the same as the statistics gathered in non incremental mode. When a non default value is used, the statistics gathered in incremental mode might be less accurate than those gathered in non-incremental mode</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t117" headers="r1c1-t117">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r14c1-t117 r1c2-t117">
<p><code dir="ltr">METHOD_OPT</code> - The value controls column statistics collection and histogram creation. It accepts either of the following options, or both in combination:</p>
<ul>
<li>
<p><code dir="ltr">FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code dir="ltr">[size_clause]</code></p>
</li>
</ul>
<p><code dir="ltr">size_clause</code> is defined as <code dir="ltr">size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<br/>
<code dir="ltr">- integer</code>: Number of histogram buckets. Must be in the range [1,2048].<br/>
<code dir="ltr">- REPEAT</code> : Collects histograms only on the columns that already have histograms<br/>
<code dir="ltr">- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns<br/>
<code dir="ltr">- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns<br/>
- <code dir="ltr">column_name</code> : name of a column<br/>
- <code dir="ltr">extension :</code> can be either a column group in the format of <code dir="ltr">(column_name, colume_name [, ...])</code> or an expression
<p>The default is <code dir="ltr">FOR ALL COLUMNS SIZE AUTO</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t117" headers="r1c1-t117">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r15c1-t117 r1c2-t117">
<p><code dir="ltr">NO_INVALIDATE</code> - The value controls the invalidation of dependent cursors of the tables for which statistics are being gathered. Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code> to have Oracle decide when to invalidate dependent cursors. This is the default.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t117" headers="r1c1-t117">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r16c1-t117 r1c2-t117">
<p><code dir="ltr">PUBLISH</code> - Determines whether or not newly gathered statistics will be published once the gather job has completed. Prior to Oracle Database 11<span class="italic">g</span>, Release 1 (11.1), once a statistic gathering job completed the new statistics were automatically published into the dictionary tables. The user now has the ability to gather statistics but not publish them immediately. This allows the DBA to test the new statistics before publishing them.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t117" headers="r1c1-t117">
<p>.</p>
</td>
<td class="cellalignment4329" headers="r17c1-t117 r1c2-t117">
<p><code dir="ltr">STALE_PERCENT</code> - Determines the percentage of rows in a table that have to change before the statistics on that table are deemed stale and should be regathered. The valid domain for <code dir="ltr">stale_percent</code> is non-negative numbers. The default value is 10%.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t117" headers="r1c1-t117">&nbsp;</td>
<td class="cellalignment4329" headers="r18c1-t117 r1c2-t117">
<p><code dir="ltr">OPTIONS</code> - Determines the <code dir="ltr">options</code> parameter used in the <a href="#i1036461">GATHER_TABLE_STATS Procedure</a>. The preference takes two values:</p>
<ul>
<li>
<p><code dir="ltr">GATHER</code> (default) - Gathers statistics for all objects in the table</p>
</li>
<li>
<p><code dir="ltr">GATHER AUTO</code> - Gathers all necessary statistics automatically. Oracle recommends setting <code dir="ltr">GATHER AUTO</code> on tables that undergo bulk loads during which statistics have been gathered. Note that this is only applicable to tables that do not have <code dir="ltr">INCREMENTAL</code> turned on. The <a href="#i1036461">GATHER_TABLE_STATS Procedure</a> on these tables with <code dir="ltr">GATHER AUTO</code> options will skip regathering the already fresh statistics.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r19c1-t117" headers="r1c1-t117">
<p><code dir="ltr">pvalue</code></p>
</td>
<td class="cellalignment4329" headers="r19c1-t117 r1c2-t117">
<p>Preference value. If <code dir="ltr">NULL</code> is specified, it will set the Oracle default value.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11073"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid or illegal input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11074"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to connect as owner of the table or should have the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> system privilege.</p>
</li>
<li>
<p>All arguments are of type <code dir="ltr">VARCHAR2</code> and values are enclosed in quotes, even when they represent numbers.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11075"></a>Examples</p>
<pre dir="ltr">DBMS_STATS.SET_TABLE_PREFS(&#39;SH&#39;, &#39;SALES&#39;, &#39;CASCADE&#39;, &#39;DBMS_STATS.AUTO_CASCADE&#39;);
DBMS_STATS.SET_TABLE_PREFS(&#39;SH&#39;, &#39;SALES&#39;,&#39;ESTIMATE_PERCENT&#39;,&#39;9&#39;);
DBMS_STATS.SET_TABLE_PREFS(&#39;SH&#39;, &#39;SALES&#39;, &#39;DEGREE&#39;,&#39;99&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68676" class="refsect2"><a id="i997763"></a>
<h3 class="refsect2"><a id="sthref11076"></a>SET_TABLE_STATS Procedure</h3>
<p>This procedure sets table-related information.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11077"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.SET_TABLE_STATS (
   ownname       VARCHAR2, 
   tabname       VARCHAR2, 
   partname      VARCHAR2 DEFAULT NULL,
   stattab       VARCHAR2 DEFAULT NULL, 
   statid        VARCHAR2 DEFAULT NULL,
   numrows       NUMBER   DEFAULT NULL, 
   numblks       NUMBER   DEFAULT NULL,
   avgrlen       NUMBER   DEFAULT NULL, 
   flags         NUMBER   DEFAULT NULL,
   statown       VARCHAR2 DEFAULT NULL,
   no_invalidate BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param(&#39;NO_INVALIDATE&#39;)),
   cachedblk     NUMBER    DEFAULT NULL,
   cachehit      NUMBER    DEFUALT NULL,
   force         BOOLEAN   DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11078"></a>Parameters</p>
<div id="ARPLS68677" class="tblformal">
<p class="titleintable"><a id="sthref11079"></a><a id="sthref11080"></a>Table 155-107 SET_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="SET_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t118">Parameter</th>
<th class="cellalignment4328" id="r1c2-t118">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t118" headers="r1c1-t118">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t118 r1c2-t118">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t118" headers="r1c1-t118">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t118 r1c2-t118">
<p>Name of the table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t118" headers="r1c1-t118">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t118 r1c2-t118">
<p>Name of the table partition in which to store the statistics. If the table is partitioned and <code dir="ltr">partname</code> is <code dir="ltr">NULL</code>, then the statistics are stored at the global table level.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t118" headers="r1c1-t118">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t118 r1c2-t118">
<p>User statistics table identifier describing where to store the statistics. If <code dir="ltr">stattab</code> is <code dir="ltr">NULL</code>, then the statistics are stored directly in the dictionary.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t118" headers="r1c1-t118">
<p><code dir="ltr">statid</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t118 r1c2-t118">
<p>Identifier (optional) to associate with these statistics within <code dir="ltr">stattab</code> (Only pertinent if <code dir="ltr">stattab</code> is not <code dir="ltr">NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t118" headers="r1c1-t118">
<p><code dir="ltr">numrows</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t118 r1c2-t118">
<p>Number of rows in the table (partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t118" headers="r1c1-t118">
<p><code dir="ltr">numblks</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t118 r1c2-t118">
<p>Number of blocks the table (partition) occupies</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t118" headers="r1c1-t118">
<p><code dir="ltr">avgrlen</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t118 r1c2-t118">
<p>Average row length for the table (partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t118" headers="r1c1-t118">
<p><code dir="ltr">flags</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t118 r1c2-t118">
<p>For internal Oracle use (should be left as <code dir="ltr">NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t118" headers="r1c1-t118">
<p><code dir="ltr">statown</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t118 r1c2-t118">
<p>Schema containing <code dir="ltr">stattab</code> (if different than <code dir="ltr">ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t118" headers="r1c1-t118">
<p><code dir="ltr">no_invalidate</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t118 r1c2-t118">
<p>Does not invalidate the dependent cursors if set to <code dir="ltr">TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code dir="ltr">FALSE</code>. Use <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t118" headers="r1c1-t118">
<p><code dir="ltr">cachedblk</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t118 r1c2-t118">
<p>The average number of blocks in the buffer cache for the segment (index/table/index partition/table partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t118" headers="r1c1-t118">
<p><code dir="ltr">cachehit</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t118 r1c2-t118">
<p>The average cache hit ratio for the segment (index/table/index partition/table partition)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t118" headers="r1c1-t118">
<p><code dir="ltr">force</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t118 r1c2-t118">
<p>Sets the values even if statistics of the table are locked</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11081"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</li>
<li>
<p>The Optimizer uses the cached data to estimate number of cached blocks for index or statistics table access. The total cost of the operation will be combined from the I/O cost of reading not cached blocks from disk, the CPU cost of getting cached blocks from the buffer cache, and the CPU cost of processing the data.</p>
</li>
<li>
<p>Oracle maintains <code dir="ltr">cachedblk</code> and <code dir="ltr">cachehit</code> at all times but uses correspondent caching statistics for optimization as part of the table and index statistics only when the user calls <code dir="ltr">DBMS_STATS.GATHER_[TABLE/INDEX/SCHEMA/DATABASE]_STATS</code> procedure for auto mode or <code dir="ltr">DBMS_STATS.GATHER_SYSTEM_STATS</code> for manual mode. In order to prevent the user from utilizing inaccurate and unreliable data, the optimizer will compute a &#39;confidence factor&#39; for each <code dir="ltr">cachehit</code> and a <code dir="ltr">cachedblk</code> for each object. If the &#39;confidence factor&#39; for the value meets confidence criteria, this value will be used, otherwise the defaults will be used.</p>
</li>
<li>
<p>The automatic maintenance algorithm for object caching statistics assumes that there is only one major workload for the system and adjusts statistics to this workload, ignoring other &#34;minor&#34; workloads. If this is not the case, you must use manual mode for maintaining object caching statistics.</p>
</li>
<li>
<p>The object caching statistics maintenance algorithm for auto mode prevents you from using statistics in the following situations</p>
<ul>
<li>
<p>When not enough data has been analyzed, such as when an object has been recently create</p>
</li>
<li>
<p>When the system does not have one major workload resulting in averages not corresponding to real values.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11082"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Invalid input value</p>
<p><code dir="ltr">ORA-20005</code>: Object statistics are locked</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68678" class="refsect2"><a id="BABCIFCJ"></a>
<h3 class="refsect2"><a id="sthref11083"></a>SHOW_EXTENDED_STATS_NAME Function</h3>
<p>This function returns the name of the statistics entry that is created for the user-specified extension. It raises an error if no extension has been created.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11084"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.SHOW_EXTENDED_STATS_NAME (
   ownname    VARCHAR2, 
   tabname    VARCHAR2,
   extension  VARCHAR2)
 RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11085"></a>Parameters</p>
<div id="ARPLS68679" class="tblformal">
<p class="titleintable"><a id="sthref11086"></a><a id="sthref11087"></a>Table 155-108 SHOW_EXTENDED_STATS_NAME Function Parameters</p>
<table class="cellalignment4330" title="SHOW_EXTENDED_STATS_NAME Function Parameters" summary="This table describes the Parameters of DBMS_STATS.SHOW_EXTENDED_STATS_NAME subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t119">Parameter</th>
<th class="cellalignment4328" id="r1c2-t119">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t119" headers="r1c1-t119">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t119 r1c2-t119">
<p>Owner name of a table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t119" headers="r1c1-t119">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t119 r1c2-t119">
<p>Name of the table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t119" headers="r1c1-t119">
<p><code dir="ltr">extension</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t119 r1c2-t119">
<p>Can be either a column group or an expression. Suppose the specified table has two column <code dir="ltr">c1</code>, <code dir="ltr">c2</code>. An example column group can be &#34;(<code dir="ltr">c1</code>, <code dir="ltr">c2</code>)&#34; and an example expression can be &#34;(<code dir="ltr">c1</code> + <code dir="ltr">c2</code>)&#34;.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11088"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code dir="ltr">ORA-20001</code>: Error when processing extension</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11089"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73963" class="refsect2"><a id="BABJIHBH"></a>
<h3 class="refsect2"><a id="sthref11090"></a>TRANSFER_STATS Procedure</h3>
<p>This procedure transfers statistics for specified table(s) from a remote database specified by <code dir="ltr">dblink</code> to the local database. The statistics at the source database are retained. It likewise transfers statistics-related structures such as synopses and DML monitoring information.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11091"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.TRANSFER_STATS (
   ownname     IN     VARCHAR2,
   tabname     IN     VARCHAR2,
   dblink      IN     VARCHAR2,   options     IN     NUMBER DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11092"></a>Parameters</p>
<div id="ARPLS73964" class="tblformal">
<p class="titleintable"><a id="sthref11093"></a><a id="sthref11094"></a>Table 155-109 TRANSFER_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="TRANSFER_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.TRANSFER_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t120">Parameter</th>
<th class="cellalignment4328" id="r1c2-t120">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t120" headers="r1c1-t120">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t120 r1c2-t120">
<p>Owner name of a table. If <code dir="ltr">NULL</code> all schemas in the database. If <code dir="ltr">NULL</code>, the procedure will transfer global preferences as well.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t120" headers="r1c1-t120">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t120 r1c2-t120">
<p>Name of the table. If <code dir="ltr">NULL</code>, all tables in <code dir="ltr">OWNNAME</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t120" headers="r1c1-t120">
<p><code dir="ltr">dblink</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t120 r1c2-t120">
<p>Database link name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t120" headers="r1c1-t120">
<p><code dir="ltr">options</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t120 r1c2-t120">
<p>By default the procedure does not transfer the global preferences. Specifying <code dir="ltr">ADD_GLOBAL_PREFS</code> copies global preferences.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11095"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68680" class="refsect2"><a id="BABDDHJI"></a>
<h3 class="refsect2"><a id="sthref11096"></a>UNLOCK_PARTITION_STATS Procedure</h3>
<p>This procedure enables the user to unlock statistics for a partition.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11097"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.UNLOCK_PARTITION_STATS (
    ownname    VARCHAR2,
    tabname    VARCHAR2,
    partname   VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11098"></a>Parameters</p>
<div id="ARPLS68681" class="tblformal">
<p class="titleintable"><a id="sthref11099"></a><a id="sthref11100"></a>Table 155-110 UNLOCK_PARTITION_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="UNLOCK_PARTITION_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.UNLOCK_PARTITION_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t121">Parameter</th>
<th class="cellalignment4328" id="r1c2-t121">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t121" headers="r1c1-t121">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t121 r1c2-t121">
<p>Name of the schema to unlock</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t121" headers="r1c1-t121">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t121 r1c2-t121">
<p>Name of the table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t121" headers="r1c1-t121">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t121 r1c2-t121">
<p>[Sub]Partition name</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11101"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68682" class="refsect2"><a id="i1043314"></a>
<h3 class="refsect2"><a id="sthref11102"></a>UNLOCK_SCHEMA_STATS Procedure</h3>
<p>This procedure unlocks the statistics on all the tables in schema.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11103"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.UNLOCK_SCHEMA_STATS (
   ownname    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11104"></a>Parameters</p>
<div id="ARPLS68683" class="tblformal">
<p class="titleintable"><a id="sthref11105"></a><a id="sthref11106"></a>Table 155-111 UNLOCK_SCHEMA_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="UNLOCK_SCHEMA_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.UNLOCK_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t122">Parameter</th>
<th class="cellalignment4328" id="r1c2-t122">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t122" headers="r1c1-t122">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t122 r1c2-t122">
<p>Name of the schema</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11107"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</li>
<li>
<p>When statistics on a table is locked, all the statistics depending on the table, including table statistics, column statistics, histograms and statistics on all dependent indexes, are considered to be locked.</p>
</li>
<li>
<p>The <code dir="ltr">SET_*,</code> <code dir="ltr">DELETE_*,</code> <code dir="ltr">IMPORT_*,</code> <code dir="ltr">GATHER_*</code> procedures that modify statistics in the dictionary of an individual table, index or column will raise an error if statistics of the object is locked.</p>
</li>
<li>
<p>Procedures that operates on multiple objects (such as <code dir="ltr">GATHER_SCHEMA_STATS</code>) will skip modifying the statistics of an object if it is locked. Many procedures have force argument to override the lock.</p>
</li>
<li>
<p>Neither the <a href="#i1043314">UNLOCK_SCHEMA_STATS Procedure</a> nor the <a href="#i1040393">UNLOCK_TABLE_STATS Procedure</a> is designed to unlock statistics of corresponding partitions. When you invoke the<a href="#i1043993">LOCK_TABLE_STATS Procedure</a>, it sets the statistics lock bit at the table level. In that case, you cannot gather statistics on dependent objects such as partitions and indexes. By the same token, if table statistics are locked, the dependents are locked and you do not need to explicitly invoke the <a href="#BABFJDFA">LOCK_PARTITION_STATS Procedure</a>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68684" class="refsect2"><a id="i1040393"></a>
<h3 class="refsect2"><a id="sthref11108"></a>UNLOCK_TABLE_STATS Procedure</h3>
<p>This procedure unlocks the statistics on the table.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11109"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.UNLOCK_TABLE_STATS (
   ownname    VARCHAR2,
   tabname    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11110"></a>Parameters</p>
<div id="ARPLS68685" class="tblformal">
<p class="titleintable"><a id="sthref11111"></a><a id="sthref11112"></a>Table 155-112 UNLOCK_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment4330" title="UNLOCK_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.UNLOCK_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t123">Parameter</th>
<th class="cellalignment4328" id="r1c2-t123">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t123" headers="r1c1-t123">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t123 r1c2-t123">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t123" headers="r1c1-t123">
<p><code dir="ltr">tabname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t123 r1c2-t123">
<p>Name of the table</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11113"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> privilege. For objects owned by <code dir="ltr">SYS</code>, you need to be either the owner of the table, or you need the <code dir="ltr">ANALYZE</code> <code dir="ltr">ANY</code> <code dir="ltr">DICTIONARY</code> privilege or the <code dir="ltr">SYSDBA</code> privilege.</p>
</li>
<li>
<p>When statistics on a table is locked, all the statistics depending on the table, including table statistics, column statistics, histograms and statistics on all dependent indexes, are considered to be locked.</p>
</li>
<li>
<p>The <code dir="ltr">SET_*,</code> <code dir="ltr">DELETE_*,</code> <code dir="ltr">IMPORT_*,</code> <code dir="ltr">GATHER_*</code> procedures that modify statistics in the dictionary of an individual table, index or column will raise an error if statistics of the object is locked.</p>
</li>
<li>
<p>Procedures that operates on multiple objects (such as <code dir="ltr">GATHER_SCHEMA_STATS</code>) will skip modifying the statistics of an object if it is locked. Many procedures have force argument to override the lock.</p>
</li>
<li>
<p>Neither the <a href="#i1043314">UNLOCK_SCHEMA_STATS Procedure</a> nor the <a href="#i1040393">UNLOCK_TABLE_STATS Procedure</a> is designed to unlock statistics of corresponding partitions. When you invoke the<a href="#i1043993">LOCK_TABLE_STATS Procedure</a>, it sets the statistics lock bit at the table level. In that case, you cannot gather statistics on dependent objects such as partitions and indexes. By the same token, if table statistics are locked, the dependents are locked and you do not need to explicitly invoke the <a href="#BABFJDFA">LOCK_PARTITION_STATS Procedure</a>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68686" class="refsect2"><a id="i1039960"></a>
<h3 class="refsect2"><a id="sthref11114"></a>UPGRADE_STAT_TABLE Procedure</h3>
<p>This procedure upgrades a user statistics table from an older version.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11115"></a>Syntax</p>
<pre dir="ltr">DBMS_STATS.UPGRADE_STAT_TABLE (
   ownname    VARCHAR2,
   stattab    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11116"></a>Parameters</p>
<div id="ARPLS68687" class="tblformal">
<p class="titleintable"><a id="sthref11117"></a><a id="sthref11118"></a>Table 155-113 UPGRADE_STAT_TABLE Procedure Parameters</p>
<table class="cellalignment4330" title="UPGRADE_STAT_TABLE Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.UPGRADE_STAT_TABLE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t124">Parameter</th>
<th class="cellalignment4328" id="r1c2-t124">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t124" headers="r1c1-t124">
<p><code dir="ltr">ownname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t124 r1c2-t124">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t124" headers="r1c1-t124">
<p><code dir="ltr">stattab</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t124 r1c2-t124">
<p>Name of the table</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11119"></a>Exceptions</p>
<p><code dir="ltr">ORA-20000</code>: Unable to upgrade table</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11120"></a>Usage Notes</p>
<p>To invoke this procedure you need the privileges to drop and create a table.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4320">
<tr>
<td class="cellalignment4329">
<table class="cellalignment4325">
<tr>
<td class="cellalignment4324"><a href="d_sqltun.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4324"><a href="d_stat_f.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4332">
<table class="cellalignment4323">
<tr>
<td class="cellalignment4324"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4324"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4324"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4324"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4324"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4324"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>