<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2355"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBMS_SQLTUNE"></a><title>DBMS_SQLTUNE</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1086"/>
<meta name="dcterms.created" content="2016-09-02T5:36:37Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"/>
<meta name="dcterms.identifier" content="E41829-07"/>
<meta name="dcterms.isVersionOf" content="ARPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="d_sqlpa.htm" title="Previous" type="text/html"/>
<link rel="Next" href="d_stats.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41829-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">158/290</span> <!-- End Header -->
<div id="ARPLS220" class="chapter"><a id="CHDGAJCI"></a>
<h1 class="chapter"><span class="secnum">154</span> DBMS_SQLTUNE</h1>
<p>The <a id="sthref10029"></a><code dir="ltr">DBMS_SQLTUNE</code> package is the interface for tuning SQL on demand. The related package <a id="sthref10030"></a><code dir="ltr">DBMS_AUTO_SQLTUNE</code> package provides the interface for SQL Tuning Advisor run as an automated task.</p>
<p>The chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDGFHEC">Using DBMS_SQLTUNE</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Security Model</p>
</li>
</ul>
</li>
<li>
<p><a href="#CACJJGHB">Data Structures</a></p>
</li>
<li>
<p><a href="#CACIEBJJ">Subprogram Groups</a></p>
<ul>
<li>
<p>SQL Tuning Advisor Subprograms</p>
</li>
<li>
<p>SQL Profile Subprograms</p>
</li>
<li>
<p>SQL Tuning Set Subprograms</p>
</li>
<li>
<p>SQL Performance Reporting Subprograms</p>
</li>
</ul>
</li>
<li>
<p><a href="#CHDHJFGG">Summary of DBMS_SQLTUNE Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="CHDGFHEC"></a>
<div id="ARPLS68375" class="refsect1">
<h2 class="refsect1">Using DBMS_SQLTUNE</h2>
<ul>
<li>
<p><a href="#CHDBFJEG">Overview</a></p>
</li>
<li>
<p><a href="#CHDIGIEJ">Security Model</a></p>
</li>
</ul>
<div id="ARPLS68376" class="refsect2"><a id="CHDBFJEG"></a>
<h3 class="refsect2">Overview</h3>
<p>The <code dir="ltr">DBMS_SQLTUNE</code> package provides a number of interrelated areas of functionality:</p>
<ul>
<li>
<p><a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a></p>
</li>
<li>
<p><a href="#CHDCJJGF">SQL Profile Subprograms</a></p>
</li>
<li>
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</li>
</ul>
<p class="subhead2"><a id="CACFDDBG"></a><a id="ARPLS68377"></a>SQL Tuning Advisor</p>
<p>SQL Tuning Advisor is one of a suite of advisors, a set of expert systems that identifies and helps resolve database performance problems. Specifically, SQL Tuning Advisor automates tuning of problematic SQL statements. It takes one or more SQL statements as input and gives precise advice on how to tune the statements. The advisor provides the advice in the form of SQL actions for tuning the SQL along with their expected performance benefit.</p>
<p>The group of <a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a> provide a task-oriented interface that enables you to access the advisor. You can call the following subprograms in the order given to use some of SQL Tuning Advisor&#39;s features:</p>
<ol>
<li>
<p><a href="#CHDGBCDB">CREATE_TUNING_TASK Functions</a> creates a tuning task for tuning one or more SQL statements.</p>
</li>
<li>
<p>The <a href="#CHDGEJJA">EXECUTE_TUNING_TASK Function and Procedure</a> executes a previously created tuning task.</p>
</li>
<li>
<p>The <a href="#CHDGEIHJ">REPORT_TUNING_TASK Function</a> displays the results of a tuning task.</p>
</li>
<li>
<p>You use the <a href="#CHDCHDED">SCRIPT_TUNING_TASK Function</a> to create a SQL*PLUS script which can then be executed to implement a set of Advisor recommendations</p>
</li>
</ol>
<p class="subhead2"><a id="ARPLS68378"></a>SQL Profile Subprograms</p>
<p>SQL Tuning Advisor may recommend the creation of a SQL profile to improve the performance of a statement. SQL profiles consist of auxiliary statistics specific to the statement. The query optimizer makes estimates about cardinality, selectivity, and cost that can sometimes be off by a significant amount, resulting in poor execution plans. The SQL profile addresses this problem by collecting additional information using sampling and partial execution techniques to adjust these estimates.</p>
<p>The group of <a href="#CHDCJJGF">SQL Profile Subprograms</a> provides a mechanism for delivering statistics to the optimizer that targets one particular SQL statement, and helps the optimizer make good decisions for that statement by giving it the most accurate statistical information possible. For example:</p>
<ul>
<li>
<p>You can use the <a href="#i1010403">ACCEPT_SQL_PROFILE Procedure and Function</a> to accept a SQL profile recommended by SQL Tuning Advisor.</p>
</li>
<li>
<p>You can alter the <code dir="ltr">STATUS</code>, <code dir="ltr">NAME</code>, <code dir="ltr">DESCRIPTION</code>, and <code dir="ltr">CATEGORY</code> attributes of an existing SQL profile with the <a href="#i1008294">ALTER_SQL_PROFILE Procedure</a>.</p>
</li>
<li>
<p>You can drop a SQL profile with the <a href="#i1007819">DROP_SQL_PROFILE Procedure</a>.</p>
</li>
</ul>
<p class="subhead2"><a id="ARPLS68379"></a>SQL Tuning Sets</p>
<p>SQL Tuning Advisor input can be a single SQL statement or a set of statements. When tuning multiple statements in one advisor task, you give the input in the form of a SQL tuning set (STS). A SQL tuning set is a database object that stores SQL statements along with their execution context in a system-provided schema. SQL tuning sets provide an infrastructure for dealing with SQL workloads and simplify tuning of a large number of SQL statements.</p>
<p>SQL tuning sets store SQL statements along with</p>
<ul>
<li>
<p>The execution context, such as the parsing schema name and bind values</p>
</li>
<li>
<p>Execution statistics such as average elapsed time and execution count</p>
</li>
<li>
<p>Execution plans - which are the sequence of operations Oracle performs to run SQL statements</p>
</li>
<li>
<p>Row source statistics such as the number of rows processed for each operation executed within the plan</p>
</li>
</ul>
<p>SQL tuning sets can be created by filtering or ranking SQL statements from several sources:</p>
<ul>
<li>
<p>The shared SQL area using the <a href="#i1010615">SELECT_CURSOR_CACHE Function</a></p>
</li>
<li>
<p>Top SQL statements from the Automatic Workload Repository using the <a href="#i1009198">SELECT_WORKLOAD_REPOSITORY Function</a></p>
</li>
<li>
<p>Other SQL tuning sets using the <a href="#CHEHBBDF">SELECT_SQLSET Function</a></p>
</li>
<li>
<p>SQL Performance Analyzer task comparison results using the <a href="#CACEFBJH">SELECT_SQLPA_TASK Function</a></p>
</li>
<li>
<p>SQL Trace files using the <a href="#CACBBIEH">SELECT_SQL_TRACE Function</a></p>
</li>
<li>
<p>A user-defined workload</p>
</li>
</ul>
<p>The complete group of <a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> facilitates this functionality. As examples:</p>
<ul>
<li>
<p>The <a href="#i1006897">CREATE_SQLSET Procedure and Function</a> creates a SQL tuning set object in the database.</p>
</li>
<li>
<p>The <a href="#i1006951">LOAD_SQLSET Procedure</a> populates the SQL tuning set with a set of selected SQL.</p>
</li>
<li>
<p>The <a href="#CACJHDDC">CAPTURE_CURSOR_CACHE_SQLSET Procedure</a> collects SQL statements from the shared SQL area over a specified time interval, attempting to build a realistic picture of database workload.</p>
</li>
</ul>
<p class="subhead2"><a id="ARPLS68380"></a>Import/Export SQL Tuning Sets and SQL Profiles</p>
<p>Use <code dir="ltr">DBMS_SQLTUNE</code> subprograms to move SQL profiles and SQL tuning sets from one system to another using a common programmatic model. In both cases, you create a staging table on the source database and populate this staging table with the relevant data. You then move that staging table to the destination system following the method of your choice (such as Oracle Data Pump, or a database link), where it is used to reconstitute the objects in their original form. The following steps are implemented by means of subprograms included in this package:</p>
<ol>
<li>
<p>To create the staging table on the source system, call the <a href="#CACHIGBF">CREATE_STGTAB_SQLPROF Procedure</a> or the <a href="#CACBCEEH">CREATE_STGTAB_SQLSET Procedure</a>.</p>
</li>
<li>
<p>To populate the staging table with information from the source system, call the <a href="#CACFCAEC">PACK_STGTAB_SQLPROF Procedure</a> or <a href="#CACIFBAJ">PACK_STGTAB_SQLSET Procedure</a>.</p>
</li>
<li>
<p>Move the staging table to the destination system.</p>
</li>
<li>
<p>To re-create the object on the new system, call the <a href="#CACDIJJE">UNPACK_STGTAB_SQLPROF Procedure</a> or the <a href="#CACJDGFI">UNPACK_STGTAB_SQLSET Procedure</a>.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink TGSQL577" href="../TGSQL/tgsql_sqltune.htm#TGSQL577"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for more information about programmatic flow</div>
<p class="subhead2"><a id="ARPLS68381"></a>Automatic Tuning Task Functions</p>
<p>The automated system task <code dir="ltr">SYS_AUTO_SQL_TUNING_TASK</code> is created by the database as part of the catalog scripts. This task automatically chooses a set of high-load SQL from AWR and runs SQL Tuning Advisor on this SQL. The automated task performs the same comprehensive analysis as any other SQL Tuning task.</p>
<p>You can obtain a report on the activity of the Automatic SQL Tuning task through the <code dir="ltr">DBMS_AUTO_SQLTUNE.REPORT_AUTO_TUNING_TASK</code> API. See the <code dir="ltr">DBMS_AUTO_SQLTUNE</code> package for the list of subprograms that you can use to manage the automated SQL tuning task.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="d_autosta.htm#CIAFFHGJ">Using DBMS_AUTO_SQLTUNE</a></div>
<p class="subhead2"><a id="CACEBCHB"></a><a id="ARPLS68382"></a>Real-Time SQL Monitoring</p>
<p>Real-time SQL Monitoring enables DBAs or performance analysts to monitor the execution of long-running SQL statements while they are executing. Both cursor statistics (such as CPU times and IO times) and execution plan statistics (such as number of output rows, memory and temp space used) are updated in almost real time during statement execution. The <code dir="ltr">V$SQL_MONITOR</code> and <code dir="ltr">V$SQL_PLAN_MONITOR</code> views expose these statistics. In addition, <code dir="ltr">DBMS_SQLTUNE</code> provides the <code dir="ltr">REPORT_SQL_MONITOR</code> and <code dir="ltr">REPORT_SQL_MONITOR_LIST</code> functions to report monitoring information.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<code dir="ltr">DBMS_SQL_MONITOR</code> also contains the <code dir="ltr">REPORT_SQL_MONITOR</code> and <code dir="ltr">REPORT_SQL_MONITOR_LIST</code> functions.</div>
</div>
<!-- class="refsect2" -->
<div id="ARPLS68383" class="refsect2"><a id="CHDIGIEJ"></a>
<h3 class="refsect2">Security Model</h3>
<p>This package is available to <code dir="ltr">PUBLIC</code> and performs its own security checking:</p>
<ul>
<li>
<p>As SQL Tuning Advisor relies on the advisor framework, all tuning task interfaces (<code dir="ltr">XXX_TUNING_TASK</code>) require privilege <code dir="ltr">ADVISOR</code>.</p>
</li>
<li>
<p>SQL tuning set subprograms (<code dir="ltr">XXX_SQLSET</code>) require either the <code dir="ltr">ADMINISTER</code> <code dir="ltr">SQL</code> <code dir="ltr">TUNING</code> <code dir="ltr">SET</code> or the <code dir="ltr">ADMINISTER</code> <code dir="ltr">ANY</code> <code dir="ltr">SQL</code> <code dir="ltr">TUNING</code> <code dir="ltr">SET</code> privilege. Users having the <code dir="ltr">ADMINISTER</code> <code dir="ltr">SQL</code> <code dir="ltr">TUNING</code> <code dir="ltr">SET</code> privilege can only create and modify a SQL tuning set they own, while the <code dir="ltr">ADMINISTER</code> <code dir="ltr">ANY</code> <code dir="ltr">SQL</code> <code dir="ltr">TUNING</code> <code dir="ltr">SET</code> privilege allows them to operate upon all SQL tuning sets, even those owned by other users. For example, using the <a href="#i1006897">CREATE_SQLSET Procedure and Function</a> you can create a SQL tuning set to be owned by another user. In this case, the user need not necessarily have the <code dir="ltr">ADMINISTER</code> <code dir="ltr">SQL</code> <code dir="ltr">TUNING</code> <code dir="ltr">SET</code> privilege to operate upon her tuning set.</p>
</li>
<li>
<p>Previously, three different privileges were needed to invoke subprograms concerned with SQL profiles:</p>
<ul>
<li>
<p><code dir="ltr">CREATE</code> <code dir="ltr">ANY</code> <code dir="ltr">SQL</code> <code dir="ltr">PROFILE</code></p>
</li>
<li>
<p><code dir="ltr">ALTER</code> <code dir="ltr">ANY</code> <code dir="ltr">SQL</code> <code dir="ltr">PROFILE</code></p>
</li>
<li>
<p><code dir="ltr">DROP</code> <code dir="ltr">ANY</code> <code dir="ltr">SQL</code> <code dir="ltr">PROFILE</code></p>
</li>
</ul>
<p>These have now been deprecated in favor of <code dir="ltr">ADMINISTER</code> <code dir="ltr">SQL</code> <code dir="ltr">MANAGEMENT</code> <code dir="ltr">OBJECT</code></p>
</li>
</ul>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="CACJJGHB"></a>
<div id="ARPLS68384" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Data Structures</h2>
<p>The <code dir="ltr">DBMS_SQLTUNE</code> package defines the following <code dir="ltr">OBJECT</code> type</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10031"></a>Object Types</p>
<ul>
<li>
<p><a href="#CACCIEIG">SQLSET_ROW Object Type</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div id="ARPLS68385" class="refsect2"><a id="CACCIEIG"></a>
<h3 class="refsect2"><a id="sthref10032"></a>SQLSET_ROW Object Type</h3>
<p>The <code dir="ltr">SQLSET_ROW</code> object models the content of a SQL tuning set for the user. Logically, a SQL tuning set is a collection of <code dir="ltr">SQLSET_ROW</code>s where each <code dir="ltr">SQLSET_ROW</code> contains a single SQL statement along with its execution context, statistics, binds, and plan. The <code dir="ltr">SELECT_XXX</code> subprograms each model a data source as a collection of <code dir="ltr">SQLSET_ROWs</code>, unique by (<code dir="ltr">sql_id</code>, <code dir="ltr">plan_hash_value</code>). Similarly, the <code dir="ltr">LOAD_SQLSET</code> procedure takes as input a cursor whose row type is <code dir="ltr">SQLSET_ROW</code>, treating each <code dir="ltr">SQLSET_ROW</code> in isolation according to the policies requested by the user.</p>
<p>Several subprograms in the <code dir="ltr">DBMS_SQLTUNE</code> package accept basic filters on the content of a SQL tuning set or data source. These filters are expressed in terms of the attributes within the <code dir="ltr">SQLSET_ROW</code> as defined.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10033"></a>Syntax</p>
<pre dir="ltr">CREATE TYPE sqlset_row AS object (
  sql_id                   VARCHAR(13),
  force_matching_signature NUMBER,
  sql_text                 CLOB,
  object_list              sql_objects,
  bind_data                RAW(2000),
  parsing_schema_name      VARCHAR2(30),
  module                   VARCHAR2(48),
  action                   VARCHAR2(32),
  elapsed_time             NUMBER,
  cpu_time                 NUMBER,
  buffer_gets              NUMBER,
  disk_reads               NUMBER,
  direct_writes            NUMBER,
  rows_processed           NUMBER,
  fetches                  NUMBER,
  executions               NUMBER,
  end_of_fetch_count       NUMBER,
  optimizer_cost           NUMBER,
  optimizer_env            RAW(2000),
  priority                 NUMBER,
  command_type             NUMBER,
  first_load_time          VARCHAR2(19),
  stat_period              NUMBER,
  active_stat_period       NUMBER,
  other                    CLOB,
  plan_hash_value          NUMBER,
  sql_plan                 sql_plan_table_type,
  bind_list                sql_binds)
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10034"></a>Attributes</p>
<div id="ARPLS68386" class="tblformal">
<p class="titleintable"><a id="sthref10035"></a><a id="sthref10036"></a>Table 154-1 SQLSET_ROW Attributes</p>
<table class="cellalignment4330" title="SQLSET_ROW Attributes" summary="This table describes the fields of the SQLSET_ROW Object Type and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t5">Attribute</th>
<th class="cellalignment4328" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t5" headers="r1c1-t5">
<p><code dir="ltr">sql_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t5 r1c2-t5">
<p>Unique SQL ID</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t5" headers="r1c1-t5">
<p><code dir="ltr">forcing_matching_signature</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t5 r1c2-t5">
<p>Signature with literals, case, and whitespace removed</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t5" headers="r1c1-t5">
<p><code dir="ltr">sql_text</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t5 r1c2-t5">
<p>Full text for the statement</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t5" headers="r1c1-t5">
<p><code dir="ltr">object_list</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t5 r1c2-t5">
<p>Currently not implemented</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t5" headers="r1c1-t5">
<p><code dir="ltr">bind_data</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t5 r1c2-t5">
<p>Bind data as captured for this SQL. Note that you cannot stipulate an argument for this parameter and also for <code dir="ltr">bind_list</code> - they are mutually exclusive.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t5" headers="r1c1-t5">
<p><code dir="ltr">parsing_schema_name</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t5 r1c2-t5">
<p>Schema where the SQL is parsed</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t5" headers="r1c1-t5">
<p><code dir="ltr">module</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t5 r1c2-t5">
<p>Last application module for the SQL</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t5" headers="r1c1-t5">
<p><code dir="ltr">action</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t5 r1c2-t5">
<p>Last application action for the SQL</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t5" headers="r1c1-t5">
<p><code dir="ltr">elapsed_time</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t5 r1c2-t5">
<p>Sum total elapsed time for this SQL statement</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t5" headers="r1c1-t5">
<p><code dir="ltr">cpu_time</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t5 r1c2-t5">
<p>Sum total CPU time for this SQL statement</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t5" headers="r1c1-t5">
<p><code dir="ltr">buffer_gets</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t5 r1c2-t5">
<p>Sum total number of buffer gets</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t5" headers="r1c1-t5">
<p><code dir="ltr">disk_reads</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t5 r1c2-t5">
<p>Sum total number of disk reads</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t5" headers="r1c1-t5">
<p><code dir="ltr">direct_writes</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t5 r1c2-t5">
<p>Sum total number of direct writes</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t5" headers="r1c1-t5">
<p><code dir="ltr">rows_processed</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t5 r1c2-t5">
<p>Sum total number of rows processed by this SQL</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t5" headers="r1c1-t5">
<p><code dir="ltr">fetches</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t5 r1c2-t5">
<p>Sum total number of fetches</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t5" headers="r1c1-t5">
<p><code dir="ltr">executions</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t5 r1c2-t5">
<p>Total executions of this SQL</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t5" headers="r1c1-t5">
<p><code dir="ltr">end_of_fetch_count</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t5 r1c2-t5">
<p>Number of times the statement was fully executed with all of its rows fetched</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r19c1-t5" headers="r1c1-t5">
<p><code dir="ltr">optimizer_cost</code></p>
</td>
<td class="cellalignment4329" headers="r19c1-t5 r1c2-t5">
<p>Optimizer cost for this SQL</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r20c1-t5" headers="r1c1-t5">
<p><code dir="ltr">optimizer_env</code></p>
</td>
<td class="cellalignment4329" headers="r20c1-t5 r1c2-t5">
<p>Optimizer environment for this SQL statement</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r21c1-t5" headers="r1c1-t5">
<p><code dir="ltr">priority</code></p>
</td>
<td class="cellalignment4329" headers="r21c1-t5 r1c2-t5">
<p>User-defined priority (1,2,3)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r22c1-t5" headers="r1c1-t5">
<p><code dir="ltr">command_type</code></p>
</td>
<td class="cellalignment4329" headers="r22c1-t5 r1c2-t5">
<p>Statement type, such as <code dir="ltr">INSERT</code> or <code dir="ltr">SELECT</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r23c1-t5" headers="r1c1-t5">
<p><code dir="ltr">first_load_time</code></p>
</td>
<td class="cellalignment4329" headers="r23c1-t5 r1c2-t5">
<p>Load time of parent cursor</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r24c1-t5" headers="r1c1-t5">
<p><code dir="ltr">stat_period</code></p>
</td>
<td class="cellalignment4329" headers="r24c1-t5 r1c2-t5">
<p>Period of time (seconds) when the statistics of this SQL statement were collected</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r25c1-t5" headers="r1c1-t5">
<p><code dir="ltr">active_stat_period</code></p>
</td>
<td class="cellalignment4329" headers="r25c1-t5 r1c2-t5">
<p>Effective period of time (in seconds) during which the SQL statement was active</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r26c1-t5" headers="r1c1-t5">
<p><code dir="ltr">other</code></p>
</td>
<td class="cellalignment4329" headers="r26c1-t5 r1c2-t5">
<p>Other column for user defined attributes</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r27c1-t5" headers="r1c1-t5">
<p><code dir="ltr">plan_hash_value</code></p>
</td>
<td class="cellalignment4329" headers="r27c1-t5 r1c2-t5">
<p>Plan hash value of the plan</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r28c1-t5" headers="r1c1-t5">
<p><code dir="ltr">sql_plan</code></p>
</td>
<td class="cellalignment4329" headers="r28c1-t5 r1c2-t5">
<p>Explain plan</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r29c1-t5" headers="r1c1-t5">
<p><code dir="ltr">bind_list</code></p>
</td>
<td class="cellalignment4329" headers="r29c1-t5 r1c2-t5">
<p>List of user specified binds for SQL This is used for user-specified workloads. Note that you cannot stipulate an argument for this parameter and also for <code dir="ltr">bind_data</code> - they are mutually exclusive.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="CACIEBJJ"></a>
<div id="ARPLS68387" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Subprogram Groups</h2>
<p><code dir="ltr">DBMS_SQLTUNE</code> subprograms are grouped by function:</p>
<ul>
<li>
<p><a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a></p>
</li>
<li>
<p><a href="#CHDCJJGF">SQL Profile Subprograms</a></p>
</li>
<li>
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</li>
<li>
<p><a href="#CHDECAHH">SQL Performance Reporting Subprograms</a></p>
</li>
</ul>
<div id="ARPLS72932" class="refsect2"><a id="CHDDCCBJ"></a>
<h3 class="refsect2">SQL Tuning Advisor Subprograms</h3>
<p>This subprogram group provides an interface to manage SQL tuning tasks.</p>
<div id="ARPLS72933" class="tblformal">
<p class="titleintable"><a id="sthref10037"></a><a id="sthref10038"></a>Table 154-2 SQL Tuning Task Subprograms</p>
<table class="cellalignment4330" title="SQL Tuning Task Subprograms" summary="This table lists the SQL tuning tasks subprograms of DBMS_SQLTUNE in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t6">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t6" headers="r1c1-t6">
<p><a href="#CHDCHFDB">&#34;CANCEL_TUNING_TASK Procedure&#34;</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t6 r1c2-t6">
<p>Cancels the currently executing tuning task</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t6" headers="r1c1-t6">
<p><a href="#CHDFECGH">&#34;CREATE_SQL_PLAN_BASELINE Procedure&#34;</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t6 r1c2-t6">
<p>Creates a SQL plan baseline for an existing plan</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t6" headers="r1c1-t6">
<p><a href="#CHDGBCDB">&#34;CREATE_TUNING_TASK Functions&#34;</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t6 r1c2-t6">
<p>Creates a tuning of a single statement or SQL tuning set for either SQL Tuning Advisor</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t6" headers="r1c1-t6">
<p><a href="#CHDIGHHA">&#34;DROP_TUNING_TASK Procedure&#34;</a></p>
</td>
<td class="cellalignment4329" headers="r5c1-t6 r1c2-t6">
<p>Drops a SQL tuning task</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t6" headers="r1c1-t6">
<p><a href="#CHDGEJJA">&#34;EXECUTE_TUNING_TASK Function and Procedure&#34;</a></p>
</td>
<td class="cellalignment4329" headers="r6c1-t6 r1c2-t6">
<p>Executes a previously created tuning task</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t6" headers="r1c1-t6">
<p><a href="#BABIECBJ">&#34;IMPLEMENT_TUNING_TASK Function&#34;</a></p>
</td>
<td class="cellalignment4329" headers="r7c1-t6 r1c2-t6">
<p>Implements a set of SQL profile recommendations made by SQL Tuning Advisor</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t6" headers="r1c1-t6">
<p><a href="#CHDFIFAF">&#34;INTERRUPT_TUNING_TASK Procedure&#34;</a></p>
</td>
<td class="cellalignment4329" headers="r8c1-t6 r1c2-t6">
<p>Interrupts the currently executing tuning task</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t6" headers="r1c1-t6">
<p><a href="#CACFICAE">&#34;REPORT_AUTO_TUNING_TASK Function&#34;</a></p>
</td>
<td class="cellalignment4329" headers="r9c1-t6 r1c2-t6">
<p>Displays a report from the automatic tuning task, reporting on a range of executions</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t6" headers="r1c1-t6">
<p><a href="#CHDGEIHJ">&#34;REPORT_TUNING_TASK Function&#34;</a></p>
</td>
<td class="cellalignment4329" headers="r10c1-t6 r1c2-t6">
<p>Displays the results of a tuning task</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t6" headers="r1c1-t6">
<p><a href="#CHDJEHBG">&#34;RESET_TUNING_TASK Procedure&#34;</a></p>
</td>
<td class="cellalignment4329" headers="r11c1-t6 r1c2-t6">
<p>Resets the currently executing tuning task to its initial state</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t6" headers="r1c1-t6">
<p><a href="#CHDJEABC">&#34;RESUME_TUNING_TASK Procedure&#34;</a></p>
</td>
<td class="cellalignment4329" headers="r12c1-t6 r1c2-t6">
<p>Resumes a previously interrupted task that was created to process a SQL tuning set</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t6" headers="r1c1-t6">
<p><a href="#CACGDDAH">&#34;SCHEDULE_TUNING_TASK Function&#34;</a></p>
</td>
<td class="cellalignment4329" headers="r13c1-t6 r1c2-t6">
<p>Creates a tuning task and schedules its execution as a scheduler job</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t6" headers="r1c1-t6">
<p><a href="#CHDCHDED">&#34;SCRIPT_TUNING_TASK Function&#34;</a></p>
</td>
<td class="cellalignment4329" headers="r14c1-t6 r1c2-t6">
<p>Creates a SQL*PLUS script which can then be executed to implement a set of SQL Tuning Advisor recommendations</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t6" headers="r1c1-t6">
<p><a href="#CHDGAJDB">&#34;SET_TUNING_TASK_PARAMETER Procedures&#34;</a></p>
</td>
<td class="cellalignment4329" headers="r15c1-t6 r1c2-t6">
<p>Updates the value of a SQL tuning parameter of type <code dir="ltr">VARCHAR2</code> or <code dir="ltr">NUMBER</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p>The <a href="#CHDHJFGG">Summary of DBMS_SQLTUNE Subprograms</a> contains a complete listing of all subprograms in the package.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS72934" class="refsect2"><a id="CHDCJJGF"></a>
<h3 class="refsect2">SQL Profile Subprograms</h3>
<p>This subprogram group provides an interface to manage SQL profiles.</p>
<div id="ARPLS72935" class="tblformal">
<p class="titleintable"><a id="sthref10039"></a><a id="sthref10040"></a>Table 154-3 SQL Profile Subprograms</p>
<table class="cellalignment4330" title="SQL Profile Subprograms" summary="This table lists the SQL Profile subprograms of DBMS_SQLTUNE in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t7">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t7" headers="r1c1-t7">
<p><a href="#CACEIFDE">ACCEPT_ALL_SQL_PROFILES Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t7 r1c2-t7">
<p>Accepts all SQL profiles recommended by a specific execution of a tuning task</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t7" headers="r1c1-t7">
<p><a href="#i1010403">ACCEPT_SQL_PROFILE Procedure and Function</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t7 r1c2-t7">
<p>Creates a SQL profile for the specified tuning task</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t7" headers="r1c1-t7">
<p><a href="#i1008294">ALTER_SQL_PROFILE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t7 r1c2-t7">
<p>Alters specific attributes of an existing SQL profile object</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t7" headers="r1c1-t7">
<p><a href="#CACHIGBF">CREATE_STGTAB_SQLPROF Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r5c1-t7 r1c2-t7">
<p>Creates the staging table used for copying SQL profiles from one system to another</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t7" headers="r1c1-t7">
<p><a href="#i1007819">DROP_SQL_PROFILE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r6c1-t7 r1c2-t7">
<p>Drops the named SQL profile from the database</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t7" headers="r1c1-t7">
<p><a href="#CACFCAEC">PACK_STGTAB_SQLPROF Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r7c1-t7 r1c2-t7">
<p>Moves profile data out of the <code dir="ltr">SYS</code> schema into the staging table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t7" headers="r1c1-t7">
<p><a href="#CACGGJBG">REMAP_STGTAB_SQLPROF Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r8c1-t7 r1c2-t7">
<p>Changes the profile data values kept in the staging table prior to performing an unpack operation</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t7" headers="r1c1-t7">
<p><a href="#CACHJDEG">SQLTEXT_TO_SIGNATURE Function</a></p>
</td>
<td class="cellalignment4329" headers="r9c1-t7 r1c2-t7">
<p>Returns a SQL text&#39;s signature</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t7" headers="r1c1-t7">
<p><a href="#CACDIJJE">UNPACK_STGTAB_SQLPROF Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r10c1-t7 r1c2-t7">
<p>Uses the profile data stored in the staging table to create profiles on this system</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p>The <a href="#CHDHJFGG">Summary of DBMS_SQLTUNE Subprograms</a> contains a complete listing of all subprograms in the package.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS72936" class="refsect2"><a id="CHDGHEAG"></a>
<h3 class="refsect2">SQL Tuning Set Subprograms</h3>
<p>This subprogram group provides an interface to manage SQL tuning sets.</p>
<div id="ARPLS72937" class="tblformal">
<p class="titleintable"><a id="sthref10041"></a><a id="sthref10042"></a>Table 154-4 SQL Tuning Set Subprograms</p>
<table class="cellalignment4330" title="SQL Tuning Set Subprograms" summary="This table lists the SQL Tuning Set subprograms of DBMS_SQLTUNE in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t8">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t8" headers="r1c1-t8">
<p><a href="#i1006814">ADD_SQLSET_REFERENCE Function</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t8 r1c2-t8">
<p>Adds a new reference to an existing SQL tuning set to indicate its use by a client</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t8" headers="r1c1-t8">
<p><a href="#CACJHDDC">CAPTURE_CURSOR_CACHE_SQLSET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t8 r1c2-t8">
<p>Over a specified time interval incrementally captures a workload from the shared SQL area into a SQL tuning set</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t8" headers="r1c1-t8">
<p><a href="#i1006897">CREATE_SQLSET Procedure and Function</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t8 r1c2-t8">
<p>Creates a SQL tuning set object in the database</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t8" headers="r1c1-t8">
<p><a href="#CACBCEEH">CREATE_STGTAB_SQLSET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r5c1-t8 r1c2-t8">
<p>Creates a staging table through which SQL Tuning Sets are imported and exported</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t8" headers="r1c1-t8">
<p><a href="#i1006898">DELETE_SQLSET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r6c1-t8 r1c2-t8">
<p>Deletes a set of SQL statements from a SQL tuning set</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t8" headers="r1c1-t8">
<p><a href="#i1007711">DROP_SQLSET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r7c1-t8 r1c2-t8">
<p>Drops a SQL tuning set if it is not active</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t8" headers="r1c1-t8">
<p><a href="#i1006951">LOAD_SQLSET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r8c1-t8 r1c2-t8">
<p>Populates the SQL tuning set with a set of selected SQL</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t8" headers="r1c1-t8">
<p><a href="#CACIFBAJ">PACK_STGTAB_SQLSET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r9c1-t8 r1c2-t8">
<p>Copies tuning sets out of the <code dir="ltr">SYS</code> schema into the staging table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t8" headers="r1c1-t8">
<p><a href="#i1006952">REMOVE_SQLSET_REFERENCE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r10c1-t8 r1c2-t8">
<p>Deactivates a SQL tuning set to indicate it is no longer used by the client</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t8" headers="r1c1-t8">
<p><a href="#i1010615">SELECT_CURSOR_CACHE Function</a></p>
</td>
<td class="cellalignment4329" headers="r11c1-t8 r1c2-t8">
<p>Collects SQL statements from the shared SQL area</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t8" headers="r1c1-t8">
<p><a href="#CACBBIEH">SELECT_SQL_TRACE Function</a></p>
</td>
<td class="cellalignment4329" headers="r12c1-t8 r1c2-t8">
<p>Reads the content of one or more trace files and returns the SQL statements it finds in the format of <code dir="ltr">sqlset_row</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t8" headers="r1c1-t8">
<p><a href="#CACEFBJH">SELECT_SQLPA_TASK Function</a></p>
</td>
<td class="cellalignment4329" headers="r13c1-t8 r1c2-t8">
<p>Collects SQL statements from a SQL performance analyzer comparison task</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t8" headers="r1c1-t8">
<p><a href="#CHEHBBDF">SELECT_SQLSET Function</a></p>
</td>
<td class="cellalignment4329" headers="r14c1-t8 r1c2-t8">
<p>Collects SQL statements from an existing SQL tuning set</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t8" headers="r1c1-t8">
<p><a href="#i1009198">SELECT_WORKLOAD_REPOSITORY Function</a></p>
</td>
<td class="cellalignment4329" headers="r15c1-t8 r1c2-t8">
<p>Collects SQL statements from the workload repository</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t8" headers="r1c1-t8">
<p><a href="#CACJDGFI">UNPACK_STGTAB_SQLSET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r16c1-t8 r1c2-t8">
<p>Copies one or more SQL tuning sets from the staging table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t8" headers="r1c1-t8">
<p><a href="#i1007011">UPDATE_SQLSET Procedures</a></p>
</td>
<td class="cellalignment4329" headers="r17c1-t8 r1c2-t8">
<p>Updates whether selected string fields for a SQL statement in a SQL tuning set or the set numerical attributes of a SQL in a SQL tuning set</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p>The <a href="#CHDHJFGG">Summary of DBMS_SQLTUNE Subprograms</a> contains a complete listing of all subprograms in the package.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS74961" class="refsect2"><a id="sthref10043"></a>
<h3 class="refsect2"><a id="sthref10044"></a>Real-Time SQL Monitoring Subprograms</h3>
<p>This subprogram group provides function to report on monitoring data collected in <code dir="ltr">V$SQL_MONITOR</code> and <code dir="ltr">V$SQL_PLAN_MONITOR</code>.</p>
<div id="ARPLS74962" class="tblformal">
<p class="titleintable"><a id="sthref10045"></a><a id="sthref10046"></a>Table 154-5 Real-Time SQL Monitoring Subprograms</p>
<table class="cellalignment4330" title="Real-Time SQL Monitoring Subprograms" summary="This table lists the SQL Tuning Set subprograms of DBMS_SQLTUNE in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t9">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t9" headers="r1c1-t9">
<p><a href="#CACHCDGD">REPORT_SQL_MONITOR Function</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t9 r1c2-t9">
<p>Reports on Real-Time SQL Monitoring</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t9" headers="r1c1-t9">
<p><a href="#CACJHGEC">REPORT_SQL_MONITOR_LIST Function</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t9 r1c2-t9">
<p>Builds a report for all or a sub-set of statements monitored by Oracle</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72940" class="refsect2"><a id="CHDECAHH"></a>
<h3 class="refsect2"><a id="sthref10047"></a>SQL Performance Reporting Subprograms</h3>
<p>This subprogram group provides detailed reports on SQL performance using statistics from the shared SQL area and automatic workload repository (AWR).</p>
<div id="ARPLS72941" class="tblformal">
<p class="titleintable"><a id="sthref10048"></a><a id="sthref10049"></a>Table 154-6 SQL Performance Reporting Subprograms</p>
<table class="cellalignment4330" title="SQL Performance Reporting Subprograms" summary="This table lists the SQL Performance Reporting Subprograms of DBMS_SQLTUNE in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t10">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t10" headers="r1c1-t10">
<p><a href="#CHDIDGFA">REPORT_SQL_DETAIL Function</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t10 r1c2-t10">
<p>Reports on a specific SQLID</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="CHDHJFGG"></a>
<div id="ARPLS68396" class="refsect1">
<h2 class="refsect1">Summary of DBMS_SQLTUNE Subprograms</h2>
<div id="ARPLS68397" class="tblformal">
<p class="titleintable"><a id="sthref10050"></a><a id="sthref10051"></a>Table 154-7 DBMS_SQLTUNE Package Subprograms</p>
<table class="cellalignment4330" title="DBMS_SQLTUNE Package Subprograms " summary="This table lists the DBMS_SQLTUNE subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t11">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t11">Description</th>
<th class="cellalignment4328" id="r1c3-t11">Group</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t11" headers="r1c1-t11">
<p><a href="#CACEIFDE">ACCEPT_ALL_SQL_PROFILES Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t11 r1c2-t11">
<p>Accepts all SQL profiles recommended by a particular execution of a particular tuning task</p>
</td>
<td class="cellalignment4329" headers="r2c1-t11 r1c3-t11">
<p><a href="#CHDCJJGF">SQL Profile Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t11" headers="r1c1-t11">
<p><a href="#i1010403">ACCEPT_SQL_PROFILE Procedure and Function</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t11 r1c2-t11">
<p>Creates a SQL profile for the specified tuning task</p>
</td>
<td class="cellalignment4329" headers="r3c1-t11 r1c3-t11">
<p><a href="#CHDCJJGF">SQL Profile Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t11" headers="r1c1-t11">
<p><a href="#i1006814">ADD_SQLSET_REFERENCE Function</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t11 r1c2-t11">
<p>Adds a new reference to an existing SQL tuning set to indicate its use by a client</p>
</td>
<td class="cellalignment4329" headers="r4c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t11" headers="r1c1-t11">
<p><a href="#i1008294">ALTER_SQL_PROFILE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r5c1-t11 r1c2-t11">
<p>Alters specific attributes of an existing SQL profile object</p>
</td>
<td class="cellalignment4329" headers="r5c1-t11 r1c3-t11">
<p><a href="#CHDCJJGF">SQL Profile Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t11" headers="r1c1-t11">
<p><a href="#CHDCHFDB">CANCEL_TUNING_TASK Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r6c1-t11 r1c2-t11">
<p>Cancels the currently executing tuning task</p>
</td>
<td class="cellalignment4329" headers="r6c1-t11 r1c3-t11">
<p><a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t11" headers="r1c1-t11">
<p><a href="#CACJHDDC">CAPTURE_CURSOR_CACHE_SQLSET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r7c1-t11 r1c2-t11">
<p>Over a specified time interval incrementally captures a workload from the shared SQL area into a SQL tuning set</p>
</td>
<td class="cellalignment4329" headers="r7c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t11" headers="r1c1-t11">
<p><a href="#CHDFECGH">CREATE_SQL_PLAN_BASELINE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r8c1-t11 r1c2-t11">
<p>Creates a SQL plan baseline for an existing plan</p>
</td>
<td class="cellalignment4329" headers="r8c1-t11 r1c3-t11">
<p><a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t11" headers="r1c1-t11">
<p><a href="#i1006897">CREATE_SQLSET Procedure and Function</a></p>
</td>
<td class="cellalignment4329" headers="r9c1-t11 r1c2-t11">
<p>Creates a SQL tuning set object in the database</p>
</td>
<td class="cellalignment4329" headers="r9c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t11" headers="r1c1-t11">
<p><a href="#CACHIGBF">CREATE_STGTAB_SQLPROF Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r10c1-t11 r1c2-t11">
<p>Creates the staging table used for copying SQL profiles from one system to another</p>
</td>
<td class="cellalignment4329" headers="r10c1-t11 r1c3-t11">
<p><a href="#CHDCJJGF">SQL Profile Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t11" headers="r1c1-t11">
<p><a href="#CACBCEEH">CREATE_STGTAB_SQLSET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r11c1-t11 r1c2-t11">
<p>Creates a staging table through which SQL tuning sets are imported and exported</p>
</td>
<td class="cellalignment4329" headers="r11c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t11" headers="r1c1-t11">
<p><a href="#CHDGBCDB">CREATE_TUNING_TASK Functions</a></p>
</td>
<td class="cellalignment4329" headers="r12c1-t11 r1c2-t11">
<p>Creates a tuning of a single statement or SQL tuning set for either SQL Tuning Advisor</p>
</td>
<td class="cellalignment4329" headers="r12c1-t11 r1c3-t11">
<p><a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t11" headers="r1c1-t11">
<p><a href="#i1006898">DELETE_SQLSET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r13c1-t11 r1c2-t11">
<p>Deletes a set of SQL statements from a SQL tuning set</p>
</td>
<td class="cellalignment4329" headers="r13c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t11" headers="r1c1-t11">
<p><a href="#i1007819">DROP_SQL_PROFILE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r14c1-t11 r1c2-t11">
<p>Drops the named SQL profile from the database</p>
</td>
<td class="cellalignment4329" headers="r14c1-t11 r1c3-t11">
<p><a href="#CHDCJJGF">SQL Profile Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t11" headers="r1c1-t11">
<p><a href="#i1007711">DROP_SQLSET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r15c1-t11 r1c2-t11">
<p>Drops a SQL tuning set if it is not active</p>
</td>
<td class="cellalignment4329" headers="r15c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t11" headers="r1c1-t11">
<p><a href="#CHDIGHHA">DROP_TUNING_TASK Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r16c1-t11 r1c2-t11">
<p>Drops a SQL tuning task</p>
</td>
<td class="cellalignment4329" headers="r16c1-t11 r1c3-t11">
<p><a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t11" headers="r1c1-t11">
<p><a href="#CHDGEJJA">EXECUTE_TUNING_TASK Function and Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r17c1-t11 r1c2-t11">
<p>Executes a previously created tuning task</p>
</td>
<td class="cellalignment4329" headers="r17c1-t11 r1c3-t11">
<p><a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t11" headers="r1c1-t11">
<p><a href="#BABIECBJ">IMPLEMENT_TUNING_TASK Function</a></p>
</td>
<td class="cellalignment4329" headers="r18c1-t11 r1c2-t11">
<p>implements a set of SQL profile recommendations made by SQL Tuning Advisor</p>
</td>
<td class="cellalignment4329" headers="r18c1-t11 r1c3-t11">
<p><a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r19c1-t11" headers="r1c1-t11">
<p><a href="#CHDFIFAF">INTERRUPT_TUNING_TASK Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r19c1-t11 r1c2-t11">
<p>Interrupts the currently executing tuning task</p>
</td>
<td class="cellalignment4329" headers="r19c1-t11 r1c3-t11">
<p><a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r20c1-t11" headers="r1c1-t11">
<p><a href="#i1006951">LOAD_SQLSET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r20c1-t11 r1c2-t11">
<p>Populates the SQL tuning set with a set of selected SQL</p>
</td>
<td class="cellalignment4329" headers="r20c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r21c1-t11" headers="r1c1-t11">
<p><a href="#CACFCAEC">PACK_STGTAB_SQLPROF Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r21c1-t11 r1c2-t11">
<p>Moves profile data out of the <code dir="ltr">SYS</code> schema into the staging table</p>
</td>
<td class="cellalignment4329" headers="r21c1-t11 r1c3-t11">
<p><a href="#CHDCJJGF">SQL Profile Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r22c1-t11" headers="r1c1-t11">
<p><a href="#CACIFBAJ">PACK_STGTAB_SQLSET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r22c1-t11 r1c2-t11">
<p>Moves tuning sets out of the <code dir="ltr">SYS</code> schema into the staging table</p>
</td>
<td class="cellalignment4329" headers="r22c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r23c1-t11" headers="r1c1-t11">
<p><a href="#CACGGJBG">REMAP_STGTAB_SQLPROF Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r23c1-t11 r1c2-t11">
<p>Changes the profile data values kept in the staging table prior to performing an unpack operation</p>
</td>
<td class="cellalignment4329" headers="r23c1-t11 r1c3-t11">
<p><a href="#CHDCJJGF">SQL Profile Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r24c1-t11" headers="r1c1-t11">
<p><a href="#CACIFDFG">REMAP_STGTAB_SQLSET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r24c1-t11 r1c2-t11">
<p>Changes the tuning set names and owners in the staging table so that they can be unpacked with different values than they had on the host system</p>
</td>
<td class="cellalignment4329" headers="r24c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r25c1-t11" headers="r1c1-t11">
<p><a href="#i1006952">REMOVE_SQLSET_REFERENCE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r25c1-t11 r1c2-t11">
<p>Deactivates a SQL tuning set to indicate it is no longer used by the client</p>
</td>
<td class="cellalignment4329" headers="r25c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r26c1-t11" headers="r1c1-t11">
<p><a href="#CACFICAE">REPORT_AUTO_TUNING_TASK Function</a></p>
</td>
<td class="cellalignment4329" headers="r26c1-t11 r1c2-t11">
<p>Displays a report from the automatic tuning task, reporting on a range of subtasks</p>
</td>
<td class="cellalignment4329" headers="r26c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r27c1-t11" headers="r1c1-t11">
<p><a href="#CHDIDGFA">REPORT_SQL_DETAIL Function</a></p>
</td>
<td class="cellalignment4329" headers="r27c1-t11 r1c2-t11">
<p>Reports on a specific SQLID</p>
</td>
<td class="cellalignment4329" headers="r27c1-t11 r1c3-t11">
<p><a href="#CHDECAHH">SQL Performance Reporting Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r28c1-t11" headers="r1c1-t11">
<p><a href="#CHDGEIHJ">REPORT_TUNING_TASK Function</a></p>
</td>
<td class="cellalignment4329" headers="r28c1-t11 r1c2-t11">
<p>Displays the results of a tuning task</p>
</td>
<td class="cellalignment4329" headers="r28c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r29c1-t11" headers="r1c1-t11">
<p><a href="#CHDJEHBG">RESET_TUNING_TASK Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r29c1-t11 r1c2-t11">
<p>Resets the currently executing tuning task to its initial state</p>
</td>
<td class="cellalignment4329" headers="r29c1-t11 r1c3-t11">
<p><a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r30c1-t11" headers="r1c1-t11">
<p><a href="#CHDJEABC">RESUME_TUNING_TASK Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r30c1-t11 r1c2-t11">
<p>Resumes a previously interrupted task that was created to process a SQL tuning set</p>
</td>
<td class="cellalignment4329" headers="r30c1-t11 r1c3-t11">
<p><a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r31c1-t11" headers="r1c1-t11">
<p><a href="#CACGDDAH">SCHEDULE_TUNING_TASK Function</a></p>
</td>
<td class="cellalignment4329" headers="r31c1-t11 r1c2-t11">
<p>Creates a SQL tuning task and schedule its execution as a scheduler job</p>
</td>
<td class="cellalignment4329" headers="r31c1-t11 r1c3-t11">
<p><a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r32c1-t11" headers="r1c1-t11">
<p><a href="#CHDCHDED">SCRIPT_TUNING_TASK Function</a></p>
</td>
<td class="cellalignment4329" headers="r32c1-t11 r1c2-t11">
<p>Creates a SQL*PLUS script which can then be executed to implement a set of SQL Tuning Advisor recommendations</p>
</td>
<td class="cellalignment4329" headers="r32c1-t11 r1c3-t11">
<p><a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r33c1-t11" headers="r1c1-t11">
<p><a href="#i1010615">SELECT_CURSOR_CACHE Function</a></p>
</td>
<td class="cellalignment4329" headers="r33c1-t11 r1c2-t11">
<p>Collects SQL statements from the shared SQL area</p>
</td>
<td class="cellalignment4329" headers="r33c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r34c1-t11" headers="r1c1-t11">
<p><a href="#CACBBIEH">SELECT_SQL_TRACE Function</a></p>
</td>
<td class="cellalignment4329" headers="r34c1-t11 r1c2-t11">
<p>Reads the content of one or more trace files and returns the SQL statements it finds in the format of <code dir="ltr">sqlset_row</code></p>
</td>
<td class="cellalignment4329" headers="r34c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r35c1-t11" headers="r1c1-t11">
<p><a href="#CHEHBBDF">SELECT_SQLSET Function</a></p>
</td>
<td class="cellalignment4329" headers="r35c1-t11 r1c2-t11">
<p>Collects SQL statements from an existing SQL tuning set</p>
</td>
<td class="cellalignment4329" headers="r35c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r36c1-t11" headers="r1c1-t11">
<p><a href="#i1009198">SELECT_WORKLOAD_REPOSITORY Function</a></p>
</td>
<td class="cellalignment4329" headers="r36c1-t11 r1c2-t11">
<p>Collects SQL statements from the workload repository</p>
</td>
<td class="cellalignment4329" headers="r36c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r37c1-t11" headers="r1c1-t11">
<p><a href="#CHDGAJDB">SET_TUNING_TASK_PARAMETER Procedures</a></p>
</td>
<td class="cellalignment4329" headers="r37c1-t11 r1c2-t11">
<p>Updates the value of a SQL tuning parameter of type <code dir="ltr">VARCHAR2</code> or <code dir="ltr">NUMBER</code></p>
</td>
<td class="cellalignment4329" headers="r37c1-t11 r1c3-t11">
<p><a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r38c1-t11" headers="r1c1-t11">
<p><a href="#CACHJDEG">SQLTEXT_TO_SIGNATURE Function</a></p>
</td>
<td class="cellalignment4329" headers="r38c1-t11 r1c2-t11">
<p>Returns a SQL text&#39;s signature</p>
</td>
<td class="cellalignment4329" headers="r38c1-t11 r1c3-t11">
<p><a href="#CHDCJJGF">SQL Profile Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r39c1-t11" headers="r1c1-t11">
<p><a href="#CACDIJJE">UNPACK_STGTAB_SQLPROF Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r39c1-t11 r1c2-t11">
<p>Uses the profile data stored in the staging table to create profiles on this system</p>
</td>
<td class="cellalignment4329" headers="r39c1-t11 r1c3-t11">
<p><a href="#CHDCJJGF">SQL Profile Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r40c1-t11" headers="r1c1-t11">
<p><a href="#CACJDGFI">UNPACK_STGTAB_SQLSET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r40c1-t11 r1c2-t11">
<p>Moves one or more SQL tuning sets from the staging table</p>
</td>
<td class="cellalignment4329" headers="r40c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r41c1-t11" headers="r1c1-t11">
<p><a href="#i1007011">UPDATE_SQLSET Procedures</a></p>
</td>
<td class="cellalignment4329" headers="r41c1-t11 r1c2-t11">
<p>Updates selected fields for a SQL statement in a SQL tuning set</p>
</td>
<td class="cellalignment4329" headers="r41c1-t11 r1c3-t11">
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS74763" class="refsect2"><a id="CACEIFDE"></a>
<h3 class="refsect2">ACCEPT_ALL_SQL_PROFILES Procedure</h3>
<p>This procedure accepts all SQL profiles recommended by a specific execution of a tuning task, and sets the attributes of the SQL profiles according to the parameter values passed by the user.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDCJJGF">SQL Profile Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10052"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.ACCEPT_ALL_SQL_PROFILES (
   task_name       IN VARCHAR2,
   category        IN VARCHAR2 := NULL,
   replace         IN BOOLEAN  := FALSE,
   force_match     IN BOOLEAN  := FALSE,
   profile_type    IN VARCHAR2 := REGULAR_PROFILE,
   autotune_period IN NUMBER   := NULL,
   execution_name  IN VARCHAR2 := NULL,
   task_owner      IN VARCHAR2 := NULL,
   description     IN VARCHAR2 := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10053"></a>Parameters</p>
<div id="ARPLS74764" class="tblformal">
<p class="titleintable"><a id="sthref10054"></a><a id="sthref10055"></a>Table 154-8 ACCEPT_ALL_SQL_PROFILES Procedure Parameters</p>
<table class="cellalignment4330" title="ACCEPT_ALL_SQL_PROFILES Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.ACCEPT_SQL_PROFILE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t13">Parameter</th>
<th class="cellalignment4328" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t13" headers="r1c1-t13">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t13 r1c2-t13">
<p>The (mandatory) name of the SQL tuning task</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t13" headers="r1c1-t13">
<p><code dir="ltr">category</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t13 r1c2-t13">
<p>This is the category name which must match the value of the <code dir="ltr">SQLTUNE_CATEGORY</code> parameter in a session for the session to use this SQL profile. It defaults to the value &#34;<code dir="ltr">DEFAULT</code>&#34;. This is also the default of the <code dir="ltr">SQLTUNE_CATEGORY</code> parameter. The category must be a valid Oracle identifier. The category name specified is always converted to upper case. The combination of the normalized SQL text and category name creates a unique key for a SQL profile. An <code dir="ltr">ACCEPT_SQL_PROFILE</code> fails if this combination is duplicated.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t13" headers="r1c1-t13">
<p><code dir="ltr">replace</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t13 r1c2-t13">
<p>If the profile already exists, it is replaced if this argument is <code dir="ltr">TRUE</code>. It is an error to pass a name that is already being used for another signature/category pair, even with replace set to <code dir="ltr">TRUE</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t13" headers="r1c1-t13">
<p><code dir="ltr">force_match</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t13 r1c2-t13">
<p>If <code dir="ltr">TRUE</code> this causes SQL profiles to target all SQL statements which have the same text after normalizing all literal values into bind variables. (Note that if a combination of literal values and bind values is used in a SQL statement, no bind transformation occurs.) This is analogous to the matching algorithm used by the <code dir="ltr">FORCE</code> option of the <code dir="ltr">cursor_sharing</code> parameter.</p>
<p>If <code dir="ltr">FALSE</code>, literals are not transformed. This is analogous to the matching algorithm used by the <code dir="ltr">EXACT</code> option of the <code dir="ltr">cursor_sharing</code> parameter.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t13" headers="r1c1-t13">
<p><code dir="ltr">profile_type</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t13 r1c2-t13">
<p>Options:</p>
<ul>
<li>
<p><code dir="ltr">REGULAR_PROFILE</code> - profile without a change to parallel execution (Default, equivalent to <code dir="ltr">NULL</code>). Note that if the SQL statement currently has a parallel execution plan, the regular profile will cause the optimizer to choose a different, but still parallel, execution plan.</p>
</li>
<li>
<p><code dir="ltr">PX_PROFILE</code> - regular profile with a change to parallel execution</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t13" headers="r1c1-t13">
<p><code dir="ltr">autotune_period</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t13 r1c2-t13">
<p>The time period for the automatic SQL tuning. This setting applies only to the automatic SQL Tuning Advisor task. Possible values are as follows:</p>
<ul>
<li>
<p>null or negative value (default) - all or full. The result includes all task executions.</p>
</li>
<li>
<p><code dir="ltr">0</code> - result of the current or most recent task execution.</p>
</li>
<li>
<p><code dir="ltr">1</code> - result for the most recent 24-hour period.</p>
</li>
<li>
<p><code dir="ltr">7</code> - result for the most recent 7-day period.</p>
</li>
</ul>
<p>The procedure interprets any other value as the time of the most recent task execution minus the value of this argument.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t13" headers="r1c1-t13">
<p><code dir="ltr">execution_name</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t13 r1c2-t13">
<p>Name of the task execution to use. If null, then the procedure generates the report for the most recent task execution.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t13" headers="r1c1-t13">
<p><code dir="ltr">task_owner</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t13 r1c2-t13">
<p>Owner of the tuning task. This is an optional parameter that must be specified to accept a SQL profile associated to a tuning task owned by another user. The current user is the default value.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t13" headers="r1c1-t13">
<p><code dir="ltr">description</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t13 r1c2-t13">
<p>A user specified string describing the purpose of the SQL profile. The description is truncated if longer than 256 characters. The maximum size is 500 characters.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10056"></a>Usage Notes</p>
<p>The <code dir="ltr">CREATE</code> <code dir="ltr">ANY</code> <code dir="ltr">SQL PROFILE</code> privilege is required.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68398" class="refsect2"><a id="i1010403"></a>
<h3 class="refsect2"><a id="sthref10057"></a>ACCEPT_SQL_PROFILE Procedure and Function</h3>
<p>This procedure creates a SQL profile recommended by SQL Tuning Advisor. The SQL text is normalized for matching purposes though it is stored in the data dictionary in de-normalized form for readability. SQL text is provided through a reference to the SQL Tuning task. If the referenced SQL statement doesn&#39;t exist, an error is reported.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDCJJGF">SQL Profile Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10058"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.ACCEPT_SQL_PROFILE (
   task_name    IN  VARCHAR2,
   object_id    IN  NUMBER   := NULL,
   name         IN  VARCHAR2 := NULL,
   description  IN  VARCHAR2 := NULL,
   category     IN  VARCHAR2 := NULL);
   task_owner   IN VARCHAR2  := NULL,
   replace      IN BOOLEAN   := FALSE,
   force_match  IN BOOLEAN   := FALSE,
   profile_type IN VARCHAR2  := REGULAR_PROFILE);
</pre>
<pre dir="ltr">DBMS_SQLTUNE.ACCEPT_SQL_PROFILE (
   task_name    IN  VARCHAR2,
   object_id    IN  NUMBER   := NULL,
   name         IN  VARCHAR2 := NULL,
   description  IN  VARCHAR2 := NULL,
   category     IN  VARCHAR2 := NULL;
   task_owner   IN VARCHAR2  := NULL,
   replace      IN BOOLEAN   := FALSE,
   force_match  IN BOOLEAN   := FALSE,
   profile_type IN VARCHAR2  := REGULAR_PROFILE)
 RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10059"></a>Parameters</p>
<div id="ARPLS68399" class="tblformal">
<p class="titleintable"><a id="sthref10060"></a><a id="sthref10061"></a>Table 154-9 ACCEPT_SQL_PROFILE Procedure and Function Parameters</p>
<table class="cellalignment4330" title="ACCEPT_SQL_PROFILE Procedure and Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.ACCEPT_SQL_PROFILE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t15">Parameter</th>
<th class="cellalignment4328" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t15" headers="r1c1-t15">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t15 r1c2-t15">
<p>The (mandatory) name of the SQL tuning task</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t15" headers="r1c1-t15">
<p><code dir="ltr">object_id</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t15 r1c2-t15">
<p>The identifier of the advisor framework object representing the SQL statement associated with the tuning task</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t15" headers="r1c1-t15">
<p><code dir="ltr">name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t15 r1c2-t15">
<p>The name of the SQL profile. It cannot contain double quotation marks. The name is case sensitive. If not specified, the system generates a unique name for the SQL profile.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t15" headers="r1c1-t15">
<p><code dir="ltr">description</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t15 r1c2-t15">
<p>A user specified string describing the purpose of the SQL profile. The description is truncated if longer than 256 characters. The maximum size is 500 characters.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t15" headers="r1c1-t15">
<p><code dir="ltr">category</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t15 r1c2-t15">
<p>This is the category name which must match the value of the <code dir="ltr">SQLTUNE_CATEGORY</code> parameter in a session for the session to use this SQL profile. It defaults to the value &#34;<code dir="ltr">DEFAULT</code>&#34;. This is also the default of the <code dir="ltr">SQLTUNE_CATEGORY</code> parameter. The category must be a valid Oracle identifier. The category name specified is always converted to upper case. The combination of the normalized SQL text and category name creates a unique key for a SQL profile. An <code dir="ltr">ACCEPT_SQL_PROFILE</code> fails if this combination is duplicated.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t15" headers="r1c1-t15">
<p><code dir="ltr">task_owner</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t15 r1c2-t15">
<p>Owner of the tuning task. This is an optional parameter that has to be specified to accept a SQL profile associated to a tuning task owned by another user. The current user is the default value.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t15" headers="r1c1-t15">
<p><code dir="ltr">replace</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t15 r1c2-t15">
<p>If the profile already exists, it is replaced if this argument is <code dir="ltr">TRUE</code>. It is an error to pass a name that is already being used for another signature/category pair, even with replace set to <code dir="ltr">TRUE</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t15" headers="r1c1-t15">
<p><code dir="ltr">force_match</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t15 r1c2-t15">
<p>If <code dir="ltr">TRUE</code> this causes SQL profiles to target all SQL statements which have the same text after normalizing all literal values into bind variables. (Note that if a combination of literal values and bind values is used in a SQL statement, no bind transformation occurs.) This is analogous to the matching algorithm used by the <code dir="ltr">FORCE</code> option of the <code dir="ltr">cursor_sharing</code> parameter.</p>
<p>If <code dir="ltr">FALSE</code>, literals are not transformed. This is analogous to the matching algorithm used by the <code dir="ltr">EXACT</code> option of the <code dir="ltr">cursor_sharing</code> parameter.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t15" headers="r1c1-t15">
<p><code dir="ltr">profile_type</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t15 r1c2-t15">
<p>Options:</p>
<ul>
<li>
<p><code dir="ltr">REGULAR_PROFILE</code> - profile without a change to parallel execution (Default, equivalent to <code dir="ltr">NULL</code>). Note that if the SQL statement currently has a parallel execution plan, the regular profile will cause the optimizer to choose a different, but still parallel, execution plan.</p>
</li>
<li>
<p><code dir="ltr">PX_PROFILE</code> - regular profile with a change to parallel execution</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10062"></a>Return Values</p>
<p>The name of the SQL profile.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10063"></a>Usage Notes</p>
<p>The <code dir="ltr">CREATE</code> <code dir="ltr">ANY</code> <code dir="ltr">SQL PROFILE</code> privilege is required.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10064"></a>Examples</p>
<p>You use both the procedure and the function versions of the subprogram in the same way except you must specify a return value to invoke the function. Here we give examples of the procedure only.</p>
<p>In this example, you tune a single SQL statement form the workload repository and you create the SQL profile recommended by SQL Tuning Advisor.</p>
<pre dir="ltr">variable stmt_task VARCHAR2(64);
variable sts_task VARCHAR2(64);
 
-- create a tuning task tune the statement 
EXEC :stmt_task := DBMS_SQLTUNE.CREATE_TUNING_TASK(
   begin_snap  =&gt; 1, -
   end_snap    =&gt; 2, -
   sql_id      =&gt; &#39;ay1m3ssvtrh24&#39;);
 
-- execute the resulting task 
EXEC DBMS_SQLTUNE.EXECUTE_TUNING_TASK(:stmt_task);
 
EXEC DBMS_SQLTUNE.ACCEPT_SQL_PROFILE(:stmt_task);
 
</pre>
<p>Note that you do not have to specify the ID (that is, <code dir="ltr">object_id</code>) for the advisor framework object created by SQL Tuning Advisor to represent the tuned SQL statement.</p>
<p>You might also want to accept the recommended SQL profile in a different category, (for example, <code dir="ltr">TEST</code>), so that it is not used by default.</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.ACCEPT_SQL_PROFILE (
   task_name  =&gt;  :stmt_task, -
   category   =&gt;  &#39;TEST&#39;);
</pre>
<p>You can use command <code dir="ltr">ALTER</code> <code dir="ltr">SESSION</code> <code dir="ltr">SET</code> <code dir="ltr">SQLTUNE_CATEGORY</code> = <code dir="ltr">&#39;TEST&#39;</code> to see how this profile behaves.</p>
<p>The following call creates a SQL profile that targets any SQL statement with the same <code dir="ltr">force_matching_signature</code> as the tuned statement.</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.ACCEPT_SQL_PROFILE (task_name   =&gt;  :stmt_task, -
                                      force_match =&gt;  TRUE);
</pre>
<p>In the following example, you tune a SQL tuning set, and you create a SQL profile for only one of the SQL statements in the SQL tuning set. The SQL statement is represented by an advisor framework object with ID equal to &#39;5&#39;. Please notice that you must pass an object id to the <code dir="ltr">ACCEPT_SQL_PROFILE</code> procedure because there are potentially many SQL profiles for the tuning task. This object id is given along with the report.</p>
<pre dir="ltr">EXEC :sts_task := DBMS_SQLTUNE.CREATE_TUNING_TASK ( -
  sqlset_name   =&gt; &#39;my_workload&#39;,  -
  rank1         =&gt; &#39;ELAPSED_TIME&#39;, -
  time_limit    =&gt; 3600,           -
  description   =&gt; &#39;my workload ordered by elapsed time&#39;);
 
-- execute the resulting task 
EXEC DBMS_SQLTUNE.EXECUTE_TUNING_TASK(:sts_task);

 -- create the profile for the sql statement corresponding to object_id = 5.
EXEC DBMS_SQLTUNE.ACCEPT_SQL_PROFILE (
   task_name  =&gt;  :sts_task, -
   object_id  =&gt;  5);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68400" class="refsect2"><a id="i1006814"></a>
<h3 class="refsect2"><a id="sthref10065"></a>ADD_SQLSET_REFERENCE Function</h3>
<p>This procedure adds a new reference to an existing SQL tuning set to indicate its use by a client.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10066"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.ADD_SQLSET_REFERENCE (
   sqlset_name  IN  VARCHAR2,
   description  IN  VARCHAR2 := NULL)
 RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10067"></a>Parameters</p>
<div id="ARPLS68401" class="tblformal">
<p class="titleintable"><a id="sthref10068"></a><a id="sthref10069"></a>Table 154-10 ADD_SQLSET_REFERENCE Function Parameters</p>
<table class="cellalignment4330" title="ADD_SQLSET_REFERENCE Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.ADD_SQLSET_REFERENCE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t17">Parameter</th>
<th class="cellalignment4328" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t17" headers="r1c1-t17">
<p><code dir="ltr">sqlset_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t17 r1c2-t17">
<p>The SQL tuning set name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t17" headers="r1c1-t17">
<p><code dir="ltr">description</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t17 r1c2-t17">
<p>The description of the usage of SQL tuning set. The description is truncated if longer than 256 characters.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10070"></a>Return Values</p>
<p>The identifier of the added reference.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10071"></a>Examples</p>
<p>You can add reference to a SQL tuning set. This prevents the tuning set from being modified while it is being used. References are automatically added when you invoke SQL Tuning Advisor on the SQL tuning set, so you should use this function for custom purposes only.The function returns a reference ID that is used to remove it later. You use the <code dir="ltr">REMOVE_SQLSET_REFERENCE Procedure</code> to delete references to a SQL tuning set.</p>
<pre dir="ltr"> 
variable rid number; 
EXEC :rid := DBMS_SQLTUNE.ADD_SQLSET_REFERENCE( -
                                sqlset_name =&gt; &#39;my_workload&#39;, -
                                description =&gt; &#39;my sts reference&#39;);
</pre>
<p>You can use the views <code dir="ltr">USER/DBA_SQLSET_REFERENCES</code> to find all references on a given SQL tuning set.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68402" class="refsect2"><a id="i1008294"></a>
<h3 class="refsect2"><a id="sthref10072"></a>ALTER_SQL_PROFILE Procedure</h3>
<p>This procedure alters specific attributes of an existing SQL profile object. The following attributes can be altered (using these attribute names):</p>
<ul>
<li>
<p>&#34;<code dir="ltr">STATUS</code>&#34; can be set to &#34;<code dir="ltr">ENABLED</code>&#34; or &#34;<code dir="ltr">DISABLED</code>&#34;</p>
</li>
<li>
<p>&#34;<code dir="ltr">NAME</code>&#34; can be reset to a valid name which must be a valid Oracle identifier and must be unique.</p>
</li>
<li>
<p>&#34;<code dir="ltr">DESCRIPTION</code>&#34; can be set to any string of size no more than 500 characters</p>
</li>
<li>
<p>&#34;<code dir="ltr">CATEGORY</code>&#34; can be reset to a valid category name which must be a valid Oracle identifier and must be unique when combined with normalized SQL text)</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDCJJGF">SQL Profile Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10073"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.ALTER_SQL_PROFILE (
   name                 IN  VARCHAR2,
   attribute_name       IN  VARCHAR2,
   value                IN  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10074"></a>Parameters</p>
<div id="ARPLS68403" class="tblformal">
<p class="titleintable"><a id="sthref10075"></a><a id="sthref10076"></a>Table 154-11 ALTER_SQL_PROFILE Procedure Parameters</p>
<table class="cellalignment4330" title="ALTER_SQL_PROFILE Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.ALTER_SQL_PROFILE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t19">Parameter</th>
<th class="cellalignment4328" id="r1c2-t19">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t19" headers="r1c1-t19">
<p><code dir="ltr">name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t19 r1c2-t19">
<p>The (mandatory) name of the existing SQL profile to alter</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t19" headers="r1c1-t19">
<p><code dir="ltr">attribute_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t19 r1c2-t19">
<p>The (mandatory) attribute name to alter (case insensitive) using valid attribute names</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t19" headers="r1c1-t19">
<p><code dir="ltr">value</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t19 r1c2-t19">
<p>The (mandatory) new value of the attribute using valid attribute values</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10077"></a>Usage Notes</p>
<p>Requires the <code dir="ltr">ALTER</code> <code dir="ltr">ANY</code> <code dir="ltr">SQL PROFILE</code> privilege.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10078"></a>Examples</p>
<pre dir="ltr">-- Disable a profile, so it is not be used by any sessions.
EXEC DBMS_SQLTUNE.ALTER_SQL_PROFILE ( name            =&gt;  :pname,   -
                                      attribute_name  =&gt;  &#39;STATUS&#39;, -
                                      value           =&gt;  &#39;DISABLED&#39;);
 
-- Enable it back:
EXEC DBMS_SQLTUNE.ALTER_SQL_PROFILE ( name            =&gt;   :pname,   -
                                      attribute_name  =&gt;   &#39;STATUS&#39;, -
                                      value           =&gt;   &#39;ENABLED&#39;);
 
-- Change the category of the profile so it is used only by sessions
-- with category set to TEST.
-- Use ALTER SESSION SET SQLTUNE_CATEGORY = &#39;TEST&#39; to see how this profile 
-- behaves.
EXEC DBMS_SQLTUNE.ALTER_SQL_PROFILE ( name            =&gt;  :pname,   -
                                      attribute_name  =&gt;  &#39;CATEGORY&#39;, -
                                      value           =&gt;  &#39;TEST&#39;);
 
-- Change it back:
EXEC DBMS_SQLTUNE.ALTER_SQL_PROFILE ( name            =&gt;  :pname,   -
                                      attribute_name  =&gt;  &#39;CATEGORY&#39;, -
                                      value           =&gt;  &#39;DEFAULT&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68404" class="refsect2"><a id="CHDCHFDB"></a>
<h3 class="refsect2"><a id="sthref10079"></a>CANCEL_TUNING_TASK Procedure</h3>
<p>This procedure cancels the currently executing tuning task. All intermediate result data is deleted.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10080"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.CANCEL_TUNING_TASK (
 task_name         IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10081"></a>Parameters</p>
<div id="ARPLS68405" class="tblformal">
<p class="titleintable"><a id="sthref10082"></a><a id="sthref10083"></a>Table 154-12 CANCEL_TUNING_TASK Procedure Parameters</p>
<table class="cellalignment4330" title="CANCEL_TUNING_TASK Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.CANCEL_TUNING_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t21">Parameter</th>
<th class="cellalignment4328" id="r1c2-t21">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t21" headers="r1c1-t21">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t21 r1c2-t21">
<p>The name of the task to cancel</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10084"></a>Examples</p>
<p>You cancel a task when you need to stop it executing and do not require to view any already-completed results.</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.CANCEL_TUNING_TASK(:my_task);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68406" class="refsect2"><a id="CACJHDDC"></a>
<h3 class="refsect2"><a id="sthref10085"></a>CAPTURE_CURSOR_CACHE_SQLSET Procedure</h3>
<p>Over a specified time interval this procedure incrementally captures a workload from the shared SQL area into a SQL tuning set. The procedure captures a workload from the shared SQL area into a SQL tuning set, polling the cache multiple times over a time period and updating the workload data stored there. It can execute over as long a period as required to capture an entire system workload.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10086"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.CAPTURE_CURSOR_CACHE_SQLSET (
    sqlset_name         IN VARCHAR2, 
    time_limit          IN POSITIVE := 1800,
    repeat_interval     IN POSITIVE := 300,
    capture_option      IN VARCHAR2 := &#39;MERGE&#39;,
    capture_mode        IN NUMBER   := MODE_REPLACE_OLD_STATS,
    basic_filter        IN VARCHAR2 := NULL,
    sqlset_owner        IN VARCHAR2 := NULL,
    recursive_sql       IN VARCHAR2 := HAS_RECURSIVE_SQL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10087"></a>Parameters</p>
<div id="ARPLS68407" class="tblformal">
<p class="titleintable"><a id="sthref10088"></a><a id="sthref10089"></a>Table 154-13 CAPTURE_CURSOR_CACHE_SQLSET Procedure Parameters</p>
<table class="cellalignment4330" title="CAPTURE_CURSOR_CACHE_SQLSET Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.CAPTURE_CURSOR_CACHE_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t23">Parameter</th>
<th class="cellalignment4328" id="r1c2-t23">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t23" headers="r1c1-t23">
<p><code dir="ltr">sqlset_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t23 r1c2-t23">
<p>The SQL tuning set name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t23" headers="r1c1-t23">
<p><code dir="ltr">time_limit</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t23 r1c2-t23">
<p>The total amount of time, in seconds, to execute</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t23" headers="r1c1-t23">
<p><code dir="ltr">repeat_interval</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t23 r1c2-t23">
<p>The amount of time, in seconds, to pause between sampling</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t23" headers="r1c1-t23">
<p><code dir="ltr">capture_option</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t23 r1c2-t23">
<p>During capture, either insert new statements, update existing statements, or both. &#39;<code dir="ltr">INSERT</code>&#39;, &#39;<code dir="ltr">UPDATE</code>&#39;, or &#39;<code dir="ltr">MERGE</code>&#39; just like <code dir="ltr">load_option</code> in <code dir="ltr">load_sqlset</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t23" headers="r1c1-t23">
<p><code dir="ltr">capture_mode</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t23 r1c2-t23">
<p>Capture mode (<code dir="ltr">UPDATE</code> and <code dir="ltr">MERGE</code> capture options). Possible values:</p>
<ul>
<li>
<p><code dir="ltr">MODE_REPLACE_OLD_STATS</code> - Replace statistics when the number of executions seen is greater than that stored in the SQL tuning set</p>
</li>
<li>
<p><code dir="ltr">MODE_ACCUMULATE_STATS</code> - Add new values to current values for SQL we already store. Note that this mode detects if a statement has been aged out, so the final value for a statistics is the sum of the statistics of all cursors that statement existed under.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t23" headers="r1c1-t23">
<p><code dir="ltr">basic_filter</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t23 r1c2-t23">
<p>Filter to apply to shared SQL area on each sampling (see <code dir="ltr">SELECT_XXX</code> subprograms). If <code dir="ltr">basic_filter</code> is not set by the caller, the subprogram captures only statements of the type <code dir="ltr">CREATE TABLE</code>, <code dir="ltr">INSERT</code>, <code dir="ltr">SELECT</code>, <code dir="ltr">UPDATE</code>, <code dir="ltr">DELETE</code>, and <code dir="ltr">MERGE</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t23" headers="r1c1-t23">
<p><code dir="ltr">sqlset_owner</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t23 r1c2-t23">
<p>The owner of the SQL tuning set or <code dir="ltr">NULL</code> for current schema owner</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t23" headers="r1c1-t23">
<p><code dir="ltr">recursive_sql</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t23 r1c2-t23">
<p>Filter that includes recursive SQL in the SQL tuning set (<code dir="ltr">HAS_RECURSIVE_SQL</code>) or excludes it (<code dir="ltr">NO_RECURSIVE_SQL</code>).</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10090"></a>Examples</p>
<p>In this example capture takes place over a 30-second period, polling the cache once every five seconds. This captures all statements run during that period but not before or after. If the same statement appears a second time, the process replaces the stored statement with the new occurrence.</p>
<p>Note that in production systems the time limit and repeat interval would be set much higher. You should tune the <code dir="ltr">time_limit</code> and <code dir="ltr">repeat_interval</code> parameters based on the workload time and shared SQL area turnover properties of your system.</p>
<pre dir="ltr"> 
EXEC DBMS_SQLTUNE.CAPTURE_CURSOR_CACHE_SQLSET( -
                                        sqlset_name     =&gt; &#39;my_workload&#39;, -
                                        time_limit      =&gt;  30, -
                                        repeat_interval =&gt;  5);
</pre>
<p>In the following call you accumulate execution statistics as you go. This option produces an accurate picture of the cumulative activity of each cursor, even across age-outs, but it is more expensive than the previous example.</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.CAPTURE_CURSOR_CACHE_SQLSET( -
                         sqlset_name     =&gt; &#39;my_workload&#39;, -
                         time_limit      =&gt; 30, -
                         repeat_interval =&gt; 5, -
                         capture_mode    =&gt; dbms_sqltune.MODE_ACCUMULATE_STATS);
 
</pre>
<p>This call performs a very inexpensive capture where you only insert new statements and do not update their statistics once they have been inserted into the SQL tuning set</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.CAPTURE_CURSOR_CACHE_SQLSET( -
                                    sqlset_name     =&gt; &#39;my_workload&#39;, -
                                    time_limit      =&gt; 30, -
                                    repeat_interval =&gt; 5, -
                                    capture_option  =&gt; &#39;INSERT&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72128" class="refsect2"><a id="CHDFECGH"></a>
<h3 class="refsect2"><a id="sthref10091"></a>CREATE_SQL_PLAN_BASELINE Procedure</h3>
<p>This procedure creates a SQL plan baseline for an execution plan. It can be used in the context of an Alternative Plan Finding made by SQL Tuning Advisor.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10092"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.CREATE_SQL_PLAN_BASELINE (
   task_name            IN VARCHAR2,
   object_id            IN NUMBER := NULL,
   plan_hash_value      IN NUMBER,
   owner_name           IN VARCHAR2 := NULL); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10093"></a>Parameters</p>
<div id="ARPLS72129" class="tblformal">
<p class="titleintable"><a id="sthref10094"></a><a id="sthref10095"></a>Table 154-14 CREATE_SQL_PLAN_BASELINE Procedure Parameters</p>
<table class="cellalignment4330" title="CREATE_SQL_PLAN_BASELINE Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.CREATE_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t25">Parameter</th>
<th class="cellalignment4328" id="r1c2-t25">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t25" headers="r1c1-t25">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t25 r1c2-t25">
<p>Name of the task for which to get a script</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t25" headers="r1c1-t25">
<p><code dir="ltr">object_id</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t25 r1c2-t25">
<p>Object ID to which the SQL corresponds</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t25" headers="r1c1-t25">
<p><code dir="ltr">plan_hash_value</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t25 r1c2-t25">
<p>Plan to create plan baseline</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t25" headers="r1c1-t25">
<p><code dir="ltr">owner_name</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t25 r1c2-t25">
<p>Owner of the relevant tuning task. Defaults to the current schema owner.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68408" class="refsect2"><a id="i1006897"></a>
<h3 class="refsect2"><a id="sthref10096"></a>CREATE_SQLSET Procedure and Function</h3>
<p>The procedure creates a SQL tuning set object in the database.</p>
<p>The function causes the system to generate a name for the SQL tuning set.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10097"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.CREATE_SQLSET (
   sqlset_name  IN  VARCHAR2,
   description  IN  VARCHAR2 := NULL
   sqlset_owner IN  VARCHAR2 := NULL);
</pre>
<pre dir="ltr">DBMS_SQLTUNE.CREATE_SQLSET (
   sqlset_name  IN  VARCHAR2 := NULL,
   description  IN  VARCHAR2 := NULL,
   sqlset_owner IN  VARCHAR2 := NULL)
 RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10098"></a>Parameters</p>
<div id="ARPLS68409" class="tblformal">
<p class="titleintable"><a id="sthref10099"></a><a id="sthref10100"></a>Table 154-15 CREATE_SQLSET Procedure Parameters</p>
<table class="cellalignment4330" title="CREATE_SQLSET Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.CREATE_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t27">Parameter</th>
<th class="cellalignment4328" id="r1c2-t27">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t27" headers="r1c1-t27">
<p><code dir="ltr">sqlset_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t27 r1c2-t27">
<p>The SQL tuning set name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t27" headers="r1c1-t27">
<p><code dir="ltr">description</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t27 r1c2-t27">
<p>The description of the SQL tuning set</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t27" headers="r1c1-t27">
<p><code dir="ltr">sqlset_owner</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t27 r1c2-t27">
<p>The owner of the SQL tuning set, or <code dir="ltr">NULL</code> for the current schema owner</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10101"></a>Examples</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.CREATE_SQLSET(- 
  sqlset_name =&gt; &#39;my_workload&#39;, -
  description =&gt; &#39;complete application workload&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68410" class="refsect2"><a id="CACHIGBF"></a>
<h3 class="refsect2"><a id="sthref10102"></a>CREATE_STGTAB_SQLPROF Procedure</h3>
<p>This procedure creates the staging table used for copying SQL profiles from one system to another.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDCJJGF">SQL Profile Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10103"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.CREATE_STGTAB_SQLPROF (
   table_name            IN VARCHAR2,
   schema_name           IN VARCHAR2 := NULL,
   tablespace_name       IN VARCHAR2 := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10104"></a>Parameters</p>
<div id="ARPLS68411" class="tblformal">
<p class="titleintable"><a id="sthref10105"></a><a id="sthref10106"></a>Table 154-16 CREATE_STGTAB_SQLPROF Procedure Parameters</p>
<table class="cellalignment4330" title="CREATE_STGTAB_SQLPROF Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.CREATE_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t29">Parameter</th>
<th class="cellalignment4328" id="r1c2-t29">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t29" headers="r1c1-t29">
<p><code dir="ltr">table_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t29 r1c2-t29">
<p>The name of the table to create (case-insensitive unless double quoted). Required.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t29" headers="r1c1-t29">
<p><code dir="ltr">schema_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t29 r1c2-t29">
<p>The schema to create the table in, or <code dir="ltr">NULL</code> for current schema (case-insensitive unless double quoted)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t29" headers="r1c1-t29">
<p><code dir="ltr">tablespace_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t29 r1c2-t29">
<p>The tablespace to store the staging table within, or <code dir="ltr">NULL</code> for current user&#39;s default tablespace (case-insensitive unless double quoted)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10107"></a>Usage Notes</p>
<ul>
<li>
<p>Call this procedure once before issuing a call to the <a href="#CACFCAEC">PACK_STGTAB_SQLPROF Procedure</a>.</p>
</li>
<li>
<p>This procedure can be called multiple times if you would like to have different SQL profiles in different staging tables.</p>
</li>
<li>
<p>Note that this is a DDL operation, so it does not occur within a transaction.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10108"></a>Examples</p>
<p>Create a staging table to store profile data that can be moved to another system.</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.CREATE_STGTAB_SQLPROF (table_name  =&gt; &#39;PROFILE_STGTAB&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68412" class="refsect2"><a id="CACBCEEH"></a>
<h3 class="refsect2"><a id="sthref10109"></a>CREATE_STGTAB_SQLSET Procedure</h3>
<p>This procedure creates a staging table through which SQL tuning sets are imported and exported</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10110"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.CREATE_STGTAB_SQLSET (
   table_name           IN VARCHAR2,
   schema_name          IN VARCHAR2 := NULL,
   tablespace_name      IN VARCHAR2 := NULL,
   db_version           IN NUMBER   := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10111"></a>Parameters</p>
<div id="ARPLS68413" class="tblformal">
<p class="titleintable"><a id="sthref10112"></a><a id="sthref10113"></a>Table 154-17 CREATE_STGTAB_SQLSET Procedure Parameters</p>
<table class="cellalignment4330" title="CREATE_STGTAB_SQLSET Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.CREATE_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t31">Parameter</th>
<th class="cellalignment4328" id="r1c2-t31">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t31" headers="r1c1-t31">
<p><code dir="ltr">table_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t31 r1c2-t31">
<p>Name of the table to create (case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t31" headers="r1c1-t31">
<p><code dir="ltr">schema_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t31 r1c2-t31">
<p>Schema in which to create the table in, or <code dir="ltr">NULL</code> for current schema (case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t31" headers="r1c1-t31">
<p><code dir="ltr">tablespace_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t31 r1c2-t31">
<p>Tablespace in which to store the staging table, or <code dir="ltr">NULL</code> for current user&#39;s default tablespace (case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t31" headers="r1c1-t31">
<p><code dir="ltr">db_version</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t31 r1c2-t31">
<p>Database (DB) version determining the format of the staging table. User can also create an older DB version staging table to export STS to an older DB version. One of the following values:</p>
<ul>
<li>
<p><code dir="ltr">NULL</code> (default) &mdash; current DB version</p>
</li>
<li>
<p><code dir="ltr">STS_STGTAB_10_2_VERSION</code> &mdash; 10.2 DB version</p>
</li>
<li>
<p><code dir="ltr">STS_STGTAB_11_1_VERSION</code> &mdash; 11.1 DB version</p>
</li>
<li>
<p><code dir="ltr">STS_STGTAB_11_2_VERSION</code> &mdash; 11.2 DB version</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10114"></a>Usage Notes</p>
<ul>
<li>
<p>Call this procedure once before issuing a call to the <a href="#CACIFBAJ">PACK_STGTAB_SQLSET Procedure</a>.</p>
</li>
<li>
<p>This procedure can be called multiple times if you would like to have different tuning sets in different staging tables.</p>
</li>
<li>
<p>Note that this is a DDL operation, so it does not occur within a transaction.</p>
</li>
<li>
<p>Users issuing the call must have permission to <code dir="ltr">CREATE</code> <code dir="ltr">TABLE</code> in the schema provided and the relevant tablespace.</p>
</li>
<li>
<p>Please note that the staging table contains nested table columns and indexes, so it should not be renamed.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10115"></a>Examples</p>
<p><a id="ARPLS72942"></a><span class="subhead3">Create a staging table for packing and eventually exporting a SQL tuning sets&nbsp;</span></p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.CREATE_STGTAB_SQLSET(table_name =&gt; &#39;STGTAB_SQLSET&#39;);

</pre>
<p><a id="ARPLS72943"></a><span class="subhead3">Create a staging table to pack a SQL tuning set in Oracle Database 10<span class="italic">g</span> Release 2 (10.2) format&nbsp;</span></p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.CREATE_STGTAB_SQLSET(
   table_name =&gt; &#39;STGTAB_SQLSET&#39;,
   db_version =&gt; DBMS_SQLTUNE.STS_STGTAB_10_2_VERSION)

</pre>
<p><a id="ARPLS72944"></a><span class="subhead3">Create a staging table to pack a SQL tuning set in Oracle Database 11<span class="italic">g</span> Release 1 (11.1) format&nbsp;</span></p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.CREATE_STGTAB_SQLSET(
   table_name =&gt; &#39;STGTAB_SQLSET&#39;,
   db_version =&gt; DBMS_SQLTUNE.STS_STGTAB_11_1_VERSION)
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68414" class="refsect2"><a id="CHDGBCDB"></a>
<h3 class="refsect2"><a id="sthref10116"></a>CREATE_TUNING_TASK Functions</h3>
<p>You can use different forms of this function to:</p>
<ul>
<li>
<p>Create a tuning task for a single statement given its text.</p>
</li>
<li>
<p>Create a tuning task for a single statement from the shared SQL area given its identifier.</p>
</li>
<li>
<p>Create a tuning task for a single statement from the workload repository given a range of snapshot identifiers.</p>
</li>
<li>
<p>Create a tuning task for a SQL tuning set.</p>
</li>
<li>
<p>Create tuning task for a SQL Performance Analyzer</p>
</li>
</ul>
<p>In all cases, the function mainly creates an advisor task and sets its parameters.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10117"></a>Syntax</p>
<p>SQL text format:</p>
<pre dir="ltr">DBMS_SQLTUNE.CREATE_TUNING_TASK (
  sql_text         IN CLOB,
  bind_list        IN sql_binds := NULL,
  user_name        IN VARCHAR2  := NULL,
  scope            IN VARCHAR2  := SCOPE_COMPREHENSIVE,
  time_limit       IN NUMBER    := TIME_LIMIT_DEFAULT,
  task_name        IN VARCHAR2  := NULL,
  description      IN VARCHAR2  := NULL,
  con_name         IN VARCHAR2  := NULL)
RETURN VARCHAR2;
</pre>
<p>SQL ID format:</p>
<pre dir="ltr">DBMS_SQLTUNE.CREATE_TUNING_TASK (
  sql_id           IN VARCHAR2,
  plan_hash_value  IN NUMBER    := NULL,
  scope            IN VARCHAR2  := SCOPE_COMPREHENSIVE,
  time_limit       IN NUMBER    := TIME_LIMIT_DEFAULT,
  task_name        IN VARCHAR2  := NULL,
  description      IN VARCHAR2  := NULL,
  con_name         IN VARCHAR2  := NULL)
RETURN VARCHAR2;
</pre>
<p>AWR format:</p>
<pre dir="ltr">DBMS_SQLTUNE.CREATE_TUNING_TASK (
  begin_snap       IN NUMBER,
  end_snap         IN NUMBER,
  sql_id           IN VARCHAR2,
  plan_hash_value  IN NUMBER    := NULL,
  scope            IN VARCHAR2  := SCOPE_COMPREHENSIVE,
  time_limit       IN NUMBER    := TIME_LIMIT_DEFAULT,
  task_name        IN VARCHAR2  := NULL,
  description      IN VARCHAR2  := NULL,
  con_name         IN VARCHAR2  := NULL)
RETURN VARCHAR2;
</pre>
<p>SQL tuning set format:</p>
<pre dir="ltr">DBMS_SQLTUNE.CREATE_TUNING_TASK (
  sqlset_name       IN VARCHAR2,
  basic_filter      IN VARCHAR2 :=  NULL,
  object_filter     IN VARCHAR2 :=  NULL,
  rank1             IN VARCHAR2 :=  NULL,
  rank2             IN VARCHAR2 :=  NULL,
  rank3             IN VARCHAR2 :=  NULL,
  result_percentage IN NUMBER   :=  NULL,
  result_limit      IN NUMBER   :=  NULL,
  scope             IN VARCHAR2 :=  SCOPE_COMPREHENSIVE,
  time_limit        IN NUMBER   :=  TIME_LIMIT_DEFAULT,
  task_name         IN VARCHAR2 :=  NULL,
  description       IN VARCHAR2 :=  NULL
  plan_filter       IN VARCHAR2 :=  &#39;MAX_ELAPSED_TIME&#39;,
  sqlset_owner      IN VARCHAR2 :=  NULL)
RETURN VARCHAR2;
</pre>
<p>SQL Performance Analyzer format:</p>
<pre dir="ltr">DBMS_SQLTUNE.CREATE_TUNING_TASK (
   spa_task_name     IN VARCHAR2,
   spa_task_owner    IN VARCHAR2 :=  NULL,
   spa_compare_exec  IN VARCHAR2 :=  NULL,
   basic_filter      IN VARCHAR2 :=  NULL,
   time_limit        IN NUMBER   :=  TIME_LIMIT_DEFAULT,
   task_name         IN VARCHAR2 :=  NULL,
   description       IN VARCHAR2 :=  NULL)
RETURN VARCHAR2; 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10118"></a>Parameters</p>
<div id="ARPLS68415" class="tblformal">
<p class="titleintable"><a id="sthref10119"></a><a id="sthref10120"></a>Table 154-18 <span class="bolditalic">CREATE_TUNING_TASK Function Parameters</span></p>
<table class="cellalignment4330" title="CREATE_TUNING_TASK Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.CREATE_TUNING_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t33">Parameter</th>
<th class="cellalignment4328" id="r1c2-t33">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t33" headers="r1c1-t33">
<p><code dir="ltr">sql_text</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t33 r1c2-t33">
<p>Text of a SQL statement</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t33" headers="r1c1-t33">
<p><code dir="ltr">begin_snap</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t33 r1c2-t33">
<p>Begin snapshot identifier</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t33" headers="r1c1-t33">
<p><code dir="ltr">end_snap</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t33 r1c2-t33">
<p>End snapshot identifier</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t33" headers="r1c1-t33">
<p><code dir="ltr">sql_id</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t33 r1c2-t33">
<p>Identifier of a SQL statement</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t33" headers="r1c1-t33">
<p><code dir="ltr">bind_list</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t33 r1c2-t33">
<p>An ordered list of bind values in <code dir="ltr">ANYDATA</code> type</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t33" headers="r1c1-t33">
<p><code dir="ltr">plan_hash_value</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t33 r1c2-t33">
<p>Hash value of the SQL execution plan</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t33" headers="r1c1-t33">
<p><code dir="ltr">sqlset_name</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t33 r1c2-t33">
<p>SQL tuning set name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t33" headers="r1c1-t33">
<p><code dir="ltr">basic_filter</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t33 r1c2-t33">
<p>SQL predicate to filter the SQL from the SQL tuning set</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t33" headers="r1c1-t33">
<p><code dir="ltr">object_filter</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t33 r1c2-t33">
<p>Object filter</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t33" headers="r1c1-t33">
<p><code dir="ltr">rank(i)</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t33 r1c2-t33">
<p>Order-by clause on the selected SQL</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t33" headers="r1c1-t33">
<p><code dir="ltr">result_percentage</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t33 r1c2-t33">
<p>Percentage on the sum of a ranking measure</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t33" headers="r1c1-t33">
<p><code dir="ltr">result_limit</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t33 r1c2-t33">
<p>Top L(imit) SQL from the (filtered/ranked) SQL</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t33" headers="r1c1-t33">
<p><code dir="ltr">user_name</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t33 r1c2-t33">
<p>User name for whom the statement is to be tuned</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t33" headers="r1c1-t33">
<p><code dir="ltr">scope</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t33 r1c2-t33">
<p>Tuning scope (limited/comprehensive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t33" headers="r1c1-t33">
<p><code dir="ltr">time_limit</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t33 r1c2-t33">
<p>The maximum duration in seconds for the tuning session</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t33" headers="r1c1-t33">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t33 r1c2-t33">
<p>Optional tuning task name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t33" headers="r1c1-t33">
<p><code dir="ltr">description</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t33 r1c2-t33">
<p>Description of the SQL tuning session to a maximum of 256 characters.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r19c1-t33" headers="r1c1-t33">
<p><code dir="ltr">plan_filter</code></p>
</td>
<td class="cellalignment4329" headers="r19c1-t33 r1c2-t33">
<p>Plan filter. It is applicable when multiple plans (<code dir="ltr">plan_hash_value</code>) are associated with the same statement. This filter allows for selecting one plan (<code dir="ltr">plan_hash_value</code>) only. Possible values are:</p>
<ul>
<li>
<p><code dir="ltr">LAST_GENERATED</code>: plan with the most recent timestamp</p>
</li>
<li>
<p><code dir="ltr">FIRST_GENERATED</code>: plan with the earliest timestamp, the opposite to <code dir="ltr">LAST_GENERATED</code></p>
</li>
<li>
<p><code dir="ltr">LAST_LOADED</code>: plan with the most recent <code dir="ltr">first_load_time</code> statistics information</p>
</li>
<li>
<p><code dir="ltr">FIRST_LOADED</code>: plan with the earliest <code dir="ltr">first_load_time</code> statistics information, the opposite to <code dir="ltr">LAST_LOADED</code></p>
</li>
<li>
<p><code dir="ltr">MAX_ELAPSED_TIME</code>: plan with the maximum elapsed time</p>
</li>
<li>
<p><code dir="ltr">MAX_BUFFER_GETS</code>: plan with the maximum buffer gets</p>
</li>
<li>
<p><code dir="ltr">MAX_DISK_READS</code>: plan with the maximum disk reads</p>
</li>
<li>
<p><code dir="ltr">MAX_DIRECT_WRITES</code>: plan with the maximum direct writes</p>
</li>
<li>
<p><code dir="ltr">MAX_OPTIMIZER_COST</code>: plan with the maximum optimizer cost</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r20c1-t33" headers="r1c1-t33">
<p><code dir="ltr">sqlset_owner</code></p>
</td>
<td class="cellalignment4329" headers="r20c1-t33 r1c2-t33">
<p>Owner of the SQL tuning set, or <code dir="ltr">NULL</code> for the current schema owner</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r21c1-t33" headers="r1c1-t33">
<p><code dir="ltr">spa_task_name</code></p>
</td>
<td class="cellalignment4329" headers="r21c1-t33 r1c2-t33">
<p>Name of the SQL Performance Analyzer task whose regressions are to be tuned</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r22c1-t33" headers="r1c1-t33">
<p><code dir="ltr">spa_task_owner</code></p>
</td>
<td class="cellalignment4329" headers="r22c1-t33 r1c2-t33">
<p>Owner of specified SQL Performance Analyzer task or <code dir="ltr">NULL</code> for current user</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r23c1-t33" headers="r1c1-t33">
<p><code dir="ltr">spa_compare_exec</code></p>
</td>
<td class="cellalignment4329" headers="r23c1-t33 r1c2-t33">
<p>Execution name of Compare Performance trial of SQL Performance Analyzer task. If <code dir="ltr">NULL</code>, we use the most recent execution of the given SQL Performance Analyzer task, of type <code dir="ltr">COMPARE</code> <code dir="ltr">PERFORMANCE</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r24c1-t33" headers="r1c1-t33">
<p><code dir="ltr">con_name</code></p>
</td>
<td class="cellalignment4329" headers="r24c1-t33 r1c2-t33">
<p>Specifies the container for the tuning task. The semantics depend on the function format:</p>
<ul>
<li>
<p>For the SQL text format, this parameter specifies the container in which SQL Tuning Advisor tunes the SQL statement. If null (default), then SQL Tuning Advisor uses the current container.</p>
</li>
<li>
<p>For the SQL ID format, this parameter specifies the container from which the database fetches the SQL statement for tuning. SQL Tuning Advisor tunes the statement in this container. If null, then the database uses the current PDB for tuning, fetches the statement from the cursor cache of all valid containers executing the SQL statement, and tunes the most expensive statement in its container.</p>
</li>
<li>
<p>For the AWR format, this parameter specifies the container from whose AWR data the database fetches the SQL statement for tuning. SQL Tuning Advisor tunes the statement in this container. If null, then the database uses the current PDB for tuning, fetches the statement from the AWR of all valid containers that have this SQL statement, and tunes the most expensive statement in its container.</p>
</li>
</ul>
<p>The following statements are true of all function formats:</p>
<ul>
<li>
<p>In a non-CDB, this parameter is ignored.</p>
</li>
<li>
<p>In a PDB, this parameter must be null or match the container name of the PDB. Otherwise, an error occurs.</p>
</li>
<li>
<p>In a CDB root, this parameter must be null or match the container name of a container in this CDB. Otherwise, an error occurs.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10121"></a>Return Values</p>
<p>A SQL tuning task name that is unique by user (two different users can give the same name to their advisor tasks).</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10122"></a>Usage Notes</p>
<p>With regard to the form of this subprogram that takes a SQL tuning set, filters provided to this function are evaluated as part of a SQL run by the current user. As such, they are executed with that user&#39;s security privileges and can contain any constructs and subqueries that user can access, but no more.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10123"></a>Examples</p>
<pre dir="ltr">VARIABLE stmt_task VARCHAR2(64);
VARIABLE sts_task  VARCHAR2(64);
VARIABLE spa_tune_task VARCHAR2(64);
</pre>
<p class="subhead2"><a id="ARPLS73097"></a>Create Tuning Task with SQL Text Format</p>
<pre dir="ltr">EXEC :stmt_task := DBMS_SQLTUNE.CREATE_TUNING_TASK( -
  sql_text =&gt; &#39;select quantity_sold from sales s, times t where s.time_id = t.time_id and s.time_id = TO_DATE(&#39;&#39;24-NOV-00&#39;&#39;)&#39;);
</pre>
<p class="subhead2"><a id="ARPLS73098"></a>Create Tuning Task with SQL ID Format</p>
<pre dir="ltr">EXEC :stmt_task := DBMS_SQLTUNE.CREATE_TUNING_TASK(sql_id =&gt; &#39;ay1m3ssvtrh24&#39;);
 
-- tune in limited scope 
EXEC :stmt_task := DBMS_SQLTUNE.CREATE_TUNING_TASK(sql_id =&gt; &#39;ay1m3ssvtrh24&#39;, -
   scope =&gt; &#39;LIMITED&#39;);
 
-- only give 10 minutes for tuning statement
EXEC :stmt_task := DBMS_SQLTUNE.CREATE_TUNING_TASK(sql_id =&gt; &#39;ay1m3ssvtrh24&#39;, -
   time_limit =&gt; 600);
</pre>
<p class="subhead2"><a id="ARPLS73099"></a>Create Tuning Task with AWR Snapshot Format</p>
<pre dir="ltr">EXEC :stmt_task := DBMS_SQLTUNE.CREATE_TUNING_TASK(begin_snap =&gt; 1, -
   end_snap =&gt; 2, sql_id =&gt; &#39;ay1m3ssvtrh24&#39;);
</pre>
<p class="subhead2"><a id="ARPLS73100"></a>Create Tuning Task with SQL Tuning Set Format</p>
<pre dir="ltr">-- First we need to load an STS, then tune it
-- Tune our statements in order by buffer gets, time limit of one hour
-- the default ranking measure is elapsed time.
EXEC :sts_task := DBMS_SQLTUNE.CREATE_TUNING_TASK( -
  sqlset_name  =&gt; &#39;my_workload&#39;, -
  rank1        =&gt; &#39;BUFFER_GETS&#39;, -
  time_limit   =&gt; 3600, -
  description  =&gt; &#39;tune my workload ordered by buffer gets&#39;);
</pre>
<p><a id="ARPLS72946"></a><span class="subhead3">Create Tuning Task with SPA Task Format&nbsp;</span></p>
<pre dir="ltr">-- Tune the SQLs that were reported as having regressed from the compare 
-- performance execution of the SPA task named task_123
EXEC :spa_tune_task := DBMS_SQLTUNE.CREATE_TUNING_TASK(
   spa_task_name     =&gt; &#39;task_123&#39;,
   spa_task_owner    =&gt; &#39;SCOTT&#39;,
   spa_compare_exec  =&gt; &#39;exec1&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68416" class="refsect2"><a id="i1006898"></a>
<h3 class="refsect2"><a id="sthref10124"></a>DELETE_SQLSET Procedure</h3>
<p>This procedure deletes a set of SQL statements from a SQL tuning set.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10125"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.DELETE_SQLSET (
   sqlset_name   IN  VARCHAR2,
   basic_filter  IN  VARCHAR2 := NULL,
   sqlset_owner  IN  VARCHAR2 := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10126"></a>Parameters</p>
<div id="ARPLS68417" class="tblformal">
<p class="titleintable"><a id="sthref10127"></a><a id="sthref10128"></a>Table 154-19 DELETE_SQLSET Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_SQLSET Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.DELETE_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t35">Parameter</th>
<th class="cellalignment4328" id="r1c2-t35">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t35" headers="r1c1-t35">
<p><code dir="ltr">sqlset_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t35 r1c2-t35">
<p>The SQL tuning set name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t35" headers="r1c1-t35">
<p><code dir="ltr">basic_filter</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t35 r1c2-t35">
<p>SQL predicate to filter the SQL from the SQL tuning set. This basic filter is used as a where clause on the SQL tuning set content to select a desired subset of SQL from the Tuning Set.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t35" headers="r1c1-t35">
<p><code dir="ltr">sqlset_owner</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t35 r1c2-t35">
<p>The owner of the SQL tuning set, or <code dir="ltr">NULL</code> for current schema owner</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10129"></a>Examples</p>
<pre dir="ltr">-- Delete all statements in a sql tuning set.
EXEC DBMS_SQLTUNE.DELETE_SQLSET(sqlset_name   =&gt; &#39;my_workload&#39;);
 
-- Delete all statements in a sql tuning set which ran for less than a second
EXEC DBMS_SQLTUNE.DELETE_SQLSET(sqlset_name   =&gt; &#39;my_workload&#39;, -
                                basic_filter  =&gt; &#39;elapsed_time &lt; 1000000&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68418" class="refsect2"><a id="i1007819"></a>
<h3 class="refsect2"><a id="sthref10130"></a>DROP_SQL_PROFILE Procedure</h3>
<p>This procedure drops the named SQL profile from the database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDCJJGF">SQL Profile Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10131"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.DROP_SQL_PROFILE (
   name          IN  VARCHAR2,
   ignore        IN  BOOLEAN  := FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10132"></a>Parameters</p>
<div id="ARPLS68419" class="tblformal">
<p class="titleintable"><a id="sthref10133"></a><a id="sthref10134"></a>Table 154-20 DROP_SQL_PROFILE Procedure Parameters</p>
<table class="cellalignment4330" title="DROP_SQL_PROFILE Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.DROP_SQL_PROFILE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t37">Parameter</th>
<th class="cellalignment4328" id="r1c2-t37">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t37" headers="r1c1-t37">
<p><code dir="ltr">name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t37 r1c2-t37">
<p>The (mandatory) name of SQL profile to be dropped. The name is case sensitive.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t37" headers="r1c1-t37">
<p><code dir="ltr">ignore</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t37 r1c2-t37">
<p>Ignores errors due to object not existing</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10135"></a>Usage Notes</p>
<p>Requires the &#34;<code dir="ltr">DROP</code> <code dir="ltr">ANY</code> <code dir="ltr">SQL PROFILE</code>&#34; privilege.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10136"></a>Examples</p>
<pre dir="ltr">-- Drop the profile:
EXEC DBMS_SQLTUNE.DROP_SQL_PROFILE(:pname);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68420" class="refsect2"><a id="i1007711"></a>
<h3 class="refsect2"><a id="sthref10137"></a>DROP_SQLSET Procedure</h3>
<p>This procedure drops a SQL tuning set if it is not active.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10138"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.DROP_SQLSET (
   sqlset_name   IN  VARCHAR2,
   sqlset_owner  IN  VARCHAR2 := NULL); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10139"></a>Parameters</p>
<div id="ARPLS68421" class="tblformal">
<p class="titleintable"><a id="sthref10140"></a><a id="sthref10141"></a>Table 154-21 DROP_SQLSET Procedure Parameters</p>
<table class="cellalignment4330" title="DROP_SQLSET Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.DROP_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t39">Parameter</th>
<th class="cellalignment4328" id="r1c2-t39">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t39" headers="r1c1-t39">
<p><code dir="ltr">sqlset_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t39 r1c2-t39">
<p>The SQL tuning set name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t39" headers="r1c1-t39">
<p><code dir="ltr">sqlset_owner</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t39 r1c2-t39">
<p>The owner of the SQL tuning set, or <code dir="ltr">NULL</code> for current schema owner</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10142"></a>Usage Notes</p>
<p>You cannot drop a SQL tuning set when it is referenced by one or more clients.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10143"></a>Examples</p>
<pre dir="ltr">-- Drop the sqlset.
EXEC DBMS_SQLTUNE.DROP_SQLSET (&#39;my_workload&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68422" class="refsect2"><a id="CHDIGHHA"></a>
<h3 class="refsect2"><a id="sthref10144"></a>DROP_TUNING_TASK Procedure</h3>
<p>This procedure drops a SQL tuning task. The task and all its result data are deleted.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10145"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.DROP_TUNING_TASK (
 task_name         IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10146"></a>Parameters</p>
<div id="ARPLS68423" class="tblformal">
<p class="titleintable"><a id="sthref10147"></a><a id="sthref10148"></a>Table 154-22 DROP_TUNING_TASK Procedure Parameters</p>
<table class="cellalignment4330" title="DROP_TUNING_TASK Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.DROP_TUNING_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t41">Parameter</th>
<th class="cellalignment4328" id="r1c2-t41">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t41" headers="r1c1-t41">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t41 r1c2-t41">
<p>The name of the tuning task to drop</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68424" class="refsect2"><a id="CHDGEJJA"></a>
<h3 class="refsect2"><a id="sthref10149"></a>EXECUTE_TUNING_TASK Function and Procedure</h3>
<p>This function and procedure executes a previously created tuning task. Both the function and the procedure run in the context of a new task execution. The difference is that the function version returns that new execution name.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10150"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.EXECUTE_TUNING_TASK (
   task_name         IN VARCHAR2,
   execution_name    IN VARCHAR2               := NULL,
   execution_params  IN dbms_advisor.argList   := NULL,
   execution_desc    IN VARCHAR2               := NULL)
 RETURN VARCHAR2;
</pre>
<pre dir="ltr">DBMS_SQLTUNE.EXECUTE_TUNING_TASK (
   task_name         IN VARCHAR2,
   execution_name    IN VARCHAR2               := NULL,
   execution_params  IN dbms_advisor.argList   := NULL,
   execution_desc    IN VARCHAR2               := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10151"></a>Parameters</p>
<div id="ARPLS68425" class="tblformal">
<p class="titleintable"><a id="sthref10152"></a><a id="sthref10153"></a>Table 154-23 EXECUTE_TUNING_TASK Function &amp; Procedure Parameters</p>
<table class="cellalignment4330" title="EXECUTE_TUNING_TASK Function &amp; Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.EXECUTE_TUNING_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t43">Parameter</th>
<th class="cellalignment4328" id="r1c2-t43">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t43" headers="r1c1-t43">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t43 r1c2-t43">
<p>Name of the tuning task to execute</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t43" headers="r1c1-t43">
<p><code dir="ltr">execution_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t43 r1c2-t43">
<p>A name to qualify and identify an execution. If not specified, it is generated by the advisor and returned by function.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t43" headers="r1c1-t43">
<p><code dir="ltr">execution_params</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t43 r1c2-t43">
<p>List of parameters (name, value) for the specified execution. The execution parameters have effect only on the execution for which they are specified. They override the values for the parameters stored in the task (set through the <a href="#CHDGAJDB">SET_TUNING_TASK_PARAMETER Procedures</a>).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t43" headers="r1c1-t43">
<p><code dir="ltr">execution_desc</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t43 r1c2-t43">
<p>A 256-length string describing the execution</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10154"></a>Usage Notes</p>
<p>A tuning task can be executed multiples times without having to reset it.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10155"></a>Examples</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.EXECUTE_TUNING_TASK(:stmt_task);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68426" class="refsect2"><a id="BABIECBJ"></a>
<h3 class="refsect2"><a id="sthref10156"></a>IMPLEMENT_TUNING_TASK Function</h3>
<p>This function implements a set of SQL profile recommendations made by SQL Tuning Advisor. Call this subprogram is equivalent to calling the <a href="#CHDCHDED">SCRIPT_TUNING_TASK Function</a> and then running the script.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10157"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.IMPLEMENT_TUNING_TASK (
    task_name      IN VARCHAR2,
    rec_type       IN VARCHAR2 := REC_TYPE_SQL_PROFILES,
    owner_name     IN VARCHAR2 := NULL,
    execution_name IN VARCHAR2 := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10158"></a>Parameters</p>
<div id="ARPLS68427" class="tblformal">
<p class="titleintable"><a id="sthref10159"></a><a id="sthref10160"></a>Table 154-24 IMPLEMENT_TUNING_TASK Function Parameters</p>
<table class="cellalignment4330" title="IMPLEMENT_TUNING_TASK Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.IIMPLEMENT_TUNING_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t45">Parameter</th>
<th class="cellalignment4328" id="r1c2-t45">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t45" headers="r1c1-t45">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t45 r1c2-t45">
<p>Name of the tuning task for which to implement recommendations</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t45" headers="r1c1-t45">
<p><code dir="ltr">rec_type</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t45 r1c2-t45">
<p>Filter the types of recommendations to implement. Only &#39;<code dir="ltr">PROFILES</code>&#39; is supported.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t45" headers="r1c1-t45">
<p><code dir="ltr">owner_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t45 r1c2-t45">
<p>Owner of the relevant tuning task or <code dir="ltr">NULL</code> for the current user.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t45" headers="r1c1-t45">
<p><code dir="ltr">execution_name</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t45 r1c2-t45">
<p>name of the task execution to use. If <code dir="ltr">NULL</code>, recommendations from the last task execution are implemented.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68428" class="refsect2"><a id="CHDFIFAF"></a>
<h3 class="refsect2"><a id="sthref10161"></a>INTERRUPT_TUNING_TASK Procedure</h3>
<p>This procedure interrupts the currently executing tuning task. The task ends its operations as it would at normal exit so that the user can access the intermediate results.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10162"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.INTERRUPT_TUNING_TASK (
 task_name         IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10163"></a>Parameters</p>
<div id="ARPLS68429" class="tblformal">
<p class="titleintable"><a id="sthref10164"></a><a id="sthref10165"></a>Table 154-25 INTERRUPT_TUNING_TASK Procedure Parameters</p>
<table class="cellalignment4330" title="INTERRUPT_TUNING_TASK Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.INTERRUPT_TUNING_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t47">Parameter</th>
<th class="cellalignment4328" id="r1c2-t47">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t47" headers="r1c1-t47">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t47 r1c2-t47">
<p>Name of the tuning task to interrupt</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10166"></a>Examples</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.INTERRUPT_TUNING_TASK(:my_task);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68430" class="refsect2"><a id="i1006951"></a>
<h3 class="refsect2"><a id="sthref10167"></a>LOAD_SQLSET Procedure</h3>
<p>This procedure populates the SQL tuning set with a set of selected SQL. You can call the procedure multiple times to add new SQL statements or replace attributes of existing statements.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10168"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.LOAD_SQLSET (
   sqlset_name       IN  VARCHAR2,
   populate_cursor   IN  sqlset_cursor,
   load_option       IN VARCHAR2 := &#39;INSERT&#39;, 
   update_option     IN VARCHAR2 := &#39;REPLACE&#39;, 
   update_condition  IN VARCHAR2 :=  NULL,
   update_attributes IN VARCHAR2 :=  NULL,
   ignore_null       IN BOOLEAN  :=  TRUE,
   commit_rows       IN POSITIVE :=  NULL,
   sqlset_owner      IN VARCHAR2 := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10169"></a>Parameters</p>
<div id="ARPLS68431" class="tblformal">
<p class="titleintable"><a id="sthref10170"></a><a id="sthref10171"></a>Table 154-26 LOAD_SQLSET Procedure Parameters</p>
<table class="cellalignment4330" title="LOAD_SQLSET Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.LOAD_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t49">Parameter</th>
<th class="cellalignment4328" id="r1c2-t49">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t49" headers="r1c1-t49">
<p><code dir="ltr">sqlset_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t49 r1c2-t49">
<p>The SQL tuning set name to populate</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t49" headers="r1c1-t49">
<p><code dir="ltr">populate_cursor</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t49 r1c2-t49">
<p>The cursor reference from which to populate</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t49" headers="r1c1-t49">
<p><code dir="ltr">load_option</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t49 r1c2-t49">
<p>Specifies how the statements are loaded into the SQL tuning set. The possible values are:</p>
<ul>
<li>
<p><code dir="ltr">INSERT</code> (default) - add only new statements</p>
</li>
<li>
<p><code dir="ltr">UPDATE</code> - update existing the SQL statements and ignores any new statements</p>
</li>
<li>
<p><code dir="ltr">MERGE</code> - this is a combination of the two other options. This option inserts new statements and updates the information of the existing ones.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t49" headers="r1c1-t49">
<p><code dir="ltr">update_option</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t49 r1c2-t49">
<p>Specifies how the existing statements are updated. This parameter is considered only if <code dir="ltr">load_option</code> is specified with &#39;<code dir="ltr">UPDATE</code>&#39;/&#39;<code dir="ltr">MERGE</code>&#39; as an option. The possible values are:</p>
<ul>
<li>
<p><code dir="ltr">REPLACE</code> (default) - update the statement using the new statistics, bind list, object list, and so on.</p>
</li>
<li>
<p><code dir="ltr">ACCUMULATE</code> - when possible combine attributes (for example, statistics like <code dir="ltr">elapsed_time</code>, and so on) otherwise just replace the old values (for example, module, action, and so on) by the new provided ones. The SQL statement attributes that can be accumulated are: <code dir="ltr">elapsed_time</code>, <code dir="ltr">buffer_gets</code>, <code dir="ltr">direct_writes</code>, <code dir="ltr">disk_reads</code>, <code dir="ltr">row_processed</code>, <code dir="ltr">fetches</code>, <code dir="ltr">executions</code>, <code dir="ltr">end_of_fetch_count</code>, <code dir="ltr">stat_period</code> and <code dir="ltr">active_stat_period</code>.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t49" headers="r1c1-t49">
<p><code dir="ltr">update_condition</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t49 r1c2-t49">
<p>Specifies a where clause to execute the update operation. The update is performed only if the specified condition is true. The condition can refer to either the data source or destination. The condition must use the following prefixes to refer to attributes from the source or the destination:</p>
<ul>
<li>
<p><code dir="ltr">OLD</code> - to refer to statement attributes from the SQL tuning set (destination)</p>
</li>
<li>
<p><code dir="ltr">NEW</code> - to refer to statements attributes from the input statements (source)</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t49" headers="r1c1-t49">
<p><code dir="ltr">update_attributes</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t49 r1c2-t49">
<p>Specifies the list of a SQL statement attributes to update during a merge or update operation.The possible values are:</p>
<ul>
<li>
<p><code dir="ltr">NULL</code> (default) - the content of the input cursor except the execution context. On other terms, it is equivalent to <code dir="ltr">ALL</code> without execution context like module, action, and so on.</p>
</li>
<li>
<p><code dir="ltr">BASIC</code> - statistics and binds only</p>
</li>
<li>
<p><code dir="ltr">TYPICAL</code> - <code dir="ltr">BASIC</code> + SQL plans (without row source statistics) and without object reference list</p>
</li>
<li>
<p><code dir="ltr">ALL</code> - all attributes including the execution context attributes like module, action, and so on.</p>
</li>
<li>
<p>List of comma separated attribute names to update - <code dir="ltr">EXECUTION_CONTEXT</code>, <code dir="ltr">EXECUTION_STATISTICS</code>, <code dir="ltr">BIND_LIST</code>, <code dir="ltr">OBJECT_LIST</code>, <code dir="ltr">SQL_PLAN</code>, <code dir="ltr">SQL_PLAN_STATISTICS</code> (similar to <code dir="ltr">SQL_PLAN</code> + row source statistics)</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t49" headers="r1c1-t49">
<p><code dir="ltr">ignore_null</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t49 r1c2-t49">
<p>If <code dir="ltr">TRUE</code> do not update an attribute if the new value is <code dir="ltr">NULL</code>. That is, do not override with <code dir="ltr">NULL</code> values unless intentional.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t49" headers="r1c1-t49">
<p><code dir="ltr">commit_rows</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t49 r1c2-t49">
<p>If a value is provided, the load commits after each set of that many statements is inserted. If <code dir="ltr">NULL</code> is provided, the load commits only once, at the end of the operation. Providing a value for this argument allows you to monitor the progress of a SQL tuning set load operation in the <code dir="ltr">DBA_</code>/<code dir="ltr">USER_SQLSET</code> views. The <code dir="ltr">STATEMENT_COUNT</code> value increases as new SQL statements are loaded.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t49" headers="r1c1-t49">
<p><code dir="ltr">sqlset_owner</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t49 r1c2-t49">
<p>The owner of the SQL tuning set, or the current schema owner or <code dir="ltr">NULL</code> for current owner</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10172"></a>Exceptions</p>
<ul>
<li>
<p>This procedure returns an error when <code dir="ltr">sqlset_name</code> is invalid, or a corresponding SQL tuning set does not exist, or the <code dir="ltr">populate_cursor</code> is incorrect and cannot be executed.</p>
</li>
<li>
<p>Exceptions are also raised when invalid filters are provided. Filters can be invalid either because they don&#39;t parse (for example, they refer to attributes not in <code dir="ltr">sqlset_row</code>), or because they violate the user&#39;s privileges.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10173"></a>Usage Notes</p>
<p>Rows in the input <code dir="ltr">populate_cursor</code> must be of type <code dir="ltr">SQLSET_ROW</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10174"></a>Examples</p>
<p>In this example, you create and populate a SQL tuning set with all shared SQL area statements with an elapsed time of 5 seconds or more excluding statements that belong to <code dir="ltr">SYS</code> schema (to simulate an application user workload). You select all attributes of the SQL statements and load them in the tuning set using the default mode, which loads only new statements, since the SQL tuning set is empty.</p>
<pre dir="ltr">-- create the tuning set
EXEC DBMS_SQLTUNE.CREATE_SQLSET(&#39;my_workload&#39;);
-- populate the tuning set from the shared SQL area
DECLARE
 cur DBMS_SQLTUNE.SQLSET_CURSOR;
BEGIN
 OPEN cur FOR
   SELECT VALUE(P)
     FROM table(
       DBMS_SQLTUNE.SELECT_CURSOR_CACHE(
         &#39;parsing_schema_name &lt;&gt; &#39;&#39;SYS&#39;&#39; AND elapsed_time &gt; 5000000&#39;,
          NULL, NULL, NULL, NULL, 1, NULL,
         &#39;ALL&#39;)) P;
 
DBMS_SQLTUNE.LOAD_SQLSET(sqlset_name =&gt; &#39;my_workload&#39;,
                        populate_cursor =&gt; cur);
 
END;
/ 
</pre>
<p>Suppose now you wish to augment this information with what is stored in the workload repository (AWR). You populate the tuning set with <code dir="ltr">&#39;ACCUMULATE&#39;</code> as your <code dir="ltr">update_option</code> because it is assumed the cursors currently in the cache had aged out since the snapshot was taken.</p>
<p>You omit the <code dir="ltr">elapsed_time</code> filter because it is assumed that any statement captured in AWR is important, but still you throw away the <code dir="ltr">SYS</code>-parsed cursors to avoid recursive SQL.</p>
<pre dir="ltr">DECLARE
  cur DBMS_SQLTUNE.SQLSET_CURSOR;
BEGIN
  OPEN cur FOR
    SELECT VALUE(P)
      FROM table(
        DBMS_SQLTUNE.SELECT_WORKLOAD_REPOSITORY(1,2,
                                                &#39;parsing_schema_name &lt;&gt; &#39;&#39;SYS&#39;&#39;&#39;,
                                                NULL, NULL,NULL,NULL,
                                                1,
                                                NULL,
                                                &#39;ALL&#39;)) P;

  DBMS_SQLTUNE.LOAD_SQLSET(sqlset_name =&gt; &#39;my_workload&#39;,
                           populate_cursor =&gt; cur,
                           Using DBMS_SQLTUNE
                           load_option =&gt; &#39;MERGE&#39;,
                           update_option =&gt; &#39;ACCUMULATE&#39;);
END;
</pre>
<p>The following example is a simple load that only inserts new statements from the workload repository, skipping existing ones (in the SQL tuning set). Note that <code dir="ltr">&#39;INSERT&#39;</code> is the default value for the <code dir="ltr">load_option</code> argument of the <code dir="ltr">LOAD_SQLSET</code> procedure.</p>
<pre dir="ltr">DECLARE
  cur sys_refcursor;
BEGIN
  OPEN cur FOR
  SELECT VALUE(P)
  FROM table(DBMS_SQLTUNE.SELECT_WORKLOAD_REPOSITORY(1,2)) P;
  
  DBMS_SQLTUNE.LOAD_SQLSET(sqlset_name =&gt; &#39;my_workload&#39;,
populate_cursor =&gt; cur);
END;
/
</pre>
<p>The next example demonstrates a load with <code dir="ltr">UPDATE</code> option. This updates statements that already exist in the SQL tuning set but does not add new ones. By default, old statistics are replaced by their new values.</p>
<pre dir="ltr">DECLARE
  cur sys_refcursor;
BEGIN
  OPEN cur FOR
    SELECT VALUE(P)
    FROM table(DBMS_SQLTUNE.SELECT_CURSOR_CACHE) P;
  
  DBMS_SQLTUNE.LOAD_SQLSET(sqlset_name =&gt; &#39;my_workload&#39;,
                           populate_cursor =&gt; cur,
                           load_option =&gt; &#39;UPDATE&#39;);
END;
/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68432" class="refsect2"><a id="CACFCAEC"></a>
<h3 class="refsect2"><a id="sthref10175"></a>PACK_STGTAB_SQLPROF Procedure</h3>
<p>This procedure copies profile data from the <code dir="ltr">SYS</code>. schema into the staging table.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDCJJGF">SQL Profile Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10176"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.PACK_STGTAB_SQLPROF (
   profile_name          IN VARCHAR2 := &#39;%&#39;,
   profile_category      IN VARCHAR2 := &#39;DEFAULT&#39;,
   staging_table_name    IN VARCHAR2,
   staging_schema_owner  IN VARCHAR2 := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10177"></a>Parameters</p>
<div id="ARPLS68433" class="tblformal">
<p class="titleintable"><a id="sthref10178"></a><a id="sthref10179"></a>Table 154-27 PACK_STGTAB_SQLPROF Procedure Parameters</p>
<table class="cellalignment4330" title="PACK_STGTAB_SQLPROF Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.CREATE_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t51">Parameter</th>
<th class="cellalignment4328" id="r1c2-t51">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t51" headers="r1c1-t51">
<p><code dir="ltr">profile_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t51 r1c2-t51">
<p>The name of the profile to pack (% wildcards acceptable, case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t51" headers="r1c1-t51">
<p><code dir="ltr">profile_category</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t51 r1c2-t51">
<p>The category to pack profiles from (% wildcards acceptable, case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t51" headers="r1c1-t51">
<p><code dir="ltr">staging_table_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t51 r1c2-t51">
<p>The name of the table to use (case-insensitive unless double quoted). Required.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t51" headers="r1c1-t51">
<p><code dir="ltr">staging_schema_owner</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t51 r1c2-t51">
<p>The schema where the table resides, or <code dir="ltr">NULL</code> for current schema (case-insensitive unless double quoted)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10180"></a>Usage Notes</p>
<ul>
<li>
<p>This procedures requires <code dir="ltr">ADMINISTER SQL MANAGEMENT OBJECT</code> privilege and <code dir="ltr">INSERT</code> privilege on the staging table.</p>
</li>
<li>
<p>Note that this function issues a <code dir="ltr">COMMIT</code> after packing each SQL profile, so if an error is raised mid-execution, clear the staging table by deleting its rows.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10181"></a>Examples</p>
<p>Put only those profiles in the <code dir="ltr">DEFAULT</code> category into the staging table. This corresponds to all profiles used by default on this system.</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.PACK_STGTAB_SQLPROF (staging_table_name =&gt; &#39;PROFILE_STGTAB&#39;);
 
</pre>
<p>This is another example where you put all profiles into the staging table. Note this moves profiles that are not currently being used by default but are in other categories, such as for testing purposes.</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.PACK_STGTAB_SQLPROF (profile_category =&gt; &#39;%&#39;, -
                                      staging_table_name =&gt; &#39;PROFILE_STGTAB&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68434" class="refsect2"><a id="CACIFBAJ"></a>
<h3 class="refsect2"><a id="sthref10182"></a>PACK_STGTAB_SQLSET Procedure</h3>
<p>This procedure copies one or more SQL tuning sets from their location in the <code dir="ltr">SYS</code> schema to a staging table created by the <a href="#CACBCEEH">CREATE_STGTAB_SQLSET Procedure</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10183"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.PACK_STGTAB_SQLSET (
   sqlset_name          IN VARCHAR2,
   sqlset_owner         IN VARCHAR2 := NULL,
   staging_table_name   IN VARCHAR2,
   staging_schema_owner IN VARCHAR2 := NULL,
   db_version           IN NUMBER := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10184"></a>Parameters</p>
<div id="ARPLS68435" class="tblformal">
<p class="titleintable"><a id="sthref10185"></a><a id="sthref10186"></a>Table 154-28 PACK_STGTAB_SQLSET Procedure Parameters</p>
<table class="cellalignment4330" title="PACK_STGTAB_SQLSET Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.CREATE_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t53">Parameter</th>
<th class="cellalignment4328" id="r1c2-t53">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t53" headers="r1c1-t53">
<p><code dir="ltr">sqlset_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t53 r1c2-t53">
<p>The name of the SQL tuning set to pack (% wildcards acceptable, case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t53" headers="r1c1-t53">
<p><code dir="ltr">sqlset_owner</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t53 r1c2-t53">
<p>The category from which to pack SQL tuning sets (% wildcards acceptable, case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t53" headers="r1c1-t53">
<p><code dir="ltr">staging_table_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t53 r1c2-t53">
<p>The name of the table to use (case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t53" headers="r1c1-t53">
<p><code dir="ltr">staging_schema_owner</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t53 r1c2-t53">
<p>The schema where the table resides, or <code dir="ltr">NULL</code> for current schema (case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t53" headers="r1c1-t53">
<p><code dir="ltr">db_version</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t53 r1c2-t53">
<p>Database (DB) version determining the format of the staging table. User can also create an older DB version staging table to export STS to an older DB version. One of the following values:</p>
<ul>
<li>
<p><code dir="ltr">NULL</code> (default) &mdash; current DB version</p>
</li>
<li>
<p><code dir="ltr">STS_STGTAB_10_2_VERSION</code> &mdash; 10.2 DB version</p>
</li>
<li>
<p><code dir="ltr">STS_STGTAB_11_1_VERSION</code> &mdash; 11.1 DB version</p>
</li>
<li>
<p><code dir="ltr">STS_STGTAB_11_2_VERSION</code> &mdash; 11.2 DB version</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10187"></a>Usage Notes</p>
<ul>
<li>
<p>This procedure can be called several times to move more than one SQL tuning set. Users can then move the populated staging table to another system using any method, such as a database link or Oracle Data Pump. Users can then call the <a href="#CACJDGFI">UNPACK_STGTAB_SQLSET Procedure</a> create the SQL tuning set on the other system.</p>
</li>
<li>
<p>Note that this function issues a <code dir="ltr">COMMIT</code> after packing each SQL tuning set, so if an error is raised mid-execution, clear the staging table by deleting its rows.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10188"></a>Examples</p>
<p class="subhead2"><a id="ARPLS72947"></a>Put all SQL tuning sets on the system in the staging table</p>
<p>-- to create a staging table, see the <code dir="ltr">CREATE_STGTAB_SQLSET Procedure</code></p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.PACK_STGTAB_SQLSET(sqlset_name        =&gt; &#39;%&#39;, -
                                     sqlset_owner       =&gt; &#39;%&#39;, -
                                     staging_table_name =&gt; &#39;STGTAB_SQLSET&#39;);
</pre>
<p class="subhead2"><a id="ARPLS72948"></a>Put only those SQL tuning sets owned by the current user in the staging table</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.PACK_STGTAB_SQLSET(
   sqlset_name           =&gt; &#39;%&#39;,
   staging_table_name    =&gt; &#39;STGTAB_SQLSET&#39;);
</pre>
<p class="subhead2"><a id="ARPLS72949"></a>Pack a specific SQL tuning set</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.PACK_STGTAB_SQLSET(
   sqlset_name           =&gt; &#39;my_workload&#39;, -
   staging_table_name    =&gt; &#39;STGTAB_SQLSET&#39;);
</pre>
<p class="subhead2"><a id="ARPLS72950"></a>Pack a second SQL tuning set</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.PACK_STGTAB_SQLSET(
   sqlset_name           =&gt; &#39;workload_subset&#39;, -
   staging_table_name    =&gt; &#39;STGTAB_SQLSET&#39;);
</pre>
<p class="subhead2"><a id="ARPLS72951"></a>Pack the STS my_workload to a staging table STGTAB_SQLSET created for Oracle Database 10<span class="italic">g</span> Release 2 (10.2)</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.PACK_STGTAB_SQLSET(
   sqlset_name          =&gt; &#39;workload_subset&#39;, 
   staging_table_name   =&gt; &#39;STGTAB_SQLSET&#39;, 
   db_version           =&gt; DBMS_SQLTUNE.STS_STGTAB_10_2_VERSION);
</pre>
<p class="subhead2"><a id="ARPLS72952"></a>Pack the STS my_workload to a staging table STGTAB_SQLSET created for Oracle Database 11<span class="italic">g</span> Release 1 (11.1)</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.PACK_STGTAB_SQLSET(
   sqlset_name          =&gt; &#39;workload_subset&#39;, 
   staging_table_name   =&gt; &#39;STGTAB_SQLSET&#39;, 
   db_version           =&gt; DBMS_SQLTUNE.STS_STGTAB_11_1_VERSION);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68436" class="refsect2"><a id="CACGGJBG"></a>
<h3 class="refsect2"><a id="sthref10189"></a>REMAP_STGTAB_SQLPROF Procedure</h3>
<p>This procedure allows DBAs to change the profile data values kept in the staging table prior to performing an unpack operation. The procedure can be used to change the category of a profile.It can be used to change the name of a profile if one already exists on the system with the same name.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDCJJGF">SQL Profile Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10190"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.REMAP_STGTAB_SQLPROF (
  old_profile_name      IN VARCHAR2,
  new_profile_name      IN VARCHAR2 := NULL,
  new_profile_category  IN VARCHAR2 := NULL,
  staging_table_name    IN VARCHAR2,
  staging_schema_owner  IN VARCHAR2 := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10191"></a>Parameters</p>
<div id="ARPLS68437" class="tblformal">
<p class="titleintable"><a id="sthref10192"></a><a id="sthref10193"></a>Table 154-29 REMAP_STGTAB_SQLPROF Procedure Parameters</p>
<table class="cellalignment4330" title="REMAP_STGTAB_SQLPROF Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.CREATE_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t55">Parameter</th>
<th class="cellalignment4328" id="r1c2-t55">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t55" headers="r1c1-t55">
<p><code dir="ltr">old_profile_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t55 r1c2-t55">
<p>The name of the profile to target for a remap operation (case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t55" headers="r1c1-t55">
<p><code dir="ltr">new_profile_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t55 r1c2-t55">
<p>The new name of the profile, or <code dir="ltr">NULL</code> to remain the same (case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t55" headers="r1c1-t55">
<p><code dir="ltr">new_profile_category</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t55 r1c2-t55">
<p>The new category for the profile, or <code dir="ltr">NULL</code> to remain the same (case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t55" headers="r1c1-t55">
<p><code dir="ltr">staging_table_name</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t55 r1c2-t55">
<p>The name of the table on which to perform the remap operation (case-sensitive). Required.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t55" headers="r1c1-t55">
<p><code dir="ltr">staging_schema_owner</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t55 r1c2-t55">
<p>The schema where the table resides, or <code dir="ltr">NULL</code> for current schema (case-sensitive)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10194"></a>Usage Notes</p>
<p>Using this procedure requires the <code dir="ltr">UPDATE</code> privilege on the staging table.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10195"></a>Examples</p>
<p>Change the name of a profile before we unpack, to avoid conflicts</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.REMAP_STGTAB_SQLPROF(old_profile_name    =&gt; :pname,          -
                                       new_profile_name    =&gt; &#39;IMP&#39; || :pname, -
                                       staging_table_name  =&gt; &#39;PROFILE_STGTAB&#39;); 
 
</pre>
<p>Change the SQL profile in the staging table to be <code dir="ltr">&#39;TEST&#39;</code> category before we import it. This way users can test the profile on the new system before it is active.</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.REMAP_STGTAB_SQLPROF(old_profile_name     =&gt; :pname,       -
                                       new_profile_category =&gt; &#39;TEST&#39;,       -
                                       staging_table_name   =&gt; &#39;PROFILE_STGTAB&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68438" class="refsect2"><a id="CACIFDFG"></a>
<h3 class="refsect2"><a id="sthref10196"></a>REMAP_STGTAB_SQLSET Procedure</h3>
<p>This procedure changes the tuning set names and owners in the staging table so that they can be unpacked with different values than they had on the host system.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDCJJGF">SQL Profile Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10197"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.REMAP_STGTAB_SQLSET (
   old_sqlset_name        IN VARCHAR2,
   old_sqlset_owner       IN VARCHAR2 := NULL,
   new_sqlset_name        IN VARCHAR2 := NULL,
   new_sqlset_owner       IN VARCHAR2 := NULL,
   staging_table_name     IN VARCHAR2,
   staging_schema_owner   IN VARCHAR2 := NULL
   old_con_dbid           IN NUMBER   := NULL,
   new_con_dbid           IN NUMBER   := NULL);
);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10198"></a>Parameters</p>
<div id="ARPLS68439" class="tblformal">
<p class="titleintable"><a id="sthref10199"></a><a id="sthref10200"></a>Table 154-30 REMAP_STGTAB_SQLSET Procedure Parameters</p>
<table class="cellalignment4330" title="REMAP_STGTAB_SQLSET Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.CREATE_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t57">Parameter</th>
<th class="cellalignment4328" id="r1c2-t57">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t57" headers="r1c1-t57">
<p><code dir="ltr">old_sqlset_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t57 r1c2-t57">
<p>The name of the tuning set to target for a remap operation. Wildcards are not supported.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t57" headers="r1c1-t57">
<p><code dir="ltr">old_sqlset_owner</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t57 r1c2-t57">
<p>The new name of the tuning set owner to target for a remap operation. <code dir="ltr">NULL</code> for current schema owner</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t57" headers="r1c1-t57">
<p><code dir="ltr">new_sqlset_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t57 r1c2-t57">
<p>The new name for the tuning set, or <code dir="ltr">NULL</code> to keep the same tuning set name.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t57" headers="r1c1-t57">
<p><code dir="ltr">new_sqlset_owner</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t57 r1c2-t57">
<p>The new owner for the tuning set, or <code dir="ltr">NULL</code> to remain the same owner name.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t57" headers="r1c1-t57">
<p><code dir="ltr">staging_table_name</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t57 r1c2-t57">
<p>The name of the table on which to perform the remap operation (case-sensitive).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t57" headers="r1c1-t57">
<p><code dir="ltr">staging_schema_owner</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t57 r1c2-t57">
<p>The name of staging table owner, or <code dir="ltr">NULL</code> for current schema owner (case-sensitive).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t57" headers="r1c1-t57">
<p><code dir="ltr">old_con_dbid</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t57 r1c2-t57">
<p>The old container DBID to be remapped to a new container DBID. Specify <code dir="ltr">NULL</code> to use the same container DBID. You must provide both <code dir="ltr">old_con_dbid</code> and <code dir="ltr">new_con_dbid</code> for the remap to succeed.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t57" headers="r1c1-t57">
<p><code dir="ltr">new_con_dbid</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t57 r1c2-t57">
<p>The new container DBID to replace with the old container DBID. Specify <code dir="ltr">NULL</code> to use the same container DBID. You must provide both <code dir="ltr">old_con_dbid</code> and <code dir="ltr">new_con_dbid</code> for the remap to succeed.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10201"></a>Usage Notes</p>
<p>You can call this procedure multiple times to remap more than one tuning set name or owner. Note that this procedure only handles one tuning set per call.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10202"></a>Examples</p>
<pre dir="ltr">-- Change the name of an STS in the staging table before we unpack it.
EXEC DBMS_SQLTUNE.REMAP_STGTAB_SQLSET(old_sqlset_name    =&gt; &#39;my_workload&#39;, -
                                      old_sqlset_owner   =&gt; &#39;SH&#39;, -
                                      new_sqlset_name    =&gt; &#39;imp_workload&#39;, -
                                      staging_table_name =&gt; &#39;STGTAB_SQLSET&#39;);
 
-- Change the owner of an STS in the staging table before we unpack it.
EXEC DBMS_SQLTUNE.REMAP_STGTAB_SQLSET(old_sqlset_name    =&gt; &#39;imp_workload&#39;, -
                                      old_sqlset_owner   =&gt; &#39;SH&#39;, -
                                      new_sqlset_owner   =&gt; &#39;SYS&#39;, -
                                      staging_table_name =&gt; &#39;STGTAB_SQLSET&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68440" class="refsect2"><a id="i1006952"></a>
<h3 class="refsect2"><a id="sthref10203"></a>REMOVE_SQLSET_REFERENCE Procedure</h3>
<p>This procedure deactivates a SQL tuning set to indicate it is no longer used by the client.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10204"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.REMOVE_SQLSET_REFERENCE (
   sqlset_name   IN  VARCHAR2,
   reference_id  IN  NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10205"></a>Parameters</p>
<div id="ARPLS68441" class="tblformal">
<p class="titleintable"><a id="sthref10206"></a><a id="sthref10207"></a>Table 154-31 REMOVE_SQLSET_REFERENCE Procedure Parameters</p>
<table class="cellalignment4330" title="REMOVE_SQLSET_REFERENCE Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.REMOVE_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t59">Parameter</th>
<th class="cellalignment4328" id="r1c2-t59">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t59" headers="r1c1-t59">
<p><code dir="ltr">sqlset_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t59 r1c2-t59">
<p>The SQL tuning set name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t59" headers="r1c1-t59">
<p><code dir="ltr">reference_id</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t59 r1c2-t59">
<p>The identifier of the reference to remove</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10208"></a>Examples</p>
<p>You can remove references on a given SQL tuning set when you finish using it and want to make it writable again.</p>
<pre dir="ltr">EXEC DBMS_SQLTUNE.REMOVE_SQLSET_REFERENCE( -
                                sqlset_name   =&gt; &#39;my_workload&#39;, -
                                reference_id  =&gt; :rid);
</pre>
<p>Use views <code dir="ltr">USER/DBA_SQLSET_REFERENCES</code> to find all references on a given SQL tuning set.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73433" class="refsect2"><a id="CACFICAE"></a>
<h3 class="refsect2"><a id="sthref10209"></a>REPORT_AUTO_TUNING_TASK Function</h3>
<p>This function displays a report from the automatic tuning task. This function reports on a range of task executions, whereas the <a href="#CHDGEIHJ">REPORT_TUNING_TASK Function</a> reports on a single execution. Note that this function is deprecated with Oracle Database 11<span class="italic">g</span> Release 2 (11.2) in favor of <code dir="ltr">DBMS_AUTO_SQLTUNE.REPORT_AUTO_TUNING_TASK</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</p>
</li>
<li>
<p><a href="d_autosta.htm#CIAEHBGA">REPORT_AUTO_TUNING_TASK Function</a></p>
</li>
</ul>
</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10210"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.REPORT_AUTO_TUNING_TASK(
    begin_exec     IN VARCHAR2  := NULL,
    end_exec       IN VARCHAR2  := NULL,
    type           IN VARCHAR2  := TYPE_TEXT,
    level          IN VARCHAR2  := LEVEL_TYPICAL,
    section        IN VARCHAR2  := SECTION_ALL,
    object_id      IN NUMBER    := NULL,
    result_limit   IN NUMBER    := NULL)
  RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10211"></a>Parameters</p>
<div id="ARPLS73434" class="tblformal">
<p class="titleintable"><a id="sthref10212"></a><a id="sthref10213"></a>Table 154-32 REPORT_AUTO_TUNING_TASK Function Parameters</p>
<table class="cellalignment4330" title="REPORT_AUTO_TUNING_TASK Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.REPORT_AUTO_TUNING_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t61">Parameter</th>
<th class="cellalignment4328" id="r1c2-t61">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t61" headers="r1c1-t61">
<p><code dir="ltr">begin_exec</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t61 r1c2-t61">
<p>Name of execution from which to begin the report. <code dir="ltr">NULL</code> retrieves a report on the most recent run</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t61" headers="r1c1-t61">
<p><code dir="ltr">end_exec</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t61 r1c2-t61">
<p>Name of execution at which to end the report. <code dir="ltr">NULL</code> retrieves a report on the most recent run.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t61" headers="r1c1-t61">
<p><code dir="ltr">type</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t61 r1c2-t61">
<p>Type of the report to produce. Possible values are <code dir="ltr">TYPE_TEXT</code> which produces a text report</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t61" headers="r1c1-t61">
<p><code dir="ltr">level</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t61 r1c2-t61">
<p>Level of detail in the report:</p>
<ul>
<li>
<p><code dir="ltr">LEVEL_BASIC</code>: simple version of the report. Just show info about the actions taken by the advisor.</p>
</li>
<li>
<p><code dir="ltr">LEVEL_TYPICAL</code>: show information about every statement analyzed, including requests not implemented.</p>
</li>
<li>
<p><code dir="ltr">LEVEL_ALL</code>: highly detailed report level, also provides annotations about statements skipped over.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t61" headers="r1c1-t61">
<p><code dir="ltr">section</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t61 r1c2-t61">
<p>Optionally limit the report to a single section (<code dir="ltr">ALL</code> for all sections):</p>
<ul>
<li>
<p><code dir="ltr">SECTION_SUMMARY</code> - summary information</p>
</li>
<li>
<p><code dir="ltr">SECTION_FINDINGS</code> - tuning findings</p>
</li>
<li>
<p><code dir="ltr">SECTION_PLAN</code> - explain plans</p>
</li>
<li>
<p><code dir="ltr">SECTION_INFORMATION</code> - general information</p>
</li>
<li>
<p><code dir="ltr">SECTION_ERROR</code> - statements with errors</p>
</li>
<li>
<p><code dir="ltr">SECTION_ALL</code> - all statements</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t61" headers="r1c1-t61">
<p><code dir="ltr">object_id</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t61 r1c2-t61">
<p>Advisor framework object id that represents a single statement to restrict reporting to. <code dir="ltr">NULL</code> for all statements. Only valid for reports that target a single execution.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t61" headers="r1c1-t61">
<p><code dir="ltr">result_limit</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t61 r1c2-t61">
<p>Maximum number of SQL statements to show in the report</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10214"></a>Return Values</p>
<p>A <code dir="ltr">CLOB</code> containing the desired report.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72953" class="refsect2"><a id="CHDIDGFA"></a>
<h3 class="refsect2"><a id="sthref10215"></a>REPORT_SQL_DETAIL Function</h3>
<p>This function builds a report for a specific SQLID. For each SQLID it gives various statistics and details as obtained from the <code dir="ltr">V$</code> views and AWR.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDECAHH">SQL Performance Reporting Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10216"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.REPORT_SQL_DETAIL (
   sql_id                   IN  VARCHAR2   DEFAULT NULL,
   sql_plan_hash_value      IN  NUMBER     DEFAULT NULL,
   start_time               IN  DATE       DEFAULT NULL,
   duration                 IN  NUMBER     DEFAULT NULL,
   inst_id                  IN  NUMBER     DEFAULT NULL,
   dbid                     IN  NUMBER     DEFAULT NULL,
   event_detail             IN  VARCHAR2   DEFAULT &#39;YES&#39;,
   bucket_max_count         IN  NUMBER     DEFAULT 128,
   bucket_interval          IN  NUMBER     DEFAULT NULL,
   top_n                    IN  NUMBER     DEFAULT 10,
   report_level             IN  VARCHAR2   DEFAULT &#39;TYPICAL&#39;,
   type                     IN  VARCHAR2   DEFAULT &#39;ACTIVE&#39;)
 RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10217"></a>Parameters</p>
<div id="ARPLS72954" class="tblformal">
<p class="titleintable"><a id="sthref10218"></a><a id="sthref10219"></a>Table 154-33 REPORT_SQL_DETAIL Function Parameters</p>
<table class="cellalignment4330" title="REPORT_SQL_DETAIL Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.REPORT_SQL_DETAIL subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t63">Parameter</th>
<th class="cellalignment4328" id="r1c2-t63">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t63" headers="r1c1-t63">
<p><code dir="ltr">sql_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t63 r1c2-t63">
<p>SQLID for which monitoring information should be displayed. If <code dir="ltr">NULL</code> (the default), display statistics for the SQLID of the last SQL statement executed in the current session.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t63" headers="r1c1-t63">
<p><code dir="ltr">sql_plan_hash_value</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t63 r1c2-t63">
<p>Displays SQL statistics and details for a specific <code dir="ltr">plan_hash_value</code>. If <code dir="ltr">NULL</code> (default), displays statistics and details for all plans of the SQL_ID.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t63" headers="r1c1-t63">
<p><code dir="ltr">start_time</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t63 r1c2-t63">
<p>If specified, shows SQL activity (from <code dir="ltr">GV$ACTIVE_SESSION_HISTORY</code>) starting at this time. On Oracle RAC, the minimum <code dir="ltr">start_time</code> is the earliest <code dir="ltr">sample_time</code> of the in-memory ASH buffers across all instances. If <code dir="ltr">NULL</code> (default), one hour before the current time.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t63" headers="r1c1-t63">
<p><code dir="ltr">duration</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t63 r1c2-t63">
<p>Duration of activity in seconds for the report. If <code dir="ltr">NULL</code> (default) uses a value of 1 hour.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t63" headers="r1c1-t63">
<p><code dir="ltr">inst_id</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t63 r1c2-t63">
<p>Target instance to get SQL details from. If <code dir="ltr">NULL</code>, uses data from all instances. If 0 or -1, uses current instance.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t63" headers="r1c1-t63">
<p><code dir="ltr">dbid</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t63 r1c2-t63">
<p>DBID from which to get SQL details. If <code dir="ltr">NULL</code>, uses current DBID.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t63" headers="r1c1-t63">
<p><code dir="ltr">event_detail</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t63 r1c2-t63">
<p>When set to <code dir="ltr">&#39;NO&#39;</code>, the activity is aggregated by <code dir="ltr">wait_class</code> only. Use <code dir="ltr">&#39;YES&#39;</code> (the default) to aggregate by (<code dir="ltr">wait_class</code>, <code dir="ltr">event_name</code>).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t63" headers="r1c1-t63">
<p><code dir="ltr">bucket_max_count</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t63 r1c2-t63">
<p>If specified, this should be the maximum number of histogram buckets created in the report. If not specified, a value of 128 is used.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t63" headers="r1c1-t63">
<p><code dir="ltr">bucket_interval</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t63 r1c2-t63">
<p>If specified, this represents the exact time interval in seconds, of all histogram buckets. If specified, <code dir="ltr">bucket_max_count</code> is ignored.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t63" headers="r1c1-t63">
<p><code dir="ltr">top_n</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t63 r1c2-t63">
<p>Controls the number of entries to display per dimension in the top dimensions section. If not specified, a default value of 10 is used.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t63" headers="r1c1-t63">
<p><code dir="ltr">report_level</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t63 r1c2-t63">
<p>Level of detail for the report, either <code dir="ltr">&#39;BASIC&#39;</code>, <code dir="ltr">&#39;TYPICAL&#39;</code> or <code dir="ltr">&#39;ALL&#39;</code>. Default assumes <code dir="ltr">&#39;TYPICAL&#39;</code>. Their meanings are explained below.</p>
<p>In addition, individual report sections can also be enabled or disabled by using a +/- <code dir="ltr"><span class="codeinlineitalic">section_name</span></code>. Several sections are defined:</p>
<ul>
<li>
<p><code dir="ltr">&#39;TOP&#39;</code>- Show top values for the ASH dimensions for a SQL statement; <code dir="ltr">ON</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;SPM&#39;</code>- Show existing plan baselines for a SQL statement; <code dir="ltr">OFF</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;MISMATCH&#39;</code>- Show reasons for creating new child cursors (sharing criteria violations); <code dir="ltr">OFF</code> by default.</p>
</li>
<li>
<p><code dir="ltr">&#39;STATS&#39;</code>- Show SQL execution statistics per plan from <code dir="ltr">GV$SQLAREA_PLAN_HASH</code>; <code dir="ltr">ON</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;ACTIVITY&#39;</code> - Show top activity from ASH for each plan of a SQL statement; <code dir="ltr">ON</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;ACTIVITY_ALL&#39;</code> - Show top activity from ASH for each line of the plan for a SQL statement; <code dir="ltr">OFF</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;HISTOGRAM&#39;</code> - Show activity histogram for each plan of a SQL statement (plan time line histogram); <code dir="ltr">ON</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;SESSIONS&#39;</code> - Show activity for top sessions for each plan of a SQL statement; <code dir="ltr">OFF</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;MONITOR&#39;</code> - Show show one monitored SQL execution per execution plan; <code dir="ltr">ON</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;XPLAN&#39;</code> - Show execution plans; <code dir="ltr">ON</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;BINDS&#39;</code> - show captured bind data; <code dir="ltr">ON</code> by default</p>
</li>
</ul>
<p>In addition, SQL text can be specified at different levels:</p>
<ul>
<li>
<p>-<code dir="ltr">SQL_TEXT</code> - No SQL text in report</p>
</li>
<li>
<p><code dir="ltr">+SQL_TEXT</code> - OK with partial SQL text up to the first 2000 chars as stored in <code dir="ltr">GV$SQL_MONITOR</code></p>
</li>
<li>
<p><code dir="ltr">-SQL_FULLTEXT</code> - No full SQL text (<code dir="ltr">+SQL_TEXT</code>)</p>
</li>
<li>
<p><code dir="ltr">+SQL_FULLTEXT</code> - Show full SQL text (default value)</p>
</li>
</ul>
<p>The meanings of the three top-level report levels are:</p>
<ul>
<li>
<p><code dir="ltr">NONE</code> - minimum possible</p>
</li>
<li>
<p><code dir="ltr">BASIC</code> - <code dir="ltr">SQL_TEXT+STATS+ACTIVITY+HISTOGRAM</code></p>
</li>
<li>
<p><code dir="ltr">TYPICAL</code> - <code dir="ltr">SQL_FULLTEXT+TOP+STATS+ACTIVITY+HISTOGRAM+XPLAN+MONITOR</code></p>
</li>
<li>
<p><code dir="ltr">ALL</code> - everything</p>
</li>
</ul>
<p>Only one of these 4 levels can be specified and, if it is, it has to be at the start of the <code dir="ltr">REPORT_LEVEL</code> string</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t63" headers="r1c1-t63">
<p><code dir="ltr">type</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t63 r1c2-t63">
<p>Report format: <code dir="ltr">&#39;ACTIVE&#39;</code> by default. Can also be <code dir="ltr">&#39;XML&#39;</code> (see Usage Notes).</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10220"></a>Return Values</p>
<p>A <code dir="ltr">CLOB</code> containing the desired report.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10221"></a>Usage Notes</p>
<ul>
<li>
<p><code dir="ltr">ACTIVE</code> reports have a rich, interactive user interface similar to Enterprise Manager while not requiring any EM installation. The report file built is in HTML format, so it can be interpreted by most modern browsers. The code powering the active report is downloaded transparently by the web browser when the report is first viewed, hence viewing it requires outside connectivity.</p>
</li>
<li>
<p>The invoker needs the <code dir="ltr">SELECT</code> or <code dir="ltr">READ</code> privilege on the following views:</p>
<ul>
<li>
<p><code dir="ltr">V$SESSION</code></p>
</li>
<li>
<p><code dir="ltr">DBA_ADVISOR_FINDINGS</code></p>
</li>
<li>
<p><code dir="ltr">V$DATABASE</code></p>
</li>
<li>
<p><code dir="ltr">GV$ASH_INFO</code></p>
</li>
<li>
<p><code dir="ltr">GV$ACTIVE_SESSION_HISTORY</code></p>
</li>
<li>
<p><code dir="ltr">GV$SQLAREA_PLAN_HASH</code></p>
</li>
<li>
<p><code dir="ltr">GV$SQL</code></p>
</li>
<li>
<p><code dir="ltr">DBA_HIST_SNAPSHOT</code></p>
</li>
<li>
<p><code dir="ltr">DBA_HIST_WR_CONTROL</code></p>
</li>
<li>
<p><code dir="ltr">DBA_HIST_ACTIVE_SESS_HISTORY</code></p>
</li>
<li>
<p><code dir="ltr">DBA_HIST_SQLSTAT</code></p>
</li>
<li>
<p><code dir="ltr">DBA_HIST_SQL_BIND_METADATA</code></p>
</li>
<li>
<p><code dir="ltr">DBA_HIST_SQLTEXT</code></p>
</li>
<li>
<p><code dir="ltr">DBA_SQL_PLAN_BASELINES</code></p>
</li>
<li>
<p><code dir="ltr">DBA_SQL_PROFILES</code></p>
</li>
<li>
<p><code dir="ltr">DBA_ADVISOR_TASKS</code></p>
</li>
<li>
<p><code dir="ltr">DBA_SERVICES</code></p>
</li>
<li>
<p><code dir="ltr">DBA_USERS</code></p>
</li>
<li>
<p><code dir="ltr">DBA_OBJECTS</code></p>
</li>
<li>
<p><code dir="ltr">DBA_PROCEDURES</code></p>
</li>
</ul>
</li>
<li>
<p>The invoker needs the <code dir="ltr">EXECUTE</code> privilege on the <a href="d_xplan.htm#CACFJGHG">DBMS_XPLAN</a> package.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68444" class="refsect2"><a id="CACHCDGD"></a>
<h3 class="refsect2"><a id="sthref10222"></a>REPORT_SQL_MONITOR Function</h3>
<p>This function builds a report (text, simple HTML, active HTML, XML) for the monitoring information collected on behalf of the targeted statement execution.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CACEBCHB">Real-Time SQL Monitoring</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10223"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.REPORT_SQL_MONITOR(
   sql_id                    IN VARCHAR2  DEFAULT  NULL,
   dbop_name                 IN VARCHAR2  DEFAULT  NULL,
   dbop_exec_id              IN NUMBER    DEFAULT  NULL,
   session_id                IN NUMBER    DEFAULT  NULL,
   session_serial            IN NUMBER    DEFAULT  NULL,
   sql_exec_start            IN DATE      DEFAULT  NULL,
   sql_exec_id               IN NUMBER    DEFAULT  NULL,
   inst_id                   IN NUMBER    DEFAULT  NULL,
   start_time_filter         IN DATE      DEFAULT  NULL,
   end_time_filter           IN DATE      DEFAULT  NULL,
   instance_id_filter        IN NUMBER    DEFAULT  NULL,
   parallel_filter           IN VARCHAR2  DEFAULT  NULL,
   plan_line_filter          IN NUMBER    DEFAULT  NULL,
   event_detail              IN VARCHAR2  DEFAULT  &#39;YES&#39;,
   bucket_max_count          IN NUMBER    DEFAULT  128,
   bucket_interval           IN NUMBER    DEFAULT  NULL,
   base_path                 IN VARCHAR2  DEFAULT  NULL,
   last_refresh_time         IN DATE      DEFAULT  NULL,
   report_level              IN VARCHAR2  DEFAULT &#39;TYPICAL&#39;,
   type                      IN VARCHAR2  DEFAULT &#39;TEXT&#39;,
   sql_plan_hash_value       IN NUMBER    DEFAULT  NULL)
 RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10224"></a>Parameters</p>
<div id="ARPLS68445" class="tblformal">
<p class="titleintable"><a id="sthref10225"></a><a id="sthref10226"></a>Table 154-34 REPORT_SQL_MONITOR Function Parameters</p>
<table class="cellalignment4330" title="REPORT_SQL_MONITOR Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.REPORT_SQL_MONITOR subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t65">Parameter</th>
<th class="cellalignment4328" id="r1c2-t65">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t65" headers="r1c1-t65">
<p><code dir="ltr">sql_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t65 r1c2-t65">
<p><code dir="ltr">SQL_ID</code> for which monitoring information should be displayed. Use <code dir="ltr">NULL</code> (the default) to report on the last statement monitored by Oracle.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t65" headers="r1c1-t65">
<p><code dir="ltr">dbop_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t65 r1c2-t65">
<p><code dir="ltr">DBOP_NAME</code> for which monitoring information of the composite database operation is displayed.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t65" headers="r1c1-t65">
<p><code dir="ltr">dbop_exec_id</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t65 r1c2-t65">
<p>Execution ID for the composite database operation for which monitoring information is displayed.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t65" headers="r1c1-t65">
<p><code dir="ltr">session_id</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t65 r1c2-t65">
<p>If not <code dir="ltr">NULL</code>, this parameters targets only the sub-set of statements executed by the specified session. Default is <code dir="ltr">NULL</code>. Use <code dir="ltr">USERENV</code>(&#39;<code dir="ltr">SID</code>&#39;) for current session.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t65" headers="r1c1-t65">
<p><code dir="ltr">session_serial</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t65 r1c2-t65">
<p>In addition to the <code dir="ltr">session_id</code> parameter, one can also specify its session serial to ensure that the desired session incarnation is targeted. This parameter is ignored when <code dir="ltr">session_id</code> is <code dir="ltr">NULL</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t65" headers="r1c1-t65">
<p><code dir="ltr">sql_exec_start</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t65 r1c2-t65">
<p>This parameter, along with <code dir="ltr">sql_exec_id</code>, is only applicable when <code dir="ltr">sql_id</code> is also specified. Jointly, they can be used to display monitoring information associated to any execution of the statement identified by <code dir="ltr">sql_id</code>, assuming that this statement was monitored. When <code dir="ltr">NULL</code> (the default), the last monitored execution of SQL <code dir="ltr">sql_id</code> is shown.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t65" headers="r1c1-t65">
<p><code dir="ltr">sql_exec_id</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t65 r1c2-t65">
<p>This parameter, along with <code dir="ltr">sql_exec_start</code>, is only applicable when <code dir="ltr">sql_id</code> is also specified. Jointly, they can be used to display monitoring information associated to any execution of the statement identified by <code dir="ltr">sql_id</code>, assuming that this statement was monitored. When <code dir="ltr">NULL</code> (the default), the last monitored execution of SQL <code dir="ltr">sql_id</code> is shown.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t65" headers="r1c1-t65">
<p><code dir="ltr">inst_id</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t65 r1c2-t65">
<p>Only considers statements started on the specified instance. Use -1 to target the login instance. <code dir="ltr">NULL</code> (default) targets all instances.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t65" headers="r1c1-t65">
<p><code dir="ltr">start_time_filter</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t65 r1c2-t65">
<p>If not <code dir="ltr">NULL</code>, the report considers only the activity (from <code dir="ltr">GV$ACTIVE_SESSION_HISTORY</code>) recorded after the specified date. If <code dir="ltr">NULL</code>, the reported activity starts when the execution of the targeted SQL statement has started.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t65" headers="r1c1-t65">
<p><code dir="ltr">end_time_filter</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t65 r1c2-t65">
<p>If not <code dir="ltr">NULL</code>, the report shows only the activity (from <code dir="ltr">GV$ACTIVE_SESSION_HISTORY</code>) collected before the date <code dir="ltr">end_time_filter</code>. If <code dir="ltr">NULL</code>, the reported activity ends when the targeted SQL statement execution has ended or is the current time if the statement is still executing.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t65" headers="r1c1-t65">
<p><code dir="ltr">instance_id_filter</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t65 r1c2-t65">
<p>Only applies when the execution runs parallel across multiple Oracle Real Application Cluster (Oracle RAC) instances. This parameter allows to only report the activity of the specified instance. Use a <code dir="ltr">NULL</code> value (the default) to include the activity on all instances where the parallel query was executed.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t65" headers="r1c1-t65">
<p><code dir="ltr">parallel_filter</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t65 r1c2-t65">
<p>Applies only to parallel execution and allows reporting the activity of only a subset of the processes involved in the parallel execution (Query Coordinator and/or Parallel eXecution servers). The value of this parameter can be:</p>
<ul>
<li>
<p><code dir="ltr">NULL</code> to target all processes</p>
</li>
<li>
<p><code dir="ltr">[qc][servers(&lt;svr_grp&gt;[,] &lt;svr_set&gt;[,] &lt;srv_num&gt;)]: &#39;qc&#39;</code> stands for query coordinator and <code dir="ltr">servers()</code> stipulate which PX servers to consider.</p>
</li>
</ul>
<p>The following examples show how to target a subset of the parallel processes:</p>
<ul>
<li>
<p><code dir="ltr">qc</code>: targets only the query coordinator</p>
</li>
<li>
<p><code dir="ltr">servers(1)</code>: targets all parallel execution servers in group number 1. Note that statement running parallel have one main server group (group number 1) plus one additional group for each nested sub-query running parallel.</p>
</li>
<li>
<p><code dir="ltr">servers(,2)</code>: targets all parallel execution servers from any group but only running in set 1 of each group (each group has at most two set of parallel execution servers)</p>
</li>
<li>
<p><code dir="ltr">servers(1,1)</code>: consider only group 1, set 1</p>
</li>
<li>
<p><code dir="ltr">servers(1,2,4)</code>: consider only group 1, set 2, server number 4. This reports for a single parallel server process</p>
</li>
<li>
<p><code dir="ltr">qc servers(1,2,4)</code>: same as above by also including the query coordinator</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t65" headers="r1c1-t65">
<p><code dir="ltr">event_detail</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t65 r1c2-t65">
<p>When value is &#39;<code dir="ltr">YES</code>&#39; (the default), reported activity from <code dir="ltr">GV$ACTIVE_SESSION_HISTORY</code> is aggregated by (<code dir="ltr">wait_class</code>, <code dir="ltr">event_name</code>). Use &#39;<code dir="ltr">NO</code>&#39; to only aggregate by <code dir="ltr">wait_class</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t65" headers="r1c1-t65">
<p><code dir="ltr">bucket_max_count</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t65 r1c2-t65">
<p>If specified, this should be the maximum number of histogram buckets created in the report</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t65" headers="r1c1-t65">
<p><code dir="ltr">bucket_interval</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t65 r1c2-t65">
<p>If specified, this represents the exact time interval in seconds, of all histogram buckets. If specified, <code dir="ltr">bucket_max_count</code> is ignored.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t65" headers="r1c1-t65">
<p><code dir="ltr">base_path</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t65 r1c2-t65">
<p>URL path for flex HTML resources since flex HTML format is required to access external files (java scripts and the flash SWF file itself)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t65" headers="r1c1-t65">
<p><code dir="ltr">last_refresh_time</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t65 r1c2-t65">
<p>If not <code dir="ltr">NULL</code> (default is <code dir="ltr">NULL</code>), the time when the report was last retrieved (see <code dir="ltr">SYSDATE</code> attribute of the report tag). Use this option to display the report of a running query, and when the report is refreshed on a regular basis. This optimizes the size of the report since only the new or changed information is returned. In particular, the following are optimized:</p>
<ul>
<li>
<p>SQL text is not returned when this option is specified</p>
</li>
<li>
<p>activity histogram starts at the bucket that intersect at that time. The entire content of the bucket is returned, even if <code dir="ltr">last_refresh_time</code> is after the start of that bucket</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r19c1-t65" headers="r1c1-t65">
<p><code dir="ltr">report_level</code></p>
</td>
<td class="cellalignment4329" headers="r19c1-t65 r1c2-t65">
<p>Level of detail for the report, either <code dir="ltr">&#39;NONE&#39;</code>, <code dir="ltr">&#39;BASIC&#39;</code>, <code dir="ltr">&#39;TYPICAL&#39;</code> or <code dir="ltr">&#39;ALL&#39;</code>. Default assumes <code dir="ltr">&#39;TYPICAL&#39;</code>. Their meanings are explained below.</p>
<p>In addition, individual report sections can also be enabled or disabled by using a +/- <code dir="ltr"><span class="codeinlineitalic">section_name</span></code>. Several sections are defined:</p>
<ul>
<li>
<p><code dir="ltr">&#39;XPLAN&#39;</code>- Show explain plan; <code dir="ltr">ON</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;PLAN&#39;</code>- Show plan monitoring statistics; <code dir="ltr">ON</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;SESSIONS&#39;</code>- Show session details. Applies only to parallel queries; <code dir="ltr">ON</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;INSTANCE&#39;</code>- Show instance details. Applies only to parallel and cross instance; <code dir="ltr">ON</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;PARALLEL&#39;</code>- An umbrella parameter for specifying <code dir="ltr">sessions+instance</code> details</p>
</li>
<li>
<p><code dir="ltr">&#39;ACTIVITY&#39;</code> - Show activity summary at global level, plan line level and session or instance level (if applicable); <code dir="ltr">ON</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;BINDS&#39;</code> - Show bind information when available; <code dir="ltr">ON</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;METRICS&#39;</code> - Show metric data (CPU, I/Os, ...) over time; <code dir="ltr">ON</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;ACTIVITY_HISTOGRAM&#39;</code> - Show an histogram of the overall query activity; <code dir="ltr">ON</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;PLAN_HISTOGRAM&#39;</code> - Show activity histogram at plan line level; <code dir="ltr">OFF</code> by default</p>
</li>
<li>
<p><code dir="ltr">&#39;OTHER&#39;</code> - Other info; <code dir="ltr">ON</code> by default</p>
</li>
</ul>
<p>In addition, SQL text can be specified at different levels:</p>
<ul>
<li>
<p><code dir="ltr">SQL_TEXT</code> - No SQL text in report</p>
</li>
<li>
<p><code dir="ltr">+SQL_TEXT</code> - OK with partial SQL text up to the first 2000 chars as stored in <code dir="ltr">GV$SQL_MONITOR</code></p>
</li>
<li>
<p><code dir="ltr">-SQL_FULLTEXT</code> - No full SQL text (<code dir="ltr">+SQL_TEXT</code>)</p>
</li>
<li>
<p><code dir="ltr">+SQL_FULLTEXT</code> - Show full SQL text (default value)</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r20c1-t65" headers="r1c1-t65">
<p><code dir="ltr">report_level</code> (contd.)</p>
</td>
<td class="cellalignment4329" headers="r20c1-t65 r1c2-t65">
<p>The meanings of the three top-level report levels are:</p>
<ul>
<li>
<p><code dir="ltr">NONE</code> - minimum possible</p>
</li>
<li>
<p><code dir="ltr">+BASIC</code> - <code dir="ltr">SQL_TEXT-PLAN-XPLAN-SESSIONS-INSTANCE-ACTIVITY_HISTOGRAM-PLAN_HISTOGRAM-METRICS</code></p>
</li>
<li>
<p><code dir="ltr">TYPICAL</code> - everything but <code dir="ltr">PLAN_HISTOGRAM</code></p>
</li>
<li>
<p><code dir="ltr">ALL</code> - everything</p>
</li>
</ul>
<p>Only one of these 4 levels can be specified and, if it is, it has to be at the start of the <code dir="ltr">REPORT_LEVEL</code> string</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r21c1-t65" headers="r1c1-t65">
<p><code dir="ltr">type</code></p>
</td>
<td class="cellalignment4329" headers="r21c1-t65 r1c2-t65">
<p>Report format, <code dir="ltr">&#39;TEXT&#39;</code> by default. Can be <code dir="ltr">&#39;TEXT&#39;,</code> &#39;<code dir="ltr">HTML&#39;</code>, <code dir="ltr">&#39;XML&#39;</code> or <code dir="ltr">&#39;ACTIVE&#39;</code> (see Usage Notes).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r22c1-t65" headers="r1c1-t65">
<p><code dir="ltr">sql_plan_hash_value</code></p>
</td>
<td class="cellalignment4329" headers="r22c1-t65 r1c2-t65">
<p>Target only those SQL executions with the specified <code dir="ltr">plan_hash_value</code>. Default is <code dir="ltr">NULL</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10227"></a>Return Values</p>
<p>A <code dir="ltr">CLOB</code> containing the desired report.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10228"></a>Usage Notes</p>
<ul>
<li>
<p>The target SQL statement for this report can be:</p>
<ul>
<li>
<p>The last SQL monitored by Oracle (this is the default behavior, so there is no need to specify any parameter). The last SQL executed by a specific session and monitored by Oracle. The session is identified by its session id and optionally it serial number. For example, use <code dir="ltr">session_id</code> <code dir="ltr">=&gt;</code> <code dir="ltr">USERENV (&#39;SID&#39;)</code> for the current session or <code dir="ltr">session_id</code><code dir="ltr">=&gt;</code><code dir="ltr">20</code>, <code dir="ltr">session_serial</code><code dir="ltr">=&gt;</code><code dir="ltr">103</code> for session ID 20, serial number 103.The last execution of a specific statement identified by its <code dir="ltr">sql_id</code>.A specific execution of a SQL statement identified by its execution key (<code dir="ltr">sql_id</code>, <code dir="ltr">sql_exec_start</code> and <code dir="ltr">sql_exec_id</code>).</p>
</li>
</ul>
</li>
<li>
<p>This report produces performance data exposed by several fixed views, listed below. For this reason, the invoker of the report function must have privilege to select data from these fixed views (such as the <code dir="ltr">SELECT_CATALOG</code> role).</p>
<ul>
<li>
<p><code dir="ltr">GV$SQL_MONITOR</code></p>
</li>
<li>
<p><code dir="ltr">GV$SQL_PLAN_MONITOR</code></p>
</li>
<li>
<p><code dir="ltr">GV$SQL_PLAN</code></p>
</li>
<li>
<p><code dir="ltr">GV$ACTIVE_SESSION_HISTORY</code></p>
</li>
<li>
<p><code dir="ltr">GV$SESSION_LONGOPS</code></p>
</li>
<li>
<p><code dir="ltr">GV$SQL</code></p>
</li>
</ul>
</li>
<li>
<p>The <code dir="ltr">bucket_max_count</code> and <code dir="ltr">bucket_interval</code> parameters control the activity histogram. By default, the maximum number of buckets is set to 128 and the RDBMS derives the <code dir="ltr">bucket_interval</code> based on this. The <code dir="ltr">bucket_interval</code> (value is in seconds) is computed such that it is the smallest possible power of 2 value (starting at 1s) without exceeding the maximum number of buckets. For example, if the query has executed for 600s, the RDBMS selects a <code dir="ltr">bucket_interval</code> of 8s (a power of two) given that 600/8 = 74 which is less than 128 buckets maximum. Smaller than 8s would be 4s which would lead to more buckets than the 128 maximum. If <code dir="ltr">bucket_interval</code> is specified, then the RDBMS uses that value instead of deriving it from <code dir="ltr">bucket_max_count</code>.</p>
</li>
<li>
<p><code dir="ltr">ACTIVE</code> reports have a rich, interactive user interface similar to Enterprise Manager while not requiring any EM installation. The report file built is in HTML format, so it can be interpreted by most modern browsers. The code powering the active report is downloaded transparently by the web browser when the report is first viewed, hence viewing it requires outside connectivity.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink TGSQL" href="../TGSQL/toc.htm"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for more information about SQL real-time monitoring.</div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72955" class="refsect2"><a id="CACJHGEC"></a>
<h3 class="refsect2"><a id="sthref10229"></a>REPORT_SQL_MONITOR_LIST Function</h3>
<p>This function builds a report for all or a sub-set of statements monitored by Oracle. For each statement, the subprogram gives key information and associated global statistics.</p>
<p>Use the <a href="#CACHCDGD">REPORT_SQL_MONITOR Function</a> to get detail monitoring information for a single SQL statement.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CACEBCHB">Real-Time SQL Monitoring</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10230"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.REPORT_SQL_MONITOR_LIST(
   sql_id                    IN VARCHAR2  DEFAULT  NULL,
   session_id                IN NUMBER    DEFAULT  NULL,
   session_serial            IN NUMBER    DEFAULT  NULL,
   inst_id                   IN NUMBER    DEFAULT  NULL,
   active_since_date         IN DATE      DEFAULT  NULL,
   active_since_sec          IN NUMBER    DEFAULT  NULL,
   last_refresh_time         IN DATE      DEFAULT  NULL,
   report_level              IN VARCHAR2  DEFAULT  &#39;TYPICAL&#39;,
   auto_refresh              IN NUMBER    DEFAULT  NULL,
   base_path                 IN VARCHAR2  DEFAULT  NULL,
   type                      IN VARCHAR2  DEFAULT &#39;TEXT&#39;)
 RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10231"></a>Parameters</p>
<div id="ARPLS72956" class="tblformal">
<p class="titleintable"><a id="sthref10232"></a><a id="sthref10233"></a>Table 154-35 REPORT_SQL_MONITOR_LIST Function Parameters</p>
<table class="cellalignment4330" title="REPORT_SQL_MONITOR_LIST Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.REPORT_SQL_MONITOR subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t68">Parameter</th>
<th class="cellalignment4328" id="r1c2-t68">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t68" headers="r1c1-t68">
<p><code dir="ltr">sql_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t68 r1c2-t68">
<p><code dir="ltr">SQL_ID</code> for which monitoring information should be displayed. Use <code dir="ltr">NULL</code> (the default) to report on the last statement monitored by Oracle.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t68" headers="r1c1-t68">
<p><code dir="ltr">session_id</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t68 r1c2-t68">
<p>If not <code dir="ltr">NULL</code>, this parameters targets only the sub-set of statements executed by the specified session. Default is <code dir="ltr">NULL</code>. Use <code dir="ltr">-1</code> or <code dir="ltr">USERENV</code>(&#39;<code dir="ltr">SID</code>&#39;) for current session.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t68" headers="r1c1-t68">
<p><code dir="ltr">session_serial</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t68 r1c2-t68">
<p>In addition to the <code dir="ltr">session_id</code> parameter, you can also specify its session serial to ensure that the desired session incarnation is targeted. This parameter is ignored when <code dir="ltr">session_id</code> is <code dir="ltr">NULL</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t68" headers="r1c1-t68">
<p><code dir="ltr">inst_id</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t68 r1c2-t68">
<p>Only considers statements started on the specified instance. Use -1 to target the login instance. <code dir="ltr">NULL</code> (default) targets all instances.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t68" headers="r1c1-t68">
<p><code dir="ltr">active_since_date</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t68 r1c2-t68">
<p>If not <code dir="ltr">NULL</code> (default), returns only monitored statements active since the specified time. This includes all statements that are still executing along with all statements that have completed their execution after the specified date and time.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t68" headers="r1c1-t68">
<p><code dir="ltr">active_since_sec</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t68 r1c2-t68">
<p>Same as <code dir="ltr">active_since_date</code> but with the date specified relative to the current <code dir="ltr">SYSDATE</code> minus a specified number of seconds. For example, use 3600 to apply a limit of 1 hour.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t68" headers="r1c1-t68">
<p><code dir="ltr">last_refresh_time</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t68 r1c2-t68">
<p>If not <code dir="ltr">NULL</code> (default), the date and time when the list report was last retrieved. This optimizes the case where an application shows the list and refreshes the report on a regular basis (such as once every 5 seconds). In this case, the report shows detail about the execution of monitored queries that active since the specified <code dir="ltr">last_refresh_time</code>. For other queries, the report returns the execution key (<code dir="ltr">sql_id</code>, <code dir="ltr">sql_exec_start</code>, <code dir="ltr">sql_exec_id</code>). For queries with a first refresh time after the specified date, the function returns only the SQL execution key and statistics.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t68" headers="r1c1-t68">
<p><code dir="ltr">report_level</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t68 r1c2-t68">
<p>Level of detail for the report. The level is one of the following:</p>
<ul>
<li>
<p><code dir="ltr">BASIC</code> - SQL text up to 200 characters</p>
</li>
<li>
<p><code dir="ltr">TYPICAL</code> - include full SQL text assuming that cursor has not aged out, in which case the SQL text is included up to 2000 characters</p>
</li>
<li>
<p><code dir="ltr">ALL</code> - currently the same as <code dir="ltr">TYPICAL</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t68" headers="r1c1-t68">
<p><code dir="ltr">auto_refresh</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t68 r1c2-t68">
<p>Currently non-operational, reserved for future use.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t68" headers="r1c1-t68">
<p><code dir="ltr">base_path</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t68 r1c2-t68">
<p>URL path for flex HTML resources because flex HTML format is required to access external files (java scripts and the flash SWF file itself).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t68" headers="r1c1-t68">
<p><code dir="ltr">type</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t68 r1c2-t68">
<p>Report format: <code dir="ltr">TEXT</code> (default), <code dir="ltr">HTML</code>, or <code dir="ltr">XML</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10234"></a>Return Values</p>
<p>A report (XML, text, HTML) for the list of SQL statements that have been monitored.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10235"></a>Usage Notes</p>
<p>The user tuning this function needs to have privilege to access the following fixed views: <code dir="ltr">GV$SQL_MONITOR</code> and <code dir="ltr">GV$SQL</code></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink TGSQL" href="../TGSQL/toc.htm"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for more information about SQL real-time monitoring.</div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68446" class="refsect2"><a id="CHDGEIHJ"></a>
<h3 class="refsect2"><a id="sthref10236"></a>REPORT_TUNING_TASK Function</h3>
<p>This procedure displays the results of a tuning task.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDECAHH">SQL Performance Reporting Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10237"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.REPORT_TUNING_TASK(
   task_name       IN   VARCHAR2,
   type            IN   VARCHAR2   := &#39;TEXT&#39;,
   level           IN   VARCHAR2   := &#39;TYPICAL&#39;,
   section         IN   VARCHAR2   := ALL,
   object_id       IN   NUMBER     := NULL,
   result_limit    IN   NUMBER     := NULL,
   owner_name      IN    VARCHAR2  := NULL,
   execution_name  IN  VARCHAR2    := NULL)
RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10238"></a>Parameters</p>
<div id="ARPLS68447" class="tblformal">
<p class="titleintable"><a id="sthref10239"></a><a id="sthref10240"></a>Table 154-36 REPORT_TUNING_TASK Function Parameters</p>
<table class="cellalignment4330" title="REPORT_TUNING_TASK Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.REPORT_TUNING_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t71">Parameter</th>
<th class="cellalignment4328" id="r1c2-t71">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t71" headers="r1c1-t71">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t71 r1c2-t71">
<p>Name of the tuning task to report.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t71" headers="r1c1-t71">
<p><code dir="ltr">type</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t71 r1c2-t71">
<p>Type of the report to produce. Possible values are <code dir="ltr">TEXT</code> which produces a text report.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t71" headers="r1c1-t71">
<p><code dir="ltr">level</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t71 r1c2-t71">
<p>Level of detail in the report:</p>
<ul>
<li>
<p><code dir="ltr">BASIC</code>: simple version of the report. Just show info about the actions taken by the advisor.</p>
</li>
<li>
<p><code dir="ltr">TYPICAL</code>: show information about every statement analyzed, including requests not implemented.</p>
</li>
<li>
<p><code dir="ltr">ALL</code>: highly detailed report level, also provides annotations about statements skipped over.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t71" headers="r1c1-t71">
<p><code dir="ltr">section</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t71 r1c2-t71">
<p>Optionally limit the report to a single section (<code dir="ltr">ALL</code> for all sections):</p>
<ul>
<li>
<p><code dir="ltr">SUMMARY</code> - summary information</p>
</li>
<li>
<p><code dir="ltr">FINDINGS</code> - tuning findings</p>
</li>
<li>
<p><code dir="ltr">PLAN</code> - explain plans</p>
</li>
<li>
<p><code dir="ltr">INFORMATION</code> - general information</p>
</li>
<li>
<p><code dir="ltr">ERROR</code> - statements with errors</p>
</li>
<li>
<p><code dir="ltr">ALL</code> - all statements</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t71" headers="r1c1-t71">
<p><code dir="ltr">object_id</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t71 r1c2-t71">
<p>Advisor framework object id that represents a single statement to restrict reporting to. <code dir="ltr">NULL</code> for all statements. Only valid for reports that target a single execution.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t71" headers="r1c1-t71">
<p><code dir="ltr">result_limit</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t71 r1c2-t71">
<p>Maximum number of SQL statements to show in the report.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t71" headers="r1c1-t71">
<p><code dir="ltr">owner_name</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t71 r1c2-t71">
<p>Owner of the relevant tuning task. Defaults to the current schema owner.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t71" headers="r1c1-t71">
<p><code dir="ltr">execution_name</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t71 r1c2-t71">
<p>Name of the task execution to use. If <code dir="ltr">NULL</code>, the report is generated for the last task execution.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10241"></a>Return Values</p>
<p>A <code dir="ltr">CLOB</code> containing the desired report.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10242"></a>Examples</p>
<pre dir="ltr">-- Display the report for a single statement.
SELECT DBMS_SQLTUNE.REPORT_TUNING_TASK(:stmt_task) 
FROM   DUAL;
 
-- Display the summary for a SQL tuning set.
SELECT DBMS_SQLTUNE.REPORT_TUNING_TASK(:sts_task, &#39;TEXT&#39;, &#39;TYPICAL&#39;, &#39;SUMMARY&#39;)
FROM   DUAL;
 
-- Display the findings for a specific statement.
SELECT DBMS_SQLTUNE.REPORT_TUNING_TASK(:sts_task, &#39;TEXT&#39;, &#39;TYPICAL&#39;,&#39;FINDINGS&#39;, 5)
FROM   DUAL;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68448" class="refsect2"><a id="CHDJEHBG"></a>
<h3 class="refsect2"><a id="sthref10243"></a>RESET_TUNING_TASK Procedure</h3>
<p>This procedure is called on a tuning task that is not currently executing to prepare it for re-execution.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10244"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.RESET_TUNING_TASK(
 task_name         IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10245"></a>Parameters</p>
<div id="ARPLS68449" class="tblformal">
<p class="titleintable"><a id="sthref10246"></a><a id="sthref10247"></a>Table 154-37 RESET_TUNING_TASK Procedure Parameters</p>
<table class="cellalignment4330" title="RESET_TUNING_TASK Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.RESET_TUNING_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t73">Parameter</th>
<th class="cellalignment4328" id="r1c2-t73">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t73" headers="r1c1-t73">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t73 r1c2-t73">
<p>The name of the tuning task to reset</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10248"></a>Examples</p>
<pre dir="ltr">-- reset and re-execute a task
EXEC DBMS_SQLTUNE.RESET_TUNING_TASK(:sts_task);
 
-- re-execute the task
EXEC DBMS_SQLTUNE.EXECUTE_TUNING_TASK(:sts_task);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68450" class="refsect2"><a id="CHDJEABC"></a>
<h3 class="refsect2"><a id="sthref10249"></a>RESUME_TUNING_TASK Procedure</h3>
<p>This procedure resumes a previously interrupted task that was created to process a SQL tuning set.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10250"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.RESUME_TUNING_TASK(
 task_name         IN VARCHAR2,
 basic_filter      IN VARCHAR2 := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10251"></a>Parameters</p>
<div id="ARPLS68451" class="tblformal">
<p class="titleintable"><a id="sthref10252"></a><a id="sthref10253"></a>Table 154-38 RESUME_TUNING_TASK Procedure Parameters</p>
<table class="cellalignment4330" title="RESUME_TUNING_TASK Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.RESUME_TUNING_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t75">Parameter</th>
<th class="cellalignment4328" id="r1c2-t75">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t75" headers="r1c1-t75">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t75 r1c2-t75">
<p>The name of the tuning task to resume.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t75" headers="r1c1-t75">
<p><code dir="ltr">basic_filter</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t75 r1c2-t75">
<p>A SQL predicate to filter the SQL from the SQL tuning set. Note that this filter is applied in conjunction with the basic filter (i.e., parameter <code dir="ltr">basic_filter</code>) when calling <a href="#CHDGBCDB">CREATE_TUNING_TASK Functions</a>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10254"></a>Usage Notes</p>
<p>Resuming a single SQL tuning task (a task that was created to tune a single SQL statement as compared to a SQL tuning set) is not supported.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10255"></a>Examples</p>
<pre dir="ltr">-- Interrupt the task
EXEC DBMS_SQLTUNE.INTERRUPT_TUNING_TASK(:conc_task);
 
-- Once a task is interrupted, we can elect to reset it, resume it, or check
-- out its results and then decide.  For this example we will just resume.
 
EXEC DBMS_SQLTUNE.RESUME_TUNING_TASK(:conc_task);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74765" class="refsect2"><a id="CACGDDAH"></a>
<h3 class="refsect2">SCHEDULE_TUNING_TASK Function</h3>
<p>This function creates a tuning task for a single SQL statement and schedules a <code dir="ltr">DBMS_SCHEDULER</code> job to execute the tuning task. One form of the function finds the information about the statement to be tuned in the shared SQL area, whereas the other finds the information in AWR.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10256"></a>Syntax</p>
<p class="subhead2"><a id="ARPLS74766"></a>Shared SQL Area Format</p>
<pre dir="ltr">DBMS_SQLTUNE.SCHEDULE_TUNING_TASK(
  sql_id          IN VARCHAR2,
  plan_hash_value IN NUMBER                   := NULL,
  start_date      IN TIMESTAMP WITH TIME ZONE := NULL,   
  scope           IN VARCHAR2                 := SCOPE_COMPREHENSIVE,   
  time_limit      IN NUMBER                   := TIME_LIMIT_DEFAULT,
  task_name       IN VARCHAR2                 := NULL,    
  description     IN VARCHAR2                 := NULL,
  con_name        IN VARCHAR2                 := NULL)
RETURN VARCHAR2;
</pre>
<p class="subhead2"><a id="ARPLS74767"></a>AWR Format</p>
<pre dir="ltr">DBMS_SQLTUNE.SCHEDULE_TUNING_TASK(
  begin_snap      IN NUMBER,
  end_snap        IN NUMBER,
  sql_id          IN VARCHAR2,
  plan_hash_value IN NUMBER                   := NULL,    
  start_date      IN TIMESTAMP WITH TIME ZONE := NULL,   
  scope           IN VARCHAR2                 := SCOPE_COMPREHENSIVE,   
  time_limit      IN NUMBER                   := TIME_LIMIT_DEFAULT,
  task_name       IN VARCHAR2                 := NULL,    
  description     IN VARCHAR2                 := NULL,
  con_name        IN VARCHAR2                 := NULL)
RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10257"></a>Parameters</p>
<div id="ARPLS74768" class="tblformal">
<p class="titleintable"><a id="sthref10258"></a><a id="sthref10259"></a>Table 154-39 SCHEDULE_TUNING_TASK Function Parameters</p>
<table class="cellalignment4330" title="SCHEDULE_TUNING_TASK Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.RESET_TUNING_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t77">Parameter</th>
<th class="cellalignment4328" id="r1c2-t77">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t77" headers="r1c1-t77">
<p><code dir="ltr">begin_snap</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t77 r1c2-t77">
<p>The beginning snapshot identifier. The range is exclusive, which means that SQL statements in this snapshot ID are not included.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t77" headers="r1c1-t77">
<p><code dir="ltr">end_snap</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t77 r1c2-t77">
<p>The end snapshot identifier. The range is inclusive, which means that SQL statements in this snapshot ID are included.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t77" headers="r1c1-t77">
<p><code dir="ltr">sql_id</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t77 r1c2-t77">
<p>The SQL ID of the statement to be tuned.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t77" headers="r1c1-t77">
<p><code dir="ltr">plan_hash_value</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t77 r1c2-t77">
<p>The plan hash value of the statement to be tuned. For example, the tuning job fetches captured binds for this SQL plan.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t77" headers="r1c1-t77">
<p><code dir="ltr">start_date</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t77 r1c2-t77">
<p>The date on which the schedule becomes valid. If null, then SQL Tuning Advisor immediately executes the task.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t77" headers="r1c1-t77">
<p><code dir="ltr">scope</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t77 r1c2-t77">
<p>The scope of the tuning job: limited, or comprehensive.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t77" headers="r1c1-t77">
<p><code dir="ltr">time_limit</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t77 r1c2-t77">
<p>The maximum duration in seconds for the SQL tuning session.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t77" headers="r1c1-t77">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t77 r1c2-t77">
<p>Optional SQL tuning task name.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t77" headers="r1c1-t77">
<p><code dir="ltr">description</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t77 r1c2-t77">
<p>Description of the SQL tuning session. The description can contain a maximum of 256 characters.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t77" headers="r1c1-t77">
<p><code dir="ltr">con_name</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t77 r1c2-t77">
<p>The container from which SQL Tuning Advisor accesses the SQL statement information.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10260"></a>Return Values</p>
<p>A SQL tuning task name that is unique for each user. Multiple users can assign the same name to their advisor tasks.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10261"></a>Usage Notes</p>
<ul>
<li>
<p>The task is scheduled once only.</p>
</li>
<li>
<p>The name of the scheduler job is created as follows: <code dir="ltr">sqltune_job_</code><code dir="ltr"><span class="codeinlineitalic">taskid</span></code><code dir="ltr">_</code><code dir="ltr"><span class="codeinlineitalic">orahash</span></code><code dir="ltr">(</code><code dir="ltr"><span class="codeinlineitalic">systimestamp</span></code><code dir="ltr">)</code>.</p>
</li>
<li>
<p>The caller must possess the <code dir="ltr">CREATE JOB</code> privilege for the job.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68452" class="refsect2"><a id="CHDCHDED"></a>
<h3 class="refsect2"><a id="sthref10262"></a>SCRIPT_TUNING_TASK Function</h3>
<p>This function creates a SQL*PLUS script which can then be executed to implement a set of Advisor recommendations.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDDCCBJ">SQL Tuning Advisor Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10263"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.SCRIPT_TUNING_TASK(
  task_name         IN VARCHAR2,
  rec_type          IN VARCHAR2  := REC_TYPE_ALL,
  object_id         IN NUMBER    := NULL,
  result_limit      IN NUMNBER   := NULL,
  owner_name        IN VARCHAR2  := NULL,
  execution_name    IN VARCHAR2  := NULL)
 RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10264"></a>Parameters</p>
<div id="ARPLS68453" class="tblformal">
<p class="titleintable"><a id="sthref10265"></a><a id="sthref10266"></a>Table 154-40 SCRIPT_TUNING_TASK Function Parameters</p>
<table class="cellalignment4330" title="SCRIPT_TUNING_TASK Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.RESET_TUNING_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t79">Parameter</th>
<th class="cellalignment4328" id="r1c2-t79">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t79" headers="r1c1-t79">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t79 r1c2-t79">
<p>Name of the tuning task for which to apply a script</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t79" headers="r1c1-t79">
<p><code dir="ltr">rec_type</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t79 r1c2-t79">
<p>Filter the script by types of recommendations to include. Any subset of the following separated by commas: or &#39;<code dir="ltr">ALL</code>: &#39;<code dir="ltr">&#39;PROFILES&#39;</code> &#39;<code dir="ltr">&#39;STATISTICS&#39;</code> &#39;<code dir="ltr">&#39;INDEXES&#39;</code>. For example, a script with profiles and statistics: <code dir="ltr">&#39;PROFILES,STATISTICS&#39;</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t79" headers="r1c1-t79">
<p><code dir="ltr">object_id</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t79 r1c2-t79">
<p>Optionally filters by a single object ID</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t79" headers="r1c1-t79">
<p><code dir="ltr">result_limit</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t79 r1c2-t79">
<p>Optionally shows commands for only top <span class="italic">n</span> SQL (ordered by <code dir="ltr">object_id</code> and ignored if an <code dir="ltr">object_id</code> is also specified)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t79" headers="r1c1-t79">
<p><code dir="ltr">owner_name</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t79 r1c2-t79">
<p>Owner of the relevant tuning task. Defaults to the current schema owner</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t79" headers="r1c1-t79">
<p><code dir="ltr">excution_name</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t79 r1c2-t79">
<p>Name of the task execution to use. If <code dir="ltr">NULL</code>, the script is generated for the last task execution.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10267"></a>Return Values</p>
<p>Returns a script in the form of a <code dir="ltr">CLOB</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10268"></a>Usage Notes</p>
<ul>
<li>
<p>Once the script is returned, it should then by checked by the DBA and executed.</p>
</li>
<li>
<p>Wrap with a call to <code dir="ltr">DBMS_ADVISOR.CREATE_FILE</code> to put it into a file.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10269"></a>Examples</p>
<pre dir="ltr">SET LINESIZE 140
 
-- Get a script for all actions recommended by the task.
SELECT DBMS_SQLTUNE.SCRIPT_TUNING_TASK(:stmt_task) FROM DUAL;
 
-- Get a script of just the sql profiles we should create.
SELECT DBMS_SQLTUNE.SCRIPT_TUNING_TASK(:stmt_task, &#39;PROFILES&#39;) FROM DUAL;
 
-- get a script of just stale / missing stats
SELECT DBMS_SQLTUNE.SCRIPT_TUNING_TASK(:stmt_task, &#39;STATISTICS&#39;) FROM DUAL;
 
-- Get a script with recommendations about just one SQL statement when we have
-- tuned an entire STS.
SELECT DBMS_SQLTUNE.SCRIPT_TUNING_TASK(:sts_task, &#39;ALL&#39;, 5) FROM DUAL;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68454" class="refsect2"><a id="i1010615"></a>
<h3 class="refsect2"><a id="sthref10270"></a>SELECT_CURSOR_CACHE Function</h3>
<p>This function collects SQL statements from the shared SQL area.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10271"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.SELECT_CURSOR_CACHE (
  basic_filter        IN   VARCHAR2 := NULL,
  object_filter       IN   VARCHAR2 := NULL,
  ranking_measure1    IN   VARCHAR2 := NULL,
  ranking_measure2    IN   VARCHAR2 := NULL,
  ranking_measure3    IN   VARCHAR2 := NULL,
  result_percentage   IN   NUMBER   := 1,
  result_limit        IN   NUMBER   := NULL,
  attribute_list      IN   VARCHAR2 := NULL,
  recursive_sql       IN   VARCHAR2 := HAS_RECURSIVE_SQL)
 RETURN sys.sqlset PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10272"></a>Parameters</p>
<div id="ARPLS68455" class="tblformal">
<p class="titleintable"><a id="sthref10273"></a><a id="sthref10274"></a>Table 154-41 SELECT_CURSOR_CACHE Function Parameters</p>
<table class="cellalignment4330" title="SELECT_CURSOR_CACHE Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.SELECT_CURSOR_CACHE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t81">Parameter</th>
<th class="cellalignment4328" id="r1c2-t81">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t81" headers="r1c1-t81">
<p><code dir="ltr">basic_filter</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t81 r1c2-t81">
<p>The SQL predicate to filter the SQL from the shared SQL area defined on attributes of the <code dir="ltr">SQLSET_ROW</code>. If <code dir="ltr">basic_filter</code> is not set by the caller, the subprogram captures only statements of the type <code dir="ltr">CREATE TABLE</code>, <code dir="ltr">INSERT</code>, <code dir="ltr">SELECT</code>, <code dir="ltr">UPDATE</code>, <code dir="ltr">DELETE</code>, and <code dir="ltr">MERGE</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t81" headers="r1c1-t81">
<p><code dir="ltr">object_filter</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t81 r1c2-t81">
<p>Currently not supported.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t81" headers="r1c1-t81">
<p><code dir="ltr">ranking_measure(n)</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t81 r1c2-t81">
<p>An order-by clause on the selected SQL.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t81" headers="r1c1-t81">
<p><code dir="ltr">result_percentage</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t81 r1c2-t81">
<p>A filter which picks the top N% according to the ranking measure given. Note that this applies only if one ranking measure is given.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t81" headers="r1c1-t81">
<p><code dir="ltr">result_limit</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t81 r1c2-t81">
<p>The top L(imit) SQL from the (filtered) source ranked by the ranking measure</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t81" headers="r1c1-t81">
<p><code dir="ltr">attribute_list</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t81 r1c2-t81">
<p>List of SQL statement attributes to return in the result. The possible values are:</p>
<ul>
<li>
<p><code dir="ltr">TYPICAL</code> - <code dir="ltr">BASIC</code> + SQL plan (without row source statistics) and without object reference list (default)</p>
</li>
<li>
<p><code dir="ltr">BASIC</code> - all attributes (such as execution statistics and binds) are returned except the plans. The execution context is always part of the result.</p>
</li>
<li>
<p><code dir="ltr">ALL</code> - return all attributes</p>
</li>
<li>
<p>Comma separated list of attribute names this allows to return only a subset of SQL attributes: <code dir="ltr">EXECUTION_STATISTICS</code>, <code dir="ltr">BIND_LIST</code>, <code dir="ltr">OBJECT_LIST</code>, SQL_PLAN,<code dir="ltr">SQL_PLAN_STATISTICS</code>: similar to <code dir="ltr">SQL_PLAN</code> + row source statistics</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t81" headers="r1c1-t81">
<p><code dir="ltr">recursive_sql</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t81 r1c2-t81">
<p>Filter that includes recursive SQL in the SQL tuning set (<code dir="ltr">HAS_RECURSIVE_SQL</code>) or excludes it (<code dir="ltr">NO_RECURSIVE_SQL</code>).</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10275"></a>Return Values</p>
<p>This function returns a one <code dir="ltr">SQLSET_ROW</code> per <code dir="ltr">SQL_ID</code> or <code dir="ltr">PLAN_HASH_VALUE</code> pair found in each data source.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10276"></a>Usage Notes</p>
<ul>
<li>
<p>Filters provided to this function are evaluated as part of a SQL run by the current user. As such, they are executed with that user&#39;s security privileges and can contain any constructs and subqueries that user can access, but no more.</p>
</li>
<li>
<p>Users need privileges on the shared SQL area views.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10277"></a>Examples</p>
<pre dir="ltr">-- Get sql ids and sql text for statements with 500 buffer gets.
SELECT sql_id, sql_text 
FROM table(DBMS_SQLTUNE.SELECT_CURSOR_CACHE(&#39;buffer_gets &gt; 500&#39;)) 
ORDER BY sql_id;
 
-- Get all the information we have about a particular statement.
SELECT * 
FROM table(DBMS_SQLTUNE.SELECT_CURSOR_CACHE(&#39;sql_id = &#39;&#39;4rm4183czbs7j&#39;&#39;&#39;));
 
-- Notice that some statements can have multiple plans.  The output of the
-- SELECT_XXX table functions is unique by (sql_id, plan_hash_value).  This is
-- because a data source can store multiple plans per sql statement.
SELECT sql_id, plan_hash_value
FROM table(dbms_sqltune.select_cursor_cache(&#39;sql_id = &#39;&#39;ay1m3ssvtrh24&#39;&#39;&#39;))
ORDER BY sql_id, plan_hash_value;
 
-- PL/SQL examples: load_sqlset is called after opening a cursor, along the
-- lines given below
 
-- Select all statements in the shared SQL area.
DECLARE
  cur sys_refcursor;
BEGIN
  OPEN cur FOR
    SELECT value(P) 
    FROM table(DBMS_SQLTUNE.SELECT_CURSOR_CACHE) P;
 
  -- Process each statement (or pass cursor to load_sqlset).
 
  CLOSE cur;
END;/
 
 
-- Look for statements not parsed by SYS.
DECLARE
  cur sys_refcursor;
BEGIN
  OPEN cur for
    SELECT VALUE(P) 
    FROM table(
     DBMS_SQLTUNE.SELECT_CURSOR_CACHE(&#39;parsing_schema_name &lt;&gt; &#39;&#39;SYS&#39;&#39;&#39;)) P;
 
  -- Process each statement (or pass cursor to load_sqlset).
 
  CLOSE cur;
end;/
 
 
-- All statements from a particular module/action.
DECLARE
  cur sys_refcursor;
BEGIN
  OPEN cur FOR
    SELECT VALUE(P) 
    FROM table(
      DBMS_SQLTUNE.SELECT_CURSOR_CACHE(
         &#39;module = &#39;&#39;MY_APPLICATION&#39;&#39; and action = &#39;&#39;MY_ACTION&#39;&#39;&#39;)) P;
 
  -- Process each statement (or pass cursor to load_sqlset)
 
  CLOSE cur;
END;/
 
 
-- all statements that ran for at least five seconds
DECLARE
  cur sys_refcursor;
BEGIN
  OPEN cur FOR
    SELECT VALUE(P) 
    FROM table(DBMS_SQLTUNE.SELECT_CURSOR_CACHE(&#39;elapsed_time &gt; 5000000&#39;)) P;
 
  -- Process each statement (or pass cursor to load_sqlset)
 
  CLOSE cur;
end;/
 
 
-- select all statements that pass a simple buffer_gets threshold and 
-- are coming from an APPS user
DECLARE
  cur sys_refcursor;
BEGIN
  OPEN cur FOR
    SELECT VALUE(P) 
    FROM table(
      DBMS_SQLTUNE.SELECT_CURSOR_CACHE(
        &#39;buffer_gets &gt; 100 and parsing_schema_name = &#39;&#39;APPS&#39;&#39;&#39;))P;
 
  -- Process each statement (or pass cursor to load_sqlset)
 
  CLOSE cur;
end;/
 
 
-- select all statements exceeding 5 seconds in elapsed time, but also
-- select the plans (by default we only select execution stats and binds
-- for performance reasons - in this case the SQL_PLAN attribute of sqlset_row
-- is NULL) 
DECLARE
  cur sys_refcursor;
BEGIN
  OPEN cur FOR
    SELECT VALUE(P) 
    FROM table(dbms_sqltune.select_cursor_cache(
      &#39;elapsed_time &gt; 5000000&#39;, NULL, NULL, NULL, NULL, 1, NULL,
      &#39;EXECUTION_STATISTICS, SQL_BINDS, SQL_PLAN&#39;)) P;
 
  -- Process each statement (or pass cursor to load_sqlset)
 
  CLOSE cur;
END;/
 
 
-- Select the top 100 statements in the shared SQL area ordering by elapsed_time.
DECLARE
  cur sys_refcursor;
BEGIN
  OPEN cur FOR
    SELECT VALUE(P) 
    FROM table(DBMS_SQLTUNE.SELECT_CURSOR_CACHE(NULL,
                                                NULL,
                                                &#39;ELAPSED_TIME&#39;, NULL, NULL,
                                                1,
                                                100)) P;
 
  -- Process each statement (or pass cursor to load_sqlset)
 
  CLOSE cur;
end;/
 
 
-- Select the set of statements which cumulatively account for 90% of the 
-- buffer gets in the shared SQL area.  This means that the buffer gets of all
-- of these statements added up is approximately 90% of the sum of all 
-- statements currently in the cache.
DECLARE
  cur sys_refcursor;
BEGIN
  OPEN cur FOR
    SELECT VALUE(P) 
    FROM table(DBMS_SQLTUNE.SELECT_CURSOR_CACHE(NULL,
                                                NULL,
                                                &#39;BUFFER_GETS&#39;, NULL, NULL,
                                                .9)) P;
 
  -- Process each statement (or pass cursor to load_sqlset).
 
  CLOSE cur;
END;
/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68456" class="refsect2"><a id="CACBBIEH"></a>
<h3 class="refsect2"><a id="sthref10278"></a>SELECT_SQL_TRACE Function</h3>
<p>This table function reads the content of one or more trace files and returns the SQL statements it finds in the format of <code dir="ltr">sqlset_row</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10279"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.SELECT_SQL_TRACE (
  directory              IN VARCHAR2,
  file_name              IN VARCHAR2 := NULL,
  mapping_table_name     IN VARCHAR2 := NULL,
  mapping_table_owner    IN VARCHAR2 := NULL,,
  select_mode            IN POSITIVE := SINGLE_EXECUTION,
  options                IN BINARY_INTEGER := LIMITED_COMMAND_TYPE,
  pattern_start          IN VARCHAR2 := NULL,
  pattern_end            IN VARCHAR2 := NULL,
  result_limit           IN POSITIVE := NULL)
 RETURN sys.sqlset PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10280"></a>Parameters</p>
<div id="ARPLS68457" class="tblformal">
<p class="titleintable"><a id="sthref10281"></a><a id="sthref10282"></a>Table 154-42 SELECT_SQL_TRACE Function Parameters</p>
<table class="cellalignment4330" title="SELECT_SQL_TRACE Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.SELECT_SQL_TRACE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t83">Parameter</th>
<th class="cellalignment4328" id="r1c2-t83">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t83" headers="r1c1-t83">
<p><code dir="ltr">directory</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t83 r1c2-t83">
<p>The directory object containing the trace file(s). This field is mandatory.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t83" headers="r1c1-t83">
<p><code dir="ltr">file_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t83 r1c2-t83">
<p>All or part of name of the trace file(s) to process. If <code dir="ltr">NULL</code> then the current or most recent file in the specified location or path is used. <code dir="ltr">&#39;%&#39;</code> wildcards are supported for matching trace file names.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t83" headers="r1c1-t83">
<p><code dir="ltr">mapping_table_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t83 r1c2-t83">
<p>The mapping table name. Note that the mapping table name is case insensitive. If the mapping table name is <code dir="ltr">NULL</code>, the mappings in the current database is used.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t83" headers="r1c1-t83">
<p><code dir="ltr">mapping_table_owner</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t83 r1c2-t83">
<p>the mapping table owner. If it is <code dir="ltr">NULL</code>, the current user is used.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t83" headers="r1c1-t83">
<p><code dir="ltr">select_mode</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t83 r1c2-t83">
<p>the mode for selecting SQL from the trace. By default, it is <code dir="ltr">SINGLE_EXECUTION</code>.</p>
<ul>
<li>
<p><code dir="ltr">SINGLE_EXECUTION</code> - return one execution of a SQL.(default).</p>
</li>
<li>
<p><code dir="ltr">ALL_EXECUTIONS</code> - return all executions.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t83" headers="r1c1-t83">
<p><code dir="ltr">options</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t83 r1c2-t83">
<p>The options. By default, it is <code dir="ltr">LIMITED_COMMAND_TYPE</code> which can be specified to include SQL statements from all Oracle command types.</p>
<ul>
<li>
<p><code dir="ltr">LIMITED_COMMAND_TYPE</code> - returns the SQL statements with the command types <code dir="ltr">CREATE</code>, <code dir="ltr">INSERT</code>, <code dir="ltr">SELECT</code>, <code dir="ltr">UPDATE</code>, <code dir="ltr">DELETE</code>, <code dir="ltr">UPSERT</code>. It is the default.</p>
</li>
<li>
<p><code dir="ltr">ALL_COMMAND_TYPE</code> - returns the SQL statements with all command types.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t83" headers="r1c1-t83">
<p><code dir="ltr">pattern_start</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t83 r1c2-t83">
<p>Opening delimiting pattern of the trace file section(s) to consider. CURRENTLY INOPERABLE.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t83" headers="r1c1-t83">
<p><code dir="ltr">pattern_end</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t83 r1c2-t83">
<p>closing delimiting pattern of the trace file section(s) to process. CURRENTLY INOPERABLE.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t83" headers="r1c1-t83">
<p><code dir="ltr">result_limit</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t83 r1c2-t83">
<p>Top SQL from the (filtered) source. Default to <code dir="ltr">MAXSB4</code> if <code dir="ltr">NULL</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10283"></a>Return Values</p>
<p>This function returns a <code dir="ltr">SQLSET_ROW</code> object.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10284"></a>Examples</p>
<p>The following code shows how to enable SQL trace for a few SQL statements and load the results into a SQL tuning set:</p>
<pre dir="ltr">-- turn on the SQL trace in the capture database
ALTER SESSION SET EVENTS &#39;10046 TRACE NAME CONTEXT FOREVER, LEVEL 4&#39;

-- run sql statements
SELECT 1 FROM DUAL;
SELECT COUNT(*) FROM dba_tables WHERE table_name = :mytab;
 
ALTER SESSION SET EVENTS &#39;10046 TRACE NAME CONTEXT OFF&#39;;
 
-- create mapping table from the capture database
CREATE TABLE mapping AS
SELECT object_id id, owner, substr(object_name, 1, 30) name
   FROM dba_objects
   WHERE object_type NOT IN (&#39;CONSUMER GROUP&#39;, &#39;EVALUATION CONTEXT&#39;,
                             &#39;FUNCTION&#39;, &#39;INDEXTYPE&#39;, &#39;JAVA CLASS&#39;,
                             &#39;JAVA DATA&#39;, &#39;JAVA RESOURCE&#39;, &#39;LIBRARY&#39;,
                             &#39;LOB&#39;, &#39;OPERATOR&#39;, &#39;PACKAGE&#39;,
                             &#39;PACKAGE BODY&#39;, &#39;PROCEDURE&#39;, &#39;QUEUE&#39;,
                             &#39;RESOURCE PLAN&#39;, &#39;TRIGGER&#39;, &#39;TYPE&#39;,
                             &#39;TYPE BODY&#39;)
UNION ALL
SELECT user_id id, username owner, NULL name
   FROM dba_users;
 
-- create the directory object where the SQL traces are stored
CREATE DIRECTORY SQL_TRACE_DIR as &#39;/home/foo/trace&#39;;

-- create the STS
EXEC DBMS_SQLTUNE.CREATE_SQLSET(&#39;my_sts&#39;, &#39;test purpose&#39;);
 
-- load the SQL statements into STS from SQL TRACE
DECLARE
   cur sys_refcursor;
BEGIN
   OPEN cur FOR
   SELECT value(p)
     FROM TABLE(
        DBMS_SQLTUNE.SELECT_SQL_TRACE(
           directory=&gt;&#39;SQL_TRACE_DIR&#39;,
           file_name=&gt;&#39;%trc&#39;,
           mapping_table_name=&gt;&#39;mapping&#39;)) p;
   DBMS_SQLTUNE.LOAD_SQLSET(&#39;my_sts&#39;, cur);
   CLOSE cur;
END;
/ 
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73150" class="refsect2"><a id="CACEFBJH"></a>
<h3 class="refsect2"><a id="sthref10285"></a><a id="sthref10286"></a>SELECT_SQLPA_TASK Function</h3>
<p>This function collects SQL statements from a SQL Performance Analyzer comparison task.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</p>
</li>
<li>
<p><a class="olink RATUG" href="../RATUG/toc.htm"><span class="italic">Oracle Database Testing Guide</span></a></p>
</li>
</ul>
</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10287"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.SELECT_SQLPA_TASK(
    task_name         IN VARCHAR2,
    task_owner        IN VARCHAR2 := NULL,
    execution_name    IN VARCHAR2 := NULL,
    level_filter      IN VARCHAR2 := &#39;REGRESSED&#39;,
    basic_filter      IN VARCHAR2 := NULL,
    object_filter     IN VARCHAR2 := NULL,
    attribute_list    IN VARCHAR2 := &#39;TYPICAL&#39;)
  RETURN sys.sqlset PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10288"></a>Parameters</p>
<div id="ARPLS73151" class="tblformal">
<p class="titleintable"><a id="sthref10289"></a><a id="sthref10290"></a>Table 154-43 SELECT_SQLPA_TASK Function Parameters</p>
<table class="cellalignment4330" title="SELECT_SQLPA_TASK Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.SELECT_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t85">Parameter</th>
<th class="cellalignment4328" id="r1c2-t85">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t85" headers="r1c1-t85">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t85 r1c2-t85">
<p>Name of the SQL Performance Analyzer task</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t85" headers="r1c1-t85">
<p><code dir="ltr">task_owner</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t85 r1c2-t85">
<p>Owner of the SQL Performance Analyzer task. If <code dir="ltr">NULL</code>, then assume the current user.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t85" headers="r1c1-t85">
<p><code dir="ltr">execution_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t85 r1c2-t85">
<p>Name of the SQL Performance Analyzer task execution (type <code dir="ltr">COMPARE PERFORMANCE</code>) from which the provided filters will be applied. If <code dir="ltr">NULL</code>, then assume the most recent <code dir="ltr">COMPARE PERFORMANCE</code> execution.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t85" headers="r1c1-t85">
<p><code dir="ltr">level_filter</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t85 r1c2-t85">
<p>Filter to specify which subset of SQL statements to include. Same format as <code dir="ltr">DBMS_SQLPA</code>. <code dir="ltr">REPORT_ANALYSIS_TASK</code><code dir="ltr">.LEVEL</code>, with some possible strings removed.</p>
<ul>
<li>
<p><code dir="ltr">IMPROVED</code> includes only improved SQL.</p>
</li>
<li>
<p><code dir="ltr">REGRESSED</code> includes only regressed SQL (default).</p>
</li>
<li>
<p><code dir="ltr">CHANGED</code> includes only SQL with changed performance.</p>
</li>
<li>
<p><code dir="ltr">UNCHANGED</code> includes only SQL with unchanged performance.</p>
</li>
<li>
<p><code dir="ltr">CHANGED_PLANS</code> includes only SQL with plan changes.</p>
</li>
<li>
<p><code dir="ltr">UNCHANGED_PLANS</code> includes only SQL with unchanged plans.</p>
</li>
<li>
<p><code dir="ltr">ERRORS</code> includes only SQL with errors only.</p>
</li>
<li>
<p><code dir="ltr">MISSING_SQL</code> includes only missing SQL statements (across STS).</p>
</li>
<li>
<p><code dir="ltr">NEW_SQL</code> includes only new SQL statements (across STS).</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t85" headers="r1c1-t85">
<p><code dir="ltr">basic filter</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t85 r1c2-t85">
<p>SQL predicate to filter the SQL in addition to the level filters.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t85" headers="r1c1-t85">
<p><code dir="ltr">object_filter</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t85 r1c2-t85">
<p>Currently not supported.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t85" headers="r1c1-t85">
<p><code dir="ltr">attribute_list</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t85 r1c2-t85">
<p>List of SQL statement attributes to return in the result. The possible values are:</p>
<ul>
<li>
<p><code dir="ltr">TYPICAL</code> - <code dir="ltr">BASIC</code> + SQL plan (without row source statistics) and without object reference list (default)</p>
</li>
<li>
<p><code dir="ltr">BASIC</code> - all attributes (such as execution statistics and binds) are returned except the plans. The execution context is always part of the result.</p>
</li>
<li>
<p><code dir="ltr">ALL</code> - return all attributes</p>
</li>
<li>
<p>Comma-separated list of attribute names this allows to return only a subset of SQL attributes: <code dir="ltr">EXECUTION_STATISTICS</code>, <code dir="ltr">SQL_BINDS</code>, <code dir="ltr">SQL_PLAN_STATISTICS</code> (similar to <code dir="ltr">SQL_PLAN</code> + row source statistics).</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10291"></a>Return Values</p>
<p>This function returns a SQL tuning set object.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10292"></a>Usage Notes</p>
<p>For example, you can use this function to create a SQL tuning set containing the subset of SQL statements that regressed during a SQL Performance Analyzer (SPA) experiment. You can also specify other arbitrary filters.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68458" class="refsect2"><a id="CHEHBBDF"></a>
<h3 class="refsect2"><a id="sthref10293"></a><a id="sthref10294"></a>SELECT_SQLSET Function</h3>
<p>This function reads SQLSET contents.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10295"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.SELECT_SQLSET (
  sqlset_name         IN   VARCHAR2,
  basic_filter        IN   VARCHAR2 := NULL,
  object_filter       IN   VARCHAR2 := NULL,
  ranking_measure1    IN   VARCHAR2 := NULL,
  ranking_measure2    IN   VARCHAR2 := NULL,
  ranking_measure3    IN   VARCHAR2 := NULL,
  result_percentage   IN   NUMBER   := 1,
  result_limit        IN   NUMBER   := NULL)
  attribute_list      IN   VARCHAR2 := NULL,
  plan_filter         IN   VARCHAR2 := NULL,
  sqlset_owner        IN   VARCHAR2 := NULL,
  recursive_sql       IN   VARCHAR2 := HAS_RECURSIVE_SQL)
 RETURN sys.sqlset PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10296"></a>Parameters</p>
<div id="ARPLS68459" class="tblformal">
<p class="titleintable"><a id="sthref10297"></a><a id="sthref10298"></a>Table 154-44 SELECT_SQLSET Function Parameters</p>
<table class="cellalignment4330" title="SELECT_SQLSET Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.SELECT_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t87">Parameter</th>
<th class="cellalignment4328" id="r1c2-t87">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t87" headers="r1c1-t87">
<p><code dir="ltr">sqlset_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t87 r1c2-t87">
<p>The SQL tuning set name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t87" headers="r1c1-t87">
<p><code dir="ltr">basic_filter</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t87 r1c2-t87">
<p>The SQL predicate to filter the SQL from the SQL tuning set defined on attributes of the <code dir="ltr">SQLSET_ROW</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t87" headers="r1c1-t87">
<p><code dir="ltr">object_filter</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t87 r1c2-t87">
<p>Currently not supported.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t87" headers="r1c1-t87">
<p><code dir="ltr">ranking_measure(n)</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t87 r1c2-t87">
<p>An order-by clause on the selected SQL</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t87" headers="r1c1-t87">
<p><code dir="ltr">result_percentage</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t87 r1c2-t87">
<p>A filter which picks the top N% according to the ranking measure given. Note that this applies only if one ranking measure is given.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t87" headers="r1c1-t87">
<p><code dir="ltr">result_limit</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t87 r1c2-t87">
<p>The top L(imit) SQL from the (filtered) source ranked by the ranking measure</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t87" headers="r1c1-t87">
<p><code dir="ltr">attribute_list</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t87 r1c2-t87">
<p>List of SQL statement attributes to return in the result. The possible values are:</p>
<ul>
<li>
<p><code dir="ltr">TYPICAL</code> - <code dir="ltr">BASIC</code> + SQL plan (without row source statistics) and without object reference list (default)</p>
</li>
<li>
<p><code dir="ltr">BASIC</code> - all attributes (such as execution statistics and binds) are returned except the plans. The execution context is always part of the result.</p>
</li>
<li>
<p><code dir="ltr">ALL</code> - return all attributes</p>
</li>
<li>
<p>Comma-separated list of attribute names this allows to return only a subset of SQL attributes: <code dir="ltr">EXECUTION_STATISTICS</code>, <code dir="ltr">SQL_BINDS</code>, <code dir="ltr">SQL_PLAN_STATISTICS</code> (similar to <code dir="ltr">SQL_PLAN</code> + row source statistics).</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t87" headers="r1c1-t87">
<p><code dir="ltr">plan_filter</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t87 r1c2-t87">
<p>The plan filter</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t87" headers="r1c1-t87">
<p><code dir="ltr">sqlset_owner</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t87 r1c2-t87">
<p>The owner of the SQL tuning set, or <code dir="ltr">NULL</code> for the current schema owner</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t87" headers="r1c1-t87">
<p><code dir="ltr">recursive_sql</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t87 r1c2-t87">
<p>Filter that includes recursive SQL in the SQL tuning set (<code dir="ltr">HAS_RECURSIVE_SQL</code>) or excludes it (<code dir="ltr">NO_RECURSIVE_SQL</code>).</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10299"></a>Return Values</p>
<p>This function returns a one <code dir="ltr">SQLSET_ROW</code> per <code dir="ltr">SQL_ID</code> or <code dir="ltr">PLAN_HASH_VALUE</code> pair found in each data source.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10300"></a>Usage Notes</p>
<p>Filters provided to this function are evaluated as part of a SQL run by the current user. As such, they are executed with that user&#39;s security privileges and can contain any constructs and subqueries that user can access, but no more.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10301"></a>Examples</p>
<pre dir="ltr">-- select from a sql tuning set
DECLARE
  cur sys_refcursor;
BEGIN
  OPEN cur FOR
    SELECT VALUE (P) 
    FROM table(dbms_sqltune.select_sqlset(&#39;my_workload&#39;)) P;
 
  -- Process each statement (or pass cursor to load_sqlset)
 
  CLOSE cur;
END;
/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68460" class="refsect2"><a id="i1009198"></a>
<h3 class="refsect2"><a id="sthref10302"></a>SELECT_WORKLOAD_REPOSITORY Function</h3>
<p>This function collects SQL statements from the workload repository. The overloaded forms let you:</p>
<ul>
<li>
<p>Collect SQL statements from all snapshots between <code dir="ltr">begin_snap</code> and <code dir="ltr">end_snap</code>.</p>
</li>
<li>
<p>Collect SQL statements from a workload repository baseline.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10303"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.SELECT_WORKLOAD_REPOSITORY (
  begin_snap        IN NUMBER,
  end_snap          IN NUMBER,
  basic_filter      IN VARCHAR2 := NULL,
  object_filter     IN VARCHAR2 := NULL,
  ranking_measure1  IN VARCHAR2 := NULL,
  ranking_measure2  IN VARCHAR2 := NULL,
  ranking_measure3  IN VARCHAR2 := NULL,
  result_percentage IN NUMBER   := 1,
  result_limit      IN NUMBER   := NULL,
  attribute_list    IN VARCHAR2 := NULL,
  recursive_sql     IN VARCHAR2 := HAS_RECURSIVE_SQL)
 RETURN sys.sqlset PIPELINED;

DBMS_SQLTUNE.SELECT_WORKLOAD REPOSITORY (
  baseline_name     IN VARCHAR2,
  basic_filter      IN VARCHAR2 := NULL,
  object_filter     IN VARCHAR2 := NULL,
  ranking_measure1  IN VARCHAR2 := NULL,
  ranking_measure2  IN VARCHAR2 := NULL,
  ranking_measure3  IN VARCHAR2 := NULL,
  result_percentage IN NUMBER   := 1,
  result_limit      IN NUMBER   := NULL,
  attribute_list    IN VARCHAR2 := NULL,
  recursive_sql     IN VARCHAR2 := HAS_RECURSIVE_SQL)
 RETURN sys.sqlset PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10304"></a>Parameters</p>
<div id="ARPLS68461" class="tblformal">
<p class="titleintable"><a id="sthref10305"></a><a id="sthref10306"></a>Table 154-45 SELECT_WORKLOAD_REPOSITORY Function Parameters</p>
<table class="cellalignment4330" title="SELECT_WORKLOAD_REPOSITORY Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.SELECT_WORKLOAD_REPOSITORY subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t89">Parameter</th>
<th class="cellalignment4328" id="r1c2-t89">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t89" headers="r1c1-t89">
<p><code dir="ltr">begin_snap</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t89 r1c2-t89">
<p>Begin snapshot (non-inclusive).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t89" headers="r1c1-t89">
<p><code dir="ltr">end_snap</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t89 r1c2-t89">
<p>End snapshot (inclusive).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t89" headers="r1c1-t89">
<p><code dir="ltr">baseline_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t89 r1c2-t89">
<p>The name of the baseline period.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t89" headers="r1c1-t89">
<p><code dir="ltr">basic_filter</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t89 r1c2-t89">
<p>The SQL predicate to filter the SQL from the workload repository defined on attributes of the <code dir="ltr">SQLSET_ROW</code>. If <code dir="ltr">basic_filter</code> is not set by the caller, the subprogram captures only statements of the type <code dir="ltr">CREATE TABLE</code>, <code dir="ltr">INSERT</code>, <code dir="ltr">SELECT</code>, <code dir="ltr">UPDATE</code>, <code dir="ltr">DELETE</code>, and <code dir="ltr">MERGE</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t89" headers="r1c1-t89">
<p><code dir="ltr">object_filter</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t89 r1c2-t89">
<p>Currently not supported.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t89" headers="r1c1-t89">
<p><code dir="ltr">ranking_measure(n)</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t89 r1c2-t89">
<p>An order-by clause on the selected SQL.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t89" headers="r1c1-t89">
<p><code dir="ltr">result_percentage</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t89 r1c2-t89">
<p>A filter which picks the top N% according to the ranking measure given. Note that this applies only if one ranking measure is given.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t89" headers="r1c1-t89">
<p><code dir="ltr">result_limit</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t89 r1c2-t89">
<p>The top L(imit) SQL from the (filtered) source ranked by the ranking measure.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t89" headers="r1c1-t89">
<p><code dir="ltr">attribute_list</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t89 r1c2-t89">
<p>List of SQL statement attributes to return in the result. The possible values are:</p>
<ul>
<li>
<p><code dir="ltr">TYPICAL</code> - <code dir="ltr">BASIC</code> + SQL plan (without row source statistics) and without object reference list (default)</p>
</li>
<li>
<p><code dir="ltr">BASIC</code> - all attributes (such as execution statistics and binds) are returned except the plans. The execution context is always part of the result.</p>
</li>
<li>
<p><code dir="ltr">ALL</code> - return all attributes</p>
</li>
<li>
<p>Comma-separated list of attribute names this allows to return only a subset of SQL attributes: <code dir="ltr">EXECUTION_STATISTICS</code>, <code dir="ltr">SQL_BINDS</code>, <code dir="ltr">SQL_PLAN_STATISTICS</code> (similar to <code dir="ltr">SQL_PLAN</code> + row source statistics).</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t89" headers="r1c1-t89">
<p><code dir="ltr">recursive_sql</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t89 r1c2-t89">
<p>Filter that includes recursive SQL in the SQL tuning set (<code dir="ltr">HAS_RECURSIVE_SQL</code>) or excludes it (<code dir="ltr">NO_RECURSIVE_SQL</code>).</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10307"></a>Return Values</p>
<p>This function returns a one <code dir="ltr">SQLSET_ROW</code> per <code dir="ltr">SQL_ID</code> or <code dir="ltr">PLAN_HASH_VALUE</code> pair found in each data source.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10308"></a>Usage Notes</p>
<p>Filters provided to this function are evaluated as part of a SQL run by the current user. As such, they are executed with that user&#39;s security privileges and can contain any constructs and subqueries that user can access, but no more.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10309"></a>Examples</p>
<pre dir="ltr">-- select statements from snapshots 1-2
DECLARE
  cur sys_refcursor;
BEGIN
  OPEN cur FOR
    SELECT VALUE (P) 
    FROM table(dbms_sqltune.select_workload_repository(1,2)) P;
 
  -- Process each statement (or pass cursor to load_sqlset)
 
  CLOSE cur;
END;
/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68462" class="refsect2"><a id="CHDGAJDB"></a>
<h3 class="refsect2"><a id="sthref10310"></a>SET_TUNING_TASK_PARAMETER Procedures</h3>
<p>This procedure updates the value of a SQL tuning parameter of type <code dir="ltr">VARCHAR2</code> or <code dir="ltr">NUMBER</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10311"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.SET_TUNING_TASK_PARAMETER (
   task_name    IN  VARCHAR2,
   parameter    IN  VARCHAR2,
   value        IN  VARCHAR2);
</pre>
<pre dir="ltr">DBMS_SQLTUNE.SET_TUNING_TASK_PARAMETER (
   task_name    IN  VARCHAR2,
   parameter    IN  VARCHAR2,
   value        IN  NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10312"></a>Parameters</p>
<div id="ARPLS68463" class="tblformal">
<p class="titleintable"><a id="sthref10313"></a><a id="sthref10314"></a>Table 154-46 SET_TUNING_TASK_PARAMETER Procedure Parameters</p>
<table class="cellalignment4330" title="SET_TUNING_TASK_PARAMETER Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.SET_TUNING_TASK_PARAMETER subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t91">Parameter</th>
<th class="cellalignment4328" id="r1c2-t91">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t91" headers="r1c1-t91">
<p><code dir="ltr">task_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t91 r1c2-t91">
<p>Identifier of the task to execute</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t91" headers="r1c1-t91">
<p><code dir="ltr">parameter</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t91 r1c2-t91">
<p>Name of the parameter to set. The possible tuning parameters that can be set by this procedure using the parameter in the form <code dir="ltr">VARCHAR2</code>:</p>
<ul>
<li>
<p><code dir="ltr">APPLY_CAPTURED_COMPILENV</code>: indicates whether the advisor could use the compilation environment captured with the SQL statements. The default is <code dir="ltr">0</code> (that is, <code dir="ltr">NO</code>).</p>
</li>
<li>
<p><code dir="ltr">BASIC_FILTER</code>: basic filter for SQL tuning set</p>
</li>
<li>
<p><code dir="ltr">DAYS_TO_EXPIRE</code>: number of days until the task is deleted</p>
</li>
<li>
<p><code dir="ltr">DEFAULT_EXECUTION_TYPE</code>: the task defaults to this type of execution when none is specified by the <a href="#CHDGEJJA">EXECUTE_TUNING_TASK Function and Procedure</a></p>
</li>
<li>
<p><code dir="ltr">EXECUTION_DAYS_TO_EXPIRE</code>: number of days until the tasks&#39;s executions is deleted (without deleting the task)</p>
</li>
<li>
<p><code dir="ltr">LOCAL_TIME_LIMIT</code>: per-statement time out (seconds)</p>
</li>
<li>
<p><code dir="ltr">MODE</code>: tuning scope (comprehensive, limited)</p>
</li>
<li>
<p><code dir="ltr">OBJECT_FILTER</code>: object filter for SQL tuning set</p>
</li>
<li>
<p><code dir="ltr">PLAN_FILTER</code>: plan filter for SQL tuning set (see <code dir="ltr">SELECT_SQLSET</code> for possible values)</p>
</li>
<li>
<p><code dir="ltr">RANK_MEASURE1</code>: first ranking measure for SQL tuning set</p>
</li>
<li>
<p><code dir="ltr">RANK_MEASURE2</code>: second possible ranking measure for SQL tuning set</p>
</li>
<li>
<p><code dir="ltr">RANK_MEASURE3</code>: third possible ranking measure for SQL tuning set</p>
</li>
<li>
<p><code dir="ltr">RESUME_FILTER</code>: a extra filter for SQL tuning sets besides <code dir="ltr">BASIC_FILTER</code></p>
</li>
<li>
<p><code dir="ltr">SQL_LIMIT</code>: maximum number of SQL statements to tune</p>
</li>
<li>
<p><code dir="ltr">SQL_PERCENTAGE</code>: percentage filter of SQL tuning set statements</p>
</li>
<li>
<p><code dir="ltr">TEST_EXECUTE</code>: <code dir="ltr">FULL</code>/<code dir="ltr">AUTO</code>/<code dir="ltr">OFF</code>.</p>
<p>* <code dir="ltr">FULL</code> - test-execute for as much time as necessary, up to the local time limit for the SQL (or the global task time limit if no SQL time limit is set)</p>
<p>* <code dir="ltr">AUTO</code> - test-execute for an automatically-chosen time proportional to the tuning time</p>
<p>* <code dir="ltr">OFF</code> - do not test-execute</p>
</li>
<li>
<p><code dir="ltr">TIME_LIMIT</code>: global time out (seconds)</p>
</li>
<li>
<p><code dir="ltr">USERNAME</code>: username under which the statement is parsed</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t91" headers="r1c1-t91">
<p><code dir="ltr">value</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t91 r1c2-t91">
<p>New value of the specified parameter</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10315"></a>Usage Notes</p>
<p>When setting automatic tuning task parameters, use the <a href="d_autosta.htm#BGBCGEJA">SET_AUTO_TUNING_TASK_PARAMETER Procedures</a> in the <a href="d_autosta.htm#CIAICGCF">DBMS_AUTO_SQLTUNE</a> package.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68464" class="refsect2"><a id="CACHJDEG"></a>
<h3 class="refsect2"><a id="sthref10316"></a>SQLTEXT_TO_SIGNATURE Function</h3>
<p>This function returns a SQL text&#39;s signature. The signature can be used to identify SQL text in <code dir="ltr">dba_sql_profiles</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDCJJGF">SQL Profile Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10317"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.SQLTEXT_TO_SIGNATURE (
  sql_text    IN CLOB,  force_match IN BOOLEAN  := FALSE)
 RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10318"></a>Parameters</p>
<div id="ARPLS68465" class="tblformal">
<p class="titleintable"><a id="sthref10319"></a><a id="sthref10320"></a>Table 154-47 SQLTEXT_TO_SIGNATURE Function Parameters</p>
<table class="cellalignment4330" title="SQLTEXT_TO_SIGNATURE Function Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.SELECT_WORKLOAD_REPOSITORY subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t93">Parameter</th>
<th class="cellalignment4328" id="r1c2-t93">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t93" headers="r1c1-t93">
<p><code dir="ltr">sql_text</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t93 r1c2-t93">
<p>SQL text whose signature is required. Required.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t93" headers="r1c1-t93">
<p><code dir="ltr">force_match</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t93 r1c2-t93">
<p>If <code dir="ltr">TRUE</code>, this returns a signature that supports SQL matching with literal values transformed into bind variables. If <code dir="ltr">FALSE</code>, returns the signature based on the text with literals not transformed</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10321"></a>Return Values</p>
<p>This function returns the signature of the specified SQL text.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68466" class="refsect2"><a id="CACDIJJE"></a>
<h3 class="refsect2"><a id="sthref10322"></a>UNPACK_STGTAB_SQLPROF Procedure</h3>
<p>This procedure copies profile data stored in the staging table to create profiles on the system.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDCJJGF">SQL Profile Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10323"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.UNPACK_STGTAB_SQLPROF (
   profile_name          IN VARCHAR2 := &#39;%&#39;,
   profile_category      IN VARCHAR2 := &#39;DEFAULT&#39;,
   replace               IN BOOLEAN,
   staging_table_name    IN VARCHAR2,
   staging_schema_owner  IN VARCHAR2 := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10324"></a>Parameters</p>
<div id="ARPLS68467" class="tblformal">
<p class="titleintable"><a id="sthref10325"></a><a id="sthref10326"></a>Table 154-48 UNPACK_STGTAB_SQLPROF Procedure Parameters</p>
<table class="cellalignment4330" title="UNPACK_STGTAB_SQLPROF Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.CREATE_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t95">Parameter</th>
<th class="cellalignment4328" id="r1c2-t95">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t95" headers="r1c1-t95">
<p><code dir="ltr">profile_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t95 r1c2-t95">
<p>The name of the profile to unpack (% wildcards acceptable, case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t95" headers="r1c1-t95">
<p><code dir="ltr">profile_category</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t95 r1c2-t95">
<p>The category from which to unpack profiles (% wildcards acceptable, case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t95" headers="r1c1-t95">
<p><code dir="ltr">replace</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t95 r1c2-t95">
<p>The option to replace profiles if they already exist. Note that profiles cannot be replaced if one in the staging table has the same name as an active profile in a different SQL statement.If <code dir="ltr">FALSE</code>, this function raises errors if you try to create a profile that already exists</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t95" headers="r1c1-t95">
<p><code dir="ltr">staging_table_name</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t95 r1c2-t95">
<p>The name of the table on which to perform the remap operation (case-insensitive unless double quoted). Required.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t95" headers="r1c1-t95">
<p><code dir="ltr">staging_schema_owner</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t95 r1c2-t95">
<p>The schema where the table resides, or <code dir="ltr">NULL</code> for current schema (case-insensitive unless double quoted)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10327"></a>Usage Notes</p>
<p>Using this procedure requires the <code dir="ltr">CREATE</code> <code dir="ltr">ANY</code> <code dir="ltr">SQL</code> <code dir="ltr">PROFILE</code> privilege and the <code dir="ltr">SELECT</code> privilege on staging table.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10328"></a>Examples</p>
<pre dir="ltr">-- Unpack all profiles stored in a staging table
EXEC DBMS_SQLTUNE.UNPACK_STGTAB_SQLPROF(replace            =&gt; FALSE, -
                                        staging_table_name =&gt; &#39;PROFILE_STGTAB&#39;);
 
-- If there is a failure during the unpack operation, users can find the profile
-- we failed on and perform a remap_stgtab_sqlprof operation targeting it.  Then
-- they can resume the unpack operation by setting replace to TRUE so that
-- the profiles that were already created are replaced
EXEC DBMS_SQLTUNE.UNPACK_STGTAB_SQLPROF(replace            =&gt; TRUE, -
                                        staging_table_name =&gt; &#39;PROFILE_STGTAB&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68468" class="refsect2"><a id="CACJDGFI"></a>
<h3 class="refsect2"><a id="sthref10329"></a>UNPACK_STGTAB_SQLSET Procedure</h3>
<p>This procedure copies one or more SQL tuning sets from their location in the staging table into the SQL tuning sets schema, making them proper SQL tuning sets.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10330"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.UNPACK_STGTAB_SQLSET (
   sqlset_name          IN VARCHAR2 := &#39;%&#39;,
   sqlset_owner         IN VARCHAR2 := NULL,
   replace              IN BOOLEAN,
   staging_table_name   IN VARCHAR2,
   staging_schema_owner IN VARCHAR2 := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10331"></a>Parameters</p>
<div id="ARPLS68469" class="tblformal">
<p class="titleintable"><a id="sthref10332"></a><a id="sthref10333"></a>Table 154-49 UNPACK_STGTAB_SQLSET Procedure Parameters</p>
<table class="cellalignment4330" title="UNPACK_STGTAB_SQLSET Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.CREATE_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t97">Parameter</th>
<th class="cellalignment4328" id="r1c2-t97">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t97" headers="r1c1-t97">
<p><code dir="ltr">sqlset_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t97 r1c2-t97">
<p>The name of the tuning set to unpack (not NULL). Wildcard characters (&#39;%&#39;) are supported to unpack multiple tuning sets in a single call. For example, just specify &#39;%&#39; to unpack all tuning sets from the staging table.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t97" headers="r1c1-t97">
<p><code dir="ltr">sqlset_owner</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t97 r1c2-t97">
<p>The name of tuning set owner, or <code dir="ltr">NULL</code> for current schema owner. Wildcards supported.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t97" headers="r1c1-t97">
<p><code dir="ltr">replace</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t97 r1c2-t97">
<p>Replaces tuning set if they already exist.If <code dir="ltr">FALSE</code>, raises errors if you try to create a tuning set that already exists</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t97" headers="r1c1-t97">
<p><code dir="ltr">staging_table_name</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t97 r1c2-t97">
<p>The name of the staging table, moved after a call to the <a href="#CACIFBAJ">PACK_STGTAB_SQLSET Procedure</a> (case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t97" headers="r1c1-t97">
<p><code dir="ltr">staging_schema_owner</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t97 r1c2-t97">
<p>The name of staging table owner, or <code dir="ltr">NULL</code> for current schema owner (case-sensitive)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10334"></a>Usage Notes</p>
<ul>
<li>
<p>Users can drop the staging table after this procedure completes successfully.</p>
</li>
<li>
<p>The unpack procedure commits after successfully loading each SQL tuning set. If it fails with one tuning set, no part of that tuning set will have been unpacked, but those which the subprogram had already apprehended continue to exist.</p>
</li>
<li>
<p>When failures occur due to SQL tuning set name or owner conflicts, users should use the <a href="#CACIFDFG">REMAP_STGTAB_SQLSET Procedure</a> to patch the staging table, and then call this procedure again to unpack those tuning sets that remain.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10335"></a>Examples</p>
<pre dir="ltr"> -- unpack all STS in the staging table
EXEC DBMS_SQLTUNE.UNPACK_STGTAB_SQLSET(sqlset_name         =&gt; &#39;%&#39;, -
                                       sqlset_owner        =&gt; &#39;%&#39;, -
                                       replace             =&gt; FALSE, -
                                       staging_table_name  =&gt; &#39;STGTAB_SQLSET&#39;);
 
-- errors can arise during STS unpack when a STS in the staging table has the
-- same name/owner as STS on the system.  In this case, users should call
-- remap_stgtab_sqlset to patch the staging table and with which to call unpack
-- Replace set to TRUE.
EXEC DBMS_SQLTUNE.UNPACK_STGTAB_SQLSET(sqlset_name         =&gt; &#39;%&#39;, -
                                       sqlset_owner        =&gt; &#39;%&#39;, -
                                       replace             =&gt; TRUE, -
                                       staging_table_name  =&gt; &#39;STGTAB_SQLSET&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68470" class="refsect2"><a id="i1007011"></a>
<h3 class="refsect2"><a id="sthref10336"></a>UPDATE_SQLSET Procedures</h3>
<p>This procedure updates selected fields for SQL statement in a SQL tuning set.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDGHEAG">SQL Tuning Set Subprograms</a> for other subprograms in this group</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10337"></a>Syntax</p>
<pre dir="ltr">DBMS_SQLTUNE.UPDATE_SQLSET (
   sqlset_name      IN  VARCHAR2,
   sql_id           IN  VARCHAR2,
   attribute_name   IN  VARCHAR2,
   attribute_value  IN  VARCHAR2 := NULL);

DBMS_SQLTUNE.UPDATE_SQLSET (
   sqlset_name      IN  VARCHAR2,
   sql_id           IN  VARCHAR2,
   attribute_name   IN  VARCHAR2,
   attribute_value IN NUMBER := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10338"></a>Parameters</p>
<div id="ARPLS68471" class="tblformal">
<p class="titleintable"><a id="sthref10339"></a><a id="sthref10340"></a>Table 154-50 UPDATE_SQLSET Procedure Parameters</p>
<table class="cellalignment4330" title="UPDATE_SQLSET Procedure Parameters " summary="This table describes Parameters used by the DBMS_SQLTUNE.UPDATE_SQLSET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t99">Parameter</th>
<th class="cellalignment4328" id="r1c2-t99">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t99" headers="r1c1-t99">
<p><code dir="ltr">sqlset_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t99 r1c2-t99">
<p>The SQL tuning set name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t99" headers="r1c1-t99">
<p><code dir="ltr">sql_id</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t99 r1c2-t99">
<p>The identifier of the statement to update</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t99" headers="r1c1-t99">
<p><code dir="ltr">attribute_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t99 r1c2-t99">
<p>The name of the attribute to modify</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t99" headers="r1c1-t99">
<p><code dir="ltr">attribute_value</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t99 r1c2-t99">
<p>The new value of the attribute</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4320">
<tr>
<td class="cellalignment4329">
<table class="cellalignment4325">
<tr>
<td class="cellalignment4324"><a href="d_sqlpa.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4324"><a href="d_stats.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4332">
<table class="cellalignment4323">
<tr>
<td class="cellalignment4324"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4324"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4324"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4324"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4324"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4324"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>