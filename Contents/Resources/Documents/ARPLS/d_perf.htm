<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2312"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBMS_PERF"></a><title>DBMS_PERF</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1086"/>
<meta name="dcterms.created" content="2016-09-02T5:36:27Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"/>
<meta name="dcterms.identifier" content="E41829-07"/>
<meta name="dcterms.isVersionOf" content="ARPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="d_pdb.htm" title="Previous" type="text/html"/>
<link rel="Next" href="d_pipe.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41829-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">115/290</span> <!-- End Header -->
<div id="ARPLS75006" class="chapter"><a id="sthref6958"></a>
<h1 class="chapter"><span class="secnum">111</span> DBMS_PERF</h1>
<p>The DBMS_PERF package provides and interface to generate active reports for monitoring database performance</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Database PL/SQL Language Reference</span> for more information about <a class="olink LNPLS01109" href="../LNPLS/dynamic.htm#LNPLS01109">&#34;Avoiding SQL Injection in PL/SQL&#34;</a></div>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BABDFGJI">Using DBMS_PERF</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Security Model</p>
</li>
</ul>
</li>
<li>
<p><a href="#BABEGIGE">Summary of DBMS_PERF Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="BABDFGJI"></a>
<div id="ARPLS75007" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Using DBMS_PERF</h2>
<ul>
<li>
<p><a href="#BABFIIIG">Overview</a></p>
</li>
<li>
<p><a href="#BABDIHJI">Security Model</a></p>
</li>
</ul>
<div id="ARPLS75008" class="refsect2"><a id="BABFIIIG"></a>
<h3 class="refsect2">Overview</h3>
<p>The DBMS_PERF package provides an interface for generating database performance reports. All subprograms return an active report and these reports can be generated at the system level, session level or at SQL level.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS75009" class="refsect2"><a id="BABDIHJI"></a>
<h3 class="refsect2">Security Model</h3>
<p>The DBMS_PERF package requires the DBA role.</p>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" -->
<div class="refentry"><a id="BABEGIGE"></a>
<div id="ARPLS75010" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Summary of DBMS_PERF Subprograms</h2>
<div id="ARPLS75011" class="tblformal">
<p class="titleintable"><a id="sthref6959"></a><a id="sthref6960"></a>Table 111-1 DBMS_APPLICATION_INFO Package Subprograms</p>
<table class="cellalignment4330" title="DBMS_APPLICATION_INFO Package Subprograms" summary="DBMS_APPLICATION_INFO Package Subprograms" dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t3">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t3" headers="r1c1-t3">
<p><a href="#BABJDHGB">REPORT_PERFHUB Function</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t3 r1c2-t3">
<p>Generates a composite active performance report of the entire database system for a specified time period</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t3" headers="r1c1-t3">
<p><a href="#BABCGIJH">REPORT_SESSION Function</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t3 r1c2-t3">
<p>Generates a performance report for a specific database session where a session is identified by <code dir="ltr">inst_id</code>, <code dir="ltr">sid</code>, and <code dir="ltr">serial_num</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t3" headers="r1c1-t3">
<p><a href="#BABHFIBH">REPORT_SQL Function</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t3 r1c2-t3">
<p>Generates an active performance report for a particular SQL statement identified by its <code dir="ltr">sql_id</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS75012" class="refsect2"><a id="BABJDHGB"></a>
<h3 class="refsect2"><a id="sthref6961"></a>REPORT_PERFHUB Function</h3>
<p>This function generates a composite active performance report of the entire database system for a specified time period.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6962"></a>Syntax</p>
<pre dir="ltr">DBMS_PERF.REPORT_PERFHUB (
   is_realtime          IN NUMBER   DEFAULT NULL,
   outer_start_time     IN DATE     DEFAULT NULL,
   outer_end_time       IN DATE     DEFAULT NULL,
   selected_start_time  IN DATE     DEFAULT NULL,
   selected_end_time    IN DATE     DEFAULT NULL,
   inst_id              IN NUMBER   DEFAULT NULL,
   dbid                 IN NUMBER   DEFAULT NULL,
   monitor_list_detail  IN NUMBER   DEFAULT NULL,
   workload_sql_detail  IN NUMBER   DEFAULT NULL,
   addm_task_detail     IN NUMBER   DEFAULT NULL,
   report_reference     IN VARCHAR2 DEFAULT NULL,
   report_level         IN VARCHAR2 DEFAULT NULL,
   type                 IN VARCHAR2 DEFAULT &#39;ACTIVE&#39;,
   base_path            IN VARCHAR2 DEFAULT NULL);
 RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6963"></a>Parameters</p>
<div id="ARPLS75013" class="tblformal">
<p class="titleintable"><a id="sthref6964"></a><a id="sthref6965"></a>Table 111-2 <span class="bolditalic">REPORT_PERFHUB Function Parameters</span></p>
<table class="cellalignment4330" title="REPORT_PERFHUB Function Parameters" summary="This table describes the parameters of the DBMS_PERF.REPORT_PERFHUB subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t4">Parameter</th>
<th class="cellalignment4328" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t4" headers="r1c1-t4">
<p><code dir="ltr">is_realtime</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t4 r1c2-t4">
<p>If 1, then real-time. If <code dir="ltr">NULL</code> (default) or <code dir="ltr">0</code>, then historical mode.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t4" headers="r1c1-t4">
<p><code dir="ltr">outer_start_time</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t4 r1c2-t4">
<p>Start time of outer period shown in the time selector. If <code dir="ltr">NULL</code> (default):</p>
<ul>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">0</code> (historical), then 24 hours before <code dir="ltr">outer_end_time</code>.</p>
</li>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">1</code> (realtime mode), then 1 hour before <code dir="ltr">outer_end_time</code>.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t4" headers="r1c1-t4">
<p><code dir="ltr">outer_end_time</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t4 r1c2-t4">
<p>End time of outer period shown in the time selector. If <code dir="ltr">NULL</code> (default), then latest AWR snapshot.</p>
<ul>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">0</code> (historical), then the latest AWR snapshot</p>
</li>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">1</code> (realtime mode), this is the current time (and any input is ignored)</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t4" headers="r1c1-t4">
<p><code dir="ltr">selected_start_time</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t4 r1c2-t4">
<p>Start time period of selection. If <code dir="ltr">NULL</code> (default)</p>
<ul>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">0</code>, then 1 hour before <code dir="ltr">selected_end_time</code></p>
</li>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">1</code>, then 5 minutes before <code dir="ltr">selected_end_time</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t4" headers="r1c1-t4">
<p><code dir="ltr">selected_end_time</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t4 r1c2-t4">
<p>End time period of selection. If <code dir="ltr">NULL</code> (default)</p>
<ul>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">0</code>, then latest AWR snapshot</p>
</li>
<li>
<p><code dir="ltr">If is_realtime</code>=<code dir="ltr">1</code>, then current time</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t4" headers="r1c1-t4">
<p><code dir="ltr">inst_id</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t4 r1c2-t4">
<p>Instance ID to for which to retrieve data</p>
<ul>
<li>
<p>If <code dir="ltr">-1</code>, then current instance</p>
</li>
<li>
<p>If number is specified, then for that instance</p>
</li>
<li>
<p>If <code dir="ltr">NULL</code> (default), then all instances</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t4" headers="r1c1-t4">
<p><code dir="ltr">dbid</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t4 r1c2-t4">
<p><code dir="ltr">DBID</code> to query.</p>
<ul>
<li>
<p>If <code dir="ltr">NULL</code>, then current <code dir="ltr">DBID</code>.</p>
</li>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">1</code>, then <code dir="ltr">DBID</code> must be the local <code dir="ltr">DBID</code>.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t4" headers="r1c1-t4">
<p><code dir="ltr">monitor_list_detail</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t4 r1c2-t4">
<p>Top N in SQL monitor list for which to retrieve SQL monitor details.</p>
<ul>
<li>
<p>If <code dir="ltr">NULL</code> (default), then retrieves top 10</p>
</li>
<li>
<p>If <code dir="ltr">0</code>, then retrieves no monitor list details</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t4" headers="r1c1-t4">
<p><code dir="ltr">workload_sql_detail</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t4 r1c2-t4">
<p>Top N in Workload Top SQL list to retrieve monitor details,</p>
<ul>
<li>
<p>If <code dir="ltr">NULL</code> (default), then retrieves top 10</p>
</li>
<li>
<p>If <code dir="ltr">0</code>, then retrieves no monitor list details</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t4" headers="r1c1-t4">
<p><code dir="ltr">addm_task_detail</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t4 r1c2-t4">
<p>Maximum N latest ADDM tasks to retrieve</p>
<ul>
<li>
<p>If <code dir="ltr">NULL</code> (default), retrieves available data but no more than N</p>
</li>
<li>
<p>If <code dir="ltr">0</code>, then retrieves no ADDM task details</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t4" headers="r1c1-t4">
<p><code dir="ltr">report_reference</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t4 r1c2-t4">
<p>Must be <code dir="ltr">NULL</code> when used from SQL*Plus.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t4" headers="r1c1-t4">
<p><code dir="ltr">report_level</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t4 r1c2-t4">
<p><code dir="ltr">&#39;typical&#39;</code> will get all tabs in performance hub</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t4" headers="r1c1-t4">
<p><code dir="ltr">type</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t4 r1c2-t4">
<p>Report type:</p>
<ul>
<li>
<p><code dir="ltr">&#39;ACTIVE&#39;</code> (default)</p>
</li>
<li>
<p><code dir="ltr">&#39;xml&#39;</code> returns XML</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t4" headers="r1c1-t4">
<p><code dir="ltr">base_path</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t4 r1c2-t4">
<p>URL path for HTML resources since flex HTML requires access to external files. This is only valid for type=&#39;<code dir="ltr">ACTIVE&#39;</code> and is typically not used. Default value will retrieve the required files from OTN.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6966"></a>Usage Notes</p>
<ul>
<li>
<p>Once a time period is selected, the performance information is collected and presented based on performance subject areas.</p>
</li>
<li>
<p>The time period can be real-time or historical.</p>
</li>
<li>
<p>When real-time data is selected, more granular data is presented because data points are available every minute.</p>
</li>
<li>
<p>When historical data is selected, more detailed data (broken down by different metrics) is presented, but the data points are averaged out to the Automatic Workload Repository (AWR) interval (usually an hour).</p>
</li>
<li>
<p>Different tabs are available in the Performance Hub, depending on whether is_real-time is 1 for real time mode or 0 for historical mode.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS75014" class="refsect2"><a id="BABCGIJH"></a>
<h3 class="refsect2"><a id="sthref6967"></a>REPORT_SESSION Function</h3>
<p>This function produces a performance report for a specific database session where a session is identified by <code dir="ltr">inst_id</code>, <code dir="ltr">sid</code>, and<code dir="ltr">serial_num</code>. If any of those parameters are missing, then the report is for the current session.</p>
<p>The session-level performance report contains the following tabs:</p>
<ul>
<li>
<p>Summary - This tab contains key identifiers and attributes of the session along with a summary of its activity data. It also contains a list of SQLs, PLSQL blocks and Database Operations (DBOP) executed by that session that were monitored by Real-time SQL Monitoring.</p>
</li>
<li>
<p>Activity - This tab shows activity broken down by wait classes for this session. The data used for this chart is fetched from Active Session History (ASH).</p>
</li>
<li>
<p>Metrics - This tab shows charts for certain key metrics for the selected session over time and is only available in historical mode. Some of the metrics shown are CPU usage, PGA usage, IO Throughput and IO Requests.</p>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6968"></a>Syntax</p>
<pre dir="ltr">DBMS_PERF.REPORT_SESSION (
    inst_id              IN NUMBER   DEFAULT NULL,
    sid                  IN NUMBER   DEFAULT NULL,
    serial               IN NUMBER   DEFAULT NULL,
    is_realtime          IN NUMBER   DEFAULT NULL,
    outer_start_time     IN DATE     DEFAULT NULL,
    outer_end_time       IN DATE     DEFAULT NULL,
    selected_start_time  IN DATE     DEFAULT NULL,
    selected_end_time    IN DATE     DEFAULT NULL,
    dbid                 IN NUMBER   DEFAULT NULL,
    monitor_list_detail  IN NUMBER   DEFAULT NULL,
    report_reference     IN VARCHAR2 DEFAULT NULL,
    report_level         IN VARCHAR2 DEFAULT NULL,
    type                 IN VARCHAR2 DEFAULT &#39;ACTIVE&#39;,
    base_path            IN VARCHAR2 DEFAULT NULL)
  RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6969"></a>Parameters</p>
<div id="ARPLS75015" class="tblformal">
<p class="titleintable"><a id="sthref6970"></a><a id="sthref6971"></a>Table 111-3 <span class="bolditalic">REPORT_SESSION Function Parameters</span></p>
<table class="cellalignment4330" title="REPORT_SESSION Function Parameters" summary="This table describes the parameters of the DBMS_PERF.REPORT_PERFHUB subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t5">Parameter</th>
<th class="cellalignment4328" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t5" headers="r1c1-t5">
<p><code dir="ltr">inst_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t5 r1c2-t5">
<p>Instance ID to for which to retrieve data. If <code dir="ltr">NULL</code> (default), then instance of current session.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t5" headers="r1c1-t5">
<p><code dir="ltr">sid</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t5 r1c2-t5">
<p>Session ID for which to retrieve performance. If <code dir="ltr">NULL</code>, uses current session.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t5" headers="r1c1-t5">
<p><code dir="ltr">serial</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t5 r1c2-t5">
<p>Serial# of session. If <code dir="ltr">NULL</code>, then the serial# of the specified <code dir="ltr">sid</code> is used provided the session is connected.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t5" headers="r1c1-t5">
<p><code dir="ltr">is_realtime</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t5 r1c2-t5">
<p>If 1, then real-time. If <code dir="ltr">NULL</code> (default) or <code dir="ltr">0</code>, then historical mode.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t5" headers="r1c1-t5">
<p><code dir="ltr">outer_start_time</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t5 r1c2-t5">
<p>Start time of outer period shown in the time selector. If <code dir="ltr">NULL</code> (default):</p>
<ul>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">0</code> (historical), then 24 hours before <code dir="ltr">outer_end_time</code>.</p>
</li>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">1</code> (realtime mode), then 1 hour before <code dir="ltr">outer_end_time</code>.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t5" headers="r1c1-t5">
<p><code dir="ltr">outer_end_time</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t5 r1c2-t5">
<p>End time of outer period shown in the time selector. If <code dir="ltr">NULL</code> (default), then latest AWR snapshot.</p>
<ul>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">0</code> (historical), then the latest AWR snapshot</p>
</li>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">1</code> (realtime mode), this is the current time (and any input is ignored)</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t5" headers="r1c1-t5">
<p><code dir="ltr">selected_start_time</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t5 r1c2-t5">
<p>Start time period of selection. If <code dir="ltr">NULL</code> (default)</p>
<ul>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">0</code>, then 1 hour before <code dir="ltr">selected_end_time</code></p>
</li>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">1</code>, then 5 minutes before <code dir="ltr">selected_end_time</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t5" headers="r1c1-t5">
<p><code dir="ltr">selected_end_time</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t5 r1c2-t5">
<p>End time period of selection. If <code dir="ltr">NULL</code> (default)</p>
<ul>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">0</code>, then latest AWR snapshot</p>
</li>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">1</code>, then current time</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t5" headers="r1c1-t5">
<p><code dir="ltr">dbid</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t5 r1c2-t5">
<p><code dir="ltr">DBID</code> to query.</p>
<ul>
<li>
<p>If <code dir="ltr">NULL</code>, then current <code dir="ltr">DBID</code>.</p>
</li>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">1</code>, then <code dir="ltr">DBID</code> must be the local <code dir="ltr">DBID</code>.\</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t5" headers="r1c1-t5">
<p><code dir="ltr">monitor_list_detail</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t5 r1c2-t5">
<p>Top N in SQL monitor list for which to retrieve SQL monitor details.</p>
<ul>
<li>
<p>If <code dir="ltr">NULL</code> (default), then retrieves top 10</p>
</li>
<li>
<p>If <code dir="ltr">0</code>, then retrieves no monitor list details</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t5" headers="r1c1-t5">
<p><code dir="ltr">report_reference</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t5 r1c2-t5">
<p>Must be <code dir="ltr">NULL</code> when used from SQL*Plus.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t5" headers="r1c1-t5">
<p><code dir="ltr">report_level</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t5 r1c2-t5">
<p><code dir="ltr">&#39;typical&#39;</code> will get all tabs in the session hub (or session details)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t5" headers="r1c1-t5">
<p><code dir="ltr">type</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t5 r1c2-t5">
<p>Report type:</p>
<ul>
<li>
<p><code dir="ltr">&#39;ACTIVE&#39;</code> (default)</p>
</li>
<li>
<p><code dir="ltr">&#39;xml&#39;</code> returns XML</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t5" headers="r1c1-t5">
<p><code dir="ltr">base_path</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t5 r1c2-t5">
<p>URL path for HTML resources since flex HTML requires access to external files</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS75016" class="refsect2"><a id="BABHFIBH"></a>
<h3 class="refsect2">REPORT_SQL Function</h3>
<p>This function generates an active performance report for a particular SQL statement identified by its <code dir="ltr">sql_id</code>.</p>
<p>The SQL-level performance report contains the following tabs:</p>
<ul>
<li>
<p>Summary - This tab contains an overview of the SQL statement with key attributes like the SQL text, user name, sessions executing it, and related information. It also contains a Plans tab which shows statistics and activity for each distinct plan for this SQL statement found in memory and in the AWR.</p>
</li>
<li>
<p>Activity - This tab shows activity broken down by wait classes for this SQL statement. The data used for this chart is fetched from Active Session History (ASH).</p>
</li>
<li>
<p>Execution Statistics - This tab shows statistics and activity for each distinct plan for this statement along with a graphical and tabular representation of the plan.</p>
</li>
<li>
<p>Monitored SQL - All executions of this SQL statement that were monitored by Real-time SQL Monitoring are listed in this tab.</p>
</li>
<li>
<p>Plan Control - This tab shows information about SQL Profiles and SQL Plan Baselines if they exist for this SQL statement.</p>
</li>
<li>
<p>Historical Statistics - This tab is available only in Historical mode. It contains statistics, such as number of executions, number of I/Os, rows processed, and other information produced over time for different execution plans. This information is retrieved from AWR.</p>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6972"></a>Syntax</p>
<pre dir="ltr">DBMS_PERF.REPORT_SQL (
    sql_id               IN varchar2 default null,
    is_realtime          IN number   default null,
    outer_start_time     IN date     default null,
    outer_end_time       IN date     default null,
    selected_start_time  IN date     default null,
    selected_end_time    IN date     default null,
    inst_id              IN number   default null,
    dbid                 IN number   default null,
    monitor_list_detail  IN number   default null,
    report_reference     IN varchar2 default null,
    report_level         IN varchar2 default null,    type                 IN varchar2 default &#39;ACTIVE&#39;,
    base_path            IN varchar2 default null);
  RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref6973"></a>Parameters</p>
<div id="ARPLS75017" class="tblformal">
<p class="titleintable"><a id="sthref6974"></a><a id="sthref6975"></a>Table 111-4 <span class="bolditalic">REPORT_SQL Function Parameters</span></p>
<table class="cellalignment4330" title="REPORT_SQL Function Parameters" summary="This table describes the parameters of the DBMS_PERF.REPORT_PERFHUB subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t6">Parameter</th>
<th class="cellalignment4328" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t6" headers="r1c1-t6">
<p><code dir="ltr">sql_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t6 r1c2-t6">
<p><code dir="ltr">SQL_ID</code> for which to retrieve performance. If <code dir="ltr">NULL</code>, gets SQL details for the last executed SQL statement.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t6" headers="r1c1-t6">
<p><code dir="ltr">is_realtime</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t6 r1c2-t6">
<p>If 1, then real-time. If <code dir="ltr">NULL</code> (default) or <code dir="ltr">0</code>, then historical mode.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t6" headers="r1c1-t6">
<p><code dir="ltr">outer_start_time</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t6 r1c2-t6">
<p>Start time of outer period shown in the time selector. If <code dir="ltr">NULL</code> (default):</p>
<ul>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">0</code> (historical), then 24 hours before <code dir="ltr">outer_end_time</code>.</p>
</li>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">1</code> (realtime mode), then 1 hour before <code dir="ltr">outer_end_time</code>.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t6" headers="r1c1-t6">
<p><code dir="ltr">outer_end_time</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t6 r1c2-t6">
<p>End time of outer period shown in the time selector. If <code dir="ltr">NULL</code> (default), then latest AWR snapshot.</p>
<ul>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">0</code> (historical), then the latest AWR snapshot</p>
</li>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">1</code> (realtime mode), this is the current time (and any input is ignored)</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t6" headers="r1c1-t6">
<p><code dir="ltr">selected_start_time</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t6 r1c2-t6">
<p>Start time period of selection. If <code dir="ltr">NULL</code> (default)</p>
<ul>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">0</code>, then 1 hour before <code dir="ltr">selected_end_time</code></p>
</li>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">1</code>, then 5 minutes before <code dir="ltr">selected_end_time</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t6" headers="r1c1-t6">
<p><code dir="ltr">selected_end_time</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t6 r1c2-t6">
<p>End time period of selection. If <code dir="ltr">NULL</code> (default)</p>
<ul>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">0</code>, then latest AWR snapshot</p>
</li>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">1</code>, then current time</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t6" headers="r1c1-t6">
<p><code dir="ltr">inst_id</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t6 r1c2-t6">
<p>Instance ID to for which to retrieve data. If <code dir="ltr">NULL</code> (default), then instance of current session.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t6" headers="r1c1-t6">
<p><code dir="ltr">dbid</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t6 r1c2-t6">
<p><code dir="ltr">DBID</code> to query.</p>
<ul>
<li>
<p>If <code dir="ltr">NULL</code>, then current <code dir="ltr">DBID</code>.</p>
</li>
<li>
<p>If <code dir="ltr">is_realtime</code>=<code dir="ltr">1</code>, then <code dir="ltr">DBID</code> must be the local <code dir="ltr">DBID</code>.\</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t6" headers="r1c1-t6">
<p><code dir="ltr">monitor_list_detail</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t6 r1c2-t6">
<p>Top N in SQL monitor list for which to retrieve SQL monitor details.</p>
<ul>
<li>
<p>If <code dir="ltr">NULL</code> (default), then retrieves top 10</p>
</li>
<li>
<p>If <code dir="ltr">0</code>, then retrieves no monitor list details</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t6" headers="r1c1-t6">
<p><code dir="ltr">report_reference</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t6 r1c2-t6">
<p>Must be <code dir="ltr">NULL</code> when used from SQL*Plus.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t6" headers="r1c1-t6">
<p><code dir="ltr">report_level</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t6 r1c2-t6">
<p><code dir="ltr">&#39;typical&#39;</code> will get all tabs in performance hub</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t6" headers="r1c1-t6">
<p><code dir="ltr">type</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t6 r1c2-t6">
<p>Report type:</p>
<ul>
<li>
<p><code dir="ltr">&#39;ACTIVE&#39;</code> (default)</p>
</li>
<li>
<p><code dir="ltr">&#39;xml&#39;</code> returns XML</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t6" headers="r1c1-t6">
<p><code dir="ltr">base_path</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t6 r1c2-t6">
<p>URL path for HTML resources since flex HTML requires access to external files</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4320">
<tr>
<td class="cellalignment4329">
<table class="cellalignment4325">
<tr>
<td class="cellalignment4324"><a href="d_pdb.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4324"><a href="d_pipe.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4332">
<table class="cellalignment4323">
<tr>
<td class="cellalignment4324"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4324"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4324"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4324"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4324"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4324"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>