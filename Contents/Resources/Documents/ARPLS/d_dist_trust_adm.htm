<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2261"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBMS_DISTRIBUTED_TRUST_ADMIN"></a><title>DBMS_DISTRIBUTED_TRUST_ADMIN</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1086"/>
<meta name="dcterms.created" content="2016-09-02T5:36:20Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"/>
<meta name="dcterms.identifier" content="E41829-07"/>
<meta name="dcterms.isVersionOf" content="ARPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="d_dst.htm" title="Previous" type="text/html"/>
<link rel="Next" href="d_editions_utl.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41829-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">67/290</span> <!-- End Header -->
<div id="ARPLS014" class="chapter"><a id="BJEFIFBA"></a>
<h1 class="chapter"><span class="secnum">63</span> DBMS_DISTRIBUTED_TRUST_ADMIN</h1>
<p><code dir="ltr">DBMS_DISTRIBUTED_TRUST_ADMIN</code> <a id="sthref4083"></a>procedures maintain the Trusted Servers List. Use these procedures to define whether a server is trusted. If a database is not trusted, Oracle refuses current user database links from the database.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BJEDCFGB">Using DBMS_DISTRIBUTED_TRUST_ADMIN</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Security Model</p>
</li>
<li>
<p>Examples</p>
</li>
</ul>
</li>
<li>
<p><a href="#i996756">Summary of DBMS_DISTRIBUTED_TRUST_ADMIN Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="BJEDCFGB"></a>
<div id="ARPLS662" class="refsect1">
<h2 class="refsect1">Using DBMS_DISTRIBUTED_TRUST_ADMIN</h2>
<ul>
<li>
<p><a href="#i998208">Overview</a></p>
</li>
<li>
<p><a href="#i998229">Security Model</a></p>
</li>
<li>
<p><a href="#i998353">Examples</a></p>
</li>
</ul>
<div id="ARPLS66236" class="refsect2"><a id="i998208"></a>
<h3 class="refsect2">Overview</h3>
<p>Oracle uses local Trusted Servers Lists, along with enterprise domain membership lists stored in the enterprise LDAP directory service, to determine if another database is trusted. The LDAP directory service entries are managed with the Enterprise Security Manager Tool in Oracle Enterprise Manager.</p>
<p>Oracle considers another database to be &#34;trusted&#34; if it meets the following criteria:</p>
<ol>
<li>
<p>It is in the same enterprise domain in the directory service as the local database.</p>
</li>
<li>
<p>The enterprise domain is marked as trusted in the directory service.</p>
</li>
<li>
<p>It is not listed as untrusted in the local Trusted Servers List. Current user database links will only be accepted from another database if both databases involved trust each other.</p>
</li>
</ol>
<p>You can list a database server locally in the Trusted Servers List regardless of what is listed in the directory service. However, if you list a database that is not in the same domain as the local database, or if that domain is untrusted, the entry will have no effect.</p>
<p>This functionality is part of the Enterprise User Security feature of the Oracle Advanced Security Option.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS66237" class="refsect2"><a id="i998229"></a>
<h3 class="refsect2">Security Model</h3>
<p>To execute <code dir="ltr">DBMS_DISTRIBUTED_TRUST_ADMIN</code>, the <code dir="ltr">EXECUTE_CATALOG_ROLE</code> role must be granted to the DBA. To select from the view <code dir="ltr">TRUSTED_SERVERS</code>, the <code dir="ltr">SELECT_CATALOG_ROLE</code> role must be granted to the DBA.</p>
<p>It is important to know whether all servers are trusted or not trusted. Trusting a particular server with the <code dir="ltr">ALLOW_SERVER</code> procedure does not have any effect if the database already trusts all databases, or if that database is already trusted. Similarly, denying a particular server with the <code dir="ltr">DENY_SERVER</code> procedure does not have any effect if the database already does not trust any database or if that database is already untrusted.</p>
<p>The procedures <code dir="ltr">DENY_ALL</code> and <code dir="ltr">ALLOW_ALL</code> delete all entries (in other words, server names) that are explicitly allowed or denied using the <code dir="ltr">ALLOW_SERVER</code> procedure or <code dir="ltr">DENY_SERVER</code> procedure respectively.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS66238" class="refsect2"><a id="i998353"></a>
<h3 class="refsect2">Examples</h3>
<p>If you have not yet used the package <code dir="ltr">DBMS_DISTRIBUTED_TRUST_ADMIN</code> to change the trust listing, by default you trust all databases in the same enterprise domain if that domain it listed as trusted in the directory service:</p>
<pre dir="ltr">SELECT * FROM TRUSTED_SERVERS;
TRUST      NAME                                                                            
--------- ---------------------
Trusted   All                                                                             
</pre>
<p>Because all servers are currently trusted, you can execute the <a href="#i996848">DENY_SERVER Procedure</a> and specify that a particular server is not trusted:</p>
<pre dir="ltr">EXECUTE DBMS_DISTRIBUTED_TRUST_ADMIN.DENY_SERVER
                           (&#39;SALES.US.AMERICAS.ACME_AUTO.COM&#39;);
PL/SQL procedure successfully completed.

SELECT * FROM TRUSTED_SERVERS;
TRUST       NAME                                                                            
--------- -----------------------------------------------
Untrusted SALES.US.AMERICAS.ACME_AUTO.COM 
</pre>
<p>By executing the <a href="#BJEJEDHI">DENY_ALL Procedure</a>, you can choose to not trust any database server:</p>
<pre dir="ltr">EXECUTE DBMS_DISTRIBUTED_TRUST_ADMIN.DENY_ALL; 

PL/SQL procedure successfully completed.

SELECT * FROM TRUSTED_SERVERS;

TRUST       NAME                                                                            
--------- -----------------------------------------------
Untrusted All                                                                             
</pre>
<p>The <a href="#i996816">ALLOW_SERVER Procedure</a> can be used to specify that one particular database is to be trusted:</p>
<pre dir="ltr">EXECUTE DBMS_DISTRIBUTED_TRUST_ADMIN.ALLOW_SERVER 
                            (&#39;SALES.US.AMERICAS.ACME_AUTO.COM&#39;);
PL/SQL procedure successfully completed.

SELECT * FROM TRUSTED_SERVERS;
TRUST       NAME                                                                            
--------- ------------------------------------------------
Trusted   SALES.US.AMERICAS.ACME_AUTO.COM
</pre></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="i996756"></a>
<div id="ARPLS663" class="refsect1">
<h2 class="refsect1">Summary of DBMS_DISTRIBUTED_TRUST_ADMIN Subprograms</h2>
<div id="ARPLS66239" class="tblformal">
<p class="titleintable"><a id="sthref4084"></a><a id="sthref4085"></a>Table 63-1 <span class="bolditalic">DBMS_DISTRIBUTED_TRUST_ADMIN Package Subprograms</span></p>
<table class="cellalignment4330" title="DBMS_DISTRIBUTED_TRUST_ADMIN Package Subprograms" summary="This table lists the DBMS_DISTRIBUTED_TRUST_ADMIN subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t2">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t2">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t2" headers="r1c1-t2">
<p><a href="#i996808">ALLOW_ALL Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t2 r1c2-t2">
<p>Empties the list and inserts a row indicating that all servers should be trusted</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t2" headers="r1c1-t2">
<p><a href="#i996816">ALLOW_SERVER Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t2 r1c2-t2">
<p>Enables a specific server to be allowed access even though <code dir="ltr">deny</code> all is indicated in the list</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t2" headers="r1c1-t2">
<p><a href="#BJEJEDHI">DENY_ALL Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t2 r1c2-t2">
<p>Empties the list and inserts a row indicating that all servers should be untrusted</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t2" headers="r1c1-t2">
<p><a href="#i996848">DENY_SERVER Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r5c1-t2 r1c2-t2">
<p>Enables a specific server to be denied access even though allow all is indicated in the list</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS66240" class="refsect2"><a id="i996808"></a>
<h3 class="refsect2">ALLOW_ALL Procedure</h3>
<p>This procedure empties the Trusted Servers List and specifies that all servers that are members of a trusted domain in an enterprise directory service and that are in the same domain are allowed access.</p>
<p>The view <code dir="ltr">TRUSTED_SERVERS</code> will show &#34;<code dir="ltr">TRUSTED</code> <code dir="ltr">ALL</code>&#34; indicating that the database trusts all servers that are currently trusted by the enterprise directory service.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4086"></a>Syntax</p>
<pre dir="ltr">DBMS_DISTRIBUTED_TRUST_ADMIN.ALLOW_ALL;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4087"></a>Usage Notes</p>
<p><code dir="ltr">ALLOW_ALL</code> only applies to servers listed as trusted in the enterprise directory service and in the same enterprise domain.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS66241" class="refsect2"><a id="i996816"></a>
<h3 class="refsect2">ALLOW_SERVER Procedure</h3>
<p>This procedure ensures that the specified server is considered trusted (even if you have previously specified &#34;<code dir="ltr">deny</code> <code dir="ltr">all</code>&#34;).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4088"></a>Syntax</p>
<pre dir="ltr">DBMS_DISTRIBUTED_TRUST_ADMIN.ALLOW_SERVER (
   server IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4089"></a>Parameters</p>
<div id="ARPLS66242" class="tblformal">
<p class="titleintable"><a id="sthref4090"></a><a id="sthref4091"></a>Table 63-2 ALLOW_SERVER Procedure Parameters</p>
<table class="cellalignment4330" title="ALLOW_SERVER Procedure Parameters" summary="This table describes the parameters of DBMS_DISTRIBUTED_TRUST_ADMIN.ALLOW_SERVER." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t3">Parameter</th>
<th class="cellalignment4328" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t3" headers="r1c1-t3">
<p><code dir="ltr">server</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t3 r1c2-t3">
<p>Unique, fully-qualified name of the server to be trusted.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4092"></a>Usage Notes</p>
<p>If the Trusted Servers List contains the entry &#34;<code dir="ltr">deny</code> <code dir="ltr">all</code>&#34;, then this procedure adds a specification indicating that a specific database (for example, <code dir="ltr">DBx</code>) is to be trusted.</p>
<p>If the Trusted Servers List contains the entry &#34;<code dir="ltr">allow</code> <code dir="ltr">all</code>&#34;, and if there is no &#34;<code dir="ltr">deny</code> <code dir="ltr">DBx</code>&#34; entry in the list, then executing this procedure causes no change.</p>
<p>If the Trusted Servers List contains the entry &#34;<code dir="ltr">allow</code> <code dir="ltr">all</code>&#34;, and if there is a &#34;<code dir="ltr">deny</code> <code dir="ltr">DBx</code>&#34; entry in the list, then that entry is deleted.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS66243" class="refsect2"><a id="BJEJEDHI"></a>
<h3 class="refsect2">DENY_ALL Procedure</h3>
<p>This procedure empties the Trusted Servers List and specifies that all servers are denied access.</p>
<p>The view <code dir="ltr">TRUSTED_SERVERS</code> will show &#34;<code dir="ltr">UNTRUSTED</code> <code dir="ltr">ALL</code>&#34; indicating that no servers are currently trusted.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4093"></a>Syntax</p>
<pre dir="ltr">DBMS_DISTRIBUTED_TRUST_ADMIN.DENY_ALL;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS66244" class="refsect2"><a id="i996848"></a>
<h3 class="refsect2">DENY_SERVER Procedure</h3>
<p>This procedure ensures that the specified server is considered untrusted (even if you have previously specified <code dir="ltr">allow all</code>).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4094"></a>Syntax</p>
<pre dir="ltr">DBMS_DISTRIBUTED_TRUST_ADMIN.DENY_SERVER (
   server IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4095"></a>Parameters</p>
<div id="ARPLS66245" class="tblformal">
<p class="titleintable"><a id="sthref4096"></a><a id="sthref4097"></a>Table 63-3 DENY_SERVER Procedure Parameters</p>
<table class="cellalignment4330" title="DENY_SERVER Procedure Parameters" summary="This table describes the parameters of DBMS_DISTRIBUTED_TRUST_ADMIN.DENY_SERVER." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t4">Parameter</th>
<th class="cellalignment4328" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t4" headers="r1c1-t4">
<p><code dir="ltr">server</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t4 r1c2-t4">
<p>Unique, fully-qualified name of the server to be untrusted.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4098"></a>Usage Notes</p>
<p>If the Trusted Servers List contains the entry <code dir="ltr">allow</code> <code dir="ltr">all</code>, then this procedure adds an entry indicating that the specified database (for example, <code dir="ltr">DBx</code>) is not to be trusted.</p>
<p>If the Trusted Servers List contains the entry &#34;<code dir="ltr">deny</code> <code dir="ltr">all</code>&#34;, and if there is no &#34;<code dir="ltr">allow</code> <code dir="ltr">DBx</code>&#34; entry in the list, then this procedure causes no change.</p>
<p>If the Trusted Servers List contains the entry &#34;<code dir="ltr">deny</code> <code dir="ltr">all</code>&#34;, and if there is an &#34;<code dir="ltr">allow</code> <code dir="ltr">DBx</code>&#34; entry, then this procedure causes that entry to be deleted.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4320">
<tr>
<td class="cellalignment4329">
<table class="cellalignment4325">
<tr>
<td class="cellalignment4324"><a href="d_dst.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4324"><a href="d_editions_utl.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4332">
<table class="cellalignment4323">
<tr>
<td class="cellalignment4324"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4324"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4324"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4324"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4324"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4324"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>