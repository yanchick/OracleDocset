<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2222"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBMS_APP_CONT"></a><title>DBMS_APP_CONT</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1086"/>
<meta name="dcterms.created" content="2016-09-02T5:36:7Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"/>
<meta name="dcterms.identifier" content="E41829-07"/>
<meta name="dcterms.isVersionOf" content="ARPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="d_alert.htm" title="Previous" type="text/html"/>
<link rel="Next" href="d_appinf.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41829-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">25/290</span> <!-- End Header -->
<div id="ARPLS73481" class="chapter"><a id="BABIIEIB"></a>
<h1 class="chapter"><span class="secnum">21</span> DBMS_APP_CONT</h1>
<p>The <code dir="ltr">DBMS_APP_CONT</code> package provides an interface to determine if the in-flight transaction on a now unavailable session committed or not, and if the last call on that session completed or not.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Database Development Guide</span> for explanations of application continuity and Transaction Guard, and the relationship between these two features:
<ul>
<li>
<p><a class="olink ADFNS8000" href="../ADFNS/adfns_trans_idemp_guard.htm#ADFNS8000">&#34;Using Transaction Guard&#34;</a></p>
</li>
<li>
<p><a class="olink ADFNS1058" href="../ADFNS/adfns_app_continuity.htm#ADFNS1058">&#34;Ensuring Application Continuity&#34;</a></p>
</li>
</ul>
</div>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BABBJBIB">Using DBMS_APP_CONT</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Security Model</p>
</li>
</ul>
</li>
<li>
<p><a href="#BABCDBJD">Summary of DBMS_APP_CONT Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="BABBJBIB"></a>
<div id="ARPLS73453" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Using DBMS_APP_CONT</h2>
<ul>
<li>
<p><a href="#BABDHACJ">Overview</a></p>
</li>
<li>
<p><a href="#BABFIDDG">Security Model</a></p>
</li>
</ul>
<div id="ARPLS73454" class="refsect2"><a id="BABDHACJ"></a>
<h3 class="refsect2">Overview</h3>
<p class="subhead2"><a id="ARPLS74290"></a>Problem Description</p>
<p>One of the fundamental problems for recovering applications after an outage is that the commit message that is sent back to the client is not durable. If there is a break between the client and the server, the client sees an error message indicating that the communication failed. This error does not inform the application whether the submission executed any commit operations or if a procedural call, ran to completion executing all expected commits and session state changes or failed part way through or yet worse, is still running disconnected from the client.</p>
<p class="subhead2"><a id="ARPLS74292"></a>GET_LTXID_OUTCOME</p>
<p>The purpose of the <a href="#BABHFHDG">GET_LTXID_OUTCOME Procedure</a> is to determine if the in-flight transaction on a now unavailable session completed or not. It is used when the original session returned an error due to unavailability. Situations that can cause such session unavailability may occur at the session, instance, server, or network, and result from planned or unplanned outages. When such an outage occurs, the application receives a disconnection error. Such an error provides no insight as to whether the transaction committed. It also does not reveal what the application might have been expecting from that commit if it had returned.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Database Concepts</span> for explanation of <a class="olink CNCPT89220" href="../CNCPT/transact.htm#CNCPT89220">Logical Transaction ID</a></div>
</div>
<!-- class="refsect2" -->
<div id="ARPLS73490" class="refsect2"><a id="BABFIDDG"></a>
<h3 class="refsect2">Security Model</h3>
<p>Applications must have the <code dir="ltr">EXECUTE</code> privilege on the <code dir="ltr">DBMS_APP_CONT</code> package. To grant this privilege, ask your database administrator to run the following SQL statement:</p>
<pre dir="ltr">GRANT execute on DBMS_APP_CONT to <span class="italic">application user</span> ;
</pre></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" -->
<div class="refentry"><a id="BABCDBJD"></a>
<div id="ARPLS73455" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Summary of DBMS_APP_CONT Subprograms</h2>
<div id="ARPLS73488" class="tblformal">
<p class="titleintable"><a id="sthref516"></a><a id="sthref517"></a>Table 21-1 DBMS_APP_CONT Package Subprograms</p>
<table class="cellalignment4330" title="DBMS_APP_CONT Package Subprograms" summary="DBMS_APP_CONTINUITY Package Subprograms" dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t4">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t4" headers="r1c1-t4">
<p><a href="#BABHFHDG">GET_LTXID_OUTCOME Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t4 r1c2-t4">
<p>Lets customer applications and third party application servers determine the transactional status of the last session when that session becomes unavailable.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS73456" class="refsect2"><a id="BABHFHDG"></a>
<h3 class="refsect2"><a id="sthref518"></a>GET_LTXID_OUTCOME Procedure</h3>
<p>This procedure lets customer applications and third party application servers determine the transactional status of the last session when that session becomes unavailable.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref519"></a>Syntax</p>
<pre dir="ltr">DBMS_APP_CONT.GET_LTXID_OUTCOME (
 client_ltxid          IN    RAW, 
 committed             OUT   BOOLEAN, 
 user_call_completed   OUT   BOOLEAN)
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref520"></a>Parameters</p>
<div id="ARPLS73457" class="tblformal">
<p class="titleintable"><a id="sthref521"></a><a id="sthref522"></a>Table 21-2 <span class="bolditalic">GET_LTXID_OUTCOME Procedure Parameters</span></p>
<table class="cellalignment4330" title="GET_LTXID_OUTCOME Procedure Parameters" summary="This table describes the parameters of the DBMS_APP_CONT.GET_LTXID_OUTCOME subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t5">Parameter</th>
<th class="cellalignment4328" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t5" headers="r1c1-t5">
<p><code dir="ltr">client_ltxid</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t5 r1c2-t5">
<p>Client-side logical transaction ID. Obtain the <code dir="ltr">LTXID</code> from the previous failed session using the client driver provided APIs - <code dir="ltr">getLTXID</code> for JDBC, and <code dir="ltr">LogicalTransactionId</code> for <code dir="ltr">ODP</code>.<code dir="ltr">net</code>., and <code dir="ltr">OCI_ATTR_GET</code> with <code dir="ltr">LTXID</code> for OCI.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t5" headers="r1c1-t5">
<p><code dir="ltr">committed</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t5 r1c2-t5">
<p>Returns <code dir="ltr">TRUE</code> if the transaction with the named logical <code dir="ltr">LTXID</code> has <code dir="ltr">COMMITTED</code>. Returns <code dir="ltr">FALSE</code> if the logical <code dir="ltr">LTXID</code> has not <code dir="ltr">COMMITTED</code>. When returning <code dir="ltr">FALSE</code>, the procedure blocks the <code dir="ltr">LTXID</code> from further use so that there is no possibility of previous in-flight work committing this <code dir="ltr">LTXID</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t5" headers="r1c1-t5">
<p><code dir="ltr">user_call_completed</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t5 r1c2-t5">
<p>Whether all information has been returned to the client. Examples of such messages are the number of rows processed when using autocommit or commit on success, parameter and function results when calling PL/SQL, or PL/SQL with more work to do after the <code dir="ltr">COMMIT</code>. Applications that expect to use data returned from the commit in order to function correctly must look at this second parameter.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref523"></a>Exceptions</p>
<div id="ARPLS74293" class="tblformal">
<p class="titleintable"><a id="sthref524"></a><a id="sthref525"></a>Table 21-3 GET_LTXID_OUTCOME Procedure Exceptions</p>
<table class="cellalignment4330" title="GET_LTXID_OUTCOME Procedure Exceptions" summary="This table describes exceptions raised by the DBMS_APP_CONT.GET_LTXID_OUTCOME subprogram" dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t6">Exception</th>
<th class="cellalignment4328" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t6" headers="r1c1-t6">
<p><code dir="ltr">ORA-14950</code> - <code dir="ltr">SERVER_AHEAD</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t6 r1c2-t6">
<p>The server is ahead so the transaction is both an old transaction and one which has already committed. This is an error as the application is passing an older <code dir="ltr">LTXID</code> that is the not the last used for that session. The purpose of <code dir="ltr">GET_LTXID_OUTCOME</code> is to return the current transaction outcome for that session after a recoverable outage.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t6" headers="r1c1-t6">
<p><code dir="ltr">ORA-14951</code> - <code dir="ltr">CLIENT_AHEAD</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t6 r1c2-t6">
<p>The client is ahead of the server. This can happen if the server has been flashed backed, recovered using media recovery, or is a standby that has opened earlier with data loss.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t6" headers="r1c1-t6">
<p><code dir="ltr">ORA-14906</code> - <code dir="ltr">SAME_SESSION</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t6 r1c2-t6">
<p>Executing <code dir="ltr">GET_LTXID_OUTCOME</code> is not supported on the session owning the <code dir="ltr">LTXID</code> as it blocks further processing on that session after a recoverable outage.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t6" headers="r1c1-t6">
<p><code dir="ltr">ORA-14909</code> - <code dir="ltr">COMMIT_BLOCKED</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t6 r1c2-t6">
<p>Your session has been blocked from committing by another user with the same username using <code dir="ltr">GET_LTXID_OUTCOME</code>. <code dir="ltr">GET_LTXID_OUTCOME</code> should only be called on dead sessions. Please check with your application administrator.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t6" headers="r1c1-t6">
<p><code dir="ltr">ORA-14952</code> - <code dir="ltr">ERROR</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t6 r1c2-t6">
<p>The outcome cannot be determined. During processing an error happened. The error stack shows the error detail.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4320">
<tr>
<td class="cellalignment4329">
<table class="cellalignment4325">
<tr>
<td class="cellalignment4324"><a href="d_alert.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4324"><a href="d_appinf.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4332">
<table class="cellalignment4323">
<tr>
<td class="cellalignment4324"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4324"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4324"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4324"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4324"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4324"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>