<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2368"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBMS_TRACE"></a><title>DBMS_TRACE</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1086"/>
<meta name="dcterms.created" content="2016-09-02T5:36:53Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"/>
<meta name="dcterms.identifier" content="E41829-07"/>
<meta name="dcterms.isVersionOf" content="ARPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="d_tdb.htm" title="Previous" type="text/html"/>
<link rel="Next" href="d_transa.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41829-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">171/290</span> <!-- End Header -->
<div id="ARPLS060" class="chapter"><a id="BABEGCDD"></a>
<h1 class="chapter"><span class="secnum">167</span> DBMS_TRACE</h1>
<p>The <a id="sthref11879"></a><code dir="ltr">DBMS_TRACE</code> package contains the interface to trace PL/SQL functions, procedures, and exceptions.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CACEIHAH">Using DBMS_TRACE</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Security Model</p>
</li>
<li>
<p>Constants</p>
</li>
<li>
<p>Restrictions</p>
</li>
<li>
<p>Operational Notes</p>
</li>
</ul>
</li>
<li>
<p><a href="#i1001492">Summary of DBMS_TRACE Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="CACEIHAH"></a>
<div id="ARPLS68865" class="refsect1">
<h2 class="refsect1">Using DBMS_TRACE</h2>
<ul>
<li>
<p><a href="#i1002289">Overview</a></p>
</li>
<li>
<p><a href="#i1002104">Security Model</a></p>
</li>
<li>
<p><a href="#i1000920">Constants</a></p>
</li>
<li>
<p><a href="#i1002143">Restrictions</a></p>
</li>
<li>
<p><a href="#i1002144">Operational Notes</a></p>
</li>
</ul>
<div id="ARPLS68866" class="refsect2"><a id="i1002289"></a>
<h3 class="refsect2">Overview</h3>
<p><code dir="ltr">DBMS_TRACE</code> provides subprograms to start and stop PL/SQL tracing in a session. Oracle collects the trace data as the program executes and writes it to database tables.</p>
<p>A typical session involves:</p>
<ul>
<li>
<p>Starting PL/SQL tracing in session (<code dir="ltr">DBMS_TRACE</code>.<code dir="ltr">SET_PLSQL_TRACE</code>).</p>
</li>
<li>
<p>Running an application to be traced.</p>
</li>
<li>
<p>Stopping PL/SQL tracing in session (<code dir="ltr">DBMS_TRACE</code>.<code dir="ltr">CLEAR_PLSQL_TRACE</code>).</p>
</li>
</ul>
</div>
<!-- class="refsect2" -->
<div id="ARPLS68867" class="refsect2"><a id="i1002104"></a>
<h3 class="refsect2">Security Model</h3>
<p>This package must be created under <code dir="ltr">SYS</code>.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS68868" class="refsect2"><a id="i1000920"></a>
<h3 class="refsect2">Constants</h3>
<p>The <code dir="ltr">DBMS_TRACE</code> package uses the constants shown in <a href="#CIAHBBHB">Table 167-1, &#34;DBMS_TRACE Event Constants&#34;</a>:</p>
<div id="ARPLS68869" class="tblformal">
<p class="titleintable"><a id="sthref11880"></a><a id="CIAHBBHB"></a>Table 167-1 DBMS_TRACE Event Constants</p>
<table class="cellalignment4330" title="DBMS_TRACE Event Constants" summary="This table described the constants used by the DBMS_TRACE package." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t2">Name</th>
<th class="cellalignment4328" id="r1c2-t2">Type</th>
<th class="cellalignment4328" id="r1c3-t2">Value</th>
<th class="cellalignment4328" id="r1c4-t2">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t2" headers="r1c1-t2">
<p><code dir="ltr">TRACE_ALL_CALLS</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t2 r1c2-t2">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t2 r1c3-t2">
<p>1</p>
</td>
<td class="cellalignment4329" headers="r2c1-t2 r1c4-t2">
<p>Traces calls or returns</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t2" headers="r1c1-t2">
<p><code dir="ltr">TRACE_ENABLED_CALLS</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t2 r1c2-t2">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t2 r1c3-t2">
<p>2</p>
</td>
<td class="cellalignment4329" headers="r3c1-t2 r1c4-t2">&nbsp;</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t2" headers="r1c1-t2">
<p><code dir="ltr">TRACE_ALL_EXCEPTIONS</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t2 r1c2-t2">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t2 r1c3-t2">
<p>4</p>
</td>
<td class="cellalignment4329" headers="r4c1-t2 r1c4-t2">
<p>Traces exceptions</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t2" headers="r1c1-t2">
<p><code dir="ltr">TRACE_ENABLED_EXCEPTIONS</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t2 r1c2-t2">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t2 r1c3-t2">
<p>8</p>
</td>
<td class="cellalignment4329" headers="r5c1-t2 r1c4-t2">
<p>Traces exceptions and handlers</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t2" headers="r1c1-t2">
<p><code dir="ltr">TRACE_LIMIT</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t2 r1c2-t2">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t2 r1c3-t2">
<p>16</p>
</td>
<td class="cellalignment4329" headers="r6c1-t2 r1c4-t2">
<p>Save only the last few records. This allows tracing up to a problem area, without filling the database up with masses of irrelevant information. If event 10940 is set, the limit is 1023*(the value of event 10940). This can be overridden by the use of <code dir="ltr">&#34;TRACE_LIMIT&#34;</code> flag.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t2" headers="r1c1-t2">
<p><code dir="ltr">TRACE_ALL_SQL</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t2 r1c2-t2">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t2 r1c3-t2">
<p>32</p>
</td>
<td class="cellalignment4329" headers="r7c1-t2 r1c4-t2">
<p>Traces SQL statements</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t2" headers="r1c1-t2">
<p><code dir="ltr">TRACE_ENABLED_SQL</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t2 r1c2-t2">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t2 r1c3-t2">
<p>64</p>
</td>
<td class="cellalignment4329" headers="r8c1-t2 r1c4-t2">
<p>Traces SQL statements at PL/SQL level. This does not invoke SQL Trace</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t2" headers="r1c1-t2">
<p><code dir="ltr">TRACE_ALL_LINES</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t2 r1c2-t2">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t2 r1c3-t2">
<p>128</p>
</td>
<td class="cellalignment4329" headers="r9c1-t2 r1c4-t2">
<p>Traces each line</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t2" headers="r1c1-t2">
<p><code dir="ltr">TRACE_ENABLED_LINES</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t2 r1c2-t2">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t2 r1c3-t2">
<p>256</p>
</td>
<td class="cellalignment4329" headers="r10c1-t2 r1c4-t2">&nbsp;</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t2" headers="r1c1-t2">
<p><code dir="ltr">TRACE_PAUSE</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t2 r1c2-t2">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t2 r1c3-t2">
<p>4096</p>
</td>
<td class="cellalignment4329" headers="r11c1-t2 r1c4-t2">
<p>Pauses tracing</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t2" headers="r1c1-t2">
<p><code dir="ltr">TRACE_RESUME</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t2 r1c2-t2">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t2 r1c3-t2">
<p>8192</p>
</td>
<td class="cellalignment4329" headers="r12c1-t2 r1c4-t2">
<p>Resume tracing</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t2" headers="r1c1-t2">
<p><code dir="ltr">TRACE_STOP</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t2 r1c2-t2">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t2 r1c3-t2">
<p>16384</p>
</td>
<td class="cellalignment4329" headers="r13c1-t2 r1c4-t2">
<p>Stops tracing</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t2" headers="r1c1-t2">
<p><code dir="ltr">NO_TRACE_ADMINISTRATIVE</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t2 r1c2-t2">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t2 r1c3-t2">
<p>32768</p>
</td>
<td class="cellalignment4329" headers="r14c1-t2 r1c4-t2">
<p>Prevents tracing of &#39;administrative events such as</p>
<ul>
<li>
<p><code dir="ltr">PL/SQL Trace Tool started</code></p>
</li>
<li>
<p><code dir="ltr">Trace flags changed</code></p>
</li>
<li>
<p><code dir="ltr">PL/SQL Virtual Machine started</code></p>
</li>
<li>
<p><code dir="ltr">PL/SQL Virtual Machine stopped</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t2" headers="r1c1-t2">
<p><code dir="ltr">NO_TRACE_HANDLED_EXCEPTIONS</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t2 r1c2-t2">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t2 r1c3-t2">
<p>65536</p>
</td>
<td class="cellalignment4329" headers="r15c1-t2 r1c4-t2">
<p>Prevents tracing of handled exceptions</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS74982" class="tblformal">
<p class="titleintable"><a id="sthref11881"></a><a id="sthref11882"></a>Table 167-2 DBMS_TRACE Version Constants</p>
<table class="cellalignment4330" title="DBMS_TRACE Version Constants" summary="This table described the constants used by the DBMS_TRACE package." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t3">Name</th>
<th class="cellalignment4328" id="r1c2-t3">Type</th>
<th class="cellalignment4328" id="r1c3-t3">Value</th>
<th class="cellalignment4328" id="r1c4-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t3" headers="r1c1-t3">
<p><code dir="ltr">TRACE_MINOR_VERSION</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t3 r1c2-t3">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t3 r1c3-t3">
<p>0</p>
</td>
<td class="cellalignment4329" headers="r2c1-t3 r1c4-t3">&nbsp;</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t3" headers="r1c1-t3">
<p><code dir="ltr">TRACE_MAJOR_VERSION</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t3 r1c2-t3">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t3 r1c3-t3">
<p>1</p>
</td>
<td class="cellalignment4329" headers="r3c1-t3 r1c4-t3">&nbsp;</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p>Oracle recommends using the symbolic form for all these constants.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS68870" class="refsect2"><a id="i1002143"></a>
<h3 class="refsect2">Restrictions</h3>
<p>You cannot use PL/SQL tracing in a shared server environment.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS68871" class="refsect2"><a id="i1002144"></a>
<h3 class="refsect2">Operational Notes</h3>
<ul>
<li>
<p><a href="#CACJJGHF">Controlling Data Volume</a></p>
</li>
<li>
<p><a href="#CACFBJGA">Creating Database Tables to Collect DBMS_TRACE Output</a></p>
</li>
<li>
<p><a href="#CACBEBEI">Collecting Trace Data</a></p>
</li>
<li>
<p><a href="#CACICJAC">Collected Data</a></p>
</li>
<li>
<p><a href="#CACFFBDC">Trace Control</a></p>
</li>
</ul>
<div id="ARPLS68872" class="refsect3"><a id="CACJJGHF"></a>
<h4 class="refsect3">Controlling Data Volume</h4>
<p>Profiling large applications may produce a large volume of data. You can control the volume of data collected by <span class="italic">enabling</span> specific program units for trace data collection.</p>
<p>You can enable a program unit by compiling it debug. This can be done in one of two ways:</p>
<pre dir="ltr">alter session set plsql_debug=true; 
create or replace ... /* create the library units - debug information will be generated */ 
</pre>
<p>or:</p>
<pre dir="ltr">/* recompile specific library unit with debug option */ 
alter [PROCEDURE | FUNCTION | PACKAGE BODY]  &lt;libunit-name&gt; compile debug; 
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot use the second method for anonymous blocks.</div>
<p>You can limit the amount of storage used in the database by retaining only the most recent 8,192 records (approximately) by including <code dir="ltr">TRACE_LIMIT</code> in the <code dir="ltr">TRACE_LEVEL</code> parameter of the <code dir="ltr">SET_PLSQL_TRACE</code> procedure.</p>
</div>
<!-- class="refsect3" -->
<div id="ARPLS68873" class="refsect3"><a id="CACFBJGA"></a>
<h4 class="refsect3">Creating Database Tables to Collect DBMS_TRACE Output</h4>
<p>You must <a id="sthref11883"></a>create database tables into which the <code dir="ltr">DBMS_TRACE</code> package writes output. Otherwise, the data is not collected. To create these tables, run the script <code dir="ltr"><a id="sthref11884"></a>TRACETAB.SQL</code>. The tables this script creates are owned by SYS.</p>
</div>
<!-- class="refsect3" -->
<div id="ARPLS68874" class="refsect3"><a id="CACBEBEI"></a>
<h4 class="refsect3">Collecting Trace Data</h4>
<p>The PL/SQL features you can trace are described in the script <code dir="ltr">DBMSPBT.SQL</code>. Some of the key tracing features are:</p>
<ul>
<li>
<p><a href="#i1000994">Tracing Calls</a></p>
</li>
<li>
<p><a href="#i1000745">Tracing Exceptions</a></p>
</li>
<li>
<p><a href="#i1000749">Tracing SQL</a></p>
</li>
<li>
<p><a href="#i1000753">Tracing Lines</a></p>
</li>
</ul>
<p>Additional features of DBMS_TRACE also allow pausing and resuming trace, and limiting the output.</p>
<div id="ARPLS68875" class="refsect4"><a id="i1000994"></a>
<h5 class="refsect4">Tracing Calls</h5>
<p>Two levels of call tracing are available:</p>
<ul>
<li>
<p>Level 1: Trace all calls. This corresponds to the constant <code dir="ltr">TRACE_ALL_CALLS</code>.</p>
</li>
<li>
<p>Level 2: Trace calls to enabled program units only. This corresponds to the constant <code dir="ltr">TRACE_ENABLED_CALLS</code>.</p>
</li>
</ul>
<p>Enabling cannot be detected for remote procedure calls (RPCs); hence, RPCs are only traced with level 1.</p>
<br/></div>
<!-- class="refsect4" -->
<div id="ARPLS68876" class="refsect4"><a id="i1000745"></a>
<h5 class="refsect4">Tracing Exceptions</h5>
<p>Two levels of exception tracing are available:</p>
<ul>
<li>
<p>Level 1: Trace all exceptions. This corresponds to <code dir="ltr">TRACE_ALL_EXCEPTIONS</code>.</p>
</li>
<li>
<p>Level 2: Trace exceptions raised in enabled program units only. This corresponds to <code dir="ltr">TRACE_ENABLED_EXCEPTIONS</code>.</p>
</li>
</ul>
<br/></div>
<!-- class="refsect4" -->
<div id="ARPLS68877" class="refsect4"><a id="i1000749"></a>
<h5 class="refsect4">Tracing SQL</h5>
<p>Two levels of SQL tracing are available:</p>
<ul>
<li>
<p>Level 1: Trace all SQL. This corresponds to the constant <code dir="ltr">TRACE_ALL_SQL</code>.</p>
</li>
<li>
<p>Level 2: Trace SQL in enabled program units only. This corresponds to the constant <code dir="ltr">TRACE_ENABLED_SQL</code>.</p>
</li>
</ul>
<br/></div>
<!-- class="refsect4" -->
<div id="ARPLS68878" class="refsect4"><a id="i1000753"></a>
<h5 class="refsect4">Tracing Lines</h5>
<p>Two levels of line tracing are available:</p>
<ul>
<li>
<p>Level 1: Trace all lines. This corresponds to the constant <code dir="ltr">TRACE_ALL_LINES</code>.</p>
</li>
<li>
<p>Level 2: Trace lines in enabled program units only. This corresponds to the constant <code dir="ltr">TRACE_ENABLED_LINES</code>.</p>
</li>
</ul>
<p>When tracing lines, Oracle adds a record to the database each time the line number changes. This includes line number changes due to procedure calls and returns.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
For all types of tracing, level 1 overrides level 2. For example, if both level 1 and level 2 are enabled, then level 1 takes precedence.</div>
<br/></div>
<!-- class="refsect4" --></div>
<!-- class="refsect3" -->
<div id="ARPLS68879" class="refsect3"><a id="CACICJAC"></a>
<h4 class="refsect3">Collected Data</h4>
<p>If tracing is requested only for enabled program units, and if the current program unit is not enabled, then no trace data is written.</p>
<p>When tracing calls, both the call and return are traced. The check for whether tracing is &#34;enabled&#34; passes if either the called routine or the calling routine is &#34;enabled&#34;.</p>
<p>Call tracing will always output the program unit type, program unit name, and line number for both the caller and the callee. It will output the caller&#39;s stack depth. If the caller is enabled, the caller&#39;s name will also be output. If the callee is enabled, the callee&#39;s name will also be output.</p>
<p>Exception tracing writes out the line number. Raising the exception shows information on whether the exception is user-defined or pre-defined. It also shows the exception number in the case of pre-defined exceptions. Both the place where the exceptions are raised and their handler is traced. The check for tracing being &#34;enabled&#34; is done independently for the place where the exception is raised and the place where the exception is handled. Enabling <code dir="ltr">NO_TRACE_HANDLED_EXCEPTIONS</code> limits data collection to unhandled exceptions</p>
<p>All calls to <code dir="ltr">DBMS_TRACE.SET_PLSQL_TRACE</code> and <code dir="ltr">DBMS_TRACE.CLEAR_PLSQL_TRACE</code> place a special trace record in the database. Therefore, it is always possible to determine when trace settings were changed.</p>
</div>
<!-- class="refsect3" -->
<div id="ARPLS68880" class="refsect3"><a id="CACFFBDC"></a>
<h4 class="refsect3">Trace Control</h4>
<p>As well as determining which items are collected, you can pause and resume the trace process. No information is gathered between the time that tracing is paused and the time that it is resumed. The constants <code dir="ltr">TRACE_PAUSE</code> and <code dir="ltr">TRACE_RESUME</code> are used to accomplish this. Trace records are generated to indicate that the trace was paused/resumed.</p>
<p>It is also possible to retain only the last 8,192 trace events of a run by using the constant <code dir="ltr">TRACE_LIMIT</code>. This allows tracing to be turned on without filling up the database. When tracing stops, the last 8,192 records are saved. The limit is approximate, since it is not checked on every trace record. At least the requested number of trace records will be generated; up to 1,000 additional records may be generated. At least the requested number of trace records will be generated; up to 1,000 additional records may be generated. The 8,192 record limit can be changed. Setting event 10940 to level <span class="italic">n</span> changes the record limit to 1024 * <span class="italic">n</span>.</p>
<p>Enabling <code dir="ltr">NO_TRACE_ADMINISTRATIVE</code> prevents the generation of such administrative event records as <code dir="ltr">PL/SQL Trace Tool started</code>, <code dir="ltr">Trace flags changed</code>, <code dir="ltr">PL/SQL Virtual Machine started</code>, and <code dir="ltr">PL/SQL Virtual Machine stopped</code>.</p>
</div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="i1001492"></a>
<div id="ARPLS68881" class="refsect1">
<h2 class="refsect1">Summary of DBMS_TRACE Subprograms</h2>
<div id="ARPLS68882" class="tblformal">
<p class="titleintable"><a id="sthref11885"></a><a id="CIAHJHFJ"></a>Table 167-3 DBMS_TRACE Package Subprograms</p>
<table class="cellalignment4330" title="DBMS_TRACE Package Subprograms" summary="This table lists the DBMS_TRACE subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t6">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t6" headers="r1c1-t6">
<p><a href="#i1002348">CLEAR_PLSQL_TRACE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t6 r1c2-t6">
<p>Stops trace data dumping in session</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t6" headers="r1c1-t6">
<p><a href="#CIAIFBJF">GET_PLSQL_TRACE_LEVEL Function</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t6 r1c2-t6">
<p>Gets the trace level</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t6" headers="r1c1-t6">
<p><a href="#i1002395">PLSQL_TRACE_VERSION Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t6 r1c2-t6">
<p>Gets the version number of the trace package</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t6" headers="r1c1-t6">
<p><a href="#i1000112">SET_PLSQL_TRACE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r5c1-t6 r1c2-t6">
<p>Starts tracing in the current session</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS68883" class="refsect2"><a id="i1002348"></a>
<h3 class="refsect2"><a id="sthref11886"></a>CLEAR_PLSQL_TRACE Procedure</h3>
<p>This procedure disables trace data collection.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11887"></a>Syntax</p>
<pre dir="ltr">DBMS_TRACE.CLEAR_PLSQL_TRACE; 
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68884" class="refsect2"><a id="CIAIFBJF"></a>
<h3 class="refsect2"><a id="sthref11888"></a>GET_PLSQL_TRACE_LEVEL Function</h3>
<p>This procedure returns the current trace level as the sum of one or more of the constants as listed in <a href="#CIAHBBHB">Table 167-1, &#34;DBMS_TRACE Event Constants&#34;</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11889"></a>Syntax</p>
<pre dir="ltr">DBMS_TRACE.GET_PLSQL_TRACE_LEVEL 
  RETURN BINARY_INTEGER; 
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68885" class="refsect2"><a id="i1002395"></a>
<h3 class="refsect2"><a id="sthref11890"></a>PLSQL_TRACE_VERSION Procedure</h3>
<p>This procedure gets the version number of the trace package. It returns the major and minor version number of the <code dir="ltr">DBMS_TRACE</code> package.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11891"></a>Syntax</p>
<pre dir="ltr">DBMS_TRACE.PLSQL_TRACE_VERSION ( 
   major OUT BINARY_INTEGER, 
   minor OUT BINARY_INTEGER); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11892"></a>Parameters</p>
<div id="ARPLS68886" class="tblformal">
<p class="titleintable"><a id="sthref11893"></a><a id="sthref11894"></a>Table 167-4 PLSQL_TRACE_VERSION Procedure Parameters</p>
<table class="cellalignment4330" title="PLSQL_TRACE_VERSION Procedure Parameters" summary="This table describes the Parameters of DBMS_TRACE.PLSQL_TRACE_VERSION subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t7">Parameter</th>
<th class="cellalignment4328" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t7" headers="r1c1-t7">
<p><code dir="ltr">major</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t7 r1c2-t7">
<p>Major version number of <code dir="ltr">DBMS_TRACE</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t7" headers="r1c1-t7">
<p><code dir="ltr">minor</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t7 r1c2-t7">
<p>Minor version number of <code dir="ltr">DBMS_TRACE</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68887" class="refsect2"><a id="i1000112"></a>
<h3 class="refsect2"><a id="sthref11895"></a>SET_PLSQL_TRACE Procedure</h3>
<p>This procedure enables PL/SQL trace data collection.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11896"></a>Syntax</p>
<pre dir="ltr">DBMS_TRACE.SET_PLSQL_TRACE ( 
   trace_level INTEGER); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11897"></a>Parameters</p>
<div id="ARPLS68888" class="tblformal">
<p class="titleintable"><a id="sthref11898"></a><a id="sthref11899"></a>Table 167-5 <span class="bolditalic">SET_PLSQL_TRACE Procedure Parameters</span></p>
<table class="cellalignment4330" title="SET_PLSQL_TRACE Procedure Parameters" summary="This table describes the Parameters of DBMS_TRACE.SET_PLSQL_TRACE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t8">Parameter</th>
<th class="cellalignment4328" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t8" headers="r1c1-t8">
<p><code dir="ltr">trace_level</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t8 r1c2-t8">
<p>You must supply one or more of the constants as listed in <a href="#CIAHBBHB">Table 167-1, &#34;DBMS_TRACE Event Constants&#34;</a>. By summing the constants, you can enable tracing of multiple PL/SQL language features simultaneously. The control constants &#34;<code dir="ltr">TRACE_PAUSE</code>&#34;, &#34;<code dir="ltr">TRACE_RESUME</code>&#34; and &#34;<code dir="ltr">TRACE_STOP</code>&#34; should not be used in combination with other constants.</p>
<p>Also see <a href="#CACBEBEI">&#34;Collecting Trace Data&#34;</a>&nbsp; for more information.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4320">
<tr>
<td class="cellalignment4329">
<table class="cellalignment4325">
<tr>
<td class="cellalignment4324"><a href="d_tdb.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4324"><a href="d_transa.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4332">
<table class="cellalignment4323">
<tr>
<td class="cellalignment4324"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4324"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4324"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4324"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4324"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4324"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>