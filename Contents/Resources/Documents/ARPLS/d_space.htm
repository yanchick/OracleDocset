<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2346"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBMS_SPACE"></a><title>DBMS_SPACE</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1086"/>
<meta name="dcterms.created" content="2016-09-02T5:36:34Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"/>
<meta name="dcterms.identifier" content="E41829-07"/>
<meta name="dcterms.isVersionOf" content="ARPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="d_shared_pool.htm" title="Previous" type="text/html"/>
<link rel="Next" href="d_spadmn.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41829-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">149/290</span> <!-- End Header -->
<div id="ARPLS056" class="chapter"><a id="CACIGFDB"></a>
<h1 class="chapter"><span class="secnum">145</span> DBMS_SPACE</h1>
<p>The <code dir="ltr"><a id="sthref8981"></a>DBMS_SPACE</code> package enables you to analyze segment growth and space requirements.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CACHBCGA">Using DBMS_SPACE</a></p>
<ul>
<li>
<p>Security Model</p>
</li>
</ul>
</li>
<li>
<p><a href="#BABIAEDA">Data Structures</a></p>
</li>
<li>
<p><a href="#i1002198">Summary of DBMS_SPACE Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="CACHBCGA"></a>
<div id="ARPLS68091" class="refsect1">
<h2 class="refsect1">Using DBMS_SPACE</h2>
<ul>
<li>
<p><a href="#CACCJJDC">Security Model</a></p>
</li>
</ul>
<div id="ARPLS68092" class="refsect2"><a id="CACCJJDC"></a>
<h3 class="refsect2">Security Model</h3>
<p>This package runs with <code dir="ltr">SYS</code> privileges. The execution privilege is granted to <code dir="ltr">PUBLIC</code>. Subprograms in this package run under the caller security. The user must have <code dir="ltr">ANALYZE</code> privilege on the object.</p>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="BABIAEDA"></a>
<div id="ARPLS68093" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Data Structures</h2>
<p>The <code dir="ltr">DBMS_SPACE</code> package defines an <code dir="ltr">OBJECT</code> type, a <code dir="ltr">RECORD</code> type, and a <code dir="ltr">TABLE</code> type.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8982"></a>OBJECT Types</p>
<p><a href="#BABIBGED">CREATE_TABLE_COST_COLINFO Object Type</a></p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8983"></a>RECORD Types</p>
<p><a href="#CHDJGEFH">ASA_RECO_ROW Record Type</a></p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8984"></a>TABLE Types</p>
<p><a href="#CHDHEAED">ASA_RECO_ROW_TB Table Type</a></p>
</div>
<!-- class="refsubsect" -->
<div id="ARPLS72877" class="refsect2"><a id="BABIBGED"></a>
<h3 class="refsect2"><a id="sthref8985"></a>CREATE_TABLE_COST_COLINFO Object Type</h3>
<p>This type describes the datatype and size of a column in the table.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8986"></a>Syntax</p>
<pre dir="ltr">TYPE create_table_cost_colinfo IS OBJECT( 
    col_type    VARCHAR(200),
    col_size    NUMBER)
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8987"></a>Attributes</p>
<div id="ARPLS72878" class="tblformal">
<p class="titleintable"><a id="sthref8988"></a><a id="sthref8989"></a>Table 145-1 CQ_NOTIFICATION$_DESCRIPTOR Object Type</p>
<table class="cellalignment4330" title="CQ_NOTIFICATION$_DESCRIPTOR Object Type" summary="This table liststhe attributes of the CHNF$_DESC object type and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t2">Attribute</th>
<th class="cellalignment4328" id="r1c2-t2">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t2" headers="r1c1-t2">
<p><code dir="ltr">col_type</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t2 r1c2-t2">
<p>Column type</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t2" headers="r1c1-t2">
<p><code dir="ltr">col_size</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t2 r1c2-t2">
<p>Column size</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68094" class="refsect2"><a id="CHDJGEFH"></a>
<h3 class="refsect2"><a id="sthref8990"></a>ASA_RECO_ROW Record Type</h3>
<p>This type contains the column type of individual columns returned by the <a href="#CHDDBGED">ASA_RECOMMENDATIONS Function</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8991"></a>Syntax</p>
<pre dir="ltr">TYPE asa_reco_row IS RECORD (
   tablespace_name       VARCHAR2(30),
   segment_owner         VARCHAR2(30),
   segment_name          VARCHAR2(30),   segment_type          VARCHAR2(18),
   partition_name        VARCHAR2(30),
   allocated_space       NUMBER,
   used_space            NUMBER,
   reclaimable_space     NUMBER,
   chain_rowexcess       NUMBER,
   recommendations       VARCHAR2(1000),
   c1                    VARCHAR2(1000),
   c2                    VARCHAR2(1000),
   c3                    VARCHAR2(1000),
   task_id               NUMBER,
   mesg_id               NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8992"></a>Attributes</p>
<div id="ARPLS68095" class="tblformal">
<p class="titleintable"><a id="sthref8993"></a><a id="sthref8994"></a>Table 145-2 ASA_RECO_ROW Attributes</p>
<table class="cellalignment4330" title="ASA_RECO_ROW Attributes" summary="This table describes the fields of the Record Type ASA_RECO_ROW and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t3">Field</th>
<th class="cellalignment4328" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t3" headers="r1c1-t3">
<p><code dir="ltr">tablespace_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t3 r1c2-t3">
<p>Name of the tablespace containing the object</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t3" headers="r1c1-t3">
<p><code dir="ltr">segment_owner</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t3 r1c2-t3">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t3" headers="r1c1-t3">
<p><code dir="ltr">segment_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t3 r1c2-t3">
<p>Name of the object</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t3" headers="r1c1-t3">
<p><code dir="ltr">segment_type</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t3 r1c2-t3">
<p>Type of the segment &#39;<code dir="ltr">TABLE</code>&#39;,&#39;<code dir="ltr">INDEX</code>&#39; and so on</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t3" headers="r1c1-t3">
<p><code dir="ltr">partition_name</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t3 r1c2-t3">
<p>Name of the partition</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t3" headers="r1c1-t3">
<p><code dir="ltr">allocated_space</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t3 r1c2-t3">
<p>Space allocated to the segment</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t3" headers="r1c1-t3">
<p><code dir="ltr">used_space</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t3 r1c2-t3">
<p>Space actually used by the segment</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t3" headers="r1c1-t3">
<p><code dir="ltr">reclaimable_space</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t3 r1c2-t3">
<p>Reclaimable free space in the segment</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t3" headers="r1c1-t3">
<p><code dir="ltr">chain_rowexcess</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t3 r1c2-t3">
<p>Percentage of excess chain row pieces that can be eliminated</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t3" headers="r1c1-t3">
<p><code dir="ltr">recommendations</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t3 r1c2-t3">
<p>Recommendation or finding for this segment</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t3" headers="r1c1-t3">
<p><code dir="ltr">c1</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t3 r1c2-t3">
<p>Command associated with the recommendation</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t3" headers="r1c1-t3">
<p><code dir="ltr">c2</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t3 r1c2-t3">
<p>Command associated with the recommendation</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t3" headers="r1c1-t3">
<p><code dir="ltr">c3</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t3 r1c2-t3">
<p>Command associated with the recommendation</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t3" headers="r1c1-t3">
<p><code dir="ltr">task_id</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t3 r1c2-t3">
<p>Advisor Task that processed this segment</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t3" headers="r1c1-t3">
<p><code dir="ltr">mesg_id</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t3 r1c2-t3">
<p>Message ID corresponding to the recommendation</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68096" class="refsect2"><a id="CHDHEAED"></a>
<h3 class="refsect2"><a id="sthref8995"></a>ASA_RECO_ROW_TB Table Type</h3>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8996"></a>Syntax</p>
<pre dir="ltr">TYPE asa_reco_row_tb IS TABLE OF asa_reco_row;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="i1002198"></a>
<div id="ARPLS68097" class="refsect1">
<h2 class="refsect1">Summary of DBMS_SPACE Subprograms</h2>
<div id="ARPLS68098" class="tblformal">
<p class="titleintable"><a id="sthref8997"></a><a id="sthref8998"></a>Table 145-3 <span class="bolditalic">DBMS_SPACE Package Subprograms</span></p>
<table class="cellalignment4330" title=" DBMS_SPACE Package Subprograms" summary="This table lists the DBMS_SPACE subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t4">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t4" headers="r1c1-t4">
<p><a href="#CHDDBGED">ASA_RECOMMENDATIONS Function</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t4 r1c2-t4">
<p>Returns recommendations/findings of segment advisor run automatically by the system or manually invoked by the user</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t4" headers="r1c1-t4">
<p><a href="#i1002659">CREATE_INDEX_COST Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t4 r1c2-t4">
<p>Determines the cost of creating an index on an existing table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t4" headers="r1c1-t4">
<p><a href="#i1003180">CREATE_TABLE_COST Procedures</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t4 r1c2-t4">
<p>Determines the size of the table given various attributes</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t4" headers="r1c1-t4">
<p><a href="#i1002261">FREE_BLOCKS Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r5c1-t4 r1c2-t4">
<p>Returns information about free blocks in an object (table, index, or cluster)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t4" headers="r1c1-t4">
<p><a href="#BABEJBHE">ISDATAFILEDROPPABLE_NAME Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r6c1-t4 r1c2-t4">
<p>Checks whether a datafile is droppable</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t4" headers="r1c1-t4">
<p><a href="#i1001702">OBJECT_DEPENDENT_SEGMENTS Function</a></p>
</td>
<td class="cellalignment4329" headers="r7c1-t4 r1c2-t4">
<p>Returns the list of segments that are associated with the object</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t4" headers="r1c1-t4">
<p><a href="#i1002179">OBJECT_GROWTH_TREND Function</a></p>
</td>
<td class="cellalignment4329" headers="r8c1-t4 r1c2-t4">
<p>A table function where each row describes the space usage of the object at a specific point in time</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t4" headers="r1c1-t4">
<p><a href="#CACBDJIH">SPACE_USAGE Procedures</a></p>
</td>
<td class="cellalignment4329" headers="r9c1-t4 r1c2-t4">
<p>Returns information about free blocks in an auto segment space managed segment</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t4" headers="r1c1-t4">
<p><a href="#i1000324">UNUSED_SPACE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r10c1-t4 r1c2-t4">
<p>Returns information about unused space in an object (table, index, or cluster)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS68099" class="refsect2"><a id="CHDDBGED"></a>
<h3 class="refsect2"><a id="sthref8999"></a>ASA_RECOMMENDATIONS Function</h3>
<p>This function returns recommendations using the stored results of the auto segment advisor. This function returns results from the latest run on any given object.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9000"></a>Syntax</p>
<pre dir="ltr">DBMS_SPACE.ASA_RECOMMENDATIONS (
   all_runs        IN    VARCHAR2 DEFAULT := TRUE,
   show_manual     IN    VARCHAR2 DEFAULT := TRUE,
   show_findings   IN    VARCHAR2 DEFAULT := FALSE)
 RETURN ASA_RECO_ROW_TB PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9001"></a>Parameters</p>
<div id="ARPLS68100" class="tblformal">
<p class="titleintable"><a id="sthref9002"></a><a id="sthref9003"></a>Table 145-4 ASA_RECOMMENDATIONS Procedure Parameters</p>
<table class="cellalignment4330" title="ASA_RECOMMENDATIONS Procedure Parameters" summary="This table describes Parameters used by the DBMS_SPACE.ASA_RECOMMENDATIONS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t5">Parameter</th>
<th class="cellalignment4328" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t5" headers="r1c1-t5">
<p><code dir="ltr">all_runs</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t5 r1c2-t5">
<p>If <code dir="ltr">TRUE</code>, returns recommendations/findings for all runs of auto segment advisor. If <code dir="ltr">FALSE</code>, returns the results of the <code dir="ltr">LATEST</code> run only. <code dir="ltr">LATEST</code> does not make sense for manual invocation of segment advisor. This is applicable only for auto advisor.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t5" headers="r1c1-t5">
<p><code dir="ltr">show_manual</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t5 r1c2-t5">
<p>If <code dir="ltr">TRUE</code>, we show the results of manual invocations only. The auto advisor results are excluded. If <code dir="ltr">FALSE</code>, results of manual invocation of segment advisor are not returned.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t5" headers="r1c1-t5">
<p><code dir="ltr">show_findings</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t5 r1c2-t5">
<p>Show only the findings instead of the recommendations</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68101" class="refsect2"><a id="i1002659"></a>
<h3 class="refsect2"><a id="sthref9004"></a>CREATE_INDEX_COST Procedure</h3>
<p>This procedure determines the cost of creating an index on an existing table. The input is the DDL statement that will be used to create the index. The procedure will output the storage required to create the index.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9005"></a>Syntax</p>
<pre dir="ltr">DBMS_SPACE.CREATE_INDEX_COST (
   ddl             IN    VARCHAR2,
   used_bytes      OUT   NUMBER,
   alloc_bytes     OUT   NUMBER,
   plan_table      IN    VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9006"></a>Pragmas</p>
<pre dir="ltr">pragma restrict_references(create_index_cost,WNDS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9007"></a>Parameters</p>
<div id="ARPLS68102" class="tblformal">
<p class="titleintable"><a id="sthref9008"></a><a id="sthref9009"></a>Table 145-5 CREATE_INDEX_COST Procedure Parameters</p>
<table class="cellalignment4330" title="CREATE_INDEX_COST Procedure Parameters" summary="This table describes Parameters used by the DBMS_SPACE.CREATE_INDEX_COST subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t6">Parameter</th>
<th class="cellalignment4328" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t6" headers="r1c1-t6">
<p><code dir="ltr">ddl</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t6 r1c2-t6">
<p>The create index DDL statement</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t6" headers="r1c1-t6">
<p><code dir="ltr">used_bytes</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t6 r1c2-t6">
<p>The number of bytes representing the actual index data</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t6" headers="r1c1-t6">
<p><code dir="ltr">alloc_bytes</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t6 r1c2-t6">
<p>Size of the index when created in the tablespace</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t6" headers="r1c1-t6">
<p><code dir="ltr">plan_table</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t6 r1c2-t6">
<p>Which plan table to use, default <code dir="ltr">NULL</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9010"></a>Usage Notes</p>
<ul>
<li>
<p>The table on which the index is created must already exist.</p>
</li>
<li>
<p>The computation of the index size depends on statistics gathered on the segment.</p>
</li>
<li>
<p>It is imperative that the table must have been analyzed recently.</p>
</li>
<li>
<p>In the absence of correct statistics, the results may be inaccurate, although the procedure will not raise any errors.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68103" class="refsect2"><a id="i1003180"></a>
<h3 class="refsect2"><a id="sthref9011"></a>CREATE_TABLE_COST Procedures</h3>
<p>This procedure is used in capacity planning to determine the size of the table given various attributes. The size of the object can vary widely based on the tablespace storage attributes, tablespace block size, and so on. There are two overloads of this procedure.</p>
<ul>
<li>
<p>The first version takes the column information of the table as argument and outputs the table size.</p>
</li>
<li>
<p>The second version takes the average row size of the table as argument and outputs the table size.</p>
</li>
</ul>
<p>This procedure can be used on tablespace of dictionary managed and locally managed extent management as well as manual and auto segment space management.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9012"></a>Syntax</p>
<pre dir="ltr">DBMS_SPACE.CREATE_TABLE_COST (
   tablespace_name    IN VARCHAR2,
   avg_row_size       IN NUMBER,
   row_count          IN NUMBER,
   pct_free           IN NUMBER,
   used_bytes         OUT NUMBER,
   alloc_bytes        OUT NUMBER);

DBMS_SPACE.CREATE_TABLE_COST (
   tablespace_name    IN VARCHAR2,
   colinfos           IN CREATE_TABLE_COST_COLUMNS,
   row_count          IN NUMBER,
   pct_free           IN NUMBER,
   used_bytes         OUT NUMBER,
   alloc_bytes        OUT NUMBER);

CREATE TYPE create_table_cost_colinfo IS OBJECT (
   COL_TYPE   VARCHAR(200),
   COL_SIZE   NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9013"></a>Parameters</p>
<div id="ARPLS68104" class="tblformal">
<p class="titleintable"><a id="sthref9014"></a><a id="sthref9015"></a>Table 145-6 CREATE_TABLE_COST Procedure Parameters</p>
<table class="cellalignment4330" title="CREATE_TABLE_COST Procedure Parameters" summary="This table describes Parameters used by the DBMS_SPACE.CREATE_TABLE_COST subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t7">Parameter</th>
<th class="cellalignment4328" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t7" headers="r1c1-t7">
<p><code dir="ltr">tablespace_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t7 r1c2-t7">
<p>The tablespace in which the object will be created. The default is <code dir="ltr">SYSTEM</code> tablespace.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t7" headers="r1c1-t7">
<p><code dir="ltr">avg_row_size</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t7 r1c2-t7">
<p>The anticipated average row size in the table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t7" headers="r1c1-t7">
<p><code dir="ltr">colinfos</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t7 r1c2-t7">
<p>The description of the columns</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t7" headers="r1c1-t7">
<p><code dir="ltr">row_count</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t7 r1c2-t7">
<p>The anticipated number of rows in the table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t7" headers="r1c1-t7">
<p><code dir="ltr">pct_free</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t7 r1c2-t7">
<p>The percentage of free space in each block for future expansion of existing rows due to updates</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t7" headers="r1c1-t7">
<p><code dir="ltr">used_bytes</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t7 r1c2-t7">
<p>The space used by user data</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t7" headers="r1c1-t7">
<p><code dir="ltr">alloc_bytes</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t7 r1c2-t7">
<p>The size of the object taking into account the tablespace extent characteristics</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9016"></a>Usage Notes</p>
<ul>
<li>
<p>The <code dir="ltr">used_bytes</code> represent the actual bytes used by the data. This includes the overhead due to the block metadata, pctfree etc.</p>
</li>
<li>
<p>The <code dir="ltr">alloc_bytes</code> represent the size of the table when it is created in the tablespace. This takes into account, the size of the extents in the tablespace and tablespace extent management properties.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9017"></a>Examples</p>
<pre dir="ltr">-- review the parameters 
SELECT argument_name, data_type, type_owner, type_name 
FROM all_arguments 
WHERE object_name = &#39;CREATE_TABLE_COST&#39; 
AND overload = 2 
 
-- examine the input parameter type 
SELECT text 
FROM dba_source 
WHERE name = &#39;CREATE_TABLE_COST_COLUMNS&#39;; 
 
-- drill down further into the input parameter type 
SELECT text 
FROM dba_source 
WHERE name = &#39;create_table_cost_colinfo&#39;; 
 
set serveroutput on 
 
DECLARE 
 ub NUMBER; 
 ab NUMBER; 
 cl sys.create_table_cost_columns; 
BEGIN 
  cl := sys.create_table_cost_columns( sys.create_table_cost_colinfo(&#39;NUMBER&#39;,10), 
        sys.create_table_cost_colinfo(&#39;VARCHAR2&#39;,30), 
        sys.create_table_cost_colinfo(&#39;VARCHAR2&#39;,30), 
        sys.create_table_cost_colinfo(&#39;DATE&#39;,NULL)); 
 
  DBMS_SPACE.CREATE_TABLE_COST(&#39;SYSTEM&#39;,cl,100000,0,ub,ab); 
 
  DBMS_OUTPUT.PUT_LINE(&#39;Used Bytes: &#39; || TO_CHAR(ub)); 
  DBMS_OUTPUT.PUT_LINE(&#39;Alloc Bytes: &#39; || TO_CHAR(ab)); 
END; 
/ 
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68105" class="refsect2"><a id="i1002261"></a>
<h3 class="refsect2"><a id="sthref9018"></a>FREE_BLOCKS Procedure</h3>
<p>This procedure returns information about free blocks in an object (table, index, or cluster). See <a href="#CACBDJIH">SPACE_USAGE Procedures</a> for returning free block information in an auto segment space managed segment.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9019"></a>Syntax</p>
<pre dir="ltr">DBMS_SPACE.FREE_BLOCKS (
   segment_owner     IN  VARCHAR2, 
   segment_name      IN  VARCHAR2,
   segment_type      IN  VARCHAR2,
   freelist_group_id IN  NUMBER,
   free_blks         OUT NUMBER,
   scan_limit        IN  NUMBER DEFAULT NULL,
   partition_name    IN  VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9020"></a>Pragmas</p>
<pre dir="ltr">pragma restrict_references(free_blocks,WNDS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9021"></a>Parameters</p>
<div id="ARPLS68106" class="tblformal">
<p class="titleintable"><a id="sthref9022"></a><a id="sthref9023"></a>Table 145-7 FREE_BLOCKS Procedure Parameters</p>
<table class="cellalignment4330" title="FREE_BLOCKS Procedure Parameters" summary="This table describes Parameters used by the DBMS_SPACE.FREE_BLOCKS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t8">Parameter</th>
<th class="cellalignment4328" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t8" headers="r1c1-t8">
<p><code dir="ltr">segment_owner</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t8 r1c2-t8">
<p>Schema name of the segment to be analyzed</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t8" headers="r1c1-t8">
<p><code dir="ltr">segment_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t8 r1c2-t8">
<p>Segment name of the segment to be analyzed</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t8" headers="r1c1-t8">
<p><code dir="ltr">segment_type</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t8 r1c2-t8">
<p>Type of the segment to be analyzed (<code dir="ltr">TABLE</code>, <code dir="ltr">INDEX</code>, or <code dir="ltr">CLUSTER</code>):</p>
<ul>
<li>
<p><code dir="ltr">TABLE</code></p>
</li>
<li>
<p><code dir="ltr">TABLE PARTITION</code></p>
</li>
<li>
<p><code dir="ltr">TABLE SUBPARTITION</code></p>
</li>
<li>
<p><code dir="ltr">INDEX</code></p>
</li>
<li>
<p><code dir="ltr">INDEX PARTITION</code></p>
</li>
<li>
<p><code dir="ltr">INDEX SUBPARTITION</code></p>
</li>
<li>
<p><code dir="ltr">CLUSTER</code></p>
</li>
<li>
<p><code dir="ltr">LOB</code></p>
</li>
<li>
<p><code dir="ltr">LOB PARTITION</code></p>
</li>
<li>
<p><code dir="ltr">LOB SUBPARTITION</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t8" headers="r1c1-t8">
<p><code dir="ltr">freelist_group_id</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t8 r1c2-t8">
<p>Freelist group (instance) whose free list size is to be computed</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t8" headers="r1c1-t8">
<p><code dir="ltr">free_blks</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t8 r1c2-t8">
<p>Returns count of free blocks for the specified group</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t8" headers="r1c1-t8">
<p><code dir="ltr">scan_limit</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t8 r1c2-t8">
<p>Maximum number of free list blocks to read (optional).</p>
<p>Use a scan limit of X you are interested only in the question, &#34;Do I have X blocks on the free list?&#34;</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t8" headers="r1c1-t8">
<p><code dir="ltr">partition_name</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t8 r1c2-t8">
<p>Partition name of the segment to be analyzed.</p>
<p>This is only used for partitioned tables. The name of subpartition should be used when partitioning is composite.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9024"></a>Examples</p>
<p>The following uses the <code dir="ltr">CLUS</code> cluster in <code dir="ltr">SCOTT</code> schema with 4 freelist groups. It returns the number of blocks in freelist group 3 in <code dir="ltr">CLUS</code>.</p>
<pre dir="ltr">DBMS_SPACE.FREE_BLOCKS(&#39;SCOTT&#39;, &#39;CLUS&#39;, &#39;CLUSTER&#39;, 3, :free_blocks); 
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
An error is raised if <code dir="ltr">scan_limit</code> is not a positive number.</div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72962" class="refsect2"><a id="BABEJBHE"></a>
<h3 class="refsect2">ISDATAFILEDROPPABLE_NAME Procedure</h3>
<p>This procedure checks whether a datafile is droppable. This procedure may be called before actually dropping the file.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9025"></a>Syntax</p>
<pre dir="ltr">DBMS_SPACE.ISDATAFILEDROPPABLE_NAME (
   filename     IN     VARCHAR2, 
   value        OUT    NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9026"></a>Pragmas</p>
<pre dir="ltr">pragma restrict_references(free_blocks,WNDS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9027"></a>Parameters</p>
<div id="ARPLS72963" class="tblformal">
<p class="titleintable"><a id="sthref9028"></a><a id="sthref9029"></a>Table 145-8 ISDATAFILEDROPPABLE_NAME Procedure Parameters</p>
<table class="cellalignment4330" title="ISDATAFILEDROPPABLE_NAME Procedure Parameters" summary="This table describes Parameters used by the DBMS_SPACE.FREE_BLOCKS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t10">Parameter</th>
<th class="cellalignment4328" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t10" headers="r1c1-t10">
<p><code dir="ltr">filename</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t10 r1c2-t10">
<p>Name of the file</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t10" headers="r1c1-t10">
<p><code dir="ltr">value</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t10 r1c2-t10">
<p>Values: <code dir="ltr">0</code> if the file is not droppable, <code dir="ltr">1</code> if the file is droppable.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9030"></a>Examples</p>
<pre dir="ltr">DECLARE   fname    VARCHAR2(100);   retval   NUMBER;BEGIN   SELECT file_name   INTO fname   FROM dba_data_files   WHERE file_name like &#39;%empty%&#39;;DBMS_SPACE.ISDATAFILEDROPPABLE_NAME(fname, retval);DBMS_OUTPUT.PUT_LINE(retval);END;/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68107" class="refsect2"><a id="i1001702"></a>
<h3 class="refsect2"><a id="sthref9031"></a>OBJECT_DEPENDENT_SEGMENTS Function</h3>
<p>This table function, given an object, returns the list of segments that are associated with the object.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9032"></a>Syntax</p>
<pre dir="ltr">DBMS_SPACE.OBJECT_DEPENDENT_SEGMENTS(
   objowner    IN     VARCHAR2,
   objname     IN     VARCHAR2,
   partname    IN     VARCHAR2,
   objtype     IN     NUMBER) 
  RETURN dependent_segments_table PIPELINED; 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9033"></a>Parameters</p>
<div id="ARPLS68108" class="tblformal">
<p class="titleintable"><a id="sthref9034"></a><a id="sthref9035"></a>Table 145-9 OBJECT_DEPENDENT_SEGMENTS Function Parameters</p>
<table class="cellalignment4330" title="OBJECT_DEPENDENT_SEGMENTS Function Parameters" summary="This table describes Parameters used by the DBMS_SPACE.OBJECT_DEPENDENT_SEGMENTS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t11">Parameter</th>
<th class="cellalignment4328" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t11" headers="r1c1-t11">
<p><code dir="ltr">objowner</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t11 r1c2-t11">
<p>The schema containing the object</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t11" headers="r1c1-t11">
<p><code dir="ltr">objname</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t11 r1c2-t11">
<p>The name of the object</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t11" headers="r1c1-t11">
<p><code dir="ltr">partname</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t11 r1c2-t11">
<p>The name of the partition</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t11" headers="r1c1-t11">
<p><code dir="ltr">objtype</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t11 r1c2-t11">
<p>Type of the object:</p>
<ul>
<li>
<p><code dir="ltr">OBJECT_TYPE_TABLE constant positive := 1;</code></p>
</li>
<li>
<p><code dir="ltr">OBJECT_TYPE_NESTED_TABLE constant positive := 2;</code></p>
</li>
<li>
<p><code dir="ltr">OBJECT_TYPE_INDEX constant positive := 3;</code></p>
</li>
<li>
<p><code dir="ltr">OBJECT_TYPE_CLUSTER constant positive := 4;</code></p>
</li>
<li>
<p><code dir="ltr">OBJECT_TYPE_TABLE_PARTITION constant positive := 7;</code></p>
</li>
<li>
<p><code dir="ltr">OBJECT_TYPE_INDEX_PARTITION constant positive := 8;</code></p>
</li>
<li>
<p><code dir="ltr">OBJECT_TYPE_TABLE_SUBPARTITION constant positive := 9;</code></p>
</li>
<li>
<p><code dir="ltr">OBJECT_TYPE_INDEX_SUBPARTITION constant positive := 10;</code></p>
</li>
<li>
<p><code dir="ltr">OBJECT_TYPE_MV constant positive := 13;</code></p>
</li>
<li>
<p><code dir="ltr">OBJECT_TYPE_MVLOG constant positive := 14;</code></p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9036"></a>Return Values</p>
<p>The content of one row of a <code dir="ltr">dependent_segments_table:</code></p>
<pre dir="ltr">TYPE object_dependent_segment IS RECORD (
   segment_owner      VARCHAR2(100),
   segment_name       VARCHAR2(100),
   segment_type       VARCHAR2(100),
   tablespace_name    VARCHAR2(100),
   partition_name     VARCHAR2(100),
   lob_column_name    VARCHAR2(100)); 
</pre>
<div id="ARPLS68109" class="tblformal">
<p class="titleintable"><a id="sthref9037"></a><a id="sthref9038"></a>Table 145-10 OBJECT_DEPENDENT_SEGMENT Type Parameters</p>
<table class="cellalignment4330" title="OBJECT_DEPENDENT_SEGMENT Type Parameters" summary="This table describes Parameters used by the DBMS_SPACE.OBJECT_DEPENDENT_SEGMENTS subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t12">Parameter</th>
<th class="cellalignment4328" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t12" headers="r1c1-t12">
<p><code dir="ltr">segment_owner</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t12 r1c2-t12">
<p>The schema containing the segment</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t12" headers="r1c1-t12">
<p><code dir="ltr">segment_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t12 r1c2-t12">
<p>The name of the segment</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t12" headers="r1c1-t12">
<p><code dir="ltr">segment_type</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t12 r1c2-t12">
<p>The type of the segment, such as table, index or LOB</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t12" headers="r1c1-t12">
<p><code dir="ltr">tablespace_name</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t12 r1c2-t12">
<p>The name of the tablespace</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t12" headers="r1c1-t12">
<p><code dir="ltr">partition_name</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t12 r1c2-t12">
<p>The name of the partition, if any</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t12" headers="r1c1-t12">
<p><code dir="ltr">lob_column_name</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t12 r1c2-t12">
<p>The name of the <code dir="ltr">LOB</code> column, if any</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68110" class="refsect2"><a id="i1002179"></a>
<h3 class="refsect2"><a id="sthref9039"></a>OBJECT_GROWTH_TREND Function</h3>
<p>This is a table function. The output will be in the form of one or more rows where each row describes the space usage of the object at a specific point in time. Either the space usage totals will be retrieved from Automatic Workload Repository Facilities (AWRF), or the current space usage will be computed and combined with space usage deltas retrieved from AWRF.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9040"></a>Syntax</p>
<pre dir="ltr">DBMS_SPACE.OBJECT_GROWTH_TREND (
   object_owner           IN    VARCHAR2,
   object_name            IN    VARCHAR2,
   object_type            IN    VARCHAR2,
   partition_name         IN    VARCHAR2 DEFAULT NULL,
   start_time             IN    TIMESTAMP DEFAULT NULL,
   end_time               IN    TIMESTAMP DEFAULT NULL,
   interval               IN    DSINTERVAL_UNCONSTRAINED DEFAULT NULL,
   skip_interpolated      IN    VARCHAR2 DEFAULT &#39;FALSE&#39;,
   timeout_seconds        IN    NUMBER DEFAULT NULL,
   single_datapoint_flag  IN    VARCHAR2 DEFAULT &#39;TRUE&#39;) 
 RETURN object_growth_trend_table PIPELINED;  
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9041"></a>Parameters</p>
<div id="ARPLS68111" class="tblformal">
<p class="titleintable"><a id="sthref9042"></a><a id="sthref9043"></a>Table 145-11 OBJECT_GROWTH_TREND Function Parameters</p>
<table class="cellalignment4330" title="OBJECT_GROWTH_TREND Function Parameters" summary="This table describes Parameters used by the DBMS_SPACE.OBJECT_GROWTH_TREND subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t13">Parameter</th>
<th class="cellalignment4328" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t13" headers="r1c1-t13">
<p><code dir="ltr">object_owner</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t13 r1c2-t13">
<p>The schema containing the object</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t13" headers="r1c1-t13">
<p><code dir="ltr">object_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t13 r1c2-t13">
<p>The name of the object</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t13" headers="r1c1-t13">
<p><code dir="ltr">object_type</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t13 r1c2-t13">
<p>The type of the object</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t13" headers="r1c1-t13">
<p><code dir="ltr">partition_name</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t13 r1c2-t13">
<p>The name of the partition</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t13" headers="r1c1-t13">
<p><code dir="ltr">start_time</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t13 r1c2-t13">
<p>Statistics generated after this time will be used in generating the growth trend</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t13" headers="r1c1-t13">
<p><code dir="ltr">end_time</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t13 r1c2-t13">
<p>Statistics generated until this time will be used in generating the growth trend</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t13" headers="r1c1-t13">
<p><code dir="ltr">interval</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t13 r1c2-t13">
<p>The interval at which to sample</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t13" headers="r1c1-t13">
<p><code dir="ltr">skip_interpolated</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t13 r1c2-t13">
<p>Whether interpolation of missing values should be skipped</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t13" headers="r1c1-t13">
<p><code dir="ltr">timeout_seconds</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t13 r1c2-t13">
<p>The time-out value for the function in seconds</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t13" headers="r1c1-t13">
<p><code dir="ltr">single_data_point_flag</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t13 r1c2-t13">
<p>Whether in the absence of statistics the segment should be sampled</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9044"></a>Return Values</p>
<p><code dir="ltr">The</code> <code dir="ltr">object_growth_trend_row</code> and <code dir="ltr">object_growth_trend_table</code> are used by the <code dir="ltr">OBJECT_GROWTH_TREND</code> table function to describe its output.</p>
<pre dir="ltr">TYPE object_growth_trend_row IS RECORD(
   timepoint      TIMESTAMP,
   space_usage    NUMBER,
   space_alloc    NUMBER,
   quality        VARCHAR(20)); 
</pre>
<div id="ARPLS68112" class="tblformal">
<p class="titleintable"><a id="sthref9045"></a><a id="sthref9046"></a>Table 145-12 OBJECT_GROWTH_TREND_ROW Type Parameters</p>
<table class="cellalignment4330" title="OBJECT_GROWTH_TREND_ROW Type Parameters" summary="This table describes Parameters used by the DBMS_SPACE.OBJECT_GROWTH_TREND_ROW subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t14">Parameter</th>
<th class="cellalignment4328" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t14" headers="r1c1-t14">
<p><code dir="ltr">timepoint</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t14 r1c2-t14">
<p>The time at which the statistic was recorded</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t14" headers="r1c1-t14">
<p><code dir="ltr">space_usage</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t14 r1c2-t14">
<p>The space used by data</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t14" headers="r1c1-t14">
<p><code dir="ltr">space_alloc</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t14 r1c2-t14">
<p>The size of the segment including overhead and unused space</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t14" headers="r1c1-t14">
<p><code dir="ltr">quality</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t14 r1c2-t14">
<p>The quality of result: &#34;<code dir="ltr">GOOD</code>&#34;, &#34;<code dir="ltr">INTERPOLATED</code>&#34;, &#34;<code dir="ltr">PROJECTION</code>&#34;</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<pre dir="ltr">TYPE object_growth_trend_table IS TABLE OF object_growth_trend_row;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68113" class="refsect2"><a id="CACBDJIH"></a>
<h3 class="refsect2"><a id="sthref9047"></a>SPACE_USAGE Procedures</h3>
<p>The first form of the procedure shows the space usage of data blocks under the segment High Water Mark. You can calculate usage for <code dir="ltr">LOB</code>s, <code dir="ltr">LOB</code> <code dir="ltr">PARTITIONS</code> and <code dir="ltr">LOB</code> <code dir="ltr">SUBPARTITIONS</code>. This procedure can only be used on tablespaces that are created with auto segment space management. The bitmap blocks, segment header, and extent map blocks are not accounted for by this procedure. Note that this overload cannot be used on <code dir="ltr">SECUREFILE</code> <code dir="ltr">LOB</code>s.</p>
<p>The second form of the procedure returns information about <code dir="ltr">SECUREFILE</code> <code dir="ltr">LOB</code> space usage. It will return the amount of space in blocks being used by all the <code dir="ltr">SECUREFILE</code> <code dir="ltr">LOB</code>s in the <code dir="ltr">LOB</code> segment. The procedure displays the space actively used by the LOB column, freed space that has retention expired, and freed space that has retention unexpired. Note that this overload can be used only on <code dir="ltr">SECUREFILE</code> <code dir="ltr">LOB</code>s.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9048"></a>Syntax</p>
<pre dir="ltr">DBMS_SPACE.SPACE_USAGE(
   segment_owner           IN  VARCHAR2,
   segment_name            IN  VARCHAR2,
   segment_type            IN  VARCHAR2,
   unformatted_blocks      OUT NUMBER,
   unformatted_bytes       OUT NUMBER,
   fs1_blocks              OUT NUMBER,
   fs1_bytes               OUT NUMBER,
   fs2_blocks              OUT NUMBER,
   fs2_bytes               OUT NUMBER,
   fs3_blocks              OUT NUMBER,
   fs3_bytes               OUT NUMBER,
   fs4_blocks              OUT NUMBER,
   fs4_bytes               OUT NUMBER,
   full_blocks             OUT NUMBER,
   full_bytes              OUT NUMBER,
   partition_name          IN  VARCHAR2 DEFAULT NULL); 
</pre>
<pre dir="ltr">DBMS_SPACE.SPACE_USAGE(
   segment_owner           IN    VARCHAR2,
   segment_name            IN    VARCHAR2,
   segment_type            IN    VARCHAR2,
   segment_size_blocks     OUT   NUMBER,
   segment_size_bytes      OUT   NUMBER,
   used_blocks             OUT   NUMBER,
   used_bytes              OUT   NUMBER,
   expired_blocks          OUT   NUMBER,
   expired_bytes           OUT   NUMBER,
   unexpired_blocks        OUT   NUMBER,
   unexpired_bytes         OUT   NUMBER,
   partition_name          IN    VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9049"></a>Parameters</p>
<div id="ARPLS68114" class="tblformal">
<p class="titleintable"><a id="sthref9050"></a><a id="sthref9051"></a>Table 145-13 SPACE_USAGE Procedure Parameters</p>
<table class="cellalignment4330" title="SPACE_USAGE Procedure Parameters" summary="This table describes Parameters used by the DBMS_SPACE.SPACE_USAGE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t15">Parameter</th>
<th class="cellalignment4328" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t15" headers="r1c1-t15">
<p><code dir="ltr">segment_owner</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t15 r1c2-t15">
<p>Schema name of the segment to be analyzed</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t15" headers="r1c1-t15">
<p><code dir="ltr">segment_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t15 r1c2-t15">
<p>Name of the segment to be analyzed</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t15" headers="r1c1-t15">
<p><code dir="ltr">partition_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t15 r1c2-t15">
<p>Partition name of the segment to be analyzed</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t15" headers="r1c1-t15">
<p><code dir="ltr">segment_type</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t15 r1c2-t15">
<p>Type of the segment to be analyzed (<code dir="ltr">TABLE</code>, <code dir="ltr">INDEX</code>, or <code dir="ltr">CLUSTER</code>):</p>
<ul>
<li>
<p><code dir="ltr">TABLE</code></p>
</li>
<li>
<p><code dir="ltr">TABLE PARTITION</code></p>
</li>
<li>
<p><code dir="ltr">TABLE SUBPARTITION</code></p>
</li>
<li>
<p><code dir="ltr">INDEX</code></p>
</li>
<li>
<p><code dir="ltr">INDEX PARTITION</code></p>
</li>
<li>
<p><code dir="ltr">INDEX SUBPARTITION</code></p>
</li>
<li>
<p><code dir="ltr">CLUSTER</code></p>
</li>
<li>
<p><code dir="ltr">LOB</code></p>
</li>
<li>
<p><code dir="ltr">LOB PARTITION</code></p>
</li>
<li>
<p><code dir="ltr">LOB SUBPARTITION</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t15" headers="r1c1-t15">
<p><code dir="ltr">unformatted_blocks</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t15 r1c2-t15">
<p>Total number of blocks unformatted</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t15" headers="r1c1-t15">
<p><code dir="ltr">unformatted bytes</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t15 r1c2-t15">
<p>Total number of bytes unformatted</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t15" headers="r1c1-t15">
<p><code dir="ltr">fs1_blocks</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t15 r1c2-t15">
<p>Number of blocks having at least 0 to 25% free space</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t15" headers="r1c1-t15">
<p><code dir="ltr">fs1_bytes</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t15 r1c2-t15">
<p>Number of bytes having at least 0 to 25% free space</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t15" headers="r1c1-t15">
<p><code dir="ltr">fs2_blocks</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t15 r1c2-t15">
<p>Number of blocks having at least 25 to 50% free space</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t15" headers="r1c1-t15">
<p><code dir="ltr">fs2_bytes</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t15 r1c2-t15">
<p>Number of bytes having at least 25 to 50% free space</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t15" headers="r1c1-t15">
<p><code dir="ltr">fs3_blocks</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t15 r1c2-t15">
<p>Number of blocks having at least 50 to 75% free space</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t15" headers="r1c1-t15">
<p><code dir="ltr">fs3_bytes</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t15 r1c2-t15">
<p>Number of bytes having at least 50 to 75% free space</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t15" headers="r1c1-t15">
<p><code dir="ltr">fs4_blocks</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t15 r1c2-t15">
<p>Number of blocks having at least 75 to 100% free space</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t15" headers="r1c1-t15">
<p><code dir="ltr">fs4_bytes</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t15 r1c2-t15">
<p>Number of bytes having at least 75 to 100% free space</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t15" headers="r1c1-t15">
<p><code dir="ltr">ful1_blocks</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t15 r1c2-t15">
<p>Total number of blocks full in the segment</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t15" headers="r1c1-t15">
<p><code dir="ltr">full_bytes</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t15 r1c2-t15">
<p>Total number of bytes full in the segment</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t15" headers="r1c1-t15">
<p><code dir="ltr">segment_size_blocks</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t15 r1c2-t15">
<p>Number of blocks allocated to the segment</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r19c1-t15" headers="r1c1-t15">
<p><code dir="ltr">segment_size_bytes</code></p>
</td>
<td class="cellalignment4329" headers="r19c1-t15 r1c2-t15">
<p>Number of bytes allocated to the segment</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r20c1-t15" headers="r1c1-t15">
<p><code dir="ltr">used_blocks</code></p>
</td>
<td class="cellalignment4329" headers="r20c1-t15 r1c2-t15">
<p>Number blocks allocated to the LOB that contains active data</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r21c1-t15" headers="r1c1-t15">
<p><code dir="ltr">used_bytes</code></p>
</td>
<td class="cellalignment4329" headers="r21c1-t15 r1c2-t15">
<p>Number bytes allocated to the LOB that contains active data</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r22c1-t15" headers="r1c1-t15">
<p><code dir="ltr">expired_blocks</code></p>
</td>
<td class="cellalignment4329" headers="r22c1-t15 r1c2-t15">
<p>Number of expired blocks used by the LOB to keep version data</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r23c1-t15" headers="r1c1-t15">
<p><code dir="ltr">expired_bytes</code></p>
</td>
<td class="cellalignment4329" headers="r23c1-t15 r1c2-t15">
<p>Number of expired bytes used by the LOB to keep version data</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r24c1-t15" headers="r1c1-t15">
<p><code dir="ltr">unexpired_blocks</code></p>
</td>
<td class="cellalignment4329" headers="r24c1-t15 r1c2-t15">
<p>Number of unexpired blocks used by the LOB to keep version data</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r25c1-t15" headers="r1c1-t15">
<p><code dir="ltr">unexpired_bytes</code></p>
</td>
<td class="cellalignment4329" headers="r25c1-t15 r1c2-t15">
<p>Number of unexpired bytes used by the LOB to keep version data</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r26c1-t15" headers="r1c1-t15">
<p><code dir="ltr">partition_name</code></p>
</td>
<td class="cellalignment4329" headers="r26c1-t15 r1c2-t15">
<p>Name of the partition (<code dir="ltr">NULL</code> if not a partition)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9052"></a>Examples</p>
<pre dir="ltr">variable unf number; 
variable unfb number; 
variable fs1 number; 
variable fs1b number; 
variable fs2 number; 
variable fs2b number; 
variable fs3 number; 
variable fs3b number; 
variable fs4 number; 
variable fs4b number; 
variable full number; 
variable fullb number; 

begin 
dbms_space.space_usage(&#39;U1&#39;,&#39;T&#39;, 
                        &#39;TABLE&#39;, 
                        :unf, :unfb, 
                        :fs1, :fs1b, 
                        :fs2, :fs2b, 
                        :fs3, :fs3b, 
                        :fs4, :fs4b, 
                        :full, :fullb); 
end; 
/ 
print unf ; 
print unfb ; 
print fs4 ; 
print fs4b; 
print fs3 ; 
print fs3b; 
print fs2 ; 
print fs2b; 
print fs1 ; 
print fs1b; 
print full; 
print fullb; 
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68115" class="refsect2"><a id="i1000324"></a>
<h3 class="refsect2"><a id="sthref9053"></a>UNUSED_SPACE Procedure</h3>
<p>This procedure returns information about unused space in an object (table, index, or cluster).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9054"></a>Syntax</p>
<pre dir="ltr">DBMS_SPACE.UNUSED_SPACE (
   segment_owner              IN  VARCHAR2, 
   segment_name               IN  VARCHAR2,
   segment_type               IN  VARCHAR2,
   total_blocks               OUT NUMBER,
   total_bytes                OUT NUMBER,
   unused_blocks              OUT NUMBER,
   unused_bytes               OUT NUMBER,
   last_used_extent_file_id   OUT NUMBER,
   last_used_extent_block_id  OUT NUMBER,
   last_used_block            OUT NUMBER, 
   partition_name             IN  VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9055"></a>Parameters</p>
<div id="ARPLS68116" class="tblformal">
<p class="titleintable"><a id="sthref9056"></a><a id="sthref9057"></a>Table 145-14 UNUSED_SPACE Procedure Parameters</p>
<table class="cellalignment4330" title="UNUSED_SPACE Procedure Parameters" summary="This table describes Parameters used by the DBMS_SPACE.UNUSED_SPACE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t16">Parameter</th>
<th class="cellalignment4328" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t16" headers="r1c1-t16">
<p><code dir="ltr">segment_owner</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t16 r1c2-t16">
<p>Schema name of the segment to be analyzed</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t16" headers="r1c1-t16">
<p><code dir="ltr">segment_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t16 r1c2-t16">
<p>Segment name of the segment to be analyzed</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t16" headers="r1c1-t16">
<p><code dir="ltr">segment_type</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t16 r1c2-t16">
<p>Type of the segment to be analyzed (<code dir="ltr">TABLE</code>, <code dir="ltr">INDEX</code>, or <code dir="ltr">CLUSTER</code>):</p>
<ul>
<li>
<p><code dir="ltr">TABLE</code></p>
</li>
<li>
<p><code dir="ltr">TABLE PARTITION</code></p>
</li>
<li>
<p><code dir="ltr">TABLE SUBPARTITION</code></p>
</li>
<li>
<p><code dir="ltr">INDEX</code></p>
</li>
<li>
<p><code dir="ltr">INDEX PARTITION</code></p>
</li>
<li>
<p><code dir="ltr">INDEX SUBPARTITION</code></p>
</li>
<li>
<p><code dir="ltr">CLUSTER</code></p>
</li>
<li>
<p><code dir="ltr">LOB</code></p>
</li>
<li>
<p><code dir="ltr">LOB PARTITION</code></p>
</li>
<li>
<p><code dir="ltr">LOB SUBPARTITION</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t16" headers="r1c1-t16">
<p><code dir="ltr">total_blocks</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t16 r1c2-t16">
<p>Returns total number of blocks in the segment</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t16" headers="r1c1-t16">
<p><code dir="ltr">total_bytes</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t16 r1c2-t16">
<p>Returns total number of blocks in the segment, in bytes</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t16" headers="r1c1-t16">
<p><code dir="ltr">unused_blocks</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t16 r1c2-t16">
<p>Returns number of blocks which are not used</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t16" headers="r1c1-t16">
<p><code dir="ltr">unused_bytes</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t16 r1c2-t16">
<p>Returns, in bytes, number of blocks which are not used</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t16" headers="r1c1-t16">
<p><code dir="ltr">last_used_extent_file_id</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t16 r1c2-t16">
<p>Returns the file ID of the last extent which contains data</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t16" headers="r1c1-t16">
<p><code dir="ltr">last_used_extent_block_id</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t16 r1c2-t16">
<p>Returns the starting block ID of the last extent which contains data</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t16" headers="r1c1-t16">
<p><code dir="ltr">last_used_block</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t16 r1c2-t16">
<p>Returns the last block within this extent which contains data</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t16" headers="r1c1-t16">
<p><code dir="ltr">partition_name</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t16 r1c2-t16">
<p>Partition name of the segment to be analyzed.</p>
<p>This is only used for partitioned tables; the name of subpartition should be used when partitioning is compose.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9058"></a>Examples</p>
<p>The following declares the necessary bind variables and executes.</p>
<pre dir="ltr">DBMS_SPACE.UNUSED_SPACE(&#39;SCOTT&#39;, &#39;EMP&#39;, &#39;TABLE&#39;, :total_blocks, 
   :total_bytes,:unused_blocks, :unused_bytes, :lastextf,  
   :last_extb, :lastusedblock); 
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4320">
<tr>
<td class="cellalignment4329">
<table class="cellalignment4325">
<tr>
<td class="cellalignment4324"><a href="d_shared_pool.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4324"><a href="d_spadmn.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4332">
<table class="cellalignment4323">
<tr>
<td class="cellalignment4324"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4324"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4324"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4324"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4324"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4324"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>