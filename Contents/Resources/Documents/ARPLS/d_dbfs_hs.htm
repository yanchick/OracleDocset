<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2250"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBMS_DBFS_HS"></a><title>DBMS_DBFS_HS</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1086"/>
<meta name="dcterms.created" content="2016-09-02T5:36:18Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"/>
<meta name="dcterms.identifier" content="E41829-07"/>
<meta name="dcterms.isVersionOf" content="ARPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="d_dbfs_content_spi.htm" title="Previous" type="text/html"/>
<link rel="Next" href="d_dbfs_sfs.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41829-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">54/290</span> <!-- End Header -->
<div id="ARPLS72088" class="chapter"><a id="BABJGFBB"></a>
<h1 class="chapter"><span class="secnum">50</span> DBMS_DBFS_HS</h1>
<p>The Oracle Database File System Hierarchical Store is implemented in the <a id="sthref3565"></a><code dir="ltr">DBMS_DBFS_HS</code> package. This package provides users the ability to use tape or Amazon S3 Web service as a storage tier when doing Information Lifecycle Management for their database tables.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ARPLS72088" href="../ARPLS/d_dbfs_hs.htm#ARPLS72088"><span class="italic">Oracle Database SecureFiles and Large Objects Developer&#39;s Guide</span></a></p>
</li>
</ul>
</div>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BABIEBBE">Using DBMS_DBFS_HS</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Security Model</p>
</li>
<li>
<p>Constants</p>
</li>
<li>
<p>Operational Notes</p>
</li>
</ul>
</li>
<li>
<p><a href="#BABIHDAC">Summary of DBMS_DBFS_HS Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="BABIEBBE"></a>
<div id="ARPLS72082" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Using DBMS_DBFS_HS</h2>
<ul>
<li>
<p><a href="#BABJGBJE">Overview</a></p>
</li>
<li>
<p><a href="#CHDIGDAC">Security Model</a></p>
</li>
<li>
<p><a href="#CHDBBICI">Constants</a></p>
</li>
<li>
<p><a href="#BABIEFII">Operational Notes</a></p>
</li>
</ul>
<div id="ARPLS72083" class="refsect2"><a id="BABJGBJE"></a>
<h3 class="refsect2">Overview</h3>
<p>The <code dir="ltr">DBMS_DBFS_HS</code> package is a service provider underneath the <code dir="ltr">DBMS_DBFS_CONTENT</code> package that enables use of tape or Amazon S3 Web service as storage for data.</p>
<p>The data on tape or Amazon S3 Web service is part of the Oracle Database and can be accessed through all standard interfaces, but only through the database. The package allows users to use tape or Amazon S3 Web service as a storage tier when doing Information Lifecycle Management of their content.</p>
<p>The package initially stores all content files in level-1 cache. As the level-1 cache fills up, content files are moved to level-2 cache and then to an external storage device using bulk writes.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS72147" class="refsect2"><a id="CHDIGDAC"></a>
<h3 class="refsect2">Security Model</h3>
<p>The <code dir="ltr">DBMS_DBFS_HS</code> package runs with invoker&#39;s rights.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS72148" class="refsect2"><a id="CHDBBICI"></a>
<h3 class="refsect2">Constants</h3>
<p>The <code dir="ltr">DBMS_DBFS_HS</code> package uses the constants shown in following tables:</p>
<ul>
<li>
<p><a href="#CHDFDHCC">DBMS_DBFS_HS Constants - Used by the CREATESTORE Procedure</a></p>
</li>
<li>
<p><a href="#BABCFBIC">DBMS_DBFS_HS Constants - Used by the SETSTOREPROPERTY Procedure and the GETSTOREPROPERTY Function</a></p>
</li>
<li>
<p><a href="#BABJFIDC">DBMS_DBFS_HS Constants - Used by the REGISTERSTORECOMMAND Function</a></p>
</li>
<li>
<p><a href="#BABCDHHE">DBMS_DBFS_HS Constants - Failure/Success/Error</a></p>
</li>
</ul>
<div id="ARPLS72149" class="tblformal">
<p class="titleintable"><a id="sthref3566"></a><a id="CHDFDHCC"></a>Table 50-1 DBMS_DBFS_HS Constants - Used by the CREATESTORE Procedure</p>
<table class="cellalignment4330" title="DBMS_DBFS_HS Constants - Used by the CREATESTORE Procedure" summary="This table describes DBMS_DBFS_HS Constants - Chunk Status Value" dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t3">Constant</th>
<th class="cellalignment4328" id="r1c2-t3">Type</th>
<th class="cellalignment4328" id="r1c3-t3">Value</th>
<th class="cellalignment4328" id="r1c4-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t3" headers="r1c1-t3">
<p><code dir="ltr">STORETYPE_TAPE</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t3 r1c2-t3">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t3 r1c3-t3">
<p><code dir="ltr">&#39;HS_TAPE&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t3 r1c4-t3">
<p>Use tape as a storage tier</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t3" headers="r1c1-t3">
<p><code dir="ltr">STORETYPE_AMAZONS3</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t3 r1c2-t3">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t3 r1c3-t3">
<p><code dir="ltr">&#39;HS_S3&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t3 r1c4-t3">
<p>Use Amazon S3 Web service as a storage tier</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS72150" class="tblformal">
<p class="titleintable"><a id="sthref3567"></a><a id="BABCFBIC"></a>Table 50-2 DBMS_DBFS_HS Constants - Used by the SETSTOREPROPERTY Procedure and the GETSTOREPROPERTY Function</p>
<table class="cellalignment4330" title="DBMS_DBFS_HS Constants - Used by the SETSTOREPROPERTY Procedure and the GETSTOREPROPERTY Function" summary="This table describes DBMS_DBFS_HS Constants - Chunk Status Value" dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t4">Constant</th>
<th class="cellalignment4328" id="r1c2-t4">Type</th>
<th class="cellalignment4328" id="r1c3-t4">Value</th>
<th class="cellalignment4328" id="r1c4-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPNAME_BUCKET</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;BUCKET&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t4 r1c4-t4">
<p>Specifies the AWS bucket to be used as a storage tier by the Hierarchical Store.</p>
<p>Restrictions on bucket name are:</p>
<p>1) Bucket names can only contain lowercase letters, numbers, periods (<code dir="ltr">.</code>) and dashes(-). Note that underscores (<code dir="ltr">_</code>) are invalid.</p>
<p>2) Bucket names must start with a number or letter.</p>
<p>3) Bucket names cannot be in an IP address style (<code dir="ltr">192.168.5.4</code>).</p>
<p>4) Bucket names must be between 3 and 63 characters long.</p>
<p>5) Bucket names should not end with a dash.</p>
<p>6) Dashes cannot appear next to periods. For example, <code dir="ltr">my-.bucket.com</code> is invalid.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPNAME_CACHESIZE</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;CACHE_SIZE&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t4 r1c4-t4">
<p>Specifies the cumulative cache size used for the Hierarchical Store. This property is set by the <a href="#BABBEAAJ">CREATESTORE Procedure</a> and can be modified by the <a href="#BABJFGEH">RECONFIGCACHE Procedure</a>. It cannot be modified by the <a href="#BABIHJAD">SETSTOREPROPERTY Procedure</a>, though its value can be queried by the <a href="#BABIIAIB">GETSTOREPROPERTY Function</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPNAME_COMPRESSLEVEL</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;COMPRESSION_LEVEL&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t4 r1c4-t4">
<p>Use to enable compression of files stored in the DBFS hierarchical store. It specifies the compression level to be used for compressing the files</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPNAME_ENABLECLEANUPONDELETE</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;ENABLE_CLEANUP_ON_DELETE&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t4 r1c4-t4">
<p>If this property is set to &#39;<code dir="ltr">TRUE</code>&#39;, whenever the user invokes the <a href="d_dbfs_content.htm#CIHIHFHC">DELETEFILE Procedure</a> in the <a href="d_dbfs_content.htm#CHDHCHDJ">DBMS_DBFS_CONTENT</a> interface on a file residing in the <code dir="ltr">DBMS_DBFS_HS</code> store, the <code dir="ltr">DBMS_DBFS_HS</code> removes the file on the external storage that contains this user file, provided that the file has no other useful data.By default, the property is set to &#39;<code dir="ltr">TRUE</code>&#39; for <code dir="ltr">STORETYPE_AMAZONS3</code> and &#39;<code dir="ltr">FALSE</code>&#39; for <code dir="ltr">STORETYPE_TAPE.</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPNAME_HTTPPROXY</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;HTTP_PROXY&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t4 r1c4-t4">
<p>Specifies the DNS name of the HTTP proxy, if any, that is needed to access the Amazon S3 storage service</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPNAME_LICENSEID</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;LICENSE_ID&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t4 r1c4-t4">
<p>Specifies the license ID associated with the library <code dir="ltr">libosbws11.so</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPNAME_LOBCACHE_QUOTA</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;LOBCACHE_QUOTA&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t4 r1c4-t4">
<p>Specifies fraction of the <code dir="ltr">cache_size</code> which is allocated for level 1 cache. The default value of this parameter is <code dir="ltr">NULL</code> which means that 0.8 (= 80%) of the cache_size is used for level 1 cache.</p>
<p>This property cannot be modified by the <a href="#BABIHJAD">SETSTOREPROPERTY Procedure</a>though its value can be queried by the <a href="#BABIIAIB">GETSTOREPROPERTY Function</a>. Its value is set by <a href="#BABBEAAJ">CREATESTORE Procedure</a> and can be modified by the <a href="#BABJFGEH">RECONFIGCACHE Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPNAME_MEDIAPOOL</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;MEDIA_POOL&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t4 r1c4-t4">
<p>Specifies the media pool number to use for storing the content</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPVAL_COMPLVL_NONE</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;NONE&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t4 r1c4-t4">
<p>Indicates no compression</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPVAL_COMPLVL_LOW</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;LOW&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t4 r1c4-t4">
<p>Use to set the compression level to <code dir="ltr">LOW</code>. This is expected to have the best performance while still providing a good compression ratio.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPVAL_COMPLVL_MEDIUM</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;MEDIUM&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t4 r1c4-t4">
<p>Use to set the compression level to <code dir="ltr">MEDIUM</code>. This compression level is expected to provide better compression ratio than LOW but the time required for compression will be higher than compression level <code dir="ltr">LOW</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPVAL_COMPLVL_HIGH</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;HIGH&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t4 r1c4-t4">
<p>Use to set the compression level to <code dir="ltr">HIGH</code>. This compression level is expected to provide the best compression ratio but compression time will in general be highest among the 3 compression levels.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPNAME_OPTTARBALLSIZE</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;OPTIMAL_TARBALL_SIZE&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t4 r1c4-t4">
<p>Specifies <code dir="ltr">optimal_tarball_size</code> as the maximum possible size of an archive file.</p>
<p>Multiple content files are bundled together into one archive file and then the archive file is transferred to tape or Amazon S3. This is because creating one file on tape or Amazon S3 for every content file in the store is a prohibitively expensive operation.</p>
<p>This property cannot be modified by the <a href="#BABIHJAD">SETSTOREPROPERTY Procedure</a>though its value can be queried by the <a href="#BABIIAIB">GETSTOREPROPERTY Function</a>. Its value is set by <a href="#BABBEAAJ">CREATESTORE Procedure</a> and can be modified by the <a href="#BABJFGEH">RECONFIGCACHE Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPNAME_READCHUNKSIZE</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;READ_CHUNK_SIZE&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t4 r1c4-t4">
<p>Specifies the size used by the SBT protocol to transfer data from tape or S3.This chunk is allocated in memory per transaction for retrieval of content files from an archive store, so the value of this property should be conservative. The default size of 1MB is typically good for most users.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPNAME_S3HOST</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;S3_HOST&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t4 r1c4-t4">
<p>Specifies the <code dir="ltr">HOST</code> name of the Amazon S3 storage service. It must be <code dir="ltr">s3.amazonaws.com</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPNAME_SBT_LIBRARY</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;SBT_LIBRARY&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t4 r1c4-t4">
<p>Specifies the path of the shared library used by RMAN to communicate with Amazon S3. It is named <code dir="ltr">libosbws11.so</code> and is available in <code dir="ltr">rdbms/lib</code> directory.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPNAME_STREAMABLE</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;STREAMABLE&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t4 r1c4-t4">
<p>Indicates whether buffer-based <code dir="ltr">PUT</code> or <code dir="ltr">GET</code> should be done on this store. Valid values for are <code dir="ltr">TRUE</code> and <code dir="ltr">FALSE</code>. The default value of this property is <code dir="ltr">TRUE</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r19c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPNAME_WALLET</code></p>
</td>
<td class="cellalignment4329" headers="r19c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r19c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;WALLET&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r19c1-t4 r1c4-t4">
<p>The value of this property should be of the form:</p>
<p><code dir="ltr">LOCATION</code><code dir="ltr">=</code><code dir="ltr">file:</code><code dir="ltr"><span class="codeinlineitalic">filename</span></code> <code dir="ltr">CREDENTIAL_ALIAS</code><code dir="ltr">=</code><code dir="ltr"><span class="codeinlineitalic">access/secret_alias</span></code></p>
<p><code dir="ltr">PROXY_AUTH_ALIAS</code><code dir="ltr">=</code><code dir="ltr"><span class="codeinlineitalic">proxyusername/password alias</span></code></p>
<p>Defines the Oracle Wallet which contains the credentials of the Amazon S3 account associated with the store under consideration.</p>
<p><code dir="ltr">LOCATION</code>: The directory path that contains the Oracle wallet. The format is <code dir="ltr">file:</code><code dir="ltr"><span class="codeinlineitalic">directory-path</span></code></p>
<p>The format of <code dir="ltr">wallet_path</code> in Windows is, for example:</p>
<p><code dir="ltr">file:c:\WINNT\Profiles\</code><code dir="ltr"><span class="codeinlineitalic">username</span></code>\<code dir="ltr">WALLETS</code></p>
<p>In UNIX or Linux it is, for example:</p>
<p><code dir="ltr">file:/home</code>/<code dir="ltr"><span class="codeinlineitalic">username</span></code>/<code dir="ltr">wallets</code></p>
<p>When the package is executed in the Oracle database server, the wallet is accessed from the database server.</p>
<p><code dir="ltr">PASSWORD</code>: Defines the wallet password. If <code dir="ltr">auto-login</code> is enabled in wallet (this can be changed using the <code dir="ltr">OWM</code> utility), this parameter does not have to be specified. By default, the <code dir="ltr">mkstore</code> utility enables <code dir="ltr">auto-login</code>.</p>
<p><code dir="ltr">CREDENTIAL_ALIAS</code>: Defines the credential alias for <code dir="ltr">ACCESS_KEY</code> and <code dir="ltr">SECRET_KEY</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r20c1-t4" headers="r1c1-t4">
<p><code dir="ltr">PROPNAME_WRITECHUNKSIZ</code></p>
</td>
<td class="cellalignment4329" headers="r20c1-t4 r1c2-t4">
<p><code dir="ltr">VARCHAR2(50)</code></p>
</td>
<td class="cellalignment4329" headers="r20c1-t4 r1c3-t4">
<p><code dir="ltr">&#39;WRITE_CHUNK_SIZE&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r20c1-t4 r1c4-t4">
<p>Specifies the size used by the SBT protocol to transfer data to tape or S3.</p>
<p>This chunk is allocated in memory per transaction for <code dir="ltr">PUT</code> of Content Files to an archive store so the value should be conservative.</p>
<p>The default size of 1MB is typically good for most users.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS72151" class="tblformal">
<p class="titleintable"><a id="sthref3568"></a><a id="BABJFIDC"></a>Table 50-3 DBMS_DBFS_HS Constants - Used by the REGISTERSTORECOMMAND Function</p>
<table class="cellalignment4330" title="DBMS_DBFS_HS Constants - Used by the REGISTERSTORECOMMAND Function" summary="This table describes DBMS_DBFS_HS Constants - Chunk Status Value" dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t5">Constant</th>
<th class="cellalignment4328" id="r1c2-t5">Type</th>
<th class="cellalignment4328" id="r1c3-t5">Value</th>
<th class="cellalignment4328" id="r1c4-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t5" headers="r1c1-t5">
<p><code dir="ltr">BEFORE_PUT</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t5 r1c2-t5">
<p><code dir="ltr">NUMBER</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t5 r1c3-t5">
<p><code dir="ltr">&#39;1&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t5 r1c4-t5">
<p>Specified operation must be performed before writing a <code dir="ltr">SECUREFILE</code> to the remote store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t5" headers="r1c1-t5">
<p><code dir="ltr">BEFORE_GET</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t5 r1c2-t5">
<p><code dir="ltr">NUMBER</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t5 r1c3-t5">
<p><code dir="ltr">&#39;2&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t5 r1c4-t5">
<p>Specified operation must be performed before a retrieval operation such as reading a <code dir="ltr">SECUREFILE</code> from the remote device</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS72152" class="tblformal">
<p class="titleintable"><a id="sthref3569"></a><a id="BABCDHHE"></a>Table 50-4 DBMS_DBFS_HS Constants - Failure/Success/Error</p>
<table class="cellalignment4330" title="DBMS_DBFS_HS Constants - Failure/Success/Error" summary="This table describes DBMS_DBFS_HS Constants - Chunk Status Value" dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t6">Constant</th>
<th class="cellalignment4328" id="r1c2-t6">Type</th>
<th class="cellalignment4328" id="r1c3-t6">Value</th>
<th class="cellalignment4328" id="r1c4-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t6" headers="r1c1-t6">
<p><code dir="ltr">FAIL</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t6 r1c2-t6">
<p><code dir="ltr">NUMBER</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t6 r1c3-t6">
<p><code dir="ltr">&#39;0&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t6 r1c4-t6">
<p>Procedure or function did not execute successfully</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t6" headers="r1c1-t6">
<p><code dir="ltr">SUCCESS</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t6 r1c2-t6">
<p><code dir="ltr">NUMBER</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t6 r1c3-t6">
<p><code dir="ltr">&#39;1&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t6 r1c4-t6">
<p>Procedure or function completed successfully</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t6" headers="r1c1-t6">
<p><code dir="ltr">ERROR</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t6 r1c2-t6">
<p><code dir="ltr">NUMBER</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t6 r1c3-t6">
<p><code dir="ltr">&#39;2&#39;</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t6 r1c4-t6">
<p>Procedure or function returned an error</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72153" class="refsect2"><a id="BABIEFII"></a>
<h3 class="refsect2">Operational Notes</h3>
<p>When the <code dir="ltr">DBMS_DBFS_HS</code> package is executed in the Oracle database server, the wallet is accessed from the database server.</p>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="BABIHDAC"></a>
<div id="ARPLS72091" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Summary of DBMS_DBFS_HS Subprograms</h2>
<div id="ARPLS72154" class="tblformal">
<p class="titleintable"><a id="sthref3570"></a><a id="BABJCGFC"></a>Table 50-5 DBMS_DBFS_HS Package Subprograms</p>
<table class="cellalignment4330" title="DBMS_DBFS_HS Package Subprograms" summary="DBMS_DBFS_HS Package Subprograms" dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t7">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t7" headers="r1c1-t7">
<p><a href="#BABIBGFG">CLEANUPUNUSEDBACKUPFILES Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t7 r1c2-t7">
<p>Removes files created on the external storage device that hold no currently used data</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t7" headers="r1c1-t7">
<p><a href="#BABJCGCE">CREATEBUCKET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t7 r1c2-t7">
<p>Creates an AWS bucket, associated with a store of type <code dir="ltr">STORETYPE_AMAZONS3</code> into which the Hierarchical Store can then move data</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t7" headers="r1c1-t7">
<p><a href="#BABBEAAJ">CREATESTORE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t7 r1c2-t7">
<p>Creates a new hierarchical store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t7" headers="r1c1-t7">
<p><a href="#BABGABDD">DEREGSTORECOMMAND Function</a></p>
</td>
<td class="cellalignment4329" headers="r5c1-t7 r1c2-t7">
<p>Removes a command that had been previously associated with a store through the <a href="#BABJFGEH">RECONFIGCACHE Procedure</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t7" headers="r1c1-t7">
<p><a href="#BABGDHIJ">DROPSTORE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r6c1-t7 r1c2-t7">
<p>Deletes a previously created hierarchical store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t7" headers="r1c1-t7">
<p><a href="#BABGCAJE">FLUSHCACHE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r7c1-t7 r1c2-t7">
<p>Flushes (writes out) dirty contents from the level-1 cache.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t7" headers="r1c1-t7">
<p><a href="#BABIIAIB">GETSTOREPROPERTY Function</a></p>
</td>
<td class="cellalignment4329" headers="r8c1-t7 r1c2-t7">
<p>Retrieves the values of a property of a store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t7" headers="r1c1-t7">
<p><a href="#BABJFGEH">RECONFIGCACHE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r9c1-t7 r1c2-t7">
<p>Reconfigures the parameters of the database cache used by the store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t7" headers="r1c1-t7">
<p><a href="#BABEICFJ">REGISTERSTORECOMMAND Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r10c1-t7 r1c2-t7">
<p>Registers commands for a store with the Hierarchical Store to be sent to the Media Manager for the external storage device associated with the store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t7" headers="r1c1-t7">
<p><a href="#BABDBADI">SENDCOMMAND Procedures</a></p>
</td>
<td class="cellalignment4329" headers="r11c1-t7 r1c2-t7">
<p>Sends a command to be executed on the external storage device&#39;s Media Manager</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t7" headers="r1c1-t7">
<p><a href="#BABIHJAD">SETSTOREPROPERTY Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r12c1-t7 r1c2-t7">
<p>Stores properties of a store in the database</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t7" headers="r1c1-t7">
<p><a href="#BABJBICH">STOREPUSH Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r13c1-t7 r1c2-t7">
<p>Pushes locally staged data to the remote storage</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS72155" class="refsect2"><a id="BABIBGFG"></a>
<h3 class="refsect2"><a id="sthref3571"></a>CLEANUPUNUSEDBACKUPFILES Procedure</h3>
<p>This procedure removes files created on the external storage device that hold no currently used data in them.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3572"></a>Syntax</p>
<pre dir="ltr">DBMS_DBFS_HS.CLEANUPUNUSEDBACKUPFILES (
   store_name     IN     VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3573"></a>Parameters</p>
<div id="ARPLS72156" class="tblformal">
<p class="titleintable"><a id="sthref3574"></a><a id="sthref3575"></a>Table 50-6 CLEANUPUNUSEDBACKUPFILES Procedure Parameters</p>
<table class="cellalignment4330" title="CLEANUPUNUSEDBACKUPFILES Procedure Parameters" summary="This table describes the Parameters of DBMS_DBFS_HS.CLEANUPUNUSEDBACKUPFILES subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t8">Parameter</th>
<th class="cellalignment4328" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t8" headers="r1c1-t8">
<p><code dir="ltr">store_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t8 r1c2-t8">
<p>Name of store</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3576"></a>Usage Notes</p>
<ul>
<li>
<p>The action of removing files from external storage device can not be rolled back.</p>
</li>
<li>
<p>This method can be executed periodically to clear space on the external storage device. Asynchronously deleting content from the external storage device is useful because it has minimal impact on the OLTP performance. The periodic scheduling can be accomplished using the DBMS_SCHEDULER package.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72157" class="refsect2"><a id="BABJCGCE"></a>
<h3 class="refsect2"><a id="sthref3577"></a>CREATEBUCKET Procedure</h3>
<p>This procedure creates an AWS bucket, associated with a store of type <code dir="ltr">STORETYPE_AMAZONS3</code> into which the Hierarchical Store can then move data.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3578"></a>Syntax</p>
<pre dir="ltr">DBMS_DBFS_HS.CREATEBUCKET  (
   store_name    IN     VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3579"></a>Parameters</p>
<div id="ARPLS72158" class="tblformal">
<p class="titleintable"><a id="sthref3580"></a><a id="sthref3581"></a>Table 50-7 CREATEBUCKET Procedure Parameters</p>
<table class="cellalignment4330" title="CREATEBUCKET Procedure Parameters" summary="This table describes the Parameters of DBMS_DBFS_HS.CREATEBUCKET subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t9">Parameter</th>
<th class="cellalignment4328" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t9" headers="r1c1-t9">
<p><code dir="ltr">store_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t9 r1c2-t9">
<p>Name of store</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3582"></a>Usage Notes</p>
<ul>
<li>
<p>The <code dir="ltr">PROPNAME_BUCKET</code> property of the store should be set before this subprogram is called.</p>
</li>
<li>
<p>Once this procedure has successfully created a bucket in Amazon S3, the bucket can only be deleted using out-of-band methods, such as logging-in to S3 and deleting data (directories, files, and other items) for the bucket.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72159" class="refsect2"><a id="BABBEAAJ"></a>
<h3 class="refsect2"><a id="sthref3583"></a>CREATESTORE Procedure</h3>
<p>This procedure creates a new hierarchical store <code dir="ltr">store_name</code> of type <code dir="ltr">STORE_TYPE</code> (<code dir="ltr">STORETYPE_TAPE</code> or <code dir="ltr">STORETYPE_AMAZONS3</code>) in schema <code dir="ltr">schema_name</code> (defaulting to current schema) under the ownership of the invoking session user.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3584"></a>Syntax</p>
<pre dir="ltr">DBMS_DBFS_HS.CREATESTORE  (
   store_name              IN     VARCHAR2,
   store_type              IN     VARCHAR2,
   tbl_name                IN     VARCHAR2,
   tbs_name                IN     VARCHAR2,
   cache_size              IN     NUMBER,
   lob_cache_quota         IN     NUMBER DEFAULT NULL,
   optimal_tarball_size    IN     NUMBER DEFAULT NULL,
   schema_name             IN     VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3585"></a>Parameters</p>
<div id="ARPLS72160" class="tblformal">
<p class="titleintable"><a id="sthref3586"></a><a id="sthref3587"></a>Table 50-8 CREATESTORE Procedure Parameters</p>
<table class="cellalignment4330" title="CREATESTORE Procedure Parameters" summary="This table describes the Parameters of DBMS_DBFS_HS.CREATEREPOSITORY subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t10">Parameter</th>
<th class="cellalignment4328" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t10" headers="r1c1-t10">
<p><code dir="ltr">store_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t10 r1c2-t10">
<p>Name of store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t10" headers="r1c1-t10">
<p><code dir="ltr">store_type</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t10 r1c2-t10">
<p><code dir="ltr">STORETYPE_TAPE</code> or <code dir="ltr">STORETYPE_AMAZONS3</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t10" headers="r1c1-t10">
<p><code dir="ltr">tbl_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t10 r1c2-t10">
<p>Table for store entries</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t10" headers="r1c1-t10">
<p><code dir="ltr">tbs_name</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t10 r1c2-t10">
<p>Tablespace for the store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t10" headers="r1c1-t10">
<p><code dir="ltr">cache_size</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t10 r1c2-t10">
<p>Amount of space used by the store to cache content in given tablespace</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t10" headers="r1c1-t10">
<p><code dir="ltr">lob_cache_quota</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t10 r1c2-t10">
<p>Fraction of the cache_size which is allocated for level 1 cache. The default value of this parameter is <code dir="ltr">NULL</code> which means that 0.8 (= 80%) of the <code dir="ltr">cache_size</code> is used for level 1 cache.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t10" headers="r1c1-t10">
<p><code dir="ltr">optimal_tarball_size</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t10 r1c2-t10">
<p>Maximum possible size of the archive file.</p>
<p>Multiple content files are bundled together into one archive file, and then the archive file is transferred to tape or Amazon S3. This is because creating one file on tape or Amazon S3 for every content file in the store is a prohibitively expensive operation.</p>
<p>The value of is set by default to 10GB for tape and to 100MB for Amazon S3.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t10" headers="r1c1-t10">
<p><code dir="ltr">schema_name</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t10 r1c2-t10">
<p>Schema for the store</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3588"></a>Usage Notes</p>
<p><code dir="ltr">CREATESTORE()</code> sets certain properties of the store to default values. The user can use the methods <code dir="ltr">SETSTOREPROPERTY()</code> and <code dir="ltr">RECONFIGCACHE()</code> to appropriately change the property values and to set other properties of the store.</p>
<ul>
<li>
<p>Store names must be unique for an owner. The same store names can be used for different stores owned by different owners.</p>
</li>
<li>
<p>Once a table space has been specified to store the store&#39;s content in a database, it cannot be changed later.</p>
</li>
<li>
<p>This subprogram will execute like a DDL statement, performing an automatic <code dir="ltr">COMMIT</code> before and after execution.</p>
</li>
<li>
<p>Stores using <code dir="ltr">DBMS_DBFS_HS</code> must not use singleton mount. This means that the singleton parameter should be <code dir="ltr">FALSE</code> and the <code dir="ltr">store_mount</code> parameter should have a non-<code dir="ltr">NULL</code> value in a call to the <code dir="ltr">DBMS_DBFS_CONTENT</code>.<code dir="ltr">MOUNTSTORE</code> procedure.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72161" class="refsect2"><a id="BABGABDD"></a>
<h3 class="refsect2"><a id="sthref3589"></a>DEREGSTORECOMMAND Function</h3>
<p>This procedure removes a command that had been previously associated with a store through the <a href="#BABEICFJ">REGISTERSTORECOMMAND Procedure</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3590"></a>Syntax</p>
<pre dir="ltr">DBMS_DBFS_HS.DEREGSTORECOMMAND (
   store_name      IN     VARCHAR2,
   message         IN     VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3591"></a>Parameters</p>
<div id="ARPLS72162" class="tblformal">
<p class="titleintable"><a id="sthref3592"></a><a id="sthref3593"></a>Table 50-9 DEREGSTORECOMMAND Procedure Parameters</p>
<table class="cellalignment4330" title="DEREGSTORECOMMAND Procedure Parameters" summary="This table describes the Parameters of DBMS_DBFS_HS.DEREGREPOSCOMMAND subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t11">Parameter</th>
<th class="cellalignment4328" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t11" headers="r1c1-t11">
<p><code dir="ltr">store_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t11 r1c2-t11">
<p>Name of store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t11" headers="r1c1-t11">
<p><code dir="ltr">message</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t11 r1c2-t11">
<p>Message to be deregistered</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3594"></a>Usage Notes</p>
<p>If this subprogram successfully executes, its actions cannot be rolled back by the user. If the user wants to restore the previous state, the user must call the <a href="#BABEICFJ">REGISTERSTORECOMMAND Procedure</a>.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72163" class="refsect2"><a id="BABGDHIJ"></a>
<h3 class="refsect2"><a id="sthref3595"></a>DROPSTORE Procedure</h3>
<p>This procedure deletes a previously created hierarchical store specified by name and owned by the invoking session user.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3596"></a>Syntax</p>
<pre dir="ltr">DBMS_DBFS_HS.DROPSTORE  (
   store_name   IN     VARCHAR2,
   opt_flags    IN     INTEGER DEFAULT 0);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3597"></a>Parameters</p>
<div id="ARPLS72164" class="tblformal">
<p class="titleintable"><a id="sthref3598"></a><a id="sthref3599"></a>Table 50-10 DROPSTORE Procedure Parameters</p>
<table class="cellalignment4330" title="DROPSTORE Procedure Parameters" summary="This table describes the Parameters of DBMS_DBFS_HS.DROPREPOSITORY subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t12">Parameter</th>
<th class="cellalignment4328" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t12" headers="r1c1-t12">
<p><code dir="ltr">store_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t12 r1c2-t12">
<p>Name of store owned by the invoking session user</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t12" headers="r1c1-t12">
<p><code dir="ltr">opt_flags</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t12 r1c2-t12">
<p>User can specify optional flags. If <code dir="ltr">DISABLE_CLEANUPBACKUPFILES</code> is specified as one of the optional flags, the call to the <a href="#BABIBGFG">CLEANUPUNUSEDBACKUPFILES Procedure</a> is not issued. By default, when this flag is not set, the procedure implicitly cleans-up all unused backup files.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3600"></a>Usage Notes</p>
<ul>
<li>
<p>The procedure executes like a DDL in that it auto-commits before and after its execution.</p>
</li>
<li>
<p>If <code dir="ltr">CLEANUPBACKUPFILES</code> is disabled during the procedure, the user must resort to out-of-band techniques to cleanup unused backup files. No further invocations of <code dir="ltr">CLEANUPBACKFILES</code> for a dropped store are possible through hierarchical store.</p>
</li>
<li>
<p>This subprogram will un-register the store from <code dir="ltr">DBMS_DBFS_CONTENT</code> package. All files in the given store are deleted from the store (Tape or Amazon S3 Web service). The database table holding the store&#39;s entries in the database, is also dropped by this subprogram.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72175" class="refsect2"><a id="BABGCAJE"></a>
<h3 class="refsect2"><a id="sthref3601"></a>FLUSHCACHE Procedure</h3>
<p>This procedure flushes out dirty contents from level-1 cache, which can be locked, to level-2 cache, thereby freeing-up space in level 1 cache.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3602"></a>Syntax</p>
<pre dir="ltr">DBMS_DBFS_HS.FLUSHCACHE  (
   store_name    IN     VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3603"></a>Parameters</p>
<div id="ARPLS72176" class="tblformal">
<p class="titleintable"><a id="sthref3604"></a><a id="sthref3605"></a>Table 50-11 FLUSHCACHE Procedure Parameters</p>
<table class="cellalignment4330" title="FLUSHCACHE Procedure Parameters" summary="This table describes the Parameters of DBMS_DBFS_HS.CFLUSHCACHE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t13">Parameter</th>
<th class="cellalignment4328" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t13" headers="r1c1-t13">
<p><code dir="ltr">store_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t13 r1c2-t13">
<p>Name of store</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72165" class="refsect2"><a id="BABIIAIB"></a>
<h3 class="refsect2"><a id="sthref3606"></a>GETSTOREPROPERTY Function</h3>
<p>This function retrieves the values of a property.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3607"></a>Syntax</p>
<pre dir="ltr">DBMS_DBFS_HS.GETSTOREPROPERTY  (
   store_name      IN     VARCHAR2,
   property_name   IN     VARCHAR2,
   noexcp          IN     BOOLEAN DEFAULT FALSE) RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3608"></a>Parameters</p>
<div id="ARPLS72166" class="tblformal">
<p class="titleintable"><a id="sthref3609"></a><a id="sthref3610"></a>Table 50-12 GETSTOREPROPERTY Function Parameters</p>
<table class="cellalignment4330" title="GETSTOREPROPERTY Function Parameters" summary="This table describes the Parameters of DBMS_DBFS_HS.SETREPOSPROPERTY subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t14">Parameter</th>
<th class="cellalignment4328" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t14" headers="r1c1-t14">
<p><code dir="ltr">store_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t14 r1c2-t14">
<p>Name of store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t14" headers="r1c1-t14">
<p><code dir="ltr">property_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t14 r1c2-t14">
<p>Name of property</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t14" headers="r1c1-t14">
<p><code dir="ltr">noexcp</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t14 r1c2-t14">
<p>If set to <code dir="ltr">FALSE</code>, raises an exception if the property does not exist in the database. If <code dir="ltr">noexcp</code> is set to <code dir="ltr">TRUE</code>, returns <code dir="ltr">NULL</code> if the property does not exist.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3611"></a>Return Values</p>
<p>The values of a property.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3612"></a>Usage Notes</p>
<p>The specified store must already have been created.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72167" class="refsect2"><a id="BABJFGEH"></a>
<h3 class="refsect2"><a id="sthref3613"></a>RECONFIGCACHE Procedure</h3>
<p>This procedure reconfigures the parameters of the database cache being used by the store.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3614"></a>Syntax</p>
<pre dir="ltr">DBMS_DBFS_HS.RECONFIGCACHE (
   store_name              IN    VARCHAR2,
   cache_size              IN    NUMBER DEFAULT NULL,
   lobcache_quota          IN    NUMBER DEFAULT NULL,
   optimal_tarball_size    IN    NUMBER DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3615"></a>Parameters</p>
<div id="ARPLS72168" class="tblformal">
<p class="titleintable"><a id="sthref3616"></a><a id="sthref3617"></a>Table 50-13 RECONFIGCACHE Procedure Parameters</p>
<table class="cellalignment4330" title="RECONFIGCACHE Procedure Parameters" summary="This table describes the Parameters of DBMS_DBFS_HS.R RECONFIGCACHE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t15">Parameter</th>
<th class="cellalignment4328" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t15" headers="r1c1-t15">
<p><code dir="ltr">store_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t15 r1c2-t15">
<p>Name of store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t15" headers="r1c1-t15">
<p><code dir="ltr">cache_size</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t15 r1c2-t15">
<p>Cumulative cache size used for the Hierarchical Store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t15" headers="r1c1-t15">
<p><code dir="ltr">lobcache_quota</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t15 r1c2-t15">
<p>Fraction of the cache size that are assigned to level 1 cache</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t15" headers="r1c1-t15">
<p><code dir="ltr">optimal_tarball_size</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t15 r1c2-t15">
<p>Maximum possible size of an archive file. Since creating one file for every content file in the store is a prohibitively expensive operation, multiple content files are bundled together into one archive file for transfer to tape or Amazon S3.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3618"></a>Usage Notes</p>
<ul>
<li>
<p>The specified store must already have been created before reconfiguration.</p>
</li>
<li>
<p>The Hierarchical Store uses a level 1 cache and a level 2 cache. The level 1 cache subsumes most of the working set and the level 2 cache is used to perform bulk writes to the backend device.</p>
</li>
<li>
<p>If any of the last 3 parameters is <code dir="ltr">NULL</code>, its value specified during store creation is used. If the parameter was <code dir="ltr">NULL</code> when the call to the <a href="#BABBEAAJ">CREATESTORE Procedure</a> was issued, the <code dir="ltr">DBMS_DBFS_HS</code> package assigns a default value.</p>
<p>The <code dir="ltr">DBMS_DBFS_HS</code> package optimistically tries to allocate more than 1 tarball&#39;s worth of size for level 2 cache to facilitate concurrency, though a minimum of 1 tarball size is necessary for level 2 cache.</p>
<p>The values for cumulative cache size and LOB cache quota decide allocation of space for the two caches. If values are not provided, a user might see an <code dir="ltr">INSUFFICIENT_CACHE</code> exception. In that case, it is better to revise the cache parameters in order to have a working store.</p>
</li>
<li>
<p>If this subprogram successfully executes, its actions cannot be rolled back by the user. In that case, the user should call <code dir="ltr">RECONFIGCACHE</code> again with new or modified parameters.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72177" class="refsect2"><a id="BABEICFJ"></a>
<h3 class="refsect2"><a id="sthref3619"></a>REGISTERSTORECOMMAND Procedure</h3>
<p>This procedure registers commands for a store with the Hierarchical Store. These commands are sent to the Media Manager for the external storage device associated with the store.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3620"></a>Syntax</p>
<pre dir="ltr">DBMS_DBFS_HS.REGISTERSTORECOMMAND (
   store_name      IN     VARCHAR2,
   message         IN     VARCHAR2,
   flags           IN     NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3621"></a>Parameters</p>
<div id="ARPLS72178" class="tblformal">
<p class="titleintable"><a id="sthref3622"></a><a id="sthref3623"></a>Table 50-14 REGISTERSTORECOMMAND Procedure Parameters</p>
<table class="cellalignment4330" title="REGISTERSTORECOMMAND Procedure Parameters" summary="This table describes the Parameters of DBMS_DBFS_HS.REGISTERSTORECOMMAND subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t16">Parameter</th>
<th class="cellalignment4328" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t16" headers="r1c1-t16">
<p><code dir="ltr">store_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t16 r1c2-t16">
<p>Name of store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t16" headers="r1c1-t16">
<p><code dir="ltr">message</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t16 r1c2-t16">
<p>Message to be sent to the Media Manager of the external store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t16" headers="r1c1-t16">
<p><code dir="ltr">flags</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t16 r1c2-t16">
<p>Valid values:</p>
<ul>
<li>
<p><code dir="ltr">BEFORE_PUT</code> <code dir="ltr">CONSTANT</code> <code dir="ltr">NUMBER</code> <code dir="ltr">:= 1</code>;</p>
</li>
<li>
<p><code dir="ltr">BEFORE_GET</code> <code dir="ltr">CONSTANT</code> <code dir="ltr">NUMBER</code> <code dir="ltr">:= 2</code>;</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3624"></a>Usage Notes</p>
<ul>
<li>
<p>These commands are sent before the next read or write of content. When the Hierarchical Store wants to push (or get) data to (or from) the storage device, it begins a session (to communicate with the device). After beginning the session, it sends all registered commands for the to the relevant device before writing (or getting) any data.</p>
</li>
<li>
<p>If this method successfully executes, its actions cannot be rolled back by the user. To restore the previous state the user must call the <a href="#BABGABDD">DEREGSTORECOMMAND Function</a>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72171" class="refsect2"><a id="BABDBADI"></a>
<h3 class="refsect2"><a id="sthref3625"></a>SENDCOMMAND Procedures</h3>
<p>This procedure sends a command to be executed on the external storage device&#39;s Media Manager.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3626"></a>Syntax</p>
<pre dir="ltr">DBMS_DBFS_HS.SENDCOMMAND (
   store_name    IN       VARCHAR2,
   message       IN       VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3627"></a>Parameters</p>
<div id="ARPLS72172" class="tblformal">
<p class="titleintable"><a id="sthref3628"></a><a id="sthref3629"></a>Table 50-15 SENDCOMMAND Procedure Parameters</p>
<table class="cellalignment4330" title="SENDCOMMAND Procedure Parameters" summary="This table describes the Parameters of DBMS_ARCHIVE_PROVIDER.SENDCOMMANDsubprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t17">Parameter</th>
<th class="cellalignment4328" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t17" headers="r1c1-t17">
<p><code dir="ltr">store_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t17 r1c2-t17">
<p>Name of store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t17" headers="r1c1-t17">
<p><code dir="ltr">message</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t17 r1c2-t17">
<p>Message string to be executed</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72173" class="refsect2"><a id="BABIHJAD"></a>
<h3 class="refsect2"><a id="sthref3630"></a>SETSTOREPROPERTY Procedure</h3>
<p>This procedure stores properties of a store in the database as name-value pairs.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3631"></a>Syntax</p>
<pre dir="ltr">DBMS_DBFS_HS.SETSTOREPROPERTY  (
   store_name      IN     VARCHAR2,
   property_name   IN     VARCHAR2,
   property_value  IN     VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3632"></a>Parameters</p>
<div id="ARPLS72174" class="tblformal">
<p class="titleintable"><a id="sthref3633"></a><a id="sthref3634"></a>Table 50-16 SETSTOREPROPERTY Procedure Parameters</p>
<table class="cellalignment4330" title="SETSTOREPROPERTY Procedure Parameters" summary="This table describes the Parameters of DBMS_DBFS_HS.SETSTOREPROPERTY subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t18">Parameter</th>
<th class="cellalignment4328" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t18" headers="r1c1-t18">
<p><code dir="ltr">store_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t18 r1c2-t18">
<p>Name of store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t18" headers="r1c1-t18">
<p><code dir="ltr">property_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t18 r1c2-t18">
<p>For a store using Tape device, there are three properties whose values must be set by the user, and four properties that have default values. Stores of type <code dir="ltr">STORETYPE_AMAZONS3</code> have properties with default values. The various options for both types of stores are detailed under <code dir="ltr">property_value</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t18" headers="r1c1-t18">
<p><code dir="ltr">property_value</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t18 r1c2-t18">
<p><span class="bold">Stores using a Tape Device</span></p>
<p>The values for the following properties must be set by the user:</p>
<ul>
<li>
<p><code dir="ltr">PROPNAME_SBTLIBRARY</code> - This should point to the shared library used by RMAN to communicate with the external tape device. It is usually named <code dir="ltr">libobk.so</code>.</p>
</li>
<li>
<p><code dir="ltr">PROPNAME_MEDIAPOOL</code> - Media pool number for storing content</p>
</li>
<li>
<p><code dir="ltr">PROPNAME_CACHE_SIZE</code> - Amount of space, in bytes, used for the cache of this store</p>
</li>
</ul>
<p>The following properties, which have default values assigned to them when a store is created, benefit from tuning:</p>
<ul>
<li>
<p><code dir="ltr">PROPNAME_READCHUNKSIZE</code> and <code dir="ltr">PROPNAME_WRITECHUNKSIZE</code> - These are the sizes used by the SBT protocol to transfer data to and from the tapes. These chunks are allocated in memory per transaction, so the values should be conservative. The default size is 1MB.</p>
</li>
<li>
<p><code dir="ltr">PROPNAME_STREAMABLE</code> &ndash; Indicates whether <code dir="ltr">DBFS_LINK</code>s can perform read operations (for example <code dir="ltr">SELECT</code> or <code dir="ltr">DBMS_LOB.READ</code>) directly from the store, or if the data must be copied back into the database before it can be read</p>
</li>
<li>
<p><code dir="ltr">PROPNAME_ENABLECLEANUPONDELETE</code> - Indicates if <code dir="ltr">DBMS_DBFS_HS</code> should delete unused files on the external storage. Valid values for this property are &#39;<code dir="ltr">FALSE</code>&#39; for <code dir="ltr">STORETYPE_TAPE</code>.</p>
</li>
<li>
<p><code dir="ltr">PROPNAME_COMPRESSLEVEL</code> - Describes how files written to Tape should be compressed. It can be set to <code dir="ltr">PROPVAL_COMPLVL_NONE</code>, <code dir="ltr">PROPVAL_COMPLVL_LOW</code>, <code dir="ltr">PROPVAL_COMPLVL_MEDIUM</code> or <code dir="ltr">PROPVAL_COMPLVL_HIGH</code>. By default it is set to <code dir="ltr">PROPVAL_COMPLVL_NONE</code>.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t18" headers="r1c1-t18">
<p><code dir="ltr">(cont) property_value</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t18 r1c2-t18">
<p><span class="bold">Stores of type</span> <code dir="ltr"><span class="codeinlinebold">STORETYPE_AMAZONS3</span></code></p>
<p>It is mandatory that the following properties have assigned values, and default values are provided:</p>
<ul>
<li>
<p><code dir="ltr">PROPNAME_SBTLIBRARY</code> - Specifies the path of the shared library used by RMAN to communicate with Amazon S3. It is named <code dir="ltr">libosbws11.so</code> and is available in <code dir="ltr">rdbms/lib</code> directory.</p>
</li>
<li>
<p><code dir="ltr">PROPNAME_S3HOST</code> - Defines the HOST name of the Amazon S3 storage service. It must be <code dir="ltr">s3.amazonaws.com</code>.</p>
</li>
<li>
<p><code dir="ltr">PROPNAME_BUCKET</code> - Defines the AWS bucket used as a storage tier by the Hierarchical Store. Restrictions on bucket names are:</p>
<p>-- Bucket names can only contain lowercase letters, numbers, periods (<code dir="ltr">.</code>) and dashes (<code dir="ltr">-</code>). Use of an underscore (<code dir="ltr">_</code>) is invalid.</p>
<p>-- Bucket names must start with a number or letter</p>
<p>-- Bucket names cannot be in an IP address style (&#34;<code dir="ltr">192.168.5.4</code>&#34;)</p>
<p>-- Bucket names must be between 3 and 63 characters in length</p>
<p>-- Bucket names should not end with a dash</p>
<p>-- Dashes cannot appear next to periods. For example, &#34;<code dir="ltr">my-.bucket.com</code>&#34; is invalid.</p>
</li>
<li>
<p><code dir="ltr">PROPNAME_LICENSEID</code> - Specifies the license ID associated with the library <code dir="ltr">libosbws11.so</code>.</p>
</li>
<li>
<p><code dir="ltr">PROPNAME_WALLET</code> - Has the form: &#39;<code dir="ltr">LOCATION=file:&lt;filename&gt; CREDENTIAL_ALIAS=&lt;access/secret_alias&gt; PROXY_AUTH_ALIAS=&lt;proxyusername/password alias&gt;</code>&#39;</p>
<p>-- <code dir="ltr">LOCATION</code> - Directory path that contains the Oracle wallet. The format is <code dir="ltr">file:</code><code dir="ltr"><span class="codeinlineitalic">directory-path</span></code>. See <a href="#BABFDHEG">Examples</a> for variations in format.</p>
<p>-- <code dir="ltr">PASSWORD</code> - Defines the wallet password. If <code dir="ltr">auto-login</code> is enabled in the wallet (this can be changed using the user&#39;s own utility), and does not have to be specified. By default, the <code dir="ltr">mkstore</code> utility enables <code dir="ltr">auto-login</code>.</p>
<p>-- <code dir="ltr">CREDENTIAL_ALIAS</code> - Defines the credential alias for <code dir="ltr">ACCESS_KEY</code> and <code dir="ltr">SECRET_KEY</code></p>
<p>-- <code dir="ltr">PROXY_AUTH_ALIAS</code> - Defines authentication credentials for the proxy server, if applicable.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t18" headers="r1c1-t18">
<p><code dir="ltr">(property_value</code> (contd.)</p>
</td>
<td class="cellalignment4329" headers="r6c1-t18 r1c2-t18">
<p>The following properties are optional:</p>
<ul>
<li>
<p><code dir="ltr">PROPNAME_HTTPPROXY</code> - Defines the DNS name of the HTTP proxy, if any, that is needed to access the Amazon S3 storage service.</p>
</li>
<li>
<p><code dir="ltr">PROPNAME_STREAMABLE</code> &ndash; Indicates whether buffer-based <code dir="ltr">PUT</code> or <code dir="ltr">GET</code> operation should be done on this store. Valid values for this property are <code dir="ltr">TRUE</code> (default) and <code dir="ltr">FALSE</code>.</p>
</li>
<li>
<p><code dir="ltr">PROPNAME_ENABLECLEANUPONDELETE</code> - Indicates if <code dir="ltr">DBMS_DBFS_HS</code> should delete unused files on the external storage device. Default values for this property are <code dir="ltr">FALSE</code> for <code dir="ltr">STORETYPE_TAPE</code> and <code dir="ltr">TRUE</code> for <code dir="ltr">STORETYPE_AMAZONS3</code>.</p>
</li>
<li>
<p><code dir="ltr">PROPNAME_COMPRESSLEVEL</code> - Describes how files written to tape should be compressed. It can be set to <code dir="ltr">PROPVAL_COMPLVL_NONE</code>, <code dir="ltr">PROPVAL_COMPLVL_LOW</code>, <code dir="ltr">PROPVAL_COMPLVL_MEDIUM</code> or <code dir="ltr">PROPVAL_COMPLVL_HIGH</code>. By default it is set to <code dir="ltr">PROPVAL_COMPLVL_NONE</code>.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3635"></a>Usage Notes</p>
<ul>
<li>
<p>The specified store must already have been created.</p>
</li>
<li>
<p>If this subprogram successfully executes, its actions cannot be rolled back by the user.</p>
</li>
<li>
<p>The same property can be set multiple times to the same or different values using this subprogram</p>
</li>
<li>
<p>Regarding <code dir="ltr">PROPNAME_ENABLECLEANUPONDELETE</code> behavior, a job is created for each store by the <code dir="ltr">DBMS_DBFS_HS</code> to remove the unused files from the external storage. By default, the job is enabled for <code dir="ltr">STORETYPE_AMAZONS3</code> and is disabled for <code dir="ltr">STORETYPE_TAPE</code>. If the <code dir="ltr">ENABLECLEANUPONDELETE</code> property is set to <code dir="ltr">TRUE</code>, the job is enabled; if the property is set to <code dir="ltr">FALSE</code>, the job is disabled. If enabled, the job runs at an interval of one hour by default. The <code dir="ltr">DBMS_SCHEDULER</code> package can be used to modify the schedule. The name of the job can be obtained by querying <code dir="ltr">USER_DBFS_HS_FIXED_PROPERTIES</code> for <code dir="ltr">prop_name</code> <code dir="ltr">=</code> <code dir="ltr">&#39;DELJOB_NAME</code>&#39;.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABFDHEG"></a>Examples</p>
<p class="subhead2"><a id="ARPLS72179"></a>Format</p>
<p>The format of <code dir="ltr">wallet_path</code> in Windows is, for example:</p>
<pre dir="ltr">file:c:\WINNT\Profiles\&lt;username&gt;\WALLETS
</pre>
<p>The format of <code dir="ltr">wallet_path</code> in UNIX or Linux is, for example:</p>
<pre dir="ltr">file:/home/<span class="italic">username</span>/wallets
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72169" class="refsect2"><a id="BABJBICH"></a>
<h3 class="refsect2"><a id="sthref3636"></a>STOREPUSH Procedure</h3>
<p>This procedure pushes locally staged data to the remote storage.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3637"></a>Syntax</p>
<pre dir="ltr">DBMS_DBFS_HS.STOREPUSH (
   store_name   IN        VARCHAR2,
   path         IN        VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3638"></a>Parameters</p>
<div id="ARPLS72170" class="tblformal">
<p class="titleintable"><a id="sthref3639"></a><a id="sthref3640"></a>Table 50-17 STOREPUSH Procedure Parameters</p>
<table class="cellalignment4330" title="STOREPUSH Procedure Parameters" summary="This table describes the Parameters of DBMS_DBFS_HS.STOREPUSH subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t19">Parameter</th>
<th class="cellalignment4328" id="r1c2-t19">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t19" headers="r1c1-t19">
<p><code dir="ltr">store_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t19 r1c2-t19">
<p>Name of store whose content the client writes from local cache to the external store</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t19" headers="r1c1-t19">
<p><code dir="ltr">path</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t19 r1c2-t19">
<p>A non-mount qualified (without mount point) path within the store. By default, its value is <code dir="ltr">NULL</code> which corresponds to the root path of the store.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref3641"></a>Usage Notes</p>
<ul>
<li>
<p>The Hierarchical Store caches the content files locally in database tables. When enough content is amassed in the cache to make it efficient to write to the external storage device (or the cache is completely filled), the Hierarchical Store creates a tarball out of the local content and writes these tarballs as files on the external device. The size of the tarball created by the Hierarchical Store is controlled by the store property <code dir="ltr">PROPNAME_OPTTARBALLSIZE</code>.</p>
</li>
<li>
<p>When the amount of free space in the cache is such that the caching of a content file will push the space used above <code dir="ltr">cache_size</code>, the Hierarchical Store will internally call <code dir="ltr">STOREPUSH</code>. The <code dir="ltr">STOREPUSH</code> <code dir="ltr">Procedure</code> creates tarball(s) out of the existing dirty or modified content files in the cache and writes them out to the external device. A <code dir="ltr">STOREPUSH</code> call is not guaranteed to write all the dirty content from local cache to the external storage, since some files may be locked by other sessions.</p>
</li>
<li>
<p><code dir="ltr">STOREPUSH</code> has a built-in ability feature allowing it to automatically resume operation. If a <code dir="ltr">STOREPUSH</code> call is interrupted (say by a network outage) after it has transferred some tarballs to the external device, it can be restarted after the outage and will then resume transferring data from the point it was interrupted. In other words, work done before the outage is not lost. <code dir="ltr">STOREPUSH</code> can safely be restarted and the effect is such as if the outage never occurred.</p>
</li>
<li>
<p>If this method successfully executes, its actions cannot be rolled back by the user.</p>
</li>
<li>
<p>By default, when <code dir="ltr">path</code> is <code dir="ltr">NULL</code>, all files in the store are candidates for <code dir="ltr">STOREPUSH</code>. If <code dir="ltr">path</code> has a valid input value, all files which are under the namespace of given path are written from the local cache to the external store. If a given path is an existing file, it is pushed out again to the remote store.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4320">
<tr>
<td class="cellalignment4329">
<table class="cellalignment4325">
<tr>
<td class="cellalignment4324"><a href="d_dbfs_content_spi.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4324"><a href="d_dbfs_sfs.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4332">
<table class="cellalignment4323">
<tr>
<td class="cellalignment4324"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4324"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4324"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4324"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4324"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4324"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>