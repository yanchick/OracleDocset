<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2236"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBMS_COMPARISON"></a><title>DBMS_COMPARISON</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1086"/>
<meta name="dcterms.created" content="2016-09-02T5:36:10Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"/>
<meta name="dcterms.identifier" content="E41829-07"/>
<meta name="dcterms.isVersionOf" content="ARPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="d_cap_a.htm" title="Previous" type="text/html"/>
<link rel="Next" href="d_compress.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41829-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">39/290</span> <!-- End Header -->
<div id="ARPLS868" class="chapter"><a id="CHDHEFFJ"></a>
<h1 class="chapter"><span class="secnum">35</span> DBMS_COMPARISON</h1>
<p><a id="sthref1544"></a><a id="sthref1545"></a><a id="sthref1546"></a><a id="sthref1547"></a><a id="sthref1548"></a>The <code dir="ltr">DBMS_COMPARISON</code> package provides interfaces to compare and converge database objects at different databases.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDDJEDG">Using DBMS_COMPARISON</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Security Model</p>
</li>
<li>
<p>Constants</p>
</li>
<li>
<p>Views</p>
</li>
<li>
<p>Operational Notes</p>
</li>
</ul>
</li>
<li>
<p><a href="#CHDEJECH">Data Structures</a></p>
</li>
<li>
<p><a href="#CJHCBCCI">Summary of DBMS_COMPARISON Subprograms</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink STREP146" href="../STREP/man_comp.htm#STREP146"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for information about using the basic features of this package</p>
</li>
</ul>
</div>
<div class="refentry"><a id="CHDDJEDG"></a>
<div id="ARPLS65572" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Using DBMS_COMPARISON<a id="sthref1549"></a></h2>
<p>This section contains topics which relate to using the <code dir="ltr">DBMS_COMPARISON</code> package.</p>
<ul>
<li>
<p><a href="#CHDHEAHB">Overview</a></p>
</li>
<li>
<p><a href="#CJHFGCIH">Security Model</a></p>
</li>
<li>
<p><a href="#CHDJCJHI">Constants</a></p>
</li>
<li>
<p><a href="#CHDFFGEH">Views</a></p>
</li>
<li>
<p><a href="#CHDFBEJI">Operational Notes</a></p>
</li>
</ul>
<div id="ARPLS65573" class="refsect2"><a id="CHDHEAHB"></a>
<h3 class="refsect2">Overview</h3>
<p>The <code dir="ltr">DBMS_COMPARISON</code> package is an Oracle-supplied package that you can use to compare database objects at two databases. This package also enables you converge the database objects so that they are consistent at different databases. Typically, this package is used in environments that share a database object at multiple databases. When copies of the same database object exist at multiple databases, the database object is a <span class="bold">shared database object</span>. Several data dictionary views contain information about comparisons made with the <code dir="ltr">DBMS_COMPARISON</code> package.</p>
<p>Shared database objects might be maintained by data replication. For example, materialized views or Oracle Streams components might replicate the database objects and maintain them at multiple databases. A custom application might also maintain shared database objects. When a database object is shared, it can diverge at the databases that share it. You can use this package to identify differences in the shared database objects. After identifying the differences, you can optionally use this package to synchronize the shared database objects.</p>
<p>To compare a database object that is shared at two different databases, complete the following general steps:</p>
<ol>
<li>
<p>Run the <a href="#CHDCJIFD">CREATE_COMPARISON Procedure</a> in this package to create a <span class="bold">comparison</span>. The comparison identifies the database objects to compare and specifies parameters for the comparison.</p>
</li>
<li>
<p>Run the <a href="#CHDDFJBH">COMPARE Function</a> in this package to compare the database object at the two databases and identify differences. This function returns <code dir="ltr">TRUE</code> when no differences are found and <code dir="ltr">FALSE</code> when differences are found. This function also populates data dictionary views with comparison results. Separate comparison results are generated for each execution of the <code dir="ltr">COMPARE</code> function.</p>
</li>
<li>
<p>If you want to examine the comparison results, query the following data dictionary views:</p>
<ul>
<li>
<p><code dir="ltr">DBA_COMPARISON_SCAN</code></p>
</li>
<li>
<p><code dir="ltr">USER_COMPARISON_SCAN</code></p>
</li>
<li>
<p><code dir="ltr">DBA_COMPARISON_SCAN_VALUES</code></p>
</li>
<li>
<p><code dir="ltr">USER_COMPARISON_SCAN_VALUES</code></p>
</li>
<li>
<p><code dir="ltr">DBA_COMPARISON_ROW_DIF</code></p>
</li>
<li>
<p><code dir="ltr">USER_COMPARISON_ROW_DIF</code></p>
</li>
</ul>
</li>
<li>
<p>If there are differences, and you want to synchronize the database objects at the two databases, then run the <code dir="ltr">CONVERGE</code> procedure in this package.</p>
</li>
</ol>
<p>After you create a comparison with the <code dir="ltr">CREATE_COMPARISON</code> procedure in the <code dir="ltr">DBMS_COMPARISON</code> package, you can run the comparison at any time using the <code dir="ltr">COMPARE</code> function. Each time you run the <code dir="ltr">COMPARE</code> function, it records comparison results in the appropriate data dictionary views. Comparison results might be modified when subprograms in this package are invoked and the scans in the comparison results are specified. For example, comparison results might be modified when you run the <code dir="ltr">RECHECK</code> function.</p>
<p>The comparison results for a single execution of the <code dir="ltr">COMPARE</code> function can include one or more <span class="bold">scans</span>. A scan checks for differences in some or all of the rows in a shared database object at a single point in time. You can compare database objects multiple times, and a unique scan ID identifies each scan in the comparison results.</p>
<p>A <span class="bold">bucket</span> is a range of rows in a database object that is being compared. Buckets improve performance by splitting the database object into ranges and comparing the ranges independently. Every comparison divides the rows being compared into an appropriate number of buckets, and each bucket is compared by a scan.</p>
<p>Each time the <code dir="ltr">COMPARE</code> function splits a bucket into smaller buckets, it performs new scans of the smaller buckets. The scan that analyzes a larger bucket is the <span class="bold">parent scan</span> of each scan that analyzes the smaller buckets into which the larger bucket was split. The <span class="bold">root scan</span> in the comparison results is the highest level parent scan. The root scan does not have a parent.</p>
<p>You can recheck a scan using the <code dir="ltr">RECHECK</code> function, and you can converge a scan using the <code dir="ltr">CONVERGE</code> procedure. When you want to recheck or converge all of the rows comparison results, specify the root scan ID for the comparison results in the appropriate subprogram. When you want to recheck or converge a portion of the rows in comparison results, specify the scan ID of the scan that contains the differences.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STREP151" href="../STREP/man_comp.htm#STREP151"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for more information about comparisons, including detailed information about scans, buckets, parent scans, and root scans</div>
</div>
<!-- class="refsect2" -->
<div id="ARPLS65574" class="refsect2"><a id="CJHFGCIH"></a>
<h3 class="refsect2">Security Model</h3>
<p>Security on this package can be controlled in either of the following ways:</p>
<ul>
<li>
<p>Granting <code dir="ltr">EXECUTE</code> on this package to selected users or roles.</p>
</li>
<li>
<p>Granting <code dir="ltr">EXECUTE_CATALOG_ROLE</code> to selected users or roles.</p>
</li>
</ul>
<p>If subprograms in the package are run from within a stored procedure, then the user who runs the subprograms must be granted <code dir="ltr">EXECUTE</code> privilege on the package directly. It cannot be granted through a role.</p>
<p>Each subprogram in the <code dir="ltr">DBMS_COMPARISON</code> package has a <code dir="ltr">comparison_name</code> parameter. The current user must be the owner of the specified comparison to run a subprogram in the <code dir="ltr">DBMS_COMPARISON</code> package.</p>
<p>To run the <code dir="ltr">COMPARE</code> function, <code dir="ltr">RECHECK</code> function, or <code dir="ltr">CONVERGE</code> procedure, the following users must have the <code dir="ltr">SELECT</code> or <code dir="ltr">READ</code> privilege on each copy of the shared database object:</p>
<ul>
<li>
<p>The comparison owner at the local database</p>
</li>
<li>
<p>When a database link is used, the user at the remote database to which the comparison owner connects through a database link</p>
</li>
</ul>
<p>The <code dir="ltr">CONVERGE</code> procedure also requires additional privileges for one of these users at the database where it makes changes to the shared database object. The user must have <code dir="ltr">INSERT</code>, <code dir="ltr">UPDATE</code>, and <code dir="ltr">DELETE</code> privileges on the shared database object at this database.</p>
<p>In addition, when the <code dir="ltr">CONVERGE</code> procedure is run with either the <code dir="ltr">local_converge_tag</code> or <code dir="ltr">remote_converge_tag</code> parameter set to a non-<code dir="ltr">NULL</code> value, then the following additional requirements must be met:</p>
<ul>
<li>
<p>If the local table &#34;wins,&#34; then the user at the remote database to which the invoker of the <code dir="ltr">CONVERGE</code> procedure connects through a database link must be granted either <code dir="ltr">EXECUTE_CATALOG_ROLE</code> or <code dir="ltr">EXECUTE</code> privilege on the <code dir="ltr">DBMS_STREAMS_ADM</code> package.</p>
</li>
<li>
<p>If the remote table &#34;wins,&#34; then the invoker of the <code dir="ltr">CONVERGE</code> procedure at the local database must be granted either <code dir="ltr">EXECUTE_CATALOG_ROLE</code> or <code dir="ltr">EXECUTE</code> privilege on the <code dir="ltr">DBMS_STREAMS_ADM</code> package.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
The database administrator (DBA) can assume control over some of the <code dir="ltr">DBMS_COMPARISON</code> functions and procedures owned by other users. This control applies to <code dir="ltr">DROP_COMPARISON</code> and <code dir="ltr">PURGE_COMPARISON</code>. This DBA override can be particularly useful in cleanup operations when comparisons created by another user need to be dropped</div>
</div>
<!-- class="refsect2" -->
<div id="ARPLS65575" class="refsect2"><a id="CHDJCJHI"></a>
<h3 class="refsect2">Constants<a id="sthref1550"></a></h3>
<p>The <code dir="ltr">DBMS_COMPARISON</code> package defines several enumerated constants to use specifying parameter values. Enumerated constants must be prefixed with the package name. For example, <code dir="ltr">DBMS_COMPARISON.CMP_SCAN_MODE_FULL</code>.</p>
<p><a href="#CHDIGIAC">Table 35-1</a> lists the parameters and enumerated constants.</p>
<div id="ARPLS65576" class="tblhruleformalwide">
<p class="titleintable"><a id="sthref1551"></a><a id="CHDIGIAC"></a>Table 35-1 DBMS_COMPARISON Parameters with Enumerated Constants</p>
<table class="cellalignment4327" title="DBMS_COMPARISON Parameters with Enumerated Constants" summary="This table lists the DBMS_COMPARISON subprogram parameters with enumerated constants in alphabetical order and briefly describes the enumerated constants." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t5">Parameter</th>
<th class="cellalignment4328" id="r1c2-t5">Option</th>
<th class="cellalignment4328" id="r1c3-t5">Type</th>
<th class="cellalignment4328" id="r1c4-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t5" headers="r1c1-t5">
<p><code dir="ltr">comparison_mode</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t5 r1c2-t5">
<ul>
<li>
<p><code dir="ltr">CMP_COMPARE_MODE_OBJECT</code></p>
</li>
</ul>
</td>
<td class="cellalignment4329" headers="r2c1-t5 r1c3-t5">
<p><code dir="ltr">VARCHAR2(30)</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t5 r1c4-t5">
<p><code dir="ltr">CMP_COMPARE_MODE_OBJECT</code> is a database object. This constant can be specified as <code dir="ltr">&#39;OBJECT&#39;</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t5" headers="r1c1-t5">
<p><code dir="ltr">scan_mode</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t5 r1c2-t5">
<ul>
<li>
<p><code dir="ltr">CMP_SCAN_MODE_FULL</code></p>
</li>
<li>
<p><code dir="ltr">CMP_SCAN_MODE_RANDOM</code></p>
</li>
<li>
<p><code dir="ltr">CMP_SCAN_MODE_CYCLIC</code></p>
</li>
<li>
<p><code dir="ltr">CMP_SCAN_MODE_CUSTOM</code></p>
</li>
</ul>
</td>
<td class="cellalignment4329" headers="r3c1-t5 r1c3-t5">
<p><code dir="ltr">VARCHAR2(30)</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t5 r1c4-t5">
<p><code dir="ltr">CMP_SCAN_MODE_FULL</code> indicates that the entire database object is compared. This constant can be specified as <code dir="ltr">&#39;FULL&#39;</code>.</p>
<p><code dir="ltr">CMP_SCAN_MODE_RANDOM</code> indicates that a random portion of the database object is compared. This constant can be specified as <code dir="ltr">&#39;RANDOM&#39;</code>.</p>
<p><code dir="ltr">CMP_SCAN_MODE_CYCLIC</code> indicates that a portion of the database object is compared when you perform a single comparison. When you compare the database object again, another portion of the database object is compared, starting where the last comparison ended. This constant can be specified as <code dir="ltr">&#39;CYCLIC&#39;</code>.</p>
<p><code dir="ltr">CMP_SCAN_MODE_CUSTOM</code> indicates that the user who runs the subprogram specifies the range to compare in the database object. This constant can be specified as <code dir="ltr">&#39;CUSTOM&#39;</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t5" headers="r1c1-t5">
<p><code dir="ltr">converge_options</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t5 r1c2-t5">
<ul>
<li>
<p><code dir="ltr">CMP_CONVERGE_LOCAL_WINS</code></p>
</li>
<li>
<p><code dir="ltr">CMP_CONVERGE_REMOTE_WINS</code></p>
</li>
</ul>
</td>
<td class="cellalignment4329" headers="r4c1-t5 r1c3-t5">
<p><code dir="ltr">VARCHAR2(30)</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t5 r1c4-t5">
<p><code dir="ltr">CMP_CONVERGE_LOCAL_WINS</code> indicates that the column values at the local database replace the column values at the remote database when these column values are different. This constant can be specified as <code dir="ltr">&#39;LOCAL&#39;</code>.</p>
<p><code dir="ltr">CMP_CONVERGE_REMOTE_WINS</code> indicates that the column values at the remote database replace the column values at the local database when these column values are different. This constant can be specified as <code dir="ltr">&#39;REMOTE&#39;</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t5" headers="r1c1-t5">
<p><code dir="ltr">null_value</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t5 r1c2-t5">
<ul>
<li>
<p><code dir="ltr">CMP_NULL_VALUE_DEF</code></p>
</li>
</ul>
</td>
<td class="cellalignment4329" headers="r5c1-t5 r1c3-t5">
<p><code dir="ltr">VARCHAR2(100)</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t5 r1c4-t5">
<p><code dir="ltr">CMP_NULL_VALUE_DEF</code> indicates that <code dir="ltr">ORA$STREAMS$NV</code> is substituted for <code dir="ltr">NULL</code> values in database objects during comparison. This constant can be specified as <code dir="ltr">&#39;ORA$STREAMS$NV&#39;</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t5" headers="r1c1-t5">
<p><code dir="ltr">max_num_buckets</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t5 r1c2-t5">
<ul>
<li>
<p><code dir="ltr">CMP_MAX_NUM_BUCKETS</code></p>
</li>
</ul>
</td>
<td class="cellalignment4329" headers="r6c1-t5 r1c3-t5">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t5 r1c4-t5">
<p><code dir="ltr">CMP_MAX_NUM_BUCKETS</code> indicates that the maximum number of buckets is 1,000. This constant can be specified as <code dir="ltr">1000</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t5" headers="r1c1-t5">
<p><code dir="ltr">min_rows_in_bucket</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t5 r1c2-t5">
<ul>
<li>
<p><code dir="ltr">CMP_MIN_ROWS_IN_BUCKET</code></p>
</li>
</ul>
</td>
<td class="cellalignment4329" headers="r7c1-t5 r1c3-t5">
<p><code dir="ltr">INTEGER</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t5 r1c4-t5">
<p><code dir="ltr">CMP_MIN_ROWS_IN_BUCKET</code> indicates that the minimum number of rows in a bucket is 10,000. This constant can be specified as <code dir="ltr">10000</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformalwide" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65577" class="refsect2"><a id="CHDFFGEH"></a>
<h3 class="refsect2">Views<a id="sthref1552"></a></h3>
<p>The <code dir="ltr">DBMS_COMPARISON</code> package uses the following views:</p>
<ul>
<li>
<p><code dir="ltr">DBA_COMPARISON</code></p>
</li>
<li>
<p><code dir="ltr">USER_COMPARISON</code></p>
</li>
<li>
<p><code dir="ltr">DBA_COMPARISON_COLUMNS</code></p>
</li>
<li>
<p><code dir="ltr">USER_COMPARISON_COLUMNS</code></p>
</li>
<li>
<p><code dir="ltr">DBA_COMPARISON_SCAN</code></p>
</li>
<li>
<p><code dir="ltr">USER_COMPARISON_SCAN</code></p>
</li>
<li>
<p><code dir="ltr">DBA_COMPARISON_SCAN_VALUES</code></p>
</li>
<li>
<p><code dir="ltr">USER_COMPARISON_SCAN_VALUES</code></p>
</li>
<li>
<p><code dir="ltr">DBA_COMPARISON_ROW_DIF</code></p>
</li>
<li>
<p><code dir="ltr">USER_COMPARISON_ROW_DIF</code></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN" href="../REFRN/toc.htm"><span class="italic">Oracle Database Reference</span></a></div>
</div>
<!-- class="refsect2" -->
<div id="ARPLS882" class="refsect2"><a id="CHDFBEJI"></a>
<h3 class="refsect2">Operational Notes<a id="sthref1553"></a></h3>
<p>This section contains the following operational notes for the <code dir="ltr">DBMS_COMPARISON</code> package:</p>
<ul>
<li>
<p><a href="#CJHHJGBF">Oracle Database Release Requirements for the DBMS_COMPARISON Package</a></p>
</li>
<li>
<p><a href="#CJHDJJDF">Database Character Set Requirements for the DBMS_COMPARISON Package</a></p>
</li>
<li>
<p><a href="#CJHCFIDI">Database Object Requirements for the DBMS_COMPARISON Package</a></p>
</li>
<li>
<p><a href="#CJHFEEGA">Index Column Requirements for the DBMS_COMPARISON Package</a></p>
</li>
<li>
<p><a href="#CJHHBEBE">Datatype Requirements for the DBMS_COMPARISON Package</a></p>
</li>
<li>
<p><a href="#CJHEDJIB">Only Converge Rows That Are Not Being Updated</a></p>
</li>
</ul>
<div id="ARPLS65578" class="refsect3"><a id="CJHHJGBF"></a>
<h4 class="refsect3">Oracle Database Release Requirements for the DBMS_COMPARISON Package</h4>
<p>Meet the following Oracle Database release requirements when running the subprograms in the <code dir="ltr">DBMS_COMPARISON</code> package:</p>
<ul>
<li>
<p>The local database that runs the subprograms in the <code dir="ltr">DBMS_COMPARISON</code> package must be an Oracle Database 11<span class="italic">g</span> Release 1 (11.1) database.</p>
</li>
<li>
<p>The remote database must be an Oracle Database 10<span class="italic">g</span> Release 1 (10.1) or later database. Oracle databases before this release and non-Oracle databases are not supported.</p>
</li>
</ul>
</div>
<!-- class="refsect3" -->
<div id="ARPLS65579" class="refsect3"><a id="CJHDJJDF"></a>
<h4 class="refsect3">Database Character Set Requirements for the DBMS_COMPARISON Package</h4>
<p>The database character sets must be the same for the databases that contain the database objects being compared.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NLSPG" href="../NLSPG/toc.htm"><span class="italic">Oracle Database Globalization Support Guide</span></a> for information about database character sets</div>
</div>
<!-- class="refsect3" -->
<div id="ARPLS65580" class="refsect3"><a id="CJHCFIDI"></a>
<h4 class="refsect3">Database Object Requirements for the DBMS_COMPARISON Package</h4>
<p>The <code dir="ltr">DBMS_COMPARISON</code> package can compare the following types of database objects:</p>
<ul>
<li>
<p>Tables</p>
</li>
<li>
<p>Single-table views</p>
</li>
<li>
<p>Materialized views</p>
</li>
<li>
<p>Synonyms for tables, single-table views, and materialized views</p>
</li>
</ul>
<p>Database objects of different types can be compared and converged at different databases. For example, a table at one database and a materialized view at another database can be compared and converged with this package.</p>
<p>To run the subprograms in the <code dir="ltr">DBMS_COMPARISON</code> package, the specified database objects must have the same shape at each database. Specifically, the database objects must have the same number of columns at each database, and the datatypes of corresponding columns must match.</p>
<p>If a database object being compared contains columns that do not exist in the other database object, then you can compare the database objects by excluding the extra columns during comparison creation. Use the <code dir="ltr">column_list</code> parameter in the <code dir="ltr">CREATE_COMPARISON</code> procedure to list only the columns that exist in both database objects.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDCJIFD">CREATE_COMPARISON Procedure</a></div>
</div>
<!-- class="refsect3" -->
<div id="ARPLS65581" class="refsect3"><a id="CJHFEEGA"></a>
<h4 class="refsect3">Index Column Requirements for the DBMS_COMPARISON Package<a id="sthref1554"></a></h4>
<p>This section discusses number, timestamp, and interval columns. These include the following datatypes:</p>
<ul>
<li>
<p>Number columns are of the following datatypes: <code dir="ltr">NUMBER</code>, <code dir="ltr">FLOAT</code>, <code dir="ltr">BINARY_FLOAT</code>, and <code dir="ltr">BINARY_DOUBLE</code>.</p>
</li>
<li>
<p>Timestamp columns are of the following datatypes: <code dir="ltr">TIMESTAMP</code>, <code dir="ltr">TIMESTAMP</code> <code dir="ltr">WITH</code> <code dir="ltr">TIME</code> <code dir="ltr">ZONE</code>, and <code dir="ltr">TIMESTAMP</code> <code dir="ltr">WITH</code> <code dir="ltr">LOCAL</code> <code dir="ltr">TIME</code> <code dir="ltr">ZONE</code></p>
</li>
<li>
<p>Interval columns are of the following datatypes: <code dir="ltr">INTERVAL</code> <code dir="ltr">YEAR</code> <code dir="ltr">TO</code> <code dir="ltr">MONTH</code> and <code dir="ltr">INTERVAL</code> <code dir="ltr">DAY</code> <code dir="ltr">TO</code> <code dir="ltr">SECOND</code>.</p>
</li>
</ul>
<p>For all scan modes to be supported by the <code dir="ltr">DBMS_COMPARISON</code> package, the database objects must have one of the following types of indexes:</p>
<ul>
<li>
<p>A single-column index on a number, timestamp, interval, or <code dir="ltr">DATE</code> datatype column</p>
</li>
<li>
<p>A composite index that only includes number, timestamp, interval, or <code dir="ltr">DATE</code> datatype columns. Each column in the composite index must either have a <code dir="ltr">NOT</code> <code dir="ltr">NULL</code> constraint or be part of the primary key.</p>
</li>
</ul>
<p>For the scan modes <code dir="ltr">CMP_SCAN_MODE_FULL</code> and <code dir="ltr">CMP_SCAN_MODE_CUSTOM</code> to be supported, the database objects must have one of the following types of indexes:</p>
<ul>
<li>
<p>A single-column index on a number, timestamp, interval, <code dir="ltr">DATE</code>, <code dir="ltr">VARCHAR2</code>, or <code dir="ltr">CHAR</code> datatype column</p>
</li>
<li>
<p>A composite index that only includes number, timestamp, interval, <code dir="ltr">DATE</code>, <code dir="ltr">VARCHAR2</code>, or <code dir="ltr">CHAR</code> columns. Each column in the composite index must either have a <code dir="ltr">NOT</code> <code dir="ltr">NULL</code> constraint or be part of the primary key.</p>
</li>
</ul>
<p>If the database objects do not have one of these types of indexes, then the <code dir="ltr">DBMS_COMPARISON</code> package does not support the database objects. For example, if the database objects only have a single index on an <code dir="ltr">NVARCHAR2</code> column, then the <code dir="ltr">DBMS_COMPARISON</code> package does not support them. Or, if the database objects have only one index, and it is a composite index that includes a <code dir="ltr">NUMBER</code> column and an <code dir="ltr">NCHAR</code> column, then the <code dir="ltr">DBMS_COMPARISON</code> package does not support them.</p>
<p>You can specify an index when you create a comparison using the <code dir="ltr">index_schema_name</code> and <code dir="ltr">index_name</code> parameters in the <code dir="ltr">CREATE_COMPARISON</code> procedure. If you specify an index, then make sure the columns in the index meet the requirements of the scan mode used for the comparison.</p>
<p>The index columns in a comparison must uniquely identify every row involved in a comparison. The following constraints satisfy this requirement:</p>
<ul>
<li>
<p>A primary key constraint</p>
</li>
<li>
<p>A unique constraint on one or more non-<code dir="ltr">NULL</code> columns</p>
</li>
</ul>
<p>If these constraints are not present on a table, then use the <code dir="ltr">index_schema_name</code> and <code dir="ltr">index_name</code> parameters in the <code dir="ltr">CREATE_COMPARISON</code> procedure to specify an index whose columns satisfy this requirement.</p>
<p>When a single index value identifies both a local row and a remote row, the two rows must be copies of the same row in the replicated tables. In addition, each pair of copies of the same row must always have the same index value.</p>
<p>The <code dir="ltr">DBMS_COMPARISON</code> package can use an index only if all of the columns in the index are included in the <code dir="ltr">column_list</code> parameter when the comparison is created with the <code dir="ltr">CREATE_COMPARISON</code> procedure.</p>
<p><a id="sthref1555"></a>After a comparison is created, you can determine the index column or columns for it by running the following query:</p>
<pre dir="ltr">SELECT COLUMN_NAME, COLUMN_POSITION FROM DBA_COMPARISON_COLUMNS 
  WHERE COMPARISON_NAME = &#39;COMPARE_CUSTOM&#39; AND
        INDEX_COLUMN    = &#39;Y&#39;;
</pre>
<p>If there are multiple index columns, then the index column with <code dir="ltr">1</code> for the <code dir="ltr">COLUMN_POSITION</code> is the lead index column in the composite index.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDJCJHI">&#34;Constants&#34;</a> for information about scan modes</p>
</li>
<li>
<p><a href="#CHDCJIFD">CREATE_COMPARISON Procedure</a> for information about specifying an index for a comparison</p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ARPLS65582" class="refsect3"><a id="CJHHBEBE"></a>
<h4 class="refsect3">Datatype Requirements for the DBMS_COMPARISON Package</h4>
<p>The <code dir="ltr">DBMS_COMPARISON</code> package can compare data in columns of the following datatypes:</p>
<ul>
<li>
<p><code dir="ltr">VARCHAR2</code></p>
</li>
<li>
<p><code dir="ltr">NVARCHAR2</code></p>
</li>
<li>
<p><code dir="ltr">NUMBER</code></p>
</li>
<li>
<p><code dir="ltr">FLOAT</code></p>
</li>
<li>
<p><code dir="ltr">DATE</code></p>
</li>
<li>
<p><code dir="ltr">BINARY_FLOAT</code></p>
</li>
<li>
<p><code dir="ltr">BINARY_DOUBLE</code></p>
</li>
<li>
<p><code dir="ltr">TIMESTAMP</code></p>
</li>
<li>
<p><code dir="ltr">TIMESTAMP</code> <code dir="ltr">WITH</code> <code dir="ltr">TIME</code> <code dir="ltr">ZONE</code></p>
</li>
<li>
<p><code dir="ltr">TIMESTAMP</code> <code dir="ltr">WITH</code> <code dir="ltr">LOCAL</code> <code dir="ltr">TIME</code> <code dir="ltr">ZONE</code></p>
</li>
<li>
<p><code dir="ltr">INTERVAL</code> <code dir="ltr">YEAR</code> <code dir="ltr">TO</code> <code dir="ltr">MONTH</code></p>
</li>
<li>
<p><code dir="ltr">INTERVAL</code> <code dir="ltr">DAY</code> <code dir="ltr">TO</code> <code dir="ltr">SECOND</code></p>
</li>
<li>
<p><code dir="ltr">RAW</code></p>
</li>
<li>
<p><code dir="ltr">CHAR</code></p>
</li>
<li>
<p><code dir="ltr">NCHAR</code></p>
</li>
</ul>
<p>If a column with datatype <code dir="ltr">TIMESTAMP</code> <code dir="ltr">WITH</code> <code dir="ltr">LOCAL</code> <code dir="ltr">TIME</code> <code dir="ltr">ZONE</code> is compared, then the two databases must use the same time zone. Also, if a column with datatype <code dir="ltr">NVARCHAR2</code> or <code dir="ltr">NCHAR</code> is compared, then the two databases must use the same national character set.</p>
<p>The <code dir="ltr">DBMS_COMPARISON</code> package cannot compare data in columns of the following datatypes:</p>
<ul>
<li>
<p><code dir="ltr">LONG</code></p>
</li>
<li>
<p><code dir="ltr">LONG</code> <code dir="ltr">RAW</code></p>
</li>
<li>
<p><code dir="ltr">ROWID</code></p>
</li>
<li>
<p><code dir="ltr">UROWID</code></p>
</li>
<li>
<p><code dir="ltr">CLOB</code></p>
</li>
<li>
<p><code dir="ltr">NCLOB</code></p>
</li>
<li>
<p><code dir="ltr">BLOB</code></p>
</li>
<li>
<p><code dir="ltr">BFILE</code></p>
</li>
<li>
<p>User-defined types (including object types, <code dir="ltr">REF</code>s, varrays, and nested tables)</p>
</li>
<li>
<p>Oracle-supplied types (including any types, XML types, spatial types, and media types)</p>
</li>
</ul>
<p>You can compare database objects that contain unsupported columns by excluding the unsupported columns during comparison creation. Use the <code dir="ltr">column_list</code> parameter in the <code dir="ltr">CREATE_COMPARISON</code> procedure to list only the supported columns in a shared database object.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDCJIFD">CREATE_COMPARISON Procedure</a></p>
</li>
<li>
<p><a class="olink SQLRF002" href="../SQLRF/sql_elements.htm#SQLRF002"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about datatypes</p>
</li>
<li>
<p><a class="olink NLSPG" href="../NLSPG/toc.htm"><span class="italic">Oracle Database Globalization Support Guide</span></a> for information about national character sets</p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ARPLS65583" class="refsect3"><a id="CJHEDJIB"></a>
<h4 class="refsect3">Only Converge Rows That Are Not Being Updated</h4>
<p>You should only converge rows that are not being updated on either database. For example, if the shared database object is updated by replication components, then only converge rows for which replication changes have been applied and make sure no new changes are in the process of being replicated for these rows. If you compare replicated database objects, then it is typically best to compare them during a time of little or no replication activity to identify persistent differences.</p>
<div class="infobox-note">
<p class="notep1">Attention:</p>
If a scan identifies that a row is different in the shared database object at two databases, and the row is modified after the scan, then it can result in unexpected data in the row after the <code dir="ltr">CONVERGE</code> procedure is run.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STREP148" href="../STREP/man_comp.htm#STREP148"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for information about the <code dir="ltr">DBMS_COMPARISON</code> package in an Oracle Streams replication environment</div>
</div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="CHDEJECH"></a>
<div id="ARPLS65584" class="refsect1">
<h2 class="refsect1">Data Structures<a id="sthref1556"></a></h2>
<p>The <code dir="ltr">DBMS_COMPARISON</code> package defines a <code dir="ltr">RECORD</code> type.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1557"></a>RECORD Types</p>
<ul>
<li>
<p><a href="#CHDCGCIF">COMPARISON_TYPE Record Type</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div id="ARPLS65585" class="refsect2"><a id="CHDCGCIF"></a>
<h3 class="refsect2">COMPARISON_TYPE Record Type<a id="sthref1558"></a></h3>
<p>Contains information returned by the <code dir="ltr">COMPARE</code> function or <code dir="ltr">CONVERGE</code> procedure in the <code dir="ltr">DBMS_COMPARISON</code> package.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code dir="ltr">COMPARE</code> function only returns a value for the <code dir="ltr">scan_id</code> field.</div>
<div id="ARPLS65586" class="refsect3"><a id="CJHJFHHJ"></a>
<h4 class="refsect3">Syntax</h4>
<pre dir="ltr">TYPE COMPARISON_TYPE IS RECORD(
  scan_id            NUMBER,
  loc_rows_merged    NUMBER,
  rmt_rows_merged    NUMBER,
  loc_rows_deleted   NUMBER,
  rmt_rows_deleted   NUMBER);
</pre></div>
<!-- class="refsect3" -->
<div id="ARPLS65587" class="refsect3"><a id="sthref1559"></a>
<h4 class="refsect3">Fields</h4>
<div id="ARPLS65588" class="tblformal">
<p class="titleintable"><a id="sthref1560"></a><a id="sthref1561"></a>Table 35-2 COMPARISON_TYPE Attributes</p>
<table class="cellalignment4330" title="COMPARISON_TYPE Attributes" summary="This table describes the fields of the Record type COMPARISON_TYPE and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t14">Field</th>
<th class="cellalignment4328" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t14" headers="r1c1-t14">
<p><code dir="ltr">scan_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t14 r1c2-t14">
<p>The scan ID of the scan</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t14" headers="r1c1-t14">
<p><code dir="ltr">loc_rows_merged</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t14 r1c2-t14">
<p>The number of rows in the local database object updated with information from the database object at the remote site</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t14" headers="r1c1-t14">
<p><code dir="ltr">rmt_rows_merged</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t14 r1c2-t14">
<p>The number of rows in the database object updated at the remote site with information from the database object at the local site</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t14" headers="r1c1-t14">
<p><code dir="ltr">loc_rows_deleted</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t14 r1c2-t14">
<p>The number of rows deleted from the local database object</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t14" headers="r1c1-t14">
<p><code dir="ltr">rmt_rows_deleted</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t14 r1c2-t14">
<p>The number of rows deleted from the remote database object</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" -->
<div class="refentry"><a id="CJHCBCCI"></a>
<div id="ARPLS869" class="refsect1">
<h2 class="refsect1">Summary of DBMS_COMPARISON Subprograms<a id="sthref1562"></a></h2>
<div id="ARPLS65589" class="tblformal">
<p class="titleintable"><a id="sthref1563"></a><a id="sthref1564"></a>Table 35-3 DBMS_COMPARISON Package Subprograms</p>
<table class="cellalignment4330" title="DBMS_COMPARISON Package Subprograms" summary="This table lists the DBMS_COMPARISON subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t15">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t15" headers="r1c1-t15">
<p><a href="#CHDDFJBH">COMPARE Function</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t15 r1c2-t15">
<p>Performs the specified comparison</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t15" headers="r1c1-t15">
<p><a href="#CHDGIBFI">CONVERGE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t15 r1c2-t15">
<p>Executes data manipulation language (DML) changes to synchronize the portion of the database object that was compared in the specified scan</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t15" headers="r1c1-t15">
<p><a href="#CHDCJIFD">CREATE_COMPARISON Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t15 r1c2-t15">
<p>Creates a comparison</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t15" headers="r1c1-t15">
<p><a href="#CHDJGDIF">DROP_COMPARISON Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r5c1-t15 r1c2-t15">
<p>Drops a comparison</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t15" headers="r1c1-t15">
<p><a href="#CHDGJFJB">PURGE_COMPARISON Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r6c1-t15 r1c2-t15">
<p>Purges the comparison results, or a subset of the comparison results, for a comparison</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t15" headers="r1c1-t15">
<p><a href="#CHDEJHCF">RECHECK Function</a></p>
</td>
<td class="cellalignment4329" headers="r7c1-t15 r1c2-t15">
<p>Rechecks the differences in a specified scan for a comparison</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS870" class="refsect2"><a id="CHDDFJBH"></a>
<h3 class="refsect2">COMPARE Function<a id="sthref1565"></a></h3>
<p>This function performs the specified comparison.</p>
<p>Each time a comparison is performed, it results in at least one new scan, and each scan has a unique scan ID. You can define and name a comparison using the <code dir="ltr">CREATE_COMPARISON</code> procedure.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDHEAHB">&#34;Overview&#34;</a></p>
</li>
<li>
<p><a href="#CHDCJIFD">CREATE_COMPARISON Procedure</a></p>
</li>
</ul>
</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1566"></a>Syntax</p>
<pre dir="ltr">DBMS_COMPARISON.COMPARE(
   comparison_name  IN   VARCHAR2,
   scan_info        OUT  COMPARISON_TYPE,
   min_value        IN   VARCHAR2   DEFAULT NULL,
   max_value        IN   VARCHAR2   DEFAULT NULL,
   perform_row_dif  IN   BOOLEAN    DEFAULT FALSE)
RETURN BOOLEAN;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1567"></a>Parameters</p>
<div id="ARPLS65590" class="tblformal">
<p class="titleintable"><a id="sthref1568"></a><a id="sthref1569"></a>Table 35-4 COMPARE Function Parameters</p>
<table class="cellalignment4330" title="COMPARE Function Parameters" summary="This table describes the Parameters of DBMS_COMPARISON.COMPARE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t17">Parameter</th>
<th class="cellalignment4328" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t17" headers="r1c1-t17">
<p><code dir="ltr">comparison_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t17 r1c2-t17">
<p>The name of the comparison.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t17" headers="r1c1-t17">
<p><code dir="ltr">scan_info</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t17 r1c2-t17">
<p>Information about the compare operation returned in the <code dir="ltr">COMPARISON_TYPE</code> datatype.</p>
<p>See <a href="#CHDCGCIF">COMPARISON_TYPE Record Type</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t17" headers="r1c1-t17">
<p><code dir="ltr">min_value</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t17 r1c2-t17">
<p>When the scan mode for the comparison is set to <code dir="ltr">CMP_SCAN_MODE_CUSTOM</code>, specify the minimum index column value for the range of rows that are being compared. To determine the index column for a comparison, query the <code dir="ltr">DBA_COMPARISON_COLUMNS</code> data dictionary view. For a composite index, specify a value for the column with <code dir="ltr">column_position</code> equal to <code dir="ltr">1</code> in the <code dir="ltr">DBA_COMPARISON_COLUMNS</code> view. See <a href="#CJHFEEGA">&#34;Index Column Requirements for the DBMS_COMPARISON Package&#34;</a>.</p>
<p>If the scan mode is set to a value other than <code dir="ltr">CMP_SCAN_MODE_CUSTOM</code>, then this parameter must be set to <code dir="ltr">NULL</code>.</p>
<p>If <code dir="ltr">NULL</code> and the <code dir="ltr">scan_mode</code> parameter is set to <code dir="ltr">CMP_SCAN_MODE_CUSTOM</code>, then an error is raised.</p>
<p>To determine the scan mode for the comparison, query the <code dir="ltr">DBA_COMPARISON</code> data dictionary view.</p>
<p>See <a href="#CHDJCJHI">Constants</a> for information about scan modes.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t17" headers="r1c1-t17">
<p><code dir="ltr">max_value</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t17 r1c2-t17">
<p>When the scan mode for the comparison is set to <code dir="ltr">CMP_SCAN_MODE_CUSTOM</code>, specify the maximum index column value for the range of rows that are being compared. To determine the index column for a comparison, query the <code dir="ltr">DBA_COMPARISON_COLUMNS</code> data dictionary view. For a composite index, specify a value for the column with <code dir="ltr">column_position</code> equal to <code dir="ltr">1</code> in the <code dir="ltr">DBA_COMPARISON_COLUMNS</code> view. See <a href="#CJHFEEGA">&#34;Index Column Requirements for the DBMS_COMPARISON Package&#34;</a>.</p>
<p>If the scan mode is set to a value other than <code dir="ltr">CMP_SCAN_MODE_CUSTOM</code>, then this parameter must be set to <code dir="ltr">NULL</code>.</p>
<p>If <code dir="ltr">NULL</code> and the scan_mode parameter is set to <code dir="ltr">CMP_SCAN_MODE_CUSTOM</code>, then an error is raised.</p>
<p>To determine the scan mode for the comparison, query the <code dir="ltr">DBA_COMPARISON</code> data dictionary view.</p>
<p>See <a href="#CHDJCJHI">Constants</a> for information about scan modes.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t17" headers="r1c1-t17">
<p><code dir="ltr">perform_row_dif</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t17 r1c2-t17">
<p>If <code dir="ltr">TRUE</code>, then compares each row individually in the database object being compared after reaching the smallest possible bucket for the comparison.</p>
<p>If <code dir="ltr">FALSE</code>, then compares buckets for differences but does not compare each row individually when differences are found in the smallest possible bucket.</p>
<p>See <a href="#CHDHEAHB">&#34;Overview&#34;</a> for information about buckets.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1570"></a>Return Values</p>
<p>This function returns <code dir="ltr">TRUE</code> when no differences are found in the database objects being compared. This function returns <code dir="ltr">FALSE</code> when differences are found in the database objects being compared.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS871" class="refsect2"><a id="CHDGIBFI"></a>
<h3 class="refsect2">CONVERGE Procedure<a id="sthref1571"></a></h3>
<p>This procedure executes data manipulation language (DML) changes to synchronize the portion of the database objects that was compared in the specified scan.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1572"></a>Syntax</p>
<pre dir="ltr">DBMS_COMPARISON.CONVERGE(
   comparison_name      IN   VARCHAR2,
   scan_id              IN   NUMBER,
   scan_info            OUT  COMPARISON_TYPE,
   converge_options     IN   VARCHAR2  DEFAULT CMP_CONVERGE_LOCAL_WINS,
   perform_commit       IN   BOOLEAN   DEFAULT TRUE,
   local_converge_tag   IN   RAW       DEFAULT NULL,
   remote_converge_tag  IN   RAW       DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1573"></a>Parameters</p>
<div id="ARPLS65591" class="tblformal">
<p class="titleintable"><a id="sthref1574"></a><a id="sthref1575"></a>Table 35-5 CONVERGE Procedure Parameters</p>
<table class="cellalignment4330" title="CONVERGE Procedure Parameters" summary="This table describes the Parameters of DBMS_COMPARISON.CONVERGE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t18">Parameter</th>
<th class="cellalignment4328" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t18" headers="r1c1-t18">
<p><code dir="ltr">comparison_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t18 r1c2-t18">
<p>The name of the comparison.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t18" headers="r1c1-t18">
<p><code dir="ltr">scan_id</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t18 r1c2-t18">
<p>The identifier for the scan that contains the differences between the database objects being converged.</p>
<p>See <a href="#CHDHEAHB">&#34;Overview&#34;</a> for more information about specifying a scan ID in this parameter.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t18" headers="r1c1-t18">
<p><code dir="ltr">scan_info</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t18 r1c2-t18">
<p>Information about the converge operation returned in the <code dir="ltr">COMPARISON_TYPE</code> datatype.</p>
<p>See <a href="#CHDCGCIF">COMPARISON_TYPE Record Type</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t18" headers="r1c1-t18">
<p><code dir="ltr">converge_options</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t18 r1c2-t18">
<p>Either the <code dir="ltr">CMP_CONVERGE_LOCAL_WINS</code> constant or the <code dir="ltr">CMP_CONVERGE_REMOTE_WINS</code> constant.</p>
<p>See <a href="#CHDJCJHI">&#34;Constants&#34;</a> for information about these constants.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t18" headers="r1c1-t18">
<p><code dir="ltr">perform_commit</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t18 r1c2-t18">
<p>If <code dir="ltr">TRUE</code>, then performs a <code dir="ltr">COMMIT</code> periodically while making the DML changes. The <code dir="ltr">CONVERGE</code> procedure might perform more than one <code dir="ltr">COMMIT</code> when this parameter is set to <code dir="ltr">TRUE</code>.</p>
<p>If <code dir="ltr">FALSE</code>, then does not perform a <code dir="ltr">COMMIT</code> after making DML changes.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t18" headers="r1c1-t18">
<p><code dir="ltr">local_converge_tag</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t18 r1c2-t18">
<p>The Oracle Streams tag to set in the session on the local database before performing any changes to converge the data in the database objects being converged.</p>
<p>If non-<code dir="ltr">NULL</code>, then this parameter setting takes precedence over the <code dir="ltr">local_converge_tag</code> parameter in the <code dir="ltr">CREATE_COMPARISON</code> procedure that created the comparison.</p>
<p>If <code dir="ltr">NULL</code>, then this parameter is ignored, and the <code dir="ltr">local_converge_tag</code> parameter in the <code dir="ltr">CREATE_COMPARISON</code> procedure that created the comparison is used.</p>
<p>See <a href="#CJHFGCIH">&#34;Security Model&#34;</a> for information about security requirement related to this parameter, and see the <a class="olink STREP008" href="../STREP/rep_tags.htm#STREP008"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for more information about tags.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t18" headers="r1c1-t18">
<p><code dir="ltr">remote_converge_tag</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t18 r1c2-t18">
<p>The Oracle Streams tag to set in the session on the remote database before performing any changes to converge the data in the database objects being converged.</p>
<p>If non-<code dir="ltr">NULL</code>, then this parameter setting takes precedence over the <code dir="ltr">remote_converge_tag</code> parameter in the <code dir="ltr">CREATE_COMPARISON</code> procedure that created the comparison.</p>
<p>If <code dir="ltr">NULL</code>, then this parameter is ignored, and the <code dir="ltr">remote_converge_tag</code> parameter in the <code dir="ltr">CREATE_COMPARISON</code> procedure that created the comparison is used.</p>
<p>See <a href="#CJHFGCIH">&#34;Security Model&#34;</a> for information about security requirement related to this parameter, and see the <a class="olink STREP008" href="../STREP/rep_tags.htm#STREP008"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for more information about tags.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1576"></a>Usage Notes</p>
<p>If one of the database objects being converged is a read-only materialized view, then the <code dir="ltr">converge_options</code> parameter must be set to ensure that the read-only materialized view &#34;wins&#34; in the converge operation. The <code dir="ltr">CONVERGE</code> procedure raises an error if it tries to make changes to a read-only materialized view.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS872" class="refsect2"><a id="CHDCJIFD"></a>
<h3 class="refsect2">CREATE_COMPARISON Procedure<a id="sthref1577"></a></h3>
<p>This procedure creates a comparison.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1578"></a>Syntax</p>
<pre dir="ltr">DBMS_COMPARISON.CREATE_COMPARISON(
   comparison_name      IN  VARCHAR2,
   schema_name          IN  VARCHAR2,
   object_name          IN  VARCHAR2,
   dblink_name          IN  VARCHAR2,
   index_schema_name    IN  VARCHAR2  DEFAULT NULL,
   index_name           IN  VARCHAR2  DEFAULT NULL,
   remote_schema_name   IN  VARCHAR2  DEFAULT NULL,
   remote_object_name   IN  VARCHAR2  DEFAULT NULL,
   comparison_mode      IN  VARCHAR2  DEFAULT CMP_COMPARE_MODE_OBJECT,
   column_list          IN  VARCHAR2  DEFAULT &#39;*&#39;,
   scan_mode            IN  VARCHAR2  DEFAULT CMP_SCAN_MODE_FULL,
   scan_percent         IN  NUMBER    DEFAULT NULL,
   null_value           IN  VARCHAR2  DEFAULT CMP_NULL_VALUE_DEF,
   local_converge_tag   IN  RAW       DEFAULT NULL,
   remote_converge_tag  IN  RAW       DEFAULT NULL,
   max_num_buckets      IN  NUMBER    DEFAULT CMP_MAX_NUM_BUCKETS,
   min_rows_in_bucket   IN  NUMBER    DEFAULT CMP_MIN_ROWS_IN_BUCKET);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1579"></a>Parameters</p>
<div id="ARPLS65592" class="tblformal">
<p class="titleintable"><a id="sthref1580"></a><a id="sthref1581"></a>Table 35-6 CREATE_COMPARISON Procedure Parameters</p>
<table class="cellalignment4330" title="CREATE_COMPARISON Procedure Parameters" summary="This table describes the Parameters of DBMS_COMPARISON.CREATE_COMPARISON subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t19">Parameter</th>
<th class="cellalignment4328" id="r1c2-t19">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t19" headers="r1c1-t19">
<p><code dir="ltr">comparison_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t19 r1c2-t19">
<p>The name of the comparison.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t19" headers="r1c1-t19">
<p><code dir="ltr">schema_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t19 r1c2-t19">
<p>The name of the schema that contains the local database object to compare.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t19" headers="r1c1-t19">
<p><code dir="ltr">object_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t19 r1c2-t19">
<p>The name of the local database object to compare.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t19" headers="r1c1-t19">
<p><code dir="ltr">dblink_name</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t19 r1c2-t19">
<p>Database link to the remote database. The specified database object in the remote database is compared with the database object in the local database.</p>
<p>If <code dir="ltr">NULL</code>, then the comparison is configured to compare two database objects in the local database. In this case, parameters that specify the remote database object apply to the second database object in the comparison and to operations on the second database object. For example, specify the second database object in this procedure by using the <code dir="ltr">remote_schema_name</code> and <code dir="ltr">remote_object_name</code> parameters.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t19" headers="r1c1-t19">
<p><code dir="ltr">index_schema_name</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t19 r1c2-t19">
<p>The name of the schema that contains the index.</p>
<p>If <code dir="ltr">NULL</code>, then the schema specified in the <code dir="ltr">schema_name</code> parameter is used.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t19" headers="r1c1-t19">
<p><code dir="ltr">index_name</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t19 r1c2-t19">
<p>The name of the index.</p>
<p>If <code dir="ltr">NULL</code>, then the system determines the index columns for the comparison automatically.</p>
<p>If the <code dir="ltr">index_schema_name</code> parameter is non-<code dir="ltr">NULL</code>, then the <code dir="ltr">index_name</code> parameter must also be non-<code dir="ltr">NULL</code>. Otherwise, an error is raised.</p>
<p><span class="bold">See Also:</span> <a href="#CJHDJCEI">&#34;Usage Notes&#34;</a> for more information about specifying an index</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t19" headers="r1c1-t19">
<p><code dir="ltr">remote_schema_name</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t19 r1c2-t19">
<p>The name of the schema that contains the database object at the remote database. Specify a non-<code dir="ltr">NULL</code> value if the schema names are different at the two databases.</p>
<p>If <code dir="ltr">NULL</code>, then the schema specified in the <code dir="ltr">schema_name</code> parameter is used.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t19" headers="r1c1-t19">
<p><code dir="ltr">remote_object_name</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t19 r1c2-t19">
<p>The name of the database object at the remote database. Specify a non-<code dir="ltr">NULL</code> value if the database object names are different at the two databases.</p>
<p>If <code dir="ltr">NULL</code>, then the database object specified in the <code dir="ltr">object_name</code> parameter is used.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t19" headers="r1c1-t19">
<p><code dir="ltr">comparison_mode</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t19 r1c2-t19">
<p>Specify the default value <code dir="ltr">CMP_COMPARE_MODE_OBJECT</code>. Additional modes might be added in future releases.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t19" headers="r1c1-t19">
<p><code dir="ltr">column_list</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t19 r1c2-t19">
<p>Specify <code dir="ltr">&#39;*&#39;</code> to include all of the columns in the database objects being compared.</p>
<p>To compare a subset of columns in the database objects, specify a comma-delimited list of the columns to check. Any columns that are not in the list are ignored during a comparison and convergence.</p>
<p>See <a href="#CJHDJCEI">&#34;Usage Notes&#34;</a> for information about columns that are required in the <code dir="ltr">column_list</code> parameter.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t19" headers="r1c1-t19">
<p><code dir="ltr">scan_mode</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t19 r1c2-t19">
<p>Either <code dir="ltr">CMP_SCAN_MODE_FULL</code>, <code dir="ltr">CMP_SCAN_MODE_RANDOM</code>, <code dir="ltr">CMP_SCAN_MODE_CYCLIC</code>, or <code dir="ltr">CMP_SCAN_MODE_CUSTOM</code>.</p>
<p>If you specify <code dir="ltr">CMP_SCAN_MODE_CUSTOM</code>, then make sure you specify an index using the <code dir="ltr">index_schema_name</code> and <code dir="ltr">index_name</code> parameters. Specifying an index ensures that you can specify the correct <code dir="ltr">min_value</code> and <code dir="ltr">max_value</code> for the lead index column when you run the <code dir="ltr">COMPARE</code> or <code dir="ltr">RECHECK</code> function.</p>
<p>See <a href="#CHDJCJHI">&#34;Constants&#34;</a> for information about these constants.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t19" headers="r1c1-t19">
<p><code dir="ltr">scan_percent</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t19 r1c2-t19">
<p>The percentage of the database object to scan for comparison when the <code dir="ltr">scan_mode</code> parameter is set to either <code dir="ltr">CMP_SCAN_MODE_RANDOM</code> or <code dir="ltr">CMP_SCAN_MODE_CYCLIC</code>. For these <code dir="ltr">scan_mode</code> settings, a non-<code dir="ltr">NULL</code> value that is greater than 0 (zero) and less than 100 is required.</p>
<p>If <code dir="ltr">NULL</code> and the <code dir="ltr">scan_mode</code> parameter is set to <code dir="ltr">CMP_SCAN_MODE_FULL</code>, then the entire database object is scanned for comparison.</p>
<p>If <code dir="ltr">NULL</code> and the <code dir="ltr">scan_mode</code> parameter is set to <code dir="ltr">CMP_SCAN_MODE_CUSTOM</code>, then the portion of the database object scanned for comparison is specified when the <code dir="ltr">COMPARE</code> function is run.</p>
<p>If non-<code dir="ltr">NULL</code> and the <code dir="ltr">scan_mode</code> parameter is set to either <code dir="ltr">CMP_SCAN_MODE_FULL</code> or <code dir="ltr">CMP_SCAN_MODE_CUSTOM</code>, then the <code dir="ltr">scan_percent</code> parameter is ignored.</p>
<p><span class="bold">Note:</span> When the <code dir="ltr">scan_percent</code> parameter is non-<code dir="ltr">NULL</code>, and the lead index column for the comparison does not distribute the rows in the database object evenly, the portion of the database object that is compared might be smaller or larger than the specified <code dir="ltr">scan_percent</code> value. See <a href="#CJHFEEGA">&#34;Index Column Requirements for the DBMS_COMPARISON Package&#34;</a> for more information about the lead index column.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t19" headers="r1c1-t19">
<p><code dir="ltr">null_value</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t19 r1c2-t19">
<p>The value to substitute for each <code dir="ltr">NULL</code> in the database objects being compared. Specify a value or use the <code dir="ltr">CMP_NULL_VALUE_DEF</code> constant.</p>
<p>If a column being compared can contain <code dir="ltr">NULL</code>s, then the value specified for this parameter must be different than any non-<code dir="ltr">NULL</code> value in the column. Otherwise, if the value specified for this parameter can appear in the column, some row differences might not be found.</p>
<p>See <a href="#CHDJCJHI">&#34;Constants&#34;</a> for information about this constant.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t19" headers="r1c1-t19">
<p><code dir="ltr">local_converge_tag</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t19 r1c2-t19">
<p>The Oracle Streams tag to set in the session on the local database before performing any changes to converge the data in the database objects being compared.</p>
<p>If the <code dir="ltr">local_converge_tag</code> parameter is non-<code dir="ltr">NULL</code> in the <code dir="ltr">CONVERGE</code> procedure when comparison results for this comparison are converged, then the setting in the <code dir="ltr">CONVERGE</code> procedure takes precedence. See <a href="#CHDGIBFI">CONVERGE Procedure</a> for more information.</p>
<p>See the <a class="olink STREP008" href="../STREP/rep_tags.htm#STREP008"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for more information about tags.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t19" headers="r1c1-t19">
<p><code dir="ltr">remote_converge_tag</code></p>
</td>
<td class="cellalignment4329" headers="r16c1-t19 r1c2-t19">
<p>The Oracle Streams tag to set in the session on the remote database before performing any changes to converge the data in the database objects being compared.</p>
<p>If the <code dir="ltr">remote_converge_tag</code> parameter is non-<code dir="ltr">NULL</code> in the <code dir="ltr">CONVERGE</code> procedure when comparison results for this comparison are converged, then the setting in the <code dir="ltr">CONVERGE</code> procedure takes precedence. See <a href="#CHDGIBFI">CONVERGE Procedure</a> for more information.</p>
<p>See the <a class="olink STREP008" href="../STREP/rep_tags.htm#STREP008"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for more information about tags.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t19" headers="r1c1-t19">
<p><code dir="ltr">max_num_buckets</code></p>
</td>
<td class="cellalignment4329" headers="r17c1-t19 r1c2-t19">
<p>Specify the maximum number of buckets to use. Specify a value or use the <code dir="ltr">CMP_MAX_NUM_BUCKETS</code> constant. See <a href="#CHDJCJHI">&#34;Constants&#34;</a> for information about this constant.</p>
<p>See <a href="#CHDHEAHB">&#34;Overview&#34;</a> for information about buckets.</p>
<p><span class="bold">Note:</span> If an index column for a comparison is a <code dir="ltr">VARCHAR2</code> or <code dir="ltr">CHAR</code> column, then the number of buckets might exceed the value specified for the <code dir="ltr">max_num_buckets</code> parameter.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t19" headers="r1c1-t19">
<p><code dir="ltr">min_rows_in_bucket</code></p>
</td>
<td class="cellalignment4329" headers="r18c1-t19 r1c2-t19">
<p>Specify the minimum number of rows in each bucket. Specify a value or use the <code dir="ltr">CMP_MIN_ROWS_IN_BUCKET</code> constant. See <a href="#CHDJCJHI">&#34;Constants&#34;</a> for information about this constant.</p>
<p>See <a href="#CHDHEAHB">&#34;Overview&#34;</a> for information about buckets.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CJHDJCEI"></a>Usage Notes</p>
<p>This section contains usage notes for the <code dir="ltr">CREATE_COMPARISON</code> procedure.</p>
<p class="subhead2"><a id="ARPLS65593"></a>Usage Notes for the index_schema_name and index_name Parameters</p>
<p>When you specify an index for a comparison with the <code dir="ltr">index_schema_name</code> and <code dir="ltr">index_name</code> parameters, the specified index determines the comparison&#39;s index columns and their ordering. The order of the columns in the index determines the index column ordering for the comparison. Therefore, the column in column position 1 in the index is the lead column for the comparison.</p>
<p>The index columns and their ordering affect the details of each SQL statement generated and executed for a comparison. For each SQL statement, the optimizer decides whether to use indexes. If the optimizer decides to use indexes, then the optimizer decides which particular indexes to use. An index specified in <code dir="ltr">column_list</code> parameter might or might not be used.</p>
<p>The columns in the specified index must meet the requirements described in <a href="#CJHFEEGA">&#34;Index Column Requirements for the DBMS_COMPARISON Package&#34;</a>. If the index columns do not meet these requirements, then an error is raised.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you do not specify an index when you create a comparison, then the <code dir="ltr">CREATE_COMPARISON</code> procedure selects either the primary key, if it exists, or an existing unique index. The procedure never selects a non-unique index. However, if you specify an index, then the <code dir="ltr">CREATE_COMPARISON</code> procedure does not check its uniqueness. Therefore, if you specify a non-unique index, and duplicate index keys exist, then the results might be incorrect when the <code dir="ltr">CONVERGE</code> procedure synchronizes data.</div>
<p class="subhead2"><a id="ARPLS65594"></a>Usage Notes for the column_list Parameter</p>
<p>When the <code dir="ltr">column_list</code> parameter is set to a value other than <code dir="ltr">&#39;*&#39;</code>, the following columns are required in the <code dir="ltr">column_list</code> parameter:</p>
<ul>
<li>
<p>Any columns that are required to meet the index column requirements for the <code dir="ltr">DBMS_COMPARISON</code> package. If the <code dir="ltr">index_name</code> parameter is non-<code dir="ltr">NULL</code>, then the columns in the specified index must be in the column list. If the <code dir="ltr">index_name</code> parameter is <code dir="ltr">NULL</code>, then see <a href="#CJHFEEGA">&#34;Index Column Requirements for the DBMS_COMPARISON Package&#34;</a>.</p>
</li>
<li>
<p>If you plan to use the <code dir="ltr">CONVERGE</code> procedure to make changes to a database object based on the comparison, then any columns in this database object that have a <code dir="ltr">NOT</code> <code dir="ltr">NULL</code> constraint but no default value must be included in the column list. If these columns are not included, then the <code dir="ltr">CONVERGE</code> procedure returns an error. See <a href="#CHDGIBFI">CONVERGE Procedure</a>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS874" class="refsect2"><a id="CHDJGDIF"></a>
<h3 class="refsect2">DROP_COMPARISON Procedure<a id="sthref1582"></a></h3>
<p>This procedure drops a comparison.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1583"></a>Syntax</p>
<pre dir="ltr">DBMS_COMPARISON.DROP_COMPARISON(
   comparison_name  IN  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1584"></a>Parameters</p>
<div id="ARPLS65595" class="tblformal">
<p class="titleintable"><a id="sthref1585"></a><a id="sthref1586"></a>Table 35-7 DROP_COMPARISON Procedure Parameters</p>
<table class="cellalignment4330" title="DROP_COMPARISON Procedure Parameters" summary="This table describes the Parameters of DBMS_COMPARISON.DROP_COMPARISON subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t21">Parameter</th>
<th class="cellalignment4328" id="r1c2-t21">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t21" headers="r1c1-t21">
<p><code dir="ltr">comparison_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t21 r1c2-t21">
<p>The name of the comparison.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS875" class="refsect2"><a id="CHDGJFJB"></a>
<h3 class="refsect2">PURGE_COMPARISON Procedure<a id="sthref1587"></a></h3>
<p>This procedure purges the comparison results, or a subset of the comparison results, for a comparison.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
At least one of the following parameters must be set to <code dir="ltr">NULL</code>: <code dir="ltr">scan_id</code> or <code dir="ltr">purge_time</code>. If both the <code dir="ltr">scan_id</code> and <code dir="ltr">purge_time</code> parameters are <code dir="ltr">NULL</code>, then this procedure purges all comparison results for the comparison.</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1588"></a>Syntax</p>
<pre dir="ltr">DBMS_COMPARISON.PURGE_COMPARISON(
   comparison_name  IN  VARCHAR2,
   scan_id          IN  NUMBER     DEFAULT NULL,
   purge_time       IN  TIMESTAMP  DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1589"></a>Parameters</p>
<div id="ARPLS65596" class="tblformal">
<p class="titleintable"><a id="sthref1590"></a><a id="sthref1591"></a>Table 35-8 PURGE_COMPARISON Procedure Parameters</p>
<table class="cellalignment4330" title="PURGE_COMPARISON Procedure Parameters" summary="This table describes the Parameters of DBMS_COMPARISON.PURGE_COMPARISON subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t23">Parameter</th>
<th class="cellalignment4328" id="r1c2-t23">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t23" headers="r1c1-t23">
<p><code dir="ltr">comparison_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t23 r1c2-t23">
<p>The name of the comparison.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t23" headers="r1c1-t23">
<p><code dir="ltr">scan_id</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t23 r1c2-t23">
<p>The scan ID of the scan for which results are purged. The scan ID must identify a root scan. If the scan ID does not identify a root scan, then an error is raised. When a root scan ID is specified, it is purged, and all direct and indirect child scans of the specified root scan are purged.</p>
<p>If <code dir="ltr">NULL</code>, then no scan ID is considered when purging comparison results for the comparison.</p>
<p>See <a href="#CHDHEAHB">&#34;Overview&#34;</a> for information about scans.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t23" headers="r1c1-t23">
<p><code dir="ltr">purge_time</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t23 r1c2-t23">
<p>The date before which results are purged.</p>
<p>If <code dir="ltr">NULL</code>, then no date is considered when purging comparison results for the comparison.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS876" class="refsect2"><a id="CHDEJHCF"></a>
<h3 class="refsect2">RECHECK Function<a id="sthref1592"></a></h3>
<p>This function rechecks the differences in a specified scan for a comparison.</p>
<p>This function performs one of the following actions:</p>
<ul>
<li>
<p>If the specified scan completed successfully the last time it ran, then this function checks the previously identified differences in the scan.</p>
</li>
<li>
<p>If the specified scan completed partially, then this function continues to check the database object from the point where the previous scan ended.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
This function does not compare the shared database object for differences that were not recorded in the specified comparison scan. To check for those differences, run the <code dir="ltr">COMPARE</code> function.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink STREP151" href="../STREP/man_comp.htm#STREP151"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a></p>
</li>
<li>
<p><a href="#CHDDFJBH">COMPARE Function</a></p>
</li>
</ul>
</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1593"></a>Syntax</p>
<pre dir="ltr">DBMS_COMPARISON.RECHECK(
   comparison_name  IN  VARCHAR2,
   scan_id          IN  NUMBER,
   perform_row_dif  IN  BOOLEAN  DEFAULT FALSE)
RETURN BOOLEAN;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1594"></a>Parameters</p>
<div id="ARPLS65597" class="tblformal">
<p class="titleintable"><a id="sthref1595"></a><a id="sthref1596"></a>Table 35-9 RECHECK Function Parameters</p>
<table class="cellalignment4330" title="RECHECK Function Parameters" summary="This table describes the Parameters of DBMS_COMPARISON.RECHECK subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t26">Parameter</th>
<th class="cellalignment4328" id="r1c2-t26">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t26" headers="r1c1-t26">
<p><code dir="ltr">comparison_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t26 r1c2-t26">
<p>The name of the comparison.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t26" headers="r1c1-t26">
<p><code dir="ltr">scan_id</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t26 r1c2-t26">
<p>The scan ID of the scan to recheck.</p>
<p>See <a href="#CHDHEAHB">&#34;Overview&#34;</a> for more information about specifying a scan ID in this parameter.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t26" headers="r1c1-t26">
<p><code dir="ltr">perform_row_dif</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t26 r1c2-t26">
<p>If <code dir="ltr">TRUE</code>, then compares each row individually in the database objects being compared after reaching the smallest possible bucket for the comparison.</p>
<p>If <code dir="ltr">FALSE</code>, then compares buckets for differences but does not compare each row individually when differences are found in the smallest possible bucket.</p>
<p>See <a href="#CHDHEAHB">&#34;Overview&#34;</a> for information about buckets.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1597"></a>Return Values</p>
<p>This function returns <code dir="ltr">TRUE</code> when no differences are found in the database objects being compared. This function returns <code dir="ltr">FALSE</code> when differences are found in the database objects being compared.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4320">
<tr>
<td class="cellalignment4329">
<table class="cellalignment4325">
<tr>
<td class="cellalignment4324"><a href="d_cap_a.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4324"><a href="d_compress.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4332">
<table class="cellalignment4323">
<tr>
<td class="cellalignment4324"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4324"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4324"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4324"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4324"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4324"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>