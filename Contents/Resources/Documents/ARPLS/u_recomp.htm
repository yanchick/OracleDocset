<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2484"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/UTL_RECOMP"></a><title>UTL_RECOMP</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1086"/>
<meta name="dcterms.created" content="2016-09-02T5:37:17Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"/>
<meta name="dcterms.identifier" content="E41829-07"/>
<meta name="dcterms.isVersionOf" content="ARPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="u_raw.htm" title="Previous" type="text/html"/>
<link rel="Next" href="u_ref.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41829-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">265/290</span> <!-- End Header -->
<div id="ARPLS380" class="chapter"><a id="BABCFAFA"></a> <a id="i999843"></a>
<h1 class="chapter"><span class="secnum">261</span> UTL_RECOMP</h1>
<p>The <a id="sthref19607"></a>UTL_RECOMP package recompiles invalid PL/SQL modules, invalid views, Java classes, indextypes and operators in a database, either sequentially or in parallel.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BABJCDDJ">Using UTL_RECOMP</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Operational Notes</p>
</li>
<li>
<p>Examples</p>
</li>
</ul>
</li>
<li>
<p><a href="#i999835">Summary of UTL_RECOMP Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="BABJCDDJ"></a>
<div id="ARPLS71433" class="refsect1">
<h2 class="refsect1">Using UTL_RECOMP</h2>
<ul>
<li>
<p><a href="#i999986">Overview</a></p>
</li>
<li>
<p><a href="#i999990">Operational Notes</a></p>
</li>
<li>
<p><a href="#i1000051">Examples</a></p>
</li>
</ul>
<div id="ARPLS71434" class="refsect2"><a id="i999986"></a>
<h3 class="refsect2">Overview</h3>
<p>This script is particularly useful after a major-version upgrade that typically invalidates all PL/SQL and Java objects. Although invalid objects are recompiled automatically on use, it is useful to run this script prior to operation because this will either eliminate or minimize subsequent latencies due to on-demand automatic recompilation at runtime.</p>
<p>Parallel recompilation can exploit multiple CPUs to reduce the time taken to recompile invalid objects. The degree of parallelism is specified by the first argument to <a href="#i999462">RECOMP_PARALLEL Procedure</a>.</p>
<p>In general, a parallelism setting of one thread for each available CPU provides a good initial setting. However, please note that the process of recompiling an invalid object writes a significant amount of data to system tables and is fairly I/O intensive. A slow disk system may be a significant bottleneck and limit speedups available from a higher degree of parallelism.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS71435" class="refsect2"><a id="i999990"></a>
<h3 class="refsect2">Operational Notes</h3>
<ul>
<li>
<p>This package uses the job queue for parallel recompilation.</p>
</li>
<li>
<p>This package must be run using <code dir="ltr">SQL*PLUS</code>.</p>
</li>
<li>
<p>You must be connected <code dir="ltr">AS</code> <code dir="ltr">SYSDBA</code> to run this script.</p>
</li>
<li>
<p>This package expects the following packages to have been created with VALID status:</p>
<ul>
<li>
<p><code dir="ltr">STANDARD</code> (<code dir="ltr">standard</code>.<code dir="ltr">sql</code>)</p>
</li>
<li>
<p><code dir="ltr">DBMS_STANDARD</code> (<code dir="ltr">dbmsstdx</code>.<code dir="ltr">sql</code>)</p>
</li>
<li>
<p><code dir="ltr">DBMS_JOB</code> (<code dir="ltr">dbmsjob</code>.<code dir="ltr">sql</code>)</p>
</li>
<li>
<p><code dir="ltr">DBMS_RANDOM (dbmsrand.sql)</code></p>
</li>
</ul>
</li>
<li>
<p>There should be no other DDL on the database while running entries in this package. Not following this recommendation may lead to deadlocks.</p>
</li>
</ul>
</div>
<!-- class="refsect2" -->
<div id="ARPLS71436" class="refsect2"><a id="i1000051"></a>
<h3 class="refsect2">Examples</h3>
<p>Recompile all objects sequentially:</p>
<pre dir="ltr">EXECUTE UTL_RECOMP.RECOMP_SERIAL();
</pre>
<p>Recompile objects in schema <code dir="ltr">SCOTT</code> sequentially:</p>
<pre dir="ltr">EXECUTE UTL_RECOMP.RECOMP_SERIAL(&#39;SCOTT&#39;);
</pre>
<p>Recompile all objects using 4 parallel threads:</p>
<pre dir="ltr">EXECUTE UTL_RECOMP.RECOMP_PARALLEL(4);
</pre>
<p>Recompile objects in schema JOE using the number of threads specified in the parameter <code dir="ltr">JOB_QUEUE_PROCESSES</code>:</p>
<pre dir="ltr">EXECUTE UTL_RECOMP.RECOMP_PARALLEL(NULL, &#39;JOE&#39;);
</pre></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="i999835"></a>
<div id="ARPLS71437" class="refsect1">
<h2 class="refsect1">Summary of UTL_RECOMP Subprograms</h2>
<div id="ARPLS71438" class="tblformal">
<p class="titleintable"><a id="sthref19608"></a><a id="sthref19609"></a>Table 261-1 <span class="bolditalic">UTL_RECOMP Package Subprograms</span></p>
<table class="cellalignment4330" title=" UTL_RECOMP Package Subprograms" summary="This table lists the UTL_RECOMP subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t2">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t2">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t2" headers="r1c1-t2">
<p><a href="#i999462">RECOMP_PARALLEL Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t2 r1c2-t2">
<p>Recompiles invalid objects in a given schema, or all invalid objects in the database, in parallel</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t2" headers="r1c1-t2">
<p><a href="#i999769">RECOMP_SERIAL Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t2 r1c2-t2">
<p>Recompiles invalid objects in a given schema or all invalid objects in the database</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS71439" class="refsect2"><a id="i999462"></a>
<h3 class="refsect2"><a id="sthref19610"></a>RECOMP_PARALLEL Procedure</h3>
<p>This procedure uses the information exposed in the <code dir="ltr">DBA_Dependencies</code> view to recompile invalid objects in the database, or in a given schema, in parallel.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref19611"></a>Syntax</p>
<pre dir="ltr">UTL_RECOMP.RECOMP_PARALLEL(
   threads  IN   PLS_INTEGER DEFAULT NULL,
   schema   IN   VARCHAR2    DEFAULT NULL,
   flags    IN   PLS_INTEGER DEFAULT 0);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref19612"></a>Parameters</p>
<div id="ARPLS71440" class="tblformal">
<p class="titleintable"><a id="sthref19613"></a><a id="sthref19614"></a>Table 261-2 RECOMP_PARALLEL Procedure Parameters</p>
<table class="cellalignment4330" title="RECOMP_PARALLEL Procedure Parameters" summary="This table describes the Parameters of the UTL_RECOMP.RECOMP_PARALLEL subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t3">Parameter</th>
<th class="cellalignment4328" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t3" headers="r1c1-t3">
<p><code dir="ltr">threads</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t3 r1c2-t3">
<p>The number of recompile threads to run in parallel. If <code dir="ltr">NULL</code>, use the value of &#39;<code dir="ltr">job_queue_processes</code>&#39;.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t3" headers="r1c1-t3">
<p><code dir="ltr">schema</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t3 r1c2-t3">
<p>The schema in which to recompile invalid objects. If <code dir="ltr">NULL</code>, all invalid objects in the database are recompiled.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t3" headers="r1c1-t3">
<p><code dir="ltr">flags</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t3 r1c2-t3">
<p>Flag values are intended for internal testing and diagnosability only.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref19615"></a>Usage Notes</p>
<p>The parallel recompile exploits multiple CPUs to reduce the time taken to recompile invalid objects. However, please note that recompilation writes significant amounts of data to system tables, so the disk system may be a bottleneck and prevent significant speedups.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS71441" class="refsect2"><a id="i999769"></a>
<h3 class="refsect2"><a id="sthref19616"></a>RECOMP_SERIAL Procedure</h3>
<p>This procedure recompiles invalid objects in a given schema or all invalid objects in the database.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref19617"></a>Syntax</p>
<pre dir="ltr">UTL_RECOMP.RECOMP_SERIAL(
   schema   IN   VARCHAR2    DEFAULT NULL,
   flags    IN   PLS_INTEGER DEFAULT 0);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref19618"></a>Parameters</p>
<div id="ARPLS71442" class="tblformal">
<p class="titleintable"><a id="sthref19619"></a><a id="sthref19620"></a>Table 261-3 RECOMP_SERIAL Procedure Parameters</p>
<table class="cellalignment4330" title="RECOMP_SERIAL Procedure Parameters" summary="This table describes the Parameters of the UTL_RECOMP.RECOMP_SERIAL subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t4">Parameter</th>
<th class="cellalignment4328" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t4" headers="r1c1-t4">
<p><code dir="ltr">schema</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t4 r1c2-t4">
<p>The schema in which to recompile invalid objects. If <code dir="ltr">NULL</code>, all invalid objects in the database are recompiled.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t4" headers="r1c1-t4">
<p><code dir="ltr">flags</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t4 r1c2-t4">
<p>Flag values are intended for internal testing and diagnosability only.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4320">
<tr>
<td class="cellalignment4329">
<table class="cellalignment4325">
<tr>
<td class="cellalignment4324"><a href="u_raw.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4324"><a href="u_ref.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4332">
<table class="cellalignment4323">
<tr>
<td class="cellalignment4324"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4324"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4324"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4324"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4324"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4324"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>