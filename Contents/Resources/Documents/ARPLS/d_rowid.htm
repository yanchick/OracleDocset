<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2338"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBMS_ROWID"></a><title>DBMS_ROWID</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1086"/>
<meta name="dcterms.created" content="2016-09-02T5:36:29Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"/>
<meta name="dcterms.identifier" content="E41829-07"/>
<meta name="dcterms.isVersionOf" content="ARPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="d_rolling.htm" title="Previous" type="text/html"/>
<link rel="Next" href="d_rule.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41829-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">141/290</span> <!-- End Header -->
<div id="ARPLS053" class="chapter"><a id="CIHEDIFC"></a> <a id="i1003692"></a>
<h1 class="chapter"><span class="secnum">137</span> DBMS_ROWID</h1>
<p>The <a id="sthref8001"></a><code dir="ltr">DBMS_ROWID</code> package lets you create <code dir="ltr">ROWIDs</code> and obtain information about <code dir="ltr">ROWID</code>s from PL/SQL programs and SQL statements. You can find the data block number, the object number, and other <code dir="ltr">ROWID</code> components without writing code to interpret the base-64 character external <code dir="ltr">ROWID</code>. <code dir="ltr">DBMS_ROWID</code> is intended for upgrading from Oracle database version 7 to Oracle database version 8.X.</p>
<div class="infobox-note">
<p class="notep1"><span class="bold">Note</span>:</p>
<code dir="ltr">DBMS_ROWID</code> is not to be used with universal <code dir="ltr">ROWIDs</code> (<code dir="ltr">UROWIDs</code>).</div>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CIHJBJHG">Using DBMS_ROWID</a></p>
<ul>
<li>
<p>Security Model</p>
</li>
<li>
<p>Types</p>
</li>
<li>
<p>Exceptions</p>
</li>
<li>
<p>Operational Notes</p>
</li>
<li>
<p>Examples</p>
</li>
</ul>
</li>
<li>
<p><a href="#i1004259">Summary of DBMS_ROWID Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="CIHJBJHG"></a>
<div id="ARPLS67746" class="refsect1">
<h2 class="refsect1">Using DBMS_ROWID</h2>
<ul>
<li>
<p><a href="#i1004005">Security Model</a></p>
</li>
<li>
<p><a href="#i1004037">Types</a></p>
</li>
<li>
<p><a href="#i1004038">Exceptions</a></p>
</li>
<li>
<p><a href="#i1004110">Operational Notes</a></p>
</li>
<li>
<p><a href="#i1004039">Examples</a></p>
</li>
</ul>
<div id="ARPLS67747" class="refsect2"><a id="i1004005"></a>
<h3 class="refsect2">Security Model</h3>
<p>This package runs with the privileges of calling user, rather than the package owner <code dir="ltr">SYS</code>.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS67748" class="refsect2"><a id="i1004037"></a>
<h3 class="refsect2">Types</h3>
<ul>
<li>
<p><a href="#i1003967">Extension and Restriction Types</a></p>
</li>
<li>
<p><a href="#i1003998">Verification Types</a></p>
</li>
<li>
<p><a href="#i1003999">Object Types</a></p>
</li>
<li>
<p><a href="#i1004000">Conversion Types</a></p>
</li>
</ul>
<div id="ARPLS67749" class="refsect3"><a id="i1003967"></a>
<h4 class="refsect3">Extension and Restriction Types</h4>
<p>The types are as follows:</p>
<ul>
<li>
<p><code dir="ltr">RESTRICTED</code>&mdash;restricted <code dir="ltr">ROWID</code></p>
</li>
<li>
<p><code dir="ltr">EXTENDED</code>&mdash;extended <code dir="ltr">ROWID</code></p>
</li>
</ul>
<p>For example:</p>
<pre dir="ltr">rowid_type_restricted constant integer := 0;
rowid_type_extended   constant integer := 1;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Extended <code dir="ltr">ROWIDs</code> are only used in Oracle database version 8.X<span class="italic">i</span> and higher.</div>
</div>
<!-- class="refsect3" -->
<div id="ARPLS67750" class="refsect3"><a id="i1003998"></a>
<h4 class="refsect3">Verification Types</h4>
<div id="ARPLS67751" class="tblformal">
<p class="titleintable"><a id="sthref8002"></a><a id="sthref8003"></a>Table 137-1 Verification Types</p>
<table class="cellalignment4330" title="Verification Types" summary="This table describes the Verification Types used by DBMS_ROWID subprograms." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t4">Result</th>
<th class="cellalignment4328" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t4" headers="r1c1-t4">
<p><code dir="ltr">VALID</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t4 r1c2-t4">
<p>Valid <code dir="ltr">ROWID</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t4" headers="r1c1-t4">
<p><code dir="ltr">INVALID</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t4 r1c2-t4">
<p>Invalid <code dir="ltr">ROWID</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p>For example:</p>
<pre dir="ltr">rowid_is_valid   constant integer := 0;
rowid_is_invalid constant integer := 1;
</pre></div>
<!-- class="refsect3" -->
<div id="ARPLS67752" class="refsect3"><a id="i1003999"></a>
<h4 class="refsect3">Object Types</h4>
<div id="ARPLS67753" class="tblformal">
<p class="titleintable"><a id="sthref8004"></a><a id="sthref8005"></a>Table 137-2 Object Types</p>
<table class="cellalignment4330" title="Object Types" summary="This table describes the Object Types used by DBMS_ROWID subprograms." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t5">Result</th>
<th class="cellalignment4328" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t5" headers="r1c1-t5">
<p><code dir="ltr">UNDEFINED</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t5 r1c2-t5">
<p>Object Number not defined (for restricted <code dir="ltr">ROWIDs</code>)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p>For example:</p>
<pre dir="ltr">rowid_object_undefined constant integer := 0;
</pre></div>
<!-- class="refsect3" -->
<div id="ARPLS67754" class="refsect3"><a id="i1004000"></a>
<h4 class="refsect3">Conversion Types</h4>
<div id="ARPLS67755" class="tblformal">
<p class="titleintable"><a id="sthref8006"></a><a id="sthref8007"></a>Table 137-3 Conversion Types</p>
<table class="cellalignment4330" title="Conversion Types" summary="This table describes the Conversion Types used by DBMS_ROWID subprograms." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t6">Result</th>
<th class="cellalignment4328" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t6" headers="r1c1-t6">
<p><code dir="ltr">INTERNAL</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t6 r1c2-t6">
<p>Convert to/from column of <code dir="ltr">ROWID</code> type</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t6" headers="r1c1-t6">
<p><code dir="ltr">EXTERNAL</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t6 r1c2-t6">
<p>Convert to/from string format</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p>For example:</p>
<pre dir="ltr">rowid_convert_internal constant integer := 0;
rowid_convert_external constant integer := 1;
</pre></div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" -->
<div id="ARPLS67756" class="refsect2"><a id="i1004038"></a>
<h3 class="refsect2">Exceptions</h3>
<div id="ARPLS67757" class="tblformal">
<p class="titleintable"><a id="sthref8008"></a><a id="sthref8009"></a>Table 137-4 Exceptions</p>
<table class="cellalignment4330" title="Exceptions" summary="This table describes the Exceptions raised by DBMS_ROWID subprograms." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t7">Exception</th>
<th class="cellalignment4328" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t7" headers="r1c1-t7">
<p><code dir="ltr">ROWID_INVALID</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t7 r1c2-t7">
<p>Invalid rowid format</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t7" headers="r1c1-t7">
<p><code dir="ltr">ROWID_BAD_BLOCK</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t7 r1c2-t7">
<p>Block is beyond end of file</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p>For example:</p>
<pre dir="ltr">ROWID_INVALID exception;
   pragma exception_init(ROWID_INVALID, -1410);

ROWID_BAD_BLOCK exception;
   pragma exception_init(ROWID_BAD_BLOCK, -28516);
</pre></div>
<!-- class="refsect2" -->
<div id="ARPLS67758" class="refsect2"><a id="i1004110"></a>
<h3 class="refsect2">Operational Notes</h3>
<ul>
<li>
<p>Some of the functions in this package take a single parameter, such as a <code dir="ltr">ROWID</code>. This can be a character or a PL/SLQ <code dir="ltr">ROWID</code>, either restricted or extended, as required.</p>
</li>
<li>
<p>You can call the <code dir="ltr">DBMS_ROWID</code> functions and procedures from PL/SQL code, and you can also use the functions in SQL statements.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<code dir="ltr">ROWID_INFO</code> is a procedure. It can only be used in PL/SQL code.</div>
</li>
<li>
<p>You can use functions from the <code dir="ltr">DBMS_ROWID</code> package just like built-in SQL functions; in other words, you can use them wherever you can use an expression. In this example, the <code dir="ltr">ROWID_BLOCK_NUMBER</code> function is used to return just the block number of a single row in the <code dir="ltr">EMP</code> table:</p>
<pre dir="ltr">SELECT DBMS_ROWID.ROWID_BLOCK_NUMBER(rowid)
   FROM emp 
   WHERE ename = &#39;KING&#39;;
</pre></li>
<li>
<p>If Oracle returns the error &#34;ORA:452, 0, &#39;Subprogram &#39;%s&#39; violates its associated pragma&#39; for <code dir="ltr">pragma</code> <code dir="ltr">restrict_references</code>, it could mean the violation is due to:</p>
<ul>
<li>
<p>A problem with the current procedure or function</p>
</li>
<li>
<p>Calling a procedure or function without a pragma or due to calling one with a less restrictive pragma</p>
</li>
<li>
<p>Calling a package procedure or function that touches the initialization code in a package or that sets the default values</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsect2" -->
<div id="ARPLS67759" class="refsect2"><a id="i1004039"></a>
<h3 class="refsect2">Examples</h3>
<p>This example returns the <code dir="ltr">ROWID</code> for a row in the <code dir="ltr">EMP</code> table, extracts the data object number from the <code dir="ltr">ROWID</code>, using the <code dir="ltr">ROWID_OBJECT</code> function in the <code dir="ltr">DBMS_ROWID</code> package, then displays the object number:</p>
<pre dir="ltr">DECLARE
  object_no   INTEGER;
  row_id      ROWID;
  ...
BEGIN
  SELECT ROWID INTO row_id FROM emp
    WHERE empno = 7499;
  object_no := DBMS_ROWID.ROWID_OBJECT(row_id);
  DBMS_OUTPUT.PUT_LINE(&#39;The obj. # is &#39;|| object_no);
  ...
</pre></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="i1004259"></a>
<div id="ARPLS67760" class="refsect1">
<h2 class="refsect1">Summary of DBMS_ROWID Subprograms</h2>
<div id="ARPLS67761" class="tblformal">
<p class="titleintable"><a id="sthref8010"></a><a id="sthref8011"></a>Table 137-5 DBMS_ROWID Package Subprograms</p>
<table class="cellalignment4330" title="DBMS_ROWID Package Subprograms" summary="This table lists the DBMS_ROWID subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t9"><span class="bold">Subprogram</span></th>
<th class="cellalignment4328" id="r1c2-t9"><span class="bold">Description</span></th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t9" headers="r1c1-t9">
<p><a href="#CIHDGIGD">ROWID_BLOCK_NUMBER Function</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t9 r1c2-t9">
<p>Returns the block number of a <code dir="ltr">ROWID</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t9" headers="r1c1-t9">
<p><a href="#i1004385">ROWID_CREATE Function</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t9 r1c2-t9">
<p>Creates a <code dir="ltr">ROWID</code>, for testing only</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t9" headers="r1c1-t9">
<p><a href="#CIHCAIFH">ROWID_INFO Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t9 r1c2-t9">
<p>Returns the type and components of a <code dir="ltr">ROWID</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t9" headers="r1c1-t9">
<p><a href="#i997153">ROWID_OBJECT Function</a></p>
</td>
<td class="cellalignment4329" headers="r5c1-t9 r1c2-t9">
<p>Returns the object number of the extended <code dir="ltr">ROWID</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t9" headers="r1c1-t9">
<p><a href="#i997186">ROWID_RELATIVE_FNO Function</a></p>
</td>
<td class="cellalignment4329" headers="r6c1-t9 r1c2-t9">
<p>Returns the file number of a <code dir="ltr">ROWID</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t9" headers="r1c1-t9">
<p><a href="#i997251">ROWID_ROW_NUMBER Function</a></p>
</td>
<td class="cellalignment4329" headers="r7c1-t9 r1c2-t9">
<p>Returns the row number</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t9" headers="r1c1-t9">
<p><a href="#CIHHJEEF">ROWID_TO_ABSOLUTE_FNO Function</a></p>
</td>
<td class="cellalignment4329" headers="r8c1-t9 r1c2-t9">
<p>Returns the absolute file number associated with the <code dir="ltr">ROWID</code> for a row in a specific table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t9" headers="r1c1-t9">
<p><a href="#i1004441">ROWID_TO_EXTENDED Function</a></p>
</td>
<td class="cellalignment4329" headers="r9c1-t9 r1c2-t9">
<p>Converts a <code dir="ltr">ROWID</code> from restricted format to extended</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t9" headers="r1c1-t9">
<p><a href="#i997392">ROWID_TO_RESTRICTED Function</a></p>
</td>
<td class="cellalignment4329" headers="r10c1-t9 r1c2-t9">
<p>Converts an extended <code dir="ltr">ROWID</code> to restricted format</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t9" headers="r1c1-t9">
<p><a href="#i1004963">ROWID_TYPE Function</a></p>
</td>
<td class="cellalignment4329" headers="r11c1-t9 r1c2-t9">
<p>Returns the <code dir="ltr">ROWID</code> type: 0 is restricted, 1 is extended</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t9" headers="r1c1-t9">
<p><a href="#i997423">ROWID_VERIFY Function</a></p>
</td>
<td class="cellalignment4329" headers="r12c1-t9 r1c2-t9">
<p>Checks if a <code dir="ltr">ROWID</code> can be correctly extended by the <code dir="ltr">ROWID_TO_EXTENDED</code> function</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS67762" class="refsect2"><a id="CIHDGIGD"></a>
<h3 class="refsect2"><a id="sthref8012"></a>ROWID_BLOCK_NUMBER Function</h3>
<p>This function returns the database block number for the input <code dir="ltr">ROWID</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8013"></a>Syntax</p>
<pre dir="ltr">DBMS_ROWID.ROWID_BLOCK_NUMBER (
   row_id      IN   ROWID,
   ts_type_in  IN   VARCHAR2 DEFAULT &#39;SMALLFILE&#39;)
  RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8014"></a>Pragmas</p>
<pre dir="ltr">   pragma RESTRICT_REFERENCES(rowid_block_number,WNDS,RNDS,WNPS,RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8015"></a>Parameters</p>
<div id="ARPLS67763" class="tblformal">
<p class="titleintable"><a id="sthref8016"></a><a id="sthref8017"></a>Table 137-6 ROWID_BLOCK_NUMBER Function Parameters</p>
<table class="cellalignment4330" title="ROWID_BLOCK_NUMBER Function Parameters" summary="This table describes Parameters used by the DBMS_ROWID.ROWID_BLOCK_NUMBER subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t10">Parameter</th>
<th class="cellalignment4328" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t10" headers="r1c1-t10">
<p><code dir="ltr">row_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t10 r1c2-t10">
<p><code dir="ltr">ROWID</code> to be interpreted</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t10" headers="r1c1-t10">
<p><code dir="ltr">ts_type_in</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t10 r1c2-t10">
<p>The type of the tablespace (bigfile/smallfile) to which the row belongs</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8018"></a>Examples</p>
<p>The example SQL statement selects the block number from a <code dir="ltr">ROWID</code> and inserts it into another table:</p>
<pre dir="ltr">INSERT INTO T2 (SELECT dbms_rowid.rowid_block_number(ROWID, &#39;BIGFILE&#39;)
   FROM some_table 
   WHERE key_value = 42);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS67764" class="refsect2"><a id="i1004385"></a>
<h3 class="refsect2"><a id="sthref8019"></a>ROWID_CREATE Function</h3>
<p>This function lets you create a <code dir="ltr">ROWID</code>, given the component parts as parameters.</p>
<p>This is useful for testing <code dir="ltr">ROWID</code> operations, because only the Oracle Server can create a valid <code dir="ltr">ROWID</code> that points to data in a database.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8020"></a>Syntax</p>
<pre dir="ltr">DBMS_ROWID.ROWID_CREATE (
   rowid_type    IN NUMBER, 
   object_number IN NUMBER,
   relative_fno  IN NUMBER,
   block_number  IN NUMBER,
   row_number    IN NUMBER) 
  RETURN ROWID;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8021"></a>Pragmas</p>
<pre dir="ltr">pragma RESTRICT_REFERENCES(rowid_create,WNDS,RNDS,WNPS,RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8022"></a>Parameters</p>
<div id="ARPLS67765" class="tblformal">
<p class="titleintable"><a id="sthref8023"></a><a id="sthref8024"></a>Table 137-7 ROWID_CREATE Function Parameters</p>
<table class="cellalignment4330" title="ROWID_CREATE Function Parameters" summary="This table describes Parameters used by the DBMS_ROWID.ROWID_CREATE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t11">Parameter</th>
<th class="cellalignment4328" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t11" headers="r1c1-t11">
<p><code dir="ltr">rowid_type</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t11 r1c2-t11">
<p>Type (restricted or extended)</p>
<p>Set the <code dir="ltr">rowid_type</code> parameter to 0 for a restricted <code dir="ltr">ROWID</code>. Set it to 1 to create an extended <code dir="ltr">ROWID</code>.</p>
<p>If you specify <code dir="ltr">rowid_type</code> as 0, then the required <code dir="ltr">object_number</code> parameter is ignored, and <code dir="ltr">ROWID_CREATE</code> returns a restricted <code dir="ltr">ROWID</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t11" headers="r1c1-t11">
<p><code dir="ltr">object_number</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t11 r1c2-t11">
<p>Data object number (<code dir="ltr">rowid_object_undefined</code> for restricted)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t11" headers="r1c1-t11">
<p><code dir="ltr">relative_fno</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t11 r1c2-t11">
<p>Relative file number</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t11" headers="r1c1-t11">
<p><code dir="ltr">block_number</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t11 r1c2-t11">
<p>Block number in this file</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t11" headers="r1c1-t11">
<p><code dir="ltr">row_number</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t11 r1c2-t11">
<p>Returns row number in this block</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8025"></a>Examples</p>
<p>Create a dummy extended <code dir="ltr">ROWID</code>:</p>
<pre dir="ltr">   my_rowid := DBMS_ROWID.ROWID_CREATE(1, 9999, 12, 1000, 13);
</pre>
<p>Find out what the <code dir="ltr">rowid_object</code> function returns:</p>
<pre dir="ltr">   obj_number := DBMS_ROWID.ROWID_OBJECT(my_rowid);
</pre>
<p>The variable <code dir="ltr">obj_number</code> now contains 9999.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS67766" class="refsect2"><a id="CIHCAIFH"></a>
<h3 class="refsect2"><a id="sthref8026"></a>ROWID_INFO Procedure</h3>
<p>This procedure returns information about a <code dir="ltr">ROWID</code>, including its type (restricted or extended), and the components of the <code dir="ltr">ROWID</code>. This is a procedure, and it cannot be used in a SQL statement.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8027"></a>Syntax</p>
<pre dir="ltr">DBMS_ROWID.ROWID_INFO (
   rowid_in         IN   ROWID,
   rowid_type       OUT  NUMBER,
   object_number    OUT  NUMBER,
   relative_fno     OUT  NUMBER,
   block_number     OUT  NUMBER,
   row_number       OUT  NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8028"></a>Pragmas</p>
<pre dir="ltr">   pragma RESTRICT_REFERENCES(rowid_info,WNDS,RNDS,WNPS,RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8029"></a>Parameters</p>
<div id="ARPLS67767" class="tblformal">
<p class="titleintable"><a id="sthref8030"></a><a id="sthref8031"></a>Table 137-8 ROWID_INFO Procedure Parameters</p>
<table class="cellalignment4330" title="ROWID_INFO Procedure Parameters" summary="This table describes Parameters used by the DBMS_ROWID.ROWID_INFO subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t12">Parameter</th>
<th class="cellalignment4328" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t12" headers="r1c1-t12">
<p><code dir="ltr">rowid_in</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t12 r1c2-t12">
<p><code dir="ltr">ROWID</code> to be interpreted. This determines if the <code dir="ltr">ROWID</code> is a restricted (0) or extended (1) <code dir="ltr">ROWID</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t12" headers="r1c1-t12">
<p><code dir="ltr">rowid_type</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t12 r1c2-t12">
<p>Returns type (restricted/extended)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t12" headers="r1c1-t12">
<p><code dir="ltr">object_number</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t12 r1c2-t12">
<p>Returns data object number (<code dir="ltr">rowid_object_undefined</code> for restricted)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t12" headers="r1c1-t12">
<p><code dir="ltr">relative_fno</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t12 r1c2-t12">
<p>Returns relative file number</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t12" headers="r1c1-t12">
<p><code dir="ltr">block_number</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t12 r1c2-t12">
<p>Returns block number in this file</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t12" headers="r1c1-t12">
<p><code dir="ltr">row_number</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t12 r1c2-t12">
<p>Returns row number in this block</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1004963">&#34;ROWID_TYPE Function&#34;</a></div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8032"></a>Examples</p>
<p>This example reads back the values for the <code dir="ltr">ROWID</code> that you created in the <code dir="ltr">ROWID_CREATE</code>:</p>
<pre dir="ltr">DBMS_ROWID.ROWID_INFO (
   my_rowid, rid_type, obj_num, file_num, block_num, row_num, &#39;BIGFILE&#39;);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS67768" class="refsect2"><a id="i997153"></a>
<h3 class="refsect2"><a id="sthref8033"></a>ROWID_OBJECT Function</h3>
<p>This function returns the data object number for an extended <code dir="ltr">ROWID</code>. The function returns zero if the input <code dir="ltr">ROWID</code> is a restricted <code dir="ltr">ROWID</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8034"></a>Syntax</p>
<pre dir="ltr">DBMS_ROWID.ROWID_OBJECT (
   rowid_id IN ROWID)
  RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8035"></a>Pragmas</p>
<pre dir="ltr">   pragma RESTRICT_REFERENCES(rowid_object,WNDS,RNDS,WNPS,RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8036"></a>Parameters</p>
<div id="ARPLS67769" class="tblformal">
<p class="titleintable"><a id="sthref8037"></a><a id="sthref8038"></a>Table 137-9 ROWID_OBJECT Function Parameters</p>
<table class="cellalignment4330" title="ROWID_OBJECT Function Parameters" summary="This table describes Parameters used by the DBMS_ROWID.ROWID_OBJECT subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t14">Parameter</th>
<th class="cellalignment4328" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t14" headers="r1c1-t14">
<p><code dir="ltr">row_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t14 r1c2-t14">
<p><code dir="ltr">ROWID</code> to be interpreted</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code dir="ltr">ROWID_OBJECT_UNDEFINED</code> constant is returned for restricted <code dir="ltr">ROWIDs</code>.</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8039"></a>Examples</p>
<pre dir="ltr">SELECT dbms_rowid.rowid_object(ROWID)
   FROM emp
   WHERE empno = 7499;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS67770" class="refsect2"><a id="i997186"></a>
<h3 class="refsect2"><a id="sthref8040"></a>ROWID_RELATIVE_FNO Function</h3>
<p>This function returns the relative file number of the <code dir="ltr">ROWID</code> specified as the <code dir="ltr">IN</code> parameter. (The file number is relative to the tablespace.)</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8041"></a>Syntax</p>
<pre dir="ltr">DBMS_ROWID.ROWID_RELATIVE_FNO (
   rowid_id      IN   ROWID,
   ts_type_in    IN   VARCHAR2 DEFAULT &#39;SMALLFILE&#39;)
  RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8042"></a>Pragmas</p>
<pre dir="ltr">   pragma RESTRICT_REFERENCES(rowid_relative_fno,WNDS,RNDS,WNPS,RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8043"></a>Parameters</p>
<div id="ARPLS67771" class="tblformal">
<p class="titleintable"><a id="sthref8044"></a><a id="sthref8045"></a>Table 137-10 ROWID_RELATIVE_FNO Function Parameters</p>
<table class="cellalignment4330" title="ROWID_RELATIVE_FNO Function Parameters" summary="This table describes Parameters used by the DBMS_ROWID.ROWID_RELATIVE_FNO subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t16">Parameter</th>
<th class="cellalignment4328" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t16" headers="r1c1-t16">
<p><code dir="ltr">row_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t16 r1c2-t16">
<p><code dir="ltr">ROWID</code> to be interpreted</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t16" headers="r1c1-t16">
<p><code dir="ltr">ts_type_in</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t16 r1c2-t16">
<p>Type of the tablespace (bigfile/smallfile) to which the row belongs</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8046"></a>Examples</p>
<p>The example PL/SQL code fragment returns the relative file number:</p>
<pre dir="ltr">DECLARE
   file_number    INTEGER;
   rowid_val      ROWID;
BEGIN
   SELECT ROWID INTO rowid_val
     FROM dept 
     WHERE loc = &#39;Boston&#39;;
   file_number :=
     dbms_rowid.rowid_relative_fno(rowid_val, &#39;SMALLFILE&#39;);
    ...
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS67772" class="refsect2"><a id="i997251"></a>
<h3 class="refsect2"><a id="sthref8047"></a>ROWID_ROW_NUMBER Function</h3>
<p>This function extracts the row number from the <code dir="ltr">ROWID</code> <code dir="ltr">IN</code> parameter.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8048"></a>Syntax</p>
<pre dir="ltr">DBMS_ROWID.ROWID_ROW_NUMBER (
   row_id IN ROWID)
  RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8049"></a>Pragmas</p>
<pre dir="ltr">   PRAGMA RESTRICT_REFERENCES(rowid_row_number,WNDS,RNDS,WNPS,RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8050"></a>Parameters</p>
<div id="ARPLS67773" class="tblformal">
<p class="titleintable"><a id="sthref8051"></a><a id="sthref8052"></a>Table 137-11 ROWID_ROW_NUMBER Function Parameters</p>
<table class="cellalignment4330" title="ROWID_ROW_NUMBER Function Parameters" summary="This table describes Parameters used by the DBMS_ROWID.ROWID_ROW_NUMBER subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t17">Parameter</th>
<th class="cellalignment4328" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t17" headers="r1c1-t17">
<p><code dir="ltr">row_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t17 r1c2-t17">
<p><code dir="ltr">ROWID</code> to be interpreted.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8053"></a>Examples</p>
<p>Select a row number:</p>
<pre dir="ltr">SELECT dbms_rowid.rowid_row_number(ROWID) 
   FROM emp
   WHERE ename = &#39;ALLEN&#39;;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS67774" class="refsect2"><a id="CIHHJEEF"></a>
<h3 class="refsect2"><a id="sthref8054"></a>ROWID_TO_ABSOLUTE_FNO Function</h3>
<p>This function extracts the absolute file number from a <code dir="ltr">ROWID</code>, where the file number is absolute for a row in a given schema and table. The schema name and the name of the schema object (such as a table name) are provided as <code dir="ltr">IN</code> parameters for this function.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8055"></a>Syntax</p>
<pre dir="ltr">DBMS_ROWID.ROWID_TO_ABSOLUTE_FNO (
   row_id      IN ROWID,
   schema_name IN VARCHAR2,
   object_name IN VARCHAR2)
  RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8056"></a>Pragmas</p>
<pre dir="ltr">   pragma RESTRICT_REFERENCES(rowid_to_absolute_fno,WNDS,WNPS,RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8057"></a>Parameters</p>
<div id="ARPLS67775" class="tblformal">
<p class="titleintable"><a id="sthref8058"></a><a id="sthref8059"></a>Table 137-12 ROWID_TO_ABSOLUTE_FNO Function Parameters</p>
<table class="cellalignment4330" title="ROWID_TO_ABSOLUTE_FNO Function Parameters" summary="This table describes Parameters used by the DBMS_ROWID.ROWID_TO_ABSOLUTE_FNO subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t18">Parameter</th>
<th class="cellalignment4328" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t18" headers="r1c1-t18">
<p><code dir="ltr">row_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t18 r1c2-t18">
<p><code dir="ltr">ROWID</code> to be interpreted</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t18" headers="r1c1-t18">
<p><code dir="ltr">schema_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t18 r1c2-t18">
<p>Name of the schema which contains the table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t18" headers="r1c1-t18">
<p><code dir="ltr">object_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t18 r1c2-t18">
<p>Table name</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8060"></a>Examples</p>
<pre dir="ltr">DECLARE
   abs_fno        INTEGER;
   rowid_val      CHAR(18);
   object_name    VARCHAR2(20) := &#39;EMP&#39;;
BEGIN
    SELECT ROWID INTO rowid_val 
     FROM emp
     WHERE empno = 9999;
     abs_fno := dbms_rowid.rowid_to_absolute_fno(
     rowid_val, &#39;SCOTT&#39;, object_name);
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
For partitioned objects, the name must be a table name, not a partition or a sub/partition name.</div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS67776" class="refsect2"><a id="i1004441"></a>
<h3 class="refsect2"><a id="sthref8061"></a>ROWID_TO_EXTENDED Function</h3>
<p><a id="sthref8062"></a>This function translates a restricted <code dir="ltr">ROWID</code> that addresses a row in a schema and table that you specify to the extended <code dir="ltr">ROWID</code> format. Later, it may be removed from this package into a different place.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8063"></a>Syntax</p>
<pre dir="ltr">DBMS_ROWID.ROWID_TO_EXTENDED (
   old_rowid       IN ROWID,
   schema_name     IN VARCHAR2,   
   object_name     IN VARCHAR2,
   conversion_type IN INTEGER)
  RETURN ROWID;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8064"></a>Pragmas</p>
<pre dir="ltr">   pragma RESTRICT_REFERENCES(rowid_to_extended,WNDS,WNPS,RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8065"></a>Parameters</p>
<div id="ARPLS67777" class="tblformal">
<p class="titleintable"><a id="sthref8066"></a><a id="sthref8067"></a>Table 137-13 ROWID_TO_EXTENDED Function Parameters</p>
<table class="cellalignment4330" title="ROWID_TO_EXTENDED Function Parameters" summary="This table describes Parameters used by the DBMS_ROWID.ROWID_TO_EXTENDED subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t20">Parameter</th>
<th class="cellalignment4328" id="r1c2-t20">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t20" headers="r1c1-t20">
<p><code dir="ltr">old_rowid</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t20 r1c2-t20">
<p><code dir="ltr">ROWID</code> to be converted</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t20" headers="r1c1-t20">
<p><code dir="ltr">schema_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t20 r1c2-t20">
<p>Name of the schema which contains the table (optional)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t20" headers="r1c1-t20">
<p><code dir="ltr">object_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t20 r1c2-t20">
<p>Table name (optional).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t20" headers="r1c1-t20">
<p><code dir="ltr">conversion_type</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t20 r1c2-t20">
<p>The following constants are defined:</p>
<p><code dir="ltr">ROWID_CONVERT_INTERNAL</code> (:=0)</p>
<p><code dir="ltr">ROWID_CONVERT_EXTERNAL</code> (:=1)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8068"></a>Return Values</p>
<p><code dir="ltr">ROWID_TO_EXTENDED</code> returns the <code dir="ltr">ROWID</code> in the extended character format. If the input <code dir="ltr">ROWID</code> is <code dir="ltr">NULL</code>, then the function returns <code dir="ltr">NULL</code>. If a zero-valued <code dir="ltr">ROWID</code> is supplied (00000000.0000.0000), then a zero-valued restricted <code dir="ltr">ROWID</code> is returned.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8069"></a>Examples</p>
<p>Assume that there is a table called <code dir="ltr">RIDS</code> in the schema <code dir="ltr">SCOTT</code>, and that the table contains a column <code dir="ltr">ROWID_COL</code> that holds <code dir="ltr">ROWIDs</code> (restricted), and a column <code dir="ltr">TABLE_COL</code> that point to other tables in the <code dir="ltr">SCOTT</code> schema. You can convert the <code dir="ltr">ROWIDs</code> to extended format with the statement:</p>
<pre dir="ltr">UPDATE SCOTT.RIDS
   SET rowid_col =
   dbms_rowid.rowid_to_extended (
      rowid_col, &#39;SCOTT&#34;, TABLE_COL, 0);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8070"></a>Usage Notes</p>
<ul>
<li>
<p>If the schema and object names are provided as <code dir="ltr">IN</code> parameters, then this function verifies <code dir="ltr">SELECT</code> authority on the table named, and converts the restricted <code dir="ltr">ROWID</code> provided to an extended <code dir="ltr">ROWID</code>, using the data object number of the table. That <code dir="ltr">ROWID_TO_EXTENDED</code> returns a value, however, does not guarantee that the converted <code dir="ltr">ROWID</code> actually references a valid row in the table, either at the time that the function is called, or when the extended <code dir="ltr">ROWID</code> is actually used.</p>
</li>
<li>
<p>If the schema and object name are not provided (are passed as <code dir="ltr">NULL</code>), then this function attempts to fetch the page specified by the restricted <code dir="ltr">ROWID</code> provided. It treats the file number stored in this <code dir="ltr">ROWID</code> as the absolute file number. This can cause problems if the file has been dropped, and its number has been reused prior to the migration. If the fetched page belongs to a valid table, then the data object number of this table is used in converting to an extended <code dir="ltr">ROWID</code> value. This is very inefficient, and Oracle recommends doing this only as a last resort, when the target table is not known. The user must still know the correct table name at the time of using the converted value.</p>
</li>
<li>
<p>If an extended <code dir="ltr">ROWID</code> value is supplied, the data object number in the input extended <code dir="ltr">ROWID</code> is verified against the data object number computed from the table name parameter. If the two numbers do not match, the <code dir="ltr">INVALID_ROWID</code> exception is raised. If they do match, the input <code dir="ltr">ROWID</code> is returned.</p>
</li>
<li>
<p><code dir="ltr">ROWID_TO_EXTENDED</code> cannot be used with partition tables.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The <a href="#i997423">ROWID_VERIFY Function</a> has a method to determine if a given <code dir="ltr">ROWID</code> can be converted to the extended format.</div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS67778" class="refsect2"><a id="i997392"></a>
<h3 class="refsect2"><a id="sthref8071"></a>ROWID_TO_RESTRICTED Function</h3>
<p>This function converts an extended <code dir="ltr">ROWID</code> into restricted <code dir="ltr">ROWID</code> format.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8072"></a>Syntax</p>
<pre dir="ltr">DBMS_ROWID.ROWID_TO_RESTRICTED (
   old_rowid       IN ROWID,
   conversion_type IN INTEGER)
  RETURN ROWID;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8073"></a>Pragmas</p>
<pre dir="ltr">   pragma RESTRICT_REFERENCES(rowid_to_restricted,WNDS,RNDS,WNPS,RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8074"></a>Parameters</p>
<div id="ARPLS67779" class="tblformal">
<p class="titleintable"><a id="sthref8075"></a><a id="sthref8076"></a>Table 137-14 ROWID_TO_RESTRICTED Function Parameters</p>
<table class="cellalignment4330" title="ROWID_TO_RESTRICTED Function Parameters" summary="This table describes Parameters used by the DBMS_ROWID.ROWID_TO_RESTRICTED subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t22">Parameter</th>
<th class="cellalignment4328" id="r1c2-t22">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t22" headers="r1c1-t22">
<p><code dir="ltr">old_rowid</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t22 r1c2-t22">
<p><code dir="ltr">ROWID</code> to be converted</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t22" headers="r1c1-t22">
<p><code dir="ltr">conversion_type</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t22 r1c2-t22">
<p>The following constants are defined:</p>
<p><code dir="ltr">ROWID_CONVERT_INTERNAL</code> (:=0)</p>
<p><code dir="ltr">ROWID_CONVERT_EXTERNAL</code> (:=1)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS67780" class="refsect2"><a id="i1004963"></a>
<h3 class="refsect2"><a id="sthref8077"></a>ROWID_TYPE Function</h3>
<p>This function returns 0 if the <code dir="ltr">ROWID</code> is a restricted <code dir="ltr">ROWID</code>, and 1 if it is extended.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8078"></a>Syntax</p>
<pre dir="ltr">DBMS_ROWID.ROWID_TYPE (
   rowid_id IN ROWID)
  RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8079"></a>Pragmas</p>
<pre dir="ltr">   pragma RESTRICT_REFERENCES(rowid_type,WNDS,RNDS,WNPS,RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8080"></a>Parameters</p>
<div id="ARPLS67781" class="tblformal">
<p class="titleintable"><a id="sthref8081"></a><a id="sthref8082"></a>Table 137-15 ROWID_TYPE Function Parameters</p>
<table class="cellalignment4330" title="ROWID_TYPE Function Parameters" summary="This table describes Parameters used by the DBMS_ROWID.ROWID_TYPE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t23">Parameter</th>
<th class="cellalignment4328" id="r1c2-t23">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t23" headers="r1c1-t23">
<p><code dir="ltr">row_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t23 r1c2-t23">
<p><code dir="ltr">ROWID</code> to be interpreted</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8083"></a>Examples</p>
<pre dir="ltr">IF DBMS_ROWID.ROWID_TYPE(my_rowid) = 1 THEN
   my_obj_num := DBMS_ROWID.ROWID_OBJECT(my_rowid);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS67782" class="refsect2"><a id="i997423"></a>
<h3 class="refsect2"><a id="sthref8084"></a>ROWID_VERIFY Function</h3>
<p>This function verifies the <code dir="ltr">ROWID</code>. It returns 0 if the input restricted <code dir="ltr">ROWID</code> can be converted to extended format, given the input schema name and table name, and it returns 1 if the conversion is not possible.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can use this function in a <code dir="ltr">WHERE</code> clause of a SQL statement, as shown in the example.</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8085"></a>Syntax</p>
<pre dir="ltr">DBMS_ROWID.ROWID_VERIFY (
   rowid_in        IN ROWID,
   schema_name     IN VARCHAR2,
   object_name     IN VARCHAR2,
   conversion_type IN INTEGER
  RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8086"></a>Pragmas</p>
<pre dir="ltr">   pragma RESTRICT_REFERENCES(rowid_verify,WNDS,WNPS,RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8087"></a>Parameters</p>
<div id="ARPLS67783" class="tblformal">
<p class="titleintable"><a id="sthref8088"></a><a id="sthref8089"></a>Table 137-16 ROWID_VERIFY Function Parameters</p>
<table class="cellalignment4330" title="ROWID_VERIFY Function Parameters" summary="This table describes Parameters used by the DBMS_ROWID.ROWID_VERIFY subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t25">Parameter</th>
<th class="cellalignment4328" id="r1c2-t25">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t25" headers="r1c1-t25">
<p><code dir="ltr">rowid_in</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t25 r1c2-t25">
<p><code dir="ltr">ROWID</code> to be verified</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t25" headers="r1c1-t25">
<p><code dir="ltr">schema_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t25 r1c2-t25">
<p>Name of the schema which contains the table</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t25" headers="r1c1-t25">
<p><code dir="ltr">object_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t25 r1c2-t25">
<p>Table name</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t25" headers="r1c1-t25">
<p><code dir="ltr">conversion_type</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t25 r1c2-t25">
<p>The following constants are defined:</p>
<p><code dir="ltr">ROWID_CONVERT_INTERNAL</code> (:=0)</p>
<p><code dir="ltr">ROWID_CONVERT_EXTERNAL</code> (:=1)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8090"></a>Examples</p>
<p>Considering the schema in the example for the <code dir="ltr">ROWID_TO_EXTENDED</code> function, you can use the following statement to find bad <code dir="ltr">ROWID</code>s prior to conversion. This enables you to fix them beforehand.</p>
<pre dir="ltr">SELECT ROWID, rowid_col 
   FROM SCOTT.RIDS
   WHERE dbms_rowid.rowid_verify(rowid_col, NULL, NULL, 0) =1;
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="u_raw.htm#BABJHEGF">Chapter 260, &#34;UTL_RAW&#34;</a>, <a href="u_ref.htm#BABFDGCE">Chapter 262, &#34;UTL_REF&#34;</a></div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4320">
<tr>
<td class="cellalignment4329">
<table class="cellalignment4325">
<tr>
<td class="cellalignment4324"><a href="d_rolling.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4324"><a href="d_rule.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4332">
<table class="cellalignment4323">
<tr>
<td class="cellalignment4324"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4324"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4324"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4324"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4324"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4324"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>