<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2220"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBMS_ADVANCED_REWRITE"></a><title>DBMS_ADVANCED_REWRITE</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1086"/>
<meta name="dcterms.created" content="2016-09-02T5:36:5Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"/>
<meta name="dcterms.identifier" content="E41829-07"/>
<meta name="dcterms.isVersionOf" content="ARPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="d_addm.htm" title="Previous" type="text/html"/>
<link rel="Next" href="d_advis.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41829-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">22/290</span> <!-- End Header -->
<div id="ARPLS083" class="chapter"><a id="CFAECGDI"></a> <a id="i999507"></a>
<h1 class="chapter"><span class="secnum">18</span> DBMS_ADVANCED_REWRITE</h1>
<p><code dir="ltr">DBMS_ADVANCED_REWRITE</code> contains interfaces for advanced query rewrite users. Using this package, you can create, drop, and maintain functional equivalence declarations for query rewrite.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DWHSG" href="../DWHSG/toc.htm"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for more information about query rewrite</div>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CFAGBJDG">Using DBMS_ADVANCED_REWRITE</a></p>
<ul>
<li>
<p>Security Model</p>
</li>
</ul>
</li>
<li>
<p><a href="#CFAEGFJI">Summary of DBMS_ADVANCED_REWRITE Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="CFAGBJDG"></a>
<div id="ARPLS65069" class="refsect1">
<h2 class="refsect1">Using DBMS_ADVANCED_REWRITE</h2>
<p>This section contains topics which relate to using the <code dir="ltr">DBMS_ADVANCED_REWRITE</code> package.</p>
<ul>
<li>
<p><a href="#i999466">Security Model</a></p>
</li>
</ul>
<div id="ARPLS65070" class="refsect2"><a id="i999466"></a>
<h3 class="refsect2">Security Model</h3>
<p>No privileges to access these procedures are granted to anyone by default. To gain access to these procedures, you must connect as <code dir="ltr">SYSDBA</code> and explicitly grant execute access to the desired database administrators.</p>
<p>You can control security on this package by granting the <code dir="ltr">EXECUTE</code> privilege to selected database administrators or roles. For example, the user <code dir="ltr">er</code> can be given access to use this package by the following statement, executed as <code dir="ltr">SYSDBA</code>:</p>
<pre dir="ltr">GRANT EXECUTE ON DBMS_ADVANCED_REWRITE TO er;
</pre>
<p>You may want to write a separate cover package on top of this package for restricting the alert names used. Instead of granting the <code dir="ltr">EXECUTE</code> privilege on the <code dir="ltr">DBMS_ADVANCED_REWRITE</code> package directly, you can then grant it to the cover package.</p>
<p>In addition, similar to the privilege required for regular materialized views, the user should be granted the privilege to create an equivalence. For example, the user <code dir="ltr">er</code> can be granted this privilege by executing the following statement as <code dir="ltr">SYSDBA</code>:</p>
<pre dir="ltr">GRANT CREATE MATERIALIZED VIEW TO er;
</pre></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="CFAEGFJI"></a>
<div id="ARPLS65071" class="refsect1">
<h2 class="refsect1">Summary of DBMS_ADVANCED_REWRITE Subprograms</h2>
<p>This table list the all the package subprograms in alphabetical order.</p>
<div id="ARPLS65072" class="tblformal">
<p class="titleintable"><a id="sthref168"></a><a id="sthref169"></a>Table 18-1 DBMS_ADVANCED_REWRITE Package Subprograms</p>
<table class="cellalignment4330" title="DBMS_ADVANCED_REWRITE Package Subprograms" summary="This table lists the DBMS_ADVANCED_REWRITE subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t3">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t3" headers="r1c1-t3">
<p><a href="#i999545">ALTER_REWRITE_EQUIVALENCE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t3 r1c2-t3">
<p>Changes the mode of the rewrite equivalence declaration to the mode you specify</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t3" headers="r1c1-t3">
<p><a href="#CFAGJHJB">BUILD_SAFE_REWRITE_EQUIVALENCE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t3 r1c2-t3">
<p>Enables the rewrite of top-level materialized views using submaterialized views. Oracle Corporation does not recommend you directly use this procedure</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t3" headers="r1c1-t3">
<p><a href="#CFAJDGBJ">DECLARE_REWRITE_EQUIVALENCE Procedures</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t3 r1c2-t3">
<p>Creates a declaration indicating that <code dir="ltr">source_stmt</code> is functionally equivalent to <code dir="ltr">destination_stmt</code> for as long as the equivalence declaration remains enabled, and that <code dir="ltr">destination_stmt</code> is more favorable in terms of performance</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t3" headers="r1c1-t3">
<p><a href="#i998647">DROP_REWRITE_EQUIVALENCE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r5c1-t3 r1c2-t3">
<p>Drops the specified rewrite equivalence declaration</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t3" headers="r1c1-t3">
<p><a href="#i998649">VALIDATE_REWRITE_EQUIVALENCE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r6c1-t3 r1c2-t3">
<p>Validates the specified rewrite equivalence declaration using the same validation method as described with the <code dir="ltr">validate</code> parameter</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS65073" class="refsect2"><a id="i999545"></a>
<h3 class="refsect2"><a id="sthref170"></a>ALTER_REWRITE_EQUIVALENCE Procedure</h3>
<p>This procedure changes the mode of the rewrite equivalence declaration to the mode you specify.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref171"></a>Syntax</p>
<pre dir="ltr">DBMS_ADVANCED_REWRITE.ALTER_REWRITE_EQUIVALENCE (
   name            VARCHAR2,
   rewrite_mode    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref172"></a>Parameters</p>
<div id="ARPLS65074" class="tblformal">
<p class="titleintable"><a id="sthref173"></a><a id="CFADJBAI"></a>Table 18-2 ALTER_REWRITE_EQUIVALENCE Procedure Parameters</p>
<table class="cellalignment4330" title="ALTER_REWRITE_EQUIVALENCE Procedure Parameters" summary="This table describes the parameters for DBMS_ADVANCED_REWRITE.ALTER_REWRITE_EQUIVALENCE." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t4">Parameter</th>
<th class="cellalignment4328" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t4" headers="r1c1-t4">
<p><code dir="ltr">name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t4 r1c2-t4">
<p>A name for the equivalence declaration to alter. The name can be of the form <code dir="ltr">owner.name</code>, where <code dir="ltr">owner</code> complies with the rules for a schema name, and <code dir="ltr">name</code> compiles with the rules for a table name. Alternatively, a simple name that complies with the rules for a table name can be specified. In this case, the rewrite equivalence is altered in the current schema. The invoker must have the appropriate alter materialized view privileges to alter an equivalence declaration outside their own schema.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t4" headers="r1c1-t4">
<p><code dir="ltr">rewrite_mode</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t4 r1c2-t4">
<p>The following modes are supported, in increasing order of power:</p>
<p><code dir="ltr">disabled</code>: Query rewrite does not use the equivalence declaration. Use this mode to temporarily disable use of the rewrite equivalence declaration.</p>
<p><code dir="ltr">text_match</code>: Query rewrite uses the equivalence declaration only in its text match modes. This mode is useful for simple transformations.</p>
<p><code dir="ltr">general</code>: Query rewrite uses the equivalence declaration in all of its transformation modes against the incoming request queries. However, query rewrite makes no attempt to rewrite the specified <code dir="ltr">destination_query</code>.</p>
<p><code dir="ltr">recursive</code>: Query rewrite uses the equivalence declaration in all of its transformation modes against the incoming request queries. Moreover, query rewrite further attempts to rewrite the specified <code dir="ltr">destination_query</code> for further performance enhancements whenever it uses the equivalence declaration.</p>
<p>Oracle recommends you use the least powerful mode that is sufficient to solve your performance problem.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65075" class="refsect2"><a id="CFAGJHJB"></a>
<h3 class="refsect2"><a id="sthref174"></a>BUILD_SAFE_REWRITE_EQUIVALENCE Procedure</h3>
<p>This procedure enables the rewrite and refresh of top-level materialized views using submaterialized views. It is provided for the exclusive use by scripts generated by the <code dir="ltr">DBMS_ADVISOR.TUNE_MVIEW</code> procedure. It is required to enable query rewrite and fast refresh when <code dir="ltr">DBMS_ADVISOR.TUNE_MVIEW</code> decomposes a materialized view into a top-level materialized view and one or more submaterialized views.</p>
<p>Oracle does not recommend you directly use the <code dir="ltr">BUILD_SAFE_REWRITE_EQUIVALENCE</code> procedure. You should use either the <code dir="ltr">DBMS_ADVISOR.TUNE_MVIEW</code> or the <code dir="ltr">DBMS_ADVANCED_REWRITE.CREATE_REWRITE_EQUIVALENCE</code> procedure as appropriate.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS65076" class="refsect2"><a id="CFAJDGBJ"></a>
<h3 class="refsect2"><a id="sthref175"></a>DECLARE_REWRITE_EQUIVALENCE Procedures</h3>
<p>This procedure creates a declaration indicating that <code dir="ltr">source_stmt</code> is functionally equivalent to <code dir="ltr">destination_stmt</code> for as long as the equivalence declaration remains enabled, and that <code dir="ltr">destination_stmt</code> is more favorable in terms of performance. The scope of the declaration is system wide. The query rewrite engine uses such declarations to perform rewrite transformations in <code dir="ltr">QUERY_REWRITE_INTEGRITY = trusted</code> and <code dir="ltr">stale_tolerated</code> modes.</p>
<p>Because the underlying equivalences between the source and destination statements cannot be enforced by the query rewrite engine, queries can be only rewritten in <code dir="ltr">trusted</code> and <code dir="ltr">stale_tolerated</code> integrity modes.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref176"></a>Syntax</p>
<pre dir="ltr">DBMS_ADVANCED_REWRITE.DECLARE_REWRITE_EQUIVALENCE (
   name                 VARCHAR2,
   source_stmt          VARCHAR2,
   destination_stmt     VARCHAR2,
   validate             BOOLEAN    := TRUE,
   rewrite_mode         VARCHAR2   := &#39;TEXT_MATCH&#39;);

DBMS_ADVANCED_REWRITE.DECLARE_REWRITE_EQUIVALENCE (
   name                 VARCHAR2,
   source_stmt          CLOB,
   destination_stmt     CLOB,
   validate             BOOLEAN   := TRUE,
   rewrite_mode         VARCHAR2  := &#39;TEXT_MATCH&#39;);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref177"></a>Parameters</p>
<div id="ARPLS65077" class="tblformal">
<p class="titleintable"><a id="sthref178"></a><a id="sthref179"></a>Table 18-3 DECLARE_REWRITE_EQUIVALENCE Procedure Parameters</p>
<table class="cellalignment4330" title="DECLARE_REWRITE_EQUIVALENCE Procedure Parameters" summary="This table describes the parameters for DBMS_ADVANCED_REWRITE.DROP_REWRITE_EQUIVALENCE." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t5">Parameter</th>
<th class="cellalignment4328" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t5" headers="r1c1-t5">
<p><code dir="ltr">name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t5 r1c2-t5">
<p>A name for the equivalence declaration. The name can be of the form <code dir="ltr">owner.name</code>, where owner complies with the rules for a schema name, and name compiles with the rules for a table name.</p>
<p>Alternatively, a simple name that complies with the rules for a table name can be specified. In this case, the rewrite equivalence is created in the current schema. The invoker must have the appropriate <code dir="ltr">CREATE</code> <code dir="ltr">MATERIALIZED</code> <code dir="ltr">VIEW</code> privileges to alter an equivalence declaration.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t5" headers="r1c1-t5">
<p><code dir="ltr">source_stmt</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t5 r1c2-t5">
<p>A sub-<code dir="ltr">SELECT</code> expression in either <code dir="ltr">VARCHAR2</code> or <code dir="ltr">CLOB</code> format. This is the query statement that is the target of optimization.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t5" headers="r1c1-t5">
<p><code dir="ltr">destination_stmt</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t5 r1c2-t5">
<p>A sub-<code dir="ltr">SELECT</code> expression in either <code dir="ltr">VARCHAR2</code> or <code dir="ltr">CLOB</code> format.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t5" headers="r1c1-t5">
<p><code dir="ltr">validate</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t5 r1c2-t5">
<p>A Boolean indicating whether to validate that the specified <code dir="ltr">source_stmt</code> is functionally equivalent to the specified <code dir="ltr">destination_stmt</code>. If <code dir="ltr">validate</code> is specified as <code dir="ltr">TRUE</code>, <code dir="ltr">DECLARE_REWRITE_EQUIVALENCE</code> evaluates the two sub-<code dir="ltr">SELECT</code>s and compares their results. If the results are not the same, <code dir="ltr">DECLARE_REWRITE_EQUIVALENCE</code> does not create the rewrite equivalence and returns an error condition. If <code dir="ltr">FALSE</code>, <code dir="ltr">DECLARE_REWRITE_EQUIVALENCE</code> does not validate the equivalence.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t5" headers="r1c1-t5">
<p><code dir="ltr">rewrite_mode</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t5 r1c2-t5">
<p>The following modes are supported, in increasing order of power:</p>
<ul>
<li>
<p><code dir="ltr">disabled</code>: Query rewrite does not use the equivalence declaration. Use this mode to temporarily disable use of the rewrite equivalence declaration.</p>
</li>
<li>
<p><code dir="ltr">text_match</code>: Query rewrite uses the equivalence declaration only in its text match modes. This mode is useful for simple transformations.</p>
</li>
<li>
<p><code dir="ltr">general</code>: Query rewrite uses the equivalence declaration in all of its transformation modes against the incoming request queries. However, query rewrite makes no attempt to rewrite the specified <code dir="ltr">destination_query</code>.</p>
</li>
<li>
<p><code dir="ltr">recursive</code>: Query rewrite uses the equivalence declaration in all of its transformation modes against the incoming request queries. Moreover, query rewrite further attempts to rewrite the specified <code dir="ltr">destination_query</code> for further performance enhancements whenever it uses the equivalence declaration.</p>
</li>
</ul>
<p>Oracle recommends you use the least powerful mode that is sufficient to solve your performance problem.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref180"></a>Exceptions</p>
<div id="ARPLS65078" class="tblformal">
<p class="titleintable"><a id="sthref181"></a><a id="sthref182"></a>Table 18-4 DECLARE_REWRITE_EQUIVALENCE Procedure Exceptions</p>
<table class="cellalignment4330" title="DECLARE_REWRITE_EQUIVALENCE Procedure Exceptions" summary="This table defines the exceptions raised by the DBMS_ADVANCED_REWRITE.DECLARE_REWRITE_EQUIVALENCE subprogram" dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t6">Exception</th>
<th class="cellalignment4328" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t6" headers="r1c1-t6">
<p><code dir="ltr">ORA-30388</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t6 r1c2-t6">
<p>Name of the rewrite equivalence is not specified</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t6" headers="r1c1-t6">
<p><code dir="ltr">ORA-30391</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t6 r1c2-t6">
<p>The specified rewrite equivalence does not exist</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t6" headers="r1c1-t6">
<p><code dir="ltr">ORA-30392</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t6 r1c2-t6">
<p>The checksum analysis for the rewrite equivalence failed</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t6" headers="r1c1-t6">
<p><code dir="ltr">ORA-30393</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t6 r1c2-t6">
<p>A query block in the statement did not write</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t6" headers="r1c1-t6">
<p><code dir="ltr">ORA-30396</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t6 r1c2-t6">
<p>Rewrite equivalence procedures require the <code dir="ltr">COMPATIBLE</code> parameter to be set to 10.1 or greater</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref183"></a>Usage Notes</p>
<p>Query rewrite using equivalence declarations occurs simultaneously and in concert with query rewrite using materialized views. The same query rewrite engine is used for both. The query rewrite engine uses the same rewrite rules to rewrite queries using both equivalence declarations and materialized views. Because the rewrite equivalence represents a specific rewrite crafted by a sophisticated user, the query rewrite engine gives priority to rewrite equivalences over materialized views when it is possible to perform a rewrite with either a materialized view or a rewrite equivalence. For this same reason, the cost-based optimizer (specifically, cost-based rewrite) will not choose an unrewritten query plan over a query plan that is rewritten to use a rewrite equivalence even if the cost of the un-rewritten plan appears more favorable. Query rewrite matches properties of the incoming request query against the equivalence declaration&#39;s <code dir="ltr">source_stmt</code> or the materialized view&#39;s defining statement, respectively, and derives an equivalent relational expression in terms of the equivalence declaration&#39;s <code dir="ltr">destination_stmt</code> or the materialized view&#39;s container table, respectively.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65079" class="refsect2"><a id="i998647"></a>
<h3 class="refsect2"><a id="sthref184"></a>DROP_REWRITE_EQUIVALENCE Procedure</h3>
<p>This procedure drops the specified rewrite equivalence declaration.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref185"></a>Syntax</p>
<pre dir="ltr">DBMS_ADVANCED_REWRITE.DROP_REWRITE_EQUIVALENCE (
   name        VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref186"></a>Parameters</p>
<div id="ARPLS65080" class="tblformal">
<p class="titleintable"><a id="sthref187"></a><a id="sthref188"></a>Table 18-5 DROP_REWRITE_EQUIVALENCE Procedure Parameters</p>
<table class="cellalignment4330" title="DROP_REWRITE_EQUIVALENCE Procedure Parameters" summary="DBMS_ADVANCED_REWRITE.DECLARE_REWRITE_EQUIVALENCE" dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t7">Parameter</th>
<th class="cellalignment4328" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t7" headers="r1c1-t7">
<p><code dir="ltr">name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t7 r1c2-t7">
<p>A name for the equivalence declaration to drop. The name can be of the form <code dir="ltr">owner.name</code>, where owner complies with the rules for a schema name, and name compiles with the rules for a table name. Alternatively, a simple name that complies with the rules for a table name can be specified. In this case, the rewrite equivalence is dropped in the current schema. The invoker must have the appropriate drop materialized view privilege to drop an equivalence declaration outside their own schema.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65081" class="refsect2"><a id="i998649"></a>
<h3 class="refsect2"><a id="sthref189"></a>VALIDATE_REWRITE_EQUIVALENCE Procedure</h3>
<p>This procedure validates the specified rewrite equivalence declaration using the same validation method as described with the <code dir="ltr">VALIDATE</code> parameter in <a href="#i998649">&#34;VALIDATE_REWRITE_EQUIVALENCE Procedure&#34;</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref190"></a>Syntax</p>
<pre dir="ltr">DBMS_ADVANCED_REWRITE.VALIDATE_REWRITE_EQUIVALENCE (
   name         VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref191"></a>Parameters</p>
<div id="ARPLS65082" class="tblformal">
<p class="titleintable"><a id="sthref192"></a><a id="sthref193"></a>Table 18-6 VALIDATE_REWRITE_EQUIVALENCE Procedure Parameters</p>
<table class="cellalignment4330" title="VALIDATE_REWRITE_EQUIVALENCE Procedure Parameters" summary="This table describes the parameters of DBMS_ADVANCED_REWRITE.VALIDATE_REWRITE_EQUIVALENCE." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t8">Parameter</th>
<th class="cellalignment4328" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t8" headers="r1c1-t8">
<p><code dir="ltr">name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t8 r1c2-t8">
<p>A name for the equivalence declaration to validate. The name can be of the form owner.name, where owner complies with the rules for a schema name, and name compiles with the rules for a table name. Alternatively, a simple name that complies with the rules for a table name can be specified. In this case, the rewrite equivalence is validated in the current schema. The invoker must have sufficient privileges to execute both the <code dir="ltr">source_stmt</code> and <code dir="ltr">destination_stmt</code> of the specified equivalence declaration.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4320">
<tr>
<td class="cellalignment4329">
<table class="cellalignment4325">
<tr>
<td class="cellalignment4324"><a href="d_addm.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4324"><a href="d_advis.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4332">
<table class="cellalignment4323">
<tr>
<td class="cellalignment4324"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4324"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4324"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4324"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4324"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4324"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>