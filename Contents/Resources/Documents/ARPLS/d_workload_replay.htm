<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2379"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBMS_WORKLOAD_REPLAY"></a><title>DBMS_WORKLOAD_REPLAY</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1086"/>
<meta name="dcterms.created" content="2016-09-02T5:36:54Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"/>
<meta name="dcterms.identifier" content="E41829-07"/>
<meta name="dcterms.isVersionOf" content="ARPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="d_workload_capture.htm" title="Previous" type="text/html"/>
<link rel="Next" href="d_workload_repos.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41829-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">182/290</span> <!-- End Header -->
<div id="ARPLS208" class="chapter"><a id="CHDHHIDH"></a>
<h1 class="chapter"><span class="secnum">178</span> DBMS_WORKLOAD_REPLAY</h1>
<p>The <a id="sthref12472"></a><code dir="ltr">DBMS_WORKLOAD_REPLAY</code> package provides an interface to replay a workload capture.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RATUG" href="../RATUG/toc.htm"><span class="italic">Oracle Database Testing Guide</span></a> for more information about database replay</div>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDBJAAE">Using DBMS_WORKLOAD_REPLAY</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Security Model</p>
</li>
</ul>
</li>
<li>
<p><a href="#CHDFBAJA">Summary of DBMS_WORKLOAD_REPLAY Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="CHDBJAAE"></a>
<div id="ARPLS69067" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Using DBMS_WORKLOAD_REPLAY</h2>
<ul>
<li>
<p><a href="#BGBGIGID">Overview</a></p>
</li>
<li>
<p><a href="#CBADBEFF">Security Model</a></p>
</li>
</ul>
<div id="ARPLS74769" class="refsect2"><a id="BGBGIGID"></a>
<h3 class="refsect2">Overview</h3>
<p>The <code dir="ltr">DBMS_WORKLOAD_REPLAY</code> package provides an interface to replay a workload capture that was originally created by way of the <a href="d_workload_capture.htm#CHDHFBJE">DBMS_WORKLOAD_CAPTURE</a> package. Typically, the <code dir="ltr">DBMS_WORKLOAD_CAPTURE</code> package is used in the production system to capture a production workload, and the <code dir="ltr">DBMS_WORKLOAD_REPLAY</code> package is subsequently used in a test system to replay the captured production workload for testing purposes.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS69068" class="refsect2"><a id="CBADBEFF"></a>
<h3 class="refsect2">Security Model</h3>
<p>The following code describes the minimum set of privileges required to</p>
<ul>
<li>
<p>Create directory objects</p>
</li>
<li>
<p>Operate the interface provided by the <code dir="ltr">DBMS_WORKLOAD_CAPTURE</code> and <code dir="ltr">DBMS_WORKLOAD_REPLAY</code> packages</p>
</li>
<li>
<p>Act as a replay client user (wrc <code dir="ltr">someuser</code>/<code dir="ltr">somepassword</code> or wrc <code dir="ltr">USER=someuser</code> <code dir="ltr">PASSWORD=somepassword</code>)</p>
</li>
</ul>
<pre dir="ltr">DROP USER rom1 CASCADE;
CREATE USER rom1 IDENTIFIED BY rom1;
 
GRANT EXECUTE ON DBMS_WORKLOAD_CAPTURE TO rom1;
GRANT EXECUTE ON DBMS_WORKLOAD_REPLAY TO rom1;
 
GRANT CREATE SESSION TO rom1;
GRANT CREATE ANY DIRECTORY TO rom1;
GRANT SELECT_CATALOG_ROLE TO rom1;
GRANT BECOME USER TO rom1;
</pre>
<p>Appropriate OS permissions are required to access and manipulate files and directories on both the capture and replay system. The Oracle process(es) and the OS user performing the capture or replay must be able to access and manipulate at least one common directory accessible from the host where the instance is running.</p>
<p>The replay client is a multithreaded program (an executable named <code dir="ltr">wrc</code> located in the <code dir="ltr">$ORACLE_HOME/bin</code> directory) where each thread submits a workload from a captured session. The OS user performing the replay must be able to execute <code dir="ltr">wrc</code> on hosts that are used for the replay clients and be able to access the file system appropriately to be able to copy the capture to the replay clients&#39; hosts if required.</p>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="CHDFBAJA"></a>
<div id="ARPLS69069" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Summary of DBMS_WORKLOAD_REPLAY Subprograms</h2>
<p>This table lists the package subprograms in alphabetical order.</p>
<div id="ARPLS69070" class="tblformal">
<p class="titleintable"><a id="sthref12473"></a><a id="sthref12474"></a>Table 178-1 DBMS_WORKLOAD_REPLAY Package Subprograms</p>
<table class="cellalignment4330" title="DBMS_WORKLOAD_REPLAY Package Subprograms" summary="This table lists the DBMS_WORKLOAD_REPLAY subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t3">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t3" headers="r1c1-t3">
<p><a href="#BGBCAACH">ADD_CAPTURE Function</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t3 r1c2-t3">
<p>Adds the given capture to the current schedule</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t3" headers="r1c1-t3">
<p><a href="#BGBHIBIE">ADD_FILTER Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t3 r1c2-t3">
<p>Adds a filter to replay only a subset of the captured workload</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t3" headers="r1c1-t3">
<p><a href="#BGBEDGHC">ADD_SCHEDULE_ORDERING Function</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t3 r1c2-t3">
<p>Adds a schedule order between two captures</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t3" headers="r1c1-t3">
<p><a href="#BGBDHBJH">BEGIN_REPLAY_SCHEDULE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r5c1-t3 r1c2-t3">
<p>Initiates the creation of a reusable replay schedule</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t3" headers="r1c1-t3">
<p><a href="#CHDFBCDI">CALIBRATE Function</a></p>
</td>
<td class="cellalignment4329" headers="r6c1-t3 r1c2-t3">
<p>Operates on a processed workload capture directory to estimate the number of hosts and workload replay clients needed to faithfully replay the given workload</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t3" headers="r1c1-t3">
<p><a href="#CBADBCDC">CANCEL_REPLAY Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r7c1-t3 r1c2-t3">
<p>Cancels the workload replay in progress</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t3" headers="r1c1-t3">
<p><a href="#BGBGFDBG">COMPARE_PERIOD_REPORT Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r8c1-t3 r1c2-t3">
<p>Generates a report comparing a replay to its capture or to another replay of the same capture</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t3" headers="r1c1-t3">
<p><a href="#CBAFDIIC">COMPARE_SQLSET_REPORT Function</a></p>
</td>
<td class="cellalignment4329" headers="r9c1-t3 r1c2-t3">
<p>Generates a report comparing a sqlset captured during replay to one captured during workload capture or to one captured during another replay of the same capture</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t3" headers="r1c1-t3">
<p><a href="#BGBFEFFF">CREATE_FILTER_SET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r10c1-t3 r1c2-t3">
<p>Uses the replay filters added to create a set of filters to use against the replay in <code dir="ltr">replay_dir</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t3" headers="r1c1-t3">
<p><a href="#BGBJACAG">DELETE_FILTER Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r11c1-t3 r1c2-t3">
<p>Deletes the named filter</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t3" headers="r1c1-t3">
<p><a href="#BGBEGEAE">DELETE_REPLAY_INFO Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r12c1-t3 r1c2-t3">
<p>Deletes the rows in <code dir="ltr">DBA_WORKLOAD_REPLAYS</code> that corresponds to the given workload replay ID</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t3" headers="r1c1-t3">
<p><a href="#BGBCFCAI">END_REPLAY_SCHEDULE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r13c1-t3 r1c2-t3">
<p>Wraps up the creation of the current schedule</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t3" headers="r1c1-t3">
<p><a href="#BGBHGCEA">EXPORT_AWR Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r14c1-t3 r1c2-t3">
<p>Exports the Automatic Workload Repository (AWR) snapshots associated with a given replay ID</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t3" headers="r1c1-t3">
<p><a href="#BGBJBDJH">GENERATE_CAPTURE_SUBSET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r15c1-t3 r1c2-t3">
<p>Creates a new capture from an existing workload capture</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r16c1-t3" headers="r1c1-t3">
<p><a href="#BGBIHGFG">GET_DIVERGING_STATEMENT Function</a></p>
</td>
<td class="cellalignment4329" headers="r16c1-t3 r1c2-t3">
<p>Exports the Automatic Workload Repository (AWR) snapshots associated with a given replay ID</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r17c1-t3" headers="r1c1-t3">
<p><a href="#BGBIFEGD">GET_REPLAY_DIRECTORY Function</a></p>
</td>
<td class="cellalignment4329" headers="r17c1-t3 r1c2-t3">
<p>Returns the current replay directory set by the <a href="#CBABDBAG">SET_REPLAY_DIRECTORY Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r18c1-t3" headers="r1c1-t3">
<p><a href="#BGBJDDHC">GET_REPLAY_INFO Function</a></p>
</td>
<td class="cellalignment4329" headers="r18c1-t3 r1c2-t3">
<p>Retrieves information about the workload capture and the history of all the workload replay attempts from the related directory</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r19c1-t3" headers="r1c1-t3">
<p><a href="#CBAHDDAA">GET_REPLAY_TIMEOUT Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r19c1-t3 r1c2-t3">
<p>Retrieves the replay timeout setting</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r20c1-t3" headers="r1c1-t3">
<p><a href="#BGBFJABI">IMPORT_AWR Function</a></p>
</td>
<td class="cellalignment4329" headers="r20c1-t3 r1c2-t3">
<p>Imports the Automatic Workload Repository (AWR) snapshots associated with a given replay ID</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r21c1-t3" headers="r1c1-t3">
<p><a href="#BGBIEAIJ">INITIALIZE_CONSOLIDATED_REPLAY Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r21c1-t3 r1c2-t3">
<p>Puts the database state in <code dir="ltr">INIT</code> for a multiple-capture replay</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r22c1-t3" headers="r1c1-t3">
<p><a href="#CHDDDJBH">INITIALIZE_REPLAY Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r22c1-t3 r1c2-t3">
<p>Initializes replay, and loads specific data produced during processing into the database</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r23c1-t3" headers="r1c1-t3">
<p><a href="#BGBBJDIA">IS_REPLAY_PAUSED Function</a></p>
</td>
<td class="cellalignment4329" headers="r23c1-t3 r1c2-t3">
<p>Reports whether the replay is currently paused</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r24c1-t3" headers="r1c1-t3">
<p><a href="#CHDHCADH">PAUSE_REPLAY Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r24c1-t3 r1c2-t3">
<p>Pauses the in-progress workload replay</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r25c1-t3" headers="r1c1-t3">
<p><a href="#BGBCIGFB">POPULATE_DIVERGENCE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r25c1-t3 r1c2-t3">
<p>Precomputes the divergence information for the given call, stream, or the whole replay so that the <a href="#BGBIHGFG">GET_DIVERGING_STATEMENT Function</a> returns as quickly as possible for the precomputed calls</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r26c1-t3" headers="r1c1-t3">
<p><a href="#CBAFFDFE">PREPARE_REPLAY Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r26c1-t3 r1c2-t3">
<p>Puts the database in a special &#34;Prepare&#34; mode</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r27c1-t3" headers="r1c1-t3">
<p><a href="#BGBEGDAB">PREPARE_CONSOLIDATED_REPLAY Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r27c1-t3 r1c2-t3">
<p>Puts the database in a special &#34;Prepare&#34; mode for a multiple-capture replay</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r28c1-t3" headers="r1c1-t3">
<p><a href="#CHDHJIIH">PROCESS_CAPTURE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r28c1-t3 r1c2-t3">
<p>Processes the workload capture found in <code dir="ltr">capture_dir</code> in place</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r29c1-t3" headers="r1c1-t3">
<p><a href="#BGBHJAED">REMAP_CONNECTION Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r29c1-t3 r1c2-t3">
<p>Remaps the captured connection to a new one so that the user sessions can connect to the database in a desired way during workload replay</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r30c1-t3" headers="r1c1-t3">
<p><a href="#BGBDHBDI">REMOVE_CAPTURE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r30c1-t3 r1c2-t3">
<p>Removes the given capture from the current schedule</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r31c1-t3" headers="r1c1-t3">
<p><a href="#BGBHAHJI">REMOVE_SCHEDULE_ORDERING Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r31c1-t3 r1c2-t3">
<p>Removes an existing schedule order from the current replay schedule</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r32c1-t3" headers="r1c1-t3">
<p><a href="#CHDHJFDB">REPORT Function</a></p>
</td>
<td class="cellalignment4329" headers="r32c1-t3 r1c2-t3">
<p>Generates a report on the given workload replay</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r33c1-t3" headers="r1c1-t3">
<p><a href="#CBADIDCD">RESUME_REPLAY Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r33c1-t3 r1c2-t3">
<p>Resumes a paused workload replay</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r34c1-t3" headers="r1c1-t3">
<p><a href="#BGBEEBAE">REUSE_REPLAY_FILTER_SET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r34c1-t3 r1c2-t3">
<p>Reuses filters in the specified filter set as if each were added using the <a href="#BGBEDGHC">ADD_SCHEDULE_ORDERING Function</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r35c1-t3" headers="r1c1-t3">
<p><a href="#BGBHIACF">SET_ADVANCED_PARAMETER Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r35c1-t3 r1c2-t3">
<p>Sets an advanced parameter for replay besides the ones used with the <a href="#CBAFFDFE">PREPARE_REPLAY Procedure</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r36c1-t3" headers="r1c1-t3">
<p><a href="#CBABDBAG">SET_REPLAY_DIRECTORY Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r36c1-t3 r1c2-t3">
<p>Sets a directory that contains multiple workload captures as the current replay directory</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r37c1-t3" headers="r1c1-t3">
<p><a href="#BGBGGIIC">SET_REPLAY_TIMEOUT Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r37c1-t3 r1c2-t3">
<p>Sets the replay timeout setting</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r38c1-t3" headers="r1c1-t3">
<p><a href="#BGBGFDFI">SET_USER_MAPPING Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r38c1-t3 r1c2-t3">
<p>Sets a new schema or user name to be used during replay instead of the captured user</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r39c1-t3" headers="r1c1-t3">
<p><a href="#BGBFJGIH">START_CONSOLIDATED_REPLAY Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r39c1-t3 r1c2-t3">
<p>Starts the replay of a multiple-capture capture</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r40c1-t3" headers="r1c1-t3">
<p><a href="#CHDDEHHI">START_REPLAY Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r40c1-t3 r1c2-t3">
<p>Starts the workload replay</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r41c1-t3" headers="r1c1-t3">
<p><a href="#BGBCECGI">USE_FILTER_SET Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r41c1-t3 r1c2-t3">
<p>Uses the given filter set that has been created by calling the <a href="#BGBFEFFF">CREATE_FILTER_SET Procedure</a> to filter the current replay</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS73981" class="refsect2"><a id="BGBCAACH"></a>
<h3 class="refsect2"><a id="sthref12475"></a>ADD_CAPTURE Function</h3>
<p>This function adds the given capture to the current schedule. The directory has to be a valid capture processed in the current database&#39;s version. It returns a unique ID that identifies this capture within this schedule.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12476"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.ADD_CAPTURE (
   capture_dir_name      IN    VARCHAR2,
   start_delay_seconds   IN    NUMBER  DEFAULT 0,
   stop_replay           IN    BOOLEAN FALSE,
   take_begin_snapshot   IN    BOOLEAN TRUE,
   take_end_snapshot     IN    BOOLEAN TRUE,
   query_only            IN    BOOLEAN DEFAULT FALSE)
 RETURN NUMBER;

DBMS_WORKLOAD_REPLAY.ADD_CAPTURE (
   capture_dir_name      IN    VARCHAR2,
   start_delay_seconds   IN    NUMBER  DEFAULT 0,
   stop_replay           IN    BOOLEAN FALSE,
   take_begin_snapshot   IN    BOOLEAN TRUE,
   take_end_snapshot     IN    BOOLEAN TRUE,
   query_only            IN    VARCHAR2 DEFAULT &#39;N&#39;)
 RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12477"></a>Parameters</p>
<div id="ARPLS73982" class="tblformal">
<p class="titleintable"><a id="sthref12478"></a><a id="sthref12479"></a>Table 178-2 ADD_CAPTURE Function Parameters</p>
<table class="cellalignment4330" title="ADD_CAPTURE Function Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.ADD_CAPTURE." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t4">Parameter</th>
<th class="cellalignment4328" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t4" headers="r1c1-t4">
<p><code dir="ltr">capture_dir_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t4 r1c2-t4">
<p>Name of the OS directory containing the capture under the replay top-level directory</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t4" headers="r1c1-t4">
<p><code dir="ltr">start_delay_seconds</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t4 r1c2-t4">
<p>Delay time in seconds before the replay of this capture starts</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t4" headers="r1c1-t4">
<p><code dir="ltr">stop_replay</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t4 r1c2-t4">
<p>Stop the replay after it finishes</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t4" headers="r1c1-t4">
<p><code dir="ltr">take_begin_snapshot</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t4 r1c2-t4">
<p>Take an AWR snapshot when the replay of this capture starts</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t4" headers="r1c1-t4">
<p><code dir="ltr">take_end_snapshot</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t4 r1c2-t4">
<p>Take an AWR snapshot when the replay of this capture finishes</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t4" headers="r1c1-t4">
<p><code dir="ltr">query_only</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t4 r1c2-t4">
<p>Replay only the read-only queries of this workload capture</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12480"></a>Usage Notes</p>
<p>The <a href="#CBABDBAG">SET_REPLAY_DIRECTORY Procedure</a> must have already been called.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73983" class="refsect2"><a id="BGBHIBIE"></a>
<h3 class="refsect2"><a id="sthref12481"></a>ADD_FILTER Procedure</h3>
<p>This procedure adds a filter to replay only a subset of the captured workload.</p>
<p>The procedure adds a new filter that is used in the next replay filter set created using the <a href="#BGBFEFFF">CREATE_FILTER_SET Procedure</a>. This filter will be considered an &#34;<code dir="ltr">INCLUSION</code>&#34; or &#34;<code dir="ltr">EXCLUSION</code>&#34; filter depending on the argument passed to <code dir="ltr">CREATE_FILTER_SET</code> when creating the filter set.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12482"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.ADD_FILTER (
   fname          IN VARCHAR2,
   fattribute     IN VARCHAR2,
   fvalue         IN VARCHAR2);

DBMS_WORKLOAD_REPLAY.ADD_FILTER (
   fname          IN VARCHAR2,
   fattribute     IN VARCHAR2,
   fvalue         IN NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12483"></a>Parameters</p>
<div id="ARPLS73984" class="tblformal">
<p class="titleintable"><a id="sthref12484"></a><a id="sthref12485"></a>Table 178-3 ADD_FILTER Procedure Parameters</p>
<table class="cellalignment4330" title="ADD_FILTER Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.CALIBRATE." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t5">Parameter</th>
<th class="cellalignment4328" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t5" headers="r1c1-t5">
<p><code dir="ltr">fname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t5 r1c2-t5">
<p>(Mandatory) Name of the filter. Can be used to delete the filter later if it is not required.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t5" headers="r1c1-t5">
<p><code dir="ltr">fattribute</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t5 r1c2-t5">
<p>(Mandatory) Specifies the attribute on which the filter is defined as one of the following values of type <code dir="ltr">STRING</code> :</p>
<ul>
<li>
<p><code dir="ltr">USER</code></p>
</li>
<li>
<p><code dir="ltr">MODULE</code></p>
</li>
<li>
<p><code dir="ltr">ACTION</code></p>
</li>
<li>
<p><code dir="ltr">PROGRAM</code></p>
</li>
<li>
<p><code dir="ltr">SERVICE</code></p>
</li>
<li>
<p><code dir="ltr">CONNECTION_STRING</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t5" headers="r1c1-t5">
<p><code dir="ltr">fvalue</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t5 r1c2-t5">
<p>(Mandatory) Specifies the value to which the given &#39;attribute&#39; must be equal to for the filter to be considered active. Wildcards such as &#39;%&#39; are acceptable for all attributes that are of type <code dir="ltr">STRING</code>. Currently all the listed values of <code dir="ltr">fattribute</code> are of type <code dir="ltr">STRING</code>. <code dir="ltr">INSTANCE_NUMBER</code> is a <code dir="ltr">NUMBER</code> attribute. It is currently only supported for capture.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72130" class="refsect2"><a id="BGBEDGHC"></a>
<h3 class="refsect2"><a id="sthref12486"></a>ADD_SCHEDULE_ORDERING Function</h3>
<p>This function adds a schedule order between two captures. Together, <code dir="ltr">schedule_capture_id</code> and waitfor_capture_id form a schedule ordering that previously added by the <a href="#BGBEDGHC">ADD_SCHEDULE_ORDERING Function</a>. The order is that replay of capture indicated by <code dir="ltr">schedule_capture_id</code> will not start unless the replay of capture indicated by <code dir="ltr">waiting_for_capture_id</code> finishes.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12487"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.ADD_SCHEDULE_ORDERING (
   schedule_capture_id     IN VARCHAR2,
   waitfor_capture_id      IN VARCHAR2)
  RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12488"></a>Parameters</p>
<div id="ARPLS72131" class="tblformal">
<p class="titleintable"><a id="sthref12489"></a><a id="sthref12490"></a>Table 178-4 ADD_SCHEDULE_ORDERING Function Parameters</p>
<table class="cellalignment4330" title="ADD_SCHEDULE_ORDERING Function Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.ADD_SCHEDULE_ORDERING." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t6">Parameter</th>
<th class="cellalignment4328" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t6" headers="r1c1-t6">
<p><code dir="ltr">schedule_capture_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t6 r1c2-t6">
<p>Points to a capture that has been added to the current replay schedule. According to the new schedule ordering added by this subprogram, its replay will not start until the replay of another capture specified by <code dir="ltr">waitfor_capture_id</code> runs to completion.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t6" headers="r1c1-t6">
<p><code dir="ltr">waitfor_capture_id</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t6 r1c2-t6">
<p>Points to a capture that has been added to the current replay schedule. According to the new schedule ordering added by this subprogram, the replay of capture specified by <code dir="ltr">schedule_capture_id</code> will not start until the replay of this capture runs to completion.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12491"></a>Return Values</p>
<p>Returns a non-zero error code if the constraint cannot be added</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12492"></a>Usage Notes</p>
<p>The two captures must have already been added to the replay schedule.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73985" class="refsect2"><a id="BGBDHBJH"></a>
<h3 class="refsect2"><a id="sthref12493"></a>BEGIN_REPLAY_SCHEDULE Procedure</h3>
<p>This procedure initiates the creation of a reusable replay schedule.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12494"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.BEGIN_REPLAY_SCHEDULE  (
   replay_dir_obj     IN     VARCHAR2,
   schedule_name      IN     VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12495"></a>Parameters</p>
<div id="ARPLS73986" class="tblformal">
<p class="titleintable"><a id="sthref12496"></a><a id="sthref12497"></a>Table 178-5 BEGIN_REPLAY_SCHEDULE Procedure Parameters</p>
<table class="cellalignment4330" title="BEGIN_REPLAY_SCHEDULE Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.BEGIN_REPLAY_SCHEDULE." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t7">Parameter</th>
<th class="cellalignment4328" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t7" headers="r1c1-t7">
<p><code dir="ltr">replay_dir_obj</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t7 r1c2-t7">
<p>Directory object that points to the replay directory that contains all the capture directories involved in the schedule</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t7" headers="r1c1-t7">
<p><code dir="ltr">schedule_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t7 r1c2-t7">
<p>Name of the schedule to be replayed</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12498"></a>Usage Notes</p>
<ul>
<li>
<p>Only one schedule can be in creation mode at a time. Calling the subprogram again before <code dir="ltr">end_replay_schedule</code> will raise an error.</p>
</li>
<li>
<p>Prerequisites:</p>
<ul>
<li>
<p>The workload capture was already processed using the <a href="#CHDHJIIH">PROCESS_CAPTURE Procedure</a> in the same database version.</p>
</li>
<li>
<p>The user must have copied the capture directory appropriately.</p>
</li>
<li>
<p>The database is not in replay mode.</p>
</li>
<li>
<p>The <a href="#CBABDBAG">SET_REPLAY_DIRECTORY Procedure</a> has already been called.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69071" class="refsect2"><a id="CHDFBCDI"></a>
<h3 class="refsect2"><a id="sthref12499"></a>CALIBRATE Function</h3>
<p>This function operates on a processed workload capture directory to estimate the number of hosts and workload replay clients needed to faithfully replay the given workload. This function returns the results as an XML <code dir="ltr">CLOB</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12500"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.CALIBRATE (
   capture_dir          IN VARCHAR2,
   process_per_cpu      IN BINARY_INTEGER DEFAULT 4,
   threads_per_process  IN BINARY_INTEGER DEFAULT 50)
  RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12501"></a>Parameters</p>
<div id="ARPLS69072" class="tblformal">
<p class="titleintable"><a id="sthref12502"></a><a id="sthref12503"></a>Table 178-6 CALIBRATE Function Parameters</p>
<table class="cellalignment4330" title="CALIBRATE Function Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.CALIBRATE." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t8">Parameter</th>
<th class="cellalignment4328" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t8" headers="r1c1-t8">
<p><code dir="ltr">capture_dir</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t8 r1c2-t8">
<p>Name of the directory object that points to the (case sensitive) OS directory that contains processed capture data</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t8" headers="r1c1-t8">
<p><code dir="ltr">process_per_cpu</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t8 r1c2-t8">
<p>Maximum number of processes allowed for each CPU (default is 4)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t8" headers="r1c1-t8">
<p><code dir="ltr">threads_per_process</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t8 r1c2-t8">
<p>Maximum number of threads allowed for each process (default is 50)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12504"></a>Return Values</p>
<p>Returns a <code dir="ltr">CLOB</code> formatted as XML that contains:</p>
<ul>
<li>
<p>Information about the capture</p>
</li>
<li>
<p>Current database version</p>
</li>
<li>
<p>Input parameters to this function</p>
</li>
<li>
<p>Number of CPUs and replay clients needed to replay the given workload</p>
</li>
<li>
<p>Information about the sessions captured (total number and maximum concurrency)</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12505"></a>Usage Notes</p>
<ul>
<li>
<p>Prerequisite: The input workload capture was already processed using the <a href="#CHDHJIIH">PROCESS_CAPTURE Procedure</a> in the same database version.</p>
</li>
<li>
<p>This procedure will return the same results as the workload replay client in calibrate mode, which can be run as follows.</p>
<pre dir="ltr">$ wrc mode=calibrate replaydir=
</pre></li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69073" class="refsect2"><a id="CBADBCDC"></a>
<h3 class="refsect2"><a id="sthref12506"></a>CANCEL_REPLAY Procedure</h3>
<p>This procedure cancels workload replay in progress. All the external replay clients (WRC) will automatically be notified to stop issuing the captured workload and exit.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12507"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.CANCEL_REPLAY (
   error_msg    IN VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12508"></a>Parameters</p>
<div id="ARPLS69074" class="tblformal">
<p class="titleintable"><a id="sthref12509"></a><a id="sthref12510"></a>Table 178-7 CANCEL_REPLAY Procedure Parameters</p>
<table class="cellalignment4330" title="CANCEL_REPLAY Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.CANCEL_REPLAY." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t9">Parameter</th>
<th class="cellalignment4328" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t9" headers="r1c1-t9">
<p><code dir="ltr">error_msg</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t9 r1c2-t9">
<p>An optional reason for cancelling the replay can be passed which is recorded into <code dir="ltr">DBA_WORKLOAD_REPLAYS</code>.<code dir="ltr">ERROR_MESSAGE</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12511"></a>Usage Notes</p>
<p>Prerequisite: A call to the <a href="#CHDDDJBH">INITIALIZE_REPLAY Procedure</a>, or <a href="#CBAFFDFE">PREPARE_REPLAY Procedure</a>, or <a href="#CHDDEHHI">START_REPLAY Procedure</a> was already issued.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72132" class="refsect2"><a id="BGBGFDBG"></a>
<h3 class="refsect2"><a id="sthref12512"></a>COMPARE_PERIOD_REPORT Procedure</h3>
<p>This procedure generates a report comparing a replay to its capture or to another replay of the same capture.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12513"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.COMPARE_PERIOD_REPORT (
   replay_id1   IN   NUMBER,
   replay_id2   IN   NUMBER,
   format       IN   VARCHAR2,
   result       OUT  CLOB );
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12514"></a>Parameters</p>
<div id="ARPLS72133" class="tblformal">
<p class="titleintable"><a id="sthref12515"></a><a id="sthref12516"></a>Table 178-8 COMPARE_PERIOD_REPORT Procedure Parameters</p>
<table class="cellalignment4330" title="COMPARE_PERIOD_REPORT Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.CANCEL_REPLAY." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t10">Parameter</th>
<th class="cellalignment4328" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t10" headers="r1c1-t10">
<p><code dir="ltr">replay_id1</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t10 r1c2-t10">
<p>First ID of the workload replay whose report is requested</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t10" headers="r1c1-t10">
<p><code dir="ltr">replay_id2</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t10 r1c2-t10">
<p>Second ID of the workload replay whose report is requested. If this is <code dir="ltr">NULL</code>, then the comparison is done with the capture.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t10" headers="r1c1-t10">
<p><code dir="ltr">format</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t10 r1c2-t10">
<p>Specifies the report format. Valid values are <code dir="ltr">DBMS_WORKLOAD_CAPTURE</code>.<code dir="ltr">TYPE_HTML</code> and <code dir="ltr">DBMS_WORKLOAD_CAPTURE</code>.<code dir="ltr">TYPE_XML</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t10" headers="r1c1-t10">
<p><code dir="ltr">result</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t10 r1c2-t10">
<p>Output of the report (<code dir="ltr">CLOB</code>)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73101" class="refsect2"><a id="CBAFDIIC"></a>
<h3 class="refsect2"><a id="sthref12517"></a>COMPARE_SQLSET_REPORT Function</h3>
<p>This procedure generates a report comparing a sqlset captured during replay to one captured during workload capture or to one captured during another replay of the same capture.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12518"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.COMPARE_SQLSET_REPORT (
   replay_id1    IN NUMBER,
   replay_id2    IN NUMBER,
   format        IN VARCHAR2,
   r_level       IN VARCHAR2 DEFAULT &#39;ALL&#39;,
   r_sections    IN VARCHAR2 DEFAULT &#39;ALL&#39;,
   result        OUT CLOB )
  RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12519"></a>Parameters</p>
<div id="ARPLS73102" class="tblformal">
<p class="titleintable"><a id="sthref12520"></a><a id="sthref12521"></a>Table 178-9 COMPARE_SQLSET_REPORT Function Parameters</p>
<table class="cellalignment4330" title="COMPARE_SQLSET_REPORT Function Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.COMPARE_SQLSET_REPORT." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t11">Parameter</th>
<th class="cellalignment4328" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t11" headers="r1c1-t11">
<p><code dir="ltr">replay_id1</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t11 r1c2-t11">
<p>First ID of the workload replay after a change</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t11" headers="r1c1-t11">
<p><code dir="ltr">replay_id2</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t11 r1c2-t11">
<p>Second ID of the workload replay before a change. If this is <code dir="ltr">NULL</code>, then the comparison is done with the capture.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t11" headers="r1c1-t11">
<p><code dir="ltr">format</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t11 r1c2-t11">
<p>Specifies the report format. Valid values are <code dir="ltr">DBMS_WORKLOAD_CAPTURE</code>.<code dir="ltr">TYPE_HTML</code>, <code dir="ltr">DBMS_WORKLOAD_CAPTURE</code>.<code dir="ltr">TYPE_XML</code> and <code dir="ltr">DBMS_WORKLOAD_CAPTURE.TYPE_TEXT</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t11" headers="r1c1-t11">
<p><code dir="ltr">r_level</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t11 r1c2-t11">
<p>See <code dir="ltr">level</code> parameter in the <a href="d_sqlpa.htm#i1006953">REPORT_ANALYSIS_TASK Function</a> in the <a href="d_sqlpa.htm#CHEEEBDI">DBMS_SQLPA</a> package</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t11" headers="r1c1-t11">
<p><code dir="ltr">r_sections</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t11 r1c2-t11">
<p>See <code dir="ltr">section</code> parameter in the <a href="d_sqlpa.htm#i1006953">REPORT_ANALYSIS_TASK Function</a> in the <a href="d_sqlpa.htm#CHEEEBDI">DBMS_SQLPA</a> package</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t11" headers="r1c1-t11">
<p><code dir="ltr">result</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t11 r1c2-t11">
<p>Output of the report (<code dir="ltr">CLOB</code>)</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72134" class="refsect2"><a id="BGBFEFFF"></a>
<h3 class="refsect2"><a id="sthref12522"></a>CREATE_FILTER_SET Procedure</h3>
<p>This procedure creates a new filter set for the replays at <code dir="ltr">replay_dir</code>. It includes all the replay filters that have already been added by the <a href="#BGBHIBIE">ADD_FILTER Procedure</a>. After the procedure has completed and replay initiated, the newly-created filter set can be used to filter the replay in <code dir="ltr">replay_dir</code> by calling the <a href="#BGBCECGI">USE_FILTER_SET Procedure</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12523"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.CREATE_FILTER_SET(
   replay_dir       IN  VARCHAR2,
   filter_set       IN  VARCHAR2,
   default_action   IN  VARCHAR2 DEFAULT &#39;INCLUDE&#39;); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12524"></a>Parameters</p>
<div id="ARPLS72135" class="tblformal">
<p class="titleintable"><a id="sthref12525"></a><a id="sthref12526"></a>Table 178-10 CREATE_FILTER_SET Procedure Parameters</p>
<table class="cellalignment4330" title="CREATE_FILTER_SET Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.DELETE_REPLAY_INFO." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t12">Parameter</th>
<th class="cellalignment4328" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t12" headers="r1c1-t12">
<p><code dir="ltr">replay_dir</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t12 r1c2-t12">
<p>Object directory of the replay to be filtered</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t12" headers="r1c1-t12">
<p><code dir="ltr">filter_set</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t12 r1c2-t12">
<p>Name of the filter set to create (to use in <a href="#BGBCECGI">USE_FILTER_SET Procedure</a>)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t12" headers="r1c1-t12">
<p><code dir="ltr">default_action</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t12 r1c2-t12">
<p>Can be either <code dir="ltr">INCLUDE</code> or <code dir="ltr">EXCLUDE</code>. Determines whether, by default, every captured call must be replayed or not. Also determines whether the workload filters specified must be considered as <code dir="ltr">INCLUSION</code> filters or <code dir="ltr">EXCLUSION</code> filters.)</p>
<p>If it is <code dir="ltr">INCLUDE</code>, then by default all captured calls are replayed, except for the part of the workload defined by the filters. In this case, all the filters that were specified using the <a href="#BGBEDGHC">ADD_SCHEDULE_ORDERING Function</a> are treated as <code dir="ltr">EXCLUSION</code> filters, and will determine the workload that will not be replayed.</p>
<p>If it is <code dir="ltr">EXCLUDE</code>, then by default no captured call to the database is replayed, except for the part of the workload defined by the filters. In this case, all the filters that were specified using he <a href="#BGBEDGHC">ADD_SCHEDULE_ORDERING Function</a> are treated as <code dir="ltr">INCLUSION</code> filters, and will determine the workload that is replayed.</p>
<p>Default: <code dir="ltr">INCLUDE</code> and all the filters specified are assumed to be <code dir="ltr">EXCLUSION</code> filters</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12527"></a>Usage Notes</p>
<p>This operation must be invoked when no replay is initialized, prepared, or in progress.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72136" class="refsect2"><a id="BGBJACAG"></a>
<h3 class="refsect2"><a id="sthref12528"></a>DELETE_FILTER Procedure</h3>
<p>This procedure deletes the named filter.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12529"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.DELETE_FILTER(
   fname    IN  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12530"></a>Parameters</p>
<div id="ARPLS72137" class="tblformal">
<p class="titleintable"><a id="sthref12531"></a><a id="sthref12532"></a>Table 178-11 DELETE_FILTER Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_FILTER Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.DELETE_REPLAY_INFO." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t13">Parameter</th>
<th class="cellalignment4328" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t13" headers="r1c1-t13">
<p><code dir="ltr">fname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t13 r1c2-t13">
<p>(Mandatory) Name of the filter that must be deleted</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69075" class="refsect2"><a id="BGBEGEAE"></a>
<h3 class="refsect2"><a id="sthref12533"></a>DELETE_REPLAY_INFO Procedure</h3>
<p>This procedure deletes the rows in <code dir="ltr">DBA_WORKLOAD_REPLAYS</code> that correspond to the given workload replay ID.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12534"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.DELETE_REPLAY_INFO (
   replay_id    IN  NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12535"></a>Parameters</p>
<div id="ARPLS69076" class="tblformal">
<p class="titleintable"><a id="sthref12536"></a><a id="sthref12537"></a>Table 178-12 DELETE_REPLAY_INFO Procedure Parameters</p>
<table class="cellalignment4330" title="DELETE_REPLAY_INFO Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.DELETE_REPLAY_INFO." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t14">Parameter</th>
<th class="cellalignment4328" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t14" headers="r1c1-t14">
<p><code dir="ltr">replay_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t14 r1c2-t14">
<p>(Mandatory) ID of the workload replay that must be deleted. Corresponds to <code dir="ltr">DBA_WORKLOAD_REPLAYS</code>.<code dir="ltr">ID</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73987" class="refsect2"><a id="BGBCFCAI"></a>
<h3 class="refsect2"><a id="sthref12538"></a>END_REPLAY_SCHEDULE Procedure</h3>
<p>This procedure wraps up the creation of the current schedule. The schedule is now saved and associated with the replay directory and can be used for a replay.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12539"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.END_REPLAY_SCHEDULE;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12540"></a>Usage Notes</p>
<p>The <a href="#BGBDHBJH">BEGIN_REPLAY_SCHEDULE Procedure</a> must have already been called.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69077" class="refsect2"><a id="BGBHGCEA"></a>
<h3 class="refsect2"><a id="sthref12541"></a>EXPORT_AWR Procedure</h3>
<p>This procedure exports the AWR snapshots associated with a stipulated replay ID.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12542"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.EXPORT_AWR (
   replay_id    IN  NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12543"></a>Parameters</p>
<div id="ARPLS69078" class="tblformal">
<p class="titleintable"><a id="sthref12544"></a><a id="sthref12545"></a>Table 178-13 EXPORT_AWR Function Parameters</p>
<table class="cellalignment4330" title="EXPORT_AWR Function Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.EXPORT_AWR." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t15">Parameter</th>
<th class="cellalignment4328" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t15" headers="r1c1-t15">
<p><code dir="ltr">replay_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t15 r1c2-t15">
<p>(Mandatory) ID of the replay whose AWR snapshots are to be exported</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12546"></a>Usage Notes</p>
<ul>
<li>
<p>At the end of each replay, the corresponding AWR snapshots are automatically exported. Consequently, there is no need to do this manually after a workload replay is complete, unless the automatic <code dir="ltr">EXPORT_AWR</code> invocation failed.</p>
</li>
<li>
<p>This procedure will work only if the corresponding workload replay was performed in the current database (meaning that the corresponding row in <code dir="ltr">DBA_WORKLOAD_REPLAYS</code> was not created by calling the <a href="#BGBJDDHC">GET_REPLAY_INFO Function</a>) and the AWR snapshots that correspond to that replay time period are still available.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73988" class="refsect2"><a id="BGBJBDJH"></a>
<h3 class="refsect2"><a id="sthref12547"></a>GENERATE_CAPTURE_SUBSET Procedure</h3>
<p>This procedure creates a new capture from an existing workload capture.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12548"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.GENERATE_CAPTURE_SUBSET (
   input_capture_dir          IN   VARCHAR2,
   output_capture_dir         IN   VARCHAR2,
   new_capture_name           IN   VARCHAR2,
   begin_time                 IN   NUMBER,
   begin_include_incomplete   IN   BOOLEAN DEFAULT TRUE,
   end_time                   IN   NUMBER,
   end_include_incomplete     IN   BOOLEAN DEFAULT FALSE,
   parallel_level             IN   NUMBER DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12549"></a>Parameters</p>
<div id="ARPLS73989" class="tblformal">
<p class="titleintable"><a id="sthref12550"></a><a id="sthref12551"></a>Table 178-14 GENERATE_CAPTURE_SUBSET Procedure Parameters</p>
<table class="cellalignment4330" title="GENERATE_CAPTURE_SUBSET Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.GENERATE_CAPTURE_SUBSET." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t16">Parameter</th>
<th class="cellalignment4328" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t16" headers="r1c1-t16">
<p><code dir="ltr">input_capture_dir</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t16 r1c2-t16">
<p>(Mandatory) Name of the directory object that points to an existing workload capture</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t16" headers="r1c1-t16">
<p><code dir="ltr">output_capture_dir</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t16 r1c2-t16">
<p>(Mandatory) Name of the directory object that points to the new capture</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t16" headers="r1c1-t16">
<p><code dir="ltr">new_capture_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t16 r1c2-t16">
<p>(Mandatory) Name of new capture</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t16" headers="r1c1-t16">
<p><code dir="ltr">begin_time</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t16 r1c2-t16">
<p>Start of the time range - time offset in seconds from the start of a workload capture</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t16" headers="r1c1-t16">
<p><code dir="ltr">begin_include_incomplete</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t16 r1c2-t16">
<p>Column to include incomplete calls caused by <code dir="ltr">begin_time</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t16" headers="r1c1-t16">
<p><code dir="ltr">end_time</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t16 r1c2-t16">
<p>End of the time range - time offset in seconds from the start of a workload capture. If <code dir="ltr">end_time</code> is zero or <code dir="ltr">end_time</code> is less or equal than <code dir="ltr">begin_time</code>, the time range is invalid. The new capture will use the whole duration of the input capture.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t16" headers="r1c1-t16">
<p><code dir="ltr">end_include_incomplete</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t16 r1c2-t16">
<p>Column to include incomplete calls caused by <code dir="ltr">end_time</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t16" headers="r1c1-t16">
<p><code dir="ltr">parallel_level</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t16 r1c2-t16">
<p>Number of Oracle processes used to process the input captures in a parallel fashion. The <code dir="ltr">NULL</code> default value will auto-compute the parallelism level based on number of CPUs, whereas a value of 1 will enforce serial execution.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72138" class="refsect2"><a id="BGBIHGFG"></a>
<h3 class="refsect2"><a id="sthref12552"></a>GET_DIVERGING_STATEMENT Function</h3>
<p>This function retrieves information about a diverging call, including the statement text, the SQL ID, and the binds. If the replay of a recorded user call has data or error divergence, it is a diverging call.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12553"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.GET_DIVERGING_STATEMENT (
   replay_id    IN NUMBER,
   stream_id    IN NUMBER,
   call_counter IN NUMBER)
  RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12554"></a>Parameters</p>
<div id="ARPLS72139" class="tblformal">
<p class="titleintable"><a id="sthref12555"></a><a id="sthref12556"></a>Table 178-15 GET_DIVERGING_STATEMENT Function Parameters</p>
<table class="cellalignment4330" title="GET_DIVERGING_STATEMENT Function Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.EXPORT_AWR." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t17">Parameter</th>
<th class="cellalignment4328" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t17" headers="r1c1-t17">
<p><code dir="ltr">replay_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t17 r1c2-t17">
<p>ID of the replay in which that call diverged</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t17" headers="r1c1-t17">
<p><code dir="ltr">stream_id</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t17 r1c2-t17">
<p>Stream ID of the diverging call</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t17" headers="r1c1-t17">
<p><code dir="ltr">call_counter</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t17 r1c2-t17">
<p>Call counter of the diverging call</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12557"></a>Usage Notes</p>
<ul>
<li>
<p>Returns a <code dir="ltr">CLOB</code> formatted as XML that contains:</p>
<ul>
<li>
<p>SQL ID</p>
</li>
<li>
<p>SQL Text</p>
</li>
<li>
<p>Bind information: position, name and value</p>
</li>
</ul>
</li>
<li>
<p>This function will silently invoke the <a href="#BGBCIGFB">POPULATE_DIVERGENCE Procedure</a> to read the information from the capture files. Therefore, if divergence has not been populated, then the first call to this function for a particular diverging call might take longer, especially in very large captures.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73993" class="refsect2"><a id="BGBIFEGD"></a>
<h3 class="refsect2"><a id="sthref12558"></a>GET_REPLAY_DIRECTORY Function</h3>
<p>This function returns the current replay directory set by the <a href="#CBABDBAG">SET_REPLAY_DIRECTORY Procedure</a>. It returns <code dir="ltr">NULL</code> if no replay directory has been set.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12559"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.GET_REPLAY_DIRECTORY
   RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69079" class="refsect2"><a id="BGBJDDHC"></a>
<h3 class="refsect2"><a id="sthref12560"></a>GET_REPLAY_INFO Function</h3>
<p>This function retrieves information about the workload capture and the history of all the workload replay attempts from the stipulated directory.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12561"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.GET_REPLAY_INFO (
   dir    IN VARCHAR2)
 RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12562"></a>Parameters</p>
<div id="ARPLS69080" class="tblformal">
<p class="titleintable"><a id="sthref12563"></a><a id="sthref12564"></a>Table 178-16 GET_REPLAY_INFO Function Parameters</p>
<table class="cellalignment4330" title="GET_REPLAY_INFO Function Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.GET_REPLAY_INFO." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t18">Parameter</th>
<th class="cellalignment4328" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t18" headers="r1c1-t18">
<p><code dir="ltr">dir</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t18 r1c2-t18">
<p>(Mandatory) Name of the workload replay directory object (case sensitive).</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12565"></a>Return Values</p>
<p>The procedure returns the <code dir="ltr">CAPTURE_ID</code>, which can be associated with both <code dir="ltr">DBA_WORKLOAD_CAPTURES</code>.<code dir="ltr">ID</code> and <code dir="ltr">DBA_WORKLOAD_REPLAYS</code>.<code dir="ltr">CAPTURE_ID</code> to access the imported information.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12566"></a>Usage Notes</p>
<ul>
<li>
<p>The procedure first imports a row into <code dir="ltr">DBA_WORKLOAD_CAPTURES</code> which will contain information about the capture. It then imports a row for every replay attempt retrieved from the given replay directory into <code dir="ltr">DBA_WORKLOAD_REPLAYS</code>.</p>
</li>
<li>
<p>The procedure will not insert new rows to <code dir="ltr">DBA_WORKLOAD_CAPTURES</code> and <code dir="ltr">DBA_WORKLOAD_REPLAYS</code> if these views already contain rows describing the capture and replay history present in the given directory.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73103" class="refsect2"><a id="CBAHDDAA"></a>
<h3 class="refsect2"><a id="sthref12567"></a>GET_REPLAY_TIMEOUT Procedure</h3>
<p>This procedure gets the replay timeout setting.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12568"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.GET_REPLAY_TIMEOUT (
   enabled       OUT  BOOLEAN, 
   min_delay     OUT  NUMBER,
   max_delay     OUT  NUMBER,
   delay_factor  OUT  NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12569"></a>Parameters</p>
<div id="ARPLS73104" class="tblformal">
<p class="titleintable"><a id="sthref12570"></a><a id="sthref12571"></a>Table 178-17 GET_REPLAY_TIMEOUT Procedure Parameters</p>
<table class="cellalignment4330" title="GET_REPLAY_TIMEOUT Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.GET_REPLAY_TIMEOUT." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t19">Parameter</th>
<th class="cellalignment4328" id="r1c2-t19">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t19" headers="r1c1-t19">
<p><code dir="ltr">enabled</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t19 r1c2-t19">
<p><code dir="ltr">TRUE</code> if the timeout action is enabled, <code dir="ltr">FALSE</code> otherwise.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t19" headers="r1c1-t19">
<p><code dir="ltr">min_delay</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t19 r1c2-t19">
<p>Lower bound of call delay in minutes. The replay action is activated only when the delay is equal to or more than <code dir="ltr">min_delay</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t19" headers="r1c1-t19">
<p><code dir="ltr">max_delay</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t19 r1c2-t19">
<p>Upper bound of call delay in minutes. The timeout action throws <code dir="ltr">ORA-15569</code> when the delay is more than <code dir="ltr">max_delay</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t19" headers="r1c1-t19">
<p><code dir="ltr">delay_factor</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t19 r1c2-t19">
<p>Factor for the call delay that is between <code dir="ltr">min_delay</code> and <code dir="ltr">max_delay</code>. The timeout action throws <code dir="ltr">ORA-15569</code> when the current replay elapsed time is more than the product of capture elapsed time and <code dir="ltr">delay_factor</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12572"></a>Usage Notes</p>
<p>This procedure can be called anytime during replay.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69081" class="refsect2"><a id="BGBFJABI"></a>
<h3 class="refsect2"><a id="sthref12573"></a>IMPORT_AWR Function</h3>
<p>This procedure imports the AWR snapshots from a given replay.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12574"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.IMPORT_AWR (
   replay_id       IN   NUMBER,
   staging_schema  IN   VARCHAR2)
  RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12575"></a>Parameters</p>
<div id="ARPLS69082" class="tblformal">
<p class="titleintable"><a id="sthref12576"></a><a id="sthref12577"></a>Table 178-18 IMPORT_AWR Function Parameters</p>
<table class="cellalignment4330" title="IMPORT_AWR Function Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.IMPORT_AWR." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t20">Parameter</th>
<th class="cellalignment4328" id="r1c2-t20">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t20" headers="r1c1-t20">
<p><code dir="ltr">replay_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t20 r1c2-t20">
<p>(Mandatory) ID of the replay whose AWR snapshots must be imported</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t20" headers="r1c1-t20">
<p><code dir="ltr">staging_schema</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t20 r1c2-t20">
<p>(Mandatory) Name of a valid schema in the current database which can be used as a staging area while importing the AWR snapshots from the replay directory to the <code dir="ltr">SYS</code> <code dir="ltr">AWR</code> schema. The <code dir="ltr">SYS</code> schema is not a valid input.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12578"></a>Return Values</p>
<p>Returns the new randomly generated database ID that was used to import the AWR snapshots. The same value can be found in the <code dir="ltr">AWR_DBID</code> column in the <code dir="ltr">DBA_WORKLOAD_REPLAYS</code> view.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12579"></a>Usage Notes</p>
<ul>
<li>
<p>This procedure will work provided those AWR snapshots were exported earlier from the original replay system using the <a href="#BGBHGCEA">EXPORT_AWR Procedure</a>.</p>
</li>
<li>
<p><code dir="ltr">IMPORT_AWR</code> will fail if the <code dir="ltr">staging_schema</code> provided as input contains any tables with the same name as any of the AWR tables, such as <code dir="ltr">WRM$_SNAPSHOT</code> or <code dir="ltr">WRH$_PARAMETER</code>. Drop any such tables in the <code dir="ltr">staging_schema</code> before invoking <code dir="ltr">IMPORT_AWR</code>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73994" class="refsect2"><a id="BGBIEAIJ"></a>
<h3 class="refsect2"><a id="sthref12580"></a>INITIALIZE_CONSOLIDATED_REPLAY Procedure</h3>
<p>This procedure puts the database state in <code dir="ltr">INIT</code> for a multiple-capture replay. It uses the <code dir="ltr">replay_dir</code> which has already been defined by the <a href="#CBABDBAG">SET_REPLAY_DIRECTORY Procedure</a>, pointing to a directory that contains all the capture directories involved in the schedule. It reads data about schedule <code dir="ltr">schedule_name</code> from the directory, and loads required connection data into the replay system.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12581"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.INITIALIZE_CONSOLIDATED_REPLAY (
   replay_name        IN    VARCHAR2,
   schedule_name      IN    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12582"></a>Parameters</p>
<div id="ARPLS73995" class="tblformal">
<p class="titleintable"><a id="sthref12583"></a><a id="sthref12584"></a>Table 178-19 INITIALIZE_CONSOLIDATED_REPLAY Procedure Parameters</p>
<table class="cellalignment4330" title="INITIALIZE_CONSOLIDATED_REPLAY Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAYINITIALIZE_CONSOLIDATED_REPLAY." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t21">Parameter</th>
<th class="cellalignment4328" id="r1c2-t21">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t21" headers="r1c1-t21">
<p><code dir="ltr">replay_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t21 r1c2-t21">
<p>(Mandatory) Name of the workload replay. Every replay of a processed workload capture can be given a name.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t21" headers="r1c1-t21">
<p><code dir="ltr">schedule_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t21 r1c2-t21">
<p>Name of the schedule to be replayed. It must have been created through the <a href="#BGBDHBJH">BEGIN_REPLAY_SCHEDULE Procedure</a> for the replay directory <code dir="ltr">replay_dir</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12585"></a>Usage Notes</p>
<p>Prerequisites:</p>
<ul>
<li>
<p>Workload capture was already processed using the <a href="#CHDHJIIH">PROCESS_CAPTURE Procedure</a> in the same database version.</p>
</li>
<li>
<p>Database state has been logically restored to what it was at the beginning of the original workload capture.</p>
</li>
<li>
<p>The <a href="#CBABDBAG">SET_REPLAY_DIRECTORY Procedure</a> has been called.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69083" class="refsect2"><a id="CHDDDJBH"></a>
<h3 class="refsect2"><a id="sthref12586"></a>INITIALIZE_REPLAY Procedure</h3>
<p>This procedure puts the database state in <code dir="ltr">INIT</code> for <code dir="ltr">REPLAY</code> mode, and loads data into the replay system that is required before preparing for the replay (by executing the <a href="#CHDHCADH">PAUSE_REPLAY Procedure</a>).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12587"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.INITIALIZE_REPLAY (
   replay_name     IN  VARCHAR2,
   replay_dir      IN  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12588"></a>Parameters</p>
<div id="ARPLS69084" class="tblformal">
<p class="titleintable"><a id="sthref12589"></a><a id="sthref12590"></a>Table 178-20 INITIALIZE_REPLAY Procedure Parameters</p>
<table class="cellalignment4330" title="INITIALIZE_REPLAY Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.INITIALIZE_REPLAY." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t22">Parameter</th>
<th class="cellalignment4328" id="r1c2-t22">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t22" headers="r1c1-t22">
<p><code dir="ltr">replay_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t22 r1c2-t22">
<p>(Mandatory) Name of the workload replay. Every replay of a processed workload capture can be given a name.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t22" headers="r1c1-t22">
<p><code dir="ltr">replay_dir</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t22 r1c2-t22">
<p>Name of the directory object that points to the OS directory (case sensitive) that contains processed capture data</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12591"></a>Usage Notes</p>
<ul>
<li>
<p>Prerequisites:</p>
<ul>
<li>
<p>Workload capture was already processed using the <a href="#CHDHJIIH">PROCESS_CAPTURE Procedure</a> in the same database version.</p>
</li>
<li>
<p>Database state has been logically restored to what it was at the beginning of the original workload capture.</p>
</li>
</ul>
</li>
<li>
<p>The subprogram loads data into the replay system that is required before preparing for the replay by calling the <a href="#CHDHCADH">PAUSE_REPLAY Procedure</a>.</p>
<p>For instance, during capture the user may record the connection string each session used to connect to the server. The <a href="#CHDDDJBH">INITIALIZE_REPLAY Procedure</a> loads this data and allows the user to re-map the recorded connection string to new connection strings or service points.</p>
<p>Elaborating on the example described in the <a href="#CHDHJIIH">PROCESS_CAPTURE Procedure</a>, the user could invoke the following:</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.INITIALIZE_REPLAY(&#39;replay foo #1&#39;, &#39;rec_dir&#39;);
</pre>
<p>This command will load up the connection map and by default will set all replay time connection strings to be equal to <code dir="ltr">NULL</code>. A <code dir="ltr">NULL</code> replay time connection string means that the workload replay clients (WRCs) will connect to the default host as determined by the replay client&#39;s runtime environment settings. The user can change a particular connection string to a new one (or a new service point) for replay by using the <a href="#BGBHJAED">REMAP_CONNECTION Procedure</a>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72140" class="refsect2"><a id="BGBBJDIA"></a>
<h3 class="refsect2"><a id="sthref12592"></a>IS_REPLAY_PAUSED Function</h3>
<p>This function reports whether the replay is currently paused.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12593"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.IS_REPLAY_PAUSED
   RETURN BOOLEAN;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12594"></a>Return Values</p>
<p>Returns <code dir="ltr">TRUE</code> if the <a href="#CHDHCADH">PAUSE_REPLAY Procedure</a> has been called successfully and the <a href="#CBADIDCD">RESUME_REPLAY Procedure</a> has not been called yet.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12595"></a>Usage Notes</p>
<p>A call to the <a href="#CHDDEHHI">START_REPLAY Procedure</a> must have already been issued as a prerequisite.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69085" class="refsect2"><a id="CHDHCADH"></a>
<h3 class="refsect2"><a id="sthref12596"></a>PAUSE_REPLAY Procedure</h3>
<p>This procedure pauses the in-progress workload replay. All subsequent user calls from the replay clients will be stalled until either a call to the <a href="#CBADIDCD">RESUME_REPLAY Procedure</a> is issued or the replay is cancelled.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12597"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.PAUSE_REPLAY;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12598"></a>Usage Notes</p>
<ul>
<li>
<p>Prerequisite: A call to the <a href="#CHDDEHHI">START_REPLAY Procedure</a> must have already been issued.</p>
</li>
<li>
<p>User calls that were already in-progress when this procedure was invoked are allowed to run to completion. Only subsequent user calls, when issued, are paused.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72141" class="refsect2"><a id="BGBCIGFB"></a>
<h3 class="refsect2"><a id="sthref12599"></a>POPULATE_DIVERGENCE Procedure</h3>
<p>This procedure precomputes the divergence information for the given call, stream, or the whole replay so that the <a href="#BGBIHGFG">GET_DIVERGING_STATEMENT Function</a> returns as quickly as possible for the precomputed calls.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12600"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.POPULATE_DIVERGENCE (
   replay_id    IN   NUMBER,
   stream_id    IN   NUMBER DEFAULT NULL,
   call_counter IN   NUMBER DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12601"></a>Parameters</p>
<div id="ARPLS72142" class="tblformal">
<p class="titleintable"><a id="sthref12602"></a><a id="sthref12603"></a>Table 178-21 POPULATE_DIVERGENCE Procedure Parameters</p>
<table class="cellalignment4330" title="POPULATE_DIVERGENCE Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.POPULATE_DIVERGENCE." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t23">Parameter</th>
<th class="cellalignment4328" id="r1c2-t23">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t23" headers="r1c1-t23">
<p><code dir="ltr">replay_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t23 r1c2-t23">
<p>ID of the replay</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t23" headers="r1c1-t23">
<p><code dir="ltr">stream_id</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t23 r1c2-t23">
<p>Stream ID of the diverging call. If <code dir="ltr">NULL</code> is provided, then divergence information is precomputed for all diverging calls in the given replay.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t23" headers="r1c1-t23">
<p><code dir="ltr">call_counter</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t23 r1c2-t23">
<p>Call counter of the diverging call. If <code dir="ltr">NULL</code> is provided, then divergence information is precomputed for all diverging calls in the given stream.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69086" class="refsect2"><a id="CBAFFDFE"></a>
<h3 class="refsect2"><a id="sthref12604"></a>PREPARE_REPLAY Procedure</h3>
<p>This procedure puts the database state in <code dir="ltr">PREPARE FOR REPLAY</code> mode.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12605"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.PREPARE_REPLAY (
   synchronization           IN BOOLEAN   DEFAULT TRUE,
   connect_time_scale        IN NUMBER    DEFAULT 100,
   think_time_scale          IN NUMBER    DEFAULT 100,
   think_time_auto_correct   IN BOOLEAN   DEFAULT TRUE,
   scale_up_multiplier       IN NUMBER    DEFAULT 1,
   capture_sts               IN BOOLEAN   DEFAULT FALSE,
   sts_cap_interval          IN NUMBER    DEFAULT 300);

DBMS_WORKLOAD_REPLAY.PREPARE_REPLAY (
   synchronization           IN VARCHAR2  DEFAULT &#39;OBJECT_ID&#39;,
   connect_time_scale        IN NUMBER    DEFAULT 100,
   think_time_scale          IN NUMBER    DEFAULT 100,
   think_time_auto_correct   IN BOOLEAN   DEFAULT TRUE,
   scale_up_multiplier       IN NUMBER    DEFAULT 1,
   capture_sts               IN BOOLEAN   DEFAULT FALSE,
   sts_cap_interval          IN NUMBER    DEFAULT 300);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12606"></a>Parameters</p>
<div id="ARPLS69087" class="tblformal">
<p class="titleintable"><a id="sthref12607"></a><a id="sthref12608"></a>Table 178-22 PREPARE_REPLAY Procedure Parameters</p>
<table class="cellalignment4330" title="PREPARE_REPLAY Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.PREPARE_REPLAY." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t24">Parameter</th>
<th class="cellalignment4328" id="r1c2-t24">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t24" headers="r1c1-t24">
<p><code dir="ltr">synchronization</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t24 r1c2-t24">
<p>Turns synchronization <code dir="ltr">ON</code> or <code dir="ltr">OFF</code> during workload replay.</p>
<ul>
<li>
<p><code dir="ltr">OFF</code> - Workload replay runs asynchronously.</p>
</li>
<li>
<p><code dir="ltr">SCN</code> - The <code dir="ltr">COMMIT</code> order observed during the original workload capture is preserved during replay. Every action that is replayed is executed only after all of its dependent <code dir="ltr">COMMIT</code>s (all <code dir="ltr">COMMIT</code>s that were issued before the given action in the original workload capture) have finished execution.</p>
</li>
<li>
<p><code dir="ltr">OBJECT_ID</code> - This is the default, and uses a more advanced synchronization scheme. Every action that is replayed is executed only after the relevant <code dir="ltr">COMMIT</code>s have finished executing. The relevant <code dir="ltr">COMMIT</code>s are the ones that were issued before the given action in the original workload capture and that had modified at least one of the database objects the given action is referencing (either implicitly or explicitly). This <code dir="ltr">OBJECT_ID</code> scheme has the same logical property of making sure that any action will see the same data it saw during capture, but will allow more concurrency during replays for the actions that do not touch the same objects/tables.</p>
</li>
</ul>
<p>For legacy reasons, there is a boolean version of this procedure:</p>
<ul>
<li>
<p><code dir="ltr">TRUE</code> means <code dir="ltr">&#39;OBJECT_ID&#39;</code></p>
</li>
<li>
<p><code dir="ltr">FALSE</code> means <code dir="ltr">&#39;OFF&#39;</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t24" headers="r1c1-t24">
<p><code dir="ltr">connect_time_scale</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t24 r1c2-t24">
<p>Scales the time elapsed between the instant the workload capture was started and the session connects with the given value. The input is interpreted as a % value. Can potentially be used to increase or decrease the number of concurrent users during the workload replay. <code dir="ltr">DEFAULT</code> <code dir="ltr">VALUE</code> is 100. See <a href="#CBACAADJ">&#34;Application of the connect_time_scale Parameter&#34;</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t24" headers="r1c1-t24">
<p><code dir="ltr">think_time_scale</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t24 r1c2-t24">
<p>Scales the time elapsed between two successive user calls from the same session. The input is interpreted as a % value. Can potentially be used to increase or decrease the number of concurrent users during the workload replay. <code dir="ltr">DEFAULT</code> <code dir="ltr">VALUE</code> is 100. See <a href="#CBAFIIJD">&#34;Application of the think_time_scale Parameter&#34;</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t24" headers="r1c1-t24">
<p><code dir="ltr">think_time_auto_correct</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t24 r1c2-t24">
<p>Auto corrects the think time between calls appropriately when a user call takes longer to complete during replay than during the original capture. <code dir="ltr">DEFAULT</code> is <code dir="ltr">TRUE</code> which is to reduce think time if replay goes slower than capture. See <a href="#CBAIGDIG">&#34;Application of the think_time_auto_correct Parameter&#34;</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t24" headers="r1c1-t24">
<p><code dir="ltr">scale_up_multiplier</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t24 r1c2-t24">
<p>Defines the number of times the query workload is scaled up during replay. Each captured session is replayed concurrently as many times as the value of the <code dir="ltr">scale_up_multiplier</code>. However, only one of the sessions in each set of identical replay sessions executes both queries and updates. The remaining sessions only execute queries.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t24" headers="r1c1-t24">
<p><code dir="ltr">capture_sts</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t24 r1c2-t24">
<p>If this parameter is <code dir="ltr">TRUE</code>, then a SQL tuning set capture is also started in parallel with workload replay. The resulting SQL tuning set can be exported using the <a href="#BGBHGCEA">EXPORT_AWR Procedure</a> along with the AWR data. Currently, parallel SQL tuning set (STS) capture is not supported in an Oracle RAC environment. So, this parameter has no effect in that context. The calling user must have the appropriate privileges (&#39;<code dir="ltr">ADMINISTER SQL TUNING SET</code>&#39;). The default value is <code dir="ltr">FALSE</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t24" headers="r1c1-t24">
<p><code dir="ltr">sts_cap_interval</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t24 r1c2-t24">
<p>Specifies the capture interval of the SQL set capture from the cursor cache in seconds. The default value is 300.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12609"></a>Usage Notes</p>
<ul>
<li>
<p>Prerequisites:</p>
<ul>
<li>
<p>The database has been initialized for replay using the <a href="#CHDDDJBH">INITIALIZE_REPLAY Procedure</a>.</p>
</li>
<li>
<p>Any capture time connection strings that require remapping have been already done using the <a href="#BGBHJAED">REMAP_CONNECTION Procedure</a>.</p>
</li>
</ul>
</li>
<li>
<p>One or more external replay clients (WRC) can be started once the <code dir="ltr">PREPARE_REPLAY</code> procedure has been executed.</p>
</li>
<li>
<p>With regard to scale_up_multiplier:</p>
<ul>
<li>
<p>One replay session (base session) of each set of identical sessions will replay every call from the capture as usual.</p>
</li>
<li>
<p>The remaining sessions (scale-up sessions) will only replay calls that are read-only. Thus, DDL, DML, and PL/SQL calls that modified the database is skipped. <code dir="ltr">SELECT</code> <code dir="ltr">FOR</code> <code dir="ltr">UPDATE</code> statements are also skipped.</p>
</li>
<li>
<p>Read-only calls from the scale-up are synchronized appropriately and obey the timings defined by <code dir="ltr">think_time_scale</code>, <code dir="ltr">connect_time_scale</code>, and <code dir="ltr">think_time_auto_correct</code>. Also, the queries are made to wait for the appropriate commits.</p>
</li>
<li>
<p>No replay data or error divergence records are generated for the scale-up sessions.</p>
</li>
<li>
<p>All base or scale-up sessions that replay the same capture file will connect from the same workload replay client.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12610"></a>Examples</p>
<p class="subhead2"><a id="CBACAADJ"></a><a id="ARPLS69088"></a>Application of the connect_time_scale Parameter</p>
<p>If the following was observed during the original workload capture:</p>
<pre dir="ltr">12:00 : Capture was started
12:10 : First session connect  (10m after)
12:30 : Second session connect (30m after)
12:42 : Third session connect  (42m after)
</pre>
<p>If the connect_time_scale is 50, then the session connects will happen as follows:</p>
<pre dir="ltr">12:00 : Replay was started with 50% connect time scale
12:05 : First session connect  ( 5m after)
12:15 : Second session connect (15m after)
12:21 : Third session connect  (21m after)
</pre>
<p>If the connect_time_scale is 200, then the session connects will happen as follows:</p>
<pre dir="ltr">12:00 : Replay was started with 200% connect time scale
12:20 : First session connect  (20m after)
13:00 : Second session connect (60m after)
13:24 : Third session connect  (84m after)
</pre>
<p class="subhead2"><a id="CBAFIIJD"></a><a id="ARPLS69089"></a>Application of the think_time_scale Parameter</p>
<p>If the following was observed during the original workload capture:</p>
<pre dir="ltr">12:00 : User SCOTT connects
12:10 : First user call issued (10m after completion of prevcall)
12:14 : First user call completes in 4mins
12:30 : Second user call issued (16m after completion of prevcall)
12:40 : Second user call completes in 10m
12:42 : Third user call issued ( 2m after completion of prevcall)
12:50 : Third user call completes in 8m
</pre>
<p>If the think_time_scale is 50 during the workload replay, then the user calls will look something like below:</p>
<pre dir="ltr">12:00 : User SCOTT connects
12:05 : First user call issued 5 mins (50% of 10m) after the completion of 
        previous call
12:10 : First user call completes in 5m (takes a minute longer)
12:18 : Second user call issued 8 mins (50% of 16m) after the completion of prev 
        call
12:25 : Second user call completes in 7m (takes 3 minutes less)
12:26 : Third user call issued 1 min  (50% of 2m) after the completion of prev 
        call
12:35 : Third user call completes in 9m (takes a minute longer)
</pre>
<p class="subhead2"><a id="CBAIGDIG"></a><a id="ARPLS69090"></a>Application of the think_time_auto_correct Parameter</p>
<p>If the following was observed during the original workload capture:</p>
<pre dir="ltr">12:00 : User SCOTT connects
12:10 : First user call issued (10m after completion of prevcall)
12:14 : First user call completes in 4m
12:30 : Second user call issued (16m after completion of prevcall)
12:40 : Second user call completes in 10m
12:42 : Third user call issued ( 2m after completion of prevcall)
12:50 : Third user call completes in 8m
</pre>
<p>If the think_time_scale is 100 and the think_time_auto_correct is TRUE during the workload replay, then the user calls will look something like below:</p>
<pre dir="ltr">12:00 : User SCOTT connects
12:10 : First user call issued 10 mins after the completion of prev call
12:15 : First user call completes in 5m (takes 1 minute longer)
12:30 : Second user call issued 15 mins (16m minus the extra time of 1m the prev 
        call took) after the completion of prev call
12:44 : Second user call completes in 14m (takes 4 minutes longer)
12:44 : Third user call issued immediately (2m minus the extra time of 4m the prev 
        call took) after the completion of prev call
12:52 : Third user call completes in 8m
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73996" class="refsect2"><a id="BGBEGDAB"></a>
<h3 class="refsect2"><a id="sthref12611"></a>PREPARE_CONSOLIDATED_REPLAY Procedure</h3>
<p>Similar to the <a href="#CBAFFDFE">PREPARE_REPLAY Procedure</a>, this procedure puts the database in a special &#34;Prepare&#34; mode for a multiple-capture replay. The difference is that this subprogram should be used only for consolidated replays.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12612"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.PREPARE_CONSOLIDATED_REPLAY (
   synchronization           IN BOOLEAN,
   connect_time_scale        IN NUMBER    DEFAULT 100,
   think_time_scale          IN NUMBER    DEFAULT 100,
   think_time_auto_correct   IN BOOLEAN   DEFAULT TRUE,
   capture_sts               IN BOOLEAN   DEFAULT FALSE,
   sts_cap_interval          IN NUMBER    DEFAULT 300);

DBMS_WORKLOAD_REPLAY.PREPARE_CONSOLIDATED_REPLAY (
   synchronization           IN VARCHAR2  DEFAULT &#39;OBJECT_ID&#39;,,
   connect_time_scale        IN NUMBER    DEFAULT 100,
   think_time_scale          IN NUMBER    DEFAULT 100,
   think_time_auto_correct   IN BOOLEAN   DEFAULT TRUE,
   capture_sts               IN BOOLEAN   DEFAULT FALSE,
   sts_cap_interval          IN NUMBER    DEFAULT 300);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12613"></a>Parameters</p>
<div id="ARPLS73997" class="tblformal">
<p class="titleintable"><a id="sthref12614"></a><a id="sthref12615"></a>Table 178-23 PREPARE_CONSOLIDATED_REPLAY Procedure Parameters</p>
<table class="cellalignment4330" title="PREPARE_CONSOLIDATED_REPLAY Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.PREPARE_CONSOLIDATED_REPLAY" dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t25">Parameter</th>
<th class="cellalignment4328" id="r1c2-t25">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t25" headers="r1c1-t25">
<p><code dir="ltr">synchronization</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t25 r1c2-t25">
<p>Turns synchronization <code dir="ltr">ON</code> or <code dir="ltr">OFF</code> during workload replay. When synchronization is <code dir="ltr">ON</code>, the <code dir="ltr">COMMIT</code> order observed during the original workload capture is preserved during replay. Every action that is replayed is executed <code dir="ltr">ONLY</code> <code dir="ltr">AFTER</code> all of its dependent <code dir="ltr">COMMIT</code>s (all <code dir="ltr">COMMIT</code>s that were issued before the given action in the original workload capture) have finished execution. <code dir="ltr">DEFAULT</code> is <code dir="ltr">TRUE</code> which preserves commit order.</p>
<p>When synchronization is <code dir="ltr">OBJECT_ID</code>, a more advanced synchronization scheme is used. Every action that is replayed is executed only after the relevant <code dir="ltr">COMMIT</code>s have finished executing. The relevant <code dir="ltr">COMMIT</code>s are the ones that were issued before the given action in the original workload capture and that had modified at least one of the database objects the given action is referencing (either implicitly or explicitly). This OBJECT_ID scheme has the same logical property of making sure that any action will see the same data it saw during capture, but will allow more concurrency during replays for the actions that do not touch the same objects/tables. <code dir="ltr">DEFAULT VALUE: SCN</code>, preserve commit order. For legacy reasons, there is a boolean version of this procedure:</p>
<ul>
<li>
<p><code dir="ltr">TRUE</code> means <code dir="ltr">&#39;SCN&#39;</code></p>
</li>
<li>
<p><code dir="ltr">FALSE</code> means <code dir="ltr">&#39;OFF&#39;</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t25" headers="r1c1-t25">
<p><code dir="ltr">connect_time_scale</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t25 r1c2-t25">
<p>Scales the time elapsed between the instant the workload capture was started and the session connects with the given value. The input is interpreted as a % value. Can potentially be used to increase or decrease the number of concurrent users during the workload replay. <code dir="ltr">DEFAULT</code> <code dir="ltr">VALUE</code> is 100. See <a href="#CBACAADJ">&#34;Application of the connect_time_scale Parameter&#34;</a>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t25" headers="r1c1-t25">
<p><code dir="ltr">think_time_scale</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t25 r1c2-t25">
<p>Scales the time elapsed between two successive user calls from the same session. The input is interpreted as a % value. Can potentially be used to increase or decrease the number of concurrent users during the workload replay. <code dir="ltr">DEFAULT</code> <code dir="ltr">VALUE</code> is 100. See <a href="#CBAIGDIG">&#34;Application of the think_time_auto_correct Parameter&#34;</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t25" headers="r1c1-t25">
<p><code dir="ltr">think_time_auto_correct</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t25 r1c2-t25">
<p>Auto corrects the think time between calls appropriately when user calls takes longer to complete during replay than during the original capture. <code dir="ltr">DEFAULT</code> is <code dir="ltr">TRUE</code> which is to reduce think time if replay goes slower than capture. See <a href="#CBAIGDIG">&#34;Application of the think_time_auto_correct Parameter&#34;</a></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t25" headers="r1c1-t25">
<p><code dir="ltr">capture_sts</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t25 r1c2-t25">
<p>If this parameter is <code dir="ltr">TRUE</code>, then a SQL tuning set capture is also started in parallel with workload replay. The resulting SQL tuning set can be exported using the <a href="#BGBHGCEA">EXPORT_AWR Procedure</a> along with the Automatic Workload Repository (AWR) data. Currently, parallel SQL tuning set (STS) capture is not supported in an Oracle RAC environment. So, this parameter has no effect in that context. The calling user must have the appropriate privileges (&#39;<code dir="ltr">ADMINISTER SQL TUNING SET</code>&#39;). The default value is <code dir="ltr">FALSE</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t25" headers="r1c1-t25">
<p><code dir="ltr">sts_cap_interval</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t25 r1c2-t25">
<p>Specifies the capture interval of the SQL set capture from the cursor cache in seconds. The default value is 300.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12616"></a>Usage Notes</p>
<p>A consolidated replay replays multiple captures in one replay. Each capture records different system change number (SCN) values. For this reason SCN-based sync is not supported for consolidated replays. Consolidated replays only support non-sync mode and the Object-ID based synchronization, and SCN-based synchronization is currently not supported.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69091" class="refsect2"><a id="CHDHJIIH"></a>
<h3 class="refsect2"><a id="sthref12617"></a>PROCESS_CAPTURE Procedure</h3>
<p>This procedure processes the workload capture found in <code dir="ltr">capture_dir</code> in place.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12618"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.PROCESS_CAPTURE (
   capture_dir            IN   VARCHAR2,
   parallel_level         IN   NUMBER DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12619"></a>Parameters</p>
<div id="ARPLS69092" class="tblformal">
<p class="titleintable"><a id="sthref12620"></a><a id="sthref12621"></a>Table 178-24 PROCESS_CAPTURE Procedure Parameters</p>
<table class="cellalignment4330" title="PROCESS_CAPTURE Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.PROCESS_CAPTURE." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t26">Parameter</th>
<th class="cellalignment4328" id="r1c2-t26">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t26" headers="r1c1-t26">
<p><code dir="ltr">catpure_dir</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t26 r1c2-t26">
<p>(Mandatory) Name of the workload capture directory object (case sensitive). The directory object must point to a valid OS directory that has the appropriate permissions. New files are added to this directory.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t26" headers="r1c1-t26">
<p><code dir="ltr">parallel_level</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t26 r1c2-t26">
<p>Number of Oracle processes used to process the capture in parallel. The <code dir="ltr">NULL</code> default value will auto-compute the parallelism level, whereas a value of 1 will enforce serial execution.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12622"></a>Usage Notes</p>
<ul>
<li>
<p>This subprogram analyzes the workload capture found in the <code dir="ltr">capture_dir</code> and creates new workload replay specific metadata files that are required to replay the given workload capture. It only creates new files and does not modify any files that were originally created during the workload capture. Therefore, this procedure can be run multiple times on the same capture directory, such as when the procedure encounters unexpected errors or is cancelled by the user.</p>
</li>
<li>
<p>Once this procedure runs successfully, the capture_dir can be used as input to the <a href="#CHDDDJBH">INITIALIZE_REPLAY Procedure</a> in order to replay the captured workload present in <code dir="ltr">capture_dir</code>.</p>
</li>
<li>
<p>Before a workload capture can be replayed in a particular database version, the capture must be processed using <code dir="ltr">PROCESS_CAPTURE</code> in the same database version. Once created, a processed workload capture can be used to replay the captured workload multiple times in the same database version.</p>
<p>For example, suppose workload &#34;foo&#34; was captured in <code dir="ltr">rec_dir</code> in Oracle database version 10.2.0.5. In order to replay the workload &#34;foo&#34; in version 11.1.0.1 the workload must be processed in version 11.1.0.1. The following procedure must be executed in an 11.1.0.1 database in order to process the capture directory <code dir="ltr">rec_dir</code>:</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.PROCESS_CAPTURE(&#39;rec_dir&#39;);
</pre>
<p>Now, <code dir="ltr">rec_dir</code> contains a valid 11.1.0.1 processed workload capture that can be used to replay the workload &#34;foo&#34; in 11.1.0.1 databases as many times as required.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69093" class="refsect2"><a id="BGBHJAED"></a>
<h3 class="refsect2"><a id="sthref12623"></a>REMAP_CONNECTION Procedure</h3>
<p>This procedure remaps the captured connection to a new one so that the user sessions can connect to the database in a desired way during workload replay.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12624"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.REMAP_CONNECTION (
   connection_id         IN  NUMBER,
   replay_connection     IN  VARCHAR2);

DBMS_WORKLOAD_REPLAY.REMAP_CONNECTION (
   capture_number        IN  VARCHAR2,
   connection_id         IN  NUMBER,
   replay_connection     IN  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12625"></a>Parameters</p>
<div id="ARPLS69094" class="tblformal">
<p class="titleintable"><a id="sthref12626"></a><a id="sthref12627"></a>Table 178-25 REMAP_CONNECTION Procedure Parameters</p>
<table class="cellalignment4330" title="REMAP_CONNECTION Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.REMAP_CONNECTION." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t27">Parameter</th>
<th class="cellalignment4328" id="r1c2-t27">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t27" headers="r1c1-t27">
<p><code dir="ltr">capture_number</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t27 r1c2-t27">
<p>Pointing to a capture of the current replay schedule</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t27" headers="r1c1-t27">
<p><code dir="ltr">connection_id</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t27 r1c2-t27">
<p>ID of the connection to be remapped. Corresponds to <code dir="ltr">DBA_WORKLOAD_CONNECTION_MAP</code>.<code dir="ltr">CONN_ID</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t27" headers="r1c1-t27">
<p><code dir="ltr">replay_connection</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t27 r1c2-t27">
<p>New connection string to be used during replay</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12628"></a>Usage Notes</p>
<ul>
<li>
<p>Prior to calling <code dir="ltr">REMAP_CONNECTION</code> all replay connection strings are set to <code dir="ltr">NULL</code> by default. If a <code dir="ltr">replay_connection</code> is <code dir="ltr">NULL</code>, then the replay sessions will connect as determined by the replay client&#39;s runtime environment. For example, if the environment variable <code dir="ltr">TNS_ADMIN</code> is defined and the user does not call the <a href="#BGBHJAED">REMAP_CONNECTION Procedure</a>, then the <code dir="ltr">wrc</code> executable will connect to the server specified in the tnsnames.ora file pointed to by <code dir="ltr">TNS_ADMIN</code>.</p>
</li>
<li>
<p>A valid <code dir="ltr">replay_connection</code> must specify a connect identifier or a service point. See the <a class="olink NETRF" href="../NETRF/toc.htm"><span class="italic">Oracle Database Net Services Reference</span></a> for ways to specify connect identifiers (such as net service names, database service names, and net service aliases) and naming methods that can be used to resolve a connect identifier to a connect descriptor.</p>
</li>
<li>
<p>An error is returned if no row matches the given <code dir="ltr">connection_id</code>.</p>
</li>
<li>
<p>Use the <code dir="ltr">DBA_WORKLOAD_CONNECTION_MAP</code> view to review all the connection strings that are used by the subsequent workload replay, and also to examine connection string remappings used for previous workload replays.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73998" class="refsect2"><a id="BGBDHBDI"></a>
<h3 class="refsect2"><a id="sthref12629"></a>REMOVE_CAPTURE Procedure</h3>
<p>This procedure removes the given capture from the current schedule.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12630"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.REMOVE_CAPTURE (
   schedule_capture_number    IN     NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12631"></a>Parameters</p>
<div id="ARPLS73999" class="tblformal">
<p class="titleintable"><a id="sthref12632"></a><a id="sthref12633"></a>Table 178-26 REMOVE_CAPTURE Procedure Parameters</p>
<table class="cellalignment4330" title="REMOVE_CAPTURE Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.REMOVE_CAPTURE." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t28">Parameter</th>
<th class="cellalignment4328" id="r1c2-t28">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t28" headers="r1c1-t28">
<p><code dir="ltr">schedule_capture_number</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t28 r1c2-t28">
<p>Unique ID that identifies this capture within this schedule</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74000" class="refsect2"><a id="BGBHAHJI"></a>
<h3 class="refsect2"><a id="sthref12634"></a>REMOVE_SCHEDULE_ORDERING Procedure</h3>
<p>This procedure removes an existing schedule order from the current replay schedule. Together, <code dir="ltr">schedule_capture_id</code> and <code dir="ltr">waitfor_capture_id</code> form a schedule ordering that previously added by the <a href="#BGBEDGHC">ADD_SCHEDULE_ORDERING Function</a> (<code dir="ltr">schedule_capture_id</code>, <code dir="ltr">waitfor_capture_id</code>). The order is that replay of capture indicated by <code dir="ltr">schedule_capture_id</code> will not start unless the replay of capture indicated by <code dir="ltr">waiting_for_capture_id</code> finishes.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12635"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.REMOVE_SCHEDULE_ORDERING (
   schedule_capture_id     IN         NUMBER,
   waitfor_capture_id      IN         NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12636"></a>Parameters</p>
<div id="ARPLS74001" class="tblformal">
<p class="titleintable"><a id="sthref12637"></a><a id="sthref12638"></a>Table 178-27 REMOVE_SCHEDULE_ORDERING Procedure Parameters</p>
<table class="cellalignment4330" title="REMOVE_SCHEDULE_ORDERING Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.REMOVE_SCHEDULE_ORDERING." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t29">Parameter</th>
<th class="cellalignment4328" id="r1c2-t29">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t29" headers="r1c1-t29">
<p><code dir="ltr">schedule_capture_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t29 r1c2-t29">
<p>Points to a capture that has been added to the current replay schedule (see procedure description).</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t29" headers="r1c1-t29">
<p><code dir="ltr">waitfor_capture_id</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t29 r1c2-t29">
<p>Points to a capture that has been added to the current replay schedule.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12639"></a>Usage Notes</p>
<p>Prerequisites:</p>
<ul>
<li>
<p>The <a href="#BGBDHBJH">BEGIN_REPLAY_SCHEDULE Procedure</a> must have been called.</p>
</li>
<li>
<p>The replay schedule order should have already been added using the <a href="#BGBEDGHC">ADD_SCHEDULE_ORDERING Function</a>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69095" class="refsect2"><a id="CHDHJFDB"></a>
<h3 class="refsect2"><a id="sthref12640"></a>REPORT Function</h3>
<p>This function generates a report on the stipulated workload replay.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12641"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.REPORT (
   replay_id          IN NUMBER,
   format             IN VARCHAR2)
  RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12642"></a>Parameters</p>
<div id="ARPLS69096" class="tblformal">
<p class="titleintable"><a id="sthref12643"></a><a id="sthref12644"></a>Table 178-28 REPORT Function Parameters</p>
<table class="cellalignment4330" title="REPORT Function Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.REPORT." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t30">Parameter</th>
<th class="cellalignment4328" id="r1c2-t30">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t30" headers="r1c1-t30">
<p><code dir="ltr">replay_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t30 r1c2-t30">
<p>(Mandatory) Specifies the ID of the workload replay whose report is requested.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t30" headers="r1c1-t30">
<p><code dir="ltr">format</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t30 r1c2-t30">
<p>(Mandatory) Specifies the report format. Valid values:</p>
<ul>
<li>
<p>HTML - Generates the HTML version of the report</p>
</li>
<li>
<p>XML - Generates the XML version of the report</p>
</li>
<li>
<p>TEXT - Generates the text version of the report</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12645"></a>Return Values</p>
<p>The report body in the desired format returned as a <code dir="ltr">CLOB</code></p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69098" class="refsect2"><a id="CBADIDCD"></a>
<h3 class="refsect2"><a id="sthref12646"></a>RESUME_REPLAY Procedure</h3>
<p>This procedure resumes a paused workload replay.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12647"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.RESUME_REPLAY;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12648"></a>Usage Notes</p>
<p>Prerequisite: A call to the <a href="#CHDHCADH">PAUSE_REPLAY Procedure</a> must have already been issued.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72143" class="refsect2"><a id="BGBEEBAE"></a>
<h3 class="refsect2"><a id="sthref12649"></a>REUSE_REPLAY_FILTER_SET Procedure</h3>
<p>This procedure reuses filters in the specified filter set as if each were added using the <a href="#BGBEDGHC">ADD_SCHEDULE_ORDERING Function</a>. Each call adds one filter set, which is a collection of individual filters on various attributes. Also, a new filter rule can be added, and an existing filter can be deleted before invoking the <a href="#BGBFEFFF">CREATE_FILTER_SET Procedure</a> to create a new filter set.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12650"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.REUSE_REPLAY_FILTER_SET( 
   replay_dir  IN VARCHAR2,
   filter_set  IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12651"></a>Parameters</p>
<div id="ARPLS72144" class="tblformal">
<p class="titleintable"><a id="sthref12652"></a><a id="sthref12653"></a>Table 178-29 REUSE_REPLAY_FILTER_SET Procedure Parameters</p>
<table class="cellalignment4330" title="REUSE_REPLAY_FILTER_SET Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.REUSE_REPLAY_FILTER_SET." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t31">Parameter</th>
<th class="cellalignment4328" id="r1c2-t31">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t31" headers="r1c1-t31">
<p><code dir="ltr">replay_dir</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t31 r1c2-t31">
<p>Capture ID of the existing filter set with which it is associated</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t31" headers="r1c1-t31">
<p><code dir="ltr">filter_set</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t31 r1c2-t31">
<p>Name of the filter set to be reused</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73105" class="refsect2"><a id="BGBHIACF"></a>
<h3 class="refsect2"><a id="sthref12654"></a>SET_ADVANCED_PARAMETER Procedure</h3>
<p>This procedure sets an advanced parameter for replay besides the ones used with the <a href="#CBAFFDFE">PREPARE_REPLAY Procedure</a>. The advanced parameters control aspects of the replay that are more specialized. The advanced parameters are reset to their default values after the replay has finished.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12655"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.SET_ADVANCED_PARAMETER( 
   pname    IN   VARCHAR2,
   pvalue   IN   VARCHAR2);

DBMS_WORKLOAD_REPLAY.SET_ADVANCED_PARAMETER( 
   pname    IN   VARCHAR2,
   pvalue   IN   NUMBER);

DBMS_WORKLOAD_REPLAY.SET_ADVANCED_PARAMETER( 
   pname    IN   VARCHAR2,
   pvalue   IN   BOOLEAN);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12656"></a>Parameters</p>
<div id="ARPLS73106" class="tblformal">
<p class="titleintable"><a id="sthref12657"></a><a id="sthref12658"></a>Table 178-30 SET_ADVANCED_PARAMETER Procedure Parameters</p>
<table class="cellalignment4330" title="SET_ADVANCED_PARAMETER Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.SET_ADVANCED_PARAMETER." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t32">Parameter</th>
<th class="cellalignment4328" id="r1c2-t32">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t32" headers="r1c1-t32">
<p><code dir="ltr">pname</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t32 r1c2-t32">
<p>Name of the parameter (case insensitive)</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t32" headers="r1c1-t32">
<p><code dir="ltr">pvalue</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t32 r1c2-t32">
<p>Value of the parameter</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12659"></a>Usage Notes</p>
<p>The current parameters and values that can be used are:</p>
<pre dir="ltr">&#39;DO_NO_WAIT_COMMITS&#39;: (default: FALSE)
</pre>
<p>This parameter controls whether the <code dir="ltr">COMMIT</code>s issued by replay sessions is <code dir="ltr">NOWAIT</code>. The default value for this parameter is <code dir="ltr">FALSE</code>. In this case all the <code dir="ltr">COMMIT</code>s are issued with the mode they were captured (<code dir="ltr">wait</code>, <code dir="ltr">no-wait</code>, <code dir="ltr">batch</code>, <code dir="ltr">no-batch</code>). If the parameter is set to <code dir="ltr">TRUE</code>, then all <code dir="ltr">COMMIT</code>s are issued in <code dir="ltr">no-wait</code> mode. This is useful in cases where the replay is becoming noticeably slow because of a high volume of concurrent <code dir="ltr">COMMIT</code>s. Setting the parameter to <code dir="ltr">TRUE</code> will significantly decrease the waits on the <code dir="ltr">&#39;log file sync&#39;</code> event during the replay with respect to capture.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73107" class="refsect2"><a id="CBABDBAG"></a>
<h3 class="refsect2"><a id="sthref12660"></a>SET_REPLAY_DIRECTORY Procedure</h3>
<p>This procedure sets a directory that contains multiple workload captures as the current replay directory.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12661"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.SET_REPLAY_DIRECTORY (
   replay_dir    IN    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12662"></a>Parameters</p>
<div id="ARPLS73108" class="tblformal">
<p class="titleintable"><a id="sthref12663"></a><a id="sthref12664"></a>Table 178-31 SET_REPLAY_DIRECTORY Procedure Parameters</p>
<table class="cellalignment4330" title="SET_REPLAY_DIRECTORY Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.SET_REPLAY_DIRECTORY." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t33">Parameter</th>
<th class="cellalignment4328" id="r1c2-t33">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t33" headers="r1c1-t33">
<p><code dir="ltr">replay_dir</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t33 r1c2-t33">
<p>Name of the OS directory containing the captures for a workload consolidation</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74002" class="refsect2"><a id="BGBGGIIC"></a>
<h3 class="refsect2"><a id="sthref12665"></a>SET_REPLAY_TIMEOUT Procedure</h3>
<p>This procedure sets the replay timeout setting. The purpose is to abort user calls that might make the replay much slower or even cause a replay hang.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12666"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.SET_REPLAY_TIMEOUT (
   enabled       OUT  BOOLEAN DEFAULT TRUE, 
   min_delay     OUT  NUMBER DEFAULT 10,
   max_delay     OUT  NUMBER DEFAULT 120,
   delay_factor  OUT  NUMBER DEFAULT 8);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12667"></a>Parameters</p>
<div id="ARPLS74003" class="tblformal">
<p class="titleintable"><a id="sthref12668"></a><a id="sthref12669"></a>Table 178-32 SET_REPLAY_TIMEOUT Procedure Parameters</p>
<table class="cellalignment4330" title="SET_REPLAY_TIMEOUT Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.SET_REPLAY_TIMEOUT." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t34">Parameter</th>
<th class="cellalignment4328" id="r1c2-t34">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t34" headers="r1c1-t34">
<p><code dir="ltr">enabled</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t34 r1c2-t34">
<p><code dir="ltr">TRUE</code> to enable the timeout action, and <code dir="ltr">FALSE</code> to disable.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t34" headers="r1c1-t34">
<p><code dir="ltr">min_delay</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t34 r1c2-t34">
<p>Lower bound of call delay in minutes. The replay action is activated only when the delay is equal to or more than <code dir="ltr">min_delay</code>. Default = 10.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t34" headers="r1c1-t34">
<p><code dir="ltr">max_delay</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t34 r1c2-t34">
<p>Upper bound of call delay in minutes. The timeout action throws <code dir="ltr">ORA-15569</code> when the delay is more than <code dir="ltr">max_delay</code>. Default = 120.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t34" headers="r1c1-t34">
<p><code dir="ltr">delay_factor</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t34 r1c2-t34">
<p>Factor for the call delay that is between <code dir="ltr">min_delay</code> and <code dir="ltr">max_delay</code>. The timeout action throws <code dir="ltr">ORA-15569</code> when the current replay elapsed time is more than the product of capture elapsed time and <code dir="ltr">delay_factor</code>. Default = 8.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12670"></a>Usage Notes</p>
<ul>
<li>
<p>This procedure can be called anytime during replay.</p>
</li>
<li>
<p>Call delay is defined as the difference between replay and capture if replay elapsed time is longer than call elapsed time.</p>
</li>
<li>
<p>Once a replay timeout action is enabled, a user call will exit with <code dir="ltr">ORA-15569</code> if it has been delayed more than the condition specified by the replay action. The call and its error are reported as error divergence.</p>
</li>
<li>
<p>Replay timeout operates as follows:</p>
<ul>
<li>
<p>The timeout action has no effect if it is not enabled.</p>
</li>
<li>
<p>If the call delay in minutes is less than a lower bound specified by parameter <code dir="ltr">min_delay</code>, then the timeout action is non-operational.</p>
</li>
<li>
<p>If the delay in minutes is more than a upper bound specified by parameter <code dir="ltr">max_delay</code>, the timeout action will abort the user call and throw <code dir="ltr">ORA-15569</code>.</p>
</li>
<li>
<p>For delay that is between the lower bound and upper bound, the user call will abort with <code dir="ltr">ORA-15569</code> only when the current replay elapsed time is more than the product of capture elapsed time and parameter <code dir="ltr">delay_factor</code>.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74963" class="refsect2"><a id="BGBGFDFI"></a>
<h3 class="refsect2"><a id="sthref12671"></a>SET_USER_MAPPING Procedure</h3>
<p>This procedure sets a new schema or user name to be used during replay instead of the captured user.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12672"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.SET_USER_MAPPING (
   schedule_cap_id      IN NUMBER,
   capture_user         IN VARCHAR2,
   replay_user          IN VARCHAR2);

DBMS_WORKLOAD_REPLAY.SET_USER_MAPPING (
   capture_user         IN VARCHAR2,
   replay_user          IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12673"></a>Parameters</p>
<div id="ARPLS74964" class="tblformal">
<p class="titleintable"><a id="sthref12674"></a><a id="sthref12675"></a>Table 178-33 SET_USER_MAPPING Procedure Parameters</p>
<table class="cellalignment4330" title="SET_USER_MAPPING Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.SET_USER_MAPPING." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t35">Parameter</th>
<th class="cellalignment4328" id="r1c2-t35">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t35" headers="r1c1-t35">
<p><code dir="ltr">schedule_cap_id</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t35 r1c2-t35">
<p>ID of the a capture in the schedule</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t35" headers="r1c1-t35">
<p><code dir="ltr">capture_user</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t35 r1c2-t35">
<p>User name during the time of the workload capture</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t35" headers="r1c1-t35">
<p><code dir="ltr">replay_user</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t35 r1c2-t35">
<p>User name to which captured user is remapped during replay.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12676"></a>Usage Notes</p>
<ul>
<li>
<p>A <code dir="ltr">schedule_cap_id</code> of <code dir="ltr">NULL</code> is used for regular non-consolidate replay.</p>
</li>
<li>
<p>The replay must be initialized but not prepared in order to use this subprogram.</p>
</li>
<li>
<p>If <code dir="ltr">replay_user</code> is set to <code dir="ltr">NULL</code>, then the mapping is disabled.</p>
</li>
<li>
<p>After multiple calls with the same <code dir="ltr">capture_user</code>, the last call always takes effect.</p>
</li>
<li>
<p>To list all the mappings that will be in effect during the subsequent replay execute the following:</p>
<pre dir="ltr">SELECT * FROM DBA_WORKLOAD_ACTIVE_USER_MAP
</pre></li>
<li>
<p>The overloaded version without the <code dir="ltr">schedule_cap_id</code> calls the one with the <code dir="ltr">schedule_cap_id</code> argument by passing in <code dir="ltr">NULL</code>.</p>
</li>
<li>
<p>Mappings are stored in a table made public through the view <code dir="ltr">DBA_WORKLOAD_USER_MAP</code>. To remove old mappings execute</p>
<pre dir="ltr">DELETE * FROM DBA_WORKLOAD_USER_MAP
</pre></li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74454" class="refsect2"><a id="BGBFJGIH"></a>
<h3 class="refsect2"><a id="sthref12677"></a>START_CONSOLIDATED_REPLAY Procedure</h3>
<p>This procedure starts the replay of a multiple-capture capture. It should be used only for consolidated replays.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12678"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.START_CONSOLIDATED_REPLAY;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12679"></a>Usage Notes</p>
<p>Prerequisites:</p>
<ul>
<li>
<p>The call to the <a href="#CBAFFDFE">PREPARE_REPLAY Procedure</a> was already issued.</p>
</li>
<li>
<p>A sufficient number of external replay clients (WRC) that can faithfully replay the captured workload already started. The status of such external replay clients can be monitored using <code dir="ltr">V$WORKLOAD_REPLAY_CLIENTS</code>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69099" class="refsect2"><a id="CHDDEHHI"></a>
<h3 class="refsect2"><a id="sthref12680"></a>START_REPLAY Procedure</h3>
<p>This procedure starts the workload replay. All the external replay clients (WRC) that are currently connected to the replay database will automatically be notified, and those replay clients (WRC) will begin issuing the captured workload. It should only be used for consolidated replays.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12681"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.START_REPLAY;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12682"></a>Usage Notes</p>
<ul>
<li>
<p>Prerequisites:</p>
<ul>
<li>
<p>The call to the <a href="#CBAFFDFE">PREPARE_REPLAY Procedure</a> was already issued.</p>
</li>
<li>
<p>A sufficient number of external replay clients (WRC) that can faithfully replay the captured workload already started. The status of such external replay clients can be monitored using <code dir="ltr">V$WORKLOAD_REPLAY_CLIENTS</code>.</p>
</li>
</ul>
</li>
<li>
<p>Use the WRC&#39;s <code dir="ltr">CALIBRATE</code> mode to determine the number of replay clients that might be required to faithfully replay the captured workload. For example:</p>
<pre dir="ltr">$ wrc mode=calibrate replaydir=.
</pre></li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72145" class="refsect2"><a id="BGBCECGI"></a>
<h3 class="refsect2"><a id="sthref12683"></a>USE_FILTER_SET Procedure</h3>
<p>This procedure applies a filter set to a capture in the current replay schedule. The filter set must have been created by calling the <a href="#BGBFEFFF">CREATE_FILTER_SET Procedure</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12684"></a>Syntax</p>
<pre dir="ltr">DBMS_WORKLOAD_REPLAY.USE_FILTER_SET( 
   capture_number   IN    VARCHAR2,
   filter_set       IN    VARCHAR2);

DBMS_WORKLOAD_REPLAY.USE_FILTER_SET( 
   filter_set       IN    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12685"></a>Parameters</p>
<div id="ARPLS72146" class="tblformal">
<p class="titleintable"><a id="sthref12686"></a><a id="sthref12687"></a>Table 178-34 USE_FILTER_SET Procedure Parameters</p>
<table class="cellalignment4330" title="USE_FILTER_SET Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_REPLAY.USE_FILTER_SET." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t36">Parameter</th>
<th class="cellalignment4328" id="r1c2-t36">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t36" headers="r1c1-t36">
<p><code dir="ltr">capture_number</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t36 r1c2-t36">
<p>Pointing to a capture of the current replay schedule</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t36" headers="r1c1-t36">
<p><code dir="ltr">filter_set</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t36 r1c2-t36">
<p>Name of the filter set</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12688"></a>Usage Notes</p>
<p>The filter set must have been created by calling the <a href="#BGBFEFFF">CREATE_FILTER_SET Procedure</a>.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4320">
<tr>
<td class="cellalignment4329">
<table class="cellalignment4325">
<tr>
<td class="cellalignment4324"><a href="d_workload_capture.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4324"><a href="d_workload_repos.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4332">
<table class="cellalignment4323">
<tr>
<td class="cellalignment4324"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4324"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4324"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4324"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4324"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4324"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>